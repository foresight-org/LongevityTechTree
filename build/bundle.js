var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(r)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t}function c(e,t,n,r){if(e){const i=u(e,t,n,r);return e[0](i)}}function u(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function h(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function f(e,t,n,r,i,o){if(i){const s=u(t,n,r,o);e.p(s,i)}}function d(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function p(e){return null==e?"":e}function m(t){return t&&s(t.destroy)?t.destroy:e}const g="undefined"!=typeof window;let v=g?()=>window.performance.now():()=>Date.now(),y=g?e=>requestAnimationFrame(e):e;const w=new Set;function b(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&y(b)}function x(e,t){e.appendChild(t)}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function k(e){const t=O("style");return function(e,t){x(e.head||e,t)}($(e),t),t.sheet}function S(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function O(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function A(e){return document.createTextNode(e)}function M(){return A(" ")}function P(){return A("")}function j(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function T(e){return function(t){return t.preventDefault(),e.call(this,t)}}function N(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function D(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:I(e,r,t[r])}function R(e,t){for(const n in t)I(e,n,t[n])}function L(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:I(e,t,n)}function B(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function V(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let F;function q(){if(void 0===F){F=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){F=!0}}return F}function H(e,t,n){e.classList[n?"add":"remove"](t)}function W(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class U{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=E(t.nodeName):this.e=O(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)S(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(C)}}const J=new Map;let K,G=0;function Q(e,t,n,r,i,o,s,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=$(e),{stylesheet:d,rules:p}=J.get(f)||function(e,t){const n={stylesheet:k(t),rules:{}};return J.set(e,n),n}(f,e);p[h]||(p[h]=!0,d.insertRule(`@keyframes ${h} ${u}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${i}ms 1 both`,G+=1,h}function Y(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),G-=i,G||y((()=>{G||(J.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),J.clear())})))}function X(e){K=e}function Z(){if(!K)throw new Error("Function called outside component initialization");return K}function ee(e){Z().$$.before_update.push(e)}function te(e){Z().$$.on_mount.push(e)}function ne(e){Z().$$.on_destroy.push(e)}function re(){const e=Z();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=W(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function ie(e,t){return Z().$$.context.set(e,t),t}function oe(e){return Z().$$.context.get(e)}function se(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const ae=[],le=[],ce=[],ue=[],he=Promise.resolve();let fe=!1;function de(){fe||(fe=!0,he.then(be))}function pe(){return de(),he}function me(e){ce.push(e)}function ge(e){ue.push(e)}const ve=new Set;let ye,we=0;function be(){const e=K;do{for(;we<ae.length;){const e=ae[we];we++,X(e),xe(e.$$)}for(X(null),ae.length=0,we=0;le.length;)le.pop()();for(let e=0;e<ce.length;e+=1){const t=ce[e];ve.has(t)||(ve.add(t),t())}ce.length=0}while(ae.length);for(;ue.length;)ue.pop()();fe=!1,ve.clear(),X(e)}function xe(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function $e(e,t,n){e.dispatchEvent(W(`${t?"intro":"outro"}${n}`))}const ke=new Set;let Se;function Ce(){Se={r:0,c:[],p:Se}}function _e(){Se.r||o(Se.c),Se=Se.p}function Oe(e,t){e&&e.i&&(ke.delete(e),e.i(t))}function Ee(e,t,n,r){if(e&&e.o){if(ke.has(e))return;ke.add(e),Se.c.push((()=>{ke.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const Ae={duration:0};function Me(n,r,i,a){let l=r(n,i),c=a?0:1,u=null,h=null,f=null;function d(){f&&Y(n,f)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:i=0,duration:s=300,easing:a=t,tick:m=e,css:g}=l||Ae,x={start:v()+i,b:r};r||(x.group=Se,Se.r+=1),u||h?h=x:(g&&(d(),f=Q(n,c,r,s,i,a,g)),r&&m(0,1),u=p(x,s),me((()=>$e(n,r,"start"))),function(e){let t;0===w.size&&y(b),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(h&&e>h.start&&(u=p(h,s),h=null,$e(n,u.b,"start"),g&&(d(),f=Q(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)m(c=u.b,1-c),$e(n,u.b,"end"),h||(u.b?d():--u.group.r||o(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),m(c,1-c)}return!(!u&&!h)})))}return{run(e){s(l)?(ye||(ye=Promise.resolve(),ye.then((()=>{ye=null}))),ye).then((()=>{l=l(),m(e)})):m(e)},end(){d(),u=h=null}}}const Pe="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function je(e,t){e.d(1),t.delete(e.key)}function Te(e,t){Ee(e,1,1,(()=>{t.delete(e.key)}))}function Ne(e,t,n,r,i,o,s,a,l,c,u,h){let f=e.length,d=o.length,p=f;const m={};for(;p--;)m[e[p].key]=p;const g=[],v=new Map,y=new Map;for(p=d;p--;){const e=h(i,o,p),a=n(e);let l=s.get(a);l?r&&l.p(e,t):(l=c(a,e),l.c()),v.set(a,g[p]=l),a in m&&y.set(a,Math.abs(p-m[a]))}const w=new Set,b=new Set;function x(e){Oe(e,1),e.m(a,u),s.set(e.key,e),u=e.first,d--}for(;f&&d;){const t=g[d-1],n=e[f-1],r=t.key,i=n.key;t===n?(u=t.first,f--,d--):v.has(i)?!s.has(r)||w.has(r)?x(t):b.has(i)?f--:y.get(r)>y.get(i)?(b.add(r),x(t)):(w.add(i),f--):(l(n,s),f--)}for(;f--;){const t=e[f];v.has(t.key)||l(t,s)}for(;d;)x(g[d-1]);return g}function Ie(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function De(e){return"object"==typeof e&&null!==e?e:{}}function Re(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Le(e){e&&e.c()}function Be(e,t,n,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),i||me((()=>{const t=l.map(r).filter(s);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(me)}function ze(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ve(t,n,r,s,a,l,c,u=[-1]){const h=K;X(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(f.root);let d=!1;if(f.ctx=r?r(t,n.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=i)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](i),d&&function(e,t){-1===e.$$.dirty[0]&&(ae.push(e),de(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),d=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(C)}else f.fragment&&f.fragment.c();n.intro&&Oe(t.$$.fragment),Be(t,n.target,n.anchor,n.customElement),be()}X(h)}class Fe{$destroy(){ze(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function qe(e,t){return t&&e&&t.items.find((t=>t.id===e))}function He(e,t,n,r){e.pos.x+=n,e.pos.y+=r,(e.children||[]).forEach((e=>{He(qe(e,t),t,n,r)}))}function We(e,t){(e.children||[]).forEach((e=>{We(qe(e,t),t)}));let n=Math.min(300,e.notes?10*e.notes.length:0),r=e.notes?20*Math.ceil(9*e.notes.length/n):0,i=Math.max(25+.5*e.label.length*9,n/2),o=Math.max(...e.children.map((e=>{let n=qe(e,t);return n.pos.x+n.width/2+15})),e.pos.x)-e.pos.x,s=e.pos.x-Math.min(...e.children.map((e=>{let n=qe(e,t);return n.pos.x-n.width/2-15})),e.pos.x);e.width=2*Math.max(i,o,s);let a=15+r/2,l=e.children.map((e=>{let n=qe(e,t);return n.pos.y+n.height/2+30})),c=Math.max(...l,e.pos.y)-e.pos.y,u=e.children.map((e=>{let n=qe(e,t);return n.pos.y-n.height/2-30-r})),h=e.pos.y-Math.min(...u,e.pos.y);e.height=2*Math.max(a,h,c)}function Ue(e,t,n,r){e.level=r&&r.id===e.id?500+n:n,e.children.forEach((n=>Ue(qe(n,t),t,e.level+2,r)))}function Je(e,t){return e?(function(e){e.items.filter((e=>"node"===e.kind)).forEach((e=>{e.children=[],e.pos&&e.pos.x&&e.pos.y||(console.error(`Got null position for ${e.label}`),e.pos={x:600*Math.random(),y:600*Math.random()}),e.notes=e.notes??"",e.hasOwnProperty("parent")||(e.parent=null)})),e.items.forEach((t=>{if(t.parent){let n=qe(t.parent,e);if(!n)return void delete t.parent;n.children=[...n.children||[],t.id]}}))}(e),e.items.filter((e=>"node"===e.kind&&!e.parent)).forEach((n=>{We(n,e),Ue(n,e,0,t)})),e.items.filter((e=>"edge"===e.kind)).forEach((t=>{t.level=Math.min(t.fromId?qe(t.fromId,e).level:20,t.toId?qe(t.toId,e).level:20)-1})),e):null}function Ke(e,t,n){"edge"===e.kind?t.items=t.items.filter((t=>t!=e)):"node"===e.kind&&(n?(t.items.filter((t=>"edge"===t.kind&&[t.fromId,t.toId].includes(e.id))).forEach((e=>{Ke(e,t,!1)})),t.items.filter((t=>"node"===t.kind&&t.parent===e.id)).forEach((e=>{Ke(e,t,!0)})),t.items=t.items.filter((t=>t!=e))):(t.items.filter((t=>"node"===t.kind&&t.parent===e.id)).forEach((t=>{e.parent?t.parent=e.parent:delete t.parent})),t.items.filter((t=>"edge"===t.kind&&[t.fromId,t.toId].includes(e.id))).forEach((t=>{t.fromId===e.id&&(e.parent?t.fromId=e.parent:(delete t.fromId,t.fromOrphan={pos:{x:e.pos.x,y:e.pos.y}})),t.toId===e.id&&(e.parent?t.toId=e.parent:(delete t.toId,t.toOrphan={pos:{x:e.pos.x,y:e.pos.y}}))})),t.items=t.items.filter((t=>t!=e))))}function Ge(e,t,n){const r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;let i=r.matrixTransform(n.getCTM().inverse());return{x:i.x,y:i.y}}const Qe={elegant:{name:"elegant",bgfill:"#334155",grid:"cartesian",nodefill:"#bae6fd",nodelabelstroke:"#334155",nodeborder:"white",edgestroke:"red",edgeshape:"curved",edgestroketype:"solid",font:"Dosis",badges:["‚úÖ","‚ùå","‚ö°","üëé","üëç"]},foresight:{name:"foresight",bgfill:"#1c170b",grid:!1,nodefill:"#7b9ecb",nodelabelstroke:"black",nodeborder:"white",edgestroke:"#ccc",edgeshape:"ortho",edgestroketype:"solid",font:"Roboto Condensed",badges:["‚úÖ","‚ùå","‚ö°","üëé","üëç"]},classic:{name:"classic",bgfill:"#f3f3f3",grid:!1,font:"Balsamiq Sans",nodefill:"#fbe6a3",nodelabelstroke:"black",nodeborder:"black",edgestroke:"#4277dd",edgeshape:"curved",edgestroketype:"solid",badges:["‚úÖ","‚ùå","‚ö°","üëé","üëç"]}};function Ye(e){let t,n,r,i;return{c(){t=E("path"),I(t,"d",n=`M ${e[1]-e[3]},${e[2]-e[3]} l ${2*e[3]},${2*e[3]} M ${e[1]+e[3]},${e[2]-e[3]} l ${-2*e[3]},${2*e[3]}`),I(t,"data-handle",e[4]),I(t,"class","svelte-c8wrgx")},m(n,o){S(n,t,o),r||(i=[j(t,"click",e[8]),j(t,"mousedown",N(e[9]))],r=!0)},p(e,r){14&r&&n!==(n=`M ${e[1]-e[3]},${e[2]-e[3]} l ${2*e[3]},${2*e[3]} M ${e[1]+e[3]},${e[2]-e[3]} l ${-2*e[3]},${2*e[3]}`)&&I(t,"d",n),16&r&&I(t,"data-handle",e[4])},d(e){e&&C(t),r=!1,o(i)}}}function Xe(e){let t,n,r,i;return{c(){t=E("path"),I(t,"d",n=`M ${e[1]},${e[2]-e[3]} v ${2*e[3]} M ${e[1]-e[3]},${e[2]} h ${2*e[3]}`),I(t,"data-handle",e[4]),I(t,"class","svelte-c8wrgx")},m(n,o){S(n,t,o),r||(i=[j(t,"click",e[6]),j(t,"mousedown",N(e[7]))],r=!0)},p(e,r){14&r&&n!==(n=`M ${e[1]},${e[2]-e[3]} v ${2*e[3]} M ${e[1]-e[3]},${e[2]} h ${2*e[3]}`)&&I(t,"d",n),16&r&&I(t,"data-handle",e[4])},d(e){e&&C(t),r=!1,o(i)}}}function Ze(t){let n,r,i,s,a;function l(e,t){return"plus"===e[0]?Xe:"cross"===e[0]?Ye:void 0}let c=l(t),u=c&&c(t);return{c(){n=E("g"),r=E("circle"),u&&u.c(),I(r,"cx",t[1]),I(r,"cy",t[2]),I(r,"r",i=t[3]+2),I(r,"title",t[5]),I(r,"data-handle",t[4]),I(r,"class","svelte-c8wrgx"),I(n,"class","svelte-c8wrgx")},m(e,i){S(e,n,i),x(n,r),u&&u.m(n,null),s||(a=[j(r,"click",t[10]),j(r,"mousedown",N(t[11]))],s=!0)},p(e,[t]){2&t&&I(r,"cx",e[1]),4&t&&I(r,"cy",e[2]),8&t&&i!==(i=e[3]+2)&&I(r,"r",i),32&t&&I(r,"title",e[5]),16&t&&I(r,"data-handle",e[4]),c===(c=l(e))&&u?u.p(e,t):(u&&u.d(1),u=c&&c(e),u&&(u.c(),u.m(n,null)))},i:e,o:e,d(e){e&&C(n),u&&u.d(),s=!1,o(a)}}}function et(e,t,n){let{kind:r="plus"}=t,{x:i}=t,{y:o}=t,{size:s=4}=t,{data:a}=t,{title:l}=t;return e.$$set=e=>{"kind"in e&&n(0,r=e.kind),"x"in e&&n(1,i=e.x),"y"in e&&n(2,o=e.y),"size"in e&&n(3,s=e.size),"data"in e&&n(4,a=e.data),"title"in e&&n(5,l=e.title)},[r,i,o,s,a,l,function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)}]}class tt extends Fe{constructor(e){super(),Ve(this,e,et,Ze,a,{kind:0,x:1,y:2,size:3,data:4,title:5})}}function nt(e,t,n){const r=e.slice();return r[24]=t[n],r}function rt(e){let t,n,r,i,s,a,l,c,u,h,f=e[1].notes+"";return{c(){t=E("foreignObject"),n=O("div"),r=A(f),i=M(),I(n,"class","foreign-obj-div svelte-prylvu"),I(t,"x",s=e[1].pos.x-e[4]/2+10),I(t,"y",a=e[1].pos.y-e[1].height/2+30),I(t,"font-family",l=e[0].font),I(t,"font-weight","300"),I(t,"font-size",c=e[1].fontSize),I(t,"width",e[4]),I(t,"height",e[5])},m(o,s){S(o,t,s),x(t,n),x(n,r),x(n,i),u||(h=[j(t,"mousedown",N(e[16])),j(t,"mouseup",N(e[17])),j(t,"click",N(e[9]))],u=!0)},p(e,n){2&n&&f!==(f=e[1].notes+"")&&B(r,f),18&n&&s!==(s=e[1].pos.x-e[4]/2+10)&&I(t,"x",s),2&n&&a!==(a=e[1].pos.y-e[1].height/2+30)&&I(t,"y",a),1&n&&l!==(l=e[0].font)&&I(t,"font-family",l),2&n&&c!==(c=e[1].fontSize)&&I(t,"font-size",c),16&n&&I(t,"width",e[4]),32&n&&I(t,"height",e[5])},d(e){e&&C(t),u=!1,o(h)}}}function it(e){let t,n,r=[[1,0],[0,1],[-1,0],[0,-1]],i=[];for(let t=0;t<4;t+=1)i[t]=ot(nt(e,r,t));const o=e=>Ee(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<4;e+=1)i[e].c();t=P()},m(e,r){for(let t=0;t<4;t+=1)i[t].m(e,r);S(e,t,r),n=!0},p(e,n){if(386&n){let s;for(r=[[1,0],[0,1],[-1,0],[0,-1]],s=0;s<4;s+=1){const o=nt(e,r,s);i[s]?(i[s].p(o,n),Oe(i[s],1)):(i[s]=ot(o),i[s].c(),Oe(i[s],1),i[s].m(t.parentNode,t))}for(Ce(),s=4;s<4;s+=1)o(s);_e()}},i(e){if(!n){for(let e=0;e<4;e+=1)Oe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<4;e+=1)Ee(i[e]);n=!1},d(e){_(i,e),e&&C(t)}}}function ot(e){let t,n;return t=new tt({props:{kind:"plus",data:22+e[24][1]+10*e[24][0],x:e[1].pos.x+e[24][0]*e[1].width/2,y:e[1].pos.y+e[24][1]*e[1].height/2,title:"Create new connected node",size:4}}),t.$on("click",e[7]),t.$on("mousedown",e[8]),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.x=e[1].pos.x+e[24][0]*e[1].width/2),2&n&&(r.y=e[1].pos.y+e[24][1]*e[1].height/2),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function st(e){let t,n,r,i,s,a,l,c,u,h,f,d=e[1].badge+"";return{c(){t=E("g"),n=E("circle"),a=E("text"),l=A(d),I(n,"cx",r=e[1].pos.x-e[1].width/2),I(n,"cy",i=e[1].pos.y-e[1].height/2),I(n,"r",s=10),I(n,"fill","white"),I(n,"stroke","orange"),I(a,"x",c=e[1].pos.x-e[1].width/2-7),I(a,"y",u=e[1].pos.y-e[1].height/2+6),I(a,"stroke","white"),I(a,"fill","white"),I(a,"class","svelte-prylvu"),I(t,"class","badge")},m(r,i){S(r,t,i),x(t,n),x(t,a),x(a,l),h||(f=[j(n,"mousedown",N(e[18])),j(n,"mouseup",N(e[19])),j(n,"click",N(e[20])),j(a,"mousedown",N(e[21])),j(a,"mouseup",N(e[22])),j(a,"click",N(e[23]))],h=!0)},p(e,t){2&t&&r!==(r=e[1].pos.x-e[1].width/2)&&I(n,"cx",r),2&t&&i!==(i=e[1].pos.y-e[1].height/2)&&I(n,"cy",i),2&t&&d!==(d=e[1].badge+"")&&B(l,d),2&t&&c!==(c=e[1].pos.x-e[1].width/2-7)&&I(a,"x",c),2&t&&u!==(u=e[1].pos.y-e[1].height/2+6)&&I(a,"y",u)},d(e){e&&C(t),h=!1,o(f)}}}function at(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,O,M=e[1].label+"",T=e[1].notes&&rt(e),D=e[2]&&it(e),R=e[1].badge&&st(e);return{c(){t=E("g"),n=E("rect"),f=E("text"),d=A(M),T&&T.c(),b=P(),D&&D.c(),$=P(),R&&R.c(),I(n,"x",r=e[1].pos.x-e[1].width/2),I(n,"y",i=e[1].pos.y-e[1].height/2),I(n,"width",s=e[1].width),I(n,"height",a=e[1].height),I(n,"fill",l=e[1].fill||e[0].nodefill),I(n,"stroke",c=e[2]?"blue":e[3]?"red":e[1].bordercolor||e[0].nodeborder),I(n,"stroke-width",u=e[2]||e[3]?"6px":"3px"),I(n,"rx",h=8+Math.floor(e[1].height/50)),I(n,"class","svelte-prylvu"),I(f,"x",p=e[1].pos.x-.5*e[1].label.length*10+5),I(f,"y",m=e[1].pos.y-e[1].height/2+20),I(f,"font-family",g=e[0].font),I(f,"font-weight",v=e[1].children.length>0||e[1].notes?.length>0?"700":"300"),I(f,"font-size",y=e[1].fontSize),I(f,"fill",w=e[1].labelcolor||e[0].nodelabelstroke),I(f,"class","svelte-prylvu"),I(t,"class","svelte-prylvu")},m(r,i){S(r,t,i),x(t,n),x(t,f),x(f,d),T&&T.m(t,null),x(t,b),D&&D.m(t,null),x(t,$),R&&R.m(t,null),k=!0,_||(O=[j(n,"mousedown",N(e[12])),j(n,"mouseup",N(e[13])),j(n,"click",N(e[11])),j(f,"mousedown",N(e[14])),j(f,"mouseup",N(e[15])),j(f,"click",N(e[10]))],_=!0)},p(e,[o]){(!k||2&o&&r!==(r=e[1].pos.x-e[1].width/2))&&I(n,"x",r),(!k||2&o&&i!==(i=e[1].pos.y-e[1].height/2))&&I(n,"y",i),(!k||2&o&&s!==(s=e[1].width))&&I(n,"width",s),(!k||2&o&&a!==(a=e[1].height))&&I(n,"height",a),(!k||3&o&&l!==(l=e[1].fill||e[0].nodefill))&&I(n,"fill",l),(!k||15&o&&c!==(c=e[2]?"blue":e[3]?"red":e[1].bordercolor||e[0].nodeborder))&&I(n,"stroke",c),(!k||12&o&&u!==(u=e[2]||e[3]?"6px":"3px"))&&I(n,"stroke-width",u),(!k||2&o&&h!==(h=8+Math.floor(e[1].height/50)))&&I(n,"rx",h),(!k||2&o)&&M!==(M=e[1].label+"")&&B(d,M),(!k||2&o&&p!==(p=e[1].pos.x-.5*e[1].label.length*10+5))&&I(f,"x",p),(!k||2&o&&m!==(m=e[1].pos.y-e[1].height/2+20))&&I(f,"y",m),(!k||1&o&&g!==(g=e[0].font))&&I(f,"font-family",g),(!k||2&o&&v!==(v=e[1].children.length>0||e[1].notes?.length>0?"700":"300"))&&I(f,"font-weight",v),(!k||2&o&&y!==(y=e[1].fontSize))&&I(f,"font-size",y),(!k||3&o&&w!==(w=e[1].labelcolor||e[0].nodelabelstroke))&&I(f,"fill",w),e[1].notes?T?T.p(e,o):(T=rt(e),T.c(),T.m(t,b)):T&&(T.d(1),T=null),e[2]?D?(D.p(e,o),4&o&&Oe(D,1)):(D=it(e),D.c(),Oe(D,1),D.m(t,$)):D&&(Ce(),Ee(D,1,1,(()=>{D=null})),_e()),e[1].badge?R?R.p(e,o):(R=st(e),R.c(),R.m(t,null)):R&&(R.d(1),R=null)},i(e){k||(Oe(D),k=!0)},o(e){Ee(D),k=!1},d(e){e&&C(t),T&&T.d(),D&&D.d(),R&&R.d(),_=!1,o(O)}}}function lt(e,t,n){let r,i;const o=re();let{theme:s}=t,{item:a}=t,{isSelected:l}=t,{isHighlighted:c}=t;return e.$$set=e=>{"theme"in e&&n(0,s=e.theme),"item"in e&&n(1,a=e.item),"isSelected"in e&&n(2,l=e.isSelected),"isHighlighted"in e&&n(3,c=e.isHighlighted)},e.$$.update=()=>{2&e.$$.dirty&&n(4,r=Math.min(300,a.notes?10*a.notes.length:0)),18&e.$$.dirty&&n(5,i=a.notes?20*Math.ceil(10*a.notes.length/r):0)},[s,a,l,c,r,i,o,function(e){let t=parseInt(e.target.getAttribute("data-handle"));o("createnode",{from:a,handle:t})},function(e){let t=parseInt(e.target.getAttribute("data-handle"));o("itemcontrolmousedown",{source:a,handle:t,rawEvent:e})},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},e=>o("itemMouseDown",{source:a,rawEvent:e}),e=>o("itemMouseUp",{source:a,rawEvent:e}),e=>o("itemMouseDown",{source:a,rawEvent:e}),e=>o("itemMouseUp",{source:a,rawEvent:e}),e=>o("itemMouseDown",{source:a,rawEvent:e,from:{x:e.clientX,y:e.clientY}}),e=>o("itemMouseUp",{source:a,rawEvent:e}),e=>o("itemMouseDown",{source:a,rawEvent:e}),e=>o("itemMouseUp",{source:a,rawEvent:e}),e=>o("itemBadgeClick",{source:a,rawEvent:e}),e=>o("itemMouseDown",{source:a,rawEvent:e}),e=>o("itemMouseUp",{source:a,rawEvent:e}),e=>o("itemBadgeClick",{source:a,rawEvent:e})]}class ct extends Fe{constructor(e){super(),Ve(this,e,lt,at,a,{theme:0,item:1,isSelected:2,isHighlighted:3})}}function ut(e){let t,n,r,i,s,a,l;return{c(){t=E("textPath"),n=A("----\x3e\n            "),I(t,"href",r=`#edgepathmain${e[0].id}`),I(t,"startOffset","20%"),I(t,"lengthAdjust","spacingAndGlyphs"),I(t,"font-family","Verdana"),I(t,"font-size","20"),I(t,"start",""),I(t,"fill",i=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke),I(t,"stroke",s=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke),I(t,"class","svelte-w98d45")},m(r,i){S(r,t,i),x(t,n),a||(l=[j(t,"mousedown",N(e[19])),j(t,"mouseup",N(e[20])),j(t,"click",N(e[12]))],a=!0)},p(e,n){1&n&&r!==(r=`#edgepathmain${e[0].id}`)&&I(t,"href",r),7&n&&i!==(i=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke)&&I(t,"fill",i),7&n&&s!==(s=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke)&&I(t,"stroke",s)},d(e){e&&C(t),a=!1,o(l)}}}function ht(e){let t,n;return t=new tt({props:{kind:"cross",data:"from",x:e[5].x,y:e[5].y,title:"Detach from Node",size:4}}),t.$on("click",e[8]),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.x=e[5].x),32&n&&(r.y=e[5].y),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ft(e){let t,n;return t=new tt({props:{kind:"cross",data:"to",x:e[4].x,y:e[4].y,title:"Detach from Node",size:4}}),t.$on("click",e[8]),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.x=e[4].x),16&n&&(r.y=e[4].y),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function dt(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,O=e[0].label+"",M=e[0].directed&&ut(e),T=e[2]&&e[5]&&ht(e),D=e[2]&&e[4]&&ft(e);return{c(){t=E("g"),n=E("path"),c=E("path"),f=E("text"),d=E("textPath"),p=A(O),M&&M.c(),T&&T.c(),b=P(),D&&D.c(),I(n,"d",r=e[7](e[1])),I(n,"fill","none"),I(n,"stroke",i=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke),I(n,"stroke-width","5"),I(n,"class","edgePath svelte-w98d45"),I(n,"id",s=`edgepathmain${e[0].id}`),I(n,"stroke-dasharray",a=pt(e[0].strokeType||e[1].theme.edgestroketype)),I(n,"marker-end",(e[0].directed,l=!1)),I(c,"d",u=e[7](e[1])),I(c,"fill","none"),I(c,"stroke","none"),I(c,"stroke-width","5"),I(c,"transform",e[3]),I(c,"id",h=`edgepath${e[0].id}`),I(c,"class","svelte-w98d45"),I(d,"href",m=`#edgepath${e[0].id}`),I(d,"startOffset","40%"),I(d,"lengthAdjust","spacingAndGlyphs"),I(d,"font-family","Verdana"),I(d,"font-size","20"),I(d,"fill",g=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke),I(d,"stroke",v=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke),I(d,"class","svelte-w98d45"),I(f,"font-family",y=e[1].theme.font),I(f,"font-size","20"),I(f,"fill",w=e[0].stroke),I(f,"class","svelte-w98d45"),I(t,"class","svelte-w98d45")},m(r,i){S(r,t,i),x(t,n),x(t,c),x(t,f),x(f,d),x(d,p),M&&M.m(f,null),T&&T.m(t,null),x(t,b),D&&D.m(t,null),$=!0,k||(_=[j(n,"mousedown",N(e[15])),j(n,"mouseup",N(e[16])),j(n,"click",N(e[14])),j(d,"mousedown",N(e[17])),j(d,"mouseup",N(e[18])),j(d,"click",N(e[13])),j(f,"mousedown",N(e[21])),j(f,"mouseup",N(e[22])),j(f,"click",N(e[11]))],k=!0)},p(e,[o]){(!$||2&o&&r!==(r=e[7](e[1])))&&I(n,"d",r),(!$||7&o&&i!==(i=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke))&&I(n,"stroke",i),(!$||1&o&&s!==(s=`edgepathmain${e[0].id}`))&&I(n,"id",s),(!$||3&o&&a!==(a=pt(e[0].strokeType||e[1].theme.edgestroketype)))&&I(n,"stroke-dasharray",a),(!$||1&o&&l!==(e[0].directed,l=!1))&&I(n,"marker-end",l),(!$||2&o&&u!==(u=e[7](e[1])))&&I(c,"d",u),(!$||8&o)&&I(c,"transform",e[3]),(!$||1&o&&h!==(h=`edgepath${e[0].id}`))&&I(c,"id",h),(!$||1&o)&&O!==(O=e[0].label+"")&&B(p,O),(!$||1&o&&m!==(m=`#edgepath${e[0].id}`))&&I(d,"href",m),(!$||7&o&&g!==(g=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke))&&I(d,"fill",g),(!$||7&o&&v!==(v=e[2]?"blue":e[0].stroke||e[1].theme.edgestroke))&&I(d,"stroke",v),e[0].directed?M?M.p(e,o):(M=ut(e),M.c(),M.m(f,null)):M&&(M.d(1),M=null),(!$||2&o&&y!==(y=e[1].theme.font))&&I(f,"font-family",y),(!$||1&o&&w!==(w=e[0].stroke))&&I(f,"fill",w),e[2]&&e[5]?T?(T.p(e,o),36&o&&Oe(T,1)):(T=ht(e),T.c(),Oe(T,1),T.m(t,b)):T&&(Ce(),Ee(T,1,1,(()=>{T=null})),_e()),e[2]&&e[4]?D?(D.p(e,o),20&o&&Oe(D,1)):(D=ft(e),D.c(),Oe(D,1),D.m(t,null)):D&&(Ce(),Ee(D,1,1,(()=>{D=null})),_e())},i(e){$||(Oe(T),Oe(D),$=!0)},o(e){Ee(T),Ee(D),$=!1},d(e){e&&C(t),M&&M.d(),T&&T.d(),D&&D.d(),k=!1,o(_)}}}function pt(e){return"dashed"===e?"8,5":"dotted"===e&&"5,5"}function mt(e,t,n){let r,i,o,s,a;const l=re();let{item:c}=t,{graph:u}=t,{isSelected:h}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item),"graph"in e&&n(1,u=e.graph),"isSelected"in e&&n(2,h=e.isSelected)},e.$$.update=()=>{3&e.$$.dirty&&n(10,r=c.fromOrphan||qe(c.fromId,u)),3&e.$$.dirty&&n(9,i=c.toOrphan||qe(c.toId,u)),1024&e.$$.dirty&&n(5,o={x:r.pos.x,y:r.pos.y}),512&e.$$.dirty&&n(4,s={x:i.pos.x,y:i.pos.y}),1536&e.$$.dirty&&n(3,a=r&&i&&function(e,t){let n=(e.pos.x+t.pos.x)/2,r=(e.pos.y+t.pos.y)/2,i=180*Math.atan2(t.pos.y-e.pos.y,t.pos.x-e.pos.x)/Math.PI;return i<-120||i>120?`translate(0, -6) rotate(180, ${n}, ${r})`:"translate(0, -6) rotate(0)"}(r,i))},[c,u,h,a,s,o,l,function(e){let t=c.shape||e.theme.edgeshape;if("straight"===t)return`M ${o.x},${o.y} L ${s.x},${s.y}`;if("curved"===t){let e={x:r.pos.x+30,y:r.pos.y+30},t={x:i.pos.x-30,y:i.pos.y-30};return[`M ${o.x},${o.y}`,"C",`${e.x},${e.y}`,`${t.x},${t.y}`,`${s.x},${s.y}`].join(" ")}return"ortho"===t?`M ${o.x},${o.y} h ${(s.x-o.x)/2} v ${s.y-o.y} L ${s.x},${s.y}`:void 0},function(e){let t=e.target.getAttribute("data-handle");"from"===t&&c.fromId?(delete c.fromId,n(0,c.fromOrphan={pos:{x:o.x,y:o.y}},c)):"to"===t&&c.toId&&(delete c.toId,n(0,c.toOrphan={pos:{x:s.x,y:s.y}},c)),l("edgeChanged",{source:c})},i,r,function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},function(t){se.call(this,e,t)},e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e})]}class gt extends Fe{constructor(e){super(),Ve(this,e,mt,dt,a,{item:0,graph:1,isSelected:2})}}function vt(e,t,n){const r=e.slice();return r[6]=t[n],r}function yt(e,t,n){const r=e.slice();return r[3]=t[n],r}function wt(e,t,n){const r=e.slice();return r[3]=t[n],r}function bt(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=$t(yt(e,r,t));let o=e[2],s=[];for(let t=0;t<o.length;t+=1)s[t]=kt(vt(e,o,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=M();for(let e=0;e<s.length;e+=1)s[e].c();n=P()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);S(e,t,r);for(let t=0;t<s.length;t+=1)s[t].m(e,r);S(e,n,r)},p(e,a){if(2&a){let n;for(r=e[1],n=0;n<r.length;n+=1){const o=yt(e,r,n);i[n]?i[n].p(o,a):(i[n]=$t(o),i[n].c(),i[n].m(t.parentNode,t))}for(;n<i.length;n+=1)i[n].d(1);i.length=r.length}if(4&a){let t;for(o=e[2],t=0;t<o.length;t+=1){const r=vt(e,o,t);s[t]?s[t].p(r,a):(s[t]=kt(r),s[t].c(),s[t].m(n.parentNode,n))}for(;t<s.length;t+=1)s[t].d(1);s.length=o.length}},d(e){_(i,e),e&&C(t),_(s,e),e&&C(n)}}}function xt(e){let t,n=e[1],r=[];for(let t=0;t<n.length;t+=1)r[t]=St(wt(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=P()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,i){if(2&i){let o;for(n=e[1],o=0;o<n.length;o+=1){const s=wt(e,n,o);r[o]?r[o].p(s,i):(r[o]=St(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){_(r,e),e&&C(t)}}}function $t(t){let n,r;return{c(){n=E("circle"),I(n,"r",r=100+t[3]),I(n,"stroke","black"),I(n,"fill","none"),I(n,"opacity","0.6")},m(e,t){S(e,n,t)},p:e,d(e){e&&C(n)}}}function kt(t){let n,r,i,o,s;return{c(){n=E("line"),I(n,"x1",r=-5e3*Math.cos(t[6])),I(n,"y1",i=-5e3*Math.sin(t[6])),I(n,"x2",o=5e3*Math.cos(t[6])),I(n,"y2",s=5e3*Math.sin(t[6])),I(n,"class","svelte-19wjlzj")},m(e,t){S(e,n,t)},p:e,d(e){e&&C(n)}}}function St(t){let n,r,i,o,s,a,l,c;return{c(){n=E("line"),s=M(),a=E("line"),I(n,"x1","0"),I(n,"y1",r=0+t[3]),I(n,"x2",i=5e3),I(n,"y2",o=0+t[3]),I(n,"class","svelte-19wjlzj"),I(a,"x1",l=0+t[3]),I(a,"y1","0"),I(a,"x2",c=0+t[3]),I(a,"y2","5000"),I(a,"class","svelte-19wjlzj")},m(e,t){S(e,n,t),S(e,s,t),S(e,a,t)},p:e,d(e){e&&C(n),e&&C(s),e&&C(a)}}}function Ct(t){let n;function r(e,t){return"cartesian"===e[0]?xt:"polar"===e[0]?bt:void 0}let i=r(t),o=i&&i(t);return{c(){o&&o.c(),n=P()},m(e,t){o&&o.m(e,t),S(e,n,t)},p(e,[t]){i===(i=r(e))&&o?o.p(e,t):(o&&o.d(1),o=i&&i(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o&&o.d(e),e&&C(n)}}}function _t(e,t,n){let r=[...Array(50).keys()].map((e=>100*e)),i=[0,30,60,90,120,150].map((e=>e*Math.PI/180)),{kind:o}=t;return e.$$set=e=>{"kind"in e&&n(0,o=e.kind)},[o,r,i]}class Ot extends Fe{constructor(e){super(),Ve(this,e,_t,Ct,a,{kind:0})}}function Et(e,t=!!function(e){try{if("undefined"!=typeof window&&void 0!==window.localStorage)return window.localStorage[e]}catch(e){}}("debug")){if(t){const t=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Mt[Math.abs(t)%Mt.length]}(e);return function(...n){console.log(`%c${e}`,`color:${t}`,...n)}}return At}function At(){}const Mt=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];function Pt(e,{delay:n=0,duration:r=400,easing:i=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*o}}const{window:jt}=Pe;function Tt(e){let t,n,r,i,a,l,c,u,h,f,d,m,g,v,y,w,b,$=e[1].closeButton&&Nt(e);var k=e[2];return k&&(l=new k({})),{c(){t=O("div"),n=O("div"),r=O("div"),$&&$.c(),i=M(),a=O("div"),l&&Le(l.$$.fragment),I(a,"class",c=p(e[1].classContent)+" svelte-g4wg3a"),I(a,"style",e[9]),H(a,"content",!e[0]),I(r,"class",u=p(e[1].classWindow)+" svelte-g4wg3a"),I(r,"role","dialog"),I(r,"aria-modal","true"),I(r,"aria-label",h=e[1].ariaLabelledBy?null:e[1].ariaLabel||null),I(r,"aria-labelledby",f=e[1].ariaLabelledBy||null),I(r,"style",e[8]),H(r,"window",!e[0]),I(n,"class",m=p(e[1].classWindowWrap)+" svelte-g4wg3a"),I(n,"style",e[7]),H(n,"wrap",!e[0]),I(t,"class",g=p(e[1].classBg)+" svelte-g4wg3a"),I(t,"style",e[6]),H(t,"bg",!e[0])},m(o,c){S(o,t,c),x(t,n),x(n,r),$&&$.m(r,null),x(r,i),x(r,a),l&&Be(l,a,null),e[49](r),e[50](n),e[51](t),y=!0,w||(b=[j(r,"introstart",(function(){s(e[13])&&e[13].apply(this,arguments)})),j(r,"outrostart",(function(){s(e[14])&&e[14].apply(this,arguments)})),j(r,"introend",(function(){s(e[15])&&e[15].apply(this,arguments)})),j(r,"outroend",(function(){s(e[16])&&e[16].apply(this,arguments)})),j(t,"mousedown",e[20]),j(t,"mouseup",e[21])],w=!0)},p(o,s){if((e=o)[1].closeButton?$?($.p(e,s),2&s[0]&&Oe($,1)):($=Nt(e),$.c(),Oe($,1),$.m(r,i)):$&&(Ce(),Ee($,1,1,(()=>{$=null})),_e()),k!==(k=e[2])){if(l){Ce();const e=l;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}k?(l=new k({}),Le(l.$$.fragment),Oe(l.$$.fragment,1),Be(l,a,null)):l=null}(!y||2&s[0]&&c!==(c=p(e[1].classContent)+" svelte-g4wg3a"))&&I(a,"class",c),(!y||512&s[0])&&I(a,"style",e[9]),3&s[0]&&H(a,"content",!e[0]),(!y||2&s[0]&&u!==(u=p(e[1].classWindow)+" svelte-g4wg3a"))&&I(r,"class",u),(!y||2&s[0]&&h!==(h=e[1].ariaLabelledBy?null:e[1].ariaLabel||null))&&I(r,"aria-label",h),(!y||2&s[0]&&f!==(f=e[1].ariaLabelledBy||null))&&I(r,"aria-labelledby",f),(!y||256&s[0])&&I(r,"style",e[8]),3&s[0]&&H(r,"window",!e[0]),(!y||2&s[0]&&m!==(m=p(e[1].classWindowWrap)+" svelte-g4wg3a"))&&I(n,"class",m),(!y||128&s[0])&&I(n,"style",e[7]),3&s[0]&&H(n,"wrap",!e[0]),(!y||2&s[0]&&g!==(g=p(e[1].classBg)+" svelte-g4wg3a"))&&I(t,"class",g),(!y||64&s[0])&&I(t,"style",e[6]),3&s[0]&&H(t,"bg",!e[0])},i(n){y||(Oe($),l&&Oe(l.$$.fragment,n),me((()=>{d||(d=Me(r,e[12],e[1].transitionWindowProps,!0)),d.run(1)})),me((()=>{v||(v=Me(t,e[11],e[1].transitionBgProps,!0)),v.run(1)})),y=!0)},o(n){Ee($),l&&Ee(l.$$.fragment,n),d||(d=Me(r,e[12],e[1].transitionWindowProps,!1)),d.run(0),v||(v=Me(t,e[11],e[1].transitionBgProps,!1)),v.run(0),y=!1},d(n){n&&C(t),$&&$.d(),l&&ze(l),e[49](null),n&&d&&d.end(),e[50](null),e[51](null),n&&v&&v.end(),w=!1,o(b)}}}function Nt(e){let t,n,r,i,o;const s=[Dt,It],a=[];function l(e,n){return 2&n[0]&&(t=null),null==t&&(t=!!e[17](e[1].closeButton)),t?0:1}return n=l(e,[-1,-1,-1]),r=a[n]=s[n](e),{c(){r.c(),i=P()},m(e,t){a[n].m(e,t),S(e,i,t),o=!0},p(e,t){let o=n;n=l(e,t),n===o?a[n].p(e,t):(Ce(),Ee(a[o],1,1,(()=>{a[o]=null})),_e(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),Oe(r,1),r.m(i.parentNode,i))},i(e){o||(Oe(r),o=!0)},o(e){Ee(r),o=!1},d(e){a[n].d(e),e&&C(i)}}}function It(t){let n,r,i,o;return{c(){n=O("button"),I(n,"class",r=p(t[1].classCloseButton)+" svelte-g4wg3a"),I(n,"aria-label","Close modal"),I(n,"style",t[10]),H(n,"close",!t[0])},m(e,r){S(e,n,r),i||(o=j(n,"click",t[18]),i=!0)},p(e,t){2&t[0]&&r!==(r=p(e[1].classCloseButton)+" svelte-g4wg3a")&&I(n,"class",r),1024&t[0]&&I(n,"style",e[10]),3&t[0]&&H(n,"close",!e[0])},i:e,o:e,d(e){e&&C(n),i=!1,o()}}}function Dt(e){let t,n,r;var i=e[1].closeButton;function o(e){return{props:{onClose:e[18]}}}return i&&(t=new i(o(e))),{c(){t&&Le(t.$$.fragment),n=P()},m(e,i){t&&Be(t,e,i),S(e,n,i),r=!0},p(e,r){if(i!==(i=e[1].closeButton)){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}i?(t=new i(o(e)),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,n.parentNode,n)):t=null}},i(e){r||(t&&Oe(t.$$.fragment,e),r=!0)},o(e){t&&Ee(t.$$.fragment,e),r=!1},d(e){e&&C(n),t&&ze(t,e)}}}function Rt(e){let t,n,r,i,o=e[2]&&Tt(e);const s=e[48].default,a=c(s,e,e[47],null);return{c(){o&&o.c(),t=M(),a&&a.c()},m(s,l){o&&o.m(s,l),S(s,t,l),a&&a.m(s,l),n=!0,r||(i=j(jt,"keydown",e[19]),r=!0)},p(e,r){e[2]?o?(o.p(e,r),4&r[0]&&Oe(o,1)):(o=Tt(e),o.c(),Oe(o,1),o.m(t.parentNode,t)):o&&(Ce(),Ee(o,1,1,(()=>{o=null})),_e()),a&&a.p&&(!n||65536&r[1])&&f(a,s,e,e[47],n?h(s,e[47],r,null):d(e[47]),null)},i(e){n||(Oe(o),Oe(a,e),n=!0)},o(e){Ee(o),Ee(a,e),n=!1},d(e){o&&o.d(e),e&&C(t),a&&a.d(e),r=!1,i()}}}function Lt(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=re(),s=ie,a=e=>e.tabIndex>=0&&!e.hidden&&!e.disabled&&"none"!==e.style.display&&"hidden"!==e.type&&Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length);let{isTabbable:l=a}=t,{show:c=null}=t,{key:u="simple-modal"}=t,{ariaLabel:h=null}=t,{ariaLabelledBy:f=null}=t,{closeButton:d=!0}=t,{closeOnEsc:p=!0}=t,{closeOnOuterClick:m=!0}=t,{styleBg:g={}}=t,{styleWindowWrap:v={}}=t,{styleWindow:y={}}=t,{styleContent:w={}}=t,{styleCloseButton:b={}}=t,{classBg:x=null}=t,{classWindowWrap:$=null}=t,{classWindow:k=null}=t,{classContent:S=null}=t,{classCloseButton:C=null}=t,{unstyled:_=!1}=t,{setContext:O=s}=t,{transitionBg:E=Pt}=t,{transitionBgProps:A={duration:250}}=t,{transitionWindow:M=E}=t,{transitionWindowProps:P=A}=t,{disableFocusTrap:j=!1}=t;const T={ariaLabel:h,ariaLabelledBy:f,closeButton:d,closeOnEsc:p,closeOnOuterClick:m,styleBg:g,styleWindowWrap:v,styleWindow:y,styleContent:w,styleCloseButton:b,classBg:x,classWindowWrap:$,classWindow:k,classContent:S,classCloseButton:C,transitionBg:E,transitionBgProps:A,transitionWindow:M,transitionWindowProps:P,disableFocusTrap:j,isTabbable:l,unstyled:_};let N,I,D,R,L,B,z,V,F,q,H,W,U,J,K,G={...T},Q=null;const Y=e=>e?Object.keys(e).reduce(((t,n)=>`${t}; ${(e=>e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${e[n]}`),""):"",X=e=>!!(e&&e.constructor&&e.call&&e.apply),Z=()=>{};let ee=Z,oe=Z,se=Z,ae=Z;const ce=(e,t={},r={},i={})=>{n(2,Q=function(e,t={}){return function(n){return new e({...n,props:{...t,...n.props}})}}(e,t)),n(1,G={...T,...r}),n(6,L=Y(Object.assign({},{width:window.innerWidth,height:window.innerHeight},G.styleBg))),n(7,B=Y(G.styleWindowWrap)),n(8,z=Y(G.styleWindow)),n(9,V=Y(G.styleContent)),n(10,F=Y(G.styleCloseButton)),n(11,q=G.transitionBg),n(12,H=G.transitionWindow),he(),n(13,ee=e=>{i.onOpen&&i.onOpen(e),o("open"),o("opening")}),n(14,oe=e=>{i.onClose&&i.onClose(e),o("close"),o("closing")}),n(15,se=e=>{i.onOpened&&i.onOpened(e),o("opened")}),n(16,ae=e=>{i.onClosed&&i.onClosed(e),o("closed")})},ue=(e={})=>{Q&&(n(14,oe=e.onClose||oe),n(16,ae=e.onClosed||ae),n(2,Q=null),fe())},he=()=>{R=window.scrollY,W=document.body.style.position,U=document.body.style.overflow,J=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${R}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},fe=()=>{document.body.style.position=W||"",document.body.style.top="",document.body.style.overflow=U||"",document.body.style.width=J||"",window.scrollTo(0,R)};O(u,{open:ce,close:ue});let de=!1;return ne((()=>{de&&ue()})),te((()=>{n(46,de=!0)})),e.$$set=e=>{"isTabbable"in e&&n(22,l=e.isTabbable),"show"in e&&n(23,c=e.show),"key"in e&&n(24,u=e.key),"ariaLabel"in e&&n(25,h=e.ariaLabel),"ariaLabelledBy"in e&&n(26,f=e.ariaLabelledBy),"closeButton"in e&&n(27,d=e.closeButton),"closeOnEsc"in e&&n(28,p=e.closeOnEsc),"closeOnOuterClick"in e&&n(29,m=e.closeOnOuterClick),"styleBg"in e&&n(30,g=e.styleBg),"styleWindowWrap"in e&&n(31,v=e.styleWindowWrap),"styleWindow"in e&&n(32,y=e.styleWindow),"styleContent"in e&&n(33,w=e.styleContent),"styleCloseButton"in e&&n(34,b=e.styleCloseButton),"classBg"in e&&n(35,x=e.classBg),"classWindowWrap"in e&&n(36,$=e.classWindowWrap),"classWindow"in e&&n(37,k=e.classWindow),"classContent"in e&&n(38,S=e.classContent),"classCloseButton"in e&&n(39,C=e.classCloseButton),"unstyled"in e&&n(0,_=e.unstyled),"setContext"in e&&n(40,O=e.setContext),"transitionBg"in e&&n(41,E=e.transitionBg),"transitionBgProps"in e&&n(42,A=e.transitionBgProps),"transitionWindow"in e&&n(43,M=e.transitionWindow),"transitionWindowProps"in e&&n(44,P=e.transitionWindowProps),"disableFocusTrap"in e&&n(45,j=e.disableFocusTrap),"$$scope"in e&&n(47,i=e.$$scope)},e.$$.update=()=>{8388608&e.$$.dirty[0]|32768&e.$$.dirty[1]&&de&&(X(c)?ce(c):ue())},[_,G,Q,N,I,D,L,B,z,V,F,q,H,ee,oe,se,ae,X,ue,e=>{if(G.closeOnEsc&&Q&&"Escape"===e.key&&(e.preventDefault(),ue()),Q&&"Tab"===e.key&&!G.disableFocusTrap){const t=D.querySelectorAll("*"),n=Array.from(t).filter(G.isTabbable).sort(((e,t)=>e.tabIndex-t.tabIndex));let r=n.indexOf(document.activeElement);-1===r&&e.shiftKey&&(r=0),r+=n.length+(e.shiftKey?-1:1),r%=n.length,n[r].focus(),e.preventDefault()}},e=>{!G.closeOnOuterClick||e.target!==N&&e.target!==I||(K=e.target)},e=>{G.closeOnOuterClick&&e.target===K&&(e.preventDefault(),ue())},l,c,u,h,f,d,p,m,g,v,y,w,b,x,$,k,S,C,O,E,A,M,P,j,de,i,r,function(e){le[e?"unshift":"push"]((()=>{D=e,n(5,D)}))},function(e){le[e?"unshift":"push"]((()=>{I=e,n(4,I)}))},function(e){le[e?"unshift":"push"]((()=>{N=e,n(3,N)}))}]}class Bt extends Fe{constructor(e){super(),Ve(this,e,Lt,Rt,a,{isTabbable:22,show:23,key:24,ariaLabel:25,ariaLabelledBy:26,closeButton:27,closeOnEsc:28,closeOnOuterClick:29,styleBg:30,styleWindowWrap:31,styleWindow:32,styleContent:33,styleCloseButton:34,classBg:35,classWindowWrap:36,classWindow:37,classContent:38,classCloseButton:39,unstyled:0,setContext:40,transitionBg:41,transitionBgProps:42,transitionWindow:43,transitionWindowProps:44,disableFocusTrap:45},null,[-1,-1,-1])}}const zt={TREE:"tree",CODE:"code"},Vt=Symbol("id"),Ft=Symbol("expanded"),qt=Symbol("visible sections"),Ht=Symbol("keys"),Wt=Symbol("search:property"),Ut=Symbol("search:value"),Jt=Symbol("enforce string"),Kt=Symbol("selection"),Gt=Symbol("validation:error"),Qt=1e3,Yt=100,Xt=[{start:0,end:Yt}],Zt=104857600,en=1048576,tn=10485760,nn={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},rn={...nn,classWindow:"jse-modal-window jse-modal-window-sort"},on={...nn,classWindow:"jse-modal-window jse-modal-window-transform"},sn="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",an="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",ln="hover-insert-inside",cn="hover-insert-after",un="hover-collection",hn="valid",fn="repairable",dn="invalid",pn=336,mn=260,gn="NO",vn="SELF",yn="NEXT_INSIDE";let wn=0;function bn(){return wn++,wn}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function xn(e){var t={exports:{}};return e(t,t.exports),t.exports}function $n(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var kn=xn((function(e,t){!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){return JSON.stringify(e)===JSON.stringify(t)}function r(e,t){return e===t}function i(e){return e.slice(0,e.length-1)}function o(e){return e[e.length-1]}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(e.length<t.length)return!1;for(var i=0;i<t.length;i++)if(!n(e[i],t[i]))return!1;return!0}function a(e){return"object"===t(e)&&null!==e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e){if(Array.isArray(e)){var t=e.slice();return Object.getOwnPropertySymbols(e).forEach((function(n){t[n]=e[n]})),t}if("object"===h(e)){var n=c({},e);return Object.getOwnPropertySymbols(e).forEach((function(t){n[t]=e[t]})),n}return e}function d(e,t,n){if(e[t]===n)return e;var r=f(e);return r[t]=n,r}function p(e,t){for(var n=e,r=0;r<t.length;)n=a(n)?n[t[r]]:void 0,r++;return n}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===t.length)return n;var i=t[0],o=m(e?e[i]:void 0,t.slice(1),n,r);if(!a(e)){if(r){var s="number"==typeof i?[]:{};return s[i]=o,s}throw new Error("Path does not exist")}return d(e,i,o)}function g(e,t,n){if(0===t.length)return n(e);if(!a(e))throw new Error("Path doesn't exist");var r=t[0];return d(e,r,g(e[r],t.slice(1),n))}function v(e,t){if(0===t.length)return e;if(!a(e))throw new Error("Path does not exist");if(1===t.length){var n=t[0];if(n in e){var r=f(e);return Array.isArray(r)?r.splice(n,1):delete r[n],r}return e}var i=t[0];return d(e,i,v(e[i],t.slice(1)))}function y(e,t,n){var r=t.slice(0,t.length-1),i=t[t.length-1];return g(e,r,(function(e){if(!Array.isArray(e))throw new TypeError("Array expected at path "+JSON.stringify(r));var t=f(e);return t.splice(i,0,n),t}))}function w(e,t){return void 0!==e&&(0===t.length||w(e[t[0]],t.slice(1)))}function b(e){var t=e.split("/");return t.shift(),t.map((function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}))}function x(e){return e.map((function(e){return"/"+String(e).replace(/~/g,"~0").replace(/\//g,"~1")})).join("")}function $(e,t,n){for(var r=e,i=0;i<t.length;i++){j(t[i]);var o=T(r,t[i]);if(n&&n.before){var s=n.before(r,o);void 0!==s&&(void 0!==s.json&&(r=s.json),void 0!==s.operation&&(o=s.operation))}var a=r,l=k[o.op];if(l)r=l(r,o);else{if("test"!==o.op)throw new Error("Unknown JSONPatch operation "+JSON.stringify(o.op));A(r,o)}if(n&&n.after){var c=n.after(r,o,a);void 0!==c&&(r=c)}}return r}var k={add:_,remove:C,replace:S,copy:O,move:E};function S(e,t){return m(e,t.path,t.value)}function C(e,t){return v(e,t.path)}function _(e,t){var n=t.path,r=t.value;return M(e,n)?y(e,n,r):m(e,n,r)}function O(e,t){var n=t.path,r=t.from,i=p(e,r);return M(e,n)?y(e,n,i):m(e,n,p(e,r))}function E(e,t){var n=t.path,r=t.from,i=p(e,r),o=v(e,r);return M(o,n)?y(o,n,i):m(o,n,i)}function A(e,t){var r=t.path,i=t.value;if(void 0===i)throw new Error('Test failed: no value provided (path: "'.concat(x(r),'")'));if(!w(e,r))throw new Error('Test failed: path not found (path: "'.concat(x(r),'")'));if(!n(p(e,r),i))throw new Error('Test failed, value differs (path: "'.concat(x(r),'")'))}function M(e,t){if(0===t.length)return!1;var n=p(e,i(t));return Array.isArray(n)}function P(e,t){if("-"!==o(t))return t;var n=i(t),r=p(e,n);return n.concat(r.length)}function j(e){if(!["add","remove","replace","copy","move","test"].includes(e.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(e.op));if("string"!=typeof e.path)throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(e));if(("copy"===e.op||"move"===e.op)&&"string"!=typeof e.from)throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(e))}function T(e,t){return{op:t.op,path:P(e,b(t.path)),from:void 0!==t.from?b(t.from):null,value:t.value}}function N(e,t){var n=[];return $(e,t,{before:function(e,t){var r=I[t.op];r&&(n=r(e,t).concat(n))}}),n}var I={add:L,remove:R,replace:D,copy:B,move:z};function D(e,t){var n=t.path;return[{op:"replace",path:x(n),value:p(e,n)}]}function R(e,t){var n=t.path;return[{op:"add",path:x(n),value:p(e,n)}]}function L(e,t){var n=t.path,r=t.value;return M(e,n)||!w(e,n)?[{op:"remove",path:x(n)}]:D(e,{path:n,value:r})}function B(e,t){return L(e,{path:t.path,value:t.value})}function z(e,t){var n=t.path,r=t.from;if(n.length<r.length&&s(r,n))return[{op:"replace",path:x(n),value:e}];var i=[{op:"move",from:x(n),path:x(r)}];return!M(e,n)&&w(e,n)&&(i=i.concat(R(e,{path:n}))),i}e.compileJSONPointer=x,e.deleteIn=v,e.existsIn=w,e.getIn=p,e.immutableJSONPatch=$,e.insertAt=y,e.parseJSONPointer=b,e.revertJSONPatch=N,e.setIn=m,e.updateIn=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),Sn={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},Cn="a".charCodeAt();var _n=/~/g,On=/\//g;function En(e){return e.replace(_n,"~0").replace(On,"~1")}var An=function(e,t,n){var r={},i=0,o=0,s=0,a=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:l("",!0),pointers:r};function l(t,n){var r;c(),g(t,"value");var i=f();switch(i){case"t":h("rue"),r=!0;break;case"f":h("alse"),r=!1;break;case"n":h("ull"),r=null;break;case'"':r=u();break;case"[":r=function(e){c();var t=[],n=0;if("]"==f())return t;d();for(;;){var r=e+"/"+n;t.push(l(r)),c();var i=f();if("]"==i)break;","!=i&&b(),c(),n++}return t}(t);break;case"{":r=function(e){c();var t={};if("}"==f())return t;d();for(;;){var n=y();'"'!=f()&&b();var r=u(),i=e+"/"+En(r);v(i,"key",n),g(i,"keyEnd"),c(),":"!=f()&&b(),c(),t[r]=l(i),c();var o=f();if("}"==o)break;","!=o&&b(),c()}return t}(t);break;default:d(),"-0123456789".indexOf(i)>=0?r=function(){var t="",n=!0;"-"==e[s]&&(t+=f());t+="0"==e[s]?f():m(),"."==e[s]&&(t+=f()+m(),n=!1);"e"!=e[s]&&"E"!=e[s]||(t+=f(),"+"!=e[s]&&"-"!=e[s]||(t+=f()),t+=m(),n=!1);var r=+t;return a&&n&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)?BigInt(t):r}():w()}return g(t,"valueEnd"),c(),n&&s<e.length&&w(),r}function c(){e:for(;s<e.length;){switch(e[s]){case" ":o++;break;case"\t":o+=4;break;case"\r":o=0;break;case"\n":o=0,i++;break;default:break e}s++}}function u(){for(var e,t="";'"'!=(e=f());)"\\"==e?(e=f())in Sn?t+=Sn[e]:"u"==e?t+=p():b():t+=e;return t}function h(e){for(var t=0;t<e.length;t++)f()!==e[t]&&b()}function f(){x();var t=e[s];return s++,o++,t}function d(){s--,o--}function p(){for(var e=4,t=0;e--;){t<<=4;var n=f().toLowerCase();n>="a"&&n<="f"?t+=n.charCodeAt()-Cn+10:n>="0"&&n<="9"?t+=+n:b()}return String.fromCharCode(t)}function m(){for(var t="";e[s]>="0"&&e[s]<="9";)t+=f();if(t.length)return t;x(),w()}function g(e,t){v(e,t,y())}function v(e,t,n){r[e]=r[e]||{},r[e][t]=n}function y(){return{line:i,column:o,pos:s}}function w(){throw new SyntaxError("Unexpected token "+e[s]+" in JSON at position "+s)}function b(){d(),w()}function x(){if(s>=e.length)throw new SyntaxError("Unexpected end of JSON input")}},Mn=xn((function(e,t){e.exports=function(){function e(t,n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.message=t+" (char "+n+")",this.char=n,this.stack=(new Error).stack}(e.prototype=new Error).constructor=Error;var t={"'":!0,"‚Äò":!0,"‚Äô":!0,"`":!0,"¬¥":!0},n={'"':!0,"‚Äú":!0,"‚Äù":!0};function r(e){return i.test(e)}var i=/^[a-zA-Z_]$/,o=/^[0-9a-fA-F]$/;function s(e){return a.test(e)}var a=/^[0-9]$/;function l(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function c(e){return"¬†"===e||"‚ÄÄ"<=e&&e<="‚Ää"||"‚ÄØ"===e||"‚Åü"===e||"„ÄÄ"===e}function u(e){return!0===t[e]}function h(e){return!0===n[e]}function f(e){return!0===t[e]?"'":!0===n[e]?'"':e}function d(e,t){return-1!==(t=e.lastIndexOf(t))?e.substring(0,t)+e.substring(t+1):e}function p(e,t){var n=e.length;if(!l(e[n-1]))return e+t;for(;l(e[n-1]);)n--;return e.substring(0,n)+t+e.substring(n)}var m=0,g=1,v=2,y=3,w=4,b=5,x=6,$={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},S={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},C={null:"null",true:"true",false:"false"},_={None:"null",True:"true",False:"false"},O="",E="",A=0,M="",P="",j=x;function T(){A++,M=O.charAt(A)}function N(){T(),"\\"===M&&T()}function I(){return j===m&&("["===P||"{"===P)||j===v||j===g||j===y}function D(){E+=P,j=x,P="",$[M]?(j=m,P=M,T()):function(){if(s(M)||"-"===M){if(j=g,"-"===M){if(P+=M,T(),!s(M))throw new e("Invalid number, digit expected",A)}else"0"===M&&(P+=M,T());for(;s(M);)P+=M,T();if("."===M){if(P+=M,T(),!s(M))throw new e("Invalid number, digit expected",A);for(;s(M);)P+=M,T()}if("e"===M||"E"===M){if(P+=M,T(),"+"!==M&&"-"!==M||(P+=M,T()),!s(M))throw new e("Invalid number, digit expected",A);for(;s(M);)P+=M,T()}}else"\\"===M&&'"'===O.charAt(A+1)?(T(),L(N)):L(T)}(),j===w&&(P=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=c(r)?" ":r}return t}(P),D()),j===b&&(j=x,P="",D())}function R(){","===P&&(P="",j=x,D())}function L(i){if(!0===t[a=M]||!0===n[a]){var a=f(M),d=u(M)?u:h;for(P+='"',j=v,i();""!==M&&!d(M);)if("\\"===M)if(i(),void 0!==k[M])P+="\\"+M,i();else if("u"===M){P+="\\u",i();for(var p=0;p<4;p++){if(m=M,!o.test(m))throw new e("Invalid unicode character",A-P.length);P+=M,i()}}else{if("'"!==M)throw new e('Invalid escape character "\\'+M+'"',A);P+="'",i()}else S[M]?P+=S[M]:P+='"'===M?'\\"':M,i();if(f(M)!==a)throw new e("End of string expected",A-P.length);return P+='"',void i()}var m;!function(){if(r(M))for(j=y;r(M)||s(M)||"$"===M;)P+=M,T();else!function(){if(l(M)||c(M))for(j=w;l(M)||c(M);)P+=M,T();else!function(){if("/"!==M||"*"!==O[A+1])if("/"!==M||"/"!==O[A+1])!function(){for(j=x;""!==M;)P+=M,T();throw new e('Syntax error in part "'+P+'"',A-P.length)}();else for(j=b;""!==M&&"\n"!==M;)P+=M,T();else{for(j=b;""!==M&&("*"!==M||"*"===M&&"/"!==O[A+1]);)P+=M,T();"*"===M&&"/"===O[A+1]&&(P+=M,T(),P+=M,T())}}()}()}()}function B(){if(j!==m||"{"!==P)!function(){if(j!==m||"["!==P)!function(){if(j!==v)(j!==g?function(){if(j!==y)!function(){throw new e(""===P?"Unexpected end of json string":"Value expected",A-P.length)}();else if(C[P])D();else{if(_[P])return P=_[P],D();var t=P,n=E.length;if(P="",D(),j===m&&"("===P)return P="",D(),B(),j===m&&")"===P&&(P="",D(),j===m&&";"===P&&(P="",D()));for(E=function(e,t,n){return e.substring(0,n)+t+e.substring(n)}(E,'"'.concat(t),n);j===y||j===g;)D();E+='"'}}:D)();else for(D();j===m&&"+"===P;){var t;P="",D(),j===v&&(t=E.lastIndexOf('"'),E=E.substring(0,t)+P.substring(1),P="",D())}}();else if(D(),j!==m||"]"!==P){for(;;)if(B(),j===m&&","===P){if(D(),j===m&&"]"===P){E=d(E,",");break}if(""===P){E=d(E,",");break}}else{if(!I())break;E=p(E,",")}j===m&&"]"===P?D():E=p(E,"]")}else D()}();else if(D(),j!==m||"}"!==P){for(;;){if(j!==y&&j!==g||(j=v,P='"'.concat(P,'"')),j!==v)throw new e("Object key expected",A-P.length);if(D(),j===m&&":"===P)D();else{if(!I())throw new e("Colon expected",A-P.length);E=p(E,":")}if(B(),j===m&&","===P){if(D(),j===m&&"}"===P){E=d(E,",");break}if(""===P){E=d(E,",");break}}else{if(j!==v&&j!==g&&j!==y)break;E=p(E,",")}}j===m&&"}"===P?D():E=p(E,"}")}else D()}return function(t){E="",A=0,M=(O=t).charAt(0),P="",j=x,D();var n=j;if(B(),R(),""===P)return E;if(n===j&&I()){for(var r="";n===j&&I();)r+=E=p(E,","),E="",B(),R();return"[\n".concat(r).concat(E,"\n]")}throw new e("Unexpected characters",A-P.length)}}()}));function Pn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function jn(e){return"object"==typeof e&&null!==e}function Tn(e){const t=window.document.createElement("div");return t.style.color=e,t.style.color.split(/\s+/).join("").toLowerCase()||null}function Nn(e){return null===e?"null":void 0===e?"undefined":"number"==typeof e?"number":"string"==typeof e?"string":"boolean"==typeof e?"boolean":e instanceof RegExp?"regexp":Array.isArray(e)?"array":"object"}const In=/^https?:\/\/\S+$/;function Dn(e){return"string"==typeof e&&In.test(e)}function Rn(e){if(""===e)return"";if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);return isNaN(t)||isNaN(parseFloat(e))?e:t}function Ln(e){return"string"==typeof e&&"string"!=typeof Rn(e)}const Bn=[];function zn(e,t=!1){const n={};if(!Array.isArray(e))throw new TypeError("Array expected");function r(e,i){(!Array.isArray(e)&&!Pn(e)||t&&i.length>0)&&(n[kn.compileJSONPointer(i)]=!0),Pn(e)&&Object.keys(e).forEach((t=>{r(e[t],i.concat(t))}))}const i=Math.min(e.length,1e4);for(let t=0;t<i;t++){r(e[t],Bn)}return Object.keys(n).sort().map(kn.parseJSONPointer)}function Vn(e,t,n){if(!(t<=e))for(let r=e;r<t;r++)n(r)}function Fn(e,t){return e.length>t?e.slice(0,t):e}function qn(e){return{...e}}function Hn(e){return Object.values(e)}function Wn(e){try{return JSON.parse(e)}catch(t){return JSON.parse(Mn(e))}}function Un(e){try{return Wn(e)}catch(e){return}}function Jn(e,t=JSON.parse){e=e.replace(Gn,"");try{return t(e)}catch(e){}try{return t("["+e+"]")}catch(e){}try{return t("{"+e+"}")}catch(e){}throw new Error("Failed to parse partial JSON")}function Kn(e){e=e.replace(Gn,"");try{return Mn(e)}catch(e){}try{const t=Mn("["+e+"]");return t.substring(1,t.length-1)}catch(e){}try{const t=Mn("{"+e+"}");return t.substring(1,t.length-1)}catch(e){}throw new Error("Failed to repair partial JSON")}const Gn=/,\s*$/;function Qn(e,t){const n=er.exec(t);if(n){const r=parseInt(n[2],10),i=function(e,t,n=0,r=e.length){let i=0;for(let o=n;o<r;o++)e.charAt(o)===t&&i++;return i}(e,"\n",0,r),o=r-e.lastIndexOf("\n",r)-1;return{position:r,line:i,column:o,message:t.replace(er,(()=>`line ${i+1} column ${o+1}`))}}{const n=tr.exec(t),r=n?parseInt(n[1],10):null,i=null!==r?r-1:null,o=nr.exec(t),s=o?parseInt(o[1],10):null,a=null!==s?s-1:null,l=null!==i&&null!==a?function(e,t,n){let r=e.indexOf("\n"),i=1;for(;i<t&&-1!==r;)r=e.indexOf("\n",r+1),i++;return-1!==r?r+n+1:null}(e,i,a):null;return{position:l,line:i,column:a,message:t.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function Yn(e){return Pn(e)?void 0!==e.json?void 0!==e.text?'Content must contain either a property "json" or a property "text" but not both':null:void 0===e.text?'Content must contain either a property "json" or a property "text"':"string"!=typeof e.text?'Content "text" property must be string':null:"Content must be an object"}function Xn(e){return"string"==typeof e.text}function Zn(e,t){return function(e,t=1/0){if(Xn(e))return e.text.length;const n=e.json;let r=0;function i(e){if(Array.isArray(e)){if(r+=e.length-1+2,r>t)return r;for(let n=0;n<e.length;n++){if(i(e[n]),r>t)return r}}else if(Pn(e)){const t=Object.keys(e);r+=2+t.length+(t.length-1);for(let n=0;n<t.length;n++){const o=t[n],s=e[o];r+=o.length+2,i(s)}}else r+="string"==typeof e?e.length+2:String(e).length}return i(n),r}(e,t)>t}const er=/(position|char) (\d+)/,tr=/line (\d+)/,nr=/column (\d+)/;var rr="object"==typeof global&&global&&global.Object===Object&&global,ir="object"==typeof self&&self&&self.Object===Object&&self,or=rr||ir||Function("return this")(),sr=or.Symbol,ar=Object.prototype,lr=ar.hasOwnProperty,cr=ar.toString,ur=sr?sr.toStringTag:void 0;var hr=Object.prototype.toString;var fr=sr?sr.toStringTag:void 0;function dr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":fr&&fr in Object(e)?function(e){var t=lr.call(e,ur),n=e[ur];try{e[ur]=void 0;var r=!0}catch(e){}var i=cr.call(e);return r&&(t?e[ur]=n:delete e[ur]),i}(e):function(e){return hr.call(e)}(e)}function pr(e){return null!=e&&"object"==typeof e}function mr(e){return"symbol"==typeof e||pr(e)&&"[object Symbol]"==dr(e)}function gr(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var vr=Array.isArray,yr=sr?sr.prototype:void 0,wr=yr?yr.toString:void 0;function br(e){if("string"==typeof e)return e;if(vr(e))return gr(e,br)+"";if(mr(e))return wr?wr.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var xr=/\s/;var $r=/^\s+/;function kr(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&xr.test(e.charAt(t)););return t}(e)+1).replace($r,""):e}function Sr(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Cr=/^[-+]0x[0-9a-f]+$/i,_r=/^0b[01]+$/i,Or=/^0o[0-7]+$/i,Er=parseInt;function Ar(e){if("number"==typeof e)return e;if(mr(e))return NaN;if(Sr(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Sr(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=kr(e);var n=_r.test(e);return n||Or.test(e)?Er(e.slice(2),n?2:8):Cr.test(e)?NaN:+e}var Mr=1/0;function Pr(e){return e?(e=Ar(e))===Mr||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function jr(e){return e}function Tr(e){if(!Sr(e))return!1;var t=dr(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Nr,Ir=or["__core-js_shared__"],Dr=(Nr=/[^.]+$/.exec(Ir&&Ir.keys&&Ir.keys.IE_PROTO||""))?"Symbol(src)_1."+Nr:"";var Rr=Function.prototype.toString;function Lr(e){if(null!=e){try{return Rr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Br=/^\[object .+?Constructor\]$/,zr=Function.prototype,Vr=Object.prototype,Fr=zr.toString,qr=Vr.hasOwnProperty,Hr=RegExp("^"+Fr.call(qr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wr(e){return!(!Sr(e)||(t=e,Dr&&Dr in t))&&(Tr(e)?Hr:Br).test(Lr(e));var t}function Ur(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Wr(n)?n:void 0}var Jr=Ur(or,"WeakMap"),Kr=Object.create,Gr=function(){function e(){}return function(t){if(!Sr(t))return{};if(Kr)return Kr(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function Qr(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Yr(){}var Xr=Date.now;var Zr,ei,ti,ni=function(){try{var e=Ur(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ri=ni,ii=ri?function(e,t){return ri(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:jr,oi=(Zr=ii,ei=0,ti=0,function(){var e=Xr(),t=16-(e-ti);if(ti=e,t>0){if(++ei>=800)return arguments[0]}else ei=0;return Zr.apply(void 0,arguments)}),si=oi;var ai=/^(?:0|[1-9]\d*)$/;function li(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ai.test(e))&&e>-1&&e%1==0&&e<t}function ci(e,t,n){"__proto__"==t&&ri?ri(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ui(e,t){return e===t||e!=e&&t!=t}var hi=Object.prototype.hasOwnProperty;function fi(e,t,n){var r=e[t];hi.call(e,t)&&ui(r,n)&&(void 0!==n||t in e)||ci(e,t,n)}function di(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),i?ci(n,a,l):fi(n,a,l)}return n}var pi=Math.max;function mi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function gi(e){return null!=e&&mi(e.length)&&!Tr(e)}function vi(e,t,n){if(!Sr(n))return!1;var r=typeof t;return!!("number"==r?gi(n)&&li(t,n.length):"string"==r&&t in n)&&ui(n[t],e)}var yi=Object.prototype;function wi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||yi)}function bi(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function xi(e){return pr(e)&&"[object Arguments]"==dr(e)}var $i=Object.prototype,ki=$i.hasOwnProperty,Si=$i.propertyIsEnumerable,Ci=xi(function(){return arguments}())?xi:function(e){return pr(e)&&ki.call(e,"callee")&&!Si.call(e,"callee")},_i=Ci;var Oi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ei=Oi&&"object"==typeof module&&module&&!module.nodeType&&module,Ai=Ei&&Ei.exports===Oi?or.Buffer:void 0,Mi=(Ai?Ai.isBuffer:void 0)||function(){return!1},Pi={};function ji(e){return function(t){return e(t)}}Pi["[object Float32Array]"]=Pi["[object Float64Array]"]=Pi["[object Int8Array]"]=Pi["[object Int16Array]"]=Pi["[object Int32Array]"]=Pi["[object Uint8Array]"]=Pi["[object Uint8ClampedArray]"]=Pi["[object Uint16Array]"]=Pi["[object Uint32Array]"]=!0,Pi["[object Arguments]"]=Pi["[object Array]"]=Pi["[object ArrayBuffer]"]=Pi["[object Boolean]"]=Pi["[object DataView]"]=Pi["[object Date]"]=Pi["[object Error]"]=Pi["[object Function]"]=Pi["[object Map]"]=Pi["[object Number]"]=Pi["[object Object]"]=Pi["[object RegExp]"]=Pi["[object Set]"]=Pi["[object String]"]=Pi["[object WeakMap]"]=!1;var Ti="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ni=Ti&&"object"==typeof module&&module&&!module.nodeType&&module,Ii=Ni&&Ni.exports===Ti&&rr.process,Di=function(){try{var e=Ni&&Ni.require&&Ni.require("util").types;return e||Ii&&Ii.binding&&Ii.binding("util")}catch(e){}}(),Ri=Di,Li=Ri&&Ri.isTypedArray,Bi=Li?ji(Li):function(e){return pr(e)&&mi(e.length)&&!!Pi[dr(e)]},zi=Object.prototype.hasOwnProperty;function Vi(e,t){var n=vr(e),r=!n&&_i(e),i=!n&&!r&&Mi(e),o=!n&&!r&&!i&&Bi(e),s=n||r||i||o,a=s?bi(e.length,String):[],l=a.length;for(var c in e)!t&&!zi.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||li(c,l))||a.push(c);return a}function Fi(e,t){return function(n){return e(t(n))}}var qi=Fi(Object.keys,Object),Hi=Object.prototype.hasOwnProperty;function Wi(e){if(!wi(e))return qi(e);var t=[];for(var n in Object(e))Hi.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ui(e){return gi(e)?Vi(e):Wi(e)}var Ji=Object.prototype.hasOwnProperty;function Ki(e){if(!Sr(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=wi(e),n=[];for(var r in e)("constructor"!=r||!t&&Ji.call(e,r))&&n.push(r);return n}function Gi(e){return gi(e)?Vi(e,!0):Ki(e)}var Qi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yi=/^\w*$/;function Xi(e,t){if(vr(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!mr(e))||(Yi.test(e)||!Qi.test(e)||null!=t&&e in Object(t))}var Zi=Ur(Object,"create");var eo=Object.prototype.hasOwnProperty;var to=Object.prototype.hasOwnProperty;function no(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ro(e,t){for(var n=e.length;n--;)if(ui(e[n][0],t))return n;return-1}no.prototype.clear=function(){this.__data__=Zi?Zi(null):{},this.size=0},no.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},no.prototype.get=function(e){var t=this.__data__;if(Zi){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return eo.call(t,e)?t[e]:void 0},no.prototype.has=function(e){var t=this.__data__;return Zi?void 0!==t[e]:to.call(t,e)},no.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Zi&&void 0===t?"__lodash_hash_undefined__":t,this};var io=Array.prototype.splice;function oo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oo.prototype.clear=function(){this.__data__=[],this.size=0},oo.prototype.delete=function(e){var t=this.__data__,n=ro(t,e);return!(n<0)&&(n==t.length-1?t.pop():io.call(t,n,1),--this.size,!0)},oo.prototype.get=function(e){var t=this.__data__,n=ro(t,e);return n<0?void 0:t[n][1]},oo.prototype.has=function(e){return ro(this.__data__,e)>-1},oo.prototype.set=function(e,t){var n=this.__data__,r=ro(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var so=Ur(or,"Map");function ao(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function lo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lo.prototype.clear=function(){this.size=0,this.__data__={hash:new no,map:new(so||oo),string:new no}},lo.prototype.delete=function(e){var t=ao(this,e).delete(e);return this.size-=t?1:0,t},lo.prototype.get=function(e){return ao(this,e).get(e)},lo.prototype.has=function(e){return ao(this,e).has(e)},lo.prototype.set=function(e,t){var n=ao(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function co(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(co.Cache||lo),n}co.Cache=lo;var uo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ho=/\\(\\)?/g,fo=function(e){var t=co(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(uo,(function(e,n,r,i){t.push(r?i.replace(ho,"$1"):n||e)})),t})),po=fo;function mo(e){return null==e?"":br(e)}function go(e,t){return vr(e)?e:Xi(e,t)?[e]:po(mo(e))}function vo(e){if("string"==typeof e||mr(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function yo(e,t){for(var n=0,r=(t=go(t,e)).length;null!=e&&n<r;)e=e[vo(t[n++])];return n&&n==r?e:void 0}function wo(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var bo=sr?sr.isConcatSpreadable:void 0;function xo(e){return vr(e)||_i(e)||!!(bo&&e&&e[bo])}function $o(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=xo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?$o(a,t-1,n,r,i):wo(i,a):r||(i[i.length]=a)}return i}var ko=Fi(Object.getPrototypeOf,Object);function So(e){var t=this.__data__=new oo(e);this.size=t.size}So.prototype.clear=function(){this.__data__=new oo,this.size=0},So.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},So.prototype.get=function(e){return this.__data__.get(e)},So.prototype.has=function(e){return this.__data__.has(e)},So.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oo){var r=n.__data__;if(!so||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new lo(r)}return n.set(e,t),this.size=n.size,this};var Co="object"==typeof exports&&exports&&!exports.nodeType&&exports,_o=Co&&"object"==typeof module&&module&&!module.nodeType&&module,Oo=_o&&_o.exports===Co?or.Buffer:void 0,Eo=Oo?Oo.allocUnsafe:void 0;function Ao(){return[]}var Mo=Object.prototype.propertyIsEnumerable,Po=Object.getOwnPropertySymbols,jo=Po?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(Po(e),(function(t){return Mo.call(e,t)})))}:Ao,To=jo;var No=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)wo(t,To(e)),e=ko(e);return t}:Ao;function Io(e,t,n){var r=t(e);return vr(e)?r:wo(r,n(e))}function Do(e){return Io(e,Ui,To)}function Ro(e){return Io(e,Gi,No)}var Lo=Ur(or,"DataView"),Bo=Ur(or,"Promise"),zo=Ur(or,"Set"),Vo="[object Map]",Fo="[object Promise]",qo="[object Set]",Ho="[object WeakMap]",Wo="[object DataView]",Uo=Lr(Lo),Jo=Lr(so),Ko=Lr(Bo),Go=Lr(zo),Qo=Lr(Jr),Yo=dr;(Lo&&Yo(new Lo(new ArrayBuffer(1)))!=Wo||so&&Yo(new so)!=Vo||Bo&&Yo(Bo.resolve())!=Fo||zo&&Yo(new zo)!=qo||Jr&&Yo(new Jr)!=Ho)&&(Yo=function(e){var t=dr(e),n="[object Object]"==t?e.constructor:void 0,r=n?Lr(n):"";if(r)switch(r){case Uo:return Wo;case Jo:return Vo;case Ko:return Fo;case Go:return qo;case Qo:return Ho}return t});var Xo=Yo,Zo=Object.prototype.hasOwnProperty;var es=or.Uint8Array;function ts(e){var t=new e.constructor(e.byteLength);return new es(t).set(new es(e)),t}var ns=/\w*$/;var rs=sr?sr.prototype:void 0,is=rs?rs.valueOf:void 0;function os(e,t,n){var r,i,o,s=e.constructor;switch(t){case"[object ArrayBuffer]":return ts(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return function(e,t){var n=t?ts(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?ts(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return(o=new(i=e).constructor(i.source,ns.exec(i))).lastIndex=i.lastIndex,o;case"[object Symbol]":return r=e,is?Object(is.call(r)):{}}}var ss=Ri&&Ri.isMap,as=ss?ji(ss):function(e){return pr(e)&&"[object Map]"==Xo(e)};var ls=Ri&&Ri.isSet,cs=ls?ji(ls):function(e){return pr(e)&&"[object Set]"==Xo(e)},us="[object Arguments]",hs="[object Function]",fs="[object Object]",ds={};function ps(e,t,n,r,i,o){var s,a=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Sr(e))return e;var u=vr(e);if(u){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Zo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,s)}else{var h=Xo(e),f=h==hs||"[object GeneratorFunction]"==h;if(Mi(e))return function(e,t){if(t)return e.slice();var n=e.length,r=Eo?Eo(n):new e.constructor(n);return e.copy(r),r}(e,a);if(h==fs||h==us||f&&!i){if(s=l||f?{}:function(e){return"function"!=typeof e.constructor||wi(e)?{}:Gr(ko(e))}(e),!a)return l?function(e,t){return di(e,No(e),t)}(e,function(e,t){return e&&di(t,Gi(t),e)}(s,e)):function(e,t){return di(e,To(e),t)}(e,function(e,t){return e&&di(t,Ui(t),e)}(s,e))}else{if(!ds[h])return i?e:{};s=os(e,h,a)}}o||(o=new So);var d=o.get(e);if(d)return d;o.set(e,s),cs(e)?e.forEach((function(r){s.add(ps(r,t,n,r,e,o))})):as(e)&&e.forEach((function(r,i){s.set(i,ps(r,t,n,i,e,o))}));var p=u?void 0:(c?l?Ro:Do:l?Gi:Ui)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,i){p&&(r=e[i=r]),fi(s,i,ps(r,t,n,i,e,o))})),s}ds[us]=ds["[object Array]"]=ds["[object ArrayBuffer]"]=ds["[object DataView]"]=ds["[object Boolean]"]=ds["[object Date]"]=ds["[object Float32Array]"]=ds["[object Float64Array]"]=ds["[object Int8Array]"]=ds["[object Int16Array]"]=ds["[object Int32Array]"]=ds["[object Map]"]=ds["[object Number]"]=ds[fs]=ds["[object RegExp]"]=ds["[object Set]"]=ds["[object String]"]=ds["[object Symbol]"]=ds["[object Uint8Array]"]=ds["[object Uint8ClampedArray]"]=ds["[object Uint16Array]"]=ds["[object Uint32Array]"]=!0,ds["[object Error]"]=ds[hs]=ds["[object WeakMap]"]=!1;function ms(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new lo;++t<n;)this.add(e[t])}function gs(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}ms.prototype.add=ms.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ms.prototype.has=function(e){return this.__data__.has(e)};function vs(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,f=!0,d=2&n?new ms:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!gs(t,(function(e,t){if(s=t,!d.has(s)&&(p===e||i(p,e,n,r,o)))return d.push(t);var s}))){f=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ys(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ws(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var bs=sr?sr.prototype:void 0,xs=bs?bs.valueOf:void 0;var $s=Object.prototype.hasOwnProperty;var ks="[object Arguments]",Ss="[object Array]",Cs="[object Object]",_s=Object.prototype.hasOwnProperty;function Os(e,t,n,r,i,o){var s=vr(e),a=vr(t),l=s?Ss:Xo(e),c=a?Ss:Xo(t),u=(l=l==ks?Cs:l)==Cs,h=(c=c==ks?Cs:c)==Cs,f=l==c;if(f&&Mi(e)){if(!Mi(t))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new So),s||Bi(e)?vs(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new es(e),new es(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ui(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=ys;case"[object Set]":var l=1&r;if(a||(a=ws),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=vs(a(e),a(t),r,i,o,s);return s.delete(e),u;case"[object Symbol]":if(xs)return xs.call(e)==xs.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var d=u&&_s.call(e,"__wrapped__"),p=h&&_s.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,g=p?t.value():t;return o||(o=new So),i(m,g,n,r,o)}}return!!f&&(o||(o=new So),function(e,t,n,r,i,o){var s=1&n,a=Do(e),l=a.length;if(l!=Do(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:$s.call(t,u)))return!1}var h=o.get(e),f=o.get(t);if(h&&f)return h==t&&f==e;var d=!0;o.set(e,t),o.set(t,e);for(var p=s;++c<l;){var m=e[u=a[c]],g=t[u];if(r)var v=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,r,i,o))}function Es(e,t,n,r,i){return e===t||(null==e||null==t||!pr(e)&&!pr(t)?e!=e&&t!=t:Os(e,t,n,r,Es,i))}function As(e){return e==e&&!Sr(e)}function Ms(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Ps(e){var t=function(e){for(var t=Ui(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,As(i)]}return t}(e);return 1==t.length&&t[0][2]?Ms(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=n[i])[0],c=e[l],u=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var h=new So;if(r)var f=r(c,u,l,e,t,h);if(!(void 0===f?Es(u,c,3,r,h):f))return!1}}return!0}(n,e,t)}}function js(e,t){return null!=e&&t in Object(e)}function Ts(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=go(t,e)).length,o=!1;++r<i;){var s=vo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&mi(i)&&li(s,i)&&(vr(e)||_i(e))}(e,t,js)}function Ns(e,t){return Xi(e)&&As(t)?Ms(vo(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:yo(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?Ts(n,e):Es(t,r,3)}}function Is(e){return Xi(e)?(t=vo(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return yo(t,e)}}(e);var t}function Ds(e){return"function"==typeof e?e:null==e?jr:"object"==typeof e?vr(e)?Ns(e[0],e[1]):Ps(e):Is(e)}function Rs(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}var Ls=Rs();function Bs(e,t){return function(n,r){if(null==n)return n;if(!gi(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}var zs=Bs((function(e,t){return e&&Ls(e,t,Ui)})),Vs=function(){return or.Date.now()},Fs=Math.max,qs=Math.min;function Hs(e,t,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function d(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function p(e){return c=e,a=setTimeout(g,t),u?d(e):s}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function g(){var e=Vs();if(m(e))return v(e);a=setTimeout(g,function(e){var n=t-(e-l);return h?qs(n,o-(e-c)):n}(e))}function v(e){return a=void 0,f&&r?d(e):(r=i=void 0,s)}function y(){var e=Vs(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return p(l);if(h)return clearTimeout(a),a=setTimeout(g,t),d(l)}return void 0===a&&(a=setTimeout(g,t)),s}return t=Ar(t)||0,Sr(n)&&(u=!!n.leading,o=(h="maxWait"in n)?Fs(Ar(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},y.flush=function(){return void 0===a?s:v(Vs())},y}function Ws(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function Us(e){return"function"==typeof e?e:jr}function Js(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var Ks=Rs(!0);var Gs=Bs((function(e,t){return e&&Ks(e,t,Ui)}),!0);function Qs(e){return e&&e.length?e[0]:void 0}function Ys(e,t){var n=-1,r=gi(e)?Array(e.length):[];return zs(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Xs(e){return(null==e?0:e.length)?function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,0,-1):[]}var Zs=Object.prototype.hasOwnProperty;function ea(e){if(null==e)return!0;if(gi(e)&&(vr(e)||"string"==typeof e||"function"==typeof e.splice||Mi(e)||Bi(e)||_i(e)))return!e.length;var t=Xo(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(wi(e))return!Wi(e).length;for(var n in e)if(Zs.call(e,n))return!1;return!0}function ta(e,t){return Es(e,t)}function na(e,t){return e<t}function ra(e,t){return e&&e.length?function(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!mr(s):n(s,a)))var a=s,l=o}return l}(e,Ds(t),na):void 0}function ia(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=mr(e),s=void 0!==t,a=null===t,l=t==t,c=mr(t);if(!a&&!c&&!o&&e>t||o&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}function oa(e,t,n){t=t.length?gr(t,(function(e){return vr(e)?function(t){return yo(t,1===e.length?e[0]:e)}:e})):[jr];var r=-1;return t=gr(t,ji(Ds)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ys(e,(function(e,n,i){return{criteria:gr(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=ia(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}var sa=Math.ceil,aa=Math.max;var la,ca=function(e,t,n){return n&&"number"!=typeof n&&vi(e,t,n)&&(t=n=void 0),e=Pr(e),void 0===t?(t=e,e=0):t=Pr(t),function(e,t,n,r){for(var i=-1,o=aa(sa((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s}(e,t,n=void 0===n?e<t?1:-1:Pr(n),la)},ua=ca,ha=function(e,t){return si(function(e,t,n){return t=pi(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=pi(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),Qr(e,this,a)}}(e,t,jr),e+"")}((function(e,t){if(null==e)return[];var n=t.length;return n>1&&vi(e,t[0],t[1])?t=[]:n>2&&vi(t[0],t[1],t[2])&&(t=[t[0]]),oa(e,$o(t,1),[])})),fa=ha;var da=4294967295,pa=Math.min;function ma(e,t){if(e=function(e){var t=Pr(e),n=t%1;return t==t?n?t-n:t:0}(e),e<1||e>9007199254740991)return[];var n=da,r=pa(e,da);t=Us(t),e-=da;for(var i=bi(r,t);++n<e;)t(n);return i}var ga=0;function va(e){var t=++ga;return mo(e)+t}function ya(e,t){const n=kn.parseJSONPointer(t);for(let t=0;t<n.length;t++){const r=n[t];if(wa.exec(r)){const i=n.slice(0,t),o=kn.getIn(e,i);Array.isArray(o)&&(n[t]=parseInt(r))}}return n}const wa=/^\d+$/;function ba(e){const t=fa(e,(e=>e.start)),n=[t[0]];for(let e=0;e<t.length;e++){const r=n.length-1,i=n[r],o=t[e];o.start<=i.end?n[r]={start:Math.min(i.start,o.start),end:Math.max(i.end,o.end)}:n.push(o)}return n}function xa(e,t){return e.some((e=>t>=e.start&&t<e.end))}function $a(e){return ka(e)+Yt}function ka(e){return Math.floor(e/Yt)*Yt}function Sa(e,t,n,r,i=!1){const o=Array.isArray(e)?[]:{};return o[Vt]=t&&t[Vt]?t[Vt]:va(),Pn(e)?(o[Ht]=function(e,t){if(!t)return Object.keys(e);const n=t.filter((t=>void 0!==e[t])),r=new Set(n);return Object.keys(e).filter((e=>!r.has(e))).forEach((e=>n.push(e))),n}(e,t&&t[Ht]),o[Ft]=t&&!i?t[Ft]:r(n),o[Ft]&&Object.keys(e).forEach((s=>{const a=e[s],l=t&&t[s];o[s]=Sa(a,l,n.concat(s),r,i)}))):Array.isArray(e)?(o[Ft]=t&&!i?t[Ft]:r(n),o[qt]=t&&o[Ft]&&t[qt]||Xt,o[Ft]&&o[qt].forEach((({start:s,end:a})=>{Vn(s,Math.min(e.length,a),(s=>{const a=e[s],l=t&&t[s];o[s]=Sa(a,l,n.concat(s),r,i)}))}))):t&&void 0!==t[Jt]?o[Jt]=t[Jt]:Ln(e)&&(o[Jt]=!0),o}function Ca(e){if(Array.isArray(e)){const e=[];return e[Vt]=va(),e[Ft]=!1,e[qt]=Xt,e}if(Pn(e)){const t={};return t[Vt]=va(),t[Ft]=!1,t[Ht]=Object.keys(e),t}const t={[Vt]:va()};return Ln(e)&&(t[Jt]=!0),t}function _a(e,t,n){t[qt].forEach((({start:t,end:r})=>{Vn(t,Math.min(e.length,r),n)}))}function Oa(e,t){e[Ht].forEach((e=>t(e)))}function Ea(e,t,n){let r=t;for(let t=0;t<n.length;t++){const i=n.slice(0,t),o=i.concat(Ft);if(r=kn.setIn(r,o,!0,!0),Array.isArray(kn.getIn(r,i))){const e=n[t],o=i.concat(qt),s=kn.getIn(r,o)||Xt;if(!xa(s,e)){const t=ka(e),n={start:t,end:$a(t)},i=ba(s.concat(n));r=kn.setIn(r,o,i)}}const s=kn.getIn(e,i);r=kn.updateIn(r,i,(e=>Sa(s,e,[],(()=>!1))))}return r}function Aa(e,t,n,r){const i=kn.setIn(t,n.concat(Ft),!0,!0);return kn.updateIn(i,n,(t=>Sa(kn.getIn(e,n),t,[],r,!0)))}function Ma(e,t,n){const r=kn.immutableJSONPatch(e,n),i=function(e,t,n){let r=t;function i(e,t,n){let r=t;return kn.existsIn(e,n)&&!kn.existsIn(r,n)&&(n.length>0&&(r=i(e,r,Xs(n))),r=kn.setIn(r,n,Ca(kn.getIn(e,n)))),r}return n.forEach((t=>{const n="string"==typeof t.from?ya(e,t.from):null,o="string"==typeof t.path?ya(e,t.path):null;"add"===t.op&&(r=i(e,r,Xs(o))),"copy"!==t.op&&"move"!==t.op||(r=i(e,r,n),r=i(e,r,Xs(o))),"remove"!==t.op&&"replace"!==t.op&&"test"!==t.op||(r=i(e,r,o))})),r}(e,t,n),o=kn.immutableJSONPatch(i,n,{before:function(e,t){const{op:n,path:r,from:i}=t,o=Xs(r);let s=e,a=t;if(void 0!==t.value&&(a={...a,value:Ca(t.value)}),"add"===n||"copy"===n){const t=ja(e,o);if(t){const e=Ws(r);t.includes(e)||(s=Na(s,o,e))}s=Pa(s,r,1)}if("move"===n){const t=Xs(r),n=ja(s,t),o=Ws(i),l=Ws(r);if(ta(Xs(i),Xs(r)))n&&(o!==l?(s=Ta(s,t,l),s=function(e,t,n,r){return kn.updateIn(e,t.concat([Ht]),(e=>{const t=e.indexOf(n);if(-1===t)return e;const i=e.slice(0);return i.splice(t,1,r),i}))}(s,t,o,l)):(s=Ta(s,t,l),s=Na(s,t,l)));else{const e=Xs(i);ja(s,e)&&(s=Ta(s,e,o)),n&&(s=Na(s,t,l))}s=Pa(s,i,-1),s=Pa(s,r,1);const c=kn.getIn(e,i);a={...a,value:c}}if("remove"===n){const e=Xs(r);if(ja(s,e)){s=Ta(s,e,Ws(r))}else s=Pa(s,r,-1)}if("replace"===n){const e=Xs(r),t=ja(s,e);if(t){const n=Ws(r);t.includes(n)||(s=Na(s,e,n))}}return{json:s,operation:a}},after:function(e,t,n){const{op:r,path:i}=t;let o=e;if("copy"===r&&kn.existsIn(o,i.concat([Vt]))&&(o=kn.setIn(o,i.concat([Vt]),va())),"replace"===r){const e=kn.getIn(n,i.concat([Jt]));"boolean"==typeof e&&(o=kn.setIn(o,i.concat([Jt]),e))}return o}});return{json:r,state:o}}function Pa(e,t,n){const r=Xs(t).concat([qt]),i=kn.getIn(e,r);if(!i)return e;const o=parseInt(Ws(t),10),s=i.map((e=>({start:e.start>o?e.start+n:e.start,end:e.end>=o?e.end+n:e.end})));return kn.setIn(e,r,s)}function ja(e,t){return kn.getIn(e,t.concat([Ht]))}function Ta(e,t,n){return kn.updateIn(e,t.concat([Ht]),(e=>{const t=e.indexOf(n);if(-1===t)return e;const r=e.slice(0);return r.splice(t,1),r}))}function Na(e,t,n){return kn.updateIn(e,t.concat([Ht]),(e=>e.concat(n)))}function Ia(e,t,n=!1){const r=e.indexOf(t);return-1!==r?n?e.slice(r):e.slice(r+1):[]}function Da(e,t){const n=[];return function e(t,r,i){n.push(i),t&&r&&!0===r[Ft]&&(Array.isArray(t)?_a(t,r,(n=>{e(t[n],r[n],i.concat(n))})):Oa(r,(n=>{e(t[n],r[n],i.concat(n))})))}(e,t,[]),n}const Ra="inside",La="after",Ba="key",za="value";function Va(e,t,n=!0){const r=[];return function e(t,i,o){r.push({path:o,type:za}),t&&i&&!0===i[Ft]&&(n&&r.push({path:o,type:Ra}),Array.isArray(t)?_a(t,i,(s=>{const a=o.concat(s);e(t[s],i[s],a),n&&r.push({path:a,type:La})})):Oa(i,(s=>{const a=o.concat(s);r.push({path:a,type:Ba}),e(t[s],i[s],a),n&&r.push({path:a,type:La})})))}(e,t,[]),r}function Fa(e,t,n){const r=Da(e,t),i=r.map(kn.compileJSONPointer).indexOf(kn.compileJSONPointer(n));return-1!==i&&i<r.length-1?r[i+1]:null}const qa="after",Ha="inside",Wa="key",Ua="value",Ja="multi";function Ka(e){return e.type===Ha?e.focusPath:Xs(e.focusPath)}function Ga(e){return e.paths?Qs(e.paths):e.focusPath}function Qa(e){return e.paths?Ws(e.paths):e.focusPath}function Ya(e,t,n,r=!1,i=!1){const o=!i&&n.paths?Qs(n.paths):n.focusPath,s=function(e,t,n){const r=Da(e,t),i=r.map(kn.compileJSONPointer),o=kn.compileJSONPointer(n),s=i.indexOf(o);return-1!==s&&s>0?r[s-1]:null}(e,t,o);if(null===s)return null;const a=s,l=s;if(r)return n.type===qa||n.type===Ha?al(e,t,{type:Ja,anchorPath:n.anchorPath,focusPath:n.anchorPath}):al(e,t,{type:Ja,anchorPath:n.anchorPath,focusPath:l});if(n.type===Wa){const t=Xs(s),n=kn.getIn(e,t);return Array.isArray(n)||ea(s)?{type:Ua,anchorPath:a,focusPath:l}:{type:Wa,anchorPath:a,focusPath:l}}return n.type===Ua?{type:Ua,anchorPath:a,focusPath:l}:n.type===qa||n.type===Ha?al(e,t,{type:Ja,anchorPath:o,focusPath:o}):al(e,t,{type:Ja,anchorPath:a,focusPath:l})}function Xa(e,t,n,r=!1,i=!1){const o=!i&&n.paths?Ws(n.paths):n.focusPath,s=Fa(e,t,o),a=s,l=s;if(null===s)return null;if(r){const r=Fa(e,jn(kn.getIn(e,o))?kn.setIn(t,o.concat(Ft),!1,!0):t,o);return null===r?null:n.type===qa?al(e,t,{type:Ja,anchorPath:r,focusPath:r}):n.type===Ha?al(e,t,{type:Ja,anchorPath:a,focusPath:l}):al(e,t,{type:Ja,anchorPath:n.anchorPath,focusPath:r})}if(n.type===Wa){const t=Xs(s),n=kn.getIn(e,t);return Array.isArray(n)?{type:Ua,anchorPath:a,focusPath:l}:{type:Wa,anchorPath:a,focusPath:l}}return n.type===Ua?{type:Ua,anchorPath:a,focusPath:l}:n.type===Ha?al(e,t,{type:Ja,anchorPath:a,focusPath:l}):al(e,t,{type:Ja,anchorPath:s,focusPath:s})}function Za(e,t,n,r){const i=Va(e,t,r),o=i.findIndex((e=>ta(e.path,n.focusPath)&&e.type===n.type));return{caret:-1!==o?i[o]:null,previous:-1!==o&&o>0?i[o-1]:null,next:-1!==o&&o<i.length-1?i[o+1]:null}}function el(e,t){const n=Da(e,t);let r=0;for(;r<n.length-1&&n[r+1].length>n[r].length;)r++;const i=n[r];return 0===i.length||Array.isArray(kn.getIn(e,Xs(i)))?{type:Ua,anchorPath:i,focusPath:i}:{type:Wa,anchorPath:i,focusPath:i}}function tl(e,t,n){if(1===n.length){const t=Qs(n);if("replace"===t.op||"move"===t.op){const n=ya(e,t.path);return{type:Ua,anchorPath:n,focusPath:n,edit:!1}}}if(!ea(n)&&n.every((e=>"move"===e.op))){const t=Qs(n),r=n.slice(1);if(t.from!==t.path&&r.every((e=>e.from===e.path))){const n=ya(e,t.path);return{type:Wa,anchorPath:n,focusPath:n,edit:!1}}}const r=n.filter((e=>"test"!==e.op&&"remove"!==e.op&&("move"!==e.op||e.from!==e.path)&&"string"==typeof e.path)).map((t=>ya(e,t.path)));return ea(r)?null:{type:Ja,paths:r,anchorPath:Qs(r),focusPath:Ws(r),pathsMap:nl(r)}}function nl(e){const t={};return e.forEach((e=>{t[kn.compileJSONPointer(e)]=!0})),t}function rl(e){return e&&(e.type===Wa||e.type===Ua||e.type===Ja&&1===e.paths.length)}function il(e,t){return rl(t)&&jn(kn.getIn(e,t.focusPath))?t.focusPath:Xs(t.focusPath)}function ol(e,t){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function sl(e){return e&&e.edit?{...e,edit:!1}:e}function al(e,t,n){const{type:r,anchorPath:i,focusPath:o,path:s,edit:a=!1,next:l=!1,nextInside:c=!1}=n;if(r===Wa){let e={type:r,anchorPath:s,focusPath:s,edit:a};return l&&(e={...e,type:Ua}),e}if(r===Ua){let n={type:Ua,anchorPath:s,focusPath:s,edit:a};return l&&(n=Xa(e,t,n)||n),c&&(n=function(e,t,n){const r=n.focusPath,i=Xs(r),o=[Ws(r)],s=Fa(kn.getIn(e,i),kn.getIn(t,i),o);return al(e,t,s?{type:Ua,path:i.concat(s)}:{type:qa,path:r})}(e,t,n)||n),n}if(r===qa)return{type:r,anchorPath:s,focusPath:s};if(r===Ha)return{type:r,anchorPath:s,focusPath:s};if(r===Ja&&s){const e=[s];return{type:Ja,anchorPath:s,focusPath:s,paths:e,pathsMap:nl(e)}}if(i&&o){const n=function(e,t,n,r){if(ta(n,r))return[n];{const i=function(e,t){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;return e.slice(0,n)}(n,r);if(n.length===i.length||r.length===i.length)return[i];const o=n[i.length],s=r[i.length],a=kn.getIn(e,i);if(Pn(a)){const e=ja(t,i),n=e.indexOf(o),r=e.indexOf(s);if(-1!==n&&-1!==r){const t=Math.min(n,r),o=Math.max(n,r),s=[];for(let n=t;n<=o;n++)s.push(i.concat(e[n]));return s}}if(Array.isArray(a)){const e=Math.min(o,s),t=Math.max(o,s),n=[];for(let r=e;r<=t;r++)n.push(i.concat(r));return n}}throw new Error("Failed to create selection")}(e,t,i,o),r=ol(o,Ws(n))||ol(i,Qs(n));return{type:Ja,anchorPath:r?Qs(n):Ws(n),focusPath:r?Ws(n):Qs(n),paths:n,pathsMap:nl(n)}}throw new TypeError(`Unknown type of selection ${JSON.stringify(n)}`)}function ll(e,t,n=2){if(t.type===Wa)return Ws(t.focusPath);if(t.type===Ua){const r=kn.getIn(e,t.focusPath);return"string"==typeof r?r:JSON.stringify(r,null,n)}if(t.type===Ja){if(ea(t.focusPath))return JSON.stringify(e,null,n);const r=Ka(t),i=kn.getIn(e,r);if(Array.isArray(i)){if(1===t.paths.length){const r=kn.getIn(e,Qs(t.paths));return JSON.stringify(r,null,n)}return t.paths.map((t=>{const r=kn.getIn(e,t);return`${JSON.stringify(r,null,n)},`})).join("\n")}return t.paths.map((t=>{const r=Ws(t),i=kn.getIn(e,t);return`${JSON.stringify(r)}: ${JSON.stringify(i,null,n)},`})).join("\n")}return null}function cl(e,t){if(!t)return null;let n={};return(t.type===Ja?t.paths:[t.focusPath]).forEach((r=>{const i=r.concat(Kt);if(!kn.existsIn(n,i)){const t=kn.getIn(e,i);n=kn.setIn(n,i,Array.isArray(t)?[]:{},!0)}n=kn.setIn(n,i,t,!0)})),n}function ul(e){return!!e&&(e.type===Wa||e.type===Ua||(e.type===Ja&&1===e.paths.length||void 0))}function hl(e,t,n){var r;const i=null===(r=null==n?void 0:n[t])||void 0===r?void 0:r[Kt];return!(!i||i.type!==Wa||i.edit)&&ta(i.focusPath,e.concat(t))}function fl({escapeControlCharacters:e,escapeUnicodeCharacters:t}){return e?t?dl:pl:t?ml:gl}const dl={escapeValue:e=>vl(xl(String(e))),unescapeValue:e=>$l(yl(e))},pl={escapeValue:e=>xl(String(e)),unescapeValue:e=>$l(e)},ml={escapeValue:e=>vl(String(e)),unescapeValue:e=>yl(e)},gl={escapeValue:e=>String(e),unescapeValue:e=>e};function vl(e){return e.replace(/[^\x20-\x7F]/g,(e=>"\b"===e||"\f"===e||"\n"===e||"\r"===e||"\t"===e?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4)))}function yl(e){return e.replace(/\\u[a-fA-F0-9]{4}/g,(e=>{try{return JSON.parse('"'+e+'"')}catch(t){return e}}))}const wl={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},bl={"\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"};function xl(e){return e.replace(/[\b\f\n\r\t]/g,(e=>wl[e]||e))}function $l(e){return e.replace(/\\[bfnrt]/g,(e=>bl[e]||e))}function kl(e){return"string"!=typeof e?String(e):e.endsWith("\n")?e+"\n":e}function Sl(e,t){return _l(e,(e=>e.nodeName.toUpperCase()===t.toUpperCase()))}function Cl(e,t,n){return _l(e,(e=>function(e,t,n){return"function"==typeof e.getAttribute&&e.getAttribute(t)===n}(e,t,n)))}function _l(e,t){return!!Ol(e,t)}function Ol(e,t){let n=e;for(;n&&!t(n);)n=n.parentNode;return n||void 0}function El(e){if(null==e.firstChild)return void e.focus();const t=document.createRange(),n=window.getSelection();t.setStart(e,1),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}function Al(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView}function Ml(e){return _l(Al(e).document.activeElement,(t=>t===e))}function Pl(e,t){return Ol(e,(e=>e.nodeName===t))}function jl(e){return Cl(e,"data-type","selectable-key")?Wa:Cl(e,"data-type","selectable-value")?Ua:Cl(e,"data-type","insert-selection-area-inside")?Ha:Cl(e,"data-type","insert-selection-area-after")?qa:Ja}function Tl(e){return encodeURIComponent(JSON.stringify(e))}function Nl(e){const t=Ol(e,(e=>e.hasAttribute("data-path")));return t?(n=t.getAttribute("data-path"),JSON.parse(decodeURIComponent(n))):null;var n}function Il({allElements:e,currentElement:t,direction:n,hasPrio:r=(()=>!0),margin:i=10}){const o=(s=e.filter((function(e){const t=e.getBoundingClientRect();return t.width>0&&t.height>0})),a=c,(vr(s)?gr:Ys)(s,Ds(a)));var s,a;const l=c(t);function c(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2,rect:t,element:e}}function u(e,t,n=1){const r=e.x-t.x,i=(e.y-t.y)*n;return Math.sqrt(r*r+i*i)}const h=e=>u(e,l),f=e=>u(e,l,10);if("Left"===n||"Right"===n){const e="Left"===n?o.filter((e=>{return t=l,e.rect.left+i<t.rect.left;var t})):o.filter((e=>{return t=l,e.rect.right>t.rect.right+i;var t})),t=ra(e.filter((e=>{return t=e,n=l,Math.abs(t.y-n.y)<i;var t,n})),h)||ra(e,f);return null==t?void 0:t.element}if("Up"===n||"Down"===n){const e="Up"===n?o.filter((e=>{return t=l,e.y+i<t.y;var t})):o.filter((e=>{return t=l,e.y>t.y+i;var t})),t=ra(e.filter((e=>r(e.element))),h)||ra(e,h);return null==t?void 0:t.element}}const Dl="undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0;function Rl(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.metaKey&&t.push("Command"),e.altKey&&t.push(Dl?"Option":"Alt"),e.shiftKey&&t.push("Shift");const n=function(e){return Bl[e]||""}(e.which);return Ll[n]||t.push(n),t.join("+")}const Ll={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},Bl={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},{window:zl}=Pe;function Vl(e){let t,r,i,o,s,a;const l=[e[1]];var c=e[0];function u(e){let t={};for(let e=0;e<l.length;e+=1)t=n(t,l[e]);return{props:t}}return c&&(o=new c(u())),{c(){t=O("div"),r=O("input"),i=M(),o&&Le(o.$$.fragment),I(r,"class","jse-hidden-input svelte-p9zniz"),I(t,"class","jse-absolute-popup-content svelte-p9zniz"),I(t,"style",s=e[7]())},m(n,s){S(n,t,s),x(t,r),e[10](r),x(t,i),o&&Be(o,t,null),a=!0},p(e,n){const r=2&n?Ie(l,[De(e[1])]):{};if(c!==(c=e[0])){if(o){Ce();const e=o;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}c?(o=new c(u()),Le(o.$$.fragment),Oe(o.$$.fragment,1),Be(o,t,null)):o=null}else c&&o.$set(r)},i(e){a||(o&&Oe(o.$$.fragment,e),a=!0)},o(e){o&&Ee(o.$$.fragment,e),a=!1},d(n){n&&C(t),e[10](null),o&&ze(o)}}}function Fl(e){let t,n,r,i,s,a=e[0]&&e[1]&&Vl(e);const l=e[9].default,u=c(l,e,e[8],null);return{c(){t=O("div"),a&&a.c(),n=M(),u&&u.c(),I(t,"class","jse-absolute-popup svelte-p9zniz")},m(o,l){S(o,t,l),a&&a.m(t,null),e[11](t),S(o,n,l),u&&u.m(o,l),r=!0,i||(s=[j(zl,"mousedown",e[4],!0),j(zl,"keydown",e[5],!0),j(zl,"wheel",e[6],!0),j(t,"mousedown",ql),j(t,"keydown",e[5])],i=!0)},p(e,[n]){e[0]&&e[1]?a?(a.p(e,n),3&n&&Oe(a,1)):(a=Vl(e),a.c(),Oe(a,1),a.m(t,null)):a&&(Ce(),Ee(a,1,1,(()=>{a=null})),_e()),u&&u.p&&(!r||256&n)&&f(u,l,e,e[8],r?h(l,e[8],n,null):d(e[8]),null)},i(e){r||(Oe(a),Oe(u,e),r=!0)},o(e){Ee(a),Ee(u,e),r=!1},d(r){r&&C(t),a&&a.d(),e[11](null),r&&C(n),u&&u.d(r),i=!1,o(s)}}}function ql(e){e.stopPropagation()}function Hl(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=Et("jsoneditor:AbsolutePopup");let s,a,l=null,c=null,u={};function h(){if(l){const e=u.onClose;n(0,l=null),n(1,c=null),u={},e&&e()}}function f(e){u&&u.closeOnOuterClick&&!_l(e.target,(e=>e===s))&&h()}function d(){a&&a.focus()}return ie("absolute-popup",{openAbsolutePopup:function(e,t,r){o("open...",r),n(0,l=e),n(1,c=t||{}),u=r||{},pe().then(d)},closeAbsolutePopup:h}),e.$$set=e=>{"$$scope"in e&&n(8,i=e.$$scope)},[l,c,s,a,function(e){f(e)},function(e){"Escape"===Rl(e)&&h()},function(e){f(e)},function(){const e=s.getBoundingClientRect(),{left:t,top:n,positionAbove:r,positionLeft:i}=function(){if(u.anchor){const{anchor:e,width:t=0,height:n=0,offsetTop:r=0,offsetLeft:i=0,position:o}=u,{left:s,top:a,bottom:l,right:c}=e.getBoundingClientRect(),h="top"===o||a+n>window.innerHeight&&a>n,f="left"===o||s+t>window.innerWidth&&s>t;return{left:f?c-i:s+i,top:h?a-r:l+r,positionAbove:h,positionLeft:f}}if("number"==typeof u.left&&"number"==typeof u.top){const{left:e,top:t,width:n=0,height:r=0}=u;return{left:e,top:t,positionAbove:t+r>window.innerHeight&&t>r,positionLeft:e+n>window.innerWidth&&e>n}}throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}();return(r?`bottom: ${e.top-n}px;`:`top: ${n-e.top}px;`)+(i?`right: ${e.left-t}px;`:`left: ${t-e.left}px;`)},i,r,function(e){le[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(e){le[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class Wl extends Fe{constructor(e){super(),Ve(this,e,Hl,Fl,l,{})}}
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */var Ul={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M192 384c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L192 306.8l137.4-137.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-160 160C208.4 380.9 200.2 384 192 384z"]},Jl={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"]},Kl={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M374.6 310.6l-160 160C208.4 476.9 200.2 480 192 480s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 370.8V64c0-17.69 14.33-31.1 31.1-31.1S224 46.31 224 64v306.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0S387.1 298.1 374.6 310.6z"]},Gl={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"]},Ql={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"]},Yl={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z"]},Xl={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M310.6 246.6l-127.1 128C176.4 380.9 168.2 384 160 384s-16.38-3.125-22.63-9.375l-127.1-128C.2244 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75S319.8 237.5 310.6 246.6z"]},Zl={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"]},ec={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},tc={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"]},nc={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M416 352c-8.188 0-16.38-3.125-22.62-9.375L224 173.3l-169.4 169.4c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25C432.4 348.9 424.2 352 416 352z"]},rc={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z"]},ic={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 224C0 188.7 28.65 160 64 160H128V288C128 341 170.1 384 224 384H352V448C352 483.3 323.3 512 288 512H64C28.65 512 0 483.3 0 448V224zM224 352C188.7 352 160 323.3 160 288V64C160 28.65 188.7 0 224 0H448C483.3 0 512 28.65 512 64V288C512 323.3 483.3 352 448 352H224z"]},oc={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"]},sc={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M384 96L384 0h-112c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48H464c26.51 0 48-21.49 48-48V128h-95.1C398.4 128 384 113.6 384 96zM416 0v96h96L416 0zM192 352V128h-144c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48L288 416h-32C220.7 416 192 387.3 192 352z"]},ac={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 384H352V448H128C92.65 448 64 419.3 64 384V128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H64V32C64 14.33 78.33 0 96 0C113.7 0 128 14.33 128 32V384zM384 128H160V64H384C419.3 64 448 92.65 448 128V384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H448V480C448 497.7 433.7 512 416 512C398.3 512 384 497.7 384 480V128z"]},lc={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360C94.93 360 120 385.1 120 416C120 446.9 94.93 472 64 472C33.07 472 8 446.9 8 416C8 385.1 33.07 360 64 360zM64 200C94.93 200 120 225.1 120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200zM64 152C33.07 152 8 126.9 8 96C8 65.07 33.07 40 64 40C94.93 40 120 65.07 120 96C120 126.9 94.93 152 64 152z"]},cc={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.853 54.87C10.47 40.9 24.54 32 40 32H472C487.5 32 501.5 40.9 508.1 54.87C514.8 68.84 512.7 85.37 502.1 97.33L320 320.9V448C320 460.1 313.2 471.2 302.3 476.6C291.5 482 278.5 480.9 268.8 473.6L204.8 425.6C196.7 419.6 192 410.1 192 400V320.9L9.042 97.33C-.745 85.37-2.765 68.84 3.854 54.87L3.853 54.87z"]},uc={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"]},hc={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},fc={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M320 96V80C320 53.49 298.5 32 272 32H215.4C204.3 12.89 183.6 0 160 0S115.7 12.89 104.6 32H48C21.49 32 0 53.49 0 80v320C0 426.5 21.49 448 48 448l144 .0013L192 176C192 131.8 227.8 96 272 96H320zM160 88C146.8 88 136 77.25 136 64S146.8 40 160 40S184 50.75 184 64S173.3 88 160 88zM416 128v96h96L416 128zM384 224L384 128h-112C245.5 128 224 149.5 224 176v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48V256h-95.99C398.4 256 384 241.6 384 224z"]},dc={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32zM421.7 220.3L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3z"]},pc={prefix:"fas",iconName:"scissors",icon:[512,512,[9986,9988,9984,"cut"],"f0c4","M396.8 51.2C425.1 22.92 470.9 22.92 499.2 51.2C506.3 58.27 506.3 69.73 499.2 76.8L216.5 359.5C221.3 372.1 224 385.7 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 287.1 112 287.1C126.3 287.1 139.9 290.7 152.5 295.5L191.1 255.1L152.5 216.5C139.9 221.3 126.3 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 126.3 221.3 139.9 216.5 152.5L255.1 191.1L396.8 51.2zM160 111.1C160 85.49 138.5 63.1 112 63.1C85.49 63.1 64 85.49 64 111.1C64 138.5 85.49 159.1 112 159.1C138.5 159.1 160 138.5 160 111.1zM112 448C138.5 448 160 426.5 160 400C160 373.5 138.5 352 112 352C85.49 352 64 373.5 64 400C64 426.5 85.49 448 112 448zM278.6 342.6L342.6 278.6L499.2 435.2C506.3 442.3 506.3 453.7 499.2 460.8C470.9 489.1 425.1 489.1 396.8 460.8L278.6 342.6z"]},mc={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM345.6 232.3l-104 112C237 349.2 230.7 352 224 352s-13.03-2.781-17.59-7.656l-104-112c-6.5-7-8.219-17.19-4.407-25.94C101.8 197.7 110.5 192 120 192h208c9.531 0 18.19 5.656 21.1 14.41C353.8 215.2 352.1 225.3 345.6 232.3z"]},gc={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM349.1 305.6C346.2 314.3 337.5 320 328 320h-208c-9.531 0-18.19-5.656-22-14.41C94.19 296.8 95.91 286.7 102.4 279.7l104-112c9.125-9.75 26.06-9.75 35.19 0l104 112C352.1 286.7 353.8 296.8 349.1 305.6z"]},vc={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"]},yc={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"]},wc={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function bc(e,t=1e3){if(e<.9*t)return e.toFixed()+" B";const n=e/t;if(n<.9*t)return n.toFixed(1)+" KB";const r=n/t;if(r<.9*t)return r.toFixed(1)+" MB";const i=r/t;if(i<.9*t)return i.toFixed(1)+" GB";return(i/t).toFixed(1)+" TB"}const xc=Et("jsoneditor:FocusTracker");function $c({onMount:e,onDestroy:t,getWindow:n,hasFocus:r,onFocus:i,onBlur:o}){let s,a=!1;function l(){const e=r();e&&(clearTimeout(s),a||(xc("focus"),i(),a=e))}function c(){a&&(clearTimeout(s),s=setTimeout((()=>{xc("blur"),a=!1,o()})))}e((()=>{xc("mount FocusTracker");const e=n();e&&(e.addEventListener("focusin",l,!0),e.addEventListener("focusout",c,!0))})),t((()=>{xc("destroy FocusTracker");const e=n();e&&(e.removeEventListener("focusin",l,!0),e.removeEventListener("focusout",c,!0))}))}function kc(t){let r,i,o=[{id:i="path-"+t[0]},t[1]],s={};for(let e=0;e<o.length;e+=1)s=n(s,o[e]);return{c(){r=E("path"),R(r,s)},m(e,t){S(e,r,t)},p(e,[t]){R(r,s=Ie(o,[1&t&&i!==(i="path-"+e[0])&&{id:i},2&t&&e[1]]))},i:e,o:e,d(e){e&&C(r)}}}function Sc(e,t,n){let{id:r}=t,{data:i={}}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,i=e.data)},[r,i]}class Cc extends Fe{constructor(e){super(),Ve(this,e,Sc,kc,a,{id:0,data:1})}}function _c(t){let r,i,o=[{id:i="polygon-"+t[0]},t[1]],s={};for(let e=0;e<o.length;e+=1)s=n(s,o[e]);return{c(){r=E("polygon"),R(r,s)},m(e,t){S(e,r,t)},p(e,[t]){R(r,s=Ie(o,[1&t&&i!==(i="polygon-"+e[0])&&{id:i},2&t&&e[1]]))},i:e,o:e,d(e){e&&C(r)}}}function Oc(e,t,n){let{id:r}=t,{data:i={}}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,i=e.data)},[r,i]}class Ec extends Fe{constructor(e){super(),Ve(this,e,Oc,_c,a,{id:0,data:1})}}function Ac(t){let n;return{c(){n=E("g")},m(e,r){S(e,n,r),n.innerHTML=t[0]},p(e,[t]){1&t&&(n.innerHTML=e[0])},i:e,o:e,d(e){e&&C(n)}}}function Mc(e,t,n){let r,i=870711;let{data:o}=t;function s(e){if(!e||!e.raw)return null;let t=e.raw;const n={};return t=t.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,((e,t)=>{const r=(i+=1,`fa-${i.toString(16)}`);return n[t]=r,` id="${r}"`})),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((e,t,r,i)=>{const o=t||i;return o&&n[o]?`#${n[o]}`:e})),t}return e.$$set=e=>{"data"in e&&n(1,o=e.data)},e.$$.update=()=>{2&e.$$.dirty&&n(0,r=s(o))},[r,o]}class Pc extends Fe{constructor(e){super(),Ve(this,e,Mc,Ac,a,{data:1})}}function jc(e){let t,n,r,i;const o=e[13].default,s=c(o,e,e[12],null);return{c(){t=E("svg"),s&&s.c(),I(t,"version","1.1"),I(t,"class",n="fa-icon "+e[0]+" svelte-1dof0an"),I(t,"x",e[8]),I(t,"y",e[9]),I(t,"width",e[1]),I(t,"height",e[2]),I(t,"aria-label",e[11]),I(t,"role",r=e[11]?"img":"presentation"),I(t,"viewBox",e[3]),I(t,"style",e[10]),H(t,"fa-spin",e[4]),H(t,"fa-pulse",e[6]),H(t,"fa-inverse",e[5]),H(t,"fa-flip-horizontal","horizontal"===e[7]),H(t,"fa-flip-vertical","vertical"===e[7])},m(e,n){S(e,t,n),s&&s.m(t,null),i=!0},p(e,[a]){s&&s.p&&(!i||4096&a)&&f(s,o,e,e[12],i?h(o,e[12],a,null):d(e[12]),null),(!i||1&a&&n!==(n="fa-icon "+e[0]+" svelte-1dof0an"))&&I(t,"class",n),(!i||256&a)&&I(t,"x",e[8]),(!i||512&a)&&I(t,"y",e[9]),(!i||2&a)&&I(t,"width",e[1]),(!i||4&a)&&I(t,"height",e[2]),(!i||2048&a)&&I(t,"aria-label",e[11]),(!i||2048&a&&r!==(r=e[11]?"img":"presentation"))&&I(t,"role",r),(!i||8&a)&&I(t,"viewBox",e[3]),(!i||1024&a)&&I(t,"style",e[10]),17&a&&H(t,"fa-spin",e[4]),65&a&&H(t,"fa-pulse",e[6]),33&a&&H(t,"fa-inverse",e[5]),129&a&&H(t,"fa-flip-horizontal","horizontal"===e[7]),129&a&&H(t,"fa-flip-vertical","vertical"===e[7])},i(e){i||(Oe(s,e),i=!0)},o(e){Ee(s,e),i=!1},d(e){e&&C(t),s&&s.d(e)}}}function Tc(e,t,n){let{$$slots:r={},$$scope:i}=t,{class:o}=t,{width:s}=t,{height:a}=t,{box:l}=t,{spin:c=!1}=t,{inverse:u=!1}=t,{pulse:h=!1}=t,{flip:f=null}=t,{x:d}=t,{y:p}=t,{style:m}=t,{label:g}=t;return e.$$set=e=>{"class"in e&&n(0,o=e.class),"width"in e&&n(1,s=e.width),"height"in e&&n(2,a=e.height),"box"in e&&n(3,l=e.box),"spin"in e&&n(4,c=e.spin),"inverse"in e&&n(5,u=e.inverse),"pulse"in e&&n(6,h=e.pulse),"flip"in e&&n(7,f=e.flip),"x"in e&&n(8,d=e.x),"y"in e&&n(9,p=e.y),"style"in e&&n(10,m=e.style),"label"in e&&n(11,g=e.label),"$$scope"in e&&n(12,i=e.$$scope)},[o,s,a,l,c,u,h,f,d,p,m,g,i,r]}class Nc extends Fe{constructor(e){super(),Ve(this,e,Tc,jc,a,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function Ic(e,t,n){const r=e.slice();return r[24]=t[n],r[26]=n,r}function Dc(e,t,n){const r=e.slice();return r[27]=t[n],r[26]=n,r}function Rc(e){let t,n,r,i,o=e[6].paths&&Lc(e),s=e[6].polygons&&zc(e),a=e[6].raw&&Fc(e);return{c(){o&&o.c(),t=M(),s&&s.c(),n=M(),a&&a.c(),r=P()},m(e,l){o&&o.m(e,l),S(e,t,l),s&&s.m(e,l),S(e,n,l),a&&a.m(e,l),S(e,r,l),i=!0},p(e,i){e[6].paths?o?(o.p(e,i),64&i&&Oe(o,1)):(o=Lc(e),o.c(),Oe(o,1),o.m(t.parentNode,t)):o&&(Ce(),Ee(o,1,1,(()=>{o=null})),_e()),e[6].polygons?s?(s.p(e,i),64&i&&Oe(s,1)):(s=zc(e),s.c(),Oe(s,1),s.m(n.parentNode,n)):s&&(Ce(),Ee(s,1,1,(()=>{s=null})),_e()),e[6].raw?a?(a.p(e,i),64&i&&Oe(a,1)):(a=Fc(e),a.c(),Oe(a,1),a.m(r.parentNode,r)):a&&(Ce(),Ee(a,1,1,(()=>{a=null})),_e())},i(e){i||(Oe(o),Oe(s),Oe(a),i=!0)},o(e){Ee(o),Ee(s),Ee(a),i=!1},d(e){o&&o.d(e),e&&C(t),s&&s.d(e),e&&C(n),a&&a.d(e),e&&C(r)}}}function Lc(e){let t,n,r=e[6].paths,i=[];for(let t=0;t<r.length;t+=1)i[t]=Bc(Dc(e,r,t));const o=e=>Ee(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=P()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);S(e,t,r),n=!0},p(e,n){if(64&n){let s;for(r=e[6].paths,s=0;s<r.length;s+=1){const o=Dc(e,r,s);i[s]?(i[s].p(o,n),Oe(i[s],1)):(i[s]=Bc(o),i[s].c(),Oe(i[s],1),i[s].m(t.parentNode,t))}for(Ce(),s=r.length;s<i.length;s+=1)o(s);_e()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Oe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Ee(i[e]);n=!1},d(e){_(i,e),e&&C(t)}}}function Bc(e){let t,n;return t=new Cc({props:{id:e[26],data:e[27]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.data=e[27]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function zc(e){let t,n,r=e[6].polygons,i=[];for(let t=0;t<r.length;t+=1)i[t]=Vc(Ic(e,r,t));const o=e=>Ee(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=P()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);S(e,t,r),n=!0},p(e,n){if(64&n){let s;for(r=e[6].polygons,s=0;s<r.length;s+=1){const o=Ic(e,r,s);i[s]?(i[s].p(o,n),Oe(i[s],1)):(i[s]=Vc(o),i[s].c(),Oe(i[s],1),i[s].m(t.parentNode,t))}for(Ce(),s=r.length;s<i.length;s+=1)o(s);_e()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Oe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Ee(i[e]);n=!1},d(e){_(i,e),e&&C(t)}}}function Vc(e){let t,n;return t=new Ec({props:{id:e[26],data:e[24]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.data=e[24]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Fc(e){let t,n,r;function i(t){e[15](t)}let o={};return void 0!==e[6]&&(o.data=e[6]),t=new Pc({props:o}),le.push((()=>Re(t,"data",i))),{c(){Le(t.$$.fragment)},m(e,n){Be(t,e,n),r=!0},p(e,r){const i={};!n&&64&r&&(n=!0,i.data=e[6],ge((()=>n=!1))),t.$set(i)},i(e){r||(Oe(t.$$.fragment,e),r=!0)},o(e){Ee(t.$$.fragment,e),r=!1},d(e){ze(t,e)}}}function qc(e){let t;const n=e[14].default,r=c(n,e,e[16],null),i=r||function(e){let t,n,r=e[6]&&Rc(e);return{c(){r&&r.c(),t=P()},m(e,i){r&&r.m(e,i),S(e,t,i),n=!0},p(e,n){e[6]?r?(r.p(e,n),64&n&&Oe(r,1)):(r=Rc(e),r.c(),Oe(r,1),r.m(t.parentNode,t)):r&&(Ce(),Ee(r,1,1,(()=>{r=null})),_e())},i(e){n||(Oe(r),n=!0)},o(e){Ee(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}(e);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){r?r.p&&(!t||65536&o)&&f(r,n,e,e[16],t?h(n,e[16],o,null):d(e[16]),null):i&&i.p&&(!t||64&o)&&i.p(e,t?o:-1)},i(e){t||(Oe(i,e),t=!0)},o(e){Ee(i,e),t=!1},d(e){i&&i.d(e)}}}function Hc(e){let t,n;return t=new Nc({props:{label:e[5],width:e[7],height:e[8],box:e[10],style:e[9],spin:e[1],flip:e[4],inverse:e[2],pulse:e[3],class:e[0],$$slots:{default:[qc]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,[n]){const r={};32&n&&(r.label=e[5]),128&n&&(r.width=e[7]),256&n&&(r.height=e[8]),1024&n&&(r.box=e[10]),512&n&&(r.style=e[9]),2&n&&(r.spin=e[1]),16&n&&(r.flip=e[4]),4&n&&(r.inverse=e[2]),8&n&&(r.pulse=e[3]),1&n&&(r.class=e[0]),65600&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Wc(e,t,n){let r,i,o,s,{$$slots:a={},$$scope:l}=t,{class:c=""}=t,{data:u}=t,{scale:h=1}=t,{spin:f=!1}=t,{inverse:d=!1}=t,{pulse:p=!1}=t,{flip:m=null}=t,{label:g=null}=t,v=null,{style:y=null}=t;function w(){let e=1;return void 0!==h&&(e=Number(h)),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*e}function b(){return v?Math.max(v.width,v.height)/16:1}return e.$$set=e=>{"class"in e&&n(0,c=e.class),"data"in e&&n(11,u=e.data),"scale"in e&&n(12,h=e.scale),"spin"in e&&n(1,f=e.spin),"inverse"in e&&n(2,d=e.inverse),"pulse"in e&&n(3,p=e.pulse),"flip"in e&&n(4,m=e.flip),"label"in e&&n(5,g=e.label),"style"in e&&n(13,y=e.style),"$$scope"in e&&n(16,l=e.$$scope)},e.$$.update=()=>{14336&e.$$.dirty&&(!function(){if(void 0===u)return;const e=function(e){if("iconName"in e&&"icon"in e){let t={},n=e.icon,r=e.iconName,i={width:n[0],height:n[1],paths:[{d:n[4]}]};return t[r]=i,t}return e}(u),[t]=Object.keys(e),r=e[t];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n(6,v=r)}(),n(7,r=v?v.width/b()*w():0),n(8,i=v?v.height/b()*w():0),n(9,o=function(){let e="";null!==y&&(e+=y);let t=w();if(1===t){if(0===e.length)return;return e}return""===e||e.endsWith(";")||(e+="; "),`${e}font-size: ${t}em`}()),n(10,s=v?`0 0 ${v.width} ${v.height}`:`0 0 ${r} ${i}`))},[c,f,d,p,m,g,v,r,i,o,s,u,h,y,a,function(e){v=e,n(6,v)},l]}class Uc extends Fe{constructor(e){super(),Ve(this,e,Wc,Hc,a,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function Jc(e,t,n){const r=e.slice();return r[8]=t[n],r}function Kc(e){let t,n;return t=new Uc({props:{data:e[1]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.data=e[1]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Gc(e){let t,n;return t=new Uc({props:{data:e[8].icon}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.data=e[8].icon),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Qc(e){let t,n,r,i,s,a,l,c,u,h=e[8].text+"",f=e[8].icon&&Gc(e);function d(){return e[6](e[8])}function p(){return e[7](e[8])}return{c(){t=O("button"),f&&f.c(),n=M(),r=A(h),i=M(),I(t,"type","button"),I(t,"class","jse-button jse-action jse-primary svelte-kvi5ls"),I(t,"title",s=e[8].title),t.disabled=a=e[8].disabled},m(e,o){S(e,t,o),f&&f.m(t,null),x(t,n),x(t,r),x(t,i),l=!0,c||(u=[j(t,"click",d),j(t,"mousedown",p)],c=!0)},p(i,o){(e=i)[8].icon?f?(f.p(e,o),8&o&&Oe(f,1)):(f=Gc(e),f.c(),Oe(f,1),f.m(t,n)):f&&(Ce(),Ee(f,1,1,(()=>{f=null})),_e()),(!l||8&o)&&h!==(h=e[8].text+"")&&B(r,h),(!l||8&o&&s!==(s=e[8].title))&&I(t,"title",s),(!l||8&o&&a!==(a=e[8].disabled))&&(t.disabled=a)},i(e){l||(Oe(f),l=!0)},o(e){Ee(f),l=!1},d(e){e&&C(t),f&&f.d(),c=!1,o(u)}}}function Yc(e){let t,n,r,i,o,s,a,l,c,u,h=e[1]&&Kc(e),f=e[3],d=[];for(let t=0;t<f.length;t+=1)d[t]=Qc(Jc(e,f,t));const p=e=>Ee(d[e],1,1,(()=>{d[e]=null}));return{c(){t=O("div"),n=O("div"),h&&h.c(),r=M(),i=A(e[2]),o=M(),s=O("div");for(let e=0;e<d.length;e+=1)d[e].c();I(n,"class","jse-text svelte-kvi5ls"),H(n,"jse-clickable",null!==e[4]),I(s,"class","jse-actions svelte-kvi5ls"),I(t,"class",a="jse-message jse-"+e[0]+" svelte-kvi5ls")},m(a,f){S(a,t,f),x(t,n),h&&h.m(n,null),x(n,r),x(n,i),x(t,o),x(t,s);for(let e=0;e<d.length;e+=1)d[e].m(s,null);l=!0,c||(u=j(n,"click",e[5]),c=!0)},p(e,[o]){if(e[1]?h?(h.p(e,o),2&o&&Oe(h,1)):(h=Kc(e),h.c(),Oe(h,1),h.m(n,r)):h&&(Ce(),Ee(h,1,1,(()=>{h=null})),_e()),(!l||4&o)&&B(i,e[2]),16&o&&H(n,"jse-clickable",null!==e[4]),8&o){let t;for(f=e[3],t=0;t<f.length;t+=1){const n=Jc(e,f,t);d[t]?(d[t].p(n,o),Oe(d[t],1)):(d[t]=Qc(n),d[t].c(),Oe(d[t],1),d[t].m(s,null))}for(Ce(),t=f.length;t<d.length;t+=1)p(t);_e()}(!l||1&o&&a!==(a="jse-message jse-"+e[0]+" svelte-kvi5ls"))&&I(t,"class",a)},i(e){if(!l){Oe(h);for(let e=0;e<f.length;e+=1)Oe(d[e]);l=!0}},o(e){Ee(h),d=d.filter(Boolean);for(let e=0;e<d.length;e+=1)Ee(d[e]);l=!1},d(e){e&&C(t),h&&h.d(),_(d,e),c=!1,u()}}}function Xc(e,t,n){let{type:r="success"}=t,{icon:i}=t,{message:o}=t,{actions:s=[]}=t,{onClick:a}=t;return e.$$set=e=>{"type"in e&&n(0,r=e.type),"icon"in e&&n(1,i=e.icon),"message"in e&&n(2,o=e.message),"actions"in e&&n(3,s=e.actions),"onClick"in e&&n(4,a=e.onClick)},[r,i,o,s,a,function(){a&&a()},e=>e.onClick(),e=>e.onMouseDown()]}class Zc extends Fe{constructor(e){super(),Ve(this,e,Xc,Yc,l,{type:0,icon:1,message:2,actions:3,onClick:4})}}function eu(e){return e.map((e=>"number"==typeof e?"["+e+"]":"string"==typeof e&&e.match(/^[A-Za-z0-9_$]+$/)?"."+e:'["'+String(e)+'"]')).join("")}function tu(e){return e.map((e=>{const t=String(e);return nu.test(t)?`?.${t}`:`?.[${JSON.stringify(e)}]`})).join("")}const nu=/^[A-z$_][A-z$_\d]*$/i;function ru(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function iu(e){let t,n,r,i;const o=[su,ou],s=[];function a(e,t){return e[2]||1===e[0].length?0:1}return n=a(e),r=s[n]=o[n](e),{c(){t=O("div"),r.c(),I(t,"class","jse-validation-errors-overview svelte-1oe8e8r")},m(e,r){S(e,t,r),s[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?s[n].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),r=s[n],r?r.p(e,i):(r=s[n]=o[n](e),r.c()),Oe(r,1),r.m(t,null))},i(e){i||(Oe(r),i=!0)},o(e){Ee(r),i=!1},d(e){e&&C(t),s[n].d()}}}function ou(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m=e[0].length+"";return o=new Uc({props:{data:vc}}),h=new Uc({props:{data:Jl}}),{c(){t=O("table"),n=O("tbody"),r=O("tr"),i=O("td"),Le(o.$$.fragment),s=M(),a=O("td"),l=A(m),c=A(" validation errors\n              "),u=O("div"),Le(h.$$.fragment),I(i,"class","jse-validation-error-icon svelte-1oe8e8r"),I(u,"class","jse-validation-errors-expand svelte-1oe8e8r"),I(a,"class","svelte-1oe8e8r"),I(r,"class","jse-validation-error svelte-1oe8e8r"),I(t,"class","svelte-1oe8e8r")},m(m,g){S(m,t,g),x(t,n),x(n,r),x(r,i),Be(o,i,null),x(r,s),x(r,a),x(a,l),x(a,c),x(a,u),Be(h,u,null),f=!0,d||(p=j(r,"click",e[4]),d=!0)},p(e,t){(!f||1&t)&&m!==(m=e[0].length+"")&&B(l,m)},i(e){f||(Oe(o.$$.fragment,e),Oe(h.$$.fragment,e),f=!0)},o(e){Ee(o.$$.fragment,e),Ee(h.$$.fragment,e),f=!1},d(e){e&&C(t),ze(o),ze(h),d=!1,p()}}}function su(e){let t,n,r,i=e[0],o=[];for(let t=0;t<i.length;t+=1)o[t]=lu(ru(e,i,t));const s=e=>Ee(o[e],1,1,(()=>{o[e]=null}));return{c(){t=O("table"),n=O("tbody");for(let e=0;e<o.length;e+=1)o[e].c();I(t,"class","svelte-1oe8e8r")},m(e,i){S(e,t,i),x(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r=!0},p(e,t){if(11&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=ru(e,i,r);o[r]?(o[r].p(s,t),Oe(o[r],1)):(o[r]=lu(s),o[r].c(),Oe(o[r],1),o[r].m(n,null))}for(Ce(),r=i.length;r<o.length;r+=1)s(r);_e()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)Oe(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Ee(o[e]);r=!1},d(e){e&&C(t),_(o,e)}}}function au(t){let n,r,i,o,s;return r=new Uc({props:{data:Ul}}),{c(){n=O("button"),Le(r.$$.fragment),I(n,"type","button"),I(n,"class","jse-validation-errors-collapse svelte-1oe8e8r"),I(n,"title","Collapse validation errors")},m(e,a){S(e,n,a),Be(r,n,null),i=!0,o||(s=j(n,"click",N(t[3])),o=!0)},p:e,i(e){i||(Oe(r.$$.fragment,e),i=!0)},o(e){Ee(r.$$.fragment,e),i=!1},d(e){e&&C(n),ze(r),o=!1,s()}}}function lu(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g=eu(e[6].path)+"",v=e[6].message+"";r=new Uc({props:{data:vc}});let y=0===e[8]&&e[0].length>1&&au(e);function w(){return e[5](e[6])}return{c(){t=O("tr"),n=O("td"),Le(r.$$.fragment),i=M(),o=O("td"),s=A(g),a=M(),l=O("td"),c=A(v),u=M(),h=O("td"),y&&y.c(),f=M(),I(n,"class","jse-validation-error-icon svelte-1oe8e8r"),I(o,"class","svelte-1oe8e8r"),I(l,"class","svelte-1oe8e8r"),I(h,"class","jse-validation-error-action svelte-1oe8e8r"),I(t,"class","jse-validation-error svelte-1oe8e8r")},m(e,g){S(e,t,g),x(t,n),Be(r,n,null),x(t,i),x(t,o),x(o,s),x(t,a),x(t,l),x(l,c),x(t,u),x(t,h),y&&y.m(h,null),x(t,f),d=!0,p||(m=j(t,"click",w),p=!0)},p(t,n){e=t,(!d||1&n)&&g!==(g=eu(e[6].path)+"")&&B(s,g),(!d||1&n)&&v!==(v=e[6].message+"")&&B(c,v),0===e[8]&&e[0].length>1?y?(y.p(e,n),1&n&&Oe(y,1)):(y=au(e),y.c(),Oe(y,1),y.m(h,null)):y&&(Ce(),Ee(y,1,1,(()=>{y=null})),_e())},i(e){d||(Oe(r.$$.fragment,e),Oe(y),d=!0)},o(e){Ee(r.$$.fragment,e),Ee(y),d=!1},d(e){e&&C(t),ze(r),y&&y.d(),p=!1,m()}}}function cu(e){let t,n,r=!ea(e[0]),i=r&&iu(e);return{c(){i&&i.c(),t=P()},m(e,r){i&&i.m(e,r),S(e,t,r),n=!0},p(e,[n]){1&n&&(r=!ea(e[0])),r?i?(i.p(e,n),1&n&&Oe(i,1)):(i=iu(e),i.c(),Oe(i,1),i.m(t.parentNode,t)):i&&(Ce(),Ee(i,1,1,(()=>{i=null})),_e())},i(e){n||(Oe(i),n=!0)},o(e){Ee(i),n=!1},d(e){i&&i.d(e),e&&C(t)}}}function uu(e,t,n){let{validationErrors:r}=t,{selectError:i}=t,o=!0;return e.$$set=e=>{"validationErrors"in e&&n(0,r=e.validationErrors),"selectError"in e&&n(1,i=e.selectError)},[r,i,o,function(){n(2,o=!1)},function(){n(2,o=!0)},e=>{setTimeout((()=>i(e)))}]}class hu extends Fe{constructor(e){super(),Ve(this,e,uu,cu,l,{validationErrors:0,selectError:1})}}const fu={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},du={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},pu={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},mu={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]},gu=e=>({}),vu=e=>({});function yu(e,t,n){const r=e.slice();return r[3]=t[n],r}const wu=e=>({}),bu=e=>({});function xu(e){let t,n,r,i,o,a,l,c,u=e[3].icon&&Su(e),h=e[3].text&&Cu(e);return{c(){t=O("button"),u&&u.c(),n=M(),h&&h.c(),I(t,"type","button"),I(t,"class",r="jse-button "+e[3].className+" svelte-v4jelk"),I(t,"title",i=e[3].title),t.disabled=o=e[3].disabled||!1},m(r,i){S(r,t,i),u&&u.m(t,null),x(t,n),h&&h.m(t,null),a=!0,l||(c=j(t,"click",(function(){s(e[3].onClick)&&e[3].onClick.apply(this,arguments)})),l=!0)},p(s,l){(e=s)[3].icon?u?(u.p(e,l),1&l&&Oe(u,1)):(u=Su(e),u.c(),Oe(u,1),u.m(t,n)):u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e()),e[3].text?h?h.p(e,l):(h=Cu(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null),(!a||1&l&&r!==(r="jse-button "+e[3].className+" svelte-v4jelk"))&&I(t,"class",r),(!a||1&l&&i!==(i=e[3].title))&&I(t,"title",i),(!a||1&l&&o!==(o=e[3].disabled||!1))&&(t.disabled=o)},i(e){a||(Oe(u),a=!0)},o(e){Ee(u),a=!1},d(e){e&&C(t),u&&u.d(),h&&h.d(),l=!1,c()}}}function $u(t){let n;return{c(){n=O("div"),I(n,"class","jse-space svelte-v4jelk")},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function ku(t){let n;return{c(){n=O("div"),I(n,"class","jse-separator svelte-v4jelk")},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function Su(e){let t,n;return t=new Uc({props:{data:e[3].icon}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[3].icon),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function Cu(e){let t,n=e[3].text+"";return{c(){t=A(n)},m(e,n){S(e,t,n)},p(e,r){1&r&&n!==(n=e[3].text+"")&&B(t,n)},d(e){e&&C(t)}}}function _u(e){let t,n,r,i;const o=[ku,$u,xu],s=[];function a(e,t){return!0===e[3].separator?0:!0===e[3].space?1:2}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},m(e,n){s[t].m(e,n),S(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Oe(n,1),n.m(r.parentNode,r))},i(e){i||(Oe(n),i=!0)},o(e){Ee(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function Ou(e){let t,n,r,i;const o=e[2].left,s=c(o,e,e[1],bu);let a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=_u(yu(e,a,t));const u=e=>Ee(l[e],1,1,(()=>{l[e]=null})),p=e[2].right,m=c(p,e,e[1],vu);return{c(){t=O("div"),s&&s.c(),n=M();for(let e=0;e<l.length;e+=1)l[e].c();r=M(),m&&m.c(),I(t,"class","jse-menu svelte-v4jelk")},m(e,o){S(e,t,o),s&&s.m(t,null),x(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);x(t,r),m&&m.m(t,null),i=!0},p(e,[n]){if(s&&s.p&&(!i||2&n)&&f(s,o,e,e[1],i?h(o,e[1],n,wu):d(e[1]),bu),1&n){let i;for(a=e[0],i=0;i<a.length;i+=1){const o=yu(e,a,i);l[i]?(l[i].p(o,n),Oe(l[i],1)):(l[i]=_u(o),l[i].c(),Oe(l[i],1),l[i].m(t,r))}for(Ce(),i=a.length;i<l.length;i+=1)u(i);_e()}m&&m.p&&(!i||2&n)&&f(m,p,e,e[1],i?h(p,e[1],n,gu):d(e[1]),vu)},i(e){if(!i){Oe(s,e);for(let e=0;e<a.length;e+=1)Oe(l[e]);Oe(m,e),i=!0}},o(e){Ee(s,e),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Ee(l[e]);Ee(m,e),i=!1},d(e){e&&C(t),s&&s.d(e),_(l,e),m&&m.d(e)}}}function Eu(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:o=[]}=t;return e.$$set=e=>{"items"in e&&n(0,o=e.items),"$$scope"in e&&n(1,i=e.$$scope)},[o,i,r]}class Au extends Fe{constructor(e){super(),Ve(this,e,Eu,Ou,l,{items:0})}}function Mu(t){let n;return{c(){n=O("div"),n.innerHTML='<a href="https://codemirror.net" target="_blank" rel="noopener noreferrer" title="Code mode is powered by CodeMirror" class="svelte-1yyupsl">powered by CodeMirror</a>',I(n,"slot","right"),I(n,"class","jse-powered-by svelte-1yyupsl")},m(e,t){S(e,n,t)},p:e,d(e){e&&C(n)}}}function Pu(e){let t,n;return t=new Au({props:{items:e[0],$$slots:{right:[Mu]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.items=e[0]),131072&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function ju(e,t,n){let r,i,{readOnly:o=!1}=t,{onFormat:s}=t,{onCompact:a}=t,{onSort:l}=t,{onTransform:c}=t,{onToggleSearch:u}=t,{onUndo:h}=t,{onRedo:f}=t,{canUndo:d}=t,{canRedo:p}=t,{canFormat:m}=t,{canCompact:g}=t,{canSort:v}=t,{canTransform:y}=t,{onRenderMenu:w=Yr}=t;return e.$$set=e=>{"readOnly"in e&&n(1,o=e.readOnly),"onFormat"in e&&n(2,s=e.onFormat),"onCompact"in e&&n(3,a=e.onCompact),"onSort"in e&&n(4,l=e.onSort),"onTransform"in e&&n(5,c=e.onTransform),"onToggleSearch"in e&&n(6,u=e.onToggleSearch),"onUndo"in e&&n(7,h=e.onUndo),"onRedo"in e&&n(8,f=e.onRedo),"canUndo"in e&&n(9,d=e.canUndo),"canRedo"in e&&n(10,p=e.canRedo),"canFormat"in e&&n(11,m=e.canFormat),"canCompact"in e&&n(12,g=e.canCompact),"canSort"in e&&n(13,v=e.canSort),"canTransform"in e&&n(14,y=e.canTransform),"onRenderMenu"in e&&n(15,w=e.onRenderMenu)},e.$$.update=()=>{32766&e.$$.dirty&&n(16,r=o?[{space:!0}]:[{icon:pu,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:s,disabled:o||!m},{icon:mu,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:a,disabled:o||!g},{separator:!0},{icon:Gl,title:"Sort",className:"jse-sort",onClick:l,disabled:o||!v},{icon:cc,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:c,disabled:o||!y},{icon:hc,title:"Search (Ctrl+F)",className:"jse-search",onClick:u},{separator:!0},{icon:Ql,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:h,disabled:!d},{icon:Yl,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:f,disabled:!p},{space:!0}]),98304&e.$$.dirty&&n(0,i=w("code",r)||r)},[i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,r]}class Tu extends Fe{constructor(e){super(),Ve(this,e,ju,Pu,l,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}class Nu{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Du.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),Du.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Bu(this),i=new Bu(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new Bu(this,e)}iterRange(e,t=this.length){return new zu(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Vu(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Iu(e):Du.from(Iu.split(e,[])):Nu.empty}}class Iu extends Nu{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Fu(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new Iu(Lu(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=Ru(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new Iu(t,e.length+i.length));else{let e=t.length>>1;n.push(new Iu(t.slice(0,e)),new Iu(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof Iu))return super.replace(e,t,n);let r=Ru(this.text,Ru(n.text,Lu(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new Iu(r,i):Du.from(Iu.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new Iu(n,r)),n=[],r=-1);return r>-1&&t.push(new Iu(n,r)),t}}class Du extends Nu{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new Du(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Du))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new Iu(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof Du)for(let t of e.children)u(t);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof Iu&&a&&(t=c[c.length-1])instanceof Iu&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new Iu(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:Du.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return h(),1==s.length?s[0]:new Du(s,t)}}function Ru(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function Lu(e,t,n){return Ru(e,[""],t,n)}Nu.empty=new Iu([""],0);class Bu{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Iu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof Iu?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof Iu){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof Iu?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class zu{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Bu(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Vu{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Nu.prototype[Symbol.iterator]=function(){return this.iter()},Bu.prototype[Symbol.iterator]=zu.prototype[Symbol.iterator]=Vu.prototype[Symbol.iterator]=function(){return this});class Fu{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let qu="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<qu.length;e++)qu[e]+=qu[e-1];function Hu(e){for(let t=1;t<qu.length;t+=2)if(qu[t]>e)return qu[t-1]<=e;return!1}function Wu(e){return e>=127462&&e<=127487}function Uu(e,t,n=!0,r=!0){return(n?Ju:Ku)(e,t,r)}function Ju(e,t,n){if(t==e.length)return t;t&&Gu(e.charCodeAt(t))&&Qu(e.charCodeAt(t-1))&&t--;let r=Yu(e,t);for(t+=Zu(r);t<e.length;){let i=Yu(e,t);if(8205==r||8205==i||n&&Hu(i))t+=Zu(i),r=i;else{if(!Wu(i))break;{let n=0,r=t-2;for(;r>=0&&Wu(Yu(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function Ku(e,t,n){for(;t>0;){let r=Ju(e,t-2,n);if(r<t)return r;t--}return 0}function Gu(e){return e>=56320&&e<57344}function Qu(e){return e>=55296&&e<56320}function Yu(e,t){let n=e.charCodeAt(t);if(!Qu(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return Gu(r)?r-56320+(n-55296<<10)+65536:n}function Xu(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Zu(e){return e<65536?1:2}const eh=/\r\n?|\n/;var th=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(th||(th={}));class nh{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){sh(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new nh(e)}composeDesc(e){return this.empty?e:e.empty?this:lh(this,e)}mapDesc(e,t=!1){return e.empty?this:ah(this,e,t)}mapPos(e,t=-1,n=th.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=th.Simple&&l>=e&&(n==th.TrackDel&&r<e&&l>e||n==th.TrackBefore&&r<e||n==th.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new nh(e)}static create(e){return new nh(e)}}class rh extends nh{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return sh(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return ah(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Nu.empty);n.push(o?e.slice(i,i+o):Nu.empty)}i+=o}return new rh(t,n)}compose(e){return this.empty?e:e.empty?this:lh(this,e,!0)}map(e,t=!1){return e.empty?this:ah(this,e,t,!0)}iterChanges(e,t=!1){sh(this,e,t)}get desc(){return nh.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new ch(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);ih(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;ih(t,e,o),o>0&&oh(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);ih(t,e,-1),ih(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new rh(t,n),filtered:nh.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&ih(r,t-o,-1);let n=new rh(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof rh){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Nu.of(c.split(n||eh)):c:Nu.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&ih(r,e-o,-1),ih(r,s-e,h),oh(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new rh(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Nu.empty);n[r]=Nu.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new rh(t,n)}static createSet(e,t){return new rh(e,t)}}function ih(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function oh(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Nu.empty);e.push(n)}}function sh(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Nu.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function ah(e,t,n,r=!1){let i=[],o=r?[]:null,s=new ch(e),a=new ch(t);for(let e=0,t=0;;)if(-1==s.ins)e+=s.len,s.next();else if(-1==a.ins&&t<e){let n=Math.min(a.len,e-t);a.forward(n),ih(i,n,-1),t+=n}else if(a.ins>=0&&(s.done||t<e||t==e&&(a.len<s.len||a.len==s.len&&!n))){for(ih(i,a.ins,-1);e>t&&!s.done&&e+s.len<t+a.len;)e+=s.len,s.next();t+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?rh.createSet(i,o):nh.create(i);throw new Error("Mismatched change set lengths")}{let n=0,r=e+s.len;for(;;)if(a.ins>=0&&t>e&&t+a.len<r)n+=a.ins,t+=a.len,a.next();else{if(!(-1==a.ins&&t<r))break;{let e=Math.min(a.len,r-t);n+=e,a.forward(e),t+=e}}ih(i,n,s.ins),o&&oh(o,i,s.text),e=r,s.next()}}}function lh(e,t,n=!1){let r=[],i=n?[]:null,o=new ch(e),s=new ch(t);for(let e=!1;;){if(o.done&&s.done)return i?rh.createSet(r,i):nh.create(r);if(0==o.ins)ih(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;ih(r,t,n,e),i&&n&&oh(i,r,s.text)}else-1==s.ins?(ih(r,o.off?0:o.len,t,e),i&&oh(i,r,o.textBit(t))):(ih(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&oh(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else ih(r,0,s.ins,e),i&&oh(i,r,s.text),s.next()}}class ch{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Nu.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Nu.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class uh{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new uh(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return hh.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return hh.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return hh.range(e.anchor,e.head)}static create(e,t,n){return new uh(e,t,n)}}class hh{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:hh.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new hh([this.main],0)}addRange(e,t=!0){return hh.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,hh.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new hh(e.ranges.map((e=>uh.fromJSON(e))),e.main)}static single(e,t=e){return new hh([hh.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return hh.normalized(e.slice(),t);n=i.to}return new hh(e,t)}static cursor(e,t=0,n,r){return uh.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n){let r=(null!=n?n:33554431)<<5;return t<e?uh.create(t,e,24|r):uh.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?hh.range(s,o):hh.range(o,s))}}return new hh(e,t)}}function fh(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let dh=0;class ph{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.extensions=i,this.id=dh++,this.default=e([])}static define(e={}){return new ph(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:mh),!!e.static,e.enables)}of(e){return new gh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new gh(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function mh(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class gh{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=dh++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||yh(e,c)){let t=n(e);if(s?!vh(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a=n(e),l=t.config.address[i];if(null!=l){let n=Th(t,l);if(this.dependencies.every((n=>n instanceof ph?t.facet(n)===e.facet(n):!(n instanceof xh)||t.field(n,!1)==e.field(n,!1)))||(s?vh(a,n,r):r(a,n)))return e.values[o]=n,0}return e.values[o]=a,1}}}}function vh(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function yh(e,t){let n=!1;for(let r of t)1&jh(e,r)&&(n=!0);return n}function wh(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=Th(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)jh(e,t);return e.values[s]=a(e),1},update(e,n){if(!yh(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=yh(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&mh(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const bh=ph.define({static:!0});class xh{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new xh(dh++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(bh).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,bh.of({field:this,create:e})]}get extension(){return this}}const $h=4,kh=3,Sh=2,Ch=1;function _h(e){return t=>new Eh(t,e)}const Oh={highest:_h(0),high:_h(Ch),default:_h(Sh),low:_h(kh),lowest:_h($h)};class Eh{constructor(e,t){this.inner=e,this.prec=t}}class Ah{of(e){return new Mh(this,e)}reconfigure(e){return Ah.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Mh{constructor(e,t){this.compartment=e,this.inner=t}}class Ph{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof Mh&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof Mh){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof Eh)o(e.inner,e.prec);else if(e instanceof xh)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof gh)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,Sh),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))n instanceof xh?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=c&&c[e]||[];if(t.every((e=>0==e.type)))if(s[r.id]=a.length<<1|1,mh(o,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[r.id]=l.length<<1,l.push((e=>wh(e,r,t)))}}let u=l.map((e=>e(s)));return new Ph(e,o,u,s,a,i)}}function jh(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function Th(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Nh=ph.define(),Ih=ph.define({combine:e=>e.some((e=>e)),static:!0}),Dh=ph.define({combine:e=>e.length?e[0]:void 0,static:!0}),Rh=ph.define(),Lh=ph.define(),Bh=ph.define(),zh=ph.define({combine:e=>!!e.length&&e[0]});class Vh{constructor(e,t){this.type=e,this.value=t}static define(){return new Fh}}class Fh{of(e){return new Vh(this,e)}}class qh{constructor(e){this.map=e}of(e){return new Hh(this,e)}}class Hh{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Hh(this.type,t)}is(e){return this.type==e}static define(e={}){return new qh(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Hh.reconfigure=Hh.define(),Hh.appendConfig=Hh.define();class Wh{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&fh(n,t.newLength),i.some((e=>e.type==Wh.time))||(this.annotations=i.concat(Wh.time.of(Date.now())))}static create(e,t,n,r,i,o){return new Wh(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Wh.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Uh(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Jh(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=rh.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Hh.mapEffects(e.effects,i).concat(Hh.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Kh(e,t,n){let r=t.selection,i=Yh(t.annotations);return t.userEvent&&(i=i.concat(Wh.userEvent.of(t.userEvent))),{changes:t.changes instanceof rh?t.changes:rh.of(t.changes||[],n,e.facet(Dh)),selection:r&&(r instanceof hh?r:hh.single(r.anchor,r.head)),effects:Yh(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function Gh(e,t,n){let r=Kh(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=Jh(r,Kh(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=Wh.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Bh),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=Jh(e,Kh(t,o,e.changes.newLength),!0))}return r==e?e:Wh.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(Rh)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Uh(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=rh.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.invertedDesc}e=Wh.create(t,r,e.selection&&e.selection.map(i),Hh.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(Lh);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof Wh?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Wh?i[0]:Gh(t,Yh(i),!1)}return e}(i):i)}Wh.time=Vh.define(),Wh.userEvent=Vh.define(),Wh.addToHistory=Vh.define(),Wh.remote=Vh.define();const Qh=[];function Yh(e){return null==e?Qh:Array.isArray(e)?e:[e]}var Xh=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Xh||(Xh={}));const Zh=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let ef;try{ef=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function tf(e){return t=>{if(!/\S/.test(t))return Xh.Space;if(function(e){if(ef)return ef.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"¬Ä"&&(n.toUpperCase()!=n.toLowerCase()||Zh.test(n)))return!0}return!1}(t))return Xh.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Xh.Word;return Xh.Other}}class nf{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)jh(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return jh(this,n),Th(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Gh(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(Ah.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(Hh.reconfigure)?(n=null,r=t.value):t.is(Hh.appendConfig)&&(n=null,r=Yh(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=Ph.resolve(r,i,this),t=new nf(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new nf(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:hh.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=Yh(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=Hh.mapEffects(o,l).concat(Hh.mapEffects(Yh(s.effects),c))}return{changes:r,selection:hh.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof rh?e:rh.of(e,this.doc.length,this.facet(nf.lineSeparator))}toText(e){return Nu.of(e.split(this.facet(nf.lineSeparator)||eh))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(jh(this,t),Th(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof xh&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n){let i=n[t],o=e[t];r.push(i.init((e=>i.spec.fromJSON(o,e))))}return nf.create({doc:e.doc,selection:hh.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Ph.resolve(e.extensions||[],new Map),n=e.doc instanceof Nu?e.doc:Nu.of((e.doc||"").split(t.staticFacet(nf.lineSeparator)||eh)),r=e.selection?e.selection instanceof hh?e.selection:hh.single(e.selection.anchor,e.selection.head):hh.single(0);return fh(r,n.length),t.staticFacet(Ih)||(r=r.asSingle()),new nf(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(nf.tabSize)}get lineBreak(){return this.facet(nf.lineSeparator)||"\n"}get readOnly(){return this.facet(zh)}phrase(e,...t){for(let t of this.facet(nf.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(Nh))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return tf(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=Uu(t,o,!1);if(i(t.slice(e,o))!=Xh.Word)break;o=e}for(;s<r;){let e=Uu(t,s);if(i(t.slice(s,e))!=Xh.Word)break;s=e}return o==s?null:hh.range(o+n,s+n)}}function rf(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}nf.allowMultipleSelections=Ih,nf.tabSize=ph.define({combine:e=>e.length?e[0]:4}),nf.lineSeparator=Dh,nf.readOnly=zh,nf.phrases=ph.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),nf.languageData=Nh,nf.changeFilter=Rh,nf.transactionFilter=Lh,nf.transactionExtender=Bh,Ah.reconfigure=Hh.define();class of{eq(e){return this==e}range(e,t=e){return sf.create(e,t,this)}}of.prototype.startSide=of.prototype.endSide=0,of.prototype.point=!1,of.prototype.mapMode=th.TrackDel;class sf{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new sf(e,t,n)}}function af(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class lf{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,f=this.to[a]+e;if(h==f){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(f,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new lf(r,i,n,s):null,pos:o}}}class cf{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new cf(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(af)),this.isEmpty)return t.length?cf.of(t):this;let s=new ff(this,null,-1).goto(0),a=0,l=[],c=new uf;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(sf.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?cf.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new cf(n,t,i||cf.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return df.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return df.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=hf(o,s,n),l=new mf(o,a,i),c=new mf(s,a,i);n.iterGaps(((e,t,n)=>gf(l,e,c,t,n,r))),n.empty&&0==n.length&&gf(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=hf(i,o),a=new mf(i,s,0).goto(n),l=new mf(o,s,0).goto(n);for(;;){if(a.to!=l.to||!vf(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new mf(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point?(r.point(s,e,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(e)+(o.to>e?1:0)):e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e)),o.to>n)break;s=o.to,o.next()}return a}static of(e,t=!1){let n=new uf;for(let r of e instanceof sf?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(af(t,r)>0)return e.slice().sort(af);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}cf.empty=new cf([],[],null,-1),cf.empty.nextLayer=cf.empty;class uf{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new lf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new uf)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(cf.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=cf.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function hf(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class ff{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class df{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new ff(o,t,n,i));return 1==r.length?r[0]:new df(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)pf(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)pf(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),pf(this.heap,0)}}}function pf(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class mf{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=df.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){yf(this.active,e),yf(this.activeTo,e),yf(this.activeRank,e),this.minActive=bf(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;wf(this.active,t,n),wf(this.activeTo,t,r),wf(this.activeRank,t,i),e&&wf(e,t,this.cursor.from),this.minActive=bf(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&yf(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function gf(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&vf(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!vf(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function vf(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function yf(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function wf(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function bf(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function xf(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=Uu(e,i));return r}function $f(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=Uu(e,r)}return!0===r?-1:e.length}const kf="undefined"==typeof Symbol?"__Õº":Symbol.for("Õº"),Sf="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Cf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class _f{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Cf[kf]||1;return Cf[kf]=e+1,"Õº"+e.toString(36)}static mount(e,t){(e[Sf]||new Ef(e)).mount(Array.isArray(t)?t:[t])}}let Of=null;class Ef{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Of)return e.adoptedStyleSheets=[Of.sheet].concat(e.adoptedStyleSheets),e[Sf]=Of;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Of=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Sf]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var Af={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Mf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Pf="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),jf="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),Tf="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Nf="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),If="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Df=Pf&&(Nf||+Pf[1]<57)||Tf&&Nf,Rf=0;Rf<10;Rf++)Af[48+Rf]=Af[96+Rf]=String(Rf);for(Rf=1;Rf<=24;Rf++)Af[Rf+111]="F"+Rf;for(Rf=65;Rf<=90;Rf++)Af[Rf]=String.fromCharCode(Rf+32),Mf[Rf]=String.fromCharCode(Rf);for(var Lf in Af)Mf.hasOwnProperty(Lf)||(Mf[Lf]=Af[Lf]);function Bf(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function zf(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Vf(e,t){if(!t.anchorNode)return!1;try{return zf(e,t.anchorNode)}catch(e){return!1}}function Ff(e){return 3==e.nodeType?ed(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function qf(e,t,n,r){return!!n&&(Wf(e,t,n,r,-1)||Wf(e,t,n,r,1))}function Hf(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Wf(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Uf(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Hf(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?Uf(e):0}}}function Uf(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const Jf={left:0,right:0,top:0,bottom:0};function Kf(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function Gf(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class Qf{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let Yf,Xf=null;function Zf(e){if(e.setActive)return e.setActive();if(Xf)return e.focus(Xf);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==Xf?{get preventScroll(){return Xf={preventScroll:!0},!0}}:void 0),!Xf){Xf=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function ed(e,t,n=t){let r=Yf||(Yf=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function td(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function nd(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class rd{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new rd(e.parentNode,Hf(e),t)}static after(e,t){return new rd(e.parentNode,Hf(e)+1,t)}}const id=[];class od{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(t=r?r.nextSibling:n.firstChild)){let e=od.get(t);e&&(e.parent||e.constructor!=i.constructor)||i.reuseDOM(t)}i.sync(e),i.dirty=0}if(t=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&t!=i.dom&&(e.written=!0),i.dom.parentNode==n)for(;t&&t!=i.dom;)t=sd(t);else n.insertBefore(i.dom,t);r=i.dom}for(t=r?r.nextSibling:n.firstChild,t&&e&&e.node==n&&(e.written=!0);t;)t=sd(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==Uf(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!od.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=id){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new ad(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function sd(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}od.prototype.breakAfter=0;class ad{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function ld(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,f=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!f&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!f&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function cd(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,ld(e,c,u,a,l,r,0,i,o)}let ud="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},hd="undefined"!=typeof document?document:{documentElement:{style:{}}};const fd=/Edge\/(\d+)/.exec(ud.userAgent),dd=/MSIE \d/.test(ud.userAgent),pd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ud.userAgent),md=!!(dd||pd||fd),gd=!md&&/gecko\/(\d+)/i.test(ud.userAgent),vd=!md&&/Chrome\/(\d+)/.exec(ud.userAgent),yd="webkitFontSmoothing"in hd.documentElement.style,wd=!md&&/Apple Computer/.test(ud.vendor),bd=wd&&(/Mobile\/\w+/.test(ud.userAgent)||ud.maxTouchPoints>2);var xd={mac:bd||/Mac/.test(ud.platform),windows:/Win/.test(ud.platform),linux:/Linux|X11/.test(ud.platform),ie:md,ie_version:dd?hd.documentMode||6:pd?+pd[1]:fd?+fd[1]:0,gecko:gd,gecko_version:gd?+(/Firefox\/(\d+)/.exec(ud.userAgent)||[0,0])[1]:0,chrome:!!vd,chrome_version:vd?+vd[1]:0,ios:bd,android:/Android\b/.test(ud.userAgent),webkit:yd,safari:wd,webkit_version:yd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=hd.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class $d extends od{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof $d&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new $d(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new rd(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Sd(this.dom,e,t)}}class kd extends od{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(nd(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof kd&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(cd(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new kd(this.mark,t,o)}domAtPos(e){return Md(this.dom,this.children,e)}coordsAt(e,t){return jd(this,e,t)}}function Sd(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?xd.chrome||xd.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=ed(e,i,o).getClientRects();if(!a.length)return Jf;let l=a[(s?s<0:n>=0)?0:a.length-1];return xd.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?Kf(l,s<0):l||null}class Cd extends od{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Cd)(e,t,n)}split(e){let t=Cd.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Cd&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Cd&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Nu.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Nu.empty}domAtPos(e){return 0==e?rd.before(this.dom):rd.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return Jf;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:Kf(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _d extends Cd{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Od(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new rd(n,Math.min(e,n.nodeValue.length)))):new rd(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?Ed(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Od(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>Sd(r,e,t))):Sd(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Od(e,t,n,r,i,o){if(n instanceof kd){for(let s of n.children){let n=zf(s.dom,r),a=n?r.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return n?Od(e,t,s,r,i,o):i(s,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function Ed(e,t,n,r){if(n instanceof kd)for(let i of n.children){let n=0,o=zf(i.dom,r);if(zf(i.dom,e))return n+(o?Ed(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class Ad extends od{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Ad&&e.side==this.side}split(){return new Ad(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return rd.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof $d){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof kd&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return Nu.empty}}function Md(e,t,n){let r=0;for(let i=0;r<t.length;r++){let o=t[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==e)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return rd.after(n)}return new rd(e,0)}function Pd(e,t,n){let r,{children:i}=e;n>0&&t instanceof kd&&i.length&&(r=i[i.length-1])instanceof kd&&r.mark.eq(t.mark)?Pd(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function jd(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let o,s=e.children[i],a=r+s.length;if((n<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(o=e.children[i+1]).length||o.getSide()>0)){let e=0;if(a==r){if(s.getSide()<=0)continue;e=n=-s.getSide()}let i=s.coordsAt(Math.max(0,t-r),n);return e&&i?Kf(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=Ff(r);return i[i.length-1]||null}function Td(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Nd(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function Id(e,t,n){let r=null;if(t)for(let i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(let i in n)t&&t[i]==n[i]||e.setAttribute(r=i,n[i]);return!!r}$d.prototype.children=Cd.prototype.children=Ad.prototype.children=id;class Dd{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Rd=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Rd||(Rd={}));class Ld extends of{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Bd(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Vd(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=Fd(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Vd(e,t,n,r,e.widget||null,!0)}static line(e){return new zd(e)}static set(e,t=!1){return cf.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Ld.none=cf.empty;class Bd extends Ld{constructor(e){let{start:t,end:n}=Fd(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Bd&&this.tagName==e.tagName&&this.class==e.class&&Nd(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Bd.prototype.point=!1;class zd extends Ld{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zd&&Nd(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}zd.prototype.mapMode=th.TrackBefore,zd.prototype.point=!0;class Vd extends Ld{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?th.TrackBefore:th.TrackAfter:th.TrackDel}get type(){return this.startSide<this.endSide?Rd.WidgetRange:this.startSide<=0?Rd.WidgetBefore:Rd.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Vd&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Fd(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function qd(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Vd.prototype.point=!0;class Hd extends od{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof Hd))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),cd(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new Hd;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Nd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Pd(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Td(t,this.attrs||{})),n&&(this.attrs=Td({class:n},this.attrs||{}))}domAtPos(e){return Md(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(nd(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Id(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&od.get(n)instanceof kd;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(t=od.get(n))||void 0===t?void 0:t.isEditable)||xd.ios&&this.children.some((e=>e instanceof $d))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof $d))return null;let n=Ff(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return jd(this,e,t)}become(e){return!1}get type(){return Rd.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof Hd)return i;if(o>t)break}r=o+i.breakAfter}return null}}class Wd extends od{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Wd&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?rd.before(this.dom):rd.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Wd(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return id}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Nu.empty}domBoundsAround(){return null}become(e){return e instanceof Wd&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ud{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Wd&&e.type==Rd.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Hd),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Jd(new Ad(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(Jd(new $d(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Vd){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof Vd)if(n.block){let{type:e}=n;e!=Rd.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Wd(n.widget||new Kd("div"),s,e))}else{let o=Cd.create(n.widget||new Kd("span"),s,n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(Jd(new Ad(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(Jd(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new Ud(e,t,n,i);return o.openEnd=cf.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Jd(e,t){for(let n of t)e=new kd(n,[e],e.length);return e}class Kd extends Dd{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const Gd=ph.define(),Qd=ph.define(),Yd=ph.define(),Xd=ph.define(),Zd=ph.define(),ep=ph.define(),tp=ph.define({combine:e=>e.some((e=>e))});class np{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new np(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const rp=Hh.define({map:(e,t)=>e.map(t)});function ip(e,t,n){let r=e.facet(Xd);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const op=ph.define({combine:e=>!e.length||e[0]});let sp=0;const ap=ph.define();class lp{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:i}=t||{};return new lp(sp++,e,n,(e=>{let t=[ap.of(e)];return i&&t.push(fp.of((t=>{let n=t.plugin(e);return n?i(n):Ld.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return lp.define((t=>new e(t)),t)}}class cp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(ip(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){ip(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){ip(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const up=ph.define(),hp=ph.define(),fp=ph.define(),dp=ph.define(),pp=ph.define(),mp=ph.define();class gp{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new gp(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new gp(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new gp(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class vp{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=rh.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new gp(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}static create(e,t,n){return new vp(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var yp=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(yp||(yp={}));const wp=yp.LTR,bp=yp.RTL;function xp(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const $p=xp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),kp=xp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Sp=Object.create(null),Cp=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Sp[t]=n,Sp[n]=-t}const _p=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Op{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?bp:wp}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const Ep=[];function Ap(e){return[new Op(0,e,0)]}let Mp="";function Pp(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=Op.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=Uu(e.text,s,c);if(Mp=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return hh.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?hh.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):hh.cursor(u+e.from,i?-1:1,l.level):hh.cursor(i?e.to:e.from,i?-1:1,n)}const jp="Ôøø";class Tp{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(nf.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=jp}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=od.get(r),o=od.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:Np(r))||Np(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=od.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function Np(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Ip{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Dp extends od{constructor(e){super(),this.view=e,this.compositionDeco=Ld.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Hd],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new gp(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Ld.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=Lp(e);if(!n)return Ld.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==o.nodeType?o.nodeValue:new Tp([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),jp)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,jp)!=u)return Ld.none;a=l-u.length}else if(c.doc.sliceString(a,l,jp)!=u)return Ld.none;let h=od.get(o);h instanceof _d?h=h.widget.topView:h&&(h.parent=null);return Ld.set(Ld.replace({widget:new Bp(o,s,h),inclusive:!0}).range(a,l))}(this.view,e.changes)),(xd.ie||xd.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new Vp;return cf.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=gp.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=xd.chrome||xd.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof Wd&&e.widget instanceof Rp&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=Ud.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:f,off:d}=n.findPos(o,1),{i:p,off:m}=n.findPos(i,-1);ld(this,p,m,f,d,l,c,u,h)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||xd.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(xd.gecko&&r.empty&&(1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new rd(e,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&qf(i.node,i.offset,a.anchorNode,a.anchorOffset)&&qf(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{xd.android&&xd.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Bf(this.root);if(r.empty){if(xd.gecko){let e=(t=i.node,n=i.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=zp(i.node,i.offset,1==e?1:-1);t&&(i=new rd(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(o.node,o.offset);else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}var t,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new rd(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new rd(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=Bf(this.root);if(!e.empty||!e.assoc||!t.modify)return;let n=Hd.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!i||!o||i.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(op)?this.root.activeElement==this.dom:Vf(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=od.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof Hd)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=Rd.WidgetBefore&&i.type!=Rd.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Rd.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==yp.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],u=e+c.length;if(u>r)break;if(e>=n){let n=c.dom.getBoundingClientRect();if(t.push(n.height),o){let t=c.dom.lastChild,r=t?Ff(t):[];if(r.length){let t=r[r.length-1],o=a?t.right-n.left:n.right-t.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?yp.RTL:yp.LTR}measureTextSize(){for(let e of this.children)if(e instanceof Hd){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=Ff(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new ad(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(Ld.replace({widget:new Rp(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Ld.set(e)}updateDeco(){let e=this.view.state.facet(fp).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let e of this.view.state.facet(pp).map((e=>e(this.view))))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=Gf(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let f=0,d=0;if("nearest"==i)t.top<e.top?(d=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+d&&(d=t.bottom-e.bottom+d+s)):t.bottom>e.bottom&&(d=t.bottom-e.bottom+s,n<0&&t.top-d<e.top&&(d=-(e.top+d-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;d=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(f=-(e.left-t.left+o),n>0&&t.right>e.right+f&&(f=t.right-e.right+f+o)):t.right>e.right&&(f=t.right-e.right+o,n<0&&t.left<e.left+f&&(f=-(e.left+f-t.left+o))):f=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,f||d)if(h)c.scrollBy(f,d);else{if(d){let e=u.scrollTop;u.scrollTop+=d,d=u.scrollTop-e}if(f){let e=u.scrollLeft;u.scrollLeft+=f,f=u.scrollLeft-e}t={left:t.left-f,top:t.top-d,right:t.right-f,bottom:t.bottom-d}}if(h)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==yp.LTR)}}class Rp extends Dd{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Lp(e){let t=e.observer.selectionRange,n=t.focusNode&&zp(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof Hd){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!od.get(t);)t=t.previousSibling;let i=t?od.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof Hd)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class Bp extends Dd{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return _d}}function zp(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=Uf(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}class Vp{constructor(){this.changes=[]}compareRange(e,t){qd(e,t,this.changes)}comparePoint(e,t){qd(e,t,this.changes)}}function Fp(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function qp(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Hp(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Wp(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Up(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Jp(e,t,n){let r,i,o,s,a,l,c,u;for(let h=e.firstChild;h;h=h.nextSibling){let e=Ff(h);for(let f=0;f<e.length;f++){let d=e[f];i&&Hp(i,d)&&(d=Wp(Up(d,i.bottom),i.top));let p=Fp(t,d),m=qp(n,d);if(0==p&&0==m)return 3==h.nodeType?Kp(h,t,n):Jp(h,t,n);(!r||s>m||s==m&&o>p)&&(r=h,i=d,o=p,s=m),0==p?n>d.bottom&&(!c||c.bottom<d.bottom)?(a=h,c=d):n<d.top&&(!u||u.top>d.top)&&(l=h,u=d):c&&Hp(c,d)?c=Up(c,d.bottom):u&&Hp(u,d)&&(u=Wp(u,d.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?Kp(r,h,n):o||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:Jp(r,h,n)}function Kp(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=ed(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(xd.chrome||xd.gecko){ed(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function Gp(e,{x:t,y:n},r,i=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,u=n-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;s=e.elementAtHeight(u),s.type!=Rd.Text;)for(;u=i>0?s.bottom+t:s.top-t,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:Qp(e,a,s,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:Qp(e,a,s,t,n);let f=e.dom.ownerDocument,d=e.root.elementFromPoint?e.root:f,p=d.elementFromPoint(t,n);p&&!e.contentDOM.contains(p)&&(p=null),p||(t=Math.max(a.left+1,Math.min(a.right-1,t)),p=d.elementFromPoint(t,n),p&&!e.contentDOM.contains(p)&&(p=null));let m,g=-1;if(p&&0!=(null===(o=e.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),xd.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return ed(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=Hd.find(e.docView,h);if(!r)return u>s.top+s.height/2?s.to:s.from;({node:m,offset:g}=Jp(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function Qp(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+$f(s,o,e.state.tabSize)}function Yp(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=Pp(i,o,s,a,n),c=Mp;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=hh.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function Xp(e,t,n){let r=e.state.facet(dp).map((t=>t(e)));for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.from>n.from?hh.cursor(r,1):hh.cursor(i,-1),e=!0)}));if(!e)return n}}class Zp{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in im){let n=im[t];e.contentDOM.addEventListener(t,(r=>{rm(e,r)&&!this.ignoreDuringComposition(r)&&("keydown"==t&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r)))})),this.registeredEvents.push(t)}xd.chrome&&xd.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,xd.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{rm(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){ip(t.state,e)}}return!1}runScrollHandlers(e,t){for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){ip(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(xd.android&&xd.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!xd.ios||!(n=em.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,td(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(xd.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!xd.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const em=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tm=[16,17,18,20,91,92,224,225];class nm{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(nf.allowMultipleSelections)&&function(e,t){let n=e.state.facet(Gd);return n.length?n[0](t):xd.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(Qd);return n.length?n[0](t):xd.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=Bf(e.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=vm(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function rm(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=od.get(r))&&n.ignoreEvent(t))return!1;return!0}const im=Object.create(null),om=xd.ie&&xd.ie_version<15||xd.ios&&xd.webkit_version<604;function sm(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=wm&&r.selection.ranges.every((e=>e.empty))&&wm==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:hh.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:hh.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}im.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():tm.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};let am=0;function lm(e,t,n,r){if(1==r)return hh.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return hh.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=Uu(i.text,o,!1):a=Uu(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=Uu(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=Uu(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return hh.range(s+i.from,a+i.from)}(e.state,t,n);{let n=Hd.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,hh.range(i,o)}}im.touchstart=(e,t)=>{am=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},im.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},im.mousedown=(e,t)=>{if(e.observer.flush(),am>Date.now()-2e3&&1==vm(t))return;let n=null;for(let r of e.state.facet(Yd))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=fm(e,t),r=vm(t),i=e.state.selection,o=n,s=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),s=null)},get(t,a,l){let c;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?c=o:(c=o=fm(e,t),s=t),!c||!n)return i;let u=lm(e,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let t=lm(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=i<u.from?hh.range(i,o):hh.range(o,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l?i.addRange(u):hh.create([u])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>Zf(e.contentDOM))),e.inputState.startMouseSelection(new nm(e,t,n,r))}};let cm=(e,t)=>e>=t.top&&e<=t.bottom,um=(e,t,n)=>cm(t,n)&&e>=n.left&&e<=n.right;function hm(e,t,n,r){let i=Hd.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&um(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&um(n,r,a)?1:s&&cm(r,s)?-1:1}function fm(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:hm(e,n,t.clientX,t.clientY)}}const dm=xd.ie&&xd.ie_version<=11;let pm=null,mm=0,gm=0;function vm(e){if(!dm)return e.detail;let t=pm,n=gm;return pm=e,gm=Date.now(),mm=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(mm+1)%3:1}function ym(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}im.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},im.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&ym(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else ym(e,t,t.dataTransfer.getData("Text"),!0)},im.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=om?null:t.clipboardData;n?(sm(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),sm(e,n.value)}),50)}(e)};let wm=null;function bm(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function xm(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}im.copy=im.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;wm=i?n:null;let o=om?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},im.focus=bm,im.blur=e=>{e.observer.clearSelectionRange(),bm(e)},im.compositionstart=im.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),xm(e,!0)))},im.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&xm(e,!1)}),50)},im.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},im.beforeinput=(e,t)=>{var n;let r;if(xd.chrome&&xd.android&&(r=em.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const $m=["pre-wrap","normal","pre-line","break-spaces"];class km{constructor(){this.doc=Nu.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $m.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i){let o=$m.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class Sm{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Cm{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Cm(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var _m=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(_m||(_m={}));const Om=.001;class Em{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Om&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Em.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],u=i.lineAt(s,_m.ByPosNoHeight,t,0,0),h=u.to>=a?u:i.lineAt(a,_m.ByPosNoHeight,t,0,0);for(c+=h.to-a,a=h.to;o>0&&u.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<u.from&&(u=i.lineAt(s,_m.ByPosNoHeight,t,0,0));l+=u.from-s,s=u.from;let f=Nm.build(n,e,l,c);i=i.replace(s,a,f)}return i.updateHeight(n,0)}static empty(){return new Mm(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new jm(Em.of(e.slice(0,t)),o,Em.of(e.slice(n)))}}Em.prototype.size=1;class Am extends Em{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Cm(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Mm extends Am{constructor(e,t){super(e,t,Rd.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Mm||r instanceof Pm&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Pm?r=new Mm(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Em.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pm extends Em{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(t,r),a=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:l,length:c}=t.line(i+a);return new Cm(l,c,n+s*a,s,Rd.Text)}lineAt(e,t,n,r,i){if(t==_m.ByHeight)return this.blockAt(e,n,r,i);if(t==_m.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new Cm(t,r-t,0,0,Rd.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(e);return new Cm(a,l,r+s*(c-o),s,Rd.Text)}forEachLine(e,t,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-s)),o(new Cm(t.from,t.length,r,a,Rd.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Pm?n[n.length-1]=new Pm(e.length+r):n.push(null,new Pm(r-1))}if(e>0){let t=n[0];t instanceof Pm?n[0]=new Pm(e+t.length):n.unshift(new Pm(e-1),null)}return Em.of(n)}decomposeLeft(e,t){t.push(new Pm(e-1),null)}decomposeRight(e,t){t.push(null,new Pm(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1,a=e.heightChanged;for(r.from>t&&n.push(new Pm(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Om&&(s=-2);let a=new Mm(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new Pm(i-o).updateHeight(e,o));let l=Em.of(n);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=Om||Math.abs(s-this.lines(e.doc,t).lineHeight)>=Om,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class jm extends Em{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==_m.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==_m.ByPosNoHeight?_m.ByPosNoHeight:_m.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,_m.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&Tm(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),Tm(i,e)}return Em.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Em.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Tm(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Pm&&(r=e[t+1])instanceof Pm&&e.splice(t-1,3,new Pm(n.length+1+r.length))}class Nm{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Mm?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Mm(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new Am(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Mm(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Pm(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Mm)return e;let t=new Mm(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=Rd.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Rd.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Mm||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Mm(0,-1));let n=e;for(let e of this.nodes)e instanceof Mm&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new Nm(n,e);return cf.spans(t,n,r,i,0),i.finish(n)}}class Im{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&qd(e,t,this.changes,5)}}function Dm(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+t),bottom:Math.max(o,s)-(n.top+t)}}function Rm(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Lm{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return Ld.replace({widget:new Bm(this.size,e)}).range(this.from,this.to)}}class Bm extends Dd{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class zm{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new km,this.scaler=Jm,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yp.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(fp).filter((e=>"function"!=typeof e)),this.heightMap=Em.empty().applyChanges(this.stateDeco,Nu.empty,this.heightOracle.setDoc(e.doc),[new gp(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ld.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Vm(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?Jm:new Km(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:Gm(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(fp).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=gp.extendWithRanges(r,function(e,t,n){let r=new Im;return cf.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:rh.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2);let s=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?yp.RTL:yp.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let h=(this.printing?Rm:Dm)(t,this.paddingTop),f=h.top-this.pixelViewport.top,d=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView)return 0;let m=t.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=e.docView.measureTextSize();o=r.refresh(i,n,s,m/s,t),o&&(e.docView.minWidth=0,a|=8)}f>0&&d>0?l=Math.max(f,d):f<0&&d<0&&(l=Math.min(f,d)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=this.heightMap.updateHeight(r,0,o,new Sm(n.from,i))}r.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new Vm(r.lineAt(o-1e3*n,_m.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),_m.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,_m.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Vm(r.lineAt(n-500,_m.ByHeight,i,0,0).from,r.lineAt(n+o+500,_m.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Vm(this.heightMap.lineAt(n,_m.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,_m.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,_m.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,_m.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Lm(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=yp.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,o=Fm(n.from,n.to,this.stateDeco);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=qm(o,(this.visibleTop-n.top-e)/n.height),i=qm(o,(this.visibleBottom-n.top+e)/n.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=qm(o,(this.pixelViewport.left-t)/e),i=qm(o,(this.pixelViewport.right+t)/e)}let s=[];r>n.from&&s.push({from:n.from,to:r}),i<n.to&&s.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&Wm(s,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&Wm(s,a.to-10,a.to+10);for(let{from:r,to:i}of s)i-r>1e3&&t.push(Um(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new Lm(r,i,this.gapSize(n,r,i,o)))}return t}gapSize(e,t,n,r){let i=Hm(r,n)-Hm(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){Lm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ld.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];cf.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Gm(this.heightMap.lineAt(e,_m.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Gm(this.heightMap.lineAt(this.scaler.fromDOM(e),_m.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Gm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Vm{constructor(e,t){this.from=e,this.to=t}}function Fm(e,t,n){let r=[],i=e,o=0;return cf.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function qm({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function Hm(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function Wm(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let o=[];i.from<t&&o.push({from:i.from,to:t}),i.to>n&&o.push({from:n,to:i.to}),e.splice(r,1,...o),r+=o.length-1}}}function Um(e,t){for(let n of e)if(t(n))return n}const Jm={toDOM:e=>e,fromDOM:e=>e,scale:1};class Km{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,_m.ByPos,e,0,0).top,s=t.lineAt(i,_m.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function Gm(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Cm(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>Gm(e,t))):e.type)}const Qm=ph.define({combine:e=>e.join(" ")}),Ym=ph.define({combine:e=>e.indexOf(!0)>-1}),Xm=_f.newName(),Zm=_f.newName(),eg=_f.newName(),tg={"&light":"."+Zm,"&dark":"."+eg};function ng(e,t,n){return new _f(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const rg=ng("."+Xm,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},tg),ig={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},og=xd.ie&&xd.ie_version<=11;class sg{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new Qf,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(xd.ie&&xd.ie_version<=11||xd.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),og&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(op)?t.root.activeElement!=this.dom:!Vf(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((xd.ie&&xd.ie_version<=11||xd.android&&xd.chrome)&&!t.state.selection.main.empty&&n.focusNode&&qf(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Bf(e),n=xd.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);qf(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ig),og&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),og&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||td(this.view.contentDOM,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Vf(this.dom,this.selectionRange);if(t<0&&!i)return;this.selectionChanged=!1;let o=this.view.state,s=this.onChange(t,n,r);return this.view.state==o&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=ag(t,e.previousSibling||e.target.previousSibling,-1),r=ag(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function ag(e,t,n){for(;t;){let r=od.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function lg(e,t,n,r){let i,o,s=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return!1;let{from:a,to:l}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new Ip(n,r)),i==n&&o==r||t.push(new Ip(i,o)));return t}(e),u=new Tp(c,e.state);u.readRange(r.startDOM,r.endDOM);let h=s.from,f=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||xd.android&&u.text.length<l-a)&&(h=s.to,f="end");let d=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(a,l,jp),u.text,h-a,f);d&&(xd.chrome&&13==e.inputState.lastKeyCode&&d.toB==d.from+2&&"ÔøøÔøø"==u.text.slice(d.from,d.toB)&&d.toB--,i={from:a+d.from,to:a+d.toA,insert:Nu.of(u.text.slice(d.from,d.toB).split(jp))}),o=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?hh.single(n+t,r+t):null}(c,a)}else if(e.hasFocus||!e.state.facet(op)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!zf(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!zf(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);i==s.head&&a==s.anchor||(o=hh.single(a,i))}if(!i&&!o)return!1;if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}:(xd.mac||xd.android)&&i&&i.from==i.to&&i.from==s.head-1&&"."==i.insert.toString()&&(i={from:s.from,to:s.to,insert:Nu.of([" "])}),i){let t=e.state;if(xd.ios&&e.inputState.flushIOSKey(e))return!0;if(xd.android&&(i.from==s.from&&i.to==s.to&&1==i.insert.length&&2==i.insert.lines&&td(e.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&0==i.insert.length&&td(e.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&0==i.insert.length&&td(e.contentDOM,"Delete",46)))return!0;let n,r=i.insert.toString();if(e.state.facet(ep).some((t=>t(e,i.from,i.to,r))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=s.from<i.from?t.sliceDoc(s.from,i.from):"",o=s.to>i.to?t.sliceDoc(i.to,s.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let r=t.changes(i),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=r.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let o=e.state.sliceDoc(i.from,i.to),l=Lp(e)||e.state.doc.lineAt(s.head),c=s.to-i.to,u=s.to-s.from;n=t.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:r,range:a||n.map(r)};let h=n.to-c,f=h-o.length;if(n.to-n.from!=u||e.state.sliceDoc(f,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let d=t.changes({from:f,to:h,insert:i.insert}),p=n.to-s.to;return{changes:d,range:a?hh.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(d)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a}),!0}if(o&&!o.main.eq(s)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n}),!0}return!1}class cg{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new zm(e.state||nf.create(e)),this.plugins=this.state.facet(ap).map((e=>new cp(e)));for(let e of this.plugins)e.update(this);this.observer=new sg(this,((e,t,n)=>lg(this,e,t,n)),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new Zp(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Dp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof Wh?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed)return void(this.viewState.state=i);if(this.observer.clear(),i.facet(nf.phrases)!=this.state.facet(nf.phrases))return this.setState(i);t=vp.create(this,i,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(o&&(o=o.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;o=new np(e.empty?e:hh.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(rp)&&(o=e.value)}this.viewState.update(t,o),this.bidiCache=fg.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(mp)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Qm)!=t.state.facet(Qm)&&(this.viewState.mustMeasureContent=!0),(n||r||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(Zd))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new zm(e),this.plugins=e.facet(ap).map((e=>new cp(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new Dp(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ap),n=e.state.facet(ap);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new cp(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let o=i.map((e=>{try{return e.read(this)}catch(e){return ip(this.state,e),hg}})),s=vp.create(this,this.state,[]),a=!1,l=!1;s.flags|=r,t?t.flags|=r:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<i.length;e++)if(o[e]!=hg)try{let t=i[e];t.write&&t.write(o[e],this)}catch(e){ip(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Zd))e(t)}get themeClasses(){return Xm+" "+(this.state.facet(Ym)?eg:Zm)+" "+this.state.facet(Qm)}updateAttrs(){let e=dg(this,up,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(op)?"true":"false",class:"cm-content",style:`${xd.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),dg(this,hp,t);let n=this.observer.ignore((()=>{let n=Id(this.contentDOM,this.contentAttrs,t),r=Id(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(cg.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(mp),_f.mount(this.root,this.styleModules.concat(rg).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Xp(this,e,Yp(this,e,t,n))}moveByGroup(e,t){return Xp(this,e,Yp(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==Xh.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==yp.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return hh.cursor(s,n?-1:1)}let s=Hd.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return hh.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return Xp(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return hh.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,f=null!=r?r:e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(f+n)*o,c=Gp(e,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return hh.cursor(c,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Gp(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return Kf(n,i[Op.find(i,e-r.from,-1,t)].dir==yp.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(tp)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ug)return Ap(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=function(e,t){let n=e.length,r=t==wp?1:2,i=t==wp?2:1;if(!e||1==r&&!_p.test(e))return Ap(n);for(let t=0,i=r,s=r;t<n;t++){let n=(o=e.charCodeAt(t))<=247?$p[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?kp[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),Ep[t]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let e=0,t=r,i=r;e<n;e++){let r=Ep[e];if(128==r)e<n-1&&t==Ep[e+1]&&24&t?r=Ep[e]=t:Ep[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==Ep[r];)r++;let o=e&&8==t||r<n&&8==Ep[r]?1==i?1:8:256;for(let t=e;t<r;t++)Ep[t]=o;e=r-1}else 8==r&&1==i&&(Ep[e]=1);t=r,7&r&&(i=r)}for(let t,o,s,a=0,l=0,c=0;a<n;a++)if(o=Sp[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(Cp[e+1]==-o){let t=Cp[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(Ep[a]=Ep[Cp[e]]=n),l=e;break}}else{if(189==Cp.length)break;Cp[l++]=a,Cp[l++]=t,Cp[l++]=c}else if(2==(s=Ep[a])||1==s){let e=s==r;c=e?0:1;for(let t=l-3;t>=0;t-=3){let n=Cp[t+2];if(2&n)break;if(e)Cp[t+2]|=2;else{if(4&n)break;Cp[t+2]|=4}}}for(let e=0;e<n;e++)if(256==Ep[e]){let t=e+1;for(;t<n&&256==Ep[t];)t++;let i=1==(e?Ep[e-1]:r),o=i==(1==(t<n?Ep[t]:r))?i?1:2:r;for(let n=e;n<t;n++)Ep[n]=o;e=t-1}let s=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=Ep[e++];for(;e<n&&r==(1!=Ep[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=Ep[--n];for(;n>t&&r==(2!=Ep[n-1]);)n--;s.push(new Op(n,e,r?2:1))}else s.push(new Op(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==Ep[e++];for(;e<n&&r==(2==Ep[e]);)e++;s.push(new Op(t,e,r?1:2))}return s}(e.text,t);return this.bidiCache.push(new fg(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||xd.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Zf(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return rp.of(new np("number"==typeof e?hh.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return lp.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=_f.newName(),r=[Qm.of(n),mp.of(ng(`.${n}`,e))];return t&&t.dark&&r.push(Ym.of(!0)),r}static baseTheme(e){return Oh.lowest(mp.of(ng("."+Xm,e,tg)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&od.get(n)||od.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}cg.styleModule=mp,cg.inputHandler=ep,cg.perLineTextDirection=tp,cg.exceptionSink=Xd,cg.updateListener=Zd,cg.editable=op,cg.mouseSelectionStyle=Yd,cg.dragMovesSelection=Qd,cg.clickAddsSelectionRange=Gd,cg.decorations=fp,cg.atomicRanges=dp,cg.scrollMargins=pp,cg.darkTheme=Ym,cg.contentAttributes=hp,cg.editorAttributes=up,cg.lineWrapping=cg.contentAttributes.of({class:"cm-lineWrapping"}),cg.announce=Hh.define();const ug=4096,hg={};class fg{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:yp.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new fg(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function dg(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&Td(o,n)}return n}const pg=xd.mac?"mac":xd.windows?"win":xd.linux?"linux":"key";function mg(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const gg=cg.domEventHandlers({keydown:(e,t)=>xg(wg(t.state),e,t,"editor")}),vg=ph.define({enables:gg}),yg=new WeakMap;function wg(e){let t=e.facet(vg),n=yg.get(t);return n||yg.set(t,n=function(e,t=pg){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=bg={view:t,prefix:n,scope:e};return setTimeout((()=>{bg==r&&(bg=null)}),4e3),!0}]})}let c=l.join(" ");i(c,!1);let u=a[c]||(a[c]={preventDefault:!1,commands:[]});u.commands.push(o),s&&(u.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])o(t,e,n.run,n.preventDefault),n.shift&&o(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let bg=null;function xg(e,t,n,r){let i=function(e){var t=!(Df&&(e.ctrlKey||e.altKey||e.metaKey)||(jf||If)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Mf:Af)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,s="",a=!1;bg&&bg.view==n&&bg.scope==r&&(s=bg.prefix+" ",(a=tm.indexOf(t.keyCode)<0)&&(bg=null));let l,c=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(a=!0)}return!1},u=e[r];if(u){if(c(u[s+mg(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(l=Af[t.keyCode])&&l!=i){if(c(u[s+mg(l,t,!0)]))return!0}else if(o&&t.shiftKey&&c(u[s+mg(i,t,!0)]))return!0}return a}const $g=!xd.ios,kg=ph.define({combine:e=>rf(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Sg(e={}){return[kg.of(e),_g,Eg]}class Cg{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const _g=lp.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(kg).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(kg)!=e.state.facet(kg);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(kg),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==yp.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=Ag(e),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=Pg(e,n),f=Pg(e,r),d=h.type==Rd.Text?h:null,p=f.type==Rd.Text?f:null;e.lineWrapping&&(d&&(d=Mg(e,n,d)),p&&(p=Mg(e,r,p)));if(d&&p&&d.from==p.from)return g(v(t.from,t.to,d));{let n=d?v(t.from,null,d):y(h,!1),r=p?v(null,t.to,p):y(f,!0),i=[];return(d||h).to<(p||f).from-1?i.push(m(c,n.bottom,u,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==Rd.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new Cg(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function v(t,n,r){let o=1e9,s=-1e9,a=[];function l(t,n,l,h,f){let d=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);o=Math.min(d.top,p.top,o),s=Math.max(d.bottom,p.bottom,s),f==yp.LTR?a.push(i&&n?c:d.left,i&&h?u:p.right):a.push(!i&&h?c:p.left,!i&&n?u:d.right)}let h=null!=t?t:r.from,f=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<f)for(let i=Math.max(r.from,h),o=Math.min(r.to,f);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,o),null==n&&a>=f,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==t,f,null==n,e.textDirection),{top:o,bottom:s,horizontal:a}}function y(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||$g:t.drawRangeCursor){let e=jg(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Og={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};$g&&(Og[".cm-line"].caretColor="transparent !important");const Eg=Oh.highest(cg.theme(Og));function Ag(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==yp.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Mg(e,t,n){let r=hh.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:Rd.Text}}function Pg(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==Rd.Text))return e;return n}function jg(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=Ag(e);return new Cg(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Tg=Hh.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Ng=xh.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Tg)?t.value:e),e))}),Ig=lp.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(Ng);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Ng)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Ng),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Ng)!=e&&this.view.dispatch({effects:Tg.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Dg(){return[Ng,Ig]}function Rg(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,a+o.index+o[0].length,o)}class Lg{constructor(e){let{regexp:t,decoration:n,boundary:r,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof n?n:()=>n,this.boundary=r,this.maxLength=i}createDeco(e){let t=new uf;for(let{from:n,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))Rg(e.state.doc,this.regexp,n,r,((n,r,i)=>t.add(n,r,this.getDeco(i,e,n))));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[];if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;){let t=c.index+n.from;u.push(this.getDeco(c,e,t).range(t,t+c[0].length))}else Rg(e.state.doc,this.regexp,a,l,((t,n,r)=>u.push(this.getDeco(r,e,t).range(t,n))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const Bg=null!=/x/.unicode?"gu":"g",zg=new RegExp("[\0-\b\n--¬ü¬≠ÿú‚Äã‚Äé‚Äè\u2028\u2029‚Ä≠‚ÄÆ\ufeffÔøπ-Ôøº]",Bg),Vg={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Fg=null;const qg=ph.define({combine(e){let t=rf(e,{render:null,specialChars:zg,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Fg&&"undefined"!=typeof document&&document.body){let t=document.body.style;Fg=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Fg||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Bg)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Bg)),t}});function Hg(e={}){return[qg.of(e),Wg||(Wg=lp.fromClass(class{constructor(e){this.view=e,this.decorations=Ld.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(qg)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Lg({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=Yu(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=xf(e.text,t,r-e.from);return Ld.replace({widget:new Jg((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Ld.replace({widget:new Ug(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(qg);e.startState.facet(qg)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Wg=null;class Ug extends Dd{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"‚Ä¢":10==e?"‚ê§":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Vg[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class Jg extends Dd{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function Kg(){return Qg}const Gg=Ld.line({class:"cm-activeLine"}),Qg=lp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){if(!r.empty)return Ld.none;let i=e.lineBlockAt(r.head);i.from>t&&(n.push(Gg.range(i.from)),t=i.from)}return Ld.set(n)}},{decorations:e=>e.decorations}),Yg=2e3;function Xg(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>Yg?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):xf(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function Zg(e,t){let n=Xg(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=Xg(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>Yg||n.off>Yg||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(hh.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=$f(n.text,s,e.tabSize,!0);if(r>-1){let t=$f(n.text,a,e.tabSize);o.push(hh.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?hh.create(a.concat(r.ranges)):hh.create(a):r}}:null}function ev(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return cg.mouseSelectionStyle.of(((e,n)=>t(n)?Zg(e,n):null))}const tv={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},nv={style:"cursor: crosshair"};function rv(e={}){let[t,n]=tv[e.key||"Alt"],r=lp.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)}}});return[r,cg.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?nv:null}))]}const iv="-10000px";class ov{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){let t=e.state.facet(this.facet),n=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let t=0;t<n.length;t++){let i=n[t],o=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(o=e)}if(o<0)r[t]=this.createTooltipView(i);else{let n=r[t]=this.tooltipViews[o];n.update&&n.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=n,this.tooltipViews=r,!0}}function sv(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const av=ph.define({combine:e=>{var t,n,r;return{position:xd.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||sv}}}),lv=lp.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(av);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new ov(e,hv,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(av);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=iv,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(av).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=e.pos[i],c=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1){a.style.top=iv;continue}let u=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,f=c.right-c.left,d=c.bottom-c.top,p=s.offset||uv,m=this.view.textDirection==yp.LTR,g=c.width>n.right-n.left?m?n.left:n.right-c.width:m?Math.min(l.left-(u?14:0)+p.x,n.right-f):Math.max(n.left,l.left-f+(u?14:0)-p.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-p.y<n.top:l.bottom+(c.bottom-c.top)+p.y>n.bottom)&&v==n.bottom-l.bottom>l.top-n.top&&(v=!v);let y=v?l.top-d-h-p.y:l.bottom+h+p.y,w=g+f;if(!0!==s.overlap)for(let e of r)e.left<w&&e.right>g&&e.top<y+d&&e.bottom>y&&(y=v?e.top-d-2-h:e.bottom+h+2);"absolute"==this.position?(a.style.top=y-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=y+"px",a.style.left=g+"px"),u&&(u.style.left=l.left+(m?p.x:-p.x)-(g+14-7)+"px"),!0!==s.overlap&&r.push({left:g,top:y,right:w,bottom:y+d}),a.classList.toggle("cm-tooltip-above",v),a.classList.toggle("cm-tooltip-below",!v),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=iv}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),cv=cg.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),uv={x:0,y:0},hv=ph.define({enables:[lv,cv]}),fv=ph.define();class dv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ov(e,fv,(e=>this.createHostedView(e)))}static create(e){return new dv(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const pv=hv.compute([fv],(e=>{let t=e.facet(fv).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:dv.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class mv{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),i=r&&r.dir==yp.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-i:i);if(null==o?void 0:o.then){let e=this.pending={pos:t};o.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>ip(this.view.state,e,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let e=0;e<c.length;e++){let t=c[e];if(Math.max(t.top-i,i-t.bottom,t.left-r,r-t.right)<=o)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function gv(e,t={}){let n=Hh.define(),r=xh.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,th.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(vv)&&(e=null);return e},provide:e=>fv.from(e)});return[r,lp.define((i=>new mv(i,e,r,n,t.hoverTime||300))),pv]}const vv=Hh.define(),yv=ph.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function wv(e,t){let n=e.plugin(bv),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const bv=lp.fromClass(class{constructor(e){this.input=e.state.facet(kv),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(yv);this.top=new xv(e,!0,t.topContainer),this.bottom=new xv(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(yv);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new xv(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new xv(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(kv);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>cg.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class xv{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=$v(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=$v(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function $v(e){let t=e.nextSibling;return e.remove(),t}const kv=ph.define({enables:bv});class Sv extends of{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Sv.prototype.elementClass="",Sv.prototype.toDOM=void 0,Sv.prototype.mapMode=th.TrackBefore,Sv.prototype.startSide=Sv.prototype.endSide=-1,Sv.prototype.point=!0;const Cv=ph.define(),_v={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>cf.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ov=ph.define();function Ev(e){return[Mv(),Ov.of(Object.assign(Object.assign({},_v),e))]}const Av=ph.define({combine:e=>e.some((e=>e))});function Mv(e){let t=[Pv];return e&&!1===e.fixed&&t.push(Av.of(!0)),t}const Pv=lp.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Ov).map((t=>new Iv(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(Av),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Av)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=cf.iter(this.view.state.facet(Cv),this.view.viewport.from),r=[],i=this.gutters.map((e=>new Nv(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let n of e.type)if(n.type==Rd.Text){t=n;break}}else t=e.type==Rd.Text?e:void 0;if(t){r.length&&(r=[]),Tv(n,r,e.from);for(let e of i)e.line(this.view,t,r)}}for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Ov),n=e.state.facet(Ov),r=e.docChanged||e.heightChanged||e.viewportChanged||!cf.eq(e.startState.facet(Cv),e.state.facet(Cv),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new Iv(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>cg.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==yp.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function jv(e){return Array.isArray(e)?e:[e]}function Tv(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class Nv{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=cf.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),Tv(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let n=new Dv(e,t.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Iv{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,i,r)&&r.preventDefault()}));this.markers=jv(t.markers(e)),t.initialSpacer&&(this.spacer=new Dv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=jv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!cf.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Dv{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const Rv=ph.define(),Lv=ph.define({combine:e=>rf(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})});class Bv extends Sv{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function zv(e,t){return e.state.facet(Lv).formatNumber(t,e.state)}const Vv=Ov.compute([Lv],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Rv),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new Bv(zv(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(Lv)!=e.state.facet(Lv),initialSpacer:e=>new Bv(zv(e,qv(e.state.doc.lines))),updateSpacer(e,t){let n=zv(t.view,qv(t.view.state.doc.lines));return n==e.number?e:new Bv(n)},domEventHandlers:e.facet(Lv).domEventHandlers})));function Fv(e={}){return[Lv.of(e),Mv(),Vv]}function qv(e){let t=9;for(;t<e;)t=10*t+9;return t}const Hv=new class extends Sv{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Wv=Cv.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges)if(r.empty){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(Hv.range(i)))}return cf.of(t)}));function Uv(){return Wv}const Jv=1024;let Kv=0;class Gv{constructor(e,t){this.from=e,this.to=t}}class Qv{constructor(e={}){this.id=Kv++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Xv.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}Qv.closedBy=new Qv({deserialize:e=>e.split(" ")}),Qv.openedBy=new Qv({deserialize:e=>e.split(" ")}),Qv.group=new Qv({deserialize:e=>e.split(" ")}),Qv.contextHash=new Qv({perNode:!0}),Qv.lookAhead=new Qv({perNode:!0}),Qv.mounted=new Qv({perNode:!0});const Yv=Object.create(null);class Xv{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Yv,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Xv(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Qv.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(Qv.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}Xv.none=new Xv("",Object.create(null),0,8);class Zv{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new Xv(n.name,r,n.id,n.flags):n)}return new Zv(t)}}const ey=new WeakMap,ty=new WeakMap;var ny;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(ny||(ny={}));class ry{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(Qv.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new py(this.topNode,e)}cursorAt(e,t=0,n=0){let r=ey.get(this)||this.topNode,i=new py(r);return i.moveTo(e,t),ey.set(this,i._tree),i}get topNode(){return new cy(this,0,0,null)}resolve(e,t=0){let n=ly(ey.get(this)||this.topNode,e,t,!1);return ey.set(this,n),n}resolveInner(e,t=0){let n=ly(ty.get(this)||this.topNode,e,t,!0);return ty.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let o=this.cursor((e.mode||0)|ny.IncludeAnonymous);;){let e=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:yy(Xv.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new ry(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new ry(Xv.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=Jv,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new iy(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,v,y){let{id:w,start:b,end:x,size:$}=a,k=u;for(;$<0;){if(a.next(),-1==$){let t=o[w];return n.push(t),void v.push(b-e)}if(-3==$)return void(c=w);if(-4==$)return void(u=w);throw new RangeError(`Unrecognized record size: ${$}`)}let S,C,_=l[w],O=b-e;if(x-b<=i&&(C=m(a.pos-t,y))){let t=new Uint16Array(C.size-C.skip),n=a.pos-C.size,i=t.length;for(;a.pos>n;)i=g(C.start,t,i);S=new oy(t,x-C.start,r),O=C.start-e}else{let e=a.pos-$;a.next();let t=[],n=[],r=w>=s?w:-1,o=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(d(t,n,b,o,a.end,l,r,k),o=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&d(t,n,b,o,b,l,r,k),t.reverse(),n.reverse(),r>-1&&o>0){let e=f(_);S=yy(_,t,n,0,t.length,0,x-b,e,e)}else S=p(_,t,n,x-b,k-x)}n.push(S),v.push(O)}function f(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof ry){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(Qv.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}function d(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r,i=0,o){if(c){let e=[Qv.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[Qv.lookAhead,i];o=o?[e].concat(o):[e]}return new ry(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,f=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=f,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let v=[],y=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,v,y,-1);let w=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new ry(l[e.topID],v.reverse(),y.reverse(),w)}(e)}}ry.empty=new ry(Xv.none,[],[],0);class iy{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new iy(this.buffer,this.index)}}class oy{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Xv.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(sy(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n,r){let i=this.buffer,o=new Uint16Array(t-e);for(let r=e,s=0;r<t;)o[s++]=i[r++],o[s++]=i[r++]-n,o[s++]=i[r++]-n,o[s++]=i[r++]-e;return new oy(o,r-n,this.set)}}function sy(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function ay(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function ly(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof cy&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:ny.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof cy&&r.index<0&&(null===(i=s.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class cy{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(sy(r,n,c,c+l.length))if(l instanceof oy){if(i&ny.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new dy(new fy(o,l,e,c),null,s)}else if(i&ny.IncludeAnonymous||!l.type.isAnonymous||my(l)){let s;if(!(i&ny.IgnoreMounts)&&l.props&&(s=l.prop(Qv.mounted))&&!s.overlay)return new cy(s.tree,c,e,o);let a=new cy(l,c,e,o);return i&ny.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&ny.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&ny.IgnoreOverlays)&&(r=this._tree.prop(Qv.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new cy(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new py(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ly(this,e,t,!1)}resolveInner(e,t=0){return ly(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ay(this,e)}getChild(e,t=null,n=null){let r=uy(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return uy(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return hy(this,e)}}function uy(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function hy(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class fy{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class dy{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new dy(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&ny.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new dy(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new dy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new dy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new py(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1],s=n.buffer[this.index+2];e.push(n.slice(r,i,o,s)),t.push(0)}return new ry(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ly(this,e,t,!1)}resolveInner(e,t=0){return ly(this,e,t,!0)}enterUnfinishedNodesBefore(e){return ay(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=uy(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return uy(this,e,t,n)}get node(){return this}matchContext(e){return hy(this,e)}}class py{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof cy)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof cy?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&ny.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ny.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ny.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&ny.IncludeAnonymous||e instanceof oy||!e.type.isAnonymous||my(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new dy(this.buffer,t,this.stack[e]);return this.bufferNode=new dy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return hy(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return hy(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function my(e){return e.children.some((e=>e instanceof oy||!e.type.isAnonymous||my(e)))}const gy=new WeakMap;function vy(e,t){if(!e.isAnonymous||t instanceof oy||t.type!=e)return 1;let n=gy.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof ry)){n=1;break}n+=vy(e,r)}gy.set(t,n)}return n}function yy(e,t,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=vy(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],f=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,d=r[c],p=vy(e,n[c]);for(c++;c<s;c++){let t=vy(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-d;h.push(yy(e,n,r,i,c,d,t,null,l))}f.push(d+a-o)}}(t,n,r,i,0),(a||l)(h,f,s)}class wy{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new wy(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new wy(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class by{startParse(e,t,n){return"string"==typeof e&&(e=new xy(e)),n=n?n.length?n.map((e=>new Gv(e.from,e.to))):[new Gv(0,0)]:[new Gv(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class xy{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Qv({perNode:!0});let $y=0;class ky{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=$y++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new ky([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Cy;return t=>t.modified.indexOf(e)>-1?t:Cy.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Sy=0;class Cy{constructor(){this.instances=[],this.id=Sy++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new ky(r,e,t);for(let e of t)e.instances.push(i);let o=_y(t);for(let t of e.set)for(let e of o)r.push(Cy.get(t,e));return i}}function _y(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of _y(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function Oy(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Ay(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return Ey.add(t)}const Ey=new Qv;class Ay{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function My(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function Py(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function jy(e,t,n,r=0,i=e.length){let o=new Ty(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}class Ty{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=o.prop(Ey),u=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let e=Py(i,c.tags);e&&(l&&(l+=" "),l+=e,1==c.mode?r+=(r?" ":"")+e:0==c.mode&&(u=!0));break}c=c.next}if(this.startSpan(e.from,l),u)return;let h=e.tree&&e.tree.prop(Qv.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let f=0,d=s;;f++){let p=f<h.overlay.length?h.overlay[f]:null,m=p?p.from+s:a,g=Math.max(t,d),v=Math.min(n,m);if(g<v&&u)for(;e.from<v&&(this.highlightRange(e,g,v,r,i),this.startSpan(Math.min(n,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;d=p.to+s,d>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,d),r,c),this.startSpan(d,l))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const Ny=ky.define,Iy=Ny(),Dy=Ny(),Ry=Ny(Dy),Ly=Ny(Dy),By=Ny(),zy=Ny(By),Vy=Ny(By),Fy=Ny(),qy=Ny(Fy),Hy=Ny(),Wy=Ny(),Uy=Ny(),Jy=Ny(Uy),Ky=Ny(),Gy={comment:Iy,lineComment:Ny(Iy),blockComment:Ny(Iy),docComment:Ny(Iy),name:Dy,variableName:Ny(Dy),typeName:Ry,tagName:Ny(Ry),propertyName:Ly,attributeName:Ny(Ly),className:Ny(Dy),labelName:Ny(Dy),namespace:Ny(Dy),macroName:Ny(Dy),literal:By,string:zy,docString:Ny(zy),character:Ny(zy),attributeValue:Ny(zy),number:Vy,integer:Ny(Vy),float:Ny(Vy),bool:Ny(By),regexp:Ny(By),escape:Ny(By),color:Ny(By),url:Ny(By),keyword:Hy,self:Ny(Hy),null:Ny(Hy),atom:Ny(Hy),unit:Ny(Hy),modifier:Ny(Hy),operatorKeyword:Ny(Hy),controlKeyword:Ny(Hy),definitionKeyword:Ny(Hy),moduleKeyword:Ny(Hy),operator:Wy,derefOperator:Ny(Wy),arithmeticOperator:Ny(Wy),logicOperator:Ny(Wy),bitwiseOperator:Ny(Wy),compareOperator:Ny(Wy),updateOperator:Ny(Wy),definitionOperator:Ny(Wy),typeOperator:Ny(Wy),controlOperator:Ny(Wy),punctuation:Uy,separator:Ny(Uy),bracket:Jy,angleBracket:Ny(Jy),squareBracket:Ny(Jy),paren:Ny(Jy),brace:Ny(Jy),content:Fy,heading:qy,heading1:Ny(qy),heading2:Ny(qy),heading3:Ny(qy),heading4:Ny(qy),heading5:Ny(qy),heading6:Ny(qy),contentSeparator:Ny(Fy),list:Ny(Fy),quote:Ny(Fy),emphasis:Ny(Fy),strong:Ny(Fy),link:Ny(Fy),monospace:Ny(Fy),strikethrough:Ny(Fy),inserted:Ny(),deleted:Ny(),changed:Ny(),invalid:Ny(),meta:Ky,documentMeta:Ny(Ky),annotation:Ny(Ky),processingInstruction:Ny(Ky),definition:ky.defineModifier(),constant:ky.defineModifier(),function:ky.defineModifier(),standard:ky.defineModifier(),local:ky.defineModifier(),special:ky.defineModifier()};var Qy;My([{tag:Gy.link,class:"tok-link"},{tag:Gy.heading,class:"tok-heading"},{tag:Gy.emphasis,class:"tok-emphasis"},{tag:Gy.strong,class:"tok-strong"},{tag:Gy.keyword,class:"tok-keyword"},{tag:Gy.atom,class:"tok-atom"},{tag:Gy.bool,class:"tok-bool"},{tag:Gy.url,class:"tok-url"},{tag:Gy.labelName,class:"tok-labelName"},{tag:Gy.inserted,class:"tok-inserted"},{tag:Gy.deleted,class:"tok-deleted"},{tag:Gy.literal,class:"tok-literal"},{tag:Gy.string,class:"tok-string"},{tag:Gy.number,class:"tok-number"},{tag:[Gy.regexp,Gy.escape,Gy.special(Gy.string)],class:"tok-string2"},{tag:Gy.variableName,class:"tok-variableName"},{tag:Gy.local(Gy.variableName),class:"tok-variableName tok-local"},{tag:Gy.definition(Gy.variableName),class:"tok-variableName tok-definition"},{tag:Gy.special(Gy.variableName),class:"tok-variableName2"},{tag:Gy.definition(Gy.propertyName),class:"tok-propertyName tok-definition"},{tag:Gy.typeName,class:"tok-typeName"},{tag:Gy.namespace,class:"tok-namespace"},{tag:Gy.className,class:"tok-className"},{tag:Gy.macroName,class:"tok-macroName"},{tag:Gy.propertyName,class:"tok-propertyName"},{tag:Gy.operator,class:"tok-operator"},{tag:Gy.comment,class:"tok-comment"},{tag:Gy.meta,class:"tok-meta"},{tag:Gy.invalid,class:"tok-invalid"},{tag:Gy.punctuation,class:"tok-punctuation"}]);const Yy=new Qv;class Xy{constructor(e,t,n=[]){this.data=e,nf.prototype.hasOwnProperty("tree")||Object.defineProperty(nf.prototype,"tree",{get(){return tw(this)}}),this.parser=t,this.extension=[uw.of(this),nf.languageData.of(((e,t,n)=>e.facet(Zy(e,t,n))))].concat(n)}isActiveAt(e,t,n=-1){return Zy(e,t,n)==this.data}findRegions(e){let t=e.facet(uw);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Yy)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(Qv.mounted);if(i){if(i.tree.prop(Yy)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof ry&&r(i,e.positions[n]+t)}};return r(tw(e),0),n}get allowsNesting(){return!0}}function Zy(e,t,n){let r=e.facet(uw);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=tw(e).topNode;r;r=r.enter(t,n,ny.ExcludeBuffers))i=r.type.prop(Yy)||i;return i}Xy.setState=Hh.define();class ew extends Xy{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=(n=e.languageData,ph.define({combine:n?e=>e.concat(n):void 0}));var n;return new ew(t,e.parser.configure({props:[Yy.add((e=>e.isTop?t:void 0))]}))}configure(e){return new ew(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function tw(e){let t=e.field(Xy.state,!1);return t?t.tree:ry.empty}class nw{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let rw=null;class iw{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new iw(e,t,[],ry.empty,0,n,[],null)}startParse(){return this.parser.startParse(new nw(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ry.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(wy.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(wy.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=rw;rw=this;try{return e()}finally{rw=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ow(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=wy.applyChanges(n,t),r=ry.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new iw(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=ow(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends by{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=rw;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new ry(Xv.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return rw}}function ow(e,t,n){return wy.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class sw{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new sw(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=iw.create(e.facet(uw).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new sw(n)}}Xy.state=xh.define({create:sw.init,update(e,t){for(let e of t.effects)if(e.is(Xy.setState))return e.value;return t.startState.facet(uw)!=t.state.facet(uw)?sw.init(t.state):e.apply(t)}});let aw=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(aw=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const lw="undefined"!=typeof navigator&&(null===(Qy=navigator.scheduling)||void 0===Qy?void 0:Qy.isInputPending)?()=>navigator.scheduling.isInputPending():null,cw=lp.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Xy.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Xy.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=aw(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Xy.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!lw?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>lw&&lw()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Xy.setState.of(new sw(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>ip(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),uw=ph.define({combine:e=>e.length?e[0]:null,enables:[Xy.state,cw]});class hw{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const fw=ph.define(),dw=ph.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function pw(e){let t=e.facet(dw);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function mw(e,t){let n="",r=e.tabSize;if(9==e.facet(dw).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function gw(e,t){e instanceof nf&&(e=new vw(e));for(let n of e.state.facet(fw)){let r=n(e,t);if(null!=r)return r}let n=tw(e.state);return n?function(e,t,n){return bw(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class vw{constructor(e,t={}){this.state=e,this.options=t,this.unit=pw(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return xf(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const yw=new Qv;function ww(e){let t=e.type.prop(yw);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(Qv.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>function(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?xw:null}function bw(e,t,n){for(;e;e=e.parent){let r=ww(e);if(r)return r($w.create(n,t,e))}return null}function xw(){return 0}class $w extends vw{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new $w(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(kw(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?bw(e,this.pos,this.base):0}}function kw(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function Sw({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}function Cw(){return nf.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=gw(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=mw(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const _w=ph.define(),Ow=new Qv;function Ew(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function Aw(e,t,n){for(let r of e.facet(_w)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=tw(e);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let s=o.type.prop(Ow);if(s&&(o.to<r.length-50||r.length==e.doc.length||!Ew(o))){let r=s(o,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function Mw(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const Pw=Hh.define({map:Mw}),jw=Hh.define({map:Mw});function Tw(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const Nw=xh.define({create:()=>Ld.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(Pw)&&!Dw(e,n.value.from,n.value.to)?e=e.update({add:[qw.range(n.value.from,n.value.to)]}):n.is(jw)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>cg.decorations.from(e)});function Iw(e,t,n){var r;let i=null;return null===(r=e.field(Nw,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function Dw(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function Rw(e,t){return e.field(Nw,!1)?t:t.concat(Hh.appendConfig.of(Fw()))}function Lw(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return cg.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const Bw=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Tw(e)){let n=Aw(e.state,t.from,t.to);if(n)return e.dispatch({effects:Rw(e.state,[Pw.of(n),Lw(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Nw,!1))return!1;let t=[];for(let n of Tw(e)){let r=Iw(e.state,n.from,n.to);r&&t.push(jw.of(r),Lw(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=Aw(t,i.from,i.to);o&&n.push(Pw.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Rw(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Nw,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(jw.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],zw={placeholderDOM:null,placeholderText:"‚Ä¶"},Vw=ph.define({combine:e=>rf(e,zw)});function Fw(e){let t=[Nw,Jw];return e&&t.push(Vw.of(e)),t}const qw=Ld.replace({widget:new class extends Dd{toDOM(e){let{state:t}=e,n=t.facet(Vw),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=Iw(e.state,n.from,n.to);r&&e.dispatch({effects:jw.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),Hw={openText:"‚åÑ",closedText:"‚Ä∫",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Ww extends Sv{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Uw(e={}){let t=Object.assign(Object.assign({},Hw),e),n=new Ww(t,!0),r=new Ww(t,!1),i=lp.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(uw)!=e.state.facet(uw)||e.startState.field(Nw,!1)!=e.state.field(Nw,!1)||tw(e.startState)!=tw(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new uf;for(let i of e.viewportLineBlocks){let o=Iw(e.state,i.from,i.to)?r:Aw(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,Ev({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||cf.empty},initialSpacer:()=>new Ww(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=Iw(e.state,t.from,t.to);if(r)return e.dispatch({effects:jw.of(r)}),!0;let i=Aw(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:Pw.of(i)}),!0)}})}),Fw()]}const Jw=cg.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Kw{constructor(e,t){let n;function r(e){let t=_f.newName();return(n||(n=Object.create(null)))["."+t]=e,t}const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Xy?e=>e.prop(Yy)==o.data:o?e=>e==o:void 0,this.style=My(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new _f(n):null,this.themeType=t.themeType}static define(e,t){return new Kw(e,t||{})}}const Gw=ph.define(),Qw=ph.define({combine:e=>e.length?[e[0]]:null});function Yw(e){let t=e.facet(Gw);return t.length?t:e.facet(Qw)}function Xw(e,t){let n,r=[eb];return e instanceof Kw&&(e.module&&r.push(cg.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(Qw.of(e)):n?r.push(Gw.computeN([cg.darkTheme],(t=>t.facet(cg.darkTheme)==("dark"==n)?[e]:[]))):r.push(Gw.of(e)),r}class Zw{constructor(e){this.markCache=Object.create(null),this.tree=tw(e.state),this.decorations=this.buildDeco(e,Yw(e.state))}update(e){let t=tw(e.state),n=Yw(e.state),r=n!=Yw(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return Ld.none;let n=new uf;for(let{from:r,to:i}of e.visibleRanges)jy(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=Ld.mark({class:r})))}),r,i);return n.finish()}}const eb=Oh.high(lp.fromClass(Zw,{decorations:e=>e.decorations})),tb=Kw.define([{tag:Gy.meta,color:"#7a757a"},{tag:Gy.link,textDecoration:"underline"},{tag:Gy.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Gy.emphasis,fontStyle:"italic"},{tag:Gy.strong,fontWeight:"bold"},{tag:Gy.strikethrough,textDecoration:"line-through"},{tag:Gy.keyword,color:"#708"},{tag:[Gy.atom,Gy.bool,Gy.url,Gy.contentSeparator,Gy.labelName],color:"#219"},{tag:[Gy.literal,Gy.inserted],color:"#164"},{tag:[Gy.string,Gy.deleted],color:"#a11"},{tag:[Gy.regexp,Gy.escape,Gy.special(Gy.string)],color:"#e40"},{tag:Gy.definition(Gy.variableName),color:"#00f"},{tag:Gy.local(Gy.variableName),color:"#30a"},{tag:[Gy.typeName,Gy.namespace],color:"#085"},{tag:Gy.className,color:"#167"},{tag:[Gy.special(Gy.variableName),Gy.macroName],color:"#256"},{tag:Gy.definition(Gy.propertyName),color:"#00c"},{tag:Gy.comment,color:"#940"},{tag:Gy.invalid,color:"#f00"}]),nb=cg.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),rb="()[]{}",ib=ph.define({combine:e=>rf(e,{afterCursor:!0,brackets:rb,maxScanDistance:1e4,renderMatch:ab})}),ob=Ld.mark({class:"cm-matchingBracket"}),sb=Ld.mark({class:"cm-nonmatchingBracket"});function ab(e){let t=[],n=e.matched?ob:sb;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const lb=xh.define({create:()=>Ld.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(ib);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=fb(t.state,e.head,-1,r)||e.head>0&&fb(t.state,e.head-1,1,r)||r.afterCursor&&(fb(t.state,e.head,1,r)||e.head<t.state.doc.length&&fb(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return Ld.set(n,!0)},provide:e=>cg.decorations.from(e)}),cb=[lb,nb];function ub(e={}){return[ib.of(e),cb]}function hb(e,t,n){let r=e.prop(t<0?Qv.openedBy:Qv.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function fb(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||rb,s=tw(e),a=s.resolveInner(t,n);for(let r=a;r;r=r.parent){let i=hb(r.type,n,o);if(i&&r.from<r.to)return db(e,t,n,r,i,o)}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolve(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function db(e,t,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if(hb(c.type,n,o))l++;else if(hb(c.type,-n,o)&&(l--,0==l))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const pb=Object.create(null),mb=[Xv.none],gb=[],vb=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])vb[e]=wb(pb,t);function yb(e,t){gb.indexOf(e)>-1||(gb.push(e),console.warn(t))}function wb(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||Gy[r];t?"function"==typeof t?n?n=t(n):yb(r,`Modifier ${r} used at start of tag`):n?yb(r,`Tag ${r} used as modifier`):n=t:yb(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=Xv.define({id:mb.length,name:r,props:[Oy({[r]:n})]});return mb.push(i),i.id}function bb(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const xb=bb(_b,0),$b=bb(Cb,0),kb=bb(((e,t)=>Cb(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from,to:i.to})}return t}(t))),0);function Sb(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function Cb(e,t,n=t.selection.ranges){let r=n.map((e=>Sb(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let f=/^\s*/.exec(o)[0].length,d=/\s*$/.exec(s)[0].length,p=s.length-d-n.length;return o.slice(f,f+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+f+t.length,margin:/\s/.test(o.charAt(f+t.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function _b(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9;for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>i&&(e==o||o>a.from)){i=a.from;let e=Sb(t,n).line;if(!e)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+e.length)==e?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:c,token:e,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)!s&&o||e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const Ob=Vh.define(),Eb=Vh.define(),Ab=ph.define(),Mb=ph.define({combine:e=>rf(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const Pb=xh.define({create:()=>Qb.empty,update(e,t){let n=t.state.facet(Mb),r=t.annotation(Ob);if(r){let i=t.docChanged?hh.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=Vb.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?Fb(a,a.length,n.minDepth,o):Wb(a,t.startState.selection),new Qb(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(Eb);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(Wh.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=Vb.fromTransaction(t),s=t.annotation(Wh.time),a=t.annotation(Wh.userEvent);return o?e=e.addChanges(o,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new Qb(e.done.map(Vb.fromJSON),e.undone.map(Vb.fromJSON))});function jb(e={}){return[Pb,Mb.of(e),cg.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Nb:"historyRedo"==e.inputType?Ib:null;return!!n&&(e.preventDefault(),n(t))}})]}function Tb(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(Pb,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const Nb=Tb(0,!1),Ib=Tb(1,!1),Db=Tb(0,!0),Rb=Tb(1,!0);function Lb(e){return function(t){let n=t.field(Pb,!1);if(!n)return 0;let r=0==e?n.done:n.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const Bb=Lb(0),zb=Lb(1);class Vb{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new Vb(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Vb(e.changes&&rh.fromJSON(e.changes),[],e.mapped&&nh.fromJSON(e.mapped),e.startSelection&&hh.fromJSON(e.startSelection),e.selectionsAfter.map(hh.fromJSON))}static fromTransaction(e,t){let n=Hb;for(let t of e.startState.facet(Ab)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new Vb(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Hb)}static selection(e){return new Vb(void 0,Hb,void 0,void 0,e)}}function Fb(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function qb(e,t){return e.length?t.length?e.concat(t):e:t}const Hb=[];function Wb(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Fb(e,e.length-1,1e9,n.setSelAfter(r)))}return[Vb.selection([t])]}function Ub(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function Jb(e,t){if(!e.length)return e;let n=e.length,r=Hb;for(;n;){let i=Kb(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[Vb.selection(r)]:Hb}function Kb(e,t,n){let r=qb(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Hb,n);if(!e.changes)return Vb.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new Vb(i,Hh.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const Gb=/^(input\.type|delete)($|\.)/;class Qb{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new Qb(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||Gb.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];o>=t&&i<=s&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==n)?Fb(o,o.length-1,i,new Vb(e.changes.compose(s.changes),qb(e.effects,s.effects),s.mapped,s.startSelection,Hb)):Fb(o,o.length,i,e),new Qb(o,Hb,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:Hb;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=i[i.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new Qb(Wb(this.done,e),this.undone,t,n);var o,s}addMapping(e){return new Qb(Jb(this.done,e),Jb(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Ob.of({side:e,rest:Ub(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?Hb:r.slice(0,r.length-1);return i.mapped&&(n=Jb(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Ob.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}Qb.empty=new Qb(Hb,Hb);const Yb=[{key:"Mod-z",run:Nb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ib,preventDefault:!0},{key:"Mod-u",run:Db,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Rb,preventDefault:!0}];function Xb(e,t){return hh.create(e.ranges.map(t),e.mainIndex)}function Zb(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function ex({state:e,dispatch:t},n){let r=Xb(e.selection,n);return!r.eq(e.selection)&&(t(Zb(e,r)),!0)}function tx(e,t){return hh.cursor(t?e.to:e.from)}function nx(e,t){return ex(e,(n=>n.empty?e.moveByChar(n,t):tx(n,t)))}function rx(e){return e.textDirectionAt(e.state.selection.main.head)==yp.LTR}const ix=e=>nx(e,!rx(e)),ox=e=>nx(e,rx(e));function sx(e,t){return ex(e,(n=>n.empty?e.moveByGroup(n,t):tx(n,t)))}function ax(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function lx(e,t,n){let r,i,o=tw(e).resolveInner(t.head),s=n?Qv.closedBy:Qv.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;ax(e,t,s)?o=t:r=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?fb(e,o.from,1):fb(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,hh.cursor(i,n?-1:1)}function cx(e,t){return ex(e,(n=>{if(!n.empty)return tx(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const ux=e=>cx(e,!1),hx=e=>cx(e,!0);function fx(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function dx(e,t){let{state:n}=e,r=Xb(n.selection,(n=>n.empty?e.moveVertically(n,t,fx(e)):tx(n,t)));if(r.eq(n.selection))return!1;let i,o=e.coordsAtPos(n.selection.main.head),s=e.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(i=cg.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-s.top})),e.dispatch(Zb(n,r),{effects:i}),!0}const px=e=>dx(e,!1),mx=e=>dx(e,!0);function gx(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=hh.cursor(r.from+n))}return i}const vx=e=>ex(e,(t=>gx(e,t,!0))),yx=e=>ex(e,(t=>gx(e,t,!1)));function wx(e,t){let n=Xb(e.state.selection,(e=>{let n=t(e);return hh.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(Zb(e.state,n)),!0)}function bx(e,t){return wx(e,(n=>e.moveByChar(n,t)))}const xx=e=>bx(e,!rx(e)),$x=e=>bx(e,rx(e));function kx(e,t){return wx(e,(n=>e.moveByGroup(n,t)))}function Sx(e,t){return wx(e,(n=>e.moveVertically(n,t)))}const Cx=e=>Sx(e,!1),_x=e=>Sx(e,!0);function Ox(e,t){return wx(e,(n=>e.moveVertically(n,t,fx(e))))}const Ex=e=>Ox(e,!1),Ax=e=>Ox(e,!0),Mx=e=>wx(e,(t=>gx(e,t,!0))),Px=e=>wx(e,(t=>gx(e,t,!1))),jx=({state:e,dispatch:t})=>(t(Zb(e,{anchor:0})),!0),Tx=({state:e,dispatch:t})=>(t(Zb(e,{anchor:e.doc.length})),!0),Nx=({state:e,dispatch:t})=>(t(Zb(e,{anchor:e.selection.main.anchor,head:0})),!0),Ix=({state:e,dispatch:t})=>(t(Zb(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Dx({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:hh.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function Rx(e,t,n){if(e instanceof cg)for(let r of e.state.facet(cg.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const Lx=(e,t)=>Dx(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=xf(r,o.tabSize)%pw(o)||pw(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=Uu(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return Rx(e,i,t)})),Bx=e=>Lx(e,!1),zx=e=>Lx(e,!0),Vx=(e,t)=>Dx(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=Uu(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return Rx(e,r,t)})),Fx=e=>Vx(e,!1),qx=e=>Dx(e,(t=>{let n=e.lineBlockAt(t).to;return Rx(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function Hx(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function Wx(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of Hx(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push(hh.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push(hh.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:hh.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function Ux(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of Hx(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Jx=Gx(!1),Kx=Gx(!0);function Gx(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=tw(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(Qv.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new vw(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=gw(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",mw(t,l)];return s&&c.push(mw(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Nu.of(c)},range:hh.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Qx(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:hh.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const Yx=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Qx(e,((t,n)=>{n.push({from:t.from,insert:e.facet(dw)})})),{userEvent:"input.indent"})),!0),Xx=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Qx(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=xf(r,e.tabSize),o=0,s=mw(e,Math.max(0,i-pw(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),Zx=[{key:"Ctrl-b",run:ix,shift:xx,preventDefault:!0},{key:"Ctrl-f",run:ox,shift:$x},{key:"Ctrl-p",run:ux,shift:Cx},{key:"Ctrl-n",run:hx,shift:_x},{key:"Ctrl-a",run:e=>ex(e,(t=>hh.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>wx(e,(t=>hh.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>ex(e,(t=>hh.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>wx(e,(t=>hh.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:zx},{key:"Ctrl-h",run:Bx},{key:"Ctrl-k",run:qx},{key:"Ctrl-Alt-h",run:Fx},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Nu.of(["",""])},range:hh.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:Uu(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:Uu(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:hh.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:mx}],e$=[{key:"ArrowLeft",run:ix,shift:xx,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>sx(e,!rx(e)),shift:e=>kx(e,!rx(e))},{mac:"Cmd-ArrowLeft",run:yx,shift:Px},{key:"ArrowRight",run:ox,shift:$x,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>sx(e,rx(e)),shift:e=>kx(e,rx(e))},{mac:"Cmd-ArrowRight",run:vx,shift:Mx},{key:"ArrowUp",run:ux,shift:Cx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:jx,shift:Nx},{mac:"Ctrl-ArrowUp",run:px,shift:Ex},{key:"ArrowDown",run:hx,shift:_x,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Tx,shift:Ix},{mac:"Ctrl-ArrowDown",run:mx,shift:Ax},{key:"PageUp",run:px,shift:Ex},{key:"PageDown",run:mx,shift:Ax},{key:"Home",run:yx,shift:Px,preventDefault:!0},{key:"Mod-Home",run:jx,shift:Nx},{key:"End",run:vx,shift:Mx,preventDefault:!0},{key:"Mod-End",run:Tx,shift:Ix},{key:"Enter",run:Jx},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Bx,shift:Bx},{key:"Delete",run:zx},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Fx},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Vx(e,!0)},{mac:"Mod-Backspace",run:e=>Dx(e,(t=>{let n=e.lineBlockAt(t).from;return Rx(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:qx}].concat(Zx.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),t$=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>ex(e,(t=>lx(e.state,t,!rx(e)))),shift:e=>wx(e,(t=>lx(e.state,t,!rx(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>ex(e,(t=>lx(e.state,t,rx(e)))),shift:e=>wx(e,(t=>lx(e.state,t,rx(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Wx(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>Ux(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Wx(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>Ux(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=hh.create([n.main]):n.main.empty||(r=hh.create([hh.cursor(n.main.head)])),!!r&&(t(Zb(e,r)),!0)}},{key:"Mod-Enter",run:Kx},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=Hx(e).map((({from:t,to:n})=>hh.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:hh.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=Xb(e.selection,(t=>{var n;let r=tw(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return hh.range(r.to,r.from)}));return t(Zb(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:Xx},{key:"Mod-]",run:Yx},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new vw(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=Qx(e,((t,i,o)=>{let s=gw(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=mw(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(Hx(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=Xb(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,i=Xb(e.selection,(t=>{let i=fb(e,t.head,-1)||fb(e,t.head,1)||t.head>0&&fb(e,t.head-1,1)||t.head<e.doc.length&&fb(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?hh.range(t.anchor,o):hh.cursor(o)}));return!!r&&(t(Zb(e,i)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=Sb(e.state);return t.line?xb(e):!!t.block&&kb(e)}},{key:"Alt-A",run:$b}].concat(e$),n$={key:"Tab",run:Yx,shift:Xx};function r$(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)i$(e,arguments[t]);return e}function i$(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)i$(e,t[n])}}const o$="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class s${constructor(e,t,n=0,r=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(o$(e)):o$,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Yu(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Xu(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Zu(e);let r=this.normalize(t);for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i);if(s)return this.value=s,this;if(e==r.length-1)break;i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}"undefined"!=typeof Symbol&&(s$.prototype[Symbol.iterator]=function(){return this});const a$={from:-1,to:-1,match:/.*/.exec("")},l$="gm"+(null==/x/.unicode?"":"u");class c${constructor(e,t,n,r=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=a$,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new f$(e,t,n,r,i);this.re=new RegExp(t,l$+((null==n?void 0:n.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const u$=new WeakMap;class h${constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=u$.get(e);if(!r||r.from>=n||r.to<=t){let r=new h$(t,e.sliceString(t,n));return u$.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),u$.set(e,new h$(o,i)),new h$(t,i.slice(t-o,n-o))}}class f${constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=a$,this.matchPos=r,this.re=new RegExp(t,l$+((null==n?void 0:n.ignoreCase)?"i":"")),this.flat=h$.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=h$.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function d$(e){let t=r$("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:p$.of(!1),selection:hh.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:r$("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:p$.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},r$("label",e.state.phrase("Go to line"),": ",t)," ",r$("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(c$.prototype[Symbol.iterator]=f$.prototype[Symbol.iterator]=function(){return this});const p$=Hh.define(),m$=xh.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(p$)&&(e=n.value);return e},provide:e=>kv.from(e,(e=>e?d$:null))}),g$=cg.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),v$={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},y$=ph.define({combine:e=>rf(e,v$,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function w$(e){let t=[S$,k$];return e&&t.push(y$.of(e)),t}const b$=Ld.mark({class:"cm-selectionMatch"}),x$=Ld.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function $$(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==Xh.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==Xh.Word)}const k$=lp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(y$),{state:n}=e,r=n.selection;if(r.ranges.length>1)return Ld.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return Ld.none;let e=n.wordAt(o.head);if(!e)return Ld.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return Ld.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!$$(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==Xh.Word&&e(t.sliceDoc(r-1,r))==Xh.Word}(s,n,o.from,o.to))return Ld.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return Ld.none}let a=[];for(let r of e.visibleRanges){let e=new s$(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||$$(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(x$.range(r,i)):(r>=o.to||i<=o.from)&&a.push(b$.range(r,i)),a.length>t.maxMatches))return Ld.none}}return Ld.set(a)}},{decorations:e=>e.decorations}),S$=cg.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const C$=ph.define({combine(e){var t;return{top:e.reduce(((e,t)=>null!=e?e:t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>null!=e?e:t.caseSensitive),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new Y$(e))}}});function _$(e){return e?[C$.of(e),nk]:nk}class O${constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,l$),!0}catch(e){return!1}}(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new j$(this):new M$(this)}getCursor(e,t=0,n=e.length){return this.regexp?P$(this,e,t,n):A$(this,e,t,n)}}class E${constructor(e){this.spec=e}}function A$(e,t,n,r){return new s$(t,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase())}class M$ extends E${constructor(e){super(e)}nextMatch(e,t,n){let r=A$(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=A$(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=A$(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let n=A$(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=A$(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function P$(e,t,n,r){return new c$(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}class j$ extends E${nextMatch(e,t,n){let r=P$(this.spec,e,n,e.length).next();return r.done&&(r=P$(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=P$(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=P$(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=P$(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const T$=Hh.define(),N$=Hh.define(),I$=xh.define({create:e=>new D$(J$(e).create(),null),update(e,t){for(let n of t.effects)n.is(T$)?e=new D$(n.value.create(),e.panel):n.is(N$)&&(e=new D$(e.query,n.value?U$:null));return e},provide:e=>kv.from(e,(e=>e.panel))});class D${constructor(e,t){this.query=e,this.panel=t}}const R$=Ld.mark({class:"cm-searchMatch"}),L$=Ld.mark({class:"cm-searchMatch cm-searchMatch-selected"}),B$=lp.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(I$))}update(e){let t=e.state.field(I$);(t!=e.startState.field(I$)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Ld.none;let{view:n}=this,r=new uf;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state.doc,s,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?L$:R$)}))}return r.finish()}},{decorations:e=>e.decorations});function z$(e){return t=>{let n=t.state.field(I$,!1);return n&&n.query.spec.valid?e(t,n):K$(t)}}const V$=z$(((e,{query:t})=>{let{from:n,to:r}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,r);return!(!i||i.from==n&&i.to==r)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:ek(e,i),userEvent:"select.search"}),!0)})),F$=z$(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main,o=t.prevMatch(n.doc,r,i);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:ek(e,o),userEvent:"select.search"}),!0)})),q$=z$(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:hh.create(n.map((e=>hh.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),H$=z$(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n.doc,r,r);if(!o)return!1;let s,a,l=[],c=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n.doc,o.from,o.to),c.push(cg.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let t=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-t,head:o.to-t},c.push(ek(e,o))}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),W$=z$(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:cg.announce.of(r),userEvent:"input.replace.all"}),!0}));function U$(e){return e.state.facet(C$).createPanel(e)}function J$(e,t){var n;let r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),o=null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:e.facet(C$).caseSensitive;return t&&!i?t:new O$({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}const K$=e=>{let t=e.state.field(I$,!1);if(t&&t.panel){let n=wv(e,U$);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=e.root.activeElement){let n=J$(e.state,t.query.spec);n.valid&&e.dispatch({effects:T$.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[N$.of(!0),t?T$.of(J$(e.state,t.query.spec)):Hh.appendConfig.of(nk)]});return!0},G$=e=>{let t=e.state.field(I$,!1);if(!t||!t.panel)return!1;let n=wv(e,U$);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:N$.of(!1)}),!0},Q$=[{key:"Mod-f",run:K$,scope:"editor search-panel"},{key:"F3",run:V$,shift:F$,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:V$,shift:F$,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:G$,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new s$(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push(hh.range(t.value.from,t.value.to))}return t(e.update({selection:hh.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=wv(e,d$);if(!t){let n=[p$.of(!0)];null==e.state.field(m$,!1)&&n.push(Hh.appendConfig.of([m$,g$])),e.dispatch({effects:n}),t=wv(e,d$)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=hh.create(n.ranges.map((t=>e.wordAt(t.head)||hh.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new s$(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((e=>e.from==i.value.from)))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new s$(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange(hh.range(i.from,i.to),!1),effects:cg.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class Y${constructor(e){this.view=e;let t=this.query=e.state.field(I$).query.spec;function n(e,t,n){return r$("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=r$("input",{value:t.search,placeholder:X$(e,"Find"),"aria-label":X$(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=r$("input",{value:t.replace,placeholder:X$(e,"Replace"),"aria-label":X$(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=r$("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=r$("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=r$("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>V$(e)),[X$(e,"next")]),n("prev",(()=>F$(e)),[X$(e,"previous")]),n("select",(()=>q$(e)),[X$(e,"all")]),r$("label",null,[this.caseField,X$(e,"match case")]),r$("label",null,[this.reField,X$(e,"regexp")]),...e.state.readOnly?[]:[r$("br"),this.replaceField,n("replace",(()=>H$(e)),[X$(e,"replace")]),n("replaceAll",(()=>W$(e)),[X$(e,"replace all")]),r$("button",{name:"close",onclick:()=>G$(e),"aria-label":X$(e,"close"),type:"button"},["√ó"])]])}commit(){let e=new O$({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:T$.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",xg(wg(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?F$:V$)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),H$(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(T$)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(C$).top}}function X$(e,t){return e.state.phrase(t)}const Z$=/[\s\.,:;?!]/;function ek(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r.from)for(let e=0;e<30;e++)if(!Z$.test(a[e+1])&&Z$.test(a[e])){a=a.slice(e);break}if(s!=i)for(let e=a.length-1;e>a.length-30;e--)if(!Z$.test(a[e-1])&&Z$.test(a[e])){a=a.slice(0,e);break}return cg.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}const tk=cg.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),nk=[I$,Oh.lowest(B$),tk];class rk{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=tw(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(lk(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function ik(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function ok(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=ik(t)+ik(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}class sk{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function ak(e){return e.selection.main.head}function lk(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}function ck(e,t){const n=t.completion.apply||t.completion.label;let r=t.source;"string"==typeof n?e.dispatch(function(e,t,n,r){return Object.assign(Object.assign({},e.changeByRange((i=>{if(i==e.selection.main)return{changes:{from:n,to:r,insert:t},range:hh.cursor(n+t.length)};let o=r-n;return!i.empty||o&&e.sliceDoc(i.from-o,i.from)!=e.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:t},range:hh.cursor(i.from-o+t.length)}}))),{userEvent:"input.complete"})}(e.state,n,r.from,r.to)):n(e,t.completion,r.from,r.to)}const uk=new WeakMap;function hk(e){if(!Array.isArray(e))return e;let t=uk.get(e);return t||uk.set(e,t=ok(e)),t}class fk{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=Yu(e,t),r=Zu(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(Yu(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=Yu(e,0);return r==t[0]?[0,0,Zu(r)]:r==n[0]?[-200,0,Zu(r)]:null}let s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=Yu(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=Zu(o)}if(l<a)return null}let c=0,u=0,h=!1,f=0,d=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&u<a;){let l=Yu(e,r);s<0&&(c<a&&l==t[c]&&(i[c++]=r),f<a&&(l==t[f]||l==n[f]?(0==f&&(d=r),p=r+1,f++):f=0));let y,w=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=Xu(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!r||1==w&&m||0==v&&0!=w)&&(t[u]==l||n[u]==l&&(h=!0)?o[u++]=r:o.length&&(g=!1)),v=w,r+=Zu(l)}return u==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):f==a&&0==d?[-200-e.length,0,p]:s>-1?[-700-e.length,s,s+this.pattern.length]:f==a?[-900-e.length,d,p]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let e of t){let t=e+(this.astral?Zu(Yu(n,e)):1);i>1&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return r}}const dk=ph.define({combine:e=>rf(e,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function pk(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class mk{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(dk);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let e=1;e<n.length;){let t=n[e++],s=n[e++];t>o&&r.appendChild(document.createTextNode(i.slice(o,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(t,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.range=pk(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return ck(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=pk(t.options.length,t.selected,this.view.state.facet(dk).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>ip(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,o=this.view.textDirection==yp.RTL,s=t.left,a=innerWidth-t.right;return o&&s<Math.min(n.width,a)?o=!1:!o&&a<Math.min(n.width,s)&&(o=!0),{top:i,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=e[i];const s=r.appendChild(document.createElement("li"));s.id=t+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,o);t&&s.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function gk(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class vk{constructor(e,t,n,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vk(this.options,bk(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=0;for(let i of e)if(i.hasResult())if(!1===i.result.filter){let e=i.result.getMatch;for(let t of i.result.options){let o=[1e9-r++];if(e)for(let n of e(t))o.push(n);n.push(new sk(t,i,o))}}else{let e,r=new fk(t.sliceDoc(i.from,i.to));for(let t of i.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new sk(t,i,e)))}let i=[],o=null;for(let e of n.sort($k))!o||o.label!=e.completion.label||o.detail!=e.completion.detail||null!=o.type&&null!=e.completion.type&&o.type!=e.completion.type||o.apply!=e.completion.apply?i.push(e):gk(e.completion)>gk(o)&&(i[i.length-1]=e),o=e.completion;return i}(e,t);if(!o.length)return null;let s=0;if(r&&r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new vk(o,bk(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=Mk,e=>new mk(e,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s);var a}map(e){return new vk(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class yk{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new yk(xk,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(dk),r=(n.override||t.languageDataAt("autocomplete",ak(t)).map(hk)).map((t=>(this.active.find((e=>e.source==t))||new Sk(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?vk.build(r,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new Sk(e.source,0):e)));for(let t of e.effects)t.is(Ak)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new yk(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:wk}}const wk={"aria-autocomplete":"list"};function bk(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}const xk=[];function $k(e,t){let n=t.match[0]-e.match[0];return n||e.completion.label.localeCompare(t.completion.label)}function kk(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class Sk{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=kk(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new Sk(r.source,0));for(let t of e.effects)if(t.is(_k))r=new Sk(r.source,1,t.value?ak(e.state):-1);else if(t.is(Ok))r=new Sk(r.source,0);else if(t.is(Ek))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new Sk(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(ak(e.startState))?new Sk(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Sk(this.source,this.state,e.mapPos(this.explicitPos))}}class Ck extends Sk{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=ak(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&ak(e.startState)==this.from)return new Sk(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):lk(e,!0).test(i)}(this.result.validFor,e.state,i,o)?new Ck(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new rk(e.state,s,l>=0)))?new Ck(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:ak(e.state)):new Sk(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Sk(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ck(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const _k=Hh.define(),Ok=Hh.define(),Ek=Hh.define({map:(e,t)=>e.map((e=>e.map(t)))}),Ak=Hh.define(),Mk=xh.define({create:()=>yk.start(),update:(e,t)=>e.update(t),provide:e=>[hv.from(e,(e=>e.tooltip)),cg.contentAttributes.from(e,(e=>e.attrs))]});function Pk(e,t="option"){return n=>{let r=n.state.field(Mk,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let i,o=1;"page"==t&&(i=function(e,t){let n=e.plugin(lv);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let s=r.open.selected+o*(e?1:-1),{length:a}=r.open.options;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:Ak.of(s)}),!0}}class jk{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Tk=lp.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Mk).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Mk);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Mk)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!kk(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){ip(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==kk(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Mk);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=ak(t),r=new rk(t,n,e.explicitPos==n),i=new jk(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:Ok.of(null)}),ip(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(dk);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new Ck(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:ak(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(Mk).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new Sk(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:Ek.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(Mk,!1);e&&e.tooltip&&this.view.state.facet(dk).closeOnBlur&&this.view.dispatch({effects:Ok.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:_k.of(!1)})),20),this.composing=0}}}),Nk=cg.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"¬∑¬∑¬∑"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'∆í'"}},".cm-completionIcon-class":{"&:after":{content:"'‚óã'"}},".cm-completionIcon-interface":{"&:after":{content:"'‚óå'"}},".cm-completionIcon-variable":{"&:after":{content:"'ùë•'"}},".cm-completionIcon-constant":{"&:after":{content:"'ùê∂'"}},".cm-completionIcon-type":{"&:after":{content:"'ùë°'"}},".cm-completionIcon-enum":{"&:after":{content:"'‚à™'"}},".cm-completionIcon-property":{"&:after":{content:"'‚ñ°'"}},".cm-completionIcon-keyword":{"&:after":{content:"'üîëÔ∏é'"}},".cm-completionIcon-namespace":{"&:after":{content:"'‚ñ¢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ik={brackets:["(","[","{","'",'"'],before:")]}:;>"},Dk=Hh.define({map(e,t){let n=t.mapPos(e,-1,th.TrackAfter);return null==n?void 0:n}}),Rk=Hh.define({map:(e,t)=>t.mapPos(e)}),Lk=new class extends of{};Lk.startSide=1,Lk.endSide=-1;const Bk=xh.define({create:()=>cf.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=cf.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(Dk)?e=e.update({add:[Lk.range(n.value,n.value+1)]}):n.is(Rk)&&(e=e.update({filter:e=>e!=n.value}));return e}});function zk(){return[Wk,Bk]}const Vk="()[]{}<>";function Fk(e){for(let t=0;t<Vk.length;t+=2)if(Vk.charCodeAt(t)==e)return Vk.charAt(t+1);return Xu(e<128?e:e+1)}function qk(e,t){return e.languageDataAt("closeBrackets",t)[0]||Ik}const Hk="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Wk=cg.inputHandler.of(((e,t,n,r)=>{if((Hk?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==Zu(Yu(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=qk(e,e.selection.main.head),r=n.brackets||Ik.brackets;for(let i of r){let o=Fk(Yu(i,0));if(t==i)return o==i?Yk(e,i,r.indexOf(i+i+i)>-1):Gk(e,i,o,n.before||Ik.before);if(t==o&&Jk(e,e.selection.main.from))return Qk(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),Uk=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=qk(e,e.selection.main.head).brackets||Ik.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return Zu(Yu(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&Kk(e.doc,t.head)==Fk(Yu(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:hh.cursor(t.head-i.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0})),!r}}];function Jk(e,t){let n=!1;return e.field(Bk).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function Kk(e,t){let n=e.sliceString(t,t+2);return n.slice(0,Zu(Yu(n,0)))}function Gk(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Dk.of(o.to+t.length),range:hh.range(o.anchor+t.length,o.head+t.length)};let s=Kk(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:Dk.of(o.head+t.length),range:hh.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Qk(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&Kk(e.doc,t.head)==n?hh.cursor(t.head+n.length):r=t));return r?null:e.update({selection:hh.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>Rk.of(e)))})}function Yk(e,t,n){let r=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:Dk.of(i.to+t.length),range:hh.range(i.anchor+t.length,i.head+t.length)};let o=i.head,s=Kk(e.doc,o);if(s==t){if(Xk(e,o))return{changes:{insert:t+t,from:o},effects:Dk.of(o+t.length),range:hh.cursor(o+t.length)};if(Jk(e,o)){let r=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:hh.cursor(o+t.length*(r?3:1)),effects:Rk.of(o)}}}else{if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&Xk(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:Dk.of(o+t.length),range:hh.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=Xh.Word){let n=e.sliceDoc(o-1,o);if(n!=t&&e.charCategorizer(o)(n)!=Xh.Word&&!function(e,t,n){let r=tw(e).resolveInner(t,-1);for(let i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;let i=r.to==t&&r.parent;if(!i)break;r=i}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:Dk.of(o+t.length),range:hh.cursor(o+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Xk(e,t){let n=tw(e).resolveInner(t+1);return n.parent&&n.from==t}function Zk(e={}){return[Mk,dk.of(e),Tk,tS,Nk]}const eS=[{key:"Ctrl-Space",run:e=>!!e.state.field(Mk,!1)&&(e.dispatch({effects:_k.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Mk,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:Ok.of(null)}),!0)}},{key:"ArrowDown",run:Pk(!0)},{key:"ArrowUp",run:Pk(!1)},{key:"PageDown",run:Pk(!0,"page")},{key:"PageUp",run:Pk(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Mk,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(ck(e,t.open.options[t.open.selected]),!0)}}],tS=Oh.highest(vg.computeN([dk],(e=>e.facet(dk).defaultKeymap?[eS]:[])));class nS{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class rS{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(vS).markerFilter;i&&(r=i(r));let o=Ld.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?Ld.widget({widget:new xS(e),diagnostic:e}).range(e.from):Ld.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new rS(o,t,iS(o))}}function iS(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new nS(e,n,i.diagnostic),!1})),r}function oS(e,t){return!(!e.effects.some((e=>e.is(aS)))&&!e.changes.touchesRange(t.pos))}function sS(e,t){return e.field(uS,!1)?t:t.concat(Hh.appendConfig.of([uS,cg.decorations.compute([uS],(e=>{let{selected:t,panel:n}=e.field(uS);return t&&n&&t.from!=t.to?Ld.set([hS.range(t.from,t.to)]):Ld.none})),gv(fS,{hideOn:oS}),_S]))}const aS=Hh.define(),lS=Hh.define(),cS=Hh.define(),uS=xh.define({create:()=>new rS(Ld.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=iS(n,e.selected.diagnostic,i)||iS(n,null,i)}e=new rS(n,e.panel,r)}for(let n of t.effects)n.is(aS)?e=rS.init(n.value,e.panel,t.state):n.is(lS)?e=new rS(e.diagnostics,n.value?kS.open:null,e.selected):n.is(cS)&&(e=new rS(e.diagnostics,e.panel,n.value));return e},provide:e=>[kv.from(e,(e=>e.panel)),cg.decorations.from(e,(e=>e.diagnostics))]}),hS=Ld.mark({class:"cm-lintRange cm-lintRange-active"});function fS(e,t,n){let{diagnostics:r}=e.state.field(uS),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(vS).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:dS(e,i)})}:null}function dS(e,t){return r$("ul",{class:"cm-tooltip-lint"},t.map((t=>bS(e,t,!1))))}const pS=e=>{let t=e.state.field(uS,!1);return!(!t||!t.panel)&&(e.dispatch({effects:lS.of(!1)}),!0)},mS=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(uS,!1);t&&t.panel||e.dispatch({effects:sS(e.state,[lS.of(!0)])});let n=wv(e,kS.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:e=>{let t=e.state.field(uS,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],gS=lp.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(vS);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(vS);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let n=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:sS(e,[aS.of(t)])}}(this.view.state,n))}),(e=>{ip(this.view.state,e)}))}}update(e){let t=e.state.facet(vS);(e.docChanged||t!=e.startState.facet(vS))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),vS=ph.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},rf(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:gS});function yS(e,t={}){return vS.of({source:e,config:t})}function wS(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function bS(e,t,n){var r;let i=n?wS(t.actions):[];return r$("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},r$("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=iS(e.state.field(uS).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),r$("u",s.slice(a,a+1)),s.slice(a+1)];return r$("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),t.source&&r$("div",{class:"cm-diagnosticSource"},t.source))}class xS extends Dd{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return r$("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class $S{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=bS(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class kS{constructor(e){this.view=e,this.items=[];this.list=r$("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)pS(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=wS(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=iS(this.view.state.field(uS).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=r$("div",{class:"cm-panel-lint"},this.list,r$("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>pS(this.view)},"√ó")),this.update()}get selectedIndex(){let e=this.view.state.field(uS).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(uS),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==s.diagnostic){l=e;break}l<0?(a=new $S(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new $S(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=iS(this.view.state.field(uS).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:cS.of(t)})}static open(e){return new kS(e)}}function SS(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function CS(e){return SS(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const _S=cg.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:CS("#d11")},".cm-lintRange-warning":{backgroundImage:CS("orange")},".cm-lintRange-info":{backgroundImage:CS("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class OS extends Sv{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce(((e,t)=>{let n=t.severity;return"error"==n||"warning"==n&&"info"==e?n:e}),"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,r=e.state.facet(NS).tooltipFilter;return r&&(n=r(n)),n.length&&(t.onmouseover=()=>function(e,t,n){function r(){let r=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(r.from)&&e.dispatch({effects:PS.of({pos:r.from,above:!1,create:()=>({dom:dS(e,n),getCoords:()=>t.getBoundingClientRect()})})}),t.onmouseout=t.onmousemove=null,function(e,t){let n=r=>{let i=t.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let e=r.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),e.state.field(jS)&&e.dispatch({effects:PS.of(null)})}};window.addEventListener("mousemove",n)}(e,t)}let{hoverTime:i}=e.state.facet(NS),o=setTimeout(r,i);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}(e,t,n)),t}}function ES(e,t){let n=Object.create(null);for(let r of t){let t=e.lineAt(r.from);(n[t.from]||(n[t.from]=[])).push(r)}let r=[];for(let e in n)r.push(new OS(n[e]).range(+e));return cf.of(r,!0)}const AS=Ev({class:"cm-gutter-lint",markers:e=>e.state.field(MS)}),MS=xh.define({create:()=>cf.empty,update(e,t){e=e.map(t.changes);let n=t.state.facet(NS).markerFilter;for(let r of t.effects)if(r.is(aS)){let i=r.value;n&&(i=n(i||[])),e=ES(t.state.doc,i.slice(0))}return e}}),PS=Hh.define(),jS=xh.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=oS(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce(((e,t)=>t.is(PS)?t.value:e),e)),provide:e=>hv.from(e)}),TS=cg.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:SS('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:SS('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:SS('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),NS=ph.define({combine:e=>rf(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});function IS(e={}){return[NS.of(e),MS,AS,TS,jS]}const DS=[Fv(),Uv(),Hg(),jb(),Uw(),Sg(),Dg(),nf.allowMultipleSelections.of(!0),Cw(),Xw(tb,{fallback:!0}),ub(),zk(),Zk(),ev(),rv(),Kg(),w$(),vg.of([...Uk,...t$,...Q$,...Yb,...Bw,...eS,...mS])];class RS{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new RS(e,[],t,n,n,0,[],0,r?new LS(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=65535&e,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(t-1)-(262144&e?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,e,l+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new RS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new zS(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new LS(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class LS{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var BS;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(BS||(BS={}));class zS{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class VS{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new VS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new VS(this.stack,this.pos,this.index)}}class FS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const qS=new FS;class HS{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=qS,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=qS,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class WS{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;e:for(;0!=(o&e[i]);){let n=e[i+1];for(let r=i+3;r<n;r+=2)if((e[r+1]&o)>0){let n=e[r];if(a.allows(n)&&(-1==t.token.value||t.token.value==n||s.overrides(n,t.token.value))){t.acceptToken(n);break}}for(let r=t.next,o=0,s=e[i+2];o<s;){let a=o+s>>1,l=n+a+(a<<1),c=e[l],u=e[l+1];if(r<c)s=a;else{if(!(r>=u)){i=e[l+2],t.advance();continue e}o=a+1}}break}}(this.data,e,t,this.id)}}function US(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}WS.prototype.contextual=WS.prototype.fallback=WS.prototype.extend=!1;const JS="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let KS=null;var GS,QS;function YS(e,t,n){let r=e.cursor(ny.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(GS||(GS={}));class XS{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?YS(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?YS(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof ry){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(Qv.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class ZS{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new FS))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new FS,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new FS,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(iC(s,a+2),t,n,r));break}a=iC(s,a+2)}s[a]==t&&(r=this.putAction(iC(s,a+1),t,n,r))}return r}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(QS||(QS={}));class eC{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new HS(t,r),this.tokens=new ZS(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[RS.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new XS(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw JS&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1)e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=JS?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(Qv.contextHash)||0)==n))return e.useNode(s,r),JS&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof ry)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof ry&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),JS&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,f=h?e:e.split();if(f.apply(l,c,u),JS&&console.log(o+this.stackID(f)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${f==e?"":", split"})`),h)return!0;f.pos>r?t.push(f):n.push(f)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return tC(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=JS?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),JS&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10;e++){if(JS&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;JS&&(h=this.stackID(u)+" -> ")}for(let e of s.recoverByInsert(a))JS&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),JS&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),tC(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),ry.build({buffer:VS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(KS||(KS=new WeakMap)).get(e);return t||KS.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function tC(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class nC{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}class rC extends by{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=Qv[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new Zv(t.map(((t,i)=>Xv.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Jv;let o=US(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=US(e.states,Uint32Array),this.data=US(e.stateData),this.goto=US(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new WS(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new eC(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return iC(n,o+2);break}i=n[o=iC(n,o+2)]}if(i==t||0==i)return iC(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=iC(this.data,n+2)}if(t==iC(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=iC(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}overrides(e,t){let n=oC(this.data,this.tokenPrecTable,t);return n<0||oC(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(rC.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new nC(e,n,r)}static deserialize(e){return new rC(e)}}function iC(e,t){return e[t]|e[t+1]<<16}function oC(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}const sC=Oy({String:Gy.string,Number:Gy.number,"True False":Gy.bool,PropertyName:Gy.propertyName,Null:Gy.null,",":Gy.separator,"[ ]":Gy.squareBracket,"{ }":Gy.brace}),aC=rC.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"‚ö† JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[sC],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),lC=ew.define({parser:aC.configure({props:[yw.add({Object:Sw({except:/^\s*\}/}),Array:Sw({except:/^\s*\]/})}),Ow.add({"Object Array":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function cC(){return new hw(lC)}function uC(e,t){const n=Date.now(),r=e();return t(Date.now()-n),r}function hC(e){let t,n,r;return{c(){t=O("div"),n=A("Line: "),r=A(e[0]),I(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,i){S(e,t,i),x(t,n),x(t,r)},p(e,t){1&t&&B(r,e[0])},d(e){e&&C(t)}}}function fC(e){let t,n,r;return{c(){t=O("div"),n=A("Column: "),r=A(e[1]),I(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,i){S(e,t,i),x(t,n),x(t,r)},p(e,t){2&t&&B(r,e[1])},d(e){e&&C(t)}}}function dC(e){let t,n,r,i;return{c(){t=O("div"),n=A("Selection: "),r=A(e[2]),i=A(" characters"),I(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,o){S(e,t,o),x(t,n),x(t,r),x(t,i)},p(e,t){4&t&&B(r,e[2])},d(e){e&&C(t)}}}function pC(t){let n,r,i,o=void 0!==t[0]&&hC(t),s=void 0!==t[1]&&fC(t),a=void 0!==t[2]&&t[2]>0&&dC(t);return{c(){n=O("div"),o&&o.c(),r=M(),s&&s.c(),i=M(),a&&a.c(),I(n,"class","jse-status-bar svelte-1oo7hnc")},m(e,t){S(e,n,t),o&&o.m(n,null),x(n,r),s&&s.m(n,null),x(n,i),a&&a.m(n,null)},p(e,[t]){void 0!==e[0]?o?o.p(e,t):(o=hC(e),o.c(),o.m(n,r)):o&&(o.d(1),o=null),void 0!==e[1]?s?s.p(e,t):(s=fC(e),s.c(),s.m(n,i)):s&&(s.d(1),s=null),void 0!==e[2]&&e[2]>0?a?a.p(e,t):(a=dC(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&C(n),o&&o.d(),s&&s.d(),a&&a.d()}}}function mC(e,t,n){var r,i,o,s,a;let l,c,u,h,f,{editorState:d}=t;return e.$$set=e=>{"editorState"in e&&n(3,d=e.editorState)},e.$$.update=()=>{56&e.$$.dirty&&n(9,l=null===n(5,i=null===n(4,r=null==d?void 0:d.selection)||void 0===r?void 0:r.main)||void 0===i?void 0:i.head),584&e.$$.dirty&&n(10,c=null===n(6,o=null==d?void 0:d.doc)||void 0===o?void 0:o.lineAt(l)),1024&e.$$.dirty&&n(0,u=c?c.number:void 0),1536&e.$$.dirty&&n(1,h=c?l-c.from+1:void 0),392&e.$$.dirty&&n(2,f=null===n(8,a=null===n(7,s=null==d?void 0:d.selection)||void 0===s?void 0:s.ranges)||void 0===a?void 0:a.reduce(((e,t)=>e+t.to-t.from),0))},[u,h,f,d,r,i,o,s,a,l,c]}class gC extends Fe{constructor(e){super(),Ve(this,e,mC,pC,a,{editorState:3})}}const vC=Kw.define([{tag:Gy.propertyName,color:"var(--jse-key-color)"},{tag:Gy.number,color:"var(--jse-value-color-number)"},{tag:Gy.bool,color:"var(--jse-value-color-boolean)"},{tag:Gy.string,color:"var(--jse-value-color-string)"},{tag:Gy.keyword,color:"var(--jse-value-color-null)"}]),yC=Xw(vC),wC=vC.style;function bC(e){let t,n;return t=new Tu({props:{readOnly:e[1],onFormat:e[17],onCompact:e[18],onSort:e[19],onTransform:e[20],onToggleSearch:e[21],onUndo:e[22],onRedo:e[23],canFormat:!e[15],canCompact:!e[15],canSort:!e[15],canTransform:!e[15],canUndo:e[10],canRedo:e[11],onRenderMenu:e[5]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.readOnly=e[1]),32768&n[0]&&(r.canFormat=!e[15]),32768&n[0]&&(r.canCompact=!e[15]),32768&n[0]&&(r.canSort=!e[15]),32768&n[0]&&(r.canTransform=!e[15]),1024&n[0]&&(r.canUndo=e[10]),2048&n[0]&&(r.canRedo=e[11]),32&n[0]&&(r.onRenderMenu=e[5]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function xC(t){let n;return{c(){n=O("div"),n.innerHTML='<div class="jse-loading-space svelte-1ol5grl"></div> \n      <div class="jse-loading svelte-1ol5grl">loading...</div>',I(n,"class","jse-contents svelte-1ol5grl")},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function $C(e){let t,n,r,i,o,s,a,l=e[14]&&kC(e),c=e[3]&&SC(e),u=e[12]&&CC(e);return s=new hu({props:{validationErrors:e[9],selectError:e[26]}}),{c(){l&&l.c(),t=M(),n=O("div"),r=M(),c&&c.c(),i=M(),u&&u.c(),o=M(),Le(s.$$.fragment),I(n,"class","jse-contents svelte-1ol5grl"),H(n,"jse-hidden",e[14])},m(h,f){l&&l.m(h,f),S(h,t,f),S(h,n,f),e[46](n),S(h,r,f),c&&c.m(h,f),S(h,i,f),u&&u.m(h,f),S(h,o,f),Be(s,h,f),a=!0},p(e,r){e[14]?l?(l.p(e,r),16384&r[0]&&Oe(l,1)):(l=kC(e),l.c(),Oe(l,1),l.m(t.parentNode,t)):l&&(Ce(),Ee(l,1,1,(()=>{l=null})),_e()),16384&r[0]&&H(n,"jse-hidden",e[14]),e[3]?c?(c.p(e,r),8&r[0]&&Oe(c,1)):(c=SC(e),c.c(),Oe(c,1),c.m(i.parentNode,i)):c&&(Ce(),Ee(c,1,1,(()=>{c=null})),_e()),e[12]?u?(u.p(e,r),4096&r[0]&&Oe(u,1)):(u=CC(e),u.c(),Oe(u,1),u.m(o.parentNode,o)):u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e());const a={};512&r[0]&&(a.validationErrors=e[9]),s.$set(a)},i(e){a||(Oe(l),Oe(c),Oe(u),Oe(s.$$.fragment,e),a=!0)},o(e){Ee(l),Ee(c),Ee(u),Ee(s.$$.fragment,e),a=!1},d(a){l&&l.d(a),a&&C(t),a&&C(n),e[46](null),a&&C(r),c&&c.d(a),a&&C(i),u&&u.d(a),a&&C(o),ze(s,a)}}}function kC(e){let t,n;return t=new Zc({props:{icon:vc,type:"error",message:`The JSON document is larger than ${bc(tn,1024)}, and may crash your browser when loading it in code mode. Actual size: ${bc(e[0].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in code mode. This may freeze or crash your browser.",onClick:e[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:e[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:e[25]}]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.message=`The JSON document is larger than ${bc(tn,1024)}, and may crash your browser when loading it in code mode. Actual size: ${bc(e[0].length,1024)}.`),16&n[0]&&(r.actions=[{text:"Open anyway",title:"Open the document in code mode. This may freeze or crash your browser.",onClick:e[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:e[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:e[25]}]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function SC(e){let t,n;return t=new gC({props:{editorState:e[8]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};256&n[0]&&(r.editorState=e[8]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function CC(e){let t,n;return t=new Zc({props:{type:"error",icon:vc,message:e[12].message,actions:e[13],onClick:e[47]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.message=e[12].message),8192&n[0]&&(r.actions=e[13]),4096&n[0]&&(r.onClick=e[47]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function _C(e){let t,n,r,i,o,s=e[2]&&bC(e);const a=[$C,xC],l=[];return r=function(e,t){return e[16]?1:0}(e),i=l[r]=a[r](e),{c(){t=O("div"),s&&s.c(),n=M(),i.c(),I(t,"class","jse-code-mode svelte-1ol5grl"),H(t,"no-main-menu",!e[2])},m(i,a){S(i,t,a),s&&s.m(t,null),x(t,n),l[r].m(t,null),e[48](t),o=!0},p(e,r){e[2]?s?(s.p(e,r),4&r[0]&&Oe(s,1)):(s=bC(e),s.c(),Oe(s,1),s.m(t,n)):s&&(Ce(),Ee(s,1,1,(()=>{s=null})),_e()),i.p(e,r),4&r[0]&&H(t,"no-main-menu",!e[2])},i(e){o||(Oe(s),Oe(i),o=!0)},o(e){Ee(s),Ee(i),o=!1},d(n){n&&C(t),s&&s.d(),l[r].d(),e[48](null)}}}function OC(e,t,n){let r,i,o,s,a,{readOnly:l=!1}=t,{mainMenuBar:c=!0}=t,{statusBar:u=!0}=t,{text:h=""}=t,{indentation:f=2}=t,{tabSize:d=4}=t,{escapeUnicodeCharacters:p=!1}=t,{validator:m=null}=t,{onChange:g=null}=t,{onSwitchToTreeMode:v=Yr}=t,{onError:y}=t,{onFocus:w=Yr}=t,{onBlur:b=Yr}=t,{onRenderMenu:x=Yr}=t,{onSortModal:$}=t,{onTransformModal:k}=t;const S=Et("jsoneditor:CodeMode"),C={key:"Mod-i",run:W,shift:U,preventDefault:!0},_="undefined"==typeof window;let O,E,A,M,P;S("isSSR:",_);let j=!1,T=[];const N=new Ah,I=new Ah,D=new Ah;let R=p;te((async()=>{if(!_)try{E=function({target:e,initialText:t,readOnly:r,indentation:i}){S("Create CodeMirror editor",{readOnly:r,indentation:i});const o=nf.create({doc:t,extensions:[vg.of([n$,C]),yS((()=>(ae.flush(),function(){if(S("validate"),n(44,ue=hn),n(12,he=null),n(9,T=[]),h.length>Zt)return[{from:0,to:0,message:"Validation turned off: the document is too large",severity:"info"}];if(0===h.length)return[];try{const e=uC((()=>JSON.parse(h)),(e=>S(`validate: parsed json in ${e} ms`)));return m?(n(9,T=uC((()=>m(e)),(e=>S(`validate: validated json in ${e} ms`)))),T.map(X)):[]}catch(e){const t=uC((()=>function(e){if(e.length>en)return!1;try{return JSON.parse(Mn(e)),!0}catch(e){return!1}}(h)),(e=>S(`validate: checked whether repairable in ${e} ms`)));return n(12,he=Qn(h,e.message||e.toString())),n(44,ue=t?fn:dn),[Z(he,t)]}}())),{delay:300}),IS(),DS,yC,cg.domEventHandlers({dblclick:Y}),cg.updateListener.of((e=>{n(8,P=e.state),e.docChanged&&ae()})),cC(),_$({top:!0}),N.of(nf.readOnly.of(r)),D.of(nf.tabSize.of(d)),I.of(oe(i)),cg.lineWrapping]});return E=new cg({state:o,parent:e}),E}({target:O,initialText:o?"":h,readOnly:l,indentation:f}),F()}catch(e){console.error(e)}})),ne((()=>{E&&(S("Destroy CodeMirror editor"),E.destroy())}));let L=!1,B=!1;const z=va(),V=va();function F(){E&&(S("focus"),E.focus())}let q=!1;function H(e){S("patch",e);const t=h,r=JSON.parse(h),i=kn.immutableJSONPatch(r,e),o=kn.revertJSONPatch(r,e);return n(0,h=JSON.stringify(i,null,f)),h!==t&&ce(h,t),{json:i,previousJson:r,undo:o,redo:e}}function W(){if(S("format"),!l)try{const e=h,t=JSON.parse(h);n(0,h=JSON.stringify(t,null,f)),h!==e&&ce(h,e)}catch(e){y(e)}}function U(){if(S("compact"),!l)try{const e=h,t=JSON.parse(h);n(0,h=JSON.stringify(t)),h!==e&&ce(h,e)}catch(e){y(e)}}function J(){if(S("repair"),!l)try{const e=h;n(0,h=Mn(h)),n(44,ue=hn),n(12,he=void 0),h!==e&&ce(h,e)}catch(e){y(e)}}function K({id:e,selectedPath:t,onTransform:n,onClose:r}){try{const i=JSON.parse(h);q=!0,k({id:e||V,json:i,selectedPath:t,onTransform:n?e=>{n({operations:e,json:i,transformedJson:kn.immutableJSONPatch(i,e)})}:e=>{S("onTransform",e),H(e)},onClose:()=>{q=!1,F(),r&&r()}})}catch(e){y(e)}}function G(e){S("select parse error",e);const t=Z(e);Q(t.from,t.to),F()}function Q(e,t){S("setSelection",{anchor:e,head:t}),E&&E.dispatch(E.state.update({selection:{anchor:e,head:t},scrollIntoView:!0}))}function Y(e,t){if(1===t.state.selection.ranges.length){const e=t.state.selection.ranges[0],n=h.slice(e.from,e.to);if("{"===n||"["===n){const t=An(h),n=Object.keys(t.pointers).find((n=>{var r;return(null===(r=t.pointers[n].value)||void 0===r?void 0:r.pos)===e.from})),r=t.pointers[n];if(n&&r&&r.value&&r.valueEnd){S("pointer found, selecting inner contents of path:",n,r);Q(r.value.pos+1,r.valueEnd.pos-1)}}}}function X(e){const{path:t,message:n,isChildError:r}=e,{line:i,column:o,from:s,to:a}=function(e,t){try{const n=An(e),r=kn.compileJSONPointer(t),i=n.pointers[r];if(i)return{path:t,line:i.key?i.key.line:i.value?i.value.line:0,column:i.key?i.key.column:i.value?i.value.column:0,from:i.key?i.key.pos:i.value?i.value.pos:0,to:i.keyEnd?i.keyEnd.pos:i.valueEnd?i.valueEnd.pos:0}}catch(e){console.error(e)}return null}(h,t);return{path:t,isChildError:r,line:i,column:o,from:s,to:a,message:n,severity:"warning",actions:[]}}function Z(e,t){const{line:n,column:r,position:i,message:o}=e;return{path:null,line:n,column:r,from:i||0,to:i||0,severity:"error",message:o,actions:t&&!l?[{name:"Auto repair",apply:()=>J()}]:null}}function ee(e,t=!1){!o||t?E&&e!==A&&(S("setCodeMirrorValue length=",e.length),A=e,E.dispatch({changes:{from:0,to:E.state.doc.length,insert:s.escapeValue(e)}}),se()):S("not applying text: editor is disabled")}function re(){S("forceUpdateText",{escapeUnicodeCharacters:p}),E&&E.dispatch({changes:{from:0,to:E.state.doc.length,insert:s.escapeValue(h)}})}function ie(){if(E&&(A=E?s.unescapeValue(E.state.doc.toString()):"",A!==h)){const e=A;S("text changed"),n(0,h=A),se(),ce(h,e)}}function oe(e){return dw.of("number"==typeof e?" ".repeat(e):e)}function se(){n(10,L=Bb(E.state)>0),n(11,B=zb(E.state)>0),S({canUndo:L,canRedo:B})}$c({onMount:te,onDestroy:ne,getWindow:()=>Al(M),hasFocus:()=>q&&document.hasFocus()||Ml(M),onFocus:w,onBlur:b});const ae=Hs(ie,300);function ce(e,t){g&&g(e,t)}let ue=hn,he=null;return e.$$set=e=>{"readOnly"in e&&n(1,l=e.readOnly),"mainMenuBar"in e&&n(2,c=e.mainMenuBar),"statusBar"in e&&n(3,u=e.statusBar),"text"in e&&n(0,h=e.text),"indentation"in e&&n(28,f=e.indentation),"tabSize"in e&&n(29,d=e.tabSize),"escapeUnicodeCharacters"in e&&n(30,p=e.escapeUnicodeCharacters),"validator"in e&&n(31,m=e.validator),"onChange"in e&&n(32,g=e.onChange),"onSwitchToTreeMode"in e&&n(4,v=e.onSwitchToTreeMode),"onError"in e&&n(33,y=e.onError),"onFocus"in e&&n(34,w=e.onFocus),"onBlur"in e&&n(35,b=e.onBlur),"onRenderMenu"in e&&n(5,x=e.onRenderMenu),"onSortModal"in e&&n(36,$=e.onSortModal),"onTransformModal"in e&&n(37,k=e.onTransformModal)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(15,r=0===h.length),1&e.$$.dirty[0]&&n(45,i=h&&h.length>tn),18432&e.$$.dirty[1]&&n(14,o=i&&!j),1073741824&e.$$.dirty[0]&&(s=fl({escapeControlCharacters:!1,escapeUnicodeCharacters:p})),1&e.$$.dirty[0]&&ee(h),268435456&e.$$.dirty[0]&&function(e){E&&(S("updateIndentation",e),E.dispatch({effects:I.reconfigure(oe(e))}))}(f),536870912&e.$$.dirty[0]&&function(e){E&&(S("updateTabSize",e),E.dispatch({effects:D.reconfigure(nf.tabSize.of(e))}))}(d),2&e.$$.dirty[0]&&function(e){E&&(S("updateReadOnly",e),E.dispatch({effects:N.reconfigure(nf.readOnly.of(e))}))}(l),1073741824&e.$$.dirty[0]|4096&e.$$.dirty[1]&&R!==p&&(n(43,R=p),re()),2&e.$$.dirty[0]|1&e.$$.dirty[1]&&re(),2&e.$$.dirty[0]|8192&e.$$.dirty[1]&&n(13,a=ue!==fn||l?[]:[{icon:yc,text:"Auto repair",title:"Automatically repair JSON",onClick:J}])},[h,l,c,u,v,x,O,M,P,T,L,B,he,a,o,r,_,W,U,function(){if(!l)try{const e=JSON.parse(h);q=!0,$({id:z,json:e,selectedPath:[],onSort:async e=>{S("onSort",e),H(e)},onClose:()=>{q=!1,F()}})}catch(e){y(e)}},function(){l||K({selectedPath:[]})},function(){E&&(O&&O.querySelector(".cm-search")?G$(E):K$(E))},function(){l||E&&(Nb(E),F())},function(){l||E&&(Ib(E),F())},function(){n(42,j=!0),ee(h,!0)},function(){ie()},function(e){S("select validation error",e);const t=X(e);Q(t.from,t.to),F()},G,f,d,p,m,g,y,w,b,$,k,F,H,K,function(){S("refresh");const e=E.state.doc.length;E.dispatch({changes:{from:e,to:e,insert:" "}}),E.dispatch({changes:{from:e,to:e+1,insert:""}})},j,R,ue,i,function(e){le[e?"unshift":"push"]((()=>{O=e,n(6,O)}))},()=>G(he),function(e){le[e?"unshift":"push"]((()=>{M=e,n(7,M)}))}]}vC.style=e=>wC(e||[]);class EC extends Fe{constructor(e){super(),Ve(this,e,OC,_C,l,{readOnly:1,mainMenuBar:2,statusBar:3,text:0,indentation:28,tabSize:29,escapeUnicodeCharacters:30,validator:31,onChange:32,onSwitchToTreeMode:4,onError:33,onFocus:34,onBlur:35,onRenderMenu:5,onSortModal:36,onTransformModal:37,focus:38,patch:39,openTransformModal:40,refresh:41},null,[-1,-1,-1])}get focus(){return this.$$.ctx[38]}get patch(){return this.$$.ctx[39]}get openTransformModal(){return this.$$.ctx[40]}get refresh(){return this.$$.ctx[41]}}const AC=Et("jsoneditor:AutoScrollHandler");function MC(e){let t,n;function r(e){return e<20?200:e<50?400:1200}function i(){if(e){const n=.05*t;e.scrollTop+=n}}function o(e){n&&e===t||(s(),AC("startAutoScroll",e),t=e,n=setInterval(i,50))}function s(){n&&(AC("stopAutoScroll"),clearInterval(n),n=void 0,t=void 0)}return AC("createAutoScrollHandler",e),{onDrag:function(t){if(e){const n=t.clientY,{top:i,bottom:a}=e.getBoundingClientRect();if(n<i){o(-r(i-n))}else if(n>a){o(r(n-a))}else s()}},onDragEnd:function(){s()}}}var PC=(e,t,n,r)=>(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t;const jC=()=>{let e,t,n,r,i,o,s,a,l,c,u,h,f,d;function p(t){return t.getBoundingClientRect().top-(e.getBoundingClientRect?e.getBoundingClientRect().top:0)+n}function m(t){e.scrollTo?e.scrollTo(0,t):e.scrollTop=t}function g(e){c||(c=e),u=e-c,h=o(u,n,a,l),m(h),d=!0,u<l?requestAnimationFrame(g):function(){m(n+a),t&&s&&(t.setAttribute("tabindex","-1"),t.focus());"function"==typeof f&&f();c=!1,d=!1}()}return function(u,h={}){switch(l=h.duration||1e3,i=h.offset||0,f=h.callback,o=h.easing||PC,s=h.a11y||!1,typeof h.container){case"object":e=h.container;break;case"string":e=document.querySelector(h.container);break;default:e=window}switch(n=e.scrollY||e.pageYOffset||e.scrollTop,typeof u){case"number":t=void 0,s=!1,r=n+u;break;case"object":t=u,r=p(t);break;case"string":t=document.querySelector(u),r=p(t)}switch(a=r-n+i,typeof h.duration){case"number":l=h.duration;break;case"function":l=h.duration(a)}d?c=!1:requestAnimationFrame(g)}};function TC(e,t){const n=new Set(t),r=e.replace(/ \(copy( \d+)?\)$/,"");let i=e,o=1;for(;n.has(i);){i=`${r} (${"copy"+(o>1?" "+o:"")})`,o++}return i}function NC(e,t){const n=t-"...".length;return e.length>t?e.substr(0,n)+"...":e}function IC(e,t,n,r){const i=Xs(n),o=kn.getIn(e,i);if(Array.isArray(o)){const e=parseInt(Ws(n),10);return r.map(((t,n)=>({op:"add",path:kn.compileJSONPointer(i.concat(e+n)),value:t.value})))}{const e=Ws(n),o=ja(t,i),s=Ia(o,e,!0);return[...r.map((e=>{const t=TC(e.key,o);return{op:"add",path:kn.compileJSONPointer(i.concat(t)),value:e.value}})),...s.map((e=>VC(i,e)))]}}function DC(e,t,n){const r=kn.getIn(e,t);if(Array.isArray(r)){const e=r.length;return n.map(((n,r)=>({op:"add",path:kn.compileJSONPointer(t.concat(e+r)),value:n.value})))}return n.map((e=>{const n=TC(e.key,Object.keys(r));return{op:"add",path:kn.compileJSONPointer(t.concat(n)),value:e.value}}))}function RC(e,t,n,r){const i=TC(r,t.filter((e=>e!==n))),o=Ia(t,n,!1);return[{op:"move",from:kn.compileJSONPointer(e.concat(n)),path:kn.compileJSONPointer(e.concat(i))},...o.map((t=>VC(e,t)))]}function LC(e,t,n,r){if(n.type===Wa){const e=Un(r),i=Xs(n.focusPath);return RC(i,ja(t,i),Ws(n.focusPath),"string"==typeof e?e:r)}if(n.type===Ua||n.type===Ja&&ea(n.focusPath))try{return[{op:"replace",path:kn.compileJSONPointer(n.focusPath),value:Jn(r,Wn)}]}catch(e){return[{op:"replace",path:kn.compileJSONPointer(n.focusPath),value:r}]}if(n.type===Ja){const i=FC(r);return function(e,t,n,r){const i=Xs(Qs(n)),o=kn.getIn(e,i);if(Array.isArray(o)){const e=Qs(n),t=e?parseInt(Ws(e),10):0;return[...zC(n),...r.map(((e,n)=>({op:"add",path:kn.compileJSONPointer(i.concat(n+t)),value:e.value})))]}{const e=Ws(n),i=Xs(e),o=Ws(e),s=ja(t,i),a=Ia(s,o,!1),l=new Set(n.map((e=>Ws(e)))),c=s.filter((e=>!l.has(e)));return[...zC(n),...r.map((e=>{const t=TC(e.key,c);return{op:"add",path:kn.compileJSONPointer(i.concat(t)),value:e.value}})),...a.map((e=>VC(i,e)))]}}(e,t,n.paths,i)}if(n.type===qa){const i=FC(r),o=n.focusPath,s=Xs(o),a=kn.getIn(e,s);if(Array.isArray(a)){const n=Ws(o);return IC(e,t,s.concat([n+1]),i)}{const n=Ws(o),r=ja(t,s);if(ea(r)||Ws(r)===n)return DC(e,s,i);{const o=r.indexOf(n),a=r[o+1];return IC(e,t,s.concat([a]),i)}}}if(n.type===Ha){const i=FC(r),o=n.focusPath,s=kn.getIn(e,o);if(Array.isArray(s)){return IC(e,t,o.concat([0]),i)}{const n=ja(t,o);if(ea(n))return DC(e,o,i);{const r=Qs(n);return IC(e,t,o.concat([r]),i)}}}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(n))}function BC(e,t,n){if("object"===n)return{};if("array"===n)return[];if("structure"===n){const n=Ka(t),i=kn.getIn(e,n);if(Array.isArray(i)&&!ea(i)){const e=Qs(i);return jn(e)?(r=e=>Array.isArray(e)?[]:Pn(e)?void 0:"",ps(e,5,r="function"==typeof r?r:void 0)):""}}var r;return""}function zC(e){return e.map((e=>({op:"remove",path:kn.compileJSONPointer(e)}))).reverse()}function VC(e,t){return{op:"move",from:kn.compileJSONPointer(e.concat(t)),path:kn.compileJSONPointer(e.concat(t))}}function FC(e){const t=/^\s*{/.test(e),n=/^\s*\[/.test(e),r=Un(e),i=void 0!==r?r:Jn(e,Wn);return t&&Pn(i)||n&&Array.isArray(i)?[{key:"New item",value:i}]:Array.isArray(i)?i.map(((e,t)=>({key:"New item "+t,value:e}))):Pn(i)?Object.keys(i).map((e=>({key:e,value:i[e]}))):[{key:"New item",value:i}]}function qC(e,t,n){if(n.type===Wa){const r=Xs(n.focusPath),i=RC(r,ja(t,r),Ws(n.focusPath),"");return{operations:i,newSelection:tl(e,0,i)}}if(n.type===Ua){return{operations:[{op:"replace",path:kn.compileJSONPointer(n.focusPath),value:""}],newSelection:n}}if(n.type===Ja){const r=zC(n.paths),i=Ws(n.paths);if(ea(i)){return{operations:[{op:"replace",path:"",value:""}],newSelection:al(e,t,{type:Ua,path:[]})}}const o=Xs(i),s=kn.getIn(e,o);if(Array.isArray(s)){const i=Ws(Qs(n.paths));return{operations:r,newSelection:al(e,t,0===i?{type:Ha,path:o}:{type:qa,path:o.concat([i-1])})}}{const i=ja(t,o),s=Ws(Qs(n.paths)),a=i.indexOf(s),l=i[a-1];return{operations:r,newSelection:al(e,t,0===a?{type:Ha,path:o}:{type:qa,path:o.concat([l])})}}}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(n))}function HC(e,t,n){const r=t,i=function(e,t){let n={};return t.forEach((t=>{const r=t.path;if(!kn.existsIn(n,r)){const t=kn.getIn(e,r);n=kn.setIn(n,r,Array.isArray(t)?[]:{},!0)}n=kn.setIn(n,QC(t),t,!0)})),n}(e,r),o=n&&n.activeItem?QC(n.activeItem):void 0,s=o&&kn.existsIn(i,o)?kn.getIn(i,o):r[0],a=r.findIndex((e=>{return n=s,(t=e).start===n.start&&t.field===n.field&&ta(t.path,n.path);var t,n}));return{items:i,itemsWithActive:i&&s&&-1!==a?kn.setIn(i,GC(s),!0):i,flatItems:r,count:r.length,activeItem:s,activeIndex:a}}function WC(e,t,n,r=1/0){const i=[],o=[];function s(e){i.length<r&&i.push(e)}if("string"==typeof e&&""!==e){!function e(t,n,a){if(Array.isArray(n)){const s=o.length;o.push(0);for(let l=0;l<n.length;l++)if(o[s]=l,e(t,n[l],a?a[l]:void 0),i.length>=r)return;o.pop()}else if(null!==n&&"object"==typeof n){const l=o.length;o.push(0);const c=a?a[Ht]:Object.keys(n);for(const u of c)if(o[l]=u,UC(u,t,o,Wt,s),e(t,n[u],a?a[u]:void 0),i.length>=r)return;o.pop()}else UC(n,t,o,Ut,s)}(e.toLowerCase(),t,n)}return i}function UC(e,t,n,r,i){const o=String(e).toLowerCase();let s=0,a=-1,l=-1;do{l=o.indexOf(t,a),-1!==l&&(a=l+t.length,i({path:n.slice(0),field:r,fieldIndex:s,start:l,end:a,active:!1}),s++)}while(-1!==l)}function JC(e,t,n,r){return e.substring(0,n)+t+e.substring(r)}function KC(e,t,n){let r=e;var i,o;return o=e=>{r=JC(r,t,e.start,e.end)},(vr(i=n)?Js:Gs)(i,Us(o)),r}function GC(e){return e.path.concat(e.field,e.fieldIndex,"active")}function QC(e){return e.path.concat(e.field,e.fieldIndex)}function YC(e){let t,n,r,i,o,s,a,l,c;return s=new Uc({props:{data:wc}}),{c(){t=O("div"),n=O("div"),r=A(e[0]),i=M(),o=O("button"),Le(s.$$.fragment),I(n,"class","jse-title svelte-d01h2s"),I(o,"type","button"),I(o,"class","jse-close svelte-d01h2s"),I(t,"class","jse-header svelte-d01h2s")},m(u,h){S(u,t,h),x(t,n),x(n,r),x(t,i),x(t,o),Be(s,o,null),a=!0,l||(c=j(o,"click",e[1]),l=!0)},p(e,[t]){(!a||1&t)&&B(r,e[0])},i(e){a||(Oe(s.$$.fragment,e),a=!0)},o(e){Ee(s.$$.fragment,e),a=!1},d(e){e&&C(t),ze(s),l=!1,c()}}}function XC(e,t,n){let{title:r="Modal"}=t;const{close:i}=oe("simple-modal");return e.$$set=e=>{"title"in e&&n(0,r=e.title)},[r,i]}class ZC extends Fe{constructor(e){super(),Ve(this,e,XC,YC,l,{title:0})}}function e_(t){let n,r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,E,P;return r=new ZC({props:{title:"Copying and pasting"}}),{c(){n=O("div"),Le(r.$$.fragment),i=M(),o=O("div"),s=O("div"),s.textContent="These actions are unavailable via the menu. Please use:",a=M(),l=O("div"),c=O("div"),u=O("div"),u.textContent=`${t[1]}+C`,h=A("\n        for copy"),f=M(),d=O("div"),p=O("div"),p.textContent=`${t[1]}+X`,m=A("\n        for cut"),g=M(),v=O("div"),y=O("div"),y.textContent=`${t[1]}+V`,w=A("\n        for paste"),b=M(),$=O("div"),k=O("button"),k.textContent="Close",I(u,"class","jse-key svelte-t45ah0"),I(c,"class","jse-shortcut"),I(p,"class","jse-key svelte-t45ah0"),I(d,"class","jse-shortcut"),I(y,"class","jse-key svelte-t45ah0"),I(v,"class","jse-shortcut"),I(l,"class","jse-shortcuts svelte-t45ah0"),I(k,"type","button"),I(k,"class","jse-primary svelte-t45ah0"),I($,"class","jse-actions svelte-t45ah0"),I(o,"class","jse-contents svelte-t45ah0"),I(n,"class","jse-modal jse-copy-paste svelte-t45ah0")},m(e,C){S(e,n,C),Be(r,n,null),x(n,i),x(n,o),x(o,s),x(o,a),x(o,l),x(l,c),x(c,u),x(c,h),x(l,f),x(l,d),x(d,p),x(d,m),x(l,g),x(l,v),x(v,y),x(v,w),x(o,b),x(o,$),x($,k),_=!0,E||(P=j(k,"click",t[0]),E=!0)},p:e,i(e){_||(Oe(r.$$.fragment,e),_=!0)},o(e){Ee(r.$$.fragment,e),_=!1},d(e){e&&C(n),ze(r),E=!1,P()}}}function t_(e){const{close:t}=oe("simple-modal");return[t,Dl?"‚åò":"Ctrl"]}class n_ extends Fe{constructor(e){super(),Ve(this,e,t_,e_,l,{})}}function r_(t){let n;return{c(){n=O("div"),n.textContent="Repair invalid JSON, then click apply",I(n,"slot","left"),I(n,"class","jse-info svelte-gz09vf")},m(e,t){S(e,n,t)},p:e,d(e){e&&C(n)}}}function i_(e){let t,n;return t=new Zc({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:e[5]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.actions=e[5]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function o_(e){let t,n;return t=new Zc({props:{type:"error",icon:vc,message:`Cannot parse JSON: ${e[2].message}`,actions:e[6]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.message=`Cannot parse JSON: ${e[2].message}`),64&n&&(r.actions=e[6]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function s_(e){let t,n,r,i,o,s,a,l,c,u;n=new Au({props:{items:e[7],$$slots:{left:[r_]},$$scope:{ctx:e}}});const h=[o_,i_],f=[];function d(e,t){return e[2]?0:1}return i=d(e),o=f[i]=h[i](e),{c(){t=O("div"),Le(n.$$.fragment),r=M(),o.c(),s=M(),a=O("textarea"),a.value=e[0],a.readOnly=e[1],I(a,"class","jse-json-text svelte-gz09vf"),I(a,"autocomplete","off"),I(a,"autocapitalize","off"),I(a,"spellcheck","false"),I(t,"class","jse-json-repair-component svelte-gz09vf")},m(o,h){S(o,t,h),Be(n,t,null),x(t,r),f[i].m(t,null),x(t,s),x(t,a),e[21](a),e[22](t),l=!0,c||(u=j(a,"input",e[8]),c=!0)},p(e,[r]){const c={};128&r&&(c.items=e[7]),536870912&r&&(c.$$scope={dirty:r,ctx:e}),n.$set(c);let u=i;i=d(e),i===u?f[i].p(e,r):(Ce(),Ee(f[u],1,1,(()=>{f[u]=null})),_e(),o=f[i],o?o.p(e,r):(o=f[i]=h[i](e),o.c()),Oe(o,1),o.m(t,s)),(!l||1&r)&&(a.value=e[0]),(!l||2&r)&&(a.readOnly=e[1])},i(e){l||(Oe(n.$$.fragment,e),Oe(o),l=!0)},o(e){Ee(n.$$.fragment,e),Ee(o),l=!1},d(r){r&&C(t),ze(n),f[i].d(),e[21](null),e[22](null),c=!1,u()}}}function a_(e,t,n){let r,i,o,s,a,l,c,u,{text:h=""}=t,{readOnly:f=!1}=t,{onParse:d}=t,{onRepair:p}=t,{onChange:m=null}=t,{onApply:g}=t,{onCancel:v}=t,{onFocus:y}=t,{onBlur:w}=t,{onRenderMenu:b=Yr}=t;const x=Et("jsoneditor:JSONRepair");let $,k;function S(){g(h)}return $c({onMount:te,onDestroy:ne,getWindow:()=>Al($),hasFocus:()=>Ml($),onFocus:()=>{y&&y()},onBlur:()=>{w&&w()}}),e.$$set=e=>{"text"in e&&n(0,h=e.text),"readOnly"in e&&n(1,f=e.readOnly),"onParse"in e&&n(9,d=e.onParse),"onRepair"in e&&n(10,p=e.onRepair),"onChange"in e&&n(11,m=e.onChange),"onApply"in e&&n(12,g=e.onApply),"onCancel"in e&&n(13,v=e.onCancel),"onFocus"in e&&n(14,y=e.onFocus),"onBlur"in e&&n(15,w=e.onBlur),"onRenderMenu"in e&&n(16,b=e.onRenderMenu)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=function(e){try{return d(e),null}catch(t){return Qn(e,t.message)}}(h)),1&e.$$.dirty&&n(19,i=function(e){try{return p(e),!0}catch(e){return!1}}(h)),4&e.$$.dirty&&x("error",r),8192&e.$$.dirty&&n(20,o=[{space:!0},{icon:wc,title:"Cancel repair",className:"jse-cancel",onClick:v}]),1114112&e.$$.dirty&&n(7,s=b("repair",o)||o),917504&e.$$.dirty&&n(6,c=i?[a,l]:[a]),2&e.$$.dirty&&n(5,u=[{icon:ec,text:"Apply",title:"Apply fixed JSON",disabled:f,onClick:S}])},n(17,a={icon:Kl,text:"Show me",title:"Scroll to the error location",onClick:function(){k&&r&&null!=r.position&&(k.setSelectionRange(r.position,r.position),setTimeout((()=>{k.focus()})))}}),n(18,l={icon:yc,text:"Auto repair",title:"Automatically repair JSON",onClick:function(){try{n(0,h=p(h)),m&&m(h)}catch(e){}}}),[h,f,r,$,k,u,c,s,function(e){x("handleChange");const t=e.target.value;h!==t&&(n(0,h=t),m&&m(h))},d,p,m,g,v,y,w,b,a,l,i,o,function(e){le[e?"unshift":"push"]((()=>{k=e,n(4,k)}))},function(e){le[e?"unshift":"push"]((()=>{$=e,n(3,$)}))}]}class l_ extends Fe{constructor(e){super(),Ve(this,e,a_,s_,l,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onFocus:14,onBlur:15,onRenderMenu:16})}}function c_(e){let t,n,r,i;function o(t){e[9](t)}let s={onParse:e[1],onRepair:e[2],onApply:e[6],onCancel:e[7],onFocus:e[3],onBlur:e[4],onRenderMenu:e[5]};return void 0!==e[0]&&(s.text=e[0]),n=new l_({props:s}),le.push((()=>Re(n,"text",o))),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-modal jse-repair svelte-1ffm3pm")},m(e,r){S(e,t,r),Be(n,t,null),i=!0},p(e,[t]){const i={};2&t&&(i.onParse=e[1]),4&t&&(i.onRepair=e[2]),8&t&&(i.onFocus=e[3]),16&t&&(i.onBlur=e[4]),32&t&&(i.onRenderMenu=e[5]),!r&&1&t&&(r=!0,i.text=e[0],ge((()=>r=!1))),n.$set(i)},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n)}}}function u_(e,t,n){let{text:r}=t,{onParse:i}=t,{onRepair:o}=t,{onApply:s}=t,{onFocus:a}=t,{onBlur:l}=t,{onRenderMenu:c}=t;const{close:u}=oe("simple-modal");return e.$$set=e=>{"text"in e&&n(0,r=e.text),"onParse"in e&&n(1,i=e.onParse),"onRepair"in e&&n(2,o=e.onRepair),"onApply"in e&&n(8,s=e.onApply),"onFocus"in e&&n(3,a=e.onFocus),"onBlur"in e&&n(4,l=e.onBlur),"onRenderMenu"in e&&n(5,c=e.onRenderMenu)},[r,i,o,a,l,c,function(e){u(),s(e)},function(){u()},s,function(e){r=e,n(0,r)}]}class h_ extends Fe{constructor(e){super(),Ve(this,e,u_,c_,l,{text:0,onParse:1,onRepair:2,onApply:8,onFocus:3,onBlur:4,onRenderMenu:5})}}function f_(e,t,n){const r=e.slice();return r[10]=t[n],r}const d_=e=>({}),p_=e=>({});function m_(e){let t,n;return t=new Uc({props:{data:e[10].icon}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[10].icon),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function g_(e){let t,n,r,i,o,s,a,l,c,u,h=e[10].text+"",f=e[10].icon&&m_(e);function d(){return e[8](e[10])}return{c(){t=O("li"),n=O("button"),f&&f.c(),r=M(),i=A(h),a=M(),I(n,"type","button"),I(n,"title",o=e[10].title),n.disabled=s=e[10].disabled,I(n,"class","svelte-mojfmz"),I(t,"class","svelte-mojfmz")},m(e,o){S(e,t,o),x(t,n),f&&f.m(n,null),x(n,r),x(n,i),x(t,a),l=!0,c||(u=j(n,"click",d),c=!0)},p(t,a){(e=t)[10].icon?f?(f.p(e,a),1&a&&Oe(f,1)):(f=m_(e),f.c(),Oe(f,1),f.m(n,r)):f&&(Ce(),Ee(f,1,1,(()=>{f=null})),_e()),(!l||1&a)&&h!==(h=e[10].text+"")&&B(i,h),(!l||1&a&&o!==(o=e[10].title))&&I(n,"title",o),(!l||1&a&&s!==(s=e[10].disabled))&&(n.disabled=s)},i(e){l||(Oe(f),l=!0)},o(e){Ee(f),l=!1},d(e){e&&C(t),f&&f.d(),c=!1,u()}}}function v_(e){let t,n,r,i,s,a,l,u,p,m;const g=e[7].defaultItem,v=c(g,e,e[6],p_);i=new Uc({props:{data:Xl}});let y=e[0],w=[];for(let t=0;t<y.length;t+=1)w[t]=g_(f_(e,y,t));const b=e=>Ee(w[e],1,1,(()=>{w[e]=null}));return{c(){t=O("div"),v&&v.c(),n=M(),r=O("button"),Le(i.$$.fragment),s=M(),a=O("div"),l=O("ul");for(let e=0;e<w.length;e+=1)w[e].c();I(r,"type","button"),I(r,"class","jse-open-dropdown svelte-mojfmz"),I(r,"data-type","jse-open-dropdown"),H(r,"jse-visible",e[3]),I(l,"class","svelte-mojfmz"),I(a,"class","jse-dropdown-items svelte-mojfmz"),V(a,"width",e[2]),H(a,"jse-visible",e[3]),I(t,"class","jse-dropdown-button svelte-mojfmz"),I(t,"title",e[1])},m(o,c){S(o,t,c),v&&v.m(t,null),x(t,n),x(t,r),Be(i,r,null),x(t,s),x(t,a),x(a,l);for(let e=0;e<w.length;e+=1)w[e].m(l,null);u=!0,p||(m=[j(r,"click",e[4]),j(t,"click",e[5])],p=!0)},p(e,[n]){if(v&&v.p&&(!u||64&n)&&f(v,g,e,e[6],u?h(g,e[6],n,d_):d(e[6]),p_),8&n&&H(r,"jse-visible",e[3]),1&n){let t;for(y=e[0],t=0;t<y.length;t+=1){const r=f_(e,y,t);w[t]?(w[t].p(r,n),Oe(w[t],1)):(w[t]=g_(r),w[t].c(),Oe(w[t],1),w[t].m(l,null))}for(Ce(),t=y.length;t<w.length;t+=1)b(t);_e()}(!u||4&n)&&V(a,"width",e[2]),8&n&&H(a,"jse-visible",e[3]),(!u||2&n)&&I(t,"title",e[1])},i(e){if(!u){Oe(v,e),Oe(i.$$.fragment,e);for(let e=0;e<y.length;e+=1)Oe(w[e]);u=!0}},o(e){Ee(v,e),Ee(i.$$.fragment,e),w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)Ee(w[e]);u=!1},d(e){e&&C(t),v&&v.d(e),ze(i),_(w,e),p=!1,o(m)}}}function y_(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:o=[]}=t,{title:s}=t,{width:a="120px"}=t,l=!1;function c(){n(3,l=!1)}function u(e){"Escape"===Rl(e)&&(e.preventDefault(),n(3,l=!1))}te((()=>{document.addEventListener("click",c),document.addEventListener("keydown",u)})),ne((()=>{document.removeEventListener("click",c),document.removeEventListener("keydown",u)}));return e.$$set=e=>{"items"in e&&n(0,o=e.items),"title"in e&&n(1,s=e.title),"width"in e&&n(2,a=e.width),"$$scope"in e&&n(6,i=e.$$scope)},[o,s,a,l,function(){const e=l;setTimeout((()=>n(3,l=!e)))},c,i,r,e=>e.onClick()]}class w_ extends Fe{constructor(e){super(),Ve(this,e,y_,v_,l,{items:0,title:1,width:2})}}
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */var b_={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]},x_={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]},$_={prefix:"far",iconName:"square",icon:[448,512,[9723,9724,61590,9632],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},k_={prefix:"far",iconName:"square-check",icon:[448,512,[9989,61510,9745,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]};function S_(e){let t,n,r,i,o,s,a;return n=new Uc({props:{data:dc}}),{c(){t=O("button"),Le(n.$$.fragment),r=A(" Edit value"),I(t,"type","button"),I(t,"slot","defaultItem"),I(t,"title","Edit the value (Double-click on the value)"),t.disabled=i=!e[2],I(t,"class","svelte-1yai37q")},m(i,l){S(i,t,l),Be(n,t,null),x(t,r),o=!0,s||(a=j(t,"click",e[18]),s=!0)},p(e,n){(!o||4&n[0]&&i!==(i=!e[2]))&&(t.disabled=i)},i(e){o||(Oe(n.$$.fragment,e),o=!0)},o(e){Ee(n.$$.fragment,e),o=!1},d(e){e&&C(t),ze(n),s=!1,a()}}}function C_(e){let t,n,r,i,o,s,a;return n=new Uc({props:{data:pc}}),{c(){t=O("button"),Le(n.$$.fragment),r=A(" Cut"),I(t,"type","button"),I(t,"slot","defaultItem"),I(t,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),t.disabled=i=!e[1],I(t,"class","svelte-1yai37q")},m(i,l){S(i,t,l),Be(n,t,null),x(t,r),o=!0,s||(a=j(t,"click",e[19]),s=!0)},p(e,n){(!o||2&n[0]&&i!==(i=!e[1]))&&(t.disabled=i)},i(e){o||(Oe(n.$$.fragment,e),o=!0)},o(e){Ee(n.$$.fragment,e),o=!1},d(e){e&&C(t),ze(n),s=!1,a()}}}function __(e){let t,n,r,i,o,s,a;return n=new Uc({props:{data:sc}}),{c(){t=O("button"),Le(n.$$.fragment),r=A(" Copy"),I(t,"type","button"),I(t,"slot","defaultItem"),I(t,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),t.disabled=i=!e[1],I(t,"class","svelte-1yai37q")},m(i,l){S(i,t,l),Be(n,t,null),x(t,r),o=!0,s||(a=j(t,"click",e[20]),s=!0)},p(e,n){(!o||2&n[0]&&i!==(i=!e[1]))&&(t.disabled=i)},i(e){o||(Oe(n.$$.fragment,e),o=!0)},o(e){Ee(n.$$.fragment,e),o=!1},d(e){e&&C(t),ze(n),s=!1,a()}}}function O_(t){let n,r,i,o,s,a,l;return o=new Uc({props:{data:x_}}),{c(){n=O("div"),r=O("div"),i=O("div"),Le(o.$$.fragment),s=M(),a=O("div"),a.textContent="Tip: you can open this context menu via right-click or with Ctrl+Q",I(i,"class","svelte-1yai37q"),I(a,"class","svelte-1yai37q"),I(r,"class","jse-tip svelte-1yai37q"),I(n,"class","jse-row svelte-1yai37q")},m(e,t){S(e,n,t),x(n,r),x(r,i),Be(o,i,null),x(r,s),x(r,a),l=!0},p:e,i(e){l||(Oe(o.$$.fragment,e),l=!0)},o(e){Ee(o.$$.fragment,e),l=!1},d(e){e&&C(n),ze(o)}}}function E_(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,E,P,T,N,D,R,L,z,V,F,q,H,W,U,J,K,G,Q,Y,X,Z,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he,fe,de,pe,me,ge,ve,ye,we,be,xe,$e,ke,Se,Ae,Me,Pe,je,Te,Ne,Ie,De,Re,Ve,Fe,qe,He,We,Ue,Je,Ke,Ge,Qe,Ye,Xe,Ze,et,tt,nt,rt,it,ot;i=new Uc({props:{data:dc}}),c=new w_({props:{width:"11em",items:e[8],$$slots:{defaultItem:[S_]},$$scope:{ctx:e}}}),p=new w_({props:{width:"10em",items:e[7],$$slots:{defaultItem:[C_]},$$scope:{ctx:e}}}),g=new w_({props:{width:"12em",items:e[6],$$slots:{defaultItem:[__]},$$scope:{ctx:e}}}),w=new Uc({props:{data:fc}}),D=new Uc({props:{data:wc}}),F=new Uc({props:{data:ic}}),J=new Uc({props:{data:ac}}),X=new Uc({props:{data:Gl}}),re=new Uc({props:{data:cc}}),Ke=new Uc({props:{data:gc}}),Ze=new Uc({props:{data:mc}});let st=e[0]&&O_();return{c(){t=O("div"),n=O("div"),r=O("button"),Le(i.$$.fragment),s=A(" Edit key"),l=M(),Le(c.$$.fragment),u=M(),h=O("div"),f=M(),d=O("div"),Le(p.$$.fragment),m=M(),Le(g.$$.fragment),v=M(),y=O("button"),Le(w.$$.fragment),b=A(" Paste"),k=M(),_=O("div"),E=M(),P=O("div"),T=O("div"),N=O("button"),Le(D.$$.fragment),R=A(" Remove"),z=M(),V=O("button"),Le(F.$$.fragment),q=A(" Duplicate"),W=M(),U=O("button"),Le(J.$$.fragment),K=A(" Extract"),Q=M(),Y=O("button"),Le(X.$$.fragment),Z=A(" Sort"),te=M(),ne=O("button"),Le(re.$$.fragment),ie=A(" Transform"),se=M(),ae=O("div"),le=O("div"),ce=A(e[13]),ue=A(":"),he=M(),fe=O("button"),de=O("span"),pe=O("span"),pe.textContent="+",me=A(" Structure"),ye=M(),we=O("button"),be=O("span"),be.textContent="{}",xe=A(" Object"),Se=M(),Ae=O("button"),Me=O("span"),Me.textContent="[]",Pe=A(" Array"),Ne=M(),Ie=O("button"),De=O("span"),De.innerHTML='<span class="jse-quote svelte-1yai37q">&quot;</span>',Re=A(" Value"),qe=M(),He=O("div"),We=M(),Ue=O("div"),Je=O("button"),Le(Ke.$$.fragment),Ge=A(" Insert before"),Ye=M(),Xe=O("button"),Le(Ze.$$.fragment),et=A(" Insert after"),nt=M(),st&&st.c(),I(r,"type","button"),I(r,"title","Edit the key (Double-click on the key)"),r.disabled=a=!e[14],I(r,"class","svelte-1yai37q"),I(n,"class","jse-row svelte-1yai37q"),I(h,"class","jse-separator svelte-1yai37q"),I(y,"type","button"),I(y,"title","Paste clipboard contents (Ctrl+V)"),y.disabled=$=!e[3],I(y,"class","svelte-1yai37q"),I(d,"class","jse-row svelte-1yai37q"),I(_,"class","jse-separator svelte-1yai37q"),I(N,"type","button"),I(N,"title","Remove selected contents (Delete)"),N.disabled=L=!e[1],I(N,"class","svelte-1yai37q"),I(V,"type","button"),I(V,"title","Duplicate selected contents (Ctrl+D)"),V.disabled=H=!e[16],I(V,"class","svelte-1yai37q"),I(U,"type","button"),I(U,"title","Extract selected contents"),U.disabled=G=!e[15],I(U,"class","svelte-1yai37q"),I(Y,"type","button"),I(Y,"title","Sort array or object contents"),Y.disabled=ee=!e[1],I(Y,"class","svelte-1yai37q"),I(ne,"type","button"),I(ne,"title","Transform array or object contents (filter, sort, project)"),ne.disabled=oe=!e[1],I(ne,"class","svelte-1yai37q"),I(T,"class","jse-column svelte-1yai37q"),I(le,"class","jse-label svelte-1yai37q"),I(pe,"class","jse-plus svelte-1yai37q"),I(de,"class","jse-insert svelte-1yai37q"),I(fe,"type","button"),I(fe,"title",ge=e[13]+" structure"),fe.disabled=ve=!e[12],I(fe,"class","svelte-1yai37q"),I(be,"class","jse-insert svelte-1yai37q"),I(we,"type","button"),I(we,"title",$e=e[13]+" object"),we.disabled=ke=!e[11],I(we,"class","svelte-1yai37q"),I(Me,"class","jse-insert svelte-1yai37q"),I(Ae,"type","button"),I(Ae,"title",je=e[13]+" array"),Ae.disabled=Te=!e[10],I(Ae,"class","svelte-1yai37q"),I(De,"class","jse-insert svelte-1yai37q"),I(Ie,"type","button"),I(Ie,"title",Ve=e[13]+" value"),Ie.disabled=Fe=!e[9],I(Ie,"class","svelte-1yai37q"),I(ae,"class","jse-column svelte-1yai37q"),I(P,"class","jse-row svelte-1yai37q"),I(He,"class","jse-separator svelte-1yai37q"),I(Je,"type","button"),I(Je,"title","Select area before current entry to insert or paste contents"),Je.disabled=Qe=!e[1]||e[4],I(Je,"class","svelte-1yai37q"),I(Xe,"type","button"),I(Xe,"title","Select area after current entry to insert or paste contents"),Xe.disabled=tt=!e[1]||e[4],I(Xe,"class","svelte-1yai37q"),I(Ue,"class","jse-row svelte-1yai37q"),I(t,"class","jse-contextmenu svelte-1yai37q")},m(o,a){S(o,t,a),x(t,n),x(n,r),Be(i,r,null),x(r,s),x(n,l),Be(c,n,null),x(t,u),x(t,h),x(t,f),x(t,d),Be(p,d,null),x(d,m),Be(g,d,null),x(d,v),x(d,y),Be(w,y,null),x(y,b),x(t,k),x(t,_),x(t,E),x(t,P),x(P,T),x(T,N),Be(D,N,null),x(N,R),x(T,z),x(T,V),Be(F,V,null),x(V,q),x(T,W),x(T,U),Be(J,U,null),x(U,K),x(T,Q),x(T,Y),Be(X,Y,null),x(Y,Z),x(T,te),x(T,ne),Be(re,ne,null),x(ne,ie),x(P,se),x(P,ae),x(ae,le),x(le,ce),x(le,ue),x(ae,he),x(ae,fe),x(fe,de),x(de,pe),x(fe,me),x(ae,ye),x(ae,we),x(we,be),x(we,xe),x(ae,Se),x(ae,Ae),x(Ae,Me),x(Ae,Pe),x(ae,Ne),x(ae,Ie),x(Ie,De),x(Ie,Re),x(t,qe),x(t,He),x(t,We),x(t,Ue),x(Ue,Je),Be(Ke,Je,null),x(Je,Ge),x(Ue,Ye),x(Ue,Xe),Be(Ze,Xe,null),x(Xe,et),x(t,nt),st&&st.m(t,null),e[58](t),rt=!0,it||(ot=[j(r,"click",e[17]),j(y,"click",e[21]),j(N,"click",e[22]),j(V,"click",e[23]),j(U,"click",e[24]),j(Y,"click",e[26]),j(ne,"click",e[27]),j(fe,"click",e[54]),j(we,"click",e[55]),j(Ae,"click",e[56]),j(Ie,"click",e[57]),j(Je,"click",e[28]),j(Xe,"click",e[29]),j(t,"keydown",e[30])],it=!0)},p(e,n){(!rt||16384&n[0]&&a!==(a=!e[14]))&&(r.disabled=a);const i={};256&n[0]&&(i.items=e[8]),4&n[0]|1&n[2]&&(i.$$scope={dirty:n,ctx:e}),c.$set(i);const o={};128&n[0]&&(o.items=e[7]),2&n[0]|1&n[2]&&(o.$$scope={dirty:n,ctx:e}),p.$set(o);const s={};64&n[0]&&(s.items=e[6]),2&n[0]|1&n[2]&&(s.$$scope={dirty:n,ctx:e}),g.$set(s),(!rt||8&n[0]&&$!==($=!e[3]))&&(y.disabled=$),(!rt||2&n[0]&&L!==(L=!e[1]))&&(N.disabled=L),(!rt||65536&n[0]&&H!==(H=!e[16]))&&(V.disabled=H),(!rt||32768&n[0]&&G!==(G=!e[15]))&&(U.disabled=G),(!rt||2&n[0]&&ee!==(ee=!e[1]))&&(Y.disabled=ee),(!rt||2&n[0]&&oe!==(oe=!e[1]))&&(ne.disabled=oe),(!rt||8192&n[0])&&B(ce,e[13]),(!rt||8192&n[0]&&ge!==(ge=e[13]+" structure"))&&I(fe,"title",ge),(!rt||4096&n[0]&&ve!==(ve=!e[12]))&&(fe.disabled=ve),(!rt||8192&n[0]&&$e!==($e=e[13]+" object"))&&I(we,"title",$e),(!rt||2048&n[0]&&ke!==(ke=!e[11]))&&(we.disabled=ke),(!rt||8192&n[0]&&je!==(je=e[13]+" array"))&&I(Ae,"title",je),(!rt||1024&n[0]&&Te!==(Te=!e[10]))&&(Ae.disabled=Te),(!rt||8192&n[0]&&Ve!==(Ve=e[13]+" value"))&&I(Ie,"title",Ve),(!rt||512&n[0]&&Fe!==(Fe=!e[9]))&&(Ie.disabled=Fe),(!rt||18&n[0]&&Qe!==(Qe=!e[1]||e[4]))&&(Je.disabled=Qe),(!rt||18&n[0]&&tt!==(tt=!e[1]||e[4]))&&(Xe.disabled=tt),e[0]?st?(st.p(e,n),1&n[0]&&Oe(st,1)):(st=O_(),st.c(),Oe(st,1),st.m(t,null)):st&&(Ce(),Ee(st,1,1,(()=>{st=null})),_e())},i(e){rt||(Oe(i.$$.fragment,e),Oe(c.$$.fragment,e),Oe(p.$$.fragment,e),Oe(g.$$.fragment,e),Oe(w.$$.fragment,e),Oe(D.$$.fragment,e),Oe(F.$$.fragment,e),Oe(J.$$.fragment,e),Oe(X.$$.fragment,e),Oe(re.$$.fragment,e),Oe(Ke.$$.fragment,e),Oe(Ze.$$.fragment,e),Oe(st),rt=!0)},o(e){Ee(i.$$.fragment,e),Ee(c.$$.fragment,e),Ee(p.$$.fragment,e),Ee(g.$$.fragment,e),Ee(w.$$.fragment,e),Ee(D.$$.fragment,e),Ee(F.$$.fragment,e),Ee(J.$$.fragment,e),Ee(X.$$.fragment,e),Ee(re.$$.fragment,e),Ee(Ke.$$.fragment,e),Ee(Ze.$$.fragment,e),Ee(st),rt=!1},d(n){n&&C(t),ze(i),ze(c),ze(p),ze(g),ze(w),ze(D),ze(F),ze(J),ze(X),ze(re),ze(Ke),ze(Ze),st&&st.d(),e[58](null),it=!1,o(ot)}}}function A_(e,t,n){let r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,x,$,{json:k}=t,{state:S}=t,{selection:C}=t,{showTip:_}=t,{onCloseContextMenu:O}=t,{onEditKey:E}=t,{onEditValue:A}=t,{onToggleEnforceString:M}=t,{onCut:P}=t,{onCopy:j}=t,{onPaste:T}=t,{onRemove:N}=t,{onDuplicate:I}=t,{onExtract:D}=t,{onInsertBefore:R}=t,{onInsert:L}=t,{onConvert:B}=t,{onInsertAfter:z}=t,{onSort:V}=t,{onTransform:F}=t;function q(){O(),A()}function H(){O(),M()}function W(){O(),P(!0)}function U(){O(),P(!1)}function J(){O(),j(!0)}function K(){O(),j(!1)}function G(e){O(),a?B(e):L(e)}te((()=>{setTimeout((()=>{const e=[...$.querySelectorAll("button")].find((e=>!e.disabled));e&&e.focus()}))}));return e.$$set=e=>{"json"in e&&n(31,k=e.json),"state"in e&&n(32,S=e.state),"selection"in e&&n(33,C=e.selection),"showTip"in e&&n(0,_=e.showTip),"onCloseContextMenu"in e&&n(34,O=e.onCloseContextMenu),"onEditKey"in e&&n(35,E=e.onEditKey),"onEditValue"in e&&n(36,A=e.onEditValue),"onToggleEnforceString"in e&&n(37,M=e.onToggleEnforceString),"onCut"in e&&n(38,P=e.onCut),"onCopy"in e&&n(39,j=e.onCopy),"onPaste"in e&&n(40,T=e.onPaste),"onRemove"in e&&n(41,N=e.onRemove),"onDuplicate"in e&&n(42,I=e.onDuplicate),"onExtract"in e&&n(43,D=e.onExtract),"onInsertBefore"in e&&n(44,R=e.onInsertBefore),"onInsert"in e&&n(45,L=e.onInsert),"onConvert"in e&&n(46,B=e.onConvert),"onInsertAfter"in e&&n(47,z=e.onInsertAfter),"onSort"in e&&n(48,V=e.onSort),"onTransform"in e&&n(49,F=e.onTransform)},e.$$.update=()=>{1&e.$$.dirty[1]&&n(53,r=void 0!==k),4&e.$$.dirty[1]&&n(3,i=null!=C),8&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(4,o=i&&ea(C.focusPath)),8&e.$$.dirty[0]|5&e.$$.dirty[1]&&n(51,s=i?kn.getIn(k,C.focusPath):void 0),4194308&e.$$.dirty[1]&&n(1,a=r&&null!=C&&(C.type===Ja||C.type===Wa||C.type===Ua)),18&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(16,l=r&&a&&!o),16&e.$$.dirty[0]|4194308&e.$$.dirty[1]&&n(15,c=r&&null!=C&&(C.type===Ja||C.type===Ua)&&!o),16&e.$$.dirty[0]|4194309&e.$$.dirty[1]&&n(14,u=r&&null!=C&&rl(C)&&!o&&!Array.isArray(kn.getIn(k,Xs(C.focusPath)))),5242884&e.$$.dirty[1]&&n(2,h=r&&null!=C&&rl(C)&&!jn(s)),2&e.$$.dirty[0]&&n(52,f=a),2097152&e.$$.dirty[1]&&n(13,d=f?"Convert to":"Insert"),8&e.$$.dirty[0]|2097152&e.$$.dirty[1]&&n(12,p=!f&&i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(11,m=f?ul(C)&&!Pn(s):i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(10,g=f?ul(C)&&!Array.isArray(s):i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(9,v=f?ul(C)&&jn(s):i),6&e.$$.dirty[1]&&n(50,y=null!=C&&!0===kn.getIn(S,C.focusPath.concat(Jt))),4&e.$$.dirty[0]|524288&e.$$.dirty[1]&&n(8,w=[{icon:dc,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:q,disabled:!h},{icon:y?k_:$_,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:H,disabled:!h}]),2&e.$$.dirty[0]&&n(7,b=[{icon:pc,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:W,disabled:!a},{icon:pc,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:U,disabled:!a}]),2&e.$$.dirty[0]&&n(6,x=[{icon:sc,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:J,disabled:!a},{icon:sc,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:K,disabled:!a}])},[_,a,h,i,o,$,x,b,w,v,g,m,p,d,u,c,l,function(){O(),E()},q,W,J,function(){O(),T()},function(){O(),N()},function(){O(),I()},function(){O(),D()},G,function(){O(),V()},function(){O(),F()},function(){O(),R()},function(){O(),z()},function(e){const t=Rl(e).replace(/^Command\+/,"Ctrl+");if("Up"===t||"Down"===t||"Left"===t||"Right"===t){e.preventDefault();const n=Il({allElements:Array.from($.querySelectorAll("button:not([disabled])")),currentElement:e.target,direction:t,hasPrio:e=>"jse-open-dropdown"!==e.getAttribute("data-type")});n&&n.focus()}},k,S,C,O,E,A,M,P,j,T,N,I,D,R,L,B,z,V,F,y,s,f,r,()=>G("structure"),()=>G("object"),()=>G("array"),()=>G("value"),function(e){le[e?"unshift":"push"]((()=>{$=e,n(5,$)}))}]}class M_ extends Fe{constructor(e){super(),Ve(this,e,A_,E_,l,{json:31,state:32,selection:33,showTip:0,onCloseContextMenu:34,onEditKey:35,onEditValue:36,onToggleEnforceString:37,onCut:38,onCopy:39,onPaste:40,onRemove:41,onDuplicate:42,onExtract:43,onInsertBefore:44,onInsert:45,onConvert:46,onInsertAfter:47,onSort:48,onTransform:49},null,[-1,-1,-1])}}
/*!
      Copyright (c) 2018 Jed Watson.
      Licensed under the MIT License (MIT), see
      http://jedwatson.github.io/classnames
    */var P_=xn((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&e.push(s)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var a in i)t.call(i,a)&&i[a]&&e.push(a);else e.push(i.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}));function j_(e,t,n){const r=e.slice();return r[12]=t[n],r}function T_(e){let t,n,r,i,o,s,a,l,c=e[12].start+"",u=e[12].end+"";function h(){return e[11](e[12])}return{c(){t=O("button"),n=A("show "),r=A(c),i=A("-"),o=A(u),s=M(),I(t,"type","button"),I(t,"class","jse-expand-items svelte-1knbf5w")},m(e,c){S(e,t,c),x(t,n),x(t,r),x(t,i),x(t,o),x(t,s),a||(l=j(t,"click",h),a=!0)},p(t,n){e=t,16&n&&c!==(c=e[12].start+"")&&B(r,c),16&n&&u!==(u=e[12].end+"")&&B(o,u)},d(e){e&&C(t),a=!1,l()}}}function N_(t){let n,r,i,o,s,a,l,c,u,h,f,d=t[4],p=[];for(let e=0;e<d.length;e+=1)p[e]=T_(j_(t,d,e));return{c(){n=O("div"),r=O("div"),i=O("div"),o=A("Items "),s=A(t[3]),a=A("-"),l=A(t[2]),c=M();for(let e=0;e<p.length;e+=1)p[e].c();I(i,"class","jse-text svelte-1knbf5w"),I(n,"class","jse-collapsed-items svelte-1knbf5w"),I(n,"style",u=I_(t[0].length+2)),H(n,"jse-selected",t[5])},m(e,t){S(e,n,t),x(n,r),x(r,i),x(i,o),x(i,s),x(i,a),x(i,l),x(r,c);for(let e=0;e<p.length;e+=1)p[e].m(r,null);h||(f=j(n,"mousemove",D_),h=!0)},p(e,[t]){if(8&t&&B(s,e[3]),4&t&&B(l,e[2]),19&t){let n;for(d=e[4],n=0;n<d.length;n+=1){const i=j_(e,d,n);p[n]?p[n].p(i,t):(p[n]=T_(i),p[n].c(),p[n].m(r,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=d.length}1&t&&u!==(u=I_(e[0].length+2))&&I(n,"style",u),32&t&&H(n,"jse-selected",e[5])},i:e,o:e,d(e){e&&C(n),_(p,e),h=!1,f()}}}function I_(e){return`margin-left: calc(${e} * var(--jse-indent-size))`}function D_(e){e.stopPropagation()}function R_(e,t,n){let r,i,o,s,a,{visibleSections:l}=t,{sectionIndex:c}=t,{total:u}=t,{path:h}=t,{selection:f}=t,{onExpandSection:d}=t;return e.$$set=e=>{"visibleSections"in e&&n(6,l=e.visibleSections),"sectionIndex"in e&&n(7,c=e.sectionIndex),"total"in e&&n(8,u=e.total),"path"in e&&n(0,h=e.path),"selection"in e&&n(9,f=e.selection),"onExpandSection"in e&&n(1,d=e.onExpandSection)},e.$$.update=()=>{192&e.$$.dirty&&n(10,r=l[c]),1024&e.$$.dirty&&n(3,i=r.end),448&e.$$.dirty&&n(2,o=l[c+1]?l[c+1].start:u),521&e.$$.dirty&&n(5,s=!(!f||!f.pathsMap)&&!0===f.pathsMap[kn.compileJSONPointer(h.concat(i))]),12&e.$$.dirty&&n(4,a=function(e,t){const n={start:e,end:Math.min($a(e),t)},r=Math.max(ka((e+t)/2),e),i={start:r,end:Math.min($a(r),t)},o=ka(t),s=o===t?o-Yt:o,a={start:Math.max(s,e),end:t},l=[n],c=i.start>=n.end&&i.end<=a.start;return c&&l.push(i),a.start>=(c?i.end:n.end)&&l.push(a),l}(i,o))},[h,d,o,i,a,s,l,c,u,f,r,e=>d(h,e)]}class L_ extends Fe{constructor(e){super(),Ve(this,e,R_,N_,l,{visibleSections:6,sectionIndex:7,total:8,path:0,selection:9,onExpandSection:1})}}function B_(e){let t,n,r,i,o;return n=new Uc({props:{data:Xl}}),{c(){t=O("button"),Le(n.$$.fragment),I(t,"type","button"),I(t,"class","jse-context-menu-button svelte-dol684"),I(t,"title",an),H(t,"jse-selected",e[0])},m(s,a){S(s,t,a),Be(n,t,null),r=!0,i||(o=j(t,"click",e[1]),i=!0)},p(e,[n]){1&n&&H(t,"jse-selected",e[0])},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n),i=!1,o()}}}function z_(e,t,n){let{selected:r}=t,{onContextMenu:i}=t;return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"onContextMenu"in e&&n(2,i=e.onContextMenu)},[r,function(e){let t=e.target;for(;t&&"BUTTON"!==t.nodeName;)t=t.parentNode;t&&i({anchor:t,left:0,top:0,width:mn,height:pn,offsetTop:2,offsetLeft:0,showTip:!0})},i]}class V_ extends Fe{constructor(e){super(),Ve(this,e,z_,B_,l,{selected:0,onContextMenu:2})}}function F_(e,t,n){const r=e.slice();return r[3]=t[n],r}function q_(e){let t,n,r=kl(e[3].text)+"";return{c(){t=O("span"),n=A(r),I(t,"class","jse-highlight svelte-s6kbew"),H(t,"jse-active",e[3].active)},m(e,r){S(e,t,r),x(t,n)},p(e,i){1&i&&r!==(r=kl(e[3].text)+"")&&B(n,r),1&i&&H(t,"jse-active",e[3].active)},d(e){e&&C(t)}}}function H_(e){let t,n=e[3].text+"";return{c(){t=A(n)},m(e,n){S(e,t,n)},p(e,r){1&r&&n!==(n=e[3].text+"")&&B(t,n)},d(e){e&&C(t)}}}function W_(e){let t;function n(e,t){return"normal"===e[3].type?H_:q_}let r=n(e),i=r(e);return{c(){i.c(),t=P()},m(e,n){i.m(e,n),S(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&C(t)}}}function U_(t){let n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=W_(F_(t,r,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=P()},m(e,t){for(let n=0;n<i.length;n+=1)i[n].m(e,t);S(e,n,t)},p(e,[t]){if(1&t){let o;for(r=e[0],o=0;o<r.length;o+=1){const s=F_(e,r,o);i[o]?i[o].p(s,t):(i[o]=W_(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:e,o:e,d(e){_(i,e),e&&C(n)}}}function J_(e,t,n){let r,{text:i}=t,{searchResult:o}=t;return e.$$set=e=>{"text"in e&&n(1,i=e.text),"searchResult"in e&&n(2,o=e.searchResult)},e.$$.update=()=>{6&e.$$.dirty&&n(0,r=function(e,t){const n=[];let r=0;for(const i of t){const t=e.slice(r,i.start);""!==t&&n.push({type:"normal",text:t,active:!1});const o=e.slice(i.start,i.end);n.push({type:"highlight",text:o,active:i.active}),r=i.end}const i=Ws(t);return i.end<e.length&&n.push({type:"normal",text:e.slice(i.end),active:!1}),n}(String(i),o))},[r,i,o]}class K_ extends Fe{constructor(e){super(),Ve(this,e,J_,U_,a,{text:1,searchResult:2})}}function G_(t){let n,r,i,s;return{c(){n=O("div"),I(n,"class",r=p(P_("jse-editable-div",t[2],{"jse-short-text":t[0]}))+" svelte-rw77oa"),I(n,"contenteditable","true"),I(n,"spellcheck","false")},m(e,r){S(e,n,r),t[13](n),i||(s=[j(n,"input",t[3]),j(n,"keydown",t[4]),j(n,"paste",t[5]),j(n,"blur",t[6])],i=!0)},p(e,[t]){5&t&&r!==(r=p(P_("jse-editable-div",e[2],{"jse-short-text":e[0]}))+" svelte-rw77oa")&&I(n,"class",r)},i:e,o:e,d(e){e&&C(n),t[13](null),i=!1,o(s)}}}function Q_(e,t,n){const r=Et("jsoneditor:EditableDiv");let i,{value:o}=t,{shortText:s=!1}=t,{onChange:a}=t,{onCancel:l}=t,{onFind:c}=t,{onPaste:u=Yr}=t,{onValueClass:h=(()=>"")}=t,f=h(o),d=!1;function p(){return function(e){return e.replace(/\n$/,"")}(i.innerText)}function m(e){n(1,i.innerText=kl(e),i)}return te((()=>{r("onMount",{value:o}),m(o),setTimeout((()=>El(i)))})),ne((()=>{const e=p();r("onDestroy",{closed:d,value:o,newValue:e}),d||e===o||a(e,gn)})),e.$$set=e=>{"value"in e&&n(7,o=e.value),"shortText"in e&&n(0,s=e.shortText),"onChange"in e&&n(8,a=e.onChange),"onCancel"in e&&n(9,l=e.onCancel),"onFind"in e&&n(10,c=e.onFind),"onPaste"in e&&n(11,u=e.onPaste),"onValueClass"in e&&n(12,h=e.onValueClass)},[s,i,f,function(){const e=p();""===e&&m(""),n(2,f=h(e))},function(e){e.stopPropagation();const t=Rl(e).replace(/^Command\+/,"Ctrl+");if("Escape"===t&&(d=!0,l()),"Enter"===t||"Tab"===t){d=!0;const e=p();a(e,yn)}"Ctrl+F"===t&&(e.preventDefault(),c(!1)),"Ctrl+H"===t&&(e.preventDefault(),c(!0))},function(e){if(!u)return;const t=e.clipboardData.getData("text/plain");u(t)},function(){const e=document.hasFocus(),t=p();r("handleBlur",{hasFocus:e,closed:d,value:o,newValue:t}),document.hasFocus()&&!d&&(d=!0,t!==o?a(t,vn):l())},o,a,l,c,u,h,function(e){le[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class Y_ extends Fe{constructor(e){super(),Ve(this,e,Q_,G_,l,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}function X_(e){let t,n,r,i,o,s,a;const l=[tO,eO],c=[];function u(e,t){return e[1]?0:1}return n=u(e),r=c[n]=l[n](e),{c(){t=O("div"),r.c(),I(t,"data-type","selectable-key"),I(t,"class",i=p(e[5](e[0]))+" svelte-566egb")},m(r,i){S(r,t,i),c[n].m(t,null),o=!0,s||(a=j(t,"dblclick",e[4]),s=!0)},p(e,s){let a=n;n=u(e),n===a?c[n].p(e,s):(Ce(),Ee(c[a],1,1,(()=>{c[a]=null})),_e(),r=c[n],r?r.p(e,s):(r=c[n]=l[n](e),r.c()),Oe(r,1),r.m(t,null)),(!o||1&s&&i!==(i=p(e[5](e[0]))+" svelte-566egb"))&&I(t,"class",i)},i(e){o||(Oe(r),o=!0)},o(e){Ee(r),o=!1},d(e){e&&C(t),c[n].d(),s=!1,a()}}}function Z_(e){let t,n;return t=new Y_({props:{value:e[2].normalization.escapeValue(e[0]),shortText:!0,onChange:e[6],onCancel:e[7],onFind:e[2].onFind}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};5&n&&(r.value=e[2].normalization.escapeValue(e[0])),4&n&&(r.onFind=e[2].onFind),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function eO(t){let n,r=kl(t[2].normalization.escapeValue(t[0]))+"";return{c(){n=A(r)},m(e,t){S(e,n,t)},p(e,t){5&t&&r!==(r=kl(e[2].normalization.escapeValue(e[0]))+"")&&B(n,r)},i:e,o:e,d(e){e&&C(n)}}}function tO(e){let t,n;return t=new K_({props:{text:e[2].normalization.escapeValue(e[0]),searchResult:e[1]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};5&n&&(r.text=e[2].normalization.escapeValue(e[0])),2&n&&(r.searchResult=e[1]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function nO(e){let t,n,r,i;const o=[Z_,X_],s=[];function a(e,t){return e[3]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},m(e,n){s[t].m(e,n),S(e,r,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?s[t].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Oe(n,1),n.m(r.parentNode,r))},i(e){i||(Oe(n),i=!0)},o(e){Ee(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function rO(e,t,n){let r,i,{path:o}=t,{key:s}=t,{onUpdateKey:a}=t,{selection:l}=t,{searchResult:c}=t,{context:u}=t;return e.$$set=e=>{"path"in e&&n(8,o=e.path),"key"in e&&n(0,s=e.key),"onUpdateKey"in e&&n(9,a=e.onUpdateKey),"selection"in e&&n(10,l=e.selection),"searchResult"in e&&n(1,c=e.searchResult),"context"in e&&n(2,u=e.context)},e.$$.update=()=>{1024&e.$$.dirty&&n(11,r=l&&l.type===Wa),3076&e.$$.dirty&&n(3,i=!u.readOnly&&r&&l&&!0===l.edit)},[s,c,u,i,function(e){i||u.readOnly||(e.preventDefault(),u.onSelect({type:Wa,path:o,edit:!0}))},function(e){return P_("jse-key",{"jse-empty":""===e})},function(e,t){const n=a(s,u.normalization.unescapeValue(e)),r=Xs(o).concat(n);t===yn&&u.onSelect({type:Wa,path:r,next:!0}),t===vn&&u.onSelect({type:Wa,path:r},{ensureFocus:!1})},function(){u.onSelect({type:Wa,path:o})},o,a,l,r]}class iO extends Fe{constructor(e){super(),Ve(this,e,rO,nO,l,{path:8,key:0,onUpdateKey:9,selection:10,searchResult:1,context:2})}}function oO(e,t,n){const r=e.slice();return r[9]=t[n],r}function sO(e){let t,r,i;const o=[e[9].props];var s=e[9].component;function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Le(t.$$.fragment),r=P()},m(e,n){t&&Be(t,e,n),S(e,r,n),i=!0},p(e,n){const i=1&n?Ie(o,[De(e[9].props)]):{};if(s!==(s=e[9].component)){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}s?(t=new s(a()),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&Oe(t.$$.fragment,e),i=!0)},o(e){t&&Ee(t.$$.fragment,e),i=!1},d(e){e&&C(r),t&&ze(t,e)}}}function aO(e){let t,n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=sO(oO(e,r,t));const o=e=>Ee(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=P()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);S(e,t,r),n=!0},p(e,[n]){if(1&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=oO(e,r,s);i[s]?(i[s].p(o,n),Oe(i[s],1)):(i[s]=sO(o),i[s].c(),Oe(i[s],1),i[s].m(t.parentNode,t))}for(Ce(),s=r.length;s<i.length;s+=1)o(s);_e()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Oe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Ee(i[e]);n=!1},d(e){_(i,e),e&&C(t)}}}function lO(e,t,n){let r,i,o,{path:s}=t,{value:a}=t,{context:l}=t,{enforceString:c}=t,{selection:u}=t,{searchResult:h}=t;return e.$$set=e=>{"path"in e&&n(1,s=e.path),"value"in e&&n(2,a=e.value),"context"in e&&n(3,l=e.context),"enforceString"in e&&n(4,c=e.enforceString),"selection"in e&&n(5,u=e.selection),"searchResult"in e&&n(6,h=e.searchResult)},e.$$.update=()=>{34&e.$$.dirty&&n(8,r=!(!u||u.type!==Ua)&&ta(u.focusPath,s)),296&e.$$.dirty&&n(7,i=!l.readOnly&&r&&u&&!0===u.edit),510&e.$$.dirty&&n(0,o=l.onRenderValue({path:s,value:a,readOnly:l.readOnly,enforceString:c,isSelected:r,isEditing:i,normalization:l.normalization,selection:u,searchResult:h,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind}))},[o,s,a,l,c,u,h,i,r]}class cO extends Fe{constructor(e){super(),Ve(this,e,lO,aO,l,{path:1,value:2,context:3,enforceString:4,selection:5,searchResult:6})}}const uO={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function hO(t){let n,r;return{c(){n=O("div"),r=A(t[0]),I(n,"class","jse-tooltip svelte-r4omvg")},m(e,t){S(e,n,t),x(n,r)},p(e,[t]){1&t&&B(r,e[0])},i:e,o:e,d(e){e&&C(n)}}}function fO(e,t,n){let{text:r}=t;return e.$$set=e=>{"text"in e&&n(0,r=e.text)},[r]}class dO extends Fe{constructor(e){super(),Ve(this,e,fO,hO,a,{text:0})}}function pO(e,{text:t,openAbsolutePopup:n,closeAbsolutePopup:r}){function i(){n(dO,{text:t},{position:"top",width:10*t.length,offsetTop:3,anchor:e,closeOnOuterClick:!0})}function o(){r()}return e.addEventListener("mouseover",i),e.addEventListener("mouseout",o),{destroy(){e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",o)}}}function mO(e){let t,n,r,i,a,l;return n=new Uc({props:{data:vc}}),{c(){t=O("button"),Le(n.$$.fragment),I(t,"type","button"),I(t,"class","jse-validation-error svelte-1q62mys")},m(o,c){S(o,t,c),Be(n,t,null),i=!0,a||(l=[j(t,"click",(function(){s(e[0])&&e[0].apply(this,arguments)})),m(r=pO.call(null,t,{text:e[1],...e[2]}))],a=!0)},p(t,[n]){e=t,r&&s(r.update)&&2&n&&r.update.call(null,{text:e[1],...e[2]})},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n),a=!1,o(l)}}}function gO(e,t,n){let r;const i=oe("absolute-popup");let{validationError:o}=t,{onExpand:s}=t;return e.$$set=e=>{"validationError"in e&&n(3,o=e.validationError),"onExpand"in e&&n(0,s=e.onExpand)},e.$$.update=()=>{8&e.$$.dirty&&n(1,r=o.isChildError?"Contains invalid data":o.message)},[s,r,i,o]}class vO extends Fe{constructor(e){super(),Ve(this,e,gO,mO,a,{validationError:3,onExpand:0})}}function yO({fullJson:e,fullState:t,fullSelection:n,deltaY:r,items:i}){const o=r<0?function({items:e,fullSelection:t,deltaY:n}){const r=Ga(t),i=e.findIndex((e=>ta(e.path,r))),o=()=>{var t;return null===(t=e[s-1])||void 0===t?void 0:t.height};let s=i,a=0;for(;void 0!==o()&&Math.abs(n)>a+o()/2;)a+=o(),s-=1;const l=e[s].path,c=s-i;return s!==i&&void 0!==e[s]?{beforePath:l,indexOffset:c}:void 0}({fullSelection:n,deltaY:r,items:i}):function({items:e,fullSelection:t,deltaY:n}){var r;const i=Qa(t),o=e.findIndex((e=>ta(e.path,i))),s=()=>{var t;return null===(t=e[l+1])||void 0===t?void 0:t.height};let a=0,l=o;for(;void 0!==s()&&Math.abs(n)>a+s()/2;)a+=s(),l+=1;const c="number"==typeof Ws(i),u=null===(r=e[c?l:l+1])||void 0===r?void 0:r.path,h=l-o;return u?{beforePath:u,indexOffset:h}:{append:!0,indexOffset:h}}({fullSelection:n,deltaY:r,items:i});if(!o||0===o.indexOffset)return{operations:void 0,updatedValue:void 0,updatedState:void 0,updatedSelection:void 0,updatedFullSelection:void 0,indexOffset:0};const s=function(e,t,n,r){const{beforePath:i,append:o}=r,s=Xs(n.focusPath),a=kn.getIn(e,s);if(o||i&&ol(i,s)&&i.length>s.length){const e=n.paths?Qs(n.paths):n.focusPath,r=n.paths?Ws(n.paths):n.focusPath,l=Ws(e),c=Ws(r),u=i?i[s.length]:void 0;if(!Pn(a)){const e=l,t=u,n=c-e+1;return ma(n,t<e?n=>({op:"move",from:kn.compileJSONPointer(s.concat(e+n)),path:kn.compileJSONPointer(s.concat(t+n))}):()=>({op:"move",from:kn.compileJSONPointer(s.concat(e)),path:kn.compileJSONPointer(s.concat(t))}))}{const e=kn.getIn(t,s.concat(Ht)),n=e.indexOf(l),r=e.indexOf(c),i=o?e.length:e.indexOf(u);if(-1!==n&&-1!==r&&-1!==i)return i>n?[...e.slice(n,r+1),...e.slice(i,e.length)].map((e=>VC(s,e))):[...e.slice(i,n),...e.slice(r+1,e.length)].map((e=>VC(s,e)))}}}(e,t,n,o),a=Ma(e,t,s),l=Xs(Ga(n)),c=kn.getIn(e,l);if(Array.isArray(c)){const r=function({items:e,fullJson:t,fullState:n,fullSelection:r,indexOffset:i}){var o,s;const a=Ga(r),l=Qa(r),c=e.findIndex((e=>ta(e.path,a))),u=e.findIndex((e=>ta(e.path,l))),h=null===(o=e[c+i])||void 0===o?void 0:o.path,f=null===(s=e[u+i])||void 0===s?void 0:s.path;return al(t,n,{type:Ja,anchorPath:h,focusPath:f})}({items:i,fullJson:e,fullState:t,fullSelection:n,indexOffset:o.indexOffset}),c=cl(e,r),u=kn.getIn(c,l);return{operations:s,updatedValue:kn.getIn(a.json,l),updatedState:kn.getIn(a.state,l),updatedSelection:u,updatedFullSelection:r,indexOffset:o.indexOffset}}return{operations:s,updatedValue:kn.getIn(a.json,l),updatedState:kn.getIn(a.state,l),updatedSelection:void 0,updatedFullSelection:void 0,indexOffset:o.indexOffset}}const wO=e=>({}),bO=e=>({});function xO(e,t,n){const r=e.slice();return r[57]=t[n],r}const $O=e=>({}),kO=e=>({});function SO(e,t,n){const r=e.slice();return r[51]=t[n],r[53]=n,r}function CO(e,t,n){const r=e.slice();return r[54]=t[n],r[56]=n,r}const _O=e=>({}),OO=e=>({});function EO(e){let t,n,r,i,o,s,a,l,u,p=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1]);const m=e[39].identifier,g=c(m,e,e[40],bO);let v=!e[10]&&PO();o=new cO({props:{path:e[1],value:e[0],enforceString:e[5]?e[5][Jt]:void 0,selection:e[7],searchResult:e[2]?e[2][Ut]:void 0,context:e[4]}});let y=p&&jO(e),w=e[15]&&TO(e),b=!e[10]&&NO(e);return{c(){t=O("div"),n=O("div"),g&&g.c(),r=M(),v&&v.c(),i=M(),Le(o.$$.fragment),s=M(),y&&y.c(),a=M(),w&&w.c(),l=M(),b&&b.c(),I(n,"class","jse-contents svelte-uj4yd7"),I(t,"class","jse-contents-outer svelte-uj4yd7"),I(t,"style",e[13])},m(e,c){S(e,t,c),x(t,n),g&&g.m(n,null),x(n,r),v&&v.m(n,null),x(n,i),Be(o,n,null),x(n,s),y&&y.m(n,null),x(t,a),w&&w.m(t,null),x(t,l),b&&b.m(t,null),u=!0},p(e,r){g&&g.p&&(!u||512&r[1])&&f(g,m,e,e[40],u?h(m,e[40],r,wO):d(e[40]),bO),e[10]?v&&(v.d(1),v=null):v||(v=PO(),v.c(),v.m(n,i));const s={};2&r[0]&&(s.path=e[1]),1&r[0]&&(s.value=e[0]),32&r[0]&&(s.enforceString=e[5]?e[5][Jt]:void 0),128&r[0]&&(s.selection=e[7]),4&r[0]&&(s.searchResult=e[2]?e[2][Ut]:void 0),16&r[0]&&(s.context=e[4]),o.$set(s),146&r[0]&&(p=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1])),p?y?(y.p(e,r),146&r[0]&&Oe(y,1)):(y=jO(e),y.c(),Oe(y,1),y.m(n,null)):y&&(Ce(),Ee(y,1,1,(()=>{y=null})),_e()),e[15]?w?(w.p(e,r),32768&r[0]&&Oe(w,1)):(w=TO(e),w.c(),Oe(w,1),w.m(t,l)):w&&(Ce(),Ee(w,1,1,(()=>{w=null})),_e()),e[10]?b&&(b.d(1),b=null):b?b.p(e,r):(b=NO(e),b.c(),b.m(t,null)),(!u||8192&r[0])&&I(t,"style",e[13])},i(e){u||(Oe(g,e),Oe(o.$$.fragment,e),Oe(y),Oe(w),u=!0)},o(e){Ee(g,e),Ee(o.$$.fragment,e),Ee(y),Ee(w),u=!1},d(e){e&&C(t),g&&g.d(e),v&&v.d(),ze(o),y&&y.d(),w&&w.d(),b&&b.d()}}}function AO(e){let t,n,r,i,o,s,a,l,u,p,m,g,v,y,w,b,$,k,_=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1]);const E=[DO,IO],A=[];function T(e,t){return e[12]?0:1}i=T(e),o=A[i]=E[i](e);const N=e[39].identifier,D=c(N,e,e[40],kO);let R=!e[10]&&RO();function L(e,t){return e[12]?BO:LO}let B=L(e),z=B(e),V=_&&zO(e),F=e[15]&&(!e[12]||!e[15].isChildError)&&VO(e);function q(e,t){return e[12]?qO:e[10]?void 0:FO}let H=q(e),W=H&&H(e),U=e[12]&&HO(e);return{c(){t=O("div"),n=O("div"),r=O("button"),o.c(),s=M(),D&&D.c(),a=M(),R&&R.c(),l=M(),u=O("div"),p=O("div"),z.c(),m=M(),V&&V.c(),g=M(),F&&F.c(),v=M(),W&&W.c(),y=M(),U&&U.c(),w=P(),I(r,"type","button"),I(r,"class","jse-expand svelte-uj4yd7"),I(r,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),I(p,"class","jse-meta-inner svelte-uj4yd7"),I(u,"class","jse-meta svelte-uj4yd7"),I(u,"data-type","selectable-value"),I(n,"class","jse-header svelte-uj4yd7"),I(t,"class","jse-header-outer svelte-uj4yd7"),I(t,"style",e[13])},m(o,c){S(o,t,c),x(t,n),x(n,r),A[i].m(r,null),x(n,s),D&&D.m(n,null),x(n,a),R&&R.m(n,null),x(n,l),x(n,u),x(u,p),z.m(p,null),x(n,m),V&&V.m(n,null),x(t,g),F&&F.m(t,null),x(t,v),W&&W.m(t,null),S(o,y,c),U&&U.m(o,c),S(o,w,c),b=!0,$||(k=j(r,"click",e[23]),$=!0)},p(e,s){let a=i;i=T(e),i===a?A[i].p(e,s):(Ce(),Ee(A[a],1,1,(()=>{A[a]=null})),_e(),o=A[i],o?o.p(e,s):(o=A[i]=E[i](e),o.c()),Oe(o,1),o.m(r,null)),D&&D.p&&(!b||512&s[1])&&f(D,N,e,e[40],b?h(N,e[40],s,$O):d(e[40]),kO),e[10]?R&&(R.d(1),R=null):R||(R=RO(),R.c(),R.m(n,l)),B===(B=L(e))&&z?z.p(e,s):(z.d(1),z=B(e),z&&(z.c(),z.m(p,null))),146&s[0]&&(_=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1])),_?V?(V.p(e,s),146&s[0]&&Oe(V,1)):(V=zO(e),V.c(),Oe(V,1),V.m(n,null)):V&&(Ce(),Ee(V,1,1,(()=>{V=null})),_e()),!e[15]||e[12]&&e[15].isChildError?F&&(Ce(),Ee(F,1,1,(()=>{F=null})),_e()):F?(F.p(e,s),36864&s[0]&&Oe(F,1)):(F=VO(e),F.c(),Oe(F,1),F.m(t,v)),H===(H=q(e))&&W?W.p(e,s):(W&&W.d(1),W=H&&H(e),W&&(W.c(),W.m(t,null))),(!b||8192&s[0])&&I(t,"style",e[13]),e[12]?U?(U.p(e,s),4096&s[0]&&Oe(U,1)):(U=HO(e),U.c(),Oe(U,1),U.m(w.parentNode,w)):U&&(Ce(),Ee(U,1,1,(()=>{U=null})),_e())},i(e){b||(Oe(o),Oe(D,e),Oe(V),Oe(F),Oe(U),b=!0)},o(e){Ee(o),Ee(D,e),Ee(V),Ee(F),Ee(U),b=!1},d(e){e&&C(t),A[i].d(),D&&D.d(e),R&&R.d(),z.d(),V&&V.d(),F&&F.d(),W&&W.d(),e&&C(y),U&&U.d(e),e&&C(w),$=!1,k()}}}function MO(e){let t,n,r,i,o,s,a,l,u,p,m,g,v,y,w,b,$,k,_=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1]);const E=[YO,QO],A=[];function T(e,t){return e[12]?0:1}i=T(e),o=A[i]=E[i](e);const N=e[39].identifier,D=c(N,e,e[40],OO);let R=!e[10]&&XO();function L(e,t){return e[12]?eE:ZO}let B=L(e),z=B(e),V=_&&tE(e),F=e[15]&&(!e[12]||!e[15].isChildError)&&nE(e);function q(e,t){return e[12]?iE:rE}let H=q(e),W=H(e),U=e[12]&&oE(e);return{c(){t=O("div"),n=O("div"),r=O("button"),o.c(),s=M(),D&&D.c(),a=M(),R&&R.c(),l=M(),u=O("div"),p=O("div"),z.c(),m=M(),V&&V.c(),g=M(),F&&F.c(),v=M(),W.c(),y=M(),U&&U.c(),w=P(),I(r,"type","button"),I(r,"class","jse-expand svelte-uj4yd7"),I(r,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),I(p,"class","jse-meta-inner svelte-uj4yd7"),I(p,"data-type","selectable-value"),I(u,"class","jse-meta svelte-uj4yd7"),I(n,"class","jse-header svelte-uj4yd7"),I(t,"class","jse-header-outer svelte-uj4yd7"),I(t,"style",e[13])},m(o,c){S(o,t,c),x(t,n),x(n,r),A[i].m(r,null),x(n,s),D&&D.m(n,null),x(n,a),R&&R.m(n,null),x(n,l),x(n,u),x(u,p),z.m(p,null),x(n,m),V&&V.m(n,null),x(t,g),F&&F.m(t,null),x(t,v),W.m(t,null),S(o,y,c),U&&U.m(o,c),S(o,w,c),b=!0,$||(k=j(r,"click",e[23]),$=!0)},p(e,s){let a=i;i=T(e),i===a?A[i].p(e,s):(Ce(),Ee(A[a],1,1,(()=>{A[a]=null})),_e(),o=A[i],o?o.p(e,s):(o=A[i]=E[i](e),o.c()),Oe(o,1),o.m(r,null)),D&&D.p&&(!b||512&s[1])&&f(D,N,e,e[40],b?h(N,e[40],s,_O):d(e[40]),OO),e[10]?R&&(R.d(1),R=null):R||(R=XO(),R.c(),R.m(n,l)),B===(B=L(e))&&z?z.p(e,s):(z.d(1),z=B(e),z&&(z.c(),z.m(p,null))),146&s[0]&&(_=!e[4].readOnly&&e[7]&&(e[7].type===Ua||e[7].type===Ja)&&!e[7].edit&&ta(e[7].focusPath,e[1])),_?V?(V.p(e,s),146&s[0]&&Oe(V,1)):(V=tE(e),V.c(),Oe(V,1),V.m(n,null)):V&&(Ce(),Ee(V,1,1,(()=>{V=null})),_e()),!e[15]||e[12]&&e[15].isChildError?F&&(Ce(),Ee(F,1,1,(()=>{F=null})),_e()):F?(F.p(e,s),36864&s[0]&&Oe(F,1)):(F=nE(e),F.c(),Oe(F,1),F.m(t,v)),H===(H=q(e))&&W?W.p(e,s):(W.d(1),W=H(e),W&&(W.c(),W.m(t,null))),(!b||8192&s[0])&&I(t,"style",e[13]),e[12]?U?(U.p(e,s),4096&s[0]&&Oe(U,1)):(U=oE(e),U.c(),Oe(U,1),U.m(w.parentNode,w)):U&&(Ce(),Ee(U,1,1,(()=>{U=null})),_e())},i(e){b||(Oe(o),Oe(D,e),Oe(V),Oe(F),Oe(U),b=!0)},o(e){Ee(o),Ee(D,e),Ee(V),Ee(F),Ee(U),b=!1},d(e){e&&C(t),A[i].d(),D&&D.d(e),R&&R.d(),z.d(),V&&V.d(),F&&F.d(),W.d(),e&&C(y),U&&U.d(e),e&&C(w),$=!1,k()}}}function PO(e){let t;return{c(){t=O("div"),t.textContent=":",I(t,"class","jse-separator svelte-uj4yd7")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function jO(e){let t,n,r;return n=new V_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function TO(e){let t,n;return t=new vO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function NO(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),I(n,"data-type","insert-selection-area-after")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[32]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function IO(t){let n,r;return n=new Uc({props:{data:Zl}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function DO(t){let n,r;return n=new Uc({props:{data:Xl}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function RO(e){let t;return{c(){t=O("div"),t.textContent=":",I(t,"class","jse-separator svelte-uj4yd7")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function LO(e){let t,n,r,i,o,s,a,l,c,u,h=Object.keys(e[6]).length+"",f=1===Object.keys(e[6]).length?"prop":"props";return{c(){t=O("div"),t.textContent="{",n=M(),r=O("button"),i=A(h),o=M(),s=A(f),a=M(),l=O("div"),l.textContent="}",I(t,"class","jse-bracket svelte-uj4yd7"),I(r,"type","button"),I(r,"class","jse-tag svelte-uj4yd7"),I(l,"class","jse-bracket svelte-uj4yd7")},m(h,f){S(h,t,f),S(h,n,f),S(h,r,f),x(r,i),x(r,o),x(r,s),S(h,a,f),S(h,l,f),c||(u=j(r,"click",e[24]),c=!0)},p(e,t){64&t[0]&&h!==(h=Object.keys(e[6]).length+"")&&B(i,h),64&t[0]&&f!==(f=1===Object.keys(e[6]).length?"prop":"props")&&B(s,f)},d(e){e&&C(t),e&&C(n),e&&C(r),e&&C(a),e&&C(l),c=!1,u()}}}function BO(t){let n;return{c(){n=O("div"),n.textContent="{",I(n,"class","jse-bracket jse-expanded svelte-uj4yd7")},m(e,t){S(e,n,t)},p:e,d(e){e&&C(n)}}}function zO(e){let t,n,r;return n=new V_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function VO(e){let t,n;return t=new vO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function FO(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),I(n,"data-type","insert-selection-area-after")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[32]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function qO(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-inside svelte-uj4yd7"),I(n,"data-type","insert-selection-area-inside")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[31]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function HO(e){let t,n,r,i,o,s,a,l=[],c=new Map,u=!e[4].readOnly&&(e[9]===ln||e[19])&&WO(e),h=e[11];const f=e=>e[5][e[57]][Vt];for(let t=0;t<h.length;t+=1){let n=xO(e,h,t),r=f(n);c.set(r,l[t]=KO(r,n))}let d=!e[10]&&GO(e);return{c(){t=O("div"),u&&u.c(),n=M();for(let e=0;e<l.length;e+=1)l[e].c();r=M(),i=O("div"),o=O("div"),o.innerHTML='<div class="jse-bracket svelte-uj4yd7">}</div>',s=M(),d&&d.c(),I(t,"class","jse-props svelte-uj4yd7"),I(o,"data-type","selectable-value"),I(o,"class","jse-footer svelte-uj4yd7"),I(i,"class","jse-footer-outer svelte-uj4yd7"),I(i,"style",e[13])},m(e,c){S(e,t,c),u&&u.m(t,null),x(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);S(e,r,c),S(e,i,c),x(i,o),x(i,s),d&&d.m(i,null),a=!0},p(e,r){e[4].readOnly||e[9]!==ln&&!e[19]?u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e()):u?(u.p(e,r),524816&r[0]&&Oe(u,1)):(u=WO(e),u.c(),Oe(u,1),u.m(t,n)),306186622&r[0]&&(h=e[11],Ce(),l=Ne(l,r,f,1,e,h,c,t,Te,KO,null,xO),_e()),e[10]?d&&(d.d(1),d=null):d?d.p(e,r):(d=GO(e),d.c(),d.m(i,null)),(!a||8192&r[0])&&I(i,"style",e[13])},i(e){if(!a){Oe(u);for(let e=0;e<h.length;e+=1)Oe(l[e]);a=!0}},o(e){Ee(u);for(let e=0;e<l.length;e+=1)Ee(l[e]);a=!1},d(e){e&&C(t),u&&u.d();for(let e=0;e<l.length;e+=1)l[e].d();e&&C(r),e&&C(i),d&&d.d()}}}function WO(e){let t,n,r,i;return n=new V_({props:{selected:e[19],onContextMenu:e[33]}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-insert-area jse-inside svelte-uj4yd7"),I(t,"data-type","insert-selection-area-inside"),I(t,"style",r=pE(e[1].length+1)),I(t,"title",sn),H(t,"jse-hovered",e[9]===ln),H(t,"jse-selected",e[19])},m(e,r){S(e,t,r),Be(n,t,null),i=!0},p(e,o){const s={};524288&o[0]&&(s.selected=e[19]),n.$set(s),(!i||2&o[0]&&r!==(r=pE(e[1].length+1)))&&I(t,"style",r),512&o[0]&&H(t,"jse-hovered",e[9]===ln),524288&o[0]&&H(t,"jse-selected",e[19])},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n)}}}function UO(e){let t,n;return t=new V_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.onContextMenu=e[4].onContextMenu),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function JO(e){let t,n,r,i,o,s=!e[4].readOnly&&hl(e[1],e[57],e[8]);n=new iO({props:{path:e[22](e[1].concat(e[57])),key:e[57],context:e[4],selection:e[8]?.[e[57]]?.[Kt],searchResult:e[2]?.[e[57]]?.[Wt],onUpdateKey:e[25]}});let a=s&&UO(e);return{c(){t=O("div"),Le(n.$$.fragment),r=M(),a&&a.c(),i=M(),I(t,"slot","identifier"),I(t,"class","jse-identifier svelte-uj4yd7")},m(e,s){S(e,t,s),Be(n,t,null),x(t,r),a&&a.m(t,null),x(t,i),o=!0},p(e,r){const o={};2050&r[0]&&(o.path=e[22](e[1].concat(e[57]))),2048&r[0]&&(o.key=e[57]),16&r[0]&&(o.context=e[4]),2304&r[0]&&(o.selection=e[8]?.[e[57]]?.[Kt]),2052&r[0]&&(o.searchResult=e[2]?.[e[57]]?.[Wt]),n.$set(o),2322&r[0]&&(s=!e[4].readOnly&&hl(e[1],e[57],e[8])),s?a?(a.p(e,r),2322&r[0]&&Oe(a,1)):(a=UO(e),a.c(),Oe(a,1),a.m(t,i)):a&&(Ce(),Ee(a,1,1,(()=>{a=null})),_e())},i(e){o||(Oe(n.$$.fragment,e),Oe(a),o=!0)},o(e){Ee(n.$$.fragment,e),Ee(a),o=!1},d(e){e&&C(t),ze(n),a&&a.d()}}}function KO(e,t){let n,r,i;return r=new gE({props:{value:t[6][t[57]],path:t[22](t[1].concat(t[57])),state:t[5][t[57]],selection:t[8]?t[8][t[57]]:void 0,searchResult:t[2]?t[2][t[57]]:void 0,validationErrors:t[3]?t[3][t[57]]:void 0,context:t[4],onDragSelectionStart:t[28],$$slots:{identifier:[JO]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=P(),Le(r.$$.fragment),this.first=n},m(e,t){S(e,n,t),Be(r,e,t),i=!0},p(e,n){t=e;const i={};2112&n[0]&&(i.value=t[6][t[57]]),2050&n[0]&&(i.path=t[22](t[1].concat(t[57]))),2080&n[0]&&(i.state=t[5][t[57]]),2304&n[0]&&(i.selection=t[8]?t[8][t[57]]:void 0),2052&n[0]&&(i.searchResult=t[2]?t[2][t[57]]:void 0),2056&n[0]&&(i.validationErrors=t[3]?t[3][t[57]]:void 0),16&n[0]&&(i.context=t[4]),2326&n[0]|512&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(e){i||(Oe(r.$$.fragment,e),i=!0)},o(e){Ee(r.$$.fragment,e),i=!1},d(e){e&&C(n),ze(r,e)}}}function GO(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),I(n,"data-type","insert-selection-area-after")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[32]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function QO(t){let n,r;return n=new Uc({props:{data:Zl}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function YO(t){let n,r;return n=new Uc({props:{data:Xl}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function XO(e){let t;return{c(){t=O("div"),t.textContent=":",I(t,"class","jse-separator svelte-uj4yd7")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function ZO(e){let t,n,r,i,o,s,a,l,c,u,h=e[6].length+"",f=1===e[6].length?"item":"items";return{c(){t=O("div"),t.textContent="[",n=M(),r=O("button"),i=A(h),o=M(),s=A(f),a=M(),l=O("div"),l.textContent="]",I(t,"class","jse-bracket svelte-uj4yd7"),I(r,"type","button"),I(r,"class","jse-tag svelte-uj4yd7"),I(l,"class","jse-bracket svelte-uj4yd7")},m(h,f){S(h,t,f),S(h,n,f),S(h,r,f),x(r,i),x(r,o),x(r,s),S(h,a,f),S(h,l,f),c||(u=j(r,"click",e[24]),c=!0)},p(e,t){64&t[0]&&h!==(h=e[6].length+"")&&B(i,h),64&t[0]&&f!==(f=1===e[6].length?"item":"items")&&B(s,f)},d(e){e&&C(t),e&&C(n),e&&C(r),e&&C(a),e&&C(l),c=!1,u()}}}function eE(e){let t,n,r,i,o,s,a=e[6].length+"",l=1===e[6].length?"item":"items";return{c(){t=O("div"),t.textContent="[",n=M(),r=O("span"),i=A(a),o=M(),s=A(l),I(t,"class","jse-bracket svelte-uj4yd7"),I(r,"class","jse-tag jse-expanded svelte-uj4yd7")},m(e,a){S(e,t,a),S(e,n,a),S(e,r,a),x(r,i),x(r,o),x(r,s)},p(e,t){64&t[0]&&a!==(a=e[6].length+"")&&B(i,a),64&t[0]&&l!==(l=1===e[6].length?"item":"items")&&B(s,l)},d(e){e&&C(t),e&&C(n),e&&C(r)}}}function tE(e){let t,n,r;return n=new V_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function nE(e){let t,n;return t=new vO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function rE(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),I(n,"data-type","insert-selection-area-after")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[32]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function iE(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-inside svelte-uj4yd7"),I(n,"data-type","insert-selection-area-inside")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[31]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function oE(e){let t,n,r,i,o,s,a,l=[],c=new Map,u=!e[4].readOnly&&(e[9]===ln||e[19])&&sE(e),h=e[16];const f=e=>e[53];for(let t=0;t<h.length;t+=1){let n=SO(e,h,t),r=f(n);c.set(r,l[t]=uE(r,n))}let d=!e[10]&&hE(e);return{c(){t=O("div"),u&&u.c(),n=M();for(let e=0;e<l.length;e+=1)l[e].c();r=M(),i=O("div"),o=O("div"),o.innerHTML='<span class="jse-bracket svelte-uj4yd7">]</span>',s=M(),d&&d.c(),I(t,"class","jse-items svelte-uj4yd7"),I(o,"data-type","selectable-value"),I(o,"class","jse-footer svelte-uj4yd7"),I(i,"class","jse-footer-outer svelte-uj4yd7"),I(i,"style",e[13])},m(e,c){S(e,t,c),u&&u.m(t,null),x(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);S(e,r,c),S(e,i,c),x(i,o),x(i,s),d&&d.m(i,null),a=!0},p(e,r){e[4].readOnly||e[9]!==ln&&!e[19]?u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e()):u?(u.p(e,r),524816&r[0]&&Oe(u,1)):(u=sE(e),u.c(),Oe(u,1),u.m(t,n)),272695806&r[0]&&(h=e[16],Ce(),l=Ne(l,r,f,1,e,h,c,t,Te,uE,null,SO),_e()),e[10]?d&&(d.d(1),d=null):d?d.p(e,r):(d=hE(e),d.c(),d.m(i,null)),(!a||8192&r[0])&&I(i,"style",e[13])},i(e){if(!a){Oe(u);for(let e=0;e<h.length;e+=1)Oe(l[e]);a=!0}},o(e){Ee(u);for(let e=0;e<l.length;e+=1)Ee(l[e]);a=!1},d(e){e&&C(t),u&&u.d();for(let e=0;e<l.length;e+=1)l[e].d();e&&C(r),e&&C(i),d&&d.d()}}}function sE(e){let t,n,r,i;return n=new V_({props:{selected:e[19],onContextMenu:e[33]}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-insert-area jse-inside svelte-uj4yd7"),I(t,"data-type","insert-selection-area-inside"),I(t,"style",r=pE(e[1].length+1)),I(t,"title",sn),H(t,"jse-hovered",e[9]===ln),H(t,"jse-selected",e[19])},m(e,r){S(e,t,r),Be(n,t,null),i=!0},p(e,o){const s={};524288&o[0]&&(s.selected=e[19]),n.$set(s),(!i||2&o[0]&&r!==(r=pE(e[1].length+1)))&&I(t,"style",r),512&o[0]&&H(t,"jse-hovered",e[9]===ln),524288&o[0]&&H(t,"jse-selected",e[19])},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n)}}}function aE(e){let t,n,r,i=e[51].start+e[56]+"";return{c(){t=O("div"),n=O("div"),r=A(i),I(n,"class","jse-index svelte-uj4yd7"),I(t,"slot","identifier"),I(t,"class","jse-identifier svelte-uj4yd7")},m(e,i){S(e,t,i),x(t,n),x(n,r)},p(e,t){65600&t[0]&&i!==(i=e[51].start+e[56]+"")&&B(r,i)},d(e){e&&C(t)}}}function lE(e,t){let n,r,i;return r=new gE({props:{value:t[54],path:t[22](t[1].concat(t[51].start+t[56])),state:t[5][t[51].start+t[56]],selection:t[8]?t[8][t[51].start+t[56]]:void 0,searchResult:t[2]?t[2][t[51].start+t[56]]:void 0,validationErrors:t[3]?t[3][t[51].start+t[56]]:void 0,context:t[4],onDragSelectionStart:t[28],$$slots:{identifier:[aE]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=P(),Le(r.$$.fragment),this.first=n},m(e,t){S(e,n,t),Be(r,e,t),i=!0},p(e,n){t=e;const i={};65600&n[0]&&(i.value=t[54]),65602&n[0]&&(i.path=t[22](t[1].concat(t[51].start+t[56]))),65632&n[0]&&(i.state=t[5][t[51].start+t[56]]),65856&n[0]&&(i.selection=t[8]?t[8][t[51].start+t[56]]:void 0),65604&n[0]&&(i.searchResult=t[2]?t[2][t[51].start+t[56]]:void 0),65608&n[0]&&(i.validationErrors=t[3]?t[3][t[51].start+t[56]]:void 0),16&n[0]&&(i.context=t[4]),65600&n[0]|512&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(e){i||(Oe(r.$$.fragment,e),i=!0)},o(e){Ee(r.$$.fragment,e),i=!1},d(e){e&&C(n),ze(r,e)}}}function cE(e){let t,n;return t=new L_({props:{visibleSections:e[16],sectionIndex:e[53],total:e[6].length,path:e[1],onExpandSection:e[4].onExpandSection,selection:e[7]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};65536&n[0]&&(r.visibleSections=e[16]),65536&n[0]&&(r.sectionIndex=e[53]),64&n[0]&&(r.total=e[6].length),2&n[0]&&(r.path=e[1]),16&n[0]&&(r.onExpandSection=e[4].onExpandSection),128&n[0]&&(r.selection=e[7]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function uE(e,t){let n,r,i,o,s=[],a=new Map,l=t[6].slice(t[51].start,Math.min(t[51].end,t[6].length));const c=e=>e[56];for(let e=0;e<l.length;e+=1){let n=CO(t,l,e),r=c(n);a.set(r,s[e]=lE(r,n))}let u=t[51].end<t[6].length&&cE(t);return{key:e,first:null,c(){n=P();for(let e=0;e<s.length;e+=1)s[e].c();r=M(),u&&u.c(),i=P(),this.first=n},m(e,t){S(e,n,t);for(let n=0;n<s.length;n+=1)s[n].m(e,t);S(e,r,t),u&&u.m(e,t),S(e,i,t),o=!0},p(e,n){t=e,272695678&n[0]&&(l=t[6].slice(t[51].start,Math.min(t[51].end,t[6].length)),Ce(),s=Ne(s,n,c,1,t,l,a,r.parentNode,Te,lE,r,CO),_e()),t[51].end<t[6].length?u?(u.p(t,n),65600&n[0]&&Oe(u,1)):(u=cE(t),u.c(),Oe(u,1),u.m(i.parentNode,i)):u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e())},i(e){if(!o){for(let e=0;e<l.length;e+=1)Oe(s[e]);Oe(u),o=!0}},o(e){for(let e=0;e<s.length;e+=1)Ee(s[e]);Ee(u),o=!1},d(e){e&&C(n);for(let t=0;t<s.length;t+=1)s[t].d(e);e&&C(r),u&&u.d(e),e&&C(i)}}}function hE(t){let n,r,i;return{c(){n=O("div"),I(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),I(n,"data-type","insert-selection-area-after")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[32]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function fE(e){let t,n,r;return n=new V_({props:{selected:e[20],onContextMenu:e[34]}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-insert-area jse-after svelte-uj4yd7"),I(t,"data-type","insert-selection-area-after"),I(t,"style",e[13]),I(t,"title",sn),H(t,"jse-hovered",e[9]===cn),H(t,"jse-selected",e[20])},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,i){const o={};1048576&i[0]&&(o.selected=e[20]),n.$set(o),(!r||8192&i[0])&&I(t,"style",e[13]),512&i[0]&&H(t,"jse-hovered",e[9]===cn),1048576&i[0]&&H(t,"jse-selected",e[20])},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function dE(e){let t,n,r,i,s,a,l,c,u;const h=[MO,AO,EO],f=[];function d(e,t){return"array"===e[14]?0:"object"===e[14]?1:2}n=d(e),r=f[n]=h[n](e);let m=!e[4].readOnly&&(e[9]===cn||e[20])&&fE(e);return{c(){t=O("div"),r.c(),i=M(),m&&m.c(),I(t,"class",s=p(P_("jse-json-node",{"jse-expanded":e[12]},e[4].onClassName(e[1],e[6])))+" svelte-uj4yd7"),I(t,"data-path",a=Tl(e[1])),H(t,"jse-root",e[10]),H(t,"jse-selected",e[21]),H(t,"jse-selected-key",e[18]),H(t,"jse-selected-value",e[17]),H(t,"jse-hovered",e[9]===un)},m(r,o){S(r,t,o),f[n].m(t,null),x(t,i),m&&m.m(t,null),l=!0,c||(u=[j(t,"mousedown",e[26]),j(t,"mousemove",e[27]),j(t,"mouseover",e[29]),j(t,"mouseout",e[30]),j(t,"focus",void 0),j(t,"blur",void 0)],c=!0)},p(e,o){let c=n;n=d(e),n===c?f[n].p(e,o):(Ce(),Ee(f[c],1,1,(()=>{f[c]=null})),_e(),r=f[n],r?r.p(e,o):(r=f[n]=h[n](e),r.c()),Oe(r,1),r.m(t,i)),e[4].readOnly||e[9]!==cn&&!e[20]?m&&(Ce(),Ee(m,1,1,(()=>{m=null})),_e()):m?(m.p(e,o),1049104&o[0]&&Oe(m,1)):(m=fE(e),m.c(),Oe(m,1),m.m(t,null)),(!l||4178&o[0]&&s!==(s=p(P_("jse-json-node",{"jse-expanded":e[12]},e[4].onClassName(e[1],e[6])))+" svelte-uj4yd7"))&&I(t,"class",s),(!l||2&o[0]&&a!==(a=Tl(e[1])))&&I(t,"data-path",a),5202&o[0]&&H(t,"jse-root",e[10]),2101330&o[0]&&H(t,"jse-selected",e[21]),266322&o[0]&&H(t,"jse-selected-key",e[18]),135250&o[0]&&H(t,"jse-selected-value",e[17]),4690&o[0]&&H(t,"jse-hovered",e[9]===un)},i(e){l||(Oe(r),Oe(m),l=!0)},o(e){Ee(r),Ee(m),l=!1},d(e){e&&C(t),f[n].d(),m&&m.d(),c=!1,o(u)}}}function pE(e){return`margin-left: calc(${e} * var(--jse-indent-size))`}function mE(e,t,n){let r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,{$$slots:w={},$$scope:b}=t,{value:x}=t,{path:$}=t,{state:k}=t,{selection:S}=t,{searchResult:C}=t,{validationErrors:_}=t,{context:O}=t,{onDragSelectionStart:E}=t;const A=Et("jsoneditor:JSONNode");let M,P,j;const T=co((e=>e),eu);function N(e){O.onDrag(e)}function I(e){uO.selecting&&(uO.selecting=!1,e.stopPropagation()),O.onDragEnd(),document.removeEventListener("mousemove",N,!0),document.removeEventListener("mouseup",I)}function D(){var e,t;return(null===(t=null===(e=O.findElement([]))||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.top)||0}function R(e,t){const n=D()-e.initialContentTop;return t.clientY-e.initialClientY-n}function L(e){if(j){const t=R(j,e),{updatedValue:r,updatedState:i,updatedSelection:o,indexOffset:s}=yO({fullJson:O.getFullJson(),fullState:O.getFullState(),fullSelection:O.getFullSelection(),deltaY:t,items:j.items});s!==j.indexOffset&&(A("drag selection",s,t,o),n(38,j={...j,updatedValue:r,updatedState:i,updatedSelection:o,indexOffset:s,didMoveItems:!0}))}}function B(e){if(j){const t=R(j,e),{operations:r,updatedFullSelection:i}=yO({fullJson:O.getFullJson(),fullState:O.getFullState(),fullSelection:O.getFullSelection(),deltaY:t,items:j.items});r?O.onPatch(r,(()=>({selection:i||O.getFullSelection()}))):e.target!==j.initialTarget||j.didMoveItems||O.onSelect({type:jl(e.target),path:Nl(e.target)}),n(38,j=void 0),uO.dragging=!1,document.removeEventListener("mousemove",L,!0),document.removeEventListener("mouseup",B)}}return e.$$set=e=>{"value"in e&&n(0,x=e.value),"path"in e&&n(1,$=e.path),"state"in e&&n(35,k=e.state),"selection"in e&&n(36,S=e.selection),"searchResult"in e&&n(2,C=e.searchResult),"validationErrors"in e&&n(3,_=e.validationErrors),"context"in e&&n(4,O=e.context),"onDragSelectionStart"in e&&n(37,E=e.onDragSelectionStart),"$$scope"in e&&n(40,b=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(6,r=void 0!==(null==j?void 0:j.updatedValue)?j.updatedValue:x),144&e.$$.dirty[1]&&n(5,i=void 0!==(null==j?void 0:j.updatedState)?j.updatedState:k),160&e.$$.dirty[1]&&n(8,o=null!=(null==j?void 0:j.updatedSelection)?j.updatedSelection:S),256&e.$$.dirty[0]&&n(7,s=o&&o[Kt]),128&e.$$.dirty[0]&&n(21,a=!(!s||!s.pathsMap)),128&e.$$.dirty[0]&&n(20,l=!(!s||s.type!==qa)),128&e.$$.dirty[0]&&n(19,c=!(!s||s.type!==Ha)),128&e.$$.dirty[0]&&n(18,u=!(!s||s.type!==Wa)),128&e.$$.dirty[0]&&n(17,h=!(!s||s.type!==Ua)),32&e.$$.dirty[0]&&n(12,f=i[Ft]),32&e.$$.dirty[0]&&n(16,d=i[qt]),32&e.$$.dirty[0]&&n(11,p=i[Ht]),8&e.$$.dirty[0]&&n(15,m=_&&_[Gt]),2&e.$$.dirty[0]&&n(10,g=0===$.length),64&e.$$.dirty[0]&&n(14,v=Nn(r)),2&e.$$.dirty[0]&&n(13,y=pE($.length))},[x,$,C,_,O,i,r,s,o,M,g,p,f,y,v,m,d,h,u,c,l,a,T,function(e){e.stopPropagation();const t=e.ctrlKey;O.onExpand($,!f,t)},function(e){e.stopPropagation(),O.onExpand($,!0)},function(e,t){const n=RC($,p,e,t);return O.onPatch(n),Ws(kn.parseJSONPointer(n[0].path))},function(e){if(function(e){return"DIV"===e.nodeName&&"true"===e.contentEditable}(e.target)||1===e.which&&Sl(e.target,"BUTTON"))return;e.stopPropagation(),e.preventDefault(),document.addEventListener("mousemove",N,!0),document.addEventListener("mouseup",I);const t=jl(e.target);if(function(e,t,n){if(!e)return!1;const r=t.slice(0);if(e.type===Ja)for(;r.length>0;){if(!0===e.pathsMap[kn.compileJSONPointer(r)])return!0;r.pop()}if(e.type===Wa)return n===Wa&&ta(e.focusPath,t);if(e.type===Ua){if(n===Ua&&ta(e.focusPath,t))return!0;if(ol(t,e.focusPath)&&t.length>e.focusPath.length&&(n===Wa||n===Ua||n===Ja))return!0}return!1}(O.getFullSelection(),$,t))0===e.button&&(O.focus(),E(e));else if(uO.selecting=!0,uO.selectionAnchor=$,uO.selectionAnchorType=t,uO.selectionFocus=$,e.shiftKey){const e=O.getFullSelection();e&&O.onSelect({type:Ja,anchorPath:e.anchorPath,focusPath:$})}else switch(t){case Wa:case Ua:case qa:case Ha:O.onSelect({type:t,path:$});break;case Ja:if(g&&e.target.hasAttribute("data-path")){const e=Ws(Va(r,i));O.onSelect(e)}else O.onSelect({type:Ja,anchorPath:$,focusPath:$})}},function(e){if(uO.selecting){e.preventDefault(),e.stopPropagation(),null==uO.selectionFocus&&window.getSelection&&window.getSelection().empty();const t=jl(e.target);ta($,uO.selectionFocus)&&t===uO.selectionAnchorType||(uO.selectionFocus=$,O.onSelect({anchorPath:uO.selectionAnchor,focusPath:uO.selectionFocus}))}},function(e){if(O.readOnly)return;const t=O.getFullSelection(),r=Xs(t.focusPath);if(!ta($,r))return void E(e);const i=function(e){const t=[];function n(e){const n=$.concat(e),r=O.findElement(n);null!=r&&t.push({path:n,height:r.clientHeight})}if(Array.isArray(x)){const t=Qs(e.paths)||e.focusPath,r=Ws(e.paths)||e.focusPath,i=Ws(t),o=Ws(r),s=k[qt].find((e=>i>=e.start&&o<=e.end));if(!s)return null;const{start:a,end:l}=s;Vn(a,Math.min(x.length,l),n)}else Oa(k,n);return t}(t);A("dragSelectionStart",{fullSelection:t,items:i}),i?(n(38,j={initialTarget:e.target,initialClientY:e.clientY,initialContentTop:D(),updatedValue:void 0,updatedState:void 0,updatedSelection:void 0,items:i,indexOffset:0,didMoveItems:!1}),uO.dragging=!0,document.addEventListener("mousemove",L,!0),document.addEventListener("mouseup",B)):A("Cannot drag the current selection (probably spread over multiple sections)")},function(e){uO.selecting||uO.dragging||(e.stopPropagation(),Cl(e.target,"data-type","selectable-value")?n(9,M=un):Cl(e.target,"data-type","insert-selection-area-inside")?n(9,M=ln):Cl(e.target,"data-type","insert-selection-area-after")&&n(9,M=cn),clearTimeout(P))},function(e){e.stopPropagation(),P=setTimeout((()=>n(9,M=void 0)))},function(e){e.shiftKey||(e.stopPropagation(),e.preventDefault(),O.onSelect({type:Ha,path:$}))},function(e){e.shiftKey||(e.stopPropagation(),e.preventDefault(),O.onSelect({type:qa,path:$}))},function(e){O.onSelect({type:Ha,path:$}),O.onContextMenu(e)},function(e){O.onSelect({type:qa,path:$}),O.onContextMenu(e)},k,S,E,j,w,b]}class gE extends Fe{constructor(e){super(),Ve(this,e,mE,dE,l,{value:0,path:1,state:35,selection:36,searchResult:2,validationErrors:3,context:4,onDragSelectionStart:37},null,[-1,-1])}}function vE(e){let t,n;return t=new Au({props:{items:e[0]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.items=e[0]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function yE(e,t,n){let r,i,o,s,a,l,c,{json:u}=t,{selection:h}=t,{readOnly:f}=t,{showSearch:d=!1}=t,{historyState:p}=t,{onExpandAll:m}=t,{onCollapseAll:g}=t,{onUndo:v}=t,{onRedo:y}=t,{onSort:w}=t,{onTransform:b}=t,{onContextMenu:x}=t,{onCopy:$}=t,{onRenderMenu:k=Yr}=t;function S(){n(1,d=!d)}return e.$$set=e=>{"json"in e&&n(2,u=e.json),"selection"in e&&n(3,h=e.selection),"readOnly"in e&&n(4,f=e.readOnly),"showSearch"in e&&n(1,d=e.showSearch),"historyState"in e&&n(5,p=e.historyState),"onExpandAll"in e&&n(6,m=e.onExpandAll),"onCollapseAll"in e&&n(7,g=e.onCollapseAll),"onUndo"in e&&n(8,v=e.onUndo),"onRedo"in e&&n(9,y=e.onRedo),"onSort"in e&&n(10,w=e.onSort),"onTransform"in e&&n(11,b=e.onTransform),"onContextMenu"in e&&n(12,x=e.onContextMenu),"onCopy"in e&&n(13,$=e.onCopy),"onRenderMenu"in e&&n(14,k=e.onRenderMenu)},e.$$.update=()=>{4&e.$$.dirty&&n(20,r=void 0!==u),e.$$.dirty,1048584&e.$$.dirty&&n(17,i=r&&null!=h&&(h.type===Ja||h.type===Wa||h.type===Ua)),68&e.$$.dirty&&n(19,o={icon:fu,title:"Expand all",className:"jse-expand-all",onClick:m,disabled:!jn(u)}),132&e.$$.dirty&&n(18,s={icon:du,title:"Collapse all",className:"jse-collapse-all",onClick:g,disabled:!jn(u)}),4&e.$$.dirty&&n(16,a={icon:hc,title:"Search (Ctrl+F)",className:"jse-search",onClick:S,disabled:void 0===u}),999220&e.$$.dirty&&n(15,l=f?[o,s,{separator:!0},{icon:sc,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:$,disabled:!i},{separator:!0},a,{space:!0}]:[o,s,{separator:!0},{icon:Gl,title:"Sort",className:"jse-sort",onClick:w,disabled:f||void 0===u},{icon:cc,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:b,disabled:f||void 0===u},a,{icon:lc,title:an,className:"jse-contextmenu",onClick:x},{separator:!0},{icon:Ql,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:v,disabled:!p.canUndo},{icon:Yl,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!p.canRedo},{space:!0}]),49152&e.$$.dirty&&n(0,c=k("tree",l)||l)},[c,d,u,h,f,p,m,g,v,y,w,b,x,$,k,l,a,i,s,o,r]}class wE extends Fe{constructor(e){super(),Ve(this,e,yE,vE,l,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}function bE(e){let t;return{c(){t=O("ul"),t.innerHTML='<li class="svelte-1q2qkk2">Click inside the editor</li> \n        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> \n        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> \n        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>',I(t,"class","svelte-1q2qkk2")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function xE(t){let n,r,i,o,s,a,l,c=!t[0]&&bE();return{c(){n=O("div"),r=O("div"),i=M(),o=O("div"),s=A("Empty document\n    "),c&&c.c(),a=M(),l=O("div"),I(r,"class","jse-space jse-before svelte-1q2qkk2"),I(o,"class","jse-contents svelte-1q2qkk2"),I(l,"class","jse-space jse-after svelte-1q2qkk2"),I(n,"class","jse-welcome svelte-1q2qkk2")},m(e,t){S(e,n,t),x(n,r),x(n,i),x(n,o),x(o,s),c&&c.m(o,null),x(n,a),x(n,l)},p(e,[t]){e[0]?c&&(c.d(1),c=null):c||(c=bE(),c.c(),c.m(o,null))},i:e,o:e,d(e){e&&C(n),c&&c.d()}}}function $E(e,t,n){let{readOnly:r}=t;return e.$$set=e=>{"readOnly"in e&&n(0,r=e.readOnly)},[r]}class kE extends Fe{constructor(e){super(),Ve(this,e,$E,xE,l,{readOnly:0})}}function SE(e,t,n){const r=e.slice();return r[4]=t[n],r}function CE(e,t){let n,r,i,o,s,a=NC(t[4],AE)+"";function l(){return t[3](t[4])}return{key:e,first:null,c(){n=O("button"),r=A(a),I(n,"type","button"),I(n,"class","jse-navigation-bar-dropdown-item svelte-6hb2gf"),I(n,"title",i=t[4]),H(n,"jse-selected",t[4]===t[1]),this.first=n},m(e,t){S(e,n,t),x(n,r),o||(s=j(n,"click",N(l)),o=!0)},p(e,o){t=e,1&o&&a!==(a=NC(t[4],AE)+"")&&B(r,a),1&o&&i!==(i=t[4])&&I(n,"title",i),3&o&&H(n,"jse-selected",t[4]===t[1])},d(e){e&&C(n),o=!1,s()}}}function _E(t){let n,r,i;return{c(){n=O("button"),r=A("..."),I(n,"type","button"),I(n,"class","jse-navigation-bar-dropdown-item svelte-6hb2gf"),I(n,"title",i="Limited to "+EE+" items")},m(e,t){S(e,n,t),x(n,r)},p:e,d(e){e&&C(n)}}}function OE(t){let n,r,i=[],o=new Map,s=Fn(t[0],EE);const a=e=>e[4];for(let e=0;e<s.length;e+=1){let n=SE(t,s,e),r=a(n);o.set(r,i[e]=CE(r,n))}let l=t[0].length>EE&&_E();return{c(){n=O("div");for(let e=0;e<i.length;e+=1)i[e].c();r=M(),l&&l.c(),I(n,"class","jse-navigation-bar-dropdown svelte-6hb2gf")},m(e,t){S(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null);x(n,r),l&&l.m(n,null)},p(e,[t]){7&t&&(s=Fn(e[0],EE),i=Ne(i,t,a,1,e,s,o,n,je,CE,r,SE)),e[0].length>EE?l?l.p(e,t):(l=_E(),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},i:e,o:e,d(e){e&&C(n);for(let e=0;e<i.length;e+=1)i[e].d();l&&l.d()}}}const EE=100,AE=30;function ME(e,t,n){let{items:r}=t,{selectedItem:i}=t,{onSelect:o}=t;return e.$$set=e=>{"items"in e&&n(0,r=e.items),"selectedItem"in e&&n(1,i=e.selectedItem),"onSelect"in e&&n(2,o=e.onSelect)},[r,i,o,e=>o(e)]}class PE extends Fe{constructor(e){super(),Ve(this,e,ME,OE,l,{items:0,selectedItem:1,onSelect:2})}}function jE(e){let t,n,r,i;return{c(){t=O("button"),n=A(e[2]),I(t,"type","button"),I(t,"class","jse-navigation-bar-button svelte-1r1k9th")},m(o,s){S(o,t,s),x(t,n),r||(i=j(t,"click",e[9]),r=!0)},p(e,t){4&t&&B(n,e[2])},d(e){e&&C(t),r=!1,i()}}}function TE(e){let t,n,r,i,o,s,a;r=new Uc({props:{data:Jl}});let l=void 0!==e[2]&&jE(e);return{c(){t=O("div"),n=O("button"),Le(r.$$.fragment),i=M(),l&&l.c(),I(n,"type","button"),I(n,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"),H(n,"jse-open",e[1]),I(t,"class","jse-navigation-bar-item svelte-1r1k9th")},m(c,u){S(c,t,u),x(t,n),Be(r,n,null),x(t,i),l&&l.m(t,null),e[10](t),o=!0,s||(a=j(n,"click",e[4]),s=!0)},p(e,[r]){2&r&&H(n,"jse-open",e[1]),void 0!==e[2]?l?l.p(e,r):(l=jE(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i(e){o||(Oe(r.$$.fragment,e),o=!0)},o(e){Ee(r.$$.fragment,e),o=!1},d(n){n&&C(t),ze(r),l&&l.d(),e[10](null),s=!1,a()}}}function NE(e,t,n){let r,i;const{openAbsolutePopup:o,closeAbsolutePopup:s}=oe("absolute-popup");let a,{path:l}=t,{index:c}=t,{onSelect:u}=t,{getItems:h}=t,f=!1;function d(e){s(),u(r.concat(e))}return e.$$set=e=>{"path"in e&&n(5,l=e.path),"index"in e&&n(6,c=e.index),"onSelect"in e&&n(7,u=e.onSelect),"getItems"in e&&n(8,h=e.getItems)},e.$$.update=()=>{96&e.$$.dirty&&(r=l.slice(0,c)),96&e.$$.dirty&&n(2,i=l[c])},[a,f,i,d,function(){if(a){n(1,f=!0);const e={items:h(r),selectedItem:i,onSelect:d};o(PE,e,{anchor:a,closeOnOuterClick:!0,onClose:()=>{n(1,f=!1)}})}},l,c,u,h,()=>d(i),function(e){le[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class IE extends Fe{constructor(e){super(),Ve(this,e,NE,TE,l,{path:5,index:6,onSelect:7,getItems:8})}}var DE=xn((function(e){
/*
     * @version    1.4.0
     * @date       2015-10-26
     * @stability  3 - Stable
     * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
     * @license    MIT License
     */
var t=function(e,t){var n,r,i=1,o=0,s=0,a=String.alphabet;function l(e,t,r){if(r){for(n=t;(r=l(e,n))<76&&r>65;)++n;return+e.slice(t-1,n)}return(r=a&&a.indexOf(e.charAt(t)))>-1?r+76:(r=e.charCodeAt(t)||0)<45||r>127?r:r<46?65:r<48?r-1:r<58?r+18:r<65?r-11:r<91?r+11:r<97?r-37:r<123?r+5:r-63}if((e+="")!=(t+=""))for(;i;)if(r=l(e,o++),i=l(t,s++),r<76&&i<76&&r>66&&i>66&&(r=l(e,o,o),i=l(t,s,o=n),s=n),r!=i)return r<i?-1:1;return 0};try{e.exports=t}catch(e){String.naturalCompare=t}}));function RE(e,t){const n="string"==typeof e?e.toLowerCase():e,r="string"==typeof t?t.toLowerCase():t;return DE(n,r)}function LE(e,t=[],n=[],r=1){const i=function(e,t){return function(n,r){const i=kn.getIn(n,e),o=kn.getIn(r,e);return void 0===i?t:void 0===o?-t:"string"!=typeof i&&"string"!=typeof o?i>o?t:i<o?-t:0:t*RE(i,o)}}(n,r),o=kn.getIn(e,t);return[{op:"replace",path:kn.compileJSONPointer(t),value:o.slice(0).sort(i)}]}function BE(e,t,n){const r=e.slice();return r[12]=t[n],r[14]=n,r}function zE(e,t){let n,r,i;return r=new IE({props:{getItems:t[4],path:t[1],index:t[14],onSelect:t[5]}}),{key:e,first:null,c(){n=P(),Le(r.$$.fragment),this.first=n},m(e,t){S(e,n,t),Be(r,e,t),i=!0},p(e,n){t=e;const i={};2&n&&(i.path=t[1]),2&n&&(i.index=t[14]),r.$set(i)},i(e){i||(Oe(r.$$.fragment,e),i=!0)},o(e){Ee(r.$$.fragment,e),i=!1},d(e){e&&C(n),ze(r,e)}}}function VE(e){let t,n;return t=new IE({props:{getItems:e[4],path:e[1],index:void 0,onSelect:e[5]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.path=e[1]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function FE(e){let t,n,r,i,o,s,a=[],l=new Map,c=jn(e[0])?"¬†":"Navigation bar",u=e[1];const h=e=>e[14];for(let t=0;t<u.length;t+=1){let n=BE(e,u,t),r=h(n);l.set(r,a[t]=zE(r,n))}let f=e[3]&&VE(e);return{c(){t=O("div");for(let e=0;e<a.length;e+=1)a[e].c();n=M(),f&&f.c(),r=M(),i=O("div"),o=A(c),I(i,"class","jse-navigation-bar-space svelte-5lwyke"),I(t,"class","jse-navigation-bar svelte-5lwyke")},m(l,c){S(l,t,c);for(let e=0;e<a.length;e+=1)a[e].m(t,null);x(t,n),f&&f.m(t,null),x(t,r),x(t,i),x(i,o),e[9](t),s=!0},p(e,[i]){50&i&&(u=e[1],Ce(),a=Ne(a,i,h,1,e,u,l,t,Te,zE,n,BE),_e()),e[3]?f?(f.p(e,i),8&i&&Oe(f,1)):(f=VE(e),f.c(),Oe(f,1),f.m(t,r)):f&&(Ce(),Ee(f,1,1,(()=>{f=null})),_e()),(!s||1&i)&&c!==(c=jn(e[0])?"¬†":"Navigation bar")&&B(o,c)},i(e){if(!s){for(let e=0;e<u.length;e+=1)Oe(a[e]);Oe(f),s=!0}},o(e){for(let e=0;e<a.length;e+=1)Ee(a[e]);Ee(f),s=!1},d(n){n&&C(t);for(let e=0;e<a.length;e+=1)a[e].d();f&&f.d(),e[9](null)}}}function qE(e,t,n){let r,i;const o=Et("jsoneditor:NavigationBar");let s,{json:a}=t,{state:l}=t,{selection:c}=t,{onSelect:u}=t;return e.$$set=e=>{"json"in e&&n(0,a=e.json),"state"in e&&n(6,l=e.state),"selection"in e&&n(7,c=e.selection),"onSelect"in e&&n(8,u=e.onSelect)},e.$$.update=()=>{128&e.$$.dirty&&n(1,r=c?c.focusPath:[]),3&e.$$.dirty&&n(3,i=jn(kn.getIn(a,r))),2&e.$$.dirty&&setTimeout((()=>{if(s&&s.scrollTo){const e=s.scrollWidth-s.clientWidth;e>0&&(o("scrollTo ",e),s.scrollTo({left:e,behavior:"smooth"}))}}))},[a,r,s,i,function(e){o("get items for path",e);const t=kn.getIn(a,e);if(Array.isArray(t))return ua(0,t.length);if(Pn(t)){const n=(kn.getIn(l,e.concat(Ht))||Object.keys(t)).slice(0);return n.sort(RE),n}return[]},function(e){o("select path",JSON.stringify(e));const t=al(a,l,{type:Ja,anchorPath:e,focusPath:e});u(t)},l,c,u,function(e){le[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class HE extends Fe{constructor(e){super(),Ve(this,e,qE,FE,l,{json:0,state:6,selection:7,onSelect:8})}}function WE(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,g,v,y,w,b,$,k,_,E,P,T,N,D,R,L,V,F=-1!==e[3]?`${e[3]+1}/`:"",q=!e[4]&&UE(e);const W=[KE,JE],U=[];function J(e,t){return e[2]?0:1}l=J(e),c=U[l]=W[l](e),$=new Uc({props:{data:tc}}),E=new Uc({props:{data:nc}}),N=new Uc({props:{data:wc}});let K=e[0]&&!e[4]&&GE(e);return{c(){t=O("div"),n=O("form"),q&&q.c(),r=M(),i=O("div"),s=O("div"),a=O("div"),c.c(),u=M(),h=O("label"),f=O("input"),p=M(),g=O("div"),v=A(F),y=A(e[10]),w=M(),b=O("button"),Le($.$$.fragment),k=M(),_=O("button"),Le(E.$$.fragment),P=M(),T=O("button"),Le(N.$$.fragment),D=M(),K&&K.c(),I(a,"class","jse-search-icon svelte-18vllqh"),I(f,"class","jse-search-input svelte-18vllqh"),I(f,"title","Enter text to search"),I(f,"type","text"),I(f,"placeholder","Find"),I(h,"class","jse-search-input-label svelte-18vllqh"),I(h,"about","jse-search input"),I(g,"class","jse-search-count svelte-18vllqh"),H(g,"jse-visible",""!==e[8]),I(b,"type","button"),I(b,"class","jse-search-next svelte-18vllqh"),I(b,"title","Go to next search result (Enter)"),I(_,"type","button"),I(_,"class","jse-search-previous svelte-18vllqh"),I(_,"title","Go to previous search result (Shift+Enter)"),I(T,"type","button"),I(T,"class","jse-search-clear svelte-18vllqh"),I(T,"title","Close search box (Esc)"),I(s,"class","jse-search-section svelte-18vllqh"),I(i,"class","jse-search-contents svelte-18vllqh"),I(n,"class","jse-search-form svelte-18vllqh"),I(t,"class","jse-search-box svelte-18vllqh")},m(o,c){S(o,t,c),x(t,n),q&&q.m(n,null),x(n,r),x(n,i),x(i,s),x(s,a),U[l].m(a,null),x(s,u),x(s,h),x(h,f),z(f,e[8]),x(s,p),x(s,g),x(g,v),x(g,y),x(s,w),x(s,b),Be($,b,null),x(s,k),x(s,_),Be(E,_,null),x(s,P),x(s,T),Be(N,T,null),x(i,D),K&&K.m(i,null),R=!0,L||(V=[j(f,"input",e[21]),m(d=YE.call(null,f)),j(b,"click",e[22]),j(_,"click",e[23]),j(T,"click",e[24]),j(n,"submit",e[12]),j(n,"keydown",e[13])],L=!0)},p(e,t){e[4]?q&&(Ce(),Ee(q,1,1,(()=>{q=null})),_e()):q?(q.p(e,t),16&t&&Oe(q,1)):(q=UE(e),q.c(),Oe(q,1),q.m(n,r));let o=l;l=J(e),l===o?U[l].p(e,t):(Ce(),Ee(U[o],1,1,(()=>{U[o]=null})),_e(),c=U[l],c?c.p(e,t):(c=U[l]=W[l](e),c.c()),Oe(c,1),c.m(a,null)),256&t&&f.value!==e[8]&&z(f,e[8]),(!R||8&t)&&F!==(F=-1!==e[3]?`${e[3]+1}/`:"")&&B(v,F),(!R||1024&t)&&B(y,e[10]),256&t&&H(g,"jse-visible",""!==e[8]),e[0]&&!e[4]?K?K.p(e,t):(K=GE(e),K.c(),K.m(i,null)):K&&(K.d(1),K=null)},i(e){R||(Oe(q),Oe(c),Oe($.$$.fragment,e),Oe(E.$$.fragment,e),Oe(N.$$.fragment,e),R=!0)},o(e){Ee(q),Ee(c),Ee($.$$.fragment,e),Ee(E.$$.fragment,e),Ee(N.$$.fragment,e),R=!1},d(e){e&&C(t),q&&q.d(),U[l].d(),ze($),ze(E),ze(N),K&&K.d(),L=!1,o(V)}}}function UE(e){let t,n,r,i,o;return n=new Uc({props:{data:e[0]?Xl:Zl}}),{c(){t=O("button"),Le(n.$$.fragment),I(t,"type","button"),I(t,"class","jse-replace-toggle svelte-18vllqh"),I(t,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,a){S(s,t,a),Be(n,t,null),r=!0,i||(o=j(t,"click",e[11]),i=!0)},p(e,t){const r={};1&t&&(r.data=e[0]?Xl:Zl),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n),i=!1,o()}}}function JE(t){let n,r;return n=new Uc({props:{data:hc}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function KE(t){let n,r;return n=new Uc({props:{data:rc,spin:!0}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function GE(e){let t,n,r,i,s,a,l,c;return{c(){t=O("div"),n=O("input"),r=M(),i=O("button"),i.textContent="Replace",s=M(),a=O("button"),a.textContent="All",I(n,"class","jse-replace-input svelte-18vllqh"),I(n,"title","Enter replacement text"),I(n,"type","text"),I(n,"placeholder","Replace"),I(i,"type","button"),I(i,"title","Replace current occurrence (Ctrl+Enter)"),I(i,"class","svelte-18vllqh"),I(a,"type","button"),I(a,"title","Replace all occurrences"),I(a,"class","svelte-18vllqh"),I(t,"class","jse-replace-section svelte-18vllqh")},m(o,u){S(o,t,u),x(t,n),z(n,e[9]),x(t,r),x(t,i),x(t,s),x(t,a),l||(c=[j(n,"input",e[25]),j(i,"click",e[14]),j(a,"click",e[15])],l=!0)},p(e,t){512&t&&n.value!==e[9]&&z(n,e[9])},d(e){e&&C(t),l=!1,o(c)}}}function QE(e){let t,n,r=e[1]&&WE(e);return{c(){r&&r.c(),t=P()},m(e,i){r&&r.m(e,i),S(e,t,i),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&Oe(r,1)):(r=WE(e),r.c(),Oe(r,1),r.m(t.parentNode,t)):r&&(Ce(),Ee(r,1,1,(()=>{r=null})),_e())},i(e){n||(Oe(r),n=!0)},o(e){Ee(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function YE(e){e.select()}function XE(e,t,n){let r,i,{show:o=!1}=t,{searching:s}=t,{resultCount:a=0}=t,{activeIndex:l=0}=t,{showReplace:c=!1}=t,{readOnly:u=!1}=t,{onChange:h=Yr}=t,{onPrevious:f=Yr}=t,{onNext:d=Yr}=t,{onReplace:p=Yr}=t,{onReplaceAll:m=Yr}=t,{onClose:g=Yr}=t,v="",y="",w="";function b(){n(0,c=!c&&!u)}function x(){u||p(v,w)}return e.$$set=e=>{"show"in e&&n(1,o=e.show),"searching"in e&&n(2,s=e.searching),"resultCount"in e&&n(16,a=e.resultCount),"activeIndex"in e&&n(3,l=e.activeIndex),"showReplace"in e&&n(0,c=e.showReplace),"readOnly"in e&&n(4,u=e.readOnly),"onChange"in e&&n(17,h=e.onChange),"onPrevious"in e&&n(5,f=e.onPrevious),"onNext"in e&&n(6,d=e.onNext),"onReplace"in e&&n(18,p=e.onReplace),"onReplaceAll"in e&&n(19,m=e.onReplaceAll),"onClose"in e&&n(7,g=e.onClose)},e.$$.update=()=>{65536&e.$$.dirty&&n(10,r=a>=Qt?"999+":String(a)),131072&e.$$.dirty&&n(20,i=Hs(h,300)),1048832&e.$$.dirty&&i(v),2&e.$$.dirty&&o&&""!==v&&h(v)},[c,o,s,l,u,f,d,g,v,w,r,b,function(e){e.preventDefault(),v!==y?(y=v,i.cancel(),h(v)):d()},function(e){e.stopPropagation();const t=Rl(e);"Enter"===t&&(e.preventDefault(),d()),"Shift+Enter"===t&&(e.preventDefault(),f()),"Ctrl+Enter"!==t&&"Command+Enter"!==t||(e.preventDefault(),c?x():d()),"Ctrl+H"===t&&(e.preventDefault(),b()),"Escape"===t&&(e.preventDefault(),g())},x,function(){u||m(v,w)},a,h,p,m,i,function(){v=this.value,n(8,v)},()=>d(),()=>f(),()=>g(),function(){w=this.value,n(9,w)}]}class ZE extends Fe{constructor(e){super(),Ve(this,e,XE,QE,l,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const{window:eA}=Pe;function tA(e){let t,n,r;function i(t){e[72](t)}let o={json:e[7],selection:e[9],readOnly:e[0],historyState:e[20],onExpandAll:e[39],onCollapseAll:e[40],onUndo:e[35],onRedo:e[36],onSort:e[37],onTransform:e[38],onContextMenu:e[44],onCopy:e[33],onRenderMenu:e[4]};return void 0!==e[16]&&(o.showSearch=e[16]),t=new wE({props:o}),le.push((()=>Re(t,"showSearch",i))),{c(){Le(t.$$.fragment)},m(e,n){Be(t,e,n),r=!0},p(e,r){const i={};128&r[0]&&(i.json=e[7]),512&r[0]&&(i.selection=e[9]),1&r[0]&&(i.readOnly=e[0]),1048576&r[0]&&(i.historyState=e[20]),16&r[0]&&(i.onRenderMenu=e[4]),!n&&65536&r[0]&&(n=!0,i.showSearch=e[16],ge((()=>n=!1))),t.$set(i)},i(e){r||(Oe(t.$$.fragment,e),r=!0)},o(e){Ee(t.$$.fragment,e),r=!1},d(e){ze(t,e)}}}function nA(e){let t,n;return t=new HE({props:{json:e[7],state:e[14],selection:e[9],onSelect:e[47]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};128&n[0]&&(r.json=e[7]),16384&n[0]&&(r.state=e[14]),512&n[0]&&(r.selection=e[9]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function rA(t){let n;return{c(){n=O("div"),n.innerHTML='<div class="jse-loading-space svelte-1wno2xw"></div> \n      <div class="jse-loading svelte-1wno2xw">loading...</div>',I(n,"class","jse-contents svelte-1wno2xw")},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function iA(e){let t,n,r,i,o,s,a,l,c;const u=[sA,oA],h=[];function f(e,t){return void 0===e[7]?0:1}return i=f(e),o=h[i]=u[i](e),{c(){t=O("label"),n=O("input"),r=M(),o.c(),s=P(),I(n,"class","jse-hidden-input svelte-1wno2xw"),I(n,"tabindex","-1"),I(t,"class","jse-hidden-input-label svelte-1wno2xw")},m(o,u){S(o,t,u),x(t,n),e[73](n),S(o,r,u),h[i].m(o,u),S(o,s,u),a=!0,l||(c=j(n,"paste",e[34]),l=!0)},p(e,t){let n=i;i=f(e),i===n?h[i].p(e,t):(Ce(),Ee(h[n],1,1,(()=>{h[n]=null})),_e(),o=h[i],o?o.p(e,t):(o=h[i]=u[i](e),o.c()),Oe(o,1),o.m(s.parentNode,s))},i(e){a||(Oe(o),a=!0)},o(e){Ee(o),a=!1},d(n){n&&C(t),e[73](null),n&&C(r),h[i].d(n),n&&C(s),l=!1,c()}}}function oA(e){let t,n,r,i,o,s,a,l,c,u;n=new ZE({props:{show:e[16],resultCount:e[19]?e[19].count:0,activeIndex:e[19]?e[19].activeIndex:0,showReplace:e[17],searching:e[18],readOnly:e[0],onChange:e[26],onNext:e[27],onPrevious:e[28],onReplace:e[29],onReplaceAll:e[30],onClose:e[31]}}),o=new gE({props:{value:e[7],path:e[25],state:e[14],selection:e[23],searchResult:e[19]&&e[19].itemsWithActive,validationErrors:e[22],context:e[10],onDragSelectionStart:Yr}});let h=e[15]&&aA(e),f=e[21]&&lA(e);return c=new hu({props:{validationErrors:e[11],selectError:e[32]}}),{c(){t=O("div"),Le(n.$$.fragment),r=M(),i=O("div"),Le(o.$$.fragment),s=M(),h&&h.c(),a=M(),f&&f.c(),l=M(),Le(c.$$.fragment),I(t,"class","jse-search-box-container svelte-1wno2xw"),I(i,"class","jse-contents svelte-1wno2xw"),I(i,"data-jsoneditor-scrollable-contents",!0)},m(d,p){S(d,t,p),Be(n,t,null),S(d,r,p),S(d,i,p),Be(o,i,null),e[74](i),S(d,s,p),h&&h.m(d,p),S(d,a,p),f&&f.m(d,p),S(d,l,p),Be(c,d,p),u=!0},p(e,t){const r={};65536&t[0]&&(r.show=e[16]),524288&t[0]&&(r.resultCount=e[19]?e[19].count:0),524288&t[0]&&(r.activeIndex=e[19]?e[19].activeIndex:0),131072&t[0]&&(r.showReplace=e[17]),262144&t[0]&&(r.searching=e[18]),1&t[0]&&(r.readOnly=e[0]),n.$set(r);const i={};128&t[0]&&(i.value=e[7]),16384&t[0]&&(i.state=e[14]),8388608&t[0]&&(i.selection=e[23]),524288&t[0]&&(i.searchResult=e[19]&&e[19].itemsWithActive),4194304&t[0]&&(i.validationErrors=e[22]),1024&t[0]&&(i.context=e[10]),o.$set(i),e[15]?h?(h.p(e,t),32768&t[0]&&Oe(h,1)):(h=aA(e),h.c(),Oe(h,1),h.m(a.parentNode,a)):h&&(Ce(),Ee(h,1,1,(()=>{h=null})),_e()),e[21]?f?(f.p(e,t),2097152&t[0]&&Oe(f,1)):(f=lA(e),f.c(),Oe(f,1),f.m(l.parentNode,l)):f&&(Ce(),Ee(f,1,1,(()=>{f=null})),_e());const s={};2048&t[0]&&(s.validationErrors=e[11]),c.$set(s)},i(e){u||(Oe(n.$$.fragment,e),Oe(o.$$.fragment,e),Oe(h),Oe(f),Oe(c.$$.fragment,e),u=!0)},o(e){Ee(n.$$.fragment,e),Ee(o.$$.fragment,e),Ee(h),Ee(f),Ee(c.$$.fragment,e),u=!1},d(u){u&&C(t),ze(n),u&&C(r),u&&C(i),ze(o),e[74](null),u&&C(s),h&&h.d(u),u&&C(a),f&&f.d(u),u&&C(l),ze(c,u)}}}function sA(e){let t,n,r,i;const o=[uA,cA],s=[];function a(e,t){return""===e[8]||void 0===e[8]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},m(e,n){s[t].m(e,n),S(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Oe(n,1),n.m(r.parentNode,r))},i(e){i||(Oe(n),i=!0)},o(e){Ee(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function aA(e){let t,n;return t=new Zc({props:{type:"info",message:`You pasted a JSON ${Array.isArray(e[15].contents)?"array":"object"} as text`,actions:[{icon:yc,text:"Paste as JSON instead",onMouseDown:e[45]},{text:"Leave as is",onClick:e[46]}]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.message=`You pasted a JSON ${Array.isArray(e[15].contents)?"array":"object"} as text`),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function lA(e){let t,n;return t=new Zc({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:e[0]?[]:[{icon:ec,text:"Ok",onClick:e[5]},{icon:oc,text:"Repair manually instead",onClick:e[3]}]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};9&n[0]&&(r.actions=e[0]?[]:[{icon:ec,text:"Ok",onClick:e[5]},{icon:oc,text:"Repair manually instead",onClick:e[3]}]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function cA(e){let t,n,r,i,o;return t=new Zc({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:e[0]?[]:[{icon:oc,text:"Repair manually",onClick:e[3]}]}}),{c(){Le(t.$$.fragment),n=M(),r=O("div"),i=A(e[8]),I(r,"class","jse-preview svelte-1wno2xw")},m(e,s){Be(t,e,s),S(e,n,s),S(e,r,s),x(r,i),o=!0},p(e,n){const r={};9&n[0]&&(r.actions=e[0]?[]:[{icon:oc,text:"Repair manually",onClick:e[3]}]),t.$set(r),(!o||256&n[0])&&B(i,e[8])},i(e){o||(Oe(t.$$.fragment,e),o=!0)},o(e){Ee(t.$$.fragment,e),o=!1},d(e){ze(t,e),e&&C(n),e&&C(r)}}}function uA(e){let t,n;return t=new kE({props:{readOnly:e[0]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.readOnly=e[0]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function hA(e){let t,n,r,i,s,a,l,c,u=e[1]&&tA(e),h=e[2]&&nA(e);const f=[iA,rA],d=[];return i=function(e,t){return e[24]?1:0}(e),s=d[i]=f[i](e),{c(){t=O("div"),u&&u.c(),n=M(),h&&h.c(),r=M(),s.c(),I(t,"class","jse-tree-mode svelte-1wno2xw"),H(t,"no-main-menu",!e[1])},m(o,s){S(o,t,s),u&&u.m(t,null),x(t,n),h&&h.m(t,null),x(t,r),d[i].m(t,null),e[75](t),a=!0,l||(c=[j(eA,"mousedown",e[48]),j(t,"keydown",e[41]),j(t,"mousedown",e[42]),j(t,"contextmenu",e[43])],l=!0)},p(e,i){e[1]?u?(u.p(e,i),2&i[0]&&Oe(u,1)):(u=tA(e),u.c(),Oe(u,1),u.m(t,n)):u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e()),e[2]?h?(h.p(e,i),4&i[0]&&Oe(h,1)):(h=nA(e),h.c(),Oe(h,1),h.m(t,r)):h&&(Ce(),Ee(h,1,1,(()=>{h=null})),_e()),s.p(e,i),2&i[0]&&H(t,"no-main-menu",!e[1])},i(e){a||(Oe(u),Oe(h),Oe(s),a=!0)},o(e){Ee(u),Ee(h),Ee(s),a=!1},d(n){n&&C(t),u&&u.d(),h&&h.d(),d[i].d(),e[75](null),l=!1,o(c)}}}function fA(e){return e.length<1||1===e.length&&0===e[0]}function dA(){return!0}function pA(e,t,n){let r,i,o,s,a,l;const c=Et("jsoneditor:TreeMode"),u="undefined"==typeof window;c("isSSR:",u);const{open:h}=oe("simple-modal"),f=va(),d=va(),{openAbsolutePopup:p,closeAbsolutePopup:m}=oe("absolute-popup");let g,v,y,w=!1;const b=jC();let x,$,{readOnly:k=!1}=t,{externalContent:S}=t,{mainMenuBar:C=!0}=t,{navigationBar:_=!0}=t,{escapeControlCharacters:O=!1}=t,{escapeUnicodeCharacters:E=!1}=t,{validator:A=null}=t,{indentation:M=2}=t,{onError:P}=t,{onChange:j}=t,{onRenderValue:T}=t,{onRequestRepair:N=Yr}=t,{onRenderMenu:I=Yr}=t,{onClassName:D}=t,{onFocus:R}=t,{onBlur:L}=t,{onSortModal:B}=t,{onTransformModal:z}=t,V=!1;$c({onMount:te,onDestroy:ne,getWindow:()=>Al(y),hasFocus:()=>V&&document.hasFocus()||Ml(y),onFocus:()=>{w=!0,R&&R()},onBlur:()=>{w=!1,L&&L()}});let F=Sa({},void 0,[],fA);let q,H=null;function W(e){return Zn({json:e},10240)?fA:dA}let U,J=!1,K=!1,G=!1,Q="";async function Y(e){c("search text updated",e),n(69,Q=e),await pe(),await X(U&&U.activeItem)}async function X(e){if(e){const t=e.path;n(14,F=Ea(x,F,t)),n(9,H=null),await pe(),await Re(t)}}const Z=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Sr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Hs(e,t,{leading:r,maxWait:t,trailing:i})}((function(){""!==Q?(n(18,G=!0),setTimeout((()=>{c("searching...",Q);const e=WC(Q,x,F,Qt);n(19,U=HC(x,e,U)),n(18,G=!1)}))):n(19,U=void 0)}),300);const ee=function(e={}){const t=e.maxItems||1e3;let n=[],r=0;function i(){return r<n.length}function o(){return r>0}function s(){return{canUndo:i(),canRedo:o(),length:n.length}}function a(){e.onChange&&e.onChange(s())}return{add:function(e){n=[e].concat(n.slice(r)).slice(0,t),r=0,a()},clear:function(){n=[],r=0,a()},getState:s,undo:function(){if(i()){const e=n[r];return r+=1,a(),e}},redo:function(){if(o())return r-=1,a(),n[r]}}}({onChange:e=>{n(20,re=e)}});let re=ee.getState();let ie=!1;function se(e){void 0!==e.json&&function(e){if(void 0===e)return;const t=!ta(x,e),r=void 0===x;if(c("update external json",{isChanged:t,isText:r}),!t)return;const i=F,o=x,s=$,a=ie,l=H;n(7,x=e),n(14,F=Sa(x,i,[],W(x),!1)),n(8,$=void 0),n(21,ie=!1),n(9,H=ae(H,x)),ce({previousJson:o,previousState:i,previousText:s,previousTextIsRepaired:a,previousSelection:l}),Z()}(e.json),void 0!==e.text&&function(e){if(void 0===e||void 0!==S.json)return;if(e===$)return;c("update external text");const t=x,r=F,i=$,o=ie,s=H;try{n(7,x=JSON.parse(e)),n(14,F=Sa(x,r,[],W(x),!1)),n(8,$=e),n(21,ie=!1),n(9,H=ae(H,x))}catch(t){try{n(7,x=JSON.parse(Mn(e))),n(14,F=Sa(x,r,[],W(x),!1)),n(8,$=e),n(21,ie=!0),n(9,H=ae(H,x))}catch(e){n(7,x=void 0),n(14,F=void 0),n(8,$=S.text),n(21,ie=!1),n(9,H=ae(H,x))}}H||void 0!==x||""!==$&&void 0!==$||n(9,H=ue());ce({previousJson:t,previousState:r,previousText:i,previousTextIsRepaired:o,previousSelection:s}),Z()}(e.text)}function ae(e,t){return e&&kn.existsIn(t,e.anchorPath)&&kn.existsIn(t,e.focusPath)?e:(c("clearing selection: path does not exist anymore"),null)}function ce({previousJson:e,previousState:t,previousText:n,previousTextIsRepaired:r,previousSelection:i}){void 0===e&&void 0===n||(void 0!==x?void 0!==e?ee.add({undo:{patch:[{op:"replace",path:"",value:e}],state:t,text:n,textIsRepaired:r,selection:sl(i)},redo:{patch:[{op:"replace",path:"",value:x}],state:F,text:$,textIsRepaired:ie,selection:sl(H)}}):ee.add({undo:{state:t,text:n,textIsRepaired:r,selection:sl(i)},redo:{json:x,state:F,text:$,textIsRepaired:ie,selection:sl(H)}}):void 0!==e&&ee.add({undo:{json:e,state:t,text:n,textIsRepaired:r,selection:sl(i)},redo:{text:$,textIsRepaired:ie,state:F,selection:sl(H)}}))}function ue(){return al(x||{},F,{type:Ja,anchorPath:[],focusPath:[]})}function he(e,t){if(void 0===x)throw new Error("Cannot apply patch: no JSON");const r=x,i=F,o=$,s=ie,a=H;c("patch",e,t);const l=kn.revertJSONPatch(x,e),u=Ma(x,F,e),h="function"==typeof t?t(u.json,u.state,H):void 0;return n(7,x=h&&void 0!==h.json?h.json:u.json),n(14,F=h&&void 0!==h.state?h.state:u.state),n(8,$=void 0),n(21,ie=!1),n(9,H=h&&h.selection?h.selection:tl(r,0,e)),n(9,H=ae(H,x)),ee.add({undo:{patch:l,state:i,text:o,textIsRepaired:s,selection:sl(a)},redo:{patch:e,state:F,text:$,textIsRepaired:ie,selection:sl(H)}}),{json:x,previousJson:r,undo:l,redo:e}}function fe(){return H&&(H.type===Ja||H.type===Wa||H.type===Ua)}function de(){!k&&H&&n(9,H=al(x,F,{type:Wa,path:H.focusPath,edit:!0}))}function me(){!k&&H&&n(9,H=al(x,F,{type:Ua,path:H.focusPath,edit:!0}))}function ge(){if(k||!H||H.type!==Ua)return;const e=H.focusPath,t=e.concat(Jt),r=!kn.getIn(F,t);n(14,F=kn.setIn(F,t,r,!0));const i=kn.getIn(x,e),o=r?String(i):Rn(i);o!==i&&Ve([{op:"replace",path:kn.compileJSONPointer(e),value:o}])}async function ve(e=!0){if(k||!fe())return;const t=ll(x,H,e?M:null);if(null==t)return;c("cut",{selection:H,clipboard:t,indent:e});try{await navigator.clipboard.writeText(t)}catch(e){P(e)}const{operations:n,newSelection:r}=qC(x,F,H);Ve(n,(()=>({selection:r})))}async function ye(e=!0){const t=ll(x,H,e?M:null);if(null!=t){c("copy",{clipboard:t,indent:e});try{await navigator.clipboard.writeText(t)}catch(e){P(e)}}}function we(){h(n_,{},{...nn,styleWindow:{...nn.styleWindow,width:"450px"}},{onClose:()=>setTimeout(R)})}function be(e){if(void 0!==x){const t=H||ue(),n=LC(x,F,t,e);c("paste",{clipboardText:e,operations:n,selectionOrDefault:t}),Ve(n,((e,t)=>{let r=t;return n.filter((e=>jn(e.value))).forEach((t=>{const n=ya(x,t.path);r=qe(e,r,n)})),{state:r}}))}else c("paste text",{clipboardText:e}),function(e,t){const r=F,i=x,o=$,s={json:x,text:$},a=ie,l=H;try{n(7,x=JSON.parse(e)),n(14,F=Sa(x,r,[],fA)),n(8,$=void 0),n(21,ie=!1)}catch(t){try{n(7,x=JSON.parse(Mn(e))),n(14,F=Sa(x,r,[],fA)),n(8,$=e),n(21,ie=!0)}catch(t){n(7,x=void 0),n(14,F=Sa(x,Ca(x),[],fA)),n(8,$=e),n(21,ie=!1)}}if("function"==typeof t){const e=t(x,F,H);n(7,x=e&&e.json?e.json:x),n(14,F=e&&e.state?e.state:F),n(9,H=e&&e.selection?e.selection:H)}n(9,H=ae(H,x)),ce({previousJson:i,previousState:r,previousText:o,previousTextIsRepaired:a,previousSelection:l});ze(s,null)}(e,((e,t)=>{if(e){return{state:qe(e,t,[])}}}))}function xe(){if(k||!H)return;const e=H.type===Wa||H.type===Ua?al(x,F,{type:Ja,anchorPath:H.anchorPath,focusPath:H.focusPath}):H;if(ea(H.focusPath)){c("remove root",{selection:H});j({text:"",json:void 0},{text:$,json:x},null)}else{const{operations:t,newSelection:n}=qC(x,F,e);c("remove",{operations:t,selection:H,newSelection:n}),Ve(t,(()=>({selection:n})))}}function $e(){if(k||!fe()||ea(H.focusPath))return;c("duplicate",{selection:H});const e=function(e,t,n){const r=Ws(n);if(ea(r))throw new Error("Cannot duplicate root object");const i=Xs(r),o=Ws(r),s=kn.getIn(e,i);if(Array.isArray(s)){const e=Ws(n),t=e?parseInt(Ws(e),10)+1:0;return[...n.map(((e,n)=>({op:"copy",from:kn.compileJSONPointer(e),path:kn.compileJSONPointer(i.concat(n+t))})))]}{const e=ja(t,i),r=Ia(e,o,!1);return[...n.map((t=>{const n=TC(Ws(t),e);return{op:"copy",from:kn.compileJSONPointer(t),path:kn.compileJSONPointer(i.concat(n))}})),...r.map((e=>VC(i,e)))]}}(x,F,H.paths||[H.focusPath]);Ve(e)}function ke(){if(k||!H||H.type!==Ja&&H.type!==Ua||ea(H.focusPath))return;c("extract",{selection:H});const e=function(e,t,n){if(n.type===Ua)return[{op:"move",from:kn.compileJSONPointer(n.focusPath),path:""}];if(n.type===Ja){const t=Xs(n.focusPath),r=kn.getIn(e,t);if(Array.isArray(r))return[{op:"replace",path:"",value:n.paths.map((e=>{const t=Ws(e);return r[t]}))}];{const e={};return n.paths.forEach((t=>{const n=Ws(t);e[n]=r[n]})),[{op:"replace",path:"",value:e}]}}throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(n))}(x,0,H);Ve(e,((e,t)=>{if(jn(e)){return{state:qe(e,t,[])}}})),Ye()}function Se(e){if(k||!H)return;const t=BC(x,H,e);if(void 0!==x){const n=JSON.stringify(t),r=LC(x,F,H,n);c("handleInsert",{type:e,operations:r,newValue:t,data:n});const i=Ws(r.filter((e=>"add"===e.op||"replace"===e.op)));Ve(r,((e,n)=>{if(i){const r=ya(e,i.path);if(jn(t))return{state:Aa(e,n,r,dA),selection:al(e||{},n,{type:Ha,path:r})};if(""===t){return{selection:al(e,n,{type:Pn(ea(r)?null:kn.getIn(e,Xs(r)))?Wa:Ua,path:r,edit:!0})}}}else;})),i&&(Ye(),""===t&&pe().then((()=>{setTimeout((()=>Ae("",!0)))})))}else{c("handleInsert",{type:e,newValue:t});const n=[];Fe(t,((e,t)=>({state:qe(e,t,n),selection:al(e,t,{type:Ha,path:n})}))),Ye()}}function Ce(e){H.type===Wa&&n(9,H=al(x,F,{type:Ua,path:H.focusPath})),Se(e)}function _e(e){if(!k&&H)if(ul(H))try{const t=H.anchorPath,n=kn.getIn(x,t),r=function(e,t){if("array"===t){if(Array.isArray(e))return e;if(Pn(e))return Hn(e);if("string"==typeof e){const t=JSON.parse(e);if(Array.isArray(t))return t;if(Pn(t))return Hn(t)}}if("object"===t){if(Array.isArray(e))return qn(e);if(Pn(e))return e;if("string"==typeof e){const t=JSON.parse(e);if(Pn(t))return t;if(Array.isArray(t))return qn(t)}}if("value"===t)return jn(e)?JSON.stringify(e):e;throw new Error(`Cannot convert ${Nn(e)} to ${t}`)}(n,e);if(r===n)return;const i=[{op:"replace",path:kn.compileJSONPointer(t),value:r}];c("handleConvert",{selection:H,path:t,type:e,operations:i}),Ve(i,((e,t)=>({state:qe(e,t,H.focusPath)}))),Ye()}catch(e){P(e)}else P(new Error(`Cannot convert current selection to ${e}`))}function Oe(){const e=Ya(x,F,H,!1),t=Xs(H.focusPath);!ea(e.focusPath)&&ta(t,Xs(e.focusPath))?n(9,H=al(x,F,{type:qa,path:e.focusPath})):n(9,H=al(x,F,{type:Ha,path:t})),c("insert before",{selection:H,selectionBefore:e,parentPath:t}),pe().then(Qe)}function Ee(){const e=H.paths?Ws(H.paths):H.focusPath;c("insert after",e),n(9,H=al(x,F,{type:qa,path:e})),pe().then(Qe)}function Ae(e,t){const n=Al(y).document.activeElement;n.isContentEditable&&(n.textContent=t?e:n.textContent+e,El(n))}async function Me(e){if(!k&&H){if(H.type===Wa){const t=!H.edit;return n(9,H={...H,edit:!0}),await pe(),void setTimeout((()=>Ae(e,t)))}if("{"===e)Se("object");else if("["===e)Se("array");else if(H.type===Ua){if(!jn(kn.getIn(x,H.focusPath))){const t=!H.edit;n(9,H={...H,edit:!0}),await pe(),setTimeout((()=>Ae(e,t)))}}else await async function(e){if(k||!H)return;Se("value");const t=!H.edit,r=H.focusPath,i=kn.getIn(x,Xs(r));n(9,H=al(x,F,{type:Array.isArray(i)||!i||H.type===Ua?Ua:Wa,path:r,edit:!0})),await pe(),setTimeout((()=>Ae(e,t)))}(e)}}function Pe(){if(k)return;if(!ee.getState().canUndo)return;const e=ee.undo();if(!e)return;const t={json:x,text:$};n(9,H=e.undo.selection),n(7,x=e.undo.patch?kn.immutableJSONPatch(x,e.undo.patch):e.undo.json),n(14,F=e.undo.state),n(8,$=e.undo.text),n(21,ie=e.undo.textIsRepaired),c("undo",{item:e,json:x,state:F,selection:H});ze(t,{json:x,previousJson:t.json,redo:e.undo.patch,undo:e.redo.patch}),Ye(),H&&Re(H.focusPath)}function je(){if(k)return;if(!ee.getState().canRedo)return;const e=ee.redo();if(!e)return;const t={json:x,text:$};n(9,H=e.redo.selection),n(7,x=e.redo.patch?kn.immutableJSONPatch(x,e.redo.patch):e.redo.json),n(14,F=e.redo.state),n(8,$=e.redo.text),n(21,ie=e.redo.textIsRepaired),c("redo",{item:e,json:x,state:F,selection:H});ze(t,{json:x,previousJson:t.json,redo:e.redo.patch,undo:e.undo.patch}),Ye(),H&&Re(H.focusPath)}function Te(e){k||(V=!0,B({id:f,json:x,selectedPath:e,onSort:async t=>{c("onSort",e,t),Ve(t,((t,n)=>({state:qe(t,n,e),selection:al(t,n,{type:Ua,path:e})})))},onClose:()=>{V=!1,Ye()}}))}function Ne(){if(!H)return;Te(il(x,H))}function Ie({id:e,selectedPath:t,onTransform:n,onClose:r}){V=!0,z({id:e||d,json:x,selectedPath:t,onTransform:n?e=>{n({operations:e,json:x,transformedJson:kn.immutableJSONPatch(x,e)})}:e=>{c("onTransform",t,e),Ve(e,((e,n)=>({state:qe(e,n,t),selection:al(e,n,{type:Ua,path:t})})))},onClose:()=>{V=!1,Ye(),r&&r()}})}function De(){if(!H)return;Ie({selectedPath:il(x,H)})}async function Re(e){n(14,F=Ea(x,F,e)),await pe();const t=Le(e);if(t){c("scrollTo",{path:e,elem:t,refContents:g});const n=-g.getBoundingClientRect().height/4;b(t,{container:g,offset:n,duration:300})}}function Le(e){return g?g.querySelector(`div[data-path="${Tl(e)}"]`):null}function Be(e){const t=Le(e);if(!t||!g)return;const n=g.getBoundingClientRect(),r=t.getBoundingClientRect(),i=jn(kn.getIn(x,e))?20:r.height;r.top<n.top+20?b(t,{container:g,offset:-20,duration:0}):r.top+i>n.bottom-20&&b(t,{container:g,offset:-(n.height-i-20),duration:0})}function ze(e,t){void 0!==$?j({text:$,json:void 0},e,t):void 0!==x&&j({text:void 0,json:x},e,t)}function Ve(e,t){if(k)return;c("handlePatch",e,t);const r={json:x,text:$},i=he(e,t);return n(15,q=void 0),ze(r,i),i}function Fe(e,t){const r=F,i=x,o=$,s={json:x,text:$},a=ie,l=H,c=Sa(e,r,[],fA),u="function"==typeof t?t(e,c,H):void 0;n(7,x=u&&void 0!==u.json?u.json:e),n(14,F=u&&void 0!==u.state?u.state:c),n(8,$=void 0),n(21,ie=!1),n(9,H=u&&u.selection?u.selection:H),n(9,H=ae(H,x)),ce({previousJson:i,previousState:r,previousText:o,previousTextIsRepaired:a,previousSelection:l});ze(s,null)}function qe(e,t,n){return Aa(e,t,n,!Zn({json:kn.getIn(e,n)},10240)?dA:fA)}function He(e,t,r=!1){n(14,F=t?Aa(x,F,e,r?dA:fA):function(e,t,n){return kn.updateIn(t,n,(t=>Sa(kn.getIn(e,n),t,[],(()=>!1),!0)))}(x,F,e)),H&&!t&&function(e,t){return ol(e.focusPath,t)&&(e.focusPath.length>t.length||e.type===Ha)}(H,e)&&n(9,H=null),setTimeout((()=>{Ml(y)||Ye()}))}function We(e,t){n(9,H=e?al(x,F,e):null),!1!==(null==t?void 0:t.ensureFocus)&&setTimeout((()=>Ye()))}function Ue(e){c("openFind",{findAndReplace:e}),n(16,J=!1),n(17,K=!1),pe().then((()=>{n(16,J=!0),n(17,K=e)}))}function Je(e,t){c("handleExpandSection",e,t),n(14,F=function(e,t,n,r){return Sa(e,kn.updateIn(t,n.concat(qt),(e=>ba(e.concat(r)))),n,(()=>!1))}(x,F,e,t))}function Ke(e){c("pasted json as text",e),n(15,q=e)}function Ge({anchor:e,left:t,top:n,width:r,height:i,offsetTop:o,offsetLeft:s,showTip:a}){V=!0,p(M_,{json:x,state:F,selection:H,showTip:a,onEditKey:de,onEditValue:me,onToggleEnforceString:ge,onCut:ve,onCopy:ye,onPaste:we,onRemove:xe,onDuplicate:$e,onExtract:ke,onInsertBefore:Oe,onInsert:Ce,onConvert:_e,onInsertAfter:Ee,onSort:Ne,onTransform:De,onCloseContextMenu(){m(),Ye()}},{left:t,top:n,offsetTop:o,offsetLeft:s,width:r,height:i,anchor:e,closeOnOuterClick:!0,onClose:()=>{V=!1,Ye()}})}function Qe(e){if(!k&&!(null==H?void 0:H.edit)){if(e&&(e.stopPropagation(),e.preventDefault()),e&&"contextmenu"===e.type&&e.target!==v)Ge({left:e.clientX,top:e.clientY,width:mn,height:pn,showTip:!1});else{const e=null==g?void 0:g.querySelector(".jse-context-menu-button.jse-selected");if(e)Ge({anchor:e,offsetTop:2,width:mn,height:pn,showTip:!1});else{const e=null==g?void 0:g.getBoundingClientRect();e&&Ge({top:e.top+2,left:e.left+2,width:mn,height:pn,showTip:!1})}}return!1}}function Ye(){v&&(v.focus(),v.select())}function Xe(){return x}function Ze(){return F}function et(){return H}return e.$$set=e=>{"readOnly"in e&&n(0,k=e.readOnly),"externalContent"in e&&n(49,S=e.externalContent),"mainMenuBar"in e&&n(1,C=e.mainMenuBar),"navigationBar"in e&&n(2,_=e.navigationBar),"escapeControlCharacters"in e&&n(50,O=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(51,E=e.escapeUnicodeCharacters),"validator"in e&&n(52,A=e.validator),"indentation"in e&&n(53,M=e.indentation),"onError"in e&&n(54,P=e.onError),"onChange"in e&&n(55,j=e.onChange),"onRenderValue"in e&&n(56,T=e.onRenderValue),"onRequestRepair"in e&&n(3,N=e.onRequestRepair),"onRenderMenu"in e&&n(4,I=e.onRenderMenu),"onClassName"in e&&n(57,D=e.onClassName),"onFocus"in e&&n(58,R=e.onFocus),"onBlur"in e&&n(59,L=e.onBlur),"onSortModal"in e&&n(60,B=e.onSortModal),"onTransformModal"in e&&n(61,z=e.onTransformModal)},e.$$.update=()=>{1572864&e.$$.dirty[1]&&n(71,r=fl({escapeControlCharacters:O,escapeUnicodeCharacters:E})),640&e.$$.dirty[0]&&n(23,i=cl(x,H)),128&e.$$.dirty[0]|128&e.$$.dirty[2]&&Z(Q,x),262144&e.$$.dirty[1]&&se(S),e.$$.dirty[0],128&e.$$.dirty[0]|2097152&e.$$.dirty[1]&&n(11,o=A?A(x):[]),2048&e.$$.dirty[0]&&n(22,s=function(e){let t;return e.forEach((e=>{const n=e.path.concat([Gt]);t=kn.setIn(t,n,e,!0)})),e.forEach((e=>{let n=e.path;for(;n.length>0;){n=Xs(n);const e=n.concat([Gt]);if(!kn.existsIn(t,e)){const r={isChildError:!0,path:n,message:"Contains invalid data"};t=kn.setIn(t,e,r,!0)}}})),t}(o)),64&e.$$.dirty[0]&&n(70,l=MC(g)),1&e.$$.dirty[0]|100663296&e.$$.dirty[1]|768&e.$$.dirty[2]&&n(10,a={readOnly:k,normalization:r,getFullJson:Xe,getFullState:Ze,getFullSelection:et,findElement:Le,focus:Ye,onPatch:Ve,onInsert:Se,onExpand:He,onSelect:We,onFind:Ue,onPasteJson:Ke,onExpandSection:Je,onRenderValue:T,onContextMenu:Ge,onClassName:D||Yr,onDrag:l.onDrag,onDragEnd:l.onDragEnd}),1024&e.$$.dirty[0]&&c("context changed",a)},[k,C,_,N,I,function(){return ie&&void 0!==x&&Fe(x),{json:x,text:$}},g,x,$,H,a,o,v,y,F,q,J,K,G,U,re,ie,s,i,u,[],Y,async function(){n(19,U=U?function(e){const t=e.activeIndex<e.flatItems.length-1?e.activeIndex+1:e.flatItems.length>0?0:-1,n=e.flatItems[t],r=n?kn.setIn(e.items,GC(n),!0,!0):e.items;return{...e,itemsWithActive:r,activeItem:n,activeIndex:t}}(U):U),await X(U&&U.activeItem)},async function(){n(19,U=U?function(e){const t=e.activeIndex>0?e.activeIndex-1:e.flatItems.length-1,n=e.flatItems[t],r=n?kn.setIn(e.items,GC(n),!0,!0):e.items;return{...e,itemsWithActive:r,activeItem:n,activeIndex:t}}(U):U),await X(U&&U.activeItem)},async function(e,t){const n=U.activeItem;if(c("handleReplace",{replacementText:t,activeItem:n}),!U||!n)return;const{operations:r,newSelection:i}=function(e,t,n,r){const{field:i,path:o,start:s,end:a}=r;if(i===Wt){const r=Xs(o),i=Ws(o),l=RC(r,ja(t,r),i,JC(i,n,s,a));return{newSelection:tl(e,0,l),operations:l}}if(i===Ut){const r=kn.getIn(e,o);if(void 0===r)throw new Error(`Cannot replace: path not found ${kn.compileJSONPointer(o)}`);const i="string"==typeof r?r:String(r),l=kn.getIn(t,o.concat([Jt]))||!1,c=JC(i,n,s,a),u=[{op:"replace",path:kn.compileJSONPointer(o),value:l?c:Rn(c)}];return{newSelection:tl(e,0,u),operations:u}}throw new Error(`Cannot replace: unknown type of search result field ${i}`)}(x,F,t,n);Ve(r,(()=>({selection:i}))),await pe(),await X(U&&U.activeItem)},async function(e,t){c("handleReplaceAll",{text:e,replacementText:t});const{operations:n,newSelection:r}=function(e,t,n,r){const i=WC(n,e,t,1/0),o=[];for(let e=0;e<i.length;e++){const t=i[e-1],n=i[e];0!==e&&n.field===t.field&&ta(n.path,t.path)?Ws(o).items.push(n):o.push({path:n.path,field:n.field,items:[n]})}o.sort(((e,t)=>e.field!==t.field?e.field===Wt?1:-1:t.path.length-e.path.length));let s,a=[];return o.forEach((n=>{const{field:i,path:o,items:l}=n;if(i===Wt){const n=Xs(o),i=Ws(o),c=RC(n,ja(t,n),i,KC(i,r,l));a=a.concat(c),s=tl(e,0,c)}else{if(i!==Ut)throw new Error(`Cannot replace: unknown type of search result field ${i}`);{const n=kn.getIn(e,o);if(void 0===n)throw new Error(`Cannot replace: path not found ${kn.compileJSONPointer(o)}`);const i="string"==typeof n?n:String(n),c=kn.getIn(t,o.concat([Jt]))||!1,u=KC(i,r,l),h=[{op:"replace",path:kn.compileJSONPointer(o),value:c?u:Rn(u)}];a=a.concat(h),s=tl(e,0,h)}}})),{operations:a,newSelection:s}}(x,F,e,t);Ve(n,(()=>({selection:r}))),await pe(),await X(U&&U.activeItem)},function(){n(16,J=!1),n(17,K=!1),Y(""),Ye()},function(e){c("select validation error",e),n(9,H=al(x,F,{type:Ua,path:e.path})),Re(e.path),Ye()},ye,function(e){if(e.preventDefault(),k)return;const t=e.clipboardData.getData("text/plain");try{be(t)}catch(e){!function(e,t){h(h_,{text:e,onParse:Jn,onRepair:Kn,onApply:t,onRenderMenu:I,onFocus:R,onBlur:L},{...nn,styleWindow:{...nn.styleWindow,width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Ye()})}(t,(e=>{c("repaired pasted text: ",e),be(e)}))}},Pe,je,function(){Te([])},function(){Ie({selectedPath:[]})},function(){He([],!0,!0)},function(){He([],!1,!0)},function(e){const t=Rl(e).replace(/^Command\+/,"Ctrl+"),r=e.shiftKey;if("Ctrl+X"===t&&(e.preventDefault(),ve(!0)),"Ctrl+Shift+X"===t&&(e.preventDefault(),ve(!1)),"Ctrl+C"===t&&(e.preventDefault(),ye(!0)),"Ctrl+Shift+C"===t&&(e.preventDefault(),ye(!1)),"Ctrl+D"===t&&(e.preventDefault(),$e()),"Delete"!==t&&"Backspace"!==t||(e.preventDefault(),xe()),"Insert"===t&&(e.preventDefault(),Se("structure")),"Ctrl+A"===t&&(e.preventDefault(),n(9,H={type:Ua,anchorPath:[],focusPath:[]})),"Ctrl+Q"===t&&Qe(e),"Up"!==t&&"Shift+Up"!==t||(e.preventDefault(),n(9,H=H?Ya(x,F,H,r,!0)||H:el(x,F)),Be(H.focusPath)),"Down"!==t&&"Shift+Down"!==t||(e.preventDefault(),n(9,H=H?Xa(x,F,H,r,!0)||H:el(x,F)),Be(H.focusPath)),"Left"!==t&&"Shift+Left"!==t||(e.preventDefault(),n(9,H=H?function(e,t,n,r=!1,i=!0){const{caret:o,previous:s}=Za(e,t,n,i);if(r)return n.type!==Ja?al(e,t,{type:Ja,anchorPath:n.anchorPath,focusPath:n.focusPath}):null;if(o&&s)return al(e,t,{type:s.type,path:s.path});const a=Xs(n.focusPath),l=kn.getIn(e,a);return n.type===Ua&&Array.isArray(l)?al(e,t,{type:Ja,anchorPath:n.focusPath,focusPath:n.focusPath}):n.type!==Ja||Array.isArray(l)?null:al(e,t,{type:Wa,path:n.focusPath})}(x,F,H,r,!k)||H:el(x,F)),Be(H.focusPath)),"Right"!==t&&"Shift+Right"!==t||(e.preventDefault(),n(9,H=H?function(e,t,n,r=!1,i=!0){const{caret:o,next:s}=Za(e,t,n,i);return r?n.type!==Ja?al(e,t,{type:Ja,anchorPath:n.anchorPath,focusPath:n.focusPath}):null:o&&s?al(e,t,{type:s.type,path:s.path}):n.type===Ja?al(e,t,{type:Ua,path:n.focusPath}):null}(x,F,H,r,!k)||H:el(x,F)),Be(H.focusPath)),"Enter"===t&&H){if(!k&&H.type===Ja&&1===H.paths.length){const e=H.focusPath,t=kn.getIn(x,Xs(e));Array.isArray(t)&&n(9,H=al(x,F,{type:Ua,path:e}))}if(k||H.type!==Wa||(e.preventDefault(),n(9,H={...H,edit:!0})),H.type===Ua){e.preventDefault();jn(kn.getIn(x,H.focusPath))?He(H.focusPath,!0):k||n(9,H={...H,edit:!0})}}if(t.length===(t.startsWith("Shift+")?7:1)&&H)return e.preventDefault(),void Me(e.key);if("Enter"===t&&(H.type===qa||H.type===Ha))return e.preventDefault(),void Me("");if("Ctrl+Enter"===t&&H&&H.type===Ua){const e=kn.getIn(x,H.focusPath);Dn(e)&&window.open(e,"_blank")}if("Escape"===t&&H&&(e.preventDefault(),n(9,H=null)),"Ctrl+F"===t&&(e.preventDefault(),Ue(!1)),"Ctrl+H"===t&&(e.preventDefault(),Ue(!0)),"Ctrl+Z"===t){e.preventDefault();const t=document.activeElement;t&&t.blur&&t.focus?(t.blur(),setTimeout((()=>{Pe(),setTimeout((()=>t.select()))}))):Pe()}if("Ctrl+Shift+Z"===t){e.preventDefault();const t=document.activeElement;t&&t.blur&&t.focus?(t.blur(),setTimeout((()=>{je(),setTimeout((()=>t.select()))}))):je()}},function(e){c("handleMouseDown",e),setTimeout((()=>{setTimeout((()=>{w||Sl(e.target,"BUTTON")||(Ye(),H||void 0!==x||""!==$&&void 0!==$||n(9,H=ue()))}))}))},Qe,function(e){k||Ge({anchor:Pl(e.target,"BUTTON"),offsetTop:0,width:mn,height:pn,showTip:!0})},async function(){c("apply pasted json",q);const{path:e,contents:t}=q;n(9,H=al(x,F,{type:Ua,path:e})),await pe(),Ve([{op:"replace",path:kn.compileJSONPointer(e),value:t}],((t,n)=>({state:qe(t,n,e)})))},function(){c("clear pasted json"),n(15,q=void 0)},function(e){n(9,H=e),Ye(),Re(e.focusPath)},function(e){const t=!_l(e.target,(e=>e===y));t&&H&&H.edit&&(c("click outside the editor, stop edit mode"),n(9,H={...H,edit:!1}),w&&v&&(v.focus(),v.blur()),pe().then((()=>{setTimeout((()=>{v&&v.blur()}))})))},S,O,E,A,M,P,j,T,D,R,L,B,z,function(e=(()=>!0)){n(14,F=Sa(x,F,[],e,!0))},function(){return x},he,Ie,Re,Le,Ye,Q,l,r,function(e){J=e,n(16,J)},function(e){le[e?"unshift":"push"]((()=>{v=e,n(12,v)}))},function(e){le[e?"unshift":"push"]((()=>{g=e,n(6,g)}))},function(e){le[e?"unshift":"push"]((()=>{y=e,n(13,y)}))}]}class mA extends Fe{constructor(e){super(),Ve(this,e,pA,hA,l,{readOnly:0,externalContent:49,mainMenuBar:1,navigationBar:2,escapeControlCharacters:50,escapeUnicodeCharacters:51,validator:52,indentation:53,onError:54,onChange:55,onRenderValue:56,onRequestRepair:3,onRenderMenu:4,onClassName:57,onFocus:58,onBlur:59,onSortModal:60,onTransformModal:61,expand:62,get:63,patch:64,acceptAutoRepair:5,openTransformModal:65,scrollTo:66,findElement:67,focus:68},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[62]}get get(){return this.$$.ctx[63]}get patch(){return this.$$.ctx[64]}get acceptAutoRepair(){return this.$$.ctx[5]}get openTransformModal(){return this.$$.ctx[65]}get scrollTo(){return this.$$.ctx[66]}get findElement(){return this.$$.ctx[67]}get focus(){return this.$$.ctx[68]}}const gA={id:"javascript",name:"JavaScript",description:"\n<p>\n  Enter a JavaScript function to filter, sort, or transform the data.\n</p>\n",createQuery:function(e,t){const{filter:n,sort:r,projection:i}=t,o=[];if(n&&n.path&&n.relation&&n.value){const e=`item => item${tu(n.path)}`,t="string"==typeof function(e){if(""===e)return"";const t=e.toLowerCase();if("null"===t)return null;if("true"===t)return!0;if("false"===t)return!1;if("undefined"===t)return;const n=Number(e),r=parseFloat(e);return isNaN(n)||isNaN(r)?e:n}(n.value)?`'${n.value}'`:n.value;o.push(`  data = data.filter(${e} ${n.relation} ${t})\n`)}r&&r.path&&r.direction&&("desc"===r.direction?o.push(`  data = data.slice().sort((a, b) => {\n    // sort descending\n    const valueA = a${tu(r.path)}\n    const valueB = b${tu(r.path)}\n    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0\n  })\n`):o.push(`  data = data.slice().sort((a, b) => {\n    // sort ascending\n    const valueA = a${tu(r.path)}\n    const valueB = b${tu(r.path)}\n    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0\n  })\n`));if(i&&i.paths)if(i.paths.length>1){const e=i.paths.map((e=>{const t=e[e.length-1]||"item",n=`item${tu(e)}`;return`    ${JSON.stringify(t)}: ${n}`}));o.push(`  data = data.map(item => ({\n${e.join(",\n")}})\n  )\n`)}else{const e=`item${tu(i.paths[0])}`;o.push(`  data = data.map(item => ${e})\n`)}return o.push("  return data\n"),`function query (data) {\n${o.join("")}}`},executeQuery:function(e,t){const n=new Function('"use strict";\n\n'+t+'\n\nif (typeof query !== "function") {\n  throw new Error("Cannot execute query: expecting a function named \'query\' but is undefined")\n}\n\nreturn query;\n')()(e);return void 0!==n?n:null}};function vA(e){let t,n,r,i,o,s;return n=new Uc({props:{data:!0===e[0]?k_:$_}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-boolean-toggle svelte-zs5o25"),I(t,"title",r=e[1]?`Boolean value ${e[0]}`:"Click to toggle this boolean value")},m(r,a){S(r,t,a),Be(n,t,null),i=!0,o||(s=j(t,"mousedown",e[2]),o=!0)},p(e,[o]){const s={};1&o&&(s.data=!0===e[0]?k_:$_),n.$set(s),(!i||3&o&&r!==(r=e[1]?`Boolean value ${e[0]}`:"Click to toggle this boolean value"))&&I(t,"title",r)},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n),o=!1,s()}}}function yA(e,t,n){let{path:r}=t,{value:i}=t,{readOnly:o}=t,{onPatch:s}=t,{onSelect:a}=t;return e.$$set=e=>{"path"in e&&n(3,r=e.path),"value"in e&&n(0,i=e.value),"readOnly"in e&&n(1,o=e.readOnly),"onPatch"in e&&n(4,s=e.onPatch),"onSelect"in e&&n(5,a=e.onSelect)},[i,o,function(e){e.stopPropagation(),o||(s([{op:"replace",path:kn.compileJSONPointer(r),value:!i}]),a({type:Ua,path:r}))},r,s,a]}class wA extends Fe{constructor(e){super(),Ve(this,e,yA,vA,l,{path:3,value:0,readOnly:1,onPatch:4,onSelect:5})}}function bA(t){let n;return{c(){n=O("div"),I(n,"class","jse-color-picker-popup svelte-1gn8yt9")},m(e,r){S(e,n,r),t[4](n)},p:e,i:e,o:e,d(e){e&&C(n),t[4](null)}}}function xA(e,t,n){let r,i,{color:o}=t,{onChange:s}=t,{showOnTop:a}=t;return te((async()=>{const e=(await Promise.resolve().then((function(){return wR}))).default;i=new e({parent:r,color:o,popup:a?"top":"bottom",onDone(e){const t=1===e.rgba[3]?e.hex.substring(0,7):e.hex;s(t)}}),i.show()})),ne((()=>{i&&i.destroy()})),e.$$set=e=>{"color"in e&&n(1,o=e.color),"onChange"in e&&n(2,s=e.onChange),"showOnTop"in e&&n(3,a=e.showOnTop)},[r,o,s,a,function(e){le[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class $A extends Fe{constructor(e){super(),Ve(this,e,xA,bA,a,{color:1,onChange:2,showOnTop:3})}}function kA(t){let n,r,i,o;return{c(){n=O("button"),I(n,"class","jse-color-picker-button svelte-fk1u9y"),V(n,"background",t[2]),I(n,"title",r=t[1]?`Color ${t[0]}`:"Click to open a color picker")},m(e,r){S(e,n,r),i||(o=j(n,"click",t[3]),i=!0)},p(e,[t]){4&t&&V(n,"background",e[2]),3&t&&r!==(r=e[1]?`Color ${e[0]}`:"Click to open a color picker")&&I(n,"title",r)},i:e,o:e,d(e){e&&C(n),i=!1,o()}}}function SA(e,t,n){let r;const{openAbsolutePopup:i}=oe("absolute-popup");let{path:o}=t,{value:s}=t,{readOnly:a}=t,{onPatch:l}=t,{onSelect:c}=t;function u(e){l([{op:"replace",path:kn.compileJSONPointer(o),value:e}]),h()}function h(){c({type:Ua,path:o})}return e.$$set=e=>{"path"in e&&n(4,o=e.path),"value"in e&&n(0,s=e.value),"readOnly"in e&&n(1,a=e.readOnly),"onPatch"in e&&n(5,l=e.onPatch),"onSelect"in e&&n(6,c=e.onSelect)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=Tn(s))},[s,a,r,function(e){if(a)return;const t=e.target.getBoundingClientRect().top,n=Al(e.target).innerHeight;i($A,{color:s,onChange:u,showOnTop:n-t<300&&t>300},{anchor:e.target,closeOnOuterClick:!0,onClose:h,offsetTop:18,offsetLeft:-8,height:300})},o,l,c]}class CA extends Fe{constructor(e){super(),Ve(this,e,SA,kA,l,{path:4,value:0,readOnly:1,onPatch:5,onSelect:6})}}function _A(e){const t=Nn(e);return P_("jse-value","jse-"+t,{"jse-url":Dn(e),"jse-empty":"string"==typeof e&&0===e.length})}function OA(e){let t,n;return t=new Y_({props:{value:e[1].escapeValue(e[0]),onChange:e[3],onCancel:e[4],onPaste:e[5],onFind:e[2],onValueClass:e[6]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,[n]){const r={};3&n&&(r.value=e[1].escapeValue(e[0])),4&n&&(r.onFind=e[2]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function EA(e,t,n){let{path:r}=t,{value:i}=t,{normalization:o}=t,{enforceString:s}=t,{onPatch:a}=t,{onPasteJson:l}=t,{onSelect:c}=t,{onFind:u}=t;function h(e){return s?e:Rn(e)}return e.$$set=e=>{"path"in e&&n(7,r=e.path),"value"in e&&n(0,i=e.value),"normalization"in e&&n(1,o=e.normalization),"enforceString"in e&&n(8,s=e.enforceString),"onPatch"in e&&n(9,a=e.onPatch),"onPasteJson"in e&&n(10,l=e.onPasteJson),"onSelect"in e&&n(11,c=e.onSelect),"onFind"in e&&n(2,u=e.onFind)},[i,o,u,function(e,t){a([{op:"replace",path:kn.compileJSONPointer(r),value:h(o.unescapeValue(e))}]),t===yn&&c({type:Ua,path:r,nextInside:!0}),t===vn&&c({type:Ua,path:r},{ensureFocus:!1})},function(){c({type:Ua,path:r})},function(e){try{const t=JSON.parse(e);jn(t)&&l({path:r,contents:t})}catch(e){}},function(e){return _A(h(o.unescapeValue(e)))},r,s,a,l,c]}class AA extends Fe{constructor(e){super(),Ve(this,e,EA,OA,l,{path:7,value:0,normalization:1,enforceString:8,onPatch:9,onPasteJson:10,onSelect:11,onFind:2})}}function MA(t){let n,r=kl(t[1].escapeValue(t[0]))+"";return{c(){n=A(r)},m(e,t){S(e,n,t)},p(e,t){3&t&&r!==(r=kl(e[1].escapeValue(e[0]))+"")&&B(n,r)},i:e,o:e,d(e){e&&C(n)}}}function PA(e){let t,n;return t=new K_({props:{text:e[1].escapeValue(e[0]),searchResult:e[2]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};3&n&&(r.text=e[1].escapeValue(e[0])),4&n&&(r.searchResult=e[2]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function jA(e){let t,n,r,i,s,a,l,c;const u=[PA,MA],h=[];function f(e,t){return e[2]?0:1}return n=f(e),r=h[n]=u[n](e),{c(){t=O("div"),r.c(),I(t,"data-type","selectable-value"),I(t,"class",i=p(_A(e[0]))+" svelte-6ci2p7"),I(t,"title",s=e[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(r,i){S(r,t,i),h[n].m(t,null),a=!0,l||(c=[j(t,"click",e[4]),j(t,"dblclick",e[5])],l=!0)},p(e,[o]){let l=n;n=f(e),n===l?h[n].p(e,o):(Ce(),Ee(h[l],1,1,(()=>{h[l]=null})),_e(),r=h[n],r?r.p(e,o):(r=h[n]=u[n](e),r.c()),Oe(r,1),r.m(t,null)),(!a||1&o&&i!==(i=p(_A(e[0]))+" svelte-6ci2p7"))&&I(t,"class",i),(!a||8&o&&s!==(s=e[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&I(t,"title",s)},i(e){a||(Oe(r),a=!0)},o(e){Ee(r),a=!1},d(e){e&&C(t),h[n].d(),l=!1,o(c)}}}function TA(e,t,n){let r,{path:i}=t,{value:o}=t,{readOnly:s}=t,{normalization:a}=t,{onSelect:l}=t,{searchResult:c}=t;return e.$$set=e=>{"path"in e&&n(6,i=e.path),"value"in e&&n(0,o=e.value),"readOnly"in e&&n(7,s=e.readOnly),"normalization"in e&&n(1,a=e.normalization),"onSelect"in e&&n(8,l=e.onSelect),"searchResult"in e&&n(2,c=e.searchResult)},e.$$.update=()=>{1&e.$$.dirty&&n(3,r=Dn(o))},[o,a,c,r,function(e){"string"==typeof o&&r&&e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),window.open(o,"_blank"))},function(e){s||(e.preventDefault(),l({type:Ua,path:i,edit:!0}))},i,s,l]}class NA extends Fe{constructor(e){super(),Ve(this,e,TA,jA,l,{path:6,value:0,readOnly:7,normalization:1,onSelect:8,searchResult:2})}}function IA(e){let t,n,r,i,o,a;return n=new Uc({props:{data:b_}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-timestamp svelte-1u00zub")},m(s,l){S(s,t,l),Be(n,t,null),i=!0,o||(a=m(r=pO.call(null,t,{text:e[0],...e[1]})),o=!0)},p(e,[t]){r&&s(r.update)&&1&t&&r.update.call(null,{text:e[0],...e[1]})},i(e){i||(Oe(n.$$.fragment,e),i=!0)},o(e){Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),ze(n),o=!1,a()}}}function DA(e,t,n){let r;const i=oe("absolute-popup");let{value:o}=t;return e.$$set=e=>{"value"in e&&n(2,o=e.value)},e.$$.update=()=>{4&e.$$.dirty&&n(0,r=`Time: ${new Date(o).toString()}`)},[r,i,o]}class RA extends Fe{constructor(e){super(),Ve(this,e,DA,IA,l,{value:2})}}function LA({path:e,value:t,readOnly:n,enforceString:r,searchResult:i,isEditing:o,normalization:s,onPatch:a,onPasteJson:l,onSelect:c,onFind:u}){const h=[];return!o&&function(e){return!0===e||!1===e}(t)&&h.push({component:wA,props:{path:e,value:t,readOnly:n,onPatch:a,onSelect:c}}),!o&&function(e){return"string"==typeof e&&!!Tn(e)}(t)&&h.push({component:CA,props:{path:e,value:t,readOnly:n,onPatch:a,onSelect:c}}),o&&h.push({component:AA,props:{path:e,value:t,enforceString:r,normalization:s,onPatch:a,onPasteJson:l,onSelect:c,onFind:u}}),o||h.push({component:NA,props:{path:e,value:t,readOnly:n,normalization:s,searchResult:i,onSelect:c}}),!o&&function(e){return"number"==typeof e&&e>9466848e5&&isFinite(e)&&Math.floor(e)===e&&!isNaN(new Date(e).valueOf())}(t)&&h.push({component:RA,props:{value:t}}),h}const BA={};function zA(t){let n,r,i=t[0](t[1],t[2])+"";return{c(){n=O("div"),I(n,"class",r="item "+t[3]+" svelte-3e0qet")},m(e,t){S(e,n,t),n.innerHTML=i},p(e,[t]){7&t&&i!==(i=e[0](e[1],e[2])+"")&&(n.innerHTML=i),8&t&&r!==(r="item "+e[3]+" svelte-3e0qet")&&I(n,"class",r)},i:e,o:e,d(e){e&&C(n)}}}function VA(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:o=!1}=t,{isSelectable:s=!1}=t,{getOptionLabel:a}=t,{item:l}=t,{filterText:c=""}=t,u="";return e.$$set=e=>{"isActive"in e&&n(4,r=e.isActive),"isFirst"in e&&n(5,i=e.isFirst),"isHover"in e&&n(6,o=e.isHover),"isSelectable"in e&&n(7,s=e.isSelectable),"getOptionLabel"in e&&n(0,a=e.getOptionLabel),"item"in e&&n(1,l=e.item),"filterText"in e&&n(2,c=e.filterText)},e.$$.update=()=>{if(242&e.$$.dirty){const e=[];r&&e.push("active"),i&&e.push("first"),o&&e.push("hover"),l.isGroupHeader&&e.push("groupHeader"),l.isGroupItem&&e.push("groupItem"),s||e.push("notSelectable"),n(3,u=e.join(" "))}},[a,l,c,u,r,i,o,s]}class FA extends Fe{constructor(e){super(),Ve(this,e,VA,zA,a,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function qA(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function HA(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=QA(qA(e,r,t));const o=e=>Ee(i[e],1,1,(()=>{i[e]=null}));let s=null;return r.length||(s=UA(e)),{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=P(),s&&s.c()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);S(e,t,r),s&&s.m(e,r),n=!0},p(e,n){if(114390&n[0]){let a;for(r=e[1],a=0;a<r.length;a+=1){const o=qA(e,r,a);i[a]?(i[a].p(o,n),Oe(i[a],1)):(i[a]=QA(o),i[a].c(),Oe(i[a],1),i[a].m(t.parentNode,t))}for(Ce(),a=r.length;a<i.length;a+=1)o(a);_e(),!r.length&&s?s.p(e,n):r.length?s&&(s.d(1),s=null):(s=UA(e),s.c(),s.m(t.parentNode,t))}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Oe(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Ee(i[e]);n=!1},d(e){_(i,e),e&&C(t),s&&s.d(e)}}}function WA(e){let t,n,r;var i=e[3];function o(e){return{props:{items:e[1],itemHeight:e[8],$$slots:{default:[YA,({item:e,i:t})=>({41:e,42:t}),({item:e,i:t})=>[0,(e?1024:0)|(t?2048:0)]]},$$scope:{ctx:e}}}}return i&&(t=new i(o(e))),{c(){t&&Le(t.$$.fragment),n=P()},m(e,i){t&&Be(t,e,i),S(e,n,i),r=!0},p(e,r){const s={};if(2&r[0]&&(s.items=e[1]),256&r[0]&&(s.itemHeight=e[8]),9814&r[0]|11264&r[1]&&(s.$$scope={dirty:r,ctx:e}),i!==(i=e[3])){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}i?(t=new i(o(e)),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(e){r||(t&&Oe(t.$$.fragment,e),r=!0)},o(e){t&&Ee(t.$$.fragment,e),r=!1},d(e){e&&C(n),t&&ze(t,e)}}}function UA(e){let t,n=!e[11]&&JA(e);return{c(){n&&n.c(),t=P()},m(e,r){n&&n.m(e,r),S(e,t,r)},p(e,r){e[11]?n&&(n.d(1),n=null):n?n.p(e,r):(n=JA(e),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&C(t)}}}function JA(e){let t,n;return{c(){t=O("div"),n=A(e[12]),I(t,"class","empty svelte-1uyqfml")},m(e,r){S(e,t,r),x(t,n)},p(e,t){4096&t[0]&&B(n,e[12])},d(e){e&&C(t)}}}function KA(e){let t,n,r,i,s,a;var l=e[4];function c(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:eM(e[42]),isActive:ZA(e[41],e[9],e[10]),isHover:tM(e[2],e[41],e[42],e[1]),isSelectable:nM(e[41])}}}function u(){return e[29](e[42])}function h(){return e[30](e[42])}function f(...t){return e[31](e[41],e[42],...t)}return l&&(n=new l(c(e))),{c(){t=O("div"),n&&Le(n.$$.fragment),r=M(),I(t,"class","listItem"),I(t,"tabindex","-1")},m(e,o){S(e,t,o),n&&Be(n,t,null),x(t,r),i=!0,s||(a=[j(t,"mouseover",u),j(t,"focus",h),j(t,"click",f)],s=!0)},p(i,o){e=i;const s={};if(2&o[0]&&(s.item=e[41]),8192&o[0]&&(s.filterText=e[13]),64&o[0]&&(s.getOptionLabel=e[6]),1538&o[0]&&(s.isActive=ZA(e[41],e[9],e[10])),6&o[0]&&(s.isHover=tM(e[2],e[41],e[42],e[1])),2&o[0]&&(s.isSelectable=nM(e[41])),l!==(l=e[4])){if(n){Ce();const e=n;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}l?(n=new l(c(e)),Le(n.$$.fragment),Oe(n.$$.fragment,1),Be(n,t,r)):n=null}else l&&n.$set(s)},i(e){i||(n&&Oe(n.$$.fragment,e),i=!0)},o(e){n&&Ee(n.$$.fragment,e),i=!1},d(e){e&&C(t),n&&ze(n),s=!1,o(a)}}}function GA(t){let n,r,i=t[7](t[41])+"";return{c(){n=O("div"),r=A(i),I(n,"class","listGroupTitle svelte-1uyqfml")},m(e,t){S(e,n,t),x(n,r)},p(e,t){130&t[0]&&i!==(i=e[7](e[41])+"")&&B(r,i)},i:e,o:e,d(e){e&&C(n)}}}function QA(e){let t,n,r,i;const o=[GA,KA],s=[];function a(e,t){return e[41].isGroupHeader&&!e[41].isSelectable?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},m(e,n){s[t].m(e,n),S(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Oe(n,1),n.m(r.parentNode,r))},i(e){i||(Oe(n),i=!0)},o(e){Ee(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function YA(e){let t,n,r,i,s;var a=e[4];function l(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:eM(e[42]),isActive:ZA(e[41],e[9],e[10]),isHover:tM(e[2],e[41],e[42],e[1]),isSelectable:nM(e[41])}}}function c(){return e[26](e[42])}function u(){return e[27](e[42])}function h(...t){return e[28](e[41],e[42],...t)}return a&&(n=new a(l(e))),{c(){t=O("div"),n&&Le(n.$$.fragment),I(t,"class","listItem")},m(e,o){S(e,t,o),n&&Be(n,t,null),r=!0,i||(s=[j(t,"mouseover",c),j(t,"focus",u),j(t,"click",h)],i=!0)},p(r,i){e=r;const o={};if(1024&i[1]&&(o.item=e[41]),8192&i[0]&&(o.filterText=e[13]),64&i[0]&&(o.getOptionLabel=e[6]),2048&i[1]&&(o.isFirst=eM(e[42])),1536&i[0]|1024&i[1]&&(o.isActive=ZA(e[41],e[9],e[10])),6&i[0]|3072&i[1]&&(o.isHover=tM(e[2],e[41],e[42],e[1])),1024&i[1]&&(o.isSelectable=nM(e[41])),a!==(a=e[4])){if(n){Ce();const e=n;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}a?(n=new a(l(e)),Le(n.$$.fragment),Oe(n.$$.fragment,1),Be(n,t,null)):n=null}else a&&n.$set(o)},i(e){r||(n&&Oe(n.$$.fragment,e),r=!0)},o(e){n&&Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),n&&ze(n),i=!1,o(s)}}}function XA(e){let t,n,r,i,s,a;const l=[WA,HA],c=[];function u(e,t){return e[5]?0:1}return n=u(e),r=c[n]=l[n](e),{c(){t=O("div"),r.c(),I(t,"class","listContainer svelte-1uyqfml"),I(t,"style",e[14]),H(t,"virtualList",e[5])},m(r,o){S(r,t,o),c[n].m(t,null),e[32](t),i=!0,s||(a=[j(window,"keydown",e[17]),j(window,"resize",e[18])],s=!0)},p(e,o){let s=n;n=u(e),n===s?c[n].p(e,o):(Ce(),Ee(c[s],1,1,(()=>{c[s]=null})),_e(),r=c[n],r?r.p(e,o):(r=c[n]=l[n](e),r.c()),Oe(r,1),r.m(t,null)),(!i||16384&o[0])&&I(t,"style",e[14]),32&o[0]&&H(t,"virtualList",e[5])},i(e){i||(Oe(r),i=!0)},o(e){Ee(r),i=!1},d(r){r&&C(t),c[n].d(),e[32](null),s=!1,o(a)}}}function ZA(e,t,n){return t&&t[n]===e[n]}function eM(e){return 0===e}function tM(e,t,n,r){return nM(t)&&(e===n||1===r.length)}function nM(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function rM(e,t,n){const r=re();let i,o,{container:s}=t,{VirtualList:a=null}=t,{Item:l=FA}=t,{isVirtualList:c=!1}=t,{items:u=[]}=t,{labelIdentifier:h="label"}=t,{getOptionLabel:f=((e,t)=>{if(e)return e.isCreator?`Create "${t}"`:e[h]})}=t,{getGroupHeaderLabel:d=null}=t,{itemHeight:p=40}=t,{hoverItemIndex:m=0}=t,{value:g}=t,{optionIdentifier:v="value"}=t,{hideEmptyState:y=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:b=!1}=t,{activeItemIndex:x=0}=t,{filterText:$=""}=t,{parent:k=null}=t,{listPlacement:S=null}=t,{listAutoWidth:C=null}=t,{listOffset:_=5}=t,O=0,E=!1;function A(e){e.isCreator||r("itemSelected",e)}function M(e){E||n(2,m=e)}function P(e){const{item:t,i:i,event:o}=e;if(o.stopPropagation(),g&&!b&&g[v]===t[v])return j();t.isCreator?r("itemCreated",$):nM(t)&&(n(19,x=i),n(2,m=i),A(t))}function j(){r("closeList")}async function T(e){if(c)return;let t=!0;for(;t;)e>0&&m===u.length-1?n(2,m=0):n(2,e<0&&0===m?m=u.length-1:m+=e),t=!nM(u[m]);await pe(),N("hover")}function N(e){if(c||!s)return;let t;const r=s.querySelector(`.listItem .${e}`);r&&(t=s.getBoundingClientRect().bottom-r.getBoundingClientRect().bottom),n(0,s.scrollTop-=t,s)}function I(){const{height:e,width:t}=k.getBoundingClientRect();n(14,o=""),n(14,o+=`min-width:${t}px;width:${C?"auto":"100%"};`),"top"===S||"auto"===S&&function(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}(k,s).bottom?n(14,o+=`bottom:${e+_}px;`):n(14,o+=`top:${e+_}px;`)}te((()=>{if(u.length>0&&!b&&g){const e=u.findIndex((e=>e[v]===g[v]));e&&n(2,m=e)}N("active"),s.addEventListener("scroll",(()=>{clearTimeout(O),O=setTimeout((()=>{E=!1}),100)}),!1)})),ee((()=>{u||n(1,u=[]),u!==i&&u.length>0&&n(2,m=0),i=u}));return e.$$set=e=>{"container"in e&&n(0,s=e.container),"VirtualList"in e&&n(3,a=e.VirtualList),"Item"in e&&n(4,l=e.Item),"isVirtualList"in e&&n(5,c=e.isVirtualList),"items"in e&&n(1,u=e.items),"labelIdentifier"in e&&n(20,h=e.labelIdentifier),"getOptionLabel"in e&&n(6,f=e.getOptionLabel),"getGroupHeaderLabel"in e&&n(7,d=e.getGroupHeaderLabel),"itemHeight"in e&&n(8,p=e.itemHeight),"hoverItemIndex"in e&&n(2,m=e.hoverItemIndex),"value"in e&&n(9,g=e.value),"optionIdentifier"in e&&n(10,v=e.optionIdentifier),"hideEmptyState"in e&&n(11,y=e.hideEmptyState),"noOptionsMessage"in e&&n(12,w=e.noOptionsMessage),"isMulti"in e&&n(21,b=e.isMulti),"activeItemIndex"in e&&n(19,x=e.activeItemIndex),"filterText"in e&&n(13,$=e.filterText),"parent"in e&&n(22,k=e.parent),"listPlacement"in e&&n(23,S=e.listPlacement),"listAutoWidth"in e&&n(24,C=e.listAutoWidth),"listOffset"in e&&n(25,_=e.listOffset)},e.$$.update=()=>{4194305&e.$$.dirty[0]&&k&&s&&I()},[s,u,m,a,l,c,f,d,p,g,v,y,w,$,o,M,P,function(e){switch(e.key){case"Escape":e.preventDefault(),j();break;case"ArrowDown":e.preventDefault(),u.length&&T(1);break;case"ArrowUp":e.preventDefault(),u.length&&T(-1);break;case"Enter":if(e.preventDefault(),0===u.length)break;const t=u[m];if(g&&!b&&g[v]===t[v]){j();break}t.isCreator?r("itemCreated",$):(n(19,x=m),A(u[m]));break;case"Tab":if(e.preventDefault(),0===u.length)return j();if(g&&g[v]===u[m][v])return j();n(19,x=m),A(u[m])}},I,x,h,b,k,S,C,_,e=>M(e),e=>M(e),(e,t,n)=>P({item:e,i:t,event:n}),e=>M(e),e=>M(e),(e,t,n)=>P({item:e,i:t,event:n}),function(e){le[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class iM extends Fe{constructor(e){super(),Ve(this,e,rM,XA,a,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function oM(t){let n,r=t[0](t[1])+"";return{c(){n=O("div"),I(n,"class","selection svelte-pu1q1n")},m(e,t){S(e,n,t),n.innerHTML=r},p(e,[t]){3&t&&r!==(r=e[0](e[1])+"")&&(n.innerHTML=r)},i:e,o:e,d(e){e&&C(n)}}}function sM(e,t,n){let{getSelectionLabel:r}=t,{item:i}=t;return e.$$set=e=>{"getSelectionLabel"in e&&n(0,r=e.getSelectionLabel),"item"in e&&n(1,i=e.item)},[r,i]}class aM extends Fe{constructor(e){super(),Ve(this,e,sM,oM,a,{getSelectionLabel:0,item:1})}}function lM(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function cM(e){let t,n,r;function i(...t){return e[6](e[11],...t)}return{c(){t=O("div"),t.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',I(t,"class","multiSelectItem_clear svelte-liu9pa")},m(e,o){S(e,t,o),n||(r=j(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&C(t),n=!1,r()}}}function uM(e){let t,n,r,i,o,s,a,l=e[4](e[9])+"",c=!e[2]&&!e[3]&&cM(e);function u(...t){return e[7](e[11],...t)}return{c(){t=O("div"),n=O("div"),r=M(),c&&c.c(),i=M(),I(n,"class","multiSelectItem_label svelte-liu9pa"),I(t,"class",o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(e,o){S(e,t,o),x(t,n),n.innerHTML=l,x(t,r),c&&c.m(t,null),x(t,i),s||(a=j(t,"click",u),s=!0)},p(r,s){e=r,17&s&&l!==(l=e[4](e[9])+"")&&(n.innerHTML=l),e[2]||e[3]?c&&(c.d(1),c=null):c?c.p(e,s):(c=cM(e),c.c(),c.m(t,i)),6&s&&o!==(o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&I(t,"class",o)},d(e){e&&C(t),c&&c.d(),s=!1,a()}}}function hM(t){let n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=uM(lM(t,r,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=P()},m(e,t){for(let n=0;n<i.length;n+=1)i[n].m(e,t);S(e,n,t)},p(e,[t]){if(63&t){let o;for(r=e[0],o=0;o<r.length;o+=1){const s=lM(e,r,o);i[o]?i[o].p(s,t):(i[o]=uM(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:e,o:e,d(e){_(i,e),e&&C(n)}}}function fM(e,t,n){const r=re();let{value:i=[]}=t,{activeValue:o}=t,{isDisabled:s=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:l}=t;function c(e,t){t.stopPropagation(),r("multiItemClear",{i:e})}return e.$$set=e=>{"value"in e&&n(0,i=e.value),"activeValue"in e&&n(1,o=e.activeValue),"isDisabled"in e&&n(2,s=e.isDisabled),"multiFullItemClearable"in e&&n(3,a=e.multiFullItemClearable),"getSelectionLabel"in e&&n(4,l=e.getSelectionLabel)},[i,o,s,a,l,c,(e,t)=>c(e,t),(e,t)=>a?c(e,t):{}]}class dM extends Fe{constructor(e){super(),Ve(this,e,fM,hM,a,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function pM(e,t,n){const r=e.slice();return r[23]=t[n],r}const mM=e=>({item:32&e,i:32&e,hoverItemIndex:2&e}),gM=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function vM(e,t){let n,r,i;const o=t[15].default,s=c(o,t,t[14],gM),a=s||function(e){let t;return{c(){t=A("Missing template")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}();return{key:e,first:null,c(){n=O("svelte-virtual-list-row"),a&&a.c(),r=M(),L(n,"class","svelte-g2cagw"),this.first=n},m(e,t){S(e,n,t),a&&a.m(n,null),x(n,r),i=!0},p(e,n){t=e,s&&s.p&&(!i||16418&n)&&f(s,o,t,t[14],i?h(o,t[14],n,mM):d(t[14]),gM)},i(e){i||(Oe(a,e),i=!0)},o(e){Ee(a,e),i=!1},d(e){e&&C(n),a&&a.d(e)}}}function yM(e){let t,n,r,i,o,s,a=[],l=new Map,c=e[5];const u=e=>e[23].index;for(let t=0;t<c.length;t+=1){let n=pM(e,c,t),r=u(n);l.set(r,a[t]=vM(r,n))}return{c(){t=O("svelte-virtual-list-viewport"),n=O("svelte-virtual-list-contents");for(let e=0;e<a.length;e+=1)a[e].c();V(n,"padding-top",e[6]+"px"),V(n,"padding-bottom",e[7]+"px"),L(n,"class","svelte-g2cagw"),V(t,"height",e[0]),L(t,"class","svelte-g2cagw"),me((()=>e[18].call(t)))},m(l,c){S(l,t,c),x(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);e[16](n),e[17](t),r=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=O("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=q();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=j(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{i=j(n.contentWindow,"resize",t)}),x(e,n),()=>{(r||i&&n.contentWindow)&&i(),C(n)}}(t,e[18].bind(t)),i=!0,o||(s=j(t,"scroll",e[8]),o=!0)},p(e,[r]){16418&r&&(c=e[5],Ce(),a=Ne(a,r,u,1,e,c,l,n,Te,vM,null,pM),_e()),(!i||64&r)&&V(n,"padding-top",e[6]+"px"),(!i||128&r)&&V(n,"padding-bottom",e[7]+"px"),(!i||1&r)&&V(t,"height",e[0])},i(e){if(!i){for(let e=0;e<c.length;e+=1)Oe(a[e]);i=!0}},o(e){for(let e=0;e<a.length;e+=1)Ee(a[e]);i=!1},d(n){n&&C(t);for(let e=0;e<a.length;e+=1)a[e].d();e[16](null),e[17](null),r(),o=!1,s()}}}function wM(e,t,n){let r,i,o,s,a,l,{$$slots:c={},$$scope:u}=t,{items:h}=t,{height:f="100%"}=t,{itemHeight:d=40}=t,{hoverItemIndex:p=0}=t,{start:m=0}=t,{end:g=0}=t,v=[],y=0,w=0,b=0;return te((()=>{r=o.getElementsByTagName("svelte-virtual-list-row"),n(13,a=!0)})),e.$$set=e=>{"items"in e&&n(11,h=e.items),"height"in e&&n(0,f=e.height),"itemHeight"in e&&n(12,d=e.itemHeight),"hoverItemIndex"in e&&n(1,p=e.hoverItemIndex),"start"in e&&n(9,m=e.start),"end"in e&&n(10,g=e.end),"$$scope"in e&&n(14,u=e.$$scope)},e.$$.update=()=>{3584&e.$$.dirty&&n(5,s=h.slice(m,g).map(((e,t)=>({index:t+m,data:e})))),14340&e.$$.dirty&&a&&async function(e,t,o){const{scrollTop:s}=i;await pe();let a=w-s,c=m;for(;a<t&&c<e.length;){let e=r[c-m];e||(n(10,g=c+1),await pe(),e=r[c-m]),a+=v[c]=o||e.offsetHeight,c+=1}n(10,g=c);const u=e.length-g;l=(w+a)/g,n(7,b=u*l),v.length=e.length,i&&n(3,i.scrollTop=0,i)}(h,y,d)},[f,p,y,i,o,s,w,b,async function(){const{scrollTop:e}=i,t=m;for(let e=0;e<r.length;e+=1)v[m+e]=d||r[e].offsetHeight;let o=0,s=0;for(;o<h.length;){const t=v[o]||l;if(s+t>e){n(9,m=o),n(6,w=s);break}s+=t,o+=1}for(;o<h.length&&(s+=v[o]||l,o+=1,!(s>e+y)););n(10,g=o);const a=h.length-g;for(l=s/g;o<h.length;)v[o++]=l;if(n(7,b=a*l),m<t){await pe();let n=0,o=0;for(let e=m;e<t;e+=1)r[e-m]&&(n+=v[e],o+=d||r[e-m].offsetHeight);const s=o-n;i.scrollTo(0,e+s)}},m,g,h,d,a,u,c,function(e){le[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},function(e){le[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(){y=this.offsetHeight,n(2,y)}]}class bM extends Fe{constructor(e){super(),Ve(this,e,wM,yM,a,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function xM(t){let n,r;return{c(){n=E("svg"),r=E("path"),I(r,"fill","currentColor"),I(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),I(n,"width","100%"),I(n,"height","100%"),I(n,"viewBox","-2 -2 50 50"),I(n,"focusable","false"),I(n,"aria-hidden","true"),I(n,"role","presentation")},m(e,t){S(e,n,t),x(n,r)},p:e,i:e,o:e,d(e){e&&C(n)}}}class $M extends Fe{constructor(e){super(),Ve(this,e,null,xM,a,{})}}function kM(e,t,n){const r=e.slice();return r[103]=t[n],r}function SM(e){let t,n,r,i,o;return{c(){t=O("span"),n=A(e[33]),r=M(),i=O("span"),o=A(e[32]),I(t,"id","aria-selection"),I(i,"id","aria-context")},m(e,s){S(e,t,s),x(t,n),S(e,r,s),S(e,i,s),x(i,o)},p(e,t){4&t[1]&&B(n,e[33]),2&t[1]&&B(o,e[32])},d(e){e&&C(t),e&&C(r),e&&C(i)}}}function CM(e){let t,r,i;const o=[e[18]];var s=e[17];function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Le(t.$$.fragment),r=P()},m(e,n){t&&Be(t,e,n),S(e,r,n),i=!0},p(e,n){const i=262144&n[0]?Ie(o,[De(e[18])]):{};if(s!==(s=e[17])){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}s?(t=new s(a()),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&Oe(t.$$.fragment,e),i=!0)},o(e){t&&Ee(t.$$.fragment,e),i=!1},d(e){e&&C(r),t&&ze(t,e)}}}function _M(e){let t,n,r;var i=e[26];function o(e){return{props:{value:e[2],getSelectionLabel:e[12],activeValue:e[30],isDisabled:e[9],multiFullItemClearable:e[8]}}}return i&&(t=new i(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Le(t.$$.fragment),n=P()},m(e,i){t&&Be(t,e,i),S(e,n,i),r=!0},p(e,r){const s={};if(4&r[0]&&(s.value=e[2]),4096&r[0]&&(s.getSelectionLabel=e[12]),1073741824&r[0]&&(s.activeValue=e[30]),512&r[0]&&(s.isDisabled=e[9]),256&r[0]&&(s.multiFullItemClearable=e[8]),i!==(i=e[26])){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}i?(t=new i(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40]),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(e){r||(t&&Oe(t.$$.fragment,e),r=!0)},o(e){t&&Ee(t.$$.fragment,e),r=!1},d(e){e&&C(n),t&&ze(t,e)}}}function OM(e){let t,n,r,i,o;var s=e[25];function a(e){return{props:{item:e[2],getSelectionLabel:e[12]}}}return s&&(n=new s(a(e))),{c(){t=O("div"),n&&Le(n.$$.fragment),I(t,"class","selectedItem svelte-17l1npl")},m(s,a){S(s,t,a),n&&Be(n,t,null),r=!0,i||(o=j(t,"focus",e[40]),i=!0)},p(e,r){const i={};if(4&r[0]&&(i.item=e[2]),4096&r[0]&&(i.getSelectionLabel=e[12]),s!==(s=e[25])){if(n){Ce();const e=n;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}s?(n=new s(a(e)),Le(n.$$.fragment),Oe(n.$$.fragment,1),Be(n,t,null)):n=null}else s&&n.$set(i)},i(e){r||(n&&Oe(n.$$.fragment,e),r=!0)},o(e){n&&Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),n&&ze(n),i=!1,o()}}}function EM(e){let t,n,r,i,o;var s=e[23];return s&&(n=new s({})),{c(){t=O("div"),n&&Le(n.$$.fragment),I(t,"class","clearSelect svelte-17l1npl"),I(t,"aria-hidden","true")},m(s,a){S(s,t,a),n&&Be(n,t,null),r=!0,i||(o=j(t,"click",T(e[27])),i=!0)},p(e,r){if(s!==(s=e[23])){if(n){Ce();const e=n;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}s?(n=new s({}),Le(n.$$.fragment),Oe(n.$$.fragment,1),Be(n,t,null)):n=null}},i(e){r||(n&&Oe(n.$$.fragment,e),r=!0)},o(e){n&&Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),n&&ze(n),i=!1,o()}}}function AM(e){let t;function n(e,t){return e[22]?PM:MM}let r=n(e),i=r(e);return{c(){t=O("div"),i.c(),I(t,"class","indicator svelte-17l1npl"),I(t,"aria-hidden","true")},m(e,n){S(e,t,n),i.m(t,null)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&C(t),i.d()}}}function MM(t){let n,r;return{c(){n=E("svg"),r=E("path"),I(r,"d","M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"),I(n,"width","100%"),I(n,"height","100%"),I(n,"viewBox","0 0 20 20"),I(n,"focusable","false"),I(n,"aria-hidden","true"),I(n,"class","svelte-17l1npl")},m(e,t){S(e,n,t),x(n,r)},p:e,d(e){e&&C(n)}}}function PM(e){let t,n;return{c(){t=new U(!1),n=P(),t.a=n},m(r,i){t.m(e[22],r,i),S(r,n,i)},p(e,n){4194304&n[0]&&t.p(e[22])},d(e){e&&C(n),e&&t.d()}}}function jM(e){let t;return{c(){t=O("div"),t.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',I(t,"class","spinner svelte-17l1npl")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function TM(e){let t,r,i,o;const s=[e[34]];function a(t){e[84](t)}var l=e[24];function c(e){let t={};for(let e=0;e<s.length;e+=1)t=n(t,s[e]);return void 0!==e[28]&&(t.hoverItemIndex=e[28]),{props:t}}return l&&(t=new l(c(e)),le.push((()=>Re(t,"hoverItemIndex",a))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Le(t.$$.fragment),i=P()},m(e,n){t&&Be(t,e,n),S(e,i,n),o=!0},p(e,n){const o=8&n[1]?Ie(s,[De(e[34])]):{};if(!r&&268435456&n[0]&&(r=!0,o.hoverItemIndex=e[28],ge((()=>r=!1))),l!==(l=e[24])){if(t){Ce();const e=t;Ee(e.$$.fragment,1,0,(()=>{ze(e,1)})),_e()}l?(t=new l(c(e)),le.push((()=>Re(t,"hoverItemIndex",a))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45]),Le(t.$$.fragment),Oe(t.$$.fragment,1),Be(t,i.parentNode,i)):t=null}else l&&t.$set(o)},i(e){o||(t&&Oe(t.$$.fragment,e),o=!0)},o(e){t&&Ee(t.$$.fragment,e),o=!1},d(e){e&&C(i),t&&ze(t,e)}}}function NM(e){let t,n,r;return{c(){t=O("input"),I(t,"name",n=e[16].name),I(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,I(t,"class","svelte-17l1npl")},m(e,n){S(e,t,n)},p(e,i){65536&i[0]&&n!==(n=e[16].name)&&I(t,"name",n),4100&i[0]&&r!==(r=e[2]?e[12](e[2]):null)&&(t.value=r)},d(e){e&&C(t)}}}function IM(e){let t,n=e[2],r=[];for(let t=0;t<n.length;t+=1)r[t]=DM(kM(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=P()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);S(e,t,n)},p(e,i){if(69636&i[0]){let o;for(n=e[2],o=0;o<n.length;o+=1){const s=kM(e,n,o);r[o]?r[o].p(s,i):(r[o]=DM(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){_(r,e),e&&C(t)}}}function DM(e){let t,n,r;return{c(){t=O("input"),I(t,"name",n=e[16].name),I(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,I(t,"class","svelte-17l1npl")},m(e,n){S(e,t,n)},p(e,i){65536&i[0]&&n!==(n=e[16].name)&&I(t,"name",n),4100&i[0]&&r!==(r=e[103]?e[12](e[103]):null)&&(t.value=r)},d(e){e&&C(t)}}}function RM(e){let t,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$=e[1]&&SM(e),k=e[17]&&CM(e),_=e[35]&&_M(e),E=[{readOnly:c=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],A={};for(let e=0;e<E.length;e+=1)A=n(A,E[e]);let P=!e[7]&&e[29]&&OM(e),T=e[37]&&EM(e),N=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&AM(e),R=e[4]&&jM(),L=e[5]&&TM(e),B=(!e[7]||e[7]&&!e[35])&&NM(e),V=e[7]&&e[35]&&IM(e);return{c(){t=O("div"),r=O("span"),$&&$.c(),i=M(),k&&k.c(),s=M(),_&&_.c(),a=M(),l=O("input"),u=M(),P&&P.c(),h=M(),T&&T.c(),f=M(),N&&N.c(),d=M(),R&&R.c(),p=M(),L&&L.c(),m=M(),B&&B.c(),g=M(),V&&V.c(),I(r,"aria-live","polite"),I(r,"aria-atomic","false"),I(r,"aria-relevant","additions text"),I(r,"class","a11yText svelte-17l1npl"),D(l,A),H(l,"svelte-17l1npl",!0),I(t,"class",v="selectContainer "+e[21]+" svelte-17l1npl"),I(t,"style",e[11]),H(t,"hasError",e[10]),H(t,"multiSelect",e[7]),H(t,"disabled",e[9]),H(t,"focused",e[1])},m(n,o){S(n,t,o),x(t,r),$&&$.m(r,null),x(t,i),k&&k.m(t,null),x(t,s),_&&_.m(t,null),x(t,a),x(t,l),l.autofocus&&l.focus(),e[82](l),z(l,e[3]),x(t,u),P&&P.m(t,null),x(t,h),T&&T.m(t,null),x(t,f),N&&N.m(t,null),x(t,d),R&&R.m(t,null),x(t,p),L&&L.m(t,null),x(t,m),B&&B.m(t,null),x(t,g),V&&V.m(t,null),e[85](t),y=!0,w||(b=[j(window,"click",e[41]),j(window,"focusin",e[41]),j(window,"keydown",e[39]),j(l,"focus",e[40]),j(l,"input",e[83]),j(t,"click",e[42])],w=!0)},p(e,n){e[1]?$?$.p(e,n):($=SM(e),$.c(),$.m(r,null)):$&&($.d(1),$=null),e[17]?k?(k.p(e,n),131072&n[0]&&Oe(k,1)):(k=CM(e),k.c(),Oe(k,1),k.m(t,s)):k&&(Ce(),Ee(k,1,1,(()=>{k=null})),_e()),e[35]?_?(_.p(e,n),16&n[1]&&Oe(_,1)):(_=_M(e),_.c(),Oe(_,1),_.m(t,a)):_&&(Ce(),Ee(_,1,1,(()=>{_=null})),_e()),D(l,A=Ie(E,[(!y||8192&n[0]&&c!==(c=!e[13]))&&{readOnly:c},1&n[1]&&e[31],(!y||32&n[1])&&{placeholder:e[36]},(!y||16384&n[0])&&{style:e[14]},(!y||512&n[0])&&{disabled:e[9]}])),8&n[0]&&l.value!==e[3]&&z(l,e[3]),H(l,"svelte-17l1npl",!0),!e[7]&&e[29]?P?(P.p(e,n),536871040&n[0]&&Oe(P,1)):(P=OM(e),P.c(),Oe(P,1),P.m(t,h)):P&&(Ce(),Ee(P,1,1,(()=>{P=null})),_e()),e[37]?T?(T.p(e,n),64&n[1]&&Oe(T,1)):(T=EM(e),T.c(),Oe(T,1),T.m(t,f)):T&&(Ce(),Ee(T,1,1,(()=>{T=null})),_e()),e[37]||!(e[20]||e[19]&&!e[2])&&(e[13]||e[9]||e[4]||(!e[29]||e[15])&&e[29])?N&&(N.d(1),N=null):N?N.p(e,n):(N=AM(e),N.c(),N.m(t,d)),e[4]?R||(R=jM(),R.c(),R.m(t,p)):R&&(R.d(1),R=null),e[5]?L?(L.p(e,n),32&n[0]&&Oe(L,1)):(L=TM(e),L.c(),Oe(L,1),L.m(t,m)):L&&(Ce(),Ee(L,1,1,(()=>{L=null})),_e()),!e[7]||e[7]&&!e[35]?B?B.p(e,n):(B=NM(e),B.c(),B.m(t,g)):B&&(B.d(1),B=null),e[7]&&e[35]?V?V.p(e,n):(V=IM(e),V.c(),V.m(t,null)):V&&(V.d(1),V=null),(!y||2097152&n[0]&&v!==(v="selectContainer "+e[21]+" svelte-17l1npl"))&&I(t,"class",v),(!y||2048&n[0])&&I(t,"style",e[11]),2098176&n[0]&&H(t,"hasError",e[10]),2097280&n[0]&&H(t,"multiSelect",e[7]),2097664&n[0]&&H(t,"disabled",e[9]),2097154&n[0]&&H(t,"focused",e[1])},i(e){y||(Oe(k),Oe(_),Oe(P),Oe(T),Oe(L),y=!0)},o(e){Ee(k),Ee(_),Ee(P),Ee(T),Ee(L),y=!1},d(n){n&&C(t),$&&$.d(),k&&k.d(),_&&_.d(),e[82](null),P&&P.d(),T&&T.d(),N&&N.d(),R&&R.d(),L&&L.d(),B&&B.d(),V&&V.d(),e[85](null),w=!1,o(b)}}}function LM(e){return e.map(((e,t)=>({index:t,value:e,label:`${e}`})))}function BM(e,t,n){let r,i,o,s,a,l,c,u;const h=re();let{id:f=null}=t,{container:d}=t,{input:p}=t,{isMulti:m=!1}=t,{multiFullItemClearable:g=!1}=t,{isDisabled:v=!1}=t,{isCreatable:y=!1}=t,{isFocused:w=!1}=t,{value:b=null}=t,{filterText:x=""}=t,{placeholder:$="Select..."}=t,{placeholderAlwaysShow:k=!1}=t,{items:S=null}=t,{itemFilter:C=((e,t,n)=>`${e}`.toLowerCase().includes(t.toLowerCase()))}=t,{groupBy:_}=t,{groupFilter:O=(e=>e)}=t,{isGroupHeaderSelectable:E=!1}=t,{getGroupHeaderLabel:A=(e=>e[M]||e.id)}=t,{labelIdentifier:M="label"}=t,{getOptionLabel:P=((e,t)=>e.isCreator?`Create "${t}"`:e[M])}=t,{optionIdentifier:j="value"}=t,{loadOptions:T}=t,{hasError:N=!1}=t,{containerStyles:I=""}=t,{getSelectionLabel:D=(e=>e?e[M]:null)}=t,{createGroupHeaderItem:R=(e=>({value:e,label:e}))}=t,{createItem:L=(e=>({value:e,label:e}))}=t;let{isSearchable:B=!0}=t,{inputStyles:z=""}=t,{isClearable:V=!0}=t,{isWaiting:F=!1}=t,{listPlacement:q="auto"}=t,{listOpen:H=!1}=t,{isVirtualList:W=!1}=t,{loadOptionsInterval:U=300}=t,{noOptionsMessage:J="No options"}=t,{hideEmptyState:K=!1}=t,{inputAttributes:G={}}=t,{listAutoWidth:Q=!0}=t,{itemHeight:Y=40}=t,{Icon:X}=t,{iconProps:Z={}}=t,{showChevron:ne=!1}=t,{showIndicator:ie=!1}=t,{containerClasses:oe=""}=t,{indicatorSvg:se}=t,{listOffset:ae=5}=t,{ClearIcon:ce=$M}=t,{Item:ue=FA}=t,{List:he=iM}=t,{Selection:fe=aM}=t,{MultiSelection:de=dM}=t,{VirtualList:pe=bM}=t;function me(e){if(e.loadOptions&&e.filterText.length>0)return;if(!e.items)return[];e.items&&e.items.length>0&&"object"!=typeof e.items[0]&&(e.items=LM(e.items));let t=e.items.filter((t=>{let n=C(P(t,e.filterText),e.filterText,t);return n&&e.isMulti&&e.value&&Array.isArray(e.value)&&(n=!e.value.some((n=>n[e.optionIdentifier]===t[e.optionIdentifier]))),n}));return e.groupBy&&(t=function(e){const t=[],n={};e.forEach((e=>{const r=_(e);t.includes(r)||(t.push(r),n[r]=[],r&&n[r].push(Object.assign(R(r,e),{id:r,isGroupHeader:!0,isSelectable:E}))),n[r].push(Object.assign({isGroupItem:!!r},e))}));const r=[];return O(t).forEach((e=>{r.push(...n[e])})),r}(t)),e.isCreatable&&(t=ge(t,e.filterText)),t}function ge(e,t){if(0===t.length)return e;const n=L(t);return e[0]&&t===e[0][M]?e:(n.isCreator=!0,[...e,n])}let ve,ye,we,be,xe,$e,{selectedValue:ke=null}=t;const Se=function(e,t,n){let r;return function(){let i=this,o=arguments,s=function(){r=null,n||e.apply(i,o)},a=n&&!r;clearTimeout(r),r=setTimeout(s,t),a&&e.apply(i,o)}}((async()=>{n(4,F=!0);let e=await T(x).catch((e=>{console.warn("svelte-select loadOptions error :>> ",e),h("error",{type:"loadOptions",details:e})}));e&&!e.cancelled&&(e?(e&&e.length>0&&"object"!=typeof e[0]&&(e=LM(e)),n(81,r=[...e]),h("loaded",{items:r})):n(81,r=[]),y&&n(81,r=ge(r,x)),n(4,F=!1),n(1,w=!0),n(5,H=!0))}),U);let Ce;function _e(){let e=!0;if(b){const t=[],r=[];b.forEach((n=>{t.includes(n[j])?e=!1:(t.push(n[j]),r.push(n))})),e||n(2,b=r)}return e}function Oe(e){let t=e?e[j]:b[j];return S.find((e=>e[j]===t))}function Ee(e){const{detail:t}=e,r=b[t?t.i:b.length-1];1===b.length?n(2,b=void 0):n(2,b=b.filter((e=>e!==r))),h("clear",r)}function Ae(){n(1,w=!0),p&&p.focus()}ee((async()=>{n(77,ye=b),n(78,we=x),n(79,be=w),n(80,xe=m)})),te((()=>{w&&p&&p.focus()}));let{ariaValues:Me=(e=>`Option ${e}, selected.`)}=t,{ariaListOpen:Pe=((e,t)=>`You are currently focused on option ${e}. There are ${t} results available.`)}=t,{ariaFocused:je=(()=>"Select is focused, type to refine list, press down to open the menu.")}=t;return e.$$set=e=>{"id"in e&&n(46,f=e.id),"container"in e&&n(0,d=e.container),"input"in e&&n(6,p=e.input),"isMulti"in e&&n(7,m=e.isMulti),"multiFullItemClearable"in e&&n(8,g=e.multiFullItemClearable),"isDisabled"in e&&n(9,v=e.isDisabled),"isCreatable"in e&&n(47,y=e.isCreatable),"isFocused"in e&&n(1,w=e.isFocused),"value"in e&&n(2,b=e.value),"filterText"in e&&n(3,x=e.filterText),"placeholder"in e&&n(48,$=e.placeholder),"placeholderAlwaysShow"in e&&n(49,k=e.placeholderAlwaysShow),"items"in e&&n(50,S=e.items),"itemFilter"in e&&n(51,C=e.itemFilter),"groupBy"in e&&n(52,_=e.groupBy),"groupFilter"in e&&n(53,O=e.groupFilter),"isGroupHeaderSelectable"in e&&n(54,E=e.isGroupHeaderSelectable),"getGroupHeaderLabel"in e&&n(55,A=e.getGroupHeaderLabel),"labelIdentifier"in e&&n(56,M=e.labelIdentifier),"getOptionLabel"in e&&n(57,P=e.getOptionLabel),"optionIdentifier"in e&&n(58,j=e.optionIdentifier),"loadOptions"in e&&n(59,T=e.loadOptions),"hasError"in e&&n(10,N=e.hasError),"containerStyles"in e&&n(11,I=e.containerStyles),"getSelectionLabel"in e&&n(12,D=e.getSelectionLabel),"createGroupHeaderItem"in e&&n(60,R=e.createGroupHeaderItem),"createItem"in e&&n(61,L=e.createItem),"isSearchable"in e&&n(13,B=e.isSearchable),"inputStyles"in e&&n(14,z=e.inputStyles),"isClearable"in e&&n(15,V=e.isClearable),"isWaiting"in e&&n(4,F=e.isWaiting),"listPlacement"in e&&n(63,q=e.listPlacement),"listOpen"in e&&n(5,H=e.listOpen),"isVirtualList"in e&&n(64,W=e.isVirtualList),"loadOptionsInterval"in e&&n(65,U=e.loadOptionsInterval),"noOptionsMessage"in e&&n(66,J=e.noOptionsMessage),"hideEmptyState"in e&&n(67,K=e.hideEmptyState),"inputAttributes"in e&&n(16,G=e.inputAttributes),"listAutoWidth"in e&&n(68,Q=e.listAutoWidth),"itemHeight"in e&&n(69,Y=e.itemHeight),"Icon"in e&&n(17,X=e.Icon),"iconProps"in e&&n(18,Z=e.iconProps),"showChevron"in e&&n(19,ne=e.showChevron),"showIndicator"in e&&n(20,ie=e.showIndicator),"containerClasses"in e&&n(21,oe=e.containerClasses),"indicatorSvg"in e&&n(22,se=e.indicatorSvg),"listOffset"in e&&n(70,ae=e.listOffset),"ClearIcon"in e&&n(23,ce=e.ClearIcon),"Item"in e&&n(71,ue=e.Item),"List"in e&&n(24,he=e.List),"Selection"in e&&n(25,fe=e.Selection),"MultiSelection"in e&&n(26,de=e.MultiSelection),"VirtualList"in e&&n(72,pe=e.VirtualList),"selectedValue"in e&&n(73,ke=e.selectedValue),"ariaValues"in e&&n(74,Me=e.ariaValues),"ariaListOpen"in e&&n(75,Pe=e.ariaListOpen),"ariaFocused"in e&&n(76,je=e.ariaFocused)},e.$$.update=()=>{140&e.$$.dirty[0]|405340160&e.$$.dirty[1]&&n(81,r=me({loadOptions:T,filterText:x,items:S,value:b,isMulti:m,optionIdentifier:j,groupBy:_,isCreatable:y})),2048&e.$$.dirty[2]&&ke&&console.warn("selectedValue is no longer used. Please use value instead."),524288&e.$$.dirty[1]&&function(e){e&&0!==e.length&&!e.some((e=>"object"!=typeof e))&&b&&(m?!b.some((e=>!e||!e[j])):b[j])&&(Array.isArray(b)?n(2,b=b.map((e=>Oe(e)||e))):n(2,b=Oe()||b))}(S),4&e.$$.dirty[0]&&b&&("string"==typeof b?n(2,b={[j]:b,label:b}):m&&Array.isArray(b)&&b.length>0&&n(2,b=b.map((e=>"string"==typeof e?{value:e,label:e}:e)))),73728&e.$$.dirty[0]&&(!G&&B||(n(31,Ce=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},G)),f&&n(31,Ce.id=f,Ce),B||n(31,Ce.readonly=!0,Ce))),128&e.$$.dirty[0]|262144&e.$$.dirty[2]&&(m&&b&&(Array.isArray(b)?n(2,b=[...b]):n(2,b=[b])),xe&&!m&&b&&n(2,b=null)),132&e.$$.dirty[0]&&m&&b&&b.length>1&&_e(),4&e.$$.dirty[0]&&b&&(m?JSON.stringify(b)!==JSON.stringify(ye)&&_e()&&h("select",b):ye&&JSON.stringify(b[j])===JSON.stringify(ye[j])||h("select",b)),132&e.$$.dirty[0]|32768&e.$$.dirty[2]&&!b&&m&&ye&&h("select",b),2&e.$$.dirty[0]|131072&e.$$.dirty[2]&&w!==be&&(w||H?Ae():p&&p.blur()),8&e.$$.dirty[0]|65536&e.$$.dirty[2]&&x!==we&&0!==x.length&&(n(1,w=!0),n(5,H=!0),T?Se():(n(5,H=!0),m&&n(30,ve=void 0))),12&e.$$.dirty[0]&&n(29,i=b&&0===x.length),536904208&e.$$.dirty[0]&&n(37,o=i&&V&&!v&&!F),132&e.$$.dirty[0]|393216&e.$$.dirty[1]&&n(36,s=k&&m?$:b?"":$),132&e.$$.dirty[0]&&n(35,a=m&&b&&b.length>0),141&e.$$.dirty[0]|218103808&e.$$.dirty[1]|526326&e.$$.dirty[2]&&n(34,l={Item:ue,filterText:x,optionIdentifier:j,noOptionsMessage:J,hideEmptyState:K,isVirtualList:W,VirtualList:pe,value:b,isMulti:m,getGroupHeaderLabel:A,items:r,itemHeight:Y,getOptionLabel:P,listPlacement:q,parent:d,listAutoWidth:Q,listOffset:ae}),132&e.$$.dirty[0]&&n(33,c=b?function(){let e;return e=m&&b.length>0?b.map((e=>D(e))).join(", "):D(b),Me(e)}():""),268435490&e.$$.dirty[0]|524288&e.$$.dirty[2]&&n(32,u=function(){if(!w||!r||0===r.length)return"";let e=r[$e];if(H&&e){let t=D(e),n=r?r.length:0;return Pe(t,n)}return je()}())},[d,w,b,x,F,H,p,m,g,v,N,I,D,B,z,V,G,X,Z,ne,ie,oe,se,ce,he,fe,de,function(){n(2,b=void 0),n(5,H=!1),h("clear",b),Ae()},$e,i,ve,Ce,u,c,l,a,s,o,Ee,function(e){if(w)switch(e.key){case"ArrowDown":case"ArrowUp":e.preventDefault(),n(5,H=!0),n(30,ve=void 0);break;case"Tab":H||n(1,w=!1);break;case"Backspace":if(!m||x.length>0)return;if(m&&b&&b.length>0){if(Ee(void 0!==ve?ve:b.length-1),0===ve||void 0===ve)break;n(30,ve=b.length>ve?ve-1:void 0)}break;case"ArrowLeft":if(!m||x.length>0)return;void 0===ve?n(30,ve=b.length-1):b.length>ve&&0!==ve&&n(30,ve-=1);break;case"ArrowRight":if(!m||x.length>0||void 0===ve)return;ve===b.length-1?n(30,ve=void 0):ve<b.length-1&&n(30,ve+=1)}},Ae,function(e){if(!d)return;const t=e.path&&e.path.length>0?e.path[0]:e.target;d.contains(t)||d.contains(e.relatedTarget)||(n(1,w=!1),n(5,H=!1),n(30,ve=void 0),p&&p.blur())},function(){v||(n(1,w=!0),n(5,H=!H))},function(e){const{detail:t}=e;if(t){n(3,x="");const e=Object.assign({},t);e.isGroupHeader&&!e.isSelectable||(n(2,b=m?b?b.concat([e]):[e]:e),n(2,b),setTimeout((()=>{n(5,H=!1),n(30,ve=void 0)})))}},function(e){const{detail:t}=e;m?(n(2,b=b||[]),n(2,b=[...b,L(t)])):n(2,b=L(t)),h("itemCreated",t),n(3,x=""),n(5,H=!1),n(30,ve=void 0)},function(){n(3,x=""),n(5,H=!1)},f,y,$,k,S,C,_,O,E,A,M,P,j,T,R,L,()=>r,q,W,U,J,K,Q,Y,ae,ue,pe,ke,Me,Pe,je,ye,we,be,xe,r,function(e){le[e?"unshift":"push"]((()=>{p=e,n(6,p)}))},function(){x=this.value,n(3,x)},function(e){$e=e,n(28,$e)},function(e){le[e?"unshift":"push"]((()=>{d=e,n(0,d)}))}]}class zM extends Fe{constructor(e){super(),Ve(this,e,BM,RM,a,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function VM(e){let t,n,r,i,o,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,E,A,P,T,N,D,R,L,B,V,F,q;function H(t){e[18](t)}let W={containerClasses:"jse-filter-path",showIndicator:!0,items:e[6]};function U(t){e[19](t)}void 0!==e[0]&&(W.value=e[0]),a=new zM({props:W}),le.push((()=>Re(a,"value",H)));let J={containerClasses:"jse-filter-relation",showIndicator:!0,items:e[8]};function K(t){e[21](t)}void 0!==e[1]&&(J.value=e[1]),u=new zM({props:J}),le.push((()=>Re(u,"value",U)));let G={containerClasses:"jse-sort-path",showIndicator:!0,items:e[6]};function Q(t){e[22](t)}void 0!==e[3]&&(G.value=e[3]),b=new zM({props:G}),le.push((()=>Re(b,"value",K)));let Y={containerClasses:"jse-sort-direction",showIndicator:!0,items:e[9]};function X(t){e[23](t)}void 0!==e[4]&&(Y.value=e[4]),_=new zM({props:Y}),le.push((()=>Re(_,"value",Q)));let Z={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:e[7]};return void 0!==e[5]&&(Z.value=e[5]),L=new zM({props:Z}),le.push((()=>Re(L,"value",X))),{c(){t=O("table"),n=O("tr"),r=O("th"),r.textContent="Filter",i=M(),o=O("td"),s=O("div"),Le(a.$$.fragment),c=M(),Le(u.$$.fragment),f=M(),d=O("input"),p=M(),m=O("tr"),g=O("th"),g.textContent="Sort",v=M(),y=O("td"),w=O("div"),Le(b.$$.fragment),k=M(),Le(_.$$.fragment),A=M(),P=O("tr"),T=O("th"),T.textContent="Pick",N=M(),D=O("td"),R=O("div"),Le(L.$$.fragment),I(r,"class","svelte-13taczd"),I(d,"class","jse-filter-value svelte-13taczd"),I(s,"class","jse-horizontal svelte-13taczd"),I(g,"class","svelte-13taczd"),I(w,"class","jse-horizontal svelte-13taczd"),I(T,"class","svelte-13taczd"),I(R,"class","jse-horizontal svelte-13taczd"),I(t,"class","jse-transform-wizard svelte-13taczd")},m(l,h){S(l,t,h),x(t,n),x(n,r),x(n,i),x(n,o),x(o,s),Be(a,s,null),x(s,c),Be(u,s,null),x(s,f),x(s,d),z(d,e[2]),x(t,p),x(t,m),x(m,g),x(m,v),x(m,y),x(y,w),Be(b,w,null),x(w,k),Be(_,w,null),x(t,A),x(t,P),x(P,T),x(P,N),x(P,D),x(D,R),Be(L,R,null),V=!0,F||(q=j(d,"input",e[20]),F=!0)},p(e,t){const n={};64&t[0]&&(n.items=e[6]),!l&&1&t[0]&&(l=!0,n.value=e[0],ge((()=>l=!1))),a.$set(n);const r={};!h&&2&t[0]&&(h=!0,r.value=e[1],ge((()=>h=!1))),u.$set(r),4&t[0]&&d.value!==e[2]&&z(d,e[2]);const i={};64&t[0]&&(i.items=e[6]),!$&&8&t[0]&&($=!0,i.value=e[3],ge((()=>$=!1))),b.$set(i);const o={};!E&&16&t[0]&&(E=!0,o.value=e[4],ge((()=>E=!1))),_.$set(o);const s={};128&t[0]&&(s.items=e[7]),!B&&32&t[0]&&(B=!0,s.value=e[5],ge((()=>B=!1))),L.$set(s)},i(e){V||(Oe(a.$$.fragment,e),Oe(u.$$.fragment,e),Oe(b.$$.fragment,e),Oe(_.$$.fragment,e),Oe(L.$$.fragment,e),V=!0)},o(e){Ee(a.$$.fragment,e),Ee(u.$$.fragment,e),Ee(b.$$.fragment,e),Ee(_.$$.fragment,e),Ee(L.$$.fragment,e),V=!1},d(e){e&&C(t),ze(a),ze(u),ze(b),ze(_),ze(L),F=!1,q()}}}function FM(e,t,n){let r,i,o,s,a;var l,c,u,h,f,d,p;const m=Et("jsoneditor:TransformWizard");let{json:g}=t,{queryOptions:v={}}=t,{onChange:y}=t;const w=["==","!=","<","<=",">",">="].map((e=>({value:e,label:e}))),b=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let x=(null===(l=null==v?void 0:v.filter)||void 0===l?void 0:l.path)?O(v.filter.path):null,$=(null===(c=null==v?void 0:v.filter)||void 0===c?void 0:c.relation)?w.find((e=>e.value===v.filter.relation)):null,k=(null===(u=null==v?void 0:v.filter)||void 0===u?void 0:u.value)||"",S=(null===(h=null==v?void 0:v.sort)||void 0===h?void 0:h.path)?O(v.sort.path):null,C=(null===(f=null==v?void 0:v.sort)||void 0===f?void 0:f.direction)?b.find((e=>e.value===v.sort.direction)):null,_=(null===(d=null==v?void 0:v.projection)||void 0===d?void 0:d.paths)?v.projection.paths.map(O):null;function O(e){return{value:e,label:ea(e)?"(whole item)":eu(e)}}return e.$$set=e=>{"json"in e&&n(11,g=e.json),"queryOptions"in e&&n(10,v=e.queryOptions),"onChange"in e&&n(12,y=e.onChange)},e.$$.update=()=>{2048&e.$$.dirty[0]&&n(17,r=Array.isArray(g)),133120&e.$$.dirty[0]&&n(16,i=r?zn(g):[]),133120&e.$$.dirty[0]&&n(15,o=r?zn(g,!0):[]),65536&e.$$.dirty[0]&&n(6,s=i.map(O)),32768&e.$$.dirty[0]&&n(7,a=o?o.map(O):[]),17472&e.$$.dirty[0]&&(null===n(14,p=null==v?void 0:v.filter)||void 0===p?void 0:p.path)&&s.find((e=>{var t;return ta(e.value,null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.path)})),1&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.path,e)||(m("changeFilterPath",e),n(10,v=kn.setIn(v,["filter","path"],e,!0)),y(v))}((null==x?void 0:x.value)||null),2&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.relation,e)||(m("changeFilterRelation",e),n(10,v=kn.setIn(v,["filter","relation"],e,!0)),y(v))}((null==$?void 0:$.value)||null),4&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.value,e)||(m("changeFilterValue",e),n(10,v=kn.setIn(v,["filter","value"],e,!0)),y(v))}(k||null),8&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.sort)||void 0===t?void 0:t.path,e)||(m("changeSortPath",e),n(10,v=kn.setIn(v,["sort","path"],e,!0)),y(v))}((null==S?void 0:S.value)||null),16&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.sort)||void 0===t?void 0:t.direction,e)||(m("changeSortDirection",e),n(10,v=kn.setIn(v,["sort","direction"],e,!0)),y(v))}((null==C?void 0:C.value)||null),32&e.$$.dirty[0]&&function(e){var t;ta(null===(t=null==v?void 0:v.projection)||void 0===t?void 0:t.paths,e)||(m("changeProjectionPaths",e),n(10,v=kn.setIn(v,["projection","paths"],e,!0)),y(v))}(_?_.map((e=>e.value)):null)},[x,$,k,S,C,_,s,a,w,b,v,g,y,l,p,o,i,r,function(e){x=e,n(0,x)},function(e){$=e,n(1,$)},function(){k=this.value,n(2,k)},function(e){S=e,n(3,S)},function(e){C=e,n(4,C)},function(e){_=e,n(5,_)}]}class qM extends Fe{constructor(e){super(),Ve(this,e,FM,VM,l,{json:11,queryOptions:10,onChange:12},null,[-1,-1])}}function HM(e,t,n){const r=e.slice();return r[5]=t[n],r}function WM(t){let n,r;return n=new Uc({props:{data:$_}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function UM(t){let n,r;return n=new Uc({props:{data:k_}}),{c(){Le(n.$$.fragment)},m(e,t){Be(n,e,t),r=!0},p:e,i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){ze(n,e)}}}function JM(e){let t,n,r,i,o,s,a,l,c,u,h=e[5].name+"";const f=[UM,WM],d=[];function p(e,t){return e[5].id===e[0]?0:1}function m(){return e[4](e[5])}return n=p(e),r=d[n]=f[n](e),{c(){t=O("button"),r.c(),i=M(),o=A(h),s=M(),I(t,"type","button"),I(t,"class","jse-query-language svelte-19cxesy"),I(t,"title",a=`Select ${e[5].name} as query language`),H(t,"selected",e[5].id===e[0])},m(e,r){S(e,t,r),d[n].m(t,null),x(t,i),x(t,o),x(t,s),l=!0,c||(u=j(t,"click",m),c=!0)},p(s,c){let u=n;n=p(e=s),n===u?d[n].p(e,c):(Ce(),Ee(d[u],1,1,(()=>{d[u]=null})),_e(),r=d[n],r?r.p(e,c):(r=d[n]=f[n](e),r.c()),Oe(r,1),r.m(t,i)),(!l||2&c)&&h!==(h=e[5].name+"")&&B(o,h),(!l||2&c&&a!==(a=`Select ${e[5].name} as query language`))&&I(t,"title",a),3&c&&H(t,"selected",e[5].id===e[0])},i(e){l||(Oe(r),l=!0)},o(e){Ee(r),l=!1},d(e){e&&C(t),d[n].d(),c=!1,u()}}}function KM(e){let t,n,r,i=e[1],o=[];for(let t=0;t<i.length;t+=1)o[t]=JM(HM(e,i,t));const s=e=>Ee(o[e],1,1,(()=>{o[e]=null}));return{c(){t=O("div"),n=O("div");for(let e=0;e<o.length;e+=1)o[e].c();I(n,"class","jse-select-query-language-container svelte-19cxesy"),I(t,"class","jse-select-query-language svelte-19cxesy")},m(e,i){S(e,t,i),x(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r=!0},p(e,[t]){if(7&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=HM(e,i,r);o[r]?(o[r].p(s,t),Oe(o[r],1)):(o[r]=JM(s),o[r].c(),Oe(o[r],1),o[r].m(n,null))}for(Ce(),r=i.length;r<o.length;r+=1)s(r);_e()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)Oe(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Ee(o[e]);r=!1},d(e){e&&C(t),_(o,e)}}}function GM(e,t,n){let{queryLanguages:r}=t,{queryLanguageId:i}=t,{onChangeQueryLanguage:o}=t;function s(e){n(0,i=e),o(e)}return e.$$set=e=>{"queryLanguages"in e&&n(1,r=e.queryLanguages),"queryLanguageId"in e&&n(0,i=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(3,o=e.onChangeQueryLanguage)},[i,r,s,o,e=>s(e.id)]}class QM extends Fe{constructor(e){super(),Ve(this,e,GM,KM,a,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}function YM(t){let n,r,i,o,s;return r=new Uc({props:{data:uc}}),{c(){n=O("button"),Le(r.$$.fragment),I(n,"type","button"),I(n,"class","jse-config svelte-d01h2s"),I(n,"title","Select a query language")},m(e,a){S(e,n,a),Be(r,n,null),t[6](n),i=!0,o||(s=j(n,"click",t[3]),o=!0)},p:e,i(e){i||(Oe(r.$$.fragment,e),i=!0)},o(e){Ee(r.$$.fragment,e),i=!1},d(e){e&&C(n),ze(r),t[6](null),o=!1,s()}}}function XM(e){let t,n,r,i,o,s,a,l,c,u=e[0].length>1&&YM(e);return s=new Uc({props:{data:wc}}),{c(){t=O("div"),n=O("div"),n.textContent="Transform",r=M(),u&&u.c(),i=M(),o=O("button"),Le(s.$$.fragment),I(n,"class","jse-title svelte-d01h2s"),I(o,"type","button"),I(o,"class","jse-close svelte-d01h2s"),I(t,"class","jse-header svelte-d01h2s")},m(h,f){S(h,t,f),x(t,n),x(t,r),u&&u.m(t,null),x(t,i),x(t,o),Be(s,o,null),a=!0,l||(c=j(o,"click",e[2]),l=!0)},p(e,[n]){e[0].length>1?u?(u.p(e,n),1&n&&Oe(u,1)):(u=YM(e),u.c(),Oe(u,1),u.m(t,i)):u&&(Ce(),Ee(u,1,1,(()=>{u=null})),_e())},i(e){a||(Oe(u),Oe(s.$$.fragment,e),a=!0)},o(e){Ee(u),Ee(s.$$.fragment,e),a=!1},d(e){e&&C(t),u&&u.d(),ze(s),l=!1,c()}}}function ZM(e,t,n){let r,{queryLanguages:i}=t,{queryLanguageId:o}=t,{onChangeQueryLanguage:s}=t;const{close:a}=oe("simple-modal"),{openAbsolutePopup:l,closeAbsolutePopup:c}=oe("absolute-popup");return e.$$set=e=>{"queryLanguages"in e&&n(0,i=e.queryLanguages),"queryLanguageId"in e&&n(4,o=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(5,s=e.onChangeQueryLanguage)},[i,r,a,function(){l(QM,{queryLanguages:i,queryLanguageId:o,onChangeQueryLanguage:e=>{c(),s(e)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:r,closeOnOuterClick:!0})},o,s,function(e){le[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class eP extends Fe{constructor(e){super(),Ve(this,e,ZM,XM,l,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}function tP(e){let t,n,r,i,o;const s=[rP,nP],a=[];function l(e,n){return 512&n[0]&&(t=null),null==t&&(t=!!Array.isArray(e[9])),t?0:1}return n=l(e,[-1,-1]),r=a[n]=s[n](e),{c(){r.c(),i=P()},m(e,t){a[n].m(e,t),S(e,i,t),o=!0},p(e,t){let o=n;n=l(e,t),n===o?a[n].p(e,t):(Ce(),Ee(a[o],1,1,(()=>{a[o]=null})),_e(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),Oe(r,1),r.m(i.parentNode,i))},i(e){o||(Oe(r),o=!0)},o(e){Ee(r),o=!1},d(e){a[n].d(e),e&&C(i)}}}function nP(t){let n;return{c(){n=A("(Only available for arrays, not for objects)")},m(e,t){S(e,n,t)},p:e,i:e,o:e,d(e){e&&C(n)}}}function rP(e){let t,n;return t=new qM({props:{queryOptions:e[7],json:e[9],onChange:e[16]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};128&n[0]&&(r.queryOptions=e[7]),512&n[0]&&(r.json=e[9]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function iP(e){let t,n;return t=new mA({props:{externalContent:e[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:e[2],escapeUnicodeCharacters:e[3],onRenderValue:e[5],onError:console.error,onChange:Yr,onFocus:Yr,onBlur:Yr,onSortModal:Yr,onTransformModal:Yr,onClassName:e[6]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};16384&n[0]&&(r.externalContent=e[14]),4&n[0]&&(r.escapeControlCharacters=e[2]),8&n[0]&&(r.escapeUnicodeCharacters=e[3]),32&n[0]&&(r.onRenderValue=e[5]),64&n[0]&&(r.onClassName=e[6]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function oP(t){let n,r,i=t[12].toString()+"";return{c(){n=O("div"),r=A(i),I(n,"class","jse-preview jse-error svelte-15uz9w0")},m(e,t){S(e,n,t),x(n,r)},p(e,t){4096&t[0]&&i!==(i=e[12].toString()+"")&&B(r,i)},i:e,o:e,d(e){e&&C(n)}}}function sP(e){let t,n;return t=new mA({props:{externalContent:e[13],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:e[2],escapeUnicodeCharacters:e[3],onRenderValue:e[5],onError:console.error,onChange:Yr,onFocus:Yr,onBlur:Yr,onSortModal:Yr,onTransformModal:Yr,onClassName:e[6]}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};8192&n[0]&&(r.externalContent=e[13]),4&n[0]&&(r.escapeControlCharacters=e[2]),8&n[0]&&(r.escapeUnicodeCharacters=e[3]),32&n[0]&&(r.onRenderValue=e[5]),64&n[0]&&(r.onClassName=e[6]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function aP(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,g,v,y,w,b,$,k,_,E,P,T,N,D,R,L,B,z,V,F,q,W,U,J,K,G,Q,Y,X,Z,ee,te,ne,re,ie,oe=e[15](e[0]).description+"";t=new eP({props:{queryLanguages:e[4],queryLanguageId:e[0],onChangeQueryLanguage:e[21]}}),b=new Uc({props:{data:e[10]?Xl:Zl}});let se=e[10]&&tP(e);V=new Uc({props:{data:e[11]?Xl:Zl}});let ae=e[11]&&iP(e);const le=[sP,oP],ce=[];function ue(e,t){return e[12]?1:0}return G=ue(e),Q=ce[G]=le[G](e),{c(){Le(t.$$.fragment),n=M(),r=O("div"),i=O("div"),s=O("div"),a=O("div"),a.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Language</div>',l=M(),c=O("div"),u=M(),h=O("div"),h.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Path</div>',f=M(),d=O("input"),g=M(),v=O("div"),y=O("div"),w=O("button"),Le(b.$$.fragment),$=A("\n                Wizard"),k=M(),se&&se.c(),_=M(),E=O("div"),E.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Query</div>',P=M(),T=O("textarea"),N=M(),D=O("div"),R=O("div"),L=O("div"),B=O("div"),z=O("button"),Le(V.$$.fragment),F=A("\n                  Original"),q=M(),ae&&ae.c(),W=M(),U=O("div"),J=O("div"),J.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Preview</div>',K=M(),Q.c(),Y=M(),X=O("div"),Z=O("button"),ee=A("Transform"),I(a,"class","jse-label svelte-15uz9w0"),I(c,"class","jse-description svelte-15uz9w0"),I(h,"class","jse-label svelte-15uz9w0"),I(d,"class","jse-path svelte-15uz9w0"),I(d,"type","text"),d.readOnly=!0,I(d,"title","Selected path"),d.value=p=ea(e[1])?"(whole document)":eu(e[1]),I(w,"type","button"),I(w,"class","svelte-15uz9w0"),I(y,"class","jse-label-inner svelte-15uz9w0"),I(v,"class","jse-label svelte-15uz9w0"),I(E,"class","jse-label svelte-15uz9w0"),I(T,"class","jse-query svelte-15uz9w0"),I(T,"spellcheck","false"),T.value=e[8],I(s,"class","jse-query-contents svelte-15uz9w0"),I(z,"type","button"),I(z,"class","svelte-15uz9w0"),I(B,"class","jse-label-inner svelte-15uz9w0"),I(L,"class","jse-label svelte-15uz9w0"),I(R,"class","jse-original-data svelte-15uz9w0"),H(R,"jse-hide",!e[11]),I(J,"class","jse-label svelte-15uz9w0"),I(U,"class","jse-preview-data svelte-15uz9w0"),I(D,"class","jse-data-contents svelte-15uz9w0"),H(D,"jse-hide-original-data",!e[11]),I(i,"class","jse-main-contents svelte-15uz9w0"),I(Z,"type","button"),I(Z,"class","jse-primary svelte-15uz9w0"),Z.disabled=te=!!e[12],I(X,"class","jse-actions svelte-15uz9w0"),I(r,"class","jse-contents svelte-15uz9w0")},m(o,p){Be(t,o,p),S(o,n,p),S(o,r,p),x(r,i),x(i,s),x(s,a),x(s,l),x(s,c),c.innerHTML=oe,x(s,u),x(s,h),x(s,f),x(s,d),x(s,g),x(s,v),x(v,y),x(y,w),Be(b,w,null),x(w,$),x(s,k),se&&se.m(s,null),x(s,_),x(s,E),x(s,P),x(s,T),x(i,N),x(i,D),x(D,R),x(R,L),x(L,B),x(B,z),Be(V,z,null),x(z,F),x(R,q),ae&&ae.m(R,null),x(D,W),x(D,U),x(U,J),x(U,K),ce[G].m(U,null),x(r,Y),x(r,X),x(X,Z),x(Z,ee),ne=!0,re||(ie=[j(w,"click",e[19]),j(T,"input",e[17]),j(z,"click",e[20]),j(Z,"click",e[18]),m(cP.call(null,Z))],re=!0)},p(e,n){const r={};16&n[0]&&(r.queryLanguages=e[4]),1&n[0]&&(r.queryLanguageId=e[0]),t.$set(r),(!ne||1&n[0])&&oe!==(oe=e[15](e[0]).description+"")&&(c.innerHTML=oe),(!ne||2&n[0]&&p!==(p=ea(e[1])?"(whole document)":eu(e[1]))&&d.value!==p)&&(d.value=p);const i={};1024&n[0]&&(i.data=e[10]?Xl:Zl),b.$set(i),e[10]?se?(se.p(e,n),1024&n[0]&&Oe(se,1)):(se=tP(e),se.c(),Oe(se,1),se.m(s,_)):se&&(Ce(),Ee(se,1,1,(()=>{se=null})),_e()),(!ne||256&n[0])&&(T.value=e[8]);const o={};2048&n[0]&&(o.data=e[11]?Xl:Zl),V.$set(o),e[11]?ae?(ae.p(e,n),2048&n[0]&&Oe(ae,1)):(ae=iP(e),ae.c(),Oe(ae,1),ae.m(R,null)):ae&&(Ce(),Ee(ae,1,1,(()=>{ae=null})),_e()),2048&n[0]&&H(R,"jse-hide",!e[11]);let a=G;G=ue(e),G===a?ce[G].p(e,n):(Ce(),Ee(ce[a],1,1,(()=>{ce[a]=null})),_e(),Q=ce[G],Q?Q.p(e,n):(Q=ce[G]=le[G](e),Q.c()),Oe(Q,1),Q.m(U,null)),2048&n[0]&&H(D,"jse-hide-original-data",!e[11]),(!ne||4096&n[0]&&te!==(te=!!e[12]))&&(Z.disabled=te)},i(e){ne||(Oe(t.$$.fragment,e),Oe(b.$$.fragment,e),Oe(se),Oe(V.$$.fragment,e),Oe(ae),Oe(Q),ne=!0)},o(e){Ee(t.$$.fragment,e),Ee(b.$$.fragment,e),Ee(se),Ee(V.$$.fragment,e),Ee(ae),Ee(Q),ne=!1},d(e){ze(t,e),e&&C(n),e&&C(r),ze(b),se&&se.d(),ze(V),ae&&ae.d(),ce[G].d(),re=!1,o(ie)}}}function lP(e){let t,n,r;return n=new Wl({props:{$$slots:{default:[aP]},$$scope:{ctx:e}}}),{c(){t=O("div"),Le(n.$$.fragment),I(t,"class","jse-modal jse-transform svelte-15uz9w0")},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,t){const r={};32767&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function cP(e){e.focus()}function uP(e,t,n){let r,i;const o=Et("jsoneditor:TransformModal");let{id:s="transform-modal-"+bn()}=t,{json:a}=t,{selectedPath:l=[]}=t,{escapeControlCharacters:c}=t,{escapeUnicodeCharacters:u}=t,{queryLanguages:h}=t,{queryLanguageId:f}=t,{onChangeQueryLanguage:d}=t,{onRenderValue:p}=t,{onClassName:m}=t,{onTransform:g}=t;const{close:v}=oe("simple-modal"),y=`${s}:${kn.compileJSONPointer(l)}`,w=BA[y]||{};let b,x=!1!==BA.showWizard,$=!1!==BA.showOriginal,k=w.queryOptions||{},S=f===w.queryLanguageId&&w.query?w.query:O(f).createQuery(a,w.queryOptions||{}),C=w.isManual||!1,_={text:""};function O(e){return h.find((t=>t.id===e))||h[0]}const E=Hs((function(e,t){try{o("previewTransform",{query:t});const r=O(f).executeQuery(e,t);n(13,_={json:r}),n(12,b=void 0)}catch(e){n(13,_={text:""}),n(12,b=e)}}),300);return e.$$set=e=>{"id"in e&&n(22,s=e.id),"json"in e&&n(23,a=e.json),"selectedPath"in e&&n(1,l=e.selectedPath),"escapeControlCharacters"in e&&n(2,c=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(3,u=e.escapeUnicodeCharacters),"queryLanguages"in e&&n(4,h=e.queryLanguages),"queryLanguageId"in e&&n(0,f=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(24,d=e.onChangeQueryLanguage),"onRenderValue"in e&&n(5,p=e.onRenderValue),"onClassName"in e&&n(6,m=e.onClassName),"onTransform"in e&&n(25,g=e.onTransform)},e.$$.update=()=>{8388610&e.$$.dirty[0]&&n(9,r=kn.getIn(a,l)),512&e.$$.dirty[0]&&n(14,i={json:r}),768&e.$$.dirty[0]&&E(r,S),201326977&e.$$.dirty[0]&&(n(26,BA[y]={queryOptions:k,query:S,queryLanguageId:f,isManual:C},BA),o("store state in memory",y,BA[y]))},[f,l,c,u,h,p,m,k,S,r,x,$,b,_,i,O,function(e){n(7,k=e),n(8,S=O(f).createQuery(a,e)),n(27,C=!1),o("updateQueryByWizard",{queryOptions:k,query:S,isManual:C})},function(e){n(8,S=e.target.value),n(27,C=!0),o("handleChangeQuery",{query:S,isManual:C})},function(){try{o("handleTransform",{query:S});const e=O(f).executeQuery(r,S);g([{op:"replace",path:kn.compileJSONPointer(l),value:e}]),v()}catch(e){console.error(e),n(13,_={text:""}),n(12,b=e.toString())}},function(){n(10,x=!x),n(26,BA.showWizard=x,BA)},function(){n(11,$=!$),n(26,BA.showOriginal=$,BA)},function(e){o("handleChangeQueryLanguage",e),n(0,f=e),d(e);const t=O(f);n(8,S=t.createQuery(a,k)),n(27,C=!1)},s,a,d,g,BA,C]}class hP extends Fe{constructor(e){super(),Ve(this,e,uP,lP,l,{id:22,json:23,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,queryLanguages:4,queryLanguageId:0,onChangeQueryLanguage:24,onRenderValue:5,onClassName:6,onTransform:25},null,[-1,-1])}}const fP={};function dP(e){let t,n,r,i,o,s,a;function l(t){e[12](t)}let c={showIndicator:!0,items:e[4]};return void 0!==e[1]&&(c.value=e[1]),o=new zM({props:c}),le.push((()=>Re(o,"value",l))),{c(){t=O("tr"),n=O("th"),n.textContent="Property",r=M(),i=O("td"),Le(o.$$.fragment),I(n,"class","svelte-ery7bx"),I(i,"class","svelte-ery7bx")},m(e,s){S(e,t,s),x(t,n),x(t,r),x(t,i),Be(o,i,null),a=!0},p(e,t){const n={};16&t&&(n.items=e[4]),!s&&2&t&&(s=!0,n.value=e[1],ge((()=>s=!1))),o.$set(n)},i(e){a||(Oe(o.$$.fragment,e),a=!0)},o(e){Ee(o.$$.fragment,e),a=!1},d(e){e&&C(t),ze(o)}}}function pP(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,g,v,y,w,b,$,k,_,E,P,T,N,D,R,L,B,z,V,F;n=new ZC({props:{title:e[3]?"Sort array items":"Sort object keys"}});let q=e[3]&&(e[4].length>1||void 0===e[1])&&dP(e);function H(t){e[13](t)}let W={showIndicator:!0,items:e[5],isClearable:!1};return void 0!==e[2]&&(W.value=e[2]),_=new zM({props:W}),le.push((()=>Re(_,"value",H))),{c(){t=O("div"),Le(n.$$.fragment),r=M(),i=O("div"),s=O("table"),a=O("colgroup"),a.innerHTML='<col width="25%"/> \n        <col width="75%"/>',l=M(),c=O("tbody"),u=O("tr"),h=O("th"),h.textContent="Path",f=M(),d=O("td"),p=O("input"),v=M(),q&&q.c(),y=M(),w=O("tr"),b=O("th"),b.textContent="Direction",$=M(),k=O("td"),Le(_.$$.fragment),P=M(),T=O("div"),N=M(),D=O("div"),R=O("button"),L=A("Sort"),I(h,"class","svelte-ery7bx"),I(p,"class","jse-path svelte-ery7bx"),I(p,"type","text"),p.readOnly=!0,I(p,"title","Selected path"),p.value=g=ea(e[0])?"(whole document)":eu(e[0]),I(d,"class","svelte-ery7bx"),I(b,"class","svelte-ery7bx"),I(k,"class","svelte-ery7bx"),I(s,"class","svelte-ery7bx"),I(T,"class","jse-space svelte-ery7bx"),I(R,"type","button"),I(R,"class","jse-primary svelte-ery7bx"),R.disabled=B=!!e[3]&&!e[1],I(D,"class","jse-actions svelte-ery7bx"),I(i,"class","jse-contents svelte-ery7bx"),I(t,"class","jse-modal jse-sort svelte-ery7bx")},m(o,g){S(o,t,g),Be(n,t,null),x(t,r),x(t,i),x(i,s),x(s,a),x(s,l),x(s,c),x(c,u),x(u,h),x(u,f),x(u,d),x(d,p),x(c,v),q&&q.m(c,null),x(c,y),x(c,w),x(w,b),x(w,$),x(w,k),Be(_,k,null),x(i,P),x(i,T),x(i,N),x(i,D),x(D,R),x(R,L),z=!0,V||(F=[j(R,"click",e[6]),m(mP.call(null,R))],V=!0)},p(e,[t]){const r={};8&t&&(r.title=e[3]?"Sort array items":"Sort object keys"),n.$set(r),(!z||1&t&&g!==(g=ea(e[0])?"(whole document)":eu(e[0]))&&p.value!==g)&&(p.value=g),e[3]&&(e[4].length>1||void 0===e[1])?q?(q.p(e,t),26&t&&Oe(q,1)):(q=dP(e),q.c(),Oe(q,1),q.m(c,y)):q&&(Ce(),Ee(q,1,1,(()=>{q=null})),_e());const i={};!E&&4&t&&(E=!0,i.value=e[2],ge((()=>E=!1))),_.$set(i),(!z||10&t&&B!==(B=!!e[3]&&!e[1]))&&(R.disabled=B)},i(e){z||(Oe(n.$$.fragment,e),Oe(q),Oe(_.$$.fragment,e),z=!0)},o(e){Ee(n.$$.fragment,e),Ee(q),Ee(_.$$.fragment,e),z=!1},d(e){e&&C(t),ze(n),q&&q.d(),ze(_),V=!1,o(F)}}}function mP(e){e.focus()}function gP(e,t,n){let r,i,o;const s=Et("jsoneditor:SortModal");let{id:a}=t,{json:l}=t,{selectedPath:c}=t,{onSort:u}=t;const{close:h}=oe("simple-modal"),f=`${a}:${kn.compileJSONPointer(c)}`,d=kn.getIn(l,c),p={value:1,label:"ascending"},m=[p,{value:-1,label:"descending"}];let g=fP[f]&&fP[f].selectedProperty||void 0,v=fP[f]&&fP[f].selectedDirection||p;function y(e){return{value:e,label:ea(e)?"(whole item)":eu(e)}}return e.$$set=e=>{"id"in e&&n(7,a=e.id),"json"in e&&n(8,l=e.json),"selectedPath"in e&&n(0,c=e.selectedPath),"onSort"in e&&n(9,u=e.onSort)},e.$$.update=()=>{8&e.$$.dirty&&n(11,i=r?zn(d):void 0),2048&e.$$.dirty&&n(4,o=i?i.map(y):void 0),18&e.$$.dirty&&void 0===g&&o&&1===o.length&&n(1,g=o[0]),1030&e.$$.dirty&&(n(10,fP[f]={selectedProperty:g,selectedDirection:v},fP),s("store state in memory",f,fP[f]))},n(3,r=Array.isArray(d)),[c,g,v,r,o,m,function(){if(r){if(!g)return;const e=g.value,t=v.value,n=LE(l,c,e,t);u(n)}else if(Pn(d)){const e=v.value,t=function(e,t=[],n=1){const r=kn.getIn(e,t),i=Object.keys(r).slice();i.sort(((e,t)=>n*RE(e,t)));const o=[];for(let e=0;e<i.length;e++){const n=i[e],r=kn.compileJSONPointer(t.concat(n));o.push({op:"move",from:r,path:r})}return o}(l,c,e);u(t)}else console.error("Cannot sort: no array or object");h()},a,l,u,fP,i,function(e){g=e,n(1,g),n(4,o),n(11,i),n(3,r)},function(e){v=e,n(2,v)}]}class vP extends Fe{constructor(e){super(),Ve(this,e,gP,pP,l,{id:7,json:8,selectedPath:0,onSort:9})}}function yP(e,t,n){const r=oe("simple-modal");return[r.open,r.close]}class wP extends Fe{constructor(e){super(),Ve(this,e,yP,null,l,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}function bP(e){let t,n,r={readOnly:e[2],indentation:e[3],externalContent:e[0],mainMenuBar:e[5],navigationBar:e[6],escapeControlCharacters:e[8],escapeUnicodeCharacters:e[9],validator:e[10],onError:e[13],onChange:e[21],onRequestRepair:e[23],onRenderValue:e[11],onClassName:e[12],onFocus:e[25],onBlur:e[26],onRenderMenu:e[27],onSortModal:e[29],onTransformModal:e[28]};return t=new mA({props:r}),e[54](t),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.readOnly=e[2]),8&n[0]&&(r.indentation=e[3]),1&n[0]&&(r.externalContent=e[0]),32&n[0]&&(r.mainMenuBar=e[5]),64&n[0]&&(r.navigationBar=e[6]),256&n[0]&&(r.escapeControlCharacters=e[8]),512&n[0]&&(r.escapeUnicodeCharacters=e[9]),1024&n[0]&&(r.validator=e[10]),8192&n[0]&&(r.onError=e[13]),2048&n[0]&&(r.onRenderValue=e[11]),4096&n[0]&&(r.onClassName=e[12]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(n){e[54](null),ze(t,n)}}}function xP(e){let t,n,r={text:e[20](e[0]),readOnly:e[2],indentation:e[3],tabSize:e[4],mainMenuBar:e[5],statusBar:e[7],escapeUnicodeCharacters:e[9],validator:e[10],onChange:e[22],onSwitchToTreeMode:e[24],onError:e[13],onFocus:e[25],onBlur:e[26],onRenderMenu:e[27],onSortModal:e[29],onTransformModal:e[28]};return t=new EC({props:r}),e[53](t),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.text=e[20](e[0])),4&n[0]&&(r.readOnly=e[2]),8&n[0]&&(r.indentation=e[3]),16&n[0]&&(r.tabSize=e[4]),32&n[0]&&(r.mainMenuBar=e[5]),128&n[0]&&(r.statusBar=e[7]),512&n[0]&&(r.escapeUnicodeCharacters=e[9]),1024&n[0]&&(r.validator=e[10]),8192&n[0]&&(r.onError=e[13]),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(n){e[53](null),ze(t,n)}}}function $P(e){let t,n,r,i;const o=[xP,bP],s=[];function a(e,t){return e[1]===zt.CODE?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=P()},m(e,n){s[t].m(e,n),S(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Ce(),Ee(s[l],1,1,(()=>{s[l]=null})),_e(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Oe(n,1),n.m(r.parentNode,r))},i(e){i||(Oe(n),i=!0)},o(e){Ee(n),i=!1},d(e){s[t].d(e),e&&C(r)}}}function kP(t){let n,r,i=t[14],o=$P(t);return{c(){n=O("div"),o.c(),I(n,"class","jse-main svelte-1ogdbp0"),H(n,"jse-focus",t[15])},m(e,i){S(e,n,i),o.m(n,null),t[55](n),r=!0},p(t,r){16384&r[0]&&l(i,i=t[14])?(Ce(),Ee(o,1,1,e),_e(),o=$P(t),o.c(),Oe(o,1),o.m(n,null)):o.p(t,r),32768&r[0]&&H(n,"jse-focus",t[15])},i(e){r||(Oe(o),r=!0)},o(e){Ee(o),r=!1},d(e){e&&C(n),o.d(e),t[55](null)}}}function SP(e){let t,n,r,i,o;function s(t){e[52](t)}let a={};return void 0!==e[19]&&(a.open=e[19]),t=new wP({props:a}),le.push((()=>Re(t,"open",s))),i=new Wl({props:{$$slots:{default:[kP]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment),r=M(),Le(i.$$.fragment)},m(e,n){Be(t,e,n),S(e,r,n),Be(i,e,n),o=!0},p(e,r){const o={};!n&&524288&r[0]&&(n=!0,o.open=e[19],ge((()=>n=!1))),t.$set(o);const s={};524287&r[0]|1073741824&r[1]&&(s.$$scope={dirty:r,ctx:e}),i.$set(s)},i(e){o||(Oe(t.$$.fragment,e),Oe(i.$$.fragment,e),o=!0)},o(e){Ee(t.$$.fragment,e),Ee(i.$$.fragment,e),o=!1},d(e){ze(t,e),e&&C(r),ze(i,e)}}}function CP(e){let t,n;return t=new Bt({props:{$$slots:{default:[SP]},$$scope:{ctx:e}}}),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};1048575&n[0]|1073741824&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function _P(e){this.$set(e)}function OP(){this.$destroy()}function EP(e,t,n){let r;const i=Et("jsoneditor:Main");let o,s,a,l,c,{content:u={text:""}}=t,{readOnly:h=!1}=t,{indentation:f=2}=t,{tabSize:d=4}=t,{mode:p=zt.TREE}=t,{mainMenuBar:m=!0}=t,{navigationBar:g=!0}=t,{statusBar:v=!0}=t,{escapeControlCharacters:y=!1}=t,{escapeUnicodeCharacters:w=!1}=t,{validator:b=null}=t,{queryLanguages:x=[gA]}=t,{queryLanguageId:$=x[0].id}=t,{onChangeQueryLanguage:k=Yr}=t,{onChange:S=null}=t,{onRenderValue:C=LA}=t,{onClassName:_=Yr}=t,{onRenderMenu:O=Yr}=t,{onChangeMode:E=Yr}=t,{onError:A=(e=>{console.error(e),alert(e.toString())})}=t,{onFocus:M=Yr}=t,{onBlur:P=Yr}=t,j=bn(),T=!1;function N(){a?a.focus():s&&s.focus()}function I(e,t,r){n(0,u=e),S&&S(e,t,r)}async function D(e){p!==e&&(n(1,p=e),await pe(),N(),E(e))}const R={separator:!0};function L(e){i("handleChangeQueryLanguage",e),n(30,$=e),k(e)}return e.$$set=e=>{"content"in e&&n(0,u=e.content),"readOnly"in e&&n(2,h=e.readOnly),"indentation"in e&&n(3,f=e.indentation),"tabSize"in e&&n(4,d=e.tabSize),"mode"in e&&n(1,p=e.mode),"mainMenuBar"in e&&n(5,m=e.mainMenuBar),"navigationBar"in e&&n(6,g=e.navigationBar),"statusBar"in e&&n(7,v=e.statusBar),"escapeControlCharacters"in e&&n(8,y=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(9,w=e.escapeUnicodeCharacters),"validator"in e&&n(10,b=e.validator),"queryLanguages"in e&&n(31,x=e.queryLanguages),"queryLanguageId"in e&&n(30,$=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(32,k=e.onChangeQueryLanguage),"onChange"in e&&n(33,S=e.onChange),"onRenderValue"in e&&n(11,C=e.onRenderValue),"onClassName"in e&&n(12,_=e.onClassName),"onRenderMenu"in e&&n(34,O=e.onRenderMenu),"onChangeMode"in e&&n(35,E=e.onChangeMode),"onError"in e&&n(13,A=e.onError),"onFocus"in e&&n(36,M=e.onFocus),"onBlur"in e&&n(37,P=e.onBlur)},e.$$.update=()=>{if(1&e.$$.dirty[0]){const e=Yn(u);e&&console.error("Error: "+e)}2&e.$$.dirty[0]&&n(51,r=p===zt.CODE),2&e.$$.dirty[0]|1048576&e.$$.dirty[1]&&(c=[{text:"code",title:`Switch to code mode (current mode: ${p})`,className:"jse-group-button jse-first"+(r?" jse-selected":""),onClick:()=>D(zt.CODE)},{text:"tree",title:`Switch to tree mode (current mode: ${p})`,className:"jse-group-button jse-last"+(r?"":" jse-selected"),onClick:()=>D(zt.TREE)}])},[u,p,h,f,d,m,g,v,y,w,b,C,_,A,j,T,o,s,a,l,function(e){return Xn(e)?e.text:JSON.stringify(e.json,null,f)},I,function(e,t){I({text:e,json:void 0},{text:t,json:void 0},null)},async function(){n(1,p=zt.CODE),await pe(),E(zt.CODE)},async function(){n(1,p=zt.TREE),await pe(),E(zt.TREE)},function(){n(15,T=!0),M&&M()},function(){n(15,T=!1),P&&P()},function(e,t){const n=e===zt.TREE||e===zt.CODE?(r=t[0])&&!0===r.space&&1===Object.keys(r).length?c.concat(t):c.concat([R],t):t;var r;return O(e,n)||n},function({id:e,json:t,selectedPath:n,onTransform:r,onClose:i}){console.log("json",t),h||l(hP,{id:e,json:t,selectedPath:n,escapeControlCharacters:y,escapeUnicodeCharacters:w,queryLanguages:x,queryLanguageId:$,onChangeQueryLanguage:L,onRenderValue:C,onClassName:_,onTransform:r},on,{onClose:i})},function({id:e,json:t,selectedPath:n,onSort:r,onClose:i}){h||l(vP,{id:e,json:t,selectedPath:n,onSort:r},rn,{onClose:i})},$,x,k,S,O,E,M,P,function(){return u},function(e){i("set");const t=Yn(e);if(t)throw new Error(t);n(14,j=bn()),n(0,u=e)},function(e){i("update");const t=Yn(e);if(t)throw new Error(t);n(0,u=e)},function(e){if(Xn(u))try{n(0,u={json:JSON.parse(u.text),text:void 0})}catch(e){throw new Error("Cannot apply patch: current document contains invalid JSON")}return s?s.patch(e):a?a.patch(e):void 0},function(e){if(s)return s.expand(e);throw new Error(`Method expand is not available in mode "${p}"`)},function(e){if(a)a.openTransformModal(e);else{if(!s)throw new Error(`Method transform is not available in mode "${p}"`);s.openTransformModal(e)}},function(){return s?s.acceptAutoRepair():u},function(e){if(s)return s.scrollTo(e);throw new Error(`Method scrollTo is not available in mode "${p}"`)},function(e){if(s)return s.findElement(e);throw new Error(`Method findElement is not available in mode "${p}"`)},N,function(){a&&a.refresh()},_P,OP,r,function(e){l=e,n(19,l)},function(e){le[e?"unshift":"push"]((()=>{a=e,n(18,a)}))},function(e){le[e?"unshift":"push"]((()=>{s=e,n(17,s)}))},function(e){le[e?"unshift":"push"]((()=>{o=e,n(16,o)}))}]}class AP extends Fe{constructor(e){super(),Ve(this,e,EP,CP,l,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,validator:10,queryLanguages:31,queryLanguageId:30,onChangeQueryLanguage:32,onChange:33,onRenderValue:11,onClassName:12,onRenderMenu:34,onChangeMode:35,onError:13,onFocus:36,onBlur:37,get:38,set:39,update:40,patch:41,expand:42,transform:43,acceptAutoRepair:44,scrollTo:45,findElement:46,focus:47,refresh:48,updateProps:49,destroy:50},null,[-1,-1])}get get(){return this.$$.ctx[38]}get set(){return this.$$.ctx[39]}get update(){return this.$$.ctx[40]}get patch(){return this.$$.ctx[41]}get expand(){return this.$$.ctx[42]}get transform(){return this.$$.ctx[43]}get acceptAutoRepair(){return this.$$.ctx[44]}get scrollTo(){return this.$$.ctx[45]}get findElement(){return this.$$.ctx[46]}get focus(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get updateProps(){return _P}get destroy(){return OP}}function MP(e,t,n){const r=e.slice();return r[5]=t[n],r}function PP(e){let t,n,r,i,o,s,a=e[5]+"";return{c(){t=O("sl-tag"),n=A(a),r=M(),L(t,"removable",""),L(t,"pill",""),L(t,"size","small"),L(t,"variant","success"),L(t,"data-value",i=e[5])},m(i,a){S(i,t,a),x(t,n),x(t,r),o||(s=j(t,"sl-remove",e[2]),o=!0)},p(e,r){1&r&&a!==(a=e[5]+"")&&B(n,a),1&r&&i!==(i=e[5])&&L(t,"data-value",i)},d(e){e&&C(t),o=!1,s()}}}function jP(t){let n,r,i,o,s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=PP(MP(t,s,e));return{c(){n=O("sl-input"),r=O("span");for(let e=0;e<a.length;e+=1)a[e].c();I(r,"slot","prefix"),L(n,"label","Tags"),L(n,"size","small"),L(n,"class","svelte-67kz3b")},m(e,s){S(e,n,s),x(n,r);for(let e=0;e<a.length;e+=1)a[e].m(r,null);i||(o=j(n,"keydown",t[1]),i=!0)},p(e,[t]){if(5&t){let n;for(s=e[0],n=0;n<s.length;n+=1){const i=MP(e,s,n);a[n]?a[n].p(i,t):(a[n]=PP(i),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},i:e,o:e,d(e){e&&C(n),_(a,e),i=!1,o()}}}function TP(e,t,n){const r=re();let{tags:i=[]}=t,{separator:o=" "}=t;return e.$$set=e=>{"tags"in e&&n(0,i=e.tags),"separator"in e&&n(3,o=e.separator)},[i,function(e){let t=e.target.value.trim();e.key===o&&(t.length>0&&n(0,i=[...i,t]),e.target.value="",r("tagschanged",{value:i}))},function(e){n(0,i=i.filter((t=>t!==e.target.dataset.value))),r("tagschanged",{value:i})},o]}xn((function(e,t){e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(!a&&$n)return $n(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=$n,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class r{}n._CodeOrName=r,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends r{constructor(e){if(super(),!n.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=i;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)c(n,t[r]),n.push(e[++r]);return new o(n)}n._Code=o,n.nil=new o(""),n._=s;const a=new o("+");function l(e,...t){const n=[h(e[0])];let r=0;for(;r<t.length;)n.push(a),c(n,t[r]),n.push(a,h(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new o(n)}function c(e,t){var n;t instanceof o?e.push(...t._items):e.push(t instanceof i?t:"number"==typeof(n=t)||"boolean"==typeof n||null===n?n:h(Array.isArray(n)?n.join(","):n))}function u(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function h(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.str=l,n.addCodeArg=c,n.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:l`${e}${t}`},n.stringify=function(e){return new o(h(e))},n.safeStringify=h,n.getProperty=function(e){return"string"==typeof e&&n.IDENTIFIER.test(e)?new o(`.${e}`):s`[${e}]`},n.getEsmExportName=function(e){if("string"==typeof e&&n.IDENTIFIER.test(e))return new o(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},n.regexpCode=function(e){return new o(e.toString())}},{}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const r=e("./code"),i=e("./scope");var o=e("./code");Object.defineProperty(n,"_",{enumerable:!0,get:()=>o._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>o.str}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:()=>o.strConcat}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>o.nil}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:()=>o.getProperty}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>o.stringify}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:()=>o.regexpCode}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>o.Name});var s=e("./scope");Object.defineProperty(n,"Scope",{enumerable:!0,get:()=>s.Scope}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:()=>s.ValueScope}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:()=>s.ValueScopeName}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:()=>s.varKinds}),n.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){return`${e?i.varKinds.var:this.varKind} ${this.name}${void 0===this.rhs?"":` = ${this.rhs}`};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=P(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=P(this.rhs,e,t),this}get names(){return M(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class f extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class d extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=P(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const i=n[r];i.optimizeNames(e,t)||(j(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>A(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class y extends g{}y.kind="else";class w extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof w?t:t.nodes:this.nodes.length?this:new w(T(e),t instanceof w?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=P(this.condition,e,t),this}get names(){const e=super.names;return M(e,this.condition),this.else&&A(e,this.else.names),e}}w.kind="if";class b extends g{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=P(this.iteration,e,t),this}get names(){return A(super.names,this.iteration.names)}}class $ extends b{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?i.varKinds.var:this.varKind,{name:n,from:r,to:o}=this;return`for(${t} ${n}=${r}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=M(super.names,this.from);return M(e,this.to)}}class k extends b{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=P(this.iterable,e,t),this}get names(){return A(super.names,this.iterable.names)}}class S extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class C extends m{render(e){return"return "+super.render(e)}}C.kind="return";class _ extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&A(e,this.catch.names),this.finally&&A(e,this.finally.names),e}}class O extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}O.kind="catch";class E extends g{render(e){return"finally"+super.render(e)}}function A(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function M(e,t){return t instanceof r._CodeOrName?A(e,t.names):e}function P(e,t,n){return e instanceof r.Name?o(e):(i=e)instanceof r._Code&&i._items.some((e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str]))?new r._Code(e._items.reduce(((e,t)=>(t instanceof r.Name&&(t=o(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e)),[])):e;var i;function o(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function j(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function T(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${R(e)}`}E.kind="finally",n.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new i.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new l(e,i,n)),i}const(e,t,n){return this._def(i.varKinds.const,e,t,n)}let(e,t,n){return this._def(i.varKinds.let,e,t,n)}var(e,t,n){return this._def(i.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,t){return this._leafNode(new u(e,n.operators.ADD,t))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[n,i]of e)t.length>1&&t.push(","),t.push(n),(n!==i||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,i));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new w(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new w(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(w,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,r,o=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const s=this._scope.toName(e);return this._for(new $(o,s,t,n),(()=>r(s)))}forOf(e,t,n,o=i.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,(t=>{this.var(s,r._`${e}[${t}]`),n(s)}))}return this._for(new k("of",o,s,t),(()=>n(s)))}forIn(e,t,n,o=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const s=this._scope.toName(e);return this._for(new k("in",o,s,t),(()=>n(s)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new f(e))}return(e){const t=new C;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new _;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new O(e),t(e)}return n&&(this._currNode=r.finally=new E,this.code(n)),this._endBlockNode(O,E)}throw(e){return this._leafNode(new d(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,i){return this._blockNode(new S(e,t,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},n.not=T;const N=D(n.operators.AND);n.and=function(...e){return e.reduce(N)};const I=D(n.operators.OR);function D(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${R(t)} ${e} ${R(n)}`}function R(e){return e instanceof r.Name?e:r._`(${e})`}n.or=function(...e){return e.reduce(I)}},{"./code":1,"./scope":3}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const r=e("./code");class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=n.UsedValueState||(n.UsedValueState={})),n.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}n.Scope=s;class a extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}n.ValueScopeName=a;const l=r._`\n`;n.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:r.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:i}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[i];if(s){const e=s.get(o);if(e)return e}else s=this._values[i]=new Map;s.set(o,r);const a=this._scope[i]||(this._scope[i]=[]),l=a.length;return a[l]=t.ref,r.setValue(t,{property:i,itemIndex:l}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,t,s={},a){let l=r.nil;for(const c in e){const u=e[c];if(!u)continue;const h=s[c]=s[c]||new Map;u.forEach((e=>{if(h.has(e))return;h.set(e,o.Started);let s=t(e);if(s)l=r._`${l}${this.opts.es5?n.varKinds.var:n.varKinds.const} ${e} = ${s};${this.opts._n}`;else{if(!(s=null==a?void 0:a(e)))throw new i(e);l=r._`${l}${s}${this.opts._n}`}h.set(e,o.Completed)}))}return l}}},{"./code":1}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const r=e("./codegen"),i=e("./util"),o=e("./names");function s(e,t){const n=e.const("err",t);e.if(r._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,r._`[${n}]`)),r._`${o.default.vErrors}.push(${n})`),e.code(r._`${o.default.errors}++`)}function a(e,t){const{gen:n,validateName:i,schemaEnv:o}=e;o.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${i}.errors`,t),n.return(!1))}n.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},n.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},n.reportError=function(e,t=n.keywordError,i,o){const{it:l}=e,{gen:u,compositeRule:h,allErrors:f}=l,d=c(e,t,i);(null!=o?o:h||f)?s(u,d):a(l,r._`[${d}]`)},n.reportExtraError=function(e,t=n.keywordError,r){const{it:i}=e,{gen:l,compositeRule:u,allErrors:h}=i;s(l,c(e,t,r)),u||h||a(i,o.default.vErrors)},n.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(r._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(r._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},n.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:i,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,(s=>{e.const(l,r._`${o.default.vErrors}[${s}]`),e.if(r._`${l}.instancePath === undefined`,(()=>e.assign(r._`${l}.instancePath`,(0,r.strConcat)(o.default.instancePath,a.errorPath)))),e.assign(r._`${l}.schemaPath`,r.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(r._`${l}.schema`,n),e.assign(r._`${l}.data`,i))}))};const l={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function c(e,t,n){const{createErrors:i}=e.it;return!1===i?r._`{}`:function(e,t,n={}){const{gen:i,it:s}=e,a=[u(s,n),h(e,n)];return function(e,{params:t,message:n},i){const{keyword:s,data:a,schemaValue:c,it:u}=e,{opts:h,propertyName:f,topSchemaRef:d,schemaPath:p}=u;i.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||r._`{}`]),h.messages&&i.push([l.message,"function"==typeof n?n(e):n]),h.verbose&&i.push([l.schema,c],[l.parentSchema,r._`${d}${p}`],[o.default.data,a]),f&&i.push([l.propertyName,f])}(e,t,a),i.object(...a)}(e,t,n)}function u({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,i.getErrorPath)(t,i.Type.Str)}`:e;return[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,n)]}function h({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let s=o?t:r.str`${t}/${e}`;return n&&(s=r.str`${s}${(0,i.getErrorPath)(n,i.Type.Str)}`),[l.schemaPath,s]}},{"./codegen":2,"./names":6,"./util":10}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveSchema=n.getCompilingSchema=n.resolveRef=n.compileSchema=n.SchemaEnv=void 0;const r=e("./codegen"),i=e("../runtime/validation_error"),o=e("./names"),s=e("./resolve"),a=e("./util"),l=e("./validate");class c{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,s.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=f.call(this,e);if(t)return t;const n=(0,s.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,h=new r.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let d;e.$async&&(d=h.scopeValue("Error",{ref:i.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const p=h.scopeName("validate");e.validateName=p;const m={gen:h,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:d,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(m),h.optimize(this.opts.code.optimize);const t=h.toString();g=`${h.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return(0,s.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function f(e){for(const r of this._compilations)if((t=r).schema===(n=e).schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function d(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||p.call(this,e,t)}function p(e,t){const n=this.opts.uriResolver.parse(t),r=(0,s._getFullPath)(this.opts.uriResolver,n);let i=(0,s.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return g.call(this,n,e);const o=(0,s.normalizeId)(r),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=p.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||u.call(this,a),o===(0,s.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,r=t[n];return r&&(i=(0,s.resolveUrl)(this.opts.uriResolver,i,r)),new c({schema:t,schemaId:n,root:e,baseId:i})}return g.call(this,n,a)}}n.SchemaEnv=c,n.compileSchema=u,n.resolveRef=function(e,t,n){var r;n=(0,s.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let o=d.call(this,e,n);if(void 0===o){const i=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:s}=this.opts;i&&(o=new c({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[n]=h.call(this,o):void 0},n.getCompilingSchema=f,n.resolveSchema=p;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:n,root:r}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,a.unescapeFragment)(r)];if(void 0===e)return;const i="object"==typeof(n=e)&&n[this.opts.schemaId];!m.has(r)&&i&&(t=(0,s.resolveUrl)(this.opts.uriResolver,t,i))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,a.schemaHasRulesButRef)(n,this.RULES)){const e=(0,s.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=p.call(this,r,e)}const{schemaId:l}=this.opts;return o=o||new c({schema:n,schemaId:l,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}},{"../runtime/validation_error":24,"./codegen":2,"./names":6,"./resolve":8,"./util":10,"./validate":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./codegen"),i={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};n.default=i},{"./codegen":2}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./resolve");class i extends Error{constructor(e,t,n,i){super(i||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,r.resolveUrl)(e,t,n),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(e,this.missingRef))}}n.default=i},{"./resolve":8}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSchemaRefs=n.resolveUrl=n.normalizeId=n._getFullPath=n.getFullPath=n.inlineRef=void 0;const r=e("./util"),i=e("fast-deep-equal"),o=e("json-schema-traverse"),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);n.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(a.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(l))return!0;if("object"==typeof n&&l(n))return!0}return!1}function c(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!s.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],(e=>t+=c(e))),1/0===t))return 1/0}return t}function u(e,t="",n){!1!==n&&(t=d(t));const r=e.parse(t);return h(e,r)}function h(e,t){return e.serialize(t).split("#")[0]+"#"}n.getFullPath=u,n._getFullPath=h;const f=/#\/?$/;function d(e){return e?e.replace(f,""):""}n.normalizeId=d,n.resolveUrl=function(e,t,n){return n=d(n),e.resolve(t,n)};const p=/^[a-z_][-a-z0-9._]*$/i;n.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,s=d(e[n]||t),a={"":s},l=u(r,s,!1),c={},h=new Set;return o(e,{allKeys:!0},((e,t,r,i)=>{if(void 0===i)return;const o=l+t;let s=a[i];function u(t){if(t=d(s?(0,this.opts.uriResolver.resolve)(s,t):t),h.has(t))throw m(t);h.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?f(e,n.schema,t):t!==d(o)&&("#"===t[0]?(f(e,c[t],t),c[t]=e):this.refs[t]=o),t}function g(e){if("string"==typeof e){if(!p.test(e))throw new Error(`invalid anchor "${e}"`);u.call(this,`#${e}`)}}"string"==typeof e[n]&&(s=u.call(this,e[n])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),a[t]=s})),c;function f(e,t,n){if(void 0!==t&&!i(e,t))throw m(n)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},{"./util":10,"fast-deep-equal":63,"json-schema-traverse":64}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRules=n.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);n.isJSONType=function(e){return"string"==typeof e&&r.has(e)},n.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},{}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkStrictMode=n.getErrorPath=n.Type=n.useFunc=n.setEvaluated=n.evaluatedPropsToName=n.mergeEvaluated=n.eachItem=n.unescapeJsonPointer=n.escapeJsonPointer=n.escapeFragment=n.unescapeFragment=n.schemaRefOrVal=n.schemaHasRulesButRef=n.schemaHasRules=n.checkUnknownRules=n.alwaysValidSchema=n.toHash=void 0;const r=e("./codegen"),i=e("./codegen/code");function o(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const i=r.RULES.keywords;for(const n in t)i[n]||p(e,`unknown keyword: "${n}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:i}){return(o,s,a,l)=>{const c=void 0===a?s:a instanceof r.Name?(s instanceof r.Name?e(o,s,a):t(o,s,a),a):s instanceof r.Name?(t(o,a,s),s):n(s,a);return l!==r.Name||c instanceof r.Name?c:i(o,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&h(e,n,t),n}function h(e,t,n){Object.keys(n).forEach((n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0)))}n.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},n.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!s(t,e.self.RULES.all))},n.checkUnknownRules=o,n.schemaHasRules=s,n.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},n.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,i,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(i)}`},n.unescapeFragment=function(e){return l(decodeURIComponent(e))},n.escapeFragment=function(e){return encodeURIComponent(a(e))},n.escapeJsonPointer=a,n.unescapeJsonPointer=l,n.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},n.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>{e.if(r._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),h(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},n.evaluatedPropsToName=u,n.setEvaluated=h;const f={};var d;function p(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}n.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:f[t.code]||(f[t.code]=new i._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(d=n.Type||(n.Type={})),n.getErrorPath=function(e,t,n){if(e instanceof r.Name){const i=t===d.Num;return n?i?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:i?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+a(e)},n.checkStrictMode=p},{"./codegen":2,"./codegen/code":1}],11:[function(e,t,n){function r(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(n,"__esModule",{value:!0}),n.shouldUseRule=n.shouldUseGroup=n.schemaHasRulesForType=void 0,n.schemaHasRulesForType=function({schema:e,self:t},n){const i=t.RULES.types[n];return i&&!0!==i&&r(e,i)},n.shouldUseGroup=r,n.shouldUseRule=i},{}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.boolOrEmptySchema=n.topBoolOrEmptySchema=void 0;const r=e("../errors"),i=e("../codegen"),o=e("../names"),s={message:"boolean schema is false"};function a(e,t){const{gen:n,data:i}=e;(0,r.reportError)({gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},s,void 0,t)}n.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(i._`${r}.errors`,null),t.return(!0))},n.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),a(e)):n.var(t,!0)}},{"../codegen":2,"../errors":4,"../names":6}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.reportTypeError=n.checkDataTypes=n.checkDataType=n.coerceAndCheckDataType=n.getJSONTypes=n.getSchemaTypes=n.DataType=void 0;const r=e("../rules"),i=e("./applicability"),o=e("../errors"),s=e("../codegen"),a=e("../util");var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=n.DataType||(n.DataType={})),n.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},n.getJSONTypes=c,n.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,i.schemaHasRulesForType)(e,t[0]));if(c){const i=f(t,r,o.strictNumbers,l.Wrong);n.if(i,(()=>{a.length?function(e,t,n){const{gen:r,data:i,opts:o}=e,a=r.let("dataType",s._`typeof ${i}`),l=r.let("coerced",s._`undefined`);"array"===o.coerceTypes&&r.if(s._`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,(()=>r.assign(i,s._`${i}[0]`).assign(a,s._`typeof ${i}`).if(f(t,i,o.strictNumbers),(()=>r.assign(l,i))))),r.if(s._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===o.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void r.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${i}`).elseIf(s._`${i} === null`).assign(l,s._`""`);case"number":return void r.elseIf(s._`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(l,s._`+${i}`);case"integer":return void r.elseIf(s._`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,s._`+${i}`);case"boolean":return void r.elseIf(s._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf(s._`${i} === "true" || ${i} === 1`).assign(l,!0);case"null":return r.elseIf(s._`${i} === "" || ${i} === 0 || ${i} === false`),void r.assign(l,null);case"array":r.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(l,s._`[${i}]`)}}r.else(),p(e),r.endIf(),r.if(s._`${l} !== undefined`,(()=>{r.assign(i,l),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(s._`${t} !== undefined`,(()=>e.assign(s._`${t}[${n}]`,r)))}(e,l)}))}(e,t,a):p(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function h(e,t,n,r=l.Correct){const i=r===l.Correct?s.operators.EQ:s.operators.NEQ;let o;switch(e){case"null":return s._`${t} ${i} null`;case"array":o=s._`Array.isArray(${t})`;break;case"object":o=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return s._`typeof ${t} ${i} ${e}`}return r===l.Correct?o:(0,s.not)(o);function a(e=s.nil){return(0,s.and)(s._`typeof ${t} == "number"`,e,n?s._`isFinite(${t})`:s.nil)}}function f(e,t,n,r){if(1===e.length)return h(e[0],t,n,r);let i;const o=(0,a.toHash)(e);if(o.array&&o.object){const e=s._`typeof ${t} != "object"`;i=o.null?e:s._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else i=s.nil;o.number&&delete o.integer;for(const e in o)i=(0,s.and)(i,h(e,t,n,r));return i}n.checkDataType=h,n.checkDataTypes=f;const d={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:n,schema:r}=e,i=(0,a.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);(0,o.reportError)(t,d)}n.reportTypeError=p},{"../codegen":2,"../errors":4,"../rules":9,"../util":10,"./applicability":11}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assignDefaults=void 0;const r=e("../codegen"),i=e("../util");function o(e,t,n){const{gen:o,compositeRule:s,data:a,opts:l}=e;if(void 0===n)return;const c=r._`${a}${(0,r.getProperty)(t)}`;if(s)return void(0,i.checkStrictMode)(e,`default is ignored for: ${c}`);let u=r._`${c} === undefined`;"empty"===l.useDefaults&&(u=r._`${u} || ${c} === null || ${c} === ""`),o.if(u,r._`${c} = ${(0,r.stringify)(n)}`)}n.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>o(e,n,t.default)))}},{"../codegen":2,"../util":10}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getData=n.KeywordCxt=n.validateFunctionCode=void 0;const r=e("./boolSchema"),i=e("./dataType"),o=e("./applicability"),s=e("./dataType"),a=e("./defaults"),l=e("./keyword"),c=e("./subschema"),u=e("../codegen"),h=e("../names"),f=e("../resolve"),d=e("../util"),p=e("../errors");function m({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,u._`${h.default.data}, ${h.default.valCxt}`,r.$async,(()=>{e.code(u._`"use strict"; ${g(n,i)}`),function(e,t){e.if(h.default.valCxt,(()=>{e.var(h.default.instancePath,u._`${h.default.valCxt}.${h.default.instancePath}`),e.var(h.default.parentData,u._`${h.default.valCxt}.${h.default.parentData}`),e.var(h.default.parentDataProperty,u._`${h.default.valCxt}.${h.default.parentDataProperty}`),e.var(h.default.rootData,u._`${h.default.valCxt}.${h.default.rootData}`),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`${h.default.valCxt}.${h.default.dynamicAnchors}`)}),(()=>{e.var(h.default.instancePath,u._`""`),e.var(h.default.parentData,u._`undefined`),e.var(h.default.parentDataProperty,u._`undefined`),e.var(h.default.rootData,h.default.data),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`{}`)}))}(e,i),e.code(o)})):e.func(t,u._`${h.default.data}, ${function(e){return u._`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${e.dynamicRef?u._`, ${h.default.dynamicAnchors}={}`:u.nil}}={}`}(i)}`,r.$async,(()=>e.code(g(n,i)).code(o)))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?u._`/*# sourceURL=${n} */`:u.nil}function v(e,t){w(e)&&(b(e),y(e))?function(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&$(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,f.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",h.default.errors);x(e,o),r.var(t,u._`${o} === ${h.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function w(e){return"boolean"!=typeof e.schema}function b(e){(0,d.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,d.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function x(e,t){if(e.opts.jtd)return k(e,[],!1,t);const n=(0,i.getSchemaTypes)(e.schema);k(e,n,!(0,i.coerceAndCheckDataType)(e,n),t)}function $({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(!0===i.$comment)e.code(u._`${h.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const n=u.str`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(u._`${h.default.self}.opts.$comment(${o}, ${n}, ${i}.schema)`)}}function k(e,t,n,r){const{gen:i,schema:a,data:l,allErrors:c,opts:f,self:p}=e,{RULES:m}=p;function g(d){(0,o.shouldUseGroup)(a,d)&&(d.type?(i.if((0,s.checkDataType)(d.type,l,f.strictNumbers)),S(e,d),1===t.length&&t[0]===d.type&&n&&(i.else(),(0,s.reportTypeError)(e)),i.endIf()):S(e,d),c||i.if(u._`${h.default.errors} === ${r||0}`))}!a.$ref||!f.ignoreKeywordsWithRef&&(0,d.schemaHasRulesButRef)(a,m)?(f.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{_(e.dataTypes,t)||O(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>_(t,e)))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&O(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if("object"==typeof i&&(0,o.shouldUseRule)(e.schema,i)){const{type:n}=i.definition;n.length&&!n.some((e=>C(t,e)))&&O(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),i.block((()=>{for(const e of m.rules)g(e);g(m.post)}))):i.block((()=>A(e,"$ref",m.all.$ref.definition)))}function S(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,a.assignDefaults)(e,t.type),n.block((()=>{for(const n of t.rules)(0,o.shouldUseRule)(r,n)&&A(e,n.keyword,n.definition,t.type)}))}function C(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function _(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function O(e,t){(0,d.checkStrictMode)(e,t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,e.opts.strictTypes)}n.validateFunctionCode=function(e){w(e)&&(b(e),y(e))?function(e){const{schema:t,opts:n,gen:r}=e;m(e,(()=>{n.$comment&&t.$comment&&$(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,d.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(h.default.vErrors,null),r.let(h.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",u._`${n}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,(()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`))),t.if(u._`${e.evaluated}.dynamicItems`,(()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`)))}(e),x(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if(u._`${h.default.errors} === 0`,(()=>t.return(h.default.data)),(()=>t.throw(u._`new ${i}(${h.default.vErrors})`))):(t.assign(u._`${r}.errors`,h.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof u.Name&&e.assign(u._`${t}.props`,n),r instanceof u.Name&&e.assign(u._`${t}.items`,r)}(e),t.return(u._`${h.default.errors} === 0`))}(e)}))}(e):m(e,(()=>(0,r.topBoolOrEmptySchema)(e)))};class E{constructor(e,t,n){if((0,l.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,d.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",j(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",h.default.errors))}result(e,t,n){this.failResult((0,u.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,u.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${(0,u.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=u.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:i,def:o}=this;n.if((0,u.or)(u._`${r} === undefined`,t)),e!==u.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:i}=this;return(0,u.or)(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return u._`${(0,s.checkDataTypes)(e,t,i.opts.strictNumbers,s.DataType.Wrong)}`}return u.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return u._`!${n}(${t})`}return u.nil}())}subschema(e,t){const n=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(n,this.it,e),(0,c.extendSubschemaMode)(n,e);const r={...this.it,...n,items:void 0,props:void 0};return v(r,t),r}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=d.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=d.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,u.Name))),!0}}function A(e,t,n,r){const i=new E(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,l.funcKeywordCode)(i,n):"macro"in n?(0,l.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(i,n)}n.KeywordCxt=E;const M=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function j(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(""===e)return h.default.rootData;if("/"===e[0]){if(!M.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=h.default.rootData}else{const s=P.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(i=s[2],"#"===i){if(a>=t)throw new Error(l("property/index",a));return r[t-a]}if(a>t)throw new Error(l("data",a));if(o=n[t-a],!i)return o}let s=o;const a=i.split("/");for(const e of a)e&&(o=u._`${o}${(0,u.getProperty)((0,d.unescapeJsonPointer)(e))}`,s=u._`${s} && ${o}`);return s;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}n.getData=j},{"../codegen":2,"../errors":4,"../names":6,"../resolve":8,"../util":10,"./applicability":11,"./boolSchema":12,"./dataType":13,"./defaults":14,"./keyword":16,"./subschema":17}],16:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateKeywordUsage=n.validSchemaType=n.funcKeywordCode=n.macroKeywordCode=void 0;const r=e("../codegen"),i=e("../names"),o=e("../../vocabularies/code"),s=e("../errors");function a(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,r._`${i.parentData}[${i.parentDataProperty}]`)))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}n.macroKeywordCode=function(e,t){const{gen:n,keyword:i,schema:o,parentSchema:s,it:a}=e,c=t.macro.call(a.self,o,s,a),u=l(n,i,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const h=n.name("valid");e.subschema({schema:c,schemaPath:r.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:u,compositeRule:!0},h),e.pass(h,(()=>e.error(!0)))},n.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:u,schema:h,parentSchema:f,$data:d,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const m=!d&&t.compile?t.compile.call(p.self,h,f,p):t.validate,g=l(c,u,m),v=c.let("valid");function y(n=(t.async?r._`await `:r.nil)){c.assign(v,r._`${n}${(0,o.callValidateCode)(e,g,p.opts.passContext?i.default.this:i.default.self,!("compile"in t&&!d||!1===t.schema))}`,t.modifying)}function w(e){var n;c.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)y(),t.modifying&&a(e),w((()=>e.error()));else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>y(r._`await `)),(t=>c.assign(v,!1).if(r._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,r._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=r._`${g}.errors`;return c.assign(e,null),y(r.nil),e}();t.modifying&&a(e),w((()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,(()=>{n.assign(i.default.vErrors,r._`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`).assign(i.default.errors,r._`${i.default.vErrors}.length`),(0,s.extendErrors)(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)},n.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},n.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}},{"../../vocabularies/code":42,"../codegen":2,"../errors":4,"../names":6}],17:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendSubschemaMode=n.extendSubschemaData=n.getSubschema=void 0;const r=e("../codegen"),i=e("../util");n.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,i.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},n.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==n){const{errorPath:s,dataPathArr:a,opts:l}=t;u(c.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${s}${(0,i.getErrorPath)(n,o,l.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...a,e.parentDataProperty]}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==s&&(u(s instanceof r.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},n.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},{"../codegen":2,"../util":10}],18:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var r=e("./compile/validate");Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:()=>r.KeywordCxt});var i=e("./compile/codegen");Object.defineProperty(n,"_",{enumerable:!0,get:()=>i._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>i.str}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>i.stringify}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>i.nil}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>i.Name}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:()=>i.CodeGen});const o=e("./runtime/validation_error"),s=e("./compile/ref_error"),a=e("./compile/rules"),l=e("./compile"),c=e("./compile/codegen"),u=e("./compile/resolve"),h=e("./compile/validate/dataType"),f=e("./compile/util"),d=e("./refs/data.json"),p=e("./runtime/uri"),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(e){var t,n,r,i,o,s,a,l,c,u,h,f,d,g,v,y,w,b,x,$,k,S,C,_,O;const E=e.strict,A=null===(t=e.code)||void 0===t?void 0:t.optimize,M=!0===A||void 0===A?1:A||0,P=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:m,j=null!==(i=e.uriResolver)&&void 0!==i?i:p.default;return{strictSchema:null===(s=null!==(o=e.strictSchema)&&void 0!==o?o:E)||void 0===s||s,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:E)||void 0===l||l,strictTypes:null!==(u=null!==(c=e.strictTypes)&&void 0!==c?c:E)&&void 0!==u?u:"log",strictTuples:null!==(f=null!==(h=e.strictTuples)&&void 0!==h?h:E)&&void 0!==f?f:"log",strictRequired:null!==(g=null!==(d=e.strictRequired)&&void 0!==d?d:E)&&void 0!==g&&g,code:e.code?{...e.code,optimize:M,regExp:P}:{optimize:M,regExp:P},loopRequired:null!==(v=e.loopRequired)&&void 0!==v?v:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(w=e.meta)||void 0===w||w,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(x=e.inlineRefs)||void 0===x||x,schemaId:null!==($=e.schemaId)&&void 0!==$?$:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(S=e.validateSchema)||void 0===S||S,validateFormats:null===(C=e.validateFormats)||void 0===C||C,unicodeRegExp:null===(_=e.unicodeRegExp)||void 0===_||_,int32range:null===(O=e.int32range)||void 0===O||O,uriResolver:j}}class x{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...b(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:v,es5:t,lines:n}),this.logger=function(e){if(!1===e)return E;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),$.call(this,y,e,"NOT SUPPORTED"),$.call(this,w,e,"DEPRECATED","warn"),this._metaOpts=O.call(this),e.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&_.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),S.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=d;"id"===n&&(r={...d},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await i.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function i(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await i.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=k.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new l.SchemaEnv({schema:{},schemaId:n});if(t=l.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=k.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,u.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(M.call(this,n,t),!t)return(0,f.eachItem)(n,(e=>P.call(this,e))),this;T.call(this,t);const r={...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)};return(0,f.eachItem)(n,0===r.type.length?e=>P.call(this,e,r):e=>r.type.forEach((t=>P.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=i[e];r&&o&&(i[e]=I(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:s}=this.opts;if("object"==typeof e)o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;n=(0,u.normalizeId)(o||n);const c=u.getSchemaRefs.call(this,e,n);return a=new l.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:n,localRefs:c}),this._cache.set(a.schema,a),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=a),r&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,n,r="error"){for(const i in e){const o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function k(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function S(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function C(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function _(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function O(){const e={...this.opts};for(const t of g)delete e[t];return e}n.default=x,x.ValidationError=o.default,x.MissingRefError=s.default;const E={log(){},warn(){},error(){}},A=/^[a-z_$][a-z0-9_$:-]*$/i;function M(e,t){const{RULES:n}=this;if((0,f.eachItem)(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!A.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function P(e,t,n){var r;const i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=i?o.post:o.rules.find((({type:e})=>e===n));if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)}};t.before?j.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function j(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function T(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=I(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(e){return{anyOf:[e,N]}}},{"./compile":5,"./compile/codegen":2,"./compile/ref_error":7,"./compile/resolve":8,"./compile/rules":9,"./compile/util":10,"./compile/validate":15,"./compile/validate/dataType":13,"./refs/data.json":19,"./runtime/uri":23,"./runtime/validation_error":24}],19:[function(e,t,n){t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],20:[function(e,t,n){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],21:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("fast-deep-equal");r.code='require("ajv/dist/runtime/equal").default',n.default=r},{"fast-deep-equal":63}],22:[function(e,t,n){function r(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},{}],23:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("uri-js");r.code='require("ajv/dist/runtime/uri").default',n.default=r},{"uri-js":65}],24:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}n.default=r},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateAdditionalItems=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?s(e,r):(0,i.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:n,schema:o,data:s,keyword:a,it:l}=e;l.items=!0;const c=n.const("len",r._`${s}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(r._`${c} <= ${t.length}`);else if("object"==typeof o&&!(0,i.alwaysValidSchema)(l,o)){const o=n.var("valid",r._`${c} <= ${t.length}`);n.if((0,r.not)(o),(()=>function(o){n.forRange("i",t.length,c,(t=>{e.subschema({keyword:a,dataProp:t,dataPropType:i.Type.Num},o),l.allErrors||n.if((0,r.not)(o),(()=>n.break()))}))}(o))),e.ok(o)}}n.validateAdditionalItems=s,n.default=o},{"../../compile/codegen":2,"../../compile/util":10}],26:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/names"),s=e("../../compile/util");n.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>i._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,errsCount:c,it:u}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:h,opts:f}=u;if(u.props=!0,"all"!==f.removeAdditional&&(0,s.alwaysValidSchema)(u,n))return;const d=(0,r.allSchemaProperties)(a.properties),p=(0,r.allSchemaProperties)(a.patternProperties);function m(e){t.code(i._`delete ${l}[${e}]`)}function g(r){if("all"===f.removeAdditional||f.removeAdditional&&!1===n)m(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(h||t.break());if("object"==typeof n&&!(0,s.alwaysValidSchema)(u,n)){const n=t.name("valid");"failing"===f.removeAdditional?(v(r,n,!1),t.if((0,i.not)(n),(()=>{e.reset(),m(r)}))):(v(r,n),h||t.if((0,i.not)(n),(()=>t.break())))}}}function v(t,n,r){const i={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}t.forIn("key",l,(n=>{d.length||p.length?t.if(function(n){let o;if(d.length>8){const e=(0,s.schemaRefOrVal)(u,a.properties,"properties");o=(0,r.isOwnProperty)(t,e,n)}else o=d.length?(0,i.or)(...d.map((e=>i._`${n} === ${e}`))):i.nil;return p.length&&(o=(0,i.or)(o,...p.map((t=>i._`${(0,r.usePattern)(e,t)}.test(${n})`)))),(0,i.not)(o)}(n),(()=>g(n))):g(n)})),e.ok(i._`${c} === ${o.default.errors}`)}}},{"../../compile/codegen":2,"../../compile/names":6,"../../compile/util":10,"../code":42}],27:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach(((t,n)=>{if((0,r.alwaysValidSchema)(i,t))return;const s=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(s)}))}}},{"../../compile/util":10}],28:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code");n.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r.validateUnion,error:{message:"must match a schema in anyOf"}}},{"../code":42}],29:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:s,it:a}=e;let l,c;const{minContains:u,maxContains:h}=o;a.opts.next?(l=void 0===u?1:u,c=h):l=1;const f=t.const("len",r._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,i.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,i.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,i.alwaysValidSchema)(a,n)){let t=r._`${f} >= ${l}`;return void 0!==c&&(t=r._`${t} && ${f} <= ${c}`),void e.pass(t)}a.items=!0;const d=t.name("valid");function p(){const e=t.name("_valid"),n=t.let("count",0);m(e,(()=>t.if(e,(()=>function(e){t.code(r._`${e}++`),void 0===c?t.if(r._`${e} >= ${l}`,(()=>t.assign(d,!0).break())):(t.if(r._`${e} > ${c}`,(()=>t.assign(d,!1).break())),1===l?t.assign(d,!0):t.if(r._`${e} >= ${l}`,(()=>t.assign(d,!0))))}(n)))))}function m(n,r){t.forRange("i",0,f,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:i.Type.Num,compositeRule:!0},n),r()}))}void 0===c&&1===l?m(d,(()=>t.if(d,(()=>t.break())))):0===l?(t.let(d,!0),void 0!==c&&t.if(r._`${s}.length > 0`,p)):(t.let(d,!1),p()),e.result(d,(()=>e.reset()))}}},{"../../compile/codegen":2,"../../compile/util":10}],30:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code");n.error={message:({params:{property:e,depsCount:t,deps:n}})=>r.str`must have ${1===t?"property":"properties"} ${n} when property ${e} is present`,params:({params:{property:e,depsCount:t,deps:n,missingProperty:i}})=>r._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:i,it:s}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=(0,o.propertyInData)(n,i,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?n.if(u,(()=>{for(const t of c)(0,o.checkReportMissingProp)(e,t)})):(n.if(r._`${u} && (${(0,o.checkMissingProp)(e,c,a)})`),(0,o.reportMissingProp)(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:r,keyword:s,it:a}=e,l=n.name("valid");for(const c in t)(0,i.alwaysValidSchema)(a,t[c])||(n.if((0,o.propertyInData)(n,r,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}n.validatePropertyDeps=a,n.validateSchemaDeps=l,n.default=s},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],31:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");function o(e,t){const n=e.schema[t];return void 0!==n&&!(0,i.alwaysValidSchema)(e,n)}n.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:s}=e;void 0===n.then&&void 0===n.else&&(0,i.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const a=o(s,"then"),l=o(s,"else");if(!a&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),a&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,h("then",n),h("else",n))}else a?t.if(u,h("then")):t.if((0,r.not)(u),h("else"));function h(n,i){return()=>{const o=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(o,c),i?t.assign(i,r._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}}},{"../../compile/codegen":2,"../../compile/util":10}],32:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./additionalItems"),i=e("./prefixItems"),o=e("./items"),s=e("./items2020"),a=e("./contains"),l=e("./dependencies"),c=e("./propertyNames"),u=e("./additionalProperties"),h=e("./properties"),f=e("./patternProperties"),d=e("./not"),p=e("./anyOf"),m=e("./oneOf"),g=e("./allOf"),v=e("./if"),y=e("./thenElse");n.default=function(e=!1){const t=[d.default,p.default,m.default,g.default,v.default,y.default,c.default,u.default,l.default,h.default,f.default];return e?t.push(i.default,s.default):t.push(r.default,o.default),t.push(a.default),t}},{"./additionalItems":25,"./additionalProperties":26,"./allOf":27,"./anyOf":28,"./contains":29,"./dependencies":30,"./if":31,"./items":33,"./items2020":34,"./not":35,"./oneOf":36,"./patternProperties":37,"./prefixItems":38,"./properties":39,"./propertyNames":40,"./thenElse":41}],33:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateTuple=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code"),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return a(e,"additionalItems",t);n.items=!0,(0,i.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function a(e,t,n=e.schema){const{gen:o,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:r,errSchemaPath:o}=c,s=n.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);r.strictTuples&&!a&&(0,i.checkStrictMode)(c,`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`,r.strictTuples)}(s),c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=i.mergeEvaluated.items(o,n.length,c.items));const u=o.name("valid"),h=o.const("len",r._`${a}.length`);n.forEach(((t,n)=>{(0,i.alwaysValidSchema)(c,t)||(o.if(r._`${h} > ${n}`,(()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},u))),e.ok(u))}))}n.validateTuple=a,n.default=s},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],34:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code"),s=e("./additionalItems");n.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:a}=n;r.items=!0,(0,i.alwaysValidSchema)(r,t)||(a?(0,s.validateAdditionalItems)(e,a):e.ok((0,o.validateArray)(e)))}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42,"./additionalItems":25}],35:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:i}=e;if((0,r.alwaysValidSchema)(i,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}}},{"../../compile/util":10}],36:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=n,l=t.let("valid",!1),c=t.let("passing",null),u=t.name("_valid");e.setParams({passing:c}),t.block((function(){a.forEach(((n,o)=>{let a;(0,i.alwaysValidSchema)(s,n)?t.var(u,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},u),o>0&&t.if(r._`${u} && ${l}`).assign(l,!1).assign(c,r._`[${c}, ${o}]`).else(),t.if(u,(()=>{t.assign(l,!0),t.assign(c,o),a&&e.mergeEvaluated(a,r.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}}},{"../../compile/codegen":2,"../../compile/util":10}],37:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/util"),s=e("../../compile/util");n.default={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:a,parentSchema:l,it:c}=e,{opts:u}=c,h=(0,r.allSchemaProperties)(n),f=h.filter((e=>(0,o.alwaysValidSchema)(c,n[e])));if(0===h.length||f.length===h.length&&(!c.opts.unevaluated||!0===c.props))return;const d=u.strictSchema&&!u.allowMatchingProperties&&l.properties,p=t.name("valid");!0===c.props||c.props instanceof i.Name||(c.props=(0,s.evaluatedPropsToName)(t,c.props));const{props:m}=c;function g(e){for(const t in d)new RegExp(e).test(t)&&(0,o.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",a,(o=>{t.if(i._`${(0,r.usePattern)(e,n)}.test(${o})`,(()=>{const r=f.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:s.Type.Str},p),c.opts.unevaluated&&!0!==m?t.assign(i._`${m}[${o}]`,!0):r||c.allErrors||t.if((0,i.not)(p),(()=>t.break()))}))}))}!function(){for(const e of h)d&&g(e),c.allErrors?v(e):(t.var(p,!0),v(e),t.if(p))}()}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],38:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./items");n.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")}},{"./items":33}],39:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/validate"),i=e("../code"),o=e("../../compile/util"),s=e("./additionalProperties");n.default={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new r.KeywordCxt(c,s.default,"additionalProperties"));const u=(0,i.allSchemaProperties)(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(t,(0,o.toHash)(u),c.props));const h=u.filter((e=>!(0,o.alwaysValidSchema)(c,n[e])));if(0===h.length)return;const f=t.name("valid");for(const n of h)d(n)?p(n):(t.if((0,i.propertyInData)(t,l,n,c.opts.ownProperties)),p(n),c.allErrors||t.else().var(f,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(f);function d(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},f)}}}},{"../../compile/util":10,"../../compile/validate":15,"../code":42,"./additionalProperties":26}],40:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:s}=e;if((0,i.alwaysValidSchema)(s,n))return;const a=t.name("valid");t.forIn("key",o,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if((0,r.not)(a),(()=>{e.error(!0),s.allErrors||t.break()}))})),e.ok(a)}}},{"../../compile/codegen":2,"../../compile/util":10}],41:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}}},{"../../compile/util":10}],42:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateUnion=n.validateArray=n.usePattern=n.callValidateCode=n.schemaProperties=n.allSchemaProperties=n.noPropertyInData=n.propertyInData=n.isOwnProperty=n.hasPropFunc=n.reportMissingProp=n.checkMissingProp=n.checkReportMissingProp=void 0;const r=e("../compile/codegen"),i=e("../compile/util"),o=e("../compile/names"),s=e("../compile/util");function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return r._`${a(e)}.call(${t}, ${n})`}function c(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} === undefined`;return i?(0,r.or)(o,(0,r.not)(l(e,t,n))):o}function u(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}n.checkReportMissingProp=function(e,t){const{gen:n,data:i,it:o}=e;n.if(c(n,i,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()}))},n.checkMissingProp=function({gen:e,data:t,it:{opts:n}},i,o){return(0,r.or)(...i.map((i=>(0,r.and)(c(e,t,i,n.ownProperties),r._`${o} = ${i}`))))},n.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},n.hasPropFunc=a,n.isOwnProperty=l,n.propertyInData=function(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return i?r._`${o} && ${l(e,t,n)}`:o},n.noPropertyInData=c,n.allSchemaProperties=u,n.schemaProperties=function(e,t){return u(t).filter((n=>!(0,i.alwaysValidSchema)(e,t[n])))},n.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:i,schemaPath:s,errorPath:a},it:l},c,u,h){const f=h?r._`${e}, ${t}, ${i}${s}`:t,d=[[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&d.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=r._`${f}, ${n.object(...d)}`;return u!==r.nil?r._`${c}.call(${u}, ${p})`:r._`${c}(${p})`};const h=r._`new RegExp`;n.usePattern=function({gen:e,it:{opts:t}},n){const i=t.unicodeRegExp?"u":"",{regExp:o}=t.code,a=o(n,i);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:r._`${"new RegExp"===o.code?h:(0,s.useFunc)(e,o)}(${n}, ${i})`})},n.validateArray=function(e){const{gen:t,data:n,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(s){const l=t.const("len",r._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:i.Type.Num},a),t.if((0,r.not)(a),s)}))}},n.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>(0,i.alwaysValidSchema)(s,e)))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,i)=>{const s=e.subschema({keyword:o,schemaProp:i,compositeRule:!0},l);t.assign(a,r._`${a} || ${l}`),e.mergeValidEvaluated(s,l)||t.if((0,r.not)(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},{"../compile/codegen":2,"../compile/names":6,"../compile/util":10}],43:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},{}],44:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./id"),i=e("./ref");n.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,i.default]},{"./id":43,"./ref":45}],45:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.callRef=n.getValidate=void 0;const r=e("../../compile/ref_error"),i=e("../code"),o=e("../../compile/codegen"),s=e("../../compile/names"),a=e("../../compile"),l=e("../../compile/util"),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:i}=e,{baseId:s,schemaEnv:l,validateName:c,opts:f,self:d}=i,{root:p}=l;if(("#"===n||"#/"===n)&&s===p.baseId)return function(){if(l===p)return h(e,c,l,l.$async);const n=t.scopeValue("root",{ref:p});return h(e,o._`${n}.validate`,p,p.$async)}();const m=a.resolveRef.call(d,p,s,n);if(void 0===m)throw new r.default(i.opts.uriResolver,s,n);return m instanceof a.SchemaEnv?function(t){const n=u(e,t);h(e,n,t,t.$async)}(m):function(r){const i=t.scopeValue("schema",!0===f.code.source?{ref:r,code:(0,o.stringify)(r)}:{ref:r}),s=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:o.nil,topSchemaRef:i,errSchemaPath:n},s);e.mergeEvaluated(a),e.ok(s)}(m)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,n,r){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:h,opts:f}=c,d=f.passContext?s.default.this:o.nil;function p(e){const t=o._`${e}.errors`;a.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,o._`${s.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=l.mergeEvaluated.props(a,r.props,c.props));else{const t=a.var("props",o._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,o.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=l.mergeEvaluated.items(a,r.items,c.items));else{const t=a.var("items",o._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,o.Name)}}r?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(o._`await ${(0,i.callValidateCode)(e,t,d)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(o._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),p(e),u||a.assign(n,!1)})),e.ok(n)}():e.result((0,i.callValidateCode)(e,t,d),(()=>m(t)),(()=>p(t)))}n.getValidate=u,n.callRef=h,n.default=c},{"../../compile":5,"../../compile/codegen":2,"../../compile/names":6,"../../compile/ref_error":7,"../../compile/util":10,"../code":42}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../discriminator/types"),o=e("../../compile"),s=e("../../compile/util");n.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===i.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:a,parentSchema:l,it:c}=e,{oneOf:u}=l;if(!c.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=a.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const f=t.let("valid",!1),d=t.const("tag",r._`${n}${(0,r.getProperty)(h)}`);function p(n){const i=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},i);return e.mergeEvaluated(o,r.Name),i}t.if(r._`typeof ${d} == "string"`,(()=>function(){const n=function(){var e;const t={},n=i(l);let r=!0;for(let t=0;t<u.length;t++){let l=u[t];(null==l?void 0:l.$ref)&&!(0,s.schemaHasRulesButRef)(l,c.self.RULES)&&(l=o.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,null==l?void 0:l.$ref),l instanceof o.SchemaEnv&&(l=l.schema));const f=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof f)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);r=r&&(n||i(l)),a(f,t)}if(!r)throw new Error(`discriminator: "${h}" must be required`);return t;function i({required:e}){return Array.isArray(e)&&e.includes(h)}function a(e,t){if(e.const)f(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const n of e.enum)f(n,t)}}function f(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${d} === ${e}`),t.assign(f,p(n[e]));t.else(),e.error(!1,{discrError:i.DiscrError.Mapping,tag:d,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:i.DiscrError.Tag,tag:d,tagName:h}))),e.ok(f)}}},{"../../compile":5,"../../compile/codegen":2,"../../compile/util":10,"../discriminator/types":47}],47:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n.DiscrError||(n.DiscrError={}))},{}],48:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./core"),i=e("./validation"),o=e("./applicator"),s=e("./format"),a=e("./metadata"),l=[r.default,i.default,(0,o.default)(),s.default,a.metadataVocabulary,a.contentVocabulary];n.default=l},{"./applicator":32,"./core":44,"./format":50,"./metadata":51,"./validation":54}],49:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:i,$data:o,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:h,self:f}=l;c.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:f.formats,code:c.code.formats}),s=n.const("fDef",r._`${o}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(r._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,(()=>n.assign(l,r._`${s}.type || "string"`).assign(u,r._`${s}.validate`)),(()=>n.assign(l,r._`"string"`).assign(u,s))),e.fail$data((0,r.or)(!1===c.strictSchema?r.nil:r._`${a} && !${u}`,function(){const e=h.$async?r._`(${s}.async ? await ${u}(${i}) : ${u}(${i}))`:r._`${u}(${i})`,n=r._`(typeof ${u} == "function" ? ${e} : ${u}.test(${i}))`;return r._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=f.formats[s];if(!o)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${u}"`}f.logger.warn(e())}();if(!0===o)return;const[a,l,d]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):c.code.formats?r._`${c.code.formats}${(0,r.getProperty)(s)}`:void 0,i=n.scopeValue("formats",{key:s,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,i]:[e.type||"string",e.validate,r._`${i}.validate`]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!h.$async)throw new Error("async format in sync schema");return r._`await ${d}(${i})`}return"function"==typeof l?r._`${d}(${i})`:r._`${d}.test(${i})`}())}())}}},{"../../compile/codegen":2}],50:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./format");n.default=[r.default]},{"./format":49}],51:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.contentVocabulary=n.metadataVocabulary=void 0,n.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],n.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],52:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/equal");n.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:s,schemaCode:a,schema:l}=e;s||l&&"object"==typeof l?e.fail$data(r._`!${(0,i.useFunc)(t,o.default)}(${n}, ${a})`):e.fail(r._`${l} !== ${n}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],53:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/equal");n.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");let u;const h=()=>null!=u?u:u=(0,i.useFunc)(t,o.default);let f;if(a.length>=c.opts.loopEnum||s)f=t.let("valid"),e.block$data(f,(function(){t.assign(f,!1),t.forOf("v",l,(e=>t.if(r._`${h()}(${n}, ${e})`,(()=>t.assign(f,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);f=(0,r.or)(...a.map(((t,i)=>function(e,t){const i=a[t];return"object"==typeof i&&null!==i?r._`${h()}(${n}, ${e}[${t}])`:r._`${n} === ${i}`}(e,i))))}e.pass(f)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],54:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./limitNumber"),i=e("./multipleOf"),o=e("./limitLength"),s=e("./pattern"),a=e("./limitProperties"),l=e("./required"),c=e("./limitItems"),u=e("./uniqueItems"),h=e("./const"),f=e("./enum");n.default=[r.default,i.default,o.default,s.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,f.default]},{"./const":52,"./enum":53,"./limitItems":55,"./limitLength":56,"./limitNumber":57,"./limitProperties":58,"./multipleOf":59,"./pattern":60,"./required":61,"./uniqueItems":62}],55:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`${n}.length ${"maxItems"===t?r.operators.GT:r.operators.LT} ${i}`)}}},{"../../compile/codegen":2}],56:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/ucs2length");n.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:a}=e,l="maxLength"===t?r.operators.GT:r.operators.LT,c=!1===a.opts.unicode?r._`${n}.length`:r._`${(0,i.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(r._`${c} ${l} ${s}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/ucs2length":22}],57:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=r.operators,o={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},s={message:({keyword:e,schemaCode:t})=>r.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`${n} ${o[t].fail} ${i} || isNaN(${n})`)}};n.default=a},{"../../compile/codegen":2}],58:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`Object.keys(${n}).length ${"maxProperties"===t?r.operators.GT:r.operators.LT} ${i}`)}}},{"../../compile/codegen":2}],59:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:i,it:o}=e,s=o.opts.multipleOfPrecision,a=t.let("res"),l=s?r._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:r._`${a} !== parseInt(${a})`;e.fail$data(r._`(${i} === 0 || (${a} = ${n}/${i}, ${l}))`)}}},{"../../compile/codegen":2}],60:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen");n.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match pattern "${e}"`,params:({schemaCode:e})=>i._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:s,it:a}=e,l=n?i._`(new RegExp(${s}, ${a.opts.unicodeRegExp?"u":""}))`:(0,r.usePattern)(e,o);e.fail$data(i._`!${l}.test(${t})`)}}},{"../../compile/codegen":2,"../code":42}],61:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/util");n.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>i.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>i._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const h=n.length>=u.loopRequired;if(c.allErrors?function(){if(h||l)e.block$data(i.nil,f);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(h||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,s,(()=>{t.assign(o,(0,r.propertyInData)(t,a,n,u.ownProperties)),t.if((0,i.not)(o),(()=>{e.error(),t.break()}))}),i.nil)}(o,n))),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,o)),(0,r.reportMissingProp)(e,o),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)void 0!==(null==t?void 0:t[e])||r.has(e)||(0,o.checkStrictMode)(c,`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`,c.opts.strictRequired)}function f(){t.forOf("prop",s,(n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,a,n,u.ownProperties),(()=>e.error()))}))}}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],62:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/validate/dataType"),i=e("../../compile/codegen"),o=e("../../compile/util"),s=e("../../runtime/equal");n.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>i.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>i._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:a,schema:l,parentSchema:c,schemaCode:u,it:h}=e;if(!a&&!l)return;const f=t.let("valid"),d=c.items?(0,r.getSchemaTypes)(c.items):[];function p(o,s){const a=t.name("item"),l=(0,r.checkDataTypes)(d,a,h.opts.strictNumbers,r.DataType.Wrong),c=t.const("indices",i._`{}`);t.for(i._`;${o}--;`,(()=>{t.let(a,i._`${n}[${o}]`),t.if(l,i._`continue`),d.length>1&&t.if(i._`typeof ${a} == "string"`,i._`${a} += "_"`),t.if(i._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(s,i._`${c}[${a}]`),e.error(),t.assign(f,!1).break()})).code(i._`${c}[${a}] = ${o}`)}))}function m(r,a){const l=(0,o.useFunc)(t,s.default),c=t.name("outer");t.label(c).for(i._`;${r}--;`,(()=>t.for(i._`${a} = ${r}; ${a}--;`,(()=>t.if(i._`${l}(${n}[${r}], ${n}[${a}])`,(()=>{e.error(),t.assign(f,!1).break(c)}))))))}e.block$data(f,(function(){const r=t.let("i",i._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(f,!0),t.if(i._`${r} > 1`,(()=>(d.length>0&&!d.some((e=>"object"===e||"array"===e))?p:m)(r,o)))}),i._`${u} === false`),e.ok(f)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../compile/validate/dataType":13,"../../runtime/equal":21}],63:[function(e,t,n){t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},{}],64:[function(e,t,n){var r=t.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),i(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function i(e,t,n,o,s,a,l,c,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var f in t(o,s,a,l,c,u,h),o){var d=o[f];if(Array.isArray(d)){if(f in r.arrayKeywords)for(var p=0;p<d.length;p++)i(e,t,n,d[p],s+"/"+f+"/"+p,a,s,f,o,p)}else if(f in r.propsKeywords){if(d&&"object"==typeof d)for(var m in d)i(e,t,n,d[m],s+"/"+f+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,f,o,m)}else(f in r.keywords||e.allKeys&&!(f in r.skipKeywords))&&i(e,t,n,d,s+"/"+f,a,s,f,o)}n(o,s,a,l,c,u,h)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],65:[function(e,t,n){
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e,r){r("object"==typeof n&&void 0!==t?n:e.URI=e.URI||{})}(this,(function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),s=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,i,"[\\+\\-\\.]")+"*"),n(n(s+"|"+t(u,a,"[\\:]"))+"*");var h=n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+i),f=n(h+"\\."+h+"\\."+h+"\\."+h),d=n(o+"{1,4}"),p=n(n(d+"\\:"+d)+"|"+f),m=n(n(d+"\\:")+"{6}"+p),g=n("\\:\\:"+n(d+"\\:")+"{5}"+p),v=n(n(d)+"?\\:\\:"+n(d+"\\:")+"{4}"+p),y=n(n(n(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+n(d+"\\:")+"{3}"+p),w=n(n(n(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+n(d+"\\:")+"{2}"+p),b=n(n(n(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),x=n(n(n(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),$=n(n(n(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),k=n(n(n(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=n([m,g,v,y,w,b,x,$,k].join("|")),C=n(n(u+"|"+s)+"+");n("[vV]"+o+"+\\."+t(u,a,"[\\:]")+"+"),n(n(s+"|"+t(u,a))+"*");var _=n(s+"|"+t(u,a,"[\\:\\@]"));return n(n(s+"|"+t(u,a,"[\\@]"))+"+"),n(n(_+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+C+")")+"?\\]?$")}}var s=o(!1),a=o(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,h=/^xn--/,f=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function y(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var i=function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(d,".")).split("."),t).join(".");return r+i}function w(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,n){var r=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;r+=u)e=m(e/35);return m(r+36*e/(e+38))},$=function(e){var t,n=[],r=e.length,i=0,o=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var l=0;l<a;++l)e.charCodeAt(l)>=128&&v("not-basic"),n.push(e.charCodeAt(l));for(var h=a>0?a+1:0;h<r;){for(var f=i,d=1,p=u;;p+=u){h>=r&&v("invalid-input");var g=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:u;(g>=u||g>m((c-i)/d))&&v("overflow"),i+=g*d;var y=p<=s?1:p>=s+26?26:p-s;if(g<y)break;var w=u-y;d>m(c/w)&&v("overflow"),d*=w}var b=n.length+1;s=x(i-f,b,0==f),m(i/b)>c-o&&v("overflow"),o+=m(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},k=function(e){var t=[],n=(e=w(e)).length,r=128,i=0,o=72,s=!0,a=!1,l=void 0;try{for(var h,f=e[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var d=h.value;d<128&&t.push(g(d))}}catch(e){a=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(a)throw l}}var p=t.length,y=p;for(p&&t.push("-");y<n;){var $=c,k=!0,S=!1,C=void 0;try{for(var _,O=e[Symbol.iterator]();!(k=(_=O.next()).done);k=!0){var E=_.value;E>=r&&E<$&&($=E)}}catch(e){S=!0,C=e}finally{try{!k&&O.return&&O.return()}finally{if(S)throw C}}var A=y+1;$-r>m((c-i)/A)&&v("overflow"),i+=($-r)*A,r=$;var M=!0,P=!1,j=void 0;try{for(var T,N=e[Symbol.iterator]();!(M=(T=N.next()).done);M=!0){var I=T.value;if(I<r&&++i>c&&v("overflow"),I==r){for(var D=i,R=u;;R+=u){var L=R<=o?1:R>=o+26?26:R-o;if(D<L)break;var B=D-L,z=u-L;t.push(g(b(L+B%z,0))),D=m(B/z)}t.push(g(b(D,0))),o=x(i,A,y==p),i=0,++y}}}catch(e){P=!0,j=e}finally{try{!M&&N.return&&N.return()}finally{if(P)throw j}}++i,++r}return t.join("")},S=function(e){return y(e,(function(e){return f.test(e)?"xn--"+k(e):e}))},C=function(e){return y(e,(function(e){return h.test(e)?$(e.slice(4).toLowerCase()):e}))},_={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function E(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function A(e,t){function n(e){var n=E(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,i)),e}function M(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=l(n,2)[1];return r?r.split(".").map(M).join("."):e}function j(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=l(n,3),i=r[1],o=r[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=l(s,2),c=a[0],u=a[1],h=u?u.split(":").map(M):[],f=c.split(":").map(M),d=t.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,m=f.length-p,g=Array(p),v=0;v<p;++v)g[v]=h[v]||f[m+v]||"";d&&(g[p-1]=P(g[p-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],w=void 0;if(y&&y.length>1){var b=g.slice(0,y.index),x=g.slice(y.index+y.length);w=b.join(":")+"::"+x.join(":")}else w=g.join(":");return o&&(w+="%"+o),w}return e}var T=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?a:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(T);if(i){N?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=j(P(n.host,r),r)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=_[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)A(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=S(n.host.replace(r.PCT_ENCODED,E).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}A(n,s)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function D(e,t){var n=!1!==t.iri?a:s,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(j(P(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var R=/^\.\.?\//,L=/^\/\.(\/|$)/,B=/^\/\.\.(\/|$)/,z=/^\/?(?:.|\n)*?(?=\/|$)/;function V(e){for(var t=[];e.length;)if(e.match(R))e=e.replace(R,"");else if(e.match(L))e=e.replace(L,"/");else if(e.match(B))e=e.replace(B,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(z);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?a:s,r=[],i=_[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?C(e.host):S(e.host.replace(n.PCT_ENCODED,E).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}A(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=D(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||i&&i.absolutePath||(l=V(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),r.push(l)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=I(F(e,n),n),t=I(F(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=V(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=V(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=V(t.path):(r.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,r.path=V(r.path)),r.query=t.query):(r.path=e.path,r.query=void 0!==t.query?t.query:e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function H(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:s.PCT_ENCODED,E)}var W={scheme:"http",domainHost:!0,parse:(e,t)=>(e.host||(e.error=e.error||"HTTP URIs must have a host."),e),serialize(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},U={scheme:"https",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize};function J(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse(e,t){var n=e;return n.secure=J(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize(e,t){if(e.port!==(J(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=l(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},G={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},Q={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",X="[0-9A-Fa-f]",Z=n(n("%[EFef][0-9A-Fa-f]%"+X+X+"%"+X+X)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+X+X)+"|"+n("%"+X+X)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Y,"g"),ne=new RegExp(Z,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ie=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ie;function se(e){var t=E(e);return t.match(te)?t:e}var ae={scheme:"mailto",parse(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},s=n.query.split("&"),a=0,l=s.length;a<l;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,f=u.length;h<f;++h)r.push(u[h]);break;case"subject":n.subject=H(c[1],t);break;case"body":n.body=H(c[1],t);break;default:i=!0,o[H(c[0],t)]=H(c[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var m=r[d].split("@");if(m[0]=H(m[0]),t.unicodeSupport)m[1]=H(m[1],t).toLowerCase();else try{m[1]=S(H(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[d]=m.join("@")}return n},serialize(e,t){var n,r=e,o=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var s=0,a=o.length;s<a;++s){var l=String(o[s]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(ne,se).replace(ne,i).replace(re,O),h=l.slice(c+1);try{h=t.iri?C(h):S(H(h,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[s]=u+"@"+h}r.path=o.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var d=[];for(var p in f)f[p]!==Q[p]&&d.push(p.replace(ne,se).replace(ne,i).replace(ie,O)+"="+f[p].replace(ne,se).replace(ne,i).replace(oe,O));return d.length&&(r.query=d.join("&")),r}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse(e,t){var n=e.path&&e.path.match(le),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=_[i+":"+(t.nid||o)];r.nid=o,r.nss=s,r.path=void 0,a&&(r=a.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize(e,t){var n=e.nid,r=_[(t.scheme||e.scheme||"urn")+":"+(t.nid||n)];r&&(e=r.serialize(e,t));var i=e;return i.path=(n||t.nid)+":"+e.nss,i}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ue)||(n.error=n.error||"UUID is not valid."),n},serialize(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};_[W.scheme]=W,_[U.scheme]=U,_[K.scheme]=K,_[G.scheme]=G,_[ae.scheme]=ae,_[ce.scheme]=ce,_[he.scheme]=he,e.SCHEMES=_,e.pctEncChar=O,e.pctDecChars=E,e.parse=I,e.removeDotSegments=V,e.serialize=F,e.resolveComponents=q,e.resolve=function(e,t,n){var r=function(e,t){var n={scheme:"null"};if(t)for(var r in t)n[r]=t[r];return n}(0,n);return F(q(I(e,r),I(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=F(I(e,t),t):"object"===r(e)&&(e=I(F(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=F(I(e,n),n):"object"===r(e)&&(e=F(e,n)),"string"==typeof t?t=F(I(t,n),n):"object"===r(t)&&(t=F(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:s.ESCAPE,O)},e.unescapeComponent=H,Object.defineProperty(e,"__esModule",{value:!0})}))},{}],ajv:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;const r=e("./core"),i=e("./vocabularies/draft7"),o=e("./vocabularies/discriminator"),s=e("./refs/json-schema-draft-07.json"),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),i.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.exports=n=c,Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var u=e("./compile/validate");Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:()=>u.KeywordCxt});var h=e("./compile/codegen");Object.defineProperty(n,"_",{enumerable:!0,get:()=>h._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>h.str}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>h.stringify}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>h.nil}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>h.Name}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:()=>h.CodeGen})},{"./compile/codegen":2,"./compile/validate":15,"./core":18,"./refs/json-schema-draft-07.json":20,"./vocabularies/discriminator":46,"./vocabularies/draft7":48}]},{},[])("ajv")})),xn((function(e,t){!function(e){function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,i){if(e===i)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(i))return!1;if(!0===t(e)){if(e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!1===r(e[o],i[o]))return!1;return!0}if(!0===n(e)){var s={};for(var a in e)if(hasOwnProperty.call(e,a)){if(!1===r(e[a],i[a]))return!1;s[a]=!0}for(var l in i)if(hasOwnProperty.call(i,l)&&!0!==s[l])return!1;return!0}return!1}function i(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(n(e)){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}return!1}var o;o="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var s=0,a=2,l={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},c="EOF",u="UnquotedIdentifier",h="QuotedIdentifier",f="Rbracket",d="Rparen",p="Comma",m="Colon",g="Rbrace",v="Number",y="Current",w="Expref",b="Pipe",x="Or",$="And",k="EQ",S="GT",C="LT",_="GTE",O="LTE",E="NE",A="Flatten",M="Star",P="Filter",j="Dot",T="Not",N="Lbrace",I="Lbracket",D="Lparen",R="Literal",L={".":j,"*":M,",":p,":":m,"{":N,"}":g,"]":f,"(":D,")":d,"@":y},B={"<":!0,">":!0,"=":!0,"!":!0},z={" ":!0,"\t":!0,"\n":!0};function V(e){return e>="0"&&e<="9"||"-"===e}function F(){}F.prototype={tokenize:function(e){var t,n,r,i,o=[];for(this._current=0;this._current<e.length;)if((i=e[this._current])>="a"&&i<="z"||i>="A"&&i<="Z"||"_"===i)t=this._current,n=this._consumeUnquotedIdentifier(e),o.push({type:u,value:n,start:t});else if(void 0!==L[e[this._current]])o.push({type:L[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(V(e[this._current]))r=this._consumeNumber(e),o.push(r);else if("["===e[this._current])r=this._consumeLBracket(e),o.push(r);else if('"'===e[this._current])t=this._current,n=this._consumeQuotedIdentifier(e),o.push({type:h,value:n,start:t});else if("'"===e[this._current])t=this._current,n=this._consumeRawStringLiteral(e),o.push({type:R,value:n,start:t});else if("`"===e[this._current]){t=this._current;var s=this._consumeLiteral(e);o.push({type:R,value:s,start:t})}else if(void 0!==B[e[this._current]])o.push(this._consumeOperator(e));else if(void 0!==z[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,o.push({type:$,value:"&&",start:t})):o.push({type:w,value:"&",start:t});else{if("|"!==e[this._current]){var a=new Error("Unknown character:"+e[this._current]);throw a.name="LexerError",a}t=this._current,this._current++,"|"===e[this._current]?(this._current++,o.push({type:x,value:"||",start:t})):o.push({type:b,value:"|",start:t})}return o},_consumeUnquotedIdentifier:function(e){var t,n=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(n,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var n=e.length;'"'!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&'"'!==e[r+1]?r++:r+=2,this._current=r}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var n=e.length;"'"!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&"'"!==e[r+1]?r++:r+=2,this._current=r}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var n=e.length;V(e[this._current])&&this._current<n;)this._current++;var r=parseInt(e.slice(t,this._current));return{type:v,value:r,start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:P,value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:A,value:"[]",start:t}):{type:I,value:"[",start:t}},_consumeOperator:function(e){var t=this._current,n=e[t];return this._current++,"!"===n?"="===e[this._current]?(this._current++,{type:E,value:"!=",start:t}):{type:T,value:"!",start:t}:"<"===n?"="===e[this._current]?(this._current++,{type:O,value:"<=",start:t}):{type:C,value:"<",start:t}:">"===n?"="===e[this._current]?(this._current++,{type:_,value:">=",start:t}):{type:S,value:">",start:t}:"="===n&&"="===e[this._current]?(this._current++,{type:k,value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,n=this._current,r=e.length;"`"!==e[this._current]&&this._current<r;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var s=o(e.slice(n,this._current));return s=s.replace("\\`","`"),t=this._looksLikeJSON(s)?JSON.parse(s):JSON.parse('"'+s+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var q={};function H(){}function W(e){this.runtime=e}function U(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[s]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[s]}]},contains:{_func:this._functionContains,_signature:[{types:[a,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[a]},{types:[a]}]},floor:{_func:this._functionFloor,_signature:[{types:[s]}]},length:{_func:this._functionLength,_signature:[{types:[a,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[a]},{types:[a]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[a]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[a,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}q.EOF=0,q.UnquotedIdentifier=0,q.QuotedIdentifier=0,q.Rbracket=0,q.Rparen=0,q.Comma=0,q.Rbrace=0,q.Number=0,q.Current=0,q.Expref=0,q.Pipe=1,q.Or=2,q.And=3,q.EQ=5,q.GT=5,q.LT=5,q.GTE=5,q.LTE=5,q.NE=5,q.Flatten=9,q.Star=20,q.Filter=21,q.Dot=40,q.Not=45,q.Lbrace=50,q.Lbracket=55,q.Lparen=60,H.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if(this._lookahead(0)!==c){var n=this._lookaheadToken(0),r=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw r.name="ParserError",r}return t},_loadTokens:function(e){var t=(new F).tokenize(e);t.push({type:c,value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var n=this.nud(t),r=this._lookahead(0);e<q[r];)this._advance(),n=this.led(r,n),r=this._lookahead(0);return n},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,n;switch(e.type){case R:return{type:"Literal",value:e.value};case u:return{type:"Field",name:e.value};case h:var r={type:"Field",name:e.value};if(this._lookahead(0)===D)throw new Error("Quoted identifier not allowed for function names.");return r;case T:return{type:"NotExpression",children:[t=this.expression(q.Not)]};case M:return t=null,{type:"ValueProjection",children:[{type:"Identity"},t=this._lookahead(0)===f?{type:"Identity"}:this._parseProjectionRHS(q.Star)]};case P:return this.led(e.type,{type:"Identity"});case N:return this._parseMultiselectHash();case A:return{type:"Projection",children:[{type:A,children:[{type:"Identity"}]},t=this._parseProjectionRHS(q.Flatten)]};case I:return this._lookahead(0)===v||this._lookahead(0)===m?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):this._lookahead(0)===M&&this._lookahead(1)===f?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(q.Star)]}):this._parseMultiselectList();case y:return{type:y};case w:return{type:"ExpressionReference",children:[n=this.expression(q.Expref)]};case D:for(var i=[];this._lookahead(0)!==d;)this._lookahead(0)===y?(n={type:y},this._advance()):n=this.expression(0),i.push(n);return this._match(d),i[0];default:this._errorToken(e)}},led:function(e,t){var n;switch(e){case j:var r=q.Dot;return this._lookahead(0)!==M?{type:"Subexpression",children:[t,n=this._parseDotRHS(r)]}:(this._advance(),{type:"ValueProjection",children:[t,n=this._parseProjectionRHS(r)]});case b:return n=this.expression(q.Pipe),{type:b,children:[t,n]};case x:return{type:"OrExpression",children:[t,n=this.expression(q.Or)]};case $:return{type:"AndExpression",children:[t,n=this.expression(q.And)]};case D:for(var i,o=t.name,s=[];this._lookahead(0)!==d;)this._lookahead(0)===y?(i={type:y},this._advance()):i=this.expression(0),this._lookahead(0)===p&&this._match(p),s.push(i);return this._match(d),{type:"Function",name:o,children:s};case P:var a=this.expression(0);return this._match(f),{type:"FilterProjection",children:[t,n=this._lookahead(0)===A?{type:"Identity"}:this._parseProjectionRHS(q.Filter),a]};case A:return{type:"Projection",children:[{type:A,children:[t]},this._parseProjectionRHS(q.Flatten)]};case k:case E:case S:case _:case C:case O:return this._parseComparator(t,e);case I:var l=this._lookaheadToken(0);return l.type===v||l.type===m?(n=this._parseIndexExpression(),this._projectIfSlice(t,n)):(this._match(M),this._match(f),{type:"Projection",children:[t,n=this._parseProjectionRHS(q.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),n=new Error("Expected "+e+", got: "+t.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if(this._lookahead(0)===m||this._lookahead(1)===m)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(f),e},_projectIfSlice:function(e,t){var n={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[n,this._parseProjectionRHS(q.Star)]}:n},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,n=this._lookahead(0);n!==f&&t<3;){if(n===m)t++,this._advance();else{if(n!==v){var r=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+r.value+"("+r.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(f),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(q[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return[u,h,M].indexOf(t)>=0?this.expression(e):t===I?(this._match(I),this._parseMultiselectList()):t===N?(this._match(N),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(q[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===I)t=this.expression(e);else if(this._lookahead(0)===P)t=this.expression(e);else{if(this._lookahead(0)!==j){var n=this._lookaheadToken(0),r=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw r.name="ParserError",r}this._match(j),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];this._lookahead(0)!==f;){var t=this.expression(0);if(e.push(t),this._lookahead(0)===p&&(this._match(p),this._lookahead(0)===f))throw new Error("Unexpected token Rbracket")}return this._match(f),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,n,r=[],i=[u,h];;){if(e=this._lookaheadToken(0),i.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match(m),n={type:"KeyValuePair",name:t,value:this.expression(0)},r.push(n),this._lookahead(0)===p)this._match(p);else if(this._lookahead(0)===g){this._match(g);break}}return{type:"MultiSelectHash",children:r}}},W.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,o){var s,a,l,c,u,h,f,d,p;switch(e.type){case"Field":return null!==o&&n(o)?void 0===(h=o[e.name])?null:h:null;case"Subexpression":for(l=this.visit(e.children[0],o),p=1;p<e.children.length;p++)if(null===(l=this.visit(e.children[1],l)))return null;return l;case"IndexExpression":return f=this.visit(e.children[0],o),this.visit(e.children[1],f);case"Index":if(!t(o))return null;var m=e.value;return m<0&&(m=o.length+m),void 0===(l=o[m])&&(l=null),l;case"Slice":if(!t(o))return null;var g=e.children.slice(0),v=this.computeSliceParams(o.length,g),x=v[0],$=v[1],M=v[2];if(l=[],M>0)for(p=x;p<$;p+=M)l.push(o[p]);else for(p=x;p>$;p+=M)l.push(o[p]);return l;case"Projection":var P=this.visit(e.children[0],o);if(!t(P))return null;for(d=[],p=0;p<P.length;p++)null!==(a=this.visit(e.children[1],P[p]))&&d.push(a);return d;case"ValueProjection":if(!n(P=this.visit(e.children[0],o)))return null;d=[];var j=function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}(P);for(p=0;p<j.length;p++)null!==(a=this.visit(e.children[1],j[p]))&&d.push(a);return d;case"FilterProjection":if(!t(P=this.visit(e.children[0],o)))return null;var T=[],N=[];for(p=0;p<P.length;p++)i(s=this.visit(e.children[2],P[p]))||T.push(P[p]);for(var I=0;I<T.length;I++)null!==(a=this.visit(e.children[1],T[I]))&&N.push(a);return N;case"Comparator":switch(c=this.visit(e.children[0],o),u=this.visit(e.children[1],o),e.name){case k:l=r(c,u);break;case E:l=!r(c,u);break;case S:l=c>u;break;case _:l=c>=u;break;case C:l=c<u;break;case O:l=c<=u;break;default:throw new Error("Unknown comparator: "+e.name)}return l;case A:var D=this.visit(e.children[0],o);if(!t(D))return null;var R=[];for(p=0;p<D.length;p++)t(a=D[p])?R.push.apply(R,a):R.push(a);return R;case"Identity":return o;case"MultiSelectList":if(null===o)return null;for(d=[],p=0;p<e.children.length;p++)d.push(this.visit(e.children[p],o));return d;case"MultiSelectHash":if(null===o)return null;var L;for(d={},p=0;p<e.children.length;p++)d[(L=e.children[p]).name]=this.visit(L.value,o);return d;case"OrExpression":return i(s=this.visit(e.children[0],o))&&(s=this.visit(e.children[1],o)),s;case"AndExpression":return!0===i(c=this.visit(e.children[0],o))?c:this.visit(e.children[1],o);case"NotExpression":return i(c=this.visit(e.children[0],o));case"Literal":return e.value;case b:return f=this.visit(e.children[0],o),this.visit(e.children[1],f);case y:return o;case"Function":var B=[];for(p=0;p<e.children.length;p++)B.push(this.visit(e.children[p],o));return this.runtime.callFunction(e.name,B);case"ExpressionReference":var z=e.children[0];return z.jmespathType=w,z;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var n=t[0],r=t[1],i=t[2],o=[null,null,null];if(null===i)i=1;else if(0===i){var s=new Error("Invalid slice, step cannot be 0");throw s.name="RuntimeError",s}var a=i<0;return n=null===n?a?e-1:0:this.capSliceRange(e,n,i),r=null===r?a?-1:e:this.capSliceRange(e,r,i),o[0]=n,o[1]=r,o[2]=i,o},capSliceRange:function(e,t,n){return t<0?(t+=e)<0&&(t=n<0?-1:0):t>=e&&(t=n<0?e-1:e),t}},U.prototype={callFunction:function(e,t){var n=this.functionTable[e];if(void 0===n)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,n._signature),n._func.call(this,t)},_validateArgs:function(e,t,n){var r,i,o,s;if(n[n.length-1].variadic){if(t.length<n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+n.length+r+" but received "+t.length)}else if(t.length!==n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+n.length+r+" but received "+t.length);for(var a=0;a<n.length;a++){s=!1,i=n[a].types,o=this._getTypeName(t[a]);for(var c=0;c<i.length;c++)if(this._typeMatches(o,i[c],t[a])){s=!0;break}if(!s){var u=i.map((function(e){return l[e]})).join(",");throw new Error("TypeError: "+e+"() expected argument "+(a+1)+" to be type "+u+" but received type "+l[o]+" instead.")}}},_typeMatches:function(e,t,n){if(1===t)return!0;if(9!==t&&8!==t&&3!==t)return e===t;if(3===t)return 3===e;if(3===e){var r;8===t?r=s:9===t&&(r=a);for(var i=0;i<n.length;i++)if(!this._typeMatches(this._getTypeName(n[i]),r,n[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return a;case"[object Number]":return s;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return e.jmespathType===w?6:4}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],n=e[1];return-1!==t.indexOf(n,t.length-n.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===a){for(var t=e[0],n="",r=t.length-1;r>=0;r--)n+=t[r];return n}var i=e[0].slice(0);return i.reverse(),i},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t/n.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return n(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],n=this._interpreter,r=e[0],i=e[1],o=0;o<i.length;o++)t.push(n.visit(r,i[o]));return t},_functionMerge:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)t[i]=r[i]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===s)return Math.max.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)n.localeCompare(t[r])<0&&(n=t[r]);return n}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===s)return Math.min.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)t[r].localeCompare(n)<0&&(n=t[r]);return n}return null},_functionSum:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case s:return"number";case a:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],n=Object.keys(t),r=[],i=0;i<n.length;i++)r.push(t[n[i]]);return r},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return 3===this._getTypeName(e[0])?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===a?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,n=this._getTypeName(e[0]);return n===s?e[0]:n!==a||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var n=this._interpreter,r=e[1],i=this._getTypeName(n.visit(r,t[0]));if([s,a].indexOf(i)<0)throw new Error("TypeError");for(var o=this,l=[],c=0;c<t.length;c++)l.push([c,t[c]]);l.sort((function(e,t){var s=n.visit(r,e[1]),a=n.visit(r,t[1]);if(o._getTypeName(s)!==i)throw new Error("TypeError: expected "+i+", received "+o._getTypeName(s));if(o._getTypeName(a)!==i)throw new Error("TypeError: expected "+i+", received "+o._getTypeName(a));return s>a?1:s<a?-1:e[0]-t[0]}));for(var u=0;u<l.length;u++)t[u]=l[u][1];return t},_functionMaxBy:function(e){for(var t,n,r=e[1],i=e[0],o=this.createKeyFunction(r,[s,a]),l=-1/0,c=0;c<i.length;c++)(n=o(i[c]))>l&&(l=n,t=i[c]);return t},_functionMinBy:function(e){for(var t,n,r=e[1],i=e[0],o=this.createKeyFunction(r,[s,a]),l=1/0,c=0;c<i.length;c++)(n=o(i[c]))<l&&(l=n,t=i[c]);return t},createKeyFunction:function(e,t){var n=this,r=this._interpreter;return function(i){var o=r.visit(e,i);if(t.indexOf(n._getTypeName(o))<0){var s="TypeError: expected one of "+t+", received "+n._getTypeName(o);throw new Error(s)}return o}}},e.tokenize=function(e){return(new F).tokenize(e)},e.compile=function(e){return(new H).parse(e)},e.search=function(e,t){var n=new H,r=new U,i=new W(r);r._interpreter=i;var o=n.parse(t);return i.search(o,e)},e.strictDeepEqual=r}(t)}));class NP extends Fe{constructor(e){super(),Ve(this,e,TP,jP,a,{tags:0,separator:3})}}function IP(e,t,n){const r=e.slice();return r[20]=t[n],r}function DP(e){let t,n,r,i,o=e[0].link+"";return{c(){t=O("a"),n=A("See more at "),r=A(o),I(t,"class","itemlink svelte-jcb5dt"),I(t,"href",i=e[0].link),I(t,"target","_blank")},m(e,i){S(e,t,i),x(t,n),x(t,r)},p(e,n){1&n&&o!==(o=e[0].link+"")&&B(r,o),1&n&&i!==(i=e[0].link)&&I(t,"href",i)},d(e){e&&C(t)}}}function RP(e){let t,n,r,i;return{c(){t=O("sl-textarea"),L(t,"label","Notes"),L(t,"placeholder","Notes (these will be shown in the graph)..."),L(t,"size","small"),L(t,"value",n=e[0].notes)},m(n,o){S(n,t,o),r||(i=j(t,"sl-input",e[7]),r=!0)},p(e,r){1&r&&n!==(n=e[0].notes)&&L(t,"value",n)},d(e){e&&C(t),r=!1,i()}}}function LP(e){let t,n,r,i,o=e[1].theme.badges,s=[];for(let t=0;t<o.length;t+=1)s[t]=BP(IP(e,o,t));return{c(){t=O("sl-select");for(let e=0;e<s.length;e+=1)s[e].c();L(t,"label","Badge"),L(t,"clearable",""),L(t,"value",n=e[0].badge),L(t,"placeholder","Select badge")},m(n,o){S(n,t,o);for(let e=0;e<s.length;e+=1)s[e].m(t,null);r||(i=j(t,"sl-change",e[11]),r=!0)},p(e,r){if(3&r){let n;for(o=e[1].theme.badges,n=0;n<o.length;n+=1){const i=IP(e,o,n);s[n]?s[n].p(i,r):(s[n]=BP(i),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}1&r&&n!==(n=e[0].badge)&&L(t,"value",n)},d(e){e&&C(t),_(s,e),r=!1,i()}}}function BP(e){let t,n,r,i,o=e[20]+"";return{c(){t=O("sl-menu-item"),n=A(o),L(t,"value",r=e[20]),L(t,"selected",i=e[0].badge===e[20])},m(e,r){S(e,t,r),x(t,n)},p(e,s){2&s&&o!==(o=e[20]+"")&&B(n,o),2&s&&r!==(r=e[20])&&L(t,"value",r),3&s&&i!==(i=e[0].badge===e[20])&&L(t,"selected",i)},d(e){e&&C(t)}}}function zP(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,E,P,T,N,D,R,B,z,F,q,H,W,U,J,K,G,Q,Y,X,Z,ee;return{c(){t=O("div"),n=O("sl-checkbox"),r=A("Directed"),s=M(),a=O("div"),l=O("sl-color-picker"),u=M(),h=O("span"),h.textContent="Stroke",f=M(),d=O("sl-input"),m=M(),g=O("sl-select"),v=O("sl-menu-item"),y=A("straight"),b=M(),$=O("sl-menu-item"),k=A("curved"),E=M(),P=O("sl-menu-item"),T=A("ortho"),R=M(),B=O("sl-select"),z=O("sl-menu-item"),F=A("solid"),H=M(),W=O("sl-menu-item"),U=A("dashed"),K=M(),G=O("sl-menu-item"),Q=A("dotted"),V(n,"width","100%"),L(n,"checked",i=e[0].directed),L(l,"format","hex"),L(l,"size","small"),L(l,"value",c=e[0].stroke),L(l,"label","Select stroke color"),I(h,"class","title svelte-jcb5dt"),I(a,"class","edge-stroke svelte-jcb5dt"),L(d,"label","Weight"),L(d,"type","number"),L(d,"value",p=e[0].weight),L(v,"value","straight"),L(v,"selected",w="straight"===e[0].shape),L($,"value","curved"),L($,"selected",_="curved"===e[0].shape),L(P,"value","ortho"),L(P,"selected",N="ortho"===e[0].shape),L(g,"label","Shape"),L(g,"value",D=e[0].shape),L(g,"placeholder","Select shape"),L(z,"value","solid"),L(z,"selected",q="solid"===e[0].strokeType),L(W,"value","dashed"),L(W,"selected",J="dashed"===e[0].strokeType),L(G,"value","dotted"),L(G,"selected",Y="dotted"===e[0].strokeType),L(B,"label","StrokeType"),L(B,"value",X=e[0].strokeType),L(B,"placeholder","Select strokeType"),I(t,"class","edge-panal svelte-jcb5dt")},m(i,o){S(i,t,o),x(t,n),x(n,r),x(t,s),x(t,a),x(a,l),x(a,u),x(a,h),x(t,f),x(t,d),x(t,m),x(t,g),x(g,v),x(v,y),x(g,b),x(g,$),x($,k),x(g,E),x(g,P),x(P,T),x(t,R),x(t,B),x(B,z),x(z,F),x(B,H),x(B,W),x(W,U),x(B,K),x(B,G),x(G,Q),Z||(ee=[j(n,"sl-change",e[15]),j(l,"sl-change",e[16]),j(d,"sl-change",e[17]),j(g,"sl-change",e[18]),j(B,"sl-change",e[19])],Z=!0)},p(e,t){1&t&&i!==(i=e[0].directed)&&L(n,"checked",i),1&t&&c!==(c=e[0].stroke)&&L(l,"value",c),1&t&&p!==(p=e[0].weight)&&L(d,"value",p),1&t&&w!==(w="straight"===e[0].shape)&&L(v,"selected",w),1&t&&_!==(_="curved"===e[0].shape)&&L($,"selected",_),1&t&&N!==(N="ortho"===e[0].shape)&&L(P,"selected",N),1&t&&D!==(D=e[0].shape)&&L(g,"value",D),1&t&&q!==(q="solid"===e[0].strokeType)&&L(z,"selected",q),1&t&&J!==(J="dashed"===e[0].strokeType)&&L(W,"selected",J),1&t&&Y!==(Y="dotted"===e[0].strokeType)&&L(G,"selected",Y),1&t&&X!==(X=e[0].strokeType)&&L(B,"value",X)},d(e){e&&C(t),Z=!1,o(ee)}}}function VP(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$;return{c(){t=O("div"),n=O("div"),r=O("sl-color-picker"),s=M(),a=O("span"),a.textContent="Fill",l=M(),c=O("div"),u=O("sl-color-picker"),f=M(),d=O("span"),d.textContent="Border",p=M(),m=O("div"),g=O("sl-color-picker"),y=M(),w=O("span"),w.textContent="Label",L(r,"format","hex"),L(r,"size","small"),L(r,"value",i=e[0].fill),L(r,"label","Select fill color"),I(a,"class","svelte-jcb5dt"),I(n,"class","node-color svelte-jcb5dt"),L(u,"format","hex"),L(u,"size","small"),L(u,"value",h=e[0].bordercolor),L(u,"label","Select border color"),I(d,"class","svelte-jcb5dt"),I(c,"class","node-color svelte-jcb5dt"),L(g,"format","hex"),L(g,"size","small"),L(g,"value",v=e[0].labelcolor),L(g,"label","Select label color"),I(w,"class","svelte-jcb5dt"),I(m,"class","node-color svelte-jcb5dt"),I(t,"class","node-colors svelte-jcb5dt")},m(i,o){S(i,t,o),x(t,n),x(n,r),x(n,s),x(n,a),x(t,l),x(t,c),x(c,u),x(c,f),x(c,d),x(t,p),x(t,m),x(m,g),x(m,y),x(m,w),b||($=[j(r,"sl-change",e[12]),j(u,"sl-change",e[13]),j(g,"sl-change",e[14])],b=!0)},p(e,t){1&t&&i!==(i=e[0].fill)&&L(r,"value",i),1&t&&h!==(h=e[0].bordercolor)&&L(u,"value",h),1&t&&v!==(v=e[0].labelcolor)&&L(g,"value",v)},d(e){e&&C(t),b=!1,o($)}}}function FP(e){let t,n,r,i,o;return i=new AP({props:{content:{json:e[0].custom||{}},onChange:e[4]}}),{c(){t=O("div"),n=O("span"),n.innerHTML="<strong>custom</strong>",r=M(),Le(i.$$.fragment),I(t,"class","row")},m(e,s){S(e,t,s),x(t,n),x(t,r),Be(i,t,null),o=!0},p(e,t){const n={};1&t&&(n.content={json:e[0].custom||{}}),i.$set(n)},i(e){o||(Oe(i.$$.fragment,e),o=!0)},o(e){Ee(i.$$.fragment,e),o=!1},d(e){e&&C(t),ze(i)}}}function qP(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,E,T,N,D,R,z,V,F=e[0].label+"",q=e[0].desc+"",H=e[0].link&&e[0].link.toString().length>0,W=H&&DP(e),U="node"===e[0].kind&&RP(e);_=new NP({props:{tags:e[0].tags}}),_.$on("tagschanged",e[10]);let J="node"===e[0].kind&&LP(e);function K(e,t){return"node"===e[0].kind?VP:"edge"===e[0].kind?zP:void 0}let G=K(e),Q=G&&G(e),Y=e[1].customjson&&FP(e);return{c(){t=O("h1"),n=A(F),r=M(),i=O("p"),s=A(q),a=M(),W&&W.c(),l=M(),c=O("div"),u=O("sl-input"),f=M(),d=O("sl-input"),m=M(),U&&U.c(),g=M(),v=O("sl-textarea"),w=M(),b=O("sl-input"),k=M(),Le(_.$$.fragment),E=M(),J&&J.c(),T=M(),Q&&Q.c(),N=M(),Y&&Y.c(),D=P(),I(t,"class","svelte-jcb5dt"),I(i,"class","itemdesc svelte-jcb5dt"),L(u,"label","ID"),L(u,"type","number"),L(u,"size","small"),L(u,"value",h=e[0].id),L(d,"label","Label"),L(d,"type","text"),L(d,"size","small"),L(d,"value",p=e[0].label),L(v,"label","Description"),L(v,"placeholder","Desc..."),L(v,"size","small"),L(v,"value",y=e[0].desc),L(b,"label","Link"),L(b,"type","url"),L(b,"size","small"),L(b,"value",$=e[0].link),I(c,"class","node-panel svelte-jcb5dt")},m(o,h){S(o,t,h),x(t,n),S(o,r,h),S(o,i,h),x(i,s),S(o,a,h),W&&W.m(o,h),S(o,l,h),S(o,c,h),x(c,u),x(c,f),x(c,d),x(c,m),U&&U.m(c,null),x(c,g),x(c,v),x(c,w),x(c,b),x(c,k),Be(_,c,null),x(c,E),J&&J.m(c,null),S(o,T,h),Q&&Q.m(o,h),S(o,N,h),Y&&Y.m(o,h),S(o,D,h),R=!0,z||(V=[j(u,"input",e[5]),j(d,"input",e[6]),j(v,"sl-input",e[8]),j(b,"input",e[9])],z=!0)},p(e,[t]){(!R||1&t)&&F!==(F=e[0].label+"")&&B(n,F),(!R||1&t)&&q!==(q=e[0].desc+"")&&B(s,q),1&t&&(H=e[0].link&&e[0].link.toString().length>0),H?W?W.p(e,t):(W=DP(e),W.c(),W.m(l.parentNode,l)):W&&(W.d(1),W=null),(!R||1&t&&h!==(h=e[0].id))&&L(u,"value",h),(!R||1&t&&p!==(p=e[0].label))&&L(d,"value",p),"node"===e[0].kind?U?U.p(e,t):(U=RP(e),U.c(),U.m(c,g)):U&&(U.d(1),U=null),(!R||1&t&&y!==(y=e[0].desc))&&L(v,"value",y),(!R||1&t&&$!==($=e[0].link))&&L(b,"value",$);const r={};1&t&&(r.tags=e[0].tags),_.$set(r),"node"===e[0].kind?J?J.p(e,t):(J=LP(e),J.c(),J.m(c,null)):J&&(J.d(1),J=null),G===(G=K(e))&&Q?Q.p(e,t):(Q&&Q.d(1),Q=G&&G(e),Q&&(Q.c(),Q.m(N.parentNode,N))),e[1].customjson?Y?(Y.p(e,t),2&t&&Oe(Y,1)):(Y=FP(e),Y.c(),Oe(Y,1),Y.m(D.parentNode,D)):Y&&(Ce(),Ee(Y,1,1,(()=>{Y=null})),_e())},i(e){R||(Oe(_.$$.fragment,e),Oe(Y),R=!0)},o(e){Ee(_.$$.fragment,e),Ee(Y),R=!1},d(e){e&&C(t),e&&C(r),e&&C(i),e&&C(a),W&&W.d(e),e&&C(l),e&&C(c),U&&U.d(),ze(_),J&&J.d(),e&&C(T),Q&&Q.d(e),e&&C(N),Y&&Y.d(e),e&&C(D),z=!1,o(V)}}}function HP(e,t,n){let{selectedItem:r}=t,{graph:i}=t;const o=re();function s(e,t){"text"==t.split("_")[0]||"color"==t.split("_")[0]||"url"==t.split("_")[0]?n(0,r[t.split("_")[1]]=e.target.value,r):"number"==t.split("_")[0]?n(0,r[t.split("_")[1]]=""===e.target.value?null:JSON.parse(e.target.value),r):"checkbox"==t.split("_")[0]?n(0,r[t.split("_")[1]]=e.target.checked,r):n(0,r[t.split("_")[1]]=JSON.parse(e.target.value),r),o("graphchanged",i)}return e.$$set=e=>{"selectedItem"in e&&n(0,r=e.selectedItem),"graph"in e&&n(1,i=e.graph)},[r,i,o,s,function(e,t,s){n(0,r.custom=e.json,r),o("graphchanged",i)},e=>s(e,"number_id"),e=>s(e,"text_label"),e=>s(e,"text_notes"),e=>s(e,"text_desc"),e=>s(e,"url_link"),e=>{n(0,r.tags=e.detail.value,r),o("graphchanged",i)},e=>s(e,"text_badge"),e=>s(e,"color_fill"),e=>s(e,"color_bordercolor"),e=>s(e,"color_labelcolor"),e=>s(e,"checkbox_directed"),e=>s(e,"color_stroke"),e=>s(e,"number_weight"),e=>s(e,"text_shape"),e=>s(e,"text_strokeType")]}class WP extends Fe{constructor(e){super(),Ve(this,e,HP,qP,a,{selectedItem:0,graph:1})}}var UP={value:()=>{}};function JP(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new KP(r)}function KP(e){this._=e}function GP(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function QP(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function YP(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=UP,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}KP.prototype=JP.prototype={constructor:KP,on:function(e,t){var n,r=this._,i=GP(e+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=i[o]).type)r[n]=YP(r[n],e.name,t);else if(null==t)for(n in r)r[n]=YP(r[n],e.name,null);return this}for(;++o<s;)if((n=(e=i[o]).type)&&(n=QP(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new KP(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var XP="http://www.w3.org/1999/xhtml",ZP={svg:"http://www.w3.org/2000/svg",xhtml:XP,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ej(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),ZP.hasOwnProperty(t)?{space:ZP[t],local:e}:e}function tj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===XP&&t.documentElement.namespaceURI===XP?t.createElement(e):t.createElementNS(n,e)}}function nj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rj(e){var t=ej(e);return(t.local?nj:tj)(t)}function ij(){}function oj(e){return null==e?ij:function(){return this.querySelector(e)}}function sj(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function aj(){return[]}function lj(e){return function(t){return t.matches(e)}}var cj=Array.prototype.find;function uj(){return this.firstElementChild}var hj=Array.prototype.filter;function fj(){return this.children}function dj(e){return new Array(e.length)}function pj(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function mj(e){return function(){return e}}function gj(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new pj(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function vj(e,t,n,r,i,o,s){var a,l,c,u=new Map,h=t.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(d[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<f;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new pj(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(d[a])===l&&(i[a]=l)}function yj(e){return e.__data__}function wj(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bj(e){return function(){this.removeAttribute(e)}}function xj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $j(e,t){return function(){this.setAttribute(e,t)}}function kj(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sj(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Cj(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function _j(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Oj(e){return function(){this.style.removeProperty(e)}}function Ej(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Aj(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Mj(e,t){return e.style.getPropertyValue(t)||_j(e).getComputedStyle(e,null).getPropertyValue(t)}function Pj(e){return function(){delete this[e]}}function jj(e,t){return function(){this[e]=t}}function Tj(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Nj(e){return e.trim().split(/^|\s+/)}function Ij(e){return e.classList||new Dj(e)}function Dj(e){this._node=e,this._names=Nj(e.getAttribute("class")||"")}function Rj(e,t){for(var n=Ij(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Lj(e,t){for(var n=Ij(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Bj(e){return function(){Rj(this,e)}}function zj(e){return function(){Lj(this,e)}}function Vj(e,t){return function(){(t.apply(this,arguments)?Rj:Lj)(this,e)}}function Fj(){this.textContent=""}function qj(e){return function(){this.textContent=e}}function Hj(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Wj(){this.innerHTML=""}function Uj(e){return function(){this.innerHTML=e}}function Jj(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Kj(){this.nextSibling&&this.parentNode.appendChild(this)}function Gj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qj(){return null}function Yj(){var e=this.parentNode;e&&e.removeChild(this)}function Xj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Zj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eT(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function tT(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function nT(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function rT(e,t,n){var r=_j(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function iT(e,t){return function(){return rT(this,e,t)}}function oT(e,t){return function(){return rT(this,e,t.apply(this,arguments))}}pj.prototype={constructor:pj,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Dj.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var sT=[null];function aT(e,t){this._groups=e,this._parents=t}function lT(e){return"string"==typeof e?new aT([[document.querySelector(e)]],[document.documentElement]):new aT([[e]],sT)}function cT(e){e.preventDefault(),e.stopImmediatePropagation()}function uT(e){var t=e.document.documentElement,n=lT(e).on("dragstart.drag",cT,!0);"onselectstart"in t?n.on("selectstart.drag",cT,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function hT(e,t){var n=e.document.documentElement,r=lT(e).on("dragstart.drag",null);t&&(r.on("click.drag",cT,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function fT(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function dT(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function pT(){}aT.prototype={constructor:aT,select:function(e){"function"!=typeof e&&(e=oj(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new aT(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:sj(t)}}(e):function(e){return null==e?aj:function(){return this.querySelectorAll(e)}}(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new aT(r,i)},selectChild:function(e){return this.select(null==e?uj:function(e){return function(){return cj.call(this.children,e)}}("function"==typeof e?e:lj(e)))},selectChildren:function(e){return this.selectAll(null==e?fj:function(e){return function(){return hj.call(this.children,e)}}("function"==typeof e?e:lj(e)))},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new aT(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,yj);var n=t?vj:gj,r=this._parents,i=this._groups;"function"!=typeof e&&(e=mj(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,d=sj(e.call(u,u&&u.__data__,c,r)),p=d.length,m=a[c]=new Array(p),g=s[c]=new Array(p),v=l[c]=new Array(f);n(u,h,m,g,v,d,t);for(var y,w,b=0,x=0;b<p;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(w=g[x])&&++x<p;);y._next=w||null}}return(s=new aT(s,r))._enter=a,s._exit=l,s},enter:function(){return new aT(this._enter||this._groups.map(dj),this._parents)},exit:function(){return new aT(this._exit||this._groups.map(dj),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof aT))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,f=s[a]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;a<r;++a)s[a]=t[a];return new aT(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=wj);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new aT(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=ej(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?xj:bj:"function"==typeof t?n.local?Cj:Sj:n.local?kj:$j)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Oj:"function"==typeof t?Aj:Ej)(e,t,null==n?"":n)):Mj(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Pj:"function"==typeof t?Tj:jj)(e,t)):this.node()[e]},classed:function(e,t){var n=Nj(e+"");if(arguments.length<2){for(var r=Ij(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Vj:t?Bj:zj)(n,t))},text:function(e){return arguments.length?this.each(null==e?Fj:("function"==typeof e?Hj:qj)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Wj:("function"==typeof e?Jj:Uj)(e)):this.node().innerHTML},raise:function(){return this.each(Kj)},lower:function(){return this.each(Gj)},append:function(e){var t="function"==typeof e?e:rj(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:rj(e),r=null==t?Qj:"function"==typeof t?t:oj(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Yj)},clone:function(e){return this.select(e?Zj:Xj)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=eT(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?nT:tT,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?oT:iT)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};var mT=.7,gT=1/mT,vT="\\s*([+-]?\\d+)\\s*",yT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",wT="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bT=/^#([0-9a-f]{3,8})$/,xT=new RegExp("^rgb\\("+[vT,vT,vT]+"\\)$"),$T=new RegExp("^rgb\\("+[wT,wT,wT]+"\\)$"),kT=new RegExp("^rgba\\("+[vT,vT,vT,yT]+"\\)$"),ST=new RegExp("^rgba\\("+[wT,wT,wT,yT]+"\\)$"),CT=new RegExp("^hsl\\("+[yT,wT,wT]+"\\)$"),_T=new RegExp("^hsla\\("+[yT,wT,wT,yT]+"\\)$"),OT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ET(){return this.rgb().formatHex()}function AT(){return this.rgb().formatRgb()}function MT(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=bT.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?PT(t):3===n?new IT(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?jT(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?jT(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=xT.exec(e))?new IT(t[1],t[2],t[3],1):(t=$T.exec(e))?new IT(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=kT.exec(e))?jT(t[1],t[2],t[3],t[4]):(t=ST.exec(e))?jT(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=CT.exec(e))?BT(t[1],t[2]/100,t[3]/100,1):(t=_T.exec(e))?BT(t[1],t[2]/100,t[3]/100,t[4]):OT.hasOwnProperty(e)?PT(OT[e]):"transparent"===e?new IT(NaN,NaN,NaN,0):null}function PT(e){return new IT(e>>16&255,e>>8&255,255&e,1)}function jT(e,t,n,r){return r<=0&&(e=t=n=NaN),new IT(e,t,n,r)}function TT(e){return e instanceof pT||(e=MT(e)),e?new IT((e=e.rgb()).r,e.g,e.b,e.opacity):new IT}function NT(e,t,n,r){return 1===arguments.length?TT(e):new IT(e,t,n,null==r?1:r)}function IT(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function DT(){return"#"+LT(this.r)+LT(this.g)+LT(this.b)}function RT(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function LT(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function BT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new VT(e,t,n,r)}function zT(e){if(e instanceof VT)return new VT(e.h,e.s,e.l,e.opacity);if(e instanceof pT||(e=MT(e)),!e)return new VT;if(e instanceof VT)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new VT(s,a,l,e.opacity)}function VT(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function FT(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}fT(pT,MT,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ET,formatHex:ET,formatHsl:function(){return zT(this).formatHsl()},formatRgb:AT,toString:AT}),fT(IT,NT,dT(pT,{brighter:function(e){return e=null==e?gT:Math.pow(gT,e),new IT(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?mT:Math.pow(mT,e),new IT(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:DT,formatHex:DT,formatRgb:RT,toString:RT})),fT(VT,(function(e,t,n,r){return 1===arguments.length?zT(e):new VT(e,t,n,null==r?1:r)}),dT(pT,{brighter:function(e){return e=null==e?gT:Math.pow(gT,e),new VT(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?mT:Math.pow(mT,e),new VT(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new IT(FT(e>=240?e-240:e+120,i,r),FT(e,i,r),FT(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var qT=e=>()=>e;function HT(e){return 1==(e=+e)?WT:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):qT(isNaN(t)?n:t)}}function WT(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):qT(isNaN(e)?t:e)}var UT=function e(t){var n=HT(t);function r(e,t){var r=n((e=NT(e)).r,(t=NT(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=WT(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function JT(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var KT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GT=new RegExp(KT.source,"g");function QT(e,t){var n,r,i,o=KT.lastIndex=GT.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=KT.exec(e))&&(r=GT.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:JT(n,r)})),o=GT.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}var YT,XT=180/Math.PI,ZT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eN(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*XT,skewX:Math.atan(l)*XT,scaleX:s,scaleY:a}}function tN(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,r,i,o,s,a){if(e!==i||r!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:JT(e,i)},{i:l-2,x:JT(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:JT(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:JT(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,s.skewX,a,l),function(e,t,n,r,o,s){if(e!==n||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:JT(e,n)},{i:a-2,x:JT(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var nN=tN((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ZT:eN(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),rN=tN((function(e){return null==e?ZT:(YT||(YT=document.createElementNS("http://www.w3.org/2000/svg","g")),YT.setAttribute("transform",e),(e=YT.transform.baseVal.consolidate())?eN((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):ZT)}),", ",")",")");function iN(e){return((e=Math.exp(e))+1/e)/2}var oN=function e(t,n,r){function i(e,i){var o,s,a=e[0],l=e[1],c=e[2],u=i[0],h=i[1],f=i[2],d=u-a,p=h-l,m=d*d+p*p;if(m<1e-12)s=Math.log(f/c)/t,o=function(e){return[a+e*d,l+e*p,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),v=(f*f-c*c+r*m)/(2*c*n*g),y=(f*f-c*c-r*m)/(2*f*n*g),w=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-w)/t,o=function(e){var r,i=e*s,o=iN(w),u=c/(n*g)*(o*(r=t*i+w,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+u*d,l+u*p,c*o/iN(t*i+w)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4),sN="http://www.w3.org/1999/xhtml",aN={svg:"http://www.w3.org/2000/svg",xhtml:sN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function lN(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),aN.hasOwnProperty(t)?{space:aN[t],local:e}:e}function cN(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sN&&t.documentElement.namespaceURI===sN?t.createElement(e):t.createElementNS(n,e)}}function uN(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function hN(e){var t=lN(e);return(t.local?uN:cN)(t)}function fN(){}function dN(e){return null==e?fN:function(){return this.querySelector(e)}}function pN(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function mN(){return[]}function gN(e){return null==e?mN:function(){return this.querySelectorAll(e)}}function vN(e){return function(){return this.matches(e)}}function yN(e){return function(t){return t.matches(e)}}var wN=Array.prototype.find;function bN(){return this.firstElementChild}var xN=Array.prototype.filter;function $N(){return Array.from(this.children)}function kN(e){return new Array(e.length)}function SN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function CN(e){return function(){return e}}function _N(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new SN(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function ON(e,t,n,r,i,o,s){var a,l,c,u=new Map,h=t.length,f=o.length,d=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(d[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<f;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new SN(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(d[a])===l&&(i[a]=l)}function EN(e){return e.__data__}function AN(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function MN(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function PN(e){return function(){this.removeAttribute(e)}}function jN(e){return function(){this.removeAttributeNS(e.space,e.local)}}function TN(e,t){return function(){this.setAttribute(e,t)}}function NN(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function IN(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function DN(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function RN(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function LN(e){return function(){this.style.removeProperty(e)}}function BN(e,t,n){return function(){this.style.setProperty(e,t,n)}}function zN(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function VN(e,t){return e.style.getPropertyValue(t)||RN(e).getComputedStyle(e,null).getPropertyValue(t)}function FN(e){return function(){delete this[e]}}function qN(e,t){return function(){this[e]=t}}function HN(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function WN(e){return e.trim().split(/^|\s+/)}function UN(e){return e.classList||new JN(e)}function JN(e){this._node=e,this._names=WN(e.getAttribute("class")||"")}function KN(e,t){for(var n=UN(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function GN(e,t){for(var n=UN(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function QN(e){return function(){KN(this,e)}}function YN(e){return function(){GN(this,e)}}function XN(e,t){return function(){(t.apply(this,arguments)?KN:GN)(this,e)}}function ZN(){this.textContent=""}function eI(e){return function(){this.textContent=e}}function tI(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function nI(){this.innerHTML=""}function rI(e){return function(){this.innerHTML=e}}function iI(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function oI(){this.nextSibling&&this.parentNode.appendChild(this)}function sI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aI(){return null}function lI(){var e=this.parentNode;e&&e.removeChild(this)}function cI(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uI(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hI(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function fI(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function dI(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function pI(e,t,n){var r=RN(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mI(e,t){return function(){return pI(this,e,t)}}function gI(e,t){return function(){return pI(this,e,t.apply(this,arguments))}}SN.prototype={constructor:SN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},JN.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var vI=[null];function yI(e,t){this._groups=e,this._parents=t}function wI(){return new yI([[document.documentElement]],vI)}function bI(e){return"string"==typeof e?new yI([[document.querySelector(e)]],[document.documentElement]):new yI([[e]],vI)}function xI(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}yI.prototype=wI.prototype={constructor:yI,select:function(e){"function"!=typeof e&&(e=dN(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new yI(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return pN(e.apply(this,arguments))}}(e):gN(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new yI(r,i)},selectChild:function(e){return this.select(null==e?bN:function(e){return function(){return wN.call(this.children,e)}}("function"==typeof e?e:yN(e)))},selectChildren:function(e){return this.selectAll(null==e?$N:function(e){return function(){return xN.call(this.children,e)}}("function"==typeof e?e:yN(e)))},filter:function(e){"function"!=typeof e&&(e=vN(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new yI(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,EN);var n=t?ON:_N,r=this._parents,i=this._groups;"function"!=typeof e&&(e=CN(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,d=AN(e.call(u,u&&u.__data__,c,r)),p=d.length,m=a[c]=new Array(p),g=s[c]=new Array(p),v=l[c]=new Array(f);n(u,h,m,g,v,d,t);for(var y,w,b=0,x=0;b<p;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(w=g[x])&&++x<p;);y._next=w||null}}return(s=new yI(s,r))._enter=a,s._exit=l,s},enter:function(){return new yI(this._enter||this._groups.map(kN),this._parents)},exit:function(){return new yI(this._exit||this._groups.map(kN),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],h=r[l],f=u.length,d=a[l]=new Array(f),p=0;p<f;++p)(c=u[p]||h[p])&&(d[p]=c);for(;l<i;++l)a[l]=n[l];return new yI(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=MN);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new yI(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=lN(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?jN:PN:"function"==typeof t?n.local?DN:IN:n.local?NN:TN)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?LN:"function"==typeof t?zN:BN)(e,t,null==n?"":n)):VN(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?FN:"function"==typeof t?HN:qN)(e,t)):this.node()[e]},classed:function(e,t){var n=WN(e+"");if(arguments.length<2){for(var r=UN(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?XN:t?QN:YN)(n,t))},text:function(e){return arguments.length?this.each(null==e?ZN:("function"==typeof e?tI:eI)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?nI:("function"==typeof e?iI:rI)(e)):this.node().innerHTML},raise:function(){return this.each(oI)},lower:function(){return this.each(sI)},append:function(e){var t="function"==typeof e?e:hN(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:hN(e),r=null==t?aI:"function"==typeof t?t:dN(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(lI)},clone:function(e){return this.select(e?uI:cI)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=hI(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?dI:fI,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?gI:mI)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};var $I,kI,SI=0,CI=0,_I=0,OI=0,EI=0,AI=0,MI="object"==typeof performance&&performance.now?performance:Date,PI="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jI(){return EI||(PI(TI),EI=MI.now()+AI)}function TI(){EI=0}function NI(){this._call=this._time=this._next=null}function II(e,t,n){var r=new NI;return r.restart(e,t,n),r}function DI(){EI=(OI=MI.now())+AI,SI=CI=0;try{!function(){jI(),++SI;for(var e,t=$I;t;)(e=EI-t._time)>=0&&t._call.call(void 0,e),t=t._next;--SI}()}finally{SI=0,function(){var e,t,n=$I,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:$I=t);kI=e,LI(r)}(),EI=0}}function RI(){var e=MI.now(),t=e-OI;t>1e3&&(AI-=t,OI=e)}function LI(e){SI||(CI&&(CI=clearTimeout(CI)),e-EI>24?(e<1/0&&(CI=setTimeout(DI,e-MI.now()-AI)),_I&&(_I=clearInterval(_I))):(_I||(OI=MI.now(),_I=setInterval(RI,1e3)),SI=1,PI(DI)))}function BI(e,t,n){var r=new NI;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}NI.prototype=II.prototype={constructor:NI,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?jI():+n)+(null==t?0:+t),this._next||kI===this||(kI?kI._next=this:$I=this,kI=this),this._call=e,this._time=n,LI()},stop:function(){this._call&&(this._call=null,this._time=1/0,LI())}};var zI=JP("start","end","cancel","interrupt"),VI=[];function FI(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var c,u,h,f;if(1!==n.state)return l();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return BI(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete i[c]):+c<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete i[c])}if(BI((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(f=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=II(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:zI,tween:VI,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function qI(e,t){var n=WI(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function HI(e,t){var n=WI(e,t);if(n.state>3)throw new Error("too late; already running");return n}function WI(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function UI(e,t){var n,r,i,o=e.__transition,s=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete e.__transition}}function JI(e,t){var n,r;return function(){var i=HI(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function KI(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=HI(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function GI(e,t,n){var r=e._id;return e.each((function(){var e=HI(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return WI(e,r).value[t]}}function QI(e,t){var n;return("number"==typeof t?JT:t instanceof MT?UT:(n=MT(t))?(t=n,UT):QT)(e,t)}function YI(e){return function(){this.removeAttribute(e)}}function XI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZI(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function eD(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function tD(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttribute(e)}}function nD(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function rD(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function iD(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function oD(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&iD(e,i)),n}return i._value=t,i}function sD(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&rD(e,i)),n}return i._value=t,i}function aD(e,t){return function(){qI(this,e).delay=+t.apply(this,arguments)}}function lD(e,t){return t=+t,function(){qI(this,e).delay=t}}function cD(e,t){return function(){HI(this,e).duration=+t.apply(this,arguments)}}function uD(e,t){return t=+t,function(){HI(this,e).duration=t}}function hD(e,t){if("function"!=typeof t)throw new Error;return function(){HI(this,e).ease=t}}function fD(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?qI:HI;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}var dD=wI.prototype.constructor;function pD(e){return function(){this.style.removeProperty(e)}}function mD(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function gD(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&mD(e,o,n)),r}return o._value=t,o}function vD(e){return function(t){this.textContent=e.call(this,t)}}function yD(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&vD(r)),t}return r._value=e,r}var wD=0;function bD(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function xD(){return++wD}var $D=wI.prototype;bD.prototype={constructor:bD,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=dN(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),f=0;f<u;++f)(a=c[f])&&(l=e.call(a,a.__data__,f,c))&&("__data__"in a&&(l.__data__=a.__data__),h[f]=l,FI(h[f],t,n,f,h,WI(a,n)));return new bD(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=gN(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var f,d=e.call(l,l.__data__,h,c),p=WI(l,n),m=0,g=d.length;m<g;++m)(f=d[m])&&FI(f,t,n,m,d,p);o.push(d),s.push(l)}return new bD(o,s,t,n)},selectChild:$D.selectChild,selectChildren:$D.selectChildren,filter:function(e){"function"!=typeof e&&(e=vN(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new bD(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,f=s[a]=new Array(h),d=0;d<h;++d)(l=c[d]||u[d])&&(f[d]=l);for(;a<r;++a)s[a]=t[a];return new bD(s,this._parents,this._name,this._id)},selection:function(){return new dD(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=xD(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=WI(s,t);FI(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new bD(r,this._parents,e,n)},call:$D.call,nodes:$D.nodes,node:$D.node,size:$D.size,empty:$D.empty,each:$D.each,on:function(e,t){var n=this._id;return arguments.length<2?WI(this.node(),n).on.on(e):this.each(fD(n,e,t))},attr:function(e,t){var n=lN(e),r="transform"===n?rN:QI;return this.attrTween(e,"function"==typeof t?(n.local?nD:tD)(n,r,GI(this,"attr."+e,t)):null==t?(n.local?XI:YI)(n):(n.local?eD:ZI)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=lN(e);return this.tween(n,(r.local?oD:sD)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?nN:QI;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=VN(this,e),s=(this.style.removeProperty(e),VN(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,pD(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=VN(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=VN(this,e)),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}(e,r,GI(this,"style."+e,t))).each(function(e,t){var n,r,i,o,s="style."+t,a="end."+s;return function(){var l=HI(this,e),c=l.on,u=null==l.value[s]?o||(o=pD(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=VN(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,gD(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(GI(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,yD(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=WI(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?JI:KI)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?aD:lD)(t,e)):WI(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?cD:uD)(t,e)):WI(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(hD(t,e)):WI(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;HI(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--i&&o()}};n.each((function(){var n=HI(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:$D[Symbol.iterator]};var kD={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function SD(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}wI.prototype.interrupt=function(e){return this.each((function(){UI(this,e)}))},wI.prototype.transition=function(e){var t,n;e instanceof bD?(t=e._id,e=e._name):(t=xD(),(n=kD).time=jI(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&FI(s,e,t,c,a,n||SD(s,t));return new bD(r,this._parents,e,t)};var CD=e=>()=>e;function _D(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function OD(e,t,n){this.k=e,this.x=t,this.y=n}OD.prototype={constructor:OD,scale:function(e){return 1===e?this:new OD(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new OD(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ED=new OD(1,0,0);function AD(e){e.stopImmediatePropagation()}function MD(e){e.preventDefault(),e.stopImmediatePropagation()}function PD(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function jD(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function TD(){return this.__zoom||ED}function ND(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ID(){return navigator.maxTouchPoints||"ontouchstart"in this}function DD(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function RD(e,t,n){const r=e.slice();return r[46]=t[n],r}function LD(e){let t,n,r,i,s,a,l,c,u,h,f,d,p,m,g,v,y,w,b,$,k,_,P,N,D,R,B,z,V,F,q,H,W,U,J,K,G,Q,Y,X,Z,ee,te,ne,re=[],ie=new Map;l=new Ot({props:{kind:e[0].theme.grid}});let oe=e[4];const se=e=>e[46].id;for(let t=0;t<oe.length;t+=1){let n=RD(e,oe,t),r=se(n);ie.set(r,re[t]=VD(r,n))}let ae=e[1]&&FD(e),le=e[6]&&qD(e),ce=e[0].jsonupload&&KD(e),ue=e[0].jsondownload&&GD(),he=e[0].exportsvg&&QD(),fe=e[0].exportcytoscape&&YD();return{c(){t=O("div"),n=E("svg"),r=E("defs"),i=E("marker"),s=E("path"),a=E("g"),Le(l.$$.fragment);for(let e=0;e<re.length;e+=1)re[e].c();u=M(),ae&&ae.c(),h=M(),le&&le.c(),f=M(),d=O("section"),p=O("sl-button-group"),m=O("sl-dropdown"),g=O("sl-button"),g.innerHTML='Menu\n\t\t\t<sl-icon slot="prefix" name="list"></sl-icon>',v=M(),y=O("sl-menu"),ce&&ce.c(),w=M(),ue&&ue.c(),b=M(),$=O("sl-divider"),k=M(),_=O("sl-menu-label"),_.textContent="Export as:",P=M(),he&&he.c(),N=M(),fe&&fe.c(),D=M(),R=O("sl-divider"),B=M(),z=O("sl-menu-label"),z.textContent="Switch Theme To",V=M(),F=O("sl-menu-item"),q=A("Classic"),W=M(),U=O("sl-menu-item"),J=A("Elegant"),G=M(),Q=O("sl-menu-item"),Y=A("Foresight"),Z=M(),I(s,"d","M 0 0 L 10 5 L 0 10 z"),I(s,"fill","grey"),I(i,"id","arrow"),I(i,"viewBox","0 0 10 10"),I(i,"refX","5"),I(i,"refY","5"),I(i,"markerWidth","4"),I(i,"markerHeight","4"),I(i,"orient","auto-start-reverse"),I(n,"tabindex","0"),I(n,"xmlns","http://www.w3.org/2000/svg"),I(n,"viewBox","0 0 1000 1000"),I(n,"style",c=`background-color: ${e[0].theme.bgfill}`),I(n,"class","svelte-4q6p2j"),I(t,"class","container svelte-4q6p2j"),L(g,"slot","trigger"),L(g,"caret",""),L(F,"value","theme.classic"),L(F,"checked",H="classic"===e[0].theme.name),L(U,"value","theme.elegant"),L(U,"checked",K="elegant"===e[0].theme.name),L(Q,"value","theme.foresight"),L(Q,"checked",X="foresight"===e[0].theme.name),I(d,"class","globalmenu svelte-4q6p2j")},m(o,c){S(o,t,c),x(t,n),x(n,r),x(r,i),x(i,s),x(n,a),Be(l,a,null);for(let e=0;e<re.length;e+=1)re[e].m(a,null);e[27](a),e[28](n),x(t,u),ae&&ae.m(t,null),x(t,h),le&&le.m(t,null),S(o,f,c),S(o,d,c),x(d,p),x(p,m),x(m,g),x(m,v),x(m,y),ce&&ce.m(y,null),x(y,w),ue&&ue.m(y,null),x(y,b),x(y,$),x(y,k),x(y,_),x(y,P),he&&he.m(y,null),x(y,N),fe&&fe.m(y,null),x(y,D),x(y,R),x(y,B),x(y,z),x(y,V),x(y,F),x(F,q),x(y,W),x(y,U),x(U,J),x(y,G),x(y,Q),x(Q,Y),x(p,Z),ee=!0,te||(ne=[j(n,"mousedown",e[19]),j(n,"mousemove",e[13]),j(n,"mouseup",e[18]),j(n,"contextmenu",T(e[15])),j(n,"keydown",e[17]),j(m,"sl-select",e[23])],te=!0)},p(e,r){const i={};1&r[0]&&(i.kind=e[0].theme.grid),l.$set(i),1118099&r[0]&&(oe=e[4],Ce(),re=Ne(re,r,se,1,e,oe,ie,a,Te,VD,null,RD),_e()),(!ee||1&r[0]&&c!==(c=`background-color: ${e[0].theme.bgfill}`))&&I(n,"style",c),e[1]?ae?(ae.p(e,r),2&r[0]&&Oe(ae,1)):(ae=FD(e),ae.c(),Oe(ae,1),ae.m(t,h)):ae&&(Ce(),Ee(ae,1,1,(()=>{ae=null})),_e()),e[6]?le?le.p(e,r):(le=qD(e),le.c(),le.m(t,null)):le&&(le.d(1),le=null),e[0].jsonupload?ce?ce.p(e,r):(ce=KD(e),ce.c(),ce.m(y,w)):ce&&(ce.d(1),ce=null),e[0].jsondownload?ue||(ue=GD(),ue.c(),ue.m(y,b)):ue&&(ue.d(1),ue=null),e[0].exportsvg?he||(he=QD(),he.c(),he.m(y,N)):he&&(he.d(1),he=null),e[0].exportcytoscape?fe||(fe=YD(),fe.c(),fe.m(y,D)):fe&&(fe.d(1),fe=null),(!ee||1&r[0]&&H!==(H="classic"===e[0].theme.name))&&L(F,"checked",H),(!ee||1&r[0]&&K!==(K="elegant"===e[0].theme.name))&&L(U,"checked",K),(!ee||1&r[0]&&X!==(X="foresight"===e[0].theme.name))&&L(Q,"checked",X)},i(e){if(!ee){Oe(l.$$.fragment,e);for(let e=0;e<oe.length;e+=1)Oe(re[e]);Oe(ae),ee=!0}},o(e){Ee(l.$$.fragment,e);for(let e=0;e<re.length;e+=1)Ee(re[e]);Ee(ae),ee=!1},d(n){n&&C(t),ze(l);for(let e=0;e<re.length;e+=1)re[e].d();e[27](null),e[28](null),ae&&ae.d(),le&&le.d(),n&&C(f),n&&C(d),ce&&ce.d(),ue&&ue.d(),he&&he.d(),fe&&fe.d(),te=!1,o(ne)}}}function BD(e){let t,n;return t=new gt({props:{item:e[46],graph:e[0],isSelected:e[46].id===e[1]?.id}}),t.$on("itemMouseDown",e[9]),t.$on("itemMouseUp",e[10]),t.$on("edgeChanged",e[20]),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.item=e[46]),1&n[0]&&(r.graph=e[0]),18&n[0]&&(r.isSelected=e[46].id===e[1]?.id),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function zD(e){let t,n;return t=new ct({props:{item:e[46],isSelected:e[46].id===e[1]?.id,theme:e[0].theme,isHighlighted:e[7].includes(e[46].id)}}),t.$on("itemMouseDown",e[9]),t.$on("itemMouseUp",e[10]),t.$on("itemBadgeClick",e[11]),t.$on("nodeChanged",ZD),t.$on("createnode",e[16]),t.$on("itemcontrolmousedown",e[8]),{c(){Le(t.$$.fragment)},m(e,r){Be(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.item=e[46]),18&n[0]&&(r.isSelected=e[46].id===e[1]?.id),1&n[0]&&(r.theme=e[0].theme),144&n[0]&&(r.isHighlighted=e[7].includes(e[46].id)),t.$set(r)},i(e){n||(Oe(t.$$.fragment,e),n=!0)},o(e){Ee(t.$$.fragment,e),n=!1},d(e){ze(t,e)}}}function VD(e,t){let n,r,i,o,s;const a=[zD,BD],l=[];function c(e,t){return"node"===e[46].kind?0:"edge"===e[46].kind?1:-1}return~(r=c(t))&&(i=l[r]=a[r](t)),{key:e,first:null,c(){n=P(),i&&i.c(),o=P(),this.first=n},m(e,t){S(e,n,t),~r&&l[r].m(e,t),S(e,o,t),s=!0},p(e,n){let s=r;r=c(t=e),r===s?~r&&l[r].p(t,n):(i&&(Ce(),Ee(l[s],1,1,(()=>{l[s]=null})),_e()),~r?(i=l[r],i?i.p(t,n):(i=l[r]=a[r](t),i.c()),Oe(i,1),i.m(o.parentNode,o)):i=null)},i(e){s||(Oe(i),s=!0)},o(e){Ee(i),s=!1},d(e){e&&C(n),~r&&l[r].d(e),e&&C(o)}}}function FD(e){let t,n,r;return n=new WP({props:{selectedItem:e[1],graph:e[0]}}),n.$on("graphchanged",e[29]),{c(){t=O("section"),Le(n.$$.fragment),I(t,"class","sidepanel svelte-4q6p2j")},m(e,i){S(e,t,i),Be(n,t,null),r=!0},p(e,t){const r={};2&t[0]&&(r.selectedItem=e[1]),1&t[0]&&(r.graph=e[0]),n.$set(r)},i(e){r||(Oe(n.$$.fragment,e),r=!0)},o(e){Ee(n.$$.fragment,e),r=!1},d(e){e&&C(t),ze(n)}}}function qD(e){let t,n;function r(e,t){return e[1]?WD:HD}let i=r(e),o=i(e);return{c(){t=O("sl-menu"),o.c(),L(t,"class","contextmenu svelte-4q6p2j"),L(t,"style",n=`left: ${e[6][0]}px; top: ${e[6][1]}px;`)},m(e,n){S(e,t,n),o.m(t,null)},p(e,s){i===(i=r(e))&&o?o.p(e,s):(o.d(1),o=i(e),o&&(o.c(),o.m(t,null))),64&s[0]&&n!==(n=`left: ${e[6][0]}px; top: ${e[6][1]}px;`)&&L(t,"style",n)},d(e){e&&C(t),o.d()}}}function HD(t){let n,r,i;return{c(){n=O("sl-menu-item"),n.textContent="Create new node",L(n,"value","createnode")},m(e,o){S(e,n,o),r||(i=j(n,"click",t[14]),r=!0)},p:e,d(e){e&&C(n),r=!1,i()}}}function WD(e){let t,n,r,i,o,s,a,l=e[1].label+"",c="node"===e[1].kind&&UD(e);return{c(){c&&c.c(),t=M(),n=O("sl-menu-item"),r=A('Delete "'),i=A(l),o=A('" leaving orphans'),L(n,"value","deleteitem")},m(l,u){c&&c.m(l,u),S(l,t,u),S(l,n,u),x(n,r),x(n,i),x(n,o),s||(a=j(n,"click",e[33]),s=!0)},p(e,n){"node"===e[1].kind?c?c.p(e,n):(c=UD(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),2&n[0]&&l!==(l=e[1].label+"")&&B(i,l)},d(e){c&&c.d(e),e&&C(t),e&&C(n),s=!1,a()}}}function UD(e){let t,n,r,i,s,a,l,c,u,h=e[1].label+"",f=e[1].parent&&JD(e);return{c(){t=O("sl-menu-item"),t.textContent="Create child node",n=M(),f&&f.c(),r=M(),i=O("sl-menu-item"),s=A('Delete "'),a=A(h),l=A('" including dependents'),L(t,"value","createchildnode"),L(i,"value","deleteitemwithdependents")},m(o,h){S(o,t,h),S(o,n,h),f&&f.m(o,h),S(o,r,h),S(o,i,h),x(i,s),x(i,a),x(i,l),c||(u=[j(t,"click",e[30]),j(i,"click",e[32])],c=!0)},p(e,t){e[1].parent?f?f.p(e,t):(f=JD(e),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),2&t[0]&&h!==(h=e[1].label+"")&&B(a,h)},d(e){e&&C(t),e&&C(n),f&&f.d(e),e&&C(r),e&&C(i),c=!1,o(u)}}}function JD(e){let t,n,r,i,o,s,a,l,c=e[1].label+"",u=qe(e[1].parent,e[0]).label+"";return{c(){t=O("sl-menu-item"),n=A('Detach "'),r=A(c),i=A('" from "'),o=A(u),s=A('"'),L(t,"value","detach")},m(c,u){S(c,t,u),x(t,n),x(t,r),x(t,i),x(t,o),x(t,s),a||(l=j(t,"click",e[31]),a=!0)},p(e,t){2&t[0]&&c!==(c=e[1].label+"")&&B(r,c),3&t[0]&&u!==(u=qe(e[1].parent,e[0]).label+"")&&B(o,u)},d(e){e&&C(t),a=!1,l()}}}function KD(t){let n,r,i,o,s,a;return{c(){n=O("sl-menu-item"),r=O("input"),i=M(),o=O("sl-icon"),I(r,"type","file"),I(r,"name","uploader"),I(r,"accept",".graph"),L(o,"slot","prefix"),L(o,"name","folder2-open"),L(n,"value","openfile")},m(e,l){S(e,n,l),x(n,r),x(n,i),x(n,o),s||(a=j(r,"change",t[34]),s=!0)},p:e,d(e){e&&C(n),s=!1,a()}}}function GD(e){let t;return{c(){t=O("sl-menu-item"),t.innerHTML='Save as .graph file...\n\t\t\t\t<sl-icon slot="prefix" name="download"></sl-icon>',L(t,"value","savefile")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function QD(e){let t;return{c(){t=O("sl-menu-item"),t.textContent="SVG",L(t,"value","export.svg")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function YD(e){let t;return{c(){t=O("sl-menu-item"),t.textContent="Cytoscape JSON",L(t,"value","export.cytoscape")},m(e,n){S(e,t,n)},d(e){e&&C(t)}}}function XD(e){let t,n,r=e[0]&&LD(e);return{c(){r&&r.c(),t=P()},m(e,i){r&&r.m(e,i),S(e,t,i),n=!0},p(e,n){e[0]?r?(r.p(e,n),1&n[0]&&Oe(r,1)):(r=LD(e),r.c(),Oe(r,1),r.m(t.parentNode,t)):r&&(Ce(),Ee(r,1,1,(()=>{r=null})),_e())},i(e){n||(Oe(r),n=!0)},o(e){Ee(r),n=!1},d(e){r&&r.d(e),e&&C(t)}}}function ZD(e){}function eR(e,t){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function tR(e,t,n){let r,i,o,s,a,{graphjsonpath:l}=t,{overrideOptions:c={}}=t,u={},h=null,f=null,d=null,p=[];function m(){n(2,s),n(3,a),n(1,h),n(0,r=Je(r,h))}function g(e,t){Ke(e,r,t),n(1,h=null),m(),n(6,d=null)}function v(e,t){!function(e,t,n,r,i){t.items.push({id:Math.ceil(1e4*Math.random()),kind:"node",label:"New node",desc:"",link:"",tags:[],children:[],pos:Ge(r,e,i),parent:n.id})}(e,r,t,s,a),m(),n(6,d=null)}function y(e){!function(e,t){qe(e.parent,t)&&(e.parent=null)}(e,r),m(),n(6,d=null)}function w(e){let t=e.target.files[0],i=new FileReader;i.readAsText(t),i.onload=e=>{n(0,r=Je(JSON.parse(e.target.result),null))}}te((()=>{l&&fetch(l).then((e=>e.json())).then((e=>{n(0,r=Je(Object.assign(e,c),null))}))}));return e.$$set=e=>{"graphjsonpath"in e&&n(25,l=e.graphjsonpath),"overrideOptions"in e&&n(26,c=e.overrideOptions)},e.$$.update=()=>{3&e.$$.dirty[0]&&n(4,i=function(e,t){return e?"edge"===t?.kind?[...e.items.sort(((e,t)=>e.level-t.level)).filter((e=>e.id!==t.id)),...e.items.filter((e=>e.id===t.id))]:e.items.sort(((e,t)=>e.level-t.level)):[]}(r,h)),1&e.$$.dirty[0]&&n(5,o=function(e){if(!e)return Object.entries({});let t=e.items.map((e=>e.tags)).flat().filter(((e,t,n)=>n.indexOf(e)===t)),n=t.reduce(((e,t)=>{let n=t.split(":").length>1?t.split(":")[0]:"ungrouped";return e[n]=e[n]??[],e[n].push({label:t.split(":").reverse()[0],value:t}),e}),{});return Object.entries(n)}(r)),12&e.$$.dirty[0]&&s&&a&&bI(s).call(function(){var e,t,n,r=PD,i=jD,o=DD,s=ND,a=ID,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=oN,f=JP("start","zoom","end"),d=500,p=0,m=10;function g(e){e.property("__zoom",TD).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",_).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new OD(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new OD(e.k,r,i)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,s=x(e,o).event(r),a=i.apply(e,o),l=null==n?w(a):"function"==typeof n?n.apply(e,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,f="function"==typeof t?t.apply(e,o):t,d=h(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(e){if(1===e)e=f;else{var t=d(e),n=c/t[2];e=new OD(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new $(e,t)}function $(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function k(e,...t){if(r.apply(this,arguments)){var n=x(this,t).event(e),i=this.__zoom,a=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,s.apply(this,arguments)))),u=xI(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[u,i.invert(u)],UI(this),n.start()}MD(e),n.wheel=setTimeout(h,150),n.zoom("mouse",o(y(v(i,a),n.mouse[0],n.mouse[1]),n.extent,c))}function h(){n.wheel=null,n.end()}}function S(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,s=x(this,t,!0).event(e),a=bI(e.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",d,!0),l=xI(e,i),u=e.clientX,h=e.clientY;uT(e.view),AD(e),s.mouse=[l,this.__zoom.invert(l)],UI(this),s.start()}function f(e){if(MD(e),!s.moved){var t=e.clientX-u,n=e.clientY-h;s.moved=t*t+n*n>p}s.event(e).zoom("mouse",o(y(s.that.__zoom,s.mouse[0]=xI(e,i),s.mouse[1]),s.extent,c))}function d(e){a.on("mousemove.zoom mouseup.zoom",null),hT(e.view,s.moved),MD(e),s.event(e).end()}}function C(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,s=xI(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(s),l=n.k*(e.shiftKey?.5:2),h=o(y(v(n,l),s,a),i.apply(this,t),c);MD(e),u>0?bI(this).transition().duration(u).call(b,h,s,e):bI(this).call(g.transform,h,s,e)}}function _(n,...i){if(r.apply(this,arguments)){var o,s,a,l,c=n.touches,u=c.length,h=x(this,i,n.changedTouches.length===u).event(n);for(AD(n),s=0;s<u;++s)l=[l=xI(a=c[s],this),this.__zoom.invert(l),a.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,o=!0,h.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(h.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),d)),UI(this),h.start())}}function O(e,...t){if(this.__zooming){var n,r,i,s,a=x(this,t).event(e),l=e.changedTouches,u=l.length;for(MD(e),n=0;n<u;++n)i=xI(r=l[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var h=a.touch0[0],f=a.touch0[1],d=a.touch1[0],p=a.touch1[1],m=(m=d[0]-h[0])*m+(m=d[1]-h[1])*m,g=(g=p[0]-f[0])*g+(g=p[1]-f[1])*g;r=v(r,Math.sqrt(m/g)),i=[(h[0]+d[0])/2,(h[1]+d[1])/2],s=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(y(r,i,s),a.extent,c))}}function E(e,...r){if(this.__zooming){var i,o,s=x(this,r).event(e),a=e.changedTouches,l=a.length;for(AD(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),d),i=0;i<l;++i)o=a[i],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=xI(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<m)){var c=bI(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",TD),e!==i?b(e,t,n,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,s=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return o(y(v(r,l),s,a),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,s){g.transform(e,(function(){var e=i.apply(this,arguments),s=this.__zoom,a=null==r?w(e):"function"==typeof r?r.apply(this,arguments):r;return o(ED.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,s)},$.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=bI(this.that).datum();f.call(e,this.that,new _D(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:f}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:CD(+e),g):s},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:CD(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"==typeof e?e:CD(!!e),g):a},g.extent=function(e){return arguments.length?(i="function"==typeof e?e:CD([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):i},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(o=e,g):o},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(h=e,g):h},g.on=function(){var e=f.on.apply(f,arguments);return e===f?g:e},g.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}().on("zoom",(({transform:e})=>{bI(a).attr("transform",e)})))},[r,h,s,a,i,o,d,p,function(e){f={x:e.detail.rawEvent.clientX,y:e.detail.rawEvent.clientY},n(6,d=null);let t=s.createSVGPoint();t.x=f.x,t.y=f.y;let i=t.matrixTransform(a.getCTM().inverse()),o={x:i.x,y:i.y};f.edge=function(e,t,n){let r={id:Math.ceil(1e5*Math.random()),kind:"edge",label:"",desc:"",link:"",tags:[],shape:"straight",fromId:e.id,toOrphan:{pos:{x:t.x,y:t.y}},directed:!0,weight:5};return n.items.push(r),r}(e.detail.source,o,r),m()},function(e){n(1,h=e.detail.source),f={x:e.detail.rawEvent.clientX,y:e.detail.rawEvent.clientY},n(6,d=null)},function(e){if(n(1,h=e.detail.source),f.edge&&"node"===h.kind)f.edge.toId=h.id,delete f.edge.toOrphan;else if(f.edge&&"edge"===h.kind)Ke(f.edge,r,!1);else if(!f.hasOwnProperty("edge")){let e=s.createSVGPoint();e.x=f.x,e.y=f.y;let t=function(e,t,n){return n.items.filter((e=>"node"===e.kind)).filter((e=>e.id!=t.id)).filter((t=>e.x>t.pos.x-t.width/2&&e.x<t.pos.x+t.width/2&&e.y>t.pos.y-t.height/2&&e.y<t.pos.y+t.height/2)).sort(((e,t)=>t.level-e.level))[0]}(e.matrixTransform(a.getCTM().inverse()),h,r);t&&h.parent!=t.id&&(console.log("making ",h.label," child of ",t.label),n(1,h.parent=t.id,h))}f=null,m()},function(e){let t=e.detail.source,n=(r.theme.badges.indexOf(t.badge)+1)%r.theme.badges.length;t.badge=r.theme.badges[n],m()},g,function(e){if(u={x:e.clientX,y:e.clientY},h&&f&&h.pos&&1==e.buttons){if(f.edge){let e=s.createSVGPoint();e.x=f.x+20*Math.cos(Math.atan2(f.y,f.x)),e.y=f.y+20*Math.sin(Math.atan2(f.y,f.x));let t=e.matrixTransform(a.getCTM().inverse());f.edge.toOrphan={pos:{x:t.x,y:t.y}}}else{let e=s.createSVGPoint();e.x=f.x,e.y=f.y;let t=e.matrixTransform(a.getCTM().inverse()),n=s.createSVGPoint();n.x=u.x,n.y=u.y;let i=n.matrixTransform(a.getCTM().inverse());He(h,r,i.x-t.x,i.y-t.y)}f.x=u.x,f.y=u.y,m()}},function(e){!function(e,t,n,r){let i=Math.ceil(1e4*Math.random());t.items.push({id:i,kind:"node",label:`New node ${i}`,desc:"",link:"",tags:[],children:[],pos:Ge(n,e,r)})}(e,r,s,a),m(),n(6,d=null)},function(e){r.contextmenu&&n(6,d=[e.clientX,e.clientY])},function(e){!function(e,t,n){let r=Math.ceil(1e5*Math.random());n.items.push({id:r,kind:"node",label:"new node",desc:"",link:"",tags:[],parent:e.parent,children:[],pos:{x:e.pos.x+(100+e.width/2+100*Math.random())*(Math.floor(t/10)-2),y:e.pos.y+(100+e.height/2+100*Math.random())*(t%10-2)},fill:e.fill,stroke:e.stroke}),n.items.push({id:Math.ceil(1e5*Math.random()),kind:"edge",label:"",desc:"",link:"",tags:[],shape:"straight",fromId:e.id,toId:r,directed:!0,weight:5})}(e.detail.from,e.detail.handle,r),m()},function(e){!h||"Backspace"!==e.key&&"Delete"!==e.key||g(h,!1)},function(e){f.edge&&Ke(f.edge,r,!1),f=null,m()},function(e){n(1,h=null),1===e.buttons&&(f={x:e.clientX,y:e.clientY},n(6,d=null))},function(e){m()},v,y,function(e){let t=e.detail.item.value;if(t.startsWith("theme."))!function(e){n(0,r.theme=Qe[e],r),m()}(t.split(".")[1]);else if(t.startsWith("export.")){let e=t.split(".")[1];"svg"===e?eR(s.outerHTML,"graph.svg"):"cytoscape"===e&&eR(function(e){let t={};return t.elements=e.items.filter((e=>"node"===e.kind||e.fromId&&e.toId)).map((e=>"node"===e.kind?{group:"nodes",data:{id:e.id,parent:e.parent},position:{x:e.pos.x,y:e.pos.y}}:"edge"===e.kind?{group:"edges",data:{id:e.id,source:e.fromId,target:e.toId}}:void 0)),JSON.stringify(t,null,2)}(r),"graph-cytoscape.json")}else"openfile"===t||"savefile"===t&&eR(function(e){let t={};return t.items=e.items.map((e=>"node"===e.kind?{id:e.id,kind:"node",label:e.label,notes:e.notes,desc:e.desc,link:e.link,tags:e.tags,parent:e.parent,pos:e.pos,fill:e.fill,stroke:e.stroke}:"edge"===e.kind?{id:e.id,kind:"edge",label:e.label,desc:e.desc,link:e.link,tags:e.tags,stroke:e.stroke,strokeType:e.strokeType,directed:e.directed,weight:e.weight,fromId:e.fromId,toId:e.toId,shape:e.shape,fromOrphan:e.fromOrphan,toOrphan:e.toOrphan}:void 0)),t.grid=e.grid,t.theme=e.theme,t.jsondownload=e.jsondownload,t.jsonupload=e.jsonupload,t.contextmenu=e.contextmenu,t.customjson=e.customjson,t.exportcytoscape=e.exportcytoscape,t.exportsvg=e.exportsvg,JSON.stringify(t,null,2)}(r),"mynetwork.graph")},w,l,c,function(e){le[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(e){le[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},e=>n(0,r=Je(e.detail,h)),e=>v(e,h),e=>y(h),e=>g(h,!0),e=>g(h,!1),e=>w(e),e=>n(7,p=r.items.filter((t=>"node"===t.kind&&t.tags.includes(e.target.value))).map((e=>e.id)))]}OD.prototype;var nR=new class extends Fe{constructor(e){super(),Ve(this,e,tR,XD,a,{graphjsonpath:25,overrideOptions:26},null,[-1,-1])}}({target:document.body,props:{graphjsonpath:window.graphjsonpath,overrideOptions:window.overrideOptions||{}}}),rR=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},iR=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),oR=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};
/*!
     * vanilla-picker v2.12.1
     * https://vanilla-picker.js.org
     *
     * Copyright 2017-2021 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
     * Released under the ISC license.
     */String.prototype.startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)},String.prototype.padStart=String.prototype.padStart||function(e,t){for(var n=this;n.length<e;)n=t+n;return n};var sR={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function aR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>0?e.toFixed(t).replace(/0+$/,"").replace(/\.$/,""):e.toString();return n||"0"}var lR=function(){function e(t,n,r,i){rR(this,e);var o=this;if(void 0===t);else if(Array.isArray(t))this.rgba=t;else if(void 0===r){var s=t&&""+t;s&&function(t){if(t.startsWith("hsl")){var n=t.match(/([\-\d\.e]+)/g).map(Number),r=oR(n,4),i=r[0],s=r[1],a=r[2],l=r[3];void 0===l&&(l=1),i/=360,s/=100,a/=100,o.hsla=[i,s,a,l]}else if(t.startsWith("rgb")){var c=t.match(/([\-\d\.e]+)/g).map(Number),u=oR(c,4),h=u[0],f=u[1],d=u[2],p=u[3];void 0===p&&(p=1),o.rgba=[h,f,d,p]}else t.startsWith("#")?o.rgba=e.hexToRgb(t):o.rgba=e.nameToRgb(t)||e.hexToRgb(t)}(s.toLowerCase())}else this.rgba=[t,n,r,void 0===i?1:i]}return iR(e,[{key:"printRGB",value:function(e){var t=(e?this.rgba:this.rgba.slice(0,3)).map((function(e,t){return aR(e,3===t?3:0)}));return e?"rgba("+t+")":"rgb("+t+")"}},{key:"printHSL",value:function(e){var t=[360,100,100,1],n=["","%","%",""],r=(e?this.hsla:this.hsla.slice(0,3)).map((function(e,r){return aR(e*t[r],3===r?3:1)+n[r]}));return e?"hsla("+r+")":"hsl("+r+")"}},{key:"printHex",value:function(e){var t=this.hex;return e?t:t.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=e.hslToRgb(this._hsla)},set:function(e){3===e.length&&(e[3]=1),this._rgba=e,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=e.rgbToHsl(this._rgba)},set:function(e){3===e.length&&(e[3]=1),this._hsla=e,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var e=this.rgba.map((function(e,t){return t<3?e.toString(16):Math.round(255*e).toString(16)}));return"#"+e.map((function(e){return e.padStart(2,"0")})).join("")},set:function(t){this.rgba=e.hexToRgb(t)}}],[{key:"hexToRgb",value:function(e){var t=(e.startsWith("#")?e.slice(1):e).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!t.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+e);var n=t.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(e){return parseInt(e,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(t){var n=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=sR[n];return void 0===r?r:e.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(e){var t=oR(e,4),n=t[0],r=t[1],i=t[2],o=t[3];n/=255,r/=255,i/=255;var s=Math.max(n,r,i),a=Math.min(n,r,i),l=void 0,c=void 0,u=(s+a)/2;if(s===a)l=c=0;else{var h=s-a;switch(c=u>.5?h/(2-s-a):h/(s+a),s){case n:l=(r-i)/h+(r<i?6:0);break;case r:l=(i-n)/h+2;break;case i:l=(n-r)/h+4}l/=6}return[l,c,u,o]}},{key:"hslToRgb",value:function(e){var t=oR(e,4),n=t[0],r=t[1],i=t[2],o=t[3],s=void 0,a=void 0,l=void 0;if(0===r)s=a=l=i;else{var c=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},u=i<.5?i*(1+r):i+r-i*r,h=2*i-u;s=c(h,u,n+1/3),a=c(h,u,n),l=c(h,u,n-1/3)}var f=[255*s,255*a,255*l].map(Math.round);return f[3]=o,f}}]),e}(),cR=function(){function e(){rR(this,e),this._events=[]}return iR(e,[{key:"add",value:function(e,t,n){e.addEventListener(t,n,!1),this._events.push({target:e,type:t,handler:n})}},{key:"remove",value:function(t,n,r){this._events=this._events.filter((function(i){var o=!0;return t&&t!==i.target&&(o=!1),n&&n!==i.type&&(o=!1),r&&r!==i.handler&&(o=!1),o&&e._doRemove(i.target,i.type,i.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(t){return e._doRemove(t.target,t.type,t.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(e,t,n){e.removeEventListener(t,n,!1)}}]),e}();function uR(e,t,n){var r=!1;function i(e,t,n){return Math.max(t,Math.min(e,n))}function o(e,o,s){if(s&&(r=!0),r){e.preventDefault();var a=t.getBoundingClientRect(),l=a.width,c=a.height,u=o.clientX,h=o.clientY,f=i(u-a.left,0,l),d=i(h-a.top,0,c);n(f/l,d/c)}}function s(e,t){1===(void 0===e.buttons?e.which:e.buttons)?o(e,e,t):r=!1}function a(e,t){1===e.touches.length?o(e,e.touches[0],t):r=!1}e.add(t,"mousedown",(function(e){s(e,!0)})),e.add(t,"touchstart",(function(e){a(e,!0)})),e.add(window,"mousemove",s),e.add(t,"touchmove",a),e.add(window,"mouseup",(function(e){r=!1})),e.add(t,"touchend",(function(e){r=!1})),e.add(t,"touchcancel",(function(e){r=!1}))}var hR="keydown",fR="mousedown",dR="focusin";function pR(e,t){return(t||document).querySelector(e)}function mR(e){e.preventDefault(),e.stopPropagation()}function gR(e,t,n,r,i){e.add(t,hR,(function(e){n.indexOf(e.key)>=0&&(i&&mR(e),r(e))}))}var vR=function(){function e(t){rR(this,e),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new cR,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}return iR(e,[{key:"setOptions",value:function(e){var t=this;if(e){var n=this.settings;if(e instanceof HTMLElement)n.parent=e;else{n.parent&&e.parent&&n.parent!==e.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(e,t,n){for(var r in e)n&&n.indexOf(r)>=0||(t[r]=e[r])}(e,n),e.onChange&&(this.onChange=e.onChange),e.onDone&&(this.onDone=e.onDone),e.onOpen&&(this.onOpen=e.onOpen),e.onClose&&(this.onClose=e.onClose);var r=e.color||e.colour;r&&this._setColor(r)}var i=n.parent;if(i&&n.popup&&!this._popupInited){var o=function(e){return t.openHandler(e)};this._events.add(i,"click",o),gR(this._events,i,[" ","Spacebar","Enter"],o),this._popupInited=!0}else e.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(e){if(this.show()){e&&e.preventDefault(),this.settings.parent.style.pointerEvents="none";var t=e&&e.type===hR?this._domEdit:this.domElement;setTimeout((function(){return t.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(e){var t=e&&e.type,n=!1;if(e)if(t===fR||t===dR){var r=(this.__containedEvent||0)+100;e.timeStamp>r&&(n=!0)}else mR(e),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="",t!==fR&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(e,t){this.closeHandler(),this.setOptions(e),t&&this.openHandler()}},{key:"setColor",value:function(e,t){this._setColor(e,{silent:t})}},{key:"_setColor",value:function(e,t){if("string"==typeof e&&(e=e.trim()),e){t=t||{};var n=void 0;try{n=new lR(e)}catch(e){if(t.failSilently)return;throw e}if(!this.settings.alpha){var r=n.hsla;r[3]=1,n.hsla=r}this.colour=this.color=n,this._setHSLA(null,null,null,null,t)}}},{key:"setColour",value:function(e,t){this.setColor(e,t)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var e=this._toggleDOM(!0);return this._setPosition(),e}var t,n,r=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',i=(t=r,(n=document.createElement("div")).innerHTML=t,n.firstElementChild);return this.domElement=i,this._domH=pR(".picker_hue",i),this._domSL=pR(".picker_sl",i),this._domA=pR(".picker_alpha",i),this._domEdit=pR(".picker_editor input",i),this._domSample=pR(".picker_sample",i),this._domOkay=pR(".picker_done button",i),this._domCancel=pR(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var e=this,t=this,n=this.domElement,r=this._events;function i(e,t,n){r.add(e,t,n)}i(n,"click",(function(e){return e.preventDefault()})),uR(r,this._domH,(function(e,n){return t._setHSLA(e)})),uR(r,this._domSL,(function(e,n){return t._setHSLA(null,e,1-n)})),this.settings.alpha&&uR(r,this._domA,(function(e,n){return t._setHSLA(null,null,null,1-n)}));var o=this._domEdit;i(o,"input",(function(e){t._setColor(this.value,{fromEditor:!0,failSilently:!0})})),i(o,"focus",(function(e){var t=this;t.selectionStart===t.selectionEnd&&t.select()})),this._ifPopup((function(){var t=function(t){return e.closeHandler(t)};i(window,fR,t),i(window,dR,t),gR(r,n,["Esc","Escape"],t);var o=function(t){e.__containedEvent=t.timeStamp};i(n,fR,o),i(n,dR,o),i(e._domCancel,"click",t)}));var s=function(t){e._ifPopup((function(){return e.closeHandler(t)})),e.onDone&&e.onDone(e.colour)};i(this._domOkay,"click",s),gR(r,n,["Enter"],s)}},{key:"_setPosition",value:function(){var e=this.settings.parent,t=this.domElement;e!==t.parentNode&&e.appendChild(t),this._ifPopup((function(n){"static"===getComputedStyle(e).position&&(e.style.position="relative");var r=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(e){e===r?t.classList.add(e):t.classList.remove(e)})),t.classList.add(r)}))}},{key:"_setHSLA",value:function(e,t,n,r,i){i=i||{};var o=this.colour,s=o.hsla;[e,t,n,r].forEach((function(e,t){(e||0===e)&&(s[t]=e)})),o.hsla=s,this._updateUI(i),this.onChange&&!i.silent&&this.onChange(o)}},{key:"_updateUI",value:function(e){if(this.domElement){e=e||{};var t=this.colour,n=t.hsla,r="hsl("+360*n[0]+", 100%, 50%)",i=t.hslString,o=t.hslaString,s=this._domH,a=this._domSL,l=this._domA,c=pR(".picker_selector",s),u=pR(".picker_selector",a),h=pR(".picker_selector",l);y(0,c,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=r,y(0,u,n[1]),w(0,u,1-n[2]),a.style.color=i,w(0,h,1-n[3]);var f=i,d=f.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[f,d]+")";if(this._domA.style.background=p+", linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em",!e.fromEditor){var m=this.settings.editorFormat,g=this.settings.alpha,v=void 0;switch(m){case"rgb":v=t.printRGB(g);break;case"hsl":v=t.printHSL(g);break;default:v=t.printHex(g)}this._domEdit.value=v}this._domSample.style.color=o}function y(e,t,n){t.style.left=100*n+"%"}function w(e,t,n){t.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(e,t){this.settings.parent&&this.settings.popup?e&&e(this.settings.popup):t&&t()}},{key:"_toggleDOM",value:function(e){var t=this.domElement;if(!t)return!1;var n=e?"":"none",r=t.style.display!==n;return r&&(t.style.display=n),r}}]),e}(),yR=document.createElement("style");yR.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(yR),vR.StyleElement=yR;var wR=Object.freeze({__proto__:null,default:vR});return nR}();
//# sourceMappingURL=bundle.js.map
