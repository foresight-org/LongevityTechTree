var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function r(e){return e()}function i(){return Object.create(null)}function o(e){e.forEach(r)}function s(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let l;function c(e,t){return l||(l=document.createElement("a")),l.href=t,e===l.href}function u(e,t){return e!=e?t==t:e!==t}function h(e,t,n,r){if(e){const i=d(e,t,n,r);return e[0](i)}}function d(e,t,r,i){return e[1]&&i?n(r.ctx.slice(),e[1](i(t))):r.ctx}function f(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|i[r];return e}return t.dirty|i}return t.dirty}function p(e,t,n,r,i,o){if(i){const s=d(t,n,r,o);e.p(s,i)}}function m(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function g(e){return null==e?"":e}function v(t){return t&&s(t.destroy)?t.destroy:e}const y="undefined"!=typeof window;let w=y?()=>window.performance.now():()=>Date.now(),b=y?e=>requestAnimationFrame(e):e;const x=new Set;function $(e){x.forEach((t=>{t.c(e)||(x.delete(t),t.f())})),0!==x.size&&b($)}function k(e,t){e.appendChild(t)}function S(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function C(e){const t=A("style");return function(e,t){k(e.head||e,t)}(S(e),t),t.sheet}function _(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode.removeChild(e)}function E(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function M(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function P(e){return document.createTextNode(e)}function T(){return P(" ")}function j(){return P("")}function N(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function I(e){return function(t){return t.preventDefault(),e.call(this,t)}}function R(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function D(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function L(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)null==t[r]?e.removeAttribute(r):"style"===r?e.style.cssText=t[r]:"__value"===r?e.value=e[r]=t[r]:n[r]&&n[r].set?e[r]=t[r]:D(e,r,t[r])}function z(e,t){for(const n in t)D(e,n,t[n])}function B(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:D(e,t,n)}function V(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function F(e,t){e.value=null==t?"":t}function q(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let H;function W(){if(void 0===H){H=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){H=!0}}return H}function U(e,t,n){e.classList[n?"add":"remove"](t)}function J(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class K{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=M(t.nodeName):this.e=A(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)_(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(O)}}const G=new Map;let Q,X=0;function Y(e,t,n,r,i,o,s,a=0){const l=16.666/r;let c="{\n";for(let e=0;e<=1;e+=l){const r=t+(n-t)*o(e);c+=100*e+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,h=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,d=S(e),{stylesheet:f,rules:p}=G.get(d)||function(e,t){const n={stylesheet:C(t),rules:{}};return G.set(e,n),n}(d,e);p[h]||(p[h]=!0,f.insertRule(`@keyframes ${h} ${u}`,f.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${h} ${r}ms linear ${i}ms 1 both`,X+=1,h}function Z(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),i=n.length-r.length;i&&(e.style.animation=r.join(", "),X-=i,X||b((()=>{X||(G.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),G.clear())})))}function ee(e){Q=e}function te(){if(!Q)throw new Error("Function called outside component initialization");return Q}function ne(e){te().$$.before_update.push(e)}function re(e){te().$$.on_mount.push(e)}function ie(e){te().$$.on_destroy.push(e)}function oe(){const e=te();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=J(t,n,{cancelable:r});return i.slice().forEach((t=>{t.call(e,o)})),!o.defaultPrevented}return!0}}function se(e,t){return te().$$.context.set(e,t),t}function ae(e){return te().$$.context.get(e)}function le(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const ce=[],ue=[],he=[],de=[],fe=Promise.resolve();let pe=!1;function me(){pe||(pe=!0,fe.then($e))}function ge(){return me(),fe}function ve(e){he.push(e)}function ye(e){de.push(e)}const we=new Set;let be,xe=0;function $e(){const e=Q;do{for(;xe<ce.length;){const e=ce[xe];xe++,ee(e),ke(e.$$)}for(ee(null),ce.length=0,xe=0;ue.length;)ue.pop()();for(let e=0;e<he.length;e+=1){const t=he[e];we.has(t)||(we.add(t),t())}he.length=0}while(ce.length);for(;de.length;)de.pop()();pe=!1,we.clear(),ee(e)}function ke(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ve)}}function Se(e,t,n){e.dispatchEvent(J(`${t?"intro":"outro"}${n}`))}const Ce=new Set;let _e;function Oe(){_e={r:0,c:[],p:_e}}function Ee(){_e.r||o(_e.c),_e=_e.p}function Ae(e,t){e&&e.i&&(Ce.delete(e),e.i(t))}function Me(e,t,n,r){if(e&&e.o){if(Ce.has(e))return;Ce.add(e),_e.c.push((()=>{Ce.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}const Pe={duration:0};function Te(n,r,i,a){let l=r(n,i),c=a?0:1,u=null,h=null,d=null;function f(){d&&Z(n,d)}function p(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(r){const{delay:i=0,duration:s=300,easing:a=t,tick:m=e,css:g}=l||Pe,v={start:w()+i,b:r};r||(v.group=_e,_e.r+=1),u||h?h=v:(g&&(f(),d=Y(n,c,r,s,i,a,g)),r&&m(0,1),u=p(v,s),ve((()=>Se(n,r,"start"))),function(e){let t;0===x.size&&b($),new Promise((n=>{x.add(t={c:e,f:n})}))}((e=>{if(h&&e>h.start&&(u=p(h,s),h=null,Se(n,u.b,"start"),g&&(f(),d=Y(n,c,u.b,u.duration,0,a,l.css))),u)if(e>=u.end)m(c=u.b,1-c),Se(n,u.b,"end"),h||(u.b?f():--u.group.r||o(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*a(t/u.duration),m(c,1-c)}return!(!u&&!h)})))}return{run(e){s(l)?(be||(be=Promise.resolve(),be.then((()=>{be=null}))),be).then((()=>{l=l(),m(e)})):m(e)},end(){f(),u=h=null}}}const je="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ne(e,t){e.d(1),t.delete(e.key)}function Ie(e,t){Me(e,1,1,(()=>{t.delete(e.key)}))}function Re(e,t,n,r,i,o,s,a,l,c,u,h){let d=e.length,f=o.length,p=d;const m={};for(;p--;)m[e[p].key]=p;const g=[],v=new Map,y=new Map;for(p=f;p--;){const e=h(i,o,p),a=n(e);let l=s.get(a);l?r&&l.p(e,t):(l=c(a,e),l.c()),v.set(a,g[p]=l),a in m&&y.set(a,Math.abs(p-m[a]))}const w=new Set,b=new Set;function x(e){Ae(e,1),e.m(a,u),s.set(e.key,e),u=e.first,f--}for(;d&&f;){const t=g[f-1],n=e[d-1],r=t.key,i=n.key;t===n?(u=t.first,d--,f--):v.has(i)?!s.has(r)||w.has(r)?x(t):b.has(i)?d--:y.get(r)>y.get(i)?(b.add(r),x(t)):(w.add(i),d--):(l(n,s),d--)}for(;d--;){const t=e[d];v.has(t.key)||l(t,s)}for(;f;)x(g[f-1]);return g}function De(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(r[e]=1);for(const e in a)i[e]||(n[e]=a[e],i[e]=1);e[o]=a}else for(const e in s)i[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function Le(e){return"object"==typeof e&&null!==e?e:{}}function ze(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Be(e){e&&e.c()}function Ve(e,t,n,i){const{fragment:a,on_mount:l,on_destroy:c,after_update:u}=e.$$;a&&a.m(t,n),i||ve((()=>{const t=l.map(r).filter(s);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(ve)}function Fe(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function qe(t,n,r,s,a,l,c,u=[-1]){const h=Q;ee(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(h?h.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||h.$$.root};c&&c(d.root);let f=!1;if(d.ctx=r?r(t,n.props||{},((e,n,...r)=>{const i=r.length?r[0]:n;return d.ctx&&a(d.ctx[e],d.ctx[e]=i)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](i),f&&function(e,t){-1===e.$$.dirty[0]&&(ce.push(e),me(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),f=!0,o(d.before_update),d.fragment=!!s&&s(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(O)}else d.fragment&&d.fragment.c();n.intro&&Ae(t.$$.fragment),Ve(t,n.target,n.anchor,n.customElement),$e()}ee(h)}class He{$destroy(){Fe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function We(e,t){return t&&e&&t.items.find((t=>t.id===e))}function Ue(e,t,n,r){e.pos.x+=n,e.pos.y+=r,(e.children||[]).forEach((e=>{Ue(We(e,t),t,n,r)}))}function Je(e,t,n){(e.children||[]).forEach((e=>{Je(We(e,t),t,n)}));let r=Math.min(300,e.notes?e.notes.length*((e.nodenotesfontsize||t.theme.nodenotesfontsize||16)-6):0),i=e.notes?Math.ceil(e.notes.length*((e.nodenotesfontsize||t.theme.nodenotesfontsize||16)-6)/r)*((e.nodenotesfontsize||t.theme.nodenotesfontsize||16)+4):0;e.noteswidth=r,e.notesheight=i;let o=e.has_dynamic_notes?140:0,s=e.children.length>0||e.notes?.length>0?"700":"300",a=e.nodelabelfontsize||t.theme.nodelabelfontsize||16,l=function(e,t,n,r,i){let o="http://www.w3.org/2000/svg";var s=document.createElementNS(o,"text");s.setAttribute("font-family",n),s.setAttribute("font-size",r),s.setAttribute("font-weight",i),s.setAttributeNS(o,"x",200),s.setAttributeNS(o,"y",300),s.textContent=t,e.appendChild(s);var a=s.getBBox();return s.parentNode.removeChild(s),a}(n,e.label,t.theme.font,a,s);e.labelwidth=l.width,e.labelheight=l.height;let c=Math.max(e.labelwidth/2,r/2),u=Math.max(...e.children.map((e=>{let n=We(e,t);return n.pos.x+n.width/2+15})),e.pos.x)-e.pos.x,h=e.pos.x-Math.min(...e.children.map((e=>{let n=We(e,t);return n.pos.x-n.width/2-15})),e.pos.x);e.width=2*Math.max(c,u,h)+20;let d=e.labelheight/2+i/2+o/2,f=e.children.map((e=>{let n=We(e,t);return n.pos.y+n.height/2+20})),p=Math.max(...f,e.pos.y)-e.pos.y,m=e.children.map((e=>{let n=We(e,t);return n.pos.y-n.height/2-20-30-i-o})),g=e.pos.y-Math.min(...m,e.pos.y);e.height=2*Math.max(d,g,p)+20}function Ke(e,t,n,r){e.level=r&&r.id===e.id?500+n:n,e.children.forEach((n=>Ke(We(n,t),t,e.level+2,r)))}function Ge(e,t,n){return e?(function(e){e.items.filter((e=>"node"===e.kind)).forEach((e=>{e.children=[],e.pos&&e.pos.hasOwnProperty("x")&&e.pos.hasOwnProperty("y")||(console.error(`Got null position for ${e.label}`),e.pos={x:600*Math.random(),y:600*Math.random()}),e.notes=e.notes??"",e.hasOwnProperty("parent")||(e.parent=null)})),e.items.filter((e=>"note"===e.kind)).forEach((e=>{e.children=[]})),e.items.forEach((t=>{if(t.parent){let n=We(t.parent,e);if(!n)return void delete t.parent;n.children=[...n.children||[],t.id]}}))}(e),e.items.filter((e=>"node"===e.kind&&!e.parent)).forEach((r=>{Je(r,e,n),Ke(r,e,0,t)})),e.items.filter((e=>"note"===e.kind)).forEach((t=>{Je(t,e,n)})),e.items.filter((e=>"edge"===e.kind)).forEach((t=>{t.level=Math.min(t.fromId?We(t.fromId,e).level:20,t.toId?We(t.toId,e).level:20)-1})),e):null}function Qe(e,t,n){"edge"===e.kind||"note"===e.kind?t.items=t.items.filter((t=>t!=e)):"node"===e.kind&&(n?(t.items.filter((t=>"edge"===t.kind&&[t.fromId,t.toId].includes(e.id))).forEach((e=>{Qe(e,t,!1)})),t.items.filter((t=>"node"===t.kind&&t.parent===e.id)).forEach((e=>{Qe(e,t,!0)})),t.items=t.items.filter((t=>t!=e))):(t.items.filter((t=>"node"===t.kind&&t.parent===e.id)).forEach((t=>{e.parent?t.parent=e.parent:delete t.parent})),t.items.filter((t=>"edge"===t.kind&&[t.fromId,t.toId].includes(e.id))).forEach((t=>{t.fromId===e.id&&(e.parent?t.fromId=e.parent:(delete t.fromId,t.fromOrphan={pos:{x:e.pos.x,y:e.pos.y}})),t.toId===e.id&&(e.parent?t.toId=e.parent:(delete t.toId,t.toOrphan={pos:{x:e.pos.x,y:e.pos.y}}))})),t.items=t.items.filter((t=>t!=e))))}function Xe(e,t,n){const r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY;let i=r.matrixTransform(n.getCTM().inverse());return{x:i.x,y:i.y}}function Ye(e){return Math.max(...e.items.map((e=>e.id)),0)+1}function Ze(e,t,n){if("node"!==t.kind)return[];return e.items.filter((e=>"edge"===e.kind&&e.toId===t.id)).map((t=>{let r=We(t.fromId,e);return{node:r,parents:2==n?[]:Ze(e,r,n+1)}}))}const et={elegant:{name:"elegant",bgfill:"#334155",grid:"cartesian",selectionColor:"blue",highlightColor:"red",nodefill:"#bae6fd",nodelabelstroke:"#334155",nodelabelfontsize:16,nodenotesfontsize:16,nodeborder:"white",edgestroke:"red",edgeshape:"curved",edgestroketype:"solid",font:"Dosis",badges:["✅","❌","⚡","👎","👍"]},foresight:{name:"foresight",bgfill:"#1c170b",grid:!1,selectionColor:"blue",highlightColor:"red",nodefill:"#7b9ecb",nodelabelstroke:"black",nodelabelfontsize:16,nodenotesfontsize:16,nodeborder:"white",edgestroke:"#ccc",edgeshape:"ortho",edgestroketype:"solid",font:"Roboto Condensed",badges:["✅","❌","⚡","👎","👍","https://cdn.discordapp.com/attachments/987690735639875584/997881951534981203/hexbadge.png"]},minimal:{name:"minimal",bgfill:"#e5e7eb",grid:!1,selectionColor:"#1f2937",highlightColor:"red",nodefill:"white",nodelabelstroke:"black",nodelabelfontsize:16,nodenotesfontsize:16,nodeborder:"black",edgestroke:"#1f2937",edgeshape:"curved",edgestroketype:"solid",font:"PT Mono",badges:["✅","❌","⚡","👎","👍"]},classic:{name:"classic",bgfill:"#f3f3f3",grid:!1,selectionColor:"blue",highlightColor:"red",font:"Balsamiq Sans",nodefill:"#fbe6a3",nodelabelstroke:"black",nodelabelfontsize:16,nodenotesfontsize:16,nodeborder:"black",edgestroke:"#4277dd",edgeshape:"curved",edgestroketype:"solid",badges:["✅","❌","⚡","👎","👍"]}};function tt(e){let t,n,r,i;return{c(){t=M("path"),D(t,"d",n=`M ${e[1]-e[3]},${e[2]-e[3]} l ${2*e[3]},${2*e[3]} M ${e[1]+e[3]},${e[2]-e[3]} l ${-2*e[3]},${2*e[3]}`),D(t,"data-handle",e[4]),D(t,"class","svelte-qkserr")},m(n,o){_(n,t,o),r||(i=[N(t,"click",e[8]),N(t,"mousedown",R(e[9]))],r=!0)},p(e,r){14&r&&n!==(n=`M ${e[1]-e[3]},${e[2]-e[3]} l ${2*e[3]},${2*e[3]} M ${e[1]+e[3]},${e[2]-e[3]} l ${-2*e[3]},${2*e[3]}`)&&D(t,"d",n),16&r&&D(t,"data-handle",e[4])},d(e){e&&O(t),r=!1,o(i)}}}function nt(e){let t,n,r,i;return{c(){t=M("path"),D(t,"d",n=`M ${e[1]},${e[2]-e[3]} v ${2*e[3]} M ${e[1]-e[3]},${e[2]} h ${2*e[3]}`),D(t,"data-handle",e[4]),D(t,"class","svelte-qkserr")},m(n,o){_(n,t,o),r||(i=[N(t,"click",e[6]),N(t,"mousedown",R(e[7]))],r=!0)},p(e,r){14&r&&n!==(n=`M ${e[1]},${e[2]-e[3]} v ${2*e[3]} M ${e[1]-e[3]},${e[2]} h ${2*e[3]}`)&&D(t,"d",n),16&r&&D(t,"data-handle",e[4])},d(e){e&&O(t),r=!1,o(i)}}}function rt(t){let n,r,i,s,a;function l(e,t){return"plus"===e[0]?nt:"cross"===e[0]?tt:void 0}let c=l(t),u=c&&c(t);return{c(){n=M("g"),r=M("circle"),u&&u.c(),D(r,"cx",t[1]),D(r,"cy",t[2]),D(r,"r",i=t[3]+2),D(r,"title",t[5]),D(r,"data-handle",t[4]),D(r,"class","svelte-qkserr"),D(n,"class","svelte-qkserr")},m(e,i){_(e,n,i),k(n,r),u&&u.m(n,null),s||(a=[N(r,"click",t[10]),N(r,"mousedown",R(t[11]))],s=!0)},p(e,[t]){2&t&&D(r,"cx",e[1]),4&t&&D(r,"cy",e[2]),8&t&&i!==(i=e[3]+2)&&D(r,"r",i),32&t&&D(r,"title",e[5]),16&t&&D(r,"data-handle",e[4]),c===(c=l(e))&&u?u.p(e,t):(u&&u.d(1),u=c&&c(e),u&&(u.c(),u.m(n,null)))},i:e,o:e,d(e){e&&O(n),u&&u.d(),s=!1,o(a)}}}function it(e,t,n){let{kind:r="plus"}=t,{x:i}=t,{y:o}=t,{size:s=4}=t,{data:a}=t,{title:l}=t;return e.$$set=e=>{"kind"in e&&n(0,r=e.kind),"x"in e&&n(1,i=e.x),"y"in e&&n(2,o=e.y),"size"in e&&n(3,s=e.size),"data"in e&&n(4,a=e.data),"title"in e&&n(5,l=e.title)},[r,i,o,s,a,l,function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)}]}class ot extends He{constructor(e){super(),qe(this,e,it,rt,a,{kind:0,x:1,y:2,size:3,data:4,title:5})}}function st(e,t,n){const r=e.slice();return r[29]=t[n],r}function at(e){let t,n,r,i,s,a,l,c,u,h,d,f,p=e[1].notes+"";return{c(){t=M("foreignObject"),n=A("div"),r=P(p),i=T(),D(n,"class","foreign-obj-div svelte-zn74wa"),D(t,"x",s=e[1].pos.x-e[1].noteswidth/2),D(t,"y",a=e[1].pos.y-e[1].height/2+e[1].labelheight+10),D(t,"font-family",l=e[0].font),D(t,"font-weight","300"),D(t,"font-size",c=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16),D(t,"width",u=e[1].noteswidth),D(t,"height",h=e[1].notesheight)},m(o,s){_(o,t,s),k(t,n),k(n,r),k(n,i),d||(f=[N(t,"mousedown",R(e[18])),N(t,"mouseup",R(e[19])),N(t,"click",R(e[11]))],d=!0)},p(e,n){2&n[0]&&p!==(p=e[1].notes+"")&&V(r,p),2&n[0]&&s!==(s=e[1].pos.x-e[1].noteswidth/2)&&D(t,"x",s),2&n[0]&&a!==(a=e[1].pos.y-e[1].height/2+e[1].labelheight+10)&&D(t,"y",a),1&n[0]&&l!==(l=e[0].font)&&D(t,"font-family",l),3&n[0]&&c!==(c=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16)&&D(t,"font-size",c),2&n[0]&&u!==(u=e[1].noteswidth)&&D(t,"width",u),2&n[0]&&h!==(h=e[1].notesheight)&&D(t,"height",h)},d(e){e&&O(t),d=!1,o(f)}}}function lt(e){let t,n,r,i,s,a,l,c,u,h;return{c(){t=M("foreignObject"),n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),D(n,"xmlns","http://www.w3.org/1999/xhtml"),D(n,"class","dynamicnotes-div svelte-zn74wa"),D(t,"x",r=e[1].pos.x-e[1].width/2),D(t,"y",i=e[1].pos.y-e[1].height/2+30+e[1].notesheight),D(t,"font-family",s=e[0].font),D(t,"font-weight","300"),D(t,"font-size",a=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16),D(t,"width",l=e[1].width),D(t,"height",c=140)},m(r,i){_(r,t,i),k(t,n),n.innerHTML=e[5],u||(h=[N(t,"mousedown",R(e[20])),N(t,"mouseup",R(e[21])),N(t,"click",R(e[10]))],u=!0)},p(e,o){32&o[0]&&(n.innerHTML=e[5]),2&o[0]&&r!==(r=e[1].pos.x-e[1].width/2)&&D(t,"x",r),2&o[0]&&i!==(i=e[1].pos.y-e[1].height/2+30+e[1].notesheight)&&D(t,"y",i),1&o[0]&&s!==(s=e[0].font)&&D(t,"font-family",s),3&o[0]&&a!==(a=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16)&&D(t,"font-size",a),2&o[0]&&l!==(l=e[1].width)&&D(t,"width",l)},d(e){e&&O(t),u=!1,o(h)}}}function ct(e){let t,n,r=[[1,0],[0,1],[-1,0],[0,-1]],i=[];for(let t=0;t<4;t+=1)i[t]=ut(st(e,r,t));const o=e=>Me(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<4;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<4;t+=1)i[t].m(e,r);_(e,t,r),n=!0},p(e,n){if(386&n[0]){let s;for(r=[[1,0],[0,1],[-1,0],[0,-1]],s=0;s<4;s+=1){const o=st(e,r,s);i[s]?(i[s].p(o,n),Ae(i[s],1)):(i[s]=ut(o),i[s].c(),Ae(i[s],1),i[s].m(t.parentNode,t))}for(Oe(),s=4;s<4;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<4;e+=1)Ae(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<4;e+=1)Me(i[e]);n=!1},d(e){E(i,e),e&&O(t)}}}function ut(e){let t,n;return t=new ot({props:{kind:"plus",data:22+e[29][1]+10*e[29][0],x:e[1].pos.x+e[29][0]*e[1].width/2,y:e[1].pos.y+e[29][1]*e[1].height/2,title:"Create new connected node",size:4}}),t.$on("click",e[7]),t.$on("mousedown",e[8]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.x=e[1].pos.x+e[29][0]*e[1].width/2),2&n[0]&&(r.y=e[1].pos.y+e[29][1]*e[1].height/2),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function ht(e){let t,n;function r(e,t){return 2&t[0]&&(n=null),null==n&&(n=!!e[1].badge.startsWith("http")),n?ft:dt}let i=r(e,[-1,-1]),o=i(e);return{c(){t=M("g"),o.c(),D(t,"class","badge")},m(e,n){_(e,t,n),o.m(t,null)},p(e,n){i===(i=r(e,n))&&o?o.p(e,n):(o.d(1),o=i(e),o&&(o.c(),o.m(t,null)))},d(e){e&&O(t),o.d()}}}function dt(e){let t,n,r,i,s,a,l,c,u,h=e[1].badge+"";return{c(){t=M("circle"),i=M("text"),s=P(h),D(t,"cx",n=e[1].pos.x-e[1].width/2),D(t,"cy",r=e[1].pos.y-e[1].height/2),D(t,"r",10),D(t,"fill","white"),D(t,"stroke","orange"),D(i,"x",a=e[1].pos.x-e[1].width/2-7),D(i,"y",l=e[1].pos.y-e[1].height/2+6),D(i,"stroke","white"),D(i,"fill","white"),D(i,"class","svelte-zn74wa")},m(n,r){_(n,t,r),_(n,i,r),k(i,s),c||(u=[N(t,"mousedown",R(e[22])),N(t,"mouseup",R(e[23])),N(t,"click",R(e[24])),N(i,"mousedown",R(e[25])),N(i,"mouseup",R(e[26])),N(i,"click",R(e[27]))],c=!0)},p(e,o){2&o[0]&&n!==(n=e[1].pos.x-e[1].width/2)&&D(t,"cx",n),2&o[0]&&r!==(r=e[1].pos.y-e[1].height/2)&&D(t,"cy",r),2&o[0]&&h!==(h=e[1].badge+"")&&V(s,h),2&o[0]&&a!==(a=e[1].pos.x-e[1].width/2-7)&&D(i,"x",a),2&o[0]&&l!==(l=e[1].pos.y-e[1].height/2+6)&&D(i,"y",l)},d(e){e&&O(t),e&&O(i),c=!1,o(u)}}}function ft(e){let t,n,r,i,o;return{c(){t=M("foreignObject"),n=A("img"),D(n,"width","100%"),D(n,"height","100%"),D(n,"alt","badge"),c(n.src,r=e[1].badge)||D(n,"src",r),D(t,"x",i=e[1].pos.x-e[1].width/2-10),D(t,"y",o=e[1].pos.y-e[1].height/2-10),D(t,"width",30),D(t,"height",28)},m(e,r){_(e,t,r),k(t,n)},p(e,s){2&s[0]&&!c(n.src,r=e[1].badge)&&D(n,"src",r),2&s[0]&&i!==(i=e[1].pos.x-e[1].width/2-10)&&D(t,"x",i),2&s[0]&&o!==(o=e[1].pos.y-e[1].height/2-10)&&D(t,"y",o)},d(e){e&&O(t)}}}function pt(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,A=e[1].label+"",T=e[1].notes&&at(e),I=e[1].has_dynamic_notes&&lt(e),L=e[2]&&ct(e),z=e[1].badge&&ht(e);return{c(){t=M("g"),n=M("rect"),d=M("text"),f=P(A),T&&T.c(),b=j(),I&&I.c(),x=j(),L&&L.c(),$=j(),z&&z.c(),D(n,"x",r=e[1].pos.x-e[1].width/2),D(n,"y",i=e[1].pos.y-e[1].height/2),D(n,"width",s=e[1].width),D(n,"height",a=e[1].height),D(n,"fill",l=e[4]?"transparent":e[1].fill||e[0].nodefill),D(n,"stroke",c=e[2]?e[0].selectionColor:e[3]?e[0].highlightColor:e[1].bordercolor||e[0].nodeborder),D(n,"stroke-width",u=e[2]||e[3]?"6px":"3px"),D(n,"rx",h=8+Math.floor(e[1].height/50)),D(n,"class","svelte-zn74wa"),D(d,"x",p=e[1].pos.x-e[1].labelwidth/2+2),D(d,"y",m=e[1].pos.y-e[1].height/2+e[1].labelheight),D(d,"font-family",g=e[0].font),D(d,"font-weight",v=e[1].children.length>0||e[1].notes?.length>0?"700":"300"),D(d,"font-size",y=e[1].nodelabelfontsize||e[0].nodelabelfontsize||16),D(d,"fill",w=e[1].labelcolor||e[0].nodelabelstroke),D(d,"class","svelte-zn74wa"),D(t,"class","svelte-zn74wa")},m(r,i){_(r,t,i),k(t,n),k(t,d),k(d,f),T&&T.m(t,null),k(t,b),I&&I.m(t,null),k(t,x),L&&L.m(t,null),k(t,$),z&&z.m(t,null),S=!0,C||(E=[N(n,"mousedown",R(e[14])),N(n,"mouseup",R(e[15])),N(n,"click",R(e[13])),N(d,"mousedown",R(e[16])),N(d,"mouseup",R(e[17])),N(d,"click",R(e[12]))],C=!0)},p(e,o){(!S||2&o[0]&&r!==(r=e[1].pos.x-e[1].width/2))&&D(n,"x",r),(!S||2&o[0]&&i!==(i=e[1].pos.y-e[1].height/2))&&D(n,"y",i),(!S||2&o[0]&&s!==(s=e[1].width))&&D(n,"width",s),(!S||2&o[0]&&a!==(a=e[1].height))&&D(n,"height",a),(!S||19&o[0]&&l!==(l=e[4]?"transparent":e[1].fill||e[0].nodefill))&&D(n,"fill",l),(!S||15&o[0]&&c!==(c=e[2]?e[0].selectionColor:e[3]?e[0].highlightColor:e[1].bordercolor||e[0].nodeborder))&&D(n,"stroke",c),(!S||12&o[0]&&u!==(u=e[2]||e[3]?"6px":"3px"))&&D(n,"stroke-width",u),(!S||2&o[0]&&h!==(h=8+Math.floor(e[1].height/50)))&&D(n,"rx",h),(!S||2&o[0])&&A!==(A=e[1].label+"")&&V(f,A),(!S||2&o[0]&&p!==(p=e[1].pos.x-e[1].labelwidth/2+2))&&D(d,"x",p),(!S||2&o[0]&&m!==(m=e[1].pos.y-e[1].height/2+e[1].labelheight))&&D(d,"y",m),(!S||1&o[0]&&g!==(g=e[0].font))&&D(d,"font-family",g),(!S||2&o[0]&&v!==(v=e[1].children.length>0||e[1].notes?.length>0?"700":"300"))&&D(d,"font-weight",v),(!S||3&o[0]&&y!==(y=e[1].nodelabelfontsize||e[0].nodelabelfontsize||16))&&D(d,"font-size",y),(!S||3&o[0]&&w!==(w=e[1].labelcolor||e[0].nodelabelstroke))&&D(d,"fill",w),e[1].notes?T?T.p(e,o):(T=at(e),T.c(),T.m(t,b)):T&&(T.d(1),T=null),e[1].has_dynamic_notes?I?I.p(e,o):(I=lt(e),I.c(),I.m(t,x)):I&&(I.d(1),I=null),e[2]?L?(L.p(e,o),4&o[0]&&Ae(L,1)):(L=ct(e),L.c(),Ae(L,1),L.m(t,$)):L&&(Oe(),Me(L,1,1,(()=>{L=null})),Ee()),e[1].badge?z?z.p(e,o):(z=ht(e),z.c(),z.m(t,null)):z&&(z.d(1),z=null)},i(e){S||(Ae(L),S=!0)},o(e){Me(L),S=!1},d(e){e&&O(t),T&&T.d(),I&&I.d(),L&&L.d(),z&&z.d(),C=!1,o(E)}}}function mt(e,t,n){let r;const i=oe();let{theme:o}=t,{item:s}=t,{graph:a}=t,{isSelected:l}=t,{isHighlighted:c}=t,{isHidden:u=!1}=t;function h(e,t,n){return t.tags.forEach((e=>n.add(e))),t.children.forEach((t=>{h(e,We(t,e),n)})),n}return e.$$set=e=>{"theme"in e&&n(0,o=e.theme),"item"in e&&n(1,s=e.item),"graph"in e&&n(9,a=e.graph),"isSelected"in e&&n(2,l=e.isSelected),"isHighlighted"in e&&n(3,c=e.isHighlighted),"isHidden"in e&&n(4,u=e.isHidden)},e.$$.update=()=>{514&e.$$.dirty[0]&&n(5,r=function(e){let t=Array.from(e).reduce(((e,t)=>{let n=t.split(":").length>1?t.split(":")[0]:"ungrouped";return e[n]=e[n]??[],e[n].push({label:t.split(":").reverse()[0],value:t}),e}),{});return"<table>"+Object.entries(t).map((e=>`<tr><td>${e[0]}</td><td>`+e[1].map((e=>e.label)).join(",")+"</td></tr>")).join("")+"</table>"}(h(a,s,new Set)))},[o,s,l,c,u,r,i,function(e){let t=parseInt(e.target.getAttribute("data-handle"));i("createnode",{from:s,handle:t})},function(e){let t=parseInt(e.target.getAttribute("data-handle"));i("itemcontrolmousedown",{source:s,handle:t,rawEvent:e})},a,function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},e=>i("itemMouseDown",{source:s,rawEvent:e}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemMouseDown",{source:s,rawEvent:e}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemMouseDown",{source:s,rawEvent:e,from:{x:e.clientX,y:e.clientY}}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemMouseDown",{source:s,rawEvent:e,from:{x:e.clientX,y:e.clientY}}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemMouseDown",{source:s,rawEvent:e}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemBadgeClick",{source:s,rawEvent:e}),e=>i("itemMouseDown",{source:s,rawEvent:e}),e=>i("itemMouseUp",{source:s,rawEvent:e}),e=>i("itemBadgeClick",{source:s,rawEvent:e})]}class gt extends He{constructor(e){super(),qe(this,e,mt,pt,a,{theme:0,item:1,graph:9,isSelected:2,isHighlighted:3,isHidden:4},null,[-1,-1])}}function vt(e){let t,n,r,i,s,a,l;return{c(){t=M("textPath"),n=P("----\x3e\n            "),D(t,"href",r=`#edgepathmain${e[0].id}`),D(t,"startOffset","20%"),D(t,"lengthAdjust","spacingAndGlyphs"),D(t,"font-family","Verdana"),D(t,"font-size","20"),D(t,"start",""),D(t,"fill",i=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke),D(t,"stroke",s=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke),D(t,"class","svelte-1pevlep")},m(r,i){_(r,t,i),k(t,n),a||(l=[N(t,"mousedown",R(e[19])),N(t,"mouseup",R(e[20])),N(t,"click",R(e[12]))],a=!0)},p(e,n){1&n&&r!==(r=`#edgepathmain${e[0].id}`)&&D(t,"href",r),7&n&&i!==(i=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke)&&D(t,"fill",i),7&n&&s!==(s=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke)&&D(t,"stroke",s)},d(e){e&&O(t),a=!1,o(l)}}}function yt(e){let t,n;return t=new ot({props:{kind:"cross",data:"from",x:e[5].x,y:e[5].y,title:"Detach from Node",size:4}}),t.$on("click",e[8]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.x=e[5].x),32&n&&(r.y=e[5].y),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function wt(e){let t,n;return t=new ot({props:{kind:"cross",data:"to",x:e[4].x,y:e[4].y,title:"Detach from Node",size:4}}),t.$on("click",e[8]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};16&n&&(r.x=e[4].x),16&n&&(r.y=e[4].y),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function bt(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S=e[0].label+"",C=e[0].directed&&vt(e),E=e[2]&&e[5]&&yt(e),A=e[2]&&e[4]&&wt(e);return{c(){t=M("g"),n=M("path"),l=M("path"),h=M("text"),d=M("textPath"),f=P(S),C&&C.c(),E&&E.c(),w=j(),A&&A.c(),D(n,"d",r=e[7](e[1])),D(n,"fill","none"),D(n,"stroke",i=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke),D(n,"stroke-width","5"),D(n,"class","edgePath svelte-1pevlep"),D(n,"id",s=`edgepathmain${e[0].id}`),D(n,"stroke-dasharray",a=xt(e[0].strokeType||e[1].theme.edgestroketype)),D(l,"d",c=e[7](e[1])),D(l,"fill","none"),D(l,"stroke","transparent"),D(l,"stroke-width","5"),D(l,"transform",e[3]),D(l,"id",u=`edgepath${e[0].id}`),D(l,"class","svelte-1pevlep"),D(d,"href",p=`#edgepath${e[0].id}`),D(d,"startOffset","40%"),D(d,"lengthAdjust","spacingAndGlyphs"),D(d,"font-family","Verdana"),D(d,"font-size","20"),D(d,"fill",m=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke),D(d,"stroke",g=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke),D(d,"class","svelte-1pevlep"),D(h,"font-family",v=e[1].theme.font),D(h,"font-size","20"),D(h,"fill",y=e[0].stroke),D(h,"class","svelte-1pevlep"),D(t,"class","svelte-1pevlep")},m(r,i){_(r,t,i),k(t,n),k(t,l),k(t,h),k(h,d),k(d,f),C&&C.m(h,null),E&&E.m(t,null),k(t,w),A&&A.m(t,null),b=!0,x||($=[N(n,"mousedown",R(e[15])),N(n,"mouseup",R(e[16])),N(n,"click",R(e[14])),N(d,"mousedown",R(e[17])),N(d,"mouseup",R(e[18])),N(d,"click",R(e[13])),N(h,"mousedown",R(e[21])),N(h,"mouseup",R(e[22])),N(h,"click",R(e[11]))],x=!0)},p(e,[o]){(!b||2&o&&r!==(r=e[7](e[1])))&&D(n,"d",r),(!b||7&o&&i!==(i=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke))&&D(n,"stroke",i),(!b||1&o&&s!==(s=`edgepathmain${e[0].id}`))&&D(n,"id",s),(!b||3&o&&a!==(a=xt(e[0].strokeType||e[1].theme.edgestroketype)))&&D(n,"stroke-dasharray",a),(!b||2&o&&c!==(c=e[7](e[1])))&&D(l,"d",c),(!b||8&o)&&D(l,"transform",e[3]),(!b||1&o&&u!==(u=`edgepath${e[0].id}`))&&D(l,"id",u),(!b||1&o)&&S!==(S=e[0].label+"")&&V(f,S),(!b||1&o&&p!==(p=`#edgepath${e[0].id}`))&&D(d,"href",p),(!b||7&o&&m!==(m=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke))&&D(d,"fill",m),(!b||7&o&&g!==(g=e[2]?e[1].theme.selectionColor:e[0].stroke||e[1].theme.edgestroke))&&D(d,"stroke",g),e[0].directed?C?C.p(e,o):(C=vt(e),C.c(),C.m(h,null)):C&&(C.d(1),C=null),(!b||2&o&&v!==(v=e[1].theme.font))&&D(h,"font-family",v),(!b||1&o&&y!==(y=e[0].stroke))&&D(h,"fill",y),e[2]&&e[5]?E?(E.p(e,o),36&o&&Ae(E,1)):(E=yt(e),E.c(),Ae(E,1),E.m(t,w)):E&&(Oe(),Me(E,1,1,(()=>{E=null})),Ee()),e[2]&&e[4]?A?(A.p(e,o),20&o&&Ae(A,1)):(A=wt(e),A.c(),Ae(A,1),A.m(t,null)):A&&(Oe(),Me(A,1,1,(()=>{A=null})),Ee())},i(e){b||(Ae(E),Ae(A),b=!0)},o(e){Me(E),Me(A),b=!1},d(e){e&&O(t),C&&C.d(),E&&E.d(),A&&A.d(),x=!1,o($)}}}function xt(e){return"dashed"===e?"8,5":"dotted"===e&&"5,5"}function $t(e,t,n){let r,i,o,s,a;const l=oe();let{item:c}=t,{graph:u}=t,{isSelected:h}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item),"graph"in e&&n(1,u=e.graph),"isSelected"in e&&n(2,h=e.isSelected)},e.$$.update=()=>{3&e.$$.dirty&&n(10,r=c.fromOrphan||We(c.fromId,u)),3&e.$$.dirty&&n(9,i=c.toOrphan||We(c.toId,u)),1024&e.$$.dirty&&n(5,o={x:r.pos.x,y:r.pos.y}),512&e.$$.dirty&&n(4,s={x:i.pos.x,y:i.pos.y}),1536&e.$$.dirty&&n(3,a=r&&i&&function(e,t){let n=(e.pos.x+t.pos.x)/2,r=(e.pos.y+t.pos.y)/2,i=180*Math.atan2(t.pos.y-e.pos.y,t.pos.x-e.pos.x)/Math.PI;return i<-90||i>90?`translate(0, -6) rotate(180, ${n}, ${r})`:"translate(0, -6) rotate(0)"}(r,i))},[c,u,h,a,s,o,l,function(e){let t=c.shape||e.theme.edgeshape;if("straight"===t)return`M ${o.x},${o.y} L ${s.x},${s.y}`;if("curved"===t){let e={x:r.pos.x+30,y:r.pos.y+30},t={x:i.pos.x-30,y:i.pos.y-30};return[`M ${o.x},${o.y}`,"C",`${e.x},${e.y}`,`${t.x},${t.y}`,`${s.x},${s.y}`].join(" ")}return"ortho"===t?`M ${o.x},${o.y} h ${(s.x-o.x)/2} v ${s.y-o.y} L ${s.x},${s.y}`:void 0},function(e){let t=e.target.getAttribute("data-handle");"from"===t&&c.fromId?(delete c.fromId,n(0,c.fromOrphan={pos:{x:o.x,y:o.y}},c)):"to"===t&&c.toId&&(delete c.toId,n(0,c.toOrphan={pos:{x:s.x,y:s.y}},c)),l("edgeChanged",{source:c})},i,r,function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e}),e=>l("itemMouseDown",{source:c,rawEvent:e}),e=>l("itemMouseUp",{source:c,rawEvent:e})]}class kt extends He{constructor(e){super(),qe(this,e,$t,bt,a,{item:0,graph:1,isSelected:2})}}function St(e,t,n){const r=e.slice();return r[6]=t[n],r}function Ct(e,t,n){const r=e.slice();return r[3]=t[n],r}function _t(e,t,n){const r=e.slice();return r[3]=t[n],r}function Ot(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=At(Ct(e,r,t));let o=e[2],s=[];for(let t=0;t<o.length;t+=1)s[t]=Mt(St(e,o,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=T();for(let e=0;e<s.length;e+=1)s[e].c();n=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);_(e,t,r);for(let t=0;t<s.length;t+=1)s[t].m(e,r);_(e,n,r)},p(e,a){if(2&a){let n;for(r=e[1],n=0;n<r.length;n+=1){const o=Ct(e,r,n);i[n]?i[n].p(o,a):(i[n]=At(o),i[n].c(),i[n].m(t.parentNode,t))}for(;n<i.length;n+=1)i[n].d(1);i.length=r.length}if(4&a){let t;for(o=e[2],t=0;t<o.length;t+=1){const r=St(e,o,t);s[t]?s[t].p(r,a):(s[t]=Mt(r),s[t].c(),s[t].m(n.parentNode,n))}for(;t<s.length;t+=1)s[t].d(1);s.length=o.length}},d(e){E(i,e),e&&O(t),E(s,e),e&&O(n)}}}function Et(e){let t,n=e[1],r=[];for(let t=0;t<n.length;t+=1)r[t]=Pt(_t(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);_(e,t,n)},p(e,i){if(2&i){let o;for(n=e[1],o=0;o<n.length;o+=1){const s=_t(e,n,o);r[o]?r[o].p(s,i):(r[o]=Pt(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){E(r,e),e&&O(t)}}}function At(t){let n,r;return{c(){n=M("circle"),D(n,"r",r=100+t[3]),D(n,"stroke","black"),D(n,"fill","none"),D(n,"opacity","0.6")},m(e,t){_(e,n,t)},p:e,d(e){e&&O(n)}}}function Mt(t){let n,r,i,o,s;return{c(){n=M("line"),D(n,"x1",r=-5e3*Math.cos(t[6])),D(n,"y1",i=-5e3*Math.sin(t[6])),D(n,"x2",o=5e3*Math.cos(t[6])),D(n,"y2",s=5e3*Math.sin(t[6])),D(n,"class","svelte-19wjlzj")},m(e,t){_(e,n,t)},p:e,d(e){e&&O(n)}}}function Pt(t){let n,r,i,o,s,a,l,c;return{c(){n=M("line"),s=T(),a=M("line"),D(n,"x1","0"),D(n,"y1",r=0+t[3]),D(n,"x2",i=5e3),D(n,"y2",o=0+t[3]),D(n,"class","svelte-19wjlzj"),D(a,"x1",l=0+t[3]),D(a,"y1","0"),D(a,"x2",c=0+t[3]),D(a,"y2","5000"),D(a,"class","svelte-19wjlzj")},m(e,t){_(e,n,t),_(e,s,t),_(e,a,t)},p:e,d(e){e&&O(n),e&&O(s),e&&O(a)}}}function Tt(t){let n;function r(e,t){return"cartesian"===e[0]?Et:"polar"===e[0]?Ot:void 0}let i=r(t),o=i&&i(t);return{c(){o&&o.c(),n=j()},m(e,t){o&&o.m(e,t),_(e,n,t)},p(e,[t]){i===(i=r(e))&&o?o.p(e,t):(o&&o.d(1),o=i&&i(e),o&&(o.c(),o.m(n.parentNode,n)))},i:e,o:e,d(e){o&&o.d(e),e&&O(n)}}}function jt(e,t,n){let r=[...Array(50).keys()].map((e=>100*e)),i=[0,30,60,90,120,150].map((e=>e*Math.PI/180)),{kind:o}=t;return e.$$set=e=>{"kind"in e&&n(0,o=e.kind)},[o,r,i]}class Nt extends He{constructor(e){super(),qe(this,e,jt,Tt,a,{kind:0})}}function It(e){let t,n,r,i,s,a,l,c,u,h,d,f=e[1].notes+"";return{c(){t=M("foreignObject"),n=A("div"),r=P(f),D(n,"class","foreign-obj-div svelte-q7qviw"),D(t,"x",i=e[1].pos.x-e[1].noteswidth/2),D(t,"y",s=e[1].pos.y-e[1].height/2+e[1].labelheight+10),D(t,"font-family",a=e[0].font),D(t,"font-weight","300"),D(t,"font-size",l=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16),D(t,"width",c=e[1].noteswidth),D(t,"height",u=e[1].notesheight)},m(i,o){_(i,t,o),k(t,n),k(n,r),h||(d=[N(t,"mousedown",R(e[11])),N(t,"mouseup",R(e[12])),N(t,"click",R(e[4]))],h=!0)},p(e,n){2&n&&f!==(f=e[1].notes+"")&&V(r,f),2&n&&i!==(i=e[1].pos.x-e[1].noteswidth/2)&&D(t,"x",i),2&n&&s!==(s=e[1].pos.y-e[1].height/2+e[1].labelheight+10)&&D(t,"y",s),1&n&&a!==(a=e[0].font)&&D(t,"font-family",a),3&n&&l!==(l=e[1].nodenotesfontsize||e[0].nodenotesfontsize||16)&&D(t,"font-size",l),2&n&&c!==(c=e[1].noteswidth)&&D(t,"width",c),2&n&&u!==(u=e[1].notesheight)&&D(t,"height",u)},d(e){e&&O(t),h=!1,o(d)}}}function Rt(t){let n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S=t[1].label+"",C=t[1].notes&&It(t);return{c(){n=M("g"),r=M("rect"),f=M("text"),p=P(S),C&&C.c(),D(r,"x",i=t[1].pos.x-t[1].width/2),D(r,"y",s=t[1].pos.y-t[1].height/2),D(r,"width",a=t[1].width),D(r,"height",l=t[1].height),D(r,"fill",c=t[1].fill||t[0].nodefill),D(r,"stroke",u=t[2]?t[0].selectionColor:t[1].bordercolor||t[0].nodeborder),D(r,"stroke-width",h=t[2]?"6px":"3px"),D(r,"rx",d=8+Math.floor(t[1].height/50)),D(r,"class","svelte-q7qviw"),D(f,"x",m=t[1].pos.x-.5*t[1].label.length*10+5),D(f,"y",g=t[1].pos.y-t[1].height/2+20),D(f,"font-family",v=t[0].font),D(f,"font-weight",y=t[1].notes?.length>0?"700":"300"),D(f,"font-size",w=t[1].nodelabelfontsize||t[0].nodelabelfontsize||16),D(f,"fill",b=t[1].labelcolor||t[0].nodelabelstroke),D(f,"class","svelte-q7qviw"),D(n,"class","svelte-q7qviw")},m(e,i){_(e,n,i),k(n,r),k(n,f),k(f,p),C&&C.m(n,null),x||($=[N(r,"mousedown",R(t[7])),N(r,"mouseup",R(t[8])),N(r,"click",R(t[6])),N(f,"mousedown",R(t[9])),N(f,"mouseup",R(t[10])),N(f,"click",R(t[5]))],x=!0)},p(e,[t]){2&t&&i!==(i=e[1].pos.x-e[1].width/2)&&D(r,"x",i),2&t&&s!==(s=e[1].pos.y-e[1].height/2)&&D(r,"y",s),2&t&&a!==(a=e[1].width)&&D(r,"width",a),2&t&&l!==(l=e[1].height)&&D(r,"height",l),3&t&&c!==(c=e[1].fill||e[0].nodefill)&&D(r,"fill",c),7&t&&u!==(u=e[2]?e[0].selectionColor:e[1].bordercolor||e[0].nodeborder)&&D(r,"stroke",u),4&t&&h!==(h=e[2]?"6px":"3px")&&D(r,"stroke-width",h),2&t&&d!==(d=8+Math.floor(e[1].height/50))&&D(r,"rx",d),2&t&&S!==(S=e[1].label+"")&&V(p,S),2&t&&m!==(m=e[1].pos.x-.5*e[1].label.length*10+5)&&D(f,"x",m),2&t&&g!==(g=e[1].pos.y-e[1].height/2+20)&&D(f,"y",g),1&t&&v!==(v=e[0].font)&&D(f,"font-family",v),2&t&&y!==(y=e[1].notes?.length>0?"700":"300")&&D(f,"font-weight",y),3&t&&w!==(w=e[1].nodelabelfontsize||e[0].nodelabelfontsize||16)&&D(f,"font-size",w),3&t&&b!==(b=e[1].labelcolor||e[0].nodelabelstroke)&&D(f,"fill",b),e[1].notes?C?C.p(e,t):(C=It(e),C.c(),C.m(n,null)):C&&(C.d(1),C=null)},i:e,o:e,d(e){e&&O(n),C&&C.d(),x=!1,o($)}}}function Dt(e,t,n){const r=oe();let{theme:i}=t,{item:o}=t,{isSelected:s}=t;return e.$$set=e=>{"theme"in e&&n(0,i=e.theme),"item"in e&&n(1,o=e.item),"isSelected"in e&&n(2,s=e.isSelected)},[i,o,s,r,function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},function(t){le.call(this,e,t)},e=>r("itemMouseDown",{source:o,rawEvent:e}),e=>r("itemMouseUp",{source:o,rawEvent:e}),e=>r("itemMouseDown",{source:o,rawEvent:e}),e=>r("itemMouseUp",{source:o,rawEvent:e}),e=>r("itemMouseDown",{source:o,rawEvent:e,from:{x:e.clientX,y:e.clientY}}),e=>r("itemMouseUp",{source:o,rawEvent:e})]}class Lt extends He{constructor(e){super(),qe(this,e,Dt,Rt,a,{theme:0,item:1,isSelected:2})}}function zt(e,t=!!function(e){try{if("undefined"!=typeof window&&void 0!==window.localStorage)return window.localStorage[e]}catch(e){}}("debug")){if(t){const t=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Vt[Math.abs(t)%Vt.length]}(e);return function(...n){console.log(`%c${e}`,`color:${t}`,...n)}}return Bt}function Bt(){}const Vt=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"];function Ft(e,{delay:n=0,duration:r=400,easing:i=t}={}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:i,css:e=>"opacity: "+e*o}}const{window:qt}=je;function Ht(e){let t,n,r,i,a,l,c,u,h,d,f,p,m,v,y,w,b,x=e[1].closeButton&&Wt(e);var $=e[2];return $&&(l=new $({})),{c(){t=A("div"),n=A("div"),r=A("div"),x&&x.c(),i=T(),a=A("div"),l&&Be(l.$$.fragment),D(a,"class",c=g(e[1].classContent)+" svelte-g4wg3a"),D(a,"style",e[9]),U(a,"content",!e[0]),D(r,"class",u=g(e[1].classWindow)+" svelte-g4wg3a"),D(r,"role","dialog"),D(r,"aria-modal","true"),D(r,"aria-label",h=e[1].ariaLabelledBy?null:e[1].ariaLabel||null),D(r,"aria-labelledby",d=e[1].ariaLabelledBy||null),D(r,"style",e[8]),U(r,"window",!e[0]),D(n,"class",p=g(e[1].classWindowWrap)+" svelte-g4wg3a"),D(n,"style",e[7]),U(n,"wrap",!e[0]),D(t,"class",m=g(e[1].classBg)+" svelte-g4wg3a"),D(t,"style",e[6]),U(t,"bg",!e[0])},m(o,c){_(o,t,c),k(t,n),k(n,r),x&&x.m(r,null),k(r,i),k(r,a),l&&Ve(l,a,null),e[49](r),e[50](n),e[51](t),y=!0,w||(b=[N(r,"introstart",(function(){s(e[13])&&e[13].apply(this,arguments)})),N(r,"outrostart",(function(){s(e[14])&&e[14].apply(this,arguments)})),N(r,"introend",(function(){s(e[15])&&e[15].apply(this,arguments)})),N(r,"outroend",(function(){s(e[16])&&e[16].apply(this,arguments)})),N(t,"mousedown",e[20]),N(t,"mouseup",e[21])],w=!0)},p(o,s){if((e=o)[1].closeButton?x?(x.p(e,s),2&s[0]&&Ae(x,1)):(x=Wt(e),x.c(),Ae(x,1),x.m(r,i)):x&&(Oe(),Me(x,1,1,(()=>{x=null})),Ee()),$!==($=e[2])){if(l){Oe();const e=l;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}$?(l=new $({}),Be(l.$$.fragment),Ae(l.$$.fragment,1),Ve(l,a,null)):l=null}(!y||2&s[0]&&c!==(c=g(e[1].classContent)+" svelte-g4wg3a"))&&D(a,"class",c),(!y||512&s[0])&&D(a,"style",e[9]),3&s[0]&&U(a,"content",!e[0]),(!y||2&s[0]&&u!==(u=g(e[1].classWindow)+" svelte-g4wg3a"))&&D(r,"class",u),(!y||2&s[0]&&h!==(h=e[1].ariaLabelledBy?null:e[1].ariaLabel||null))&&D(r,"aria-label",h),(!y||2&s[0]&&d!==(d=e[1].ariaLabelledBy||null))&&D(r,"aria-labelledby",d),(!y||256&s[0])&&D(r,"style",e[8]),3&s[0]&&U(r,"window",!e[0]),(!y||2&s[0]&&p!==(p=g(e[1].classWindowWrap)+" svelte-g4wg3a"))&&D(n,"class",p),(!y||128&s[0])&&D(n,"style",e[7]),3&s[0]&&U(n,"wrap",!e[0]),(!y||2&s[0]&&m!==(m=g(e[1].classBg)+" svelte-g4wg3a"))&&D(t,"class",m),(!y||64&s[0])&&D(t,"style",e[6]),3&s[0]&&U(t,"bg",!e[0])},i(n){y||(Ae(x),l&&Ae(l.$$.fragment,n),ve((()=>{f||(f=Te(r,e[12],e[1].transitionWindowProps,!0)),f.run(1)})),ve((()=>{v||(v=Te(t,e[11],e[1].transitionBgProps,!0)),v.run(1)})),y=!0)},o(n){Me(x),l&&Me(l.$$.fragment,n),f||(f=Te(r,e[12],e[1].transitionWindowProps,!1)),f.run(0),v||(v=Te(t,e[11],e[1].transitionBgProps,!1)),v.run(0),y=!1},d(n){n&&O(t),x&&x.d(),l&&Fe(l),e[49](null),n&&f&&f.end(),e[50](null),e[51](null),n&&v&&v.end(),w=!1,o(b)}}}function Wt(e){let t,n,r,i,o;const s=[Jt,Ut],a=[];function l(e,n){return 2&n[0]&&(t=null),null==t&&(t=!!e[17](e[1].closeButton)),t?0:1}return n=l(e,[-1,-1,-1]),r=a[n]=s[n](e),{c(){r.c(),i=j()},m(e,t){a[n].m(e,t),_(e,i,t),o=!0},p(e,t){let o=n;n=l(e,t),n===o?a[n].p(e,t):(Oe(),Me(a[o],1,1,(()=>{a[o]=null})),Ee(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),Ae(r,1),r.m(i.parentNode,i))},i(e){o||(Ae(r),o=!0)},o(e){Me(r),o=!1},d(e){a[n].d(e),e&&O(i)}}}function Ut(t){let n,r,i,o;return{c(){n=A("button"),D(n,"class",r=g(t[1].classCloseButton)+" svelte-g4wg3a"),D(n,"aria-label","Close modal"),D(n,"style",t[10]),U(n,"close",!t[0])},m(e,r){_(e,n,r),i||(o=N(n,"click",t[18]),i=!0)},p(e,t){2&t[0]&&r!==(r=g(e[1].classCloseButton)+" svelte-g4wg3a")&&D(n,"class",r),1024&t[0]&&D(n,"style",e[10]),3&t[0]&&U(n,"close",!e[0])},i:e,o:e,d(e){e&&O(n),i=!1,o()}}}function Jt(e){let t,n,r;var i=e[1].closeButton;function o(e){return{props:{onClose:e[18]}}}return i&&(t=new i(o(e))),{c(){t&&Be(t.$$.fragment),n=j()},m(e,i){t&&Ve(t,e,i),_(e,n,i),r=!0},p(e,r){if(i!==(i=e[1].closeButton)){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}i?(t=new i(o(e)),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,n.parentNode,n)):t=null}},i(e){r||(t&&Ae(t.$$.fragment,e),r=!0)},o(e){t&&Me(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&Fe(t,e)}}}function Kt(e){let t,n,r,i,o=e[2]&&Ht(e);const s=e[48].default,a=h(s,e,e[47],null);return{c(){o&&o.c(),t=T(),a&&a.c()},m(s,l){o&&o.m(s,l),_(s,t,l),a&&a.m(s,l),n=!0,r||(i=N(qt,"keydown",e[19]),r=!0)},p(e,r){e[2]?o?(o.p(e,r),4&r[0]&&Ae(o,1)):(o=Ht(e),o.c(),Ae(o,1),o.m(t.parentNode,t)):o&&(Oe(),Me(o,1,1,(()=>{o=null})),Ee()),a&&a.p&&(!n||65536&r[1])&&p(a,s,e,e[47],n?f(s,e[47],r,null):m(e[47]),null)},i(e){n||(Ae(o),Ae(a,e),n=!0)},o(e){Me(o),Me(a,e),n=!1},d(e){o&&o.d(e),e&&O(t),a&&a.d(e),r=!1,i()}}}function Gt(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=oe(),s=se,a=e=>e.tabIndex>=0&&!e.hidden&&!e.disabled&&"none"!==e.style.display&&"hidden"!==e.type&&Boolean(e.offsetWidth||e.offsetHeight||e.getClientRects().length);let{isTabbable:l=a}=t,{show:c=null}=t,{key:u="simple-modal"}=t,{ariaLabel:h=null}=t,{ariaLabelledBy:d=null}=t,{closeButton:f=!0}=t,{closeOnEsc:p=!0}=t,{closeOnOuterClick:m=!0}=t,{styleBg:g={}}=t,{styleWindowWrap:v={}}=t,{styleWindow:y={}}=t,{styleContent:w={}}=t,{styleCloseButton:b={}}=t,{classBg:x=null}=t,{classWindowWrap:$=null}=t,{classWindow:k=null}=t,{classContent:S=null}=t,{classCloseButton:C=null}=t,{unstyled:_=!1}=t,{setContext:O=s}=t,{transitionBg:E=Ft}=t,{transitionBgProps:A={duration:250}}=t,{transitionWindow:M=E}=t,{transitionWindowProps:P=A}=t,{disableFocusTrap:T=!1}=t;const j={ariaLabel:h,ariaLabelledBy:d,closeButton:f,closeOnEsc:p,closeOnOuterClick:m,styleBg:g,styleWindowWrap:v,styleWindow:y,styleContent:w,styleCloseButton:b,classBg:x,classWindowWrap:$,classWindow:k,classContent:S,classCloseButton:C,transitionBg:E,transitionBgProps:A,transitionWindow:M,transitionWindowProps:P,disableFocusTrap:T,isTabbable:l,unstyled:_};let N,I,R,D,L,z,B,V,F,q,H,W,U,J,K,G={...j},Q=null;const X=e=>e?Object.keys(e).reduce(((t,n)=>`${t}; ${(e=>e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${e[n]}`),""):"",Y=e=>!!(e&&e.constructor&&e.call&&e.apply),Z=()=>{};let ee=Z,te=Z,ne=Z,ae=Z;const le=(e,t={},r={},i={})=>{n(2,Q=function(e,t={}){return function(n){return new e({...n,props:{...t,...n.props}})}}(e,t)),n(1,G={...j,...r}),n(6,L=X(Object.assign({},{width:window.innerWidth,height:window.innerHeight},G.styleBg))),n(7,z=X(G.styleWindowWrap)),n(8,B=X(G.styleWindow)),n(9,V=X(G.styleContent)),n(10,F=X(G.styleCloseButton)),n(11,q=G.transitionBg),n(12,H=G.transitionWindow),he(),n(13,ee=e=>{i.onOpen&&i.onOpen(e),o("open"),o("opening")}),n(14,te=e=>{i.onClose&&i.onClose(e),o("close"),o("closing")}),n(15,ne=e=>{i.onOpened&&i.onOpened(e),o("opened")}),n(16,ae=e=>{i.onClosed&&i.onClosed(e),o("closed")})},ce=(e={})=>{Q&&(n(14,te=e.onClose||te),n(16,ae=e.onClosed||ae),n(2,Q=null),de())},he=()=>{D=window.scrollY,W=document.body.style.position,U=document.body.style.overflow,J=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${D}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},de=()=>{document.body.style.position=W||"",document.body.style.top="",document.body.style.overflow=U||"",document.body.style.width=J||"",window.scrollTo(0,D)};O(u,{open:le,close:ce});let fe=!1;return ie((()=>{fe&&ce()})),re((()=>{n(46,fe=!0)})),e.$$set=e=>{"isTabbable"in e&&n(22,l=e.isTabbable),"show"in e&&n(23,c=e.show),"key"in e&&n(24,u=e.key),"ariaLabel"in e&&n(25,h=e.ariaLabel),"ariaLabelledBy"in e&&n(26,d=e.ariaLabelledBy),"closeButton"in e&&n(27,f=e.closeButton),"closeOnEsc"in e&&n(28,p=e.closeOnEsc),"closeOnOuterClick"in e&&n(29,m=e.closeOnOuterClick),"styleBg"in e&&n(30,g=e.styleBg),"styleWindowWrap"in e&&n(31,v=e.styleWindowWrap),"styleWindow"in e&&n(32,y=e.styleWindow),"styleContent"in e&&n(33,w=e.styleContent),"styleCloseButton"in e&&n(34,b=e.styleCloseButton),"classBg"in e&&n(35,x=e.classBg),"classWindowWrap"in e&&n(36,$=e.classWindowWrap),"classWindow"in e&&n(37,k=e.classWindow),"classContent"in e&&n(38,S=e.classContent),"classCloseButton"in e&&n(39,C=e.classCloseButton),"unstyled"in e&&n(0,_=e.unstyled),"setContext"in e&&n(40,O=e.setContext),"transitionBg"in e&&n(41,E=e.transitionBg),"transitionBgProps"in e&&n(42,A=e.transitionBgProps),"transitionWindow"in e&&n(43,M=e.transitionWindow),"transitionWindowProps"in e&&n(44,P=e.transitionWindowProps),"disableFocusTrap"in e&&n(45,T=e.disableFocusTrap),"$$scope"in e&&n(47,i=e.$$scope)},e.$$.update=()=>{8388608&e.$$.dirty[0]|32768&e.$$.dirty[1]&&fe&&(Y(c)?le(c):ce())},[_,G,Q,N,I,R,L,z,B,V,F,q,H,ee,te,ne,ae,Y,ce,e=>{if(G.closeOnEsc&&Q&&"Escape"===e.key&&(e.preventDefault(),ce()),Q&&"Tab"===e.key&&!G.disableFocusTrap){const t=R.querySelectorAll("*"),n=Array.from(t).filter(G.isTabbable).sort(((e,t)=>e.tabIndex-t.tabIndex));let r=n.indexOf(document.activeElement);-1===r&&e.shiftKey&&(r=0),r+=n.length+(e.shiftKey?-1:1),r%=n.length,n[r].focus(),e.preventDefault()}},e=>{!G.closeOnOuterClick||e.target!==N&&e.target!==I||(K=e.target)},e=>{G.closeOnOuterClick&&e.target===K&&(e.preventDefault(),ce())},l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,k,S,C,O,E,A,M,P,T,fe,i,r,function(e){ue[e?"unshift":"push"]((()=>{R=e,n(5,R)}))},function(e){ue[e?"unshift":"push"]((()=>{I=e,n(4,I)}))},function(e){ue[e?"unshift":"push"]((()=>{N=e,n(3,N)}))}]}class Qt extends He{constructor(e){super(),qe(this,e,Gt,Kt,a,{isTabbable:22,show:23,key:24,ariaLabel:25,ariaLabelledBy:26,closeButton:27,closeOnEsc:28,closeOnOuterClick:29,styleBg:30,styleWindowWrap:31,styleWindow:32,styleContent:33,styleCloseButton:34,classBg:35,classWindowWrap:36,classWindow:37,classContent:38,classCloseButton:39,unstyled:0,setContext:40,transitionBg:41,transitionBgProps:42,transitionWindow:43,transitionWindowProps:44,disableFocusTrap:45},null,[-1,-1,-1])}}const Xt={TREE:"tree",CODE:"code"},Yt=Symbol("id"),Zt=Symbol("expanded"),en=Symbol("visible sections"),tn=Symbol("keys"),nn=Symbol("search:property"),rn=Symbol("search:value"),on=Symbol("enforce string"),sn=Symbol("selection"),an=Symbol("validation:error"),ln=1e3,cn=100,un=[{start:0,end:cn}],hn=104857600,dn=1048576,fn=10485760,pn={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},mn={...pn,classWindow:"jse-modal-window jse-modal-window-sort"},gn={...pn,classWindow:"jse-modal-window jse-modal-window-transform"},vn="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",yn="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",wn="hover-insert-inside",bn="hover-insert-after",xn="hover-collection",$n="valid",kn="repairable",Sn="invalid",Cn=336,_n=260,On="NO",En="SELF",An="NEXT_INSIDE";let Mn=0;function Pn(){return Mn++,Mn}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Tn(e){var t={exports:{}};return e(t,t.exports),t.exports}function jn(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var Nn=Tn((function(e,t){!function(e){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){return JSON.stringify(e)===JSON.stringify(t)}function r(e,t){return e===t}function i(e){return e.slice(0,e.length-1)}function o(e){return e[e.length-1]}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;if(e.length<t.length)return!1;for(var i=0;i<t.length;i++)if(!n(e[i],t[i]))return!1;return!0}function a(e){return"object"===t(e)&&null!==e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e){if(Array.isArray(e)){var t=e.slice();return Object.getOwnPropertySymbols(e).forEach((function(n){t[n]=e[n]})),t}if("object"===h(e)){var n=c({},e);return Object.getOwnPropertySymbols(e).forEach((function(t){n[t]=e[t]})),n}return e}function f(e,t,n){if(e[t]===n)return e;var r=d(e);return r[t]=n,r}function p(e,t){for(var n=e,r=0;r<t.length;)n=a(n)?n[t[r]]:void 0,r++;return n}function m(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===t.length)return n;var i=t[0],o=m(e?e[i]:void 0,t.slice(1),n,r);if(!a(e)){if(r){var s="number"==typeof i?[]:{};return s[i]=o,s}throw new Error("Path does not exist")}return f(e,i,o)}function g(e,t,n){if(0===t.length)return n(e);if(!a(e))throw new Error("Path doesn't exist");var r=t[0];return f(e,r,g(e[r],t.slice(1),n))}function v(e,t){if(0===t.length)return e;if(!a(e))throw new Error("Path does not exist");if(1===t.length){var n=t[0];if(n in e){var r=d(e);return Array.isArray(r)?r.splice(n,1):delete r[n],r}return e}var i=t[0];return f(e,i,v(e[i],t.slice(1)))}function y(e,t,n){var r=t.slice(0,t.length-1),i=t[t.length-1];return g(e,r,(function(e){if(!Array.isArray(e))throw new TypeError("Array expected at path "+JSON.stringify(r));var t=d(e);return t.splice(i,0,n),t}))}function w(e,t){return void 0!==e&&(0===t.length||w(e[t[0]],t.slice(1)))}function b(e){var t=e.split("/");return t.shift(),t.map((function(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}))}function x(e){return e.map((function(e){return"/"+String(e).replace(/~/g,"~0").replace(/\//g,"~1")})).join("")}function $(e,t,n){for(var r=e,i=0;i<t.length;i++){T(t[i]);var o=j(r,t[i]);if(n&&n.before){var s=n.before(r,o);void 0!==s&&(void 0!==s.json&&(r=s.json),void 0!==s.operation&&(o=s.operation))}var a=r,l=k[o.op];if(l)r=l(r,o);else{if("test"!==o.op)throw new Error("Unknown JSONPatch operation "+JSON.stringify(o.op));A(r,o)}if(n&&n.after){var c=n.after(r,o,a);void 0!==c&&(r=c)}}return r}var k={add:_,remove:C,replace:S,copy:O,move:E};function S(e,t){return m(e,t.path,t.value)}function C(e,t){return v(e,t.path)}function _(e,t){var n=t.path,r=t.value;return M(e,n)?y(e,n,r):m(e,n,r)}function O(e,t){var n=t.path,r=t.from,i=p(e,r);return M(e,n)?y(e,n,i):m(e,n,p(e,r))}function E(e,t){var n=t.path,r=t.from,i=p(e,r),o=v(e,r);return M(o,n)?y(o,n,i):m(o,n,i)}function A(e,t){var r=t.path,i=t.value;if(void 0===i)throw new Error('Test failed: no value provided (path: "'.concat(x(r),'")'));if(!w(e,r))throw new Error('Test failed: path not found (path: "'.concat(x(r),'")'));if(!n(p(e,r),i))throw new Error('Test failed, value differs (path: "'.concat(x(r),'")'))}function M(e,t){if(0===t.length)return!1;var n=p(e,i(t));return Array.isArray(n)}function P(e,t){if("-"!==o(t))return t;var n=i(t),r=p(e,n);return n.concat(r.length)}function T(e){if(!["add","remove","replace","copy","move","test"].includes(e.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(e.op));if("string"!=typeof e.path)throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(e));if(("copy"===e.op||"move"===e.op)&&"string"!=typeof e.from)throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(e))}function j(e,t){return{op:t.op,path:P(e,b(t.path)),from:void 0!==t.from?b(t.from):null,value:t.value}}function N(e,t){var n=[];return $(e,t,{before:function(e,t){var r=I[t.op];r&&(n=r(e,t).concat(n))}}),n}var I={add:L,remove:D,replace:R,copy:z,move:B};function R(e,t){var n=t.path;return[{op:"replace",path:x(n),value:p(e,n)}]}function D(e,t){var n=t.path;return[{op:"add",path:x(n),value:p(e,n)}]}function L(e,t){var n=t.path,r=t.value;return M(e,n)||!w(e,n)?[{op:"remove",path:x(n)}]:R(e,{path:n,value:r})}function z(e,t){return L(e,{path:t.path,value:t.value})}function B(e,t){var n=t.path,r=t.from;if(n.length<r.length&&s(r,n))return[{op:"replace",path:x(n),value:e}];var i=[{op:"move",from:x(n),path:x(r)}];return!M(e,n)&&w(e,n)&&(i=i.concat(D(e,{path:n}))),i}e.compileJSONPointer=x,e.deleteIn=v,e.existsIn=w,e.getIn=p,e.immutableJSONPatch=$,e.insertAt=y,e.parseJSONPointer=b,e.revertJSONPatch=N,e.setIn=m,e.updateIn=g,Object.defineProperty(e,"__esModule",{value:!0})}(t)})),In={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},Rn="a".charCodeAt();var Dn=/~/g,Ln=/\//g;function zn(e){return e.replace(Dn,"~0").replace(Ln,"~1")}var Bn=function(e,t,n){var r={},i=0,o=0,s=0,a=n&&n.bigint&&"undefined"!=typeof BigInt;return{data:l("",!0),pointers:r};function l(t,n){var r;c(),g(t,"value");var i=d();switch(i){case"t":h("rue"),r=!0;break;case"f":h("alse"),r=!1;break;case"n":h("ull"),r=null;break;case'"':r=u();break;case"[":r=function(e){c();var t=[],n=0;if("]"==d())return t;f();for(;;){var r=e+"/"+n;t.push(l(r)),c();var i=d();if("]"==i)break;","!=i&&b(),c(),n++}return t}(t);break;case"{":r=function(e){c();var t={};if("}"==d())return t;f();for(;;){var n=y();'"'!=d()&&b();var r=u(),i=e+"/"+zn(r);v(i,"key",n),g(i,"keyEnd"),c(),":"!=d()&&b(),c(),t[r]=l(i),c();var o=d();if("}"==o)break;","!=o&&b(),c()}return t}(t);break;default:f(),"-0123456789".indexOf(i)>=0?r=function(){var t="",n=!0;"-"==e[s]&&(t+=d());t+="0"==e[s]?d():m(),"."==e[s]&&(t+=d()+m(),n=!1);"e"!=e[s]&&"E"!=e[s]||(t+=d(),"+"!=e[s]&&"-"!=e[s]||(t+=d()),t+=m(),n=!1);var r=+t;return a&&n&&(r>Number.MAX_SAFE_INTEGER||r<Number.MIN_SAFE_INTEGER)?BigInt(t):r}():w()}return g(t,"valueEnd"),c(),n&&s<e.length&&w(),r}function c(){e:for(;s<e.length;){switch(e[s]){case" ":o++;break;case"\t":o+=4;break;case"\r":o=0;break;case"\n":o=0,i++;break;default:break e}s++}}function u(){for(var e,t="";'"'!=(e=d());)"\\"==e?(e=d())in In?t+=In[e]:"u"==e?t+=p():b():t+=e;return t}function h(e){for(var t=0;t<e.length;t++)d()!==e[t]&&b()}function d(){x();var t=e[s];return s++,o++,t}function f(){s--,o--}function p(){for(var e=4,t=0;e--;){t<<=4;var n=d().toLowerCase();n>="a"&&n<="f"?t+=n.charCodeAt()-Rn+10:n>="0"&&n<="9"?t+=+n:b()}return String.fromCharCode(t)}function m(){for(var t="";e[s]>="0"&&e[s]<="9";)t+=d();if(t.length)return t;x(),w()}function g(e,t){v(e,t,y())}function v(e,t,n){r[e]=r[e]||{},r[e][t]=n}function y(){return{line:i,column:o,pos:s}}function w(){throw new SyntaxError("Unexpected token "+e[s]+" in JSON at position "+s)}function b(){f(),w()}function x(){if(s>=e.length)throw new SyntaxError("Unexpected end of JSON input")}},Vn=Tn((function(e,t){e.exports=function(){function e(t,n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.message=t+" (char "+n+")",this.char=n,this.stack=(new Error).stack}(e.prototype=new Error).constructor=Error;var t={"'":!0,"‘":!0,"’":!0,"`":!0,"´":!0},n={'"':!0,"“":!0,"”":!0};function r(e){return i.test(e)}var i=/^[a-zA-Z_]$/,o=/^[0-9a-fA-F]$/;function s(e){return a.test(e)}var a=/^[0-9]$/;function l(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function c(e){return" "===e||" "<=e&&e<=" "||" "===e||" "===e||"　"===e}function u(e){return!0===t[e]}function h(e){return!0===n[e]}function d(e){return!0===t[e]?"'":!0===n[e]?'"':e}function f(e,t){return-1!==(t=e.lastIndexOf(t))?e.substring(0,t)+e.substring(t+1):e}function p(e,t){var n=e.length;if(!l(e[n-1]))return e+t;for(;l(e[n-1]);)n--;return e.substring(0,n)+t+e.substring(n)}var m=0,g=1,v=2,y=3,w=4,b=5,x=6,$={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},S={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},C={null:"null",true:"true",false:"false"},_={None:"null",True:"true",False:"false"},O="",E="",A=0,M="",P="",T=x;function j(){A++,M=O.charAt(A)}function N(){j(),"\\"===M&&j()}function I(){return T===m&&("["===P||"{"===P)||T===v||T===g||T===y}function R(){E+=P,T=x,P="",$[M]?(T=m,P=M,j()):function(){if(s(M)||"-"===M){if(T=g,"-"===M){if(P+=M,j(),!s(M))throw new e("Invalid number, digit expected",A)}else"0"===M&&(P+=M,j());for(;s(M);)P+=M,j();if("."===M){if(P+=M,j(),!s(M))throw new e("Invalid number, digit expected",A);for(;s(M);)P+=M,j()}if("e"===M||"E"===M){if(P+=M,j(),"+"!==M&&"-"!==M||(P+=M,j()),!s(M))throw new e("Invalid number, digit expected",A);for(;s(M);)P+=M,j()}}else"\\"===M&&'"'===O.charAt(A+1)?(j(),L(N)):L(j)}(),T===w&&(P=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=c(r)?" ":r}return t}(P),R()),T===b&&(T=x,P="",R())}function D(){","===P&&(P="",T=x,R())}function L(i){if(!0===t[a=M]||!0===n[a]){var a=d(M),f=u(M)?u:h;for(P+='"',T=v,i();""!==M&&!f(M);)if("\\"===M)if(i(),void 0!==k[M])P+="\\"+M,i();else if("u"===M){P+="\\u",i();for(var p=0;p<4;p++){if(m=M,!o.test(m))throw new e("Invalid unicode character",A-P.length);P+=M,i()}}else{if("'"!==M)throw new e('Invalid escape character "\\'+M+'"',A);P+="'",i()}else S[M]?P+=S[M]:P+='"'===M?'\\"':M,i();if(d(M)!==a)throw new e("End of string expected",A-P.length);return P+='"',void i()}var m;!function(){if(r(M))for(T=y;r(M)||s(M)||"$"===M;)P+=M,j();else!function(){if(l(M)||c(M))for(T=w;l(M)||c(M);)P+=M,j();else!function(){if("/"!==M||"*"!==O[A+1])if("/"!==M||"/"!==O[A+1])!function(){for(T=x;""!==M;)P+=M,j();throw new e('Syntax error in part "'+P+'"',A-P.length)}();else for(T=b;""!==M&&"\n"!==M;)P+=M,j();else{for(T=b;""!==M&&("*"!==M||"*"===M&&"/"!==O[A+1]);)P+=M,j();"*"===M&&"/"===O[A+1]&&(P+=M,j(),P+=M,j())}}()}()}()}function z(){if(T!==m||"{"!==P)!function(){if(T!==m||"["!==P)!function(){if(T!==v)(T!==g?function(){if(T!==y)!function(){throw new e(""===P?"Unexpected end of json string":"Value expected",A-P.length)}();else if(C[P])R();else{if(_[P])return P=_[P],R();var t=P,n=E.length;if(P="",R(),T===m&&"("===P)return P="",R(),z(),T===m&&")"===P&&(P="",R(),T===m&&";"===P&&(P="",R()));for(E=function(e,t,n){return e.substring(0,n)+t+e.substring(n)}(E,'"'.concat(t),n);T===y||T===g;)R();E+='"'}}:R)();else for(R();T===m&&"+"===P;){var t;P="",R(),T===v&&(t=E.lastIndexOf('"'),E=E.substring(0,t)+P.substring(1),P="",R())}}();else if(R(),T!==m||"]"!==P){for(;;)if(z(),T===m&&","===P){if(R(),T===m&&"]"===P){E=f(E,",");break}if(""===P){E=f(E,",");break}}else{if(!I())break;E=p(E,",")}T===m&&"]"===P?R():E=p(E,"]")}else R()}();else if(R(),T!==m||"}"!==P){for(;;){if(T!==y&&T!==g||(T=v,P='"'.concat(P,'"')),T!==v)throw new e("Object key expected",A-P.length);if(R(),T===m&&":"===P)R();else{if(!I())throw new e("Colon expected",A-P.length);E=p(E,":")}if(z(),T===m&&","===P){if(R(),T===m&&"}"===P){E=f(E,",");break}if(""===P){E=f(E,",");break}}else{if(T!==v&&T!==g&&T!==y)break;E=p(E,",")}}T===m&&"}"===P?R():E=p(E,"}")}else R()}return function(t){E="",A=0,M=(O=t).charAt(0),P="",T=x,R();var n=T;if(z(),D(),""===P)return E;if(n===T&&I()){for(var r="";n===T&&I();)r+=E=p(E,","),E="",z(),D();return"[\n".concat(r).concat(E,"\n]")}throw new e("Unexpected characters",A-P.length)}}()}));function Fn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function qn(e){return"object"==typeof e&&null!==e}function Hn(e){const t=window.document.createElement("div");return t.style.color=e,t.style.color.split(/\s+/).join("").toLowerCase()||null}function Wn(e){return null===e?"null":void 0===e?"undefined":"number"==typeof e?"number":"string"==typeof e?"string":"boolean"==typeof e?"boolean":e instanceof RegExp?"regexp":Array.isArray(e)?"array":"object"}const Un=/^https?:\/\/\S+$/;function Jn(e){return"string"==typeof e&&Un.test(e)}function Kn(e){if(""===e)return"";if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);return isNaN(t)||isNaN(parseFloat(e))?e:t}function Gn(e){return"string"==typeof e&&"string"!=typeof Kn(e)}const Qn=[];function Xn(e,t=!1){const n={};if(!Array.isArray(e))throw new TypeError("Array expected");function r(e,i){(!Array.isArray(e)&&!Fn(e)||t&&i.length>0)&&(n[Nn.compileJSONPointer(i)]=!0),Fn(e)&&Object.keys(e).forEach((t=>{r(e[t],i.concat(t))}))}const i=Math.min(e.length,1e4);for(let t=0;t<i;t++){r(e[t],Qn)}return Object.keys(n).sort().map(Nn.parseJSONPointer)}function Yn(e,t,n){if(!(t<=e))for(let r=e;r<t;r++)n(r)}function Zn(e,t){return e.length>t?e.slice(0,t):e}function er(e){return{...e}}function tr(e){return Object.values(e)}function nr(e){try{return JSON.parse(e)}catch(t){return JSON.parse(Vn(e))}}function rr(e){try{return nr(e)}catch(e){return}}function ir(e,t=JSON.parse){e=e.replace(sr,"");try{return t(e)}catch(e){}try{return t("["+e+"]")}catch(e){}try{return t("{"+e+"}")}catch(e){}throw new Error("Failed to parse partial JSON")}function or(e){e=e.replace(sr,"");try{return Vn(e)}catch(e){}try{const t=Vn("["+e+"]");return t.substring(1,t.length-1)}catch(e){}try{const t=Vn("{"+e+"}");return t.substring(1,t.length-1)}catch(e){}throw new Error("Failed to repair partial JSON")}const sr=/,\s*$/;function ar(e,t){const n=hr.exec(t);if(n){const r=parseInt(n[2],10),i=function(e,t,n=0,r=e.length){let i=0;for(let o=n;o<r;o++)e.charAt(o)===t&&i++;return i}(e,"\n",0,r),o=r-e.lastIndexOf("\n",r)-1;return{position:r,line:i,column:o,message:t.replace(hr,(()=>`line ${i+1} column ${o+1}`))}}{const n=dr.exec(t),r=n?parseInt(n[1],10):null,i=null!==r?r-1:null,o=fr.exec(t),s=o?parseInt(o[1],10):null,a=null!==s?s-1:null,l=null!==i&&null!==a?function(e,t,n){let r=e.indexOf("\n"),i=1;for(;i<t&&-1!==r;)r=e.indexOf("\n",r+1),i++;return-1!==r?r+n+1:null}(e,i,a):null;return{position:l,line:i,column:a,message:t.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function lr(e){return Fn(e)?void 0!==e.json?void 0!==e.text?'Content must contain either a property "json" or a property "text" but not both':null:void 0===e.text?'Content must contain either a property "json" or a property "text"':"string"!=typeof e.text?'Content "text" property must be string':null:"Content must be an object"}function cr(e){return"string"==typeof e.text}function ur(e,t){return function(e,t=1/0){if(cr(e))return e.text.length;const n=e.json;let r=0;function i(e){if(Array.isArray(e)){if(r+=e.length-1+2,r>t)return r;for(let n=0;n<e.length;n++){if(i(e[n]),r>t)return r}}else if(Fn(e)){const t=Object.keys(e);r+=2+t.length+(t.length-1);for(let n=0;n<t.length;n++){const o=t[n],s=e[o];r+=o.length+2,i(s)}}else r+="string"==typeof e?e.length+2:String(e).length}return i(n),r}(e,t)>t}const hr=/(position|char) (\d+)/,dr=/line (\d+)/,fr=/column (\d+)/;var pr="object"==typeof global&&global&&global.Object===Object&&global,mr="object"==typeof self&&self&&self.Object===Object&&self,gr=pr||mr||Function("return this")(),vr=gr.Symbol,yr=Object.prototype,wr=yr.hasOwnProperty,br=yr.toString,xr=vr?vr.toStringTag:void 0;var $r=Object.prototype.toString;var kr=vr?vr.toStringTag:void 0;function Sr(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":kr&&kr in Object(e)?function(e){var t=wr.call(e,xr),n=e[xr];try{e[xr]=void 0;var r=!0}catch(e){}var i=br.call(e);return r&&(t?e[xr]=n:delete e[xr]),i}(e):function(e){return $r.call(e)}(e)}function Cr(e){return null!=e&&"object"==typeof e}function _r(e){return"symbol"==typeof e||Cr(e)&&"[object Symbol]"==Sr(e)}function Or(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Er=Array.isArray,Ar=vr?vr.prototype:void 0,Mr=Ar?Ar.toString:void 0;function Pr(e){if("string"==typeof e)return e;if(Er(e))return Or(e,Pr)+"";if(_r(e))return Mr?Mr.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var Tr=/\s/;var jr=/^\s+/;function Nr(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Tr.test(e.charAt(t)););return t}(e)+1).replace(jr,""):e}function Ir(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Rr=/^[-+]0x[0-9a-f]+$/i,Dr=/^0b[01]+$/i,Lr=/^0o[0-7]+$/i,zr=parseInt;function Br(e){if("number"==typeof e)return e;if(_r(e))return NaN;if(Ir(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ir(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Nr(e);var n=Dr.test(e);return n||Lr.test(e)?zr(e.slice(2),n?2:8):Rr.test(e)?NaN:+e}var Vr=1/0;function Fr(e){return e?(e=Br(e))===Vr||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function qr(e){return e}function Hr(e){if(!Ir(e))return!1;var t=Sr(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Wr,Ur=gr["__core-js_shared__"],Jr=(Wr=/[^.]+$/.exec(Ur&&Ur.keys&&Ur.keys.IE_PROTO||""))?"Symbol(src)_1."+Wr:"";var Kr=Function.prototype.toString;function Gr(e){if(null!=e){try{return Kr.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var Qr=/^\[object .+?Constructor\]$/,Xr=Function.prototype,Yr=Object.prototype,Zr=Xr.toString,ei=Yr.hasOwnProperty,ti=RegExp("^"+Zr.call(ei).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ni(e){return!(!Ir(e)||(t=e,Jr&&Jr in t))&&(Hr(e)?ti:Qr).test(Gr(e));var t}function ri(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ni(n)?n:void 0}var ii=ri(gr,"WeakMap"),oi=Object.create,si=function(){function e(){}return function(t){if(!Ir(t))return{};if(oi)return oi(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ai(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function li(){}var ci=Date.now;var ui,hi,di,fi=function(){try{var e=ri(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),pi=fi,mi=pi?function(e,t){return pi(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:qr,gi=(ui=mi,hi=0,di=0,function(){var e=ci(),t=16-(e-di);if(di=e,t>0){if(++hi>=800)return arguments[0]}else hi=0;return ui.apply(void 0,arguments)}),vi=gi;var yi=/^(?:0|[1-9]\d*)$/;function wi(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&yi.test(e))&&e>-1&&e%1==0&&e<t}function bi(e,t,n){"__proto__"==t&&pi?pi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function xi(e,t){return e===t||e!=e&&t!=t}var $i=Object.prototype.hasOwnProperty;function ki(e,t,n){var r=e[t];$i.call(e,t)&&xi(r,n)&&(void 0!==n||t in e)||bi(e,t,n)}function Si(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=r?r(n[a],e[a],a,n,e):void 0;void 0===l&&(l=e[a]),i?bi(n,a,l):ki(n,a,l)}return n}var Ci=Math.max;function _i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Oi(e){return null!=e&&_i(e.length)&&!Hr(e)}function Ei(e,t,n){if(!Ir(n))return!1;var r=typeof t;return!!("number"==r?Oi(n)&&wi(t,n.length):"string"==r&&t in n)&&xi(n[t],e)}var Ai=Object.prototype;function Mi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ai)}function Pi(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Ti(e){return Cr(e)&&"[object Arguments]"==Sr(e)}var ji=Object.prototype,Ni=ji.hasOwnProperty,Ii=ji.propertyIsEnumerable,Ri=Ti(function(){return arguments}())?Ti:function(e){return Cr(e)&&Ni.call(e,"callee")&&!Ii.call(e,"callee")},Di=Ri;var Li="object"==typeof exports&&exports&&!exports.nodeType&&exports,zi=Li&&"object"==typeof module&&module&&!module.nodeType&&module,Bi=zi&&zi.exports===Li?gr.Buffer:void 0,Vi=(Bi?Bi.isBuffer:void 0)||function(){return!1},Fi={};function qi(e){return function(t){return e(t)}}Fi["[object Float32Array]"]=Fi["[object Float64Array]"]=Fi["[object Int8Array]"]=Fi["[object Int16Array]"]=Fi["[object Int32Array]"]=Fi["[object Uint8Array]"]=Fi["[object Uint8ClampedArray]"]=Fi["[object Uint16Array]"]=Fi["[object Uint32Array]"]=!0,Fi["[object Arguments]"]=Fi["[object Array]"]=Fi["[object ArrayBuffer]"]=Fi["[object Boolean]"]=Fi["[object DataView]"]=Fi["[object Date]"]=Fi["[object Error]"]=Fi["[object Function]"]=Fi["[object Map]"]=Fi["[object Number]"]=Fi["[object Object]"]=Fi["[object RegExp]"]=Fi["[object Set]"]=Fi["[object String]"]=Fi["[object WeakMap]"]=!1;var Hi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wi=Hi&&"object"==typeof module&&module&&!module.nodeType&&module,Ui=Wi&&Wi.exports===Hi&&pr.process,Ji=function(){try{var e=Wi&&Wi.require&&Wi.require("util").types;return e||Ui&&Ui.binding&&Ui.binding("util")}catch(e){}}(),Ki=Ji,Gi=Ki&&Ki.isTypedArray,Qi=Gi?qi(Gi):function(e){return Cr(e)&&_i(e.length)&&!!Fi[Sr(e)]},Xi=Object.prototype.hasOwnProperty;function Yi(e,t){var n=Er(e),r=!n&&Di(e),i=!n&&!r&&Vi(e),o=!n&&!r&&!i&&Qi(e),s=n||r||i||o,a=s?Pi(e.length,String):[],l=a.length;for(var c in e)!t&&!Xi.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wi(c,l))||a.push(c);return a}function Zi(e,t){return function(n){return e(t(n))}}var eo=Zi(Object.keys,Object),to=Object.prototype.hasOwnProperty;function no(e){if(!Mi(e))return eo(e);var t=[];for(var n in Object(e))to.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ro(e){return Oi(e)?Yi(e):no(e)}var io=Object.prototype.hasOwnProperty;function oo(e){if(!Ir(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Mi(e),n=[];for(var r in e)("constructor"!=r||!t&&io.call(e,r))&&n.push(r);return n}function so(e){return Oi(e)?Yi(e,!0):oo(e)}var ao=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lo=/^\w*$/;function co(e,t){if(Er(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!_r(e))||(lo.test(e)||!ao.test(e)||null!=t&&e in Object(t))}var uo=ri(Object,"create");var ho=Object.prototype.hasOwnProperty;var fo=Object.prototype.hasOwnProperty;function po(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function mo(e,t){for(var n=e.length;n--;)if(xi(e[n][0],t))return n;return-1}po.prototype.clear=function(){this.__data__=uo?uo(null):{},this.size=0},po.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},po.prototype.get=function(e){var t=this.__data__;if(uo){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ho.call(t,e)?t[e]:void 0},po.prototype.has=function(e){var t=this.__data__;return uo?void 0!==t[e]:fo.call(t,e)},po.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=uo&&void 0===t?"__lodash_hash_undefined__":t,this};var go=Array.prototype.splice;function vo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}vo.prototype.clear=function(){this.__data__=[],this.size=0},vo.prototype.delete=function(e){var t=this.__data__,n=mo(t,e);return!(n<0)&&(n==t.length-1?t.pop():go.call(t,n,1),--this.size,!0)},vo.prototype.get=function(e){var t=this.__data__,n=mo(t,e);return n<0?void 0:t[n][1]},vo.prototype.has=function(e){return mo(this.__data__,e)>-1},vo.prototype.set=function(e,t){var n=this.__data__,r=mo(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var yo=ri(gr,"Map");function wo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function bo(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}bo.prototype.clear=function(){this.size=0,this.__data__={hash:new po,map:new(yo||vo),string:new po}},bo.prototype.delete=function(e){var t=wo(this,e).delete(e);return this.size-=t?1:0,t},bo.prototype.get=function(e){return wo(this,e).get(e)},bo.prototype.has=function(e){return wo(this,e).has(e)},bo.prototype.set=function(e,t){var n=wo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function xo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(xo.Cache||bo),n}xo.Cache=bo;var $o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ko=/\\(\\)?/g,So=function(e){var t=xo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace($o,(function(e,n,r,i){t.push(r?i.replace(ko,"$1"):n||e)})),t})),Co=So;function _o(e){return null==e?"":Pr(e)}function Oo(e,t){return Er(e)?e:co(e,t)?[e]:Co(_o(e))}function Eo(e){if("string"==typeof e||_r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Ao(e,t){for(var n=0,r=(t=Oo(t,e)).length;null!=e&&n<r;)e=e[Eo(t[n++])];return n&&n==r?e:void 0}function Mo(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Po=vr?vr.isConcatSpreadable:void 0;function To(e){return Er(e)||Di(e)||!!(Po&&e&&e[Po])}function jo(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=To),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?jo(a,t-1,n,r,i):Mo(i,a):r||(i[i.length]=a)}return i}var No=Zi(Object.getPrototypeOf,Object);function Io(e){var t=this.__data__=new vo(e);this.size=t.size}Io.prototype.clear=function(){this.__data__=new vo,this.size=0},Io.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Io.prototype.get=function(e){return this.__data__.get(e)},Io.prototype.has=function(e){return this.__data__.has(e)},Io.prototype.set=function(e,t){var n=this.__data__;if(n instanceof vo){var r=n.__data__;if(!yo||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bo(r)}return n.set(e,t),this.size=n.size,this};var Ro="object"==typeof exports&&exports&&!exports.nodeType&&exports,Do=Ro&&"object"==typeof module&&module&&!module.nodeType&&module,Lo=Do&&Do.exports===Ro?gr.Buffer:void 0,zo=Lo?Lo.allocUnsafe:void 0;function Bo(){return[]}var Vo=Object.prototype.propertyIsEnumerable,Fo=Object.getOwnPropertySymbols,qo=Fo?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(Fo(e),(function(t){return Vo.call(e,t)})))}:Bo,Ho=qo;var Wo=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Mo(t,Ho(e)),e=No(e);return t}:Bo;function Uo(e,t,n){var r=t(e);return Er(e)?r:Mo(r,n(e))}function Jo(e){return Uo(e,ro,Ho)}function Ko(e){return Uo(e,so,Wo)}var Go=ri(gr,"DataView"),Qo=ri(gr,"Promise"),Xo=ri(gr,"Set"),Yo="[object Map]",Zo="[object Promise]",es="[object Set]",ts="[object WeakMap]",ns="[object DataView]",rs=Gr(Go),is=Gr(yo),os=Gr(Qo),ss=Gr(Xo),as=Gr(ii),ls=Sr;(Go&&ls(new Go(new ArrayBuffer(1)))!=ns||yo&&ls(new yo)!=Yo||Qo&&ls(Qo.resolve())!=Zo||Xo&&ls(new Xo)!=es||ii&&ls(new ii)!=ts)&&(ls=function(e){var t=Sr(e),n="[object Object]"==t?e.constructor:void 0,r=n?Gr(n):"";if(r)switch(r){case rs:return ns;case is:return Yo;case os:return Zo;case ss:return es;case as:return ts}return t});var cs=ls,us=Object.prototype.hasOwnProperty;var hs=gr.Uint8Array;function ds(e){var t=new e.constructor(e.byteLength);return new hs(t).set(new hs(e)),t}var fs=/\w*$/;var ps=vr?vr.prototype:void 0,ms=ps?ps.valueOf:void 0;function gs(e,t,n){var r,i,o,s=e.constructor;switch(t){case"[object ArrayBuffer]":return ds(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return function(e,t){var n=t?ds(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?ds(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,n);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return(o=new(i=e).constructor(i.source,fs.exec(i))).lastIndex=i.lastIndex,o;case"[object Symbol]":return r=e,ms?Object(ms.call(r)):{}}}var vs=Ki&&Ki.isMap,ys=vs?qi(vs):function(e){return Cr(e)&&"[object Map]"==cs(e)};var ws=Ki&&Ki.isSet,bs=ws?qi(ws):function(e){return Cr(e)&&"[object Set]"==cs(e)},xs="[object Arguments]",$s="[object Function]",ks="[object Object]",Ss={};function Cs(e,t,n,r,i,o){var s,a=1&t,l=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!Ir(e))return e;var u=Er(e);if(u){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&us.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!a)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,s)}else{var h=cs(e),d=h==$s||"[object GeneratorFunction]"==h;if(Vi(e))return function(e,t){if(t)return e.slice();var n=e.length,r=zo?zo(n):new e.constructor(n);return e.copy(r),r}(e,a);if(h==ks||h==xs||d&&!i){if(s=l||d?{}:function(e){return"function"!=typeof e.constructor||Mi(e)?{}:si(No(e))}(e),!a)return l?function(e,t){return Si(e,Wo(e),t)}(e,function(e,t){return e&&Si(t,so(t),e)}(s,e)):function(e,t){return Si(e,Ho(e),t)}(e,function(e,t){return e&&Si(t,ro(t),e)}(s,e))}else{if(!Ss[h])return i?e:{};s=gs(e,h,a)}}o||(o=new Io);var f=o.get(e);if(f)return f;o.set(e,s),bs(e)?e.forEach((function(r){s.add(Cs(r,t,n,r,e,o))})):ys(e)&&e.forEach((function(r,i){s.set(i,Cs(r,t,n,i,e,o))}));var p=u?void 0:(c?l?Ko:Jo:l?so:ro)(e);return function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););}(p||e,(function(r,i){p&&(r=e[i=r]),ki(s,i,Cs(r,t,n,i,e,o))})),s}Ss[xs]=Ss["[object Array]"]=Ss["[object ArrayBuffer]"]=Ss["[object DataView]"]=Ss["[object Boolean]"]=Ss["[object Date]"]=Ss["[object Float32Array]"]=Ss["[object Float64Array]"]=Ss["[object Int8Array]"]=Ss["[object Int16Array]"]=Ss["[object Int32Array]"]=Ss["[object Map]"]=Ss["[object Number]"]=Ss[ks]=Ss["[object RegExp]"]=Ss["[object Set]"]=Ss["[object String]"]=Ss["[object Symbol]"]=Ss["[object Uint8Array]"]=Ss["[object Uint8ClampedArray]"]=Ss["[object Uint16Array]"]=Ss["[object Uint32Array]"]=!0,Ss["[object Error]"]=Ss[$s]=Ss["[object WeakMap]"]=!1;function _s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bo;++t<n;)this.add(e[t])}function Os(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}_s.prototype.add=_s.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},_s.prototype.has=function(e){return this.__data__.has(e)};function Es(e,t,n,r,i,o){var s=1&n,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new _s:void 0;for(o.set(e,t),o.set(t,e);++h<a;){var p=e[h],m=t[h];if(r)var g=s?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!Os(t,(function(e,t){if(s=t,!f.has(s)&&(p===e||i(p,e,n,r,o)))return f.push(t);var s}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function As(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Ms(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Ps=vr?vr.prototype:void 0,Ts=Ps?Ps.valueOf:void 0;var js=Object.prototype.hasOwnProperty;var Ns="[object Arguments]",Is="[object Array]",Rs="[object Object]",Ds=Object.prototype.hasOwnProperty;function Ls(e,t,n,r,i,o){var s=Er(e),a=Er(t),l=s?Is:cs(e),c=a?Is:cs(t),u=(l=l==Ns?Rs:l)==Rs,h=(c=c==Ns?Rs:c)==Rs,d=l==c;if(d&&Vi(e)){if(!Vi(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new Io),s||Qi(e)?Es(e,t,n,r,i,o):function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new hs(e),new hs(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xi(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=As;case"[object Set]":var l=1&r;if(a||(a=Ms),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=2,s.set(e,t);var u=Es(a(e),a(t),r,i,o,s);return s.delete(e),u;case"[object Symbol]":if(Ts)return Ts.call(e)==Ts.call(t)}return!1}(e,t,l,n,r,i,o);if(!(1&n)){var f=u&&Ds.call(e,"__wrapped__"),p=h&&Ds.call(t,"__wrapped__");if(f||p){var m=f?e.value():e,g=p?t.value():t;return o||(o=new Io),i(m,g,n,r,o)}}return!!d&&(o||(o=new Io),function(e,t,n,r,i,o){var s=1&n,a=Jo(e),l=a.length;if(l!=Jo(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:js.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=s;++c<l;){var m=e[u=a[c]],g=t[u];if(r)var v=s?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,w=t.constructor;y==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}function zs(e,t,n,r,i){return e===t||(null==e||null==t||!Cr(e)&&!Cr(t)?e!=e&&t!=t:Ls(e,t,n,r,zs,i))}function Bs(e){return e==e&&!Ir(e)}function Vs(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Fs(e){var t=function(e){for(var t=ro(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Bs(i)]}return t}(e);return 1==t.length&&t[0][2]?Vs(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=n[i])[0],c=e[l],u=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Io;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?zs(u,c,3,r,h):d))return!1}}return!0}(n,e,t)}}function qs(e,t){return null!=e&&t in Object(e)}function Hs(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=Oo(t,e)).length,o=!1;++r<i;){var s=Eo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&_i(i)&&wi(s,i)&&(Er(e)||Di(e))}(e,t,qs)}function Ws(e,t){return co(e)&&Bs(t)?Vs(Eo(e),t):function(n){var r=function(e,t,n){var r=null==e?void 0:Ao(e,t);return void 0===r?n:r}(n,e);return void 0===r&&r===t?Hs(n,e):zs(t,r,3)}}function Us(e){return co(e)?(t=Eo(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Ao(t,e)}}(e);var t}function Js(e){return"function"==typeof e?e:null==e?qr:"object"==typeof e?Er(e)?Ws(e[0],e[1]):Fs(e):Us(e)}function Ks(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}var Gs=Ks();function Qs(e,t){return function(n,r){if(null==n)return n;if(!Oi(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=Object(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}var Xs=Qs((function(e,t){return e&&Gs(e,t,ro)})),Ys=function(){return gr.Date.now()},Zs=Math.max,ea=Math.min;function ta(e,t,n){var r,i,o,s,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function p(e){return c=e,a=setTimeout(g,t),u?f(e):s}function m(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function g(){var e=Ys();if(m(e))return v(e);a=setTimeout(g,function(e){var n=t-(e-l);return h?ea(n,o-(e-c)):n}(e))}function v(e){return a=void 0,d&&r?f(e):(r=i=void 0,s)}function y(){var e=Ys(),n=m(e);if(r=arguments,i=this,l=e,n){if(void 0===a)return p(l);if(h)return clearTimeout(a),a=setTimeout(g,t),f(l)}return void 0===a&&(a=setTimeout(g,t)),s}return t=Br(t)||0,Ir(n)&&(u=!!n.leading,o=(h="maxWait"in n)?Zs(Br(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=l=i=a=void 0},y.flush=function(){return void 0===a?s:v(Ys())},y}function na(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}function ra(e){return"function"==typeof e?e:qr}function ia(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}var oa=Ks(!0);var sa=Qs((function(e,t){return e&&oa(e,t,ro)}),!0);function aa(e){return e&&e.length?e[0]:void 0}function la(e,t){var n=-1,r=Oi(e)?Array(e.length):[];return Xs(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function ca(e){return(null==e?0:e.length)?function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,0,-1):[]}var ua=Object.prototype.hasOwnProperty;function ha(e){if(null==e)return!0;if(Oi(e)&&(Er(e)||"string"==typeof e||"function"==typeof e.splice||Vi(e)||Qi(e)||Di(e)))return!e.length;var t=cs(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Mi(e))return!no(e).length;for(var n in e)if(ua.call(e,n))return!1;return!0}function da(e,t){return zs(e,t)}function fa(e,t){return e<t}function pa(e,t){return e&&e.length?function(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],s=t(o);if(null!=s&&(void 0===a?s==s&&!_r(s):n(s,a)))var a=s,l=o}return l}(e,Js(t),fa):void 0}function ma(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=_r(e),s=void 0!==t,a=null===t,l=t==t,c=_r(t);if(!a&&!c&&!o&&e>t||o&&s&&l&&!a&&!c||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0}function ga(e,t,n){t=t.length?Or(t,(function(e){return Er(e)?function(t){return Ao(t,1===e.length?e[0]:e)}:e})):[qr];var r=-1;return t=Or(t,qi(Js)),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(la(e,(function(e,n,i){return{criteria:Or(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){var l=ma(i[r],o[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}var va=Math.ceil,ya=Math.max;var wa,ba=function(e,t,n){return n&&"number"!=typeof n&&Ei(e,t,n)&&(t=n=void 0),e=Fr(e),void 0===t?(t=e,e=0):t=Fr(t),function(e,t,n,r){for(var i=-1,o=ya(va((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s}(e,t,n=void 0===n?e<t?1:-1:Fr(n),wa)},xa=ba,$a=function(e,t){return vi(function(e,t,n){return t=Ci(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ci(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),ai(e,this,a)}}(e,t,qr),e+"")}((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ei(e,t[0],t[1])?t=[]:n>2&&Ei(t[0],t[1],t[2])&&(t=[t[0]]),ga(e,jo(t,1),[])})),ka=$a;var Sa=4294967295,Ca=Math.min;function _a(e,t){if(e=function(e){var t=Fr(e),n=t%1;return t==t?n?t-n:t:0}(e),e<1||e>9007199254740991)return[];var n=Sa,r=Ca(e,Sa);t=ra(t),e-=Sa;for(var i=Pi(r,t);++n<e;)t(n);return i}var Oa=0;function Ea(e){var t=++Oa;return _o(e)+t}function Aa(e,t){const n=Nn.parseJSONPointer(t);for(let t=0;t<n.length;t++){const r=n[t];if(Ma.exec(r)){const i=n.slice(0,t),o=Nn.getIn(e,i);Array.isArray(o)&&(n[t]=parseInt(r))}}return n}const Ma=/^\d+$/;function Pa(e){const t=ka(e,(e=>e.start)),n=[t[0]];for(let e=0;e<t.length;e++){const r=n.length-1,i=n[r],o=t[e];o.start<=i.end?n[r]={start:Math.min(i.start,o.start),end:Math.max(i.end,o.end)}:n.push(o)}return n}function Ta(e,t){return e.some((e=>t>=e.start&&t<e.end))}function ja(e){return Na(e)+cn}function Na(e){return Math.floor(e/cn)*cn}function Ia(e,t,n,r,i=!1){const o=Array.isArray(e)?[]:{};return o[Yt]=t&&t[Yt]?t[Yt]:Ea(),Fn(e)?(o[tn]=function(e,t){if(!t)return Object.keys(e);const n=t.filter((t=>void 0!==e[t])),r=new Set(n);return Object.keys(e).filter((e=>!r.has(e))).forEach((e=>n.push(e))),n}(e,t&&t[tn]),o[Zt]=t&&!i?t[Zt]:r(n),o[Zt]&&Object.keys(e).forEach((s=>{const a=e[s],l=t&&t[s];o[s]=Ia(a,l,n.concat(s),r,i)}))):Array.isArray(e)?(o[Zt]=t&&!i?t[Zt]:r(n),o[en]=t&&o[Zt]&&t[en]||un,o[Zt]&&o[en].forEach((({start:s,end:a})=>{Yn(s,Math.min(e.length,a),(s=>{const a=e[s],l=t&&t[s];o[s]=Ia(a,l,n.concat(s),r,i)}))}))):t&&void 0!==t[on]?o[on]=t[on]:Gn(e)&&(o[on]=!0),o}function Ra(e){if(Array.isArray(e)){const e=[];return e[Yt]=Ea(),e[Zt]=!1,e[en]=un,e}if(Fn(e)){const t={};return t[Yt]=Ea(),t[Zt]=!1,t[tn]=Object.keys(e),t}const t={[Yt]:Ea()};return Gn(e)&&(t[on]=!0),t}function Da(e,t,n){t[en].forEach((({start:t,end:r})=>{Yn(t,Math.min(e.length,r),n)}))}function La(e,t){e[tn].forEach((e=>t(e)))}function za(e,t,n){let r=t;for(let t=0;t<n.length;t++){const i=n.slice(0,t),o=i.concat(Zt);if(r=Nn.setIn(r,o,!0,!0),Array.isArray(Nn.getIn(r,i))){const e=n[t],o=i.concat(en),s=Nn.getIn(r,o)||un;if(!Ta(s,e)){const t=Na(e),n={start:t,end:ja(t)},i=Pa(s.concat(n));r=Nn.setIn(r,o,i)}}const s=Nn.getIn(e,i);r=Nn.updateIn(r,i,(e=>Ia(s,e,[],(()=>!1))))}return r}function Ba(e,t,n,r){const i=Nn.setIn(t,n.concat(Zt),!0,!0);return Nn.updateIn(i,n,(t=>Ia(Nn.getIn(e,n),t,[],r,!0)))}function Va(e,t,n){const r=Nn.immutableJSONPatch(e,n),i=function(e,t,n){let r=t;function i(e,t,n){let r=t;return Nn.existsIn(e,n)&&!Nn.existsIn(r,n)&&(n.length>0&&(r=i(e,r,ca(n))),r=Nn.setIn(r,n,Ra(Nn.getIn(e,n)))),r}return n.forEach((t=>{const n="string"==typeof t.from?Aa(e,t.from):null,o="string"==typeof t.path?Aa(e,t.path):null;"add"===t.op&&(r=i(e,r,ca(o))),"copy"!==t.op&&"move"!==t.op||(r=i(e,r,n),r=i(e,r,ca(o))),"remove"!==t.op&&"replace"!==t.op&&"test"!==t.op||(r=i(e,r,o))})),r}(e,t,n),o=Nn.immutableJSONPatch(i,n,{before:function(e,t){const{op:n,path:r,from:i}=t,o=ca(r);let s=e,a=t;if(void 0!==t.value&&(a={...a,value:Ra(t.value)}),"add"===n||"copy"===n){const t=qa(e,o);if(t){const e=na(r);t.includes(e)||(s=Wa(s,o,e))}s=Fa(s,r,1)}if("move"===n){const t=ca(r),n=qa(s,t),o=na(i),l=na(r);if(da(ca(i),ca(r)))n&&(o!==l?(s=Ha(s,t,l),s=function(e,t,n,r){return Nn.updateIn(e,t.concat([tn]),(e=>{const t=e.indexOf(n);if(-1===t)return e;const i=e.slice(0);return i.splice(t,1,r),i}))}(s,t,o,l)):(s=Ha(s,t,l),s=Wa(s,t,l)));else{const e=ca(i);qa(s,e)&&(s=Ha(s,e,o)),n&&(s=Wa(s,t,l))}s=Fa(s,i,-1),s=Fa(s,r,1);const c=Nn.getIn(e,i);a={...a,value:c}}if("remove"===n){const e=ca(r);if(qa(s,e)){s=Ha(s,e,na(r))}else s=Fa(s,r,-1)}if("replace"===n){const e=ca(r),t=qa(s,e);if(t){const n=na(r);t.includes(n)||(s=Wa(s,e,n))}}return{json:s,operation:a}},after:function(e,t,n){const{op:r,path:i}=t;let o=e;if("copy"===r&&Nn.existsIn(o,i.concat([Yt]))&&(o=Nn.setIn(o,i.concat([Yt]),Ea())),"replace"===r){const e=Nn.getIn(n,i.concat([on]));"boolean"==typeof e&&(o=Nn.setIn(o,i.concat([on]),e))}return o}});return{json:r,state:o}}function Fa(e,t,n){const r=ca(t).concat([en]),i=Nn.getIn(e,r);if(!i)return e;const o=parseInt(na(t),10),s=i.map((e=>({start:e.start>o?e.start+n:e.start,end:e.end>=o?e.end+n:e.end})));return Nn.setIn(e,r,s)}function qa(e,t){return Nn.getIn(e,t.concat([tn]))}function Ha(e,t,n){return Nn.updateIn(e,t.concat([tn]),(e=>{const t=e.indexOf(n);if(-1===t)return e;const r=e.slice(0);return r.splice(t,1),r}))}function Wa(e,t,n){return Nn.updateIn(e,t.concat([tn]),(e=>e.concat(n)))}function Ua(e,t,n=!1){const r=e.indexOf(t);return-1!==r?n?e.slice(r):e.slice(r+1):[]}function Ja(e,t){const n=[];return function e(t,r,i){n.push(i),t&&r&&!0===r[Zt]&&(Array.isArray(t)?Da(t,r,(n=>{e(t[n],r[n],i.concat(n))})):La(r,(n=>{e(t[n],r[n],i.concat(n))})))}(e,t,[]),n}const Ka="inside",Ga="after",Qa="key",Xa="value";function Ya(e,t,n=!0){const r=[];return function e(t,i,o){r.push({path:o,type:Xa}),t&&i&&!0===i[Zt]&&(n&&r.push({path:o,type:Ka}),Array.isArray(t)?Da(t,i,(s=>{const a=o.concat(s);e(t[s],i[s],a),n&&r.push({path:a,type:Ga})})):La(i,(s=>{const a=o.concat(s);r.push({path:a,type:Qa}),e(t[s],i[s],a),n&&r.push({path:a,type:Ga})})))}(e,t,[]),r}function Za(e,t,n){const r=Ja(e,t),i=r.map(Nn.compileJSONPointer).indexOf(Nn.compileJSONPointer(n));return-1!==i&&i<r.length-1?r[i+1]:null}const el="after",tl="inside",nl="key",rl="value",il="multi";function ol(e){return e.type===tl?e.focusPath:ca(e.focusPath)}function sl(e){return e.paths?aa(e.paths):e.focusPath}function al(e){return e.paths?na(e.paths):e.focusPath}function ll(e,t,n,r=!1,i=!1){const o=!i&&n.paths?aa(n.paths):n.focusPath,s=function(e,t,n){const r=Ja(e,t),i=r.map(Nn.compileJSONPointer),o=Nn.compileJSONPointer(n),s=i.indexOf(o);return-1!==s&&s>0?r[s-1]:null}(e,t,o);if(null===s)return null;const a=s,l=s;if(r)return n.type===el||n.type===tl?yl(e,t,{type:il,anchorPath:n.anchorPath,focusPath:n.anchorPath}):yl(e,t,{type:il,anchorPath:n.anchorPath,focusPath:l});if(n.type===nl){const t=ca(s),n=Nn.getIn(e,t);return Array.isArray(n)||ha(s)?{type:rl,anchorPath:a,focusPath:l}:{type:nl,anchorPath:a,focusPath:l}}return n.type===rl?{type:rl,anchorPath:a,focusPath:l}:n.type===el||n.type===tl?yl(e,t,{type:il,anchorPath:o,focusPath:o}):yl(e,t,{type:il,anchorPath:a,focusPath:l})}function cl(e,t,n,r=!1,i=!1){const o=!i&&n.paths?na(n.paths):n.focusPath,s=Za(e,t,o),a=s,l=s;if(null===s)return null;if(r){const r=Za(e,qn(Nn.getIn(e,o))?Nn.setIn(t,o.concat(Zt),!1,!0):t,o);return null===r?null:n.type===el?yl(e,t,{type:il,anchorPath:r,focusPath:r}):n.type===tl?yl(e,t,{type:il,anchorPath:a,focusPath:l}):yl(e,t,{type:il,anchorPath:n.anchorPath,focusPath:r})}if(n.type===nl){const t=ca(s),n=Nn.getIn(e,t);return Array.isArray(n)?{type:rl,anchorPath:a,focusPath:l}:{type:nl,anchorPath:a,focusPath:l}}return n.type===rl?{type:rl,anchorPath:a,focusPath:l}:n.type===tl?yl(e,t,{type:il,anchorPath:a,focusPath:l}):yl(e,t,{type:il,anchorPath:s,focusPath:s})}function ul(e,t,n,r){const i=Ya(e,t,r),o=i.findIndex((e=>da(e.path,n.focusPath)&&e.type===n.type));return{caret:-1!==o?i[o]:null,previous:-1!==o&&o>0?i[o-1]:null,next:-1!==o&&o<i.length-1?i[o+1]:null}}function hl(e,t){const n=Ja(e,t);let r=0;for(;r<n.length-1&&n[r+1].length>n[r].length;)r++;const i=n[r];return 0===i.length||Array.isArray(Nn.getIn(e,ca(i)))?{type:rl,anchorPath:i,focusPath:i}:{type:nl,anchorPath:i,focusPath:i}}function dl(e,t,n){if(1===n.length){const t=aa(n);if("replace"===t.op||"move"===t.op){const n=Aa(e,t.path);return{type:rl,anchorPath:n,focusPath:n,edit:!1}}}if(!ha(n)&&n.every((e=>"move"===e.op))){const t=aa(n),r=n.slice(1);if(t.from!==t.path&&r.every((e=>e.from===e.path))){const n=Aa(e,t.path);return{type:nl,anchorPath:n,focusPath:n,edit:!1}}}const r=n.filter((e=>"test"!==e.op&&"remove"!==e.op&&("move"!==e.op||e.from!==e.path)&&"string"==typeof e.path)).map((t=>Aa(e,t.path)));return ha(r)?null:{type:il,paths:r,anchorPath:aa(r),focusPath:na(r),pathsMap:fl(r)}}function fl(e){const t={};return e.forEach((e=>{t[Nn.compileJSONPointer(e)]=!0})),t}function pl(e){return e&&(e.type===nl||e.type===rl||e.type===il&&1===e.paths.length)}function ml(e,t){return pl(t)&&qn(Nn.getIn(e,t.focusPath))?t.focusPath:ca(t.focusPath)}function gl(e,t){if(e.length<t.length)return!1;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function vl(e){return e&&e.edit?{...e,edit:!1}:e}function yl(e,t,n){const{type:r,anchorPath:i,focusPath:o,path:s,edit:a=!1,next:l=!1,nextInside:c=!1}=n;if(r===nl){let e={type:r,anchorPath:s,focusPath:s,edit:a};return l&&(e={...e,type:rl}),e}if(r===rl){let n={type:rl,anchorPath:s,focusPath:s,edit:a};return l&&(n=cl(e,t,n)||n),c&&(n=function(e,t,n){const r=n.focusPath,i=ca(r),o=[na(r)],s=Za(Nn.getIn(e,i),Nn.getIn(t,i),o);return yl(e,t,s?{type:rl,path:i.concat(s)}:{type:el,path:r})}(e,t,n)||n),n}if(r===el)return{type:r,anchorPath:s,focusPath:s};if(r===tl)return{type:r,anchorPath:s,focusPath:s};if(r===il&&s){const e=[s];return{type:il,anchorPath:s,focusPath:s,paths:e,pathsMap:fl(e)}}if(i&&o){const n=function(e,t,n,r){if(da(n,r))return[n];{const i=function(e,t){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;return e.slice(0,n)}(n,r);if(n.length===i.length||r.length===i.length)return[i];const o=n[i.length],s=r[i.length],a=Nn.getIn(e,i);if(Fn(a)){const e=qa(t,i),n=e.indexOf(o),r=e.indexOf(s);if(-1!==n&&-1!==r){const t=Math.min(n,r),o=Math.max(n,r),s=[];for(let n=t;n<=o;n++)s.push(i.concat(e[n]));return s}}if(Array.isArray(a)){const e=Math.min(o,s),t=Math.max(o,s),n=[];for(let r=e;r<=t;r++)n.push(i.concat(r));return n}}throw new Error("Failed to create selection")}(e,t,i,o),r=gl(o,na(n))||gl(i,aa(n));return{type:il,anchorPath:r?aa(n):na(n),focusPath:r?na(n):aa(n),paths:n,pathsMap:fl(n)}}throw new TypeError(`Unknown type of selection ${JSON.stringify(n)}`)}function wl(e,t,n=2){if(t.type===nl)return na(t.focusPath);if(t.type===rl){const r=Nn.getIn(e,t.focusPath);return"string"==typeof r?r:JSON.stringify(r,null,n)}if(t.type===il){if(ha(t.focusPath))return JSON.stringify(e,null,n);const r=ol(t),i=Nn.getIn(e,r);if(Array.isArray(i)){if(1===t.paths.length){const r=Nn.getIn(e,aa(t.paths));return JSON.stringify(r,null,n)}return t.paths.map((t=>{const r=Nn.getIn(e,t);return`${JSON.stringify(r,null,n)},`})).join("\n")}return t.paths.map((t=>{const r=na(t),i=Nn.getIn(e,t);return`${JSON.stringify(r)}: ${JSON.stringify(i,null,n)},`})).join("\n")}return null}function bl(e,t){if(!t)return null;let n={};return(t.type===il?t.paths:[t.focusPath]).forEach((r=>{const i=r.concat(sn);if(!Nn.existsIn(n,i)){const t=Nn.getIn(e,i);n=Nn.setIn(n,i,Array.isArray(t)?[]:{},!0)}n=Nn.setIn(n,i,t,!0)})),n}function xl(e){return!!e&&(e.type===nl||e.type===rl||(e.type===il&&1===e.paths.length||void 0))}function $l(e,t,n){var r;const i=null===(r=null==n?void 0:n[t])||void 0===r?void 0:r[sn];return!(!i||i.type!==nl||i.edit)&&da(i.focusPath,e.concat(t))}function kl({escapeControlCharacters:e,escapeUnicodeCharacters:t}){return e?t?Sl:Cl:t?_l:Ol}const Sl={escapeValue:e=>El(Tl(String(e))),unescapeValue:e=>jl(Al(e))},Cl={escapeValue:e=>Tl(String(e)),unescapeValue:e=>jl(e)},_l={escapeValue:e=>El(String(e)),unescapeValue:e=>Al(e)},Ol={escapeValue:e=>String(e),unescapeValue:e=>e};function El(e){return e.replace(/[^\x20-\x7F]/g,(e=>"\b"===e||"\f"===e||"\n"===e||"\r"===e||"\t"===e?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4)))}function Al(e){return e.replace(/\\u[a-fA-F0-9]{4}/g,(e=>{try{return JSON.parse('"'+e+'"')}catch(t){return e}}))}const Ml={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Pl={"\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"};function Tl(e){return e.replace(/[\b\f\n\r\t]/g,(e=>Ml[e]||e))}function jl(e){return e.replace(/\\[bfnrt]/g,(e=>Pl[e]||e))}function Nl(e){return"string"!=typeof e?String(e):e.endsWith("\n")?e+"\n":e}function Il(e,t){return Dl(e,(e=>e.nodeName.toUpperCase()===t.toUpperCase()))}function Rl(e,t,n){return Dl(e,(e=>function(e,t,n){return"function"==typeof e.getAttribute&&e.getAttribute(t)===n}(e,t,n)))}function Dl(e,t){return!!Ll(e,t)}function Ll(e,t){let n=e;for(;n&&!t(n);)n=n.parentNode;return n||void 0}function zl(e){if(null==e.firstChild)return void e.focus();const t=document.createRange(),n=window.getSelection();t.setStart(e,1),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}function Bl(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView}function Vl(e){return Dl(Bl(e).document.activeElement,(t=>t===e))}function Fl(e,t){return Ll(e,(e=>e.nodeName===t))}function ql(e){return Rl(e,"data-type","selectable-key")?nl:Rl(e,"data-type","selectable-value")?rl:Rl(e,"data-type","insert-selection-area-inside")?tl:Rl(e,"data-type","insert-selection-area-after")?el:il}function Hl(e){return encodeURIComponent(JSON.stringify(e))}function Wl(e){const t=Ll(e,(e=>e.hasAttribute("data-path")));return t?(n=t.getAttribute("data-path"),JSON.parse(decodeURIComponent(n))):null;var n}function Ul({allElements:e,currentElement:t,direction:n,hasPrio:r=(()=>!0),margin:i=10}){const o=(s=e.filter((function(e){const t=e.getBoundingClientRect();return t.width>0&&t.height>0})),a=c,(Er(s)?Or:la)(s,Js(a)));var s,a;const l=c(t);function c(e){const t=e.getBoundingClientRect();return{x:t.left+t.width/2,y:t.top+t.height/2,rect:t,element:e}}function u(e,t,n=1){const r=e.x-t.x,i=(e.y-t.y)*n;return Math.sqrt(r*r+i*i)}const h=e=>u(e,l),d=e=>u(e,l,10);if("Left"===n||"Right"===n){const e="Left"===n?o.filter((e=>{return t=l,e.rect.left+i<t.rect.left;var t})):o.filter((e=>{return t=l,e.rect.right>t.rect.right+i;var t})),t=pa(e.filter((e=>{return t=e,n=l,Math.abs(t.y-n.y)<i;var t,n})),h)||pa(e,d);return null==t?void 0:t.element}if("Up"===n||"Down"===n){const e="Up"===n?o.filter((e=>{return t=l,e.y+i<t.y;var t})):o.filter((e=>{return t=l,e.y>t.y+i;var t})),t=pa(e.filter((e=>r(e.element))),h)||pa(e,h);return null==t?void 0:t.element}}const Jl="undefined"!=typeof navigator&&navigator.platform.toUpperCase().indexOf("MAC")>=0;function Kl(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.metaKey&&t.push("Command"),e.altKey&&t.push(Jl?"Option":"Alt"),e.shiftKey&&t.push("Shift");const n=function(e){return Ql[e]||""}(e.which);return Gl[n]||t.push(n),t.join("+")}const Gl={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},Ql={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},{window:Xl}=je;function Yl(e){let t,r,i,o,s,a;const l=[e[1]];var c=e[0];function u(e){let t={};for(let e=0;e<l.length;e+=1)t=n(t,l[e]);return{props:t}}return c&&(o=new c(u())),{c(){t=A("div"),r=A("input"),i=T(),o&&Be(o.$$.fragment),D(r,"class","jse-hidden-input svelte-p9zniz"),D(t,"class","jse-absolute-popup-content svelte-p9zniz"),D(t,"style",s=e[7]())},m(n,s){_(n,t,s),k(t,r),e[10](r),k(t,i),o&&Ve(o,t,null),a=!0},p(e,n){const r=2&n?De(l,[Le(e[1])]):{};if(c!==(c=e[0])){if(o){Oe();const e=o;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}c?(o=new c(u()),Be(o.$$.fragment),Ae(o.$$.fragment,1),Ve(o,t,null)):o=null}else c&&o.$set(r)},i(e){a||(o&&Ae(o.$$.fragment,e),a=!0)},o(e){o&&Me(o.$$.fragment,e),a=!1},d(n){n&&O(t),e[10](null),o&&Fe(o)}}}function Zl(e){let t,n,r,i,s,a=e[0]&&e[1]&&Yl(e);const l=e[9].default,c=h(l,e,e[8],null);return{c(){t=A("div"),a&&a.c(),n=T(),c&&c.c(),D(t,"class","jse-absolute-popup svelte-p9zniz")},m(o,l){_(o,t,l),a&&a.m(t,null),e[11](t),_(o,n,l),c&&c.m(o,l),r=!0,i||(s=[N(Xl,"mousedown",e[4],!0),N(Xl,"keydown",e[5],!0),N(Xl,"wheel",e[6],!0),N(t,"mousedown",ec),N(t,"keydown",e[5])],i=!0)},p(e,[n]){e[0]&&e[1]?a?(a.p(e,n),3&n&&Ae(a,1)):(a=Yl(e),a.c(),Ae(a,1),a.m(t,null)):a&&(Oe(),Me(a,1,1,(()=>{a=null})),Ee()),c&&c.p&&(!r||256&n)&&p(c,l,e,e[8],r?f(l,e[8],n,null):m(e[8]),null)},i(e){r||(Ae(a),Ae(c,e),r=!0)},o(e){Me(a),Me(c,e),r=!1},d(r){r&&O(t),a&&a.d(),e[11](null),r&&O(n),c&&c.d(r),i=!1,o(s)}}}function ec(e){e.stopPropagation()}function tc(e,t,n){let{$$slots:r={},$$scope:i}=t;const o=zt("jsoneditor:AbsolutePopup");let s,a,l=null,c=null,u={};function h(){if(l){const e=u.onClose;n(0,l=null),n(1,c=null),u={},e&&e()}}function d(e){u&&u.closeOnOuterClick&&!Dl(e.target,(e=>e===s))&&h()}function f(){a&&a.focus()}return se("absolute-popup",{openAbsolutePopup:function(e,t,r){o("open...",r),n(0,l=e),n(1,c=t||{}),u=r||{},ge().then(f)},closeAbsolutePopup:h}),e.$$set=e=>{"$$scope"in e&&n(8,i=e.$$scope)},[l,c,s,a,function(e){d(e)},function(e){"Escape"===Kl(e)&&h()},function(e){d(e)},function(){const e=s.getBoundingClientRect(),{left:t,top:n,positionAbove:r,positionLeft:i}=function(){if(u.anchor){const{anchor:e,width:t=0,height:n=0,offsetTop:r=0,offsetLeft:i=0,position:o}=u,{left:s,top:a,bottom:l,right:c}=e.getBoundingClientRect(),h="top"===o||a+n>window.innerHeight&&a>n,d="left"===o||s+t>window.innerWidth&&s>t;return{left:d?c-i:s+i,top:h?a-r:l+r,positionAbove:h,positionLeft:d}}if("number"==typeof u.left&&"number"==typeof u.top){const{left:e,top:t,width:n=0,height:r=0}=u;return{left:e,top:t,positionAbove:t+r>window.innerHeight&&t>r,positionLeft:e+n>window.innerWidth&&e>n}}throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}();return(r?`bottom: ${e.top-n}px;`:`top: ${n-e.top}px;`)+(i?`right: ${e.left-t}px;`:`left: ${t-e.left}px;`)},i,r,function(e){ue[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(e){ue[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class nc extends He{constructor(e){super(),qe(this,e,tc,Zl,u,{})}}
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */var rc={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M192 384c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L192 306.8l137.4-137.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-160 160C208.4 380.9 200.2 384 192 384z"]},ic={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"]},oc={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M374.6 310.6l-160 160C208.4 476.9 200.2 480 192 480s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 370.8V64c0-17.69 14.33-31.1 31.1-31.1S224 46.31 224 64v306.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0S387.1 298.1 374.6 310.6z"]},sc={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"]},ac={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"]},lc={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z"]},cc={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M310.6 246.6l-127.1 128C176.4 380.9 168.2 384 160 384s-16.38-3.125-22.63-9.375l-127.1-128C.2244 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75S319.8 237.5 310.6 246.6z"]},uc={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"]},hc={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},dc={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"]},fc={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M416 352c-8.188 0-16.38-3.125-22.62-9.375L224 173.3l-169.4 169.4c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25C432.4 348.9 424.2 352 416 352z"]},pc={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z"]},mc={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 224C0 188.7 28.65 160 64 160H128V288C128 341 170.1 384 224 384H352V448C352 483.3 323.3 512 288 512H64C28.65 512 0 483.3 0 448V224zM224 352C188.7 352 160 323.3 160 288V64C160 28.65 188.7 0 224 0H448C483.3 0 512 28.65 512 64V288C512 323.3 483.3 352 448 352H224z"]},gc={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"]},vc={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M384 96L384 0h-112c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48H464c26.51 0 48-21.49 48-48V128h-95.1C398.4 128 384 113.6 384 96zM416 0v96h96L416 0zM192 352V128h-144c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48L288 416h-32C220.7 416 192 387.3 192 352z"]},yc={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 384H352V448H128C92.65 448 64 419.3 64 384V128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H64V32C64 14.33 78.33 0 96 0C113.7 0 128 14.33 128 32V384zM384 128H160V64H384C419.3 64 448 92.65 448 128V384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H448V480C448 497.7 433.7 512 416 512C398.3 512 384 497.7 384 480V128z"]},wc={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360C94.93 360 120 385.1 120 416C120 446.9 94.93 472 64 472C33.07 472 8 446.9 8 416C8 385.1 33.07 360 64 360zM64 200C94.93 200 120 225.1 120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200zM64 152C33.07 152 8 126.9 8 96C8 65.07 33.07 40 64 40C94.93 40 120 65.07 120 96C120 126.9 94.93 152 64 152z"]},bc={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.853 54.87C10.47 40.9 24.54 32 40 32H472C487.5 32 501.5 40.9 508.1 54.87C514.8 68.84 512.7 85.37 502.1 97.33L320 320.9V448C320 460.1 313.2 471.2 302.3 476.6C291.5 482 278.5 480.9 268.8 473.6L204.8 425.6C196.7 419.6 192 410.1 192 400V320.9L9.042 97.33C-.745 85.37-2.765 68.84 3.854 54.87L3.853 54.87z"]},xc={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"]},$c={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},kc={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M320 96V80C320 53.49 298.5 32 272 32H215.4C204.3 12.89 183.6 0 160 0S115.7 12.89 104.6 32H48C21.49 32 0 53.49 0 80v320C0 426.5 21.49 448 48 448l144 .0013L192 176C192 131.8 227.8 96 272 96H320zM160 88C146.8 88 136 77.25 136 64S146.8 40 160 40S184 50.75 184 64S173.3 88 160 88zM416 128v96h96L416 128zM384 224L384 128h-112C245.5 128 224 149.5 224 176v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48V256h-95.99C398.4 256 384 241.6 384 224z"]},Sc={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32zM421.7 220.3L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3z"]},Cc={prefix:"fas",iconName:"scissors",icon:[512,512,[9986,9988,9984,"cut"],"f0c4","M396.8 51.2C425.1 22.92 470.9 22.92 499.2 51.2C506.3 58.27 506.3 69.73 499.2 76.8L216.5 359.5C221.3 372.1 224 385.7 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 287.1 112 287.1C126.3 287.1 139.9 290.7 152.5 295.5L191.1 255.1L152.5 216.5C139.9 221.3 126.3 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 126.3 221.3 139.9 216.5 152.5L255.1 191.1L396.8 51.2zM160 111.1C160 85.49 138.5 63.1 112 63.1C85.49 63.1 64 85.49 64 111.1C64 138.5 85.49 159.1 112 159.1C138.5 159.1 160 138.5 160 111.1zM112 448C138.5 448 160 426.5 160 400C160 373.5 138.5 352 112 352C85.49 352 64 373.5 64 400C64 426.5 85.49 448 112 448zM278.6 342.6L342.6 278.6L499.2 435.2C506.3 442.3 506.3 453.7 499.2 460.8C470.9 489.1 425.1 489.1 396.8 460.8L278.6 342.6z"]},_c={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM345.6 232.3l-104 112C237 349.2 230.7 352 224 352s-13.03-2.781-17.59-7.656l-104-112c-6.5-7-8.219-17.19-4.407-25.94C101.8 197.7 110.5 192 120 192h208c9.531 0 18.19 5.656 21.1 14.41C353.8 215.2 352.1 225.3 345.6 232.3z"]},Oc={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM349.1 305.6C346.2 314.3 337.5 320 328 320h-208c-9.531 0-18.19-5.656-22-14.41C94.19 296.8 95.91 286.7 102.4 279.7l104-112c9.125-9.75 26.06-9.75 35.19 0l104 112C352.1 286.7 353.8 296.8 349.1 305.6z"]},Ec={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"]},Ac={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"]},Mc={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]};function Pc(e,t=1e3){if(e<.9*t)return e.toFixed()+" B";const n=e/t;if(n<.9*t)return n.toFixed(1)+" KB";const r=n/t;if(r<.9*t)return r.toFixed(1)+" MB";const i=r/t;if(i<.9*t)return i.toFixed(1)+" GB";return(i/t).toFixed(1)+" TB"}const Tc=zt("jsoneditor:FocusTracker");function jc({onMount:e,onDestroy:t,getWindow:n,hasFocus:r,onFocus:i,onBlur:o}){let s,a=!1;function l(){const e=r();e&&(clearTimeout(s),a||(Tc("focus"),i(),a=e))}function c(){a&&(clearTimeout(s),s=setTimeout((()=>{Tc("blur"),a=!1,o()})))}e((()=>{Tc("mount FocusTracker");const e=n();e&&(e.addEventListener("focusin",l,!0),e.addEventListener("focusout",c,!0))})),t((()=>{Tc("destroy FocusTracker");const e=n();e&&(e.removeEventListener("focusin",l,!0),e.removeEventListener("focusout",c,!0))}))}function Nc(t){let r,i,o=[{id:i="path-"+t[0]},t[1]],s={};for(let e=0;e<o.length;e+=1)s=n(s,o[e]);return{c(){r=M("path"),z(r,s)},m(e,t){_(e,r,t)},p(e,[t]){z(r,s=De(o,[1&t&&i!==(i="path-"+e[0])&&{id:i},2&t&&e[1]]))},i:e,o:e,d(e){e&&O(r)}}}function Ic(e,t,n){let{id:r}=t,{data:i={}}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,i=e.data)},[r,i]}class Rc extends He{constructor(e){super(),qe(this,e,Ic,Nc,a,{id:0,data:1})}}function Dc(t){let r,i,o=[{id:i="polygon-"+t[0]},t[1]],s={};for(let e=0;e<o.length;e+=1)s=n(s,o[e]);return{c(){r=M("polygon"),z(r,s)},m(e,t){_(e,r,t)},p(e,[t]){z(r,s=De(o,[1&t&&i!==(i="polygon-"+e[0])&&{id:i},2&t&&e[1]]))},i:e,o:e,d(e){e&&O(r)}}}function Lc(e,t,n){let{id:r}=t,{data:i={}}=t;return e.$$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,i=e.data)},[r,i]}class zc extends He{constructor(e){super(),qe(this,e,Lc,Dc,a,{id:0,data:1})}}function Bc(t){let n;return{c(){n=M("g")},m(e,r){_(e,n,r),n.innerHTML=t[0]},p(e,[t]){1&t&&(n.innerHTML=e[0])},i:e,o:e,d(e){e&&O(n)}}}function Vc(e,t,n){let r,i=870711;let{data:o}=t;function s(e){if(!e||!e.raw)return null;let t=e.raw;const n={};return t=t.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,((e,t)=>{const r=(i+=1,`fa-${i.toString(16)}`);return n[t]=r,` id="${r}"`})),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((e,t,r,i)=>{const o=t||i;return o&&n[o]?`#${n[o]}`:e})),t}return e.$$set=e=>{"data"in e&&n(1,o=e.data)},e.$$.update=()=>{2&e.$$.dirty&&n(0,r=s(o))},[r,o]}class Fc extends He{constructor(e){super(),qe(this,e,Vc,Bc,a,{data:1})}}function qc(e){let t,n,r,i;const o=e[13].default,s=h(o,e,e[12],null);return{c(){t=M("svg"),s&&s.c(),D(t,"version","1.1"),D(t,"class",n="fa-icon "+e[0]+" svelte-1dof0an"),D(t,"x",e[8]),D(t,"y",e[9]),D(t,"width",e[1]),D(t,"height",e[2]),D(t,"aria-label",e[11]),D(t,"role",r=e[11]?"img":"presentation"),D(t,"viewBox",e[3]),D(t,"style",e[10]),U(t,"fa-spin",e[4]),U(t,"fa-pulse",e[6]),U(t,"fa-inverse",e[5]),U(t,"fa-flip-horizontal","horizontal"===e[7]),U(t,"fa-flip-vertical","vertical"===e[7])},m(e,n){_(e,t,n),s&&s.m(t,null),i=!0},p(e,[a]){s&&s.p&&(!i||4096&a)&&p(s,o,e,e[12],i?f(o,e[12],a,null):m(e[12]),null),(!i||1&a&&n!==(n="fa-icon "+e[0]+" svelte-1dof0an"))&&D(t,"class",n),(!i||256&a)&&D(t,"x",e[8]),(!i||512&a)&&D(t,"y",e[9]),(!i||2&a)&&D(t,"width",e[1]),(!i||4&a)&&D(t,"height",e[2]),(!i||2048&a)&&D(t,"aria-label",e[11]),(!i||2048&a&&r!==(r=e[11]?"img":"presentation"))&&D(t,"role",r),(!i||8&a)&&D(t,"viewBox",e[3]),(!i||1024&a)&&D(t,"style",e[10]),17&a&&U(t,"fa-spin",e[4]),65&a&&U(t,"fa-pulse",e[6]),33&a&&U(t,"fa-inverse",e[5]),129&a&&U(t,"fa-flip-horizontal","horizontal"===e[7]),129&a&&U(t,"fa-flip-vertical","vertical"===e[7])},i(e){i||(Ae(s,e),i=!0)},o(e){Me(s,e),i=!1},d(e){e&&O(t),s&&s.d(e)}}}function Hc(e,t,n){let{$$slots:r={},$$scope:i}=t,{class:o}=t,{width:s}=t,{height:a}=t,{box:l}=t,{spin:c=!1}=t,{inverse:u=!1}=t,{pulse:h=!1}=t,{flip:d=null}=t,{x:f}=t,{y:p}=t,{style:m}=t,{label:g}=t;return e.$$set=e=>{"class"in e&&n(0,o=e.class),"width"in e&&n(1,s=e.width),"height"in e&&n(2,a=e.height),"box"in e&&n(3,l=e.box),"spin"in e&&n(4,c=e.spin),"inverse"in e&&n(5,u=e.inverse),"pulse"in e&&n(6,h=e.pulse),"flip"in e&&n(7,d=e.flip),"x"in e&&n(8,f=e.x),"y"in e&&n(9,p=e.y),"style"in e&&n(10,m=e.style),"label"in e&&n(11,g=e.label),"$$scope"in e&&n(12,i=e.$$scope)},[o,s,a,l,c,u,h,d,f,p,m,g,i,r]}class Wc extends He{constructor(e){super(),qe(this,e,Hc,qc,a,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function Uc(e,t,n){const r=e.slice();return r[24]=t[n],r[26]=n,r}function Jc(e,t,n){const r=e.slice();return r[27]=t[n],r[26]=n,r}function Kc(e){let t,n,r,i,o=e[6].paths&&Gc(e),s=e[6].polygons&&Xc(e),a=e[6].raw&&Zc(e);return{c(){o&&o.c(),t=T(),s&&s.c(),n=T(),a&&a.c(),r=j()},m(e,l){o&&o.m(e,l),_(e,t,l),s&&s.m(e,l),_(e,n,l),a&&a.m(e,l),_(e,r,l),i=!0},p(e,i){e[6].paths?o?(o.p(e,i),64&i&&Ae(o,1)):(o=Gc(e),o.c(),Ae(o,1),o.m(t.parentNode,t)):o&&(Oe(),Me(o,1,1,(()=>{o=null})),Ee()),e[6].polygons?s?(s.p(e,i),64&i&&Ae(s,1)):(s=Xc(e),s.c(),Ae(s,1),s.m(n.parentNode,n)):s&&(Oe(),Me(s,1,1,(()=>{s=null})),Ee()),e[6].raw?a?(a.p(e,i),64&i&&Ae(a,1)):(a=Zc(e),a.c(),Ae(a,1),a.m(r.parentNode,r)):a&&(Oe(),Me(a,1,1,(()=>{a=null})),Ee())},i(e){i||(Ae(o),Ae(s),Ae(a),i=!0)},o(e){Me(o),Me(s),Me(a),i=!1},d(e){o&&o.d(e),e&&O(t),s&&s.d(e),e&&O(n),a&&a.d(e),e&&O(r)}}}function Gc(e){let t,n,r=e[6].paths,i=[];for(let t=0;t<r.length;t+=1)i[t]=Qc(Jc(e,r,t));const o=e=>Me(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);_(e,t,r),n=!0},p(e,n){if(64&n){let s;for(r=e[6].paths,s=0;s<r.length;s+=1){const o=Jc(e,r,s);i[s]?(i[s].p(o,n),Ae(i[s],1)):(i[s]=Qc(o),i[s].c(),Ae(i[s],1),i[s].m(t.parentNode,t))}for(Oe(),s=r.length;s<i.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Ae(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Me(i[e]);n=!1},d(e){E(i,e),e&&O(t)}}}function Qc(e){let t,n;return t=new Rc({props:{id:e[26],data:e[27]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.data=e[27]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function Xc(e){let t,n,r=e[6].polygons,i=[];for(let t=0;t<r.length;t+=1)i[t]=Yc(Uc(e,r,t));const o=e=>Me(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);_(e,t,r),n=!0},p(e,n){if(64&n){let s;for(r=e[6].polygons,s=0;s<r.length;s+=1){const o=Uc(e,r,s);i[s]?(i[s].p(o,n),Ae(i[s],1)):(i[s]=Yc(o),i[s].c(),Ae(i[s],1),i[s].m(t.parentNode,t))}for(Oe(),s=r.length;s<i.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Ae(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Me(i[e]);n=!1},d(e){E(i,e),e&&O(t)}}}function Yc(e){let t,n;return t=new zc({props:{id:e[26],data:e[24]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};64&n&&(r.data=e[24]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function Zc(e){let t,n,r;function i(t){e[15](t)}let o={};return void 0!==e[6]&&(o.data=e[6]),t=new Fc({props:o}),ue.push((()=>ze(t,"data",i))),{c(){Be(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const i={};!n&&64&r&&(n=!0,i.data=e[6],ye((()=>n=!1))),t.$set(i)},i(e){r||(Ae(t.$$.fragment,e),r=!0)},o(e){Me(t.$$.fragment,e),r=!1},d(e){Fe(t,e)}}}function eu(e){let t;const n=e[14].default,r=h(n,e,e[16],null),i=r||function(e){let t,n,r=e[6]&&Kc(e);return{c(){r&&r.c(),t=j()},m(e,i){r&&r.m(e,i),_(e,t,i),n=!0},p(e,n){e[6]?r?(r.p(e,n),64&n&&Ae(r,1)):(r=Kc(e),r.c(),Ae(r,1),r.m(t.parentNode,t)):r&&(Oe(),Me(r,1,1,(()=>{r=null})),Ee())},i(e){n||(Ae(r),n=!0)},o(e){Me(r),n=!1},d(e){r&&r.d(e),e&&O(t)}}}(e);return{c(){i&&i.c()},m(e,n){i&&i.m(e,n),t=!0},p(e,o){r?r.p&&(!t||65536&o)&&p(r,n,e,e[16],t?f(n,e[16],o,null):m(e[16]),null):i&&i.p&&(!t||64&o)&&i.p(e,t?o:-1)},i(e){t||(Ae(i,e),t=!0)},o(e){Me(i,e),t=!1},d(e){i&&i.d(e)}}}function tu(e){let t,n;return t=new Wc({props:{label:e[5],width:e[7],height:e[8],box:e[10],style:e[9],spin:e[1],flip:e[4],inverse:e[2],pulse:e[3],class:e[0],$$slots:{default:[eu]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,[n]){const r={};32&n&&(r.label=e[5]),128&n&&(r.width=e[7]),256&n&&(r.height=e[8]),1024&n&&(r.box=e[10]),512&n&&(r.style=e[9]),2&n&&(r.spin=e[1]),16&n&&(r.flip=e[4]),4&n&&(r.inverse=e[2]),8&n&&(r.pulse=e[3]),1&n&&(r.class=e[0]),65600&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function nu(e,t,n){let r,i,o,s,{$$slots:a={},$$scope:l}=t,{class:c=""}=t,{data:u}=t,{scale:h=1}=t,{spin:d=!1}=t,{inverse:f=!1}=t,{pulse:p=!1}=t,{flip:m=null}=t,{label:g=null}=t,v=null,{style:y=null}=t;function w(){let e=1;return void 0!==h&&(e=Number(h)),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*e}function b(){return v?Math.max(v.width,v.height)/16:1}return e.$$set=e=>{"class"in e&&n(0,c=e.class),"data"in e&&n(11,u=e.data),"scale"in e&&n(12,h=e.scale),"spin"in e&&n(1,d=e.spin),"inverse"in e&&n(2,f=e.inverse),"pulse"in e&&n(3,p=e.pulse),"flip"in e&&n(4,m=e.flip),"label"in e&&n(5,g=e.label),"style"in e&&n(13,y=e.style),"$$scope"in e&&n(16,l=e.$$scope)},e.$$.update=()=>{14336&e.$$.dirty&&(!function(){if(void 0===u)return;const e=function(e){if("iconName"in e&&"icon"in e){let t={},n=e.icon,r=e.iconName,i={width:n[0],height:n[1],paths:[{d:n[4]}]};return t[r]=i,t}return e}(u),[t]=Object.keys(e),r=e[t];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n(6,v=r)}(),n(7,r=v?v.width/b()*w():0),n(8,i=v?v.height/b()*w():0),n(9,o=function(){let e="";null!==y&&(e+=y);let t=w();if(1===t){if(0===e.length)return;return e}return""===e||e.endsWith(";")||(e+="; "),`${e}font-size: ${t}em`}()),n(10,s=v?`0 0 ${v.width} ${v.height}`:`0 0 ${r} ${i}`))},[c,d,f,p,m,g,v,r,i,o,s,u,h,y,a,function(e){v=e,n(6,v)},l]}class ru extends He{constructor(e){super(),qe(this,e,nu,tu,a,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function iu(e,t,n){const r=e.slice();return r[8]=t[n],r}function ou(e){let t,n;return t=new ru({props:{data:e[1]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.data=e[1]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function su(e){let t,n;return t=new ru({props:{data:e[8].icon}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.data=e[8].icon),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function au(e){let t,n,r,i,s,a,l,c,u,h=e[8].text+"",d=e[8].icon&&su(e);function f(){return e[6](e[8])}function p(){return e[7](e[8])}return{c(){t=A("button"),d&&d.c(),n=T(),r=P(h),i=T(),D(t,"type","button"),D(t,"class","jse-button jse-action jse-primary svelte-kvi5ls"),D(t,"title",s=e[8].title),t.disabled=a=e[8].disabled},m(e,o){_(e,t,o),d&&d.m(t,null),k(t,n),k(t,r),k(t,i),l=!0,c||(u=[N(t,"click",f),N(t,"mousedown",p)],c=!0)},p(i,o){(e=i)[8].icon?d?(d.p(e,o),8&o&&Ae(d,1)):(d=su(e),d.c(),Ae(d,1),d.m(t,n)):d&&(Oe(),Me(d,1,1,(()=>{d=null})),Ee()),(!l||8&o)&&h!==(h=e[8].text+"")&&V(r,h),(!l||8&o&&s!==(s=e[8].title))&&D(t,"title",s),(!l||8&o&&a!==(a=e[8].disabled))&&(t.disabled=a)},i(e){l||(Ae(d),l=!0)},o(e){Me(d),l=!1},d(e){e&&O(t),d&&d.d(),c=!1,o(u)}}}function lu(e){let t,n,r,i,o,s,a,l,c,u,h=e[1]&&ou(e),d=e[3],f=[];for(let t=0;t<d.length;t+=1)f[t]=au(iu(e,d,t));const p=e=>Me(f[e],1,1,(()=>{f[e]=null}));return{c(){t=A("div"),n=A("div"),h&&h.c(),r=T(),i=P(e[2]),o=T(),s=A("div");for(let e=0;e<f.length;e+=1)f[e].c();D(n,"class","jse-text svelte-kvi5ls"),U(n,"jse-clickable",null!==e[4]),D(s,"class","jse-actions svelte-kvi5ls"),D(t,"class",a="jse-message jse-"+e[0]+" svelte-kvi5ls")},m(a,d){_(a,t,d),k(t,n),h&&h.m(n,null),k(n,r),k(n,i),k(t,o),k(t,s);for(let e=0;e<f.length;e+=1)f[e].m(s,null);l=!0,c||(u=N(n,"click",e[5]),c=!0)},p(e,[o]){if(e[1]?h?(h.p(e,o),2&o&&Ae(h,1)):(h=ou(e),h.c(),Ae(h,1),h.m(n,r)):h&&(Oe(),Me(h,1,1,(()=>{h=null})),Ee()),(!l||4&o)&&V(i,e[2]),16&o&&U(n,"jse-clickable",null!==e[4]),8&o){let t;for(d=e[3],t=0;t<d.length;t+=1){const n=iu(e,d,t);f[t]?(f[t].p(n,o),Ae(f[t],1)):(f[t]=au(n),f[t].c(),Ae(f[t],1),f[t].m(s,null))}for(Oe(),t=d.length;t<f.length;t+=1)p(t);Ee()}(!l||1&o&&a!==(a="jse-message jse-"+e[0]+" svelte-kvi5ls"))&&D(t,"class",a)},i(e){if(!l){Ae(h);for(let e=0;e<d.length;e+=1)Ae(f[e]);l=!0}},o(e){Me(h),f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)Me(f[e]);l=!1},d(e){e&&O(t),h&&h.d(),E(f,e),c=!1,u()}}}function cu(e,t,n){let{type:r="success"}=t,{icon:i}=t,{message:o}=t,{actions:s=[]}=t,{onClick:a}=t;return e.$$set=e=>{"type"in e&&n(0,r=e.type),"icon"in e&&n(1,i=e.icon),"message"in e&&n(2,o=e.message),"actions"in e&&n(3,s=e.actions),"onClick"in e&&n(4,a=e.onClick)},[r,i,o,s,a,function(){a&&a()},e=>e.onClick(),e=>e.onMouseDown()]}class uu extends He{constructor(e){super(),qe(this,e,cu,lu,u,{type:0,icon:1,message:2,actions:3,onClick:4})}}function hu(e){return e.map((e=>"number"==typeof e?"["+e+"]":"string"==typeof e&&e.match(/^[A-Za-z0-9_$]+$/)?"."+e:'["'+String(e)+'"]')).join("")}function du(e){return e.map((e=>{const t=String(e);return fu.test(t)?`?.${t}`:`?.[${JSON.stringify(e)}]`})).join("")}const fu=/^[A-z$_][A-z$_\d]*$/i;function pu(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function mu(e){let t,n,r,i;const o=[vu,gu],s=[];function a(e,t){return e[2]||1===e[0].length?0:1}return n=a(e),r=s[n]=o[n](e),{c(){t=A("div"),r.c(),D(t,"class","jse-validation-errors-overview svelte-1oe8e8r")},m(e,r){_(e,t,r),s[n].m(t,null),i=!0},p(e,i){let l=n;n=a(e),n===l?s[n].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),r=s[n],r?r.p(e,i):(r=s[n]=o[n](e),r.c()),Ae(r,1),r.m(t,null))},i(e){i||(Ae(r),i=!0)},o(e){Me(r),i=!1},d(e){e&&O(t),s[n].d()}}}function gu(e){let t,n,r,i,o,s,a,l,c,u,h,d,f,p,m=e[0].length+"";return o=new ru({props:{data:Ec}}),h=new ru({props:{data:ic}}),{c(){t=A("table"),n=A("tbody"),r=A("tr"),i=A("td"),Be(o.$$.fragment),s=T(),a=A("td"),l=P(m),c=P(" validation errors\n              "),u=A("div"),Be(h.$$.fragment),D(i,"class","jse-validation-error-icon svelte-1oe8e8r"),D(u,"class","jse-validation-errors-expand svelte-1oe8e8r"),D(a,"class","svelte-1oe8e8r"),D(r,"class","jse-validation-error svelte-1oe8e8r"),D(t,"class","svelte-1oe8e8r")},m(m,g){_(m,t,g),k(t,n),k(n,r),k(r,i),Ve(o,i,null),k(r,s),k(r,a),k(a,l),k(a,c),k(a,u),Ve(h,u,null),d=!0,f||(p=N(r,"click",e[4]),f=!0)},p(e,t){(!d||1&t)&&m!==(m=e[0].length+"")&&V(l,m)},i(e){d||(Ae(o.$$.fragment,e),Ae(h.$$.fragment,e),d=!0)},o(e){Me(o.$$.fragment,e),Me(h.$$.fragment,e),d=!1},d(e){e&&O(t),Fe(o),Fe(h),f=!1,p()}}}function vu(e){let t,n,r,i=e[0],o=[];for(let t=0;t<i.length;t+=1)o[t]=wu(pu(e,i,t));const s=e=>Me(o[e],1,1,(()=>{o[e]=null}));return{c(){t=A("table"),n=A("tbody");for(let e=0;e<o.length;e+=1)o[e].c();D(t,"class","svelte-1oe8e8r")},m(e,i){_(e,t,i),k(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r=!0},p(e,t){if(11&t){let r;for(i=e[0],r=0;r<i.length;r+=1){const s=pu(e,i,r);o[r]?(o[r].p(s,t),Ae(o[r],1)):(o[r]=wu(s),o[r].c(),Ae(o[r],1),o[r].m(n,null))}for(Oe(),r=i.length;r<o.length;r+=1)s(r);Ee()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)Ae(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Me(o[e]);r=!1},d(e){e&&O(t),E(o,e)}}}function yu(t){let n,r,i,o,s;return r=new ru({props:{data:rc}}),{c(){n=A("button"),Be(r.$$.fragment),D(n,"type","button"),D(n,"class","jse-validation-errors-collapse svelte-1oe8e8r"),D(n,"title","Collapse validation errors")},m(e,a){_(e,n,a),Ve(r,n,null),i=!0,o||(s=N(n,"click",R(t[3])),o=!0)},p:e,i(e){i||(Ae(r.$$.fragment,e),i=!0)},o(e){Me(r.$$.fragment,e),i=!1},d(e){e&&O(n),Fe(r),o=!1,s()}}}function wu(e){let t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g=hu(e[6].path)+"",v=e[6].message+"";r=new ru({props:{data:Ec}});let y=0===e[8]&&e[0].length>1&&yu(e);function w(){return e[5](e[6])}return{c(){t=A("tr"),n=A("td"),Be(r.$$.fragment),i=T(),o=A("td"),s=P(g),a=T(),l=A("td"),c=P(v),u=T(),h=A("td"),y&&y.c(),d=T(),D(n,"class","jse-validation-error-icon svelte-1oe8e8r"),D(o,"class","svelte-1oe8e8r"),D(l,"class","svelte-1oe8e8r"),D(h,"class","jse-validation-error-action svelte-1oe8e8r"),D(t,"class","jse-validation-error svelte-1oe8e8r")},m(e,g){_(e,t,g),k(t,n),Ve(r,n,null),k(t,i),k(t,o),k(o,s),k(t,a),k(t,l),k(l,c),k(t,u),k(t,h),y&&y.m(h,null),k(t,d),f=!0,p||(m=N(t,"click",w),p=!0)},p(t,n){e=t,(!f||1&n)&&g!==(g=hu(e[6].path)+"")&&V(s,g),(!f||1&n)&&v!==(v=e[6].message+"")&&V(c,v),0===e[8]&&e[0].length>1?y?(y.p(e,n),1&n&&Ae(y,1)):(y=yu(e),y.c(),Ae(y,1),y.m(h,null)):y&&(Oe(),Me(y,1,1,(()=>{y=null})),Ee())},i(e){f||(Ae(r.$$.fragment,e),Ae(y),f=!0)},o(e){Me(r.$$.fragment,e),Me(y),f=!1},d(e){e&&O(t),Fe(r),y&&y.d(),p=!1,m()}}}function bu(e){let t,n,r=!ha(e[0]),i=r&&mu(e);return{c(){i&&i.c(),t=j()},m(e,r){i&&i.m(e,r),_(e,t,r),n=!0},p(e,[n]){1&n&&(r=!ha(e[0])),r?i?(i.p(e,n),1&n&&Ae(i,1)):(i=mu(e),i.c(),Ae(i,1),i.m(t.parentNode,t)):i&&(Oe(),Me(i,1,1,(()=>{i=null})),Ee())},i(e){n||(Ae(i),n=!0)},o(e){Me(i),n=!1},d(e){i&&i.d(e),e&&O(t)}}}function xu(e,t,n){let{validationErrors:r}=t,{selectError:i}=t,o=!0;return e.$$set=e=>{"validationErrors"in e&&n(0,r=e.validationErrors),"selectError"in e&&n(1,i=e.selectError)},[r,i,o,function(){n(2,o=!1)},function(){n(2,o=!0)},e=>{setTimeout((()=>i(e)))}]}class $u extends He{constructor(e){super(),qe(this,e,xu,bu,u,{validationErrors:0,selectError:1})}}const ku={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},Su={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},Cu={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},_u={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]},Ou=e=>({}),Eu=e=>({});function Au(e,t,n){const r=e.slice();return r[3]=t[n],r}const Mu=e=>({}),Pu=e=>({});function Tu(e){let t,n,r,i,o,a,l,c,u=e[3].icon&&Iu(e),h=e[3].text&&Ru(e);return{c(){t=A("button"),u&&u.c(),n=T(),h&&h.c(),D(t,"type","button"),D(t,"class",r="jse-button "+e[3].className+" svelte-v4jelk"),D(t,"title",i=e[3].title),t.disabled=o=e[3].disabled||!1},m(r,i){_(r,t,i),u&&u.m(t,null),k(t,n),h&&h.m(t,null),a=!0,l||(c=N(t,"click",(function(){s(e[3].onClick)&&e[3].onClick.apply(this,arguments)})),l=!0)},p(s,l){(e=s)[3].icon?u?(u.p(e,l),1&l&&Ae(u,1)):(u=Iu(e),u.c(),Ae(u,1),u.m(t,n)):u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee()),e[3].text?h?h.p(e,l):(h=Ru(e),h.c(),h.m(t,null)):h&&(h.d(1),h=null),(!a||1&l&&r!==(r="jse-button "+e[3].className+" svelte-v4jelk"))&&D(t,"class",r),(!a||1&l&&i!==(i=e[3].title))&&D(t,"title",i),(!a||1&l&&o!==(o=e[3].disabled||!1))&&(t.disabled=o)},i(e){a||(Ae(u),a=!0)},o(e){Me(u),a=!1},d(e){e&&O(t),u&&u.d(),h&&h.d(),l=!1,c()}}}function ju(t){let n;return{c(){n=A("div"),D(n,"class","jse-space svelte-v4jelk")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Nu(t){let n;return{c(){n=A("div"),D(n,"class","jse-separator svelte-v4jelk")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Iu(e){let t,n;return t=new ru({props:{data:e[3].icon}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[3].icon),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function Ru(e){let t,n=e[3].text+"";return{c(){t=P(n)},m(e,n){_(e,t,n)},p(e,r){1&r&&n!==(n=e[3].text+"")&&V(t,n)},d(e){e&&O(t)}}}function Du(e){let t,n,r,i;const o=[Nu,ju,Tu],s=[];function a(e,t){return!0===e[3].separator?0:!0===e[3].space?1:2}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=j()},m(e,n){s[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Ae(n,1),n.m(r.parentNode,r))},i(e){i||(Ae(n),i=!0)},o(e){Me(n),i=!1},d(e){s[t].d(e),e&&O(r)}}}function Lu(e){let t,n,r,i;const o=e[2].left,s=h(o,e,e[1],Pu);let a=e[0],l=[];for(let t=0;t<a.length;t+=1)l[t]=Du(Au(e,a,t));const c=e=>Me(l[e],1,1,(()=>{l[e]=null})),u=e[2].right,d=h(u,e,e[1],Eu);return{c(){t=A("div"),s&&s.c(),n=T();for(let e=0;e<l.length;e+=1)l[e].c();r=T(),d&&d.c(),D(t,"class","jse-menu svelte-v4jelk")},m(e,o){_(e,t,o),s&&s.m(t,null),k(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);k(t,r),d&&d.m(t,null),i=!0},p(e,[n]){if(s&&s.p&&(!i||2&n)&&p(s,o,e,e[1],i?f(o,e[1],n,Mu):m(e[1]),Pu),1&n){let i;for(a=e[0],i=0;i<a.length;i+=1){const o=Au(e,a,i);l[i]?(l[i].p(o,n),Ae(l[i],1)):(l[i]=Du(o),l[i].c(),Ae(l[i],1),l[i].m(t,r))}for(Oe(),i=a.length;i<l.length;i+=1)c(i);Ee()}d&&d.p&&(!i||2&n)&&p(d,u,e,e[1],i?f(u,e[1],n,Ou):m(e[1]),Eu)},i(e){if(!i){Ae(s,e);for(let e=0;e<a.length;e+=1)Ae(l[e]);Ae(d,e),i=!0}},o(e){Me(s,e),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)Me(l[e]);Me(d,e),i=!1},d(e){e&&O(t),s&&s.d(e),E(l,e),d&&d.d(e)}}}function zu(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:o=[]}=t;return e.$$set=e=>{"items"in e&&n(0,o=e.items),"$$scope"in e&&n(1,i=e.$$scope)},[o,i,r]}class Bu extends He{constructor(e){super(),qe(this,e,zu,Lu,u,{items:0})}}function Vu(t){let n;return{c(){n=A("div"),n.innerHTML='<a href="https://codemirror.net" target="_blank" rel="noopener noreferrer" title="Code mode is powered by CodeMirror" class="svelte-1yyupsl">powered by CodeMirror</a>',D(n,"slot","right"),D(n,"class","jse-powered-by svelte-1yyupsl")},m(e,t){_(e,n,t)},p:e,d(e){e&&O(n)}}}function Fu(e){let t,n;return t=new Bu({props:{items:e[0],$$slots:{right:[Vu]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.items=e[0]),131072&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function qu(e,t,n){let r,i,{readOnly:o=!1}=t,{onFormat:s}=t,{onCompact:a}=t,{onSort:l}=t,{onTransform:c}=t,{onToggleSearch:u}=t,{onUndo:h}=t,{onRedo:d}=t,{canUndo:f}=t,{canRedo:p}=t,{canFormat:m}=t,{canCompact:g}=t,{canSort:v}=t,{canTransform:y}=t,{onRenderMenu:w=li}=t;return e.$$set=e=>{"readOnly"in e&&n(1,o=e.readOnly),"onFormat"in e&&n(2,s=e.onFormat),"onCompact"in e&&n(3,a=e.onCompact),"onSort"in e&&n(4,l=e.onSort),"onTransform"in e&&n(5,c=e.onTransform),"onToggleSearch"in e&&n(6,u=e.onToggleSearch),"onUndo"in e&&n(7,h=e.onUndo),"onRedo"in e&&n(8,d=e.onRedo),"canUndo"in e&&n(9,f=e.canUndo),"canRedo"in e&&n(10,p=e.canRedo),"canFormat"in e&&n(11,m=e.canFormat),"canCompact"in e&&n(12,g=e.canCompact),"canSort"in e&&n(13,v=e.canSort),"canTransform"in e&&n(14,y=e.canTransform),"onRenderMenu"in e&&n(15,w=e.onRenderMenu)},e.$$.update=()=>{32766&e.$$.dirty&&n(16,r=o?[{space:!0}]:[{icon:Cu,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:s,disabled:o||!m},{icon:_u,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:a,disabled:o||!g},{separator:!0},{icon:sc,title:"Sort",className:"jse-sort",onClick:l,disabled:o||!v},{icon:bc,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:c,disabled:o||!y},{icon:$c,title:"Search (Ctrl+F)",className:"jse-search",onClick:u},{separator:!0},{icon:ac,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:h,disabled:!f},{icon:lc,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:d,disabled:!p},{space:!0}]),98304&e.$$.dirty&&n(0,i=w("code",r)||r)},[i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,w,r]}class Hu extends He{constructor(e){super(),qe(this,e,qu,Fu,u,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}class Wu{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),Ju.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let n=[];return this.decompose(e,t,n,0),Ju.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Qu(this),i=new Qu(e);for(let e=t,o=t;;){if(r.next(e),i.next(e),e=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(o+=r.value.length,r.done||o>=n)return!0}}iter(e=1){return new Qu(this,e)}iterRange(e,t=this.length){return new Xu(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Yu(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Uu(e):Ju.from(Uu.split(e,[])):Wu.empty}}class Uu extends Wu{constructor(e,t=function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Zu(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new Uu(Gu(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=Ku(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new Uu(t,e.length+i.length));else{let e=t.length>>1;n.push(new Uu(t.slice(0,e)),new Uu(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof Uu))return super.replace(e,t,n);let r=Ku(this.text,Ku(n.text,Gu(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new Uu(r,i):Ju.from(Uu.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new Uu(n,r)),n=[],r=-1);return r>-1&&t.push(new Uu(n,r)),t}}class Ju extends Wu{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if(n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new Ju(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ju))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let t of e)n+=t.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new Uu(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof Ju)for(let t of e.children)u(t);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof Uu&&a&&(t=c[c.length-1])instanceof Uu&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new Uu(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:Ju.from(c,l)),l=-1,a=c.length=0)}for(let t of e)u(t);return h(),1==s.length?s[0]:new Ju(s,t)}}function Ku(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function Gu(e,t,n){return Ku(e,[""],t,n)}Wu.empty=new Uu([""],0);class Qu{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Uu?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof Uu?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof Uu){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof Uu?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Xu{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Qu(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Yu{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Wu.prototype[Symbol.iterator]=function(){return this.iter()},Qu.prototype[Symbol.iterator]=Xu.prototype[Symbol.iterator]=Yu.prototype[Symbol.iterator]=function(){return this});class Zu{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}let eh="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<eh.length;e++)eh[e]+=eh[e-1];function th(e){for(let t=1;t<eh.length;t+=2)if(eh[t]>e)return eh[t-1]<=e;return!1}function nh(e){return e>=127462&&e<=127487}function rh(e,t,n=!0,r=!0){return(n?ih:oh)(e,t,r)}function ih(e,t,n){if(t==e.length)return t;t&&sh(e.charCodeAt(t))&&ah(e.charCodeAt(t-1))&&t--;let r=lh(e,t);for(t+=uh(r);t<e.length;){let i=lh(e,t);if(8205==r||8205==i||n&&th(i))t+=uh(i),r=i;else{if(!nh(i))break;{let n=0,r=t-2;for(;r>=0&&nh(lh(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function oh(e,t,n){for(;t>0;){let r=ih(e,t-2,n);if(r<t)return r;t--}return 0}function sh(e){return e>=56320&&e<57344}function ah(e){return e>=55296&&e<56320}function lh(e,t){let n=e.charCodeAt(t);if(!ah(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return sh(r)?r-56320+(n-55296<<10)+65536:n}function ch(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function uh(e){return e<65536?1:2}const hh=/\r\n?|\n/;var dh=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(dh||(dh={}));class fh{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){vh(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new fh(e)}composeDesc(e){return this.empty?e:e.empty?this:wh(this,e)}mapDesc(e,t=!1){return e.empty?this:yh(this,e,t)}mapPos(e,t=-1,n=dh.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=dh.Simple&&l>=e&&(n==dh.TrackDel&&r<e&&l>e||n==dh.TrackBefore&&r<e||n==dh.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new fh(e)}static create(e){return new fh(e)}}class ph extends fh{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return vh(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return yh(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(Wu.empty);n.push(o?e.slice(i,i+o):Wu.empty)}i+=o}return new ph(t,n)}compose(e){return this.empty?e:e.empty?this:wh(this,e,!0)}map(e,t=!1){return e.empty?this:yh(this,e,t,!0)}iterChanges(e,t=!1){vh(this,e,t)}get desc(){return fh.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new bh(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);mh(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;mh(t,e,o),o>0&&gh(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);mh(t,e,-1),mh(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new ph(t,n),filtered:fh.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&mh(r,t-o,-1);let n=new ph(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ph){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError(`Invalid change range ${e} to ${s} (in doc of length ${t})`);let u=c?"string"==typeof c?Wu.of(c.split(n||hh)):c:Wu.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&mh(r,e-o,-1),mh(r,s-e,h),gh(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new ph(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(Wu.empty);n[r]=Wu.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new ph(t,n)}static createSet(e,t){return new ph(e,t)}}function mh(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function gh(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(Wu.empty);e.push(n)}}function vh(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=Wu.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function yh(e,t,n,r=!1){let i=[],o=r?[]:null,s=new bh(e),a=new bh(t);for(let e=0,t=0;;)if(-1==s.ins)e+=s.len,s.next();else if(-1==a.ins&&t<e){let n=Math.min(a.len,e-t);a.forward(n),mh(i,n,-1),t+=n}else if(a.ins>=0&&(s.done||t<e||t==e&&(a.len<s.len||a.len==s.len&&!n))){for(mh(i,a.ins,-1);e>t&&!s.done&&e+s.len<t+a.len;)e+=s.len,s.next();t+=a.len,a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?ph.createSet(i,o):fh.create(i);throw new Error("Mismatched change set lengths")}{let n=0,r=e+s.len;for(;;)if(a.ins>=0&&t>e&&t+a.len<r)n+=a.ins,t+=a.len,a.next();else{if(!(-1==a.ins&&t<r))break;{let e=Math.min(a.len,r-t);n+=e,a.forward(e),t+=e}}mh(i,n,s.ins),o&&gh(o,i,s.text),e=r,s.next()}}}function wh(e,t,n=!1){let r=[],i=n?[]:null,o=new bh(e),s=new bh(t);for(let e=!1;;){if(o.done&&s.done)return i?ph.createSet(r,i):fh.create(r);if(0==o.ins)mh(r,o.len,0,e),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let t=Math.min(o.len2,s.len),n=r.length;if(-1==o.ins){let n=-1==s.ins?-1:s.off?0:s.ins;mh(r,t,n,e),i&&n&&gh(i,r,s.text)}else-1==s.ins?(mh(r,o.off?0:o.len,t,e),i&&gh(i,r,o.textBit(t))):(mh(r,o.off?0:o.len,s.off?0:s.ins,e),i&&!s.off&&gh(i,r,s.text));e=(o.ins>t||s.ins>=0&&s.len>t)&&(e||r.length>n),o.forward2(t),s.forward(t)}}else mh(r,0,s.ins,e),i&&gh(i,r,s.text),s.next()}}class bh{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Wu.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Wu.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class xh{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new xh(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return $h.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return $h.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return $h.range(e.anchor,e.head)}static create(e,t,n){return new xh(e,t,n)}}class $h{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:$h.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new $h([this.main],0)}addRange(e,t=!0){return $h.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,$h.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new $h(e.ranges.map((e=>xh.fromJSON(e))),e.main)}static single(e,t=e){return new $h([$h.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return $h.normalized(e.slice(),t);n=i.to}return new $h(e,t)}static cursor(e,t=0,n,r){return xh.create(e,e,(0==t?0:t<0?4:8)|(null==n?3:Math.min(2,n))|(null!=r?r:33554431)<<5)}static range(e,t,n){let r=(null!=n?n:33554431)<<5;return t<e?xh.create(t,e,24|r):xh.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let n=1;n<e.length;n++){let r=e[n],i=e[n-1];if(r.empty?r.from<=i.to:r.from<i.to){let o=i.from,s=Math.max(r.to,i.to);n<=t&&t--,e.splice(--n,2,r.anchor>r.head?$h.range(s,o):$h.range(o,s))}}return new $h(e,t)}}function kh(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let Sh=0;class Ch{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.extensions=i,this.id=Sh++,this.default=e([])}static define(e={}){return new Ch(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:_h),!!e.static,e.enables)}of(e){return new Oh([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Oh(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Oh(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function _h(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class Oh{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=Sh++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(t=e[n.id])&&void 0!==t?t:1))&&c.push(e[n.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||Ah(e,c)){let t=n(e);if(s?!Eh(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a=n(e),l=t.config.address[i];if(null!=l){let n=Hh(t,l);if(this.dependencies.every((n=>n instanceof Ch?t.facet(n)===e.facet(n):!(n instanceof Th)||t.field(n,!1)==e.field(n,!1)))||(s?Eh(a,n,r):r(a,n)))return e.values[o]=n,0}return e.values[o]=a,1}}}}function Eh(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function Ah(e,t){let n=!1;for(let r of t)1&qh(e,r)&&(n=!0);return n}function Mh(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=Hh(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)qh(e,t);return e.values[s]=a(e),1},update(e,n){if(!Ah(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=Ah(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&_h(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const Ph=Ch.define({static:!0});class Th{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new Th(Sh++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ph).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,Ph.of({field:this,create:e})]}get extension(){return this}}const jh=4,Nh=3,Ih=2,Rh=1;function Dh(e){return t=>new zh(t,e)}const Lh={highest:Dh(0),high:Dh(Rh),default:Dh(Ih),low:Dh(Nh),lowest:Dh(jh)};class zh{constructor(e,t){this.inner=e,this.prec=t}}class Bh{of(e){return new Vh(this,e)}reconfigure(e){return Bh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Vh{constructor(e,t){this.compartment=e,this.inner=t}}class Fh{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let n of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof Vh&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof Vh){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof zh)o(e.inner,e.prec);else if(e instanceof Th)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof Oh)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,s);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,Ih),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))n instanceof Th?r.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let e of r)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==n?void 0:n.config.facets;for(let e in i){let t=i[e],r=t[0].facet,o=c&&c[e]||[];if(t.every((e=>0==e.type)))if(s[r.id]=a.length<<1|1,_h(o,t))a.push(n.facet(r));else{let e=r.combine(t.map((e=>e.value)));a.push(n&&r.compare(e,n.facet(r))?n.facet(r):e)}else{for(let e of t)0==e.type?(s[e.id]=a.length<<1|1,a.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[r.id]=l.length<<1,l.push((e=>Mh(e,r,t)))}}let u=l.map((e=>e(s)));return new Fh(e,o,u,s,a,i)}}function qh(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function Hh(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Wh=Ch.define(),Uh=Ch.define({combine:e=>e.some((e=>e)),static:!0}),Jh=Ch.define({combine:e=>e.length?e[0]:void 0,static:!0}),Kh=Ch.define(),Gh=Ch.define(),Qh=Ch.define(),Xh=Ch.define({combine:e=>!!e.length&&e[0]});class Yh{constructor(e,t){this.type=e,this.value=t}static define(){return new Zh}}class Zh{of(e){return new Yh(this,e)}}class ed{constructor(e){this.map=e}of(e){return new td(this,e)}}class td{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new td(this.type,t)}is(e){return this.type==e}static define(e={}){return new ed(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}td.reconfigure=td.define(),td.appendConfig=td.define();class nd{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&kh(n,t.newLength),i.some((e=>e.type==nd.time))||(this.annotations=i.concat(nd.time.of(Date.now())))}static create(e,t,n,r,i,o){return new nd(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(nd.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function rd(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function id(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=ph.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:td.mapEffects(e.effects,i).concat(td.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function od(e,t,n){let r=t.selection,i=ld(t.annotations);return t.userEvent&&(i=i.concat(nd.userEvent.of(t.userEvent))),{changes:t.changes instanceof ph?t.changes:ph.of(t.changes||[],n,e.facet(Jh)),selection:r&&(r instanceof $h?r:$h.single(r.anchor,r.head)),effects:ld(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function sd(e,t,n){let r=od(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let i=1;i<t.length;i++){!1===t[i].filter&&(n=!1);let o=!!t[i].sequential;r=id(r,od(e,t[i],o?r.changes.newLength:e.doc.length),o)}let i=nd.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(Qh),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=id(e,od(t,o,e.changes.newLength),!0))}return r==e?e:nd.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let r of t.facet(Kh)){let t=r(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:rd(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=ph.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.invertedDesc}e=nd.create(t,r,e.selection&&e.selection.map(i),td.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(Gh);for(let n=r.length-1;n>=0;n--){let i=r[n](e);e=i instanceof nd?i:Array.isArray(i)&&1==i.length&&i[0]instanceof nd?i[0]:sd(t,ld(i),!1)}return e}(i):i)}nd.time=Yh.define(),nd.userEvent=Yh.define(),nd.addToHistory=Yh.define(),nd.remote=Yh.define();const ad=[];function ld(e){return null==e?ad:Array.isArray(e)?e:[e]}var cd=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(cd||(cd={}));const ud=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let hd;try{hd=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}function dd(e){return t=>{if(!/\S/.test(t))return cd.Space;if(function(e){if(hd)return hd.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ud.test(n)))return!0}return!1}(t))return cd.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return cd.Word;return cd.Other}}class fd{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)qh(this,e<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return qh(this,n),Hh(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return sd(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let t of e.effects)t.is(Bh.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(t.value.compartment,t.value.extension)):t.is(td.reconfigure)?(n=null,r=t.value):t.is(td.appendConfig)&&(n=null,r=ld(r).concat(t.value));if(n)t=e.startState.values.slice();else{n=Fh.resolve(r,i,this),t=new fd(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new fd(n,e.newDoc,e.newSelection,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:$h.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=ld(n.effects);for(let n=1;n<t.ranges.length;n++){let s=e(t.ranges[n]),a=this.changes(s.changes),l=a.map(r);for(let e=0;e<n;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(s.range.map(c)),r=r.compose(l),o=td.mapEffects(o,l).concat(td.mapEffects(ld(s.effects),c))}return{changes:r,selection:$h.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof ph?e:ph.of(e,this.doc.length,this.facet(fd.lineSeparator))}toText(e){return Wu.of(e.split(this.facet(fd.lineSeparator)||hh))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(qh(this,t),Hh(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof Th&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let t in n){let i=n[t],o=e[t];r.push(i.init((e=>i.spec.fromJSON(o,e))))}return fd.create({doc:e.doc,selection:$h.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=Fh.resolve(e.extensions||[],new Map),n=e.doc instanceof Wu?e.doc:Wu.of((e.doc||"").split(t.staticFacet(fd.lineSeparator)||hh)),r=e.selection?e.selection instanceof $h?e.selection:$h.single(e.selection.anchor,e.selection.head):$h.single(0);return kh(r,n.length),t.staticFacet(Uh)||(r=r.asSingle()),new fd(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(fd.tabSize)}get lineBreak(){return this.facet(fd.lineSeparator)||"\n"}get readOnly(){return this.facet(Xh)}phrase(e,...t){for(let t of this.facet(fd.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(Wh))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return dd(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=rh(t,o,!1);if(i(t.slice(e,o))!=cd.Word)break;o=e}for(;s<r;){let e=rh(t,s);if(i(t.slice(s,e))!=cd.Word)break;s=e}return o==s?null:$h.range(o+n,s+n)}}function pd(e,t,n={}){let r={};for(let t of e)for(let e of Object.keys(t)){let i=t[e],o=r[e];if(void 0===o)r[e]=i;else if(o===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,i)}}for(let e in t)void 0===r[e]&&(r[e]=t[e]);return r}fd.allowMultipleSelections=Uh,fd.tabSize=Ch.define({combine:e=>e.length?e[0]:4}),fd.lineSeparator=Jh,fd.readOnly=Xh,fd.phrases=Ch.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),fd.languageData=Wh,fd.changeFilter=Kh,fd.transactionFilter=Gh,fd.transactionExtender=Qh,Bh.reconfigure=td.define();class md{eq(e){return this==e}range(e,t=e){return gd.create(e,t,this)}}md.prototype.startSide=md.prototype.endSide=0,md.prototype.point=!1,md.prototype.mapMode=dh.TrackDel;class gd{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new gd(e,t,n)}}function vd(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class yd{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new yd(r,i,n,s):null,pos:o}}}class wd{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new wd(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(vd)),this.isEmpty)return t.length?wd.of(t):this;let s=new $d(this,null,-1).goto(0),a=0,l=[],c=new bd;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(gd.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?wd.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i],a=e.touchesRange(o,o+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(o));else if(!0===a){let{mapped:i,pos:a}=s.map(o,e);i&&(r=Math.max(r,i.maxPoint),t.push(i),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new wd(n,t,i||wd.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return kd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return kd.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=xd(o,s,n),l=new Cd(o,a,i),c=new Cd(s,a,i);n.iterGaps(((e,t,n)=>_d(l,e,c,t,n,r))),n.empty&&0==n.length&&_d(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=1e9);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=xd(i,o),a=new Cd(i,s,0).goto(n),l=new Cd(o,s,0).goto(n);for(;;){if(a.to!=l.to||!Od(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new Cd(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point?(r.point(s,e,o.point,o.activeForPoint(o.to),a,o.pointRank),a=o.openEnd(e)+(o.to>e?1:0)):e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e)),o.to>n)break;s=o.to,o.next()}return a}static of(e,t=!1){let n=new bd;for(let r of e instanceof gd?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(vd(t,r)>0)return e.slice().sort(vd);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}wd.empty=new wd([],[],null,-1),wd.empty.nextLayer=wd.empty;class bd{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new yd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new bd)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(wd.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=wd.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function xd(e,t,n){let r=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&r.set(t.chunk[e],t.chunkPos[e]);let i=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let o=r.get(e.chunk[t]);null==o||(n?n.mapPos(o):o)!=e.chunkPos[t]||(null==n?void 0:n.touchesRange(o,o+e.chunk[t].length))||i.add(e.chunk[t])}return i}class $d{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class kd{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new $d(o,t,n,i));return 1==r.length?r[0]:new kd(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Sd(this.heap,e);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Sd(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Sd(this.heap,0)}}}function Sd(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class Cd{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=kd.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ed(this.active,e),Ed(this.activeTo,e),Ed(this.activeRank,e),this.minActive=Md(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;Ad(this.active,t,n),Ad(this.activeTo,t,r),Ad(this.activeRank,t,i),e&&Ad(e,t,this.cursor.from),this.minActive=Md(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null,r=0;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&Ed(n,i)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let i=this.cursor.value;if(i.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=i,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=i.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){let t=0;for(;t<n.length&&n[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function _d(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&Od(e.activeForPoint(e.to+l),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!Od(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function Od(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function Ed(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function Ad(e,t,n){for(let n=e.length-1;n>=t;n--)e[n+1]=e[n];e[t]=n}function Md(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function Pd(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=rh(e,i));return r}function Td(e,t,n,r){for(let r=0,i=0;;){if(i>=t)return r;if(r==e.length)break;i+=9==e.charCodeAt(r)?n-i%n:1,r=rh(e,r)}return!0===r?-1:e.length}const jd="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),Nd="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Id="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Rd{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)i(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Id[jd]||1;return Id[jd]=e+1,"ͼ"+e.toString(36)}static mount(e,t){(e[Nd]||new Ld(e)).mount(Array.isArray(t)?t:[t])}}let Dd=null;class Ld{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Dd)return e.adoptedStyleSheets=[Dd.sheet].concat(e.adoptedStyleSheets),e[Nd]=Dd;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Dd=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[Nd]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var zd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Bd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},Vd="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Fd="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),qd="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Hd="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Wd="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ud=Vd&&(Hd||+Vd[1]<57)||qd&&Hd,Jd=0;Jd<10;Jd++)zd[48+Jd]=zd[96+Jd]=String(Jd);for(Jd=1;Jd<=24;Jd++)zd[Jd+111]="F"+Jd;for(Jd=65;Jd<=90;Jd++)zd[Jd]=String.fromCharCode(Jd+32),Bd[Jd]=String.fromCharCode(Jd);for(var Kd in zd)Bd.hasOwnProperty(Kd)||(Bd[Kd]=zd[Kd]);function Gd(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Qd(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Xd(e,t){if(!t.anchorNode)return!1;try{return Qd(e,t.anchorNode)}catch(e){return!1}}function Yd(e){return 3==e.nodeType?hf(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Zd(e,t,n,r){return!!n&&(tf(e,t,n,r,-1)||tf(e,t,n,r,1))}function ef(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function tf(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:nf(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=ef(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?nf(e):0}}}function nf(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const rf={left:0,right:0,top:0,bottom:0};function of(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function sf(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class af{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let lf,cf=null;function uf(e){if(e.setActive)return e.setActive();if(cf)return e.focus(cf);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==cf?{get preventScroll(){return cf={preventScroll:!0},!0}}:void 0),!cf){cf=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function hf(e,t,n=t){let r=lf||(lf=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function df(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function ff(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class pf{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new pf(e.parentNode,ef(e),t)}static after(e,t){return new pf(e.parentNode,ef(e)+1,t)}}const mf=[];class gf{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,n=this.dom,r=null;for(let i of this.children){if(i.dirty){if(!i.dom&&(t=r?r.nextSibling:n.firstChild)){let e=gf.get(t);e&&(e.parent||e.constructor!=i.constructor)||i.reuseDOM(t)}i.sync(e),i.dirty=0}if(t=r?r.nextSibling:n.firstChild,e&&!e.written&&e.node==n&&t!=i.dom&&(e.written=!0),i.dom.parentNode==n)for(;t&&t!=i.dom;)t=vf(t);else n.insertBefore(i.dom,t);r=i.dom}for(t=r?r.nextSibling:n.firstChild,t&&e&&e.node==n&&(e.written=!0);t;)t=vf(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==nf(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!gf.get(n);)n=n.nextSibling;if(!n)return this.length;for(let e=0,t=0;;e++){let r=this.children[e];if(r.dom==n)return t;t+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=mf){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...n);for(let e=0;e<n.length;e++)n[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yf(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,n,r,i,o){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function vf(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}gf.prototype.breakAfter=0;class yf{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function wf(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&i<e.length?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:(i&&e.merge(0,i,null,!1,0,l),o.push(e))):(null==e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function bf(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let e of r)h+=e.length;e.length+=h,wf(e,c,u,a,l,r,0,i,o)}let xf="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},$f="undefined"!=typeof document?document:{documentElement:{style:{}}};const kf=/Edge\/(\d+)/.exec(xf.userAgent),Sf=/MSIE \d/.test(xf.userAgent),Cf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xf.userAgent),_f=!!(Sf||Cf||kf),Of=!_f&&/gecko\/(\d+)/i.test(xf.userAgent),Ef=!_f&&/Chrome\/(\d+)/.exec(xf.userAgent),Af="webkitFontSmoothing"in $f.documentElement.style,Mf=!_f&&/Apple Computer/.test(xf.vendor),Pf=Mf&&(/Mobile\/\w+/.test(xf.userAgent)||xf.maxTouchPoints>2);var Tf={mac:Pf||/Mac/.test(xf.platform),windows:/Win/.test(xf.platform),linux:/Linux|X11/.test(xf.platform),ie:_f,ie_version:Sf?$f.documentMode||6:Cf?+Cf[1]:kf?+kf[1]:0,gecko:Of,gecko_version:Of?+(/Firefox\/(\d+)/.exec(xf.userAgent)||[0,0])[1]:0,chrome:!!Ef,chrome_version:Ef?+Ef[1]:0,ios:Pf,android:/Android\b/.test(xf.userAgent),webkit:Af,safari:Mf,webkit_version:Af?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=$f.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class jf extends gf{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return(!n||n instanceof jf&&!(this.length-(t-e)+n.length>256))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new jf(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new pf(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return If(this.dom,e,t)}}class Nf extends gf{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let e of t)e.setParent(this)}setAttrs(e){if(ff(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof Nf&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(bf(this,e,t,n?n.children:[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let o of this.children){let s=n+o.length;s>e&&t.push(n<e?o.split(e-n):o),r<0&&n>=e&&(r=i),n=s,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Nf(this.mark,t,o)}domAtPos(e){return Vf(this.dom,this.children,e)}coordsAt(e,t){return qf(this,e,t)}}function If(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?Tf.chrome||Tf.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=hf(e,i,o).getClientRects();if(!a.length)return rf;let l=a[(s?s<0:n>=0)?0:a.length-1];return Tf.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?of(l,s<0):l||null}class Rf extends gf{constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}static create(e,t,n){return new(e.customView||Rf)(e,t,n)}split(e){let t=Rf.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof Rf&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Rf&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Wu.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):Wu.empty}domAtPos(e){return 0==e?pf.before(this.dom):pf.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.dom.getClientRects(),r=null;if(!n.length)return rf;for(let t=e>0?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:of(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Df extends Rf{domAtPos(e){let{topView:t,text:n}=this.widget;return t?Lf(e,0,t,n,((e,t)=>e.domAtPos(t)),(e=>new pf(n,Math.min(e,n.nodeValue.length)))):new pf(n,Math.min(e,n.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:n,text:r}=this.widget;return n?zf(e,t,n,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:n,text:r}=this.widget;return n?Lf(e,t,n,r,((e,t,n)=>e.coordsAt(t,n)),((e,t)=>If(r,e,t))):If(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Lf(e,t,n,r,i,o){if(n instanceof Nf){for(let s of n.children){let n=Qd(s.dom,r),a=n?r.nodeValue.length:s.length;if(e<a||e==a&&s.getSide()<=0)return n?Lf(e,t,s,r,i,o):i(s,e,t);e-=a}return i(n,n.length,-1)}return n.dom==r?o(e,t):i(n,e,t)}function zf(e,t,n,r){if(n instanceof Nf)for(let i of n.children){let n=0,o=Qd(i.dom,r);if(Qd(i.dom,e))return n+(o?zf(e,t,i,r):i.localPosFromDOM(e,t));n+=o?r.nodeValue.length:i.length}else if(n.dom==r)return Math.min(t,r.nodeValue.length);return n.localPosFromDOM(e,t)}class Bf extends gf{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Bf&&e.side==this.side}split(){return new Bf(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return pf.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),n=function(e,t){let n=e.parent,r=n?n.children.indexOf(e):-1;for(;n&&r>=0;)if(t<0?r>0:r<n.children.length){let e=n.children[r+t];if(e instanceof jf){let n=e.coordsAt(t<0?e.length:0,t);if(n)return n}r+=t}else{if(!(n instanceof Nf&&n.parent)){let e=n.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=n.parent.children.indexOf(n)+(t<0?0:1),n=n.parent}return}(this,this.side>0?-1:1);return n&&n.top<t.bottom&&n.bottom>t.top?{left:t.left,right:t.right,top:n.top,bottom:n.bottom}:t}get overrideDOMText(){return Wu.empty}}function Vf(e,t,n){let r=0;for(let i=0;r<t.length;r++){let o=t[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(n>i&&n<s&&o.dom.parentNode==e)return o.domAtPos(n-i);if(n<=i)break;i=s}}for(;r>0;r--){let n=t[r-1].dom;if(n.parentNode==e)return pf.after(n)}return new pf(e,0)}function Ff(e,t,n){let r,{children:i}=e;n>0&&t instanceof Nf&&i.length&&(r=i[i.length-1])instanceof Nf&&r.mark.eq(t.mark)?Ff(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function qf(e,t,n){for(let r=0,i=0;i<e.children.length;i++){let o,s=e.children[i],a=r+s.length;if((n<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||i+1==e.children.length||(o=e.children[i+1]).length||o.getSide()>0)){let e=0;if(a==r){if(s.getSide()<=0)continue;e=n=-s.getSide()}let i=s.coordsAt(Math.max(0,t-r),n);return e&&i?of(i,n<0):i}r=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let i=Yd(r);return i[i.length-1]||null}function Hf(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}function Wf(e,t){if(e==t)return!0;if(!e||!t)return!1;let n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let i of n)if(-1==r.indexOf(i)||e[i]!==t[i])return!1;return!0}function Uf(e,t,n){let r=null;if(t)for(let i in t)n&&i in n||e.removeAttribute(r=i);if(n)for(let i in n)t&&t[i]==n[i]||e.setAttribute(r=i,n[i]);return!!r}jf.prototype.children=Rf.prototype.children=Bf.prototype.children=mf;class Jf{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Kf=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Kf||(Kf={}));class Gf extends md{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Qf(e)}static widget(e){let t=e.side||0,n=!!e.block;return t+=n?t>0?3e8:-4e8:t>0?1e8:-1e8,new Yf(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=Zf(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Yf(e,t,n,r,e.widget||null,!0)}static line(e){return new Xf(e)}static set(e,t=!1){return wd.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Gf.none=wd.empty;class Qf extends Gf{constructor(e){let{start:t,end:n}=Zf(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Qf&&this.tagName==e.tagName&&this.class==e.class&&Wf(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Qf.prototype.point=!1;class Xf extends Gf{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Xf&&Wf(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Xf.prototype.mapMode=dh.TrackBefore,Xf.prototype.point=!0;class Yf extends Gf{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?dh.TrackBefore:dh.TrackAfter:dh.TrackDel}get type(){return this.startSide<this.endSide?Kf.WidgetRange:this.startSide<=0?Kf.WidgetBefore:Kf.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Yf&&(t=this.widget,n=e.widget,t==n||!!(t&&n&&t.compare(n)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,n}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function Zf(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!=n?n:t,end:null!=r?r:t}}function ep(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Yf.prototype.point=!0;class tp extends gf{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof tp))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),bf(this,e,t,n?n.children:[],i,o),!0}split(e){let t=new tp;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let e=n;e<this.children.length;e++)t.append(this.children[e],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Wf(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Ff(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Hf(t,this.attrs||{})),n&&(this.attrs=Hf({class:n},this.attrs||{}))}domAtPos(e){return Vf(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(ff(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Uf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let n=this.dom.lastChild;for(;n&&gf.get(n)instanceof Nf;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(t=gf.get(n))||void 0===t?void 0:t.isEditable)||Tf.ios&&this.children.some((e=>e instanceof jf))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof jf))return null;let n=Yd(t.dom);if(1!=n.length)return null;e+=n[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return qf(this,e,t)}become(e){return!1}get type(){return Kf.Text}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof tp)return i;if(o>t)break}r=o+i.breakAfter}return null}}class np extends gf{constructor(e,t,n){super(),this.widget=e,this.length=t,this.type=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof np&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?pf.before(this.dom):pf.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new np(this.widget,t,this.type);return n.breakAfter=this.breakAfter,n}get children(){return mf}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Wu.empty}domBoundsAround(){return null}become(e){return e instanceof np&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class rp{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof np&&e.type==Kf.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new tp),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(ip(new Bf(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,n)),this.getLine().append(ip(new jf(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Yf){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof Yf)if(n.block){let{type:e}=n;e!=Kf.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new np(n.widget||new op("div"),s,e))}else{let o=Rf.create(n.widget||new op("span"),s,n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(ip(new Bf(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(ip(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new rp(e,t,n,i);return o.openEnd=wd.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ip(e,t){for(let n of t)e=new Nf(n,[e],e.length);return e}class op extends Jf{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const sp=Ch.define(),ap=Ch.define(),lp=Ch.define(),cp=Ch.define(),up=Ch.define(),hp=Ch.define(),dp=Ch.define({combine:e=>e.some((e=>e))});class fp{constructor(e,t="nearest",n="nearest",r=5,i=5){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i}map(e){return e.empty?this:new fp(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const pp=td.define({map:(e,t)=>e.map(t)});function mp(e,t,n){let r=e.facet(cp);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const gp=Ch.define({combine:e=>!e.length||e[0]});let vp=0;const yp=Ch.define();class wp{constructor(e,t,n,r){this.id=e,this.create=t,this.domEventHandlers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:n,provide:r,decorations:i}=t||{};return new wp(vp++,e,n,(e=>{let t=[yp.of(e)];return i&&t.push(kp.of((t=>{let n=t.plugin(e);return n?i(n):Gf.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return wp.define((t=>new e(t)),t)}}class bp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(mp(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){mp(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){mp(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const xp=Ch.define(),$p=Ch.define(),kp=Ch.define(),Sp=Ch.define(),Cp=Ch.define(),_p=Ch.define();class Op{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new Op(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new Op(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new Op(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Ep{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=ph.empty(this.startState.doc.length);for(let e of n)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new Op(e,t,n,i)))),this.changedRanges=r;let i=e.hasFocus;i!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=i,this.flags|=1)}static create(e,t,n){return new Ep(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var Ap=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(Ap||(Ap={}));const Mp=Ap.LTR,Pp=Ap.RTL;function Tp(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const jp=Tp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Np=Tp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ip=Object.create(null),Rp=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),n=e.charCodeAt(1);Ip[t]=n,Ip[n]=-t}const Dp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Lp{constructor(e,t,n){this.from=e,this.to=t,this.level=n}get dir(){return this.level%2?Pp:Mp}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}const zp=[];function Bp(e){return[new Lp(0,e,0)]}let Vp="";function Fp(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=Lp.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=rh(e.text,s,c);if(Vp=e.text.slice(Math.min(s,u),Math.max(s,u)),u!=l.side(i,n))return $h.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?$h.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):$h.cursor(u+e.from,i?-1:1,l.level):$h.cursor(i?e.to:e.from,i?-1:1,n)}const qp="￿";class Hp{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(fd.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=qp}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let i=gf.get(r),o=gf.get(e);(i&&o?i.breakAfter:(i?i.breakAfter:Wp(r))||Wp(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=gf.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+Math.min(t,n.offset))}}function Wp(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Up{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Jp extends gf{constructor(e){super(),this.view=e,this.compositionDeco=Gf.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new tp],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Op(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Gf.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let n=Gp(e);if(!n)return Gf.none;let{from:r,to:i,node:o,text:s}=n,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(i,-1)),{state:c}=e,u=3==o.nodeType?o.nodeValue:new Hp([],c).readRange(o.firstChild,null).text;if(l-a<u.length)if(c.doc.sliceString(a,Math.min(c.doc.length,a+u.length),qp)==u)l=a+u.length;else{if(c.doc.sliceString(Math.max(0,l-u.length),l,qp)!=u)return Gf.none;a=l-u.length}else if(c.doc.sliceString(a,l,qp)!=u)return Gf.none;let h=gf.get(o);h instanceof Df?h=h.widget.topView:h&&(h.parent=null);return Gf.set(Gf.replace({widget:new Qp(o,s,h),inclusive:!0}).range(a,l))}(this.view,e.changes)),(Tf.ie||Tf.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let n=function(e,t,n){let r=new Yp;return wd.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=Op.extendWithRanges(t,n),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=Tf.chrome||Tf.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof np&&e.widget instanceof Kp&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t){let n=this.childCursor(t);for(let t=e.length-1;;t--){let r=t>=0?e[t]:null;if(!r)break;let{fromA:i,toA:o,fromB:s,toB:a}=r,{content:l,breakAtStart:c,openStart:u,openEnd:h}=rp.build(this.view.state.doc,s,a,this.decorations,this.dynamicDecorationMap),{i:d,off:f}=n.findPos(o,1),{i:p,off:m}=n.findPos(i,-1);wf(this,p,m,d,f,l,c,u,h)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||Tf.ios&&this.view.inputState.rapidCompositionStart)return;let n=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,i=this.domAtPos(r.anchor),o=r.empty?i:this.domAtPos(r.head);if(Tf.gecko&&r.empty&&(1==(s=i).node.nodeType&&s.node.firstChild&&(0==s.offset||"false"==s.node.childNodes[s.offset-1].contentEditable)&&(s.offset==s.node.childNodes.length||"false"==s.node.childNodes[s.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>i.node.insertBefore(e,i.node.childNodes[i.offset]||null))),i=o=new pf(e,0),n=!0}var s;let a=this.view.observer.selectionRange;!n&&a.focusNode&&Zd(i.node,i.offset,a.anchorNode,a.anchorOffset)&&Zd(o.node,o.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{Tf.android&&Tf.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Gd(this.root);if(r.empty){if(Tf.gecko){let e=(t=i.node,n=i.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=Xp(i.node,i.offset,1==e?1:-1);t&&(i=new pf(t,1==e?0:t.nodeValue.length))}}e.collapse(i.node,i.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(i.node,i.offset),e.extend(o.node,o.offset);else{let t=document.createRange();r.anchor>r.head&&([i,o]=[o,i]),t.setEnd(o.node,o.offset),t.setStart(i.node,i.offset),e.removeAllRanges(),e.addRange(t)}var t,n})),this.view.observer.setSelectionRange(i,o)),this.impreciseAnchor=i.precise?null:new pf(a.anchorNode,a.anchorOffset),this.impreciseHead=o.precise?null:new pf(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=Gd(this.root);if(!e.empty||!e.assoc||!t.modify)return;let n=tp.find(this,e.head);if(!n)return;let r=n.posAtStart;if(e.head==r||e.head==r+n.length)return;let i=this.coordsAt(e.head,-1),o=this.coordsAt(e.head,1);if(!i||!o||i.bottom>o.top)return;let s=this.domAtPos(e.head+e.assoc);t.collapse(s.node,s.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(gp)?this.root.activeElement==this.dom:Xd(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=gf.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof tp)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){for(let n=this.length,r=this.children.length-1;;r--){let i=this.children[r],o=n-i.breakAfter-i.length;if(e>o||e==o&&i.type!=Kf.WidgetBefore&&i.type!=Kf.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Kf.WidgetBefore&&t>-2))return i.coordsAt(e-o,t);n=o}}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Ap.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],u=e+c.length;if(u>r)break;if(e>=n){let n=c.dom.getBoundingClientRect();if(t.push(n.height),o){let t=c.dom.lastChild,r=t?Yd(t):[];if(r.length){let t=r[r.length-1],o=a?t.right-n.left:n.right-t.left;o>s&&(s=o,this.minWidth=i,this.minWidthFrom=e,this.minWidthTo=u)}}}e=u+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Ap.RTL:Ap.LTR}measureTextSize(){for(let e of this.children)if(e instanceof tp){let t=e.measureTextSize();if(t)return t}let e,t,n=document.createElement("div");return n.className="cm-line",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=Yd(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,n.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new yf(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=t.lineBlockAt(o).bottom-t.lineBlockAt(n).top;e.push(Gf.replace({widget:new Kp(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Gf.set(e)}updateDeco(){let e=this.view.state.facet(kp).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=0,o=0,s=0,a=0;for(let e of this.view.state.facet(Cp).map((e=>e(this.view))))if(e){let{left:t,right:n,top:r,bottom:l}=e;null!=t&&(i=Math.max(i,t)),null!=n&&(o=Math.max(o,n)),null!=r&&(s=Math.max(s,r)),null!=l&&(a=Math.max(a,l))}let l={left:r.left-i,top:r.top-s,right:r.right+o,bottom:r.bottom+a};!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView;for(let u=e;u;)if(1==u.nodeType){let e,h=u==l.body;if(h)e=sf(c);else{if(u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.parentNode;continue}let t=u.getBoundingClientRect();e={left:t.left,right:t.left+u.clientWidth,top:t.top,bottom:t.top+u.clientHeight}}let d=0,f=0;if("nearest"==i)t.top<e.top?(f=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+f+s)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+s,n<0&&t.top-f<e.top&&(f=-(e.top+f-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;f=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(d=-(e.left-t.left+o),n>0&&t.right>e.right+d&&(d=t.right-e.right+d+o)):t.right>e.right&&(d=t.right-e.right+o,n<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+o))):d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,d||f)if(h)c.scrollBy(d,f);else{if(f){let e=u.scrollTop;u.scrollTop+=f,f=u.scrollTop-e}if(d){let e=u.scrollLeft;u.scrollLeft+=d,d=u.scrollLeft-e}t={left:t.left-d,top:t.top-f,right:t.right-d,bottom:t.bottom-f}}if(h)break;u=u.assignedSlot||u.parentNode,r=i="nearest"}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,l,n.head<n.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Ap.LTR)}}class Kp extends Jf{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Gp(e){let t=e.observer.selectionRange,n=t.focusNode&&Xp(t.focusNode,t.focusOffset,0);if(!n)return null;let r=e.docView.nearest(n);if(!r)return null;if(r instanceof tp){let e=n;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!gf.get(t);)t=t.previousSibling;let i=t?gf.get(t).posAtEnd:r.posAtStart;return{from:i,to:i,node:e,text:n}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof tp)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:n}}}class Qp extends Jf{constructor(e,t,n){super(),this.top=e,this.text=t,this.topView=n}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Df}}function Xp(e,t,n){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&n<=0)t=nf(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&n>=0))return null;e=e.childNodes[t],t=0}}}class Yp{constructor(){this.changes=[]}compareRange(e,t){ep(e,t,this.changes)}comparePoint(e,t){ep(e,t,this.changes)}}function Zp(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function em(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function tm(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function nm(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function rm(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function im(e,t,n){let r,i,o,s,a,l,c,u;for(let h=e.firstChild;h;h=h.nextSibling){let e=Yd(h);for(let d=0;d<e.length;d++){let f=e[d];i&&tm(i,f)&&(f=nm(rm(f,i.bottom),i.top));let p=Zp(t,f),m=em(n,f);if(0==p&&0==m)return 3==h.nodeType?om(h,t,n):im(h,t,n);(!r||s>m||s==m&&o>p)&&(r=h,i=f,o=p,s=m),0==p?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=h,c=f):n<f.top&&(!u||u.top>f.top)&&(l=h,u=f):c&&tm(c,f)?c=rm(c,f.bottom):u&&tm(u,f)&&(u=nm(u,f.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let h=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?om(r,h,n):o||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}:im(r,h,n)}function om(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=hf(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(Tf.chrome||Tf.gecko){hf(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function sm(e,{x:t,y:n},r,i=-1){var o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,u=n-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.defaultLineHeight/2,n=!1;s=e.elementAtHeight(u),s.type!=Kf.Text;)for(;u=i>0?s.bottom+t:s.top-t,!(u>=0&&u<=c);){if(n)return r?null:0;n=!0,i=-i}n=l+u;let h=s.from;if(h<e.viewport.from)return 0==e.viewport.from?0:r?null:am(e,a,s,t,n);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:am(e,a,s,t,n);let d=e.dom.ownerDocument,f=e.root.elementFromPoint?e.root:d,p=f.elementFromPoint(t,n);p&&!e.contentDOM.contains(p)&&(p=null),p||(t=Math.max(a.left+1,Math.min(a.right-1,t)),p=f.elementFromPoint(t,n),p&&!e.contentDOM.contains(p)&&(p=null));let m,g=-1;if(p&&0!=(null===(o=e.docView.nearest(p))||void 0===o?void 0:o.isEditable))if(d.caretPositionFromPoint){let e=d.caretPositionFromPoint(t,n);e&&({offsetNode:m,offset:g}=e)}else if(d.caretRangeFromPoint){let e=d.caretRangeFromPoint(t,n);e&&(({startContainer:m,startOffset:g}=e),Tf.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return hf(e,r-1,r).getBoundingClientRect().left>n}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=tp.find(e.docView,h);if(!r)return u>s.top+s.height/2?s.to:s.from;({node:m,offset:g}=im(r.dom,t,n))}return e.docView.posFromDOM(m,g)}function am(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){o+=Math.floor((i-n.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+Td(s,o,e.state.tabSize)}function lm(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=Fp(i,o,s,a,n),c=Vp;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=$h.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function cm(e,t,n){let r=e.state.facet(Sp).map((t=>t(e)));for(;;){let e=!1;for(let i of r)i.between(n.from-1,n.from+1,((r,i,o)=>{n.from>r&&n.from<i&&(n=t.from>n.from?$h.cursor(r,1):$h.cursor(i,-1),e=!0)}));if(!e)return n}}class um{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in mm){let n=mm[t];e.contentDOM.addEventListener(t,(r=>{pm(e,r)&&!this.ignoreDuringComposition(r)&&("keydown"==t&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():n(e,r)))})),this.registeredEvents.push(t)}Tf.chrome&&Tf.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,Tf.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var n;let r;this.customHandlers=[];for(let i of t)if(r=null===(n=i.update(e).spec)||void 0===n?void 0:n.domEventHandlers){this.customHandlers.push({plugin:i.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(n=>{pm(e,n)&&this.runCustomHandlers(t,e,n)&&n.preventDefault()})))}}runCustomHandlers(e,t,n){for(let r of this.customHandlers){let i=r.handlers[e];if(i)try{if(i.call(r.plugin,n,t)||n.defaultPrevented)return!0}catch(e){mp(t.state,e)}}return!1}runScrollHandlers(e,t){for(let n of this.customHandlers){let r=n.handlers.scroll;if(r)try{r.call(n.plugin,t,e)}catch(t){mp(e.state,t)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(Tf.android&&Tf.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let n;return!(!Tf.ios||!(n=hm.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=n,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,df(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Tf.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!Tf.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const hm=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dm=[16,17,18,20,91,92,224,225];class fm{constructor(e,t,n,r){this.view=e,this.style=n,this.mustSelect=r,this.lastEvent=t;let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(fd.allowMultipleSelections)&&function(e,t){let n=e.state.facet(sp);return n.length?n[0](t):Tf.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let n=e.state.facet(ap);return n.length?n[0](t):Tf.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=Gd(e.root);if(0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let e=0;e<i.length;e++){let n=i[e];if(n.left<=t.clientX&&n.right>=t.clientX&&n.top<=t.clientY&&n.bottom>=t.clientY)return!0}return!1}(e,t)||1!=Em(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function pm(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=gf.get(r))&&n.ignoreEvent(t))return!1;return!0}const mm=Object.create(null),gm=Tf.ie&&Tf.ie_version<15||Tf.ios&&Tf.webkit_version<604;function vm(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length;if(null!=Mm&&r.selection.ranges.every((e=>e.empty))&&Mm==o.toString()){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:$h.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:$h.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}mm.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():dm.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};let ym=0;function wm(e,t,n,r){if(1==r)return $h.cursor(t,n);if(2==r)return function(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return $h.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=rh(i.text,o,!1):a=rh(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=rh(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=rh(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return $h.range(s+i.from,a+i.from)}(e.state,t,n);{let n=tp.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,$h.range(i,o)}}mm.touchstart=(e,t)=>{ym=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},mm.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},mm.mousedown=(e,t)=>{if(e.observer.flush(),ym>Date.now()-2e3&&1==Em(t))return;let n=null;for(let r of e.state.facet(lp))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=km(e,t),r=Em(t),i=e.state.selection,o=n,s=t;return{update(e){e.docChanged&&(n&&(n.pos=e.changes.mapPos(n.pos)),i=i.map(e.changes),s=null)},get(t,a,l){let c;if(s&&t.clientX==s.clientX&&t.clientY==s.clientY?c=o:(c=o=km(e,t),s=t),!c||!n)return i;let u=wm(e,c.pos,c.bias,r);if(n.pos!=c.pos&&!a){let t=wm(e,n.pos,n.bias,r),i=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=i<u.from?$h.range(i,o):$h.range(o,i)}return a?i.replaceRange(i.main.extend(u.from,u.to)):l?i.addRange(u):$h.create([u])}}}(e,t)),n){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>uf(e.contentDOM))),e.inputState.startMouseSelection(new fm(e,t,n,r))}};let bm=(e,t)=>e>=t.top&&e<=t.bottom,xm=(e,t,n)=>bm(t,n)&&e>=n.left&&e<=n.right;function $m(e,t,n,r){let i=tp.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&xm(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&xm(n,r,a)?1:s&&bm(r,s)?-1:1}function km(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:$m(e,n,t.clientX,t.clientY)}}const Sm=Tf.ie&&Tf.ie_version<=11;let Cm=null,_m=0,Om=0;function Em(e){if(!Sm)return e.detail;let t=Cm,n=Om;return Cm=e,Om=Date.now(),_m=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(_m+1)%3:1}function Am(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:o}=e.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}mm.dragstart=(e,t)=>{let{selection:{main:n}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=n),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove")},mm.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let n=t.dataTransfer.files;if(n&&n.length){t.preventDefault();let r=Array(n.length),i=0,o=()=>{++i==n.length&&Am(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}}else Am(e,t,t.dataTransfer.getData("Text"),!0)},mm.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let n=gm?null:t.clipboardData;n?(vm(e,n.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),vm(e,n.value)}),50)}(e)};let Mm=null;function Pm(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function Tm(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}mm.copy=mm.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let r of e.selection.ranges)r.empty||(t.push(e.sliceDoc(r.from,r.to)),n.push(r));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return;Mm=i?n:null;let o=gm?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",n)):function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},mm.focus=Pm,mm.blur=e=>{e.observer.clearSelectionRange(),Pm(e)},mm.compositionstart=mm.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Tm(e,!0)))},mm.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Tm(e,!1)}),50)},mm.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},mm.beforeinput=(e,t)=>{var n;let r;if(Tf.chrome&&Tf.android&&(r=hm.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const jm=["pre-wrap","normal","pre-line","break-spaces"];class Nm{constructor(){this.doc=Wu.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength)),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return jm.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i){let o=jm.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.lineLength=r,s){this.heightSamples={};for(let e=0;e<i.length;e++){let t=i[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class Im{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Rm{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this.type=i}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Rm(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Dm=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Dm||(Dm={}));const Lm=.001;class zm{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Lm&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return zm.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this;for(let o=r.length-1;o>=0;o--){let{fromA:s,toA:a,fromB:l,toB:c}=r[o],u=i.lineAt(s,Dm.ByPosNoHeight,t,0,0),h=u.to>=a?u:i.lineAt(a,Dm.ByPosNoHeight,t,0,0);for(c+=h.to-a,a=h.to;o>0&&u.from<=r[o-1].toA;)s=r[o-1].fromA,l=r[o-1].fromB,o--,s<u.from&&(u=i.lineAt(s,Dm.ByPosNoHeight,t,0,0));l+=u.from-s,s=u.from;let d=Wm.build(n,e,l,c);i=i.replace(s,a,d)}return i.updateHeight(n,0)}static empty(){return new Vm(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new qm(zm.of(e.slice(0,t)),o,zm.of(e.slice(n)))}}zm.prototype.size=1;class Bm extends zm{constructor(e,t,n){super(e,t),this.type=n}blockAt(e,t,n,r){return new Rm(r,this.length,n,this.height,this.type)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Vm extends Bm{constructor(e,t){super(e,t,Kf.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Vm||r instanceof Fm&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Fm?r=new Vm(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):zm.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Fm extends zm{constructor(e){super(e,0)}lines(e,t){let n=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:n,lastLine:r,lineHeight:this.height/(r-n+1)}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,lineHeight:s}=this.lines(t,r),a=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:l,length:c}=t.line(i+a);return new Rm(l,c,n+s*a,s,Kf.Text)}lineAt(e,t,n,r,i){if(t==Dm.ByHeight)return this.blockAt(e,n,r,i);if(t==Dm.ByPosNoHeight){let{from:t,to:r}=n.lineAt(e);return new Rm(t,r-t,0,0,Kf.Text)}let{firstLine:o,lineHeight:s}=this.lines(n,i),{from:a,length:l,number:c}=n.lineAt(e);return new Rm(a,l,r+s*(c-o),s,Kf.Text)}forEachLine(e,t,n,r,i,o){let{firstLine:s,lineHeight:a}=this.lines(n,i);for(let l=Math.max(e,i),c=Math.min(i+this.length,t);l<=c;){let t=n.lineAt(l);l==e&&(r+=a*(t.number-s)),o(new Rm(t.from,t.length,r,a,Kf.Text)),r+=a,l=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Fm?n[n.length-1]=new Fm(e.length+r):n.push(null,new Fm(r-1))}if(e>0){let t=n[0];t instanceof Fm?n[0]=new Fm(e+t.length):n.unshift(new Fm(e-1),null)}return zm.of(n)}decomposeLeft(e,t){t.push(new Fm(e-1),null)}decomposeRight(e,t){t.push(null,new Fm(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1,a=e.heightChanged;for(r.from>t&&n.push(new Fm(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Lm&&(s=-2);let a=new Vm(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new Fm(i-o).updateHeight(e,o));let l=zm.of(n);return e.heightChanged=a||s<0||Math.abs(l.height-this.height)>=Lm||Math.abs(s-this.lines(e.doc,t).lineHeight)>=Lm,l}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class qm extends zm{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==Dm.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==Dm.ByPosNoHeight?Dm.ByPosNoHeight:Dm.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,Dm.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let e of n)i.push(e);if(e>0&&Hm(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),Hm(i,e)}return zm.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?zm.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Hm(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Fm&&(r=e[t+1])instanceof Fm&&e.splice(t-1,3,new Fm(n.length+1+r.length))}class Wm{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Vm?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Vm(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let i=t-e;n.block?this.addBlock(new Bm(i,r,n.type)):(i||r>=5)&&this.addLineDeco(r,i)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Vm(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Fm(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Vm)return e;let t=new Vm(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=Kf.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Kf.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let n=this.ensureLine();n.length+=t,n.collapsed+=t,n.widgetHeight=Math.max(n.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Vm||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Vm(0,-1));let n=e;for(let e of this.nodes)e instanceof Vm&&e.updateHeight(this.oracle,n),n+=e?e.length:1;return this.nodes}static build(e,t,n,r){let i=new Wm(n,e);return wd.spans(t,n,r,i,0),i.finish(n)}}class Um{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&ep(e,t,this.changes,5)}}function Jm(e,t){let n=e.getBoundingClientRect(),r=Math.max(0,n.left),i=Math.min(innerWidth,n.right),o=Math.max(0,n.top),s=Math.min(innerHeight,n.bottom),a=e.ownerDocument.body;for(let t=e.parentNode;t&&t!=a;)if(1==t.nodeType){let e=t,n=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=n.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),i=Math.min(i,t.right),o=Math.max(o,t.top),s=Math.min(s,t.bottom)}t="absolute"==n.position||"fixed"==n.position?e.offsetParent:e.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:r-n.left,right:Math.max(r,i)-n.left,top:o-(n.top+t),bottom:Math.max(o,s)-(n.top+t)}}function Km(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class Gm{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e){return Gf.replace({widget:new Qm(this.size,e)}).range(this.from,this.to)}}class Qm extends Jf{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Xm{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new Nm,this.scaler=ig,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ap.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(kp).filter((e=>"function"!=typeof e)),this.heightMap=zm.empty().applyChanges(this.stateDeco,Wu.empty,this.heightOracle.setDoc(e.doc),[new Op(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Gf.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Ym(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?ig:new og(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:sg(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(kp).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=Op.extendWithRanges(r,function(e,t,n){let r=new Um;return wd.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:ph.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2);let s=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Ap.RTL:Ap.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,c=parseInt(n.paddingTop)||0,u=parseInt(n.paddingBottom)||0;this.paddingTop==c&&this.paddingBottom==u||(this.paddingTop=c,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let h=(this.printing?Km:Jm)(t,this.paddingTop),d=h.top-this.pixelViewport.top,f=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let p=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(p!=this.inView&&(this.inView=p,p&&(s=!0)),!this.inView)return 0;let m=t.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s}=e.docView.measureTextSize();o=r.refresh(i,n,s,m/s,t),o&&(e.docView.minWidth=0,a|=8)}d>0&&f>0?l=Math.max(d,f):d<0&&f<0&&(l=Math.min(d,f)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=this.heightMap.updateHeight(r,0,o,new Im(n.from,i))}r.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.state.doc,{visibleTop:o,visibleBottom:s}=this,a=new Ym(r.lineAt(o-1e3*n,Dm.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Dm.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Dm.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Ym(r.lineAt(n-500,Dm.ByHeight,i,0,0).from,r.lineAt(n+o+500,Dm.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ym(this.heightMap.lineAt(n,Dm.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Dm.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Dm.ByPos,this.state.doc,0,0),{bottom:i}=this.heightMap.lineAt(t,Dm.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new Gm(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=Ap.LTR)return t;for(let n of this.viewportLines){if(n.length<4e3)continue;let r,i,o=Zm(n.from,n.to,this.stateDeco);if(o.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=eg(o,(this.visibleTop-n.top-e)/n.height),i=eg(o,(this.visibleBottom-n.top+e)/n.height)}else{let e=o.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=eg(o,(this.pixelViewport.left-t)/e),i=eg(o,(this.pixelViewport.right+t)/e)}let s=[];r>n.from&&s.push({from:n.from,to:r}),i<n.to&&s.push({from:i,to:n.to});let a=this.state.selection.main;a.from>=n.from&&a.from<=n.to&&ng(s,a.from-10,a.from+10),!a.empty&&a.to>=n.from&&a.to<=n.to&&ng(s,a.to-10,a.to+10);for(let{from:r,to:i}of s)i-r>1e3&&t.push(rg(e,(e=>e.from>=n.from&&e.to<=n.to&&Math.abs(e.from-r)<1e3&&Math.abs(e.to-i)<1e3))||new Gm(r,i,this.gapSize(n,r,i,o)))}return t}gapSize(e,t,n,r){let i=tg(r,n)-tg(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){Gm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Gf.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];wd.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||sg(this.heightMap.lineAt(e,Dm.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return sg(this.heightMap.lineAt(this.scaler.fromDOM(e),Dm.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return sg(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ym{constructor(e,t){this.from=e,this.to=t}}function Zm(e,t,n){let r=[],i=e,o=0;return wd.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function eg({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let e=0;;e++){let{from:n,to:i}=t[e],o=i-n;if(r<=o)return n+r;r-=o}}function tg(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function ng(e,t,n){for(let r=0;r<e.length;r++){let i=e[r];if(i.from<n&&i.to>t){let o=[];i.from<t&&o.push({from:i.from,to:t}),i.to>n&&o.push({from:n,to:i.to}),e.splice(r,1,...o),r+=o.length-1}}}function rg(e,t){for(let n of e)if(t(n))return n}const ig={toDOM:e=>e,fromDOM:e=>e,scale:1};class og{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,Dm.ByPos,e,0,0).top,s=t.lineAt(i,Dm.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let e of this.viewports)e.domTop=o+(e.top-i)*this.scale,o=e.domBottom=e.domTop+(e.bottom-e.top),i=e.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function sg(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Rm(e.from,e.length,n,r-n,Array.isArray(e.type)?e.type.map((e=>sg(e,t))):e.type)}const ag=Ch.define({combine:e=>e.join(" ")}),lg=Ch.define({combine:e=>e.indexOf(!0)>-1}),cg=Rd.newName(),ug=Rd.newName(),hg=Rd.newName(),dg={"&light":"."+ug,"&dark":"."+hg};function fg(e,t,n){return new Rd(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t})}const pg=fg("."+cg,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},dg),mg={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},gg=Tf.ie&&Tf.ie_version<=11;class vg{constructor(e,t,n){this.view=e,this.onChange=t,this.onScrollChanged=n,this.active=!1,this.selectionRange=new af,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(Tf.ie&&Tf.ie_version<=11||Tf.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),gg&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,n=this.selectionRange;if(t.state.facet(gp)?t.root.activeElement!=this.dom:!Xd(t.dom,n))return;let r=n.anchorNode&&t.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)||((Tf.ie&&Tf.ie_version<=11||Tf.android&&Tf.chrome)&&!t.state.selection.main.empty&&n.focusNode&&Zd(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Gd(e),n=Tf.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);Zd(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||t;return!this.selectionRange.eq(n)&&(this.selectionRange.setRange(n),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,mg),gg&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),gg&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||df(this.view.contentDOM,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:n,typeOver:r}=this.processRecords(),i=this.selectionChanged&&Xd(this.dom,this.selectionRange);if(t<0&&!i)return;this.selectionChanged=!1;let o=this.view.state,s=this.onChange(t,n,r);return this.view.state==o&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let n=yg(t,e.previousSibling||e.target.previousSibling,-1),r=yg(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resize)||void 0===n||n.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function yg(e,t,n){for(;t;){let r=gf.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function wg(e,t,n,r){let i,o,s=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,n,0);if(!r||e.state.readOnly)return!1;let{from:a,to:l}=r,c=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new Up(n,r)),i==n&&o==r||t.push(new Up(i,o)));return t}(e),u=new Hp(c,e.state);u.readRange(r.startDOM,r.endDOM);let h=s.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||Tf.android&&u.text.length<l-a)&&(h=s.to,d="end");let f=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(a,l,qp),u.text,h-a,d);f&&(Tf.chrome&&13==e.inputState.lastKeyCode&&f.toB==f.from+2&&"￿￿"==u.text.slice(f.from,f.toB)&&f.toB--,i={from:a+f.from,to:a+f.toA,insert:Wu.of(u.text.slice(f.from,f.toB).split(qp))}),o=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?$h.single(n+t,r+t):null}(c,a)}else if(e.hasFocus||!e.state.facet(gp)){let t=e.observer.selectionRange,{impreciseHead:n,impreciseAnchor:r}=e.docView,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!Qd(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!Qd(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);i==s.head&&a==s.anchor||(o=$h.single(a,i))}if(!i&&!o)return!1;if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:e.state.doc.slice(s.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,s.to))}:(Tf.mac||Tf.android)&&i&&i.from==i.to&&i.from==s.head-1&&"."==i.insert.toString()&&(i={from:s.from,to:s.to,insert:Wu.of([" "])}),i){let t=e.state;if(Tf.ios&&e.inputState.flushIOSKey(e))return!0;if(Tf.android&&(i.from==s.from&&i.to==s.to&&1==i.insert.length&&2==i.insert.lines&&df(e.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&0==i.insert.length&&df(e.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&0==i.insert.length&&df(e.contentDOM,"Delete",46)))return!0;let n,r=i.insert.toString();if(e.state.facet(hp).some((t=>t(e,i.from,i.to,r))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&e.inputState.composing<0){let r=s.from<i.from?t.sliceDoc(s.from,i.from):"",o=s.to>i.to?t.sliceDoc(i.to,s.to):"";n=t.replaceSelection(e.state.toText(r+i.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let r=t.changes(i),a=o&&!t.selection.main.eq(o.main)&&o.main.to<=r.newLength?o.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let o=e.state.sliceDoc(i.from,i.to),l=Gp(e)||e.state.doc.lineAt(s.head),c=s.to-i.to,u=s.to-s.from;n=t.changeByRange((n=>{if(n.from==s.from&&n.to==s.to)return{changes:r,range:a||n.map(r)};let h=n.to-c,d=h-o.length;if(n.to-n.from!=u||e.state.sliceDoc(d,h)!=o||l&&n.to>=l.from&&n.from<=l.to)return{range:n};let f=t.changes({from:d,to:h,insert:i.insert}),p=n.to-s.to;return{changes:f,range:a?$h.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else n={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(n,{scrollIntoView:!0,userEvent:a}),!0}if(o&&!o.main.eq(s)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:o,scrollIntoView:t,userEvent:n}),!0}return!1}class bg{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Xm(e.state||fd.create(e)),this.plugins=this.state.facet(yp).map((e=>new bp(e)));for(let e of this.plugins)e.update(this);this.observer=new vg(this,((e,t,n)=>wg(this,e,t,n)),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new um(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Jp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof nd?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let t of e){if(t.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=t.state}if(this.destroyed)return void(this.viewState.state=i);if(this.observer.clear(),i.facet(fd.phrases)!=this.state.facet(fd.phrases))return this.setState(i);t=Ep.create(this,i,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(o&&(o=o.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;o=new fp(e.empty?e:$h.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(pp)&&(o=e.value)}this.viewState.update(t,o),this.bidiCache=kg.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(_p)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(ag)!=t.state.facet(ag)&&(this.viewState.mustMeasureContent=!0),(n||r||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let e of this.state.facet(up))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Xm(e),this.plugins=e.facet(yp).map((e=>new bp(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new Jp(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(yp),n=e.state.facet(yp);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new bp(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let n=this.viewport,r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let i=[];4&r||([this.measureRequests,i]=[i,this.measureRequests]);let o=i.map((e=>{try{return e.read(this)}catch(e){return mp(this.state,e),$g}})),s=Ep.create(this,this.state,[]),a=!1,l=!1;s.flags|=r,t?t.flags|=r:t=s,this.updateState=2,s.empty||(this.updatePlugins(s),this.inputState.update(s),this.updateAttrs(),a=this.docView.update(s));for(let e=0;e<i.length;e++)if(o[e]!=$g)try{let t=i[e];t.write&&t.write(o[e],this)}catch(e){mp(this.state,e)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,l=!0),a&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!l&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(up))e(t)}get themeClasses(){return cg+" "+(this.state.facet(lg)?hg:ug)+" "+this.state.facet(ag)}updateAttrs(){let e=Sg(this,xp,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(gp)?"true":"false",class:"cm-content",style:`${Tf.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Sg(this,$p,t);let n=this.observer.ignore((()=>{let n=Uf(this.contentDOM,this.contentAttrs,t),r=Uf(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(bg.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(_p),Rd.mount(this.root,this.styleModules.concat(pg).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return cm(this,e,lm(this,e,t,n))}moveByGroup(e,t){return cm(this,e,lm(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==cd.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t,n=!0){return function(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==Ap.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return $h.cursor(s,n?-1:1)}let s=tp.find(e.docView,t.head),a=s?n?s.posAtEnd:s.posAtStart:n?i.to:i.from;return $h.cursor(a,n?-1:1)}(this,e,t,n)}moveVertically(e,t,n){return cm(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return $h.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!=r?r:e.defaultLineHeight>>1;for(let n=0;;n+=10){let r=s+(d+n)*o,c=sm(e,{x:h,y:r},!1,o);if(r<l.top||r>l.bottom||(o<0?c<i:c>i))return $h.cursor(c,t.assoc,void 0,a)}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),sm(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return of(n,i[Lp.find(i,e-r.from,-1,t)].dir==Ap.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(dp)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>xg)return Bp(e.length);let t=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let n=function(e,t){let n=e.length,r=t==Mp?1:2,i=t==Mp?2:1;if(!e||1==r&&!Dp.test(e))return Bp(n);for(let t=0,i=r,s=r;t<n;t++){let n=(o=e.charCodeAt(t))<=247?jp[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?Np[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8203||8204==o?256:1;512==n?n=i:8==n&&4==s&&(n=16),zp[t]=4==n?2:n,7&n&&(s=n),i=n}var o;for(let e=0,t=r,i=r;e<n;e++){let r=zp[e];if(128==r)e<n-1&&t==zp[e+1]&&24&t?r=zp[e]=t:zp[e]=256;else if(64==r){let r=e+1;for(;r<n&&64==zp[r];)r++;let o=e&&8==t||r<n&&8==zp[r]?1==i?1:8:256;for(let t=e;t<r;t++)zp[t]=o;e=r-1}else 8==r&&1==i&&(zp[e]=1);t=r,7&r&&(i=r)}for(let t,o,s,a=0,l=0,c=0;a<n;a++)if(o=Ip[t=e.charCodeAt(a)])if(o<0){for(let e=l-3;e>=0;e-=3)if(Rp[e+1]==-o){let t=Rp[e+2],n=2&t?r:4&t?1&t?i:r:0;n&&(zp[a]=zp[Rp[e]]=n),l=e;break}}else{if(189==Rp.length)break;Rp[l++]=a,Rp[l++]=t,Rp[l++]=c}else if(2==(s=zp[a])||1==s){let e=s==r;c=e?0:1;for(let t=l-3;t>=0;t-=3){let n=Rp[t+2];if(2&n)break;if(e)Rp[t+2]|=2;else{if(4&n)break;Rp[t+2]|=4}}}for(let e=0;e<n;e++)if(256==zp[e]){let t=e+1;for(;t<n&&256==zp[t];)t++;let i=1==(e?zp[e-1]:r),o=i==(1==(t<n?zp[t]:r))?i?1:2:r;for(let n=e;n<t;n++)zp[n]=o;e=t-1}let s=[];if(1==r)for(let e=0;e<n;){let t=e,r=1!=zp[e++];for(;e<n&&r==(1!=zp[e]);)e++;if(r)for(let n=e;n>t;){let e=n,r=2!=zp[--n];for(;n>t&&r==(2!=zp[n-1]);)n--;s.push(new Lp(n,e,r?2:1))}else s.push(new Lp(t,e,0))}else for(let e=0;e<n;){let t=e,r=2==zp[e++];for(;e<n&&r==(2==zp[e]);)e++;s.push(new Lp(t,e,r?1:2))}return s}(e.text,t);return this.bidiCache.push(new kg(e.from,e.to,t,n)),n}get hasFocus(){var e;return(document.hasFocus()||Tf.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{uf(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return pp.of(new fp("number"==typeof e?$h.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return wp.define((()=>({})),{eventHandlers:e})}static theme(e,t){let n=Rd.newName(),r=[ag.of(n),_p.of(fg(`.${n}`,e))];return t&&t.dark&&r.push(lg.of(!0)),r}static baseTheme(e){return Lh.lowest(_p.of(fg("."+cg,e,dg)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&gf.get(n)||gf.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}bg.styleModule=_p,bg.inputHandler=hp,bg.perLineTextDirection=dp,bg.exceptionSink=cp,bg.updateListener=up,bg.editable=gp,bg.mouseSelectionStyle=lp,bg.dragMovesSelection=ap,bg.clickAddsSelectionRange=sp,bg.decorations=kp,bg.atomicRanges=Sp,bg.scrollMargins=Cp,bg.darkTheme=lg,bg.contentAttributes=$p,bg.editorAttributes=xp,bg.lineWrapping=bg.contentAttributes.of({class:"cm-lineWrapping"}),bg.announce=td.define();const xg=4096,$g={};class kg{constructor(e,t,n,r){this.from=e,this.to=t,this.dir=n,this.order=r}static update(e,t){if(t.empty)return e;let n=[],r=e.length?e[e.length-1].dir:Ap.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new kg(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return n}}function Sg(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&Hf(o,n)}return n}const Cg=Tf.mac?"mac":Tf.windows?"win":Tf.linux?"linux":"key";function _g(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const Og=bg.domEventHandlers({keydown:(e,t)=>Tg(Mg(t.state),e,t,"editor")}),Eg=Ch.define({enables:Og}),Ag=new WeakMap;function Mg(e){let t=e.facet(Eg),n=Ag.get(t);return n||Ag.set(t,n=function(e,t=Cg){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s)=>{let a=n[e]||(n[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let e=0;e<n.length-1;++e){const a=n[e];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))o=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let n=l.slice(0,t).join(" ");i(n,!0),a[n]||(a[n]={preventDefault:!0,commands:[t=>{let r=Pg={view:t,prefix:n,scope:e};return setTimeout((()=>{Pg==r&&(Pg=null)}),4e3),!0}]})}let c=l.join(" ");i(c,!1);let u=a[c]||(a[c]={preventDefault:!1,commands:[]});u.commands.push(o),s&&(u.preventDefault=!0)};for(let n of e){let e=n[t]||n.key;if(e)for(let t of n.scope?n.scope.split(" "):["editor"])o(t,e,n.run,n.preventDefault),n.shift&&o(t,"Shift-"+e,n.shift,n.preventDefault)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let Pg=null;function Tg(e,t,n,r){let i=function(e){var t=!(Ud&&(e.ctrlKey||e.altKey||e.metaKey)||(Fd||Wd)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Bd:zd)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=1==i.length&&" "!=i,s="",a=!1;Pg&&Pg.view==n&&Pg.scope==r&&(s=Pg.prefix+" ",(a=dm.indexOf(t.keyCode)<0)&&(Pg=null));let l,c=e=>{if(e){for(let t of e.commands)if(t(n))return!0;e.preventDefault&&(a=!0)}return!1},u=e[r];if(u){if(c(u[s+_g(i,t,!o)]))return!0;if(o&&(t.shiftKey||t.altKey||t.metaKey)&&(l=zd[t.keyCode])&&l!=i){if(c(u[s+_g(l,t,!0)]))return!0}else if(o&&t.shiftKey&&c(u[s+_g(i,t,!0)]))return!0}return a}const jg=!Tf.ios,Ng=Ch.define({combine:e=>pd(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Ig(e={}){return[Ng.of(e),Dg,zg]}class Rg{constructor(e,t,n,r,i){this.left=e,this.top=t,this.width=n,this.height=r,this.className=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const Dg=wp.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ng).cursorBlinkRate+"ms"}update(e){let t=e.startState.facet(Ng)!=e.state.facet(Ng);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Ng),n=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let n=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),i=e.textDirection==Ap.LTR,o=e.contentDOM,s=o.getBoundingClientRect(),a=Bg(e),l=window.getComputedStyle(o.firstChild),c=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),u=s.right-parseInt(l.paddingRight),h=Fg(e,n),d=Fg(e,r),f=h.type==Kf.Text?h:null,p=d.type==Kf.Text?d:null;e.lineWrapping&&(f&&(f=Vg(e,n,f)),p&&(p=Vg(e,r,p)));if(f&&p&&f.from==p.from)return g(v(t.from,t.to,f));{let n=f?v(t.from,null,f):y(h,!1),r=p?v(null,t.to,p):y(d,!0),i=[];return(f||h).to<(p||d).from-1?i.push(m(c,n.bottom,u,r.top)):n.bottom<r.top&&e.elementAtHeight((n.bottom+r.top)/2).type==Kf.Text&&(n.bottom=r.top=(n.bottom+r.top)/2),g(n).concat(i).concat(g(r))}function m(e,t,n,r){return new Rg(e-a.left,t-a.top-.01,n-e,r-t+.01,"cm-selectionBackground")}function g({top:e,bottom:t,horizontal:n}){let r=[];for(let i=0;i<n.length;i+=2)r.push(m(n[i],e,n[i+1],t));return r}function v(t,n,r){let o=1e9,s=-1e9,a=[];function l(t,n,l,h,d){let f=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);o=Math.min(f.top,p.top,o),s=Math.max(f.bottom,p.bottom,s),d==Ap.LTR?a.push(i&&n?c:f.left,i&&h?u:p.right):a.push(!i&&h?c:p.left,!i&&n?u:f.right)}let h=null!=t?t:r.from,d=null!=n?n:r.to;for(let r of e.visibleRanges)if(r.to>h&&r.from<d)for(let i=Math.max(r.from,h),o=Math.min(r.to,d);;){let r=e.state.doc.lineAt(i);for(let s of e.bidiSpans(r)){let e=s.from+r.from,a=s.to+r.from;if(e>=o)break;a>i&&l(Math.max(e,i),null==t&&e<=h,Math.min(a,o),null==n&&a>=d,s.dir)}if(i=r.to+1,i>=o)break}return 0==a.length&&l(h,null==t,d,null==n,e.textDirection),{top:o,bottom:s,horizontal:a}}function y(e,t){let n=s.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let n of e.selection.ranges){let i=n==e.selection.main;if(n.empty?!i||jg:t.drawRangeCursor){let e=qg(this.view,n,i);e&&r.push(e)}}return{rangePieces:n,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){let e=this.cursorLayer.children;if(e.length!==t.length){this.cursorLayer.textContent="";for(const e of t)this.cursorLayer.appendChild(e.draw())}else t.forEach(((t,n)=>t.adjust(e[n])));this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Lg={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};jg&&(Lg[".cm-line"].caretColor="transparent !important");const zg=Lh.highest(bg.theme(Lg));function Bg(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==Ap.LTR?t.left:t.right-e.scrollDOM.clientWidth)-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function Vg(e,t,n){let r=$h.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:Kf.Text}}function Fg(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let e of n.type)if(e.to>t||e.to==t&&(e.to==n.to||e.type==Kf.Text))return e;return n}function qg(e,t,n){let r=e.coordsAtPos(t.head,t.assoc||1);if(!r)return null;let i=Bg(e);return new Rg(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,n?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Hg=td.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Wg=Th.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Hg)?t.value:e),e))}),Ug=wp.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(Wg);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Wg)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let e=this.view.state.field(Wg),t=null!=e&&this.view.coordsAtPos(e);if(!t)return null;let n=this.view.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+this.view.scrollDOM.scrollLeft,top:t.top-n.top+this.view.scrollDOM.scrollTop,height:t.bottom-t.top}}drawCursor(e){this.cursor&&(e?(this.cursor.style.left=e.left+"px",this.cursor.style.top=e.top+"px",this.cursor.style.height=e.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Wg)!=e&&this.view.dispatch({effects:Hg.of(e)})}},{eventHandlers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Jg(){return[Wg,Ug]}function Kg(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,a+o.index+o[0].length,o)}class Gg{constructor(e){let{regexp:t,decoration:n,boundary:r,maxLength:i=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof n?n:()=>n,this.boundary=r,this.maxLength=i}createDeco(e){let t=new bd;for(let{from:n,to:r}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))Kg(e.state.doc,this.regexp,n,r,((n,r,i)=>t.add(n,r,this.getDeco(i,e,n))));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[];if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;){let t=c.index+n.from;u.push(this.getDeco(c,e,t).range(t,t+c[0].length))}else Kg(e.state.doc,this.regexp,a,l,((t,n,r)=>u.push(this.getDeco(r,e,t).range(t,n))));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const Qg=null!=/x/.unicode?"gu":"g",Xg=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮\ufeff￹-￼]",Qg),Yg={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Zg=null;const ev=Ch.define({combine(e){let t=pd(e,{render:null,specialChars:Xg,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Zg&&"undefined"!=typeof document&&document.body){let t=document.body.style;Zg=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Zg||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Qg)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Qg)),t}});function tv(e={}){return[ev.of(e),nv||(nv=wp.fromClass(class{constructor(e){this.view=e,this.decorations=Gf.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(ev)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Gg({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=lh(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=Pd(e.text,t,r-e.from);return Gf.replace({widget:new iv((t-o%t)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=Gf.replace({widget:new rv(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(ev);e.startState.facet(ev)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let nv=null;class rv extends Jf{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(Yg[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class iv extends Jf{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function ov(){return av}const sv=Gf.line({class:"cm-activeLine"}),av=wp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){if(!r.empty)return Gf.none;let i=e.lineBlockAt(r.head);i.from>t&&(n.push(sv.range(i.from)),t=i.from)}return Gf.set(n)}},{decorations:e=>e.decorations}),lv=2e3;function cv(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>lv?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):Pd(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function uv(e,t){let n=cv(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=cv(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>lv||n.off>lv||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push($h.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=Td(n.text,s,e.tabSize,!0);if(r>-1){let t=Td(n.text,a,e.tabSize);o.push($h.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?$h.create(a.concat(r.ranges)):$h.create(a):r}}:null}function hv(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return bg.mouseSelectionStyle.of(((e,n)=>t(n)?uv(e,n):null))}const dv={Alt:[18,e=>e.altKey],Control:[17,e=>e.ctrlKey],Shift:[16,e=>e.shiftKey],Meta:[91,e=>e.metaKey]},fv={style:"cursor: crosshair"};function pv(e={}){let[t,n]=dv[e.key||"Alt"],r=wp.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventHandlers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)}}});return[r,bg.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?fv:null}))]}const mv="-10000px";class gv{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e){let t=e.state.facet(this.facet),n=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let t=0;t<n.length;t++){let i=n[t],o=-1;if(i){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==i.create&&(o=e)}if(o<0)r[t]=this.createTooltipView(i);else{let n=r[t]=this.tooltipViews[o];n.update&&n.update(e)}}}for(let e of this.tooltipViews)r.indexOf(e)<0&&e.dom.remove();return this.input=t,this.tooltips=n,this.tooltipViews=r,!0}}function vv(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const yv=Ch.define({combine:e=>{var t,n,r;return{position:Tf.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||vv}}}),wv=wp.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let n=e.state.facet(yv);this.position=n.position,this.parent=n.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new gv(e,$v,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(yv);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=mv,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:e}of this.manager.tooltipViews)e.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(yv).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:n}=e,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=e.pos[i],c=e.size[i];if(!l||l.bottom<=Math.max(t.top,n.top)||l.top>=Math.min(t.bottom,n.bottom)||l.right<Math.max(t.left,n.left)-.1||l.left>Math.min(t.right,n.right)+.1){a.style.top=mv;continue}let u=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,h=u?7:0,d=c.right-c.left,f=c.bottom-c.top,p=s.offset||xv,m=this.view.textDirection==Ap.LTR,g=c.width>n.right-n.left?m?n.left:n.right-c.width:m?Math.min(l.left-(u?14:0)+p.x,n.right-d):Math.max(n.left,l.left-d+(u?14:0)-p.x),v=!!o.above;!o.strictSide&&(v?l.top-(c.bottom-c.top)-p.y<n.top:l.bottom+(c.bottom-c.top)+p.y>n.bottom)&&v==n.bottom-l.bottom>l.top-n.top&&(v=!v);let y=v?l.top-f-h-p.y:l.bottom+h+p.y,w=g+d;if(!0!==s.overlap)for(let e of r)e.left<w&&e.right>g&&e.top<y+f&&e.bottom>y&&(y=v?e.top-f-2-h:e.bottom+h+2);"absolute"==this.position?(a.style.top=y-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=y+"px",a.style.left=g+"px"),u&&(u.style.left=l.left+(m?p.x:-p.x)-(g+14-7)+"px"),!0!==s.overlap&&r.push({left:g,top:y,right:w,bottom:y+f}),a.classList.toggle("cm-tooltip-above",v),a.classList.toggle("cm-tooltip-below",!v),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=mv}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),bv=bg.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),xv={x:0,y:0},$v=Ch.define({enables:[wv,bv]}),kv=Ch.define();class Sv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gv(e,kv,(e=>this.createHostedView(e)))}static create(e){return new Sv(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const Cv=$v.compute([kv],(e=>{let t=e.facet(kv).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:Sv.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class _v{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let n=this.view.coordsAtPos(t);if(null==n||e.y<n.top||e.y>n.bottom||e.x<n.left-this.view.defaultCharacterWidth||e.x>n.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),i=r&&r.dir==Ap.RTL?-1:1,o=this.source(this.view,t,e.x<n.left?-i:i);if(null==o?void 0:o.then){let e=this.pending={pos:t};o.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>mp(this.view.state,e,"hover tooltip")))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let n=this.active;if(n&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null==n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,o){let s=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(n);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let c=s.getClientRects();s.detach();for(let e=0;e<c.length;e++){let t=c[e];if(Math.max(t.top-i,i-t.bottom,t.left-r,r-t.right)<=o)return!0}return!1}(this.view,r,i,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Ov(e,t={}){let n=td.define(),r=Th.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,dh.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(Ev)&&(e=null);return e},provide:e=>kv.from(e)});return[r,wp.define((i=>new _v(i,e,r,n,t.hoverTime||300))),Cv]}const Ev=td.define(),Av=Ch.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function Mv(e,t){let n=e.plugin(Pv),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const Pv=wp.fromClass(class{constructor(e){this.input=e.state.facet(Nv),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Av);this.top=new Tv(e,!0,t.topContainer),this.bottom=new Tv(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Av);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Tv(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Tv(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(Nv);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>bg.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class Tv{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=jv(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=jv(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function jv(e){let t=e.nextSibling;return e.remove(),t}const Nv=Ch.define({enables:Pv});class Iv extends md{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Iv.prototype.elementClass="",Iv.prototype.toDOM=void 0,Iv.prototype.mapMode=dh.TrackBefore,Iv.prototype.startSide=Iv.prototype.endSide=-1,Iv.prototype.point=!0;const Rv=Ch.define(),Dv={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>wd.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Lv=Ch.define();function zv(e){return[Vv(),Lv.of(Object.assign(Object.assign({},Dv),e))]}const Bv=Ch.define({combine:e=>e.some((e=>e))});function Vv(e){let t=[Fv];return e&&!1===e.fixed&&t.push(Bv.of(!0)),t}const Fv=wp.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=e.state.facet(Lv).map((t=>new Uv(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(Bv),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Bv)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=wd.iter(this.view.state.facet(Rv),this.view.viewport.from),r=[],i=this.gutters.map((e=>new Wv(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks){let t;if(Array.isArray(e.type)){for(let n of e.type)if(n.type==Kf.Text){t=n;break}}else t=e.type==Kf.Text?e:void 0;if(t){r.length&&(r=[]),Hv(n,r,e.from);for(let e of i)e.line(this.view,t,r)}}for(let e of i)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Lv),n=e.state.facet(Lv),r=e.docChanged||e.heightChanged||e.viewportChanged||!wd.eq(e.startState.facet(Rv),e.state.facet(Rv),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let t of this.gutters)t.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new Uv(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>bg.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Ap.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))});function qv(e){return Array.isArray(e)?e:[e]}function Hv(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class Wv{constructor(e,t,n){this.gutter=e,this.height=n,this.localMarkers=[],this.i=0,this.cursor=wd.iter(e.markers,t.from)}line(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),Hv(this.cursor,this.localMarkers,t.from);let r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;if(0==r.length&&!o.config.renderEmptyElements)return;let s=t.top-this.height;if(this.i==o.elements.length){let n=new Jv(e,t.height,s,r);o.elements.push(n),o.dom.appendChild(n.dom)}else o.elements[this.i].update(e,t.height,s,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Uv{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[n](e,i,r)&&r.preventDefault()}));this.markers=qv(t.markers(e)),t.initialSpacer&&(this.spacer=new Jv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=qv(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!wd.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Jv{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let e=o;e<this.markers.length;e++)if(this.markers[e].compare(a)){s=e,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const Kv=Ch.define(),Gv=Ch.define({combine:e=>pd(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let e in t){let r=n[e],i=t[e];n[e]=r?(e,t,n)=>r(e,t,n)||i(e,t,n):i}return n}})});class Qv extends Iv{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Xv(e,t){return e.state.facet(Gv).formatNumber(t,e.state)}const Yv=Lv.compute([Gv],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Kv),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new Qv(Xv(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(Gv)!=e.state.facet(Gv),initialSpacer:e=>new Qv(Xv(e,ey(e.state.doc.lines))),updateSpacer(e,t){let n=Xv(t.view,ey(t.view.state.doc.lines));return n==e.number?e:new Qv(n)},domEventHandlers:e.facet(Gv).domEventHandlers})));function Zv(e={}){return[Gv.of(e),Vv(),Yv]}function ey(e){let t=9;for(;t<e;)t=10*t+9;return t}const ty=new class extends Iv{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},ny=Rv.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges)if(r.empty){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(ty.range(i)))}return wd.of(t)}));function ry(){return ny}const iy=1024;let oy=0;class sy{constructor(e,t){this.from=e,this.to=t}}class ay{constructor(e={}){this.id=oy++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=cy.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}ay.closedBy=new ay({deserialize:e=>e.split(" ")}),ay.openedBy=new ay({deserialize:e=>e.split(" ")}),ay.group=new ay({deserialize:e=>e.split(" ")}),ay.contextHash=new ay({perNode:!0}),ay.lookAhead=new ay({perNode:!0}),ay.mounted=new ay({perNode:!0});const ly=Object.create(null);class cy{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):ly,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new cy(e.name||"",t,e.id,n);if(e.props)for(let n of e.props)if(Array.isArray(n)||(n=n(r)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[n[0].id]=n[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(ay.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(ay.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}cy.none=new cy("",Object.create(null),0,8);class uy{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new cy(n.name,r,n.id,n.flags):n)}return new uy(t)}}const hy=new WeakMap,dy=new WeakMap;var fy;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(fy||(fy={}));class py{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(ay.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let n=e.toString();n&&(t&&(t+=","),t+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Cy(this.topNode,e)}cursorAt(e,t=0,n=0){let r=hy.get(this)||this.topNode,i=new Cy(r);return i.moveTo(e,t),hy.set(this,i._tree),i}get topNode(){return new by(this,0,0,null)}resolve(e,t=0){let n=wy(hy.get(this)||this.topNode,e,t,!1);return hy.set(this,n),n}resolveInner(e,t=0){let n=wy(dy.get(this)||this.topNode,e,t,!0);return dy.set(this,n),n}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e;for(let o=this.cursor((e.mode||0)|fy.IncludeAnonymous);;){let e=!1;if(o.from<=i&&o.to>=r&&(o.type.isAnonymous||!1!==t(o))){if(o.firstChild())continue;e=!0}for(;e&&n&&!o.type.isAnonymous&&n(o),!o.nextSibling();){if(!o.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ay(cy.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new py(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new py(cy.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=iy,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new my(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,v,y){let{id:w,start:b,end:x,size:$}=a,k=u;for(;$<0;){if(a.next(),-1==$){let t=o[w];return n.push(t),void v.push(b-e)}if(-3==$)return void(c=w);if(-4==$)return void(u=w);throw new RangeError(`Unrecognized record size: ${$}`)}let S,C,_=l[w],O=b-e;if(x-b<=i&&(C=m(a.pos-t,y))){let t=new Uint16Array(C.size-C.skip),n=a.pos-C.size,i=t.length;for(;a.pos>n;)i=g(C.start,t,i);S=new gy(t,x-C.start,r),O=C.start-e}else{let e=a.pos-$;a.next();let t=[],n=[],r=w>=s?w:-1,o=0,l=x;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(f(t,n,b,o,a.end,l,r,k),o=t.length,l=a.end),a.next()):h(b,e,t,n,r);if(r>=0&&o>0&&o<t.length&&f(t,n,b,o,b,l,r,k),t.reverse(),n.reverse(),r>-1&&o>0){let e=d(_);S=Ay(_,t,n,0,t.length,0,x-b,e,e)}else S=p(_,t,n,x-b,k-x)}n.push(S),v.push(O)}function d(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof py){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(ay.lookAhead))&&(s=n[a]+i.length+o)}return p(e,t,n,r,s)}}function f(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(p(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function p(e,t,n,r,i=0,o){if(c){let e=[ay.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[ay.lookAhead,i];o=o?[e].concat(o):[e]}return new py(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function g(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=g(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let v=[],y=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,v,y,-1);let w=null!==(t=e.length)&&void 0!==t?t:v.length?y[0]+v[0].length:0;return new py(l[e.topID],v.reverse(),y.reverse(),w)}(e)}}py.empty=new py(cy.none,[],[],0);class my{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new my(this.buffer,this.index)}}class gy{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return cy.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(vy(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n,r){let i=this.buffer,o=new Uint16Array(t-e);for(let r=e,s=0;r<t;)o[s++]=i[r++],o[s++]=i[r++]-n,o[s++]=i[r++]-n,o[s++]=i[r++]-e;return new gy(o,r-n,this.set)}}function vy(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function yy(e,t){let n=e.childBefore(t);for(;n;){let t=n.lastChild;if(!t||t.to!=n.to)break;t.type.isError&&t.from==t.to?(e=n,n=t.prevSibling):n=t}return e}function wy(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof by&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:fy.IgnoreOverlays;if(r)for(let r=e,s=r.parent;s;r=s,s=r.parent)r instanceof by&&r.index<0&&(null===(i=s.enter(t,n,o))||void 0===i?void 0:i.from)!=r.from&&(e=s);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class by{constructor(e,t,n,r){this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(vy(r,n,c,c+l.length))if(l instanceof gy){if(i&fy.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new Sy(new ky(o,l,e,c),null,s)}else if(i&fy.IncludeAnonymous||!l.type.isAnonymous||_y(l)){let s;if(!(i&fy.IgnoreMounts)&&l.props&&(s=l.prop(ay.mounted))&&!s.overlay)return new by(s.tree,c,e,o);let a=new by(l,c,e,o);return i&fy.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&fy.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&fy.IgnoreOverlays)&&(r=this._tree.prop(ay.mounted))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new by(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Cy(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return wy(this,e,t,!1)}resolveInner(e,t=0){return wy(this,e,t,!0)}enterUnfinishedNodesBefore(e){return yy(this,e)}getChild(e,t=null,n=null){let r=xy(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return xy(this,e,t,n)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return $y(this,e)}}function xy(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function $y(e,t,n=t.length-1){for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class ky{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class Sy{constructor(e,t,n){this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new Sy(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&fy.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new Sy(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sy(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sy(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Cy(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1],s=n.buffer[this.index+2];e.push(n.slice(r,i,o,s)),t.push(0)}return new py(this.type,e,t,this.to-this.from)}resolve(e,t=0){return wy(this,e,t,!1)}resolveInner(e,t=0){return wy(this,e,t,!0)}enterUnfinishedNodesBefore(e){return yy(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,n=null){let r=xy(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return xy(this,e,t,n)}get node(){return this}matchContext(e){return $y(this,e)}}class Cy{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof by)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof by?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&fy.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&fy.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&fy.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&fy.IncludeAnonymous||e instanceof gy||!e.type.isAnonymous||_y(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let e=n;e<this.stack.length;e++)t=new Sy(this.buffer,t,this.stack[e]);return this.bufferNode=new Sy(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return $y(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return $y(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function _y(e){return e.children.some((e=>e instanceof gy||!e.type.isAnonymous||_y(e)))}const Oy=new WeakMap;function Ey(e,t){if(!e.isAnonymous||t instanceof gy||t.type!=e)return 1;let n=Oy.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof py)){n=1;break}n+=Ey(e,r)}Oy.set(t,n)}return n}function Ay(e,t,n,r,i,o,s,a,l){let c=0;for(let n=r;n<i;n++)c+=Ey(e,t[n]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,f=r[c],p=Ey(e,n[c]);for(c++;c<s;c++){let t=Ey(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-f;h.push(Ay(e,n,r,i,c,f,t,null,l))}d.push(f+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class My{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new My(0,e.length,e,0,!1,n)];for(let n of t)n.to>e.length&&r.push(n);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new My(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class Py{startParse(e,t,n){return"string"==typeof e&&(e=new Ty(e)),n=n?n.length?n.map((e=>new sy(e.from,e.to))):[new sy(0,0)]:[new sy(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class Ty{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ay({perNode:!0});let jy=0;class Ny{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=jy++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new Ny([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new Ry;return t=>t.modified.indexOf(e)>-1?t:Ry.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let Iy=0;class Ry{constructor(){this.instances=[],this.id=Iy++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>{return n.base==e&&(r=t,i=n.modified,r.length==i.length&&r.every(((e,t)=>e==i[t])));var r,i}));if(n)return n;let r=[],i=new Ny(r,e,t);for(let e of t)e.instances.push(i);let o=Dy(t);for(let t of e.set)for(let e of o)r.push(Ry.get(t,e));return i}}function Dy(e){let t=[e];for(let n=0;n<e.length;n++)for(let r of Dy(e.slice(0,n).concat(e.slice(n+1))))t.push(r);return t}function Ly(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new By(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return zy.add(t)}const zy=new ay;class By{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Vy(e,t){let n=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)n[e.id]=t.class;else n[t.tag.id]=t.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function Fy(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function qy(e,t,n,r=0,i=e.length){let o=new Hy(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}class Hy{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=o.prop(zy),u=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let e=Fy(i,c.tags);e&&(l&&(l+=" "),l+=e,1==c.mode?r+=(r?" ":"")+e:0==c.mode&&(u=!0));break}c=c.next}if(this.startSpan(e.from,l),u)return;let h=e.tree&&e.tree.prop(ay.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,f=s;;d++){let p=d<h.overlay.length?h.overlay[d]:null,m=p?p.from+s:a,g=Math.max(t,f),v=Math.min(n,m);if(g<v&&u)for(;e.from<v&&(this.highlightRange(e,g,v,r,i),this.startSpan(Math.min(n,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!p||m>n)break;f=p.to+s,f>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,f),r,c),this.startSpan(f,l))}u&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const Wy=Ny.define,Uy=Wy(),Jy=Wy(),Ky=Wy(Jy),Gy=Wy(Jy),Qy=Wy(),Xy=Wy(Qy),Yy=Wy(Qy),Zy=Wy(),ew=Wy(Zy),tw=Wy(),nw=Wy(),rw=Wy(),iw=Wy(rw),ow=Wy(),sw={comment:Uy,lineComment:Wy(Uy),blockComment:Wy(Uy),docComment:Wy(Uy),name:Jy,variableName:Wy(Jy),typeName:Ky,tagName:Wy(Ky),propertyName:Gy,attributeName:Wy(Gy),className:Wy(Jy),labelName:Wy(Jy),namespace:Wy(Jy),macroName:Wy(Jy),literal:Qy,string:Xy,docString:Wy(Xy),character:Wy(Xy),attributeValue:Wy(Xy),number:Yy,integer:Wy(Yy),float:Wy(Yy),bool:Wy(Qy),regexp:Wy(Qy),escape:Wy(Qy),color:Wy(Qy),url:Wy(Qy),keyword:tw,self:Wy(tw),null:Wy(tw),atom:Wy(tw),unit:Wy(tw),modifier:Wy(tw),operatorKeyword:Wy(tw),controlKeyword:Wy(tw),definitionKeyword:Wy(tw),moduleKeyword:Wy(tw),operator:nw,derefOperator:Wy(nw),arithmeticOperator:Wy(nw),logicOperator:Wy(nw),bitwiseOperator:Wy(nw),compareOperator:Wy(nw),updateOperator:Wy(nw),definitionOperator:Wy(nw),typeOperator:Wy(nw),controlOperator:Wy(nw),punctuation:rw,separator:Wy(rw),bracket:iw,angleBracket:Wy(iw),squareBracket:Wy(iw),paren:Wy(iw),brace:Wy(iw),content:Zy,heading:ew,heading1:Wy(ew),heading2:Wy(ew),heading3:Wy(ew),heading4:Wy(ew),heading5:Wy(ew),heading6:Wy(ew),contentSeparator:Wy(Zy),list:Wy(Zy),quote:Wy(Zy),emphasis:Wy(Zy),strong:Wy(Zy),link:Wy(Zy),monospace:Wy(Zy),strikethrough:Wy(Zy),inserted:Wy(),deleted:Wy(),changed:Wy(),invalid:Wy(),meta:ow,documentMeta:Wy(ow),annotation:Wy(ow),processingInstruction:Wy(ow),definition:Ny.defineModifier(),constant:Ny.defineModifier(),function:Ny.defineModifier(),standard:Ny.defineModifier(),local:Ny.defineModifier(),special:Ny.defineModifier()};var aw;Vy([{tag:sw.link,class:"tok-link"},{tag:sw.heading,class:"tok-heading"},{tag:sw.emphasis,class:"tok-emphasis"},{tag:sw.strong,class:"tok-strong"},{tag:sw.keyword,class:"tok-keyword"},{tag:sw.atom,class:"tok-atom"},{tag:sw.bool,class:"tok-bool"},{tag:sw.url,class:"tok-url"},{tag:sw.labelName,class:"tok-labelName"},{tag:sw.inserted,class:"tok-inserted"},{tag:sw.deleted,class:"tok-deleted"},{tag:sw.literal,class:"tok-literal"},{tag:sw.string,class:"tok-string"},{tag:sw.number,class:"tok-number"},{tag:[sw.regexp,sw.escape,sw.special(sw.string)],class:"tok-string2"},{tag:sw.variableName,class:"tok-variableName"},{tag:sw.local(sw.variableName),class:"tok-variableName tok-local"},{tag:sw.definition(sw.variableName),class:"tok-variableName tok-definition"},{tag:sw.special(sw.variableName),class:"tok-variableName2"},{tag:sw.definition(sw.propertyName),class:"tok-propertyName tok-definition"},{tag:sw.typeName,class:"tok-typeName"},{tag:sw.namespace,class:"tok-namespace"},{tag:sw.className,class:"tok-className"},{tag:sw.macroName,class:"tok-macroName"},{tag:sw.propertyName,class:"tok-propertyName"},{tag:sw.operator,class:"tok-operator"},{tag:sw.comment,class:"tok-comment"},{tag:sw.meta,class:"tok-meta"},{tag:sw.invalid,class:"tok-invalid"},{tag:sw.punctuation,class:"tok-punctuation"}]);const lw=new ay;class cw{constructor(e,t,n=[]){this.data=e,fd.prototype.hasOwnProperty("tree")||Object.defineProperty(fd.prototype,"tree",{get(){return dw(this)}}),this.parser=t,this.extension=[xw.of(this),fd.languageData.of(((e,t,n)=>e.facet(uw(e,t,n))))].concat(n)}isActiveAt(e,t,n=-1){return uw(e,t,n)==this.data}findRegions(e){let t=e.facet(xw);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(lw)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(ay.mounted);if(i){if(i.tree.prop(lw)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof py&&r(i,e.positions[n]+t)}};return r(dw(e),0),n}get allowsNesting(){return!0}}function uw(e,t,n){let r=e.facet(xw);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let r=dw(e).topNode;r;r=r.enter(t,n,fy.ExcludeBuffers))i=r.type.prop(lw)||i;return i}cw.setState=td.define();class hw extends cw{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=(n=e.languageData,Ch.define({combine:n?e=>e.concat(n):void 0}));var n;return new hw(t,e.parser.configure({props:[lw.add((e=>e.isTop?t:void 0))]}))}configure(e){return new hw(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function dw(e){let t=e.field(cw.state,!1);return t?t.tree:py.empty}class fw{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let pw=null;class mw{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new mw(e,t,[],py.empty,0,n,[],null)}startParse(){return this.parser.startParse(new fw(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=py.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(My.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(My.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=pw;pw=this;try{return e()}finally{pw=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=gw(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=My.applyChanges(n,t),r=py.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new mw(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=gw(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Py{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to;return{parsedPos:i,advance(){let t=pw;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new py(cy.none,[],[],o-i)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return pw}}function gw(e,t,n){return My.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class vw{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new vw(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=mw.create(e.facet(xw).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new vw(n)}}cw.state=Th.define({create:vw.init,update(e,t){for(let e of t.effects)if(e.is(cw.setState))return e.value;return t.startState.facet(xw)!=t.state.facet(xw)?vw.init(t.state):e.apply(t)}});let yw=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(yw=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const ww="undefined"!=typeof navigator&&(null===(aw=navigator.scheduling)||void 0===aw?void 0:aw.isInputPending)?()=>navigator.scheduling.isInputPending():null,bw=wp.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(cw.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(cw.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=yw(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(cw.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!ww?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>ww&&ww()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:cw.setState.of(new vw(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>mp(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xw=Ch.define({combine:e=>e.length?e[0]:null,enables:[cw.state,bw]});class $w{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const kw=Ch.define(),Sw=Ch.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function Cw(e){let t=e.facet(Sw);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function _w(e,t){let n="",r=e.tabSize;if(9==e.facet(Sw).charCodeAt(0))for(;t>=r;)n+="\t",t-=r;for(let e=0;e<t;e++)n+=" ";return n}function Ow(e,t){e instanceof fd&&(e=new Ew(e));for(let n of e.state.facet(kw)){let r=n(e,t);if(null!=r)return r}let n=dw(e.state);return n?function(e,t,n){return Pw(t.resolveInner(n).enterUnfinishedNodesBefore(n),n,e)}(e,n,t):null}class Ew{constructor(e,t={}){this.state=e,this.options=t,this.unit=Cw(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return Pd(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Aw=new ay;function Mw(e){let t=e.type.prop(Aw);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(ay.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>function(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let e=n.to;;){let i=t.childAfter(e);if(!i||i==r)return null;if(!i.type.isSkipped)return i.from<s?n:null;e=i.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Tw:null}function Pw(e,t,n){for(;e;e=e.parent){let r=Mw(e);if(r)return r(jw.create(n,t,e))}return null}function Tw(){return 0}class jw extends Ew{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.node=n}static create(e,t,n){return new jw(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(Nw(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?Pw(e,this.pos,this.base):0}}function Nw(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function Iw({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}function Rw(){return fd.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:e}of s.selection.ranges){let t=s.doc.lineAt(e);if(t.from==a)continue;a=t.from;let n=Ow(s,t.from);if(null==n)continue;let r=/^\s*/.exec(t.text)[0],i=_w(s,n);r!=i&&l.push({from:t.from,to:t.from+r.length,insert:i})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const Dw=Ch.define(),Lw=new ay;function zw(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function Bw(e,t,n){for(let r of e.facet(Dw)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=dw(e);if(r.length<n)return null;let i=null;for(let o=r.resolveInner(n);o;o=o.parent){if(o.to<=n||o.from>n)continue;if(i&&o.from<t)break;let s=o.type.prop(Lw);if(s&&(o.to<r.length-50||r.length==e.doc.length||!zw(o))){let r=s(o,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function Vw(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const Fw=td.define({map:Vw}),qw=td.define({map:Vw});function Hw(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const Ww=Th.define({create:()=>Gf.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(Fw)&&!Jw(e,n.value.from,n.value.to)?e=e.update({add:[eb.range(n.value.from,n.value.to)]}):n.is(qw)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>bg.decorations.from(e)});function Uw(e,t,n){var r;let i=null;return null===(r=e.field(Ww,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function Jw(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function Kw(e,t){return e.field(Ww,!1)?t:t.concat(td.appendConfig.of(Zw()))}function Gw(e,t,n=!0){let r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return bg.announce.of(`${e.state.phrase(n?"Folded lines":"Unfolded lines")} ${r} ${e.state.phrase("to")} ${i}.`)}const Qw=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Hw(e)){let n=Bw(e.state,t.from,t.to);if(n)return e.dispatch({effects:Kw(e.state,[Fw.of(n),Gw(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(Ww,!1))return!1;let t=[];for(let n of Hw(e)){let r=Uw(e.state,n.from,n.to);r&&t.push(qw.of(r),Gw(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=Bw(t,i.from,i.to);o&&n.push(Fw.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:Kw(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(Ww,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(qw.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],Xw={placeholderDOM:null,placeholderText:"…"},Yw=Ch.define({combine:e=>pd(e,Xw)});function Zw(e){let t=[Ww,ib];return e&&t.push(Yw.of(e)),t}const eb=Gf.replace({widget:new class extends Jf{toDOM(e){let{state:t}=e,n=t.facet(Yw),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=Uw(e.state,n.from,n.to);r&&e.dispatch({effects:qw.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let i=document.createElement("span");return i.textContent=n.placeholderText,i.setAttribute("aria-label",t.phrase("folded code")),i.title=t.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),tb={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class nb extends Iv{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function rb(e={}){let t=Object.assign(Object.assign({},tb),e),n=new nb(t,!0),r=new nb(t,!1),i=wp.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(xw)!=e.state.facet(xw)||e.startState.field(Ww,!1)!=e.state.field(Ww,!1)||dw(e.startState)!=dw(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new bd;for(let i of e.viewportLineBlocks){let o=Uw(e.state,i.from,i.to)?r:Bw(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,zv({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||wd.empty},initialSpacer:()=>new nb(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=Uw(e.state,t.from,t.to);if(r)return e.dispatch({effects:qw.of(r)}),!0;let i=Bw(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:Fw.of(i)}),!0)}})}),Zw()]}const ib=bg.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ob{constructor(e,t){let n;function r(e){let t=Rd.newName();return(n||(n=Object.create(null)))["."+t]=e,t}const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof cw?e=>e.prop(lw)==o.data:o?e=>e==o:void 0,this.style=Vy(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new Rd(n):null,this.themeType=t.themeType}static define(e,t){return new ob(e,t||{})}}const sb=Ch.define(),ab=Ch.define({combine:e=>e.length?[e[0]]:null});function lb(e){let t=e.facet(sb);return t.length?t:e.facet(ab)}function cb(e,t){let n,r=[hb];return e instanceof ob&&(e.module&&r.push(bg.styleModule.of(e.module)),n=e.themeType),(null==t?void 0:t.fallback)?r.push(ab.of(e)):n?r.push(sb.computeN([bg.darkTheme],(t=>t.facet(bg.darkTheme)==("dark"==n)?[e]:[]))):r.push(sb.of(e)),r}class ub{constructor(e){this.markCache=Object.create(null),this.tree=dw(e.state),this.decorations=this.buildDeco(e,lb(e.state))}update(e){let t=dw(e.state),n=lb(e.state),r=n!=lb(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return Gf.none;let n=new bd;for(let{from:r,to:i}of e.visibleRanges)qy(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=Gf.mark({class:r})))}),r,i);return n.finish()}}const hb=Lh.high(wp.fromClass(ub,{decorations:e=>e.decorations})),db=ob.define([{tag:sw.meta,color:"#7a757a"},{tag:sw.link,textDecoration:"underline"},{tag:sw.heading,textDecoration:"underline",fontWeight:"bold"},{tag:sw.emphasis,fontStyle:"italic"},{tag:sw.strong,fontWeight:"bold"},{tag:sw.strikethrough,textDecoration:"line-through"},{tag:sw.keyword,color:"#708"},{tag:[sw.atom,sw.bool,sw.url,sw.contentSeparator,sw.labelName],color:"#219"},{tag:[sw.literal,sw.inserted],color:"#164"},{tag:[sw.string,sw.deleted],color:"#a11"},{tag:[sw.regexp,sw.escape,sw.special(sw.string)],color:"#e40"},{tag:sw.definition(sw.variableName),color:"#00f"},{tag:sw.local(sw.variableName),color:"#30a"},{tag:[sw.typeName,sw.namespace],color:"#085"},{tag:sw.className,color:"#167"},{tag:[sw.special(sw.variableName),sw.macroName],color:"#256"},{tag:sw.definition(sw.propertyName),color:"#00c"},{tag:sw.comment,color:"#940"},{tag:sw.invalid,color:"#f00"}]),fb=bg.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),pb="()[]{}",mb=Ch.define({combine:e=>pd(e,{afterCursor:!0,brackets:pb,maxScanDistance:1e4,renderMatch:yb})}),gb=Gf.mark({class:"cm-matchingBracket"}),vb=Gf.mark({class:"cm-nonmatchingBracket"});function yb(e){let t=[],n=e.matched?gb:vb;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const wb=Th.define({create:()=>Gf.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(mb);for(let e of t.state.selection.ranges){if(!e.empty)continue;let i=kb(t.state,e.head,-1,r)||e.head>0&&kb(t.state,e.head-1,1,r)||r.afterCursor&&(kb(t.state,e.head,1,r)||e.head<t.state.doc.length&&kb(t.state,e.head+1,-1,r));i&&(n=n.concat(r.renderMatch(i,t.state)))}return Gf.set(n,!0)},provide:e=>bg.decorations.from(e)}),bb=[wb,fb];function xb(e={}){return[mb.of(e),bb]}function $b(e,t,n){let r=e.prop(t<0?ay.openedBy:ay.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function kb(e,t,n,r={}){let i=r.maxScanDistance||1e4,o=r.brackets||pb,s=dw(e),a=s.resolveInner(t,n);for(let r=a;r;r=r.parent){let i=$b(r.type,n,o);if(i&&r.from<r.to)return Sb(e,t,n,r,i,o)}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let e=0;!u.next().done&&e<=o;){let o=u.value;n<0&&(e+=o.length);let a=t+e*n;for(let e=n>0?0:o.length-1,t=n>0?o.length:-1;e!=t;e+=n){let t=s.indexOf(o[e]);if(!(t<0||r.resolve(a+e,1).type!=i))if(t%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};h--}}n>0&&(e+=o.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function Sb(e,t,n,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,c=null==s?void 0:s.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==l&&i.indexOf(c.type.name)>-1&&c.from<c.to)return{start:a,end:{from:c.from,to:c.to},matched:!0};if($b(c.type,n,o))l++;else if($b(c.type,-n,o)&&(l--,0==l))return{start:a,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1}}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}const Cb=Object.create(null),_b=[cy.none],Ob=[],Eb=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Eb[e]=Mb(Cb,t);function Ab(e,t){Ob.indexOf(e)>-1||(Ob.push(e),console.warn(t))}function Mb(e,t){let n=null;for(let r of t.split(".")){let t=e[r]||sw[r];t?"function"==typeof t?n?n=t(n):Ab(r,`Modifier ${r} used at start of tag`):n?Ab(r,`Tag ${r} used as modifier`):n=t:Ab(r,`Unknown highlighting tag ${r}`)}if(!n)return 0;let r=t.replace(/ /g,"_"),i=cy.define({id:_b.length,name:r,props:[Ly({[r]:n})]});return _b.push(i),i.id}function Pb(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const Tb=Pb(Db,0),jb=Pb(Rb,0),Nb=Pb(((e,t)=>Rb(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from,to:i.to})}return t}(t))),0);function Ib(e,t=e.selection.main.head){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}function Rb(e,t,n=t.selection.ranges){let r=n.map((e=>Ib(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-50,r),l=e.sliceDoc(i,i+50),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=100?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+50),s=e.sliceDoc(i-50,i));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function Db(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:e,to:o}of n){let n=r.length,s=1e9;for(let n=e;n<=o;){let a=t.doc.lineAt(n);if(a.from>i&&(e==o||o>a.from)){i=a.from;let e=Ib(t,n).line;if(!e)continue;let o=/^\s*/.exec(a.text)[0].length,l=o==a.length,c=a.text.slice(o,o+e.length)==e?o:-1;o<a.text.length&&o<s&&(s=o),r.push({line:a,comment:c,token:e,indent:o,empty:l,single:!1})}n=a.to+1}if(s<1e9)for(let e=n;e<r.length;e++)r[e].indent<r[e].line.text.length&&(r[e].indent=s);r.length==n+1&&(r[n].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:n,indent:i,empty:o,single:s}of r)!s&&o||e.push({from:t.from+i,insert:n+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const Lb=Yh.define(),zb=Yh.define(),Bb=Ch.define(),Vb=Ch.define({combine:e=>pd(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})});const Fb=Th.define({create:()=>ax.empty,update(e,t){let n=t.state.facet(Vb),r=t.annotation(Lb);if(r){let i=t.docChanged?$h.single(function(e){let t=0;return e.iterChangedRanges(((e,n)=>t=n)),t}(t.changes)):void 0,o=Yb.fromTransaction(t,i),s=r.side,a=0==s?e.undone:e.done;return a=o?Zb(a,a.length,n.minDepth,o):nx(a,t.startState.selection),new ax(0==s?r.rest:a,0==s?a:r.rest)}let i=t.annotation(zb);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(nd.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=Yb.fromTransaction(t),s=t.annotation(nd.time),a=t.annotation(nd.userEvent);return o?e=e.addChanges(o,s,a,n.newGroupDelay,n.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new ax(e.done.map(Yb.fromJSON),e.undone.map(Yb.fromJSON))});function qb(e={}){return[Fb,Vb.of(e),bg.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?Wb:"historyRedo"==e.inputType?Ub:null;return!!n&&(e.preventDefault(),n(t))}})]}function Hb(e,t){return function({state:n,dispatch:r}){if(!t&&n.readOnly)return!1;let i=n.field(Fb,!1);if(!i)return!1;let o=i.pop(e,n,t);return!!o&&(r(o),!0)}}const Wb=Hb(0,!1),Ub=Hb(1,!1),Jb=Hb(0,!0),Kb=Hb(1,!0);function Gb(e){return function(t){let n=t.field(Fb,!1);if(!n)return 0;let r=0==e?n.done:n.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const Qb=Gb(0),Xb=Gb(1);class Yb{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new Yb(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Yb(e.changes&&ph.fromJSON(e.changes),[],e.mapped&&fh.fromJSON(e.mapped),e.startSelection&&$h.fromJSON(e.startSelection),e.selectionsAfter.map($h.fromJSON))}static fromTransaction(e,t){let n=tx;for(let t of e.startState.facet(Bb)){let r=t(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new Yb(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,tx)}static selection(e){return new Yb(void 0,tx,void 0,void 0,e)}}function Zb(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function ex(e,t){return e.length?t.length?e.concat(t):e:t}const tx=[];function nx(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-200));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),Zb(e,e.length-1,1e9,n.setSelAfter(r)))}return[Yb.selection([t])]}function rx(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function ix(e,t){if(!e.length)return e;let n=e.length,r=tx;for(;n;){let i=ox(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[Yb.selection(r)]:tx}function ox(e,t,n){let r=ex(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):tx,n);if(!e.changes)return Yb.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new Yb(i,td.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const sx=/^(input\.type|delete)($|\.)/;class ax{constructor(e,t,n=0,r){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new ax(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||sx.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r&&function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let e=0;e<n.length;){let t=n[e++],s=n[e++];o>=t&&i<=s&&(r=!0)}})),r}(s.changes,e.changes)||"input.type.compose"==n)?Zb(o,o.length-1,i,new Yb(e.changes.compose(s.changes),ex(e.effects,s.effects),s.mapped,s.startSelection,tx)):Zb(o,o.length,i,e),new ax(o,tx,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:tx;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&(o=i[i.length-1],s=e,o.ranges.length==s.ranges.length&&0===o.ranges.filter(((e,t)=>e.empty!=s.ranges[t].empty)).length)?this:new ax(nx(this.done,e),this.undone,t,n);var o,s}addMapping(e){return new ax(ix(this.done,e),ix(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1];if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:Lb.of({side:e,rest:rx(r)}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?tx:r.slice(0,r.length-1);return i.mapped&&(n=ix(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:Lb.of({side:e,rest:n}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}ax.empty=new ax(tx,tx);const lx=[{key:"Mod-z",run:Wb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ub,preventDefault:!0},{key:"Mod-u",run:Jb,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Kb,preventDefault:!0}];function cx(e,t){return $h.create(e.ranges.map(t),e.mainIndex)}function ux(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function hx({state:e,dispatch:t},n){let r=cx(e.selection,n);return!r.eq(e.selection)&&(t(ux(e,r)),!0)}function dx(e,t){return $h.cursor(t?e.to:e.from)}function fx(e,t){return hx(e,(n=>n.empty?e.moveByChar(n,t):dx(n,t)))}function px(e){return e.textDirectionAt(e.state.selection.main.head)==Ap.LTR}const mx=e=>fx(e,!px(e)),gx=e=>fx(e,px(e));function vx(e,t){return hx(e,(n=>n.empty?e.moveByGroup(n,t):dx(n,t)))}function yx(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function wx(e,t,n){let r,i,o=dw(e).resolveInner(t.head),s=n?ay.closedBy:ay.openedBy;for(let r=t.head;;){let t=n?o.childAfter(r):o.childBefore(r);if(!t)break;yx(e,t,s)?o=t:r=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?kb(e,o.from,1):kb(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,$h.cursor(i,n?-1:1)}function bx(e,t){return hx(e,(n=>{if(!n.empty)return dx(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const xx=e=>bx(e,!1),$x=e=>bx(e,!0);function kx(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function Sx(e,t){let{state:n}=e,r=cx(n.selection,(n=>n.empty?e.moveVertically(n,t,kx(e)):dx(n,t)));if(r.eq(n.selection))return!1;let i,o=e.coordsAtPos(n.selection.main.head),s=e.scrollDOM.getBoundingClientRect();return o&&o.top>s.top&&o.bottom<s.bottom&&o.top-s.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(i=bg.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-s.top})),e.dispatch(ux(n,r),{effects:i}),!0}const Cx=e=>Sx(e,!1),_x=e=>Sx(e,!0);function Ox(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=$h.cursor(r.from+n))}return i}const Ex=e=>hx(e,(t=>Ox(e,t,!0))),Ax=e=>hx(e,(t=>Ox(e,t,!1)));function Mx(e,t){let n=cx(e.state.selection,(e=>{let n=t(e);return $h.range(e.anchor,n.head,n.goalColumn)}));return!n.eq(e.state.selection)&&(e.dispatch(ux(e.state,n)),!0)}function Px(e,t){return Mx(e,(n=>e.moveByChar(n,t)))}const Tx=e=>Px(e,!px(e)),jx=e=>Px(e,px(e));function Nx(e,t){return Mx(e,(n=>e.moveByGroup(n,t)))}function Ix(e,t){return Mx(e,(n=>e.moveVertically(n,t)))}const Rx=e=>Ix(e,!1),Dx=e=>Ix(e,!0);function Lx(e,t){return Mx(e,(n=>e.moveVertically(n,t,kx(e))))}const zx=e=>Lx(e,!1),Bx=e=>Lx(e,!0),Vx=e=>Mx(e,(t=>Ox(e,t,!0))),Fx=e=>Mx(e,(t=>Ox(e,t,!1))),qx=({state:e,dispatch:t})=>(t(ux(e,{anchor:0})),!0),Hx=({state:e,dispatch:t})=>(t(ux(e,{anchor:e.doc.length})),!0),Wx=({state:e,dispatch:t})=>(t(ux(e,{anchor:e.selection.main.anchor,head:0})),!0),Ux=({state:e,dispatch:t})=>(t(ux(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Jx({state:e,dispatch:t},n){if(e.readOnly)return!1;let r="delete.selection",i=e.changeByRange((e=>{let{from:t,to:i}=e;if(t==i){let e=n(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),i=Math.max(i,e)}return t==i?{range:e}:{changes:{from:t,to:i},range:$h.cursor(t)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:r})),!0)}function Kx(e,t,n){if(e instanceof bg)for(let r of e.state.facet(bg.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const Gx=(e,t)=>Jx(e,(n=>{let r,i,{state:o}=e,s=o.doc.lineAt(n);if(!t&&n>s.from&&n<s.from+200&&!/[^ \t]/.test(r=s.text.slice(0,n-s.from))){if("\t"==r[r.length-1])return n-1;let e=Pd(r,o.tabSize)%Cw(o)||Cw(o);for(let t=0;t<e&&" "==r[r.length-1-t];t++)n--;i=n}else i=rh(s.text,n-s.from,t,t)+s.from,i==n&&s.number!=(t?o.doc.lines:1)&&(i+=t?1:-1);return Kx(e,i,t)})),Qx=e=>Gx(e,!1),Xx=e=>Gx(e,!0),Yx=(e,t)=>Jx(e,(n=>{let r=n,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=rh(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n||(e=c),r=a}return Kx(e,r,t)})),Zx=e=>Yx(e,!1),e$=e=>Jx(e,(t=>{let n=e.lineBlockAt(t).to;return Kx(e,t<n?n:Math.min(e.state.doc.length,t+1),!0)}));function t$(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function n$(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let t of t$(e)){if(n?t.to==e.doc.length:0==t.from)continue;let o=e.doc.lineAt(n?t.to+1:t.from-1),s=o.length+1;if(n){r.push({from:t.to,to:o.to},{from:t.from,insert:o.text+e.lineBreak});for(let n of t.ranges)i.push($h.range(Math.min(e.doc.length,n.anchor+s),Math.min(e.doc.length,n.head+s)))}else{r.push({from:o.from,to:t.from},{from:t.to,insert:e.lineBreak+o.text});for(let e of t.ranges)i.push($h.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:$h.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function r$(e,t,n){if(e.readOnly)return!1;let r=[];for(let t of t$(e))n?r.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):r.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const i$=s$(!1),o$=s$(!0);function s$(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=dw(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(ay.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from?{from:i.to,to:o.from}:null}(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new Ew(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=Ow(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",_w(t,l)];return s&&c.push(_w(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:Wu.of(c)},range:$h.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function a$(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let o=r.from;o<=r.to;){let s=e.doc.lineAt(o);s.number>n&&(r.empty||r.to>s.from)&&(t(s,i,r),n=s.number),o=s.to+1}let o=e.changes(i);return{changes:i,range:$h.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const l$=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(a$(e,((t,n)=>{n.push({from:t.from,insert:e.facet(Sw)})})),{userEvent:"input.indent"})),!0),c$=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(a$(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=Pd(r,e.tabSize),o=0,s=_w(e,Math.max(0,i-Cw(e)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),u$=[{key:"Ctrl-b",run:mx,shift:Tx,preventDefault:!0},{key:"Ctrl-f",run:gx,shift:jx},{key:"Ctrl-p",run:xx,shift:Rx},{key:"Ctrl-n",run:$x,shift:Dx},{key:"Ctrl-a",run:e=>hx(e,(t=>$h.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>Mx(e,(t=>$h.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>hx(e,(t=>$h.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>Mx(e,(t=>$h.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Xx},{key:"Ctrl-h",run:Qx},{key:"Ctrl-k",run:e$},{key:"Ctrl-Alt-h",run:Zx},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Wu.of(["",""])},range:$h.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:rh(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:rh(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:$h.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:_x}],h$=[{key:"ArrowLeft",run:mx,shift:Tx,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>vx(e,!px(e)),shift:e=>Nx(e,!px(e))},{mac:"Cmd-ArrowLeft",run:Ax,shift:Fx},{key:"ArrowRight",run:gx,shift:jx,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>vx(e,px(e)),shift:e=>Nx(e,px(e))},{mac:"Cmd-ArrowRight",run:Ex,shift:Vx},{key:"ArrowUp",run:xx,shift:Rx,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qx,shift:Wx},{mac:"Ctrl-ArrowUp",run:Cx,shift:zx},{key:"ArrowDown",run:$x,shift:Dx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Hx,shift:Ux},{mac:"Ctrl-ArrowDown",run:_x,shift:Bx},{key:"PageUp",run:Cx,shift:zx},{key:"PageDown",run:_x,shift:Bx},{key:"Home",run:Ax,shift:Fx,preventDefault:!0},{key:"Mod-Home",run:qx,shift:Wx},{key:"End",run:Ex,shift:Vx,preventDefault:!0},{key:"Mod-End",run:Hx,shift:Ux},{key:"Enter",run:i$},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Qx,shift:Qx},{key:"Delete",run:Xx},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Zx},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Yx(e,!0)},{mac:"Mod-Backspace",run:e=>Jx(e,(t=>{let n=e.lineBlockAt(t).from;return Kx(e,t>n?n:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:e$}].concat(u$.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),d$=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>hx(e,(t=>wx(e.state,t,!px(e)))),shift:e=>Mx(e,(t=>wx(e.state,t,!px(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>hx(e,(t=>wx(e.state,t,px(e)))),shift:e=>Mx(e,(t=>wx(e.state,t,px(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>n$(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>r$(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>n$(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>r$(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=$h.create([n.main]):n.main.empty||(r=$h.create([$h.cursor(n.main.head)])),!!r&&(t(ux(e,r)),!0)}},{key:"Mod-Enter",run:o$},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let n=t$(e).map((({from:t,to:n})=>$h.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:$h.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let n=cx(e.selection,(t=>{var n;let r=dw(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(n=r.parent)||void 0===n?void 0:n.parent);)r=r.parent;return $h.range(r.to,r.from)}));return t(ux(e,n)),!0},preventDefault:!0},{key:"Mod-[",run:c$},{key:"Mod-]",run:l$},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Ew(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=a$(e,((t,i,o)=>{let s=Ow(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=_w(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(t$(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=cx(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,n){let r=!1,i=cx(e.selection,(t=>{let i=kb(e,t.head,-1)||kb(e,t.head,1)||t.head>0&&kb(e,t.head-1,1)||t.head<e.doc.length&&kb(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?$h.range(t.anchor,o):$h.cursor(o)}));return!!r&&(t(ux(e,i)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=Ib(e.state);return t.line?Tb(e):!!t.block&&Nb(e)}},{key:"Alt-A",run:jb}].concat(h$),f$={key:"Tab",run:l$,shift:c$};function p$(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)m$(e,arguments[t]);return e}function m$(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)m$(e,t[n])}}const g$="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class v${constructor(e,t,n=0,r=e.length,i){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(g$(e)):g$,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return lh(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ch(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=uh(e);let r=this.normalize(t);for(let e=0,i=n;;e++){let o=r.charCodeAt(e),s=this.match(o,i);if(s)return this.value=s,this;if(e==r.length-1)break;i==n&&e<t.length&&t.charCodeAt(e)==o&&i++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n}}"undefined"!=typeof Symbol&&(v$.prototype[Symbol.iterator]=function(){return this});const y$={from:-1,to:-1,match:/.*/.exec("")},w$="gm"+(null==/x/.unicode?"":"u");class b${constructor(e,t,n,r=0,i=e.length){if(this.to=i,this.curLine="",this.done=!1,this.value=y$,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new k$(e,t,n,r,i);this.re=new RegExp(t,w$+((null==n?void 0:n.ignoreCase)?"i":"")),this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=r,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=r+(n==r?1:0),n==this.curLine.length&&this.nextLine(),n<r||n>this.value.to)return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const x$=new WeakMap;class $${constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=x$.get(e);if(!r||r.from>=n||r.to<=t){let r=new $$(t,e.sliceString(t,n));return x$.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),x$.set(e,new $$(o,i)),new $$(t,i.slice(t-o,n-o))}}class k${constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=y$,this.matchPos=r,this.re=new RegExp(t,w$+((null==n?void 0:n.ignoreCase)?"i":"")),this.flat=$$.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let e=this.flat.from+t.index,n=e+t[0].length;return this.value={from:e,to:n,match:t},this.matchPos=n+(e==n?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=$$.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function S$(e){let t=p$("input",{class:"cm-textfield",name:"line"});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u)));e.dispatch({effects:C$.of(!1),selection:$h.cursor(h.from+Math.max(0,Math.min(c,h.length))),scrollIntoView:!0}),e.focus()}return{dom:p$("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:C$.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},p$("label",e.state.phrase("Go to line"),": ",t)," ",p$("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(b$.prototype[Symbol.iterator]=k$.prototype[Symbol.iterator]=function(){return this});const C$=td.define(),_$=Th.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(C$)&&(e=n.value);return e},provide:e=>Nv.from(e,(e=>e?S$:null))}),O$=bg.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),E$={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},A$=Ch.define({combine:e=>pd(e,E$,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function M$(e){let t=[I$,N$];return e&&t.push(A$.of(e)),t}const P$=Gf.mark({class:"cm-selectionMatch"}),T$=Gf.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function j$(e,t,n,r){return!(0!=n&&e(t.sliceDoc(n-1,n))==cd.Word||r!=t.doc.length&&e(t.sliceDoc(r,r+1))==cd.Word)}const N$=wp.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(A$),{state:n}=e,r=n.selection;if(r.ranges.length>1)return Gf.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return Gf.none;let e=n.wordAt(o.head);if(!e)return Gf.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return Gf.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!j$(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==cd.Word&&e(t.sliceDoc(r-1,r))==cd.Word}(s,n,o.from,o.to))return Gf.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return Gf.none}let a=[];for(let r of e.visibleRanges){let e=new v$(n.doc,i,r.from,r.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||j$(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(T$.range(r,i)):(r>=o.to||i<=o.from)&&a.push(P$.range(r,i)),a.length>t.maxMatches))return Gf.none}}return Gf.set(a)}},{decorations:e=>e.decorations}),I$=bg.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const R$=Ch.define({combine(e){var t;return{top:e.reduce(((e,t)=>null!=e?e:t.top),void 0)||!1,caseSensitive:e.reduce(((e,t)=>null!=e?e:t.caseSensitive),void 0)||!1,createPanel:(null===(t=e.find((e=>e.createPanel)))||void 0===t?void 0:t.createPanel)||(e=>new lk(e))}}});function D$(e){return e?[R$.of(e),fk]:fk}class L${constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,w$),!0}catch(e){return!1}}(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new q$(this):new V$(this)}getCursor(e,t=0,n=e.length){return this.regexp?F$(this,e,t,n):B$(this,e,t,n)}}class z${constructor(e){this.spec=e}}function B$(e,t,n,r){return new v$(t,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase())}class V$ extends z${constructor(e){super(e)}nextMatch(e,t,n){let r=B$(this.spec,e,n,e.length).nextOverlapping();return r.done&&(r=B$(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=B$(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let n=B$(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=B$(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function F$(e,t,n,r){return new b$(t,e.search,e.caseSensitive?void 0:{ignoreCase:!0},n,r)}class q$ extends z${nextMatch(e,t,n){let r=F$(this.spec,e,n,e.length).next();return r.done&&(r=F$(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=F$(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=F$(this.spec,e,0,e.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=F$(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const H$=td.define(),W$=td.define(),U$=Th.define({create:e=>new J$(ik(e).create(),null),update(e,t){for(let n of t.effects)n.is(H$)?e=new J$(n.value.create(),e.panel):n.is(W$)&&(e=new J$(e.query,n.value?rk:null));return e},provide:e=>Nv.from(e,(e=>e.panel))});class J${constructor(e,t){this.query=e,this.panel=t}}const K$=Gf.mark({class:"cm-searchMatch"}),G$=Gf.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Q$=wp.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(U$))}update(e){let t=e.state.field(U$);(t!=e.startState.field(U$)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return Gf.none;let{view:n}=this,r=new bd;for(let t=0,i=n.visibleRanges,o=i.length;t<o;t++){let{from:s,to:a}=i[t];for(;t<o-1&&a>i[t+1].from-500;)a=i[++t].to;e.highlight(n.state.doc,s,a,((e,t)=>{let i=n.state.selection.ranges.some((n=>n.from==e&&n.to==t));r.add(e,t,i?G$:K$)}))}return r.finish()}},{decorations:e=>e.decorations});function X$(e){return t=>{let n=t.state.field(U$,!1);return n&&n.query.spec.valid?e(t,n):ok(t)}}const Y$=X$(((e,{query:t})=>{let{from:n,to:r}=e.state.selection.main,i=t.nextMatch(e.state.doc,n,r);return!(!i||i.from==n&&i.to==r)&&(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:hk(e,i),userEvent:"select.search"}),!0)})),Z$=X$(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main,o=t.prevMatch(n.doc,r,i);return!!o&&(e.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:hk(e,o),userEvent:"select.search"}),!0)})),ek=X$(((e,{query:t})=>{let n=t.matchAll(e.state.doc,1e3);return!(!n||!n.length)&&(e.dispatch({selection:$h.create(n.map((e=>$h.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),tk=X$(((e,{query:t})=>{let{state:n}=e,{from:r,to:i}=n.selection.main;if(n.readOnly)return!1;let o=t.nextMatch(n.doc,r,r);if(!o)return!1;let s,a,l=[],c=[];if(o.from==r&&o.to==i&&(a=n.toText(t.getReplacement(o)),l.push({from:o.from,to:o.to,insert:a}),o=t.nextMatch(n.doc,o.from,o.to),c.push(bg.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(r).number)+"."))),o){let t=0==l.length||l[0].from>=o.to?0:o.to-o.from-a.length;s={anchor:o.from-t,head:o.to-t},c.push(hk(e,o))}return e.dispatch({changes:l,selection:s,scrollIntoView:!!s,effects:c,userEvent:"input.replace"}),!0})),nk=X$(((e,{query:t})=>{if(e.state.readOnly)return!1;let n=t.matchAll(e.state.doc,1e9).map((e=>{let{from:n,to:r}=e;return{from:n,to:r,insert:t.getReplacement(e)}}));if(!n.length)return!1;let r=e.state.phrase("replaced $ matches",n.length)+".";return e.dispatch({changes:n,effects:bg.announce.of(r),userEvent:"input.replace.all"}),!0}));function rk(e){return e.state.facet(R$).createPanel(e)}function ik(e,t){var n;let r=e.selection.main,i=r.empty||r.to>r.from+100?"":e.sliceDoc(r.from,r.to),o=null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:e.facet(R$).caseSensitive;return t&&!i?t:new L$({search:i.replace(/\n/g,"\\n"),caseSensitive:o})}const ok=e=>{let t=e.state.field(U$,!1);if(t&&t.panel){let n=Mv(e,rk);if(!n)return!1;let r=n.dom.querySelector("[main-field]");if(r&&r!=e.root.activeElement){let n=ik(e.state,t.query.spec);n.valid&&e.dispatch({effects:H$.of(n)}),r.focus(),r.select()}}else e.dispatch({effects:[W$.of(!0),t?H$.of(ik(e.state,t.query.spec)):td.appendConfig.of(fk)]});return!0},sk=e=>{let t=e.state.field(U$,!1);if(!t||!t.panel)return!1;let n=Mv(e,rk);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:W$.of(!1)}),!0},ak=[{key:"Mod-f",run:ok,scope:"editor search-panel"},{key:"F3",run:Y$,shift:Z$,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Y$,shift:Z$,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:sk,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let n=e.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:r,to:i}=n.main,o=[],s=0;for(let t=new v$(e.doc,e.sliceDoc(r,i));!t.next().done;){if(o.length>1e3)return!1;t.value.from==r&&(s=o.length),o.push($h.range(t.value.from,t.value.to))}return t(e.update({selection:$h.create(o,s),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:e=>{let t=Mv(e,S$);if(!t){let n=[C$.of(!0)];null==e.state.field(_$,!1)&&n.push(td.appendConfig.of([_$,O$])),e.dispatch({effects:n}),t=Mv(e,S$)}return t&&t.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:n}=e.selection;if(n.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:n}=e,r=$h.create(n.ranges.map((t=>e.wordAt(t.head)||$h.cursor(t.head))),n.mainIndex);return!r.eq(n)&&(t(e.update({selection:r})),!0)})({state:e,dispatch:t});let r=e.sliceDoc(n[0].from,n[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=r)))return!1;let i=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new v$(e.doc,t,r[r.length-1].to);;){if(i.next(),!i.done){if(n&&r.some((e=>e.from==i.value.from)))continue;if(o){let t=e.wordAt(i.value.from);if(!t||t.from!=i.value.from||t.to!=i.value.to)continue}return i.value}if(n)return null;i=new v$(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),n=!0}}(e,r);return!!i&&(t(e.update({selection:e.selection.addRange($h.range(i.from,i.to),!1),effects:bg.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class lk{constructor(e){this.view=e;let t=this.query=e.state.field(U$).query.spec;function n(e,t,n){return p$("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=p$("input",{value:t.search,placeholder:ck(e,"Find"),"aria-label":ck(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=p$("input",{value:t.replace,placeholder:ck(e,"Replace"),"aria-label":ck(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=p$("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=p$("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=p$("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>Y$(e)),[ck(e,"next")]),n("prev",(()=>Z$(e)),[ck(e,"previous")]),n("select",(()=>ek(e)),[ck(e,"all")]),p$("label",null,[this.caseField,ck(e,"match case")]),p$("label",null,[this.reField,ck(e,"regexp")]),...e.state.readOnly?[]:[p$("br"),this.replaceField,n("replace",(()=>tk(e)),[ck(e,"replace")]),n("replaceAll",(()=>nk(e)),[ck(e,"replace all")]),p$("button",{name:"close",onclick:()=>sk(e),"aria-label":ck(e,"close"),type:"button"},["×"])]])}commit(){let e=new L$({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:H$.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",Tg(Mg(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Z$:Y$)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),tk(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(H$)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(R$).top}}function ck(e,t){return e.state.phrase(t)}const uk=/[\s\.,:;?!]/;function hk(e,{from:t,to:n}){let r=e.state.doc.lineAt(t),i=e.state.doc.lineAt(n).to,o=Math.max(r.from,t-30),s=Math.min(i,n+30),a=e.state.sliceDoc(o,s);if(o!=r.from)for(let e=0;e<30;e++)if(!uk.test(a[e+1])&&uk.test(a[e])){a=a.slice(e);break}if(s!=i)for(let e=a.length-1;e>a.length-30;e--)if(!uk.test(a[e-1])&&uk.test(a[e])){a=a.slice(0,e);break}return bg.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${r.number}.`)}const dk=bg.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),fk=[U$,Lh.lowest(Q$),dk];class pk{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=dw(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(wk(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function mk(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function gk(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:r}of e){t[r[0]]=!0;for(let e=1;e<r.length;e++)n[r[e]]=!0}let r=mk(t)+mk(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}class vk{constructor(e,t,n){this.completion=e,this.source=t,this.match=n}}function yk(e){return e.selection.main.head}function wk(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}function bk(e,t){const n=t.completion.apply||t.completion.label;let r=t.source;"string"==typeof n?e.dispatch(function(e,t,n,r){return Object.assign(Object.assign({},e.changeByRange((i=>{if(i==e.selection.main)return{changes:{from:n,to:r,insert:t},range:$h.cursor(n+t.length)};let o=r-n;return!i.empty||o&&e.sliceDoc(i.from-o,i.from)!=e.sliceDoc(n,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:t},range:$h.cursor(i.from-o+t.length)}}))),{userEvent:"input.complete"})}(e.state,n,r.from,r.to)):n(e,t.completion,r.from,r.to)}const xk=new WeakMap;function $k(e){if(!Array.isArray(e))return e;let t=xk.get(e);return t||xk.set(e,t=gk(e)),t}class kk{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let n=lh(e,t),r=uh(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(lh(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=lh(e,0);return r==t[0]?[0,0,uh(r)]:r==n[0]?[-200,0,uh(r)]:null}let s=e.indexOf(this.pattern);if(0==s)return[0,0,this.pattern.length];let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=lh(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=uh(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,f=-1,p=-1,m=/[a-z]/.test(e),g=!0;for(let r=0,l=Math.min(e.length,200),v=0;r<l&&u<a;){let l=lh(e,r);s<0&&(c<a&&l==t[c]&&(i[c++]=r),d<a&&(l==t[d]||l==n[d]?(0==d&&(f=r),p=r+1,d++):d=0));let y,w=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=ch(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!r||1==w&&m||0==v&&0!=w)&&(t[u]==l||n[u]==l&&(h=!0)?o[u++]=r:o.length&&(g=!1)),v=w,r+=uh(l)}return u==a&&0==o[0]&&g?this.result((h?-200:0)-100,o,e):d==a&&0==f?[-200-e.length,0,p]:s>-1?[-700-e.length,s,s+this.pattern.length]:d==a?[-900-e.length,f,p]:u==a?this.result((h?-200:0)-100-700+(g?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[e-n.length],i=1;for(let e of t){let t=e+(this.astral?uh(lh(n,e)):1);i>1&&r[i-1]==e?r[i-1]=t:(r[i++]=e,r[i++]=t)}return r}}const Sk=Ch.define({combine:e=>pd(e,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>n=>function(e,t){return e?t?e+" "+t:e:t}(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function Ck(e,t,n){if(e<=n)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class _k{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let n=e.state.field(t),{options:r,selected:i}=n.open,o=e.state.facet(Sk);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n){let r=document.createElement("span");r.className="cm-completionLabel";let{label:i}=e,o=0;for(let e=1;e<n.length;){let t=n[e++],s=n[e++];t>o&&r.appendChild(document.createTextNode(i.slice(o,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(i.slice(t,s))),a.className="cm-completionMatchedText",o=s}return o<i.length&&r.appendChild(document.createTextNode(i.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.range=Ck(r.length,i,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let n,i=t.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(n=/-(\d+)$/.exec(i.id))&&+n[1]<r.length)return bk(e,r[+n[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,n.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ck(t.options.length,t.selected,this.view.state.facet(Sk).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"==typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>mp(this.view.state,e,"completion info"))):this.addInfoPane(i)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<n.top?e.scrollTop-=n.top-r.top:r.bottom>n.bottom&&(e.scrollTop+=r.bottom-n.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let i=Math.max(0,Math.min(r.top,innerHeight-n.height))-t.top,o=this.view.textDirection==Ap.RTL,s=t.left,a=innerWidth-t.right;return o&&s<Math.min(n.width,a)?o=!1:!o&&a<Math.min(n.width,s)&&(o=!0),{top:i,left:o}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let i=n.from;i<n.to;i++){let{completion:n,match:o}=e[i];const s=r.appendChild(document.createElement("li"));s.id=t+"-"+i,s.setAttribute("role","option");let a=this.optionClass(n);a&&(s.className=a);for(let e of this.optionContent){let t=e(n,this.view.state,o);t&&s.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function Ok(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class Ek{constructor(e,t,n,r,i){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ek(this.options,Pk(t,e),this.tooltip,this.timestamp,e)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=0;for(let i of e)if(i.hasResult())if(!1===i.result.filter){let e=i.result.getMatch;for(let t of i.result.options){let o=[1e9-r++];if(e)for(let n of e(t))o.push(n);n.push(new vk(t,i,o))}}else{let e,r=new kk(t.sliceDoc(i.from,i.to));for(let t of i.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),n.push(new vk(t,i,e)))}let i=[],o=null;for(let e of n.sort(jk))!o||o.label!=e.completion.label||o.detail!=e.completion.detail||null!=o.type&&null!=e.completion.type&&o.type!=e.completion.type||o.apply!=e.completion.apply?i.push(e):Ok(e.completion)>Ok(o)&&(i[i.length-1]=e),o=e.completion;return i}(e,t);if(!o.length)return null;let s=0;if(r&&r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new Ek(o,Pk(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=Vk,e=>new _k(e,a)),above:i.aboveCursor},r?r.timestamp:Date.now(),s);var a}map(e){return new Ek(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class Ak{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new Ak(Tk,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Sk),r=(n.override||t.languageDataAt("autocomplete",yk(t)).map($k)).map((t=>(this.active.find((e=>e.source==t))||new Ik(t,this.active.some((e=>0!=e.state))?1:0)).update(e,n)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?Ek.build(r,t,this.id,this.open,n):this.open&&e.docChanged?this.open.map(e.changes):this.open;!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new Ik(e.source,0):e)));for(let t of e.effects)t.is(Bk)&&(i=i&&i.setSelected(t.value,this.id));return r==this.active&&i==this.open?this:new Ak(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Mk}}const Mk={"aria-autocomplete":"list"};function Pk(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}const Tk=[];function jk(e,t){let n=t.match[0]-e.match[0];return n||e.completion.label.localeCompare(t.completion.label)}function Nk(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class Ik{constructor(e,t,n=-1){this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=Nk(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new Ik(r.source,0));for(let t of e.effects)if(t.is(Dk))r=new Ik(r.source,1,t.value?yk(e.state):-1);else if(t.is(Lk))r=new Ik(r.source,0);else if(t.is(zk))for(let e of t.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new Ik(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(yk(e.startState))?new Ik(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Ik(this.source,this.state,e.mapPos(this.explicitPos))}}class Rk extends Ik{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=yk(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&yk(e.startState)==this.from)return new Ik(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):wk(e,!0).test(i)}(this.result.validFor,e.state,i,o)?new Rk(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new pk(e.state,s,l>=0)))?new Rk(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:yk(e.state)):new Ik(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Ik(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Rk(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const Dk=td.define(),Lk=td.define(),zk=td.define({map:(e,t)=>e.map((e=>e.map(t)))}),Bk=td.define(),Vk=Th.define({create:()=>Ak.start(),update:(e,t)=>e.update(t),provide:e=>[$v.from(e,(e=>e.tooltip)),bg.contentAttributes.from(e,(e=>e.attrs))]});function Fk(e,t="option"){return n=>{let r=n.state.field(Vk,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let i,o=1;"page"==t&&(i=function(e,t){let n=e.plugin(wv);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let s=r.open.selected+o*(e?1:-1),{length:a}=r.open.options;return s<0?s="page"==t?0:a-1:s>=a&&(s="page"==t?a-1:0),n.dispatch({effects:Bk.of(s)}),!0}}class qk{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Hk=wp.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Vk).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Vk);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Vk)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!Nk(e)));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(n||r.updates.length+e.transactions.length>50&&Date.now()-r.time>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){mp(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==Nk(t)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Vk);for(let e of t.active)1!=e.state||this.running.some((t=>t.active.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,n=yk(t),r=new pk(t,n,e.explicitPos==n),i=new qk(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:Lk.of(null)}),mp(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(Sk);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new Rk(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:yk(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(Vk).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new Ik(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:zk.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(Vk,!1);e&&e.tooltip&&this.view.state.facet(Sk).closeOnBlur&&this.view.dispatch({effects:Lk.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:Dk.of(!1)})),20),this.composing=0}}}),Wk=bg.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Uk={brackets:["(","[","{","'",'"'],before:")]}:;>"},Jk=td.define({map(e,t){let n=t.mapPos(e,-1,dh.TrackAfter);return null==n?void 0:n}}),Kk=td.define({map:(e,t)=>t.mapPos(e)}),Gk=new class extends md{};Gk.startSide=1,Gk.endSide=-1;const Qk=Th.define({create:()=>wd.empty,update(e,t){if(t.selection){let n=t.state.doc.lineAt(t.selection.main.head).from,r=t.startState.doc.lineAt(t.startState.selection.main.head).from;n!=t.changes.mapPos(r,-1)&&(e=wd.empty)}e=e.map(t.changes);for(let n of t.effects)n.is(Jk)?e=e.update({add:[Gk.range(n.value,n.value+1)]}):n.is(Kk)&&(e=e.update({filter:e=>e!=n.value}));return e}});function Xk(){return[nS,Qk]}const Yk="()[]{}<>";function Zk(e){for(let t=0;t<Yk.length;t+=2)if(Yk.charCodeAt(t)==e)return Yk.charAt(t+1);return ch(e<128?e:e+1)}function eS(e,t){return e.languageDataAt("closeBrackets",t)[0]||Uk}const tS="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),nS=bg.inputHandler.of(((e,t,n,r)=>{if((tS?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==uh(lh(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=eS(e,e.selection.main.head),r=n.brackets||Uk.brackets;for(let i of r){let o=Zk(lh(i,0));if(t==i)return o==i?lS(e,i,r.indexOf(i+i+i)>-1):sS(e,i,o,n.before||Uk.before);if(t==o&&iS(e,e.selection.main.from))return aS(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),rS=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=eS(e,e.selection.main.head).brackets||Uk.brackets,r=null,i=e.changeByRange((t=>{if(t.empty){let r=function(e,t){let n=e.sliceString(t-2,t);return uh(lh(n,0))==n.length?n:n.slice(1)}(e.doc,t.head);for(let i of n)if(i==r&&oS(e.doc,t.head)==Zk(lh(i,0)))return{changes:{from:t.head-i.length,to:t.head+i.length},range:$h.cursor(t.head-i.length),userEvent:"delete.backward"}}return{range:r=t}}));return r||t(e.update(i,{scrollIntoView:!0})),!r}}];function iS(e,t){let n=!1;return e.field(Qk).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function oS(e,t){let n=e.sliceString(t,t+2);return n.slice(0,uh(lh(n,0)))}function sS(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:Jk.of(o.to+t.length),range:$h.range(o.anchor+t.length,o.head+t.length)};let s=oS(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:Jk.of(o.head+t.length),range:$h.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function aS(e,t,n){let r=null,i=e.selection.ranges.map((t=>t.empty&&oS(e.doc,t.head)==n?$h.cursor(t.head+n.length):r=t));return r?null:e.update({selection:$h.create(i,e.selection.mainIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>Kk.of(e)))})}function lS(e,t,n){let r=null,i=e.changeByRange((i=>{if(!i.empty)return{changes:[{insert:t,from:i.from},{insert:t,from:i.to}],effects:Jk.of(i.to+t.length),range:$h.range(i.anchor+t.length,i.head+t.length)};let o=i.head,s=oS(e.doc,o);if(s==t){if(cS(e,o))return{changes:{insert:t+t,from:o},effects:Jk.of(o+t.length),range:$h.cursor(o+t.length)};if(iS(e,o)){let r=n&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:$h.cursor(o+t.length*(r?3:1)),effects:Kk.of(o)}}}else{if(n&&e.sliceDoc(o-2*t.length,o)==t+t&&cS(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:Jk.of(o+t.length),range:$h.cursor(o+t.length)};if(e.charCategorizer(o)(s)!=cd.Word){let n=e.sliceDoc(o-1,o);if(n!=t&&e.charCategorizer(o)(n)!=cd.Word&&!function(e,t,n){let r=dw(e).resolveInner(t,-1);for(let i=0;i<5;i++){if(e.sliceDoc(r.from,r.from+n.length)==n)return!0;let i=r.to==t&&r.parent;if(!i)break;r=i}return!1}(e,o,t))return{changes:{insert:t+t,from:o},effects:Jk.of(o+t.length),range:$h.cursor(o+t.length)}}}return{range:r=i}}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function cS(e,t){let n=dw(e).resolveInner(t+1);return n.parent&&n.from==t}function uS(e={}){return[Vk,Sk.of(e),Hk,dS,Wk]}const hS=[{key:"Ctrl-Space",run:e=>!!e.state.field(Vk,!1)&&(e.dispatch({effects:Dk.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Vk,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:Lk.of(null)}),!0)}},{key:"ArrowDown",run:Fk(!0)},{key:"ArrowUp",run:Fk(!1)},{key:"PageDown",run:Fk(!0,"page")},{key:"PageUp",run:Fk(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Vk,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(bk(e,t.open.options[t.open.selected]),!0)}}],dS=Lh.highest(Eg.computeN([Sk],(e=>e.facet(Sk).defaultKeymap?[hS]:[])));class fS{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class pS{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(ES).markerFilter;i&&(r=i(r));let o=Gf.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?Gf.widget({widget:new TS(e),diagnostic:e}).range(e.from):Gf.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new pS(o,t,mS(o))}}function mS(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new fS(e,n,i.diagnostic),!1})),r}function gS(e,t){return!(!e.effects.some((e=>e.is(yS)))&&!e.changes.touchesRange(t.pos))}function vS(e,t){return e.field(xS,!1)?t:t.concat(td.appendConfig.of([xS,bg.decorations.compute([xS],(e=>{let{selected:t,panel:n}=e.field(xS);return t&&n&&t.from!=t.to?Gf.set([$S.range(t.from,t.to)]):Gf.none})),Ov(kS,{hideOn:gS}),DS]))}const yS=td.define(),wS=td.define(),bS=td.define(),xS=Th.define({create:()=>new pS(Gf.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=mS(n,e.selected.diagnostic,i)||mS(n,null,i)}e=new pS(n,e.panel,r)}for(let n of t.effects)n.is(yS)?e=pS.init(n.value,e.panel,t.state):n.is(wS)?e=new pS(e.diagnostics,n.value?NS.open:null,e.selected):n.is(bS)&&(e=new pS(e.diagnostics,e.panel,n.value));return e},provide:e=>[Nv.from(e,(e=>e.panel)),bg.decorations.from(e,(e=>e.diagnostics))]}),$S=Gf.mark({class:"cm-lintRange cm-lintRange-active"});function kS(e,t,n){let{diagnostics:r}=e.state.field(xS),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(ES).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:SS(e,i)})}:null}function SS(e,t){return p$("ul",{class:"cm-tooltip-lint"},t.map((t=>PS(e,t,!1))))}const CS=e=>{let t=e.state.field(xS,!1);return!(!t||!t.panel)&&(e.dispatch({effects:wS.of(!1)}),!0)},_S=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(xS,!1);t&&t.panel||e.dispatch({effects:vS(e.state,[wS.of(!0)])});let n=Mv(e,NS.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:e=>{let t=e.state.field(xS,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],OS=wp.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(ES);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(ES);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let n=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:vS(e,[yS.of(t)])}}(this.view.state,n))}),(e=>{mp(this.view.state,e)}))}}update(e){let t=e.state.facet(ES);(e.docChanged||t!=e.startState.facet(ES))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),ES=Ch.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},pd(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:OS});function AS(e,t={}){return ES.of({source:e,config:t})}function MS(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function PS(e,t,n){var r;let i=n?MS(t.actions):[];return p$("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},p$("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=r=>{r.preventDefault();let i=mS(e.state.field(xS).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:s}=n,a=i[r]?s.indexOf(i[r]):-1,l=a<0?s:[s.slice(0,a),p$("u",s.slice(a,a+1)),s.slice(a+1)];return p$("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${s}${a<0?"":` (access key "${i[r]})"`}.`},l)})),t.source&&p$("div",{class:"cm-diagnosticSource"},t.source))}class TS extends Jf{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return p$("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class jS{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=PS(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class NS{constructor(e){this.view=e,this.items=[];this.list=p$("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)CS(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=MS(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=mS(this.view.state.field(xS).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=p$("div",{class:"cm-panel-lint"},this.list,p$("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>CS(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(xS).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(xS),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let e=n;e<this.items.length;e++)if(this.items[e].diagnostic==s.diagnostic){l=e;break}l<0?(a=new jS(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new jS(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=mS(this.view.state.field(xS).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:bS.of(t)})}static open(e){return new NS(e)}}function IS(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function RS(e){return IS(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const DS=bg.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:RS("#d11")},".cm-lintRange-warning":{backgroundImage:RS("orange")},".cm-lintRange-info":{backgroundImage:RS("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class LS extends Iv{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce(((e,t)=>{let n=t.severity;return"error"==n||"warning"==n&&"info"==e?n:e}),"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let n=this.diagnostics,r=e.state.facet(WS).tooltipFilter;return r&&(n=r(n)),n.length&&(t.onmouseover=()=>function(e,t,n){function r(){let r=e.elementAtHeight(t.getBoundingClientRect().top+5-e.documentTop);e.coordsAtPos(r.from)&&e.dispatch({effects:FS.of({pos:r.from,above:!1,create:()=>({dom:SS(e,n),getCoords:()=>t.getBoundingClientRect()})})}),t.onmouseout=t.onmousemove=null,function(e,t){let n=r=>{let i=t.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let e=r.target;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",n),e.state.field(qS)&&e.dispatch({effects:FS.of(null)})}};window.addEventListener("mousemove",n)}(e,t)}let{hoverTime:i}=e.state.facet(WS),o=setTimeout(r,i);t.onmouseout=()=>{clearTimeout(o),t.onmouseout=t.onmousemove=null},t.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}(e,t,n)),t}}function zS(e,t){let n=Object.create(null);for(let r of t){let t=e.lineAt(r.from);(n[t.from]||(n[t.from]=[])).push(r)}let r=[];for(let e in n)r.push(new LS(n[e]).range(+e));return wd.of(r,!0)}const BS=zv({class:"cm-gutter-lint",markers:e=>e.state.field(VS)}),VS=Th.define({create:()=>wd.empty,update(e,t){e=e.map(t.changes);let n=t.state.facet(WS).markerFilter;for(let r of t.effects)if(r.is(yS)){let i=r.value;n&&(i=n(i||[])),e=zS(t.state.doc,i.slice(0))}return e}}),FS=td.define(),qS=Th.define({create:()=>null,update:(e,t)=>(e&&t.docChanged&&(e=gS(t,e)?null:Object.assign(Object.assign({},e),{pos:t.changes.mapPos(e.pos)})),t.effects.reduce(((e,t)=>t.is(FS)?t.value:e),e)),provide:e=>$v.from(e)}),HS=bg.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:IS('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:IS('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:IS('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),WS=Ch.define({combine:e=>pd(e,{hoverTime:300,markerFilter:null,tooltipFilter:null})});function US(e={}){return[WS.of(e),VS,BS,HS,qS]}const JS=[Zv(),ry(),tv(),qb(),rb(),Ig(),Jg(),fd.allowMultipleSelections.of(!0),Rw(),cb(db,{fallback:!0}),xb(),Xk(),uS(),hv(),pv(),ov(),M$(),Eg.of([...rS,...d$,...ak,...lx,...Qw,...hS,..._S])];class KS{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new KS(e,[],t,n,n,0,[],0,r?new GS(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,n=65535&e,{parser:r}=this.p,i=r.dynamicPrecedence(n);if(i&&(this.score+=i),0==t)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,4,!0),void this.reduceContext(n,this.reducePos);let o=this.stack.length-3*(t-1)-(262144&e?6:0),s=this.stack[o-2],a=this.stack[o-1],l=this.bufferBase+this.buffer.length-a;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,s,e,l+4,!0)}if(262144&e)this.state=this.stack[o];else{let e=this.stack[o-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(n,s)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4);this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(n>this.pos||t<=o.maxNode)&&(this.pos=n,o.stateFlag(i,1)||(this.reducePos=n)),this.pushState(i,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,n,4)}else this.pos=n,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,n,4)}apply(e,t,n){65536&e?this.reduce(e):this.shift(e,t,n)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new KS(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new XS(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&n))return!0;if(0==n)return!1;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let e=0;e<t.length&&n.length<4;e+=2){let r=t[e+1];if(r==this.state)continue;let i=this.split();i.pushState(r,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[e],this.pos),i.score-=200,n.push(i)}return n}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let n=e>>19,r=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new GS(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class GS{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var QS;!function(e){e[e.Insert=200]="Insert",e[e.Delete=190]="Delete",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(QS||(QS={}));class XS{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class YS{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new YS(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new YS(this.stack,this.pos,this.index)}}class ZS{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const eC=new ZS;class tC{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=eC,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;for(;i<n.from;){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}for(;t<0?i>n.to:i>=n.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=eC,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class nC{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,n,r){let i=0,o=1<<r,{parser:s}=n.p,{dialect:a}=s;e:for(;0!=(o&e[i]);){let n=e[i+1];for(let r=i+3;r<n;r+=2)if((e[r+1]&o)>0){let n=e[r];if(a.allows(n)&&(-1==t.token.value||t.token.value==n||s.overrides(n,t.token.value))){t.acceptToken(n);break}}for(let r=t.next,o=0,s=e[i+2];o<s;){let a=o+s>>1,l=n+a+(a<<1),c=e[l],u=e[l+1];if(r<c)s=a;else{if(!(r>=u)){i=e[l+2],t.advance();continue e}o=a+1}}break}}(this.data,e,t,this.id)}}function rC(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}nC.prototype.contextual=nC.prototype.fallback=nC.prototype.extend=!1;const iC="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let oC=null;var sC,aC;function lC(e,t,n){let r=e.cursor(fy.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}!function(e){e[e.Margin=25]="Margin"}(sC||(sC={}));class cC{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?lC(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?lC(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof py){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(ay.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class uC{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new ZS))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let r=0;r<i.length;r++){if(0==(1<<r&o))continue;let l=i[r],c=this.tokens[r];if((!n||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,l,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let r=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(n=c,t>r))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new ZS,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ZS,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){if(t.token(this.stream.reset(n.pos,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=Math.min(n.p.stream.end,n.pos+1)}putAction(e,t,n,r){for(let t=0;t<r;t+=3)if(this.actions[t]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let e=0;e<2;e++)for(let a=o.stateSlot(i,e?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==r&&2==s[a+1]&&(r=this.putAction(mC(s,a+2),t,n,r));break}a=mC(s,a+2)}s[a]==t&&(r=this.putAction(mC(s,a+1),t,n,r))}return r}}!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=500]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit",e[e.CutDepth=15e3]="CutDepth",e[e.CutTo=9e3]="CutTo"}(aC||(aC={}));class hC{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new tC(t,r),this.tokens=new uC(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[KS.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new cC(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&function(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw iC&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e)for(i.sort(((e,t)=>t.score-e.score));i.length>e;)i.pop();i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1)e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}this.minStackPos=i[0].pos;for(let e=1;e<i.length;e++)i[e].pos<this.minStackPos&&(this.minStackPos=i[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=iC?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(ay.contextHash)||0)==n))return e.useNode(s,r),iC&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof py)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof py&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),iC&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,d=h?e:e.split();if(d.apply(l,c,u),iC&&console.log(o+this.stackID(d)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return dC(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=iC?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),iC&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10;e++){if(iC&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;iC&&(h=this.stackID(u)+" -> ")}for(let e of s.recoverByInsert(a))iC&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),iC&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),dC(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),py.build({buffer:YS.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(oC||(oC=new WeakMap)).get(e);return t||oC.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function dC(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class fC{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}class pC extends Py{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let n=0;n<e.repeatNodeCount;n++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let e=0;e<t.length;e++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=ay[e]);for(let n=1;n<t.length;){let r=t[n++];if(r>=0)i(r,e,t[n++]);else{let o=t[n+-r];for(let s=-r;s>0;s--)i(t[n++],e,o);n++}}}this.nodeSet=new uy(t.map(((t,i)=>cy.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=iy;let o=rC(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=rC(e.states,Uint32Array),this.data=rC(e.stateData),this.goto=rC(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new nC(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new hC(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return mC(n,o+2);break}i=n[o=mC(n,o+2)]}if(i==t||0==i)return mC(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])return!1;n=mC(this.data,n+2)}if(t==mC(this.data,n+1))return!0}}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=mC(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}overrides(e,t){let n=gC(this.data,this.tokenPrecTable,t);return n<0||gC(this.data,this.tokenPrecTable,e)<n}configure(e){let t=Object.assign(Object.create(pC.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let r of e.split(" ")){let e=t.indexOf(r);e>=0&&(n[e]=!0)}let r=null;for(let e=0;e<t.length;e++)if(!n[e])for(let n,i=this.dialects[t[e]];65535!=(n=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[n]=1;return new fC(e,n,r)}static deserialize(e){return new pC(e)}}function mC(e,t){return e[t]|e[t+1]<<16}function gC(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}const vC=Ly({String:sw.string,Number:sw.number,"True False":sw.bool,PropertyName:sw.propertyName,Null:sw.null,",":sw.separator,"[ ]":sw.squareBracket,"{ }":sw.brace}),yC=pC.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[vC],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),wC=hw.define({parser:yC.configure({props:[Aw.add({Object:Iw({except:/^\s*\}/}),Array:Iw({except:/^\s*\]/})}),Lw.add({"Object Array":function(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function bC(){return new $w(wC)}function xC(e,t){const n=Date.now(),r=e();return t(Date.now()-n),r}function $C(e){let t,n,r;return{c(){t=A("div"),n=P("Line: "),r=P(e[0]),D(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,i){_(e,t,i),k(t,n),k(t,r)},p(e,t){1&t&&V(r,e[0])},d(e){e&&O(t)}}}function kC(e){let t,n,r;return{c(){t=A("div"),n=P("Column: "),r=P(e[1]),D(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,i){_(e,t,i),k(t,n),k(t,r)},p(e,t){2&t&&V(r,e[1])},d(e){e&&O(t)}}}function SC(e){let t,n,r,i;return{c(){t=A("div"),n=P("Selection: "),r=P(e[2]),i=P(" characters"),D(t,"class","jse-status-bar-info svelte-1oo7hnc")},m(e,o){_(e,t,o),k(t,n),k(t,r),k(t,i)},p(e,t){4&t&&V(r,e[2])},d(e){e&&O(t)}}}function CC(t){let n,r,i,o=void 0!==t[0]&&$C(t),s=void 0!==t[1]&&kC(t),a=void 0!==t[2]&&t[2]>0&&SC(t);return{c(){n=A("div"),o&&o.c(),r=T(),s&&s.c(),i=T(),a&&a.c(),D(n,"class","jse-status-bar svelte-1oo7hnc")},m(e,t){_(e,n,t),o&&o.m(n,null),k(n,r),s&&s.m(n,null),k(n,i),a&&a.m(n,null)},p(e,[t]){void 0!==e[0]?o?o.p(e,t):(o=$C(e),o.c(),o.m(n,r)):o&&(o.d(1),o=null),void 0!==e[1]?s?s.p(e,t):(s=kC(e),s.c(),s.m(n,i)):s&&(s.d(1),s=null),void 0!==e[2]&&e[2]>0?a?a.p(e,t):(a=SC(e),a.c(),a.m(n,null)):a&&(a.d(1),a=null)},i:e,o:e,d(e){e&&O(n),o&&o.d(),s&&s.d(),a&&a.d()}}}function _C(e,t,n){var r,i,o,s,a;let l,c,u,h,d,{editorState:f}=t;return e.$$set=e=>{"editorState"in e&&n(3,f=e.editorState)},e.$$.update=()=>{56&e.$$.dirty&&n(9,l=null===n(5,i=null===n(4,r=null==f?void 0:f.selection)||void 0===r?void 0:r.main)||void 0===i?void 0:i.head),584&e.$$.dirty&&n(10,c=null===n(6,o=null==f?void 0:f.doc)||void 0===o?void 0:o.lineAt(l)),1024&e.$$.dirty&&n(0,u=c?c.number:void 0),1536&e.$$.dirty&&n(1,h=c?l-c.from+1:void 0),392&e.$$.dirty&&n(2,d=null===n(8,a=null===n(7,s=null==f?void 0:f.selection)||void 0===s?void 0:s.ranges)||void 0===a?void 0:a.reduce(((e,t)=>e+t.to-t.from),0))},[u,h,d,f,r,i,o,s,a,l,c]}class OC extends He{constructor(e){super(),qe(this,e,_C,CC,a,{editorState:3})}}const EC=ob.define([{tag:sw.propertyName,color:"var(--jse-key-color)"},{tag:sw.number,color:"var(--jse-value-color-number)"},{tag:sw.bool,color:"var(--jse-value-color-boolean)"},{tag:sw.string,color:"var(--jse-value-color-string)"},{tag:sw.keyword,color:"var(--jse-value-color-null)"}]),AC=cb(EC),MC=EC.style;function PC(e){let t,n;return t=new Hu({props:{readOnly:e[1],onFormat:e[17],onCompact:e[18],onSort:e[19],onTransform:e[20],onToggleSearch:e[21],onUndo:e[22],onRedo:e[23],canFormat:!e[15],canCompact:!e[15],canSort:!e[15],canTransform:!e[15],canUndo:e[10],canRedo:e[11],onRenderMenu:e[5]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.readOnly=e[1]),32768&n[0]&&(r.canFormat=!e[15]),32768&n[0]&&(r.canCompact=!e[15]),32768&n[0]&&(r.canSort=!e[15]),32768&n[0]&&(r.canTransform=!e[15]),1024&n[0]&&(r.canUndo=e[10]),2048&n[0]&&(r.canRedo=e[11]),32&n[0]&&(r.onRenderMenu=e[5]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function TC(t){let n;return{c(){n=A("div"),n.innerHTML='<div class="jse-loading-space svelte-1ol5grl"></div> \n      <div class="jse-loading svelte-1ol5grl">loading...</div>',D(n,"class","jse-contents svelte-1ol5grl")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function jC(e){let t,n,r,i,o,s,a,l=e[14]&&NC(e),c=e[3]&&IC(e),u=e[12]&&RC(e);return s=new $u({props:{validationErrors:e[9],selectError:e[26]}}),{c(){l&&l.c(),t=T(),n=A("div"),r=T(),c&&c.c(),i=T(),u&&u.c(),o=T(),Be(s.$$.fragment),D(n,"class","jse-contents svelte-1ol5grl"),U(n,"jse-hidden",e[14])},m(h,d){l&&l.m(h,d),_(h,t,d),_(h,n,d),e[46](n),_(h,r,d),c&&c.m(h,d),_(h,i,d),u&&u.m(h,d),_(h,o,d),Ve(s,h,d),a=!0},p(e,r){e[14]?l?(l.p(e,r),16384&r[0]&&Ae(l,1)):(l=NC(e),l.c(),Ae(l,1),l.m(t.parentNode,t)):l&&(Oe(),Me(l,1,1,(()=>{l=null})),Ee()),16384&r[0]&&U(n,"jse-hidden",e[14]),e[3]?c?(c.p(e,r),8&r[0]&&Ae(c,1)):(c=IC(e),c.c(),Ae(c,1),c.m(i.parentNode,i)):c&&(Oe(),Me(c,1,1,(()=>{c=null})),Ee()),e[12]?u?(u.p(e,r),4096&r[0]&&Ae(u,1)):(u=RC(e),u.c(),Ae(u,1),u.m(o.parentNode,o)):u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee());const a={};512&r[0]&&(a.validationErrors=e[9]),s.$set(a)},i(e){a||(Ae(l),Ae(c),Ae(u),Ae(s.$$.fragment,e),a=!0)},o(e){Me(l),Me(c),Me(u),Me(s.$$.fragment,e),a=!1},d(a){l&&l.d(a),a&&O(t),a&&O(n),e[46](null),a&&O(r),c&&c.d(a),a&&O(i),u&&u.d(a),a&&O(o),Fe(s,a)}}}function NC(e){let t,n;return t=new uu({props:{icon:Ec,type:"error",message:`The JSON document is larger than ${Pc(fn,1024)}, and may crash your browser when loading it in code mode. Actual size: ${Pc(e[0].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in code mode. This may freeze or crash your browser.",onClick:e[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:e[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:e[25]}]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.message=`The JSON document is larger than ${Pc(fn,1024)}, and may crash your browser when loading it in code mode. Actual size: ${Pc(e[0].length,1024)}.`),16&n[0]&&(r.actions=[{text:"Open anyway",title:"Open the document in code mode. This may freeze or crash your browser.",onClick:e[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:e[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:e[25]}]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function IC(e){let t,n;return t=new OC({props:{editorState:e[8]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};256&n[0]&&(r.editorState=e[8]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function RC(e){let t,n;return t=new uu({props:{type:"error",icon:Ec,message:e[12].message,actions:e[13],onClick:e[47]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};4096&n[0]&&(r.message=e[12].message),8192&n[0]&&(r.actions=e[13]),4096&n[0]&&(r.onClick=e[47]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function DC(e){let t,n,r,i,o,s=e[2]&&PC(e);const a=[jC,TC],l=[];return r=function(e,t){return e[16]?1:0}(e),i=l[r]=a[r](e),{c(){t=A("div"),s&&s.c(),n=T(),i.c(),D(t,"class","jse-code-mode svelte-1ol5grl"),U(t,"no-main-menu",!e[2])},m(i,a){_(i,t,a),s&&s.m(t,null),k(t,n),l[r].m(t,null),e[48](t),o=!0},p(e,r){e[2]?s?(s.p(e,r),4&r[0]&&Ae(s,1)):(s=PC(e),s.c(),Ae(s,1),s.m(t,n)):s&&(Oe(),Me(s,1,1,(()=>{s=null})),Ee()),i.p(e,r),4&r[0]&&U(t,"no-main-menu",!e[2])},i(e){o||(Ae(s),Ae(i),o=!0)},o(e){Me(s),Me(i),o=!1},d(n){n&&O(t),s&&s.d(),l[r].d(),e[48](null)}}}function LC(e,t,n){let r,i,o,s,a,{readOnly:l=!1}=t,{mainMenuBar:c=!0}=t,{statusBar:u=!0}=t,{text:h=""}=t,{indentation:d=2}=t,{tabSize:f=4}=t,{escapeUnicodeCharacters:p=!1}=t,{validator:m=null}=t,{onChange:g=null}=t,{onSwitchToTreeMode:v=li}=t,{onError:y}=t,{onFocus:w=li}=t,{onBlur:b=li}=t,{onRenderMenu:x=li}=t,{onSortModal:$}=t,{onTransformModal:k}=t;const S=zt("jsoneditor:CodeMode"),C={key:"Mod-i",run:W,shift:U,preventDefault:!0},_="undefined"==typeof window;let O,E,A,M,P;S("isSSR:",_);let T=!1,j=[];const N=new Bh,I=new Bh,R=new Bh;let D=p;re((async()=>{if(!_)try{E=function({target:e,initialText:t,readOnly:r,indentation:i}){S("Create CodeMirror editor",{readOnly:r,indentation:i});const o=fd.create({doc:t,extensions:[Eg.of([f$,C]),AS((()=>(ae.flush(),function(){if(S("validate"),n(44,ce=$n),n(12,he=null),n(9,j=[]),h.length>hn)return[{from:0,to:0,message:"Validation turned off: the document is too large",severity:"info"}];if(0===h.length)return[];try{const e=xC((()=>JSON.parse(h)),(e=>S(`validate: parsed json in ${e} ms`)));return m?(n(9,j=xC((()=>m(e)),(e=>S(`validate: validated json in ${e} ms`)))),j.map(Y)):[]}catch(e){const t=xC((()=>function(e){if(e.length>dn)return!1;try{return JSON.parse(Vn(e)),!0}catch(e){return!1}}(h)),(e=>S(`validate: checked whether repairable in ${e} ms`)));return n(12,he=ar(h,e.message||e.toString())),n(44,ce=t?kn:Sn),[Z(he,t)]}}())),{delay:300}),US(),JS,AC,bg.domEventHandlers({dblclick:X}),bg.updateListener.of((e=>{n(8,P=e.state),e.docChanged&&ae()})),bC(),D$({top:!0}),N.of(fd.readOnly.of(r)),R.of(fd.tabSize.of(f)),I.of(oe(i)),bg.lineWrapping]});return E=new bg({state:o,parent:e}),E}({target:O,initialText:o?"":h,readOnly:l,indentation:d}),F()}catch(e){console.error(e)}})),ie((()=>{E&&(S("Destroy CodeMirror editor"),E.destroy())}));let L=!1,z=!1;const B=Ea(),V=Ea();function F(){E&&(S("focus"),E.focus())}let q=!1;function H(e){S("patch",e);const t=h,r=JSON.parse(h),i=Nn.immutableJSONPatch(r,e),o=Nn.revertJSONPatch(r,e);return n(0,h=JSON.stringify(i,null,d)),h!==t&&le(h,t),{json:i,previousJson:r,undo:o,redo:e}}function W(){if(S("format"),!l)try{const e=h,t=JSON.parse(h);n(0,h=JSON.stringify(t,null,d)),h!==e&&le(h,e)}catch(e){y(e)}}function U(){if(S("compact"),!l)try{const e=h,t=JSON.parse(h);n(0,h=JSON.stringify(t)),h!==e&&le(h,e)}catch(e){y(e)}}function J(){if(S("repair"),!l)try{const e=h;n(0,h=Vn(h)),n(44,ce=$n),n(12,he=void 0),h!==e&&le(h,e)}catch(e){y(e)}}function K({id:e,selectedPath:t,onTransform:n,onClose:r}){try{const i=JSON.parse(h);q=!0,k({id:e||V,json:i,selectedPath:t,onTransform:n?e=>{n({operations:e,json:i,transformedJson:Nn.immutableJSONPatch(i,e)})}:e=>{S("onTransform",e),H(e)},onClose:()=>{q=!1,F(),r&&r()}})}catch(e){y(e)}}function G(e){S("select parse error",e);const t=Z(e);Q(t.from,t.to),F()}function Q(e,t){S("setSelection",{anchor:e,head:t}),E&&E.dispatch(E.state.update({selection:{anchor:e,head:t},scrollIntoView:!0}))}function X(e,t){if(1===t.state.selection.ranges.length){const e=t.state.selection.ranges[0],n=h.slice(e.from,e.to);if("{"===n||"["===n){const t=Bn(h),n=Object.keys(t.pointers).find((n=>{var r;return(null===(r=t.pointers[n].value)||void 0===r?void 0:r.pos)===e.from})),r=t.pointers[n];if(n&&r&&r.value&&r.valueEnd){S("pointer found, selecting inner contents of path:",n,r);Q(r.value.pos+1,r.valueEnd.pos-1)}}}}function Y(e){const{path:t,message:n,isChildError:r}=e,{line:i,column:o,from:s,to:a}=function(e,t){try{const n=Bn(e),r=Nn.compileJSONPointer(t),i=n.pointers[r];if(i)return{path:t,line:i.key?i.key.line:i.value?i.value.line:0,column:i.key?i.key.column:i.value?i.value.column:0,from:i.key?i.key.pos:i.value?i.value.pos:0,to:i.keyEnd?i.keyEnd.pos:i.valueEnd?i.valueEnd.pos:0}}catch(e){console.error(e)}return null}(h,t);return{path:t,isChildError:r,line:i,column:o,from:s,to:a,message:n,severity:"warning",actions:[]}}function Z(e,t){const{line:n,column:r,position:i,message:o}=e;return{path:null,line:n,column:r,from:i||0,to:i||0,severity:"error",message:o,actions:t&&!l?[{name:"Auto repair",apply:()=>J()}]:null}}function ee(e,t=!1){!o||t?E&&e!==A&&(S("setCodeMirrorValue length=",e.length),A=e,E.dispatch({changes:{from:0,to:E.state.doc.length,insert:s.escapeValue(e)}}),se()):S("not applying text: editor is disabled")}function te(){S("forceUpdateText",{escapeUnicodeCharacters:p}),E&&E.dispatch({changes:{from:0,to:E.state.doc.length,insert:s.escapeValue(h)}})}function ne(){if(E&&(A=E?s.unescapeValue(E.state.doc.toString()):"",A!==h)){const e=A;S("text changed"),n(0,h=A),se(),le(h,e)}}function oe(e){return Sw.of("number"==typeof e?" ".repeat(e):e)}function se(){n(10,L=Qb(E.state)>0),n(11,z=Xb(E.state)>0),S({canUndo:L,canRedo:z})}jc({onMount:re,onDestroy:ie,getWindow:()=>Bl(M),hasFocus:()=>q&&document.hasFocus()||Vl(M),onFocus:w,onBlur:b});const ae=ta(ne,300);function le(e,t){g&&g(e,t)}let ce=$n,he=null;return e.$$set=e=>{"readOnly"in e&&n(1,l=e.readOnly),"mainMenuBar"in e&&n(2,c=e.mainMenuBar),"statusBar"in e&&n(3,u=e.statusBar),"text"in e&&n(0,h=e.text),"indentation"in e&&n(28,d=e.indentation),"tabSize"in e&&n(29,f=e.tabSize),"escapeUnicodeCharacters"in e&&n(30,p=e.escapeUnicodeCharacters),"validator"in e&&n(31,m=e.validator),"onChange"in e&&n(32,g=e.onChange),"onSwitchToTreeMode"in e&&n(4,v=e.onSwitchToTreeMode),"onError"in e&&n(33,y=e.onError),"onFocus"in e&&n(34,w=e.onFocus),"onBlur"in e&&n(35,b=e.onBlur),"onRenderMenu"in e&&n(5,x=e.onRenderMenu),"onSortModal"in e&&n(36,$=e.onSortModal),"onTransformModal"in e&&n(37,k=e.onTransformModal)},e.$$.update=()=>{1&e.$$.dirty[0]&&n(15,r=0===h.length),1&e.$$.dirty[0]&&n(45,i=h&&h.length>fn),18432&e.$$.dirty[1]&&n(14,o=i&&!T),1073741824&e.$$.dirty[0]&&(s=kl({escapeControlCharacters:!1,escapeUnicodeCharacters:p})),1&e.$$.dirty[0]&&ee(h),268435456&e.$$.dirty[0]&&function(e){E&&(S("updateIndentation",e),E.dispatch({effects:I.reconfigure(oe(e))}))}(d),536870912&e.$$.dirty[0]&&function(e){E&&(S("updateTabSize",e),E.dispatch({effects:R.reconfigure(fd.tabSize.of(e))}))}(f),2&e.$$.dirty[0]&&function(e){E&&(S("updateReadOnly",e),E.dispatch({effects:N.reconfigure(fd.readOnly.of(e))}))}(l),1073741824&e.$$.dirty[0]|4096&e.$$.dirty[1]&&D!==p&&(n(43,D=p),te()),2&e.$$.dirty[0]|1&e.$$.dirty[1]&&te(),2&e.$$.dirty[0]|8192&e.$$.dirty[1]&&n(13,a=ce!==kn||l?[]:[{icon:Ac,text:"Auto repair",title:"Automatically repair JSON",onClick:J}])},[h,l,c,u,v,x,O,M,P,j,L,z,he,a,o,r,_,W,U,function(){if(!l)try{const e=JSON.parse(h);q=!0,$({id:B,json:e,selectedPath:[],onSort:async e=>{S("onSort",e),H(e)},onClose:()=>{q=!1,F()}})}catch(e){y(e)}},function(){l||K({selectedPath:[]})},function(){E&&(O&&O.querySelector(".cm-search")?sk(E):ok(E))},function(){l||E&&(Wb(E),F())},function(){l||E&&(Ub(E),F())},function(){n(42,T=!0),ee(h,!0)},function(){ne()},function(e){S("select validation error",e);const t=Y(e);Q(t.from,t.to),F()},G,d,f,p,m,g,y,w,b,$,k,F,H,K,function(){S("refresh");const e=E.state.doc.length;E.dispatch({changes:{from:e,to:e,insert:" "}}),E.dispatch({changes:{from:e,to:e+1,insert:""}})},T,D,ce,i,function(e){ue[e?"unshift":"push"]((()=>{O=e,n(6,O)}))},()=>G(he),function(e){ue[e?"unshift":"push"]((()=>{M=e,n(7,M)}))}]}EC.style=e=>MC(e||[]);class zC extends He{constructor(e){super(),qe(this,e,LC,DC,u,{readOnly:1,mainMenuBar:2,statusBar:3,text:0,indentation:28,tabSize:29,escapeUnicodeCharacters:30,validator:31,onChange:32,onSwitchToTreeMode:4,onError:33,onFocus:34,onBlur:35,onRenderMenu:5,onSortModal:36,onTransformModal:37,focus:38,patch:39,openTransformModal:40,refresh:41},null,[-1,-1,-1])}get focus(){return this.$$.ctx[38]}get patch(){return this.$$.ctx[39]}get openTransformModal(){return this.$$.ctx[40]}get refresh(){return this.$$.ctx[41]}}const BC=zt("jsoneditor:AutoScrollHandler");function VC(e){let t,n;function r(e){return e<20?200:e<50?400:1200}function i(){if(e){const n=.05*t;e.scrollTop+=n}}function o(e){n&&e===t||(s(),BC("startAutoScroll",e),t=e,n=setInterval(i,50))}function s(){n&&(BC("stopAutoScroll"),clearInterval(n),n=void 0,t=void 0)}return BC("createAutoScrollHandler",e),{onDrag:function(t){if(e){const n=t.clientY,{top:i,bottom:a}=e.getBoundingClientRect();if(n<i){o(-r(i-n))}else if(n>a){o(r(n-a))}else s()}},onDragEnd:function(){s()}}}var FC=(e,t,n,r)=>(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t;const qC=()=>{let e,t,n,r,i,o,s,a,l,c,u,h,d,f;function p(t){return t.getBoundingClientRect().top-(e.getBoundingClientRect?e.getBoundingClientRect().top:0)+n}function m(t){e.scrollTo?e.scrollTo(0,t):e.scrollTop=t}function g(e){c||(c=e),u=e-c,h=o(u,n,a,l),m(h),f=!0,u<l?requestAnimationFrame(g):function(){m(n+a),t&&s&&(t.setAttribute("tabindex","-1"),t.focus());"function"==typeof d&&d();c=!1,f=!1}()}return function(u,h={}){switch(l=h.duration||1e3,i=h.offset||0,d=h.callback,o=h.easing||FC,s=h.a11y||!1,typeof h.container){case"object":e=h.container;break;case"string":e=document.querySelector(h.container);break;default:e=window}switch(n=e.scrollY||e.pageYOffset||e.scrollTop,typeof u){case"number":t=void 0,s=!1,r=n+u;break;case"object":t=u,r=p(t);break;case"string":t=document.querySelector(u),r=p(t)}switch(a=r-n+i,typeof h.duration){case"number":l=h.duration;break;case"function":l=h.duration(a)}f?c=!1:requestAnimationFrame(g)}};function HC(e,t){const n=new Set(t),r=e.replace(/ \(copy( \d+)?\)$/,"");let i=e,o=1;for(;n.has(i);){i=`${r} (${"copy"+(o>1?" "+o:"")})`,o++}return i}function WC(e,t){const n=t-"...".length;return e.length>t?e.substr(0,n)+"...":e}function UC(e,t,n,r){const i=ca(n),o=Nn.getIn(e,i);if(Array.isArray(o)){const e=parseInt(na(n),10);return r.map(((t,n)=>({op:"add",path:Nn.compileJSONPointer(i.concat(e+n)),value:t.value})))}{const e=na(n),o=qa(t,i),s=Ua(o,e,!0);return[...r.map((e=>{const t=HC(e.key,o);return{op:"add",path:Nn.compileJSONPointer(i.concat(t)),value:e.value}})),...s.map((e=>YC(i,e)))]}}function JC(e,t,n){const r=Nn.getIn(e,t);if(Array.isArray(r)){const e=r.length;return n.map(((n,r)=>({op:"add",path:Nn.compileJSONPointer(t.concat(e+r)),value:n.value})))}return n.map((e=>{const n=HC(e.key,Object.keys(r));return{op:"add",path:Nn.compileJSONPointer(t.concat(n)),value:e.value}}))}function KC(e,t,n,r){const i=HC(r,t.filter((e=>e!==n))),o=Ua(t,n,!1);return[{op:"move",from:Nn.compileJSONPointer(e.concat(n)),path:Nn.compileJSONPointer(e.concat(i))},...o.map((t=>YC(e,t)))]}function GC(e,t,n,r){if(n.type===nl){const e=rr(r),i=ca(n.focusPath);return KC(i,qa(t,i),na(n.focusPath),"string"==typeof e?e:r)}if(n.type===rl||n.type===il&&ha(n.focusPath))try{return[{op:"replace",path:Nn.compileJSONPointer(n.focusPath),value:ir(r,nr)}]}catch(e){return[{op:"replace",path:Nn.compileJSONPointer(n.focusPath),value:r}]}if(n.type===il){const i=ZC(r);return function(e,t,n,r){const i=ca(aa(n)),o=Nn.getIn(e,i);if(Array.isArray(o)){const e=aa(n),t=e?parseInt(na(e),10):0;return[...XC(n),...r.map(((e,n)=>({op:"add",path:Nn.compileJSONPointer(i.concat(n+t)),value:e.value})))]}{const e=na(n),i=ca(e),o=na(e),s=qa(t,i),a=Ua(s,o,!1),l=new Set(n.map((e=>na(e)))),c=s.filter((e=>!l.has(e)));return[...XC(n),...r.map((e=>{const t=HC(e.key,c);return{op:"add",path:Nn.compileJSONPointer(i.concat(t)),value:e.value}})),...a.map((e=>YC(i,e)))]}}(e,t,n.paths,i)}if(n.type===el){const i=ZC(r),o=n.focusPath,s=ca(o),a=Nn.getIn(e,s);if(Array.isArray(a)){const n=na(o);return UC(e,t,s.concat([n+1]),i)}{const n=na(o),r=qa(t,s);if(ha(r)||na(r)===n)return JC(e,s,i);{const o=r.indexOf(n),a=r[o+1];return UC(e,t,s.concat([a]),i)}}}if(n.type===tl){const i=ZC(r),o=n.focusPath,s=Nn.getIn(e,o);if(Array.isArray(s)){return UC(e,t,o.concat([0]),i)}{const n=qa(t,o);if(ha(n))return JC(e,o,i);{const r=aa(n);return UC(e,t,o.concat([r]),i)}}}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(n))}function QC(e,t,n){if("object"===n)return{};if("array"===n)return[];if("structure"===n){const n=ol(t),i=Nn.getIn(e,n);if(Array.isArray(i)&&!ha(i)){const e=aa(i);return qn(e)?(r=e=>Array.isArray(e)?[]:Fn(e)?void 0:"",Cs(e,5,r="function"==typeof r?r:void 0)):""}}var r;return""}function XC(e){return e.map((e=>({op:"remove",path:Nn.compileJSONPointer(e)}))).reverse()}function YC(e,t){return{op:"move",from:Nn.compileJSONPointer(e.concat(t)),path:Nn.compileJSONPointer(e.concat(t))}}function ZC(e){const t=/^\s*{/.test(e),n=/^\s*\[/.test(e),r=rr(e),i=void 0!==r?r:ir(e,nr);return t&&Fn(i)||n&&Array.isArray(i)?[{key:"New item",value:i}]:Array.isArray(i)?i.map(((e,t)=>({key:"New item "+t,value:e}))):Fn(i)?Object.keys(i).map((e=>({key:e,value:i[e]}))):[{key:"New item",value:i}]}function e_(e,t,n){if(n.type===nl){const r=ca(n.focusPath),i=KC(r,qa(t,r),na(n.focusPath),"");return{operations:i,newSelection:dl(e,0,i)}}if(n.type===rl){return{operations:[{op:"replace",path:Nn.compileJSONPointer(n.focusPath),value:""}],newSelection:n}}if(n.type===il){const r=XC(n.paths),i=na(n.paths);if(ha(i)){return{operations:[{op:"replace",path:"",value:""}],newSelection:yl(e,t,{type:rl,path:[]})}}const o=ca(i),s=Nn.getIn(e,o);if(Array.isArray(s)){const i=na(aa(n.paths));return{operations:r,newSelection:yl(e,t,0===i?{type:tl,path:o}:{type:el,path:o.concat([i-1])})}}{const i=qa(t,o),s=na(aa(n.paths)),a=i.indexOf(s),l=i[a-1];return{operations:r,newSelection:yl(e,t,0===a?{type:tl,path:o}:{type:el,path:o.concat([l])})}}}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(n))}function t_(e,t,n){const r=t,i=function(e,t){let n={};return t.forEach((t=>{const r=t.path;if(!Nn.existsIn(n,r)){const t=Nn.getIn(e,r);n=Nn.setIn(n,r,Array.isArray(t)?[]:{},!0)}n=Nn.setIn(n,a_(t),t,!0)})),n}(e,r),o=n&&n.activeItem?a_(n.activeItem):void 0,s=o&&Nn.existsIn(i,o)?Nn.getIn(i,o):r[0],a=r.findIndex((e=>{return n=s,(t=e).start===n.start&&t.field===n.field&&da(t.path,n.path);var t,n}));return{items:i,itemsWithActive:i&&s&&-1!==a?Nn.setIn(i,s_(s),!0):i,flatItems:r,count:r.length,activeItem:s,activeIndex:a}}function n_(e,t,n,r=1/0){const i=[],o=[];function s(e){i.length<r&&i.push(e)}if("string"==typeof e&&""!==e){!function e(t,n,a){if(Array.isArray(n)){const s=o.length;o.push(0);for(let l=0;l<n.length;l++)if(o[s]=l,e(t,n[l],a?a[l]:void 0),i.length>=r)return;o.pop()}else if(null!==n&&"object"==typeof n){const l=o.length;o.push(0);const c=a?a[tn]:Object.keys(n);for(const u of c)if(o[l]=u,r_(u,t,o,nn,s),e(t,n[u],a?a[u]:void 0),i.length>=r)return;o.pop()}else r_(n,t,o,rn,s)}(e.toLowerCase(),t,n)}return i}function r_(e,t,n,r,i){const o=String(e).toLowerCase();let s=0,a=-1,l=-1;do{l=o.indexOf(t,a),-1!==l&&(a=l+t.length,i({path:n.slice(0),field:r,fieldIndex:s,start:l,end:a,active:!1}),s++)}while(-1!==l)}function i_(e,t,n,r){return e.substring(0,n)+t+e.substring(r)}function o_(e,t,n){let r=e;var i,o;return o=e=>{r=i_(r,t,e.start,e.end)},(Er(i=n)?ia:sa)(i,ra(o)),r}function s_(e){return e.path.concat(e.field,e.fieldIndex,"active")}function a_(e){return e.path.concat(e.field,e.fieldIndex)}function l_(e){let t,n,r,i,o,s,a,l,c;return s=new ru({props:{data:Mc}}),{c(){t=A("div"),n=A("div"),r=P(e[0]),i=T(),o=A("button"),Be(s.$$.fragment),D(n,"class","jse-title svelte-d01h2s"),D(o,"type","button"),D(o,"class","jse-close svelte-d01h2s"),D(t,"class","jse-header svelte-d01h2s")},m(u,h){_(u,t,h),k(t,n),k(n,r),k(t,i),k(t,o),Ve(s,o,null),a=!0,l||(c=N(o,"click",e[1]),l=!0)},p(e,[t]){(!a||1&t)&&V(r,e[0])},i(e){a||(Ae(s.$$.fragment,e),a=!0)},o(e){Me(s.$$.fragment,e),a=!1},d(e){e&&O(t),Fe(s),l=!1,c()}}}function c_(e,t,n){let{title:r="Modal"}=t;const{close:i}=ae("simple-modal");return e.$$set=e=>{"title"in e&&n(0,r=e.title)},[r,i]}class u_ extends He{constructor(e){super(),qe(this,e,c_,l_,u,{title:0})}}function h_(t){let n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E;return r=new u_({props:{title:"Copying and pasting"}}),{c(){n=A("div"),Be(r.$$.fragment),i=T(),o=A("div"),s=A("div"),s.textContent="These actions are unavailable via the menu. Please use:",a=T(),l=A("div"),c=A("div"),u=A("div"),u.textContent=`${t[1]}+C`,h=P("\n        for copy"),d=T(),f=A("div"),p=A("div"),p.textContent=`${t[1]}+X`,m=P("\n        for cut"),g=T(),v=A("div"),y=A("div"),y.textContent=`${t[1]}+V`,w=P("\n        for paste"),b=T(),x=A("div"),$=A("button"),$.textContent="Close",D(u,"class","jse-key svelte-t45ah0"),D(c,"class","jse-shortcut"),D(p,"class","jse-key svelte-t45ah0"),D(f,"class","jse-shortcut"),D(y,"class","jse-key svelte-t45ah0"),D(v,"class","jse-shortcut"),D(l,"class","jse-shortcuts svelte-t45ah0"),D($,"type","button"),D($,"class","jse-primary svelte-t45ah0"),D(x,"class","jse-actions svelte-t45ah0"),D(o,"class","jse-contents svelte-t45ah0"),D(n,"class","jse-modal jse-copy-paste svelte-t45ah0")},m(e,O){_(e,n,O),Ve(r,n,null),k(n,i),k(n,o),k(o,s),k(o,a),k(o,l),k(l,c),k(c,u),k(c,h),k(l,d),k(l,f),k(f,p),k(f,m),k(l,g),k(l,v),k(v,y),k(v,w),k(o,b),k(o,x),k(x,$),S=!0,C||(E=N($,"click",t[0]),C=!0)},p:e,i(e){S||(Ae(r.$$.fragment,e),S=!0)},o(e){Me(r.$$.fragment,e),S=!1},d(e){e&&O(n),Fe(r),C=!1,E()}}}function d_(e){const{close:t}=ae("simple-modal");return[t,Jl?"⌘":"Ctrl"]}class f_ extends He{constructor(e){super(),qe(this,e,d_,h_,u,{})}}function p_(t){let n;return{c(){n=A("div"),n.textContent="Repair invalid JSON, then click apply",D(n,"slot","left"),D(n,"class","jse-info svelte-gz09vf")},m(e,t){_(e,n,t)},p:e,d(e){e&&O(n)}}}function m_(e){let t,n;return t=new uu({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:e[5]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32&n&&(r.actions=e[5]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function g_(e){let t,n;return t=new uu({props:{type:"error",icon:Ec,message:`Cannot parse JSON: ${e[2].message}`,actions:e[6]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};4&n&&(r.message=`Cannot parse JSON: ${e[2].message}`),64&n&&(r.actions=e[6]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function v_(e){let t,n,r,i,o,s,a,l,c,u;n=new Bu({props:{items:e[7],$$slots:{left:[p_]},$$scope:{ctx:e}}});const h=[g_,m_],d=[];function f(e,t){return e[2]?0:1}return i=f(e),o=d[i]=h[i](e),{c(){t=A("div"),Be(n.$$.fragment),r=T(),o.c(),s=T(),a=A("textarea"),a.value=e[0],a.readOnly=e[1],D(a,"class","jse-json-text svelte-gz09vf"),D(a,"autocomplete","off"),D(a,"autocapitalize","off"),D(a,"spellcheck","false"),D(t,"class","jse-json-repair-component svelte-gz09vf")},m(o,h){_(o,t,h),Ve(n,t,null),k(t,r),d[i].m(t,null),k(t,s),k(t,a),e[21](a),e[22](t),l=!0,c||(u=N(a,"input",e[8]),c=!0)},p(e,[r]){const c={};128&r&&(c.items=e[7]),536870912&r&&(c.$$scope={dirty:r,ctx:e}),n.$set(c);let u=i;i=f(e),i===u?d[i].p(e,r):(Oe(),Me(d[u],1,1,(()=>{d[u]=null})),Ee(),o=d[i],o?o.p(e,r):(o=d[i]=h[i](e),o.c()),Ae(o,1),o.m(t,s)),(!l||1&r)&&(a.value=e[0]),(!l||2&r)&&(a.readOnly=e[1])},i(e){l||(Ae(n.$$.fragment,e),Ae(o),l=!0)},o(e){Me(n.$$.fragment,e),Me(o),l=!1},d(r){r&&O(t),Fe(n),d[i].d(),e[21](null),e[22](null),c=!1,u()}}}function y_(e,t,n){let r,i,o,s,a,l,c,u,{text:h=""}=t,{readOnly:d=!1}=t,{onParse:f}=t,{onRepair:p}=t,{onChange:m=null}=t,{onApply:g}=t,{onCancel:v}=t,{onFocus:y}=t,{onBlur:w}=t,{onRenderMenu:b=li}=t;const x=zt("jsoneditor:JSONRepair");let $,k;function S(){g(h)}return jc({onMount:re,onDestroy:ie,getWindow:()=>Bl($),hasFocus:()=>Vl($),onFocus:()=>{y&&y()},onBlur:()=>{w&&w()}}),e.$$set=e=>{"text"in e&&n(0,h=e.text),"readOnly"in e&&n(1,d=e.readOnly),"onParse"in e&&n(9,f=e.onParse),"onRepair"in e&&n(10,p=e.onRepair),"onChange"in e&&n(11,m=e.onChange),"onApply"in e&&n(12,g=e.onApply),"onCancel"in e&&n(13,v=e.onCancel),"onFocus"in e&&n(14,y=e.onFocus),"onBlur"in e&&n(15,w=e.onBlur),"onRenderMenu"in e&&n(16,b=e.onRenderMenu)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=function(e){try{return f(e),null}catch(t){return ar(e,t.message)}}(h)),1&e.$$.dirty&&n(19,i=function(e){try{return p(e),!0}catch(e){return!1}}(h)),4&e.$$.dirty&&x("error",r),8192&e.$$.dirty&&n(20,o=[{space:!0},{icon:Mc,title:"Cancel repair",className:"jse-cancel",onClick:v}]),1114112&e.$$.dirty&&n(7,s=b("repair",o)||o),917504&e.$$.dirty&&n(6,c=i?[a,l]:[a]),2&e.$$.dirty&&n(5,u=[{icon:hc,text:"Apply",title:"Apply fixed JSON",disabled:d,onClick:S}])},n(17,a={icon:oc,text:"Show me",title:"Scroll to the error location",onClick:function(){k&&r&&null!=r.position&&(k.setSelectionRange(r.position,r.position),setTimeout((()=>{k.focus()})))}}),n(18,l={icon:Ac,text:"Auto repair",title:"Automatically repair JSON",onClick:function(){try{n(0,h=p(h)),m&&m(h)}catch(e){}}}),[h,d,r,$,k,u,c,s,function(e){x("handleChange");const t=e.target.value;h!==t&&(n(0,h=t),m&&m(h))},f,p,m,g,v,y,w,b,a,l,i,o,function(e){ue[e?"unshift":"push"]((()=>{k=e,n(4,k)}))},function(e){ue[e?"unshift":"push"]((()=>{$=e,n(3,$)}))}]}class w_ extends He{constructor(e){super(),qe(this,e,y_,v_,u,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onFocus:14,onBlur:15,onRenderMenu:16})}}function b_(e){let t,n,r,i;function o(t){e[9](t)}let s={onParse:e[1],onRepair:e[2],onApply:e[6],onCancel:e[7],onFocus:e[3],onBlur:e[4],onRenderMenu:e[5]};return void 0!==e[0]&&(s.text=e[0]),n=new w_({props:s}),ue.push((()=>ze(n,"text",o))),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-modal jse-repair svelte-1ffm3pm")},m(e,r){_(e,t,r),Ve(n,t,null),i=!0},p(e,[t]){const i={};2&t&&(i.onParse=e[1]),4&t&&(i.onRepair=e[2]),8&t&&(i.onFocus=e[3]),16&t&&(i.onBlur=e[4]),32&t&&(i.onRenderMenu=e[5]),!r&&1&t&&(r=!0,i.text=e[0],ye((()=>r=!1))),n.$set(i)},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n)}}}function x_(e,t,n){let{text:r}=t,{onParse:i}=t,{onRepair:o}=t,{onApply:s}=t,{onFocus:a}=t,{onBlur:l}=t,{onRenderMenu:c}=t;const{close:u}=ae("simple-modal");return e.$$set=e=>{"text"in e&&n(0,r=e.text),"onParse"in e&&n(1,i=e.onParse),"onRepair"in e&&n(2,o=e.onRepair),"onApply"in e&&n(8,s=e.onApply),"onFocus"in e&&n(3,a=e.onFocus),"onBlur"in e&&n(4,l=e.onBlur),"onRenderMenu"in e&&n(5,c=e.onRenderMenu)},[r,i,o,a,l,c,function(e){u(),s(e)},function(){u()},s,function(e){r=e,n(0,r)}]}class $_ extends He{constructor(e){super(),qe(this,e,x_,b_,u,{text:0,onParse:1,onRepair:2,onApply:8,onFocus:3,onBlur:4,onRenderMenu:5})}}function k_(e,t,n){const r=e.slice();return r[10]=t[n],r}const S_=e=>({}),C_=e=>({});function __(e){let t,n;return t=new ru({props:{data:e[10].icon}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[10].icon),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function O_(e){let t,n,r,i,o,s,a,l,c,u,h=e[10].text+"",d=e[10].icon&&__(e);function f(){return e[8](e[10])}return{c(){t=A("li"),n=A("button"),d&&d.c(),r=T(),i=P(h),a=T(),D(n,"type","button"),D(n,"title",o=e[10].title),n.disabled=s=e[10].disabled,D(n,"class","svelte-mojfmz"),D(t,"class","svelte-mojfmz")},m(e,o){_(e,t,o),k(t,n),d&&d.m(n,null),k(n,r),k(n,i),k(t,a),l=!0,c||(u=N(n,"click",f),c=!0)},p(t,a){(e=t)[10].icon?d?(d.p(e,a),1&a&&Ae(d,1)):(d=__(e),d.c(),Ae(d,1),d.m(n,r)):d&&(Oe(),Me(d,1,1,(()=>{d=null})),Ee()),(!l||1&a)&&h!==(h=e[10].text+"")&&V(i,h),(!l||1&a&&o!==(o=e[10].title))&&D(n,"title",o),(!l||1&a&&s!==(s=e[10].disabled))&&(n.disabled=s)},i(e){l||(Ae(d),l=!0)},o(e){Me(d),l=!1},d(e){e&&O(t),d&&d.d(),c=!1,u()}}}function E_(e){let t,n,r,i,s,a,l,c,u,d;const g=e[7].defaultItem,v=h(g,e,e[6],C_);i=new ru({props:{data:cc}});let y=e[0],w=[];for(let t=0;t<y.length;t+=1)w[t]=O_(k_(e,y,t));const b=e=>Me(w[e],1,1,(()=>{w[e]=null}));return{c(){t=A("div"),v&&v.c(),n=T(),r=A("button"),Be(i.$$.fragment),s=T(),a=A("div"),l=A("ul");for(let e=0;e<w.length;e+=1)w[e].c();D(r,"type","button"),D(r,"class","jse-open-dropdown svelte-mojfmz"),D(r,"data-type","jse-open-dropdown"),U(r,"jse-visible",e[3]),D(l,"class","svelte-mojfmz"),D(a,"class","jse-dropdown-items svelte-mojfmz"),q(a,"width",e[2]),U(a,"jse-visible",e[3]),D(t,"class","jse-dropdown-button svelte-mojfmz"),D(t,"title",e[1])},m(o,h){_(o,t,h),v&&v.m(t,null),k(t,n),k(t,r),Ve(i,r,null),k(t,s),k(t,a),k(a,l);for(let e=0;e<w.length;e+=1)w[e].m(l,null);c=!0,u||(d=[N(r,"click",e[4]),N(t,"click",e[5])],u=!0)},p(e,[n]){if(v&&v.p&&(!c||64&n)&&p(v,g,e,e[6],c?f(g,e[6],n,S_):m(e[6]),C_),8&n&&U(r,"jse-visible",e[3]),1&n){let t;for(y=e[0],t=0;t<y.length;t+=1){const r=k_(e,y,t);w[t]?(w[t].p(r,n),Ae(w[t],1)):(w[t]=O_(r),w[t].c(),Ae(w[t],1),w[t].m(l,null))}for(Oe(),t=y.length;t<w.length;t+=1)b(t);Ee()}(!c||4&n)&&q(a,"width",e[2]),8&n&&U(a,"jse-visible",e[3]),(!c||2&n)&&D(t,"title",e[1])},i(e){if(!c){Ae(v,e),Ae(i.$$.fragment,e);for(let e=0;e<y.length;e+=1)Ae(w[e]);c=!0}},o(e){Me(v,e),Me(i.$$.fragment,e),w=w.filter(Boolean);for(let e=0;e<w.length;e+=1)Me(w[e]);c=!1},d(e){e&&O(t),v&&v.d(e),Fe(i),E(w,e),u=!1,o(d)}}}function A_(e,t,n){let{$$slots:r={},$$scope:i}=t,{items:o=[]}=t,{title:s}=t,{width:a="120px"}=t,l=!1;function c(){n(3,l=!1)}function u(e){"Escape"===Kl(e)&&(e.preventDefault(),n(3,l=!1))}re((()=>{document.addEventListener("click",c),document.addEventListener("keydown",u)})),ie((()=>{document.removeEventListener("click",c),document.removeEventListener("keydown",u)}));return e.$$set=e=>{"items"in e&&n(0,o=e.items),"title"in e&&n(1,s=e.title),"width"in e&&n(2,a=e.width),"$$scope"in e&&n(6,i=e.$$scope)},[o,s,a,l,function(){const e=l;setTimeout((()=>n(3,l=!e)))},c,i,r,e=>e.onClick()]}class M_ extends He{constructor(e){super(),qe(this,e,A_,E_,u,{items:0,title:1,width:2})}}
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */var P_={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]},T_={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]},j_={prefix:"far",iconName:"square",icon:[448,512,[9723,9724,61590,9632],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},N_={prefix:"far",iconName:"square-check",icon:[448,512,[9989,61510,9745,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]};function I_(e){let t,n,r,i,o,s,a;return n=new ru({props:{data:Sc}}),{c(){t=A("button"),Be(n.$$.fragment),r=P(" Edit value"),D(t,"type","button"),D(t,"slot","defaultItem"),D(t,"title","Edit the value (Double-click on the value)"),t.disabled=i=!e[2],D(t,"class","svelte-1yai37q")},m(i,l){_(i,t,l),Ve(n,t,null),k(t,r),o=!0,s||(a=N(t,"click",e[18]),s=!0)},p(e,n){(!o||4&n[0]&&i!==(i=!e[2]))&&(t.disabled=i)},i(e){o||(Ae(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){e&&O(t),Fe(n),s=!1,a()}}}function R_(e){let t,n,r,i,o,s,a;return n=new ru({props:{data:Cc}}),{c(){t=A("button"),Be(n.$$.fragment),r=P(" Cut"),D(t,"type","button"),D(t,"slot","defaultItem"),D(t,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),t.disabled=i=!e[1],D(t,"class","svelte-1yai37q")},m(i,l){_(i,t,l),Ve(n,t,null),k(t,r),o=!0,s||(a=N(t,"click",e[19]),s=!0)},p(e,n){(!o||2&n[0]&&i!==(i=!e[1]))&&(t.disabled=i)},i(e){o||(Ae(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){e&&O(t),Fe(n),s=!1,a()}}}function D_(e){let t,n,r,i,o,s,a;return n=new ru({props:{data:vc}}),{c(){t=A("button"),Be(n.$$.fragment),r=P(" Copy"),D(t,"type","button"),D(t,"slot","defaultItem"),D(t,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),t.disabled=i=!e[1],D(t,"class","svelte-1yai37q")},m(i,l){_(i,t,l),Ve(n,t,null),k(t,r),o=!0,s||(a=N(t,"click",e[20]),s=!0)},p(e,n){(!o||2&n[0]&&i!==(i=!e[1]))&&(t.disabled=i)},i(e){o||(Ae(n.$$.fragment,e),o=!0)},o(e){Me(n.$$.fragment,e),o=!1},d(e){e&&O(t),Fe(n),s=!1,a()}}}function L_(t){let n,r,i,o,s,a,l;return o=new ru({props:{data:T_}}),{c(){n=A("div"),r=A("div"),i=A("div"),Be(o.$$.fragment),s=T(),a=A("div"),a.textContent="Tip: you can open this context menu via right-click or with Ctrl+Q",D(i,"class","svelte-1yai37q"),D(a,"class","svelte-1yai37q"),D(r,"class","jse-tip svelte-1yai37q"),D(n,"class","jse-row svelte-1yai37q")},m(e,t){_(e,n,t),k(n,r),k(r,i),Ve(o,i,null),k(r,s),k(r,a),l=!0},p:e,i(e){l||(Ae(o.$$.fragment,e),l=!0)},o(e){Me(o.$$.fragment,e),l=!1},d(e){e&&O(n),Fe(o)}}}function z_(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,M,j,I,R,L,z,B,F,q,H,W,U,J,K,G,Q,X,Y,Z,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he,de,fe,pe,me,ge,ve,ye,we,be,xe,$e,ke,Se,Ce,_e,Pe,Te,je,Ne,Ie,Re,De,Le,ze,qe,He,We,Ue,Je,Ke,Ge,Qe,Xe,Ye,Ze,et,tt,nt,rt,it,ot;i=new ru({props:{data:Sc}}),c=new M_({props:{width:"11em",items:e[8],$$slots:{defaultItem:[I_]},$$scope:{ctx:e}}}),p=new M_({props:{width:"10em",items:e[7],$$slots:{defaultItem:[R_]},$$scope:{ctx:e}}}),g=new M_({props:{width:"12em",items:e[6],$$slots:{defaultItem:[D_]},$$scope:{ctx:e}}}),w=new ru({props:{data:kc}}),I=new ru({props:{data:Mc}}),F=new ru({props:{data:mc}}),J=new ru({props:{data:yc}}),Y=new ru({props:{data:sc}}),re=new ru({props:{data:bc}}),Ke=new ru({props:{data:Oc}}),Ze=new ru({props:{data:_c}});let st=e[0]&&L_();return{c(){t=A("div"),n=A("div"),r=A("button"),Be(i.$$.fragment),s=P(" Edit key"),l=T(),Be(c.$$.fragment),u=T(),h=A("div"),d=T(),f=A("div"),Be(p.$$.fragment),m=T(),Be(g.$$.fragment),v=T(),y=A("button"),Be(w.$$.fragment),b=P(" Paste"),$=T(),S=A("div"),C=T(),E=A("div"),M=A("div"),j=A("button"),Be(I.$$.fragment),R=P(" Remove"),z=T(),B=A("button"),Be(F.$$.fragment),q=P(" Duplicate"),W=T(),U=A("button"),Be(J.$$.fragment),K=P(" Extract"),Q=T(),X=A("button"),Be(Y.$$.fragment),Z=P(" Sort"),te=T(),ne=A("button"),Be(re.$$.fragment),ie=P(" Transform"),se=T(),ae=A("div"),le=A("div"),ce=P(e[13]),ue=P(":"),he=T(),de=A("button"),fe=A("span"),pe=A("span"),pe.textContent="+",me=P(" Structure"),ye=T(),we=A("button"),be=A("span"),be.textContent="{}",xe=P(" Object"),Se=T(),Ce=A("button"),_e=A("span"),_e.textContent="[]",Pe=P(" Array"),Ne=T(),Ie=A("button"),Re=A("span"),Re.innerHTML='<span class="jse-quote svelte-1yai37q">&quot;</span>',De=P(" Value"),qe=T(),He=A("div"),We=T(),Ue=A("div"),Je=A("button"),Be(Ke.$$.fragment),Ge=P(" Insert before"),Xe=T(),Ye=A("button"),Be(Ze.$$.fragment),et=P(" Insert after"),nt=T(),st&&st.c(),D(r,"type","button"),D(r,"title","Edit the key (Double-click on the key)"),r.disabled=a=!e[14],D(r,"class","svelte-1yai37q"),D(n,"class","jse-row svelte-1yai37q"),D(h,"class","jse-separator svelte-1yai37q"),D(y,"type","button"),D(y,"title","Paste clipboard contents (Ctrl+V)"),y.disabled=x=!e[3],D(y,"class","svelte-1yai37q"),D(f,"class","jse-row svelte-1yai37q"),D(S,"class","jse-separator svelte-1yai37q"),D(j,"type","button"),D(j,"title","Remove selected contents (Delete)"),j.disabled=L=!e[1],D(j,"class","svelte-1yai37q"),D(B,"type","button"),D(B,"title","Duplicate selected contents (Ctrl+D)"),B.disabled=H=!e[16],D(B,"class","svelte-1yai37q"),D(U,"type","button"),D(U,"title","Extract selected contents"),U.disabled=G=!e[15],D(U,"class","svelte-1yai37q"),D(X,"type","button"),D(X,"title","Sort array or object contents"),X.disabled=ee=!e[1],D(X,"class","svelte-1yai37q"),D(ne,"type","button"),D(ne,"title","Transform array or object contents (filter, sort, project)"),ne.disabled=oe=!e[1],D(ne,"class","svelte-1yai37q"),D(M,"class","jse-column svelte-1yai37q"),D(le,"class","jse-label svelte-1yai37q"),D(pe,"class","jse-plus svelte-1yai37q"),D(fe,"class","jse-insert svelte-1yai37q"),D(de,"type","button"),D(de,"title",ge=e[13]+" structure"),de.disabled=ve=!e[12],D(de,"class","svelte-1yai37q"),D(be,"class","jse-insert svelte-1yai37q"),D(we,"type","button"),D(we,"title",$e=e[13]+" object"),we.disabled=ke=!e[11],D(we,"class","svelte-1yai37q"),D(_e,"class","jse-insert svelte-1yai37q"),D(Ce,"type","button"),D(Ce,"title",Te=e[13]+" array"),Ce.disabled=je=!e[10],D(Ce,"class","svelte-1yai37q"),D(Re,"class","jse-insert svelte-1yai37q"),D(Ie,"type","button"),D(Ie,"title",Le=e[13]+" value"),Ie.disabled=ze=!e[9],D(Ie,"class","svelte-1yai37q"),D(ae,"class","jse-column svelte-1yai37q"),D(E,"class","jse-row svelte-1yai37q"),D(He,"class","jse-separator svelte-1yai37q"),D(Je,"type","button"),D(Je,"title","Select area before current entry to insert or paste contents"),Je.disabled=Qe=!e[1]||e[4],D(Je,"class","svelte-1yai37q"),D(Ye,"type","button"),D(Ye,"title","Select area after current entry to insert or paste contents"),Ye.disabled=tt=!e[1]||e[4],D(Ye,"class","svelte-1yai37q"),D(Ue,"class","jse-row svelte-1yai37q"),D(t,"class","jse-contextmenu svelte-1yai37q")},m(o,a){_(o,t,a),k(t,n),k(n,r),Ve(i,r,null),k(r,s),k(n,l),Ve(c,n,null),k(t,u),k(t,h),k(t,d),k(t,f),Ve(p,f,null),k(f,m),Ve(g,f,null),k(f,v),k(f,y),Ve(w,y,null),k(y,b),k(t,$),k(t,S),k(t,C),k(t,E),k(E,M),k(M,j),Ve(I,j,null),k(j,R),k(M,z),k(M,B),Ve(F,B,null),k(B,q),k(M,W),k(M,U),Ve(J,U,null),k(U,K),k(M,Q),k(M,X),Ve(Y,X,null),k(X,Z),k(M,te),k(M,ne),Ve(re,ne,null),k(ne,ie),k(E,se),k(E,ae),k(ae,le),k(le,ce),k(le,ue),k(ae,he),k(ae,de),k(de,fe),k(fe,pe),k(de,me),k(ae,ye),k(ae,we),k(we,be),k(we,xe),k(ae,Se),k(ae,Ce),k(Ce,_e),k(Ce,Pe),k(ae,Ne),k(ae,Ie),k(Ie,Re),k(Ie,De),k(t,qe),k(t,He),k(t,We),k(t,Ue),k(Ue,Je),Ve(Ke,Je,null),k(Je,Ge),k(Ue,Xe),k(Ue,Ye),Ve(Ze,Ye,null),k(Ye,et),k(t,nt),st&&st.m(t,null),e[58](t),rt=!0,it||(ot=[N(r,"click",e[17]),N(y,"click",e[21]),N(j,"click",e[22]),N(B,"click",e[23]),N(U,"click",e[24]),N(X,"click",e[26]),N(ne,"click",e[27]),N(de,"click",e[54]),N(we,"click",e[55]),N(Ce,"click",e[56]),N(Ie,"click",e[57]),N(Je,"click",e[28]),N(Ye,"click",e[29]),N(t,"keydown",e[30])],it=!0)},p(e,n){(!rt||16384&n[0]&&a!==(a=!e[14]))&&(r.disabled=a);const i={};256&n[0]&&(i.items=e[8]),4&n[0]|1&n[2]&&(i.$$scope={dirty:n,ctx:e}),c.$set(i);const o={};128&n[0]&&(o.items=e[7]),2&n[0]|1&n[2]&&(o.$$scope={dirty:n,ctx:e}),p.$set(o);const s={};64&n[0]&&(s.items=e[6]),2&n[0]|1&n[2]&&(s.$$scope={dirty:n,ctx:e}),g.$set(s),(!rt||8&n[0]&&x!==(x=!e[3]))&&(y.disabled=x),(!rt||2&n[0]&&L!==(L=!e[1]))&&(j.disabled=L),(!rt||65536&n[0]&&H!==(H=!e[16]))&&(B.disabled=H),(!rt||32768&n[0]&&G!==(G=!e[15]))&&(U.disabled=G),(!rt||2&n[0]&&ee!==(ee=!e[1]))&&(X.disabled=ee),(!rt||2&n[0]&&oe!==(oe=!e[1]))&&(ne.disabled=oe),(!rt||8192&n[0])&&V(ce,e[13]),(!rt||8192&n[0]&&ge!==(ge=e[13]+" structure"))&&D(de,"title",ge),(!rt||4096&n[0]&&ve!==(ve=!e[12]))&&(de.disabled=ve),(!rt||8192&n[0]&&$e!==($e=e[13]+" object"))&&D(we,"title",$e),(!rt||2048&n[0]&&ke!==(ke=!e[11]))&&(we.disabled=ke),(!rt||8192&n[0]&&Te!==(Te=e[13]+" array"))&&D(Ce,"title",Te),(!rt||1024&n[0]&&je!==(je=!e[10]))&&(Ce.disabled=je),(!rt||8192&n[0]&&Le!==(Le=e[13]+" value"))&&D(Ie,"title",Le),(!rt||512&n[0]&&ze!==(ze=!e[9]))&&(Ie.disabled=ze),(!rt||18&n[0]&&Qe!==(Qe=!e[1]||e[4]))&&(Je.disabled=Qe),(!rt||18&n[0]&&tt!==(tt=!e[1]||e[4]))&&(Ye.disabled=tt),e[0]?st?(st.p(e,n),1&n[0]&&Ae(st,1)):(st=L_(),st.c(),Ae(st,1),st.m(t,null)):st&&(Oe(),Me(st,1,1,(()=>{st=null})),Ee())},i(e){rt||(Ae(i.$$.fragment,e),Ae(c.$$.fragment,e),Ae(p.$$.fragment,e),Ae(g.$$.fragment,e),Ae(w.$$.fragment,e),Ae(I.$$.fragment,e),Ae(F.$$.fragment,e),Ae(J.$$.fragment,e),Ae(Y.$$.fragment,e),Ae(re.$$.fragment,e),Ae(Ke.$$.fragment,e),Ae(Ze.$$.fragment,e),Ae(st),rt=!0)},o(e){Me(i.$$.fragment,e),Me(c.$$.fragment,e),Me(p.$$.fragment,e),Me(g.$$.fragment,e),Me(w.$$.fragment,e),Me(I.$$.fragment,e),Me(F.$$.fragment,e),Me(J.$$.fragment,e),Me(Y.$$.fragment,e),Me(re.$$.fragment,e),Me(Ke.$$.fragment,e),Me(Ze.$$.fragment,e),Me(st),rt=!1},d(n){n&&O(t),Fe(i),Fe(c),Fe(p),Fe(g),Fe(w),Fe(I),Fe(F),Fe(J),Fe(Y),Fe(re),Fe(Ke),Fe(Ze),st&&st.d(),e[58](null),it=!1,o(ot)}}}function B_(e,t,n){let r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,{json:k}=t,{state:S}=t,{selection:C}=t,{showTip:_}=t,{onCloseContextMenu:O}=t,{onEditKey:E}=t,{onEditValue:A}=t,{onToggleEnforceString:M}=t,{onCut:P}=t,{onCopy:T}=t,{onPaste:j}=t,{onRemove:N}=t,{onDuplicate:I}=t,{onExtract:R}=t,{onInsertBefore:D}=t,{onInsert:L}=t,{onConvert:z}=t,{onInsertAfter:B}=t,{onSort:V}=t,{onTransform:F}=t;function q(){O(),A()}function H(){O(),M()}function W(){O(),P(!0)}function U(){O(),P(!1)}function J(){O(),T(!0)}function K(){O(),T(!1)}function G(e){O(),a?z(e):L(e)}re((()=>{setTimeout((()=>{const e=[...$.querySelectorAll("button")].find((e=>!e.disabled));e&&e.focus()}))}));return e.$$set=e=>{"json"in e&&n(31,k=e.json),"state"in e&&n(32,S=e.state),"selection"in e&&n(33,C=e.selection),"showTip"in e&&n(0,_=e.showTip),"onCloseContextMenu"in e&&n(34,O=e.onCloseContextMenu),"onEditKey"in e&&n(35,E=e.onEditKey),"onEditValue"in e&&n(36,A=e.onEditValue),"onToggleEnforceString"in e&&n(37,M=e.onToggleEnforceString),"onCut"in e&&n(38,P=e.onCut),"onCopy"in e&&n(39,T=e.onCopy),"onPaste"in e&&n(40,j=e.onPaste),"onRemove"in e&&n(41,N=e.onRemove),"onDuplicate"in e&&n(42,I=e.onDuplicate),"onExtract"in e&&n(43,R=e.onExtract),"onInsertBefore"in e&&n(44,D=e.onInsertBefore),"onInsert"in e&&n(45,L=e.onInsert),"onConvert"in e&&n(46,z=e.onConvert),"onInsertAfter"in e&&n(47,B=e.onInsertAfter),"onSort"in e&&n(48,V=e.onSort),"onTransform"in e&&n(49,F=e.onTransform)},e.$$.update=()=>{1&e.$$.dirty[1]&&n(53,r=void 0!==k),4&e.$$.dirty[1]&&n(3,i=null!=C),8&e.$$.dirty[0]|4&e.$$.dirty[1]&&n(4,o=i&&ha(C.focusPath)),8&e.$$.dirty[0]|5&e.$$.dirty[1]&&n(51,s=i?Nn.getIn(k,C.focusPath):void 0),4194308&e.$$.dirty[1]&&n(1,a=r&&null!=C&&(C.type===il||C.type===nl||C.type===rl)),18&e.$$.dirty[0]|4194304&e.$$.dirty[1]&&n(16,l=r&&a&&!o),16&e.$$.dirty[0]|4194308&e.$$.dirty[1]&&n(15,c=r&&null!=C&&(C.type===il||C.type===rl)&&!o),16&e.$$.dirty[0]|4194309&e.$$.dirty[1]&&n(14,u=r&&null!=C&&pl(C)&&!o&&!Array.isArray(Nn.getIn(k,ca(C.focusPath)))),5242884&e.$$.dirty[1]&&n(2,h=r&&null!=C&&pl(C)&&!qn(s)),2&e.$$.dirty[0]&&n(52,d=a),2097152&e.$$.dirty[1]&&n(13,f=d?"Convert to":"Insert"),8&e.$$.dirty[0]|2097152&e.$$.dirty[1]&&n(12,p=!d&&i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(11,m=d?xl(C)&&!Fn(s):i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(10,g=d?xl(C)&&!Array.isArray(s):i),8&e.$$.dirty[0]|3145732&e.$$.dirty[1]&&n(9,v=d?xl(C)&&qn(s):i),6&e.$$.dirty[1]&&n(50,y=null!=C&&!0===Nn.getIn(S,C.focusPath.concat(on))),4&e.$$.dirty[0]|524288&e.$$.dirty[1]&&n(8,w=[{icon:Sc,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:q,disabled:!h},{icon:y?N_:j_,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:H,disabled:!h}]),2&e.$$.dirty[0]&&n(7,b=[{icon:Cc,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:W,disabled:!a},{icon:Cc,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:U,disabled:!a}]),2&e.$$.dirty[0]&&n(6,x=[{icon:vc,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:J,disabled:!a},{icon:vc,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:K,disabled:!a}])},[_,a,h,i,o,$,x,b,w,v,g,m,p,f,u,c,l,function(){O(),E()},q,W,J,function(){O(),j()},function(){O(),N()},function(){O(),I()},function(){O(),R()},G,function(){O(),V()},function(){O(),F()},function(){O(),D()},function(){O(),B()},function(e){const t=Kl(e).replace(/^Command\+/,"Ctrl+");if("Up"===t||"Down"===t||"Left"===t||"Right"===t){e.preventDefault();const n=Ul({allElements:Array.from($.querySelectorAll("button:not([disabled])")),currentElement:e.target,direction:t,hasPrio:e=>"jse-open-dropdown"!==e.getAttribute("data-type")});n&&n.focus()}},k,S,C,O,E,A,M,P,T,j,N,I,R,D,L,z,B,V,F,y,s,d,r,()=>G("structure"),()=>G("object"),()=>G("array"),()=>G("value"),function(e){ue[e?"unshift":"push"]((()=>{$=e,n(5,$)}))}]}class V_ extends He{constructor(e){super(),qe(this,e,B_,z_,u,{json:31,state:32,selection:33,showTip:0,onCloseContextMenu:34,onEditKey:35,onEditValue:36,onToggleEnforceString:37,onCut:38,onCopy:39,onPaste:40,onRemove:41,onDuplicate:42,onExtract:43,onInsertBefore:44,onInsert:45,onConvert:46,onInsertAfter:47,onSort:48,onTransform:49},null,[-1,-1,-1])}}
/*!
      Copyright (c) 2018 Jed Watson.
      Licensed under the MIT License (MIT), see
      http://jedwatson.github.io/classnames
    */var F_=Tn((function(e){!function(){var t={}.hasOwnProperty;function n(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&e.push(s)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var a in i)t.call(i,a)&&i[a]&&e.push(a);else e.push(i.toString())}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n}()}));function q_(e,t,n){const r=e.slice();return r[12]=t[n],r}function H_(e){let t,n,r,i,o,s,a,l,c=e[12].start+"",u=e[12].end+"";function h(){return e[11](e[12])}return{c(){t=A("button"),n=P("show "),r=P(c),i=P("-"),o=P(u),s=T(),D(t,"type","button"),D(t,"class","jse-expand-items svelte-1knbf5w")},m(e,c){_(e,t,c),k(t,n),k(t,r),k(t,i),k(t,o),k(t,s),a||(l=N(t,"click",h),a=!0)},p(t,n){e=t,16&n&&c!==(c=e[12].start+"")&&V(r,c),16&n&&u!==(u=e[12].end+"")&&V(o,u)},d(e){e&&O(t),a=!1,l()}}}function W_(t){let n,r,i,o,s,a,l,c,u,h,d,f=t[4],p=[];for(let e=0;e<f.length;e+=1)p[e]=H_(q_(t,f,e));return{c(){n=A("div"),r=A("div"),i=A("div"),o=P("Items "),s=P(t[3]),a=P("-"),l=P(t[2]),c=T();for(let e=0;e<p.length;e+=1)p[e].c();D(i,"class","jse-text svelte-1knbf5w"),D(n,"class","jse-collapsed-items svelte-1knbf5w"),D(n,"style",u=U_(t[0].length+2)),U(n,"jse-selected",t[5])},m(e,t){_(e,n,t),k(n,r),k(r,i),k(i,o),k(i,s),k(i,a),k(i,l),k(r,c);for(let e=0;e<p.length;e+=1)p[e].m(r,null);h||(d=N(n,"mousemove",J_),h=!0)},p(e,[t]){if(8&t&&V(s,e[3]),4&t&&V(l,e[2]),19&t){let n;for(f=e[4],n=0;n<f.length;n+=1){const i=q_(e,f,n);p[n]?p[n].p(i,t):(p[n]=H_(i),p[n].c(),p[n].m(r,null))}for(;n<p.length;n+=1)p[n].d(1);p.length=f.length}1&t&&u!==(u=U_(e[0].length+2))&&D(n,"style",u),32&t&&U(n,"jse-selected",e[5])},i:e,o:e,d(e){e&&O(n),E(p,e),h=!1,d()}}}function U_(e){return`margin-left: calc(${e} * var(--jse-indent-size))`}function J_(e){e.stopPropagation()}function K_(e,t,n){let r,i,o,s,a,{visibleSections:l}=t,{sectionIndex:c}=t,{total:u}=t,{path:h}=t,{selection:d}=t,{onExpandSection:f}=t;return e.$$set=e=>{"visibleSections"in e&&n(6,l=e.visibleSections),"sectionIndex"in e&&n(7,c=e.sectionIndex),"total"in e&&n(8,u=e.total),"path"in e&&n(0,h=e.path),"selection"in e&&n(9,d=e.selection),"onExpandSection"in e&&n(1,f=e.onExpandSection)},e.$$.update=()=>{192&e.$$.dirty&&n(10,r=l[c]),1024&e.$$.dirty&&n(3,i=r.end),448&e.$$.dirty&&n(2,o=l[c+1]?l[c+1].start:u),521&e.$$.dirty&&n(5,s=!(!d||!d.pathsMap)&&!0===d.pathsMap[Nn.compileJSONPointer(h.concat(i))]),12&e.$$.dirty&&n(4,a=function(e,t){const n={start:e,end:Math.min(ja(e),t)},r=Math.max(Na((e+t)/2),e),i={start:r,end:Math.min(ja(r),t)},o=Na(t),s=o===t?o-cn:o,a={start:Math.max(s,e),end:t},l=[n],c=i.start>=n.end&&i.end<=a.start;return c&&l.push(i),a.start>=(c?i.end:n.end)&&l.push(a),l}(i,o))},[h,f,o,i,a,s,l,c,u,d,r,e=>f(h,e)]}class G_ extends He{constructor(e){super(),qe(this,e,K_,W_,u,{visibleSections:6,sectionIndex:7,total:8,path:0,selection:9,onExpandSection:1})}}function Q_(e){let t,n,r,i,o;return n=new ru({props:{data:cc}}),{c(){t=A("button"),Be(n.$$.fragment),D(t,"type","button"),D(t,"class","jse-context-menu-button svelte-dol684"),D(t,"title",yn),U(t,"jse-selected",e[0])},m(s,a){_(s,t,a),Ve(n,t,null),r=!0,i||(o=N(t,"click",e[1]),i=!0)},p(e,[n]){1&n&&U(t,"jse-selected",e[0])},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n),i=!1,o()}}}function X_(e,t,n){let{selected:r}=t,{onContextMenu:i}=t;return e.$$set=e=>{"selected"in e&&n(0,r=e.selected),"onContextMenu"in e&&n(2,i=e.onContextMenu)},[r,function(e){let t=e.target;for(;t&&"BUTTON"!==t.nodeName;)t=t.parentNode;t&&i({anchor:t,left:0,top:0,width:_n,height:Cn,offsetTop:2,offsetLeft:0,showTip:!0})},i]}class Y_ extends He{constructor(e){super(),qe(this,e,X_,Q_,u,{selected:0,onContextMenu:2})}}function Z_(e,t,n){const r=e.slice();return r[3]=t[n],r}function eO(e){let t,n,r=Nl(e[3].text)+"";return{c(){t=A("span"),n=P(r),D(t,"class","jse-highlight svelte-s6kbew"),U(t,"jse-active",e[3].active)},m(e,r){_(e,t,r),k(t,n)},p(e,i){1&i&&r!==(r=Nl(e[3].text)+"")&&V(n,r),1&i&&U(t,"jse-active",e[3].active)},d(e){e&&O(t)}}}function tO(e){let t,n=e[3].text+"";return{c(){t=P(n)},m(e,n){_(e,t,n)},p(e,r){1&r&&n!==(n=e[3].text+"")&&V(t,n)},d(e){e&&O(t)}}}function nO(e){let t;function n(e,t){return"normal"===e[3].type?tO:eO}let r=n(e),i=r(e);return{c(){i.c(),t=j()},m(e,n){i.m(e,n),_(e,t,n)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&O(t)}}}function rO(t){let n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=nO(Z_(t,r,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=j()},m(e,t){for(let n=0;n<i.length;n+=1)i[n].m(e,t);_(e,n,t)},p(e,[t]){if(1&t){let o;for(r=e[0],o=0;o<r.length;o+=1){const s=Z_(e,r,o);i[o]?i[o].p(s,t):(i[o]=nO(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:e,o:e,d(e){E(i,e),e&&O(n)}}}function iO(e,t,n){let r,{text:i}=t,{searchResult:o}=t;return e.$$set=e=>{"text"in e&&n(1,i=e.text),"searchResult"in e&&n(2,o=e.searchResult)},e.$$.update=()=>{6&e.$$.dirty&&n(0,r=function(e,t){const n=[];let r=0;for(const i of t){const t=e.slice(r,i.start);""!==t&&n.push({type:"normal",text:t,active:!1});const o=e.slice(i.start,i.end);n.push({type:"highlight",text:o,active:i.active}),r=i.end}const i=na(t);return i.end<e.length&&n.push({type:"normal",text:e.slice(i.end),active:!1}),n}(String(i),o))},[r,i,o]}class oO extends He{constructor(e){super(),qe(this,e,iO,rO,a,{text:1,searchResult:2})}}function sO(t){let n,r,i,s;return{c(){n=A("div"),D(n,"class",r=g(F_("jse-editable-div",t[2],{"jse-short-text":t[0]}))+" svelte-rw77oa"),D(n,"contenteditable","true"),D(n,"spellcheck","false")},m(e,r){_(e,n,r),t[13](n),i||(s=[N(n,"input",t[3]),N(n,"keydown",t[4]),N(n,"paste",t[5]),N(n,"blur",t[6])],i=!0)},p(e,[t]){5&t&&r!==(r=g(F_("jse-editable-div",e[2],{"jse-short-text":e[0]}))+" svelte-rw77oa")&&D(n,"class",r)},i:e,o:e,d(e){e&&O(n),t[13](null),i=!1,o(s)}}}function aO(e,t,n){const r=zt("jsoneditor:EditableDiv");let i,{value:o}=t,{shortText:s=!1}=t,{onChange:a}=t,{onCancel:l}=t,{onFind:c}=t,{onPaste:u=li}=t,{onValueClass:h=(()=>"")}=t,d=h(o),f=!1;function p(){return function(e){return e.replace(/\n$/,"")}(i.innerText)}function m(e){n(1,i.innerText=Nl(e),i)}return re((()=>{r("onMount",{value:o}),m(o),setTimeout((()=>zl(i)))})),ie((()=>{const e=p();r("onDestroy",{closed:f,value:o,newValue:e}),f||e===o||a(e,On)})),e.$$set=e=>{"value"in e&&n(7,o=e.value),"shortText"in e&&n(0,s=e.shortText),"onChange"in e&&n(8,a=e.onChange),"onCancel"in e&&n(9,l=e.onCancel),"onFind"in e&&n(10,c=e.onFind),"onPaste"in e&&n(11,u=e.onPaste),"onValueClass"in e&&n(12,h=e.onValueClass)},[s,i,d,function(){const e=p();""===e&&m(""),n(2,d=h(e))},function(e){e.stopPropagation();const t=Kl(e).replace(/^Command\+/,"Ctrl+");if("Escape"===t&&(f=!0,l()),"Enter"===t||"Tab"===t){f=!0;const e=p();a(e,An)}"Ctrl+F"===t&&(e.preventDefault(),c(!1)),"Ctrl+H"===t&&(e.preventDefault(),c(!0))},function(e){if(!u)return;const t=e.clipboardData.getData("text/plain");u(t)},function(){const e=document.hasFocus(),t=p();r("handleBlur",{hasFocus:e,closed:f,value:o,newValue:t}),document.hasFocus()&&!f&&(f=!0,t!==o?a(t,En):l())},o,a,l,c,u,h,function(e){ue[e?"unshift":"push"]((()=>{i=e,n(1,i)}))}]}class lO extends He{constructor(e){super(),qe(this,e,aO,sO,u,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}function cO(e){let t,n,r,i,o,s,a;const l=[dO,hO],c=[];function u(e,t){return e[1]?0:1}return n=u(e),r=c[n]=l[n](e),{c(){t=A("div"),r.c(),D(t,"data-type","selectable-key"),D(t,"class",i=g(e[5](e[0]))+" svelte-566egb")},m(r,i){_(r,t,i),c[n].m(t,null),o=!0,s||(a=N(t,"dblclick",e[4]),s=!0)},p(e,s){let a=n;n=u(e),n===a?c[n].p(e,s):(Oe(),Me(c[a],1,1,(()=>{c[a]=null})),Ee(),r=c[n],r?r.p(e,s):(r=c[n]=l[n](e),r.c()),Ae(r,1),r.m(t,null)),(!o||1&s&&i!==(i=g(e[5](e[0]))+" svelte-566egb"))&&D(t,"class",i)},i(e){o||(Ae(r),o=!0)},o(e){Me(r),o=!1},d(e){e&&O(t),c[n].d(),s=!1,a()}}}function uO(e){let t,n;return t=new lO({props:{value:e[2].normalization.escapeValue(e[0]),shortText:!0,onChange:e[6],onCancel:e[7],onFind:e[2].onFind}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};5&n&&(r.value=e[2].normalization.escapeValue(e[0])),4&n&&(r.onFind=e[2].onFind),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function hO(t){let n,r=Nl(t[2].normalization.escapeValue(t[0]))+"";return{c(){n=P(r)},m(e,t){_(e,n,t)},p(e,t){5&t&&r!==(r=Nl(e[2].normalization.escapeValue(e[0]))+"")&&V(n,r)},i:e,o:e,d(e){e&&O(n)}}}function dO(e){let t,n;return t=new oO({props:{text:e[2].normalization.escapeValue(e[0]),searchResult:e[1]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};5&n&&(r.text=e[2].normalization.escapeValue(e[0])),2&n&&(r.searchResult=e[1]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function fO(e){let t,n,r,i;const o=[uO,cO],s=[];function a(e,t){return e[3]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=j()},m(e,n){s[t].m(e,n),_(e,r,n),i=!0},p(e,[i]){let l=t;t=a(e),t===l?s[t].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Ae(n,1),n.m(r.parentNode,r))},i(e){i||(Ae(n),i=!0)},o(e){Me(n),i=!1},d(e){s[t].d(e),e&&O(r)}}}function pO(e,t,n){let r,i,{path:o}=t,{key:s}=t,{onUpdateKey:a}=t,{selection:l}=t,{searchResult:c}=t,{context:u}=t;return e.$$set=e=>{"path"in e&&n(8,o=e.path),"key"in e&&n(0,s=e.key),"onUpdateKey"in e&&n(9,a=e.onUpdateKey),"selection"in e&&n(10,l=e.selection),"searchResult"in e&&n(1,c=e.searchResult),"context"in e&&n(2,u=e.context)},e.$$.update=()=>{1024&e.$$.dirty&&n(11,r=l&&l.type===nl),3076&e.$$.dirty&&n(3,i=!u.readOnly&&r&&l&&!0===l.edit)},[s,c,u,i,function(e){i||u.readOnly||(e.preventDefault(),u.onSelect({type:nl,path:o,edit:!0}))},function(e){return F_("jse-key",{"jse-empty":""===e})},function(e,t){const n=a(s,u.normalization.unescapeValue(e)),r=ca(o).concat(n);t===An&&u.onSelect({type:nl,path:r,next:!0}),t===En&&u.onSelect({type:nl,path:r},{ensureFocus:!1})},function(){u.onSelect({type:nl,path:o})},o,a,l,r]}class mO extends He{constructor(e){super(),qe(this,e,pO,fO,u,{path:8,key:0,onUpdateKey:9,selection:10,searchResult:1,context:2})}}function gO(e,t,n){const r=e.slice();return r[9]=t[n],r}function vO(e){let t,r,i;const o=[e[9].props];var s=e[9].component;function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Be(t.$$.fragment),r=j()},m(e,n){t&&Ve(t,e,n),_(e,r,n),i=!0},p(e,n){const i=1&n?De(o,[Le(e[9].props)]):{};if(s!==(s=e[9].component)){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}s?(t=new s(a()),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&Ae(t.$$.fragment,e),i=!0)},o(e){t&&Me(t.$$.fragment,e),i=!1},d(e){e&&O(r),t&&Fe(t,e)}}}function yO(e){let t,n,r=e[0],i=[];for(let t=0;t<r.length;t+=1)i[t]=vO(gO(e,r,t));const o=e=>Me(i[e],1,1,(()=>{i[e]=null}));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);_(e,t,r),n=!0},p(e,[n]){if(1&n){let s;for(r=e[0],s=0;s<r.length;s+=1){const o=gO(e,r,s);i[s]?(i[s].p(o,n),Ae(i[s],1)):(i[s]=vO(o),i[s].c(),Ae(i[s],1),i[s].m(t.parentNode,t))}for(Oe(),s=r.length;s<i.length;s+=1)o(s);Ee()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Ae(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Me(i[e]);n=!1},d(e){E(i,e),e&&O(t)}}}function wO(e,t,n){let r,i,o,{path:s}=t,{value:a}=t,{context:l}=t,{enforceString:c}=t,{selection:u}=t,{searchResult:h}=t;return e.$$set=e=>{"path"in e&&n(1,s=e.path),"value"in e&&n(2,a=e.value),"context"in e&&n(3,l=e.context),"enforceString"in e&&n(4,c=e.enforceString),"selection"in e&&n(5,u=e.selection),"searchResult"in e&&n(6,h=e.searchResult)},e.$$.update=()=>{34&e.$$.dirty&&n(8,r=!(!u||u.type!==rl)&&da(u.focusPath,s)),296&e.$$.dirty&&n(7,i=!l.readOnly&&r&&u&&!0===u.edit),510&e.$$.dirty&&n(0,o=l.onRenderValue({path:s,value:a,readOnly:l.readOnly,enforceString:c,isSelected:r,isEditing:i,normalization:l.normalization,selection:u,searchResult:h,onPatch:l.onPatch,onPasteJson:l.onPasteJson,onSelect:l.onSelect,onFind:l.onFind}))},[o,s,a,l,c,u,h,i,r]}class bO extends He{constructor(e){super(),qe(this,e,wO,yO,u,{path:1,value:2,context:3,enforceString:4,selection:5,searchResult:6})}}const xO={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function $O(t){let n,r;return{c(){n=A("div"),r=P(t[0]),D(n,"class","jse-tooltip svelte-r4omvg")},m(e,t){_(e,n,t),k(n,r)},p(e,[t]){1&t&&V(r,e[0])},i:e,o:e,d(e){e&&O(n)}}}function kO(e,t,n){let{text:r}=t;return e.$$set=e=>{"text"in e&&n(0,r=e.text)},[r]}class SO extends He{constructor(e){super(),qe(this,e,kO,$O,a,{text:0})}}function CO(e,{text:t,openAbsolutePopup:n,closeAbsolutePopup:r}){function i(){n(SO,{text:t},{position:"top",width:10*t.length,offsetTop:3,anchor:e,closeOnOuterClick:!0})}function o(){r()}return e.addEventListener("mouseover",i),e.addEventListener("mouseout",o),{destroy(){e.removeEventListener("mouseover",i),e.removeEventListener("mouseout",o)}}}function _O(e){let t,n,r,i,a,l;return n=new ru({props:{data:Ec}}),{c(){t=A("button"),Be(n.$$.fragment),D(t,"type","button"),D(t,"class","jse-validation-error svelte-1q62mys")},m(o,c){_(o,t,c),Ve(n,t,null),i=!0,a||(l=[N(t,"click",(function(){s(e[0])&&e[0].apply(this,arguments)})),v(r=CO.call(null,t,{text:e[1],...e[2]}))],a=!0)},p(t,[n]){e=t,r&&s(r.update)&&2&n&&r.update.call(null,{text:e[1],...e[2]})},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n),a=!1,o(l)}}}function OO(e,t,n){let r;const i=ae("absolute-popup");let{validationError:o}=t,{onExpand:s}=t;return e.$$set=e=>{"validationError"in e&&n(3,o=e.validationError),"onExpand"in e&&n(0,s=e.onExpand)},e.$$.update=()=>{8&e.$$.dirty&&n(1,r=o.isChildError?"Contains invalid data":o.message)},[s,r,i,o]}class EO extends He{constructor(e){super(),qe(this,e,OO,_O,a,{validationError:3,onExpand:0})}}function AO({fullJson:e,fullState:t,fullSelection:n,deltaY:r,items:i}){const o=r<0?function({items:e,fullSelection:t,deltaY:n}){const r=sl(t),i=e.findIndex((e=>da(e.path,r))),o=()=>{var t;return null===(t=e[s-1])||void 0===t?void 0:t.height};let s=i,a=0;for(;void 0!==o()&&Math.abs(n)>a+o()/2;)a+=o(),s-=1;const l=e[s].path,c=s-i;return s!==i&&void 0!==e[s]?{beforePath:l,indexOffset:c}:void 0}({fullSelection:n,deltaY:r,items:i}):function({items:e,fullSelection:t,deltaY:n}){var r;const i=al(t),o=e.findIndex((e=>da(e.path,i))),s=()=>{var t;return null===(t=e[l+1])||void 0===t?void 0:t.height};let a=0,l=o;for(;void 0!==s()&&Math.abs(n)>a+s()/2;)a+=s(),l+=1;const c="number"==typeof na(i),u=null===(r=e[c?l:l+1])||void 0===r?void 0:r.path,h=l-o;return u?{beforePath:u,indexOffset:h}:{append:!0,indexOffset:h}}({fullSelection:n,deltaY:r,items:i});if(!o||0===o.indexOffset)return{operations:void 0,updatedValue:void 0,updatedState:void 0,updatedSelection:void 0,updatedFullSelection:void 0,indexOffset:0};const s=function(e,t,n,r){const{beforePath:i,append:o}=r,s=ca(n.focusPath),a=Nn.getIn(e,s);if(o||i&&gl(i,s)&&i.length>s.length){const e=n.paths?aa(n.paths):n.focusPath,r=n.paths?na(n.paths):n.focusPath,l=na(e),c=na(r),u=i?i[s.length]:void 0;if(!Fn(a)){const e=l,t=u,n=c-e+1;return _a(n,t<e?n=>({op:"move",from:Nn.compileJSONPointer(s.concat(e+n)),path:Nn.compileJSONPointer(s.concat(t+n))}):()=>({op:"move",from:Nn.compileJSONPointer(s.concat(e)),path:Nn.compileJSONPointer(s.concat(t))}))}{const e=Nn.getIn(t,s.concat(tn)),n=e.indexOf(l),r=e.indexOf(c),i=o?e.length:e.indexOf(u);if(-1!==n&&-1!==r&&-1!==i)return i>n?[...e.slice(n,r+1),...e.slice(i,e.length)].map((e=>YC(s,e))):[...e.slice(i,n),...e.slice(r+1,e.length)].map((e=>YC(s,e)))}}}(e,t,n,o),a=Va(e,t,s),l=ca(sl(n)),c=Nn.getIn(e,l);if(Array.isArray(c)){const r=function({items:e,fullJson:t,fullState:n,fullSelection:r,indexOffset:i}){var o,s;const a=sl(r),l=al(r),c=e.findIndex((e=>da(e.path,a))),u=e.findIndex((e=>da(e.path,l))),h=null===(o=e[c+i])||void 0===o?void 0:o.path,d=null===(s=e[u+i])||void 0===s?void 0:s.path;return yl(t,n,{type:il,anchorPath:h,focusPath:d})}({items:i,fullJson:e,fullState:t,fullSelection:n,indexOffset:o.indexOffset}),c=bl(e,r),u=Nn.getIn(c,l);return{operations:s,updatedValue:Nn.getIn(a.json,l),updatedState:Nn.getIn(a.state,l),updatedSelection:u,updatedFullSelection:r,indexOffset:o.indexOffset}}return{operations:s,updatedValue:Nn.getIn(a.json,l),updatedState:Nn.getIn(a.state,l),updatedSelection:void 0,updatedFullSelection:void 0,indexOffset:o.indexOffset}}const MO=e=>({}),PO=e=>({});function TO(e,t,n){const r=e.slice();return r[57]=t[n],r}const jO=e=>({}),NO=e=>({});function IO(e,t,n){const r=e.slice();return r[51]=t[n],r[53]=n,r}function RO(e,t,n){const r=e.slice();return r[54]=t[n],r[56]=n,r}const DO=e=>({}),LO=e=>({});function zO(e){let t,n,r,i,o,s,a,l,c,u=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1]);const d=e[39].identifier,g=h(d,e,e[40],PO);let v=!e[10]&&FO();o=new bO({props:{path:e[1],value:e[0],enforceString:e[5]?e[5][on]:void 0,selection:e[7],searchResult:e[2]?e[2][rn]:void 0,context:e[4]}});let y=u&&qO(e),w=e[15]&&HO(e),b=!e[10]&&WO(e);return{c(){t=A("div"),n=A("div"),g&&g.c(),r=T(),v&&v.c(),i=T(),Be(o.$$.fragment),s=T(),y&&y.c(),a=T(),w&&w.c(),l=T(),b&&b.c(),D(n,"class","jse-contents svelte-uj4yd7"),D(t,"class","jse-contents-outer svelte-uj4yd7"),D(t,"style",e[13])},m(e,u){_(e,t,u),k(t,n),g&&g.m(n,null),k(n,r),v&&v.m(n,null),k(n,i),Ve(o,n,null),k(n,s),y&&y.m(n,null),k(t,a),w&&w.m(t,null),k(t,l),b&&b.m(t,null),c=!0},p(e,r){g&&g.p&&(!c||512&r[1])&&p(g,d,e,e[40],c?f(d,e[40],r,MO):m(e[40]),PO),e[10]?v&&(v.d(1),v=null):v||(v=FO(),v.c(),v.m(n,i));const s={};2&r[0]&&(s.path=e[1]),1&r[0]&&(s.value=e[0]),32&r[0]&&(s.enforceString=e[5]?e[5][on]:void 0),128&r[0]&&(s.selection=e[7]),4&r[0]&&(s.searchResult=e[2]?e[2][rn]:void 0),16&r[0]&&(s.context=e[4]),o.$set(s),146&r[0]&&(u=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1])),u?y?(y.p(e,r),146&r[0]&&Ae(y,1)):(y=qO(e),y.c(),Ae(y,1),y.m(n,null)):y&&(Oe(),Me(y,1,1,(()=>{y=null})),Ee()),e[15]?w?(w.p(e,r),32768&r[0]&&Ae(w,1)):(w=HO(e),w.c(),Ae(w,1),w.m(t,l)):w&&(Oe(),Me(w,1,1,(()=>{w=null})),Ee()),e[10]?b&&(b.d(1),b=null):b?b.p(e,r):(b=WO(e),b.c(),b.m(t,null)),(!c||8192&r[0])&&D(t,"style",e[13])},i(e){c||(Ae(g,e),Ae(o.$$.fragment,e),Ae(y),Ae(w),c=!0)},o(e){Me(g,e),Me(o.$$.fragment,e),Me(y),Me(w),c=!1},d(e){e&&O(t),g&&g.d(e),v&&v.d(),Fe(o),y&&y.d(),w&&w.d(),b&&b.d()}}}function BO(e){let t,n,r,i,o,s,a,l,c,u,d,g,v,y,w,b,x,$,S=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1]);const C=[JO,UO],E=[];function M(e,t){return e[12]?0:1}i=M(e),o=E[i]=C[i](e);const P=e[39].identifier,I=h(P,e,e[40],NO);let R=!e[10]&&KO();function L(e,t){return e[12]?QO:GO}let z=L(e),B=z(e),V=S&&XO(e),F=e[15]&&(!e[12]||!e[15].isChildError)&&YO(e);function q(e,t){return e[12]?eE:e[10]?void 0:ZO}let H=q(e),W=H&&H(e),U=e[12]&&tE(e);return{c(){t=A("div"),n=A("div"),r=A("button"),o.c(),s=T(),I&&I.c(),a=T(),R&&R.c(),l=T(),c=A("div"),u=A("div"),B.c(),d=T(),V&&V.c(),g=T(),F&&F.c(),v=T(),W&&W.c(),y=T(),U&&U.c(),w=j(),D(r,"type","button"),D(r,"class","jse-expand svelte-uj4yd7"),D(r,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),D(u,"class","jse-meta-inner svelte-uj4yd7"),D(c,"class","jse-meta svelte-uj4yd7"),D(c,"data-type","selectable-value"),D(n,"class","jse-header svelte-uj4yd7"),D(t,"class","jse-header-outer svelte-uj4yd7"),D(t,"style",e[13])},m(o,h){_(o,t,h),k(t,n),k(n,r),E[i].m(r,null),k(n,s),I&&I.m(n,null),k(n,a),R&&R.m(n,null),k(n,l),k(n,c),k(c,u),B.m(u,null),k(n,d),V&&V.m(n,null),k(t,g),F&&F.m(t,null),k(t,v),W&&W.m(t,null),_(o,y,h),U&&U.m(o,h),_(o,w,h),b=!0,x||($=N(r,"click",e[23]),x=!0)},p(e,s){let a=i;i=M(e),i===a?E[i].p(e,s):(Oe(),Me(E[a],1,1,(()=>{E[a]=null})),Ee(),o=E[i],o?o.p(e,s):(o=E[i]=C[i](e),o.c()),Ae(o,1),o.m(r,null)),I&&I.p&&(!b||512&s[1])&&p(I,P,e,e[40],b?f(P,e[40],s,jO):m(e[40]),NO),e[10]?R&&(R.d(1),R=null):R||(R=KO(),R.c(),R.m(n,l)),z===(z=L(e))&&B?B.p(e,s):(B.d(1),B=z(e),B&&(B.c(),B.m(u,null))),146&s[0]&&(S=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1])),S?V?(V.p(e,s),146&s[0]&&Ae(V,1)):(V=XO(e),V.c(),Ae(V,1),V.m(n,null)):V&&(Oe(),Me(V,1,1,(()=>{V=null})),Ee()),!e[15]||e[12]&&e[15].isChildError?F&&(Oe(),Me(F,1,1,(()=>{F=null})),Ee()):F?(F.p(e,s),36864&s[0]&&Ae(F,1)):(F=YO(e),F.c(),Ae(F,1),F.m(t,v)),H===(H=q(e))&&W?W.p(e,s):(W&&W.d(1),W=H&&H(e),W&&(W.c(),W.m(t,null))),(!b||8192&s[0])&&D(t,"style",e[13]),e[12]?U?(U.p(e,s),4096&s[0]&&Ae(U,1)):(U=tE(e),U.c(),Ae(U,1),U.m(w.parentNode,w)):U&&(Oe(),Me(U,1,1,(()=>{U=null})),Ee())},i(e){b||(Ae(o),Ae(I,e),Ae(V),Ae(F),Ae(U),b=!0)},o(e){Me(o),Me(I,e),Me(V),Me(F),Me(U),b=!1},d(e){e&&O(t),E[i].d(),I&&I.d(e),R&&R.d(),B.d(),V&&V.d(),F&&F.d(),W&&W.d(),e&&O(y),U&&U.d(e),e&&O(w),x=!1,$()}}}function VO(e){let t,n,r,i,o,s,a,l,c,u,d,g,v,y,w,b,x,$,S=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1]);const C=[lE,aE],E=[];function M(e,t){return e[12]?0:1}i=M(e),o=E[i]=C[i](e);const P=e[39].identifier,I=h(P,e,e[40],LO);let R=!e[10]&&cE();function L(e,t){return e[12]?hE:uE}let z=L(e),B=z(e),V=S&&dE(e),F=e[15]&&(!e[12]||!e[15].isChildError)&&fE(e);function q(e,t){return e[12]?mE:pE}let H=q(e),W=H(e),U=e[12]&&gE(e);return{c(){t=A("div"),n=A("div"),r=A("button"),o.c(),s=T(),I&&I.c(),a=T(),R&&R.c(),l=T(),c=A("div"),u=A("div"),B.c(),d=T(),V&&V.c(),g=T(),F&&F.c(),v=T(),W.c(),y=T(),U&&U.c(),w=j(),D(r,"type","button"),D(r,"class","jse-expand svelte-uj4yd7"),D(r,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),D(u,"class","jse-meta-inner svelte-uj4yd7"),D(u,"data-type","selectable-value"),D(c,"class","jse-meta svelte-uj4yd7"),D(n,"class","jse-header svelte-uj4yd7"),D(t,"class","jse-header-outer svelte-uj4yd7"),D(t,"style",e[13])},m(o,h){_(o,t,h),k(t,n),k(n,r),E[i].m(r,null),k(n,s),I&&I.m(n,null),k(n,a),R&&R.m(n,null),k(n,l),k(n,c),k(c,u),B.m(u,null),k(n,d),V&&V.m(n,null),k(t,g),F&&F.m(t,null),k(t,v),W.m(t,null),_(o,y,h),U&&U.m(o,h),_(o,w,h),b=!0,x||($=N(r,"click",e[23]),x=!0)},p(e,s){let a=i;i=M(e),i===a?E[i].p(e,s):(Oe(),Me(E[a],1,1,(()=>{E[a]=null})),Ee(),o=E[i],o?o.p(e,s):(o=E[i]=C[i](e),o.c()),Ae(o,1),o.m(r,null)),I&&I.p&&(!b||512&s[1])&&p(I,P,e,e[40],b?f(P,e[40],s,DO):m(e[40]),LO),e[10]?R&&(R.d(1),R=null):R||(R=cE(),R.c(),R.m(n,l)),z===(z=L(e))&&B?B.p(e,s):(B.d(1),B=z(e),B&&(B.c(),B.m(u,null))),146&s[0]&&(S=!e[4].readOnly&&e[7]&&(e[7].type===rl||e[7].type===il)&&!e[7].edit&&da(e[7].focusPath,e[1])),S?V?(V.p(e,s),146&s[0]&&Ae(V,1)):(V=dE(e),V.c(),Ae(V,1),V.m(n,null)):V&&(Oe(),Me(V,1,1,(()=>{V=null})),Ee()),!e[15]||e[12]&&e[15].isChildError?F&&(Oe(),Me(F,1,1,(()=>{F=null})),Ee()):F?(F.p(e,s),36864&s[0]&&Ae(F,1)):(F=fE(e),F.c(),Ae(F,1),F.m(t,v)),H===(H=q(e))&&W?W.p(e,s):(W.d(1),W=H(e),W&&(W.c(),W.m(t,null))),(!b||8192&s[0])&&D(t,"style",e[13]),e[12]?U?(U.p(e,s),4096&s[0]&&Ae(U,1)):(U=gE(e),U.c(),Ae(U,1),U.m(w.parentNode,w)):U&&(Oe(),Me(U,1,1,(()=>{U=null})),Ee())},i(e){b||(Ae(o),Ae(I,e),Ae(V),Ae(F),Ae(U),b=!0)},o(e){Me(o),Me(I,e),Me(V),Me(F),Me(U),b=!1},d(e){e&&O(t),E[i].d(),I&&I.d(e),R&&R.d(),B.d(),V&&V.d(),F&&F.d(),W.d(),e&&O(y),U&&U.d(e),e&&O(w),x=!1,$()}}}function FO(e){let t;return{c(){t=A("div"),t.textContent=":",D(t,"class","jse-separator svelte-uj4yd7")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function qO(e){let t,n,r;return n=new Y_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function HO(e){let t,n;return t=new EO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function WO(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),D(n,"data-type","insert-selection-area-after")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[32]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function UO(t){let n,r;return n=new ru({props:{data:uc}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function JO(t){let n,r;return n=new ru({props:{data:cc}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function KO(e){let t;return{c(){t=A("div"),t.textContent=":",D(t,"class","jse-separator svelte-uj4yd7")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function GO(e){let t,n,r,i,o,s,a,l,c,u,h=Object.keys(e[6]).length+"",d=1===Object.keys(e[6]).length?"prop":"props";return{c(){t=A("div"),t.textContent="{",n=T(),r=A("button"),i=P(h),o=T(),s=P(d),a=T(),l=A("div"),l.textContent="}",D(t,"class","jse-bracket svelte-uj4yd7"),D(r,"type","button"),D(r,"class","jse-tag svelte-uj4yd7"),D(l,"class","jse-bracket svelte-uj4yd7")},m(h,d){_(h,t,d),_(h,n,d),_(h,r,d),k(r,i),k(r,o),k(r,s),_(h,a,d),_(h,l,d),c||(u=N(r,"click",e[24]),c=!0)},p(e,t){64&t[0]&&h!==(h=Object.keys(e[6]).length+"")&&V(i,h),64&t[0]&&d!==(d=1===Object.keys(e[6]).length?"prop":"props")&&V(s,d)},d(e){e&&O(t),e&&O(n),e&&O(r),e&&O(a),e&&O(l),c=!1,u()}}}function QO(t){let n;return{c(){n=A("div"),n.textContent="{",D(n,"class","jse-bracket jse-expanded svelte-uj4yd7")},m(e,t){_(e,n,t)},p:e,d(e){e&&O(n)}}}function XO(e){let t,n,r;return n=new Y_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function YO(e){let t,n;return t=new EO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function ZO(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),D(n,"data-type","insert-selection-area-after")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[32]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function eE(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-inside svelte-uj4yd7"),D(n,"data-type","insert-selection-area-inside")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[31]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function tE(e){let t,n,r,i,o,s,a,l=[],c=new Map,u=!e[4].readOnly&&(e[9]===wn||e[19])&&nE(e),h=e[11];const d=e=>e[5][e[57]][Yt];for(let t=0;t<h.length;t+=1){let n=TO(e,h,t),r=d(n);c.set(r,l[t]=oE(r,n))}let f=!e[10]&&sE(e);return{c(){t=A("div"),u&&u.c(),n=T();for(let e=0;e<l.length;e+=1)l[e].c();r=T(),i=A("div"),o=A("div"),o.innerHTML='<div class="jse-bracket svelte-uj4yd7">}</div>',s=T(),f&&f.c(),D(t,"class","jse-props svelte-uj4yd7"),D(o,"data-type","selectable-value"),D(o,"class","jse-footer svelte-uj4yd7"),D(i,"class","jse-footer-outer svelte-uj4yd7"),D(i,"style",e[13])},m(e,c){_(e,t,c),u&&u.m(t,null),k(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);_(e,r,c),_(e,i,c),k(i,o),k(i,s),f&&f.m(i,null),a=!0},p(e,r){e[4].readOnly||e[9]!==wn&&!e[19]?u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee()):u?(u.p(e,r),524816&r[0]&&Ae(u,1)):(u=nE(e),u.c(),Ae(u,1),u.m(t,n)),306186622&r[0]&&(h=e[11],Oe(),l=Re(l,r,d,1,e,h,c,t,Ie,oE,null,TO),Ee()),e[10]?f&&(f.d(1),f=null):f?f.p(e,r):(f=sE(e),f.c(),f.m(i,null)),(!a||8192&r[0])&&D(i,"style",e[13])},i(e){if(!a){Ae(u);for(let e=0;e<h.length;e+=1)Ae(l[e]);a=!0}},o(e){Me(u);for(let e=0;e<l.length;e+=1)Me(l[e]);a=!1},d(e){e&&O(t),u&&u.d();for(let e=0;e<l.length;e+=1)l[e].d();e&&O(r),e&&O(i),f&&f.d()}}}function nE(e){let t,n,r,i;return n=new Y_({props:{selected:e[19],onContextMenu:e[33]}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-insert-area jse-inside svelte-uj4yd7"),D(t,"data-type","insert-selection-area-inside"),D(t,"style",r=CE(e[1].length+1)),D(t,"title",vn),U(t,"jse-hovered",e[9]===wn),U(t,"jse-selected",e[19])},m(e,r){_(e,t,r),Ve(n,t,null),i=!0},p(e,o){const s={};524288&o[0]&&(s.selected=e[19]),n.$set(s),(!i||2&o[0]&&r!==(r=CE(e[1].length+1)))&&D(t,"style",r),512&o[0]&&U(t,"jse-hovered",e[9]===wn),524288&o[0]&&U(t,"jse-selected",e[19])},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n)}}}function rE(e){let t,n;return t=new Y_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};16&n[0]&&(r.onContextMenu=e[4].onContextMenu),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function iE(e){let t,n,r,i,o,s=!e[4].readOnly&&$l(e[1],e[57],e[8]);n=new mO({props:{path:e[22](e[1].concat(e[57])),key:e[57],context:e[4],selection:e[8]?.[e[57]]?.[sn],searchResult:e[2]?.[e[57]]?.[nn],onUpdateKey:e[25]}});let a=s&&rE(e);return{c(){t=A("div"),Be(n.$$.fragment),r=T(),a&&a.c(),i=T(),D(t,"slot","identifier"),D(t,"class","jse-identifier svelte-uj4yd7")},m(e,s){_(e,t,s),Ve(n,t,null),k(t,r),a&&a.m(t,null),k(t,i),o=!0},p(e,r){const o={};2050&r[0]&&(o.path=e[22](e[1].concat(e[57]))),2048&r[0]&&(o.key=e[57]),16&r[0]&&(o.context=e[4]),2304&r[0]&&(o.selection=e[8]?.[e[57]]?.[sn]),2052&r[0]&&(o.searchResult=e[2]?.[e[57]]?.[nn]),n.$set(o),2322&r[0]&&(s=!e[4].readOnly&&$l(e[1],e[57],e[8])),s?a?(a.p(e,r),2322&r[0]&&Ae(a,1)):(a=rE(e),a.c(),Ae(a,1),a.m(t,i)):a&&(Oe(),Me(a,1,1,(()=>{a=null})),Ee())},i(e){o||(Ae(n.$$.fragment,e),Ae(a),o=!0)},o(e){Me(n.$$.fragment,e),Me(a),o=!1},d(e){e&&O(t),Fe(n),a&&a.d()}}}function oE(e,t){let n,r,i;return r=new OE({props:{value:t[6][t[57]],path:t[22](t[1].concat(t[57])),state:t[5][t[57]],selection:t[8]?t[8][t[57]]:void 0,searchResult:t[2]?t[2][t[57]]:void 0,validationErrors:t[3]?t[3][t[57]]:void 0,context:t[4],onDragSelectionStart:t[28],$$slots:{identifier:[iE]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=j(),Be(r.$$.fragment),this.first=n},m(e,t){_(e,n,t),Ve(r,e,t),i=!0},p(e,n){t=e;const i={};2112&n[0]&&(i.value=t[6][t[57]]),2050&n[0]&&(i.path=t[22](t[1].concat(t[57]))),2080&n[0]&&(i.state=t[5][t[57]]),2304&n[0]&&(i.selection=t[8]?t[8][t[57]]:void 0),2052&n[0]&&(i.searchResult=t[2]?t[2][t[57]]:void 0),2056&n[0]&&(i.validationErrors=t[3]?t[3][t[57]]:void 0),16&n[0]&&(i.context=t[4]),2326&n[0]|512&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(e){i||(Ae(r.$$.fragment,e),i=!0)},o(e){Me(r.$$.fragment,e),i=!1},d(e){e&&O(n),Fe(r,e)}}}function sE(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),D(n,"data-type","insert-selection-area-after")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[32]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function aE(t){let n,r;return n=new ru({props:{data:uc}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function lE(t){let n,r;return n=new ru({props:{data:cc}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function cE(e){let t;return{c(){t=A("div"),t.textContent=":",D(t,"class","jse-separator svelte-uj4yd7")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function uE(e){let t,n,r,i,o,s,a,l,c,u,h=e[6].length+"",d=1===e[6].length?"item":"items";return{c(){t=A("div"),t.textContent="[",n=T(),r=A("button"),i=P(h),o=T(),s=P(d),a=T(),l=A("div"),l.textContent="]",D(t,"class","jse-bracket svelte-uj4yd7"),D(r,"type","button"),D(r,"class","jse-tag svelte-uj4yd7"),D(l,"class","jse-bracket svelte-uj4yd7")},m(h,d){_(h,t,d),_(h,n,d),_(h,r,d),k(r,i),k(r,o),k(r,s),_(h,a,d),_(h,l,d),c||(u=N(r,"click",e[24]),c=!0)},p(e,t){64&t[0]&&h!==(h=e[6].length+"")&&V(i,h),64&t[0]&&d!==(d=1===e[6].length?"item":"items")&&V(s,d)},d(e){e&&O(t),e&&O(n),e&&O(r),e&&O(a),e&&O(l),c=!1,u()}}}function hE(e){let t,n,r,i,o,s,a=e[6].length+"",l=1===e[6].length?"item":"items";return{c(){t=A("div"),t.textContent="[",n=T(),r=A("span"),i=P(a),o=T(),s=P(l),D(t,"class","jse-bracket svelte-uj4yd7"),D(r,"class","jse-tag jse-expanded svelte-uj4yd7")},m(e,a){_(e,t,a),_(e,n,a),_(e,r,a),k(r,i),k(r,o),k(r,s)},p(e,t){64&t[0]&&a!==(a=e[6].length+"")&&V(i,a),64&t[0]&&l!==(l=1===e[6].length?"item":"items")&&V(s,l)},d(e){e&&O(t),e&&O(n),e&&O(r)}}}function dE(e){let t,n,r;return n=new Y_({props:{selected:!0,onContextMenu:e[4].onContextMenu}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-context-menu-button-anchor svelte-uj4yd7")},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,t){const r={};16&t[0]&&(r.onContextMenu=e[4].onContextMenu),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function fE(e){let t,n;return t=new EO({props:{validationError:e[15],onExpand:e[24]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.validationError=e[15]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function pE(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),D(n,"data-type","insert-selection-area-after")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[32]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function mE(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-inside svelte-uj4yd7"),D(n,"data-type","insert-selection-area-inside")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[31]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function gE(e){let t,n,r,i,o,s,a,l=[],c=new Map,u=!e[4].readOnly&&(e[9]===wn||e[19])&&vE(e),h=e[16];const d=e=>e[53];for(let t=0;t<h.length;t+=1){let n=IO(e,h,t),r=d(n);c.set(r,l[t]=xE(r,n))}let f=!e[10]&&$E(e);return{c(){t=A("div"),u&&u.c(),n=T();for(let e=0;e<l.length;e+=1)l[e].c();r=T(),i=A("div"),o=A("div"),o.innerHTML='<span class="jse-bracket svelte-uj4yd7">]</span>',s=T(),f&&f.c(),D(t,"class","jse-items svelte-uj4yd7"),D(o,"data-type","selectable-value"),D(o,"class","jse-footer svelte-uj4yd7"),D(i,"class","jse-footer-outer svelte-uj4yd7"),D(i,"style",e[13])},m(e,c){_(e,t,c),u&&u.m(t,null),k(t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null);_(e,r,c),_(e,i,c),k(i,o),k(i,s),f&&f.m(i,null),a=!0},p(e,r){e[4].readOnly||e[9]!==wn&&!e[19]?u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee()):u?(u.p(e,r),524816&r[0]&&Ae(u,1)):(u=vE(e),u.c(),Ae(u,1),u.m(t,n)),272695806&r[0]&&(h=e[16],Oe(),l=Re(l,r,d,1,e,h,c,t,Ie,xE,null,IO),Ee()),e[10]?f&&(f.d(1),f=null):f?f.p(e,r):(f=$E(e),f.c(),f.m(i,null)),(!a||8192&r[0])&&D(i,"style",e[13])},i(e){if(!a){Ae(u);for(let e=0;e<h.length;e+=1)Ae(l[e]);a=!0}},o(e){Me(u);for(let e=0;e<l.length;e+=1)Me(l[e]);a=!1},d(e){e&&O(t),u&&u.d();for(let e=0;e<l.length;e+=1)l[e].d();e&&O(r),e&&O(i),f&&f.d()}}}function vE(e){let t,n,r,i;return n=new Y_({props:{selected:e[19],onContextMenu:e[33]}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-insert-area jse-inside svelte-uj4yd7"),D(t,"data-type","insert-selection-area-inside"),D(t,"style",r=CE(e[1].length+1)),D(t,"title",vn),U(t,"jse-hovered",e[9]===wn),U(t,"jse-selected",e[19])},m(e,r){_(e,t,r),Ve(n,t,null),i=!0},p(e,o){const s={};524288&o[0]&&(s.selected=e[19]),n.$set(s),(!i||2&o[0]&&r!==(r=CE(e[1].length+1)))&&D(t,"style",r),512&o[0]&&U(t,"jse-hovered",e[9]===wn),524288&o[0]&&U(t,"jse-selected",e[19])},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n)}}}function yE(e){let t,n,r,i=e[51].start+e[56]+"";return{c(){t=A("div"),n=A("div"),r=P(i),D(n,"class","jse-index svelte-uj4yd7"),D(t,"slot","identifier"),D(t,"class","jse-identifier svelte-uj4yd7")},m(e,i){_(e,t,i),k(t,n),k(n,r)},p(e,t){65600&t[0]&&i!==(i=e[51].start+e[56]+"")&&V(r,i)},d(e){e&&O(t)}}}function wE(e,t){let n,r,i;return r=new OE({props:{value:t[54],path:t[22](t[1].concat(t[51].start+t[56])),state:t[5][t[51].start+t[56]],selection:t[8]?t[8][t[51].start+t[56]]:void 0,searchResult:t[2]?t[2][t[51].start+t[56]]:void 0,validationErrors:t[3]?t[3][t[51].start+t[56]]:void 0,context:t[4],onDragSelectionStart:t[28],$$slots:{identifier:[yE]},$$scope:{ctx:t}}}),{key:e,first:null,c(){n=j(),Be(r.$$.fragment),this.first=n},m(e,t){_(e,n,t),Ve(r,e,t),i=!0},p(e,n){t=e;const i={};65600&n[0]&&(i.value=t[54]),65602&n[0]&&(i.path=t[22](t[1].concat(t[51].start+t[56]))),65632&n[0]&&(i.state=t[5][t[51].start+t[56]]),65856&n[0]&&(i.selection=t[8]?t[8][t[51].start+t[56]]:void 0),65604&n[0]&&(i.searchResult=t[2]?t[2][t[51].start+t[56]]:void 0),65608&n[0]&&(i.validationErrors=t[3]?t[3][t[51].start+t[56]]:void 0),16&n[0]&&(i.context=t[4]),65600&n[0]|512&n[1]&&(i.$$scope={dirty:n,ctx:t}),r.$set(i)},i(e){i||(Ae(r.$$.fragment,e),i=!0)},o(e){Me(r.$$.fragment,e),i=!1},d(e){e&&O(n),Fe(r,e)}}}function bE(e){let t,n;return t=new G_({props:{visibleSections:e[16],sectionIndex:e[53],total:e[6].length,path:e[1],onExpandSection:e[4].onExpandSection,selection:e[7]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};65536&n[0]&&(r.visibleSections=e[16]),65536&n[0]&&(r.sectionIndex=e[53]),64&n[0]&&(r.total=e[6].length),2&n[0]&&(r.path=e[1]),16&n[0]&&(r.onExpandSection=e[4].onExpandSection),128&n[0]&&(r.selection=e[7]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function xE(e,t){let n,r,i,o,s=[],a=new Map,l=t[6].slice(t[51].start,Math.min(t[51].end,t[6].length));const c=e=>e[56];for(let e=0;e<l.length;e+=1){let n=RO(t,l,e),r=c(n);a.set(r,s[e]=wE(r,n))}let u=t[51].end<t[6].length&&bE(t);return{key:e,first:null,c(){n=j();for(let e=0;e<s.length;e+=1)s[e].c();r=T(),u&&u.c(),i=j(),this.first=n},m(e,t){_(e,n,t);for(let n=0;n<s.length;n+=1)s[n].m(e,t);_(e,r,t),u&&u.m(e,t),_(e,i,t),o=!0},p(e,n){t=e,272695678&n[0]&&(l=t[6].slice(t[51].start,Math.min(t[51].end,t[6].length)),Oe(),s=Re(s,n,c,1,t,l,a,r.parentNode,Ie,wE,r,RO),Ee()),t[51].end<t[6].length?u?(u.p(t,n),65600&n[0]&&Ae(u,1)):(u=bE(t),u.c(),Ae(u,1),u.m(i.parentNode,i)):u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee())},i(e){if(!o){for(let e=0;e<l.length;e+=1)Ae(s[e]);Ae(u),o=!0}},o(e){for(let e=0;e<s.length;e+=1)Me(s[e]);Me(u),o=!1},d(e){e&&O(n);for(let t=0;t<s.length;t+=1)s[t].d(e);e&&O(r),u&&u.d(e),e&&O(i)}}}function $E(t){let n,r,i;return{c(){n=A("div"),D(n,"class","jse-insert-selection-area jse-after svelte-uj4yd7"),D(n,"data-type","insert-selection-area-after")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[32]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function kE(e){let t,n,r;return n=new Y_({props:{selected:e[20],onContextMenu:e[34]}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-insert-area jse-after svelte-uj4yd7"),D(t,"data-type","insert-selection-area-after"),D(t,"style",e[13]),D(t,"title",vn),U(t,"jse-hovered",e[9]===bn),U(t,"jse-selected",e[20])},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,i){const o={};1048576&i[0]&&(o.selected=e[20]),n.$set(o),(!r||8192&i[0])&&D(t,"style",e[13]),512&i[0]&&U(t,"jse-hovered",e[9]===bn),1048576&i[0]&&U(t,"jse-selected",e[20])},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function SE(e){let t,n,r,i,s,a,l,c,u;const h=[VO,BO,zO],d=[];function f(e,t){return"array"===e[14]?0:"object"===e[14]?1:2}n=f(e),r=d[n]=h[n](e);let p=!e[4].readOnly&&(e[9]===bn||e[20])&&kE(e);return{c(){t=A("div"),r.c(),i=T(),p&&p.c(),D(t,"class",s=g(F_("jse-json-node",{"jse-expanded":e[12]},e[4].onClassName(e[1],e[6])))+" svelte-uj4yd7"),D(t,"data-path",a=Hl(e[1])),U(t,"jse-root",e[10]),U(t,"jse-selected",e[21]),U(t,"jse-selected-key",e[18]),U(t,"jse-selected-value",e[17]),U(t,"jse-hovered",e[9]===xn)},m(r,o){_(r,t,o),d[n].m(t,null),k(t,i),p&&p.m(t,null),l=!0,c||(u=[N(t,"mousedown",e[26]),N(t,"mousemove",e[27]),N(t,"mouseover",e[29]),N(t,"mouseout",e[30]),N(t,"focus",void 0),N(t,"blur",void 0)],c=!0)},p(e,o){let c=n;n=f(e),n===c?d[n].p(e,o):(Oe(),Me(d[c],1,1,(()=>{d[c]=null})),Ee(),r=d[n],r?r.p(e,o):(r=d[n]=h[n](e),r.c()),Ae(r,1),r.m(t,i)),e[4].readOnly||e[9]!==bn&&!e[20]?p&&(Oe(),Me(p,1,1,(()=>{p=null})),Ee()):p?(p.p(e,o),1049104&o[0]&&Ae(p,1)):(p=kE(e),p.c(),Ae(p,1),p.m(t,null)),(!l||4178&o[0]&&s!==(s=g(F_("jse-json-node",{"jse-expanded":e[12]},e[4].onClassName(e[1],e[6])))+" svelte-uj4yd7"))&&D(t,"class",s),(!l||2&o[0]&&a!==(a=Hl(e[1])))&&D(t,"data-path",a),5202&o[0]&&U(t,"jse-root",e[10]),2101330&o[0]&&U(t,"jse-selected",e[21]),266322&o[0]&&U(t,"jse-selected-key",e[18]),135250&o[0]&&U(t,"jse-selected-value",e[17]),4690&o[0]&&U(t,"jse-hovered",e[9]===xn)},i(e){l||(Ae(r),Ae(p),l=!0)},o(e){Me(r),Me(p),l=!1},d(e){e&&O(t),d[n].d(),p&&p.d(),c=!1,o(u)}}}function CE(e){return`margin-left: calc(${e} * var(--jse-indent-size))`}function _E(e,t,n){let r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,{$$slots:w={},$$scope:b}=t,{value:x}=t,{path:$}=t,{state:k}=t,{selection:S}=t,{searchResult:C}=t,{validationErrors:_}=t,{context:O}=t,{onDragSelectionStart:E}=t;const A=zt("jsoneditor:JSONNode");let M,P,T;const j=xo((e=>e),hu);function N(e){O.onDrag(e)}function I(e){xO.selecting&&(xO.selecting=!1,e.stopPropagation()),O.onDragEnd(),document.removeEventListener("mousemove",N,!0),document.removeEventListener("mouseup",I)}function R(){var e,t;return(null===(t=null===(e=O.findElement([]))||void 0===e?void 0:e.getBoundingClientRect())||void 0===t?void 0:t.top)||0}function D(e,t){const n=R()-e.initialContentTop;return t.clientY-e.initialClientY-n}function L(e){if(T){const t=D(T,e),{updatedValue:r,updatedState:i,updatedSelection:o,indexOffset:s}=AO({fullJson:O.getFullJson(),fullState:O.getFullState(),fullSelection:O.getFullSelection(),deltaY:t,items:T.items});s!==T.indexOffset&&(A("drag selection",s,t,o),n(38,T={...T,updatedValue:r,updatedState:i,updatedSelection:o,indexOffset:s,didMoveItems:!0}))}}function z(e){if(T){const t=D(T,e),{operations:r,updatedFullSelection:i}=AO({fullJson:O.getFullJson(),fullState:O.getFullState(),fullSelection:O.getFullSelection(),deltaY:t,items:T.items});r?O.onPatch(r,(()=>({selection:i||O.getFullSelection()}))):e.target!==T.initialTarget||T.didMoveItems||O.onSelect({type:ql(e.target),path:Wl(e.target)}),n(38,T=void 0),xO.dragging=!1,document.removeEventListener("mousemove",L,!0),document.removeEventListener("mouseup",z)}}return e.$$set=e=>{"value"in e&&n(0,x=e.value),"path"in e&&n(1,$=e.path),"state"in e&&n(35,k=e.state),"selection"in e&&n(36,S=e.selection),"searchResult"in e&&n(2,C=e.searchResult),"validationErrors"in e&&n(3,_=e.validationErrors),"context"in e&&n(4,O=e.context),"onDragSelectionStart"in e&&n(37,E=e.onDragSelectionStart),"$$scope"in e&&n(40,b=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty[0]|128&e.$$.dirty[1]&&n(6,r=void 0!==(null==T?void 0:T.updatedValue)?T.updatedValue:x),144&e.$$.dirty[1]&&n(5,i=void 0!==(null==T?void 0:T.updatedState)?T.updatedState:k),160&e.$$.dirty[1]&&n(8,o=null!=(null==T?void 0:T.updatedSelection)?T.updatedSelection:S),256&e.$$.dirty[0]&&n(7,s=o&&o[sn]),128&e.$$.dirty[0]&&n(21,a=!(!s||!s.pathsMap)),128&e.$$.dirty[0]&&n(20,l=!(!s||s.type!==el)),128&e.$$.dirty[0]&&n(19,c=!(!s||s.type!==tl)),128&e.$$.dirty[0]&&n(18,u=!(!s||s.type!==nl)),128&e.$$.dirty[0]&&n(17,h=!(!s||s.type!==rl)),32&e.$$.dirty[0]&&n(12,d=i[Zt]),32&e.$$.dirty[0]&&n(16,f=i[en]),32&e.$$.dirty[0]&&n(11,p=i[tn]),8&e.$$.dirty[0]&&n(15,m=_&&_[an]),2&e.$$.dirty[0]&&n(10,g=0===$.length),64&e.$$.dirty[0]&&n(14,v=Wn(r)),2&e.$$.dirty[0]&&n(13,y=CE($.length))},[x,$,C,_,O,i,r,s,o,M,g,p,d,y,v,m,f,h,u,c,l,a,j,function(e){e.stopPropagation();const t=e.ctrlKey;O.onExpand($,!d,t)},function(e){e.stopPropagation(),O.onExpand($,!0)},function(e,t){const n=KC($,p,e,t);return O.onPatch(n),na(Nn.parseJSONPointer(n[0].path))},function(e){if(function(e){return"DIV"===e.nodeName&&"true"===e.contentEditable}(e.target)||1===e.which&&Il(e.target,"BUTTON"))return;e.stopPropagation(),e.preventDefault(),document.addEventListener("mousemove",N,!0),document.addEventListener("mouseup",I);const t=ql(e.target);if(function(e,t,n){if(!e)return!1;const r=t.slice(0);if(e.type===il)for(;r.length>0;){if(!0===e.pathsMap[Nn.compileJSONPointer(r)])return!0;r.pop()}if(e.type===nl)return n===nl&&da(e.focusPath,t);if(e.type===rl){if(n===rl&&da(e.focusPath,t))return!0;if(gl(t,e.focusPath)&&t.length>e.focusPath.length&&(n===nl||n===rl||n===il))return!0}return!1}(O.getFullSelection(),$,t))0===e.button&&(O.focus(),E(e));else if(xO.selecting=!0,xO.selectionAnchor=$,xO.selectionAnchorType=t,xO.selectionFocus=$,e.shiftKey){const e=O.getFullSelection();e&&O.onSelect({type:il,anchorPath:e.anchorPath,focusPath:$})}else switch(t){case nl:case rl:case el:case tl:O.onSelect({type:t,path:$});break;case il:if(g&&e.target.hasAttribute("data-path")){const e=na(Ya(r,i));O.onSelect(e)}else O.onSelect({type:il,anchorPath:$,focusPath:$})}},function(e){if(xO.selecting){e.preventDefault(),e.stopPropagation(),null==xO.selectionFocus&&window.getSelection&&window.getSelection().empty();const t=ql(e.target);da($,xO.selectionFocus)&&t===xO.selectionAnchorType||(xO.selectionFocus=$,O.onSelect({anchorPath:xO.selectionAnchor,focusPath:xO.selectionFocus}))}},function(e){if(O.readOnly)return;const t=O.getFullSelection(),r=ca(t.focusPath);if(!da($,r))return void E(e);const i=function(e){const t=[];function n(e){const n=$.concat(e),r=O.findElement(n);null!=r&&t.push({path:n,height:r.clientHeight})}if(Array.isArray(x)){const t=aa(e.paths)||e.focusPath,r=na(e.paths)||e.focusPath,i=na(t),o=na(r),s=k[en].find((e=>i>=e.start&&o<=e.end));if(!s)return null;const{start:a,end:l}=s;Yn(a,Math.min(x.length,l),n)}else La(k,n);return t}(t);A("dragSelectionStart",{fullSelection:t,items:i}),i?(n(38,T={initialTarget:e.target,initialClientY:e.clientY,initialContentTop:R(),updatedValue:void 0,updatedState:void 0,updatedSelection:void 0,items:i,indexOffset:0,didMoveItems:!1}),xO.dragging=!0,document.addEventListener("mousemove",L,!0),document.addEventListener("mouseup",z)):A("Cannot drag the current selection (probably spread over multiple sections)")},function(e){xO.selecting||xO.dragging||(e.stopPropagation(),Rl(e.target,"data-type","selectable-value")?n(9,M=xn):Rl(e.target,"data-type","insert-selection-area-inside")?n(9,M=wn):Rl(e.target,"data-type","insert-selection-area-after")&&n(9,M=bn),clearTimeout(P))},function(e){e.stopPropagation(),P=setTimeout((()=>n(9,M=void 0)))},function(e){e.shiftKey||(e.stopPropagation(),e.preventDefault(),O.onSelect({type:tl,path:$}))},function(e){e.shiftKey||(e.stopPropagation(),e.preventDefault(),O.onSelect({type:el,path:$}))},function(e){O.onSelect({type:tl,path:$}),O.onContextMenu(e)},function(e){O.onSelect({type:el,path:$}),O.onContextMenu(e)},k,S,E,T,w,b]}class OE extends He{constructor(e){super(),qe(this,e,_E,SE,u,{value:0,path:1,state:35,selection:36,searchResult:2,validationErrors:3,context:4,onDragSelectionStart:37},null,[-1,-1])}}function EE(e){let t,n;return t=new Bu({props:{items:e[0]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.items=e[0]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function AE(e,t,n){let r,i,o,s,a,l,c,{json:u}=t,{selection:h}=t,{readOnly:d}=t,{showSearch:f=!1}=t,{historyState:p}=t,{onExpandAll:m}=t,{onCollapseAll:g}=t,{onUndo:v}=t,{onRedo:y}=t,{onSort:w}=t,{onTransform:b}=t,{onContextMenu:x}=t,{onCopy:$}=t,{onRenderMenu:k=li}=t;function S(){n(1,f=!f)}return e.$$set=e=>{"json"in e&&n(2,u=e.json),"selection"in e&&n(3,h=e.selection),"readOnly"in e&&n(4,d=e.readOnly),"showSearch"in e&&n(1,f=e.showSearch),"historyState"in e&&n(5,p=e.historyState),"onExpandAll"in e&&n(6,m=e.onExpandAll),"onCollapseAll"in e&&n(7,g=e.onCollapseAll),"onUndo"in e&&n(8,v=e.onUndo),"onRedo"in e&&n(9,y=e.onRedo),"onSort"in e&&n(10,w=e.onSort),"onTransform"in e&&n(11,b=e.onTransform),"onContextMenu"in e&&n(12,x=e.onContextMenu),"onCopy"in e&&n(13,$=e.onCopy),"onRenderMenu"in e&&n(14,k=e.onRenderMenu)},e.$$.update=()=>{4&e.$$.dirty&&n(20,r=void 0!==u),e.$$.dirty,1048584&e.$$.dirty&&n(17,i=r&&null!=h&&(h.type===il||h.type===nl||h.type===rl)),68&e.$$.dirty&&n(19,o={icon:ku,title:"Expand all",className:"jse-expand-all",onClick:m,disabled:!qn(u)}),132&e.$$.dirty&&n(18,s={icon:Su,title:"Collapse all",className:"jse-collapse-all",onClick:g,disabled:!qn(u)}),4&e.$$.dirty&&n(16,a={icon:$c,title:"Search (Ctrl+F)",className:"jse-search",onClick:S,disabled:void 0===u}),999220&e.$$.dirty&&n(15,l=d?[o,s,{separator:!0},{icon:vc,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:$,disabled:!i},{separator:!0},a,{space:!0}]:[o,s,{separator:!0},{icon:sc,title:"Sort",className:"jse-sort",onClick:w,disabled:d||void 0===u},{icon:bc,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:b,disabled:d||void 0===u},a,{icon:wc,title:yn,className:"jse-contextmenu",onClick:x},{separator:!0},{icon:ac,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:v,disabled:!p.canUndo},{icon:lc,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!p.canRedo},{space:!0}]),49152&e.$$.dirty&&n(0,c=k("tree",l)||l)},[c,f,u,h,d,p,m,g,v,y,w,b,x,$,k,l,a,i,s,o,r]}class ME extends He{constructor(e){super(),qe(this,e,AE,EE,u,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}function PE(e){let t;return{c(){t=A("ul"),t.innerHTML='<li class="svelte-1q2qkk2">Click inside the editor</li> \n        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> \n        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> \n        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>',D(t,"class","svelte-1q2qkk2")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function TE(t){let n,r,i,o,s,a,l,c=!t[0]&&PE();return{c(){n=A("div"),r=A("div"),i=T(),o=A("div"),s=P("Empty document\n    "),c&&c.c(),a=T(),l=A("div"),D(r,"class","jse-space jse-before svelte-1q2qkk2"),D(o,"class","jse-contents svelte-1q2qkk2"),D(l,"class","jse-space jse-after svelte-1q2qkk2"),D(n,"class","jse-welcome svelte-1q2qkk2")},m(e,t){_(e,n,t),k(n,r),k(n,i),k(n,o),k(o,s),c&&c.m(o,null),k(n,a),k(n,l)},p(e,[t]){e[0]?c&&(c.d(1),c=null):c||(c=PE(),c.c(),c.m(o,null))},i:e,o:e,d(e){e&&O(n),c&&c.d()}}}function jE(e,t,n){let{readOnly:r}=t;return e.$$set=e=>{"readOnly"in e&&n(0,r=e.readOnly)},[r]}class NE extends He{constructor(e){super(),qe(this,e,jE,TE,u,{readOnly:0})}}function IE(e,t,n){const r=e.slice();return r[4]=t[n],r}function RE(e,t){let n,r,i,o,s,a=WC(t[4],BE)+"";function l(){return t[3](t[4])}return{key:e,first:null,c(){n=A("button"),r=P(a),D(n,"type","button"),D(n,"class","jse-navigation-bar-dropdown-item svelte-6hb2gf"),D(n,"title",i=t[4]),U(n,"jse-selected",t[4]===t[1]),this.first=n},m(e,t){_(e,n,t),k(n,r),o||(s=N(n,"click",R(l)),o=!0)},p(e,o){t=e,1&o&&a!==(a=WC(t[4],BE)+"")&&V(r,a),1&o&&i!==(i=t[4])&&D(n,"title",i),3&o&&U(n,"jse-selected",t[4]===t[1])},d(e){e&&O(n),o=!1,s()}}}function DE(t){let n,r,i;return{c(){n=A("button"),r=P("..."),D(n,"type","button"),D(n,"class","jse-navigation-bar-dropdown-item svelte-6hb2gf"),D(n,"title",i="Limited to "+zE+" items")},m(e,t){_(e,n,t),k(n,r)},p:e,d(e){e&&O(n)}}}function LE(t){let n,r,i=[],o=new Map,s=Zn(t[0],zE);const a=e=>e[4];for(let e=0;e<s.length;e+=1){let n=IE(t,s,e),r=a(n);o.set(r,i[e]=RE(r,n))}let l=t[0].length>zE&&DE();return{c(){n=A("div");for(let e=0;e<i.length;e+=1)i[e].c();r=T(),l&&l.c(),D(n,"class","jse-navigation-bar-dropdown svelte-6hb2gf")},m(e,t){_(e,n,t);for(let e=0;e<i.length;e+=1)i[e].m(n,null);k(n,r),l&&l.m(n,null)},p(e,[t]){7&t&&(s=Zn(e[0],zE),i=Re(i,t,a,1,e,s,o,n,Ne,RE,r,IE)),e[0].length>zE?l?l.p(e,t):(l=DE(),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},i:e,o:e,d(e){e&&O(n);for(let e=0;e<i.length;e+=1)i[e].d();l&&l.d()}}}const zE=100,BE=30;function VE(e,t,n){let{items:r}=t,{selectedItem:i}=t,{onSelect:o}=t;return e.$$set=e=>{"items"in e&&n(0,r=e.items),"selectedItem"in e&&n(1,i=e.selectedItem),"onSelect"in e&&n(2,o=e.onSelect)},[r,i,o,e=>o(e)]}class FE extends He{constructor(e){super(),qe(this,e,VE,LE,u,{items:0,selectedItem:1,onSelect:2})}}function qE(e){let t,n,r,i;return{c(){t=A("button"),n=P(e[2]),D(t,"type","button"),D(t,"class","jse-navigation-bar-button svelte-1r1k9th")},m(o,s){_(o,t,s),k(t,n),r||(i=N(t,"click",e[9]),r=!0)},p(e,t){4&t&&V(n,e[2])},d(e){e&&O(t),r=!1,i()}}}function HE(e){let t,n,r,i,o,s,a;r=new ru({props:{data:ic}});let l=void 0!==e[2]&&qE(e);return{c(){t=A("div"),n=A("button"),Be(r.$$.fragment),i=T(),l&&l.c(),D(n,"type","button"),D(n,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"),U(n,"jse-open",e[1]),D(t,"class","jse-navigation-bar-item svelte-1r1k9th")},m(c,u){_(c,t,u),k(t,n),Ve(r,n,null),k(t,i),l&&l.m(t,null),e[10](t),o=!0,s||(a=N(n,"click",e[4]),s=!0)},p(e,[r]){2&r&&U(n,"jse-open",e[1]),void 0!==e[2]?l?l.p(e,r):(l=qE(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},i(e){o||(Ae(r.$$.fragment,e),o=!0)},o(e){Me(r.$$.fragment,e),o=!1},d(n){n&&O(t),Fe(r),l&&l.d(),e[10](null),s=!1,a()}}}function WE(e,t,n){let r,i;const{openAbsolutePopup:o,closeAbsolutePopup:s}=ae("absolute-popup");let a,{path:l}=t,{index:c}=t,{onSelect:u}=t,{getItems:h}=t,d=!1;function f(e){s(),u(r.concat(e))}return e.$$set=e=>{"path"in e&&n(5,l=e.path),"index"in e&&n(6,c=e.index),"onSelect"in e&&n(7,u=e.onSelect),"getItems"in e&&n(8,h=e.getItems)},e.$$.update=()=>{96&e.$$.dirty&&(r=l.slice(0,c)),96&e.$$.dirty&&n(2,i=l[c])},[a,d,i,f,function(){if(a){n(1,d=!0);const e={items:h(r),selectedItem:i,onSelect:f};o(FE,e,{anchor:a,closeOnOuterClick:!0,onClose:()=>{n(1,d=!1)}})}},l,c,u,h,()=>f(i),function(e){ue[e?"unshift":"push"]((()=>{a=e,n(0,a)}))}]}class UE extends He{constructor(e){super(),qe(this,e,WE,HE,u,{path:5,index:6,onSelect:7,getItems:8})}}var JE=Tn((function(e){
/*
     * @version    1.4.0
     * @date       2015-10-26
     * @stability  3 - Stable
     * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
     * @license    MIT License
     */
var t=function(e,t){var n,r,i=1,o=0,s=0,a=String.alphabet;function l(e,t,r){if(r){for(n=t;(r=l(e,n))<76&&r>65;)++n;return+e.slice(t-1,n)}return(r=a&&a.indexOf(e.charAt(t)))>-1?r+76:(r=e.charCodeAt(t)||0)<45||r>127?r:r<46?65:r<48?r-1:r<58?r+18:r<65?r-11:r<91?r+11:r<97?r-37:r<123?r+5:r-63}if((e+="")!=(t+=""))for(;i;)if(r=l(e,o++),i=l(t,s++),r<76&&i<76&&r>66&&i>66&&(r=l(e,o,o),i=l(t,s,o=n),s=n),r!=i)return r<i?-1:1;return 0};try{e.exports=t}catch(e){String.naturalCompare=t}}));function KE(e,t){const n="string"==typeof e?e.toLowerCase():e,r="string"==typeof t?t.toLowerCase():t;return JE(n,r)}function GE(e,t=[],n=[],r=1){const i=function(e,t){return function(n,r){const i=Nn.getIn(n,e),o=Nn.getIn(r,e);return void 0===i?t:void 0===o?-t:"string"!=typeof i&&"string"!=typeof o?i>o?t:i<o?-t:0:t*KE(i,o)}}(n,r),o=Nn.getIn(e,t);return[{op:"replace",path:Nn.compileJSONPointer(t),value:o.slice(0).sort(i)}]}function QE(e,t,n){const r=e.slice();return r[12]=t[n],r[14]=n,r}function XE(e,t){let n,r,i;return r=new UE({props:{getItems:t[4],path:t[1],index:t[14],onSelect:t[5]}}),{key:e,first:null,c(){n=j(),Be(r.$$.fragment),this.first=n},m(e,t){_(e,n,t),Ve(r,e,t),i=!0},p(e,n){t=e;const i={};2&n&&(i.path=t[1]),2&n&&(i.index=t[14]),r.$set(i)},i(e){i||(Ae(r.$$.fragment,e),i=!0)},o(e){Me(r.$$.fragment,e),i=!1},d(e){e&&O(n),Fe(r,e)}}}function YE(e){let t,n;return t=new UE({props:{getItems:e[4],path:e[1],index:void 0,onSelect:e[5]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.path=e[1]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function ZE(e){let t,n,r,i,o,s,a=[],l=new Map,c=qn(e[0])?" ":"Navigation bar",u=e[1];const h=e=>e[14];for(let t=0;t<u.length;t+=1){let n=QE(e,u,t),r=h(n);l.set(r,a[t]=XE(r,n))}let d=e[3]&&YE(e);return{c(){t=A("div");for(let e=0;e<a.length;e+=1)a[e].c();n=T(),d&&d.c(),r=T(),i=A("div"),o=P(c),D(i,"class","jse-navigation-bar-space svelte-5lwyke"),D(t,"class","jse-navigation-bar svelte-5lwyke")},m(l,c){_(l,t,c);for(let e=0;e<a.length;e+=1)a[e].m(t,null);k(t,n),d&&d.m(t,null),k(t,r),k(t,i),k(i,o),e[9](t),s=!0},p(e,[i]){50&i&&(u=e[1],Oe(),a=Re(a,i,h,1,e,u,l,t,Ie,XE,n,QE),Ee()),e[3]?d?(d.p(e,i),8&i&&Ae(d,1)):(d=YE(e),d.c(),Ae(d,1),d.m(t,r)):d&&(Oe(),Me(d,1,1,(()=>{d=null})),Ee()),(!s||1&i)&&c!==(c=qn(e[0])?" ":"Navigation bar")&&V(o,c)},i(e){if(!s){for(let e=0;e<u.length;e+=1)Ae(a[e]);Ae(d),s=!0}},o(e){for(let e=0;e<a.length;e+=1)Me(a[e]);Me(d),s=!1},d(n){n&&O(t);for(let e=0;e<a.length;e+=1)a[e].d();d&&d.d(),e[9](null)}}}function eA(e,t,n){let r,i;const o=zt("jsoneditor:NavigationBar");let s,{json:a}=t,{state:l}=t,{selection:c}=t,{onSelect:u}=t;return e.$$set=e=>{"json"in e&&n(0,a=e.json),"state"in e&&n(6,l=e.state),"selection"in e&&n(7,c=e.selection),"onSelect"in e&&n(8,u=e.onSelect)},e.$$.update=()=>{128&e.$$.dirty&&n(1,r=c?c.focusPath:[]),3&e.$$.dirty&&n(3,i=qn(Nn.getIn(a,r))),2&e.$$.dirty&&setTimeout((()=>{if(s&&s.scrollTo){const e=s.scrollWidth-s.clientWidth;e>0&&(o("scrollTo ",e),s.scrollTo({left:e,behavior:"smooth"}))}}))},[a,r,s,i,function(e){o("get items for path",e);const t=Nn.getIn(a,e);if(Array.isArray(t))return xa(0,t.length);if(Fn(t)){const n=(Nn.getIn(l,e.concat(tn))||Object.keys(t)).slice(0);return n.sort(KE),n}return[]},function(e){o("select path",JSON.stringify(e));const t=yl(a,l,{type:il,anchorPath:e,focusPath:e});u(t)},l,c,u,function(e){ue[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class tA extends He{constructor(e){super(),qe(this,e,eA,ZE,u,{json:0,state:6,selection:7,onSelect:8})}}function nA(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,y,w,b,x,$,S,C,E,M,j,I,R,L,z,B=-1!==e[3]?`${e[3]+1}/`:"",q=!e[4]&&rA(e);const H=[oA,iA],W=[];function J(e,t){return e[2]?0:1}l=J(e),c=W[l]=H[l](e),x=new ru({props:{data:dc}}),C=new ru({props:{data:fc}}),j=new ru({props:{data:Mc}});let K=e[0]&&!e[4]&&sA(e);return{c(){t=A("div"),n=A("form"),q&&q.c(),r=T(),i=A("div"),s=A("div"),a=A("div"),c.c(),u=T(),h=A("label"),d=A("input"),p=T(),m=A("div"),g=P(B),y=P(e[10]),w=T(),b=A("button"),Be(x.$$.fragment),$=T(),S=A("button"),Be(C.$$.fragment),E=T(),M=A("button"),Be(j.$$.fragment),I=T(),K&&K.c(),D(a,"class","jse-search-icon svelte-18vllqh"),D(d,"class","jse-search-input svelte-18vllqh"),D(d,"title","Enter text to search"),D(d,"type","text"),D(d,"placeholder","Find"),D(h,"class","jse-search-input-label svelte-18vllqh"),D(h,"about","jse-search input"),D(m,"class","jse-search-count svelte-18vllqh"),U(m,"jse-visible",""!==e[8]),D(b,"type","button"),D(b,"class","jse-search-next svelte-18vllqh"),D(b,"title","Go to next search result (Enter)"),D(S,"type","button"),D(S,"class","jse-search-previous svelte-18vllqh"),D(S,"title","Go to previous search result (Shift+Enter)"),D(M,"type","button"),D(M,"class","jse-search-clear svelte-18vllqh"),D(M,"title","Close search box (Esc)"),D(s,"class","jse-search-section svelte-18vllqh"),D(i,"class","jse-search-contents svelte-18vllqh"),D(n,"class","jse-search-form svelte-18vllqh"),D(t,"class","jse-search-box svelte-18vllqh")},m(o,c){_(o,t,c),k(t,n),q&&q.m(n,null),k(n,r),k(n,i),k(i,s),k(s,a),W[l].m(a,null),k(s,u),k(s,h),k(h,d),F(d,e[8]),k(s,p),k(s,m),k(m,g),k(m,y),k(s,w),k(s,b),Ve(x,b,null),k(s,$),k(s,S),Ve(C,S,null),k(s,E),k(s,M),Ve(j,M,null),k(i,I),K&&K.m(i,null),R=!0,L||(z=[N(d,"input",e[21]),v(f=lA.call(null,d)),N(b,"click",e[22]),N(S,"click",e[23]),N(M,"click",e[24]),N(n,"submit",e[12]),N(n,"keydown",e[13])],L=!0)},p(e,t){e[4]?q&&(Oe(),Me(q,1,1,(()=>{q=null})),Ee()):q?(q.p(e,t),16&t&&Ae(q,1)):(q=rA(e),q.c(),Ae(q,1),q.m(n,r));let o=l;l=J(e),l===o?W[l].p(e,t):(Oe(),Me(W[o],1,1,(()=>{W[o]=null})),Ee(),c=W[l],c?c.p(e,t):(c=W[l]=H[l](e),c.c()),Ae(c,1),c.m(a,null)),256&t&&d.value!==e[8]&&F(d,e[8]),(!R||8&t)&&B!==(B=-1!==e[3]?`${e[3]+1}/`:"")&&V(g,B),(!R||1024&t)&&V(y,e[10]),256&t&&U(m,"jse-visible",""!==e[8]),e[0]&&!e[4]?K?K.p(e,t):(K=sA(e),K.c(),K.m(i,null)):K&&(K.d(1),K=null)},i(e){R||(Ae(q),Ae(c),Ae(x.$$.fragment,e),Ae(C.$$.fragment,e),Ae(j.$$.fragment,e),R=!0)},o(e){Me(q),Me(c),Me(x.$$.fragment,e),Me(C.$$.fragment,e),Me(j.$$.fragment,e),R=!1},d(e){e&&O(t),q&&q.d(),W[l].d(),Fe(x),Fe(C),Fe(j),K&&K.d(),L=!1,o(z)}}}function rA(e){let t,n,r,i,o;return n=new ru({props:{data:e[0]?cc:uc}}),{c(){t=A("button"),Be(n.$$.fragment),D(t,"type","button"),D(t,"class","jse-replace-toggle svelte-18vllqh"),D(t,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,a){_(s,t,a),Ve(n,t,null),r=!0,i||(o=N(t,"click",e[11]),i=!0)},p(e,t){const r={};1&t&&(r.data=e[0]?cc:uc),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n),i=!1,o()}}}function iA(t){let n,r;return n=new ru({props:{data:$c}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function oA(t){let n,r;return n=new ru({props:{data:pc,spin:!0}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function sA(e){let t,n,r,i,s,a,l,c;return{c(){t=A("div"),n=A("input"),r=T(),i=A("button"),i.textContent="Replace",s=T(),a=A("button"),a.textContent="All",D(n,"class","jse-replace-input svelte-18vllqh"),D(n,"title","Enter replacement text"),D(n,"type","text"),D(n,"placeholder","Replace"),D(i,"type","button"),D(i,"title","Replace current occurrence (Ctrl+Enter)"),D(i,"class","svelte-18vllqh"),D(a,"type","button"),D(a,"title","Replace all occurrences"),D(a,"class","svelte-18vllqh"),D(t,"class","jse-replace-section svelte-18vllqh")},m(o,u){_(o,t,u),k(t,n),F(n,e[9]),k(t,r),k(t,i),k(t,s),k(t,a),l||(c=[N(n,"input",e[25]),N(i,"click",e[14]),N(a,"click",e[15])],l=!0)},p(e,t){512&t&&n.value!==e[9]&&F(n,e[9])},d(e){e&&O(t),l=!1,o(c)}}}function aA(e){let t,n,r=e[1]&&nA(e);return{c(){r&&r.c(),t=j()},m(e,i){r&&r.m(e,i),_(e,t,i),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&Ae(r,1)):(r=nA(e),r.c(),Ae(r,1),r.m(t.parentNode,t)):r&&(Oe(),Me(r,1,1,(()=>{r=null})),Ee())},i(e){n||(Ae(r),n=!0)},o(e){Me(r),n=!1},d(e){r&&r.d(e),e&&O(t)}}}function lA(e){e.select()}function cA(e,t,n){let r,i,{show:o=!1}=t,{searching:s}=t,{resultCount:a=0}=t,{activeIndex:l=0}=t,{showReplace:c=!1}=t,{readOnly:u=!1}=t,{onChange:h=li}=t,{onPrevious:d=li}=t,{onNext:f=li}=t,{onReplace:p=li}=t,{onReplaceAll:m=li}=t,{onClose:g=li}=t,v="",y="",w="";function b(){n(0,c=!c&&!u)}function x(){u||p(v,w)}return e.$$set=e=>{"show"in e&&n(1,o=e.show),"searching"in e&&n(2,s=e.searching),"resultCount"in e&&n(16,a=e.resultCount),"activeIndex"in e&&n(3,l=e.activeIndex),"showReplace"in e&&n(0,c=e.showReplace),"readOnly"in e&&n(4,u=e.readOnly),"onChange"in e&&n(17,h=e.onChange),"onPrevious"in e&&n(5,d=e.onPrevious),"onNext"in e&&n(6,f=e.onNext),"onReplace"in e&&n(18,p=e.onReplace),"onReplaceAll"in e&&n(19,m=e.onReplaceAll),"onClose"in e&&n(7,g=e.onClose)},e.$$.update=()=>{65536&e.$$.dirty&&n(10,r=a>=ln?"999+":String(a)),131072&e.$$.dirty&&n(20,i=ta(h,300)),1048832&e.$$.dirty&&i(v),2&e.$$.dirty&&o&&""!==v&&h(v)},[c,o,s,l,u,d,f,g,v,w,r,b,function(e){e.preventDefault(),v!==y?(y=v,i.cancel(),h(v)):f()},function(e){e.stopPropagation();const t=Kl(e);"Enter"===t&&(e.preventDefault(),f()),"Shift+Enter"===t&&(e.preventDefault(),d()),"Ctrl+Enter"!==t&&"Command+Enter"!==t||(e.preventDefault(),c?x():f()),"Ctrl+H"===t&&(e.preventDefault(),b()),"Escape"===t&&(e.preventDefault(),g())},x,function(){u||m(v,w)},a,h,p,m,i,function(){v=this.value,n(8,v)},()=>f(),()=>d(),()=>g(),function(){w=this.value,n(9,w)}]}class uA extends He{constructor(e){super(),qe(this,e,cA,aA,u,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const{window:hA}=je;function dA(e){let t,n,r;function i(t){e[72](t)}let o={json:e[7],selection:e[9],readOnly:e[0],historyState:e[20],onExpandAll:e[39],onCollapseAll:e[40],onUndo:e[35],onRedo:e[36],onSort:e[37],onTransform:e[38],onContextMenu:e[44],onCopy:e[33],onRenderMenu:e[4]};return void 0!==e[16]&&(o.showSearch=e[16]),t=new ME({props:o}),ue.push((()=>ze(t,"showSearch",i))),{c(){Be(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const i={};128&r[0]&&(i.json=e[7]),512&r[0]&&(i.selection=e[9]),1&r[0]&&(i.readOnly=e[0]),1048576&r[0]&&(i.historyState=e[20]),16&r[0]&&(i.onRenderMenu=e[4]),!n&&65536&r[0]&&(n=!0,i.showSearch=e[16],ye((()=>n=!1))),t.$set(i)},i(e){r||(Ae(t.$$.fragment,e),r=!0)},o(e){Me(t.$$.fragment,e),r=!1},d(e){Fe(t,e)}}}function fA(e){let t,n;return t=new tA({props:{json:e[7],state:e[14],selection:e[9],onSelect:e[47]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};128&n[0]&&(r.json=e[7]),16384&n[0]&&(r.state=e[14]),512&n[0]&&(r.selection=e[9]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function pA(t){let n;return{c(){n=A("div"),n.innerHTML='<div class="jse-loading-space svelte-1wno2xw"></div> \n      <div class="jse-loading svelte-1wno2xw">loading...</div>',D(n,"class","jse-contents svelte-1wno2xw")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function mA(e){let t,n,r,i,o,s,a,l,c;const u=[vA,gA],h=[];function d(e,t){return void 0===e[7]?0:1}return i=d(e),o=h[i]=u[i](e),{c(){t=A("label"),n=A("input"),r=T(),o.c(),s=j(),D(n,"class","jse-hidden-input svelte-1wno2xw"),D(n,"tabindex","-1"),D(t,"class","jse-hidden-input-label svelte-1wno2xw")},m(o,u){_(o,t,u),k(t,n),e[73](n),_(o,r,u),h[i].m(o,u),_(o,s,u),a=!0,l||(c=N(n,"paste",e[34]),l=!0)},p(e,t){let n=i;i=d(e),i===n?h[i].p(e,t):(Oe(),Me(h[n],1,1,(()=>{h[n]=null})),Ee(),o=h[i],o?o.p(e,t):(o=h[i]=u[i](e),o.c()),Ae(o,1),o.m(s.parentNode,s))},i(e){a||(Ae(o),a=!0)},o(e){Me(o),a=!1},d(n){n&&O(t),e[73](null),n&&O(r),h[i].d(n),n&&O(s),l=!1,c()}}}function gA(e){let t,n,r,i,o,s,a,l,c,u;n=new uA({props:{show:e[16],resultCount:e[19]?e[19].count:0,activeIndex:e[19]?e[19].activeIndex:0,showReplace:e[17],searching:e[18],readOnly:e[0],onChange:e[26],onNext:e[27],onPrevious:e[28],onReplace:e[29],onReplaceAll:e[30],onClose:e[31]}}),o=new OE({props:{value:e[7],path:e[25],state:e[14],selection:e[23],searchResult:e[19]&&e[19].itemsWithActive,validationErrors:e[22],context:e[10],onDragSelectionStart:li}});let h=e[15]&&yA(e),d=e[21]&&wA(e);return c=new $u({props:{validationErrors:e[11],selectError:e[32]}}),{c(){t=A("div"),Be(n.$$.fragment),r=T(),i=A("div"),Be(o.$$.fragment),s=T(),h&&h.c(),a=T(),d&&d.c(),l=T(),Be(c.$$.fragment),D(t,"class","jse-search-box-container svelte-1wno2xw"),D(i,"class","jse-contents svelte-1wno2xw"),D(i,"data-jsoneditor-scrollable-contents",!0)},m(f,p){_(f,t,p),Ve(n,t,null),_(f,r,p),_(f,i,p),Ve(o,i,null),e[74](i),_(f,s,p),h&&h.m(f,p),_(f,a,p),d&&d.m(f,p),_(f,l,p),Ve(c,f,p),u=!0},p(e,t){const r={};65536&t[0]&&(r.show=e[16]),524288&t[0]&&(r.resultCount=e[19]?e[19].count:0),524288&t[0]&&(r.activeIndex=e[19]?e[19].activeIndex:0),131072&t[0]&&(r.showReplace=e[17]),262144&t[0]&&(r.searching=e[18]),1&t[0]&&(r.readOnly=e[0]),n.$set(r);const i={};128&t[0]&&(i.value=e[7]),16384&t[0]&&(i.state=e[14]),8388608&t[0]&&(i.selection=e[23]),524288&t[0]&&(i.searchResult=e[19]&&e[19].itemsWithActive),4194304&t[0]&&(i.validationErrors=e[22]),1024&t[0]&&(i.context=e[10]),o.$set(i),e[15]?h?(h.p(e,t),32768&t[0]&&Ae(h,1)):(h=yA(e),h.c(),Ae(h,1),h.m(a.parentNode,a)):h&&(Oe(),Me(h,1,1,(()=>{h=null})),Ee()),e[21]?d?(d.p(e,t),2097152&t[0]&&Ae(d,1)):(d=wA(e),d.c(),Ae(d,1),d.m(l.parentNode,l)):d&&(Oe(),Me(d,1,1,(()=>{d=null})),Ee());const s={};2048&t[0]&&(s.validationErrors=e[11]),c.$set(s)},i(e){u||(Ae(n.$$.fragment,e),Ae(o.$$.fragment,e),Ae(h),Ae(d),Ae(c.$$.fragment,e),u=!0)},o(e){Me(n.$$.fragment,e),Me(o.$$.fragment,e),Me(h),Me(d),Me(c.$$.fragment,e),u=!1},d(u){u&&O(t),Fe(n),u&&O(r),u&&O(i),Fe(o),e[74](null),u&&O(s),h&&h.d(u),u&&O(a),d&&d.d(u),u&&O(l),Fe(c,u)}}}function vA(e){let t,n,r,i;const o=[xA,bA],s=[];function a(e,t){return""===e[8]||void 0===e[8]?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=j()},m(e,n){s[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Ae(n,1),n.m(r.parentNode,r))},i(e){i||(Ae(n),i=!0)},o(e){Me(n),i=!1},d(e){s[t].d(e),e&&O(r)}}}function yA(e){let t,n;return t=new uu({props:{type:"info",message:`You pasted a JSON ${Array.isArray(e[15].contents)?"array":"object"} as text`,actions:[{icon:Ac,text:"Paste as JSON instead",onMouseDown:e[45]},{text:"Leave as is",onClick:e[46]}]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};32768&n[0]&&(r.message=`You pasted a JSON ${Array.isArray(e[15].contents)?"array":"object"} as text`),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function wA(e){let t,n;return t=new uu({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:e[0]?[]:[{icon:hc,text:"Ok",onClick:e[5]},{icon:gc,text:"Repair manually instead",onClick:e[3]}]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};9&n[0]&&(r.actions=e[0]?[]:[{icon:hc,text:"Ok",onClick:e[5]},{icon:gc,text:"Repair manually instead",onClick:e[3]}]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function bA(e){let t,n,r,i,o;return t=new uu({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:e[0]?[]:[{icon:gc,text:"Repair manually",onClick:e[3]}]}}),{c(){Be(t.$$.fragment),n=T(),r=A("div"),i=P(e[8]),D(r,"class","jse-preview svelte-1wno2xw")},m(e,s){Ve(t,e,s),_(e,n,s),_(e,r,s),k(r,i),o=!0},p(e,n){const r={};9&n[0]&&(r.actions=e[0]?[]:[{icon:gc,text:"Repair manually",onClick:e[3]}]),t.$set(r),(!o||256&n[0])&&V(i,e[8])},i(e){o||(Ae(t.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),o=!1},d(e){Fe(t,e),e&&O(n),e&&O(r)}}}function xA(e){let t,n;return t=new NE({props:{readOnly:e[0]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.readOnly=e[0]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function $A(e){let t,n,r,i,s,a,l,c,u=e[1]&&dA(e),h=e[2]&&fA(e);const d=[mA,pA],f=[];return i=function(e,t){return e[24]?1:0}(e),s=f[i]=d[i](e),{c(){t=A("div"),u&&u.c(),n=T(),h&&h.c(),r=T(),s.c(),D(t,"class","jse-tree-mode svelte-1wno2xw"),U(t,"no-main-menu",!e[1])},m(o,s){_(o,t,s),u&&u.m(t,null),k(t,n),h&&h.m(t,null),k(t,r),f[i].m(t,null),e[75](t),a=!0,l||(c=[N(hA,"mousedown",e[48]),N(t,"keydown",e[41]),N(t,"mousedown",e[42]),N(t,"contextmenu",e[43])],l=!0)},p(e,i){e[1]?u?(u.p(e,i),2&i[0]&&Ae(u,1)):(u=dA(e),u.c(),Ae(u,1),u.m(t,n)):u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee()),e[2]?h?(h.p(e,i),4&i[0]&&Ae(h,1)):(h=fA(e),h.c(),Ae(h,1),h.m(t,r)):h&&(Oe(),Me(h,1,1,(()=>{h=null})),Ee()),s.p(e,i),2&i[0]&&U(t,"no-main-menu",!e[1])},i(e){a||(Ae(u),Ae(h),Ae(s),a=!0)},o(e){Me(u),Me(h),Me(s),a=!1},d(n){n&&O(t),u&&u.d(),h&&h.d(),f[i].d(),e[75](null),l=!1,o(c)}}}function kA(e){return e.length<1||1===e.length&&0===e[0]}function SA(){return!0}function CA(e,t,n){let r,i,o,s,a,l;const c=zt("jsoneditor:TreeMode"),u="undefined"==typeof window;c("isSSR:",u);const{open:h}=ae("simple-modal"),d=Ea(),f=Ea(),{openAbsolutePopup:p,closeAbsolutePopup:m}=ae("absolute-popup");let g,v,y,w=!1;const b=qC();let x,$,{readOnly:k=!1}=t,{externalContent:S}=t,{mainMenuBar:C=!0}=t,{navigationBar:_=!0}=t,{escapeControlCharacters:O=!1}=t,{escapeUnicodeCharacters:E=!1}=t,{validator:A=null}=t,{indentation:M=2}=t,{onError:P}=t,{onChange:T}=t,{onRenderValue:j}=t,{onRequestRepair:N=li}=t,{onRenderMenu:I=li}=t,{onClassName:R}=t,{onFocus:D}=t,{onBlur:L}=t,{onSortModal:z}=t,{onTransformModal:B}=t,V=!1;jc({onMount:re,onDestroy:ie,getWindow:()=>Bl(y),hasFocus:()=>V&&document.hasFocus()||Vl(y),onFocus:()=>{w=!0,D&&D()},onBlur:()=>{w=!1,L&&L()}});let F=Ia({},void 0,[],kA);let q,H=null;function W(e){return ur({json:e},10240)?kA:SA}let U,J=!1,K=!1,G=!1,Q="";async function X(e){c("search text updated",e),n(69,Q=e),await ge(),await Y(U&&U.activeItem)}async function Y(e){if(e){const t=e.path;n(14,F=za(x,F,t)),n(9,H=null),await ge(),await De(t)}}const Z=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Ir(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ta(e,t,{leading:r,maxWait:t,trailing:i})}((function(){""!==Q?(n(18,G=!0),setTimeout((()=>{c("searching...",Q);const e=n_(Q,x,F,ln);n(19,U=t_(x,e,U)),n(18,G=!1)}))):n(19,U=void 0)}),300);const ee=function(e={}){const t=e.maxItems||1e3;let n=[],r=0;function i(){return r<n.length}function o(){return r>0}function s(){return{canUndo:i(),canRedo:o(),length:n.length}}function a(){e.onChange&&e.onChange(s())}return{add:function(e){n=[e].concat(n.slice(r)).slice(0,t),r=0,a()},clear:function(){n=[],r=0,a()},getState:s,undo:function(){if(i()){const e=n[r];return r+=1,a(),e}},redo:function(){if(o())return r-=1,a(),n[r]}}}({onChange:e=>{n(20,te=e)}});let te=ee.getState();let ne=!1;function oe(e){void 0!==e.json&&function(e){if(void 0===e)return;const t=!da(x,e),r=void 0===x;if(c("update external json",{isChanged:t,isText:r}),!t)return;const i=F,o=x,s=$,a=ne,l=H;n(7,x=e),n(14,F=Ia(x,i,[],W(x),!1)),n(8,$=void 0),n(21,ne=!1),n(9,H=se(H,x)),le({previousJson:o,previousState:i,previousText:s,previousTextIsRepaired:a,previousSelection:l}),Z()}(e.json),void 0!==e.text&&function(e){if(void 0===e||void 0!==S.json)return;if(e===$)return;c("update external text");const t=x,r=F,i=$,o=ne,s=H;try{n(7,x=JSON.parse(e)),n(14,F=Ia(x,r,[],W(x),!1)),n(8,$=e),n(21,ne=!1),n(9,H=se(H,x))}catch(t){try{n(7,x=JSON.parse(Vn(e))),n(14,F=Ia(x,r,[],W(x),!1)),n(8,$=e),n(21,ne=!0),n(9,H=se(H,x))}catch(e){n(7,x=void 0),n(14,F=void 0),n(8,$=S.text),n(21,ne=!1),n(9,H=se(H,x))}}H||void 0!==x||""!==$&&void 0!==$||n(9,H=ce());le({previousJson:t,previousState:r,previousText:i,previousTextIsRepaired:o,previousSelection:s}),Z()}(e.text)}function se(e,t){return e&&Nn.existsIn(t,e.anchorPath)&&Nn.existsIn(t,e.focusPath)?e:(c("clearing selection: path does not exist anymore"),null)}function le({previousJson:e,previousState:t,previousText:n,previousTextIsRepaired:r,previousSelection:i}){void 0===e&&void 0===n||(void 0!==x?void 0!==e?ee.add({undo:{patch:[{op:"replace",path:"",value:e}],state:t,text:n,textIsRepaired:r,selection:vl(i)},redo:{patch:[{op:"replace",path:"",value:x}],state:F,text:$,textIsRepaired:ne,selection:vl(H)}}):ee.add({undo:{state:t,text:n,textIsRepaired:r,selection:vl(i)},redo:{json:x,state:F,text:$,textIsRepaired:ne,selection:vl(H)}}):void 0!==e&&ee.add({undo:{json:e,state:t,text:n,textIsRepaired:r,selection:vl(i)},redo:{text:$,textIsRepaired:ne,state:F,selection:vl(H)}}))}function ce(){return yl(x||{},F,{type:il,anchorPath:[],focusPath:[]})}function he(e,t){if(void 0===x)throw new Error("Cannot apply patch: no JSON");const r=x,i=F,o=$,s=ne,a=H;c("patch",e,t);const l=Nn.revertJSONPatch(x,e),u=Va(x,F,e),h="function"==typeof t?t(u.json,u.state,H):void 0;return n(7,x=h&&void 0!==h.json?h.json:u.json),n(14,F=h&&void 0!==h.state?h.state:u.state),n(8,$=void 0),n(21,ne=!1),n(9,H=h&&h.selection?h.selection:dl(r,0,e)),n(9,H=se(H,x)),ee.add({undo:{patch:l,state:i,text:o,textIsRepaired:s,selection:vl(a)},redo:{patch:e,state:F,text:$,textIsRepaired:ne,selection:vl(H)}}),{json:x,previousJson:r,undo:l,redo:e}}function de(){return H&&(H.type===il||H.type===nl||H.type===rl)}function fe(){!k&&H&&n(9,H=yl(x,F,{type:nl,path:H.focusPath,edit:!0}))}function pe(){!k&&H&&n(9,H=yl(x,F,{type:rl,path:H.focusPath,edit:!0}))}function me(){if(k||!H||H.type!==rl)return;const e=H.focusPath,t=e.concat(on),r=!Nn.getIn(F,t);n(14,F=Nn.setIn(F,t,r,!0));const i=Nn.getIn(x,e),o=r?String(i):Kn(i);o!==i&&Ve([{op:"replace",path:Nn.compileJSONPointer(e),value:o}])}async function ve(e=!0){if(k||!de())return;const t=wl(x,H,e?M:null);if(null==t)return;c("cut",{selection:H,clipboard:t,indent:e});try{await navigator.clipboard.writeText(t)}catch(e){P(e)}const{operations:n,newSelection:r}=e_(x,F,H);Ve(n,(()=>({selection:r})))}async function ye(e=!0){const t=wl(x,H,e?M:null);if(null!=t){c("copy",{clipboard:t,indent:e});try{await navigator.clipboard.writeText(t)}catch(e){P(e)}}}function we(){h(f_,{},{...pn,styleWindow:{...pn.styleWindow,width:"450px"}},{onClose:()=>setTimeout(D)})}function be(e){if(void 0!==x){const t=H||ce(),n=GC(x,F,t,e);c("paste",{clipboardText:e,operations:n,selectionOrDefault:t}),Ve(n,((e,t)=>{let r=t;return n.filter((e=>qn(e.value))).forEach((t=>{const n=Aa(x,t.path);r=qe(e,r,n)})),{state:r}}))}else c("paste text",{clipboardText:e}),function(e,t){const r=F,i=x,o=$,s={json:x,text:$},a=ne,l=H;try{n(7,x=JSON.parse(e)),n(14,F=Ia(x,r,[],kA)),n(8,$=void 0),n(21,ne=!1)}catch(t){try{n(7,x=JSON.parse(Vn(e))),n(14,F=Ia(x,r,[],kA)),n(8,$=e),n(21,ne=!0)}catch(t){n(7,x=void 0),n(14,F=Ia(x,Ra(x),[],kA)),n(8,$=e),n(21,ne=!1)}}if("function"==typeof t){const e=t(x,F,H);n(7,x=e&&e.json?e.json:x),n(14,F=e&&e.state?e.state:F),n(9,H=e&&e.selection?e.selection:H)}n(9,H=se(H,x)),le({previousJson:i,previousState:r,previousText:o,previousTextIsRepaired:a,previousSelection:l});Be(s,null)}(e,((e,t)=>{if(e){return{state:qe(e,t,[])}}}))}function xe(){if(k||!H)return;const e=H.type===nl||H.type===rl?yl(x,F,{type:il,anchorPath:H.anchorPath,focusPath:H.focusPath}):H;if(ha(H.focusPath)){c("remove root",{selection:H});T({text:"",json:void 0},{text:$,json:x},null)}else{const{operations:t,newSelection:n}=e_(x,F,e);c("remove",{operations:t,selection:H,newSelection:n}),Ve(t,(()=>({selection:n})))}}function $e(){if(k||!de()||ha(H.focusPath))return;c("duplicate",{selection:H});const e=function(e,t,n){const r=na(n);if(ha(r))throw new Error("Cannot duplicate root object");const i=ca(r),o=na(r),s=Nn.getIn(e,i);if(Array.isArray(s)){const e=na(n),t=e?parseInt(na(e),10)+1:0;return[...n.map(((e,n)=>({op:"copy",from:Nn.compileJSONPointer(e),path:Nn.compileJSONPointer(i.concat(n+t))})))]}{const e=qa(t,i),r=Ua(e,o,!1);return[...n.map((t=>{const n=HC(na(t),e);return{op:"copy",from:Nn.compileJSONPointer(t),path:Nn.compileJSONPointer(i.concat(n))}})),...r.map((e=>YC(i,e)))]}}(x,F,H.paths||[H.focusPath]);Ve(e)}function ke(){if(k||!H||H.type!==il&&H.type!==rl||ha(H.focusPath))return;c("extract",{selection:H});const e=function(e,t,n){if(n.type===rl)return[{op:"move",from:Nn.compileJSONPointer(n.focusPath),path:""}];if(n.type===il){const t=ca(n.focusPath),r=Nn.getIn(e,t);if(Array.isArray(r))return[{op:"replace",path:"",value:n.paths.map((e=>{const t=na(e);return r[t]}))}];{const e={};return n.paths.forEach((t=>{const n=na(t);e[n]=r[n]})),[{op:"replace",path:"",value:e}]}}throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(n))}(x,0,H);Ve(e,((e,t)=>{if(qn(e)){return{state:qe(e,t,[])}}})),Xe()}function Se(e){if(k||!H)return;const t=QC(x,H,e);if(void 0!==x){const n=JSON.stringify(t),r=GC(x,F,H,n);c("handleInsert",{type:e,operations:r,newValue:t,data:n});const i=na(r.filter((e=>"add"===e.op||"replace"===e.op)));Ve(r,((e,n)=>{if(i){const r=Aa(e,i.path);if(qn(t))return{state:Ba(e,n,r,SA),selection:yl(e||{},n,{type:tl,path:r})};if(""===t){return{selection:yl(e,n,{type:Fn(ha(r)?null:Nn.getIn(e,ca(r)))?nl:rl,path:r,edit:!0})}}}else;})),i&&(Xe(),""===t&&ge().then((()=>{setTimeout((()=>Ae("",!0)))})))}else{c("handleInsert",{type:e,newValue:t});const n=[];Fe(t,((e,t)=>({state:qe(e,t,n),selection:yl(e,t,{type:tl,path:n})}))),Xe()}}function Ce(e){H.type===nl&&n(9,H=yl(x,F,{type:rl,path:H.focusPath})),Se(e)}function _e(e){if(!k&&H)if(xl(H))try{const t=H.anchorPath,n=Nn.getIn(x,t),r=function(e,t){if("array"===t){if(Array.isArray(e))return e;if(Fn(e))return tr(e);if("string"==typeof e){const t=JSON.parse(e);if(Array.isArray(t))return t;if(Fn(t))return tr(t)}}if("object"===t){if(Array.isArray(e))return er(e);if(Fn(e))return e;if("string"==typeof e){const t=JSON.parse(e);if(Fn(t))return t;if(Array.isArray(t))return er(t)}}if("value"===t)return qn(e)?JSON.stringify(e):e;throw new Error(`Cannot convert ${Wn(e)} to ${t}`)}(n,e);if(r===n)return;const i=[{op:"replace",path:Nn.compileJSONPointer(t),value:r}];c("handleConvert",{selection:H,path:t,type:e,operations:i}),Ve(i,((e,t)=>({state:qe(e,t,H.focusPath)}))),Xe()}catch(e){P(e)}else P(new Error(`Cannot convert current selection to ${e}`))}function Oe(){const e=ll(x,F,H,!1),t=ca(H.focusPath);!ha(e.focusPath)&&da(t,ca(e.focusPath))?n(9,H=yl(x,F,{type:el,path:e.focusPath})):n(9,H=yl(x,F,{type:tl,path:t})),c("insert before",{selection:H,selectionBefore:e,parentPath:t}),ge().then(Qe)}function Ee(){const e=H.paths?na(H.paths):H.focusPath;c("insert after",e),n(9,H=yl(x,F,{type:el,path:e})),ge().then(Qe)}function Ae(e,t){const n=Bl(y).document.activeElement;n.isContentEditable&&(n.textContent=t?e:n.textContent+e,zl(n))}async function Me(e){if(!k&&H){if(H.type===nl){const t=!H.edit;return n(9,H={...H,edit:!0}),await ge(),void setTimeout((()=>Ae(e,t)))}if("{"===e)Se("object");else if("["===e)Se("array");else if(H.type===rl){if(!qn(Nn.getIn(x,H.focusPath))){const t=!H.edit;n(9,H={...H,edit:!0}),await ge(),setTimeout((()=>Ae(e,t)))}}else await async function(e){if(k||!H)return;Se("value");const t=!H.edit,r=H.focusPath,i=Nn.getIn(x,ca(r));n(9,H=yl(x,F,{type:Array.isArray(i)||!i||H.type===rl?rl:nl,path:r,edit:!0})),await ge(),setTimeout((()=>Ae(e,t)))}(e)}}function Pe(){if(k)return;if(!ee.getState().canUndo)return;const e=ee.undo();if(!e)return;const t={json:x,text:$};n(9,H=e.undo.selection),n(7,x=e.undo.patch?Nn.immutableJSONPatch(x,e.undo.patch):e.undo.json),n(14,F=e.undo.state),n(8,$=e.undo.text),n(21,ne=e.undo.textIsRepaired),c("undo",{item:e,json:x,state:F,selection:H});Be(t,{json:x,previousJson:t.json,redo:e.undo.patch,undo:e.redo.patch}),Xe(),H&&De(H.focusPath)}function Te(){if(k)return;if(!ee.getState().canRedo)return;const e=ee.redo();if(!e)return;const t={json:x,text:$};n(9,H=e.redo.selection),n(7,x=e.redo.patch?Nn.immutableJSONPatch(x,e.redo.patch):e.redo.json),n(14,F=e.redo.state),n(8,$=e.redo.text),n(21,ne=e.redo.textIsRepaired),c("redo",{item:e,json:x,state:F,selection:H});Be(t,{json:x,previousJson:t.json,redo:e.redo.patch,undo:e.undo.patch}),Xe(),H&&De(H.focusPath)}function je(e){k||(V=!0,z({id:d,json:x,selectedPath:e,onSort:async t=>{c("onSort",e,t),Ve(t,((t,n)=>({state:qe(t,n,e),selection:yl(t,n,{type:rl,path:e})})))},onClose:()=>{V=!1,Xe()}}))}function Ne(){if(!H)return;je(ml(x,H))}function Ie({id:e,selectedPath:t,onTransform:n,onClose:r}){V=!0,B({id:e||f,json:x,selectedPath:t,onTransform:n?e=>{n({operations:e,json:x,transformedJson:Nn.immutableJSONPatch(x,e)})}:e=>{c("onTransform",t,e),Ve(e,((e,n)=>({state:qe(e,n,t),selection:yl(e,n,{type:rl,path:t})})))},onClose:()=>{V=!1,Xe(),r&&r()}})}function Re(){if(!H)return;Ie({selectedPath:ml(x,H)})}async function De(e){n(14,F=za(x,F,e)),await ge();const t=Le(e);if(t){c("scrollTo",{path:e,elem:t,refContents:g});const n=-g.getBoundingClientRect().height/4;b(t,{container:g,offset:n,duration:300})}}function Le(e){return g?g.querySelector(`div[data-path="${Hl(e)}"]`):null}function ze(e){const t=Le(e);if(!t||!g)return;const n=g.getBoundingClientRect(),r=t.getBoundingClientRect(),i=qn(Nn.getIn(x,e))?20:r.height;r.top<n.top+20?b(t,{container:g,offset:-20,duration:0}):r.top+i>n.bottom-20&&b(t,{container:g,offset:-(n.height-i-20),duration:0})}function Be(e,t){void 0!==$?T({text:$,json:void 0},e,t):void 0!==x&&T({text:void 0,json:x},e,t)}function Ve(e,t){if(k)return;c("handlePatch",e,t);const r={json:x,text:$},i=he(e,t);return n(15,q=void 0),Be(r,i),i}function Fe(e,t){const r=F,i=x,o=$,s={json:x,text:$},a=ne,l=H,c=Ia(e,r,[],kA),u="function"==typeof t?t(e,c,H):void 0;n(7,x=u&&void 0!==u.json?u.json:e),n(14,F=u&&void 0!==u.state?u.state:c),n(8,$=void 0),n(21,ne=!1),n(9,H=u&&u.selection?u.selection:H),n(9,H=se(H,x)),le({previousJson:i,previousState:r,previousText:o,previousTextIsRepaired:a,previousSelection:l});Be(s,null)}function qe(e,t,n){return Ba(e,t,n,!ur({json:Nn.getIn(e,n)},10240)?SA:kA)}function He(e,t,r=!1){n(14,F=t?Ba(x,F,e,r?SA:kA):function(e,t,n){return Nn.updateIn(t,n,(t=>Ia(Nn.getIn(e,n),t,[],(()=>!1),!0)))}(x,F,e)),H&&!t&&function(e,t){return gl(e.focusPath,t)&&(e.focusPath.length>t.length||e.type===tl)}(H,e)&&n(9,H=null),setTimeout((()=>{Vl(y)||Xe()}))}function We(e,t){n(9,H=e?yl(x,F,e):null),!1!==(null==t?void 0:t.ensureFocus)&&setTimeout((()=>Xe()))}function Ue(e){c("openFind",{findAndReplace:e}),n(16,J=!1),n(17,K=!1),ge().then((()=>{n(16,J=!0),n(17,K=e)}))}function Je(e,t){c("handleExpandSection",e,t),n(14,F=function(e,t,n,r){return Ia(e,Nn.updateIn(t,n.concat(en),(e=>Pa(e.concat(r)))),n,(()=>!1))}(x,F,e,t))}function Ke(e){c("pasted json as text",e),n(15,q=e)}function Ge({anchor:e,left:t,top:n,width:r,height:i,offsetTop:o,offsetLeft:s,showTip:a}){V=!0,p(V_,{json:x,state:F,selection:H,showTip:a,onEditKey:fe,onEditValue:pe,onToggleEnforceString:me,onCut:ve,onCopy:ye,onPaste:we,onRemove:xe,onDuplicate:$e,onExtract:ke,onInsertBefore:Oe,onInsert:Ce,onConvert:_e,onInsertAfter:Ee,onSort:Ne,onTransform:Re,onCloseContextMenu(){m(),Xe()}},{left:t,top:n,offsetTop:o,offsetLeft:s,width:r,height:i,anchor:e,closeOnOuterClick:!0,onClose:()=>{V=!1,Xe()}})}function Qe(e){if(!k&&!(null==H?void 0:H.edit)){if(e&&(e.stopPropagation(),e.preventDefault()),e&&"contextmenu"===e.type&&e.target!==v)Ge({left:e.clientX,top:e.clientY,width:_n,height:Cn,showTip:!1});else{const e=null==g?void 0:g.querySelector(".jse-context-menu-button.jse-selected");if(e)Ge({anchor:e,offsetTop:2,width:_n,height:Cn,showTip:!1});else{const e=null==g?void 0:g.getBoundingClientRect();e&&Ge({top:e.top+2,left:e.left+2,width:_n,height:Cn,showTip:!1})}}return!1}}function Xe(){v&&(v.focus(),v.select())}function Ye(){return x}function Ze(){return F}function et(){return H}return e.$$set=e=>{"readOnly"in e&&n(0,k=e.readOnly),"externalContent"in e&&n(49,S=e.externalContent),"mainMenuBar"in e&&n(1,C=e.mainMenuBar),"navigationBar"in e&&n(2,_=e.navigationBar),"escapeControlCharacters"in e&&n(50,O=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(51,E=e.escapeUnicodeCharacters),"validator"in e&&n(52,A=e.validator),"indentation"in e&&n(53,M=e.indentation),"onError"in e&&n(54,P=e.onError),"onChange"in e&&n(55,T=e.onChange),"onRenderValue"in e&&n(56,j=e.onRenderValue),"onRequestRepair"in e&&n(3,N=e.onRequestRepair),"onRenderMenu"in e&&n(4,I=e.onRenderMenu),"onClassName"in e&&n(57,R=e.onClassName),"onFocus"in e&&n(58,D=e.onFocus),"onBlur"in e&&n(59,L=e.onBlur),"onSortModal"in e&&n(60,z=e.onSortModal),"onTransformModal"in e&&n(61,B=e.onTransformModal)},e.$$.update=()=>{1572864&e.$$.dirty[1]&&n(71,r=kl({escapeControlCharacters:O,escapeUnicodeCharacters:E})),640&e.$$.dirty[0]&&n(23,i=bl(x,H)),128&e.$$.dirty[0]|128&e.$$.dirty[2]&&Z(Q,x),262144&e.$$.dirty[1]&&oe(S),e.$$.dirty[0],128&e.$$.dirty[0]|2097152&e.$$.dirty[1]&&n(11,o=A?A(x):[]),2048&e.$$.dirty[0]&&n(22,s=function(e){let t;return e.forEach((e=>{const n=e.path.concat([an]);t=Nn.setIn(t,n,e,!0)})),e.forEach((e=>{let n=e.path;for(;n.length>0;){n=ca(n);const e=n.concat([an]);if(!Nn.existsIn(t,e)){const r={isChildError:!0,path:n,message:"Contains invalid data"};t=Nn.setIn(t,e,r,!0)}}})),t}(o)),64&e.$$.dirty[0]&&n(70,l=VC(g)),1&e.$$.dirty[0]|100663296&e.$$.dirty[1]|768&e.$$.dirty[2]&&n(10,a={readOnly:k,normalization:r,getFullJson:Ye,getFullState:Ze,getFullSelection:et,findElement:Le,focus:Xe,onPatch:Ve,onInsert:Se,onExpand:He,onSelect:We,onFind:Ue,onPasteJson:Ke,onExpandSection:Je,onRenderValue:j,onContextMenu:Ge,onClassName:R||li,onDrag:l.onDrag,onDragEnd:l.onDragEnd}),1024&e.$$.dirty[0]&&c("context changed",a)},[k,C,_,N,I,function(){return ne&&void 0!==x&&Fe(x),{json:x,text:$}},g,x,$,H,a,o,v,y,F,q,J,K,G,U,te,ne,s,i,u,[],X,async function(){n(19,U=U?function(e){const t=e.activeIndex<e.flatItems.length-1?e.activeIndex+1:e.flatItems.length>0?0:-1,n=e.flatItems[t],r=n?Nn.setIn(e.items,s_(n),!0,!0):e.items;return{...e,itemsWithActive:r,activeItem:n,activeIndex:t}}(U):U),await Y(U&&U.activeItem)},async function(){n(19,U=U?function(e){const t=e.activeIndex>0?e.activeIndex-1:e.flatItems.length-1,n=e.flatItems[t],r=n?Nn.setIn(e.items,s_(n),!0,!0):e.items;return{...e,itemsWithActive:r,activeItem:n,activeIndex:t}}(U):U),await Y(U&&U.activeItem)},async function(e,t){const n=U.activeItem;if(c("handleReplace",{replacementText:t,activeItem:n}),!U||!n)return;const{operations:r,newSelection:i}=function(e,t,n,r){const{field:i,path:o,start:s,end:a}=r;if(i===nn){const r=ca(o),i=na(o),l=KC(r,qa(t,r),i,i_(i,n,s,a));return{newSelection:dl(e,0,l),operations:l}}if(i===rn){const r=Nn.getIn(e,o);if(void 0===r)throw new Error(`Cannot replace: path not found ${Nn.compileJSONPointer(o)}`);const i="string"==typeof r?r:String(r),l=Nn.getIn(t,o.concat([on]))||!1,c=i_(i,n,s,a),u=[{op:"replace",path:Nn.compileJSONPointer(o),value:l?c:Kn(c)}];return{newSelection:dl(e,0,u),operations:u}}throw new Error(`Cannot replace: unknown type of search result field ${i}`)}(x,F,t,n);Ve(r,(()=>({selection:i}))),await ge(),await Y(U&&U.activeItem)},async function(e,t){c("handleReplaceAll",{text:e,replacementText:t});const{operations:n,newSelection:r}=function(e,t,n,r){const i=n_(n,e,t,1/0),o=[];for(let e=0;e<i.length;e++){const t=i[e-1],n=i[e];0!==e&&n.field===t.field&&da(n.path,t.path)?na(o).items.push(n):o.push({path:n.path,field:n.field,items:[n]})}o.sort(((e,t)=>e.field!==t.field?e.field===nn?1:-1:t.path.length-e.path.length));let s,a=[];return o.forEach((n=>{const{field:i,path:o,items:l}=n;if(i===nn){const n=ca(o),i=na(o),c=KC(n,qa(t,n),i,o_(i,r,l));a=a.concat(c),s=dl(e,0,c)}else{if(i!==rn)throw new Error(`Cannot replace: unknown type of search result field ${i}`);{const n=Nn.getIn(e,o);if(void 0===n)throw new Error(`Cannot replace: path not found ${Nn.compileJSONPointer(o)}`);const i="string"==typeof n?n:String(n),c=Nn.getIn(t,o.concat([on]))||!1,u=o_(i,r,l),h=[{op:"replace",path:Nn.compileJSONPointer(o),value:c?u:Kn(u)}];a=a.concat(h),s=dl(e,0,h)}}})),{operations:a,newSelection:s}}(x,F,e,t);Ve(n,(()=>({selection:r}))),await ge(),await Y(U&&U.activeItem)},function(){n(16,J=!1),n(17,K=!1),X(""),Xe()},function(e){c("select validation error",e),n(9,H=yl(x,F,{type:rl,path:e.path})),De(e.path),Xe()},ye,function(e){if(e.preventDefault(),k)return;const t=e.clipboardData.getData("text/plain");try{be(t)}catch(e){!function(e,t){h($_,{text:e,onParse:ir,onRepair:or,onApply:t,onRenderMenu:I,onFocus:D,onBlur:L},{...pn,styleWindow:{...pn.styleWindow,width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Xe()})}(t,(e=>{c("repaired pasted text: ",e),be(e)}))}},Pe,Te,function(){je([])},function(){Ie({selectedPath:[]})},function(){He([],!0,!0)},function(){He([],!1,!0)},function(e){const t=Kl(e).replace(/^Command\+/,"Ctrl+"),r=e.shiftKey;if("Ctrl+X"===t&&(e.preventDefault(),ve(!0)),"Ctrl+Shift+X"===t&&(e.preventDefault(),ve(!1)),"Ctrl+C"===t&&(e.preventDefault(),ye(!0)),"Ctrl+Shift+C"===t&&(e.preventDefault(),ye(!1)),"Ctrl+D"===t&&(e.preventDefault(),$e()),"Delete"!==t&&"Backspace"!==t||(e.preventDefault(),xe()),"Insert"===t&&(e.preventDefault(),Se("structure")),"Ctrl+A"===t&&(e.preventDefault(),n(9,H={type:rl,anchorPath:[],focusPath:[]})),"Ctrl+Q"===t&&Qe(e),"Up"!==t&&"Shift+Up"!==t||(e.preventDefault(),n(9,H=H?ll(x,F,H,r,!0)||H:hl(x,F)),ze(H.focusPath)),"Down"!==t&&"Shift+Down"!==t||(e.preventDefault(),n(9,H=H?cl(x,F,H,r,!0)||H:hl(x,F)),ze(H.focusPath)),"Left"!==t&&"Shift+Left"!==t||(e.preventDefault(),n(9,H=H?function(e,t,n,r=!1,i=!0){const{caret:o,previous:s}=ul(e,t,n,i);if(r)return n.type!==il?yl(e,t,{type:il,anchorPath:n.anchorPath,focusPath:n.focusPath}):null;if(o&&s)return yl(e,t,{type:s.type,path:s.path});const a=ca(n.focusPath),l=Nn.getIn(e,a);return n.type===rl&&Array.isArray(l)?yl(e,t,{type:il,anchorPath:n.focusPath,focusPath:n.focusPath}):n.type!==il||Array.isArray(l)?null:yl(e,t,{type:nl,path:n.focusPath})}(x,F,H,r,!k)||H:hl(x,F)),ze(H.focusPath)),"Right"!==t&&"Shift+Right"!==t||(e.preventDefault(),n(9,H=H?function(e,t,n,r=!1,i=!0){const{caret:o,next:s}=ul(e,t,n,i);return r?n.type!==il?yl(e,t,{type:il,anchorPath:n.anchorPath,focusPath:n.focusPath}):null:o&&s?yl(e,t,{type:s.type,path:s.path}):n.type===il?yl(e,t,{type:rl,path:n.focusPath}):null}(x,F,H,r,!k)||H:hl(x,F)),ze(H.focusPath)),"Enter"===t&&H){if(!k&&H.type===il&&1===H.paths.length){const e=H.focusPath,t=Nn.getIn(x,ca(e));Array.isArray(t)&&n(9,H=yl(x,F,{type:rl,path:e}))}if(k||H.type!==nl||(e.preventDefault(),n(9,H={...H,edit:!0})),H.type===rl){e.preventDefault();qn(Nn.getIn(x,H.focusPath))?He(H.focusPath,!0):k||n(9,H={...H,edit:!0})}}if(t.length===(t.startsWith("Shift+")?7:1)&&H)return e.preventDefault(),void Me(e.key);if("Enter"===t&&(H.type===el||H.type===tl))return e.preventDefault(),void Me("");if("Ctrl+Enter"===t&&H&&H.type===rl){const e=Nn.getIn(x,H.focusPath);Jn(e)&&window.open(e,"_blank")}if("Escape"===t&&H&&(e.preventDefault(),n(9,H=null)),"Ctrl+F"===t&&(e.preventDefault(),Ue(!1)),"Ctrl+H"===t&&(e.preventDefault(),Ue(!0)),"Ctrl+Z"===t){e.preventDefault();const t=document.activeElement;t&&t.blur&&t.focus?(t.blur(),setTimeout((()=>{Pe(),setTimeout((()=>t.select()))}))):Pe()}if("Ctrl+Shift+Z"===t){e.preventDefault();const t=document.activeElement;t&&t.blur&&t.focus?(t.blur(),setTimeout((()=>{Te(),setTimeout((()=>t.select()))}))):Te()}},function(e){c("handleMouseDown",e),setTimeout((()=>{setTimeout((()=>{w||Il(e.target,"BUTTON")||(Xe(),H||void 0!==x||""!==$&&void 0!==$||n(9,H=ce()))}))}))},Qe,function(e){k||Ge({anchor:Fl(e.target,"BUTTON"),offsetTop:0,width:_n,height:Cn,showTip:!0})},async function(){c("apply pasted json",q);const{path:e,contents:t}=q;n(9,H=yl(x,F,{type:rl,path:e})),await ge(),Ve([{op:"replace",path:Nn.compileJSONPointer(e),value:t}],((t,n)=>({state:qe(t,n,e)})))},function(){c("clear pasted json"),n(15,q=void 0)},function(e){n(9,H=e),Xe(),De(e.focusPath)},function(e){const t=!Dl(e.target,(e=>e===y));t&&H&&H.edit&&(c("click outside the editor, stop edit mode"),n(9,H={...H,edit:!1}),w&&v&&(v.focus(),v.blur()),ge().then((()=>{setTimeout((()=>{v&&v.blur()}))})))},S,O,E,A,M,P,T,j,R,D,L,z,B,function(e=(()=>!0)){n(14,F=Ia(x,F,[],e,!0))},function(){return x},he,Ie,De,Le,Xe,Q,l,r,function(e){J=e,n(16,J)},function(e){ue[e?"unshift":"push"]((()=>{v=e,n(12,v)}))},function(e){ue[e?"unshift":"push"]((()=>{g=e,n(6,g)}))},function(e){ue[e?"unshift":"push"]((()=>{y=e,n(13,y)}))}]}class _A extends He{constructor(e){super(),qe(this,e,CA,$A,u,{readOnly:0,externalContent:49,mainMenuBar:1,navigationBar:2,escapeControlCharacters:50,escapeUnicodeCharacters:51,validator:52,indentation:53,onError:54,onChange:55,onRenderValue:56,onRequestRepair:3,onRenderMenu:4,onClassName:57,onFocus:58,onBlur:59,onSortModal:60,onTransformModal:61,expand:62,get:63,patch:64,acceptAutoRepair:5,openTransformModal:65,scrollTo:66,findElement:67,focus:68},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[62]}get get(){return this.$$.ctx[63]}get patch(){return this.$$.ctx[64]}get acceptAutoRepair(){return this.$$.ctx[5]}get openTransformModal(){return this.$$.ctx[65]}get scrollTo(){return this.$$.ctx[66]}get findElement(){return this.$$.ctx[67]}get focus(){return this.$$.ctx[68]}}const OA={id:"javascript",name:"JavaScript",description:"\n<p>\n  Enter a JavaScript function to filter, sort, or transform the data.\n</p>\n",createQuery:function(e,t){const{filter:n,sort:r,projection:i}=t,o=[];if(n&&n.path&&n.relation&&n.value){const e=`item => item${du(n.path)}`,t="string"==typeof function(e){if(""===e)return"";const t=e.toLowerCase();if("null"===t)return null;if("true"===t)return!0;if("false"===t)return!1;if("undefined"===t)return;const n=Number(e),r=parseFloat(e);return isNaN(n)||isNaN(r)?e:n}(n.value)?`'${n.value}'`:n.value;o.push(`  data = data.filter(${e} ${n.relation} ${t})\n`)}r&&r.path&&r.direction&&("desc"===r.direction?o.push(`  data = data.slice().sort((a, b) => {\n    // sort descending\n    const valueA = a${du(r.path)}\n    const valueB = b${du(r.path)}\n    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0\n  })\n`):o.push(`  data = data.slice().sort((a, b) => {\n    // sort ascending\n    const valueA = a${du(r.path)}\n    const valueB = b${du(r.path)}\n    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0\n  })\n`));if(i&&i.paths)if(i.paths.length>1){const e=i.paths.map((e=>{const t=e[e.length-1]||"item",n=`item${du(e)}`;return`    ${JSON.stringify(t)}: ${n}`}));o.push(`  data = data.map(item => ({\n${e.join(",\n")}})\n  )\n`)}else{const e=`item${du(i.paths[0])}`;o.push(`  data = data.map(item => ${e})\n`)}return o.push("  return data\n"),`function query (data) {\n${o.join("")}}`},executeQuery:function(e,t){const n=new Function('"use strict";\n\n'+t+'\n\nif (typeof query !== "function") {\n  throw new Error("Cannot execute query: expecting a function named \'query\' but is undefined")\n}\n\nreturn query;\n')()(e);return void 0!==n?n:null}};function EA(e){let t,n,r,i,o,s;return n=new ru({props:{data:!0===e[0]?N_:j_}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-boolean-toggle svelte-zs5o25"),D(t,"title",r=e[1]?`Boolean value ${e[0]}`:"Click to toggle this boolean value")},m(r,a){_(r,t,a),Ve(n,t,null),i=!0,o||(s=N(t,"mousedown",e[2]),o=!0)},p(e,[o]){const s={};1&o&&(s.data=!0===e[0]?N_:j_),n.$set(s),(!i||3&o&&r!==(r=e[1]?`Boolean value ${e[0]}`:"Click to toggle this boolean value"))&&D(t,"title",r)},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n),o=!1,s()}}}function AA(e,t,n){let{path:r}=t,{value:i}=t,{readOnly:o}=t,{onPatch:s}=t,{onSelect:a}=t;return e.$$set=e=>{"path"in e&&n(3,r=e.path),"value"in e&&n(0,i=e.value),"readOnly"in e&&n(1,o=e.readOnly),"onPatch"in e&&n(4,s=e.onPatch),"onSelect"in e&&n(5,a=e.onSelect)},[i,o,function(e){e.stopPropagation(),o||(s([{op:"replace",path:Nn.compileJSONPointer(r),value:!i}]),a({type:rl,path:r}))},r,s,a]}class MA extends He{constructor(e){super(),qe(this,e,AA,EA,u,{path:3,value:0,readOnly:1,onPatch:4,onSelect:5})}}function PA(t){let n;return{c(){n=A("div"),D(n,"class","jse-color-picker-popup svelte-1gn8yt9")},m(e,r){_(e,n,r),t[4](n)},p:e,i:e,o:e,d(e){e&&O(n),t[4](null)}}}function TA(e,t,n){let r,i,{color:o}=t,{onChange:s}=t,{showOnTop:a}=t;return re((async()=>{const e=(await Promise.resolve().then((function(){return VL}))).default;i=new e({parent:r,color:o,popup:a?"top":"bottom",onDone(e){const t=1===e.rgba[3]?e.hex.substring(0,7):e.hex;s(t)}}),i.show()})),ie((()=>{i&&i.destroy()})),e.$$set=e=>{"color"in e&&n(1,o=e.color),"onChange"in e&&n(2,s=e.onChange),"showOnTop"in e&&n(3,a=e.showOnTop)},[r,o,s,a,function(e){ue[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class jA extends He{constructor(e){super(),qe(this,e,TA,PA,a,{color:1,onChange:2,showOnTop:3})}}function NA(t){let n,r,i,o;return{c(){n=A("button"),D(n,"class","jse-color-picker-button svelte-fk1u9y"),q(n,"background",t[2]),D(n,"title",r=t[1]?`Color ${t[0]}`:"Click to open a color picker")},m(e,r){_(e,n,r),i||(o=N(n,"click",t[3]),i=!0)},p(e,[t]){4&t&&q(n,"background",e[2]),3&t&&r!==(r=e[1]?`Color ${e[0]}`:"Click to open a color picker")&&D(n,"title",r)},i:e,o:e,d(e){e&&O(n),i=!1,o()}}}function IA(e,t,n){let r;const{openAbsolutePopup:i}=ae("absolute-popup");let{path:o}=t,{value:s}=t,{readOnly:a}=t,{onPatch:l}=t,{onSelect:c}=t;function u(e){l([{op:"replace",path:Nn.compileJSONPointer(o),value:e}]),h()}function h(){c({type:rl,path:o})}return e.$$set=e=>{"path"in e&&n(4,o=e.path),"value"in e&&n(0,s=e.value),"readOnly"in e&&n(1,a=e.readOnly),"onPatch"in e&&n(5,l=e.onPatch),"onSelect"in e&&n(6,c=e.onSelect)},e.$$.update=()=>{1&e.$$.dirty&&n(2,r=Hn(s))},[s,a,r,function(e){if(a)return;const t=e.target.getBoundingClientRect().top,n=Bl(e.target).innerHeight;i(jA,{color:s,onChange:u,showOnTop:n-t<300&&t>300},{anchor:e.target,closeOnOuterClick:!0,onClose:h,offsetTop:18,offsetLeft:-8,height:300})},o,l,c]}class RA extends He{constructor(e){super(),qe(this,e,IA,NA,u,{path:4,value:0,readOnly:1,onPatch:5,onSelect:6})}}function DA(e){const t=Wn(e);return F_("jse-value","jse-"+t,{"jse-url":Jn(e),"jse-empty":"string"==typeof e&&0===e.length})}function LA(e){let t,n;return t=new lO({props:{value:e[1].escapeValue(e[0]),onChange:e[3],onCancel:e[4],onPaste:e[5],onFind:e[2],onValueClass:e[6]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,[n]){const r={};3&n&&(r.value=e[1].escapeValue(e[0])),4&n&&(r.onFind=e[2]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function zA(e,t,n){let{path:r}=t,{value:i}=t,{normalization:o}=t,{enforceString:s}=t,{onPatch:a}=t,{onPasteJson:l}=t,{onSelect:c}=t,{onFind:u}=t;function h(e){return s?e:Kn(e)}return e.$$set=e=>{"path"in e&&n(7,r=e.path),"value"in e&&n(0,i=e.value),"normalization"in e&&n(1,o=e.normalization),"enforceString"in e&&n(8,s=e.enforceString),"onPatch"in e&&n(9,a=e.onPatch),"onPasteJson"in e&&n(10,l=e.onPasteJson),"onSelect"in e&&n(11,c=e.onSelect),"onFind"in e&&n(2,u=e.onFind)},[i,o,u,function(e,t){a([{op:"replace",path:Nn.compileJSONPointer(r),value:h(o.unescapeValue(e))}]),t===An&&c({type:rl,path:r,nextInside:!0}),t===En&&c({type:rl,path:r},{ensureFocus:!1})},function(){c({type:rl,path:r})},function(e){try{const t=JSON.parse(e);qn(t)&&l({path:r,contents:t})}catch(e){}},function(e){return DA(h(o.unescapeValue(e)))},r,s,a,l,c]}class BA extends He{constructor(e){super(),qe(this,e,zA,LA,u,{path:7,value:0,normalization:1,enforceString:8,onPatch:9,onPasteJson:10,onSelect:11,onFind:2})}}function VA(t){let n,r=Nl(t[1].escapeValue(t[0]))+"";return{c(){n=P(r)},m(e,t){_(e,n,t)},p(e,t){3&t&&r!==(r=Nl(e[1].escapeValue(e[0]))+"")&&V(n,r)},i:e,o:e,d(e){e&&O(n)}}}function FA(e){let t,n;return t=new oO({props:{text:e[1].escapeValue(e[0]),searchResult:e[2]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};3&n&&(r.text=e[1].escapeValue(e[0])),4&n&&(r.searchResult=e[2]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function qA(e){let t,n,r,i,s,a,l,c;const u=[FA,VA],h=[];function d(e,t){return e[2]?0:1}return n=d(e),r=h[n]=u[n](e),{c(){t=A("div"),r.c(),D(t,"data-type","selectable-value"),D(t,"class",i=g(DA(e[0]))+" svelte-6ci2p7"),D(t,"title",s=e[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(r,i){_(r,t,i),h[n].m(t,null),a=!0,l||(c=[N(t,"click",e[4]),N(t,"dblclick",e[5])],l=!0)},p(e,[o]){let l=n;n=d(e),n===l?h[n].p(e,o):(Oe(),Me(h[l],1,1,(()=>{h[l]=null})),Ee(),r=h[n],r?r.p(e,o):(r=h[n]=u[n](e),r.c()),Ae(r,1),r.m(t,null)),(!a||1&o&&i!==(i=g(DA(e[0]))+" svelte-6ci2p7"))&&D(t,"class",i),(!a||8&o&&s!==(s=e[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&D(t,"title",s)},i(e){a||(Ae(r),a=!0)},o(e){Me(r),a=!1},d(e){e&&O(t),h[n].d(),l=!1,o(c)}}}function HA(e,t,n){let r,{path:i}=t,{value:o}=t,{readOnly:s}=t,{normalization:a}=t,{onSelect:l}=t,{searchResult:c}=t;return e.$$set=e=>{"path"in e&&n(6,i=e.path),"value"in e&&n(0,o=e.value),"readOnly"in e&&n(7,s=e.readOnly),"normalization"in e&&n(1,a=e.normalization),"onSelect"in e&&n(8,l=e.onSelect),"searchResult"in e&&n(2,c=e.searchResult)},e.$$.update=()=>{1&e.$$.dirty&&n(3,r=Jn(o))},[o,a,c,r,function(e){"string"==typeof o&&r&&e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),window.open(o,"_blank"))},function(e){s||(e.preventDefault(),l({type:rl,path:i,edit:!0}))},i,s,l]}class WA extends He{constructor(e){super(),qe(this,e,HA,qA,u,{path:6,value:0,readOnly:7,normalization:1,onSelect:8,searchResult:2})}}function UA(e){let t,n,r,i,o,a;return n=new ru({props:{data:P_}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-timestamp svelte-1u00zub")},m(s,l){_(s,t,l),Ve(n,t,null),i=!0,o||(a=v(r=CO.call(null,t,{text:e[0],...e[1]})),o=!0)},p(e,[t]){r&&s(r.update)&&1&t&&r.update.call(null,{text:e[0],...e[1]})},i(e){i||(Ae(n.$$.fragment,e),i=!0)},o(e){Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),Fe(n),o=!1,a()}}}function JA(e,t,n){let r;const i=ae("absolute-popup");let{value:o}=t;return e.$$set=e=>{"value"in e&&n(2,o=e.value)},e.$$.update=()=>{4&e.$$.dirty&&n(0,r=`Time: ${new Date(o).toString()}`)},[r,i,o]}class KA extends He{constructor(e){super(),qe(this,e,JA,UA,u,{value:2})}}function GA({path:e,value:t,readOnly:n,enforceString:r,searchResult:i,isEditing:o,normalization:s,onPatch:a,onPasteJson:l,onSelect:c,onFind:u}){const h=[];return!o&&function(e){return!0===e||!1===e}(t)&&h.push({component:MA,props:{path:e,value:t,readOnly:n,onPatch:a,onSelect:c}}),!o&&function(e){return"string"==typeof e&&!!Hn(e)}(t)&&h.push({component:RA,props:{path:e,value:t,readOnly:n,onPatch:a,onSelect:c}}),o&&h.push({component:BA,props:{path:e,value:t,enforceString:r,normalization:s,onPatch:a,onPasteJson:l,onSelect:c,onFind:u}}),o||h.push({component:WA,props:{path:e,value:t,readOnly:n,normalization:s,searchResult:i,onSelect:c}}),!o&&function(e){return"number"==typeof e&&e>9466848e5&&isFinite(e)&&Math.floor(e)===e&&!isNaN(new Date(e).valueOf())}(t)&&h.push({component:KA,props:{value:t}}),h}const QA={};function XA(t){let n,r,i=t[0](t[1],t[2])+"";return{c(){n=A("div"),D(n,"class",r="item "+t[3]+" svelte-3e0qet")},m(e,t){_(e,n,t),n.innerHTML=i},p(e,[t]){7&t&&i!==(i=e[0](e[1],e[2])+"")&&(n.innerHTML=i),8&t&&r!==(r="item "+e[3]+" svelte-3e0qet")&&D(n,"class",r)},i:e,o:e,d(e){e&&O(n)}}}function YA(e,t,n){let{isActive:r=!1}=t,{isFirst:i=!1}=t,{isHover:o=!1}=t,{isSelectable:s=!1}=t,{getOptionLabel:a}=t,{item:l}=t,{filterText:c=""}=t,u="";return e.$$set=e=>{"isActive"in e&&n(4,r=e.isActive),"isFirst"in e&&n(5,i=e.isFirst),"isHover"in e&&n(6,o=e.isHover),"isSelectable"in e&&n(7,s=e.isSelectable),"getOptionLabel"in e&&n(0,a=e.getOptionLabel),"item"in e&&n(1,l=e.item),"filterText"in e&&n(2,c=e.filterText)},e.$$.update=()=>{if(242&e.$$.dirty){const e=[];r&&e.push("active"),i&&e.push("first"),o&&e.push("hover"),l.isGroupHeader&&e.push("groupHeader"),l.isGroupItem&&e.push("groupItem"),s||e.push("notSelectable"),n(3,u=e.join(" "))}},[a,l,c,u,r,i,o,s]}class ZA extends He{constructor(e){super(),qe(this,e,YA,XA,a,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function eM(e,t,n){const r=e.slice();return r[41]=t[n],r[42]=n,r}function tM(e){let t,n,r=e[1],i=[];for(let t=0;t<r.length;t+=1)i[t]=aM(eM(e,r,t));const o=e=>Me(i[e],1,1,(()=>{i[e]=null}));let s=null;return r.length||(s=rM(e)),{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=j(),s&&s.c()},m(e,r){for(let t=0;t<i.length;t+=1)i[t].m(e,r);_(e,t,r),s&&s.m(e,r),n=!0},p(e,n){if(114390&n[0]){let a;for(r=e[1],a=0;a<r.length;a+=1){const o=eM(e,r,a);i[a]?(i[a].p(o,n),Ae(i[a],1)):(i[a]=aM(o),i[a].c(),Ae(i[a],1),i[a].m(t.parentNode,t))}for(Oe(),a=r.length;a<i.length;a+=1)o(a);Ee(),!r.length&&s?s.p(e,n):r.length?s&&(s.d(1),s=null):(s=rM(e),s.c(),s.m(t.parentNode,t))}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Ae(i[e]);n=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Me(i[e]);n=!1},d(e){E(i,e),e&&O(t),s&&s.d(e)}}}function nM(e){let t,n,r;var i=e[3];function o(e){return{props:{items:e[1],itemHeight:e[8],$$slots:{default:[lM,({item:e,i:t})=>({41:e,42:t}),({item:e,i:t})=>[0,(e?1024:0)|(t?2048:0)]]},$$scope:{ctx:e}}}}return i&&(t=new i(o(e))),{c(){t&&Be(t.$$.fragment),n=j()},m(e,i){t&&Ve(t,e,i),_(e,n,i),r=!0},p(e,r){const s={};if(2&r[0]&&(s.items=e[1]),256&r[0]&&(s.itemHeight=e[8]),9814&r[0]|11264&r[1]&&(s.$$scope={dirty:r,ctx:e}),i!==(i=e[3])){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}i?(t=new i(o(e)),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(e){r||(t&&Ae(t.$$.fragment,e),r=!0)},o(e){t&&Me(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&Fe(t,e)}}}function rM(e){let t,n=!e[11]&&iM(e);return{c(){n&&n.c(),t=j()},m(e,r){n&&n.m(e,r),_(e,t,r)},p(e,r){e[11]?n&&(n.d(1),n=null):n?n.p(e,r):(n=iM(e),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&O(t)}}}function iM(e){let t,n;return{c(){t=A("div"),n=P(e[12]),D(t,"class","empty svelte-1uyqfml")},m(e,r){_(e,t,r),k(t,n)},p(e,t){4096&t[0]&&V(n,e[12])},d(e){e&&O(t)}}}function oM(e){let t,n,r,i,s,a;var l=e[4];function c(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:hM(e[42]),isActive:uM(e[41],e[9],e[10]),isHover:dM(e[2],e[41],e[42],e[1]),isSelectable:fM(e[41])}}}function u(){return e[29](e[42])}function h(){return e[30](e[42])}function d(...t){return e[31](e[41],e[42],...t)}return l&&(n=new l(c(e))),{c(){t=A("div"),n&&Be(n.$$.fragment),r=T(),D(t,"class","listItem"),D(t,"tabindex","-1")},m(e,o){_(e,t,o),n&&Ve(n,t,null),k(t,r),i=!0,s||(a=[N(t,"mouseover",u),N(t,"focus",h),N(t,"click",d)],s=!0)},p(i,o){e=i;const s={};if(2&o[0]&&(s.item=e[41]),8192&o[0]&&(s.filterText=e[13]),64&o[0]&&(s.getOptionLabel=e[6]),1538&o[0]&&(s.isActive=uM(e[41],e[9],e[10])),6&o[0]&&(s.isHover=dM(e[2],e[41],e[42],e[1])),2&o[0]&&(s.isSelectable=fM(e[41])),l!==(l=e[4])){if(n){Oe();const e=n;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}l?(n=new l(c(e)),Be(n.$$.fragment),Ae(n.$$.fragment,1),Ve(n,t,r)):n=null}else l&&n.$set(s)},i(e){i||(n&&Ae(n.$$.fragment,e),i=!0)},o(e){n&&Me(n.$$.fragment,e),i=!1},d(e){e&&O(t),n&&Fe(n),s=!1,o(a)}}}function sM(t){let n,r,i=t[7](t[41])+"";return{c(){n=A("div"),r=P(i),D(n,"class","listGroupTitle svelte-1uyqfml")},m(e,t){_(e,n,t),k(n,r)},p(e,t){130&t[0]&&i!==(i=e[7](e[41])+"")&&V(r,i)},i:e,o:e,d(e){e&&O(n)}}}function aM(e){let t,n,r,i;const o=[sM,oM],s=[];function a(e,t){return e[41].isGroupHeader&&!e[41].isSelectable?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=j()},m(e,n){s[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Ae(n,1),n.m(r.parentNode,r))},i(e){i||(Ae(n),i=!0)},o(e){Me(n),i=!1},d(e){s[t].d(e),e&&O(r)}}}function lM(e){let t,n,r,i,s;var a=e[4];function l(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:hM(e[42]),isActive:uM(e[41],e[9],e[10]),isHover:dM(e[2],e[41],e[42],e[1]),isSelectable:fM(e[41])}}}function c(){return e[26](e[42])}function u(){return e[27](e[42])}function h(...t){return e[28](e[41],e[42],...t)}return a&&(n=new a(l(e))),{c(){t=A("div"),n&&Be(n.$$.fragment),D(t,"class","listItem")},m(e,o){_(e,t,o),n&&Ve(n,t,null),r=!0,i||(s=[N(t,"mouseover",c),N(t,"focus",u),N(t,"click",h)],i=!0)},p(r,i){e=r;const o={};if(1024&i[1]&&(o.item=e[41]),8192&i[0]&&(o.filterText=e[13]),64&i[0]&&(o.getOptionLabel=e[6]),2048&i[1]&&(o.isFirst=hM(e[42])),1536&i[0]|1024&i[1]&&(o.isActive=uM(e[41],e[9],e[10])),6&i[0]|3072&i[1]&&(o.isHover=dM(e[2],e[41],e[42],e[1])),1024&i[1]&&(o.isSelectable=fM(e[41])),a!==(a=e[4])){if(n){Oe();const e=n;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}a?(n=new a(l(e)),Be(n.$$.fragment),Ae(n.$$.fragment,1),Ve(n,t,null)):n=null}else a&&n.$set(o)},i(e){r||(n&&Ae(n.$$.fragment,e),r=!0)},o(e){n&&Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),n&&Fe(n),i=!1,o(s)}}}function cM(e){let t,n,r,i,s,a;const l=[nM,tM],c=[];function u(e,t){return e[5]?0:1}return n=u(e),r=c[n]=l[n](e),{c(){t=A("div"),r.c(),D(t,"class","listContainer svelte-1uyqfml"),D(t,"style",e[14]),U(t,"virtualList",e[5])},m(r,o){_(r,t,o),c[n].m(t,null),e[32](t),i=!0,s||(a=[N(window,"keydown",e[17]),N(window,"resize",e[18])],s=!0)},p(e,o){let s=n;n=u(e),n===s?c[n].p(e,o):(Oe(),Me(c[s],1,1,(()=>{c[s]=null})),Ee(),r=c[n],r?r.p(e,o):(r=c[n]=l[n](e),r.c()),Ae(r,1),r.m(t,null)),(!i||16384&o[0])&&D(t,"style",e[14]),32&o[0]&&U(t,"virtualList",e[5])},i(e){i||(Ae(r),i=!0)},o(e){Me(r),i=!1},d(r){r&&O(t),c[n].d(),e[32](null),s=!1,o(a)}}}function uM(e,t,n){return t&&t[n]===e[n]}function hM(e){return 0===e}function dM(e,t,n,r){return fM(t)&&(e===n||1===r.length)}function fM(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function pM(e,t,n){const r=oe();let i,o,{container:s}=t,{VirtualList:a=null}=t,{Item:l=ZA}=t,{isVirtualList:c=!1}=t,{items:u=[]}=t,{labelIdentifier:h="label"}=t,{getOptionLabel:d=((e,t)=>{if(e)return e.isCreator?`Create "${t}"`:e[h]})}=t,{getGroupHeaderLabel:f=null}=t,{itemHeight:p=40}=t,{hoverItemIndex:m=0}=t,{value:g}=t,{optionIdentifier:v="value"}=t,{hideEmptyState:y=!1}=t,{noOptionsMessage:w="No options"}=t,{isMulti:b=!1}=t,{activeItemIndex:x=0}=t,{filterText:$=""}=t,{parent:k=null}=t,{listPlacement:S=null}=t,{listAutoWidth:C=null}=t,{listOffset:_=5}=t,O=0,E=!1;function A(e){e.isCreator||r("itemSelected",e)}function M(e){E||n(2,m=e)}function P(e){const{item:t,i:i,event:o}=e;if(o.stopPropagation(),g&&!b&&g[v]===t[v])return T();t.isCreator?r("itemCreated",$):fM(t)&&(n(19,x=i),n(2,m=i),A(t))}function T(){r("closeList")}async function j(e){if(c)return;let t=!0;for(;t;)e>0&&m===u.length-1?n(2,m=0):n(2,e<0&&0===m?m=u.length-1:m+=e),t=!fM(u[m]);await ge(),N("hover")}function N(e){if(c||!s)return;let t;const r=s.querySelector(`.listItem .${e}`);r&&(t=s.getBoundingClientRect().bottom-r.getBoundingClientRect().bottom),n(0,s.scrollTop-=t,s)}function I(){const{height:e,width:t}=k.getBoundingClientRect();n(14,o=""),n(14,o+=`min-width:${t}px;width:${C?"auto":"100%"};`),"top"===S||"auto"===S&&function(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i={};return i.top=n.top<0,i.left=n.left<0,i.bottom=n.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=n.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}(k,s).bottom?n(14,o+=`bottom:${e+_}px;`):n(14,o+=`top:${e+_}px;`)}re((()=>{if(u.length>0&&!b&&g){const e=u.findIndex((e=>e[v]===g[v]));e&&n(2,m=e)}N("active"),s.addEventListener("scroll",(()=>{clearTimeout(O),O=setTimeout((()=>{E=!1}),100)}),!1)})),ne((()=>{u||n(1,u=[]),u!==i&&u.length>0&&n(2,m=0),i=u}));return e.$$set=e=>{"container"in e&&n(0,s=e.container),"VirtualList"in e&&n(3,a=e.VirtualList),"Item"in e&&n(4,l=e.Item),"isVirtualList"in e&&n(5,c=e.isVirtualList),"items"in e&&n(1,u=e.items),"labelIdentifier"in e&&n(20,h=e.labelIdentifier),"getOptionLabel"in e&&n(6,d=e.getOptionLabel),"getGroupHeaderLabel"in e&&n(7,f=e.getGroupHeaderLabel),"itemHeight"in e&&n(8,p=e.itemHeight),"hoverItemIndex"in e&&n(2,m=e.hoverItemIndex),"value"in e&&n(9,g=e.value),"optionIdentifier"in e&&n(10,v=e.optionIdentifier),"hideEmptyState"in e&&n(11,y=e.hideEmptyState),"noOptionsMessage"in e&&n(12,w=e.noOptionsMessage),"isMulti"in e&&n(21,b=e.isMulti),"activeItemIndex"in e&&n(19,x=e.activeItemIndex),"filterText"in e&&n(13,$=e.filterText),"parent"in e&&n(22,k=e.parent),"listPlacement"in e&&n(23,S=e.listPlacement),"listAutoWidth"in e&&n(24,C=e.listAutoWidth),"listOffset"in e&&n(25,_=e.listOffset)},e.$$.update=()=>{4194305&e.$$.dirty[0]&&k&&s&&I()},[s,u,m,a,l,c,d,f,p,g,v,y,w,$,o,M,P,function(e){switch(e.key){case"Escape":e.preventDefault(),T();break;case"ArrowDown":e.preventDefault(),u.length&&j(1);break;case"ArrowUp":e.preventDefault(),u.length&&j(-1);break;case"Enter":if(e.preventDefault(),0===u.length)break;const t=u[m];if(g&&!b&&g[v]===t[v]){T();break}t.isCreator?r("itemCreated",$):(n(19,x=m),A(u[m]));break;case"Tab":if(e.preventDefault(),0===u.length)return T();if(g&&g[v]===u[m][v])return T();n(19,x=m),A(u[m])}},I,x,h,b,k,S,C,_,e=>M(e),e=>M(e),(e,t,n)=>P({item:e,i:t,event:n}),e=>M(e),e=>M(e),(e,t,n)=>P({item:e,i:t,event:n}),function(e){ue[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}class mM extends He{constructor(e){super(),qe(this,e,pM,cM,a,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function gM(t){let n,r=t[0](t[1])+"";return{c(){n=A("div"),D(n,"class","selection svelte-pu1q1n")},m(e,t){_(e,n,t),n.innerHTML=r},p(e,[t]){3&t&&r!==(r=e[0](e[1])+"")&&(n.innerHTML=r)},i:e,o:e,d(e){e&&O(n)}}}function vM(e,t,n){let{getSelectionLabel:r}=t,{item:i}=t;return e.$$set=e=>{"getSelectionLabel"in e&&n(0,r=e.getSelectionLabel),"item"in e&&n(1,i=e.item)},[r,i]}class yM extends He{constructor(e){super(),qe(this,e,vM,gM,a,{getSelectionLabel:0,item:1})}}function wM(e,t,n){const r=e.slice();return r[9]=t[n],r[11]=n,r}function bM(e){let t,n,r;function i(...t){return e[6](e[11],...t)}return{c(){t=A("div"),t.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',D(t,"class","multiSelectItem_clear svelte-liu9pa")},m(e,o){_(e,t,o),n||(r=N(t,"click",i),n=!0)},p(t,n){e=t},d(e){e&&O(t),n=!1,r()}}}function xM(e){let t,n,r,i,o,s,a,l=e[4](e[9])+"",c=!e[2]&&!e[3]&&bM(e);function u(...t){return e[7](e[11],...t)}return{c(){t=A("div"),n=A("div"),r=T(),c&&c.c(),i=T(),D(n,"class","multiSelectItem_label svelte-liu9pa"),D(t,"class",o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(e,o){_(e,t,o),k(t,n),n.innerHTML=l,k(t,r),c&&c.m(t,null),k(t,i),s||(a=N(t,"click",u),s=!0)},p(r,s){e=r,17&s&&l!==(l=e[4](e[9])+"")&&(n.innerHTML=l),e[2]||e[3]?c&&(c.d(1),c=null):c?c.p(e,s):(c=bM(e),c.c(),c.m(t,i)),6&s&&o!==(o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&D(t,"class",o)},d(e){e&&O(t),c&&c.d(),s=!1,a()}}}function $M(t){let n,r=t[0],i=[];for(let e=0;e<r.length;e+=1)i[e]=xM(wM(t,r,e));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();n=j()},m(e,t){for(let n=0;n<i.length;n+=1)i[n].m(e,t);_(e,n,t)},p(e,[t]){if(63&t){let o;for(r=e[0],o=0;o<r.length;o+=1){const s=wM(e,r,o);i[o]?i[o].p(s,t):(i[o]=xM(s),i[o].c(),i[o].m(n.parentNode,n))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:e,o:e,d(e){E(i,e),e&&O(n)}}}function kM(e,t,n){const r=oe();let{value:i=[]}=t,{activeValue:o}=t,{isDisabled:s=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:l}=t;function c(e,t){t.stopPropagation(),r("multiItemClear",{i:e})}return e.$$set=e=>{"value"in e&&n(0,i=e.value),"activeValue"in e&&n(1,o=e.activeValue),"isDisabled"in e&&n(2,s=e.isDisabled),"multiFullItemClearable"in e&&n(3,a=e.multiFullItemClearable),"getSelectionLabel"in e&&n(4,l=e.getSelectionLabel)},[i,o,s,a,l,c,(e,t)=>c(e,t),(e,t)=>a?c(e,t):{}]}class SM extends He{constructor(e){super(),qe(this,e,kM,$M,a,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function CM(e,t,n){const r=e.slice();return r[23]=t[n],r}const _M=e=>({item:32&e,i:32&e,hoverItemIndex:2&e}),OM=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function EM(e,t){let n,r,i;const o=t[15].default,s=h(o,t,t[14],OM),a=s||function(e){let t;return{c(){t=P("Missing template")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}();return{key:e,first:null,c(){n=A("svelte-virtual-list-row"),a&&a.c(),r=T(),B(n,"class","svelte-g2cagw"),this.first=n},m(e,t){_(e,n,t),a&&a.m(n,null),k(n,r),i=!0},p(e,n){t=e,s&&s.p&&(!i||16418&n)&&p(s,o,t,t[14],i?f(o,t[14],n,_M):m(t[14]),OM)},i(e){i||(Ae(a,e),i=!0)},o(e){Me(a,e),i=!1},d(e){e&&O(n),a&&a.d(e)}}}function AM(e){let t,n,r,i,o,s,a=[],l=new Map,c=e[5];const u=e=>e[23].index;for(let t=0;t<c.length;t+=1){let n=CM(e,c,t),r=u(n);l.set(r,a[t]=EM(r,n))}return{c(){t=A("svelte-virtual-list-viewport"),n=A("svelte-virtual-list-contents");for(let e=0;e<a.length;e+=1)a[e].c();q(n,"padding-top",e[6]+"px"),q(n,"padding-bottom",e[7]+"px"),B(n,"class","svelte-g2cagw"),q(t,"height",e[0]),B(t,"class","svelte-g2cagw"),ve((()=>e[18].call(t)))},m(l,c){_(l,t,c),k(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);e[16](n),e[17](t),r=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=A("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=W();let i;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",i=N(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{i=N(n.contentWindow,"resize",t)}),k(e,n),()=>{(r||i&&n.contentWindow)&&i(),O(n)}}(t,e[18].bind(t)),i=!0,o||(s=N(t,"scroll",e[8]),o=!0)},p(e,[r]){16418&r&&(c=e[5],Oe(),a=Re(a,r,u,1,e,c,l,n,Ie,EM,null,CM),Ee()),(!i||64&r)&&q(n,"padding-top",e[6]+"px"),(!i||128&r)&&q(n,"padding-bottom",e[7]+"px"),(!i||1&r)&&q(t,"height",e[0])},i(e){if(!i){for(let e=0;e<c.length;e+=1)Ae(a[e]);i=!0}},o(e){for(let e=0;e<a.length;e+=1)Me(a[e]);i=!1},d(n){n&&O(t);for(let e=0;e<a.length;e+=1)a[e].d();e[16](null),e[17](null),r(),o=!1,s()}}}function MM(e,t,n){let r,i,o,s,a,l,{$$slots:c={},$$scope:u}=t,{items:h}=t,{height:d="100%"}=t,{itemHeight:f=40}=t,{hoverItemIndex:p=0}=t,{start:m=0}=t,{end:g=0}=t,v=[],y=0,w=0,b=0;return re((()=>{r=o.getElementsByTagName("svelte-virtual-list-row"),n(13,a=!0)})),e.$$set=e=>{"items"in e&&n(11,h=e.items),"height"in e&&n(0,d=e.height),"itemHeight"in e&&n(12,f=e.itemHeight),"hoverItemIndex"in e&&n(1,p=e.hoverItemIndex),"start"in e&&n(9,m=e.start),"end"in e&&n(10,g=e.end),"$$scope"in e&&n(14,u=e.$$scope)},e.$$.update=()=>{3584&e.$$.dirty&&n(5,s=h.slice(m,g).map(((e,t)=>({index:t+m,data:e})))),14340&e.$$.dirty&&a&&async function(e,t,o){const{scrollTop:s}=i;await ge();let a=w-s,c=m;for(;a<t&&c<e.length;){let e=r[c-m];e||(n(10,g=c+1),await ge(),e=r[c-m]),a+=v[c]=o||e.offsetHeight,c+=1}n(10,g=c);const u=e.length-g;l=(w+a)/g,n(7,b=u*l),v.length=e.length,i&&n(3,i.scrollTop=0,i)}(h,y,f)},[d,p,y,i,o,s,w,b,async function(){const{scrollTop:e}=i,t=m;for(let e=0;e<r.length;e+=1)v[m+e]=f||r[e].offsetHeight;let o=0,s=0;for(;o<h.length;){const t=v[o]||l;if(s+t>e){n(9,m=o),n(6,w=s);break}s+=t,o+=1}for(;o<h.length&&(s+=v[o]||l,o+=1,!(s>e+y)););n(10,g=o);const a=h.length-g;for(l=s/g;o<h.length;)v[o++]=l;if(n(7,b=a*l),m<t){await ge();let n=0,o=0;for(let e=m;e<t;e+=1)r[e-m]&&(n+=v[e],o+=f||r[e-m].offsetHeight);const s=o-n;i.scrollTo(0,e+s)}},m,g,h,f,a,u,c,function(e){ue[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},function(e){ue[e?"unshift":"push"]((()=>{i=e,n(3,i)}))},function(){y=this.offsetHeight,n(2,y)}]}class PM extends He{constructor(e){super(),qe(this,e,MM,AM,a,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function TM(t){let n,r;return{c(){n=M("svg"),r=M("path"),D(r,"fill","currentColor"),D(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),D(n,"width","100%"),D(n,"height","100%"),D(n,"viewBox","-2 -2 50 50"),D(n,"focusable","false"),D(n,"aria-hidden","true"),D(n,"role","presentation")},m(e,t){_(e,n,t),k(n,r)},p:e,i:e,o:e,d(e){e&&O(n)}}}class jM extends He{constructor(e){super(),qe(this,e,null,TM,a,{})}}function NM(e,t,n){const r=e.slice();return r[103]=t[n],r}function IM(e){let t,n,r,i,o;return{c(){t=A("span"),n=P(e[33]),r=T(),i=A("span"),o=P(e[32]),D(t,"id","aria-selection"),D(i,"id","aria-context")},m(e,s){_(e,t,s),k(t,n),_(e,r,s),_(e,i,s),k(i,o)},p(e,t){4&t[1]&&V(n,e[33]),2&t[1]&&V(o,e[32])},d(e){e&&O(t),e&&O(r),e&&O(i)}}}function RM(e){let t,r,i;const o=[e[18]];var s=e[17];function a(e){let t={};for(let e=0;e<o.length;e+=1)t=n(t,o[e]);return{props:t}}return s&&(t=new s(a())),{c(){t&&Be(t.$$.fragment),r=j()},m(e,n){t&&Ve(t,e,n),_(e,r,n),i=!0},p(e,n){const i=262144&n[0]?De(o,[Le(e[18])]):{};if(s!==(s=e[17])){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}s?(t=new s(a()),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,r.parentNode,r)):t=null}else s&&t.$set(i)},i(e){i||(t&&Ae(t.$$.fragment,e),i=!0)},o(e){t&&Me(t.$$.fragment,e),i=!1},d(e){e&&O(r),t&&Fe(t,e)}}}function DM(e){let t,n,r;var i=e[26];function o(e){return{props:{value:e[2],getSelectionLabel:e[12],activeValue:e[30],isDisabled:e[9],multiFullItemClearable:e[8]}}}return i&&(t=new i(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&Be(t.$$.fragment),n=j()},m(e,i){t&&Ve(t,e,i),_(e,n,i),r=!0},p(e,r){const s={};if(4&r[0]&&(s.value=e[2]),4096&r[0]&&(s.getSelectionLabel=e[12]),1073741824&r[0]&&(s.activeValue=e[30]),512&r[0]&&(s.isDisabled=e[9]),256&r[0]&&(s.multiFullItemClearable=e[8]),i!==(i=e[26])){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}i?(t=new i(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40]),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,n.parentNode,n)):t=null}else i&&t.$set(s)},i(e){r||(t&&Ae(t.$$.fragment,e),r=!0)},o(e){t&&Me(t.$$.fragment,e),r=!1},d(e){e&&O(n),t&&Fe(t,e)}}}function LM(e){let t,n,r,i,o;var s=e[25];function a(e){return{props:{item:e[2],getSelectionLabel:e[12]}}}return s&&(n=new s(a(e))),{c(){t=A("div"),n&&Be(n.$$.fragment),D(t,"class","selectedItem svelte-17l1npl")},m(s,a){_(s,t,a),n&&Ve(n,t,null),r=!0,i||(o=N(t,"focus",e[40]),i=!0)},p(e,r){const i={};if(4&r[0]&&(i.item=e[2]),4096&r[0]&&(i.getSelectionLabel=e[12]),s!==(s=e[25])){if(n){Oe();const e=n;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}s?(n=new s(a(e)),Be(n.$$.fragment),Ae(n.$$.fragment,1),Ve(n,t,null)):n=null}else s&&n.$set(i)},i(e){r||(n&&Ae(n.$$.fragment,e),r=!0)},o(e){n&&Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),n&&Fe(n),i=!1,o()}}}function zM(e){let t,n,r,i,o;var s=e[23];return s&&(n=new s({})),{c(){t=A("div"),n&&Be(n.$$.fragment),D(t,"class","clearSelect svelte-17l1npl"),D(t,"aria-hidden","true")},m(s,a){_(s,t,a),n&&Ve(n,t,null),r=!0,i||(o=N(t,"click",I(e[27])),i=!0)},p(e,r){if(s!==(s=e[23])){if(n){Oe();const e=n;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}s?(n=new s({}),Be(n.$$.fragment),Ae(n.$$.fragment,1),Ve(n,t,null)):n=null}},i(e){r||(n&&Ae(n.$$.fragment,e),r=!0)},o(e){n&&Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),n&&Fe(n),i=!1,o()}}}function BM(e){let t;function n(e,t){return e[22]?FM:VM}let r=n(e),i=r(e);return{c(){t=A("div"),i.c(),D(t,"class","indicator svelte-17l1npl"),D(t,"aria-hidden","true")},m(e,n){_(e,t,n),i.m(t,null)},p(e,o){r===(r=n(e))&&i?i.p(e,o):(i.d(1),i=r(e),i&&(i.c(),i.m(t,null)))},d(e){e&&O(t),i.d()}}}function VM(t){let n,r;return{c(){n=M("svg"),r=M("path"),D(r,"d","M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"),D(n,"width","100%"),D(n,"height","100%"),D(n,"viewBox","0 0 20 20"),D(n,"focusable","false"),D(n,"aria-hidden","true"),D(n,"class","svelte-17l1npl")},m(e,t){_(e,n,t),k(n,r)},p:e,d(e){e&&O(n)}}}function FM(e){let t,n;return{c(){t=new K(!1),n=j(),t.a=n},m(r,i){t.m(e[22],r,i),_(r,n,i)},p(e,n){4194304&n[0]&&t.p(e[22])},d(e){e&&O(n),e&&t.d()}}}function qM(e){let t;return{c(){t=A("div"),t.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',D(t,"class","spinner svelte-17l1npl")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function HM(e){let t,r,i,o;const s=[e[34]];function a(t){e[84](t)}var l=e[24];function c(e){let t={};for(let e=0;e<s.length;e+=1)t=n(t,s[e]);return void 0!==e[28]&&(t.hoverItemIndex=e[28]),{props:t}}return l&&(t=new l(c(e)),ue.push((()=>ze(t,"hoverItemIndex",a))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&Be(t.$$.fragment),i=j()},m(e,n){t&&Ve(t,e,n),_(e,i,n),o=!0},p(e,n){const o=8&n[1]?De(s,[Le(e[34])]):{};if(!r&&268435456&n[0]&&(r=!0,o.hoverItemIndex=e[28],ye((()=>r=!1))),l!==(l=e[24])){if(t){Oe();const e=t;Me(e.$$.fragment,1,0,(()=>{Fe(e,1)})),Ee()}l?(t=new l(c(e)),ue.push((()=>ze(t,"hoverItemIndex",a))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45]),Be(t.$$.fragment),Ae(t.$$.fragment,1),Ve(t,i.parentNode,i)):t=null}else l&&t.$set(o)},i(e){o||(t&&Ae(t.$$.fragment,e),o=!0)},o(e){t&&Me(t.$$.fragment,e),o=!1},d(e){e&&O(i),t&&Fe(t,e)}}}function WM(e){let t,n,r;return{c(){t=A("input"),D(t,"name",n=e[16].name),D(t,"type","hidden"),t.value=r=e[2]?e[12](e[2]):null,D(t,"class","svelte-17l1npl")},m(e,n){_(e,t,n)},p(e,i){65536&i[0]&&n!==(n=e[16].name)&&D(t,"name",n),4100&i[0]&&r!==(r=e[2]?e[12](e[2]):null)&&(t.value=r)},d(e){e&&O(t)}}}function UM(e){let t,n=e[2],r=[];for(let t=0;t<n.length;t+=1)r[t]=JM(NM(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=j()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);_(e,t,n)},p(e,i){if(69636&i[0]){let o;for(n=e[2],o=0;o<n.length;o+=1){const s=NM(e,n,o);r[o]?r[o].p(s,i):(r[o]=JM(s),r[o].c(),r[o].m(t.parentNode,t))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(e){E(r,e),e&&O(t)}}}function JM(e){let t,n,r;return{c(){t=A("input"),D(t,"name",n=e[16].name),D(t,"type","hidden"),t.value=r=e[103]?e[12](e[103]):null,D(t,"class","svelte-17l1npl")},m(e,n){_(e,t,n)},p(e,i){65536&i[0]&&n!==(n=e[16].name)&&D(t,"name",n),4100&i[0]&&r!==(r=e[103]?e[12](e[103]):null)&&(t.value=r)},d(e){e&&O(t)}}}function KM(e){let t,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x=e[1]&&IM(e),$=e[17]&&RM(e),S=e[35]&&DM(e),C=[{readOnly:c=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],E={};for(let e=0;e<C.length;e+=1)E=n(E,C[e]);let M=!e[7]&&e[29]&&LM(e),P=e[37]&&zM(e),j=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&BM(e),I=e[4]&&qM(),R=e[5]&&HM(e),z=(!e[7]||e[7]&&!e[35])&&WM(e),B=e[7]&&e[35]&&UM(e);return{c(){t=A("div"),r=A("span"),x&&x.c(),i=T(),$&&$.c(),s=T(),S&&S.c(),a=T(),l=A("input"),u=T(),M&&M.c(),h=T(),P&&P.c(),d=T(),j&&j.c(),f=T(),I&&I.c(),p=T(),R&&R.c(),m=T(),z&&z.c(),g=T(),B&&B.c(),D(r,"aria-live","polite"),D(r,"aria-atomic","false"),D(r,"aria-relevant","additions text"),D(r,"class","a11yText svelte-17l1npl"),L(l,E),U(l,"svelte-17l1npl",!0),D(t,"class",v="selectContainer "+e[21]+" svelte-17l1npl"),D(t,"style",e[11]),U(t,"hasError",e[10]),U(t,"multiSelect",e[7]),U(t,"disabled",e[9]),U(t,"focused",e[1])},m(n,o){_(n,t,o),k(t,r),x&&x.m(r,null),k(t,i),$&&$.m(t,null),k(t,s),S&&S.m(t,null),k(t,a),k(t,l),l.autofocus&&l.focus(),e[82](l),F(l,e[3]),k(t,u),M&&M.m(t,null),k(t,h),P&&P.m(t,null),k(t,d),j&&j.m(t,null),k(t,f),I&&I.m(t,null),k(t,p),R&&R.m(t,null),k(t,m),z&&z.m(t,null),k(t,g),B&&B.m(t,null),e[85](t),y=!0,w||(b=[N(window,"click",e[41]),N(window,"focusin",e[41]),N(window,"keydown",e[39]),N(l,"focus",e[40]),N(l,"input",e[83]),N(t,"click",e[42])],w=!0)},p(e,n){e[1]?x?x.p(e,n):(x=IM(e),x.c(),x.m(r,null)):x&&(x.d(1),x=null),e[17]?$?($.p(e,n),131072&n[0]&&Ae($,1)):($=RM(e),$.c(),Ae($,1),$.m(t,s)):$&&(Oe(),Me($,1,1,(()=>{$=null})),Ee()),e[35]?S?(S.p(e,n),16&n[1]&&Ae(S,1)):(S=DM(e),S.c(),Ae(S,1),S.m(t,a)):S&&(Oe(),Me(S,1,1,(()=>{S=null})),Ee()),L(l,E=De(C,[(!y||8192&n[0]&&c!==(c=!e[13]))&&{readOnly:c},1&n[1]&&e[31],(!y||32&n[1])&&{placeholder:e[36]},(!y||16384&n[0])&&{style:e[14]},(!y||512&n[0])&&{disabled:e[9]}])),8&n[0]&&l.value!==e[3]&&F(l,e[3]),U(l,"svelte-17l1npl",!0),!e[7]&&e[29]?M?(M.p(e,n),536871040&n[0]&&Ae(M,1)):(M=LM(e),M.c(),Ae(M,1),M.m(t,h)):M&&(Oe(),Me(M,1,1,(()=>{M=null})),Ee()),e[37]?P?(P.p(e,n),64&n[1]&&Ae(P,1)):(P=zM(e),P.c(),Ae(P,1),P.m(t,d)):P&&(Oe(),Me(P,1,1,(()=>{P=null})),Ee()),e[37]||!(e[20]||e[19]&&!e[2])&&(e[13]||e[9]||e[4]||(!e[29]||e[15])&&e[29])?j&&(j.d(1),j=null):j?j.p(e,n):(j=BM(e),j.c(),j.m(t,f)),e[4]?I||(I=qM(),I.c(),I.m(t,p)):I&&(I.d(1),I=null),e[5]?R?(R.p(e,n),32&n[0]&&Ae(R,1)):(R=HM(e),R.c(),Ae(R,1),R.m(t,m)):R&&(Oe(),Me(R,1,1,(()=>{R=null})),Ee()),!e[7]||e[7]&&!e[35]?z?z.p(e,n):(z=WM(e),z.c(),z.m(t,g)):z&&(z.d(1),z=null),e[7]&&e[35]?B?B.p(e,n):(B=UM(e),B.c(),B.m(t,null)):B&&(B.d(1),B=null),(!y||2097152&n[0]&&v!==(v="selectContainer "+e[21]+" svelte-17l1npl"))&&D(t,"class",v),(!y||2048&n[0])&&D(t,"style",e[11]),2098176&n[0]&&U(t,"hasError",e[10]),2097280&n[0]&&U(t,"multiSelect",e[7]),2097664&n[0]&&U(t,"disabled",e[9]),2097154&n[0]&&U(t,"focused",e[1])},i(e){y||(Ae($),Ae(S),Ae(M),Ae(P),Ae(R),y=!0)},o(e){Me($),Me(S),Me(M),Me(P),Me(R),y=!1},d(n){n&&O(t),x&&x.d(),$&&$.d(),S&&S.d(),e[82](null),M&&M.d(),P&&P.d(),j&&j.d(),I&&I.d(),R&&R.d(),z&&z.d(),B&&B.d(),e[85](null),w=!1,o(b)}}}function GM(e){return e.map(((e,t)=>({index:t,value:e,label:`${e}`})))}function QM(e,t,n){let r,i,o,s,a,l,c,u;const h=oe();let{id:d=null}=t,{container:f}=t,{input:p}=t,{isMulti:m=!1}=t,{multiFullItemClearable:g=!1}=t,{isDisabled:v=!1}=t,{isCreatable:y=!1}=t,{isFocused:w=!1}=t,{value:b=null}=t,{filterText:x=""}=t,{placeholder:$="Select..."}=t,{placeholderAlwaysShow:k=!1}=t,{items:S=null}=t,{itemFilter:C=((e,t,n)=>`${e}`.toLowerCase().includes(t.toLowerCase()))}=t,{groupBy:_}=t,{groupFilter:O=(e=>e)}=t,{isGroupHeaderSelectable:E=!1}=t,{getGroupHeaderLabel:A=(e=>e[M]||e.id)}=t,{labelIdentifier:M="label"}=t,{getOptionLabel:P=((e,t)=>e.isCreator?`Create "${t}"`:e[M])}=t,{optionIdentifier:T="value"}=t,{loadOptions:j}=t,{hasError:N=!1}=t,{containerStyles:I=""}=t,{getSelectionLabel:R=(e=>e?e[M]:null)}=t,{createGroupHeaderItem:D=(e=>({value:e,label:e}))}=t,{createItem:L=(e=>({value:e,label:e}))}=t;let{isSearchable:z=!0}=t,{inputStyles:B=""}=t,{isClearable:V=!0}=t,{isWaiting:F=!1}=t,{listPlacement:q="auto"}=t,{listOpen:H=!1}=t,{isVirtualList:W=!1}=t,{loadOptionsInterval:U=300}=t,{noOptionsMessage:J="No options"}=t,{hideEmptyState:K=!1}=t,{inputAttributes:G={}}=t,{listAutoWidth:Q=!0}=t,{itemHeight:X=40}=t,{Icon:Y}=t,{iconProps:Z={}}=t,{showChevron:ee=!1}=t,{showIndicator:te=!1}=t,{containerClasses:ie=""}=t,{indicatorSvg:se}=t,{listOffset:ae=5}=t,{ClearIcon:le=jM}=t,{Item:ce=ZA}=t,{List:he=mM}=t,{Selection:de=yM}=t,{MultiSelection:fe=SM}=t,{VirtualList:pe=PM}=t;function me(e){if(e.loadOptions&&e.filterText.length>0)return;if(!e.items)return[];e.items&&e.items.length>0&&"object"!=typeof e.items[0]&&(e.items=GM(e.items));let t=e.items.filter((t=>{let n=C(P(t,e.filterText),e.filterText,t);return n&&e.isMulti&&e.value&&Array.isArray(e.value)&&(n=!e.value.some((n=>n[e.optionIdentifier]===t[e.optionIdentifier]))),n}));return e.groupBy&&(t=function(e){const t=[],n={};e.forEach((e=>{const r=_(e);t.includes(r)||(t.push(r),n[r]=[],r&&n[r].push(Object.assign(D(r,e),{id:r,isGroupHeader:!0,isSelectable:E}))),n[r].push(Object.assign({isGroupItem:!!r},e))}));const r=[];return O(t).forEach((e=>{r.push(...n[e])})),r}(t)),e.isCreatable&&(t=ge(t,e.filterText)),t}function ge(e,t){if(0===t.length)return e;const n=L(t);return e[0]&&t===e[0][M]?e:(n.isCreator=!0,[...e,n])}let ve,ye,we,be,xe,$e,{selectedValue:ke=null}=t;const Se=function(e,t,n){let r;return function(){let i=this,o=arguments,s=function(){r=null,n||e.apply(i,o)},a=n&&!r;clearTimeout(r),r=setTimeout(s,t),a&&e.apply(i,o)}}((async()=>{n(4,F=!0);let e=await j(x).catch((e=>{console.warn("svelte-select loadOptions error :>> ",e),h("error",{type:"loadOptions",details:e})}));e&&!e.cancelled&&(e?(e&&e.length>0&&"object"!=typeof e[0]&&(e=GM(e)),n(81,r=[...e]),h("loaded",{items:r})):n(81,r=[]),y&&n(81,r=ge(r,x)),n(4,F=!1),n(1,w=!0),n(5,H=!0))}),U);let Ce;function _e(){let e=!0;if(b){const t=[],r=[];b.forEach((n=>{t.includes(n[T])?e=!1:(t.push(n[T]),r.push(n))})),e||n(2,b=r)}return e}function Oe(e){let t=e?e[T]:b[T];return S.find((e=>e[T]===t))}function Ee(e){const{detail:t}=e,r=b[t?t.i:b.length-1];1===b.length?n(2,b=void 0):n(2,b=b.filter((e=>e!==r))),h("clear",r)}function Ae(){n(1,w=!0),p&&p.focus()}ne((async()=>{n(77,ye=b),n(78,we=x),n(79,be=w),n(80,xe=m)})),re((()=>{w&&p&&p.focus()}));let{ariaValues:Me=(e=>`Option ${e}, selected.`)}=t,{ariaListOpen:Pe=((e,t)=>`You are currently focused on option ${e}. There are ${t} results available.`)}=t,{ariaFocused:Te=(()=>"Select is focused, type to refine list, press down to open the menu.")}=t;return e.$$set=e=>{"id"in e&&n(46,d=e.id),"container"in e&&n(0,f=e.container),"input"in e&&n(6,p=e.input),"isMulti"in e&&n(7,m=e.isMulti),"multiFullItemClearable"in e&&n(8,g=e.multiFullItemClearable),"isDisabled"in e&&n(9,v=e.isDisabled),"isCreatable"in e&&n(47,y=e.isCreatable),"isFocused"in e&&n(1,w=e.isFocused),"value"in e&&n(2,b=e.value),"filterText"in e&&n(3,x=e.filterText),"placeholder"in e&&n(48,$=e.placeholder),"placeholderAlwaysShow"in e&&n(49,k=e.placeholderAlwaysShow),"items"in e&&n(50,S=e.items),"itemFilter"in e&&n(51,C=e.itemFilter),"groupBy"in e&&n(52,_=e.groupBy),"groupFilter"in e&&n(53,O=e.groupFilter),"isGroupHeaderSelectable"in e&&n(54,E=e.isGroupHeaderSelectable),"getGroupHeaderLabel"in e&&n(55,A=e.getGroupHeaderLabel),"labelIdentifier"in e&&n(56,M=e.labelIdentifier),"getOptionLabel"in e&&n(57,P=e.getOptionLabel),"optionIdentifier"in e&&n(58,T=e.optionIdentifier),"loadOptions"in e&&n(59,j=e.loadOptions),"hasError"in e&&n(10,N=e.hasError),"containerStyles"in e&&n(11,I=e.containerStyles),"getSelectionLabel"in e&&n(12,R=e.getSelectionLabel),"createGroupHeaderItem"in e&&n(60,D=e.createGroupHeaderItem),"createItem"in e&&n(61,L=e.createItem),"isSearchable"in e&&n(13,z=e.isSearchable),"inputStyles"in e&&n(14,B=e.inputStyles),"isClearable"in e&&n(15,V=e.isClearable),"isWaiting"in e&&n(4,F=e.isWaiting),"listPlacement"in e&&n(63,q=e.listPlacement),"listOpen"in e&&n(5,H=e.listOpen),"isVirtualList"in e&&n(64,W=e.isVirtualList),"loadOptionsInterval"in e&&n(65,U=e.loadOptionsInterval),"noOptionsMessage"in e&&n(66,J=e.noOptionsMessage),"hideEmptyState"in e&&n(67,K=e.hideEmptyState),"inputAttributes"in e&&n(16,G=e.inputAttributes),"listAutoWidth"in e&&n(68,Q=e.listAutoWidth),"itemHeight"in e&&n(69,X=e.itemHeight),"Icon"in e&&n(17,Y=e.Icon),"iconProps"in e&&n(18,Z=e.iconProps),"showChevron"in e&&n(19,ee=e.showChevron),"showIndicator"in e&&n(20,te=e.showIndicator),"containerClasses"in e&&n(21,ie=e.containerClasses),"indicatorSvg"in e&&n(22,se=e.indicatorSvg),"listOffset"in e&&n(70,ae=e.listOffset),"ClearIcon"in e&&n(23,le=e.ClearIcon),"Item"in e&&n(71,ce=e.Item),"List"in e&&n(24,he=e.List),"Selection"in e&&n(25,de=e.Selection),"MultiSelection"in e&&n(26,fe=e.MultiSelection),"VirtualList"in e&&n(72,pe=e.VirtualList),"selectedValue"in e&&n(73,ke=e.selectedValue),"ariaValues"in e&&n(74,Me=e.ariaValues),"ariaListOpen"in e&&n(75,Pe=e.ariaListOpen),"ariaFocused"in e&&n(76,Te=e.ariaFocused)},e.$$.update=()=>{140&e.$$.dirty[0]|405340160&e.$$.dirty[1]&&n(81,r=me({loadOptions:j,filterText:x,items:S,value:b,isMulti:m,optionIdentifier:T,groupBy:_,isCreatable:y})),2048&e.$$.dirty[2]&&ke&&console.warn("selectedValue is no longer used. Please use value instead."),524288&e.$$.dirty[1]&&function(e){e&&0!==e.length&&!e.some((e=>"object"!=typeof e))&&b&&(m?!b.some((e=>!e||!e[T])):b[T])&&(Array.isArray(b)?n(2,b=b.map((e=>Oe(e)||e))):n(2,b=Oe()||b))}(S),4&e.$$.dirty[0]&&b&&("string"==typeof b?n(2,b={[T]:b,label:b}):m&&Array.isArray(b)&&b.length>0&&n(2,b=b.map((e=>"string"==typeof e?{value:e,label:e}:e)))),73728&e.$$.dirty[0]&&(!G&&z||(n(31,Ce=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},G)),d&&n(31,Ce.id=d,Ce),z||n(31,Ce.readonly=!0,Ce))),128&e.$$.dirty[0]|262144&e.$$.dirty[2]&&(m&&b&&(Array.isArray(b)?n(2,b=[...b]):n(2,b=[b])),xe&&!m&&b&&n(2,b=null)),132&e.$$.dirty[0]&&m&&b&&b.length>1&&_e(),4&e.$$.dirty[0]&&b&&(m?JSON.stringify(b)!==JSON.stringify(ye)&&_e()&&h("select",b):ye&&JSON.stringify(b[T])===JSON.stringify(ye[T])||h("select",b)),132&e.$$.dirty[0]|32768&e.$$.dirty[2]&&!b&&m&&ye&&h("select",b),2&e.$$.dirty[0]|131072&e.$$.dirty[2]&&w!==be&&(w||H?Ae():p&&p.blur()),8&e.$$.dirty[0]|65536&e.$$.dirty[2]&&x!==we&&0!==x.length&&(n(1,w=!0),n(5,H=!0),j?Se():(n(5,H=!0),m&&n(30,ve=void 0))),12&e.$$.dirty[0]&&n(29,i=b&&0===x.length),536904208&e.$$.dirty[0]&&n(37,o=i&&V&&!v&&!F),132&e.$$.dirty[0]|393216&e.$$.dirty[1]&&n(36,s=k&&m?$:b?"":$),132&e.$$.dirty[0]&&n(35,a=m&&b&&b.length>0),141&e.$$.dirty[0]|218103808&e.$$.dirty[1]|526326&e.$$.dirty[2]&&n(34,l={Item:ce,filterText:x,optionIdentifier:T,noOptionsMessage:J,hideEmptyState:K,isVirtualList:W,VirtualList:pe,value:b,isMulti:m,getGroupHeaderLabel:A,items:r,itemHeight:X,getOptionLabel:P,listPlacement:q,parent:f,listAutoWidth:Q,listOffset:ae}),132&e.$$.dirty[0]&&n(33,c=b?function(){let e;return e=m&&b.length>0?b.map((e=>R(e))).join(", "):R(b),Me(e)}():""),268435490&e.$$.dirty[0]|524288&e.$$.dirty[2]&&n(32,u=function(){if(!w||!r||0===r.length)return"";let e=r[$e];if(H&&e){let t=R(e),n=r?r.length:0;return Pe(t,n)}return Te()}())},[f,w,b,x,F,H,p,m,g,v,N,I,R,z,B,V,G,Y,Z,ee,te,ie,se,le,he,de,fe,function(){n(2,b=void 0),n(5,H=!1),h("clear",b),Ae()},$e,i,ve,Ce,u,c,l,a,s,o,Ee,function(e){if(w)switch(e.key){case"ArrowDown":case"ArrowUp":e.preventDefault(),n(5,H=!0),n(30,ve=void 0);break;case"Tab":H||n(1,w=!1);break;case"Backspace":if(!m||x.length>0)return;if(m&&b&&b.length>0){if(Ee(void 0!==ve?ve:b.length-1),0===ve||void 0===ve)break;n(30,ve=b.length>ve?ve-1:void 0)}break;case"ArrowLeft":if(!m||x.length>0)return;void 0===ve?n(30,ve=b.length-1):b.length>ve&&0!==ve&&n(30,ve-=1);break;case"ArrowRight":if(!m||x.length>0||void 0===ve)return;ve===b.length-1?n(30,ve=void 0):ve<b.length-1&&n(30,ve+=1)}},Ae,function(e){if(!f)return;const t=e.path&&e.path.length>0?e.path[0]:e.target;f.contains(t)||f.contains(e.relatedTarget)||(n(1,w=!1),n(5,H=!1),n(30,ve=void 0),p&&p.blur())},function(){v||(n(1,w=!0),n(5,H=!H))},function(e){const{detail:t}=e;if(t){n(3,x="");const e=Object.assign({},t);e.isGroupHeader&&!e.isSelectable||(n(2,b=m?b?b.concat([e]):[e]:e),n(2,b),setTimeout((()=>{n(5,H=!1),n(30,ve=void 0)})))}},function(e){const{detail:t}=e;m?(n(2,b=b||[]),n(2,b=[...b,L(t)])):n(2,b=L(t)),h("itemCreated",t),n(3,x=""),n(5,H=!1),n(30,ve=void 0)},function(){n(3,x=""),n(5,H=!1)},d,y,$,k,S,C,_,O,E,A,M,P,T,j,D,L,()=>r,q,W,U,J,K,Q,X,ae,ce,pe,ke,Me,Pe,Te,ye,we,be,xe,r,function(e){ue[e?"unshift":"push"]((()=>{p=e,n(6,p)}))},function(){x=this.value,n(3,x)},function(e){$e=e,n(28,$e)},function(e){ue[e?"unshift":"push"]((()=>{f=e,n(0,f)}))}]}class XM extends He{constructor(e){super(),qe(this,e,QM,KM,a,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function YM(e){let t,n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,M,P,j,I,R,L,z,B,V,q;function H(t){e[18](t)}let W={containerClasses:"jse-filter-path",showIndicator:!0,items:e[6]};function U(t){e[19](t)}void 0!==e[0]&&(W.value=e[0]),a=new XM({props:W}),ue.push((()=>ze(a,"value",H)));let J={containerClasses:"jse-filter-relation",showIndicator:!0,items:e[8]};function K(t){e[21](t)}void 0!==e[1]&&(J.value=e[1]),u=new XM({props:J}),ue.push((()=>ze(u,"value",U)));let G={containerClasses:"jse-sort-path",showIndicator:!0,items:e[6]};function Q(t){e[22](t)}void 0!==e[3]&&(G.value=e[3]),b=new XM({props:G}),ue.push((()=>ze(b,"value",K)));let X={containerClasses:"jse-sort-direction",showIndicator:!0,items:e[9]};function Y(t){e[23](t)}void 0!==e[4]&&(X.value=e[4]),S=new XM({props:X}),ue.push((()=>ze(S,"value",Q)));let Z={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:e[7]};return void 0!==e[5]&&(Z.value=e[5]),L=new XM({props:Z}),ue.push((()=>ze(L,"value",Y))),{c(){t=A("table"),n=A("tr"),r=A("th"),r.textContent="Filter",i=T(),o=A("td"),s=A("div"),Be(a.$$.fragment),c=T(),Be(u.$$.fragment),d=T(),f=A("input"),p=T(),m=A("tr"),g=A("th"),g.textContent="Sort",v=T(),y=A("td"),w=A("div"),Be(b.$$.fragment),$=T(),Be(S.$$.fragment),E=T(),M=A("tr"),P=A("th"),P.textContent="Pick",j=T(),I=A("td"),R=A("div"),Be(L.$$.fragment),D(r,"class","svelte-13taczd"),D(f,"class","jse-filter-value svelte-13taczd"),D(s,"class","jse-horizontal svelte-13taczd"),D(g,"class","svelte-13taczd"),D(w,"class","jse-horizontal svelte-13taczd"),D(P,"class","svelte-13taczd"),D(R,"class","jse-horizontal svelte-13taczd"),D(t,"class","jse-transform-wizard svelte-13taczd")},m(l,h){_(l,t,h),k(t,n),k(n,r),k(n,i),k(n,o),k(o,s),Ve(a,s,null),k(s,c),Ve(u,s,null),k(s,d),k(s,f),F(f,e[2]),k(t,p),k(t,m),k(m,g),k(m,v),k(m,y),k(y,w),Ve(b,w,null),k(w,$),Ve(S,w,null),k(t,E),k(t,M),k(M,P),k(M,j),k(M,I),k(I,R),Ve(L,R,null),B=!0,V||(q=N(f,"input",e[20]),V=!0)},p(e,t){const n={};64&t[0]&&(n.items=e[6]),!l&&1&t[0]&&(l=!0,n.value=e[0],ye((()=>l=!1))),a.$set(n);const r={};!h&&2&t[0]&&(h=!0,r.value=e[1],ye((()=>h=!1))),u.$set(r),4&t[0]&&f.value!==e[2]&&F(f,e[2]);const i={};64&t[0]&&(i.items=e[6]),!x&&8&t[0]&&(x=!0,i.value=e[3],ye((()=>x=!1))),b.$set(i);const o={};!C&&16&t[0]&&(C=!0,o.value=e[4],ye((()=>C=!1))),S.$set(o);const s={};128&t[0]&&(s.items=e[7]),!z&&32&t[0]&&(z=!0,s.value=e[5],ye((()=>z=!1))),L.$set(s)},i(e){B||(Ae(a.$$.fragment,e),Ae(u.$$.fragment,e),Ae(b.$$.fragment,e),Ae(S.$$.fragment,e),Ae(L.$$.fragment,e),B=!0)},o(e){Me(a.$$.fragment,e),Me(u.$$.fragment,e),Me(b.$$.fragment,e),Me(S.$$.fragment,e),Me(L.$$.fragment,e),B=!1},d(e){e&&O(t),Fe(a),Fe(u),Fe(b),Fe(S),Fe(L),V=!1,q()}}}function ZM(e,t,n){let r,i,o,s,a;var l,c,u,h,d,f,p;const m=zt("jsoneditor:TransformWizard");let{json:g}=t,{queryOptions:v={}}=t,{onChange:y}=t;const w=["==","!=","<","<=",">",">="].map((e=>({value:e,label:e}))),b=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let x=(null===(l=null==v?void 0:v.filter)||void 0===l?void 0:l.path)?O(v.filter.path):null,$=(null===(c=null==v?void 0:v.filter)||void 0===c?void 0:c.relation)?w.find((e=>e.value===v.filter.relation)):null,k=(null===(u=null==v?void 0:v.filter)||void 0===u?void 0:u.value)||"",S=(null===(h=null==v?void 0:v.sort)||void 0===h?void 0:h.path)?O(v.sort.path):null,C=(null===(d=null==v?void 0:v.sort)||void 0===d?void 0:d.direction)?b.find((e=>e.value===v.sort.direction)):null,_=(null===(f=null==v?void 0:v.projection)||void 0===f?void 0:f.paths)?v.projection.paths.map(O):null;function O(e){return{value:e,label:ha(e)?"(whole item)":hu(e)}}return e.$$set=e=>{"json"in e&&n(11,g=e.json),"queryOptions"in e&&n(10,v=e.queryOptions),"onChange"in e&&n(12,y=e.onChange)},e.$$.update=()=>{2048&e.$$.dirty[0]&&n(17,r=Array.isArray(g)),133120&e.$$.dirty[0]&&n(16,i=r?Xn(g):[]),133120&e.$$.dirty[0]&&n(15,o=r?Xn(g,!0):[]),65536&e.$$.dirty[0]&&n(6,s=i.map(O)),32768&e.$$.dirty[0]&&n(7,a=o?o.map(O):[]),17472&e.$$.dirty[0]&&(null===n(14,p=null==v?void 0:v.filter)||void 0===p?void 0:p.path)&&s.find((e=>{var t;return da(e.value,null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.path)})),1&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.path,e)||(m("changeFilterPath",e),n(10,v=Nn.setIn(v,["filter","path"],e,!0)),y(v))}((null==x?void 0:x.value)||null),2&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.relation,e)||(m("changeFilterRelation",e),n(10,v=Nn.setIn(v,["filter","relation"],e,!0)),y(v))}((null==$?void 0:$.value)||null),4&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.filter)||void 0===t?void 0:t.value,e)||(m("changeFilterValue",e),n(10,v=Nn.setIn(v,["filter","value"],e,!0)),y(v))}(k||null),8&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.sort)||void 0===t?void 0:t.path,e)||(m("changeSortPath",e),n(10,v=Nn.setIn(v,["sort","path"],e,!0)),y(v))}((null==S?void 0:S.value)||null),16&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.sort)||void 0===t?void 0:t.direction,e)||(m("changeSortDirection",e),n(10,v=Nn.setIn(v,["sort","direction"],e,!0)),y(v))}((null==C?void 0:C.value)||null),32&e.$$.dirty[0]&&function(e){var t;da(null===(t=null==v?void 0:v.projection)||void 0===t?void 0:t.paths,e)||(m("changeProjectionPaths",e),n(10,v=Nn.setIn(v,["projection","paths"],e,!0)),y(v))}(_?_.map((e=>e.value)):null)},[x,$,k,S,C,_,s,a,w,b,v,g,y,l,p,o,i,r,function(e){x=e,n(0,x)},function(e){$=e,n(1,$)},function(){k=this.value,n(2,k)},function(e){S=e,n(3,S)},function(e){C=e,n(4,C)},function(e){_=e,n(5,_)}]}class eP extends He{constructor(e){super(),qe(this,e,ZM,YM,u,{json:11,queryOptions:10,onChange:12},null,[-1,-1])}}function tP(e,t,n){const r=e.slice();return r[5]=t[n],r}function nP(t){let n,r;return n=new ru({props:{data:j_}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function rP(t){let n,r;return n=new ru({props:{data:N_}}),{c(){Be(n.$$.fragment)},m(e,t){Ve(n,e,t),r=!0},p:e,i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){Fe(n,e)}}}function iP(e){let t,n,r,i,o,s,a,l,c,u,h=e[5].name+"";const d=[rP,nP],f=[];function p(e,t){return e[5].id===e[0]?0:1}function m(){return e[4](e[5])}return n=p(e),r=f[n]=d[n](e),{c(){t=A("button"),r.c(),i=T(),o=P(h),s=T(),D(t,"type","button"),D(t,"class","jse-query-language svelte-19cxesy"),D(t,"title",a=`Select ${e[5].name} as query language`),U(t,"selected",e[5].id===e[0])},m(e,r){_(e,t,r),f[n].m(t,null),k(t,i),k(t,o),k(t,s),l=!0,c||(u=N(t,"click",m),c=!0)},p(s,c){let u=n;n=p(e=s),n===u?f[n].p(e,c):(Oe(),Me(f[u],1,1,(()=>{f[u]=null})),Ee(),r=f[n],r?r.p(e,c):(r=f[n]=d[n](e),r.c()),Ae(r,1),r.m(t,i)),(!l||2&c)&&h!==(h=e[5].name+"")&&V(o,h),(!l||2&c&&a!==(a=`Select ${e[5].name} as query language`))&&D(t,"title",a),3&c&&U(t,"selected",e[5].id===e[0])},i(e){l||(Ae(r),l=!0)},o(e){Me(r),l=!1},d(e){e&&O(t),f[n].d(),c=!1,u()}}}function oP(e){let t,n,r,i=e[1],o=[];for(let t=0;t<i.length;t+=1)o[t]=iP(tP(e,i,t));const s=e=>Me(o[e],1,1,(()=>{o[e]=null}));return{c(){t=A("div"),n=A("div");for(let e=0;e<o.length;e+=1)o[e].c();D(n,"class","jse-select-query-language-container svelte-19cxesy"),D(t,"class","jse-select-query-language svelte-19cxesy")},m(e,i){_(e,t,i),k(t,n);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r=!0},p(e,[t]){if(7&t){let r;for(i=e[1],r=0;r<i.length;r+=1){const s=tP(e,i,r);o[r]?(o[r].p(s,t),Ae(o[r],1)):(o[r]=iP(s),o[r].c(),Ae(o[r],1),o[r].m(n,null))}for(Oe(),r=i.length;r<o.length;r+=1)s(r);Ee()}},i(e){if(!r){for(let e=0;e<i.length;e+=1)Ae(o[e]);r=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Me(o[e]);r=!1},d(e){e&&O(t),E(o,e)}}}function sP(e,t,n){let{queryLanguages:r}=t,{queryLanguageId:i}=t,{onChangeQueryLanguage:o}=t;function s(e){n(0,i=e),o(e)}return e.$$set=e=>{"queryLanguages"in e&&n(1,r=e.queryLanguages),"queryLanguageId"in e&&n(0,i=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(3,o=e.onChangeQueryLanguage)},[i,r,s,o,e=>s(e.id)]}class aP extends He{constructor(e){super(),qe(this,e,sP,oP,a,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}function lP(t){let n,r,i,o,s;return r=new ru({props:{data:xc}}),{c(){n=A("button"),Be(r.$$.fragment),D(n,"type","button"),D(n,"class","jse-config svelte-d01h2s"),D(n,"title","Select a query language")},m(e,a){_(e,n,a),Ve(r,n,null),t[6](n),i=!0,o||(s=N(n,"click",t[3]),o=!0)},p:e,i(e){i||(Ae(r.$$.fragment,e),i=!0)},o(e){Me(r.$$.fragment,e),i=!1},d(e){e&&O(n),Fe(r),t[6](null),o=!1,s()}}}function cP(e){let t,n,r,i,o,s,a,l,c,u=e[0].length>1&&lP(e);return s=new ru({props:{data:Mc}}),{c(){t=A("div"),n=A("div"),n.textContent="Transform",r=T(),u&&u.c(),i=T(),o=A("button"),Be(s.$$.fragment),D(n,"class","jse-title svelte-d01h2s"),D(o,"type","button"),D(o,"class","jse-close svelte-d01h2s"),D(t,"class","jse-header svelte-d01h2s")},m(h,d){_(h,t,d),k(t,n),k(t,r),u&&u.m(t,null),k(t,i),k(t,o),Ve(s,o,null),a=!0,l||(c=N(o,"click",e[2]),l=!0)},p(e,[n]){e[0].length>1?u?(u.p(e,n),1&n&&Ae(u,1)):(u=lP(e),u.c(),Ae(u,1),u.m(t,i)):u&&(Oe(),Me(u,1,1,(()=>{u=null})),Ee())},i(e){a||(Ae(u),Ae(s.$$.fragment,e),a=!0)},o(e){Me(u),Me(s.$$.fragment,e),a=!1},d(e){e&&O(t),u&&u.d(),Fe(s),l=!1,c()}}}function uP(e,t,n){let r,{queryLanguages:i}=t,{queryLanguageId:o}=t,{onChangeQueryLanguage:s}=t;const{close:a}=ae("simple-modal"),{openAbsolutePopup:l,closeAbsolutePopup:c}=ae("absolute-popup");return e.$$set=e=>{"queryLanguages"in e&&n(0,i=e.queryLanguages),"queryLanguageId"in e&&n(4,o=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(5,s=e.onChangeQueryLanguage)},[i,r,a,function(){l(aP,{queryLanguages:i,queryLanguageId:o,onChangeQueryLanguage:e=>{c(),s(e)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:r,closeOnOuterClick:!0})},o,s,function(e){ue[e?"unshift":"push"]((()=>{r=e,n(1,r)}))}]}class hP extends He{constructor(e){super(),qe(this,e,uP,cP,u,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}function dP(e){let t,n,r,i,o;const s=[pP,fP],a=[];function l(e,n){return 512&n[0]&&(t=null),null==t&&(t=!!Array.isArray(e[9])),t?0:1}return n=l(e,[-1,-1]),r=a[n]=s[n](e),{c(){r.c(),i=j()},m(e,t){a[n].m(e,t),_(e,i,t),o=!0},p(e,t){let o=n;n=l(e,t),n===o?a[n].p(e,t):(Oe(),Me(a[o],1,1,(()=>{a[o]=null})),Ee(),r=a[n],r?r.p(e,t):(r=a[n]=s[n](e),r.c()),Ae(r,1),r.m(i.parentNode,i))},i(e){o||(Ae(r),o=!0)},o(e){Me(r),o=!1},d(e){a[n].d(e),e&&O(i)}}}function fP(t){let n;return{c(){n=P("(Only available for arrays, not for objects)")},m(e,t){_(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function pP(e){let t,n;return t=new eP({props:{queryOptions:e[7],json:e[9],onChange:e[16]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};128&n[0]&&(r.queryOptions=e[7]),512&n[0]&&(r.json=e[9]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function mP(e){let t,n;return t=new _A({props:{externalContent:e[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:e[2],escapeUnicodeCharacters:e[3],onRenderValue:e[5],onError:console.error,onChange:li,onFocus:li,onBlur:li,onSortModal:li,onTransformModal:li,onClassName:e[6]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};16384&n[0]&&(r.externalContent=e[14]),4&n[0]&&(r.escapeControlCharacters=e[2]),8&n[0]&&(r.escapeUnicodeCharacters=e[3]),32&n[0]&&(r.onRenderValue=e[5]),64&n[0]&&(r.onClassName=e[6]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function gP(t){let n,r,i=t[12].toString()+"";return{c(){n=A("div"),r=P(i),D(n,"class","jse-preview jse-error svelte-15uz9w0")},m(e,t){_(e,n,t),k(n,r)},p(e,t){4096&t[0]&&i!==(i=e[12].toString()+"")&&V(r,i)},i:e,o:e,d(e){e&&O(n)}}}function vP(e){let t,n;return t=new _A({props:{externalContent:e[13],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:e[2],escapeUnicodeCharacters:e[3],onRenderValue:e[5],onError:console.error,onChange:li,onFocus:li,onBlur:li,onSortModal:li,onTransformModal:li,onClassName:e[6]}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};8192&n[0]&&(r.externalContent=e[13]),4&n[0]&&(r.escapeControlCharacters=e[2]),8&n[0]&&(r.escapeUnicodeCharacters=e[3]),32&n[0]&&(r.onRenderValue=e[5]),64&n[0]&&(r.onClassName=e[6]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function yP(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,y,w,b,x,$,S,C,E,M,j,I,R,L,z,B,V,F,q,H,W,J,K,G,Q,X,Y,Z,ee,te,ne,re,ie,oe=e[15](e[0]).description+"";t=new hP({props:{queryLanguages:e[4],queryLanguageId:e[0],onChangeQueryLanguage:e[21]}}),b=new ru({props:{data:e[10]?cc:uc}});let se=e[10]&&dP(e);V=new ru({props:{data:e[11]?cc:uc}});let ae=e[11]&&mP(e);const le=[vP,gP],ce=[];function ue(e,t){return e[12]?1:0}return G=ue(e),Q=ce[G]=le[G](e),{c(){Be(t.$$.fragment),n=T(),r=A("div"),i=A("div"),s=A("div"),a=A("div"),a.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Language</div>',l=T(),c=A("div"),u=T(),h=A("div"),h.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Path</div>',d=T(),f=A("input"),m=T(),g=A("div"),y=A("div"),w=A("button"),Be(b.$$.fragment),x=P("\n                Wizard"),$=T(),se&&se.c(),S=T(),C=A("div"),C.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Query</div>',E=T(),M=A("textarea"),j=T(),I=A("div"),R=A("div"),L=A("div"),z=A("div"),B=A("button"),Be(V.$$.fragment),F=P("\n                  Original"),q=T(),ae&&ae.c(),H=T(),W=A("div"),J=A("div"),J.innerHTML='<div class="jse-label-inner svelte-15uz9w0">Preview</div>',K=T(),Q.c(),X=T(),Y=A("div"),Z=A("button"),ee=P("Transform"),D(a,"class","jse-label svelte-15uz9w0"),D(c,"class","jse-description svelte-15uz9w0"),D(h,"class","jse-label svelte-15uz9w0"),D(f,"class","jse-path svelte-15uz9w0"),D(f,"type","text"),f.readOnly=!0,D(f,"title","Selected path"),f.value=p=ha(e[1])?"(whole document)":hu(e[1]),D(w,"type","button"),D(w,"class","svelte-15uz9w0"),D(y,"class","jse-label-inner svelte-15uz9w0"),D(g,"class","jse-label svelte-15uz9w0"),D(C,"class","jse-label svelte-15uz9w0"),D(M,"class","jse-query svelte-15uz9w0"),D(M,"spellcheck","false"),M.value=e[8],D(s,"class","jse-query-contents svelte-15uz9w0"),D(B,"type","button"),D(B,"class","svelte-15uz9w0"),D(z,"class","jse-label-inner svelte-15uz9w0"),D(L,"class","jse-label svelte-15uz9w0"),D(R,"class","jse-original-data svelte-15uz9w0"),U(R,"jse-hide",!e[11]),D(J,"class","jse-label svelte-15uz9w0"),D(W,"class","jse-preview-data svelte-15uz9w0"),D(I,"class","jse-data-contents svelte-15uz9w0"),U(I,"jse-hide-original-data",!e[11]),D(i,"class","jse-main-contents svelte-15uz9w0"),D(Z,"type","button"),D(Z,"class","jse-primary svelte-15uz9w0"),Z.disabled=te=!!e[12],D(Y,"class","jse-actions svelte-15uz9w0"),D(r,"class","jse-contents svelte-15uz9w0")},m(o,p){Ve(t,o,p),_(o,n,p),_(o,r,p),k(r,i),k(i,s),k(s,a),k(s,l),k(s,c),c.innerHTML=oe,k(s,u),k(s,h),k(s,d),k(s,f),k(s,m),k(s,g),k(g,y),k(y,w),Ve(b,w,null),k(w,x),k(s,$),se&&se.m(s,null),k(s,S),k(s,C),k(s,E),k(s,M),k(i,j),k(i,I),k(I,R),k(R,L),k(L,z),k(z,B),Ve(V,B,null),k(B,F),k(R,q),ae&&ae.m(R,null),k(I,H),k(I,W),k(W,J),k(W,K),ce[G].m(W,null),k(r,X),k(r,Y),k(Y,Z),k(Z,ee),ne=!0,re||(ie=[N(w,"click",e[19]),N(M,"input",e[17]),N(B,"click",e[20]),N(Z,"click",e[18]),v(bP.call(null,Z))],re=!0)},p(e,n){const r={};16&n[0]&&(r.queryLanguages=e[4]),1&n[0]&&(r.queryLanguageId=e[0]),t.$set(r),(!ne||1&n[0])&&oe!==(oe=e[15](e[0]).description+"")&&(c.innerHTML=oe),(!ne||2&n[0]&&p!==(p=ha(e[1])?"(whole document)":hu(e[1]))&&f.value!==p)&&(f.value=p);const i={};1024&n[0]&&(i.data=e[10]?cc:uc),b.$set(i),e[10]?se?(se.p(e,n),1024&n[0]&&Ae(se,1)):(se=dP(e),se.c(),Ae(se,1),se.m(s,S)):se&&(Oe(),Me(se,1,1,(()=>{se=null})),Ee()),(!ne||256&n[0])&&(M.value=e[8]);const o={};2048&n[0]&&(o.data=e[11]?cc:uc),V.$set(o),e[11]?ae?(ae.p(e,n),2048&n[0]&&Ae(ae,1)):(ae=mP(e),ae.c(),Ae(ae,1),ae.m(R,null)):ae&&(Oe(),Me(ae,1,1,(()=>{ae=null})),Ee()),2048&n[0]&&U(R,"jse-hide",!e[11]);let a=G;G=ue(e),G===a?ce[G].p(e,n):(Oe(),Me(ce[a],1,1,(()=>{ce[a]=null})),Ee(),Q=ce[G],Q?Q.p(e,n):(Q=ce[G]=le[G](e),Q.c()),Ae(Q,1),Q.m(W,null)),2048&n[0]&&U(I,"jse-hide-original-data",!e[11]),(!ne||4096&n[0]&&te!==(te=!!e[12]))&&(Z.disabled=te)},i(e){ne||(Ae(t.$$.fragment,e),Ae(b.$$.fragment,e),Ae(se),Ae(V.$$.fragment,e),Ae(ae),Ae(Q),ne=!0)},o(e){Me(t.$$.fragment,e),Me(b.$$.fragment,e),Me(se),Me(V.$$.fragment,e),Me(ae),Me(Q),ne=!1},d(e){Fe(t,e),e&&O(n),e&&O(r),Fe(b),se&&se.d(),Fe(V),ae&&ae.d(),ce[G].d(),re=!1,o(ie)}}}function wP(e){let t,n,r;return n=new nc({props:{$$slots:{default:[yP]},$$scope:{ctx:e}}}),{c(){t=A("div"),Be(n.$$.fragment),D(t,"class","jse-modal jse-transform svelte-15uz9w0")},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,t){const r={};32767&t[0]|8&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function bP(e){e.focus()}function xP(e,t,n){let r,i;const o=zt("jsoneditor:TransformModal");let{id:s="transform-modal-"+Pn()}=t,{json:a}=t,{selectedPath:l=[]}=t,{escapeControlCharacters:c}=t,{escapeUnicodeCharacters:u}=t,{queryLanguages:h}=t,{queryLanguageId:d}=t,{onChangeQueryLanguage:f}=t,{onRenderValue:p}=t,{onClassName:m}=t,{onTransform:g}=t;const{close:v}=ae("simple-modal"),y=`${s}:${Nn.compileJSONPointer(l)}`,w=QA[y]||{};let b,x=!1!==QA.showWizard,$=!1!==QA.showOriginal,k=w.queryOptions||{},S=d===w.queryLanguageId&&w.query?w.query:O(d).createQuery(a,w.queryOptions||{}),C=w.isManual||!1,_={text:""};function O(e){return h.find((t=>t.id===e))||h[0]}const E=ta((function(e,t){try{o("previewTransform",{query:t});const r=O(d).executeQuery(e,t);n(13,_={json:r}),n(12,b=void 0)}catch(e){n(13,_={text:""}),n(12,b=e)}}),300);return e.$$set=e=>{"id"in e&&n(22,s=e.id),"json"in e&&n(23,a=e.json),"selectedPath"in e&&n(1,l=e.selectedPath),"escapeControlCharacters"in e&&n(2,c=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(3,u=e.escapeUnicodeCharacters),"queryLanguages"in e&&n(4,h=e.queryLanguages),"queryLanguageId"in e&&n(0,d=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(24,f=e.onChangeQueryLanguage),"onRenderValue"in e&&n(5,p=e.onRenderValue),"onClassName"in e&&n(6,m=e.onClassName),"onTransform"in e&&n(25,g=e.onTransform)},e.$$.update=()=>{8388610&e.$$.dirty[0]&&n(9,r=Nn.getIn(a,l)),512&e.$$.dirty[0]&&n(14,i={json:r}),768&e.$$.dirty[0]&&E(r,S),201326977&e.$$.dirty[0]&&(n(26,QA[y]={queryOptions:k,query:S,queryLanguageId:d,isManual:C},QA),o("store state in memory",y,QA[y]))},[d,l,c,u,h,p,m,k,S,r,x,$,b,_,i,O,function(e){n(7,k=e),n(8,S=O(d).createQuery(a,e)),n(27,C=!1),o("updateQueryByWizard",{queryOptions:k,query:S,isManual:C})},function(e){n(8,S=e.target.value),n(27,C=!0),o("handleChangeQuery",{query:S,isManual:C})},function(){try{o("handleTransform",{query:S});const e=O(d).executeQuery(r,S);g([{op:"replace",path:Nn.compileJSONPointer(l),value:e}]),v()}catch(e){console.error(e),n(13,_={text:""}),n(12,b=e.toString())}},function(){n(10,x=!x),n(26,QA.showWizard=x,QA)},function(){n(11,$=!$),n(26,QA.showOriginal=$,QA)},function(e){o("handleChangeQueryLanguage",e),n(0,d=e),f(e);const t=O(d);n(8,S=t.createQuery(a,k)),n(27,C=!1)},s,a,f,g,QA,C]}class $P extends He{constructor(e){super(),qe(this,e,xP,wP,u,{id:22,json:23,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,queryLanguages:4,queryLanguageId:0,onChangeQueryLanguage:24,onRenderValue:5,onClassName:6,onTransform:25},null,[-1,-1])}}const kP={};function SP(e){let t,n,r,i,o,s,a;function l(t){e[12](t)}let c={showIndicator:!0,items:e[4]};return void 0!==e[1]&&(c.value=e[1]),o=new XM({props:c}),ue.push((()=>ze(o,"value",l))),{c(){t=A("tr"),n=A("th"),n.textContent="Property",r=T(),i=A("td"),Be(o.$$.fragment),D(n,"class","svelte-ery7bx"),D(i,"class","svelte-ery7bx")},m(e,s){_(e,t,s),k(t,n),k(t,r),k(t,i),Ve(o,i,null),a=!0},p(e,t){const n={};16&t&&(n.items=e[4]),!s&&2&t&&(s=!0,n.value=e[1],ye((()=>s=!1))),o.$set(n)},i(e){a||(Ae(o.$$.fragment,e),a=!0)},o(e){Me(o.$$.fragment,e),a=!1},d(e){e&&O(t),Fe(o)}}}function CP(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,y,w,b,x,$,S,C,E,M,j,I,R,L,z,B,V,F;n=new u_({props:{title:e[3]?"Sort array items":"Sort object keys"}});let q=e[3]&&(e[4].length>1||void 0===e[1])&&SP(e);function H(t){e[13](t)}let W={showIndicator:!0,items:e[5],isClearable:!1};return void 0!==e[2]&&(W.value=e[2]),S=new XM({props:W}),ue.push((()=>ze(S,"value",H))),{c(){t=A("div"),Be(n.$$.fragment),r=T(),i=A("div"),s=A("table"),a=A("colgroup"),a.innerHTML='<col width="25%"/> \n        <col width="75%"/>',l=T(),c=A("tbody"),u=A("tr"),h=A("th"),h.textContent="Path",d=T(),f=A("td"),p=A("input"),g=T(),q&&q.c(),y=T(),w=A("tr"),b=A("th"),b.textContent="Direction",x=T(),$=A("td"),Be(S.$$.fragment),E=T(),M=A("div"),j=T(),I=A("div"),R=A("button"),L=P("Sort"),D(h,"class","svelte-ery7bx"),D(p,"class","jse-path svelte-ery7bx"),D(p,"type","text"),p.readOnly=!0,D(p,"title","Selected path"),p.value=m=ha(e[0])?"(whole document)":hu(e[0]),D(f,"class","svelte-ery7bx"),D(b,"class","svelte-ery7bx"),D($,"class","svelte-ery7bx"),D(s,"class","svelte-ery7bx"),D(M,"class","jse-space svelte-ery7bx"),D(R,"type","button"),D(R,"class","jse-primary svelte-ery7bx"),R.disabled=z=!!e[3]&&!e[1],D(I,"class","jse-actions svelte-ery7bx"),D(i,"class","jse-contents svelte-ery7bx"),D(t,"class","jse-modal jse-sort svelte-ery7bx")},m(o,m){_(o,t,m),Ve(n,t,null),k(t,r),k(t,i),k(i,s),k(s,a),k(s,l),k(s,c),k(c,u),k(u,h),k(u,d),k(u,f),k(f,p),k(c,g),q&&q.m(c,null),k(c,y),k(c,w),k(w,b),k(w,x),k(w,$),Ve(S,$,null),k(i,E),k(i,M),k(i,j),k(i,I),k(I,R),k(R,L),B=!0,V||(F=[N(R,"click",e[6]),v(_P.call(null,R))],V=!0)},p(e,[t]){const r={};8&t&&(r.title=e[3]?"Sort array items":"Sort object keys"),n.$set(r),(!B||1&t&&m!==(m=ha(e[0])?"(whole document)":hu(e[0]))&&p.value!==m)&&(p.value=m),e[3]&&(e[4].length>1||void 0===e[1])?q?(q.p(e,t),26&t&&Ae(q,1)):(q=SP(e),q.c(),Ae(q,1),q.m(c,y)):q&&(Oe(),Me(q,1,1,(()=>{q=null})),Ee());const i={};!C&&4&t&&(C=!0,i.value=e[2],ye((()=>C=!1))),S.$set(i),(!B||10&t&&z!==(z=!!e[3]&&!e[1]))&&(R.disabled=z)},i(e){B||(Ae(n.$$.fragment,e),Ae(q),Ae(S.$$.fragment,e),B=!0)},o(e){Me(n.$$.fragment,e),Me(q),Me(S.$$.fragment,e),B=!1},d(e){e&&O(t),Fe(n),q&&q.d(),Fe(S),V=!1,o(F)}}}function _P(e){e.focus()}function OP(e,t,n){let r,i,o;const s=zt("jsoneditor:SortModal");let{id:a}=t,{json:l}=t,{selectedPath:c}=t,{onSort:u}=t;const{close:h}=ae("simple-modal"),d=`${a}:${Nn.compileJSONPointer(c)}`,f=Nn.getIn(l,c),p={value:1,label:"ascending"},m=[p,{value:-1,label:"descending"}];let g=kP[d]&&kP[d].selectedProperty||void 0,v=kP[d]&&kP[d].selectedDirection||p;function y(e){return{value:e,label:ha(e)?"(whole item)":hu(e)}}return e.$$set=e=>{"id"in e&&n(7,a=e.id),"json"in e&&n(8,l=e.json),"selectedPath"in e&&n(0,c=e.selectedPath),"onSort"in e&&n(9,u=e.onSort)},e.$$.update=()=>{8&e.$$.dirty&&n(11,i=r?Xn(f):void 0),2048&e.$$.dirty&&n(4,o=i?i.map(y):void 0),18&e.$$.dirty&&void 0===g&&o&&1===o.length&&n(1,g=o[0]),1030&e.$$.dirty&&(n(10,kP[d]={selectedProperty:g,selectedDirection:v},kP),s("store state in memory",d,kP[d]))},n(3,r=Array.isArray(f)),[c,g,v,r,o,m,function(){if(r){if(!g)return;const e=g.value,t=v.value,n=GE(l,c,e,t);u(n)}else if(Fn(f)){const e=v.value,t=function(e,t=[],n=1){const r=Nn.getIn(e,t),i=Object.keys(r).slice();i.sort(((e,t)=>n*KE(e,t)));const o=[];for(let e=0;e<i.length;e++){const n=i[e],r=Nn.compileJSONPointer(t.concat(n));o.push({op:"move",from:r,path:r})}return o}(l,c,e);u(t)}else console.error("Cannot sort: no array or object");h()},a,l,u,kP,i,function(e){g=e,n(1,g),n(4,o),n(11,i),n(3,r)},function(e){v=e,n(2,v)}]}class EP extends He{constructor(e){super(),qe(this,e,OP,CP,u,{id:7,json:8,selectedPath:0,onSort:9})}}function AP(e,t,n){const r=ae("simple-modal");return[r.open,r.close]}class MP extends He{constructor(e){super(),qe(this,e,AP,null,u,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}function PP(e){let t,n,r={readOnly:e[2],indentation:e[3],externalContent:e[0],mainMenuBar:e[5],navigationBar:e[6],escapeControlCharacters:e[8],escapeUnicodeCharacters:e[9],validator:e[10],onError:e[13],onChange:e[21],onRequestRepair:e[23],onRenderValue:e[11],onClassName:e[12],onFocus:e[25],onBlur:e[26],onRenderMenu:e[27],onSortModal:e[29],onTransformModal:e[28]};return t=new _A({props:r}),e[54](t),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};4&n[0]&&(r.readOnly=e[2]),8&n[0]&&(r.indentation=e[3]),1&n[0]&&(r.externalContent=e[0]),32&n[0]&&(r.mainMenuBar=e[5]),64&n[0]&&(r.navigationBar=e[6]),256&n[0]&&(r.escapeControlCharacters=e[8]),512&n[0]&&(r.escapeUnicodeCharacters=e[9]),1024&n[0]&&(r.validator=e[10]),8192&n[0]&&(r.onError=e[13]),2048&n[0]&&(r.onRenderValue=e[11]),4096&n[0]&&(r.onClassName=e[12]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(n){e[54](null),Fe(t,n)}}}function TP(e){let t,n,r={text:e[20](e[0]),readOnly:e[2],indentation:e[3],tabSize:e[4],mainMenuBar:e[5],statusBar:e[7],escapeUnicodeCharacters:e[9],validator:e[10],onChange:e[22],onSwitchToTreeMode:e[24],onError:e[13],onFocus:e[25],onBlur:e[26],onRenderMenu:e[27],onSortModal:e[29],onTransformModal:e[28]};return t=new zC({props:r}),e[53](t),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1&n[0]&&(r.text=e[20](e[0])),4&n[0]&&(r.readOnly=e[2]),8&n[0]&&(r.indentation=e[3]),16&n[0]&&(r.tabSize=e[4]),32&n[0]&&(r.mainMenuBar=e[5]),128&n[0]&&(r.statusBar=e[7]),512&n[0]&&(r.escapeUnicodeCharacters=e[9]),1024&n[0]&&(r.validator=e[10]),8192&n[0]&&(r.onError=e[13]),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(n){e[53](null),Fe(t,n)}}}function jP(e){let t,n,r,i;const o=[TP,PP],s=[];function a(e,t){return e[1]===Xt.CODE?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),r=j()},m(e,n){s[t].m(e,n),_(e,r,n),i=!0},p(e,i){let l=t;t=a(e),t===l?s[t].p(e,i):(Oe(),Me(s[l],1,1,(()=>{s[l]=null})),Ee(),n=s[t],n?n.p(e,i):(n=s[t]=o[t](e),n.c()),Ae(n,1),n.m(r.parentNode,r))},i(e){i||(Ae(n),i=!0)},o(e){Me(n),i=!1},d(e){s[t].d(e),e&&O(r)}}}function NP(t){let n,r,i=t[14],o=jP(t);return{c(){n=A("div"),o.c(),D(n,"class","jse-main svelte-1ogdbp0"),U(n,"jse-focus",t[15])},m(e,i){_(e,n,i),o.m(n,null),t[55](n),r=!0},p(t,r){16384&r[0]&&u(i,i=t[14])?(Oe(),Me(o,1,1,e),Ee(),o=jP(t),o.c(),Ae(o,1),o.m(n,null)):o.p(t,r),32768&r[0]&&U(n,"jse-focus",t[15])},i(e){r||(Ae(o),r=!0)},o(e){Me(o),r=!1},d(e){e&&O(n),o.d(e),t[55](null)}}}function IP(e){let t,n,r,i,o;function s(t){e[52](t)}let a={};return void 0!==e[19]&&(a.open=e[19]),t=new MP({props:a}),ue.push((()=>ze(t,"open",s))),i=new nc({props:{$$slots:{default:[NP]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment),r=T(),Be(i.$$.fragment)},m(e,n){Ve(t,e,n),_(e,r,n),Ve(i,e,n),o=!0},p(e,r){const o={};!n&&524288&r[0]&&(n=!0,o.open=e[19],ye((()=>n=!1))),t.$set(o);const s={};524287&r[0]|1073741824&r[1]&&(s.$$scope={dirty:r,ctx:e}),i.$set(s)},i(e){o||(Ae(t.$$.fragment,e),Ae(i.$$.fragment,e),o=!0)},o(e){Me(t.$$.fragment,e),Me(i.$$.fragment,e),o=!1},d(e){Fe(t,e),e&&O(r),Fe(i,e)}}}function RP(e){let t,n;return t=new Qt({props:{$$slots:{default:[IP]},$$scope:{ctx:e}}}),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};1048575&n[0]|1073741824&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function DP(e){this.$set(e)}function LP(){this.$destroy()}function zP(e,t,n){let r;const i=zt("jsoneditor:Main");let o,s,a,l,c,{content:u={text:""}}=t,{readOnly:h=!1}=t,{indentation:d=2}=t,{tabSize:f=4}=t,{mode:p=Xt.TREE}=t,{mainMenuBar:m=!0}=t,{navigationBar:g=!0}=t,{statusBar:v=!0}=t,{escapeControlCharacters:y=!1}=t,{escapeUnicodeCharacters:w=!1}=t,{validator:b=null}=t,{queryLanguages:x=[OA]}=t,{queryLanguageId:$=x[0].id}=t,{onChangeQueryLanguage:k=li}=t,{onChange:S=null}=t,{onRenderValue:C=GA}=t,{onClassName:_=li}=t,{onRenderMenu:O=li}=t,{onChangeMode:E=li}=t,{onError:A=(e=>{console.error(e),alert(e.toString())})}=t,{onFocus:M=li}=t,{onBlur:P=li}=t,T=Pn(),j=!1;function N(){a?a.focus():s&&s.focus()}function I(e,t,r){n(0,u=e),S&&S(e,t,r)}async function R(e){p!==e&&(n(1,p=e),await ge(),N(),E(e))}const D={separator:!0};function L(e){i("handleChangeQueryLanguage",e),n(30,$=e),k(e)}return e.$$set=e=>{"content"in e&&n(0,u=e.content),"readOnly"in e&&n(2,h=e.readOnly),"indentation"in e&&n(3,d=e.indentation),"tabSize"in e&&n(4,f=e.tabSize),"mode"in e&&n(1,p=e.mode),"mainMenuBar"in e&&n(5,m=e.mainMenuBar),"navigationBar"in e&&n(6,g=e.navigationBar),"statusBar"in e&&n(7,v=e.statusBar),"escapeControlCharacters"in e&&n(8,y=e.escapeControlCharacters),"escapeUnicodeCharacters"in e&&n(9,w=e.escapeUnicodeCharacters),"validator"in e&&n(10,b=e.validator),"queryLanguages"in e&&n(31,x=e.queryLanguages),"queryLanguageId"in e&&n(30,$=e.queryLanguageId),"onChangeQueryLanguage"in e&&n(32,k=e.onChangeQueryLanguage),"onChange"in e&&n(33,S=e.onChange),"onRenderValue"in e&&n(11,C=e.onRenderValue),"onClassName"in e&&n(12,_=e.onClassName),"onRenderMenu"in e&&n(34,O=e.onRenderMenu),"onChangeMode"in e&&n(35,E=e.onChangeMode),"onError"in e&&n(13,A=e.onError),"onFocus"in e&&n(36,M=e.onFocus),"onBlur"in e&&n(37,P=e.onBlur)},e.$$.update=()=>{if(1&e.$$.dirty[0]){const e=lr(u);e&&console.error("Error: "+e)}2&e.$$.dirty[0]&&n(51,r=p===Xt.CODE),2&e.$$.dirty[0]|1048576&e.$$.dirty[1]&&(c=[{text:"code",title:`Switch to code mode (current mode: ${p})`,className:"jse-group-button jse-first"+(r?" jse-selected":""),onClick:()=>R(Xt.CODE)},{text:"tree",title:`Switch to tree mode (current mode: ${p})`,className:"jse-group-button jse-last"+(r?"":" jse-selected"),onClick:()=>R(Xt.TREE)}])},[u,p,h,d,f,m,g,v,y,w,b,C,_,A,T,j,o,s,a,l,function(e){return cr(e)?e.text:JSON.stringify(e.json,null,d)},I,function(e,t){I({text:e,json:void 0},{text:t,json:void 0},null)},async function(){n(1,p=Xt.CODE),await ge(),E(Xt.CODE)},async function(){n(1,p=Xt.TREE),await ge(),E(Xt.TREE)},function(){n(15,j=!0),M&&M()},function(){n(15,j=!1),P&&P()},function(e,t){const n=e===Xt.TREE||e===Xt.CODE?(r=t[0])&&!0===r.space&&1===Object.keys(r).length?c.concat(t):c.concat([D],t):t;var r;return O(e,n)||n},function({id:e,json:t,selectedPath:n,onTransform:r,onClose:i}){console.log("json",t),h||l($P,{id:e,json:t,selectedPath:n,escapeControlCharacters:y,escapeUnicodeCharacters:w,queryLanguages:x,queryLanguageId:$,onChangeQueryLanguage:L,onRenderValue:C,onClassName:_,onTransform:r},gn,{onClose:i})},function({id:e,json:t,selectedPath:n,onSort:r,onClose:i}){h||l(EP,{id:e,json:t,selectedPath:n,onSort:r},mn,{onClose:i})},$,x,k,S,O,E,M,P,function(){return u},function(e){i("set");const t=lr(e);if(t)throw new Error(t);n(14,T=Pn()),n(0,u=e)},function(e){i("update");const t=lr(e);if(t)throw new Error(t);n(0,u=e)},function(e){if(cr(u))try{n(0,u={json:JSON.parse(u.text),text:void 0})}catch(e){throw new Error("Cannot apply patch: current document contains invalid JSON")}return s?s.patch(e):a?a.patch(e):void 0},function(e){if(s)return s.expand(e);throw new Error(`Method expand is not available in mode "${p}"`)},function(e){if(a)a.openTransformModal(e);else{if(!s)throw new Error(`Method transform is not available in mode "${p}"`);s.openTransformModal(e)}},function(){return s?s.acceptAutoRepair():u},function(e){if(s)return s.scrollTo(e);throw new Error(`Method scrollTo is not available in mode "${p}"`)},function(e){if(s)return s.findElement(e);throw new Error(`Method findElement is not available in mode "${p}"`)},N,function(){a&&a.refresh()},DP,LP,r,function(e){l=e,n(19,l)},function(e){ue[e?"unshift":"push"]((()=>{a=e,n(18,a)}))},function(e){ue[e?"unshift":"push"]((()=>{s=e,n(17,s)}))},function(e){ue[e?"unshift":"push"]((()=>{o=e,n(16,o)}))}]}class BP extends He{constructor(e){super(),qe(this,e,zP,RP,u,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,validator:10,queryLanguages:31,queryLanguageId:30,onChangeQueryLanguage:32,onChange:33,onRenderValue:11,onClassName:12,onRenderMenu:34,onChangeMode:35,onError:13,onFocus:36,onBlur:37,get:38,set:39,update:40,patch:41,expand:42,transform:43,acceptAutoRepair:44,scrollTo:45,findElement:46,focus:47,refresh:48,updateProps:49,destroy:50},null,[-1,-1])}get get(){return this.$$.ctx[38]}get set(){return this.$$.ctx[39]}get update(){return this.$$.ctx[40]}get patch(){return this.$$.ctx[41]}get expand(){return this.$$.ctx[42]}get transform(){return this.$$.ctx[43]}get acceptAutoRepair(){return this.$$.ctx[44]}get scrollTo(){return this.$$.ctx[45]}get findElement(){return this.$$.ctx[46]}get focus(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get updateProps(){return DP}get destroy(){return LP}}function VP(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Tn((function(e,t){e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(!a&&jn)return jn(s);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=jn,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class r{}n._CodeOrName=r,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends r{constructor(e){if(super(),!n.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=i;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function s(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)c(n,t[r]),n.push(e[++r]);return new o(n)}n._Code=o,n.nil=new o(""),n._=s;const a=new o("+");function l(e,...t){const n=[h(e[0])];let r=0;for(;r<t.length;)n.push(a),c(n,t[r]),n.push(a,h(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const n=u(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new o(n)}function c(e,t){var n;t instanceof o?e.push(...t._items):e.push(t instanceof i?t:"number"==typeof(n=t)||"boolean"==typeof n||null===n?n:h(Array.isArray(n)?n.join(","):n))}function u(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function h(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.str=l,n.addCodeArg=c,n.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:l`${e}${t}`},n.stringify=function(e){return new o(h(e))},n.safeStringify=h,n.getProperty=function(e){return"string"==typeof e&&n.IDENTIFIER.test(e)?new o(`.${e}`):s`[${e}]`},n.getEsmExportName=function(e){if("string"==typeof e&&n.IDENTIFIER.test(e))return new o(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},n.regexpCode=function(e){return new o(e.toString())}},{}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const r=e("./code"),i=e("./scope");var o=e("./code");Object.defineProperty(n,"_",{enumerable:!0,get:()=>o._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>o.str}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:()=>o.strConcat}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>o.nil}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:()=>o.getProperty}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>o.stringify}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:()=>o.regexpCode}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>o.Name});var s=e("./scope");Object.defineProperty(n,"Scope",{enumerable:!0,get:()=>s.Scope}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:()=>s.ValueScope}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:()=>s.ValueScopeName}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:()=>s.varKinds}),n.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n:t}){return`${e?i.varKinds.var:this.varKind} ${this.name}${void 0===this.rhs?"":` = ${this.rhs}`};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=P(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=P(this.rhs,e,t),this}get names(){return M(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class u extends c{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=P(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,n)=>t+n.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const i=n[r];i.optimizeNames(e,t)||(T(e,i.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>A(e,t.names)),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class v extends m{}class y extends g{}y.kind="else";class w extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new y(e):e}return t?!1===e?t instanceof w?t:t.nodes:this.nodes.length?this:new w(j(e),t instanceof w?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=P(this.condition,e,t),this}get names(){const e=super.names;return M(e,this.condition),this.else&&A(e,this.else.names),e}}w.kind="if";class b extends g{}b.kind="for";class x extends b{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=P(this.iteration,e,t),this}get names(){return A(super.names,this.iteration.names)}}class $ extends b{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?i.varKinds.var:this.varKind,{name:n,from:r,to:o}=this;return`for(${t} ${n}=${r}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=M(super.names,this.from);return M(e,this.to)}}class k extends b{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=P(this.iterable,e,t),this}get names(){return A(super.names,this.iterable.names)}}class S extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}S.kind="func";class C extends m{render(e){return"return "+super.render(e)}}C.kind="return";class _ extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&A(e,this.catch.names),this.finally&&A(e,this.finally.names),e}}class O extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}O.kind="catch";class E extends g{render(e){return"finally"+super.render(e)}}function A(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function M(e,t){return t instanceof r._CodeOrName?A(e,t.names):e}function P(e,t,n){return e instanceof r.Name?o(e):(i=e)instanceof r._Code&&i._items.some((e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str]))?new r._Code(e._items.reduce(((e,t)=>(t instanceof r.Name&&(t=o(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e)),[])):e;var i;function o(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function T(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function j(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${D(e)}`}E.kind="finally",n.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new i.Scope({parent:e}),this._nodes=[new v]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const i=this._scope.toName(t);return void 0!==n&&r&&(this._constants[i.str]=n),this._leafNode(new l(e,i,n)),i}const(e,t,n){return this._def(i.varKinds.const,e,t,n)}let(e,t,n){return this._def(i.varKinds.let,e,t,n)}var(e,t,n){return this._def(i.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new c(e,t,n))}add(e,t){return this._leafNode(new u(e,n.operators.ADD,t))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[n,i]of e)t.length>1&&t.push(","),t.push(n),(n!==i||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,i));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new w(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new w(e))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(w,y)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new x(e),t)}forRange(e,t,n,r,o=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const s=this._scope.toName(e);return this._for(new $(o,s,t,n),(()=>r(s)))}forOf(e,t,n,o=i.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,(t=>{this.var(s,r._`${e}[${t}]`),n(s)}))}return this._for(new k("of",o,s,t),(()=>n(s)))}forIn(e,t,n,o=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const s=this._scope.toName(e);return this._for(new k("in",o,s,t),(()=>n(s)))}endFor(){return this._endBlockNode(b)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new C;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new _;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new O(e),t(e)}return n&&(this._currNode=r.finally=new E,this.code(n)),this._endBlockNode(O,E)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,i){return this._blockNode(new S(e,t,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},n.not=j;const N=R(n.operators.AND);n.and=function(...e){return e.reduce(N)};const I=R(n.operators.OR);function R(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${D(t)} ${e} ${D(n)}`}function D(e){return e instanceof r.Name?e:r._`(${e})`}n.or=function(...e){return e.reduce(I)}},{"./code":1,"./scope":3}],3:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const r=e("./code");class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o=n.UsedValueState||(n.UsedValueState={})),n.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}n.Scope=s;class a extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}n.ValueScopeName=a;const l=r._`\n`;n.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:r.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:i}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let s=this._values[i];if(s){const e=s.get(o);if(e)return e}else s=this._values[i]=new Map;s.set(o,r);const a=this._scope[i]||(this._scope[i]=[]),l=a.length;return a[l]=t.ref,r.setValue(t,{property:i,itemIndex:l}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,n){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,n)}_reduceValues(e,t,s={},a){let l=r.nil;for(const c in e){const u=e[c];if(!u)continue;const h=s[c]=s[c]||new Map;u.forEach((e=>{if(h.has(e))return;h.set(e,o.Started);let s=t(e);if(s)l=r._`${l}${this.opts.es5?n.varKinds.var:n.varKinds.const} ${e} = ${s};${this.opts._n}`;else{if(!(s=null==a?void 0:a(e)))throw new i(e);l=r._`${l}${s}${this.opts._n}`}h.set(e,o.Completed)}))}return l}}},{"./code":1}],4:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const r=e("./codegen"),i=e("./util"),o=e("./names");function s(e,t){const n=e.const("err",t);e.if(r._`${o.default.vErrors} === null`,(()=>e.assign(o.default.vErrors,r._`[${n}]`)),r._`${o.default.vErrors}.push(${n})`),e.code(r._`${o.default.errors}++`)}function a(e,t){const{gen:n,validateName:i,schemaEnv:o}=e;o.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${i}.errors`,t),n.return(!1))}n.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},n.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},n.reportError=function(e,t=n.keywordError,i,o){const{it:l}=e,{gen:u,compositeRule:h,allErrors:d}=l,f=c(e,t,i);(null!=o?o:h||d)?s(u,f):a(l,r._`[${f}]`)},n.reportExtraError=function(e,t=n.keywordError,r){const{it:i}=e,{gen:l,compositeRule:u,allErrors:h}=i;s(l,c(e,t,r)),u||h||a(i,o.default.vErrors)},n.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(r._`${o.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(r._`${o.default.vErrors}.length`,t)),(()=>e.assign(o.default.vErrors,null)))))},n.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:i,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,(s=>{e.const(l,r._`${o.default.vErrors}[${s}]`),e.if(r._`${l}.instancePath === undefined`,(()=>e.assign(r._`${l}.instancePath`,(0,r.strConcat)(o.default.instancePath,a.errorPath)))),e.assign(r._`${l}.schemaPath`,r.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(r._`${l}.schema`,n),e.assign(r._`${l}.data`,i))}))};const l={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function c(e,t,n){const{createErrors:i}=e.it;return!1===i?r._`{}`:function(e,t,n={}){const{gen:i,it:s}=e,a=[u(s,n),h(e,n)];return function(e,{params:t,message:n},i){const{keyword:s,data:a,schemaValue:c,it:u}=e,{opts:h,propertyName:d,topSchemaRef:f,schemaPath:p}=u;i.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||r._`{}`]),h.messages&&i.push([l.message,"function"==typeof n?n(e):n]),h.verbose&&i.push([l.schema,c],[l.parentSchema,r._`${f}${p}`],[o.default.data,a]),d&&i.push([l.propertyName,d])}(e,t,a),i.object(...a)}(e,t,n)}function u({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,i.getErrorPath)(t,i.Type.Str)}`:e;return[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,n)]}function h({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let s=o?t:r.str`${t}/${e}`;return n&&(s=r.str`${s}${(0,i.getErrorPath)(n,i.Type.Str)}`),[l.schemaPath,s]}},{"./codegen":2,"./names":6,"./util":10}],5:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveSchema=n.getCompilingSchema=n.resolveRef=n.compileSchema=n.SchemaEnv=void 0;const r=e("./codegen"),i=e("../runtime/validation_error"),o=e("./names"),s=e("./resolve"),a=e("./util"),l=e("./validate");class c{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,s.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=d.call(this,e);if(t)return t;const n=(0,s.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:u}=this.opts,h=new r.CodeGen(this.scope,{es5:a,lines:c,ownProperties:u});let f;e.$async&&(f=h.scopeValue("Error",{ref:i.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const p=h.scopeName("validate");e.validateName=p;const m={gen:h,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:f,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,l.validateFunctionCode)(m),h.optimize(this.opts.code.optimize);const t=h.toString();g=`${h.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(p,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:p,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function h(e){return(0,s.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function d(e){for(const r of this._compilations)if((t=r).schema===(n=e).schema&&t.root===n.root&&t.baseId===n.baseId)return r;var t,n}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||p.call(this,e,t)}function p(e,t){const n=this.opts.uriResolver.parse(t),r=(0,s._getFullPath)(this.opts.uriResolver,n);let i=(0,s.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return g.call(this,n,e);const o=(0,s.normalizeId)(r),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=p.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,n,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||u.call(this,a),o===(0,s.normalizeId)(t)){const{schema:t}=a,{schemaId:n}=this.opts,r=t[n];return r&&(i=(0,s.resolveUrl)(this.opts.uriResolver,i,r)),new c({schema:t,schemaId:n,root:e,baseId:i})}return g.call(this,n,a)}}n.SchemaEnv=c,n.compileSchema=u,n.resolveRef=function(e,t,n){var r;n=(0,s.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let o=f.call(this,e,n);if(void 0===o){const i=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:s}=this.opts;i&&(o=new c({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[n]=h.call(this,o):void 0},n.getCompilingSchema=d,n.resolveSchema=p;const m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:n,root:r}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,a.unescapeFragment)(r)];if(void 0===e)return;const i="object"==typeof(n=e)&&n[this.opts.schemaId];!m.has(r)&&i&&(t=(0,s.resolveUrl)(this.opts.uriResolver,t,i))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,a.schemaHasRulesButRef)(n,this.RULES)){const e=(0,s.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=p.call(this,r,e)}const{schemaId:l}=this.opts;return o=o||new c({schema:n,schemaId:l,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}},{"../runtime/validation_error":24,"./codegen":2,"./names":6,"./resolve":8,"./util":10,"./validate":15}],6:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./codegen"),i={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};n.default=i},{"./codegen":2}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./resolve");class i extends Error{constructor(e,t,n,i){super(i||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,r.resolveUrl)(e,t,n),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(e,this.missingRef))}}n.default=i},{"./resolve":8}],8:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSchemaRefs=n.resolveUrl=n.normalizeId=n._getFullPath=n.getFullPath=n.inlineRef=void 0;const r=e("./util"),i=e("fast-deep-equal"),o=e("json-schema-traverse"),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);n.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(a.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(l))return!0;if("object"==typeof n&&l(n))return!0}return!1}function c(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!s.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],(e=>t+=c(e))),1/0===t))return 1/0}return t}function u(e,t="",n){!1!==n&&(t=f(t));const r=e.parse(t);return h(e,r)}function h(e,t){return e.serialize(t).split("#")[0]+"#"}n.getFullPath=u,n._getFullPath=h;const d=/#\/?$/;function f(e){return e?e.replace(d,""):""}n.normalizeId=f,n.resolveUrl=function(e,t,n){return n=f(n),e.resolve(t,n)};const p=/^[a-z_][-a-z0-9._]*$/i;n.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,s=f(e[n]||t),a={"":s},l=u(r,s,!1),c={},h=new Set;return o(e,{allKeys:!0},((e,t,r,i)=>{if(void 0===i)return;const o=l+t;let s=a[i];function u(t){if(t=f(s?(0,this.opts.uriResolver.resolve)(s,t):t),h.has(t))throw m(t);h.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?d(e,n.schema,t):t!==f(o)&&("#"===t[0]?(d(e,c[t],t),c[t]=e):this.refs[t]=o),t}function g(e){if("string"==typeof e){if(!p.test(e))throw new Error(`invalid anchor "${e}"`);u.call(this,`#${e}`)}}"string"==typeof e[n]&&(s=u.call(this,e[n])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),a[t]=s})),c;function d(e,t,n){if(void 0!==t&&!i(e,t))throw m(n)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},{"./util":10,"fast-deep-equal":63,"json-schema-traverse":64}],9:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getRules=n.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);n.isJSONType=function(e){return"string"==typeof e&&r.has(e)},n.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},{}],10:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checkStrictMode=n.getErrorPath=n.Type=n.useFunc=n.setEvaluated=n.evaluatedPropsToName=n.mergeEvaluated=n.eachItem=n.unescapeJsonPointer=n.escapeJsonPointer=n.escapeFragment=n.unescapeFragment=n.schemaRefOrVal=n.schemaHasRulesButRef=n.schemaHasRules=n.checkUnknownRules=n.alwaysValidSchema=n.toHash=void 0;const r=e("./codegen"),i=e("./codegen/code");function o(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const i=r.RULES.keywords;for(const n in t)i[n]||p(e,`unknown keyword: "${n}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:i}){return(o,s,a,l)=>{const c=void 0===a?s:a instanceof r.Name?(s instanceof r.Name?e(o,s,a):t(o,s,a),a):s instanceof r.Name?(t(o,a,s),s):n(s,a);return l!==r.Name||c instanceof r.Name?c:i(o,c)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&h(e,n,t),n}function h(e,t,n){Object.keys(n).forEach((n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0)))}n.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},n.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!s(t,e.self.RULES.all))},n.checkUnknownRules=o,n.schemaHasRules=s,n.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},n.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,i,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(i)}`},n.unescapeFragment=function(e){return l(decodeURIComponent(e))},n.escapeFragment=function(e){return encodeURIComponent(a(e))},n.escapeJsonPointer=a,n.unescapeJsonPointer=l,n.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},n.mergeEvaluated={props:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>{e.if(r._`${t} === true`,(()=>e.assign(n,!0)),(()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`)))})),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),h(e,n,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:c({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,(()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`))),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,(()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},n.evaluatedPropsToName=u,n.setEvaluated=h;const d={};var f;function p(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}n.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:d[t.code]||(d[t.code]=new i._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(f=n.Type||(n.Type={})),n.getErrorPath=function(e,t,n){if(e instanceof r.Name){const i=t===f.Num;return n?i?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:i?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+a(e)},n.checkStrictMode=p},{"./codegen":2,"./codegen/code":1}],11:[function(e,t,n){function r(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some((t=>void 0!==e[t])))}Object.defineProperty(n,"__esModule",{value:!0}),n.shouldUseRule=n.shouldUseGroup=n.schemaHasRulesForType=void 0,n.schemaHasRulesForType=function({schema:e,self:t},n){const i=t.RULES.types[n];return i&&!0!==i&&r(e,i)},n.shouldUseGroup=r,n.shouldUseRule=i},{}],12:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.boolOrEmptySchema=n.topBoolOrEmptySchema=void 0;const r=e("../errors"),i=e("../codegen"),o=e("../names"),s={message:"boolean schema is false"};function a(e,t){const{gen:n,data:i}=e;(0,r.reportError)({gen:n,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},s,void 0,t)}n.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?a(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(i._`${r}.errors`,null),t.return(!0))},n.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),a(e)):n.var(t,!0)}},{"../codegen":2,"../errors":4,"../names":6}],13:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.reportTypeError=n.checkDataTypes=n.checkDataType=n.coerceAndCheckDataType=n.getJSONTypes=n.getSchemaTypes=n.DataType=void 0;const r=e("../rules"),i=e("./applicability"),o=e("../errors"),s=e("../codegen"),a=e("../util");var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l=n.DataType||(n.DataType={})),n.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},n.getJSONTypes=c,n.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,a=function(e,t){return t?e.filter((e=>u.has(e)||"array"===t&&"array"===e)):[]}(t,o.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,i.schemaHasRulesForType)(e,t[0]));if(c){const i=d(t,r,o.strictNumbers,l.Wrong);n.if(i,(()=>{a.length?function(e,t,n){const{gen:r,data:i,opts:o}=e,a=r.let("dataType",s._`typeof ${i}`),l=r.let("coerced",s._`undefined`);"array"===o.coerceTypes&&r.if(s._`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,(()=>r.assign(i,s._`${i}[0]`).assign(a,s._`typeof ${i}`).if(d(t,i,o.strictNumbers),(()=>r.assign(l,i))))),r.if(s._`${l} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===o.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void r.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${i}`).elseIf(s._`${i} === null`).assign(l,s._`""`);case"number":return void r.elseIf(s._`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(l,s._`+${i}`);case"integer":return void r.elseIf(s._`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,s._`+${i}`);case"boolean":return void r.elseIf(s._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf(s._`${i} === "true" || ${i} === 1`).assign(l,!0);case"null":return r.elseIf(s._`${i} === "" || ${i} === 0 || ${i} === false`),void r.assign(l,null);case"array":r.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(l,s._`[${i}]`)}}r.else(),p(e),r.endIf(),r.if(s._`${l} !== undefined`,(()=>{r.assign(i,l),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(s._`${t} !== undefined`,(()=>e.assign(s._`${t}[${n}]`,r)))}(e,l)}))}(e,t,a):p(e)}))}return c};const u=new Set(["string","number","integer","boolean","null"]);function h(e,t,n,r=l.Correct){const i=r===l.Correct?s.operators.EQ:s.operators.NEQ;let o;switch(e){case"null":return s._`${t} ${i} null`;case"array":o=s._`Array.isArray(${t})`;break;case"object":o=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return s._`typeof ${t} ${i} ${e}`}return r===l.Correct?o:(0,s.not)(o);function a(e=s.nil){return(0,s.and)(s._`typeof ${t} == "number"`,e,n?s._`isFinite(${t})`:s.nil)}}function d(e,t,n,r){if(1===e.length)return h(e[0],t,n,r);let i;const o=(0,a.toHash)(e);if(o.array&&o.object){const e=s._`typeof ${t} != "object"`;i=o.null?e:s._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else i=s.nil;o.number&&delete o.integer;for(const e in o)i=(0,s.and)(i,h(e,t,n,r));return i}n.checkDataType=h,n.checkDataTypes=d;const f={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:n,schema:r}=e,i=(0,a.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}(e);(0,o.reportError)(t,f)}n.reportTypeError=p},{"../codegen":2,"../errors":4,"../rules":9,"../util":10,"./applicability":11}],14:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assignDefaults=void 0;const r=e("../codegen"),i=e("../util");function o(e,t,n){const{gen:o,compositeRule:s,data:a,opts:l}=e;if(void 0===n)return;const c=r._`${a}${(0,r.getProperty)(t)}`;if(s)return void(0,i.checkStrictMode)(e,`default is ignored for: ${c}`);let u=r._`${c} === undefined`;"empty"===l.useDefaults&&(u=r._`${u} || ${c} === null || ${c} === ""`),o.if(u,r._`${c} = ${(0,r.stringify)(n)}`)}n.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach(((t,n)=>o(e,n,t.default)))}},{"../codegen":2,"../util":10}],15:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getData=n.KeywordCxt=n.validateFunctionCode=void 0;const r=e("./boolSchema"),i=e("./dataType"),o=e("./applicability"),s=e("./dataType"),a=e("./defaults"),l=e("./keyword"),c=e("./subschema"),u=e("../codegen"),h=e("../names"),d=e("../resolve"),f=e("../util"),p=e("../errors");function m({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},o){i.code.es5?e.func(t,u._`${h.default.data}, ${h.default.valCxt}`,r.$async,(()=>{e.code(u._`"use strict"; ${g(n,i)}`),function(e,t){e.if(h.default.valCxt,(()=>{e.var(h.default.instancePath,u._`${h.default.valCxt}.${h.default.instancePath}`),e.var(h.default.parentData,u._`${h.default.valCxt}.${h.default.parentData}`),e.var(h.default.parentDataProperty,u._`${h.default.valCxt}.${h.default.parentDataProperty}`),e.var(h.default.rootData,u._`${h.default.valCxt}.${h.default.rootData}`),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`${h.default.valCxt}.${h.default.dynamicAnchors}`)}),(()=>{e.var(h.default.instancePath,u._`""`),e.var(h.default.parentData,u._`undefined`),e.var(h.default.parentDataProperty,u._`undefined`),e.var(h.default.rootData,h.default.data),t.dynamicRef&&e.var(h.default.dynamicAnchors,u._`{}`)}))}(e,i),e.code(o)})):e.func(t,u._`${h.default.data}, ${function(e){return u._`{${h.default.instancePath}="", ${h.default.parentData}, ${h.default.parentDataProperty}, ${h.default.rootData}=${h.default.data}${e.dynamicRef?u._`, ${h.default.dynamicAnchors}={}`:u.nil}}={}`}(i)}`,r.$async,(()=>e.code(g(n,i)).code(o)))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?u._`/*# sourceURL=${n} */`:u.nil}function v(e,t){w(e)&&(b(e),y(e))?function(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&$(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,d.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",h.default.errors);x(e,o),r.var(t,u._`${o} === ${h.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function w(e){return"boolean"!=typeof e.schema}function b(e){(0,f.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function x(e,t){if(e.opts.jtd)return k(e,[],!1,t);const n=(0,i.getSchemaTypes)(e.schema);k(e,n,!(0,i.coerceAndCheckDataType)(e,n),t)}function $({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const o=n.$comment;if(!0===i.$comment)e.code(u._`${h.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const n=u.str`${r}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(u._`${h.default.self}.opts.$comment(${o}, ${n}, ${i}.schema)`)}}function k(e,t,n,r){const{gen:i,schema:a,data:l,allErrors:c,opts:d,self:p}=e,{RULES:m}=p;function g(f){(0,o.shouldUseGroup)(a,f)&&(f.type?(i.if((0,s.checkDataType)(f.type,l,d.strictNumbers)),S(e,f),1===t.length&&t[0]===f.type&&n&&(i.else(),(0,s.reportTypeError)(e)),i.endIf()):S(e,f),c||i.if(u._`${h.default.errors} === ${r||0}`))}!a.$ref||!d.ignoreKeywordsWithRef&&(0,f.schemaHasRulesButRef)(a,m)?(d.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach((t=>{_(e.dataTypes,t)||O(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>_(t,e)))):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&O(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if("object"==typeof i&&(0,o.shouldUseRule)(e.schema,i)){const{type:n}=i.definition;n.length&&!n.some((e=>C(t,e)))&&O(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),i.block((()=>{for(const e of m.rules)g(e);g(m.post)}))):i.block((()=>A(e,"$ref",m.all.$ref.definition)))}function S(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,a.assignDefaults)(e,t.type),n.block((()=>{for(const n of t.rules)(0,o.shouldUseRule)(r,n)&&A(e,n.keyword,n.definition,t.type)}))}function C(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function _(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function O(e,t){(0,f.checkStrictMode)(e,t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,e.opts.strictTypes)}n.validateFunctionCode=function(e){w(e)&&(b(e),y(e))?function(e){const{schema:t,opts:n,gen:r}=e;m(e,(()=>{n.$comment&&t.$comment&&$(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,f.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(h.default.vErrors,null),r.let(h.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",u._`${n}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,(()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`))),t.if(u._`${e.evaluated}.dynamicItems`,(()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`)))}(e),x(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:o}=e;n.$async?t.if(u._`${h.default.errors} === 0`,(()=>t.return(h.default.data)),(()=>t.throw(u._`new ${i}(${h.default.vErrors})`))):(t.assign(u._`${r}.errors`,h.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof u.Name&&e.assign(u._`${t}.props`,n),r instanceof u.Name&&e.assign(u._`${t}.items`,r)}(e),t.return(u._`${h.default.errors} === 0`))}(e)}))}(e):m(e,(()=>(0,r.topBoolOrEmptySchema)(e)))};class E{constructor(e,t,n){if((0,l.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,f.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",T(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",h.default.errors))}result(e,t,n){this.failResult((0,u.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,u.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${(0,u.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?p.reportExtraError:p.reportError)(this,this.def.error,t)}$dataError(){(0,p.reportError)(this,this.def.$dataError||p.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,p.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=u.nil){this.gen.block((()=>{this.check$data(e,n),t()}))}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:i,def:o}=this;n.if((0,u.or)(u._`${r} === undefined`,t)),e!==u.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:i}=this;return(0,u.or)(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return u._`${(0,s.checkDataTypes)(e,t,i.opts.strictNumbers,s.DataType.Wrong)}`}return u.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return u._`!${n}(${t})`}return u.nil}())}subschema(e,t){const n=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(n,this.it,e),(0,c.extendSubschemaMode)(n,e);const r={...this.it,...n,items:void 0,props:void 0};return v(r,t),r}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=f.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=f.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,(()=>this.mergeEvaluated(e,u.Name))),!0}}function A(e,t,n,r){const i=new E(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,l.funcKeywordCode)(i,n):"macro"in n?(0,l.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,l.funcKeywordCode)(i,n)}n.KeywordCxt=E;const M=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function T(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,o;if(""===e)return h.default.rootData;if("/"===e[0]){if(!M.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=h.default.rootData}else{const s=P.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(i=s[2],"#"===i){if(a>=t)throw new Error(l("property/index",a));return r[t-a]}if(a>t)throw new Error(l("data",a));if(o=n[t-a],!i)return o}let s=o;const a=i.split("/");for(const e of a)e&&(o=u._`${o}${(0,u.getProperty)((0,f.unescapeJsonPointer)(e))}`,s=u._`${s} && ${o}`);return s;function l(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}n.getData=T},{"../codegen":2,"../errors":4,"../names":6,"../resolve":8,"../util":10,"./applicability":11,"./boolSchema":12,"./dataType":13,"./defaults":14,"./keyword":16,"./subschema":17}],16:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateKeywordUsage=n.validSchemaType=n.funcKeywordCode=n.macroKeywordCode=void 0;const r=e("../codegen"),i=e("../names"),o=e("../../vocabularies/code"),s=e("../errors");function a(e){const{gen:t,data:n,it:i}=e;t.if(i.parentData,(()=>t.assign(n,r._`${i.parentData}[${i.parentDataProperty}]`)))}function l(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}n.macroKeywordCode=function(e,t){const{gen:n,keyword:i,schema:o,parentSchema:s,it:a}=e,c=t.macro.call(a.self,o,s,a),u=l(n,i,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const h=n.name("valid");e.subschema({schema:c,schemaPath:r.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:u,compositeRule:!0},h),e.pass(h,(()=>e.error(!0)))},n.funcKeywordCode=function(e,t){var n;const{gen:c,keyword:u,schema:h,parentSchema:d,$data:f,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const m=!f&&t.compile?t.compile.call(p.self,h,d,p):t.validate,g=l(c,u,m),v=c.let("valid");function y(n=(t.async?r._`await `:r.nil)){c.assign(v,r._`${n}${(0,o.callValidateCode)(e,g,p.opts.passContext?i.default.this:i.default.self,!("compile"in t&&!f||!1===t.schema))}`,t.modifying)}function w(e){var n;c.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:v),e)}e.block$data(v,(function(){if(!1===t.errors)y(),t.modifying&&a(e),w((()=>e.error()));else{const n=t.async?function(){const e=c.let("ruleErrs",null);return c.try((()=>y(r._`await `)),(t=>c.assign(v,!1).if(r._`${t} instanceof ${p.ValidationError}`,(()=>c.assign(e,r._`${t}.errors`)),(()=>c.throw(t))))),e}():function(){const e=r._`${g}.errors`;return c.assign(e,null),y(r.nil),e}();t.modifying&&a(e),w((()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,(()=>{n.assign(i.default.vErrors,r._`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`).assign(i.default.errors,r._`${i.default.vErrors}.length`),(0,s.extendErrors)(e)}),(()=>e.error()))}(e,n)))}})),e.ok(null!==(n=t.valid)&&void 0!==n?n:v)},n.validSchemaType=function(e,t,n=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e))},n.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}},{"../../vocabularies/code":42,"../codegen":2,"../errors":4,"../names":6}],17:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendSubschemaMode=n.extendSubschemaData=n.getSubschema=void 0;const r=e("../codegen"),i=e("../util");n.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,i.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},n.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==n){const{errorPath:s,dataPathArr:a,opts:l}=t;u(c.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${s}${(0,i.getErrorPath)(n,o,l.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...a,e.parentDataProperty]}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==s&&(u(s instanceof r.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},n.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},{"../codegen":2,"../util":10}],18:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var r=e("./compile/validate");Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:()=>r.KeywordCxt});var i=e("./compile/codegen");Object.defineProperty(n,"_",{enumerable:!0,get:()=>i._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>i.str}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>i.stringify}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>i.nil}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>i.Name}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:()=>i.CodeGen});const o=e("./runtime/validation_error"),s=e("./compile/ref_error"),a=e("./compile/rules"),l=e("./compile"),c=e("./compile/codegen"),u=e("./compile/resolve"),h=e("./compile/validate/dataType"),d=e("./compile/util"),f=e("./refs/data.json"),p=e("./runtime/uri"),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],v=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function b(e){var t,n,r,i,o,s,a,l,c,u,h,d,f,g,v,y,w,b,x,$,k,S,C,_,O;const E=e.strict,A=null===(t=e.code)||void 0===t?void 0:t.optimize,M=!0===A||void 0===A?1:A||0,P=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:m,T=null!==(i=e.uriResolver)&&void 0!==i?i:p.default;return{strictSchema:null===(s=null!==(o=e.strictSchema)&&void 0!==o?o:E)||void 0===s||s,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:E)||void 0===l||l,strictTypes:null!==(u=null!==(c=e.strictTypes)&&void 0!==c?c:E)&&void 0!==u?u:"log",strictTuples:null!==(d=null!==(h=e.strictTuples)&&void 0!==h?h:E)&&void 0!==d?d:"log",strictRequired:null!==(g=null!==(f=e.strictRequired)&&void 0!==f?f:E)&&void 0!==g&&g,code:e.code?{...e.code,optimize:M,regExp:P}:{optimize:M,regExp:P},loopRequired:null!==(v=e.loopRequired)&&void 0!==v?v:200,loopEnum:null!==(y=e.loopEnum)&&void 0!==y?y:200,meta:null===(w=e.meta)||void 0===w||w,messages:null===(b=e.messages)||void 0===b||b,inlineRefs:null===(x=e.inlineRefs)||void 0===x||x,schemaId:null!==($=e.schemaId)&&void 0!==$?$:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(S=e.validateSchema)||void 0===S||S,validateFormats:null===(C=e.validateFormats)||void 0===C||C,unicodeRegExp:null===(_=e.unicodeRegExp)||void 0===_||_,int32range:null===(O=e.int32range)||void 0===O||O,uriResolver:T}}class x{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...b(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:v,es5:t,lines:n}),this.logger=function(e){if(!1===e)return E;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),$.call(this,y,e,"NOT SUPPORTED"),$.call(this,w,e,"DEPRECATED","warn"),this._metaOpts=O.call(this),e.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&_.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),S.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=f;"id"===n&&(r={...f},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await i.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function i(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const n=await c.call(this,e);this.refs[e]||await i.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=k.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new l.SchemaEnv({schema:{},schemaId:n});if(t=l.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=k.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,u.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(M.call(this,n,t),!t)return(0,d.eachItem)(n,(e=>P.call(this,e))),this;j.call(this,t);const r={...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)};return(0,d.eachItem)(n,0===r.type.length?e=>P.call(this,e,r):e=>r.type.forEach((t=>P.call(this,e,r,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex((t=>t.keyword===e));t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map((e=>`${n}${e.instancePath} ${e.message}`)).reduce(((e,n)=>e+t+n)):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=i[e];r&&o&&(i[e]=I(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:s}=this.opts;if("object"==typeof e)o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;n=(0,u.normalizeId)(o||n);const c=u.getSchemaRefs.call(this,e,n);return a=new l.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:n,localRefs:c}),this._cache.set(a.schema,a),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=a),r&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,n,r="error"){for(const i in e){const o=i;o in t&&this.logger[r](`${n}: option ${i}. ${e[o]}`)}}function k(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function S(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function C(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function _(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function O(){const e={...this.opts};for(const t of g)delete e[t];return e}n.default=x,x.ValidationError=o.default,x.MissingRefError=s.default;const E={log(){},warn(){},error(){}},A=/^[a-z_$][a-z0-9_$:-]*$/i;function M(e,t){const{RULES:n}=this;if((0,d.eachItem)(e,(e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!A.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function P(e,t,n){var r;const i=null==t?void 0:t.post;if(n&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=i?o.post:o.rules.find((({type:e})=>e===n));if(s||(s={type:n,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,h.getJSONTypes)(t.type),schemaType:(0,h.getJSONTypes)(t.schemaType)}};t.before?T.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(r=t.implements)||void 0===r||r.forEach((e=>this.addKeyword(e)))}function T(e,t,n){const r=e.rules.findIndex((e=>e.keyword===n));r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function j(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=I(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function I(e){return{anyOf:[e,N]}}},{"./compile":5,"./compile/codegen":2,"./compile/ref_error":7,"./compile/resolve":8,"./compile/rules":9,"./compile/util":10,"./compile/validate":15,"./compile/validate/dataType":13,"./refs/data.json":19,"./runtime/uri":23,"./runtime/validation_error":24}],19:[function(e,t,n){t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],20:[function(e,t,n){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],21:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("fast-deep-equal");r.code='require("ajv/dist/runtime/equal").default',n.default=r},{"fast-deep-equal":63}],22:[function(e,t,n){function r(e){const t=e.length;let n,r=0,i=0;for(;i<t;)r++,n=e.charCodeAt(i++),n>=55296&&n<=56319&&i<t&&(n=e.charCodeAt(i),56320==(64512&n)&&i++);return r}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},{}],23:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("uri-js");r.code='require("ajv/dist/runtime/uri").default',n.default=r},{"uri-js":65}],24:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}n.default=r},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateAdditionalItems=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?s(e,r):(0,i.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:n,schema:o,data:s,keyword:a,it:l}=e;l.items=!0;const c=n.const("len",r._`${s}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(r._`${c} <= ${t.length}`);else if("object"==typeof o&&!(0,i.alwaysValidSchema)(l,o)){const o=n.var("valid",r._`${c} <= ${t.length}`);n.if((0,r.not)(o),(()=>function(o){n.forRange("i",t.length,c,(t=>{e.subschema({keyword:a,dataProp:t,dataPropType:i.Type.Num},o),l.allErrors||n.if((0,r.not)(o),(()=>n.break()))}))}(o))),e.ok(o)}}n.validateAdditionalItems=s,n.default=o},{"../../compile/codegen":2,"../../compile/util":10}],26:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/names"),s=e("../../compile/util");n.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>i._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:a,data:l,errsCount:c,it:u}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:h,opts:d}=u;if(u.props=!0,"all"!==d.removeAdditional&&(0,s.alwaysValidSchema)(u,n))return;const f=(0,r.allSchemaProperties)(a.properties),p=(0,r.allSchemaProperties)(a.patternProperties);function m(e){t.code(i._`delete ${l}[${e}]`)}function g(r){if("all"===d.removeAdditional||d.removeAdditional&&!1===n)m(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(h||t.break());if("object"==typeof n&&!(0,s.alwaysValidSchema)(u,n)){const n=t.name("valid");"failing"===d.removeAdditional?(v(r,n,!1),t.if((0,i.not)(n),(()=>{e.reset(),m(r)}))):(v(r,n),h||t.if((0,i.not)(n),(()=>t.break())))}}}function v(t,n,r){const i={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===r&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,n)}t.forIn("key",l,(n=>{f.length||p.length?t.if(function(n){let o;if(f.length>8){const e=(0,s.schemaRefOrVal)(u,a.properties,"properties");o=(0,r.isOwnProperty)(t,e,n)}else o=f.length?(0,i.or)(...f.map((e=>i._`${n} === ${e}`))):i.nil;return p.length&&(o=(0,i.or)(o,...p.map((t=>i._`${(0,r.usePattern)(e,t)}.test(${n})`)))),(0,i.not)(o)}(n),(()=>g(n))):g(n)})),e.ok(i._`${c} === ${o.default.errors}`)}}},{"../../compile/codegen":2,"../../compile/names":6,"../../compile/util":10,"../code":42}],27:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach(((t,n)=>{if((0,r.alwaysValidSchema)(i,t))return;const s=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(s)}))}}},{"../../compile/util":10}],28:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code");n.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r.validateUnion,error:{message:"must match a schema in anyOf"}}},{"../code":42}],29:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:s,it:a}=e;let l,c;const{minContains:u,maxContains:h}=o;a.opts.next?(l=void 0===u?1:u,c=h):l=1;const d=t.const("len",r._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,i.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,i.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,i.alwaysValidSchema)(a,n)){let t=r._`${d} >= ${l}`;return void 0!==c&&(t=r._`${t} && ${d} <= ${c}`),void e.pass(t)}a.items=!0;const f=t.name("valid");function p(){const e=t.name("_valid"),n=t.let("count",0);m(e,(()=>t.if(e,(()=>function(e){t.code(r._`${e}++`),void 0===c?t.if(r._`${e} >= ${l}`,(()=>t.assign(f,!0).break())):(t.if(r._`${e} > ${c}`,(()=>t.assign(f,!1).break())),1===l?t.assign(f,!0):t.if(r._`${e} >= ${l}`,(()=>t.assign(f,!0))))}(n)))))}function m(n,r){t.forRange("i",0,d,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:i.Type.Num,compositeRule:!0},n),r()}))}void 0===c&&1===l?m(f,(()=>t.if(f,(()=>t.break())))):0===l?(t.let(f,!0),void 0!==c&&t.if(r._`${s}.length > 0`,p)):(t.let(f,!1),p()),e.result(f,(()=>e.reset()))}}},{"../../compile/codegen":2,"../../compile/util":10}],30:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code");n.error={message:({params:{property:e,depsCount:t,deps:n}})=>r.str`must have ${1===t?"property":"properties"} ${n} when property ${e} is present`,params:({params:{property:e,depsCount:t,deps:n,missingProperty:i}})=>r._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${n}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);a(e,t),l(e,n)}};function a(e,t=e.schema){const{gen:n,data:i,it:s}=e;if(0===Object.keys(t).length)return;const a=n.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const u=(0,o.propertyInData)(n,i,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?n.if(u,(()=>{for(const t of c)(0,o.checkReportMissingProp)(e,t)})):(n.if(r._`${u} && (${(0,o.checkMissingProp)(e,c,a)})`),(0,o.reportMissingProp)(e,a),n.else())}}function l(e,t=e.schema){const{gen:n,data:r,keyword:s,it:a}=e,l=n.name("valid");for(const c in t)(0,i.alwaysValidSchema)(a,t[c])||(n.if((0,o.propertyInData)(n,r,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)}),(()=>n.var(l,!0))),e.ok(l))}n.validatePropertyDeps=a,n.validateSchemaDeps=l,n.default=s},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],31:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");function o(e,t){const n=e.schema[t];return void 0!==n&&!(0,i.alwaysValidSchema)(e,n)}n.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:s}=e;void 0===n.then&&void 0===n.else&&(0,i.checkStrictMode)(s,'"if" without "then" and "else" is ignored');const a=o(s,"then"),l=o(s,"else");if(!a&&!l)return;const c=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),a&&l){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,h("then",n),h("else",n))}else a?t.if(u,h("then")):t.if((0,r.not)(u),h("else"));function h(n,i){return()=>{const o=e.subschema({keyword:n},u);t.assign(c,u),e.mergeValidEvaluated(o,c),i?t.assign(i,r._`${n}`):e.setParams({ifClause:n})}}e.pass(c,(()=>e.error(!0)))}}},{"../../compile/codegen":2,"../../compile/util":10}],32:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./additionalItems"),i=e("./prefixItems"),o=e("./items"),s=e("./items2020"),a=e("./contains"),l=e("./dependencies"),c=e("./propertyNames"),u=e("./additionalProperties"),h=e("./properties"),d=e("./patternProperties"),f=e("./not"),p=e("./anyOf"),m=e("./oneOf"),g=e("./allOf"),v=e("./if"),y=e("./thenElse");n.default=function(e=!1){const t=[f.default,p.default,m.default,g.default,v.default,y.default,c.default,u.default,l.default,h.default,d.default];return e?t.push(i.default,s.default):t.push(r.default,o.default),t.push(a.default),t}},{"./additionalItems":25,"./additionalProperties":26,"./allOf":27,"./anyOf":28,"./contains":29,"./dependencies":30,"./if":31,"./items":33,"./items2020":34,"./not":35,"./oneOf":36,"./patternProperties":37,"./prefixItems":38,"./properties":39,"./propertyNames":40,"./thenElse":41}],33:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateTuple=void 0;const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code"),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return a(e,"additionalItems",t);n.items=!0,(0,i.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function a(e,t,n=e.schema){const{gen:o,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:r,errSchemaPath:o}=c,s=n.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);r.strictTuples&&!a&&(0,i.checkStrictMode)(c,`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`,r.strictTuples)}(s),c.opts.unevaluated&&n.length&&!0!==c.items&&(c.items=i.mergeEvaluated.items(o,n.length,c.items));const u=o.name("valid"),h=o.const("len",r._`${a}.length`);n.forEach(((t,n)=>{(0,i.alwaysValidSchema)(c,t)||(o.if(r._`${h} > ${n}`,(()=>e.subschema({keyword:l,schemaProp:n,dataProp:n},u))),e.ok(u))}))}n.validateTuple=a,n.default=s},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],34:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../code"),s=e("./additionalItems");n.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:a}=n;r.items=!0,(0,i.alwaysValidSchema)(r,t)||(a?(0,s.validateAdditionalItems)(e,a):e.ok((0,o.validateArray)(e)))}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42,"./additionalItems":25}],35:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:i}=e;if((0,r.alwaysValidSchema)(i,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,(()=>e.reset()),(()=>e.error()))},error:{message:"must NOT be valid"}}},{"../../compile/util":10}],36:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=n,l=t.let("valid",!1),c=t.let("passing",null),u=t.name("_valid");e.setParams({passing:c}),t.block((function(){a.forEach(((n,o)=>{let a;(0,i.alwaysValidSchema)(s,n)?t.var(u,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},u),o>0&&t.if(r._`${u} && ${l}`).assign(l,!1).assign(c,r._`[${c}, ${o}]`).else(),t.if(u,(()=>{t.assign(l,!0),t.assign(c,o),a&&e.mergeEvaluated(a,r.Name)}))}))})),e.result(l,(()=>e.reset()),(()=>e.error(!0)))}}},{"../../compile/codegen":2,"../../compile/util":10}],37:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/util"),s=e("../../compile/util");n.default={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:a,parentSchema:l,it:c}=e,{opts:u}=c,h=(0,r.allSchemaProperties)(n),d=h.filter((e=>(0,o.alwaysValidSchema)(c,n[e])));if(0===h.length||d.length===h.length&&(!c.opts.unevaluated||!0===c.props))return;const f=u.strictSchema&&!u.allowMatchingProperties&&l.properties,p=t.name("valid");!0===c.props||c.props instanceof i.Name||(c.props=(0,s.evaluatedPropsToName)(t,c.props));const{props:m}=c;function g(e){for(const t in f)new RegExp(e).test(t)&&(0,o.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function v(n){t.forIn("key",a,(o=>{t.if(i._`${(0,r.usePattern)(e,n)}.test(${o})`,(()=>{const r=d.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:s.Type.Str},p),c.opts.unevaluated&&!0!==m?t.assign(i._`${m}[${o}]`,!0):r||c.allErrors||t.if((0,i.not)(p),(()=>t.break()))}))}))}!function(){for(const e of h)f&&g(e),c.allErrors?v(e):(t.var(p,!0),v(e),t.if(p))}()}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],38:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./items");n.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")}},{"./items":33}],39:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/validate"),i=e("../code"),o=e("../../compile/util"),s=e("./additionalProperties");n.default={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new r.KeywordCxt(c,s.default,"additionalProperties"));const u=(0,i.allSchemaProperties)(n);for(const e of u)c.definedProperties.add(e);c.opts.unevaluated&&u.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(t,(0,o.toHash)(u),c.props));const h=u.filter((e=>!(0,o.alwaysValidSchema)(c,n[e])));if(0===h.length)return;const d=t.name("valid");for(const n of h)f(n)?p(n):(t.if((0,i.propertyInData)(t,l,n,c.opts.ownProperties)),p(n),c.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(d);function f(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==n[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}}},{"../../compile/util":10,"../../compile/validate":15,"../code":42,"./additionalProperties":26}],40:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util");n.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:s}=e;if((0,i.alwaysValidSchema)(s,n))return;const a=t.name("valid");t.forIn("key",o,(n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},a),t.if((0,r.not)(a),(()=>{e.error(!0),s.allErrors||t.break()}))})),e.ok(a)}}},{"../../compile/codegen":2,"../../compile/util":10}],41:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/util");n.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}}},{"../../compile/util":10}],42:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateUnion=n.validateArray=n.usePattern=n.callValidateCode=n.schemaProperties=n.allSchemaProperties=n.noPropertyInData=n.propertyInData=n.isOwnProperty=n.hasPropFunc=n.reportMissingProp=n.checkMissingProp=n.checkReportMissingProp=void 0;const r=e("../compile/codegen"),i=e("../compile/util"),o=e("../compile/names"),s=e("../compile/util");function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function l(e,t,n){return r._`${a(e)}.call(${t}, ${n})`}function c(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} === undefined`;return i?(0,r.or)(o,(0,r.not)(l(e,t,n))):o}function u(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}n.checkReportMissingProp=function(e,t){const{gen:n,data:i,it:o}=e;n.if(c(n,i,t,o.opts.ownProperties),(()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()}))},n.checkMissingProp=function({gen:e,data:t,it:{opts:n}},i,o){return(0,r.or)(...i.map((i=>(0,r.and)(c(e,t,i,n.ownProperties),r._`${o} = ${i}`))))},n.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},n.hasPropFunc=a,n.isOwnProperty=l,n.propertyInData=function(e,t,n,i){const o=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return i?r._`${o} && ${l(e,t,n)}`:o},n.noPropertyInData=c,n.allSchemaProperties=u,n.schemaProperties=function(e,t){return u(t).filter((n=>!(0,i.alwaysValidSchema)(e,t[n])))},n.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:i,schemaPath:s,errorPath:a},it:l},c,u,h){const d=h?r._`${e}, ${t}, ${i}${s}`:t,f=[[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&f.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=r._`${d}, ${n.object(...f)}`;return u!==r.nil?r._`${c}.call(${u}, ${p})`:r._`${c}(${p})`};const h=r._`new RegExp`;n.usePattern=function({gen:e,it:{opts:t}},n){const i=t.unicodeRegExp?"u":"",{regExp:o}=t.code,a=o(n,i);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:r._`${"new RegExp"===o.code?h:(0,s.useFunc)(e,o)}(${n}, ${i})`})},n.validateArray=function(e){const{gen:t,data:n,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l((()=>t.assign(e,!1))),e}return t.var(a,!0),l((()=>t.break())),a;function l(s){const l=t.const("len",r._`${n}.length`);t.forRange("i",0,l,(n=>{e.subschema({keyword:o,dataProp:n,dataPropType:i.Type.Num},a),t.if((0,r.not)(a),s)}))}},n.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some((e=>(0,i.alwaysValidSchema)(s,e)))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block((()=>n.forEach(((n,i)=>{const s=e.subschema({keyword:o,schemaProp:i,compositeRule:!0},l);t.assign(a,r._`${a} || ${l}`),e.mergeValidEvaluated(s,l)||t.if((0,r.not)(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},{"../compile/codegen":2,"../compile/names":6,"../compile/util":10}],43:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},{}],44:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./id"),i=e("./ref");n.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,i.default]},{"./id":43,"./ref":45}],45:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.callRef=n.getValidate=void 0;const r=e("../../compile/ref_error"),i=e("../code"),o=e("../../compile/codegen"),s=e("../../compile/names"),a=e("../../compile"),l=e("../../compile/util"),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:i}=e,{baseId:s,schemaEnv:l,validateName:c,opts:d,self:f}=i,{root:p}=l;if(("#"===n||"#/"===n)&&s===p.baseId)return function(){if(l===p)return h(e,c,l,l.$async);const n=t.scopeValue("root",{ref:p});return h(e,o._`${n}.validate`,p,p.$async)}();const m=a.resolveRef.call(f,p,s,n);if(void 0===m)throw new r.default(i.opts.uriResolver,s,n);return m instanceof a.SchemaEnv?function(t){const n=u(e,t);h(e,n,t,t.$async)}(m):function(r){const i=t.scopeValue("schema",!0===d.code.source?{ref:r,code:(0,o.stringify)(r)}:{ref:r}),s=t.name("valid"),a=e.subschema({schema:r,dataTypes:[],schemaPath:o.nil,topSchemaRef:i,errSchemaPath:n},s);e.mergeEvaluated(a),e.ok(s)}(m)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,n,r){const{gen:a,it:c}=e,{allErrors:u,schemaEnv:h,opts:d}=c,f=d.passContext?s.default.this:o.nil;function p(e){const t=o._`${e}.errors`;a.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,o._`${s.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(r&&!r.dynamicProps)void 0!==r.props&&(c.props=l.mergeEvaluated.props(a,r.props,c.props));else{const t=a.var("props",o._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,o.Name)}if(!0!==c.items)if(r&&!r.dynamicItems)void 0!==r.items&&(c.items=l.mergeEvaluated.items(a,r.items,c.items));else{const t=a.var("items",o._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,o.Name)}}r?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const n=a.let("valid");a.try((()=>{a.code(o._`await ${(0,i.callValidateCode)(e,t,f)}`),m(t),u||a.assign(n,!0)}),(e=>{a.if(o._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),p(e),u||a.assign(n,!1)})),e.ok(n)}():e.result((0,i.callValidateCode)(e,t,f),(()=>m(t)),(()=>p(t)))}n.getValidate=u,n.callRef=h,n.default=c},{"../../compile":5,"../../compile/codegen":2,"../../compile/names":6,"../../compile/ref_error":7,"../../compile/util":10,"../code":42}],46:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../discriminator/types"),o=e("../../compile"),s=e("../../compile/util");n.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===i.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:a,parentSchema:l,it:c}=e,{oneOf:u}=l;if(!c.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=a.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const d=t.let("valid",!1),f=t.const("tag",r._`${n}${(0,r.getProperty)(h)}`);function p(n){const i=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},i);return e.mergeEvaluated(o,r.Name),i}t.if(r._`typeof ${f} == "string"`,(()=>function(){const n=function(){var e;const t={},n=i(l);let r=!0;for(let t=0;t<u.length;t++){let l=u[t];(null==l?void 0:l.$ref)&&!(0,s.schemaHasRulesButRef)(l,c.self.RULES)&&(l=o.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,null==l?void 0:l.$ref),l instanceof o.SchemaEnv&&(l=l.schema));const d=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);r=r&&(n||i(l)),a(d,t)}if(!r)throw new Error(`discriminator: "${h}" must be required`);return t;function i({required:e}){return Array.isArray(e)&&e.includes(h)}function a(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const n of e.enum)d(n,t)}}function d(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${f} === ${e}`),t.assign(d,p(n[e]));t.else(),e.error(!1,{discrError:i.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}()),(()=>e.error(!1,{discrError:i.DiscrError.Tag,tag:f,tagName:h}))),e.ok(d)}}},{"../../compile":5,"../../compile/codegen":2,"../../compile/util":10,"../discriminator/types":47}],47:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n.DiscrError||(n.DiscrError={}))},{}],48:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./core"),i=e("./validation"),o=e("./applicator"),s=e("./format"),a=e("./metadata"),l=[r.default,i.default,(0,o.default)(),s.default,a.metadataVocabulary,a.contentVocabulary];n.default=l},{"./applicator":32,"./core":44,"./format":50,"./metadata":51,"./validation":54}],49:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:i,$data:o,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:u,schemaEnv:h,self:d}=l;c.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:d.formats,code:c.code.formats}),s=n.const("fDef",r._`${o}[${a}]`),l=n.let("fType"),u=n.let("format");n.if(r._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,(()=>n.assign(l,r._`${s}.type || "string"`).assign(u,r._`${s}.validate`)),(()=>n.assign(l,r._`"string"`).assign(u,s))),e.fail$data((0,r.or)(!1===c.strictSchema?r.nil:r._`${a} && !${u}`,function(){const e=h.$async?r._`(${s}.async ? await ${u}(${i}) : ${u}(${i}))`:r._`${u}(${i})`,n=r._`(typeof ${u} == "function" ? ${e} : ${u}.test(${i}))`;return r._`${u} && ${u} !== true && ${l} === ${t} && !${n}`}()))}():function(){const o=d.formats[s];if(!o)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${u}"`}d.logger.warn(e())}();if(!0===o)return;const[a,l,f]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):c.code.formats?r._`${c.code.formats}${(0,r.getProperty)(s)}`:void 0,i=n.scopeValue("formats",{key:s,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,i]:[e.type||"string",e.validate,r._`${i}.validate`]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!h.$async)throw new Error("async format in sync schema");return r._`await ${f}(${i})`}return"function"==typeof l?r._`${f}(${i})`:r._`${f}.test(${i})`}())}())}}},{"../../compile/codegen":2}],50:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./format");n.default=[r.default]},{"./format":49}],51:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.contentVocabulary=n.metadataVocabulary=void 0,n.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],n.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],52:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/equal");n.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:s,schemaCode:a,schema:l}=e;s||l&&"object"==typeof l?e.fail$data(r._`!${(0,i.useFunc)(t,o.default)}(${n}, ${a})`):e.fail(r._`${l} !== ${n}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],53:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/equal");n.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");let u;const h=()=>null!=u?u:u=(0,i.useFunc)(t,o.default);let d;if(a.length>=c.opts.loopEnum||s)d=t.let("valid"),e.block$data(d,(function(){t.assign(d,!1),t.forOf("v",l,(e=>t.if(r._`${h()}(${n}, ${e})`,(()=>t.assign(d,!0).break()))))}));else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);d=(0,r.or)(...a.map(((t,i)=>function(e,t){const i=a[t];return"object"==typeof i&&null!==i?r._`${h()}(${n}, ${e}[${t}])`:r._`${n} === ${i}`}(e,i))))}e.pass(d)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],54:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./limitNumber"),i=e("./multipleOf"),o=e("./limitLength"),s=e("./pattern"),a=e("./limitProperties"),l=e("./required"),c=e("./limitItems"),u=e("./uniqueItems"),h=e("./const"),d=e("./enum");n.default=[r.default,i.default,o.default,s.default,a.default,l.default,c.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,d.default]},{"./const":52,"./enum":53,"./limitItems":55,"./limitLength":56,"./limitNumber":57,"./limitProperties":58,"./multipleOf":59,"./pattern":60,"./required":61,"./uniqueItems":62}],55:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`${n}.length ${"maxItems"===t?r.operators.GT:r.operators.LT} ${i}`)}}},{"../../compile/codegen":2}],56:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=e("../../compile/util"),o=e("../../runtime/ucs2length");n.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s,it:a}=e,l="maxLength"===t?r.operators.GT:r.operators.LT,c=!1===a.opts.unicode?r._`${n}.length`:r._`${(0,i.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(r._`${c} ${l} ${s}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/ucs2length":22}],57:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen"),i=r.operators,o={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},s={message:({keyword:e,schemaCode:t})=>r.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`${n} ${o[t].fail} ${i} || isNaN(${n})`)}};n.default=a},{"../../compile/codegen":2}],58:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>r.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:i}=e;e.fail$data(r._`Object.keys(${n}).length ${"maxProperties"===t?r.operators.GT:r.operators.LT} ${i}`)}}},{"../../compile/codegen":2}],59:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/codegen");n.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:i,it:o}=e,s=o.opts.multipleOfPrecision,a=t.let("res"),l=s?r._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:r._`${a} !== parseInt(${a})`;e.fail$data(r._`(${i} === 0 || (${a} = ${n}/${i}, ${l}))`)}}},{"../../compile/codegen":2}],60:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen");n.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match pattern "${e}"`,params:({schemaCode:e})=>i._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:s,it:a}=e,l=n?i._`(new RegExp(${s}, ${a.opts.unicodeRegExp?"u":""}))`:(0,r.usePattern)(e,o);e.fail$data(i._`!${l}.test(${t})`)}}},{"../../compile/codegen":2,"../code":42}],61:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../code"),i=e("../../compile/codegen"),o=e("../../compile/util");n.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>i.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>i._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:s,data:a,$data:l,it:c}=e,{opts:u}=c;if(!l&&0===n.length)return;const h=n.length>=u.loopRequired;if(c.allErrors?function(){if(h||l)e.block$data(i.nil,d);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(h||l){const n=t.let("valid",!0);e.block$data(n,(()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,s,(()=>{t.assign(o,(0,r.propertyInData)(t,a,n,u.ownProperties)),t.if((0,i.not)(o),(()=>{e.error(),t.break()}))}),i.nil)}(o,n))),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,o)),(0,r.reportMissingProp)(e,o),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)void 0!==(null==t?void 0:t[e])||r.has(e)||(0,o.checkStrictMode)(c,`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`,c.opts.strictRequired)}function d(){t.forOf("prop",s,(n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,a,n,u.ownProperties),(()=>e.error()))}))}}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],62:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../compile/validate/dataType"),i=e("../../compile/codegen"),o=e("../../compile/util"),s=e("../../runtime/equal");n.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>i.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>i._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:a,schema:l,parentSchema:c,schemaCode:u,it:h}=e;if(!a&&!l)return;const d=t.let("valid"),f=c.items?(0,r.getSchemaTypes)(c.items):[];function p(o,s){const a=t.name("item"),l=(0,r.checkDataTypes)(f,a,h.opts.strictNumbers,r.DataType.Wrong),c=t.const("indices",i._`{}`);t.for(i._`;${o}--;`,(()=>{t.let(a,i._`${n}[${o}]`),t.if(l,i._`continue`),f.length>1&&t.if(i._`typeof ${a} == "string"`,i._`${a} += "_"`),t.if(i._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(s,i._`${c}[${a}]`),e.error(),t.assign(d,!1).break()})).code(i._`${c}[${a}] = ${o}`)}))}function m(r,a){const l=(0,o.useFunc)(t,s.default),c=t.name("outer");t.label(c).for(i._`;${r}--;`,(()=>t.for(i._`${a} = ${r}; ${a}--;`,(()=>t.if(i._`${l}(${n}[${r}], ${n}[${a}])`,(()=>{e.error(),t.assign(d,!1).break(c)}))))))}e.block$data(d,(function(){const r=t.let("i",i._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(d,!0),t.if(i._`${r} > 1`,(()=>(f.length>0&&!f.some((e=>"object"===e||"array"===e))?p:m)(r,o)))}),i._`${u} === false`),e.ok(d)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../compile/validate/dataType":13,"../../runtime/equal":21}],63:[function(e,t,n){t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},{}],64:[function(e,t,n){var r=t.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),i(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function i(e,t,n,o,s,a,l,c,u,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var d in t(o,s,a,l,c,u,h),o){var f=o[d];if(Array.isArray(f)){if(d in r.arrayKeywords)for(var p=0;p<f.length;p++)i(e,t,n,f[p],s+"/"+d+"/"+p,a,s,d,o,p)}else if(d in r.propsKeywords){if(f&&"object"==typeof f)for(var m in f)i(e,t,n,f[m],s+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,d,o,m)}else(d in r.keywords||e.allKeys&&!(d in r.skipKeywords))&&i(e,t,n,f,s+"/"+d,a,s,d,o)}n(o,s,a,l,c,u,h)}}r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],65:[function(e,t,n){
/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e,r){r("object"==typeof n&&void 0!==t?n:e.URI=e.URI||{})}(this,(function(e){function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r="[A-Za-z]",i="[0-9]",o=t(i,"[A-Fa-f]"),s=n(n("%[EFef]"+o+"%"+o+o+"%"+o+o)+"|"+n("%[89A-Fa-f]"+o+"%"+o+o)+"|"+n("%"+o+o)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",l=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",u=t(r,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");n(r+t(r,i,"[\\+\\-\\.]")+"*"),n(n(s+"|"+t(u,a,"[\\:]"))+"*");var h=n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?"+i),d=n(h+"\\."+h+"\\."+h+"\\."+h),f=n(o+"{1,4}"),p=n(n(f+"\\:"+f)+"|"+d),m=n(n(f+"\\:")+"{6}"+p),g=n("\\:\\:"+n(f+"\\:")+"{5}"+p),v=n(n(f)+"?\\:\\:"+n(f+"\\:")+"{4}"+p),y=n(n(n(f+"\\:")+"{0,1}"+f)+"?\\:\\:"+n(f+"\\:")+"{3}"+p),w=n(n(n(f+"\\:")+"{0,2}"+f)+"?\\:\\:"+n(f+"\\:")+"{2}"+p),b=n(n(n(f+"\\:")+"{0,3}"+f)+"?\\:\\:"+f+"\\:"+p),x=n(n(n(f+"\\:")+"{0,4}"+f)+"?\\:\\:"+p),$=n(n(n(f+"\\:")+"{0,5}"+f)+"?\\:\\:"+f),k=n(n(n(f+"\\:")+"{0,6}"+f)+"?\\:\\:"),S=n([m,g,v,y,w,b,x,$,k].join("|")),C=n(n(u+"|"+s)+"+");n("[vV]"+o+"+\\."+t(u,a,"[\\:]")+"+"),n(n(s+"|"+t(u,a))+"*");var _=n(s+"|"+t(u,a,"[\\:\\@]"));return n(n(s+"|"+t(u,a,"[\\@]"))+"+"),n(n(_+"|"+t("[\\/\\?]",c))+"*"),{NOT_SCHEME:new RegExp(t("[^]",r,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",u,l),"g"),PCT_ENCODED:new RegExp(s,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+o+"{2})")+"("+C+")")+"?\\]?$")}}var s=o(!1),a=o(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,u=36,h=/^xn--/,d=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function y(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var i=function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(f,".")).split("."),t).join(".");return r+i}function w(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},x=function(e,t,n){var r=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;r+=u)e=m(e/35);return m(r+36*e/(e+38))},$=function(e){var t,n=[],r=e.length,i=0,o=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var l=0;l<a;++l)e.charCodeAt(l)>=128&&v("not-basic"),n.push(e.charCodeAt(l));for(var h=a>0?a+1:0;h<r;){for(var d=i,f=1,p=u;;p+=u){h>=r&&v("invalid-input");var g=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:u;(g>=u||g>m((c-i)/f))&&v("overflow"),i+=g*f;var y=p<=s?1:p>=s+26?26:p-s;if(g<y)break;var w=u-y;f>m(c/w)&&v("overflow"),f*=w}var b=n.length+1;s=x(i-d,b,0==d),m(i/b)>c-o&&v("overflow"),o+=m(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},k=function(e){var t=[],n=(e=w(e)).length,r=128,i=0,o=72,s=!0,a=!1,l=void 0;try{for(var h,d=e[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var f=h.value;f<128&&t.push(g(f))}}catch(e){a=!0,l=e}finally{try{!s&&d.return&&d.return()}finally{if(a)throw l}}var p=t.length,y=p;for(p&&t.push("-");y<n;){var $=c,k=!0,S=!1,C=void 0;try{for(var _,O=e[Symbol.iterator]();!(k=(_=O.next()).done);k=!0){var E=_.value;E>=r&&E<$&&($=E)}}catch(e){S=!0,C=e}finally{try{!k&&O.return&&O.return()}finally{if(S)throw C}}var A=y+1;$-r>m((c-i)/A)&&v("overflow"),i+=($-r)*A,r=$;var M=!0,P=!1,T=void 0;try{for(var j,N=e[Symbol.iterator]();!(M=(j=N.next()).done);M=!0){var I=j.value;if(I<r&&++i>c&&v("overflow"),I==r){for(var R=i,D=u;;D+=u){var L=D<=o?1:D>=o+26?26:D-o;if(R<L)break;var z=R-L,B=u-L;t.push(g(b(L+z%B,0))),R=m(z/B)}t.push(g(b(R,0))),o=x(i,A,y==p),i=0,++y}}}catch(e){P=!0,T=e}finally{try{!M&&N.return&&N.return()}finally{if(P)throw T}}++i,++r}return t.join("")},S=function(e){return y(e,(function(e){return d.test(e)?"xn--"+k(e):e}))},C=function(e){return y(e,(function(e){return h.test(e)?$(e.slice(4).toLowerCase()):e}))},_={};function O(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function E(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var s=parseInt(e.substr(n+4,2),16),a=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function A(e,t){function n(e){var n=E(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,O).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,O).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,O).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,O).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,O).replace(t.PCT_ENCODED,i)),e}function M(e){return e.replace(/^0*(.*)/,"$1")||"0"}function P(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=l(n,2)[1];return r?r.split(".").map(M).join("."):e}function T(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=l(n,3),i=r[1],o=r[2];if(i){for(var s=i.toLowerCase().split("::").reverse(),a=l(s,2),c=a[0],u=a[1],h=u?u.split(":").map(M):[],d=c.split(":").map(M),f=t.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,m=d.length-p,g=Array(p),v=0;v<p;++v)g[v]=h[v]||d[m+v]||"";f&&(g[p-1]=P(g[p-1],t));var y=g.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],w=void 0;if(y&&y.length>1){var b=g.slice(0,y.index),x=g.slice(y.index+y.length);w=b.join(":")+"::"+x.join(":")}else w=g.join(":");return o&&(w+="%"+o),w}return e}var j=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,N=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?a:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(j);if(i){N?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=T(P(n.host,r),r)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=_[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)A(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=S(n.host.replace(r.PCT_ENCODED,E).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}A(n,s)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function R(e,t){var n=!1!==t.iri?a:s,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(T(P(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var D=/^\.\.?\//,L=/^\/\.(\/|$)/,z=/^\/\.\.(\/|$)/,B=/^\/?(?:.|\n)*?(?=\/|$)/;function V(e){for(var t=[];e.length;)if(e.match(D))e=e.replace(D,"");else if(e.match(L))e=e.replace(L,"/");else if(e.match(z))e=e.replace(z,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(B);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?a:s,r=[],i=_[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?C(e.host):S(e.host.replace(n.PCT_ENCODED,E).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}A(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=R(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var l=e.path;t.absolutePath||i&&i.absolutePath||(l=V(l)),void 0===o&&(l=l.replace(/^\/\//,"/%2F")),r.push(l)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(e=I(F(e,n),n),t=I(F(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(r.scheme=t.scheme,r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=V(t.path||""),r.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(r.userinfo=t.userinfo,r.host=t.host,r.port=t.port,r.path=V(t.path||""),r.query=t.query):(t.path?("/"===t.path.charAt(0)?r.path=V(t.path):(r.path=void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:t.path:"/"+t.path,r.path=V(r.path)),r.query=t.query):(r.path=e.path,r.query=void 0!==t.query?t.query:e.query),r.userinfo=e.userinfo,r.host=e.host,r.port=e.port),r.scheme=e.scheme),r.fragment=t.fragment,r}function H(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:s.PCT_ENCODED,E)}var W={scheme:"http",domainHost:!0,parse:(e,t)=>(e.host||(e.error=e.error||"HTTP URIs must have a host."),e),serialize(e,t){var n="https"===String(e.scheme).toLowerCase();return e.port!==(n?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},U={scheme:"https",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize};function J(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var K={scheme:"ws",domainHost:!0,parse(e,t){var n=e;return n.secure=J(n),n.resourceName=(n.path||"/")+(n.query?"?"+n.query:""),n.path=void 0,n.query=void 0,n},serialize(e,t){if(e.port!==(J(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var n=e.resourceName.split("?"),r=l(n,2),i=r[0],o=r[1];e.path=i&&"/"!==i?i:void 0,e.query=o,e.resourceName=void 0}return e.fragment=void 0,e}},G={scheme:"wss",domainHost:K.domainHost,parse:K.parse,serialize:K.serialize},Q={},X="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",Z=n(n("%[EFef][0-9A-Fa-f]%"+Y+Y+"%"+Y+Y)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+Y+Y)+"|"+n("%"+Y+Y)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(X,"g"),ne=new RegExp(Z,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ie=new RegExp(t("[^]",X,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ie;function se(e){var t=E(e);return t.match(te)?t:e}var ae={scheme:"mailto",parse(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},s=n.query.split("&"),a=0,l=s.length;a<l;++a){var c=s[a].split("=");switch(c[0]){case"to":for(var u=c[1].split(","),h=0,d=u.length;h<d;++h)r.push(u[h]);break;case"subject":n.subject=H(c[1],t);break;case"body":n.body=H(c[1],t);break;default:i=!0,o[H(c[0],t)]=H(c[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var f=0,p=r.length;f<p;++f){var m=r[f].split("@");if(m[0]=H(m[0]),t.unicodeSupport)m[1]=H(m[1],t).toLowerCase();else try{m[1]=S(H(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[f]=m.join("@")}return n},serialize(e,t){var n,r=e,o=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var s=0,a=o.length;s<a;++s){var l=String(o[s]),c=l.lastIndexOf("@"),u=l.slice(0,c).replace(ne,se).replace(ne,i).replace(re,O),h=l.slice(c+1);try{h=t.iri?C(h):S(H(h,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[s]=u+"@"+h}r.path=o.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var p in d)d[p]!==Q[p]&&f.push(p.replace(ne,se).replace(ne,i).replace(ie,O)+"="+d[p].replace(ne,se).replace(ne,i).replace(oe,O));return f.length&&(r.query=f.join("&")),r}},le=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse(e,t){var n=e.path&&e.path.match(le),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),s=n[2],a=_[i+":"+(t.nid||o)];r.nid=o,r.nss=s,r.path=void 0,a&&(r=a.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize(e,t){var n=e.nid,r=_[(t.scheme||e.scheme||"urn")+":"+(t.nid||n)];r&&(e=r.serialize(e,t));var i=e;return i.path=(n||t.nid)+":"+e.nss,i}},ue=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ue)||(n.error=n.error||"UUID is not valid."),n},serialize(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};_[W.scheme]=W,_[U.scheme]=U,_[K.scheme]=K,_[G.scheme]=G,_[ae.scheme]=ae,_[ce.scheme]=ce,_[he.scheme]=he,e.SCHEMES=_,e.pctEncChar=O,e.pctDecChars=E,e.parse=I,e.removeDotSegments=V,e.serialize=F,e.resolveComponents=q,e.resolve=function(e,t,n){var r=function(e,t){var n={scheme:"null"};if(t)for(var r in t)n[r]=t[r];return n}(0,n);return F(q(I(e,r),I(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=F(I(e,t),t):"object"===r(e)&&(e=I(F(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=F(I(e,n),n):"object"===r(e)&&(e=F(e,n)),"string"==typeof t?t=F(I(t,n),n):"object"===r(t)&&(t=F(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:s.ESCAPE,O)},e.unescapeComponent=H,Object.defineProperty(e,"__esModule",{value:!0})}))},{}],ajv:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;const r=e("./core"),i=e("./vocabularies/draft7"),o=e("./vocabularies/discriminator"),s=e("./refs/json-schema-draft-07.json"),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),i.default.forEach((e=>this.addVocabulary(e))),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.exports=n=c,Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var u=e("./compile/validate");Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:()=>u.KeywordCxt});var h=e("./compile/codegen");Object.defineProperty(n,"_",{enumerable:!0,get:()=>h._}),Object.defineProperty(n,"str",{enumerable:!0,get:()=>h.str}),Object.defineProperty(n,"stringify",{enumerable:!0,get:()=>h.stringify}),Object.defineProperty(n,"nil",{enumerable:!0,get:()=>h.nil}),Object.defineProperty(n,"Name",{enumerable:!0,get:()=>h.Name}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:()=>h.CodeGen})},{"./compile/codegen":2,"./compile/validate":15,"./core":18,"./refs/json-schema-draft-07.json":20,"./vocabularies/discriminator":46,"./vocabularies/draft7":48}]},{},[])("ajv")})),Tn((function(e,t){!function(e){function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,i){if(e===i)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(i))return!1;if(!0===t(e)){if(e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(!1===r(e[o],i[o]))return!1;return!0}if(!0===n(e)){var s={};for(var a in e)if(hasOwnProperty.call(e,a)){if(!1===r(e[a],i[a]))return!1;s[a]=!0}for(var l in i)if(hasOwnProperty.call(i,l)&&!0!==s[l])return!1;return!0}return!1}function i(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(n(e)){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}return!1}var o;o="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var s=0,a=2,l={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},c="EOF",u="UnquotedIdentifier",h="QuotedIdentifier",d="Rbracket",f="Rparen",p="Comma",m="Colon",g="Rbrace",v="Number",y="Current",w="Expref",b="Pipe",x="Or",$="And",k="EQ",S="GT",C="LT",_="GTE",O="LTE",E="NE",A="Flatten",M="Star",P="Filter",T="Dot",j="Not",N="Lbrace",I="Lbracket",R="Lparen",D="Literal",L={".":T,"*":M,",":p,":":m,"{":N,"}":g,"]":d,"(":R,")":f,"@":y},z={"<":!0,">":!0,"=":!0,"!":!0},B={" ":!0,"\t":!0,"\n":!0};function V(e){return e>="0"&&e<="9"||"-"===e}function F(){}F.prototype={tokenize:function(e){var t,n,r,i,o=[];for(this._current=0;this._current<e.length;)if((i=e[this._current])>="a"&&i<="z"||i>="A"&&i<="Z"||"_"===i)t=this._current,n=this._consumeUnquotedIdentifier(e),o.push({type:u,value:n,start:t});else if(void 0!==L[e[this._current]])o.push({type:L[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(V(e[this._current]))r=this._consumeNumber(e),o.push(r);else if("["===e[this._current])r=this._consumeLBracket(e),o.push(r);else if('"'===e[this._current])t=this._current,n=this._consumeQuotedIdentifier(e),o.push({type:h,value:n,start:t});else if("'"===e[this._current])t=this._current,n=this._consumeRawStringLiteral(e),o.push({type:D,value:n,start:t});else if("`"===e[this._current]){t=this._current;var s=this._consumeLiteral(e);o.push({type:D,value:s,start:t})}else if(void 0!==z[e[this._current]])o.push(this._consumeOperator(e));else if(void 0!==B[e[this._current]])this._current++;else if("&"===e[this._current])t=this._current,this._current++,"&"===e[this._current]?(this._current++,o.push({type:$,value:"&&",start:t})):o.push({type:w,value:"&",start:t});else{if("|"!==e[this._current]){var a=new Error("Unknown character:"+e[this._current]);throw a.name="LexerError",a}t=this._current,this._current++,"|"===e[this._current]?(this._current++,o.push({type:x,value:"||",start:t})):o.push({type:b,value:"|",start:t})}return o},_consumeUnquotedIdentifier:function(e){var t,n=this._current;for(this._current++;this._current<e.length&&((t=e[this._current])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t);)this._current++;return e.slice(n,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var n=e.length;'"'!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&'"'!==e[r+1]?r++:r+=2,this._current=r}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var n=e.length;"'"!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&"'"!==e[r+1]?r++:r+=2,this._current=r}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var n=e.length;V(e[this._current])&&this._current<n;)this._current++;var r=parseInt(e.slice(t,this._current));return{type:v,value:r,start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:P,value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:A,value:"[]",start:t}):{type:I,value:"[",start:t}},_consumeOperator:function(e){var t=this._current,n=e[t];return this._current++,"!"===n?"="===e[this._current]?(this._current++,{type:E,value:"!=",start:t}):{type:j,value:"!",start:t}:"<"===n?"="===e[this._current]?(this._current++,{type:O,value:"<=",start:t}):{type:C,value:"<",start:t}:">"===n?"="===e[this._current]?(this._current++,{type:_,value:">=",start:t}):{type:S,value:">",start:t}:"="===n&&"="===e[this._current]?(this._current++,{type:k,value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,n=this._current,r=e.length;"`"!==e[this._current]&&this._current<r;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var s=o(e.slice(n,this._current));return s=s.replace("\\`","`"),t=this._looksLikeJSON(s)?JSON.parse(s):JSON.parse('"'+s+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if('[{"'.indexOf(e[0])>=0)return!0;if(["true","false","null"].indexOf(e)>=0)return!0;if(!("-0123456789".indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var q={};function H(){}function W(e){this.runtime=e}function U(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[s]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[s]}]},contains:{_func:this._functionContains,_signature:[{types:[a,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[a]},{types:[a]}]},floor:{_func:this._functionFloor,_signature:[{types:[s]}]},length:{_func:this._functionLength,_signature:[{types:[a,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[a]},{types:[a]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[a]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[a,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}q.EOF=0,q.UnquotedIdentifier=0,q.QuotedIdentifier=0,q.Rbracket=0,q.Rparen=0,q.Comma=0,q.Rbrace=0,q.Number=0,q.Current=0,q.Expref=0,q.Pipe=1,q.Or=2,q.And=3,q.EQ=5,q.GT=5,q.LT=5,q.GTE=5,q.LTE=5,q.NE=5,q.Flatten=9,q.Star=20,q.Filter=21,q.Dot=40,q.Not=45,q.Lbrace=50,q.Lbracket=55,q.Lparen=60,H.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if(this._lookahead(0)!==c){var n=this._lookaheadToken(0),r=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw r.name="ParserError",r}return t},_loadTokens:function(e){var t=(new F).tokenize(e);t.push({type:c,value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var n=this.nud(t),r=this._lookahead(0);e<q[r];)this._advance(),n=this.led(r,n),r=this._lookahead(0);return n},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,n;switch(e.type){case D:return{type:"Literal",value:e.value};case u:return{type:"Field",name:e.value};case h:var r={type:"Field",name:e.value};if(this._lookahead(0)===R)throw new Error("Quoted identifier not allowed for function names.");return r;case j:return{type:"NotExpression",children:[t=this.expression(q.Not)]};case M:return t=null,{type:"ValueProjection",children:[{type:"Identity"},t=this._lookahead(0)===d?{type:"Identity"}:this._parseProjectionRHS(q.Star)]};case P:return this.led(e.type,{type:"Identity"});case N:return this._parseMultiselectHash();case A:return{type:"Projection",children:[{type:A,children:[{type:"Identity"}]},t=this._parseProjectionRHS(q.Flatten)]};case I:return this._lookahead(0)===v||this._lookahead(0)===m?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):this._lookahead(0)===M&&this._lookahead(1)===d?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(q.Star)]}):this._parseMultiselectList();case y:return{type:y};case w:return{type:"ExpressionReference",children:[n=this.expression(q.Expref)]};case R:for(var i=[];this._lookahead(0)!==f;)this._lookahead(0)===y?(n={type:y},this._advance()):n=this.expression(0),i.push(n);return this._match(f),i[0];default:this._errorToken(e)}},led:function(e,t){var n;switch(e){case T:var r=q.Dot;return this._lookahead(0)!==M?{type:"Subexpression",children:[t,n=this._parseDotRHS(r)]}:(this._advance(),{type:"ValueProjection",children:[t,n=this._parseProjectionRHS(r)]});case b:return n=this.expression(q.Pipe),{type:b,children:[t,n]};case x:return{type:"OrExpression",children:[t,n=this.expression(q.Or)]};case $:return{type:"AndExpression",children:[t,n=this.expression(q.And)]};case R:for(var i,o=t.name,s=[];this._lookahead(0)!==f;)this._lookahead(0)===y?(i={type:y},this._advance()):i=this.expression(0),this._lookahead(0)===p&&this._match(p),s.push(i);return this._match(f),{type:"Function",name:o,children:s};case P:var a=this.expression(0);return this._match(d),{type:"FilterProjection",children:[t,n=this._lookahead(0)===A?{type:"Identity"}:this._parseProjectionRHS(q.Filter),a]};case A:return{type:"Projection",children:[{type:A,children:[t]},this._parseProjectionRHS(q.Flatten)]};case k:case E:case S:case _:case C:case O:return this._parseComparator(t,e);case I:var l=this._lookaheadToken(0);return l.type===v||l.type===m?(n=this._parseIndexExpression(),this._projectIfSlice(t,n)):(this._match(M),this._match(d),{type:"Projection",children:[t,n=this._parseProjectionRHS(q.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),n=new Error("Expected "+e+", got: "+t.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if(this._lookahead(0)===m||this._lookahead(1)===m)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(d),e},_projectIfSlice:function(e,t){var n={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[n,this._parseProjectionRHS(q.Star)]}:n},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,n=this._lookahead(0);n!==d&&t<3;){if(n===m)t++,this._advance();else{if(n!==v){var r=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+r.value+"("+r.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(d),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(q[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return[u,h,M].indexOf(t)>=0?this.expression(e):t===I?(this._match(I),this._parseMultiselectList()):t===N?(this._match(N),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(q[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===I)t=this.expression(e);else if(this._lookahead(0)===P)t=this.expression(e);else{if(this._lookahead(0)!==T){var n=this._lookaheadToken(0),r=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw r.name="ParserError",r}this._match(T),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];this._lookahead(0)!==d;){var t=this.expression(0);if(e.push(t),this._lookahead(0)===p&&(this._match(p),this._lookahead(0)===d))throw new Error("Unexpected token Rbracket")}return this._match(d),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,n,r=[],i=[u,h];;){if(e=this._lookaheadToken(0),i.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match(m),n={type:"KeyValuePair",name:t,value:this.expression(0)},r.push(n),this._lookahead(0)===p)this._match(p);else if(this._lookahead(0)===g){this._match(g);break}}return{type:"MultiSelectHash",children:r}}},W.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,o){var s,a,l,c,u,h,d,f,p;switch(e.type){case"Field":return null!==o&&n(o)?void 0===(h=o[e.name])?null:h:null;case"Subexpression":for(l=this.visit(e.children[0],o),p=1;p<e.children.length;p++)if(null===(l=this.visit(e.children[1],l)))return null;return l;case"IndexExpression":return d=this.visit(e.children[0],o),this.visit(e.children[1],d);case"Index":if(!t(o))return null;var m=e.value;return m<0&&(m=o.length+m),void 0===(l=o[m])&&(l=null),l;case"Slice":if(!t(o))return null;var g=e.children.slice(0),v=this.computeSliceParams(o.length,g),x=v[0],$=v[1],M=v[2];if(l=[],M>0)for(p=x;p<$;p+=M)l.push(o[p]);else for(p=x;p>$;p+=M)l.push(o[p]);return l;case"Projection":var P=this.visit(e.children[0],o);if(!t(P))return null;for(f=[],p=0;p<P.length;p++)null!==(a=this.visit(e.children[1],P[p]))&&f.push(a);return f;case"ValueProjection":if(!n(P=this.visit(e.children[0],o)))return null;f=[];var T=function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}(P);for(p=0;p<T.length;p++)null!==(a=this.visit(e.children[1],T[p]))&&f.push(a);return f;case"FilterProjection":if(!t(P=this.visit(e.children[0],o)))return null;var j=[],N=[];for(p=0;p<P.length;p++)i(s=this.visit(e.children[2],P[p]))||j.push(P[p]);for(var I=0;I<j.length;I++)null!==(a=this.visit(e.children[1],j[I]))&&N.push(a);return N;case"Comparator":switch(c=this.visit(e.children[0],o),u=this.visit(e.children[1],o),e.name){case k:l=r(c,u);break;case E:l=!r(c,u);break;case S:l=c>u;break;case _:l=c>=u;break;case C:l=c<u;break;case O:l=c<=u;break;default:throw new Error("Unknown comparator: "+e.name)}return l;case A:var R=this.visit(e.children[0],o);if(!t(R))return null;var D=[];for(p=0;p<R.length;p++)t(a=R[p])?D.push.apply(D,a):D.push(a);return D;case"Identity":return o;case"MultiSelectList":if(null===o)return null;for(f=[],p=0;p<e.children.length;p++)f.push(this.visit(e.children[p],o));return f;case"MultiSelectHash":if(null===o)return null;var L;for(f={},p=0;p<e.children.length;p++)f[(L=e.children[p]).name]=this.visit(L.value,o);return f;case"OrExpression":return i(s=this.visit(e.children[0],o))&&(s=this.visit(e.children[1],o)),s;case"AndExpression":return!0===i(c=this.visit(e.children[0],o))?c:this.visit(e.children[1],o);case"NotExpression":return i(c=this.visit(e.children[0],o));case"Literal":return e.value;case b:return d=this.visit(e.children[0],o),this.visit(e.children[1],d);case y:return o;case"Function":var z=[];for(p=0;p<e.children.length;p++)z.push(this.visit(e.children[p],o));return this.runtime.callFunction(e.name,z);case"ExpressionReference":var B=e.children[0];return B.jmespathType=w,B;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var n=t[0],r=t[1],i=t[2],o=[null,null,null];if(null===i)i=1;else if(0===i){var s=new Error("Invalid slice, step cannot be 0");throw s.name="RuntimeError",s}var a=i<0;return n=null===n?a?e-1:0:this.capSliceRange(e,n,i),r=null===r?a?-1:e:this.capSliceRange(e,r,i),o[0]=n,o[1]=r,o[2]=i,o},capSliceRange:function(e,t,n){return t<0?(t+=e)<0&&(t=n<0?-1:0):t>=e&&(t=n<0?e-1:e),t}},U.prototype={callFunction:function(e,t){var n=this.functionTable[e];if(void 0===n)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,n._signature),n._func.call(this,t)},_validateArgs:function(e,t,n){var r,i,o,s;if(n[n.length-1].variadic){if(t.length<n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+n.length+r+" but received "+t.length)}else if(t.length!==n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+n.length+r+" but received "+t.length);for(var a=0;a<n.length;a++){s=!1,i=n[a].types,o=this._getTypeName(t[a]);for(var c=0;c<i.length;c++)if(this._typeMatches(o,i[c],t[a])){s=!0;break}if(!s){var u=i.map((function(e){return l[e]})).join(",");throw new Error("TypeError: "+e+"() expected argument "+(a+1)+" to be type "+u+" but received type "+l[o]+" instead.")}}},_typeMatches:function(e,t,n){if(1===t)return!0;if(9!==t&&8!==t&&3!==t)return e===t;if(3===t)return 3===e;if(3===e){var r;8===t?r=s:9===t&&(r=a);for(var i=0;i<n.length;i++)if(!this._typeMatches(this._getTypeName(n[i]),r,n[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return a;case"[object Number]":return s;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return e.jmespathType===w?6:4}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],n=e[1];return-1!==t.indexOf(n,t.length-n.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===a){for(var t=e[0],n="",r=t.length-1;r>=0;r--)n+=t[r];return n}var i=e[0].slice(0);return i.reverse(),i},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t/n.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return n(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],n=this._interpreter,r=e[0],i=e[1],o=0;o<i.length;o++)t.push(n.visit(r,i[o]));return t},_functionMerge:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)t[i]=r[i]}return t},_functionMax:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===s)return Math.max.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)n.localeCompare(t[r])<0&&(n=t[r]);return n}return null},_functionMin:function(e){if(e[0].length>0){if(this._getTypeName(e[0][0])===s)return Math.min.apply(Math,e[0]);for(var t=e[0],n=t[0],r=1;r<t.length;r++)t[r].localeCompare(n)<0&&(n=t[r]);return n}return null},_functionSum:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case s:return"number";case a:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],n=Object.keys(t),r=[],i=0;i<n.length;i++)r.push(t[n[i]]);return r},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return 3===this._getTypeName(e[0])?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===a?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,n=this._getTypeName(e[0]);return n===s?e[0]:n!==a||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var n=this._interpreter,r=e[1],i=this._getTypeName(n.visit(r,t[0]));if([s,a].indexOf(i)<0)throw new Error("TypeError");for(var o=this,l=[],c=0;c<t.length;c++)l.push([c,t[c]]);l.sort((function(e,t){var s=n.visit(r,e[1]),a=n.visit(r,t[1]);if(o._getTypeName(s)!==i)throw new Error("TypeError: expected "+i+", received "+o._getTypeName(s));if(o._getTypeName(a)!==i)throw new Error("TypeError: expected "+i+", received "+o._getTypeName(a));return s>a?1:s<a?-1:e[0]-t[0]}));for(var u=0;u<l.length;u++)t[u]=l[u][1];return t},_functionMaxBy:function(e){for(var t,n,r=e[1],i=e[0],o=this.createKeyFunction(r,[s,a]),l=-1/0,c=0;c<i.length;c++)(n=o(i[c]))>l&&(l=n,t=i[c]);return t},_functionMinBy:function(e){for(var t,n,r=e[1],i=e[0],o=this.createKeyFunction(r,[s,a]),l=1/0,c=0;c<i.length;c++)(n=o(i[c]))<l&&(l=n,t=i[c]);return t},createKeyFunction:function(e,t){var n=this,r=this._interpreter;return function(i){var o=r.visit(e,i);if(t.indexOf(n._getTypeName(o))<0){var s="TypeError: expected one of "+t+", received "+n._getTypeName(o);throw new Error(s)}return o}}},e.tokenize=function(e){return(new F).tokenize(e)},e.compile=function(e){return(new H).parse(e)},e.search=function(e,t){var n=new H,r=new U,i=new W(r);r._interpreter=i;var o=n.parse(t);return i.search(o,e)},e.strictDeepEqual=r}(t)}));let FP={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const qP=/[&<>"']/,HP=/[&<>"']/g,WP=/[<>"']|&(?!#?\w+;)/,UP=/[<>"']|&(?!#?\w+;)/g,JP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},KP=e=>JP[e];function GP(e,t){if(t){if(qP.test(e))return e.replace(HP,KP)}else if(WP.test(e))return e.replace(UP,KP);return e}const QP=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function XP(e){return e.replace(QP,((e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const YP=/(^|[^\[])\^/g;function ZP(e,t){e="string"==typeof e?e:e.source,t=t||"";const n={replace:(t,r)=>(r=(r=r.source||r).replace(YP,"$1"),e=e.replace(t,r),n),getRegex:()=>new RegExp(e,t)};return n}const eT=/[^\w:]/g,tT=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function nT(e,t,n){if(e){let e;try{e=decodeURIComponent(XP(n)).replace(eT,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!tT.test(n)&&(n=function(e,t){rT[" "+e]||(iT.test(e)?rT[" "+e]=e+"/":rT[" "+e]=uT(e,"/",!0));const n=-1===(e=rT[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(oT,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(sT,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}const rT={},iT=/^[^:]+:\/*[^/]*$/,oT=/^([^:]+:)[\s\S]*$/,sT=/^([^:]+:\/*[^/]*)[\s\S]*$/;const aT={exec:function(){}};function lT(e){let t,n,r=1;for(;r<arguments.length;r++)for(n in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function cT(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"})).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function uT(e,t,n){const r=e.length;if(0===r)return"";let i=0;for(;i<r;){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,r-i)}function hT(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function dT(e,t){if(t<1)return"";let n="";for(;t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function fT(e,t,n,r){const i=t.href,o=t.title?GP(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s,[])};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:GP(s)}}class pT{constructor(e){this.options=e||FP}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:uT(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=function(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=uT(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,i,o,s,a,l,c,u,h,d,f,p=t[1].trim();const m=p.length>1,g={type:"list",raw:"",ordered:m,start:m?+p.slice(0,-1):"",loose:!1,items:[]};p=m?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=m?p:"[*+-]");const v=new RegExp(`^( {0,3}${p})((?:[\t ][^\\n]*)?(?:\\n|$))`);for(;e&&(f=!1,t=v.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),c=t[2].split("\n",1)[0],u=e.split("\n",1)[0],this.options.pedantic?(o=2,d=c.trimLeft()):(o=t[2].search(/[^ ]/),o=o>4?1:o,d=c.slice(o),o+=t[1].length),a=!1,!c&&/^ *$/.test(u)&&(n+=u+"\n",e=e.substring(u.length+1),f=!0),!f){const t=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),r=new RegExp(`^ {0,${Math.min(3,o-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^( {0,${Math.min(3,o-1)}})(\`\`\`|~~~)`);for(;e&&(h=e.split("\n",1)[0],c=h,this.options.pedantic&&(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!i.test(c))&&!this.rules.block.heading.test(c)&&!t.test(c)&&!r.test(e);){if(c.search(/[^ ]/)>=o||!c.trim())d+="\n"+c.slice(o);else{if(a)break;d+="\n"+c}a||c.trim()||(a=!0),n+=h+"\n",e=e.substring(h.length+1)}}g.loose||(l?g.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(d),r&&(i="[ ] "!==r[0],d=d.replace(/^\[[ xX]\] +/,""))),g.items.push({type:"list_item",raw:n,task:!!r,checked:i,loose:!1,text:d}),g.raw+=n}g.items[g.items.length-1].raw=n.trimRight(),g.items[g.items.length-1].text=d.trimRight(),g.raw=g.raw.trimRight();const y=g.items.length;for(s=0;s<y;s++){this.lexer.state.top=!1,g.items[s].tokens=this.lexer.blockTokens(g.items[s].text,[]);const e=g.items[s].tokens.filter((e=>"space"===e.type)),t=e.every((e=>{const t=e.raw.split("");let n=0;for(const e of t)if("\n"===e&&(n+=1),n>1)return!0;return!1}));!g.loose&&e.length&&t&&(g.loose=!0,g.items[s].loose=!0)}return g}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(e.type="paragraph",e.text=this.options.sanitizer?this.options.sanitizer(t[0]):GP(t[0]),e.tokens=[],this.lexer.inline(e.text,e.tokens)),e}}def(e){const t=this.rules.block.def.exec(e);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));return{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:cT(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n,r,i,o,s=e.align.length;for(n=0;n<s;n++)/^ *-+: *$/.test(e.align[n])?e.align[n]="right":/^ *:-+: *$/.test(e.align[n])?e.align[n]="center":/^ *:-+ *$/.test(e.align[n])?e.align[n]="left":e.align[n]=null;for(s=e.rows.length,n=0;n<s;n++)e.rows[n]=cT(e.rows[n],e.header.length).map((e=>({text:e})));for(s=e.header.length,r=0;r<s;r++)e.header[r].tokens=[],this.lexer.inline(e.header[r].text,e.header[r].tokens);for(s=e.rows.length,r=0;r<s;r++)for(o=e.rows[r],i=0;i<o.length;i++)o[i].tokens=[],this.lexer.inline(o[i].text,o[i].tokens);return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(e.text,e.tokens),e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:GP(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):GP(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=uT(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{const e=function(e,t){if(-1===e.indexOf(t[1]))return-1;const n=e.length;let r=0,i=0;for(;i<n;i++)if("\\"===e[i])i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}(t[2],"()");if(e>-1){const n=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,n).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),fT(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");if(e=t[e.toLowerCase()],!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return fT(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||i&&(""===n||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let i,o,s=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);null!=(r=l.exec(t));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=i.length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;if(o=Math.min(o,o+s+a),Math.min(n,o)%2){const t=e.slice(1,n+r.index+o);return{type:"em",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+o-1);return{type:"strong",raw:e.slice(0,n+r.index+o+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=GP(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;return"@"===n[2]?(e=GP(this.options.mangle?t(n[1]):n[1]),r="mailto:"+e):(e=GP(n[1]),r=e),{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if("@"===n[2])e=GP(this.options.mangle?t(n[0]):n[0]),r="mailto:"+e;else{let t;do{t=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=GP(n[0]),r="www."===n[1]?"http://"+e:e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;return e=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):GP(n[0]):n[0]:GP(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:e}}}}const mT={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:aT,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};mT.def=ZP(mT.def).replace("label",mT._label).replace("title",mT._title).getRegex(),mT.bullet=/(?:[*+-]|\d{1,9}[.)])/,mT.listItemStart=ZP(/^( *)(bull) */).replace("bull",mT.bullet).getRegex(),mT.list=ZP(mT.list).replace(/bull/g,mT.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+mT.def.source+")").getRegex(),mT._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mT._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,mT.html=ZP(mT.html,"i").replace("comment",mT._comment).replace("tag",mT._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mT.paragraph=ZP(mT._paragraph).replace("hr",mT.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mT._tag).getRegex(),mT.blockquote=ZP(mT.blockquote).replace("paragraph",mT.paragraph).getRegex(),mT.normal=lT({},mT),mT.gfm=lT({},mT.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),mT.gfm.table=ZP(mT.gfm.table).replace("hr",mT.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mT._tag).getRegex(),mT.gfm.paragraph=ZP(mT._paragraph).replace("hr",mT.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",mT.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mT._tag).getRegex(),mT.pedantic=lT({},mT.normal,{html:ZP("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",mT._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:aT,paragraph:ZP(mT.normal._paragraph).replace("hr",mT.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",mT.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const gT={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:aT,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:aT,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function vT(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function yT(e){let t,n,r="";const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}gT._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",gT.punctuation=ZP(gT.punctuation).replace(/punctuation/g,gT._punctuation).getRegex(),gT.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,gT.escapedEmSt=/\\\*|\\_/g,gT._comment=ZP(mT._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),gT.emStrong.lDelim=ZP(gT.emStrong.lDelim).replace(/punct/g,gT._punctuation).getRegex(),gT.emStrong.rDelimAst=ZP(gT.emStrong.rDelimAst,"g").replace(/punct/g,gT._punctuation).getRegex(),gT.emStrong.rDelimUnd=ZP(gT.emStrong.rDelimUnd,"g").replace(/punct/g,gT._punctuation).getRegex(),gT._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,gT._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,gT._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,gT.autolink=ZP(gT.autolink).replace("scheme",gT._scheme).replace("email",gT._email).getRegex(),gT._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,gT.tag=ZP(gT.tag).replace("comment",gT._comment).replace("attribute",gT._attribute).getRegex(),gT._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,gT._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,gT._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,gT.link=ZP(gT.link).replace("label",gT._label).replace("href",gT._href).replace("title",gT._title).getRegex(),gT.reflink=ZP(gT.reflink).replace("label",gT._label).replace("ref",mT._label).getRegex(),gT.nolink=ZP(gT.nolink).replace("ref",mT._label).getRegex(),gT.reflinkSearch=ZP(gT.reflinkSearch,"g").replace("reflink",gT.reflink).replace("nolink",gT.nolink).getRegex(),gT.normal=lT({},gT),gT.pedantic=lT({},gT.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ZP(/^!?\[(label)\]\((.*?)\)/).replace("label",gT._label).getRegex(),reflink:ZP(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",gT._label).getRegex()}),gT.gfm=lT({},gT.normal,{escape:ZP(gT.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),gT.gfm.url=ZP(gT.gfm.url,"i").replace("email",gT.gfm._extended_email).getRegex(),gT.breaks=lT({},gT.gfm,{br:ZP(gT.br).replace("{2,}","*").getRegex(),text:ZP(gT.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class wT{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||FP,this.options.tokenizer=this.options.tokenizer||new pT,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:mT.normal,inline:gT.normal};this.options.pedantic?(t.block=mT.pedantic,t.inline=gT.pedantic):this.options.gfm&&(t.block=mT.gfm,this.options.breaks?t.inline=gT.breaks:t.inline=gT.gfm),this.tokenizer.rules=t}static get rules(){return{block:mT,inline:gT}}static lex(e,t){return new wT(t).lex(e)}static lexInline(e,t){return new wT(t).inlineTokens(e)}lex(e){let t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){let n,r,i,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(n):(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(r.raw+="\n"+n.raw,r.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else{if(i=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(this.state.top&&(n=this.tokenizer.paragraph(i)))r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n),o=i.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+n.raw,r.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,i,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+dT("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+dT("a",o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,yT))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,yT))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n),"number"==typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i,vT))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class bT{constructor(e){this.options=e||FP}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(n=!0,e=t)}return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="'+this.options.langPrefix+GP(r,!0)+'">'+(n?e:GP(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:GP(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,n,r){if(this.options.headerIds){return`<h${t} id="${this.options.headerPrefix+r.slug(n)}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){if(null===(e=nT(this.options.sanitize,this.options.baseUrl,e)))return n;let r='<a href="'+GP(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(null===(e=nT(this.options.sanitize,this.options.baseUrl,e)))return n;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=this.options.xhtml?"/>":">",r}text(e){return e}}class xT{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class $T{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++,n=e+"-"+r}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class kT{constructor(e){this.options=e||FP,this.options.renderer=this.options.renderer||new bT,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new xT,this.slugger=new $T}static parse(e,t){return new kT(t).parse(e)}static parseInline(e,t){return new kT(t).parseInline(e)}parse(e,t=!0){let n,r,i,o,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x="";const $=e.length;for(n=0;n<$;n++)if(h=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(b=this.options.extensions.renderers[h.type].call({parser:this},h),!1!==b||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)))x+=b||"";else switch(h.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":x+=this.renderer.heading(this.parseInline(h.tokens),h.depth,XP(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":x+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",l="",o=h.header.length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(h.header[r].tokens),{header:!0,align:h.align[r]});for(c+=this.renderer.tablerow(l),u="",o=h.rows.length,r=0;r<o;r++){for(a=h.rows[r],l="",s=a.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(a[i].tokens),{header:!1,align:h.align[i]});u+=this.renderer.tablerow(l)}x+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),x+=this.renderer.blockquote(u);continue;case"list":for(d=h.ordered,f=h.start,p=h.loose,o=h.items.length,u="",r=0;r<o;r++)g=h.items[r],v=g.checked,y=g.task,m="",g.task&&(w=this.renderer.checkbox(v),p?g.tokens.length>0&&"paragraph"===g.tokens[0].type?(g.tokens[0].text=w+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=w+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:w}):m+=w),m+=this.parse(g.tokens,p),u+=this.renderer.listitem(m,y,v);x+=this.renderer.list(u,d,f);continue;case"html":x+=this.renderer.html(h.text);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;n+1<$&&"text"===e[n+1].type;)h=e[++n],u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text);x+=t?this.renderer.paragraph(u):u;continue;default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return x}parseInline(e,t){t=t||this.renderer;let n,r,i,o="";const s=e.length;for(n=0;n<s;n++)if(r=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(i=this.options.extensions.renderers[r.type].call({parser:this},r),!1!==i||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)))o+=i||"";else switch(r.type){case"escape":case"text":o+=t.text(r.text);break;case"html":o+=t.html(r.text);break;case"link":o+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break;case"image":o+=t.image(r.href,r.title,r.text);break;case"strong":o+=t.strong(this.parseInline(r.tokens,t));break;case"em":o+=t.em(this.parseInline(r.tokens,t));break;case"codespan":o+=t.codespan(r.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(r.tokens,t));break;default:{const e='Token with "'+r.type+'" type was not found.';if(this.options.silent)return void console.error(e);throw new Error(e)}}return o}}function ST(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),hT(t=lT({},ST.defaults,t||{})),n){const r=t.highlight;let i;try{i=wT.lex(e,t)}catch(e){return n(e)}const o=function(e){let o;if(!e)try{t.walkTokens&&ST.walkTokens(i,t.walkTokens),o=kT.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();let s=0;return ST.walkTokens(i,(function(e){"code"===e.type&&(s++,setTimeout((()=>{r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),s--,0===s&&o()}))}),0))})),void(0===s&&o())}try{const n=wT.lex(e,t);return t.walkTokens&&ST.walkTokens(n,t.walkTokens),kT.parse(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+GP(e.message+"",!0)+"</pre>";throw e}}function CT(e,t,n){const r=e.slice();return r[6]=t[n],r[8]=n,r}function _T(e){let t,n,r,i,o,s,a=e[6]+"";function l(...t){return e[4](e[8],...t)}return{c(){t=A("sl-tag"),n=P(a),r=T(),B(t,"removable",""),B(t,"pill",""),B(t,"size","small"),B(t,"variant","success"),B(t,"data-value",i=e[6])},m(e,i){_(e,t,i),k(t,n),k(t,r),o||(s=N(t,"sl-remove",l),o=!0)},p(r,o){e=r,1&o&&a!==(a=e[6]+"")&&V(n,a),1&o&&i!==(i=e[6])&&B(t,"data-value",i)},d(e){e&&O(t),o=!1,s()}}}function OT(t){let n,r,i,o,s=t[0],a=[];for(let e=0;e<s.length;e+=1)a[e]=_T(CT(t,s,e));return{c(){n=A("sl-input"),r=A("span");for(let e=0;e<a.length;e+=1)a[e].c();D(r,"slot","prefix"),B(n,"label","Tags"),B(n,"size","small"),B(n,"help-text","Use SPACE to create tags and : for a tag group"),B(n,"class","svelte-67kz3b")},m(e,s){_(e,n,s),k(n,r);for(let e=0;e<a.length;e+=1)a[e].m(r,null);i||(o=N(n,"keydown",t[1]),i=!0)},p(e,[t]){if(5&t){let n;for(s=e[0],n=0;n<s.length;n+=1){const i=CT(e,s,n);a[n]?a[n].p(i,t):(a[n]=_T(i),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=s.length}},i:e,o:e,d(e){e&&O(n),E(a,e),i=!1,o()}}}function ET(e,t,n){const r=oe();let{tags:i=[]}=t,{separator:o=" "}=t;function s(e){n(0,i=i.filter(((t,n)=>n!=e))),r("tagschanged",{value:i})}return e.$$set=e=>{"tags"in e&&n(0,i=e.tags),"separator"in e&&n(3,o=e.separator)},[i,function(e){let t=e.target.value.trim();e.key===o?(t.length>0&&n(0,i=[...i,t]),e.target.value="",r("tagschanged",{value:i})):"Backspace"===e.key&&0==e.target.value.length&&(n(0,i=i.slice(0,-1)),r("tagschanged",{value:i}))},s,o,(e,t)=>s(e)]}ST.options=ST.setOptions=function(e){var t;return lT(ST.defaults,e),t=ST.defaults,FP=t,ST},ST.getDefaults=VP,ST.defaults=FP,ST.use=function(...e){const t=lT({},...e),n=ST.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions&&(r=!0,e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;n.renderers[e.name]=t?function(...n){let r=e.renderer.apply(this,n);return!1===r&&(r=t.apply(this,n)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");n[e.level]?n[e.level].unshift(e.tokenizer):n[e.level]=[e.tokenizer],e.start&&("block"===e.level?n.startBlock?n.startBlock.push(e.start):n.startBlock=[e.start]:"inline"===e.level&&(n.startInline?n.startInline.push(e.start):n.startInline=[e.start]))}e.childTokens&&(n.childTokens[e.name]=e.childTokens)}))),e.renderer){const n=ST.defaults.renderer||new bT;for(const t in e.renderer){const r=n[t];n[t]=(...i)=>{let o=e.renderer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.renderer=n}if(e.tokenizer){const n=ST.defaults.tokenizer||new pT;for(const t in e.tokenizer){const r=n[t];n[t]=(...i)=>{let o=e.tokenizer[t].apply(n,i);return!1===o&&(o=r.apply(n,i)),o}}t.tokenizer=n}if(e.walkTokens){const n=ST.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t),n&&n.call(this,t)}}r&&(t.extensions=n),ST.setOptions(t)}))},ST.walkTokens=function(e,t){for(const n of e)switch(t.call(ST,n),n.type){case"table":for(const e of n.header)ST.walkTokens(e.tokens,t);for(const e of n.rows)for(const n of e)ST.walkTokens(n.tokens,t);break;case"list":ST.walkTokens(n.items,t);break;default:ST.defaults.extensions&&ST.defaults.extensions.childTokens&&ST.defaults.extensions.childTokens[n.type]?ST.defaults.extensions.childTokens[n.type].forEach((function(e){ST.walkTokens(n[e],t)})):n.tokens&&ST.walkTokens(n.tokens,t)}},ST.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");hT(t=lT({},ST.defaults,t||{}));try{const n=wT.lexInline(e,t);return t.walkTokens&&ST.walkTokens(n,t.walkTokens),kT.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+GP(e.message+"",!0)+"</pre>";throw e}},ST.Parser=kT,ST.parser=kT.parse,ST.Renderer=bT,ST.TextRenderer=xT,ST.Lexer=wT,ST.lexer=wT.lex,ST.Tokenizer=pT,ST.Slugger=$T,ST.parse=ST,ST.options,ST.setOptions,ST.use,ST.walkTokens,ST.parseInline,kT.parse,wT.lex;class AT extends He{constructor(e){super(),qe(this,e,ET,OT,a,{tags:0,separator:3})}}function MT(e,t,n){const r=e.slice();return r[26]=t[n],r}function PT(e,t,n){const r=e.slice();return r[29]=t[n],r}function TT(e,t,n){const r=e.slice();return r[32]=t[n],r}function jT(e,t,n){const r=e.slice();return r[35]=t[n],r}function NT(e){let t,n,r,i,o,s=e[0].label+"",a=["node"].includes(e[0]?.kind),l=["node","edge"].includes(e[0]?.kind),c=a&&IT(e),u=l&&RT(e);return{c(){t=A("h1"),n=P(s),r=T(),c&&c.c(),i=T(),u&&u.c(),o=j(),D(t,"class","svelte-56r62")},m(e,s){_(e,t,s),k(t,n),k(t,r),c&&c.m(t,null),_(e,i,s),u&&u.m(e,s),_(e,o,s)},p(e,r){1&r[0]&&s!==(s=e[0].label+"")&&V(n,s),1&r[0]&&(a=["node"].includes(e[0]?.kind)),a?c?c.p(e,r):(c=IT(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null),1&r[0]&&(l=["node","edge"].includes(e[0]?.kind)),l?u?u.p(e,r):(u=RT(e),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},d(e){e&&O(t),c&&c.d(),e&&O(i),u&&u.d(e),e&&O(o)}}}function IT(t){let n,r,i;return{c(){n=A("sl-button"),n.innerHTML='<sl-icon name="gear" label="Settings"></sl-icon>',B(n,"variant","default"),B(n,"size","small"),B(n,"circle","")},m(e,o){_(e,n,o),r||(i=N(n,"click",t[8]),r=!0)},p:e,d(e){e&&O(n),r=!1,i()}}}function RT(e){let t,n=ST(e[0].desc)+"";return{c(){t=A("p"),D(t,"class","itemdesc svelte-56r62")},m(e,r){_(e,t,r),t.innerHTML=n},p(e,r){1&r[0]&&n!==(n=ST(e[0].desc)+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function DT(e){let t,n,r,i;return{c(){t=A("sl-textarea"),B(t,"label","Notes"),B(t,"placeholder","Notes (these will be shown in the graph)..."),B(t,"size","small"),B(t,"value",n=e[0].notes)},m(n,o){_(n,t,o),r||(i=N(t,"sl-input",e[10]),r=!0)},p(e,r){1&r[0]&&n!==(n=e[0].notes)&&B(t,"value",n)},d(e){e&&O(t),r=!1,i()}}}function LT(e){let t,n,r,i,o,s,a,l;return o=new AT({props:{tags:e[0].tags}}),o.$on("tagschanged",e[12]),{c(){t=A("sl-textarea"),n=A("p"),n.innerHTML='<a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Learn about MarkDown</a>',i=T(),Be(o.$$.fragment),D(n,"slot","help-text"),B(t,"label","Description"),B(t,"placeholder","Description in markdown..."),B(t,"size","small"),B(t,"value",r=e[0].desc)},m(r,c){_(r,t,c),k(t,n),_(r,i,c),Ve(o,r,c),s=!0,a||(l=N(t,"sl-input",e[11]),a=!0)},p(e,n){(!s||1&n[0]&&r!==(r=e[0].desc))&&B(t,"value",r);const i={};1&n[0]&&(i.tags=e[0].tags),o.$set(i)},i(e){s||(Ae(o.$$.fragment,e),s=!0)},o(e){Me(o.$$.fragment,e),s=!1},d(e){e&&O(t),e&&O(i),Fe(o,e),a=!1,l()}}}function zT(e){let t,n,r,i,o,s=e[0].badge?.startsWith("http"),a=s&&BT(e),l=e[1].theme.badges,c=[];for(let t=0;t<l.length;t+=1)c[t]=qT(jT(e,l,t));return{c(){t=A("sl-select"),a&&a.c(),n=T();for(let e=0;e<c.length;e+=1)c[e].c();B(t,"label","Badge"),B(t,"clearable",""),B(t,"value",r=e[0].badge),B(t,"placeholder","Select badge")},m(r,s){_(r,t,s),a&&a.m(t,null),k(t,n);for(let e=0;e<c.length;e+=1)c[e].m(t,null);i||(o=N(t,"sl-change",e[13]),i=!0)},p(e,i){if(1&i[0]&&(s=e[0].badge?.startsWith("http")),s?a?a.p(e,i):(a=BT(e),a.c(),a.m(t,n)):a&&(a.d(1),a=null),3&i[0]){let n;for(l=e[1].theme.badges,n=0;n<l.length;n+=1){const r=jT(e,l,n);c[n]?c[n].p(r,i):(c[n]=qT(r),c[n].c(),c[n].m(t,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=l.length}1&i[0]&&r!==(r=e[0].badge)&&B(t,"value",r)},d(e){e&&O(t),a&&a.d(),E(c,e),i=!1,o()}}}function BT(e){let t,n;return{c(){t=A("img"),D(t,"width","30"),D(t,"height","28"),D(t,"alt","badge"),c(t.src,n=e[0].badge)||D(t,"src",n),D(t,"slot","prefix")},m(e,n){_(e,t,n)},p(e,r){1&r[0]&&!c(t.src,n=e[0].badge)&&D(t,"src",n)},d(e){e&&O(t)}}}function VT(e){let t,n=e[35]+"";return{c(){t=P(n)},m(e,n){_(e,t,n)},p(e,r){2&r[0]&&n!==(n=e[35]+"")&&V(t,n)},d(e){e&&O(t)}}}function FT(e){let t,n;return{c(){t=A("img"),D(t,"width","30"),D(t,"height","28"),D(t,"alt","badge"),c(t.src,n=e[35])||D(t,"src",n),D(t,"class","http-badge svelte-56r62")},m(e,n){_(e,t,n)},p(e,r){2&r[0]&&!c(t.src,n=e[35])&&D(t,"src",n)},d(e){e&&O(t)}}}function qT(e){let t,n,r,i,o;function s(e,t){return 2&t[0]&&(n=null),null==n&&(n=!!e[35].startsWith("http")),n?FT:VT}let a=s(e,[-1,-1]),l=a(e);return{c(){t=A("sl-menu-item"),l.c(),r=T(),B(t,"value",i=e[35]),B(t,"selected",o=e[0].badge===e[35])},m(e,n){_(e,t,n),l.m(t,null),k(t,r)},p(e,n){a===(a=s(e,n))&&l?l.p(e,n):(l.d(1),l=a(e),l&&(l.c(),l.m(t,r))),2&n[0]&&i!==(i=e[35])&&B(t,"value",i),3&n[0]&&o!==(o=e[0].badge===e[35])&&B(t,"selected",o)},d(e){e&&O(t),l.d()}}}function HT(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,M,j,I,R,L,z,V,F,H,W,U,J,K,G,Q,X,Y,Z,ee;return{c(){t=A("div"),n=A("sl-checkbox"),r=P("Directed"),s=T(),a=A("div"),l=A("sl-color-picker"),u=T(),h=A("span"),h.textContent="Stroke",d=T(),f=A("sl-input"),m=T(),g=A("sl-select"),v=A("sl-menu-item"),y=P("straight"),b=T(),x=A("sl-menu-item"),$=P("curved"),C=T(),E=A("sl-menu-item"),M=P("ortho"),R=T(),L=A("sl-select"),z=A("sl-menu-item"),V=P("solid"),H=T(),W=A("sl-menu-item"),U=P("dashed"),K=T(),G=A("sl-menu-item"),Q=P("dotted"),q(n,"width","100%"),B(n,"checked",i=e[0].directed),B(l,"format","hex"),B(l,"size","small"),B(l,"value",c=e[0].stroke),B(l,"label","Select stroke color"),B(l,"opacity",""),B(l,"swatches",e[5]),D(h,"class","title svelte-56r62"),D(a,"class","edge-stroke svelte-56r62"),B(f,"label","Weight"),B(f,"type","number"),B(f,"value",p=e[0].weight),B(v,"value","straight"),B(v,"selected",w="straight"===e[0].shape),B(x,"value","curved"),B(x,"selected",S="curved"===e[0].shape),B(E,"value","ortho"),B(E,"selected",j="ortho"===e[0].shape),B(g,"label","Shape"),B(g,"value",I=e[0].shape),B(g,"placeholder","Select shape"),B(z,"value","solid"),B(z,"selected",F="solid"===e[0].strokeType),B(W,"value","dashed"),B(W,"selected",J="dashed"===e[0].strokeType),B(G,"value","dotted"),B(G,"selected",X="dotted"===e[0].strokeType),B(L,"label","StrokeType"),B(L,"value",Y=e[0].strokeType),B(L,"placeholder","Select strokeType"),D(t,"class","edge-panel svelte-56r62")},m(i,o){_(i,t,o),k(t,n),k(n,r),k(t,s),k(t,a),k(a,l),k(a,u),k(a,h),k(t,d),k(t,f),k(t,m),k(t,g),k(g,v),k(v,y),k(g,b),k(g,x),k(x,$),k(g,C),k(g,E),k(E,M),k(t,R),k(t,L),k(L,z),k(z,V),k(L,H),k(L,W),k(W,U),k(L,K),k(L,G),k(G,Q),Z||(ee=[N(n,"sl-change",e[19]),N(l,"sl-change",e[20]),N(f,"sl-change",e[21]),N(g,"sl-change",e[22]),N(L,"sl-change",e[23])],Z=!0)},p(e,t){1&t[0]&&i!==(i=e[0].directed)&&B(n,"checked",i),1&t[0]&&c!==(c=e[0].stroke)&&B(l,"value",c),1&t[0]&&p!==(p=e[0].weight)&&B(f,"value",p),1&t[0]&&w!==(w="straight"===e[0].shape)&&B(v,"selected",w),1&t[0]&&S!==(S="curved"===e[0].shape)&&B(x,"selected",S),1&t[0]&&j!==(j="ortho"===e[0].shape)&&B(E,"selected",j),1&t[0]&&I!==(I=e[0].shape)&&B(g,"value",I),1&t[0]&&F!==(F="solid"===e[0].strokeType)&&B(z,"selected",F),1&t[0]&&J!==(J="dashed"===e[0].strokeType)&&B(W,"selected",J),1&t[0]&&X!==(X="dotted"===e[0].strokeType)&&B(G,"selected",X),1&t[0]&&Y!==(Y=e[0].strokeType)&&B(L,"value",Y)},d(e){e&&O(t),Z=!1,o(ee)}}}function WT(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,M,P,j;return{c(){t=A("div"),n=A("div"),r=A("sl-color-picker"),s=T(),a=A("span"),a.textContent="Fill",l=T(),c=A("div"),u=A("sl-color-picker"),d=T(),f=A("span"),f.textContent="Border",p=T(),m=A("div"),g=A("sl-color-picker"),y=T(),w=A("span"),w.textContent="Label",b=T(),x=A("div"),$=A("sl-input"),C=T(),E=A("sl-input"),B(r,"format","hex"),B(r,"size","small"),B(r,"value",i=e[0].fill),B(r,"label","Select fill color"),B(r,"opacity",""),B(r,"swatches",e[5]),D(a,"class","svelte-56r62"),D(n,"class","node-color svelte-56r62"),B(u,"format","hex"),B(u,"size","small"),B(u,"value",h=e[0].bordercolor),B(u,"label","Select border color"),B(u,"opacity",""),B(u,"swatches",e[5]),D(f,"class","svelte-56r62"),D(c,"class","node-color svelte-56r62"),B(g,"format","hex"),B(g,"size","small"),B(g,"value",v=e[0].labelcolor),B(g,"label","Select label color"),B(g,"opacity",""),B(g,"swatches",e[5]),D(w,"class","svelte-56r62"),D(m,"class","node-color svelte-56r62"),D(t,"class","node-colors svelte-56r62"),B($,"label","Label Font Size"),B($,"type","number"),B($,"size","small"),B($,"placeholder","16"),B($,"min","12"),B($,"max","32"),B($,"step","1"),B($,"value",S=e[0].nodelabelfontsize||e[1].theme.nodelabelfontsize||16),B(E,"label","Notes Font Size"),B(E,"type","number"),B(E,"size","small"),B(E,"placeholder","16"),B(E,"min","12"),B(E,"max","32"),B(E,"step","1"),B(E,"value",M=e[0].nodenotesfontsize||e[1].theme.nodenotesfontsize||16),D(x,"class","node-colors svelte-56r62")},m(i,o){_(i,t,o),k(t,n),k(n,r),k(n,s),k(n,a),k(t,l),k(t,c),k(c,u),k(c,d),k(c,f),k(t,p),k(t,m),k(m,g),k(m,y),k(m,w),_(i,b,o),_(i,x,o),k(x,$),k(x,C),k(x,E),P||(j=[N(r,"sl-change",e[14]),N(u,"sl-change",e[15]),N(g,"sl-change",e[16]),N($,"input",e[17]),N(E,"input",e[18])],P=!0)},p(e,t){1&t[0]&&i!==(i=e[0].fill)&&B(r,"value",i),1&t[0]&&h!==(h=e[0].bordercolor)&&B(u,"value",h),1&t[0]&&v!==(v=e[0].labelcolor)&&B(g,"value",v),3&t[0]&&S!==(S=e[0].nodelabelfontsize||e[1].theme.nodelabelfontsize||16)&&B($,"value",S),3&t[0]&&M!==(M=e[0].nodenotesfontsize||e[1].theme.nodenotesfontsize||16)&&B(E,"value",M)},d(e){e&&O(t),e&&O(b),e&&O(x),P=!1,o(j)}}}function UT(e){let t,n,r,i,o;return i=new BP({props:{content:{json:e[0].custom||{}},onChange:e[7]}}),{c(){t=A("div"),n=A("span"),n.innerHTML="<strong>custom</strong>",r=T(),Be(i.$$.fragment),D(t,"class","row")},m(e,s){_(e,t,s),k(t,n),k(t,r),Ve(i,t,null),o=!0},p(e,t){const n={};1&t[0]&&(n.content={json:e[0].custom||{}}),i.$set(n)},i(e){o||(Ae(i.$$.fragment,e),o=!0)},o(e){Me(i.$$.fragment,e),o=!1},d(e){e&&O(t),Fe(i)}}}function JT(e){let t,n,r,i,s,a,l,c,u=ST(e[0].desc)+"",h=e[3],d=[];for(let t=0;t<h.length;t+=1)d[t]=ZT(MT(e,h,t));return{c(){t=A("sl-dialog"),n=A("p"),r=T();for(let e=0;e<d.length;e+=1)d[e].c();i=T(),s=A("sl-button"),s.textContent="Close",D(n,"class","itemdesc svelte-56r62"),B(s,"slot","footer"),B(s,"variant","primary"),B(t,"label",a="Literature Review for "+e[0].label),q(t,"--width","50vw"),B(t,"open",e[2])},m(o,a){_(o,t,a),k(t,n),n.innerHTML=u,k(t,r);for(let e=0;e<d.length;e+=1)d[e].m(t,null);k(t,i),k(t,s),l||(c=[N(s,"click",e[24]),N(t,"sl-hide",e[25])],l=!0)},p(e,r){if(1&r[0]&&u!==(u=ST(e[0].desc)+"")&&(n.innerHTML=u),8&r[0]){let n;for(h=e[3],n=0;n<h.length;n+=1){const o=MT(e,h,n);d[n]?d[n].p(o,r):(d[n]=ZT(o),d[n].c(),d[n].m(t,i))}for(;n<d.length;n+=1)d[n].d(1);d.length=h.length}1&r[0]&&a!==(a="Literature Review for "+e[0].label)&&B(t,"label",a),4&r[0]&&B(t,"open",e[2])},d(e){e&&O(t),E(d,e),l=!1,o(c)}}}function KT(e){let t,n=ST(e[26].node.desc)+"";return{c(){t=A("p"),D(t,"class","itemdesc svelte-56r62")},m(e,r){_(e,t,r),t.innerHTML=n},p(e,r){8&r[0]&&n!==(n=ST(e[26].node.desc)+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function GT(e){let t,n=ST(e[29].node.desc)+"";return{c(){t=A("p"),D(t,"class","itemdesc svelte-56r62")},m(e,r){_(e,t,r),t.innerHTML=n},p(e,r){8&r[0]&&n!==(n=ST(e[29].node.desc)+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function QT(e){let t,n=ST(e[32].node.desc)+"";return{c(){t=A("p"),D(t,"class","itemdesc svelte-56r62")},m(e,r){_(e,t,r),t.innerHTML=n},p(e,r){8&r[0]&&n!==(n=ST(e[32].node.desc)+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function XT(e){let t,n,r=e[32].node.desc&&QT(e);return{c(){t=A("sl-details"),r&&r.c(),B(t,"summary",n=e[29].node.label)},m(e,n){_(e,t,n),r&&r.m(t,null)},p(e,i){e[32].node.desc?r?r.p(e,i):(r=QT(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null),8&i[0]&&n!==(n=e[29].node.label)&&B(t,"summary",n)},d(e){e&&O(t),r&&r.d()}}}function YT(e){let t,n,r,i=e[29].node.desc&&GT(e),o=e[29].parents,s=[];for(let t=0;t<o.length;t+=1)s[t]=XT(TT(e,o,t));return{c(){t=A("sl-details"),i&&i.c(),n=T();for(let e=0;e<s.length;e+=1)s[e].c();B(t,"summary",r=e[29].node.label)},m(e,r){_(e,t,r),i&&i.m(t,null),k(t,n);for(let e=0;e<s.length;e+=1)s[e].m(t,null)},p(e,a){if(e[29].node.desc?i?i.p(e,a):(i=GT(e),i.c(),i.m(t,n)):i&&(i.d(1),i=null),8&a[0]){let n;for(o=e[29].parents,n=0;n<o.length;n+=1){const r=TT(e,o,n);s[n]?s[n].p(r,a):(s[n]=XT(r),s[n].c(),s[n].m(t,null))}for(;n<s.length;n+=1)s[n].d(1);s.length=o.length}8&a[0]&&r!==(r=e[29].node.label)&&B(t,"summary",r)},d(e){e&&O(t),i&&i.d(),E(s,e)}}}function ZT(e){let t,n,r,i,o=e[26].node.desc&&KT(e),s=e[26].parents,a=[];for(let t=0;t<s.length;t+=1)a[t]=YT(PT(e,s,t));return{c(){t=A("div"),n=A("sl-details"),o&&o.c(),r=T();for(let e=0;e<a.length;e+=1)a[e].c();B(n,"summary",i=e[26].node.label),B(n,"open",""),D(t,"class","details-group-example")},m(e,i){_(e,t,i),k(t,n),o&&o.m(n,null),k(n,r);for(let e=0;e<a.length;e+=1)a[e].m(n,null)},p(e,t){if(e[26].node.desc?o?o.p(e,t):(o=KT(e),o.c(),o.m(n,r)):o&&(o.d(1),o=null),8&t[0]){let r;for(s=e[26].parents,r=0;r<s.length;r+=1){const i=PT(e,s,r);a[r]?a[r].p(i,t):(a[r]=YT(i),a[r].c(),a[r].m(n,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=s.length}8&t[0]&&i!==(i=e[26].node.label)&&B(n,"summary",i)},d(e){e&&O(t),o&&o.d(),E(a,e)}}}function ej(e){let t,n,r,i,o,s,a,l,c,u,h,d,f,p,m=["node","edge","note"].includes(e[0]?.kind),g=["node"].includes(e[0]?.kind),v=m&&NT(e),y=("node"===e[0].kind||"note"===e[0].kind)&&DT(e),w="note"!==e[0].kind&&LT(e),b="node"===e[0].kind&&zT(e);function x(e,t){return"node"===e[0].kind||"note"===e[0].kind?WT:"edge"===e[0].kind?HT:void 0}let $=x(e),S=$&&$(e),C=e[1].customjson&&("node"===e[0].kind||"edge"===e[0].kind)&&UT(e),E=g&&JT(e);return{c(){v&&v.c(),t=T(),n=A("div"),r=A("sl-input"),o=T(),y&&y.c(),s=T(),w&&w.c(),a=T(),b&&b.c(),l=T(),S&&S.c(),c=T(),C&&C.c(),u=T(),E&&E.c(),h=j(),B(r,"label","Label"),B(r,"type","text"),B(r,"size","small"),B(r,"value",i=e[0].label),D(n,"class","node-panel svelte-56r62")},m(i,m){v&&v.m(i,m),_(i,t,m),_(i,n,m),k(n,r),k(n,o),y&&y.m(n,null),k(n,s),w&&w.m(n,null),k(n,a),b&&b.m(n,null),_(i,l,m),S&&S.m(i,m),_(i,c,m),C&&C.m(i,m),_(i,u,m),E&&E.m(i,m),_(i,h,m),d=!0,f||(p=N(r,"input",e[9]),f=!0)},p(e,o){1&o[0]&&(m=["node","edge","note"].includes(e[0]?.kind)),m?v?v.p(e,o):(v=NT(e),v.c(),v.m(t.parentNode,t)):v&&(v.d(1),v=null),(!d||1&o[0]&&i!==(i=e[0].label))&&B(r,"value",i),"node"===e[0].kind||"note"===e[0].kind?y?y.p(e,o):(y=DT(e),y.c(),y.m(n,s)):y&&(y.d(1),y=null),"note"!==e[0].kind?w?(w.p(e,o),1&o[0]&&Ae(w,1)):(w=LT(e),w.c(),Ae(w,1),w.m(n,a)):w&&(Oe(),Me(w,1,1,(()=>{w=null})),Ee()),"node"===e[0].kind?b?b.p(e,o):(b=zT(e),b.c(),b.m(n,null)):b&&(b.d(1),b=null),$===($=x(e))&&S?S.p(e,o):(S&&S.d(1),S=$&&$(e),S&&(S.c(),S.m(c.parentNode,c))),!e[1].customjson||"node"!==e[0].kind&&"edge"!==e[0].kind?C&&(Oe(),Me(C,1,1,(()=>{C=null})),Ee()):C?(C.p(e,o),3&o[0]&&Ae(C,1)):(C=UT(e),C.c(),Ae(C,1),C.m(u.parentNode,u)),1&o[0]&&(g=["node"].includes(e[0]?.kind)),g?E?E.p(e,o):(E=JT(e),E.c(),E.m(h.parentNode,h)):E&&(E.d(1),E=null)},i(e){d||(Ae(w),Ae(C),d=!0)},o(e){Me(w),Me(C),d=!1},d(e){v&&v.d(e),e&&O(t),e&&O(n),y&&y.d(),w&&w.d(),b&&b.d(),e&&O(l),S&&S.d(e),e&&O(c),C&&C.d(e),e&&O(u),E&&E.d(e),e&&O(h),f=!1,p()}}}function tj(e,t,n){let r,{selectedItem:i}=t,{graph:o}=t,s=!1;const a=oe();function l(e,t){"text"==t.split("_")[0]||"color"==t.split("_")[0]||"url"==t.split("_")[0]?n(0,i[t.split("_")[1]]=e.target.value,i):"number"==t.split("_")[0]?n(0,i[t.split("_")[1]]=""===e.target.value?null:JSON.parse(e.target.value),i):"checkbox"==t.split("_")[0]?n(0,i[t.split("_")[1]]=e.target.checked,i):n(0,i[t.split("_")[1]]=JSON.parse(e.target.value),i),a("graphchanged",o)}return e.$$set=e=>{"selectedItem"in e&&n(0,i=e.selectedItem),"graph"in e&&n(1,o=e.graph)},e.$$.update=()=>{3&e.$$.dirty[0]&&n(3,r=Ze(o,i,0))},[i,o,s,r,a,["#d0021bff","#f5a623ff","#bbae0eff","#8b572aff","#7ed321ff","#417505ff","#b00b0bff","#9013feff","#4a90e2ff","#16b591ff","#b8e986ff","#000000ff","#444444ff","#888888ff","#ccccccff","#ffffffff"],l,function(e,t,r){n(0,i.custom=e.json,i),a("graphchanged",o)},e=>n(2,s=!0),e=>l(e,"text_label"),e=>l(e,"text_notes"),e=>l(e,"text_desc"),e=>{n(0,i.tags=e.detail.value,i),a("graphchanged",o)},e=>l(e,"text_badge"),e=>l(e,"color_fill"),e=>l(e,"color_bordercolor"),e=>l(e,"color_labelcolor"),e=>l(e,"number_nodelabelfontsize"),e=>l(e,"number_nodenotesfontsize"),e=>l(e,"checkbox_directed"),e=>l(e,"color_stroke"),e=>l(e,"number_weight"),e=>l(e,"text_shape"),e=>l(e,"text_strokeType"),e=>n(2,s=!1),e=>n(2,s=!1)]}class nj extends He{constructor(e){super(),qe(this,e,tj,ej,a,{selectedItem:0,graph:1},null,[-1,-1])}}var rj={value:()=>{}};function ij(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new oj(r)}function oj(e){this._=e}function sj(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function aj(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function lj(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rj,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}oj.prototype=ij.prototype={constructor:oj,on:function(e,t){var n,r=this._,i=sj(e+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=i[o]).type)r[n]=lj(r[n],e.name,t);else if(null==t)for(n in r)r[n]=lj(r[n],e.name,null);return this}for(;++o<s;)if((n=(e=i[o]).type)&&(n=aj(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new oj(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var cj="http://www.w3.org/1999/xhtml",uj={svg:"http://www.w3.org/2000/svg",xhtml:cj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hj(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),uj.hasOwnProperty(t)?{space:uj[t],local:e}:e}function dj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===cj&&t.documentElement.namespaceURI===cj?t.createElement(e):t.createElementNS(n,e)}}function fj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pj(e){var t=hj(e);return(t.local?fj:dj)(t)}function mj(){}function gj(e){return null==e?mj:function(){return this.querySelector(e)}}function vj(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function yj(){return[]}function wj(e){return function(t){return t.matches(e)}}var bj=Array.prototype.find;function xj(){return this.firstElementChild}var $j=Array.prototype.filter;function kj(){return this.children}function Sj(e){return new Array(e.length)}function Cj(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function _j(e){return function(){return e}}function Oj(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Cj(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Ej(e,t,n,r,i,o,s){var a,l,c,u=new Map,h=t.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new Cj(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function Aj(e){return e.__data__}function Mj(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pj(e){return function(){this.removeAttribute(e)}}function Tj(e){return function(){this.removeAttributeNS(e.space,e.local)}}function jj(e,t){return function(){this.setAttribute(e,t)}}function Nj(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ij(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Rj(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dj(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lj(e){return function(){this.style.removeProperty(e)}}function zj(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bj(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vj(e,t){return e.style.getPropertyValue(t)||Dj(e).getComputedStyle(e,null).getPropertyValue(t)}function Fj(e){return function(){delete this[e]}}function qj(e,t){return function(){this[e]=t}}function Hj(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Wj(e){return e.trim().split(/^|\s+/)}function Uj(e){return e.classList||new Jj(e)}function Jj(e){this._node=e,this._names=Wj(e.getAttribute("class")||"")}function Kj(e,t){for(var n=Uj(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Gj(e,t){for(var n=Uj(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Qj(e){return function(){Kj(this,e)}}function Xj(e){return function(){Gj(this,e)}}function Yj(e,t){return function(){(t.apply(this,arguments)?Kj:Gj)(this,e)}}function Zj(){this.textContent=""}function eN(e){return function(){this.textContent=e}}function tN(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function nN(){this.innerHTML=""}function rN(e){return function(){this.innerHTML=e}}function iN(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function oN(){this.nextSibling&&this.parentNode.appendChild(this)}function sN(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function aN(){return null}function lN(){var e=this.parentNode;e&&e.removeChild(this)}function cN(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uN(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hN(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function dN(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function fN(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function pN(e,t,n){var r=Dj(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mN(e,t){return function(){return pN(this,e,t)}}function gN(e,t){return function(){return pN(this,e,t.apply(this,arguments))}}Cj.prototype={constructor:Cj,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},Jj.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var vN=[null];function yN(e,t){this._groups=e,this._parents=t}function wN(e){return"string"==typeof e?new yN([[document.querySelector(e)]],[document.documentElement]):new yN([[e]],vN)}function bN(e){e.preventDefault(),e.stopImmediatePropagation()}function xN(e){var t=e.document.documentElement,n=wN(e).on("dragstart.drag",bN,!0);"onselectstart"in t?n.on("selectstart.drag",bN,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function $N(e,t){var n=e.document.documentElement,r=wN(e).on("dragstart.drag",null);t&&(r.on("click.drag",bN,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function kN(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function SN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function CN(){}yN.prototype={constructor:yN,select:function(e){"function"!=typeof e&&(e=gj(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new yN(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:vj(t)}}(e):function(e){return null==e?yj:function(){return this.querySelectorAll(e)}}(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new yN(r,i)},selectChild:function(e){return this.select(null==e?xj:function(e){return function(){return bj.call(this.children,e)}}("function"==typeof e?e:wj(e)))},selectChildren:function(e){return this.selectAll(null==e?kj:function(e){return function(){return $j.call(this.children,e)}}("function"==typeof e?e:wj(e)))},filter:function(e){"function"!=typeof e&&(e=function(e){return function(){return this.matches(e)}}(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new yN(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Aj);var n=t?Ej:Oj,r=this._parents,i=this._groups;"function"!=typeof e&&(e=_j(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,f=vj(e.call(u,u&&u.__data__,c,r)),p=f.length,m=a[c]=new Array(p),g=s[c]=new Array(p),v=l[c]=new Array(d);n(u,h,m,g,v,f,t);for(var y,w,b=0,x=0;b<p;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(w=g[x])&&++x<p;);y._next=w||null}}return(s=new yN(s,r))._enter=a,s._exit=l,s},enter:function(){return new yN(this._enter||this._groups.map(Sj),this._parents)},exit:function(){return new yN(this._exit||this._groups.map(Sj),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof yN))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=t[a];return new yN(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Mj);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new yN(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=hj(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Tj:Pj:"function"==typeof t?n.local?Rj:Ij:n.local?Nj:jj)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Lj:"function"==typeof t?Bj:zj)(e,t,null==n?"":n)):Vj(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Fj:"function"==typeof t?Hj:qj)(e,t)):this.node()[e]},classed:function(e,t){var n=Wj(e+"");if(arguments.length<2){for(var r=Uj(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?Yj:t?Qj:Xj)(n,t))},text:function(e){return arguments.length?this.each(null==e?Zj:("function"==typeof e?tN:eN)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?nN:("function"==typeof e?iN:rN)(e)):this.node().innerHTML},raise:function(){return this.each(oN)},lower:function(){return this.each(sN)},append:function(e){var t="function"==typeof e?e:pj(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:pj(e),r=null==t?aN:"function"==typeof t?t:gj(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(lN)},clone:function(e){return this.select(e?uN:cN)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=hN(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?fN:dN,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?gN:mN)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};var _N=.7,ON=1/_N,EN="\\s*([+-]?\\d+)\\s*",AN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",MN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PN=/^#([0-9a-f]{3,8})$/,TN=new RegExp("^rgb\\("+[EN,EN,EN]+"\\)$"),jN=new RegExp("^rgb\\("+[MN,MN,MN]+"\\)$"),NN=new RegExp("^rgba\\("+[EN,EN,EN,AN]+"\\)$"),IN=new RegExp("^rgba\\("+[MN,MN,MN,AN]+"\\)$"),RN=new RegExp("^hsl\\("+[AN,MN,MN]+"\\)$"),DN=new RegExp("^hsla\\("+[AN,MN,MN,AN]+"\\)$"),LN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function zN(){return this.rgb().formatHex()}function BN(){return this.rgb().formatRgb()}function VN(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=PN.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?FN(t):3===n?new UN(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?qN(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?qN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=TN.exec(e))?new UN(t[1],t[2],t[3],1):(t=jN.exec(e))?new UN(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=NN.exec(e))?qN(t[1],t[2],t[3],t[4]):(t=IN.exec(e))?qN(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=RN.exec(e))?QN(t[1],t[2]/100,t[3]/100,1):(t=DN.exec(e))?QN(t[1],t[2]/100,t[3]/100,t[4]):LN.hasOwnProperty(e)?FN(LN[e]):"transparent"===e?new UN(NaN,NaN,NaN,0):null}function FN(e){return new UN(e>>16&255,e>>8&255,255&e,1)}function qN(e,t,n,r){return r<=0&&(e=t=n=NaN),new UN(e,t,n,r)}function HN(e){return e instanceof CN||(e=VN(e)),e?new UN((e=e.rgb()).r,e.g,e.b,e.opacity):new UN}function WN(e,t,n,r){return 1===arguments.length?HN(e):new UN(e,t,n,null==r?1:r)}function UN(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function JN(){return"#"+GN(this.r)+GN(this.g)+GN(this.b)}function KN(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function GN(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function QN(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new YN(e,t,n,r)}function XN(e){if(e instanceof YN)return new YN(e.h,e.s,e.l,e.opacity);if(e instanceof CN||(e=VN(e)),!e)return new YN;if(e instanceof YN)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new YN(s,a,l,e.opacity)}function YN(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function ZN(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}kN(CN,VN,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:zN,formatHex:zN,formatHsl:function(){return XN(this).formatHsl()},formatRgb:BN,toString:BN}),kN(UN,WN,SN(CN,{brighter:function(e){return e=null==e?ON:Math.pow(ON,e),new UN(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?_N:Math.pow(_N,e),new UN(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JN,formatHex:JN,formatRgb:KN,toString:KN})),kN(YN,(function(e,t,n,r){return 1===arguments.length?XN(e):new YN(e,t,n,null==r?1:r)}),SN(CN,{brighter:function(e){return e=null==e?ON:Math.pow(ON,e),new YN(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?_N:Math.pow(_N,e),new YN(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new UN(ZN(e>=240?e-240:e+120,i,r),ZN(e,i,r),ZN(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var eI=e=>()=>e;function tI(e){return 1==(e=+e)?nI:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):eI(isNaN(t)?n:t)}}function nI(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):eI(isNaN(e)?t:e)}var rI=function e(t){var n=tI(t);function r(e,t){var r=n((e=WN(e)).r,(t=WN(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),s=nI(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=s(t),e+""}}return r.gamma=e,r}(1);function iI(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var oI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sI=new RegExp(oI.source,"g");function aI(e,t){var n,r,i,o=oI.lastIndex=sI.lastIndex=0,s=-1,a=[],l=[];for(e+="",t+="";(n=oI.exec(e))&&(r=sI.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:iI(n,r)})),o=sI.lastIndex;return o<t.length&&(i=t.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)a[(n=l[r]).i]=n.x(e);return a.join("")})}var lI,cI=180/Math.PI,uI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hI(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*cI,skewX:Math.atan(l)*cI,scaleX:s,scaleY:a}}function dI(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,s){var a=[],l=[];return o=e(o),s=e(s),function(e,r,i,o,s,a){if(e!==i||r!==o){var l=s.push("translate(",null,t,null,n);a.push({i:l-4,x:iI(e,i)},{i:l-2,x:iI(r,o)})}else(i||o)&&s.push("translate("+i+t+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:iI(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,s.rotate,a,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:iI(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,s.skewX,a,l),function(e,t,n,r,o,s){if(e!==n||t!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:iI(e,n)},{i:a-2,x:iI(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(e){for(var t,n=-1,r=l.length;++n<r;)a[(t=l[n]).i]=t.x(e);return a.join("")}}}var fI=dI((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uI:hI(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),pI=dI((function(e){return null==e?uI:(lI||(lI=document.createElementNS("http://www.w3.org/2000/svg","g")),lI.setAttribute("transform",e),(e=lI.transform.baseVal.consolidate())?hI((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):uI)}),", ",")",")");function mI(e){return((e=Math.exp(e))+1/e)/2}var gI=function e(t,n,r){function i(e,i){var o,s,a=e[0],l=e[1],c=e[2],u=i[0],h=i[1],d=i[2],f=u-a,p=h-l,m=f*f+p*p;if(m<1e-12)s=Math.log(d/c)/t,o=function(e){return[a+e*f,l+e*p,c*Math.exp(t*e*s)]};else{var g=Math.sqrt(m),v=(d*d-c*c+r*m)/(2*c*n*g),y=(d*d-c*c-r*m)/(2*d*n*g),w=Math.log(Math.sqrt(v*v+1)-v),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-w)/t,o=function(e){var r,i=e*s,o=mI(w),u=c/(n*g)*(o*(r=t*i+w,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[a+u*f,l+u*p,c*o/mI(t*i+w)]}}return o.duration=1e3*s*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4),vI="http://www.w3.org/1999/xhtml",yI={svg:"http://www.w3.org/2000/svg",xhtml:vI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wI(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),yI.hasOwnProperty(t)?{space:yI[t],local:e}:e}function bI(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vI&&t.documentElement.namespaceURI===vI?t.createElement(e):t.createElementNS(n,e)}}function xI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $I(e){var t=wI(e);return(t.local?xI:bI)(t)}function kI(){}function SI(e){return null==e?kI:function(){return this.querySelector(e)}}function CI(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function _I(){return[]}function OI(e){return null==e?_I:function(){return this.querySelectorAll(e)}}function EI(e){return function(){return this.matches(e)}}function AI(e){return function(t){return t.matches(e)}}var MI=Array.prototype.find;function PI(){return this.firstElementChild}var TI=Array.prototype.filter;function jI(){return Array.from(this.children)}function NI(e){return new Array(e.length)}function II(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function RI(e){return function(){return e}}function DI(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new II(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function LI(e,t,n,r,i,o,s){var a,l,c,u=new Map,h=t.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=t[a])&&(f[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<d;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new II(e,o[a]);for(a=0;a<h;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function zI(e){return e.__data__}function BI(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function VI(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function FI(e){return function(){this.removeAttribute(e)}}function qI(e){return function(){this.removeAttributeNS(e.space,e.local)}}function HI(e,t){return function(){this.setAttribute(e,t)}}function WI(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function UI(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function JI(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function KI(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function GI(e){return function(){this.style.removeProperty(e)}}function QI(e,t,n){return function(){this.style.setProperty(e,t,n)}}function XI(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function YI(e,t){return e.style.getPropertyValue(t)||KI(e).getComputedStyle(e,null).getPropertyValue(t)}function ZI(e){return function(){delete this[e]}}function eR(e,t){return function(){this[e]=t}}function tR(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function nR(e){return e.trim().split(/^|\s+/)}function rR(e){return e.classList||new iR(e)}function iR(e){this._node=e,this._names=nR(e.getAttribute("class")||"")}function oR(e,t){for(var n=rR(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function sR(e,t){for(var n=rR(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function aR(e){return function(){oR(this,e)}}function lR(e){return function(){sR(this,e)}}function cR(e,t){return function(){(t.apply(this,arguments)?oR:sR)(this,e)}}function uR(){this.textContent=""}function hR(e){return function(){this.textContent=e}}function dR(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function fR(){this.innerHTML=""}function pR(e){return function(){this.innerHTML=e}}function mR(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function gR(){this.nextSibling&&this.parentNode.appendChild(this)}function vR(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yR(){return null}function wR(){var e=this.parentNode;e&&e.removeChild(this)}function bR(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xR(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $R(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function kR(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function SR(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function CR(e,t,n){var r=KI(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function _R(e,t){return function(){return CR(this,e,t)}}function OR(e,t){return function(){return CR(this,e,t.apply(this,arguments))}}II.prototype={constructor:II,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},iR.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ER=[null];function AR(e,t){this._groups=e,this._parents=t}function MR(){return new AR([[document.documentElement]],ER)}function PR(e){return"string"==typeof e?new AR([[document.querySelector(e)]],[document.documentElement]):new AR([[e]],ER)}function TR(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}AR.prototype=MR.prototype={constructor:AR,select:function(e){"function"!=typeof e&&(e=SI(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new AR(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return CI(e.apply(this,arguments))}}(e):OI(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new AR(r,i)},selectChild:function(e){return this.select(null==e?PI:function(e){return function(){return MI.call(this.children,e)}}("function"==typeof e?e:AI(e)))},selectChildren:function(e){return this.selectAll(null==e?jI:function(e){return function(){return TI.call(this.children,e)}}("function"==typeof e?e:AI(e)))},filter:function(e){"function"!=typeof e&&(e=EI(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new AR(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,zI);var n=t?LI:DI,r=this._parents,i=this._groups;"function"!=typeof e&&(e=RI(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],d=h.length,f=BI(e.call(u,u&&u.__data__,c,r)),p=f.length,m=a[c]=new Array(p),g=s[c]=new Array(p),v=l[c]=new Array(d);n(u,h,m,g,v,f,t);for(var y,w,b=0,x=0;b<p;++b)if(y=m[b]){for(b>=x&&(x=b+1);!(w=g[x])&&++x<p;);y._next=w||null}}return(s=new AR(s,r))._enter=a,s._exit=l,s},enter:function(){return new AR(this._enter||this._groups.map(NI),this._parents)},exit:function(){return new AR(this._exit||this._groups.map(NI),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],h=r[l],d=u.length,f=a[l]=new Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)a[l]=n[l];return new AR(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=VI);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new AR(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=wI(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?qI:FI:"function"==typeof t?n.local?JI:UI:n.local?WI:HI)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?GI:"function"==typeof t?XI:QI)(e,t,null==n?"":n)):YI(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ZI:"function"==typeof t?tR:eR)(e,t)):this.node()[e]},classed:function(e,t){var n=nR(e+"");if(arguments.length<2){for(var r=rR(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?cR:t?aR:lR)(n,t))},text:function(e){return arguments.length?this.each(null==e?uR:("function"==typeof e?dR:hR)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?fR:("function"==typeof e?mR:pR)(e)):this.node().innerHTML},raise:function(){return this.each(gR)},lower:function(){return this.each(vR)},append:function(e){var t="function"==typeof e?e:$I(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:$I(e),r=null==t?yR:"function"==typeof t?t:SI(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(wR)},clone:function(e){return this.select(e?xR:bR)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=$R(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?SR:kR,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?OR:_R)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};var jR,NR,IR=0,RR=0,DR=0,LR=0,zR=0,BR=0,VR="object"==typeof performance&&performance.now?performance:Date,FR="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function qR(){return zR||(FR(HR),zR=VR.now()+BR)}function HR(){zR=0}function WR(){this._call=this._time=this._next=null}function UR(e,t,n){var r=new WR;return r.restart(e,t,n),r}function JR(){zR=(LR=VR.now())+BR,IR=RR=0;try{!function(){qR(),++IR;for(var e,t=jR;t;)(e=zR-t._time)>=0&&t._call.call(void 0,e),t=t._next;--IR}()}finally{IR=0,function(){var e,t,n=jR,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:jR=t);NR=e,GR(r)}(),zR=0}}function KR(){var e=VR.now(),t=e-LR;t>1e3&&(BR-=t,LR=e)}function GR(e){IR||(RR&&(RR=clearTimeout(RR)),e-zR>24?(e<1/0&&(RR=setTimeout(JR,e-VR.now()-BR)),DR&&(DR=clearInterval(DR))):(DR||(LR=VR.now(),DR=setInterval(KR,1e3)),IR=1,FR(JR)))}function QR(e,t,n){var r=new WR;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r}WR.prototype=UR.prototype={constructor:WR,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?qR():+n)+(null==t?0:+t),this._next||NR===this||(NR?NR._next=this:jR=this,NR=this),this._call=e,this._time=n,GR()},stop:function(){this._call&&(this._call=null,this._time=1/0,GR())}};var XR=ij("start","end","cancel","interrupt"),YR=[];function ZR(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=e&&s(e-n.delay)}function s(o){var c,u,h,d;if(1!==n.state)return l();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return QR(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[c]):+c<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[c])}if(QR((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,u=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++u]=d);r.length=u+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(l),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=UR(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:XR,tween:YR,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function eD(e,t){var n=nD(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function tD(e,t){var n=nD(e,t);if(n.state>3)throw new Error("too late; already running");return n}function nD(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function rD(e,t){var n,r,i,o=e.__transition,s=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete e.__transition}}function iD(e,t){var n,r;return function(){var i=tD(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function oD(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=tD(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function sD(e,t,n){var r=e._id;return e.each((function(){var e=tD(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return nD(e,r).value[t]}}function aD(e,t){var n;return("number"==typeof t?iI:t instanceof VN?rI:(n=VN(t))?(t=n,rI):aI)(e,t)}function lD(e){return function(){this.removeAttribute(e)}}function cD(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uD(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function hD(e,t,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function dD(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(e))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttribute(e)}}function fD(e,t,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(e.space,e.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=t(r=s,l));this.removeAttributeNS(e.space,e.local)}}function pD(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function mD(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gD(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&mD(e,i)),n}return i._value=t,i}function vD(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&pD(e,i)),n}return i._value=t,i}function yD(e,t){return function(){eD(this,e).delay=+t.apply(this,arguments)}}function wD(e,t){return t=+t,function(){eD(this,e).delay=t}}function bD(e,t){return function(){tD(this,e).duration=+t.apply(this,arguments)}}function xD(e,t){return t=+t,function(){tD(this,e).duration=t}}function $D(e,t){if("function"!=typeof t)throw new Error;return function(){tD(this,e).ease=t}}function kD(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?eD:tD;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}var SD=MR.prototype.constructor;function CD(e){return function(){this.style.removeProperty(e)}}function _D(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function OD(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&_D(e,o,n)),r}return o._value=t,o}function ED(e){return function(t){this.textContent=e.call(this,t)}}function AD(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&ED(r)),t}return r._value=e,r}var MD=0;function PD(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function TD(){return++MD}var jD=MR.prototype;PD.prototype={constructor:PD,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=SI(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,c=r[s],u=c.length,h=o[s]=new Array(u),d=0;d<u;++d)(a=c[d])&&(l=e.call(a,a.__data__,d,c))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,ZR(h[d],t,n,d,h,nD(a,n)));return new PD(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=OI(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,c=r[a],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var d,f=e.call(l,l.__data__,h,c),p=nD(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&ZR(d,t,n,m,f,p);o.push(f),s.push(l)}return new PD(o,s,t,n)},selectChild:jD.selectChild,selectChildren:jD.selectChildren,filter:function(e){"function"!=typeof e&&(e=EI(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new PD(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,c=t[a],u=n[a],h=c.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=c[f]||u[f])&&(d[f]=l);for(;a<r;++a)s[a]=t[a];return new PD(s,this._parents,this._name,this._id)},selection:function(){return new SD(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=TD(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)if(s=a[c]){var u=nD(s,t);ZR(s,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new PD(r,this._parents,e,n)},call:jD.call,nodes:jD.nodes,node:jD.node,size:jD.size,empty:jD.empty,each:jD.each,on:function(e,t){var n=this._id;return arguments.length<2?nD(this.node(),n).on.on(e):this.each(kD(n,e,t))},attr:function(e,t){var n=wI(e),r="transform"===n?pI:aD;return this.attrTween(e,"function"==typeof t?(n.local?fD:dD)(n,r,sD(this,"attr."+e,t)):null==t?(n.local?cD:lD)(n):(n.local?hD:uD)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=wI(e);return this.tween(n,(r.local?gD:vD)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?fI:aD;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=YI(this,e),s=(this.style.removeProperty(e),YI(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,CD(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=YI(this,e),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(e),l=a=YI(this,e)),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}(e,r,sD(this,"style."+e,t))).each(function(e,t){var n,r,i,o,s="style."+t,a="end."+s;return function(){var l=tD(this,e),c=l.on,u=null==l.value[s]?o||(o=CD(t)):void 0;c===n&&i===u||(r=(n=c).copy()).on(a,i=u),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=YI(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,OD(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(sD(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,AD(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=nD(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?iD:oD)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?yD:wD)(t,e)):nD(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?bD:xD)(t,e)):nD(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each($D(t,e)):nD(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;tD(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0==--i&&o()}};n.each((function(){var n=tD(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:jD[Symbol.iterator]};var ND={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function ID(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}MR.prototype.interrupt=function(e){return this.each((function(){rD(this,e)}))},MR.prototype.transition=function(e){var t,n;e instanceof PD?(t=e._id,e=e._name):(t=TD(),(n=ND).time=qR(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,c=0;c<l;++c)(s=a[c])&&ZR(s,e,t,c,a,n||ID(s,t));return new PD(r,this._parents,e,t)};var RD=e=>()=>e;function DD(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function LD(e,t,n){this.k=e,this.x=t,this.y=n}LD.prototype={constructor:LD,scale:function(e){return 1===e?this:new LD(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new LD(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zD=new LD(1,0,0);function BD(e){e.stopImmediatePropagation()}function VD(e){e.preventDefault(),e.stopImmediatePropagation()}function FD(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function qD(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function HD(){return this.__zoom||zD}function WD(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function UD(){return navigator.maxTouchPoints||"ontouchstart"in this}function JD(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}LD.prototype;const{window:KD}=je;function GD(e,t,n){const r=e.slice();return r[55]=t[n],r}function QD(e,t,n){const r=e.slice();return r[58]=t[n],r}function XD(e,t,n){const r=e.slice();return r[61]=t[n],r}function YD(e,t,n){const r=e.slice();return r[64]=t[n],r}function ZD(e){let t,n,r,i,s,a,l,c,u,h,d,f,p,m,g,v,y,w,b,x,$,S,C,E,j,R,L,z,V,F,q,H,W,U,J,K,G,Q,X,Y,Z,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he,de,fe,pe,me,ge,ve,ye,we,be,xe,$e,ke=[],Se=new Map,Ce=[],_e=new Map;i=new Nt({props:{kind:e[1].theme.grid}});let Pe=e[6];const Te=e=>e[64].id;for(let t=0;t<Pe.length;t+=1){let n=YD(e,Pe,t),r=Te(n);Se.set(r,ke[t]=rL(r,n))}let je=e[8]&&iL(e),De=e[3]&&oL(e),Le=e[9]&&sL(e),ze=e[1].jsonupload&&dL(e),qe=e[1].jsondownload&&fL(),He=e[1].exportsvg&&pL(),We=e[1].exportcytoscape&&mL(),Ue=e[1]&&gL(e),Je=e[7];const Ke=e=>e[55][0];for(let t=0;t<Je.length;t+=1){let n=GD(e,Je,t),r=Ke(n);_e.set(r,Ce[t]=wL(r,n))}return{c(){t=A("div"),n=M("svg"),r=M("g"),Be(i.$$.fragment);for(let e=0;e<ke.length;e+=1)ke[e].c();a=T(),je&&je.c(),l=T(),De&&De.c(),c=T(),Le&&Le.c(),u=T(),h=A("section"),d=A("sl-button-group"),f=A("sl-dropdown"),p=A("sl-button"),p.innerHTML='Menu\n\t\t\t\t\t<sl-icon slot="prefix" name="list"></sl-icon>',m=T(),g=A("sl-menu"),ze&&ze.c(),v=T(),qe&&qe.c(),y=T(),w=A("sl-divider"),b=T(),x=A("sl-menu-item"),$=P("Undo (⌘-Z or ⌃Z)\n\t\t\t\t\t\t"),S=A("sl-icon"),E=T(),j=A("sl-menu-item"),R=P("Redo (⇧-⌘-Z or ⇧⌃Z)\n\t\t\t\t\t\t"),L=A("sl-icon"),V=T(),F=A("sl-menu-item"),q=P("Clear"),W=T(),U=A("sl-divider"),J=T(),K=A("sl-menu-label"),K.textContent="Export as:",G=T(),He&&He.c(),Q=T(),We&&We.c(),X=T(),Y=A("sl-divider"),Z=T(),ee=A("sl-menu-label"),ee.textContent="Switch Theme To",te=T(),ne=A("sl-menu-item"),re=P("Classic"),oe=T(),se=A("sl-menu-item"),ae=P("Elegant"),ce=T(),ue=A("sl-menu-item"),he=P("Foresight"),fe=T(),pe=A("sl-menu-item"),me=P("Minimal"),ve=T(),Ue&&Ue.c(),ye=T(),we=A("sl-select");for(let e=0;e<Ce.length;e+=1)Ce[e].c();D(n,"tabindex","0"),D(n,"xmlns","http://www.w3.org/2000/svg"),D(n,"viewBox","0 0 1000 1000"),D(n,"style",s=`background-color: ${e[1].theme.bgfill}`),D(n,"class","svelte-12uwooi"),D(t,"class","container svelte-12uwooi"),B(p,"slot","trigger"),B(p,"caret",""),B(S,"slot","prefix"),B(S,"name","arrow-counterclockwise"),B(x,"value","undo"),B(x,"disabled",C=e[2].current<=0),B(L,"slot","prefix"),B(L,"name","arrow-clockwise"),B(j,"value","redo"),B(j,"disabled",z=void 0===e[2].versions[e[2].current+1]),B(F,"value","clear"),B(F,"disabled",H=0==e[1].items.length),B(ne,"value","theme.classic"),B(ne,"checked",ie="classic"===e[1].theme.name),B(se,"value","theme.elegant"),B(se,"checked",le="elegant"===e[1].theme.name),B(ue,"value","theme.foresight"),B(ue,"checked",de="foresight"===e[1].theme.name),B(pe,"value","theme.minimal"),B(pe,"checked",ge="minimal"===e[1].theme.name),B(we,"placeholder","Highlight by Tag"),B(we,"clearable",""),B(we,"class","svelte-12uwooi"),D(h,"class","globalmenu svelte-12uwooi")},m(o,s){_(o,t,s),k(t,n),k(n,r),Ve(i,r,null);for(let e=0;e<ke.length;e+=1)ke[e].m(r,null);e[38](r),e[39](n),k(t,a),je&&je.m(t,null),k(t,l),De&&De.m(t,null),k(t,c),Le&&Le.m(t,null),_(o,u,s),_(o,h,s),k(h,d),k(d,f),k(f,p),k(f,m),k(f,g),ze&&ze.m(g,null),k(g,v),qe&&qe.m(g,null),k(g,y),k(g,w),k(g,b),k(g,x),k(x,$),k(x,S),k(g,E),k(g,j),k(j,R),k(j,L),k(g,V),k(g,F),k(F,q),k(g,W),k(g,U),k(g,J),k(g,K),k(g,G),He&&He.m(g,null),k(g,Q),We&&We.m(g,null),k(g,X),k(g,Y),k(g,Z),k(g,ee),k(g,te),k(g,ne),k(ne,re),k(g,oe),k(g,se),k(se,ae),k(g,ce),k(g,ue),k(ue,he),k(g,fe),k(g,pe),k(pe,me),k(d,ve),Ue&&Ue.m(d,null),k(d,ye),k(d,we);for(let e=0;e<Ce.length;e+=1)Ce[e].m(we,null);be=!0,xe||($e=[N(n,"mousedown",e[27]),N(n,"mousemove",e[20]),N(n,"mouseup",e[26]),N(n,"contextmenu",I(e[23])),N(n,"keydown",e[25]),N(f,"sl-select",e[32]),N(we,"sl-change",e[47])],xe=!0)},p(e,o){const a={};2&o[0]&&(a.kind=e[1].theme.grid),i.$set(a),285705290&o[0]&&(Pe=e[6],Oe(),ke=Re(ke,o,Te,1,e,Pe,Se,r,Ie,rL,null,YD),Ee()),(!be||2&o[0]&&s!==(s=`background-color: ${e[1].theme.bgfill}`))&&D(n,"style",s),e[8]?je?je.p(e,o):(je=iL(e),je.c(),je.m(t,l)):je&&(je.d(1),je=null),e[3]?De?(De.p(e,o),8&o[0]&&Ae(De,1)):(De=oL(e),De.c(),Ae(De,1),De.m(t,c)):De&&(Oe(),Me(De,1,1,(()=>{De=null})),Ee()),e[9]?Le?Le.p(e,o):(Le=sL(e),Le.c(),Le.m(t,null)):Le&&(Le.d(1),Le=null),e[1].jsonupload?ze?ze.p(e,o):(ze=dL(e),ze.c(),ze.m(g,v)):ze&&(ze.d(1),ze=null),e[1].jsondownload?qe||(qe=fL(),qe.c(),qe.m(g,y)):qe&&(qe.d(1),qe=null),(!be||4&o[0]&&C!==(C=e[2].current<=0))&&B(x,"disabled",C),(!be||4&o[0]&&z!==(z=void 0===e[2].versions[e[2].current+1]))&&B(j,"disabled",z),(!be||2&o[0]&&H!==(H=0==e[1].items.length))&&B(F,"disabled",H),e[1].exportsvg?He||(He=pL(),He.c(),He.m(g,Q)):He&&(He.d(1),He=null),e[1].exportcytoscape?We||(We=mL(),We.c(),We.m(g,X)):We&&(We.d(1),We=null),(!be||2&o[0]&&ie!==(ie="classic"===e[1].theme.name))&&B(ne,"checked",ie),(!be||2&o[0]&&le!==(le="elegant"===e[1].theme.name))&&B(se,"checked",le),(!be||2&o[0]&&de!==(de="foresight"===e[1].theme.name))&&B(ue,"checked",de),(!be||2&o[0]&&ge!==(ge="minimal"===e[1].theme.name))&&B(pe,"checked",ge),e[1]?Ue?Ue.p(e,o):(Ue=gL(e),Ue.c(),Ue.m(d,ye)):Ue&&(Ue.d(1),Ue=null),128&o[0]&&(Je=e[7],Ce=Re(Ce,o,Ke,1,e,Je,_e,we,Ne,wL,null,GD))},i(e){if(!be){Ae(i.$$.fragment,e);for(let e=0;e<Pe.length;e+=1)Ae(ke[e]);Ae(De),be=!0}},o(e){Me(i.$$.fragment,e);for(let e=0;e<ke.length;e+=1)Me(ke[e]);Me(De),be=!1},d(n){n&&O(t),Fe(i);for(let e=0;e<ke.length;e+=1)ke[e].d();e[38](null),e[39](null),je&&je.d(),De&&De.d(),Le&&Le.d(),n&&O(u),n&&O(h),ze&&ze.d(),qe&&qe.d(),He&&He.d(),We&&We.d(),Ue&&Ue.d();for(let e=0;e<Ce.length;e+=1)Ce[e].d();xe=!1,o($e)}}}function eL(e){let t,n;return t=new Lt({props:{item:e[64],theme:e[1].theme,isSelected:e[64].id===e[3]?.id}}),t.$on("itemMouseDown",e[16]),t.$on("itemMouseUp",e[17]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};64&n[0]&&(r.item=e[64]),2&n[0]&&(r.theme=e[1].theme),72&n[0]&&(r.isSelected=e[64].id===e[3]?.id),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function tL(e){let t,n;return t=new kt({props:{item:e[64],graph:e[1],isSelected:e[64].id===e[3]?.id}}),t.$on("itemMouseDown",e[16]),t.$on("itemMouseUp",e[17]),t.$on("edgeChanged",e[28]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};64&n[0]&&(r.item=e[64]),2&n[0]&&(r.graph=e[1]),72&n[0]&&(r.isSelected=e[64].id===e[3]?.id),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function nL(e){let t,n;return t=new gt({props:{item:e[64],graph:e[1],isSelected:e[64].id===e[3]?.id,theme:e[1].theme,isHighlighted:e[10].includes(e[64].id),isHidden:e[10].length>0&&!e[10].includes(e[64].id)}}),t.$on("itemMouseDown",e[16]),t.$on("itemMouseUp",e[17]),t.$on("itemBadgeClick",e[18]),t.$on("nodeChanged",xL),t.$on("createnode",e[24]),t.$on("itemcontrolmousedown",e[15]),{c(){Be(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};64&n[0]&&(r.item=e[64]),2&n[0]&&(r.graph=e[1]),72&n[0]&&(r.isSelected=e[64].id===e[3]?.id),2&n[0]&&(r.theme=e[1].theme),1088&n[0]&&(r.isHighlighted=e[10].includes(e[64].id)),1088&n[0]&&(r.isHidden=e[10].length>0&&!e[10].includes(e[64].id)),t.$set(r)},i(e){n||(Ae(t.$$.fragment,e),n=!0)},o(e){Me(t.$$.fragment,e),n=!1},d(e){Fe(t,e)}}}function rL(e,t){let n,r,i,o,s;const a=[nL,tL,eL],l=[];function c(e,t){return"node"===e[64].kind?0:"edge"===e[64].kind?1:"note"===e[64].kind?2:-1}return~(r=c(t))&&(i=l[r]=a[r](t)),{key:e,first:null,c(){n=j(),i&&i.c(),o=j(),this.first=n},m(e,t){_(e,n,t),~r&&l[r].m(e,t),_(e,o,t),s=!0},p(e,n){let s=r;r=c(t=e),r===s?~r&&l[r].p(t,n):(i&&(Oe(),Me(l[s],1,1,(()=>{l[s]=null})),Ee()),~r?(i=l[r],i?i.p(t,n):(i=l[r]=a[r](t),i.c()),Ae(i,1),i.m(o.parentNode,o)):i=null)},i(e){s||(Ae(i),s=!0)},o(e){Me(i),s=!1},d(e){e&&O(n),~r&&l[r].d(e),e&&O(o)}}}function iL(t){let n,r,i,o,s;return{c(){n=A("div"),r=P("Please add comments only in the unzoomed, unpanned view.\n\t\t\t\t"),i=A("button"),i.textContent="Reset Zoom",D(n,"class","alert svelte-12uwooi")},m(e,a){_(e,n,a),k(n,r),k(n,i),o||(s=N(i,"click",t[12]),o=!0)},p:e,d(e){e&&O(n),o=!1,s()}}}function oL(e){let t,n,r;return n=new nj({props:{selectedItem:e[3],graph:e[1]}}),n.$on("graphchanged",e[40]),{c(){t=A("section"),Be(n.$$.fragment),D(t,"class","sidepanel svelte-12uwooi")},m(e,i){_(e,t,i),Ve(n,t,null),r=!0},p(e,t){const r={};8&t[0]&&(r.selectedItem=e[3]),2&t[0]&&(r.graph=e[1]),n.$set(r)},i(e){r||(Ae(n.$$.fragment,e),r=!0)},o(e){Me(n.$$.fragment,e),r=!1},d(e){e&&O(t),Fe(n)}}}function sL(e){let t,n;function r(e,t){return e[3]?lL:aL}let i=r(e),o=i(e);return{c(){t=A("sl-menu"),o.c(),B(t,"class","contextmenu svelte-12uwooi"),B(t,"style",n=`left: ${e[9][0]}px; top: ${e[9][1]}px;`)},m(e,n){_(e,t,n),o.m(t,null)},p(e,s){i===(i=r(e))&&o?o.p(e,s):(o.d(1),o=i(e),o&&(o.c(),o.m(t,null))),512&s[0]&&n!==(n=`left: ${e[9][0]}px; top: ${e[9][1]}px;`)&&B(t,"style",n)},d(e){e&&O(t),o.d()}}}function aL(t){let n,r,i,s,a,l,c;return{c(){n=A("sl-menu-item"),n.textContent="Create new Node",r=T(),i=A("sl-menu-item"),i.textContent="Create new Text Note",s=T(),a=A("sl-menu-item"),a.textContent="Clear Graph",B(n,"value","createnode"),B(i,"value","createnote"),B(a,"value","cleargraph")},m(e,o){_(e,n,o),_(e,r,o),_(e,i,o),_(e,s,o),_(e,a,o),l||(c=[N(n,"click",t[21]),N(i,"click",t[22]),N(a,"click",t[13])],l=!0)},p:e,d(e){e&&O(n),e&&O(r),e&&O(i),e&&O(s),e&&O(a),l=!1,o(c)}}}function lL(e){let t,n,r,i,o,s,a,l=e[3].label+"",c=["node","edge"].includes(e[3].kind),u="node"===e[3].kind&&cL(e),h=c&&hL();return{c(){u&&u.c(),t=T(),n=A("sl-menu-item"),r=P('Delete "'),i=P(l),o=P('" '),h&&h.c(),B(n,"value","deleteitem")},m(l,c){u&&u.m(l,c),_(l,t,c),_(l,n,c),k(n,r),k(n,i),k(n,o),h&&h.m(n,null),s||(a=N(n,"click",e[44]),s=!0)},p(e,r){"node"===e[3].kind?u?u.p(e,r):(u=cL(e),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),8&r[0]&&l!==(l=e[3].label+"")&&V(i,l),8&r[0]&&(c=["node","edge"].includes(e[3].kind)),c?h||(h=hL(),h.c(),h.m(n,null)):h&&(h.d(1),h=null)},d(e){u&&u.d(e),e&&O(t),e&&O(n),h&&h.d(),s=!1,a()}}}function cL(e){let t,n,r,i,s,a,l,c,u,h=e[3].label+"",d=e[3].parent&&uL(e);return{c(){t=A("sl-menu-item"),t.textContent="Create child node",n=T(),d&&d.c(),r=T(),i=A("sl-menu-item"),s=P('Delete "'),a=P(h),l=P('" including\n\t\t\t\t\t\t\tdependents'),B(t,"value","createchildnode"),B(i,"value","deleteitemwithdependents")},m(o,h){_(o,t,h),_(o,n,h),d&&d.m(o,h),_(o,r,h),_(o,i,h),k(i,s),k(i,a),k(i,l),c||(u=[N(t,"click",e[41]),N(i,"click",e[43])],c=!0)},p(e,t){e[3].parent?d?d.p(e,t):(d=uL(e),d.c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),8&t[0]&&h!==(h=e[3].label+"")&&V(a,h)},d(e){e&&O(t),e&&O(n),d&&d.d(e),e&&O(r),e&&O(i),c=!1,o(u)}}}function uL(e){let t,n,r,i,o,s,a,l,c=e[3].label+"",u=We(e[3].parent,e[1]).label+"";return{c(){t=A("sl-menu-item"),n=P('Detach "'),r=P(c),i=P('" from\n\t\t\t\t\t\t\t\t"'),o=P(u),s=P('"'),B(t,"value","detach")},m(c,u){_(c,t,u),k(t,n),k(t,r),k(t,i),k(t,o),k(t,s),a||(l=N(t,"click",e[42]),a=!0)},p(e,t){8&t[0]&&c!==(c=e[3].label+"")&&V(r,c),10&t[0]&&u!==(u=We(e[3].parent,e[1]).label+"")&&V(o,u)},d(e){e&&O(t),a=!1,l()}}}function hL(e){let t;return{c(){t=P("leaving orphans")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function dL(t){let n,r,i,o,s,a;return{c(){n=A("sl-menu-item"),r=A("input"),i=T(),o=A("sl-icon"),D(r,"type","file"),D(r,"name","uploader"),D(r,"accept",".graph"),B(o,"slot","prefix"),B(o,"name","folder2-open"),B(n,"value","openfile")},m(e,l){_(e,n,l),k(n,r),k(n,i),k(n,o),s||(a=N(r,"change",t[45]),s=!0)},p:e,d(e){e&&O(n),s=!1,a()}}}function fL(e){let t;return{c(){t=A("sl-menu-item"),t.innerHTML='Save as .graph file...\n\t\t\t\t\t\t\t<sl-icon slot="prefix" name="download"></sl-icon>',B(t,"value","savefile")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function pL(e){let t;return{c(){t=A("sl-menu-item"),t.textContent="SVG",B(t,"value","export.svg")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function mL(e){let t;return{c(){t=A("sl-menu-item"),t.textContent="Cytoscape JSON",B(t,"value","export.cytoscape")},m(e,n){_(e,t,n)},d(e){e&&O(t)}}}function gL(e){let t,n,r,i=[],o=new Map,s=e[11];const a=e=>e[61].id;for(let t=0;t<s.length;t+=1){let n=XD(e,s,t),r=a(n);o.set(r,i[t]=vL(r,n))}return{c(){t=A("fluent-combobox");for(let e=0;e<i.length;e+=1)i[e].c();B(t,"autocomplete","both"),B(t,"placeholder","Jump to node")},m(o,s){_(o,t,s);for(let e=0;e<i.length;e+=1)i[e].m(t,null);n||(r=N(t,"change",e[46]),n=!0)},p(e,n){2048&n[0]&&(s=e[11],i=Re(i,n,a,1,e,s,o,t,Ne,vL,null,XD))},d(e){e&&O(t);for(let e=0;e<i.length;e+=1)i[e].d();n=!1,r()}}}function vL(e,t){let n,r,i,o=t[61].label+"";return{key:e,first:null,c(){n=A("fluent-option"),r=P(o),B(n,"value",i=t[61].id),this.first=n},m(e,t){_(e,n,t),k(n,r)},p(e,s){t=e,2048&s[0]&&o!==(o=t[61].label+"")&&V(r,o),2048&s[0]&&i!==(i=t[61].id)&&B(n,"value",i)},d(e){e&&O(n)}}}function yL(e,t){let n,r,i,o=t[58].label+"";return{key:e,first:null,c(){n=A("sl-menu-item"),r=P(o),B(n,"value",i=t[58].value),this.first=n},m(e,t){_(e,n,t),k(n,r)},p(e,s){t=e,128&s[0]&&o!==(o=t[58].label+"")&&V(r,o),128&s[0]&&i!==(i=t[58].value)&&B(n,"value",i)},d(e){e&&O(n)}}}function wL(e,t){let n,r,i,o,s,a=t[55][0]+"",l=[],c=new Map,u=t[55][1];const h=e=>e[58].value;for(let e=0;e<u.length;e+=1){let n=QD(t,u,e),r=h(n);c.set(r,l[e]=yL(r,n))}return{key:e,first:null,c(){n=A("sl-menu-label"),r=P(a),i=T();for(let e=0;e<l.length;e+=1)l[e].c();o=T(),s=A("sl-divider"),this.first=n},m(e,t){_(e,n,t),k(n,r),_(e,i,t);for(let n=0;n<l.length;n+=1)l[n].m(e,t);_(e,o,t),_(e,s,t)},p(e,n){t=e,128&n[0]&&a!==(a=t[55][0]+"")&&V(r,a),128&n[0]&&(u=t[55][1],l=Re(l,n,h,1,t,u,c,o.parentNode,Ne,yL,o,QD))},d(e){e&&O(n),e&&O(i);for(let t=0;t<l.length;t+=1)l[t].d(e);e&&O(o),e&&O(s)}}}function bL(e){let t,n,r,i,o=e[1]&&ZD(e);return{c(){o&&o.c(),t=j()},m(s,a){o&&o.m(s,a),_(s,t,a),n=!0,r||(i=N(KD,"keydown",e[34]),r=!0)},p(e,n){e[1]?o?(o.p(e,n),2&n[0]&&Ae(o,1)):(o=ZD(e),o.c(),Ae(o,1),o.m(t.parentNode,t)):o&&(Oe(),Me(o,1,1,(()=>{o=null})),Ee())},i(e){n||(Ae(o),n=!0)},o(e){Me(o),n=!1},d(e){o&&o.d(e),e&&O(t),r=!1,i()}}}function xL(e){}function $L(e,t){let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function kL(e,t,n){let r,i,o,s,a,l,c,{graphjsonpath:u}=t,{svgForTextBBox:h}=t,{overrideOptions:d={}}=t,f={versions:[],current:-1},p=!1,m={},g=null,v=null,y=null,w=[];function b(){f.current<=0||(n(1,i=structuredClone(f.versions[f.current-1])),S(),n(2,f={versions:f.versions,current:f.current-1}))}function x(){f.current>=2||(n(1,i=structuredClone(f.versions[f.current+1])),S(),n(2,f={versions:f.versions,current:f.current+1}))}function $(e){n(2,f={versions:[...f.versions.slice(0,Math.min(f.current+1,3)),structuredClone(e)],current:f.current+1})}function k(){n(1,i.items=[],i),n(9,y=null),S(),$(i)}function S(){n(4,a),n(5,l),n(3,g),n(1,i=Ge(i,g,h)),window.overrideOptions.persistLocalStorage&&localStorage.setItem(u,JSON.stringify(i))}function C(e,t){Qe(e,i,t),$(i),n(3,g=null),S(),n(9,y=null)}function _(e,t){!function(e,t,n,r,i){let o=Ye(t);t.items.push({id:o,kind:"node",label:`New node ${o}`,desc:"",link:"",tags:[],children:[],pos:Xe(r,e,i),nodelabelfontsize:null,nodenotesfontsize:null,parent:n.id})}(e,i,t,a,l),$(i),S(),n(9,y=null)}function O(e){!function(e,t){We(e.parent,t)&&(e.parent=null)}(e,i),$(i),S(),n(9,y=null)}function E(e){let t=i.items.find((t=>"node"===t.kind&&t.label===e.value));PR(a).transition().duration(800).call(c.transform,zD.translate(500,500).scale(1.8).translate(0-t.pos.x,0-t.pos.y))}function A(e){let t=e.target.files[0],r=new FileReader;r.readAsText(t),r.onload=e=>{n(1,i=Ge(JSON.parse(e.target.result),null,h)),S()}}re((()=>{u&&fetch(u).then((e=>e.json())).then((e=>{if(window.overrideOptions.persistLocalStorage){let t=localStorage.getItem(u);n(1,i=Ge(t?JSON.parse(t):Object.assign(e,d),null,h))}else n(1,i=Ge(Object.assign(e,d),null,h));$(i)})),window.location!==window.parent.location&&n(8,p=!0)}));return e.$$set=e=>{"graphjsonpath"in e&&n(35,u=e.graphjsonpath),"svgForTextBBox"in e&&n(0,h=e.svgForTextBBox),"overrideOptions"in e&&n(36,d=e.overrideOptions)},e.$$.update=()=>{2&e.$$.dirty[0]&&(window.graph=i),4&e.$$.dirty[0]&&(window.graphHistory=f),2&e.$$.dirty[0]&&n(11,r=i?i.items.filter((e=>"node"===e.kind)).sort(((e,t)=>e.label.localeCompare(t.label))):[]),10&e.$$.dirty[0]&&n(6,o=function(e,t){return e?"edge"===t?.kind?[...e.items.sort(((e,t)=>e.level-t.level)).filter((e=>e.id!==t.id)),...e.items.filter((e=>e.id===t.id))]:e.items.sort(((e,t)=>e.level-t.level)):[]}(i,g)),2&e.$$.dirty[0]&&n(7,s=function(e){if(!e)return Object.entries({});let t=e.items.filter((e=>["node","edge"].includes(e.kind))).map((e=>e.tags)).flat().filter(((e,t,n)=>n.indexOf(e)===t)),n=t.reduce(((e,t)=>{let n=t.split(":").length>1?t.split(":")[0]:"ungrouped";return e[n]=e[n]??[],e[n].push({label:t.split(":").reverse()[0],value:t}),e}),{});return Object.entries(n)}(i)),48&e.$$.dirty[0]|64&e.$$.dirty[1]&&a&&l&&(n(37,c=function(){var e,t,n,r=FD,i=qD,o=JD,s=WD,a=UD,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,h=gI,d=ij("start","zoom","end"),f=500,p=0,m=10;function g(e){e.property("__zoom",HD).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",C).filter(a).on("touchstart.zoom",_).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new LD(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new LD(e.k,r,i)}function w(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function b(e,t,n,r){e.on("start.zoom",(function(){x(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){x(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,o=arguments,s=x(e,o).event(r),a=i.apply(e,o),l=null==n?w(a):"function"==typeof n?n.apply(e,o):n,c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),u=e.__zoom,d="function"==typeof t?t.apply(e,o):t,f=h(u.invert(l).concat(c/u.k),d.invert(l).concat(c/d.k));return function(e){if(1===e)e=d;else{var t=f(e),n=c/t[2];e=new LD(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function x(e,t,n){return!n&&e.__zooming||new $(e,t)}function $(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=i.apply(e,t),this.taps=0}function k(e,...t){if(r.apply(this,arguments)){var n=x(this,t).event(e),i=this.__zoom,a=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,s.apply(this,arguments)))),u=TR(e);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===a)return;n.mouse=[u,i.invert(u)],rD(this),n.start()}VD(e),n.wheel=setTimeout(h,150),n.zoom("mouse",o(y(v(i,a),n.mouse[0],n.mouse[1]),n.extent,c))}function h(){n.wheel=null,n.end()}}function S(e,...t){if(!n&&r.apply(this,arguments)){var i=e.currentTarget,s=x(this,t,!0).event(e),a=PR(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",f,!0),l=TR(e,i),u=e.clientX,h=e.clientY;xN(e.view),BD(e),s.mouse=[l,this.__zoom.invert(l)],rD(this),s.start()}function d(e){if(VD(e),!s.moved){var t=e.clientX-u,n=e.clientY-h;s.moved=t*t+n*n>p}s.event(e).zoom("mouse",o(y(s.that.__zoom,s.mouse[0]=TR(e,i),s.mouse[1]),s.extent,c))}function f(e){a.on("mousemove.zoom mouseup.zoom",null),$N(e.view,s.moved),VD(e),s.event(e).end()}}function C(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,s=TR(e.changedTouches?e.changedTouches[0]:e,this),a=n.invert(s),l=n.k*(e.shiftKey?.5:2),h=o(y(v(n,l),s,a),i.apply(this,t),c);VD(e),u>0?PR(this).transition().duration(u).call(b,h,s,e):PR(this).call(g.transform,h,s,e)}}function _(n,...i){if(r.apply(this,arguments)){var o,s,a,l,c=n.touches,u=c.length,h=x(this,i,n.changedTouches.length===u).event(n);for(BD(n),s=0;s<u;++s)l=[l=TR(a=c[s],this),this.__zoom.invert(l),a.identifier],h.touch0?h.touch1||h.touch0[2]===l[2]||(h.touch1=l,h.taps=0):(h.touch0=l,o=!0,h.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(h.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),f)),rD(this),h.start())}}function O(e,...t){if(this.__zooming){var n,r,i,s,a=x(this,t).event(e),l=e.changedTouches,u=l.length;for(VD(e),n=0;n<u;++n)i=TR(r=l[n],this),a.touch0&&a.touch0[2]===r.identifier?a.touch0[0]=i:a.touch1&&a.touch1[2]===r.identifier&&(a.touch1[0]=i);if(r=a.that.__zoom,a.touch1){var h=a.touch0[0],d=a.touch0[1],f=a.touch1[0],p=a.touch1[1],m=(m=f[0]-h[0])*m+(m=f[1]-h[1])*m,g=(g=p[0]-d[0])*g+(g=p[1]-d[1])*g;r=v(r,Math.sqrt(m/g)),i=[(h[0]+f[0])/2,(h[1]+f[1])/2],s=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!a.touch0)return;i=a.touch0[0],s=a.touch0[1]}a.zoom("touch",o(y(r,i,s),a.extent,c))}}function E(e,...r){if(this.__zooming){var i,o,s=x(this,r).event(e),a=e.changedTouches,l=a.length;for(BD(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),i=0;i<l;++i)o=a[i],s.touch0&&s.touch0[2]===o.identifier?delete s.touch0:s.touch1&&s.touch1[2]===o.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(o=TR(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<m)){var c=PR(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return g.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property("__zoom",HD),e!==i?b(e,t,n,r):i.interrupt().each((function(){x(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},g.scaleBy=function(e,t,n,r){g.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,r)},g.scaleTo=function(e,t,n,r){g.transform(e,(function(){var e=i.apply(this,arguments),r=this.__zoom,s=null==n?w(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return o(y(v(r,l),s,a),e,c)}),n,r)},g.translateBy=function(e,t,n,r){g.transform(e,(function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},g.translateTo=function(e,t,n,r,s){g.transform(e,(function(){var e=i.apply(this,arguments),s=this.__zoom,a=null==r?w(e):"function"==typeof r?r.apply(this,arguments):r;return o(zD.translate(a[0],a[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),r,s)},$.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=PR(this.that).datum();d.call(e,this.that,new DD(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:d}),t)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:RD(+e),g):s},g.filter=function(e){return arguments.length?(r="function"==typeof e?e:RD(!!e),g):r},g.touchable=function(e){return arguments.length?(a="function"==typeof e?e:RD(!!e),g):a},g.extent=function(e){return arguments.length?(i="function"==typeof e?e:RD([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):i},g.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],g):[l[0],l[1]]},g.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],g):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},g.constrain=function(e){return arguments.length?(o=e,g):o},g.duration=function(e){return arguments.length?(u=+e,g):u},g.interpolate=function(e){return arguments.length?(h=e,g):h},g.on=function(){var e=d.on.apply(d,arguments);return e===d?g:e},g.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}().on("zoom",(({transform:e})=>{PR(l).attr("transform",e)}))),PR(a).call(c))},[h,i,f,g,a,l,o,s,p,y,w,r,function(){a&&l&&PR(a).transition().duration(300).call(c.transform,zD.translate(0,0).scale(1))},k,S,function(e){v={x:e.detail.rawEvent.clientX,y:e.detail.rawEvent.clientY},n(9,y=null);let t=a.createSVGPoint();t.x=v.x,t.y=v.y;let r=t.matrixTransform(l.getCTM().inverse()),o={x:r.x,y:r.y};v.edge=function(e,t,n){let r={id:Ye(n),kind:"edge",label:"",desc:"",link:"",tags:[],shape:"straight",fromId:e.id,toOrphan:{pos:{x:t.x,y:t.y}},directed:!0,weight:5};return n.items.push(r),r}(e.detail.source,o,i),S()},function(e){n(3,g=e.detail.source),v={x:e.detail.rawEvent.clientX,y:e.detail.rawEvent.clientY},n(9,y=null)},function(e){if(n(3,g=e.detail.source),v.edge&&"node"===g.kind)v.edge.toId=g.id,delete v.edge.toOrphan;else if(v.edge&&"edge"===g.kind)Qe(v.edge,i,!1),$(i);else if("node"===g?.kind&&!v.hasOwnProperty("edge")){let e=a.createSVGPoint();e.x=v.x,e.y=v.y;let t=function(e,t,n){return n.items.filter((e=>"node"===e.kind)).filter((e=>e.id!=t.id)).filter((t=>e.x>t.pos.x-t.width/2&&e.x<t.pos.x+t.width/2&&e.y>t.pos.y-t.height/2&&e.y<t.pos.y+t.height/2)).sort(((e,t)=>t.level-e.level))[0]}(e.matrixTransform(l.getCTM().inverse()),g,i);t&&g.parent!=t.id&&g.id!=t.parent&&(console.log("making ",g.label," child of ",t.label),n(3,g.parent=t.id,g),$(i))}v=null,S()},function(e){let t=e.detail.source,n=(i.theme.badges.indexOf(t.badge)+1)%i.theme.badges.length;t.badge=i.theme.badges[n],S()},C,function(e){if(m={x:e.clientX,y:e.clientY},g&&v&&g.pos&&1==e.buttons){if(v.edge){let e=a.createSVGPoint();e.x=v.x+20*Math.cos(Math.atan2(v.y,v.x)),e.y=v.y+20*Math.sin(Math.atan2(v.y,v.x));let t=e.matrixTransform(l.getCTM().inverse());v.edge.toOrphan={pos:{x:t.x,y:t.y}}}else{let e=a.createSVGPoint();e.x=v.x,e.y=v.y;let t=e.matrixTransform(l.getCTM().inverse()),n=a.createSVGPoint();n.x=m.x,n.y=m.y;let r=n.matrixTransform(l.getCTM().inverse());Ue(g,i,r.x-t.x,r.y-t.y)}v.x=m.x,v.y=m.y,S()}},function(e){!function(e,t,n,r){let i=Ye(t);t.items.push({id:i,kind:"node",label:`New node ${i}`,desc:"",link:"",tags:[],children:[],pos:Xe(n,e,r),nodelabelfontsize:null,nodenotesfontsize:null})}(e,i,a,l),$(i),S(),n(9,y=null)},function(e){!function(e,t,n,r){let i=Ye(t);t.items.push({id:i,kind:"note",label:"Add your notes here",notes:"some extra content",pos:Xe(n,e,r),nodelabelfontsize:null,nodenotesfontsize:null})}(e,i,a,l),S(),n(9,y=null)},function(e){i.contextmenu&&n(9,y=[e.clientX,e.clientY])},function(e){console.log("handleCreateNode",e.detail),function(e,t,n){console.log("createGraphNodeEdge");let r=Ye(n);n.items.push({id:r,kind:"node",label:`New node ${r}`,desc:"",link:"",tags:[],parent:e.parent,children:[],pos:{x:e.pos.x+(100+e.width/2+100*Math.random())*(Math.floor(t/10)-2),y:e.pos.y+(100+e.height/2+100*Math.random())*(t%10-2)},nodelabelfontsize:null,nodenotesfontsize:null,fill:e.fill,stroke:e.stroke}),n.items.push({id:Ye(n),kind:"edge",label:"",desc:"",link:"",tags:[],shape:"straight",fromId:e.id,toId:r,directed:!0,weight:5})}(e.detail.from,e.detail.handle,i),$(i),S()},function(e){!g||"Backspace"!==e.key&&"Delete"!==e.key||(C(g,!1),$(i))},function(e){v.edge&&Qe(v.edge,i,!1),v=null,S()},function(e){n(3,g=null),1===e.buttons&&(v={x:e.clientX,y:e.clientY},n(9,y=null))},function(e){S()},_,O,E,function(e){let t=e.detail.item.value;if(t.startsWith("theme."))!function(e){n(1,i.theme=et[e],i),S()}(t.split(".")[1]);else if(t.startsWith("export.")){let e=t.split(".")[1];"svg"===e?$L(a.outerHTML,"graph.svg"):"cytoscape"===e&&$L(function(e){let t={};return t.elements=e.items.filter((e=>"node"===e.kind||e.fromId&&e.toId)).map((e=>"node"===e.kind?{group:"nodes",data:{id:e.id,parent:e.parent},position:{x:e.pos.x,y:e.pos.y}}:"edge"===e.kind?{group:"edges",data:{id:e.id,source:e.fromId,target:e.toId}}:void 0)),JSON.stringify(t,null,2)}(i),"graph-cytoscape.json")}else"openfile"===t||("savefile"===t?$L(function(e){let t={};return t.items=e.items.map((e=>"node"===e.kind?{id:e.id,kind:"node",label:e.label,notes:e.notes,desc:e.desc,link:e.link,tags:e.tags,parent:e.parent,pos:e.pos,fill:e.fill,stroke:e.stroke,badge:e.badge,nodelabelfontsize:e.nodelabelfontsize,nodenotesfontsize:e.nodenotesfontsize}:"edge"===e.kind?{id:e.id,kind:"edge",label:e.label,desc:e.desc,link:e.link,tags:e.tags,stroke:e.stroke,strokeType:e.strokeType,directed:e.directed,weight:e.weight,fromId:e.fromId,toId:e.toId,shape:e.shape,fromOrphan:e.fromOrphan,toOrphan:e.toOrphan}:"note"===e.kind?{id:e.id,kind:e.kind,pos:e.pos,label:e.label,notes:e.notes,nodelabelfontsize:e.nodelabelfontsize,nodenotesfontsize:e.nodenotesfontsize}:void 0)),t.grid=e.grid,t.theme=e.theme,t.jsondownload=e.jsondownload,t.jsonupload=e.jsonupload,t.contextmenu=e.contextmenu,t.customjson=e.customjson,t.exportcytoscape=e.exportcytoscape,t.exportsvg=e.exportsvg,JSON.stringify(t,null,2)}(i),"mynetwork.graph"):"undo"===t?b():"redo"===t?x():"clear"===t&&k())},A,e=>{(e.metaKey||e.ctrlKey)&&90===e.which&&(e.preventDefault(),(e.shiftKey?x:b)())},u,d,c,function(e){ue[e?"unshift":"push"]((()=>{l=e,n(5,l)}))},function(e){ue[e?"unshift":"push"]((()=>{a=e,n(4,a)}))},e=>{n(1,i=Ge(e.detail,g,h)),S()},e=>_(e,g),e=>O(g),e=>C(g,!0),e=>C(g,!1),e=>A(e),e=>E(e.target),e=>n(10,w=i.items.filter((t=>"node"===t.kind&&t.tags.includes(e.target.value))).map((e=>e.id)))]}var SL=new class extends He{constructor(e){super(),qe(this,e,kL,bL,a,{graphjsonpath:35,svgForTextBBox:0,overrideOptions:36},null,[-1,-1,-1])}}({target:document.querySelector("#grapheditor"),props:{graphjsonpath:window.graphjsonpath,overrideOptions:window.overrideOptions||{},svgForTextBBox:document.getElementById("textbbox")}}),CL=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},_L=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),OL=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};
/*!
     * vanilla-picker v2.12.1
     * https://vanilla-picker.js.org
     *
     * Copyright 2017-2021 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
     * Released under the ISC license.
     */String.prototype.startsWith=String.prototype.startsWith||function(e){return 0===this.indexOf(e)},String.prototype.padStart=String.prototype.padStart||function(e,t){for(var n=this;n.length<e;)n=t+n;return n};var EL={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function AL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>0?e.toFixed(t).replace(/0+$/,"").replace(/\.$/,""):e.toString();return n||"0"}var ML=function(){function e(t,n,r,i){CL(this,e);var o=this;if(void 0===t);else if(Array.isArray(t))this.rgba=t;else if(void 0===r){var s=t&&""+t;s&&function(t){if(t.startsWith("hsl")){var n=t.match(/([\-\d\.e]+)/g).map(Number),r=OL(n,4),i=r[0],s=r[1],a=r[2],l=r[3];void 0===l&&(l=1),i/=360,s/=100,a/=100,o.hsla=[i,s,a,l]}else if(t.startsWith("rgb")){var c=t.match(/([\-\d\.e]+)/g).map(Number),u=OL(c,4),h=u[0],d=u[1],f=u[2],p=u[3];void 0===p&&(p=1),o.rgba=[h,d,f,p]}else t.startsWith("#")?o.rgba=e.hexToRgb(t):o.rgba=e.nameToRgb(t)||e.hexToRgb(t)}(s.toLowerCase())}else this.rgba=[t,n,r,void 0===i?1:i]}return _L(e,[{key:"printRGB",value:function(e){var t=(e?this.rgba:this.rgba.slice(0,3)).map((function(e,t){return AL(e,3===t?3:0)}));return e?"rgba("+t+")":"rgb("+t+")"}},{key:"printHSL",value:function(e){var t=[360,100,100,1],n=["","%","%",""],r=(e?this.hsla:this.hsla.slice(0,3)).map((function(e,r){return AL(e*t[r],3===r?3:1)+n[r]}));return e?"hsla("+r+")":"hsl("+r+")"}},{key:"printHex",value:function(e){var t=this.hex;return e?t:t.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=e.hslToRgb(this._hsla)},set:function(e){3===e.length&&(e[3]=1),this._rgba=e,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=e.rgbToHsl(this._rgba)},set:function(e){3===e.length&&(e[3]=1),this._hsla=e,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var e=this.rgba.map((function(e,t){return t<3?e.toString(16):Math.round(255*e).toString(16)}));return"#"+e.map((function(e){return e.padStart(2,"0")})).join("")},set:function(t){this.rgba=e.hexToRgb(t)}}],[{key:"hexToRgb",value:function(e){var t=(e.startsWith("#")?e.slice(1):e).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!t.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+e);var n=t.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(e){return parseInt(e,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(t){var n=t.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=EL[n];return void 0===r?r:e.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(e){var t=OL(e,4),n=t[0],r=t[1],i=t[2],o=t[3];n/=255,r/=255,i/=255;var s=Math.max(n,r,i),a=Math.min(n,r,i),l=void 0,c=void 0,u=(s+a)/2;if(s===a)l=c=0;else{var h=s-a;switch(c=u>.5?h/(2-s-a):h/(s+a),s){case n:l=(r-i)/h+(r<i?6:0);break;case r:l=(i-n)/h+2;break;case i:l=(n-r)/h+4}l/=6}return[l,c,u,o]}},{key:"hslToRgb",value:function(e){var t=OL(e,4),n=t[0],r=t[1],i=t[2],o=t[3],s=void 0,a=void 0,l=void 0;if(0===r)s=a=l=i;else{var c=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e},u=i<.5?i*(1+r):i+r-i*r,h=2*i-u;s=c(h,u,n+1/3),a=c(h,u,n),l=c(h,u,n-1/3)}var d=[255*s,255*a,255*l].map(Math.round);return d[3]=o,d}}]),e}(),PL=function(){function e(){CL(this,e),this._events=[]}return _L(e,[{key:"add",value:function(e,t,n){e.addEventListener(t,n,!1),this._events.push({target:e,type:t,handler:n})}},{key:"remove",value:function(t,n,r){this._events=this._events.filter((function(i){var o=!0;return t&&t!==i.target&&(o=!1),n&&n!==i.type&&(o=!1),r&&r!==i.handler&&(o=!1),o&&e._doRemove(i.target,i.type,i.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(t){return e._doRemove(t.target,t.type,t.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(e,t,n){e.removeEventListener(t,n,!1)}}]),e}();function TL(e,t,n){var r=!1;function i(e,t,n){return Math.max(t,Math.min(e,n))}function o(e,o,s){if(s&&(r=!0),r){e.preventDefault();var a=t.getBoundingClientRect(),l=a.width,c=a.height,u=o.clientX,h=o.clientY,d=i(u-a.left,0,l),f=i(h-a.top,0,c);n(d/l,f/c)}}function s(e,t){1===(void 0===e.buttons?e.which:e.buttons)?o(e,e,t):r=!1}function a(e,t){1===e.touches.length?o(e,e.touches[0],t):r=!1}e.add(t,"mousedown",(function(e){s(e,!0)})),e.add(t,"touchstart",(function(e){a(e,!0)})),e.add(window,"mousemove",s),e.add(t,"touchmove",a),e.add(window,"mouseup",(function(e){r=!1})),e.add(t,"touchend",(function(e){r=!1})),e.add(t,"touchcancel",(function(e){r=!1}))}var jL="keydown",NL="mousedown",IL="focusin";function RL(e,t){return(t||document).querySelector(e)}function DL(e){e.preventDefault(),e.stopPropagation()}function LL(e,t,n,r,i){e.add(t,jL,(function(e){n.indexOf(e.key)>=0&&(i&&DL(e),r(e))}))}var zL=function(){function e(t){CL(this,e),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new PL,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(t)}return _L(e,[{key:"setOptions",value:function(e){var t=this;if(e){var n=this.settings;if(e instanceof HTMLElement)n.parent=e;else{n.parent&&e.parent&&n.parent!==e.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(e,t,n){for(var r in e)n&&n.indexOf(r)>=0||(t[r]=e[r])}(e,n),e.onChange&&(this.onChange=e.onChange),e.onDone&&(this.onDone=e.onDone),e.onOpen&&(this.onOpen=e.onOpen),e.onClose&&(this.onClose=e.onClose);var r=e.color||e.colour;r&&this._setColor(r)}var i=n.parent;if(i&&n.popup&&!this._popupInited){var o=function(e){return t.openHandler(e)};this._events.add(i,"click",o),LL(this._events,i,[" ","Spacebar","Enter"],o),this._popupInited=!0}else e.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(e){if(this.show()){e&&e.preventDefault(),this.settings.parent.style.pointerEvents="none";var t=e&&e.type===jL?this._domEdit:this.domElement;setTimeout((function(){return t.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(e){var t=e&&e.type,n=!1;if(e)if(t===NL||t===IL){var r=(this.__containedEvent||0)+100;e.timeStamp>r&&(n=!0)}else DL(e),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="",t!==NL&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(e,t){this.closeHandler(),this.setOptions(e),t&&this.openHandler()}},{key:"setColor",value:function(e,t){this._setColor(e,{silent:t})}},{key:"_setColor",value:function(e,t){if("string"==typeof e&&(e=e.trim()),e){t=t||{};var n=void 0;try{n=new ML(e)}catch(e){if(t.failSilently)return;throw e}if(!this.settings.alpha){var r=n.hsla;r[3]=1,n.hsla=r}this.colour=this.color=n,this._setHSLA(null,null,null,null,t)}}},{key:"setColour",value:function(e,t){this.setColor(e,t)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var e=this._toggleDOM(!0);return this._setPosition(),e}var t,n,r=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',i=(t=r,(n=document.createElement("div")).innerHTML=t,n.firstElementChild);return this.domElement=i,this._domH=RL(".picker_hue",i),this._domSL=RL(".picker_sl",i),this._domA=RL(".picker_alpha",i),this._domEdit=RL(".picker_editor input",i),this._domSample=RL(".picker_sample",i),this._domOkay=RL(".picker_done button",i),this._domCancel=RL(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var e=this,t=this,n=this.domElement,r=this._events;function i(e,t,n){r.add(e,t,n)}i(n,"click",(function(e){return e.preventDefault()})),TL(r,this._domH,(function(e,n){return t._setHSLA(e)})),TL(r,this._domSL,(function(e,n){return t._setHSLA(null,e,1-n)})),this.settings.alpha&&TL(r,this._domA,(function(e,n){return t._setHSLA(null,null,null,1-n)}));var o=this._domEdit;i(o,"input",(function(e){t._setColor(this.value,{fromEditor:!0,failSilently:!0})})),i(o,"focus",(function(e){var t=this;t.selectionStart===t.selectionEnd&&t.select()})),this._ifPopup((function(){var t=function(t){return e.closeHandler(t)};i(window,NL,t),i(window,IL,t),LL(r,n,["Esc","Escape"],t);var o=function(t){e.__containedEvent=t.timeStamp};i(n,NL,o),i(n,IL,o),i(e._domCancel,"click",t)}));var s=function(t){e._ifPopup((function(){return e.closeHandler(t)})),e.onDone&&e.onDone(e.colour)};i(this._domOkay,"click",s),LL(r,n,["Enter"],s)}},{key:"_setPosition",value:function(){var e=this.settings.parent,t=this.domElement;e!==t.parentNode&&e.appendChild(t),this._ifPopup((function(n){"static"===getComputedStyle(e).position&&(e.style.position="relative");var r=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(e){e===r?t.classList.add(e):t.classList.remove(e)})),t.classList.add(r)}))}},{key:"_setHSLA",value:function(e,t,n,r,i){i=i||{};var o=this.colour,s=o.hsla;[e,t,n,r].forEach((function(e,t){(e||0===e)&&(s[t]=e)})),o.hsla=s,this._updateUI(i),this.onChange&&!i.silent&&this.onChange(o)}},{key:"_updateUI",value:function(e){if(this.domElement){e=e||{};var t=this.colour,n=t.hsla,r="hsl("+360*n[0]+", 100%, 50%)",i=t.hslString,o=t.hslaString,s=this._domH,a=this._domSL,l=this._domA,c=RL(".picker_selector",s),u=RL(".picker_selector",a),h=RL(".picker_selector",l);y(0,c,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=r,y(0,u,n[1]),w(0,u,1-n[2]),a.style.color=i,w(0,h,1-n[3]);var d=i,f=d.replace("hsl","hsla").replace(")",", 0)"),p="linear-gradient("+[d,f]+")";if(this._domA.style.background=p+", linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em",!e.fromEditor){var m=this.settings.editorFormat,g=this.settings.alpha,v=void 0;switch(m){case"rgb":v=t.printRGB(g);break;case"hsl":v=t.printHSL(g);break;default:v=t.printHex(g)}this._domEdit.value=v}this._domSample.style.color=o}function y(e,t,n){t.style.left=100*n+"%"}function w(e,t,n){t.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(e,t){this.settings.parent&&this.settings.popup?e&&e(this.settings.popup):t&&t()}},{key:"_toggleDOM",value:function(e){var t=this.domElement;if(!t)return!1;var n=e?"":"none",r=t.style.display!==n;return r&&(t.style.display=n),r}}]),e}(),BL=document.createElement("style");BL.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(BL),zL.StyleElement=BL;var VL=Object.freeze({__proto__:null,default:zL});return SL}();
//# sourceMappingURL=bundle.js.map
