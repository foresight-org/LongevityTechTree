function fe() {
}
const hk = (t) => t;
function Jo(t, e) {
  for (const n in e)
    t[n] = e[n];
  return t;
}
function dk(t) {
  return t();
}
function f1() {
  return /* @__PURE__ */ Object.create(null);
}
function nt(t) {
  t.forEach(dk);
}
function Fn(t) {
  return typeof t == "function";
}
function Pt(t, e) {
  return t != t ? e == e : t !== e || t && typeof t == "object" || typeof t == "function";
}
let Cf;
function Lc(t, e) {
  return Cf || (Cf = document.createElement("a")), Cf.href = e, t === Cf.href;
}
function pt(t, e) {
  return t != t ? e == e : t !== e;
}
function _8(t) {
  return Object.keys(t).length === 0;
}
function Sn(t, e, n, i) {
  if (t) {
    const r = pk(t, e, n, i);
    return t[0](r);
  }
}
function pk(t, e, n, i) {
  return t[1] && i ? Jo(n.ctx.slice(), t[1](i(e))) : n.ctx;
}
function Mn(t, e, n, i) {
  if (t[2] && i) {
    const r = t[2](i(n));
    if (e.dirty === void 0)
      return r;
    if (typeof r == "object") {
      const o = [], s = Math.max(e.dirty.length, r.length);
      for (let l = 0; l < s; l += 1)
        o[l] = e.dirty[l] | r[l];
      return o;
    }
    return e.dirty | r;
  }
  return e.dirty;
}
function An(t, e, n, i, r, o) {
  if (r) {
    const s = pk(e, n, i, o);
    t.p(s, r);
  }
}
function On(t) {
  if (t.ctx.length > 32) {
    const e = [], n = t.ctx.length / 32;
    for (let i = 0; i < n; i++)
      e[i] = -1;
    return e;
  }
  return -1;
}
function y8(t) {
  const e = {};
  for (const n in t)
    e[n] = !0;
  return e;
}
function fn(t) {
  return t ?? "";
}
function _i(t) {
  return t && Fn(t.destroy) ? t.destroy : fe;
}
const mk = typeof window < "u";
let w8 = mk ? () => window.performance.now() : () => Date.now(), Sm = mk ? (t) => requestAnimationFrame(t) : fe;
const nl = /* @__PURE__ */ new Set();
function gk(t) {
  nl.forEach((e) => {
    e.c(t) || (nl.delete(e), e.f());
  }), nl.size !== 0 && Sm(gk);
}
function v8(t) {
  let e;
  return nl.size === 0 && Sm(gk), {
    promise: new Promise((n) => {
      nl.add(e = { c: t, f: n });
    }),
    abort() {
      nl.delete(e);
    }
  };
}
function w(t, e) {
  t.appendChild(e);
}
function bk(t) {
  if (!t)
    return document;
  const e = t.getRootNode ? t.getRootNode() : t.ownerDocument;
  return e && e.host ? e : t.ownerDocument;
}
function k8(t) {
  const e = O("style");
  return C8(bk(t), e), e.sheet;
}
function C8(t, e) {
  return w(t.head || t, e), e.sheet;
}
function B(t, e, n) {
  t.insertBefore(e, n || null);
}
function j(t) {
  t.parentNode && t.parentNode.removeChild(t);
}
function Dt(t, e) {
  for (let n = 0; n < t.length; n += 1)
    t[n] && t[n].d(e);
}
function O(t) {
  return document.createElement(t);
}
function lt(t) {
  return document.createElementNS("http://www.w3.org/2000/svg", t);
}
function le(t) {
  return document.createTextNode(t);
}
function q() {
  return le(" ");
}
function tt() {
  return le("");
}
function X(t, e, n, i) {
  return t.addEventListener(e, n, i), () => t.removeEventListener(e, n, i);
}
function or(t) {
  return function(e) {
    return e.preventDefault(), t.call(this, e);
  };
}
function Le(t) {
  return function(e) {
    return e.stopPropagation(), t.call(this, e);
  };
}
function m(t, e, n) {
  n == null ? t.removeAttribute(e) : t.getAttribute(e) !== n && t.setAttribute(e, n);
}
function c1(t, e) {
  const n = Object.getOwnPropertyDescriptors(t.__proto__);
  for (const i in e)
    e[i] == null ? t.removeAttribute(i) : i === "style" ? t.style.cssText = e[i] : i === "__value" ? t.value = t[i] = e[i] : n[i] && n[i].set ? t[i] = e[i] : m(t, i, e[i]);
}
function xc(t, e) {
  for (const n in e)
    m(t, n, e[n]);
}
function ee(t, e, n) {
  e in t ? t[e] = typeof t[e] == "boolean" && n === "" ? !0 : n : m(t, e, n);
}
function S8(t) {
  return Array.from(t.childNodes);
}
function Pe(t, e) {
  e = "" + e, t.wholeText !== e && (t.data = e);
}
function No(t, e) {
  t.value = e ?? "";
}
function ai(t, e, n, i) {
  n === null ? t.style.removeProperty(e) : t.style.setProperty(e, n, i ? "important" : "");
}
function pe(t, e, n) {
  t.classList[n ? "add" : "remove"](e);
}
function _k(t, e, { bubbles: n = !1, cancelable: i = !1 } = {}) {
  const r = document.createEvent("CustomEvent");
  return r.initCustomEvent(t, n, i, e), r;
}
function jr(t, e) {
  return new t(e);
}
const zc = /* @__PURE__ */ new Map();
let Vc = 0;
function M8(t) {
  let e = 5381, n = t.length;
  for (; n--; )
    e = (e << 5) - e ^ t.charCodeAt(n);
  return e >>> 0;
}
function A8(t, e) {
  const n = { stylesheet: k8(e), rules: {} };
  return zc.set(t, n), n;
}
function u1(t, e, n, i, r, o, s, l = 0) {
  const a = 16.666 / i;
  let f = `{
`;
  for (let _ = 0; _ <= 1; _ += a) {
    const b = e + (n - e) * o(_);
    f += _ * 100 + `%{${s(b, 1 - b)}}
`;
  }
  const c = f + `100% {${s(n, 1 - n)}}
}`, u = `__svelte_${M8(c)}_${l}`, h = bk(t), { stylesheet: d, rules: p } = zc.get(h) || A8(h, t);
  p[u] || (p[u] = !0, d.insertRule(`@keyframes ${u} ${c}`, d.cssRules.length));
  const g = t.style.animation || "";
  return t.style.animation = `${g ? `${g}, ` : ""}${u} ${i}ms linear ${r}ms 1 both`, Vc += 1, u;
}
function O8(t, e) {
  const n = (t.style.animation || "").split(", "), i = n.filter(
    e ? (o) => o.indexOf(e) < 0 : (o) => o.indexOf("__svelte") === -1
  ), r = n.length - i.length;
  r && (t.style.animation = i.join(", "), Vc -= r, Vc || T8());
}
function T8() {
  Sm(() => {
    Vc || (zc.forEach((t) => {
      const { ownerNode: e } = t.stylesheet;
      e && j(e);
    }), zc.clear());
  });
}
let Ma;
function pa(t) {
  Ma = t;
}
function Ll() {
  if (!Ma)
    throw new Error("Function called outside component initialization");
  return Ma;
}
function E8(t) {
  Ll().$$.before_update.push(t);
}
function Ei(t) {
  Ll().$$.on_mount.push(t);
}
function Br(t) {
  Ll().$$.on_destroy.push(t);
}
function Is() {
  const t = Ll();
  return (e, n, { cancelable: i = !1 } = {}) => {
    const r = t.$$.callbacks[e];
    if (r) {
      const o = _k(e, n, { cancelable: i });
      return r.slice().forEach((s) => {
        s.call(t, o);
      }), !o.defaultPrevented;
    }
    return !0;
  };
}
function yk(t, e) {
  return Ll().$$.context.set(t, e), e;
}
function Hn(t) {
  return Ll().$$.context.get(t);
}
function zt(t, e) {
  const n = t.$$.callbacks[e.type];
  n && n.slice().forEach((i) => i.call(this, e));
}
const sa = [], ht = [], mc = [], Gd = [], wk = Promise.resolve();
let Xd = !1;
function vk() {
  Xd || (Xd = !0, wk.then(kk));
}
function Ci() {
  return vk(), wk;
}
function dl(t) {
  mc.push(t);
}
function Xi(t) {
  Gd.push(t);
}
const Qh = /* @__PURE__ */ new Set();
let Sf = 0;
function kk() {
  const t = Ma;
  do {
    for (; Sf < sa.length; ) {
      const e = sa[Sf];
      Sf++, pa(e), P8(e.$$);
    }
    for (pa(null), sa.length = 0, Sf = 0; ht.length; )
      ht.pop()();
    for (let e = 0; e < mc.length; e += 1) {
      const n = mc[e];
      Qh.has(n) || (Qh.add(n), n());
    }
    mc.length = 0;
  } while (sa.length);
  for (; Gd.length; )
    Gd.pop()();
  Xd = !1, Qh.clear(), pa(t);
}
function P8(t) {
  if (t.fragment !== null) {
    t.update(), nt(t.before_update);
    const e = t.dirty;
    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, e), t.after_update.forEach(dl);
  }
}
let Ql;
function R8() {
  return Ql || (Ql = Promise.resolve(), Ql.then(() => {
    Ql = null;
  })), Ql;
}
function Yh(t, e, n) {
  t.dispatchEvent(_k(`${e ? "intro" : "outro"}${n}`));
}
const gc = /* @__PURE__ */ new Set();
let Yr;
function me() {
  Yr = {
    r: 0,
    c: [],
    p: Yr
  };
}
function ge() {
  Yr.r || nt(Yr.c), Yr = Yr.p;
}
function k(t, e) {
  t && t.i && (gc.delete(t), t.i(e));
}
function E(t, e, n, i) {
  if (t && t.o) {
    if (gc.has(t))
      return;
    gc.add(t), Yr.c.push(() => {
      gc.delete(t), i && (n && t.d(1), i());
    }), t.o(e);
  } else
    i && i();
}
const I8 = { duration: 0 };
function Mf(t, e, n, i) {
  const r = { direction: "both" };
  let o = e(t, n, r), s = i ? 0 : 1, l = null, a = null, f = null;
  function c() {
    f && O8(t, f);
  }
  function u(d, p) {
    const g = d.b - s;
    return p *= Math.abs(g), {
      a: s,
      b: d.b,
      d: g,
      duration: p,
      start: d.start,
      end: d.start + p,
      group: d.group
    };
  }
  function h(d) {
    const { delay: p = 0, duration: g = 300, easing: _ = hk, tick: b = fe, css: y } = o || I8, v = {
      start: w8() + p,
      b: d
    };
    d || (v.group = Yr, Yr.r += 1), l || a ? a = v : (y && (c(), f = u1(t, s, d, g, p, _, y)), d && b(0, 1), l = u(v, g), dl(() => Yh(t, d, "start")), v8((M) => {
      if (a && M > a.start && (l = u(a, g), a = null, Yh(t, l.b, "start"), y && (c(), f = u1(t, s, l.b, l.duration, 0, _, o.css))), l) {
        if (M >= l.end)
          b(s = l.b, 1 - s), Yh(t, l.b, "end"), a || (l.b ? c() : --l.group.r || nt(l.group.c)), l = null;
        else if (M >= l.start) {
          const A = M - l.start;
          s = l.a + l.d * _(A / l.duration), b(s, 1 - s);
        }
      }
      return !!(l || a);
    }));
  }
  return {
    run(d) {
      Fn(o) ? R8().then(() => {
        o = o(r), h(d);
      }) : h(d);
    },
    end() {
      c(), l = a = null;
    }
  };
}
const Ku = typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : global;
function Gu(t, e) {
  t.d(1), e.delete(t.key);
}
function Xu(t, e) {
  E(t, 1, 1, () => {
    e.delete(t.key);
  });
}
function Do(t, e, n, i, r, o, s, l, a, f, c, u) {
  let h = t.length, d = o.length, p = h;
  const g = {};
  for (; p--; )
    g[t[p].key] = p;
  const _ = [], b = /* @__PURE__ */ new Map(), y = /* @__PURE__ */ new Map();
  for (p = d; p--; ) {
    const P = u(r, o, p), S = n(P);
    let D = s.get(S);
    D ? i && D.p(P, e) : (D = f(S, P), D.c()), b.set(S, _[p] = D), S in g && y.set(S, Math.abs(p - g[S]));
  }
  const v = /* @__PURE__ */ new Set(), M = /* @__PURE__ */ new Set();
  function A(P) {
    k(P, 1), P.m(l, c), s.set(P.key, P), c = P.first, d--;
  }
  for (; h && d; ) {
    const P = _[d - 1], S = t[h - 1], D = P.key, x = S.key;
    P === S ? (c = P.first, h--, d--) : b.has(x) ? !s.has(D) || v.has(D) ? A(P) : M.has(x) ? h-- : y.get(D) > y.get(x) ? (M.add(D), A(P)) : (v.add(x), h--) : (a(S, s), h--);
  }
  for (; h--; ) {
    const P = t[h];
    b.has(P.key) || a(P, s);
  }
  for (; d; )
    A(_[d - 1]);
  return _;
}
function Ns(t, e) {
  const n = {}, i = {}, r = { $$scope: 1 };
  let o = t.length;
  for (; o--; ) {
    const s = t[o], l = e[o];
    if (l) {
      for (const a in s)
        a in l || (i[a] = 1);
      for (const a in l)
        r[a] || (n[a] = l[a], r[a] = 1);
      t[o] = l;
    } else
      for (const a in s)
        r[a] = 1;
  }
  for (const s in i)
    s in n || (n[s] = void 0);
  return n;
}
function Qu(t) {
  return typeof t == "object" && t !== null ? t : {};
}
function Qi(t, e, n, i) {
  const r = t.$$.props[e];
  r !== void 0 && (t.$$.bound[r] = n, i === void 0 && n(t.$$.ctx[r]));
}
function oe(t) {
  t && t.c();
}
function ie(t, e, n, i) {
  const { fragment: r, after_update: o } = t.$$;
  r && r.m(e, n), i || dl(() => {
    const s = t.$$.on_mount.map(dk).filter(Fn);
    t.$$.on_destroy ? t.$$.on_destroy.push(...s) : nt(s), t.$$.on_mount = [];
  }), o.forEach(dl);
}
function re(t, e) {
  const n = t.$$;
  n.fragment !== null && (nt(n.on_destroy), n.fragment && n.fragment.d(e), n.on_destroy = n.fragment = null, n.ctx = []);
}
function N8(t, e) {
  t.$$.dirty[0] === -1 && (sa.push(t), vk(), t.$$.dirty.fill(0)), t.$$.dirty[e / 31 | 0] |= 1 << e % 31;
}
function je(t, e, n, i, r, o, s, l = [-1]) {
  const a = Ma;
  pa(t);
  const f = t.$$ = {
    fragment: null,
    ctx: [],
    props: o,
    update: fe,
    not_equal: r,
    bound: f1(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (a ? a.$$.context : [])),
    callbacks: f1(),
    dirty: l,
    skip_bound: !1,
    root: e.target || a.$$.root
  };
  s && s(f.root);
  let c = !1;
  if (f.ctx = n ? n(t, e.props || {}, (u, h, ...d) => {
    const p = d.length ? d[0] : h;
    return f.ctx && r(f.ctx[u], f.ctx[u] = p) && (!f.skip_bound && f.bound[u] && f.bound[u](p), c && N8(t, u)), h;
  }) : [], f.update(), c = !0, nt(f.before_update), f.fragment = i ? i(f.ctx) : !1, e.target) {
    if (e.hydrate) {
      const u = S8(e.target);
      f.fragment && f.fragment.l(u), u.forEach(j);
    } else
      f.fragment && f.fragment.c();
    e.intro && k(t.$$.fragment), ie(t, e.target, e.anchor, e.customElement), kk();
  }
  pa(a);
}
class Be {
  $destroy() {
    re(this, 1), this.$destroy = fe;
  }
  $on(e, n) {
    if (!Fn(n))
      return fe;
    const i = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return i.push(n), () => {
      const r = i.indexOf(n);
      r !== -1 && i.splice(r, 1);
    };
  }
  $set(e) {
    this.$$set && !_8(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);
  }
}
function Cn(t, e) {
  return e && t && e.items.find((n) => n.id === t);
}
function D8(t, e) {
  return t.items.filter((n) => n.kind === "node").forEach((n) => {
    n.children = [], (!n.pos || !n.pos.hasOwnProperty("x") || !n.pos.hasOwnProperty("y")) && (console.error(`Got null position for ${n.label}`), n.pos = { x: Math.random() * 600, y: Math.random() * 600 }), n.notes = n.notes ?? "", n.hasOwnProperty("parent") || (n.parent = null);
  }), t.items.filter((n) => n.kind === "note").forEach((n) => {
    n.children = [];
  }), t.items.forEach((n) => {
    if (n.parent) {
      let i = Cn(n.parent, t);
      if (!i) {
        delete n.parent;
        return;
      }
      i.children = [...i.children || [], n.id];
    }
  }), t;
}
function j8(t, e) {
  let n = Cn(t.parent, e);
  return n && (t.parent = n.parent), e;
}
function Qd(t, e, n, i) {
  t.pos.x += n, t.pos.y += i, (t.children || []).forEach((r) => {
    let o = Cn(r, e);
    Qd(o, e, n, i);
  });
}
function Yd(t, e, n, i) {
  var v;
  if ((t.children || []).forEach((M) => {
    let A = Cn(M, e);
    Yd(A, e, n, i);
  }), i && i.kind === "movingitem" && !i.item.map((M) => Fc(e, M)).flat().includes(t))
    return;
  let r = t.nodenotesfontsize || e.theme.nodenotesfontsize || 16, o = Math.min(300, t.notes ? t.notes.length * (r - 6) : 0), s = t.notes ? (Math.ceil(t.notes.length * (r - 6) / o) + t.notes.split(/\r\n|\r|\n/).length) * (r + 4) : 0;
  t.noteswidth = o, t.notesheight = s;
  let l = t.has_dynamic_notes ? 140 : 0, a = t.children.length > 0 || ((v = t.notes) == null ? void 0 : v.length) > 0 ? "700" : "300", f = t.nodelabelfontsize || e.theme.nodelabelfontsize || 16, c = x8(n, t.label, e.theme.font, f, a);
  t.labelwidth = c.width + 60, t.labelheight = c.height;
  let u = Math.max(t.labelwidth / 2, o / 2), h = Math.max(...t.children.map((M) => {
    let A = Cn(M, e);
    return A.pos.x + A.width / 2 + 15;
  }), t.pos.x) - t.pos.x, d = t.pos.x - Math.min(...t.children.map((M) => {
    let A = Cn(M, e);
    return A.pos.x - A.width / 2 - 15;
  }), t.pos.x);
  t.is_collapsed ? t.width = 2 * u + 20 : t.width = 2 * Math.max(u, h, d) + 20;
  let p = t.labelheight / 2 + s / 2 + l / 2, g = t.children.map((M) => {
    let A = Cn(M, e);
    return A.pos.y + A.height / 2 + 20;
  }), _ = Math.max(...g, t.pos.y) - t.pos.y, b = t.children.map((M) => {
    let A = Cn(M, e);
    return A.pos.y - A.height / 2 - 20 - 30 - s - l;
  }), y = t.pos.y - Math.min(...b, t.pos.y);
  t.is_collapsed ? t.height = 2 * p + 20 : t.height = 2 * Math.max(p, y, _) + 20;
}
function Ck(t, e, n, i) {
  t.level = i && i.id === t.id ? 500 + n : n, t.children.forEach((r) => Ck(Cn(r, e), e, t.level + 2, i));
}
function Ws(t, e, n, i) {
  return t ? (D8(t), t.items.filter((r) => r.kind === "node" && !r.parent).forEach((r) => {
    Yd(r, t, n, i), Ck(r, t, 0, e);
  }), t.items.filter((r) => r.kind === "note").forEach((r) => {
    Yd(r, t, n, i);
  }), t.items.filter((r) => r.kind === "edge").forEach((r) => {
    r.level = Math.min(
      r.fromId ? Cn(r.fromId, t).level : 20,
      r.toId ? Cn(r.toId, t).level : 20
    ) - 1;
  }), t) : null;
}
function Ys(t, e, n) {
  t.kind === "edge" || t.kind === "note" ? e.items = e.items.filter((i) => i != t) : t.kind === "node" && (n ? (e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    Ys(i, e, !1);
  }), e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    Ys(i, e, !0);
  }), e.items = e.items.filter((i) => i != t)) : (e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    t.parent ? i.parent = t.parent : delete i.parent;
  }), e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    i.fromId === t.id && (t.parent ? i.fromId = t.parent : (delete i.fromId, i.fromOrphan = { pos: { x: t.pos.x, y: t.pos.y } })), i.toId === t.id && (t.parent ? i.toId = t.parent : (delete i.toId, i.toOrphan = { pos: { x: t.pos.x, y: t.pos.y } }));
  }), e.items = e.items.filter((i) => i != t)));
}
function B8(t, e, n, i, r) {
  let o = pl(n);
  n.items.push({
    id: o,
    kind: "node",
    label: `New node ${o}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Aa(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function L8(t, e, n, i, r) {
  let o = pl(n);
  n.items.push({
    id: o,
    kind: "note",
    label: "Add your notes here",
    notes: "some extra content",
    pos: Aa(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function Aa(t, e, n, i) {
  const r = t.createSVGPoint();
  r.x = e, r.y = n;
  let o = r.matrixTransform(i.getCTM().inverse());
  return { x: o.x, y: o.y };
}
function x8(t, e, n, i, r) {
  let o = "http://www.w3.org/2000/svg";
  var s = document.createElementNS(o, "text");
  s.setAttribute("font-family", n), s.setAttribute("font-size", i), s.setAttribute("font-weight", r), s.setAttributeNS(o, "x", 200), s.setAttributeNS(o, "y", 300), s.textContent = e, t.appendChild(s);
  var l = s.getBBox();
  return s.parentNode.removeChild(s), l;
}
function pl(t) {
  return Math.max(...t.items.map((e) => e.id), 0) + 1;
}
function z8(t, e, n, i, r) {
  let o = Aa(i, t, e, r), s = Aa(i, window.innerWidth, window.innerHeight, r);
  n.items.forEach((l) => {
    l.pos && (l.pos.x -= Math.round(o.x - s.x / 2), l.pos.y -= Math.round(o.y - s.y / 2));
  });
}
function V8(t, e, n, i, r) {
  let o = pl(e);
  e.items.push({
    id: o,
    kind: "node",
    label: `New node ${o}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Aa(i, t.clientX, t.clientY, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    parent: n.id
  });
}
function F8(t, e, n) {
  let i = {
    id: pl(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toOrphan: { pos: { x: e.x, y: e.y } },
    directed: !0,
    weight: 5
  };
  return n.items.push(i), i;
}
function H8(t, e, n) {
  console.log("createGraphNodeEdge");
  let i = pl(n);
  n.items.push({
    id: i,
    kind: "node",
    label: `New node ${i}`,
    desc: "",
    link: "",
    tags: [],
    parent: t.parent,
    children: [],
    pos: {
      x: t.pos.x + (100 + t.width / 2 + Math.random() * 100) * (Math.floor(e / 10) - 2),
      y: t.pos.y + (100 + t.height / 2 + Math.random() * 100) * (e % 10 - 2)
    },
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    fill: t.fill,
    stroke: t.stroke
  }), n.items.push({
    id: pl(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toId: i,
    directed: !0,
    weight: 5
  });
}
function W8(t, e, n) {
  return n.items.filter((r) => r.kind === "node").filter((r) => r.id != e.id).filter((r) => t.x > r.pos.x - r.width / 2 && t.x < r.pos.x + r.width / 2 && t.y > r.pos.y - r.height / 2 && t.y < r.pos.y + r.height / 2).sort((r, o) => o.level - r.level)[0];
}
function Sk(t, e, n) {
  return e.kind !== "node" ? [] : t.items.filter((o) => o.kind === "edge" && o.toId === e.id).map((o) => {
    let s = Cn(o.fromId, t);
    return { node: s, parents: n == 2 ? [] : Sk(t, s, n + 1) };
  });
}
function Fc(t, e) {
  if (e == null)
    return [];
  if (e.kind !== "node")
    return [];
  if (e.parent == null)
    return [];
  let n = Cn(e.parent, t);
  return [...Fc(t, n), n];
}
function ml(t, e) {
  if (t.kind === "edge")
    return ml(Cn(t.fromId, e), e) && ml(Cn(t.toId, e), e);
  if (t.kind === "note")
    return !1;
  let n = t.parent;
  for (; n; ) {
    let i = Cn(n, e);
    if (!i)
      return console.error(
        `item ${t.label}'s parent ${n} is missing`
      ), !1;
    if (i.is_collapsed)
      return i;
    n = i.parent;
  }
  return !1;
}
function U8(t, e) {
  if (!t)
    return [];
  let n = e[e.length - 1];
  return (n == null ? void 0 : n.kind) === "edge" ? [
    ...t.items.sort((i, r) => i.level - r.level).filter((i) => i.id !== n.id).filter((i) => !ml(i, t)),
    ...t.items.filter((i) => i.id === n.id)
  ] : t.items.sort((i, r) => i.level - r.level).filter((i) => !ml(i, t));
}
function q8(t) {
  let e = {};
  return e.items = t.items.map((n) => {
    if (n.kind === "node")
      return {
        id: n.id,
        kind: "node",
        label: n.label,
        notes: n.notes,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        has_dynamic_notes: n.has_dynamic_notes || !1,
        labelcolor: n.labelcolor,
        is_collapsed: n.is_collapsed || !1,
        parent: n.parent,
        pos: n.pos,
        fill: n.fill,
        stroke: n.stroke,
        badge: n.badge,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
    if (n.kind === "edge")
      return {
        id: n.id,
        kind: "edge",
        label: n.label,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        stroke: n.stroke,
        strokeType: n.strokeType,
        directed: n.directed,
        weight: n.weight,
        fromId: n.fromId,
        toId: n.toId,
        shape: n.shape,
        fromOrphan: n.fromOrphan,
        toOrphan: n.toOrphan
      };
    if (n.kind === "note")
      return {
        id: n.id,
        kind: n.kind,
        pos: n.pos,
        label: n.label,
        notes: n.notes,
        labelcolor: n.labelcolor,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
  }).sort((n, i) => n.kind === i.kind ? (n.parent || 0) - (i.parent || 0) : n.kind.localeCompare(i.kind)), e.grid = t.grid, e.theme = t.theme, e.jsondownload = t.jsondownload, e.jsonupload = t.jsonupload, e.contextmenu = t.contextmenu, e.customjson = t.customjson, e.exportcytoscape = t.exportcytoscape, e.exportsvg = t.exportsvg, e.title = t.title || "", e.description = t.description || "", e.contact = t.contact || "", JSON.stringify(e, null, 2);
}
function J8(t) {
  let e = {};
  return e.elements = t.items.filter((n) => n.kind === "node" || n.fromId && n.toId).map((n) => {
    if (n.kind === "node")
      return {
        group: "nodes",
        data: {
          id: n.id,
          parent: n.parent
        },
        position: { x: n.pos.x, y: n.pos.y }
      };
    if (n.kind === "edge")
      return {
        group: "edges",
        data: {
          id: n.id,
          source: n.fromId,
          target: n.toId
        }
      };
  }), JSON.stringify(e, null, 2);
}
const K8 = {
  elegant: {
    name: "elegant",
    bgfill: "#334155",
    grid: "cartesian",
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#bae6fd",
    nodelabelstroke: "#334155",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 2,
    nodeBackgroundImageURL: null,
    edgestroke: "red",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "Dosis",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  foresight: {
    name: "foresight",
    bgfill: "#1c170b",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#7b9ecb",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#ccc",
    edgeshape: "ortho",
    edgestroketype: "solid",
    font: "Roboto Condensed",
    badges: ["✅", "❌", "⚡", "👎", "👍", "https://cdn.discordapp.com/attachments/987690735639875584/997881951534981203/hexbadge.png"]
  },
  minimal: {
    name: "minimal",
    bgfill: "#e5e7eb",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "#1f2937",
    highlightColor: "red",
    nodefill: "white",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 15,
    nodeBackgroundImageURL: null,
    edgestroke: "#1f2937",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "PT Mono",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  classic: {
    name: "classic",
    bgfill: "#f3f3f3",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    font: "Balsamiq Sans",
    nodefill: "#fbe6a3",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#4277dd",
    edgeshape: "curved",
    edgestroketype: "solid",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  }
};
function G8(t) {
  let e, n, i, r;
  return {
    c() {
      e = lt("path"), m(e, "d", n = `M ${t[1] - t[3]},${t[2] - t[3]} l ${2 * t[3]},${2 * t[3]} M ${t[1] + t[3]},${t[2] - t[3]} l ${-2 * t[3]},${2 * t[3]}`), m(e, "data-handle", t[4]), m(e, "class", "svelte-qkserr");
    },
    m(o, s) {
      B(o, e, s), i || (r = [
        X(e, "click", t[8]),
        X(e, "mousedown", Le(t[9]))
      ], i = !0);
    },
    p(o, s) {
      s & 14 && n !== (n = `M ${o[1] - o[3]},${o[2] - o[3]} l ${2 * o[3]},${2 * o[3]} M ${o[1] + o[3]},${o[2] - o[3]} l ${-2 * o[3]},${2 * o[3]}`) && m(e, "d", n), s & 16 && m(e, "data-handle", o[4]);
    },
    d(o) {
      o && j(e), i = !1, nt(r);
    }
  };
}
function X8(t) {
  let e, n, i, r;
  return {
    c() {
      e = lt("path"), m(e, "d", n = `M ${t[1]},${t[2] - t[3]} v ${2 * t[3]} M ${t[1] - t[3]},${t[2]} h ${2 * t[3]}`), m(e, "data-handle", t[4]), m(e, "class", "svelte-qkserr");
    },
    m(o, s) {
      B(o, e, s), i || (r = [
        X(e, "click", t[6]),
        X(e, "mousedown", Le(t[7]))
      ], i = !0);
    },
    p(o, s) {
      s & 14 && n !== (n = `M ${o[1]},${o[2] - o[3]} v ${2 * o[3]} M ${o[1] - o[3]},${o[2]} h ${2 * o[3]}`) && m(e, "d", n), s & 16 && m(e, "data-handle", o[4]);
    },
    d(o) {
      o && j(e), i = !1, nt(r);
    }
  };
}
function Q8(t) {
  let e, n, i, r, o;
  function s(f, c) {
    if (f[0] === "plus")
      return X8;
    if (f[0] === "cross")
      return G8;
  }
  let l = s(t), a = l && l(t);
  return {
    c() {
      e = lt("g"), n = lt("circle"), a && a.c(), m(n, "cx", t[1]), m(n, "cy", t[2]), m(n, "r", i = t[3] + 2), m(n, "title", t[5]), m(n, "data-handle", t[4]), m(n, "class", "svelte-qkserr"), m(e, "class", "svelte-qkserr");
    },
    m(f, c) {
      B(f, e, c), w(e, n), a && a.m(e, null), r || (o = [
        X(n, "click", t[10]),
        X(n, "mousedown", Le(t[11]))
      ], r = !0);
    },
    p(f, [c]) {
      c & 2 && m(n, "cx", f[1]), c & 4 && m(n, "cy", f[2]), c & 8 && i !== (i = f[3] + 2) && m(n, "r", i), c & 32 && m(n, "title", f[5]), c & 16 && m(n, "data-handle", f[4]), l === (l = s(f)) && a ? a.p(f, c) : (a && a.d(1), a = l && l(f), a && (a.c(), a.m(e, null)));
    },
    i: fe,
    o: fe,
    d(f) {
      f && j(e), a && a.d(), r = !1, nt(o);
    }
  };
}
function Y8(t, e, n) {
  let { kind: i = "plus" } = e, { x: r } = e, { y: o } = e, { size: s = 4 } = e, { data: l } = e, { title: a } = e;
  function f(g) {
    zt.call(this, t, g);
  }
  function c(g) {
    zt.call(this, t, g);
  }
  function u(g) {
    zt.call(this, t, g);
  }
  function h(g) {
    zt.call(this, t, g);
  }
  function d(g) {
    zt.call(this, t, g);
  }
  function p(g) {
    zt.call(this, t, g);
  }
  return t.$$set = (g) => {
    "kind" in g && n(0, i = g.kind), "x" in g && n(1, r = g.x), "y" in g && n(2, o = g.y), "size" in g && n(3, s = g.size), "data" in g && n(4, l = g.data), "title" in g && n(5, a = g.title);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p
  ];
}
class Mm extends Be {
  constructor(e) {
    super(), je(this, e, Y8, Q8, Pt, {
      kind: 0,
      x: 1,
      y: 2,
      size: 3,
      data: 4,
      title: 5
    });
  }
}
function h1(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function d1(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = lt("image"), m(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), m(e, "height", i = t[1].height), m(e, "width", r = t[1].width), m(e, "preserveAspectRatio", "none"), m(e, "x", o = t[1].pos.x - t[1].width / 2), m(e, "y", s = t[1].pos.y - t[1].height / 2);
    },
    m(f, c) {
      B(f, e, c), l || (a = [
        X(e, "mousedown", Le(t[19])),
        X(e, "mouseup", Le(t[20])),
        X(e, "click", Le(t[15]))
      ], l = !0);
    },
    p(f, c) {
      c[0] & 3 && n !== (n = f[1].backgroundImageURL || f[0].nodeBackgroundImageURL) && m(e, "href", n), c[0] & 2 && i !== (i = f[1].height) && m(e, "height", i), c[0] & 2 && r !== (r = f[1].width) && m(e, "width", r), c[0] & 2 && o !== (o = f[1].pos.x - f[1].width / 2) && m(e, "x", o), c[0] & 2 && s !== (s = f[1].pos.y - f[1].height / 2) && m(e, "y", s);
    },
    d(f) {
      f && j(e), l = !1, nt(a);
    }
  };
}
function p1(t) {
  let e, n, i = t[1].notes + "", r, o, s, l, a, f, c, u, h, d;
  return {
    c() {
      e = lt("foreignObject"), n = O("div"), r = le(i), o = q(), m(n, "class", "foreign-obj-div svelte-1td5oib"), m(e, "x", s = t[1].pos.x - t[1].noteswidth / 2), m(e, "y", l = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), m(e, "font-family", a = t[0].font), m(e, "font-weight", "300"), m(e, "font-size", f = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), m(e, "width", c = t[1].noteswidth), m(e, "height", u = t[1].notesheight);
    },
    m(p, g) {
      B(p, e, g), w(e, n), w(n, r), w(n, o), h || (d = [
        X(e, "mousedown", Le(t[23])),
        X(e, "mouseup", Le(t[24])),
        X(e, "click", Le(t[13]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && i !== (i = p[1].notes + "") && Pe(r, i), g[0] & 2 && s !== (s = p[1].pos.x - p[1].noteswidth / 2) && m(e, "x", s), g[0] & 2 && l !== (l = p[1].pos.y - p[1].height / 2 + p[1].labelheight + 10) && m(e, "y", l), g[0] & 1 && a !== (a = p[0].font) && m(e, "font-family", a), g[0] & 3 && f !== (f = p[1].nodenotesfontsize || p[0].nodenotesfontsize || 16) && m(e, "font-size", f), g[0] & 2 && c !== (c = p[1].noteswidth) && m(e, "width", c), g[0] & 2 && u !== (u = p[1].notesheight) && m(e, "height", u);
    },
    d(p) {
      p && j(e), h = !1, nt(d);
    }
  };
}
function m1(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = lt("foreignObject"), n = document.createElementNS("http://www.w3.org/1999/xhtml", "div"), m(n, "xmlns", "http://www.w3.org/1999/xhtml"), m(n, "class", "dynamicnotes-div svelte-1td5oib"), m(e, "x", i = t[1].pos.x - t[1].width / 2), m(e, "y", r = t[1].pos.y - t[1].height / 2 + 30 + t[1].notesheight), m(e, "font-family", o = t[0].font), m(e, "font-weight", "300"), m(e, "font-size", s = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), m(e, "width", l = t[1].width), m(e, "height", 140);
    },
    m(c, u) {
      B(c, e, u), w(e, n), n.innerHTML = t[6], a || (f = [
        X(e, "mousedown", Le(t[25])),
        X(e, "mouseup", Le(t[26])),
        X(e, "click", Le(t[12]))
      ], a = !0);
    },
    p(c, u) {
      u[0] & 64 && (n.innerHTML = c[6]), u[0] & 2 && i !== (i = c[1].pos.x - c[1].width / 2) && m(e, "x", i), u[0] & 2 && r !== (r = c[1].pos.y - c[1].height / 2 + 30 + c[1].notesheight) && m(e, "y", r), u[0] & 1 && o !== (o = c[0].font) && m(e, "font-family", o), u[0] & 3 && s !== (s = c[1].nodenotesfontsize || c[0].nodenotesfontsize || 16) && m(e, "font-size", s), u[0] & 2 && l !== (l = c[1].width) && m(e, "width", l);
    },
    d(c) {
      c && j(e), a = !1, nt(f);
    }
  };
}
function g1(t) {
  let e, n, i = [[1, 0], [0, 1], [-1, 0], [0, -1]], r = [];
  for (let s = 0; s < 4; s += 1)
    r[s] = b1(h1(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < 4; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < 4; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 770) {
        i = [[1, 0], [0, 1], [-1, 0], [0, -1]];
        let a;
        for (a = 0; a < 4; a += 1) {
          const f = h1(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = b1(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = 4; a < 4; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < 4; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < 4; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function b1(t) {
  let e, n;
  return e = new Mm({
    props: {
      kind: "plus",
      data: 22 + t[38][1] + 10 * t[38][0],
      x: t[1].pos.x + t[38][0] * t[1].width / 2,
      y: t[1].pos.y + t[38][1] * t[1].height / 2,
      title: "Create new connected node",
      size: 4
    }
  }), e.$on("click", t[8]), e.$on("mousedown", t[9]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.x = i[1].pos.x + i[38][0] * i[1].width / 2), r[0] & 2 && (o.y = i[1].pos.y + i[38][1] * i[1].height / 2), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function _1(t) {
  let e, n;
  function i(s, l) {
    return l[0] & 2 && (n = null), n == null && (n = !!s[1].badge.startsWith("http")), n ? $8 : Z8;
  }
  let r = i(t, [-1, -1]), o = r(t);
  return {
    c() {
      e = lt("g"), o.c(), m(e, "class", "badge");
    },
    m(s, l) {
      B(s, e, l), o.m(e, null);
    },
    p(s, l) {
      r === (r = i(s, l)) && o ? o.p(s, l) : (o.d(1), o = r(s), o && (o.c(), o.m(e, null)));
    },
    d(s) {
      s && j(e), o.d();
    }
  };
}
function Z8(t) {
  let e, n, i, r, o = t[1].badge + "", s, l, a, f, c;
  return {
    c() {
      e = lt("circle"), r = lt("text"), s = le(o), m(e, "cx", n = t[1].pos.x - t[1].width / 2), m(e, "cy", i = t[1].pos.y - t[1].height / 2), m(e, "r", 10), m(e, "fill", "white"), m(e, "stroke", "orange"), m(r, "x", l = t[1].pos.x - t[1].width / 2 - 7), m(r, "y", a = t[1].pos.y - t[1].height / 2 + 6), m(r, "stroke", "white"), m(r, "fill", "white"), m(r, "class", "svelte-1td5oib");
    },
    m(u, h) {
      B(u, e, h), B(u, r, h), w(r, s), f || (c = [
        X(e, "mousedown", Le(t[30])),
        X(e, "mouseup", Le(t[31])),
        X(e, "click", Le(t[32])),
        X(r, "mousedown", Le(t[33])),
        X(r, "mouseup", Le(t[34])),
        X(r, "click", Le(t[35]))
      ], f = !0);
    },
    p(u, h) {
      h[0] & 2 && n !== (n = u[1].pos.x - u[1].width / 2) && m(e, "cx", n), h[0] & 2 && i !== (i = u[1].pos.y - u[1].height / 2) && m(e, "cy", i), h[0] & 2 && o !== (o = u[1].badge + "") && Pe(s, o), h[0] & 2 && l !== (l = u[1].pos.x - u[1].width / 2 - 7) && m(r, "x", l), h[0] & 2 && a !== (a = u[1].pos.y - u[1].height / 2 + 6) && m(r, "y", a);
    },
    d(u) {
      u && j(e), u && j(r), f = !1, nt(c);
    }
  };
}
function $8(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = lt("image"), m(e, "x", n = t[1].pos.x - t[1].width / 2 - 10), m(e, "y", i = t[1].pos.y - t[1].height / 2 - 10), m(e, "width", 30), m(e, "height", 28), m(e, "href", r = t[1].badge);
    },
    m(l, a) {
      B(l, e, a), o || (s = [
        X(e, "mousedown", Le(t[27])),
        X(e, "mouseup", Le(t[28])),
        X(e, "click", Le(t[29]))
      ], o = !0);
    },
    p(l, a) {
      a[0] & 2 && n !== (n = l[1].pos.x - l[1].width / 2 - 10) && m(e, "x", n), a[0] & 2 && i !== (i = l[1].pos.y - l[1].height / 2 - 10) && m(e, "y", i), a[0] & 2 && r !== (r = l[1].badge) && m(e, "href", r);
    },
    d(l) {
      l && j(e), o = !1, nt(s);
    }
  };
}
function y1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d;
  return {
    c() {
      e = lt("polygon"), s = lt("line"), m(e, "points", n = [
        [
          t[1].pos.x + t[1].width / 2 - 24,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 + 24
        ].join(",")
      ].join(" ")), m(e, "fill", i = t[5] ? "transparent" : t[1].is_collapsed ? t[1].fill || t[0].nodefill : t[0].bgfill), m(e, "stroke", r = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), m(e, "stroke-width", o = t[3] || t[4] ? "2px" : "1px"), m(e, "class", "svelte-1td5oib"), m(s, "x1", l = t[1].pos.x + t[1].width / 2 - 27), m(s, "y1", a = t[1].pos.y - t[1].height / 2), m(s, "x2", f = t[1].pos.x + t[1].width / 2), m(s, "y2", c = t[1].pos.y - t[1].height / 2 + 27), m(s, "stroke", u = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), m(s, "stroke-width", "3px");
    },
    m(p, g) {
      B(p, e, g), B(p, s, g), h || (d = [
        X(e, "mousedown", Le(t[10])),
        X(e, "mouseup", Le(t[11])),
        X(e, "click", Le(t[36]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && n !== (n = [
        [
          p[1].pos.x + p[1].width / 2 - 24,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 + 24
        ].join(",")
      ].join(" ")) && m(e, "points", n), g[0] & 35 && i !== (i = p[5] ? "transparent" : p[1].is_collapsed ? p[1].fill || p[0].nodefill : p[0].bgfill) && m(e, "fill", i), g[0] & 27 && r !== (r = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && m(e, "stroke", r), g[0] & 24 && o !== (o = p[3] || p[4] ? "2px" : "1px") && m(e, "stroke-width", o), g[0] & 2 && l !== (l = p[1].pos.x + p[1].width / 2 - 27) && m(s, "x1", l), g[0] & 2 && a !== (a = p[1].pos.y - p[1].height / 2) && m(s, "y1", a), g[0] & 2 && f !== (f = p[1].pos.x + p[1].width / 2) && m(s, "x2", f), g[0] & 2 && c !== (c = p[1].pos.y - p[1].height / 2 + 27) && m(s, "y2", c), g[0] & 27 && u !== (u = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && m(s, "stroke", u);
    },
    d(p) {
      p && j(e), p && j(s), h = !1, nt(d);
    }
  };
}
function e6(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = w1(t[1]) + "", d, p = t[1].label + "", g, _, b, y, v, M, A, P, S, D, x, V, R, W, U = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && d1(t), C = t[1].notes && p1(t), L = t[1].has_dynamic_notes && m1(t), I = t[3] && !t[2].disableEditing && g1(t), H = t[1].badge && _1(t), N = t[1].kind === "node" && !t[2].disableEditing && t[1].children && t[1].children.length > 0 && y1(t);
  return {
    c() {
      var T;
      e = lt("g"), n = lt("rect"), U && U.c(), u = lt("text"), d = le(h), g = le(p), C && C.c(), P = tt(), L && L.c(), S = tt(), I && I.c(), D = tt(), H && H.c(), x = tt(), N && N.c(), m(n, "x", i = t[1].pos.x - t[1].width / 2), m(n, "y", r = t[1].pos.y - t[1].height / 2), m(n, "width", o = t[1].width), m(n, "height", s = t[1].height), m(n, "fill", l = t[5] ? "transparent" : t[1].fill || t[0].nodefill), m(n, "fill-opacity", 1), m(n, "stroke", a = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), m(n, "stroke-width", f = t[3] || t[4] ? "2px" : "1px"), m(n, "rx", c = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), m(n, "class", "svelte-1td5oib"), m(u, "x", _ = t[1].pos.x - t[1].width / 2 + 30), m(u, "y", b = t[1].pos.y - t[1].height / 2 + t[1].labelheight), m(u, "font-family", y = t[0].font), m(u, "font-weight", v = ((T = t[1].notes) == null ? void 0 : T.length) > 0 ? "700" : "300"), m(u, "font-size", M = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), m(u, "fill", A = t[1].labelcolor || t[0].nodelabelstroke), m(u, "class", "svelte-1td5oib"), m(e, "class", "svelte-1td5oib");
    },
    m(T, K) {
      B(T, e, K), w(e, n), U && U.m(e, null), w(e, u), w(u, d), w(u, g), C && C.m(e, null), w(e, P), L && L.m(e, null), w(e, S), I && I.m(e, null), w(e, D), H && H.m(e, null), w(e, x), N && N.m(e, null), V = !0, R || (W = [
        X(n, "mousedown", Le(t[17])),
        X(n, "mouseup", Le(t[18])),
        X(n, "click", Le(t[16])),
        X(u, "mousedown", Le(t[21])),
        X(u, "mouseup", Le(t[22])),
        X(u, "click", Le(t[14]))
      ], R = !0);
    },
    p(T, K) {
      var ne;
      (!V || K[0] & 2 && i !== (i = T[1].pos.x - T[1].width / 2)) && m(n, "x", i), (!V || K[0] & 2 && r !== (r = T[1].pos.y - T[1].height / 2)) && m(n, "y", r), (!V || K[0] & 2 && o !== (o = T[1].width)) && m(n, "width", o), (!V || K[0] & 2 && s !== (s = T[1].height)) && m(n, "height", s), (!V || K[0] & 35 && l !== (l = T[5] ? "transparent" : T[1].fill || T[0].nodefill)) && m(n, "fill", l), (!V || K[0] & 27 && a !== (a = T[3] ? T[0].selectionColor : T[4] ? T[0].highlightColor : T[1].bordercolor || T[0].nodeborder)) && m(n, "stroke", a), (!V || K[0] & 24 && f !== (f = T[3] || T[4] ? "2px" : "1px")) && m(n, "stroke-width", f), (!V || K[0] & 1 && c !== (c = T[0].nodeborderradius === 0 ? T[0].nodeborderradius : T[0].nodeborderradius || 5)) && m(n, "rx", c), T[1].backgroundImageURL || T[0].nodeBackgroundImageURL ? U ? U.p(T, K) : (U = d1(T), U.c(), U.m(e, u)) : U && (U.d(1), U = null), (!V || K[0] & 2) && h !== (h = w1(T[1]) + "") && Pe(d, h), (!V || K[0] & 2) && p !== (p = T[1].label + "") && Pe(g, p), (!V || K[0] & 2 && _ !== (_ = T[1].pos.x - T[1].width / 2 + 30)) && m(u, "x", _), (!V || K[0] & 2 && b !== (b = T[1].pos.y - T[1].height / 2 + T[1].labelheight)) && m(u, "y", b), (!V || K[0] & 1 && y !== (y = T[0].font)) && m(u, "font-family", y), (!V || K[0] & 2 && v !== (v = ((ne = T[1].notes) == null ? void 0 : ne.length) > 0 ? "700" : "300")) && m(u, "font-weight", v), (!V || K[0] & 3 && M !== (M = T[1].nodelabelfontsize || T[0].nodelabelfontsize || 16)) && m(u, "font-size", M), (!V || K[0] & 3 && A !== (A = T[1].labelcolor || T[0].nodelabelstroke)) && m(u, "fill", A), T[1].notes ? C ? C.p(T, K) : (C = p1(T), C.c(), C.m(e, P)) : C && (C.d(1), C = null), T[1].has_dynamic_notes ? L ? L.p(T, K) : (L = m1(T), L.c(), L.m(e, S)) : L && (L.d(1), L = null), T[3] && !T[2].disableEditing ? I ? (I.p(T, K), K[0] & 12 && k(I, 1)) : (I = g1(T), I.c(), k(I, 1), I.m(e, D)) : I && (me(), E(I, 1, 1, () => {
        I = null;
      }), ge()), T[1].badge ? H ? H.p(T, K) : (H = _1(T), H.c(), H.m(e, x)) : H && (H.d(1), H = null), T[1].kind === "node" && !T[2].disableEditing && T[1].children && T[1].children.length > 0 ? N ? N.p(T, K) : (N = y1(T), N.c(), N.m(e, null)) : N && (N.d(1), N = null);
    },
    i(T) {
      V || (k(I), V = !0);
    },
    o(T) {
      E(I), V = !1;
    },
    d(T) {
      T && j(e), U && U.d(), C && C.d(), L && L.d(), I && I.d(), H && H.d(), N && N.d(), R = !1, nt(W);
    }
  };
}
function w1(t) {
  return t.tags.includes("goal") ? "GOAL: " : t.tags.includes("project") ? "PROJECT: " : "MISC: ";
}
function t6(t) {
  let n = Array.from(t).reduce(
    (i, r) => {
      let o = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[o] = i[o] ?? [], i[o].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return "<table>" + Object.entries(n).map((i) => `<tr><td>${i[0]}</td><td><div style='display: flex'>` + i[1].map((r) => `<div style='background-color: yellow; padding: 2px 4px; border: thin solid black; margin-right: 4px'>${r.label}</div>`).join("") + "</div></td></tr>").join("") + "</table>";
}
function n6(t, e, n) {
  let i;
  const r = Is();
  let { theme: o } = e, { item: s } = e, { graph: l } = e, { isSelected: a } = e, { isHighlighted: f } = e, { isHidden: c = !1 } = e;
  function u(Q) {
    let Te = parseInt(Q.target.getAttribute("data-handle"));
    r("createnode", { from: s, handle: Te });
  }
  function h(Q) {
    let Te = parseInt(Q.target.getAttribute("data-handle"));
    r("itemcontrolmousedown", { source: s, handle: Te, rawEvent: Q });
  }
  function d(Q, Te, Se) {
    return Te.tags.forEach((Fe) => Se.add(Fe)), Te.children.forEach((Fe) => {
      d(Q, Cn(Fe, Q), Se);
    }), Se;
  }
  function p(Q) {
    zt.call(this, t, Q);
  }
  function g(Q) {
    zt.call(this, t, Q);
  }
  function _(Q) {
    zt.call(this, t, Q);
  }
  function b(Q) {
    zt.call(this, t, Q);
  }
  function y(Q) {
    zt.call(this, t, Q);
  }
  function v(Q) {
    zt.call(this, t, Q);
  }
  function M(Q) {
    zt.call(this, t, Q);
  }
  const A = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), P = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), S = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), D = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), x = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), V = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), R = (Q) => r("itemMouseDown", {
    source: s,
    rawEvent: Q,
    from: { x: Q.clientX, y: Q.clientY }
  }), W = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), U = (Q) => r("itemMouseDown", {
    source: s,
    rawEvent: Q,
    from: { x: Q.clientX, y: Q.clientY }
  }), C = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), L = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), I = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), H = (Q) => r("itemBadgeClick", { source: s, rawEvent: Q }), N = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), T = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), K = (Q) => r("itemBadgeClick", { source: s, rawEvent: Q }), ne = (Q) => r("itemMouseDown", { source: s, rawEvent: Q }), z = (Q) => r("itemMouseUp", { source: s, rawEvent: Q }), Y = (Q) => r("itemBadgeClick", { source: s, rawEvent: Q }), $ = (Q) => r("itemCollapserClick", { source: s, rawEvent: Q });
  return t.$$set = (Q) => {
    "theme" in Q && n(0, o = Q.theme), "item" in Q && n(1, s = Q.item), "graph" in Q && n(2, l = Q.graph), "isSelected" in Q && n(3, a = Q.isSelected), "isHighlighted" in Q && n(4, f = Q.isHighlighted), "isHidden" in Q && n(5, c = Q.isHidden);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 6 && n(6, i = t6(d(l, s, /* @__PURE__ */ new Set())));
  }, [
    o,
    s,
    l,
    a,
    f,
    c,
    i,
    r,
    u,
    h,
    p,
    g,
    _,
    b,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    x,
    V,
    R,
    W,
    U,
    C,
    L,
    I,
    H,
    N,
    T,
    K,
    ne,
    z,
    Y,
    $
  ];
}
class i6 extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      n6,
      e6,
      Pt,
      {
        theme: 0,
        item: 1,
        graph: 2,
        isSelected: 3,
        isHighlighted: 4,
        isHidden: 5
      },
      null,
      [-1, -1]
    );
  }
}
function v1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g = t[0].label.length > 0 && k1(t);
  return {
    c() {
      e = lt("text"), n = lt("textPath"), i = le(`➤
			`), g && g.c(), m(n, "href", r = `#edgepathmain${t[0].id}`), m(n, "startOffset", o = t[0].label.length > 0 ? "20%" : "50%"), m(n, "lengthAdjust", "spacingAndGlyphs"), m(n, "font-family", "Verdana"), m(n, "font-size", "20"), m(n, "start", ""), m(n, "fill", s = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(n, "stroke", l = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(n, "stroke-width", a = t[0].weight || 5), m(n, "style", f = `--hoverColor: ${t[1].theme.selectionColor}`), m(n, "class", "svelte-18y4spp"), m(e, "font-family", c = t[1].theme.font), m(e, "class", "arrowhead svelte-18y4spp"), m(e, "font-size", "20"), m(e, "fill", u = t[0].stroke), m(e, "style", h = `--hoverColor: ${t[1].theme.selectionColor}`);
    },
    m(_, b) {
      B(_, e, b), w(e, n), w(n, i), g && g.m(e, null), d || (p = [
        X(n, "mousedown", Le(t[28])),
        X(n, "mouseup", Le(t[29])),
        X(n, "click", Le(t[15])),
        X(e, "mousedown", Le(t[32])),
        X(e, "mouseup", Le(t[33])),
        X(e, "click", Le(t[13]))
      ], d = !0);
    },
    p(_, b) {
      b[0] & 1 && r !== (r = `#edgepathmain${_[0].id}`) && m(n, "href", r), b[0] & 1 && o !== (o = _[0].label.length > 0 ? "20%" : "50%") && m(n, "startOffset", o), b[0] & 7 && s !== (s = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && m(n, "fill", s), b[0] & 7 && l !== (l = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && m(n, "stroke", l), b[0] & 1 && a !== (a = _[0].weight || 5) && m(n, "stroke-width", a), b[0] & 2 && f !== (f = `--hoverColor: ${_[1].theme.selectionColor}`) && m(n, "style", f), _[0].label.length > 0 ? g ? g.p(_, b) : (g = k1(_), g.c(), g.m(e, null)) : g && (g.d(1), g = null), b[0] & 2 && c !== (c = _[1].theme.font) && m(e, "font-family", c), b[0] & 1 && u !== (u = _[0].stroke) && m(e, "fill", u), b[0] & 2 && h !== (h = `--hoverColor: ${_[1].theme.selectionColor}`) && m(e, "style", h);
    },
    d(_) {
      _ && j(e), g && g.d(), d = !1, nt(p);
    }
  };
}
function k1(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = lt("textPath"), n = le(`➤
				`), m(e, "href", i = `#edgepathmain${t[0].id}`), m(e, "startOffset", "80%"), m(e, "lengthAdjust", "spacingAndGlyphs"), m(e, "font-family", "Verdana"), m(e, "font-size", "20"), m(e, "start", ""), m(e, "fill", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(e, "stroke", o = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(e, "stroke-width", s = t[0].weight || 5), m(e, "style", l = `--hoverColor: ${t[1].theme.selectionColor}`), m(e, "class", "svelte-18y4spp");
    },
    m(c, u) {
      B(c, e, u), w(e, n), a || (f = [
        X(e, "mousedown", Le(t[30])),
        X(e, "mouseup", Le(t[31])),
        X(e, "click", Le(t[14]))
      ], a = !0);
    },
    p(c, u) {
      u[0] & 1 && i !== (i = `#edgepathmain${c[0].id}`) && m(e, "href", i), u[0] & 7 && r !== (r = c[2] ? c[1].theme.selectionColor : c[0].stroke || c[1].theme.edgestroke) && m(e, "fill", r), u[0] & 7 && o !== (o = c[2] ? c[1].theme.selectionColor : c[0].stroke || c[1].theme.edgestroke) && m(e, "stroke", o), u[0] & 1 && s !== (s = c[0].weight || 5) && m(e, "stroke-width", s), u[0] & 2 && l !== (l = `--hoverColor: ${c[1].theme.selectionColor}`) && m(e, "style", l);
    },
    d(c) {
      c && j(e), a = !1, nt(f);
    }
  };
}
function C1(t) {
  let e, n;
  return e = new Mm({
    props: {
      kind: "cross",
      data: "from",
      x: t[5].x,
      y: t[5].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32 && (o.x = i[5].x), r[0] & 32 && (o.y = i[5].y), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function S1(t) {
  let e, n;
  return e = new Mm({
    props: {
      kind: "cross",
      data: "to",
      x: t[4].x,
      y: t[4].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16 && (o.x = i[4].x), r[0] & 16 && (o.y = i[4].y), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function r6(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g = t[0].label + "", _, b, y, v, M, A, P, S, D, x, V, R, W, U = t[0].directed && v1(t), C = t[2] && t[5] && !t[1].disableEditing && C1(t), L = t[2] && t[4] && !t[1].disableEditing && S1(t);
  return {
    c() {
      e = lt("g"), n = lt("path"), f = lt("path"), d = lt("text"), p = lt("textPath"), _ = le(g), U && U.c(), D = tt(), C && C.c(), x = tt(), L && L.c(), m(n, "d", i = t[7](t[1])), m(n, "fill", "none"), m(n, "stroke", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(n, "stroke-width", o = t[0].weight || 5), m(n, "class", "edgePath svelte-18y4spp"), m(n, "id", s = `edgepathmain${t[0].id}`), m(n, "stroke-dasharray", l = M1(t[0].strokeType || t[1].theme.edgestroketype)), m(n, "style", a = `--hoverColor: ${t[1].theme.selectionColor}`), m(f, "d", c = t[7](t[1])), m(f, "fill", "none"), m(f, "stroke", "transparent"), m(f, "stroke-width", u = t[0].weight || 5), m(f, "transform", t[3]), m(f, "id", h = `edgepath${t[0].id}`), m(f, "class", "svelte-18y4spp"), m(p, "href", b = `#edgepath${t[0].id}`), m(p, "startOffset", "40%"), m(p, "lengthAdjust", "spacingAndGlyphs"), m(p, "font-family", "Verdana"), m(p, "font-size", "20"), m(p, "fill", y = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(p, "stroke", v = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), m(p, "style", M = `--hoverColor: ${t[1].theme.selectionColor}`), m(p, "class", "svelte-18y4spp"), m(d, "font-family", A = t[1].theme.font), m(d, "font-size", "20"), m(d, "fill", P = t[0].stroke), m(d, "style", S = `--hoverColor: ${t[1].theme.selectionColor}`), m(d, "class", "svelte-18y4spp"), m(e, "class", "svelte-18y4spp");
    },
    m(I, H) {
      B(I, e, H), w(e, n), w(e, f), w(e, d), w(d, p), w(p, _), U && U.m(e, null), w(e, D), C && C.m(e, null), w(e, x), L && L.m(e, null), V = !0, R || (W = [
        X(n, "mousedown", Le(t[20])),
        X(n, "mouseup", Le(t[21])),
        X(n, "click", Le(t[19])),
        X(f, "mousedown", Le(t[22])),
        X(f, "mouseup", Le(t[23])),
        X(f, "click", Le(t[18])),
        X(p, "mousedown", Le(t[24])),
        X(p, "mouseup", Le(t[25])),
        X(p, "click", Le(t[17])),
        X(d, "mousedown", Le(t[26])),
        X(d, "mouseup", Le(t[27])),
        X(d, "click", Le(t[16]))
      ], R = !0);
    },
    p(I, H) {
      (!V || H[0] & 2 && i !== (i = I[7](I[1]))) && m(n, "d", i), (!V || H[0] & 7 && r !== (r = I[2] ? I[1].theme.selectionColor : I[0].stroke || I[1].theme.edgestroke)) && m(n, "stroke", r), (!V || H[0] & 1 && o !== (o = I[0].weight || 5)) && m(n, "stroke-width", o), (!V || H[0] & 1 && s !== (s = `edgepathmain${I[0].id}`)) && m(n, "id", s), (!V || H[0] & 3 && l !== (l = M1(I[0].strokeType || I[1].theme.edgestroketype))) && m(n, "stroke-dasharray", l), (!V || H[0] & 2 && a !== (a = `--hoverColor: ${I[1].theme.selectionColor}`)) && m(n, "style", a), (!V || H[0] & 2 && c !== (c = I[7](I[1]))) && m(f, "d", c), (!V || H[0] & 1 && u !== (u = I[0].weight || 5)) && m(f, "stroke-width", u), (!V || H[0] & 8) && m(f, "transform", I[3]), (!V || H[0] & 1 && h !== (h = `edgepath${I[0].id}`)) && m(f, "id", h), (!V || H[0] & 1) && g !== (g = I[0].label + "") && Pe(_, g), (!V || H[0] & 1 && b !== (b = `#edgepath${I[0].id}`)) && m(p, "href", b), (!V || H[0] & 7 && y !== (y = I[2] ? I[1].theme.selectionColor : I[0].stroke || I[1].theme.edgestroke)) && m(p, "fill", y), (!V || H[0] & 7 && v !== (v = I[2] ? I[1].theme.selectionColor : I[0].stroke || I[1].theme.edgestroke)) && m(p, "stroke", v), (!V || H[0] & 2 && M !== (M = `--hoverColor: ${I[1].theme.selectionColor}`)) && m(p, "style", M), (!V || H[0] & 2 && A !== (A = I[1].theme.font)) && m(d, "font-family", A), (!V || H[0] & 1 && P !== (P = I[0].stroke)) && m(d, "fill", P), (!V || H[0] & 2 && S !== (S = `--hoverColor: ${I[1].theme.selectionColor}`)) && m(d, "style", S), I[0].directed ? U ? U.p(I, H) : (U = v1(I), U.c(), U.m(e, D)) : U && (U.d(1), U = null), I[2] && I[5] && !I[1].disableEditing ? C ? (C.p(I, H), H[0] & 38 && k(C, 1)) : (C = C1(I), C.c(), k(C, 1), C.m(e, x)) : C && (me(), E(C, 1, 1, () => {
        C = null;
      }), ge()), I[2] && I[4] && !I[1].disableEditing ? L ? (L.p(I, H), H[0] & 22 && k(L, 1)) : (L = S1(I), L.c(), k(L, 1), L.m(e, null)) : L && (me(), E(L, 1, 1, () => {
        L = null;
      }), ge());
    },
    i(I) {
      V || (k(C), k(L), V = !0);
    },
    o(I) {
      E(C), E(L), V = !1;
    },
    d(I) {
      I && j(e), U && U.d(), C && C.d(), L && L.d(), R = !1, nt(W);
    }
  };
}
function M1(t) {
  return t === "dashed" ? "8,5" : t === "dotted" ? "5,5" : !1;
}
function o6(t, e, n) {
  let i, r, o, s, l, a, f;
  const c = Is();
  let { item: u } = e, { graph: h } = e, { isSelected: d } = e;
  function p(z) {
    let Y = u.shape || z.theme.edgeshape;
    if (Y === "straight")
      return `M ${l.x},${l.y} L ${a.x},${a.y}`;
    if (Y === "curved") {
      let $ = {
        x: o.pos.x + 30,
        y: o.pos.y + 30
      }, Q = {
        x: s.pos.x - 30,
        y: s.pos.y - 30
      };
      return [
        `M ${l.x},${l.y}`,
        "C",
        `${$.x},${$.y}`,
        `${Q.x},${Q.y}`,
        `${a.x},${a.y}`
      ].join(" ");
    } else if (Y === "ortho")
      return `M ${l.x},${l.y} h ${(a.x - l.x) / 2} v ${a.y - l.y} L ${a.x},${a.y}`;
  }
  function g(z) {
    z.target.getAttribute("data-handle"), c("edgeChanged", { source: u });
  }
  function _(z, Y) {
    let $ = (z.pos.x + Y.pos.x) / 2, Q = (z.pos.y + Y.pos.y) / 2, Te = Math.atan2(Y.pos.y - z.pos.y, Y.pos.x - z.pos.x) * 180 / Math.PI;
    return Te < -90 || Te > 90 ? `translate(0, -6) rotate(180, ${$}, ${Q})` : "translate(0, -6) rotate(0)";
  }
  function b(z) {
    zt.call(this, t, z);
  }
  function y(z) {
    zt.call(this, t, z);
  }
  function v(z) {
    zt.call(this, t, z);
  }
  function M(z) {
    zt.call(this, t, z);
  }
  function A(z) {
    zt.call(this, t, z);
  }
  function P(z) {
    zt.call(this, t, z);
  }
  function S(z) {
    zt.call(this, t, z);
  }
  const D = (z) => c("itemMouseDown", { source: u, rawEvent: z }), x = (z) => c("itemMouseUp", { source: u, rawEvent: z }), V = (z) => c("itemMouseDown", { source: u, rawEvent: z }), R = (z) => c("itemMouseUp", { source: u, rawEvent: z }), W = (z) => c("itemMouseDown", { source: u, rawEvent: z }), U = (z) => c("itemMouseUp", { source: u, rawEvent: z }), C = (z) => c("itemMouseDown", { source: u, rawEvent: z }), L = (z) => c("itemMouseUp", { source: u, rawEvent: z }), I = (z) => c("itemMouseDown", { source: u, rawEvent: z }), H = (z) => c("itemMouseUp", { source: u, rawEvent: z }), N = (z) => c("itemMouseDown", { source: u, rawEvent: z }), T = (z) => c("itemMouseUp", { source: u, rawEvent: z }), K = (z) => c("itemMouseDown", { source: u, rawEvent: z }), ne = (z) => c("itemMouseUp", { source: u, rawEvent: z });
  return t.$$set = (z) => {
    "item" in z && n(0, u = z.item), "graph" in z && n(1, h = z.graph), "isSelected" in z && n(2, d = z.isSelected);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(12, i = u.fromOrphan || Cn(u.fromId, h)), t.$$.dirty[0] & 3 && n(11, r = u.toOrphan || Cn(u.toId, h)), t.$$.dirty[0] & 4098 && n(10, o = ml(i, h) || i), t.$$.dirty[0] & 2050 && n(9, s = ml(r, h) || r), t.$$.dirty[0] & 1024 && n(5, l = o && { x: o.pos.x, y: o.pos.y }), t.$$.dirty[0] & 512 && n(4, a = s && { x: s.pos.x, y: s.pos.y }), t.$$.dirty[0] & 1536 && n(3, f = o && s && _(o, s));
  }, [
    u,
    h,
    d,
    f,
    a,
    l,
    c,
    p,
    g,
    s,
    o,
    r,
    i,
    b,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    x,
    V,
    R,
    W,
    U,
    C,
    L,
    I,
    H,
    N,
    T,
    K,
    ne
  ];
}
class s6 extends Be {
  constructor(e) {
    super(), je(this, e, o6, r6, Pt, { item: 0, graph: 1, isSelected: 2 }, null, [-1, -1]);
  }
}
function A1(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function O1(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function T1(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function l6(t) {
  let e, n, i = t[1], r = [];
  for (let l = 0; l < i.length; l += 1)
    r[l] = E1(O1(t, i, l));
  let o = t[2], s = [];
  for (let l = 0; l < o.length; l += 1)
    s[l] = P1(A1(t, o, l));
  return {
    c() {
      for (let l = 0; l < r.length; l += 1)
        r[l].c();
      e = q();
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      n = tt();
    },
    m(l, a) {
      for (let f = 0; f < r.length; f += 1)
        r[f].m(l, a);
      B(l, e, a);
      for (let f = 0; f < s.length; f += 1)
        s[f].m(l, a);
      B(l, n, a);
    },
    p(l, a) {
      if (a & 2) {
        i = l[1];
        let f;
        for (f = 0; f < i.length; f += 1) {
          const c = O1(l, i, f);
          r[f] ? r[f].p(c, a) : (r[f] = E1(c), r[f].c(), r[f].m(e.parentNode, e));
        }
        for (; f < r.length; f += 1)
          r[f].d(1);
        r.length = i.length;
      }
      if (a & 4) {
        o = l[2];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const c = A1(l, o, f);
          s[f] ? s[f].p(c, a) : (s[f] = P1(c), s[f].c(), s[f].m(n.parentNode, n));
        }
        for (; f < s.length; f += 1)
          s[f].d(1);
        s.length = o.length;
      }
    },
    d(l) {
      Dt(r, l), l && j(e), Dt(s, l), l && j(n);
    }
  };
}
function a6(t) {
  let e, n = t[1], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = R1(T1(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = tt();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, o) {
      if (o & 2) {
        n = r[1];
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = T1(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = R1(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      Dt(i, r), r && j(e);
    }
  };
}
function E1(t) {
  let e;
  return {
    c() {
      e = lt("circle"), m(e, "r", 100 + t[3]), m(e, "stroke", "black"), m(e, "fill", "none"), m(e, "opacity", "0.6");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function P1(t) {
  let e;
  return {
    c() {
      e = lt("line"), m(e, "x1", -5e3 * Math.cos(t[6])), m(e, "y1", -5e3 * Math.sin(t[6])), m(e, "x2", 5e3 * Math.cos(t[6])), m(e, "y2", 5e3 * Math.sin(t[6])), m(e, "class", "svelte-19wjlzj");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function R1(t) {
  let e, n, i;
  return {
    c() {
      e = lt("line"), n = q(), i = lt("line"), m(e, "x1", "0"), m(e, "y1", 0 + t[3]), m(e, "x2", 5e3), m(e, "y2", 0 + t[3]), m(e, "class", "svelte-19wjlzj"), m(i, "x1", 0 + t[3]), m(i, "y1", "0"), m(i, "x2", 0 + t[3]), m(i, "y2", "5000"), m(i, "class", "svelte-19wjlzj");
    },
    m(r, o) {
      B(r, e, o), B(r, n, o), B(r, i, o);
    },
    p: fe,
    d(r) {
      r && j(e), r && j(n), r && j(i);
    }
  };
}
function f6(t) {
  let e;
  function n(o, s) {
    if (o[0] === "cartesian")
      return a6;
    if (o[0] === "polar")
      return l6;
  }
  let i = n(t), r = i && i(t);
  return {
    c() {
      r && r.c(), e = tt();
    },
    m(o, s) {
      r && r.m(o, s), B(o, e, s);
    },
    p(o, [s]) {
      i === (i = n(o)) && r ? r.p(o, s) : (r && r.d(1), r = i && i(o), r && (r.c(), r.m(e.parentNode, e)));
    },
    i: fe,
    o: fe,
    d(o) {
      r && r.d(o), o && j(e);
    }
  };
}
function c6(t, e, n) {
  let i = [...Array(50).keys()].map((s) => s * 100), r = [0, 30, 60, 90, 120, 150].map((s) => s * Math.PI / 180), { kind: o } = e;
  return t.$$set = (s) => {
    "kind" in s && n(0, o = s.kind);
  }, [o, i, r];
}
class u6 extends Be {
  constructor(e) {
    super(), je(this, e, c6, f6, Pt, { kind: 0 });
  }
}
function I1(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = lt("image"), m(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), m(e, "height", i = t[1].height), m(e, "width", r = t[1].width), m(e, "preserveAspectRatio", "none"), m(e, "x", o = t[1].pos.x - t[1].width / 2), m(e, "y", s = t[1].pos.y - t[1].height / 2);
    },
    m(f, c) {
      B(f, e, c), l || (a = [
        X(e, "mousedown", Le(t[10])),
        X(e, "mouseup", Le(t[11])),
        X(e, "click", Le(t[6]))
      ], l = !0);
    },
    p(f, c) {
      c & 3 && n !== (n = f[1].backgroundImageURL || f[0].nodeBackgroundImageURL) && m(e, "href", n), c & 2 && i !== (i = f[1].height) && m(e, "height", i), c & 2 && r !== (r = f[1].width) && m(e, "width", r), c & 2 && o !== (o = f[1].pos.x - f[1].width / 2) && m(e, "x", o), c & 2 && s !== (s = f[1].pos.y - f[1].height / 2) && m(e, "y", s);
    },
    d(f) {
      f && j(e), l = !1, nt(a);
    }
  };
}
function N1(t) {
  let e, n, i = t[1].notes + "", r, o, s, l, a, f, c, u, h;
  return {
    c() {
      e = lt("foreignObject"), n = O("div"), r = le(i), m(n, "class", "foreign-obj-div svelte-3cf8cd"), m(e, "x", o = t[1].pos.x - t[1].noteswidth / 2), m(e, "y", s = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), m(e, "font-family", l = t[0].font), m(e, "font-weight", "300"), m(e, "font-size", a = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), m(e, "width", f = t[1].noteswidth), m(e, "height", c = t[1].notesheight);
    },
    m(d, p) {
      B(d, e, p), w(e, n), w(n, r), u || (h = [
        X(e, "mousedown", Le(t[14])),
        X(e, "mouseup", Le(t[15])),
        X(e, "click", Le(t[4]))
      ], u = !0);
    },
    p(d, p) {
      p & 2 && i !== (i = d[1].notes + "") && Pe(r, i), p & 2 && o !== (o = d[1].pos.x - d[1].noteswidth / 2) && m(e, "x", o), p & 2 && s !== (s = d[1].pos.y - d[1].height / 2 + d[1].labelheight + 10) && m(e, "y", s), p & 1 && l !== (l = d[0].font) && m(e, "font-family", l), p & 3 && a !== (a = d[1].nodenotesfontsize || d[0].nodenotesfontsize || 16) && m(e, "font-size", a), p & 2 && f !== (f = d[1].noteswidth) && m(e, "width", f), p & 2 && c !== (c = d[1].notesheight) && m(e, "height", c);
    },
    d(d) {
      d && j(e), u = !1, nt(h);
    }
  };
}
function h6(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = t[1].label + "", d, p, g, _, b, y, v, M, A, P = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && I1(t), S = t[1].notes && N1(t);
  return {
    c() {
      var D;
      e = lt("g"), n = lt("rect"), P && P.c(), u = lt("text"), d = le(h), S && S.c(), m(n, "x", i = t[1].pos.x - t[1].width / 2), m(n, "y", r = t[1].pos.y - t[1].height / 2), m(n, "width", o = t[1].width), m(n, "height", s = t[1].height), m(n, "fill", l = t[1].fill || t[0].nodefill), m(n, "fill-opacity", 1), m(n, "stroke", a = t[2] ? t[0].selectionColor : t[1].bordercolor || t[0].nodeborder), m(n, "stroke-width", f = t[2] ? "6px" : "3px"), m(n, "rx", c = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), m(n, "class", "svelte-3cf8cd"), m(u, "x", p = t[1].pos.x - t[1].width / 2 + 30), m(u, "y", g = t[1].pos.y - t[1].height / 2 + 20), m(u, "font-family", _ = t[0].font), m(u, "font-weight", b = ((D = t[1].notes) == null ? void 0 : D.length) > 0 ? "700" : "300"), m(u, "font-size", y = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), m(u, "fill", v = t[1].labelcolor || t[0].nodelabelstroke), m(u, "class", "svelte-3cf8cd"), m(e, "class", "svelte-3cf8cd");
    },
    m(D, x) {
      B(D, e, x), w(e, n), P && P.m(e, null), w(e, u), w(u, d), S && S.m(e, null), M || (A = [
        X(n, "mousedown", Le(t[8])),
        X(n, "mouseup", Le(t[9])),
        X(n, "click", Le(t[7])),
        X(u, "mousedown", Le(t[12])),
        X(u, "mouseup", Le(t[13])),
        X(u, "click", Le(t[5]))
      ], M = !0);
    },
    p(D, [x]) {
      var V;
      x & 2 && i !== (i = D[1].pos.x - D[1].width / 2) && m(n, "x", i), x & 2 && r !== (r = D[1].pos.y - D[1].height / 2) && m(n, "y", r), x & 2 && o !== (o = D[1].width) && m(n, "width", o), x & 2 && s !== (s = D[1].height) && m(n, "height", s), x & 3 && l !== (l = D[1].fill || D[0].nodefill) && m(n, "fill", l), x & 7 && a !== (a = D[2] ? D[0].selectionColor : D[1].bordercolor || D[0].nodeborder) && m(n, "stroke", a), x & 4 && f !== (f = D[2] ? "6px" : "3px") && m(n, "stroke-width", f), x & 1 && c !== (c = D[0].nodeborderradius === 0 ? D[0].nodeborderradius : D[0].nodeborderradius || 5) && m(n, "rx", c), D[1].backgroundImageURL || D[0].nodeBackgroundImageURL ? P ? P.p(D, x) : (P = I1(D), P.c(), P.m(e, u)) : P && (P.d(1), P = null), x & 2 && h !== (h = D[1].label + "") && Pe(d, h), x & 2 && p !== (p = D[1].pos.x - D[1].width / 2 + 30) && m(u, "x", p), x & 2 && g !== (g = D[1].pos.y - D[1].height / 2 + 20) && m(u, "y", g), x & 1 && _ !== (_ = D[0].font) && m(u, "font-family", _), x & 2 && b !== (b = ((V = D[1].notes) == null ? void 0 : V.length) > 0 ? "700" : "300") && m(u, "font-weight", b), x & 3 && y !== (y = D[1].nodelabelfontsize || D[0].nodelabelfontsize || 16) && m(u, "font-size", y), x & 3 && v !== (v = D[1].labelcolor || D[0].nodelabelstroke) && m(u, "fill", v), D[1].notes ? S ? S.p(D, x) : (S = N1(D), S.c(), S.m(e, null)) : S && (S.d(1), S = null);
    },
    i: fe,
    o: fe,
    d(D) {
      D && j(e), P && P.d(), S && S.d(), M = !1, nt(A);
    }
  };
}
function d6(t, e, n) {
  const i = Is();
  let { theme: r } = e, { item: o } = e, { isSelected: s } = e;
  function l(v) {
    zt.call(this, t, v);
  }
  function a(v) {
    zt.call(this, t, v);
  }
  function f(v) {
    zt.call(this, t, v);
  }
  function c(v) {
    zt.call(this, t, v);
  }
  const u = (v) => i("itemMouseDown", { source: o, rawEvent: v }), h = (v) => i("itemMouseUp", { source: o, rawEvent: v }), d = (v) => i("itemMouseDown", { source: o, rawEvent: v }), p = (v) => i("itemMouseUp", { source: o, rawEvent: v }), g = (v) => i("itemMouseDown", { source: o, rawEvent: v }), _ = (v) => i("itemMouseUp", { source: o, rawEvent: v }), b = (v) => i("itemMouseDown", {
    source: o,
    rawEvent: v,
    from: { x: v.clientX, y: v.clientY }
  }), y = (v) => i("itemMouseUp", { source: o, rawEvent: v });
  return t.$$set = (v) => {
    "theme" in v && n(0, r = v.theme), "item" in v && n(1, o = v.item), "isSelected" in v && n(2, s = v.isSelected);
  }, [
    r,
    o,
    s,
    i,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y
  ];
}
class p6 extends Be {
  constructor(e) {
    super(), je(this, e, d6, h6, Pt, { theme: 0, item: 1, isSelected: 2 });
  }
}
function Wn(t, e = !!g6("debug")) {
  if (e) {
    const n = b6(t);
    return function(...r) {
      console.log(`%c${t}`, `color:${n}`, ...r);
    };
  } else
    return m6;
}
function m6() {
}
function g6(t) {
  try {
    if (typeof window < "u" && typeof window.localStorage < "u")
      return window.localStorage[t];
  } catch {
  }
}
function b6(t) {
  let e = 0;
  for (let n = 0; n < t.length; n++)
    e = (e << 5) - e + t.charCodeAt(n), e |= 0;
  return D1[Math.abs(e) % D1.length];
}
const D1 = [
  "#0000CC",
  "#0099FF",
  "#009400",
  "#8dd200",
  "#CCCC00",
  "#CC9933",
  "#ae04e7",
  "#ff35d7",
  "#FF3333",
  "#FF6600",
  "#FF9933",
  "#FFCC33"
];
function _6(t, { delay: e = 0, duration: n = 400, easing: i = hk } = {}) {
  const r = +getComputedStyle(t).opacity;
  return {
    delay: e,
    duration: n,
    easing: i,
    css: (o) => `opacity: ${o * r}`
  };
}
const { window: y6 } = Ku;
function j1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y = t[1].closeButton && B1(t);
  var v = t[2];
  function M(A) {
    return {};
  }
  return v && (s = jr(v, M())), {
    c() {
      e = O("div"), n = O("div"), i = O("div"), y && y.c(), r = q(), o = O("div"), s && oe(s.$$.fragment), m(o, "class", l = fn(t[1].classContent) + " svelte-n7cvum"), m(o, "style", t[9]), pe(o, "content", !t[0]), m(i, "class", a = fn(t[1].classWindow) + " svelte-n7cvum"), m(i, "role", "dialog"), m(i, "aria-modal", "true"), m(i, "aria-label", f = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null), m(i, "aria-labelledby", c = t[1].ariaLabelledBy || null), m(i, "style", t[8]), pe(i, "window", !t[0]), m(n, "class", h = fn(t[1].classWindowWrap) + " svelte-n7cvum"), m(n, "style", t[7]), pe(n, "wrap", !t[0]), m(e, "class", d = fn(t[1].classBg) + " svelte-n7cvum"), m(e, "style", t[6]), pe(e, "bg", !t[0]);
    },
    m(A, P) {
      B(A, e, P), w(e, n), w(n, i), y && y.m(i, null), w(i, r), w(i, o), s && ie(s, o, null), t[49](i), t[50](n), t[51](e), g = !0, _ || (b = [
        X(i, "introstart", function() {
          Fn(t[13]) && t[13].apply(this, arguments);
        }),
        X(i, "outrostart", function() {
          Fn(t[14]) && t[14].apply(this, arguments);
        }),
        X(i, "introend", function() {
          Fn(t[15]) && t[15].apply(this, arguments);
        }),
        X(i, "outroend", function() {
          Fn(t[16]) && t[16].apply(this, arguments);
        }),
        X(e, "mousedown", t[20]),
        X(e, "mouseup", t[21])
      ], _ = !0);
    },
    p(A, P) {
      if (t = A, t[1].closeButton ? y ? (y.p(t, P), P[0] & 2 && k(y, 1)) : (y = B1(t), y.c(), k(y, 1), y.m(i, r)) : y && (me(), E(y, 1, 1, () => {
        y = null;
      }), ge()), v !== (v = t[2])) {
        if (s) {
          me();
          const S = s;
          E(S.$$.fragment, 1, 0, () => {
            re(S, 1);
          }), ge();
        }
        v ? (s = jr(v, M()), oe(s.$$.fragment), k(s.$$.fragment, 1), ie(s, o, null)) : s = null;
      }
      (!g || P[0] & 2 && l !== (l = fn(t[1].classContent) + " svelte-n7cvum")) && m(o, "class", l), (!g || P[0] & 512) && m(o, "style", t[9]), (!g || P[0] & 3) && pe(o, "content", !t[0]), (!g || P[0] & 2 && a !== (a = fn(t[1].classWindow) + " svelte-n7cvum")) && m(i, "class", a), (!g || P[0] & 2 && f !== (f = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null)) && m(i, "aria-label", f), (!g || P[0] & 2 && c !== (c = t[1].ariaLabelledBy || null)) && m(i, "aria-labelledby", c), (!g || P[0] & 256) && m(i, "style", t[8]), (!g || P[0] & 3) && pe(i, "window", !t[0]), (!g || P[0] & 2 && h !== (h = fn(t[1].classWindowWrap) + " svelte-n7cvum")) && m(n, "class", h), (!g || P[0] & 128) && m(n, "style", t[7]), (!g || P[0] & 3) && pe(n, "wrap", !t[0]), (!g || P[0] & 2 && d !== (d = fn(t[1].classBg) + " svelte-n7cvum")) && m(e, "class", d), (!g || P[0] & 64) && m(e, "style", t[6]), (!g || P[0] & 3) && pe(e, "bg", !t[0]);
    },
    i(A) {
      g || (k(y), s && k(s.$$.fragment, A), dl(() => {
        u || (u = Mf(i, t[12], t[1].transitionWindowProps, !0)), u.run(1);
      }), dl(() => {
        p || (p = Mf(e, t[11], t[1].transitionBgProps, !0)), p.run(1);
      }), g = !0);
    },
    o(A) {
      E(y), s && E(s.$$.fragment, A), u || (u = Mf(i, t[12], t[1].transitionWindowProps, !1)), u.run(0), p || (p = Mf(e, t[11], t[1].transitionBgProps, !1)), p.run(0), g = !1;
    },
    d(A) {
      A && j(e), y && y.d(), s && re(s), t[49](null), A && u && u.end(), t[50](null), t[51](null), A && p && p.end(), _ = !1, nt(b);
    }
  };
}
function B1(t) {
  let e, n, i, r, o;
  const s = [v6, w6], l = [];
  function a(f, c) {
    return c[0] & 2 && (e = null), e == null && (e = !!f[17](f[1].closeButton)), e ? 0 : 1;
  }
  return n = a(t, [-1, -1, -1]), i = l[n] = s[n](t), {
    c() {
      i.c(), r = tt();
    },
    m(f, c) {
      l[n].m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      let u = n;
      n = a(f, c), n === u ? l[n].p(f, c) : (me(), E(l[u], 1, 1, () => {
        l[u] = null;
      }), ge(), i = l[n], i ? i.p(f, c) : (i = l[n] = s[n](f), i.c()), k(i, 1), i.m(r.parentNode, r));
    },
    i(f) {
      o || (k(i), o = !0);
    },
    o(f) {
      E(i), o = !1;
    },
    d(f) {
      l[n].d(f), f && j(r);
    }
  };
}
function w6(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("button"), m(e, "class", n = fn(t[1].classCloseButton) + " svelte-n7cvum"), m(e, "aria-label", "Close modal"), m(e, "style", t[10]), m(e, "type", "button"), pe(e, "close", !t[0]);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "click", t[18]), i = !0);
    },
    p(o, s) {
      s[0] & 2 && n !== (n = fn(o[1].classCloseButton) + " svelte-n7cvum") && m(e, "class", n), s[0] & 1024 && m(e, "style", o[10]), s[0] & 3 && pe(e, "close", !o[0]);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function v6(t) {
  let e, n, i;
  var r = t[1].closeButton;
  function o(s) {
    return { props: { onClose: s[18] } };
  }
  return r && (e = jr(r, o(t))), {
    c() {
      e && oe(e.$$.fragment), n = tt();
    },
    m(s, l) {
      e && ie(e, s, l), B(s, n, l), i = !0;
    },
    p(s, l) {
      if (r !== (r = s[1].closeButton)) {
        if (e) {
          me();
          const a = e;
          E(a.$$.fragment, 1, 0, () => {
            re(a, 1);
          }), ge();
        }
        r ? (e = jr(r, o(s)), oe(e.$$.fragment), k(e.$$.fragment, 1), ie(e, n.parentNode, n)) : e = null;
      }
    },
    i(s) {
      i || (e && k(e.$$.fragment, s), i = !0);
    },
    o(s) {
      e && E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(n), e && re(e, s);
    }
  };
}
function k6(t) {
  let e, n, i, r, o = t[2] && j1(t);
  const s = t[48].default, l = Sn(s, t, t[47], null);
  return {
    c() {
      o && o.c(), e = q(), l && l.c();
    },
    m(a, f) {
      o && o.m(a, f), B(a, e, f), l && l.m(a, f), n = !0, i || (r = X(y6, "keydown", t[19]), i = !0);
    },
    p(a, f) {
      a[2] ? o ? (o.p(a, f), f[0] & 4 && k(o, 1)) : (o = j1(a), o.c(), k(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), ge()), l && l.p && (!n || f[1] & 65536) && An(
        l,
        s,
        a,
        a[47],
        n ? Mn(s, a[47], f, null) : On(a[47]),
        null
      );
    },
    i(a) {
      n || (k(o), k(l, a), n = !0);
    },
    o(a) {
      E(o), E(l, a), n = !1;
    },
    d(a) {
      o && o.d(a), a && j(e), l && l.d(a), i = !1, r();
    }
  };
}
function Mk(t, e = {}) {
  return function(i) {
    return new t({
      ...i,
      props: { ...e, ...i.props }
    });
  };
}
function C6(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const o = Is(), s = yk, l = (ce) => ce.tabIndex >= 0 && !ce.hidden && !ce.disabled && ce.style.display !== "none" && ce.type !== "hidden" && Boolean(ce.offsetWidth || ce.offsetHeight || ce.getClientRects().length);
  let { isTabbable: a = l } = e, { show: f = null } = e, { key: c = "simple-modal" } = e, { ariaLabel: u = null } = e, { ariaLabelledBy: h = null } = e, { closeButton: d = !0 } = e, { closeOnEsc: p = !0 } = e, { closeOnOuterClick: g = !0 } = e, { styleBg: _ = {} } = e, { styleWindowWrap: b = {} } = e, { styleWindow: y = {} } = e, { styleContent: v = {} } = e, { styleCloseButton: M = {} } = e, { classBg: A = null } = e, { classWindowWrap: P = null } = e, { classWindow: S = null } = e, { classContent: D = null } = e, { classCloseButton: x = null } = e, { unstyled: V = !1 } = e, { setContext: R = s } = e, { transitionBg: W = _6 } = e, { transitionBgProps: U = { duration: 250 } } = e, { transitionWindow: C = W } = e, { transitionWindowProps: L = U } = e, { disableFocusTrap: I = !1 } = e;
  const H = {
    ariaLabel: u,
    ariaLabelledBy: h,
    closeButton: d,
    closeOnEsc: p,
    closeOnOuterClick: g,
    styleBg: _,
    styleWindowWrap: b,
    styleWindow: y,
    styleContent: v,
    styleCloseButton: M,
    classBg: A,
    classWindowWrap: P,
    classWindow: S,
    classContent: D,
    classCloseButton: x,
    transitionBg: W,
    transitionBgProps: U,
    transitionWindow: C,
    transitionWindowProps: L,
    disableFocusTrap: I,
    isTabbable: a,
    unstyled: V
  };
  let N = { ...H }, T = null, K, ne, z, Y, $, Q, Te, Se, Fe, Z, Ce, Ze, be, te, ke;
  const Ue = (ce) => ce.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(), de = (ce) => ce ? Object.keys(ce).reduce((_t, qt) => `${_t}; ${Ue(qt)}: ${ce[qt]}`, "") : "", Ve = (ce) => !!(ce && ce.constructor && ce.call && ce.apply), De = () => {
    n(6, $ = de(Object.assign(
      {},
      {
        width: window.innerWidth,
        height: window.innerHeight
      },
      N.styleBg
    ))), n(7, Q = de(N.styleWindowWrap)), n(8, Te = de(N.styleWindow)), n(9, Se = de(N.styleContent)), n(10, Fe = de(N.styleCloseButton)), n(11, Z = N.transitionBg), n(12, Ce = N.transitionWindow);
  }, He = () => {
  };
  let at = He, mt = He, Ye = He, Me = He;
  const ae = (ce, _t = {}, qt = {}, ct = {}) => {
    n(2, T = Mk(ce, _t)), n(1, N = { ...H, ...qt }), De(), Un(), n(13, at = (Ft) => {
      ct.onOpen && ct.onOpen(Ft), o("open"), o("opening");
    }), n(14, mt = (Ft) => {
      ct.onClose && ct.onClose(Ft), o("close"), o("closing");
    }), n(15, Ye = (Ft) => {
      ct.onOpened && ct.onOpened(Ft), o("opened");
    }), n(16, Me = (Ft) => {
      ct.onClosed && ct.onClosed(Ft), o("closed");
    });
  }, ze = (ce = {}) => {
    T && (n(14, mt = ce.onClose || mt), n(16, Me = ce.onClosed || Me), n(2, T = null), ot());
  }, ft = (ce) => {
    if (N.closeOnEsc && T && ce.key === "Escape" && (ce.preventDefault(), ze()), T && ce.key === "Tab" && !N.disableFocusTrap) {
      const _t = z.querySelectorAll("*"), qt = Array.from(_t).filter(N.isTabbable).sort((Ft, bn) => Ft.tabIndex - bn.tabIndex);
      let ct = qt.indexOf(document.activeElement);
      ct === -1 && ce.shiftKey && (ct = 0), ct += qt.length + (ce.shiftKey ? -1 : 1), ct %= qt.length, qt[ct].focus(), ce.preventDefault();
    }
  }, bt = (ce) => {
    N.closeOnOuterClick && (ce.target === K || ce.target === ne) && (ke = ce.target);
  }, gn = (ce) => {
    N.closeOnOuterClick && ce.target === ke && (ce.preventDefault(), ze());
  }, Un = () => {
    Y = window.scrollY, Ze = document.body.style.position, be = document.body.style.overflow, te = document.body.style.width, document.body.style.position = "fixed", document.body.style.top = `-${Y}px`, document.body.style.overflow = "hidden", document.body.style.width = "100%";
  }, ot = () => {
    document.body.style.position = Ze || "", document.body.style.top = "", document.body.style.overflow = be || "", document.body.style.width = te || "", window.scrollTo(0, Y);
  };
  R(c, { open: ae, close: ze });
  let rn = !1;
  Br(() => {
    rn && ze();
  }), Ei(() => {
    n(46, rn = !0);
  });
  function ri(ce) {
    ht[ce ? "unshift" : "push"](() => {
      z = ce, n(5, z);
    });
  }
  function se(ce) {
    ht[ce ? "unshift" : "push"](() => {
      ne = ce, n(4, ne);
    });
  }
  function ve(ce) {
    ht[ce ? "unshift" : "push"](() => {
      K = ce, n(3, K);
    });
  }
  return t.$$set = (ce) => {
    "isTabbable" in ce && n(22, a = ce.isTabbable), "show" in ce && n(23, f = ce.show), "key" in ce && n(24, c = ce.key), "ariaLabel" in ce && n(25, u = ce.ariaLabel), "ariaLabelledBy" in ce && n(26, h = ce.ariaLabelledBy), "closeButton" in ce && n(27, d = ce.closeButton), "closeOnEsc" in ce && n(28, p = ce.closeOnEsc), "closeOnOuterClick" in ce && n(29, g = ce.closeOnOuterClick), "styleBg" in ce && n(30, _ = ce.styleBg), "styleWindowWrap" in ce && n(31, b = ce.styleWindowWrap), "styleWindow" in ce && n(32, y = ce.styleWindow), "styleContent" in ce && n(33, v = ce.styleContent), "styleCloseButton" in ce && n(34, M = ce.styleCloseButton), "classBg" in ce && n(35, A = ce.classBg), "classWindowWrap" in ce && n(36, P = ce.classWindowWrap), "classWindow" in ce && n(37, S = ce.classWindow), "classContent" in ce && n(38, D = ce.classContent), "classCloseButton" in ce && n(39, x = ce.classCloseButton), "unstyled" in ce && n(0, V = ce.unstyled), "setContext" in ce && n(40, R = ce.setContext), "transitionBg" in ce && n(41, W = ce.transitionBg), "transitionBgProps" in ce && n(42, U = ce.transitionBgProps), "transitionWindow" in ce && n(43, C = ce.transitionWindow), "transitionWindowProps" in ce && n(44, L = ce.transitionWindowProps), "disableFocusTrap" in ce && n(45, I = ce.disableFocusTrap), "$$scope" in ce && n(47, r = ce.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8388608 | t.$$.dirty[1] & 32768 && rn && (Ve(f) ? ae(f) : ze());
  }, [
    V,
    N,
    T,
    K,
    ne,
    z,
    $,
    Q,
    Te,
    Se,
    Fe,
    Z,
    Ce,
    at,
    mt,
    Ye,
    Me,
    Ve,
    ze,
    ft,
    bt,
    gn,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    x,
    R,
    W,
    U,
    C,
    L,
    I,
    rn,
    r,
    i,
    ri,
    se,
    ve
  ];
}
class Ak extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      C6,
      k6,
      Pt,
      {
        isTabbable: 22,
        show: 23,
        key: 24,
        ariaLabel: 25,
        ariaLabelledBy: 26,
        closeButton: 27,
        closeOnEsc: 28,
        closeOnOuterClick: 29,
        styleBg: 30,
        styleWindowWrap: 31,
        styleWindow: 32,
        styleContent: 33,
        styleCloseButton: 34,
        classBg: 35,
        classWindowWrap: 36,
        classWindow: 37,
        classContent: 38,
        classCloseButton: 39,
        unstyled: 0,
        setContext: 40,
        transitionBg: 41,
        transitionBgProps: 42,
        transitionWindow: 43,
        transitionWindowProps: 44,
        disableFocusTrap: 45
      },
      null,
      [-1, -1, -1]
    );
  }
}
var Gn;
(function(t) {
  t.text = "text", t.tree = "tree", t.table = "table";
})(Gn || (Gn = {}));
var Vt;
(function(t) {
  t.after = "after", t.inside = "inside", t.key = "key", t.value = "value", t.multi = "multi";
})(Vt || (Vt = {}));
var Yi;
(function(t) {
  t.after = "after", t.key = "key", t.value = "value", t.inside = "inside";
})(Yi || (Yi = {}));
var jo;
(function(t) {
  t.info = "info", t.warning = "warning", t.error = "error";
})(jo || (jo = {}));
var nr;
(function(t) {
  t.key = "key", t.value = "value";
})(nr || (nr = {}));
var Bi;
(function(t) {
  t.asc = "asc", t.desc = "desc";
})(Bi || (Bi = {}));
const Zd = 300, Ok = 300, L1 = 300, S6 = 300, x1 = 50, M6 = 200, A6 = 400, O6 = 1200, $d = 1e3, Oa = 100, Zs = 100, Hc = 2e4, z1 = 50, V1 = 50, vs = [{ start: 0, end: Oa }], T6 = 100 * 1024 * 1024, E6 = 1024 * 1024, ep = 10 * 1024 * 1024, Tk = 10 * 1024, ks = {
  closeButton: !1,
  classBg: "jse-modal-bg",
  classWindow: "jse-modal-window",
  classWindowWrap: "jse-modal-window-wrap",
  classContent: "jse-modal-content"
}, P6 = {
  ...ks,
  classWindow: "jse-modal-window jse-modal-window-sort"
}, R6 = {
  ...ks,
  classWindow: "jse-modal-window jse-modal-window-transform"
}, F1 = {
  ...ks,
  classWindow: "jse-modal-window jse-modal-window-jsoneditor"
}, Am = "Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value", Om = "Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)", no = "hover-insert-inside", Ta = "hover-insert-after", tp = "hover-collection", Zh = "valid", H1 = "repairable", I6 = "invalid", Zr = (40 + 2) * 8, $r = 260, gs = {
  NO: "NO",
  SELF: "SELF",
  NEXT_INSIDE: "NEXT_INSIDE"
}, N6 = {
  [Bi.asc]: "ascending",
  [Bi.desc]: "descending"
};
let W1 = 0;
function ma() {
  return W1++, W1;
}
function Bo(t) {
  return Bo = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Bo(t);
}
function Lt(t) {
  return Array.isArray(t);
}
function mn(t) {
  return t !== null && Bo(t) === "object" && t.constructor === Object;
}
function Ek(t) {
  return t && Bo(t) === "object" ? t.op === "add" : !1;
}
function Pk(t) {
  return t && Bo(t) === "object" ? t.op === "remove" : !1;
}
function Tm(t) {
  return t && Bo(t) === "object" ? t.op === "replace" : !1;
}
function np(t) {
  return t && Bo(t) === "object" ? t.op === "copy" : !1;
}
function gl(t) {
  return t && Bo(t) === "object" ? t.op === "move" : !1;
}
function ip(t) {
  return ip = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, ip(t);
}
function D6(t, e) {
  return JSON.stringify(t) === JSON.stringify(e);
}
function j6(t, e) {
  return t === e;
}
function Rk(t) {
  return t.slice(0, t.length - 1);
}
function B6(t) {
  return t[t.length - 1];
}
function L6(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : j6;
  if (t.length < e.length)
    return !1;
  for (var i = 0; i < e.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function Ik(t) {
  return ip(t) === "object" && t !== null;
}
function U1(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(t);
    e && (i = i.filter(function(r) {
      return Object.getOwnPropertyDescriptor(t, r).enumerable;
    })), n.push.apply(n, i);
  }
  return n;
}
function x6(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? U1(Object(n), !0).forEach(function(i) {
      z6(t, i, n[i]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : U1(Object(n)).forEach(function(i) {
      Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(n, i));
    });
  }
  return t;
}
function z6(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
function Em(t) {
  if (Lt(t)) {
    var e = t.slice();
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      e[i] = t[i];
    }), e;
  } else if (mn(t)) {
    var n = x6({}, t);
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      n[i] = t[i];
    }), n;
  } else
    return t;
}
function Pm(t, e, n) {
  if (t[e] === n)
    return t;
  var i = Em(t);
  return i[e] = n, i;
}
function xe(t, e) {
  for (var n = t, i = 0; i < e.length; )
    mn(n) ? n = n[e[i]] : Lt(n) ? n = n[parseInt(e[i])] : n = void 0, i++;
  return n;
}
function Gi(t, e, n) {
  var i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
  if (e.length === 0)
    return n;
  var r = e[0], o = Gi(t ? t[r] : void 0, e.slice(1), n, i);
  if (mn(t) || Lt(t))
    return Pm(t, r, o);
  if (i) {
    var s = V6.test(r) ? [] : {};
    return s[r] = o, s;
  } else
    throw new Error("Path does not exist");
}
var V6 = /^\d+$/;
function Nk(t, e, n) {
  if (e.length === 0)
    return n(t);
  if (!Ik(t))
    throw new Error("Path doesn't exist");
  var i = e[0], r = Nk(t[i], e.slice(1), n);
  return Pm(t, i, r);
}
function Rm(t, e) {
  if (e.length === 0)
    return t;
  if (!Ik(t))
    throw new Error("Path does not exist");
  if (e.length === 1) {
    var n = e[0];
    if (n in t) {
      var i = Em(t);
      return Lt(i) && i.splice(parseInt(n), 1), mn(i) && delete i[n], i;
    } else
      return t;
  }
  var r = e[0], o = Rm(t[r], e.slice(1));
  return Pm(t, r, o);
}
function Im(t, e, n) {
  var i = e.slice(0, e.length - 1), r = e[e.length - 1];
  return Nk(t, i, function(o) {
    if (!Array.isArray(o))
      throw new TypeError("Array expected at path " + JSON.stringify(i));
    var s = Em(o);
    return s.splice(parseInt(r), 0, n), s;
  });
}
function Li(t, e) {
  return t === void 0 ? !1 : e.length === 0 ? !0 : t === null ? !1 : Li(t[e[0]], e.slice(1));
}
function sr(t) {
  var e = t.split("/");
  return e.shift(), e.map(function(n) {
    return n.replace(/~1/g, "/").replace(/~0/g, "~");
  });
}
function Ae(t) {
  return t.map(Dk).join("");
}
function Dk(t) {
  return "/" + String(t).replace(/~/g, "~0").replace(/\//g, "~1");
}
function rp(t, e) {
  return t + Dk(e);
}
function bl(t, e) {
  return t.startsWith(e) && (t.length === e.length || t[e.length] === "/");
}
function ir(t, e, n) {
  for (var i = t, r = 0; r < e.length; r++) {
    G6(e[r]);
    var o = e[r];
    if (n && n.before) {
      var s = n.before(i, o);
      if (s !== void 0) {
        if (s.document !== void 0 && (i = s.document), s.json !== void 0)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
        s.operation !== void 0 && (o = s.operation);
      }
    }
    var l = i, a = Or(i, o.path);
    if (o.op === "add")
      i = W6(i, a, o.value);
    else if (o.op === "remove")
      i = H6(i, a);
    else if (o.op === "replace")
      i = F6(i, a, o.value);
    else if (o.op === "copy")
      i = U6(i, a, op(o.from));
    else if (o.op === "move")
      i = q6(i, a, op(o.from));
    else if (o.op === "test")
      J6(i, a, o.value);
    else
      throw new Error("Unknown JSONPatch operation " + JSON.stringify(o));
    if (n && n.after) {
      var f = n.after(i, o, l);
      f !== void 0 && (i = f);
    }
  }
  return i;
}
function F6(t, e, n) {
  return Gi(t, e, n);
}
function H6(t, e) {
  return Rm(t, e);
}
function W6(t, e, n) {
  return of(t, e) ? Im(t, e, n) : Gi(t, e, n);
}
function U6(t, e, n) {
  var i = xe(t, n);
  if (of(t, e))
    return Im(t, e, i);
  var r = xe(t, n);
  return Gi(t, e, r);
}
function q6(t, e, n) {
  var i = xe(t, n), r = Rm(t, n);
  return of(r, e) ? Im(r, e, i) : Gi(r, e, i);
}
function J6(t, e, n) {
  if (n === void 0)
    throw new Error('Test failed: no value provided (path: "'.concat(Ae(e), '")'));
  if (!Li(t, e))
    throw new Error('Test failed: path not found (path: "'.concat(Ae(e), '")'));
  var i = xe(t, e);
  if (!D6(i, n))
    throw new Error('Test failed, value differs (path: "'.concat(Ae(e), '")'));
}
function of(t, e) {
  if (e.length === 0)
    return !1;
  var n = xe(t, Rk(e));
  return Array.isArray(n);
}
function K6(t, e) {
  if (B6(e) !== "-")
    return e;
  var n = Rk(e), i = xe(t, n);
  return n.concat(i.length);
}
function G6(t) {
  var e = ["add", "remove", "replace", "copy", "move", "test"];
  if (!e.includes(t.op))
    throw new Error("Unknown JSONPatch op " + JSON.stringify(t.op));
  if (typeof t.path != "string")
    throw new Error('Required property "path" missing or not a string in operation ' + JSON.stringify(t));
  if ((t.op === "copy" || t.op === "move") && typeof t.from != "string")
    throw new Error('Required property "from" missing or not a string in operation ' + JSON.stringify(t));
}
function Or(t, e) {
  return K6(t, sr(e));
}
function op(t) {
  return sr(t);
}
function X6(t) {
  return $6(t) || Z6(t) || Y6(t) || Q6();
}
function Q6() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function Y6(t, e) {
  if (t) {
    if (typeof t == "string")
      return sp(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    if (n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set")
      return Array.from(t);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
      return sp(t, e);
  }
}
function Z6(t) {
  if (typeof Symbol < "u" && t[Symbol.iterator] != null || t["@@iterator"] != null)
    return Array.from(t);
}
function $6(t) {
  if (Array.isArray(t))
    return sp(t);
}
function sp(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, i = new Array(e); n < e; n++)
    i[n] = t[n];
  return i;
}
function jk(t, e, n) {
  var i = [];
  return ir(t, e, {
    before: function(o, s) {
      var l, a = Or(o, s.path);
      if (s.op === "add")
        l = xk(o, a);
      else if (s.op === "remove")
        l = Lk(o, a);
      else if (s.op === "replace")
        l = Bk(o, a);
      else if (s.op === "copy")
        l = eM(o, a);
      else if (s.op === "move")
        l = tM(o, a, op(s.from));
      else if (s.op === "test")
        l = [];
      else
        throw new Error("Unknown JSONPatch operation " + JSON.stringify(s));
      var f;
      if (n && n.before) {
        var c = n.before(o, s, l);
        if (c && c.revertOperations && (l = c.revertOperations), c && c.document && (f = c.document), c && c.json)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
      }
      if (i = l.concat(i), f !== void 0)
        return {
          document: f
        };
    }
  }), i;
}
function Bk(t, e) {
  return [{
    op: "replace",
    path: Ae(e),
    value: xe(t, e)
  }];
}
function Lk(t, e) {
  return [{
    op: "add",
    path: Ae(e),
    value: xe(t, e)
  }];
}
function xk(t, e) {
  return of(t, e) || !Li(t, e) ? [{
    op: "remove",
    path: Ae(e)
  }] : Bk(t, e);
}
function eM(t, e) {
  return xk(t, e);
}
function tM(t, e, n) {
  if (e.length < n.length && L6(n, e))
    return [{
      op: "replace",
      path: Ae(e),
      value: t
    }];
  var i = {
    op: "move",
    from: Ae(e),
    path: Ae(n)
  };
  return !of(t, e) && Li(t, e) ? [i].concat(X6(Lk(t, e))) : [i];
}
var Yu = {}, q1 = {
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	",
  '"': '"',
  "/": "/",
  "\\": "\\"
}, nM = "a".charCodeAt();
Yu.parse = function(t, e, n) {
  var i = {}, r = 0, o = 0, s = 0, l = n && n.bigint && typeof BigInt < "u";
  return {
    data: a("", !0),
    pointers: i
  };
  function a(x, V) {
    f();
    var R;
    v(x, "value");
    var W = g();
    switch (W) {
      case "t":
        p("rue"), R = !0;
        break;
      case "f":
        p("alse"), R = !1;
        break;
      case "n":
        p("ull"), R = null;
        break;
      case '"':
        R = c();
        break;
      case "[":
        R = h(x);
        break;
      case "{":
        R = d(x);
        break;
      default:
        _(), "-0123456789".indexOf(W) >= 0 ? R = u() : P();
    }
    return v(x, "valueEnd"), f(), V && s < t.length && P(), R;
  }
  function f() {
    e:
      for (; s < t.length; ) {
        switch (t[s]) {
          case " ":
            o++;
            break;
          case "	":
            o += 4;
            break;
          case "\r":
            o = 0;
            break;
          case `
`:
            o = 0, r++;
            break;
          default:
            break e;
        }
        s++;
      }
  }
  function c() {
    for (var x = "", V; V = g(), V != '"'; )
      V == "\\" ? (V = g(), V in q1 ? x += q1[V] : V == "u" ? x += b() : S()) : x += V;
    return x;
  }
  function u() {
    var x = "", V = !0;
    t[s] == "-" && (x += g()), x += t[s] == "0" ? g() : y(), t[s] == "." && (x += g() + y(), V = !1), (t[s] == "e" || t[s] == "E") && (x += g(), (t[s] == "+" || t[s] == "-") && (x += g()), x += y(), V = !1);
    var R = +x;
    return l && V && (R > Number.MAX_SAFE_INTEGER || R < Number.MIN_SAFE_INTEGER) ? BigInt(x) : R;
  }
  function h(x) {
    f();
    var V = [], R = 0;
    if (g() == "]")
      return V;
    for (_(); ; ) {
      var W = x + "/" + R;
      V.push(a(W)), f();
      var U = g();
      if (U == "]")
        break;
      U != "," && S(), f(), R++;
    }
    return V;
  }
  function d(x) {
    f();
    var V = {};
    if (g() == "}")
      return V;
    for (_(); ; ) {
      var R = A();
      g() != '"' && S();
      var W = c(), U = x + "/" + lp(W);
      M(U, "key", R), v(U, "keyEnd"), f(), g() != ":" && S(), f(), V[W] = a(U), f();
      var C = g();
      if (C == "}")
        break;
      C != "," && S(), f();
    }
    return V;
  }
  function p(x) {
    for (var V = 0; V < x.length; V++)
      g() !== x[V] && S();
  }
  function g() {
    D();
    var x = t[s];
    return s++, o++, x;
  }
  function _() {
    s--, o--;
  }
  function b() {
    for (var x = 4, V = 0; x--; ) {
      V <<= 4;
      var R = g().toLowerCase();
      R >= "a" && R <= "f" ? V += R.charCodeAt() - nM + 10 : R >= "0" && R <= "9" ? V += +R : S();
    }
    return String.fromCharCode(V);
  }
  function y() {
    for (var x = ""; t[s] >= "0" && t[s] <= "9"; )
      x += g();
    if (x.length)
      return x;
    D(), P();
  }
  function v(x, V) {
    M(x, V, A());
  }
  function M(x, V, R) {
    i[x] = i[x] || {}, i[x][V] = R;
  }
  function A() {
    return {
      line: r,
      column: o,
      pos: s
    };
  }
  function P() {
    throw new SyntaxError("Unexpected token " + t[s] + " in JSON at position " + s);
  }
  function S() {
    _(), P();
  }
  function D() {
    if (s >= t.length)
      throw new SyntaxError("Unexpected end of JSON input");
  }
};
Yu.stringify = function(t, e, n) {
  if (!Af(t))
    return;
  var i = 0, r, o, s = typeof n == "object" ? n.space : n;
  switch (typeof s) {
    case "number":
      var l = s > 10 ? 10 : s < 0 ? 0 : Math.floor(s);
      s = l && M(l, " "), r = l, o = l;
      break;
    case "string":
      s = s.slice(0, 10), r = 0, o = 0;
      for (var a = 0; a < s.length; a++) {
        var f = s[a];
        switch (f) {
          case " ":
            o++;
            break;
          case "	":
            o += 4;
            break;
          case "\r":
            o = 0;
            break;
          case `
`:
            o = 0, i++;
            break;
          default:
            throw new Error("whitespace characters not allowed in JSON");
        }
        r++;
      }
      break;
    default:
      s = void 0;
  }
  var c = "", u = {}, h = 0, d = 0, p = 0, g = n && n.es6 && typeof Map == "function";
  return _(t, 0, ""), {
    json: c,
    pointers: u
  };
  function _(A, P, S) {
    switch (v(S, "value"), typeof A) {
      case "number":
      case "bigint":
      case "boolean":
        b("" + A);
        break;
      case "string":
        b(Of(A));
        break;
      case "object":
        A === null ? b("null") : typeof A.toJSON == "function" ? b(Of(A.toJSON())) : Array.isArray(A) ? D() : g ? A.constructor.BYTES_PER_ELEMENT ? D() : A instanceof Map ? V() : A instanceof Set ? V(!0) : x() : x();
    }
    v(S, "valueEnd");
    function D() {
      if (A.length) {
        b("[");
        for (var R = P + 1, W = 0; W < A.length; W++) {
          W && b(","), y(R);
          var U = Af(A[W]) ? A[W] : null, C = S + "/" + W;
          _(U, R, C);
        }
        y(P), b("]");
      } else
        b("[]");
    }
    function x() {
      var R = Object.keys(A);
      if (R.length) {
        b("{");
        for (var W = P + 1, U = 0; U < R.length; U++) {
          var C = R[U], L = A[C];
          if (Af(L)) {
            U && b(",");
            var I = S + "/" + lp(C);
            y(W), v(I, "key"), b(Of(C)), v(I, "keyEnd"), b(":"), s && b(" "), _(L, W, I);
          }
        }
        y(P), b("}");
      } else
        b("{}");
    }
    function V(R) {
      if (A.size) {
        b("{");
        for (var W = P + 1, U = !0, C = A.entries(), L = C.next(); !L.done; ) {
          var I = L.value, H = I[0], N = R ? !0 : I[1];
          if (Af(N)) {
            U || b(","), U = !1;
            var T = S + "/" + lp(H);
            y(W), v(T, "key"), b(Of(H)), v(T, "keyEnd"), b(":"), s && b(" "), _(N, W, T);
          }
          L = C.next();
        }
        y(P), b("}");
      } else
        b("{}");
    }
  }
  function b(A) {
    d += A.length, p += A.length, c += A;
  }
  function y(A) {
    if (s) {
      for (c += `
` + M(A, s), h++, d = 0; A--; )
        i ? (h += i, d = o) : d += o, p += r;
      p += 1;
    }
  }
  function v(A, P) {
    u[A] = u[A] || {}, u[A][P] = {
      line: h,
      column: d,
      pos: p
    };
  }
  function M(A, P) {
    return Array(A + 1).join(P);
  }
};
var iM = ["number", "bigint", "boolean", "string", "object"];
function Af(t) {
  return iM.indexOf(typeof t) >= 0;
}
var rM = /"|\\/g, oM = /[\b]/g, sM = /\f/g, lM = /\n/g, aM = /\r/g, fM = /\t/g;
function Of(t) {
  return t = t.replace(rM, "\\$&").replace(sM, "\\f").replace(oM, "\\b").replace(lM, "\\n").replace(aM, "\\r").replace(fM, "\\t"), '"' + t + '"';
}
var cM = /~/g, uM = /\//g;
function lp(t) {
  return t.replace(cM, "~0").replace(uM, "~1");
}
function ap(t) {
  return ap = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, ap(t);
}
function J1(t, e) {
  for (var n = 0; n < e.length; n++) {
    var i = e[n];
    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
  }
}
function hM(t, e, n) {
  return e && J1(t.prototype, e), n && J1(t, n), Object.defineProperty(t, "prototype", { writable: !1 }), t;
}
function dM(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function pM(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Ea(t, e);
}
function mM(t) {
  var e = zk();
  return function() {
    var i = Pa(t), r;
    if (e) {
      var o = Pa(this).constructor;
      r = Reflect.construct(i, arguments, o);
    } else
      r = i.apply(this, arguments);
    return gM(this, r);
  };
}
function gM(t, e) {
  if (e && (ap(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return bM(t);
}
function bM(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
function fp(t) {
  var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return fp = function(i) {
    if (i === null || !_M(i))
      return i;
    if (typeof i != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof e < "u") {
      if (e.has(i))
        return e.get(i);
      e.set(i, r);
    }
    function r() {
      return bc(i, arguments, Pa(this).constructor);
    }
    return r.prototype = Object.create(i.prototype, { constructor: { value: r, enumerable: !1, writable: !0, configurable: !0 } }), Ea(r, i);
  }, fp(t);
}
function bc(t, e, n) {
  return zk() ? bc = Reflect.construct.bind() : bc = function(r, o, s) {
    var l = [null];
    l.push.apply(l, o);
    var a = Function.bind.apply(r, l), f = new a();
    return s && Ea(f, s.prototype), f;
  }, bc.apply(null, arguments);
}
function zk() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function _M(t) {
  return Function.toString.call(t).indexOf("[native code]") !== -1;
}
function Ea(t, e) {
  return Ea = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(i, r) {
    return i.__proto__ = r, i;
  }, Ea(t, e);
}
function Pa(t) {
  return Pa = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(n) {
    return n.__proto__ || Object.getPrototypeOf(n);
  }, Pa(t);
}
var bo = /* @__PURE__ */ function(t) {
  pM(n, t);
  var e = mM(n);
  function n(i, r) {
    var o;
    return dM(this, n), o = e.call(this, i + " at position " + r), o.position = r, o;
  }
  return hM(n);
}(/* @__PURE__ */ fp(Error)), Tf = 92, $h = 47, yM = 42, K1 = 123, ed = 125, G1 = 91, td = 93, wM = 40, vM = 41, kM = 32, Nm = 10, Vk = 9, Fk = 13, CM = 8, SM = 12, _c = 34, X1 = 43, Q1 = 45, MM = 39, Dm = 48, AM = 49, jm = 57, Ef = 44, OM = 46, TM = 58, EM = 59, PM = 65, RM = 97, IM = 69, NM = 101, DM = 70, jM = 102, BM = 160, LM = 8192, xM = 8202, zM = 8239, VM = 8287, FM = 12288, HM = 8220, WM = 8221, UM = 8216, qM = 8217, JM = 96, KM = 180;
function Pf(t) {
  return t >= Dm && t < jm || t >= PM && t <= DM || t >= RM && t <= jM;
}
function Rf(t) {
  return t >= Dm && t <= jm;
}
function GM(t) {
  return t >= AM && t <= jm;
}
function XM(t) {
  return t >= 32 && t <= 1114111;
}
function QM(t) {
  return YM.test(t) || t && Uc(t.charCodeAt(0));
}
var YM = /^[,:[\]{}()\n]$/;
function Y1(t) {
  return ZM.test(t) || t && Uc(t.charCodeAt(0));
}
var ZM = /^[[{\w-]$/;
function $M(t) {
  return t === Nm || t === Fk || t === Vk || t === CM || t === SM;
}
function Wc(t) {
  return t === kM || t === Nm || t === Vk || t === Fk;
}
function eA(t) {
  return t === BM || t >= LM && t <= xM || t === zM || t === VM || t === FM;
}
function Uc(t) {
  return Hk(t) || cp(t);
}
function Hk(t) {
  return t === _c || t === HM || t === WM;
}
function cp(t) {
  return t === MM || t === UM || t === qM || t === JM || t === KM;
}
function Yl(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, i = t.lastIndexOf(e);
  return i !== -1 ? t.substring(0, i) + (n ? "" : t.substring(i + 1)) : t;
}
function is(t, e) {
  var n = t.length;
  if (!Wc(t.charCodeAt(n - 1)))
    return t + e;
  for (; Wc(t.charCodeAt(n - 1)); )
    n--;
  return t.substring(0, n) + e + t.substring(n);
}
function tA(t, e, n) {
  return t.substring(0, e) + t.substring(e + n);
}
function nA(t) {
  return /[,\n][ \t\r]*$/.test(t);
}
var iA = {
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, rA = {
  '"': '"',
  "\\": "\\",
  "/": "/",
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	"
};
function Tr(t) {
  var e = 0, n = "", i = o();
  i || D();
  var r = f(Ef);
  if (r && s(), Y1(t[e]) && nA(n) ? (r || (n = is(n, ",")), p()) : r && (n = Yl(n, ",")), e >= t.length)
    return n;
  S();
  function o() {
    s();
    var C = h() || d() || g() || b() || y() || M();
    return s(), C;
  }
  function s() {
    var C = e, L = l();
    do
      L = a(), L && (L = l());
    while (L);
    return e > C;
  }
  function l() {
    for (var C = "", L; (L = Wc(t.charCodeAt(e))) || eA(t.charCodeAt(e)); )
      L ? C += t[e] : C += " ", e++;
    return C.length > 0 ? (n += C, !0) : !1;
  }
  function a() {
    if (t.charCodeAt(e) === $h && t.charCodeAt(e + 1) === yM) {
      for (; e < t.length && !oA(t, e); )
        e++;
      return e += 2, !0;
    }
    if (t.charCodeAt(e) === $h && t.charCodeAt(e + 1) === $h) {
      for (; e < t.length && t.charCodeAt(e) !== Nm; )
        e++;
      return !0;
    }
    return !1;
  }
  function f(C) {
    return t.charCodeAt(e) === C ? (n += t[e], e++, !0) : !1;
  }
  function c(C) {
    return t.charCodeAt(e) === C ? (e++, !0) : !1;
  }
  function u() {
    return c(Tf);
  }
  function h() {
    if (t.charCodeAt(e) === K1) {
      n += "{", e++, s();
      for (var C = !0; e < t.length && t.charCodeAt(e) !== ed; ) {
        var L = void 0;
        C ? (L = !0, C = !1) : (L = f(Ef), L || (n = is(n, ",")), s());
        var I = g() || M();
        if (!I) {
          t.charCodeAt(e) === ed || t.charCodeAt(e) === K1 || t.charCodeAt(e) === td || t.charCodeAt(e) === G1 || t[e] === void 0 ? n = Yl(n, ",") : x();
          break;
        }
        s();
        var H = f(TM);
        H || (Y1(t[e]) ? n = is(n, ":") : R());
        var N = o();
        N || (H ? V() : R());
      }
      return t.charCodeAt(e) === ed ? (n += "}", e++) : n = is(n, "}"), !0;
    }
    return !1;
  }
  function d() {
    if (t.charCodeAt(e) === G1) {
      n += "[", e++, s();
      for (var C = !0; e < t.length && t.charCodeAt(e) !== td; ) {
        if (C)
          C = !1;
        else {
          var L = f(Ef);
          L || (n = is(n, ","));
        }
        var I = o();
        if (!I) {
          n = Yl(n, ",");
          break;
        }
      }
      return t.charCodeAt(e) === td ? (n += "]", e++) : n = is(n, "]"), !0;
    }
    return !1;
  }
  function p() {
    for (var C = !0, L = !0; L; ) {
      if (C)
        C = !1;
      else {
        var I = f(Ef);
        I || (n = is(n, ","));
      }
      L = o();
    }
    L || (n = Yl(n, ",")), n = `[
`.concat(n, `
]`);
  }
  function g() {
    var C = t.charCodeAt(e) === Tf;
    if (C && (e++, C = !0), Uc(t.charCodeAt(e))) {
      var L = cp(t.charCodeAt(e)) ? cp : Hk;
      for (t.charCodeAt(e), n += '"', e++; e < t.length && !L(t.charCodeAt(e)); ) {
        if (t.charCodeAt(e) === Tf) {
          var I = t[e + 1], H = rA[I];
          H !== void 0 ? (n += t.slice(e, e + 2), e += 2) : I === "u" ? Pf(t.charCodeAt(e + 2)) && Pf(t.charCodeAt(e + 3)) && Pf(t.charCodeAt(e + 4)) && Pf(t.charCodeAt(e + 5)) ? (n += t.slice(e, e + 6), e += 6) : W(e) : (n += I, e += 2);
        } else {
          var N = t[e], T = t.charCodeAt(e);
          T === _c && t.charCodeAt(e - 1) !== Tf ? (n += "\\" + N, e++) : $M(T) ? (n += iA[N], e++) : (XM(T) || P(N), n += N, e++);
        }
        C && u();
      }
      return Uc(t.charCodeAt(e)) ? (t.charCodeAt(e), n += '"', e++) : n += '"', _(), !0;
    }
    return !1;
  }
  function _() {
    var C = !1;
    for (s(); t.charCodeAt(e) === X1; ) {
      C = !0, e++, s(), n = Yl(n, '"', !0);
      var L = n.length;
      g(), n = tA(n, L, 1);
    }
    return C;
  }
  function b() {
    var C = e;
    if (t.charCodeAt(e) === Q1 && (e++, A(C)), t.charCodeAt(e) === Dm)
      e++;
    else if (GM(t.charCodeAt(e)))
      for (e++; Rf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === OM)
      for (e++, A(C); Rf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === NM || t.charCodeAt(e) === IM)
      for (e++, (t.charCodeAt(e) === Q1 || t.charCodeAt(e) === X1) && e++, A(C); Rf(t.charCodeAt(e)); )
        e++;
    return e > C ? (n += t.slice(C, e), !0) : !1;
  }
  function y() {
    return v("true", "true") || v("false", "false") || v("null", "null") || v("True", "true") || v("False", "false") || v("None", "null");
  }
  function v(C, L) {
    return t.slice(e, e + C.length) === C ? (n += L, e += C.length, !0) : !1;
  }
  function M() {
    for (var C = e; e < t.length && !QM(t[e]); )
      e++;
    if (e > C) {
      if (t.charCodeAt(e) === wM)
        return e++, o(), t.charCodeAt(e) === vM && (e++, t.charCodeAt(e) === EM && e++), !0;
      for (; Wc(t.charCodeAt(e - 1)) && e > 0; )
        e--;
      var L = t.slice(C, e);
      return n += JSON.stringify(L), !0;
    }
  }
  function A(C) {
    if (!Rf(t.charCodeAt(e))) {
      var L = t.slice(C, e);
      throw new bo("Invalid number '".concat(L, "', expecting a digit ").concat(U()), 2);
    }
  }
  function P(C) {
    throw new bo("Invalid character " + JSON.stringify(C), e);
  }
  function S() {
    throw new bo("Unexpected character " + JSON.stringify(t[e]), e);
  }
  function D() {
    throw new bo("Unexpected end of json string", t.length);
  }
  function x() {
    throw new bo("Object key expected", e);
  }
  function V() {
    throw new bo("Object value expected", e);
  }
  function R() {
    throw new bo("Colon expected", e);
  }
  function W(C) {
    for (var L = C + 2; /\w/.test(t[L]); )
      L++;
    var I = t.slice(C, L);
    throw new bo('Invalid unicode character "'.concat(I, '"'), e);
  }
  function U() {
    return t[e] ? "but got '".concat(t[e], "'") : "but reached end of input";
  }
}
function oA(t, e) {
  return t[e] === "*" && t[e + 1] === "/";
}
function Tn(t) {
  return parseInt(t, 10);
}
function Bm(t) {
  return sA.test(t);
}
const sA = /^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;
function dn(t) {
  return typeof t == "object" && t !== null && t.constructor === Object;
}
function tn(t) {
  return typeof t == "object" && t !== null && (t.constructor === Object || t.constructor === Array);
}
function lA(t) {
  return t === !0 || t === !1;
}
function up(t) {
  if (typeof t == "number")
    return t > 9466848e5 && isFinite(t) && Math.floor(t) === t && !isNaN(new Date(t).valueOf());
  if (typeof t == "bigint")
    return up(Number(t));
  try {
    const n = t.valueOf();
    if (n !== t)
      return up(n);
  } catch {
    return !1;
  }
}
function Wk(t) {
  const e = window.document.createElement("div");
  return e.style.color = t, e.style.color.split(/\s+/).join("").toLowerCase() || null;
}
function aA(t) {
  return typeof t == "string" && !!Wk(t);
}
function Lm(t, e) {
  if (typeof t == "number" || typeof t == "string" || typeof t == "boolean" || typeof t > "u")
    return typeof t;
  if (typeof t == "bigint")
    return "number";
  if (t === null)
    return "null";
  if (Array.isArray(t))
    return "array";
  if (dn(t))
    return "object";
  const n = e.stringify(t);
  return n && Bm(n) ? "number" : n === "true" || n === "false" ? "boolean" : n === "null" ? "null" : "unknown";
}
const fA = /^https?:\/\/\S+$/;
function Zu(t) {
  return typeof t == "string" && fA.test(t);
}
function xl(t, e) {
  if (t === "")
    return "";
  const n = t.trim();
  return n === "null" ? null : n === "true" ? !0 : n === "false" ? !1 : Bm(n) ? e.parse(n) : t;
}
function cA(t, e) {
  return typeof t == "string" && typeof xl(t, e) != "string";
}
function uA(t) {
  return hA.test(t);
}
const hA = /^-?[0-9]+$/;
var dA = typeof global == "object" && global && global.Object === Object && global;
const Uk = dA;
var pA = typeof self == "object" && self && self.Object === Object && self, mA = Uk || pA || Function("return this")();
const ar = mA;
var gA = ar.Symbol;
const zi = gA;
var qk = Object.prototype, bA = qk.hasOwnProperty, _A = qk.toString, Zl = zi ? zi.toStringTag : void 0;
function yA(t) {
  var e = bA.call(t, Zl), n = t[Zl];
  try {
    t[Zl] = void 0;
    var i = !0;
  } catch {
  }
  var r = _A.call(t);
  return i && (e ? t[Zl] = n : delete t[Zl]), r;
}
var wA = Object.prototype, vA = wA.toString;
function kA(t) {
  return vA.call(t);
}
var CA = "[object Null]", SA = "[object Undefined]", Z1 = zi ? zi.toStringTag : void 0;
function zl(t) {
  return t == null ? t === void 0 ? SA : CA : Z1 && Z1 in Object(t) ? yA(t) : kA(t);
}
function Lo(t) {
  return t != null && typeof t == "object";
}
var MA = "[object Symbol]";
function Cs(t) {
  return typeof t == "symbol" || Lo(t) && zl(t) == MA;
}
function ga(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = Array(i); ++n < i; )
    r[n] = e(t[n], n, t);
  return r;
}
var AA = Array.isArray;
const ti = AA;
var OA = 1 / 0, $1 = zi ? zi.prototype : void 0, e0 = $1 ? $1.toString : void 0;
function Jk(t) {
  if (typeof t == "string")
    return t;
  if (ti(t))
    return ga(t, Jk) + "";
  if (Cs(t))
    return e0 ? e0.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -OA ? "-0" : e;
}
var TA = /\s/;
function EA(t) {
  for (var e = t.length; e-- && TA.test(t.charAt(e)); )
    ;
  return e;
}
var PA = /^\s+/;
function RA(t) {
  return t && t.slice(0, EA(t) + 1).replace(PA, "");
}
function lr(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var t0 = 0 / 0, IA = /^[-+]0x[0-9a-f]+$/i, NA = /^0b[01]+$/i, DA = /^0o[0-7]+$/i, jA = parseInt;
function hp(t) {
  if (typeof t == "number")
    return t;
  if (Cs(t))
    return t0;
  if (lr(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = lr(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = RA(t);
  var n = NA.test(t);
  return n || DA.test(t) ? jA(t.slice(2), n ? 2 : 8) : IA.test(t) ? t0 : +t;
}
var n0 = 1 / 0, BA = 17976931348623157e292;
function yc(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = hp(t), t === n0 || t === -n0) {
    var e = t < 0 ? -1 : 1;
    return e * BA;
  }
  return t === t ? t : 0;
}
function LA(t) {
  var e = yc(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
function sf(t) {
  return t;
}
var xA = "[object AsyncFunction]", zA = "[object Function]", VA = "[object GeneratorFunction]", FA = "[object Proxy]";
function Kk(t) {
  if (!lr(t))
    return !1;
  var e = zl(t);
  return e == zA || e == VA || e == xA || e == FA;
}
var HA = ar["__core-js_shared__"];
const nd = HA;
var i0 = function() {
  var t = /[^.]+$/.exec(nd && nd.keys && nd.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function WA(t) {
  return !!i0 && i0 in t;
}
var UA = Function.prototype, qA = UA.toString;
function Ds(t) {
  if (t != null) {
    try {
      return qA.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var JA = /[\\^$.*+?()[\]{}|]/g, KA = /^\[object .+?Constructor\]$/, GA = Function.prototype, XA = Object.prototype, QA = GA.toString, YA = XA.hasOwnProperty, ZA = RegExp(
  "^" + QA.call(YA).replace(JA, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function $A(t) {
  if (!lr(t) || WA(t))
    return !1;
  var e = Kk(t) ? ZA : KA;
  return e.test(Ds(t));
}
function eO(t, e) {
  return t == null ? void 0 : t[e];
}
function js(t, e) {
  var n = eO(t, e);
  return $A(n) ? n : void 0;
}
var tO = js(ar, "WeakMap");
const dp = tO;
var r0 = Object.create, nO = function() {
  function t() {
  }
  return function(e) {
    if (!lr(e))
      return {};
    if (r0)
      return r0(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
const iO = nO;
function rO(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
function en() {
}
function oO(t, e) {
  var n = -1, i = t.length;
  for (e || (e = Array(i)); ++n < i; )
    e[n] = t[n];
  return e;
}
var sO = 800, lO = 16, aO = Date.now;
function fO(t) {
  var e = 0, n = 0;
  return function() {
    var i = aO(), r = lO - (i - n);
    if (n = i, r > 0) {
      if (++e >= sO)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function cO(t) {
  return function() {
    return t;
  };
}
var uO = function() {
  try {
    var t = js(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
const qc = uO;
var hO = qc ? function(t, e) {
  return qc(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: cO(e),
    writable: !0
  });
} : sf;
const dO = hO;
var pO = fO(dO);
const mO = pO;
function gO(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var bO = 9007199254740991, _O = /^(?:0|[1-9]\d*)$/;
function xm(t, e) {
  var n = typeof t;
  return e = e ?? bO, !!e && (n == "number" || n != "symbol" && _O.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function $u(t, e, n) {
  e == "__proto__" && qc ? qc(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function eh(t, e) {
  return t === e || t !== t && e !== e;
}
var yO = Object.prototype, wO = yO.hasOwnProperty;
function Gk(t, e, n) {
  var i = t[e];
  (!(wO.call(t, e) && eh(i, n)) || n === void 0 && !(e in t)) && $u(t, e, n);
}
function th(t, e, n, i) {
  var r = !n;
  n || (n = {});
  for (var o = -1, s = e.length; ++o < s; ) {
    var l = e[o], a = i ? i(n[l], t[l], l, n, t) : void 0;
    a === void 0 && (a = t[l]), r ? $u(n, l, a) : Gk(n, l, a);
  }
  return n;
}
var o0 = Math.max;
function vO(t, e, n) {
  return e = o0(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var i = arguments, r = -1, o = o0(i.length - e, 0), s = Array(o); ++r < o; )
      s[r] = i[e + r];
    r = -1;
    for (var l = Array(e + 1); ++r < e; )
      l[r] = i[r];
    return l[e] = n(s), rO(t, this, l);
  };
}
function kO(t, e) {
  return mO(vO(t, e, sf), t + "");
}
var CO = 9007199254740991;
function zm(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= CO;
}
function Vl(t) {
  return t != null && zm(t.length) && !Kk(t);
}
function pp(t, e, n) {
  if (!lr(n))
    return !1;
  var i = typeof e;
  return (i == "number" ? Vl(n) && xm(e, n.length) : i == "string" && e in n) ? eh(n[e], t) : !1;
}
var SO = Object.prototype;
function nh(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || SO;
  return t === n;
}
function Xk(t, e) {
  for (var n = -1, i = Array(t); ++n < t; )
    i[n] = e(n);
  return i;
}
var MO = "[object Arguments]";
function s0(t) {
  return Lo(t) && zl(t) == MO;
}
var Qk = Object.prototype, AO = Qk.hasOwnProperty, OO = Qk.propertyIsEnumerable, TO = s0(function() {
  return arguments;
}()) ? s0 : function(t) {
  return Lo(t) && AO.call(t, "callee") && !OO.call(t, "callee");
};
const ih = TO;
function EO() {
  return !1;
}
var Yk = typeof exports == "object" && exports && !exports.nodeType && exports, l0 = Yk && typeof module == "object" && module && !module.nodeType && module, PO = l0 && l0.exports === Yk, a0 = PO ? ar.Buffer : void 0, RO = a0 ? a0.isBuffer : void 0, IO = RO || EO;
const Ra = IO;
var NO = "[object Arguments]", DO = "[object Array]", jO = "[object Boolean]", BO = "[object Date]", LO = "[object Error]", xO = "[object Function]", zO = "[object Map]", VO = "[object Number]", FO = "[object Object]", HO = "[object RegExp]", WO = "[object Set]", UO = "[object String]", qO = "[object WeakMap]", JO = "[object ArrayBuffer]", KO = "[object DataView]", GO = "[object Float32Array]", XO = "[object Float64Array]", QO = "[object Int8Array]", YO = "[object Int16Array]", ZO = "[object Int32Array]", $O = "[object Uint8Array]", eT = "[object Uint8ClampedArray]", tT = "[object Uint16Array]", nT = "[object Uint32Array]", Zt = {};
Zt[GO] = Zt[XO] = Zt[QO] = Zt[YO] = Zt[ZO] = Zt[$O] = Zt[eT] = Zt[tT] = Zt[nT] = !0;
Zt[NO] = Zt[DO] = Zt[JO] = Zt[jO] = Zt[KO] = Zt[BO] = Zt[LO] = Zt[xO] = Zt[zO] = Zt[VO] = Zt[FO] = Zt[HO] = Zt[WO] = Zt[UO] = Zt[qO] = !1;
function iT(t) {
  return Lo(t) && zm(t.length) && !!Zt[zl(t)];
}
function rh(t) {
  return function(e) {
    return t(e);
  };
}
var Zk = typeof exports == "object" && exports && !exports.nodeType && exports, ba = Zk && typeof module == "object" && module && !module.nodeType && module, rT = ba && ba.exports === Zk, id = rT && Uk.process, oT = function() {
  try {
    var t = ba && ba.require && ba.require("util").types;
    return t || id && id.binding && id.binding("util");
  } catch {
  }
}();
const _l = oT;
var f0 = _l && _l.isTypedArray, sT = f0 ? rh(f0) : iT;
const Vm = sT;
var lT = Object.prototype, aT = lT.hasOwnProperty;
function $k(t, e) {
  var n = ti(t), i = !n && ih(t), r = !n && !i && Ra(t), o = !n && !i && !r && Vm(t), s = n || i || r || o, l = s ? Xk(t.length, String) : [], a = l.length;
  for (var f in t)
    (e || aT.call(t, f)) && !(s && (f == "length" || r && (f == "offset" || f == "parent") || o && (f == "buffer" || f == "byteLength" || f == "byteOffset") || xm(f, a))) && l.push(f);
  return l;
}
function e3(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var fT = e3(Object.keys, Object);
const cT = fT;
var uT = Object.prototype, hT = uT.hasOwnProperty;
function t3(t) {
  if (!nh(t))
    return cT(t);
  var e = [];
  for (var n in Object(t))
    hT.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function Fl(t) {
  return Vl(t) ? $k(t) : t3(t);
}
function dT(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var pT = Object.prototype, mT = pT.hasOwnProperty;
function gT(t) {
  if (!lr(t))
    return dT(t);
  var e = nh(t), n = [];
  for (var i in t)
    i == "constructor" && (e || !mT.call(t, i)) || n.push(i);
  return n;
}
function Fm(t) {
  return Vl(t) ? $k(t, !0) : gT(t);
}
var bT = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, _T = /^\w*$/;
function Hm(t, e) {
  if (ti(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Cs(t) ? !0 : _T.test(t) || !bT.test(t) || e != null && t in Object(e);
}
var yT = js(Object, "create");
const Ia = yT;
function wT() {
  this.__data__ = Ia ? Ia(null) : {}, this.size = 0;
}
function vT(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var kT = "__lodash_hash_undefined__", CT = Object.prototype, ST = CT.hasOwnProperty;
function MT(t) {
  var e = this.__data__;
  if (Ia) {
    var n = e[t];
    return n === kT ? void 0 : n;
  }
  return ST.call(e, t) ? e[t] : void 0;
}
var AT = Object.prototype, OT = AT.hasOwnProperty;
function TT(t) {
  var e = this.__data__;
  return Ia ? e[t] !== void 0 : OT.call(e, t);
}
var ET = "__lodash_hash_undefined__";
function PT(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = Ia && e === void 0 ? ET : e, this;
}
function Ss(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
Ss.prototype.clear = wT;
Ss.prototype.delete = vT;
Ss.prototype.get = MT;
Ss.prototype.has = TT;
Ss.prototype.set = PT;
function RT() {
  this.__data__ = [], this.size = 0;
}
function oh(t, e) {
  for (var n = t.length; n--; )
    if (eh(t[n][0], e))
      return n;
  return -1;
}
var IT = Array.prototype, NT = IT.splice;
function DT(t) {
  var e = this.__data__, n = oh(e, t);
  if (n < 0)
    return !1;
  var i = e.length - 1;
  return n == i ? e.pop() : NT.call(e, n, 1), --this.size, !0;
}
function jT(t) {
  var e = this.__data__, n = oh(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function BT(t) {
  return oh(this.__data__, t) > -1;
}
function LT(t, e) {
  var n = this.__data__, i = oh(n, t);
  return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this;
}
function fo(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
fo.prototype.clear = RT;
fo.prototype.delete = DT;
fo.prototype.get = jT;
fo.prototype.has = BT;
fo.prototype.set = LT;
var xT = js(ar, "Map");
const Na = xT;
function zT() {
  this.size = 0, this.__data__ = {
    hash: new Ss(),
    map: new (Na || fo)(),
    string: new Ss()
  };
}
function VT(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function sh(t, e) {
  var n = t.__data__;
  return VT(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function FT(t) {
  var e = sh(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function HT(t) {
  return sh(this, t).get(t);
}
function WT(t) {
  return sh(this, t).has(t);
}
function UT(t, e) {
  var n = sh(this, t), i = n.size;
  return n.set(t, e), this.size += n.size == i ? 0 : 1, this;
}
function co(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
co.prototype.clear = zT;
co.prototype.delete = FT;
co.prototype.get = HT;
co.prototype.has = WT;
co.prototype.set = UT;
var qT = "Expected a function";
function lh(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(qT);
  var n = function() {
    var i = arguments, r = e ? e.apply(this, i) : i[0], o = n.cache;
    if (o.has(r))
      return o.get(r);
    var s = t.apply(this, i);
    return n.cache = o.set(r, s) || o, s;
  };
  return n.cache = new (lh.Cache || co)(), n;
}
lh.Cache = co;
var JT = 500;
function KT(t) {
  var e = lh(t, function(i) {
    return n.size === JT && n.clear(), i;
  }), n = e.cache;
  return e;
}
var GT = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, XT = /\\(\\)?/g, QT = KT(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(GT, function(n, i, r, o) {
    e.push(r ? o.replace(XT, "$1") : i || n);
  }), e;
});
const YT = QT;
function n3(t) {
  return t == null ? "" : Jk(t);
}
function i3(t, e) {
  return ti(t) ? t : Hm(t, e) ? [t] : YT(n3(t));
}
var ZT = 1 / 0;
function ah(t) {
  if (typeof t == "string" || Cs(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -ZT ? "-0" : e;
}
function Wm(t, e) {
  e = i3(e, t);
  for (var n = 0, i = e.length; t != null && n < i; )
    t = t[ah(e[n++])];
  return n && n == i ? t : void 0;
}
function $T(t, e, n) {
  var i = t == null ? void 0 : Wm(t, e);
  return i === void 0 ? n : i;
}
function Um(t, e) {
  for (var n = -1, i = e.length, r = t.length; ++n < i; )
    t[r + n] = e[n];
  return t;
}
var c0 = zi ? zi.isConcatSpreadable : void 0;
function eE(t) {
  return ti(t) || ih(t) || !!(c0 && t && t[c0]);
}
function r3(t, e, n, i, r) {
  var o = -1, s = t.length;
  for (n || (n = eE), r || (r = []); ++o < s; ) {
    var l = t[o];
    e > 0 && n(l) ? e > 1 ? r3(l, e - 1, n, i, r) : Um(r, l) : i || (r[r.length] = l);
  }
  return r;
}
var tE = e3(Object.getPrototypeOf, Object);
const o3 = tE;
function nE(t, e, n) {
  var i = -1, r = t.length;
  e < 0 && (e = -e > r ? 0 : r + e), n = n > r ? r : n, n < 0 && (n += r), r = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var o = Array(r); ++i < r; )
    o[i] = t[i + e];
  return o;
}
function iE() {
  this.__data__ = new fo(), this.size = 0;
}
function rE(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function oE(t) {
  return this.__data__.get(t);
}
function sE(t) {
  return this.__data__.has(t);
}
var lE = 200;
function aE(t, e) {
  var n = this.__data__;
  if (n instanceof fo) {
    var i = n.__data__;
    if (!Na || i.length < lE - 1)
      return i.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new co(i);
  }
  return n.set(t, e), this.size = n.size, this;
}
function Er(t) {
  var e = this.__data__ = new fo(t);
  this.size = e.size;
}
Er.prototype.clear = iE;
Er.prototype.delete = rE;
Er.prototype.get = oE;
Er.prototype.has = sE;
Er.prototype.set = aE;
function fE(t, e) {
  return t && th(e, Fl(e), t);
}
function cE(t, e) {
  return t && th(e, Fm(e), t);
}
var s3 = typeof exports == "object" && exports && !exports.nodeType && exports, u0 = s3 && typeof module == "object" && module && !module.nodeType && module, uE = u0 && u0.exports === s3, h0 = uE ? ar.Buffer : void 0, d0 = h0 ? h0.allocUnsafe : void 0;
function hE(t, e) {
  if (e)
    return t.slice();
  var n = t.length, i = d0 ? d0(n) : new t.constructor(n);
  return t.copy(i), i;
}
function dE(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = 0, o = []; ++n < i; ) {
    var s = t[n];
    e(s, n, t) && (o[r++] = s);
  }
  return o;
}
function l3() {
  return [];
}
var pE = Object.prototype, mE = pE.propertyIsEnumerable, p0 = Object.getOwnPropertySymbols, gE = p0 ? function(t) {
  return t == null ? [] : (t = Object(t), dE(p0(t), function(e) {
    return mE.call(t, e);
  }));
} : l3;
const qm = gE;
function bE(t, e) {
  return th(t, qm(t), e);
}
var _E = Object.getOwnPropertySymbols, yE = _E ? function(t) {
  for (var e = []; t; )
    Um(e, qm(t)), t = o3(t);
  return e;
} : l3;
const a3 = yE;
function wE(t, e) {
  return th(t, a3(t), e);
}
function f3(t, e, n) {
  var i = e(t);
  return ti(t) ? i : Um(i, n(t));
}
function mp(t) {
  return f3(t, Fl, qm);
}
function vE(t) {
  return f3(t, Fm, a3);
}
var kE = js(ar, "DataView");
const gp = kE;
var CE = js(ar, "Promise");
const bp = CE;
var SE = js(ar, "Set");
const _p = SE;
var m0 = "[object Map]", ME = "[object Object]", g0 = "[object Promise]", b0 = "[object Set]", _0 = "[object WeakMap]", y0 = "[object DataView]", AE = Ds(gp), OE = Ds(Na), TE = Ds(bp), EE = Ds(_p), PE = Ds(dp), ls = zl;
(gp && ls(new gp(new ArrayBuffer(1))) != y0 || Na && ls(new Na()) != m0 || bp && ls(bp.resolve()) != g0 || _p && ls(new _p()) != b0 || dp && ls(new dp()) != _0) && (ls = function(t) {
  var e = zl(t), n = e == ME ? t.constructor : void 0, i = n ? Ds(n) : "";
  if (i)
    switch (i) {
      case AE:
        return y0;
      case OE:
        return m0;
      case TE:
        return g0;
      case EE:
        return b0;
      case PE:
        return _0;
    }
  return e;
});
const yl = ls;
var RE = Object.prototype, IE = RE.hasOwnProperty;
function NE(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && IE.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var DE = ar.Uint8Array;
const Jc = DE;
function Jm(t) {
  var e = new t.constructor(t.byteLength);
  return new Jc(e).set(new Jc(t)), e;
}
function jE(t, e) {
  var n = e ? Jm(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var BE = /\w*$/;
function LE(t) {
  var e = new t.constructor(t.source, BE.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var w0 = zi ? zi.prototype : void 0, v0 = w0 ? w0.valueOf : void 0;
function xE(t) {
  return v0 ? Object(v0.call(t)) : {};
}
function zE(t, e) {
  var n = e ? Jm(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var VE = "[object Boolean]", FE = "[object Date]", HE = "[object Map]", WE = "[object Number]", UE = "[object RegExp]", qE = "[object Set]", JE = "[object String]", KE = "[object Symbol]", GE = "[object ArrayBuffer]", XE = "[object DataView]", QE = "[object Float32Array]", YE = "[object Float64Array]", ZE = "[object Int8Array]", $E = "[object Int16Array]", eP = "[object Int32Array]", tP = "[object Uint8Array]", nP = "[object Uint8ClampedArray]", iP = "[object Uint16Array]", rP = "[object Uint32Array]";
function oP(t, e, n) {
  var i = t.constructor;
  switch (e) {
    case GE:
      return Jm(t);
    case VE:
    case FE:
      return new i(+t);
    case XE:
      return jE(t, n);
    case QE:
    case YE:
    case ZE:
    case $E:
    case eP:
    case tP:
    case nP:
    case iP:
    case rP:
      return zE(t, n);
    case HE:
      return new i();
    case WE:
    case JE:
      return new i(t);
    case UE:
      return LE(t);
    case qE:
      return new i();
    case KE:
      return xE(t);
  }
}
function sP(t) {
  return typeof t.constructor == "function" && !nh(t) ? iO(o3(t)) : {};
}
var lP = "[object Map]";
function aP(t) {
  return Lo(t) && yl(t) == lP;
}
var k0 = _l && _l.isMap, fP = k0 ? rh(k0) : aP;
const cP = fP;
var uP = "[object Set]";
function hP(t) {
  return Lo(t) && yl(t) == uP;
}
var C0 = _l && _l.isSet, dP = C0 ? rh(C0) : hP;
const pP = dP;
var mP = 1, gP = 2, bP = 4, c3 = "[object Arguments]", _P = "[object Array]", yP = "[object Boolean]", wP = "[object Date]", vP = "[object Error]", u3 = "[object Function]", kP = "[object GeneratorFunction]", CP = "[object Map]", SP = "[object Number]", h3 = "[object Object]", MP = "[object RegExp]", AP = "[object Set]", OP = "[object String]", TP = "[object Symbol]", EP = "[object WeakMap]", PP = "[object ArrayBuffer]", RP = "[object DataView]", IP = "[object Float32Array]", NP = "[object Float64Array]", DP = "[object Int8Array]", jP = "[object Int16Array]", BP = "[object Int32Array]", LP = "[object Uint8Array]", xP = "[object Uint8ClampedArray]", zP = "[object Uint16Array]", VP = "[object Uint32Array]", Xt = {};
Xt[c3] = Xt[_P] = Xt[PP] = Xt[RP] = Xt[yP] = Xt[wP] = Xt[IP] = Xt[NP] = Xt[DP] = Xt[jP] = Xt[BP] = Xt[CP] = Xt[SP] = Xt[h3] = Xt[MP] = Xt[AP] = Xt[OP] = Xt[TP] = Xt[LP] = Xt[xP] = Xt[zP] = Xt[VP] = !0;
Xt[vP] = Xt[u3] = Xt[EP] = !1;
function wc(t, e, n, i, r, o) {
  var s, l = e & mP, a = e & gP, f = e & bP;
  if (n && (s = r ? n(t, i, r, o) : n(t)), s !== void 0)
    return s;
  if (!lr(t))
    return t;
  var c = ti(t);
  if (c) {
    if (s = NE(t), !l)
      return oO(t, s);
  } else {
    var u = yl(t), h = u == u3 || u == kP;
    if (Ra(t))
      return hE(t, l);
    if (u == h3 || u == c3 || h && !r) {
      if (s = a || h ? {} : sP(t), !l)
        return a ? wE(t, cE(s, t)) : bE(t, fE(s, t));
    } else {
      if (!Xt[u])
        return r ? t : {};
      s = oP(t, u, l);
    }
  }
  o || (o = new Er());
  var d = o.get(t);
  if (d)
    return d;
  o.set(t, s), pP(t) ? t.forEach(function(_) {
    s.add(wc(_, e, n, _, t, o));
  }) : cP(t) && t.forEach(function(_, b) {
    s.set(b, wc(_, e, n, b, t, o));
  });
  var p = f ? a ? vE : mp : a ? Fm : Fl, g = c ? void 0 : p(t);
  return gO(g || t, function(_, b) {
    g && (b = _, _ = t[b]), Gk(s, b, wc(_, e, n, b, t, o));
  }), s;
}
var FP = 1, HP = 4;
function WP(t, e) {
  return e = typeof e == "function" ? e : void 0, wc(t, FP | HP, e);
}
var UP = "__lodash_hash_undefined__";
function qP(t) {
  return this.__data__.set(t, UP), this;
}
function JP(t) {
  return this.__data__.has(t);
}
function Kc(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new co(); ++e < n; )
    this.add(t[e]);
}
Kc.prototype.add = Kc.prototype.push = qP;
Kc.prototype.has = JP;
function KP(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function GP(t, e) {
  return t.has(e);
}
var XP = 1, QP = 2;
function d3(t, e, n, i, r, o) {
  var s = n & XP, l = t.length, a = e.length;
  if (l != a && !(s && a > l))
    return !1;
  var f = o.get(t), c = o.get(e);
  if (f && c)
    return f == e && c == t;
  var u = -1, h = !0, d = n & QP ? new Kc() : void 0;
  for (o.set(t, e), o.set(e, t); ++u < l; ) {
    var p = t[u], g = e[u];
    if (i)
      var _ = s ? i(g, p, u, e, t, o) : i(p, g, u, t, e, o);
    if (_ !== void 0) {
      if (_)
        continue;
      h = !1;
      break;
    }
    if (d) {
      if (!KP(e, function(b, y) {
        if (!GP(d, y) && (p === b || r(p, b, n, i, o)))
          return d.push(y);
      })) {
        h = !1;
        break;
      }
    } else if (!(p === g || r(p, g, n, i, o))) {
      h = !1;
      break;
    }
  }
  return o.delete(t), o.delete(e), h;
}
function YP(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i, r) {
    n[++e] = [r, i];
  }), n;
}
function ZP(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i) {
    n[++e] = i;
  }), n;
}
var $P = 1, e7 = 2, t7 = "[object Boolean]", n7 = "[object Date]", i7 = "[object Error]", r7 = "[object Map]", o7 = "[object Number]", s7 = "[object RegExp]", l7 = "[object Set]", a7 = "[object String]", f7 = "[object Symbol]", c7 = "[object ArrayBuffer]", u7 = "[object DataView]", S0 = zi ? zi.prototype : void 0, rd = S0 ? S0.valueOf : void 0;
function h7(t, e, n, i, r, o, s) {
  switch (n) {
    case u7:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case c7:
      return !(t.byteLength != e.byteLength || !o(new Jc(t), new Jc(e)));
    case t7:
    case n7:
    case o7:
      return eh(+t, +e);
    case i7:
      return t.name == e.name && t.message == e.message;
    case s7:
    case a7:
      return t == e + "";
    case r7:
      var l = YP;
    case l7:
      var a = i & $P;
      if (l || (l = ZP), t.size != e.size && !a)
        return !1;
      var f = s.get(t);
      if (f)
        return f == e;
      i |= e7, s.set(t, e);
      var c = d3(l(t), l(e), i, r, o, s);
      return s.delete(t), c;
    case f7:
      if (rd)
        return rd.call(t) == rd.call(e);
  }
  return !1;
}
var d7 = 1, p7 = Object.prototype, m7 = p7.hasOwnProperty;
function g7(t, e, n, i, r, o) {
  var s = n & d7, l = mp(t), a = l.length, f = mp(e), c = f.length;
  if (a != c && !s)
    return !1;
  for (var u = a; u--; ) {
    var h = l[u];
    if (!(s ? h in e : m7.call(e, h)))
      return !1;
  }
  var d = o.get(t), p = o.get(e);
  if (d && p)
    return d == e && p == t;
  var g = !0;
  o.set(t, e), o.set(e, t);
  for (var _ = s; ++u < a; ) {
    h = l[u];
    var b = t[h], y = e[h];
    if (i)
      var v = s ? i(y, b, h, e, t, o) : i(b, y, h, t, e, o);
    if (!(v === void 0 ? b === y || r(b, y, n, i, o) : v)) {
      g = !1;
      break;
    }
    _ || (_ = h == "constructor");
  }
  if (g && !_) {
    var M = t.constructor, A = e.constructor;
    M != A && "constructor" in t && "constructor" in e && !(typeof M == "function" && M instanceof M && typeof A == "function" && A instanceof A) && (g = !1);
  }
  return o.delete(t), o.delete(e), g;
}
var b7 = 1, M0 = "[object Arguments]", A0 = "[object Array]", If = "[object Object]", _7 = Object.prototype, O0 = _7.hasOwnProperty;
function y7(t, e, n, i, r, o) {
  var s = ti(t), l = ti(e), a = s ? A0 : yl(t), f = l ? A0 : yl(e);
  a = a == M0 ? If : a, f = f == M0 ? If : f;
  var c = a == If, u = f == If, h = a == f;
  if (h && Ra(t)) {
    if (!Ra(e))
      return !1;
    s = !0, c = !1;
  }
  if (h && !c)
    return o || (o = new Er()), s || Vm(t) ? d3(t, e, n, i, r, o) : h7(t, e, a, n, i, r, o);
  if (!(n & b7)) {
    var d = c && O0.call(t, "__wrapped__"), p = u && O0.call(e, "__wrapped__");
    if (d || p) {
      var g = d ? t.value() : t, _ = p ? e.value() : e;
      return o || (o = new Er()), r(g, _, n, i, o);
    }
  }
  return h ? (o || (o = new Er()), g7(t, e, n, i, r, o)) : !1;
}
function fh(t, e, n, i, r) {
  return t === e ? !0 : t == null || e == null || !Lo(t) && !Lo(e) ? t !== t && e !== e : y7(t, e, n, i, fh, r);
}
var w7 = 1, v7 = 2;
function k7(t, e, n, i) {
  var r = n.length, o = r, s = !i;
  if (t == null)
    return !o;
  for (t = Object(t); r--; ) {
    var l = n[r];
    if (s && l[2] ? l[1] !== t[l[0]] : !(l[0] in t))
      return !1;
  }
  for (; ++r < o; ) {
    l = n[r];
    var a = l[0], f = t[a], c = l[1];
    if (s && l[2]) {
      if (f === void 0 && !(a in t))
        return !1;
    } else {
      var u = new Er();
      if (i)
        var h = i(f, c, a, t, e, u);
      if (!(h === void 0 ? fh(c, f, w7 | v7, i, u) : h))
        return !1;
    }
  }
  return !0;
}
function p3(t) {
  return t === t && !lr(t);
}
function C7(t) {
  for (var e = Fl(t), n = e.length; n--; ) {
    var i = e[n], r = t[i];
    e[n] = [i, r, p3(r)];
  }
  return e;
}
function m3(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function S7(t) {
  var e = C7(t);
  return e.length == 1 && e[0][2] ? m3(e[0][0], e[0][1]) : function(n) {
    return n === t || k7(n, t, e);
  };
}
function M7(t, e) {
  return t != null && e in Object(t);
}
function A7(t, e, n) {
  e = i3(e, t);
  for (var i = -1, r = e.length, o = !1; ++i < r; ) {
    var s = ah(e[i]);
    if (!(o = t != null && n(t, s)))
      break;
    t = t[s];
  }
  return o || ++i != r ? o : (r = t == null ? 0 : t.length, !!r && zm(r) && xm(s, r) && (ti(t) || ih(t)));
}
function O7(t, e) {
  return t != null && A7(t, e, M7);
}
var T7 = 1, E7 = 2;
function P7(t, e) {
  return Hm(t) && p3(e) ? m3(ah(t), e) : function(n) {
    var i = $T(n, t);
    return i === void 0 && i === e ? O7(n, t) : fh(e, i, T7 | E7);
  };
}
function R7(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function I7(t) {
  return function(e) {
    return Wm(e, t);
  };
}
function N7(t) {
  return Hm(t) ? R7(ah(t)) : I7(t);
}
function lf(t) {
  return typeof t == "function" ? t : t == null ? sf : typeof t == "object" ? ti(t) ? P7(t[0], t[1]) : S7(t) : N7(t);
}
function D7(t, e, n, i) {
  for (var r = -1, o = t == null ? 0 : t.length; ++r < o; ) {
    var s = t[r];
    e(i, s, n(s), t);
  }
  return i;
}
function g3(t) {
  return function(e, n, i) {
    for (var r = -1, o = Object(e), s = i(e), l = s.length; l--; ) {
      var a = s[t ? l : ++r];
      if (n(o[a], a, o) === !1)
        break;
    }
    return e;
  };
}
var j7 = g3();
const B7 = j7;
function b3(t, e) {
  return t && B7(t, e, Fl);
}
function _3(t, e) {
  return function(n, i) {
    if (n == null)
      return n;
    if (!Vl(n))
      return t(n, i);
    for (var r = n.length, o = e ? r : -1, s = Object(n); (e ? o-- : ++o < r) && i(s[o], o, s) !== !1; )
      ;
    return n;
  };
}
var L7 = _3(b3);
const y3 = L7;
function x7(t, e, n, i) {
  return y3(t, function(r, o, s) {
    e(i, r, n(r), s);
  }), i;
}
function w3(t, e) {
  return function(n, i) {
    var r = ti(n) ? D7 : x7, o = e ? e() : {};
    return r(n, t, lf(i), o);
  };
}
var z7 = function() {
  return ar.Date.now();
};
const od = z7;
var V7 = "Expected a function", F7 = Math.max, H7 = Math.min;
function ch(t, e, n) {
  var i, r, o, s, l, a, f = 0, c = !1, u = !1, h = !0;
  if (typeof t != "function")
    throw new TypeError(V7);
  e = hp(e) || 0, lr(n) && (c = !!n.leading, u = "maxWait" in n, o = u ? F7(hp(n.maxWait) || 0, e) : o, h = "trailing" in n ? !!n.trailing : h);
  function d(P) {
    var S = i, D = r;
    return i = r = void 0, f = P, s = t.apply(D, S), s;
  }
  function p(P) {
    return f = P, l = setTimeout(b, e), c ? d(P) : s;
  }
  function g(P) {
    var S = P - a, D = P - f, x = e - S;
    return u ? H7(x, o - D) : x;
  }
  function _(P) {
    var S = P - a, D = P - f;
    return a === void 0 || S >= e || S < 0 || u && D >= o;
  }
  function b() {
    var P = od();
    if (_(P))
      return y(P);
    l = setTimeout(b, g(P));
  }
  function y(P) {
    return l = void 0, h && i ? d(P) : (i = r = void 0, s);
  }
  function v() {
    l !== void 0 && clearTimeout(l), f = 0, i = a = r = l = void 0;
  }
  function M() {
    return l === void 0 ? s : y(od());
  }
  function A() {
    var P = od(), S = _(P);
    if (i = arguments, r = this, a = P, S) {
      if (l === void 0)
        return p(a);
      if (u)
        return clearTimeout(l), l = setTimeout(b, e), d(a);
    }
    return l === void 0 && (l = setTimeout(b, e)), s;
  }
  return A.cancel = v, A.flush = M, A;
}
function et(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
function v3(t) {
  return typeof t == "function" ? t : sf;
}
function W7(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var U7 = g3(!0);
const q7 = U7;
function J7(t, e) {
  return t && q7(t, e, Fl);
}
var K7 = _3(J7, !0);
const G7 = K7;
function X7(t, e) {
  var n = ti(t) ? W7 : G7;
  return n(t, v3(e));
}
function ui(t) {
  return t && t.length ? t[0] : void 0;
}
function k3(t, e) {
  var n = -1, i = Vl(t) ? Array(t.length) : [];
  return y3(t, function(r, o, s) {
    i[++n] = e(r, o, s);
  }), i;
}
function Q7(t, e) {
  var n = ti(t) ? ga : k3;
  return n(t, lf(e));
}
var Y7 = Object.prototype, Z7 = Y7.hasOwnProperty, $7 = w3(function(t, e, n) {
  Z7.call(t, n) ? t[n].push(e) : $u(t, n, [e]);
});
const uh = $7;
function wt(t) {
  var e = t == null ? 0 : t.length;
  return e ? nE(t, 0, -1) : [];
}
var e9 = "[object Map]", t9 = "[object Set]", n9 = Object.prototype, i9 = n9.hasOwnProperty;
function Mt(t) {
  if (t == null)
    return !0;
  if (Vl(t) && (ti(t) || typeof t == "string" || typeof t.splice == "function" || Ra(t) || Vm(t) || ih(t)))
    return !t.length;
  var e = yl(t);
  if (e == e9 || e == t9)
    return !t.size;
  if (nh(t))
    return !t3(t).length;
  for (var n in t)
    if (i9.call(t, n))
      return !1;
  return !0;
}
function kt(t, e) {
  return fh(t, e);
}
function r9(t, e) {
  return t < e;
}
function o9(t, e) {
  var n = {};
  return e = lf(e), b3(t, function(i, r, o) {
    $u(n, r, e(i, r, o));
  }), n;
}
function s9(t, e, n) {
  for (var i = -1, r = t.length; ++i < r; ) {
    var o = t[i], s = e(o);
    if (s != null && (l === void 0 ? s === s && !Cs(s) : n(s, l)))
      var l = s, a = o;
  }
  return a;
}
function Nf(t, e) {
  return t && t.length ? s9(t, lf(e), r9) : void 0;
}
function l9(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function a9(t, e) {
  if (t !== e) {
    var n = t !== void 0, i = t === null, r = t === t, o = Cs(t), s = e !== void 0, l = e === null, a = e === e, f = Cs(e);
    if (!l && !f && !o && t > e || o && s && a && !l && !f || i && s && a || !n && a || !r)
      return 1;
    if (!i && !o && !f && t < e || f && n && r && !i && !o || l && n && r || !s && r || !a)
      return -1;
  }
  return 0;
}
function f9(t, e, n) {
  for (var i = -1, r = t.criteria, o = e.criteria, s = r.length, l = n.length; ++i < s; ) {
    var a = a9(r[i], o[i]);
    if (a) {
      if (i >= l)
        return a;
      var f = n[i];
      return a * (f == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function c9(t, e, n) {
  e.length ? e = ga(e, function(o) {
    return ti(o) ? function(s) {
      return Wm(s, o.length === 1 ? o[0] : o);
    } : o;
  }) : e = [sf];
  var i = -1;
  e = ga(e, rh(lf));
  var r = k3(t, function(o, s, l) {
    var a = ga(e, function(f) {
      return f(o);
    });
    return { criteria: a, index: ++i, value: o };
  });
  return l9(r, function(o, s) {
    return f9(o, s, n);
  });
}
var u9 = w3(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
const h9 = u9;
var d9 = Math.ceil, p9 = Math.max;
function m9(t, e, n, i) {
  for (var r = -1, o = p9(d9((e - t) / (n || 1)), 0), s = Array(o); o--; )
    s[i ? o : ++r] = t, t += n;
  return s;
}
function g9(t) {
  return function(e, n, i) {
    return i && typeof i != "number" && pp(e, n, i) && (n = i = void 0), e = yc(e), n === void 0 ? (n = e, e = 0) : n = yc(n), i = i === void 0 ? e < n ? 1 : -1 : yc(i), m9(e, n, i, t);
  };
}
var b9 = g9();
const _9 = b9;
var y9 = kO(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && pp(t, e[0], e[1]) ? e = [] : n > 2 && pp(e[0], e[1], e[2]) && (e = [e[0]]), c9(t, r3(e, 1), []);
});
const w9 = y9;
var v9 = "Expected a function";
function k9(t, e, n) {
  var i = !0, r = !0;
  if (typeof t != "function")
    throw new TypeError(v9);
  return lr(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), ch(t, e, {
    leading: i,
    maxWait: e,
    trailing: r
  });
}
var C9 = 9007199254740991, sd = 4294967295, S9 = Math.min;
function T0(t, e) {
  if (t = LA(t), t < 1 || t > C9)
    return [];
  var n = sd, i = S9(t, sd);
  e = v3(e), t -= sd;
  for (var r = Xk(i, e); ++n < t; )
    e(n);
  return r;
}
var M9 = 0;
function wl(t) {
  var e = ++M9;
  return n3(t) + e;
}
const A9 = 1e4, O9 = [];
function yp(t, e = !1) {
  const n = {};
  if (!Array.isArray(t))
    throw new TypeError("Array expected");
  function i(s, l) {
    (!Array.isArray(s) && !dn(s) || e && l.length > 0) && (n[Ae(l)] = !0), dn(s) && Object.keys(s).forEach((f) => {
      i(s[f], l.concat(f));
    });
  }
  const r = Math.min(t.length, A9);
  for (let s = 0; s < r; s++) {
    const l = t[s];
    i(l, O9);
  }
  return Object.keys(n).sort().map(sr);
}
function C3(t, e, n) {
  if (!(e <= t))
    for (let i = t; i < e; i++)
      n(i);
}
function Gc(t, e) {
  return t.length > e ? t.slice(0, e) : t;
}
function E0(t) {
  return {
    ...t
  };
}
function P0(t) {
  return Object.values(t);
}
function R0(t, e, n, i) {
  const r = t.slice(0), o = r.splice(e, n);
  return r.splice.apply(r, [e + i, 0, ...o]), r;
}
function Km(t, e) {
  try {
    return e.parse(t);
  } catch {
    return e.parse(Tr(t));
  }
}
function S3(t, e) {
  try {
    return Km(t, e);
  } catch {
    return;
  }
}
function hh(t, e) {
  t = t.replace(A3, "");
  try {
    return e(t);
  } catch {
  }
  try {
    return e("[" + t + "]");
  } catch {
  }
  try {
    return e("{" + t + "}");
  } catch {
  }
  throw new Error("Failed to parse partial JSON");
}
function M3(t) {
  t = t.replace(A3, "");
  try {
    return Tr(t);
  } catch {
  }
  try {
    const e = Tr("[" + t + "]");
    return e.substring(1, e.length - 1);
  } catch {
  }
  try {
    const e = Tr("{" + t + "}");
    return e.substring(1, e.length - 1);
  } catch {
  }
  throw new Error("Failed to repair partial JSON");
}
const A3 = /,\s*$/;
function dh(t, e) {
  const n = N0.exec(e);
  if (n) {
    const i = Tn(n[2]), r = E9(t, `
`, 0, i), o = t.lastIndexOf(`
`, i), s = i - o - 1;
    return {
      position: i,
      line: r,
      column: s,
      message: e.replace(N0, () => `line ${r + 1} column ${s + 1}`)
    };
  } else {
    const i = D9.exec(e), r = i ? Tn(i[1]) : null, o = r !== null ? r - 1 : null, s = j9.exec(e), l = s ? Tn(s[1]) : null, a = l !== null ? l - 1 : null;
    return {
      position: o !== null && a !== null ? T9(t, o, a) : null,
      line: o,
      column: a,
      message: e.replace(/^JSON.parse: /, "").replace(/ of the JSON data$/, "")
    };
  }
}
function T9(t, e, n) {
  let i = t.indexOf(`
`), r = 1;
  for (; r < e && i !== -1; )
    i = t.indexOf(`
`, i + 1), r++;
  return i !== -1 ? i + n + 1 : null;
}
function E9(t, e, n = 0, i = t.length) {
  let r = 0;
  for (let o = n; o < i; o++)
    t.charAt(o) === e && r++;
  return r;
}
function P9(t, e) {
  try {
    const n = Yu.parse(t), i = Ae(e), r = n.pointers[i];
    if (r)
      return {
        path: e,
        line: r.key ? r.key.line : r.value ? r.value.line : 0,
        column: r.key ? r.key.column : r.value ? r.value.column : 0,
        from: r.key ? r.key.pos : r.value ? r.value.pos : 0,
        to: r.keyEnd ? r.keyEnd.pos : r.valueEnd ? r.valueEnd.pos : 0
      };
  } catch (n) {
    console.error(n);
  }
  return null;
}
function R9(t, e, n) {
  if (e === "array") {
    if (Array.isArray(t))
      return t;
    if (dn(t))
      return P0(t);
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (Array.isArray(i))
          return i;
        if (dn(i))
          return P0(i);
      } catch {
        return [t];
      }
    return [t];
  }
  if (e === "object") {
    if (Array.isArray(t))
      return E0(t);
    if (dn(t))
      return t;
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (dn(i))
          return i;
        if (Array.isArray(i))
          return E0(i);
      } catch {
        return { value: t };
      }
    return { value: t };
  }
  if (e === "value")
    return tn(t) ? n.stringify(t) : t;
  throw new Error(`Cannot convert ${Lm(t, n)} to ${e}`);
}
function ld(t) {
  return dn(t) ? t.json !== void 0 ? t.text !== void 0 ? 'Content must contain either a property "json" or a property "text" but not both' : null : t.text === void 0 ? 'Content must contain either a property "json" or a property "text"' : typeof t.text != "string" ? 'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?' : null : "Content must be an object";
}
function vl(t) {
  return dn(t) && typeof t.text == "string";
}
function Gm(t) {
  return dn(t) && typeof t.json < "u" && !vl(t);
}
function I9(t, e = void 0, n = JSON) {
  return vl(t) ? t : { text: n.stringify(t.json, null, e) };
}
function I0(t, e = JSON) {
  return Gm(t) ? t : { json: e.parse(t.text) };
}
function Xc(t, e, n) {
  return I9(t, e, n).text;
}
function O3(t, e) {
  return N9(t, e) > e;
}
function N9(t, e = 1 / 0) {
  if (vl(t))
    return t.text.length;
  const n = t.json;
  let i = 0;
  function r(o) {
    if (Array.isArray(o)) {
      if (i += 2 + (o.length - 1), i > e)
        return i;
      for (let s = 0; s < o.length; s++) {
        const l = o[s];
        if (r(l), i > e)
          return i;
      }
    } else if (dn(o)) {
      const s = Object.keys(o);
      i += 2 + s.length + (s.length - 1);
      for (let l = 0; l < s.length; l++) {
        const a = s[l], f = o[a];
        i += a.length + 2, r(f);
      }
    } else
      typeof o == "string" ? i += o.length + 2 : i += String(o).length;
  }
  return r(n), i;
}
const N0 = /(position|char) (\d+)/, D9 = /line (\d+)/, j9 = /column (\d+)/;
function B9(t, e) {
  return t.parse === e.parse && t.stringify === e.stringify;
}
function Xm({ escapeControlCharacters: t, escapeUnicodeCharacters: e }) {
  return t ? e ? L9 : x9 : e ? z9 : V9;
}
const L9 = {
  escapeValue: (t) => T3(R3(String(t))),
  unescapeValue: (t) => I3(E3(t))
}, x9 = {
  escapeValue: (t) => R3(String(t)),
  unescapeValue: (t) => I3(t)
}, z9 = {
  escapeValue: (t) => T3(String(t)),
  unescapeValue: (t) => E3(t)
}, V9 = {
  escapeValue: (t) => String(t),
  unescapeValue: (t) => t
};
function T3(t) {
  return t.replace(/[^\x20-\x7F]/g, (e) => {
    var n;
    return e === "\b" || e === "\f" || e === `
` || e === "\r" || e === "	" ? e : "\\u" + ("000" + ((n = e.codePointAt(0)) == null ? void 0 : n.toString(16))).slice(-4);
  });
}
function E3(t) {
  return t.replace(/\\u[a-fA-F0-9]{4}/g, (e) => {
    try {
      const n = JSON.parse('"' + e + '"');
      return P3[n] || n;
    } catch {
      return e;
    }
  });
}
const P3 = {
  '"': '\\"',
  "\\": "\\\\",
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, F9 = {
  '\\"': '"',
  "\\\\": "\\",
  "\\/": "/",
  "\\b": "\b",
  "\\f": "\f",
  "\\n": `
`,
  "\\r": "\r",
  "\\t": "	"
};
function R3(t) {
  return t.replace(/["\b\f\n\r\t\\]/g, (e) => P3[e] || e);
}
function I3(t) {
  return t.replace(/\\["bfnrt\\]/g, (e) => F9[e] || e);
}
function Ms(t) {
  return typeof t != "string" ? String(t) : t.endsWith(`
`) ? t + `
` : t;
}
function H9(t) {
  return t.replace(/\n$/, "");
}
function N3(t, e) {
  return af(t, (n) => n.nodeName.toUpperCase() === e.toUpperCase());
}
function us(t, e, n) {
  return af(t, (i) => U9(i, e, n));
}
function W9(t) {
  return t.nodeName === "DIV" && t.contentEditable === "true";
}
function U9(t, e, n) {
  return typeof t.getAttribute == "function" && t.getAttribute(e) === n;
}
function af(t, e) {
  return !!Qm(t, e);
}
function Qm(t, e) {
  let n = t;
  for (; n && !e(n); )
    n = n.parentNode;
  return n || void 0;
}
function D3(t) {
  if (t.firstChild == null) {
    t.focus();
    return;
  }
  const e = document.createRange(), n = window.getSelection();
  e.setStart(t, 1), e.collapse(!0), n == null || n.removeAllRanges(), n == null || n.addRange(e);
}
function Qc(t, e, n) {
  const i = Hl(t).document.activeElement;
  i.isContentEditable && (i.textContent = n ? e : i.textContent + e, D3(i));
}
function Hl(t) {
  return t && t.ownerDocument && t.ownerDocument.defaultView;
}
function Yc(t) {
  const e = Hl(t);
  return af(e.document.activeElement, (n) => n === t);
}
function j3(t, e) {
  return Qm(t, (n) => n.nodeName === e);
}
function ad(t) {
  return us(t, "data-type", "selectable-key") ? Vt.key : us(t, "data-type", "selectable-value") ? Vt.value : us(t, "data-type", "insert-selection-area-inside") ? Vt.inside : us(t, "data-type", "insert-selection-area-after") ? Vt.after : Vt.multi;
}
function kl(t) {
  return encodeURIComponent(Ae(t));
}
function q9(t) {
  return sr(decodeURIComponent(t));
}
function B3(t) {
  const e = Qm(t, (n) => n != null && n.hasAttribute ? n.hasAttribute("data-path") : !1);
  return e ? q9(e.getAttribute("data-path")) : null;
}
function J9({ allElements: t, currentElement: e, direction: n, hasPrio: i = () => !0, margin: r = 10 }) {
  const o = Q7(t.filter(l), a), s = a(e);
  function l(b) {
    const y = b.getBoundingClientRect();
    return y.width > 0 && y.height > 0;
  }
  function a(b) {
    const y = b.getBoundingClientRect();
    return {
      x: y.left + y.width / 2,
      y: y.top + y.height / 2,
      rect: y,
      element: b
    };
  }
  const f = (b, y) => Math.abs(b.y - y.y) < r, c = (b, y) => b.rect.left + r < y.rect.left, u = (b, y) => b.rect.right > y.rect.right + r, h = (b, y) => b.y + r < y.y, d = (b, y) => b.y > y.y + r;
  function p(b, y, v = 1) {
    const M = b.x - y.x, A = (b.y - y.y) * v;
    return Math.sqrt(M * M + A * A);
  }
  const g = (b) => p(b, s), _ = (b) => p(b, s, 10);
  if (n === "Left" || n === "Right") {
    const b = n === "Left" ? o.filter((M) => c(M, s)) : o.filter((M) => u(M, s)), y = b.filter((M) => f(M, s)), v = Nf(y, g) || Nf(b, _);
    return v == null ? void 0 : v.element;
  }
  if (n === "Up" || n === "Down") {
    const b = n === "Up" ? o.filter((M) => h(M, s)) : o.filter((M) => d(M, s)), y = b.filter((M) => i(M.element)), v = Nf(y, g) || Nf(b, g);
    return v == null ? void 0 : v.element;
  }
}
const L3 = typeof navigator < "u" ? navigator.platform.toUpperCase().indexOf("MAC") >= 0 : !1;
function K9(t) {
  return X9[t] || "";
}
function Ko(t) {
  const e = [];
  t.ctrlKey && e.push("Ctrl"), t.metaKey && e.push("Command"), t.altKey && e.push(L3 ? "Option" : "Alt"), t.shiftKey && e.push("Shift");
  const n = K9(t.which);
  return G9[n] || e.push(n), e.join("+");
}
const G9 = {
  Ctrl: !0,
  Command: !0,
  Alt: !0,
  Option: !0,
  Shift: !0
}, X9 = {
  8: "Backspace",
  9: "Tab",
  13: "Enter",
  16: "Shift",
  17: "Ctrl",
  18: "Alt",
  19: "Pause_Break",
  20: "Caps_Lock",
  27: "Escape",
  33: "Page_Up",
  34: "Page_Down",
  35: "End",
  36: "Home",
  37: "Left",
  38: "Up",
  39: "Right",
  40: "Down",
  45: "Insert",
  46: "Delete",
  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",
  65: "A",
  66: "B",
  67: "C",
  68: "D",
  69: "E",
  70: "F",
  71: "G",
  72: "H",
  73: "I",
  74: "J",
  75: "K",
  76: "L",
  77: "M",
  78: "N",
  79: "O",
  80: "P",
  81: "Q",
  82: "R",
  83: "S",
  84: "T",
  85: "U",
  86: "V",
  87: "W",
  88: "X",
  89: "Y",
  90: "Z",
  91: "Left_Window_Key",
  92: "Right_Window_Key",
  93: "Select_Key",
  96: "Numpad_0",
  97: "Numpad_1",
  98: "Numpad_2",
  99: "Numpad_3",
  100: "Numpad_4",
  101: "Numpad_5",
  102: "Numpad_6",
  103: "Numpad_7",
  104: "Numpad_8",
  105: "Numpad_9",
  106: "Numpad_*",
  107: "Numpad_+",
  109: "Numpad_-",
  110: "Numpad_.",
  111: "Numpad_/",
  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",
  144: "Num_Lock",
  145: "Scroll_Lock",
  186: ";",
  59: ";",
  187: "=",
  61: "=",
  188: ",",
  189: "-",
  173: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
};
const { window: fd } = Ku;
function D0(t) {
  let e, n, i, r, o, s;
  const l = [t[0].props];
  var a = t[0].component;
  function f(c) {
    let u = {};
    for (let h = 0; h < l.length; h += 1)
      u = Jo(u, l[h]);
    return { props: u };
  }
  return a && (r = jr(a, f())), {
    c() {
      e = O("div"), n = O("input"), i = q(), r && oe(r.$$.fragment), m(n, "type", "text"), n.readOnly = !0, m(n, "tabindex", "-1"), m(n, "class", "jse-hidden-input svelte-1r8q3m8"), m(e, "class", "jse-absolute-popup-content svelte-1r8q3m8"), m(e, "style", o = j0(t[1], t[0].options));
    },
    m(c, u) {
      B(c, e, u), w(e, n), t[7](n), w(e, i), r && ie(r, e, null), s = !0;
    },
    p(c, u) {
      const h = u & 1 ? Ns(l, [Qu(c[0].props)]) : {};
      if (a !== (a = c[0].component)) {
        if (r) {
          me();
          const d = r;
          E(d.$$.fragment, 1, 0, () => {
            re(d, 1);
          }), ge();
        }
        a ? (r = jr(a, f()), oe(r.$$.fragment), k(r.$$.fragment, 1), ie(r, e, null)) : r = null;
      } else
        a && r.$set(h);
      (!s || u & 3 && o !== (o = j0(c[1], c[0].options))) && m(e, "style", o);
    },
    i(c) {
      s || (r && k(r.$$.fragment, c), s = !0);
    },
    o(c) {
      r && E(r.$$.fragment, c), s = !1;
    },
    d(c) {
      c && j(e), t[7](null), r && re(r);
    }
  };
}
function Q9(t) {
  let e, n, i, r, o = t[1] && D0(t);
  return {
    c() {
      e = O("div"), o && o.c(), m(e, "class", "jse-absolute-popup svelte-1r8q3m8");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), t[8](e), n = !0, i || (r = [
        X(fd, "mousedown", t[3], !0),
        X(fd, "keydown", t[4], !0),
        X(fd, "wheel", t[5], !0),
        X(e, "mousedown", Y9),
        X(e, "keydown", t[4])
      ], i = !0);
    },
    p(s, [l]) {
      s[1] ? o ? (o.p(s, l), l & 2 && k(o, 1)) : (o = D0(s), o.c(), k(o, 1), o.m(e, null)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), ge());
    },
    i(s) {
      n || (k(o), n = !0);
    },
    o(s) {
      E(o), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(), t[8](null), i = !1, nt(r);
    }
  };
}
function Y9(t) {
  t.stopPropagation();
}
function j0(t, e) {
  function n() {
    if (e.anchor) {
      const { anchor: c, width: u = 0, height: h = 0, offsetTop: d = 0, offsetLeft: p = 0, position: g } = e, { left: _, top: b, bottom: y, right: v } = c.getBoundingClientRect(), M = g === "top" || b + h > window.innerHeight && b > h, A = g === "left" || _ + u > window.innerWidth && _ > u;
      return {
        left: A ? v - p : _ + p,
        top: M ? b - d : y + d,
        positionAbove: M,
        positionLeft: A
      };
    } else if (typeof e.left == "number" && typeof e.top == "number") {
      const { left: c, top: u, width: h = 0, height: d = 0 } = e, p = u + d > window.innerHeight && u > d, g = c + h > window.innerWidth && c > h;
      return { left: c, top: u, positionAbove: p, positionLeft: g };
    } else
      throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"');
  }
  const i = t.getBoundingClientRect(), { left: r, top: o, positionAbove: s, positionLeft: l } = n(), a = s ? `bottom: ${i.top - o}px;` : `top: ${o - i.top}px;`, f = l ? `right: ${i.left - r}px;` : `left: ${r - i.left}px;`;
  return a + f;
}
function Z9(t, e, n) {
  let { popup: i } = e, { closeAbsolutePopup: r } = e, o, s;
  Ei(u);
  function l(p) {
    i.options && i.options.closeOnOuterClick && !af(p.target, (g) => g === o) && r(i.id);
  }
  function a(p) {
    l(p);
  }
  function f(p) {
    Ko(p) === "Escape" && r(i.id);
  }
  function c(p) {
    l(p);
  }
  function u() {
    s && s.focus();
  }
  function h(p) {
    ht[p ? "unshift" : "push"](() => {
      s = p, n(2, s);
    });
  }
  function d(p) {
    ht[p ? "unshift" : "push"](() => {
      o = p, n(1, o);
    });
  }
  return t.$$set = (p) => {
    "popup" in p && n(0, i = p.popup), "closeAbsolutePopup" in p && n(6, r = p.closeAbsolutePopup);
  }, [
    i,
    o,
    s,
    a,
    f,
    c,
    r,
    h,
    d
  ];
}
class $9 extends Be {
  constructor(e) {
    super(), je(this, e, Z9, Q9, Pt, { popup: 0, closeAbsolutePopup: 6 });
  }
}
const eR = $9;
function B0(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function L0(t) {
  let e, n;
  return e = new eR({
    props: {
      popup: t[6],
      closeAbsolutePopup: t[1]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.popup = i[6]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function tR(t) {
  let e, n, i = t[0], r = [];
  for (let a = 0; a < i.length; a += 1)
    r[a] = L0(B0(t, i, a));
  const o = (a) => E(r[a], 1, 1, () => {
    r[a] = null;
  }), s = t[3].default, l = Sn(s, t, t[2], null);
  return {
    c() {
      for (let a = 0; a < r.length; a += 1)
        r[a].c();
      e = q(), l && l.c();
    },
    m(a, f) {
      for (let c = 0; c < r.length; c += 1)
        r[c].m(a, f);
      B(a, e, f), l && l.m(a, f), n = !0;
    },
    p(a, [f]) {
      if (f & 3) {
        i = a[0];
        let c;
        for (c = 0; c < i.length; c += 1) {
          const u = B0(a, i, c);
          r[c] ? (r[c].p(u, f), k(r[c], 1)) : (r[c] = L0(u), r[c].c(), k(r[c], 1), r[c].m(e.parentNode, e));
        }
        for (me(), c = i.length; c < r.length; c += 1)
          o(c);
        ge();
      }
      l && l.p && (!n || f & 4) && An(
        l,
        s,
        a,
        a[2],
        n ? Mn(s, a[2], f, null) : On(a[2]),
        null
      );
    },
    i(a) {
      if (!n) {
        for (let f = 0; f < i.length; f += 1)
          k(r[f]);
        k(l, a), n = !0;
      }
    },
    o(a) {
      r = r.filter(Boolean);
      for (let f = 0; f < r.length; f += 1)
        E(r[f]);
      E(l, a), n = !1;
    },
    d(a) {
      Dt(r, a), a && j(e), l && l.d(a);
    }
  };
}
function nR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const o = Wn("jsoneditor:AbsolutePopup");
  let s = [];
  function l(f, c, u) {
    o("open...", c, u);
    const h = {
      id: ma(),
      component: f,
      props: c || {},
      options: u || {}
    };
    return n(0, s = [...s, h]), h.id;
  }
  function a(f) {
    const c = s.findIndex((u) => u.id === f);
    if (c !== -1) {
      const u = s[c];
      u.options.onClose && u.options.onClose(), n(0, s = s.filter((h) => h.id !== f));
    }
  }
  return yk("absolute-popup", { openAbsolutePopup: l, closeAbsolutePopup: a }), t.$$set = (f) => {
    "$$scope" in f && n(2, r = f.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && o("popups", s);
  }, [s, a, r, i];
}
class iR extends Be {
  constructor(e) {
    super(), je(this, e, nR, tR, pt, {});
  }
}
const x3 = iR;
function yi(t) {
  return "$" + t.map(rR).join("");
}
function rR(t) {
  if (V3.test(t))
    return "[" + t + "]";
  if (z3.test(t))
    return "." + t;
  {
    const e = JSON.stringify(t);
    return "['" + e.substring(1, e.length - 1).replace(/\\"/g, '"') + "']";
  }
}
function Vi(t) {
  return t.replace(/^\$/, "").replace(/^\./, "");
}
function oR(t) {
  return t.startsWith("$") ? t : !t.startsWith("[") && !t.startsWith(".") ? "$." + t : "$" + t;
}
function sR(t) {
  let e = oR(t.trim()).substring(1);
  const n = [];
  for (; e.length > 0; ) {
    const i = e.match(cR);
    if (!i)
      throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${t.length - e.length}`);
    n.push(i[1] || i[2] || i[3]), e = e.substring(i[0].length);
  }
  return n;
}
const lR = "^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)", aR = "^\\[([0-9]+)]", fR = "^\\['(.*)']", cR = new RegExp([lR, aR, fR].join("|"));
function Js(t) {
  return {
    value: t,
    label: Mt(t) ? "(whole item)" : Vi(yi(t))
  };
}
function rs(t) {
  return t.map((e) => V3.test(e) ? `?.[${e}]` : z3.test(e) ? `?.${e}` : `?.[${JSON.stringify(e)}]`).join("");
}
const z3 = /^[a-zA-Z$_][a-zA-Z$_\d]*$/, V3 = /^\d+$/;
function uR() {
  return lh((t) => t, yi);
}
function ff(t, e) {
  const n = new Set(e), i = t.replace(/ \(copy( \d+)?\)$/, "");
  let r = t, o = 1;
  for (; n.has(r); ) {
    const s = "copy" + (o > 1 ? " " + o : "");
    r = `${i} (${s})`, o++;
  }
  return r;
}
function Lr(t, e) {
  const n = "...", i = e - n.length;
  return t.length > e ? t.substring(0, i) + n : t;
}
function hR(t) {
  if (t === "")
    return "";
  const e = t.toLowerCase();
  if (e === "null")
    return null;
  if (e === "true")
    return !0;
  if (e === "false")
    return !1;
  if (e === "undefined")
    return;
  const n = Number(t), i = parseFloat(t);
  return !isNaN(n) && !isNaN(i) ? n : t;
}
const dR = `
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`, pR = {
  id: "javascript",
  name: "JavaScript",
  description: dR,
  createQuery: mR,
  executeQuery: gR
};
function mR(t, e) {
  const { filter: n, sort: i, projection: r } = e, o = [];
  if (n && n.path && n.relation && n.value) {
    const s = `item => item${rs(n.path)}`, l = hR(n.value), a = typeof l == "string" ? `'${n.value}'` : uA(n.value) && !Number.isSafeInteger(l) ? `${n.value}n` : n.value;
    o.push(`  data = data.filter(${s} ${n.relation} ${a})
`);
  }
  if (i && i.path && i.direction && (i.direction === "desc" ? o.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${rs(i.path)}
    const valueB = b${rs(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`) : o.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${rs(i.path)}
    const valueB = b${rs(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)), r && r.paths)
    if (r.paths.length > 1) {
      const s = r.paths.map((l) => {
        const a = l[l.length - 1] || "item", f = `item${rs(l)}`;
        return `    ${JSON.stringify(a)}: ${f}`;
      });
      o.push(`  data = data.map(item => ({
${s.join(`,
`)}})
  )
`);
    } else {
      const s = `item${rs(r.paths[0])}`;
      o.push(`  data = data.map(item => ${s})
`);
    }
  return o.push(`  return data
`), `function query (data) {
${o.join("")}}`;
}
function gR(t, e) {
  const i = new Function(`"use strict";

` + e + `

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(t);
  return i !== void 0 ? i : null;
}
var bR = {
  prefix: "far",
  iconName: "lightbulb",
  icon: [384, 512, [128161], "f0eb", "M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]
}, _R = {
  prefix: "far",
  iconName: "square-check",
  icon: [448, 512, [9745, 9989, 61510, "check-square"], "f14a", "M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]
}, Da = _R, ja = {
  prefix: "far",
  iconName: "square",
  icon: [448, 512, [9632, 9723, 9724, 61590], "f0c8", "M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]
}, yR = {
  prefix: "far",
  iconName: "clock",
  icon: [512, 512, [128339, "clock-four"], "f017", "M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]
};
function wR(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Jo(i, n[r]);
  return {
    c() {
      e = lt("path"), xc(e, i);
    },
    m(r, o) {
      B(r, e, o);
    },
    p(r, [o]) {
      xc(e, i = Ns(n, [o & 1 && r[0]]));
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function vR(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class kR extends Be {
  constructor(e) {
    super(), je(this, e, vR, wR, Pt, { data: 0 });
  }
}
function CR(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Jo(i, n[r]);
  return {
    c() {
      e = lt("polygon"), xc(e, i);
    },
    m(r, o) {
      B(r, e, o);
    },
    p(r, [o]) {
      xc(e, i = Ns(n, [o & 1 && r[0]]));
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function SR(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class MR extends Be {
  constructor(e) {
    super(), je(this, e, SR, CR, Pt, { data: 0 });
  }
}
function AR(t) {
  let e;
  return {
    c() {
      e = lt("g");
    },
    m(n, i) {
      B(n, e, i), e.innerHTML = t[0];
    },
    p(n, [i]) {
      i & 1 && (e.innerHTML = n[0]);
    },
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function OR(t, e, n) {
  let i = 870711;
  function r() {
    return i += 1, `fa-${i.toString(16)}`;
  }
  let o, { data: s } = e;
  function l(a) {
    if (!a || !a.raw)
      return null;
    let f = a.raw;
    const c = {};
    return f = f.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g, (u, h) => {
      const d = r();
      return c[h] = d, ` id="${d}"`;
    }), f = f.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g, (u, h, d, p) => {
      const g = h || p;
      return !g || !c[g] ? u : `#${c[g]}`;
    }), f;
  }
  return t.$$set = (a) => {
    "data" in a && n(1, s = a.data);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(0, o = l(s));
  }, [o, s];
}
class TR extends Be {
  constructor(e) {
    super(), je(this, e, OR, AR, Pt, { data: 1 });
  }
}
function ER(t) {
  let e, n, i, r;
  const o = t[13].default, s = Sn(o, t, t[12], null);
  return {
    c() {
      e = lt("svg"), s && s.c(), m(e, "version", "1.1"), m(e, "class", n = "fa-icon " + t[0] + " svelte-1dof0an"), m(e, "x", t[8]), m(e, "y", t[9]), m(e, "width", t[1]), m(e, "height", t[2]), m(e, "aria-label", t[11]), m(e, "role", i = t[11] ? "img" : "presentation"), m(e, "viewBox", t[3]), m(e, "style", t[10]), pe(e, "fa-spin", t[4]), pe(e, "fa-pulse", t[6]), pe(e, "fa-inverse", t[5]), pe(e, "fa-flip-horizontal", t[7] === "horizontal"), pe(e, "fa-flip-vertical", t[7] === "vertical");
    },
    m(l, a) {
      B(l, e, a), s && s.m(e, null), r = !0;
    },
    p(l, [a]) {
      s && s.p && (!r || a & 4096) && An(
        s,
        o,
        l,
        l[12],
        r ? Mn(o, l[12], a, null) : On(l[12]),
        null
      ), (!r || a & 1 && n !== (n = "fa-icon " + l[0] + " svelte-1dof0an")) && m(e, "class", n), (!r || a & 256) && m(e, "x", l[8]), (!r || a & 512) && m(e, "y", l[9]), (!r || a & 2) && m(e, "width", l[1]), (!r || a & 4) && m(e, "height", l[2]), (!r || a & 2048) && m(e, "aria-label", l[11]), (!r || a & 2048 && i !== (i = l[11] ? "img" : "presentation")) && m(e, "role", i), (!r || a & 8) && m(e, "viewBox", l[3]), (!r || a & 1024) && m(e, "style", l[10]), (!r || a & 17) && pe(e, "fa-spin", l[4]), (!r || a & 65) && pe(e, "fa-pulse", l[6]), (!r || a & 33) && pe(e, "fa-inverse", l[5]), (!r || a & 129) && pe(e, "fa-flip-horizontal", l[7] === "horizontal"), (!r || a & 129) && pe(e, "fa-flip-vertical", l[7] === "vertical");
    },
    i(l) {
      r || (k(s, l), r = !0);
    },
    o(l) {
      E(s, l), r = !1;
    },
    d(l) {
      l && j(e), s && s.d(l);
    }
  };
}
function PR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: o } = e, { width: s } = e, { height: l } = e, { box: a } = e, { spin: f = !1 } = e, { inverse: c = !1 } = e, { pulse: u = !1 } = e, { flip: h = null } = e, { x: d = void 0 } = e, { y: p = void 0 } = e, { style: g = void 0 } = e, { label: _ = void 0 } = e;
  return t.$$set = (b) => {
    "class" in b && n(0, o = b.class), "width" in b && n(1, s = b.width), "height" in b && n(2, l = b.height), "box" in b && n(3, a = b.box), "spin" in b && n(4, f = b.spin), "inverse" in b && n(5, c = b.inverse), "pulse" in b && n(6, u = b.pulse), "flip" in b && n(7, h = b.flip), "x" in b && n(8, d = b.x), "y" in b && n(9, p = b.y), "style" in b && n(10, g = b.style), "label" in b && n(11, _ = b.label), "$$scope" in b && n(12, r = b.$$scope);
  }, [
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    r,
    i
  ];
}
class RR extends Be {
  constructor(e) {
    super(), je(this, e, PR, ER, Pt, {
      class: 0,
      width: 1,
      height: 2,
      box: 3,
      spin: 4,
      inverse: 5,
      pulse: 6,
      flip: 7,
      x: 8,
      y: 9,
      style: 10,
      label: 11
    });
  }
}
function x0(t, e, n) {
  const i = t.slice();
  return i[24] = e[n], i;
}
function z0(t, e, n) {
  const i = t.slice();
  return i[27] = e[n], i;
}
function V0(t) {
  let e, n, i, r, o = t[6].paths && F0(t), s = t[6].polygons && W0(t), l = t[6].raw && q0(t);
  return {
    c() {
      o && o.c(), e = q(), s && s.c(), n = q(), l && l.c(), i = tt();
    },
    m(a, f) {
      o && o.m(a, f), B(a, e, f), s && s.m(a, f), B(a, n, f), l && l.m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      a[6].paths ? o ? (o.p(a, f), f & 64 && k(o, 1)) : (o = F0(a), o.c(), k(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), ge()), a[6].polygons ? s ? (s.p(a, f), f & 64 && k(s, 1)) : (s = W0(a), s.c(), k(s, 1), s.m(n.parentNode, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), ge()), a[6].raw ? l ? (l.p(a, f), f & 64 && k(l, 1)) : (l = q0(a), l.c(), k(l, 1), l.m(i.parentNode, i)) : l && (me(), E(l, 1, 1, () => {
        l = null;
      }), ge());
    },
    i(a) {
      r || (k(o), k(s), k(l), r = !0);
    },
    o(a) {
      E(o), E(s), E(l), r = !1;
    },
    d(a) {
      o && o.d(a), a && j(e), s && s.d(a), a && j(n), l && l.d(a), a && j(i);
    }
  };
}
function F0(t) {
  let e, n, i = t[6].paths, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = H0(z0(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l & 64) {
        i = s[6].paths;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = z0(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = H0(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function H0(t) {
  let e, n;
  return e = new kR({ props: { data: t[27] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.data = i[27]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function W0(t) {
  let e, n, i = t[6].polygons, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = U0(x0(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l & 64) {
        i = s[6].polygons;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = x0(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = U0(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function U0(t) {
  let e, n;
  return e = new MR({ props: { data: t[24] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.data = i[24]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function q0(t) {
  let e, n, i;
  function r(s) {
    t[15](s);
  }
  let o = {};
  return t[6] !== void 0 && (o.data = t[6]), e = new TR({ props: o }), ht.push(() => Qi(e, "data", r, t[6])), {
    c() {
      oe(e.$$.fragment);
    },
    m(s, l) {
      ie(e, s, l), i = !0;
    },
    p(s, l) {
      const a = {};
      !n && l & 64 && (n = !0, a.data = s[6], Xi(() => n = !1)), e.$set(a);
    },
    i(s) {
      i || (k(e.$$.fragment, s), i = !0);
    },
    o(s) {
      E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      re(e, s);
    }
  };
}
function IR(t) {
  let e, n, i = t[6] && V0(t);
  return {
    c() {
      i && i.c(), e = tt();
    },
    m(r, o) {
      i && i.m(r, o), B(r, e, o), n = !0;
    },
    p(r, o) {
      r[6] ? i ? (i.p(r, o), o & 64 && k(i, 1)) : (i = V0(r), i.c(), k(i, 1), i.m(e.parentNode, e)) : i && (me(), E(i, 1, 1, () => {
        i = null;
      }), ge());
    },
    i(r) {
      n || (k(i), n = !0);
    },
    o(r) {
      E(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && j(e);
    }
  };
}
function NR(t) {
  let e;
  const n = t[14].default, i = Sn(n, t, t[16], null), r = i || IR(t);
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i ? i.p && (!e || s & 65536) && An(
        i,
        n,
        o,
        o[16],
        e ? Mn(n, o[16], s, null) : On(o[16]),
        null
      ) : r && r.p && (!e || s & 64) && r.p(o, e ? s : -1);
    },
    i(o) {
      e || (k(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function DR(t) {
  let e, n;
  return e = new RR({
    props: {
      label: t[5],
      width: t[7],
      height: t[8],
      box: t[10],
      style: t[9],
      spin: t[1],
      flip: t[4],
      inverse: t[2],
      pulse: t[3],
      class: t[0],
      $$slots: { default: [NR] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 32 && (o.label = i[5]), r & 128 && (o.width = i[7]), r & 256 && (o.height = i[8]), r & 1024 && (o.box = i[10]), r & 512 && (o.style = i[9]), r & 2 && (o.spin = i[1]), r & 16 && (o.flip = i[4]), r & 4 && (o.inverse = i[2]), r & 8 && (o.pulse = i[3]), r & 1 && (o.class = i[0]), r & 65600 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
let J0 = 1;
function jR(t) {
  if ("iconName" in t && "icon" in t) {
    let e = {}, n = t.icon, i = t.iconName, r = n[0], o = n[1], s = n[4], l = { width: r, height: o, paths: [{ d: s }] };
    return e[i] = l, e;
  }
  return t;
}
function BR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: o = "" } = e, { data: s } = e, { scale: l = 1 } = e, { spin: a = !1 } = e, { inverse: f = !1 } = e, { pulse: c = !1 } = e, { flip: u = null } = e, { label: h = null } = e, d = null, { style: p = null } = e, g, _, b, y;
  function v() {
    if (typeof s > "u")
      return;
    const R = jR(s), [W] = Object.keys(R), U = R[W];
    U.paths || (U.paths = []), U.d && U.paths.push({ d: U.d }), U.polygons || (U.polygons = []), U.points && U.polygons.push({ points: U.points }), n(6, d = U);
  }
  function M() {
    let R = 1;
    return typeof l < "u" && (R = Number(l)), isNaN(R) || R <= 0 ? (console.warn('Invalid prop: prop "scale" should be a number over 0.'), J0) : R * J0;
  }
  function A() {
    return d ? `0 0 ${d.width} ${d.height}` : `0 0 ${g} ${_}`;
  }
  function P() {
    return d ? Math.max(d.width, d.height) / 16 : 1;
  }
  function S() {
    return d ? d.width / P() * M() : 0;
  }
  function D() {
    return d ? d.height / P() * M() : 0;
  }
  function x() {
    let R = "";
    p !== null && (R += p);
    let W = M();
    return W === 1 ? R.length === 0 ? void 0 : R : (R !== "" && !R.endsWith(";") && (R += "; "), `${R}font-size: ${W}em`);
  }
  function V(R) {
    d = R, n(6, d);
  }
  return t.$$set = (R) => {
    "class" in R && n(0, o = R.class), "data" in R && n(11, s = R.data), "scale" in R && n(12, l = R.scale), "spin" in R && n(1, a = R.spin), "inverse" in R && n(2, f = R.inverse), "pulse" in R && n(3, c = R.pulse), "flip" in R && n(4, u = R.flip), "label" in R && n(5, h = R.label), "style" in R && n(13, p = R.style), "$$scope" in R && n(16, r = R.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 14336 && (v(), n(7, g = S()), n(8, _ = D()), n(9, b = x()), n(10, y = A()));
  }, [
    o,
    a,
    f,
    c,
    u,
    h,
    d,
    g,
    _,
    b,
    y,
    s,
    l,
    p,
    i,
    V,
    r
  ];
}
class vt extends Be {
  constructor(e) {
    super(), je(this, e, BR, DR, Pt, {
      class: 0,
      data: 11,
      scale: 12,
      spin: 1,
      inverse: 2,
      pulse: 3,
      flip: 4,
      label: 5,
      style: 13
    });
  }
}
function LR(t) {
  let e, n, i, r, o, s;
  return n = new vt({
    props: {
      data: t[0] === !0 ? Da : ja
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-boolean-toggle svelte-1vj58yv"), m(e, "title", i = t[1] ? `Boolean value ${t[0]}` : "Click to toggle this boolean value"), pe(e, "jse-readonly", t[1]);
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), r = !0, o || (s = X(e, "mousedown", t[2]), o = !0);
    },
    p(l, [a]) {
      const f = {};
      a & 1 && (f.data = l[0] === !0 ? Da : ja), n.$set(f), (!r || a & 3 && i !== (i = l[1] ? `Boolean value ${l[0]}` : "Click to toggle this boolean value")) && m(e, "title", i), (!r || a & 2) && pe(e, "jse-readonly", l[1]);
    },
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n), o = !1, s();
    }
  };
}
function xR(t, e, n) {
  let { path: i } = e, { value: r } = e, { readOnly: o } = e, { onPatch: s } = e, { focus: l } = e;
  function a(f) {
    f.stopPropagation(), !o && (s([
      {
        op: "replace",
        path: Ae(i),
        value: !r
      }
    ]), setTimeout(l));
  }
  return t.$$set = (f) => {
    "path" in f && n(3, i = f.path), "value" in f && n(0, r = f.value), "readOnly" in f && n(1, o = f.readOnly), "onPatch" in f && n(4, s = f.onPatch), "focus" in f && n(5, l = f.focus);
  }, [r, o, a, i, s, l];
}
class zR extends Be {
  constructor(e) {
    super(), je(this, e, xR, LR, pt, {
      path: 3,
      value: 0,
      readOnly: 1,
      onPatch: 4,
      focus: 5
    });
  }
}
const VR = zR;
function FR(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-color-picker-popup svelte-1gn8yt9");
    },
    m(n, i) {
      B(n, e, i), t[4](e);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e), t[4](null);
    }
  };
}
function HR(t, e, n) {
  let { color: i } = e, { onChange: r } = e, { showOnTop: o } = e, s, l;
  Ei(async () => {
    const f = (await import("./vanilla-picker-b99e900d.js")).default;
    l = new f({
      parent: s,
      color: i,
      popup: o ? "top" : "bottom",
      onDone(c) {
        const h = c.rgba[3] === 1 ? c.hex.substring(0, 7) : c.hex;
        r(h);
      }
    }), l.show();
  }), Br(() => {
    l && l.destroy();
  });
  function a(f) {
    ht[f ? "unshift" : "push"](() => {
      s = f, n(0, s);
    });
  }
  return t.$$set = (f) => {
    "color" in f && n(1, i = f.color), "onChange" in f && n(2, r = f.onChange), "showOnTop" in f && n(3, o = f.showOnTop);
  }, [s, i, r, o, a];
}
class WR extends Be {
  constructor(e) {
    super(), je(this, e, HR, FR, Pt, { color: 1, onChange: 2, showOnTop: 3 });
  }
}
const UR = WR;
function qR(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("button"), m(e, "type", "button"), m(e, "class", "jse-color-picker-button svelte-1nv0s05"), ai(e, "background", t[2]), m(e, "title", n = t[1] ? `Color ${t[0]}` : "Click to open a color picker"), pe(e, "jse-readonly", t[1]);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "click", t[3]), i = !0);
    },
    p(o, [s]) {
      s & 4 && ai(e, "background", o[2]), s & 3 && n !== (n = o[1] ? `Color ${o[0]}` : "Click to open a color picker") && m(e, "title", n), s & 2 && pe(e, "jse-readonly", o[1]);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function JR(t, e, n) {
  let i;
  const { openAbsolutePopup: r } = Hn("absolute-popup");
  let { path: o } = e, { value: s } = e, { readOnly: l } = e, { onPatch: a } = e, { focus: f } = e;
  function c(d) {
    a([
      {
        op: "replace",
        path: Ae(o),
        value: d
      }
    ]), u();
  }
  function u() {
    f();
  }
  function h(d) {
    if (l)
      return;
    const p = 300, g = d.target.getBoundingClientRect().top, b = Hl(d.target).innerHeight - g < p && g > p;
    r(UR, { color: s, onChange: c, showOnTop: b }, {
      anchor: d.target,
      closeOnOuterClick: !0,
      onClose: u,
      offsetTop: 18,
      offsetLeft: -8,
      height: p
    });
  }
  return t.$$set = (d) => {
    "path" in d && n(4, o = d.path), "value" in d && n(0, s = d.value), "readOnly" in d && n(1, l = d.readOnly), "onPatch" in d && n(5, a = d.onPatch), "focus" in d && n(6, f = d.focus);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = Wk(s));
  }, [s, l, i, h, o, a, f];
}
class KR extends Be {
  constructor(e) {
    super(), je(this, e, JR, qR, pt, {
      path: 4,
      value: 0,
      readOnly: 1,
      onPatch: 5,
      focus: 6
    });
  }
}
const GR = KR;
function XR(t, e) {
  const n = {
    start: t,
    end: Math.min(wp(t), e)
  }, i = Math.max(Zc((t + e) / 2), t), r = {
    start: i,
    end: Math.min(wp(i), e)
  }, o = Zc(e), s = o === e ? o - Oa : o, l = {
    start: Math.max(s, t),
    end: e
  }, a = [n], f = r.start >= n.end && r.end <= l.start;
  return f && a.push(r), l.start >= (f ? r.end : n.end) && a.push(l), a;
}
function F3(t) {
  const e = w9(t, (i) => i.start), n = [e[0]];
  for (let i = 0; i < e.length; i++) {
    const r = n.length - 1, o = n[r], s = e[i];
    s.start <= o.end ? n[r] = {
      start: Math.min(o.start, s.start),
      end: Math.max(o.end, s.end)
    } : n.push(s);
  }
  return n;
}
function QR(t, e) {
  return t.some((n) => e >= n.start && e < n.end);
}
function wp(t) {
  return Zc(t) + Oa;
}
function Zc(t) {
  return Math.floor(t / Oa) * Oa;
}
function $c(t) {
  let e = {
    expandedMap: {},
    enforceStringMap: {},
    visibleSectionsMap: {},
    selection: void 0,
    sortedColumn: void 0
  };
  return t != null && t.select && (e = {
    ...e,
    selection: t.select(t.json, e)
  }), t != null && t.expand && (e = Ri(t.json, e, [], t.expand)), e;
}
function ph(t, e) {
  return t.visibleSectionsMap[e] || vs;
}
function Ym(t, e, n) {
  e.forEach(({ start: i, end: r }) => {
    C3(i, Math.min(t.length, r), n);
  });
}
function vp(t, e, n) {
  const i = { ...e.expandedMap }, r = { ...e.visibleSectionsMap };
  for (let o = 0; o <= n.length; o++) {
    const s = n.slice(0, o), l = Ae(s), a = xe(t, s);
    if (tn(a) && (i[l] = !0), Array.isArray(a) && o < n.length) {
      const f = r[l] || vs, c = Tn(n[o]);
      if (!QR(f, c)) {
        const u = Zc(c), h = wp(u), d = { start: u, end: h };
        r[l] = F3(f.concat(d));
      }
    }
  }
  return {
    ...e,
    expandedMap: i,
    visibleSectionsMap: r
  };
}
function Ri(t, e, n, i) {
  const r = { ...e.expandedMap };
  function o(l) {
    const a = s.length;
    if (Array.isArray(l)) {
      if (i(s)) {
        const f = Ae(s);
        if (r[f] = !0, l.length > 0) {
          const c = ph(e, f);
          Ym(l, c, (u) => {
            s[a] = String(u), o(l[u]);
          }), s.pop();
        }
      }
    } else if (dn(l) && i(s)) {
      r[Ae(s)] = !0;
      const f = Object.keys(l);
      if (f.length > 0) {
        for (const c of f)
          s[a] = c, o(l[c]);
        s.pop();
      }
    }
  }
  const s = n.slice();
  return o(xe(t, n)), {
    ...e,
    expandedMap: r
  };
}
function YR(t, e) {
  return {
    ...t,
    expandedMap: {
      ...t.expandedMap,
      [Ae(e)]: !0
    }
  };
}
function H3(t, e) {
  const n = il(t.expandedMap, e), i = il(t.enforceStringMap, e), r = il(t.visibleSectionsMap, e);
  return {
    ...t,
    expandedMap: n,
    enforceStringMap: i,
    visibleSectionsMap: r
  };
}
function W3(t, e, n) {
  if (n) {
    const i = { ...t.enforceStringMap };
    return i[e] = n, {
      ...t,
      enforceStringMap: i
    };
  } else if (typeof t.enforceStringMap[e] == "boolean") {
    const i = { ...t.enforceStringMap };
    return delete i[e], {
      ...t,
      enforceStringMap: i
    };
  } else
    return t;
}
function ZR(t, e, n, i) {
  return {
    ...e,
    visibleSectionsMap: {
      ...e.visibleSectionsMap,
      [n]: F3(ph(e, n).concat(i))
    }
  };
}
function U3(t, e, n) {
  const i = ir(t, n), r = n.reduce((o, s) => Ek(s) ? q3(i, o, s) : Pk(s) ? J3(i, o, s) : Tm(s) ? $R(i, o, s) : np(s) || gl(s) ? eI(i, o, s) : o, e);
  return {
    json: i,
    documentState: r
  };
}
function q3(t, e, n) {
  const i = Or(t, n.path), r = wt(i), o = Ae(r), s = xe(t, r);
  if (Lt(s)) {
    const l = Tn(et(i)), a = rl(e.expandedMap, r, l, 1), f = rl(e.enforceStringMap, r, l, 1);
    let c = rl(e.visibleSectionsMap, r, l, 1);
    return c = K3(c, o, (u) => G3(u, l, 1)), {
      ...e,
      expandedMap: a,
      enforceStringMap: f,
      visibleSectionsMap: c
    };
  }
  return e;
}
function J3(t, e, n) {
  const i = Or(t, n.path), r = wt(i), o = Ae(r), s = xe(t, r);
  let { expandedMap: l, enforceStringMap: a, visibleSectionsMap: f } = e;
  if (l = il(l, i), a = il(a, i), f = il(f, i), Lt(s)) {
    const c = Tn(et(i));
    l = rl(l, r, c, -1), a = rl(a, r, c, -1), f = rl(f, r, c, -1), f = K3(f, o, (u) => G3(u, c, -1));
  }
  return {
    ...e,
    expandedMap: l,
    enforceStringMap: a,
    visibleSectionsMap: f
  };
}
function $R(t, e, n) {
  const i = n.path, r = dd(t, e.expandedMap), o = dd(t, e.enforceStringMap), s = dd(t, e.visibleSectionsMap);
  return !mn(n.value) && !Lt(n.value) && delete r[i], Lt(n.value) || delete s[i], (mn(n.value) || Lt(n.value)) && delete o[i], {
    ...e,
    expandedMap: r,
    enforceStringMap: o,
    visibleSectionsMap: s
  };
}
function eI(t, e, n) {
  if (gl(n) && n.from === n.path)
    return e;
  const i = (u) => n.path + u.substring(n.from.length), r = hd(cd(e.expandedMap, n.from), i), o = hd(cd(e.enforceStringMap, n.from), i), s = hd(cd(e.visibleSectionsMap, n.from), i);
  let l = e;
  gl(n) && (l = J3(t, l, {
    op: "remove",
    path: n.from
  })), l = q3(t, l, {
    op: "add",
    path: n.path,
    value: null
  });
  const a = ud(l.expandedMap, r), f = ud(l.enforceStringMap, o), c = ud(l.visibleSectionsMap, s);
  return {
    ...e,
    expandedMap: a,
    enforceStringMap: f,
    visibleSectionsMap: c
  };
}
function il(t, e) {
  const n = {}, i = Ae(e);
  return Object.keys(t).forEach((r) => {
    bl(r, i) || (n[r] = t[r]);
  }), n;
}
function cd(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    bl(i, e) && (n[i] = t[i]);
  }), n;
}
function ud(t, e) {
  return { ...t, ...e };
}
function hd(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    const r = e(i);
    n[r] = t[i];
  }), n;
}
function rl(t, e, n, i) {
  const r = e.length, o = Ae(e), s = [];
  for (const a of Object.keys(t))
    if (bl(a, o)) {
      const f = sr(a), c = Tn(f[r]);
      c >= n && (f[r] = String(c + i), s.push({
        oldPointer: a,
        newPointer: Ae(f),
        value: t[a]
      }));
    }
  if (s.length === 0)
    return t;
  const l = { ...t };
  return s.forEach((a) => {
    delete l[a.oldPointer];
  }), s.forEach((a) => {
    l[a.newPointer] = a.value;
  }), l;
}
function dd(t, e) {
  const n = {};
  return Object.keys(e).filter((i) => Li(t, Or(t, i))).forEach((i) => {
    n[i] = e[i];
  }), n;
}
function K3(t, e, n) {
  const i = t[e];
  if (e in t) {
    const r = n(i);
    if (!kt(i, r)) {
      const o = { ...t };
      return r === void 0 ? delete o[e] : o[e] = r, o;
    }
  }
  return t;
}
function G3(t, e, n) {
  return t.map((i) => ({
    start: i.start > e ? i.start + n : i.start,
    end: i.end >= e ? i.end + n : i.end
  }));
}
function io(t, e, n, i) {
  const r = e ? e[n] : void 0;
  return typeof r == "boolean" ? r : cA(t, i);
}
function cf(t, e, n = !1) {
  const i = t.indexOf(e);
  return i !== -1 ? n ? t.slice(i) : t.slice(i + 1) : [];
}
function Zm(t, e) {
  const n = [];
  function i(r, o) {
    n.push(o);
    const s = Ae(o);
    if (r && e.expandedMap[s] === !0) {
      if (Lt(r)) {
        const l = ph(e, s);
        Ym(r, l, (a) => {
          i(r[a], o.concat(String(a)));
        });
      }
      mn(r) && Object.keys(r).forEach((l) => {
        i(r[l], o.concat(l));
      });
    }
  }
  return i(t, []), n;
}
function X3(t, e, n = !0) {
  const i = [];
  function r(o, s) {
    i.push({ path: s, type: Yi.value });
    const l = Ae(s);
    if (o && e.expandedMap[l] === !0) {
      if (n && i.push({ path: s, type: Yi.inside }), Lt(o)) {
        const a = ph(e, l);
        Ym(o, a, (f) => {
          const c = s.concat(String(f));
          r(o[f], c), n && i.push({ path: c, type: Yi.after });
        });
      }
      mn(o) && Object.keys(o).forEach((f) => {
        const c = s.concat(f);
        i.push({ path: c, type: Yi.key }), r(o[f], c), n && i.push({ path: c, type: Yi.after });
      });
    }
  }
  return r(t, []), i;
}
function tI(t, e, n) {
  const i = Zm(t, e), r = i.map(Ae), o = Ae(n), s = r.indexOf(o);
  return s !== -1 && s > 0 ? i[s - 1] : null;
}
function kp(t, e, n) {
  const i = Zm(t, e), o = i.map(Ae).indexOf(Ae(n));
  return o !== -1 && o < i.length - 1 ? i[o + 1] : null;
}
function ko(t, e, n) {
  const i = xe(t, n), o = !O3({ json: i }, Tk) ? Ba : Sr;
  return Ri(t, e, n, o);
}
function Sr(t) {
  return t.length === 0 ? !0 : t.length === 1 && t[0] === "0";
}
function Ba() {
  return !0;
}
function nI(t) {
  return O3({ json: t }, Tk) ? Sr : Ba;
}
function er(t) {
  return t && t.type === Vt.after || !1;
}
function En(t) {
  return t && t.type === Vt.inside || !1;
}
function wn(t) {
  return t && t.type === Vt.key || !1;
}
function yt(t) {
  return t && t.type === Vt.value || !1;
}
function Tt(t) {
  return t && t.type === Vt.multi || !1;
}
function iI(t, e, n) {
  if (kt(e, n))
    return [e];
  {
    const i = fI(e, n);
    if (e.length === i.length || n.length === i.length)
      return [i];
    const r = e[i.length], o = n[i.length], s = xe(t, i);
    if (mn(s)) {
      const l = Object.keys(s), a = l.indexOf(r), f = l.indexOf(o);
      if (a !== -1 && f !== -1) {
        const c = Math.min(a, f), u = Math.max(a, f), h = [];
        for (let d = c; d <= u; d++)
          h.push(i.concat(l[d]));
        return h;
      }
    }
    if (Lt(s)) {
      const l = Math.min(Tn(r), Tn(o)), a = Math.max(Tn(r), Tn(o)), f = [];
      for (let c = l; c <= a; c++)
        f.push(i.concat(String(c)));
      return f;
    }
  }
  throw new Error("Failed to create selection");
}
function Q3(t) {
  return En(t) ? t.focusPath : wt(t.focusPath);
}
function Cl(t) {
  return Tt(t) ? ui(t.paths) : t.focusPath;
}
function mh(t) {
  return Tt(t) ? et(t.paths) : t.focusPath;
}
function rI(t, e) {
  return Ml(t.focusPath, e) && (t.focusPath.length > e.length || En(t));
}
function Y3(t, e, n) {
  if (!t)
    return !1;
  const i = e.slice(0);
  if (Tt(t))
    for (; i.length > 0; ) {
      if (t.pointersMap[Ae(i)] === !0)
        return !0;
      i.pop();
    }
  return wn(t) ? n === Vt.key && kt(t.focusPath, e) : !!(yt(t) && (n === Vt.value && kt(t.focusPath, e) || Ml(e, t.focusPath) && e.length > t.focusPath.length && (n === Vt.key || n === Vt.value || n === Vt.multi)));
}
function K0(t, e, n = !1, i = !1) {
  const r = e.selection, o = !i && Tt(r) ? ui(r.paths) : r.focusPath, s = tI(t, e, o);
  if (s === null)
    return null;
  const l = s, a = s;
  if (n)
    return er(r) || En(r) ? yn(t, r.anchorPath, r.anchorPath) : yn(t, r.anchorPath, a);
  if (wn(r)) {
    const f = wt(s), c = xe(t, f);
    return Array.isArray(c) || Mt(s) ? Ot(s, !1) : xi(s, !1);
  }
  return yt(r) ? Ot(s, !1) : er(r) || En(r) ? yn(t, o, o) : yn(t, l, a);
}
function oI(t, e, n = !1, i = !1) {
  const r = e.selection, o = !i && Tt(r) ? et(r.paths) : r.focusPath, s = kp(t, e, o), l = s, a = s;
  if (s === null)
    return null;
  if (n) {
    const f = tn(xe(t, o)) ? H3(e, o) : e, c = kp(t, f, o);
    return c === null ? null : er(r) ? yn(t, c, c) : En(r) ? yn(t, l, a) : yn(t, r.anchorPath, c);
  }
  if (wn(r)) {
    const f = wt(s), c = xe(t, f);
    return Array.isArray(c) ? Ot(a, !1) : xi(a, !1);
  }
  return yt(r) ? Ot(a, !1) : En(r) ? yn(t, l, a) : yn(t, s, s);
}
function sI(t, e, n) {
  const i = wt(n), r = [et(n)], o = kp(xe(t, i), e, r);
  return o ? Ot(i.concat(o), !1) : oo(n);
}
function Z3(t, e, n) {
  const i = e.selection, r = X3(t, e, n), o = r.findIndex((s) => kt(s.path, i.focusPath) && String(s.type) === String(i.type));
  return {
    caret: o !== -1 ? r[o] : null,
    previous: o !== -1 && o > 0 ? r[o - 1] : null,
    next: o !== -1 && o < r.length - 1 ? r[o + 1] : null
  };
}
function lI(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: o, previous: s } = Z3(t, e, i);
  if (n)
    return Tt(r) ? null : yn(t, r.anchorPath, r.focusPath);
  if (o && s)
    return $m(s);
  const l = wt(r.focusPath), a = xe(t, l);
  return yt(r) && Array.isArray(a) ? yn(t, r.focusPath, r.focusPath) : Tt(r) && !Array.isArray(a) ? xi(r.focusPath, !1) : null;
}
function aI(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: o, next: s } = Z3(t, e, i);
  return n ? Tt(r) ? null : yn(t, r.anchorPath, r.focusPath) : o && s ? $m(s) : Tt(r) ? Ot(r.focusPath, !1) : null;
}
function Ks(t, e) {
  const n = Zm(t, e);
  let i = 0;
  for (; i < n.length - 1 && n[i + 1].length > n[i].length; )
    i++;
  const r = n[i];
  return r.length === 0 || Array.isArray(xe(t, wt(r))) ? Ot(r, !1) : xi(r, !1);
}
function Sl(t, e) {
  if (e.length === 1) {
    const i = ui(e);
    if (i.op === "replace" || i.op === "move") {
      const r = Or(t, i.path);
      return Ot(r, !1);
    }
  }
  if (!Mt(e) && e.every((i) => i.op === "move")) {
    const i = ui(e), r = e.slice(1);
    if ((np(i) || gl(i)) && i.from !== i.path && r.every((o) => (np(o) || gl(o)) && o.from === o.path)) {
      const o = Or(t, i.path);
      return xi(o, !1);
    }
  }
  const n = e.filter((i) => i.op !== "test" && i.op !== "remove" && (i.op !== "move" || i.from !== i.path) && typeof i.path == "string").map((i) => Or(t, i.path));
  return Mt(n) ? null : {
    type: Vt.multi,
    paths: n,
    anchorPath: ui(n),
    focusPath: et(n),
    pointersMap: $3(n)
  };
}
function $3(t) {
  const e = {};
  return t.forEach((n) => {
    e[Ae(n)] = !0;
  }), e;
}
function gh(t) {
  return {
    [Ae(t)]: !0
  };
}
function fI(t, e) {
  let n = 0;
  for (; n < t.length && n < e.length && t[n] === e[n]; )
    n++;
  return t.slice(0, n);
}
function La(t) {
  return t && (wn(t) || yt(t) || Tt(t) && t.paths.length === 1);
}
function G0(t, e) {
  return La(e) && tn(xe(t, e.focusPath)) ? e.focusPath : wt(e.focusPath);
}
function Ml(t, e) {
  if (t.length < e.length)
    return !1;
  for (let n = 0; n < e.length; n++)
    if (t[n] !== e[n])
      return !1;
  return !0;
}
function Zn(t) {
  const e = t.selection;
  return (wn(e) || yt(e)) && e.edit ? {
    ...t,
    selection: {
      ...e,
      edit: !1
    }
  } : t;
}
function xi(t, e) {
  return {
    type: Vt.key,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t),
    edit: e
  };
}
function Ot(t, e) {
  return {
    type: Vt.value,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t),
    edit: e
  };
}
function ro(t) {
  return {
    type: Vt.inside,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t)
  };
}
function oo(t) {
  return {
    type: Vt.after,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t)
  };
}
function yn(t, e, n) {
  const i = iI(t, e, n), r = Ml(n, et(i)) || Ml(e, ui(i));
  return {
    type: Vt.multi,
    anchorPath: r ? ui(i) : et(i),
    focusPath: r ? et(i) : ui(i),
    paths: i,
    pointersMap: $3(i)
  };
}
function eC(t, e, n, i) {
  if (wn(e))
    return String(et(e.focusPath));
  if (yt(e)) {
    const r = xe(t, e.focusPath);
    return typeof r == "string" ? r : i.stringify(r, null, n);
  }
  if (Tt(e)) {
    if (Mt(e.focusPath))
      return i.stringify(t, null, n);
    const r = Q3(e), o = xe(t, r);
    if (Array.isArray(o))
      if (e.paths.length === 1) {
        const s = xe(t, ui(e.paths));
        return i.stringify(s, null, n);
      } else
        return e.paths.map((s) => {
          const l = xe(t, s);
          return `${i.stringify(l, null, n)},`;
        }).join(`
`);
    else
      return e.paths.map((s) => {
        const l = et(s), a = xe(t, s);
        return `${i.stringify(l)}: ${i.stringify(a, null, n)},`;
      }).join(`
`);
  }
  return null;
}
function tC(t) {
  return Tt(t) ? t.paths : [t.focusPath];
}
function xo(t) {
  return (wn(t) || yt(t)) && t.edit;
}
function cI(t, e, n = !0) {
  return e === void 0 && !n ? t : {
    ...t,
    selection: e
  };
}
function uI() {
  return Ot([], !1);
}
function nC(t) {
  return Tt(t) || wn(t) || yt(t);
}
function bs(t) {
  if (!t)
    return !1;
  if (wn(t) || yt(t) || Tt(t) && t.paths.length === 1)
    return !0;
}
function $m(t) {
  switch (t.type) {
    case Yi.key:
      return xi(t.path, !1);
    case Yi.value:
      return Ot(t.path, !1);
    case Yi.after:
      return oo(t.path);
    case Yi.inside:
      return ro(t.path);
  }
}
function X0(t, e, n) {
  switch (e) {
    case Vt.key:
      return xi(n, !1);
    case Vt.value:
      return Ot(n, !1);
    case Vt.after:
      return oo(n);
    case Vt.inside:
      return ro(n);
    case Vt.multi:
      return yn(t, n, n);
  }
}
function Q0(t, e) {
  if (t)
    return Object.keys(t.pointersMap).some((n) => bl(n, e) || bl(e, n)) ? t : void 0;
}
function xr(...t) {
  const e = [];
  for (const n of t)
    if (typeof n == "string" && e.push(n), n && typeof n == "object")
      for (const i in n)
        Object.hasOwnProperty.call(n, i) && n[i] && e.push(i);
  return e.join(" ");
}
function Cp(t, e) {
  const n = Lm(t, e);
  return xr("jse-value", "jse-" + n, {
    "jse-url": Zu(t),
    "jse-empty": typeof t == "string" && t.length === 0
  });
}
function hI(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("div"), m(e, "class", n = fn(xr("jse-editable-div", t[2], { "jse-short-text": t[0] })) + " svelte-rw77oa"), m(e, "contenteditable", "true"), m(e, "spellcheck", "false");
    },
    m(o, s) {
      B(o, e, s), t[13](e), i || (r = [
        X(e, "input", t[3]),
        X(e, "keydown", t[4]),
        X(e, "paste", t[5]),
        X(e, "blur", t[6])
      ], i = !0);
    },
    p(o, [s]) {
      s & 5 && n !== (n = fn(xr("jse-editable-div", o[2], { "jse-short-text": o[0] })) + " svelte-rw77oa") && m(e, "class", n);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), t[13](null), i = !1, nt(r);
    }
  };
}
function dI(t, e, n) {
  const i = Wn("jsoneditor:EditableDiv");
  let { value: r } = e, { shortText: o = !1 } = e, { onChange: s } = e, { onCancel: l } = e, { onFind: a } = e, { onPaste: f = en } = e, { onValueClass: c = () => "" } = e, u, h = c(r), d = !1;
  Ei(() => {
    i("onMount", { value: r }), g(r), setTimeout(() => D3(u));
  }), Br(() => {
    const A = p();
    i("onDestroy", { closed: d, value: r, newValue: A }), !d && A !== r && s(A, gs.NO);
  });
  function p() {
    return H9(u.innerText);
  }
  function g(A) {
    n(1, u.innerText = Ms(A), u);
  }
  function _() {
    const A = p();
    A === "" && g(""), n(2, h = c(A));
  }
  function b(A) {
    A.stopPropagation();
    const P = Ko(A).replace(/^Command\+/, "Ctrl+");
    if (P === "Escape" && (d = !0, l()), P === "Enter" || P === "Tab") {
      d = !0;
      const S = p();
      s(S, gs.NEXT_INSIDE);
    }
    P === "Ctrl+F" && (A.preventDefault(), a(!1)), P === "Ctrl+H" && (A.preventDefault(), a(!0));
  }
  function y(A) {
    if (!f)
      return;
    const P = A.clipboardData.getData("text/plain");
    f(P);
  }
  function v() {
    const A = document.hasFocus(), P = p();
    i("handleBlur", { hasFocus: A, closed: d, value: r, newValue: P }), document.hasFocus() && !d && (d = !0, P !== r ? s(P, gs.SELF) : l());
  }
  function M(A) {
    ht[A ? "unshift" : "push"](() => {
      u = A, n(1, u);
    });
  }
  return t.$$set = (A) => {
    "value" in A && n(7, r = A.value), "shortText" in A && n(0, o = A.shortText), "onChange" in A && n(8, s = A.onChange), "onCancel" in A && n(9, l = A.onCancel), "onFind" in A && n(10, a = A.onFind), "onPaste" in A && n(11, f = A.onPaste), "onValueClass" in A && n(12, c = A.onValueClass);
  }, [
    o,
    u,
    h,
    _,
    b,
    y,
    v,
    r,
    s,
    l,
    a,
    f,
    c,
    M
  ];
}
class pI extends Be {
  constructor(e) {
    super(), je(this, e, dI, hI, pt, {
      value: 7,
      shortText: 0,
      onChange: 8,
      onCancel: 9,
      onFind: 10,
      onPaste: 11,
      onValueClass: 12
    });
  }
}
const iC = pI;
function mI(t) {
  let e, n;
  return e = new iC({
    props: {
      value: t[1].escapeValue(t[0]),
      onChange: t[3],
      onCancel: t[4],
      onPaste: t[5],
      onFind: t[2],
      onValueClass: t[6]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 3 && (o.value = i[1].escapeValue(i[0])), r & 4 && (o.onFind = i[2]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function gI(t, e, n) {
  let { path: i } = e, { value: r } = e, { parser: o } = e, { normalization: s } = e, { enforceString: l } = e, { onPatch: a } = e, { onPasteJson: f } = e, { onSelect: c } = e, { onFind: u } = e, { focus: h } = e, { findNextInside: d } = e;
  function p(v) {
    return l ? v : xl(v, o);
  }
  function g(v, M) {
    a(
      [
        {
          op: "replace",
          path: Ae(i),
          value: p(s.unescapeValue(v))
        }
      ],
      (A, P) => {
        if (!kt(i, P.selection.focusPath))
          return;
        const S = M === gs.NEXT_INSIDE ? d(i) : Ot(i, !1);
        return { state: { ...P, selection: S } };
      }
    ), M !== gs.SELF && h();
  }
  function _() {
    c(Ot(i, !1)), h();
  }
  function b(v) {
    try {
      const M = o.parse(v);
      tn(M) && f({ path: i, contents: M });
    } catch {
    }
  }
  function y(v) {
    return Cp(p(s.unescapeValue(v)), o);
  }
  return t.$$set = (v) => {
    "path" in v && n(7, i = v.path), "value" in v && n(0, r = v.value), "parser" in v && n(8, o = v.parser), "normalization" in v && n(1, s = v.normalization), "enforceString" in v && n(9, l = v.enforceString), "onPatch" in v && n(10, a = v.onPatch), "onPasteJson" in v && n(11, f = v.onPasteJson), "onSelect" in v && n(12, c = v.onSelect), "onFind" in v && n(2, u = v.onFind), "focus" in v && n(13, h = v.focus), "findNextInside" in v && n(14, d = v.findNextInside);
  }, [
    r,
    s,
    u,
    g,
    _,
    b,
    y,
    i,
    o,
    l,
    a,
    f,
    c,
    h,
    d
  ];
}
class bI extends Be {
  constructor(e) {
    super(), je(this, e, gI, mI, pt, {
      path: 7,
      value: 0,
      parser: 8,
      normalization: 1,
      enforceString: 9,
      onPatch: 10,
      onPasteJson: 11,
      onSelect: 12,
      onFind: 2,
      focus: 13,
      findNextInside: 14
    });
  }
}
const _I = bI;
function Df(t, e, n) {
  const i = wt(e), r = xe(t, i);
  if (Lt(r)) {
    const o = Tn(et(e));
    return n.map((s, l) => ({
      op: "add",
      path: Ae(i.concat(String(o + l))),
      value: s.value
    }));
  } else if (mn(r)) {
    const o = et(e), s = Object.keys(r), l = cf(s, o, !0);
    return [
      ...n.map((a) => {
        const f = ff(a.key, s);
        return {
          op: "add",
          path: Ae(i.concat(f)),
          value: a.value
        };
      }),
      ...l.map((a) => As(i, a))
    ];
  } else
    throw new Error("Cannot create insert operations: parent must be an Object or Array");
}
function Y0(t, e, n) {
  const i = xe(t, e);
  if (Array.isArray(i)) {
    const r = i.length;
    return n.map((o, s) => ({
      op: "add",
      path: Ae(e.concat(String(r + s))),
      value: o.value
    }));
  } else
    return n.map((r) => {
      const o = ff(r.key, Object.keys(i));
      return {
        op: "add",
        path: Ae(e.concat(o)),
        value: r.value
      };
    });
}
function uf(t, e, n, i) {
  const r = e.filter((l) => l !== n), o = ff(i, r), s = cf(e, n, !1);
  return [
    {
      op: "move",
      from: Ae(t.concat(n)),
      path: Ae(t.concat(o))
    },
    ...s.map((l) => As(t, l))
  ];
}
function yI(t, e, n) {
  const i = ui(e), r = wt(i), o = xe(t, r);
  if (Lt(o)) {
    const s = ui(e), l = s ? Tn(et(s)) : 0;
    return [
      ...Sp(e),
      ...n.map((a, f) => ({
        op: "add",
        path: Ae(r.concat(String(f + l))),
        value: a.value
      }))
    ];
  } else if (mn(o)) {
    const s = et(e), l = wt(s), a = et(s), f = Object.keys(o), c = cf(f, a, !1), u = new Set(e.map((d) => et(d))), h = f.filter((d) => !u.has(d));
    return [
      ...Sp(e),
      ...n.map((d) => {
        const p = ff(d.key, h);
        return {
          op: "add",
          path: Ae(l.concat(p)),
          value: d.value
        };
      }),
      ...c.map((d) => As(l, d))
    ];
  } else
    throw new Error("Cannot create replace operations: parent must be an Object or Array");
}
function wI(t, e) {
  const n = et(e);
  if (Mt(n))
    throw new Error("Cannot duplicate root object");
  const i = wt(n), r = et(n), o = xe(t, i);
  if (Lt(o)) {
    const s = et(e), l = s ? Tn(et(s)) + 1 : 0;
    return [
      ...e.map((a, f) => ({
        op: "copy",
        from: Ae(a),
        path: Ae(i.concat(String(f + l)))
      }))
    ];
  } else if (mn(o)) {
    const s = Object.keys(o), l = cf(s, r, !1);
    return [
      ...e.map((a) => {
        const f = et(a), c = ff(f, s);
        return {
          op: "copy",
          from: Ae(a),
          path: Ae(i.concat(c))
        };
      }),
      ...l.map((a) => As(i, a))
    ];
  } else
    throw new Error("Cannot create duplicate operations: parent must be an Object or Array");
}
function vI(t, e) {
  if (yt(e))
    return [
      {
        op: "move",
        from: Ae(e.focusPath),
        path: ""
      }
    ];
  if (Tt(e)) {
    const n = wt(e.focusPath), i = xe(t, n);
    if (Lt(i))
      return [
        {
          op: "replace",
          path: "",
          value: e.paths.map((o) => {
            const s = Tn(et(o));
            return i[s];
          })
        }
      ];
    if (mn(i)) {
      const r = {};
      return e.paths.forEach((o) => {
        const s = String(et(o));
        r[s] = i[s];
      }), [
        {
          op: "replace",
          path: "",
          value: r
        }
      ];
    }
  } else
    throw new Error("Cannot create extract operations: parent must be an Object or Array");
  throw new Error("Cannot extract: unsupported type of selection " + JSON.stringify(e));
}
function rC(t, e, n, i) {
  if (wn(e)) {
    const r = S3(n, i), o = wt(e.focusPath), s = xe(t, o), l = Object.keys(s), a = et(e.focusPath);
    return uf(o, l, a, typeof r == "string" ? r : n);
  }
  if (yt(e) || Tt(e) && Mt(e.focusPath))
    try {
      return [
        {
          op: "replace",
          path: Ae(e.focusPath),
          value: hh(n, (r) => Km(r, i))
        }
      ];
    } catch {
      return [
        {
          op: "replace",
          path: Ae(e.focusPath),
          value: n
        }
      ];
    }
  if (Tt(e)) {
    const r = pd(n, i);
    return yI(t, e.paths, r);
  }
  if (er(e)) {
    const r = pd(n, i), o = e.focusPath, s = wt(o), l = xe(t, s);
    if (Lt(l)) {
      const a = Tn(et(o)), f = s.concat(String(a + 1));
      return Df(t, f, r);
    } else if (mn(l)) {
      const a = String(et(o)), f = Object.keys(l);
      if (Mt(f) || et(f) === a)
        return Y0(t, s, r);
      {
        const c = f.indexOf(a), u = f[c + 1], h = s.concat(u);
        return Df(t, h, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  if (En(e)) {
    const r = pd(n, i), o = e.focusPath, s = xe(t, o);
    if (Lt(s)) {
      const l = o.concat("0");
      return Df(t, l, r);
    } else if (mn(s)) {
      const l = Object.keys(s);
      if (Mt(l))
        return Y0(t, o, r);
      {
        const a = ui(l), f = o.concat(a);
        return Df(t, f, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  throw new Error("Cannot insert: unsupported type of selection " + JSON.stringify(e));
}
function kI(t, e, n) {
  const i = n.beforePath, r = n.append, o = wt(e.focusPath), s = xe(t, o);
  if (!r && !(i && Ml(i, o) && i.length > o.length))
    return [];
  const l = Cl(e), a = mh(e), f = et(l), c = et(a), u = i ? i[o.length] : void 0;
  if (mn(s)) {
    const h = Object.keys(s), d = h.indexOf(f), p = h.indexOf(c), g = r ? h.length : h.indexOf(u);
    if (d !== -1 && p !== -1 && g !== -1)
      return g > d ? [...h.slice(d, p + 1), ...h.slice(g, h.length)].map((_) => As(o, _)) : [...h.slice(g, d), ...h.slice(p + 1, h.length)].map((_) => As(o, _));
  } else if (Lt(s)) {
    const h = Tn(f), d = Tn(c), p = u !== void 0 ? Tn(u) : s.length, g = d - h + 1;
    return p < h ? T0(g, (_) => ({
      op: "move",
      from: Ae(o.concat(String(h + _))),
      path: Ae(o.concat(String(p + _)))
    })) : T0(g, () => ({
      op: "move",
      from: Ae(o.concat(String(h))),
      path: Ae(o.concat(String(p)))
    }));
  } else
    throw new Error("Cannot create move operations: parent must be an Object or Array");
}
function CI(t, e, n) {
  if (n === "object")
    return {};
  if (n === "array")
    return [];
  if (n === "structure") {
    const i = Q3(e), r = xe(t, i);
    if (Array.isArray(r) && !Mt(r)) {
      const o = ui(r);
      return tn(o) ? WP(o, (s) => Array.isArray(s) ? [] : dn(s) ? void 0 : "") : "";
    }
  }
  return "";
}
function Sp(t) {
  return t.map((e) => ({
    op: "remove",
    path: Ae(e)
  })).reverse();
}
function As(t, e) {
  return {
    op: "move",
    from: Ae(t.concat(e)),
    path: Ae(t.concat(e))
  };
}
function pd(t, e) {
  const n = /^\s*{/.test(t), i = /^\s*\[/.test(t), r = S3(t, e), o = r !== void 0 ? r : hh(t, (s) => Km(s, e));
  return n && dn(o) || i && Array.isArray(o) ? [{ key: "New item", value: o }] : Array.isArray(o) ? o.map((s, l) => ({ key: "New item " + l, value: s })) : dn(o) ? Object.keys(o).map((s) => ({ key: s, value: o[s] })) : [{ key: "New item", value: o }];
}
function oC(t, e) {
  if (wn(e)) {
    const n = wt(e.focusPath), i = xe(t, n), r = Object.keys(i), o = et(e.focusPath), l = uf(n, r, o, ""), a = Sl(t, l);
    return { operations: l, newSelection: a };
  }
  if (yt(e))
    return { operations: [
      {
        op: "replace",
        path: Ae(e.focusPath),
        value: ""
      }
    ], newSelection: e };
  if (Tt(e)) {
    const n = Sp(e.paths), i = et(e.paths);
    if (Mt(i)) {
      const s = [{ op: "replace", path: "", value: "" }], l = Ot([], !1);
      return { operations: s, newSelection: l };
    }
    const r = wt(i), o = xe(t, r);
    if (Lt(o)) {
      const s = ui(e.paths), l = Tn(et(s)), a = l === 0 ? ro(r) : oo(r.concat(String(l - 1)));
      return { operations: n, newSelection: a };
    } else if (mn(o)) {
      const s = Object.keys(o), l = ui(e.paths), a = et(l), f = s.indexOf(a), c = s[f - 1], u = f === 0 ? ro(r) : oo(r.concat(c));
      return { operations: n, newSelection: u };
    } else
      throw new Error("Cannot create remove operations: parent must be an Object or Array");
  }
  throw new Error("Cannot remove: unsupported type of selection " + JSON.stringify(e));
}
function sC(t, e) {
  return jk(t, e, {
    before: (n, i, r) => {
      if (Pk(i)) {
        const o = sr(i.path);
        return {
          revertOperations: [...r, ...Z0(n, o)]
        };
      }
      if (gl(i)) {
        const o = sr(i.from);
        return {
          revertOperations: [...r, ...Z0(n, o)]
        };
      }
      return { revertOperations: r };
    }
  });
}
function Z0(t, e) {
  const n = wt(e), i = et(e), r = xe(t, n);
  if (mn(r)) {
    const o = Object.keys(r);
    return cf(o, i, !1).map((l) => As(n, l));
  }
  return [];
}
function SI(t, e) {
  return t.flatMap((n) => {
    if (Tm(n)) {
      const i = sr(n.path);
      if (i.length > 0) {
        const r = [n];
        let o = wt(i);
        for (; o.length > 0 && !Li(e, o); )
          r.unshift({
            op: "add",
            path: Ae(o),
            value: {}
          }), o = wt(o);
        return r;
      }
    }
    return n;
  });
}
function MI(t, e, n) {
  const i = n != null && n.activeItem ? tb(n.activeItem) : void 0, r = e.findIndex((a) => kt(i, tb(a))), o = r !== -1 ? r : (n == null ? void 0 : n.activeIndex) < e.length ? n == null ? void 0 : n.activeIndex : e.length > 0 ? 0 : -1, s = e.map((a, f) => ({ ...a, active: f === o })), l = s[o];
  return {
    items: s,
    itemsMap: uh(s, (a) => Ae(a.path)),
    activeItem: l,
    activeIndex: o
  };
}
function AI(t) {
  const e = t.activeIndex < t.items.length - 1 ? t.activeIndex + 1 : t.items.length > 0 ? 0 : -1, n = t.items[e], i = t.items.map((r, o) => ({ ...r, active: o === e }));
  return {
    ...t,
    items: i,
    itemsMap: uh(i, (r) => Ae(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function OI(t) {
  const e = t.activeIndex > 0 ? t.activeIndex - 1 : t.items.length - 1, n = t.items[e], i = t.items.map((r, o) => ({ ...r, active: o === e }));
  return {
    ...t,
    items: i,
    itemsMap: uh(i, (r) => Ae(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function lC(t, e, n, i = 1 / 0) {
  const r = [], o = [];
  function s(a) {
    r.length < i && r.push(a);
  }
  function l(a, f) {
    if (Lt(f)) {
      const c = o.length;
      o.push("0");
      for (let u = 0; u < f.length; u++)
        if (o[c] = String(u), l(a, f[u]), r.length >= i)
          return;
      o.pop();
    } else if (mn(f)) {
      const c = Object.keys(f), u = o.length;
      o.push("");
      for (const h of c)
        if (o[u] = h, $0(h, a, o, nr.key, s), l(a, f[h]), r.length >= i)
          return;
      o.pop();
    } else
      $0(String(f), a, o, nr.value, s);
  }
  if (typeof t == "string" && t !== "") {
    const a = t.toLowerCase();
    l(a, e);
  }
  return r;
}
function $0(t, e, n, i, r) {
  const o = t.toLowerCase();
  let s = 0, l = -1, a = -1;
  do
    a = o.indexOf(e, l), a !== -1 && (l = a + e.length, r({
      path: n.slice(0),
      field: i,
      fieldIndex: s,
      start: a,
      end: l
    }), s++);
  while (a !== -1);
}
function Mp(t, e, n, i) {
  return t.substring(0, n) + e + t.substring(i);
}
function eb(t, e, n) {
  let i = t;
  return X7(n, (r) => {
    i = Mp(i, e, r.start, r.end);
  }), i;
}
function TI(t, e, n, i, r) {
  const { field: o, path: s, start: l, end: a } = i;
  if (o === nr.key) {
    const f = wt(s), c = xe(t, f), u = et(s), h = Object.keys(c), d = Mp(u, n, l, a), p = uf(f, h, u, d);
    return {
      newSelection: Sl(t, p),
      operations: p
    };
  } else if (o === nr.value) {
    const f = xe(t, s);
    if (f === void 0)
      throw new Error(`Cannot replace: path not found ${Ae(s)}`);
    const c = typeof f == "string" ? f : String(f), u = Ae(s), h = io(f, e.enforceStringMap, u, r), d = Mp(c, n, l, a), p = [
      {
        op: "replace",
        path: Ae(s),
        value: h ? d : xl(d, r)
      }
    ];
    return {
      newSelection: Sl(t, p),
      operations: p
    };
  } else
    throw new Error(`Cannot replace: unknown type of search result field ${o}`);
}
function EI(t, e, n, i, r) {
  const o = lC(n, t, e, 1 / 0), s = [];
  for (let f = 0; f < o.length; f++) {
    const c = o[f - 1], u = o[f];
    f === 0 || u.field !== c.field || !kt(u.path, c.path) ? s.push({
      path: u.path,
      field: u.field,
      items: [u]
    }) : et(s).items.push(u);
  }
  s.sort((f, c) => f.field !== c.field ? f.field === nr.key ? 1 : -1 : c.path.length - f.path.length);
  let l = [], a;
  return s.forEach((f) => {
    const { field: c, path: u, items: h } = f;
    if (c === nr.key) {
      const d = wt(u), p = xe(t, d), g = et(u), _ = Object.keys(p), b = eb(g, i, h), y = uf(d, _, g, b);
      l = l.concat(y), a = Sl(t, y);
    } else if (c === nr.value) {
      const d = xe(t, u);
      if (d === void 0)
        throw new Error(`Cannot replace: path not found ${Ae(u)}`);
      const p = typeof d == "string" ? d : String(d), g = Ae(u), _ = io(d, e.enforceStringMap, g, r), b = eb(p, i, h), y = [
        {
          op: "replace",
          path: Ae(u),
          value: _ ? b : xl(b, r)
        }
      ];
      l = l.concat(y), a = Sl(t, y);
    } else
      throw new Error(`Cannot replace: unknown type of search result field ${c}`);
  }), {
    operations: l,
    newSelection: a
  };
}
function PI(t, e) {
  const n = [];
  let i = 0;
  for (const o of e) {
    const s = t.slice(i, o.start);
    s !== "" && n.push({
      type: "normal",
      text: s,
      active: !1
    });
    const l = t.slice(o.start, o.end);
    n.push({
      type: "highlight",
      text: l,
      active: o.active
    }), i = o.end;
  }
  const r = et(e);
  return r.end < t.length && n.push({
    type: "normal",
    text: t.slice(r.end),
    active: !1
  }), n;
}
function tb(t) {
  return t.path.concat(t.field, String(t.fieldIndex));
}
function RI(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === nr.key);
  if (!(!n || n.length === 0))
    return n;
}
function nb(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === nr.value);
  if (!(!n || n.length === 0))
    return n;
}
function ib(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function II(t) {
  let e, n = Ms(t[3].text) + "", i;
  return {
    c() {
      e = O("span"), i = le(n), m(e, "class", "jse-highlight svelte-s6kbew"), pe(e, "jse-active", t[3].active);
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, o) {
      o & 1 && n !== (n = Ms(r[3].text) + "") && Pe(i, n), o & 1 && pe(e, "jse-active", r[3].active);
    },
    d(r) {
      r && j(e);
    }
  };
}
function NI(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function rb(t) {
  let e;
  function n(o, s) {
    return o[3].type === "normal" ? NI : II;
  }
  let i = n(t), r = i(t);
  return {
    c() {
      r.c(), e = tt();
    },
    m(o, s) {
      r.m(o, s), B(o, e, s);
    },
    p(o, s) {
      i === (i = n(o)) && r ? r.p(o, s) : (r.d(1), r = i(o), r && (r.c(), r.m(e.parentNode, e)));
    },
    d(o) {
      r.d(o), o && j(e);
    }
  };
}
function DI(t) {
  let e, n = t[0], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = rb(ib(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = tt();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, [o]) {
      if (o & 1) {
        n = r[0];
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = ib(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = rb(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    i: fe,
    o: fe,
    d(r) {
      Dt(i, r), r && j(e);
    }
  };
}
function jI(t, e, n) {
  let i, { text: r } = e, { searchResultItems: o } = e;
  return t.$$set = (s) => {
    "text" in s && n(1, r = s.text), "searchResultItems" in s && n(2, o = s.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 6 && n(0, i = PI(String(r), o));
  }, [i, r, o];
}
class BI extends Be {
  constructor(e) {
    super(), je(this, e, jI, DI, Pt, { text: 1, searchResultItems: 2 });
  }
}
const aC = BI;
function LI(t) {
  let e = Ms(t[1].escapeValue(t[0])) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 3 && e !== (e = Ms(i[1].escapeValue(i[0])) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function xI(t) {
  let e, n;
  return e = new aC({
    props: {
      text: t[1].escapeValue(t[0]),
      searchResultItems: t[3]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 3 && (o.text = i[1].escapeValue(i[0])), r & 8 && (o.searchResultItems = i[3]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function zI(t) {
  let e, n, i, r, o, s, l, a;
  const f = [xI, LI], c = [];
  function u(h, d) {
    return h[3] ? 0 : 1;
  }
  return n = u(t), i = c[n] = f[n](t), {
    c() {
      e = O("div"), i.c(), m(e, "data-type", "selectable-value"), m(e, "class", r = fn(Cp(t[0], t[2])) + " svelte-6ci2p7"), m(e, "title", o = t[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null);
    },
    m(h, d) {
      B(h, e, d), c[n].m(e, null), s = !0, l || (a = [
        X(e, "click", t[5]),
        X(e, "dblclick", t[6])
      ], l = !0);
    },
    p(h, [d]) {
      let p = n;
      n = u(h), n === p ? c[n].p(h, d) : (me(), E(c[p], 1, 1, () => {
        c[p] = null;
      }), ge(), i = c[n], i ? i.p(h, d) : (i = c[n] = f[n](h), i.c()), k(i, 1), i.m(e, null)), (!s || d & 5 && r !== (r = fn(Cp(h[0], h[2])) + " svelte-6ci2p7")) && m(e, "class", r), (!s || d & 16 && o !== (o = h[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null)) && m(e, "title", o);
    },
    i(h) {
      s || (k(i), s = !0);
    },
    o(h) {
      E(i), s = !1;
    },
    d(h) {
      h && j(e), c[n].d(), l = !1, nt(a);
    }
  };
}
function VI(t, e, n) {
  let i, { path: r } = e, { value: o } = e, { readOnly: s } = e, { normalization: l } = e, { parser: a } = e, { onSelect: f } = e, { searchResultItems: c } = e;
  function u(d) {
    typeof o == "string" && i && d.ctrlKey && (d.preventDefault(), d.stopPropagation(), window.open(o, "_blank"));
  }
  function h(d) {
    s || (d.preventDefault(), f(Ot(r, !0)));
  }
  return t.$$set = (d) => {
    "path" in d && n(7, r = d.path), "value" in d && n(0, o = d.value), "readOnly" in d && n(8, s = d.readOnly), "normalization" in d && n(1, l = d.normalization), "parser" in d && n(2, a = d.parser), "onSelect" in d && n(9, f = d.onSelect), "searchResultItems" in d && n(3, c = d.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = Zu(o));
  }, [
    o,
    l,
    a,
    c,
    i,
    u,
    h,
    r,
    s,
    f
  ];
}
class FI extends Be {
  constructor(e) {
    super(), je(this, e, VI, zI, pt, {
      path: 7,
      value: 0,
      readOnly: 8,
      normalization: 1,
      parser: 2,
      onSelect: 9,
      searchResultItems: 3
    });
  }
}
const HI = FI;
function WI(t) {
  let e, n;
  return {
    c() {
      e = O("div"), n = le(t[0]), m(e, "class", "jse-tooltip svelte-r4omvg");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p(i, [r]) {
      r & 1 && Pe(n, i[0]);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
function UI(t, e, n) {
  let { text: i } = e;
  return t.$$set = (r) => {
    "text" in r && n(0, i = r.text);
  }, [i];
}
class qI extends Be {
  constructor(e) {
    super(), je(this, e, UI, WI, Pt, { text: 0 });
  }
}
const JI = qI;
function eg(t, { text: e, openAbsolutePopup: n, closeAbsolutePopup: i }) {
  let r;
  function o() {
    r = n(JI, {
      text: e
    }, {
      position: "top",
      width: 10 * e.length,
      offsetTop: 3,
      anchor: t,
      closeOnOuterClick: !0
    });
  }
  function s() {
    i(r);
  }
  return t.addEventListener("mouseenter", o), t.addEventListener("mouseleave", s), {
    destroy() {
      t.removeEventListener("mouseenter", o), t.removeEventListener("mouseleave", s);
    }
  };
}
function KI(t) {
  let e, n, i, r, o, s;
  return n = new vt({ props: { data: yR } }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-timestamp svelte-1w5pf7");
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), r = !0, o || (s = _i(i = eg.call(null, e, {
        text: t[0],
        ...t[1]
      })), o = !0);
    },
    p(l, [a]) {
      i && Fn(i.update) && a & 1 && i.update.call(null, {
        text: l[0],
        ...l[1]
      });
    },
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n), o = !1, s();
    }
  };
}
function GI(t, e, n) {
  let i;
  const r = Hn("absolute-popup");
  let { value: o } = e;
  return t.$$set = (s) => {
    "value" in s && n(2, o = s.value);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(0, i = `Time: ${new Date(o).toString()}`);
  }, [i, r, o];
}
class XI extends Be {
  constructor(e) {
    super(), je(this, e, GI, KI, pt, { value: 2 });
  }
}
const QI = XI;
function YI({ path: t, value: e, readOnly: n, enforceString: i, searchResultItems: r, isEditing: o, parser: s, normalization: l, onPatch: a, onPasteJson: f, onSelect: c, onFind: u, findNextInside: h, focus: d }) {
  const p = [];
  return !o && lA(e) && p.push({
    component: VR,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), !o && aA(e) && p.push({
    component: GR,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), o && p.push({
    component: _I,
    props: {
      path: t,
      value: e,
      enforceString: i,
      parser: s,
      normalization: l,
      onPatch: a,
      onPasteJson: f,
      onSelect: c,
      onFind: u,
      findNextInside: h,
      focus: d
    }
  }), o || p.push({
    component: HI,
    props: { path: t, value: e, readOnly: n, parser: s, normalization: l, searchResultItems: r, onSelect: c }
  }), !o && up(e) && p.push({
    component: QI,
    props: { value: e }
  }), p;
}
var So = {
  prefix: "fas",
  iconName: "caret-right",
  icon: [256, 512, [], "f0da", "M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]
}, fC = {
  prefix: "fas",
  iconName: "paste",
  icon: [512, 512, ["file-clipboard"], "f0ea", "M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]
}, ZI = {
  prefix: "fas",
  iconName: "circle-notch",
  icon: [512, 512, [], "f1ce", "M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]
}, $I = {
  prefix: "fas",
  iconName: "scissors",
  icon: [512, 512, [9984, 9986, 9988, "cut"], "f0c4", "M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM160 112c0 26.5-21.5 48-48 48s-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48zM112 448c-26.5 0-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48z"]
}, ol = $I, eN = {
  prefix: "fas",
  iconName: "square-caret-down",
  icon: [448, 512, ["caret-square-down"], "f150", "M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]
}, tN = eN, nN = {
  prefix: "fas",
  iconName: "caret-left",
  icon: [256, 512, [], "f0d9", "M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]
}, iN = {
  prefix: "fas",
  iconName: "pen-to-square",
  icon: [512, 512, ["edit"], "f044", "M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]
}, ob = iN, rN = {
  prefix: "fas",
  iconName: "chevron-up",
  icon: [512, 512, [], "f077", "M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]
}, cC = {
  prefix: "fas",
  iconName: "angle-right",
  icon: [320, 512, [8250], "f105", "M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]
}, oN = {
  prefix: "fas",
  iconName: "square-caret-up",
  icon: [448, 512, ["caret-square-up"], "f151", "M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]
}, sN = oN, sb = {
  prefix: "fas",
  iconName: "caret-up",
  icon: [320, 512, [], "f0d8", "M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]
}, bh = {
  prefix: "fas",
  iconName: "filter",
  icon: [512, 512, [], "f0b0", "M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]
}, zo = {
  prefix: "fas",
  iconName: "code",
  icon: [640, 512, [], "f121", "M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]
}, _h = {
  prefix: "fas",
  iconName: "wrench",
  icon: [512, 512, [128295], "f0ad", "M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 456c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"]
}, _a = {
  prefix: "fas",
  iconName: "pen",
  icon: [512, 512, [128394], "f304", "M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]
}, lN = {
  prefix: "fas",
  iconName: "arrow-rotate-right",
  icon: [512, 512, [8635, "arrow-right-rotate", "arrow-rotate-forward", "redo"], "f01e", "M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]
}, tg = lN, aN = {
  prefix: "fas",
  iconName: "arrow-rotate-left",
  icon: [512, 512, [8634, "arrow-left-rotate", "arrow-rotate-back", "arrow-rotate-backward", "undo"], "f0e2", "M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]
}, ng = aN, fN = {
  prefix: "fas",
  iconName: "crop-simple",
  icon: [512, 512, ["crop-alt"], "f565", "M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]
}, cN = fN, uN = {
  prefix: "fas",
  iconName: "gear",
  icon: [512, 512, [9881, "cog"], "f013", "M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"]
}, hN = uN, Ni = {
  prefix: "fas",
  iconName: "caret-down",
  icon: [320, 512, [], "f0d7", "M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]
}, dN = {
  prefix: "fas",
  iconName: "ellipsis-vertical",
  icon: [128, 512, ["ellipsis-v"], "f142", "M64 360c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zm0-160c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zM120 96c0 30.9-25.1 56-56 56S8 126.9 8 96S33.1 40 64 40s56 25.1 56 56z"]
}, uC = dN, jf = {
  prefix: "fas",
  iconName: "arrow-right-arrow-left",
  icon: [448, 512, [8644, "exchange"], "f0ec", "M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]
}, pN = {
  prefix: "fas",
  iconName: "arrow-down-short-wide",
  icon: [576, 512, ["sort-amount-desc", "sort-amount-down-alt"], "f884", "M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]
}, yh = pN, mN = {
  prefix: "fas",
  iconName: "angle-down",
  icon: [448, 512, [8964], "f107", "M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, gN = {
  prefix: "fas",
  iconName: "arrow-down",
  icon: [384, 512, [8595], "f063", "M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, bN = {
  prefix: "fas",
  iconName: "magnifying-glass",
  icon: [512, 512, [128269, "search"], "f002", "M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"]
}, ig = bN, _N = {
  prefix: "fas",
  iconName: "chevron-down",
  icon: [512, 512, [], "f078", "M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]
}, Po = {
  prefix: "fas",
  iconName: "copy",
  icon: [512, 512, [], "f0c5", "M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]
}, Bf = {
  prefix: "fas",
  iconName: "plus",
  icon: [448, 512, [10133, 61543, "add"], "2b", "M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]
}, hC = {
  prefix: "fas",
  iconName: "xmark",
  icon: [320, 512, [128473, 10005, 10006, 10060, 215, "close", "multiply", "remove", "times"], "f00d", "M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]
}, lb = hC, Wl = hC, yN = {
  prefix: "fas",
  iconName: "clone",
  icon: [512, 512, [], "f24d", "M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]
}, xa = {
  prefix: "fas",
  iconName: "check",
  icon: [512, 512, [10003, 10004], "f00c", "M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]
}, wN = {
  prefix: "fas",
  iconName: "triangle-exclamation",
  icon: [512, 512, [9888, "exclamation-triangle", "warning"], "f071", "M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"]
}, Bs = wN;
const Ji = {};
function hf(t) {
  return t.split("-")[0];
}
function rg(t) {
  return t.split("-")[1];
}
function wh(t) {
  return ["top", "bottom"].includes(hf(t)) ? "x" : "y";
}
function dC(t) {
  return t === "y" ? "height" : "width";
}
function ab(t, e, n) {
  let {
    reference: i,
    floating: r
  } = t;
  const o = i.x + i.width / 2 - r.width / 2, s = i.y + i.height / 2 - r.height / 2, l = wh(e), a = dC(l), f = i[a] / 2 - r[a] / 2, c = hf(e), u = l === "x";
  let h;
  switch (c) {
    case "top":
      h = {
        x: o,
        y: i.y - r.height
      };
      break;
    case "bottom":
      h = {
        x: o,
        y: i.y + i.height
      };
      break;
    case "right":
      h = {
        x: i.x + i.width,
        y: s
      };
      break;
    case "left":
      h = {
        x: i.x - r.width,
        y: s
      };
      break;
    default:
      h = {
        x: i.x,
        y: i.y
      };
  }
  switch (rg(e)) {
    case "start":
      h[l] -= f * (n && u ? -1 : 1);
      break;
    case "end":
      h[l] += f * (n && u ? -1 : 1);
      break;
  }
  return h;
}
const vN = async (t, e, n) => {
  const {
    placement: i = "bottom",
    strategy: r = "absolute",
    middleware: o = [],
    platform: s
  } = n, l = o.filter(Boolean), a = await (s.isRTL == null ? void 0 : s.isRTL(e));
  if (process.env.NODE_ENV !== "production") {
    if (s == null && console.error(["Floating UI: `platform` property was not passed to config. If you", "want to use Floating UI on the web, install @floating-ui/dom", "instead of the /core package. Otherwise, you can create your own", "`platform`: https://floating-ui.com/docs/platform"].join(" ")), l.filter((g) => {
      let {
        name: _
      } = g;
      return _ === "autoPlacement" || _ === "flip";
    }).length > 1)
      throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware", "detected. This will lead to an infinite loop. Ensure only one of", "either has been passed to the `middleware` array."].join(" "));
    (!t || !e) && console.error(["Floating UI: The reference and/or floating element was not defined", "when `computePosition()` was called. Ensure that both elements have", "been created and can be measured."].join(" "));
  }
  let f = await s.getElementRects({
    reference: t,
    floating: e,
    strategy: r
  }), {
    x: c,
    y: u
  } = ab(f, i, a), h = i, d = {}, p = 0;
  for (let g = 0; g < l.length; g++) {
    const {
      name: _,
      fn: b
    } = l[g], {
      x: y,
      y: v,
      data: M,
      reset: A
    } = await b({
      x: c,
      y: u,
      initialPlacement: i,
      placement: h,
      strategy: r,
      middlewareData: d,
      rects: f,
      platform: s,
      elements: {
        reference: t,
        floating: e
      }
    });
    if (c = y ?? c, u = v ?? u, d = {
      ...d,
      [_]: {
        ...d[_],
        ...M
      }
    }, process.env.NODE_ENV !== "production" && p > 50 && console.warn(["Floating UI: The middleware lifecycle appears to be running in an", "infinite loop. This is usually caused by a `reset` continually", "being returned without a break condition."].join(" ")), A && p <= 50) {
      p++, typeof A == "object" && (A.placement && (h = A.placement), A.rects && (f = A.rects === !0 ? await s.getElementRects({
        reference: t,
        floating: e,
        strategy: r
      }) : A.rects), {
        x: c,
        y: u
      } = ab(f, h, a)), g = -1;
      continue;
    }
  }
  return {
    x: c,
    y: u,
    placement: h,
    strategy: r,
    middlewareData: d
  };
};
function kN(t) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...t
  };
}
function CN(t) {
  return typeof t != "number" ? kN(t) : {
    top: t,
    right: t,
    bottom: t,
    left: t
  };
}
function eu(t) {
  return {
    ...t,
    top: t.y,
    left: t.x,
    right: t.x + t.width,
    bottom: t.y + t.height
  };
}
async function pC(t, e) {
  var n;
  e === void 0 && (e = {});
  const {
    x: i,
    y: r,
    platform: o,
    rects: s,
    elements: l,
    strategy: a
  } = t, {
    boundary: f = "clippingAncestors",
    rootBoundary: c = "viewport",
    elementContext: u = "floating",
    altBoundary: h = !1,
    padding: d = 0
  } = e, p = CN(d), _ = l[h ? u === "floating" ? "reference" : "floating" : u], b = eu(await o.getClippingRect({
    element: (n = await (o.isElement == null ? void 0 : o.isElement(_))) == null || n ? _ : _.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(l.floating)),
    boundary: f,
    rootBoundary: c,
    strategy: a
  })), y = u === "floating" ? {
    ...s.floating,
    x: i,
    y: r
  } : s.reference, v = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(l.floating)), M = await (o.isElement == null ? void 0 : o.isElement(v)) ? await (o.getScale == null ? void 0 : o.getScale(v)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, A = eu(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
    rect: y,
    offsetParent: v,
    strategy: a
  }) : y);
  return process.env.NODE_ENV, {
    top: (b.top - A.top + p.top) / M.y,
    bottom: (A.bottom - b.bottom + p.bottom) / M.y,
    left: (b.left - A.left + p.left) / M.x,
    right: (A.right - b.right + p.right) / M.x
  };
}
const SN = Math.min, MN = Math.max;
function fb(t, e, n) {
  return MN(t, SN(e, n));
}
const AN = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function tu(t) {
  return t.replace(/left|right|bottom|top/g, (e) => AN[e]);
}
function ON(t, e, n) {
  n === void 0 && (n = !1);
  const i = rg(t), r = wh(t), o = dC(r);
  let s = r === "x" ? i === (n ? "end" : "start") ? "right" : "left" : i === "start" ? "bottom" : "top";
  return e.reference[o] > e.floating[o] && (s = tu(s)), {
    main: s,
    cross: tu(s)
  };
}
const TN = {
  start: "end",
  end: "start"
};
function cb(t) {
  return t.replace(/start|end/g, (e) => TN[e]);
}
function EN(t) {
  const e = tu(t);
  return [cb(t), e, cb(e)];
}
const PN = function(t) {
  return t === void 0 && (t = {}), {
    name: "flip",
    options: t,
    async fn(e) {
      var n;
      const {
        placement: i,
        middlewareData: r,
        rects: o,
        initialPlacement: s,
        platform: l,
        elements: a
      } = e, {
        mainAxis: f = !0,
        crossAxis: c = !0,
        fallbackPlacements: u,
        fallbackStrategy: h = "bestFit",
        flipAlignment: d = !0,
        ...p
      } = t, g = hf(i), b = u || (g === s || !d ? [tu(s)] : EN(s)), y = [s, ...b], v = await pC(e, p), M = [];
      let A = ((n = r.flip) == null ? void 0 : n.overflows) || [];
      if (f && M.push(v[g]), c) {
        const {
          main: x,
          cross: V
        } = ON(i, o, await (l.isRTL == null ? void 0 : l.isRTL(a.floating)));
        M.push(v[x], v[V]);
      }
      if (A = [...A, {
        placement: i,
        overflows: M
      }], !M.every((x) => x <= 0)) {
        var P, S;
        const x = ((P = (S = r.flip) == null ? void 0 : S.index) != null ? P : 0) + 1, V = y[x];
        if (V)
          return {
            data: {
              index: x,
              overflows: A
            },
            reset: {
              placement: V
            }
          };
        let R = "bottom";
        switch (h) {
          case "bestFit": {
            var D;
            const W = (D = A.map((U) => [U, U.overflows.filter((C) => C > 0).reduce((C, L) => C + L, 0)]).sort((U, C) => U[1] - C[1])[0]) == null ? void 0 : D[0].placement;
            W && (R = W);
            break;
          }
          case "initialPlacement":
            R = s;
            break;
        }
        if (i !== R)
          return {
            reset: {
              placement: R
            }
          };
      }
      return {};
    }
  };
};
async function RN(t, e) {
  const {
    placement: n,
    platform: i,
    elements: r
  } = t, o = await (i.isRTL == null ? void 0 : i.isRTL(r.floating)), s = hf(n), l = rg(n), a = wh(n) === "x", f = ["left", "top"].includes(s) ? -1 : 1, c = o && a ? -1 : 1, u = typeof e == "function" ? e(t) : e;
  let {
    mainAxis: h,
    crossAxis: d,
    alignmentAxis: p
  } = typeof u == "number" ? {
    mainAxis: u,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...u
  };
  return l && typeof p == "number" && (d = l === "end" ? p * -1 : p), a ? {
    x: d * c,
    y: h * f
  } : {
    x: h * f,
    y: d * c
  };
}
const IN = function(t) {
  return t === void 0 && (t = 0), {
    name: "offset",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i
      } = e, r = await RN(e, t);
      return {
        x: n + r.x,
        y: i + r.y,
        data: r
      };
    }
  };
};
function NN(t) {
  return t === "x" ? "y" : "x";
}
const DN = function(t) {
  return t === void 0 && (t = {}), {
    name: "shift",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i,
        placement: r
      } = e, {
        mainAxis: o = !0,
        crossAxis: s = !1,
        limiter: l = {
          fn: (_) => {
            let {
              x: b,
              y
            } = _;
            return {
              x: b,
              y
            };
          }
        },
        ...a
      } = t, f = {
        x: n,
        y: i
      }, c = await pC(e, a), u = wh(hf(r)), h = NN(u);
      let d = f[u], p = f[h];
      if (o) {
        const _ = u === "y" ? "top" : "left", b = u === "y" ? "bottom" : "right", y = d + c[_], v = d - c[b];
        d = fb(y, d, v);
      }
      if (s) {
        const _ = h === "y" ? "top" : "left", b = h === "y" ? "bottom" : "right", y = p + c[_], v = p - c[b];
        p = fb(y, p, v);
      }
      const g = l.fn({
        ...e,
        [u]: d,
        [h]: p
      });
      return {
        ...g,
        data: {
          x: g.x - n,
          y: g.y - i
        }
      };
    }
  };
};
function Di(t) {
  var e;
  return ((e = t.ownerDocument) == null ? void 0 : e.defaultView) || window;
}
function zr(t) {
  return Di(t).getComputedStyle(t);
}
function Vo(t) {
  return gC(t) ? (t.nodeName || "").toLowerCase() : "";
}
let Lf;
function mC() {
  if (Lf)
    return Lf;
  const t = navigator.userAgentData;
  return t && Array.isArray(t.brands) ? (Lf = t.brands.map((e) => e.brand + "/" + e.version).join(" "), Lf) : navigator.userAgent;
}
function so(t) {
  return t instanceof Di(t).HTMLElement;
}
function rr(t) {
  return t instanceof Di(t).Element;
}
function gC(t) {
  return t instanceof Di(t).Node;
}
function ub(t) {
  if (typeof ShadowRoot > "u")
    return !1;
  const e = Di(t).ShadowRoot;
  return t instanceof e || t instanceof ShadowRoot;
}
function vh(t) {
  const {
    overflow: e,
    overflowX: n,
    overflowY: i,
    display: r
  } = zr(t);
  return /auto|scroll|overlay|hidden|clip/.test(e + i + n) && !["inline", "contents"].includes(r);
}
function jN(t) {
  return ["table", "td", "th"].includes(Vo(t));
}
function og(t) {
  const e = /firefox/i.test(mC()), n = zr(t), i = n.backdropFilter || n.WebkitBackdropFilter;
  return n.transform !== "none" || n.perspective !== "none" || (i ? i !== "none" : !1) || e && n.willChange === "filter" || e && (n.filter ? n.filter !== "none" : !1) || ["transform", "perspective"].some((r) => n.willChange.includes(r)) || ["paint", "layout", "strict", "content"].some(
    (r) => {
      const o = n.contain;
      return o != null ? o.includes(r) : !1;
    }
  );
}
function bC() {
  return !/^((?!chrome|android).)*safari/i.test(mC());
}
function sg(t) {
  return ["html", "body", "#document"].includes(Vo(t));
}
const hb = Math.min, ya = Math.max, nu = Math.round;
function _C(t) {
  const e = zr(t);
  let n = parseFloat(e.width), i = parseFloat(e.height);
  const r = t.offsetWidth, o = t.offsetHeight, s = nu(n) !== r || nu(i) !== o;
  return s && (n = r, i = o), {
    width: n,
    height: i,
    fallback: s
  };
}
function yC(t) {
  return rr(t) ? t : t.contextElement;
}
const wC = {
  x: 1,
  y: 1
};
function sl(t) {
  const e = yC(t);
  if (!so(e))
    return wC;
  const n = e.getBoundingClientRect(), {
    width: i,
    height: r,
    fallback: o
  } = _C(e);
  let s = (o ? nu(n.width) : n.width) / i, l = (o ? nu(n.height) : n.height) / r;
  return (!s || !Number.isFinite(s)) && (s = 1), (!l || !Number.isFinite(l)) && (l = 1), {
    x: s,
    y: l
  };
}
function Os(t, e, n, i) {
  var r, o;
  e === void 0 && (e = !1), n === void 0 && (n = !1);
  const s = t.getBoundingClientRect(), l = yC(t);
  let a = wC;
  e && (i ? rr(i) && (a = sl(i)) : a = sl(t));
  const f = l ? Di(l) : window, c = !bC() && n;
  let u = (s.left + (c && ((r = f.visualViewport) == null ? void 0 : r.offsetLeft) || 0)) / a.x, h = (s.top + (c && ((o = f.visualViewport) == null ? void 0 : o.offsetTop) || 0)) / a.y, d = s.width / a.x, p = s.height / a.y;
  if (l) {
    const g = Di(l), _ = i && rr(i) ? Di(i) : i;
    let b = g.frameElement;
    for (; b && i && _ !== g; ) {
      const y = sl(b), v = b.getBoundingClientRect(), M = getComputedStyle(b);
      v.x += (b.clientLeft + parseFloat(M.paddingLeft)) * y.x, v.y += (b.clientTop + parseFloat(M.paddingTop)) * y.y, u *= y.x, h *= y.y, d *= y.x, p *= y.y, u += v.x, h += v.y, b = Di(b).frameElement;
    }
  }
  return {
    width: d,
    height: p,
    top: h,
    right: u + d,
    bottom: h + p,
    left: u,
    x: u,
    y: h
  };
}
function Go(t) {
  return ((gC(t) ? t.ownerDocument : t.document) || window.document).documentElement;
}
function kh(t) {
  return rr(t) ? {
    scrollLeft: t.scrollLeft,
    scrollTop: t.scrollTop
  } : {
    scrollLeft: t.pageXOffset,
    scrollTop: t.pageYOffset
  };
}
function vC(t) {
  return Os(Go(t)).left + kh(t).scrollLeft;
}
function BN(t, e, n) {
  const i = so(e), r = Go(e), o = Os(t, !0, n === "fixed", e);
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = {
    x: 0,
    y: 0
  };
  if (i || !i && n !== "fixed")
    if ((Vo(e) !== "body" || vh(r)) && (s = kh(e)), so(e)) {
      const a = Os(e, !0);
      l.x = a.x + e.clientLeft, l.y = a.y + e.clientTop;
    } else
      r && (l.x = vC(r));
  return {
    x: o.left + s.scrollLeft - l.x,
    y: o.top + s.scrollTop - l.y,
    width: o.width,
    height: o.height
  };
}
function za(t) {
  if (Vo(t) === "html")
    return t;
  const e = t.assignedSlot || t.parentNode || (ub(t) ? t.host : null) || Go(t);
  return ub(e) ? e.host : e;
}
function db(t) {
  return !so(t) || zr(t).position === "fixed" ? null : t.offsetParent;
}
function LN(t) {
  let e = za(t);
  for (; so(e) && !sg(e); ) {
    if (og(e))
      return e;
    e = za(e);
  }
  return null;
}
function pb(t) {
  const e = Di(t);
  let n = db(t);
  for (; n && jN(n) && zr(n).position === "static"; )
    n = db(n);
  return n && (Vo(n) === "html" || Vo(n) === "body" && zr(n).position === "static" && !og(n)) ? e : n || LN(t) || e;
}
function xN(t) {
  return _C(t);
}
function zN(t) {
  let {
    rect: e,
    offsetParent: n,
    strategy: i
  } = t;
  const r = so(n), o = Go(n);
  if (n === o)
    return e;
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  }, l = {
    x: 1,
    y: 1
  };
  const a = {
    x: 0,
    y: 0
  };
  if ((r || !r && i !== "fixed") && ((Vo(n) !== "body" || vh(o)) && (s = kh(n)), so(n))) {
    const f = Os(n);
    l = sl(n), a.x = f.x + n.clientLeft, a.y = f.y + n.clientTop;
  }
  return {
    width: e.width * l.x,
    height: e.height * l.y,
    x: e.x * l.x - s.scrollLeft * l.x + a.x,
    y: e.y * l.y - s.scrollTop * l.y + a.y
  };
}
function VN(t, e) {
  const n = Di(t), i = Go(t), r = n.visualViewport;
  let o = i.clientWidth, s = i.clientHeight, l = 0, a = 0;
  if (r) {
    o = r.width, s = r.height;
    const f = bC();
    (f || !f && e === "fixed") && (l = r.offsetLeft, a = r.offsetTop);
  }
  return {
    width: o,
    height: s,
    x: l,
    y: a
  };
}
function FN(t) {
  var e;
  const n = Go(t), i = kh(t), r = (e = t.ownerDocument) == null ? void 0 : e.body, o = ya(n.scrollWidth, n.clientWidth, r ? r.scrollWidth : 0, r ? r.clientWidth : 0), s = ya(n.scrollHeight, n.clientHeight, r ? r.scrollHeight : 0, r ? r.clientHeight : 0);
  let l = -i.scrollLeft + vC(t);
  const a = -i.scrollTop;
  return zr(r || n).direction === "rtl" && (l += ya(n.clientWidth, r ? r.clientWidth : 0) - o), {
    width: o,
    height: s,
    x: l,
    y: a
  };
}
function kC(t) {
  const e = za(t);
  return sg(e) ? t.ownerDocument.body : so(e) && vh(e) ? e : kC(e);
}
function wa(t, e) {
  var n;
  e === void 0 && (e = []);
  const i = kC(t), r = i === ((n = t.ownerDocument) == null ? void 0 : n.body), o = Di(i);
  return r ? e.concat(o, o.visualViewport || [], vh(i) ? i : []) : e.concat(i, wa(i));
}
function HN(t, e) {
  const n = Os(t, !0, e === "fixed"), i = n.top + t.clientTop, r = n.left + t.clientLeft, o = so(t) ? sl(t) : {
    x: 1,
    y: 1
  }, s = t.clientWidth * o.x, l = t.clientHeight * o.y, a = r * o.x, f = i * o.y;
  return {
    top: f,
    left: a,
    right: a + s,
    bottom: f + l,
    x: a,
    y: f,
    width: s,
    height: l
  };
}
function mb(t, e, n) {
  return e === "viewport" ? eu(VN(t, n)) : rr(e) ? HN(e, n) : eu(FN(Go(t)));
}
function WN(t, e) {
  const n = e.get(t);
  if (n)
    return n;
  let i = wa(t).filter((l) => rr(l) && Vo(l) !== "body"), r = null;
  const o = zr(t).position === "fixed";
  let s = o ? za(t) : t;
  for (; rr(s) && !sg(s); ) {
    const l = zr(s), a = og(s);
    (o ? !a && !r : !a && l.position === "static" && !!r && ["absolute", "fixed"].includes(r.position)) ? i = i.filter((c) => c !== s) : r = l, s = za(s);
  }
  return e.set(t, i), i;
}
function UN(t) {
  let {
    element: e,
    boundary: n,
    rootBoundary: i,
    strategy: r
  } = t;
  const s = [...n === "clippingAncestors" ? WN(e, this._c) : [].concat(n), i], l = s[0], a = s.reduce((f, c) => {
    const u = mb(e, c, r);
    return f.top = ya(u.top, f.top), f.right = hb(u.right, f.right), f.bottom = hb(u.bottom, f.bottom), f.left = ya(u.left, f.left), f;
  }, mb(e, l, r));
  return {
    width: a.right - a.left,
    height: a.bottom - a.top,
    x: a.left,
    y: a.top
  };
}
const qN = {
  getClippingRect: UN,
  convertOffsetParentRelativeRectToViewportRelativeRect: zN,
  isElement: rr,
  getDimensions: xN,
  getOffsetParent: pb,
  getDocumentElement: Go,
  getScale: sl,
  async getElementRects(t) {
    let {
      reference: e,
      floating: n,
      strategy: i
    } = t;
    const r = this.getOffsetParent || pb, o = this.getDimensions;
    return {
      reference: BN(e, await r(n), i),
      floating: {
        x: 0,
        y: 0,
        ...await o(n)
      }
    };
  },
  getClientRects: (t) => Array.from(t.getClientRects()),
  isRTL: (t) => zr(t).direction === "rtl"
};
function JN(t, e, n, i) {
  i === void 0 && (i = {});
  const {
    ancestorScroll: r = !0,
    ancestorResize: o = !0,
    elementResize: s = !0,
    animationFrame: l = !1
  } = i, a = r && !l, f = a || o ? [...rr(t) ? wa(t) : t.contextElement ? wa(t.contextElement) : [], ...wa(e)] : [];
  f.forEach((p) => {
    a && p.addEventListener("scroll", n, {
      passive: !0
    }), o && p.addEventListener("resize", n);
  });
  let c = null;
  if (s) {
    let p = !0;
    c = new ResizeObserver(() => {
      p || n(), p = !1;
    }), rr(t) && !l && c.observe(t), !rr(t) && t.contextElement && !l && c.observe(t.contextElement), c.observe(e);
  }
  let u, h = l ? Os(t) : null;
  l && d();
  function d() {
    const p = Os(t);
    h && (p.x !== h.x || p.y !== h.y || p.width !== h.width || p.height !== h.height) && n(), h = p, u = requestAnimationFrame(d);
  }
  return n(), () => {
    var p;
    f.forEach((g) => {
      a && g.removeEventListener("scroll", n), o && g.removeEventListener("resize", n);
    }), (p = c) == null || p.disconnect(), c = null, l && cancelAnimationFrame(u);
  };
}
const KN = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = {
    platform: qN,
    ...n
  }, o = {
    ...r.platform,
    _c: i
  };
  return vN(t, e, {
    ...r,
    platform: o
  });
};
function GN(t) {
  let e, n;
  const i = {
    autoUpdate: !0
  };
  let r = t;
  const o = (f) => ({ ...i, ...t || {}, ...f || {} }), s = (f) => {
    e && n && (r = o(f), KN(e, n, r).then((c) => {
      Object.assign(n.style, {
        position: c.strategy,
        left: `${c.x}px`,
        top: `${c.y}px`
      }), r != null && r.onComputed && r.onComputed(c);
    }));
  };
  return [
    (f) => {
      e = f, s();
    },
    (f, c) => {
      let u;
      n = f, r = o(c), setTimeout(() => s(c), 0), s(c);
      const h = () => {
        u && (u(), u = void 0);
      }, d = ({ autoUpdate: p } = r || {}) => {
        if (h(), p !== !1)
          return JN(e, n, () => s(r), p === !0 ? {} : p);
      };
      return u = d(), {
        update(p) {
          s(p), u = d(p);
        },
        destroy() {
          h();
        }
      };
    },
    s
  ];
}
function XN({
  loadOptions: t,
  filterText: e,
  items: n,
  multiple: i,
  value: r,
  itemId: o,
  groupBy: s,
  filterSelectedItems: l,
  itemFilter: a,
  convertStringItemsToObjects: f,
  filterGroupedItems: c,
  label: u
}) {
  if (n && t)
    return n;
  if (!n)
    return [];
  n && n.length > 0 && typeof n[0] != "object" && (n = f(n));
  let h = n.filter((d) => {
    let p = a(d[u], e, d);
    return p && i && (r != null && r.length) && (p = !r.some((g) => l ? g[o] === d[o] : !1)), p;
  });
  return s && (h = c(h)), h;
}
async function QN({ dispatch: t, loadOptions: e, convertStringItemsToObjects: n, filterText: i }) {
  let r = await e(i).catch((o) => {
    console.warn("svelte-select loadOptions error :>> ", o), t("error", { type: "loadOptions", details: o });
  });
  if (r && !r.cancelled)
    return r ? (r && r.length > 0 && typeof r[0] != "object" && (r = n(r)), t("loaded", { items: r })) : r = [], {
      filteredItems: r,
      loading: !1,
      focused: !0,
      listOpen: !0
    };
}
function YN(t) {
  let e, n;
  return {
    c() {
      e = lt("svg"), n = lt("path"), m(n, "fill", "currentColor"), m(n, "d", `M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`), m(e, "width", "100%"), m(e, "height", "100%"), m(e, "viewBox", "0 0 20 20"), m(e, "focusable", "false"), m(e, "aria-hidden", "true"), m(e, "class", "svelte-qbd276");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class ZN extends Be {
  constructor(e) {
    super(), je(this, e, null, YN, Pt, {});
  }
}
function $N(t) {
  let e, n;
  return {
    c() {
      e = lt("svg"), n = lt("path"), m(n, "fill", "currentColor"), m(n, "d", `M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`), m(e, "width", "100%"), m(e, "height", "100%"), m(e, "viewBox", "-2 -2 50 50"), m(e, "focusable", "false"), m(e, "aria-hidden", "true"), m(e, "role", "presentation"), m(e, "class", "svelte-whdbu1");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class iu extends Be {
  constructor(e) {
    super(), je(this, e, null, $N, Pt, {});
  }
}
function eD(t) {
  let e, n;
  return {
    c() {
      e = lt("svg"), n = lt("circle"), m(n, "class", "circle_path svelte-1p3nqvd"), m(n, "cx", "50"), m(n, "cy", "50"), m(n, "r", "20"), m(n, "fill", "none"), m(n, "stroke", "currentColor"), m(n, "stroke-width", "5"), m(n, "stroke-miterlimit", "10"), m(e, "class", "loading svelte-1p3nqvd"), m(e, "viewBox", "25 25 50 50");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class tD extends Be {
  constructor(e) {
    super(), je(this, e, null, eD, Pt, {});
  }
}
const nD = (t) => ({ value: t[0] & 8 }), gb = (t) => ({ value: t[3] }), iD = (t) => ({ listOpen: t[0] & 64 }), bb = (t) => ({ listOpen: t[6] }), rD = (t) => ({}), _b = (t) => ({}), oD = (t) => ({}), yb = (t) => ({}), sD = (t) => ({ selection: t[0] & 8 }), wb = (t) => ({ selection: t[3] });
function vb(t, e, n) {
  const i = t.slice();
  return i[128] = e[n], i[130] = n, i;
}
const lD = (t) => ({}), kb = (t) => ({}), aD = (t) => ({ selection: t[0] & 8 }), Cb = (t) => ({
  selection: t[128],
  index: t[130]
}), fD = (t) => ({}), Sb = (t) => ({}), cD = (t) => ({}), Mb = (t) => ({});
function Ab(t, e, n) {
  const i = t.slice();
  return i[128] = e[n], i[130] = n, i;
}
const uD = (t) => ({
  item: t[0] & 16777216
}), Ob = (t) => ({
  item: t[128],
  index: t[130]
}), hD = (t) => ({
  filteredItems: t[0] & 16777216
}), Tb = (t) => ({ filteredItems: t[24] });
function Eb(t) {
  let e, n, i, r, o, s;
  const l = [mD, pD, dD], a = [];
  function f(c, u) {
    return c[51].list ? 0 : c[24].length > 0 ? 1 : c[19] ? -1 : 2;
  }
  return ~(n = f(t)) && (i = a[n] = l[n](t)), {
    c() {
      e = O("div"), i && i.c(), m(e, "class", "svelte-select-list svelte-18e845"), pe(e, "prefloat", t[28]);
    },
    m(c, u) {
      B(c, e, u), ~n && a[n].m(e, null), t[91](e), r = !0, o || (s = [
        _i(t[49].call(null, e)),
        X(e, "scroll", t[41]),
        X(e, "pointerdown", or(t[50])),
        X(e, "pointerup", Le(or(t[86])))
      ], o = !0);
    },
    p(c, u) {
      let h = n;
      n = f(c), n === h ? ~n && a[n].p(c, u) : (i && (me(), E(a[h], 1, 1, () => {
        a[h] = null;
      }), ge()), ~n ? (i = a[n], i ? i.p(c, u) : (i = a[n] = l[n](c), i.c()), k(i, 1), i.m(e, null)) : i = null), (!r || u[0] & 268435456) && pe(e, "prefloat", c[28]);
    },
    i(c) {
      r || (k(i), r = !0);
    },
    o(c) {
      E(i), r = !1;
    },
    d(c) {
      c && j(e), ~n && a[n].d(), t[91](null), o = !1, nt(s);
    }
  };
}
function dD(t) {
  let e;
  const n = t[81].empty, i = Sn(n, t, t[80], Mb), r = i || gD();
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i && i.p && (!e || s[2] & 262144) && An(
        i,
        n,
        o,
        o[80],
        e ? Mn(n, o[80], s, cD) : On(o[80]),
        Mb
      );
    },
    i(o) {
      e || (k(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function pD(t) {
  let e, n, i = t[24], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Pb(Ab(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 1627402376 | l[1] & 28672 | l[2] & 262144) {
        i = s[24];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = Ab(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = Pb(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function mD(t) {
  let e;
  const n = t[81].list, i = Sn(n, t, t[80], Tb);
  return {
    c() {
      i && i.c();
    },
    m(r, o) {
      i && i.m(r, o), e = !0;
    },
    p(r, o) {
      i && i.p && (!e || o[0] & 16777216 | o[2] & 262144) && An(
        i,
        n,
        r,
        r[80],
        e ? Mn(n, r[80], o, hD) : On(r[80]),
        Tb
      );
    },
    i(r) {
      e || (k(i, r), e = !0);
    },
    o(r) {
      E(i, r), e = !1;
    },
    d(r) {
      i && i.d(r);
    }
  };
}
function gD(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = "No options", m(e, "class", "empty svelte-18e845");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function bD(t) {
  var i;
  let e = ((i = t[128]) == null ? void 0 : i[t[12]]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(r, o) {
      B(r, n, o);
    },
    p(r, o) {
      var s;
      o[0] & 16781312 && e !== (e = ((s = r[128]) == null ? void 0 : s[r[12]]) + "") && Pe(n, e);
    },
    d(r) {
      r && j(n);
    }
  };
}
function Pb(t) {
  let e, n, i, r, o, s, l, a;
  const f = t[81].item, c = Sn(f, t, t[80], Ob), u = c || bD(t);
  function h() {
    return t[88](t[130]);
  }
  function d() {
    return t[89](t[130]);
  }
  function p() {
    return t[90](t[128], t[130]);
  }
  return {
    c() {
      var g;
      e = O("div"), n = O("div"), u && u.c(), o = q(), m(n, "class", "item svelte-18e845"), pe(n, "list-group-title", t[128].groupHeader), pe(n, "active", t[45](t[128], t[3], t[13])), pe(n, "first", TD(t[130])), pe(n, "hover", t[7] === t[130]), pe(n, "group-item", t[128].groupItem), pe(n, "not-selectable", ((g = t[128]) == null ? void 0 : g.selectable) === !1), m(e, "class", "list-item svelte-18e845"), m(e, "tabindex", "-1");
    },
    m(g, _) {
      B(g, e, _), w(e, n), u && u.m(n, null), w(e, o), s = !0, l || (a = [
        _i(i = t[46].call(null, n, {
          scroll: t[45](t[128], t[3], t[13]),
          listDom: t[30]
        })),
        _i(r = t[47].call(null, n, {
          scroll: t[29] === t[130],
          listDom: t[30]
        })),
        X(e, "mouseover", h),
        X(e, "focus", d),
        X(e, "click", Le(p)),
        X(e, "keydown", Le(or(t[87])))
      ], l = !0);
    },
    p(g, _) {
      var b;
      t = g, c ? c.p && (!s || _[0] & 16777216 | _[2] & 262144) && An(
        c,
        f,
        t,
        t[80],
        s ? Mn(f, t[80], _, uD) : On(t[80]),
        Ob
      ) : u && u.p && (!s || _[0] & 16781312) && u.p(t, s ? _ : [-1, -1, -1, -1, -1]), i && Fn(i.update) && _[0] & 1090527240 && i.update.call(null, {
        scroll: t[45](t[128], t[3], t[13]),
        listDom: t[30]
      }), r && Fn(r.update) && _[0] & 1610612736 && r.update.call(null, {
        scroll: t[29] === t[130],
        listDom: t[30]
      }), (!s || _[0] & 16777216) && pe(n, "list-group-title", t[128].groupHeader), (!s || _[0] & 16785416 | _[1] & 16384) && pe(n, "active", t[45](t[128], t[3], t[13])), (!s || _[0] & 128) && pe(n, "hover", t[7] === t[130]), (!s || _[0] & 16777216) && pe(n, "group-item", t[128].groupItem), (!s || _[0] & 16777216) && pe(n, "not-selectable", ((b = t[128]) == null ? void 0 : b.selectable) === !1);
    },
    i(g) {
      s || (k(u, g), s = !0);
    },
    o(g) {
      E(u, g), s = !1;
    },
    d(g) {
      g && j(e), u && u.d(g), l = !1, nt(a);
    }
  };
}
function Rb(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = O("span"), n = le(t[32]), i = q(), r = O("span"), o = le(t[31]), m(e, "id", "aria-selection"), m(e, "class", "svelte-18e845"), m(r, "id", "aria-context"), m(r, "class", "svelte-18e845");
    },
    m(s, l) {
      B(s, e, l), w(e, n), B(s, i, l), B(s, r, l), w(r, o);
    },
    p(s, l) {
      l[1] & 2 && Pe(n, s[32]), l[1] & 1 && Pe(o, s[31]);
    },
    d(s) {
      s && j(e), s && j(i), s && j(r);
    }
  };
}
function Ib(t) {
  let e, n, i, r;
  const o = [yD, _D], s = [];
  function l(a, f) {
    return a[9] ? 0 : 1;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = tt();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), ge(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), k(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (k(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function _D(t) {
  let e, n;
  const i = t[81].selection, r = Sn(i, t, t[80], wb), o = r || wD(t);
  return {
    c() {
      e = O("div"), o && o.c(), m(e, "class", "selected-item svelte-18e845"), pe(e, "hide-selected-item", t[35]);
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r ? r.p && (!n || l[0] & 8 | l[2] & 262144) && An(
        r,
        i,
        s,
        s[80],
        n ? Mn(i, s[80], l, sD) : On(s[80]),
        wb
      ) : o && o.p && (!n || l[0] & 4104) && o.p(s, n ? l : [-1, -1, -1, -1, -1]), (!n || l[1] & 16) && pe(e, "hide-selected-item", s[35]);
    },
    i(s) {
      n || (k(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function yD(t) {
  let e, n, i = t[3], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Db(vb(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 67116040 | l[1] & 32 | l[2] & 262144) {
        i = s[3];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = vb(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = Db(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function wD(t) {
  let e = t[3][t[12]] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[3][i[12]] + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function vD(t) {
  let e = t[128][t[12]] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[128][i[12]] + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function Nb(t) {
  let e, n, i, r;
  const o = t[81]["multi-clear-icon"], s = Sn(o, t, t[80], kb), l = s || kD();
  function a() {
    return t[92](t[130]);
  }
  return {
    c() {
      e = O("div"), l && l.c(), m(e, "class", "multi-item-clear svelte-18e845");
    },
    m(f, c) {
      B(f, e, c), l && l.m(e, null), n = !0, i || (r = [
        X(e, "pointerdown", Le(or(t[84]))),
        X(e, "click", a),
        X(e, "keydown", Le(or(t[85])))
      ], i = !0);
    },
    p(f, c) {
      t = f, s && s.p && (!n || c[2] & 262144) && An(
        s,
        o,
        t,
        t[80],
        n ? Mn(o, t[80], c, lD) : On(t[80]),
        kb
      );
    },
    i(f) {
      n || (k(l, f), n = !0);
    },
    o(f) {
      E(l, f), n = !1;
    },
    d(f) {
      f && j(e), l && l.d(f), i = !1, nt(r);
    }
  };
}
function kD(t) {
  let e, n;
  return e = new iu({}), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Db(t) {
  let e, n, i, r, o, s, l;
  const a = t[81].selection, f = Sn(a, t, t[80], Cb), c = f || vD(t);
  let u = !t[11] && !t[10] && iu && Nb(t);
  function h() {
    return t[93](t[130]);
  }
  return {
    c() {
      e = O("div"), n = O("span"), c && c.c(), i = q(), u && u.c(), r = q(), m(n, "class", "multi-item-text svelte-18e845"), m(e, "class", "multi-item svelte-18e845"), pe(e, "active", t[26] === t[130]), pe(e, "disabled", t[11]);
    },
    m(d, p) {
      B(d, e, p), w(e, n), c && c.m(n, null), w(e, i), u && u.m(e, null), w(e, r), o = !0, s || (l = [
        X(e, "click", or(h)),
        X(e, "keydown", Le(or(t[83])))
      ], s = !0);
    },
    p(d, p) {
      t = d, f ? f.p && (!o || p[0] & 8 | p[2] & 262144) && An(
        f,
        a,
        t,
        t[80],
        o ? Mn(a, t[80], p, aD) : On(t[80]),
        Cb
      ) : c && c.p && (!o || p[0] & 4104) && c.p(t, o ? p : [-1, -1, -1, -1, -1]), !t[11] && !t[10] && iu ? u ? (u.p(t, p), p[0] & 3072 && k(u, 1)) : (u = Nb(t), u.c(), k(u, 1), u.m(e, r)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), (!o || p[0] & 67108864) && pe(e, "active", t[26] === t[130]), (!o || p[0] & 2048) && pe(e, "disabled", t[11]);
    },
    i(d) {
      o || (k(c, d), k(u), o = !0);
    },
    o(d) {
      E(c, d), E(u), o = !1;
    },
    d(d) {
      d && j(e), c && c.d(d), u && u.d(), s = !1, nt(l);
    }
  };
}
function jb(t) {
  let e, n;
  const i = t[81]["loading-icon"], r = Sn(i, t, t[80], yb), o = r || CD();
  return {
    c() {
      e = O("div"), o && o.c(), m(e, "class", "icon loading svelte-18e845"), m(e, "aria-hidden", "true");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r && r.p && (!n || l[2] & 262144) && An(
        r,
        i,
        s,
        s[80],
        n ? Mn(i, s[80], l, oD) : On(s[80]),
        yb
      );
    },
    i(s) {
      n || (k(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function CD(t) {
  let e, n;
  return e = new tD({}), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Bb(t) {
  let e, n, i, r;
  const o = t[81]["clear-icon"], s = Sn(o, t, t[80], _b), l = s || SD();
  return {
    c() {
      e = O("button"), l && l.c(), m(e, "class", "icon clear-select svelte-18e845"), m(e, "tabindex", "0");
    },
    m(a, f) {
      B(a, e, f), l && l.m(e, null), n = !0, i || (r = [
        X(e, "click", Le(or(t[22]))),
        X(e, "pointerdown", Le(or(t[82])))
      ], i = !0);
    },
    p(a, f) {
      s && s.p && (!n || f[2] & 262144) && An(
        s,
        o,
        a,
        a[80],
        n ? Mn(o, a[80], f, rD) : On(a[80]),
        _b
      );
    },
    i(a) {
      n || (k(l, a), n = !0);
    },
    o(a) {
      E(l, a), n = !1;
    },
    d(a) {
      a && j(e), l && l.d(a), i = !1, nt(r);
    }
  };
}
function SD(t) {
  let e, n;
  return e = new iu({}), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Lb(t) {
  let e, n;
  const i = t[81]["chevron-icon"], r = Sn(i, t, t[80], bb), o = r || MD();
  return {
    c() {
      e = O("div"), o && o.c(), m(e, "class", "icon chevron svelte-18e845"), m(e, "aria-hidden", "true");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r && r.p && (!n || l[0] & 64 | l[2] & 262144) && An(
        r,
        i,
        s,
        s[80],
        n ? Mn(i, s[80], l, iD) : On(s[80]),
        bb
      );
    },
    i(s) {
      n || (k(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function MD(t) {
  let e, n;
  return e = new ZN({}), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function xb(t) {
  let e;
  const n = t[81].required, i = Sn(n, t, t[80], gb), r = i || AD();
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i && i.p && (!e || s[0] & 8 | s[2] & 262144) && An(
        i,
        n,
        o,
        o[80],
        e ? Mn(n, o[80], s, nD) : On(o[80]),
        gb
      );
    },
    i(o) {
      e || (k(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function AD(t) {
  let e;
  return {
    c() {
      e = O("select"), m(e, "class", "required svelte-18e845"), e.required = !0;
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function OD(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S = t[6] && Eb(t), D = t[2] && Rb(t);
  const x = t[81].prepend, V = Sn(x, t, t[80], Sb);
  let R = t[25] && Ib(t), W = [
    {
      readOnly: c = !t[17]
    },
    t[27],
    { placeholder: t[33] },
    { style: t[18] },
    { disabled: t[11] }
  ], U = {};
  for (let N = 0; N < W.length; N += 1)
    U = Jo(U, W[N]);
  let C = t[5] && jb(t), L = t[34] && Bb(t), I = t[20] && Lb(t), H = t[16] && (!t[3] || t[3].length === 0) && xb(t);
  return {
    c() {
      e = O("div"), S && S.c(), n = q(), i = O("span"), D && D.c(), r = q(), o = O("div"), V && V.c(), s = q(), l = O("div"), R && R.c(), a = q(), f = O("input"), u = q(), h = O("div"), C && C.c(), d = q(), L && L.c(), p = q(), I && I.c(), g = q(), _ = O("input"), y = q(), H && H.c(), m(i, "aria-live", "polite"), m(i, "aria-atomic", "false"), m(i, "aria-relevant", "additions text"), m(i, "class", "a11y-text svelte-18e845"), m(o, "class", "prepend svelte-18e845"), c1(f, U), pe(f, "svelte-18e845", !0), m(l, "class", "value-container svelte-18e845"), m(h, "class", "indicators svelte-18e845"), m(_, "name", t[8]), m(_, "type", "hidden"), _.value = b = t[3] ? JSON.stringify(t[3]) : null, m(_, "class", "svelte-18e845"), m(e, "class", v = "svelte-select " + t[21] + " svelte-18e845"), m(e, "style", t[14]), pe(e, "multi", t[9]), pe(e, "disabled", t[11]), pe(e, "focused", t[2]), pe(e, "list-open", t[6]), pe(e, "show-chevron", t[20]), pe(e, "error", t[15]);
    },
    m(N, T) {
      B(N, e, T), S && S.m(e, null), w(e, n), w(e, i), D && D.m(i, null), w(e, r), w(e, o), V && V.m(o, null), w(e, s), w(e, l), R && R.m(l, null), w(l, a), w(l, f), f.autofocus && f.focus(), t[94](f), No(f, t[4]), w(e, u), w(e, h), C && C.m(h, null), w(h, d), L && L.m(h, null), w(h, p), I && I.m(h, null), w(e, g), w(e, _), w(e, y), H && H.m(e, null), t[96](e), M = !0, A || (P = [
        X(window, "click", t[42]),
        X(window, "keydown", t[37]),
        X(f, "keydown", t[37]),
        X(f, "blur", t[39]),
        X(f, "focus", t[38]),
        X(f, "input", t[95]),
        X(e, "pointerup", or(t[40])),
        _i(t[48].call(null, e))
      ], A = !0);
    },
    p(N, T) {
      N[6] ? S ? (S.p(N, T), T[0] & 64 && k(S, 1)) : (S = Eb(N), S.c(), k(S, 1), S.m(e, n)) : S && (me(), E(S, 1, 1, () => {
        S = null;
      }), ge()), N[2] ? D ? D.p(N, T) : (D = Rb(N), D.c(), D.m(i, null)) : D && (D.d(1), D = null), V && V.p && (!M || T[2] & 262144) && An(
        V,
        x,
        N,
        N[80],
        M ? Mn(x, N[80], T, fD) : On(N[80]),
        Sb
      ), N[25] ? R ? (R.p(N, T), T[0] & 33554432 && k(R, 1)) : (R = Ib(N), R.c(), k(R, 1), R.m(l, a)) : R && (me(), E(R, 1, 1, () => {
        R = null;
      }), ge()), c1(f, U = Ns(W, [
        (!M || T[0] & 131072 && c !== (c = !N[17])) && { readOnly: c },
        T[0] & 134217728 && N[27],
        (!M || T[1] & 4) && { placeholder: N[33] },
        (!M || T[0] & 262144) && { style: N[18] },
        (!M || T[0] & 2048) && { disabled: N[11] }
      ])), T[0] & 16 && f.value !== N[4] && No(f, N[4]), pe(f, "svelte-18e845", !0), N[5] ? C ? (C.p(N, T), T[0] & 32 && k(C, 1)) : (C = jb(N), C.c(), k(C, 1), C.m(h, d)) : C && (me(), E(C, 1, 1, () => {
        C = null;
      }), ge()), N[34] ? L ? (L.p(N, T), T[1] & 8 && k(L, 1)) : (L = Bb(N), L.c(), k(L, 1), L.m(h, p)) : L && (me(), E(L, 1, 1, () => {
        L = null;
      }), ge()), N[20] ? I ? (I.p(N, T), T[0] & 1048576 && k(I, 1)) : (I = Lb(N), I.c(), k(I, 1), I.m(h, null)) : I && (me(), E(I, 1, 1, () => {
        I = null;
      }), ge()), (!M || T[0] & 256) && m(_, "name", N[8]), (!M || T[0] & 8 && b !== (b = N[3] ? JSON.stringify(N[3]) : null)) && (_.value = b), N[16] && (!N[3] || N[3].length === 0) ? H ? (H.p(N, T), T[0] & 65544 && k(H, 1)) : (H = xb(N), H.c(), k(H, 1), H.m(e, null)) : H && (me(), E(H, 1, 1, () => {
        H = null;
      }), ge()), (!M || T[0] & 2097152 && v !== (v = "svelte-select " + N[21] + " svelte-18e845")) && m(e, "class", v), (!M || T[0] & 16384) && m(e, "style", N[14]), (!M || T[0] & 2097664) && pe(e, "multi", N[9]), (!M || T[0] & 2099200) && pe(e, "disabled", N[11]), (!M || T[0] & 2097156) && pe(e, "focused", N[2]), (!M || T[0] & 2097216) && pe(e, "list-open", N[6]), (!M || T[0] & 3145728) && pe(e, "show-chevron", N[20]), (!M || T[0] & 2129920) && pe(e, "error", N[15]);
    },
    i(N) {
      M || (k(S), k(V, N), k(R), k(C), k(L), k(I), k(H), M = !0);
    },
    o(N) {
      E(S), E(V, N), E(R), E(C), E(L), E(I), E(H), M = !1;
    },
    d(N) {
      N && j(e), S && S.d(), D && D.d(), V && V.d(N), R && R.d(), t[94](null), C && C.d(), L && L.d(), I && I.d(), H && H.d(), t[96](null), A = !1, nt(P);
    }
  };
}
function zb(t) {
  return t.map((e, n) => ({ index: n, value: e, label: `${e}` }));
}
function TD(t) {
  return t === 0;
}
function ED(t) {
  return t.groupHeader && t.selectable || t.selectable || !t.hasOwnProperty("selectable");
}
function PD(t, e, n) {
  let i, r, o, s, l, a, f, c, u, { $$slots: h = {}, $$scope: d } = e;
  const p = y8(h), g = Is();
  let { justValue: _ = null } = e, { filter: b = XN } = e, { getItems: y = QN } = e, { id: v = null } = e, { name: M = null } = e, { container: A = void 0 } = e, { input: P = void 0 } = e, { multiple: S = !1 } = e, { multiFullItemClearable: D = !1 } = e, { disabled: x = !1 } = e, { focused: V = !1 } = e, { value: R = null } = e, { filterText: W = "" } = e, { placeholder: U = "Please select" } = e, { placeholderAlwaysShow: C = !1 } = e, { items: L = null } = e, { label: I = "label" } = e, { itemFilter: H = (G, Je) => `${G}`.toLowerCase().includes(Je.toLowerCase()) } = e, { groupBy: N = void 0 } = e, { groupFilter: T = (G) => G } = e, { groupHeaderSelectable: K = !1 } = e, { itemId: ne = "value" } = e, { loadOptions: z = void 0 } = e, { containerStyles: Y = "" } = e, { hasError: $ = !1 } = e, { filterSelectedItems: Q = !0 } = e, { required: Te = !1 } = e, { createGroupHeaderItem: Se = (G, Je) => ({ value: G, [I]: G }) } = e;
  const Fe = () => f;
  let { searchable: Z = !0 } = e, { inputStyles: Ce = "" } = e, { clearable: Ze = !0 } = e, { loading: be = !1 } = e, { listOpen: te = !1 } = e, ke, { debounce: Ue = (G, Je = 1) => {
    clearTimeout(ke), ke = setTimeout(G, Je);
  } } = e, { debounceWait: de = 300 } = e, { hideEmptyState: Ve = !1 } = e, { inputAttributes: De = {} } = e, { listAutoWidth: He = !0 } = e, { showChevron: at = !1 } = e, { listOffset: mt = 5 } = e, { hoverItemIndex: Ye = 0 } = e, { floatingConfig: Me = {} } = e, { class: ae = "" } = e, ze, ft, bt, gn;
  function Un() {
    if (typeof R == "string") {
      let G = L.find((Je) => Je[ne] === R);
      n(3, R = G || { [ne]: R, label: R });
    } else
      S && Array.isArray(R) && R.length > 0 && n(3, R = R.map((G) => typeof G == "string" ? { value: G, label: G } : G));
  }
  let ot;
  function Gt() {
    n(27, ot = Object.assign(
      {
        autocapitalize: "none",
        autocomplete: "off",
        autocorrect: "off",
        spellcheck: !1,
        tabindex: 0,
        type: "text",
        "aria-autocomplete": "list"
      },
      De
    )), v && n(27, ot.id = v, ot), Z || n(27, ot.readonly = !0, ot);
  }
  function rn(G) {
    const Je = [], an = {};
    G.forEach((go) => {
      const pi = N(go);
      Je.includes(pi) || (Je.push(pi), an[pi] = [], pi && an[pi].push(Object.assign(Se(pi, go), {
        id: pi,
        groupHeader: !0,
        selectable: K
      }))), an[pi].push(Object.assign({ groupItem: !!pi }, go));
    });
    const qi = [];
    return T(Je).forEach((go) => {
      an[go] && qi.push(...an[go]);
    }), qi;
  }
  function ri() {
    if (S) {
      JSON.stringify(R) !== JSON.stringify(ft) && Rt() && g("input", R);
      return;
    }
    (!ft || JSON.stringify(R[ne]) !== JSON.stringify(ft[ne])) && g("input", R);
  }
  function se() {
    R && (Array.isArray(R) ? n(3, R = [...R]) : n(3, R = [R]));
  }
  function ve() {
    R && n(3, R = null);
  }
  function ce() {
    const G = f.findIndex((Je) => Je[ne] === R[ne]);
    qt(G, !0);
  }
  function _t(G) {
    g("hoverItem", G);
  }
  function qt(G = 0, Je) {
    n(7, Ye = G), !Je && N && f[Ye] && !f[Ye].selectable && Wi(1);
  }
  function ct() {
    !z && W.length === 0 || (z ? Ue(
      async function() {
        n(5, be = !0);
        let G = await y({
          dispatch: g,
          loadOptions: z,
          convertStringItemsToObjects: zb,
          filterText: W
        });
        G ? (n(5, be = G.loading), n(6, te = te ? G.listOpen : W.length > 0), n(2, V = te && G.focused), n(52, L = N ? rn(G.filteredItems) : G.filteredItems)) : (n(5, be = !1), n(2, V = !0), n(6, te = !0));
      },
      de
    ) : (n(6, te = !0), S && n(26, ze = void 0)));
  }
  function Ft(G) {
    te && g("filter", G);
  }
  E8(async () => {
    n(77, ft = R), n(78, bt = W), n(79, gn = S);
  });
  function bn() {
    return S ? R ? R.map((G) => G[ne]) : null : R && R[ne];
  }
  function Rt() {
    let G = !0;
    if (R) {
      const Je = [], an = [];
      R.forEach((qi) => {
        Je.includes(qi[ne]) ? G = !1 : (Je.push(qi[ne]), an.push(qi));
      }), G || n(3, R = an);
    }
    return G;
  }
  function It(G) {
    let Je = G ? G[ne] : R[ne];
    return L.find((an) => an[ne] === Je);
  }
  function Nt(G) {
    !G || G.length === 0 || G.some((Je) => typeof Je != "object") || !R || (S ? R.some((Je) => !Je || !Je[ne]) : !R[ne]) || (Array.isArray(R) ? n(3, R = R.map((Je) => It(Je) || Je)) : n(3, R = It() || R));
  }
  async function Et(G) {
    const Je = R[G];
    R.length === 1 ? n(3, R = void 0) : n(3, R = R.filter((an) => an !== Je)), g("clear", Je);
  }
  function xt(G) {
    if (V)
      switch (G.stopPropagation(), G.key) {
        case "Escape":
          G.preventDefault(), zn();
          break;
        case "Enter":
          if (G.preventDefault(), te) {
            if (f.length === 0)
              break;
            const Je = f[Ye];
            if (R && !S && R[ne] === Je[ne]) {
              zn();
              break;
            } else
              ho(f[Ye]);
          }
          break;
        case "ArrowDown":
          G.preventDefault(), te ? Wi(1) : (n(6, te = !0), n(26, ze = void 0));
          break;
        case "ArrowUp":
          G.preventDefault(), te ? Wi(-1) : (n(6, te = !0), n(26, ze = void 0));
          break;
        case "Tab":
          if (te && V) {
            if (f.length === 0 || R && R[ne] === f[Ye][ne])
              return zn();
            G.preventDefault(), ho(f[Ye]), zn();
          }
          break;
        case "Backspace":
          if (!S || W.length > 0)
            return;
          if (S && R && R.length > 0) {
            if (Et(ze !== void 0 ? ze : R.length - 1), ze === 0 || ze === void 0)
              break;
            n(26, ze = R.length > ze ? ze - 1 : void 0);
          }
          break;
        case "ArrowLeft":
          if (!R || !S || W.length > 0)
            return;
          ze === void 0 ? n(26, ze = R.length - 1) : R.length > ze && ze !== 0 && n(26, ze -= 1);
          break;
        case "ArrowRight":
          if (!R || !S || W.length > 0 || ze === void 0)
            return;
          ze === R.length - 1 ? n(26, ze = void 0) : ze < R.length - 1 && n(26, ze += 1);
          break;
      }
  }
  function on(G) {
    G && g("focus", G), P.focus(), n(2, V = !0);
  }
  async function sn(G) {
    pr || Kr || (te || V) && (g("blur", G), zn(), n(2, V = !1), n(26, ze = void 0), P.blur());
  }
  function vn() {
    x || (n(6, te = !te), te && !V && on());
  }
  function ln() {
    n(3, R = void 0), zn(), g("clear", R), on();
  }
  Ei(() => {
    te && n(2, V = !0), V && P && P.focus();
  });
  function oi(G) {
    if (G) {
      n(4, W = "");
      const Je = Object.assign({}, G);
      (!Je.groupHeader || Je.selectable) && (S ? n(3, R = R ? R.concat([Je]) : [Je]) : n(3, R = Je), n(3, R), setTimeout(() => {
        zn(), n(26, ze = void 0), g("change", R);
      }));
    }
  }
  function zn() {
    n(4, W = ""), n(6, te = !1);
  }
  let { ariaValues: ue = (G) => `Option ${G}, selected.` } = e, { ariaListOpen: _e = (G, Je) => `You are currently focused on option ${G}. There are ${Je} results available.` } = e, { ariaFocused: Ee = () => "Select is focused, type to refine list, press down to open the menu." } = e;
  function dt(G) {
    let Je;
    return G && R.length > 0 ? Je = R.map((an) => an[I]).join(", ") : Je = R[I], ue(Je);
  }
  function Ht() {
    if (!f || f.length === 0)
      return "";
    let G = f[Ye];
    if (te && G) {
      let Je = f ? f.length : 0;
      return _e(G[I], Je);
    } else
      return Ee();
  }
  let Ct = null, si;
  function dr() {
    clearTimeout(si), si = setTimeout(
      () => {
        pr = !1;
      },
      100
    );
  }
  function uo(G) {
    A && !A.contains(G.target) && !(Ct != null && Ct.contains(G.target)) && sn();
  }
  Br(() => {
    Ct == null || Ct.remove();
  });
  let pr = !1;
  function ho(G) {
    G.isCreator || G.selectable === !1 || oi(G);
  }
  function qr(G) {
    pr || n(7, Ye = G);
  }
  function Jr(G) {
    const { item: Je, i: an } = G;
    if ((Je == null ? void 0 : Je.selectable) !== !1) {
      if (R && !S && R[ne] === Je[ne])
        return zn();
      ED(Je) && (n(7, Ye = an), ho(Je)), Kr = !1;
    }
  }
  function Wi(G) {
    if (f.filter((qi) => !Object.hasOwn(qi, "selectable") || qi.selectable === !0).length === 0)
      return n(7, Ye = 0);
    G > 0 && Ye === f.length - 1 ? n(7, Ye = 0) : G < 0 && Ye === 0 ? n(7, Ye = f.length - 1) : n(7, Ye = Ye + G);
    const an = f[Ye];
    if (an && an.selectable === !1) {
      (G === 1 || G === -1) && Wi(G);
      return;
    }
  }
  function Gl(G, Je, an) {
    if (!S)
      return Je && Je[an] === G[an];
  }
  const Xl = ts, es = ts;
  function ts(G) {
    return {
      update(Je) {
        Je.scroll && (dr(), G.scrollIntoView({
          behavior: "auto",
          block: "nearest",
          inline: "start"
        }));
      }
    };
  }
  function xs() {
    const { width: G } = A.getBoundingClientRect();
    n(23, Ct.style.width = He ? G + "px" : "auto", Ct);
  }
  let zs = {
    strategy: "absolute",
    placement: "bottom-start",
    middleware: [IN(mt), PN(), DN()],
    autoUpdate: !1
  };
  const [Ui, po, mo] = GN(zs);
  let vi = !0;
  function In(G, Je) {
    if (!G || !Je)
      return n(28, vi = !0);
    setTimeout(
      () => {
        n(28, vi = !1);
      },
      0
    );
  }
  let Kr = !1;
  function J() {
    Kr = !0;
  }
  function ye(G) {
    zt.call(this, t, G);
  }
  function qe(G) {
    zt.call(this, t, G);
  }
  function Ke(G) {
    zt.call(this, t, G);
  }
  function st(G) {
    zt.call(this, t, G);
  }
  function Jt(G) {
    zt.call(this, t, G);
  }
  function _n(G) {
    zt.call(this, t, G);
  }
  const Nn = (G) => qr(G), Wt = (G) => qr(G), qn = (G, Je) => Jr({ item: G, i: Je });
  function di(G) {
    ht[G ? "unshift" : "push"](() => {
      Ct = G, n(23, Ct);
    });
  }
  const Vs = (G) => Et(G), Fs = (G) => D ? Et(G) : {};
  function Kh(G) {
    ht[G ? "unshift" : "push"](() => {
      P = G, n(1, P);
    });
  }
  function Gh() {
    W = this.value, n(4, W);
  }
  function Xh(G) {
    ht[G ? "unshift" : "push"](() => {
      A = G, n(0, A);
    });
  }
  return t.$$set = (G) => {
    "justValue" in G && n(53, _ = G.justValue), "filter" in G && n(54, b = G.filter), "getItems" in G && n(55, y = G.getItems), "id" in G && n(56, v = G.id), "name" in G && n(8, M = G.name), "container" in G && n(0, A = G.container), "input" in G && n(1, P = G.input), "multiple" in G && n(9, S = G.multiple), "multiFullItemClearable" in G && n(10, D = G.multiFullItemClearable), "disabled" in G && n(11, x = G.disabled), "focused" in G && n(2, V = G.focused), "value" in G && n(3, R = G.value), "filterText" in G && n(4, W = G.filterText), "placeholder" in G && n(57, U = G.placeholder), "placeholderAlwaysShow" in G && n(58, C = G.placeholderAlwaysShow), "items" in G && n(52, L = G.items), "label" in G && n(12, I = G.label), "itemFilter" in G && n(59, H = G.itemFilter), "groupBy" in G && n(60, N = G.groupBy), "groupFilter" in G && n(61, T = G.groupFilter), "groupHeaderSelectable" in G && n(62, K = G.groupHeaderSelectable), "itemId" in G && n(13, ne = G.itemId), "loadOptions" in G && n(63, z = G.loadOptions), "containerStyles" in G && n(14, Y = G.containerStyles), "hasError" in G && n(15, $ = G.hasError), "filterSelectedItems" in G && n(64, Q = G.filterSelectedItems), "required" in G && n(16, Te = G.required), "createGroupHeaderItem" in G && n(65, Se = G.createGroupHeaderItem), "searchable" in G && n(17, Z = G.searchable), "inputStyles" in G && n(18, Ce = G.inputStyles), "clearable" in G && n(67, Ze = G.clearable), "loading" in G && n(5, be = G.loading), "listOpen" in G && n(6, te = G.listOpen), "debounce" in G && n(68, Ue = G.debounce), "debounceWait" in G && n(69, de = G.debounceWait), "hideEmptyState" in G && n(19, Ve = G.hideEmptyState), "inputAttributes" in G && n(70, De = G.inputAttributes), "listAutoWidth" in G && n(71, He = G.listAutoWidth), "showChevron" in G && n(20, at = G.showChevron), "listOffset" in G && n(72, mt = G.listOffset), "hoverItemIndex" in G && n(7, Ye = G.hoverItemIndex), "floatingConfig" in G && n(73, Me = G.floatingConfig), "class" in G && n(21, ae = G.class), "ariaValues" in G && n(74, ue = G.ariaValues), "ariaListOpen" in G && n(75, _e = G.ariaListOpen), "ariaFocused" in G && n(76, Ee = G.ariaFocused), "$$scope" in G && n(80, d = G.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 | t.$$.dirty[1] & 2097152 && R && Un(), t.$$.dirty[0] & 131072 | t.$$.dirty[2] & 256 && (De || !Z) && Gt(), t.$$.dirty[0] & 512 && S && se(), t.$$.dirty[0] & 512 | t.$$.dirty[2] & 131072 && gn && !S && ve(), t.$$.dirty[0] & 520 && S && R && R.length > 1 && Rt(), t.$$.dirty[0] & 8 && R && ri(), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 32768 && !R && S && ft && g("input", R), t.$$.dirty[0] & 6 && !V && P && zn(), t.$$.dirty[0] & 16 | t.$$.dirty[2] & 65536 && W !== bt && ct(), t.$$.dirty[0] & 12824 | t.$$.dirty[1] & 815792128 | t.$$.dirty[2] & 6 && n(24, f = b({
      loadOptions: z,
      filterText: W,
      items: L,
      multiple: S,
      value: R,
      itemId: ne,
      groupBy: N,
      label: I,
      filterSelectedItems: Q,
      itemFilter: H,
      convertStringItemsToObjects: zb,
      filterGroupedItems: rn
    })), t.$$.dirty[0] & 16777800 && !S && te && R && f && ce(), t.$$.dirty[0] & 576 && te && S && n(7, Ye = 0), t.$$.dirty[0] & 128 && _t(Ye), t.$$.dirty[0] & 520 && n(25, i = S ? R && R.length > 0 : R), t.$$.dirty[0] & 33554448 && n(35, r = i && W.length > 0), t.$$.dirty[0] & 33556512 | t.$$.dirty[2] & 32 && n(34, o = i && Ze && !x && !be), t.$$.dirty[0] & 520 | t.$$.dirty[1] & 201326592 && n(33, s = C && S ? U : R ? "" : U), t.$$.dirty[0] & 520 && n(32, l = R ? dt(S) : ""), t.$$.dirty[0] & 16777412 && n(31, a = Ht()), t.$$.dirty[1] & 2097152 && Nt(L), t.$$.dirty[0] & 8712 && n(53, _ = bn()), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 32768 && !S && ft && !R && g("input", R), t.$$.dirty[0] & 16777800 && te && f && !S && !R && qt(), t.$$.dirty[0] & 16777216 && Ft(f), t.$$.dirty[2] & 2048 && Me && mo(Object.assign(zs, Me)), t.$$.dirty[0] & 8388608 && n(30, c = !!Ct), t.$$.dirty[0] & 8388672 && In(Ct, te), t.$$.dirty[0] & 8388673 && te && A && Ct && xs(), t.$$.dirty[0] & 128 && n(29, u = Ye);
  }, [
    A,
    P,
    V,
    R,
    W,
    be,
    te,
    Ye,
    M,
    S,
    D,
    x,
    I,
    ne,
    Y,
    $,
    Te,
    Z,
    Ce,
    Ve,
    at,
    ae,
    ln,
    Ct,
    f,
    i,
    ze,
    ot,
    vi,
    u,
    c,
    a,
    l,
    s,
    o,
    r,
    Et,
    xt,
    on,
    sn,
    vn,
    dr,
    uo,
    qr,
    Jr,
    Gl,
    Xl,
    es,
    Ui,
    po,
    J,
    p,
    L,
    _,
    b,
    y,
    v,
    U,
    C,
    H,
    N,
    T,
    K,
    z,
    Q,
    Se,
    Fe,
    Ze,
    Ue,
    de,
    De,
    He,
    mt,
    Me,
    ue,
    _e,
    Ee,
    ft,
    bt,
    gn,
    d,
    h,
    ye,
    qe,
    Ke,
    st,
    Jt,
    _n,
    Nn,
    Wt,
    qn,
    di,
    Vs,
    Fs,
    Kh,
    Gh,
    Xh
  ];
}
class as extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      PD,
      OD,
      Pt,
      {
        justValue: 53,
        filter: 54,
        getItems: 55,
        id: 56,
        name: 8,
        container: 0,
        input: 1,
        multiple: 9,
        multiFullItemClearable: 10,
        disabled: 11,
        focused: 2,
        value: 3,
        filterText: 4,
        placeholder: 57,
        placeholderAlwaysShow: 58,
        items: 52,
        label: 12,
        itemFilter: 59,
        groupBy: 60,
        groupFilter: 61,
        groupHeaderSelectable: 62,
        itemId: 13,
        loadOptions: 63,
        containerStyles: 14,
        hasError: 15,
        filterSelectedItems: 64,
        required: 16,
        createGroupHeaderItem: 65,
        getFilteredItems: 66,
        searchable: 17,
        inputStyles: 18,
        clearable: 67,
        loading: 5,
        listOpen: 6,
        debounce: 68,
        debounceWait: 69,
        hideEmptyState: 19,
        inputAttributes: 70,
        listAutoWidth: 71,
        showChevron: 20,
        listOffset: 72,
        hoverItemIndex: 7,
        floatingConfig: 73,
        class: 21,
        handleClear: 22,
        ariaValues: 74,
        ariaListOpen: 75,
        ariaFocused: 76
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get getFilteredItems() {
    return this.$$.ctx[66];
  }
  get handleClear() {
    return this.$$.ctx[22];
  }
}
function RD(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L, I, H, N, T;
  function K(Ce) {
    t[16](Ce);
  }
  let ne = {
    class: "jse-filter-path",
    showChevron: !0,
    items: t[6]
  };
  t[0] !== void 0 && (ne.value = t[0]), l = new as({ props: ne }), ht.push(() => Qi(l, "value", K, t[0]));
  function z(Ce) {
    t[17](Ce);
  }
  let Y = {
    class: "jse-filter-relation",
    showChevron: !0,
    items: t[8]
  };
  t[1] !== void 0 && (Y.value = t[1]), c = new as({ props: Y }), ht.push(() => Qi(c, "value", z, t[1]));
  function $(Ce) {
    t[19](Ce);
  }
  let Q = {
    class: "jse-sort-path",
    showChevron: !0,
    items: t[6]
  };
  t[3] !== void 0 && (Q.value = t[3]), M = new as({ props: Q }), ht.push(() => Qi(M, "value", $, t[3]));
  function Te(Ce) {
    t[20](Ce);
  }
  let Se = {
    class: "jse-sort-direction",
    showChevron: !0,
    items: t[9]
  };
  t[4] !== void 0 && (Se.value = t[4]), S = new as({ props: Se }), ht.push(() => Qi(S, "value", Te, t[4]));
  function Fe(Ce) {
    t[21](Ce);
  }
  let Z = {
    class: "jse-projection-paths",
    multiple: !0,
    showChevron: !0,
    items: t[7]
  };
  return t[5] !== void 0 && (Z.value = t[5]), L = new as({ props: Z }), ht.push(() => Qi(L, "value", Fe, t[5])), {
    c() {
      e = O("table"), n = O("tr"), i = O("th"), i.textContent = "Filter", r = q(), o = O("td"), s = O("div"), oe(l.$$.fragment), f = q(), oe(c.$$.fragment), h = q(), d = O("input"), p = q(), g = O("tr"), _ = O("th"), _.textContent = "Sort", b = q(), y = O("td"), v = O("div"), oe(M.$$.fragment), P = q(), oe(S.$$.fragment), x = q(), V = O("tr"), R = O("th"), R.textContent = "Pick", W = q(), U = O("td"), C = O("div"), oe(L.$$.fragment), m(i, "class", "svelte-1vxsn9f"), m(d, "class", "jse-filter-value svelte-1vxsn9f"), m(s, "class", "jse-horizontal svelte-1vxsn9f"), m(_, "class", "svelte-1vxsn9f"), m(v, "class", "jse-horizontal svelte-1vxsn9f"), m(R, "class", "svelte-1vxsn9f"), m(C, "class", "jse-horizontal svelte-1vxsn9f"), m(e, "class", "jse-transform-wizard svelte-1vxsn9f");
    },
    m(Ce, Ze) {
      B(Ce, e, Ze), w(e, n), w(n, i), w(n, r), w(n, o), w(o, s), ie(l, s, null), w(s, f), ie(c, s, null), w(s, h), w(s, d), No(d, t[2]), w(e, p), w(e, g), w(g, _), w(g, b), w(g, y), w(y, v), ie(M, v, null), w(v, P), ie(S, v, null), w(e, x), w(e, V), w(V, R), w(V, W), w(V, U), w(U, C), ie(L, C, null), H = !0, N || (T = X(d, "input", t[18]), N = !0);
    },
    p(Ce, [Ze]) {
      const be = {};
      Ze & 64 && (be.items = Ce[6]), !a && Ze & 1 && (a = !0, be.value = Ce[0], Xi(() => a = !1)), l.$set(be);
      const te = {};
      !u && Ze & 2 && (u = !0, te.value = Ce[1], Xi(() => u = !1)), c.$set(te), Ze & 4 && d.value !== Ce[2] && No(d, Ce[2]);
      const ke = {};
      Ze & 64 && (ke.items = Ce[6]), !A && Ze & 8 && (A = !0, ke.value = Ce[3], Xi(() => A = !1)), M.$set(ke);
      const Ue = {};
      !D && Ze & 16 && (D = !0, Ue.value = Ce[4], Xi(() => D = !1)), S.$set(Ue);
      const de = {};
      Ze & 128 && (de.items = Ce[7]), !I && Ze & 32 && (I = !0, de.value = Ce[5], Xi(() => I = !1)), L.$set(de);
    },
    i(Ce) {
      H || (k(l.$$.fragment, Ce), k(c.$$.fragment, Ce), k(M.$$.fragment, Ce), k(S.$$.fragment, Ce), k(L.$$.fragment, Ce), H = !0);
    },
    o(Ce) {
      E(l.$$.fragment, Ce), E(c.$$.fragment, Ce), E(M.$$.fragment, Ce), E(S.$$.fragment, Ce), E(L.$$.fragment, Ce), H = !1;
    },
    d(Ce) {
      Ce && j(e), re(l), re(c), re(M), re(S), re(L), N = !1, T();
    }
  };
}
function ID(t, e, n) {
  var I, H, N, T, K, ne;
  let i, r, o, s, l;
  const a = Wn("jsoneditor:TransformWizard");
  let { json: f } = e, { queryOptions: c = {} } = e, { onChange: u } = e;
  const h = ["==", "!=", "<", "<=", ">", ">="].map((z) => ({ value: z, label: z })), d = [{ value: "asc", label: "ascending" }, { value: "desc", label: "descending" }];
  let p = (I = c == null ? void 0 : c.filter) != null && I.path ? Js(c.filter.path) : null, g = (H = c == null ? void 0 : c.filter) != null && H.relation ? h.find((z) => z.value === c.filter.relation) : null, _ = ((N = c == null ? void 0 : c.filter) == null ? void 0 : N.value) || "", b = (T = c == null ? void 0 : c.sort) != null && T.path ? Js(c.sort.path) : null, y = (K = c == null ? void 0 : c.sort) != null && K.direction ? d.find((z) => z.value === c.sort.direction) : null, v = (ne = c == null ? void 0 : c.projection) != null && ne.paths ? c.projection.paths.map(Js) : null;
  function M(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.filter) == null ? void 0 : Y.path, z) || (a("changeFilterPath", z), n(10, c = Gi(c, ["filter", "path"], z, !0)), u(c));
  }
  function A(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.filter) == null ? void 0 : Y.relation, z) || (a("changeFilterRelation", z), n(10, c = Gi(c, ["filter", "relation"], z, !0)), u(c));
  }
  function P(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.filter) == null ? void 0 : Y.value, z) || (a("changeFilterValue", z), n(10, c = Gi(c, ["filter", "value"], z, !0)), u(c));
  }
  function S(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.sort) == null ? void 0 : Y.path, z) || (a("changeSortPath", z), n(10, c = Gi(c, ["sort", "path"], z, !0)), u(c));
  }
  function D(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.sort) == null ? void 0 : Y.direction, z) || (a("changeSortDirection", z), n(10, c = Gi(c, ["sort", "direction"], z, !0)), u(c));
  }
  function x(z) {
    var Y;
    kt((Y = c == null ? void 0 : c.projection) == null ? void 0 : Y.paths, z) || (a("changeProjectionPaths", z), n(10, c = Gi(c, ["projection", "paths"], z, !0)), u(c));
  }
  function V(z) {
    p = z, n(0, p);
  }
  function R(z) {
    g = z, n(1, g);
  }
  function W() {
    _ = this.value, n(2, _);
  }
  function U(z) {
    b = z, n(3, b);
  }
  function C(z) {
    y = z, n(4, y);
  }
  function L(z) {
    v = z, n(5, v);
  }
  return t.$$set = (z) => {
    "json" in z && n(11, f = z.json), "queryOptions" in z && n(10, c = z.queryOptions), "onChange" in z && n(12, u = z.onChange);
  }, t.$$.update = () => {
    var z;
    t.$$.dirty & 2048 && n(15, i = Array.isArray(f)), t.$$.dirty & 34816 && n(14, r = i ? yp(f) : []), t.$$.dirty & 34816 && n(13, o = i ? yp(f, !0) : []), t.$$.dirty & 16384 && n(6, s = r.map(Js)), t.$$.dirty & 8192 && n(7, l = o ? o.map(Js) : []), t.$$.dirty & 1088 && (z = c == null ? void 0 : c.filter) != null && z.path && s.find((Y) => {
      var $;
      return kt(Y.value, ($ = c == null ? void 0 : c.filter) == null ? void 0 : $.path);
    }), t.$$.dirty & 1 && M((p == null ? void 0 : p.value) || null), t.$$.dirty & 2 && A((g == null ? void 0 : g.value) || null), t.$$.dirty & 4 && P(_ || null), t.$$.dirty & 8 && S((b == null ? void 0 : b.value) || null), t.$$.dirty & 16 && D((y == null ? void 0 : y.value) || null), t.$$.dirty & 32 && x(v ? v.map((Y) => Y.value) : null);
  }, [
    p,
    g,
    _,
    b,
    y,
    v,
    s,
    l,
    h,
    d,
    c,
    f,
    u,
    o,
    r,
    i,
    V,
    R,
    W,
    U,
    C,
    L
  ];
}
class ND extends Be {
  constructor(e) {
    super(), je(this, e, ID, RD, pt, { json: 11, queryOptions: 10, onChange: 12 });
  }
}
const DD = ND;
function Vb(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function jD(t) {
  let e, n;
  return e = new vt({ props: { data: ja } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function BD(t) {
  let e, n;
  return e = new vt({ props: { data: Da } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Fb(t) {
  let e, n, i, r, o = t[5].name + "", s, l, a, f, c, u;
  const h = [BD, jD], d = [];
  function p(_, b) {
    return _[5].id === _[0] ? 0 : 1;
  }
  n = p(t), i = d[n] = h[n](t);
  function g() {
    return t[4](t[5]);
  }
  return {
    c() {
      e = O("button"), i.c(), r = q(), s = le(o), l = q(), m(e, "type", "button"), m(e, "class", "jse-query-language svelte-19cxesy"), m(e, "title", a = `Select ${t[5].name} as query language`), pe(e, "selected", t[5].id === t[0]);
    },
    m(_, b) {
      B(_, e, b), d[n].m(e, null), w(e, r), w(e, s), w(e, l), f = !0, c || (u = X(e, "click", g), c = !0);
    },
    p(_, b) {
      t = _;
      let y = n;
      n = p(t), n === y ? d[n].p(t, b) : (me(), E(d[y], 1, 1, () => {
        d[y] = null;
      }), ge(), i = d[n], i ? i.p(t, b) : (i = d[n] = h[n](t), i.c()), k(i, 1), i.m(e, r)), (!f || b & 2) && o !== (o = t[5].name + "") && Pe(s, o), (!f || b & 2 && a !== (a = `Select ${t[5].name} as query language`)) && m(e, "title", a), (!f || b & 3) && pe(e, "selected", t[5].id === t[0]);
    },
    i(_) {
      f || (k(i), f = !0);
    },
    o(_) {
      E(i), f = !1;
    },
    d(_) {
      _ && j(e), d[n].d(), c = !1, u();
    }
  };
}
function LD(t) {
  let e, n, i, r = t[1], o = [];
  for (let l = 0; l < r.length; l += 1)
    o[l] = Fb(Vb(t, r, l));
  const s = (l) => E(o[l], 1, 1, () => {
    o[l] = null;
  });
  return {
    c() {
      e = O("div"), n = O("div");
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      m(n, "class", "jse-select-query-language-container svelte-19cxesy"), m(e, "class", "jse-select-query-language svelte-19cxesy");
    },
    m(l, a) {
      B(l, e, a), w(e, n);
      for (let f = 0; f < o.length; f += 1)
        o[f].m(n, null);
      i = !0;
    },
    p(l, [a]) {
      if (a & 7) {
        r = l[1];
        let f;
        for (f = 0; f < r.length; f += 1) {
          const c = Vb(l, r, f);
          o[f] ? (o[f].p(c, a), k(o[f], 1)) : (o[f] = Fb(c), o[f].c(), k(o[f], 1), o[f].m(n, null));
        }
        for (me(), f = r.length; f < o.length; f += 1)
          s(f);
        ge();
      }
    },
    i(l) {
      if (!i) {
        for (let a = 0; a < r.length; a += 1)
          k(o[a]);
        i = !0;
      }
    },
    o(l) {
      o = o.filter(Boolean);
      for (let a = 0; a < o.length; a += 1)
        E(o[a]);
      i = !1;
    },
    d(l) {
      l && j(e), Dt(o, l);
    }
  };
}
function xD(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: o } = e;
  function s(a) {
    n(0, r = a), o(a);
  }
  const l = (a) => s(a.id);
  return t.$$set = (a) => {
    "queryLanguages" in a && n(1, i = a.queryLanguages), "queryLanguageId" in a && n(0, r = a.queryLanguageId), "onChangeQueryLanguage" in a && n(3, o = a.onChangeQueryLanguage);
  }, [
    r,
    i,
    s,
    o,
    l
  ];
}
class zD extends Be {
  constructor(e) {
    super(), je(this, e, xD, LD, Pt, {
      queryLanguages: 1,
      queryLanguageId: 0,
      onChangeQueryLanguage: 3
    });
  }
}
const VD = zD;
function Hb(t) {
  let e, n, i, r, o;
  return n = new vt({ props: { data: hN } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-config svelte-d01h2s"), m(e, "title", "Select a query language");
    },
    m(s, l) {
      B(s, e, l), ie(n, e, null), t[6](e), i = !0, r || (o = X(e, "click", t[3]), r = !0);
    },
    p: fe,
    i(s) {
      i || (k(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), re(n), t[6](null), r = !1, o();
    }
  };
}
function FD(t) {
  let e, n, i, r, o, s, l, a, f, c = t[0].length > 1 && Hb(t);
  return s = new vt({ props: { data: Wl } }), {
    c() {
      e = O("div"), n = O("div"), n.textContent = "Transform", i = q(), c && c.c(), r = q(), o = O("button"), oe(s.$$.fragment), m(n, "class", "jse-title svelte-d01h2s"), m(o, "type", "button"), m(o, "class", "jse-close svelte-d01h2s"), m(e, "class", "jse-header svelte-d01h2s");
    },
    m(u, h) {
      B(u, e, h), w(e, n), w(e, i), c && c.m(e, null), w(e, r), w(e, o), ie(s, o, null), l = !0, a || (f = X(o, "click", t[2]), a = !0);
    },
    p(u, [h]) {
      u[0].length > 1 ? c ? (c.p(u, h), h & 1 && k(c, 1)) : (c = Hb(u), c.c(), k(c, 1), c.m(e, r)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), ge());
    },
    i(u) {
      l || (k(c), k(s.$$.fragment, u), l = !0);
    },
    o(u) {
      E(c), E(s.$$.fragment, u), l = !1;
    },
    d(u) {
      u && j(e), c && c.d(), re(s), a = !1, f();
    }
  };
}
function HD(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: o } = e, s, l;
  const { close: a } = Hn("simple-modal"), { openAbsolutePopup: f, closeAbsolutePopup: c } = Hn("absolute-popup");
  function u() {
    l = f(VD, {
      queryLanguages: i,
      queryLanguageId: r,
      onChangeQueryLanguage: (p) => {
        c(l), o(p);
      }
    }, {
      position: "bottom",
      offsetTop: -2,
      offsetLeft: 0,
      anchor: s,
      closeOnOuterClick: !0
    });
  }
  function h(d) {
    ht[d ? "unshift" : "push"](() => {
      s = d, n(1, s);
    });
  }
  return t.$$set = (d) => {
    "queryLanguages" in d && n(0, i = d.queryLanguages), "queryLanguageId" in d && n(4, r = d.queryLanguageId), "onChangeQueryLanguage" in d && n(5, o = d.onChangeQueryLanguage);
  }, [
    i,
    s,
    a,
    u,
    r,
    o,
    h
  ];
}
class WD extends Be {
  constructor(e) {
    super(), je(this, e, HD, FD, pt, {
      queryLanguages: 0,
      queryLanguageId: 4,
      onChangeQueryLanguage: 5
    });
  }
}
const UD = WD, md = Wn("jsoneditor:AutoScrollHandler");
function qD(t) {
  md("createAutoScrollHandler", t);
  let e, n;
  function i(f) {
    return f < 20 ? M6 : f < 50 ? A6 : O6;
  }
  function r() {
    if (t) {
      const f = e * (x1 / 1e3);
      t.scrollTop += f;
    }
  }
  function o(f) {
    (!n || f !== e) && (s(), md("startAutoScroll", f), e = f, n = setInterval(r, x1));
  }
  function s() {
    n && (md("stopAutoScroll"), clearInterval(n), n = void 0, e = void 0);
  }
  function l(f) {
    if (t) {
      const c = f.clientY, { top: u, bottom: h } = t.getBoundingClientRect();
      if (c < u) {
        const d = i(u - c);
        o(-d);
      } else if (c > h) {
        const d = i(c - h);
        o(d);
      } else
        s();
    }
  }
  function a() {
    s();
  }
  return {
    onDrag: l,
    onDragEnd: a
  };
}
const JD = (t, e, n, i) => (t /= i / 2, t < 1 ? n / 2 * t * t + e : (t--, -n / 2 * (t * (t - 2) - 1) + e)), CC = () => {
  let t, e, n, i, r, o, s, l, a, f, c, u, h, d;
  function p() {
    return t.scrollY || t.pageYOffset || t.scrollTop;
  }
  function g(M) {
    const A = M.getBoundingClientRect().top, P = t.getBoundingClientRect ? t.getBoundingClientRect().top : 0;
    return A - P + n;
  }
  function _(M) {
    t.scrollTo ? t.scrollTo(t.scrollLeft, M) : t.scrollTop = M;
  }
  function b(M) {
    f || (f = M), c = M - f, u = o(c, n, l, a), _(u), d = !0, c < a ? requestAnimationFrame(b) : y();
  }
  function y() {
    _(n + l), e && s && (e.setAttribute("tabindex", "-1"), e.focus()), typeof h == "function" && h(), f = !1, d = !1;
  }
  function v(M, A = {}) {
    switch (a = A.duration || 1e3, r = A.offset || 0, h = A.callback, o = A.easing || JD, s = A.a11y || !1, typeof A.container) {
      case "object":
        t = A.container;
        break;
      case "string":
        t = document.querySelector(A.container);
        break;
      default:
        t = window;
    }
    switch (n = p(), typeof M) {
      case "number":
        e = void 0, s = !1, i = n + M;
        break;
      case "object":
        e = M, i = g(e);
        break;
      case "string":
        e = document.querySelector(M), i = g(e);
        break;
    }
    switch (l = i - n + r, typeof A.duration) {
      case "number":
        a = A.duration;
        break;
      case "function":
        a = A.duration(l);
        break;
    }
    d ? f = !1 : requestAnimationFrame(b);
  }
  return v;
}, KD = 1e3, xf = Wn("jsoneditor:History");
function SC(t = {}) {
  const e = t.maxItems || KD;
  let n = [], i = 0;
  function r() {
    return i < n.length;
  }
  function o() {
    return i > 0;
  }
  function s() {
    return {
      canUndo: r(),
      canRedo: o(),
      length: n.length
    };
  }
  function l() {
    t.onChange && t.onChange(s());
  }
  function a(h) {
    xf("add", h), n = [h].concat(n.slice(i)).slice(0, e), i = 0, l();
  }
  function f() {
    xf("clear"), n = [], i = 0, l();
  }
  function c() {
    if (r()) {
      const h = n[i];
      return i += 1, xf("undo", h), l(), h;
    }
  }
  function u() {
    if (o())
      return i -= 1, xf("redo", n[i]), l(), n[i];
  }
  return {
    add: a,
    clear: f,
    getState: s,
    undo: c,
    redo: u
  };
}
function $s(t, e) {
  const n = Date.now(), i = t(), r = Date.now();
  return e(r - n), i;
}
const Gs = Wn("validation");
function GD(t) {
  const e = {};
  return t.forEach((n) => {
    e[Ae(n.path)] = n;
  }), t.forEach((n) => {
    let i = n.path;
    for (; i.length > 0; ) {
      i = wt(i);
      const r = Ae(i);
      r in e || (e[r] = {
        isChildError: !0,
        path: i,
        message: "Contains invalid data"
      });
    }
  }), e;
}
function MC(t, e, n, i) {
  if (Gs("validateJSON"), !e)
    return [];
  if (n !== i) {
    const r = i.parse(n.stringify(t));
    return e(r);
  } else
    return e(t);
}
function XD(t, e, n, i) {
  if (Gs("validateText"), t.length > T6)
    return {
      validationErrors: [{
        path: [],
        message: "Validation turned off: the document is too large",
        severity: jo.info
      }]
    };
  if (t.length === 0)
    return {
      validationErrors: []
    };
  try {
    const r = $s(() => n.parse(t), (l) => Gs(`validate: parsed json in ${l} ms`));
    if (!e)
      return {
        validationErrors: []
      };
    const o = n === i ? r : $s(() => i.parse(t), (l) => Gs(`validate: parsed json with the validationParser in ${l} ms`));
    return { validationErrors: $s(() => e(o), (l) => Gs(`validate: validated json in ${l} ms`)) };
  } catch (r) {
    const o = $s(() => QD(t, n), (l) => Gs(`validate: checked whether repairable in ${l} ms`));
    return {
      parseError: dh(t, r.message || r.toString()),
      isRepairable: o
    };
  }
}
function QD(t, e) {
  if (t.length > E6)
    return !1;
  try {
    return e.parse(Tr(t)), !0;
  } catch {
    return !1;
  }
}
const zf = Wn("jsoneditor:FocusTracker");
function lg({ onMount: t, onDestroy: e, getWindow: n, hasFocus: i, onFocus: r, onBlur: o }) {
  let s, l = !1;
  function a() {
    const c = i();
    c && (clearTimeout(s), l || (zf("focus"), r(), l = c));
  }
  function f() {
    l && (clearTimeout(s), s = setTimeout(() => {
      zf("blur"), l = !1, o();
    }));
  }
  t(() => {
    zf("mount FocusTracker");
    const c = n();
    c && (c.addEventListener("focusin", a, !0), c.addEventListener("focusout", f, !0));
  }), e(() => {
    zf("destroy FocusTracker");
    const c = n();
    c && (c.removeEventListener("focusin", a, !0), c.removeEventListener("focusout", f, !0));
  });
}
function Wb(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function Ub(t) {
  let e, n;
  return e = new vt({ props: { data: t[1] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 2 && (o.data = i[1]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function qb(t) {
  let e, n;
  return e = new vt({ props: { data: t[8].icon } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.data = i[8].icon), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Jb(t) {
  let e, n, i = t[8].text + "", r, o, s, l, a, f, c, u = t[8].icon && qb(t);
  function h() {
    return t[6](t[8]);
  }
  function d() {
    return t[7](t[8]);
  }
  return {
    c() {
      e = O("button"), u && u.c(), n = q(), r = le(i), o = q(), m(e, "type", "button"), m(e, "class", "jse-button jse-action jse-primary svelte-kvi5ls"), m(e, "title", s = t[8].title), e.disabled = l = t[8].disabled;
    },
    m(p, g) {
      B(p, e, g), u && u.m(e, null), w(e, n), w(e, r), w(e, o), a = !0, f || (c = [
        X(e, "click", h),
        X(e, "mousedown", d)
      ], f = !0);
    },
    p(p, g) {
      t = p, t[8].icon ? u ? (u.p(t, g), g & 8 && k(u, 1)) : (u = qb(t), u.c(), k(u, 1), u.m(e, n)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), (!a || g & 8) && i !== (i = t[8].text + "") && Pe(r, i), (!a || g & 8 && s !== (s = t[8].title)) && m(e, "title", s), (!a || g & 8 && l !== (l = t[8].disabled)) && (e.disabled = l);
    },
    i(p) {
      a || (k(u), a = !0);
    },
    o(p) {
      E(u), a = !1;
    },
    d(p) {
      p && j(e), u && u.d(), f = !1, nt(c);
    }
  };
}
function YD(t) {
  let e, n, i, r, o, s, l, a, f, c, u = t[1] && Ub(t), h = t[3], d = [];
  for (let g = 0; g < h.length; g += 1)
    d[g] = Jb(Wb(t, h, g));
  const p = (g) => E(d[g], 1, 1, () => {
    d[g] = null;
  });
  return {
    c() {
      e = O("div"), n = O("div"), u && u.c(), i = q(), r = le(t[2]), o = q(), s = O("div");
      for (let g = 0; g < d.length; g += 1)
        d[g].c();
      m(n, "class", "jse-text svelte-kvi5ls"), pe(n, "jse-clickable", !!t[4]), m(s, "class", "jse-actions svelte-kvi5ls"), m(e, "class", l = "jse-message jse-" + t[0] + " svelte-kvi5ls");
    },
    m(g, _) {
      B(g, e, _), w(e, n), u && u.m(n, null), w(n, i), w(n, r), w(e, o), w(e, s);
      for (let b = 0; b < d.length; b += 1)
        d[b].m(s, null);
      a = !0, f || (c = X(n, "click", t[5]), f = !0);
    },
    p(g, [_]) {
      if (g[1] ? u ? (u.p(g, _), _ & 2 && k(u, 1)) : (u = Ub(g), u.c(), k(u, 1), u.m(n, i)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), (!a || _ & 4) && Pe(r, g[2]), (!a || _ & 16) && pe(n, "jse-clickable", !!g[4]), _ & 8) {
        h = g[3];
        let b;
        for (b = 0; b < h.length; b += 1) {
          const y = Wb(g, h, b);
          d[b] ? (d[b].p(y, _), k(d[b], 1)) : (d[b] = Jb(y), d[b].c(), k(d[b], 1), d[b].m(s, null));
        }
        for (me(), b = h.length; b < d.length; b += 1)
          p(b);
        ge();
      }
      (!a || _ & 1 && l !== (l = "jse-message jse-" + g[0] + " svelte-kvi5ls")) && m(e, "class", l);
    },
    i(g) {
      if (!a) {
        k(u);
        for (let _ = 0; _ < h.length; _ += 1)
          k(d[_]);
        a = !0;
      }
    },
    o(g) {
      E(u), d = d.filter(Boolean);
      for (let _ = 0; _ < d.length; _ += 1)
        E(d[_]);
      a = !1;
    },
    d(g) {
      g && j(e), u && u.d(), Dt(d, g), f = !1, c();
    }
  };
}
function ZD(t, e, n) {
  let { type: i = "success" } = e, { icon: r = void 0 } = e, { message: o = void 0 } = e, { actions: s = [] } = e, { onClick: l = void 0 } = e;
  function a() {
    l && l();
  }
  const f = (u) => {
    u.onClick && u.onClick();
  }, c = (u) => {
    u.onMouseDown && u.onMouseDown();
  };
  return t.$$set = (u) => {
    "type" in u && n(0, i = u.type), "icon" in u && n(1, r = u.icon), "message" in u && n(2, o = u.message), "actions" in u && n(3, s = u.actions), "onClick" in u && n(4, l = u.onClick);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c
  ];
}
class $D extends Be {
  constructor(e) {
    super(), je(this, e, ZD, YD, pt, {
      type: 0,
      icon: 1,
      message: 2,
      actions: 3,
      onClick: 4
    });
  }
}
const Hr = $D;
function Kb(t, e, n) {
  const i = t.slice();
  return i[7] = e[n], i[9] = n, i;
}
function Gb(t) {
  let e, n, i, r;
  const o = [tj, ej], s = [];
  function l(a, f) {
    return a[2] || a[3] === 1 ? 0 : 1;
  }
  return n = l(t), i = s[n] = o[n](t), {
    c() {
      e = O("div"), i.c(), m(e, "class", "jse-validation-errors-overview svelte-1oe8e8r");
    },
    m(a, f) {
      B(a, e, f), s[n].m(e, null), r = !0;
    },
    p(a, f) {
      let c = n;
      n = l(a), n === c ? s[n].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), ge(), i = s[n], i ? i.p(a, f) : (i = s[n] = o[n](a), i.c()), k(i, 1), i.m(e, null));
    },
    i(a) {
      r || (k(i), r = !0);
    },
    o(a) {
      E(i), r = !1;
    },
    d(a) {
      a && j(e), s[n].d();
    }
  };
}
function ej(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p;
  return o = new vt({ props: { data: Bs } }), u = new vt({ props: { data: cC } }), {
    c() {
      e = O("table"), n = O("tbody"), i = O("tr"), r = O("td"), oe(o.$$.fragment), s = q(), l = O("td"), a = le(t[3]), f = le(` validation errors
              `), c = O("div"), oe(u.$$.fragment), m(r, "class", "jse-validation-error-icon svelte-1oe8e8r"), m(c, "class", "jse-validation-errors-expand svelte-1oe8e8r"), m(l, "class", "svelte-1oe8e8r"), m(i, "class", "jse-validation-error svelte-1oe8e8r"), m(e, "class", "svelte-1oe8e8r");
    },
    m(g, _) {
      B(g, e, _), w(e, n), w(n, i), w(i, r), ie(o, r, null), w(i, s), w(i, l), w(l, a), w(l, f), w(l, c), ie(u, c, null), h = !0, d || (p = X(i, "click", t[5]), d = !0);
    },
    p(g, _) {
      (!h || _ & 8) && Pe(a, g[3]);
    },
    i(g) {
      h || (k(o.$$.fragment, g), k(u.$$.fragment, g), h = !0);
    },
    o(g) {
      E(o.$$.fragment, g), E(u.$$.fragment, g), h = !1;
    },
    d(g) {
      g && j(e), re(o), re(u), d = !1, p();
    }
  };
}
function tj(t) {
  let e, n, i, r, o = Gc(t[0], Zs), s = [];
  for (let f = 0; f < o.length; f += 1)
    s[f] = Qb(Kb(t, o, f));
  const l = (f) => E(s[f], 1, 1, () => {
    s[f] = null;
  });
  let a = t[3] > Zs && Yb(t);
  return {
    c() {
      e = O("table"), n = O("tbody");
      for (let f = 0; f < s.length; f += 1)
        s[f].c();
      i = q(), a && a.c(), m(e, "class", "svelte-1oe8e8r");
    },
    m(f, c) {
      B(f, e, c), w(e, n);
      for (let u = 0; u < s.length; u += 1)
        s[u].m(n, null);
      w(n, i), a && a.m(n, null), r = !0;
    },
    p(f, c) {
      if (c & 19) {
        o = Gc(f[0], Zs);
        let u;
        for (u = 0; u < o.length; u += 1) {
          const h = Kb(f, o, u);
          s[u] ? (s[u].p(h, c), k(s[u], 1)) : (s[u] = Qb(h), s[u].c(), k(s[u], 1), s[u].m(n, i));
        }
        for (me(), u = o.length; u < s.length; u += 1)
          l(u);
        ge();
      }
      f[3] > Zs ? a ? a.p(f, c) : (a = Yb(f), a.c(), a.m(n, null)) : a && (a.d(1), a = null);
    },
    i(f) {
      if (!r) {
        for (let c = 0; c < o.length; c += 1)
          k(s[c]);
        r = !0;
      }
    },
    o(f) {
      s = s.filter(Boolean);
      for (let c = 0; c < s.length; c += 1)
        E(s[c]);
      r = !1;
    },
    d(f) {
      f && j(e), Dt(s, f), a && a.d();
    }
  };
}
function Xb(t) {
  let e, n, i, r, o;
  return n = new vt({ props: { data: mN } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-validation-errors-collapse svelte-1oe8e8r"), m(e, "title", "Collapse validation errors");
    },
    m(s, l) {
      B(s, e, l), ie(n, e, null), i = !0, r || (o = X(e, "click", Le(t[4])), r = !0);
    },
    p: fe,
    i(s) {
      i || (k(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), re(n), r = !1, o();
    }
  };
}
function Qb(t) {
  let e, n, i, r, o, s = Vi(yi(t[7].path)) + "", l, a, f, c = t[7].message + "", u, h, d, p, g, _;
  i = new vt({ props: { data: Bs } });
  let b = t[9] === 0 && t[0].length > 1 && Xb(t);
  function y() {
    return t[6](t[7]);
  }
  return {
    c() {
      e = O("tr"), n = O("td"), oe(i.$$.fragment), r = q(), o = O("td"), l = le(s), a = q(), f = O("td"), u = le(c), h = q(), d = O("td"), b && b.c(), m(n, "class", "jse-validation-error-icon svelte-1oe8e8r"), m(o, "class", "svelte-1oe8e8r"), m(f, "class", "svelte-1oe8e8r"), m(d, "class", "jse-validation-error-action svelte-1oe8e8r"), m(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(v, M) {
      B(v, e, M), w(e, n), ie(i, n, null), w(e, r), w(e, o), w(o, l), w(e, a), w(e, f), w(f, u), w(e, h), w(e, d), b && b.m(d, null), p = !0, g || (_ = X(e, "click", y), g = !0);
    },
    p(v, M) {
      t = v, (!p || M & 1) && s !== (s = Vi(yi(t[7].path)) + "") && Pe(l, s), (!p || M & 1) && c !== (c = t[7].message + "") && Pe(u, c), t[9] === 0 && t[0].length > 1 ? b ? (b.p(t, M), M & 1 && k(b, 1)) : (b = Xb(t), b.c(), k(b, 1), b.m(d, null)) : b && (me(), E(b, 1, 1, () => {
        b = null;
      }), ge());
    },
    i(v) {
      p || (k(i.$$.fragment, v), k(b), p = !0);
    },
    o(v) {
      E(i.$$.fragment, v), E(b), p = !1;
    },
    d(v) {
      v && j(e), re(i), b && b.d(), g = !1, _();
    }
  };
}
function Yb(t) {
  let e, n, i, r, o, s, l, a = t[3] - Zs + "", f, c, u, h;
  return {
    c() {
      e = O("tr"), n = O("td"), i = q(), r = O("td"), o = q(), s = O("td"), l = le("(and "), f = le(a), c = le(" more errors)"), u = q(), h = O("td"), m(n, "class", "svelte-1oe8e8r"), m(r, "class", "svelte-1oe8e8r"), m(s, "class", "svelte-1oe8e8r"), m(h, "class", "svelte-1oe8e8r"), m(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(d, p) {
      B(d, e, p), w(e, n), w(e, i), w(e, r), w(e, o), w(e, s), w(s, l), w(s, f), w(s, c), w(e, u), w(e, h);
    },
    p(d, p) {
      p & 8 && a !== (a = d[3] - Zs + "") && Pe(f, a);
    },
    d(d) {
      d && j(e);
    }
  };
}
function nj(t) {
  let e = !Mt(t[0]), n, i, r = e && Gb(t);
  return {
    c() {
      r && r.c(), n = tt();
    },
    m(o, s) {
      r && r.m(o, s), B(o, n, s), i = !0;
    },
    p(o, [s]) {
      s & 1 && (e = !Mt(o[0])), e ? r ? (r.p(o, s), s & 1 && k(r, 1)) : (r = Gb(o), r.c(), k(r, 1), r.m(n.parentNode, n)) : r && (me(), E(r, 1, 1, () => {
        r = null;
      }), ge());
    },
    i(o) {
      i || (k(r), i = !0);
    },
    o(o) {
      E(r), i = !1;
    },
    d(o) {
      r && r.d(o), o && j(n);
    }
  };
}
function ij(t, e, n) {
  let i, { validationErrors: r } = e, { selectError: o } = e, s = !0;
  function l() {
    n(2, s = !1);
  }
  function a() {
    n(2, s = !0);
  }
  const f = (c) => {
    setTimeout(() => o(c));
  };
  return t.$$set = (c) => {
    "validationErrors" in c && n(0, r = c.validationErrors), "selectError" in c && n(1, o = c.selectError);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(3, i = r.length);
  }, [
    r,
    o,
    s,
    i,
    l,
    a,
    f
  ];
}
class rj extends Be {
  constructor(e) {
    super(), je(this, e, ij, nj, pt, { validationErrors: 0, selectError: 1 });
  }
}
const ag = rj;
function oj(t) {
  let e, n, i, r, o, s, l, a, f;
  return s = new vt({ props: { data: Wl } }), {
    c() {
      e = O("div"), n = O("div"), i = le(t[0]), r = q(), o = O("button"), oe(s.$$.fragment), m(n, "class", "jse-title svelte-d01h2s"), m(o, "type", "button"), m(o, "class", "jse-close svelte-d01h2s"), m(e, "class", "jse-header svelte-d01h2s");
    },
    m(c, u) {
      B(c, e, u), w(e, n), w(n, i), w(e, r), w(e, o), ie(s, o, null), l = !0, a || (f = X(o, "click", t[3]), a = !0);
    },
    p(c, [u]) {
      (!l || u & 1) && Pe(i, c[0]);
    },
    i(c) {
      l || (k(s.$$.fragment, c), l = !0);
    },
    o(c) {
      E(s.$$.fragment, c), l = !1;
    },
    d(c) {
      c && j(e), re(s), a = !1, f();
    }
  };
}
function sj(t, e, n) {
  let { title: i = "Modal" } = e, { onClose: r = void 0 } = e;
  const { close: o } = Hn("simple-modal"), s = () => {
    r ? r() : o();
  };
  return t.$$set = (l) => {
    "title" in l && n(0, i = l.title), "onClose" in l && n(1, r = l.onClose);
  }, [i, r, o, s];
}
class lj extends Be {
  constructor(e) {
    super(), je(this, e, sj, oj, pt, { title: 0, onClose: 1 });
  }
}
const fg = lj;
function aj(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D;
  return n = new fg({ props: { title: "Copying and pasting" } }), {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), r = O("div"), o = O("div"), o.textContent = "These actions are unavailable via the menu. Please use:", s = q(), l = O("div"), a = O("div"), f = O("div"), f.textContent = `${t[1]}+C`, c = le(`
        for copy`), u = q(), h = O("div"), d = O("div"), d.textContent = `${t[1]}+X`, p = le(`
        for cut`), g = q(), _ = O("div"), b = O("div"), b.textContent = `${t[1]}+V`, y = le(`
        for paste`), v = q(), M = O("div"), A = O("button"), A.textContent = "Close", m(f, "class", "jse-key svelte-1olothd"), m(a, "class", "jse-shortcut"), m(d, "class", "jse-key svelte-1olothd"), m(h, "class", "jse-shortcut"), m(b, "class", "jse-key svelte-1olothd"), m(_, "class", "jse-shortcut"), m(l, "class", "jse-shortcuts svelte-1olothd"), m(A, "type", "button"), m(A, "class", "jse-primary svelte-1olothd"), m(M, "class", "jse-actions svelte-1olothd"), m(r, "class", "jse-modal-contents svelte-1olothd"), m(e, "class", "jse-modal jse-copy-paste svelte-1olothd");
    },
    m(x, V) {
      B(x, e, V), ie(n, e, null), w(e, i), w(e, r), w(r, o), w(r, s), w(r, l), w(l, a), w(a, f), w(a, c), w(l, u), w(l, h), w(h, d), w(h, p), w(l, g), w(l, _), w(_, b), w(_, y), w(r, v), w(r, M), w(M, A), P = !0, S || (D = X(A, "click", t[0]), S = !0);
    },
    p: fe,
    i(x) {
      P || (k(n.$$.fragment, x), P = !0);
    },
    o(x) {
      E(n.$$.fragment, x), P = !1;
    },
    d(x) {
      x && j(e), re(n), S = !1, D();
    }
  };
}
function fj(t) {
  const { close: e } = Hn("simple-modal");
  return [e, L3 ? "⌘" : "Ctrl"];
}
class cj extends Be {
  constructor(e) {
    super(), je(this, e, fj, aj, pt, {});
  }
}
const AC = cj;
function uj(t) {
  return OC(t);
}
function OC(t) {
  return t && (t.type === "space" || t.space === !0);
}
function Ch(t) {
  return t && (t.type === "separator" || t.separator === !0);
}
function hj(t) {
  return t && t.type === "label" && typeof t.text == "string";
}
function df(t) {
  return t && typeof t.onClick == "function";
}
function cg(t) {
  return t && t.type === "dropdown-button" && df(t.main) && Array.isArray(t.items);
}
function dj(t) {
  return t && t.type === "row" && Array.isArray(t.items);
}
function pj(t) {
  return t && t.type === "column" && Array.isArray(t.items);
}
function Zb(t) {
  return typeof t.parseError == "object" && t.parseError !== null;
}
function mj(t) {
  return Array.isArray(t.validationErrors);
}
const gj = (t) => ({}), $b = (t) => ({});
function e2(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
const bj = (t) => ({}), t2 = (t) => ({});
function _j(t) {
  let e = o2(t[3]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = o2(i[3]) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function yj(t) {
  let e, n, i, r, o, s, l, a, f = t[3].icon && n2(t), c = t[3].text && i2(t);
  return {
    c() {
      e = O("button"), f && f.c(), n = q(), c && c.c(), m(e, "type", "button"), m(e, "class", i = "jse-button " + t[3].className + " svelte-497ud4"), m(e, "title", r = t[3].title), e.disabled = o = t[3].disabled || !1;
    },
    m(u, h) {
      B(u, e, h), f && f.m(e, null), w(e, n), c && c.m(e, null), s = !0, l || (a = X(e, "click", function() {
        Fn(t[3].onClick) && t[3].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(u, h) {
      t = u, t[3].icon ? f ? (f.p(t, h), h & 1 && k(f, 1)) : (f = n2(t), f.c(), k(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge()), t[3].text ? c ? c.p(t, h) : (c = i2(t), c.c(), c.m(e, null)) : c && (c.d(1), c = null), (!s || h & 1 && i !== (i = "jse-button " + t[3].className + " svelte-497ud4")) && m(e, "class", i), (!s || h & 1 && r !== (r = t[3].title)) && m(e, "title", r), (!s || h & 1 && o !== (o = t[3].disabled || !1)) && (e.disabled = o);
    },
    i(u) {
      s || (k(f), s = !0);
    },
    o(u) {
      E(f), s = !1;
    },
    d(u) {
      u && j(e), f && f.d(), c && c.d(), l = !1, a();
    }
  };
}
function wj(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-space svelte-497ud4");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function vj(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-separator svelte-497ud4");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function n2(t) {
  let e, n;
  return e = new vt({ props: { data: t[3].icon } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[3].icon), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function i2(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function r2(t) {
  let e, n, i, r, o, s, l;
  const a = [vj, wj, yj, _j], f = [];
  function c(u, h) {
    return h & 1 && (e = null), h & 1 && (n = null), h & 1 && (i = null), e == null && (e = !!Ch(u[3])), e ? 0 : (n == null && (n = !!OC(u[3])), n ? 1 : (i == null && (i = !!df(u[3])), i ? 2 : 3));
  }
  return r = c(t, -1), o = f[r] = a[r](t), {
    c() {
      o.c(), s = tt();
    },
    m(u, h) {
      f[r].m(u, h), B(u, s, h), l = !0;
    },
    p(u, h) {
      let d = r;
      r = c(u, h), r === d ? f[r].p(u, h) : (me(), E(f[d], 1, 1, () => {
        f[d] = null;
      }), ge(), o = f[r], o ? o.p(u, h) : (o = f[r] = a[r](u), o.c()), k(o, 1), o.m(s.parentNode, s));
    },
    i(u) {
      l || (k(o), l = !0);
    },
    o(u) {
      E(o), l = !1;
    },
    d(u) {
      f[r].d(u), u && j(s);
    }
  };
}
function kj(t) {
  let e, n, i, r;
  const o = t[2].left, s = Sn(o, t, t[1], t2);
  let l = t[0], a = [];
  for (let h = 0; h < l.length; h += 1)
    a[h] = r2(e2(t, l, h));
  const f = (h) => E(a[h], 1, 1, () => {
    a[h] = null;
  }), c = t[2].right, u = Sn(c, t, t[1], $b);
  return {
    c() {
      e = O("div"), s && s.c(), n = q();
      for (let h = 0; h < a.length; h += 1)
        a[h].c();
      i = q(), u && u.c(), m(e, "class", "jse-menu svelte-497ud4");
    },
    m(h, d) {
      B(h, e, d), s && s.m(e, null), w(e, n);
      for (let p = 0; p < a.length; p += 1)
        a[p].m(e, null);
      w(e, i), u && u.m(e, null), r = !0;
    },
    p(h, [d]) {
      if (s && s.p && (!r || d & 2) && An(
        s,
        o,
        h,
        h[1],
        r ? Mn(o, h[1], d, bj) : On(h[1]),
        t2
      ), d & 1) {
        l = h[0];
        let p;
        for (p = 0; p < l.length; p += 1) {
          const g = e2(h, l, p);
          a[p] ? (a[p].p(g, d), k(a[p], 1)) : (a[p] = r2(g), a[p].c(), k(a[p], 1), a[p].m(e, i));
        }
        for (me(), p = l.length; p < a.length; p += 1)
          f(p);
        ge();
      }
      u && u.p && (!r || d & 2) && An(
        u,
        c,
        h,
        h[1],
        r ? Mn(c, h[1], d, gj) : On(h[1]),
        $b
      );
    },
    i(h) {
      if (!r) {
        k(s, h);
        for (let d = 0; d < l.length; d += 1)
          k(a[d]);
        k(u, h), r = !0;
      }
    },
    o(h) {
      E(s, h), a = a.filter(Boolean);
      for (let d = 0; d < a.length; d += 1)
        E(a[d]);
      E(u, h), r = !1;
    },
    d(h) {
      h && j(e), s && s.d(h), Dt(a, h), u && u.d(h);
    }
  };
}
function o2(t) {
  return console.error("Unknown type of menu item", t), "???";
}
function Cj(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { items: o = [] } = e;
  return t.$$set = (s) => {
    "items" in s && n(0, o = s.items), "$$scope" in s && n(1, r = s.$$scope);
  }, [o, r, i];
}
class Sj extends Be {
  constructor(e) {
    super(), je(this, e, Cj, kj, pt, { items: 0 });
  }
}
const Sh = Sj;
function Mj(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = "Repair invalid JSON, then click apply", m(e, "slot", "left"), m(e, "class", "jse-info svelte-gz09vf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Aj(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "success",
      message: "JSON is valid now and can be parsed.",
      actions: t[6]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.actions = i[6]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Oj(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "error",
      icon: Bs,
      message: `Cannot parse JSON: ${t[2].message}`,
      actions: t[7]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 4 && (o.message = `Cannot parse JSON: ${i[2].message}`), r & 128 && (o.actions = i[7]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Tj(t) {
  let e, n, i, r, o, s, l, a, f, c;
  n = new Sh({
    props: {
      items: t[5],
      $$slots: { left: [Mj] },
      $$scope: { ctx: t }
    }
  });
  const u = [Oj, Aj], h = [];
  function d(p, g) {
    return p[2] ? 0 : 1;
  }
  return r = d(t), o = h[r] = u[r](t), {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), o.c(), s = q(), l = O("textarea"), l.value = t[0], l.readOnly = t[1], m(l, "class", "jse-json-text svelte-gz09vf"), m(l, "autocomplete", "off"), m(l, "autocapitalize", "off"), m(l, "spellcheck", "false"), m(e, "class", "jse-json-repair-component svelte-gz09vf");
    },
    m(p, g) {
      B(p, e, g), ie(n, e, null), w(e, i), h[r].m(e, null), w(e, s), w(e, l), t[17](l), t[18](e), a = !0, f || (c = X(l, "input", t[8]), f = !0);
    },
    p(p, [g]) {
      const _ = {};
      g & 32 && (_.items = p[5]), g & 33554432 && (_.$$scope = { dirty: g, ctx: p }), n.$set(_);
      let b = r;
      r = d(p), r === b ? h[r].p(p, g) : (me(), E(h[b], 1, 1, () => {
        h[b] = null;
      }), ge(), o = h[r], o ? o.p(p, g) : (o = h[r] = u[r](p), o.c()), k(o, 1), o.m(e, s)), (!a || g & 1) && (l.value = p[0]), (!a || g & 2) && (l.readOnly = p[1]);
    },
    i(p) {
      a || (k(n.$$.fragment, p), k(o), a = !0);
    },
    o(p) {
      E(n.$$.fragment, p), E(o), a = !1;
    },
    d(p) {
      p && j(e), re(n), h[r].d(), t[17](null), t[18](null), f = !1, c();
    }
  };
}
function Ej(t, e, n) {
  let i, r, o, s, l, a, { text: f = "" } = e, { readOnly: c = !1 } = e, { onParse: u } = e, { onRepair: h } = e, { onChange: d = null } = e, { onApply: p } = e, { onCancel: g } = e;
  const _ = Wn("jsoneditor:JSONRepair");
  let b, y;
  function v(W) {
    try {
      return u(W), null;
    } catch (U) {
      return dh(W, U.message);
    }
  }
  function M(W) {
    try {
      return h(W), !0;
    } catch {
      return !1;
    }
  }
  function A() {
    y && i && i.position != null && (y.setSelectionRange(i.position, i.position), setTimeout(() => {
      y.focus();
    }));
  }
  function P(W) {
    _("handleChange");
    const U = W.target.value;
    f !== U && (n(0, f = U), d && d(f));
  }
  function S() {
    p(f);
  }
  function D() {
    try {
      n(0, f = h(f)), d && d(f);
    } catch {
    }
  }
  let x;
  function V(W) {
    ht[W ? "unshift" : "push"](() => {
      y = W, n(4, y);
    });
  }
  function R(W) {
    ht[W ? "unshift" : "push"](() => {
      b = W, n(3, b);
    });
  }
  return t.$$set = (W) => {
    "text" in W && n(0, f = W.text), "readOnly" in W && n(1, c = W.readOnly), "onParse" in W && n(9, u = W.onParse), "onRepair" in W && n(10, h = W.onRepair), "onChange" in W && n(11, d = W.onChange), "onApply" in W && n(12, p = W.onApply), "onCancel" in W && n(13, g = W.onCancel);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = v(f)), t.$$.dirty & 1 && n(16, r = M(f)), t.$$.dirty & 4 && _("error", i), t.$$.dirty & 8192 && n(5, x = [
      { type: "space" },
      {
        type: "button",
        icon: Wl,
        title: "Cancel repair",
        className: "jse-cancel",
        onClick: g
      }
    ]), t.$$.dirty & 114688 && n(7, l = r ? [o, s] : [o]), t.$$.dirty & 2 && n(6, a = [
      {
        icon: xa,
        text: "Apply",
        title: "Apply fixed JSON",
        disabled: c,
        onClick: S
      }
    ]);
  }, n(14, o = {
    icon: gN,
    text: "Show me",
    title: "Scroll to the error location",
    onClick: A
  }), n(15, s = {
    icon: _h,
    text: "Auto repair",
    title: "Automatically repair JSON",
    onClick: D
  }), [
    f,
    c,
    i,
    b,
    y,
    x,
    a,
    l,
    P,
    u,
    h,
    d,
    p,
    g,
    o,
    s,
    r,
    V,
    R
  ];
}
class Pj extends Be {
  constructor(e) {
    super(), je(this, e, Ej, Tj, pt, {
      text: 0,
      readOnly: 1,
      onParse: 9,
      onRepair: 10,
      onChange: 11,
      onApply: 12,
      onCancel: 13
    });
  }
}
const Rj = Pj;
function Ij(t) {
  let e, n, i, r;
  function o(l) {
    t[6](l);
  }
  let s = {
    onParse: t[1],
    onRepair: t[2],
    onApply: t[3],
    onCancel: t[4]
  };
  return t[0] !== void 0 && (s.text = t[0]), n = new Rj({ props: s }), ht.push(() => Qi(n, "text", o, t[0])), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-modal jse-repair svelte-1ffm3pm");
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), r = !0;
    },
    p(l, [a]) {
      const f = {};
      a & 2 && (f.onParse = l[1]), a & 4 && (f.onRepair = l[2]), !i && a & 1 && (i = !0, f.text = l[0], Xi(() => i = !1)), n.$set(f);
    },
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n);
    }
  };
}
function Nj(t, e, n) {
  let { text: i } = e, { onParse: r } = e, { onRepair: o } = e, { onApply: s } = e;
  const { close: l } = Hn("simple-modal");
  function a(u) {
    l(), s(u);
  }
  function f() {
    l();
  }
  function c(u) {
    i = u, n(0, i);
  }
  return t.$$set = (u) => {
    "text" in u && n(0, i = u.text), "onParse" in u && n(1, r = u.onParse), "onRepair" in u && n(2, o = u.onRepair), "onApply" in u && n(5, s = u.onApply);
  }, [
    i,
    r,
    o,
    a,
    f,
    s,
    c
  ];
}
class Dj extends Be {
  constructor(e) {
    super(), je(this, e, Nj, Ij, pt, {
      text: 0,
      onParse: 1,
      onRepair: 2,
      onApply: 5
    });
  }
}
const TC = Dj;
function s2(t) {
  let e, n;
  return e = new vt({ props: { data: t[0].icon } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[0].icon), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function l2(t) {
  let e = t[0].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[0].text + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function jj(t) {
  let e, n, i, r, o, s, l, a, f = t[0].icon && s2(t), c = t[0].text && l2(t);
  return {
    c() {
      e = O("button"), f && f.c(), n = q(), c && c.c(), m(e, "type", "button"), m(e, "class", i = fn(xr("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8"), m(e, "title", r = t[0].title), e.disabled = o = t[0].disabled || !1;
    },
    m(u, h) {
      B(u, e, h), f && f.m(e, null), w(e, n), c && c.m(e, null), s = !0, l || (a = X(e, "click", function() {
        Fn(t[0].onClick) && t[0].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(u, [h]) {
      t = u, t[0].icon ? f ? (f.p(t, h), h & 1 && k(f, 1)) : (f = s2(t), f.c(), k(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge()), t[0].text ? c ? c.p(t, h) : (c = l2(t), c.c(), c.m(e, null)) : c && (c.d(1), c = null), (!s || h & 3 && i !== (i = fn(xr("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8")) && m(e, "class", i), (!s || h & 1 && r !== (r = t[0].title)) && m(e, "title", r), (!s || h & 1 && o !== (o = t[0].disabled || !1)) && (e.disabled = o);
    },
    i(u) {
      s || (k(f), s = !0);
    },
    o(u) {
      E(f), s = !1;
    },
    d(u) {
      u && j(e), f && f.d(), c && c.d(), l = !1, a();
    }
  };
}
function Bj(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (o) => {
    "item" in o && n(0, i = o.item), "className" in o && n(1, r = o.className);
  }, [i, r];
}
class Lj extends Be {
  constructor(e) {
    super(), je(this, e, Bj, jj, Pt, { item: 0, className: 1 });
  }
}
const ug = Lj;
function a2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
const xj = (t) => ({}), f2 = (t) => ({});
function c2(t) {
  let e, n;
  return e = new vt({ props: { data: t[11].icon } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[11].icon), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function u2(t) {
  let e, n, i, r = t[11].text + "", o, s, l, a, f, c, u, h, d = t[11].icon && c2(t);
  function p() {
    return t[9](t[11]);
  }
  return {
    c() {
      e = O("li"), n = O("button"), d && d.c(), i = q(), o = le(r), f = q(), m(n, "type", "button"), m(n, "title", s = t[11].title), n.disabled = l = t[11].disabled, m(n, "class", a = fn(t[11].className) + " svelte-12ophpi"), m(e, "class", "svelte-12ophpi");
    },
    m(g, _) {
      B(g, e, _), w(e, n), d && d.m(n, null), w(n, i), w(n, o), w(e, f), c = !0, u || (h = X(n, "click", p), u = !0);
    },
    p(g, _) {
      t = g, t[11].icon ? d ? (d.p(t, _), _ & 1 && k(d, 1)) : (d = c2(t), d.c(), k(d, 1), d.m(n, i)) : d && (me(), E(d, 1, 1, () => {
        d = null;
      }), ge()), (!c || _ & 1) && r !== (r = t[11].text + "") && Pe(o, r), (!c || _ & 1 && s !== (s = t[11].title)) && m(n, "title", s), (!c || _ & 1 && l !== (l = t[11].disabled)) && (n.disabled = l), (!c || _ & 1 && a !== (a = fn(t[11].className) + " svelte-12ophpi")) && m(n, "class", a);
    },
    i(g) {
      c || (k(d), c = !0);
    },
    o(g) {
      E(d), c = !1;
    },
    d(g) {
      g && j(e), d && d.d(), u = !1, h();
    }
  };
}
function zj(t) {
  let e, n, i, r, o, s, l, a, f, c;
  const u = t[8].defaultItem, h = Sn(u, t, t[7], f2);
  r = new vt({ props: { data: Ni } });
  let d = t[0], p = [];
  for (let _ = 0; _ < d.length; _ += 1)
    p[_] = u2(a2(t, d, _));
  const g = (_) => E(p[_], 1, 1, () => {
    p[_] = null;
  });
  return {
    c() {
      e = O("div"), h && h.c(), n = q(), i = O("button"), oe(r.$$.fragment), o = q(), s = O("div"), l = O("ul");
      for (let _ = 0; _ < p.length; _ += 1)
        p[_].c();
      m(i, "type", "button"), m(i, "class", "jse-open-dropdown svelte-12ophpi"), m(i, "data-type", "jse-open-dropdown"), i.disabled = t[4], pe(i, "jse-visible", t[3]), m(l, "class", "svelte-12ophpi"), m(s, "class", "jse-dropdown-items svelte-12ophpi"), ai(s, "width", t[2]), pe(s, "jse-visible", t[3]), m(e, "class", "jse-dropdown-button svelte-12ophpi"), m(e, "title", t[1]);
    },
    m(_, b) {
      B(_, e, b), h && h.m(e, null), w(e, n), w(e, i), ie(r, i, null), w(e, o), w(e, s), w(s, l);
      for (let y = 0; y < p.length; y += 1)
        p[y].m(l, null);
      a = !0, f || (c = [
        X(i, "click", t[5]),
        X(e, "click", t[6])
      ], f = !0);
    },
    p(_, [b]) {
      if (h && h.p && (!a || b & 128) && An(
        h,
        u,
        _,
        _[7],
        a ? Mn(u, _[7], b, xj) : On(_[7]),
        f2
      ), (!a || b & 16) && (i.disabled = _[4]), (!a || b & 8) && pe(i, "jse-visible", _[3]), b & 1) {
        d = _[0];
        let y;
        for (y = 0; y < d.length; y += 1) {
          const v = a2(_, d, y);
          p[y] ? (p[y].p(v, b), k(p[y], 1)) : (p[y] = u2(v), p[y].c(), k(p[y], 1), p[y].m(l, null));
        }
        for (me(), y = d.length; y < p.length; y += 1)
          g(y);
        ge();
      }
      (!a || b & 4) && ai(s, "width", _[2]), (!a || b & 8) && pe(s, "jse-visible", _[3]), (!a || b & 2) && m(e, "title", _[1]);
    },
    i(_) {
      if (!a) {
        k(h, _), k(r.$$.fragment, _);
        for (let b = 0; b < d.length; b += 1)
          k(p[b]);
        a = !0;
      }
    },
    o(_) {
      E(h, _), E(r.$$.fragment, _), p = p.filter(Boolean);
      for (let b = 0; b < p.length; b += 1)
        E(p[b]);
      a = !1;
    },
    d(_) {
      _ && j(e), h && h.d(_), re(r), Dt(p, _), f = !1, nt(c);
    }
  };
}
function Vj(t, e, n) {
  let i, { $$slots: r = {}, $$scope: o } = e, { items: s = [] } = e, { title: l = void 0 } = e, { width: a = "120px" } = e, f = !1;
  function c() {
    const p = f;
    setTimeout(() => n(3, f = !p));
  }
  function u() {
    n(3, f = !1);
  }
  function h(p) {
    Ko(p) === "Escape" && (p.preventDefault(), n(3, f = !1));
  }
  Ei(() => {
    document.addEventListener("click", u), document.addEventListener("keydown", h);
  }), Br(() => {
    document.removeEventListener("click", u), document.removeEventListener("keydown", h);
  });
  const d = (p) => p.onClick();
  return t.$$set = (p) => {
    "items" in p && n(0, s = p.items), "title" in p && n(1, l = p.title), "width" in p && n(2, a = p.width), "$$scope" in p && n(7, o = p.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = s.every((p) => p.disabled === !0));
  }, [
    s,
    l,
    a,
    f,
    i,
    c,
    u,
    o,
    r,
    d
  ];
}
class Fj extends Be {
  constructor(e) {
    super(), je(this, e, Vj, zj, pt, { items: 0, title: 1, width: 2 });
  }
}
const Hj = Fj;
function h2(t) {
  let e, n;
  return e = new vt({
    props: { data: t[0].main.icon }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[0].main.icon), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Wj(t) {
  let e, n, i = t[0].main.text + "", r, o, s, l, a, f, c, u = t[0].main.icon && h2(t);
  return {
    c() {
      e = O("button"), u && u.c(), n = q(), r = le(i), m(e, "class", o = fn(xr("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8"), m(e, "type", "button"), m(e, "slot", "defaultItem"), m(e, "title", s = t[0].main.title), e.disabled = l = t[0].main.disabled || !1;
    },
    m(h, d) {
      B(h, e, d), u && u.m(e, null), w(e, n), w(e, r), a = !0, f || (c = X(e, "click", function() {
        Fn(t[0].main.onClick) && t[0].main.onClick.apply(this, arguments);
      }), f = !0);
    },
    p(h, d) {
      t = h, t[0].main.icon ? u ? (u.p(t, d), d & 1 && k(u, 1)) : (u = h2(t), u.c(), k(u, 1), u.m(e, n)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), (!a || d & 1) && i !== (i = t[0].main.text + "") && Pe(r, i), (!a || d & 3 && o !== (o = fn(xr("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8")) && m(e, "class", o), (!a || d & 1 && s !== (s = t[0].main.title)) && m(e, "title", s), (!a || d & 1 && l !== (l = t[0].main.disabled || !1)) && (e.disabled = l);
    },
    i(h) {
      a || (k(u), a = !0);
    },
    o(h) {
      E(u), a = !1;
    },
    d(h) {
      h && j(e), u && u.d(), f = !1, c();
    }
  };
}
function Uj(t) {
  let e, n;
  return e = new Hj({
    props: {
      width: t[0].width,
      items: t[0].items,
      $$slots: { defaultItem: [Wj] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.width = i[0].width), r & 1 && (o.items = i[0].items), r & 7 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function qj(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (o) => {
    "item" in o && n(0, i = o.item), "className" in o && n(1, r = o.className);
  }, [i, r];
}
class Jj extends Be {
  constructor(e) {
    super(), je(this, e, qj, Uj, Pt, { item: 0, className: 1 });
  }
}
const hg = Jj;
function d2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function p2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function m2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
function Kj(t) {
  let e = Al(t[5]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Al(i[5]) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function Gj(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Xj(t) {
  let e, n, i = t[5].items, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = b2(p2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      e = O("div");
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      m(e, "class", "jse-row svelte-1nininf");
    },
    m(s, l) {
      B(s, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(s, l) {
      if (l & 1) {
        i = s[5].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = p2(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = b2(f), r[a].c(), k(r[a], 1), r[a].m(e, null));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      s && j(e), Dt(r, s);
    }
  };
}
function Qj(t) {
  let e, n;
  return e = new hg({ props: { item: t[5] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[5]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Yj(t) {
  let e, n;
  return e = new ug({ props: { item: t[5] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[5]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Zj(t) {
  let e = Al(t[8]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Al(i[8]) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function $j(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function eB(t) {
  let e, n, i = t[8].items, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = g2(m2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      e = O("div");
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      m(e, "class", "jse-column svelte-1nininf");
    },
    m(s, l) {
      B(s, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(s, l) {
      if (l & 1) {
        i = s[8].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = m2(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = g2(f), r[a].c(), k(r[a], 1), r[a].m(e, null));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      s && j(e), Dt(r, s);
    }
  };
}
function tB(t) {
  let e, n;
  return e = new hg({ props: { item: t[8] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[8]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function nB(t) {
  let e, n;
  return e = new ug({ props: { item: t[8] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[8]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function iB(t) {
  let e = Al(t[11]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Al(i[11]) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function rB(t) {
  let e, n = t[11].text + "", i;
  return {
    c() {
      e = O("div"), i = le(n), m(e, "class", "jse-label svelte-1nininf");
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, o) {
      o & 1 && n !== (n = r[11].text + "") && Pe(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function oB(t) {
  let e;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function sB(t) {
  let e, n;
  return e = new hg({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[11]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function lB(t) {
  let e, n;
  return e = new ug({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[11]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function g2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    lB,
    sB,
    oB,
    rB,
    iB
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!df(h[11])), e ? 0 : (n == null && (n = !!cg(h[11])), n ? 1 : (i == null && (i = !!Ch(h[11])), i ? 2 : (r == null && (r = !!hj(h[11])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = tt();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let p = o;
      o = u(h, d), o === p ? c[o].p(h, d) : (me(), E(c[p], 1, 1, () => {
        c[p] = null;
      }), ge(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), k(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (k(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function b2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    nB,
    tB,
    eB,
    $j,
    Zj
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!df(h[8])), e ? 0 : (n == null && (n = !!cg(h[8])), n ? 1 : (i == null && (i = !!pj(h[8])), i ? 2 : (r == null && (r = !!Ch(h[8])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = tt();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let p = o;
      o = u(h, d), o === p ? c[o].p(h, d) : (me(), E(c[p], 1, 1, () => {
        c[p] = null;
      }), ge(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), k(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (k(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function _2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    Yj,
    Qj,
    Xj,
    Gj,
    Kj
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!df(h[5])), e ? 0 : (n == null && (n = !!cg(h[5])), n ? 1 : (i == null && (i = !!dj(h[5])), i ? 2 : (r == null && (r = !!Ch(h[5])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = tt();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let p = o;
      o = u(h, d), o === p ? c[o].p(h, d) : (me(), E(c[p], 1, 1, () => {
        c[p] = null;
      }), ge(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), k(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (k(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function y2(t) {
  let e, n, i, r, o, s, l, a;
  return r = new vt({ props: { data: bR } }), {
    c() {
      e = O("div"), n = O("div"), i = O("div"), oe(r.$$.fragment), o = q(), s = O("div"), l = le(t[1]), m(i, "class", "jse-tip-icon svelte-1nininf"), m(s, "class", "jse-tip-text"), m(n, "class", "jse-tip svelte-1nininf"), m(e, "class", "jse-row svelte-1nininf");
    },
    m(f, c) {
      B(f, e, c), w(e, n), w(n, i), ie(r, i, null), w(n, o), w(n, s), w(s, l), a = !0;
    },
    p(f, c) {
      (!a || c & 2) && Pe(l, f[1]);
    },
    i(f) {
      a || (k(r.$$.fragment, f), a = !0);
    },
    o(f) {
      E(r.$$.fragment, f), a = !1;
    },
    d(f) {
      f && j(e), re(r);
    }
  };
}
function aB(t) {
  let e, n, i, r, o, s = t[0], l = [];
  for (let c = 0; c < s.length; c += 1)
    l[c] = _2(d2(t, s, c));
  const a = (c) => E(l[c], 1, 1, () => {
    l[c] = null;
  });
  let f = t[1] && y2(t);
  return {
    c() {
      e = O("div");
      for (let c = 0; c < l.length; c += 1)
        l[c].c();
      n = q(), f && f.c(), m(e, "class", "jse-contextmenu svelte-1nininf");
    },
    m(c, u) {
      B(c, e, u);
      for (let h = 0; h < l.length; h += 1)
        l[h].m(e, null);
      w(e, n), f && f.m(e, null), t[4](e), i = !0, r || (o = X(e, "keydown", t[3]), r = !0);
    },
    p(c, [u]) {
      if (u & 1) {
        s = c[0];
        let h;
        for (h = 0; h < s.length; h += 1) {
          const d = d2(c, s, h);
          l[h] ? (l[h].p(d, u), k(l[h], 1)) : (l[h] = _2(d), l[h].c(), k(l[h], 1), l[h].m(e, n));
        }
        for (me(), h = s.length; h < l.length; h += 1)
          a(h);
        ge();
      }
      c[1] ? f ? (f.p(c, u), u & 2 && k(f, 1)) : (f = y2(c), f.c(), k(f, 1), f.m(e, null)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge());
    },
    i(c) {
      if (!i) {
        for (let u = 0; u < s.length; u += 1)
          k(l[u]);
        k(f), i = !0;
      }
    },
    o(c) {
      l = l.filter(Boolean);
      for (let u = 0; u < l.length; u += 1)
        E(l[u]);
      E(f), i = !1;
    },
    d(c) {
      c && j(e), Dt(l, c), f && f.d(), t[4](null), r = !1, o();
    }
  };
}
function Al(t) {
  return console.error("Unknown type of context menu item", t), "???";
}
function fB(t, e, n) {
  let { items: i } = e, { tip: r } = e, o;
  Ei(() => {
    setTimeout(() => {
      const a = [...o.querySelectorAll("button")].find((f) => !f.disabled);
      a && a.focus();
    });
  });
  function s(a) {
    const f = Ko(a).replace(/^Command\+/, "Ctrl+");
    if (f === "Up" || f === "Down" || f === "Left" || f === "Right") {
      a.preventDefault();
      const c = Array.from(o.querySelectorAll("button:not([disabled])")), u = J9({
        allElements: c,
        currentElement: a.target,
        direction: f,
        hasPrio: (h) => h.getAttribute("data-type") !== "jse-open-dropdown"
      });
      u && u.focus();
    }
  }
  function l(a) {
    ht[a ? "unshift" : "push"](() => {
      o = a, n(2, o);
    });
  }
  return t.$$set = (a) => {
    "items" in a && n(0, i = a.items), "tip" in a && n(1, r = a.tip);
  }, [i, r, o, s, l];
}
class cB extends Be {
  constructor(e) {
    super(), je(this, e, fB, aB, pt, { items: 0, tip: 1 });
  }
}
const EC = cB;
function uB(t) {
  let e, n;
  return e = new EC({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.items = i[1]), r[0] & 1 && (o.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function hB(t, e, n) {
  let i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, { json: P } = e, { documentState: S } = e, { parser: D } = e, { showTip: x } = e, { onCloseContextMenu: V } = e, { onEditKey: R } = e, { onEditValue: W } = e, { onToggleEnforceString: U } = e, { onCut: C } = e, { onCopy: L } = e, { onPaste: I } = e, { onRemove: H } = e, { onDuplicate: N } = e, { onExtract: T } = e, { onInsertBefore: K } = e, { onInsert: ne } = e, { onConvert: z } = e, { onInsertAfter: Y } = e, { onSort: $ } = e, { onTransform: Q } = e;
  function Te() {
    V(), R();
  }
  function Se() {
    V(), W();
  }
  function Fe() {
    V(), U();
  }
  function Z() {
    V(), C(!0);
  }
  function Ce() {
    V(), C(!1);
  }
  function Ze() {
    V(), L(!0);
  }
  function be() {
    V(), L(!1);
  }
  function te() {
    V(), I();
  }
  function ke() {
    V(), H();
  }
  function Ue() {
    V(), N();
  }
  function de() {
    V(), T();
  }
  function Ve(Me) {
    V(), f ? z(Me) : ne(Me);
  }
  function De() {
    V(), $();
  }
  function He() {
    V(), Q();
  }
  function at() {
    V(), K();
  }
  function mt() {
    V(), Y();
  }
  let Ye;
  return t.$$set = (Me) => {
    "json" in Me && n(2, P = Me.json), "documentState" in Me && n(3, S = Me.documentState), "parser" in Me && n(4, D = Me.parser), "showTip" in Me && n(0, x = Me.showTip), "onCloseContextMenu" in Me && n(5, V = Me.onCloseContextMenu), "onEditKey" in Me && n(6, R = Me.onEditKey), "onEditValue" in Me && n(7, W = Me.onEditValue), "onToggleEnforceString" in Me && n(8, U = Me.onToggleEnforceString), "onCut" in Me && n(9, C = Me.onCut), "onCopy" in Me && n(10, L = Me.onCopy), "onPaste" in Me && n(11, I = Me.onPaste), "onRemove" in Me && n(12, H = Me.onRemove), "onDuplicate" in Me && n(13, N = Me.onDuplicate), "onExtract" in Me && n(14, T = Me.onExtract), "onInsertBefore" in Me && n(15, K = Me.onInsertBefore), "onInsert" in Me && n(16, ne = Me.onInsert), "onConvert" in Me && n(17, z = Me.onConvert), "onInsertAfter" in Me && n(18, Y = Me.onInsertAfter), "onSort" in Me && n(19, $ = Me.onSort), "onTransform" in Me && n(20, Q = Me.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(37, i = S.selection), t.$$.dirty[0] & 4 && n(39, r = P !== void 0), t.$$.dirty[1] & 64 && n(31, o = i != null), t.$$.dirty[1] & 65 && n(21, s = o && Mt(i.focusPath)), t.$$.dirty[0] & 4 | t.$$.dirty[1] & 65 && n(38, l = o ? xe(P, i.focusPath) : void 0), t.$$.dirty[1] & 128 && n(35, a = Array.isArray(l) ? "Edit array" : dn(l) ? "Edit object" : "Edit value"), t.$$.dirty[1] & 320 && n(22, f = r && (Tt(i) || wn(i) || yt(i))), t.$$.dirty[0] & 6291456 | t.$$.dirty[1] & 256 && n(30, c = r && f && !s), t.$$.dirty[0] & 2097152 | t.$$.dirty[1] & 320 && n(29, u = r && i != null && (Tt(i) || yt(i)) && !s), t.$$.dirty[0] & 2097156 | t.$$.dirty[1] & 320 && n(36, h = r && i != null && La(i) && !s && !Array.isArray(xe(P, wt(i.focusPath)))), t.$$.dirty[1] & 320 && n(34, d = r && i != null && La(i)), t.$$.dirty[1] & 136 && n(32, p = d && !tn(l)), t.$$.dirty[0] & 4194304 && n(25, g = f), t.$$.dirty[0] & 33554432 && n(24, _ = g ? "Convert to:" : "Insert:"), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 1 && n(28, b = g ? !1 : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(27, y = g ? bs(i) && !dn(l) : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(26, v = g ? bs(i) && !Array.isArray(l) : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(23, M = g ? bs(i) && tn(l) : o), t.$$.dirty[0] & 24 | t.$$.dirty[1] & 192 && n(33, A = i != null ? io(l, S.enforceStringMap, Ae(i.focusPath), D) : !1), t.$$.dirty[0] & 2145386496 | t.$$.dirty[1] & 63 && n(1, Ye = [
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: Te,
            icon: _a,
            text: "Edit key",
            title: "Edit the key (Double-click on the key)",
            disabled: !h
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Se,
              icon: _a,
              text: a,
              title: "Edit the value (Double-click on the value)",
              disabled: !d
            },
            width: "11em",
            items: [
              {
                type: "button",
                icon: _a,
                text: a,
                title: "Edit the value (Double-click on the value)",
                onClick: Se,
                disabled: !d
              },
              {
                type: "button",
                icon: A ? Da : ja,
                text: "Enforce string",
                title: "Enforce keeping the value as string when it contains a numeric value",
                onClick: Fe,
                disabled: !p
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Z,
              icon: ol,
              text: "Cut",
              title: "Cut selected contents, formatted with indentation (Ctrl+X)",
              disabled: !f
            },
            width: "10em",
            items: [
              {
                type: "button",
                icon: ol,
                text: "Cut formatted",
                title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                onClick: Z,
                disabled: !f
              },
              {
                type: "button",
                icon: ol,
                text: "Cut compacted",
                title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                onClick: Ce,
                disabled: !f
              }
            ]
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Ze,
              icon: Po,
              text: "Copy",
              title: "Copy selected contents, formatted with indentation (Ctrl+C)",
              disabled: !f
            },
            width: "12em",
            items: [
              {
                type: "button",
                icon: Po,
                text: "Copy formatted",
                title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                onClick: Ze,
                disabled: !f
              },
              {
                type: "button",
                icon: Po,
                text: "Copy compacted",
                title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                onClick: be,
                disabled: !f
              }
            ]
          },
          {
            type: "button",
            onClick: te,
            icon: fC,
            text: "Paste",
            title: "Paste clipboard contents (Ctrl+V)",
            disabled: !o
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "button",
                onClick: ke,
                icon: Wl,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !f
              },
              {
                type: "button",
                onClick: Ue,
                icon: yN,
                text: "Duplicate",
                title: "Duplicate selected contents (Ctrl+D)",
                disabled: !c
              },
              {
                type: "button",
                onClick: de,
                icon: cN,
                text: "Extract",
                title: "Extract selected contents",
                disabled: !u
              },
              {
                type: "button",
                onClick: De,
                icon: yh,
                text: "Sort",
                title: "Sort array or object contents",
                disabled: !f
              },
              {
                type: "button",
                onClick: He,
                icon: bh,
                text: "Transform",
                title: "Transform array or object contents (filter, sort, project)",
                disabled: !f
              }
            ]
          },
          {
            type: "column",
            items: [
              { type: "label", text: _ },
              {
                type: "button",
                onClick: () => Ve("structure"),
                icon: g ? jf : Bf,
                text: "Structure",
                title: _ + " structure",
                disabled: !b
              },
              {
                type: "button",
                onClick: () => Ve("object"),
                icon: g ? jf : Bf,
                text: "Object",
                title: _ + " structure",
                disabled: !y
              },
              {
                type: "button",
                onClick: () => Ve("array"),
                icon: g ? jf : Bf,
                text: "Array",
                title: _ + " array",
                disabled: !v
              },
              {
                type: "button",
                onClick: () => Ve("value"),
                icon: g ? jf : Bf,
                text: "Value",
                title: _ + " value",
                disabled: !M
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: at,
            icon: sN,
            text: "Insert before",
            title: "Select area before current entry to insert or paste contents",
            disabled: !f || s
          },
          {
            type: "button",
            onClick: mt,
            icon: tN,
            text: "Insert after",
            title: "Select area after current entry to insert or paste contents",
            disabled: !f || s
          }
        ]
      }
    ]);
  }, [
    x,
    Ye,
    P,
    S,
    D,
    V,
    R,
    W,
    U,
    C,
    L,
    I,
    H,
    N,
    T,
    K,
    ne,
    z,
    Y,
    $,
    Q,
    s,
    f,
    M,
    _,
    g,
    v,
    y,
    b,
    u,
    c,
    o,
    p,
    A,
    d,
    a,
    h,
    i,
    l,
    r
  ];
}
class dB extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      hB,
      uB,
      pt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditKey: 6,
        onEditValue: 7,
        onToggleEnforceString: 8,
        onCut: 9,
        onCopy: 10,
        onPaste: 11,
        onRemove: 12,
        onDuplicate: 13,
        onExtract: 14,
        onInsertBefore: 15,
        onInsert: 16,
        onConvert: 17,
        onInsertAfter: 18,
        onSort: 19,
        onTransform: 20
      },
      null,
      [-1, -1]
    );
  }
}
const pB = dB;
function w2(t, e, n) {
  const i = t.slice();
  return i[13] = e[n], i;
}
function v2(t) {
  let e, n, i = t[13].start + "", r, o, s = t[13].end + "", l, a, f, c;
  function u() {
    return t[12](t[13]);
  }
  return {
    c() {
      e = O("button"), n = le("show "), r = le(i), o = le("-"), l = le(s), a = q(), m(e, "type", "button"), m(e, "class", "jse-expand-items svelte-1knbf5w");
    },
    m(h, d) {
      B(h, e, d), w(e, n), w(e, r), w(e, o), w(e, l), w(e, a), f || (c = X(e, "click", u), f = !0);
    },
    p(h, d) {
      t = h, d & 16 && i !== (i = t[13].start + "") && Pe(r, i), d & 16 && s !== (s = t[13].end + "") && Pe(l, s);
    },
    d(h) {
      h && j(e), f = !1, c();
    }
  };
}
function mB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = t[4], d = [];
  for (let p = 0; p < h.length; p += 1)
    d[p] = v2(w2(t, h, p));
  return {
    c() {
      e = O("div"), n = O("div"), i = O("div"), r = le("Items "), o = le(t[3]), s = le("-"), l = le(t[2]), a = q();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      m(i, "class", "jse-text svelte-1knbf5w"), m(e, "class", "jse-collapsed-items svelte-1knbf5w"), m(e, "style", f = k2(t[0].length + 2)), pe(e, "jse-selected", t[5]);
    },
    m(p, g) {
      B(p, e, g), w(e, n), w(n, i), w(i, r), w(i, o), w(i, s), w(i, l), w(n, a);
      for (let _ = 0; _ < d.length; _ += 1)
        d[_].m(n, null);
      c || (u = X(e, "mousemove", gB), c = !0);
    },
    p(p, [g]) {
      if (g & 8 && Pe(o, p[3]), g & 4 && Pe(l, p[2]), g & 19) {
        h = p[4];
        let _;
        for (_ = 0; _ < h.length; _ += 1) {
          const b = w2(p, h, _);
          d[_] ? d[_].p(b, g) : (d[_] = v2(b), d[_].c(), d[_].m(n, null));
        }
        for (; _ < d.length; _ += 1)
          d[_].d(1);
        d.length = h.length;
      }
      g & 1 && f !== (f = k2(p[0].length + 2)) && m(e, "style", f), g & 32 && pe(e, "jse-selected", p[5]);
    },
    i: fe,
    o: fe,
    d(p) {
      p && j(e), Dt(d, p), c = !1, u();
    }
  };
}
function k2(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function gB(t) {
  t.stopPropagation();
}
function bB(t, e, n) {
  let i, r, o, s, l, { visibleSections: a } = e, { sectionIndex: f } = e, { total: c } = e, { path: u } = e, { pointer: h } = e, { selection: d } = e, { onExpandSection: p } = e;
  const g = (_) => p(u, _);
  return t.$$set = (_) => {
    "visibleSections" in _ && n(6, a = _.visibleSections), "sectionIndex" in _ && n(7, f = _.sectionIndex), "total" in _ && n(8, c = _.total), "path" in _ && n(0, u = _.path), "pointer" in _ && n(9, h = _.pointer), "selection" in _ && n(10, d = _.selection), "onExpandSection" in _ && n(1, p = _.onExpandSection);
  }, t.$$.update = () => {
    t.$$.dirty & 192 && n(11, i = a[f]), t.$$.dirty & 2048 && n(3, r = i.end), t.$$.dirty & 448 && n(2, o = a[f + 1] ? a[f + 1].start : c), t.$$.dirty & 1544 && n(5, s = Tt(d) ? d.pointersMap[rp(h, r)] === !0 : !1), t.$$.dirty & 12 && n(4, l = XR(r, o));
  }, [
    u,
    p,
    o,
    r,
    l,
    s,
    a,
    f,
    c,
    h,
    d,
    i,
    g
  ];
}
class _B extends Be {
  constructor(e) {
    super(), je(this, e, bB, mB, pt, {
      visibleSections: 6,
      sectionIndex: 7,
      total: 8,
      path: 0,
      pointer: 9,
      selection: 10,
      onExpandSection: 1
    });
  }
}
const yB = _B;
function wB(t) {
  let e, n, i, r, o;
  return n = new vt({ props: { data: Ni } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-context-menu-pointer svelte-1yzl4st"), m(e, "title", Om), pe(e, "jse-selected", t[0]);
    },
    m(s, l) {
      B(s, e, l), ie(n, e, null), i = !0, r || (o = X(e, "click", t[1]), r = !0);
    },
    p(s, [l]) {
      (!i || l & 1) && pe(e, "jse-selected", s[0]);
    },
    i(s) {
      i || (k(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), re(n), r = !1, o();
    }
  };
}
function vB(t, e, n) {
  let { selected: i } = e, { onContextMenu: r } = e;
  function o(s) {
    let l = s.target;
    for (; l && l.nodeName !== "BUTTON"; )
      l = l.parentNode;
    l && r({
      anchor: l,
      left: 0,
      top: 0,
      width: $r,
      height: Zr,
      offsetTop: 2,
      offsetLeft: 0,
      showTip: !0
    });
  }
  return t.$$set = (s) => {
    "selected" in s && n(0, i = s.selected), "onContextMenu" in s && n(2, r = s.onContextMenu);
  }, [i, o, r];
}
class kB extends Be {
  constructor(e) {
    super(), je(this, e, vB, wB, pt, { selected: 0, onContextMenu: 2 });
  }
}
const Xo = kB;
function CB(t) {
  let e, n, i, r, o, s, l;
  const a = [AB, MB], f = [];
  function c(u, h) {
    return u[1] ? 0 : 1;
  }
  return n = c(t), i = f[n] = a[n](t), {
    c() {
      e = O("div"), i.c(), m(e, "data-type", "selectable-key"), m(e, "class", r = fn(t[6](t[0])) + " svelte-566egb");
    },
    m(u, h) {
      B(u, e, h), f[n].m(e, null), o = !0, s || (l = X(e, "dblclick", t[5]), s = !0);
    },
    p(u, h) {
      let d = n;
      n = c(u), n === d ? f[n].p(u, h) : (me(), E(f[d], 1, 1, () => {
        f[d] = null;
      }), ge(), i = f[n], i ? i.p(u, h) : (i = f[n] = a[n](u), i.c()), k(i, 1), i.m(e, null)), (!o || h & 1 && r !== (r = fn(u[6](u[0])) + " svelte-566egb")) && m(e, "class", r);
    },
    i(u) {
      o || (k(i), o = !0);
    },
    o(u) {
      E(i), o = !1;
    },
    d(u) {
      u && j(e), f[n].d(), s = !1, l();
    }
  };
}
function SB(t) {
  let e, n;
  return e = new iC({
    props: {
      value: t[2].normalization.escapeValue(t[0]),
      shortText: !0,
      onChange: t[7],
      onCancel: t[8],
      onFind: t[2].onFind
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 5 && (o.value = i[2].normalization.escapeValue(i[0])), r & 4 && (o.onFind = i[2].onFind), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function MB(t) {
  let e = Ms(t[2].normalization.escapeValue(t[0])) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 5 && e !== (e = Ms(i[2].normalization.escapeValue(i[0])) + "") && Pe(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function AB(t) {
  let e, n;
  return e = new aC({
    props: {
      text: t[2].normalization.escapeValue(t[0]),
      searchResultItems: t[1]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 5 && (o.text = i[2].normalization.escapeValue(i[0])), r & 2 && (o.searchResultItems = i[1]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function C2(t) {
  let e, n;
  return e = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[2].onContextMenu
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 4 && (o.onContextMenu = i[2].onContextMenu), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function OB(t) {
  let e, n, i, r, o;
  const s = [SB, CB], l = [];
  function a(c, u) {
    return c[4] ? 0 : 1;
  }
  e = a(t), n = l[e] = s[e](t);
  let f = !t[2].readOnly && t[3] && !t[4] && C2(t);
  return {
    c() {
      n.c(), i = q(), f && f.c(), r = tt();
    },
    m(c, u) {
      l[e].m(c, u), B(c, i, u), f && f.m(c, u), B(c, r, u), o = !0;
    },
    p(c, [u]) {
      let h = e;
      e = a(c), e === h ? l[e].p(c, u) : (me(), E(l[h], 1, 1, () => {
        l[h] = null;
      }), ge(), n = l[e], n ? n.p(c, u) : (n = l[e] = s[e](c), n.c()), k(n, 1), n.m(i.parentNode, i)), !c[2].readOnly && c[3] && !c[4] ? f ? (f.p(c, u), u & 28 && k(f, 1)) : (f = C2(c), f.c(), k(f, 1), f.m(r.parentNode, r)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge());
    },
    i(c) {
      o || (k(n), k(f), o = !0);
    },
    o(c) {
      E(n), E(f), o = !1;
    },
    d(c) {
      l[e].d(c), c && j(i), f && f.d(c), c && j(r);
    }
  };
}
function TB(t, e, n) {
  let i, r, { path: o } = e, { pointer: s } = e, { key: l } = e, { selection: a } = e, { searchResultItems: f } = e, { onUpdateKey: c } = e, { context: u } = e;
  function h(_) {
    !r && !u.readOnly && (_.preventDefault(), u.onSelect(xi(o, !0)));
  }
  function d(_) {
    return xr("jse-key", { "jse-empty": _ === "" });
  }
  function p(_, b) {
    const y = c(l, u.normalization.unescapeValue(_)), v = wt(o).concat(y);
    u.onSelect(b === gs.NEXT_INSIDE ? Ot(v, !1) : xi(v, !1)), b !== gs.SELF && u.focus();
  }
  function g() {
    u.onSelect(xi(o, !1)), u.focus();
  }
  return t.$$set = (_) => {
    "path" in _ && n(9, o = _.path), "pointer" in _ && n(10, s = _.pointer), "key" in _ && n(0, l = _.key), "selection" in _ && n(11, a = _.selection), "searchResultItems" in _ && n(1, f = _.searchResultItems), "onUpdateKey" in _ && n(12, c = _.onUpdateKey), "context" in _ && n(2, u = _.context);
  }, t.$$.update = () => {
    t.$$.dirty & 3072 && n(3, i = a ? a.pointersMap[s] === !0 && wn(a) : void 0), t.$$.dirty & 2056 && n(4, r = i && xo(a));
  }, [
    l,
    f,
    u,
    i,
    r,
    h,
    d,
    p,
    g,
    o,
    s,
    a,
    c
  ];
}
class EB extends Be {
  constructor(e) {
    super(), je(this, e, TB, OB, pt, {
      path: 9,
      pointer: 10,
      key: 0,
      selection: 11,
      searchResultItems: 1,
      onUpdateKey: 12,
      context: 2
    });
  }
}
const PB = EB;
function S2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function M2(t) {
  let e, n, i;
  const r = [t[8].props];
  var o = t[8].component;
  function s(l) {
    let a = {};
    for (let f = 0; f < r.length; f += 1)
      a = Jo(a, r[f]);
    return { props: a };
  }
  return o && (e = jr(o, s())), {
    c() {
      e && oe(e.$$.fragment), n = tt();
    },
    m(l, a) {
      e && ie(e, l, a), B(l, n, a), i = !0;
    },
    p(l, a) {
      const f = a & 1 ? Ns(r, [Qu(l[8].props)]) : {};
      if (o !== (o = l[8].component)) {
        if (e) {
          me();
          const c = e;
          E(c.$$.fragment, 1, 0, () => {
            re(c, 1);
          }), ge();
        }
        o ? (e = jr(o, s()), oe(e.$$.fragment), k(e.$$.fragment, 1), ie(e, n.parentNode, n)) : e = null;
      } else
        o && e.$set(f);
    },
    i(l) {
      i || (e && k(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && E(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && j(n), e && re(e, l);
    }
  };
}
function RB(t) {
  let e, n, i = t[0], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = M2(S2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, [l]) {
      if (l & 1) {
        i = s[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = S2(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = M2(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function IB(t, e, n) {
  let i, r, { path: o } = e, { value: s } = e, { context: l } = e, { enforceString: a } = e, { selection: f } = e, { searchResultItems: c } = e;
  return t.$$set = (u) => {
    "path" in u && n(1, o = u.path), "value" in u && n(2, s = u.value), "context" in u && n(3, l = u.context), "enforceString" in u && n(4, a = u.enforceString), "selection" in u && n(5, f = u.selection), "searchResultItems" in u && n(6, c = u.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && yt(f) && xo(f)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: o,
      value: s,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: f,
      searchResultItems: c,
      onPatch: l.onPatch,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    i
  ];
}
let NB = class extends Be {
  constructor(e) {
    super(), je(this, e, IB, RB, pt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
};
const DB = NB, Vn = {
  selecting: !1,
  selectionAnchor: null,
  selectionAnchorType: null,
  selectionFocus: null,
  dragging: !1
};
function gd({ json: t, documentState: e, deltaY: n, items: i }) {
  const r = e.selection, o = n < 0 ? jB({ json: t, selection: r, deltaY: n, items: i }) : BB({ json: t, selection: r, deltaY: n, items: i });
  if (!o || o.offset === 0)
    return {
      operations: void 0,
      updatedSelection: void 0,
      offset: 0
    };
  const s = kI(t, e.selection, o), l = wt(Cl(r)), a = xe(t, l);
  if (Array.isArray(a)) {
    const f = LB({
      items: i,
      json: t,
      selection: r,
      offset: o.offset
    });
    return {
      operations: s,
      updatedSelection: f,
      offset: o.offset
    };
  } else
    return {
      operations: s,
      updatedSelection: void 0,
      offset: o.offset
    };
}
function jB({ items: t, selection: e, deltaY: n }) {
  const i = Cl(e), r = t.findIndex((c) => kt(c.path, i)), o = () => {
    var c;
    return (c = t[s - 1]) == null ? void 0 : c.height;
  };
  let s = r, l = 0;
  for (; o() !== void 0 && Math.abs(n) > l + o() / 2; )
    l += o(), s -= 1;
  const a = t[s].path, f = s - r;
  return s !== r && t[s] !== void 0 ? { beforePath: a, offset: f } : void 0;
}
function BB({ json: t, items: e, selection: n, deltaY: i }) {
  var g;
  const r = mh(n), o = e.findIndex((_) => kt(_.path, r));
  let s = 0, l = o;
  const a = () => {
    var _;
    return (_ = e[l + 1]) == null ? void 0 : _.height;
  };
  for (; a() !== void 0 && Math.abs(i) > s + a() / 2; )
    s += a(), l += 1;
  const f = wt(r), c = xe(t, f), h = Array.isArray(c) ? l : l + 1, d = (g = e[h]) == null ? void 0 : g.path, p = l - o;
  return d ? { beforePath: d, offset: p } : { append: !0, offset: p };
}
function LB({ items: t, json: e, selection: n, offset: i }) {
  var c, u;
  const r = Cl(n), o = mh(n), s = t.findIndex((h) => kt(h.path, r)), l = t.findIndex((h) => kt(h.path, o)), a = (c = t[s + i]) == null ? void 0 : c.path, f = (u = t[l + i]) == null ? void 0 : u.path;
  return yn(e, a, f);
}
function xB(t, e) {
  if (!t)
    return;
  const n = {};
  for (const i of Object.keys(t))
    e(i, t[i]) && (n[i] = t[i]);
  return Object.keys(n).length > 0 ? n : void 0;
}
function gr(t, e) {
  return xB(t, (n) => bl(n, e));
}
function zB(t) {
  let e, n, i, r, o, s;
  return n = new vt({ props: { data: Bs } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-validation-error svelte-pz3g1j");
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), r = !0, o || (s = [
        X(e, "click", function() {
          Fn(t[0]) && t[0].apply(this, arguments);
        }),
        _i(i = eg.call(null, e, {
          text: t[1],
          ...t[2]
        }))
      ], o = !0);
    },
    p(l, [a]) {
      t = l, i && Fn(i.update) && a & 2 && i.update.call(null, {
        text: t[1],
        ...t[2]
      });
    },
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n), o = !1, nt(s);
    }
  };
}
function VB(t, e, n) {
  let i;
  const r = Hn("absolute-popup");
  let { validationError: o } = e, { onExpand: s } = e;
  return t.$$set = (l) => {
    "validationError" in l && n(3, o = l.validationError), "onExpand" in l && n(0, s = l.onExpand);
  }, t.$$.update = () => {
    t.$$.dirty & 8 && n(1, i = o.isChildError ? "Contains invalid data" : o.message);
  }, [s, i, r, o];
}
class FB extends Be {
  constructor(e) {
    super(), je(this, e, VB, zB, Pt, { validationError: 3, onExpand: 0 });
  }
}
const Ul = FB;
const HB = (t) => ({}), A2 = (t) => ({});
function O2(t, e, n) {
  const i = t.slice();
  return i[53] = e[n], i;
}
const WB = (t) => ({}), T2 = (t) => ({});
function E2(t, e, n) {
  const i = t.slice();
  return i[47] = e[n], i[49] = n, i;
}
function P2(t, e, n) {
  const i = t.slice();
  return i[50] = e[n], i;
}
const UB = (t) => ({}), R2 = (t) => ({});
function qB(t) {
  let e, n, i, r, o, s, l = !t[8].readOnly && t[16] && t[7] && (yt(t[7]) || Tt(t[7])) && !t[7].edit && kt(t[7].focusPath, t[1]), a, f, c;
  const u = t[34].identifier, h = Sn(u, t, t[35], A2);
  let d = !t[17] && I2();
  o = new DB({
    props: {
      path: t[1],
      value: t[0],
      enforceString: t[13],
      selection: t[16] ? t[7] : void 0,
      searchResultItems: nb(t[6], t[9]),
      context: t[8]
    }
  });
  let p = l && N2(t), g = t[15] && D2(t), _ = !t[17] && j2(t);
  return {
    c() {
      e = O("div"), n = O("div"), h && h.c(), i = q(), d && d.c(), r = q(), oe(o.$$.fragment), s = q(), p && p.c(), a = q(), g && g.c(), f = q(), _ && _.c(), m(n, "class", "jse-contents svelte-lts9i5"), m(e, "class", "jse-contents-outer svelte-lts9i5"), m(e, "style", t[18]);
    },
    m(b, y) {
      B(b, e, y), w(e, n), h && h.m(n, null), w(n, i), d && d.m(n, null), w(n, r), ie(o, n, null), w(n, s), p && p.m(n, null), w(e, a), g && g.m(e, null), w(e, f), _ && _.m(e, null), c = !0;
    },
    p(b, y) {
      h && h.p && (!c || y[1] & 16) && An(
        h,
        u,
        b,
        b[35],
        c ? Mn(u, b[35], y, HB) : On(b[35]),
        A2
      ), b[17] ? d && (d.d(1), d = null) : d || (d = I2(), d.c(), d.m(n, r));
      const v = {};
      y[0] & 2 && (v.path = b[1]), y[0] & 1 && (v.value = b[0]), y[0] & 8192 && (v.enforceString = b[13]), y[0] & 65664 && (v.selection = b[16] ? b[7] : void 0), y[0] & 576 && (v.searchResultItems = nb(b[6], b[9])), y[0] & 256 && (v.context = b[8]), o.$set(v), y[0] & 65922 && (l = !b[8].readOnly && b[16] && b[7] && (yt(b[7]) || Tt(b[7])) && !b[7].edit && kt(b[7].focusPath, b[1])), l ? p ? (p.p(b, y), y[0] & 65922 && k(p, 1)) : (p = N2(b), p.c(), k(p, 1), p.m(n, null)) : p && (me(), E(p, 1, 1, () => {
        p = null;
      }), ge()), b[15] ? g ? (g.p(b, y), y[0] & 32768 && k(g, 1)) : (g = D2(b), g.c(), k(g, 1), g.m(e, f)) : g && (me(), E(g, 1, 1, () => {
        g = null;
      }), ge()), b[17] ? _ && (_.d(1), _ = null) : _ ? _.p(b, y) : (_ = j2(b), _.c(), _.m(e, null)), (!c || y[0] & 262144) && m(e, "style", b[18]);
    },
    i(b) {
      c || (k(h, b), k(o.$$.fragment, b), k(p), k(g), c = !0);
    },
    o(b) {
      E(h, b), E(o.$$.fragment, b), E(p), E(g), c = !1;
    },
    d(b) {
      b && j(e), h && h.d(b), d && d.d(), re(o), p && p.d(), g && g.d(), _ && _.d();
    }
  };
}
function JB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = !t[8].readOnly && t[16] && t[7] && (yt(t[7]) || Tt(t[7])) && !t[7].edit && kt(t[7].focusPath, t[1]), d, p, g, _, b, y, v;
  const M = [XB, GB], A = [];
  function P(T, K) {
    return T[12] ? 0 : 1;
  }
  r = P(t), o = A[r] = M[r](t);
  const S = t[34].identifier, D = Sn(S, t, t[35], T2);
  let x = !t[17] && B2();
  function V(T, K) {
    return T[12] ? YB : QB;
  }
  let R = V(t), W = R(t), U = h && L2(t), C = t[15] && (!t[12] || !t[15].isChildError) && x2(t);
  function L(T, K) {
    if (T[12])
      return $B;
    if (!T[17])
      return ZB;
  }
  let I = L(t), H = I && I(t), N = t[12] && z2(t);
  return {
    c() {
      e = O("div"), n = O("div"), i = O("button"), o.c(), s = q(), D && D.c(), l = q(), x && x.c(), a = q(), f = O("div"), c = O("div"), W.c(), u = q(), U && U.c(), d = q(), C && C.c(), p = q(), H && H.c(), g = q(), N && N.c(), _ = tt(), m(i, "type", "button"), m(i, "class", "jse-expand svelte-lts9i5"), m(i, "title", "Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"), m(c, "class", "jse-meta-inner svelte-lts9i5"), m(f, "class", "jse-meta svelte-lts9i5"), m(f, "data-type", "selectable-value"), m(n, "class", "jse-header svelte-lts9i5"), m(e, "class", "jse-header-outer svelte-lts9i5"), m(e, "style", t[18]);
    },
    m(T, K) {
      B(T, e, K), w(e, n), w(n, i), A[r].m(i, null), w(n, s), D && D.m(n, null), w(n, l), x && x.m(n, null), w(n, a), w(n, f), w(f, c), W.m(c, null), w(n, u), U && U.m(n, null), w(e, d), C && C.m(e, null), w(e, p), H && H.m(e, null), B(T, g, K), N && N.m(T, K), B(T, _, K), b = !0, y || (v = X(i, "click", t[21]), y = !0);
    },
    p(T, K) {
      let ne = r;
      r = P(T), r === ne ? A[r].p(T, K) : (me(), E(A[ne], 1, 1, () => {
        A[ne] = null;
      }), ge(), o = A[r], o ? o.p(T, K) : (o = A[r] = M[r](T), o.c()), k(o, 1), o.m(i, null)), D && D.p && (!b || K[1] & 16) && An(
        D,
        S,
        T,
        T[35],
        b ? Mn(S, T[35], K, WB) : On(T[35]),
        T2
      ), T[17] ? x && (x.d(1), x = null) : x || (x = B2(), x.c(), x.m(n, a)), R === (R = V(T)) && W ? W.p(T, K) : (W.d(1), W = R(T), W && (W.c(), W.m(c, null))), K[0] & 65922 && (h = !T[8].readOnly && T[16] && T[7] && (yt(T[7]) || Tt(T[7])) && !T[7].edit && kt(T[7].focusPath, T[1])), h ? U ? (U.p(T, K), K[0] & 65922 && k(U, 1)) : (U = L2(T), U.c(), k(U, 1), U.m(n, null)) : U && (me(), E(U, 1, 1, () => {
        U = null;
      }), ge()), T[15] && (!T[12] || !T[15].isChildError) ? C ? (C.p(T, K), K[0] & 36864 && k(C, 1)) : (C = x2(T), C.c(), k(C, 1), C.m(e, p)) : C && (me(), E(C, 1, 1, () => {
        C = null;
      }), ge()), I === (I = L(T)) && H ? H.p(T, K) : (H && H.d(1), H = I && I(T), H && (H.c(), H.m(e, null))), (!b || K[0] & 262144) && m(e, "style", T[18]), T[12] ? N ? (N.p(T, K), K[0] & 4096 && k(N, 1)) : (N = z2(T), N.c(), k(N, 1), N.m(_.parentNode, _)) : N && (me(), E(N, 1, 1, () => {
        N = null;
      }), ge());
    },
    i(T) {
      b || (k(o), k(D, T), k(U), k(C), k(N), b = !0);
    },
    o(T) {
      E(o), E(D, T), E(U), E(C), E(N), b = !1;
    },
    d(T) {
      T && j(e), A[r].d(), D && D.d(T), x && x.d(), W.d(), U && U.d(), C && C.d(), H && H.d(), T && j(g), N && N.d(T), T && j(_), y = !1, v();
    }
  };
}
function KB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = !t[8].readOnly && t[16] && t[7] && (yt(t[7]) || Tt(t[7])) && !t[7].edit && kt(t[7].focusPath, t[1]), d, p, g, _, b, y, v;
  const M = [nL, tL], A = [];
  function P(T, K) {
    return T[12] ? 0 : 1;
  }
  r = P(t), o = A[r] = M[r](t);
  const S = t[34].identifier, D = Sn(S, t, t[35], R2);
  let x = !t[17] && W2();
  function V(T, K) {
    return T[12] ? rL : iL;
  }
  let R = V(t), W = R(t), U = h && U2(t), C = t[15] && (!t[12] || !t[15].isChildError) && q2(t);
  function L(T, K) {
    return T[12] ? sL : oL;
  }
  let I = L(t), H = I(t), N = t[12] && J2(t);
  return {
    c() {
      e = O("div"), n = O("div"), i = O("button"), o.c(), s = q(), D && D.c(), l = q(), x && x.c(), a = q(), f = O("div"), c = O("div"), W.c(), u = q(), U && U.c(), d = q(), C && C.c(), p = q(), H.c(), g = q(), N && N.c(), _ = tt(), m(i, "type", "button"), m(i, "class", "jse-expand svelte-lts9i5"), m(i, "title", "Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"), m(c, "class", "jse-meta-inner svelte-lts9i5"), m(c, "data-type", "selectable-value"), m(f, "class", "jse-meta svelte-lts9i5"), m(n, "class", "jse-header svelte-lts9i5"), m(e, "class", "jse-header-outer svelte-lts9i5"), m(e, "style", t[18]);
    },
    m(T, K) {
      B(T, e, K), w(e, n), w(n, i), A[r].m(i, null), w(n, s), D && D.m(n, null), w(n, l), x && x.m(n, null), w(n, a), w(n, f), w(f, c), W.m(c, null), w(n, u), U && U.m(n, null), w(e, d), C && C.m(e, null), w(e, p), H.m(e, null), B(T, g, K), N && N.m(T, K), B(T, _, K), b = !0, y || (v = X(i, "click", t[21]), y = !0);
    },
    p(T, K) {
      let ne = r;
      r = P(T), r === ne ? A[r].p(T, K) : (me(), E(A[ne], 1, 1, () => {
        A[ne] = null;
      }), ge(), o = A[r], o ? o.p(T, K) : (o = A[r] = M[r](T), o.c()), k(o, 1), o.m(i, null)), D && D.p && (!b || K[1] & 16) && An(
        D,
        S,
        T,
        T[35],
        b ? Mn(S, T[35], K, UB) : On(T[35]),
        R2
      ), T[17] ? x && (x.d(1), x = null) : x || (x = W2(), x.c(), x.m(n, a)), R === (R = V(T)) && W ? W.p(T, K) : (W.d(1), W = R(T), W && (W.c(), W.m(c, null))), K[0] & 65922 && (h = !T[8].readOnly && T[16] && T[7] && (yt(T[7]) || Tt(T[7])) && !T[7].edit && kt(T[7].focusPath, T[1])), h ? U ? (U.p(T, K), K[0] & 65922 && k(U, 1)) : (U = U2(T), U.c(), k(U, 1), U.m(n, null)) : U && (me(), E(U, 1, 1, () => {
        U = null;
      }), ge()), T[15] && (!T[12] || !T[15].isChildError) ? C ? (C.p(T, K), K[0] & 36864 && k(C, 1)) : (C = q2(T), C.c(), k(C, 1), C.m(e, p)) : C && (me(), E(C, 1, 1, () => {
        C = null;
      }), ge()), I === (I = L(T)) && H ? H.p(T, K) : (H.d(1), H = I(T), H && (H.c(), H.m(e, null))), (!b || K[0] & 262144) && m(e, "style", T[18]), T[12] ? N ? (N.p(T, K), K[0] & 4096 && k(N, 1)) : (N = J2(T), N.c(), k(N, 1), N.m(_.parentNode, _)) : N && (me(), E(N, 1, 1, () => {
        N = null;
      }), ge());
    },
    i(T) {
      b || (k(o), k(D, T), k(U), k(C), k(N), b = !0);
    },
    o(T) {
      E(o), E(D, T), E(U), E(C), E(N), b = !1;
    },
    d(T) {
      T && j(e), A[r].d(), D && D.d(T), x && x.d(), W.d(), U && U.d(), C && C.d(), H.d(), T && j(g), N && N.d(T), T && j(_), y = !1, v();
    }
  };
}
function I2(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = ":", m(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function N2(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function D2(t) {
  let e, n;
  return e = new Ul({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function j2(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function GB(t) {
  let e, n;
  return e = new vt({ props: { data: So } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function XB(t) {
  let e, n;
  return e = new vt({ props: { data: Ni } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function B2(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = ":", m(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function QB(t) {
  let e, n, i, r = Object.keys(t[0]).length + "", o, s, l = Object.keys(t[0]).length === 1 ? "prop" : "props", a, f, c, u, h;
  return {
    c() {
      e = O("div"), e.textContent = "{", n = q(), i = O("button"), o = le(r), s = q(), a = le(l), f = q(), c = O("div"), c.textContent = "}", m(e, "class", "jse-bracket svelte-lts9i5"), m(i, "type", "button"), m(i, "class", "jse-tag svelte-lts9i5"), m(c, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      B(d, e, p), B(d, n, p), B(d, i, p), w(i, o), w(i, s), w(i, a), B(d, f, p), B(d, c, p), u || (h = X(i, "click", t[22]), u = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = Object.keys(d[0]).length + "") && Pe(o, r), p[0] & 1 && l !== (l = Object.keys(d[0]).length === 1 ? "prop" : "props") && Pe(a, l);
    },
    d(d) {
      d && j(e), d && j(n), d && j(i), d && j(f), d && j(c), u = !1, h();
    }
  };
}
function YB(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = "{", m(e, "class", "jse-bracket jse-expanded svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function L2(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function x2(t) {
  let e, n;
  return e = new Ul({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function ZB(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function $B(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), m(e, "data-type", "insert-selection-area-inside");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[29]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function z2(t) {
  let e, n = !t[8].readOnly && (t[10] === no || t[16] && En(t[7])), i, r, o, s, l, a, f = n && V2(t), c = t[19](t[1], t[0], t[2], t[3], t[4], t[5], t[6], t[7], t[11]), u = [];
  for (let p = 0; p < c.length; p += 1)
    u[p] = F2(O2(t, c, p));
  const h = (p) => E(u[p], 1, 1, () => {
    u[p] = null;
  });
  let d = !t[17] && H2(t);
  return {
    c() {
      e = O("div"), f && f.c(), i = q();
      for (let p = 0; p < u.length; p += 1)
        u[p].c();
      r = q(), o = O("div"), s = O("div"), s.innerHTML = '<div class="jse-bracket svelte-lts9i5">}</div>', l = q(), d && d.c(), m(e, "class", "jse-props svelte-lts9i5"), m(s, "data-type", "selectable-value"), m(s, "class", "jse-footer svelte-lts9i5"), m(o, "class", "jse-footer-outer svelte-lts9i5"), m(o, "style", t[18]);
    },
    m(p, g) {
      B(p, e, g), f && f.m(e, null), w(e, i);
      for (let _ = 0; _ < u.length; _ += 1)
        u[_].m(e, null);
      B(p, r, g), B(p, o, g), w(o, s), w(o, l), d && d.m(o, null), a = !0;
    },
    p(p, g) {
      if (g[0] & 66944 && (n = !p[8].readOnly && (p[10] === no || p[16] && En(p[7]))), n ? f ? (f.p(p, g), g[0] & 66944 && k(f, 1)) : (f = V2(p), f.c(), k(f, 1), f.m(e, i)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge()), g[0] & 76024319) {
        c = p[19](p[1], p[0], p[2], p[3], p[4], p[5], p[6], p[7], p[11]);
        let _;
        for (_ = 0; _ < c.length; _ += 1) {
          const b = O2(p, c, _);
          u[_] ? (u[_].p(b, g), k(u[_], 1)) : (u[_] = F2(b), u[_].c(), k(u[_], 1), u[_].m(e, null));
        }
        for (me(), _ = c.length; _ < u.length; _ += 1)
          h(_);
        ge();
      }
      p[17] ? d && (d.d(1), d = null) : d ? d.p(p, g) : (d = H2(p), d.c(), d.m(o, null)), (!a || g[0] & 262144) && m(o, "style", p[18]);
    },
    i(p) {
      if (!a) {
        k(f);
        for (let g = 0; g < c.length; g += 1)
          k(u[g]);
        a = !0;
      }
    },
    o(p) {
      E(f), u = u.filter(Boolean);
      for (let g = 0; g < u.length; g += 1)
        E(u[g]);
      a = !1;
    },
    d(p) {
      p && j(e), f && f.d(), Dt(u, p), p && j(r), p && j(o), d && d.d();
    }
  };
}
function V2(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: t[16] && En(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), m(e, "data-type", "insert-selection-area-inside"), m(e, "style", i = Va(t[1].length + 1)), m(e, "title", Am), pe(e, "jse-hovered", t[10] === no), pe(e, "jse-selected", t[16] && En(t[7]));
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 65664 && (l.selected = o[16] && En(o[7])), n.$set(l), (!r || s[0] & 2 && i !== (i = Va(o[1].length + 1))) && m(e, "style", i), (!r || s[0] & 1024) && pe(e, "jse-hovered", o[10] === no), (!r || s[0] & 65664) && pe(e, "jse-selected", o[16] && En(o[7]));
    },
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function eL(t) {
  let e, n, i, r;
  return n = new PB({
    props: {
      path: t[53].path,
      pointer: t[53].pointer,
      key: t[53].key,
      selection: t[53].selection,
      searchResultItems: t[53].keySearchResultItemsMap,
      context: t[8],
      onUpdateKey: t[23]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), m(e, "slot", "identifier"), m(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), w(e, i), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 2303 && (l.path = o[53].path), s[0] & 2303 && (l.pointer = o[53].pointer), s[0] & 2303 && (l.key = o[53].key), s[0] & 2303 && (l.selection = o[53].selection), s[0] & 2303 && (l.searchResultItems = o[53].keySearchResultItemsMap), s[0] & 256 && (l.context = o[8]), n.$set(l);
    },
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function F2(t) {
  let e, n;
  return e = new dg({
    props: {
      value: t[53].value,
      path: t[53].path,
      expandedMap: t[53].expandedMap,
      enforceStringMap: t[53].enforceStringMap,
      visibleSectionsMap: t[53].visibleSectionsMap,
      validationErrorsMap: t[53].validationErrorsMap,
      searchResultItemsMap: t[53].valueSearchResultItemsMap,
      selection: t[53].selection,
      context: t[8],
      onDragSelectionStart: t[26],
      $$slots: { identifier: [eL] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2303 && (o.value = i[53].value), r[0] & 2303 && (o.path = i[53].path), r[0] & 2303 && (o.expandedMap = i[53].expandedMap), r[0] & 2303 && (o.enforceStringMap = i[53].enforceStringMap), r[0] & 2303 && (o.visibleSectionsMap = i[53].visibleSectionsMap), r[0] & 2303 && (o.validationErrorsMap = i[53].validationErrorsMap), r[0] & 2303 && (o.searchResultItemsMap = i[53].valueSearchResultItemsMap), r[0] & 2303 && (o.selection = i[53].selection), r[0] & 256 && (o.context = i[8]), r[0] & 2559 | r[1] & 16 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function H2(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function tL(t) {
  let e, n;
  return e = new vt({ props: { data: So } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function nL(t) {
  let e, n;
  return e = new vt({ props: { data: Ni } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function W2(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = ":", m(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function iL(t) {
  let e, n, i, r = t[0].length + "", o, s, l = t[0].length === 1 ? "item" : "items", a, f, c, u, h;
  return {
    c() {
      e = O("div"), e.textContent = "[", n = q(), i = O("button"), o = le(r), s = q(), a = le(l), f = q(), c = O("div"), c.textContent = "]", m(e, "class", "jse-bracket svelte-lts9i5"), m(i, "type", "button"), m(i, "class", "jse-tag svelte-lts9i5"), m(c, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      B(d, e, p), B(d, n, p), B(d, i, p), w(i, o), w(i, s), w(i, a), B(d, f, p), B(d, c, p), u || (h = X(i, "click", t[22]), u = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = d[0].length + "") && Pe(o, r), p[0] & 1 && l !== (l = d[0].length === 1 ? "item" : "items") && Pe(a, l);
    },
    d(d) {
      d && j(e), d && j(n), d && j(i), d && j(f), d && j(c), u = !1, h();
    }
  };
}
function rL(t) {
  let e, n, i, r = t[0].length + "", o, s, l = t[0].length === 1 ? "item" : "items", a, f;
  return {
    c() {
      e = O("div"), e.textContent = "[", n = q(), i = O("span"), o = le(r), s = q(), a = le(l), f = le(`
               `), m(e, "class", "jse-bracket svelte-lts9i5"), m(i, "class", "jse-tag jse-expanded svelte-lts9i5");
    },
    m(c, u) {
      B(c, e, u), B(c, n, u), B(c, i, u), w(i, o), w(i, s), w(i, a), B(c, f, u);
    },
    p(c, u) {
      u[0] & 1 && r !== (r = c[0].length + "") && Pe(o, r), u[0] & 1 && l !== (l = c[0].length === 1 ? "item" : "items") && Pe(a, l);
    },
    d(c) {
      c && j(e), c && j(n), c && j(i), c && j(f);
    }
  };
}
function U2(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function q2(t) {
  let e, n;
  return e = new Ul({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function oL(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function sL(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), m(e, "data-type", "insert-selection-area-inside");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[29]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function J2(t) {
  let e, n = !t[8].readOnly && (t[10] === no || t[16] && En(t[7])), i, r = [], o = /* @__PURE__ */ new Map(), s, l, a, f, c, u = n && K2(t), h = t[14] || vs;
  const d = (g) => g[49];
  for (let g = 0; g < h.length; g += 1) {
    let _ = E2(t, h, g), b = d(_);
    o.set(b, r[g] = Q2(b, _));
  }
  let p = !t[17] && Y2(t);
  return {
    c() {
      e = O("div"), u && u.c(), i = q();
      for (let g = 0; g < r.length; g += 1)
        r[g].c();
      s = q(), l = O("div"), a = O("div"), a.innerHTML = '<span class="jse-bracket svelte-lts9i5">]</span>', f = q(), p && p.c(), m(e, "class", "jse-items svelte-lts9i5"), m(a, "data-type", "selectable-value"), m(a, "class", "jse-footer svelte-lts9i5"), m(l, "class", "jse-footer-outer svelte-lts9i5"), m(l, "style", t[18]);
    },
    m(g, _) {
      B(g, e, _), u && u.m(e, null), w(e, i);
      for (let b = 0; b < r.length; b += 1)
        r[b].m(e, null);
      B(g, s, _), B(g, l, _), w(l, a), w(l, f), p && p.m(l, null), c = !0;
    },
    p(g, _) {
      _[0] & 66944 && (n = !g[8].readOnly && (g[10] === no || g[16] && En(g[7]))), n ? u ? (u.p(g, _), _[0] & 66944 && k(u, 1)) : (u = K2(g), u.c(), k(u, 1), u.m(e, i)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), _[0] & 68176895 && (h = g[14] || vs, me(), r = Do(r, _, d, 1, g, h, o, e, Xu, Q2, null, E2), ge()), g[17] ? p && (p.d(1), p = null) : p ? p.p(g, _) : (p = Y2(g), p.c(), p.m(l, null)), (!c || _[0] & 262144) && m(l, "style", g[18]);
    },
    i(g) {
      if (!c) {
        k(u);
        for (let _ = 0; _ < h.length; _ += 1)
          k(r[_]);
        c = !0;
      }
    },
    o(g) {
      E(u);
      for (let _ = 0; _ < r.length; _ += 1)
        E(r[_]);
      c = !1;
    },
    d(g) {
      g && j(e), u && u.d();
      for (let _ = 0; _ < r.length; _ += 1)
        r[_].d();
      g && j(s), g && j(l), p && p.d();
    }
  };
}
function K2(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: t[16] && En(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), m(e, "data-type", "insert-selection-area-inside"), m(e, "style", i = Va(t[1].length + 1)), m(e, "title", Am), pe(e, "jse-hovered", t[10] === no), pe(e, "jse-selected", t[16] && En(t[7]));
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 65664 && (l.selected = o[16] && En(o[7])), n.$set(l), (!r || s[0] & 2 && i !== (i = Va(o[1].length + 1))) && m(e, "style", i), (!r || s[0] & 1024) && pe(e, "jse-hovered", o[10] === no), (!r || s[0] & 65664) && pe(e, "jse-selected", o[16] && En(o[7]));
    },
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function lL(t) {
  let e, n, i = t[50].index + "", r;
  return {
    c() {
      e = O("div"), n = O("div"), r = le(i), m(n, "class", "jse-index svelte-lts9i5"), m(e, "slot", "identifier"), m(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(o, s) {
      B(o, e, s), w(e, n), w(n, r);
    },
    p(o, s) {
      s[0] & 18687 && i !== (i = o[50].index + "") && Pe(r, i);
    },
    d(o) {
      o && j(e);
    }
  };
}
function G2(t, e) {
  let n, i, r;
  return i = new dg({
    props: {
      value: e[50].value,
      path: e[50].path,
      expandedMap: e[50].expandedMap,
      enforceStringMap: e[50].enforceStringMap,
      visibleSectionsMap: e[50].visibleSectionsMap,
      validationErrorsMap: e[50].validationErrorsMap,
      searchResultItemsMap: e[50].searchResultItemsMap,
      selection: e[50].selection,
      context: e[8],
      onDragSelectionStart: e[26],
      $$slots: { identifier: [lL] },
      $$scope: { ctx: e }
    }
  }), {
    key: t,
    first: null,
    c() {
      n = tt(), oe(i.$$.fragment), this.first = n;
    },
    m(o, s) {
      B(o, n, s), ie(i, o, s), r = !0;
    },
    p(o, s) {
      e = o;
      const l = {};
      s[0] & 18687 && (l.value = e[50].value), s[0] & 18687 && (l.path = e[50].path), s[0] & 18687 && (l.expandedMap = e[50].expandedMap), s[0] & 18687 && (l.enforceStringMap = e[50].enforceStringMap), s[0] & 18687 && (l.visibleSectionsMap = e[50].visibleSectionsMap), s[0] & 18687 && (l.validationErrorsMap = e[50].validationErrorsMap), s[0] & 18687 && (l.searchResultItemsMap = e[50].searchResultItemsMap), s[0] & 18687 && (l.selection = e[50].selection), s[0] & 256 && (l.context = e[8]), s[0] & 18687 | s[1] & 16 && (l.$$scope = { dirty: s, ctx: e }), i.$set(l);
    },
    i(o) {
      r || (k(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(n), re(i, o);
    }
  };
}
function X2(t) {
  let e, n;
  return e = new yB({
    props: {
      visibleSections: t[14] || vs,
      sectionIndex: t[49],
      total: t[0].length,
      path: t[1],
      pointer: t[9],
      onExpandSection: t[8].onExpandSection,
      selection: t[7]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16384 && (o.visibleSections = i[14] || vs), r[0] & 16384 && (o.sectionIndex = i[49]), r[0] & 1 && (o.total = i[0].length), r[0] & 2 && (o.path = i[1]), r[0] & 512 && (o.pointer = i[9]), r[0] & 256 && (o.onExpandSection = i[8].onExpandSection), r[0] & 128 && (o.selection = i[7]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Q2(t, e) {
  let n, i = [], r = /* @__PURE__ */ new Map(), o, s, l, a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]);
  const f = (u) => u[50].index;
  for (let u = 0; u < a.length; u += 1) {
    let h = P2(e, a, u), d = f(h);
    r.set(d, i[u] = G2(d, h));
  }
  let c = e[47].end < e[0].length && X2(e);
  return {
    key: t,
    first: null,
    c() {
      n = tt();
      for (let u = 0; u < i.length; u += 1)
        i[u].c();
      o = q(), c && c.c(), s = tt(), this.first = n;
    },
    m(u, h) {
      B(u, n, h);
      for (let d = 0; d < i.length; d += 1)
        i[d].m(u, h);
      B(u, o, h), c && c.m(u, h), B(u, s, h), l = !0;
    },
    p(u, h) {
      e = u, h[0] & 68176383 && (a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]), me(), i = Do(i, h, f, 1, e, a, r, o.parentNode, Xu, G2, o, P2), ge()), e[47].end < e[0].length ? c ? (c.p(e, h), h[0] & 16385 && k(c, 1)) : (c = X2(e), c.c(), k(c, 1), c.m(s.parentNode, s)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), ge());
    },
    i(u) {
      if (!l) {
        for (let h = 0; h < a.length; h += 1)
          k(i[h]);
        k(c), l = !0;
      }
    },
    o(u) {
      for (let h = 0; h < i.length; h += 1)
        E(i[h]);
      E(c), l = !1;
    },
    d(u) {
      u && j(n);
      for (let h = 0; h < i.length; h += 1)
        i[h].d(u);
      u && j(o), c && c.d(u), u && j(s);
    }
  };
}
function Y2(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), m(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function Z2(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: t[16] && er(t[7]),
      onContextMenu: t[32]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-insert-area jse-after svelte-lts9i5"), m(e, "data-type", "insert-selection-area-after"), m(e, "style", t[18]), m(e, "title", Am), pe(e, "jse-hovered", t[10] === Ta), pe(e, "jse-selected", t[16] && er(t[7]));
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 65664 && (s.selected = r[16] && er(r[7])), n.$set(s), (!i || o[0] & 262144) && m(e, "style", r[18]), (!i || o[0] & 1024) && pe(e, "jse-hovered", r[10] === Ta), (!i || o[0] & 65664) && pe(e, "jse-selected", r[16] && er(r[7]));
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function aL(t) {
  let e, n, i, r, o, s, l = !t[8].readOnly && (t[10] === Ta || t[16] && er(t[7])), a, f, c, u, h;
  const d = [KB, JB, qB], p = [];
  function g(b, y) {
    return y[0] & 1 && (n = null), y[0] & 1 && (i = null), n == null && (n = !!Array.isArray(b[0])), n ? 0 : (i == null && (i = !!dn(b[0])), i ? 1 : 2);
  }
  r = g(t, [-1, -1]), o = p[r] = d[r](t);
  let _ = l && Z2(t);
  return {
    c() {
      e = O("div"), o.c(), s = q(), _ && _.c(), m(e, "class", a = fn(xr("jse-json-node", { "jse-expanded": t[12] }, t[8].onClassName(t[1], t[0]))) + " svelte-lts9i5"), m(e, "data-path", f = kl(t[1])), pe(e, "jse-root", t[17]), pe(e, "jse-selected", t[16] && Tt(t[7])), pe(e, "jse-selected-key", t[16] && wn(t[7])), pe(e, "jse-selected-value", t[16] && yt(t[7])), pe(e, "jse-readonly", t[8].readOnly), pe(e, "jse-hovered", t[10] === tp);
    },
    m(b, y) {
      B(b, e, y), p[r].m(e, null), w(e, s), _ && _.m(e, null), c = !0, u || (h = [
        X(e, "mousedown", t[24]),
        X(e, "mousemove", t[25]),
        X(e, "mouseover", t[27]),
        X(e, "mouseout", t[28]),
        X(e, "focus", void 0),
        X(e, "blur", void 0)
      ], u = !0);
    },
    p(b, y) {
      let v = r;
      r = g(b, y), r === v ? p[r].p(b, y) : (me(), E(p[v], 1, 1, () => {
        p[v] = null;
      }), ge(), o = p[r], o ? o.p(b, y) : (o = p[r] = d[r](b), o.c()), k(o, 1), o.m(e, s)), y[0] & 66944 && (l = !b[8].readOnly && (b[10] === Ta || b[16] && er(b[7]))), l ? _ ? (_.p(b, y), y[0] & 66944 && k(_, 1)) : (_ = Z2(b), _.c(), k(_, 1), _.m(e, null)) : _ && (me(), E(_, 1, 1, () => {
        _ = null;
      }), ge()), (!c || y[0] & 4355 && a !== (a = fn(xr("jse-json-node", { "jse-expanded": b[12] }, b[8].onClassName(b[1], b[0]))) + " svelte-lts9i5")) && m(e, "class", a), (!c || y[0] & 2 && f !== (f = kl(b[1]))) && m(e, "data-path", f), (!c || y[0] & 135427) && pe(e, "jse-root", b[17]), (!c || y[0] & 70019) && pe(e, "jse-selected", b[16] && Tt(b[7])), (!c || y[0] & 70019) && pe(e, "jse-selected-key", b[16] && wn(b[7])), (!c || y[0] & 70019) && pe(e, "jse-selected-value", b[16] && yt(b[7])), (!c || y[0] & 4355) && pe(e, "jse-readonly", b[8].readOnly), (!c || y[0] & 5379) && pe(e, "jse-hovered", b[10] === tp);
    },
    i(b) {
      c || (k(o), k(_), c = !0);
    },
    o(b) {
      E(o), E(_), c = !1;
    },
    d(b) {
      b && j(e), p[r].d(), _ && _.d(), u = !1, nt(h);
    }
  };
}
function Va(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function fL(t, e, n) {
  let i, r, { $$slots: o = {}, $$scope: s } = e, { value: l } = e, { path: a } = e, { expandedMap: f } = e, { enforceStringMap: c } = e, { visibleSectionsMap: u } = e, { validationErrorsMap: h } = e, { searchResultItemsMap: d } = e, { selection: p } = e, { context: g } = e, { onDragSelectionStart: _ } = e;
  const b = Wn("jsoneditor:JSONNode");
  let y, v, M;
  const A = uR();
  let P, S, D, x, V, R;
  function W(te, ke, Ue, de, Ve, De, He, at, mt) {
    let Ye = Object.keys(ke).map((Me) => {
      const ae = rp(P, Me);
      return {
        key: Me,
        value: ke[Me],
        path: A(te.concat(Me)),
        pointer: ae,
        expandedMap: gr(Ue, ae),
        enforceStringMap: gr(de, ae),
        visibleSectionsMap: gr(Ve, ae),
        validationErrorsMap: gr(De, ae),
        keySearchResultItemsMap: RI(He, ae),
        valueSearchResultItemsMap: gr(He, ae),
        selection: Q0(at, ae)
      };
    });
    return mt && mt.offset !== 0 && (Ye = R0(Ye, mt.selectionStartIndex, mt.selectionItemsCount, mt.offset)), Ye;
  }
  function U(te, ke, Ue, de, Ve, De, He, at, mt, Ye) {
    const Me = Ue.start, ae = Math.min(Ue.end, ke.length);
    let ze = [];
    for (let ft = Me; ft < ae; ft++) {
      const bt = rp(P, ft);
      ze.push({
        index: ft,
        value: ke[ft],
        path: A(te.concat(String(ft))),
        pointer: bt,
        expandedMap: gr(de, bt),
        enforceStringMap: gr(Ve, bt),
        visibleSectionsMap: gr(De, bt),
        validationErrorsMap: gr(He, bt),
        searchResultItemsMap: gr(at, bt),
        selection: Q0(mt, bt)
      });
    }
    if (Ye && Ye.offset !== 0) {
      const ft = ze.map((bt) => bt.index);
      ze = R0(ze, Ye.selectionStartIndex, Ye.selectionItemsCount, Ye.offset);
      for (let bt = 0; bt < ze.length; bt++)
        ze[bt].index = ft[bt];
    }
    return ze;
  }
  function C(te) {
    te.stopPropagation();
    const ke = te.ctrlKey;
    g.onExpand(a, !S, ke);
  }
  function L(te) {
    te.stopPropagation(), g.onExpand(a, !0);
  }
  function I(te, ke) {
    const Ue = uf(a, Object.keys(l), te, ke);
    return g.onPatch(Ue), et(sr(Ue[0].path));
  }
  function H(te) {
    if (W9(te.target) || te.which === 1 && N3(te.target, "BUTTON"))
      return;
    te.stopPropagation(), te.preventDefault(), document.addEventListener("mousemove", T, !0), document.addEventListener("mouseup", K);
    const ke = ad(te.target), Ue = g.getJson(), de = g.getDocumentState();
    if (Y3(p, a, ke)) {
      te.button === 0 && _(te);
      return;
    }
    if (Vn.selecting = !0, Vn.selectionAnchor = a, Vn.selectionAnchorType = ke, Vn.selectionFocus = a, te.shiftKey)
      p && g.onSelect(yn(Ue, p.anchorPath, a));
    else if (ke === Vt.multi)
      if (i && te.target.hasAttribute("data-path")) {
        const Ve = et(X3(l, de));
        g.onSelect($m(Ve));
      } else
        g.onSelect(yn(Ue, a, a));
    else
      g.onSelect(X0(Ue, ke, a));
    g.focus();
  }
  function N(te) {
    if (Vn.selecting) {
      te.preventDefault(), te.stopPropagation(), Vn.selectionFocus == null && window.getSelection && window.getSelection().empty();
      const ke = ad(te.target);
      if (!kt(a, Vn.selectionFocus) || ke !== Vn.selectionAnchorType) {
        Vn.selectionFocus = a, Vn.selectionAnchorType = ke;
        const Ue = g.getJson();
        g.onSelect(yn(Ue, Vn.selectionAnchor, Vn.selectionFocus));
      }
    }
  }
  function T(te) {
    g.onDrag(te);
  }
  function K(te) {
    Vn.selecting && (Vn.selecting = !1, te.stopPropagation()), g.onDragEnd(), document.removeEventListener("mousemove", T, !0), document.removeEventListener("mouseup", K);
  }
  function ne() {
    var te, ke;
    return ((ke = (te = g.findElement([])) == null ? void 0 : te.getBoundingClientRect()) == null ? void 0 : ke.top) || 0;
  }
  function z(te, ke) {
    const de = ne() - te.initialContentTop;
    return ke.clientY - te.initialClientY - de;
  }
  function Y(te) {
    if (g.readOnly)
      return;
    const ke = wt(p.focusPath);
    if (!kt(a, ke)) {
      _(te);
      return;
    }
    const Ue = Te(p, x || vs);
    if (b("dragSelectionStart", { selection: p, items: Ue }), !Ue) {
      b("Cannot drag the current selection (probably spread over multiple sections)");
      return;
    }
    const de = Cl(p), Ve = Ue.findIndex((mt) => kt(mt.path, de)), De = g.getJson(), He = g.getDocumentState(), { offset: at } = gd({ json: De, documentState: He, deltaY: 0, items: Ue });
    n(11, M = {
      initialTarget: te.target,
      initialClientY: te.clientY,
      initialContentTop: ne(),
      selectionStartIndex: Ve,
      selectionItemsCount: tC(p).length,
      items: Ue,
      offset: at,
      didMoveItems: !1
    }), Vn.dragging = !0, document.addEventListener("mousemove", $, !0), document.addEventListener("mouseup", Q);
  }
  function $(te) {
    if (M) {
      const ke = g.getJson(), Ue = g.getDocumentState(), de = z(M, te), { offset: Ve } = gd({
        json: ke,
        documentState: Ue,
        deltaY: de,
        items: M.items
      });
      Ve !== M.offset && (b("drag selection", Ve, de), n(11, M = { ...M, offset: Ve, didMoveItems: !0 }));
    }
  }
  function Q(te) {
    if (M) {
      const ke = g.getJson(), Ue = g.getDocumentState(), de = z(M, te), { operations: Ve, updatedSelection: De } = gd({
        json: ke,
        documentState: Ue,
        deltaY: de,
        items: M.items
      });
      if (Ve)
        g.onPatch(Ve, (He, at) => ({
          state: {
            ...at,
            selection: De || p
          }
        }));
      else if (te.target === M.initialTarget && !M.didMoveItems) {
        const He = ad(te.target), at = B3(te.target);
        at && g.onSelect(X0(ke, He, at));
      }
      n(11, M = void 0), Vn.dragging = !1, document.removeEventListener("mousemove", $, !0), document.removeEventListener("mouseup", Q);
    }
  }
  function Te(te, ke) {
    const Ue = [];
    function de(Ve) {
      const De = a.concat(Ve), He = g.findElement(De);
      He != null && Ue.push({
        path: De,
        height: He.clientHeight
      });
    }
    if (Array.isArray(l)) {
      const Ve = Cl(te), De = mh(te), He = et(Ve), at = et(De), mt = ke.find((ae) => He >= ae.start && at <= ae.end);
      if (!mt)
        return null;
      const { start: Ye, end: Me } = mt;
      C3(Ye, Math.min(l.length, Me), (ae) => de(String(ae)));
    } else
      Object.keys(l).forEach(de);
    return Ue;
  }
  function Se(te) {
    Vn.selecting || Vn.dragging || (te.stopPropagation(), us(te.target, "data-type", "selectable-value") ? n(10, y = tp) : us(te.target, "data-type", "insert-selection-area-inside") ? n(10, y = no) : us(te.target, "data-type", "insert-selection-area-after") && n(10, y = Ta), clearTimeout(v));
  }
  function Fe(te) {
    te.stopPropagation(), v = setTimeout(() => n(10, y = void 0));
  }
  function Z(te) {
    te.shiftKey || (te.stopPropagation(), te.preventDefault(), g.onSelect(ro(a)));
  }
  function Ce(te) {
    te.shiftKey || (te.stopPropagation(), te.preventDefault(), g.onSelect(oo(a)));
  }
  function Ze(te) {
    g.onSelect(ro(a)), g.onContextMenu(te);
  }
  function be(te) {
    g.onSelect(oo(a)), g.onContextMenu(te);
  }
  return t.$$set = (te) => {
    "value" in te && n(0, l = te.value), "path" in te && n(1, a = te.path), "expandedMap" in te && n(2, f = te.expandedMap), "enforceStringMap" in te && n(3, c = te.enforceStringMap), "visibleSectionsMap" in te && n(4, u = te.visibleSectionsMap), "validationErrorsMap" in te && n(5, h = te.validationErrorsMap), "searchResultItemsMap" in te && n(6, d = te.searchResultItemsMap), "selection" in te && n(7, p = te.selection), "context" in te && n(8, g = te.context), "onDragSelectionStart" in te && n(33, _ = te.onDragSelectionStart), "$$scope" in te && n(35, s = te.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 2 && n(9, P = Ae(a)), t.$$.dirty[0] & 516 && n(12, S = f ? f[P] === !0 : !1), t.$$.dirty[0] & 777 && n(13, D = io(l, c, P, g.parser)), t.$$.dirty[0] & 528 && n(14, x = u ? u[P] : void 0), t.$$.dirty[0] & 544 && n(15, V = h ? h[P] : void 0), t.$$.dirty[0] & 640 && n(16, R = p ? p.pointersMap[P] === !0 : !1), t.$$.dirty[0] & 2 && n(17, i = a.length === 0), t.$$.dirty[0] & 2 && n(18, r = Va(a.length));
  }, [
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    P,
    y,
    M,
    S,
    D,
    x,
    V,
    R,
    i,
    r,
    W,
    U,
    C,
    L,
    I,
    H,
    N,
    Y,
    Se,
    Fe,
    Z,
    Ce,
    Ze,
    be,
    _,
    o,
    s
  ];
}
class dg extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      fL,
      aL,
      pt,
      {
        value: 0,
        path: 1,
        expandedMap: 2,
        enforceStringMap: 3,
        visibleSectionsMap: 4,
        validationErrorsMap: 5,
        searchResultItemsMap: 6,
        selection: 7,
        context: 8,
        onDragSelectionStart: 33
      },
      null,
      [-1, -1]
    );
  }
}
const cL = dg, uL = {
  prefix: "fas",
  iconName: "jsoneditor-expand",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"
  ]
}, hL = {
  prefix: "fas",
  iconName: "jsoneditor-collapse",
  icon: [
    512,
    512,
    [],
    null,
    "m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"
  ]
}, dL = {
  prefix: "fas",
  iconName: "jsoneditor-format",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"
  ]
}, pL = {
  prefix: "fas",
  iconName: "jsoneditor-compact",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"
  ]
};
function mL(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function gL(t, e, n) {
  let i, r, o, { json: s } = e, { selection: l } = e, { readOnly: a } = e, { showSearch: f = !1 } = e, { historyState: c } = e, { onExpandAll: u } = e, { onCollapseAll: h } = e, { onUndo: d } = e, { onRedo: p } = e, { onSort: g } = e, { onTransform: _ } = e, { onContextMenu: b } = e, { onCopy: y } = e, { onRenderMenu: v } = e;
  function M() {
    n(1, f = !f);
  }
  let A, P, S, D;
  return t.$$set = (x) => {
    "json" in x && n(2, s = x.json), "selection" in x && n(3, l = x.selection), "readOnly" in x && n(4, a = x.readOnly), "showSearch" in x && n(1, f = x.showSearch), "historyState" in x && n(5, c = x.historyState), "onExpandAll" in x && n(6, u = x.onExpandAll), "onCollapseAll" in x && n(7, h = x.onCollapseAll), "onUndo" in x && n(8, d = x.onUndo), "onRedo" in x && n(9, p = x.onRedo), "onSort" in x && n(10, g = x.onSort), "onTransform" in x && n(11, _ = x.onTransform), "onContextMenu" in x && n(12, b = x.onContextMenu), "onCopy" in x && n(13, y = x.onCopy), "onRenderMenu" in x && n(14, v = x.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(20, i = s !== void 0), t.$$.dirty & 8, t.$$.dirty & 1048584 && n(19, r = i && (Tt(l) || wn(l) || yt(l))), t.$$.dirty & 68 && n(15, A = {
      type: "button",
      icon: uL,
      title: "Expand all",
      className: "jse-expand-all",
      onClick: u,
      disabled: !tn(s)
    }), t.$$.dirty & 132 && n(16, P = {
      type: "button",
      icon: hL,
      title: "Collapse all",
      className: "jse-collapse-all",
      onClick: h,
      disabled: !tn(s)
    }), t.$$.dirty & 4 && n(17, S = {
      type: "button",
      icon: ig,
      title: "Search (Ctrl+F)",
      className: "jse-search",
      onClick: M,
      disabled: s === void 0
    }), t.$$.dirty & 769844 && n(18, D = a ? [
      A,
      P,
      { type: "separator" },
      {
        type: "button",
        icon: Po,
        title: "Copy (Ctrl+C)",
        className: "jse-copy",
        onClick: y,
        disabled: !r
      },
      { type: "separator" },
      S,
      { type: "space" }
    ] : [
      A,
      P,
      { type: "separator" },
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: g,
        disabled: a || s === void 0
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: _,
        disabled: a || s === void 0
      },
      S,
      {
        type: "button",
        icon: uC,
        title: Om,
        className: "jse-contextmenu",
        onClick: b
      },
      { type: "separator" },
      {
        type: "button",
        icon: ng,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: d,
        disabled: !c.canUndo
      },
      {
        type: "button",
        icon: tg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: p,
        disabled: !c.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 278528 && n(0, o = v("tree", D) || D);
  }, [
    o,
    f,
    s,
    l,
    a,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    A,
    P,
    S,
    D,
    r,
    i
  ];
}
class bL extends Be {
  constructor(e) {
    super(), je(this, e, gL, mL, pt, {
      json: 2,
      selection: 3,
      readOnly: 4,
      showSearch: 1,
      historyState: 5,
      onExpandAll: 6,
      onCollapseAll: 7,
      onUndo: 8,
      onRedo: 9,
      onSort: 10,
      onTransform: 11,
      onContextMenu: 12,
      onCopy: 13,
      onRenderMenu: 14
    });
  }
}
const _L = bL;
function $2(t) {
  let e;
  return {
    c() {
      e = O("ul"), e.innerHTML = `<li class="svelte-1q2qkk2">Click inside the editor</li> 
        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> 
        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> 
        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>`, m(e, "class", "svelte-1q2qkk2");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function yL(t) {
  let e, n, i, r, o, s, l, a = !t[0] && $2();
  return {
    c() {
      e = O("div"), n = O("div"), i = q(), r = O("div"), o = le(`Empty document
    `), a && a.c(), s = q(), l = O("div"), m(n, "class", "jse-space jse-before svelte-1q2qkk2"), m(r, "class", "jse-contents svelte-1q2qkk2"), m(l, "class", "jse-space jse-after svelte-1q2qkk2"), m(e, "class", "jse-welcome svelte-1q2qkk2");
    },
    m(f, c) {
      B(f, e, c), w(e, n), w(e, i), w(e, r), w(r, o), a && a.m(r, null), w(e, s), w(e, l);
    },
    p(f, [c]) {
      f[0] ? a && (a.d(1), a = null) : a || (a = $2(), a.c(), a.m(r, null));
    },
    i: fe,
    o: fe,
    d(f) {
      f && j(e), a && a.d();
    }
  };
}
function wL(t, e, n) {
  let { readOnly: i } = e;
  return t.$$set = (r) => {
    "readOnly" in r && n(0, i = r.readOnly);
  }, [i];
}
class vL extends Be {
  constructor(e) {
    super(), je(this, e, wL, yL, pt, { readOnly: 0 });
  }
}
const kL = vL;
var Ap = {}, CL = {
  get exports() {
    return Ap;
  },
  set exports(t) {
    Ap = t;
  }
};
/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */
var e_ = function(t, e) {
  var n, i, r = 1, o = 0, s = 0, l = String.alphabet;
  function a(f, c, u) {
    if (u) {
      for (n = c; u = a(f, n), u < 76 && u > 65; )
        ++n;
      return +f.slice(c - 1, n);
    }
    return u = l && l.indexOf(f.charAt(c)), u > -1 ? u + 76 : (u = f.charCodeAt(c) || 0, u < 45 || u > 127 ? u : u < 46 ? 65 : u < 48 ? u - 1 : u < 58 ? u + 18 : u < 65 ? u - 11 : u < 91 ? u + 11 : u < 97 ? u - 37 : u < 123 ? u + 5 : u - 63);
  }
  if ((t += "") != (e += "")) {
    for (; r; )
      if (i = a(t, o++), r = a(e, s++), i < 76 && r < 76 && i > 66 && r > 66 && (i = a(t, o, o), r = a(e, s, o = n), s = n), i != r)
        return i < r ? -1 : 1;
  }
  return 0;
};
try {
  CL.exports = e_;
} catch {
  String.naturalCompare = e_;
}
function pg(t, e) {
  const n = typeof t == "string" ? t.toLowerCase() : t, i = typeof e == "string" ? e.toLowerCase() : e;
  return Ap(n, i);
}
function PC(t, e = [], n = [], i = 1) {
  if (Lt(xe(t, e))) {
    if (n === void 0)
      throw new Error("Cannot sort: no property selected by which to sort the array");
    return ML(t, e, n, i);
  }
  if (dn(t))
    return SL(t, e, i);
  throw new Error("Cannot sort: no array or object");
}
function SL(t, e = [], n = 1) {
  const i = xe(t, e), o = Object.keys(i).slice();
  o.sort((l, a) => n * pg(l, a));
  const s = [];
  for (let l = 0; l < o.length; l++) {
    const a = o[l], f = Ae(e.concat(a));
    s.push({
      op: "move",
      from: f,
      path: f
    });
  }
  return s;
}
function ML(t, e = [], n = [], i = 1) {
  const r = AL(n, i), o = xe(t, e);
  return [
    {
      op: "replace",
      path: Ae(e),
      value: o.slice(0).sort(r)
    }
  ];
}
function AL(t, e) {
  return function(i, r) {
    const o = xe(i, t), s = xe(r, t);
    return o === void 0 ? e : s === void 0 ? -e : typeof o != "string" && typeof s != "string" ? o > s ? e : o < s ? -e : 0 : e * pg(o, s);
  };
}
function t_(t, e, n) {
  const i = t.slice();
  return i[4] = e[n], i;
}
function n_(t, e) {
  let n, i = Lr(e[4].toString(), r_) + "", r, o, s, l;
  function a() {
    return e[3](e[4]);
  }
  return {
    key: t,
    first: null,
    c() {
      n = O("button"), r = le(i), m(n, "type", "button"), m(n, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), m(n, "title", o = e[4].toString()), pe(n, "jse-selected", e[4] === e[1]), this.first = n;
    },
    m(f, c) {
      B(f, n, c), w(n, r), s || (l = X(n, "click", Le(a)), s = !0);
    },
    p(f, c) {
      e = f, c & 1 && i !== (i = Lr(e[4].toString(), r_) + "") && Pe(r, i), c & 1 && o !== (o = e[4].toString()) && m(n, "title", o), c & 3 && pe(n, "jse-selected", e[4] === e[1]);
    },
    d(f) {
      f && j(n), s = !1, l();
    }
  };
}
function i_(t) {
  let e, n;
  return {
    c() {
      e = O("button"), n = le("..."), m(e, "type", "button"), m(e, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), m(e, "title", "Limited to " + la + " items");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p: fe,
    d(i) {
      i && j(e);
    }
  };
}
function OL(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, o = Gc(t[0], la);
  const s = (a) => a[4];
  for (let a = 0; a < o.length; a += 1) {
    let f = t_(t, o, a), c = s(f);
    i.set(c, n[a] = n_(c, f));
  }
  let l = t[0].length > la && i_();
  return {
    c() {
      e = O("div");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      r = q(), l && l.c(), m(e, "class", "jse-navigation-bar-dropdown svelte-6hb2gf");
    },
    m(a, f) {
      B(a, e, f);
      for (let c = 0; c < n.length; c += 1)
        n[c].m(e, null);
      w(e, r), l && l.m(e, null);
    },
    p(a, [f]) {
      f & 7 && (o = Gc(a[0], la), n = Do(n, f, s, 1, a, o, i, e, Gu, n_, r, t_)), a[0].length > la ? l ? l.p(a, f) : (l = i_(), l.c(), l.m(e, null)) : l && (l.d(1), l = null);
    },
    i: fe,
    o: fe,
    d(a) {
      a && j(e);
      for (let f = 0; f < n.length; f += 1)
        n[f].d();
      l && l.d();
    }
  };
}
const la = 100, r_ = 30;
function TL(t, e, n) {
  let { items: i } = e, { selectedItem: r } = e, { onSelect: o } = e;
  const s = (l) => o(l);
  return t.$$set = (l) => {
    "items" in l && n(0, i = l.items), "selectedItem" in l && n(1, r = l.selectedItem), "onSelect" in l && n(2, o = l.onSelect);
  }, [i, r, o, s];
}
class EL extends Be {
  constructor(e) {
    super(), je(this, e, TL, OL, pt, { items: 0, selectedItem: 1, onSelect: 2 });
  }
}
const PL = EL;
function o_(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("button"), n = le(t[2]), m(e, "type", "button"), m(e, "class", "jse-navigation-bar-button svelte-1r1k9th");
    },
    m(o, s) {
      B(o, e, s), w(e, n), i || (r = X(e, "click", t[9]), i = !0);
    },
    p(o, s) {
      s & 4 && Pe(n, o[2]);
    },
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function RL(t) {
  let e, n, i, r, o, s, l;
  i = new vt({ props: { data: cC } });
  let a = t[2] !== void 0 && o_(t);
  return {
    c() {
      e = O("div"), n = O("button"), oe(i.$$.fragment), r = q(), a && a.c(), m(n, "type", "button"), m(n, "class", "jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"), pe(n, "jse-open", t[1]), m(e, "class", "jse-navigation-bar-item svelte-1r1k9th");
    },
    m(f, c) {
      B(f, e, c), w(e, n), ie(i, n, null), w(e, r), a && a.m(e, null), t[10](e), o = !0, s || (l = X(n, "click", t[4]), s = !0);
    },
    p(f, [c]) {
      (!o || c & 2) && pe(n, "jse-open", f[1]), f[2] !== void 0 ? a ? a.p(f, c) : (a = o_(f), a.c(), a.m(e, null)) : a && (a.d(1), a = null);
    },
    i(f) {
      o || (k(i.$$.fragment, f), o = !0);
    },
    o(f) {
      E(i.$$.fragment, f), o = !1;
    },
    d(f) {
      f && j(e), re(i), a && a.d(), t[10](null), s = !1, l();
    }
  };
}
function IL(t, e, n) {
  let i, r;
  const { openAbsolutePopup: o, closeAbsolutePopup: s } = Hn("absolute-popup");
  let { path: l } = e, { index: a } = e, { onSelect: f } = e, { getItems: c } = e, u, h = !1, d;
  function p(y) {
    s(d), f(i.concat(y));
  }
  function g() {
    if (u) {
      n(1, h = !0);
      const y = {
        items: c(i),
        selectedItem: r,
        onSelect: p
      };
      d = o(PL, y, {
        anchor: u,
        closeOnOuterClick: !0,
        onClose: () => {
          n(1, h = !1);
        }
      });
    }
  }
  const _ = () => p(r);
  function b(y) {
    ht[y ? "unshift" : "push"](() => {
      u = y, n(0, u);
    });
  }
  return t.$$set = (y) => {
    "path" in y && n(5, l = y.path), "index" in y && n(6, a = y.index), "onSelect" in y && n(7, f = y.onSelect), "getItems" in y && n(8, c = y.getItems);
  }, t.$$.update = () => {
    t.$$.dirty & 96 && (i = l.slice(0, a)), t.$$.dirty & 96 && n(2, r = l[a]);
  }, [
    u,
    h,
    r,
    p,
    g,
    l,
    a,
    f,
    c,
    _,
    b
  ];
}
class NL extends Be {
  constructor(e) {
    super(), je(this, e, IL, RL, pt, {
      path: 5,
      index: 6,
      onSelect: 7,
      getItems: 8
    });
  }
}
const RC = NL;
function mg(t) {
  var e;
  if (navigator.clipboard)
    return navigator.clipboard.writeText(t);
  if ((e = document.queryCommandSupported) != null && e.call(document, "copy")) {
    const n = document.createElement("textarea");
    n.value = t, n.style.position = "fixed", n.style.opacity = "0", document.body.appendChild(n), n.select();
    try {
      document.execCommand("copy");
    } catch (i) {
      console.error(i);
    } finally {
      document.body.removeChild(n);
    }
  } else
    console.error("Copy failed.");
}
function s_(t) {
  let e, n, i, r, o, s;
  return n = new vt({ props: { data: Bs } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-navigation-bar-validation-error svelte-g0evpe");
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), r = !0, o || (s = _i(i = eg.call(null, e, {
        text: t[3],
        ...t[4]
      })), o = !0);
    },
    p(l, a) {
      i && Fn(i.update) && a & 8 && i.update.call(null, {
        text: l[3],
        ...l[4]
      });
    },
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n), o = !1, s();
    }
  };
}
function l_(t) {
  let e;
  return {
    c() {
      e = O("div"), e.textContent = "Copied!", m(e, "class", "jse-copied-text svelte-g0evpe");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function DL(t) {
  let e, n, i, r, o, s, l, a, f, c, u = t[3] && s_(t), h = t[2] && l_();
  return l = new vt({ props: { data: Po } }), {
    c() {
      e = O("div"), n = O("input"), i = q(), u && u.c(), r = q(), h && h.c(), o = q(), s = O("button"), oe(l.$$.fragment), m(n, "type", "text"), m(n, "class", "jse-navigation-bar-text svelte-g0evpe"), n.value = t[0], m(s, "type", "button"), m(s, "class", "jse-navigation-bar-copy svelte-g0evpe"), m(s, "title", "Copy selected path to the clipboard"), pe(s, "copied", t[2]), m(e, "class", "jse-navigation-bar-path-editor svelte-g0evpe"), pe(e, "error", t[3]);
    },
    m(d, p) {
      B(d, e, p), w(e, n), t[15](n), w(e, i), u && u.m(e, null), w(e, r), h && h.m(e, null), w(e, o), w(e, s), ie(l, s, null), a = !0, f || (c = [
        X(n, "keydown", Le(t[6])),
        X(n, "input", t[5]),
        X(s, "click", t[7])
      ], f = !0);
    },
    p(d, [p]) {
      (!a || p & 1 && n.value !== d[0]) && (n.value = d[0]), d[3] ? u ? (u.p(d, p), p & 8 && k(u, 1)) : (u = s_(d), u.c(), k(u, 1), u.m(e, r)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), d[2] ? h || (h = l_(), h.c(), h.m(e, o)) : h && (h.d(1), h = null), (!a || p & 4) && pe(s, "copied", d[2]), (!a || p & 8) && pe(e, "error", d[3]);
    },
    i(d) {
      a || (k(u), k(l.$$.fragment, d), a = !0);
    },
    o(d) {
      E(u), E(l.$$.fragment, d), a = !1;
    },
    d(d) {
      d && j(e), t[15](null), u && u.d(), h && h.d(), re(l), f = !1, nt(c);
    }
  };
}
const jL = 1e3;
function BL(t, e, n) {
  let i;
  const r = Hn("absolute-popup");
  let { path: o } = e, { pathParser: s } = e, { onChange: l } = e, { onClose: a } = e, { onError: f } = e, { pathExists: c } = e, u, h, d = !1, p, g = !1;
  Ei(() => {
    _();
  }), Br(() => {
    clearTimeout(p);
  });
  function _() {
    u.focus();
  }
  function b(S) {
    try {
      const D = s.parse(S);
      return y(D), { path: D, error: void 0 };
    } catch (D) {
      return { path: void 0, error: D };
    }
  }
  function y(S) {
    if (!c(S))
      throw new Error("Path does not exist in current document");
  }
  function v(S) {
    n(0, h = S.currentTarget.value);
  }
  function M(S) {
    const D = Ko(S);
    if (D === "Escape" && a(), D === "Enter") {
      n(14, d = !0);
      const x = b(h);
      x.path !== void 0 ? l(x.path) : f(x.error);
    }
  }
  function A() {
    mg(h), n(2, g = !0), p = setTimeout(() => n(2, g = !1), jL), _();
  }
  function P(S) {
    ht[S ? "unshift" : "push"](() => {
      u = S, n(1, u);
    });
  }
  return t.$$set = (S) => {
    "path" in S && n(8, o = S.path), "pathParser" in S && n(9, s = S.pathParser), "onChange" in S && n(10, l = S.onChange), "onClose" in S && n(11, a = S.onClose), "onError" in S && n(12, f = S.onError), "pathExists" in S && n(13, c = S.pathExists);
  }, t.$$.update = () => {
    t.$$.dirty & 768 && n(0, h = s.stringify(o)), t.$$.dirty & 16385 && n(3, i = d ? b(h).error : void 0);
  }, [
    h,
    u,
    g,
    i,
    r,
    v,
    M,
    A,
    o,
    s,
    l,
    a,
    f,
    c,
    d,
    P
  ];
}
class LL extends Be {
  constructor(e) {
    super(), je(this, e, BL, DL, Pt, {
      path: 8,
      pathParser: 9,
      onChange: 10,
      onClose: 11,
      onError: 12,
      pathExists: 13
    });
  }
}
const xL = LL;
function a_(t, e, n) {
  const i = t.slice();
  return i[20] = e[n], i[22] = n, i;
}
function zL(t) {
  let e, n;
  return e = new xL({
    props: {
      path: t[3],
      onClose: t[12],
      onChange: t[13],
      onError: t[1],
      pathExists: t[9],
      pathParser: t[2]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.path = i[3]), r & 2 && (o.onError = i[1]), r & 4 && (o.pathParser = i[2]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function VL(t) {
  let e = [], n = /* @__PURE__ */ new Map(), i, r, o, s = t[3];
  const l = (f) => f[22];
  for (let f = 0; f < s.length; f += 1) {
    let c = a_(t, s, f), u = l(c);
    n.set(u, e[f] = f_(u, c));
  }
  let a = t[7] && c_(t);
  return {
    c() {
      for (let f = 0; f < e.length; f += 1)
        e[f].c();
      i = q(), a && a.c(), r = tt();
    },
    m(f, c) {
      for (let u = 0; u < e.length; u += 1)
        e[u].m(f, c);
      B(f, i, c), a && a.m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      c & 1288 && (s = f[3], me(), e = Do(e, c, l, 1, f, s, n, i.parentNode, Xu, f_, i, a_), ge()), f[7] ? a ? (a.p(f, c), c & 128 && k(a, 1)) : (a = c_(f), a.c(), k(a, 1), a.m(r.parentNode, r)) : a && (me(), E(a, 1, 1, () => {
        a = null;
      }), ge());
    },
    i(f) {
      if (!o) {
        for (let c = 0; c < s.length; c += 1)
          k(e[c]);
        k(a), o = !0;
      }
    },
    o(f) {
      for (let c = 0; c < e.length; c += 1)
        E(e[c]);
      E(a), o = !1;
    },
    d(f) {
      for (let c = 0; c < e.length; c += 1)
        e[c].d(f);
      f && j(i), a && a.d(f), f && j(r);
    }
  };
}
function f_(t, e) {
  let n, i, r;
  return i = new RC({
    props: {
      getItems: e[8],
      path: e[3],
      index: e[22],
      onSelect: e[10]
    }
  }), {
    key: t,
    first: null,
    c() {
      n = tt(), oe(i.$$.fragment), this.first = n;
    },
    m(o, s) {
      B(o, n, s), ie(i, o, s), r = !0;
    },
    p(o, s) {
      e = o;
      const l = {};
      s & 8 && (l.path = e[3]), s & 8 && (l.index = e[22]), i.$set(l);
    },
    i(o) {
      r || (k(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(n), re(i, o);
    }
  };
}
function c_(t) {
  let e, n;
  return e = new RC({
    props: {
      getItems: t[8],
      path: t[3],
      index: void 0,
      onSelect: t[10]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.path = i[3]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function FL(t) {
  let e, n, i, r, o, s, l = !tn(t[0]) && !t[6] ? "Navigation bar" : " ", a, f, c, u, h, d, p;
  const g = [VL, zL], _ = [];
  function b(y, v) {
    return y[6] ? 1 : 0;
  }
  return n = b(t), i = _[n] = g[n](t), c = new vt({
    props: {
      data: t[6] ? lb : ob
    }
  }), {
    c() {
      e = O("div"), i.c(), r = q(), o = O("button"), s = O("span"), a = le(l), f = q(), oe(c.$$.fragment), m(s, "class", "jse-navigation-bar-space svelte-15r3ahw"), m(o, "type", "button"), m(o, "class", "jse-navigation-bar-edit svelte-15r3ahw"), m(o, "title", u = t[6] ? "Cancel editing the selected path" : "Edit the selected path"), pe(o, "flex", !t[6]), pe(o, "editing", t[6]), m(e, "class", "jse-navigation-bar svelte-15r3ahw");
    },
    m(y, v) {
      B(y, e, v), _[n].m(e, null), w(e, r), w(e, o), w(o, s), w(s, a), w(o, f), ie(c, o, null), t[16](o), t[17](e), h = !0, d || (p = X(o, "click", t[11]), d = !0);
    },
    p(y, [v]) {
      let M = n;
      n = b(y), n === M ? _[n].p(y, v) : (me(), E(_[M], 1, 1, () => {
        _[M] = null;
      }), ge(), i = _[n], i ? i.p(y, v) : (i = _[n] = g[n](y), i.c()), k(i, 1), i.m(e, r)), (!h || v & 65) && l !== (l = !tn(y[0]) && !y[6] ? "Navigation bar" : " ") && Pe(a, l);
      const A = {};
      v & 64 && (A.data = y[6] ? lb : ob), c.$set(A), (!h || v & 64 && u !== (u = y[6] ? "Cancel editing the selected path" : "Edit the selected path")) && m(o, "title", u), (!h || v & 64) && pe(o, "flex", !y[6]), (!h || v & 64) && pe(o, "editing", y[6]);
    },
    i(y) {
      h || (k(i), k(c.$$.fragment, y), h = !0);
    },
    o(y) {
      E(i), E(c.$$.fragment, y), h = !1;
    },
    d(y) {
      y && j(e), _[n].d(), re(c), t[16](null), t[17](null), d = !1, p();
    }
  };
}
function HL(t, e, n) {
  let i, r;
  const o = Wn("jsoneditor:NavigationBar");
  let { json: s } = e, { documentState: l } = e, { onSelect: a } = e, { onError: f } = e, { pathParser: c } = e, u, h, d = !1;
  function p(S) {
    setTimeout(() => {
      if (u && u.scrollTo) {
        const D = u.scrollWidth - u.clientWidth;
        D > 0 && (o("scrollTo ", D), u.scrollTo({ left: D, behavior: "smooth" }));
      }
    });
  }
  function g(S) {
    o("get items for path", S);
    const D = xe(s, S);
    if (Array.isArray(D))
      return _9(0, D.length).map(String);
    if (dn(D)) {
      const V = Object.keys(D).slice(0);
      return V.sort(pg), V;
    } else
      return [];
  }
  function _(S) {
    return Li(s, S);
  }
  function b(S) {
    o("select path", JSON.stringify(S)), a(yn(s, S, S));
  }
  function y() {
    n(6, d = !d);
  }
  function v() {
    n(6, d = !1);
  }
  function M(S) {
    v(), b(S);
  }
  function A(S) {
    ht[S ? "unshift" : "push"](() => {
      h = S, n(5, h);
    });
  }
  function P(S) {
    ht[S ? "unshift" : "push"](() => {
      u = S, n(4, u);
    });
  }
  return t.$$set = (S) => {
    "json" in S && n(0, s = S.json), "documentState" in S && n(14, l = S.documentState), "onSelect" in S && n(15, a = S.onSelect), "onError" in S && n(1, f = S.onError), "pathParser" in S && n(2, c = S.pathParser);
  }, t.$$.update = () => {
    t.$$.dirty & 16384 && n(3, i = l.selection ? l.selection.focusPath : []), t.$$.dirty & 9 && n(7, r = tn(xe(s, i))), t.$$.dirty & 8 && p();
  }, [
    s,
    f,
    c,
    i,
    u,
    h,
    d,
    r,
    g,
    _,
    b,
    y,
    v,
    M,
    l,
    a,
    A,
    P
  ];
}
class WL extends Be {
  constructor(e) {
    super(), je(this, e, HL, FL, pt, {
      json: 0,
      documentState: 14,
      onSelect: 15,
      onError: 1,
      pathParser: 2
    });
  }
}
const UL = WL;
function u_(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p = t[3] !== -1 ? `${t[3] + 1}/` : "", g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C = !t[4] && h_(t);
  const L = [JL, qL], I = [];
  function H(T, K) {
    return T[2] ? 0 : 1;
  }
  l = H(t), a = I[l] = L[l](t), v = new vt({ props: { data: _N } }), P = new vt({ props: { data: rN } }), x = new vt({ props: { data: Wl } });
  let N = t[0] && !t[4] && d_(t);
  return {
    c() {
      e = O("div"), n = O("form"), C && C.c(), i = q(), r = O("div"), o = O("div"), s = O("div"), a.c(), f = q(), c = O("label"), u = O("input"), h = q(), d = O("div"), g = le(p), _ = le(t[10]), b = q(), y = O("button"), oe(v.$$.fragment), M = q(), A = O("button"), oe(P.$$.fragment), S = q(), D = O("button"), oe(x.$$.fragment), V = q(), N && N.c(), m(s, "class", "jse-search-icon svelte-18vllqh"), m(u, "class", "jse-search-input svelte-18vllqh"), m(u, "title", "Enter text to search"), m(u, "type", "text"), m(u, "placeholder", "Find"), m(c, "class", "jse-search-input-label svelte-18vllqh"), m(c, "about", "jse-search input"), m(d, "class", "jse-search-count svelte-18vllqh"), pe(d, "jse-visible", t[8] !== ""), m(y, "type", "button"), m(y, "class", "jse-search-next svelte-18vllqh"), m(y, "title", "Go to next search result (Enter)"), m(A, "type", "button"), m(A, "class", "jse-search-previous svelte-18vllqh"), m(A, "title", "Go to previous search result (Shift+Enter)"), m(D, "type", "button"), m(D, "class", "jse-search-clear svelte-18vllqh"), m(D, "title", "Close search box (Esc)"), m(o, "class", "jse-search-section svelte-18vllqh"), m(r, "class", "jse-search-contents svelte-18vllqh"), m(n, "class", "jse-search-form svelte-18vllqh"), m(e, "class", "jse-search-box svelte-18vllqh");
    },
    m(T, K) {
      B(T, e, K), w(e, n), C && C.m(n, null), w(n, i), w(n, r), w(r, o), w(o, s), I[l].m(s, null), w(o, f), w(o, c), w(c, u), No(u, t[8]), w(o, h), w(o, d), w(d, g), w(d, _), w(o, b), w(o, y), ie(v, y, null), w(o, M), w(o, A), ie(P, A, null), w(o, S), w(o, D), ie(x, D, null), w(r, V), N && N.m(r, null), R = !0, W || (U = [
        X(u, "input", t[21]),
        _i(GL.call(null, u)),
        X(y, "click", t[22]),
        X(A, "click", t[23]),
        X(D, "click", t[24]),
        X(n, "submit", t[12]),
        X(n, "keydown", t[13])
      ], W = !0);
    },
    p(T, K) {
      T[4] ? C && (me(), E(C, 1, 1, () => {
        C = null;
      }), ge()) : C ? (C.p(T, K), K & 16 && k(C, 1)) : (C = h_(T), C.c(), k(C, 1), C.m(n, i));
      let ne = l;
      l = H(T), l === ne ? I[l].p(T, K) : (me(), E(I[ne], 1, 1, () => {
        I[ne] = null;
      }), ge(), a = I[l], a ? a.p(T, K) : (a = I[l] = L[l](T), a.c()), k(a, 1), a.m(s, null)), K & 256 && u.value !== T[8] && No(u, T[8]), (!R || K & 8) && p !== (p = T[3] !== -1 ? `${T[3] + 1}/` : "") && Pe(g, p), (!R || K & 1024) && Pe(_, T[10]), (!R || K & 256) && pe(d, "jse-visible", T[8] !== ""), T[0] && !T[4] ? N ? N.p(T, K) : (N = d_(T), N.c(), N.m(r, null)) : N && (N.d(1), N = null);
    },
    i(T) {
      R || (k(C), k(a), k(v.$$.fragment, T), k(P.$$.fragment, T), k(x.$$.fragment, T), R = !0);
    },
    o(T) {
      E(C), E(a), E(v.$$.fragment, T), E(P.$$.fragment, T), E(x.$$.fragment, T), R = !1;
    },
    d(T) {
      T && j(e), C && C.d(), I[l].d(), re(v), re(P), re(x), N && N.d(), W = !1, nt(U);
    }
  };
}
function h_(t) {
  let e, n, i, r, o;
  return n = new vt({
    props: {
      data: t[0] ? Ni : So
    }
  }), {
    c() {
      e = O("button"), oe(n.$$.fragment), m(e, "type", "button"), m(e, "class", "jse-replace-toggle svelte-18vllqh"), m(e, "title", "Toggle visibility of replace options (Ctrl+H)");
    },
    m(s, l) {
      B(s, e, l), ie(n, e, null), i = !0, r || (o = X(e, "click", t[11]), r = !0);
    },
    p(s, l) {
      const a = {};
      l & 1 && (a.data = s[0] ? Ni : So), n.$set(a);
    },
    i(s) {
      i || (k(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), re(n), r = !1, o();
    }
  };
}
function qL(t) {
  let e, n;
  return e = new vt({ props: { data: ig } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function JL(t) {
  let e, n;
  return e = new vt({
    props: { data: ZI, spin: !0 }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function d_(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = O("div"), n = O("input"), i = q(), r = O("button"), r.textContent = "Replace", o = q(), s = O("button"), s.textContent = "All", m(n, "class", "jse-replace-input svelte-18vllqh"), m(n, "title", "Enter replacement text"), m(n, "type", "text"), m(n, "placeholder", "Replace"), m(r, "type", "button"), m(r, "title", "Replace current occurrence (Ctrl+Enter)"), m(r, "class", "svelte-18vllqh"), m(s, "type", "button"), m(s, "title", "Replace all occurrences"), m(s, "class", "svelte-18vllqh"), m(e, "class", "jse-replace-section svelte-18vllqh");
    },
    m(f, c) {
      B(f, e, c), w(e, n), No(n, t[9]), w(e, i), w(e, r), w(e, o), w(e, s), l || (a = [
        X(n, "input", t[25]),
        X(r, "click", t[14]),
        X(s, "click", t[15])
      ], l = !0);
    },
    p(f, c) {
      c & 512 && n.value !== f[9] && No(n, f[9]);
    },
    d(f) {
      f && j(e), l = !1, nt(a);
    }
  };
}
function KL(t) {
  let e, n, i = t[1] && u_(t);
  return {
    c() {
      i && i.c(), e = tt();
    },
    m(r, o) {
      i && i.m(r, o), B(r, e, o), n = !0;
    },
    p(r, [o]) {
      r[1] ? i ? (i.p(r, o), o & 2 && k(i, 1)) : (i = u_(r), i.c(), k(i, 1), i.m(e.parentNode, e)) : i && (me(), E(i, 1, 1, () => {
        i = null;
      }), ge());
    },
    i(r) {
      n || (k(i), n = !0);
    },
    o(r) {
      E(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && j(e);
    }
  };
}
function GL(t) {
  t.select();
}
function XL(t, e, n) {
  let i, r, { show: o = !1 } = e, { searching: s } = e, { resultCount: l = 0 } = e, { activeIndex: a = 0 } = e, { showReplace: f = !1 } = e, { readOnly: c = !1 } = e, { onChange: u = en } = e, { onPrevious: h = en } = e, { onNext: d = en } = e, { onReplace: p = en } = e, { onReplaceAll: g = en } = e, { onClose: _ = en } = e, b = "", y = "", v = "";
  function M() {
    b !== "" && u(b);
  }
  function A() {
    n(0, f = !f && !c);
  }
  function P(L) {
    L.preventDefault(), b !== y ? (y = b, r.cancel(), u(b)) : d();
  }
  function S(L) {
    L.stopPropagation();
    const I = Ko(L);
    I === "Enter" && (L.preventDefault(), d()), I === "Shift+Enter" && (L.preventDefault(), h()), (I === "Ctrl+Enter" || I === "Command+Enter") && (L.preventDefault(), f ? D() : d()), I === "Ctrl+H" && (L.preventDefault(), A()), I === "Escape" && (L.preventDefault(), _());
  }
  function D() {
    c || p(b, v);
  }
  function x() {
    c || g(b, v);
  }
  function V() {
    b = this.value, n(8, b);
  }
  const R = () => d(), W = () => h(), U = () => _();
  function C() {
    v = this.value, n(9, v);
  }
  return t.$$set = (L) => {
    "show" in L && n(1, o = L.show), "searching" in L && n(2, s = L.searching), "resultCount" in L && n(16, l = L.resultCount), "activeIndex" in L && n(3, a = L.activeIndex), "showReplace" in L && n(0, f = L.showReplace), "readOnly" in L && n(4, c = L.readOnly), "onChange" in L && n(17, u = L.onChange), "onPrevious" in L && n(5, h = L.onPrevious), "onNext" in L && n(6, d = L.onNext), "onReplace" in L && n(18, p = L.onReplace), "onReplaceAll" in L && n(19, g = L.onReplaceAll), "onClose" in L && n(7, _ = L.onClose);
  }, t.$$.update = () => {
    t.$$.dirty & 65536 && n(10, i = l >= $d ? `${$d - 1}+` : String(l)), t.$$.dirty & 131072 && n(20, r = ch(u, Ok)), t.$$.dirty & 1048832 && r(b), t.$$.dirty & 2 && o && M();
  }, [
    f,
    o,
    s,
    a,
    c,
    h,
    d,
    _,
    b,
    v,
    i,
    A,
    P,
    S,
    D,
    x,
    l,
    u,
    p,
    g,
    r,
    V,
    R,
    W,
    U,
    C
  ];
}
class QL extends Be {
  constructor(e) {
    super(), je(this, e, XL, KL, pt, {
      show: 1,
      searching: 2,
      resultCount: 16,
      activeIndex: 3,
      showReplace: 0,
      readOnly: 4,
      onChange: 17,
      onPrevious: 5,
      onNext: 6,
      onReplace: 18,
      onReplaceAll: 19,
      onClose: 7
    });
  }
}
const YL = QL;
var p_ = Number.isNaN || function(e) {
  return typeof e == "number" && e !== e;
};
function ZL(t, e) {
  return !!(t === e || p_(t) && p_(e));
}
function $L(t, e) {
  if (t.length !== e.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!ZL(t[n], e[n]))
      return !1;
  return !0;
}
function pf(t, e) {
  e === void 0 && (e = $L);
  var n = null;
  function i() {
    for (var r = [], o = 0; o < arguments.length; o++)
      r[o] = arguments[o];
    if (n && n.lastThis === this && e(r, n.lastArgs))
      return n.lastResult;
    var s = t.apply(this, r);
    return n = {
      lastResult: s,
      lastArgs: r,
      lastThis: this
    }, s;
  }
  return i.clear = function() {
    n = null;
  }, i;
}
const Pr = Wn("jsoneditor:actions");
async function IC({ json: t, documentState: e, indentation: n, readOnly: i, parser: r, onPatch: o }) {
  if (i || !nC(e.selection))
    return;
  const s = eC(t, e.selection, n, r);
  if (s == null)
    return;
  Pr("cut", { selection: e.selection, clipboard: s, indentation: n }), await mg(s);
  const { operations: l, newSelection: a } = oC(t, e.selection);
  o(l, (f, c) => ({
    state: {
      ...c,
      selection: a
    }
  }));
}
async function NC({ json: t, documentState: e, indentation: n, parser: i }) {
  const r = eC(t, e.selection, n, i);
  r != null && (Pr("copy", { clipboard: r, indentation: n }), await mg(r));
}
function DC({ clipboardText: t, json: e, documentState: n, readOnly: i, parser: r, onPatch: o, onChangeText: s, openRepairModal: l }) {
  if (i)
    return;
  function a(f) {
    if (e !== void 0) {
      const c = n.selection || yn(e || {}, [], []), u = rC(e, c, f, r);
      Pr("paste", { pastedText: f, operations: u, selection: c }), o(u, (h, d) => {
        let p = d;
        return u.filter((g) => (Ek(g) || Tm(g)) && tn(g.value)).forEach((g) => {
          const _ = Or(e, g.path);
          p = ko(h, p, _);
        }), {
          state: p
        };
      });
    } else
      Pr("paste text", { pastedText: f }), s(t, (c, u) => {
        if (c)
          return {
            state: ko(c, u, [])
          };
      });
  }
  try {
    a(t);
  } catch {
    l(t, (c) => {
      Pr("repaired pasted text: ", c), a(c);
    });
  }
}
function jC({ json: t, text: e, documentState: n, keepSelection: i, readOnly: r, onChange: o, onPatch: s }) {
  if (r || !n.selection)
    return;
  const l = wn(n.selection) || yt(n.selection) ? yn(t, n.selection.anchorPath, n.selection.focusPath) : n.selection;
  if (Mt(n.selection.focusPath))
    Pr("remove root", { selection: n.selection }), o({ text: "", json: void 0 }, { text: e, json: t }, {
      contentErrors: { validationErrors: [] },
      patchResult: null
    });
  else {
    const { operations: a, newSelection: f } = oC(t, l);
    Pr("remove", { operations: a, selection: n.selection, newSelection: f }), s(a, (c, u) => ({
      state: {
        ...u,
        selection: i ? n.selection : f
      }
    }));
  }
}
function ru({ insertType: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: o, parser: s, onPatch: l, onReplaceJson: a }) {
  if (o || !r.selection)
    return;
  const f = CI(i, r.selection, t);
  if (i !== void 0) {
    const c = s.stringify(f), u = rC(i, r.selection, c, s);
    Pr("onInsert", { insertType: t, operations: u, newValue: f, data: c });
    const h = et(u.filter((d) => d.op === "add" || d.op === "replace"));
    l(u, (d, p) => {
      if (h) {
        const g = Or(d, h.path);
        if (tn(f))
          return {
            state: {
              ...Ri(d, p, g, Ba),
              selection: e ? ro(g) : p.selection
            }
          };
        if (f === "") {
          const _ = Mt(g) ? null : xe(d, wt(g));
          return {
            state: vp(d, {
              ...r,
              selection: dn(_) ? xi(g, !0) : Ot(g, !0)
            }, g)
          };
        }
        return;
      }
    }), Pr("after patch"), h && f === "" && ou(() => Qc(n, "", !0));
  } else {
    Pr("onInsert", { insertType: t, newValue: f });
    const c = [];
    a(f, (u, h) => ({
      state: {
        ...ko(u, h, c),
        selection: ro(c)
      }
    }));
  }
}
async function BC({ char: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: o, parser: s, onPatch: l, onReplaceJson: a, onSelect: f }) {
  if (!(o || !r.selection)) {
    if (wn(r.selection)) {
      const c = !r.selection.edit;
      f({ ...r.selection, edit: !0 }), ou(() => Qc(n, t, c));
      return;
    }
    if (t === "{")
      ru({
        insertType: "object",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
    else if (t === "[")
      ru({
        insertType: "array",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
    else if (yt(r.selection)) {
      if (!tn(xe(i, r.selection.focusPath))) {
        const c = !r.selection.edit;
        f({ ...r.selection, edit: !0 }), ou(() => Qc(n, t, c));
      }
    } else
      await ex({
        char: t,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
  }
}
async function ex({ char: t, refJsonEditor: e, json: n, documentState: i, readOnly: r, parser: o, onPatch: s, onReplaceJson: l }) {
  if (r || !i.selection)
    return;
  ru({
    insertType: "value",
    selectInside: !1,
    refJsonEditor: e,
    json: n,
    documentState: i,
    readOnly: r,
    parser: o,
    onPatch: s,
    onReplaceJson: l
  });
  const a = !xo(i.selection);
  ou(() => Qc(e, t, a));
}
function ou(t) {
  setTimeout(() => setTimeout(t));
}
function tx(t) {
  let e, n = Lr(
    Xc(
      {
        text: t[0],
        json: t[1]
      },
      t[2],
      t[3]
    ),
    Hc
  ) + "", i;
  return {
    c() {
      e = O("div"), i = le(n), m(e, "class", "jse-json-preview svelte-1ch6ow4");
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, [o]) {
      o & 15 && n !== (n = Lr(
        Xc(
          {
            text: r[0],
            json: r[1]
          },
          r[2],
          r[3]
        ),
        Hc
      ) + "") && Pe(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function nx(t, e, n) {
  let { text: i } = e, { json: r } = e, { indentation: o } = e, { parser: s } = e;
  return t.$$set = (l) => {
    "text" in l && n(0, i = l.text), "json" in l && n(1, r = l.json), "indentation" in l && n(2, o = l.indentation), "parser" in l && n(3, s = l.parser);
  }, [i, r, o, s];
}
class ix extends Be {
  constructor(e) {
    super(), je(this, e, nx, tx, Pt, {
      text: 0,
      json: 1,
      indentation: 2,
      parser: 3
    });
  }
}
const LC = ix;
const { window: rx } = Ku;
function m_(t) {
  let e, n, i;
  function r(s) {
    t[75](s);
  }
  let o = {
    json: t[10],
    selection: t[16].selection,
    readOnly: t[0],
    historyState: t[22],
    onExpandAll: t[39],
    onCollapseAll: t[40],
    onUndo: t[35],
    onRedo: t[36],
    onSort: t[37],
    onTransform: t[38],
    onContextMenu: t[44],
    onCopy: t[33],
    onRenderMenu: t[7]
  };
  return t[19] !== void 0 && (o.showSearch = t[19]), e = new _L({ props: o }), ht.push(() => Qi(e, "showSearch", r, t[19])), {
    c() {
      oe(e.$$.fragment);
    },
    m(s, l) {
      ie(e, s, l), i = !0;
    },
    p(s, l) {
      const a = {};
      l[0] & 1024 && (a.json = s[10]), l[0] & 65536 && (a.selection = s[16].selection), l[0] & 1 && (a.readOnly = s[0]), l[0] & 4194304 && (a.historyState = s[22]), l[0] & 128 && (a.onRenderMenu = s[7]), !n && l[0] & 524288 && (n = !0, a.showSearch = s[19], Xi(() => n = !1)), e.$set(a);
    },
    i(s) {
      i || (k(e.$$.fragment, s), i = !0);
    },
    o(s) {
      E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      re(e, s);
    }
  };
}
function g_(t) {
  let e, n;
  return e = new UL({
    props: {
      json: t[10],
      documentState: t[16],
      onSelect: t[48],
      onError: t[6],
      pathParser: t[4]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1024 && (o.json = i[10]), r[0] & 65536 && (o.documentState = i[16]), r[0] & 64 && (o.onError = i[6]), r[0] & 16 && (o.pathParser = i[4]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function ox(t) {
  let e;
  return {
    c() {
      e = O("div"), e.innerHTML = `<div class="jse-loading-space svelte-qojdc1"></div> 
      <div class="jse-loading svelte-qojdc1">loading...</div>`, m(e, "class", "jse-contents svelte-qojdc1");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function sx(t) {
  let e, n, i, r, o, s, l, a, f;
  const c = [ax, lx], u = [];
  function h(d, p) {
    return d[10] === void 0 ? 0 : 1;
  }
  return r = h(t), o = u[r] = c[r](t), {
    c() {
      e = O("label"), n = O("input"), i = q(), o.c(), s = tt(), m(n, "type", "text"), n.readOnly = "readonly", m(n, "tabindex", "-1"), m(n, "class", "jse-hidden-input svelte-qojdc1"), m(e, "class", "jse-hidden-input-label svelte-qojdc1");
    },
    m(d, p) {
      B(d, e, p), w(e, n), t[76](n), B(d, i, p), u[r].m(d, p), B(d, s, p), l = !0, a || (f = X(n, "paste", t[34]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? u[r].p(d, p) : (me(), E(u[g], 1, 1, () => {
        u[g] = null;
      }), ge(), o = u[r], o ? o.p(d, p) : (o = u[r] = c[r](d), o.c()), k(o, 1), o.m(s.parentNode, s));
    },
    i(d) {
      l || (k(o), l = !0);
    },
    o(d) {
      E(o), l = !1;
    },
    d(d) {
      d && j(e), t[76](null), d && j(i), u[r].d(d), d && j(s), a = !1, f();
    }
  };
}
function lx(t) {
  var d, p, g, _;
  let e, n, i, r, o, s, l, a, f, c;
  n = new YL({
    props: {
      show: t[19],
      resultCount: ((p = (d = t[17]) == null ? void 0 : d.items) == null ? void 0 : p.length) || 0,
      activeIndex: ((g = t[17]) == null ? void 0 : g.activeIndex) || 0,
      showReplace: t[20],
      searching: t[21],
      readOnly: t[0],
      onChange: t[26],
      onNext: t[27],
      onPrevious: t[28],
      onReplace: t[29],
      onReplaceAll: t[30],
      onClose: t[31]
    }
  }), o = new cL({
    props: {
      value: t[10],
      path: [],
      expandedMap: t[16].expandedMap,
      enforceStringMap: t[16].enforceStringMap,
      visibleSectionsMap: t[16].visibleSectionsMap,
      validationErrorsMap: t[24],
      searchResultItemsMap: (_ = t[17]) == null ? void 0 : _.itemsMap,
      selection: t[16].selection,
      context: t[13],
      onDragSelectionStart: en
    }
  });
  let u = t[18] && b_(t), h = t[23] && __(t);
  return f = new ag({
    props: {
      validationErrors: t[12],
      selectError: t[32]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), r = O("div"), oe(o.$$.fragment), s = q(), u && u.c(), l = q(), h && h.c(), a = q(), oe(f.$$.fragment), m(e, "class", "jse-search-box-container svelte-qojdc1"), m(r, "class", "jse-contents svelte-qojdc1"), m(r, "data-jsoneditor-scrollable-contents", !0);
    },
    m(b, y) {
      B(b, e, y), ie(n, e, null), B(b, i, y), B(b, r, y), ie(o, r, null), t[77](r), B(b, s, y), u && u.m(b, y), B(b, l, y), h && h.m(b, y), B(b, a, y), ie(f, b, y), c = !0;
    },
    p(b, y) {
      var P, S, D, x;
      const v = {};
      y[0] & 524288 && (v.show = b[19]), y[0] & 131072 && (v.resultCount = ((S = (P = b[17]) == null ? void 0 : P.items) == null ? void 0 : S.length) || 0), y[0] & 131072 && (v.activeIndex = ((D = b[17]) == null ? void 0 : D.activeIndex) || 0), y[0] & 1048576 && (v.showReplace = b[20]), y[0] & 2097152 && (v.searching = b[21]), y[0] & 1 && (v.readOnly = b[0]), n.$set(v);
      const M = {};
      y[0] & 1024 && (M.value = b[10]), y[0] & 65536 && (M.expandedMap = b[16].expandedMap), y[0] & 65536 && (M.enforceStringMap = b[16].enforceStringMap), y[0] & 65536 && (M.visibleSectionsMap = b[16].visibleSectionsMap), y[0] & 16777216 && (M.validationErrorsMap = b[24]), y[0] & 131072 && (M.searchResultItemsMap = (x = b[17]) == null ? void 0 : x.itemsMap), y[0] & 65536 && (M.selection = b[16].selection), y[0] & 8192 && (M.context = b[13]), o.$set(M), b[18] ? u ? (u.p(b, y), y[0] & 262144 && k(u, 1)) : (u = b_(b), u.c(), k(u, 1), u.m(l.parentNode, l)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), b[23] ? h ? (h.p(b, y), y[0] & 8388608 && k(h, 1)) : (h = __(b), h.c(), k(h, 1), h.m(a.parentNode, a)) : h && (me(), E(h, 1, 1, () => {
        h = null;
      }), ge());
      const A = {};
      y[0] & 4096 && (A.validationErrors = b[12]), f.$set(A);
    },
    i(b) {
      c || (k(n.$$.fragment, b), k(o.$$.fragment, b), k(u), k(h), k(f.$$.fragment, b), c = !0);
    },
    o(b) {
      E(n.$$.fragment, b), E(o.$$.fragment, b), E(u), E(h), E(f.$$.fragment, b), c = !1;
    },
    d(b) {
      b && j(e), re(n), b && j(i), b && j(r), re(o), t[77](null), b && j(s), u && u.d(b), b && j(l), h && h.d(b), b && j(a), re(f, b);
    }
  };
}
function ax(t) {
  let e, n, i, r;
  const o = [cx, fx], s = [];
  function l(a, f) {
    return a[11] === "" || a[11] === void 0 ? 0 : 1;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = tt();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), ge(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), k(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (k(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function b_(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[18].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: _h,
          text: "Paste as JSON instead",
          onMouseDown: t[45]
        },
        {
          text: "Leave as is",
          onClick: t[46]
        }
      ]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 262144 && (o.message = `You pasted a JSON ${Array.isArray(i[18].contents) ? "array" : "object"} as text`), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function __(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: xa,
          text: "Ok",
          onClick: t[8]
        },
        {
          icon: zo,
          text: "Repair manually instead",
          onClick: t[47]
        }
      ]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.actions = i[0] ? [] : [
        {
          icon: xa,
          text: "Ok",
          onClick: i[8]
        },
        {
          icon: zo,
          text: "Repair manually instead",
          onClick: i[47]
        }
      ]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function fx(t) {
  let e, n, i, r;
  return e = new Hr({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: zo,
          text: "Repair manually",
          onClick: t[47]
        }
      ]
    }
  }), i = new LC({
    props: {
      text: t[11],
      json: t[10],
      indentation: t[5],
      parser: t[3]
    }
  }), {
    c() {
      oe(e.$$.fragment), n = q(), oe(i.$$.fragment);
    },
    m(o, s) {
      ie(e, o, s), B(o, n, s), ie(i, o, s), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 1 && (l.actions = o[0] ? [] : [
        {
          icon: zo,
          text: "Repair manually",
          onClick: o[47]
        }
      ]), e.$set(l);
      const a = {};
      s[0] & 2048 && (a.text = o[11]), s[0] & 1024 && (a.json = o[10]), s[0] & 32 && (a.indentation = o[5]), s[0] & 8 && (a.parser = o[3]), i.$set(a);
    },
    i(o) {
      r || (k(e.$$.fragment, o), k(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(e.$$.fragment, o), E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      re(e, o), o && j(n), re(i, o);
    }
  };
}
function cx(t) {
  let e, n;
  return e = new kL({ props: { readOnly: t[0] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.readOnly = i[0]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function ux(t) {
  let e, n, i, r, o, s, l, a, f = t[1] && m_(t), c = t[2] && g_(t);
  const u = [sx, ox], h = [];
  function d(p, g) {
    return p[25] ? 1 : 0;
  }
  return r = d(t), o = h[r] = u[r](t), {
    c() {
      e = O("div"), f && f.c(), n = q(), c && c.c(), i = q(), o.c(), m(e, "class", "jse-tree-mode svelte-qojdc1"), pe(e, "no-main-menu", !t[1]);
    },
    m(p, g) {
      B(p, e, g), f && f.m(e, null), w(e, n), c && c.m(e, null), w(e, i), h[r].m(e, null), t[78](e), s = !0, l || (a = [
        X(rx, "mousedown", t[49]),
        X(e, "keydown", t[41]),
        X(e, "mousedown", t[42]),
        X(e, "contextmenu", t[43])
      ], l = !0);
    },
    p(p, g) {
      p[1] ? f ? (f.p(p, g), g[0] & 2 && k(f, 1)) : (f = m_(p), f.c(), k(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), ge()), p[2] ? c ? (c.p(p, g), g[0] & 4 && k(c, 1)) : (c = g_(p), c.c(), k(c, 1), c.m(e, i)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), ge()), o.p(p, g), (!s || g[0] & 2) && pe(e, "no-main-menu", !p[1]);
    },
    i(p) {
      s || (k(f), k(c), k(o), s = !0);
    },
    o(p) {
      E(f), E(c), E(o), s = !1;
    },
    d(p) {
      p && j(e), f && f.d(), c && c.d(), h[r].d(), t[78](null), l = !1, nt(a);
    }
  };
}
function hx(t, e, n) {
  let i;
  const r = Wn("jsoneditor:TreeMode"), o = typeof window > "u";
  r("isSSR:", o);
  const { open: s } = Hn("simple-modal"), l = wl(), a = wl(), { openAbsolutePopup: f, closeAbsolutePopup: c } = Hn("absolute-popup");
  let u, h, d, p = !1;
  const g = CC();
  let { readOnly: _ } = e, { externalContent: b } = e, { mainMenuBar: y } = e, { navigationBar: v } = e, { escapeControlCharacters: M } = e, { escapeUnicodeCharacters: A } = e, { parser: P } = e, { parseMemoizeOne: S } = e, { validator: D } = e, { validationParser: x } = e, { pathParser: V } = e, { indentation: R } = e, { onError: W } = e, { onChange: U } = e, { onChangeMode: C } = e, { onRenderValue: L } = e, { onRenderMenu: I } = e, { onClassName: H } = e, { onFocus: N } = e, { onBlur: T } = e, { onSortModal: K } = e, { onTransformModal: ne } = e, { onJSONEditorModal: z } = e, Y = !1;
  lg({
    onMount: Ei,
    onDestroy: Br,
    getWindow: () => Hl(d),
    hasFocus: () => Y && document.hasFocus() || Yc(d),
    onFocus: () => {
      p = !0, N && N();
    },
    onBlur: () => {
      p = !1, T && T();
    }
  });
  let $, Q, Te;
  function Se(F) {
    r("updateSelection", F);
    const he = typeof F == "function" ? F(Z.selection) : F;
    kt(he, Z.selection) || n(16, Z = {
      ...Z,
      selection: he
    });
  }
  let Fe = !1, Z = $c(), Ce, Ze, be, te = !1, ke = !1, Ue = !1, de = "";
  async function Ve(F) {
    r("search text updated", F), n(74, de = F), await Ci(), await Me();
  }
  async function De() {
    n(17, Ce = Ce ? AI(Ce) : void 0), await Me();
  }
  async function He() {
    n(17, Ce = Ce ? OI(Ce) : void 0), await Me();
  }
  async function at(F, he) {
    const Re = Ce == null ? void 0 : Ce.activeItem;
    if (r("handleReplace", { replacementText: he, activeItem: Re }), !Re)
      return;
    const { operations: ut, newSelection: Ne } = TI($, Z, he, Re, P);
    In(ut, (Ut, Dn) => ({
      state: { ...Dn, selection: Ne }
    })), await Ci(), await Me();
  }
  async function mt(F, he) {
    r("handleReplaceAll", { text: F, replacementText: he });
    const { operations: Re, newSelection: ut } = EI($, Z, F, he, P);
    In(Re, (Ne, Ut) => ({
      state: { ...Ut, selection: ut }
    })), await Ci(), await Me();
  }
  function Ye() {
    n(19, te = !1), n(20, ke = !1), Ve(""), G();
  }
  async function Me() {
    const F = Ce == null ? void 0 : Ce.activeItem;
    if (r("focusActiveSearchResult", Ce), F) {
      const he = F.path;
      n(16, Z = {
        ...vp($, Z, he),
        selection: void 0
      }), await Ci(), await Ui(he);
    }
  }
  function ae(F, he) {
    if (F === "") {
      r("clearing search result"), Ce !== void 0 && n(17, Ce = void 0);
      return;
    }
    n(21, Ue = !0), setTimeout(() => {
      r("searching...", F);
      const Re = lC(F, he, Z, $d);
      n(17, Ce = MI(he, Re, Ce)), n(21, Ue = !1);
    });
  }
  function ze(F) {
    r("select validation error", F), Se(Ot(F.path, !1)), Ui(F.path);
  }
  const ft = SC({
    onChange: (F) => {
      n(22, bt = F);
    }
  });
  let bt = ft.getState();
  function gn(F = Ba) {
    r("expand");
    const he = {
      ...Z,
      expandedMap: {},
      visibleSectionsMap: {}
    };
    n(16, Z = Ri($, he, [], F));
  }
  const Un = k9(ae, S6);
  let ot = !1, Gt = [], rn;
  const ri = pf(MC);
  function se(F, he, Re, ut) {
    $s(
      () => {
        let Ne;
        try {
          Ne = ri(F, he, Re, ut);
        } catch (Ut) {
          Ne = [
            {
              path: [],
              message: "Failed to validate: " + Ut.message,
              severity: jo.warning
            }
          ];
        }
        kt(Ne, Gt) || (r("validationErrors changed:", Ne), n(12, Gt = Ne));
      },
      (Ne) => r(`validationErrors updated in ${Ne} ms`)
    );
  }
  function ve() {
    return r("validate"), Te ? {
      parseError: Te,
      isRepairable: !1
    } : (se($, D, P, x), { validationErrors: Gt });
  }
  function ce() {
    return $;
  }
  function _t() {
    return Z;
  }
  function qt(F) {
    F.json !== void 0 && ct(F.json), F.text !== void 0 && Ft(F.text);
  }
  function ct(F) {
    if (F === void 0)
      return;
    const he = !kt($, F);
    if (r("update external json", {
      isChanged: he,
      currentlyText: $ === void 0
    }), !he)
      return;
    const Re = { json: $, text: Q }, ut = Z, Ne = $, Ut = Q, Dn = ot;
    n(10, $ = F), bn($), n(11, Q = void 0), n(23, ot = !1), Rt($), It({
      previousJson: Ne,
      previousState: ut,
      previousText: Ut,
      previousTextIsRepaired: Dn
    }), vi(Re, null);
  }
  function Ft(F) {
    if (F === void 0 || b.json !== void 0)
      return;
    const he = F !== Q;
    if (r("update external text", { isChanged: he }), !he)
      return;
    const Re = { json: $, text: Q }, ut = $, Ne = Z, Ut = Q, Dn = ot;
    try {
      n(10, $ = S(F)), bn($), n(11, Q = F), n(23, ot = !1), Te = void 0;
    } catch (un) {
      try {
        n(10, $ = S(Tr(F))), bn($), n(11, Q = F), n(23, ot = !0), Te = void 0, Rt($);
      } catch {
        n(10, $ = void 0), n(11, Q = b.text), n(23, ot = !1), Te = dh(Q, un.message || un.toString());
      }
    }
    Rt($), It({
      previousJson: ut,
      previousState: Ne,
      previousText: Ut,
      previousTextIsRepaired: Dn
    }), vi(Re, null);
  }
  function bn(F) {
    Fe || (Fe = !0, n(16, Z = Ri(F, Z, [], nI(F))));
  }
  function Rt(F) {
    Z.selection !== void 0 && (Z.selection && Li(F, Z.selection.anchorPath) && Li(F, Z.selection.focusPath) || (r("clearing selection: path does not exist anymore", Z.selection), n(16, Z = {
      ...Z,
      selection: Ks(F, Z)
    })));
  }
  function It({ previousJson: F, previousState: he, previousText: Re, previousTextIsRepaired: ut }) {
    F === void 0 && Re === void 0 || ($ !== void 0 ? F !== void 0 ? ft.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: F
          }
        ],
        state: Zn(he),
        json: void 0,
        text: Re,
        textIsRepaired: ut
      },
      redo: {
        patch: [{ op: "replace", path: "", value: $ }],
        state: Zn(Z),
        json: void 0,
        text: Q,
        textIsRepaired: ot
      }
    }) : ft.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: Re,
        state: Zn(he),
        textIsRepaired: ut
      },
      redo: {
        patch: void 0,
        json: $,
        state: Zn(Z),
        text: Q,
        textIsRepaired: ot
      }
    }) : F !== void 0 && ft.add({
      undo: {
        patch: void 0,
        json: F,
        state: Zn(he),
        text: Re,
        textIsRepaired: ut
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: Q,
        textIsRepaired: ot,
        state: Zn(Z)
      }
    }));
  }
  function Nt() {
    r("createDefaultSelection"), n(16, Z = {
      ...Z,
      selection: yn($ || {}, [], [])
    });
  }
  function Et(F, he) {
    if (r("patch", F, he), $ === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const Re = { json: $, text: Q }, ut = $, Ne = Z, Ut = Q, Dn = ot, mr = sC($, F), un = U3($, Z, F), ns = Sl($, F), s1 = cI(un.documentState, ns, !1);
    r("patch updatedSelection", ns);
    const Hs = typeof he == "function" ? he(un.json, s1) : void 0;
    n(10, $ = Hs && Hs.json !== void 0 ? Hs.json : un.json);
    const l1 = Hs && Hs.state !== void 0 ? Hs.state : s1;
    n(16, Z = l1), n(11, Q = void 0), n(23, ot = !1), n(18, be = void 0), Rt($), ft.add({
      undo: {
        patch: mr,
        json: void 0,
        text: Ut,
        state: Zn(Ne),
        textIsRepaired: Dn
      },
      redo: {
        patch: F,
        json: void 0,
        state: Zn(l1),
        text: Q,
        textIsRepaired: ot
      }
    });
    const a1 = {
      json: $,
      previousJson: ut,
      undo: mr,
      redo: F
    };
    return vi(Re, a1), a1;
  }
  function xt() {
    _ || !Z.selection || Se(xi(Z.selection.focusPath, !0));
  }
  function on() {
    if (_ || !Z.selection)
      return;
    const F = Z.selection.focusPath, he = xe($, F);
    tn(he) ? zs(F, he) : Se(Ot(F, !0));
  }
  function sn() {
    if (_ || !yt(Z.selection))
      return;
    const F = Z.selection.focusPath, he = Ae(F), Re = xe($, F), ut = !io(Re, Z.enforceStringMap, he, P), Ne = ut ? String(Re) : xl(String(Re), P);
    r("handleToggleEnforceString", { enforceString: ut, value: Re, updatedValue: Ne }), In(
      [
        {
          op: "replace",
          path: he,
          value: Ne
        }
      ],
      (Ut, Dn) => ({
        state: W3(Dn, he, ut)
      })
    );
  }
  function vn() {
    return ot && $ !== void 0 && Kr($), { json: $, text: Q };
  }
  async function ln(F = !0) {
    await IC({
      json: $,
      documentState: Z,
      indentation: F ? R : void 0,
      readOnly: _,
      parser: P,
      onPatch: In
    });
  }
  async function oi(F = !0) {
    await NC({
      json: $,
      documentState: Z,
      indentation: F ? R : void 0,
      parser: P
    });
  }
  function zn(F) {
    F.preventDefault();
    const he = F.clipboardData.getData("text/plain");
    DC({
      clipboardText: he,
      json: $,
      documentState: Z,
      readOnly: _,
      parser: P,
      onPatch: In,
      onChangeText: J,
      openRepairModal: _e
    });
  }
  function ue() {
    s(
      AC,
      {},
      {
        ...ks,
        styleWindow: { width: "450px" }
      },
      { onClose: () => G() }
    );
  }
  function _e(F, he) {
    s(
      TC,
      {
        text: F,
        onParse: hh,
        onRepair: M3,
        onApply: he
      },
      {
        ...ks,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => G() }
    );
  }
  function Ee() {
    jC({
      json: $,
      text: Q,
      documentState: Z,
      keepSelection: !1,
      readOnly: _,
      onChange: U,
      onPatch: In
    });
  }
  function dt() {
    if (_ || !nC(Z.selection) || Mt(Z.selection.focusPath))
      return;
    r("duplicate", { selection: Z.selection });
    const F = wI($, tC(Z.selection));
    In(F);
  }
  function Ht() {
    if (_ || !Z.selection || !Tt(Z.selection) && !yt(Z.selection) || Mt(Z.selection.focusPath))
      return;
    r("extract", { selection: Z.selection });
    const F = vI($, Z.selection);
    In(F, (he, Re) => {
      if (tn(he))
        return {
          state: ko(he, Re, [])
        };
    });
  }
  function Ct(F) {
    ru({
      insertType: F,
      selectInside: !0,
      refJsonEditor: d,
      json: $,
      documentState: Z,
      readOnly: _,
      parser: P,
      onPatch: In,
      onReplaceJson: Kr
    });
  }
  function si(F) {
    wn(Z.selection) && Se(Ot(Z.selection.focusPath, !1)), Ct(F);
  }
  function dr(F) {
    if (!(_ || !Z.selection)) {
      if (!bs(Z.selection)) {
        W(new Error(`Cannot convert current selection to ${F}`));
        return;
      }
      try {
        const he = Z.selection.anchorPath, Re = xe($, he), ut = R9(Re, F, P);
        if (ut === Re)
          return;
        const Ne = [
          {
            op: "replace",
            path: Ae(he),
            value: ut
          }
        ];
        r("handleConvert", {
          selection: Z.selection,
          path: he,
          type: F,
          operations: Ne
        }), In(Ne, (Ut, Dn) => ({
          state: ko(Ut, Dn, Z.selection.focusPath)
        }));
      } catch (he) {
        W(he);
      }
    }
  }
  function uo() {
    const F = K0($, Z, !1), he = wt(Z.selection.focusPath);
    !Mt(F.focusPath) && kt(he, wt(F.focusPath)) ? Se(oo(F.focusPath)) : Se(ro(he)), r("insert before", {
      selection: Z.selection,
      selectionBefore: F,
      parentPath: he
    }), Ci().then(di);
  }
  function pr() {
    const F = Tt(Z.selection) ? et(Z.selection.paths) : Z.selection.focusPath;
    r("insert after", F), Se(oo(F)), Ci().then(di);
  }
  async function ho(F) {
    await BC({
      char: F,
      selectInside: !0,
      refJsonEditor: d,
      json: $,
      documentState: Z,
      readOnly: _,
      parser: P,
      onPatch: In,
      onReplaceJson: Kr,
      onSelect: Se
    });
  }
  function qr() {
    if (_ || !ft.getState().canUndo)
      return;
    const F = ft.undo();
    if (!F)
      return;
    const he = { json: $, text: Q };
    n(10, $ = F.undo.patch ? ir($, F.undo.patch) : F.undo.json), n(16, Z = F.undo.state), n(11, Q = F.undo.text), n(23, ot = F.undo.textIsRepaired), r("undo", { item: F, json: $, documentState: Z });
    const Re = {
      json: $,
      previousJson: he.json,
      redo: F.undo.patch,
      undo: F.redo.patch
    };
    vi(he, Re), G(), Z.selection && Ui(Z.selection.focusPath, !1);
  }
  function Jr() {
    if (_ || !ft.getState().canRedo)
      return;
    const F = ft.redo();
    if (!F)
      return;
    const he = { json: $, text: Q };
    n(10, $ = F.redo.patch ? ir($, F.redo.patch) : F.redo.json), n(16, Z = F.redo.state), n(11, Q = F.redo.text), n(23, ot = F.redo.textIsRepaired), r("redo", { item: F, json: $, documentState: Z });
    const Re = {
      json: $,
      previousJson: he.json,
      redo: F.redo.patch,
      undo: F.undo.patch
    };
    vi(he, Re), G(), Z.selection && Ui(Z.selection.focusPath, !1);
  }
  function Wi(F) {
    _ || (Y = !0, K({
      id: l,
      json: $,
      rootPath: F,
      onSort: async ({ operations: he }) => {
        r("onSort", F, he), In(he, (Re, ut) => ({
          state: {
            ...ko(Re, ut, F),
            selection: Ot(F, !1)
          }
        }));
      },
      onClose: () => {
        Y = !1, G();
      }
    }));
  }
  function Gl() {
    if (!Z.selection)
      return;
    const F = G0($, Z.selection);
    Wi(F);
  }
  function Xl() {
    Wi([]);
  }
  function es({ id: F, rootPath: he, onTransform: Re, onClose: ut }) {
    Y = !0, ne({
      id: F || a,
      json: $,
      rootPath: he,
      onTransform: Re ? (Ne) => {
        Re({
          operations: Ne,
          json: $,
          transformedJson: ir($, Ne)
        });
      } : (Ne) => {
        r("onTransform", he, Ne), In(Ne, (Ut, Dn) => ({
          state: {
            ...ko(Ut, Dn, he),
            selection: Ot(he, !1)
          }
        }));
      },
      onClose: () => {
        Y = !1, G(), ut && ut();
      }
    });
  }
  function ts() {
    if (!Z.selection)
      return;
    const F = G0($, Z.selection);
    es({ rootPath: F });
  }
  function xs() {
    es({ rootPath: [] });
  }
  function zs(F, he) {
    r("openJSONEditorModal", { path: F, value: he }), Y = !0, z({
      content: { json: he },
      path: F,
      onPatch: pi.onPatch,
      onClose: () => {
        Y = !1, G();
      }
    });
  }
  async function Ui(F, he = !0) {
    n(16, Z = vp($, Z, wt(F))), await Ci();
    const Re = po(F);
    if (Re) {
      r("scrollTo", { path: F, elem: Re, refContents: u });
      const ut = u.getBoundingClientRect(), Ne = Re.getBoundingClientRect();
      if (!he && Ne.bottom > ut.top && Ne.top < ut.bottom)
        return;
      const Ut = -(ut.height / 4);
      g(Re, {
        container: u,
        offset: Ut,
        duration: Zd
      });
    }
  }
  function po(F) {
    return u ? u.querySelector(`div[data-path="${kl(F)}"]`) : null;
  }
  function mo(F) {
    const he = po(F);
    if (!he || !u)
      return;
    const Re = u.getBoundingClientRect(), ut = he.getBoundingClientRect(), Ne = 20, Ut = tn(xe($, F)) ? Ne : ut.height;
    ut.top < Re.top + Ne ? g(he, {
      container: u,
      offset: -Ne,
      duration: 0
    }) : ut.top + Ut > Re.bottom - Ne && g(he, {
      container: u,
      offset: -(Re.height - Ut - Ne),
      duration: 0
    });
  }
  function vi(F, he) {
    F.json === void 0 && (F == null ? void 0 : F.text) === void 0 || (Q !== void 0 ? U({ text: Q, json: void 0 }, F, { contentErrors: ve(), patchResult: he }) : $ !== void 0 && U({ text: void 0, json: $ }, F, { contentErrors: ve(), patchResult: he }));
  }
  function In(F, he) {
    if (!_)
      return r("handlePatch", F, he), Et(F, he);
  }
  function Kr(F, he) {
    const Re = Z, ut = $, Ne = Q, Ut = { json: $, text: Q }, Dn = ot, mr = Ri($, Z, [], Sr), un = typeof he == "function" ? he(F, mr) : void 0;
    n(10, $ = un && un.json !== void 0 ? un.json : F), n(16, Z = un && un.state !== void 0 ? un.state : mr), n(11, Q = void 0), n(23, ot = !1), Rt($), It({
      previousJson: ut,
      previousState: Re,
      previousText: Ne,
      previousTextIsRepaired: Dn
    }), vi(Ut, null);
  }
  function J(F, he) {
    r("handleChangeText");
    const Re = Z, ut = $, Ne = Q, Ut = { json: $, text: Q }, Dn = ot;
    try {
      n(10, $ = S(F)), n(16, Z = Ri($, Z, [], Sr)), n(11, Q = void 0), n(23, ot = !1);
    } catch {
      try {
        n(10, $ = S(Tr(F))), n(16, Z = Ri($, Z, [], Sr)), n(11, Q = F), n(23, ot = !0);
      } catch {
        n(10, $ = void 0), n(16, Z = $c({ json: $, expand: Sr })), n(11, Q = F), n(23, ot = !1);
      }
    }
    if (typeof he == "function") {
      const un = he($, Z);
      n(10, $ = un && un.json ? un.json : $), n(16, Z = un && un.state ? un.state : Z);
    }
    Rt($), It({
      previousJson: ut,
      previousState: Re,
      previousText: Ne,
      previousTextIsRepaired: Dn
    }), vi(Ut, null);
  }
  function ye(F, he, Re = !1) {
    r("expand", { path: F, expanded: he, recursive: Re }), he ? Re ? n(16, Z = Ri($, Z, F, Ba)) : n(16, Z = YR(Z, F)) : n(16, Z = H3(Z, F)), Z.selection && !he && rI(Z.selection, F) && Se(void 0), setTimeout(() => {
      Yc(d) || G();
    });
  }
  function qe() {
    ye([], !0, !0);
  }
  function Ke() {
    ye([], !1, !0);
  }
  function st(F) {
    r("openFind", { findAndReplace: F }), n(19, te = !1), n(20, ke = !1), Ci().then(() => {
      n(19, te = !0), n(20, ke = F);
    });
  }
  function Jt(F, he) {
    r("handleExpandSection", F, he);
    const Re = Ae(F);
    n(16, Z = ZR($, Z, Re, he));
  }
  function _n(F) {
    r("pasted json as text", F), n(18, be = F);
  }
  function Nn(F) {
    const he = Ko(F).replace(/^Command\+/, "Ctrl+"), Re = F.shiftKey;
    if (r("keydown", { combo: he, key: F.key }), he === "Ctrl+X" && (F.preventDefault(), ln(!0)), he === "Ctrl+Shift+X" && (F.preventDefault(), ln(!1)), he === "Ctrl+C" && (F.preventDefault(), oi(!0)), he === "Ctrl+Shift+C" && (F.preventDefault(), oi(!1)), he === "Ctrl+D" && (F.preventDefault(), dt()), (he === "Delete" || he === "Backspace") && (F.preventDefault(), Ee()), he === "Insert" && (F.preventDefault(), Ct("structure")), he === "Ctrl+A" && (F.preventDefault(), Se(uI())), he === "Ctrl+Q" && di(F), he === "Up" || he === "Shift+Up") {
      F.preventDefault();
      const Ne = Z.selection ? K0($, Z, Re, !0) || Z.selection : Ks($, Z);
      Se(Ne), mo(Ne.focusPath);
    }
    if (he === "Down" || he === "Shift+Down") {
      F.preventDefault();
      const Ne = Z.selection ? oI($, Z, Re, !0) || Z.selection : Ks($, Z);
      Se(Ne), mo(Ne.focusPath);
    }
    if (he === "Left" || he === "Shift+Left") {
      F.preventDefault();
      const Ne = Z.selection ? lI($, Z, Re, !_) || Z.selection : Ks($, Z);
      Se(Ne), mo(Ne.focusPath);
    }
    if (he === "Right" || he === "Shift+Right") {
      F.preventDefault();
      const Ne = Z.selection ? aI($, Z, Re, !_) || Z.selection : Ks($, Z);
      Se(Ne), mo(Ne.focusPath);
    }
    if (he === "Enter" && Z.selection) {
      if (!_ && Tt(Z.selection) && Z.selection.paths.length === 1) {
        const Ne = Z.selection.focusPath, Ut = xe($, wt(Ne));
        Array.isArray(Ut) && Se(Ot(Ne, !1));
      }
      if (!_ && wn(Z.selection) && (F.preventDefault(), Se({ ...Z.selection, edit: !0 })), yt(Z.selection)) {
        F.preventDefault();
        const Ne = xe($, Z.selection.focusPath);
        tn(Ne) ? ye(Z.selection.focusPath, !0) : _ || Se({ ...Z.selection, edit: !0 });
      }
    }
    if (he.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && Z.selection) {
      F.preventDefault(), ho(F.key);
      return;
    }
    if (he === "Enter" && (er(Z.selection) || En(Z.selection))) {
      F.preventDefault(), ho("");
      return;
    }
    if (he === "Ctrl+Enter" && yt(Z.selection)) {
      const Ne = xe($, Z.selection.focusPath);
      Zu(Ne) && window.open(String(Ne), "_blank");
    }
    if (he === "Escape" && Z.selection && (F.preventDefault(), Se(void 0)), he === "Ctrl+F" && (F.preventDefault(), st(!1)), he === "Ctrl+H" && (F.preventDefault(), st(!0)), he === "Ctrl+Z") {
      F.preventDefault();
      const Ne = document.activeElement;
      Ne && Ne.blur && Ne.focus ? (Ne.blur(), setTimeout(() => {
        qr(), setTimeout(() => Ne.select());
      })) : qr();
    }
    if (he === "Ctrl+Shift+Z") {
      F.preventDefault();
      const Ne = document.activeElement;
      Ne && Ne.blur && Ne.focus ? (Ne.blur(), setTimeout(() => {
        Jr(), setTimeout(() => Ne.select());
      })) : Jr();
    }
  }
  function Wt(F) {
    r("handleMouseDown", F), setTimeout(() => {
      setTimeout(() => {
        !p && !N3(F.target, "BUTTON") && (G(), !Z.selection && $ === void 0 && (Q === "" || Q === void 0) && Nt());
      });
    });
  }
  function qn({ anchor: F, left: he, top: Re, width: ut, height: Ne, offsetTop: Ut, offsetLeft: Dn, showTip: mr }) {
    const un = {
      json: $,
      documentState: Z,
      parser: P,
      showTip: mr,
      onEditKey: xt,
      onEditValue: on,
      onToggleEnforceString: sn,
      onCut: ln,
      onCopy: oi,
      onPaste: ue,
      onRemove: Ee,
      onDuplicate: dt,
      onExtract: Ht,
      onInsertBefore: uo,
      onInsert: si,
      onConvert: dr,
      onInsertAfter: pr,
      onSort: Gl,
      onTransform: ts,
      onCloseContextMenu() {
        c(ns), G();
      }
    };
    Y = !0;
    const ns = f(pB, un, {
      left: he,
      top: Re,
      offsetTop: Ut,
      offsetLeft: Dn,
      width: ut,
      height: Ne,
      anchor: F,
      closeOnOuterClick: !0,
      onClose: () => {
        Y = !1, G();
      }
    });
  }
  function di(F) {
    if (!(_ || xo(Z.selection))) {
      if (F && (F.stopPropagation(), F.preventDefault()), F && F.type === "contextmenu" && F.target !== h)
        qn({
          left: F.clientX,
          top: F.clientY,
          width: $r,
          height: Zr,
          showTip: !1
        });
      else {
        const he = u == null ? void 0 : u.querySelector(".jse-context-menu-pointer.jse-selected");
        if (he)
          qn({
            anchor: he,
            offsetTop: 2,
            width: $r,
            height: Zr,
            showTip: !1
          });
        else {
          const Re = u == null ? void 0 : u.getBoundingClientRect();
          Re && qn({
            top: Re.top + 2,
            left: Re.left + 2,
            width: $r,
            height: Zr,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function Vs(F) {
    _ || qn({
      anchor: j3(F.target, "BUTTON"),
      offsetTop: 0,
      width: $r,
      height: Zr,
      showTip: !0
    });
  }
  async function Fs() {
    r("apply pasted json", be);
    const { path: F, contents: he } = be;
    Se(Ot(F, !1)), await Ci();
    const Re = [
      {
        op: "replace",
        path: Ae(F),
        value: he
      }
    ];
    In(Re, (ut, Ne) => ({
      state: ko(ut, Ne, F)
    }));
  }
  function Kh() {
    r("clear pasted json"), n(18, be = void 0);
  }
  function Gh() {
    C(Gn.text);
  }
  function Xh(F) {
    Se(F), G(), Ui(F.focusPath);
  }
  function G() {
    r("focus"), h && (h.focus(), h.select());
  }
  function Je(F) {
    !af(F.target, (Re) => Re === d) && xo(Z.selection) && (r("click outside the editor, stop edit mode"), Se((Re) => wn(Re) ? { ...Re, edit: !1 } : yt(Re) ? { ...Re, edit: !1 } : Re), p && h && (h.focus(), h.blur()), Ci().then(() => {
      setTimeout(() => {
        h && h.blur();
      });
    }));
  }
  function an(F) {
    return sI($, Z, F);
  }
  function qi(F) {
    i && i.onDrag(F);
  }
  function go() {
    i && i.onDragEnd();
  }
  let pi;
  function p8(F) {
    te = F, n(19, te);
  }
  function m8(F) {
    ht[F ? "unshift" : "push"](() => {
      h = F, n(14, h);
    });
  }
  function g8(F) {
    ht[F ? "unshift" : "push"](() => {
      u = F, n(9, u);
    });
  }
  function b8(F) {
    ht[F ? "unshift" : "push"](() => {
      d = F, n(15, d);
    });
  }
  return t.$$set = (F) => {
    "readOnly" in F && n(0, _ = F.readOnly), "externalContent" in F && n(50, b = F.externalContent), "mainMenuBar" in F && n(1, y = F.mainMenuBar), "navigationBar" in F && n(2, v = F.navigationBar), "escapeControlCharacters" in F && n(51, M = F.escapeControlCharacters), "escapeUnicodeCharacters" in F && n(52, A = F.escapeUnicodeCharacters), "parser" in F && n(3, P = F.parser), "parseMemoizeOne" in F && n(53, S = F.parseMemoizeOne), "validator" in F && n(54, D = F.validator), "validationParser" in F && n(55, x = F.validationParser), "pathParser" in F && n(4, V = F.pathParser), "indentation" in F && n(5, R = F.indentation), "onError" in F && n(6, W = F.onError), "onChange" in F && n(56, U = F.onChange), "onChangeMode" in F && n(57, C = F.onChangeMode), "onRenderValue" in F && n(58, L = F.onRenderValue), "onRenderMenu" in F && n(7, I = F.onRenderMenu), "onClassName" in F && n(59, H = F.onClassName), "onFocus" in F && n(60, N = F.onFocus), "onBlur" in F && n(61, T = F.onBlur), "onSortModal" in F && n(62, K = F.onSortModal), "onTransformModal" in F && n(63, ne = F.onTransformModal), "onJSONEditorModal" in F && n(64, z = F.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 3145728 && n(73, Ze = Xm({
      escapeControlCharacters: M,
      escapeUnicodeCharacters: A
    })), t.$$.dirty[1] & 524288 && qt(b), t.$$.dirty[0] & 1024 | t.$$.dirty[2] & 4096 && Un(de, $), t.$$.dirty[0] & 3072, t.$$.dirty[0] & 1032 | t.$$.dirty[1] & 25165824 && se($, D, P, x), t.$$.dirty[0] & 4096 && n(24, rn = GD(Gt)), t.$$.dirty[0] & 512 && (i = u ? qD(u) : void 0), t.$$.dirty[0] & 9 | t.$$.dirty[1] & 402653184 | t.$$.dirty[2] & 2048 && n(13, pi = {
      readOnly: _,
      parser: P,
      normalization: Ze,
      getJson: ce,
      getDocumentState: _t,
      findElement: po,
      findNextInside: an,
      focus: G,
      onPatch: In,
      onInsert: Ct,
      onExpand: ye,
      onSelect: Se,
      onFind: st,
      onExpandSection: Jt,
      onPasteJson: _n,
      onRenderValue: L,
      onContextMenu: qn,
      onClassName: H || (() => {
      }),
      onDrag: qi,
      onDragEnd: go
    }), t.$$.dirty[0] & 8192 && r("context changed", pi);
  }, [
    _,
    y,
    v,
    P,
    V,
    R,
    W,
    I,
    vn,
    u,
    $,
    Q,
    Gt,
    pi,
    h,
    d,
    Z,
    Ce,
    be,
    te,
    ke,
    Ue,
    bt,
    ot,
    rn,
    o,
    Ve,
    De,
    He,
    at,
    mt,
    Ye,
    ze,
    oi,
    zn,
    qr,
    Jr,
    Xl,
    xs,
    qe,
    Ke,
    Nn,
    Wt,
    di,
    Vs,
    Fs,
    Kh,
    Gh,
    Xh,
    Je,
    b,
    M,
    A,
    S,
    D,
    x,
    U,
    C,
    L,
    H,
    N,
    T,
    K,
    ne,
    z,
    gn,
    ve,
    ce,
    Et,
    es,
    Ui,
    po,
    G,
    Ze,
    de,
    p8,
    m8,
    g8,
    b8
  ];
}
class dx extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      hx,
      ux,
      pt,
      {
        readOnly: 0,
        externalContent: 50,
        mainMenuBar: 1,
        navigationBar: 2,
        escapeControlCharacters: 51,
        escapeUnicodeCharacters: 52,
        parser: 3,
        parseMemoizeOne: 53,
        validator: 54,
        validationParser: 55,
        pathParser: 4,
        indentation: 5,
        onError: 6,
        onChange: 56,
        onChangeMode: 57,
        onRenderValue: 58,
        onRenderMenu: 7,
        onClassName: 59,
        onFocus: 60,
        onBlur: 61,
        onSortModal: 62,
        onTransformModal: 63,
        onJSONEditorModal: 64,
        expand: 65,
        validate: 66,
        getJson: 67,
        patch: 68,
        acceptAutoRepair: 8,
        openTransformModal: 69,
        scrollTo: 70,
        findElement: 71,
        focus: 72
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get expand() {
    return this.$$.ctx[65];
  }
  get validate() {
    return this.$$.ctx[66];
  }
  get getJson() {
    return this.$$.ctx[67];
  }
  get patch() {
    return this.$$.ctx[68];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[8];
  }
  get openTransformModal() {
    return this.$$.ctx[69];
  }
  get scrollTo() {
    return this.$$.ctx[70];
  }
  get findElement() {
    return this.$$.ctx[71];
  }
  get focus() {
    return this.$$.ctx[72];
  }
}
const gg = dx;
function y_(t) {
  let e, n, i, r, o;
  const s = [mx, px], l = [];
  function a(f, c) {
    return c[0] & 16384 && (e = null), e == null && (e = !!Array.isArray(f[14])), e ? 0 : 1;
  }
  return n = a(t, [-1, -1]), i = l[n] = s[n](t), {
    c() {
      i.c(), r = tt();
    },
    m(f, c) {
      l[n].m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      let u = n;
      n = a(f, c), n === u ? l[n].p(f, c) : (me(), E(l[u], 1, 1, () => {
        l[u] = null;
      }), ge(), i = l[n], i ? i.p(f, c) : (i = l[n] = s[n](f), i.c()), k(i, 1), i.m(r.parentNode, r));
    },
    i(f) {
      o || (k(i), o = !0);
    },
    o(f) {
      E(i), o = !1;
    },
    d(f) {
      l[n].d(f), f && j(r);
    }
  };
}
function px(t) {
  let e;
  return {
    c() {
      e = le("(Only available for arrays, not for objects)");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function mx(t) {
  let e, n;
  return e = new DD({
    props: {
      queryOptions: t[12],
      json: t[14],
      onChange: t[21]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 4096 && (o.queryOptions = i[12]), r[0] & 16384 && (o.json = i[14]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function w_(t) {
  let e, n;
  return e = new gg({
    props: {
      externalContent: t[19],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: en,
      onError: console.error,
      onChange: en,
      onChangeMode: en,
      onFocus: en,
      onBlur: en,
      onSortModal: en,
      onTransformModal: en,
      onJSONEditorModal: en,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 524288 && (o.externalContent = i[19]), r[0] & 4 && (o.indentation = i[2]), r[0] & 8 && (o.escapeControlCharacters = i[3]), r[0] & 16 && (o.escapeUnicodeCharacters = i[4]), r[0] & 32 && (o.parser = i[5]), r[0] & 64 && (o.parseMemoizeOne = i[6]), r[0] & 1024 && (o.onRenderValue = i[10]), r[0] & 2048 && (o.onClassName = i[11]), r[0] & 128 && (o.validationParser = i[7]), r[0] & 256 && (o.pathParser = i[8]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function gx(t) {
  let e, n = t[17].toString() + "", i;
  return {
    c() {
      e = O("div"), i = le(n), m(e, "class", "jse-preview jse-error svelte-107mggt");
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, o) {
      o[0] & 131072 && n !== (n = r[17].toString() + "") && Pe(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function bx(t) {
  let e, n;
  return e = new gg({
    props: {
      externalContent: t[18],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: en,
      onError: console.error,
      onChange: en,
      onChangeMode: en,
      onFocus: en,
      onBlur: en,
      onSortModal: en,
      onTransformModal: en,
      onJSONEditorModal: en,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 262144 && (o.externalContent = i[18]), r[0] & 4 && (o.indentation = i[2]), r[0] & 8 && (o.escapeControlCharacters = i[3]), r[0] & 16 && (o.escapeUnicodeCharacters = i[4]), r[0] & 32 && (o.parser = i[5]), r[0] & 64 && (o.parseMemoizeOne = i[6]), r[0] & 1024 && (o.onRenderValue = i[10]), r[0] & 2048 && (o.onClassName = i[11]), r[0] & 128 && (o.validationParser = i[7]), r[0] & 256 && (o.pathParser = i[8]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function _x(t) {
  let e, n, i, r, o, s, l, a, f = t[20](t[0]).description + "", c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L, I, H, N, T, K, ne, z, Y, $, Q, Te, Se, Fe, Z, Ce, Ze, be;
  e = new UD({
    props: {
      queryLanguages: t[9],
      queryLanguageId: t[0],
      onChangeQueryLanguage: t[26]
    }
  }), v = new vt({
    props: {
      data: t[15] ? Ni : So
    }
  });
  let te = t[15] && y_(t);
  I = new vt({
    props: {
      data: t[16] ? Ni : So
    }
  });
  let ke = t[16] && w_(t);
  const Ue = [bx, gx], de = [];
  function Ve(De, He) {
    return De[17] ? 1 : 0;
  }
  return Y = Ve(t), $ = de[Y] = Ue[Y](t), {
    c() {
      oe(e.$$.fragment), n = q(), i = O("div"), r = O("div"), o = O("div"), s = O("div"), s.innerHTML = '<div class="jse-label-inner svelte-107mggt">Language</div>', l = q(), a = O("div"), c = q(), u = O("div"), u.innerHTML = '<div class="jse-label-inner svelte-107mggt">Path</div>', h = q(), d = O("input"), g = q(), _ = O("div"), b = O("div"), y = O("button"), oe(v.$$.fragment), M = le(`
                Wizard`), A = q(), te && te.c(), P = q(), S = O("div"), S.innerHTML = '<div class="jse-label-inner svelte-107mggt">Query</div>', D = q(), x = O("textarea"), V = q(), R = O("div"), W = O("div"), U = O("div"), C = O("div"), L = O("button"), oe(I.$$.fragment), H = le(`
                  Original`), N = q(), ke && ke.c(), T = q(), K = O("div"), ne = O("div"), ne.innerHTML = '<div class="jse-label-inner svelte-107mggt">Preview</div>', z = q(), $.c(), Q = q(), Te = O("div"), Se = O("button"), Fe = le("Transform"), m(s, "class", "jse-label svelte-107mggt"), m(a, "class", "jse-description svelte-107mggt"), m(u, "class", "jse-label svelte-107mggt"), m(d, "class", "jse-path svelte-107mggt"), m(d, "type", "text"), d.readOnly = !0, m(d, "title", "Selected path"), d.value = p = Mt(t[1]) ? "(whole document)" : Vi(yi(t[1])), m(y, "type", "button"), m(y, "class", "svelte-107mggt"), m(b, "class", "jse-label-inner svelte-107mggt"), m(_, "class", "jse-label svelte-107mggt"), m(S, "class", "jse-label svelte-107mggt"), m(x, "class", "jse-query svelte-107mggt"), m(x, "spellcheck", "false"), x.value = t[13], m(o, "class", "jse-query-contents svelte-107mggt"), m(L, "type", "button"), m(L, "class", "svelte-107mggt"), m(C, "class", "jse-label-inner svelte-107mggt"), m(U, "class", "jse-label svelte-107mggt"), m(W, "class", "jse-original-data svelte-107mggt"), pe(W, "jse-hide", !t[16]), m(ne, "class", "jse-label svelte-107mggt"), m(K, "class", "jse-preview-data svelte-107mggt"), m(R, "class", "jse-data-contents svelte-107mggt"), pe(R, "jse-hide-original-data", !t[16]), m(r, "class", "jse-main-contents svelte-107mggt"), m(Se, "type", "button"), m(Se, "class", "jse-primary svelte-107mggt"), Se.disabled = Z = !!t[17], m(Te, "class", "jse-actions svelte-107mggt"), m(i, "class", "jse-modal-contents svelte-107mggt");
    },
    m(De, He) {
      ie(e, De, He), B(De, n, He), B(De, i, He), w(i, r), w(r, o), w(o, s), w(o, l), w(o, a), a.innerHTML = f, w(o, c), w(o, u), w(o, h), w(o, d), w(o, g), w(o, _), w(_, b), w(b, y), ie(v, y, null), w(y, M), w(o, A), te && te.m(o, null), w(o, P), w(o, S), w(o, D), w(o, x), w(r, V), w(r, R), w(R, W), w(W, U), w(U, C), w(C, L), ie(I, L, null), w(L, H), w(W, N), ke && ke.m(W, null), w(R, T), w(R, K), w(K, ne), w(K, z), de[Y].m(K, null), w(i, Q), w(i, Te), w(Te, Se), w(Se, Fe), Ce = !0, Ze || (be = [
        X(y, "click", t[24]),
        X(x, "input", t[22]),
        X(L, "click", t[25]),
        X(Se, "click", t[23]),
        _i(wx.call(null, Se))
      ], Ze = !0);
    },
    p(De, He) {
      const at = {};
      He[0] & 512 && (at.queryLanguages = De[9]), He[0] & 1 && (at.queryLanguageId = De[0]), e.$set(at), (!Ce || He[0] & 1) && f !== (f = De[20](De[0]).description + "") && (a.innerHTML = f), (!Ce || He[0] & 2 && p !== (p = Mt(De[1]) ? "(whole document)" : Vi(yi(De[1]))) && d.value !== p) && (d.value = p);
      const mt = {};
      He[0] & 32768 && (mt.data = De[15] ? Ni : So), v.$set(mt), De[15] ? te ? (te.p(De, He), He[0] & 32768 && k(te, 1)) : (te = y_(De), te.c(), k(te, 1), te.m(o, P)) : te && (me(), E(te, 1, 1, () => {
        te = null;
      }), ge()), (!Ce || He[0] & 8192) && (x.value = De[13]);
      const Ye = {};
      He[0] & 65536 && (Ye.data = De[16] ? Ni : So), I.$set(Ye), De[16] ? ke ? (ke.p(De, He), He[0] & 65536 && k(ke, 1)) : (ke = w_(De), ke.c(), k(ke, 1), ke.m(W, null)) : ke && (me(), E(ke, 1, 1, () => {
        ke = null;
      }), ge()), (!Ce || He[0] & 65536) && pe(W, "jse-hide", !De[16]);
      let Me = Y;
      Y = Ve(De), Y === Me ? de[Y].p(De, He) : (me(), E(de[Me], 1, 1, () => {
        de[Me] = null;
      }), ge(), $ = de[Y], $ ? $.p(De, He) : ($ = de[Y] = Ue[Y](De), $.c()), k($, 1), $.m(K, null)), (!Ce || He[0] & 65536) && pe(R, "jse-hide-original-data", !De[16]), (!Ce || He[0] & 131072 && Z !== (Z = !!De[17])) && (Se.disabled = Z);
    },
    i(De) {
      Ce || (k(e.$$.fragment, De), k(v.$$.fragment, De), k(te), k(I.$$.fragment, De), k(ke), k($), Ce = !0);
    },
    o(De) {
      E(e.$$.fragment, De), E(v.$$.fragment, De), E(te), E(I.$$.fragment, De), E(ke), E($), Ce = !1;
    },
    d(De) {
      re(e, De), De && j(n), De && j(i), re(v), te && te.d(), re(I), ke && ke.d(), de[Y].d(), Ze = !1, nt(be);
    }
  };
}
function yx(t) {
  let e, n, i;
  return n = new x3({
    props: {
      $$slots: { default: [_x] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-modal jse-transform svelte-107mggt");
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1048575 | o[1] & 256 && (s.$$scope = { dirty: o, ctx: r }), n.$set(s);
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function wx(t) {
  t.focus();
}
function vx(t, e, n) {
  let i, r;
  const o = Wn("jsoneditor:TransformModal");
  let { id: s = "transform-modal-" + ma() } = e, { json: l } = e, { rootPath: a = [] } = e, { indentation: f } = e, { escapeControlCharacters: c } = e, { escapeUnicodeCharacters: u } = e, { parser: h } = e, { parseMemoizeOne: d } = e, { validationParser: p } = e, { pathParser: g } = e, { queryLanguages: _ } = e, { queryLanguageId: b } = e, { onChangeQueryLanguage: y } = e, { onRenderValue: v } = e, { onClassName: M } = e, { onTransform: A } = e;
  const { close: P } = Hn("simple-modal"), S = `${s}:${Ae(a)}`, D = Ji[S] || {};
  let x = Ji.showWizard !== !1, V = Ji.showOriginal !== !1, R = D.queryOptions || {}, W = b === D.queryLanguageId && D.query ? D.query : I(b).createQuery(l, D.queryOptions || {}), U = D.isManual || !1, C, L = { text: "" };
  function I(Q) {
    return _.find((Te) => Te.id === Q) || _[0];
  }
  function H(Q) {
    n(12, R = Q), n(13, W = I(b).createQuery(l, Q)), n(32, U = !1), o("updateQueryByWizard", { queryOptions: R, query: W, isManual: U });
  }
  function N(Q) {
    n(13, W = Q.target.value), n(32, U = !0), o("handleChangeQuery", { query: W, isManual: U });
  }
  function T(Q, Te) {
    try {
      o("previewTransform", { query: Te });
      const Se = I(b).executeQuery(Q, Te);
      n(18, L = { json: Se }), n(17, C = void 0);
    } catch (Se) {
      n(18, L = { text: "" }), n(17, C = Se);
    }
  }
  const K = ch(T, Ok);
  function ne() {
    try {
      o("handleTransform", { query: W });
      const Q = I(b).executeQuery(i, W);
      A([
        {
          op: "replace",
          path: Ae(a),
          value: Q
        }
      ]), P();
    } catch (Q) {
      console.error(Q), n(18, L = { text: "" }), n(17, C = Q.toString());
    }
  }
  function z() {
    n(15, x = !x), n(31, Ji.showWizard = x, Ji);
  }
  function Y() {
    n(16, V = !V), n(31, Ji.showOriginal = V, Ji);
  }
  function $(Q) {
    o("handleChangeQueryLanguage", Q), n(0, b = Q), y(Q);
    const Te = I(b);
    n(13, W = Te.createQuery(l, R)), n(32, U = !1);
  }
  return t.$$set = (Q) => {
    "id" in Q && n(27, s = Q.id), "json" in Q && n(28, l = Q.json), "rootPath" in Q && n(1, a = Q.rootPath), "indentation" in Q && n(2, f = Q.indentation), "escapeControlCharacters" in Q && n(3, c = Q.escapeControlCharacters), "escapeUnicodeCharacters" in Q && n(4, u = Q.escapeUnicodeCharacters), "parser" in Q && n(5, h = Q.parser), "parseMemoizeOne" in Q && n(6, d = Q.parseMemoizeOne), "validationParser" in Q && n(7, p = Q.validationParser), "pathParser" in Q && n(8, g = Q.pathParser), "queryLanguages" in Q && n(9, _ = Q.queryLanguages), "queryLanguageId" in Q && n(0, b = Q.queryLanguageId), "onChangeQueryLanguage" in Q && n(29, y = Q.onChangeQueryLanguage), "onRenderValue" in Q && n(10, v = Q.onRenderValue), "onClassName" in Q && n(11, M = Q.onClassName), "onTransform" in Q && n(30, A = Q.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 268435458 && n(14, i = xe(l, a)), t.$$.dirty[0] & 16384 && n(19, r = { json: i }), t.$$.dirty[0] & 24576 && K(i, W), t.$$.dirty[0] & 12289 | t.$$.dirty[1] & 3 && (n(
      31,
      Ji[S] = {
        queryOptions: R,
        query: W,
        queryLanguageId: b,
        isManual: U
      },
      Ji
    ), o("store state in memory", S, Ji[S]));
  }, [
    b,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    v,
    M,
    R,
    W,
    i,
    x,
    V,
    C,
    L,
    r,
    I,
    H,
    N,
    ne,
    z,
    Y,
    $,
    s,
    l,
    y,
    A,
    Ji,
    U
  ];
}
class kx extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      vx,
      yx,
      pt,
      {
        id: 27,
        json: 28,
        rootPath: 1,
        indentation: 2,
        escapeControlCharacters: 3,
        escapeUnicodeCharacters: 4,
        parser: 5,
        parseMemoizeOne: 6,
        validationParser: 7,
        pathParser: 8,
        queryLanguages: 9,
        queryLanguageId: 0,
        onChangeQueryLanguage: 29,
        onRenderValue: 10,
        onClassName: 11,
        onTransform: 30
      },
      null,
      [-1, -1]
    );
  }
}
const Cx = kx, _o = {};
function v_(t) {
  let e, n, i, r, o, s, l;
  function a(c) {
    t[13](c);
  }
  let f = {
    showChevron: !0,
    items: t[3]
  };
  return t[1] !== void 0 && (f.value = t[1]), o = new as({ props: f }), ht.push(() => Qi(o, "value", a, t[1])), {
    c() {
      e = O("tr"), n = O("th"), n.textContent = "Property", i = q(), r = O("td"), oe(o.$$.fragment), m(n, "class", "svelte-1y818v2"), m(r, "class", "svelte-1y818v2");
    },
    m(c, u) {
      B(c, e, u), w(e, n), w(e, i), w(e, r), ie(o, r, null), l = !0;
    },
    p(c, u) {
      const h = {};
      u & 8 && (h.items = c[3]), !s && u & 2 && (s = !0, h.value = c[1], Xi(() => s = !1)), o.$set(h);
    },
    i(c) {
      l || (k(o.$$.fragment, c), l = !0);
    },
    o(c) {
      E(o.$$.fragment, c), l = !1;
    },
    d(c) {
      c && j(e), re(o);
    }
  };
}
function k_(t) {
  let e, n;
  return {
    c() {
      e = O("div"), n = le(t[5]), m(e, "class", "jse-error svelte-1y818v2");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p(i, r) {
      r & 32 && Pe(n, i[5]);
    },
    d(i) {
      i && j(e);
    }
  };
}
function Sx(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L, I;
  n = new fg({
    props: {
      title: t[4] ? "Sort array items" : "Sort object keys"
    }
  });
  let H = t[4] && (t[3].length > 1 || t[1] === void 0) && v_(t);
  function N(ne) {
    t[14](ne);
  }
  let T = {
    showChevron: !0,
    clearable: !1,
    items: t[6]
  };
  t[2] !== void 0 && (T.value = t[2]), A = new as({ props: T }), ht.push(() => Qi(A, "value", N, t[2]));
  let K = t[5] && k_(t);
  return {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), r = O("div"), o = O("table"), s = O("colgroup"), s.innerHTML = `<col width="25%"/> 
        <col width="75%"/>`, l = q(), a = O("tbody"), f = O("tr"), c = O("th"), c.textContent = "Path", u = q(), h = O("td"), d = O("input"), g = q(), H && H.c(), _ = q(), b = O("tr"), y = O("th"), y.textContent = "Direction", v = q(), M = O("td"), oe(A.$$.fragment), S = q(), D = O("div"), K && K.c(), x = q(), V = O("div"), R = O("button"), W = le("Sort"), m(c, "class", "svelte-1y818v2"), m(d, "class", "jse-path svelte-1y818v2"), m(d, "type", "text"), d.readOnly = !0, m(d, "title", "Selected path"), d.value = p = Mt(t[0]) ? "(whole document)" : Vi(yi(t[0])), m(h, "class", "svelte-1y818v2"), m(y, "class", "svelte-1y818v2"), m(M, "class", "svelte-1y818v2"), m(o, "class", "svelte-1y818v2"), m(D, "class", "jse-space svelte-1y818v2"), m(R, "type", "button"), m(R, "class", "jse-primary svelte-1y818v2"), R.disabled = U = t[4] ? !t[1] : !1, m(V, "class", "jse-actions svelte-1y818v2"), m(r, "class", "jse-modal-contents svelte-1y818v2"), m(e, "class", "jse-modal jse-sort svelte-1y818v2");
    },
    m(ne, z) {
      B(ne, e, z), ie(n, e, null), w(e, i), w(e, r), w(r, o), w(o, s), w(o, l), w(o, a), w(a, f), w(f, c), w(f, u), w(f, h), w(h, d), w(a, g), H && H.m(a, null), w(a, _), w(a, b), w(b, y), w(b, v), w(b, M), ie(A, M, null), w(r, S), w(r, D), K && K.m(D, null), w(r, x), w(r, V), w(V, R), w(R, W), C = !0, L || (I = [
        X(R, "click", t[7]),
        _i(Mx.call(null, R))
      ], L = !0);
    },
    p(ne, [z]) {
      const Y = {};
      z & 16 && (Y.title = ne[4] ? "Sort array items" : "Sort object keys"), n.$set(Y), (!C || z & 1 && p !== (p = Mt(ne[0]) ? "(whole document)" : Vi(yi(ne[0]))) && d.value !== p) && (d.value = p), ne[4] && (ne[3].length > 1 || ne[1] === void 0) ? H ? (H.p(ne, z), z & 26 && k(H, 1)) : (H = v_(ne), H.c(), k(H, 1), H.m(a, _)) : H && (me(), E(H, 1, 1, () => {
        H = null;
      }), ge());
      const $ = {};
      !P && z & 4 && (P = !0, $.value = ne[2], Xi(() => P = !1)), A.$set($), ne[5] ? K ? K.p(ne, z) : (K = k_(ne), K.c(), K.m(D, null)) : K && (K.d(1), K = null), (!C || z & 18 && U !== (U = ne[4] ? !ne[1] : !1)) && (R.disabled = U);
    },
    i(ne) {
      C || (k(n.$$.fragment, ne), k(H), k(A.$$.fragment, ne), C = !0);
    },
    o(ne) {
      E(n.$$.fragment, ne), E(H), E(A.$$.fragment, ne), C = !1;
    },
    d(ne) {
      ne && j(e), re(n), H && H.d(), re(A), K && K.d(), L = !1, nt(I);
    }
  };
}
function Mx(t) {
  t.focus();
}
function Ax(t, e, n) {
  let i, r, o;
  const s = Wn("jsoneditor:SortModal");
  let { id: l } = e, { json: a } = e, { rootPath: f } = e, { onSort: c } = e;
  const { close: u } = Hn("simple-modal"), h = `${l}:${Ae(f)}`, d = xe(a, f), p = { value: 1, label: "ascending" }, _ = [p, { value: -1, label: "descending" }];
  let b = _o[h] && _o[h].selectedProperty || void 0, y = _o[h] && _o[h].selectedDirection || p, v;
  function M() {
    try {
      n(5, v = void 0);
      const S = b == null ? void 0 : b.value, D = y == null ? void 0 : y.value, x = PC(a, f, S, D);
      c({
        operations: x,
        rootPath: f,
        itemPath: S,
        direction: D
      }), u();
    } catch (S) {
      n(5, v = S.toString());
    }
  }
  function A(S) {
    b = S, n(1, b), n(3, o), n(12, r), n(4, i);
  }
  function P(S) {
    y = S, n(2, y);
  }
  return t.$$set = (S) => {
    "id" in S && n(8, l = S.id), "json" in S && n(9, a = S.json), "rootPath" in S && n(0, f = S.rootPath), "onSort" in S && n(10, c = S.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 16 && n(12, r = i ? yp(d) : void 0), t.$$.dirty & 4096 && n(3, o = r ? r.map(Js) : void 0), t.$$.dirty & 10 && b === void 0 && o && o.length === 1 && n(1, b = o[0]), t.$$.dirty & 2054 && (n(11, _o[h] = { selectedProperty: b, selectedDirection: y }, _o), s("store state in memory", h, _o[h]));
  }, n(4, i = Array.isArray(d)), [
    f,
    b,
    y,
    o,
    i,
    v,
    _,
    M,
    l,
    a,
    c,
    _o,
    r,
    A,
    P
  ];
}
class Ox extends Be {
  constructor(e) {
    super(), je(this, e, Ax, Sx, pt, { id: 8, json: 9, rootPath: 0, onSort: 10 });
  }
}
const Tx = Ox;
function kr() {
}
function Vf(t, e = 1e3) {
  if (t < 0.9 * e)
    return t.toFixed() + " B";
  const n = t / e;
  if (n < 0.9 * e)
    return n.toFixed(1) + " KB";
  const i = n / e;
  if (i < 0.9 * e)
    return i.toFixed(1) + " MB";
  const r = i / e;
  return r < 0.9 * e ? r.toFixed(1) + " GB" : (r / e).toFixed(1) + " TB";
}
function Ex(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Px(t, e, n) {
  let i, { readOnly: r = !1 } = e, { onFormat: o } = e, { onCompact: s } = e, { onSort: l } = e, { onTransform: a } = e, { onToggleSearch: f } = e, { onUndo: c } = e, { onRedo: u } = e, { canUndo: h } = e, { canRedo: d } = e, { canFormat: p } = e, { canCompact: g } = e, { canSort: _ } = e, { canTransform: b } = e, { onRenderMenu: y = en } = e, v;
  return t.$$set = (M) => {
    "readOnly" in M && n(1, r = M.readOnly), "onFormat" in M && n(2, o = M.onFormat), "onCompact" in M && n(3, s = M.onCompact), "onSort" in M && n(4, l = M.onSort), "onTransform" in M && n(5, a = M.onTransform), "onToggleSearch" in M && n(6, f = M.onToggleSearch), "onUndo" in M && n(7, c = M.onUndo), "onRedo" in M && n(8, u = M.onRedo), "canUndo" in M && n(9, h = M.canUndo), "canRedo" in M && n(10, d = M.canRedo), "canFormat" in M && n(11, p = M.canFormat), "canCompact" in M && n(12, g = M.canCompact), "canSort" in M && n(13, _ = M.canSort), "canTransform" in M && n(14, b = M.canTransform), "onRenderMenu" in M && n(15, y = M.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 32766 && n(16, v = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: dL,
        title: "Format JSON: add proper indentation and new lines (Ctrl+I)",
        className: "jse-format",
        onClick: o,
        disabled: r || !p
      },
      {
        type: "button",
        icon: pL,
        title: "Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",
        className: "jse-compact",
        onClick: s,
        disabled: r || !g
      },
      { type: "separator" },
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: l,
        disabled: r || !_
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: a,
        disabled: r || !b
      },
      {
        type: "button",
        icon: ig,
        title: "Search (Ctrl+F)",
        className: "jse-search",
        onClick: f
      },
      { type: "separator" },
      {
        type: "button",
        icon: ng,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: c,
        disabled: !h
      },
      {
        type: "button",
        icon: tg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: u,
        disabled: !d
      },
      { type: "space" }
    ]), t.$$.dirty & 98304 && n(0, i = y("text", v) || v);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v
  ];
}
class Rx extends Be {
  constructor(e) {
    super(), je(this, e, Px, Ex, pt, {
      readOnly: 1,
      onFormat: 2,
      onCompact: 3,
      onSort: 4,
      onTransform: 5,
      onToggleSearch: 6,
      onUndo: 7,
      onRedo: 8,
      canUndo: 9,
      canRedo: 10,
      canFormat: 11,
      canCompact: 12,
      canSort: 13,
      canTransform: 14,
      onRenderMenu: 15
    });
  }
}
const Ix = Rx;
class jt {
  constructor() {
  }
  lineAt(e) {
    if (e < 0 || e > this.length)
      throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);
    return this.lineInner(e, !1, 1, 0);
  }
  line(e) {
    if (e < 1 || e > this.lines)
      throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);
    return this.lineInner(e, !0, 1, 0);
  }
  replace(e, n, i) {
    let r = [];
    return this.decompose(0, e, r, 2), i.length && i.decompose(0, i.length, r, 3), this.decompose(n, this.length, r, 1), Cr.from(r, this.length - (n - e) + i.length);
  }
  append(e) {
    return this.replace(this.length, this.length, e);
  }
  slice(e, n = this.length) {
    let i = [];
    return this.decompose(e, n, i, 0), Cr.from(i, n - e);
  }
  eq(e) {
    if (e == this)
      return !0;
    if (e.length != this.length || e.lines != this.lines)
      return !1;
    let n = this.scanIdentical(e, 1), i = this.length - this.scanIdentical(e, -1), r = new va(this), o = new va(e);
    for (let s = n, l = n; ; ) {
      if (r.next(s), o.next(s), s = 0, r.lineBreak != o.lineBreak || r.done != o.done || r.value != o.value)
        return !1;
      if (l += r.value.length, r.done || l >= i)
        return !0;
    }
  }
  iter(e = 1) {
    return new va(this, e);
  }
  iterRange(e, n = this.length) {
    return new xC(this, e, n);
  }
  iterLines(e, n) {
    let i;
    if (e == null)
      i = this.iter();
    else {
      n == null && (n = this.lines + 1);
      let r = this.line(e).from;
      i = this.iterRange(r, Math.max(r, n == this.lines + 1 ? this.length : n <= 1 ? 0 : this.line(n - 1).to));
    }
    return new zC(i);
  }
  toString() {
    return this.sliceString(0);
  }
  toJSON() {
    let e = [];
    return this.flatten(e), e;
  }
  static of(e) {
    if (e.length == 0)
      throw new RangeError("A document must have at least one line");
    return e.length == 1 && !e[0] ? jt.empty : e.length <= 32 ? new kn(e) : Cr.from(kn.split(e, []));
  }
}
class kn extends jt {
  constructor(e, n = Nx(e)) {
    super(), this.text = e, this.length = n;
  }
  get lines() {
    return this.text.length;
  }
  get children() {
    return null;
  }
  lineInner(e, n, i, r) {
    for (let o = 0; ; o++) {
      let s = this.text[o], l = r + s.length;
      if ((n ? i : l) >= e)
        return new Dx(r, l, i, s);
      r = l + 1, i++;
    }
  }
  decompose(e, n, i, r) {
    let o = e <= 0 && n >= this.length ? this : new kn(C_(this.text, e, n), Math.min(n, this.length) - Math.max(0, e));
    if (r & 1) {
      let s = i.pop(), l = vc(o.text, s.text.slice(), 0, o.length);
      if (l.length <= 32)
        i.push(new kn(l, s.length + o.length));
      else {
        let a = l.length >> 1;
        i.push(new kn(l.slice(0, a)), new kn(l.slice(a)));
      }
    } else
      i.push(o);
  }
  replace(e, n, i) {
    if (!(i instanceof kn))
      return super.replace(e, n, i);
    let r = vc(this.text, vc(i.text, C_(this.text, 0, e)), n), o = this.length + i.length - (n - e);
    return r.length <= 32 ? new kn(r, o) : Cr.from(kn.split(r, []), o);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let o = 0, s = 0; o <= n && s < this.text.length; s++) {
      let l = this.text[s], a = o + l.length;
      o > e && s && (r += i), e < a && n > o && (r += l.slice(Math.max(0, e - o), n - o)), o = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.text)
      e.push(n);
  }
  scanIdentical() {
    return 0;
  }
  static split(e, n) {
    let i = [], r = -1;
    for (let o of e)
      i.push(o), r += o.length + 1, i.length == 32 && (n.push(new kn(i, r)), i = [], r = -1);
    return r > -1 && n.push(new kn(i, r)), n;
  }
}
class Cr extends jt {
  constructor(e, n) {
    super(), this.children = e, this.length = n, this.lines = 0;
    for (let i of e)
      this.lines += i.lines;
  }
  lineInner(e, n, i, r) {
    for (let o = 0; ; o++) {
      let s = this.children[o], l = r + s.length, a = i + s.lines - 1;
      if ((n ? a : l) >= e)
        return s.lineInner(e, n, i, r);
      r = l + 1, i = a + 1;
    }
  }
  decompose(e, n, i, r) {
    for (let o = 0, s = 0; s <= n && o < this.children.length; o++) {
      let l = this.children[o], a = s + l.length;
      if (e <= a && n >= s) {
        let f = r & ((s <= e ? 1 : 0) | (a >= n ? 2 : 0));
        s >= e && a <= n && !f ? i.push(l) : l.decompose(e - s, n - s, i, f);
      }
      s = a + 1;
    }
  }
  replace(e, n, i) {
    if (i.lines < this.lines)
      for (let r = 0, o = 0; r < this.children.length; r++) {
        let s = this.children[r], l = o + s.length;
        if (e >= o && n <= l) {
          let a = s.replace(e - o, n - o, i), f = this.lines - s.lines + a.lines;
          if (a.lines < f >> 5 - 1 && a.lines > f >> 5 + 1) {
            let c = this.children.slice();
            return c[r] = a, new Cr(c, this.length - (n - e) + i.length);
          }
          return super.replace(o, l, a);
        }
        o = l + 1;
      }
    return super.replace(e, n, i);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let o = 0, s = 0; o < this.children.length && s <= n; o++) {
      let l = this.children[o], a = s + l.length;
      s > e && o && (r += i), e < a && n > s && (r += l.sliceString(e - s, n - s, i)), s = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.children)
      n.flatten(e);
  }
  scanIdentical(e, n) {
    if (!(e instanceof Cr))
      return 0;
    let i = 0, [r, o, s, l] = n > 0 ? [0, 0, this.children.length, e.children.length] : [this.children.length - 1, e.children.length - 1, -1, -1];
    for (; ; r += n, o += n) {
      if (r == s || o == l)
        return i;
      let a = this.children[r], f = e.children[o];
      if (a != f)
        return i + a.scanIdentical(f, n);
      i += a.length + 1;
    }
  }
  static from(e, n = e.reduce((i, r) => i + r.length + 1, -1)) {
    let i = 0;
    for (let d of e)
      i += d.lines;
    if (i < 32) {
      let d = [];
      for (let p of e)
        p.flatten(d);
      return new kn(d, n);
    }
    let r = Math.max(32, i >> 5), o = r << 1, s = r >> 1, l = [], a = 0, f = -1, c = [];
    function u(d) {
      let p;
      if (d.lines > o && d instanceof Cr)
        for (let g of d.children)
          u(g);
      else
        d.lines > s && (a > s || !a) ? (h(), l.push(d)) : d instanceof kn && a && (p = c[c.length - 1]) instanceof kn && d.lines + p.lines <= 32 ? (a += d.lines, f += d.length + 1, c[c.length - 1] = new kn(p.text.concat(d.text), p.length + 1 + d.length)) : (a + d.lines > r && h(), a += d.lines, f += d.length + 1, c.push(d));
    }
    function h() {
      a != 0 && (l.push(c.length == 1 ? c[0] : Cr.from(c, f)), f = -1, a = c.length = 0);
    }
    for (let d of e)
      u(d);
    return h(), l.length == 1 ? l[0] : new Cr(l, n);
  }
}
jt.empty = /* @__PURE__ */ new kn([""], 0);
function Nx(t) {
  let e = -1;
  for (let n of t)
    e += n.length + 1;
  return e;
}
function vc(t, e, n = 0, i = 1e9) {
  for (let r = 0, o = 0, s = !0; o < t.length && r <= i; o++) {
    let l = t[o], a = r + l.length;
    a >= n && (a > i && (l = l.slice(0, i - r)), r < n && (l = l.slice(n - r)), s ? (e[e.length - 1] += l, s = !1) : e.push(l)), r = a + 1;
  }
  return e;
}
function C_(t, e, n) {
  return vc(t, [""], e, n);
}
class va {
  constructor(e, n = 1) {
    this.dir = n, this.done = !1, this.lineBreak = !1, this.value = "", this.nodes = [e], this.offsets = [n > 0 ? 1 : (e instanceof kn ? e.text.length : e.children.length) << 1];
  }
  nextInner(e, n) {
    for (this.done = this.lineBreak = !1; ; ) {
      let i = this.nodes.length - 1, r = this.nodes[i], o = this.offsets[i], s = o >> 1, l = r instanceof kn ? r.text.length : r.children.length;
      if (s == (n > 0 ? l : 0)) {
        if (i == 0)
          return this.done = !0, this.value = "", this;
        n > 0 && this.offsets[i - 1]++, this.nodes.pop(), this.offsets.pop();
      } else if ((o & 1) == (n > 0 ? 0 : 1)) {
        if (this.offsets[i] += n, e == 0)
          return this.lineBreak = !0, this.value = `
`, this;
        e--;
      } else if (r instanceof kn) {
        let a = r.text[s + (n < 0 ? -1 : 0)];
        if (this.offsets[i] += n, a.length > Math.max(0, e))
          return this.value = e == 0 ? a : n > 0 ? a.slice(e) : a.slice(0, a.length - e), this;
        e -= a.length;
      } else {
        let a = r.children[s + (n < 0 ? -1 : 0)];
        e > a.length ? (e -= a.length, this.offsets[i] += n) : (n < 0 && this.offsets[i]--, this.nodes.push(a), this.offsets.push(n > 0 ? 1 : (a instanceof kn ? a.text.length : a.children.length) << 1));
      }
    }
  }
  next(e = 0) {
    return e < 0 && (this.nextInner(-e, -this.dir), e = this.value.length), this.nextInner(e, this.dir);
  }
}
class xC {
  constructor(e, n, i) {
    this.value = "", this.done = !1, this.cursor = new va(e, n > i ? -1 : 1), this.pos = n > i ? e.length : 0, this.from = Math.min(n, i), this.to = Math.max(n, i);
  }
  nextInner(e, n) {
    if (n < 0 ? this.pos <= this.from : this.pos >= this.to)
      return this.value = "", this.done = !0, this;
    e += Math.max(0, n < 0 ? this.pos - this.to : this.from - this.pos);
    let i = n < 0 ? this.pos - this.from : this.to - this.pos;
    e > i && (e = i), i -= e;
    let { value: r } = this.cursor.next(e);
    return this.pos += (r.length + e) * n, this.value = r.length <= i ? r : n < 0 ? r.slice(r.length - i) : r.slice(0, i), this.done = !this.value, this;
  }
  next(e = 0) {
    return e < 0 ? e = Math.max(e, this.from - this.pos) : e > 0 && (e = Math.min(e, this.to - this.pos)), this.nextInner(e, this.cursor.dir);
  }
  get lineBreak() {
    return this.cursor.lineBreak && this.value != "";
  }
}
class zC {
  constructor(e) {
    this.inner = e, this.afterBreak = !0, this.value = "", this.done = !1;
  }
  next(e = 0) {
    let { done: n, lineBreak: i, value: r } = this.inner.next(e);
    return n ? (this.done = !0, this.value = "") : i ? this.afterBreak ? this.value = "" : (this.afterBreak = !0, this.next()) : (this.value = r, this.afterBreak = !1), this;
  }
  get lineBreak() {
    return !1;
  }
}
typeof Symbol < "u" && (jt.prototype[Symbol.iterator] = function() {
  return this.iter();
}, va.prototype[Symbol.iterator] = xC.prototype[Symbol.iterator] = zC.prototype[Symbol.iterator] = function() {
  return this;
});
class Dx {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.number = i, this.text = r;
  }
  get length() {
    return this.to - this.from;
  }
}
let ll = /* @__PURE__ */ "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t) => t ? parseInt(t, 36) : 1);
for (let t = 1; t < ll.length; t++)
  ll[t] += ll[t - 1];
function jx(t) {
  for (let e = 1; e < ll.length; e += 2)
    if (ll[e] > t)
      return ll[e - 1] <= t;
  return !1;
}
function S_(t) {
  return t >= 127462 && t <= 127487;
}
const M_ = 8205;
function fi(t, e, n = !0, i = !0) {
  return (n ? VC : Bx)(t, e, i);
}
function VC(t, e, n) {
  if (e == t.length)
    return e;
  e && FC(t.charCodeAt(e)) && HC(t.charCodeAt(e - 1)) && e--;
  let i = Xn(t, e);
  for (e += Mi(i); e < t.length; ) {
    let r = Xn(t, e);
    if (i == M_ || r == M_ || n && jx(r))
      e += Mi(r), i = r;
    else if (S_(r)) {
      let o = 0, s = e - 2;
      for (; s >= 0 && S_(Xn(t, s)); )
        o++, s -= 2;
      if (o % 2 == 0)
        break;
      e += 2;
    } else
      break;
  }
  return e;
}
function Bx(t, e, n) {
  for (; e > 0; ) {
    let i = VC(t, e - 2, n);
    if (i < e)
      return i;
    e--;
  }
  return 0;
}
function FC(t) {
  return t >= 56320 && t < 57344;
}
function HC(t) {
  return t >= 55296 && t < 56320;
}
function Xn(t, e) {
  let n = t.charCodeAt(e);
  if (!HC(n) || e + 1 == t.length)
    return n;
  let i = t.charCodeAt(e + 1);
  return FC(i) ? (n - 55296 << 10) + (i - 56320) + 65536 : n;
}
function bg(t) {
  return t <= 65535 ? String.fromCharCode(t) : (t -= 65536, String.fromCharCode((t >> 10) + 55296, (t & 1023) + 56320));
}
function Mi(t) {
  return t < 65536 ? 1 : 2;
}
const Op = /\r\n?|\n/;
var li = /* @__PURE__ */ function(t) {
  return t[t.Simple = 0] = "Simple", t[t.TrackDel = 1] = "TrackDel", t[t.TrackBefore = 2] = "TrackBefore", t[t.TrackAfter = 3] = "TrackAfter", t;
}(li || (li = {}));
class Rr {
  constructor(e) {
    this.sections = e;
  }
  get length() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2)
      e += this.sections[n];
    return e;
  }
  get newLength() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n + 1];
      e += i < 0 ? this.sections[n] : i;
    }
    return e;
  }
  get empty() {
    return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
  }
  iterGaps(e) {
    for (let n = 0, i = 0, r = 0; n < this.sections.length; ) {
      let o = this.sections[n++], s = this.sections[n++];
      s < 0 ? (e(i, r, o), r += o) : r += s, i += o;
    }
  }
  iterChangedRanges(e, n = !1) {
    Tp(this, e, n);
  }
  get invertedDesc() {
    let e = [];
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      r < 0 ? e.push(i, r) : e.push(r, i);
    }
    return new Rr(e);
  }
  composeDesc(e) {
    return this.empty ? e : e.empty ? this : WC(this, e);
  }
  mapDesc(e, n = !1) {
    return e.empty ? this : Ep(this, e, n);
  }
  mapPos(e, n = -1, i = li.Simple) {
    let r = 0, o = 0;
    for (let s = 0; s < this.sections.length; ) {
      let l = this.sections[s++], a = this.sections[s++], f = r + l;
      if (a < 0) {
        if (f > e)
          return o + (e - r);
        o += l;
      } else {
        if (i != li.Simple && f >= e && (i == li.TrackDel && r < e && f > e || i == li.TrackBefore && r < e || i == li.TrackAfter && f > e))
          return null;
        if (f > e || f == e && n < 0 && !l)
          return e == r || n < 0 ? o : o + a;
        o += a;
      }
      r = f;
    }
    if (e > r)
      throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);
    return o;
  }
  touchesRange(e, n = e) {
    for (let i = 0, r = 0; i < this.sections.length && r <= n; ) {
      let o = this.sections[i++], s = this.sections[i++], l = r + o;
      if (s >= 0 && r <= n && l >= e)
        return r < e && l > n ? "cover" : !0;
      r = l;
    }
    return !1;
  }
  toString() {
    let e = "";
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      e += (e ? " " : "") + i + (r >= 0 ? ":" + r : "");
    }
    return e;
  }
  toJSON() {
    return this.sections;
  }
  static fromJSON(e) {
    if (!Array.isArray(e) || e.length % 2 || e.some((n) => typeof n != "number"))
      throw new RangeError("Invalid JSON representation of ChangeDesc");
    return new Rr(e);
  }
  static create(e) {
    return new Rr(e);
  }
}
class jn extends Rr {
  constructor(e, n) {
    super(e), this.inserted = n;
  }
  apply(e) {
    if (this.length != e.length)
      throw new RangeError("Applying change set to a document with the wrong length");
    return Tp(this, (n, i, r, o, s) => e = e.replace(r, r + (i - n), s), !1), e;
  }
  mapDesc(e, n = !1) {
    return Ep(this, e, n, !0);
  }
  invert(e) {
    let n = this.sections.slice(), i = [];
    for (let r = 0, o = 0; r < n.length; r += 2) {
      let s = n[r], l = n[r + 1];
      if (l >= 0) {
        n[r] = l, n[r + 1] = s;
        let a = r >> 1;
        for (; i.length < a; )
          i.push(jt.empty);
        i.push(s ? e.slice(o, o + s) : jt.empty);
      }
      o += s;
    }
    return new jn(n, i);
  }
  compose(e) {
    return this.empty ? e : e.empty ? this : WC(this, e, !0);
  }
  map(e, n = !1) {
    return e.empty ? this : Ep(this, e, n, !0);
  }
  iterChanges(e, n = !1) {
    Tp(this, e, n);
  }
  get desc() {
    return Rr.create(this.sections);
  }
  filter(e) {
    let n = [], i = [], r = [], o = new Fa(this);
    e:
      for (let s = 0, l = 0; ; ) {
        let a = s == e.length ? 1e9 : e[s++];
        for (; l < a || l == a && o.len == 0; ) {
          if (o.done)
            break e;
          let c = Math.min(o.len, a - l);
          $n(r, c, -1);
          let u = o.ins == -1 ? -1 : o.off == 0 ? o.ins : 0;
          $n(n, c, u), u > 0 && Mo(i, n, o.text), o.forward(c), l += c;
        }
        let f = e[s++];
        for (; l < f; ) {
          if (o.done)
            break e;
          let c = Math.min(o.len, f - l);
          $n(n, c, -1), $n(r, c, o.ins == -1 ? -1 : o.off == 0 ? o.ins : 0), o.forward(c), l += c;
        }
      }
    return {
      changes: new jn(n, i),
      filtered: Rr.create(r)
    };
  }
  toJSON() {
    let e = [];
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n], r = this.sections[n + 1];
      r < 0 ? e.push(i) : r == 0 ? e.push([i]) : e.push([i].concat(this.inserted[n >> 1].toJSON()));
    }
    return e;
  }
  static of(e, n, i) {
    let r = [], o = [], s = 0, l = null;
    function a(c = !1) {
      if (!c && !r.length)
        return;
      s < n && $n(r, n - s, -1);
      let u = new jn(r, o);
      l = l ? l.compose(u.map(l)) : u, r = [], o = [], s = 0;
    }
    function f(c) {
      if (Array.isArray(c))
        for (let u of c)
          f(u);
      else if (c instanceof jn) {
        if (c.length != n)
          throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);
        a(), l = l ? l.compose(c.map(l)) : c;
      } else {
        let { from: u, to: h = u, insert: d } = c;
        if (u > h || u < 0 || h > n)
          throw new RangeError(`Invalid change range ${u} to ${h} (in doc of length ${n})`);
        let p = d ? typeof d == "string" ? jt.of(d.split(i || Op)) : d : jt.empty, g = p.length;
        if (u == h && g == 0)
          return;
        u < s && a(), u > s && $n(r, u - s, -1), $n(r, h - u, g), Mo(o, r, p), s = h;
      }
    }
    return f(e), a(!l), l;
  }
  static empty(e) {
    return new jn(e ? [e, -1] : [], []);
  }
  static fromJSON(e) {
    if (!Array.isArray(e))
      throw new RangeError("Invalid JSON representation of ChangeSet");
    let n = [], i = [];
    for (let r = 0; r < e.length; r++) {
      let o = e[r];
      if (typeof o == "number")
        n.push(o, -1);
      else {
        if (!Array.isArray(o) || typeof o[0] != "number" || o.some((s, l) => l && typeof s != "string"))
          throw new RangeError("Invalid JSON representation of ChangeSet");
        if (o.length == 1)
          n.push(o[0], 0);
        else {
          for (; i.length < r; )
            i.push(jt.empty);
          i[r] = jt.of(o.slice(1)), n.push(o[0], i[r].length);
        }
      }
    }
    return new jn(n, i);
  }
  static createSet(e, n) {
    return new jn(e, n);
  }
}
function $n(t, e, n, i = !1) {
  if (e == 0 && n <= 0)
    return;
  let r = t.length - 2;
  r >= 0 && n <= 0 && n == t[r + 1] ? t[r] += e : e == 0 && t[r] == 0 ? t[r + 1] += n : i ? (t[r] += e, t[r + 1] += n) : t.push(e, n);
}
function Mo(t, e, n) {
  if (n.length == 0)
    return;
  let i = e.length - 2 >> 1;
  if (i < t.length)
    t[t.length - 1] = t[t.length - 1].append(n);
  else {
    for (; t.length < i; )
      t.push(jt.empty);
    t.push(n);
  }
}
function Tp(t, e, n) {
  let i = t.inserted;
  for (let r = 0, o = 0, s = 0; s < t.sections.length; ) {
    let l = t.sections[s++], a = t.sections[s++];
    if (a < 0)
      r += l, o += l;
    else {
      let f = r, c = o, u = jt.empty;
      for (; f += l, c += a, a && i && (u = u.append(i[s - 2 >> 1])), !(n || s == t.sections.length || t.sections[s + 1] < 0); )
        l = t.sections[s++], a = t.sections[s++];
      e(r, f, o, c, u), r = f, o = c;
    }
  }
}
function Ep(t, e, n, i = !1) {
  let r = [], o = i ? [] : null, s = new Fa(t), l = new Fa(e);
  for (let a = -1; ; )
    if (s.ins == -1 && l.ins == -1) {
      let f = Math.min(s.len, l.len);
      $n(r, f, -1), s.forward(f), l.forward(f);
    } else if (l.ins >= 0 && (s.ins < 0 || a == s.i || s.off == 0 && (l.len < s.len || l.len == s.len && !n))) {
      let f = l.len;
      for ($n(r, l.ins, -1); f; ) {
        let c = Math.min(s.len, f);
        s.ins >= 0 && a < s.i && s.len <= c && ($n(r, 0, s.ins), o && Mo(o, r, s.text), a = s.i), s.forward(c), f -= c;
      }
      l.next();
    } else if (s.ins >= 0) {
      let f = 0, c = s.len;
      for (; c; )
        if (l.ins == -1) {
          let u = Math.min(c, l.len);
          f += u, c -= u, l.forward(u);
        } else if (l.ins == 0 && l.len < c)
          c -= l.len, l.next();
        else
          break;
      $n(r, f, a < s.i ? s.ins : 0), o && a < s.i && Mo(o, r, s.text), a = s.i, s.forward(s.len - c);
    } else {
      if (s.done && l.done)
        return o ? jn.createSet(r, o) : Rr.create(r);
      throw new Error("Mismatched change set lengths");
    }
}
function WC(t, e, n = !1) {
  let i = [], r = n ? [] : null, o = new Fa(t), s = new Fa(e);
  for (let l = !1; ; ) {
    if (o.done && s.done)
      return r ? jn.createSet(i, r) : Rr.create(i);
    if (o.ins == 0)
      $n(i, o.len, 0, l), o.next();
    else if (s.len == 0 && !s.done)
      $n(i, 0, s.ins, l), r && Mo(r, i, s.text), s.next();
    else {
      if (o.done || s.done)
        throw new Error("Mismatched change set lengths");
      {
        let a = Math.min(o.len2, s.len), f = i.length;
        if (o.ins == -1) {
          let c = s.ins == -1 ? -1 : s.off ? 0 : s.ins;
          $n(i, a, c, l), r && c && Mo(r, i, s.text);
        } else
          s.ins == -1 ? ($n(i, o.off ? 0 : o.len, a, l), r && Mo(r, i, o.textBit(a))) : ($n(i, o.off ? 0 : o.len, s.off ? 0 : s.ins, l), r && !s.off && Mo(r, i, s.text));
        l = (o.ins > a || s.ins >= 0 && s.len > a) && (l || i.length > f), o.forward2(a), s.forward(a);
      }
    }
  }
}
class Fa {
  constructor(e) {
    this.set = e, this.i = 0, this.next();
  }
  next() {
    let { sections: e } = this.set;
    this.i < e.length ? (this.len = e[this.i++], this.ins = e[this.i++]) : (this.len = 0, this.ins = -2), this.off = 0;
  }
  get done() {
    return this.ins == -2;
  }
  get len2() {
    return this.ins < 0 ? this.len : this.ins;
  }
  get text() {
    let { inserted: e } = this.set, n = this.i - 2 >> 1;
    return n >= e.length ? jt.empty : e[n];
  }
  textBit(e) {
    let { inserted: n } = this.set, i = this.i - 2 >> 1;
    return i >= n.length && !e ? jt.empty : n[i].slice(this.off, e == null ? void 0 : this.off + e);
  }
  forward(e) {
    e == this.len ? this.next() : (this.len -= e, this.off += e);
  }
  forward2(e) {
    this.ins == -1 ? this.forward(e) : e == this.ins ? this.next() : (this.ins -= e, this.off += e);
  }
}
class hs {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.flags = i;
  }
  get anchor() {
    return this.flags & 16 ? this.to : this.from;
  }
  get head() {
    return this.flags & 16 ? this.from : this.to;
  }
  get empty() {
    return this.from == this.to;
  }
  get assoc() {
    return this.flags & 4 ? -1 : this.flags & 8 ? 1 : 0;
  }
  get bidiLevel() {
    let e = this.flags & 3;
    return e == 3 ? null : e;
  }
  get goalColumn() {
    let e = this.flags >> 5;
    return e == 33554431 ? void 0 : e;
  }
  map(e, n = -1) {
    let i, r;
    return this.empty ? i = r = e.mapPos(this.from, n) : (i = e.mapPos(this.from, 1), r = e.mapPos(this.to, -1)), i == this.from && r == this.to ? this : new hs(i, r, this.flags);
  }
  extend(e, n = e) {
    if (e <= this.anchor && n >= this.anchor)
      return we.range(e, n);
    let i = Math.abs(e - this.anchor) > Math.abs(n - this.anchor) ? e : n;
    return we.range(this.anchor, i);
  }
  eq(e) {
    return this.anchor == e.anchor && this.head == e.head;
  }
  toJSON() {
    return { anchor: this.anchor, head: this.head };
  }
  static fromJSON(e) {
    if (!e || typeof e.anchor != "number" || typeof e.head != "number")
      throw new RangeError("Invalid JSON representation for SelectionRange");
    return we.range(e.anchor, e.head);
  }
  static create(e, n, i) {
    return new hs(e, n, i);
  }
}
class we {
  constructor(e, n) {
    this.ranges = e, this.mainIndex = n;
  }
  map(e, n = -1) {
    return e.empty ? this : we.create(this.ranges.map((i) => i.map(e, n)), this.mainIndex);
  }
  eq(e) {
    if (this.ranges.length != e.ranges.length || this.mainIndex != e.mainIndex)
      return !1;
    for (let n = 0; n < this.ranges.length; n++)
      if (!this.ranges[n].eq(e.ranges[n]))
        return !1;
    return !0;
  }
  get main() {
    return this.ranges[this.mainIndex];
  }
  asSingle() {
    return this.ranges.length == 1 ? this : new we([this.main], 0);
  }
  addRange(e, n = !0) {
    return we.create([e].concat(this.ranges), n ? 0 : this.mainIndex + 1);
  }
  replaceRange(e, n = this.mainIndex) {
    let i = this.ranges.slice();
    return i[n] = e, we.create(i, this.mainIndex);
  }
  toJSON() {
    return { ranges: this.ranges.map((e) => e.toJSON()), main: this.mainIndex };
  }
  static fromJSON(e) {
    if (!e || !Array.isArray(e.ranges) || typeof e.main != "number" || e.main >= e.ranges.length)
      throw new RangeError("Invalid JSON representation for EditorSelection");
    return new we(e.ranges.map((n) => hs.fromJSON(n)), e.main);
  }
  static single(e, n = e) {
    return new we([we.range(e, n)], 0);
  }
  static create(e, n = 0) {
    if (e.length == 0)
      throw new RangeError("A selection needs at least one range");
    for (let i = 0, r = 0; r < e.length; r++) {
      let o = e[r];
      if (o.empty ? o.from <= i : o.from < i)
        return we.normalized(e.slice(), n);
      i = o.to;
    }
    return new we(e, n);
  }
  static cursor(e, n = 0, i, r) {
    return hs.create(e, e, (n == 0 ? 0 : n < 0 ? 4 : 8) | (i == null ? 3 : Math.min(2, i)) | (r ?? 33554431) << 5);
  }
  static range(e, n, i, r) {
    let o = (i ?? 33554431) << 5 | (r == null ? 3 : Math.min(2, r));
    return n < e ? hs.create(n, e, 24 | o) : hs.create(e, n, (n > e ? 4 : 0) | o);
  }
  static normalized(e, n = 0) {
    let i = e[n];
    e.sort((r, o) => r.from - o.from), n = e.indexOf(i);
    for (let r = 1; r < e.length; r++) {
      let o = e[r], s = e[r - 1];
      if (o.empty ? o.from <= s.to : o.from < s.to) {
        let l = s.from, a = Math.max(o.to, s.to);
        r <= n && n--, e.splice(--r, 2, o.anchor > o.head ? we.range(a, l) : we.range(l, a));
      }
    }
    return new we(e, n);
  }
}
function UC(t, e) {
  for (let n of t.ranges)
    if (n.to > e)
      throw new RangeError("Selection points outside of document");
}
let _g = 0;
class Xe {
  constructor(e, n, i, r, o) {
    this.combine = e, this.compareInput = n, this.compare = i, this.isStatic = r, this.id = _g++, this.default = e([]), this.extensions = typeof o == "function" ? o(this) : o;
  }
  static define(e = {}) {
    return new Xe(e.combine || ((n) => n), e.compareInput || ((n, i) => n === i), e.compare || (e.combine ? (n, i) => n === i : yg), !!e.static, e.enables);
  }
  of(e) {
    return new kc([], this, 0, e);
  }
  compute(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new kc(e, this, 1, n);
  }
  computeN(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new kc(e, this, 2, n);
  }
  from(e, n) {
    return n || (n = (i) => i), this.compute([e], (i) => n(i.field(e)));
  }
}
function yg(t, e) {
  return t == e || t.length == e.length && t.every((n, i) => n === e[i]);
}
class kc {
  constructor(e, n, i, r) {
    this.dependencies = e, this.facet = n, this.type = i, this.value = r, this.id = _g++;
  }
  dynamicSlot(e) {
    var n;
    let i = this.value, r = this.facet.compareInput, o = this.id, s = e[o] >> 1, l = this.type == 2, a = !1, f = !1, c = [];
    for (let u of this.dependencies)
      u == "doc" ? a = !0 : u == "selection" ? f = !0 : ((n = e[u.id]) !== null && n !== void 0 ? n : 1) & 1 || c.push(e[u.id]);
    return {
      create(u) {
        return u.values[s] = i(u), 1;
      },
      update(u, h) {
        if (a && h.docChanged || f && (h.docChanged || h.selection) || Pp(u, c)) {
          let d = i(u);
          if (l ? !A_(d, u.values[s], r) : !r(d, u.values[s]))
            return u.values[s] = d, 1;
        }
        return 0;
      },
      reconfigure: (u, h) => {
        let d, p = h.config.address[o];
        if (p != null) {
          let g = lu(h, p);
          if (this.dependencies.every((_) => _ instanceof Xe ? h.facet(_) === u.facet(_) : _ instanceof xn ? h.field(_, !1) == u.field(_, !1) : !0) || (l ? A_(d = i(u), g, r) : r(d = i(u), g)))
            return u.values[s] = g, 0;
        } else
          d = i(u);
        return u.values[s] = d, 1;
      }
    };
  }
}
function A_(t, e, n) {
  if (t.length != e.length)
    return !1;
  for (let i = 0; i < t.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function Pp(t, e) {
  let n = !1;
  for (let i of e)
    ka(t, i) & 1 && (n = !0);
  return n;
}
function Lx(t, e, n) {
  let i = n.map((a) => t[a.id]), r = n.map((a) => a.type), o = i.filter((a) => !(a & 1)), s = t[e.id] >> 1;
  function l(a) {
    let f = [];
    for (let c = 0; c < i.length; c++) {
      let u = lu(a, i[c]);
      if (r[c] == 2)
        for (let h of u)
          f.push(h);
      else
        f.push(u);
    }
    return e.combine(f);
  }
  return {
    create(a) {
      for (let f of i)
        ka(a, f);
      return a.values[s] = l(a), 1;
    },
    update(a, f) {
      if (!Pp(a, o))
        return 0;
      let c = l(a);
      return e.compare(c, a.values[s]) ? 0 : (a.values[s] = c, 1);
    },
    reconfigure(a, f) {
      let c = Pp(a, i), u = f.config.facets[e.id], h = f.facet(e);
      if (u && !c && yg(n, u))
        return a.values[s] = h, 0;
      let d = l(a);
      return e.compare(d, h) ? (a.values[s] = h, 0) : (a.values[s] = d, 1);
    }
  };
}
const O_ = /* @__PURE__ */ Xe.define({ static: !0 });
class xn {
  constructor(e, n, i, r, o) {
    this.id = e, this.createF = n, this.updateF = i, this.compareF = r, this.spec = o, this.provides = void 0;
  }
  static define(e) {
    let n = new xn(_g++, e.create, e.update, e.compare || ((i, r) => i === r), e);
    return e.provide && (n.provides = e.provide(n)), n;
  }
  create(e) {
    let n = e.facet(O_).find((i) => i.field == this);
    return ((n == null ? void 0 : n.create) || this.createF)(e);
  }
  slot(e) {
    let n = e[this.id] >> 1;
    return {
      create: (i) => (i.values[n] = this.create(i), 1),
      update: (i, r) => {
        let o = i.values[n], s = this.updateF(o, r);
        return this.compareF(o, s) ? 0 : (i.values[n] = s, 1);
      },
      reconfigure: (i, r) => r.config.address[this.id] != null ? (i.values[n] = r.field(this), 0) : (i.values[n] = this.create(i), 1)
    };
  }
  init(e) {
    return [this, O_.of({ field: this, create: e })];
  }
  get extension() {
    return this;
  }
}
const fs = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };
function $l(t) {
  return (e) => new qC(e, t);
}
const ql = {
  highest: /* @__PURE__ */ $l(fs.highest),
  high: /* @__PURE__ */ $l(fs.high),
  default: /* @__PURE__ */ $l(fs.default),
  low: /* @__PURE__ */ $l(fs.low),
  lowest: /* @__PURE__ */ $l(fs.lowest)
};
class qC {
  constructor(e, n) {
    this.inner = e, this.prec = n;
  }
}
class Qr {
  of(e) {
    return new Rp(this, e);
  }
  reconfigure(e) {
    return Qr.reconfigure.of({ compartment: this, extension: e });
  }
  get(e) {
    return e.config.compartments.get(this);
  }
}
class Rp {
  constructor(e, n) {
    this.compartment = e, this.inner = n;
  }
}
class su {
  constructor(e, n, i, r, o, s) {
    for (this.base = e, this.compartments = n, this.dynamicSlots = i, this.address = r, this.staticValues = o, this.facets = s, this.statusTemplate = []; this.statusTemplate.length < i.length; )
      this.statusTemplate.push(0);
  }
  staticFacet(e) {
    let n = this.address[e.id];
    return n == null ? e.default : this.staticValues[n >> 1];
  }
  static resolve(e, n, i) {
    let r = [], o = /* @__PURE__ */ Object.create(null), s = /* @__PURE__ */ new Map();
    for (let h of xx(e, n, s))
      h instanceof xn ? r.push(h) : (o[h.facet.id] || (o[h.facet.id] = [])).push(h);
    let l = /* @__PURE__ */ Object.create(null), a = [], f = [];
    for (let h of r)
      l[h.id] = f.length << 1, f.push((d) => h.slot(d));
    let c = i == null ? void 0 : i.config.facets;
    for (let h in o) {
      let d = o[h], p = d[0].facet, g = c && c[h] || [];
      if (d.every((_) => _.type == 0))
        if (l[p.id] = a.length << 1 | 1, yg(g, d))
          a.push(i.facet(p));
        else {
          let _ = p.combine(d.map((b) => b.value));
          a.push(i && p.compare(_, i.facet(p)) ? i.facet(p) : _);
        }
      else {
        for (let _ of d)
          _.type == 0 ? (l[_.id] = a.length << 1 | 1, a.push(_.value)) : (l[_.id] = f.length << 1, f.push((b) => _.dynamicSlot(b)));
        l[p.id] = f.length << 1, f.push((_) => Lx(_, p, d));
      }
    }
    let u = f.map((h) => h(l));
    return new su(e, s, u, l, a, o);
  }
}
function xx(t, e, n) {
  let i = [[], [], [], [], []], r = /* @__PURE__ */ new Map();
  function o(s, l) {
    let a = r.get(s);
    if (a != null) {
      if (a <= l)
        return;
      let f = i[a].indexOf(s);
      f > -1 && i[a].splice(f, 1), s instanceof Rp && n.delete(s.compartment);
    }
    if (r.set(s, l), Array.isArray(s))
      for (let f of s)
        o(f, l);
    else if (s instanceof Rp) {
      if (n.has(s.compartment))
        throw new RangeError("Duplicate use of compartment in extensions");
      let f = e.get(s.compartment) || s.inner;
      n.set(s.compartment, f), o(f, l);
    } else if (s instanceof qC)
      o(s.inner, s.prec);
    else if (s instanceof xn)
      i[l].push(s), s.provides && o(s.provides, l);
    else if (s instanceof kc)
      i[l].push(s), s.facet.extensions && o(s.facet.extensions, fs.default);
    else {
      let f = s.extension;
      if (!f)
        throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
      o(f, l);
    }
  }
  return o(t, fs.default), i.reduce((s, l) => s.concat(l));
}
function ka(t, e) {
  if (e & 1)
    return 2;
  let n = e >> 1, i = t.status[n];
  if (i == 4)
    throw new Error("Cyclic dependency between fields and/or facets");
  if (i & 2)
    return i;
  t.status[n] = 4;
  let r = t.computeSlot(t, t.config.dynamicSlots[n]);
  return t.status[n] = 2 | r;
}
function lu(t, e) {
  return e & 1 ? t.config.staticValues[e >> 1] : t.values[e >> 1];
}
const JC = /* @__PURE__ */ Xe.define(), KC = /* @__PURE__ */ Xe.define({
  combine: (t) => t.some((e) => e),
  static: !0
}), GC = /* @__PURE__ */ Xe.define({
  combine: (t) => t.length ? t[0] : void 0,
  static: !0
}), XC = /* @__PURE__ */ Xe.define(), QC = /* @__PURE__ */ Xe.define(), YC = /* @__PURE__ */ Xe.define(), ZC = /* @__PURE__ */ Xe.define({
  combine: (t) => t.length ? t[0] : !1
});
class Qo {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  static define() {
    return new zx();
  }
}
class zx {
  of(e) {
    return new Qo(this, e);
  }
}
class Vx {
  constructor(e) {
    this.map = e;
  }
  of(e) {
    return new gt(this, e);
  }
}
class gt {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  map(e) {
    let n = this.type.map(this.value, e);
    return n === void 0 ? void 0 : n == this.value ? this : new gt(this.type, n);
  }
  is(e) {
    return this.type == e;
  }
  static define(e = {}) {
    return new Vx(e.map || ((n) => n));
  }
  static mapEffects(e, n) {
    if (!e.length)
      return e;
    let i = [];
    for (let r of e) {
      let o = r.map(n);
      o && i.push(o);
    }
    return i;
  }
}
gt.reconfigure = /* @__PURE__ */ gt.define();
gt.appendConfig = /* @__PURE__ */ gt.define();
class Bn {
  constructor(e, n, i, r, o, s) {
    this.startState = e, this.changes = n, this.selection = i, this.effects = r, this.annotations = o, this.scrollIntoView = s, this._doc = null, this._state = null, i && UC(i, n.newLength), o.some((l) => l.type == Bn.time) || (this.annotations = o.concat(Bn.time.of(Date.now())));
  }
  static create(e, n, i, r, o, s) {
    return new Bn(e, n, i, r, o, s);
  }
  get newDoc() {
    return this._doc || (this._doc = this.changes.apply(this.startState.doc));
  }
  get newSelection() {
    return this.selection || this.startState.selection.map(this.changes);
  }
  get state() {
    return this._state || this.startState.applyTransaction(this), this._state;
  }
  annotation(e) {
    for (let n of this.annotations)
      if (n.type == e)
        return n.value;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get reconfigured() {
    return this.startState.config != this.state.config;
  }
  isUserEvent(e) {
    let n = this.annotation(Bn.userEvent);
    return !!(n && (n == e || n.length > e.length && n.slice(0, e.length) == e && n[e.length] == "."));
  }
}
Bn.time = /* @__PURE__ */ Qo.define();
Bn.userEvent = /* @__PURE__ */ Qo.define();
Bn.addToHistory = /* @__PURE__ */ Qo.define();
Bn.remote = /* @__PURE__ */ Qo.define();
function Fx(t, e) {
  let n = [];
  for (let i = 0, r = 0; ; ) {
    let o, s;
    if (i < t.length && (r == e.length || e[r] >= t[i]))
      o = t[i++], s = t[i++];
    else if (r < e.length)
      o = e[r++], s = e[r++];
    else
      return n;
    !n.length || n[n.length - 1] < o ? n.push(o, s) : n[n.length - 1] < s && (n[n.length - 1] = s);
  }
}
function $C(t, e, n) {
  var i;
  let r, o, s;
  return n ? (r = e.changes, o = jn.empty(e.changes.length), s = t.changes.compose(e.changes)) : (r = e.changes.map(t.changes), o = t.changes.mapDesc(e.changes, !0), s = t.changes.compose(r)), {
    changes: s,
    selection: e.selection ? e.selection.map(o) : (i = t.selection) === null || i === void 0 ? void 0 : i.map(r),
    effects: gt.mapEffects(t.effects, r).concat(gt.mapEffects(e.effects, o)),
    annotations: t.annotations.length ? t.annotations.concat(e.annotations) : e.annotations,
    scrollIntoView: t.scrollIntoView || e.scrollIntoView
  };
}
function Ip(t, e, n) {
  let i = e.selection, r = al(e.annotations);
  return e.userEvent && (r = r.concat(Bn.userEvent.of(e.userEvent))), {
    changes: e.changes instanceof jn ? e.changes : jn.of(e.changes || [], n, t.facet(GC)),
    selection: i && (i instanceof we ? i : we.single(i.anchor, i.head)),
    effects: al(e.effects),
    annotations: r,
    scrollIntoView: !!e.scrollIntoView
  };
}
function eS(t, e, n) {
  let i = Ip(t, e.length ? e[0] : {}, t.doc.length);
  e.length && e[0].filter === !1 && (n = !1);
  for (let o = 1; o < e.length; o++) {
    e[o].filter === !1 && (n = !1);
    let s = !!e[o].sequential;
    i = $C(i, Ip(t, e[o], s ? i.changes.newLength : t.doc.length), s);
  }
  let r = Bn.create(t, i.changes, i.selection, i.effects, i.annotations, i.scrollIntoView);
  return Wx(n ? Hx(r) : r);
}
function Hx(t) {
  let e = t.startState, n = !0;
  for (let r of e.facet(XC)) {
    let o = r(t);
    if (o === !1) {
      n = !1;
      break;
    }
    Array.isArray(o) && (n = n === !0 ? o : Fx(n, o));
  }
  if (n !== !0) {
    let r, o;
    if (n === !1)
      o = t.changes.invertedDesc, r = jn.empty(e.doc.length);
    else {
      let s = t.changes.filter(n);
      r = s.changes, o = s.filtered.mapDesc(s.changes).invertedDesc;
    }
    t = Bn.create(e, r, t.selection && t.selection.map(o), gt.mapEffects(t.effects, o), t.annotations, t.scrollIntoView);
  }
  let i = e.facet(QC);
  for (let r = i.length - 1; r >= 0; r--) {
    let o = i[r](t);
    o instanceof Bn ? t = o : Array.isArray(o) && o.length == 1 && o[0] instanceof Bn ? t = o[0] : t = eS(e, al(o), !1);
  }
  return t;
}
function Wx(t) {
  let e = t.startState, n = e.facet(YC), i = t;
  for (let r = n.length - 1; r >= 0; r--) {
    let o = n[r](t);
    o && Object.keys(o).length && (i = $C(i, Ip(e, o, t.changes.newLength), !0));
  }
  return i == t ? t : Bn.create(e, t.changes, t.selection, i.effects, i.annotations, i.scrollIntoView);
}
const Ux = [];
function al(t) {
  return t == null ? Ux : Array.isArray(t) ? t : [t];
}
var cn = /* @__PURE__ */ function(t) {
  return t[t.Word = 0] = "Word", t[t.Space = 1] = "Space", t[t.Other = 2] = "Other", t;
}(cn || (cn = {}));
const qx = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
let Np;
try {
  Np = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
} catch {
}
function Jx(t) {
  if (Np)
    return Np.test(t);
  for (let e = 0; e < t.length; e++) {
    let n = t[e];
    if (/\w/.test(n) || n > "" && (n.toUpperCase() != n.toLowerCase() || qx.test(n)))
      return !0;
  }
  return !1;
}
function Kx(t) {
  return (e) => {
    if (!/\S/.test(e))
      return cn.Space;
    if (Jx(e))
      return cn.Word;
    for (let n = 0; n < t.length; n++)
      if (e.indexOf(t[n]) > -1)
        return cn.Word;
    return cn.Other;
  };
}
class St {
  constructor(e, n, i, r, o, s) {
    this.config = e, this.doc = n, this.selection = i, this.values = r, this.status = e.statusTemplate.slice(), this.computeSlot = o, s && (s._state = this);
    for (let l = 0; l < this.config.dynamicSlots.length; l++)
      ka(this, l << 1);
    this.computeSlot = null;
  }
  field(e, n = !0) {
    let i = this.config.address[e.id];
    if (i == null) {
      if (n)
        throw new RangeError("Field is not present in this state");
      return;
    }
    return ka(this, i), lu(this, i);
  }
  update(...e) {
    return eS(this, e, !0);
  }
  applyTransaction(e) {
    let n = this.config, { base: i, compartments: r } = n;
    for (let s of e.effects)
      s.is(Qr.reconfigure) ? (n && (r = /* @__PURE__ */ new Map(), n.compartments.forEach((l, a) => r.set(a, l)), n = null), r.set(s.value.compartment, s.value.extension)) : s.is(gt.reconfigure) ? (n = null, i = s.value) : s.is(gt.appendConfig) && (n = null, i = al(i).concat(s.value));
    let o;
    n ? o = e.startState.values.slice() : (n = su.resolve(i, r, this), o = new St(n, this.doc, this.selection, n.dynamicSlots.map(() => null), (l, a) => a.reconfigure(l, this), null).values), new St(n, e.newDoc, e.newSelection, o, (s, l) => l.update(s, e), e);
  }
  replaceSelection(e) {
    return typeof e == "string" && (e = this.toText(e)), this.changeByRange((n) => ({
      changes: { from: n.from, to: n.to, insert: e },
      range: we.cursor(n.from + e.length)
    }));
  }
  changeByRange(e) {
    let n = this.selection, i = e(n.ranges[0]), r = this.changes(i.changes), o = [i.range], s = al(i.effects);
    for (let l = 1; l < n.ranges.length; l++) {
      let a = e(n.ranges[l]), f = this.changes(a.changes), c = f.map(r);
      for (let h = 0; h < l; h++)
        o[h] = o[h].map(c);
      let u = r.mapDesc(f, !0);
      o.push(a.range.map(u)), r = r.compose(c), s = gt.mapEffects(s, c).concat(gt.mapEffects(al(a.effects), u));
    }
    return {
      changes: r,
      selection: we.create(o, n.mainIndex),
      effects: s
    };
  }
  changes(e = []) {
    return e instanceof jn ? e : jn.of(e, this.doc.length, this.facet(St.lineSeparator));
  }
  toText(e) {
    return jt.of(e.split(this.facet(St.lineSeparator) || Op));
  }
  sliceDoc(e = 0, n = this.doc.length) {
    return this.doc.sliceString(e, n, this.lineBreak);
  }
  facet(e) {
    let n = this.config.address[e.id];
    return n == null ? e.default : (ka(this, n), lu(this, n));
  }
  toJSON(e) {
    let n = {
      doc: this.sliceDoc(),
      selection: this.selection.toJSON()
    };
    if (e)
      for (let i in e) {
        let r = e[i];
        r instanceof xn && this.config.address[r.id] != null && (n[i] = r.spec.toJSON(this.field(e[i]), this));
      }
    return n;
  }
  static fromJSON(e, n = {}, i) {
    if (!e || typeof e.doc != "string")
      throw new RangeError("Invalid JSON representation for EditorState");
    let r = [];
    if (i) {
      for (let o in i)
        if (Object.prototype.hasOwnProperty.call(e, o)) {
          let s = i[o], l = e[o];
          r.push(s.init((a) => s.spec.fromJSON(l, a)));
        }
    }
    return St.create({
      doc: e.doc,
      selection: we.fromJSON(e.selection),
      extensions: n.extensions ? r.concat([n.extensions]) : r
    });
  }
  static create(e = {}) {
    let n = su.resolve(e.extensions || [], /* @__PURE__ */ new Map()), i = e.doc instanceof jt ? e.doc : jt.of((e.doc || "").split(n.staticFacet(St.lineSeparator) || Op)), r = e.selection ? e.selection instanceof we ? e.selection : we.single(e.selection.anchor, e.selection.head) : we.single(0);
    return UC(r, i.length), n.staticFacet(KC) || (r = r.asSingle()), new St(n, i, r, n.dynamicSlots.map(() => null), (o, s) => s.create(o), null);
  }
  get tabSize() {
    return this.facet(St.tabSize);
  }
  get lineBreak() {
    return this.facet(St.lineSeparator) || `
`;
  }
  get readOnly() {
    return this.facet(ZC);
  }
  phrase(e, ...n) {
    for (let i of this.facet(St.phrases))
      if (Object.prototype.hasOwnProperty.call(i, e)) {
        e = i[e];
        break;
      }
    return n.length && (e = e.replace(/\$(\$|\d*)/g, (i, r) => {
      if (r == "$")
        return "$";
      let o = +(r || 1);
      return !o || o > n.length ? i : n[o - 1];
    })), e;
  }
  languageDataAt(e, n, i = -1) {
    let r = [];
    for (let o of this.facet(JC))
      for (let s of o(this, n, i))
        Object.prototype.hasOwnProperty.call(s, e) && r.push(s[e]);
    return r;
  }
  charCategorizer(e) {
    return Kx(this.languageDataAt("wordChars", e).join(""));
  }
  wordAt(e) {
    let { text: n, from: i, length: r } = this.doc.lineAt(e), o = this.charCategorizer(e), s = e - i, l = e - i;
    for (; s > 0; ) {
      let a = fi(n, s, !1);
      if (o(n.slice(a, s)) != cn.Word)
        break;
      s = a;
    }
    for (; l < r; ) {
      let a = fi(n, l);
      if (o(n.slice(l, a)) != cn.Word)
        break;
      l = a;
    }
    return s == l ? null : we.range(s + i, l + i);
  }
}
St.allowMultipleSelections = KC;
St.tabSize = /* @__PURE__ */ Xe.define({
  combine: (t) => t.length ? t[0] : 4
});
St.lineSeparator = GC;
St.readOnly = ZC;
St.phrases = /* @__PURE__ */ Xe.define({
  compare(t, e) {
    let n = Object.keys(t), i = Object.keys(e);
    return n.length == i.length && n.every((r) => t[r] == e[r]);
  }
});
St.languageData = JC;
St.changeFilter = XC;
St.transactionFilter = QC;
St.transactionExtender = YC;
Qr.reconfigure = /* @__PURE__ */ gt.define();
function fr(t, e, n = {}) {
  let i = {};
  for (let r of t)
    for (let o of Object.keys(r)) {
      let s = r[o], l = i[o];
      if (l === void 0)
        i[o] = s;
      else if (!(l === s || s === void 0))
        if (Object.hasOwnProperty.call(n, o))
          i[o] = n[o](l, s);
        else
          throw new Error("Config merge conflict for field " + o);
    }
  for (let r in e)
    i[r] === void 0 && (i[r] = e[r]);
  return i;
}
class Ts {
  eq(e) {
    return this == e;
  }
  range(e, n = e) {
    return au.create(e, n, this);
  }
}
Ts.prototype.startSide = Ts.prototype.endSide = 0;
Ts.prototype.point = !1;
Ts.prototype.mapMode = li.TrackDel;
let au = class {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.value = i;
  }
  static create(e, n, i) {
    return new au(e, n, i);
  }
};
function Dp(t, e) {
  return t.from - e.from || t.value.startSide - e.value.startSide;
}
class wg {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.value = i, this.maxPoint = r;
  }
  get length() {
    return this.to[this.to.length - 1];
  }
  findIndex(e, n, i, r = 0) {
    let o = i ? this.to : this.from;
    for (let s = r, l = o.length; ; ) {
      if (s == l)
        return s;
      let a = s + l >> 1, f = o[a] - e || (i ? this.value[a].endSide : this.value[a].startSide) - n;
      if (a == s)
        return f >= 0 ? s : l;
      f >= 0 ? l = a : s = a + 1;
    }
  }
  between(e, n, i, r) {
    for (let o = this.findIndex(n, -1e9, !0), s = this.findIndex(i, 1e9, !1, o); o < s; o++)
      if (r(this.from[o] + e, this.to[o] + e, this.value[o]) === !1)
        return !1;
  }
  map(e, n) {
    let i = [], r = [], o = [], s = -1, l = -1;
    for (let a = 0; a < this.value.length; a++) {
      let f = this.value[a], c = this.from[a] + e, u = this.to[a] + e, h, d;
      if (c == u) {
        let p = n.mapPos(c, f.startSide, f.mapMode);
        if (p == null || (h = d = p, f.startSide != f.endSide && (d = n.mapPos(c, f.endSide), d < h)))
          continue;
      } else if (h = n.mapPos(c, f.startSide), d = n.mapPos(u, f.endSide), h > d || h == d && f.startSide > 0 && f.endSide <= 0)
        continue;
      (d - h || f.endSide - f.startSide) < 0 || (s < 0 && (s = h), f.point && (l = Math.max(l, d - h)), i.push(f), r.push(h - s), o.push(d - s));
    }
    return { mapped: i.length ? new wg(r, o, i, l) : null, pos: s };
  }
}
class Bt {
  constructor(e, n, i, r) {
    this.chunkPos = e, this.chunk = n, this.nextLayer = i, this.maxPoint = r;
  }
  static create(e, n, i, r) {
    return new Bt(e, n, i, r);
  }
  get length() {
    let e = this.chunk.length - 1;
    return e < 0 ? 0 : Math.max(this.chunkEnd(e), this.nextLayer.length);
  }
  get size() {
    if (this.isEmpty)
      return 0;
    let e = this.nextLayer.size;
    for (let n of this.chunk)
      e += n.value.length;
    return e;
  }
  chunkEnd(e) {
    return this.chunkPos[e] + this.chunk[e].length;
  }
  update(e) {
    let { add: n = [], sort: i = !1, filterFrom: r = 0, filterTo: o = this.length } = e, s = e.filter;
    if (n.length == 0 && !s)
      return this;
    if (i && (n = n.slice().sort(Dp)), this.isEmpty)
      return n.length ? Bt.of(n) : this;
    let l = new tS(this, null, -1).goto(0), a = 0, f = [], c = new Fo();
    for (; l.value || a < n.length; )
      if (a < n.length && (l.from - n[a].from || l.startSide - n[a].value.startSide) >= 0) {
        let u = n[a++];
        c.addInner(u.from, u.to, u.value) || f.push(u);
      } else
        l.rangeIndex == 1 && l.chunkIndex < this.chunk.length && (a == n.length || this.chunkEnd(l.chunkIndex) < n[a].from) && (!s || r > this.chunkEnd(l.chunkIndex) || o < this.chunkPos[l.chunkIndex]) && c.addChunk(this.chunkPos[l.chunkIndex], this.chunk[l.chunkIndex]) ? l.nextChunk() : ((!s || r > l.to || o < l.from || s(l.from, l.to, l.value)) && (c.addInner(l.from, l.to, l.value) || f.push(au.create(l.from, l.to, l.value))), l.next());
    return c.finishInner(this.nextLayer.isEmpty && !f.length ? Bt.empty : this.nextLayer.update({ add: f, filter: s, filterFrom: r, filterTo: o }));
  }
  map(e) {
    if (e.empty || this.isEmpty)
      return this;
    let n = [], i = [], r = -1;
    for (let s = 0; s < this.chunk.length; s++) {
      let l = this.chunkPos[s], a = this.chunk[s], f = e.touchesRange(l, l + a.length);
      if (f === !1)
        r = Math.max(r, a.maxPoint), n.push(a), i.push(e.mapPos(l));
      else if (f === !0) {
        let { mapped: c, pos: u } = a.map(l, e);
        c && (r = Math.max(r, c.maxPoint), n.push(c), i.push(u));
      }
    }
    let o = this.nextLayer.map(e);
    return n.length == 0 ? o : new Bt(i, n, o || Bt.empty, r);
  }
  between(e, n, i) {
    if (!this.isEmpty) {
      for (let r = 0; r < this.chunk.length; r++) {
        let o = this.chunkPos[r], s = this.chunk[r];
        if (n >= o && e <= o + s.length && s.between(o, e - o, n - o, i) === !1)
          return;
      }
      this.nextLayer.between(e, n, i);
    }
  }
  iter(e = 0) {
    return Ha.from([this]).goto(e);
  }
  get isEmpty() {
    return this.nextLayer == this;
  }
  static iter(e, n = 0) {
    return Ha.from(e).goto(n);
  }
  static compare(e, n, i, r, o = -1) {
    let s = e.filter((u) => u.maxPoint > 0 || !u.isEmpty && u.maxPoint >= o), l = n.filter((u) => u.maxPoint > 0 || !u.isEmpty && u.maxPoint >= o), a = T_(s, l, i), f = new ea(s, a, o), c = new ea(l, a, o);
    i.iterGaps((u, h, d) => E_(f, u, c, h, d, r)), i.empty && i.length == 0 && E_(f, 0, c, 0, 0, r);
  }
  static eq(e, n, i = 0, r) {
    r == null && (r = 1e9 - 1);
    let o = e.filter((c) => !c.isEmpty && n.indexOf(c) < 0), s = n.filter((c) => !c.isEmpty && e.indexOf(c) < 0);
    if (o.length != s.length)
      return !1;
    if (!o.length)
      return !0;
    let l = T_(o, s), a = new ea(o, l, 0).goto(i), f = new ea(s, l, 0).goto(i);
    for (; ; ) {
      if (a.to != f.to || !jp(a.active, f.active) || a.point && (!f.point || !a.point.eq(f.point)))
        return !1;
      if (a.to > r)
        return !0;
      a.next(), f.next();
    }
  }
  static spans(e, n, i, r, o = -1) {
    let s = new ea(e, null, o).goto(n), l = n, a = s.openStart;
    for (; ; ) {
      let f = Math.min(s.to, i);
      if (s.point) {
        let c = s.activeForPoint(s.to), u = s.pointFrom < n ? c.length + 1 : Math.min(c.length, a);
        r.point(l, f, s.point, c, u, s.pointRank), a = Math.min(s.openEnd(f), c.length);
      } else
        f > l && (r.span(l, f, s.active, a), a = s.openEnd(f));
      if (s.to > i)
        return a + (s.point && s.to > i ? 1 : 0);
      l = s.to, s.next();
    }
  }
  static of(e, n = !1) {
    let i = new Fo();
    for (let r of e instanceof au ? [e] : n ? Gx(e) : e)
      i.add(r.from, r.to, r.value);
    return i.finish();
  }
}
Bt.empty = /* @__PURE__ */ new Bt([], [], null, -1);
function Gx(t) {
  if (t.length > 1)
    for (let e = t[0], n = 1; n < t.length; n++) {
      let i = t[n];
      if (Dp(e, i) > 0)
        return t.slice().sort(Dp);
      e = i;
    }
  return t;
}
Bt.empty.nextLayer = Bt.empty;
class Fo {
  constructor() {
    this.chunks = [], this.chunkPos = [], this.chunkStart = -1, this.last = null, this.lastFrom = -1e9, this.lastTo = -1e9, this.from = [], this.to = [], this.value = [], this.maxPoint = -1, this.setMaxPoint = -1, this.nextLayer = null;
  }
  finishChunk(e) {
    this.chunks.push(new wg(this.from, this.to, this.value, this.maxPoint)), this.chunkPos.push(this.chunkStart), this.chunkStart = -1, this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint), this.maxPoint = -1, e && (this.from = [], this.to = [], this.value = []);
  }
  add(e, n, i) {
    this.addInner(e, n, i) || (this.nextLayer || (this.nextLayer = new Fo())).add(e, n, i);
  }
  addInner(e, n, i) {
    let r = e - this.lastTo || i.startSide - this.last.endSide;
    if (r <= 0 && (e - this.lastFrom || i.startSide - this.last.startSide) < 0)
      throw new Error("Ranges must be added sorted by `from` position and `startSide`");
    return r < 0 ? !1 : (this.from.length == 250 && this.finishChunk(!0), this.chunkStart < 0 && (this.chunkStart = e), this.from.push(e - this.chunkStart), this.to.push(n - this.chunkStart), this.last = i, this.lastFrom = e, this.lastTo = n, this.value.push(i), i.point && (this.maxPoint = Math.max(this.maxPoint, n - e)), !0);
  }
  addChunk(e, n) {
    if ((e - this.lastTo || n.value[0].startSide - this.last.endSide) < 0)
      return !1;
    this.from.length && this.finishChunk(!0), this.setMaxPoint = Math.max(this.setMaxPoint, n.maxPoint), this.chunks.push(n), this.chunkPos.push(e);
    let i = n.value.length - 1;
    return this.last = n.value[i], this.lastFrom = n.from[i] + e, this.lastTo = n.to[i] + e, !0;
  }
  finish() {
    return this.finishInner(Bt.empty);
  }
  finishInner(e) {
    if (this.from.length && this.finishChunk(!1), this.chunks.length == 0)
      return e;
    let n = Bt.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(e) : e, this.setMaxPoint);
    return this.from = null, n;
  }
}
function T_(t, e, n) {
  let i = /* @__PURE__ */ new Map();
  for (let o of t)
    for (let s = 0; s < o.chunk.length; s++)
      o.chunk[s].maxPoint <= 0 && i.set(o.chunk[s], o.chunkPos[s]);
  let r = /* @__PURE__ */ new Set();
  for (let o of e)
    for (let s = 0; s < o.chunk.length; s++) {
      let l = i.get(o.chunk[s]);
      l != null && (n ? n.mapPos(l) : l) == o.chunkPos[s] && !(n != null && n.touchesRange(l, l + o.chunk[s].length)) && r.add(o.chunk[s]);
    }
  return r;
}
class tS {
  constructor(e, n, i, r = 0) {
    this.layer = e, this.skip = n, this.minPoint = i, this.rank = r;
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  get endSide() {
    return this.value ? this.value.endSide : 0;
  }
  goto(e, n = -1e9) {
    return this.chunkIndex = this.rangeIndex = 0, this.gotoInner(e, n, !1), this;
  }
  gotoInner(e, n, i) {
    for (; this.chunkIndex < this.layer.chunk.length; ) {
      let r = this.layer.chunk[this.chunkIndex];
      if (!(this.skip && this.skip.has(r) || this.layer.chunkEnd(this.chunkIndex) < e || r.maxPoint < this.minPoint))
        break;
      this.chunkIndex++, i = !1;
    }
    if (this.chunkIndex < this.layer.chunk.length) {
      let r = this.layer.chunk[this.chunkIndex].findIndex(e - this.layer.chunkPos[this.chunkIndex], n, !0);
      (!i || this.rangeIndex < r) && this.setRangeIndex(r);
    }
    this.next();
  }
  forward(e, n) {
    (this.to - e || this.endSide - n) < 0 && this.gotoInner(e, n, !0);
  }
  next() {
    for (; ; )
      if (this.chunkIndex == this.layer.chunk.length) {
        this.from = this.to = 1e9, this.value = null;
        break;
      } else {
        let e = this.layer.chunkPos[this.chunkIndex], n = this.layer.chunk[this.chunkIndex], i = e + n.from[this.rangeIndex];
        if (this.from = i, this.to = e + n.to[this.rangeIndex], this.value = n.value[this.rangeIndex], this.setRangeIndex(this.rangeIndex + 1), this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
          break;
      }
  }
  setRangeIndex(e) {
    if (e == this.layer.chunk[this.chunkIndex].value.length) {
      if (this.chunkIndex++, this.skip)
        for (; this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]); )
          this.chunkIndex++;
      this.rangeIndex = 0;
    } else
      this.rangeIndex = e;
  }
  nextChunk() {
    this.chunkIndex++, this.rangeIndex = 0, this.next();
  }
  compare(e) {
    return this.from - e.from || this.startSide - e.startSide || this.rank - e.rank || this.to - e.to || this.endSide - e.endSide;
  }
}
class Ha {
  constructor(e) {
    this.heap = e;
  }
  static from(e, n = null, i = -1) {
    let r = [];
    for (let o = 0; o < e.length; o++)
      for (let s = e[o]; !s.isEmpty; s = s.nextLayer)
        s.maxPoint >= i && r.push(new tS(s, n, i, o));
    return r.length == 1 ? r[0] : new Ha(r);
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  goto(e, n = -1e9) {
    for (let i of this.heap)
      i.goto(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      bd(this.heap, i);
    return this.next(), this;
  }
  forward(e, n) {
    for (let i of this.heap)
      i.forward(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      bd(this.heap, i);
    (this.to - e || this.value.endSide - n) < 0 && this.next();
  }
  next() {
    if (this.heap.length == 0)
      this.from = this.to = 1e9, this.value = null, this.rank = -1;
    else {
      let e = this.heap[0];
      this.from = e.from, this.to = e.to, this.value = e.value, this.rank = e.rank, e.value && e.next(), bd(this.heap, 0);
    }
  }
}
function bd(t, e) {
  for (let n = t[e]; ; ) {
    let i = (e << 1) + 1;
    if (i >= t.length)
      break;
    let r = t[i];
    if (i + 1 < t.length && r.compare(t[i + 1]) >= 0 && (r = t[i + 1], i++), n.compare(r) < 0)
      break;
    t[i] = n, t[e] = r, e = i;
  }
}
class ea {
  constructor(e, n, i) {
    this.minPoint = i, this.active = [], this.activeTo = [], this.activeRank = [], this.minActive = -1, this.point = null, this.pointFrom = 0, this.pointRank = 0, this.to = -1e9, this.endSide = 0, this.openStart = -1, this.cursor = Ha.from(e, n, i);
  }
  goto(e, n = -1e9) {
    return this.cursor.goto(e, n), this.active.length = this.activeTo.length = this.activeRank.length = 0, this.minActive = -1, this.to = e, this.endSide = n, this.openStart = -1, this.next(), this;
  }
  forward(e, n) {
    for (; this.minActive > -1 && (this.activeTo[this.minActive] - e || this.active[this.minActive].endSide - n) < 0; )
      this.removeActive(this.minActive);
    this.cursor.forward(e, n);
  }
  removeActive(e) {
    Ff(this.active, e), Ff(this.activeTo, e), Ff(this.activeRank, e), this.minActive = P_(this.active, this.activeTo);
  }
  addActive(e) {
    let n = 0, { value: i, to: r, rank: o } = this.cursor;
    for (; n < this.activeRank.length && this.activeRank[n] <= o; )
      n++;
    Hf(this.active, n, i), Hf(this.activeTo, n, r), Hf(this.activeRank, n, o), e && Hf(e, n, this.cursor.from), this.minActive = P_(this.active, this.activeTo);
  }
  next() {
    let e = this.to, n = this.point;
    this.point = null;
    let i = this.openStart < 0 ? [] : null;
    for (; ; ) {
      let r = this.minActive;
      if (r > -1 && (this.activeTo[r] - this.cursor.from || this.active[r].endSide - this.cursor.startSide) < 0) {
        if (this.activeTo[r] > e) {
          this.to = this.activeTo[r], this.endSide = this.active[r].endSide;
          break;
        }
        this.removeActive(r), i && Ff(i, r);
      } else if (this.cursor.value)
        if (this.cursor.from > e) {
          this.to = this.cursor.from, this.endSide = this.cursor.startSide;
          break;
        } else {
          let o = this.cursor.value;
          if (!o.point)
            this.addActive(i), this.cursor.next();
          else if (n && this.cursor.to == this.to && this.cursor.from < this.cursor.to)
            this.cursor.next();
          else {
            this.point = o, this.pointFrom = this.cursor.from, this.pointRank = this.cursor.rank, this.to = this.cursor.to, this.endSide = o.endSide, this.cursor.next(), this.forward(this.to, this.endSide);
            break;
          }
        }
      else {
        this.to = this.endSide = 1e9;
        break;
      }
    }
    if (i) {
      this.openStart = 0;
      for (let r = i.length - 1; r >= 0 && i[r] < e; r--)
        this.openStart++;
    }
  }
  activeForPoint(e) {
    if (!this.active.length)
      return this.active;
    let n = [];
    for (let i = this.active.length - 1; i >= 0 && !(this.activeRank[i] < this.pointRank); i--)
      (this.activeTo[i] > e || this.activeTo[i] == e && this.active[i].endSide >= this.point.endSide) && n.push(this.active[i]);
    return n.reverse();
  }
  openEnd(e) {
    let n = 0;
    for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > e; i--)
      n++;
    return n;
  }
}
function E_(t, e, n, i, r, o) {
  t.goto(e), n.goto(i);
  let s = i + r, l = i, a = i - e;
  for (; ; ) {
    let f = t.to + a - n.to || t.endSide - n.endSide, c = f < 0 ? t.to + a : n.to, u = Math.min(c, s);
    if (t.point || n.point ? t.point && n.point && (t.point == n.point || t.point.eq(n.point)) && jp(t.activeForPoint(t.to + a), n.activeForPoint(n.to)) || o.comparePoint(l, u, t.point, n.point) : u > l && !jp(t.active, n.active) && o.compareRange(l, u, t.active, n.active), c > s)
      break;
    l = c, f <= 0 && t.next(), f >= 0 && n.next();
  }
}
function jp(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (t[n] != e[n] && !t[n].eq(e[n]))
      return !1;
  return !0;
}
function Ff(t, e) {
  for (let n = e, i = t.length - 1; n < i; n++)
    t[n] = t[n + 1];
  t.pop();
}
function Hf(t, e, n) {
  for (let i = t.length - 1; i >= e; i--)
    t[i + 1] = t[i];
  t[e] = n;
}
function P_(t, e) {
  let n = -1, i = 1e9;
  for (let r = 0; r < e.length; r++)
    (e[r] - i || t[r].endSide - t[n].endSide) < 0 && (n = r, i = e[r]);
  return n;
}
function mf(t, e, n = t.length) {
  let i = 0;
  for (let r = 0; r < n; )
    t.charCodeAt(r) == 9 ? (i += e - i % e, r++) : (i++, r = fi(t, r));
  return i;
}
function Bp(t, e, n, i) {
  for (let r = 0, o = 0; ; ) {
    if (o >= e)
      return r;
    if (r == t.length)
      break;
    o += t.charCodeAt(r) == 9 ? n - o % n : 1, r = fi(t, r);
  }
  return i === !0 ? -1 : t.length;
}
const Lp = "ͼ", R_ = typeof Symbol > "u" ? "__" + Lp : Symbol.for(Lp), xp = typeof Symbol > "u" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet"), I_ = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : {};
class Ho {
  constructor(e, n) {
    this.rules = [];
    let { finish: i } = n || {};
    function r(s) {
      return /^@/.test(s) ? [s] : s.split(/,\s*/);
    }
    function o(s, l, a, f) {
      let c = [], u = /^@(\w+)\b/.exec(s[0]), h = u && u[1] == "keyframes";
      if (u && l == null)
        return a.push(s[0] + ";");
      for (let d in l) {
        let p = l[d];
        if (/&/.test(d))
          o(
            d.split(/,\s*/).map((g) => s.map((_) => g.replace(/&/, _))).reduce((g, _) => g.concat(_)),
            p,
            a
          );
        else if (p && typeof p == "object") {
          if (!u)
            throw new RangeError("The value of a property (" + d + ") should be a primitive value.");
          o(r(d), p, c, h);
        } else
          p != null && c.push(d.replace(/_.*/, "").replace(/[A-Z]/g, (g) => "-" + g.toLowerCase()) + ": " + p + ";");
      }
      (c.length || h) && a.push((i && !u && !f ? s.map(i) : s).join(", ") + " {" + c.join(" ") + "}");
    }
    for (let s in e)
      o(r(s), e[s], this.rules);
  }
  getRules() {
    return this.rules.join(`
`);
  }
  static newName() {
    let e = I_[R_] || 1;
    return I_[R_] = e + 1, Lp + e.toString(36);
  }
  static mount(e, n) {
    (e[xp] || new Xx(e)).mount(Array.isArray(n) ? n : [n]);
  }
}
let Wf = null;
class Xx {
  constructor(e) {
    if (!e.head && e.adoptedStyleSheets && typeof CSSStyleSheet < "u") {
      if (Wf)
        return e.adoptedStyleSheets = [Wf.sheet].concat(e.adoptedStyleSheets), e[xp] = Wf;
      this.sheet = new CSSStyleSheet(), e.adoptedStyleSheets = [this.sheet].concat(e.adoptedStyleSheets), Wf = this;
    } else {
      this.styleTag = (e.ownerDocument || e).createElement("style");
      let n = e.head || e;
      n.insertBefore(this.styleTag, n.firstChild);
    }
    this.modules = [], e[xp] = this;
  }
  mount(e) {
    let n = this.sheet, i = 0, r = 0;
    for (let o = 0; o < e.length; o++) {
      let s = e[o], l = this.modules.indexOf(s);
      if (l < r && l > -1 && (this.modules.splice(l, 1), r--, l = -1), l == -1) {
        if (this.modules.splice(r++, 0, s), n)
          for (let a = 0; a < s.rules.length; a++)
            n.insertRule(s.rules[a], i++);
      } else {
        for (; r < l; )
          i += this.modules[r++].rules.length;
        i += s.rules.length, r++;
      }
    }
    if (!n) {
      let o = "";
      for (let s = 0; s < this.modules.length; s++)
        o += this.modules[s].getRules() + `
`;
      this.styleTag.textContent = o;
    }
  }
}
var Wo = {
  8: "Backspace",
  9: "Tab",
  10: "Enter",
  12: "NumLock",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  44: "PrintScreen",
  45: "Insert",
  46: "Delete",
  59: ";",
  61: "=",
  91: "Meta",
  92: "Meta",
  106: "*",
  107: "+",
  108: ",",
  109: "-",
  110: ".",
  111: "/",
  144: "NumLock",
  145: "ScrollLock",
  160: "Shift",
  161: "Shift",
  162: "Control",
  163: "Control",
  164: "Alt",
  165: "Alt",
  173: "-",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
}, Wa = {
  48: ")",
  49: "!",
  50: "@",
  51: "#",
  52: "$",
  53: "%",
  54: "^",
  55: "&",
  56: "*",
  57: "(",
  59: ":",
  61: "+",
  173: "_",
  186: ":",
  187: "+",
  188: "<",
  189: "_",
  190: ">",
  191: "?",
  192: "~",
  219: "{",
  220: "|",
  221: "}",
  222: '"'
}, N_ = typeof navigator < "u" && /Chrome\/(\d+)/.exec(navigator.userAgent), Qx = typeof navigator < "u" && /Mac/.test(navigator.platform), Yx = typeof navigator < "u" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent), Zx = Qx || N_ && +N_[1] < 57;
for (var Qn = 0; Qn < 10; Qn++)
  Wo[48 + Qn] = Wo[96 + Qn] = String(Qn);
for (var Qn = 1; Qn <= 24; Qn++)
  Wo[Qn + 111] = "F" + Qn;
for (var Qn = 65; Qn <= 90; Qn++)
  Wo[Qn] = String.fromCharCode(Qn + 32), Wa[Qn] = String.fromCharCode(Qn);
for (var _d in Wo)
  Wa.hasOwnProperty(_d) || (Wa[_d] = Wo[_d]);
function $x(t) {
  var e = Zx && (t.ctrlKey || t.altKey || t.metaKey) || Yx && t.shiftKey && t.key && t.key.length == 1 || t.key == "Unidentified", n = !e && t.key || (t.shiftKey ? Wa : Wo)[t.keyCode] || t.key || "Unidentified";
  return n == "Esc" && (n = "Escape"), n == "Del" && (n = "Delete"), n == "Left" && (n = "ArrowLeft"), n == "Up" && (n = "ArrowUp"), n == "Right" && (n = "ArrowRight"), n == "Down" && (n = "ArrowDown"), n;
}
function fu(t) {
  let e;
  return t.nodeType == 11 ? e = t.getSelection ? t : t.ownerDocument : e = t, e.getSelection();
}
function Ol(t, e) {
  return e ? t == e || t.contains(e.nodeType != 1 ? e.parentNode : e) : !1;
}
function ez(t) {
  let e = t.activeElement;
  for (; e && e.shadowRoot; )
    e = e.shadowRoot.activeElement;
  return e;
}
function Cc(t, e) {
  if (!e.anchorNode)
    return !1;
  try {
    return Ol(t, e.anchorNode);
  } catch {
    return !1;
  }
}
function Ua(t) {
  return t.nodeType == 3 ? Tl(t, 0, t.nodeValue.length).getClientRects() : t.nodeType == 1 ? t.getClientRects() : [];
}
function cu(t, e, n, i) {
  return n ? D_(t, e, n, i, -1) || D_(t, e, n, i, 1) : !1;
}
function uu(t) {
  for (var e = 0; ; e++)
    if (t = t.previousSibling, !t)
      return e;
}
function D_(t, e, n, i, r) {
  for (; ; ) {
    if (t == n && e == i)
      return !0;
    if (e == (r < 0 ? 0 : qa(t))) {
      if (t.nodeName == "DIV")
        return !1;
      let o = t.parentNode;
      if (!o || o.nodeType != 1)
        return !1;
      e = uu(t) + (r < 0 ? 0 : 1), t = o;
    } else if (t.nodeType == 1) {
      if (t = t.childNodes[e + (r < 0 ? -1 : 0)], t.nodeType == 1 && t.contentEditable == "false")
        return !1;
      e = r < 0 ? qa(t) : 0;
    } else
      return !1;
  }
}
function qa(t) {
  return t.nodeType == 3 ? t.nodeValue.length : t.childNodes.length;
}
const nS = { left: 0, right: 0, top: 0, bottom: 0 };
function vg(t, e) {
  let n = e ? t.left : t.right;
  return { left: n, right: n, top: t.top, bottom: t.bottom };
}
function tz(t) {
  return {
    left: 0,
    right: t.innerWidth,
    top: 0,
    bottom: t.innerHeight
  };
}
function nz(t, e, n, i, r, o, s, l) {
  let a = t.ownerDocument, f = a.defaultView || window;
  for (let c = t; c; )
    if (c.nodeType == 1) {
      let u, h = c == a.body;
      if (h)
        u = tz(f);
      else {
        if (c.scrollHeight <= c.clientHeight && c.scrollWidth <= c.clientWidth) {
          c = c.assignedSlot || c.parentNode;
          continue;
        }
        let g = c.getBoundingClientRect();
        u = {
          left: g.left,
          right: g.left + c.clientWidth,
          top: g.top,
          bottom: g.top + c.clientHeight
        };
      }
      let d = 0, p = 0;
      if (r == "nearest")
        e.top < u.top ? (p = -(u.top - e.top + s), n > 0 && e.bottom > u.bottom + p && (p = e.bottom - u.bottom + p + s)) : e.bottom > u.bottom && (p = e.bottom - u.bottom + s, n < 0 && e.top - p < u.top && (p = -(u.top + p - e.top + s)));
      else {
        let g = e.bottom - e.top, _ = u.bottom - u.top;
        p = (r == "center" && g <= _ ? e.top + g / 2 - _ / 2 : r == "start" || r == "center" && n < 0 ? e.top - s : e.bottom - _ + s) - u.top;
      }
      if (i == "nearest" ? e.left < u.left ? (d = -(u.left - e.left + o), n > 0 && e.right > u.right + d && (d = e.right - u.right + d + o)) : e.right > u.right && (d = e.right - u.right + o, n < 0 && e.left < u.left + d && (d = -(u.left + d - e.left + o))) : d = (i == "center" ? e.left + (e.right - e.left) / 2 - (u.right - u.left) / 2 : i == "start" == l ? e.left - o : e.right - (u.right - u.left) + o) - u.left, d || p)
        if (h)
          f.scrollBy(d, p);
        else {
          let g = 0, _ = 0;
          if (p) {
            let b = c.scrollTop;
            c.scrollTop += p, _ = c.scrollTop - b;
          }
          if (d) {
            let b = c.scrollLeft;
            c.scrollLeft += d, g = c.scrollLeft - b;
          }
          e = {
            left: e.left - g,
            top: e.top - _,
            right: e.right - g,
            bottom: e.bottom - _
          }, g && Math.abs(g - d) < 1 && (i = "nearest"), _ && Math.abs(_ - p) < 1 && (r = "nearest");
        }
      if (h)
        break;
      c = c.assignedSlot || c.parentNode;
    } else if (c.nodeType == 11)
      c = c.host;
    else
      break;
}
function iz(t) {
  let e = t.ownerDocument;
  for (let n = t.parentNode; n && n != e.body; )
    if (n.nodeType == 1) {
      if (n.scrollHeight > n.clientHeight || n.scrollWidth > n.clientWidth)
        return n;
      n = n.assignedSlot || n.parentNode;
    } else if (n.nodeType == 11)
      n = n.host;
    else
      break;
  return null;
}
class rz {
  constructor() {
    this.anchorNode = null, this.anchorOffset = 0, this.focusNode = null, this.focusOffset = 0;
  }
  eq(e) {
    return this.anchorNode == e.anchorNode && this.anchorOffset == e.anchorOffset && this.focusNode == e.focusNode && this.focusOffset == e.focusOffset;
  }
  setRange(e) {
    this.set(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset);
  }
  set(e, n, i, r) {
    this.anchorNode = e, this.anchorOffset = n, this.focusNode = i, this.focusOffset = r;
  }
}
let Us = null;
function iS(t) {
  if (t.setActive)
    return t.setActive();
  if (Us)
    return t.focus(Us);
  let e = [];
  for (let n = t; n && (e.push(n, n.scrollTop, n.scrollLeft), n != n.ownerDocument); n = n.parentNode)
    ;
  if (t.focus(Us == null ? {
    get preventScroll() {
      return Us = { preventScroll: !0 }, !0;
    }
  } : void 0), !Us) {
    Us = !1;
    for (let n = 0; n < e.length; ) {
      let i = e[n++], r = e[n++], o = e[n++];
      i.scrollTop != r && (i.scrollTop = r), i.scrollLeft != o && (i.scrollLeft = o);
    }
  }
}
let j_;
function Tl(t, e, n = e) {
  let i = j_ || (j_ = document.createRange());
  return i.setEnd(t, n), i.setStart(t, e), i;
}
function fl(t, e, n) {
  let i = { key: e, code: e, keyCode: n, which: n, cancelable: !0 }, r = new KeyboardEvent("keydown", i);
  r.synthetic = !0, t.dispatchEvent(r);
  let o = new KeyboardEvent("keyup", i);
  return o.synthetic = !0, t.dispatchEvent(o), r.defaultPrevented || o.defaultPrevented;
}
function oz(t) {
  for (; t; ) {
    if (t && (t.nodeType == 9 || t.nodeType == 11 && t.host))
      return t;
    t = t.assignedSlot || t.parentNode;
  }
  return null;
}
function rS(t) {
  for (; t.attributes.length; )
    t.removeAttributeNode(t.attributes[0]);
}
function sz(t, e) {
  let n = e.focusNode, i = e.focusOffset;
  if (!n || e.anchorNode != n || e.anchorOffset != i)
    return !1;
  for (; ; )
    if (i) {
      if (n.nodeType != 1)
        return !1;
      let r = n.childNodes[i - 1];
      r.contentEditable == "false" ? i-- : (n = r, i = qa(n));
    } else {
      if (n == t)
        return !0;
      i = uu(n), n = n.parentNode;
    }
}
class ei {
  constructor(e, n, i = !0) {
    this.node = e, this.offset = n, this.precise = i;
  }
  static before(e, n) {
    return new ei(e.parentNode, uu(e), n);
  }
  static after(e, n) {
    return new ei(e.parentNode, uu(e) + 1, n);
  }
}
const kg = [];
class nn {
  constructor() {
    this.parent = null, this.dom = null, this.dirty = 2;
  }
  get editorView() {
    if (!this.parent)
      throw new Error("Accessing view in orphan content view");
    return this.parent.editorView;
  }
  get overrideDOMText() {
    return null;
  }
  get posAtStart() {
    return this.parent ? this.parent.posBefore(this) : 0;
  }
  get posAtEnd() {
    return this.posAtStart + this.length;
  }
  posBefore(e) {
    let n = this.posAtStart;
    for (let i of this.children) {
      if (i == e)
        return n;
      n += i.length + i.breakAfter;
    }
    throw new RangeError("Invalid child in posBefore");
  }
  posAfter(e) {
    return this.posBefore(e) + e.length;
  }
  coordsAt(e, n) {
    return null;
  }
  sync(e) {
    if (this.dirty & 2) {
      let n = this.dom, i = null, r;
      for (let o of this.children) {
        if (o.dirty) {
          if (!o.dom && (r = i ? i.nextSibling : n.firstChild)) {
            let s = nn.get(r);
            (!s || !s.parent && s.canReuseDOM(o)) && o.reuseDOM(r);
          }
          o.sync(e), o.dirty = 0;
        }
        if (r = i ? i.nextSibling : n.firstChild, e && !e.written && e.node == n && r != o.dom && (e.written = !0), o.dom.parentNode == n)
          for (; r && r != o.dom; )
            r = B_(r);
        else
          n.insertBefore(o.dom, r);
        i = o.dom;
      }
      for (r = i ? i.nextSibling : n.firstChild, r && e && e.node == n && (e.written = !0); r; )
        r = B_(r);
    } else if (this.dirty & 1)
      for (let n of this.children)
        n.dirty && (n.sync(e), n.dirty = 0);
  }
  reuseDOM(e) {
  }
  localPosFromDOM(e, n) {
    let i;
    if (e == this.dom)
      i = this.dom.childNodes[n];
    else {
      let r = qa(e) == 0 ? 0 : n == 0 ? -1 : 1;
      for (; ; ) {
        let o = e.parentNode;
        if (o == this.dom)
          break;
        r == 0 && o.firstChild != o.lastChild && (e == o.firstChild ? r = -1 : r = 1), e = o;
      }
      r < 0 ? i = e : i = e.nextSibling;
    }
    if (i == this.dom.firstChild)
      return 0;
    for (; i && !nn.get(i); )
      i = i.nextSibling;
    if (!i)
      return this.length;
    for (let r = 0, o = 0; ; r++) {
      let s = this.children[r];
      if (s.dom == i)
        return o;
      o += s.length + s.breakAfter;
    }
  }
  domBoundsAround(e, n, i = 0) {
    let r = -1, o = -1, s = -1, l = -1;
    for (let a = 0, f = i, c = i; a < this.children.length; a++) {
      let u = this.children[a], h = f + u.length;
      if (f < e && h > n)
        return u.domBoundsAround(e, n, f);
      if (h >= e && r == -1 && (r = a, o = f), f > n && u.dom.parentNode == this.dom) {
        s = a, l = c;
        break;
      }
      c = h, f = h + u.breakAfter;
    }
    return {
      from: o,
      to: l < 0 ? i + this.length : l,
      startDOM: (r ? this.children[r - 1].dom.nextSibling : null) || this.dom.firstChild,
      endDOM: s < this.children.length && s >= 0 ? this.children[s].dom : null
    };
  }
  markDirty(e = !1) {
    this.dirty |= 2, this.markParentsDirty(e);
  }
  markParentsDirty(e) {
    for (let n = this.parent; n; n = n.parent) {
      if (e && (n.dirty |= 2), n.dirty & 1)
        return;
      n.dirty |= 1, e = !1;
    }
  }
  setParent(e) {
    this.parent != e && (this.parent = e, this.dirty && this.markParentsDirty(!0));
  }
  setDOM(e) {
    this.dom && (this.dom.cmView = null), this.dom = e, e.cmView = this;
  }
  get rootView() {
    for (let e = this; ; ) {
      let n = e.parent;
      if (!n)
        return e;
      e = n;
    }
  }
  replaceChildren(e, n, i = kg) {
    this.markDirty();
    for (let r = e; r < n; r++) {
      let o = this.children[r];
      o.parent == this && o.destroy();
    }
    this.children.splice(e, n - e, ...i);
    for (let r = 0; r < i.length; r++)
      i[r].setParent(this);
  }
  ignoreMutation(e) {
    return !1;
  }
  ignoreEvent(e) {
    return !1;
  }
  childCursor(e = this.length) {
    return new oS(this.children, e, this.children.length);
  }
  childPos(e, n = 1) {
    return this.childCursor().findPos(e, n);
  }
  toString() {
    let e = this.constructor.name.replace("View", "");
    return e + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + (e == "Text" ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");
  }
  static get(e) {
    return e.cmView;
  }
  get isEditable() {
    return !0;
  }
  merge(e, n, i, r, o, s) {
    return !1;
  }
  become(e) {
    return !1;
  }
  canReuseDOM(e) {
    return e.constructor == this.constructor;
  }
  getSide() {
    return 0;
  }
  destroy() {
    this.parent = null;
  }
}
nn.prototype.breakAfter = 0;
function B_(t) {
  let e = t.nextSibling;
  return t.parentNode.removeChild(t), e;
}
class oS {
  constructor(e, n, i) {
    this.children = e, this.pos = n, this.i = i, this.off = 0;
  }
  findPos(e, n = 1) {
    for (; ; ) {
      if (e > this.pos || e == this.pos && (n > 0 || this.i == 0 || this.children[this.i - 1].breakAfter))
        return this.off = e - this.pos, this;
      let i = this.children[--this.i];
      this.pos -= i.length + i.breakAfter;
    }
  }
}
function sS(t, e, n, i, r, o, s, l, a) {
  let { children: f } = t, c = f.length ? f[e] : null, u = o.length ? o[o.length - 1] : null, h = u ? u.breakAfter : s;
  if (!(e == i && c && !s && !h && o.length < 2 && c.merge(n, r, o.length ? u : null, n == 0, l, a))) {
    if (i < f.length) {
      let d = f[i];
      d && r < d.length ? (e == i && (d = d.split(r), r = 0), !h && u && d.merge(0, r, u, !0, 0, a) ? o[o.length - 1] = d : (r && d.merge(0, r, null, !1, 0, a), o.push(d))) : d != null && d.breakAfter && (u ? u.breakAfter = 1 : s = 1), i++;
    }
    for (c && (c.breakAfter = s, n > 0 && (!s && o.length && c.merge(n, c.length, o[0], !1, l, 0) ? c.breakAfter = o.shift().breakAfter : (n < c.length || c.children.length && c.children[c.children.length - 1].length == 0) && c.merge(n, c.length, null, !1, l, 0), e++)); e < i && o.length; )
      if (f[i - 1].become(o[o.length - 1]))
        i--, o.pop(), a = o.length ? 0 : l;
      else if (f[e].become(o[0]))
        e++, o.shift(), l = o.length ? 0 : a;
      else
        break;
    !o.length && e && i < f.length && !f[e - 1].breakAfter && f[i].merge(0, 0, f[e - 1], !1, l, a) && e--, (e < i || o.length) && t.replaceChildren(e, i, o);
  }
}
function lS(t, e, n, i, r, o) {
  let s = t.childCursor(), { i: l, off: a } = s.findPos(n, 1), { i: f, off: c } = s.findPos(e, -1), u = e - n;
  for (let h of i)
    u += h.length;
  t.length += u, sS(t, f, c, l, a, i, 0, r, o);
}
let Ai = typeof navigator < "u" ? navigator : { userAgent: "", vendor: "", platform: "" }, zp = typeof document < "u" ? document : { documentElement: { style: {} } };
const Vp = /* @__PURE__ */ /Edge\/(\d+)/.exec(Ai.userAgent), aS = /* @__PURE__ */ /MSIE \d/.test(Ai.userAgent), Fp = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ai.userAgent), Mh = !!(aS || Fp || Vp), L_ = !Mh && /* @__PURE__ */ /gecko\/(\d+)/i.test(Ai.userAgent), yd = !Mh && /* @__PURE__ */ /Chrome\/(\d+)/.exec(Ai.userAgent), x_ = "webkitFontSmoothing" in zp.documentElement.style, fS = !Mh && /* @__PURE__ */ /Apple Computer/.test(Ai.vendor), z_ = fS && (/* @__PURE__ */ /Mobile\/\w+/.test(Ai.userAgent) || Ai.maxTouchPoints > 2);
var Qe = {
  mac: z_ || /* @__PURE__ */ /Mac/.test(Ai.platform),
  windows: /* @__PURE__ */ /Win/.test(Ai.platform),
  linux: /* @__PURE__ */ /Linux|X11/.test(Ai.platform),
  ie: Mh,
  ie_version: aS ? zp.documentMode || 6 : Fp ? +Fp[1] : Vp ? +Vp[1] : 0,
  gecko: L_,
  gecko_version: L_ ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec(Ai.userAgent) || [0, 0])[1] : 0,
  chrome: !!yd,
  chrome_version: yd ? +yd[1] : 0,
  ios: z_,
  android: /* @__PURE__ */ /Android\b/.test(Ai.userAgent),
  webkit: x_,
  safari: fS,
  webkit_version: x_ ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,
  tabSize: zp.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
};
const lz = 256;
class Uo extends nn {
  constructor(e) {
    super(), this.text = e;
  }
  get length() {
    return this.text.length;
  }
  createDOM(e) {
    this.setDOM(e || document.createTextNode(this.text));
  }
  sync(e) {
    this.dom || this.createDOM(), this.dom.nodeValue != this.text && (e && e.node == this.dom && (e.written = !0), this.dom.nodeValue = this.text);
  }
  reuseDOM(e) {
    e.nodeType == 3 && this.createDOM(e);
  }
  merge(e, n, i) {
    return i && (!(i instanceof Uo) || this.length - (n - e) + i.length > lz) ? !1 : (this.text = this.text.slice(0, e) + (i ? i.text : "") + this.text.slice(n), this.markDirty(), !0);
  }
  split(e) {
    let n = new Uo(this.text.slice(e));
    return this.text = this.text.slice(0, e), this.markDirty(), n;
  }
  localPosFromDOM(e, n) {
    return e == this.dom ? n : n ? this.text.length : 0;
  }
  domAtPos(e) {
    return new ei(this.dom, e);
  }
  domBoundsAround(e, n, i) {
    return { from: i, to: i + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };
  }
  coordsAt(e, n) {
    return Hp(this.dom, e, n);
  }
}
class Vr extends nn {
  constructor(e, n = [], i = 0) {
    super(), this.mark = e, this.children = n, this.length = i;
    for (let r of n)
      r.setParent(this);
  }
  setAttrs(e) {
    if (rS(e), this.mark.class && (e.className = this.mark.class), this.mark.attrs)
      for (let n in this.mark.attrs)
        e.setAttribute(n, this.mark.attrs[n]);
    return e;
  }
  reuseDOM(e) {
    e.nodeName == this.mark.tagName.toUpperCase() && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    this.dom ? this.dirty & 4 && this.setAttrs(this.dom) : this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))), super.sync(e);
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof Vr && i.mark.eq(this.mark)) || e && o <= 0 || n < this.length && s <= 0) ? !1 : (lS(this, e, n, i ? i.children : [], o - 1, s - 1), this.markDirty(), !0);
  }
  split(e) {
    let n = [], i = 0, r = -1, o = 0;
    for (let l of this.children) {
      let a = i + l.length;
      a > e && n.push(i < e ? l.split(e - i) : l), r < 0 && i >= e && (r = o), i = a, o++;
    }
    let s = this.length - e;
    return this.length = e, r > -1 && (this.children.length = r, this.markDirty()), new Vr(this.mark, n, s);
  }
  domAtPos(e) {
    return hS(this, e);
  }
  coordsAt(e, n) {
    return pS(this, e, n);
  }
}
function Hp(t, e, n) {
  let i = t.nodeValue.length;
  e > i && (e = i);
  let r = e, o = e, s = 0;
  e == 0 && n < 0 || e == i && n >= 0 ? Qe.chrome || Qe.gecko || (e ? (r--, s = 1) : o < i && (o++, s = -1)) : n < 0 ? r-- : o < i && o++;
  let l = Tl(t, r, o).getClientRects();
  if (!l.length)
    return nS;
  let a = l[(s ? s < 0 : n >= 0) ? 0 : l.length - 1];
  return Qe.safari && !s && a.width == 0 && (a = Array.prototype.find.call(l, (f) => f.width) || a), s ? vg(a, s < 0) : a || null;
}
class Ao extends nn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.side = i, this.prevWidget = null;
  }
  static create(e, n, i) {
    return new (e.customView || Ao)(e, n, i);
  }
  split(e) {
    let n = Ao.create(this.widget, this.length - e, this.side);
    return this.length -= e, n;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  getSide() {
    return this.side;
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof Ao) || !this.widget.compare(i.widget) || e > 0 && o <= 0 || n < this.length && s <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  become(e) {
    return e.length == this.length && e instanceof Ao && e.side == this.side && this.widget.constructor == e.widget.constructor ? (this.widget.eq(e.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  get overrideDOMText() {
    if (this.length == 0)
      return jt.empty;
    let e = this;
    for (; e.parent; )
      e = e.parent;
    let n = e.editorView, i = n && n.state.doc, r = this.posAtStart;
    return i ? i.slice(r, r + this.length) : jt.empty;
  }
  domAtPos(e) {
    return e == 0 ? ei.before(this.dom) : ei.after(this.dom, e == this.length);
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e, n) {
    let i = this.dom.getClientRects(), r = null;
    if (!i.length)
      return nS;
    for (let o = e > 0 ? i.length - 1 : 0; r = i[o], !(e > 0 ? o == 0 : o == i.length - 1 || r.top < r.bottom); o += e > 0 ? -1 : 1)
      ;
    return this.length ? r : vg(r, this.side > 0);
  }
  get isEditable() {
    return !1;
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class cS extends Ao {
  domAtPos(e) {
    let { topView: n, text: i } = this.widget;
    return n ? Wp(e, 0, n, i, (r, o) => r.domAtPos(o), (r) => new ei(i, Math.min(r, i.nodeValue.length))) : new ei(i, Math.min(e, i.nodeValue.length));
  }
  sync() {
    this.setDOM(this.widget.toDOM());
  }
  localPosFromDOM(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? uS(e, n, i, r) : Math.min(n, this.length);
  }
  ignoreMutation() {
    return !1;
  }
  get overrideDOMText() {
    return null;
  }
  coordsAt(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? Wp(e, n, i, r, (o, s, l) => o.coordsAt(s, l), (o, s) => Hp(r, o, s)) : Hp(r, e, n);
  }
  destroy() {
    var e;
    super.destroy(), (e = this.widget.topView) === null || e === void 0 || e.destroy();
  }
  get isEditable() {
    return !0;
  }
  canReuseDOM() {
    return !0;
  }
}
function Wp(t, e, n, i, r, o) {
  if (n instanceof Vr) {
    for (let s = n.dom.firstChild; s; s = s.nextSibling) {
      let l = nn.get(s);
      if (!l)
        return o(t, e);
      let a = Ol(s, i), f = l.length + (a ? i.nodeValue.length : 0);
      if (t < f || t == f && l.getSide() <= 0)
        return a ? Wp(t, e, l, i, r, o) : r(l, t, e);
      t -= f;
    }
    return r(n, n.length, -1);
  } else
    return n.dom == i ? o(t, e) : r(n, t, e);
}
function uS(t, e, n, i) {
  if (n instanceof Vr)
    for (let r of n.children) {
      let o = 0, s = Ol(r.dom, i);
      if (Ol(r.dom, t))
        return o + (s ? uS(t, e, r, i) : r.localPosFromDOM(t, e));
      o += s ? i.nodeValue.length : r.length;
    }
  else if (n.dom == i)
    return Math.min(e, i.nodeValue.length);
  return n.localPosFromDOM(t, e);
}
class El extends nn {
  constructor(e) {
    super(), this.side = e;
  }
  get length() {
    return 0;
  }
  merge() {
    return !1;
  }
  become(e) {
    return e instanceof El && e.side == this.side;
  }
  split() {
    return new El(this.side);
  }
  sync() {
    if (!this.dom) {
      let e = document.createElement("img");
      e.className = "cm-widgetBuffer", e.setAttribute("aria-hidden", "true"), this.setDOM(e);
    }
  }
  getSide() {
    return this.side;
  }
  domAtPos(e) {
    return ei.before(this.dom);
  }
  localPosFromDOM() {
    return 0;
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e) {
    let n = this.dom.getBoundingClientRect(), i = az(this, this.side > 0 ? -1 : 1);
    return i && i.top < n.bottom && i.bottom > n.top ? { left: n.left, right: n.right, top: i.top, bottom: i.bottom } : n;
  }
  get overrideDOMText() {
    return jt.empty;
  }
}
Uo.prototype.children = Ao.prototype.children = El.prototype.children = kg;
function az(t, e) {
  let n = t.parent, i = n ? n.children.indexOf(t) : -1;
  for (; n && i >= 0; )
    if (e < 0 ? i > 0 : i < n.children.length) {
      let r = n.children[i + e];
      if (r instanceof Uo) {
        let o = r.coordsAt(e < 0 ? r.length : 0, e);
        if (o)
          return o;
      }
      i += e;
    } else if (n instanceof Vr && n.parent)
      i = n.parent.children.indexOf(n) + (e < 0 ? 0 : 1), n = n.parent;
    else {
      let r = n.dom.lastChild;
      if (r && r.nodeName == "BR")
        return r.getClientRects()[0];
      break;
    }
}
function hS(t, e) {
  let n = t.dom, { children: i } = t, r = 0;
  for (let o = 0; r < i.length; r++) {
    let s = i[r], l = o + s.length;
    if (!(l == o && s.getSide() <= 0)) {
      if (e > o && e < l && s.dom.parentNode == n)
        return s.domAtPos(e - o);
      if (e <= o)
        break;
      o = l;
    }
  }
  for (let o = r; o > 0; o--) {
    let s = i[o - 1];
    if (s.dom.parentNode == n)
      return s.domAtPos(s.length);
  }
  for (let o = r; o < i.length; o++) {
    let s = i[o];
    if (s.dom.parentNode == n)
      return s.domAtPos(0);
  }
  return new ei(n, 0);
}
function dS(t, e, n) {
  let i, { children: r } = t;
  n > 0 && e instanceof Vr && r.length && (i = r[r.length - 1]) instanceof Vr && i.mark.eq(e.mark) ? dS(i, e.children[0], n - 1) : (r.push(e), e.setParent(t)), t.length += e.length;
}
function pS(t, e, n) {
  let i = null, r = -1, o = null, s = -1;
  function l(f, c) {
    for (let u = 0, h = 0; u < f.children.length && h <= c; u++) {
      let d = f.children[u], p = h + d.length;
      p >= c && (d.children.length ? l(d, c - h) : !o && (p > c || h == p && d.getSide() > 0) ? (o = d, s = c - h) : (h < c || h == p && d.getSide() < 0) && (i = d, r = c - h)), h = p;
    }
  }
  l(t, e);
  let a = (n < 0 ? i : o) || i || o;
  return a ? a.coordsAt(Math.max(0, a == i ? r : s), n) : fz(t);
}
function fz(t) {
  let e = t.dom.lastChild;
  if (!e)
    return t.dom.getBoundingClientRect();
  let n = Ua(e);
  return n[n.length - 1] || null;
}
function Up(t, e) {
  for (let n in t)
    n == "class" && e.class ? e.class += " " + t.class : n == "style" && e.style ? e.style += ";" + t.style : e[n] = t[n];
  return e;
}
function Cg(t, e) {
  if (t == e)
    return !0;
  if (!t || !e)
    return !1;
  let n = Object.keys(t), i = Object.keys(e);
  if (n.length != i.length)
    return !1;
  for (let r of n)
    if (i.indexOf(r) == -1 || t[r] !== e[r])
      return !1;
  return !0;
}
function qp(t, e, n) {
  let i = null;
  if (e)
    for (let r in e)
      n && r in n || t.removeAttribute(i = r);
  if (n)
    for (let r in n)
      e && e[r] == n[r] || t.setAttribute(i = r, n[r]);
  return !!i;
}
class Yo {
  eq(e) {
    return !1;
  }
  updateDOM(e) {
    return !1;
  }
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  get estimatedHeight() {
    return -1;
  }
  ignoreEvent(e) {
    return !0;
  }
  get customView() {
    return null;
  }
  destroy(e) {
  }
}
var Yt = /* @__PURE__ */ function(t) {
  return t[t.Text = 0] = "Text", t[t.WidgetBefore = 1] = "WidgetBefore", t[t.WidgetAfter = 2] = "WidgetAfter", t[t.WidgetRange = 3] = "WidgetRange", t;
}(Yt || (Yt = {}));
class rt extends Ts {
  constructor(e, n, i, r) {
    super(), this.startSide = e, this.endSide = n, this.widget = i, this.spec = r;
  }
  get heightRelevant() {
    return !1;
  }
  static mark(e) {
    return new Ah(e);
  }
  static widget(e) {
    let n = e.side || 0, i = !!e.block;
    return n += i ? n > 0 ? 3e8 : -4e8 : n > 0 ? 1e8 : -1e8, new Es(e, n, n, i, e.widget || null, !1);
  }
  static replace(e) {
    let n = !!e.block, i, r;
    if (e.isBlockGap)
      i = -5e8, r = 4e8;
    else {
      let { start: o, end: s } = mS(e, n);
      i = (o ? n ? -3e8 : -1 : 5e8) - 1, r = (s ? n ? 2e8 : 1 : -6e8) + 1;
    }
    return new Es(e, i, r, n, e.widget || null, !0);
  }
  static line(e) {
    return new gf(e);
  }
  static set(e, n = !1) {
    return Bt.of(e, n);
  }
  hasHeight() {
    return this.widget ? this.widget.estimatedHeight > -1 : !1;
  }
}
rt.none = Bt.empty;
class Ah extends rt {
  constructor(e) {
    let { start: n, end: i } = mS(e);
    super(n ? -1 : 5e8, i ? 1 : -6e8, null, e), this.tagName = e.tagName || "span", this.class = e.class || "", this.attrs = e.attributes || null;
  }
  eq(e) {
    return this == e || e instanceof Ah && this.tagName == e.tagName && this.class == e.class && Cg(this.attrs, e.attrs);
  }
  range(e, n = e) {
    if (e >= n)
      throw new RangeError("Mark decorations may not be empty");
    return super.range(e, n);
  }
}
Ah.prototype.point = !1;
class gf extends rt {
  constructor(e) {
    super(-2e8, -2e8, null, e);
  }
  eq(e) {
    return e instanceof gf && Cg(this.spec.attributes, e.spec.attributes);
  }
  range(e, n = e) {
    if (n != e)
      throw new RangeError("Line decoration ranges must be zero-length");
    return super.range(e, n);
  }
}
gf.prototype.mapMode = li.TrackBefore;
gf.prototype.point = !0;
class Es extends rt {
  constructor(e, n, i, r, o, s) {
    super(n, i, o, e), this.block = r, this.isReplace = s, this.mapMode = r ? n <= 0 ? li.TrackBefore : li.TrackAfter : li.TrackDel;
  }
  get type() {
    return this.startSide < this.endSide ? Yt.WidgetRange : this.startSide <= 0 ? Yt.WidgetBefore : Yt.WidgetAfter;
  }
  get heightRelevant() {
    return this.block || !!this.widget && this.widget.estimatedHeight >= 5;
  }
  eq(e) {
    return e instanceof Es && cz(this.widget, e.widget) && this.block == e.block && this.startSide == e.startSide && this.endSide == e.endSide;
  }
  range(e, n = e) {
    if (this.isReplace && (e > n || e == n && this.startSide > 0 && this.endSide <= 0))
      throw new RangeError("Invalid range for replacement decoration");
    if (!this.isReplace && n != e)
      throw new RangeError("Widget decorations can only have zero-length ranges");
    return super.range(e, n);
  }
}
Es.prototype.point = !0;
function mS(t, e = !1) {
  let { inclusiveStart: n, inclusiveEnd: i } = t;
  return n == null && (n = t.inclusive), i == null && (i = t.inclusive), { start: n ?? e, end: i ?? e };
}
function cz(t, e) {
  return t == e || !!(t && e && t.compare(e));
}
function Jp(t, e, n, i = 0) {
  let r = n.length - 1;
  r >= 0 && n[r] + i >= t ? n[r] = Math.max(n[r], e) : n.push(t, e);
}
class ci extends nn {
  constructor() {
    super(...arguments), this.children = [], this.length = 0, this.prevAttrs = void 0, this.attrs = null, this.breakAfter = 0;
  }
  merge(e, n, i, r, o, s) {
    if (i) {
      if (!(i instanceof ci))
        return !1;
      this.dom || i.transferDOM(this);
    }
    return r && this.setDeco(i ? i.attrs : null), lS(this, e, n, i ? i.children : [], o, s), !0;
  }
  split(e) {
    let n = new ci();
    if (n.breakAfter = this.breakAfter, this.length == 0)
      return n;
    let { i, off: r } = this.childPos(e);
    r && (n.append(this.children[i].split(r), 0), this.children[i].merge(r, this.children[i].length, null, !1, 0, 0), i++);
    for (let o = i; o < this.children.length; o++)
      n.append(this.children[o], 0);
    for (; i > 0 && this.children[i - 1].length == 0; )
      this.children[--i].destroy();
    return this.children.length = i, this.markDirty(), this.length = e, n;
  }
  transferDOM(e) {
    this.dom && (this.markDirty(), e.setDOM(this.dom), e.prevAttrs = this.prevAttrs === void 0 ? this.attrs : this.prevAttrs, this.prevAttrs = void 0, this.dom = null);
  }
  setDeco(e) {
    Cg(this.attrs, e) || (this.dom && (this.prevAttrs = this.attrs, this.markDirty()), this.attrs = e);
  }
  append(e, n) {
    dS(this, e, n);
  }
  addLineDeco(e) {
    let n = e.spec.attributes, i = e.spec.class;
    n && (this.attrs = Up(n, this.attrs || {})), i && (this.attrs = Up({ class: i }, this.attrs || {}));
  }
  domAtPos(e) {
    return hS(this, e);
  }
  reuseDOM(e) {
    e.nodeName == "DIV" && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    var n;
    this.dom ? this.dirty & 4 && (rS(this.dom), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0) : (this.setDOM(document.createElement("div")), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0), this.prevAttrs !== void 0 && (qp(this.dom, this.prevAttrs, this.attrs), this.dom.classList.add("cm-line"), this.prevAttrs = void 0), super.sync(e);
    let i = this.dom.lastChild;
    for (; i && nn.get(i) instanceof Vr; )
      i = i.lastChild;
    if (!i || !this.length || i.nodeName != "BR" && ((n = nn.get(i)) === null || n === void 0 ? void 0 : n.isEditable) == !1 && (!Qe.ios || !this.children.some((r) => r instanceof Uo))) {
      let r = document.createElement("BR");
      r.cmIgnore = !0, this.dom.appendChild(r);
    }
  }
  measureTextSize() {
    if (this.children.length == 0 || this.length > 20)
      return null;
    let e = 0;
    for (let n of this.children) {
      if (!(n instanceof Uo) || /[^ -~]/.test(n.text))
        return null;
      let i = Ua(n.dom);
      if (i.length != 1)
        return null;
      e += i[0].width;
    }
    return e ? {
      lineHeight: this.dom.getBoundingClientRect().height,
      charWidth: e / this.length
    } : null;
  }
  coordsAt(e, n) {
    return pS(this, e, n);
  }
  become(e) {
    return !1;
  }
  get type() {
    return Yt.Text;
  }
  static find(e, n) {
    for (let i = 0, r = 0; i < e.children.length; i++) {
      let o = e.children[i], s = r + o.length;
      if (s >= n) {
        if (o instanceof ci)
          return o;
        if (s > n)
          break;
      }
      r = s + o.breakAfter;
    }
    return null;
  }
}
class _s extends nn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.type = i, this.breakAfter = 0, this.prevWidget = null;
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof _s) || !this.widget.compare(i.widget) || e > 0 && o <= 0 || n < this.length && s <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  domAtPos(e) {
    return e == 0 ? ei.before(this.dom) : ei.after(this.dom, e == this.length);
  }
  split(e) {
    let n = this.length - e;
    this.length = e;
    let i = new _s(this.widget, n, this.type);
    return i.breakAfter = this.breakAfter, i;
  }
  get children() {
    return kg;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  get overrideDOMText() {
    return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : jt.empty;
  }
  domBoundsAround() {
    return null;
  }
  become(e) {
    return e instanceof _s && e.type == this.type && e.widget.constructor == this.widget.constructor ? (e.widget.eq(this.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, this.length = e.length, this.breakAfter = e.breakAfter, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class Sg {
  constructor(e, n, i, r) {
    this.doc = e, this.pos = n, this.end = i, this.disallowBlockEffectsFor = r, this.content = [], this.curLine = null, this.breakAtStart = 0, this.pendingBuffer = 0, this.bufferMarks = [], this.atCursorPos = !0, this.openStart = -1, this.openEnd = -1, this.text = "", this.textOff = 0, this.cursor = e.iter(), this.skip = n;
  }
  posCovered() {
    if (this.content.length == 0)
      return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;
    let e = this.content[this.content.length - 1];
    return !e.breakAfter && !(e instanceof _s && e.type == Yt.WidgetBefore);
  }
  getLine() {
    return this.curLine || (this.content.push(this.curLine = new ci()), this.atCursorPos = !0), this.curLine;
  }
  flushBuffer(e = this.bufferMarks) {
    this.pendingBuffer && (this.curLine.append(Uf(new El(-1), e), e.length), this.pendingBuffer = 0);
  }
  addBlockWidget(e) {
    this.flushBuffer(), this.curLine = null, this.content.push(e);
  }
  finish(e) {
    this.pendingBuffer && e <= this.bufferMarks.length ? this.flushBuffer() : this.pendingBuffer = 0, this.posCovered() || this.getLine();
  }
  buildText(e, n, i) {
    for (; e > 0; ) {
      if (this.textOff == this.text.length) {
        let { value: o, lineBreak: s, done: l } = this.cursor.next(this.skip);
        if (this.skip = 0, l)
          throw new Error("Ran out of text content when drawing inline views");
        if (s) {
          this.posCovered() || this.getLine(), this.content.length ? this.content[this.content.length - 1].breakAfter = 1 : this.breakAtStart = 1, this.flushBuffer(), this.curLine = null, this.atCursorPos = !0, e--;
          continue;
        } else
          this.text = o, this.textOff = 0;
      }
      let r = Math.min(this.text.length - this.textOff, e, 512);
      this.flushBuffer(n.slice(n.length - i)), this.getLine().append(Uf(new Uo(this.text.slice(this.textOff, this.textOff + r)), n), i), this.atCursorPos = !0, this.textOff += r, e -= r, i = 0;
    }
  }
  span(e, n, i, r) {
    this.buildText(n - e, i, r), this.pos = n, this.openStart < 0 && (this.openStart = r);
  }
  point(e, n, i, r, o, s) {
    if (this.disallowBlockEffectsFor[s] && i instanceof Es) {
      if (i.block)
        throw new RangeError("Block decorations may not be specified via plugins");
      if (n > this.doc.lineAt(this.pos).to)
        throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
    }
    let l = n - e;
    if (i instanceof Es)
      if (i.block) {
        let { type: a } = i;
        a == Yt.WidgetAfter && !this.posCovered() && this.getLine(), this.addBlockWidget(new _s(i.widget || new V_("div"), l, a));
      } else {
        let a = Ao.create(i.widget || new V_("span"), l, l ? 0 : i.startSide), f = this.atCursorPos && !a.isEditable && o <= r.length && (e < n || i.startSide > 0), c = !a.isEditable && (e < n || o > r.length || i.startSide <= 0), u = this.getLine();
        this.pendingBuffer == 2 && !f && (this.pendingBuffer = 0), this.flushBuffer(r), f && (u.append(Uf(new El(1), r), o), o = r.length + Math.max(0, o - r.length)), u.append(Uf(a, r), o), this.atCursorPos = c, this.pendingBuffer = c ? e < n || o > r.length ? 1 : 2 : 0, this.pendingBuffer && (this.bufferMarks = r.slice());
      }
    else
      this.doc.lineAt(this.pos).from == this.pos && this.getLine().addLineDeco(i);
    l && (this.textOff + l <= this.text.length ? this.textOff += l : (this.skip += l - (this.text.length - this.textOff), this.text = "", this.textOff = 0), this.pos = n), this.openStart < 0 && (this.openStart = o);
  }
  static build(e, n, i, r, o) {
    let s = new Sg(e, n, i, o);
    return s.openEnd = Bt.spans(r, n, i, s), s.openStart < 0 && (s.openStart = s.openEnd), s.finish(s.openEnd), s;
  }
}
function Uf(t, e) {
  for (let n of e)
    t = new Vr(n, [t], t.length);
  return t;
}
class V_ extends Yo {
  constructor(e) {
    super(), this.tag = e;
  }
  eq(e) {
    return e.tag == this.tag;
  }
  toDOM() {
    return document.createElement(this.tag);
  }
  updateDOM(e) {
    return e.nodeName.toLowerCase() == this.tag;
  }
}
const gS = /* @__PURE__ */ Xe.define(), bS = /* @__PURE__ */ Xe.define(), _S = /* @__PURE__ */ Xe.define(), yS = /* @__PURE__ */ Xe.define(), Kp = /* @__PURE__ */ Xe.define(), wS = /* @__PURE__ */ Xe.define(), vS = /* @__PURE__ */ Xe.define({
  combine: (t) => t.some((e) => e)
}), kS = /* @__PURE__ */ Xe.define({
  combine: (t) => t.some((e) => e)
});
class hu {
  constructor(e, n = "nearest", i = "nearest", r = 5, o = 5) {
    this.range = e, this.y = n, this.x = i, this.yMargin = r, this.xMargin = o;
  }
  map(e) {
    return e.empty ? this : new hu(this.range.map(e), this.y, this.x, this.yMargin, this.xMargin);
  }
}
const F_ = /* @__PURE__ */ gt.define({ map: (t, e) => t.map(e) });
function Ti(t, e, n) {
  let i = t.facet(yS);
  i.length ? i[0](e) : window.onerror ? window.onerror(String(e), n, void 0, void 0, e) : n ? console.error(n + ":", e) : console.error(e);
}
const Oh = /* @__PURE__ */ Xe.define({ combine: (t) => t.length ? t[0] : !0 });
let uz = 0;
const aa = /* @__PURE__ */ Xe.define();
class Rn {
  constructor(e, n, i, r) {
    this.id = e, this.create = n, this.domEventHandlers = i, this.extension = r(this);
  }
  static define(e, n) {
    const { eventHandlers: i, provide: r, decorations: o } = n || {};
    return new Rn(uz++, e, i, (s) => {
      let l = [aa.of(s)];
      return o && l.push(Ja.of((a) => {
        let f = a.plugin(s);
        return f ? o(f) : rt.none;
      })), r && l.push(r(s)), l;
    });
  }
  static fromClass(e, n) {
    return Rn.define((i) => new e(i), n);
  }
}
class wd {
  constructor(e) {
    this.spec = e, this.mustUpdate = null, this.value = null;
  }
  update(e) {
    if (this.value) {
      if (this.mustUpdate) {
        let n = this.mustUpdate;
        if (this.mustUpdate = null, this.value.update)
          try {
            this.value.update(n);
          } catch (i) {
            if (Ti(n.state, i, "CodeMirror plugin crashed"), this.value.destroy)
              try {
                this.value.destroy();
              } catch {
              }
            this.deactivate();
          }
      }
    } else if (this.spec)
      try {
        this.value = this.spec.create(e);
      } catch (n) {
        Ti(e.state, n, "CodeMirror plugin crashed"), this.deactivate();
      }
    return this;
  }
  destroy(e) {
    var n;
    if (!((n = this.value) === null || n === void 0) && n.destroy)
      try {
        this.value.destroy();
      } catch (i) {
        Ti(e.state, i, "CodeMirror plugin crashed");
      }
  }
  deactivate() {
    this.spec = this.value = null;
  }
}
const CS = /* @__PURE__ */ Xe.define(), Mg = /* @__PURE__ */ Xe.define(), Ja = /* @__PURE__ */ Xe.define(), SS = /* @__PURE__ */ Xe.define(), MS = /* @__PURE__ */ Xe.define(), fa = /* @__PURE__ */ Xe.define();
class Ir {
  constructor(e, n, i, r) {
    this.fromA = e, this.toA = n, this.fromB = i, this.toB = r;
  }
  join(e) {
    return new Ir(Math.min(this.fromA, e.fromA), Math.max(this.toA, e.toA), Math.min(this.fromB, e.fromB), Math.max(this.toB, e.toB));
  }
  addToSet(e) {
    let n = e.length, i = this;
    for (; n > 0; n--) {
      let r = e[n - 1];
      if (!(r.fromA > i.toA)) {
        if (r.toA < i.fromA)
          break;
        i = i.join(r), e.splice(n - 1, 1);
      }
    }
    return e.splice(n, 0, i), e;
  }
  static extendWithRanges(e, n) {
    if (n.length == 0)
      return e;
    let i = [];
    for (let r = 0, o = 0, s = 0, l = 0; ; r++) {
      let a = r == e.length ? null : e[r], f = s - l, c = a ? a.fromB : 1e9;
      for (; o < n.length && n[o] < c; ) {
        let u = n[o], h = n[o + 1], d = Math.max(l, u), p = Math.min(c, h);
        if (d <= p && new Ir(d + f, p + f, d, p).addToSet(i), h > c)
          break;
        o += 2;
      }
      if (!a)
        return i;
      new Ir(a.fromA, a.toA, a.fromB, a.toB).addToSet(i), s = a.toA, l = a.toB;
    }
  }
}
class du {
  constructor(e, n, i) {
    this.view = e, this.state = n, this.transactions = i, this.flags = 0, this.startState = e.state, this.changes = jn.empty(this.startState.doc.length);
    for (let s of i)
      this.changes = this.changes.compose(s.changes);
    let r = [];
    this.changes.iterChangedRanges((s, l, a, f) => r.push(new Ir(s, l, a, f))), this.changedRanges = r;
    let o = e.hasFocus;
    o != e.inputState.notifiedFocused && (e.inputState.notifiedFocused = o, this.flags |= 1);
  }
  static create(e, n, i) {
    return new du(e, n, i);
  }
  get viewportChanged() {
    return (this.flags & 4) > 0;
  }
  get heightChanged() {
    return (this.flags & 2) > 0;
  }
  get geometryChanged() {
    return this.docChanged || (this.flags & 10) > 0;
  }
  get focusChanged() {
    return (this.flags & 1) > 0;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get selectionSet() {
    return this.transactions.some((e) => e.selection);
  }
  get empty() {
    return this.flags == 0 && this.transactions.length == 0;
  }
}
var pn = /* @__PURE__ */ function(t) {
  return t[t.LTR = 0] = "LTR", t[t.RTL = 1] = "RTL", t;
}(pn || (pn = {}));
const Gp = pn.LTR, hz = pn.RTL;
function AS(t) {
  let e = [];
  for (let n = 0; n < t.length; n++)
    e.push(1 << +t[n]);
  return e;
}
const dz = /* @__PURE__ */ AS("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"), pz = /* @__PURE__ */ AS("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"), Xp = /* @__PURE__ */ Object.create(null), br = [];
for (let t of ["()", "[]", "{}"]) {
  let e = /* @__PURE__ */ t.charCodeAt(0), n = /* @__PURE__ */ t.charCodeAt(1);
  Xp[e] = n, Xp[n] = -e;
}
function mz(t) {
  return t <= 247 ? dz[t] : 1424 <= t && t <= 1524 ? 2 : 1536 <= t && t <= 1785 ? pz[t - 1536] : 1774 <= t && t <= 2220 ? 4 : 8192 <= t && t <= 8203 ? 256 : 64336 <= t && t <= 65023 ? 4 : t == 8204 ? 256 : 1;
}
const gz = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;
class cl {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.level = i;
  }
  get dir() {
    return this.level % 2 ? hz : Gp;
  }
  side(e, n) {
    return this.dir == n == e ? this.to : this.from;
  }
  static find(e, n, i, r) {
    let o = -1;
    for (let s = 0; s < e.length; s++) {
      let l = e[s];
      if (l.from <= n && l.to >= n) {
        if (l.level == i)
          return s;
        (o < 0 || (r != 0 ? r < 0 ? l.from < n : l.to > n : e[o].level > l.level)) && (o = s);
      }
    }
    if (o < 0)
      throw new RangeError("Index out of range");
    return o;
  }
}
const hn = [];
function bz(t, e) {
  let n = t.length, i = e == Gp ? 1 : 2, r = e == Gp ? 2 : 1;
  if (!t || i == 1 && !gz.test(t))
    return OS(n);
  for (let s = 0, l = i, a = i; s < n; s++) {
    let f = mz(t.charCodeAt(s));
    f == 512 ? f = l : f == 8 && a == 4 && (f = 16), hn[s] = f == 4 ? 2 : f, f & 7 && (a = f), l = f;
  }
  for (let s = 0, l = i, a = i; s < n; s++) {
    let f = hn[s];
    if (f == 128)
      s < n - 1 && l == hn[s + 1] && l & 24 ? f = hn[s] = l : hn[s] = 256;
    else if (f == 64) {
      let c = s + 1;
      for (; c < n && hn[c] == 64; )
        c++;
      let u = s && l == 8 || c < n && hn[c] == 8 ? a == 1 ? 1 : 8 : 256;
      for (let h = s; h < c; h++)
        hn[h] = u;
      s = c - 1;
    } else
      f == 8 && a == 1 && (hn[s] = 1);
    l = f, f & 7 && (a = f);
  }
  for (let s = 0, l = 0, a = 0, f, c, u; s < n; s++)
    if (c = Xp[f = t.charCodeAt(s)])
      if (c < 0) {
        for (let h = l - 3; h >= 0; h -= 3)
          if (br[h + 1] == -c) {
            let d = br[h + 2], p = d & 2 ? i : d & 4 ? d & 1 ? r : i : 0;
            p && (hn[s] = hn[br[h]] = p), l = h;
            break;
          }
      } else {
        if (br.length == 189)
          break;
        br[l++] = s, br[l++] = f, br[l++] = a;
      }
    else if ((u = hn[s]) == 2 || u == 1) {
      let h = u == i;
      a = h ? 0 : 1;
      for (let d = l - 3; d >= 0; d -= 3) {
        let p = br[d + 2];
        if (p & 2)
          break;
        if (h)
          br[d + 2] |= 2;
        else {
          if (p & 4)
            break;
          br[d + 2] |= 4;
        }
      }
    }
  for (let s = 0; s < n; s++)
    if (hn[s] == 256) {
      let l = s + 1;
      for (; l < n && hn[l] == 256; )
        l++;
      let a = (s ? hn[s - 1] : i) == 1, f = (l < n ? hn[l] : i) == 1, c = a == f ? a ? 1 : 2 : i;
      for (let u = s; u < l; u++)
        hn[u] = c;
      s = l - 1;
    }
  let o = [];
  if (i == 1)
    for (let s = 0; s < n; ) {
      let l = s, a = hn[s++] != 1;
      for (; s < n && a == (hn[s] != 1); )
        s++;
      if (a)
        for (let f = s; f > l; ) {
          let c = f, u = hn[--f] != 2;
          for (; f > l && u == (hn[f - 1] != 2); )
            f--;
          o.push(new cl(f, c, u ? 2 : 1));
        }
      else
        o.push(new cl(l, s, 0));
    }
  else
    for (let s = 0; s < n; ) {
      let l = s, a = hn[s++] == 2;
      for (; s < n && a == (hn[s] == 2); )
        s++;
      o.push(new cl(l, s, a ? 1 : 2));
    }
  return o;
}
function OS(t) {
  return [new cl(0, t, 0)];
}
let TS = "";
function _z(t, e, n, i, r) {
  var o;
  let s = i.head - t.from, l = -1;
  if (s == 0) {
    if (!r || !t.length)
      return null;
    e[0].level != n && (s = e[0].side(!1, n), l = 0);
  } else if (s == t.length) {
    if (r)
      return null;
    let h = e[e.length - 1];
    h.level != n && (s = h.side(!0, n), l = e.length - 1);
  }
  l < 0 && (l = cl.find(e, s, (o = i.bidiLevel) !== null && o !== void 0 ? o : -1, i.assoc));
  let a = e[l];
  s == a.side(r, n) && (a = e[l += r ? 1 : -1], s = a.side(!r, n));
  let f = r == (a.dir == n), c = fi(t.text, s, f);
  if (TS = t.text.slice(Math.min(s, c), Math.max(s, c)), c != a.side(r, n))
    return we.cursor(c + t.from, f ? -1 : 1, a.level);
  let u = l == (r ? e.length - 1 : 0) ? null : e[l + (r ? 1 : -1)];
  return !u && a.level != n ? we.cursor(r ? t.to : t.from, r ? -1 : 1, n) : u && u.level < a.level ? we.cursor(u.side(!r, n) + t.from, r ? 1 : -1, u.level) : we.cursor(c + t.from, r ? -1 : 1, a.level);
}
const Oo = "￿";
class ES {
  constructor(e, n) {
    this.points = e, this.text = "", this.lineSeparator = n.facet(St.lineSeparator);
  }
  append(e) {
    this.text += e;
  }
  lineBreak() {
    this.text += Oo;
  }
  readRange(e, n) {
    if (!e)
      return this;
    let i = e.parentNode;
    for (let r = e; ; ) {
      this.findPointBefore(i, r), this.readNode(r);
      let o = r.nextSibling;
      if (o == n)
        break;
      let s = nn.get(r), l = nn.get(o);
      (s && l ? s.breakAfter : (s ? s.breakAfter : H_(r)) || H_(o) && (r.nodeName != "BR" || r.cmIgnore)) && this.lineBreak(), r = o;
    }
    return this.findPointBefore(i, n), this;
  }
  readTextNode(e) {
    let n = e.nodeValue;
    for (let i of this.points)
      i.node == e && (i.pos = this.text.length + Math.min(i.offset, n.length));
    for (let i = 0, r = this.lineSeparator ? null : /\r\n?|\n/g; ; ) {
      let o = -1, s = 1, l;
      if (this.lineSeparator ? (o = n.indexOf(this.lineSeparator, i), s = this.lineSeparator.length) : (l = r.exec(n)) && (o = l.index, s = l[0].length), this.append(n.slice(i, o < 0 ? n.length : o)), o < 0)
        break;
      if (this.lineBreak(), s > 1)
        for (let a of this.points)
          a.node == e && a.pos > this.text.length && (a.pos -= s - 1);
      i = o + s;
    }
  }
  readNode(e) {
    if (e.cmIgnore)
      return;
    let n = nn.get(e), i = n && n.overrideDOMText;
    if (i != null) {
      this.findPointInside(e, i.length);
      for (let r = i.iter(); !r.next().done; )
        r.lineBreak ? this.lineBreak() : this.append(r.value);
    } else
      e.nodeType == 3 ? this.readTextNode(e) : e.nodeName == "BR" ? e.nextSibling && this.lineBreak() : e.nodeType == 1 && this.readRange(e.firstChild, null);
  }
  findPointBefore(e, n) {
    for (let i of this.points)
      i.node == e && e.childNodes[i.offset] == n && (i.pos = this.text.length);
  }
  findPointInside(e, n) {
    for (let i of this.points)
      (e.nodeType == 3 ? i.node == e : e.contains(i.node)) && (i.pos = this.text.length + Math.min(n, i.offset));
  }
}
function H_(t) {
  return t.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName);
}
class W_ {
  constructor(e, n) {
    this.node = e, this.offset = n, this.pos = -1;
  }
}
class U_ extends nn {
  constructor(e) {
    super(), this.view = e, this.compositionDeco = rt.none, this.decorations = [], this.dynamicDecorationMap = [], this.minWidth = 0, this.minWidthFrom = 0, this.minWidthTo = 0, this.impreciseAnchor = null, this.impreciseHead = null, this.forceSelection = !1, this.lastUpdate = Date.now(), this.setDOM(e.contentDOM), this.children = [new ci()], this.children[0].setParent(this), this.updateDeco(), this.updateInner([new Ir(0, 0, 0, e.state.doc.length)], 0);
  }
  get editorView() {
    return this.view;
  }
  get length() {
    return this.view.state.doc.length;
  }
  update(e) {
    let n = e.changedRanges;
    this.minWidth > 0 && n.length && (n.every(({ fromA: s, toA: l }) => l < this.minWidthFrom || s > this.minWidthTo) ? (this.minWidthFrom = e.changes.mapPos(this.minWidthFrom, 1), this.minWidthTo = e.changes.mapPos(this.minWidthTo, 1)) : this.minWidth = this.minWidthFrom = this.minWidthTo = 0), this.view.inputState.composing < 0 ? this.compositionDeco = rt.none : (e.transactions.length || this.dirty) && (this.compositionDeco = wz(this.view, e.changes)), (Qe.ie || Qe.chrome) && !this.compositionDeco.size && e && e.state.doc.lines != e.startState.doc.lines && (this.forceSelection = !0);
    let i = this.decorations, r = this.updateDeco(), o = Sz(i, r, e.changes);
    return n = Ir.extendWithRanges(n, o), this.dirty == 0 && n.length == 0 ? !1 : (this.updateInner(n, e.startState.doc.length), e.transactions.length && (this.lastUpdate = Date.now()), !0);
  }
  updateInner(e, n) {
    this.view.viewState.mustMeasureContent = !0, this.updateChildren(e, n);
    let { observer: i } = this.view;
    i.ignore(() => {
      this.dom.style.height = this.view.viewState.contentHeight + "px", this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
      let o = Qe.chrome || Qe.ios ? { node: i.selectionRange.focusNode, written: !1 } : void 0;
      this.sync(o), this.dirty = 0, o && (o.written || i.selectionRange.focusNode != o.node) && (this.forceSelection = !0), this.dom.style.height = "";
    });
    let r = [];
    if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length)
      for (let o of this.children)
        o instanceof _s && o.widget instanceof q_ && r.push(o.dom);
    i.updateGaps(r);
  }
  updateChildren(e, n) {
    let i = this.childCursor(n);
    for (let r = e.length - 1; ; r--) {
      let o = r >= 0 ? e[r] : null;
      if (!o)
        break;
      let { fromA: s, toA: l, fromB: a, toB: f } = o, { content: c, breakAtStart: u, openStart: h, openEnd: d } = Sg.build(this.view.state.doc, a, f, this.decorations, this.dynamicDecorationMap), { i: p, off: g } = i.findPos(l, 1), { i: _, off: b } = i.findPos(s, -1);
      sS(this, _, b, p, g, c, u, h, d);
    }
  }
  updateSelection(e = !1, n = !1) {
    if ((e || !this.view.observer.selectionRange.focusNode) && this.view.observer.readSelectionRange(), !(n || this.mayControlSelection()))
      return;
    let i = this.forceSelection;
    this.forceSelection = !1;
    let r = this.view.state.selection.main, o = this.domAtPos(r.anchor), s = r.empty ? o : this.domAtPos(r.head);
    if (Qe.gecko && r.empty && yz(o)) {
      let a = document.createTextNode("");
      this.view.observer.ignore(() => o.node.insertBefore(a, o.node.childNodes[o.offset] || null)), o = s = new ei(a, 0), i = !0;
    }
    let l = this.view.observer.selectionRange;
    (i || !l.focusNode || !cu(o.node, o.offset, l.anchorNode, l.anchorOffset) || !cu(s.node, s.offset, l.focusNode, l.focusOffset)) && (this.view.observer.ignore(() => {
      Qe.android && Qe.chrome && this.dom.contains(l.focusNode) && Mz(l.focusNode, this.dom) && (this.dom.blur(), this.dom.focus({ preventScroll: !0 }));
      let a = fu(this.view.root);
      if (a)
        if (r.empty) {
          if (Qe.gecko) {
            let f = kz(o.node, o.offset);
            if (f && f != 3) {
              let c = RS(o.node, o.offset, f == 1 ? 1 : -1);
              c && (o = new ei(c, f == 1 ? 0 : c.nodeValue.length));
            }
          }
          a.collapse(o.node, o.offset), r.bidiLevel != null && l.cursorBidiLevel != null && (l.cursorBidiLevel = r.bidiLevel);
        } else if (a.extend) {
          a.collapse(o.node, o.offset);
          try {
            a.extend(s.node, s.offset);
          } catch {
          }
        } else {
          let f = document.createRange();
          r.anchor > r.head && ([o, s] = [s, o]), f.setEnd(s.node, s.offset), f.setStart(o.node, o.offset), a.removeAllRanges(), a.addRange(f);
        }
    }), this.view.observer.setSelectionRange(o, s)), this.impreciseAnchor = o.precise ? null : new ei(l.anchorNode, l.anchorOffset), this.impreciseHead = s.precise ? null : new ei(l.focusNode, l.focusOffset);
  }
  enforceCursorAssoc() {
    if (this.compositionDeco.size)
      return;
    let { view: e } = this, n = e.state.selection.main, i = fu(e.root), { anchorNode: r, anchorOffset: o } = e.observer.selectionRange;
    if (!i || !n.empty || !n.assoc || !i.modify)
      return;
    let s = ci.find(this, n.head);
    if (!s)
      return;
    let l = s.posAtStart;
    if (n.head == l || n.head == l + s.length)
      return;
    let a = this.coordsAt(n.head, -1), f = this.coordsAt(n.head, 1);
    if (!a || !f || a.bottom > f.top)
      return;
    let c = this.domAtPos(n.head + n.assoc);
    i.collapse(c.node, c.offset), i.modify("move", n.assoc < 0 ? "forward" : "backward", "lineboundary"), e.observer.readSelectionRange();
    let u = e.observer.selectionRange;
    e.docView.posFromDOM(u.anchorNode, u.anchorOffset) != n.from && i.collapse(r, o);
  }
  mayControlSelection() {
    let e = this.view.root.activeElement;
    return e == this.dom || Cc(this.dom, this.view.observer.selectionRange) && !(e && this.dom.contains(e));
  }
  nearest(e) {
    for (let n = e; n; ) {
      let i = nn.get(n);
      if (i && i.rootView == this)
        return i;
      n = n.parentNode;
    }
    return null;
  }
  posFromDOM(e, n) {
    let i = this.nearest(e);
    if (!i)
      throw new RangeError("Trying to find position for a DOM position outside of the document");
    return i.localPosFromDOM(e, n) + i.posAtStart;
  }
  domAtPos(e) {
    let { i: n, off: i } = this.childCursor().findPos(e, -1);
    for (; n < this.children.length - 1; ) {
      let r = this.children[n];
      if (i < r.length || r instanceof ci)
        break;
      n++, i = 0;
    }
    return this.children[n].domAtPos(i);
  }
  coordsAt(e, n) {
    for (let i = this.length, r = this.children.length - 1; ; r--) {
      let o = this.children[r], s = i - o.breakAfter - o.length;
      if (e > s || e == s && o.type != Yt.WidgetBefore && o.type != Yt.WidgetAfter && (!r || n == 2 || this.children[r - 1].breakAfter || this.children[r - 1].type == Yt.WidgetBefore && n > -2))
        return o.coordsAt(e - s, n);
      i = s;
    }
  }
  measureVisibleLineHeights(e) {
    let n = [], { from: i, to: r } = e, o = this.view.contentDOM.clientWidth, s = o > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1, l = -1, a = this.view.textDirection == pn.LTR;
    for (let f = 0, c = 0; c < this.children.length; c++) {
      let u = this.children[c], h = f + u.length;
      if (h > r)
        break;
      if (f >= i) {
        let d = u.dom.getBoundingClientRect();
        if (n.push(d.height), s) {
          let p = u.dom.lastChild, g = p ? Ua(p) : [];
          if (g.length) {
            let _ = g[g.length - 1], b = a ? _.right - d.left : d.right - _.left;
            b > l && (l = b, this.minWidth = o, this.minWidthFrom = f, this.minWidthTo = h);
          }
        }
      }
      f = h + u.breakAfter;
    }
    return n;
  }
  textDirectionAt(e) {
    let { i: n } = this.childPos(e, 1);
    return getComputedStyle(this.children[n].dom).direction == "rtl" ? pn.RTL : pn.LTR;
  }
  measureTextSize() {
    for (let r of this.children)
      if (r instanceof ci) {
        let o = r.measureTextSize();
        if (o)
          return o;
      }
    let e = document.createElement("div"), n, i;
    return e.className = "cm-line", e.style.width = "99999px", e.textContent = "abc def ghi jkl mno pqr stu", this.view.observer.ignore(() => {
      this.dom.appendChild(e);
      let r = Ua(e.firstChild)[0];
      n = e.getBoundingClientRect().height, i = r ? r.width / 27 : 7, e.remove();
    }), { lineHeight: n, charWidth: i };
  }
  childCursor(e = this.length) {
    let n = this.children.length;
    return n && (e -= this.children[--n].length), new oS(this.children, e, n);
  }
  computeBlockGapDeco() {
    let e = [], n = this.view.viewState;
    for (let i = 0, r = 0; ; r++) {
      let o = r == n.viewports.length ? null : n.viewports[r], s = o ? o.from - 1 : this.length;
      if (s > i) {
        let l = n.lineBlockAt(s).bottom - n.lineBlockAt(i).top;
        e.push(rt.replace({
          widget: new q_(l),
          block: !0,
          inclusive: !0,
          isBlockGap: !0
        }).range(i, s));
      }
      if (!o)
        break;
      i = o.to + 1;
    }
    return rt.set(e);
  }
  updateDeco() {
    let e = this.view.state.facet(Ja).map((n, i) => (this.dynamicDecorationMap[i] = typeof n == "function") ? n(this.view) : n);
    for (let n = e.length; n < e.length + 3; n++)
      this.dynamicDecorationMap[n] = !1;
    return this.decorations = [
      ...e,
      this.compositionDeco,
      this.computeBlockGapDeco(),
      this.view.viewState.lineGapDeco
    ];
  }
  scrollIntoView(e) {
    let { range: n } = e, i = this.coordsAt(n.head, n.empty ? n.assoc : n.head > n.anchor ? -1 : 1), r;
    if (!i)
      return;
    !n.empty && (r = this.coordsAt(n.anchor, n.anchor > n.head ? -1 : 1)) && (i = {
      left: Math.min(i.left, r.left),
      top: Math.min(i.top, r.top),
      right: Math.max(i.right, r.right),
      bottom: Math.max(i.bottom, r.bottom)
    });
    let o = 0, s = 0, l = 0, a = 0;
    for (let c of this.view.state.facet(MS).map((u) => u(this.view)))
      if (c) {
        let { left: u, right: h, top: d, bottom: p } = c;
        u != null && (o = Math.max(o, u)), h != null && (s = Math.max(s, h)), d != null && (l = Math.max(l, d)), p != null && (a = Math.max(a, p));
      }
    let f = {
      left: i.left - o,
      top: i.top - l,
      right: i.right + s,
      bottom: i.bottom + a
    };
    nz(this.view.scrollDOM, f, n.head < n.anchor ? -1 : 1, e.x, e.y, e.xMargin, e.yMargin, this.view.textDirection == pn.LTR);
  }
}
function yz(t) {
  return t.node.nodeType == 1 && t.node.firstChild && (t.offset == 0 || t.node.childNodes[t.offset - 1].contentEditable == "false") && (t.offset == t.node.childNodes.length || t.node.childNodes[t.offset].contentEditable == "false");
}
class q_ extends Yo {
  constructor(e) {
    super(), this.height = e;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.updateDOM(e), e;
  }
  eq(e) {
    return e.height == this.height;
  }
  updateDOM(e) {
    return e.style.height = this.height + "px", !0;
  }
  get estimatedHeight() {
    return this.height;
  }
}
function PS(t) {
  let e = t.observer.selectionRange, n = e.focusNode && RS(e.focusNode, e.focusOffset, 0);
  if (!n)
    return null;
  let i = t.docView.nearest(n);
  if (!i)
    return null;
  if (i instanceof ci) {
    let r = n;
    for (; r.parentNode != i.dom; )
      r = r.parentNode;
    let o = r.previousSibling;
    for (; o && !nn.get(o); )
      o = o.previousSibling;
    let s = o ? nn.get(o).posAtEnd : i.posAtStart;
    return { from: s, to: s, node: r, text: n };
  } else {
    for (; ; ) {
      let { parent: o } = i;
      if (!o)
        return null;
      if (o instanceof ci)
        break;
      i = o;
    }
    let r = i.posAtStart;
    return { from: r, to: r + i.length, node: i.dom, text: n };
  }
}
function wz(t, e) {
  let n = PS(t);
  if (!n)
    return rt.none;
  let { from: i, to: r, node: o, text: s } = n, l = e.mapPos(i, 1), a = Math.max(l, e.mapPos(r, -1)), { state: f } = t, c = o.nodeType == 3 ? o.nodeValue : new ES([], f).readRange(o.firstChild, null).text;
  if (a - l < c.length)
    if (f.doc.sliceString(l, Math.min(f.doc.length, l + c.length), Oo) == c)
      a = l + c.length;
    else if (f.doc.sliceString(Math.max(0, a - c.length), a, Oo) == c)
      l = a - c.length;
    else
      return rt.none;
  else if (f.doc.sliceString(l, a, Oo) != c)
    return rt.none;
  let u = nn.get(o);
  return u instanceof cS ? u = u.widget.topView : u && (u.parent = null), rt.set(rt.replace({ widget: new vz(o, s, u), inclusive: !0 }).range(l, a));
}
class vz extends Yo {
  constructor(e, n, i) {
    super(), this.top = e, this.text = n, this.topView = i;
  }
  eq(e) {
    return this.top == e.top && this.text == e.text;
  }
  toDOM() {
    return this.top;
  }
  ignoreEvent() {
    return !1;
  }
  get customView() {
    return cS;
  }
}
function RS(t, e, n) {
  for (; ; ) {
    if (t.nodeType == 3)
      return t;
    if (t.nodeType == 1 && e > 0 && n <= 0)
      t = t.childNodes[e - 1], e = qa(t);
    else if (t.nodeType == 1 && e < t.childNodes.length && n >= 0)
      t = t.childNodes[e], e = 0;
    else
      return null;
  }
}
function kz(t, e) {
  return t.nodeType != 1 ? 0 : (e && t.childNodes[e - 1].contentEditable == "false" ? 1 : 0) | (e < t.childNodes.length && t.childNodes[e].contentEditable == "false" ? 2 : 0);
}
class Cz {
  constructor() {
    this.changes = [];
  }
  compareRange(e, n) {
    Jp(e, n, this.changes);
  }
  comparePoint(e, n) {
    Jp(e, n, this.changes);
  }
}
function Sz(t, e, n) {
  let i = new Cz();
  return Bt.compare(t, e, n, i), i.changes;
}
function Mz(t, e) {
  for (let n = t; n && n != e; n = n.assignedSlot || n.parentNode)
    if (n.nodeType == 1 && n.contentEditable == "false")
      return !0;
  return !1;
}
function Az(t, e, n = 1) {
  let i = t.charCategorizer(e), r = t.doc.lineAt(e), o = e - r.from;
  if (r.length == 0)
    return we.cursor(e);
  o == 0 ? n = 1 : o == r.length && (n = -1);
  let s = o, l = o;
  n < 0 ? s = fi(r.text, o, !1) : l = fi(r.text, o);
  let a = i(r.text.slice(s, l));
  for (; s > 0; ) {
    let f = fi(r.text, s, !1);
    if (i(r.text.slice(f, s)) != a)
      break;
    s = f;
  }
  for (; l < r.length; ) {
    let f = fi(r.text, l);
    if (i(r.text.slice(l, f)) != a)
      break;
    l = f;
  }
  return we.range(s + r.from, l + r.from);
}
function Oz(t, e) {
  return e.left > t ? e.left - t : Math.max(0, t - e.right);
}
function Tz(t, e) {
  return e.top > t ? e.top - t : Math.max(0, t - e.bottom);
}
function vd(t, e) {
  return t.top < e.bottom - 1 && t.bottom > e.top + 1;
}
function J_(t, e) {
  return e < t.top ? { top: e, left: t.left, right: t.right, bottom: t.bottom } : t;
}
function K_(t, e) {
  return e > t.bottom ? { top: t.top, left: t.left, right: t.right, bottom: e } : t;
}
function Qp(t, e, n) {
  let i, r, o, s, l = !1, a, f, c, u;
  for (let p = t.firstChild; p; p = p.nextSibling) {
    let g = Ua(p);
    for (let _ = 0; _ < g.length; _++) {
      let b = g[_];
      r && vd(r, b) && (b = J_(K_(b, r.bottom), r.top));
      let y = Oz(e, b), v = Tz(n, b);
      if (y == 0 && v == 0)
        return p.nodeType == 3 ? G_(p, e, n) : Qp(p, e, n);
      (!i || s > v || s == v && o > y) && (i = p, r = b, o = y, s = v, l = !y || (y > 0 ? _ < g.length - 1 : _ > 0)), y == 0 ? n > b.bottom && (!c || c.bottom < b.bottom) ? (a = p, c = b) : n < b.top && (!u || u.top > b.top) && (f = p, u = b) : c && vd(c, b) ? c = K_(c, b.bottom) : u && vd(u, b) && (u = J_(u, b.top));
    }
  }
  if (c && c.bottom >= n ? (i = a, r = c) : u && u.top <= n && (i = f, r = u), !i)
    return { node: t, offset: 0 };
  let h = Math.max(r.left, Math.min(r.right, e));
  if (i.nodeType == 3)
    return G_(i, h, n);
  if (l && i.contentEditable != "false")
    return Qp(i, h, n);
  let d = Array.prototype.indexOf.call(t.childNodes, i) + (e >= (r.left + r.right) / 2 ? 1 : 0);
  return { node: t, offset: d };
}
function G_(t, e, n) {
  let i = t.nodeValue.length, r = -1, o = 1e9, s = 0;
  for (let l = 0; l < i; l++) {
    let a = Tl(t, l, l + 1).getClientRects();
    for (let f = 0; f < a.length; f++) {
      let c = a[f];
      if (c.top == c.bottom)
        continue;
      s || (s = e - c.left);
      let u = (c.top > n ? c.top - n : n - c.bottom) - 1;
      if (c.left - 1 <= e && c.right + 1 >= e && u < o) {
        let h = e >= (c.left + c.right) / 2, d = h;
        if ((Qe.chrome || Qe.gecko) && Tl(t, l).getBoundingClientRect().left == c.right && (d = !h), u <= 0)
          return { node: t, offset: l + (d ? 1 : 0) };
        r = l + (d ? 1 : 0), o = u;
      }
    }
  }
  return { node: t, offset: r > -1 ? r : s > 0 ? t.nodeValue.length : 0 };
}
function IS(t, { x: e, y: n }, i, r = -1) {
  var o;
  let s = t.contentDOM.getBoundingClientRect(), l = s.top + t.viewState.paddingTop, a, { docHeight: f } = t.viewState, c = n - l;
  if (c < 0)
    return 0;
  if (c > f)
    return t.state.doc.length;
  for (let b = t.defaultLineHeight / 2, y = !1; a = t.elementAtHeight(c), a.type != Yt.Text; )
    for (; c = r > 0 ? a.bottom + b : a.top - b, !(c >= 0 && c <= f); ) {
      if (y)
        return i ? null : 0;
      y = !0, r = -r;
    }
  n = l + c;
  let u = a.from;
  if (u < t.viewport.from)
    return t.viewport.from == 0 ? 0 : i ? null : X_(t, s, a, e, n);
  if (u > t.viewport.to)
    return t.viewport.to == t.state.doc.length ? t.state.doc.length : i ? null : X_(t, s, a, e, n);
  let h = t.dom.ownerDocument, d = t.root.elementFromPoint ? t.root : h, p = d.elementFromPoint(e, n);
  p && !t.contentDOM.contains(p) && (p = null), p || (e = Math.max(s.left + 1, Math.min(s.right - 1, e)), p = d.elementFromPoint(e, n), p && !t.contentDOM.contains(p) && (p = null));
  let g, _ = -1;
  if (p && ((o = t.docView.nearest(p)) === null || o === void 0 ? void 0 : o.isEditable) != !1) {
    if (h.caretPositionFromPoint) {
      let b = h.caretPositionFromPoint(e, n);
      b && ({ offsetNode: g, offset: _ } = b);
    } else if (h.caretRangeFromPoint) {
      let b = h.caretRangeFromPoint(e, n);
      b && ({ startContainer: g, startOffset: _ } = b, (!t.contentDOM.contains(g) || Qe.safari && Ez(g, _, e) || Qe.chrome && Pz(g, _, e)) && (g = void 0));
    }
  }
  if (!g || !t.docView.dom.contains(g)) {
    let b = ci.find(t.docView, u);
    if (!b)
      return c > a.top + a.height / 2 ? a.to : a.from;
    ({ node: g, offset: _ } = Qp(b.dom, e, n));
  }
  return t.docView.posFromDOM(g, _);
}
function X_(t, e, n, i, r) {
  let o = Math.round((i - e.left) * t.defaultCharacterWidth);
  if (t.lineWrapping && n.height > t.defaultLineHeight * 1.5) {
    let l = Math.floor((r - n.top) / t.defaultLineHeight);
    o += l * t.viewState.heightOracle.lineLength;
  }
  let s = t.state.sliceDoc(n.from, n.to);
  return n.from + Bp(s, o, t.state.tabSize);
}
function Ez(t, e, n) {
  let i;
  if (t.nodeType != 3 || e != (i = t.nodeValue.length))
    return !1;
  for (let r = t.nextSibling; r; r = r.nextSibling)
    if (r.nodeType != 1 || r.nodeName != "BR")
      return !1;
  return Tl(t, i - 1, i).getBoundingClientRect().left > n;
}
function Pz(t, e, n) {
  if (e != 0)
    return !1;
  for (let r = t; ; ) {
    let o = r.parentNode;
    if (!o || o.nodeType != 1 || o.firstChild != r)
      return !1;
    if (o.classList.contains("cm-line"))
      break;
    r = o;
  }
  let i = t.nodeType == 1 ? t.getBoundingClientRect() : Tl(t, 0, Math.max(t.nodeValue.length, 1)).getBoundingClientRect();
  return n - i.left > 5;
}
function Rz(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), o = !i || !t.lineWrapping ? null : t.coordsAtPos(e.assoc < 0 && e.head > r.from ? e.head - 1 : e.head);
  if (o) {
    let a = t.dom.getBoundingClientRect(), f = t.textDirectionAt(r.from), c = t.posAtCoords({
      x: n == (f == pn.LTR) ? a.right - 1 : a.left + 1,
      y: (o.top + o.bottom) / 2
    });
    if (c != null)
      return we.cursor(c, n ? -1 : 1);
  }
  let s = ci.find(t.docView, e.head), l = s ? n ? s.posAtEnd : s.posAtStart : n ? r.to : r.from;
  return we.cursor(l, n ? -1 : 1);
}
function Q_(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), o = t.bidiSpans(r), s = t.textDirectionAt(r.from);
  for (let l = e, a = null; ; ) {
    let f = _z(r, o, s, l, n), c = TS;
    if (!f) {
      if (r.number == (n ? t.state.doc.lines : 1))
        return l;
      c = `
`, r = t.state.doc.line(r.number + (n ? 1 : -1)), o = t.bidiSpans(r), f = we.cursor(n ? r.from : r.to);
    }
    if (a) {
      if (!a(c))
        return l;
    } else {
      if (!i)
        return f;
      a = i(c);
    }
    l = f;
  }
}
function Iz(t, e, n) {
  let i = t.state.charCategorizer(e), r = i(n);
  return (o) => {
    let s = i(o);
    return r == cn.Space && (r = s), r == s;
  };
}
function Nz(t, e, n, i) {
  let r = e.head, o = n ? 1 : -1;
  if (r == (n ? t.state.doc.length : 0))
    return we.cursor(r, e.assoc);
  let s = e.goalColumn, l, a = t.contentDOM.getBoundingClientRect(), f = t.coordsAtPos(r), c = t.documentTop;
  if (f)
    s == null && (s = f.left - a.left), l = o < 0 ? f.top : f.bottom;
  else {
    let d = t.viewState.lineBlockAt(r);
    s == null && (s = Math.min(a.right - a.left, t.defaultCharacterWidth * (r - d.from))), l = (o < 0 ? d.top : d.bottom) + c;
  }
  let u = a.left + s, h = i ?? t.defaultLineHeight >> 1;
  for (let d = 0; ; d += 10) {
    let p = l + (h + d) * o, g = IS(t, { x: u, y: p }, !1, o);
    if (p < a.top || p > a.bottom || (o < 0 ? g < r : g > r))
      return we.cursor(g, e.assoc, void 0, s);
  }
}
function kd(t, e, n) {
  let i = t.state.facet(SS).map((r) => r(t));
  for (; ; ) {
    let r = !1;
    for (let o of i)
      o.between(n.from - 1, n.from + 1, (s, l, a) => {
        n.from > s && n.from < l && (n = e.head > n.from ? we.cursor(s, 1) : we.cursor(l, -1), r = !0);
      });
    if (!r)
      return n;
  }
}
class Dz {
  constructor(e) {
    this.lastKeyCode = 0, this.lastKeyTime = 0, this.lastTouchTime = 0, this.lastFocusTime = 0, this.lastScrollTop = 0, this.lastScrollLeft = 0, this.chromeScrollHack = -1, this.pendingIOSKey = void 0, this.lastSelectionOrigin = null, this.lastSelectionTime = 0, this.lastEscPress = 0, this.lastContextMenu = 0, this.scrollHandlers = [], this.registeredEvents = [], this.customHandlers = [], this.composing = -1, this.compositionFirstChange = null, this.compositionEndedAt = 0, this.mouseSelection = null;
    let n = (i, r) => {
      this.ignoreDuringComposition(r) || r.type == "keydown" && this.keydown(e, r) || (this.mustFlushObserver(r) && e.observer.forceFlush(), this.runCustomHandlers(r.type, e, r) ? r.preventDefault() : i(e, r));
    };
    for (let i in Ln) {
      let r = Ln[i];
      e.contentDOM.addEventListener(i, (o) => {
        Y_(e, o) && n(r, o);
      }, Yp[i]), this.registeredEvents.push(i);
    }
    e.scrollDOM.addEventListener("mousedown", (i) => {
      i.target == e.scrollDOM && n(Ln.mousedown, i);
    }), Qe.chrome && Qe.chrome_version == 102 && e.scrollDOM.addEventListener("wheel", () => {
      this.chromeScrollHack < 0 ? e.contentDOM.style.pointerEvents = "none" : window.clearTimeout(this.chromeScrollHack), this.chromeScrollHack = setTimeout(() => {
        this.chromeScrollHack = -1, e.contentDOM.style.pointerEvents = "";
      }, 100);
    }, { passive: !0 }), this.notifiedFocused = e.hasFocus, Qe.safari && e.contentDOM.addEventListener("input", () => null);
  }
  setSelectionOrigin(e) {
    this.lastSelectionOrigin = e, this.lastSelectionTime = Date.now();
  }
  ensureHandlers(e, n) {
    var i;
    let r;
    this.customHandlers = [];
    for (let o of n)
      if (r = (i = o.update(e).spec) === null || i === void 0 ? void 0 : i.domEventHandlers) {
        this.customHandlers.push({ plugin: o.value, handlers: r });
        for (let s in r)
          this.registeredEvents.indexOf(s) < 0 && s != "scroll" && (this.registeredEvents.push(s), e.contentDOM.addEventListener(s, (l) => {
            Y_(e, l) && this.runCustomHandlers(s, e, l) && l.preventDefault();
          }));
      }
  }
  runCustomHandlers(e, n, i) {
    for (let r of this.customHandlers) {
      let o = r.handlers[e];
      if (o)
        try {
          if (o.call(r.plugin, i, n) || i.defaultPrevented)
            return !0;
        } catch (s) {
          Ti(n.state, s);
        }
    }
    return !1;
  }
  runScrollHandlers(e, n) {
    this.lastScrollTop = e.scrollDOM.scrollTop, this.lastScrollLeft = e.scrollDOM.scrollLeft;
    for (let i of this.customHandlers) {
      let r = i.handlers.scroll;
      if (r)
        try {
          r.call(i.plugin, n, e);
        } catch (o) {
          Ti(e.state, o);
        }
    }
  }
  keydown(e, n) {
    if (this.lastKeyCode = n.keyCode, this.lastKeyTime = Date.now(), n.keyCode == 9 && Date.now() < this.lastEscPress + 2e3)
      return !0;
    if (Qe.android && Qe.chrome && !n.synthetic && (n.keyCode == 13 || n.keyCode == 8))
      return e.observer.delayAndroidKey(n.key, n.keyCode), !0;
    let i;
    return Qe.ios && !n.synthetic && !n.altKey && !n.metaKey && ((i = NS.find((r) => r.keyCode == n.keyCode)) && !n.ctrlKey || jz.indexOf(n.key) > -1 && n.ctrlKey && !n.shiftKey) ? (this.pendingIOSKey = i || n, setTimeout(() => this.flushIOSKey(e), 250), !0) : !1;
  }
  flushIOSKey(e) {
    let n = this.pendingIOSKey;
    return n ? (this.pendingIOSKey = void 0, fl(e.contentDOM, n.key, n.keyCode)) : !1;
  }
  ignoreDuringComposition(e) {
    return /^key/.test(e.type) ? this.composing > 0 ? !0 : Qe.safari && !Qe.ios && Date.now() - this.compositionEndedAt < 100 ? (this.compositionEndedAt = 0, !0) : !1 : !1;
  }
  mustFlushObserver(e) {
    return e.type == "keydown" && e.keyCode != 229;
  }
  startMouseSelection(e) {
    this.mouseSelection && this.mouseSelection.destroy(), this.mouseSelection = e;
  }
  update(e) {
    this.mouseSelection && this.mouseSelection.update(e), e.transactions.length && (this.lastKeyCode = this.lastSelectionTime = 0);
  }
  destroy() {
    this.mouseSelection && this.mouseSelection.destroy();
  }
}
const NS = [
  { key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" },
  { key: "Enter", keyCode: 13, inputType: "insertParagraph" },
  { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }
], jz = "dthko", DS = [16, 17, 18, 20, 91, 92, 224, 225];
function qf(t) {
  return t * 0.7 + 8;
}
class Bz {
  constructor(e, n, i, r) {
    this.view = e, this.style = i, this.mustSelect = r, this.scrollSpeed = { x: 0, y: 0 }, this.scrolling = -1, this.lastEvent = n, this.scrollParent = iz(e.contentDOM);
    let o = e.contentDOM.ownerDocument;
    o.addEventListener("mousemove", this.move = this.move.bind(this)), o.addEventListener("mouseup", this.up = this.up.bind(this)), this.extend = n.shiftKey, this.multiple = e.state.facet(St.allowMultipleSelections) && Lz(e, n), this.dragMove = xz(e, n), this.dragging = zz(e, n) && xS(n) == 1 ? null : !1, this.dragging === !1 && (n.preventDefault(), this.select(n));
  }
  move(e) {
    var n;
    if (e.buttons == 0)
      return this.destroy();
    if (this.dragging !== !1)
      return;
    this.select(this.lastEvent = e);
    let i = 0, r = 0, o = ((n = this.scrollParent) === null || n === void 0 ? void 0 : n.getBoundingClientRect()) || { left: 0, top: 0, right: this.view.win.innerWidth, bottom: this.view.win.innerHeight };
    e.clientX <= o.left ? i = -qf(o.left - e.clientX) : e.clientX >= o.right && (i = qf(e.clientX - o.right)), e.clientY <= o.top ? r = -qf(o.top - e.clientY) : e.clientY >= o.bottom && (r = qf(e.clientY - o.bottom)), this.setScrollSpeed(i, r);
  }
  up(e) {
    this.dragging == null && this.select(this.lastEvent), this.dragging || e.preventDefault(), this.destroy();
  }
  destroy() {
    this.setScrollSpeed(0, 0);
    let e = this.view.contentDOM.ownerDocument;
    e.removeEventListener("mousemove", this.move), e.removeEventListener("mouseup", this.up), this.view.inputState.mouseSelection = null;
  }
  setScrollSpeed(e, n) {
    this.scrollSpeed = { x: e, y: n }, e || n ? this.scrolling < 0 && (this.scrolling = setInterval(() => this.scroll(), 50)) : this.scrolling > -1 && (clearInterval(this.scrolling), this.scrolling = -1);
  }
  scroll() {
    this.scrollParent ? (this.scrollParent.scrollLeft += this.scrollSpeed.x, this.scrollParent.scrollTop += this.scrollSpeed.y) : this.view.win.scrollBy(this.scrollSpeed.x, this.scrollSpeed.y), this.dragging === !1 && this.select(this.lastEvent);
  }
  select(e) {
    let n = this.style.get(e, this.extend, this.multiple);
    (this.mustSelect || !n.eq(this.view.state.selection) || n.main.assoc != this.view.state.selection.main.assoc) && this.view.dispatch({
      selection: n,
      userEvent: "select.pointer"
    }), this.mustSelect = !1;
  }
  update(e) {
    e.docChanged && this.dragging && (this.dragging = this.dragging.map(e.changes)), this.style.update(e) && setTimeout(() => this.select(this.lastEvent), 20);
  }
}
function Lz(t, e) {
  let n = t.state.facet(gS);
  return n.length ? n[0](e) : Qe.mac ? e.metaKey : e.ctrlKey;
}
function xz(t, e) {
  let n = t.state.facet(bS);
  return n.length ? n[0](e) : Qe.mac ? !e.altKey : !e.ctrlKey;
}
function zz(t, e) {
  let { main: n } = t.state.selection;
  if (n.empty)
    return !1;
  let i = fu(t.root);
  if (!i || i.rangeCount == 0)
    return !0;
  let r = i.getRangeAt(0).getClientRects();
  for (let o = 0; o < r.length; o++) {
    let s = r[o];
    if (s.left <= e.clientX && s.right >= e.clientX && s.top <= e.clientY && s.bottom >= e.clientY)
      return !0;
  }
  return !1;
}
function Y_(t, e) {
  if (!e.bubbles)
    return !0;
  if (e.defaultPrevented)
    return !1;
  for (let n = e.target, i; n != t.contentDOM; n = n.parentNode)
    if (!n || n.nodeType == 11 || (i = nn.get(n)) && i.ignoreEvent(e))
      return !1;
  return !0;
}
const Ln = /* @__PURE__ */ Object.create(null), Yp = /* @__PURE__ */ Object.create(null), jS = Qe.ie && Qe.ie_version < 15 || Qe.ios && Qe.webkit_version < 604;
function Vz(t) {
  let e = t.dom.parentNode;
  if (!e)
    return;
  let n = e.appendChild(document.createElement("textarea"));
  n.style.cssText = "position: fixed; left: -10000px; top: 10px", n.focus(), setTimeout(() => {
    t.focus(), n.remove(), BS(t, n.value);
  }, 50);
}
function BS(t, e) {
  let { state: n } = t, i, r = 1, o = n.toText(e), s = o.lines == n.selection.ranges.length;
  if (Zp != null && n.selection.ranges.every((a) => a.empty) && Zp == o.toString()) {
    let a = -1;
    i = n.changeByRange((f) => {
      let c = n.doc.lineAt(f.from);
      if (c.from == a)
        return { range: f };
      a = c.from;
      let u = n.toText((s ? o.line(r++).text : e) + n.lineBreak);
      return {
        changes: { from: c.from, insert: u },
        range: we.cursor(f.from + u.length)
      };
    });
  } else
    s ? i = n.changeByRange((a) => {
      let f = o.line(r++);
      return {
        changes: { from: a.from, to: a.to, insert: f.text },
        range: we.cursor(a.from + f.length)
      };
    }) : i = n.replaceSelection(o);
  t.dispatch(i, {
    userEvent: "input.paste",
    scrollIntoView: !0
  });
}
Ln.keydown = (t, e) => {
  t.inputState.setSelectionOrigin("select"), e.keyCode == 27 ? t.inputState.lastEscPress = Date.now() : DS.indexOf(e.keyCode) < 0 && (t.inputState.lastEscPress = 0);
};
Ln.touchstart = (t, e) => {
  t.inputState.lastTouchTime = Date.now(), t.inputState.setSelectionOrigin("select.pointer");
};
Ln.touchmove = (t) => {
  t.inputState.setSelectionOrigin("select.pointer");
};
Yp.touchstart = Yp.touchmove = { passive: !0 };
Ln.mousedown = (t, e) => {
  if (t.observer.flush(), t.inputState.lastTouchTime > Date.now() - 2e3)
    return;
  let n = null;
  for (let i of t.state.facet(_S))
    if (n = i(t, e), n)
      break;
  if (!n && e.button == 0 && (n = Wz(t, e)), n) {
    let i = t.root.activeElement != t.contentDOM;
    i && t.observer.ignore(() => iS(t.contentDOM)), t.inputState.startMouseSelection(new Bz(t, e, n, i));
  }
};
function Z_(t, e, n, i) {
  if (i == 1)
    return we.cursor(e, n);
  if (i == 2)
    return Az(t.state, e, n);
  {
    let r = ci.find(t.docView, e), o = t.state.doc.lineAt(r ? r.posAtEnd : e), s = r ? r.posAtStart : o.from, l = r ? r.posAtEnd : o.to;
    return l < t.state.doc.length && l == o.to && l++, we.range(s, l);
  }
}
let LS = (t, e) => t >= e.top && t <= e.bottom, $_ = (t, e, n) => LS(e, n) && t >= n.left && t <= n.right;
function Fz(t, e, n, i) {
  let r = ci.find(t.docView, e);
  if (!r)
    return 1;
  let o = e - r.posAtStart;
  if (o == 0)
    return 1;
  if (o == r.length)
    return -1;
  let s = r.coordsAt(o, -1);
  if (s && $_(n, i, s))
    return -1;
  let l = r.coordsAt(o, 1);
  return l && $_(n, i, l) ? 1 : s && LS(i, s) ? -1 : 1;
}
function ey(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  return { pos: n, bias: Fz(t, n, e.clientX, e.clientY) };
}
const Hz = Qe.ie && Qe.ie_version <= 11;
let ty = null, ny = 0, iy = 0;
function xS(t) {
  if (!Hz)
    return t.detail;
  let e = ty, n = iy;
  return ty = t, iy = Date.now(), ny = !e || n > Date.now() - 400 && Math.abs(e.clientX - t.clientX) < 2 && Math.abs(e.clientY - t.clientY) < 2 ? (ny + 1) % 3 : 1;
}
function Wz(t, e) {
  let n = ey(t, e), i = xS(e), r = t.state.selection;
  return {
    update(o) {
      o.docChanged && (n.pos = o.changes.mapPos(n.pos), r = r.map(o.changes));
    },
    get(o, s, l) {
      let a = ey(t, o), f = Z_(t, a.pos, a.bias, i);
      if (n.pos != a.pos && !s) {
        let c = Z_(t, n.pos, n.bias, i), u = Math.min(c.from, f.from), h = Math.max(c.to, f.to);
        f = u < f.from ? we.range(u, h) : we.range(h, u);
      }
      return s ? r.replaceRange(r.main.extend(f.from, f.to)) : l && r.ranges.length > 1 && r.ranges.some((c) => c.eq(f)) ? Uz(r, f) : l ? r.addRange(f) : we.create([f]);
    }
  };
}
function Uz(t, e) {
  for (let n = 0; ; n++)
    if (t.ranges[n].eq(e))
      return we.create(t.ranges.slice(0, n).concat(t.ranges.slice(n + 1)), t.mainIndex == n ? 0 : t.mainIndex - (t.mainIndex > n ? 1 : 0));
}
Ln.dragstart = (t, e) => {
  let { selection: { main: n } } = t.state, { mouseSelection: i } = t.inputState;
  i && (i.dragging = n), e.dataTransfer && (e.dataTransfer.setData("Text", t.state.sliceDoc(n.from, n.to)), e.dataTransfer.effectAllowed = "copyMove");
};
function ry(t, e, n, i) {
  if (!n)
    return;
  let r = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  e.preventDefault();
  let { mouseSelection: o } = t.inputState, s = i && o && o.dragging && o.dragMove ? { from: o.dragging.from, to: o.dragging.to } : null, l = { from: r, insert: n }, a = t.state.changes(s ? [s, l] : l);
  t.focus(), t.dispatch({
    changes: a,
    selection: { anchor: a.mapPos(r, -1), head: a.mapPos(r, 1) },
    userEvent: s ? "move.drop" : "input.drop"
  });
}
Ln.drop = (t, e) => {
  if (!e.dataTransfer)
    return;
  if (t.state.readOnly)
    return e.preventDefault();
  let n = e.dataTransfer.files;
  if (n && n.length) {
    e.preventDefault();
    let i = Array(n.length), r = 0, o = () => {
      ++r == n.length && ry(t, e, i.filter((s) => s != null).join(t.state.lineBreak), !1);
    };
    for (let s = 0; s < n.length; s++) {
      let l = new FileReader();
      l.onerror = o, l.onload = () => {
        /[\x00-\x08\x0e-\x1f]{2}/.test(l.result) || (i[s] = l.result), o();
      }, l.readAsText(n[s]);
    }
  } else
    ry(t, e, e.dataTransfer.getData("Text"), !0);
};
Ln.paste = (t, e) => {
  if (t.state.readOnly)
    return e.preventDefault();
  t.observer.flush();
  let n = jS ? null : e.clipboardData;
  n ? (BS(t, n.getData("text/plain")), e.preventDefault()) : Vz(t);
};
function qz(t, e) {
  let n = t.dom.parentNode;
  if (!n)
    return;
  let i = n.appendChild(document.createElement("textarea"));
  i.style.cssText = "position: fixed; left: -10000px; top: 10px", i.value = e, i.focus(), i.selectionEnd = e.length, i.selectionStart = 0, setTimeout(() => {
    i.remove(), t.focus();
  }, 50);
}
function Jz(t) {
  let e = [], n = [], i = !1;
  for (let r of t.selection.ranges)
    r.empty || (e.push(t.sliceDoc(r.from, r.to)), n.push(r));
  if (!e.length) {
    let r = -1;
    for (let { from: o } of t.selection.ranges) {
      let s = t.doc.lineAt(o);
      s.number > r && (e.push(s.text), n.push({ from: s.from, to: Math.min(t.doc.length, s.to + 1) })), r = s.number;
    }
    i = !0;
  }
  return { text: e.join(t.lineBreak), ranges: n, linewise: i };
}
let Zp = null;
Ln.copy = Ln.cut = (t, e) => {
  let { text: n, ranges: i, linewise: r } = Jz(t.state);
  if (!n && !r)
    return;
  Zp = r ? n : null;
  let o = jS ? null : e.clipboardData;
  o ? (e.preventDefault(), o.clearData(), o.setData("text/plain", n)) : qz(t, n), e.type == "cut" && !t.state.readOnly && t.dispatch({
    changes: i,
    scrollIntoView: !0,
    userEvent: "delete.cut"
  });
};
function zS(t) {
  setTimeout(() => {
    t.hasFocus != t.inputState.notifiedFocused && t.update([]);
  }, 10);
}
Ln.focus = (t) => {
  t.inputState.lastFocusTime = Date.now(), !t.scrollDOM.scrollTop && (t.inputState.lastScrollTop || t.inputState.lastScrollLeft) && (t.scrollDOM.scrollTop = t.inputState.lastScrollTop, t.scrollDOM.scrollLeft = t.inputState.lastScrollLeft), zS(t);
};
Ln.blur = (t) => {
  t.observer.clearSelectionRange(), zS(t);
};
Ln.compositionstart = Ln.compositionupdate = (t) => {
  t.inputState.compositionFirstChange == null && (t.inputState.compositionFirstChange = !0), t.inputState.composing < 0 && (t.inputState.composing = 0);
};
Ln.compositionend = (t) => {
  t.inputState.composing = -1, t.inputState.compositionEndedAt = Date.now(), t.inputState.compositionFirstChange = null, Qe.chrome && Qe.android && t.observer.flushSoon(), setTimeout(() => {
    t.inputState.composing < 0 && t.docView.compositionDeco.size && t.update([]);
  }, 50);
};
Ln.contextmenu = (t) => {
  t.inputState.lastContextMenu = Date.now();
};
Ln.beforeinput = (t, e) => {
  var n;
  let i;
  if (Qe.chrome && Qe.android && (i = NS.find((r) => r.inputType == e.inputType)) && (t.observer.delayAndroidKey(i.key, i.keyCode), i.key == "Backspace" || i.key == "Delete")) {
    let r = ((n = window.visualViewport) === null || n === void 0 ? void 0 : n.height) || 0;
    setTimeout(() => {
      var o;
      (((o = window.visualViewport) === null || o === void 0 ? void 0 : o.height) || 0) > r + 10 && t.hasFocus && (t.contentDOM.blur(), t.focus());
    }, 100);
  }
};
const oy = ["pre-wrap", "normal", "pre-line", "break-spaces"];
class Kz {
  constructor(e) {
    this.lineWrapping = e, this.doc = jt.empty, this.heightSamples = {}, this.lineHeight = 14, this.charWidth = 7, this.lineLength = 30, this.heightChanged = !1;
  }
  heightForGap(e, n) {
    let i = this.doc.lineAt(n).number - this.doc.lineAt(e).number + 1;
    return this.lineWrapping && (i += Math.ceil((n - e - i * this.lineLength * 0.5) / this.lineLength)), this.lineHeight * i;
  }
  heightForLine(e) {
    return this.lineWrapping ? (1 + Math.max(0, Math.ceil((e - this.lineLength) / (this.lineLength - 5)))) * this.lineHeight : this.lineHeight;
  }
  setDoc(e) {
    return this.doc = e, this;
  }
  mustRefreshForWrapping(e) {
    return oy.indexOf(e) > -1 != this.lineWrapping;
  }
  mustRefreshForHeights(e) {
    let n = !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i];
      r < 0 ? i++ : this.heightSamples[Math.floor(r * 10)] || (n = !0, this.heightSamples[Math.floor(r * 10)] = !0);
    }
    return n;
  }
  refresh(e, n, i, r, o) {
    let s = oy.indexOf(e) > -1, l = Math.round(n) != Math.round(this.lineHeight) || this.lineWrapping != s;
    if (this.lineWrapping = s, this.lineHeight = n, this.charWidth = i, this.lineLength = r, l) {
      this.heightSamples = {};
      for (let a = 0; a < o.length; a++) {
        let f = o[a];
        f < 0 ? a++ : this.heightSamples[Math.floor(f * 10)] = !0;
      }
    }
    return l;
  }
}
class Gz {
  constructor(e, n) {
    this.from = e, this.heights = n, this.index = 0;
  }
  get more() {
    return this.index < this.heights.length;
  }
}
class To {
  constructor(e, n, i, r, o) {
    this.from = e, this.length = n, this.top = i, this.height = r, this.type = o;
  }
  get to() {
    return this.from + this.length;
  }
  get bottom() {
    return this.top + this.height;
  }
  join(e) {
    let n = (Array.isArray(this.type) ? this.type : [this]).concat(Array.isArray(e.type) ? e.type : [e]);
    return new To(this.from, this.length + e.length, this.top, this.height + e.height, n);
  }
}
var $t = /* @__PURE__ */ function(t) {
  return t[t.ByPos = 0] = "ByPos", t[t.ByHeight = 1] = "ByHeight", t[t.ByPosNoHeight = 2] = "ByPosNoHeight", t;
}($t || ($t = {}));
const Sc = 1e-3;
class hi {
  constructor(e, n, i = 2) {
    this.length = e, this.height = n, this.flags = i;
  }
  get outdated() {
    return (this.flags & 2) > 0;
  }
  set outdated(e) {
    this.flags = (e ? 2 : 0) | this.flags & -3;
  }
  setHeight(e, n) {
    this.height != n && (Math.abs(this.height - n) > Sc && (e.heightChanged = !0), this.height = n);
  }
  replace(e, n, i) {
    return hi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(this);
  }
  decomposeRight(e, n) {
    n.push(this);
  }
  applyChanges(e, n, i, r) {
    let o = this;
    for (let s = r.length - 1; s >= 0; s--) {
      let { fromA: l, toA: a, fromB: f, toB: c } = r[s], u = o.lineAt(l, $t.ByPosNoHeight, n, 0, 0), h = u.to >= a ? u : o.lineAt(a, $t.ByPosNoHeight, n, 0, 0);
      for (c += h.to - a, a = h.to; s > 0 && u.from <= r[s - 1].toA; )
        l = r[s - 1].fromA, f = r[s - 1].fromB, s--, l < u.from && (u = o.lineAt(l, $t.ByPosNoHeight, n, 0, 0));
      f += u.from - l, l = u.from;
      let d = Ag.build(i, e, f, c);
      o = o.replace(l, a, d);
    }
    return o.updateHeight(i, 0);
  }
  static empty() {
    return new Si(0, 0);
  }
  static of(e) {
    if (e.length == 1)
      return e[0];
    let n = 0, i = e.length, r = 0, o = 0;
    for (; ; )
      if (n == i)
        if (r > o * 2) {
          let l = e[n - 1];
          l.break ? e.splice(--n, 1, l.left, null, l.right) : e.splice(--n, 1, l.left, l.right), i += 1 + l.break, r -= l.size;
        } else if (o > r * 2) {
          let l = e[i];
          l.break ? e.splice(i, 1, l.left, null, l.right) : e.splice(i, 1, l.left, l.right), i += 2 + l.break, o -= l.size;
        } else
          break;
      else if (r < o) {
        let l = e[n++];
        l && (r += l.size);
      } else {
        let l = e[--i];
        l && (o += l.size);
      }
    let s = 0;
    return e[n - 1] == null ? (s = 1, n--) : e[n] == null && (s = 1, i++), new Xz(hi.of(e.slice(0, n)), s, hi.of(e.slice(i)));
  }
}
hi.prototype.size = 1;
class VS extends hi {
  constructor(e, n, i) {
    super(e, n), this.type = i;
  }
  blockAt(e, n, i, r) {
    return new To(r, this.length, i, this.height, this.type);
  }
  lineAt(e, n, i, r, o) {
    return this.blockAt(0, i, r, o);
  }
  forEachLine(e, n, i, r, o, s) {
    e <= o + this.length && n >= o && s(this.blockAt(0, i, r, o));
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more && this.setHeight(e, r.heights[r.index++]), this.outdated = !1, this;
  }
  toString() {
    return `block(${this.length})`;
  }
}
class Si extends VS {
  constructor(e, n) {
    super(e, n, Yt.Text), this.collapsed = 0, this.widgetHeight = 0;
  }
  replace(e, n, i) {
    let r = i[0];
    return i.length == 1 && (r instanceof Si || r instanceof Jn && r.flags & 4) && Math.abs(this.length - r.length) < 10 ? (r instanceof Jn ? r = new Si(r.length, this.height) : r.height = this.height, this.outdated || (r.outdated = !1), r) : hi.of(i);
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more ? this.setHeight(e, r.heights[r.index++]) : (i || this.outdated) && this.setHeight(e, Math.max(this.widgetHeight, e.heightForLine(this.length - this.collapsed))), this.outdated = !1, this;
  }
  toString() {
    return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
  }
}
class Jn extends hi {
  constructor(e) {
    super(e, 0);
  }
  lines(e, n) {
    let i = e.lineAt(n).number, r = e.lineAt(n + this.length).number;
    return { firstLine: i, lastLine: r, lineHeight: this.height / (r - i + 1) };
  }
  blockAt(e, n, i, r) {
    let { firstLine: o, lastLine: s, lineHeight: l } = this.lines(n, r), a = Math.max(0, Math.min(s - o, Math.floor((e - i) / l))), { from: f, length: c } = n.line(o + a);
    return new To(f, c, i + l * a, l, Yt.Text);
  }
  lineAt(e, n, i, r, o) {
    if (n == $t.ByHeight)
      return this.blockAt(e, i, r, o);
    if (n == $t.ByPosNoHeight) {
      let { from: u, to: h } = i.lineAt(e);
      return new To(u, h - u, 0, 0, Yt.Text);
    }
    let { firstLine: s, lineHeight: l } = this.lines(i, o), { from: a, length: f, number: c } = i.lineAt(e);
    return new To(a, f, r + l * (c - s), l, Yt.Text);
  }
  forEachLine(e, n, i, r, o, s) {
    let { firstLine: l, lineHeight: a } = this.lines(i, o);
    for (let f = Math.max(e, o), c = Math.min(o + this.length, n); f <= c; ) {
      let u = i.lineAt(f);
      f == e && (r += a * (u.number - l)), s(new To(u.from, u.length, r, a, Yt.Text)), r += a, f = u.to + 1;
    }
  }
  replace(e, n, i) {
    let r = this.length - n;
    if (r > 0) {
      let o = i[i.length - 1];
      o instanceof Jn ? i[i.length - 1] = new Jn(o.length + r) : i.push(null, new Jn(r - 1));
    }
    if (e > 0) {
      let o = i[0];
      o instanceof Jn ? i[0] = new Jn(e + o.length) : i.unshift(new Jn(e - 1), null);
    }
    return hi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(new Jn(e - 1), null);
  }
  decomposeRight(e, n) {
    n.push(null, new Jn(this.length - e - 1));
  }
  updateHeight(e, n = 0, i = !1, r) {
    let o = n + this.length;
    if (r && r.from <= n + this.length && r.more) {
      let s = [], l = Math.max(n, r.from), a = -1, f = e.heightChanged;
      for (r.from > n && s.push(new Jn(r.from - n - 1).updateHeight(e, n)); l <= o && r.more; ) {
        let u = e.doc.lineAt(l).length;
        s.length && s.push(null);
        let h = r.heights[r.index++];
        a == -1 ? a = h : Math.abs(h - a) >= Sc && (a = -2);
        let d = new Si(u, h);
        d.outdated = !1, s.push(d), l += u + 1;
      }
      l <= o && s.push(null, new Jn(o - l).updateHeight(e, l));
      let c = hi.of(s);
      return e.heightChanged = f || a < 0 || Math.abs(c.height - this.height) >= Sc || Math.abs(a - this.lines(e.doc, n).lineHeight) >= Sc, c;
    } else
      (i || this.outdated) && (this.setHeight(e, e.heightForGap(n, n + this.length)), this.outdated = !1);
    return this;
  }
  toString() {
    return `gap(${this.length})`;
  }
}
class Xz extends hi {
  constructor(e, n, i) {
    super(e.length + n + i.length, e.height + i.height, n | (e.outdated || i.outdated ? 2 : 0)), this.left = e, this.right = i, this.size = e.size + i.size;
  }
  get break() {
    return this.flags & 1;
  }
  blockAt(e, n, i, r) {
    let o = i + this.left.height;
    return e < o ? this.left.blockAt(e, n, i, r) : this.right.blockAt(e, n, o, r + this.left.length + this.break);
  }
  lineAt(e, n, i, r, o) {
    let s = r + this.left.height, l = o + this.left.length + this.break, a = n == $t.ByHeight ? e < s : e < l, f = a ? this.left.lineAt(e, n, i, r, o) : this.right.lineAt(e, n, i, s, l);
    if (this.break || (a ? f.to < l : f.from > l))
      return f;
    let c = n == $t.ByPosNoHeight ? $t.ByPosNoHeight : $t.ByPos;
    return a ? f.join(this.right.lineAt(l, c, i, s, l)) : this.left.lineAt(l, c, i, r, o).join(f);
  }
  forEachLine(e, n, i, r, o, s) {
    let l = r + this.left.height, a = o + this.left.length + this.break;
    if (this.break)
      e < a && this.left.forEachLine(e, n, i, r, o, s), n >= a && this.right.forEachLine(e, n, i, l, a, s);
    else {
      let f = this.lineAt(a, $t.ByPos, i, r, o);
      e < f.from && this.left.forEachLine(e, f.from - 1, i, r, o, s), f.to >= e && f.from <= n && s(f), n > f.to && this.right.forEachLine(f.to + 1, n, i, l, a, s);
    }
  }
  replace(e, n, i) {
    let r = this.left.length + this.break;
    if (n < r)
      return this.balanced(this.left.replace(e, n, i), this.right);
    if (e > this.left.length)
      return this.balanced(this.left, this.right.replace(e - r, n - r, i));
    let o = [];
    e > 0 && this.decomposeLeft(e, o);
    let s = o.length;
    for (let l of i)
      o.push(l);
    if (e > 0 && sy(o, s - 1), n < this.length) {
      let l = o.length;
      this.decomposeRight(n, o), sy(o, l);
    }
    return hi.of(o);
  }
  decomposeLeft(e, n) {
    let i = this.left.length;
    if (e <= i)
      return this.left.decomposeLeft(e, n);
    n.push(this.left), this.break && (i++, e >= i && n.push(null)), e > i && this.right.decomposeLeft(e - i, n);
  }
  decomposeRight(e, n) {
    let i = this.left.length, r = i + this.break;
    if (e >= r)
      return this.right.decomposeRight(e - r, n);
    e < i && this.left.decomposeRight(e, n), this.break && e < r && n.push(null), n.push(this.right);
  }
  balanced(e, n) {
    return e.size > 2 * n.size || n.size > 2 * e.size ? hi.of(this.break ? [e, null, n] : [e, n]) : (this.left = e, this.right = n, this.height = e.height + n.height, this.outdated = e.outdated || n.outdated, this.size = e.size + n.size, this.length = e.length + this.break + n.length, this);
  }
  updateHeight(e, n = 0, i = !1, r) {
    let { left: o, right: s } = this, l = n + o.length + this.break, a = null;
    return r && r.from <= n + o.length && r.more ? a = o = o.updateHeight(e, n, i, r) : o.updateHeight(e, n, i), r && r.from <= l + s.length && r.more ? a = s = s.updateHeight(e, l, i, r) : s.updateHeight(e, l, i), a ? this.balanced(o, s) : (this.height = this.left.height + this.right.height, this.outdated = !1, this);
  }
  toString() {
    return this.left + (this.break ? " " : "-") + this.right;
  }
}
function sy(t, e) {
  let n, i;
  t[e] == null && (n = t[e - 1]) instanceof Jn && (i = t[e + 1]) instanceof Jn && t.splice(e - 1, 3, new Jn(n.length + 1 + i.length));
}
const Qz = 5;
class Ag {
  constructor(e, n) {
    this.pos = e, this.oracle = n, this.nodes = [], this.lineStart = -1, this.lineEnd = -1, this.covering = null, this.writtenTo = e;
  }
  get isCovered() {
    return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
  }
  span(e, n) {
    if (this.lineStart > -1) {
      let i = Math.min(n, this.lineEnd), r = this.nodes[this.nodes.length - 1];
      r instanceof Si ? r.length += i - this.pos : (i > this.pos || !this.isCovered) && this.nodes.push(new Si(i - this.pos, -1)), this.writtenTo = i, n > i && (this.nodes.push(null), this.writtenTo++, this.lineStart = -1);
    }
    this.pos = n;
  }
  point(e, n, i) {
    if (e < n || i.heightRelevant) {
      let r = i.widget ? i.widget.estimatedHeight : 0;
      r < 0 && (r = this.oracle.lineHeight);
      let o = n - e;
      i.block ? this.addBlock(new VS(o, r, i.type)) : (o || r >= Qz) && this.addLineDeco(r, o);
    } else
      n > e && this.span(e, n);
    this.lineEnd > -1 && this.lineEnd < this.pos && (this.lineEnd = this.oracle.doc.lineAt(this.pos).to);
  }
  enterLine() {
    if (this.lineStart > -1)
      return;
    let { from: e, to: n } = this.oracle.doc.lineAt(this.pos);
    this.lineStart = e, this.lineEnd = n, this.writtenTo < e && ((this.writtenTo < e - 1 || this.nodes[this.nodes.length - 1] == null) && this.nodes.push(this.blankContent(this.writtenTo, e - 1)), this.nodes.push(null)), this.pos > e && this.nodes.push(new Si(this.pos - e, -1)), this.writtenTo = this.pos;
  }
  blankContent(e, n) {
    let i = new Jn(n - e);
    return this.oracle.doc.lineAt(e).to == n && (i.flags |= 4), i;
  }
  ensureLine() {
    this.enterLine();
    let e = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
    if (e instanceof Si)
      return e;
    let n = new Si(0, -1);
    return this.nodes.push(n), n;
  }
  addBlock(e) {
    this.enterLine(), e.type == Yt.WidgetAfter && !this.isCovered && this.ensureLine(), this.nodes.push(e), this.writtenTo = this.pos = this.pos + e.length, e.type != Yt.WidgetBefore && (this.covering = e);
  }
  addLineDeco(e, n) {
    let i = this.ensureLine();
    i.length += n, i.collapsed += n, i.widgetHeight = Math.max(i.widgetHeight, e), this.writtenTo = this.pos = this.pos + n;
  }
  finish(e) {
    let n = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
    this.lineStart > -1 && !(n instanceof Si) && !this.isCovered ? this.nodes.push(new Si(0, -1)) : (this.writtenTo < this.pos || n == null) && this.nodes.push(this.blankContent(this.writtenTo, this.pos));
    let i = e;
    for (let r of this.nodes)
      r instanceof Si && r.updateHeight(this.oracle, i), i += r ? r.length : 1;
    return this.nodes;
  }
  static build(e, n, i, r) {
    let o = new Ag(i, e);
    return Bt.spans(n, i, r, o, 0), o.finish(i);
  }
}
function Yz(t, e, n) {
  let i = new Zz();
  return Bt.compare(t, e, n, i, 0), i.changes;
}
class Zz {
  constructor() {
    this.changes = [];
  }
  compareRange() {
  }
  comparePoint(e, n, i, r) {
    (e < n || i && i.heightRelevant || r && r.heightRelevant) && Jp(e, n, this.changes, 5);
  }
}
function $z(t, e) {
  let n = t.getBoundingClientRect(), i = t.ownerDocument, r = i.defaultView || window, o = Math.max(0, n.left), s = Math.min(r.innerWidth, n.right), l = Math.max(0, n.top), a = Math.min(r.innerHeight, n.bottom);
  for (let f = t.parentNode; f && f != i.body; )
    if (f.nodeType == 1) {
      let c = f, u = window.getComputedStyle(c);
      if ((c.scrollHeight > c.clientHeight || c.scrollWidth > c.clientWidth) && u.overflow != "visible") {
        let h = c.getBoundingClientRect();
        o = Math.max(o, h.left), s = Math.min(s, h.right), l = Math.max(l, h.top), a = f == t.parentNode ? h.bottom : Math.min(a, h.bottom);
      }
      f = u.position == "absolute" || u.position == "fixed" ? c.offsetParent : c.parentNode;
    } else if (f.nodeType == 11)
      f = f.host;
    else
      break;
  return {
    left: o - n.left,
    right: Math.max(o, s) - n.left,
    top: l - (n.top + e),
    bottom: Math.max(l, a) - (n.top + e)
  };
}
function eV(t, e) {
  let n = t.getBoundingClientRect();
  return {
    left: 0,
    right: n.right - n.left,
    top: e,
    bottom: n.bottom - (n.top + e)
  };
}
class Cd {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.size = i;
  }
  static same(e, n) {
    if (e.length != n.length)
      return !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i], o = n[i];
      if (r.from != o.from || r.to != o.to || r.size != o.size)
        return !1;
    }
    return !0;
  }
  draw(e) {
    return rt.replace({ widget: new tV(this.size, e) }).range(this.from, this.to);
  }
}
class tV extends Yo {
  constructor(e, n) {
    super(), this.size = e, this.vertical = n;
  }
  eq(e) {
    return e.size == this.size && e.vertical == this.vertical;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.vertical ? e.style.height = this.size + "px" : (e.style.width = this.size + "px", e.style.height = "2px", e.style.display = "inline-block"), e;
  }
  get estimatedHeight() {
    return this.vertical ? this.size : -1;
  }
}
class ly {
  constructor(e) {
    this.state = e, this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 }, this.inView = !0, this.paddingTop = 0, this.paddingBottom = 0, this.contentDOMWidth = 0, this.contentDOMHeight = 0, this.editorHeight = 0, this.editorWidth = 0, this.scaler = ay, this.scrollTarget = null, this.printing = !1, this.mustMeasureContent = !0, this.defaultTextDirection = pn.LTR, this.visibleRanges = [], this.mustEnforceCursorAssoc = !1;
    let n = e.facet(Mg).some((i) => typeof i != "function" && i.class == "cm-lineWrapping");
    this.heightOracle = new Kz(n), this.stateDeco = e.facet(Ja).filter((i) => typeof i != "function"), this.heightMap = hi.empty().applyChanges(this.stateDeco, jt.empty, this.heightOracle.setDoc(e.doc), [new Ir(0, 0, 0, e.doc.length)]), this.viewport = this.getViewport(0, null), this.updateViewportLines(), this.updateForViewport(), this.lineGaps = this.ensureLineGaps([]), this.lineGapDeco = rt.set(this.lineGaps.map((i) => i.draw(!1))), this.computeVisibleRanges();
  }
  updateForViewport() {
    let e = [this.viewport], { main: n } = this.state.selection;
    for (let i = 0; i <= 1; i++) {
      let r = i ? n.head : n.anchor;
      if (!e.some(({ from: o, to: s }) => r >= o && r <= s)) {
        let { from: o, to: s } = this.lineBlockAt(r);
        e.push(new Jf(o, s));
      }
    }
    this.viewports = e.sort((i, r) => i.from - r.from), this.scaler = this.heightMap.height <= 7e6 ? ay : new rV(this.heightOracle.doc, this.heightMap, this.viewports);
  }
  updateViewportLines() {
    this.viewportLines = [], this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, (e) => {
      this.viewportLines.push(this.scaler.scale == 1 ? e : ca(e, this.scaler));
    });
  }
  update(e, n = null) {
    this.state = e.state;
    let i = this.stateDeco;
    this.stateDeco = this.state.facet(Ja).filter((f) => typeof f != "function");
    let r = e.changedRanges, o = Ir.extendWithRanges(r, Yz(i, this.stateDeco, e ? e.changes : jn.empty(this.state.doc.length))), s = this.heightMap.height;
    this.heightMap = this.heightMap.applyChanges(this.stateDeco, e.startState.doc, this.heightOracle.setDoc(this.state.doc), o), this.heightMap.height != s && (e.flags |= 2);
    let l = o.length ? this.mapViewport(this.viewport, e.changes) : this.viewport;
    (n && (n.range.head < l.from || n.range.head > l.to) || !this.viewportIsAppropriate(l)) && (l = this.getViewport(0, n));
    let a = !e.changes.empty || e.flags & 2 || l.from != this.viewport.from || l.to != this.viewport.to;
    this.viewport = l, this.updateForViewport(), a && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, e.changes))), e.flags |= this.computeVisibleRanges(), n && (this.scrollTarget = n), !this.mustEnforceCursorAssoc && e.selectionSet && e.view.lineWrapping && e.state.selection.main.empty && e.state.selection.main.assoc && !e.state.facet(kS) && (this.mustEnforceCursorAssoc = !0);
  }
  measure(e) {
    let n = e.contentDOM, i = window.getComputedStyle(n), r = this.heightOracle, o = i.whiteSpace;
    this.defaultTextDirection = i.direction == "rtl" ? pn.RTL : pn.LTR;
    let s = this.heightOracle.mustRefreshForWrapping(o), l = s || this.mustMeasureContent || this.contentDOMHeight != n.clientHeight;
    this.contentDOMHeight = n.clientHeight, this.mustMeasureContent = !1;
    let a = 0, f = 0, c = parseInt(i.paddingTop) || 0, u = parseInt(i.paddingBottom) || 0;
    (this.paddingTop != c || this.paddingBottom != u) && (this.paddingTop = c, this.paddingBottom = u, a |= 10), this.editorWidth != e.scrollDOM.clientWidth && (r.lineWrapping && (l = !0), this.editorWidth = e.scrollDOM.clientWidth, a |= 8);
    let h = (this.printing ? eV : $z)(n, this.paddingTop), d = h.top - this.pixelViewport.top, p = h.bottom - this.pixelViewport.bottom;
    this.pixelViewport = h;
    let g = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
    if (g != this.inView && (this.inView = g, g && (l = !0)), !this.inView && !this.scrollTarget)
      return 0;
    let _ = n.clientWidth;
    if ((this.contentDOMWidth != _ || this.editorHeight != e.scrollDOM.clientHeight) && (this.contentDOMWidth = _, this.editorHeight = e.scrollDOM.clientHeight, a |= 8), l) {
      let y = e.docView.measureVisibleLineHeights(this.viewport);
      if (r.mustRefreshForHeights(y) && (s = !0), s || r.lineWrapping && Math.abs(_ - this.contentDOMWidth) > r.charWidth) {
        let { lineHeight: v, charWidth: M } = e.docView.measureTextSize();
        s = v > 0 && r.refresh(o, v, M, _ / M, y), s && (e.docView.minWidth = 0, a |= 8);
      }
      d > 0 && p > 0 ? f = Math.max(d, p) : d < 0 && p < 0 && (f = Math.min(d, p)), r.heightChanged = !1;
      for (let v of this.viewports) {
        let M = v.from == this.viewport.from ? y : e.docView.measureVisibleLineHeights(v);
        this.heightMap = (s ? hi.empty().applyChanges(this.stateDeco, jt.empty, this.heightOracle, [new Ir(0, 0, 0, e.state.doc.length)]) : this.heightMap).updateHeight(r, 0, s, new Gz(v.from, M));
      }
      r.heightChanged && (a |= 2);
    }
    let b = !this.viewportIsAppropriate(this.viewport, f) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
    return b && (this.viewport = this.getViewport(f, this.scrollTarget)), this.updateForViewport(), (a & 2 || b) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(s ? [] : this.lineGaps, e)), a |= this.computeVisibleRanges(), this.mustEnforceCursorAssoc && (this.mustEnforceCursorAssoc = !1, e.docView.enforceCursorAssoc()), a;
  }
  get visibleTop() {
    return this.scaler.fromDOM(this.pixelViewport.top);
  }
  get visibleBottom() {
    return this.scaler.fromDOM(this.pixelViewport.bottom);
  }
  getViewport(e, n) {
    let i = 0.5 - Math.max(-0.5, Math.min(0.5, e / 1e3 / 2)), r = this.heightMap, o = this.state.doc, { visibleTop: s, visibleBottom: l } = this, a = new Jf(r.lineAt(s - i * 1e3, $t.ByHeight, o, 0, 0).from, r.lineAt(l + (1 - i) * 1e3, $t.ByHeight, o, 0, 0).to);
    if (n) {
      let { head: f } = n.range;
      if (f < a.from || f > a.to) {
        let c = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top), u = r.lineAt(f, $t.ByPos, o, 0, 0), h;
        n.y == "center" ? h = (u.top + u.bottom) / 2 - c / 2 : n.y == "start" || n.y == "nearest" && f < a.from ? h = u.top : h = u.bottom - c, a = new Jf(r.lineAt(h - 1e3 / 2, $t.ByHeight, o, 0, 0).from, r.lineAt(h + c + 1e3 / 2, $t.ByHeight, o, 0, 0).to);
      }
    }
    return a;
  }
  mapViewport(e, n) {
    let i = n.mapPos(e.from, -1), r = n.mapPos(e.to, 1);
    return new Jf(this.heightMap.lineAt(i, $t.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(r, $t.ByPos, this.state.doc, 0, 0).to);
  }
  viewportIsAppropriate({ from: e, to: n }, i = 0) {
    if (!this.inView)
      return !0;
    let { top: r } = this.heightMap.lineAt(e, $t.ByPos, this.state.doc, 0, 0), { bottom: o } = this.heightMap.lineAt(n, $t.ByPos, this.state.doc, 0, 0), { visibleTop: s, visibleBottom: l } = this;
    return (e == 0 || r <= s - Math.max(10, Math.min(-i, 250))) && (n == this.state.doc.length || o >= l + Math.max(10, Math.min(i, 250))) && r > s - 2 * 1e3 && o < l + 2 * 1e3;
  }
  mapLineGaps(e, n) {
    if (!e.length || n.empty)
      return e;
    let i = [];
    for (let r of e)
      n.touchesRange(r.from, r.to) || i.push(new Cd(n.mapPos(r.from), n.mapPos(r.to), r.size));
    return i;
  }
  ensureLineGaps(e, n) {
    let i = this.heightOracle.lineWrapping, r = i ? 1e4 : 2e3, o = r >> 1, s = r << 1;
    if (this.defaultTextDirection != pn.LTR && !i)
      return [];
    let l = [], a = (f, c, u, h) => {
      if (c - f < o)
        return;
      let d = this.state.selection.main, p = [d.from];
      d.empty || p.push(d.to);
      for (let _ of p)
        if (_ > f && _ < c) {
          a(f, _ - 10, u, h), a(_ + 10, c, u, h);
          return;
        }
      let g = iV(e, (_) => _.from >= u.from && _.to <= u.to && Math.abs(_.from - f) < o && Math.abs(_.to - c) < o && !p.some((b) => _.from < b && _.to > b));
      if (!g) {
        if (c < u.to && n && i && n.visibleRanges.some((_) => _.from <= c && _.to >= c)) {
          let _ = n.moveToLineBoundary(we.cursor(c), !1, !0).head;
          _ > f && (c = _);
        }
        g = new Cd(f, c, this.gapSize(u, f, c, h));
      }
      l.push(g);
    };
    for (let f of this.viewportLines) {
      if (f.length < s)
        continue;
      let c = nV(f.from, f.to, this.stateDeco);
      if (c.total < s)
        continue;
      let u = this.scrollTarget ? this.scrollTarget.range.head : null, h, d;
      if (i) {
        let p = r / this.heightOracle.lineLength * this.heightOracle.lineHeight, g, _;
        if (u != null) {
          let b = Gf(c, u), y = ((this.visibleBottom - this.visibleTop) / 2 + p) / f.height;
          g = b - y, _ = b + y;
        } else
          g = (this.visibleTop - f.top - p) / f.height, _ = (this.visibleBottom - f.top + p) / f.height;
        h = Kf(c, g), d = Kf(c, _);
      } else {
        let p = c.total * this.heightOracle.charWidth, g = r * this.heightOracle.charWidth, _, b;
        if (u != null) {
          let y = Gf(c, u), v = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + g) / p;
          _ = y - v, b = y + v;
        } else
          _ = (this.pixelViewport.left - g) / p, b = (this.pixelViewport.right + g) / p;
        h = Kf(c, _), d = Kf(c, b);
      }
      h > f.from && a(f.from, h, f, c), d < f.to && a(d, f.to, f, c);
    }
    return l;
  }
  gapSize(e, n, i, r) {
    let o = Gf(r, i) - Gf(r, n);
    return this.heightOracle.lineWrapping ? e.height * o : r.total * this.heightOracle.charWidth * o;
  }
  updateLineGaps(e) {
    Cd.same(e, this.lineGaps) || (this.lineGaps = e, this.lineGapDeco = rt.set(e.map((n) => n.draw(this.heightOracle.lineWrapping))));
  }
  computeVisibleRanges() {
    let e = this.stateDeco;
    this.lineGaps.length && (e = e.concat(this.lineGapDeco));
    let n = [];
    Bt.spans(e, this.viewport.from, this.viewport.to, {
      span(r, o) {
        n.push({ from: r, to: o });
      },
      point() {
      }
    }, 20);
    let i = n.length != this.visibleRanges.length || this.visibleRanges.some((r, o) => r.from != n[o].from || r.to != n[o].to);
    return this.visibleRanges = n, i ? 4 : 0;
  }
  lineBlockAt(e) {
    return e >= this.viewport.from && e <= this.viewport.to && this.viewportLines.find((n) => n.from <= e && n.to >= e) || ca(this.heightMap.lineAt(e, $t.ByPos, this.state.doc, 0, 0), this.scaler);
  }
  lineBlockAtHeight(e) {
    return ca(this.heightMap.lineAt(this.scaler.fromDOM(e), $t.ByHeight, this.state.doc, 0, 0), this.scaler);
  }
  elementAtHeight(e) {
    return ca(this.heightMap.blockAt(this.scaler.fromDOM(e), this.state.doc, 0, 0), this.scaler);
  }
  get docHeight() {
    return this.scaler.toDOM(this.heightMap.height);
  }
  get contentHeight() {
    return this.docHeight + this.paddingTop + this.paddingBottom;
  }
}
class Jf {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
function nV(t, e, n) {
  let i = [], r = t, o = 0;
  return Bt.spans(n, t, e, {
    span() {
    },
    point(s, l) {
      s > r && (i.push({ from: r, to: s }), o += s - r), r = l;
    }
  }, 20), r < e && (i.push({ from: r, to: e }), o += e - r), { total: o, ranges: i };
}
function Kf({ total: t, ranges: e }, n) {
  if (n <= 0)
    return e[0].from;
  if (n >= 1)
    return e[e.length - 1].to;
  let i = Math.floor(t * n);
  for (let r = 0; ; r++) {
    let { from: o, to: s } = e[r], l = s - o;
    if (i <= l)
      return o + i;
    i -= l;
  }
}
function Gf(t, e) {
  let n = 0;
  for (let { from: i, to: r } of t.ranges) {
    if (e <= r) {
      n += e - i;
      break;
    }
    n += r - i;
  }
  return n / t.total;
}
function iV(t, e) {
  for (let n of t)
    if (e(n))
      return n;
}
const ay = {
  toDOM(t) {
    return t;
  },
  fromDOM(t) {
    return t;
  },
  scale: 1
};
class rV {
  constructor(e, n, i) {
    let r = 0, o = 0, s = 0;
    this.viewports = i.map(({ from: l, to: a }) => {
      let f = n.lineAt(l, $t.ByPos, e, 0, 0).top, c = n.lineAt(a, $t.ByPos, e, 0, 0).bottom;
      return r += c - f, { from: l, to: a, top: f, bottom: c, domTop: 0, domBottom: 0 };
    }), this.scale = (7e6 - r) / (n.height - r);
    for (let l of this.viewports)
      l.domTop = s + (l.top - o) * this.scale, s = l.domBottom = l.domTop + (l.bottom - l.top), o = l.bottom;
  }
  toDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let o = n < this.viewports.length ? this.viewports[n] : null;
      if (!o || e < o.top)
        return r + (e - i) * this.scale;
      if (e <= o.bottom)
        return o.domTop + (e - o.top);
      i = o.bottom, r = o.domBottom;
    }
  }
  fromDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let o = n < this.viewports.length ? this.viewports[n] : null;
      if (!o || e < o.domTop)
        return i + (e - r) / this.scale;
      if (e <= o.domBottom)
        return o.top + (e - o.domTop);
      i = o.bottom, r = o.domBottom;
    }
  }
}
function ca(t, e) {
  if (e.scale == 1)
    return t;
  let n = e.toDOM(t.top), i = e.toDOM(t.bottom);
  return new To(t.from, t.length, n, i - n, Array.isArray(t.type) ? t.type.map((r) => ca(r, e)) : t.type);
}
const Xf = /* @__PURE__ */ Xe.define({ combine: (t) => t.join(" ") }), $p = /* @__PURE__ */ Xe.define({ combine: (t) => t.indexOf(!0) > -1 }), em = /* @__PURE__ */ Ho.newName(), FS = /* @__PURE__ */ Ho.newName(), HS = /* @__PURE__ */ Ho.newName(), WS = { "&light": "." + FS, "&dark": "." + HS };
function tm(t, e, n) {
  return new Ho(e, {
    finish(i) {
      return /&/.test(i) ? i.replace(/&\w*/, (r) => {
        if (r == "&")
          return t;
        if (!n || !n[r])
          throw new RangeError(`Unsupported selector: ${r}`);
        return n[r];
      }) : t + " " + i;
    }
  });
}
const oV = /* @__PURE__ */ tm("." + em, {
  "&.cm-editor": {
    position: "relative !important",
    boxSizing: "border-box",
    "&.cm-focused": {
      outline: "1px dotted #212121"
    },
    display: "flex !important",
    flexDirection: "column"
  },
  ".cm-scroller": {
    display: "flex !important",
    alignItems: "flex-start !important",
    fontFamily: "monospace",
    lineHeight: 1.4,
    height: "100%",
    overflowX: "auto",
    position: "relative",
    zIndex: 0
  },
  ".cm-content": {
    margin: 0,
    flexGrow: 2,
    flexShrink: 0,
    display: "block",
    whiteSpace: "pre",
    wordWrap: "normal",
    boxSizing: "border-box",
    padding: "4px 0",
    outline: "none",
    "&[contenteditable=true]": {
      WebkitUserModify: "read-write-plaintext-only"
    }
  },
  ".cm-lineWrapping": {
    whiteSpace_fallback: "pre-wrap",
    whiteSpace: "break-spaces",
    wordBreak: "break-word",
    overflowWrap: "anywhere",
    flexShrink: 1
  },
  "&light .cm-content": { caretColor: "black" },
  "&dark .cm-content": { caretColor: "white" },
  ".cm-line": {
    display: "block",
    padding: "0 2px 0 6px"
  },
  ".cm-layer": {
    contain: "size style",
    "& > *": {
      position: "absolute"
    }
  },
  "&light .cm-selectionBackground": {
    background: "#d9d9d9"
  },
  "&dark .cm-selectionBackground": {
    background: "#222"
  },
  "&light.cm-focused .cm-selectionBackground": {
    background: "#d7d4f0"
  },
  "&dark.cm-focused .cm-selectionBackground": {
    background: "#233"
  },
  ".cm-cursorLayer": {
    pointerEvents: "none"
  },
  "&.cm-focused .cm-cursorLayer": {
    animation: "steps(1) cm-blink 1.2s infinite"
  },
  "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  ".cm-cursor, .cm-dropCursor": {
    borderLeft: "1.2px solid black",
    marginLeft: "-0.6px",
    pointerEvents: "none"
  },
  ".cm-cursor": {
    display: "none"
  },
  "&dark .cm-cursor": {
    borderLeftColor: "#444"
  },
  "&.cm-focused .cm-cursor": {
    display: "block"
  },
  "&light .cm-activeLine": { backgroundColor: "#cceeff44" },
  "&dark .cm-activeLine": { backgroundColor: "#99eeff33" },
  "&light .cm-specialChar": { color: "red" },
  "&dark .cm-specialChar": { color: "#f78" },
  ".cm-gutters": {
    flexShrink: 0,
    display: "flex",
    height: "100%",
    boxSizing: "border-box",
    left: 0,
    zIndex: 200
  },
  "&light .cm-gutters": {
    backgroundColor: "#f5f5f5",
    color: "#6c6c6c",
    borderRight: "1px solid #ddd"
  },
  "&dark .cm-gutters": {
    backgroundColor: "#333338",
    color: "#ccc"
  },
  ".cm-gutter": {
    display: "flex !important",
    flexDirection: "column",
    flexShrink: 0,
    boxSizing: "border-box",
    minHeight: "100%",
    overflow: "hidden"
  },
  ".cm-gutterElement": {
    boxSizing: "border-box"
  },
  ".cm-lineNumbers .cm-gutterElement": {
    padding: "0 3px 0 5px",
    minWidth: "20px",
    textAlign: "right",
    whiteSpace: "nowrap"
  },
  "&light .cm-activeLineGutter": {
    backgroundColor: "#e2f2ff"
  },
  "&dark .cm-activeLineGutter": {
    backgroundColor: "#222227"
  },
  ".cm-panels": {
    boxSizing: "border-box",
    position: "sticky",
    left: 0,
    right: 0
  },
  "&light .cm-panels": {
    backgroundColor: "#f5f5f5",
    color: "black"
  },
  "&light .cm-panels-top": {
    borderBottom: "1px solid #ddd"
  },
  "&light .cm-panels-bottom": {
    borderTop: "1px solid #ddd"
  },
  "&dark .cm-panels": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tab": {
    display: "inline-block",
    overflow: "hidden",
    verticalAlign: "bottom"
  },
  ".cm-widgetBuffer": {
    verticalAlign: "text-top",
    height: "1em",
    width: 0,
    display: "inline"
  },
  ".cm-placeholder": {
    color: "#888",
    display: "inline-block",
    verticalAlign: "top"
  },
  ".cm-highlightSpace:before": {
    content: "attr(data-display)",
    position: "absolute",
    pointerEvents: "none",
    color: "#888"
  },
  ".cm-highlightTab": {
    backgroundImage: `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,
    backgroundSize: "auto 100%",
    backgroundPosition: "right 90%",
    backgroundRepeat: "no-repeat"
  },
  ".cm-trailingSpace": {
    backgroundColor: "#ff332255"
  },
  ".cm-button": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    padding: ".2em 1em",
    borderRadius: "1px"
  },
  "&light .cm-button": {
    backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
    }
  },
  "&dark .cm-button": {
    backgroundImage: "linear-gradient(#393939, #111)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#111, #333)"
    }
  },
  ".cm-textfield": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    border: "1px solid silver",
    padding: ".2em .5em"
  },
  "&light .cm-textfield": {
    backgroundColor: "white"
  },
  "&dark .cm-textfield": {
    border: "1px solid #555",
    backgroundColor: "inherit"
  }
}, WS);
class sV {
  constructor(e, n, i, r) {
    this.typeOver = r, this.bounds = null, this.text = "";
    let { impreciseHead: o, impreciseAnchor: s } = e.docView;
    if (e.state.readOnly && n > -1)
      this.newSel = null;
    else if (n > -1 && (this.bounds = e.docView.domBoundsAround(n, i, 0))) {
      let l = o || s ? [] : aV(e), a = new ES(l, e.state);
      a.readRange(this.bounds.startDOM, this.bounds.endDOM), this.text = a.text, this.newSel = fV(l, this.bounds.from);
    } else {
      let l = e.observer.selectionRange, a = o && o.node == l.focusNode && o.offset == l.focusOffset || !Ol(e.contentDOM, l.focusNode) ? e.state.selection.main.head : e.docView.posFromDOM(l.focusNode, l.focusOffset), f = s && s.node == l.anchorNode && s.offset == l.anchorOffset || !Ol(e.contentDOM, l.anchorNode) ? e.state.selection.main.anchor : e.docView.posFromDOM(l.anchorNode, l.anchorOffset);
      this.newSel = we.single(f, a);
    }
  }
}
function US(t, e) {
  let n, { newSel: i } = e, r = t.state.selection.main;
  if (e.bounds) {
    let { from: o, to: s } = e.bounds, l = r.from, a = null;
    (t.inputState.lastKeyCode === 8 && t.inputState.lastKeyTime > Date.now() - 100 || Qe.android && e.text.length < s - o) && (l = r.to, a = "end");
    let f = lV(t.state.doc.sliceString(o, s, Oo), e.text, l - o, a);
    f && (Qe.chrome && t.inputState.lastKeyCode == 13 && f.toB == f.from + 2 && e.text.slice(f.from, f.toB) == Oo + Oo && f.toB--, n = {
      from: o + f.from,
      to: o + f.toA,
      insert: jt.of(e.text.slice(f.from, f.toB).split(Oo))
    });
  } else
    i && (!t.hasFocus || !t.state.facet(Oh) || i.main.eq(r)) && (i = null);
  if (!n && !i)
    return !1;
  if (!n && e.typeOver && !r.empty && i && i.main.empty ? n = { from: r.from, to: r.to, insert: t.state.doc.slice(r.from, r.to) } : n && n.from >= r.from && n.to <= r.to && (n.from != r.from || n.to != r.to) && r.to - r.from - (n.to - n.from) <= 4 ? n = {
    from: r.from,
    to: r.to,
    insert: t.state.doc.slice(r.from, n.from).append(n.insert).append(t.state.doc.slice(n.to, r.to))
  } : (Qe.mac || Qe.android) && n && n.from == n.to && n.from == r.head - 1 && /^\. ?$/.test(n.insert.toString()) ? (i && n.insert.length == 2 && (i = we.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: jt.of([" "]) }) : Qe.chrome && n && n.from == n.to && n.from == r.head && n.insert.toString() == `
 ` && t.lineWrapping && (i && (i = we.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: jt.of([" "]) }), n) {
    let o = t.state;
    if (Qe.ios && t.inputState.flushIOSKey(t) || Qe.android && (n.from == r.from && n.to == r.to && n.insert.length == 1 && n.insert.lines == 2 && fl(t.contentDOM, "Enter", 13) || n.from == r.from - 1 && n.to == r.to && n.insert.length == 0 && fl(t.contentDOM, "Backspace", 8) || n.from == r.from && n.to == r.to + 1 && n.insert.length == 0 && fl(t.contentDOM, "Delete", 46)))
      return !0;
    let s = n.insert.toString();
    if (t.state.facet(wS).some((f) => f(t, n.from, n.to, s)))
      return !0;
    t.inputState.composing >= 0 && t.inputState.composing++;
    let l;
    if (n.from >= r.from && n.to <= r.to && n.to - n.from >= (r.to - r.from) / 3 && (!i || i.main.empty && i.main.from == n.from + n.insert.length) && t.inputState.composing < 0) {
      let f = r.from < n.from ? o.sliceDoc(r.from, n.from) : "", c = r.to > n.to ? o.sliceDoc(n.to, r.to) : "";
      l = o.replaceSelection(t.state.toText(f + n.insert.sliceString(0, void 0, t.state.lineBreak) + c));
    } else {
      let f = o.changes(n), c = i && !o.selection.main.eq(i.main) && i.main.to <= f.newLength ? i.main : void 0;
      if (o.selection.ranges.length > 1 && t.inputState.composing >= 0 && n.to <= r.to && n.to >= r.to - 10) {
        let u = t.state.sliceDoc(n.from, n.to), h = PS(t) || t.state.doc.lineAt(r.head), d = r.to - n.to, p = r.to - r.from;
        l = o.changeByRange((g) => {
          if (g.from == r.from && g.to == r.to)
            return { changes: f, range: c || g.map(f) };
          let _ = g.to - d, b = _ - u.length;
          if (g.to - g.from != p || t.state.sliceDoc(b, _) != u || h && g.to >= h.from && g.from <= h.to)
            return { range: g };
          let y = o.changes({ from: b, to: _, insert: n.insert }), v = g.to - r.to;
          return {
            changes: y,
            range: c ? we.range(Math.max(0, c.anchor + v), Math.max(0, c.head + v)) : g.map(y)
          };
        });
      } else
        l = {
          changes: f,
          selection: c && o.selection.replaceRange(c)
        };
    }
    let a = "input.type";
    return t.composing && (a += ".compose", t.inputState.compositionFirstChange && (a += ".start", t.inputState.compositionFirstChange = !1)), t.dispatch(l, { scrollIntoView: !0, userEvent: a }), !0;
  } else if (i && !i.main.eq(r)) {
    let o = !1, s = "select";
    return t.inputState.lastSelectionTime > Date.now() - 50 && (t.inputState.lastSelectionOrigin == "select" && (o = !0), s = t.inputState.lastSelectionOrigin), t.dispatch({ selection: i, scrollIntoView: o, userEvent: s }), !0;
  } else
    return !1;
}
function lV(t, e, n, i) {
  let r = Math.min(t.length, e.length), o = 0;
  for (; o < r && t.charCodeAt(o) == e.charCodeAt(o); )
    o++;
  if (o == r && t.length == e.length)
    return null;
  let s = t.length, l = e.length;
  for (; s > 0 && l > 0 && t.charCodeAt(s - 1) == e.charCodeAt(l - 1); )
    s--, l--;
  if (i == "end") {
    let a = Math.max(0, o - Math.min(s, l));
    n -= s + a - o;
  }
  if (s < o && t.length < e.length) {
    let a = n <= o && n >= s ? o - n : 0;
    o -= a, l = o + (l - s), s = o;
  } else if (l < o) {
    let a = n <= o && n >= l ? o - n : 0;
    o -= a, s = o + (s - l), l = o;
  }
  return { from: o, toA: s, toB: l };
}
function aV(t) {
  let e = [];
  if (t.root.activeElement != t.contentDOM)
    return e;
  let { anchorNode: n, anchorOffset: i, focusNode: r, focusOffset: o } = t.observer.selectionRange;
  return n && (e.push(new W_(n, i)), (r != n || o != i) && e.push(new W_(r, o))), e;
}
function fV(t, e) {
  if (t.length == 0)
    return null;
  let n = t[0].pos, i = t.length == 2 ? t[1].pos : n;
  return n > -1 && i > -1 ? we.single(n + e, i + e) : null;
}
const cV = {
  childList: !0,
  characterData: !0,
  subtree: !0,
  attributes: !0,
  characterDataOldValue: !0
}, Sd = Qe.ie && Qe.ie_version <= 11;
class uV {
  constructor(e) {
    this.view = e, this.active = !1, this.selectionRange = new rz(), this.selectionChanged = !1, this.delayedFlush = -1, this.resizeTimeout = -1, this.queue = [], this.delayedAndroidKey = null, this.flushingAndroidKey = -1, this.lastChange = 0, this.scrollTargets = [], this.intersection = null, this.resizeScroll = null, this.resizeContent = null, this.intersecting = !1, this.gapIntersection = null, this.gaps = [], this.parentCheck = -1, this.dom = e.contentDOM, this.observer = new MutationObserver((n) => {
      for (let i of n)
        this.queue.push(i);
      (Qe.ie && Qe.ie_version <= 11 || Qe.ios && e.composing) && n.some((i) => i.type == "childList" && i.removedNodes.length || i.type == "characterData" && i.oldValue.length > i.target.nodeValue.length) ? this.flushSoon() : this.flush();
    }), Sd && (this.onCharData = (n) => {
      this.queue.push({
        target: n.target,
        type: "characterData",
        oldValue: n.prevValue
      }), this.flushSoon();
    }), this.onSelectionChange = this.onSelectionChange.bind(this), this.onResize = this.onResize.bind(this), this.onPrint = this.onPrint.bind(this), this.onScroll = this.onScroll.bind(this), typeof ResizeObserver == "function" && (this.resizeScroll = new ResizeObserver(() => {
      var n;
      ((n = this.view.docView) === null || n === void 0 ? void 0 : n.lastUpdate) < Date.now() - 75 && this.onResize();
    }), this.resizeScroll.observe(e.scrollDOM), this.resizeContent = new ResizeObserver(() => this.view.requestMeasure()), this.resizeContent.observe(e.contentDOM)), this.addWindowListeners(this.win = e.win), this.start(), typeof IntersectionObserver == "function" && (this.intersection = new IntersectionObserver((n) => {
      this.parentCheck < 0 && (this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3)), n.length > 0 && n[n.length - 1].intersectionRatio > 0 != this.intersecting && (this.intersecting = !this.intersecting, this.intersecting != this.view.inView && this.onScrollChanged(document.createEvent("Event")));
    }, {}), this.intersection.observe(this.dom), this.gapIntersection = new IntersectionObserver((n) => {
      n.length > 0 && n[n.length - 1].intersectionRatio > 0 && this.onScrollChanged(document.createEvent("Event"));
    }, {})), this.listenForScroll(), this.readSelectionRange();
  }
  onScrollChanged(e) {
    this.view.inputState.runScrollHandlers(this.view, e), this.intersecting && this.view.measure();
  }
  onScroll(e) {
    this.intersecting && this.flush(!1), this.onScrollChanged(e);
  }
  onResize() {
    this.resizeTimeout < 0 && (this.resizeTimeout = setTimeout(() => {
      this.resizeTimeout = -1, this.view.requestMeasure();
    }, 50));
  }
  onPrint() {
    this.view.viewState.printing = !0, this.view.measure(), setTimeout(() => {
      this.view.viewState.printing = !1, this.view.requestMeasure();
    }, 500);
  }
  updateGaps(e) {
    if (this.gapIntersection && (e.length != this.gaps.length || this.gaps.some((n, i) => n != e[i]))) {
      this.gapIntersection.disconnect();
      for (let n of e)
        this.gapIntersection.observe(n);
      this.gaps = e;
    }
  }
  onSelectionChange(e) {
    let n = this.selectionChanged;
    if (!this.readSelectionRange() || this.delayedAndroidKey)
      return;
    let { view: i } = this, r = this.selectionRange;
    if (i.state.facet(Oh) ? i.root.activeElement != this.dom : !Cc(i.dom, r))
      return;
    let o = r.anchorNode && i.docView.nearest(r.anchorNode);
    if (o && o.ignoreEvent(e)) {
      n || (this.selectionChanged = !1);
      return;
    }
    (Qe.ie && Qe.ie_version <= 11 || Qe.android && Qe.chrome) && !i.state.selection.main.empty && r.focusNode && cu(r.focusNode, r.focusOffset, r.anchorNode, r.anchorOffset) ? this.flushSoon() : this.flush(!1);
  }
  readSelectionRange() {
    let { view: e } = this, n = Qe.safari && e.root.nodeType == 11 && ez(this.dom.ownerDocument) == this.dom && hV(this.view) || fu(e.root);
    if (!n || this.selectionRange.eq(n))
      return !1;
    let i = Cc(this.dom, n);
    return i && !this.selectionChanged && e.inputState.lastFocusTime > Date.now() - 200 && e.inputState.lastTouchTime < Date.now() - 300 && sz(this.dom, n) ? (this.view.inputState.lastFocusTime = 0, e.docView.updateSelection(), !1) : (this.selectionRange.setRange(n), i && (this.selectionChanged = !0), !0);
  }
  setSelectionRange(e, n) {
    this.selectionRange.set(e.node, e.offset, n.node, n.offset), this.selectionChanged = !1;
  }
  clearSelectionRange() {
    this.selectionRange.set(null, 0, null, 0);
  }
  listenForScroll() {
    this.parentCheck = -1;
    let e = 0, n = null;
    for (let i = this.dom; i; )
      if (i.nodeType == 1)
        !n && e < this.scrollTargets.length && this.scrollTargets[e] == i ? e++ : n || (n = this.scrollTargets.slice(0, e)), n && n.push(i), i = i.assignedSlot || i.parentNode;
      else if (i.nodeType == 11)
        i = i.host;
      else
        break;
    if (e < this.scrollTargets.length && !n && (n = this.scrollTargets.slice(0, e)), n) {
      for (let i of this.scrollTargets)
        i.removeEventListener("scroll", this.onScroll);
      for (let i of this.scrollTargets = n)
        i.addEventListener("scroll", this.onScroll);
    }
  }
  ignore(e) {
    if (!this.active)
      return e();
    try {
      return this.stop(), e();
    } finally {
      this.start(), this.clear();
    }
  }
  start() {
    this.active || (this.observer.observe(this.dom, cV), Sd && this.dom.addEventListener("DOMCharacterDataModified", this.onCharData), this.active = !0);
  }
  stop() {
    this.active && (this.active = !1, this.observer.disconnect(), Sd && this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData));
  }
  clear() {
    this.processRecords(), this.queue.length = 0, this.selectionChanged = !1;
  }
  delayAndroidKey(e, n) {
    var i;
    if (!this.delayedAndroidKey) {
      let r = () => {
        let o = this.delayedAndroidKey;
        o && (this.clearDelayedAndroidKey(), !this.flush() && o.force && fl(this.dom, o.key, o.keyCode));
      };
      this.flushingAndroidKey = this.view.win.requestAnimationFrame(r);
    }
    (!this.delayedAndroidKey || e == "Enter") && (this.delayedAndroidKey = {
      key: e,
      keyCode: n,
      force: this.lastChange < Date.now() - 50 || !!(!((i = this.delayedAndroidKey) === null || i === void 0) && i.force)
    });
  }
  clearDelayedAndroidKey() {
    this.win.cancelAnimationFrame(this.flushingAndroidKey), this.delayedAndroidKey = null, this.flushingAndroidKey = -1;
  }
  flushSoon() {
    this.delayedFlush < 0 && (this.delayedFlush = this.view.win.requestAnimationFrame(() => {
      this.delayedFlush = -1, this.flush();
    }));
  }
  forceFlush() {
    this.delayedFlush >= 0 && (this.view.win.cancelAnimationFrame(this.delayedFlush), this.delayedFlush = -1), this.flush();
  }
  processRecords() {
    let e = this.queue;
    for (let o of this.observer.takeRecords())
      e.push(o);
    e.length && (this.queue = []);
    let n = -1, i = -1, r = !1;
    for (let o of e) {
      let s = this.readMutation(o);
      s && (s.typeOver && (r = !0), n == -1 ? { from: n, to: i } = s : (n = Math.min(s.from, n), i = Math.max(s.to, i)));
    }
    return { from: n, to: i, typeOver: r };
  }
  readChange() {
    let { from: e, to: n, typeOver: i } = this.processRecords(), r = this.selectionChanged && Cc(this.dom, this.selectionRange);
    return e < 0 && !r ? null : (e > -1 && (this.lastChange = Date.now()), this.view.inputState.lastFocusTime = 0, this.selectionChanged = !1, new sV(this.view, e, n, i));
  }
  flush(e = !0) {
    if (this.delayedFlush >= 0 || this.delayedAndroidKey)
      return !1;
    e && this.readSelectionRange();
    let n = this.readChange();
    if (!n)
      return !1;
    let i = this.view.state, r = US(this.view, n);
    return this.view.state == i && this.view.update([]), r;
  }
  readMutation(e) {
    let n = this.view.docView.nearest(e.target);
    if (!n || n.ignoreMutation(e))
      return null;
    if (n.markDirty(e.type == "attributes"), e.type == "attributes" && (n.dirty |= 4), e.type == "childList") {
      let i = fy(n, e.previousSibling || e.target.previousSibling, -1), r = fy(n, e.nextSibling || e.target.nextSibling, 1);
      return {
        from: i ? n.posAfter(i) : n.posAtStart,
        to: r ? n.posBefore(r) : n.posAtEnd,
        typeOver: !1
      };
    } else
      return e.type == "characterData" ? { from: n.posAtStart, to: n.posAtEnd, typeOver: e.target.nodeValue == e.oldValue } : null;
  }
  setWindow(e) {
    e != this.win && (this.removeWindowListeners(this.win), this.win = e, this.addWindowListeners(this.win));
  }
  addWindowListeners(e) {
    e.addEventListener("resize", this.onResize), e.addEventListener("beforeprint", this.onPrint), e.addEventListener("scroll", this.onScroll), e.document.addEventListener("selectionchange", this.onSelectionChange);
  }
  removeWindowListeners(e) {
    e.removeEventListener("scroll", this.onScroll), e.removeEventListener("resize", this.onResize), e.removeEventListener("beforeprint", this.onPrint), e.document.removeEventListener("selectionchange", this.onSelectionChange);
  }
  destroy() {
    var e, n, i, r;
    this.stop(), (e = this.intersection) === null || e === void 0 || e.disconnect(), (n = this.gapIntersection) === null || n === void 0 || n.disconnect(), (i = this.resizeScroll) === null || i === void 0 || i.disconnect(), (r = this.resizeContent) === null || r === void 0 || r.disconnect();
    for (let o of this.scrollTargets)
      o.removeEventListener("scroll", this.onScroll);
    this.removeWindowListeners(this.win), clearTimeout(this.parentCheck), clearTimeout(this.resizeTimeout), this.win.cancelAnimationFrame(this.delayedFlush), this.win.cancelAnimationFrame(this.flushingAndroidKey);
  }
}
function fy(t, e, n) {
  for (; e; ) {
    let i = nn.get(e);
    if (i && i.parent == t)
      return i;
    let r = e.parentNode;
    e = r != t.dom ? r : n > 0 ? e.nextSibling : e.previousSibling;
  }
  return null;
}
function hV(t) {
  let e = null;
  function n(a) {
    a.preventDefault(), a.stopImmediatePropagation(), e = a.getTargetRanges()[0];
  }
  if (t.contentDOM.addEventListener("beforeinput", n, !0), t.dom.ownerDocument.execCommand("indent"), t.contentDOM.removeEventListener("beforeinput", n, !0), !e)
    return null;
  let i = e.startContainer, r = e.startOffset, o = e.endContainer, s = e.endOffset, l = t.docView.domAtPos(t.state.selection.main.anchor);
  return cu(l.node, l.offset, o, s) && ([i, r, o, s] = [o, s, i, r]), { anchorNode: i, anchorOffset: r, focusNode: o, focusOffset: s };
}
class Ge {
  constructor(e = {}) {
    this.plugins = [], this.pluginMap = /* @__PURE__ */ new Map(), this.editorAttrs = {}, this.contentAttrs = {}, this.bidiCache = [], this.destroyed = !1, this.updateState = 2, this.measureScheduled = -1, this.measureRequests = [], this.contentDOM = document.createElement("div"), this.scrollDOM = document.createElement("div"), this.scrollDOM.tabIndex = -1, this.scrollDOM.className = "cm-scroller", this.scrollDOM.appendChild(this.contentDOM), this.announceDOM = document.createElement("div"), this.announceDOM.style.cssText = "position: fixed; top: -10000px", this.announceDOM.setAttribute("aria-live", "polite"), this.dom = document.createElement("div"), this.dom.appendChild(this.announceDOM), this.dom.appendChild(this.scrollDOM), this._dispatch = e.dispatch || ((n) => this.update([n])), this.dispatch = this.dispatch.bind(this), this._root = e.root || oz(e.parent) || document, this.viewState = new ly(e.state || St.create(e)), this.plugins = this.state.facet(aa).map((n) => new wd(n));
    for (let n of this.plugins)
      n.update(this);
    this.observer = new uV(this), this.inputState = new Dz(this), this.inputState.ensureHandlers(this, this.plugins), this.docView = new U_(this), this.mountStyles(), this.updateAttrs(), this.updateState = 0, this.requestMeasure(), e.parent && e.parent.appendChild(this.dom);
  }
  get state() {
    return this.viewState.state;
  }
  get viewport() {
    return this.viewState.viewport;
  }
  get visibleRanges() {
    return this.viewState.visibleRanges;
  }
  get inView() {
    return this.viewState.inView;
  }
  get composing() {
    return this.inputState.composing > 0;
  }
  get compositionStarted() {
    return this.inputState.composing >= 0;
  }
  get root() {
    return this._root;
  }
  get win() {
    return this.dom.ownerDocument.defaultView || window;
  }
  dispatch(...e) {
    this._dispatch(e.length == 1 && e[0] instanceof Bn ? e[0] : this.state.update(...e));
  }
  update(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
    let n = !1, i = !1, r, o = this.state;
    for (let f of e) {
      if (f.startState != o)
        throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
      o = f.state;
    }
    if (this.destroyed) {
      this.viewState.state = o;
      return;
    }
    let s = this.observer.delayedAndroidKey, l = null;
    if (s ? (this.observer.clearDelayedAndroidKey(), l = this.observer.readChange(), (l && !this.state.doc.eq(o.doc) || !this.state.selection.eq(o.selection)) && (l = null)) : this.observer.clear(), o.facet(St.phrases) != this.state.facet(St.phrases))
      return this.setState(o);
    r = du.create(this, o, e);
    let a = this.viewState.scrollTarget;
    try {
      this.updateState = 2;
      for (let f of e) {
        if (a && (a = a.map(f.changes)), f.scrollIntoView) {
          let { main: c } = f.state.selection;
          a = new hu(c.empty ? c : we.cursor(c.head, c.head > c.anchor ? -1 : 1));
        }
        for (let c of f.effects)
          c.is(F_) && (a = c.value);
      }
      this.viewState.update(r, a), this.bidiCache = pu.update(this.bidiCache, r.changes), r.empty || (this.updatePlugins(r), this.inputState.update(r)), n = this.docView.update(r), this.state.facet(fa) != this.styleModules && this.mountStyles(), i = this.updateAttrs(), this.showAnnouncements(e), this.docView.updateSelection(n, e.some((f) => f.isUserEvent("select.pointer")));
    } finally {
      this.updateState = 0;
    }
    if (r.startState.facet(Xf) != r.state.facet(Xf) && (this.viewState.mustMeasureContent = !0), (n || i || a || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent) && this.requestMeasure(), !r.empty)
      for (let f of this.state.facet(Kp))
        f(r);
    l && !US(this, l) && s.force && fl(this.contentDOM, s.key, s.keyCode);
  }
  setState(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
    if (this.destroyed) {
      this.viewState.state = e;
      return;
    }
    this.updateState = 2;
    let n = this.hasFocus;
    try {
      for (let i of this.plugins)
        i.destroy(this);
      this.viewState = new ly(e), this.plugins = e.facet(aa).map((i) => new wd(i)), this.pluginMap.clear();
      for (let i of this.plugins)
        i.update(this);
      this.docView = new U_(this), this.inputState.ensureHandlers(this, this.plugins), this.mountStyles(), this.updateAttrs(), this.bidiCache = [];
    } finally {
      this.updateState = 0;
    }
    n && this.focus(), this.requestMeasure();
  }
  updatePlugins(e) {
    let n = e.startState.facet(aa), i = e.state.facet(aa);
    if (n != i) {
      let r = [];
      for (let o of i) {
        let s = n.indexOf(o);
        if (s < 0)
          r.push(new wd(o));
        else {
          let l = this.plugins[s];
          l.mustUpdate = e, r.push(l);
        }
      }
      for (let o of this.plugins)
        o.mustUpdate != e && o.destroy(this);
      this.plugins = r, this.pluginMap.clear(), this.inputState.ensureHandlers(this, this.plugins);
    } else
      for (let r of this.plugins)
        r.mustUpdate = e;
    for (let r = 0; r < this.plugins.length; r++)
      this.plugins[r].update(this);
  }
  measure(e = !0) {
    if (this.destroyed)
      return;
    this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.measureScheduled = 0, e && this.observer.forceFlush();
    let n = null, { scrollHeight: i, scrollTop: r, clientHeight: o } = this.scrollDOM, s = r > i - o - 4 ? i : r;
    try {
      for (let l = 0; ; l++) {
        this.updateState = 1;
        let a = this.viewport, f = this.viewState.lineBlockAtHeight(s), c = this.viewState.measure(this);
        if (!c && !this.measureRequests.length && this.viewState.scrollTarget == null)
          break;
        if (l > 5) {
          console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
          break;
        }
        let u = [];
        c & 4 || ([this.measureRequests, u] = [u, this.measureRequests]);
        let h = u.map((_) => {
          try {
            return _.read(this);
          } catch (b) {
            return Ti(this.state, b), cy;
          }
        }), d = du.create(this, this.state, []), p = !1, g = !1;
        d.flags |= c, n ? n.flags |= c : n = d, this.updateState = 2, d.empty || (this.updatePlugins(d), this.inputState.update(d), this.updateAttrs(), p = this.docView.update(d));
        for (let _ = 0; _ < u.length; _++)
          if (h[_] != cy)
            try {
              let b = u[_];
              b.write && b.write(h[_], this);
            } catch (b) {
              Ti(this.state, b);
            }
        if (this.viewState.editorHeight)
          if (this.viewState.scrollTarget)
            this.docView.scrollIntoView(this.viewState.scrollTarget), this.viewState.scrollTarget = null, g = !0;
          else {
            let _ = this.viewState.lineBlockAt(f.from).top - f.top;
            (_ > 1 || _ < -1) && (this.scrollDOM.scrollTop += _, g = !0);
          }
        if (p && this.docView.updateSelection(!0), this.viewport.from == a.from && this.viewport.to == a.to && !g && this.measureRequests.length == 0)
          break;
      }
    } finally {
      this.updateState = 0, this.measureScheduled = -1;
    }
    if (n && !n.empty)
      for (let l of this.state.facet(Kp))
        l(n);
  }
  get themeClasses() {
    return em + " " + (this.state.facet($p) ? HS : FS) + " " + this.state.facet(Xf);
  }
  updateAttrs() {
    let e = uy(this, CS, {
      class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
    }), n = {
      spellcheck: "false",
      autocorrect: "off",
      autocapitalize: "off",
      translate: "no",
      contenteditable: this.state.facet(Oh) ? "true" : "false",
      class: "cm-content",
      style: `${Qe.tabSize}: ${this.state.tabSize}`,
      role: "textbox",
      "aria-multiline": "true"
    };
    this.state.readOnly && (n["aria-readonly"] = "true"), uy(this, Mg, n);
    let i = this.observer.ignore(() => {
      let r = qp(this.contentDOM, this.contentAttrs, n), o = qp(this.dom, this.editorAttrs, e);
      return r || o;
    });
    return this.editorAttrs = e, this.contentAttrs = n, i;
  }
  showAnnouncements(e) {
    let n = !0;
    for (let i of e)
      for (let r of i.effects)
        if (r.is(Ge.announce)) {
          n && (this.announceDOM.textContent = ""), n = !1;
          let o = this.announceDOM.appendChild(document.createElement("div"));
          o.textContent = r.value;
        }
  }
  mountStyles() {
    this.styleModules = this.state.facet(fa), Ho.mount(this.root, this.styleModules.concat(oV).reverse());
  }
  readMeasured() {
    if (this.updateState == 2)
      throw new Error("Reading the editor layout isn't allowed during an update");
    this.updateState == 0 && this.measureScheduled > -1 && this.measure(!1);
  }
  requestMeasure(e) {
    if (this.measureScheduled < 0 && (this.measureScheduled = this.win.requestAnimationFrame(() => this.measure())), e) {
      if (e.key != null) {
        for (let n = 0; n < this.measureRequests.length; n++)
          if (this.measureRequests[n].key === e.key) {
            this.measureRequests[n] = e;
            return;
          }
      }
      this.measureRequests.push(e);
    }
  }
  plugin(e) {
    let n = this.pluginMap.get(e);
    return (n === void 0 || n && n.spec != e) && this.pluginMap.set(e, n = this.plugins.find((i) => i.spec == e) || null), n && n.update(this).value;
  }
  get documentTop() {
    return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
  }
  get documentPadding() {
    return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };
  }
  elementAtHeight(e) {
    return this.readMeasured(), this.viewState.elementAtHeight(e);
  }
  lineBlockAtHeight(e) {
    return this.readMeasured(), this.viewState.lineBlockAtHeight(e);
  }
  get viewportLineBlocks() {
    return this.viewState.viewportLines;
  }
  lineBlockAt(e) {
    return this.viewState.lineBlockAt(e);
  }
  get contentHeight() {
    return this.viewState.contentHeight;
  }
  moveByChar(e, n, i) {
    return kd(this, e, Q_(this, e, n, i));
  }
  moveByGroup(e, n) {
    return kd(this, e, Q_(this, e, n, (i) => Iz(this, e.head, i)));
  }
  moveToLineBoundary(e, n, i = !0) {
    return Rz(this, e, n, i);
  }
  moveVertically(e, n, i) {
    return kd(this, e, Nz(this, e, n, i));
  }
  domAtPos(e) {
    return this.docView.domAtPos(e);
  }
  posAtDOM(e, n = 0) {
    return this.docView.posFromDOM(e, n);
  }
  posAtCoords(e, n = !0) {
    return this.readMeasured(), IS(this, e, n);
  }
  coordsAtPos(e, n = 1) {
    this.readMeasured();
    let i = this.docView.coordsAt(e, n);
    if (!i || i.left == i.right)
      return i;
    let r = this.state.doc.lineAt(e), o = this.bidiSpans(r), s = o[cl.find(o, e - r.from, -1, n)];
    return vg(i, s.dir == pn.LTR == n > 0);
  }
  get defaultCharacterWidth() {
    return this.viewState.heightOracle.charWidth;
  }
  get defaultLineHeight() {
    return this.viewState.heightOracle.lineHeight;
  }
  get textDirection() {
    return this.viewState.defaultTextDirection;
  }
  textDirectionAt(e) {
    return !this.state.facet(vS) || e < this.viewport.from || e > this.viewport.to ? this.textDirection : (this.readMeasured(), this.docView.textDirectionAt(e));
  }
  get lineWrapping() {
    return this.viewState.heightOracle.lineWrapping;
  }
  bidiSpans(e) {
    if (e.length > dV)
      return OS(e.length);
    let n = this.textDirectionAt(e.from);
    for (let r of this.bidiCache)
      if (r.from == e.from && r.dir == n)
        return r.order;
    let i = bz(e.text, n);
    return this.bidiCache.push(new pu(e.from, e.to, n, i)), i;
  }
  get hasFocus() {
    var e;
    return (this.dom.ownerDocument.hasFocus() || Qe.safari && ((e = this.inputState) === null || e === void 0 ? void 0 : e.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;
  }
  focus() {
    this.observer.ignore(() => {
      iS(this.contentDOM), this.docView.updateSelection();
    });
  }
  setRoot(e) {
    this._root != e && (this._root = e, this.observer.setWindow((e.nodeType == 9 ? e : e.ownerDocument).defaultView || window), this.mountStyles());
  }
  destroy() {
    for (let e of this.plugins)
      e.destroy(this);
    this.plugins = [], this.inputState.destroy(), this.dom.remove(), this.observer.destroy(), this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.destroyed = !0;
  }
  static scrollIntoView(e, n = {}) {
    return F_.of(new hu(typeof e == "number" ? we.cursor(e) : e, n.y, n.x, n.yMargin, n.xMargin));
  }
  static domEventHandlers(e) {
    return Rn.define(() => ({}), { eventHandlers: e });
  }
  static theme(e, n) {
    let i = Ho.newName(), r = [Xf.of(i), fa.of(tm(`.${i}`, e))];
    return n && n.dark && r.push($p.of(!0)), r;
  }
  static baseTheme(e) {
    return ql.lowest(fa.of(tm("." + em, e, WS)));
  }
  static findFromDOM(e) {
    var n;
    let i = e.querySelector(".cm-content"), r = i && nn.get(i) || nn.get(e);
    return ((n = r == null ? void 0 : r.rootView) === null || n === void 0 ? void 0 : n.view) || null;
  }
}
Ge.styleModule = fa;
Ge.inputHandler = wS;
Ge.perLineTextDirection = vS;
Ge.exceptionSink = yS;
Ge.updateListener = Kp;
Ge.editable = Oh;
Ge.mouseSelectionStyle = _S;
Ge.dragMovesSelection = bS;
Ge.clickAddsSelectionRange = gS;
Ge.decorations = Ja;
Ge.atomicRanges = SS;
Ge.scrollMargins = MS;
Ge.darkTheme = $p;
Ge.contentAttributes = Mg;
Ge.editorAttributes = CS;
Ge.lineWrapping = /* @__PURE__ */ Ge.contentAttributes.of({ class: "cm-lineWrapping" });
Ge.announce = /* @__PURE__ */ gt.define();
const dV = 4096, cy = {};
class pu {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.dir = i, this.order = r;
  }
  static update(e, n) {
    if (n.empty)
      return e;
    let i = [], r = e.length ? e[e.length - 1].dir : pn.LTR;
    for (let o = Math.max(0, e.length - 10); o < e.length; o++) {
      let s = e[o];
      s.dir == r && !n.touchesRange(s.from, s.to) && i.push(new pu(n.mapPos(s.from, 1), n.mapPos(s.to, -1), s.dir, s.order));
    }
    return i;
  }
}
function uy(t, e, n) {
  for (let i = t.state.facet(e), r = i.length - 1; r >= 0; r--) {
    let o = i[r], s = typeof o == "function" ? o(t) : o;
    s && Up(s, n);
  }
  return n;
}
const pV = Qe.mac ? "mac" : Qe.windows ? "win" : Qe.linux ? "linux" : "key";
function mV(t, e) {
  const n = t.split(/-(?!$)/);
  let i = n[n.length - 1];
  i == "Space" && (i = " ");
  let r, o, s, l;
  for (let a = 0; a < n.length - 1; ++a) {
    const f = n[a];
    if (/^(cmd|meta|m)$/i.test(f))
      l = !0;
    else if (/^a(lt)?$/i.test(f))
      r = !0;
    else if (/^(c|ctrl|control)$/i.test(f))
      o = !0;
    else if (/^s(hift)?$/i.test(f))
      s = !0;
    else if (/^mod$/i.test(f))
      e == "mac" ? l = !0 : o = !0;
    else
      throw new Error("Unrecognized modifier name: " + f);
  }
  return r && (i = "Alt-" + i), o && (i = "Ctrl-" + i), l && (i = "Meta-" + i), s && (i = "Shift-" + i), i;
}
function Qf(t, e, n) {
  return e.altKey && (t = "Alt-" + t), e.ctrlKey && (t = "Ctrl-" + t), e.metaKey && (t = "Meta-" + t), n !== !1 && e.shiftKey && (t = "Shift-" + t), t;
}
const gV = /* @__PURE__ */ ql.default(/* @__PURE__ */ Ge.domEventHandlers({
  keydown(t, e) {
    return JS(qS(e.state), t, e, "editor");
  }
})), Th = /* @__PURE__ */ Xe.define({ enables: gV }), hy = /* @__PURE__ */ new WeakMap();
function qS(t) {
  let e = t.facet(Th), n = hy.get(e);
  return n || hy.set(e, n = yV(e.reduce((i, r) => i.concat(r), []))), n;
}
function bV(t, e, n) {
  return JS(qS(t.state), e, t, n);
}
let Co = null;
const _V = 4e3;
function yV(t, e = pV) {
  let n = /* @__PURE__ */ Object.create(null), i = /* @__PURE__ */ Object.create(null), r = (s, l) => {
    let a = i[s];
    if (a == null)
      i[s] = l;
    else if (a != l)
      throw new Error("Key binding " + s + " is used both as a regular binding and as a multi-stroke prefix");
  }, o = (s, l, a, f) => {
    var c, u;
    let h = n[s] || (n[s] = /* @__PURE__ */ Object.create(null)), d = l.split(/ (?!$)/).map((_) => mV(_, e));
    for (let _ = 1; _ < d.length; _++) {
      let b = d.slice(0, _).join(" ");
      r(b, !0), h[b] || (h[b] = {
        preventDefault: !0,
        run: [(y) => {
          let v = Co = { view: y, prefix: b, scope: s };
          return setTimeout(() => {
            Co == v && (Co = null);
          }, _V), !0;
        }]
      });
    }
    let p = d.join(" ");
    r(p, !1);
    let g = h[p] || (h[p] = { preventDefault: !1, run: ((u = (c = h._any) === null || c === void 0 ? void 0 : c.run) === null || u === void 0 ? void 0 : u.slice()) || [] });
    a && g.run.push(a), f && (g.preventDefault = !0);
  };
  for (let s of t) {
    let l = s.scope ? s.scope.split(" ") : ["editor"];
    if (s.any)
      for (let f of l) {
        let c = n[f] || (n[f] = /* @__PURE__ */ Object.create(null));
        c._any || (c._any = { preventDefault: !1, run: [] });
        for (let u in c)
          c[u].run.push(s.any);
      }
    let a = s[e] || s.key;
    if (a)
      for (let f of l)
        o(f, a, s.run, s.preventDefault), s.shift && o(f, "Shift-" + a, s.shift, s.preventDefault);
  }
  return n;
}
function JS(t, e, n, i) {
  let r = $x(e), o = Xn(r, 0), s = Mi(o) == r.length && r != " ", l = "", a = !1;
  Co && Co.view == n && Co.scope == i && (l = Co.prefix + " ", (a = DS.indexOf(e.keyCode) < 0) && (Co = null));
  let f = /* @__PURE__ */ new Set(), c = (p) => {
    if (p) {
      for (let g of p.run)
        if (!f.has(g) && (f.add(g), g(n, e)))
          return !0;
      p.preventDefault && (a = !0);
    }
    return !1;
  }, u = t[i], h, d;
  if (u) {
    if (c(u[l + Qf(r, e, !s)]))
      return !0;
    if (s && (e.altKey || e.metaKey || e.ctrlKey) && (h = Wo[e.keyCode]) && h != r) {
      if (c(u[l + Qf(h, e, !0)]))
        return !0;
      if (e.shiftKey && (d = Wa[e.keyCode]) != r && d != h && c(u[l + Qf(d, e, !1)]))
        return !0;
    } else if (s && e.shiftKey && c(u[l + Qf(r, e, !0)]))
      return !0;
    if (c(u._any))
      return !0;
  }
  return a;
}
class bf {
  constructor(e, n, i, r, o) {
    this.className = e, this.left = n, this.top = i, this.width = r, this.height = o;
  }
  draw() {
    let e = document.createElement("div");
    return e.className = this.className, this.adjust(e), e;
  }
  update(e, n) {
    return n.className != this.className ? !1 : (this.adjust(e), !0);
  }
  adjust(e) {
    e.style.left = this.left + "px", e.style.top = this.top + "px", this.width != null && (e.style.width = this.width + "px"), e.style.height = this.height + "px";
  }
  eq(e) {
    return this.left == e.left && this.top == e.top && this.width == e.width && this.height == e.height && this.className == e.className;
  }
  static forRange(e, n, i) {
    if (i.empty) {
      let r = e.coordsAtPos(i.head, i.assoc || 1);
      if (!r)
        return [];
      let o = KS(e);
      return [new bf(n, r.left - o.left, r.top - o.top, null, r.bottom - r.top)];
    } else
      return wV(e, n, i);
  }
}
function KS(t) {
  let e = t.scrollDOM.getBoundingClientRect();
  return { left: (t.textDirection == pn.LTR ? e.left : e.right - t.scrollDOM.clientWidth) - t.scrollDOM.scrollLeft, top: e.top - t.scrollDOM.scrollTop };
}
function dy(t, e, n) {
  let i = we.cursor(e);
  return {
    from: Math.max(n.from, t.moveToLineBoundary(i, !1, !0).from),
    to: Math.min(n.to, t.moveToLineBoundary(i, !0, !0).from),
    type: Yt.Text
  };
}
function py(t, e) {
  let n = t.lineBlockAt(e);
  if (Array.isArray(n.type)) {
    for (let i of n.type)
      if (i.to > e || i.to == e && (i.to == n.to || i.type == Yt.Text))
        return i;
  }
  return n;
}
function wV(t, e, n) {
  if (n.to <= t.viewport.from || n.from >= t.viewport.to)
    return [];
  let i = Math.max(n.from, t.viewport.from), r = Math.min(n.to, t.viewport.to), o = t.textDirection == pn.LTR, s = t.contentDOM, l = s.getBoundingClientRect(), a = KS(t), f = window.getComputedStyle(s.firstChild), c = l.left + parseInt(f.paddingLeft) + Math.min(0, parseInt(f.textIndent)), u = l.right - parseInt(f.paddingRight), h = py(t, i), d = py(t, r), p = h.type == Yt.Text ? h : null, g = d.type == Yt.Text ? d : null;
  if (t.lineWrapping && (p && (p = dy(t, i, p)), g && (g = dy(t, r, g))), p && g && p.from == g.from)
    return b(y(n.from, n.to, p));
  {
    let M = p ? y(n.from, null, p) : v(h, !1), A = g ? y(null, n.to, g) : v(d, !0), P = [];
    return (p || h).to < (g || d).from - 1 ? P.push(_(c, M.bottom, u, A.top)) : M.bottom < A.top && t.elementAtHeight((M.bottom + A.top) / 2).type == Yt.Text && (M.bottom = A.top = (M.bottom + A.top) / 2), b(M).concat(P).concat(b(A));
  }
  function _(M, A, P, S) {
    return new bf(e, M - a.left, A - a.top - 0.01, P - M, S - A + 0.01);
  }
  function b({ top: M, bottom: A, horizontal: P }) {
    let S = [];
    for (let D = 0; D < P.length; D += 2)
      S.push(_(P[D], M, P[D + 1], A));
    return S;
  }
  function y(M, A, P) {
    let S = 1e9, D = -1e9, x = [];
    function V(U, C, L, I, H) {
      let N = t.coordsAtPos(U, U == P.to ? -2 : 2), T = t.coordsAtPos(L, L == P.from ? 2 : -2);
      S = Math.min(N.top, T.top, S), D = Math.max(N.bottom, T.bottom, D), H == pn.LTR ? x.push(o && C ? c : N.left, o && I ? u : T.right) : x.push(!o && I ? c : T.left, !o && C ? u : N.right);
    }
    let R = M ?? P.from, W = A ?? P.to;
    for (let U of t.visibleRanges)
      if (U.to > R && U.from < W)
        for (let C = Math.max(U.from, R), L = Math.min(U.to, W); ; ) {
          let I = t.state.doc.lineAt(C);
          for (let H of t.bidiSpans(I)) {
            let N = H.from + I.from, T = H.to + I.from;
            if (N >= L)
              break;
            T > C && V(Math.max(N, C), M == null && N <= R, Math.min(T, L), A == null && T >= W, H.dir);
          }
          if (C = I.to + 1, C >= L)
            break;
        }
    return x.length == 0 && V(R, M == null, W, A == null, t.textDirection), { top: S, bottom: D, horizontal: x };
  }
  function v(M, A) {
    let P = l.top + (A ? M.top : M.bottom);
    return { top: P, bottom: P, horizontal: [] };
  }
}
function vV(t, e) {
  return t.constructor == e.constructor && t.eq(e);
}
class kV {
  constructor(e, n) {
    this.view = e, this.layer = n, this.drawn = [], this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) }, this.dom = e.scrollDOM.appendChild(document.createElement("div")), this.dom.classList.add("cm-layer"), n.above && this.dom.classList.add("cm-layer-above"), n.class && this.dom.classList.add(n.class), this.dom.setAttribute("aria-hidden", "true"), this.setOrder(e.state), e.requestMeasure(this.measureReq), n.mount && n.mount(this.dom, e);
  }
  update(e) {
    e.startState.facet(Mc) != e.state.facet(Mc) && this.setOrder(e.state), (this.layer.update(e, this.dom) || e.geometryChanged) && e.view.requestMeasure(this.measureReq);
  }
  setOrder(e) {
    let n = 0, i = e.facet(Mc);
    for (; n < i.length && i[n] != this.layer; )
      n++;
    this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - n);
  }
  measure() {
    return this.layer.markers(this.view);
  }
  draw(e) {
    if (e.length != this.drawn.length || e.some((n, i) => !vV(n, this.drawn[i]))) {
      let n = this.dom.firstChild, i = 0;
      for (let r of e)
        r.update && n && r.constructor && this.drawn[i].constructor && r.update(n, this.drawn[i]) ? (n = n.nextSibling, i++) : this.dom.insertBefore(r.draw(), n);
      for (; n; ) {
        let r = n.nextSibling;
        n.remove(), n = r;
      }
      this.drawn = e;
    }
  }
  destroy() {
    this.layer.destroy && this.layer.destroy(this.dom, this.view), this.dom.remove();
  }
}
const Mc = /* @__PURE__ */ Xe.define();
function GS(t) {
  return [
    Rn.define((e) => new kV(e, t)),
    Mc.of(t)
  ];
}
const XS = !Qe.ios, Ka = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      cursorBlinkRate: 1200,
      drawRangeCursor: !0
    }, {
      cursorBlinkRate: (e, n) => Math.min(e, n),
      drawRangeCursor: (e, n) => e || n
    });
  }
});
function CV(t = {}) {
  return [
    Ka.of(t),
    SV,
    MV,
    AV,
    kS.of(!0)
  ];
}
function QS(t) {
  return t.startState.facet(Ka) != t.startState.facet(Ka);
}
const SV = /* @__PURE__ */ GS({
  above: !0,
  markers(t) {
    let { state: e } = t, n = e.facet(Ka), i = [];
    for (let r of e.selection.ranges) {
      let o = r == e.selection.main;
      if (r.empty ? !o || XS : n.drawRangeCursor) {
        let s = o ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary", l = r.empty ? r : we.cursor(r.head, r.head > r.anchor ? -1 : 1);
        for (let a of bf.forRange(t, s, l))
          i.push(a);
      }
    }
    return i;
  },
  update(t, e) {
    t.transactions.some((i) => i.scrollIntoView) && (e.style.animationName = e.style.animationName == "cm-blink" ? "cm-blink2" : "cm-blink");
    let n = QS(t);
    return n && my(t.state, e), t.docChanged || t.selectionSet || n;
  },
  mount(t, e) {
    my(e.state, t);
  },
  class: "cm-cursorLayer"
});
function my(t, e) {
  e.style.animationDuration = t.facet(Ka).cursorBlinkRate + "ms";
}
const MV = /* @__PURE__ */ GS({
  above: !1,
  markers(t) {
    return t.state.selection.ranges.map((e) => e.empty ? [] : bf.forRange(t, "cm-selectionBackground", e)).reduce((e, n) => e.concat(n));
  },
  update(t, e) {
    return t.docChanged || t.selectionSet || t.viewportChanged || QS(t);
  },
  class: "cm-selectionLayer"
}), YS = {
  ".cm-line": {
    "& ::selection": { backgroundColor: "transparent !important" },
    "&::selection": { backgroundColor: "transparent !important" }
  }
};
XS && (YS[".cm-line"].caretColor = "transparent !important");
const AV = /* @__PURE__ */ ql.highest(/* @__PURE__ */ Ge.theme(YS)), ZS = /* @__PURE__ */ gt.define({
  map(t, e) {
    return t == null ? null : e.mapPos(t);
  }
}), ua = /* @__PURE__ */ xn.define({
  create() {
    return null;
  },
  update(t, e) {
    return t != null && (t = e.changes.mapPos(t)), e.effects.reduce((n, i) => i.is(ZS) ? i.value : n, t);
  }
}), OV = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.cursor = null, this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };
  }
  update(t) {
    var e;
    let n = t.state.field(ua);
    n == null ? this.cursor != null && ((e = this.cursor) === null || e === void 0 || e.remove(), this.cursor = null) : (this.cursor || (this.cursor = this.view.scrollDOM.appendChild(document.createElement("div")), this.cursor.className = "cm-dropCursor"), (t.startState.field(ua) != n || t.docChanged || t.geometryChanged) && this.view.requestMeasure(this.measureReq));
  }
  readPos() {
    let t = this.view.state.field(ua), e = t != null && this.view.coordsAtPos(t);
    if (!e)
      return null;
    let n = this.view.scrollDOM.getBoundingClientRect();
    return {
      left: e.left - n.left + this.view.scrollDOM.scrollLeft,
      top: e.top - n.top + this.view.scrollDOM.scrollTop,
      height: e.bottom - e.top
    };
  }
  drawCursor(t) {
    this.cursor && (t ? (this.cursor.style.left = t.left + "px", this.cursor.style.top = t.top + "px", this.cursor.style.height = t.height + "px") : this.cursor.style.left = "-100000px");
  }
  destroy() {
    this.cursor && this.cursor.remove();
  }
  setDropPos(t) {
    this.view.state.field(ua) != t && this.view.dispatch({ effects: ZS.of(t) });
  }
}, {
  eventHandlers: {
    dragover(t) {
      this.setDropPos(this.view.posAtCoords({ x: t.clientX, y: t.clientY }));
    },
    dragleave(t) {
      (t.target == this.view.contentDOM || !this.view.contentDOM.contains(t.relatedTarget)) && this.setDropPos(null);
    },
    dragend() {
      this.setDropPos(null);
    },
    drop() {
      this.setDropPos(null);
    }
  }
});
function TV() {
  return [ua, OV];
}
function gy(t, e, n, i, r) {
  e.lastIndex = 0;
  for (let o = t.iterRange(n, i), s = n, l; !o.next().done; s += o.value.length)
    if (!o.lineBreak)
      for (; l = e.exec(o.value); )
        r(s + l.index, l);
}
function EV(t, e) {
  let n = t.visibleRanges;
  if (n.length == 1 && n[0].from == t.viewport.from && n[0].to == t.viewport.to)
    return n;
  let i = [];
  for (let { from: r, to: o } of n)
    r = Math.max(t.state.doc.lineAt(r).from, r - e), o = Math.min(t.state.doc.lineAt(o).to, o + e), i.length && i[i.length - 1].to >= r ? i[i.length - 1].to = o : i.push({ from: r, to: o });
  return i;
}
class PV {
  constructor(e) {
    const { regexp: n, decoration: i, decorate: r, boundary: o, maxLength: s = 1e3 } = e;
    if (!n.global)
      throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");
    if (this.regexp = n, r)
      this.addMatch = (l, a, f, c) => r(c, f, f + l[0].length, l, a);
    else if (typeof i == "function")
      this.addMatch = (l, a, f, c) => {
        let u = i(l, a, f);
        u && c(f, f + l[0].length, u);
      };
    else if (i)
      this.addMatch = (l, a, f, c) => c(f, f + l[0].length, i);
    else
      throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");
    this.boundary = o, this.maxLength = s;
  }
  createDeco(e) {
    let n = new Fo(), i = n.add.bind(n);
    for (let { from: r, to: o } of EV(e, this.maxLength))
      gy(e.state.doc, this.regexp, r, o, (s, l) => this.addMatch(l, e, s, i));
    return n.finish();
  }
  updateDeco(e, n) {
    let i = 1e9, r = -1;
    return e.docChanged && e.changes.iterChanges((o, s, l, a) => {
      a > e.view.viewport.from && l < e.view.viewport.to && (i = Math.min(l, i), r = Math.max(a, r));
    }), e.viewportChanged || r - i > 1e3 ? this.createDeco(e.view) : r > -1 ? this.updateRange(e.view, n.map(e.changes), i, r) : n;
  }
  updateRange(e, n, i, r) {
    for (let o of e.visibleRanges) {
      let s = Math.max(o.from, i), l = Math.min(o.to, r);
      if (l > s) {
        let a = e.state.doc.lineAt(s), f = a.to < l ? e.state.doc.lineAt(l) : a, c = Math.max(o.from, a.from), u = Math.min(o.to, f.to);
        if (this.boundary) {
          for (; s > a.from; s--)
            if (this.boundary.test(a.text[s - 1 - a.from])) {
              c = s;
              break;
            }
          for (; l < f.to; l++)
            if (this.boundary.test(f.text[l - f.from])) {
              u = l;
              break;
            }
        }
        let h = [], d, p = (g, _, b) => h.push(b.range(g, _));
        if (a == f)
          for (this.regexp.lastIndex = c - a.from; (d = this.regexp.exec(a.text)) && d.index < u - a.from; )
            this.addMatch(d, e, d.index + a.from, p);
        else
          gy(e.state.doc, this.regexp, c, u, (g, _) => this.addMatch(_, e, g, p));
        n = n.update({ filterFrom: c, filterTo: u, filter: (g, _) => g < c || _ > u, add: h });
      }
    }
    return n;
  }
}
const nm = /x/.unicode != null ? "gu" : "g", RV = /* @__PURE__ */ new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`, nm), IV = {
  0: "null",
  7: "bell",
  8: "backspace",
  10: "newline",
  11: "vertical tab",
  13: "carriage return",
  27: "escape",
  8203: "zero width space",
  8204: "zero width non-joiner",
  8205: "zero width joiner",
  8206: "left-to-right mark",
  8207: "right-to-left mark",
  8232: "line separator",
  8237: "left-to-right override",
  8238: "right-to-left override",
  8294: "left-to-right isolate",
  8295: "right-to-left isolate",
  8297: "pop directional isolate",
  8233: "paragraph separator",
  65279: "zero width no-break space",
  65532: "object replacement"
};
let Md = null;
function NV() {
  var t;
  if (Md == null && typeof document < "u" && document.body) {
    let e = document.body.style;
    Md = ((t = e.tabSize) !== null && t !== void 0 ? t : e.MozTabSize) != null;
  }
  return Md || !1;
}
const Ac = /* @__PURE__ */ Xe.define({
  combine(t) {
    let e = fr(t, {
      render: null,
      specialChars: RV,
      addSpecialChars: null
    });
    return (e.replaceTabs = !NV()) && (e.specialChars = new RegExp("	|" + e.specialChars.source, nm)), e.addSpecialChars && (e.specialChars = new RegExp(e.specialChars.source + "|" + e.addSpecialChars.source, nm)), e;
  }
});
function DV(t = {}) {
  return [Ac.of(t), jV()];
}
let by = null;
function jV() {
  return by || (by = Rn.fromClass(class {
    constructor(t) {
      this.view = t, this.decorations = rt.none, this.decorationCache = /* @__PURE__ */ Object.create(null), this.decorator = this.makeDecorator(t.state.facet(Ac)), this.decorations = this.decorator.createDeco(t);
    }
    makeDecorator(t) {
      return new PV({
        regexp: t.specialChars,
        decoration: (e, n, i) => {
          let { doc: r } = n.state, o = Xn(e[0], 0);
          if (o == 9) {
            let s = r.lineAt(i), l = n.state.tabSize, a = mf(s.text, l, i - s.from);
            return rt.replace({ widget: new zV((l - a % l) * this.view.defaultCharacterWidth) });
          }
          return this.decorationCache[o] || (this.decorationCache[o] = rt.replace({ widget: new xV(t, o) }));
        },
        boundary: t.replaceTabs ? void 0 : /[^]/
      });
    }
    update(t) {
      let e = t.state.facet(Ac);
      t.startState.facet(Ac) != e ? (this.decorator = this.makeDecorator(e), this.decorations = this.decorator.createDeco(t.view)) : this.decorations = this.decorator.updateDeco(t, this.decorations);
    }
  }, {
    decorations: (t) => t.decorations
  }));
}
const BV = "•";
function LV(t) {
  return t >= 32 ? BV : t == 10 ? "␤" : String.fromCharCode(9216 + t);
}
class xV extends Yo {
  constructor(e, n) {
    super(), this.options = e, this.code = n;
  }
  eq(e) {
    return e.code == this.code;
  }
  toDOM(e) {
    let n = LV(this.code), i = e.state.phrase("Control character") + " " + (IV[this.code] || "0x" + this.code.toString(16)), r = this.options.render && this.options.render(this.code, i, n);
    if (r)
      return r;
    let o = document.createElement("span");
    return o.textContent = n, o.title = i, o.setAttribute("aria-label", i), o.className = "cm-specialChar", o;
  }
  ignoreEvent() {
    return !1;
  }
}
class zV extends Yo {
  constructor(e) {
    super(), this.width = e;
  }
  eq(e) {
    return e.width == this.width;
  }
  toDOM() {
    let e = document.createElement("span");
    return e.textContent = "	", e.className = "cm-tab", e.style.width = this.width + "px", e;
  }
  ignoreEvent() {
    return !1;
  }
}
function VV() {
  return HV;
}
const FV = /* @__PURE__ */ rt.line({ class: "cm-activeLine" }), HV = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.docChanged || t.selectionSet) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = -1, n = [];
    for (let i of t.state.selection.ranges) {
      let r = t.lineBlockAt(i.head);
      r.from > e && (n.push(FV.range(r.from)), e = r.from);
    }
    return rt.set(n);
  }
}, {
  decorations: (t) => t.decorations
}), im = 2e3;
function WV(t, e, n) {
  let i = Math.min(e.line, n.line), r = Math.max(e.line, n.line), o = [];
  if (e.off > im || n.off > im || e.col < 0 || n.col < 0) {
    let s = Math.min(e.off, n.off), l = Math.max(e.off, n.off);
    for (let a = i; a <= r; a++) {
      let f = t.doc.line(a);
      f.length <= l && o.push(we.range(f.from + s, f.to + l));
    }
  } else {
    let s = Math.min(e.col, n.col), l = Math.max(e.col, n.col);
    for (let a = i; a <= r; a++) {
      let f = t.doc.line(a), c = Bp(f.text, s, t.tabSize, !0);
      if (c < 0)
        o.push(we.cursor(f.to));
      else {
        let u = Bp(f.text, l, t.tabSize);
        o.push(we.range(f.from + c, f.from + u));
      }
    }
  }
  return o;
}
function UV(t, e) {
  let n = t.coordsAtPos(t.viewport.from);
  return n ? Math.round(Math.abs((n.left - e) / t.defaultCharacterWidth)) : -1;
}
function _y(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1), i = t.state.doc.lineAt(n), r = n - i.from, o = r > im ? -1 : r == i.length ? UV(t, e.clientX) : mf(i.text, t.state.tabSize, n - i.from);
  return { line: i.number, col: o, off: r };
}
function qV(t, e) {
  let n = _y(t, e), i = t.state.selection;
  return n ? {
    update(r) {
      if (r.docChanged) {
        let o = r.changes.mapPos(r.startState.doc.line(n.line).from), s = r.state.doc.lineAt(o);
        n = { line: s.number, col: n.col, off: Math.min(n.off, s.length) }, i = i.map(r.changes);
      }
    },
    get(r, o, s) {
      let l = _y(t, r);
      if (!l)
        return i;
      let a = WV(t.state, n, l);
      return a.length ? s ? we.create(a.concat(i.ranges)) : we.create(a) : i;
    }
  } : null;
}
function JV(t) {
  let e = (t == null ? void 0 : t.eventFilter) || ((n) => n.altKey && n.button == 0);
  return Ge.mouseSelectionStyle.of((n, i) => e(i) ? qV(n, i) : null);
}
const KV = {
  Alt: [18, (t) => t.altKey],
  Control: [17, (t) => t.ctrlKey],
  Shift: [16, (t) => t.shiftKey],
  Meta: [91, (t) => t.metaKey]
}, GV = { style: "cursor: crosshair" };
function XV(t = {}) {
  let [e, n] = KV[t.key || "Alt"], i = Rn.fromClass(class {
    constructor(r) {
      this.view = r, this.isDown = !1;
    }
    set(r) {
      this.isDown != r && (this.isDown = r, this.view.update([]));
    }
  }, {
    eventHandlers: {
      keydown(r) {
        this.set(r.keyCode == e || n(r));
      },
      keyup(r) {
        (r.keyCode == e || !n(r)) && this.set(!1);
      },
      mousemove(r) {
        this.set(n(r));
      }
    }
  });
  return [
    i,
    Ge.contentAttributes.of((r) => {
      var o;
      return !((o = r.plugin(i)) === null || o === void 0) && o.isDown ? GV : null;
    })
  ];
}
const Yf = "-10000px";
class $S {
  constructor(e, n, i) {
    this.facet = n, this.createTooltipView = i, this.input = e.state.facet(n), this.tooltips = this.input.filter((r) => r), this.tooltipViews = this.tooltips.map(i);
  }
  update(e) {
    var n;
    let i = e.state.facet(this.facet), r = i.filter((s) => s);
    if (i === this.input) {
      for (let s of this.tooltipViews)
        s.update && s.update(e);
      return !1;
    }
    let o = [];
    for (let s = 0; s < r.length; s++) {
      let l = r[s], a = -1;
      if (l) {
        for (let f = 0; f < this.tooltips.length; f++) {
          let c = this.tooltips[f];
          c && c.create == l.create && (a = f);
        }
        if (a < 0)
          o[s] = this.createTooltipView(l);
        else {
          let f = o[s] = this.tooltipViews[a];
          f.update && f.update(e);
        }
      }
    }
    for (let s of this.tooltipViews)
      o.indexOf(s) < 0 && (s.dom.remove(), (n = s.destroy) === null || n === void 0 || n.call(s));
    return this.input = i, this.tooltips = r, this.tooltipViews = o, !0;
  }
}
function QV(t) {
  let { win: e } = t;
  return { top: 0, left: 0, bottom: e.innerHeight, right: e.innerWidth };
}
const Ad = /* @__PURE__ */ Xe.define({
  combine: (t) => {
    var e, n, i;
    return {
      position: Qe.ios ? "absolute" : ((e = t.find((r) => r.position)) === null || e === void 0 ? void 0 : e.position) || "fixed",
      parent: ((n = t.find((r) => r.parent)) === null || n === void 0 ? void 0 : n.parent) || null,
      tooltipSpace: ((i = t.find((r) => r.tooltipSpace)) === null || i === void 0 ? void 0 : i.tooltipSpace) || QV
    };
  }
}), e4 = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.inView = !0, this.lastTransaction = 0, this.measureTimeout = -1;
    let e = t.state.facet(Ad);
    this.position = e.position, this.parent = e.parent, this.classes = t.themeClasses, this.createContainer(), this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this }, this.manager = new $S(t, Eh, (n) => this.createTooltip(n)), this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((n) => {
      Date.now() > this.lastTransaction - 50 && n.length > 0 && n[n.length - 1].intersectionRatio < 1 && this.measureSoon();
    }, { threshold: [1] }) : null, this.observeIntersection(), t.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this)), this.maybeMeasure();
  }
  createContainer() {
    this.parent ? (this.container = document.createElement("div"), this.container.style.position = "relative", this.container.className = this.view.themeClasses, this.parent.appendChild(this.container)) : this.container = this.view.dom;
  }
  observeIntersection() {
    if (this.intersectionObserver) {
      this.intersectionObserver.disconnect();
      for (let t of this.manager.tooltipViews)
        this.intersectionObserver.observe(t.dom);
    }
  }
  measureSoon() {
    this.measureTimeout < 0 && (this.measureTimeout = setTimeout(() => {
      this.measureTimeout = -1, this.maybeMeasure();
    }, 50));
  }
  update(t) {
    t.transactions.length && (this.lastTransaction = Date.now());
    let e = this.manager.update(t);
    e && this.observeIntersection();
    let n = e || t.geometryChanged, i = t.state.facet(Ad);
    if (i.position != this.position) {
      this.position = i.position;
      for (let r of this.manager.tooltipViews)
        r.dom.style.position = this.position;
      n = !0;
    }
    if (i.parent != this.parent) {
      this.parent && this.container.remove(), this.parent = i.parent, this.createContainer();
      for (let r of this.manager.tooltipViews)
        this.container.appendChild(r.dom);
      n = !0;
    } else
      this.parent && this.view.themeClasses != this.classes && (this.classes = this.container.className = this.view.themeClasses);
    n && this.maybeMeasure();
  }
  createTooltip(t) {
    let e = t.create(this.view);
    if (e.dom.classList.add("cm-tooltip"), t.arrow && !e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
      let n = document.createElement("div");
      n.className = "cm-tooltip-arrow", e.dom.appendChild(n);
    }
    return e.dom.style.position = this.position, e.dom.style.top = Yf, this.container.appendChild(e.dom), e.mount && e.mount(this.view), e;
  }
  destroy() {
    var t, e;
    this.view.win.removeEventListener("resize", this.measureSoon);
    for (let n of this.manager.tooltipViews)
      n.dom.remove(), (t = n.destroy) === null || t === void 0 || t.call(n);
    (e = this.intersectionObserver) === null || e === void 0 || e.disconnect(), clearTimeout(this.measureTimeout);
  }
  readMeasure() {
    let t = this.view.dom.getBoundingClientRect();
    return {
      editor: t,
      parent: this.parent ? this.container.getBoundingClientRect() : t,
      pos: this.manager.tooltips.map((e, n) => {
        let i = this.manager.tooltipViews[n];
        return i.getCoords ? i.getCoords(e.pos) : this.view.coordsAtPos(e.pos);
      }),
      size: this.manager.tooltipViews.map(({ dom: e }) => e.getBoundingClientRect()),
      space: this.view.state.facet(Ad).tooltipSpace(this.view)
    };
  }
  writeMeasure(t) {
    let { editor: e, space: n } = t, i = [];
    for (let r = 0; r < this.manager.tooltips.length; r++) {
      let o = this.manager.tooltips[r], s = this.manager.tooltipViews[r], { dom: l } = s, a = t.pos[r], f = t.size[r];
      if (!a || a.bottom <= Math.max(e.top, n.top) || a.top >= Math.min(e.bottom, n.bottom) || a.right < Math.max(e.left, n.left) - 0.1 || a.left > Math.min(e.right, n.right) + 0.1) {
        l.style.top = Yf;
        continue;
      }
      let c = o.arrow ? s.dom.querySelector(".cm-tooltip-arrow") : null, u = c ? 7 : 0, h = f.right - f.left, d = f.bottom - f.top, p = s.offset || ZV, g = this.view.textDirection == pn.LTR, _ = f.width > n.right - n.left ? g ? n.left : n.right - f.width : g ? Math.min(a.left - (c ? 14 : 0) + p.x, n.right - h) : Math.max(n.left, a.left - h + (c ? 14 : 0) - p.x), b = !!o.above;
      !o.strictSide && (b ? a.top - (f.bottom - f.top) - p.y < n.top : a.bottom + (f.bottom - f.top) + p.y > n.bottom) && b == n.bottom - a.bottom > a.top - n.top && (b = !b);
      let y = (b ? a.top - n.top : n.bottom - a.bottom) - u;
      if (y < d && s.resize !== !1) {
        if (y < this.view.defaultLineHeight) {
          l.style.top = Yf;
          continue;
        }
        l.style.height = (d = y) + "px";
      } else
        l.style.height && (l.style.height = "");
      let v = b ? a.top - d - u - p.y : a.bottom + u + p.y, M = _ + h;
      if (s.overlap !== !0)
        for (let A of i)
          A.left < M && A.right > _ && A.top < v + d && A.bottom > v && (v = b ? A.top - d - 2 - u : A.bottom + u + 2);
      this.position == "absolute" ? (l.style.top = v - t.parent.top + "px", l.style.left = _ - t.parent.left + "px") : (l.style.top = v + "px", l.style.left = _ + "px"), c && (c.style.left = `${a.left + (g ? p.x : -p.x) - (_ + 14 - 7)}px`), s.overlap !== !0 && i.push({ left: _, top: v, right: M, bottom: v + d }), l.classList.toggle("cm-tooltip-above", b), l.classList.toggle("cm-tooltip-below", !b), s.positioned && s.positioned(t.space);
    }
  }
  maybeMeasure() {
    if (this.manager.tooltips.length && (this.view.inView && this.view.requestMeasure(this.measureReq), this.inView != this.view.inView && (this.inView = this.view.inView, !this.inView)))
      for (let t of this.manager.tooltipViews)
        t.dom.style.top = Yf;
  }
}, {
  eventHandlers: {
    scroll() {
      this.maybeMeasure();
    }
  }
}), YV = /* @__PURE__ */ Ge.baseTheme({
  ".cm-tooltip": {
    zIndex: 100,
    boxSizing: "border-box"
  },
  "&light .cm-tooltip": {
    border: "1px solid #bbb",
    backgroundColor: "#f5f5f5"
  },
  "&light .cm-tooltip-section:not(:first-child)": {
    borderTop: "1px solid #bbb"
  },
  "&dark .cm-tooltip": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tooltip-arrow": {
    height: `${7}px`,
    width: `${7 * 2}px`,
    position: "absolute",
    zIndex: -1,
    overflow: "hidden",
    "&:before, &:after": {
      content: "''",
      position: "absolute",
      width: 0,
      height: 0,
      borderLeft: `${7}px solid transparent`,
      borderRight: `${7}px solid transparent`
    },
    ".cm-tooltip-above &": {
      bottom: `-${7}px`,
      "&:before": {
        borderTop: `${7}px solid #bbb`
      },
      "&:after": {
        borderTop: `${7}px solid #f5f5f5`,
        bottom: "1px"
      }
    },
    ".cm-tooltip-below &": {
      top: `-${7}px`,
      "&:before": {
        borderBottom: `${7}px solid #bbb`
      },
      "&:after": {
        borderBottom: `${7}px solid #f5f5f5`,
        top: "1px"
      }
    }
  },
  "&dark .cm-tooltip .cm-tooltip-arrow": {
    "&:before": {
      borderTopColor: "#333338",
      borderBottomColor: "#333338"
    },
    "&:after": {
      borderTopColor: "transparent",
      borderBottomColor: "transparent"
    }
  }
}), ZV = { x: 0, y: 0 }, Eh = /* @__PURE__ */ Xe.define({
  enables: [e4, YV]
}), mu = /* @__PURE__ */ Xe.define();
class Og {
  constructor(e) {
    this.view = e, this.mounted = !1, this.dom = document.createElement("div"), this.dom.classList.add("cm-tooltip-hover"), this.manager = new $S(e, mu, (n) => this.createHostedView(n));
  }
  static create(e) {
    return new Og(e);
  }
  createHostedView(e) {
    let n = e.create(this.view);
    return n.dom.classList.add("cm-tooltip-section"), this.dom.appendChild(n.dom), this.mounted && n.mount && n.mount(this.view), n;
  }
  mount(e) {
    for (let n of this.manager.tooltipViews)
      n.mount && n.mount(e);
    this.mounted = !0;
  }
  positioned(e) {
    for (let n of this.manager.tooltipViews)
      n.positioned && n.positioned(e);
  }
  update(e) {
    this.manager.update(e);
  }
}
const $V = /* @__PURE__ */ Eh.compute([mu], (t) => {
  let e = t.facet(mu).filter((n) => n);
  return e.length === 0 ? null : {
    pos: Math.min(...e.map((n) => n.pos)),
    end: Math.max(...e.filter((n) => n.end != null).map((n) => n.end)),
    create: Og.create,
    above: e[0].above,
    arrow: e.some((n) => n.arrow)
  };
});
class eF {
  constructor(e, n, i, r, o) {
    this.view = e, this.source = n, this.field = i, this.setHover = r, this.hoverTime = o, this.hoverTimeout = -1, this.restartTimeout = -1, this.pending = null, this.lastMove = { x: 0, y: 0, target: e.dom, time: 0 }, this.checkHover = this.checkHover.bind(this), e.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this)), e.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));
  }
  update() {
    this.pending && (this.pending = null, clearTimeout(this.restartTimeout), this.restartTimeout = setTimeout(() => this.startHover(), 20));
  }
  get active() {
    return this.view.state.field(this.field);
  }
  checkHover() {
    if (this.hoverTimeout = -1, this.active)
      return;
    let e = Date.now() - this.lastMove.time;
    e < this.hoverTime ? this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - e) : this.startHover();
  }
  startHover() {
    clearTimeout(this.restartTimeout);
    let { lastMove: e } = this, n = this.view.contentDOM.contains(e.target) ? this.view.posAtCoords(e) : null;
    if (n == null)
      return;
    let i = this.view.coordsAtPos(n);
    if (i == null || e.y < i.top || e.y > i.bottom || e.x < i.left - this.view.defaultCharacterWidth || e.x > i.right + this.view.defaultCharacterWidth)
      return;
    let r = this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((l) => l.from <= n && l.to >= n), o = r && r.dir == pn.RTL ? -1 : 1, s = this.source(this.view, n, e.x < i.left ? -o : o);
    if (s != null && s.then) {
      let l = this.pending = { pos: n };
      s.then((a) => {
        this.pending == l && (this.pending = null, a && this.view.dispatch({ effects: this.setHover.of(a) }));
      }, (a) => Ti(this.view.state, a, "hover tooltip"));
    } else
      s && this.view.dispatch({ effects: this.setHover.of(s) });
  }
  mousemove(e) {
    var n;
    this.lastMove = { x: e.clientX, y: e.clientY, target: e.target, time: Date.now() }, this.hoverTimeout < 0 && (this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime));
    let i = this.active;
    if (i && !yy(this.lastMove.target) || this.pending) {
      let { pos: r } = i || this.pending, o = (n = i == null ? void 0 : i.end) !== null && n !== void 0 ? n : r;
      (r == o ? this.view.posAtCoords(this.lastMove) != r : !tF(this.view, r, o, e.clientX, e.clientY, 6)) && (this.view.dispatch({ effects: this.setHover.of(null) }), this.pending = null);
    }
  }
  mouseleave(e) {
    clearTimeout(this.hoverTimeout), this.hoverTimeout = -1, this.active && !yy(e.relatedTarget) && this.view.dispatch({ effects: this.setHover.of(null) });
  }
  destroy() {
    clearTimeout(this.hoverTimeout), this.view.dom.removeEventListener("mouseleave", this.mouseleave), this.view.dom.removeEventListener("mousemove", this.mousemove);
  }
}
function yy(t) {
  for (let e = t; e; e = e.parentNode)
    if (e.nodeType == 1 && e.classList.contains("cm-tooltip"))
      return !0;
  return !1;
}
function tF(t, e, n, i, r, o) {
  let s = document.createRange(), l = t.domAtPos(e), a = t.domAtPos(n);
  s.setEnd(a.node, a.offset), s.setStart(l.node, l.offset);
  let f = s.getClientRects();
  s.detach();
  for (let c = 0; c < f.length; c++) {
    let u = f[c];
    if (Math.max(u.top - r, r - u.bottom, u.left - i, i - u.right) <= o)
      return !0;
  }
  return !1;
}
function nF(t, e = {}) {
  let n = gt.define(), i = xn.define({
    create() {
      return null;
    },
    update(r, o) {
      if (r && (e.hideOnChange && (o.docChanged || o.selection) || e.hideOn && e.hideOn(o, r)))
        return null;
      if (r && o.docChanged) {
        let s = o.changes.mapPos(r.pos, -1, li.TrackDel);
        if (s == null)
          return null;
        let l = Object.assign(/* @__PURE__ */ Object.create(null), r);
        l.pos = s, r.end != null && (l.end = o.changes.mapPos(r.end)), r = l;
      }
      for (let s of o.effects)
        s.is(n) && (r = s.value), s.is(rF) && (r = null);
      return r;
    },
    provide: (r) => mu.from(r)
  });
  return [
    i,
    Rn.define((r) => new eF(r, t, i, n, e.hoverTime || 300)),
    $V
  ];
}
function iF(t, e) {
  let n = t.plugin(e4);
  if (!n)
    return null;
  let i = n.manager.tooltips.indexOf(e);
  return i < 0 ? null : n.manager.tooltipViews[i];
}
const rF = /* @__PURE__ */ gt.define(), wy = /* @__PURE__ */ Xe.define({
  combine(t) {
    let e, n;
    for (let i of t)
      e = e || i.topContainer, n = n || i.bottomContainer;
    return { topContainer: e, bottomContainer: n };
  }
});
function Ga(t, e) {
  let n = t.plugin(t4), i = n ? n.specs.indexOf(e) : -1;
  return i > -1 ? n.panels[i] : null;
}
const t4 = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.input = t.state.facet(Xa), this.specs = this.input.filter((n) => n), this.panels = this.specs.map((n) => n(t));
    let e = t.state.facet(wy);
    this.top = new Zf(t, !0, e.topContainer), this.bottom = new Zf(t, !1, e.bottomContainer), this.top.sync(this.panels.filter((n) => n.top)), this.bottom.sync(this.panels.filter((n) => !n.top));
    for (let n of this.panels)
      n.dom.classList.add("cm-panel"), n.mount && n.mount();
  }
  update(t) {
    let e = t.state.facet(wy);
    this.top.container != e.topContainer && (this.top.sync([]), this.top = new Zf(t.view, !0, e.topContainer)), this.bottom.container != e.bottomContainer && (this.bottom.sync([]), this.bottom = new Zf(t.view, !1, e.bottomContainer)), this.top.syncClasses(), this.bottom.syncClasses();
    let n = t.state.facet(Xa);
    if (n != this.input) {
      let i = n.filter((a) => a), r = [], o = [], s = [], l = [];
      for (let a of i) {
        let f = this.specs.indexOf(a), c;
        f < 0 ? (c = a(t.view), l.push(c)) : (c = this.panels[f], c.update && c.update(t)), r.push(c), (c.top ? o : s).push(c);
      }
      this.specs = i, this.panels = r, this.top.sync(o), this.bottom.sync(s);
      for (let a of l)
        a.dom.classList.add("cm-panel"), a.mount && a.mount();
    } else
      for (let i of this.panels)
        i.update && i.update(t);
  }
  destroy() {
    this.top.sync([]), this.bottom.sync([]);
  }
}, {
  provide: (t) => Ge.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return n && { top: n.top.scrollMargin(), bottom: n.bottom.scrollMargin() };
  })
});
class Zf {
  constructor(e, n, i) {
    this.view = e, this.top = n, this.container = i, this.dom = void 0, this.classes = "", this.panels = [], this.syncClasses();
  }
  sync(e) {
    for (let n of this.panels)
      n.destroy && e.indexOf(n) < 0 && n.destroy();
    this.panels = e, this.syncDOM();
  }
  syncDOM() {
    if (this.panels.length == 0) {
      this.dom && (this.dom.remove(), this.dom = void 0);
      return;
    }
    if (!this.dom) {
      this.dom = document.createElement("div"), this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom", this.dom.style[this.top ? "top" : "bottom"] = "0";
      let n = this.container || this.view.dom;
      n.insertBefore(this.dom, this.top ? n.firstChild : null);
    }
    let e = this.dom.firstChild;
    for (let n of this.panels)
      if (n.dom.parentNode == this.dom) {
        for (; e != n.dom; )
          e = vy(e);
        e = e.nextSibling;
      } else
        this.dom.insertBefore(n.dom, e);
    for (; e; )
      e = vy(e);
  }
  scrollMargin() {
    return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);
  }
  syncClasses() {
    if (!(!this.container || this.classes == this.view.themeClasses)) {
      for (let e of this.classes.split(" "))
        e && this.container.classList.remove(e);
      for (let e of (this.classes = this.view.themeClasses).split(" "))
        e && this.container.classList.add(e);
    }
  }
}
function vy(t) {
  let e = t.nextSibling;
  return t.remove(), e;
}
const Xa = /* @__PURE__ */ Xe.define({
  enables: t4
});
class Fr extends Ts {
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  eq(e) {
    return !1;
  }
  destroy(e) {
  }
}
Fr.prototype.elementClass = "";
Fr.prototype.toDOM = void 0;
Fr.prototype.mapMode = li.TrackBefore;
Fr.prototype.startSide = Fr.prototype.endSide = -1;
Fr.prototype.point = !0;
const Oc = /* @__PURE__ */ Xe.define(), oF = {
  class: "",
  renderEmptyElements: !1,
  elementStyle: "",
  markers: () => Bt.empty,
  lineMarker: () => null,
  lineMarkerChange: null,
  initialSpacer: null,
  updateSpacer: null,
  domEventHandlers: {}
}, Ca = /* @__PURE__ */ Xe.define();
function n4(t) {
  return [i4(), Ca.of(Object.assign(Object.assign({}, oF), t))];
}
const rm = /* @__PURE__ */ Xe.define({
  combine: (t) => t.some((e) => e)
});
function i4(t) {
  let e = [
    sF
  ];
  return t && t.fixed === !1 && e.push(rm.of(!0)), e;
}
const sF = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.prevViewport = t.viewport, this.dom = document.createElement("div"), this.dom.className = "cm-gutters", this.dom.setAttribute("aria-hidden", "true"), this.dom.style.minHeight = this.view.contentHeight + "px", this.gutters = t.state.facet(Ca).map((e) => new Cy(t, e));
    for (let e of this.gutters)
      this.dom.appendChild(e.dom);
    this.fixed = !t.state.facet(rm), this.fixed && (this.dom.style.position = "sticky"), this.syncGutters(!1), t.scrollDOM.insertBefore(this.dom, t.contentDOM);
  }
  update(t) {
    if (this.updateGutters(t)) {
      let e = this.prevViewport, n = t.view.viewport, i = Math.min(e.to, n.to) - Math.max(e.from, n.from);
      this.syncGutters(i < (n.to - n.from) * 0.8);
    }
    t.geometryChanged && (this.dom.style.minHeight = this.view.contentHeight + "px"), this.view.state.facet(rm) != !this.fixed && (this.fixed = !this.fixed, this.dom.style.position = this.fixed ? "sticky" : ""), this.prevViewport = t.view.viewport;
  }
  syncGutters(t) {
    let e = this.dom.nextSibling;
    t && this.dom.remove();
    let n = Bt.iter(this.view.state.facet(Oc), this.view.viewport.from), i = [], r = this.gutters.map((o) => new lF(o, this.view.viewport, -this.view.documentPadding.top));
    for (let o of this.view.viewportLineBlocks) {
      let s;
      if (Array.isArray(o.type)) {
        for (let l of o.type)
          if (l.type == Yt.Text) {
            s = l;
            break;
          }
      } else
        s = o.type == Yt.Text ? o : void 0;
      if (s) {
        i.length && (i = []), r4(n, i, o.from);
        for (let l of r)
          l.line(this.view, s, i);
      }
    }
    for (let o of r)
      o.finish();
    t && this.view.scrollDOM.insertBefore(this.dom, e);
  }
  updateGutters(t) {
    let e = t.startState.facet(Ca), n = t.state.facet(Ca), i = t.docChanged || t.heightChanged || t.viewportChanged || !Bt.eq(t.startState.facet(Oc), t.state.facet(Oc), t.view.viewport.from, t.view.viewport.to);
    if (e == n)
      for (let r of this.gutters)
        r.update(t) && (i = !0);
    else {
      i = !0;
      let r = [];
      for (let o of n) {
        let s = e.indexOf(o);
        s < 0 ? r.push(new Cy(this.view, o)) : (this.gutters[s].update(t), r.push(this.gutters[s]));
      }
      for (let o of this.gutters)
        o.dom.remove(), r.indexOf(o) < 0 && o.destroy();
      for (let o of r)
        this.dom.appendChild(o.dom);
      this.gutters = r;
    }
    return i;
  }
  destroy() {
    for (let t of this.gutters)
      t.destroy();
    this.dom.remove();
  }
}, {
  provide: (t) => Ge.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return !n || n.gutters.length == 0 || !n.fixed ? null : e.textDirection == pn.LTR ? { left: n.dom.offsetWidth } : { right: n.dom.offsetWidth };
  })
});
function ky(t) {
  return Array.isArray(t) ? t : [t];
}
function r4(t, e, n) {
  for (; t.value && t.from <= n; )
    t.from == n && e.push(t.value), t.next();
}
class lF {
  constructor(e, n, i) {
    this.gutter = e, this.height = i, this.localMarkers = [], this.i = 0, this.cursor = Bt.iter(e.markers, n.from);
  }
  line(e, n, i) {
    this.localMarkers.length && (this.localMarkers = []), r4(this.cursor, this.localMarkers, n.from);
    let r = i.length ? this.localMarkers.concat(i) : this.localMarkers, o = this.gutter.config.lineMarker(e, n, r);
    o && r.unshift(o);
    let s = this.gutter;
    if (r.length == 0 && !s.config.renderEmptyElements)
      return;
    let l = n.top - this.height;
    if (this.i == s.elements.length) {
      let a = new o4(e, n.height, l, r);
      s.elements.push(a), s.dom.appendChild(a.dom);
    } else
      s.elements[this.i].update(e, n.height, l, r);
    this.height = n.bottom, this.i++;
  }
  finish() {
    let e = this.gutter;
    for (; e.elements.length > this.i; ) {
      let n = e.elements.pop();
      e.dom.removeChild(n.dom), n.destroy();
    }
  }
}
class Cy {
  constructor(e, n) {
    this.view = e, this.config = n, this.elements = [], this.spacer = null, this.dom = document.createElement("div"), this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
    for (let i in n.domEventHandlers)
      this.dom.addEventListener(i, (r) => {
        let o = e.lineBlockAtHeight(r.clientY - e.documentTop);
        n.domEventHandlers[i](e, o, r) && r.preventDefault();
      });
    this.markers = ky(n.markers(e)), n.initialSpacer && (this.spacer = new o4(e, 0, 0, [n.initialSpacer(e)]), this.dom.appendChild(this.spacer.dom), this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none");
  }
  update(e) {
    let n = this.markers;
    if (this.markers = ky(this.config.markers(e.view)), this.spacer && this.config.updateSpacer) {
      let r = this.config.updateSpacer(this.spacer.markers[0], e);
      r != this.spacer.markers[0] && this.spacer.update(e.view, 0, 0, [r]);
    }
    let i = e.view.viewport;
    return !Bt.eq(this.markers, n, i.from, i.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(e) : !1);
  }
  destroy() {
    for (let e of this.elements)
      e.destroy();
  }
}
class o4 {
  constructor(e, n, i, r) {
    this.height = -1, this.above = 0, this.markers = [], this.dom = document.createElement("div"), this.dom.className = "cm-gutterElement", this.update(e, n, i, r);
  }
  update(e, n, i, r) {
    this.height != n && (this.dom.style.height = (this.height = n) + "px"), this.above != i && (this.dom.style.marginTop = (this.above = i) ? i + "px" : ""), aF(this.markers, r) || this.setMarkers(e, r);
  }
  setMarkers(e, n) {
    let i = "cm-gutterElement", r = this.dom.firstChild;
    for (let o = 0, s = 0; ; ) {
      let l = s, a = o < n.length ? n[o++] : null, f = !1;
      if (a) {
        let c = a.elementClass;
        c && (i += " " + c);
        for (let u = s; u < this.markers.length; u++)
          if (this.markers[u].compare(a)) {
            l = u, f = !0;
            break;
          }
      } else
        l = this.markers.length;
      for (; s < l; ) {
        let c = this.markers[s++];
        if (c.toDOM) {
          c.destroy(r);
          let u = r.nextSibling;
          r.remove(), r = u;
        }
      }
      if (!a)
        break;
      a.toDOM && (f ? r = r.nextSibling : this.dom.insertBefore(a.toDOM(e), r)), f && s++;
    }
    this.dom.className = i, this.markers = n;
  }
  destroy() {
    this.setMarkers(null, []);
  }
}
function aF(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (!t[n].compare(e[n]))
      return !1;
  return !0;
}
const fF = /* @__PURE__ */ Xe.define(), el = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, { formatNumber: String, domEventHandlers: {} }, {
      domEventHandlers(e, n) {
        let i = Object.assign({}, e);
        for (let r in n) {
          let o = i[r], s = n[r];
          i[r] = o ? (l, a, f) => o(l, a, f) || s(l, a, f) : s;
        }
        return i;
      }
    });
  }
});
class Od extends Fr {
  constructor(e) {
    super(), this.number = e;
  }
  eq(e) {
    return this.number == e.number;
  }
  toDOM() {
    return document.createTextNode(this.number);
  }
}
function Td(t, e) {
  return t.state.facet(el).formatNumber(e, t.state);
}
const cF = /* @__PURE__ */ Ca.compute([el], (t) => ({
  class: "cm-lineNumbers",
  renderEmptyElements: !1,
  markers(e) {
    return e.state.facet(fF);
  },
  lineMarker(e, n, i) {
    return i.some((r) => r.toDOM) ? null : new Od(Td(e, e.state.doc.lineAt(n.from).number));
  },
  lineMarkerChange: (e) => e.startState.facet(el) != e.state.facet(el),
  initialSpacer(e) {
    return new Od(Td(e, Sy(e.state.doc.lines)));
  },
  updateSpacer(e, n) {
    let i = Td(n.view, Sy(n.view.state.doc.lines));
    return i == e.number ? e : new Od(i);
  },
  domEventHandlers: t.facet(el).domEventHandlers
}));
function uF(t = {}) {
  return [
    el.of(t),
    i4(),
    cF
  ];
}
function Sy(t) {
  let e = 9;
  for (; e < t; )
    e = e * 10 + 9;
  return e;
}
const hF = /* @__PURE__ */ new class extends Fr {
  constructor() {
    super(...arguments), this.elementClass = "cm-activeLineGutter";
  }
}(), dF = /* @__PURE__ */ Oc.compute(["selection"], (t) => {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.head).from;
    r > n && (n = r, e.push(hF.range(r)));
  }
  return Bt.of(e);
});
function pF() {
  return dF;
}
const s4 = 1024;
let mF = 0;
class Ed {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
class At {
  constructor(e = {}) {
    this.id = mF++, this.perNode = !!e.perNode, this.deserialize = e.deserialize || (() => {
      throw new Error("This node type doesn't define a deserialize function");
    });
  }
  add(e) {
    if (this.perNode)
      throw new RangeError("Can't add per-node props to node types");
    return typeof e != "function" && (e = wi.match(e)), (n) => {
      let i = e(n);
      return i === void 0 ? null : [this, i];
    };
  }
}
At.closedBy = new At({ deserialize: (t) => t.split(" ") });
At.openedBy = new At({ deserialize: (t) => t.split(" ") });
At.group = new At({ deserialize: (t) => t.split(" ") });
At.contextHash = new At({ perNode: !0 });
At.lookAhead = new At({ perNode: !0 });
At.mounted = new At({ perNode: !0 });
const gF = /* @__PURE__ */ Object.create(null);
class wi {
  constructor(e, n, i, r = 0) {
    this.name = e, this.props = n, this.id = i, this.flags = r;
  }
  static define(e) {
    let n = e.props && e.props.length ? /* @__PURE__ */ Object.create(null) : gF, i = (e.top ? 1 : 0) | (e.skipped ? 2 : 0) | (e.error ? 4 : 0) | (e.name == null ? 8 : 0), r = new wi(e.name || "", n, e.id, i);
    if (e.props) {
      for (let o of e.props)
        if (Array.isArray(o) || (o = o(r)), o) {
          if (o[0].perNode)
            throw new RangeError("Can't store a per-node prop on a node type");
          n[o[0].id] = o[1];
        }
    }
    return r;
  }
  prop(e) {
    return this.props[e.id];
  }
  get isTop() {
    return (this.flags & 1) > 0;
  }
  get isSkipped() {
    return (this.flags & 2) > 0;
  }
  get isError() {
    return (this.flags & 4) > 0;
  }
  get isAnonymous() {
    return (this.flags & 8) > 0;
  }
  is(e) {
    if (typeof e == "string") {
      if (this.name == e)
        return !0;
      let n = this.prop(At.group);
      return n ? n.indexOf(e) > -1 : !1;
    }
    return this.id == e;
  }
  static match(e) {
    let n = /* @__PURE__ */ Object.create(null);
    for (let i in e)
      for (let r of i.split(" "))
        n[r] = e[i];
    return (i) => {
      for (let r = i.prop(At.group), o = -1; o < (r ? r.length : 0); o++) {
        let s = n[o < 0 ? i.name : r[o]];
        if (s)
          return s;
      }
    };
  }
}
wi.none = new wi("", /* @__PURE__ */ Object.create(null), 0, 8);
class Tg {
  constructor(e) {
    this.types = e;
    for (let n = 0; n < e.length; n++)
      if (e[n].id != n)
        throw new RangeError("Node type ids should correspond to array positions when creating a node set");
  }
  extend(...e) {
    let n = [];
    for (let i of this.types) {
      let r = null;
      for (let o of e) {
        let s = o(i);
        s && (r || (r = Object.assign({}, i.props)), r[s[0].id] = s[1]);
      }
      n.push(r ? new wi(i.name, r, i.id, i.flags) : i);
    }
    return new Tg(n);
  }
}
const $f = /* @__PURE__ */ new WeakMap(), My = /* @__PURE__ */ new WeakMap();
var Yn;
(function(t) {
  t[t.ExcludeBuffers = 1] = "ExcludeBuffers", t[t.IncludeAnonymous = 2] = "IncludeAnonymous", t[t.IgnoreMounts = 4] = "IgnoreMounts", t[t.IgnoreOverlays = 8] = "IgnoreOverlays";
})(Yn || (Yn = {}));
class Pn {
  constructor(e, n, i, r, o) {
    if (this.type = e, this.children = n, this.positions = i, this.length = r, this.props = null, o && o.length) {
      this.props = /* @__PURE__ */ Object.create(null);
      for (let [s, l] of o)
        this.props[typeof s == "number" ? s : s.id] = l;
    }
  }
  toString() {
    let e = this.prop(At.mounted);
    if (e && !e.overlay)
      return e.tree.toString();
    let n = "";
    for (let i of this.children) {
      let r = i.toString();
      r && (n && (n += ","), n += r);
    }
    return this.type.name ? (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (n.length ? "(" + n + ")" : "") : n;
  }
  cursor(e = 0) {
    return new _u(this.topNode, e);
  }
  cursorAt(e, n = 0, i = 0) {
    let r = $f.get(this) || this.topNode, o = new _u(r);
    return o.moveTo(e, n), $f.set(this, o._tree), o;
  }
  get topNode() {
    return new to(this, 0, 0, null);
  }
  resolve(e, n = 0) {
    let i = Pl($f.get(this) || this.topNode, e, n, !1);
    return $f.set(this, i), i;
  }
  resolveInner(e, n = 0) {
    let i = Pl(My.get(this) || this.topNode, e, n, !0);
    return My.set(this, i), i;
  }
  iterate(e) {
    let { enter: n, leave: i, from: r = 0, to: o = this.length } = e;
    for (let s = this.cursor((e.mode || 0) | Yn.IncludeAnonymous); ; ) {
      let l = !1;
      if (s.from <= o && s.to >= r && (s.type.isAnonymous || n(s) !== !1)) {
        if (s.firstChild())
          continue;
        l = !0;
      }
      for (; l && i && !s.type.isAnonymous && i(s), !s.nextSibling(); ) {
        if (!s.parent())
          return;
        l = !0;
      }
    }
  }
  prop(e) {
    return e.perNode ? this.props ? this.props[e.id] : void 0 : this.type.prop(e);
  }
  get propValues() {
    let e = [];
    if (this.props)
      for (let n in this.props)
        e.push([+n, this.props[n]]);
    return e;
  }
  balance(e = {}) {
    return this.children.length <= 8 ? this : Rg(wi.none, this.children, this.positions, 0, this.children.length, 0, this.length, (n, i, r) => new Pn(this.type, n, i, r, this.propValues), e.makeTree || ((n, i, r) => new Pn(wi.none, n, i, r)));
  }
  static build(e) {
    return _F(e);
  }
}
Pn.empty = new Pn(wi.none, [], [], 0);
class Eg {
  constructor(e, n) {
    this.buffer = e, this.index = n;
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  get pos() {
    return this.index;
  }
  next() {
    this.index -= 4;
  }
  fork() {
    return new Eg(this.buffer, this.index);
  }
}
class Ls {
  constructor(e, n, i) {
    this.buffer = e, this.length = n, this.set = i;
  }
  get type() {
    return wi.none;
  }
  toString() {
    let e = [];
    for (let n = 0; n < this.buffer.length; )
      e.push(this.childString(n)), n = this.buffer[n + 3];
    return e.join(",");
  }
  childString(e) {
    let n = this.buffer[e], i = this.buffer[e + 3], r = this.set.types[n], o = r.name;
    if (/\W/.test(o) && !r.isError && (o = JSON.stringify(o)), e += 4, i == e)
      return o;
    let s = [];
    for (; e < i; )
      s.push(this.childString(e)), e = this.buffer[e + 3];
    return o + "(" + s.join(",") + ")";
  }
  findChild(e, n, i, r, o) {
    let { buffer: s } = this, l = -1;
    for (let a = e; a != n && !(l4(o, r, s[a + 1], s[a + 2]) && (l = a, i > 0)); a = s[a + 3])
      ;
    return l;
  }
  slice(e, n, i) {
    let r = this.buffer, o = new Uint16Array(n - e), s = 0;
    for (let l = e, a = 0; l < n; ) {
      o[a++] = r[l++], o[a++] = r[l++] - i;
      let f = o[a++] = r[l++] - i;
      o[a++] = r[l++] - e, s = Math.max(s, f);
    }
    return new Ls(o, s, this.set);
  }
}
function l4(t, e, n, i) {
  switch (t) {
    case -2:
      return n < e;
    case -1:
      return i >= e && n < e;
    case 0:
      return n < e && i > e;
    case 1:
      return n <= e && i > e;
    case 2:
      return i > e;
    case 4:
      return !0;
  }
}
function a4(t, e) {
  let n = t.childBefore(e);
  for (; n; ) {
    let i = n.lastChild;
    if (!i || i.to != n.to)
      break;
    i.type.isError && i.from == i.to ? (t = n, n = i.prevSibling) : n = i;
  }
  return t;
}
function Pl(t, e, n, i) {
  for (var r; t.from == t.to || (n < 1 ? t.from >= e : t.from > e) || (n > -1 ? t.to <= e : t.to < e); ) {
    let s = !i && t instanceof to && t.index < 0 ? null : t.parent;
    if (!s)
      return t;
    t = s;
  }
  let o = i ? 0 : Yn.IgnoreOverlays;
  if (i)
    for (let s = t, l = s.parent; l; s = l, l = s.parent)
      s instanceof to && s.index < 0 && ((r = l.enter(e, n, o)) === null || r === void 0 ? void 0 : r.from) != s.from && (t = l);
  for (; ; ) {
    let s = t.enter(e, n, o);
    if (!s)
      return t;
    t = s;
  }
}
class to {
  constructor(e, n, i, r) {
    this._tree = e, this.from = n, this.index = i, this._parent = r;
  }
  get type() {
    return this._tree.type;
  }
  get name() {
    return this._tree.type.name;
  }
  get to() {
    return this.from + this._tree.length;
  }
  nextChild(e, n, i, r, o = 0) {
    for (let s = this; ; ) {
      for (let { children: l, positions: a } = s._tree, f = n > 0 ? l.length : -1; e != f; e += n) {
        let c = l[e], u = a[e] + s.from;
        if (l4(r, i, u, u + c.length)) {
          if (c instanceof Ls) {
            if (o & Yn.ExcludeBuffers)
              continue;
            let h = c.findChild(0, c.buffer.length, n, i - u, r);
            if (h > -1)
              return new Eo(new bF(s, c, e, u), null, h);
          } else if (o & Yn.IncludeAnonymous || !c.type.isAnonymous || Pg(c)) {
            let h;
            if (!(o & Yn.IgnoreMounts) && c.props && (h = c.prop(At.mounted)) && !h.overlay)
              return new to(h.tree, u, e, s);
            let d = new to(c, u, e, s);
            return o & Yn.IncludeAnonymous || !d.type.isAnonymous ? d : d.nextChild(n < 0 ? c.children.length - 1 : 0, n, i, r);
          }
        }
      }
      if (o & Yn.IncludeAnonymous || !s.type.isAnonymous || (s.index >= 0 ? e = s.index + n : e = n < 0 ? -1 : s._parent._tree.children.length, s = s._parent, !s))
        return null;
    }
  }
  get firstChild() {
    return this.nextChild(0, 1, 0, 4);
  }
  get lastChild() {
    return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
  }
  childAfter(e) {
    return this.nextChild(0, 1, e, 2);
  }
  childBefore(e) {
    return this.nextChild(this._tree.children.length - 1, -1, e, -2);
  }
  enter(e, n, i = 0) {
    let r;
    if (!(i & Yn.IgnoreOverlays) && (r = this._tree.prop(At.mounted)) && r.overlay) {
      let o = e - this.from;
      for (let { from: s, to: l } of r.overlay)
        if ((n > 0 ? s <= o : s < o) && (n < 0 ? l >= o : l > o))
          return new to(r.tree, r.overlay[0].from + this.from, -1, this);
    }
    return this.nextChild(0, 1, e, n, i);
  }
  nextSignificantParent() {
    let e = this;
    for (; e.type.isAnonymous && e._parent; )
      e = e._parent;
    return e;
  }
  get parent() {
    return this._parent ? this._parent.nextSignificantParent() : null;
  }
  get nextSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
  }
  get prevSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
  }
  cursor(e = 0) {
    return new _u(this, e);
  }
  get tree() {
    return this._tree;
  }
  toTree() {
    return this._tree;
  }
  resolve(e, n = 0) {
    return Pl(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Pl(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return a4(this, e);
  }
  getChild(e, n = null, i = null) {
    let r = gu(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return gu(this, e, n, i);
  }
  toString() {
    return this._tree.toString();
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return bu(this, e);
  }
}
function gu(t, e, n, i) {
  let r = t.cursor(), o = [];
  if (!r.firstChild())
    return o;
  if (n != null) {
    for (; !r.type.is(n); )
      if (!r.nextSibling())
        return o;
  }
  for (; ; ) {
    if (i != null && r.type.is(i))
      return o;
    if (r.type.is(e) && o.push(r.node), !r.nextSibling())
      return i == null ? o : [];
  }
}
function bu(t, e, n = e.length - 1) {
  for (let i = t.parent; n >= 0; i = i.parent) {
    if (!i)
      return !1;
    if (!i.type.isAnonymous) {
      if (e[n] && e[n] != i.name)
        return !1;
      n--;
    }
  }
  return !0;
}
class bF {
  constructor(e, n, i, r) {
    this.parent = e, this.buffer = n, this.index = i, this.start = r;
  }
}
class Eo {
  get name() {
    return this.type.name;
  }
  get from() {
    return this.context.start + this.context.buffer.buffer[this.index + 1];
  }
  get to() {
    return this.context.start + this.context.buffer.buffer[this.index + 2];
  }
  constructor(e, n, i) {
    this.context = e, this._parent = n, this.index = i, this.type = e.buffer.set.types[e.buffer.buffer[i]];
  }
  child(e, n, i) {
    let { buffer: r } = this.context, o = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.context.start, i);
    return o < 0 ? null : new Eo(this.context, this, o);
  }
  get firstChild() {
    return this.child(1, 0, 4);
  }
  get lastChild() {
    return this.child(-1, 0, 4);
  }
  childAfter(e) {
    return this.child(1, e, 2);
  }
  childBefore(e) {
    return this.child(-1, e, -2);
  }
  enter(e, n, i = 0) {
    if (i & Yn.ExcludeBuffers)
      return null;
    let { buffer: r } = this.context, o = r.findChild(this.index + 4, r.buffer[this.index + 3], n > 0 ? 1 : -1, e - this.context.start, n);
    return o < 0 ? null : new Eo(this.context, this, o);
  }
  get parent() {
    return this._parent || this.context.parent.nextSignificantParent();
  }
  externalSibling(e) {
    return this._parent ? null : this.context.parent.nextChild(this.context.index + e, e, 0, 4);
  }
  get nextSibling() {
    let { buffer: e } = this.context, n = e.buffer[this.index + 3];
    return n < (this._parent ? e.buffer[this._parent.index + 3] : e.buffer.length) ? new Eo(this.context, this._parent, n) : this.externalSibling(1);
  }
  get prevSibling() {
    let { buffer: e } = this.context, n = this._parent ? this._parent.index + 4 : 0;
    return this.index == n ? this.externalSibling(-1) : new Eo(this.context, this._parent, e.findChild(n, this.index, -1, 0, 4));
  }
  cursor(e = 0) {
    return new _u(this, e);
  }
  get tree() {
    return null;
  }
  toTree() {
    let e = [], n = [], { buffer: i } = this.context, r = this.index + 4, o = i.buffer[this.index + 3];
    if (o > r) {
      let s = i.buffer[this.index + 1];
      e.push(i.slice(r, o, s)), n.push(0);
    }
    return new Pn(this.type, e, n, this.to - this.from);
  }
  resolve(e, n = 0) {
    return Pl(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Pl(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return a4(this, e);
  }
  toString() {
    return this.context.buffer.childString(this.index);
  }
  getChild(e, n = null, i = null) {
    let r = gu(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return gu(this, e, n, i);
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return bu(this, e);
  }
}
class _u {
  get name() {
    return this.type.name;
  }
  constructor(e, n = 0) {
    if (this.mode = n, this.buffer = null, this.stack = [], this.index = 0, this.bufferNode = null, e instanceof to)
      this.yieldNode(e);
    else {
      this._tree = e.context.parent, this.buffer = e.context;
      for (let i = e._parent; i; i = i._parent)
        this.stack.unshift(i.index);
      this.bufferNode = e, this.yieldBuf(e.index);
    }
  }
  yieldNode(e) {
    return e ? (this._tree = e, this.type = e.type, this.from = e.from, this.to = e.to, !0) : !1;
  }
  yieldBuf(e, n) {
    this.index = e;
    let { start: i, buffer: r } = this.buffer;
    return this.type = n || r.set.types[r.buffer[e]], this.from = i + r.buffer[e + 1], this.to = i + r.buffer[e + 2], !0;
  }
  yield(e) {
    return e ? e instanceof to ? (this.buffer = null, this.yieldNode(e)) : (this.buffer = e.context, this.yieldBuf(e.index, e.type)) : !1;
  }
  toString() {
    return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
  }
  enterChild(e, n, i) {
    if (!this.buffer)
      return this.yield(this._tree.nextChild(e < 0 ? this._tree._tree.children.length - 1 : 0, e, n, i, this.mode));
    let { buffer: r } = this.buffer, o = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.buffer.start, i);
    return o < 0 ? !1 : (this.stack.push(this.index), this.yieldBuf(o));
  }
  firstChild() {
    return this.enterChild(1, 0, 4);
  }
  lastChild() {
    return this.enterChild(-1, 0, 4);
  }
  childAfter(e) {
    return this.enterChild(1, e, 2);
  }
  childBefore(e) {
    return this.enterChild(-1, e, -2);
  }
  enter(e, n, i = this.mode) {
    return this.buffer ? i & Yn.ExcludeBuffers ? !1 : this.enterChild(1, e, n) : this.yield(this._tree.enter(e, n, i));
  }
  parent() {
    if (!this.buffer)
      return this.yieldNode(this.mode & Yn.IncludeAnonymous ? this._tree._parent : this._tree.parent);
    if (this.stack.length)
      return this.yieldBuf(this.stack.pop());
    let e = this.mode & Yn.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
    return this.buffer = null, this.yieldNode(e);
  }
  sibling(e) {
    if (!this.buffer)
      return this._tree._parent ? this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + e, e, 0, 4, this.mode)) : !1;
    let { buffer: n } = this.buffer, i = this.stack.length - 1;
    if (e < 0) {
      let r = i < 0 ? 0 : this.stack[i] + 4;
      if (this.index != r)
        return this.yieldBuf(n.findChild(r, this.index, -1, 0, 4));
    } else {
      let r = n.buffer[this.index + 3];
      if (r < (i < 0 ? n.buffer.length : n.buffer[this.stack[i] + 3]))
        return this.yieldBuf(r);
    }
    return i < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + e, e, 0, 4, this.mode)) : !1;
  }
  nextSibling() {
    return this.sibling(1);
  }
  prevSibling() {
    return this.sibling(-1);
  }
  atLastNode(e) {
    let n, i, { buffer: r } = this;
    if (r) {
      if (e > 0) {
        if (this.index < r.buffer.buffer.length)
          return !1;
      } else
        for (let o = 0; o < this.index; o++)
          if (r.buffer.buffer[o + 3] < this.index)
            return !1;
      ({ index: n, parent: i } = r);
    } else
      ({ index: n, _parent: i } = this._tree);
    for (; i; { index: n, _parent: i } = i)
      if (n > -1)
        for (let o = n + e, s = e < 0 ? -1 : i._tree.children.length; o != s; o += e) {
          let l = i._tree.children[o];
          if (this.mode & Yn.IncludeAnonymous || l instanceof Ls || !l.type.isAnonymous || Pg(l))
            return !1;
        }
    return !0;
  }
  move(e, n) {
    if (n && this.enterChild(e, 0, 4))
      return !0;
    for (; ; ) {
      if (this.sibling(e))
        return !0;
      if (this.atLastNode(e) || !this.parent())
        return !1;
    }
  }
  next(e = !0) {
    return this.move(1, e);
  }
  prev(e = !0) {
    return this.move(-1, e);
  }
  moveTo(e, n = 0) {
    for (; (this.from == this.to || (n < 1 ? this.from >= e : this.from > e) || (n > -1 ? this.to <= e : this.to < e)) && this.parent(); )
      ;
    for (; this.enterChild(1, e, n); )
      ;
    return this;
  }
  get node() {
    if (!this.buffer)
      return this._tree;
    let e = this.bufferNode, n = null, i = 0;
    if (e && e.context == this.buffer) {
      e:
        for (let r = this.index, o = this.stack.length; o >= 0; ) {
          for (let s = e; s; s = s._parent)
            if (s.index == r) {
              if (r == this.index)
                return s;
              n = s, i = o + 1;
              break e;
            }
          r = this.stack[--o];
        }
    }
    for (let r = i; r < this.stack.length; r++)
      n = new Eo(this.buffer, n, this.stack[r]);
    return this.bufferNode = new Eo(this.buffer, n, this.index);
  }
  get tree() {
    return this.buffer ? null : this._tree._tree;
  }
  iterate(e, n) {
    for (let i = 0; ; ) {
      let r = !1;
      if (this.type.isAnonymous || e(this) !== !1) {
        if (this.firstChild()) {
          i++;
          continue;
        }
        this.type.isAnonymous || (r = !0);
      }
      for (; r && n && n(this), r = this.type.isAnonymous, !this.nextSibling(); ) {
        if (!i)
          return;
        this.parent(), i--, r = !0;
      }
    }
  }
  matchContext(e) {
    if (!this.buffer)
      return bu(this.node, e);
    let { buffer: n } = this.buffer, { types: i } = n.set;
    for (let r = e.length - 1, o = this.stack.length - 1; r >= 0; o--) {
      if (o < 0)
        return bu(this.node, e, r);
      let s = i[n.buffer[this.stack[o]]];
      if (!s.isAnonymous) {
        if (e[r] && e[r] != s.name)
          return !1;
        r--;
      }
    }
    return !0;
  }
}
function Pg(t) {
  return t.children.some((e) => e instanceof Ls || !e.type.isAnonymous || Pg(e));
}
function _F(t) {
  var e;
  let { buffer: n, nodeSet: i, maxBufferLength: r = s4, reused: o = [], minRepeatType: s = i.types.length } = t, l = Array.isArray(n) ? new Eg(n, n.length) : n, a = i.types, f = 0, c = 0;
  function u(M, A, P, S, D) {
    let { id: x, start: V, end: R, size: W } = l, U = c;
    for (; W < 0; )
      if (l.next(), W == -1) {
        let N = o[x];
        P.push(N), S.push(V - M);
        return;
      } else if (W == -3) {
        f = x;
        return;
      } else if (W == -4) {
        c = x;
        return;
      } else
        throw new RangeError(`Unrecognized record size: ${W}`);
    let C = a[x], L, I, H = V - M;
    if (R - V <= r && (I = g(l.pos - A, D))) {
      let N = new Uint16Array(I.size - I.skip), T = l.pos - I.size, K = N.length;
      for (; l.pos > T; )
        K = _(I.start, N, K);
      L = new Ls(N, R - I.start, i), H = I.start - M;
    } else {
      let N = l.pos - W;
      l.next();
      let T = [], K = [], ne = x >= s ? x : -1, z = 0, Y = R;
      for (; l.pos > N; )
        ne >= 0 && l.id == ne && l.size >= 0 ? (l.end <= Y - r && (d(T, K, V, z, l.end, Y, ne, U), z = T.length, Y = l.end), l.next()) : u(V, N, T, K, ne);
      if (ne >= 0 && z > 0 && z < T.length && d(T, K, V, z, V, Y, ne, U), T.reverse(), K.reverse(), ne > -1 && z > 0) {
        let $ = h(C);
        L = Rg(C, T, K, 0, T.length, 0, R - V, $, $);
      } else
        L = p(C, T, K, R - V, U - R);
    }
    P.push(L), S.push(H);
  }
  function h(M) {
    return (A, P, S) => {
      let D = 0, x = A.length - 1, V, R;
      if (x >= 0 && (V = A[x]) instanceof Pn) {
        if (!x && V.type == M && V.length == S)
          return V;
        (R = V.prop(At.lookAhead)) && (D = P[x] + V.length + R);
      }
      return p(M, A, P, S, D);
    };
  }
  function d(M, A, P, S, D, x, V, R) {
    let W = [], U = [];
    for (; M.length > S; )
      W.push(M.pop()), U.push(A.pop() + P - D);
    M.push(p(i.types[V], W, U, x - D, R - x)), A.push(D - P);
  }
  function p(M, A, P, S, D = 0, x) {
    if (f) {
      let V = [At.contextHash, f];
      x = x ? [V].concat(x) : [V];
    }
    if (D > 25) {
      let V = [At.lookAhead, D];
      x = x ? [V].concat(x) : [V];
    }
    return new Pn(M, A, P, S, x);
  }
  function g(M, A) {
    let P = l.fork(), S = 0, D = 0, x = 0, V = P.end - r, R = { size: 0, start: 0, skip: 0 };
    e:
      for (let W = P.pos - M; P.pos > W; ) {
        let U = P.size;
        if (P.id == A && U >= 0) {
          R.size = S, R.start = D, R.skip = x, x += 4, S += 4, P.next();
          continue;
        }
        let C = P.pos - U;
        if (U < 0 || C < W || P.start < V)
          break;
        let L = P.id >= s ? 4 : 0, I = P.start;
        for (P.next(); P.pos > C; ) {
          if (P.size < 0)
            if (P.size == -3)
              L += 4;
            else
              break e;
          else
            P.id >= s && (L += 4);
          P.next();
        }
        D = I, S += U, x += L;
      }
    return (A < 0 || S == M) && (R.size = S, R.start = D, R.skip = x), R.size > 4 ? R : void 0;
  }
  function _(M, A, P) {
    let { id: S, start: D, end: x, size: V } = l;
    if (l.next(), V >= 0 && S < s) {
      let R = P;
      if (V > 4) {
        let W = l.pos - (V - 4);
        for (; l.pos > W; )
          P = _(M, A, P);
      }
      A[--P] = R, A[--P] = x - M, A[--P] = D - M, A[--P] = S;
    } else
      V == -3 ? f = S : V == -4 && (c = S);
    return P;
  }
  let b = [], y = [];
  for (; l.pos > 0; )
    u(t.start || 0, t.bufferStart || 0, b, y, -1);
  let v = (e = t.length) !== null && e !== void 0 ? e : b.length ? y[0] + b[0].length : 0;
  return new Pn(a[t.topID], b.reverse(), y.reverse(), v);
}
const Ay = /* @__PURE__ */ new WeakMap();
function Tc(t, e) {
  if (!t.isAnonymous || e instanceof Ls || e.type != t)
    return 1;
  let n = Ay.get(e);
  if (n == null) {
    n = 1;
    for (let i of e.children) {
      if (i.type != t || !(i instanceof Pn)) {
        n = 1;
        break;
      }
      n += Tc(t, i);
    }
    Ay.set(e, n);
  }
  return n;
}
function Rg(t, e, n, i, r, o, s, l, a) {
  let f = 0;
  for (let p = i; p < r; p++)
    f += Tc(t, e[p]);
  let c = Math.ceil(f * 1.5 / 8), u = [], h = [];
  function d(p, g, _, b, y) {
    for (let v = _; v < b; ) {
      let M = v, A = g[v], P = Tc(t, p[v]);
      for (v++; v < b; v++) {
        let S = Tc(t, p[v]);
        if (P + S >= c)
          break;
        P += S;
      }
      if (v == M + 1) {
        if (P > c) {
          let S = p[M];
          d(S.children, S.positions, 0, S.children.length, g[M] + y);
          continue;
        }
        u.push(p[M]);
      } else {
        let S = g[v - 1] + p[v - 1].length - A;
        u.push(Rg(t, p, g, M, v, A, S, null, a));
      }
      h.push(A + y - o);
    }
  }
  return d(e, n, i, r, 0), (l || a)(u, h, s);
}
class ys {
  constructor(e, n, i, r, o = !1, s = !1) {
    this.from = e, this.to = n, this.tree = i, this.offset = r, this.open = (o ? 1 : 0) | (s ? 2 : 0);
  }
  get openStart() {
    return (this.open & 1) > 0;
  }
  get openEnd() {
    return (this.open & 2) > 0;
  }
  static addTree(e, n = [], i = !1) {
    let r = [new ys(0, e.length, e, 0, !1, i)];
    for (let o of n)
      o.to > e.length && r.push(o);
    return r;
  }
  static applyChanges(e, n, i = 128) {
    if (!n.length)
      return e;
    let r = [], o = 1, s = e.length ? e[0] : null;
    for (let l = 0, a = 0, f = 0; ; l++) {
      let c = l < n.length ? n[l] : null, u = c ? c.fromA : 1e9;
      if (u - a >= i)
        for (; s && s.from < u; ) {
          let h = s;
          if (a >= h.from || u <= h.to || f) {
            let d = Math.max(h.from, a) - f, p = Math.min(h.to, u) - f;
            h = d >= p ? null : new ys(d, p, h.tree, h.offset + f, l > 0, !!c);
          }
          if (h && r.push(h), s.to > u)
            break;
          s = o < e.length ? e[o++] : null;
        }
      if (!c)
        break;
      a = c.toA, f = c.toA - c.toB;
    }
    return r;
  }
}
let f4 = class {
  startParse(e, n, i) {
    return typeof e == "string" && (e = new yF(e)), i = i ? i.length ? i.map((r) => new Ed(r.from, r.to)) : [new Ed(0, 0)] : [new Ed(0, e.length)], this.createParse(e, n || [], i);
  }
  parse(e, n, i) {
    let r = this.startParse(e, n, i);
    for (; ; ) {
      let o = r.advance();
      if (o)
        return o;
    }
  }
};
class yF {
  constructor(e) {
    this.string = e;
  }
  get length() {
    return this.string.length;
  }
  chunk(e) {
    return this.string.slice(e);
  }
  get lineChunks() {
    return !1;
  }
  read(e, n) {
    return this.string.slice(e, n);
  }
}
new At({ perNode: !0 });
let wF = 0;
class vr {
  constructor(e, n, i) {
    this.set = e, this.base = n, this.modified = i, this.id = wF++;
  }
  static define(e) {
    if (e != null && e.base)
      throw new Error("Can not derive from a modified tag");
    let n = new vr([], null, []);
    if (n.set.push(n), e)
      for (let i of e.set)
        n.set.push(i);
    return n;
  }
  static defineModifier() {
    let e = new yu();
    return (n) => n.modified.indexOf(e) > -1 ? n : yu.get(n.base || n, n.modified.concat(e).sort((i, r) => i.id - r.id));
  }
}
let vF = 0;
class yu {
  constructor() {
    this.instances = [], this.id = vF++;
  }
  static get(e, n) {
    if (!n.length)
      return e;
    let i = n[0].instances.find((l) => l.base == e && kF(n, l.modified));
    if (i)
      return i;
    let r = [], o = new vr(r, e, n);
    for (let l of n)
      l.instances.push(o);
    let s = CF(n);
    for (let l of e.set)
      if (!l.modified.length)
        for (let a of s)
          r.push(yu.get(l, a));
    return o;
  }
}
function kF(t, e) {
  return t.length == e.length && t.every((n, i) => n == e[i]);
}
function CF(t) {
  let e = [[]];
  for (let n = 0; n < t.length; n++)
    for (let i = 0, r = e.length; i < r; i++)
      e.push(e[i].concat(t[n]));
  return e.sort((n, i) => i.length - n.length);
}
function c4(t) {
  let e = /* @__PURE__ */ Object.create(null);
  for (let n in t) {
    let i = t[n];
    Array.isArray(i) || (i = [i]);
    for (let r of n.split(" "))
      if (r) {
        let o = [], s = 2, l = r;
        for (let u = 0; ; ) {
          if (l == "..." && u > 0 && u + 3 == r.length) {
            s = 1;
            break;
          }
          let h = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);
          if (!h)
            throw new RangeError("Invalid path: " + r);
          if (o.push(h[0] == "*" ? "" : h[0][0] == '"' ? JSON.parse(h[0]) : h[0]), u += h[0].length, u == r.length)
            break;
          let d = r[u++];
          if (u == r.length && d == "!") {
            s = 0;
            break;
          }
          if (d != "/")
            throw new RangeError("Invalid path: " + r);
          l = r.slice(u);
        }
        let a = o.length - 1, f = o[a];
        if (!f)
          throw new RangeError("Invalid path: " + r);
        let c = new wu(i, s, a > 0 ? o.slice(0, a) : null);
        e[f] = c.sort(e[f]);
      }
  }
  return u4.add(e);
}
const u4 = new At();
class wu {
  constructor(e, n, i, r) {
    this.tags = e, this.mode = n, this.context = i, this.next = r;
  }
  get opaque() {
    return this.mode == 0;
  }
  get inherit() {
    return this.mode == 1;
  }
  sort(e) {
    return !e || e.depth < this.depth ? (this.next = e, this) : (e.next = this.sort(e.next), e);
  }
  get depth() {
    return this.context ? this.context.length : 0;
  }
}
wu.empty = new wu([], 2, null);
function h4(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let o of t)
    if (!Array.isArray(o.tag))
      n[o.tag.id] = o.class;
    else
      for (let s of o.tag)
        n[s.id] = o.class;
  let { scope: i, all: r = null } = e || {};
  return {
    style: (o) => {
      let s = r;
      for (let l of o)
        for (let a of l.set) {
          let f = n[a.id];
          if (f) {
            s = s ? s + " " + f : f;
            break;
          }
        }
      return s;
    },
    scope: i
  };
}
function SF(t, e) {
  let n = null;
  for (let i of t) {
    let r = i.style(e);
    r && (n = n ? n + " " + r : r);
  }
  return n;
}
function MF(t, e, n, i = 0, r = t.length) {
  let o = new AF(i, Array.isArray(e) ? e : [e], n);
  o.highlightRange(t.cursor(), i, r, "", o.highlighters), o.flush(r);
}
class AF {
  constructor(e, n, i) {
    this.at = e, this.highlighters = n, this.span = i, this.class = "";
  }
  startSpan(e, n) {
    n != this.class && (this.flush(e), e > this.at && (this.at = e), this.class = n);
  }
  flush(e) {
    e > this.at && this.class && this.span(this.at, e, this.class);
  }
  highlightRange(e, n, i, r, o) {
    let { type: s, from: l, to: a } = e;
    if (l >= i || a <= n)
      return;
    s.isTop && (o = this.highlighters.filter((d) => !d.scope || d.scope(s)));
    let f = r, c = OF(e) || wu.empty, u = SF(o, c.tags);
    if (u && (f && (f += " "), f += u, c.mode == 1 && (r += (r ? " " : "") + u)), this.startSpan(e.from, f), c.opaque)
      return;
    let h = e.tree && e.tree.prop(At.mounted);
    if (h && h.overlay) {
      let d = e.node.enter(h.overlay[0].from + l, 1), p = this.highlighters.filter((_) => !_.scope || _.scope(h.tree.type)), g = e.firstChild();
      for (let _ = 0, b = l; ; _++) {
        let y = _ < h.overlay.length ? h.overlay[_] : null, v = y ? y.from + l : a, M = Math.max(n, b), A = Math.min(i, v);
        if (M < A && g)
          for (; e.from < A && (this.highlightRange(e, M, A, r, o), this.startSpan(Math.min(A, e.to), f), !(e.to >= v || !e.nextSibling())); )
            ;
        if (!y || v > i)
          break;
        b = y.to + l, b > n && (this.highlightRange(d.cursor(), Math.max(n, y.from + l), Math.min(i, b), r, p), this.startSpan(b, f));
      }
      g && e.parent();
    } else if (e.firstChild()) {
      do
        if (!(e.to <= n)) {
          if (e.from >= i)
            break;
          this.highlightRange(e, n, i, r, o), this.startSpan(Math.min(i, e.to), f);
        }
      while (e.nextSibling());
      e.parent();
    }
  }
}
function OF(t) {
  let e = t.type.prop(u4);
  for (; e && e.context && !t.matchContext(e.context); )
    e = e.next;
  return e || null;
}
const Ie = vr.define, ec = Ie(), yo = Ie(), Oy = Ie(yo), Ty = Ie(yo), wo = Ie(), tc = Ie(wo), Pd = Ie(wo), wr = Ie(), os = Ie(wr), _r = Ie(), yr = Ie(), om = Ie(), ta = Ie(om), nc = Ie(), Oe = {
  comment: ec,
  lineComment: Ie(ec),
  blockComment: Ie(ec),
  docComment: Ie(ec),
  name: yo,
  variableName: Ie(yo),
  typeName: Oy,
  tagName: Ie(Oy),
  propertyName: Ty,
  attributeName: Ie(Ty),
  className: Ie(yo),
  labelName: Ie(yo),
  namespace: Ie(yo),
  macroName: Ie(yo),
  literal: wo,
  string: tc,
  docString: Ie(tc),
  character: Ie(tc),
  attributeValue: Ie(tc),
  number: Pd,
  integer: Ie(Pd),
  float: Ie(Pd),
  bool: Ie(wo),
  regexp: Ie(wo),
  escape: Ie(wo),
  color: Ie(wo),
  url: Ie(wo),
  keyword: _r,
  self: Ie(_r),
  null: Ie(_r),
  atom: Ie(_r),
  unit: Ie(_r),
  modifier: Ie(_r),
  operatorKeyword: Ie(_r),
  controlKeyword: Ie(_r),
  definitionKeyword: Ie(_r),
  moduleKeyword: Ie(_r),
  operator: yr,
  derefOperator: Ie(yr),
  arithmeticOperator: Ie(yr),
  logicOperator: Ie(yr),
  bitwiseOperator: Ie(yr),
  compareOperator: Ie(yr),
  updateOperator: Ie(yr),
  definitionOperator: Ie(yr),
  typeOperator: Ie(yr),
  controlOperator: Ie(yr),
  punctuation: om,
  separator: Ie(om),
  bracket: ta,
  angleBracket: Ie(ta),
  squareBracket: Ie(ta),
  paren: Ie(ta),
  brace: Ie(ta),
  content: wr,
  heading: os,
  heading1: Ie(os),
  heading2: Ie(os),
  heading3: Ie(os),
  heading4: Ie(os),
  heading5: Ie(os),
  heading6: Ie(os),
  contentSeparator: Ie(wr),
  list: Ie(wr),
  quote: Ie(wr),
  emphasis: Ie(wr),
  strong: Ie(wr),
  link: Ie(wr),
  monospace: Ie(wr),
  strikethrough: Ie(wr),
  inserted: Ie(),
  deleted: Ie(),
  changed: Ie(),
  invalid: Ie(),
  meta: nc,
  documentMeta: Ie(nc),
  annotation: Ie(nc),
  processingInstruction: Ie(nc),
  definition: vr.defineModifier(),
  constant: vr.defineModifier(),
  function: vr.defineModifier(),
  standard: vr.defineModifier(),
  local: vr.defineModifier(),
  special: vr.defineModifier()
};
h4([
  { tag: Oe.link, class: "tok-link" },
  { tag: Oe.heading, class: "tok-heading" },
  { tag: Oe.emphasis, class: "tok-emphasis" },
  { tag: Oe.strong, class: "tok-strong" },
  { tag: Oe.keyword, class: "tok-keyword" },
  { tag: Oe.atom, class: "tok-atom" },
  { tag: Oe.bool, class: "tok-bool" },
  { tag: Oe.url, class: "tok-url" },
  { tag: Oe.labelName, class: "tok-labelName" },
  { tag: Oe.inserted, class: "tok-inserted" },
  { tag: Oe.deleted, class: "tok-deleted" },
  { tag: Oe.literal, class: "tok-literal" },
  { tag: Oe.string, class: "tok-string" },
  { tag: Oe.number, class: "tok-number" },
  { tag: [Oe.regexp, Oe.escape, Oe.special(Oe.string)], class: "tok-string2" },
  { tag: Oe.variableName, class: "tok-variableName" },
  { tag: Oe.local(Oe.variableName), class: "tok-variableName tok-local" },
  { tag: Oe.definition(Oe.variableName), class: "tok-variableName tok-definition" },
  { tag: Oe.special(Oe.variableName), class: "tok-variableName2" },
  { tag: Oe.definition(Oe.propertyName), class: "tok-propertyName tok-definition" },
  { tag: Oe.typeName, class: "tok-typeName" },
  { tag: Oe.namespace, class: "tok-namespace" },
  { tag: Oe.className, class: "tok-className" },
  { tag: Oe.macroName, class: "tok-macroName" },
  { tag: Oe.propertyName, class: "tok-propertyName" },
  { tag: Oe.operator, class: "tok-operator" },
  { tag: Oe.comment, class: "tok-comment" },
  { tag: Oe.meta, class: "tok-meta" },
  { tag: Oe.invalid, class: "tok-invalid" },
  { tag: Oe.punctuation, class: "tok-punctuation" }
]);
var Rd;
const Qa = /* @__PURE__ */ new At();
function TF(t) {
  return Xe.define({
    combine: t ? (e) => e.concat(t) : void 0
  });
}
class tr {
  constructor(e, n, i = [], r = "") {
    this.data = e, this.name = r, St.prototype.hasOwnProperty("tree") || Object.defineProperty(St.prototype, "tree", { get() {
      return ni(this);
    } }), this.parser = n, this.extension = [
      qo.of(this),
      St.languageData.of((o, s, l) => o.facet(Ey(o, s, l)))
    ].concat(i);
  }
  isActiveAt(e, n, i = -1) {
    return Ey(e, n, i) == this.data;
  }
  findRegions(e) {
    let n = e.facet(qo);
    if ((n == null ? void 0 : n.data) == this.data)
      return [{ from: 0, to: e.doc.length }];
    if (!n || !n.allowsNesting)
      return [];
    let i = [], r = (o, s) => {
      if (o.prop(Qa) == this.data) {
        i.push({ from: s, to: s + o.length });
        return;
      }
      let l = o.prop(At.mounted);
      if (l) {
        if (l.tree.prop(Qa) == this.data) {
          if (l.overlay)
            for (let a of l.overlay)
              i.push({ from: a.from + s, to: a.to + s });
          else
            i.push({ from: s, to: s + o.length });
          return;
        } else if (l.overlay) {
          let a = i.length;
          if (r(l.tree, l.overlay[0].from + s), i.length > a)
            return;
        }
      }
      for (let a = 0; a < o.children.length; a++) {
        let f = o.children[a];
        f instanceof Pn && r(f, o.positions[a] + s);
      }
    };
    return r(ni(e), 0), i;
  }
  get allowsNesting() {
    return !0;
  }
}
tr.setState = /* @__PURE__ */ gt.define();
function Ey(t, e, n) {
  let i = t.facet(qo);
  if (!i)
    return null;
  let r = i.data;
  if (i.allowsNesting)
    for (let o = ni(t).topNode; o; o = o.enter(e, n, Yn.ExcludeBuffers))
      r = o.type.prop(Qa) || r;
  return r;
}
class vu extends tr {
  constructor(e, n, i) {
    super(e, n, [], i), this.parser = n;
  }
  static define(e) {
    let n = TF(e.languageData);
    return new vu(n, e.parser.configure({
      props: [Qa.add((i) => i.isTop ? n : void 0)]
    }), e.name);
  }
  configure(e, n) {
    return new vu(this.data, this.parser.configure(e), n || this.name);
  }
  get allowsNesting() {
    return this.parser.hasWrappers();
  }
}
function ni(t) {
  let e = t.field(tr.state, !1);
  return e ? e.tree : Pn.empty;
}
class EF {
  constructor(e, n = e.length) {
    this.doc = e, this.length = n, this.cursorPos = 0, this.string = "", this.cursor = e.iter();
  }
  syncTo(e) {
    return this.string = this.cursor.next(e - this.cursorPos).value, this.cursorPos = e + this.string.length, this.cursorPos - this.string.length;
  }
  chunk(e) {
    return this.syncTo(e), this.string;
  }
  get lineChunks() {
    return !0;
  }
  read(e, n) {
    let i = this.cursorPos - this.string.length;
    return e < i || n >= this.cursorPos ? this.doc.sliceString(e, n) : this.string.slice(e - i, n - i);
  }
}
let na = null;
class ku {
  constructor(e, n, i = [], r, o, s, l, a) {
    this.parser = e, this.state = n, this.fragments = i, this.tree = r, this.treeLen = o, this.viewport = s, this.skipped = l, this.scheduleOn = a, this.parse = null, this.tempSkipped = [];
  }
  static create(e, n, i) {
    return new ku(e, n, [], Pn.empty, 0, i, [], null);
  }
  startParse() {
    return this.parser.startParse(new EF(this.state.doc), this.fragments);
  }
  work(e, n) {
    return n != null && n >= this.state.doc.length && (n = void 0), this.tree != Pn.empty && this.isDone(n ?? this.state.doc.length) ? (this.takeTree(), !0) : this.withContext(() => {
      var i;
      if (typeof e == "number") {
        let r = Date.now() + e;
        e = () => Date.now() > r;
      }
      for (this.parse || (this.parse = this.startParse()), n != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > n) && n < this.state.doc.length && this.parse.stopAt(n); ; ) {
        let r = this.parse.advance();
        if (r)
          if (this.fragments = this.withoutTempSkipped(ys.addTree(r, this.fragments, this.parse.stoppedAt != null)), this.treeLen = (i = this.parse.stoppedAt) !== null && i !== void 0 ? i : this.state.doc.length, this.tree = r, this.parse = null, this.treeLen < (n ?? this.state.doc.length))
            this.parse = this.startParse();
          else
            return !0;
        if (e())
          return !1;
      }
    });
  }
  takeTree() {
    let e, n;
    this.parse && (e = this.parse.parsedPos) >= this.treeLen && ((this.parse.stoppedAt == null || this.parse.stoppedAt > e) && this.parse.stopAt(e), this.withContext(() => {
      for (; !(n = this.parse.advance()); )
        ;
    }), this.treeLen = e, this.tree = n, this.fragments = this.withoutTempSkipped(ys.addTree(this.tree, this.fragments, !0)), this.parse = null);
  }
  withContext(e) {
    let n = na;
    na = this;
    try {
      return e();
    } finally {
      na = n;
    }
  }
  withoutTempSkipped(e) {
    for (let n; n = this.tempSkipped.pop(); )
      e = Py(e, n.from, n.to);
    return e;
  }
  changes(e, n) {
    let { fragments: i, tree: r, treeLen: o, viewport: s, skipped: l } = this;
    if (this.takeTree(), !e.empty) {
      let a = [];
      if (e.iterChangedRanges((f, c, u, h) => a.push({ fromA: f, toA: c, fromB: u, toB: h })), i = ys.applyChanges(i, a), r = Pn.empty, o = 0, s = { from: e.mapPos(s.from, -1), to: e.mapPos(s.to, 1) }, this.skipped.length) {
        l = [];
        for (let f of this.skipped) {
          let c = e.mapPos(f.from, 1), u = e.mapPos(f.to, -1);
          c < u && l.push({ from: c, to: u });
        }
      }
    }
    return new ku(this.parser, n, i, r, o, s, l, this.scheduleOn);
  }
  updateViewport(e) {
    if (this.viewport.from == e.from && this.viewport.to == e.to)
      return !1;
    this.viewport = e;
    let n = this.skipped.length;
    for (let i = 0; i < this.skipped.length; i++) {
      let { from: r, to: o } = this.skipped[i];
      r < e.to && o > e.from && (this.fragments = Py(this.fragments, r, o), this.skipped.splice(i--, 1));
    }
    return this.skipped.length >= n ? !1 : (this.reset(), !0);
  }
  reset() {
    this.parse && (this.takeTree(), this.parse = null);
  }
  skipUntilInView(e, n) {
    this.skipped.push({ from: e, to: n });
  }
  static getSkippingParser(e) {
    return new class extends f4 {
      createParse(n, i, r) {
        let o = r[0].from, s = r[r.length - 1].to;
        return {
          parsedPos: o,
          advance() {
            let a = na;
            if (a) {
              for (let f of r)
                a.tempSkipped.push(f);
              e && (a.scheduleOn = a.scheduleOn ? Promise.all([a.scheduleOn, e]) : e);
            }
            return this.parsedPos = s, new Pn(wi.none, [], [], s - o);
          },
          stoppedAt: null,
          stopAt() {
          }
        };
      }
    }();
  }
  isDone(e) {
    e = Math.min(e, this.state.doc.length);
    let n = this.fragments;
    return this.treeLen >= e && n.length && n[0].from == 0 && n[0].to >= e;
  }
  static get() {
    return na;
  }
}
function Py(t, e, n) {
  return ys.applyChanges(t, [{ fromA: e, toA: n, fromB: e, toB: n }]);
}
class Rl {
  constructor(e) {
    this.context = e, this.tree = e.tree;
  }
  apply(e) {
    if (!e.docChanged && this.tree == this.context.tree)
      return this;
    let n = this.context.changes(e.changes, e.state), i = this.context.treeLen == e.startState.doc.length ? void 0 : Math.max(e.changes.mapPos(this.context.treeLen), n.viewport.to);
    return n.work(20, i) || n.takeTree(), new Rl(n);
  }
  static init(e) {
    let n = Math.min(3e3, e.doc.length), i = ku.create(e.facet(qo).parser, e, { from: 0, to: n });
    return i.work(20, n) || i.takeTree(), new Rl(i);
  }
}
tr.state = /* @__PURE__ */ xn.define({
  create: Rl.init,
  update(t, e) {
    for (let n of e.effects)
      if (n.is(tr.setState))
        return n.value;
    return e.startState.facet(qo) != e.state.facet(qo) ? Rl.init(e.state) : t.apply(e);
  }
});
let d4 = (t) => {
  let e = setTimeout(() => t(), 500);
  return () => clearTimeout(e);
};
typeof requestIdleCallback < "u" && (d4 = (t) => {
  let e = -1, n = setTimeout(() => {
    e = requestIdleCallback(t, { timeout: 500 - 100 });
  }, 100);
  return () => e < 0 ? clearTimeout(n) : cancelIdleCallback(e);
});
const Id = typeof navigator < "u" && (!((Rd = navigator.scheduling) === null || Rd === void 0) && Rd.isInputPending) ? () => navigator.scheduling.isInputPending() : null, PF = /* @__PURE__ */ Rn.fromClass(class {
  constructor(e) {
    this.view = e, this.working = null, this.workScheduled = 0, this.chunkEnd = -1, this.chunkBudget = -1, this.work = this.work.bind(this), this.scheduleWork();
  }
  update(e) {
    let n = this.view.state.field(tr.state).context;
    (n.updateViewport(e.view.viewport) || this.view.viewport.to > n.treeLen) && this.scheduleWork(), e.docChanged && (this.view.hasFocus && (this.chunkBudget += 50), this.scheduleWork()), this.checkAsyncSchedule(n);
  }
  scheduleWork() {
    if (this.working)
      return;
    let { state: e } = this.view, n = e.field(tr.state);
    (n.tree != n.context.tree || !n.context.isDone(e.doc.length)) && (this.working = d4(this.work));
  }
  work(e) {
    this.working = null;
    let n = Date.now();
    if (this.chunkEnd < n && (this.chunkEnd < 0 || this.view.hasFocus) && (this.chunkEnd = n + 3e4, this.chunkBudget = 3e3), this.chunkBudget <= 0)
      return;
    let { state: i, viewport: { to: r } } = this.view, o = i.field(tr.state);
    if (o.tree == o.context.tree && o.context.isDone(r + 1e5))
      return;
    let s = Date.now() + Math.min(this.chunkBudget, 100, e && !Id ? Math.max(25, e.timeRemaining() - 5) : 1e9), l = o.context.treeLen < r && i.doc.length > r + 1e3, a = o.context.work(() => Id && Id() || Date.now() > s, r + (l ? 0 : 1e5));
    this.chunkBudget -= Date.now() - n, (a || this.chunkBudget <= 0) && (o.context.takeTree(), this.view.dispatch({ effects: tr.setState.of(new Rl(o.context)) })), this.chunkBudget > 0 && !(a && !l) && this.scheduleWork(), this.checkAsyncSchedule(o.context);
  }
  checkAsyncSchedule(e) {
    e.scheduleOn && (this.workScheduled++, e.scheduleOn.then(() => this.scheduleWork()).catch((n) => Ti(this.view.state, n)).then(() => this.workScheduled--), e.scheduleOn = null);
  }
  destroy() {
    this.working && this.working();
  }
  isWorking() {
    return !!(this.working || this.workScheduled > 0);
  }
}, {
  eventHandlers: { focus() {
    this.scheduleWork();
  } }
}), qo = /* @__PURE__ */ Xe.define({
  combine(t) {
    return t.length ? t[0] : null;
  },
  enables: (t) => [
    tr.state,
    PF,
    Ge.contentAttributes.compute([t], (e) => {
      let n = e.facet(t);
      return n && n.name ? { "data-language": n.name } : {};
    })
  ]
});
class RF {
  constructor(e, n = []) {
    this.language = e, this.support = n, this.extension = [e, n];
  }
}
const IF = /* @__PURE__ */ Xe.define(), Ph = /* @__PURE__ */ Xe.define({
  combine: (t) => {
    if (!t.length)
      return "  ";
    if (!/^(?: +|\t+)$/.test(t[0]))
      throw new Error("Invalid indent unit: " + JSON.stringify(t[0]));
    return t[0];
  }
});
function Cu(t) {
  let e = t.facet(Ph);
  return e.charCodeAt(0) == 9 ? t.tabSize * e.length : e.length;
}
function Ya(t, e) {
  let n = "", i = t.tabSize;
  if (t.facet(Ph).charCodeAt(0) == 9)
    for (; e >= i; )
      n += "	", e -= i;
  for (let r = 0; r < e; r++)
    n += " ";
  return n;
}
function Ig(t, e) {
  t instanceof St && (t = new Rh(t));
  for (let i of t.state.facet(IF)) {
    let r = i(t, e);
    if (r !== void 0)
      return r;
  }
  let n = ni(t.state);
  return n ? NF(t, n, e) : null;
}
class Rh {
  constructor(e, n = {}) {
    this.state = e, this.options = n, this.unit = Cu(e);
  }
  lineAt(e, n = 1) {
    let i = this.state.doc.lineAt(e), { simulateBreak: r, simulateDoubleBreak: o } = this.options;
    return r != null && r >= i.from && r <= i.to ? o && r == e ? { text: "", from: e } : (n < 0 ? r < e : r <= e) ? { text: i.text.slice(r - i.from), from: r } : { text: i.text.slice(0, r - i.from), from: i.from } : i;
  }
  textAfterPos(e, n = 1) {
    if (this.options.simulateDoubleBreak && e == this.options.simulateBreak)
      return "";
    let { text: i, from: r } = this.lineAt(e, n);
    return i.slice(e - r, Math.min(i.length, e + 100 - r));
  }
  column(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), o = this.countColumn(i, e - r), s = this.options.overrideIndentation ? this.options.overrideIndentation(r) : -1;
    return s > -1 && (o += s - this.countColumn(i, i.search(/\S|$/))), o;
  }
  countColumn(e, n = e.length) {
    return mf(e, this.state.tabSize, n);
  }
  lineIndent(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), o = this.options.overrideIndentation;
    if (o) {
      let s = o(r);
      if (s > -1)
        return s;
    }
    return this.countColumn(i, i.search(/\S|$/));
  }
  get simulatedBreak() {
    return this.options.simulateBreak || null;
  }
}
const p4 = /* @__PURE__ */ new At();
function NF(t, e, n) {
  return m4(e.resolveInner(n).enterUnfinishedNodesBefore(n), n, t);
}
function DF(t) {
  return t.pos == t.options.simulateBreak && t.options.simulateDoubleBreak;
}
function jF(t) {
  let e = t.type.prop(p4);
  if (e)
    return e;
  let n = t.firstChild, i;
  if (n && (i = n.type.prop(At.closedBy))) {
    let r = t.lastChild, o = r && i.indexOf(r.name) > -1;
    return (s) => zF(s, !0, 1, void 0, o && !DF(s) ? r.from : void 0);
  }
  return t.parent == null ? BF : null;
}
function m4(t, e, n) {
  for (; t; t = t.parent) {
    let i = jF(t);
    if (i)
      return i(Ng.create(n, e, t));
  }
  return null;
}
function BF() {
  return 0;
}
class Ng extends Rh {
  constructor(e, n, i) {
    super(e.state, e.options), this.base = e, this.pos = n, this.node = i;
  }
  static create(e, n, i) {
    return new Ng(e, n, i);
  }
  get textAfter() {
    return this.textAfterPos(this.pos);
  }
  get baseIndent() {
    let e = this.state.doc.lineAt(this.node.from);
    for (; ; ) {
      let n = this.node.resolve(e.from);
      for (; n.parent && n.parent.from == n.from; )
        n = n.parent;
      if (LF(n, this.node))
        break;
      e = this.state.doc.lineAt(n.from);
    }
    return this.lineIndent(e.from);
  }
  continue() {
    let e = this.node.parent;
    return e ? m4(e, this.pos, this.base) : 0;
  }
}
function LF(t, e) {
  for (let n = e; n; n = n.parent)
    if (t == n)
      return !0;
  return !1;
}
function xF(t) {
  let e = t.node, n = e.childAfter(e.from), i = e.lastChild;
  if (!n)
    return null;
  let r = t.options.simulateBreak, o = t.state.doc.lineAt(n.from), s = r == null || r <= o.from ? o.to : Math.min(o.to, r);
  for (let l = n.to; ; ) {
    let a = e.childAfter(l);
    if (!a || a == i)
      return null;
    if (!a.type.isSkipped)
      return a.from < s ? n : null;
    l = a.to;
  }
}
function zF(t, e, n, i, r) {
  let o = t.textAfter, s = o.match(/^\s*/)[0].length, l = i && o.slice(s, s + i.length) == i || r == t.pos + s, a = e ? xF(t) : null;
  return a ? l ? t.column(a.from) : t.column(a.to) : t.baseIndent + (l ? 0 : t.unit * n);
}
function Ry({ except: t, units: e = 1 } = {}) {
  return (n) => {
    let i = t && t.test(n.textAfter);
    return n.baseIndent + (i ? 0 : e * n.unit);
  };
}
const VF = 200;
function FF() {
  return St.transactionFilter.of((t) => {
    if (!t.docChanged || !t.isUserEvent("input.type") && !t.isUserEvent("input.complete"))
      return t;
    let e = t.startState.languageDataAt("indentOnInput", t.startState.selection.main.head);
    if (!e.length)
      return t;
    let n = t.newDoc, { head: i } = t.newSelection.main, r = n.lineAt(i);
    if (i > r.from + VF)
      return t;
    let o = n.sliceString(r.from, i);
    if (!e.some((f) => f.test(o)))
      return t;
    let { state: s } = t, l = -1, a = [];
    for (let { head: f } of s.selection.ranges) {
      let c = s.doc.lineAt(f);
      if (c.from == l)
        continue;
      l = c.from;
      let u = Ig(s, c.from);
      if (u == null)
        continue;
      let h = /^\s*/.exec(c.text)[0], d = Ya(s, u);
      h != d && a.push({ from: c.from, to: c.from + h.length, insert: d });
    }
    return a.length ? [t, { changes: a, sequential: !0 }] : t;
  });
}
const HF = /* @__PURE__ */ Xe.define(), g4 = /* @__PURE__ */ new At();
function WF(t) {
  let e = t.firstChild, n = t.lastChild;
  return e && e.to < n.from ? { from: e.to, to: n.type.isError ? t.to : n.from } : null;
}
function UF(t, e, n) {
  let i = ni(t);
  if (i.length < n)
    return null;
  let r = i.resolveInner(n, 1), o = null;
  for (let s = r; s; s = s.parent) {
    if (s.to <= n || s.from > n)
      continue;
    if (o && s.from < e)
      break;
    let l = s.type.prop(g4);
    if (l && (s.to < i.length - 50 || i.length == t.doc.length || !qF(s))) {
      let a = l(s, t);
      a && a.from <= n && a.from >= e && a.to > n && (o = a);
    }
  }
  return o;
}
function qF(t) {
  let e = t.lastChild;
  return e && e.to == t.to && e.type.isError;
}
function Su(t, e, n) {
  for (let i of t.facet(HF)) {
    let r = i(t, e, n);
    if (r)
      return r;
  }
  return UF(t, e, n);
}
function b4(t, e) {
  let n = e.mapPos(t.from, 1), i = e.mapPos(t.to, -1);
  return n >= i ? void 0 : { from: n, to: i };
}
const Ih = /* @__PURE__ */ gt.define({ map: b4 }), _f = /* @__PURE__ */ gt.define({ map: b4 });
function _4(t) {
  let e = [];
  for (let { head: n } of t.state.selection.ranges)
    e.some((i) => i.from <= n && i.to >= n) || e.push(t.lineBlockAt(n));
  return e;
}
const Ps = /* @__PURE__ */ xn.define({
  create() {
    return rt.none;
  },
  update(t, e) {
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(Ih) && !JF(t, n.value.from, n.value.to) ? t = t.update({ add: [Iy.range(n.value.from, n.value.to)] }) : n.is(_f) && (t = t.update({
        filter: (i, r) => n.value.from != i || n.value.to != r,
        filterFrom: n.value.from,
        filterTo: n.value.to
      }));
    if (e.selection) {
      let n = !1, { head: i } = e.selection.main;
      t.between(i, i, (r, o) => {
        r < i && o > i && (n = !0);
      }), n && (t = t.update({
        filterFrom: i,
        filterTo: i,
        filter: (r, o) => o <= i || r >= i
      }));
    }
    return t;
  },
  provide: (t) => Ge.decorations.from(t),
  toJSON(t, e) {
    let n = [];
    return t.between(0, e.doc.length, (i, r) => {
      n.push(i, r);
    }), n;
  },
  fromJSON(t) {
    if (!Array.isArray(t) || t.length % 2)
      throw new RangeError("Invalid JSON for fold state");
    let e = [];
    for (let n = 0; n < t.length; ) {
      let i = t[n++], r = t[n++];
      if (typeof i != "number" || typeof r != "number")
        throw new RangeError("Invalid JSON for fold state");
      e.push(Iy.range(i, r));
    }
    return rt.set(e, !0);
  }
});
function Mu(t, e, n) {
  var i;
  let r = null;
  return (i = t.field(Ps, !1)) === null || i === void 0 || i.between(e, n, (o, s) => {
    (!r || r.from > o) && (r = { from: o, to: s });
  }), r;
}
function JF(t, e, n) {
  let i = !1;
  return t.between(e, e, (r, o) => {
    r == e && o == n && (i = !0);
  }), i;
}
function y4(t, e) {
  return t.field(Ps, !1) ? e : e.concat(gt.appendConfig.of(k4()));
}
const KF = (t) => {
  for (let e of _4(t)) {
    let n = Su(t.state, e.from, e.to);
    if (n)
      return t.dispatch({ effects: y4(t.state, [Ih.of(n), w4(t, n)]) }), !0;
  }
  return !1;
}, GF = (t) => {
  if (!t.state.field(Ps, !1))
    return !1;
  let e = [];
  for (let n of _4(t)) {
    let i = Mu(t.state, n.from, n.to);
    i && e.push(_f.of(i), w4(t, i, !1));
  }
  return e.length && t.dispatch({ effects: e }), e.length > 0;
};
function w4(t, e, n = !0) {
  let i = t.state.doc.lineAt(e.from).number, r = t.state.doc.lineAt(e.to).number;
  return Ge.announce.of(`${t.state.phrase(n ? "Folded lines" : "Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`);
}
const XF = (t) => {
  let { state: e } = t, n = [];
  for (let i = 0; i < e.doc.length; ) {
    let r = t.lineBlockAt(i), o = Su(e, r.from, r.to);
    o && n.push(Ih.of(o)), i = (o ? t.lineBlockAt(o.to) : r).to + 1;
  }
  return n.length && t.dispatch({ effects: y4(t.state, n) }), !!n.length;
}, QF = (t) => {
  let e = t.state.field(Ps, !1);
  if (!e || !e.size)
    return !1;
  let n = [];
  return e.between(0, t.state.doc.length, (i, r) => {
    n.push(_f.of({ from: i, to: r }));
  }), t.dispatch({ effects: n }), !0;
}, YF = [
  { key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: KF },
  { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: GF },
  { key: "Ctrl-Alt-[", run: XF },
  { key: "Ctrl-Alt-]", run: QF }
], ZF = {
  placeholderDOM: null,
  placeholderText: "…"
}, v4 = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, ZF);
  }
});
function k4(t) {
  let e = [Ps, tH];
  return t && e.push(v4.of(t)), e;
}
const Iy = /* @__PURE__ */ rt.replace({ widget: /* @__PURE__ */ new class extends Yo {
  toDOM(t) {
    let { state: e } = t, n = e.facet(v4), i = (o) => {
      let s = t.lineBlockAt(t.posAtDOM(o.target)), l = Mu(t.state, s.from, s.to);
      l && t.dispatch({ effects: _f.of(l) }), o.preventDefault();
    };
    if (n.placeholderDOM)
      return n.placeholderDOM(t, i);
    let r = document.createElement("span");
    return r.textContent = n.placeholderText, r.setAttribute("aria-label", e.phrase("folded code")), r.title = e.phrase("unfold"), r.className = "cm-foldPlaceholder", r.onclick = i, r;
  }
}() }), $F = {
  openText: "⌄",
  closedText: "›",
  markerDOM: null,
  domEventHandlers: {},
  foldingChanged: () => !1
};
class Nd extends Fr {
  constructor(e, n) {
    super(), this.config = e, this.open = n;
  }
  eq(e) {
    return this.config == e.config && this.open == e.open;
  }
  toDOM(e) {
    if (this.config.markerDOM)
      return this.config.markerDOM(this.open);
    let n = document.createElement("span");
    return n.textContent = this.open ? this.config.openText : this.config.closedText, n.title = e.state.phrase(this.open ? "Fold line" : "Unfold line"), n;
  }
}
function eH(t = {}) {
  let e = Object.assign(Object.assign({}, $F), t), n = new Nd(e, !0), i = new Nd(e, !1), r = Rn.fromClass(class {
    constructor(s) {
      this.from = s.viewport.from, this.markers = this.buildMarkers(s);
    }
    update(s) {
      (s.docChanged || s.viewportChanged || s.startState.facet(qo) != s.state.facet(qo) || s.startState.field(Ps, !1) != s.state.field(Ps, !1) || ni(s.startState) != ni(s.state) || e.foldingChanged(s)) && (this.markers = this.buildMarkers(s.view));
    }
    buildMarkers(s) {
      let l = new Fo();
      for (let a of s.viewportLineBlocks) {
        let f = Mu(s.state, a.from, a.to) ? i : Su(s.state, a.from, a.to) ? n : null;
        f && l.add(a.from, a.from, f);
      }
      return l.finish();
    }
  }), { domEventHandlers: o } = e;
  return [
    r,
    n4({
      class: "cm-foldGutter",
      markers(s) {
        var l;
        return ((l = s.plugin(r)) === null || l === void 0 ? void 0 : l.markers) || Bt.empty;
      },
      initialSpacer() {
        return new Nd(e, !1);
      },
      domEventHandlers: Object.assign(Object.assign({}, o), { click: (s, l, a) => {
        if (o.click && o.click(s, l, a))
          return !0;
        let f = Mu(s.state, l.from, l.to);
        if (f)
          return s.dispatch({ effects: _f.of(f) }), !0;
        let c = Su(s.state, l.from, l.to);
        return c ? (s.dispatch({ effects: Ih.of(c) }), !0) : !1;
      } })
    }),
    k4()
  ];
}
const tH = /* @__PURE__ */ Ge.baseTheme({
  ".cm-foldPlaceholder": {
    backgroundColor: "#eee",
    border: "1px solid #ddd",
    color: "#888",
    borderRadius: ".2em",
    margin: "0 1px",
    padding: "0 1px",
    cursor: "pointer"
  },
  ".cm-foldGutter span": {
    padding: "0 1px",
    cursor: "pointer"
  }
});
class yf {
  constructor(e, n) {
    this.specs = e;
    let i;
    function r(l) {
      let a = Ho.newName();
      return (i || (i = /* @__PURE__ */ Object.create(null)))["." + a] = l, a;
    }
    const o = typeof n.all == "string" ? n.all : n.all ? r(n.all) : void 0, s = n.scope;
    this.scope = s instanceof tr ? (l) => l.prop(Qa) == s.data : s ? (l) => l == s : void 0, this.style = h4(e.map((l) => ({
      tag: l.tag,
      class: l.class || r(Object.assign({}, l, { tag: null }))
    })), {
      all: o
    }).style, this.module = i ? new Ho(i) : null, this.themeType = n.themeType;
  }
  static define(e, n) {
    return new yf(e, n || {});
  }
}
const sm = /* @__PURE__ */ Xe.define(), C4 = /* @__PURE__ */ Xe.define({
  combine(t) {
    return t.length ? [t[0]] : null;
  }
});
function Dd(t) {
  let e = t.facet(sm);
  return e.length ? e : t.facet(C4);
}
function S4(t, e) {
  let n = [iH], i;
  return t instanceof yf && (t.module && n.push(Ge.styleModule.of(t.module)), i = t.themeType), e != null && e.fallback ? n.push(C4.of(t)) : i ? n.push(sm.computeN([Ge.darkTheme], (r) => r.facet(Ge.darkTheme) == (i == "dark") ? [t] : [])) : n.push(sm.of(t)), n;
}
class nH {
  constructor(e) {
    this.markCache = /* @__PURE__ */ Object.create(null), this.tree = ni(e.state), this.decorations = this.buildDeco(e, Dd(e.state));
  }
  update(e) {
    let n = ni(e.state), i = Dd(e.state), r = i != Dd(e.startState);
    n.length < e.view.viewport.to && !r && n.type == this.tree.type ? this.decorations = this.decorations.map(e.changes) : (n != this.tree || e.viewportChanged || r) && (this.tree = n, this.decorations = this.buildDeco(e.view, i));
  }
  buildDeco(e, n) {
    if (!n || !this.tree.length)
      return rt.none;
    let i = new Fo();
    for (let { from: r, to: o } of e.visibleRanges)
      MF(this.tree, n, (s, l, a) => {
        i.add(s, l, this.markCache[a] || (this.markCache[a] = rt.mark({ class: a })));
      }, r, o);
    return i.finish();
  }
}
const iH = /* @__PURE__ */ ql.high(/* @__PURE__ */ Rn.fromClass(nH, {
  decorations: (t) => t.decorations
})), rH = /* @__PURE__ */ yf.define([
  {
    tag: Oe.meta,
    color: "#404740"
  },
  {
    tag: Oe.link,
    textDecoration: "underline"
  },
  {
    tag: Oe.heading,
    textDecoration: "underline",
    fontWeight: "bold"
  },
  {
    tag: Oe.emphasis,
    fontStyle: "italic"
  },
  {
    tag: Oe.strong,
    fontWeight: "bold"
  },
  {
    tag: Oe.strikethrough,
    textDecoration: "line-through"
  },
  {
    tag: Oe.keyword,
    color: "#708"
  },
  {
    tag: [Oe.atom, Oe.bool, Oe.url, Oe.contentSeparator, Oe.labelName],
    color: "#219"
  },
  {
    tag: [Oe.literal, Oe.inserted],
    color: "#164"
  },
  {
    tag: [Oe.string, Oe.deleted],
    color: "#a11"
  },
  {
    tag: [Oe.regexp, Oe.escape, /* @__PURE__ */ Oe.special(Oe.string)],
    color: "#e40"
  },
  {
    tag: /* @__PURE__ */ Oe.definition(Oe.variableName),
    color: "#00f"
  },
  {
    tag: /* @__PURE__ */ Oe.local(Oe.variableName),
    color: "#30a"
  },
  {
    tag: [Oe.typeName, Oe.namespace],
    color: "#085"
  },
  {
    tag: Oe.className,
    color: "#167"
  },
  {
    tag: [/* @__PURE__ */ Oe.special(Oe.variableName), Oe.macroName],
    color: "#256"
  },
  {
    tag: /* @__PURE__ */ Oe.definition(Oe.propertyName),
    color: "#00c"
  },
  {
    tag: Oe.comment,
    color: "#940"
  },
  {
    tag: Oe.invalid,
    color: "#f00"
  }
]), oH = /* @__PURE__ */ Ge.baseTheme({
  "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" },
  "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" }
}), M4 = 1e4, A4 = "()[]{}", O4 = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      afterCursor: !0,
      brackets: A4,
      maxScanDistance: M4,
      renderMatch: aH
    });
  }
}), sH = /* @__PURE__ */ rt.mark({ class: "cm-matchingBracket" }), lH = /* @__PURE__ */ rt.mark({ class: "cm-nonmatchingBracket" });
function aH(t) {
  let e = [], n = t.matched ? sH : lH;
  return e.push(n.range(t.start.from, t.start.to)), t.end && e.push(n.range(t.end.from, t.end.to)), e;
}
const fH = /* @__PURE__ */ xn.define({
  create() {
    return rt.none;
  },
  update(t, e) {
    if (!e.docChanged && !e.selection)
      return t;
    let n = [], i = e.state.facet(O4);
    for (let r of e.state.selection.ranges) {
      if (!r.empty)
        continue;
      let o = Mr(e.state, r.head, -1, i) || r.head > 0 && Mr(e.state, r.head - 1, 1, i) || i.afterCursor && (Mr(e.state, r.head, 1, i) || r.head < e.state.doc.length && Mr(e.state, r.head + 1, -1, i));
      o && (n = n.concat(i.renderMatch(o, e.state)));
    }
    return rt.set(n, !0);
  },
  provide: (t) => Ge.decorations.from(t)
}), cH = [
  fH,
  oH
];
function uH(t = {}) {
  return [O4.of(t), cH];
}
function lm(t, e, n) {
  let i = t.prop(e < 0 ? At.openedBy : At.closedBy);
  if (i)
    return i;
  if (t.name.length == 1) {
    let r = n.indexOf(t.name);
    if (r > -1 && r % 2 == (e < 0 ? 1 : 0))
      return [n[r + e]];
  }
  return null;
}
function Mr(t, e, n, i = {}) {
  let r = i.maxScanDistance || M4, o = i.brackets || A4, s = ni(t), l = s.resolveInner(e, n);
  for (let a = l; a; a = a.parent) {
    let f = lm(a.type, n, o);
    if (f && a.from < a.to)
      return hH(t, e, n, a, f, o);
  }
  return dH(t, e, n, s, l.type, r, o);
}
function hH(t, e, n, i, r, o) {
  let s = i.parent, l = { from: i.from, to: i.to }, a = 0, f = s == null ? void 0 : s.cursor();
  if (f && (n < 0 ? f.childBefore(i.from) : f.childAfter(i.to)))
    do
      if (n < 0 ? f.to <= i.from : f.from >= i.to) {
        if (a == 0 && r.indexOf(f.type.name) > -1 && f.from < f.to)
          return { start: l, end: { from: f.from, to: f.to }, matched: !0 };
        if (lm(f.type, n, o))
          a++;
        else if (lm(f.type, -n, o)) {
          if (a == 0)
            return {
              start: l,
              end: f.from == f.to ? void 0 : { from: f.from, to: f.to },
              matched: !1
            };
          a--;
        }
      }
    while (n < 0 ? f.prevSibling() : f.nextSibling());
  return { start: l, matched: !1 };
}
function dH(t, e, n, i, r, o, s) {
  let l = n < 0 ? t.sliceDoc(e - 1, e) : t.sliceDoc(e, e + 1), a = s.indexOf(l);
  if (a < 0 || a % 2 == 0 != n > 0)
    return null;
  let f = { from: n < 0 ? e - 1 : e, to: n > 0 ? e + 1 : e }, c = t.doc.iterRange(e, n > 0 ? t.doc.length : 0), u = 0;
  for (let h = 0; !c.next().done && h <= o; ) {
    let d = c.value;
    n < 0 && (h += d.length);
    let p = e + h * n;
    for (let g = n > 0 ? 0 : d.length - 1, _ = n > 0 ? d.length : -1; g != _; g += n) {
      let b = s.indexOf(d[g]);
      if (!(b < 0 || i.resolveInner(p + g, 1).type != r))
        if (b % 2 == 0 == n > 0)
          u++;
        else {
          if (u == 1)
            return { start: f, end: { from: p + g, to: p + g + 1 }, matched: b >> 1 == a >> 1 };
          u--;
        }
    }
    n > 0 && (h += d.length);
  }
  return c.done ? { start: f, matched: !1 } : null;
}
const pH = /* @__PURE__ */ Object.create(null), Ny = [wi.none], Dy = [], mH = /* @__PURE__ */ Object.create(null);
for (let [t, e] of [
  ["variable", "variableName"],
  ["variable-2", "variableName.special"],
  ["string-2", "string.special"],
  ["def", "variableName.definition"],
  ["tag", "tagName"],
  ["attribute", "attributeName"],
  ["type", "typeName"],
  ["builtin", "variableName.standard"],
  ["qualifier", "modifier"],
  ["error", "invalid"],
  ["header", "heading"],
  ["property", "propertyName"]
])
  mH[t] = /* @__PURE__ */ gH(pH, e);
function jd(t, e) {
  Dy.indexOf(t) > -1 || (Dy.push(t), console.warn(e));
}
function gH(t, e) {
  let n = null;
  for (let o of e.split(".")) {
    let s = t[o] || Oe[o];
    s ? typeof s == "function" ? n ? n = s(n) : jd(o, `Modifier ${o} used at start of tag`) : n ? jd(o, `Tag ${o} used as modifier`) : n = s : jd(o, `Unknown highlighting tag ${o}`);
  }
  if (!n)
    return 0;
  let i = e.replace(/ /g, "_"), r = wi.define({
    id: Ny.length,
    name: i,
    props: [c4({ [i]: n })]
  });
  return Ny.push(r), r.id;
}
const bH = (t) => {
  let e = jg(t.state);
  return e.line ? _H(t) : e.block ? wH(t) : !1;
};
function Dg(t, e) {
  return ({ state: n, dispatch: i }) => {
    if (n.readOnly)
      return !1;
    let r = t(e, n);
    return r ? (i(n.update(r)), !0) : !1;
  };
}
const _H = /* @__PURE__ */ Dg(CH, 0), yH = /* @__PURE__ */ Dg(T4, 0), wH = /* @__PURE__ */ Dg((t, e) => T4(t, e, kH(e)), 0);
function jg(t, e = t.selection.main.head) {
  let n = t.languageDataAt("commentTokens", e);
  return n.length ? n[0] : {};
}
const ia = 50;
function vH(t, { open: e, close: n }, i, r) {
  let o = t.sliceDoc(i - ia, i), s = t.sliceDoc(r, r + ia), l = /\s*$/.exec(o)[0].length, a = /^\s*/.exec(s)[0].length, f = o.length - l;
  if (o.slice(f - e.length, f) == e && s.slice(a, a + n.length) == n)
    return {
      open: { pos: i - l, margin: l && 1 },
      close: { pos: r + a, margin: a && 1 }
    };
  let c, u;
  r - i <= 2 * ia ? c = u = t.sliceDoc(i, r) : (c = t.sliceDoc(i, i + ia), u = t.sliceDoc(r - ia, r));
  let h = /^\s*/.exec(c)[0].length, d = /\s*$/.exec(u)[0].length, p = u.length - d - n.length;
  return c.slice(h, h + e.length) == e && u.slice(p, p + n.length) == n ? {
    open: {
      pos: i + h + e.length,
      margin: /\s/.test(c.charAt(h + e.length)) ? 1 : 0
    },
    close: {
      pos: r - d - n.length,
      margin: /\s/.test(u.charAt(p - 1)) ? 1 : 0
    }
  } : null;
}
function kH(t) {
  let e = [];
  for (let n of t.selection.ranges) {
    let i = t.doc.lineAt(n.from), r = n.to <= i.to ? i : t.doc.lineAt(n.to), o = e.length - 1;
    o >= 0 && e[o].to > i.from ? e[o].to = r.to : e.push({ from: i.from, to: r.to });
  }
  return e;
}
function T4(t, e, n = e.selection.ranges) {
  let i = n.map((o) => jg(e, o.from).block);
  if (!i.every((o) => o))
    return null;
  let r = n.map((o, s) => vH(e, i[s], o.from, o.to));
  if (t != 2 && !r.every((o) => o))
    return { changes: e.changes(n.map((o, s) => r[s] ? [] : [{ from: o.from, insert: i[s].open + " " }, { from: o.to, insert: " " + i[s].close }])) };
  if (t != 1 && r.some((o) => o)) {
    let o = [];
    for (let s = 0, l; s < r.length; s++)
      if (l = r[s]) {
        let a = i[s], { open: f, close: c } = l;
        o.push({ from: f.pos - a.open.length, to: f.pos + f.margin }, { from: c.pos - c.margin, to: c.pos + a.close.length });
      }
    return { changes: o };
  }
  return null;
}
function CH(t, e, n = e.selection.ranges) {
  let i = [], r = -1;
  for (let { from: o, to: s } of n) {
    let l = i.length, a = 1e9;
    for (let f = o; f <= s; ) {
      let c = e.doc.lineAt(f);
      if (c.from > r && (o == s || s > c.from)) {
        r = c.from;
        let u = jg(e, f).line;
        if (!u)
          continue;
        let h = /^\s*/.exec(c.text)[0].length, d = h == c.length, p = c.text.slice(h, h + u.length) == u ? h : -1;
        h < c.text.length && h < a && (a = h), i.push({ line: c, comment: p, token: u, indent: h, empty: d, single: !1 });
      }
      f = c.to + 1;
    }
    if (a < 1e9)
      for (let f = l; f < i.length; f++)
        i[f].indent < i[f].line.text.length && (i[f].indent = a);
    i.length == l + 1 && (i[l].single = !0);
  }
  if (t != 2 && i.some((o) => o.comment < 0 && (!o.empty || o.single))) {
    let o = [];
    for (let { line: l, token: a, indent: f, empty: c, single: u } of i)
      (u || !c) && o.push({ from: l.from + f, insert: a + " " });
    let s = e.changes(o);
    return { changes: s, selection: e.selection.map(s, 1) };
  } else if (t != 1 && i.some((o) => o.comment >= 0)) {
    let o = [];
    for (let { line: s, comment: l, token: a } of i)
      if (l >= 0) {
        let f = s.from + l, c = f + a.length;
        s.text[c - s.from] == " " && c++, o.push({ from: f, to: c });
      }
    return { changes: o };
  }
  return null;
}
const am = /* @__PURE__ */ Qo.define(), SH = /* @__PURE__ */ Qo.define(), MH = /* @__PURE__ */ Xe.define(), E4 = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      minDepth: 100,
      newGroupDelay: 500
    }, { minDepth: Math.max, newGroupDelay: Math.min });
  }
});
function AH(t) {
  let e = 0;
  return t.iterChangedRanges((n, i) => e = i), e;
}
const Bg = /* @__PURE__ */ xn.define({
  create() {
    return Ar.empty;
  },
  update(t, e) {
    let n = e.state.facet(E4), i = e.annotation(am);
    if (i) {
      let a = e.docChanged ? we.single(AH(e.changes)) : void 0, f = gi.fromTransaction(e, a), c = i.side, u = c == 0 ? t.undone : t.done;
      return f ? u = Ou(u, u.length, n.minDepth, f) : u = I4(u, e.startState.selection), new Ar(c == 0 ? i.rest : u, c == 0 ? u : i.rest);
    }
    let r = e.annotation(SH);
    if ((r == "full" || r == "before") && (t = t.isolate()), e.annotation(Bn.addToHistory) === !1)
      return e.changes.empty ? t : t.addMapping(e.changes.desc);
    let o = gi.fromTransaction(e), s = e.annotation(Bn.time), l = e.annotation(Bn.userEvent);
    return o ? t = t.addChanges(o, s, l, n.newGroupDelay, n.minDepth) : e.selection && (t = t.addSelection(e.startState.selection, s, l, n.newGroupDelay)), (r == "full" || r == "after") && (t = t.isolate()), t;
  },
  toJSON(t) {
    return { done: t.done.map((e) => e.toJSON()), undone: t.undone.map((e) => e.toJSON()) };
  },
  fromJSON(t) {
    return new Ar(t.done.map(gi.fromJSON), t.undone.map(gi.fromJSON));
  }
});
function OH(t = {}) {
  return [
    Bg,
    E4.of(t),
    Ge.domEventHandlers({
      beforeinput(e, n) {
        let i = e.inputType == "historyUndo" ? Lg : e.inputType == "historyRedo" ? Au : null;
        return i ? (e.preventDefault(), i(n)) : !1;
      }
    })
  ];
}
function Nh(t, e) {
  return function({ state: n, dispatch: i }) {
    if (!e && n.readOnly)
      return !1;
    let r = n.field(Bg, !1);
    if (!r)
      return !1;
    let o = r.pop(t, n, e);
    return o ? (i(o), !0) : !1;
  };
}
const Lg = /* @__PURE__ */ Nh(0, !1), Au = /* @__PURE__ */ Nh(1, !1), TH = /* @__PURE__ */ Nh(0, !0), EH = /* @__PURE__ */ Nh(1, !0);
function P4(t) {
  return function(e) {
    let n = e.field(Bg, !1);
    if (!n)
      return 0;
    let i = t == 0 ? n.done : n.undone;
    return i.length - (i.length && !i[0].changes ? 1 : 0);
  };
}
const PH = /* @__PURE__ */ P4(0), RH = /* @__PURE__ */ P4(1);
class gi {
  constructor(e, n, i, r, o) {
    this.changes = e, this.effects = n, this.mapped = i, this.startSelection = r, this.selectionsAfter = o;
  }
  setSelAfter(e) {
    return new gi(this.changes, this.effects, this.mapped, this.startSelection, e);
  }
  toJSON() {
    var e, n, i;
    return {
      changes: (e = this.changes) === null || e === void 0 ? void 0 : e.toJSON(),
      mapped: (n = this.mapped) === null || n === void 0 ? void 0 : n.toJSON(),
      startSelection: (i = this.startSelection) === null || i === void 0 ? void 0 : i.toJSON(),
      selectionsAfter: this.selectionsAfter.map((r) => r.toJSON())
    };
  }
  static fromJSON(e) {
    return new gi(e.changes && jn.fromJSON(e.changes), [], e.mapped && Rr.fromJSON(e.mapped), e.startSelection && we.fromJSON(e.startSelection), e.selectionsAfter.map(we.fromJSON));
  }
  static fromTransaction(e, n) {
    let i = ji;
    for (let r of e.startState.facet(MH)) {
      let o = r(e);
      o.length && (i = i.concat(o));
    }
    return !i.length && e.changes.empty ? null : new gi(e.changes.invert(e.startState.doc), i, void 0, n || e.startState.selection, ji);
  }
  static selection(e) {
    return new gi(void 0, ji, void 0, void 0, e);
  }
}
function Ou(t, e, n, i) {
  let r = e + 1 > n + 20 ? e - n - 1 : 0, o = t.slice(r, e);
  return o.push(i), o;
}
function IH(t, e) {
  let n = [], i = !1;
  return t.iterChangedRanges((r, o) => n.push(r, o)), e.iterChangedRanges((r, o, s, l) => {
    for (let a = 0; a < n.length; ) {
      let f = n[a++], c = n[a++];
      l >= f && s <= c && (i = !0);
    }
  }), i;
}
function NH(t, e) {
  return t.ranges.length == e.ranges.length && t.ranges.filter((n, i) => n.empty != e.ranges[i].empty).length === 0;
}
function R4(t, e) {
  return t.length ? e.length ? t.concat(e) : t : e;
}
const ji = [], DH = 200;
function I4(t, e) {
  if (t.length) {
    let n = t[t.length - 1], i = n.selectionsAfter.slice(Math.max(0, n.selectionsAfter.length - DH));
    return i.length && i[i.length - 1].eq(e) ? t : (i.push(e), Ou(t, t.length - 1, 1e9, n.setSelAfter(i)));
  } else
    return [gi.selection([e])];
}
function jH(t) {
  let e = t[t.length - 1], n = t.slice();
  return n[t.length - 1] = e.setSelAfter(e.selectionsAfter.slice(0, e.selectionsAfter.length - 1)), n;
}
function Bd(t, e) {
  if (!t.length)
    return t;
  let n = t.length, i = ji;
  for (; n; ) {
    let r = BH(t[n - 1], e, i);
    if (r.changes && !r.changes.empty || r.effects.length) {
      let o = t.slice(0, n);
      return o[n - 1] = r, o;
    } else
      e = r.mapped, n--, i = r.selectionsAfter;
  }
  return i.length ? [gi.selection(i)] : ji;
}
function BH(t, e, n) {
  let i = R4(t.selectionsAfter.length ? t.selectionsAfter.map((l) => l.map(e)) : ji, n);
  if (!t.changes)
    return gi.selection(i);
  let r = t.changes.map(e), o = e.mapDesc(t.changes, !0), s = t.mapped ? t.mapped.composeDesc(o) : o;
  return new gi(r, gt.mapEffects(t.effects, e), s, t.startSelection.map(o), i);
}
const LH = /^(input\.type|delete)($|\.)/;
class Ar {
  constructor(e, n, i = 0, r = void 0) {
    this.done = e, this.undone = n, this.prevTime = i, this.prevUserEvent = r;
  }
  isolate() {
    return this.prevTime ? new Ar(this.done, this.undone) : this;
  }
  addChanges(e, n, i, r, o) {
    let s = this.done, l = s[s.length - 1];
    return l && l.changes && !l.changes.empty && e.changes && (!i || LH.test(i)) && (!l.selectionsAfter.length && n - this.prevTime < r && IH(l.changes, e.changes) || i == "input.type.compose") ? s = Ou(s, s.length - 1, o, new gi(e.changes.compose(l.changes), R4(e.effects, l.effects), l.mapped, l.startSelection, ji)) : s = Ou(s, s.length, o, e), new Ar(s, ji, n, i);
  }
  addSelection(e, n, i, r) {
    let o = this.done.length ? this.done[this.done.length - 1].selectionsAfter : ji;
    return o.length > 0 && n - this.prevTime < r && i == this.prevUserEvent && i && /^select($|\.)/.test(i) && NH(o[o.length - 1], e) ? this : new Ar(I4(this.done, e), this.undone, n, i);
  }
  addMapping(e) {
    return new Ar(Bd(this.done, e), Bd(this.undone, e), this.prevTime, this.prevUserEvent);
  }
  pop(e, n, i) {
    let r = e == 0 ? this.done : this.undone;
    if (r.length == 0)
      return null;
    let o = r[r.length - 1];
    if (i && o.selectionsAfter.length)
      return n.update({
        selection: o.selectionsAfter[o.selectionsAfter.length - 1],
        annotations: am.of({ side: e, rest: jH(r) }),
        userEvent: e == 0 ? "select.undo" : "select.redo",
        scrollIntoView: !0
      });
    if (o.changes) {
      let s = r.length == 1 ? ji : r.slice(0, r.length - 1);
      return o.mapped && (s = Bd(s, o.mapped)), n.update({
        changes: o.changes,
        selection: o.startSelection,
        effects: o.effects,
        annotations: am.of({ side: e, rest: s }),
        filter: !1,
        userEvent: e == 0 ? "undo" : "redo",
        scrollIntoView: !0
      });
    } else
      return null;
  }
}
Ar.empty = /* @__PURE__ */ new Ar(ji, ji);
const xH = [
  { key: "Mod-z", run: Lg, preventDefault: !0 },
  { key: "Mod-y", mac: "Mod-Shift-z", run: Au, preventDefault: !0 },
  { linux: "Ctrl-Shift-z", run: Au, preventDefault: !0 },
  { key: "Mod-u", run: TH, preventDefault: !0 },
  { key: "Alt-u", mac: "Mod-Shift-u", run: EH, preventDefault: !0 }
];
function Jl(t, e) {
  return we.create(t.ranges.map(e), t.mainIndex);
}
function Wr(t, e) {
  return t.update({ selection: e, scrollIntoView: !0, userEvent: "select" });
}
function cr({ state: t, dispatch: e }, n) {
  let i = Jl(t.selection, n);
  return i.eq(t.selection) ? !1 : (e(Wr(t, i)), !0);
}
function Dh(t, e) {
  return we.cursor(e ? t.to : t.from);
}
function N4(t, e) {
  return cr(t, (n) => n.empty ? t.moveByChar(n, e) : Dh(n, e));
}
function ii(t) {
  return t.textDirectionAt(t.state.selection.main.head) == pn.LTR;
}
const D4 = (t) => N4(t, !ii(t)), j4 = (t) => N4(t, ii(t));
function B4(t, e) {
  return cr(t, (n) => n.empty ? t.moveByGroup(n, e) : Dh(n, e));
}
const zH = (t) => B4(t, !ii(t)), VH = (t) => B4(t, ii(t));
function FH(t, e, n) {
  if (e.type.prop(n))
    return !0;
  let i = e.to - e.from;
  return i && (i > 2 || /[^\s,.;:]/.test(t.sliceDoc(e.from, e.to))) || e.firstChild;
}
function jh(t, e, n) {
  let i = ni(t).resolveInner(e.head), r = n ? At.closedBy : At.openedBy;
  for (let a = e.head; ; ) {
    let f = n ? i.childAfter(a) : i.childBefore(a);
    if (!f)
      break;
    FH(t, f, r) ? i = f : a = n ? f.to : f.from;
  }
  let o = i.type.prop(r), s, l;
  return o && (s = n ? Mr(t, i.from, 1) : Mr(t, i.to, -1)) && s.matched ? l = n ? s.end.to : s.end.from : l = n ? i.to : i.from, we.cursor(l, n ? -1 : 1);
}
const HH = (t) => cr(t, (e) => jh(t.state, e, !ii(t))), WH = (t) => cr(t, (e) => jh(t.state, e, ii(t)));
function L4(t, e) {
  return cr(t, (n) => {
    if (!n.empty)
      return Dh(n, e);
    let i = t.moveVertically(n, e);
    return i.head != n.head ? i : t.moveToLineBoundary(n, e);
  });
}
const x4 = (t) => L4(t, !1), z4 = (t) => L4(t, !0);
function V4(t) {
  return Math.max(t.defaultLineHeight, Math.min(t.dom.clientHeight, innerHeight) - 5);
}
function F4(t, e) {
  let { state: n } = t, i = Jl(n.selection, (l) => l.empty ? t.moveVertically(l, e, V4(t)) : Dh(l, e));
  if (i.eq(n.selection))
    return !1;
  let r = t.coordsAtPos(n.selection.main.head), o = t.scrollDOM.getBoundingClientRect(), s;
  return r && r.top > o.top && r.bottom < o.bottom && r.top - o.top <= t.scrollDOM.scrollHeight - t.scrollDOM.scrollTop - t.scrollDOM.clientHeight && (s = Ge.scrollIntoView(i.main.head, { y: "start", yMargin: r.top - o.top })), t.dispatch(Wr(n, i), { effects: s }), !0;
}
const jy = (t) => F4(t, !1), fm = (t) => F4(t, !0);
function Zo(t, e, n) {
  let i = t.lineBlockAt(e.head), r = t.moveToLineBoundary(e, n);
  if (r.head == e.head && r.head != (n ? i.to : i.from) && (r = t.moveToLineBoundary(e, n, !1)), !n && r.head == i.from && i.length) {
    let o = /^\s*/.exec(t.state.sliceDoc(i.from, Math.min(i.from + 100, i.to)))[0].length;
    o && e.head != i.from + o && (r = we.cursor(i.from + o));
  }
  return r;
}
const UH = (t) => cr(t, (e) => Zo(t, e, !0)), qH = (t) => cr(t, (e) => Zo(t, e, !1)), JH = (t) => cr(t, (e) => Zo(t, e, !ii(t))), KH = (t) => cr(t, (e) => Zo(t, e, ii(t))), GH = (t) => cr(t, (e) => we.cursor(t.lineBlockAt(e.head).from, 1)), XH = (t) => cr(t, (e) => we.cursor(t.lineBlockAt(e.head).to, -1));
function QH(t, e, n) {
  let i = !1, r = Jl(t.selection, (o) => {
    let s = Mr(t, o.head, -1) || Mr(t, o.head, 1) || o.head > 0 && Mr(t, o.head - 1, 1) || o.head < t.doc.length && Mr(t, o.head + 1, -1);
    if (!s || !s.end)
      return o;
    i = !0;
    let l = s.start.from == o.head ? s.end.to : s.end.from;
    return n ? we.range(o.anchor, l) : we.cursor(l);
  });
  return i ? (e(Wr(t, r)), !0) : !1;
}
const YH = ({ state: t, dispatch: e }) => QH(t, e, !1);
function Hi(t, e) {
  let n = Jl(t.state.selection, (i) => {
    let r = e(i);
    return we.range(i.anchor, r.head, r.goalColumn, r.bidiLevel || void 0);
  });
  return n.eq(t.state.selection) ? !1 : (t.dispatch(Wr(t.state, n)), !0);
}
function H4(t, e) {
  return Hi(t, (n) => t.moveByChar(n, e));
}
const W4 = (t) => H4(t, !ii(t)), U4 = (t) => H4(t, ii(t));
function q4(t, e) {
  return Hi(t, (n) => t.moveByGroup(n, e));
}
const ZH = (t) => q4(t, !ii(t)), $H = (t) => q4(t, ii(t)), eW = (t) => Hi(t, (e) => jh(t.state, e, !ii(t))), tW = (t) => Hi(t, (e) => jh(t.state, e, ii(t)));
function J4(t, e) {
  return Hi(t, (n) => t.moveVertically(n, e));
}
const K4 = (t) => J4(t, !1), G4 = (t) => J4(t, !0);
function X4(t, e) {
  return Hi(t, (n) => t.moveVertically(n, e, V4(t)));
}
const By = (t) => X4(t, !1), Ly = (t) => X4(t, !0), nW = (t) => Hi(t, (e) => Zo(t, e, !0)), iW = (t) => Hi(t, (e) => Zo(t, e, !1)), rW = (t) => Hi(t, (e) => Zo(t, e, !ii(t))), oW = (t) => Hi(t, (e) => Zo(t, e, ii(t))), sW = (t) => Hi(t, (e) => we.cursor(t.lineBlockAt(e.head).from)), lW = (t) => Hi(t, (e) => we.cursor(t.lineBlockAt(e.head).to)), xy = ({ state: t, dispatch: e }) => (e(Wr(t, { anchor: 0 })), !0), zy = ({ state: t, dispatch: e }) => (e(Wr(t, { anchor: t.doc.length })), !0), Vy = ({ state: t, dispatch: e }) => (e(Wr(t, { anchor: t.selection.main.anchor, head: 0 })), !0), Fy = ({ state: t, dispatch: e }) => (e(Wr(t, { anchor: t.selection.main.anchor, head: t.doc.length })), !0), aW = ({ state: t, dispatch: e }) => (e(t.update({ selection: { anchor: 0, head: t.doc.length }, userEvent: "select" })), !0), fW = ({ state: t, dispatch: e }) => {
  let n = Lh(t).map(({ from: i, to: r }) => we.range(i, Math.min(r + 1, t.doc.length)));
  return e(t.update({ selection: we.create(n), userEvent: "select" })), !0;
}, cW = ({ state: t, dispatch: e }) => {
  let n = Jl(t.selection, (i) => {
    var r;
    let o = ni(t).resolveInner(i.head, 1);
    for (; !(o.from < i.from && o.to >= i.to || o.to > i.to && o.from <= i.from || !(!((r = o.parent) === null || r === void 0) && r.parent)); )
      o = o.parent;
    return we.range(o.to, o.from);
  });
  return e(Wr(t, n)), !0;
}, uW = ({ state: t, dispatch: e }) => {
  let n = t.selection, i = null;
  return n.ranges.length > 1 ? i = we.create([n.main]) : n.main.empty || (i = we.create([we.cursor(n.main.head)])), i ? (e(Wr(t, i)), !0) : !1;
};
function Bh(t, e) {
  if (t.state.readOnly)
    return !1;
  let n = "delete.selection", { state: i } = t, r = i.changeByRange((o) => {
    let { from: s, to: l } = o;
    if (s == l) {
      let a = e(s);
      a < s ? (n = "delete.backward", a = ic(t, a, !1)) : a > s && (n = "delete.forward", a = ic(t, a, !0)), s = Math.min(s, a), l = Math.max(l, a);
    } else
      s = ic(t, s, !1), l = ic(t, l, !0);
    return s == l ? { range: o } : { changes: { from: s, to: l }, range: we.cursor(s) };
  });
  return r.changes.empty ? !1 : (t.dispatch(i.update(r, {
    scrollIntoView: !0,
    userEvent: n,
    effects: n == "delete.selection" ? Ge.announce.of(i.phrase("Selection deleted")) : void 0
  })), !0);
}
function ic(t, e, n) {
  if (t instanceof Ge)
    for (let i of t.state.facet(Ge.atomicRanges).map((r) => r(t)))
      i.between(e, e, (r, o) => {
        r < e && o > e && (e = n ? o : r);
      });
  return e;
}
const Q4 = (t, e) => Bh(t, (n) => {
  let { state: i } = t, r = i.doc.lineAt(n), o, s;
  if (!e && n > r.from && n < r.from + 200 && !/[^ \t]/.test(o = r.text.slice(0, n - r.from))) {
    if (o[o.length - 1] == "	")
      return n - 1;
    let l = mf(o, i.tabSize), a = l % Cu(i) || Cu(i);
    for (let f = 0; f < a && o[o.length - 1 - f] == " "; f++)
      n--;
    s = n;
  } else
    s = fi(r.text, n - r.from, e, e) + r.from, s == n && r.number != (e ? i.doc.lines : 1) && (s += e ? 1 : -1);
  return s;
}), cm = (t) => Q4(t, !1), Y4 = (t) => Q4(t, !0), Z4 = (t, e) => Bh(t, (n) => {
  let i = n, { state: r } = t, o = r.doc.lineAt(i), s = r.charCategorizer(i);
  for (let l = null; ; ) {
    if (i == (e ? o.to : o.from)) {
      i == n && o.number != (e ? r.doc.lines : 1) && (i += e ? 1 : -1);
      break;
    }
    let a = fi(o.text, i - o.from, e) + o.from, f = o.text.slice(Math.min(i, a) - o.from, Math.max(i, a) - o.from), c = s(f);
    if (l != null && c != l)
      break;
    (f != " " || i != n) && (l = c), i = a;
  }
  return i;
}), $4 = (t) => Z4(t, !1), hW = (t) => Z4(t, !0), e5 = (t) => Bh(t, (e) => {
  let n = t.lineBlockAt(e).to;
  return e < n ? n : Math.min(t.state.doc.length, e + 1);
}), dW = (t) => Bh(t, (e) => {
  let n = t.lineBlockAt(e).from;
  return e > n ? n : Math.max(0, e - 1);
}), pW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => ({
    changes: { from: i.from, to: i.to, insert: jt.of(["", ""]) },
    range: we.cursor(i.from)
  }));
  return e(t.update(n, { scrollIntoView: !0, userEvent: "input" })), !0;
}, mW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => {
    if (!i.empty || i.from == 0 || i.from == t.doc.length)
      return { range: i };
    let r = i.from, o = t.doc.lineAt(r), s = r == o.from ? r - 1 : fi(o.text, r - o.from, !1) + o.from, l = r == o.to ? r + 1 : fi(o.text, r - o.from, !0) + o.from;
    return {
      changes: { from: s, to: l, insert: t.doc.slice(r, l).append(t.doc.slice(s, r)) },
      range: we.cursor(l)
    };
  });
  return n.changes.empty ? !1 : (e(t.update(n, { scrollIntoView: !0, userEvent: "move.character" })), !0);
};
function Lh(t) {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.from), o = t.doc.lineAt(i.to);
    if (!i.empty && i.to == o.from && (o = t.doc.lineAt(i.to - 1)), n >= r.number) {
      let s = e[e.length - 1];
      s.to = o.to, s.ranges.push(i);
    } else
      e.push({ from: r.from, to: o.to, ranges: [i] });
    n = o.number + 1;
  }
  return e;
}
function t5(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [], r = [];
  for (let o of Lh(t)) {
    if (n ? o.to == t.doc.length : o.from == 0)
      continue;
    let s = t.doc.lineAt(n ? o.to + 1 : o.from - 1), l = s.length + 1;
    if (n) {
      i.push({ from: o.to, to: s.to }, { from: o.from, insert: s.text + t.lineBreak });
      for (let a of o.ranges)
        r.push(we.range(Math.min(t.doc.length, a.anchor + l), Math.min(t.doc.length, a.head + l)));
    } else {
      i.push({ from: s.from, to: o.from }, { from: o.to, insert: t.lineBreak + s.text });
      for (let a of o.ranges)
        r.push(we.range(a.anchor - l, a.head - l));
    }
  }
  return i.length ? (e(t.update({
    changes: i,
    scrollIntoView: !0,
    selection: we.create(r, t.selection.mainIndex),
    userEvent: "move.line"
  })), !0) : !1;
}
const gW = ({ state: t, dispatch: e }) => t5(t, e, !1), bW = ({ state: t, dispatch: e }) => t5(t, e, !0);
function n5(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [];
  for (let r of Lh(t))
    n ? i.push({ from: r.from, insert: t.doc.slice(r.from, r.to) + t.lineBreak }) : i.push({ from: r.to, insert: t.lineBreak + t.doc.slice(r.from, r.to) });
  return e(t.update({ changes: i, scrollIntoView: !0, userEvent: "input.copyline" })), !0;
}
const _W = ({ state: t, dispatch: e }) => n5(t, e, !1), yW = ({ state: t, dispatch: e }) => n5(t, e, !0), wW = (t) => {
  if (t.state.readOnly)
    return !1;
  let { state: e } = t, n = e.changes(Lh(e).map(({ from: r, to: o }) => (r > 0 ? r-- : o < e.doc.length && o++, { from: r, to: o }))), i = Jl(e.selection, (r) => t.moveVertically(r, !0)).map(n);
  return t.dispatch({ changes: n, selection: i, scrollIntoView: !0, userEvent: "delete.line" }), !0;
};
function vW(t, e) {
  if (/\(\)|\[\]|\{\}/.test(t.sliceDoc(e - 1, e + 1)))
    return { from: e, to: e };
  let n = ni(t).resolveInner(e), i = n.childBefore(e), r = n.childAfter(e), o;
  return i && r && i.to <= e && r.from >= e && (o = i.type.prop(At.closedBy)) && o.indexOf(r.name) > -1 && t.doc.lineAt(i.to).from == t.doc.lineAt(r.from).from ? { from: i.to, to: r.from } : null;
}
const kW = /* @__PURE__ */ i5(!1), CW = /* @__PURE__ */ i5(!0);
function i5(t) {
  return ({ state: e, dispatch: n }) => {
    if (e.readOnly)
      return !1;
    let i = e.changeByRange((r) => {
      let { from: o, to: s } = r, l = e.doc.lineAt(o), a = !t && o == s && vW(e, o);
      t && (o = s = (s <= l.to ? l : e.doc.lineAt(s)).to);
      let f = new Rh(e, { simulateBreak: o, simulateDoubleBreak: !!a }), c = Ig(f, o);
      for (c == null && (c = /^\s*/.exec(e.doc.lineAt(o).text)[0].length); s < l.to && /\s/.test(l.text[s - l.from]); )
        s++;
      a ? { from: o, to: s } = a : o > l.from && o < l.from + 100 && !/\S/.test(l.text.slice(0, o)) && (o = l.from);
      let u = ["", Ya(e, c)];
      return a && u.push(Ya(e, f.lineIndent(l.from, -1))), {
        changes: { from: o, to: s, insert: jt.of(u) },
        range: we.cursor(o + 1 + u[1].length)
      };
    });
    return n(e.update(i, { scrollIntoView: !0, userEvent: "input" })), !0;
  };
}
function xg(t, e) {
  let n = -1;
  return t.changeByRange((i) => {
    let r = [];
    for (let s = i.from; s <= i.to; ) {
      let l = t.doc.lineAt(s);
      l.number > n && (i.empty || i.to > l.from) && (e(l, r, i), n = l.number), s = l.to + 1;
    }
    let o = t.changes(r);
    return {
      changes: r,
      range: we.range(o.mapPos(i.anchor, 1), o.mapPos(i.head, 1))
    };
  });
}
const SW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = /* @__PURE__ */ Object.create(null), i = new Rh(t, { overrideIndentation: (o) => {
    let s = n[o];
    return s ?? -1;
  } }), r = xg(t, (o, s, l) => {
    let a = Ig(i, o.from);
    if (a == null)
      return;
    /\S/.test(o.text) || (a = 0);
    let f = /^\s*/.exec(o.text)[0], c = Ya(t, a);
    (f != c || l.from < o.from + f.length) && (n[o.from] = a, s.push({ from: o.from, to: o.from + f.length, insert: c }));
  });
  return r.changes.empty || e(t.update(r, { userEvent: "indent" })), !0;
}, r5 = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(xg(t, (n, i) => {
  i.push({ from: n.from, insert: t.facet(Ph) });
}), { userEvent: "input.indent" })), !0), o5 = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(xg(t, (n, i) => {
  let r = /^\s*/.exec(n.text)[0];
  if (!r)
    return;
  let o = mf(r, t.tabSize), s = 0, l = Ya(t, Math.max(0, o - Cu(t)));
  for (; s < r.length && s < l.length && r.charCodeAt(s) == l.charCodeAt(s); )
    s++;
  i.push({ from: n.from + s, to: n.from + r.length, insert: l.slice(s) });
}), { userEvent: "delete.dedent" })), !0), MW = [
  { key: "Ctrl-b", run: D4, shift: W4, preventDefault: !0 },
  { key: "Ctrl-f", run: j4, shift: U4 },
  { key: "Ctrl-p", run: x4, shift: K4 },
  { key: "Ctrl-n", run: z4, shift: G4 },
  { key: "Ctrl-a", run: GH, shift: sW },
  { key: "Ctrl-e", run: XH, shift: lW },
  { key: "Ctrl-d", run: Y4 },
  { key: "Ctrl-h", run: cm },
  { key: "Ctrl-k", run: e5 },
  { key: "Ctrl-Alt-h", run: $4 },
  { key: "Ctrl-o", run: pW },
  { key: "Ctrl-t", run: mW },
  { key: "Ctrl-v", run: fm }
], AW = /* @__PURE__ */ [
  { key: "ArrowLeft", run: D4, shift: W4, preventDefault: !0 },
  { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: zH, shift: ZH, preventDefault: !0 },
  { mac: "Cmd-ArrowLeft", run: JH, shift: rW, preventDefault: !0 },
  { key: "ArrowRight", run: j4, shift: U4, preventDefault: !0 },
  { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: VH, shift: $H, preventDefault: !0 },
  { mac: "Cmd-ArrowRight", run: KH, shift: oW, preventDefault: !0 },
  { key: "ArrowUp", run: x4, shift: K4, preventDefault: !0 },
  { mac: "Cmd-ArrowUp", run: xy, shift: Vy },
  { mac: "Ctrl-ArrowUp", run: jy, shift: By },
  { key: "ArrowDown", run: z4, shift: G4, preventDefault: !0 },
  { mac: "Cmd-ArrowDown", run: zy, shift: Fy },
  { mac: "Ctrl-ArrowDown", run: fm, shift: Ly },
  { key: "PageUp", run: jy, shift: By },
  { key: "PageDown", run: fm, shift: Ly },
  { key: "Home", run: qH, shift: iW, preventDefault: !0 },
  { key: "Mod-Home", run: xy, shift: Vy },
  { key: "End", run: UH, shift: nW, preventDefault: !0 },
  { key: "Mod-End", run: zy, shift: Fy },
  { key: "Enter", run: kW },
  { key: "Mod-a", run: aW },
  { key: "Backspace", run: cm, shift: cm },
  { key: "Delete", run: Y4 },
  { key: "Mod-Backspace", mac: "Alt-Backspace", run: $4 },
  { key: "Mod-Delete", mac: "Alt-Delete", run: hW },
  { mac: "Mod-Backspace", run: dW },
  { mac: "Mod-Delete", run: e5 }
].concat(/* @__PURE__ */ MW.map((t) => ({ mac: t.key, run: t.run, shift: t.shift }))), OW = /* @__PURE__ */ [
  { key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: HH, shift: eW },
  { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: WH, shift: tW },
  { key: "Alt-ArrowUp", run: gW },
  { key: "Shift-Alt-ArrowUp", run: _W },
  { key: "Alt-ArrowDown", run: bW },
  { key: "Shift-Alt-ArrowDown", run: yW },
  { key: "Escape", run: uW },
  { key: "Mod-Enter", run: CW },
  { key: "Alt-l", mac: "Ctrl-l", run: fW },
  { key: "Mod-i", run: cW, preventDefault: !0 },
  { key: "Mod-[", run: o5 },
  { key: "Mod-]", run: r5 },
  { key: "Mod-Alt-\\", run: SW },
  { key: "Shift-Mod-k", run: wW },
  { key: "Shift-Mod-\\", run: YH },
  { key: "Mod-/", run: bH },
  { key: "Alt-A", run: yH }
].concat(AW), TW = { key: "Tab", run: r5, shift: o5 };
function Qt() {
  var t = arguments[0];
  typeof t == "string" && (t = document.createElement(t));
  var e = 1, n = arguments[1];
  if (n && typeof n == "object" && n.nodeType == null && !Array.isArray(n)) {
    for (var i in n)
      if (Object.prototype.hasOwnProperty.call(n, i)) {
        var r = n[i];
        typeof r == "string" ? t.setAttribute(i, r) : r != null && (t[i] = r);
      }
    e++;
  }
  for (; e < arguments.length; e++)
    s5(t, arguments[e]);
  return t;
}
function s5(t, e) {
  if (typeof e == "string")
    t.appendChild(document.createTextNode(e));
  else if (e != null)
    if (e.nodeType != null)
      t.appendChild(e);
    else if (Array.isArray(e))
      for (var n = 0; n < e.length; n++)
        s5(t, e[n]);
    else
      throw new RangeError("Unsupported child node: " + e);
}
const Hy = typeof String.prototype.normalize == "function" ? (t) => t.normalize("NFKD") : (t) => t;
class Il {
  constructor(e, n, i = 0, r = e.length, o, s) {
    this.test = s, this.value = { from: 0, to: 0 }, this.done = !1, this.matches = [], this.buffer = "", this.bufferPos = 0, this.iter = e.iterRange(i, r), this.bufferStart = i, this.normalize = o ? (l) => o(Hy(l)) : Hy, this.query = this.normalize(n);
  }
  peek() {
    if (this.bufferPos == this.buffer.length) {
      if (this.bufferStart += this.buffer.length, this.iter.next(), this.iter.done)
        return -1;
      this.bufferPos = 0, this.buffer = this.iter.value;
    }
    return Xn(this.buffer, this.bufferPos);
  }
  next() {
    for (; this.matches.length; )
      this.matches.pop();
    return this.nextOverlapping();
  }
  nextOverlapping() {
    for (; ; ) {
      let e = this.peek();
      if (e < 0)
        return this.done = !0, this;
      let n = bg(e), i = this.bufferStart + this.bufferPos;
      this.bufferPos += Mi(e);
      let r = this.normalize(n);
      for (let o = 0, s = i; ; o++) {
        let l = r.charCodeAt(o), a = this.match(l, s);
        if (a)
          return this.value = a, this;
        if (o == r.length - 1)
          break;
        s == i && o < n.length && n.charCodeAt(o) == l && s++;
      }
    }
  }
  match(e, n) {
    let i = null;
    for (let r = 0; r < this.matches.length; r += 2) {
      let o = this.matches[r], s = !1;
      this.query.charCodeAt(o) == e && (o == this.query.length - 1 ? i = { from: this.matches[r + 1], to: n + 1 } : (this.matches[r]++, s = !0)), s || (this.matches.splice(r, 2), r -= 2);
    }
    return this.query.charCodeAt(0) == e && (this.query.length == 1 ? i = { from: n, to: n + 1 } : this.matches.push(1, n)), i && this.test && !this.test(i.from, i.to, this.buffer, this.bufferPos) && (i = null), i;
  }
}
typeof Symbol < "u" && (Il.prototype[Symbol.iterator] = function() {
  return this;
});
const l5 = { from: -1, to: -1, match: /* @__PURE__ */ /.*/.exec("") }, zg = "gm" + (/x/.unicode == null ? "" : "u");
class a5 {
  constructor(e, n, i, r = 0, o = e.length) {
    if (this.text = e, this.to = o, this.curLine = "", this.done = !1, this.value = l5, /\\[sWDnr]|\n|\r|\[\^/.test(n))
      return new f5(e, n, i, r, o);
    this.re = new RegExp(n, zg + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.iter = e.iter();
    let s = e.lineAt(r);
    this.curLineStart = s.from, this.matchPos = Tu(e, r), this.getLine(this.curLineStart);
  }
  getLine(e) {
    this.iter.next(e), this.iter.lineBreak ? this.curLine = "" : (this.curLine = this.iter.value, this.curLineStart + this.curLine.length > this.to && (this.curLine = this.curLine.slice(0, this.to - this.curLineStart)), this.iter.next());
  }
  nextLine() {
    this.curLineStart = this.curLineStart + this.curLine.length + 1, this.curLineStart > this.to ? this.curLine = "" : this.getLine(0);
  }
  next() {
    for (let e = this.matchPos - this.curLineStart; ; ) {
      this.re.lastIndex = e;
      let n = this.matchPos <= this.to && this.re.exec(this.curLine);
      if (n) {
        let i = this.curLineStart + n.index, r = i + n[0].length;
        if (this.matchPos = Tu(this.text, r + (i == r ? 1 : 0)), i == this.curLineStart + this.curLine.length && this.nextLine(), (i < r || i > this.value.to) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this;
        e = this.matchPos - this.curLineStart;
      } else if (this.curLineStart + this.curLine.length < this.to)
        this.nextLine(), e = 0;
      else
        return this.done = !0, this;
    }
  }
}
const Ld = /* @__PURE__ */ new WeakMap();
class ul {
  constructor(e, n) {
    this.from = e, this.text = n;
  }
  get to() {
    return this.from + this.text.length;
  }
  static get(e, n, i) {
    let r = Ld.get(e);
    if (!r || r.from >= i || r.to <= n) {
      let l = new ul(n, e.sliceString(n, i));
      return Ld.set(e, l), l;
    }
    if (r.from == n && r.to == i)
      return r;
    let { text: o, from: s } = r;
    return s > n && (o = e.sliceString(n, s) + o, s = n), r.to < i && (o += e.sliceString(r.to, i)), Ld.set(e, new ul(s, o)), new ul(n, o.slice(n - s, i - s));
  }
}
class f5 {
  constructor(e, n, i, r, o) {
    this.text = e, this.to = o, this.done = !1, this.value = l5, this.matchPos = Tu(e, r), this.re = new RegExp(n, zg + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.flat = ul.get(e, r, this.chunkEnd(r + 5e3));
  }
  chunkEnd(e) {
    return e >= this.to ? this.to : this.text.lineAt(e).to;
  }
  next() {
    for (; ; ) {
      let e = this.re.lastIndex = this.matchPos - this.flat.from, n = this.re.exec(this.flat.text);
      if (n && !n[0] && n.index == e && (this.re.lastIndex = e + 1, n = this.re.exec(this.flat.text)), n) {
        let i = this.flat.from + n.index, r = i + n[0].length;
        if ((this.flat.to >= this.to || n.index + n[0].length <= this.flat.text.length - 10) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this.matchPos = Tu(this.text, r + (i == r ? 1 : 0)), this;
      }
      if (this.flat.to == this.to)
        return this.done = !0, this;
      this.flat = ul.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));
    }
  }
}
typeof Symbol < "u" && (a5.prototype[Symbol.iterator] = f5.prototype[Symbol.iterator] = function() {
  return this;
});
function EW(t) {
  try {
    return new RegExp(t, zg), !0;
  } catch {
    return !1;
  }
}
function Tu(t, e) {
  if (e >= t.length)
    return e;
  let n = t.lineAt(e), i;
  for (; e < n.to && (i = n.text.charCodeAt(e - n.from)) >= 56320 && i < 57344; )
    e++;
  return e;
}
function um(t) {
  let e = Qt("input", { class: "cm-textfield", name: "line" }), n = Qt("form", {
    class: "cm-gotoLine",
    onkeydown: (r) => {
      r.keyCode == 27 ? (r.preventDefault(), t.dispatch({ effects: Eu.of(!1) }), t.focus()) : r.keyCode == 13 && (r.preventDefault(), i());
    },
    onsubmit: (r) => {
      r.preventDefault(), i();
    }
  }, Qt("label", t.state.phrase("Go to line"), ": ", e), " ", Qt("button", { class: "cm-button", type: "submit" }, t.state.phrase("go")));
  function i() {
    let r = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);
    if (!r)
      return;
    let { state: o } = t, s = o.doc.lineAt(o.selection.main.head), [, l, a, f, c] = r, u = f ? +f.slice(1) : 0, h = a ? +a : s.number;
    if (a && c) {
      let p = h / 100;
      l && (p = p * (l == "-" ? -1 : 1) + s.number / o.doc.lines), h = Math.round(o.doc.lines * p);
    } else
      a && l && (h = h * (l == "-" ? -1 : 1) + s.number);
    let d = o.doc.line(Math.max(1, Math.min(o.doc.lines, h)));
    t.dispatch({
      effects: Eu.of(!1),
      selection: we.cursor(d.from + Math.max(0, Math.min(u, d.length))),
      scrollIntoView: !0
    }), t.focus();
  }
  return { dom: n };
}
const Eu = /* @__PURE__ */ gt.define(), Wy = /* @__PURE__ */ xn.define({
  create() {
    return !0;
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Eu) && (t = n.value);
    return t;
  },
  provide: (t) => Xa.from(t, (e) => e ? um : null)
}), PW = (t) => {
  let e = Ga(t, um);
  if (!e) {
    let n = [Eu.of(!0)];
    t.state.field(Wy, !1) == null && n.push(gt.appendConfig.of([Wy, RW])), t.dispatch({ effects: n }), e = Ga(t, um);
  }
  return e && e.dom.querySelector("input").focus(), !0;
}, RW = /* @__PURE__ */ Ge.baseTheme({
  ".cm-panel.cm-gotoLine": {
    padding: "2px 6px 4px",
    "& label": { fontSize: "80%" }
  }
}), IW = {
  highlightWordAroundCursor: !1,
  minSelectionLength: 1,
  maxMatches: 100,
  wholeWords: !1
}, c5 = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, IW, {
      highlightWordAroundCursor: (e, n) => e || n,
      minSelectionLength: Math.min,
      maxMatches: Math.min
    });
  }
});
function NW(t) {
  let e = [xW, LW];
  return t && e.push(c5.of(t)), e;
}
const DW = /* @__PURE__ */ rt.mark({ class: "cm-selectionMatch" }), jW = /* @__PURE__ */ rt.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });
function Uy(t, e, n, i) {
  return (n == 0 || t(e.sliceDoc(n - 1, n)) != cn.Word) && (i == e.doc.length || t(e.sliceDoc(i, i + 1)) != cn.Word);
}
function BW(t, e, n, i) {
  return t(e.sliceDoc(n, n + 1)) == cn.Word && t(e.sliceDoc(i - 1, i)) == cn.Word;
}
const LW = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.selectionSet || t.docChanged || t.viewportChanged) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = t.state.facet(c5), { state: n } = t, i = n.selection;
    if (i.ranges.length > 1)
      return rt.none;
    let r = i.main, o, s = null;
    if (r.empty) {
      if (!e.highlightWordAroundCursor)
        return rt.none;
      let a = n.wordAt(r.head);
      if (!a)
        return rt.none;
      s = n.charCategorizer(r.head), o = n.sliceDoc(a.from, a.to);
    } else {
      let a = r.to - r.from;
      if (a < e.minSelectionLength || a > 200)
        return rt.none;
      if (e.wholeWords) {
        if (o = n.sliceDoc(r.from, r.to), s = n.charCategorizer(r.head), !(Uy(s, n, r.from, r.to) && BW(s, n, r.from, r.to)))
          return rt.none;
      } else if (o = n.sliceDoc(r.from, r.to).trim(), !o)
        return rt.none;
    }
    let l = [];
    for (let a of t.visibleRanges) {
      let f = new Il(n.doc, o, a.from, a.to);
      for (; !f.next().done; ) {
        let { from: c, to: u } = f.value;
        if ((!s || Uy(s, n, c, u)) && (r.empty && c <= r.from && u >= r.to ? l.push(jW.range(c, u)) : (c >= r.to || u <= r.from) && l.push(DW.range(c, u)), l.length > e.maxMatches))
          return rt.none;
      }
    }
    return rt.set(l);
  }
}, {
  decorations: (t) => t.decorations
}), xW = /* @__PURE__ */ Ge.baseTheme({
  ".cm-selectionMatch": { backgroundColor: "#99ff7780" },
  ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" }
}), zW = ({ state: t, dispatch: e }) => {
  let { selection: n } = t, i = we.create(n.ranges.map((r) => t.wordAt(r.head) || we.cursor(r.head)), n.mainIndex);
  return i.eq(n) ? !1 : (e(t.update({ selection: i })), !0);
};
function VW(t, e) {
  let { main: n, ranges: i } = t.selection, r = t.wordAt(n.head), o = r && r.from == n.from && r.to == n.to;
  for (let s = !1, l = new Il(t.doc, e, i[i.length - 1].to); ; )
    if (l.next(), l.done) {
      if (s)
        return null;
      l = new Il(t.doc, e, 0, Math.max(0, i[i.length - 1].from - 1)), s = !0;
    } else {
      if (s && i.some((a) => a.from == l.value.from))
        continue;
      if (o) {
        let a = t.wordAt(l.value.from);
        if (!a || a.from != l.value.from || a.to != l.value.to)
          continue;
      }
      return l.value;
    }
}
const FW = ({ state: t, dispatch: e }) => {
  let { ranges: n } = t.selection;
  if (n.some((o) => o.from === o.to))
    return zW({ state: t, dispatch: e });
  let i = t.sliceDoc(n[0].from, n[0].to);
  if (t.selection.ranges.some((o) => t.sliceDoc(o.from, o.to) != i))
    return !1;
  let r = VW(t, i);
  return r ? (e(t.update({
    selection: t.selection.addRange(we.range(r.from, r.to), !1),
    effects: Ge.scrollIntoView(r.to)
  })), !0) : !1;
}, xh = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      top: !1,
      caseSensitive: !1,
      literal: !1,
      wholeWord: !1,
      createPanel: (e) => new eU(e)
    });
  }
});
function HW(t) {
  return t ? [xh.of(t), dm] : dm;
}
class u5 {
  constructor(e) {
    this.search = e.search, this.caseSensitive = !!e.caseSensitive, this.literal = !!e.literal, this.regexp = !!e.regexp, this.replace = e.replace || "", this.valid = !!this.search && (!this.regexp || EW(this.search)), this.unquoted = this.unquote(this.search), this.wholeWord = !!e.wholeWord;
  }
  unquote(e) {
    return this.literal ? e : e.replace(/\\([nrt\\])/g, (n, i) => i == "n" ? `
` : i == "r" ? "\r" : i == "t" ? "	" : "\\");
  }
  eq(e) {
    return this.search == e.search && this.replace == e.replace && this.caseSensitive == e.caseSensitive && this.regexp == e.regexp && this.wholeWord == e.wholeWord;
  }
  create() {
    return this.regexp ? new JW(this) : new UW(this);
  }
  getCursor(e, n = 0, i) {
    let r = e.doc ? e : St.create({ doc: e });
    return i == null && (i = r.doc.length), this.regexp ? Qs(this, r, n, i) : Xs(this, r, n, i);
  }
}
class h5 {
  constructor(e) {
    this.spec = e;
  }
}
function Xs(t, e, n, i) {
  return new Il(e.doc, t.unquoted, n, i, t.caseSensitive ? void 0 : (r) => r.toLowerCase(), t.wholeWord ? WW(e.doc, e.charCategorizer(e.selection.main.head)) : void 0);
}
function WW(t, e) {
  return (n, i, r, o) => ((o > n || o + r.length < i) && (o = Math.max(0, n - 2), r = t.sliceString(o, Math.min(t.length, i + 2))), (e(Pu(r, n - o)) != cn.Word || e(Ru(r, n - o)) != cn.Word) && (e(Ru(r, i - o)) != cn.Word || e(Pu(r, i - o)) != cn.Word));
}
class UW extends h5 {
  constructor(e) {
    super(e);
  }
  nextMatch(e, n, i) {
    let r = Xs(this.spec, e, i, e.doc.length).nextOverlapping();
    return r.done && (r = Xs(this.spec, e, 0, n).nextOverlapping()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = i; ; ) {
      let o = Math.max(n, r - 1e4 - this.spec.unquoted.length), s = Xs(this.spec, e, o, r), l = null;
      for (; !s.nextOverlapping().done; )
        l = s.value;
      if (l)
        return l;
      if (o == n)
        return null;
      r -= 1e4;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace);
  }
  matchAll(e, n) {
    let i = Xs(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let o = Xs(this.spec, e, Math.max(0, n - this.spec.unquoted.length), Math.min(i + this.spec.unquoted.length, e.doc.length));
    for (; !o.next().done; )
      r(o.value.from, o.value.to);
  }
}
function Qs(t, e, n, i) {
  return new a5(e.doc, t.search, {
    ignoreCase: !t.caseSensitive,
    test: t.wholeWord ? qW(e.charCategorizer(e.selection.main.head)) : void 0
  }, n, i);
}
function Pu(t, e) {
  return t.slice(fi(t, e, !1), e);
}
function Ru(t, e) {
  return t.slice(e, fi(t, e));
}
function qW(t) {
  return (e, n, i) => !i[0].length || (t(Pu(i.input, i.index)) != cn.Word || t(Ru(i.input, i.index)) != cn.Word) && (t(Ru(i.input, i.index + i[0].length)) != cn.Word || t(Pu(i.input, i.index + i[0].length)) != cn.Word);
}
class JW extends h5 {
  nextMatch(e, n, i) {
    let r = Qs(this.spec, e, i, e.doc.length).next();
    return r.done && (r = Qs(this.spec, e, 0, n).next()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = 1; ; r++) {
      let o = Math.max(n, i - r * 1e4), s = Qs(this.spec, e, o, i), l = null;
      for (; !s.next().done; )
        l = s.value;
      if (l && (o == n || l.from > o + 10))
        return l;
      if (o == n)
        return null;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g, (n, i) => i == "$" ? "$" : i == "&" ? e.match[0] : i != "0" && +i < e.match.length ? e.match[i] : n));
  }
  matchAll(e, n) {
    let i = Qs(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let o = Qs(this.spec, e, Math.max(0, n - 250), Math.min(i + 250, e.doc.length));
    for (; !o.next().done; )
      r(o.value.from, o.value.to);
  }
}
const Za = /* @__PURE__ */ gt.define(), Vg = /* @__PURE__ */ gt.define(), Ro = /* @__PURE__ */ xn.define({
  create(t) {
    return new xd(hm(t).create(), null);
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Za) ? t = new xd(n.value.create(), t.panel) : n.is(Vg) && (t = new xd(t.query, n.value ? Fg : null));
    return t;
  },
  provide: (t) => Xa.from(t, (e) => e.panel)
});
class xd {
  constructor(e, n) {
    this.query = e, this.panel = n;
  }
}
const KW = /* @__PURE__ */ rt.mark({ class: "cm-searchMatch" }), GW = /* @__PURE__ */ rt.mark({ class: "cm-searchMatch cm-searchMatch-selected" }), XW = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.decorations = this.highlight(t.state.field(Ro));
  }
  update(t) {
    let e = t.state.field(Ro);
    (e != t.startState.field(Ro) || t.docChanged || t.selectionSet || t.viewportChanged) && (this.decorations = this.highlight(e));
  }
  highlight({ query: t, panel: e }) {
    if (!e || !t.spec.valid)
      return rt.none;
    let { view: n } = this, i = new Fo();
    for (let r = 0, o = n.visibleRanges, s = o.length; r < s; r++) {
      let { from: l, to: a } = o[r];
      for (; r < s - 1 && a > o[r + 1].from - 2 * 250; )
        a = o[++r].to;
      t.highlight(n.state, l, a, (f, c) => {
        let u = n.state.selection.ranges.some((h) => h.from == f && h.to == c);
        i.add(f, c, u ? GW : KW);
      });
    }
    return i.finish();
  }
}, {
  decorations: (t) => t.decorations
});
function wf(t) {
  return (e) => {
    let n = e.state.field(Ro, !1);
    return n && n.query.spec.valid ? t(e, n) : Hg(e);
  };
}
const Iu = /* @__PURE__ */ wf((t, { query: e }) => {
  let { to: n } = t.state.selection.main, i = e.nextMatch(t.state, n, n);
  return i ? (t.dispatch({
    selection: { anchor: i.from, head: i.to },
    scrollIntoView: !0,
    effects: Ug(t, i),
    userEvent: "select.search"
  }), !0) : !1;
}), Nu = /* @__PURE__ */ wf((t, { query: e }) => {
  let { state: n } = t, { from: i } = n.selection.main, r = e.prevMatch(n, i, i);
  return r ? (t.dispatch({
    selection: { anchor: r.from, head: r.to },
    scrollIntoView: !0,
    effects: Ug(t, r),
    userEvent: "select.search"
  }), !0) : !1;
}), QW = /* @__PURE__ */ wf((t, { query: e }) => {
  let n = e.matchAll(t.state, 1e3);
  return !n || !n.length ? !1 : (t.dispatch({
    selection: we.create(n.map((i) => we.range(i.from, i.to))),
    userEvent: "select.search.matches"
  }), !0);
}), YW = ({ state: t, dispatch: e }) => {
  let n = t.selection;
  if (n.ranges.length > 1 || n.main.empty)
    return !1;
  let { from: i, to: r } = n.main, o = [], s = 0;
  for (let l = new Il(t.doc, t.sliceDoc(i, r)); !l.next().done; ) {
    if (o.length > 1e3)
      return !1;
    l.value.from == i && (s = o.length), o.push(we.range(l.value.from, l.value.to));
  }
  return e(t.update({
    selection: we.create(o, s),
    userEvent: "select.search.matches"
  })), !0;
}, qy = /* @__PURE__ */ wf((t, { query: e }) => {
  let { state: n } = t, { from: i, to: r } = n.selection.main;
  if (n.readOnly)
    return !1;
  let o = e.nextMatch(n, i, i);
  if (!o)
    return !1;
  let s = [], l, a, f = [];
  if (o.from == i && o.to == r && (a = n.toText(e.getReplacement(o)), s.push({ from: o.from, to: o.to, insert: a }), o = e.nextMatch(n, o.from, o.to), f.push(Ge.announce.of(n.phrase("replaced match on line $", n.doc.lineAt(i).number) + "."))), o) {
    let c = s.length == 0 || s[0].from >= o.to ? 0 : o.to - o.from - a.length;
    l = { anchor: o.from - c, head: o.to - c }, f.push(Ug(t, o));
  }
  return t.dispatch({
    changes: s,
    selection: l,
    scrollIntoView: !!l,
    effects: f,
    userEvent: "input.replace"
  }), !0;
}), ZW = /* @__PURE__ */ wf((t, { query: e }) => {
  if (t.state.readOnly)
    return !1;
  let n = e.matchAll(t.state, 1e9).map((r) => {
    let { from: o, to: s } = r;
    return { from: o, to: s, insert: e.getReplacement(r) };
  });
  if (!n.length)
    return !1;
  let i = t.state.phrase("replaced $ matches", n.length) + ".";
  return t.dispatch({
    changes: n,
    effects: Ge.announce.of(i),
    userEvent: "input.replace.all"
  }), !0;
});
function Fg(t) {
  return t.state.facet(xh).createPanel(t);
}
function hm(t, e) {
  var n, i, r, o;
  let s = t.selection.main, l = s.empty || s.to > s.from + 100 ? "" : t.sliceDoc(s.from, s.to);
  if (e && !l)
    return e;
  let a = t.facet(xh);
  return new u5({
    search: ((n = e == null ? void 0 : e.literal) !== null && n !== void 0 ? n : a.literal) ? l : l.replace(/\n/g, "\\n"),
    caseSensitive: (i = e == null ? void 0 : e.caseSensitive) !== null && i !== void 0 ? i : a.caseSensitive,
    literal: (r = e == null ? void 0 : e.literal) !== null && r !== void 0 ? r : a.literal,
    wholeWord: (o = e == null ? void 0 : e.wholeWord) !== null && o !== void 0 ? o : a.wholeWord
  });
}
const Hg = (t) => {
  let e = t.state.field(Ro, !1);
  if (e && e.panel) {
    let n = Ga(t, Fg);
    if (!n)
      return !1;
    let i = n.dom.querySelector("[main-field]");
    if (i && i != t.root.activeElement) {
      let r = hm(t.state, e.query.spec);
      r.valid && t.dispatch({ effects: Za.of(r) }), i.focus(), i.select();
    }
  } else
    t.dispatch({ effects: [
      Vg.of(!0),
      e ? Za.of(hm(t.state, e.query.spec)) : gt.appendConfig.of(dm)
    ] });
  return !0;
}, Wg = (t) => {
  let e = t.state.field(Ro, !1);
  if (!e || !e.panel)
    return !1;
  let n = Ga(t, Fg);
  return n && n.dom.contains(t.root.activeElement) && t.focus(), t.dispatch({ effects: Vg.of(!1) }), !0;
}, $W = [
  { key: "Mod-f", run: Hg, scope: "editor search-panel" },
  { key: "F3", run: Iu, shift: Nu, scope: "editor search-panel", preventDefault: !0 },
  { key: "Mod-g", run: Iu, shift: Nu, scope: "editor search-panel", preventDefault: !0 },
  { key: "Escape", run: Wg, scope: "editor search-panel" },
  { key: "Mod-Shift-l", run: YW },
  { key: "Alt-g", run: PW },
  { key: "Mod-d", run: FW, preventDefault: !0 }
];
class eU {
  constructor(e) {
    this.view = e;
    let n = this.query = e.state.field(Ro).query.spec;
    this.commit = this.commit.bind(this), this.searchField = Qt("input", {
      value: n.search,
      placeholder: ki(e, "Find"),
      "aria-label": ki(e, "Find"),
      class: "cm-textfield",
      name: "search",
      form: "",
      "main-field": "true",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.replaceField = Qt("input", {
      value: n.replace,
      placeholder: ki(e, "Replace"),
      "aria-label": ki(e, "Replace"),
      class: "cm-textfield",
      name: "replace",
      form: "",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.caseField = Qt("input", {
      type: "checkbox",
      name: "case",
      form: "",
      checked: n.caseSensitive,
      onchange: this.commit
    }), this.reField = Qt("input", {
      type: "checkbox",
      name: "re",
      form: "",
      checked: n.regexp,
      onchange: this.commit
    }), this.wordField = Qt("input", {
      type: "checkbox",
      name: "word",
      form: "",
      checked: n.wholeWord,
      onchange: this.commit
    });
    function i(r, o, s) {
      return Qt("button", { class: "cm-button", name: r, onclick: o, type: "button" }, s);
    }
    this.dom = Qt("div", { onkeydown: (r) => this.keydown(r), class: "cm-search" }, [
      this.searchField,
      i("next", () => Iu(e), [ki(e, "next")]),
      i("prev", () => Nu(e), [ki(e, "previous")]),
      i("select", () => QW(e), [ki(e, "all")]),
      Qt("label", null, [this.caseField, ki(e, "match case")]),
      Qt("label", null, [this.reField, ki(e, "regexp")]),
      Qt("label", null, [this.wordField, ki(e, "by word")]),
      ...e.state.readOnly ? [] : [
        Qt("br"),
        this.replaceField,
        i("replace", () => qy(e), [ki(e, "replace")]),
        i("replaceAll", () => ZW(e), [ki(e, "replace all")])
      ],
      Qt("button", {
        name: "close",
        onclick: () => Wg(e),
        "aria-label": ki(e, "close"),
        type: "button"
      }, ["×"])
    ]);
  }
  commit() {
    let e = new u5({
      search: this.searchField.value,
      caseSensitive: this.caseField.checked,
      regexp: this.reField.checked,
      wholeWord: this.wordField.checked,
      replace: this.replaceField.value
    });
    e.eq(this.query) || (this.query = e, this.view.dispatch({ effects: Za.of(e) }));
  }
  keydown(e) {
    bV(this.view, e, "search-panel") ? e.preventDefault() : e.keyCode == 13 && e.target == this.searchField ? (e.preventDefault(), (e.shiftKey ? Nu : Iu)(this.view)) : e.keyCode == 13 && e.target == this.replaceField && (e.preventDefault(), qy(this.view));
  }
  update(e) {
    for (let n of e.transactions)
      for (let i of n.effects)
        i.is(Za) && !i.value.eq(this.query) && this.setQuery(i.value);
  }
  setQuery(e) {
    this.query = e, this.searchField.value = e.search, this.replaceField.value = e.replace, this.caseField.checked = e.caseSensitive, this.reField.checked = e.regexp, this.wordField.checked = e.wholeWord;
  }
  mount() {
    this.searchField.select();
  }
  get pos() {
    return 80;
  }
  get top() {
    return this.view.state.facet(xh).top;
  }
}
function ki(t, e) {
  return t.state.phrase(e);
}
const rc = 30, oc = /[\s\.,:;?!]/;
function Ug(t, { from: e, to: n }) {
  let i = t.state.doc.lineAt(e), r = t.state.doc.lineAt(n).to, o = Math.max(i.from, e - rc), s = Math.min(r, n + rc), l = t.state.sliceDoc(o, s);
  if (o != i.from) {
    for (let a = 0; a < rc; a++)
      if (!oc.test(l[a + 1]) && oc.test(l[a])) {
        l = l.slice(a);
        break;
      }
  }
  if (s != r) {
    for (let a = l.length - 1; a > l.length - rc; a--)
      if (!oc.test(l[a - 1]) && oc.test(l[a])) {
        l = l.slice(0, a);
        break;
      }
  }
  return Ge.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`);
}
const tU = /* @__PURE__ */ Ge.baseTheme({
  ".cm-panel.cm-search": {
    padding: "2px 6px 4px",
    position: "relative",
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    },
    "& input, & button, & label": {
      margin: ".2em .6em .2em 0"
    },
    "& input[type=checkbox]": {
      marginRight: ".2em"
    },
    "& label": {
      fontSize: "80%",
      whiteSpace: "pre"
    }
  },
  "&light .cm-searchMatch": { backgroundColor: "#ffff0054" },
  "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" },
  "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" },
  "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" }
}), dm = [
  Ro,
  /* @__PURE__ */ ql.lowest(XW),
  tU
];
class d5 {
  constructor(e, n, i) {
    this.state = e, this.pos = n, this.explicit = i, this.abortListeners = [];
  }
  tokenBefore(e) {
    let n = ni(this.state).resolveInner(this.pos, -1);
    for (; n && e.indexOf(n.name) < 0; )
      n = n.parent;
    return n ? {
      from: n.from,
      to: this.pos,
      text: this.state.sliceDoc(n.from, this.pos),
      type: n.type
    } : null;
  }
  matchBefore(e) {
    let n = this.state.doc.lineAt(this.pos), i = Math.max(n.from, this.pos - 250), r = n.text.slice(i - n.from, this.pos - n.from), o = r.search(p5(e, !1));
    return o < 0 ? null : { from: i + o, to: this.pos, text: r.slice(o) };
  }
  get aborted() {
    return this.abortListeners == null;
  }
  addEventListener(e, n) {
    e == "abort" && this.abortListeners && this.abortListeners.push(n);
  }
}
function Jy(t) {
  let e = Object.keys(t).join(""), n = /\w/.test(e);
  return n && (e = e.replace(/\w/g, "")), `[${n ? "\\w" : ""}${e.replace(/[^\w\s]/g, "\\$&")}]`;
}
function nU(t) {
  let e = /* @__PURE__ */ Object.create(null), n = /* @__PURE__ */ Object.create(null);
  for (let { label: r } of t) {
    e[r[0]] = !0;
    for (let o = 1; o < r.length; o++)
      n[r[o]] = !0;
  }
  let i = Jy(e) + Jy(n) + "*$";
  return [new RegExp("^" + i), new RegExp(i)];
}
function iU(t) {
  let e = t.map((r) => typeof r == "string" ? { label: r } : r), [n, i] = e.every((r) => /^\w+$/.test(r.label)) ? [/\w*$/, /\w+$/] : nU(e);
  return (r) => {
    let o = r.matchBefore(i);
    return o || r.explicit ? { from: o ? o.from : r.pos, options: e, validFor: n } : null;
  };
}
class Ky {
  constructor(e, n, i) {
    this.completion = e, this.source = n, this.match = i;
  }
}
function Io(t) {
  return t.selection.main.head;
}
function p5(t, e) {
  var n;
  let { source: i } = t, r = e && i[0] != "^", o = i[i.length - 1] != "$";
  return !r && !o ? t : new RegExp(`${r ? "^" : ""}(?:${i})${o ? "$" : ""}`, (n = t.flags) !== null && n !== void 0 ? n : t.ignoreCase ? "i" : "");
}
const rU = /* @__PURE__ */ Qo.define();
function oU(t, e, n, i) {
  return Object.assign(Object.assign({}, t.changeByRange((r) => {
    if (r == t.selection.main)
      return {
        changes: { from: n, to: i, insert: e },
        range: we.cursor(n + e.length)
      };
    let o = i - n;
    return !r.empty || o && t.sliceDoc(r.from - o, r.from) != t.sliceDoc(n, i) ? { range: r } : {
      changes: { from: r.from - o, to: r.from, insert: e },
      range: we.cursor(r.from - o + e.length)
    };
  })), { userEvent: "input.complete" });
}
function m5(t, e) {
  const n = e.completion.apply || e.completion.label;
  let i = e.source;
  typeof n == "string" ? t.dispatch(Object.assign(Object.assign({}, oU(t.state, n, i.from, i.to)), { annotations: rU.of(e.completion) })) : n(t, e.completion, i.from, i.to);
}
const Gy = /* @__PURE__ */ new WeakMap();
function sU(t) {
  if (!Array.isArray(t))
    return t;
  let e = Gy.get(t);
  return e || Gy.set(t, e = iU(t)), e;
}
class lU {
  constructor(e) {
    this.pattern = e, this.chars = [], this.folded = [], this.any = [], this.precise = [], this.byWord = [];
    for (let n = 0; n < e.length; ) {
      let i = Xn(e, n), r = Mi(i);
      this.chars.push(i);
      let o = e.slice(n, n + r), s = o.toUpperCase();
      this.folded.push(Xn(s == o ? o.toLowerCase() : s, 0)), n += r;
    }
    this.astral = e.length != this.chars.length;
  }
  match(e) {
    if (this.pattern.length == 0)
      return [0];
    if (e.length < this.pattern.length)
      return null;
    let { chars: n, folded: i, any: r, precise: o, byWord: s } = this;
    if (n.length == 1) {
      let y = Xn(e, 0);
      return y == n[0] ? [0, 0, Mi(y)] : y == i[0] ? [-200, 0, Mi(y)] : null;
    }
    let l = e.indexOf(this.pattern);
    if (l == 0)
      return [0, 0, this.pattern.length];
    let a = n.length, f = 0;
    if (l < 0) {
      for (let y = 0, v = Math.min(e.length, 200); y < v && f < a; ) {
        let M = Xn(e, y);
        (M == n[f] || M == i[f]) && (r[f++] = y), y += Mi(M);
      }
      if (f < a)
        return null;
    }
    let c = 0, u = 0, h = !1, d = 0, p = -1, g = -1, _ = /[a-z]/.test(e), b = !0;
    for (let y = 0, v = Math.min(e.length, 200), M = 0; y < v && u < a; ) {
      let A = Xn(e, y);
      l < 0 && (c < a && A == n[c] && (o[c++] = y), d < a && (A == n[d] || A == i[d] ? (d == 0 && (p = y), g = y + 1, d++) : d = 0));
      let P, S = A < 255 ? A >= 48 && A <= 57 || A >= 97 && A <= 122 ? 2 : A >= 65 && A <= 90 ? 1 : 0 : (P = bg(A)) != P.toLowerCase() ? 1 : P != P.toUpperCase() ? 2 : 0;
      (!y || S == 1 && _ || M == 0 && S != 0) && (n[u] == A || i[u] == A && (h = !0) ? s[u++] = y : s.length && (b = !1)), M = S, y += Mi(A);
    }
    return u == a && s[0] == 0 && b ? this.result(-100 + (h ? -200 : 0), s, e) : d == a && p == 0 ? [-200 - e.length, 0, g] : l > -1 ? [-700 - e.length, l, l + this.pattern.length] : d == a ? [-200 + -700 - e.length, p, g] : u == a ? this.result(-100 + (h ? -200 : 0) + -700 + (b ? 0 : -1100), s, e) : n.length == 2 ? null : this.result((r[0] ? -700 : 0) + -200 + -1100, r, e);
  }
  result(e, n, i) {
    let r = [e - i.length], o = 1;
    for (let s of n) {
      let l = s + (this.astral ? Mi(Xn(i, s)) : 1);
      o > 1 && r[o - 1] == s ? r[o - 1] = l : (r[o++] = s, r[o++] = l);
    }
    return r;
  }
}
const Fi = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      activateOnTyping: !0,
      selectOnOpen: !0,
      override: null,
      closeOnBlur: !0,
      maxRenderedOptions: 100,
      defaultKeymap: !0,
      tooltipClass: () => "",
      optionClass: () => "",
      aboveCursor: !1,
      icons: !0,
      addToOptions: [],
      compareCompletions: (e, n) => e.label.localeCompare(n.label),
      interactionDelay: 75
    }, {
      defaultKeymap: (e, n) => e && n,
      closeOnBlur: (e, n) => e && n,
      icons: (e, n) => e && n,
      tooltipClass: (e, n) => (i) => Xy(e(i), n(i)),
      optionClass: (e, n) => (i) => Xy(e(i), n(i)),
      addToOptions: (e, n) => e.concat(n)
    });
  }
});
function Xy(t, e) {
  return t ? e ? t + " " + e : t : e;
}
function aU(t) {
  let e = t.addToOptions.slice();
  return t.icons && e.push({
    render(n) {
      let i = document.createElement("div");
      return i.classList.add("cm-completionIcon"), n.type && i.classList.add(...n.type.split(/\s+/g).map((r) => "cm-completionIcon-" + r)), i.setAttribute("aria-hidden", "true"), i;
    },
    position: 20
  }), e.push({
    render(n, i, r) {
      let o = document.createElement("span");
      o.className = "cm-completionLabel";
      let { label: s } = n, l = 0;
      for (let a = 1; a < r.length; ) {
        let f = r[a++], c = r[a++];
        f > l && o.appendChild(document.createTextNode(s.slice(l, f)));
        let u = o.appendChild(document.createElement("span"));
        u.appendChild(document.createTextNode(s.slice(f, c))), u.className = "cm-completionMatchedText", l = c;
      }
      return l < s.length && o.appendChild(document.createTextNode(s.slice(l))), o;
    },
    position: 50
  }, {
    render(n) {
      if (!n.detail)
        return null;
      let i = document.createElement("span");
      return i.className = "cm-completionDetail", i.textContent = n.detail, i;
    },
    position: 80
  }), e.sort((n, i) => n.position - i.position).map((n) => n.render);
}
function Qy(t, e, n) {
  if (t <= n)
    return { from: 0, to: t };
  if (e < 0 && (e = 0), e <= t >> 1) {
    let r = Math.floor(e / n);
    return { from: r * n, to: (r + 1) * n };
  }
  let i = Math.floor((t - e) / n);
  return { from: t - (i + 1) * n, to: t - i * n };
}
class fU {
  constructor(e, n) {
    this.view = e, this.stateField = n, this.info = null, this.placeInfo = {
      read: () => this.measureInfo(),
      write: (l) => this.positionInfo(l),
      key: this
    }, this.space = null, this.currentClass = "";
    let i = e.state.field(n), { options: r, selected: o } = i.open, s = e.state.facet(Fi);
    this.optionContent = aU(s), this.optionClass = s.optionClass, this.tooltipClass = s.tooltipClass, this.range = Qy(r.length, o, s.maxRenderedOptions), this.dom = document.createElement("div"), this.dom.className = "cm-tooltip-autocomplete", this.updateTooltipClass(e.state), this.dom.addEventListener("mousedown", (l) => {
      for (let a = l.target, f; a && a != this.dom; a = a.parentNode)
        if (a.nodeName == "LI" && (f = /-(\d+)$/.exec(a.id)) && +f[1] < r.length) {
          m5(e, r[+f[1]]), l.preventDefault();
          return;
        }
    }), this.list = this.dom.appendChild(this.createListBox(r, i.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    });
  }
  mount() {
    this.updateSel();
  }
  update(e) {
    var n, i, r;
    let o = e.state.field(this.stateField), s = e.startState.field(this.stateField);
    this.updateTooltipClass(e.state), o != s && (this.updateSel(), ((n = o.open) === null || n === void 0 ? void 0 : n.disabled) != ((i = s.open) === null || i === void 0 ? void 0 : i.disabled) && this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!(!((r = o.open) === null || r === void 0) && r.disabled)));
  }
  updateTooltipClass(e) {
    let n = this.tooltipClass(e);
    if (n != this.currentClass) {
      for (let i of this.currentClass.split(" "))
        i && this.dom.classList.remove(i);
      for (let i of n.split(" "))
        i && this.dom.classList.add(i);
      this.currentClass = n;
    }
  }
  positioned(e) {
    this.space = e, this.info && this.view.requestMeasure(this.placeInfo);
  }
  updateSel() {
    let e = this.view.state.field(this.stateField), n = e.open;
    if ((n.selected > -1 && n.selected < this.range.from || n.selected >= this.range.to) && (this.range = Qy(n.options.length, n.selected, this.view.state.facet(Fi).maxRenderedOptions), this.list.remove(), this.list = this.dom.appendChild(this.createListBox(n.options, e.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    })), this.updateSelectedOption(n.selected)) {
      this.info && (this.info.remove(), this.info = null);
      let { completion: i } = n.options[n.selected], { info: r } = i;
      if (!r)
        return;
      let o = typeof r == "string" ? document.createTextNode(r) : r(i);
      if (!o)
        return;
      "then" in o ? o.then((s) => {
        s && this.view.state.field(this.stateField, !1) == e && this.addInfoPane(s);
      }).catch((s) => Ti(this.view.state, s, "completion info")) : this.addInfoPane(o);
    }
  }
  addInfoPane(e) {
    let n = this.info = document.createElement("div");
    n.className = "cm-tooltip cm-completionInfo", n.appendChild(e), this.dom.appendChild(n), this.view.requestMeasure(this.placeInfo);
  }
  updateSelectedOption(e) {
    let n = null;
    for (let i = this.list.firstChild, r = this.range.from; i; i = i.nextSibling, r++)
      r == e ? i.hasAttribute("aria-selected") || (i.setAttribute("aria-selected", "true"), n = i) : i.hasAttribute("aria-selected") && i.removeAttribute("aria-selected");
    return n && uU(this.list, n), n;
  }
  measureInfo() {
    let e = this.dom.querySelector("[aria-selected]");
    if (!e || !this.info)
      return null;
    let n = this.dom.getBoundingClientRect(), i = this.info.getBoundingClientRect(), r = e.getBoundingClientRect(), o = this.space;
    if (!o) {
      let p = this.dom.ownerDocument.defaultView || window;
      o = { left: 0, top: 0, right: p.innerWidth, bottom: p.innerHeight };
    }
    if (r.top > Math.min(o.bottom, n.bottom) - 10 || r.bottom < Math.max(o.top, n.top) + 10)
      return null;
    let s = this.view.textDirection == pn.RTL, l = s, a = !1, f, c = "", u = "", h = n.left - o.left, d = o.right - n.right;
    if (l && h < Math.min(i.width, d) ? l = !1 : !l && d < Math.min(i.width, h) && (l = !0), i.width <= (l ? h : d))
      c = Math.max(o.top, Math.min(r.top, o.bottom - i.height)) - n.top + "px", f = Math.min(400, l ? h : d) + "px";
    else {
      a = !0, f = Math.min(400, (s ? n.right : o.right - n.left) - 30) + "px";
      let p = o.bottom - n.bottom;
      p >= i.height || p > n.top ? c = r.bottom - n.top + "px" : u = n.bottom - r.top + "px";
    }
    return {
      top: c,
      bottom: u,
      maxWidth: f,
      class: a ? s ? "left-narrow" : "right-narrow" : l ? "left" : "right"
    };
  }
  positionInfo(e) {
    this.info && (e ? (this.info.style.top = e.top, this.info.style.bottom = e.bottom, this.info.style.maxWidth = e.maxWidth, this.info.className = "cm-tooltip cm-completionInfo cm-completionInfo-" + e.class) : this.info.style.top = "-1e6px");
  }
  createListBox(e, n, i) {
    const r = document.createElement("ul");
    r.id = n, r.setAttribute("role", "listbox"), r.setAttribute("aria-expanded", "true"), r.setAttribute("aria-label", this.view.state.phrase("Completions"));
    for (let o = i.from; o < i.to; o++) {
      let { completion: s, match: l } = e[o];
      const a = r.appendChild(document.createElement("li"));
      a.id = n + "-" + o, a.setAttribute("role", "option");
      let f = this.optionClass(s);
      f && (a.className = f);
      for (let c of this.optionContent) {
        let u = c(s, this.view.state, l);
        u && a.appendChild(u);
      }
    }
    return i.from && r.classList.add("cm-completionListIncompleteTop"), i.to < e.length && r.classList.add("cm-completionListIncompleteBottom"), r;
  }
}
function cU(t) {
  return (e) => new fU(e, t);
}
function uU(t, e) {
  let n = t.getBoundingClientRect(), i = e.getBoundingClientRect();
  i.top < n.top ? t.scrollTop -= n.top - i.top : i.bottom > n.bottom && (t.scrollTop += i.bottom - n.bottom);
}
function Yy(t) {
  return (t.boost || 0) * 100 + (t.apply ? 10 : 0) + (t.info ? 5 : 0) + (t.type ? 1 : 0);
}
function hU(t, e) {
  let n = [], i = 0;
  for (let l of t)
    if (l.hasResult())
      if (l.result.filter === !1) {
        let a = l.result.getMatch;
        for (let f of l.result.options) {
          let c = [1e9 - i++];
          if (a)
            for (let u of a(f))
              c.push(u);
          n.push(new Ky(f, l, c));
        }
      } else {
        let a = new lU(e.sliceDoc(l.from, l.to)), f;
        for (let c of l.result.options)
          (f = a.match(c.label)) && (c.boost != null && (f[0] += c.boost), n.push(new Ky(c, l, f)));
      }
  let r = [], o = null, s = e.facet(Fi).compareCompletions;
  for (let l of n.sort((a, f) => f.match[0] - a.match[0] || s(a.completion, f.completion)))
    !o || o.label != l.completion.label || o.detail != l.completion.detail || o.type != null && l.completion.type != null && o.type != l.completion.type || o.apply != l.completion.apply ? r.push(l) : Yy(l.completion) > Yy(o) && (r[r.length - 1] = l), o = l.completion;
  return r;
}
class tl {
  constructor(e, n, i, r, o, s) {
    this.options = e, this.attrs = n, this.tooltip = i, this.timestamp = r, this.selected = o, this.disabled = s;
  }
  setSelected(e, n) {
    return e == this.selected || e >= this.options.length ? this : new tl(this.options, Zy(n, e), this.tooltip, this.timestamp, e, this.disabled);
  }
  static build(e, n, i, r, o) {
    let s = hU(e, n);
    if (!s.length)
      return r && e.some((a) => a.state == 1) ? new tl(r.options, r.attrs, r.tooltip, r.timestamp, r.selected, !0) : null;
    let l = n.facet(Fi).selectOnOpen ? 0 : -1;
    if (r && r.selected != l && r.selected != -1) {
      let a = r.options[r.selected].completion;
      for (let f = 0; f < s.length; f++)
        if (s[f].completion == a) {
          l = f;
          break;
        }
    }
    return new tl(s, Zy(i, l), {
      pos: e.reduce((a, f) => f.hasResult() ? Math.min(a, f.from) : a, 1e8),
      create: cU(Ii),
      above: o.aboveCursor
    }, r ? r.timestamp : Date.now(), l, !1);
  }
  map(e) {
    return new tl(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: e.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);
  }
}
class Du {
  constructor(e, n, i) {
    this.active = e, this.id = n, this.open = i;
  }
  static start() {
    return new Du(mU, "cm-ac-" + Math.floor(Math.random() * 2e6).toString(36), null);
  }
  update(e) {
    let { state: n } = e, i = n.facet(Fi), o = (i.override || n.languageDataAt("autocomplete", Io(n)).map(sU)).map((l) => (this.active.find((f) => f.source == l) || new mi(l, this.active.some((f) => f.state != 0) ? 1 : 0)).update(e, i));
    o.length == this.active.length && o.every((l, a) => l == this.active[a]) && (o = this.active);
    let s = this.open;
    s && e.docChanged && (s = s.map(e.changes)), e.selection || o.some((l) => l.hasResult() && e.changes.touchesRange(l.from, l.to)) || !dU(o, this.active) ? s = tl.build(o, n, this.id, s, i) : s && s.disabled && !o.some((l) => l.state == 1) && (s = null), !s && o.every((l) => l.state != 1) && o.some((l) => l.hasResult()) && (o = o.map((l) => l.hasResult() ? new mi(l.source, 0) : l));
    for (let l of e.effects)
      l.is(b5) && (s = s && s.setSelected(l.value, this.id));
    return o == this.active && s == this.open ? this : new Du(o, this.id, s);
  }
  get tooltip() {
    return this.open ? this.open.tooltip : null;
  }
  get attrs() {
    return this.open ? this.open.attrs : pU;
  }
}
function dU(t, e) {
  if (t == e)
    return !0;
  for (let n = 0, i = 0; ; ) {
    for (; n < t.length && !t[n].hasResult; )
      n++;
    for (; i < e.length && !e[i].hasResult; )
      i++;
    let r = n == t.length, o = i == e.length;
    if (r || o)
      return r == o;
    if (t[n++].result != e[i++].result)
      return !1;
  }
}
const pU = {
  "aria-autocomplete": "list"
};
function Zy(t, e) {
  let n = {
    "aria-autocomplete": "list",
    "aria-haspopup": "listbox",
    "aria-controls": t
  };
  return e > -1 && (n["aria-activedescendant"] = t + "-" + e), n;
}
const mU = [];
function pm(t) {
  return t.isUserEvent("input.type") ? "input" : t.isUserEvent("delete.backward") ? "delete" : null;
}
class mi {
  constructor(e, n, i = -1) {
    this.source = e, this.state = n, this.explicitPos = i;
  }
  hasResult() {
    return !1;
  }
  update(e, n) {
    let i = pm(e), r = this;
    i ? r = r.handleUserEvent(e, i, n) : e.docChanged ? r = r.handleChange(e) : e.selection && r.state != 0 && (r = new mi(r.source, 0));
    for (let o of e.effects)
      if (o.is(qg))
        r = new mi(r.source, 1, o.value ? Io(e.state) : -1);
      else if (o.is(ju))
        r = new mi(r.source, 0);
      else if (o.is(g5))
        for (let s of o.value)
          s.source == r.source && (r = s);
    return r;
  }
  handleUserEvent(e, n, i) {
    return n == "delete" || !i.activateOnTyping ? this.map(e.changes) : new mi(this.source, 1);
  }
  handleChange(e) {
    return e.changes.touchesRange(Io(e.startState)) ? new mi(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty || this.explicitPos < 0 ? this : new mi(this.source, this.state, e.mapPos(this.explicitPos));
  }
}
class Sa extends mi {
  constructor(e, n, i, r, o) {
    super(e, 2, n), this.result = i, this.from = r, this.to = o;
  }
  hasResult() {
    return !0;
  }
  handleUserEvent(e, n, i) {
    var r;
    let o = e.changes.mapPos(this.from), s = e.changes.mapPos(this.to, 1), l = Io(e.state);
    if ((this.explicitPos < 0 ? l <= o : l < this.from) || l > s || n == "delete" && Io(e.startState) == this.from)
      return new mi(this.source, n == "input" && i.activateOnTyping ? 1 : 0);
    let a = this.explicitPos < 0 ? -1 : e.changes.mapPos(this.explicitPos), f;
    return gU(this.result.validFor, e.state, o, s) ? new Sa(this.source, a, this.result, o, s) : this.result.update && (f = this.result.update(this.result, o, s, new d5(e.state, l, a >= 0))) ? new Sa(this.source, a, f, f.from, (r = f.to) !== null && r !== void 0 ? r : Io(e.state)) : new mi(this.source, 1, a);
  }
  handleChange(e) {
    return e.changes.touchesRange(this.from, this.to) ? new mi(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty ? this : new Sa(this.source, this.explicitPos < 0 ? -1 : e.mapPos(this.explicitPos), this.result, e.mapPos(this.from), e.mapPos(this.to, 1));
  }
}
function gU(t, e, n, i) {
  if (!t)
    return !1;
  let r = e.sliceDoc(n, i);
  return typeof t == "function" ? t(r, n, i, e) : p5(t, !0).test(r);
}
const qg = /* @__PURE__ */ gt.define(), ju = /* @__PURE__ */ gt.define(), g5 = /* @__PURE__ */ gt.define({
  map(t, e) {
    return t.map((n) => n.map(e));
  }
}), b5 = /* @__PURE__ */ gt.define(), Ii = /* @__PURE__ */ xn.define({
  create() {
    return Du.start();
  },
  update(t, e) {
    return t.update(e);
  },
  provide: (t) => [
    Eh.from(t, (e) => e.tooltip),
    Ge.contentAttributes.from(t, (e) => e.attrs)
  ]
});
function sc(t, e = "option") {
  return (n) => {
    let i = n.state.field(Ii, !1);
    if (!i || !i.open || i.open.disabled || Date.now() - i.open.timestamp < n.state.facet(Fi).interactionDelay)
      return !1;
    let r = 1, o;
    e == "page" && (o = iF(n, i.open.tooltip)) && (r = Math.max(2, Math.floor(o.dom.offsetHeight / o.dom.querySelector("li").offsetHeight) - 1));
    let { length: s } = i.open.options, l = i.open.selected > -1 ? i.open.selected + r * (t ? 1 : -1) : t ? 0 : s - 1;
    return l < 0 ? l = e == "page" ? 0 : s - 1 : l >= s && (l = e == "page" ? s - 1 : 0), n.dispatch({ effects: b5.of(l) }), !0;
  };
}
const bU = (t) => {
  let e = t.state.field(Ii, !1);
  return t.state.readOnly || !e || !e.open || e.open.selected < 0 || Date.now() - e.open.timestamp < t.state.facet(Fi).interactionDelay ? !1 : (e.open.disabled || m5(t, e.open.options[e.open.selected]), !0);
}, _U = (t) => t.state.field(Ii, !1) ? (t.dispatch({ effects: qg.of(!0) }), !0) : !1, yU = (t) => {
  let e = t.state.field(Ii, !1);
  return !e || !e.active.some((n) => n.state != 0) ? !1 : (t.dispatch({ effects: ju.of(null) }), !0);
};
class wU {
  constructor(e, n) {
    this.active = e, this.context = n, this.time = Date.now(), this.updates = [], this.done = void 0;
  }
}
const $y = 50, vU = 50, kU = 1e3, CU = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.debounceUpdate = -1, this.running = [], this.debounceAccept = -1, this.composing = 0;
    for (let e of t.state.field(Ii).active)
      e.state == 1 && this.startQuery(e);
  }
  update(t) {
    let e = t.state.field(Ii);
    if (!t.selectionSet && !t.docChanged && t.startState.field(Ii) == e)
      return;
    let n = t.transactions.some((i) => (i.selection || i.docChanged) && !pm(i));
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (n || r.updates.length + t.transactions.length > vU && Date.now() - r.time > kU) {
        for (let o of r.context.abortListeners)
          try {
            o();
          } catch (s) {
            Ti(this.view.state, s);
          }
        r.context.abortListeners = null, this.running.splice(i--, 1);
      } else
        r.updates.push(...t.transactions);
    }
    if (this.debounceUpdate > -1 && clearTimeout(this.debounceUpdate), this.debounceUpdate = e.active.some((i) => i.state == 1 && !this.running.some((r) => r.active.source == i.source)) ? setTimeout(() => this.startUpdate(), $y) : -1, this.composing != 0)
      for (let i of t.transactions)
        pm(i) == "input" ? this.composing = 2 : this.composing == 2 && i.selection && (this.composing = 3);
  }
  startUpdate() {
    this.debounceUpdate = -1;
    let { state: t } = this.view, e = t.field(Ii);
    for (let n of e.active)
      n.state == 1 && !this.running.some((i) => i.active.source == n.source) && this.startQuery(n);
  }
  startQuery(t) {
    let { state: e } = this.view, n = Io(e), i = new d5(e, n, t.explicitPos == n), r = new wU(t, i);
    this.running.push(r), Promise.resolve(t.source(i)).then((o) => {
      r.context.aborted || (r.done = o || null, this.scheduleAccept());
    }, (o) => {
      this.view.dispatch({ effects: ju.of(null) }), Ti(this.view.state, o);
    });
  }
  scheduleAccept() {
    this.running.every((t) => t.done !== void 0) ? this.accept() : this.debounceAccept < 0 && (this.debounceAccept = setTimeout(() => this.accept(), $y));
  }
  accept() {
    var t;
    this.debounceAccept > -1 && clearTimeout(this.debounceAccept), this.debounceAccept = -1;
    let e = [], n = this.view.state.facet(Fi);
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (r.done === void 0)
        continue;
      if (this.running.splice(i--, 1), r.done) {
        let s = new Sa(r.active.source, r.active.explicitPos, r.done, r.done.from, (t = r.done.to) !== null && t !== void 0 ? t : Io(r.updates.length ? r.updates[0].startState : this.view.state));
        for (let l of r.updates)
          s = s.update(l, n);
        if (s.hasResult()) {
          e.push(s);
          continue;
        }
      }
      let o = this.view.state.field(Ii).active.find((s) => s.source == r.active.source);
      if (o && o.state == 1)
        if (r.done == null) {
          let s = new mi(r.active.source, 0);
          for (let l of r.updates)
            s = s.update(l, n);
          s.state != 1 && e.push(s);
        } else
          this.startQuery(o);
    }
    e.length && this.view.dispatch({ effects: g5.of(e) });
  }
}, {
  eventHandlers: {
    blur() {
      let t = this.view.state.field(Ii, !1);
      t && t.tooltip && this.view.state.facet(Fi).closeOnBlur && this.view.dispatch({ effects: ju.of(null) });
    },
    compositionstart() {
      this.composing = 1;
    },
    compositionend() {
      this.composing == 3 && setTimeout(() => this.view.dispatch({ effects: qg.of(!1) }), 20), this.composing = 0;
    }
  }
}), SU = /* @__PURE__ */ Ge.baseTheme({
  ".cm-tooltip.cm-tooltip-autocomplete": {
    "& > ul": {
      fontFamily: "monospace",
      whiteSpace: "nowrap",
      overflow: "hidden auto",
      maxWidth_fallback: "700px",
      maxWidth: "min(700px, 95vw)",
      minWidth: "250px",
      maxHeight: "10em",
      height: "100%",
      listStyle: "none",
      margin: 0,
      padding: 0,
      "& > li": {
        overflowX: "hidden",
        textOverflow: "ellipsis",
        cursor: "pointer",
        padding: "1px 3px",
        lineHeight: 1.2
      }
    }
  },
  "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#17c",
    color: "white"
  },
  "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#777"
  },
  "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#347",
    color: "white"
  },
  "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#444"
  },
  ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
    content: '"···"',
    opacity: 0.5,
    display: "block",
    textAlign: "center"
  },
  ".cm-tooltip.cm-completionInfo": {
    position: "absolute",
    padding: "3px 9px",
    width: "max-content",
    maxWidth: `${400}px`,
    boxSizing: "border-box"
  },
  ".cm-completionInfo.cm-completionInfo-left": { right: "100%" },
  ".cm-completionInfo.cm-completionInfo-right": { left: "100%" },
  ".cm-completionInfo.cm-completionInfo-left-narrow": { right: `${30}px` },
  ".cm-completionInfo.cm-completionInfo-right-narrow": { left: `${30}px` },
  "&light .cm-snippetField": { backgroundColor: "#00000022" },
  "&dark .cm-snippetField": { backgroundColor: "#ffffff22" },
  ".cm-snippetFieldPosition": {
    verticalAlign: "text-top",
    width: 0,
    height: "1.15em",
    display: "inline-block",
    margin: "0 -0.7px -.7em",
    borderLeft: "1.4px dotted #888"
  },
  ".cm-completionMatchedText": {
    textDecoration: "underline"
  },
  ".cm-completionDetail": {
    marginLeft: "0.5em",
    fontStyle: "italic"
  },
  ".cm-completionIcon": {
    fontSize: "90%",
    width: ".8em",
    display: "inline-block",
    textAlign: "center",
    paddingRight: ".6em",
    opacity: "0.6",
    boxSizing: "content-box"
  },
  ".cm-completionIcon-function, .cm-completionIcon-method": {
    "&:after": { content: "'ƒ'" }
  },
  ".cm-completionIcon-class": {
    "&:after": { content: "'○'" }
  },
  ".cm-completionIcon-interface": {
    "&:after": { content: "'◌'" }
  },
  ".cm-completionIcon-variable": {
    "&:after": { content: "'𝑥'" }
  },
  ".cm-completionIcon-constant": {
    "&:after": { content: "'𝐶'" }
  },
  ".cm-completionIcon-type": {
    "&:after": { content: "'𝑡'" }
  },
  ".cm-completionIcon-enum": {
    "&:after": { content: "'∪'" }
  },
  ".cm-completionIcon-property": {
    "&:after": { content: "'□'" }
  },
  ".cm-completionIcon-keyword": {
    "&:after": { content: "'🔑︎'" }
  },
  ".cm-completionIcon-namespace": {
    "&:after": { content: "'▢'" }
  },
  ".cm-completionIcon-text": {
    "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" }
  }
}), $a = {
  brackets: ["(", "[", "{", "'", '"'],
  before: ")]}:;>",
  stringPrefixes: []
}, ds = /* @__PURE__ */ gt.define({
  map(t, e) {
    let n = e.mapPos(t, -1, li.TrackAfter);
    return n ?? void 0;
  }
}), Jg = /* @__PURE__ */ gt.define({
  map(t, e) {
    return e.mapPos(t);
  }
}), Kg = /* @__PURE__ */ new class extends Ts {
}();
Kg.startSide = 1;
Kg.endSide = -1;
const _5 = /* @__PURE__ */ xn.define({
  create() {
    return Bt.empty;
  },
  update(t, e) {
    if (e.selection) {
      let n = e.state.doc.lineAt(e.selection.main.head).from, i = e.startState.doc.lineAt(e.startState.selection.main.head).from;
      n != e.changes.mapPos(i, -1) && (t = Bt.empty);
    }
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(ds) ? t = t.update({ add: [Kg.range(n.value, n.value + 1)] }) : n.is(Jg) && (t = t.update({ filter: (i) => i != n.value }));
    return t;
  }
});
function MU() {
  return [OU, _5];
}
const zd = "()[]{}<>";
function y5(t) {
  for (let e = 0; e < zd.length; e += 2)
    if (zd.charCodeAt(e) == t)
      return zd.charAt(e + 1);
  return bg(t < 128 ? t : t + 1);
}
function w5(t, e) {
  return t.languageDataAt("closeBrackets", e)[0] || $a;
}
const AU = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent), OU = /* @__PURE__ */ Ge.inputHandler.of((t, e, n, i) => {
  if ((AU ? t.composing : t.compositionStarted) || t.state.readOnly)
    return !1;
  let r = t.state.selection.main;
  if (i.length > 2 || i.length == 2 && Mi(Xn(i, 0)) == 1 || e != r.from || n != r.to)
    return !1;
  let o = PU(t.state, i);
  return o ? (t.dispatch(o), !0) : !1;
}), TU = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let i = w5(t, t.selection.main.head).brackets || $a.brackets, r = null, o = t.changeByRange((s) => {
    if (s.empty) {
      let l = RU(t.doc, s.head);
      for (let a of i)
        if (a == l && zh(t.doc, s.head) == y5(Xn(a, 0)))
          return {
            changes: { from: s.head - a.length, to: s.head + a.length },
            range: we.cursor(s.head - a.length)
          };
    }
    return { range: r = s };
  });
  return r || e(t.update(o, { scrollIntoView: !0, userEvent: "delete.backward" })), !r;
}, EU = [
  { key: "Backspace", run: TU }
];
function PU(t, e) {
  let n = w5(t, t.selection.main.head), i = n.brackets || $a.brackets;
  for (let r of i) {
    let o = y5(Xn(r, 0));
    if (e == r)
      return o == r ? DU(t, r, i.indexOf(r + r + r) > -1, n) : IU(t, r, o, n.before || $a.before);
    if (e == o && v5(t, t.selection.main.from))
      return NU(t, r, o);
  }
  return null;
}
function v5(t, e) {
  let n = !1;
  return t.field(_5).between(0, t.doc.length, (i) => {
    i == e && (n = !0);
  }), n;
}
function zh(t, e) {
  let n = t.sliceString(e, e + 2);
  return n.slice(0, Mi(Xn(n, 0)));
}
function RU(t, e) {
  let n = t.sliceString(e - 2, e);
  return Mi(Xn(n, 0)) == n.length ? n : n.slice(1);
}
function IU(t, e, n, i) {
  let r = null, o = t.changeByRange((s) => {
    if (!s.empty)
      return {
        changes: [{ insert: e, from: s.from }, { insert: n, from: s.to }],
        effects: ds.of(s.to + e.length),
        range: we.range(s.anchor + e.length, s.head + e.length)
      };
    let l = zh(t.doc, s.head);
    return !l || /\s/.test(l) || i.indexOf(l) > -1 ? {
      changes: { insert: e + n, from: s.head },
      effects: ds.of(s.head + e.length),
      range: we.cursor(s.head + e.length)
    } : { range: r = s };
  });
  return r ? null : t.update(o, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function NU(t, e, n) {
  let i = null, r = t.selection.ranges.map((o) => o.empty && zh(t.doc, o.head) == n ? we.cursor(o.head + n.length) : i = o);
  return i ? null : t.update({
    selection: we.create(r, t.selection.mainIndex),
    scrollIntoView: !0,
    effects: t.selection.ranges.map(({ from: o }) => Jg.of(o))
  });
}
function DU(t, e, n, i) {
  let r = i.stringPrefixes || $a.stringPrefixes, o = null, s = t.changeByRange((l) => {
    if (!l.empty)
      return {
        changes: [{ insert: e, from: l.from }, { insert: e, from: l.to }],
        effects: ds.of(l.to + e.length),
        range: we.range(l.anchor + e.length, l.head + e.length)
      };
    let a = l.head, f = zh(t.doc, a), c;
    if (f == e) {
      if (ew(t, a))
        return {
          changes: { insert: e + e, from: a },
          effects: ds.of(a + e.length),
          range: we.cursor(a + e.length)
        };
      if (v5(t, a)) {
        let u = n && t.sliceDoc(a, a + e.length * 3) == e + e + e;
        return {
          range: we.cursor(a + e.length * (u ? 3 : 1)),
          effects: Jg.of(a)
        };
      }
    } else {
      if (n && t.sliceDoc(a - 2 * e.length, a) == e + e && (c = tw(t, a - 2 * e.length, r)) > -1 && ew(t, c))
        return {
          changes: { insert: e + e + e + e, from: a },
          effects: ds.of(a + e.length),
          range: we.cursor(a + e.length)
        };
      if (t.charCategorizer(a)(f) != cn.Word && tw(t, a, r) > -1 && !jU(t, a, e, r))
        return {
          changes: { insert: e + e, from: a },
          effects: ds.of(a + e.length),
          range: we.cursor(a + e.length)
        };
    }
    return { range: o = l };
  });
  return o ? null : t.update(s, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function ew(t, e) {
  let n = ni(t).resolveInner(e + 1);
  return n.parent && n.from == e;
}
function jU(t, e, n, i) {
  let r = ni(t).resolveInner(e, -1), o = i.reduce((s, l) => Math.max(s, l.length), 0);
  for (let s = 0; s < 5; s++) {
    let l = t.sliceDoc(r.from, Math.min(r.to, r.from + n.length + o)), a = l.indexOf(n);
    if (!a || a > -1 && i.indexOf(l.slice(0, a)) > -1) {
      let c = r.firstChild;
      for (; c && c.from == r.from && c.to - c.from > n.length + a; ) {
        if (t.sliceDoc(c.to - n.length, c.to) == n)
          return !1;
        c = c.firstChild;
      }
      return !0;
    }
    let f = r.to == e && r.parent;
    if (!f)
      break;
    r = f;
  }
  return !1;
}
function tw(t, e, n) {
  let i = t.charCategorizer(e);
  if (i(t.sliceDoc(e - 1, e)) != cn.Word)
    return e;
  for (let r of n) {
    let o = e - r.length;
    if (t.sliceDoc(o, e) == r && i(t.sliceDoc(o - 1, o)) != cn.Word)
      return o;
  }
  return -1;
}
function BU(t = {}) {
  return [
    Ii,
    Fi.of(t),
    CU,
    LU,
    SU
  ];
}
const k5 = [
  { key: "Ctrl-Space", run: _U },
  { key: "Escape", run: yU },
  { key: "ArrowDown", run: /* @__PURE__ */ sc(!0) },
  { key: "ArrowUp", run: /* @__PURE__ */ sc(!1) },
  { key: "PageDown", run: /* @__PURE__ */ sc(!0, "page") },
  { key: "PageUp", run: /* @__PURE__ */ sc(!1, "page") },
  { key: "Enter", run: bU }
], LU = /* @__PURE__ */ ql.highest(/* @__PURE__ */ Th.computeN([Fi], (t) => t.facet(Fi).defaultKeymap ? [k5] : []));
class xU {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.diagnostic = i;
  }
}
class cs {
  constructor(e, n, i) {
    this.diagnostics = e, this.panel = n, this.selected = i;
  }
  static init(e, n, i) {
    let r = e, o = i.facet(ps).markerFilter;
    o && (r = o(r));
    let s = rt.set(r.map((l) => l.from == l.to || l.from == l.to - 1 && i.doc.lineAt(l.from).to == l.from ? rt.widget({
      widget: new KU(l),
      diagnostic: l
    }).range(l.from) : rt.mark({
      attributes: { class: "cm-lintRange cm-lintRange-" + l.severity },
      diagnostic: l
    }).range(l.from, l.to)), !0);
    return new cs(s, n, Nl(s));
  }
}
function Nl(t, e = null, n = 0) {
  let i = null;
  return t.between(n, 1e9, (r, o, { spec: s }) => {
    if (!(e && s.diagnostic != e))
      return i = new xU(r, o, s.diagnostic), !1;
  }), i;
}
function C5(t, e) {
  return !!(t.effects.some((n) => n.is(Vh)) || t.changes.touchesRange(e.pos));
}
function S5(t, e) {
  return t.field(Oi, !1) ? e : e.concat(gt.appendConfig.of([
    Oi,
    Ge.decorations.compute([Oi], (n) => {
      let { selected: i, panel: r } = n.field(Oi);
      return !i || !r || i.from == i.to ? rt.none : rt.set([
        VU.range(i.from, i.to)
      ]);
    }),
    nF(FU, { hideOn: C5 }),
    GU
  ]));
}
function zU(t, e) {
  return {
    effects: S5(t, [Vh.of(e)])
  };
}
const Vh = /* @__PURE__ */ gt.define(), Gg = /* @__PURE__ */ gt.define(), M5 = /* @__PURE__ */ gt.define(), Oi = /* @__PURE__ */ xn.define({
  create() {
    return new cs(rt.none, null, null);
  },
  update(t, e) {
    if (e.docChanged) {
      let n = t.diagnostics.map(e.changes), i = null;
      if (t.selected) {
        let r = e.changes.mapPos(t.selected.from, 1);
        i = Nl(n, t.selected.diagnostic, r) || Nl(n, null, r);
      }
      t = new cs(n, t.panel, i);
    }
    for (let n of e.effects)
      n.is(Vh) ? t = cs.init(n.value, t.panel, e.state) : n.is(Gg) ? t = new cs(t.diagnostics, n.value ? Fh.open : null, t.selected) : n.is(M5) && (t = new cs(t.diagnostics, t.panel, n.value));
    return t;
  },
  provide: (t) => [
    Xa.from(t, (e) => e.panel),
    Ge.decorations.from(t, (e) => e.diagnostics)
  ]
}), VU = /* @__PURE__ */ rt.mark({ class: "cm-lintRange cm-lintRange-active" });
function FU(t, e, n) {
  let { diagnostics: i } = t.state.field(Oi), r = [], o = 2e8, s = 0;
  i.between(e - (n < 0 ? 1 : 0), e + (n > 0 ? 1 : 0), (a, f, { spec: c }) => {
    e >= a && e <= f && (a == f || (e > a || n > 0) && (e < f || n < 0)) && (r.push(c.diagnostic), o = Math.min(a, o), s = Math.max(f, s));
  });
  let l = t.state.facet(ps).tooltipFilter;
  return l && (r = l(r)), r.length ? {
    pos: o,
    end: s,
    above: t.state.doc.lineAt(o).to < s,
    create() {
      return { dom: A5(t, r) };
    }
  } : null;
}
function A5(t, e) {
  return Qt("ul", { class: "cm-tooltip-lint" }, e.map((n) => T5(t, n, !1)));
}
const HU = (t) => {
  let e = t.state.field(Oi, !1);
  (!e || !e.panel) && t.dispatch({ effects: S5(t.state, [Gg.of(!0)]) });
  let n = Ga(t, Fh.open);
  return n && n.dom.querySelector(".cm-panel-lint ul").focus(), !0;
}, nw = (t) => {
  let e = t.state.field(Oi, !1);
  return !e || !e.panel ? !1 : (t.dispatch({ effects: Gg.of(!1) }), !0);
}, WU = (t) => {
  let e = t.state.field(Oi, !1);
  if (!e)
    return !1;
  let n = t.state.selection.main, i = e.diagnostics.iter(n.to + 1);
  return !i.value && (i = e.diagnostics.iter(0), !i.value || i.from == n.from && i.to == n.to) ? !1 : (t.dispatch({ selection: { anchor: i.from, head: i.to }, scrollIntoView: !0 }), !0);
}, UU = [
  { key: "Mod-Shift-m", run: HU, preventDefault: !0 },
  { key: "F8", run: WU }
], qU = /* @__PURE__ */ Rn.fromClass(class {
  constructor(t) {
    this.view = t, this.timeout = -1, this.set = !0;
    let { delay: e } = t.state.facet(ps);
    this.lintTime = Date.now() + e, this.run = this.run.bind(this), this.timeout = setTimeout(this.run, e);
  }
  run() {
    let t = Date.now();
    if (t < this.lintTime - 10)
      setTimeout(this.run, this.lintTime - t);
    else {
      this.set = !1;
      let { state: e } = this.view, { sources: n } = e.facet(ps);
      Promise.all(n.map((i) => Promise.resolve(i(this.view)))).then((i) => {
        let r = i.reduce((o, s) => o.concat(s));
        this.view.state.doc == e.doc && this.view.dispatch(zU(this.view.state, r));
      }, (i) => {
        Ti(this.view.state, i);
      });
    }
  }
  update(t) {
    let e = t.state.facet(ps);
    (t.docChanged || e != t.startState.facet(ps)) && (this.lintTime = Date.now() + e.delay, this.set || (this.set = !0, this.timeout = setTimeout(this.run, e.delay)));
  }
  force() {
    this.set && (this.lintTime = Date.now(), this.run());
  }
  destroy() {
    clearTimeout(this.timeout);
  }
}), ps = /* @__PURE__ */ Xe.define({
  combine(t) {
    return Object.assign({ sources: t.map((e) => e.source) }, fr(t.map((e) => e.config), {
      delay: 750,
      markerFilter: null,
      tooltipFilter: null
    }));
  },
  enables: qU
});
function JU(t, e = {}) {
  return ps.of({ source: t, config: e });
}
function O5(t) {
  let e = [];
  if (t)
    e:
      for (let { name: n } of t) {
        for (let i = 0; i < n.length; i++) {
          let r = n[i];
          if (/[a-zA-Z]/.test(r) && !e.some((o) => o.toLowerCase() == r.toLowerCase())) {
            e.push(r);
            continue e;
          }
        }
        e.push("");
      }
  return e;
}
function T5(t, e, n) {
  var i;
  let r = n ? O5(e.actions) : [];
  return Qt("li", { class: "cm-diagnostic cm-diagnostic-" + e.severity }, Qt("span", { class: "cm-diagnosticText" }, e.renderMessage ? e.renderMessage() : e.message), (i = e.actions) === null || i === void 0 ? void 0 : i.map((o, s) => {
    let l = (u) => {
      u.preventDefault();
      let h = Nl(t.state.field(Oi).diagnostics, e);
      h && o.apply(t, h.from, h.to);
    }, { name: a } = o, f = r[s] ? a.indexOf(r[s]) : -1, c = f < 0 ? a : [
      a.slice(0, f),
      Qt("u", a.slice(f, f + 1)),
      a.slice(f + 1)
    ];
    return Qt("button", {
      type: "button",
      class: "cm-diagnosticAction",
      onclick: l,
      onmousedown: l,
      "aria-label": ` Action: ${a}${f < 0 ? "" : ` (access key "${r[s]})"`}.`
    }, c);
  }), e.source && Qt("div", { class: "cm-diagnosticSource" }, e.source));
}
class KU extends Yo {
  constructor(e) {
    super(), this.diagnostic = e;
  }
  eq(e) {
    return e.diagnostic == this.diagnostic;
  }
  toDOM() {
    return Qt("span", { class: "cm-lintPoint cm-lintPoint-" + this.diagnostic.severity });
  }
}
class iw {
  constructor(e, n) {
    this.diagnostic = n, this.id = "item_" + Math.floor(Math.random() * 4294967295).toString(16), this.dom = T5(e, n, !0), this.dom.id = this.id, this.dom.setAttribute("role", "option");
  }
}
class Fh {
  constructor(e) {
    this.view = e, this.items = [];
    let n = (r) => {
      if (r.keyCode == 27)
        nw(this.view), this.view.focus();
      else if (r.keyCode == 38 || r.keyCode == 33)
        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);
      else if (r.keyCode == 40 || r.keyCode == 34)
        this.moveSelection((this.selectedIndex + 1) % this.items.length);
      else if (r.keyCode == 36)
        this.moveSelection(0);
      else if (r.keyCode == 35)
        this.moveSelection(this.items.length - 1);
      else if (r.keyCode == 13)
        this.view.focus();
      else if (r.keyCode >= 65 && r.keyCode <= 90 && this.selectedIndex >= 0) {
        let { diagnostic: o } = this.items[this.selectedIndex], s = O5(o.actions);
        for (let l = 0; l < s.length; l++)
          if (s[l].toUpperCase().charCodeAt(0) == r.keyCode) {
            let a = Nl(this.view.state.field(Oi).diagnostics, o);
            a && o.actions[l].apply(e, a.from, a.to);
          }
      } else
        return;
      r.preventDefault();
    }, i = (r) => {
      for (let o = 0; o < this.items.length; o++)
        this.items[o].dom.contains(r.target) && this.moveSelection(o);
    };
    this.list = Qt("ul", {
      tabIndex: 0,
      role: "listbox",
      "aria-label": this.view.state.phrase("Diagnostics"),
      onkeydown: n,
      onclick: i
    }), this.dom = Qt("div", { class: "cm-panel-lint" }, this.list, Qt("button", {
      type: "button",
      name: "close",
      "aria-label": this.view.state.phrase("close"),
      onclick: () => nw(this.view)
    }, "×")), this.update();
  }
  get selectedIndex() {
    let e = this.view.state.field(Oi).selected;
    if (!e)
      return -1;
    for (let n = 0; n < this.items.length; n++)
      if (this.items[n].diagnostic == e.diagnostic)
        return n;
    return -1;
  }
  update() {
    let { diagnostics: e, selected: n } = this.view.state.field(Oi), i = 0, r = !1, o = null;
    for (e.between(0, this.view.state.doc.length, (s, l, { spec: a }) => {
      let f = -1, c;
      for (let u = i; u < this.items.length; u++)
        if (this.items[u].diagnostic == a.diagnostic) {
          f = u;
          break;
        }
      f < 0 ? (c = new iw(this.view, a.diagnostic), this.items.splice(i, 0, c), r = !0) : (c = this.items[f], f > i && (this.items.splice(i, f - i), r = !0)), n && c.diagnostic == n.diagnostic ? c.dom.hasAttribute("aria-selected") || (c.dom.setAttribute("aria-selected", "true"), o = c) : c.dom.hasAttribute("aria-selected") && c.dom.removeAttribute("aria-selected"), i++;
    }); i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0); )
      r = !0, this.items.pop();
    this.items.length == 0 && (this.items.push(new iw(this.view, {
      from: -1,
      to: -1,
      severity: "info",
      message: this.view.state.phrase("No diagnostics")
    })), r = !0), o ? (this.list.setAttribute("aria-activedescendant", o.id), this.view.requestMeasure({
      key: this,
      read: () => ({ sel: o.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),
      write: ({ sel: s, panel: l }) => {
        s.top < l.top ? this.list.scrollTop -= l.top - s.top : s.bottom > l.bottom && (this.list.scrollTop += s.bottom - l.bottom);
      }
    })) : this.selectedIndex < 0 && this.list.removeAttribute("aria-activedescendant"), r && this.sync();
  }
  sync() {
    let e = this.list.firstChild;
    function n() {
      let i = e;
      e = i.nextSibling, i.remove();
    }
    for (let i of this.items)
      if (i.dom.parentNode == this.list) {
        for (; e != i.dom; )
          n();
        e = i.dom.nextSibling;
      } else
        this.list.insertBefore(i.dom, e);
    for (; e; )
      n();
  }
  moveSelection(e) {
    if (this.selectedIndex < 0)
      return;
    let n = this.view.state.field(Oi), i = Nl(n.diagnostics, this.items[e].diagnostic);
    i && this.view.dispatch({
      selection: { anchor: i.from, head: i.to },
      scrollIntoView: !0,
      effects: M5.of(i)
    });
  }
  static open(e) {
    return new Fh(e);
  }
}
function Ec(t, e = 'viewBox="0 0 40 40"') {
  return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`;
}
function Vd(t) {
  return Ec(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`, 'width="6" height="3"');
}
const GU = /* @__PURE__ */ Ge.baseTheme({
  ".cm-diagnostic": {
    padding: "3px 6px 3px 8px",
    marginLeft: "-1px",
    display: "block",
    whiteSpace: "pre-wrap"
  },
  ".cm-diagnostic-error": { borderLeft: "5px solid #d11" },
  ".cm-diagnostic-warning": { borderLeft: "5px solid orange" },
  ".cm-diagnostic-info": { borderLeft: "5px solid #999" },
  ".cm-diagnosticAction": {
    font: "inherit",
    border: "none",
    padding: "2px 4px",
    backgroundColor: "#444",
    color: "white",
    borderRadius: "3px",
    marginLeft: "8px"
  },
  ".cm-diagnosticSource": {
    fontSize: "70%",
    opacity: 0.7
  },
  ".cm-lintRange": {
    backgroundPosition: "left bottom",
    backgroundRepeat: "repeat-x",
    paddingBottom: "0.7px"
  },
  ".cm-lintRange-error": { backgroundImage: /* @__PURE__ */ Vd("#d11") },
  ".cm-lintRange-warning": { backgroundImage: /* @__PURE__ */ Vd("orange") },
  ".cm-lintRange-info": { backgroundImage: /* @__PURE__ */ Vd("#999") },
  ".cm-lintRange-active": { backgroundColor: "#ffdd9980" },
  ".cm-tooltip-lint": {
    padding: 0,
    margin: 0
  },
  ".cm-lintPoint": {
    position: "relative",
    "&:after": {
      content: '""',
      position: "absolute",
      bottom: 0,
      left: "-2px",
      borderLeft: "3px solid transparent",
      borderRight: "3px solid transparent",
      borderBottom: "4px solid #d11"
    }
  },
  ".cm-lintPoint-warning": {
    "&:after": { borderBottomColor: "orange" }
  },
  ".cm-lintPoint-info": {
    "&:after": { borderBottomColor: "#999" }
  },
  ".cm-panel.cm-panel-lint": {
    position: "relative",
    "& ul": {
      maxHeight: "100px",
      overflowY: "auto",
      "& [aria-selected]": {
        backgroundColor: "#ddd",
        "& u": { textDecoration: "underline" }
      },
      "&:focus [aria-selected]": {
        background_fallback: "#bdf",
        backgroundColor: "Highlight",
        color_fallback: "white",
        color: "HighlightText"
      },
      "& u": { textDecoration: "none" },
      padding: 0,
      margin: 0
    },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "2px",
      background: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    }
  }
});
class XU extends Fr {
  constructor(e) {
    super(), this.diagnostics = e, this.severity = e.reduce((n, i) => {
      let r = i.severity;
      return r == "error" || r == "warning" && n == "info" ? r : n;
    }, "info");
  }
  toDOM(e) {
    let n = document.createElement("div");
    n.className = "cm-lint-marker cm-lint-marker-" + this.severity;
    let i = this.diagnostics, r = e.state.facet(Hh).tooltipFilter;
    return r && (i = r(i)), i.length && (n.onmouseover = () => YU(e, n, i)), n;
  }
}
function QU(t, e) {
  let n = (i) => {
    let r = e.getBoundingClientRect();
    if (!(i.clientX > r.left - 10 && i.clientX < r.right + 10 && i.clientY > r.top - 10 && i.clientY < r.bottom + 10)) {
      for (let o = i.target; o; o = o.parentNode)
        if (o.nodeType == 1 && o.classList.contains("cm-tooltip-lint"))
          return;
      window.removeEventListener("mousemove", n), t.state.field(P5) && t.dispatch({ effects: Xg.of(null) });
    }
  };
  window.addEventListener("mousemove", n);
}
function YU(t, e, n) {
  function i() {
    let s = t.elementAtHeight(e.getBoundingClientRect().top + 5 - t.documentTop);
    t.coordsAtPos(s.from) && t.dispatch({ effects: Xg.of({
      pos: s.from,
      above: !1,
      create() {
        return {
          dom: A5(t, n),
          getCoords: () => e.getBoundingClientRect()
        };
      }
    }) }), e.onmouseout = e.onmousemove = null, QU(t, e);
  }
  let { hoverTime: r } = t.state.facet(Hh), o = setTimeout(i, r);
  e.onmouseout = () => {
    clearTimeout(o), e.onmouseout = e.onmousemove = null;
  }, e.onmousemove = () => {
    clearTimeout(o), o = setTimeout(i, r);
  };
}
function ZU(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let r of e) {
    let o = t.lineAt(r.from);
    (n[o.from] || (n[o.from] = [])).push(r);
  }
  let i = [];
  for (let r in n)
    i.push(new XU(n[r]).range(+r));
  return Bt.of(i, !0);
}
const $U = /* @__PURE__ */ n4({
  class: "cm-gutter-lint",
  markers: (t) => t.state.field(E5)
}), E5 = /* @__PURE__ */ xn.define({
  create() {
    return Bt.empty;
  },
  update(t, e) {
    t = t.map(e.changes);
    let n = e.state.facet(Hh).markerFilter;
    for (let i of e.effects)
      if (i.is(Vh)) {
        let r = i.value;
        n && (r = n(r || [])), t = ZU(e.state.doc, r.slice(0));
      }
    return t;
  }
}), Xg = /* @__PURE__ */ gt.define(), P5 = /* @__PURE__ */ xn.define({
  create() {
    return null;
  },
  update(t, e) {
    return t && e.docChanged && (t = C5(e, t) ? null : Object.assign(Object.assign({}, t), { pos: e.changes.mapPos(t.pos) })), e.effects.reduce((n, i) => i.is(Xg) ? i.value : n, t);
  },
  provide: (t) => Eh.from(t)
}), eq = /* @__PURE__ */ Ge.baseTheme({
  ".cm-gutter-lint": {
    width: "1.4em",
    "& .cm-gutterElement": {
      padding: ".2em"
    }
  },
  ".cm-lint-marker": {
    width: "1em",
    height: "1em"
  },
  ".cm-lint-marker-info": {
    content: /* @__PURE__ */ Ec('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')
  },
  ".cm-lint-marker-warning": {
    content: /* @__PURE__ */ Ec('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')
  },
  ".cm-lint-marker-error": {
    content: /* @__PURE__ */ Ec('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')
  }
}), Hh = /* @__PURE__ */ Xe.define({
  combine(t) {
    return fr(t, {
      hoverTime: 300,
      markerFilter: null,
      tooltipFilter: null
    });
  }
});
function tq(t = {}) {
  return [Hh.of(t), E5, $U, eq, P5];
}
const nq = /* @__PURE__ */ (() => [
  uF(),
  pF(),
  DV(),
  OH(),
  eH(),
  CV(),
  TV(),
  St.allowMultipleSelections.of(!0),
  FF(),
  S4(rH, { fallback: !0 }),
  uH(),
  MU(),
  BU(),
  JV(),
  XV(),
  VV(),
  NW(),
  Th.of([
    ...EU,
    ...OW,
    ...$W,
    ...xH,
    ...YF,
    ...k5,
    ...UU
  ])
])();
class Bu {
  constructor(e, n, i, r, o, s, l, a, f, c = 0, u) {
    this.p = e, this.stack = n, this.state = i, this.reducePos = r, this.pos = o, this.score = s, this.buffer = l, this.bufferBase = a, this.curContext = f, this.lookAhead = c, this.parent = u;
  }
  toString() {
    return `[${this.stack.filter((e, n) => n % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
  }
  static start(e, n, i = 0) {
    let r = e.parser.context;
    return new Bu(e, [], n, i, i, 0, [], 0, r ? new rw(r, r.start) : null, 0, null);
  }
  get context() {
    return this.curContext ? this.curContext.context : null;
  }
  pushState(e, n) {
    this.stack.push(this.state, n, this.bufferBase + this.buffer.length), this.state = e;
  }
  reduce(e) {
    let n = e >> 19, i = e & 65535, { parser: r } = this.p, o = r.dynamicPrecedence(i);
    if (o && (this.score += o), n == 0) {
      this.pushState(r.getGoto(this.state, i, !0), this.reducePos), i < r.minRepeatTerm && this.storeNode(i, this.reducePos, this.reducePos, 4, !0), this.reduceContext(i, this.reducePos);
      return;
    }
    let s = this.stack.length - (n - 1) * 3 - (e & 262144 ? 6 : 0), l = this.stack[s - 2], a = this.stack[s - 1], f = this.bufferBase + this.buffer.length - a;
    if (i < r.minRepeatTerm || e & 131072) {
      let c = r.stateFlag(this.state, 1) ? this.pos : this.reducePos;
      this.storeNode(i, l, c, f + 4, !0);
    }
    if (e & 262144)
      this.state = this.stack[s];
    else {
      let c = this.stack[s - 3];
      this.state = r.getGoto(c, i, !0);
    }
    for (; this.stack.length > s; )
      this.stack.pop();
    this.reduceContext(i, l);
  }
  storeNode(e, n, i, r = 4, o = !1) {
    if (e == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
      let s = this, l = this.buffer.length;
      if (l == 0 && s.parent && (l = s.bufferBase - s.parent.bufferBase, s = s.parent), l > 0 && s.buffer[l - 4] == 0 && s.buffer[l - 1] > -1) {
        if (n == i)
          return;
        if (s.buffer[l - 2] >= n) {
          s.buffer[l - 2] = i;
          return;
        }
      }
    }
    if (!o || this.pos == i)
      this.buffer.push(e, n, i, r);
    else {
      let s = this.buffer.length;
      if (s > 0 && this.buffer[s - 4] != 0)
        for (; s > 0 && this.buffer[s - 2] > i; )
          this.buffer[s] = this.buffer[s - 4], this.buffer[s + 1] = this.buffer[s - 3], this.buffer[s + 2] = this.buffer[s - 2], this.buffer[s + 3] = this.buffer[s - 1], s -= 4, r > 4 && (r -= 4);
      this.buffer[s] = e, this.buffer[s + 1] = n, this.buffer[s + 2] = i, this.buffer[s + 3] = r;
    }
  }
  shift(e, n, i) {
    let r = this.pos;
    if (e & 131072)
      this.pushState(e & 65535, this.pos);
    else if (e & 262144)
      this.pos = i, this.shiftContext(n, r), n <= this.p.parser.maxNode && this.buffer.push(n, r, i, 4);
    else {
      let o = e, { parser: s } = this.p;
      (i > this.pos || n <= s.maxNode) && (this.pos = i, s.stateFlag(o, 1) || (this.reducePos = i)), this.pushState(o, r), this.shiftContext(n, r), n <= s.maxNode && this.buffer.push(n, r, i, 4);
    }
  }
  apply(e, n, i) {
    e & 65536 ? this.reduce(e) : this.shift(e, n, i);
  }
  useNode(e, n) {
    let i = this.p.reused.length - 1;
    (i < 0 || this.p.reused[i] != e) && (this.p.reused.push(e), i++);
    let r = this.pos;
    this.reducePos = this.pos = r + e.length, this.pushState(n, r), this.buffer.push(i, r, this.reducePos, -1), this.curContext && this.updateContext(this.curContext.tracker.reuse(this.curContext.context, e, this, this.p.stream.reset(this.pos - e.length)));
  }
  split() {
    let e = this, n = e.buffer.length;
    for (; n > 0 && e.buffer[n - 2] > e.reducePos; )
      n -= 4;
    let i = e.buffer.slice(n), r = e.bufferBase + n;
    for (; e && r == e.bufferBase; )
      e = e.parent;
    return new Bu(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, i, r, this.curContext, this.lookAhead, e);
  }
  recoverByDelete(e, n) {
    let i = e <= this.p.parser.maxNode;
    i && this.storeNode(e, this.pos, n, 4), this.storeNode(0, this.pos, n, i ? 8 : 4), this.pos = this.reducePos = n, this.score -= 190;
  }
  canShift(e) {
    for (let n = new iq(this); ; ) {
      let i = this.p.parser.stateSlot(n.state, 4) || this.p.parser.hasAction(n.state, e);
      if (i == 0)
        return !1;
      if (!(i & 65536))
        return !0;
      n.reduce(i);
    }
  }
  recoverByInsert(e) {
    if (this.stack.length >= 300)
      return [];
    let n = this.p.parser.nextStates(this.state);
    if (n.length > 4 << 1 || this.stack.length >= 120) {
      let r = [];
      for (let o = 0, s; o < n.length; o += 2)
        (s = n[o + 1]) != this.state && this.p.parser.hasAction(s, e) && r.push(n[o], s);
      if (this.stack.length < 120)
        for (let o = 0; r.length < 4 << 1 && o < n.length; o += 2) {
          let s = n[o + 1];
          r.some((l, a) => a & 1 && l == s) || r.push(n[o], s);
        }
      n = r;
    }
    let i = [];
    for (let r = 0; r < n.length && i.length < 4; r += 2) {
      let o = n[r + 1];
      if (o == this.state)
        continue;
      let s = this.split();
      s.pushState(o, this.pos), s.storeNode(0, s.pos, s.pos, 4, !0), s.shiftContext(n[r], this.pos), s.score -= 200, i.push(s);
    }
    return i;
  }
  forceReduce() {
    let e = this.p.parser.stateSlot(this.state, 5);
    if (!(e & 65536))
      return !1;
    let { parser: n } = this.p;
    if (!n.validAction(this.state, e)) {
      let i = e >> 19, r = e & 65535, o = this.stack.length - i * 3;
      if (o < 0 || n.getGoto(this.stack[o], r, !1) < 0)
        return !1;
      this.storeNode(0, this.reducePos, this.reducePos, 4, !0), this.score -= 100;
    }
    return this.reducePos = this.pos, this.reduce(e), !0;
  }
  forceAll() {
    for (; !this.p.parser.stateFlag(this.state, 2); )
      if (!this.forceReduce()) {
        this.storeNode(0, this.pos, this.pos, 4, !0);
        break;
      }
    return this;
  }
  get deadEnd() {
    if (this.stack.length != 3)
      return !1;
    let { parser: e } = this.p;
    return e.data[e.stateSlot(this.state, 1)] == 65535 && !e.stateSlot(this.state, 4);
  }
  restart() {
    this.state = this.stack[0], this.stack.length = 0;
  }
  sameState(e) {
    if (this.state != e.state || this.stack.length != e.stack.length)
      return !1;
    for (let n = 0; n < this.stack.length; n += 3)
      if (this.stack[n] != e.stack[n])
        return !1;
    return !0;
  }
  get parser() {
    return this.p.parser;
  }
  dialectEnabled(e) {
    return this.p.parser.dialect.flags[e];
  }
  shiftContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.shift(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  reduceContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.reduce(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  emitContext() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -3) && this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);
  }
  emitLookAhead() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -4) && this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);
  }
  updateContext(e) {
    if (e != this.curContext.context) {
      let n = new rw(this.curContext.tracker, e);
      n.hash != this.curContext.hash && this.emitContext(), this.curContext = n;
    }
  }
  setLookAhead(e) {
    e > this.lookAhead && (this.emitLookAhead(), this.lookAhead = e);
  }
  close() {
    this.curContext && this.curContext.tracker.strict && this.emitContext(), this.lookAhead > 0 && this.emitLookAhead();
  }
}
class rw {
  constructor(e, n) {
    this.tracker = e, this.context = n, this.hash = e.strict ? e.hash(n) : 0;
  }
}
var ow;
(function(t) {
  t[t.Insert = 200] = "Insert", t[t.Delete = 190] = "Delete", t[t.Reduce = 100] = "Reduce", t[t.MaxNext = 4] = "MaxNext", t[t.MaxInsertStackDepth = 300] = "MaxInsertStackDepth", t[t.DampenInsertStackDepth = 120] = "DampenInsertStackDepth";
})(ow || (ow = {}));
class iq {
  constructor(e) {
    this.start = e, this.state = e.state, this.stack = e.stack, this.base = this.stack.length;
  }
  reduce(e) {
    let n = e & 65535, i = e >> 19;
    i == 0 ? (this.stack == this.start.stack && (this.stack = this.stack.slice()), this.stack.push(this.state, 0, 0), this.base += 3) : this.base -= (i - 1) * 3;
    let r = this.start.p.parser.getGoto(this.stack[this.base - 3], n, !0);
    this.state = r;
  }
}
class Lu {
  constructor(e, n, i) {
    this.stack = e, this.pos = n, this.index = i, this.buffer = e.buffer, this.index == 0 && this.maybeNext();
  }
  static create(e, n = e.bufferBase + e.buffer.length) {
    return new Lu(e, n, n - e.bufferBase);
  }
  maybeNext() {
    let e = this.stack.parent;
    e != null && (this.index = this.stack.bufferBase - e.bufferBase, this.stack = e, this.buffer = e.buffer);
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  next() {
    this.index -= 4, this.pos -= 4, this.index == 0 && this.maybeNext();
  }
  fork() {
    return new Lu(this.stack, this.pos, this.index);
  }
}
class Pc {
  constructor() {
    this.start = -1, this.value = -1, this.end = -1, this.extended = -1, this.lookAhead = 0, this.mask = 0, this.context = 0;
  }
}
const sw = new Pc();
class rq {
  constructor(e, n) {
    this.input = e, this.ranges = n, this.chunk = "", this.chunkOff = 0, this.chunk2 = "", this.chunk2Pos = 0, this.next = -1, this.token = sw, this.rangeIndex = 0, this.pos = this.chunkPos = n[0].from, this.range = n[0], this.end = n[n.length - 1].to, this.readNext();
  }
  resolveOffset(e, n) {
    let i = this.range, r = this.rangeIndex, o = this.pos + e;
    for (; o < i.from; ) {
      if (!r)
        return null;
      let s = this.ranges[--r];
      o -= i.from - s.to, i = s;
    }
    for (; n < 0 ? o > i.to : o >= i.to; ) {
      if (r == this.ranges.length - 1)
        return null;
      let s = this.ranges[++r];
      o += s.from - i.to, i = s;
    }
    return o;
  }
  clipPos(e) {
    if (e >= this.range.from && e < this.range.to)
      return e;
    for (let n of this.ranges)
      if (n.to > e)
        return Math.max(e, n.from);
    return this.end;
  }
  peek(e) {
    let n = this.chunkOff + e, i, r;
    if (n >= 0 && n < this.chunk.length)
      i = this.pos + e, r = this.chunk.charCodeAt(n);
    else {
      let o = this.resolveOffset(e, 1);
      if (o == null)
        return -1;
      if (i = o, i >= this.chunk2Pos && i < this.chunk2Pos + this.chunk2.length)
        r = this.chunk2.charCodeAt(i - this.chunk2Pos);
      else {
        let s = this.rangeIndex, l = this.range;
        for (; l.to <= i; )
          l = this.ranges[++s];
        this.chunk2 = this.input.chunk(this.chunk2Pos = i), i + this.chunk2.length > l.to && (this.chunk2 = this.chunk2.slice(0, l.to - i)), r = this.chunk2.charCodeAt(0);
      }
    }
    return i >= this.token.lookAhead && (this.token.lookAhead = i + 1), r;
  }
  acceptToken(e, n = 0) {
    let i = n ? this.resolveOffset(n, -1) : this.pos;
    if (i == null || i < this.token.start)
      throw new RangeError("Token end out of bounds");
    this.token.value = e, this.token.end = i;
  }
  getChunk() {
    if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
      let { chunk: e, chunkPos: n } = this;
      this.chunk = this.chunk2, this.chunkPos = this.chunk2Pos, this.chunk2 = e, this.chunk2Pos = n, this.chunkOff = this.pos - this.chunkPos;
    } else {
      this.chunk2 = this.chunk, this.chunk2Pos = this.chunkPos;
      let e = this.input.chunk(this.pos), n = this.pos + e.length;
      this.chunk = n > this.range.to ? e.slice(0, this.range.to - this.pos) : e, this.chunkPos = this.pos, this.chunkOff = 0;
    }
  }
  readNext() {
    return this.chunkOff >= this.chunk.length && (this.getChunk(), this.chunkOff == this.chunk.length) ? this.next = -1 : this.next = this.chunk.charCodeAt(this.chunkOff);
  }
  advance(e = 1) {
    for (this.chunkOff += e; this.pos + e >= this.range.to; ) {
      if (this.rangeIndex == this.ranges.length - 1)
        return this.setDone();
      e -= this.range.to - this.pos, this.range = this.ranges[++this.rangeIndex], this.pos = this.range.from;
    }
    return this.pos += e, this.pos >= this.token.lookAhead && (this.token.lookAhead = this.pos + 1), this.readNext();
  }
  setDone() {
    return this.pos = this.chunkPos = this.end, this.range = this.ranges[this.rangeIndex = this.ranges.length - 1], this.chunk = "", this.next = -1;
  }
  reset(e, n) {
    if (n ? (this.token = n, n.start = e, n.lookAhead = e + 1, n.value = n.extended = -1) : this.token = sw, this.pos != e) {
      if (this.pos = e, e == this.end)
        return this.setDone(), this;
      for (; e < this.range.from; )
        this.range = this.ranges[--this.rangeIndex];
      for (; e >= this.range.to; )
        this.range = this.ranges[++this.rangeIndex];
      e >= this.chunkPos && e < this.chunkPos + this.chunk.length ? this.chunkOff = e - this.chunkPos : (this.chunk = "", this.chunkOff = 0), this.readNext();
    }
    return this;
  }
  read(e, n) {
    if (e >= this.chunkPos && n <= this.chunkPos + this.chunk.length)
      return this.chunk.slice(e - this.chunkPos, n - this.chunkPos);
    if (e >= this.chunk2Pos && n <= this.chunk2Pos + this.chunk2.length)
      return this.chunk2.slice(e - this.chunk2Pos, n - this.chunk2Pos);
    if (e >= this.range.from && n <= this.range.to)
      return this.input.read(e, n);
    let i = "";
    for (let r of this.ranges) {
      if (r.from >= n)
        break;
      r.to > e && (i += this.input.read(Math.max(r.from, e), Math.min(r.to, n)));
    }
    return i;
  }
}
class Rc {
  constructor(e, n) {
    this.data = e, this.id = n;
  }
  token(e, n) {
    oq(this.data, e, n, this.id);
  }
}
Rc.prototype.contextual = Rc.prototype.fallback = Rc.prototype.extend = !1;
function oq(t, e, n, i) {
  let r = 0, o = 1 << i, { parser: s } = n.p, { dialect: l } = s;
  e:
    for (; o & t[r]; ) {
      let a = t[r + 1];
      for (let h = r + 3; h < a; h += 2)
        if ((t[h + 1] & o) > 0) {
          let d = t[h];
          if (l.allows(d) && (e.token.value == -1 || e.token.value == d || s.overrides(d, e.token.value))) {
            e.acceptToken(d);
            break;
          }
        }
      let f = e.next, c = 0, u = t[r + 2];
      if (e.next < 0 && u > c && t[a + u * 3 - 3] == 65535 && t[a + u * 3 - 3] == 65535) {
        r = t[a + u * 3 - 1];
        continue e;
      }
      for (; c < u; ) {
        let h = c + u >> 1, d = a + h + (h << 1), p = t[d], g = t[d + 1] || 65536;
        if (f < p)
          u = h;
        else if (f >= g)
          c = h + 1;
        else {
          r = t[d + 2], e.advance();
          continue e;
        }
      }
      break;
    }
}
function lc(t, e = Uint16Array) {
  if (typeof t != "string")
    return t;
  let n = null;
  for (let i = 0, r = 0; i < t.length; ) {
    let o = 0;
    for (; ; ) {
      let s = t.charCodeAt(i++), l = !1;
      if (s == 126) {
        o = 65535;
        break;
      }
      s >= 92 && s--, s >= 34 && s--;
      let a = s - 32;
      if (a >= 46 && (a -= 46, l = !0), o += a, l)
        break;
      o *= 46;
    }
    n ? n[r++] = o : n = new e(o);
  }
  return n;
}
const Ki = typeof process < "u" && process.env && /\bparse\b/.test(process.env.LOG);
let Fd = null;
var lw;
(function(t) {
  t[t.Margin = 25] = "Margin";
})(lw || (lw = {}));
function aw(t, e, n) {
  let i = t.cursor(Yn.IncludeAnonymous);
  for (i.moveTo(e); ; )
    if (!(n < 0 ? i.childBefore(e) : i.childAfter(e)))
      for (; ; ) {
        if ((n < 0 ? i.to < e : i.from > e) && !i.type.isError)
          return n < 0 ? Math.max(0, Math.min(i.to - 1, e - 25)) : Math.min(t.length, Math.max(i.from + 1, e + 25));
        if (n < 0 ? i.prevSibling() : i.nextSibling())
          break;
        if (!i.parent())
          return n < 0 ? 0 : t.length;
      }
}
class sq {
  constructor(e, n) {
    this.fragments = e, this.nodeSet = n, this.i = 0, this.fragment = null, this.safeFrom = -1, this.safeTo = -1, this.trees = [], this.start = [], this.index = [], this.nextFragment();
  }
  nextFragment() {
    let e = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
    if (e) {
      for (this.safeFrom = e.openStart ? aw(e.tree, e.from + e.offset, 1) - e.offset : e.from, this.safeTo = e.openEnd ? aw(e.tree, e.to + e.offset, -1) - e.offset : e.to; this.trees.length; )
        this.trees.pop(), this.start.pop(), this.index.pop();
      this.trees.push(e.tree), this.start.push(-e.offset), this.index.push(0), this.nextStart = this.safeFrom;
    } else
      this.nextStart = 1e9;
  }
  nodeAt(e) {
    if (e < this.nextStart)
      return null;
    for (; this.fragment && this.safeTo <= e; )
      this.nextFragment();
    if (!this.fragment)
      return null;
    for (; ; ) {
      let n = this.trees.length - 1;
      if (n < 0)
        return this.nextFragment(), null;
      let i = this.trees[n], r = this.index[n];
      if (r == i.children.length) {
        this.trees.pop(), this.start.pop(), this.index.pop();
        continue;
      }
      let o = i.children[r], s = this.start[n] + i.positions[r];
      if (s > e)
        return this.nextStart = s, null;
      if (o instanceof Pn) {
        if (s == e) {
          if (s < this.safeFrom)
            return null;
          let l = s + o.length;
          if (l <= this.safeTo) {
            let a = o.prop(At.lookAhead);
            if (!a || l + a < this.fragment.to)
              return o;
          }
        }
        this.index[n]++, s + o.length >= Math.max(this.safeFrom, e) && (this.trees.push(o), this.start.push(s), this.index.push(0));
      } else
        this.index[n]++, this.nextStart = s + o.length;
    }
  }
}
class lq {
  constructor(e, n) {
    this.stream = n, this.tokens = [], this.mainToken = null, this.actions = [], this.tokens = e.tokenizers.map((i) => new Pc());
  }
  getActions(e) {
    let n = 0, i = null, { parser: r } = e.p, { tokenizers: o } = r, s = r.stateSlot(e.state, 3), l = e.curContext ? e.curContext.hash : 0, a = 0;
    for (let f = 0; f < o.length; f++) {
      if (!(1 << f & s))
        continue;
      let c = o[f], u = this.tokens[f];
      if (!(i && !c.fallback) && ((c.contextual || u.start != e.pos || u.mask != s || u.context != l) && (this.updateCachedToken(u, c, e), u.mask = s, u.context = l), u.lookAhead > u.end + 25 && (a = Math.max(u.lookAhead, a)), u.value != 0)) {
        let h = n;
        if (u.extended > -1 && (n = this.addActions(e, u.extended, u.end, n)), n = this.addActions(e, u.value, u.end, n), !c.extend && (i = u, n > h))
          break;
      }
    }
    for (; this.actions.length > n; )
      this.actions.pop();
    return a && e.setLookAhead(a), !i && e.pos == this.stream.end && (i = new Pc(), i.value = e.p.parser.eofTerm, i.start = i.end = e.pos, n = this.addActions(e, i.value, i.end, n)), this.mainToken = i, this.actions;
  }
  getMainToken(e) {
    if (this.mainToken)
      return this.mainToken;
    let n = new Pc(), { pos: i, p: r } = e;
    return n.start = i, n.end = Math.min(i + 1, r.stream.end), n.value = i == r.stream.end ? r.parser.eofTerm : 0, n;
  }
  updateCachedToken(e, n, i) {
    let r = this.stream.clipPos(i.pos);
    if (n.token(this.stream.reset(r, e), i), e.value > -1) {
      let { parser: o } = i.p;
      for (let s = 0; s < o.specialized.length; s++)
        if (o.specialized[s] == e.value) {
          let l = o.specializers[s](this.stream.read(e.start, e.end), i);
          if (l >= 0 && i.p.parser.dialect.allows(l >> 1)) {
            l & 1 ? e.extended = l >> 1 : e.value = l >> 1;
            break;
          }
        }
    } else
      e.value = 0, e.end = this.stream.clipPos(r + 1);
  }
  putAction(e, n, i, r) {
    for (let o = 0; o < r; o += 3)
      if (this.actions[o] == e)
        return r;
    return this.actions[r++] = e, this.actions[r++] = n, this.actions[r++] = i, r;
  }
  addActions(e, n, i, r) {
    let { state: o } = e, { parser: s } = e.p, { data: l } = s;
    for (let a = 0; a < 2; a++)
      for (let f = s.stateSlot(o, a ? 2 : 1); ; f += 3) {
        if (l[f] == 65535)
          if (l[f + 1] == 1)
            f = Xr(l, f + 2);
          else {
            r == 0 && l[f + 1] == 2 && (r = this.putAction(Xr(l, f + 2), n, i, r));
            break;
          }
        l[f] == n && (r = this.putAction(Xr(l, f + 1), n, i, r));
      }
    return r;
  }
}
var fw;
(function(t) {
  t[t.Distance = 5] = "Distance", t[t.MaxRemainingPerStep = 3] = "MaxRemainingPerStep", t[t.MinBufferLengthPrune = 500] = "MinBufferLengthPrune", t[t.ForceReduceLimit = 10] = "ForceReduceLimit", t[t.CutDepth = 15e3] = "CutDepth", t[t.CutTo = 9e3] = "CutTo";
})(fw || (fw = {}));
class aq {
  constructor(e, n, i, r) {
    this.parser = e, this.input = n, this.ranges = r, this.recovering = 0, this.nextStackID = 9812, this.minStackPos = 0, this.reused = [], this.stoppedAt = null, this.stream = new rq(n, r), this.tokens = new lq(e, this.stream), this.topTerm = e.top[1];
    let { from: o } = r[0];
    this.stacks = [Bu.start(this, e.top[0], o)], this.fragments = i.length && this.stream.end - o > e.bufferLength * 4 ? new sq(i, e.nodeSet) : null;
  }
  get parsedPos() {
    return this.minStackPos;
  }
  advance() {
    let e = this.stacks, n = this.minStackPos, i = this.stacks = [], r, o;
    for (let s = 0; s < e.length; s++) {
      let l = e[s];
      for (; ; ) {
        if (this.tokens.mainToken = null, l.pos > n)
          i.push(l);
        else {
          if (this.advanceStack(l, i, e))
            continue;
          {
            r || (r = [], o = []), r.push(l);
            let a = this.tokens.getMainToken(l);
            o.push(a.value, a.end);
          }
        }
        break;
      }
    }
    if (!i.length) {
      let s = r && cq(r);
      if (s)
        return this.stackToTree(s);
      if (this.parser.strict)
        throw Ki && r && console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none")), new SyntaxError("No parse at " + n);
      this.recovering || (this.recovering = 5);
    }
    if (this.recovering && r) {
      let s = this.stoppedAt != null && r[0].pos > this.stoppedAt ? r[0] : this.runRecovery(r, o, i);
      if (s)
        return this.stackToTree(s.forceAll());
    }
    if (this.recovering) {
      let s = this.recovering == 1 ? 1 : this.recovering * 3;
      if (i.length > s)
        for (i.sort((l, a) => a.score - l.score); i.length > s; )
          i.pop();
      i.some((l) => l.reducePos > n) && this.recovering--;
    } else if (i.length > 1) {
      e:
        for (let s = 0; s < i.length - 1; s++) {
          let l = i[s];
          for (let a = s + 1; a < i.length; a++) {
            let f = i[a];
            if (l.sameState(f) || l.buffer.length > 500 && f.buffer.length > 500)
              if ((l.score - f.score || l.buffer.length - f.buffer.length) > 0)
                i.splice(a--, 1);
              else {
                i.splice(s--, 1);
                continue e;
              }
          }
        }
    }
    this.minStackPos = i[0].pos;
    for (let s = 1; s < i.length; s++)
      i[s].pos < this.minStackPos && (this.minStackPos = i[s].pos);
    return null;
  }
  stopAt(e) {
    if (this.stoppedAt != null && this.stoppedAt < e)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = e;
  }
  advanceStack(e, n, i) {
    let r = e.pos, { parser: o } = this, s = Ki ? this.stackID(e) + " -> " : "";
    if (this.stoppedAt != null && r > this.stoppedAt)
      return e.forceReduce() ? e : null;
    if (this.fragments) {
      let f = e.curContext && e.curContext.tracker.strict, c = f ? e.curContext.hash : 0;
      for (let u = this.fragments.nodeAt(r); u; ) {
        let h = this.parser.nodeSet.types[u.type.id] == u.type ? o.getGoto(e.state, u.type.id) : -1;
        if (h > -1 && u.length && (!f || (u.prop(At.contextHash) || 0) == c))
          return e.useNode(u, h), Ki && console.log(s + this.stackID(e) + ` (via reuse of ${o.getName(u.type.id)})`), !0;
        if (!(u instanceof Pn) || u.children.length == 0 || u.positions[0] > 0)
          break;
        let d = u.children[0];
        if (d instanceof Pn && u.positions[0] == 0)
          u = d;
        else
          break;
      }
    }
    let l = o.stateSlot(e.state, 4);
    if (l > 0)
      return e.reduce(l), Ki && console.log(s + this.stackID(e) + ` (via always-reduce ${o.getName(l & 65535)})`), !0;
    if (e.stack.length >= 15e3)
      for (; e.stack.length > 9e3 && e.forceReduce(); )
        ;
    let a = this.tokens.getActions(e);
    for (let f = 0; f < a.length; ) {
      let c = a[f++], u = a[f++], h = a[f++], d = f == a.length || !i, p = d ? e : e.split();
      if (p.apply(c, u, h), Ki && console.log(s + this.stackID(p) + ` (via ${c & 65536 ? `reduce of ${o.getName(c & 65535)}` : "shift"} for ${o.getName(u)} @ ${r}${p == e ? "" : ", split"})`), d)
        return !0;
      p.pos > r ? n.push(p) : i.push(p);
    }
    return !1;
  }
  advanceFully(e, n) {
    let i = e.pos;
    for (; ; ) {
      if (!this.advanceStack(e, null, null))
        return !1;
      if (e.pos > i)
        return cw(e, n), !0;
    }
  }
  runRecovery(e, n, i) {
    let r = null, o = !1;
    for (let s = 0; s < e.length; s++) {
      let l = e[s], a = n[s << 1], f = n[(s << 1) + 1], c = Ki ? this.stackID(l) + " -> " : "";
      if (l.deadEnd && (o || (o = !0, l.restart(), Ki && console.log(c + this.stackID(l) + " (restarted)"), this.advanceFully(l, i))))
        continue;
      let u = l.split(), h = c;
      for (let d = 0; u.forceReduce() && d < 10 && (Ki && console.log(h + this.stackID(u) + " (via force-reduce)"), !this.advanceFully(u, i)); d++)
        Ki && (h = this.stackID(u) + " -> ");
      for (let d of l.recoverByInsert(a))
        Ki && console.log(c + this.stackID(d) + " (via recover-insert)"), this.advanceFully(d, i);
      this.stream.end > l.pos ? (f == l.pos && (f++, a = 0), l.recoverByDelete(a, f), Ki && console.log(c + this.stackID(l) + ` (via recover-delete ${this.parser.getName(a)})`), cw(l, i)) : (!r || r.score < l.score) && (r = l);
    }
    return r;
  }
  stackToTree(e) {
    return e.close(), Pn.build({
      buffer: Lu.create(e),
      nodeSet: this.parser.nodeSet,
      topID: this.topTerm,
      maxBufferLength: this.parser.bufferLength,
      reused: this.reused,
      start: this.ranges[0].from,
      length: e.pos - this.ranges[0].from,
      minRepeatType: this.parser.minRepeatTerm
    });
  }
  stackID(e) {
    let n = (Fd || (Fd = /* @__PURE__ */ new WeakMap())).get(e);
    return n || Fd.set(e, n = String.fromCodePoint(this.nextStackID++)), n + e;
  }
}
function cw(t, e) {
  for (let n = 0; n < e.length; n++) {
    let i = e[n];
    if (i.pos == t.pos && i.sameState(t)) {
      e[n].score < t.score && (e[n] = t);
      return;
    }
  }
  e.push(t);
}
class fq {
  constructor(e, n, i) {
    this.source = e, this.flags = n, this.disabled = i;
  }
  allows(e) {
    return !this.disabled || this.disabled[e] == 0;
  }
}
class xu extends f4 {
  constructor(e) {
    if (super(), this.wrappers = [], e.version != 14)
      throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);
    let n = e.nodeNames.split(" ");
    this.minRepeatTerm = n.length;
    for (let l = 0; l < e.repeatNodeCount; l++)
      n.push("");
    let i = Object.keys(e.topRules).map((l) => e.topRules[l][1]), r = [];
    for (let l = 0; l < n.length; l++)
      r.push([]);
    function o(l, a, f) {
      r[l].push([a, a.deserialize(String(f))]);
    }
    if (e.nodeProps)
      for (let l of e.nodeProps) {
        let a = l[0];
        typeof a == "string" && (a = At[a]);
        for (let f = 1; f < l.length; ) {
          let c = l[f++];
          if (c >= 0)
            o(c, a, l[f++]);
          else {
            let u = l[f + -c];
            for (let h = -c; h > 0; h--)
              o(l[f++], a, u);
            f++;
          }
        }
      }
    this.nodeSet = new Tg(n.map((l, a) => wi.define({
      name: a >= this.minRepeatTerm ? void 0 : l,
      id: a,
      props: r[a],
      top: i.indexOf(a) > -1,
      error: a == 0,
      skipped: e.skippedNodes && e.skippedNodes.indexOf(a) > -1
    }))), e.propSources && (this.nodeSet = this.nodeSet.extend(...e.propSources)), this.strict = !1, this.bufferLength = s4;
    let s = lc(e.tokenData);
    this.context = e.context, this.specializerSpecs = e.specialized || [], this.specialized = new Uint16Array(this.specializerSpecs.length);
    for (let l = 0; l < this.specializerSpecs.length; l++)
      this.specialized[l] = this.specializerSpecs[l].term;
    this.specializers = this.specializerSpecs.map(hw), this.states = lc(e.states, Uint32Array), this.data = lc(e.stateData), this.goto = lc(e.goto), this.maxTerm = e.maxTerm, this.tokenizers = e.tokenizers.map((l) => typeof l == "number" ? new Rc(s, l) : l), this.topRules = e.topRules, this.dialects = e.dialects || {}, this.dynamicPrecedences = e.dynamicPrecedences || null, this.tokenPrecTable = e.tokenPrec, this.termNames = e.termNames || null, this.maxNode = this.nodeSet.types.length - 1, this.dialect = this.parseDialect(), this.top = this.topRules[Object.keys(this.topRules)[0]];
  }
  createParse(e, n, i) {
    let r = new aq(this, e, n, i);
    for (let o of this.wrappers)
      r = o(r, e, n, i);
    return r;
  }
  getGoto(e, n, i = !1) {
    let r = this.goto;
    if (n >= r[0])
      return -1;
    for (let o = r[n + 1]; ; ) {
      let s = r[o++], l = s & 1, a = r[o++];
      if (l && i)
        return a;
      for (let f = o + (s >> 1); o < f; o++)
        if (r[o] == e)
          return a;
      if (l)
        return -1;
    }
  }
  hasAction(e, n) {
    let i = this.data;
    for (let r = 0; r < 2; r++)
      for (let o = this.stateSlot(e, r ? 2 : 1), s; ; o += 3) {
        if ((s = i[o]) == 65535)
          if (i[o + 1] == 1)
            s = i[o = Xr(i, o + 2)];
          else {
            if (i[o + 1] == 2)
              return Xr(i, o + 2);
            break;
          }
        if (s == n || s == 0)
          return Xr(i, o + 1);
      }
    return 0;
  }
  stateSlot(e, n) {
    return this.states[e * 6 + n];
  }
  stateFlag(e, n) {
    return (this.stateSlot(e, 0) & n) > 0;
  }
  validAction(e, n) {
    if (n == this.stateSlot(e, 4))
      return !0;
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = Xr(this.data, i + 2);
        else
          return !1;
      if (n == Xr(this.data, i + 1))
        return !0;
    }
  }
  nextStates(e) {
    let n = [];
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = Xr(this.data, i + 2);
        else
          break;
      if (!(this.data[i + 2] & 1)) {
        let r = this.data[i + 1];
        n.some((o, s) => s & 1 && o == r) || n.push(this.data[i], r);
      }
    }
    return n;
  }
  overrides(e, n) {
    let i = uw(this.data, this.tokenPrecTable, n);
    return i < 0 || uw(this.data, this.tokenPrecTable, e) < i;
  }
  configure(e) {
    let n = Object.assign(Object.create(xu.prototype), this);
    if (e.props && (n.nodeSet = this.nodeSet.extend(...e.props)), e.top) {
      let i = this.topRules[e.top];
      if (!i)
        throw new RangeError(`Invalid top rule name ${e.top}`);
      n.top = i;
    }
    return e.tokenizers && (n.tokenizers = this.tokenizers.map((i) => {
      let r = e.tokenizers.find((o) => o.from == i);
      return r ? r.to : i;
    })), e.specializers && (n.specializers = this.specializers.slice(), n.specializerSpecs = this.specializerSpecs.map((i, r) => {
      let o = e.specializers.find((l) => l.from == i.external);
      if (!o)
        return i;
      let s = Object.assign(Object.assign({}, i), { external: o.to });
      return n.specializers[r] = hw(s), s;
    })), e.contextTracker && (n.context = e.contextTracker), e.dialect && (n.dialect = this.parseDialect(e.dialect)), e.strict != null && (n.strict = e.strict), e.wrap && (n.wrappers = n.wrappers.concat(e.wrap)), e.bufferLength != null && (n.bufferLength = e.bufferLength), n;
  }
  hasWrappers() {
    return this.wrappers.length > 0;
  }
  getName(e) {
    return this.termNames ? this.termNames[e] : String(e <= this.maxNode && this.nodeSet.types[e].name || e);
  }
  get eofTerm() {
    return this.maxNode + 1;
  }
  get topNode() {
    return this.nodeSet.types[this.top[1]];
  }
  dynamicPrecedence(e) {
    let n = this.dynamicPrecedences;
    return n == null ? 0 : n[e] || 0;
  }
  parseDialect(e) {
    let n = Object.keys(this.dialects), i = n.map(() => !1);
    if (e)
      for (let o of e.split(" ")) {
        let s = n.indexOf(o);
        s >= 0 && (i[s] = !0);
      }
    let r = null;
    for (let o = 0; o < n.length; o++)
      if (!i[o])
        for (let s = this.dialects[n[o]], l; (l = this.data[s++]) != 65535; )
          (r || (r = new Uint8Array(this.maxTerm + 1)))[l] = 1;
    return new fq(e, i, r);
  }
  static deserialize(e) {
    return new xu(e);
  }
}
function Xr(t, e) {
  return t[e] | t[e + 1] << 16;
}
function uw(t, e, n) {
  for (let i = e, r; (r = t[i]) != 65535; i++)
    if (r == n)
      return i - e;
  return -1;
}
function cq(t) {
  let e = null;
  for (let n of t) {
    let i = n.p.stoppedAt;
    (n.pos == n.p.stream.end || i != null && n.pos > i) && n.p.parser.stateFlag(n.state, 2) && (!e || e.score < n.score) && (e = n);
  }
  return e;
}
function hw(t) {
  if (t.external) {
    let e = t.extend ? 1 : 0;
    return (n, i) => t.external(n, i) << 1 | e;
  }
  return t.get;
}
const uq = c4({
  String: Oe.string,
  Number: Oe.number,
  "True False": Oe.bool,
  PropertyName: Oe.propertyName,
  Null: Oe.null,
  ",": Oe.separator,
  "[ ]": Oe.squareBracket,
  "{ }": Oe.brace
}), hq = xu.deserialize({
  version: 14,
  states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",
  stateData: "#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",
  goto: "!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
  nodeNames: "⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",
  maxTerm: 25,
  nodeProps: [
    ["openedBy", 7, "{", 12, "["],
    ["closedBy", 8, "}", 13, "]"]
  ],
  propSources: [uq],
  skippedNodes: [0],
  repeatNodeCount: 2,
  tokenData: "(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",
  tokenizers: [0],
  topRules: { JsonText: [0, 1] },
  tokenPrec: 0
}), dq = /* @__PURE__ */ vu.define({
  name: "json",
  parser: /* @__PURE__ */ hq.configure({
    props: [
      /* @__PURE__ */ p4.add({
        Object: /* @__PURE__ */ Ry({ except: /^\s*\}/ }),
        Array: /* @__PURE__ */ Ry({ except: /^\s*\]/ })
      }),
      /* @__PURE__ */ g4.add({
        "Object Array": WF
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["[", "{", '"'] },
    indentOnInput: /^\s*[\}\]]$/
  }
});
function pq() {
  return new RF(dq);
}
function dw(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), n = le("Line: "), i = le(t[0]), m(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, o) {
      B(r, e, o), w(e, n), w(e, i);
    },
    p(r, o) {
      o & 1 && Pe(i, r[0]);
    },
    d(r) {
      r && j(e);
    }
  };
}
function pw(t) {
  let e, n, i;
  return {
    c() {
      e = O("div"), n = le("Column: "), i = le(t[1]), m(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, o) {
      B(r, e, o), w(e, n), w(e, i);
    },
    p(r, o) {
      o & 2 && Pe(i, r[1]);
    },
    d(r) {
      r && j(e);
    }
  };
}
function mw(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("div"), n = le("Selection: "), i = le(t[2]), r = le(" characters"), m(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(o, s) {
      B(o, e, s), w(e, n), w(e, i), w(e, r);
    },
    p(o, s) {
      s & 4 && Pe(i, o[2]);
    },
    d(o) {
      o && j(e);
    }
  };
}
function mq(t) {
  let e, n, i, r = t[0] !== void 0 && dw(t), o = t[1] !== void 0 && pw(t), s = t[2] !== void 0 && t[2] > 0 && mw(t);
  return {
    c() {
      e = O("div"), r && r.c(), n = q(), o && o.c(), i = q(), s && s.c(), m(e, "class", "jse-status-bar svelte-1oo7hnc");
    },
    m(l, a) {
      B(l, e, a), r && r.m(e, null), w(e, n), o && o.m(e, null), w(e, i), s && s.m(e, null);
    },
    p(l, [a]) {
      l[0] !== void 0 ? r ? r.p(l, a) : (r = dw(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), l[1] !== void 0 ? o ? o.p(l, a) : (o = pw(l), o.c(), o.m(e, i)) : o && (o.d(1), o = null), l[2] !== void 0 && l[2] > 0 ? s ? s.p(l, a) : (s = mw(l), s.c(), s.m(e, null)) : s && (s.d(1), s = null);
    },
    i: fe,
    o: fe,
    d(l) {
      l && j(e), r && r.d(), o && o.d(), s && s.d();
    }
  };
}
function gq(t, e, n) {
  let { editorState: i } = e, r, o, s, l, a;
  return t.$$set = (f) => {
    "editorState" in f && n(3, i = f.editorState);
  }, t.$$.update = () => {
    var f, c, u, h, d;
    t.$$.dirty & 8 && n(4, r = (c = (f = i == null ? void 0 : i.selection) == null ? void 0 : f.main) == null ? void 0 : c.head), t.$$.dirty & 24 && n(5, o = (u = i == null ? void 0 : i.doc) == null ? void 0 : u.lineAt(r)), t.$$.dirty & 32 && n(0, s = o ? o.number : void 0), t.$$.dirty & 48 && n(1, l = o ? r - o.from + 1 : void 0), t.$$.dirty & 8 && n(2, a = (d = (h = i == null ? void 0 : i.selection) == null ? void 0 : h.ranges) == null ? void 0 : d.reduce(
      (p, g) => p + g.to - g.from,
      0
    ));
  }, [s, l, a, i, r, o];
}
class bq extends Be {
  constructor(e) {
    super(), je(this, e, gq, mq, Pt, { editorState: 3 });
  }
}
const _q = bq, Qg = yf.define([
  { tag: Oe.propertyName, color: "var(--jse-key-color)" },
  { tag: Oe.number, color: "var(--jse-value-color-number)" },
  { tag: Oe.bool, color: "var(--jse-value-color-boolean)" },
  { tag: Oe.string, color: "var(--jse-value-color-string)" },
  { tag: Oe.keyword, color: "var(--jse-value-color-null)" }
]), yq = S4(Qg), wq = Qg.style;
Qg.style = (t) => wq(t || []);
function vq(t) {
  const e = t.slice(), n = e[27](e[9], e[7]);
  return e[86] = n, e;
}
function Hd(t) {
  const e = t.slice(), n = e[9].length === 0;
  return e[87] = n, e;
}
function gw(t) {
  let e, n;
  return e = new Ix({
    props: {
      readOnly: t[0],
      onFormat: t[15],
      onCompact: t[16],
      onSort: t[17],
      onTransform: t[18],
      onToggleSearch: t[19],
      onUndo: t[20],
      onRedo: t[21],
      canFormat: !t[87],
      canCompact: !t[87],
      canSort: !t[87],
      canTransform: !t[87],
      canUndo: t[10],
      canRedo: t[11],
      onRenderMenu: t[3]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.readOnly = i[0]), r[0] & 512 && (o.canFormat = !i[87]), r[0] & 512 && (o.canCompact = !i[87]), r[0] & 512 && (o.canSort = !i[87]), r[0] & 512 && (o.canTransform = !i[87]), r[0] & 1024 && (o.canUndo = i[10]), r[0] & 2048 && (o.canRedo = i[11]), r[0] & 8 && (o.onRenderMenu = i[3]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function kq(t) {
  let e;
  return {
    c() {
      e = O("div"), e.innerHTML = `<div class="jse-loading-space svelte-1yqirn0"></div> 
      <div class="jse-loading svelte-1yqirn0">loading...</div>`, m(e, "class", "jse-contents svelte-1yqirn0");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Cq(t) {
  let e, n, i, r, o, s = t[86] && bw(t), l = !t[86] && _w(t);
  return {
    c() {
      e = O("div"), n = q(), s && s.c(), i = q(), l && l.c(), r = tt(), m(e, "class", "jse-contents svelte-1yqirn0"), pe(e, "jse-hidden", t[86]);
    },
    m(a, f) {
      B(a, e, f), t[49](e), B(a, n, f), s && s.m(a, f), B(a, i, f), l && l.m(a, f), B(a, r, f), o = !0;
    },
    p(a, f) {
      (!o || f[0] & 134218368) && pe(e, "jse-hidden", a[86]), a[86] ? s ? (s.p(a, f), f[0] & 640 && k(s, 1)) : (s = bw(a), s.c(), k(s, 1), s.m(i.parentNode, i)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), ge()), a[86] ? l && (me(), E(l, 1, 1, () => {
        l = null;
      }), ge()) : l ? (l.p(a, f), f[0] & 640 && k(l, 1)) : (l = _w(a), l.c(), k(l, 1), l.m(r.parentNode, r));
    },
    i(a) {
      o || (k(s), k(l), o = !0);
    },
    o(a) {
      E(s), E(l), o = !1;
    },
    d(a) {
      a && j(e), t[49](null), a && j(n), s && s.d(a), a && j(i), l && l.d(a), a && j(r);
    }
  };
}
function bw(t) {
  let e, n, i, r = Lr(t[9] || "", Hc) + "", o, s;
  return e = new Hr({
    props: {
      icon: Bs,
      type: "error",
      message: `The JSON document is larger than ${Vf(ep, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Vf(t[9].length, 1024)}.`,
      actions: [
        {
          text: "Open anyway",
          title: "Open the document in text mode. This may freeze or crash your browser.",
          onClick: t[22]
        },
        {
          text: "Open in tree mode",
          title: "Open the document in tree mode. Tree mode can handle large documents.",
          onClick: t[23]
        },
        {
          text: "Cancel",
          title: "Cancel opening this large document.",
          onClick: t[24]
        }
      ]
    }
  }), {
    c() {
      oe(e.$$.fragment), n = q(), i = O("div"), o = le(r), m(i, "class", "jse-contents jse-preview svelte-1yqirn0");
    },
    m(l, a) {
      ie(e, l, a), B(l, n, a), B(l, i, a), w(i, o), s = !0;
    },
    p(l, a) {
      const f = {};
      a[0] & 512 && (f.message = `The JSON document is larger than ${Vf(ep, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Vf(l[9].length, 1024)}.`), e.$set(f), (!s || a[0] & 512) && r !== (r = Lr(l[9] || "", Hc) + "") && Pe(o, r);
    },
    i(l) {
      s || (k(e.$$.fragment, l), s = !0);
    },
    o(l) {
      E(e.$$.fragment, l), s = !1;
    },
    d(l) {
      re(e, l), l && j(n), l && j(i);
    }
  };
}
function _w(t) {
  let e, n, i, r, o = t[2] && yw(t), s = t[12] && ww(t);
  return i = new ag({
    props: {
      validationErrors: t[8],
      selectError: t[25]
    }
  }), {
    c() {
      o && o.c(), e = q(), s && s.c(), n = q(), oe(i.$$.fragment);
    },
    m(l, a) {
      o && o.m(l, a), B(l, e, a), s && s.m(l, a), B(l, n, a), ie(i, l, a), r = !0;
    },
    p(l, a) {
      l[2] ? o ? (o.p(l, a), a[0] & 4 && k(o, 1)) : (o = yw(l), o.c(), k(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), ge()), l[12] ? s ? (s.p(l, a), a[0] & 4096 && k(s, 1)) : (s = ww(l), s.c(), k(s, 1), s.m(n.parentNode, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), ge());
      const f = {};
      a[0] & 256 && (f.validationErrors = l[8]), i.$set(f);
    },
    i(l) {
      r || (k(o), k(s), k(i.$$.fragment, l), r = !0);
    },
    o(l) {
      E(o), E(s), E(i.$$.fragment, l), r = !1;
    },
    d(l) {
      o && o.d(l), l && j(e), s && s.d(l), l && j(n), re(i, l);
    }
  };
}
function yw(t) {
  let e, n;
  return e = new _q({
    props: { editorState: t[6] }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 64 && (o.editorState = i[6]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function ww(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "error",
      icon: Bs,
      message: t[12].message,
      actions: t[13],
      onClick: t[50]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 4096 && (o.message = i[12].message), r[0] & 8192 && (o.actions = i[13]), r[0] & 4096 && (o.onClick = i[50]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Sq(t) {
  let e, n, i, r, o, s = t[1] && gw(Hd(t));
  const l = [Cq, kq], a = [];
  function f(u, h) {
    return u[14] ? 1 : 0;
  }
  function c(u, h) {
    return h === 0 ? vq(u) : u;
  }
  return i = f(t), r = a[i] = l[i](c(t, i)), {
    c() {
      e = O("div"), s && s.c(), n = q(), r.c(), m(e, "class", "jse-text-mode svelte-1yqirn0"), pe(e, "no-main-menu", !t[1]);
    },
    m(u, h) {
      B(u, e, h), s && s.m(e, null), w(e, n), a[i].m(e, null), t[51](e), o = !0;
    },
    p(u, h) {
      u[1] ? s ? (s.p(Hd(u), h), h[0] & 2 && k(s, 1)) : (s = gw(Hd(u)), s.c(), k(s, 1), s.m(e, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), ge()), r.p(c(u, i), h), (!o || h[0] & 2) && pe(e, "no-main-menu", !u[1]);
    },
    i(u) {
      o || (k(s), k(r), o = !0);
    },
    o(u) {
      E(s), E(r), o = !1;
    },
    d(u) {
      u && j(e), s && s.d(), a[i].d(), t[51](null);
    }
  };
}
function vw(t) {
  return {
    from: t.from,
    to: t.to,
    message: t.message,
    actions: t.actions,
    severity: t.severity,
    source: void 0
  };
}
function Mq(t, e, n) {
  let i, r, { readOnly: o } = e, { mainMenuBar: s } = e, { statusBar: l } = e, { externalContent: a } = e, { indentation: f } = e, { tabSize: c } = e, { escapeUnicodeCharacters: u } = e, { parser: h } = e, { validator: d } = e, { validationParser: p } = e, { onChange: g } = e, { onChangeMode: _ } = e, { onError: b } = e, { onFocus: y } = e, { onBlur: v } = e, { onRenderMenu: M } = e, { onSortModal: A } = e, { onTransformModal: P } = e;
  const S = Wn("jsoneditor:TextMode"), D = {
    key: "Mod-i",
    run: Ze,
    shift: be,
    preventDefault: !0
  }, x = typeof window > "u";
  S("isSSR:", x);
  let V, R, W, U, C = !1, L = [];
  const I = new Qr(), H = new Qr(), N = new Qr(), T = new Qr(), K = new Qr();
  let ne = a, z = Xc(ne, f, h), Y = u;
  Ei(async () => {
    if (!x)
      try {
        R = gn({
          target: V,
          initialText: Nt(z, C) ? "" : i.escapeValue(z),
          readOnly: o,
          indentation: f
        }), Fe();
      } catch (ue) {
        console.error(ue);
      }
  }), Br(() => {
    R && (S("Destroy CodeMirror editor"), R.destroy());
  });
  let $ = !1, Q = !1;
  const Te = wl(), Se = wl();
  function Fe() {
    R && (S("focus"), R.focus());
  }
  let Z = !1;
  lg({
    onMount: Ei,
    onDestroy: Br,
    getWindow: () => Hl(W),
    hasFocus: () => Z && document.hasFocus() || Yc(W),
    onFocus: y,
    onBlur: v
  });
  function Ce(ue) {
    S("patch", ue);
    const _e = h.parse(z), Ee = ir(_e, ue), dt = jk(_e, ue);
    return rn({
      text: h.stringify(Ee, null, f)
    }), {
      json: Ee,
      previousJson: _e,
      undo: dt,
      redo: ue
    };
  }
  function Ze() {
    if (S("format"), !o)
      try {
        const ue = h.parse(z);
        rn({
          text: h.stringify(ue, null, f)
        });
      } catch (ue) {
        b(ue);
      }
  }
  function be() {
    if (S("compact"), !o)
      try {
        const ue = h.parse(z);
        rn({ text: h.stringify(ue) });
      } catch (ue) {
        b(ue);
      }
  }
  function te() {
    if (S("repair"), !o)
      try {
        rn({ text: Tr(z) }), n(48, Et = Zh), n(12, xt = void 0);
      } catch (ue) {
        b(ue);
      }
  }
  function ke() {
    if (!o)
      try {
        const ue = h.parse(z);
        Z = !0, A({
          id: Te,
          json: ue,
          rootPath: [],
          onSort: async ({ operations: _e }) => {
            S("onSort", _e), Ce(_e);
          },
          onClose: () => {
            Z = !1, Fe();
          }
        });
      } catch (ue) {
        b(ue);
      }
  }
  function Ue({ id: ue, rootPath: _e, onTransform: Ee, onClose: dt }) {
    try {
      const Ht = h.parse(z);
      Z = !0, P({
        id: ue || Se,
        json: Ht,
        rootPath: _e,
        onTransform: Ee ? (Ct) => {
          Ee({
            operations: Ct,
            json: Ht,
            transformedJson: ir(Ht, Ct)
          });
        } : (Ct) => {
          S("onTransform", Ct), Ce(Ct);
        },
        onClose: () => {
          Z = !1, Fe(), dt && dt();
        }
      });
    } catch (Ht) {
      b(Ht);
    }
  }
  function de() {
    o || Ue({ rootPath: [] });
  }
  function Ve() {
    R && (V && V.querySelector(".cm-search") ? Wg(R) : Hg(R));
  }
  function De() {
    o || R && (Lg(R), Fe());
  }
  function He() {
    o || R && (Au(R), Fe());
  }
  function at() {
    n(7, C = !0), rn(a, !0);
  }
  function mt() {
    _(Gn.tree);
  }
  function Ye() {
    ve();
  }
  function Me(ue) {
    S("select validation error", ue);
    const _e = ot(ue);
    ze(_e.from, _e.to), Fe();
  }
  function ae(ue) {
    S("select parse error", ue);
    const _e = Gt(ue, !1);
    ze(_e.from, _e.to), Fe();
  }
  function ze(ue, _e) {
    S("setSelection", { anchor: ue, head: _e }), R && R.dispatch(R.state.update({
      selection: { anchor: ue, head: _e },
      scrollIntoView: !0
    }));
  }
  function ft(ue, _e) {
    if (_e.state.selection.ranges.length === 1) {
      const Ee = _e.state.selection.ranges[0], dt = z.slice(Ee.from, Ee.to);
      if (dt === "{" || dt === "[") {
        const Ht = Yu.parse(z), Ct = Object.keys(Ht.pointers).find((dr) => {
          var pr;
          return ((pr = Ht.pointers[dr].value) == null ? void 0 : pr.pos) === Ee.from;
        }), si = Ht.pointers[Ct];
        if (Ct && si && si.value && si.valueEnd) {
          S("pointer found, selecting inner contents of path:", Ct, si);
          const dr = si.value.pos + 1, uo = si.valueEnd.pos - 1;
          ze(dr, uo);
        }
      }
    }
  }
  function bt() {
    return JU(on, { delay: L1 });
  }
  function gn({ target: ue, initialText: _e, readOnly: Ee, indentation: dt }) {
    S("Create CodeMirror editor", { readOnly: Ee, indentation: dt });
    const Ht = St.create({
      doc: _e,
      extensions: [
        Th.of([TW, D]),
        I.of(bt()),
        tq(),
        nq,
        yq,
        Ge.domEventHandlers({ dblclick: ft }),
        Ge.updateListener.of((Ct) => {
          n(6, U = Ct.state), Ct.docChanged && Rt();
        }),
        pq(),
        HW({ top: !0 }),
        N.of(St.readOnly.of(Ee)),
        H.of(Ge.editable.of(!Ee)),
        K.of(St.tabSize.of(c)),
        T.of(Ft(dt)),
        Ge.lineWrapping
      ]
    });
    return R = new Ge({ state: Ht, parent: ue }), R;
  }
  function Un() {
    return R ? i.unescapeValue(R.state.doc.toString()) : "";
  }
  function ot(ue) {
    const { path: _e, message: Ee } = ue, { line: dt, column: Ht, from: Ct, to: si } = P9(i.escapeValue(z), _e);
    return {
      path: _e,
      line: dt,
      column: Ht,
      from: Ct,
      to: si,
      message: Ee,
      severity: jo.warning,
      actions: []
    };
  }
  function Gt(ue, _e) {
    const { line: Ee, column: dt, position: Ht, message: Ct } = ue;
    return {
      path: null,
      line: Ee,
      column: dt,
      from: Ht || 0,
      to: Ht || 0,
      severity: jo.error,
      message: Ct,
      actions: _e && !o ? [
        {
          name: "Auto repair",
          apply: () => te()
        }
      ] : null
    };
  }
  function rn(ue, _e = !1) {
    const Ee = Xc(ue, f, h), dt = !kt(ue, ne), Ht = ne;
    ne = ue, n(9, z = Ee), S("setCodeMirrorContent", { isChanged: dt, forceUpdate: _e }), !(!R || !dt && !_e) && (Nt(z, C) || R.dispatch({
      changes: {
        from: 0,
        to: R.state.doc.length,
        insert: i.escapeValue(z)
      }
    }), bn(), dt && It(ne, Ht));
  }
  function ri() {
    S("refresh");
    const ue = R.state.doc.length;
    R.dispatch({
      changes: { from: ue, to: ue, insert: " " }
    }), R.dispatch({
      changes: { from: ue, to: ue + 1, insert: "" }
    });
  }
  function se() {
    S("forceUpdateText", { escapeUnicodeCharacters: u }), R && R.dispatch({
      changes: {
        from: 0,
        to: R.state.doc.length,
        insert: i.escapeValue(z)
      }
    });
  }
  function ve() {
    if (!R)
      return;
    const ue = Un(), _e = ue !== z;
    if (S("onChangeCodeMirrorValue", { isChanged: _e }), !_e)
      return;
    const Ee = ne;
    n(9, z = ue), ne = { text: z }, bn(), It(ne, Ee);
  }
  function ce(ue) {
    S("updateLinter", ue), R && R.dispatch({
      effects: I.reconfigure(bt())
    });
  }
  function _t(ue) {
    R && (S("updateIndentation", ue), R.dispatch({
      effects: T.reconfigure(Ft(ue))
    }));
  }
  function qt(ue) {
    R && (S("updateTabSize", ue), R.dispatch({
      effects: K.reconfigure(St.tabSize.of(ue))
    }));
  }
  function ct(ue) {
    R && (S("updateReadOnly", ue), R.dispatch({
      effects: [
        N.reconfigure(St.readOnly.of(ue)),
        H.reconfigure(Ge.editable.of(!ue))
      ]
    }));
  }
  function Ft(ue) {
    return Ph.of(typeof ue == "number" ? " ".repeat(ue) : ue);
  }
  function bn() {
    n(10, $ = PH(R.state) > 0), n(11, Q = RH(R.state) > 0), S({ canUndo: $, canRedo: Q });
  }
  const Rt = ch(ve, L1);
  function It(ue, _e) {
    g && g(ue, _e, {
      contentErrors: sn(),
      patchResult: null
    });
  }
  function Nt(ue, _e) {
    return ue && ue.length > ep && !_e;
  }
  let Et = Zh, xt = null;
  function on() {
    if (Nt(z, C))
      return [];
    const ue = sn();
    if (Zb(ue)) {
      const { parseError: _e, isRepairable: Ee } = ue;
      return [vw(Gt(_e, Ee))];
    }
    return mj(ue) ? ue.validationErrors.map(ot).map(vw) : [];
  }
  function sn() {
    S("validate:start"), Rt.flush();
    const ue = vn(i.escapeValue(z), d, h, p);
    return Zb(ue) ? (n(48, Et = ue.isRepairable ? H1 : I6), n(12, xt = ue.parseError), n(8, L = [])) : (n(48, Et = Zh), n(12, xt = null), n(8, L = ue.validationErrors)), S("validate:end"), ue;
  }
  const vn = pf(XD);
  function ln(ue) {
    ht[ue ? "unshift" : "push"](() => {
      V = ue, n(4, V);
    });
  }
  const oi = () => ae(xt);
  function zn(ue) {
    ht[ue ? "unshift" : "push"](() => {
      W = ue, n(5, W);
    });
  }
  return t.$$set = (ue) => {
    "readOnly" in ue && n(0, o = ue.readOnly), "mainMenuBar" in ue && n(1, s = ue.mainMenuBar), "statusBar" in ue && n(2, l = ue.statusBar), "externalContent" in ue && n(28, a = ue.externalContent), "indentation" in ue && n(29, f = ue.indentation), "tabSize" in ue && n(30, c = ue.tabSize), "escapeUnicodeCharacters" in ue && n(31, u = ue.escapeUnicodeCharacters), "parser" in ue && n(32, h = ue.parser), "validator" in ue && n(33, d = ue.validator), "validationParser" in ue && n(34, p = ue.validationParser), "onChange" in ue && n(35, g = ue.onChange), "onChangeMode" in ue && n(36, _ = ue.onChangeMode), "onError" in ue && n(37, b = ue.onError), "onFocus" in ue && n(38, y = ue.onFocus), "onBlur" in ue && n(39, v = ue.onBlur), "onRenderMenu" in ue && n(3, M = ue.onRenderMenu), "onSortModal" in ue && n(40, A = ue.onSortModal), "onTransformModal" in ue && n(41, P = ue.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 1 && (i = Xm({
      escapeControlCharacters: !1,
      escapeUnicodeCharacters: u
    })), t.$$.dirty[0] & 268435456 && rn(a), t.$$.dirty[1] & 4 && ce(d), t.$$.dirty[0] & 536870912 && _t(f), t.$$.dirty[0] & 1073741824 && qt(c), t.$$.dirty[0] & 1 && ct(o), t.$$.dirty[1] & 65537 && Y !== u && (n(47, Y = u), se()), t.$$.dirty[0] & 1 | t.$$.dirty[1] & 131072 && n(13, r = Et === H1 && !o ? [
      {
        icon: _h,
        text: "Auto repair",
        title: "Automatically repair JSON",
        onClick: te
      }
    ] : []);
  }, [
    o,
    s,
    l,
    M,
    V,
    W,
    U,
    C,
    L,
    z,
    $,
    Q,
    xt,
    r,
    x,
    Ze,
    be,
    ke,
    de,
    Ve,
    De,
    He,
    at,
    mt,
    Ye,
    Me,
    ae,
    Nt,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    A,
    P,
    Fe,
    Ce,
    Ue,
    ri,
    sn,
    Y,
    Et,
    ln,
    oi,
    zn
  ];
}
class Aq extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      Mq,
      Sq,
      pt,
      {
        readOnly: 0,
        mainMenuBar: 1,
        statusBar: 2,
        externalContent: 28,
        indentation: 29,
        tabSize: 30,
        escapeUnicodeCharacters: 31,
        parser: 32,
        validator: 33,
        validationParser: 34,
        onChange: 35,
        onChangeMode: 36,
        onError: 37,
        onFocus: 38,
        onBlur: 39,
        onRenderMenu: 3,
        onSortModal: 40,
        onTransformModal: 41,
        focus: 42,
        patch: 43,
        openTransformModal: 44,
        refresh: 45,
        validate: 46
      },
      null,
      [-1, -1, -1]
    );
  }
  get focus() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get openTransformModal() {
    return this.$$.ctx[44];
  }
  get refresh() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
}
const Oq = Aq;
function Tq(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Eq(t, e, n) {
  let { json: i } = e, { readOnly: r } = e, { historyState: o } = e, { onSort: s } = e, { onTransform: l } = e, { onContextMenu: a } = e, { onUndo: f } = e, { onRedo: c } = e, { onRenderMenu: u } = e, h, d;
  return t.$$set = (p) => {
    "json" in p && n(1, i = p.json), "readOnly" in p && n(2, r = p.readOnly), "historyState" in p && n(3, o = p.historyState), "onSort" in p && n(4, s = p.onSort), "onTransform" in p && n(5, l = p.onTransform), "onContextMenu" in p && n(6, a = p.onContextMenu), "onUndo" in p && n(7, f = p.onUndo), "onRedo" in p && n(8, c = p.onRedo), "onRenderMenu" in p && n(9, u = p.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 510 && n(10, h = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: s,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: l,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: uC,
        title: Om,
        className: "jse-contextmenu",
        onClick: a
      },
      { type: "separator" },
      {
        type: "button",
        icon: ng,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: f,
        disabled: !o.canUndo
      },
      {
        type: "button",
        icon: tg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: c,
        disabled: !o.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 1536 && n(0, d = u("table", h) || h);
  }, [
    d,
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h
  ];
}
class Pq extends Be {
  constructor(e) {
    super(), je(this, e, Eq, Tq, pt, {
      json: 1,
      readOnly: 2,
      historyState: 3,
      onSort: 4,
      onTransform: 5,
      onContextMenu: 6,
      onUndo: 7,
      onRedo: 8,
      onRenderMenu: 9
    });
  }
}
const Rq = Pq;
function Iq(t, e, n = Math.min(Lt(t) ? t.length : 0, 100)) {
  const i = /* @__PURE__ */ new Set();
  for (let r = 0; r < n; r++)
    (e ? Dq(t[r]) : Nq(t[r])).forEach((s) => i.add(Ae(s)));
  return Array.from(i).map(sr);
}
function Nq(t) {
  return mn(t) ? Object.keys(t).map((e) => [e]) : [[]];
}
function Dq(t) {
  const e = [];
  function n(i, r) {
    mn(i) ? Object.keys(i).forEach((o) => {
      n(i[o], r.concat(o));
    }) : e.push(r);
  }
  return n(t, []), e;
}
function jq(t, e, n, i, r, o = 80) {
  const s = Lt(n) ? n.length : 0, l = Bq(i, r), a = t - o, f = e + 2 * o, c = (b) => i[b] || r;
  let u = 0, h = 0;
  for (; h < a && u < s; )
    h += c(u), u++;
  u > 0 && (u--, h -= c(u));
  let d = u, p = 0;
  for (; p < f && d < s; )
    p += c(d), d++;
  let g = 0;
  for (let b = d; b < s; b++)
    g += c(b);
  const _ = Lt(n) ? n.slice(u, d) : [];
  return {
    startIndex: u,
    endIndex: d,
    startHeight: h,
    endHeight: g,
    averageItemHeight: l,
    visibleHeight: p,
    visibleItems: _
  };
}
function Wd(t, e, n, i) {
  const { rowIndex: r } = $o(t, e);
  let o = 0;
  for (let s = 0; s < r; s++)
    o += n[s] || i;
  return o;
}
function Bq(t, e) {
  const n = Object.values(t);
  if (Mt(n))
    return e;
  const i = (o, s) => o + s;
  return n.reduce(i) / n.length;
}
function Lq(t, e) {
  const { rowIndex: n, columnIndex: i } = $o(e.focusPath, t);
  if (n > 0) {
    const r = { rowIndex: n - 1, columnIndex: i }, o = Wh(r, t);
    return Ot(o, !1);
  }
  return e;
}
function xq(t, e, n) {
  const { rowIndex: i, columnIndex: r } = $o(n.focusPath, e);
  if (i < t.length - 1) {
    const o = { rowIndex: i + 1, columnIndex: r }, s = Wh(o, e);
    return Ot(s, !1);
  }
  return n;
}
function zq(t, e) {
  const { rowIndex: n, columnIndex: i } = $o(e.focusPath, t);
  if (i > 0) {
    const r = { rowIndex: n, columnIndex: i - 1 }, o = Wh(r, t);
    return Ot(o, !1);
  }
  return e;
}
function Vq(t, e) {
  const { rowIndex: n, columnIndex: i } = $o(e.focusPath, t);
  if (i < t.length - 1) {
    const r = { rowIndex: n, columnIndex: i + 1 }, o = Wh(r, t);
    return Ot(o, !1);
  }
  return e;
}
function $o(t, e) {
  const [n, ...i] = t, r = parseInt(n, 10);
  return {
    rowIndex: isNaN(r) ? -1 : r,
    columnIndex: e.findIndex((o) => Ml(i, o))
  };
}
function Wh(t, e) {
  const { rowIndex: n, columnIndex: i } = t;
  return [String(n), ...e[i]];
}
function Fq(t, e) {
  const [n, i] = h9(t, (s) => Bm(s.path[0])), r = uh(n, Hq), o = o9(r, (s) => {
    const l = {
      row: [],
      columns: {}
    };
    return s.forEach((a) => {
      const f = Wq(a, e);
      f !== -1 ? (l.columns[f] === void 0 && (l.columns[f] = []), l.columns[f].push(a)) : l.row.push(a);
    }), l;
  });
  return {
    root: i,
    rows: o
  };
}
function Dl(t, e) {
  if (!(!e || e.length === 0))
    return e.length === 1 ? e[0] : {
      path: t,
      message: "Multiple validation issues: " + e.map((n) => Vi(yi(n.path)) + " " + n.message).join(", "),
      severity: jo.warning
    };
}
function Hq(t) {
  return parseInt(t.path[0], 10);
}
function Wq(t, e) {
  const n = $o(t.path, e);
  return n.columnIndex !== -1 ? n.columnIndex : -1;
}
function Uq(t, e, n) {
  return e.some((r) => qq(t.sortedColumn, r, n)) ? {
    ...t,
    sortedColumn: void 0
  } : t;
}
function qq(t, e, n) {
  if (!t)
    return !1;
  if (e.op === "replace") {
    const i = sr(e.path), { rowIndex: r, columnIndex: o } = $o(i, n), s = n.findIndex((l) => kt(l, t.path));
    if (r !== -1 && o !== -1 && o !== s)
      return !1;
  }
  return !0;
}
function Jq(t, e = 2) {
  const n = [];
  function i(r, o) {
    mn(r) && o.length < e && Object.keys(r).forEach((s) => {
      i(r[s], o.concat(s));
    }), Lt(r) && n.push(o);
  }
  return i(t, []), n;
}
function kw(t, e, n) {
  const i = t.slice();
  return i[9] = e[n], i;
}
function Cw(t) {
  let e, n, i;
  const r = [t[9].props];
  var o = t[9].component;
  function s(l) {
    let a = {};
    for (let f = 0; f < r.length; f += 1)
      a = Jo(a, r[f]);
    return { props: a };
  }
  return o && (e = jr(o, s())), {
    c() {
      e && oe(e.$$.fragment), n = tt();
    },
    m(l, a) {
      e && ie(e, l, a), B(l, n, a), i = !0;
    },
    p(l, a) {
      const f = a & 1 ? Ns(r, [Qu(l[9].props)]) : {};
      if (o !== (o = l[9].component)) {
        if (e) {
          me();
          const c = e;
          E(c.$$.fragment, 1, 0, () => {
            re(c, 1);
          }), ge();
        }
        o ? (e = jr(o, s()), oe(e.$$.fragment), k(e.$$.fragment, 1), ie(e, n.parentNode, n)) : e = null;
      } else
        o && e.$set(f);
    },
    i(l) {
      i || (e && k(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && E(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && j(n), e && re(e, l);
    }
  };
}
function Kq(t) {
  let e, n, i = t[0], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Cw(kw(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = tt();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, [l]) {
      if (l & 1) {
        i = s[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = kw(s, i, a);
          r[a] ? (r[a].p(f, l), k(r[a], 1)) : (r[a] = Cw(f), r[a].c(), k(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        ge();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          k(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      Dt(r, s), s && j(e);
    }
  };
}
function Gq(t, e, n) {
  let i, r, { path: o } = e, { value: s } = e, { context: l } = e, { enforceString: a } = e, { selection: f } = e, { searchResultItems: c } = e;
  function u(h, d) {
    return l.onPatch(SI(h, l.getJson()), d);
  }
  return t.$$set = (h) => {
    "path" in h && n(1, o = h.path), "value" in h && n(2, s = h.value), "context" in h && n(3, l = h.context), "enforceString" in h && n(4, a = h.enforceString), "selection" in h && n(5, f = h.selection), "searchResultItems" in h && n(6, c = h.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && yt(f) && xo(f)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: o,
      value: s,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: f,
      searchResultItems: c,
      onPatch: u,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    i
  ];
}
class Xq extends Be {
  constructor(e) {
    super(), je(this, e, Gq, Kq, pt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
}
const Qq = Xq;
function Yq(t) {
  let e, n = Lr(t[2].stringify(t[1]), z1) + "", i, r, o;
  return {
    c() {
      e = O("button"), i = le(n), m(e, "type", "button"), m(e, "class", "jse-inline-value svelte-l28mqd"), pe(e, "jse-selected", t[3]);
    },
    m(s, l) {
      B(s, e, l), w(e, i), r || (o = X(e, "dblclick", t[6]), r = !0);
    },
    p(s, [l]) {
      l & 6 && n !== (n = Lr(s[2].stringify(s[1]), z1) + "") && Pe(i, n), l & 8 && pe(e, "jse-selected", s[3]);
    },
    i: fe,
    o: fe,
    d(s) {
      s && j(e), r = !1, o();
    }
  };
}
function Zq(t, e, n) {
  let i, { path: r } = e, { value: o } = e, { parser: s } = e, { isSelected: l } = e, { onEdit: a } = e;
  const f = () => a(r);
  return t.$$set = (c) => {
    "path" in c && n(0, r = c.path), "value" in c && n(1, o = c.value), "parser" in c && n(2, s = c.parser), "isSelected" in c && n(3, l = c.isSelected), "onEdit" in c && n(4, a = c.onEdit);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(5, i = Lt(o) ? o.length : Object.keys(o).length), t.$$.dirty & 34;
  }, [r, o, s, l, a, i, f];
}
class $q extends Be {
  constructor(e) {
    super(), je(this, e, Zq, Yq, Pt, {
      path: 0,
      value: 1,
      parser: 2,
      isSelected: 3,
      onEdit: 4
    });
  }
}
const eJ = $q;
function Sw(t) {
  let e, n, i, r;
  return n = new vt({
    props: {
      data: t[1] === Bi.asc ? Ni : sb
    }
  }), {
    c() {
      e = O("span"), oe(n.$$.fragment), m(e, "class", "jse-column-sort-icon svelte-h4fort"), m(e, "title", i = `Currently sorted in ${t[2]} order`);
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s & 2 && (l.data = o[1] === Bi.asc ? Ni : sb), n.$set(l), (!r || s & 4 && i !== (i = `Currently sorted in ${o[2]} order`)) && m(e, "title", i);
    },
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function tJ(t) {
  let e, n, i = Lr(t[3], V1) + "", r, o, s, l, a, f, c = t[1] !== void 0 && Sw(t);
  return {
    c() {
      e = O("button"), n = O("span"), r = le(i), o = q(), c && c.c(), m(n, "class", "jse-column-name"), m(e, "type", "button"), m(e, "class", "jse-column-header svelte-h4fort"), m(e, "title", s = t[0] ? t[3] : t[3] + " (Click to sort the data by this column)"), pe(e, "jse-readonly", t[0]);
    },
    m(u, h) {
      B(u, e, h), w(e, n), w(n, r), w(e, o), c && c.m(e, null), l = !0, a || (f = X(e, "click", t[4]), a = !0);
    },
    p(u, [h]) {
      (!l || h & 8) && i !== (i = Lr(u[3], V1) + "") && Pe(r, i), u[1] !== void 0 ? c ? (c.p(u, h), h & 2 && k(c, 1)) : (c = Sw(u), c.c(), k(c, 1), c.m(e, null)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), ge()), (!l || h & 9 && s !== (s = u[0] ? u[3] : u[3] + " (Click to sort the data by this column)")) && m(e, "title", s), (!l || h & 1) && pe(e, "jse-readonly", u[0]);
    },
    i(u) {
      l || (k(c), l = !0);
    },
    o(u) {
      E(c), l = !1;
    },
    d(u) {
      u && j(e), c && c.d(), a = !1, f();
    }
  };
}
function nJ(t, e, n) {
  let i, r, o, { path: s } = e, { sortedColumn: l } = e, { readOnly: a } = e, { onSort: f } = e;
  function c() {
    a || f({
      path: s,
      sortDirection: r === Bi.asc ? Bi.desc : Bi.asc
    });
  }
  return t.$$set = (u) => {
    "path" in u && n(5, s = u.path), "sortedColumn" in u && n(6, l = u.sortedColumn), "readOnly" in u && n(0, a = u.readOnly), "onSort" in u && n(7, f = u.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 32 && n(3, i = Mt(s) ? "values" : Vi(yi(s))), t.$$.dirty & 96 && n(1, r = kt(s, l == null ? void 0 : l.path) ? l.sortDirection : void 0), t.$$.dirty & 2 && n(2, o = N6[r]);
  }, [
    a,
    r,
    o,
    i,
    c,
    s,
    l,
    f
  ];
}
class iJ extends Be {
  constructor(e) {
    super(), je(this, e, nJ, tJ, Pt, {
      path: 5,
      sortedColumn: 6,
      readOnly: 0,
      onSort: 7
    });
  }
}
const rJ = iJ;
let ac, fc;
function R5(t, e) {
  return ac || (fc = /* @__PURE__ */ new WeakMap(), ac = new ResizeObserver((n) => {
    for (const i of n) {
      const r = fc.get(i.target);
      r && r(i.target);
    }
  })), fc.set(t, e), ac.observe(t), {
    destroy: () => {
      fc.delete(t), ac.unobserve(t);
    }
  };
}
function oJ(t) {
  let e, n;
  return e = new EC({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.items = i[1]), r[0] & 1 && (o.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function sJ(t, e, n) {
  let i, r, o, s, l, a, f, c, u, h, d, { json: p } = e, { documentState: g } = e, { parser: _ } = e, { showTip: b } = e, { onCloseContextMenu: y } = e, { onEditValue: v } = e, { onToggleEnforceString: M } = e, { onCut: A } = e, { onCopy: P } = e, { onPaste: S } = e, { onRemove: D } = e;
  function x() {
    y(), v();
  }
  function V() {
    y(), M();
  }
  function R() {
    y(), A(!0);
  }
  function W() {
    y(), A(!1);
  }
  function U() {
    y(), P(!0);
  }
  function C() {
    y(), P(!1);
  }
  function L() {
    y(), S();
  }
  function I() {
    y(), D();
  }
  let H;
  return t.$$set = (N) => {
    "json" in N && n(2, p = N.json), "documentState" in N && n(3, g = N.documentState), "parser" in N && n(4, _ = N.parser), "showTip" in N && n(0, b = N.showTip), "onCloseContextMenu" in N && n(5, y = N.onCloseContextMenu), "onEditValue" in N && n(6, v = N.onEditValue), "onToggleEnforceString" in N && n(7, M = N.onToggleEnforceString), "onCut" in N && n(8, A = N.onCut), "onCopy" in N && n(9, P = N.onCopy), "onPaste" in N && n(10, S = N.onPaste), "onRemove" in N && n(11, D = N.onRemove);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(18, i = g.selection), t.$$.dirty[0] & 4 && n(21, r = p !== void 0), t.$$.dirty[0] & 262144 && n(13, o = i != null), t.$$.dirty[0] & 270336 && n(22, s = o && Mt(i.focusPath)), t.$$.dirty[0] & 270340 && n(19, l = o ? xe(p, i.focusPath) : void 0), t.$$.dirty[0] & 524288 && n(17, a = Array.isArray(l) ? "Edit array" : dn(l) ? "Edit object" : "Edit value"), t.$$.dirty[0] & 2359296 && n(12, f = r && (Tt(i) || wn(i) || yt(i))), t.$$.dirty[0] & 6295552, t.$$.dirty[0] & 6553600 && r && i != null && (Tt(i) || yt(i)), t.$$.dirty[0] & 6553604 && r && i != null && La(i) && !s && Array.isArray(xe(p, wt(i.focusPath))), t.$$.dirty[0] & 2359296 && n(16, c = r && i != null && La(i)), t.$$.dirty[0] & 589824 && n(14, u = c && !tn(l)), t.$$.dirty[0] & 4096 && n(20, h = f), t.$$.dirty[0] & 1048576, t.$$.dirty[0] & 1056768, t.$$.dirty[0] & 1843200 && h && bs(i) && dn(l), t.$$.dirty[0] & 1843200 && h && bs(i) && Array.isArray(l), t.$$.dirty[0] & 1843200 && h && bs(i) && tn(l), t.$$.dirty[0] & 786456 && n(15, d = i != null ? io(l, g.enforceStringMap, Ae(i.focusPath), _) : !1), t.$$.dirty[0] & 258048 && n(1, H = [
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: x,
                  icon: _a,
                  text: a,
                  title: "Edit the value (Double-click on the value)",
                  disabled: !c
                },
                width: "11em",
                items: [
                  {
                    type: "button",
                    icon: _a,
                    text: a,
                    title: "Edit the value (Double-click on the value)",
                    onClick: x,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: d ? Da : ja,
                    text: "Enforce string",
                    title: "Enforce keeping the value as string when it contains a numeric value",
                    onClick: V,
                    disabled: !u
                  }
                ]
              },
              { type: "separator" },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: R,
                  icon: ol,
                  text: "Cut",
                  title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                  disabled: !f
                },
                width: "10em",
                items: [
                  {
                    type: "button",
                    icon: ol,
                    text: "Cut formatted",
                    title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                    onClick: R,
                    disabled: !f
                  },
                  {
                    type: "button",
                    icon: ol,
                    text: "Cut compacted",
                    title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                    onClick: W,
                    disabled: !f
                  }
                ]
              },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: U,
                  icon: Po,
                  text: "Copy",
                  title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                  disabled: !f
                },
                width: "12em",
                items: [
                  {
                    type: "button",
                    icon: Po,
                    text: "Copy formatted",
                    title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                    onClick: U,
                    disabled: !f
                  },
                  {
                    type: "button",
                    icon: Po,
                    text: "Copy compacted",
                    title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                    onClick: C,
                    disabled: !f
                  }
                ]
              },
              {
                type: "button",
                onClick: L,
                icon: fC,
                text: "Paste",
                title: "Paste clipboard contents (Ctrl+V)",
                disabled: !o
              },
              { type: "separator" },
              {
                type: "button",
                onClick: I,
                icon: Wl,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !f
              }
            ]
          }
        ]
      }
    ]);
  }, [
    b,
    H,
    p,
    g,
    _,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    f,
    o,
    u,
    d,
    c,
    a,
    i,
    l,
    h,
    r,
    s
  ];
}
class lJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      sJ,
      oJ,
      pt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditValue: 6,
        onToggleEnforceString: 7,
        onCut: 8,
        onCopy: 9,
        onPaste: 10,
        onRemove: 11
      },
      null,
      [-1, -1]
    );
  }
}
const aJ = lJ;
function Mw(t, e, n) {
  const i = t.slice();
  i[12] = e[n];
  const r = xe(i[0], i[12]).length;
  return i[13] = r, i;
}
function fJ(t) {
  let e, n;
  return {
    c() {
      e = le(t[5]), n = le(" cannot be opened in table mode. You can open the document in tree mode instead.");
    },
    m(i, r) {
      B(i, e, r), B(i, n, r);
    },
    p(i, r) {
      r & 32 && Pe(e, i[5]);
    },
    d(i) {
      i && j(e), i && j(n);
    }
  };
}
function cJ(t) {
  let e;
  return {
    c() {
      e = le(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`);
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Aw(t) {
  let e, n, i, r = Vi(yi(t[12])) + "", o, s, l, a, f = t[13] + "", c, u, h = t[13] !== 1 ? "items" : "item", d, p, g, _;
  function b() {
    return t[10](t[12]);
  }
  return {
    c() {
      e = O("button"), n = le(t[6]), i = le(' "'), o = le(r), s = le(`"
        `), l = O("span"), a = le("("), c = le(f), u = q(), d = le(h), p = le(")"), m(l, "class", "jse-nested-array-count svelte-1te5h1h"), m(e, "type", "button"), m(e, "class", "jse-nested-array-action svelte-1te5h1h");
    },
    m(y, v) {
      B(y, e, v), w(e, n), w(e, i), w(e, o), w(e, s), w(e, l), w(l, a), w(l, c), w(l, u), w(l, d), w(l, p), g || (_ = X(e, "click", b), g = !0);
    },
    p(y, v) {
      t = y, v & 64 && Pe(n, t[6]), v & 8 && r !== (r = Vi(yi(t[12])) + "") && Pe(o, r), v & 9 && f !== (f = t[13] + "") && Pe(c, f), v & 9 && h !== (h = t[13] !== 1 ? "items" : "item") && Pe(d, h);
    },
    d(y) {
      y && j(e), g = !1, _();
    }
  };
}
function uJ(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b;
  function y(S, D) {
    return S[4] ? cJ : fJ;
  }
  let v = y(t), M = v(t), A = t[3], P = [];
  for (let S = 0; S < A.length; S += 1)
    P[S] = Aw(Mw(t, A, S));
  return {
    c() {
      e = O("div"), n = O("div"), i = q(), r = O("div"), o = O("div"), s = le(t[5]), l = q(), a = O("div"), M.c(), f = q();
      for (let S = 0; S < P.length; S += 1)
        P[S].c();
      c = q(), u = O("button"), h = le(t[6]), d = le(" in tree mode"), p = q(), g = O("div"), m(n, "class", "jse-space jse-before svelte-1te5h1h"), m(o, "class", "jse-nested-arrays-title"), m(a, "class", "jse-nested-arrays-info svelte-1te5h1h"), m(u, "type", "button"), m(u, "class", "jse-nested-array-action svelte-1te5h1h"), m(r, "class", "jse-nested-arrays svelte-1te5h1h"), m(g, "class", "jse-space jse-after svelte-1te5h1h"), m(e, "class", "jse-table-mode-welcome svelte-1te5h1h");
    },
    m(S, D) {
      B(S, e, D), w(e, n), w(e, i), w(e, r), w(r, o), w(o, s), w(r, l), w(r, a), M.m(a, null), w(r, f);
      for (let x = 0; x < P.length; x += 1)
        P[x].m(r, null);
      w(r, c), w(r, u), w(u, h), w(u, d), w(e, p), w(e, g), _ || (b = X(u, "click", t[11]), _ = !0);
    },
    p(S, [D]) {
      if (D & 32 && Pe(s, S[5]), v === (v = y(S)) && M ? M.p(S, D) : (M.d(1), M = v(S), M && (M.c(), M.m(a, null))), D & 75) {
        A = S[3];
        let x;
        for (x = 0; x < A.length; x += 1) {
          const V = Mw(S, A, x);
          P[x] ? P[x].p(V, D) : (P[x] = Aw(V), P[x].c(), P[x].m(r, c));
        }
        for (; x < P.length; x += 1)
          P[x].d(1);
        P.length = A.length;
      }
      D & 64 && Pe(h, S[6]);
    },
    i: fe,
    o: fe,
    d(S) {
      S && j(e), M.d(), Dt(P, S), _ = !1, b();
    }
  };
}
function hJ(t, e, n) {
  let i, r, o, { text: s } = e, { json: l } = e, { readOnly: a } = e, { parser: f } = e, { openJSONEditorModal: c } = e, { onChangeMode: u } = e, h;
  const d = (g) => c(g), p = () => u(Gn.tree);
  return t.$$set = (g) => {
    "text" in g && n(7, s = g.text), "json" in g && n(0, l = g.json), "readOnly" in g && n(8, a = g.readOnly), "parser" in g && n(9, f = g.parser), "openJSONEditorModal" in g && n(1, c = g.openJSONEditorModal), "onChangeMode" in g && n(2, u = g.onChangeMode);
  }, t.$$.update = () => {
    t.$$.dirty & 256 && n(6, i = a ? "View" : "Edit"), t.$$.dirty & 1 && n(3, h = l ? Jq(l).slice(0, 99).filter((g) => g.length > 0) : []), t.$$.dirty & 8 && n(4, r = !Mt(h)), t.$$.dirty & 657 && n(5, o = r ? "Object with nested arrays" : l === void 0 && (s === "" || s === void 0) ? "An empty document" : mn(l) ? "An object" : Lt(l) ? "An empty array" : `A ${Lm(l, f)}`);
  }, [
    l,
    c,
    u,
    h,
    r,
    o,
    i,
    s,
    a,
    f,
    d,
    p
  ];
}
class dJ extends Be {
  constructor(e) {
    super(), je(this, e, hJ, uJ, Pt, {
      text: 7,
      json: 0,
      readOnly: 8,
      parser: 9,
      openJSONEditorModal: 1,
      onChangeMode: 2
    });
  }
}
const pJ = dJ;
function Ow(t, e, n) {
  const i = t.slice();
  i[112] = e[n], i[116] = n;
  const r = i[21].startIndex + i[116];
  i[113] = r;
  const o = i[20].rows[i[113]];
  return i[114] = o, i;
}
function Tw(t, e, n) {
  var a;
  const i = t.slice();
  i[117] = e[n], i[123] = n;
  const r = [String(i[113])].concat(i[117]);
  i[118] = r;
  const o = xe(i[112], i[117]);
  i[119] = o;
  const s = i[44](i[118], i[9].selection);
  i[120] = s;
  const l = (a = i[114]) == null ? void 0 : a.columns[i[123]];
  return i[121] = l, i;
}
function Ew(t, e, n) {
  const i = t.slice();
  return i[117] = e[n], i;
}
function Pw(t) {
  let e, n;
  return e = new Rq({
    props: {
      json: t[7],
      readOnly: t[0],
      historyState: t[18],
      onSort: t[38],
      onTransform: t[39],
      onUndo: t[40],
      onRedo: t[41],
      onContextMenu: t[30],
      onRenderMenu: t[5]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 128 && (o.json = i[7]), r[0] & 1 && (o.readOnly = i[0]), r[0] & 262144 && (o.historyState = i[18]), r[0] & 32 && (o.onRenderMenu = i[5]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function mJ(t) {
  let e;
  return {
    c() {
      e = O("div"), e.innerHTML = `<div class="jse-loading-space svelte-hs49xj"></div> 
      <div class="jse-loading svelte-hs49xj">loading...</div>`, m(e, "class", "jse-contents jse-contents-loading svelte-hs49xj");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function gJ(t) {
  let e, n, i, r, o, s, l, a, f;
  const c = [yJ, _J, bJ], u = [];
  function h(d, p) {
    return d[22] ? 0 : d[15] && d[14] !== void 0 && d[14] !== "" ? 1 : 2;
  }
  return r = h(t), o = u[r] = c[r](t), {
    c() {
      e = O("label"), n = O("input"), i = q(), o.c(), s = tt(), m(n, "type", "text"), n.readOnly = "readonly", m(n, "tabindex", "-1"), m(n, "class", "jse-hidden-input svelte-hs49xj"), m(e, "class", "jse-hidden-input-label svelte-hs49xj");
    },
    m(d, p) {
      B(d, e, p), w(e, n), t[69](n), B(d, i, p), u[r].m(d, p), B(d, s, p), l = !0, a || (f = X(n, "paste", t[35]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? u[r].p(d, p) : (me(), E(u[g], 1, 1, () => {
        u[g] = null;
      }), ge(), o = u[r], o ? o.p(d, p) : (o = u[r] = c[r](d), o.c()), k(o, 1), o.m(s.parentNode, s));
    },
    i(d) {
      l || (k(o), l = !0);
    },
    o(d) {
      E(o), l = !1;
    },
    d(d) {
      d && j(e), t[69](null), d && j(i), u[r].d(d), d && j(s), a = !1, f();
    }
  };
}
function bJ(t) {
  let e, n;
  return e = new pJ({
    props: {
      text: t[14],
      json: t[7],
      readOnly: t[0],
      parser: t[2],
      openJSONEditorModal: t[37],
      onChangeMode: t[4]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16384 && (o.text = i[14]), r[0] & 128 && (o.json = i[7]), r[0] & 1 && (o.readOnly = i[0]), r[0] & 4 && (o.parser = i[2]), r[0] & 16 && (o.onChangeMode = i[4]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function _J(t) {
  let e, n, i, r;
  return e = new Hr({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: zo,
          text: "Repair manually",
          onClick: t[33]
        }
      ]
    }
  }), i = new LC({
    props: {
      text: t[14] || "",
      json: t[7],
      indentation: t[3],
      parser: t[2]
    }
  }), {
    c() {
      oe(e.$$.fragment), n = q(), oe(i.$$.fragment);
    },
    m(o, s) {
      ie(e, o, s), B(o, n, s), ie(i, o, s), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 1 && (l.actions = o[0] ? [] : [
        {
          icon: zo,
          text: "Repair manually",
          onClick: o[33]
        }
      ]), e.$set(l);
      const a = {};
      s[0] & 16384 && (a.text = o[14] || ""), s[0] & 128 && (a.json = o[7]), s[0] & 8 && (a.indentation = o[3]), s[0] & 4 && (a.parser = o[2]), i.$set(a);
    },
    i(o) {
      r || (k(e.$$.fragment, o), k(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(e.$$.fragment, o), E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      re(e, o), o && j(n), re(i, o);
    }
  };
}
function yJ(t) {
  var H;
  let e, n, i, r, o, s = !Mt((H = t[20]) == null ? void 0 : H.root), l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D = s && Rw(t), x = t[8], V = [];
  for (let N = 0; N < x.length; N += 1)
    V[N] = Iw(Ew(t, x, N));
  const R = (N) => E(V[N], 1, 1, () => {
    V[N] = null;
  });
  let W = t[21].visibleItems, U = [];
  for (let N = 0; N < W.length; N += 1)
    U[N] = xw(Ow(t, W, N));
  const C = (N) => E(U[N], 1, 1, () => {
    U[N] = null;
  });
  let L = t[16] && zw(t), I = t[17] && Vw(t);
  return M = new ag({
    props: {
      validationErrors: t[10],
      selectError: t[36]
    }
  }), {
    c() {
      e = O("div"), n = O("table"), i = O("tbody"), r = O("tr"), o = O("th"), D && D.c(), l = q();
      for (let N = 0; N < V.length; N += 1)
        V[N].c();
      a = q(), f = O("tr"), c = O("td"), h = q();
      for (let N = 0; N < U.length; N += 1)
        U[N].c();
      d = q(), p = O("tr"), g = O("td"), b = q(), L && L.c(), y = q(), I && I.c(), v = q(), oe(M.$$.fragment), m(o, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj"), m(r, "class", "jse-table-row jse-table-row-header svelte-hs49xj"), m(c, "colspan", u = t[8].length), m(c, "class", "svelte-hs49xj"), ai(c, "height", t[21].startHeight + "px"), m(f, "class", "jse-table-invisible-start-section"), m(g, "colspan", _ = t[8].length), m(g, "class", "svelte-hs49xj"), ai(g, "height", t[21].endHeight + "px"), m(p, "class", "jse-table-invisible-end-section"), m(n, "class", "jse-table-main svelte-hs49xj"), m(n, "cellpadding", "0"), m(n, "cellspacing", "0"), m(e, "class", "jse-contents svelte-hs49xj");
    },
    m(N, T) {
      B(N, e, T), w(e, n), w(n, i), w(i, r), w(r, o), D && D.m(o, null), w(r, l);
      for (let K = 0; K < V.length; K += 1)
        V[K].m(r, null);
      w(i, a), w(i, f), w(f, c), w(i, h);
      for (let K = 0; K < U.length; K += 1)
        U[K].m(i, null);
      w(i, d), w(i, p), w(p, g), t[71](e), B(N, b, T), L && L.m(N, T), B(N, y, T), I && I.m(N, T), B(N, v, T), ie(M, N, T), A = !0, P || (S = [
        _i(R5.call(null, e, t[42])),
        X(e, "scroll", t[26])
      ], P = !0);
    },
    p(N, T) {
      var ne;
      if (T[0] & 1048576 && (s = !Mt((ne = N[20]) == null ? void 0 : ne.root)), s ? D ? (D.p(N, T), T[0] & 1048576 && k(D, 1)) : (D = Rw(N), D.c(), k(D, 1), D.m(o, null)) : D && (me(), E(D, 1, 1, () => {
        D = null;
      }), ge()), T[0] & 33555201) {
        x = N[8];
        let z;
        for (z = 0; z < x.length; z += 1) {
          const Y = Ew(N, x, z);
          V[z] ? (V[z].p(Y, T), k(V[z], 1)) : (V[z] = Iw(Y), V[z].c(), k(V[z], 1), V[z].m(r, null));
        }
        for (me(), z = x.length; z < V.length; z += 1)
          R(z);
        ge();
      }
      if ((!A || T[0] & 256 && u !== (u = N[8].length)) && m(c, "colspan", u), T[0] & 2097152 && ai(c, "height", N[21].startHeight + "px"), T[0] & 288883461 | T[1] & 12352) {
        W = N[21].visibleItems;
        let z;
        for (z = 0; z < W.length; z += 1) {
          const Y = Ow(N, W, z);
          U[z] ? (U[z].p(Y, T), k(U[z], 1)) : (U[z] = xw(Y), U[z].c(), k(U[z], 1), U[z].m(i, d));
        }
        for (me(), z = W.length; z < U.length; z += 1)
          C(z);
        ge();
      }
      (!A || T[0] & 256 && _ !== (_ = N[8].length)) && m(g, "colspan", _), T[0] & 2097152 && ai(g, "height", N[21].endHeight + "px"), N[16] ? L ? (L.p(N, T), T[0] & 65536 && k(L, 1)) : (L = zw(N), L.c(), k(L, 1), L.m(y.parentNode, y)) : L && (me(), E(L, 1, 1, () => {
        L = null;
      }), ge()), N[17] ? I ? (I.p(N, T), T[0] & 131072 && k(I, 1)) : (I = Vw(N), I.c(), k(I, 1), I.m(v.parentNode, v)) : I && (me(), E(I, 1, 1, () => {
        I = null;
      }), ge());
      const K = {};
      T[0] & 1024 && (K.validationErrors = N[10]), M.$set(K);
    },
    i(N) {
      if (!A) {
        k(D);
        for (let T = 0; T < x.length; T += 1)
          k(V[T]);
        for (let T = 0; T < W.length; T += 1)
          k(U[T]);
        k(L), k(I), k(M.$$.fragment, N), A = !0;
      }
    },
    o(N) {
      E(D), V = V.filter(Boolean);
      for (let T = 0; T < V.length; T += 1)
        E(V[T]);
      U = U.filter(Boolean);
      for (let T = 0; T < U.length; T += 1)
        E(U[T]);
      E(L), E(I), E(M.$$.fragment, N), A = !1;
    },
    d(N) {
      N && j(e), D && D.d(), Dt(V, N), Dt(U, N), t[71](null), N && j(b), L && L.d(N), N && j(y), I && I.d(N), N && j(v), re(M, N), P = !1, nt(S);
    }
  };
}
function Rw(t) {
  var r;
  let e, n, i;
  return n = new Ul({
    props: {
      validationError: Dl([], (r = t[20]) == null ? void 0 : r.root),
      onExpand: kr
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), m(e, "class", "jse-table-root-error svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), i = !0;
    },
    p(o, s) {
      var a;
      const l = {};
      s[0] & 1048576 && (l.validationError = Dl([], (a = o[20]) == null ? void 0 : a.root)), n.$set(l);
    },
    i(o) {
      i || (k(n.$$.fragment, o), i = !0);
    },
    o(o) {
      E(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function Iw(t) {
  let e, n, i, r;
  return n = new rJ({
    props: {
      path: t[117],
      sortedColumn: t[9].sortedColumn,
      readOnly: t[0],
      onSort: t[25]
    }
  }), {
    c() {
      e = O("th"), oe(n.$$.fragment), i = q(), m(e, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), w(e, i), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 256 && (l.path = o[117]), s[0] & 512 && (l.sortedColumn = o[9].sortedColumn), s[0] & 1 && (l.readOnly = o[0]), n.$set(l);
    },
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n);
    }
  };
}
function Nw(t) {
  let e, n;
  return e = new Ul({
    props: {
      validationError: Dl([String(t[113])], t[114].row),
      onExpand: kr
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 3145728 && (o.validationError = Dl([String(i[113])], i[114].row)), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Dw(t) {
  var h;
  let e, n = t[113] + 1 + "", i, r, o = !Mt((h = t[114]) == null ? void 0 : h.row), s, l, a, f, c = o && Nw(t);
  function u(...d) {
    return t[70](t[113], ...d);
  }
  return {
    c() {
      e = O("th"), i = le(n), r = q(), c && c.c(), m(e, "class", "jse-table-cell jse-table-cell-gutter svelte-hs49xj");
    },
    m(d, p) {
      B(d, e, p), w(e, i), w(e, r), c && c.m(e, null), l = !0, a || (f = _i(s = R5.call(null, e, u)), a = !0);
    },
    p(d, p) {
      var g;
      t = d, (!l || p[0] & 2097152) && n !== (n = t[113] + 1 + "") && Pe(i, n), p[0] & 3145728 && (o = !Mt((g = t[114]) == null ? void 0 : g.row)), o ? c ? (c.p(t, p), p[0] & 3145728 && k(c, 1)) : (c = Nw(t), c.c(), k(c, 1), c.m(e, null)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), ge()), s && Fn(s.update) && p[0] & 2097152 && s.update.call(null, u);
    },
    i(d) {
      l || (k(c), l = !0);
    },
    o(d) {
      E(c), l = !1;
    },
    d(d) {
      d && j(e), c && c.d(), a = !1, f();
    }
  };
}
function wJ(t) {
  let e, n;
  return e = new Qq({
    props: {
      path: t[118],
      value: t[119] !== void 0 ? t[119] : "",
      enforceString: io(t[119], t[9].enforceStringMap, Ae(t[118]), t[19].parser),
      selection: t[120] ? t[9].selection : void 0,
      searchResultItems: t[24],
      context: t[19]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2097408 && (o.path = i[118]), r[0] & 2097408 && (o.value = i[119] !== void 0 ? i[119] : ""), r[0] & 2622208 && (o.enforceString = io(i[119], i[9].enforceStringMap, Ae(i[118]), i[19].parser)), r[0] & 2097920 && (o.selection = i[120] ? i[9].selection : void 0), r[0] & 524288 && (o.context = i[19]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function vJ(t) {
  let e, n;
  return e = new eJ({
    props: {
      path: t[118],
      value: t[119],
      parser: t[2],
      isSelected: t[120],
      onEdit: t[37]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2097408 && (o.path = i[118]), r[0] & 2097408 && (o.value = i[119]), r[0] & 4 && (o.parser = i[2]), r[0] & 2097920 && (o.isSelected = i[120]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function jw(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[28]
    }
  }), {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), m(e, "class", "jse-context-menu-anchor svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), ie(n, e, null), B(o, i, s), r = !0;
    },
    p: fe,
    i(o) {
      r || (k(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), re(n), o && j(i);
    }
  };
}
function Bw(t) {
  let e, n;
  return e = new Ul({
    props: {
      validationError: Dl(t[118], t[121]),
      onExpand: kr
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 3145984 && (o.validationError = Dl(i[118], i[121])), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Lw(t) {
  let e, n, i, r, o, s, l = !Mt(t[121]), a, f;
  const c = [vJ, wJ], u = [];
  function h(g, _) {
    return _[0] & 2097408 && (n = null), n == null && (n = !!tn(g[119])), n ? 0 : 1;
  }
  i = h(t, [-1, -1, -1, -1, -1]), r = u[i] = c[i](t);
  let d = !t[0] && t[120] && !t[9].selection.edit && jw(t), p = l && Bw(t);
  return {
    c() {
      e = O("td"), r.c(), o = tt(), d && d.c(), s = tt(), p && p.c(), m(e, "class", "jse-table-cell svelte-hs49xj"), m(e, "data-path", a = kl(t[118])), pe(e, "jse-selected-value", t[120] && yt(t[9].selection));
    },
    m(g, _) {
      B(g, e, _), u[i].m(e, null), w(e, o), d && d.m(e, null), w(e, s), p && p.m(e, null), f = !0;
    },
    p(g, _) {
      let b = i;
      i = h(g, _), i === b ? u[i].p(g, _) : (me(), E(u[b], 1, 1, () => {
        u[b] = null;
      }), ge(), r = u[i], r ? r.p(g, _) : (r = u[i] = c[i](g), r.c()), k(r, 1), r.m(e, o)), !g[0] && g[120] && !g[9].selection.edit ? d ? (d.p(g, _), _[0] & 2097921 && k(d, 1)) : (d = jw(g), d.c(), k(d, 1), d.m(e, s)) : d && (me(), E(d, 1, 1, () => {
        d = null;
      }), ge()), _[0] & 3145728 && (l = !Mt(g[121])), l ? p ? (p.p(g, _), _[0] & 3145728 && k(p, 1)) : (p = Bw(g), p.c(), k(p, 1), p.m(e, null)) : p && (me(), E(p, 1, 1, () => {
        p = null;
      }), ge()), (!f || _[0] & 2097408 && a !== (a = kl(g[118]))) && m(e, "data-path", a), (!f || _[0] & 2097920 | _[1] & 8192) && pe(e, "jse-selected-value", g[120] && yt(g[9].selection));
    },
    i(g) {
      f || (k(r), k(d), k(p), f = !0);
    },
    o(g) {
      E(r), E(d), E(p), f = !1;
    },
    d(g) {
      g && j(e), u[i].d(), d && d.d(), p && p.d();
    }
  };
}
function xw(t) {
  let e, n = t[113], i, r, o = Dw(t), s = t[8], l = [];
  for (let f = 0; f < s.length; f += 1)
    l[f] = Lw(Tw(t, s, f));
  const a = (f) => E(l[f], 1, 1, () => {
    l[f] = null;
  });
  return {
    c() {
      e = O("tr"), o.c(), i = q();
      for (let f = 0; f < l.length; f += 1)
        l[f].c();
      m(e, "class", "jse-table-row svelte-hs49xj");
    },
    m(f, c) {
      B(f, e, c), o.m(e, null), w(e, i);
      for (let u = 0; u < l.length; u += 1)
        l[u].m(e, null);
      r = !0;
    },
    p(f, c) {
      if (c[0] & 2097152 && pt(n, n = f[113]) ? (me(), E(o, 1, 1, fe), ge(), o = Dw(f), o.c(), k(o, 1), o.m(e, i)) : o.p(f, c), c[0] & 288883461 | c[1] & 8256) {
        s = f[8];
        let u;
        for (u = 0; u < s.length; u += 1) {
          const h = Tw(f, s, u);
          l[u] ? (l[u].p(h, c), k(l[u], 1)) : (l[u] = Lw(h), l[u].c(), k(l[u], 1), l[u].m(e, null));
        }
        for (me(), u = s.length; u < l.length; u += 1)
          a(u);
        ge();
      }
    },
    i(f) {
      if (!r) {
        k(o);
        for (let c = 0; c < s.length; c += 1)
          k(l[c]);
        r = !0;
      }
    },
    o(f) {
      E(o), l = l.filter(Boolean);
      for (let c = 0; c < l.length; c += 1)
        E(l[c]);
      r = !1;
    },
    d(f) {
      f && j(e), o.d(f), Dt(l, f);
    }
  };
}
function zw(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[16].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: _h,
          text: "Paste as JSON instead",
          onMouseDown: t[31]
        },
        {
          text: "Leave as is",
          onClick: t[32]
        }
      ]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 65536 && (o.message = `You pasted a JSON ${Array.isArray(i[16].contents) ? "array" : "object"} as text`), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Vw(t) {
  let e, n;
  return e = new Hr({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: xa,
          text: "Ok",
          onClick: t[6]
        },
        {
          icon: zo,
          text: "Repair manually instead",
          onClick: t[33]
        }
      ]
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.actions = i[0] ? [] : [
        {
          icon: xa,
          text: "Ok",
          onClick: i[6]
        },
        {
          icon: zo,
          text: "Repair manually instead",
          onClick: i[33]
        }
      ]), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function kJ(t) {
  let e, n, i, r, o, s, l, a = t[1] && Pw(t);
  const f = [gJ, mJ], c = [];
  function u(h, d) {
    return h[23] ? 1 : 0;
  }
  return i = u(t), r = c[i] = f[i](t), {
    c() {
      e = O("div"), a && a.c(), n = q(), r.c(), m(e, "class", "jse-table-mode svelte-hs49xj"), pe(e, "no-main-menu", !t[1]);
    },
    m(h, d) {
      B(h, e, d), a && a.m(e, null), w(e, n), c[i].m(e, null), t[72](e), o = !0, s || (l = [
        X(e, "mousedown", t[27]),
        X(e, "keydown", t[34]),
        X(e, "contextmenu", t[29])
      ], s = !0);
    },
    p(h, d) {
      h[1] ? a ? (a.p(h, d), d[0] & 2 && k(a, 1)) : (a = Pw(h), a.c(), k(a, 1), a.m(e, n)) : a && (me(), E(a, 1, 1, () => {
        a = null;
      }), ge()), r.p(h, d), (!o || d[0] & 2) && pe(e, "no-main-menu", !h[1]);
    },
    i(h) {
      o || (k(a), k(r), o = !0);
    },
    o(h) {
      E(a), E(r), o = !1;
    },
    d(h) {
      h && j(e), a && a.d(), c[i].d(), t[72](null), s = !1, nt(l);
    }
  };
}
let qs = 18;
function CJ(t, e, n) {
  let i, r, o;
  const s = Wn("jsoneditor:TableMode"), { open: l } = Hn("simple-modal"), { openAbsolutePopup: a, closeAbsolutePopup: f } = Hn("absolute-popup"), c = CC(), u = wl(), h = wl(), d = typeof window > "u";
  s("isSSR:", d);
  let { readOnly: p } = e, { externalContent: g } = e, { mainMenuBar: _ } = e, { escapeControlCharacters: b } = e, { escapeUnicodeCharacters: y } = e, { flattenColumns: v } = e, { parser: M } = e, { parseMemoizeOne: A } = e, { validator: P } = e, { validationParser: S } = e, { indentation: D } = e, { onChange: x } = e, { onChangeMode: V } = e, { onRenderValue: R } = e, { onRenderMenu: W } = e, { onFocus: U } = e, { onBlur: C } = e, { onSortModal: L } = e, { onTransformModal: I } = e, { onJSONEditorModal: H } = e, N, T, K, ne;
  lg({
    onMount: Ei,
    onDestroy: Br,
    getWindow: () => Hl(T),
    hasFocus: () => Se && document.hasFocus() || Yc(T),
    onFocus: () => {
      Fe = !0, U && U();
    },
    onBlur: () => {
      Fe = !1, C && C();
    }
  });
  let z, Y, $, Q, Te, Se = !1, Fe = !1, Z = {}, Ce = 600, Ze = 0;
  function be(J) {
    K && K.scrollTo({
      top: K.scrollTop,
      left: K.scrollLeft
    });
  }
  function te() {
    de.sortedColumn && n(9, de = {
      ...de,
      sortedColumn: void 0
    });
  }
  function ke(J) {
    s("updateSelection", J);
    const ye = typeof J == "function" ? J(de.selection) : J;
    kt(ye, de.selection) || n(9, de = {
      ...de,
      selection: ye
    });
  }
  function Ue(J) {
    de.selection !== void 0 && (de.selection && Li(J, de.selection.anchorPath) && Li(J, de.selection.focusPath) || (s("clearing selection: path does not exist anymore", de.selection), n(9, de = {
      ...de,
      selection: Ks(J, de)
    })));
  }
  let de = $c(), Ve = !1;
  const De = void 0;
  function He(J) {
    if (p)
      return;
    s("onSortByHeader", J);
    const ye = [], qe = J.sortDirection === Bi.desc ? -1 : 1, Ke = PC(z, ye, J.path, qe);
    ot(Ke, (st, Jt) => ({
      state: {
        ...Jt,
        sortedColumn: J
      }
    }));
  }
  const at = SC({
    onChange: (J) => {
      n(18, mt = J);
    }
  });
  let mt = at.getState(), Ye;
  function Me(J) {
    const ye = { json: z }, qe = vl(J) ? J.text !== Y : !kt(ye.json, J.json);
    if (s("update external content", { isChanged: qe }), !qe)
      return;
    const Ke = { json: z, text: Y }, st = z, Jt = de, _n = Y, Nn = Ve;
    if (vl(J))
      try {
        n(7, z = A(J.text)), n(14, Y = J.text), n(17, Ve = !1), n(15, $ = void 0);
      } catch (qn) {
        try {
          n(7, z = A(Tr(J.text))), n(14, Y = J.text), n(17, Ve = !0), n(15, $ = void 0);
        } catch {
          n(7, z = void 0), n(14, Y = g.text), n(17, Ve = !1), n(15, $ = dh(Y, qn.message || qn.toString()));
        }
      }
    else
      n(7, z = J.json), n(14, Y = void 0), n(17, Ve = !1), n(15, $ = void 0);
    Ue(z), te(), ae({
      previousJson: st,
      previousState: Jt,
      previousText: _n,
      previousTextIsRepaired: Nn
    }), Gt(Ke, null);
  }
  function ae({ previousJson: J, previousState: ye, previousText: qe, previousTextIsRepaired: Ke }) {
    J === void 0 && qe === void 0 || (z !== void 0 ? J !== void 0 ? at.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: J
          }
        ],
        state: Zn(ye),
        json: void 0,
        text: qe,
        textIsRepaired: Ke
      },
      redo: {
        patch: [{ op: "replace", path: "", value: z }],
        state: Zn(de),
        json: void 0,
        text: Y,
        textIsRepaired: Ve
      }
    }) : at.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: qe,
        state: Zn(ye),
        textIsRepaired: Ke
      },
      redo: {
        patch: void 0,
        json: z,
        state: Zn(de),
        text: Y,
        textIsRepaired: Ve
      }
    }) : J !== void 0 && at.add({
      undo: {
        patch: void 0,
        json: J,
        state: Zn(ye),
        text: qe,
        textIsRepaired: Ke
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: Y,
        textIsRepaired: Ve,
        state: Zn(de)
      }
    }));
  }
  let ze = [];
  const ft = pf(MC);
  function bt(J, ye, qe, Ke) {
    $s(
      () => {
        let st;
        try {
          st = ft(J, ye, qe, Ke);
        } catch (Jt) {
          st = [
            {
              path: [],
              message: "Failed to validate: " + Jt.message,
              severity: jo.warning
            }
          ];
        }
        kt(st, ze) || (s("validationErrors changed:", st), n(10, ze = st));
      },
      (st) => s(`validationErrors updated in ${st} ms`)
    );
  }
  function gn() {
    return s("validate"), $ ? {
      parseError: $,
      isRepairable: !1
    } : (bt(z, P, M, S), { validationErrors: ze });
  }
  function Un(J, ye) {
    if (s("patch", J, ye), z === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const qe = { json: z }, Ke = z, st = de, Jt = Ve, _n = sC(z, J), Wt = U3(z, de, J).json, qn = Uq(de, J, Te), di = typeof ye == "function" ? ye(Wt, qn) : void 0;
    n(7, z = di && di.json !== void 0 ? di.json : Wt);
    const Vs = di && di.state !== void 0 ? di.state : qn;
    n(9, de = Vs), n(14, Y = void 0), n(17, Ve = !1), n(16, Q = void 0), at.add({
      undo: {
        patch: _n,
        json: void 0,
        text: void 0,
        state: Zn(st),
        textIsRepaired: Jt
      },
      redo: {
        patch: J,
        json: void 0,
        state: Zn(Vs),
        text: void 0,
        textIsRepaired: Ve
      }
    });
    const Fs = {
      json: z,
      previousJson: Ke,
      undo: _n,
      redo: J
    };
    return Gt(qe, Fs), Fs;
  }
  function ot(J, ye) {
    if (!p)
      return Un(J, ye);
  }
  function Gt(J, ye) {
    J.json === void 0 && (J == null ? void 0 : J.text) === void 0 || (Y !== void 0 ? x({ text: Y, json: void 0 }, J, { contentErrors: gn(), patchResult: ye }) : z !== void 0 && x({ text: void 0, json: z }, J, { contentErrors: gn(), patchResult: ye }));
  }
  function rn(J) {
    s("handleFind", J);
  }
  function ri(J) {
    s("pasted json as text", J), n(16, Q = J);
  }
  function se(J) {
    const ye = parseInt(J[0]), qe = [String(ye + 1), ...J.slice(1)];
    return Li(z, qe) ? Ot(qe, !1) : Ot(J, !1);
  }
  function ve() {
    ne && (ne.focus(), ne.select());
  }
  function ce(J) {
    n(68, Ze = J.target.scrollTop);
  }
  function _t(J) {
    const ye = J != null && J.target ? B3(J.target) : void 0;
    if (ye) {
      if (xo(de.selection) && Y3(de.selection, ye, Vt.value))
        return;
      ke(Ot(ye, !1)), ve(), J.preventDefault();
    }
  }
  function qt() {
    if (Lt(z) && !Mt(z) && !Mt(Te)) {
      const J = ["0", ...Te[0]];
      return Ot(J, !1);
    } else
      return;
  }
  function ct() {
    de.selection || ke(qt());
  }
  function Ft() {
    if (Ve && z !== void 0) {
      const J = de, ye = z, qe = Y, Ke = { json: z, text: Y }, st = Ve;
      n(14, Y = void 0), n(17, Ve = !1), Ue(z), ae({
        previousJson: ye,
        previousState: J,
        previousText: qe,
        previousTextIsRepaired: st
      }), Gt(Ke, null);
    }
    return { json: z, text: Y };
  }
  function bn(J, ye = !0) {
    const qe = Wd(J, Te, Z, qs), Ke = qe - Ze, st = Et(J);
    s("scrollTo", { path: J, top: qe, scrollTop: Ze, elem: st });
    const Jt = K.getBoundingClientRect();
    if (st && !ye) {
      const Nn = st.getBoundingClientRect();
      if (Nn.bottom > Jt.top && Nn.top < Jt.bottom)
        return;
    }
    const _n = -(Jt.height / 4);
    st ? c(st, {
      container: K,
      offset: _n,
      duration: Zd,
      callback: () => {
        It(J);
      }
    }) : c(Ke, {
      container: K,
      offset: _n,
      duration: Zd,
      callback: () => {
        Ci().then(() => {
          Wd(J, Te, Z, qs) !== qe ? bn(J, ye) : It(J);
        });
      }
    });
  }
  function Rt(J) {
    const { rowIndex: ye } = $o(J, Te), qe = Wd(J, Te, Z, qs), Ke = qe + (Z[ye] || qs), st = qs, Jt = K.getBoundingClientRect(), _n = Ze, Nn = Ze + Jt.height - st;
    if (Ke > Nn) {
      const Wt = Ke - Nn;
      n(12, K.scrollTop += Wt, K);
    }
    if (qe < _n) {
      const Wt = _n - qe;
      n(12, K.scrollTop -= Wt, K);
    }
  }
  function It(J) {
    const ye = Et(J);
    if (ye) {
      const qe = K.getBoundingClientRect(), Ke = ye.getBoundingClientRect();
      if (Ke.right > qe.right) {
        const st = Ke.right - qe.right;
        n(12, K.scrollLeft += st, K);
      }
      if (Ke.left < qe.left) {
        const st = qe.left - Ke.left;
        n(12, K.scrollLeft -= st, K);
      }
    }
  }
  function Nt(J) {
    Rt(J), It(J);
  }
  function Et(J) {
    return K ? K.querySelector(`td[data-path="${kl(J)}"]`) : null;
  }
  function xt({ anchor: J, left: ye, top: qe, width: Ke, height: st, offsetTop: Jt, offsetLeft: _n, showTip: Nn }) {
    const Wt = {
      json: z,
      documentState: de,
      parser: M,
      showTip: Nn,
      onEditValue: vn,
      onToggleEnforceString: ln,
      onCut: Ee,
      onCopy: dt,
      onPaste: zn,
      onRemove: Ht,
      onCloseContextMenu() {
        f(qn), ve();
      }
    };
    Se = !0;
    const qn = a(aJ, Wt, {
      left: ye,
      top: qe,
      offsetTop: Jt,
      offsetLeft: _n,
      width: Ke,
      height: st,
      anchor: J,
      closeOnOuterClick: !0,
      onClose: () => {
        Se = !1, ve();
      }
    });
  }
  function on(J) {
    if (!(p || xo(de.selection))) {
      if (J && (J.stopPropagation(), J.preventDefault()), J && J.type === "contextmenu" && J.target !== ne)
        xt({
          left: J.clientX,
          top: J.clientY,
          width: $r,
          height: Zr,
          showTip: !1
        });
      else {
        const ye = K == null ? void 0 : K.querySelector(".jse-table-cell.jse-selected-value");
        if (ye)
          xt({
            anchor: ye,
            offsetTop: 2,
            width: $r,
            height: Zr,
            showTip: !1
          });
        else {
          const qe = K == null ? void 0 : K.getBoundingClientRect();
          qe && xt({
            top: qe.top + 2,
            left: qe.left + 2,
            width: $r,
            height: Zr,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function sn(J) {
    p || xt({
      anchor: j3(J.target, "BUTTON"),
      offsetTop: 0,
      width: $r,
      height: Zr,
      showTip: !0
    });
  }
  function vn() {
    if (p || !de.selection)
      return;
    const J = de.selection.focusPath, ye = xe(z, J);
    tn(ye) ? Wi(J) : ke(Ot(J, !0));
  }
  function ln() {
    if (p || !yt(de.selection))
      return;
    const J = de.selection.focusPath, ye = Ae(J), qe = xe(z, J), Ke = !io(qe, de.enforceStringMap, ye, M), st = Ke ? String(qe) : xl(String(qe), M);
    s("handleToggleEnforceString", { enforceString: Ke, value: qe, updatedValue: st }), ot(
      [
        {
          op: "replace",
          path: ye,
          value: st
        }
      ],
      (Jt, _n) => ({
        state: W3(_n, ye, Ke)
      })
    );
  }
  async function oi() {
    s("apply pasted json", Q);
    const { path: J, contents: ye } = Q;
    ke(Ot(J, !1)), await Ci();
    const qe = [
      {
        op: "replace",
        path: Ae(J),
        value: ye
      }
    ];
    ot(qe);
  }
  function zn() {
    l(
      AC,
      {},
      {
        ...ks,
        styleWindow: { width: "450px" }
      },
      { onClose: () => ve() }
    );
  }
  function ue() {
    s("clear pasted json"), n(16, Q = void 0);
  }
  function _e() {
    V(Gn.text);
  }
  async function Ee(J) {
    await IC({
      json: z,
      documentState: de,
      indentation: J ? D : void 0,
      readOnly: p,
      parser: M,
      onPatch: ot
    });
  }
  async function dt(J = !0) {
    await NC({
      json: z,
      documentState: de,
      indentation: J ? D : void 0,
      parser: M
    });
  }
  function Ht() {
    jC({
      json: z,
      text: Y,
      documentState: de,
      keepSelection: !0,
      readOnly: p,
      onChange: x,
      onPatch: ot
    });
  }
  async function Ct(J) {
    await BC({
      char: J,
      selectInside: !1,
      refJsonEditor: T,
      json: z,
      documentState: de,
      readOnly: p,
      parser: M,
      onPatch: ot,
      onReplaceJson: uo,
      onSelect: ke
    });
  }
  function si(J) {
    const ye = Ko(J).replace(/^Command\+/, "Ctrl+");
    if (s("keydown", { combo: ye, key: J.key }), ye === "Ctrl+X" && (J.preventDefault(), Ee(!0)), ye === "Ctrl+Shift+X" && (J.preventDefault(), Ee(!1)), ye === "Ctrl+C" && (J.preventDefault(), dt(!0)), ye === "Ctrl+Shift+C" && (J.preventDefault(), dt(!1)), ye === "Ctrl+D" && J.preventDefault(), (ye === "Delete" || ye === "Backspace") && (J.preventDefault(), Ht()), ye === "Insert" && J.preventDefault(), ye === "Ctrl+A" && J.preventDefault(), ye === "Ctrl+Q" && on(J), ye === "Left" && (J.preventDefault(), ct(), de.selection)) {
      const Ke = zq(Te, de.selection);
      ke(Ke), Nt(Ke.focusPath);
    }
    if (ye === "Right" && (J.preventDefault(), ct(), de.selection)) {
      const Ke = Vq(Te, de.selection);
      ke(Ke), Nt(Ke.focusPath);
    }
    if (ye === "Up" && (J.preventDefault(), ct(), de.selection)) {
      const Ke = Lq(Te, de.selection);
      ke(Ke), Nt(Ke.focusPath);
    }
    if (ye === "Down" && (J.preventDefault(), ct(), de.selection)) {
      const Ke = xq(z, Te, de.selection);
      ke(Ke), Nt(Ke.focusPath);
    }
    if (ye === "Enter" && de.selection && yt(de.selection)) {
      J.preventDefault();
      const Ke = de.selection.focusPath, st = xe(z, Ke);
      tn(st) ? Wi(Ke) : p || ke({ ...de.selection, edit: !0 });
    }
    if (ye.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && de.selection) {
      J.preventDefault(), Ct(J.key);
      return;
    }
    if (ye === "Ctrl+Enter" && yt(de.selection)) {
      const Ke = xe(z, de.selection.focusPath);
      Zu(Ke) && window.open(String(Ke), "_blank");
    }
    ye === "Escape" && de.selection && (J.preventDefault(), ke(void 0)), ye === "Ctrl+F" && J.preventDefault(), ye === "Ctrl+H" && J.preventDefault(), ye === "Ctrl+Z" && (J.preventDefault(), ts()), ye === "Ctrl+Shift+Z" && (J.preventDefault(), xs());
  }
  function dr(J) {
    J.preventDefault();
    const ye = J.clipboardData.getData("text/plain");
    DC({
      clipboardText: ye,
      json: z,
      documentState: de,
      readOnly: p,
      parser: M,
      onPatch: ot,
      onChangeText: pr,
      openRepairModal: Gl
    });
  }
  function uo(J, ye) {
    const qe = de, Ke = z, st = Y, Jt = { json: z, text: Y }, _n = Ve, Nn = Ri(z, de, [], Sr), Wt = typeof ye == "function" ? ye(J, Nn) : void 0;
    n(7, z = Wt && Wt.json !== void 0 ? Wt.json : J), n(9, de = Wt && Wt.state !== void 0 ? Wt.state : Nn), n(14, Y = void 0), n(17, Ve = !1), Ue(z), ae({
      previousJson: Ke,
      previousState: qe,
      previousText: st,
      previousTextIsRepaired: _n
    }), Gt(Jt, null);
  }
  function pr(J, ye) {
    s("handleChangeText");
    const qe = de, Ke = z, st = Y, Jt = { json: z, text: Y }, _n = Ve;
    try {
      n(7, z = A(J)), n(9, de = Ri(z, de, [], Sr)), n(14, Y = void 0), n(17, Ve = !1);
    } catch {
      try {
        n(7, z = A(Tr(J))), n(9, de = Ri(z, de, [], Sr)), n(14, Y = J), n(17, Ve = !0);
      } catch {
        n(7, z = void 0), n(9, de = $c({ json: z, expand: Sr })), n(14, Y = J), n(17, Ve = !1);
      }
    }
    if (typeof ye == "function") {
      const Wt = ye(z, de);
      n(7, z = Wt && Wt.json ? Wt.json : z), n(9, de = Wt && Wt.state ? Wt.state : de);
    }
    Ue(z), ae({
      previousJson: Ke,
      previousState: qe,
      previousText: st,
      previousTextIsRepaired: _n
    }), Gt(Jt, null);
  }
  function ho(J) {
    s("select validation error", J), ke(Ot(J.path, !1)), bn(J.path);
  }
  function qr(J) {
    p || (Se = !0, L({
      id: u,
      json: z,
      rootPath: J,
      onSort: async ({ operations: ye, itemPath: qe, direction: Ke }) => {
        s("onSort", ye, J, qe, Ke), ot(ye, (st, Jt) => ({
          state: {
            ...Jt,
            sortedColumn: {
              path: qe,
              sortDirection: Ke === -1 ? Bi.desc : Bi.asc
            }
          }
        }));
      },
      onClose: () => {
        Se = !1, ve();
      }
    }));
  }
  function Jr({ id: J, rootPath: ye, onTransform: qe, onClose: Ke }) {
    Se = !0, I({
      id: J || h,
      json: z,
      rootPath: ye,
      onTransform: qe ? (st) => {
        qe({
          operations: st,
          json: z,
          transformedJson: ir(z, st)
        });
      } : (st) => {
        s("onTransform", ye, st), ot(st);
      },
      onClose: () => {
        Se = !1, ve(), Ke && Ke();
      }
    });
  }
  function Wi(J) {
    s("openJSONEditorModal", { path: J }), Se = !0, H({
      content: { json: xe(z, J) },
      path: J,
      onPatch: Ye.onPatch,
      onClose: () => {
        Se = !1, ve();
      }
    });
  }
  function Gl(J, ye) {
    l(
      TC,
      {
        text: J,
        onParse: hh,
        onRepair: M3,
        onApply: ye
      },
      {
        ...ks,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => ve() }
    );
  }
  function Xl() {
    qr([]);
  }
  function es() {
    Jr({ rootPath: [] });
  }
  function ts() {
    if (p || !at.getState().canUndo)
      return;
    const J = at.undo();
    if (!J)
      return;
    const ye = { json: z, text: Y };
    n(7, z = J.undo.patch ? ir(z, J.undo.patch) : J.undo.json), n(9, de = J.undo.state), n(14, Y = J.undo.text), n(17, Ve = J.undo.textIsRepaired), s("undo", { item: J, json: z });
    const qe = {
      json: z,
      previousJson: ye.json,
      redo: J.undo.patch,
      undo: J.redo.patch
    };
    Gt(ye, qe), ve(), de.selection && bn(de.selection.focusPath, !1);
  }
  function xs() {
    if (p || !at.getState().canRedo)
      return;
    const J = at.redo();
    if (!J)
      return;
    const ye = { json: z, text: Y };
    n(7, z = J.redo.patch ? ir(z, J.redo.patch) : J.redo.json), n(9, de = J.redo.state), n(14, Y = J.redo.text), n(17, Ve = J.redo.textIsRepaired), s("redo", { item: J, json: z });
    const qe = {
      json: z,
      previousJson: ye.json,
      redo: J.redo.patch,
      undo: J.undo.patch
    };
    Gt(ye, qe), ve(), de.selection && bn(de.selection.focusPath, !1);
  }
  function zs(J) {
    n(67, Ce = J.getBoundingClientRect().height);
  }
  function Ui(J, ye) {
    n(66, Z[ye] = J.getBoundingClientRect().height, Z);
  }
  function po(J, ye) {
    return ye ? ye.pointersMap[Ae(J)] === !0 : !1;
  }
  function mo(J) {
    ht[J ? "unshift" : "push"](() => {
      ne = J, n(13, ne);
    });
  }
  const vi = (J, ye) => Ui(ye, J);
  function In(J) {
    ht[J ? "unshift" : "push"](() => {
      K = J, n(12, K);
    });
  }
  function Kr(J) {
    ht[J ? "unshift" : "push"](() => {
      T = J, n(11, T);
    });
  }
  return t.$$set = (J) => {
    "readOnly" in J && n(0, p = J.readOnly), "externalContent" in J && n(45, g = J.externalContent), "mainMenuBar" in J && n(1, _ = J.mainMenuBar), "escapeControlCharacters" in J && n(46, b = J.escapeControlCharacters), "escapeUnicodeCharacters" in J && n(47, y = J.escapeUnicodeCharacters), "flattenColumns" in J && n(48, v = J.flattenColumns), "parser" in J && n(2, M = J.parser), "parseMemoizeOne" in J && n(49, A = J.parseMemoizeOne), "validator" in J && n(50, P = J.validator), "validationParser" in J && n(51, S = J.validationParser), "indentation" in J && n(3, D = J.indentation), "onChange" in J && n(52, x = J.onChange), "onChangeMode" in J && n(4, V = J.onChangeMode), "onRenderValue" in J && n(53, R = J.onRenderValue), "onRenderMenu" in J && n(5, W = J.onRenderMenu), "onFocus" in J && n(54, U = J.onFocus), "onBlur" in J && n(55, C = J.onBlur), "onSortModal" in J && n(56, L = J.onSortModal), "onTransformModal" in J && n(57, I = J.onTransformModal), "onJSONEditorModal" in J && n(58, H = J.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 98304 && n(65, N = Xm({
      escapeControlCharacters: b,
      escapeUnicodeCharacters: y
    })), t.$$.dirty[1] & 16384 && Me(g), t.$$.dirty[0] & 128 | t.$$.dirty[1] & 131072 && n(8, Te = Lt(z) ? Iq(z, v) : []), t.$$.dirty[0] & 384 && n(22, i = z && !Mt(Te)), t.$$.dirty[0] & 128 | t.$$.dirty[2] & 112 && n(21, r = jq(Ze, Ce, z, Z, qs)), t.$$.dirty[0] & 128 && be(), t.$$.dirty[0] & 645 | t.$$.dirty[1] & 4194304 | t.$$.dirty[2] & 8 && n(19, Ye = {
      readOnly: p,
      parser: M,
      normalization: N,
      getJson: () => z,
      getDocumentState: () => de,
      findElement: Et,
      findNextInside: se,
      focus: ve,
      onPatch: ot,
      onSelect: ke,
      onFind: rn,
      onPasteJson: ri,
      onRenderValue: R
    }), t.$$.dirty[0] & 132 | t.$$.dirty[1] & 1572864 && bt(z, P, M, S), t.$$.dirty[0] & 1280 && n(20, o = Fq(ze, Te));
  }, [
    p,
    _,
    M,
    D,
    V,
    W,
    Ft,
    z,
    Te,
    de,
    ze,
    T,
    K,
    ne,
    Y,
    $,
    Q,
    Ve,
    mt,
    Ye,
    o,
    r,
    i,
    d,
    De,
    He,
    ce,
    _t,
    xt,
    on,
    sn,
    oi,
    ue,
    _e,
    si,
    dr,
    ho,
    Wi,
    Xl,
    es,
    ts,
    xs,
    zs,
    Ui,
    po,
    g,
    b,
    y,
    v,
    A,
    P,
    S,
    x,
    R,
    U,
    C,
    L,
    I,
    H,
    gn,
    Un,
    ve,
    bn,
    Et,
    Jr,
    N,
    Z,
    Ce,
    Ze,
    mo,
    vi,
    In,
    Kr
  ];
}
class SJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      CJ,
      kJ,
      pt,
      {
        readOnly: 0,
        externalContent: 45,
        mainMenuBar: 1,
        escapeControlCharacters: 46,
        escapeUnicodeCharacters: 47,
        flattenColumns: 48,
        parser: 2,
        parseMemoizeOne: 49,
        validator: 50,
        validationParser: 51,
        indentation: 3,
        onChange: 52,
        onChangeMode: 4,
        onRenderValue: 53,
        onRenderMenu: 5,
        onFocus: 54,
        onBlur: 55,
        onSortModal: 56,
        onTransformModal: 57,
        onJSONEditorModal: 58,
        validate: 59,
        patch: 60,
        focus: 61,
        acceptAutoRepair: 6,
        scrollTo: 62,
        findElement: 63,
        openTransformModal: 64
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get validate() {
    return this.$$.ctx[59];
  }
  get patch() {
    return this.$$.ctx[60];
  }
  get focus() {
    return this.$$.ctx[61];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[6];
  }
  get scrollTo() {
    return this.$$.ctx[62];
  }
  get findElement() {
    return this.$$.ctx[63];
  }
  get openTransformModal() {
    return this.$$.ctx[64];
  }
}
const MJ = SJ;
function AJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    pathParser: t[15],
    onError: t[20],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onClassName: t[18],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new gg({ props: i }), t[43](e), {
    c() {
      oe(e.$$.fragment);
    },
    m(r, o) {
      ie(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 4 && (s.indentation = r[2]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 64 && (s.navigationBar = r[6]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 2048 && (s.parser = r[11]), o[0] & 4096 && (s.parseMemoizeOne = r[12]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 32768 && (s.pathParser = r[15]), o[0] & 1048576 && (s.onError = r[20]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 131072 && (s.onRenderValue = r[17]), o[0] & 262144 && (s.onClassName = r[18]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), o[0] & 33554432 && (s.onJSONEditorModal = r[25]), e.$set(s);
    },
    i(r) {
      n || (k(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[43](null), re(e, r);
    }
  };
}
function OJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    mainMenuBar: t[5],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    indentation: t[2],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new MJ({ props: i }), t[42](e), {
    c() {
      oe(e.$$.fragment);
    },
    m(r, o) {
      ie(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 1024 && (s.flattenColumns = r[10]), o[0] & 2048 && (s.parser = r[11]), o[0] & 4096 && (s.parseMemoizeOne = r[12]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 4 && (s.indentation = r[2]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 131072 && (s.onRenderValue = r[17]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), o[0] & 33554432 && (s.onJSONEditorModal = r[25]), e.$set(s);
    },
    i(r) {
      n || (k(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[42](null), re(e, r);
    }
  };
}
function TJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    tabSize: t[3],
    mainMenuBar: t[5],
    statusBar: t[7],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    validator: t[13],
    validationParser: t[14],
    onChange: t[16],
    onChangeMode: t[19],
    onError: t[20],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24]
  };
  return e = new Oq({ props: i }), t[41](e), {
    c() {
      oe(e.$$.fragment);
    },
    m(r, o) {
      ie(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 4 && (s.indentation = r[2]), o[0] & 8 && (s.tabSize = r[3]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 128 && (s.statusBar = r[7]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 2048 && (s.parser = r[11]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 1048576 && (s.onError = r[20]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), e.$set(s);
    },
    i(r) {
      n || (k(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[41](null), re(e, r);
    }
  };
}
function EJ(t) {
  let e, n, i, r;
  const o = [TJ, OJ, AJ], s = [];
  function l(a, f) {
    return a[4] === Gn.text || a[4] === "code" ? 0 : a[4] === Gn.table ? 1 : 2;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = tt();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), ge(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), k(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (k(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function PJ(t, e, n) {
  let i, { content: r } = e, { readOnly: o } = e, { indentation: s } = e, { tabSize: l } = e, { mode: a } = e, { mainMenuBar: f } = e, { navigationBar: c } = e, { statusBar: u } = e, { escapeControlCharacters: h } = e, { escapeUnicodeCharacters: d } = e, { flattenColumns: p } = e, { parser: g } = e, { parseMemoizeOne: _ } = e, { validator: b } = e, { validationParser: y } = e, { pathParser: v } = e, { onChange: M } = e, { onRenderValue: A } = e, { onClassName: P } = e, { onRenderMenu: S } = e, { onChangeMode: D } = e, { onError: x } = e, { onFocus: V } = e, { onBlur: R } = e, { onSortModal: W } = e, { onTransformModal: U } = e, { onJSONEditorModal: C } = e, L, I, H, N;
  const T = { separator: !0 };
  function K(be) {
    if (L)
      return L.patch(be);
    if (I)
      return I.patch(be);
    if (H)
      return H.patch(be);
  }
  function ne(be) {
    if (L)
      return L.expand(be);
    throw new Error(`Method expand is not available in mode "${a}"`);
  }
  function z(be) {
    if (H)
      H.openTransformModal(be);
    else if (L)
      L.openTransformModal(be);
    else if (I)
      I.openTransformModal(be);
    else
      throw new Error(`Method transform is not available in mode "${a}"`);
  }
  function Y() {
    if (H)
      return H.validate();
    if (L)
      return L.validate();
    if (I)
      return I.validate();
    throw new Error(`Method validate is not available in mode "${a}"`);
  }
  function $() {
    return L ? L.acceptAutoRepair() : r;
  }
  function Q(be) {
    if (L)
      return L.scrollTo(be);
    throw new Error(`Method scrollTo is not available in mode "${a}"`);
  }
  function Te(be) {
    if (L)
      return L.findElement(be);
    if (I)
      return I.findElement(be);
    throw new Error(`Method findElement is not available in mode "${a}"`);
  }
  function Se() {
    H ? H.focus() : L ? L.focus() : I && I.focus();
  }
  function Fe() {
    H && H.refresh();
  }
  function Z(be) {
    ht[be ? "unshift" : "push"](() => {
      H = be, n(28, H);
    });
  }
  function Ce(be) {
    ht[be ? "unshift" : "push"](() => {
      I = be, n(27, I);
    });
  }
  function Ze(be) {
    ht[be ? "unshift" : "push"](() => {
      L = be, n(26, L);
    });
  }
  return t.$$set = (be) => {
    "content" in be && n(0, r = be.content), "readOnly" in be && n(1, o = be.readOnly), "indentation" in be && n(2, s = be.indentation), "tabSize" in be && n(3, l = be.tabSize), "mode" in be && n(4, a = be.mode), "mainMenuBar" in be && n(5, f = be.mainMenuBar), "navigationBar" in be && n(6, c = be.navigationBar), "statusBar" in be && n(7, u = be.statusBar), "escapeControlCharacters" in be && n(8, h = be.escapeControlCharacters), "escapeUnicodeCharacters" in be && n(9, d = be.escapeUnicodeCharacters), "flattenColumns" in be && n(10, p = be.flattenColumns), "parser" in be && n(11, g = be.parser), "parseMemoizeOne" in be && n(12, _ = be.parseMemoizeOne), "validator" in be && n(13, b = be.validator), "validationParser" in be && n(14, y = be.validationParser), "pathParser" in be && n(15, v = be.pathParser), "onChange" in be && n(16, M = be.onChange), "onRenderValue" in be && n(17, A = be.onRenderValue), "onClassName" in be && n(18, P = be.onClassName), "onRenderMenu" in be && n(30, S = be.onRenderMenu), "onChangeMode" in be && n(19, D = be.onChangeMode), "onError" in be && n(20, x = be.onError), "onFocus" in be && n(21, V = be.onFocus), "onBlur" in be && n(22, R = be.onBlur), "onSortModal" in be && n(23, W = be.onSortModal), "onTransformModal" in be && n(24, U = be.onTransformModal), "onJSONEditorModal" in be && n(25, C = be.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 524304 && n(40, N = [
      {
        type: "button",
        text: "text",
        title: `Switch to text mode (current mode: ${a})`,
        className: "jse-group-button jse-first" + (a === Gn.text || a === "code" ? " jse-selected" : ""),
        onClick: () => D(Gn.text)
      },
      {
        type: "button",
        text: "tree",
        title: `Switch to tree mode (current mode: ${a})`,
        className: "jse-group-button " + (a === Gn.tree ? " jse-selected" : ""),
        onClick: () => D(Gn.tree)
      },
      {
        type: "button",
        text: "table",
        title: `Switch to table mode (current mode: ${a})`,
        className: "jse-group-button jse-last" + (a === Gn.table ? " jse-selected" : ""),
        onClick: () => D(Gn.table)
      }
    ]), t.$$.dirty[0] & 1073741824 | t.$$.dirty[1] & 512 && n(29, i = (be, te) => {
      const ke = uj(te[0]) ? N.concat(te) : N.concat(T, te);
      return S(be, ke) || ke;
    });
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    M,
    A,
    P,
    D,
    x,
    V,
    R,
    W,
    U,
    C,
    L,
    I,
    H,
    i,
    S,
    K,
    ne,
    z,
    Y,
    $,
    Q,
    Te,
    Se,
    Fe,
    N,
    Z,
    Ce,
    Ze
  ];
}
class RJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      PJ,
      EJ,
      Pt,
      {
        content: 0,
        readOnly: 1,
        indentation: 2,
        tabSize: 3,
        mode: 4,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        parseMemoizeOne: 12,
        validator: 13,
        validationParser: 14,
        pathParser: 15,
        onChange: 16,
        onRenderValue: 17,
        onClassName: 18,
        onRenderMenu: 30,
        onChangeMode: 19,
        onError: 20,
        onFocus: 21,
        onBlur: 22,
        onSortModal: 23,
        onTransformModal: 24,
        onJSONEditorModal: 25,
        patch: 31,
        expand: 32,
        transform: 33,
        validate: 34,
        acceptAutoRepair: 35,
        scrollTo: 36,
        findElement: 37,
        focus: 38,
        refresh: 39
      },
      null,
      [-1, -1]
    );
  }
  get patch() {
    return this.$$.ctx[31];
  }
  get expand() {
    return this.$$.ctx[32];
  }
  get transform() {
    return this.$$.ctx[33];
  }
  get validate() {
    return this.$$.ctx[34];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[35];
  }
  get scrollTo() {
    return this.$$.ctx[36];
  }
  get findElement() {
    return this.$$.ctx[37];
  }
  get focus() {
    return this.$$.ctx[38];
  }
  get refresh() {
    return this.$$.ctx[39];
  }
}
const I5 = RJ;
function Fw(t) {
  let e, n;
  return {
    c() {
      e = O("div"), n = le(t[19]), m(e, "class", "jse-error svelte-1hibiw3");
    },
    m(i, r) {
      B(i, e, r), w(e, n);
    },
    p(i, r) {
      r[0] & 524288 && Pe(n, i[19]);
    },
    d(i) {
      i && j(e);
    }
  };
}
function Hw(t) {
  let e, n, i, r, o, s;
  return n = new vt({ props: { data: nN } }), {
    c() {
      e = O("button"), oe(n.$$.fragment), i = le(" Back"), m(e, "type", "button"), m(e, "class", "jse-secondary svelte-1hibiw3");
    },
    m(l, a) {
      B(l, e, a), ie(n, e, null), w(e, i), r = !0, o || (s = X(e, "click", t[23]), o = !0);
    },
    p: fe,
    i(l) {
      r || (k(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), re(n), o = !1, s();
    }
  };
}
function IJ(t) {
  let e, n, i;
  return {
    c() {
      e = O("button"), e.textContent = "Close", m(e, "type", "button"), m(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, o) {
      B(r, e, o), n || (i = [
        X(e, "click", t[23]),
        _i(N5.call(null, e))
      ], n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, nt(i);
    }
  };
}
function NJ(t) {
  let e, n, i;
  return {
    c() {
      e = O("button"), e.textContent = "Apply", m(e, "type", "button"), m(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, o) {
      B(r, e, o), n || (i = [
        X(e, "click", t[22]),
        _i(N5.call(null, e))
      ], n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, nt(i);
    }
  };
}
function DJ(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b;
  n = new fg({
    props: {
      title: "Edit nested content " + (t[18].length > 1 ? ` (${t[18].length})` : ""),
      onClose: t[23]
    }
  }), h = new I5({
    props: {
      mode: et(t[18]).mode,
      content: et(t[18]).content,
      readOnly: t[0],
      indentation: t[1],
      tabSize: t[2],
      statusBar: t[5],
      mainMenuBar: t[3],
      navigationBar: t[4],
      escapeControlCharacters: t[6],
      escapeUnicodeCharacters: t[7],
      flattenColumns: t[8],
      parser: t[9],
      parseMemoizeOne: t[20],
      validator: t[10],
      validationParser: t[11],
      pathParser: t[12],
      onError: t[26],
      onChange: t[24],
      onChangeMode: t[25],
      onRenderValue: t[13],
      onClassName: t[14],
      onFocus: kr,
      onBlur: kr,
      onRenderMenu: t[15],
      onSortModal: t[16],
      onTransformModal: t[17],
      onJSONEditorModal: t[27]
    }
  });
  let y = t[19] && Fw(t), v = t[18].length > 1 && Hw(t);
  function M(S, D) {
    return S[0] ? IJ : NJ;
  }
  let A = M(t), P = A(t);
  return {
    c() {
      e = O("div"), oe(n.$$.fragment), i = q(), r = O("div"), o = O("div"), o.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Path</div>', s = q(), l = O("input"), a = q(), f = O("div"), f.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Contents</div>', c = q(), u = O("div"), oe(h.$$.fragment), d = q(), p = O("div"), y && y.c(), g = q(), v && v.c(), _ = q(), P.c(), m(o, "class", "jse-label svelte-1hibiw3"), m(l, "class", "jse-path svelte-1hibiw3"), m(l, "type", "text"), l.readOnly = !0, m(l, "title", "Selected path"), l.value = t[21], m(f, "class", "jse-label svelte-1hibiw3"), m(u, "class", "jse-modal-inline-editor svelte-1hibiw3"), m(p, "class", "jse-actions svelte-1hibiw3"), m(r, "class", "jse-modal-contents svelte-1hibiw3"), m(e, "class", "jse-modal jse-jsoneditor-modal svelte-1hibiw3");
    },
    m(S, D) {
      B(S, e, D), ie(n, e, null), w(e, i), w(e, r), w(r, o), w(r, s), w(r, l), w(r, a), w(r, f), w(r, c), w(r, u), ie(h, u, null), w(r, d), w(r, p), y && y.m(p, null), w(p, g), v && v.m(p, null), w(p, _), P.m(p, null), b = !0;
    },
    p(S, D) {
      const x = {};
      D[0] & 262144 && (x.title = "Edit nested content " + (S[18].length > 1 ? ` (${S[18].length})` : "")), n.$set(x), (!b || D[0] & 2097152 && l.value !== S[21]) && (l.value = S[21]);
      const V = {};
      D[0] & 262144 && (V.mode = et(S[18]).mode), D[0] & 262144 && (V.content = et(S[18]).content), D[0] & 1 && (V.readOnly = S[0]), D[0] & 2 && (V.indentation = S[1]), D[0] & 4 && (V.tabSize = S[2]), D[0] & 32 && (V.statusBar = S[5]), D[0] & 8 && (V.mainMenuBar = S[3]), D[0] & 16 && (V.navigationBar = S[4]), D[0] & 64 && (V.escapeControlCharacters = S[6]), D[0] & 128 && (V.escapeUnicodeCharacters = S[7]), D[0] & 256 && (V.flattenColumns = S[8]), D[0] & 512 && (V.parser = S[9]), D[0] & 1048576 && (V.parseMemoizeOne = S[20]), D[0] & 1024 && (V.validator = S[10]), D[0] & 2048 && (V.validationParser = S[11]), D[0] & 4096 && (V.pathParser = S[12]), D[0] & 8192 && (V.onRenderValue = S[13]), D[0] & 16384 && (V.onClassName = S[14]), D[0] & 32768 && (V.onRenderMenu = S[15]), D[0] & 65536 && (V.onSortModal = S[16]), D[0] & 131072 && (V.onTransformModal = S[17]), h.$set(V), S[19] ? y ? y.p(S, D) : (y = Fw(S), y.c(), y.m(p, g)) : y && (y.d(1), y = null), S[18].length > 1 ? v ? (v.p(S, D), D[0] & 262144 && k(v, 1)) : (v = Hw(S), v.c(), k(v, 1), v.m(p, _)) : v && (me(), E(v, 1, 1, () => {
        v = null;
      }), ge()), A === (A = M(S)) && P ? P.p(S, D) : (P.d(1), P = A(S), P && (P.c(), P.m(p, null)));
    },
    i(S) {
      b || (k(n.$$.fragment, S), k(h.$$.fragment, S), k(v), b = !0);
    },
    o(S) {
      E(n.$$.fragment, S), E(h.$$.fragment, S), E(v), b = !1;
    },
    d(S) {
      S && j(e), re(n), re(h), y && y.d(), v && v.d(), P.d();
    }
  };
}
function N5(t) {
  t.focus();
}
function jJ(t, e, n) {
  let i, r, o;
  const s = Wn("jsoneditor:JSONEditorModal");
  let { content: l } = e, { path: a } = e, { onPatch: f } = e, { readOnly: c } = e, { indentation: u } = e, { tabSize: h } = e, { mainMenuBar: d } = e, { navigationBar: p } = e, { statusBar: g } = e, { escapeControlCharacters: _ } = e, { escapeUnicodeCharacters: b } = e, { flattenColumns: y } = e, { parser: v } = e, { validator: M } = e, { validationParser: A } = e, { pathParser: P } = e, { onRenderValue: S } = e, { onClassName: D } = e, { onRenderMenu: x } = e, { onSortModal: V } = e, { onTransformModal: R } = e;
  const { close: W } = Hn("simple-modal");
  let C = [{
    mode: I(l),
    content: l,
    relativePath: a
  }], L;
  function I(Y) {
    return Gm(Y) && Lt(Y.json) ? Gn.table : Gn.tree;
  }
  function H() {
    if (s("handleApply"), !c)
      try {
        n(19, L = void 0);
        const Y = [
          {
            op: "replace",
            path: Ae(et(C).relativePath),
            value: I0(et(C).content, v).json
          }
        ];
        if (C.length > 1) {
          const $ = C[C.length - 2].content, Q = I0($, v).json, Te = {
            json: ir(Q, Y)
          };
          n(18, C = wt(C)), T(Te);
        } else
          f(Y), W();
      } catch (Y) {
        n(19, L = Y.toString());
      }
  }
  function N() {
    s("handleClose"), C.length > 1 ? (n(18, C = wt(C)), n(19, L = void 0)) : W();
  }
  function T(Y) {
    s("handleChange", Y);
    const $ = { ...et(C), content: Y };
    n(18, C = [...wt(C), $]);
  }
  function K(Y) {
    s("handleChangeMode", Y);
    const $ = { ...et(C), mode: Y };
    n(18, C = [...wt(C), $]);
  }
  function ne(Y) {
    n(19, L = Y.toString()), console.error(Y);
  }
  function z({ content: Y, path: $ }) {
    s("handleJSONEditorModal", { content: Y, path: $ });
    const Q = {
      mode: I(Y),
      content: Y,
      relativePath: $
    };
    n(18, C = [...C, Q]);
  }
  return t.$$set = (Y) => {
    "content" in Y && n(28, l = Y.content), "path" in Y && n(29, a = Y.path), "onPatch" in Y && n(30, f = Y.onPatch), "readOnly" in Y && n(0, c = Y.readOnly), "indentation" in Y && n(1, u = Y.indentation), "tabSize" in Y && n(2, h = Y.tabSize), "mainMenuBar" in Y && n(3, d = Y.mainMenuBar), "navigationBar" in Y && n(4, p = Y.navigationBar), "statusBar" in Y && n(5, g = Y.statusBar), "escapeControlCharacters" in Y && n(6, _ = Y.escapeControlCharacters), "escapeUnicodeCharacters" in Y && n(7, b = Y.escapeUnicodeCharacters), "flattenColumns" in Y && n(8, y = Y.flattenColumns), "parser" in Y && n(9, v = Y.parser), "validator" in Y && n(10, M = Y.validator), "validationParser" in Y && n(11, A = Y.validationParser), "pathParser" in Y && n(12, P = Y.pathParser), "onRenderValue" in Y && n(13, S = Y.onRenderValue), "onClassName" in Y && n(14, D = Y.onClassName), "onRenderMenu" in Y && n(15, x = Y.onRenderMenu), "onSortModal" in Y && n(16, V = Y.onSortModal), "onTransformModal" in Y && n(17, R = Y.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 262144 && n(31, i = C.flatMap((Y) => Y.relativePath)), t.$$.dirty[1] & 1 && n(21, r = Mt(i) ? "(whole document)" : Vi(yi(i))), t.$$.dirty[0] & 512 && n(20, o = pf(v.parse));
  }, [
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    x,
    V,
    R,
    C,
    L,
    o,
    r,
    H,
    N,
    T,
    K,
    ne,
    z,
    l,
    a,
    f,
    i
  ];
}
class BJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      jJ,
      DJ,
      pt,
      {
        content: 28,
        path: 29,
        onPatch: 30,
        readOnly: 0,
        indentation: 1,
        tabSize: 2,
        mainMenuBar: 3,
        navigationBar: 4,
        statusBar: 5,
        escapeControlCharacters: 6,
        escapeUnicodeCharacters: 7,
        flattenColumns: 8,
        parser: 9,
        validator: 10,
        validationParser: 11,
        pathParser: 12,
        onRenderValue: 13,
        onClassName: 14,
        onRenderMenu: 15,
        onSortModal: 16,
        onTransformModal: 17
      },
      null,
      [-1, -1]
    );
  }
}
const LJ = BJ;
function xJ(t, e, n) {
  const i = Hn("simple-modal"), r = i.open, o = i.close;
  return [r, o];
}
class zJ extends Be {
  constructor(e) {
    super(), je(this, e, xJ, null, pt, { open: 0, close: 1 });
  }
  get open() {
    return this.$$.ctx[0];
  }
  get close() {
    return this.$$.ctx[1];
  }
}
const VJ = zJ;
function Ww(t) {
  let e, n, i = {
    mode: t[1],
    content: t[0],
    readOnly: t[2],
    indentation: t[3],
    tabSize: t[4],
    statusBar: t[7],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[24],
    validator: t[12],
    validationParser: t[13],
    pathParser: t[14],
    onError: t[18],
    onChange: t[25],
    onChangeMode: t[28],
    onRenderValue: t[15],
    onClassName: t[16],
    onFocus: t[26],
    onBlur: t[27],
    onRenderMenu: t[17],
    onSortModal: t[30],
    onTransformModal: t[29],
    onJSONEditorModal: t[31]
  };
  return e = new I5({ props: i }), t[56](e), {
    c() {
      oe(e.$$.fragment);
    },
    m(r, o) {
      ie(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 2 && (s.mode = r[1]), o[0] & 1 && (s.content = r[0]), o[0] & 4 && (s.readOnly = r[2]), o[0] & 8 && (s.indentation = r[3]), o[0] & 16 && (s.tabSize = r[4]), o[0] & 128 && (s.statusBar = r[7]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 64 && (s.navigationBar = r[6]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 1024 && (s.flattenColumns = r[10]), o[0] & 2048 && (s.parser = r[11]), o[0] & 16777216 && (s.parseMemoizeOne = r[24]), o[0] & 4096 && (s.validator = r[12]), o[0] & 8192 && (s.validationParser = r[13]), o[0] & 16384 && (s.pathParser = r[14]), o[0] & 262144 && (s.onError = r[18]), o[0] & 32768 && (s.onRenderValue = r[15]), o[0] & 65536 && (s.onClassName = r[16]), o[0] & 131072 && (s.onRenderMenu = r[17]), e.$set(s);
    },
    i(r) {
      n || (k(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[56](null), re(e, r);
    }
  };
}
function FJ(t) {
  let e, n, i, r, o = t[19], s;
  function l(c) {
    t[55](c);
  }
  let a = {};
  t[22] !== void 0 && (a.open = t[22]), e = new VJ({ props: a }), ht.push(() => Qi(e, "open", l, t[22]));
  let f = Ww(t);
  return {
    c() {
      oe(e.$$.fragment), i = q(), r = O("div"), f.c(), m(r, "class", "jse-main svelte-16j5kem"), pe(r, "jse-focus", t[20]);
    },
    m(c, u) {
      ie(e, c, u), B(c, i, u), B(c, r, u), f.m(r, null), s = !0;
    },
    p(c, u) {
      const h = {};
      !n && u[0] & 4194304 && (n = !0, h.open = c[22], Xi(() => n = !1)), e.$set(h), u[0] & 524288 && pt(o, o = c[19]) ? (me(), E(f, 1, 1, fe), ge(), f = Ww(c), f.c(), k(f, 1), f.m(r, null)) : f.p(c, u), (!s || u[0] & 1048576) && pe(r, "jse-focus", c[20]);
    },
    i(c) {
      s || (k(e.$$.fragment, c), k(f), s = !0);
    },
    o(c) {
      E(e.$$.fragment, c), E(f), s = !1;
    },
    d(c) {
      re(e, c), c && j(i), c && j(r), f.d(c);
    }
  };
}
function HJ(t) {
  let e, n;
  return e = new Ak({
    props: {
      $$slots: { default: [FJ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 25165823 | r[1] & 268435456 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function WJ(t) {
  var o;
  let e, n;
  const i = [
    {
      show: (o = t[23]) == null ? void 0 : o.component
    },
    F1
  ];
  let r = {
    $$slots: { default: [HJ] },
    $$scope: { ctx: t }
  };
  for (let s = 0; s < i.length; s += 1)
    r = Jo(r, i[s]);
  return e = new Ak({ props: r }), e.$on("close", t[32]), {
    c() {
      oe(e.$$.fragment);
    },
    m(s, l) {
      ie(e, s, l), n = !0;
    },
    p(s, l) {
      var f;
      const a = l[0] & 8388608 ? Ns(i, [
        l[0] & 8388608 && {
          show: (f = s[23]) == null ? void 0 : f.component
        },
        l & 0 && Qu(F1)
      ]) : {};
      l[0] & 25165823 | l[1] & 268435456 && (a.$$scope = { dirty: l, ctx: s }), e.$set(a);
    },
    i(s) {
      n || (k(e.$$.fragment, s), n = !0);
    },
    o(s) {
      E(e.$$.fragment, s), n = !1;
    },
    d(s) {
      re(e, s);
    }
  };
}
function UJ(t) {
  let e, n;
  return e = new x3({
    props: {
      $$slots: { default: [WJ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 33554431 | r[1] & 268435456 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function D5(t) {
  this.$set(t);
}
function j5() {
  this.$destroy();
}
function qJ(t, e, n) {
  let i;
  const r = Wn("jsoneditor:Main");
  let { content: o = { text: "" } } = e, { readOnly: s = !1 } = e, { indentation: l = 2 } = e, { tabSize: a = 4 } = e, { mode: f = Gn.tree } = e, { mainMenuBar: c = !0 } = e, { navigationBar: u = !0 } = e, { statusBar: h = !0 } = e, { escapeControlCharacters: d = !1 } = e, { escapeUnicodeCharacters: p = !1 } = e, { flattenColumns: g = !0 } = e, { parser: _ = JSON } = e, { validator: b = null } = e, { validationParser: y = JSON } = e, { pathParser: v = {
    parse: sR,
    stringify: yi
  } } = e, { queryLanguages: M = [pR] } = e, { queryLanguageId: A = M[0].id } = e, { onChangeQueryLanguage: P = kr } = e, { onChange: S = null } = e, { onRenderValue: D = YI } = e, { onClassName: x = () => {
  } } = e, { onRenderMenu: V = kr } = e, { onChangeMode: R = kr } = e, { onError: W = (ae) => {
    console.error(ae), alert(ae.toString());
  } } = e, { onFocus: U = kr } = e, { onBlur: C = kr } = e, L = ma(), I = !1, H, N, T = null, K = _;
  function ne() {
    return o;
  }
  function z(ae) {
    r("set");
    const ze = ld(ae);
    if (ze)
      throw new Error(ze);
    n(19, L = ma()), n(0, o = ae);
  }
  function Y(ae) {
    r("update");
    const ze = ld(ae);
    if (ze)
      throw new Error(ze);
    n(0, o = ae);
  }
  function $(ae) {
    if (vl(o))
      try {
        n(0, o = {
          json: _.parse(o.text),
          text: void 0
        });
      } catch {
        throw new Error("Cannot apply patch: current document contains invalid JSON");
      }
    return H.patch(ae);
  }
  function Q(ae) {
    H.expand(ae);
  }
  function Te(ae) {
    H.transform(ae);
  }
  function Se() {
    return H.validate();
  }
  function Fe() {
    return H.acceptAutoRepair();
  }
  function Z(ae) {
    return H.scrollTo(ae);
  }
  function Ce(ae) {
    return H.findElement(ae);
  }
  function Ze() {
    H.focus();
  }
  function be() {
    H.refresh();
  }
  function te(ae, ze, ft) {
    n(0, o = ae), S && S(ae, ze, ft);
  }
  function ke() {
    n(20, I = !0), U && U();
  }
  function Ue() {
    n(20, I = !1), C && C();
  }
  async function de(ae) {
    f !== ae && (n(1, f = ae), await Ci(), Ze(), R(ae));
  }
  function Ve(ae) {
    r("handleChangeQueryLanguage", ae), n(33, A = ae), P(ae);
  }
  function De({ id: ae, json: ze, rootPath: ft, onTransform: bt, onClose: gn }) {
    s || N(
      Cx,
      {
        id: ae,
        json: ze,
        rootPath: ft,
        indentation: l,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        parser: _,
        parseMemoizeOne: i,
        validationParser: y,
        pathParser: v,
        queryLanguages: M,
        queryLanguageId: A,
        onChangeQueryLanguage: Ve,
        onRenderValue: D,
        onClassName: x,
        onTransform: bt
      },
      R6,
      { onClose: gn }
    );
  }
  function He({ id: ae, json: ze, rootPath: ft, onSort: bt, onClose: gn }) {
    s || N(Tx, { id: ae, json: ze, rootPath: ft, onSort: bt }, P6, { onClose: gn });
  }
  function at({ content: ae, path: ze, onPatch: ft, onClose: bt }) {
    r("onJSONEditorModal", { content: ae, path: ze }), n(23, T = {
      component: Mk(LJ, {
        content: ae,
        path: ze,
        onPatch: ft,
        readOnly: s,
        indentation: l,
        tabSize: a,
        mainMenuBar: c,
        navigationBar: u,
        statusBar: h,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        flattenColumns: g,
        parser: _,
        validator: void 0,
        validationParser: y,
        pathParser: v,
        onRenderValue: D,
        onClassName: x,
        onRenderMenu: V,
        onSortModal: He,
        onTransformModal: De
      }),
      callbacks: { onClose: bt }
    });
  }
  function mt() {
    var ae;
    (ae = T == null ? void 0 : T.callbacks) == null || ae.onClose(), n(23, T = null);
  }
  function Ye(ae) {
    N = ae, n(22, N);
  }
  function Me(ae) {
    ht[ae ? "unshift" : "push"](() => {
      H = ae, n(21, H);
    });
  }
  return t.$$set = (ae) => {
    "content" in ae && n(0, o = ae.content), "readOnly" in ae && n(2, s = ae.readOnly), "indentation" in ae && n(3, l = ae.indentation), "tabSize" in ae && n(4, a = ae.tabSize), "mode" in ae && n(1, f = ae.mode), "mainMenuBar" in ae && n(5, c = ae.mainMenuBar), "navigationBar" in ae && n(6, u = ae.navigationBar), "statusBar" in ae && n(7, h = ae.statusBar), "escapeControlCharacters" in ae && n(8, d = ae.escapeControlCharacters), "escapeUnicodeCharacters" in ae && n(9, p = ae.escapeUnicodeCharacters), "flattenColumns" in ae && n(10, g = ae.flattenColumns), "parser" in ae && n(11, _ = ae.parser), "validator" in ae && n(12, b = ae.validator), "validationParser" in ae && n(13, y = ae.validationParser), "pathParser" in ae && n(14, v = ae.pathParser), "queryLanguages" in ae && n(34, M = ae.queryLanguages), "queryLanguageId" in ae && n(33, A = ae.queryLanguageId), "onChangeQueryLanguage" in ae && n(35, P = ae.onChangeQueryLanguage), "onChange" in ae && n(36, S = ae.onChange), "onRenderValue" in ae && n(15, D = ae.onRenderValue), "onClassName" in ae && n(16, x = ae.onClassName), "onRenderMenu" in ae && n(17, V = ae.onRenderMenu), "onChangeMode" in ae && n(37, R = ae.onChangeMode), "onError" in ae && n(18, W = ae.onError), "onFocus" in ae && n(38, U = ae.onFocus), "onBlur" in ae && n(39, C = ae.onBlur);
  }, t.$$.update = () => {
    if (t.$$.dirty[0] & 2049 | t.$$.dirty[1] & 8388608 && (B9(_, K) || (r("parser changed, recreate editor"), Gm(o) && n(0, o = {
      json: _.parse(K.stringify(o.json))
    }), n(54, K = _), n(19, L = ma()))), t.$$.dirty[0] & 1) {
      const ae = ld(o);
      ae && console.error("Error: " + ae);
    }
    t.$$.dirty[0] & 2048 && n(24, i = pf(_.parse)), t.$$.dirty[0] & 2 && (r("mode changed to", f), f === "code" && console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'));
  }, [
    o,
    f,
    s,
    l,
    a,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    D,
    x,
    V,
    W,
    L,
    I,
    H,
    N,
    T,
    i,
    te,
    ke,
    Ue,
    de,
    De,
    He,
    at,
    mt,
    A,
    M,
    P,
    S,
    R,
    U,
    C,
    ne,
    z,
    Y,
    $,
    Q,
    Te,
    Se,
    Fe,
    Z,
    Ce,
    Ze,
    be,
    D5,
    j5,
    K,
    Ye,
    Me
  ];
}
class JJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      qJ,
      UJ,
      pt,
      {
        content: 0,
        readOnly: 2,
        indentation: 3,
        tabSize: 4,
        mode: 1,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        validator: 12,
        validationParser: 13,
        pathParser: 14,
        queryLanguages: 34,
        queryLanguageId: 33,
        onChangeQueryLanguage: 35,
        onChange: 36,
        onRenderValue: 15,
        onClassName: 16,
        onRenderMenu: 17,
        onChangeMode: 37,
        onError: 18,
        onFocus: 38,
        onBlur: 39,
        get: 40,
        set: 41,
        update: 42,
        patch: 43,
        expand: 44,
        transform: 45,
        validate: 46,
        acceptAutoRepair: 47,
        scrollTo: 48,
        findElement: 49,
        focus: 50,
        refresh: 51,
        updateProps: 52,
        destroy: 53
      },
      null,
      [-1, -1]
    );
  }
  get get() {
    return this.$$.ctx[40];
  }
  get set() {
    return this.$$.ctx[41];
  }
  get update() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get expand() {
    return this.$$.ctx[44];
  }
  get transform() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[47];
  }
  get scrollTo() {
    return this.$$.ctx[48];
  }
  get findElement() {
    return this.$$.ctx[49];
  }
  get focus() {
    return this.$$.ctx[50];
  }
  get refresh() {
    return this.$$.ctx[51];
  }
  get updateProps() {
    return D5;
  }
  get destroy() {
    return j5;
  }
}
const KJ = JJ;
function B5() {
  return {
    async: !1,
    baseUrl: null,
    breaks: !1,
    extensions: null,
    gfm: !0,
    headerIds: !0,
    headerPrefix: "",
    highlight: null,
    langPrefix: "language-",
    mangle: !0,
    pedantic: !1,
    renderer: null,
    sanitize: !1,
    sanitizer: null,
    silent: !1,
    smartypants: !1,
    tokenizer: null,
    walkTokens: null,
    xhtml: !1
  };
}
let Kl = B5();
function GJ(t) {
  Kl = t;
}
const L5 = /[&<>"']/, XJ = new RegExp(L5.source, "g"), x5 = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/, QJ = new RegExp(x5.source, "g"), YJ = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, Uw = (t) => YJ[t];
function Kn(t, e) {
  if (e) {
    if (L5.test(t))
      return t.replace(XJ, Uw);
  } else if (x5.test(t))
    return t.replace(QJ, Uw);
  return t;
}
const ZJ = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function z5(t) {
  return t.replace(ZJ, (e, n) => (n = n.toLowerCase(), n === "colon" ? ":" : n.charAt(0) === "#" ? n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1)) : ""));
}
const $J = /(^|[^\[])\^/g;
function Kt(t, e) {
  t = typeof t == "string" ? t : t.source, e = e || "";
  const n = {
    replace: (i, r) => (r = r.source || r, r = r.replace($J, "$1"), t = t.replace(i, r), n),
    getRegex: () => new RegExp(t, e)
  };
  return n;
}
const eK = /[^\w:]/g, tK = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function qw(t, e, n) {
  if (t) {
    let i;
    try {
      i = decodeURIComponent(z5(n)).replace(eK, "").toLowerCase();
    } catch {
      return null;
    }
    if (i.indexOf("javascript:") === 0 || i.indexOf("vbscript:") === 0 || i.indexOf("data:") === 0)
      return null;
  }
  e && !tK.test(n) && (n = oK(e, n));
  try {
    n = encodeURI(n).replace(/%25/g, "%");
  } catch {
    return null;
  }
  return n;
}
const cc = {}, nK = /^[^:]+:\/*[^/]*$/, iK = /^([^:]+:)[\s\S]*$/, rK = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function oK(t, e) {
  cc[" " + t] || (nK.test(t) ? cc[" " + t] = t + "/" : cc[" " + t] = Ic(t, "/", !0)), t = cc[" " + t];
  const n = t.indexOf(":") === -1;
  return e.substring(0, 2) === "//" ? n ? e : t.replace(iK, "$1") + e : e.charAt(0) === "/" ? n ? e : t.replace(rK, "$1") + e : t + e;
}
const zu = { exec: function() {
} };
function ur(t) {
  let e = 1, n, i;
  for (; e < arguments.length; e++) {
    n = arguments[e];
    for (i in n)
      Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
  }
  return t;
}
function Jw(t, e) {
  const n = t.replace(/\|/g, (o, s, l) => {
    let a = !1, f = s;
    for (; --f >= 0 && l[f] === "\\"; )
      a = !a;
    return a ? "|" : " |";
  }), i = n.split(/ \|/);
  let r = 0;
  if (i[0].trim() || i.shift(), i.length > 0 && !i[i.length - 1].trim() && i.pop(), i.length > e)
    i.splice(e);
  else
    for (; i.length < e; )
      i.push("");
  for (; r < i.length; r++)
    i[r] = i[r].trim().replace(/\\\|/g, "|");
  return i;
}
function Ic(t, e, n) {
  const i = t.length;
  if (i === 0)
    return "";
  let r = 0;
  for (; r < i; ) {
    const o = t.charAt(i - r - 1);
    if (o === e && !n)
      r++;
    else if (o !== e && n)
      r++;
    else
      break;
  }
  return t.slice(0, i - r);
}
function sK(t, e) {
  if (t.indexOf(e[1]) === -1)
    return -1;
  const n = t.length;
  let i = 0, r = 0;
  for (; r < n; r++)
    if (t[r] === "\\")
      r++;
    else if (t[r] === e[0])
      i++;
    else if (t[r] === e[1] && (i--, i < 0))
      return r;
  return -1;
}
function V5(t) {
  t && t.sanitize && !t.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
}
function Kw(t, e) {
  if (e < 1)
    return "";
  let n = "";
  for (; e > 1; )
    e & 1 && (n += t), e >>= 1, t += t;
  return n + t;
}
function Gw(t, e, n, i) {
  const r = e.href, o = e.title ? Kn(e.title) : null, s = t[1].replace(/\\([\[\]])/g, "$1");
  if (t[0].charAt(0) !== "!") {
    i.state.inLink = !0;
    const l = {
      type: "link",
      raw: n,
      href: r,
      title: o,
      text: s,
      tokens: i.inlineTokens(s)
    };
    return i.state.inLink = !1, l;
  }
  return {
    type: "image",
    raw: n,
    href: r,
    title: o,
    text: Kn(s)
  };
}
function lK(t, e) {
  const n = t.match(/^(\s+)(?:```)/);
  if (n === null)
    return e;
  const i = n[1];
  return e.split(`
`).map((r) => {
    const o = r.match(/^\s+/);
    if (o === null)
      return r;
    const [s] = o;
    return s.length >= i.length ? r.slice(i.length) : r;
  }).join(`
`);
}
class Yg {
  constructor(e) {
    this.options = e || Kl;
  }
  space(e) {
    const n = this.rules.block.newline.exec(e);
    if (n && n[0].length > 0)
      return {
        type: "space",
        raw: n[0]
      };
  }
  code(e) {
    const n = this.rules.block.code.exec(e);
    if (n) {
      const i = n[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: n[0],
        codeBlockStyle: "indented",
        text: this.options.pedantic ? i : Ic(i, `
`)
      };
    }
  }
  fences(e) {
    const n = this.rules.block.fences.exec(e);
    if (n) {
      const i = n[0], r = lK(i, n[3] || "");
      return {
        type: "code",
        raw: i,
        lang: n[2] ? n[2].trim().replace(this.rules.inline._escapes, "$1") : n[2],
        text: r
      };
    }
  }
  heading(e) {
    const n = this.rules.block.heading.exec(e);
    if (n) {
      let i = n[2].trim();
      if (/#$/.test(i)) {
        const r = Ic(i, "#");
        (this.options.pedantic || !r || / $/.test(r)) && (i = r.trim());
      }
      return {
        type: "heading",
        raw: n[0],
        depth: n[1].length,
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  hr(e) {
    const n = this.rules.block.hr.exec(e);
    if (n)
      return {
        type: "hr",
        raw: n[0]
      };
  }
  blockquote(e) {
    const n = this.rules.block.blockquote.exec(e);
    if (n) {
      const i = n[0].replace(/^ *>[ \t]?/gm, ""), r = this.lexer.state.top;
      this.lexer.state.top = !0;
      const o = this.lexer.blockTokens(i);
      return this.lexer.state.top = r, {
        type: "blockquote",
        raw: n[0],
        tokens: o,
        text: i
      };
    }
  }
  list(e) {
    let n = this.rules.block.list.exec(e);
    if (n) {
      let i, r, o, s, l, a, f, c, u, h, d, p, g = n[1].trim();
      const _ = g.length > 1, b = {
        type: "list",
        raw: "",
        ordered: _,
        start: _ ? +g.slice(0, -1) : "",
        loose: !1,
        items: []
      };
      g = _ ? `\\d{1,9}\\${g.slice(-1)}` : `\\${g}`, this.options.pedantic && (g = _ ? g : "[*+-]");
      const y = new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      for (; e && (p = !1, !(!(n = y.exec(e)) || this.rules.block.hr.test(e))); ) {
        if (i = n[0], e = e.substring(i.length), c = n[2].split(`
`, 1)[0].replace(/^\t+/, (M) => " ".repeat(3 * M.length)), u = e.split(`
`, 1)[0], this.options.pedantic ? (s = 2, d = c.trimLeft()) : (s = n[2].search(/[^ ]/), s = s > 4 ? 1 : s, d = c.slice(s), s += n[1].length), a = !1, !c && /^ *$/.test(u) && (i += u + `
`, e = e.substring(u.length + 1), p = !0), !p) {
          const M = new RegExp(`^ {0,${Math.min(3, s - 1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`), A = new RegExp(`^ {0,${Math.min(3, s - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`), P = new RegExp(`^ {0,${Math.min(3, s - 1)}}(?:\`\`\`|~~~)`), S = new RegExp(`^ {0,${Math.min(3, s - 1)}}#`);
          for (; e && (h = e.split(`
`, 1)[0], u = h, this.options.pedantic && (u = u.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ")), !(P.test(u) || S.test(u) || M.test(u) || A.test(e))); ) {
            if (u.search(/[^ ]/) >= s || !u.trim())
              d += `
` + u.slice(s);
            else {
              if (a || c.search(/[^ ]/) >= 4 || P.test(c) || S.test(c) || A.test(c))
                break;
              d += `
` + u;
            }
            !a && !u.trim() && (a = !0), i += h + `
`, e = e.substring(h.length + 1), c = u.slice(s);
          }
        }
        b.loose || (f ? b.loose = !0 : /\n *\n *$/.test(i) && (f = !0)), this.options.gfm && (r = /^\[[ xX]\] /.exec(d), r && (o = r[0] !== "[ ] ", d = d.replace(/^\[[ xX]\] +/, ""))), b.items.push({
          type: "list_item",
          raw: i,
          task: !!r,
          checked: o,
          loose: !1,
          text: d
        }), b.raw += i;
      }
      b.items[b.items.length - 1].raw = i.trimRight(), b.items[b.items.length - 1].text = d.trimRight(), b.raw = b.raw.trimRight();
      const v = b.items.length;
      for (l = 0; l < v; l++)
        if (this.lexer.state.top = !1, b.items[l].tokens = this.lexer.blockTokens(b.items[l].text, []), !b.loose) {
          const M = b.items[l].tokens.filter((P) => P.type === "space"), A = M.length > 0 && M.some((P) => /\n.*\n/.test(P.raw));
          b.loose = A;
        }
      if (b.loose)
        for (l = 0; l < v; l++)
          b.items[l].loose = !0;
      return b;
    }
  }
  html(e) {
    const n = this.rules.block.html.exec(e);
    if (n) {
      const i = {
        type: "html",
        raw: n[0],
        pre: !this.options.sanitizer && (n[1] === "pre" || n[1] === "script" || n[1] === "style"),
        text: n[0]
      };
      if (this.options.sanitize) {
        const r = this.options.sanitizer ? this.options.sanitizer(n[0]) : Kn(n[0]);
        i.type = "paragraph", i.text = r, i.tokens = this.lexer.inline(r);
      }
      return i;
    }
  }
  def(e) {
    const n = this.rules.block.def.exec(e);
    if (n) {
      const i = n[1].toLowerCase().replace(/\s+/g, " "), r = n[2] ? n[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "", o = n[3] ? n[3].substring(1, n[3].length - 1).replace(this.rules.inline._escapes, "$1") : n[3];
      return {
        type: "def",
        tag: i,
        raw: n[0],
        href: r,
        title: o
      };
    }
  }
  table(e) {
    const n = this.rules.block.table.exec(e);
    if (n) {
      const i = {
        type: "table",
        header: Jw(n[1]).map((r) => ({ text: r })),
        align: n[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: n[3] && n[3].trim() ? n[3].replace(/\n[ \t]*$/, "").split(`
`) : []
      };
      if (i.header.length === i.align.length) {
        i.raw = n[0];
        let r = i.align.length, o, s, l, a;
        for (o = 0; o < r; o++)
          /^ *-+: *$/.test(i.align[o]) ? i.align[o] = "right" : /^ *:-+: *$/.test(i.align[o]) ? i.align[o] = "center" : /^ *:-+ *$/.test(i.align[o]) ? i.align[o] = "left" : i.align[o] = null;
        for (r = i.rows.length, o = 0; o < r; o++)
          i.rows[o] = Jw(i.rows[o], i.header.length).map((f) => ({ text: f }));
        for (r = i.header.length, s = 0; s < r; s++)
          i.header[s].tokens = this.lexer.inline(i.header[s].text);
        for (r = i.rows.length, s = 0; s < r; s++)
          for (a = i.rows[s], l = 0; l < a.length; l++)
            a[l].tokens = this.lexer.inline(a[l].text);
        return i;
      }
    }
  }
  lheading(e) {
    const n = this.rules.block.lheading.exec(e);
    if (n)
      return {
        type: "heading",
        raw: n[0],
        depth: n[2].charAt(0) === "=" ? 1 : 2,
        text: n[1],
        tokens: this.lexer.inline(n[1])
      };
  }
  paragraph(e) {
    const n = this.rules.block.paragraph.exec(e);
    if (n) {
      const i = n[1].charAt(n[1].length - 1) === `
` ? n[1].slice(0, -1) : n[1];
      return {
        type: "paragraph",
        raw: n[0],
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  text(e) {
    const n = this.rules.block.text.exec(e);
    if (n)
      return {
        type: "text",
        raw: n[0],
        text: n[0],
        tokens: this.lexer.inline(n[0])
      };
  }
  escape(e) {
    const n = this.rules.inline.escape.exec(e);
    if (n)
      return {
        type: "escape",
        raw: n[0],
        text: Kn(n[1])
      };
  }
  tag(e) {
    const n = this.rules.inline.tag.exec(e);
    if (n)
      return !this.lexer.state.inLink && /^<a /i.test(n[0]) ? this.lexer.state.inLink = !0 : this.lexer.state.inLink && /^<\/a>/i.test(n[0]) && (this.lexer.state.inLink = !1), !this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(n[0]) ? this.lexer.state.inRawBlock = !0 : this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0]) && (this.lexer.state.inRawBlock = !1), {
        type: this.options.sanitize ? "text" : "html",
        raw: n[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(n[0]) : Kn(n[0]) : n[0]
      };
  }
  link(e) {
    const n = this.rules.inline.link.exec(e);
    if (n) {
      const i = n[2].trim();
      if (!this.options.pedantic && /^</.test(i)) {
        if (!/>$/.test(i))
          return;
        const s = Ic(i.slice(0, -1), "\\");
        if ((i.length - s.length) % 2 === 0)
          return;
      } else {
        const s = sK(n[2], "()");
        if (s > -1) {
          const a = (n[0].indexOf("!") === 0 ? 5 : 4) + n[1].length + s;
          n[2] = n[2].substring(0, s), n[0] = n[0].substring(0, a).trim(), n[3] = "";
        }
      }
      let r = n[2], o = "";
      if (this.options.pedantic) {
        const s = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);
        s && (r = s[1], o = s[3]);
      } else
        o = n[3] ? n[3].slice(1, -1) : "";
      return r = r.trim(), /^</.test(r) && (this.options.pedantic && !/>$/.test(i) ? r = r.slice(1) : r = r.slice(1, -1)), Gw(n, {
        href: r && r.replace(this.rules.inline._escapes, "$1"),
        title: o && o.replace(this.rules.inline._escapes, "$1")
      }, n[0], this.lexer);
    }
  }
  reflink(e, n) {
    let i;
    if ((i = this.rules.inline.reflink.exec(e)) || (i = this.rules.inline.nolink.exec(e))) {
      let r = (i[2] || i[1]).replace(/\s+/g, " ");
      if (r = n[r.toLowerCase()], !r) {
        const o = i[0].charAt(0);
        return {
          type: "text",
          raw: o,
          text: o
        };
      }
      return Gw(i, r, i[0], this.lexer);
    }
  }
  emStrong(e, n, i = "") {
    let r = this.rules.inline.emStrong.lDelim.exec(e);
    if (!r || r[3] && i.match(/[\p{L}\p{N}]/u))
      return;
    const o = r[1] || r[2] || "";
    if (!o || o && (i === "" || this.rules.inline.punctuation.exec(i))) {
      const s = r[0].length - 1;
      let l, a, f = s, c = 0;
      const u = r[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      for (u.lastIndex = 0, n = n.slice(-1 * e.length + s); (r = u.exec(n)) != null; ) {
        if (l = r[1] || r[2] || r[3] || r[4] || r[5] || r[6], !l)
          continue;
        if (a = l.length, r[3] || r[4]) {
          f += a;
          continue;
        } else if ((r[5] || r[6]) && s % 3 && !((s + a) % 3)) {
          c += a;
          continue;
        }
        if (f -= a, f > 0)
          continue;
        a = Math.min(a, a + f + c);
        const h = e.slice(0, s + r.index + (r[0].length - l.length) + a);
        if (Math.min(s, a) % 2) {
          const p = h.slice(1, -1);
          return {
            type: "em",
            raw: h,
            text: p,
            tokens: this.lexer.inlineTokens(p)
          };
        }
        const d = h.slice(2, -2);
        return {
          type: "strong",
          raw: h,
          text: d,
          tokens: this.lexer.inlineTokens(d)
        };
      }
    }
  }
  codespan(e) {
    const n = this.rules.inline.code.exec(e);
    if (n) {
      let i = n[2].replace(/\n/g, " ");
      const r = /[^ ]/.test(i), o = /^ /.test(i) && / $/.test(i);
      return r && o && (i = i.substring(1, i.length - 1)), i = Kn(i, !0), {
        type: "codespan",
        raw: n[0],
        text: i
      };
    }
  }
  br(e) {
    const n = this.rules.inline.br.exec(e);
    if (n)
      return {
        type: "br",
        raw: n[0]
      };
  }
  del(e) {
    const n = this.rules.inline.del.exec(e);
    if (n)
      return {
        type: "del",
        raw: n[0],
        text: n[2],
        tokens: this.lexer.inlineTokens(n[2])
      };
  }
  autolink(e, n) {
    const i = this.rules.inline.autolink.exec(e);
    if (i) {
      let r, o;
      return i[2] === "@" ? (r = Kn(this.options.mangle ? n(i[1]) : i[1]), o = "mailto:" + r) : (r = Kn(i[1]), o = r), {
        type: "link",
        raw: i[0],
        text: r,
        href: o,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  url(e, n) {
    let i;
    if (i = this.rules.inline.url.exec(e)) {
      let r, o;
      if (i[2] === "@")
        r = Kn(this.options.mangle ? n(i[0]) : i[0]), o = "mailto:" + r;
      else {
        let s;
        do
          s = i[0], i[0] = this.rules.inline._backpedal.exec(i[0])[0];
        while (s !== i[0]);
        r = Kn(i[0]), i[1] === "www." ? o = "http://" + i[0] : o = i[0];
      }
      return {
        type: "link",
        raw: i[0],
        text: r,
        href: o,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  inlineText(e, n) {
    const i = this.rules.inline.text.exec(e);
    if (i) {
      let r;
      return this.lexer.state.inRawBlock ? r = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : Kn(i[0]) : i[0] : r = Kn(this.options.smartypants ? n(i[0]) : i[0]), {
        type: "text",
        raw: i[0],
        text: r
      };
    }
  }
}
const it = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: zu,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
it._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
it._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
it.def = Kt(it.def).replace("label", it._label).replace("title", it._title).getRegex();
it.bullet = /(?:[*+-]|\d{1,9}[.)])/;
it.listItemStart = Kt(/^( *)(bull) */).replace("bull", it.bullet).getRegex();
it.list = Kt(it.list).replace(/bull/g, it.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + it.def.source + ")").getRegex();
it._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
it._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
it.html = Kt(it.html, "i").replace("comment", it._comment).replace("tag", it._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
it.paragraph = Kt(it._paragraph).replace("hr", it.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", it._tag).getRegex();
it.blockquote = Kt(it.blockquote).replace("paragraph", it.paragraph).getRegex();
it.normal = ur({}, it);
it.gfm = ur({}, it.normal, {
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
});
it.gfm.table = Kt(it.gfm.table).replace("hr", it.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", it._tag).getRegex();
it.gfm.paragraph = Kt(it._paragraph).replace("hr", it.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", it.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", it._tag).getRegex();
it.pedantic = ur({}, it.normal, {
  html: Kt(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", it._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: zu,
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: Kt(it.normal._paragraph).replace("hr", it.hr).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", it.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
});
const We = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: zu,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: zu,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
We._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
We.punctuation = Kt(We.punctuation).replace(/punctuation/g, We._punctuation).getRegex();
We.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
We.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
We._comment = Kt(it._comment).replace("(?:-->|$)", "-->").getRegex();
We.emStrong.lDelim = Kt(We.emStrong.lDelim).replace(/punct/g, We._punctuation).getRegex();
We.emStrong.rDelimAst = Kt(We.emStrong.rDelimAst, "g").replace(/punct/g, We._punctuation).getRegex();
We.emStrong.rDelimUnd = Kt(We.emStrong.rDelimUnd, "g").replace(/punct/g, We._punctuation).getRegex();
We._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
We._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
We._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
We.autolink = Kt(We.autolink).replace("scheme", We._scheme).replace("email", We._email).getRegex();
We._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
We.tag = Kt(We.tag).replace("comment", We._comment).replace("attribute", We._attribute).getRegex();
We._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
We._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
We._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
We.link = Kt(We.link).replace("label", We._label).replace("href", We._href).replace("title", We._title).getRegex();
We.reflink = Kt(We.reflink).replace("label", We._label).replace("ref", it._label).getRegex();
We.nolink = Kt(We.nolink).replace("ref", it._label).getRegex();
We.reflinkSearch = Kt(We.reflinkSearch, "g").replace("reflink", We.reflink).replace("nolink", We.nolink).getRegex();
We.normal = ur({}, We);
We.pedantic = ur({}, We.normal, {
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: Kt(/^!?\[(label)\]\((.*?)\)/).replace("label", We._label).getRegex(),
  reflink: Kt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", We._label).getRegex()
});
We.gfm = ur({}, We.normal, {
  escape: Kt(We.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
});
We.gfm.url = Kt(We.gfm.url, "i").replace("email", We.gfm._extended_email).getRegex();
We.breaks = ur({}, We.gfm, {
  br: Kt(We.br).replace("{2,}", "*").getRegex(),
  text: Kt(We.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
});
function aK(t) {
  return t.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…");
}
function Xw(t) {
  let e = "", n, i;
  const r = t.length;
  for (n = 0; n < r; n++)
    i = t.charCodeAt(n), Math.random() > 0.5 && (i = "x" + i.toString(16)), e += "&#" + i + ";";
  return e;
}
class lo {
  constructor(e) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = e || Kl, this.options.tokenizer = this.options.tokenizer || new Yg(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = {
      inLink: !1,
      inRawBlock: !1,
      top: !0
    };
    const n = {
      block: it.normal,
      inline: We.normal
    };
    this.options.pedantic ? (n.block = it.pedantic, n.inline = We.pedantic) : this.options.gfm && (n.block = it.gfm, this.options.breaks ? n.inline = We.breaks : n.inline = We.gfm), this.tokenizer.rules = n;
  }
  static get rules() {
    return {
      block: it,
      inline: We
    };
  }
  static lex(e, n) {
    return new lo(n).lex(e);
  }
  static lexInline(e, n) {
    return new lo(n).inlineTokens(e);
  }
  lex(e) {
    e = e.replace(/\r\n|\r/g, `
`), this.blockTokens(e, this.tokens);
    let n;
    for (; n = this.inlineQueue.shift(); )
      this.inlineTokens(n.src, n.tokens);
    return this.tokens;
  }
  blockTokens(e, n = []) {
    this.options.pedantic ? e = e.replace(/\t/g, "    ").replace(/^ +$/gm, "") : e = e.replace(/^( *)(\t+)/gm, (l, a, f) => a + "    ".repeat(f.length));
    let i, r, o, s;
    for (; e; )
      if (!(this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((l) => (i = l.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.space(e)) {
          e = e.substring(i.raw.length), i.raw.length === 1 && n.length > 0 ? n[n.length - 1].raw += `
` : n.push(i);
          continue;
        }
        if (i = this.tokenizer.code(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.fences(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.heading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.hr(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.blockquote(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.list(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.html(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.def(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.raw, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : this.tokens.links[i.tag] || (this.tokens.links[i.tag] = {
            href: i.href,
            title: i.title
          });
          continue;
        }
        if (i = this.tokenizer.table(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.lheading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (o = e, this.options.extensions && this.options.extensions.startBlock) {
          let l = 1 / 0;
          const a = e.slice(1);
          let f;
          this.options.extensions.startBlock.forEach(function(c) {
            f = c.call({ lexer: this }, a), typeof f == "number" && f >= 0 && (l = Math.min(l, f));
          }), l < 1 / 0 && l >= 0 && (o = e.substring(0, l + 1));
        }
        if (this.state.top && (i = this.tokenizer.paragraph(o))) {
          r = n[n.length - 1], s && r.type === "paragraph" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i), s = o.length !== e.length, e = e.substring(i.raw.length);
          continue;
        }
        if (i = this.tokenizer.text(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && r.type === "text" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (e) {
          const l = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(l);
            break;
          } else
            throw new Error(l);
        }
      }
    return this.state.top = !0, n;
  }
  inline(e, n = []) {
    return this.inlineQueue.push({ src: e, tokens: n }), n;
  }
  inlineTokens(e, n = []) {
    let i, r, o, s = e, l, a, f;
    if (this.tokens.links) {
      const c = Object.keys(this.tokens.links);
      if (c.length > 0)
        for (; (l = this.tokenizer.rules.inline.reflinkSearch.exec(s)) != null; )
          c.includes(l[0].slice(l[0].lastIndexOf("[") + 1, -1)) && (s = s.slice(0, l.index) + "[" + Kw("a", l[0].length - 2) + "]" + s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (l = this.tokenizer.rules.inline.blockSkip.exec(s)) != null; )
      s = s.slice(0, l.index) + "[" + Kw("a", l[0].length - 2) + "]" + s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    for (; (l = this.tokenizer.rules.inline.escapedEmSt.exec(s)) != null; )
      s = s.slice(0, l.index + l[0].length - 2) + "++" + s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex), this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    for (; e; )
      if (a || (f = ""), a = !1, !(this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((c) => (i = c.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.escape(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.tag(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.link(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.reflink(e, this.tokens.links)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.emStrong(e, s, f)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.codespan(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.br(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.del(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.autolink(e, Xw)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (!this.state.inLink && (i = this.tokenizer.url(e, Xw))) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (o = e, this.options.extensions && this.options.extensions.startInline) {
          let c = 1 / 0;
          const u = e.slice(1);
          let h;
          this.options.extensions.startInline.forEach(function(d) {
            h = d.call({ lexer: this }, u), typeof h == "number" && h >= 0 && (c = Math.min(c, h));
          }), c < 1 / 0 && c >= 0 && (o = e.substring(0, c + 1));
        }
        if (i = this.tokenizer.inlineText(o, aK)) {
          e = e.substring(i.raw.length), i.raw.slice(-1) !== "_" && (f = i.raw.slice(-1)), a = !0, r = n[n.length - 1], r && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (e) {
          const c = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(c);
            break;
          } else
            throw new Error(c);
        }
      }
    return n;
  }
}
class Zg {
  constructor(e) {
    this.options = e || Kl;
  }
  code(e, n, i) {
    const r = (n || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const o = this.options.highlight(e, r);
      o != null && o !== e && (i = !0, e = o);
    }
    return e = e.replace(/\n$/, "") + `
`, r ? '<pre><code class="' + this.options.langPrefix + Kn(r) + '">' + (i ? e : Kn(e, !0)) + `</code></pre>
` : "<pre><code>" + (i ? e : Kn(e, !0)) + `</code></pre>
`;
  }
  blockquote(e) {
    return `<blockquote>
${e}</blockquote>
`;
  }
  html(e) {
    return e;
  }
  heading(e, n, i, r) {
    if (this.options.headerIds) {
      const o = this.options.headerPrefix + r.slug(i);
      return `<h${n} id="${o}">${e}</h${n}>
`;
    }
    return `<h${n}>${e}</h${n}>
`;
  }
  hr() {
    return this.options.xhtml ? `<hr/>
` : `<hr>
`;
  }
  list(e, n, i) {
    const r = n ? "ol" : "ul", o = n && i !== 1 ? ' start="' + i + '"' : "";
    return "<" + r + o + `>
` + e + "</" + r + `>
`;
  }
  listitem(e) {
    return `<li>${e}</li>
`;
  }
  checkbox(e) {
    return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  paragraph(e) {
    return `<p>${e}</p>
`;
  }
  table(e, n) {
    return n && (n = `<tbody>${n}</tbody>`), `<table>
<thead>
` + e + `</thead>
` + n + `</table>
`;
  }
  tablerow(e) {
    return `<tr>
${e}</tr>
`;
  }
  tablecell(e, n) {
    const i = n.header ? "th" : "td";
    return (n.align ? `<${i} align="${n.align}">` : `<${i}>`) + e + `</${i}>
`;
  }
  strong(e) {
    return `<strong>${e}</strong>`;
  }
  em(e) {
    return `<em>${e}</em>`;
  }
  codespan(e) {
    return `<code>${e}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  del(e) {
    return `<del>${e}</del>`;
  }
  link(e, n, i) {
    if (e = qw(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = '<a href="' + e + '"';
    return n && (r += ' title="' + n + '"'), r += ">" + i + "</a>", r;
  }
  image(e, n, i) {
    if (e = qw(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = `<img src="${e}" alt="${i}"`;
    return n && (r += ` title="${n}"`), r += this.options.xhtml ? "/>" : ">", r;
  }
  text(e) {
    return e;
  }
}
class F5 {
  strong(e) {
    return e;
  }
  em(e) {
    return e;
  }
  codespan(e) {
    return e;
  }
  del(e) {
    return e;
  }
  html(e) {
    return e;
  }
  text(e) {
    return e;
  }
  link(e, n, i) {
    return "" + i;
  }
  image(e, n, i) {
    return "" + i;
  }
  br() {
    return "";
  }
}
class H5 {
  constructor() {
    this.seen = {};
  }
  serialize(e) {
    return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  getNextSafeSlug(e, n) {
    let i = e, r = 0;
    if (this.seen.hasOwnProperty(i)) {
      r = this.seen[e];
      do
        r++, i = e + "-" + r;
      while (this.seen.hasOwnProperty(i));
    }
    return n || (this.seen[e] = r, this.seen[i] = 0), i;
  }
  slug(e, n = {}) {
    const i = this.serialize(e);
    return this.getNextSafeSlug(i, n.dryrun);
  }
}
class Nr {
  constructor(e) {
    this.options = e || Kl, this.options.renderer = this.options.renderer || new Zg(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new F5(), this.slugger = new H5();
  }
  static parse(e, n) {
    return new Nr(n).parse(e);
  }
  static parseInline(e, n) {
    return new Nr(n).parseInline(e);
  }
  parse(e, n = !0) {
    let i = "", r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P;
    const S = e.length;
    for (r = 0; r < S; r++) {
      if (d = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[d.type] && (P = this.options.extensions.renderers[d.type].call({ parser: this }, d), P !== !1 || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(d.type))) {
        i += P || "";
        continue;
      }
      switch (d.type) {
        case "space":
          continue;
        case "hr": {
          i += this.renderer.hr();
          continue;
        }
        case "heading": {
          i += this.renderer.heading(
            this.parseInline(d.tokens),
            d.depth,
            z5(this.parseInline(d.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          i += this.renderer.code(
            d.text,
            d.lang,
            d.escaped
          );
          continue;
        }
        case "table": {
          for (u = "", c = "", l = d.header.length, o = 0; o < l; o++)
            c += this.renderer.tablecell(
              this.parseInline(d.header[o].tokens),
              { header: !0, align: d.align[o] }
            );
          for (u += this.renderer.tablerow(c), h = "", l = d.rows.length, o = 0; o < l; o++) {
            for (f = d.rows[o], c = "", a = f.length, s = 0; s < a; s++)
              c += this.renderer.tablecell(
                this.parseInline(f[s].tokens),
                { header: !1, align: d.align[s] }
              );
            h += this.renderer.tablerow(c);
          }
          i += this.renderer.table(u, h);
          continue;
        }
        case "blockquote": {
          h = this.parse(d.tokens), i += this.renderer.blockquote(h);
          continue;
        }
        case "list": {
          for (p = d.ordered, g = d.start, _ = d.loose, l = d.items.length, h = "", o = 0; o < l; o++)
            y = d.items[o], v = y.checked, M = y.task, b = "", y.task && (A = this.renderer.checkbox(v), _ ? y.tokens.length > 0 && y.tokens[0].type === "paragraph" ? (y.tokens[0].text = A + " " + y.tokens[0].text, y.tokens[0].tokens && y.tokens[0].tokens.length > 0 && y.tokens[0].tokens[0].type === "text" && (y.tokens[0].tokens[0].text = A + " " + y.tokens[0].tokens[0].text)) : y.tokens.unshift({
              type: "text",
              text: A
            }) : b += A), b += this.parse(y.tokens, _), h += this.renderer.listitem(b, M, v);
          i += this.renderer.list(h, p, g);
          continue;
        }
        case "html": {
          i += this.renderer.html(d.text);
          continue;
        }
        case "paragraph": {
          i += this.renderer.paragraph(this.parseInline(d.tokens));
          continue;
        }
        case "text": {
          for (h = d.tokens ? this.parseInline(d.tokens) : d.text; r + 1 < S && e[r + 1].type === "text"; )
            d = e[++r], h += `
` + (d.tokens ? this.parseInline(d.tokens) : d.text);
          i += n ? this.renderer.paragraph(h) : h;
          continue;
        }
        default: {
          const D = 'Token with "' + d.type + '" type was not found.';
          if (this.options.silent) {
            console.error(D);
            return;
          } else
            throw new Error(D);
        }
      }
    }
    return i;
  }
  parseInline(e, n) {
    n = n || this.renderer;
    let i = "", r, o, s;
    const l = e.length;
    for (r = 0; r < l; r++) {
      if (o = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[o.type] && (s = this.options.extensions.renderers[o.type].call({ parser: this }, o), s !== !1 || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(o.type))) {
        i += s || "";
        continue;
      }
      switch (o.type) {
        case "escape": {
          i += n.text(o.text);
          break;
        }
        case "html": {
          i += n.html(o.text);
          break;
        }
        case "link": {
          i += n.link(o.href, o.title, this.parseInline(o.tokens, n));
          break;
        }
        case "image": {
          i += n.image(o.href, o.title, o.text);
          break;
        }
        case "strong": {
          i += n.strong(this.parseInline(o.tokens, n));
          break;
        }
        case "em": {
          i += n.em(this.parseInline(o.tokens, n));
          break;
        }
        case "codespan": {
          i += n.codespan(o.text);
          break;
        }
        case "br": {
          i += n.br();
          break;
        }
        case "del": {
          i += n.del(this.parseInline(o.tokens, n));
          break;
        }
        case "text": {
          i += n.text(o.text);
          break;
        }
        default: {
          const a = 'Token with "' + o.type + '" type was not found.';
          if (this.options.silent) {
            console.error(a);
            return;
          } else
            throw new Error(a);
        }
      }
    }
    return i;
  }
}
function $e(t, e, n) {
  if (typeof t > "u" || t === null)
    throw new Error("marked(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  if (typeof e == "function" && (n = e, e = null), e = ur({}, $e.defaults, e || {}), V5(e), n) {
    const r = e.highlight;
    let o;
    try {
      o = lo.lex(t, e);
    } catch (a) {
      return n(a);
    }
    const s = function(a) {
      let f;
      if (!a)
        try {
          e.walkTokens && $e.walkTokens(o, e.walkTokens), f = Nr.parse(o, e);
        } catch (c) {
          a = c;
        }
      return e.highlight = r, a ? n(a) : n(null, f);
    };
    if (!r || r.length < 3 || (delete e.highlight, !o.length))
      return s();
    let l = 0;
    $e.walkTokens(o, function(a) {
      a.type === "code" && (l++, setTimeout(() => {
        r(a.text, a.lang, function(f, c) {
          if (f)
            return s(f);
          c != null && c !== a.text && (a.text = c, a.escaped = !0), l--, l === 0 && s();
        });
      }, 0));
    }), l === 0 && s();
    return;
  }
  function i(r) {
    if (r.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + Kn(r.message + "", !0) + "</pre>";
    throw r;
  }
  try {
    const r = lo.lex(t, e);
    if (e.walkTokens) {
      if (e.async)
        return Promise.all($e.walkTokens(r, e.walkTokens)).then(() => Nr.parse(r, e)).catch(i);
      $e.walkTokens(r, e.walkTokens);
    }
    return Nr.parse(r, e);
  } catch (r) {
    i(r);
  }
}
$e.options = $e.setOptions = function(t) {
  return ur($e.defaults, t), GJ($e.defaults), $e;
};
$e.getDefaults = B5;
$e.defaults = Kl;
$e.use = function(...t) {
  const e = $e.defaults.extensions || { renderers: {}, childTokens: {} };
  t.forEach((n) => {
    const i = ur({}, n);
    if (i.async = $e.defaults.async || i.async, n.extensions && (n.extensions.forEach((r) => {
      if (!r.name)
        throw new Error("extension name required");
      if (r.renderer) {
        const o = e.renderers[r.name];
        o ? e.renderers[r.name] = function(...s) {
          let l = r.renderer.apply(this, s);
          return l === !1 && (l = o.apply(this, s)), l;
        } : e.renderers[r.name] = r.renderer;
      }
      if (r.tokenizer) {
        if (!r.level || r.level !== "block" && r.level !== "inline")
          throw new Error("extension level must be 'block' or 'inline'");
        e[r.level] ? e[r.level].unshift(r.tokenizer) : e[r.level] = [r.tokenizer], r.start && (r.level === "block" ? e.startBlock ? e.startBlock.push(r.start) : e.startBlock = [r.start] : r.level === "inline" && (e.startInline ? e.startInline.push(r.start) : e.startInline = [r.start]));
      }
      r.childTokens && (e.childTokens[r.name] = r.childTokens);
    }), i.extensions = e), n.renderer) {
      const r = $e.defaults.renderer || new Zg();
      for (const o in n.renderer) {
        const s = r[o];
        r[o] = (...l) => {
          let a = n.renderer[o].apply(r, l);
          return a === !1 && (a = s.apply(r, l)), a;
        };
      }
      i.renderer = r;
    }
    if (n.tokenizer) {
      const r = $e.defaults.tokenizer || new Yg();
      for (const o in n.tokenizer) {
        const s = r[o];
        r[o] = (...l) => {
          let a = n.tokenizer[o].apply(r, l);
          return a === !1 && (a = s.apply(r, l)), a;
        };
      }
      i.tokenizer = r;
    }
    if (n.walkTokens) {
      const r = $e.defaults.walkTokens;
      i.walkTokens = function(o) {
        let s = [];
        return s.push(n.walkTokens.call(this, o)), r && (s = s.concat(r.call(this, o))), s;
      };
    }
    $e.setOptions(i);
  });
};
$e.walkTokens = function(t, e) {
  let n = [];
  for (const i of t)
    switch (n = n.concat(e.call($e, i)), i.type) {
      case "table": {
        for (const r of i.header)
          n = n.concat($e.walkTokens(r.tokens, e));
        for (const r of i.rows)
          for (const o of r)
            n = n.concat($e.walkTokens(o.tokens, e));
        break;
      }
      case "list": {
        n = n.concat($e.walkTokens(i.items, e));
        break;
      }
      default:
        $e.defaults.extensions && $e.defaults.extensions.childTokens && $e.defaults.extensions.childTokens[i.type] ? $e.defaults.extensions.childTokens[i.type].forEach(function(r) {
          n = n.concat($e.walkTokens(i[r], e));
        }) : i.tokens && (n = n.concat($e.walkTokens(i.tokens, e)));
    }
  return n;
};
$e.parseInline = function(t, e) {
  if (typeof t > "u" || t === null)
    throw new Error("marked.parseInline(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  e = ur({}, $e.defaults, e || {}), V5(e);
  try {
    const n = lo.lexInline(t, e);
    return e.walkTokens && $e.walkTokens(n, e.walkTokens), Nr.parseInline(n, e);
  } catch (n) {
    if (n.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + Kn(n.message + "", !0) + "</pre>";
    throw n;
  }
};
$e.Parser = Nr;
$e.parser = Nr.parse;
$e.Renderer = Zg;
$e.TextRenderer = F5;
$e.Lexer = lo;
$e.lexer = lo.lex;
$e.Tokenizer = Yg;
$e.Slugger = H5;
$e.parse = $e;
$e.options;
$e.setOptions;
$e.use;
$e.walkTokens;
$e.parseInline;
Nr.parse;
lo.lex;
function Qw(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i[8] = n, i;
}
function Yw(t) {
  let e, n = t[6] + "", i, r, o, s, l;
  function a(...f) {
    return t[4](t[8], ...f);
  }
  return {
    c() {
      e = O("sl-tag"), i = le(n), r = q(), ee(e, "removable", ""), ee(e, "pill", ""), ee(e, "size", "small"), ee(e, "variant", "success"), ee(e, "data-value", o = t[6]);
    },
    m(f, c) {
      B(f, e, c), w(e, i), w(e, r), s || (l = X(e, "sl-remove", a), s = !0);
    },
    p(f, c) {
      t = f, c & 1 && n !== (n = t[6] + "") && Pe(i, n), c & 1 && o !== (o = t[6]) && ee(e, "data-value", o);
    },
    d(f) {
      f && j(e), s = !1, l();
    }
  };
}
function fK(t) {
  let e, n, i, r, o = t[0], s = [];
  for (let l = 0; l < o.length; l += 1)
    s[l] = Yw(Qw(t, o, l));
  return {
    c() {
      e = O("sl-input"), n = O("span");
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      m(n, "slot", "prefix"), ee(e, "label", "Tags"), ee(e, "size", "small"), ee(e, "help-text", "Use SPACE to create tags and : for a tag group"), ee(e, "class", "svelte-wlu4f1");
    },
    m(l, a) {
      B(l, e, a), w(e, n);
      for (let f = 0; f < s.length; f += 1)
        s[f].m(n, null);
      i || (r = X(e, "keydown", t[1]), i = !0);
    },
    p(l, [a]) {
      if (a & 5) {
        o = l[0];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const c = Qw(l, o, f);
          s[f] ? s[f].p(c, a) : (s[f] = Yw(c), s[f].c(), s[f].m(n, null));
        }
        for (; f < s.length; f += 1)
          s[f].d(1);
        s.length = o.length;
      }
    },
    i: fe,
    o: fe,
    d(l) {
      l && j(e), Dt(s, l), i = !1, r();
    }
  };
}
function cK(t, e, n) {
  const i = Is();
  let { tags: r = [] } = e, { separator: o = " " } = e;
  function s(f) {
    let c = f.target.value.trim();
    f.key === o ? (c.length > 0 && n(0, r = [...r, c]), f.target.value = "", i("tagschanged", { value: r })) : f.key === "Backspace" && f.target.value.length == 0 && (n(0, r = r.slice(0, -1)), i("tagschanged", { value: r }));
  }
  function l(f) {
    n(0, r = r.filter((c, u) => u != f)), i("tagschanged", { value: r });
  }
  const a = (f, c) => l(f);
  return t.$$set = (f) => {
    "tags" in f && n(0, r = f.tags), "separator" in f && n(3, o = f.separator);
  }, [r, s, l, o, a];
}
class uK extends Be {
  constructor(e) {
    super(), je(this, e, cK, fK, Pt, { tags: 0, separator: 3 });
  }
}
function Zw(t, e, n) {
  const i = t.slice();
  return i[27] = e[n], i;
}
function $w(t, e, n) {
  const i = t.slice();
  return i[30] = e[n], i;
}
function ev(t, e, n) {
  const i = t.slice();
  return i[33] = e[n], i;
}
function tv(t, e, n) {
  const i = t.slice();
  return i[36] = e[n], i;
}
function hK(t) {
  let e;
  return {
    c() {
      e = O("h1"), e.textContent = "Multiple nodes", m(e, "class", "svelte-1vvthkw");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function dK(t) {
  var u;
  let e, n = t[0][0].label + "", i, r, o = !1, s, l = ["node", "edge"].includes((u = t[0][0]) == null ? void 0 : u.kind), a, f = o && nv(t), c = l && iv(t);
  return {
    c() {
      e = O("h1"), i = le(n), r = q(), f && f.c(), s = q(), c && c.c(), a = tt(), m(e, "class", "svelte-1vvthkw");
    },
    m(h, d) {
      B(h, e, d), w(e, i), w(e, r), f && f.m(e, null), B(h, s, d), c && c.m(h, d), B(h, a, d);
    },
    p(h, d) {
      var p;
      d[0] & 1 && n !== (n = h[0][0].label + "") && Pe(i, n), d[0] & 1 && (o = !1), o ? f ? f.p(h, d) : (f = nv(h), f.c(), f.m(e, null)) : f && (f.d(1), f = null), d[0] & 1 && (l = ["node", "edge"].includes((p = h[0][0]) == null ? void 0 : p.kind)), l ? c ? c.p(h, d) : (c = iv(h), c.c(), c.m(a.parentNode, a)) : c && (c.d(1), c = null);
    },
    d(h) {
      h && j(e), f && f.d(), h && j(s), c && c.d(h), h && j(a);
    }
  };
}
function nv(t) {
  let e, n, i;
  return {
    c() {
      e = O("sl-button"), e.innerHTML = '<sl-icon name="gear" label="Settings"></sl-icon>', ee(e, "variant", "default"), ee(e, "size", "small"), ee(e, "circle", "");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[8]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function iv(t) {
  let e, n = $e(t[0][0].desc) + "";
  return {
    c() {
      e = O("p"), m(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 1 && n !== (n = $e(i[0][0].desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function rv(t) {
  let e, n, i, r, o, s, l, a, f, c = (t[0][0].kind === "node" || t[0][0].kind === "note") && ov(t), u = t[0][0].kind !== "note" && sv(t), h = t[0][0].kind === "node" && lv(t);
  return {
    c() {
      e = O("div"), n = O("sl-input"), r = q(), c && c.c(), o = q(), u && u.c(), s = q(), h && h.c(), ee(n, "label", "Label"), ee(n, "type", "text"), ee(n, "size", "small"), ee(n, "value", i = t[0][0].label), m(e, "class", "node-panel svelte-1vvthkw");
    },
    m(d, p) {
      B(d, e, p), w(e, n), w(e, r), c && c.m(e, null), w(e, o), u && u.m(e, null), w(e, s), h && h.m(e, null), l = !0, a || (f = X(n, "sl-change", t[9]), a = !0);
    },
    p(d, p) {
      (!l || p[0] & 1 && i !== (i = d[0][0].label)) && ee(n, "value", i), d[0][0].kind === "node" || d[0][0].kind === "note" ? c ? c.p(d, p) : (c = ov(d), c.c(), c.m(e, o)) : c && (c.d(1), c = null), d[0][0].kind !== "note" ? u ? (u.p(d, p), p[0] & 1 && k(u, 1)) : (u = sv(d), u.c(), k(u, 1), u.m(e, s)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), ge()), d[0][0].kind === "node" ? h ? h.p(d, p) : (h = lv(d), h.c(), h.m(e, null)) : h && (h.d(1), h = null);
    },
    i(d) {
      l || (k(u), l = !0);
    },
    o(d) {
      E(u), l = !1;
    },
    d(d) {
      d && j(e), c && c.d(), u && u.d(), h && h.d(), a = !1, f();
    }
  };
}
function ov(t) {
  let e, n, i, r;
  return {
    c() {
      e = O("sl-textarea"), ee(e, "label", "Notes"), ee(e, "placeholder", "Notes (these will be shown in the graph)..."), ee(e, "size", "small"), ee(e, "value", n = t[0][0].notes);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "sl-change", t[10]), i = !0);
    },
    p(o, s) {
      s[0] & 1 && n !== (n = o[0][0].notes) && ee(e, "value", n);
    },
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function sv(t) {
  let e, n, i, r, o, s, l, a;
  return o = new uK({
    props: { tags: t[0][0].tags }
  }), o.$on("tagschanged", t[12]), {
    c() {
      e = O("sl-textarea"), n = O("p"), n.innerHTML = '<a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Learn about MarkDown</a>', r = q(), oe(o.$$.fragment), m(n, "slot", "help-text"), ee(e, "label", "Description"), ee(e, "placeholder", "Description in markdown..."), ee(e, "size", "small"), ee(e, "value", i = t[0][0].desc);
    },
    m(f, c) {
      B(f, e, c), w(e, n), B(f, r, c), ie(o, f, c), s = !0, l || (a = X(e, "sl-change", t[11]), l = !0);
    },
    p(f, c) {
      (!s || c[0] & 1 && i !== (i = f[0][0].desc)) && ee(e, "value", i);
      const u = {};
      c[0] & 1 && (u.tags = f[0][0].tags), o.$set(u);
    },
    i(f) {
      s || (k(o.$$.fragment, f), s = !0);
    },
    o(f) {
      E(o.$$.fragment, f), s = !1;
    },
    d(f) {
      f && j(e), f && j(r), re(o, f), l = !1, a();
    }
  };
}
function lv(t) {
  var c;
  let e, n = (c = t[0][0].badge) == null ? void 0 : c.startsWith("http"), i, r, o, s, l = n && av(t), a = t[1].theme.badges, f = [];
  for (let u = 0; u < a.length; u += 1)
    f[u] = fv(tv(t, a, u));
  return {
    c() {
      e = O("sl-select"), l && l.c(), i = q();
      for (let u = 0; u < f.length; u += 1)
        f[u].c();
      ee(e, "label", "Badge"), ee(e, "clearable", ""), ee(e, "value", r = t[0][0].badge), ee(e, "placeholder", "Select badge");
    },
    m(u, h) {
      B(u, e, h), l && l.m(e, null), w(e, i);
      for (let d = 0; d < f.length; d += 1)
        f[d].m(e, null);
      o || (s = X(e, "sl-change", t[13]), o = !0);
    },
    p(u, h) {
      var d;
      if (h[0] & 1 && (n = (d = u[0][0].badge) == null ? void 0 : d.startsWith("http")), n ? l ? l.p(u, h) : (l = av(u), l.c(), l.m(e, i)) : l && (l.d(1), l = null), h[0] & 3) {
        a = u[1].theme.badges;
        let p;
        for (p = 0; p < a.length; p += 1) {
          const g = tv(u, a, p);
          f[p] ? f[p].p(g, h) : (f[p] = fv(g), f[p].c(), f[p].m(e, null));
        }
        for (; p < f.length; p += 1)
          f[p].d(1);
        f.length = a.length;
      }
      h[0] & 1 && r !== (r = u[0][0].badge) && ee(e, "value", r);
    },
    d(u) {
      u && j(e), l && l.d(), Dt(f, u), o = !1, s();
    }
  };
}
function av(t) {
  let e, n;
  return {
    c() {
      e = O("img"), m(e, "width", "30"), m(e, "height", "28"), m(e, "alt", "badge"), Lc(e.src, n = t[0][0].badge) || m(e, "src", n), m(e, "slot", "prefix");
    },
    m(i, r) {
      B(i, e, r);
    },
    p(i, r) {
      r[0] & 1 && !Lc(e.src, n = i[0][0].badge) && m(e, "src", n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function pK(t) {
  let e = t[36] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 2 && e !== (e = i[36] + "") && Pe(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function mK(t) {
  let e, n;
  return {
    c() {
      e = O("img"), m(e, "width", "30"), m(e, "height", "28"), m(e, "alt", "badge"), Lc(e.src, n = t[36]) || m(e, "src", n), m(e, "class", "http-badge svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r);
    },
    p(i, r) {
      r[0] & 2 && !Lc(e.src, n = i[36]) && m(e, "src", n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function fv(t) {
  let e, n, i, r, o;
  function s(f, c) {
    return c[0] & 2 && (n = null), n == null && (n = !!f[36].startsWith("http")), n ? mK : pK;
  }
  let l = s(t, [-1, -1]), a = l(t);
  return {
    c() {
      e = O("sl-option"), a.c(), i = q(), ee(e, "value", r = t[36]), ee(e, "selected", o = t[0][0].badge === t[36]);
    },
    m(f, c) {
      B(f, e, c), a.m(e, null), w(e, i);
    },
    p(f, c) {
      l === (l = s(f, c)) && a ? a.p(f, c) : (a.d(1), a = l(f), a && (a.c(), a.m(e, i))), c[0] & 2 && r !== (r = f[36]) && ee(e, "value", r), c[0] & 3 && o !== (o = f[0][0].badge === f[36]) && ee(e, "selected", o);
    },
    d(f) {
      f && j(e), a.d();
    }
  };
}
function gK(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L, I, H, N, T, K, ne, z, Y, $, Q, Te, Se;
  return {
    c() {
      e = O("div"), n = O("sl-checkbox"), i = le("Directed"), o = q(), s = O("div"), l = O("sl-color-picker"), f = q(), c = O("span"), c.textContent = "Stroke", u = q(), h = O("sl-input"), p = q(), g = O("sl-select"), _ = O("sl-option"), b = le("straight"), v = q(), M = O("sl-option"), A = le("curved"), S = q(), D = O("sl-option"), x = le("ortho"), W = q(), U = O("sl-select"), C = O("sl-option"), L = le("solid"), H = q(), N = O("sl-option"), T = le("dashed"), ne = q(), z = O("sl-option"), Y = le("dotted"), ai(n, "width", "100%"), ee(n, "checked", r = t[0][0].directed), ee(l, "format", "hex"), ee(l, "size", "small"), ee(l, "value", a = t[0][0].stroke), ee(l, "label", "Select stroke color"), ee(l, "opacity", ""), ee(l, "swatches", t[5]), m(c, "class", "title svelte-1vvthkw"), m(s, "class", "edge-stroke svelte-1vvthkw"), ee(h, "label", "Weight"), ee(h, "type", "number"), ee(h, "value", d = t[0][0].weight), ee(_, "value", "straight"), ee(_, "selected", y = t[0][0].shape === "straight"), ee(M, "value", "curved"), ee(M, "selected", P = t[0][0].shape === "curved"), ee(D, "value", "ortho"), ee(D, "selected", V = t[0][0].shape === "ortho"), ee(g, "label", "Shape"), ee(g, "value", R = t[0][0].shape), ee(g, "placeholder", "Select shape"), ee(C, "value", "solid"), ee(C, "selected", I = t[0][0].strokeType === "solid"), ee(N, "value", "dashed"), ee(N, "selected", K = t[0][0].strokeType === "dashed"), ee(z, "value", "dotted"), ee(z, "selected", $ = t[0][0].strokeType === "dotted"), ee(U, "label", "StrokeType"), ee(U, "value", Q = t[0][0].strokeType), ee(U, "placeholder", "Select strokeType"), m(e, "class", "edge-panel svelte-1vvthkw");
    },
    m(Fe, Z) {
      B(Fe, e, Z), w(e, n), w(n, i), w(e, o), w(e, s), w(s, l), w(s, f), w(s, c), w(e, u), w(e, h), w(e, p), w(e, g), w(g, _), w(_, b), w(g, v), w(g, M), w(M, A), w(g, S), w(g, D), w(D, x), w(e, W), w(e, U), w(U, C), w(C, L), w(U, H), w(U, N), w(N, T), w(U, ne), w(U, z), w(z, Y), Te || (Se = [
        X(n, "sl-change", t[20]),
        X(l, "sl-change", t[21]),
        X(h, "sl-change", t[22]),
        X(g, "sl-change", t[23]),
        X(U, "sl-change", t[24])
      ], Te = !0);
    },
    p(Fe, Z) {
      Z[0] & 1 && r !== (r = Fe[0][0].directed) && ee(n, "checked", r), Z[0] & 1 && a !== (a = Fe[0][0].stroke) && ee(l, "value", a), Z[0] & 1 && d !== (d = Fe[0][0].weight) && ee(h, "value", d), Z[0] & 1 && y !== (y = Fe[0][0].shape === "straight") && ee(_, "selected", y), Z[0] & 1 && P !== (P = Fe[0][0].shape === "curved") && ee(M, "selected", P), Z[0] & 1 && V !== (V = Fe[0][0].shape === "ortho") && ee(D, "selected", V), Z[0] & 1 && R !== (R = Fe[0][0].shape) && ee(g, "value", R), Z[0] & 1 && I !== (I = Fe[0][0].strokeType === "solid") && ee(C, "selected", I), Z[0] & 1 && K !== (K = Fe[0][0].strokeType === "dashed") && ee(N, "selected", K), Z[0] & 1 && $ !== ($ = Fe[0][0].strokeType === "dotted") && ee(z, "selected", $), Z[0] & 1 && Q !== (Q = Fe[0][0].strokeType) && ee(U, "value", Q);
    },
    d(Fe) {
      Fe && j(e), Te = !1, nt(Se);
    }
  };
}
function bK(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L;
  return {
    c() {
      e = O("div"), n = O("div"), i = O("sl-color-picker"), o = q(), s = O("span"), s.textContent = "Fill", l = q(), a = O("div"), f = O("sl-color-picker"), u = q(), h = O("span"), h.textContent = "Border", d = q(), p = O("div"), g = O("sl-color-picker"), b = q(), y = O("span"), y.textContent = "Label", v = q(), M = O("div"), A = O("sl-input"), S = q(), D = O("div"), x = O("sl-input"), R = q(), W = O("sl-input"), ee(i, "format", "hex"), ee(i, "size", "small"), ee(i, "value", r = t[0][0].fill), ee(i, "label", "Select fill color"), ee(i, "opacity", ""), ee(i, "swatches", t[5]), m(s, "class", "svelte-1vvthkw"), m(n, "class", "node-color svelte-1vvthkw"), ee(f, "format", "hex"), ee(f, "size", "small"), ee(f, "value", c = t[0][0].bordercolor), ee(f, "label", "Select border color"), ee(f, "opacity", ""), ee(f, "swatches", t[5]), m(h, "class", "svelte-1vvthkw"), m(a, "class", "node-color svelte-1vvthkw"), ee(g, "format", "hex"), ee(g, "size", "small"), ee(g, "value", _ = t[0][0].labelcolor), ee(g, "label", "Select label color"), ee(g, "opacity", ""), ee(g, "swatches", t[5]), m(y, "class", "svelte-1vvthkw"), m(p, "class", "node-color svelte-1vvthkw"), m(e, "class", "node-colors svelte-1vvthkw"), ee(A, "label", "URL of Background Image"), ee(A, "type", "url"), ee(A, "size", "small"), ai(A, "width", "100%"), ee(A, "value", P = t[0][0].backgroundImageURL || ""), m(M, "class", "node-colors svelte-1vvthkw"), ee(x, "label", "Label Font Size"), ee(x, "type", "number"), ee(x, "size", "small"), ee(x, "placeholder", "16"), ai(x, "width", "40%"), ee(x, "min", "12"), ee(x, "max", "64"), ee(x, "step", "1"), ee(x, "value", V = t[0][0].nodelabelfontsize || t[1].theme.nodelabelfontsize || 16), ee(W, "label", "Notes Font Size"), ee(W, "type", "number"), ee(W, "size", "small"), ee(W, "placeholder", "16"), ai(W, "width", "40%"), ee(W, "min", "12"), ee(W, "max", "48"), ee(W, "step", "1"), ee(W, "value", U = t[0][0].nodenotesfontsize || t[1].theme.nodenotesfontsize || 16), m(D, "class", "node-colors svelte-1vvthkw");
    },
    m(I, H) {
      B(I, e, H), w(e, n), w(n, i), w(n, o), w(n, s), w(e, l), w(e, a), w(a, f), w(a, u), w(a, h), w(e, d), w(e, p), w(p, g), w(p, b), w(p, y), B(I, v, H), B(I, M, H), w(M, A), B(I, S, H), B(I, D, H), w(D, x), w(D, R), w(D, W), C || (L = [
        X(i, "sl-change", t[14]),
        X(f, "sl-change", t[15]),
        X(g, "sl-change", t[16]),
        X(A, "input", t[17]),
        X(x, "input", t[18]),
        X(W, "input", t[19])
      ], C = !0);
    },
    p(I, H) {
      H[0] & 1 && r !== (r = I[0][0].fill) && ee(i, "value", r), H[0] & 1 && c !== (c = I[0][0].bordercolor) && ee(f, "value", c), H[0] & 1 && _ !== (_ = I[0][0].labelcolor) && ee(g, "value", _), H[0] & 1 && P !== (P = I[0][0].backgroundImageURL || "") && ee(A, "value", P), H[0] & 3 && V !== (V = I[0][0].nodelabelfontsize || I[1].theme.nodelabelfontsize || 16) && ee(x, "value", V), H[0] & 3 && U !== (U = I[0][0].nodenotesfontsize || I[1].theme.nodenotesfontsize || 16) && ee(W, "value", U);
    },
    d(I) {
      I && j(e), I && j(v), I && j(M), I && j(S), I && j(D), C = !1, nt(L);
    }
  };
}
function cv(t) {
  let e, n, i, r, o;
  return r = new KJ({
    props: {
      content: {
        json: t[0][0].custom || {}
      },
      onChange: t[7]
    }
  }), {
    c() {
      e = O("div"), n = O("span"), n.innerHTML = "<strong>custom</strong>", i = q(), oe(r.$$.fragment), m(e, "class", "row");
    },
    m(s, l) {
      B(s, e, l), w(e, n), w(e, i), ie(r, e, null), o = !0;
    },
    p(s, l) {
      const a = {};
      l[0] & 1 && (a.content = {
        json: s[0][0].custom || {}
      }), r.$set(a);
    },
    i(s) {
      o || (k(r.$$.fragment, s), o = !0);
    },
    o(s) {
      E(r.$$.fragment, s), o = !1;
    },
    d(s) {
      s && j(e), re(r);
    }
  };
}
function uv(t) {
  let e, n, i = $e(t[0][0].desc) + "", r, o, s, l, a, f, c = t[3], u = [];
  for (let h = 0; h < c.length; h += 1)
    u[h] = bv(Zw(t, c, h));
  return {
    c() {
      e = O("sl-dialog"), n = O("p"), r = q();
      for (let h = 0; h < u.length; h += 1)
        u[h].c();
      o = q(), s = O("sl-button"), s.textContent = "Close", m(n, "class", "itemdesc svelte-1vvthkw"), ee(s, "slot", "footer"), ee(s, "variant", "primary"), ee(e, "label", l = "Literature Review for " + t[0][0].label), ai(e, "--width", "50vw"), ee(e, "open", t[2]);
    },
    m(h, d) {
      B(h, e, d), w(e, n), n.innerHTML = i, w(e, r);
      for (let p = 0; p < u.length; p += 1)
        u[p].m(e, null);
      w(e, o), w(e, s), a || (f = [
        X(s, "click", t[25]),
        X(e, "sl-hide", t[26])
      ], a = !0);
    },
    p(h, d) {
      if (d[0] & 1 && i !== (i = $e(h[0][0].desc) + "") && (n.innerHTML = i), d[0] & 8) {
        c = h[3];
        let p;
        for (p = 0; p < c.length; p += 1) {
          const g = Zw(h, c, p);
          u[p] ? u[p].p(g, d) : (u[p] = bv(g), u[p].c(), u[p].m(e, o));
        }
        for (; p < u.length; p += 1)
          u[p].d(1);
        u.length = c.length;
      }
      d[0] & 1 && l !== (l = "Literature Review for " + h[0][0].label) && ee(e, "label", l), d[0] & 4 && ee(e, "open", h[2]);
    },
    d(h) {
      h && j(e), Dt(u, h), a = !1, nt(f);
    }
  };
}
function hv(t) {
  let e, n = $e(t[27].node.desc) + "";
  return {
    c() {
      e = O("p"), m(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = $e(i[27].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function dv(t) {
  let e, n = $e(t[30].node.desc) + "";
  return {
    c() {
      e = O("p"), m(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = $e(i[30].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function pv(t) {
  let e, n = $e(t[33].node.desc) + "";
  return {
    c() {
      e = O("p"), m(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = $e(i[33].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function mv(t) {
  let e, n, i = t[33].node.desc && pv(t);
  return {
    c() {
      e = O("sl-details"), i && i.c(), ee(e, "summary", n = t[30].node.label);
    },
    m(r, o) {
      B(r, e, o), i && i.m(e, null);
    },
    p(r, o) {
      r[33].node.desc ? i ? i.p(r, o) : (i = pv(r), i.c(), i.m(e, null)) : i && (i.d(1), i = null), o[0] & 8 && n !== (n = r[30].node.label) && ee(e, "summary", n);
    },
    d(r) {
      r && j(e), i && i.d();
    }
  };
}
function gv(t) {
  let e, n, i, r = t[30].node.desc && dv(t), o = t[30].parents, s = [];
  for (let l = 0; l < o.length; l += 1)
    s[l] = mv(ev(t, o, l));
  return {
    c() {
      e = O("sl-details"), r && r.c(), n = q();
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      ee(e, "summary", i = t[30].node.label);
    },
    m(l, a) {
      B(l, e, a), r && r.m(e, null), w(e, n);
      for (let f = 0; f < s.length; f += 1)
        s[f].m(e, null);
    },
    p(l, a) {
      if (l[30].node.desc ? r ? r.p(l, a) : (r = dv(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), a[0] & 8) {
        o = l[30].parents;
        let f;
        for (f = 0; f < o.length; f += 1) {
          const c = ev(l, o, f);
          s[f] ? s[f].p(c, a) : (s[f] = mv(c), s[f].c(), s[f].m(e, null));
        }
        for (; f < s.length; f += 1)
          s[f].d(1);
        s.length = o.length;
      }
      a[0] & 8 && i !== (i = l[30].node.label) && ee(e, "summary", i);
    },
    d(l) {
      l && j(e), r && r.d(), Dt(s, l);
    }
  };
}
function bv(t) {
  let e, n, i, r, o = t[27].node.desc && hv(t), s = t[27].parents, l = [];
  for (let a = 0; a < s.length; a += 1)
    l[a] = gv($w(t, s, a));
  return {
    c() {
      e = O("div"), n = O("sl-details"), o && o.c(), i = q();
      for (let a = 0; a < l.length; a += 1)
        l[a].c();
      ee(n, "summary", r = t[27].node.label), ee(n, "open", ""), m(e, "class", "details-group-example");
    },
    m(a, f) {
      B(a, e, f), w(e, n), o && o.m(n, null), w(n, i);
      for (let c = 0; c < l.length; c += 1)
        l[c].m(n, null);
    },
    p(a, f) {
      if (a[27].node.desc ? o ? o.p(a, f) : (o = hv(a), o.c(), o.m(n, i)) : o && (o.d(1), o = null), f[0] & 8) {
        s = a[27].parents;
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = $w(a, s, c);
          l[c] ? l[c].p(u, f) : (l[c] = gv(u), l[c].c(), l[c].m(n, null));
        }
        for (; c < l.length; c += 1)
          l[c].d(1);
        l.length = s.length;
      }
      f[0] & 8 && r !== (r = a[27].node.label) && ee(n, "summary", r);
    },
    d(a) {
      a && j(e), o && o.d(), Dt(l, a);
    }
  };
}
function _K(t) {
  var y;
  let e, n, i, r, o, s = t[0].length == 1 && ["node"].includes((y = t[0][0]) == null ? void 0 : y.kind), l, a;
  function f(v, M) {
    var A;
    return M[0] & 1 && (e = null), e == null && (e = !!(v[0].length == 1 && ["node", "edge", "note"].includes((A = v[0][0]) == null ? void 0 : A.kind))), e ? dK : hK;
  }
  let c = f(t, [-1, -1]), u = c(t), h = t[0].length == 1 && !t[1].disableEditing && rv(t);
  function d(v, M) {
    if (v[0][0].kind !== "edge" && !v[1].disableEditing)
      return bK;
    if (v[0][0].kind === "edge" && !v[1].disableEditing)
      return gK;
  }
  let p = d(t), g = p && p(t), _ = t[1].customjson && t[0].length == 1 && (t[0][0].kind === "node" || t[0][0].kind === "edge") && !t[1].disableEditing && cv(t), b = s && uv(t);
  return {
    c() {
      u.c(), n = q(), h && h.c(), i = q(), g && g.c(), r = q(), _ && _.c(), o = q(), b && b.c(), l = tt();
    },
    m(v, M) {
      u.m(v, M), B(v, n, M), h && h.m(v, M), B(v, i, M), g && g.m(v, M), B(v, r, M), _ && _.m(v, M), B(v, o, M), b && b.m(v, M), B(v, l, M), a = !0;
    },
    p(v, M) {
      var A;
      c === (c = f(v, M)) && u ? u.p(v, M) : (u.d(1), u = c(v), u && (u.c(), u.m(n.parentNode, n))), v[0].length == 1 && !v[1].disableEditing ? h ? (h.p(v, M), M[0] & 3 && k(h, 1)) : (h = rv(v), h.c(), k(h, 1), h.m(i.parentNode, i)) : h && (me(), E(h, 1, 1, () => {
        h = null;
      }), ge()), p === (p = d(v)) && g ? g.p(v, M) : (g && g.d(1), g = p && p(v), g && (g.c(), g.m(r.parentNode, r))), v[1].customjson && v[0].length == 1 && (v[0][0].kind === "node" || v[0][0].kind === "edge") && !v[1].disableEditing ? _ ? (_.p(v, M), M[0] & 3 && k(_, 1)) : (_ = cv(v), _.c(), k(_, 1), _.m(o.parentNode, o)) : _ && (me(), E(_, 1, 1, () => {
        _ = null;
      }), ge()), M[0] & 1 && (s = v[0].length == 1 && ["node"].includes((A = v[0][0]) == null ? void 0 : A.kind)), s ? b ? b.p(v, M) : (b = uv(v), b.c(), b.m(l.parentNode, l)) : b && (b.d(1), b = null);
    },
    i(v) {
      a || (k(h), k(_), a = !0);
    },
    o(v) {
      E(h), E(_), a = !1;
    },
    d(v) {
      u.d(v), v && j(n), h && h.d(v), v && j(i), g && g.d(v), v && j(r), _ && _.d(v), v && j(o), b && b.d(v), v && j(l);
    }
  };
}
function yK(t, e, n) {
  let i, { selectedItem: r } = e, { graph: o } = e, s = !1;
  const l = Is(), a = [
    "#d0021bff",
    "#f5a623ff",
    "#bbae0eff",
    "#8b572aff",
    "#7ed321ff",
    "#417505ff",
    "#b00b0bff",
    "#9013feff",
    "#4a90e2ff",
    "#16b591ff",
    "#b8e986ff",
    "#000000ff",
    "#444444ff",
    "#888888ff",
    "#ccccccff",
    "#ffffffff"
  ];
  function f(C, L) {
    L.split("_")[0] == "text" || L.split("_")[0] == "color" || L.split("_")[0] == "url" ? r.forEach((I) => I[L.split("_")[1]] = C.target.value) : L.split("_")[0] == "number" ? r.forEach((I) => I[L.split("_")[1]] = C.target.value === "" ? null : JSON.parse(C.target.value)) : L.split("_")[0] == "checkbox" ? r.forEach((I) => I[L.split("_")[1]] = C.target.checked) : r.forEach((I) => I[L.split("_")[1]] = JSON.parse(C.target.value)), l("graphchanged", o);
  }
  function c(C, L, I) {
    n(0, r[0].custom = C.json, r), l("graphchanged", o);
  }
  const u = (C) => n(2, s = !0), h = (C) => f(C, "text_label"), d = (C) => f(C, "text_notes"), p = (C) => f(C, "text_desc"), g = (C) => {
    n(0, r[0].tags = C.detail.value, r), l("graphchanged", o);
  }, _ = (C) => f(C, "text_badge"), b = (C) => f(C, "color_fill"), y = (C) => f(C, "color_bordercolor"), v = (C) => f(C, "color_labelcolor"), M = (C) => f(C, "url_backgroundImageURL"), A = (C) => f(C, "number_nodelabelfontsize"), P = (C) => f(C, "number_nodenotesfontsize"), S = (C) => f(C, "checkbox_directed"), D = (C) => f(C, "color_stroke"), x = (C) => f(C, "number_weight"), V = (C) => f(C, "text_shape"), R = (C) => f(C, "text_strokeType"), W = (C) => n(2, s = !1), U = (C) => n(2, s = !1);
  return t.$$set = (C) => {
    "selectedItem" in C && n(0, r = C.selectedItem), "graph" in C && n(1, o = C.graph);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(3, i = Sk(o, r[0], 0));
  }, [
    r,
    o,
    s,
    i,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    p,
    g,
    _,
    b,
    y,
    v,
    M,
    A,
    P,
    S,
    D,
    x,
    V,
    R,
    W,
    U
  ];
}
class wK extends Be {
  constructor(e) {
    super(), je(this, e, yK, _K, Pt, { selectedItem: 0, graph: 1 }, null, [-1, -1]);
  }
}
var vK = { value: () => {
} };
function $g() {
  for (var t = 0, e = arguments.length, n = {}, i; t < e; ++t) {
    if (!(i = arguments[t] + "") || i in n || /[\s.]/.test(i))
      throw new Error("illegal type: " + i);
    n[i] = [];
  }
  return new Nc(n);
}
function Nc(t) {
  this._ = t;
}
function kK(t, e) {
  return t.trim().split(/^|\s+/).map(function(n) {
    var i = "", r = n.indexOf(".");
    if (r >= 0 && (i = n.slice(r + 1), n = n.slice(0, r)), n && !e.hasOwnProperty(n))
      throw new Error("unknown type: " + n);
    return { type: n, name: i };
  });
}
Nc.prototype = $g.prototype = {
  constructor: Nc,
  on: function(t, e) {
    var n = this._, i = kK(t + "", n), r, o = -1, s = i.length;
    if (arguments.length < 2) {
      for (; ++o < s; )
        if ((r = (t = i[o]).type) && (r = CK(n[r], t.name)))
          return r;
      return;
    }
    if (e != null && typeof e != "function")
      throw new Error("invalid callback: " + e);
    for (; ++o < s; )
      if (r = (t = i[o]).type)
        n[r] = _v(n[r], t.name, e);
      else if (e == null)
        for (r in n)
          n[r] = _v(n[r], t.name, null);
    return this;
  },
  copy: function() {
    var t = {}, e = this._;
    for (var n in e)
      t[n] = e[n].slice();
    return new Nc(t);
  },
  call: function(t, e) {
    if ((r = arguments.length - 2) > 0)
      for (var n = new Array(r), i = 0, r, o; i < r; ++i)
        n[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (o = this._[t], i = 0, r = o.length; i < r; ++i)
      o[i].value.apply(e, n);
  },
  apply: function(t, e, n) {
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (var i = this._[t], r = 0, o = i.length; r < o; ++r)
      i[r].value.apply(e, n);
  }
};
function CK(t, e) {
  for (var n = 0, i = t.length, r; n < i; ++n)
    if ((r = t[n]).name === e)
      return r.value;
}
function _v(t, e, n) {
  for (var i = 0, r = t.length; i < r; ++i)
    if (t[i].name === e) {
      t[i] = vK, t = t.slice(0, i).concat(t.slice(i + 1));
      break;
    }
  return n != null && t.push({ name: e, value: n }), t;
}
var mm = "http://www.w3.org/1999/xhtml";
const yv = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: mm,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function Uh(t) {
  var e = t += "", n = e.indexOf(":");
  return n >= 0 && (e = t.slice(0, n)) !== "xmlns" && (t = t.slice(n + 1)), yv.hasOwnProperty(e) ? { space: yv[e], local: t } : t;
}
function SK(t) {
  return function() {
    var e = this.ownerDocument, n = this.namespaceURI;
    return n === mm && e.documentElement.namespaceURI === mm ? e.createElement(t) : e.createElementNS(n, t);
  };
}
function MK(t) {
  return function() {
    return this.ownerDocument.createElementNS(t.space, t.local);
  };
}
function W5(t) {
  var e = Uh(t);
  return (e.local ? MK : SK)(e);
}
function AK() {
}
function e1(t) {
  return t == null ? AK : function() {
    return this.querySelector(t);
  };
}
function OK(t) {
  typeof t != "function" && (t = e1(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = new Array(s), a, f, c = 0; c < s; ++c)
      (a = o[c]) && (f = t.call(a, a.__data__, c, o)) && ("__data__" in a && (f.__data__ = a.__data__), l[c] = f);
  return new Pi(i, this._parents);
}
function TK(t) {
  return t == null ? [] : Array.isArray(t) ? t : Array.from(t);
}
function EK() {
  return [];
}
function U5(t) {
  return t == null ? EK : function() {
    return this.querySelectorAll(t);
  };
}
function PK(t) {
  return function() {
    return TK(t.apply(this, arguments));
  };
}
function RK(t) {
  typeof t == "function" ? t = PK(t) : t = U5(t);
  for (var e = this._groups, n = e.length, i = [], r = [], o = 0; o < n; ++o)
    for (var s = e[o], l = s.length, a, f = 0; f < l; ++f)
      (a = s[f]) && (i.push(t.call(a, a.__data__, f, s)), r.push(a));
  return new Pi(i, r);
}
function q5(t) {
  return function() {
    return this.matches(t);
  };
}
function J5(t) {
  return function(e) {
    return e.matches(t);
  };
}
var IK = Array.prototype.find;
function NK(t) {
  return function() {
    return IK.call(this.children, t);
  };
}
function DK() {
  return this.firstElementChild;
}
function jK(t) {
  return this.select(t == null ? DK : NK(typeof t == "function" ? t : J5(t)));
}
var BK = Array.prototype.filter;
function LK() {
  return Array.from(this.children);
}
function xK(t) {
  return function() {
    return BK.call(this.children, t);
  };
}
function zK(t) {
  return this.selectAll(t == null ? LK : xK(typeof t == "function" ? t : J5(t)));
}
function VK(t) {
  typeof t != "function" && (t = q5(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = [], a, f = 0; f < s; ++f)
      (a = o[f]) && t.call(a, a.__data__, f, o) && l.push(a);
  return new Pi(i, this._parents);
}
function K5(t) {
  return new Array(t.length);
}
function FK() {
  return new Pi(this._enter || this._groups.map(K5), this._parents);
}
function Vu(t, e) {
  this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e;
}
Vu.prototype = {
  constructor: Vu,
  appendChild: function(t) {
    return this._parent.insertBefore(t, this._next);
  },
  insertBefore: function(t, e) {
    return this._parent.insertBefore(t, e);
  },
  querySelector: function(t) {
    return this._parent.querySelector(t);
  },
  querySelectorAll: function(t) {
    return this._parent.querySelectorAll(t);
  }
};
function HK(t) {
  return function() {
    return t;
  };
}
function WK(t, e, n, i, r, o) {
  for (var s = 0, l, a = e.length, f = o.length; s < f; ++s)
    (l = e[s]) ? (l.__data__ = o[s], i[s] = l) : n[s] = new Vu(t, o[s]);
  for (; s < a; ++s)
    (l = e[s]) && (r[s] = l);
}
function UK(t, e, n, i, r, o, s) {
  var l, a, f = /* @__PURE__ */ new Map(), c = e.length, u = o.length, h = new Array(c), d;
  for (l = 0; l < c; ++l)
    (a = e[l]) && (h[l] = d = s.call(a, a.__data__, l, e) + "", f.has(d) ? r[l] = a : f.set(d, a));
  for (l = 0; l < u; ++l)
    d = s.call(t, o[l], l, o) + "", (a = f.get(d)) ? (i[l] = a, a.__data__ = o[l], f.delete(d)) : n[l] = new Vu(t, o[l]);
  for (l = 0; l < c; ++l)
    (a = e[l]) && f.get(h[l]) === a && (r[l] = a);
}
function qK(t) {
  return t.__data__;
}
function JK(t, e) {
  if (!arguments.length)
    return Array.from(this, qK);
  var n = e ? UK : WK, i = this._parents, r = this._groups;
  typeof t != "function" && (t = HK(t));
  for (var o = r.length, s = new Array(o), l = new Array(o), a = new Array(o), f = 0; f < o; ++f) {
    var c = i[f], u = r[f], h = u.length, d = KK(t.call(c, c && c.__data__, f, i)), p = d.length, g = l[f] = new Array(p), _ = s[f] = new Array(p), b = a[f] = new Array(h);
    n(c, u, g, _, b, d, e);
    for (var y = 0, v = 0, M, A; y < p; ++y)
      if (M = g[y]) {
        for (y >= v && (v = y + 1); !(A = _[v]) && ++v < p; )
          ;
        M._next = A || null;
      }
  }
  return s = new Pi(s, i), s._enter = l, s._exit = a, s;
}
function KK(t) {
  return typeof t == "object" && "length" in t ? t : Array.from(t);
}
function GK() {
  return new Pi(this._exit || this._groups.map(K5), this._parents);
}
function XK(t, e, n) {
  var i = this.enter(), r = this, o = this.exit();
  return typeof t == "function" ? (i = t(i), i && (i = i.selection())) : i = i.append(t + ""), e != null && (r = e(r), r && (r = r.selection())), n == null ? o.remove() : n(o), i && r ? i.merge(r).order() : r;
}
function QK(t) {
  for (var e = t.selection ? t.selection() : t, n = this._groups, i = e._groups, r = n.length, o = i.length, s = Math.min(r, o), l = new Array(r), a = 0; a < s; ++a)
    for (var f = n[a], c = i[a], u = f.length, h = l[a] = new Array(u), d, p = 0; p < u; ++p)
      (d = f[p] || c[p]) && (h[p] = d);
  for (; a < r; ++a)
    l[a] = n[a];
  return new Pi(l, this._parents);
}
function YK() {
  for (var t = this._groups, e = -1, n = t.length; ++e < n; )
    for (var i = t[e], r = i.length - 1, o = i[r], s; --r >= 0; )
      (s = i[r]) && (o && s.compareDocumentPosition(o) ^ 4 && o.parentNode.insertBefore(s, o), o = s);
  return this;
}
function ZK(t) {
  t || (t = $K);
  function e(u, h) {
    return u && h ? t(u.__data__, h.__data__) : !u - !h;
  }
  for (var n = this._groups, i = n.length, r = new Array(i), o = 0; o < i; ++o) {
    for (var s = n[o], l = s.length, a = r[o] = new Array(l), f, c = 0; c < l; ++c)
      (f = s[c]) && (a[c] = f);
    a.sort(e);
  }
  return new Pi(r, this._parents).order();
}
function $K(t, e) {
  return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function eG() {
  var t = arguments[0];
  return arguments[0] = this, t.apply(null, arguments), this;
}
function tG() {
  return Array.from(this);
}
function nG() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, o = i.length; r < o; ++r) {
      var s = i[r];
      if (s)
        return s;
    }
  return null;
}
function iG() {
  let t = 0;
  for (const e of this)
    ++t;
  return t;
}
function rG() {
  return !this.node();
}
function oG(t) {
  for (var e = this._groups, n = 0, i = e.length; n < i; ++n)
    for (var r = e[n], o = 0, s = r.length, l; o < s; ++o)
      (l = r[o]) && t.call(l, l.__data__, o, r);
  return this;
}
function sG(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function lG(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function aG(t, e) {
  return function() {
    this.setAttribute(t, e);
  };
}
function fG(t, e) {
  return function() {
    this.setAttributeNS(t.space, t.local, e);
  };
}
function cG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttribute(t) : this.setAttribute(t, n);
  };
}
function uG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n);
  };
}
function hG(t, e) {
  var n = Uh(t);
  if (arguments.length < 2) {
    var i = this.node();
    return n.local ? i.getAttributeNS(n.space, n.local) : i.getAttribute(n);
  }
  return this.each((e == null ? n.local ? lG : sG : typeof e == "function" ? n.local ? uG : cG : n.local ? fG : aG)(n, e));
}
function G5(t) {
  return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView;
}
function dG(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function pG(t, e, n) {
  return function() {
    this.style.setProperty(t, e, n);
  };
}
function mG(t, e, n) {
  return function() {
    var i = e.apply(this, arguments);
    i == null ? this.style.removeProperty(t) : this.style.setProperty(t, i, n);
  };
}
function gG(t, e, n) {
  return arguments.length > 1 ? this.each((e == null ? dG : typeof e == "function" ? mG : pG)(t, e, n ?? "")) : jl(this.node(), t);
}
function jl(t, e) {
  return t.style.getPropertyValue(e) || G5(t).getComputedStyle(t, null).getPropertyValue(e);
}
function bG(t) {
  return function() {
    delete this[t];
  };
}
function _G(t, e) {
  return function() {
    this[t] = e;
  };
}
function yG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? delete this[t] : this[t] = n;
  };
}
function wG(t, e) {
  return arguments.length > 1 ? this.each((e == null ? bG : typeof e == "function" ? yG : _G)(t, e)) : this.node()[t];
}
function X5(t) {
  return t.trim().split(/^|\s+/);
}
function t1(t) {
  return t.classList || new Q5(t);
}
function Q5(t) {
  this._node = t, this._names = X5(t.getAttribute("class") || "");
}
Q5.prototype = {
  add: function(t) {
    var e = this._names.indexOf(t);
    e < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t) {
    var e = this._names.indexOf(t);
    e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t) {
    return this._names.indexOf(t) >= 0;
  }
};
function Y5(t, e) {
  for (var n = t1(t), i = -1, r = e.length; ++i < r; )
    n.add(e[i]);
}
function Z5(t, e) {
  for (var n = t1(t), i = -1, r = e.length; ++i < r; )
    n.remove(e[i]);
}
function vG(t) {
  return function() {
    Y5(this, t);
  };
}
function kG(t) {
  return function() {
    Z5(this, t);
  };
}
function CG(t, e) {
  return function() {
    (e.apply(this, arguments) ? Y5 : Z5)(this, t);
  };
}
function SG(t, e) {
  var n = X5(t + "");
  if (arguments.length < 2) {
    for (var i = t1(this.node()), r = -1, o = n.length; ++r < o; )
      if (!i.contains(n[r]))
        return !1;
    return !0;
  }
  return this.each((typeof e == "function" ? CG : e ? vG : kG)(n, e));
}
function MG() {
  this.textContent = "";
}
function AG(t) {
  return function() {
    this.textContent = t;
  };
}
function OG(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.textContent = e ?? "";
  };
}
function TG(t) {
  return arguments.length ? this.each(t == null ? MG : (typeof t == "function" ? OG : AG)(t)) : this.node().textContent;
}
function EG() {
  this.innerHTML = "";
}
function PG(t) {
  return function() {
    this.innerHTML = t;
  };
}
function RG(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.innerHTML = e ?? "";
  };
}
function IG(t) {
  return arguments.length ? this.each(t == null ? EG : (typeof t == "function" ? RG : PG)(t)) : this.node().innerHTML;
}
function NG() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function DG() {
  return this.each(NG);
}
function jG() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function BG() {
  return this.each(jG);
}
function LG(t) {
  var e = typeof t == "function" ? t : W5(t);
  return this.select(function() {
    return this.appendChild(e.apply(this, arguments));
  });
}
function xG() {
  return null;
}
function zG(t, e) {
  var n = typeof t == "function" ? t : W5(t), i = e == null ? xG : typeof e == "function" ? e : e1(e);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), i.apply(this, arguments) || null);
  });
}
function VG() {
  var t = this.parentNode;
  t && t.removeChild(this);
}
function FG() {
  return this.each(VG);
}
function HG() {
  var t = this.cloneNode(!1), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function WG() {
  var t = this.cloneNode(!0), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function UG(t) {
  return this.select(t ? WG : HG);
}
function qG(t) {
  return arguments.length ? this.property("__data__", t) : this.node().__data__;
}
function JG(t) {
  return function(e) {
    t.call(this, e, this.__data__);
  };
}
function KG(t) {
  return t.trim().split(/^|\s+/).map(function(e) {
    var n = "", i = e.indexOf(".");
    return i >= 0 && (n = e.slice(i + 1), e = e.slice(0, i)), { type: e, name: n };
  });
}
function GG(t) {
  return function() {
    var e = this.__on;
    if (e) {
      for (var n = 0, i = -1, r = e.length, o; n < r; ++n)
        o = e[n], (!t.type || o.type === t.type) && o.name === t.name ? this.removeEventListener(o.type, o.listener, o.options) : e[++i] = o;
      ++i ? e.length = i : delete this.__on;
    }
  };
}
function XG(t, e, n) {
  return function() {
    var i = this.__on, r, o = JG(e);
    if (i) {
      for (var s = 0, l = i.length; s < l; ++s)
        if ((r = i[s]).type === t.type && r.name === t.name) {
          this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = o, r.options = n), r.value = e;
          return;
        }
    }
    this.addEventListener(t.type, o, n), r = { type: t.type, name: t.name, value: e, listener: o, options: n }, i ? i.push(r) : this.__on = [r];
  };
}
function QG(t, e, n) {
  var i = KG(t + ""), r, o = i.length, s;
  if (arguments.length < 2) {
    var l = this.node().__on;
    if (l) {
      for (var a = 0, f = l.length, c; a < f; ++a)
        for (r = 0, c = l[a]; r < o; ++r)
          if ((s = i[r]).type === c.type && s.name === c.name)
            return c.value;
    }
    return;
  }
  for (l = e ? XG : GG, r = 0; r < o; ++r)
    this.each(l(i[r], e, n));
  return this;
}
function $5(t, e, n) {
  var i = G5(t), r = i.CustomEvent;
  typeof r == "function" ? r = new r(e, n) : (r = i.document.createEvent("Event"), n ? (r.initEvent(e, n.bubbles, n.cancelable), r.detail = n.detail) : r.initEvent(e, !1, !1)), t.dispatchEvent(r);
}
function YG(t, e) {
  return function() {
    return $5(this, t, e);
  };
}
function ZG(t, e) {
  return function() {
    return $5(this, t, e.apply(this, arguments));
  };
}
function $G(t, e) {
  return this.each((typeof e == "function" ? ZG : YG)(t, e));
}
function* eX() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, o = i.length, s; r < o; ++r)
      (s = i[r]) && (yield s);
}
var e8 = [null];
function Pi(t, e) {
  this._groups = t, this._parents = e;
}
function vf() {
  return new Pi([[document.documentElement]], e8);
}
function tX() {
  return this;
}
Pi.prototype = vf.prototype = {
  constructor: Pi,
  select: OK,
  selectAll: RK,
  selectChild: jK,
  selectChildren: zK,
  filter: VK,
  data: JK,
  enter: FK,
  exit: GK,
  join: XK,
  merge: QK,
  selection: tX,
  order: YK,
  sort: ZK,
  call: eG,
  nodes: tG,
  node: nG,
  size: iG,
  empty: rG,
  each: oG,
  attr: hG,
  style: gG,
  property: wG,
  classed: SG,
  text: TG,
  html: IG,
  raise: DG,
  lower: BG,
  append: LG,
  insert: zG,
  remove: FG,
  clone: UG,
  datum: qG,
  on: QG,
  dispatch: $G,
  [Symbol.iterator]: eX
};
function Zi(t) {
  return typeof t == "string" ? new Pi([[document.querySelector(t)]], [document.documentElement]) : new Pi([[t]], e8);
}
function nX(t) {
  let e;
  for (; e = t.sourceEvent; )
    t = e;
  return t;
}
function ss(t, e) {
  if (t = nX(t), e === void 0 && (e = t.currentTarget), e) {
    var n = e.ownerSVGElement || e;
    if (n.createSVGPoint) {
      var i = n.createSVGPoint();
      return i.x = t.clientX, i.y = t.clientY, i = i.matrixTransform(e.getScreenCTM().inverse()), [i.x, i.y];
    }
    if (e.getBoundingClientRect) {
      var r = e.getBoundingClientRect();
      return [t.clientX - r.left - e.clientLeft, t.clientY - r.top - e.clientTop];
    }
  }
  return [t.pageX, t.pageY];
}
const gm = { capture: !0, passive: !1 };
function bm(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function iX(t) {
  var e = t.document.documentElement, n = Zi(t).on("dragstart.drag", bm, gm);
  "onselectstart" in e ? n.on("selectstart.drag", bm, gm) : (e.__noselect = e.style.MozUserSelect, e.style.MozUserSelect = "none");
}
function rX(t, e) {
  var n = t.document.documentElement, i = Zi(t).on("dragstart.drag", null);
  e && (i.on("click.drag", bm, gm), setTimeout(function() {
    i.on("click.drag", null);
  }, 0)), "onselectstart" in n ? i.on("selectstart.drag", null) : (n.style.MozUserSelect = n.__noselect, delete n.__noselect);
}
function n1(t, e, n) {
  t.prototype = e.prototype = n, n.constructor = t;
}
function t8(t, e) {
  var n = Object.create(t.prototype);
  for (var i in e)
    n[i] = e[i];
  return n;
}
function kf() {
}
var ef = 0.7, Fu = 1 / ef, hl = "\\s*([+-]?\\d+)\\s*", tf = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", Dr = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", oX = /^#([0-9a-f]{3,8})$/, sX = new RegExp(`^rgb\\(${hl},${hl},${hl}\\)$`), lX = new RegExp(`^rgb\\(${Dr},${Dr},${Dr}\\)$`), aX = new RegExp(`^rgba\\(${hl},${hl},${hl},${tf}\\)$`), fX = new RegExp(`^rgba\\(${Dr},${Dr},${Dr},${tf}\\)$`), cX = new RegExp(`^hsl\\(${tf},${Dr},${Dr}\\)$`), uX = new RegExp(`^hsla\\(${tf},${Dr},${Dr},${tf}\\)$`), wv = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
n1(kf, nf, {
  copy(t) {
    return Object.assign(new this.constructor(), this, t);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: vv,
  formatHex: vv,
  formatHex8: hX,
  formatHsl: dX,
  formatRgb: kv,
  toString: kv
});
function vv() {
  return this.rgb().formatHex();
}
function hX() {
  return this.rgb().formatHex8();
}
function dX() {
  return n8(this).formatHsl();
}
function kv() {
  return this.rgb().formatRgb();
}
function nf(t) {
  var e, n;
  return t = (t + "").trim().toLowerCase(), (e = oX.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), n === 6 ? Cv(e) : n === 3 ? new bi(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, (e & 15) << 4 | e & 15, 1) : n === 8 ? uc(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (e & 255) / 255) : n === 4 ? uc(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, ((e & 15) << 4 | e & 15) / 255) : null) : (e = sX.exec(t)) ? new bi(e[1], e[2], e[3], 1) : (e = lX.exec(t)) ? new bi(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, 1) : (e = aX.exec(t)) ? uc(e[1], e[2], e[3], e[4]) : (e = fX.exec(t)) ? uc(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, e[4]) : (e = cX.exec(t)) ? Av(e[1], e[2] / 100, e[3] / 100, 1) : (e = uX.exec(t)) ? Av(e[1], e[2] / 100, e[3] / 100, e[4]) : wv.hasOwnProperty(t) ? Cv(wv[t]) : t === "transparent" ? new bi(NaN, NaN, NaN, 0) : null;
}
function Cv(t) {
  return new bi(t >> 16 & 255, t >> 8 & 255, t & 255, 1);
}
function uc(t, e, n, i) {
  return i <= 0 && (t = e = n = NaN), new bi(t, e, n, i);
}
function pX(t) {
  return t instanceof kf || (t = nf(t)), t ? (t = t.rgb(), new bi(t.r, t.g, t.b, t.opacity)) : new bi();
}
function _m(t, e, n, i) {
  return arguments.length === 1 ? pX(t) : new bi(t, e, n, i ?? 1);
}
function bi(t, e, n, i) {
  this.r = +t, this.g = +e, this.b = +n, this.opacity = +i;
}
n1(bi, _m, t8(kf, {
  brighter(t) {
    return t = t == null ? Fu : Math.pow(Fu, t), new bi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? ef : Math.pow(ef, t), new bi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new bi(ws(this.r), ws(this.g), ws(this.b), Hu(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: Sv,
  formatHex: Sv,
  formatHex8: mX,
  formatRgb: Mv,
  toString: Mv
}));
function Sv() {
  return `#${ms(this.r)}${ms(this.g)}${ms(this.b)}`;
}
function mX() {
  return `#${ms(this.r)}${ms(this.g)}${ms(this.b)}${ms((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function Mv() {
  const t = Hu(this.opacity);
  return `${t === 1 ? "rgb(" : "rgba("}${ws(this.r)}, ${ws(this.g)}, ${ws(this.b)}${t === 1 ? ")" : `, ${t})`}`;
}
function Hu(t) {
  return isNaN(t) ? 1 : Math.max(0, Math.min(1, t));
}
function ws(t) {
  return Math.max(0, Math.min(255, Math.round(t) || 0));
}
function ms(t) {
  return t = ws(t), (t < 16 ? "0" : "") + t.toString(16);
}
function Av(t, e, n, i) {
  return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new $i(t, e, n, i);
}
function n8(t) {
  if (t instanceof $i)
    return new $i(t.h, t.s, t.l, t.opacity);
  if (t instanceof kf || (t = nf(t)), !t)
    return new $i();
  if (t instanceof $i)
    return t;
  t = t.rgb();
  var e = t.r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), o = Math.max(e, n, i), s = NaN, l = o - r, a = (o + r) / 2;
  return l ? (e === o ? s = (n - i) / l + (n < i) * 6 : n === o ? s = (i - e) / l + 2 : s = (e - n) / l + 4, l /= a < 0.5 ? o + r : 2 - o - r, s *= 60) : l = a > 0 && a < 1 ? 0 : s, new $i(s, l, a, t.opacity);
}
function gX(t, e, n, i) {
  return arguments.length === 1 ? n8(t) : new $i(t, e, n, i ?? 1);
}
function $i(t, e, n, i) {
  this.h = +t, this.s = +e, this.l = +n, this.opacity = +i;
}
n1($i, gX, t8(kf, {
  brighter(t) {
    return t = t == null ? Fu : Math.pow(Fu, t), new $i(this.h, this.s, this.l * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? ef : Math.pow(ef, t), new $i(this.h, this.s, this.l * t, this.opacity);
  },
  rgb() {
    var t = this.h % 360 + (this.h < 0) * 360, e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < 0.5 ? n : 1 - n) * e, r = 2 * n - i;
    return new bi(
      Ud(t >= 240 ? t - 240 : t + 120, r, i),
      Ud(t, r, i),
      Ud(t < 120 ? t + 240 : t - 120, r, i),
      this.opacity
    );
  },
  clamp() {
    return new $i(Ov(this.h), hc(this.s), hc(this.l), Hu(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t = Hu(this.opacity);
    return `${t === 1 ? "hsl(" : "hsla("}${Ov(this.h)}, ${hc(this.s) * 100}%, ${hc(this.l) * 100}%${t === 1 ? ")" : `, ${t})`}`;
  }
}));
function Ov(t) {
  return t = (t || 0) % 360, t < 0 ? t + 360 : t;
}
function hc(t) {
  return Math.max(0, Math.min(1, t || 0));
}
function Ud(t, e, n) {
  return (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) * 255;
}
const i8 = (t) => () => t;
function bX(t, e) {
  return function(n) {
    return t + n * e;
  };
}
function _X(t, e, n) {
  return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function(i) {
    return Math.pow(t + i * e, n);
  };
}
function yX(t) {
  return (t = +t) == 1 ? r8 : function(e, n) {
    return n - e ? _X(e, n, t) : i8(isNaN(e) ? n : e);
  };
}
function r8(t, e) {
  var n = e - t;
  return n ? bX(t, n) : i8(isNaN(t) ? e : t);
}
const Tv = function t(e) {
  var n = yX(e);
  function i(r, o) {
    var s = n((r = _m(r)).r, (o = _m(o)).r), l = n(r.g, o.g), a = n(r.b, o.b), f = r8(r.opacity, o.opacity);
    return function(c) {
      return r.r = s(c), r.g = l(c), r.b = a(c), r.opacity = f(c), r + "";
    };
  }
  return i.gamma = t, i;
}(1);
function vo(t, e) {
  return t = +t, e = +e, function(n) {
    return t * (1 - n) + e * n;
  };
}
var ym = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, qd = new RegExp(ym.source, "g");
function wX(t) {
  return function() {
    return t;
  };
}
function vX(t) {
  return function(e) {
    return t(e) + "";
  };
}
function kX(t, e) {
  var n = ym.lastIndex = qd.lastIndex = 0, i, r, o, s = -1, l = [], a = [];
  for (t = t + "", e = e + ""; (i = ym.exec(t)) && (r = qd.exec(e)); )
    (o = r.index) > n && (o = e.slice(n, o), l[s] ? l[s] += o : l[++s] = o), (i = i[0]) === (r = r[0]) ? l[s] ? l[s] += r : l[++s] = r : (l[++s] = null, a.push({ i: s, x: vo(i, r) })), n = qd.lastIndex;
  return n < e.length && (o = e.slice(n), l[s] ? l[s] += o : l[++s] = o), l.length < 2 ? a[0] ? vX(a[0].x) : wX(e) : (e = a.length, function(f) {
    for (var c = 0, u; c < e; ++c)
      l[(u = a[c]).i] = u.x(f);
    return l.join("");
  });
}
var Ev = 180 / Math.PI, wm = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function o8(t, e, n, i, r, o) {
  var s, l, a;
  return (s = Math.sqrt(t * t + e * e)) && (t /= s, e /= s), (a = t * n + e * i) && (n -= t * a, i -= e * a), (l = Math.sqrt(n * n + i * i)) && (n /= l, i /= l, a /= l), t * i < e * n && (t = -t, e = -e, a = -a, s = -s), {
    translateX: r,
    translateY: o,
    rotate: Math.atan2(e, t) * Ev,
    skewX: Math.atan(a) * Ev,
    scaleX: s,
    scaleY: l
  };
}
var dc;
function CX(t) {
  const e = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t + "");
  return e.isIdentity ? wm : o8(e.a, e.b, e.c, e.d, e.e, e.f);
}
function SX(t) {
  return t == null || (dc || (dc = document.createElementNS("http://www.w3.org/2000/svg", "g")), dc.setAttribute("transform", t), !(t = dc.transform.baseVal.consolidate())) ? wm : (t = t.matrix, o8(t.a, t.b, t.c, t.d, t.e, t.f));
}
function s8(t, e, n, i) {
  function r(f) {
    return f.length ? f.pop() + " " : "";
  }
  function o(f, c, u, h, d, p) {
    if (f !== u || c !== h) {
      var g = d.push("translate(", null, e, null, n);
      p.push({ i: g - 4, x: vo(f, u) }, { i: g - 2, x: vo(c, h) });
    } else
      (u || h) && d.push("translate(" + u + e + h + n);
  }
  function s(f, c, u, h) {
    f !== c ? (f - c > 180 ? c += 360 : c - f > 180 && (f += 360), h.push({ i: u.push(r(u) + "rotate(", null, i) - 2, x: vo(f, c) })) : c && u.push(r(u) + "rotate(" + c + i);
  }
  function l(f, c, u, h) {
    f !== c ? h.push({ i: u.push(r(u) + "skewX(", null, i) - 2, x: vo(f, c) }) : c && u.push(r(u) + "skewX(" + c + i);
  }
  function a(f, c, u, h, d, p) {
    if (f !== u || c !== h) {
      var g = d.push(r(d) + "scale(", null, ",", null, ")");
      p.push({ i: g - 4, x: vo(f, u) }, { i: g - 2, x: vo(c, h) });
    } else
      (u !== 1 || h !== 1) && d.push(r(d) + "scale(" + u + "," + h + ")");
  }
  return function(f, c) {
    var u = [], h = [];
    return f = t(f), c = t(c), o(f.translateX, f.translateY, c.translateX, c.translateY, u, h), s(f.rotate, c.rotate, u, h), l(f.skewX, c.skewX, u, h), a(f.scaleX, f.scaleY, c.scaleX, c.scaleY, u, h), f = c = null, function(d) {
      for (var p = -1, g = h.length, _; ++p < g; )
        u[(_ = h[p]).i] = _.x(d);
      return u.join("");
    };
  };
}
var MX = s8(CX, "px, ", "px)", "deg)"), AX = s8(SX, ", ", ")", ")"), OX = 1e-12;
function Pv(t) {
  return ((t = Math.exp(t)) + 1 / t) / 2;
}
function TX(t) {
  return ((t = Math.exp(t)) - 1 / t) / 2;
}
function EX(t) {
  return ((t = Math.exp(2 * t)) - 1) / (t + 1);
}
const PX = function t(e, n, i) {
  function r(o, s) {
    var l = o[0], a = o[1], f = o[2], c = s[0], u = s[1], h = s[2], d = c - l, p = u - a, g = d * d + p * p, _, b;
    if (g < OX)
      b = Math.log(h / f) / e, _ = function(S) {
        return [
          l + S * d,
          a + S * p,
          f * Math.exp(e * S * b)
        ];
      };
    else {
      var y = Math.sqrt(g), v = (h * h - f * f + i * g) / (2 * f * n * y), M = (h * h - f * f - i * g) / (2 * h * n * y), A = Math.log(Math.sqrt(v * v + 1) - v), P = Math.log(Math.sqrt(M * M + 1) - M);
      b = (P - A) / e, _ = function(S) {
        var D = S * b, x = Pv(A), V = f / (n * y) * (x * EX(e * D + A) - TX(A));
        return [
          l + V * d,
          a + V * p,
          f * x / Pv(e * D + A)
        ];
      };
    }
    return _.duration = b * 1e3 * e / Math.SQRT2, _;
  }
  return r.rho = function(o) {
    var s = Math.max(1e-3, +o), l = s * s, a = l * l;
    return t(s, l, a);
  }, r;
}(Math.SQRT2, 2, 4);
var Bl = 0, ha = 0, ra = 0, l8 = 1e3, Wu, da, Uu = 0, Rs = 0, qh = 0, rf = typeof performance == "object" && performance.now ? performance : Date, a8 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t) {
  setTimeout(t, 17);
};
function i1() {
  return Rs || (a8(RX), Rs = rf.now() + qh);
}
function RX() {
  Rs = 0;
}
function qu() {
  this._call = this._time = this._next = null;
}
qu.prototype = f8.prototype = {
  constructor: qu,
  restart: function(t, e, n) {
    if (typeof t != "function")
      throw new TypeError("callback is not a function");
    n = (n == null ? i1() : +n) + (e == null ? 0 : +e), !this._next && da !== this && (da ? da._next = this : Wu = this, da = this), this._call = t, this._time = n, vm();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, vm());
  }
};
function f8(t, e, n) {
  var i = new qu();
  return i.restart(t, e, n), i;
}
function IX() {
  i1(), ++Bl;
  for (var t = Wu, e; t; )
    (e = Rs - t._time) >= 0 && t._call.call(void 0, e), t = t._next;
  --Bl;
}
function Rv() {
  Rs = (Uu = rf.now()) + qh, Bl = ha = 0;
  try {
    IX();
  } finally {
    Bl = 0, DX(), Rs = 0;
  }
}
function NX() {
  var t = rf.now(), e = t - Uu;
  e > l8 && (qh -= e, Uu = t);
}
function DX() {
  for (var t, e = Wu, n, i = 1 / 0; e; )
    e._call ? (i > e._time && (i = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : Wu = n);
  da = t, vm(i);
}
function vm(t) {
  if (!Bl) {
    ha && (ha = clearTimeout(ha));
    var e = t - Rs;
    e > 24 ? (t < 1 / 0 && (ha = setTimeout(Rv, t - rf.now() - qh)), ra && (ra = clearInterval(ra))) : (ra || (Uu = rf.now(), ra = setInterval(NX, l8)), Bl = 1, a8(Rv));
  }
}
function Iv(t, e, n) {
  var i = new qu();
  return e = e == null ? 0 : +e, i.restart((r) => {
    i.stop(), t(r + e);
  }, e, n), i;
}
var jX = $g("start", "end", "cancel", "interrupt"), BX = [], c8 = 0, Nv = 1, km = 2, Dc = 3, Dv = 4, Cm = 5, jc = 6;
function Jh(t, e, n, i, r, o) {
  var s = t.__transition;
  if (!s)
    t.__transition = {};
  else if (n in s)
    return;
  LX(t, n, {
    name: e,
    index: i,
    group: r,
    on: jX,
    tween: BX,
    time: o.time,
    delay: o.delay,
    duration: o.duration,
    ease: o.ease,
    timer: null,
    state: c8
  });
}
function r1(t, e) {
  var n = hr(t, e);
  if (n.state > c8)
    throw new Error("too late; already scheduled");
  return n;
}
function Ur(t, e) {
  var n = hr(t, e);
  if (n.state > Dc)
    throw new Error("too late; already running");
  return n;
}
function hr(t, e) {
  var n = t.__transition;
  if (!n || !(n = n[e]))
    throw new Error("transition not found");
  return n;
}
function LX(t, e, n) {
  var i = t.__transition, r;
  i[e] = n, n.timer = f8(o, 0, n.time);
  function o(f) {
    n.state = Nv, n.timer.restart(s, n.delay, n.time), n.delay <= f && s(f - n.delay);
  }
  function s(f) {
    var c, u, h, d;
    if (n.state !== Nv)
      return a();
    for (c in i)
      if (d = i[c], d.name === n.name) {
        if (d.state === Dc)
          return Iv(s);
        d.state === Dv ? (d.state = jc, d.timer.stop(), d.on.call("interrupt", t, t.__data__, d.index, d.group), delete i[c]) : +c < e && (d.state = jc, d.timer.stop(), d.on.call("cancel", t, t.__data__, d.index, d.group), delete i[c]);
      }
    if (Iv(function() {
      n.state === Dc && (n.state = Dv, n.timer.restart(l, n.delay, n.time), l(f));
    }), n.state = km, n.on.call("start", t, t.__data__, n.index, n.group), n.state === km) {
      for (n.state = Dc, r = new Array(h = n.tween.length), c = 0, u = -1; c < h; ++c)
        (d = n.tween[c].value.call(t, t.__data__, n.index, n.group)) && (r[++u] = d);
      r.length = u + 1;
    }
  }
  function l(f) {
    for (var c = f < n.duration ? n.ease.call(null, f / n.duration) : (n.timer.restart(a), n.state = Cm, 1), u = -1, h = r.length; ++u < h; )
      r[u].call(t, c);
    n.state === Cm && (n.on.call("end", t, t.__data__, n.index, n.group), a());
  }
  function a() {
    n.state = jc, n.timer.stop(), delete i[e];
    for (var f in i)
      return;
    delete t.__transition;
  }
}
function Bc(t, e) {
  var n = t.__transition, i, r, o = !0, s;
  if (n) {
    e = e == null ? null : e + "";
    for (s in n) {
      if ((i = n[s]).name !== e) {
        o = !1;
        continue;
      }
      r = i.state > km && i.state < Cm, i.state = jc, i.timer.stop(), i.on.call(r ? "interrupt" : "cancel", t, t.__data__, i.index, i.group), delete n[s];
    }
    o && delete t.__transition;
  }
}
function xX(t) {
  return this.each(function() {
    Bc(this, t);
  });
}
function zX(t, e) {
  var n, i;
  return function() {
    var r = Ur(this, t), o = r.tween;
    if (o !== n) {
      i = n = o;
      for (var s = 0, l = i.length; s < l; ++s)
        if (i[s].name === e) {
          i = i.slice(), i.splice(s, 1);
          break;
        }
    }
    r.tween = i;
  };
}
function VX(t, e, n) {
  var i, r;
  if (typeof n != "function")
    throw new Error();
  return function() {
    var o = Ur(this, t), s = o.tween;
    if (s !== i) {
      r = (i = s).slice();
      for (var l = { name: e, value: n }, a = 0, f = r.length; a < f; ++a)
        if (r[a].name === e) {
          r[a] = l;
          break;
        }
      a === f && r.push(l);
    }
    o.tween = r;
  };
}
function FX(t, e) {
  var n = this._id;
  if (t += "", arguments.length < 2) {
    for (var i = hr(this.node(), n).tween, r = 0, o = i.length, s; r < o; ++r)
      if ((s = i[r]).name === t)
        return s.value;
    return null;
  }
  return this.each((e == null ? zX : VX)(n, t, e));
}
function o1(t, e, n) {
  var i = t._id;
  return t.each(function() {
    var r = Ur(this, i);
    (r.value || (r.value = {}))[e] = n.apply(this, arguments);
  }), function(r) {
    return hr(r, i).value[e];
  };
}
function u8(t, e) {
  var n;
  return (typeof e == "number" ? vo : e instanceof nf ? Tv : (n = nf(e)) ? (e = n, Tv) : kX)(t, e);
}
function HX(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function WX(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function UX(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = this.getAttribute(t);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function qX(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = this.getAttributeNS(t.space, t.local);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function JX(t, e, n) {
  var i, r, o;
  return function() {
    var s, l = n(this), a;
    return l == null ? void this.removeAttribute(t) : (s = this.getAttribute(t), a = l + "", s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l)));
  };
}
function KX(t, e, n) {
  var i, r, o;
  return function() {
    var s, l = n(this), a;
    return l == null ? void this.removeAttributeNS(t.space, t.local) : (s = this.getAttributeNS(t.space, t.local), a = l + "", s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l)));
  };
}
function GX(t, e) {
  var n = Uh(t), i = n === "transform" ? AX : u8;
  return this.attrTween(t, typeof e == "function" ? (n.local ? KX : JX)(n, i, o1(this, "attr." + t, e)) : e == null ? (n.local ? WX : HX)(n) : (n.local ? qX : UX)(n, i, e));
}
function XX(t, e) {
  return function(n) {
    this.setAttribute(t, e.call(this, n));
  };
}
function QX(t, e) {
  return function(n) {
    this.setAttributeNS(t.space, t.local, e.call(this, n));
  };
}
function YX(t, e) {
  var n, i;
  function r() {
    var o = e.apply(this, arguments);
    return o !== i && (n = (i = o) && QX(t, o)), n;
  }
  return r._value = e, r;
}
function ZX(t, e) {
  var n, i;
  function r() {
    var o = e.apply(this, arguments);
    return o !== i && (n = (i = o) && XX(t, o)), n;
  }
  return r._value = e, r;
}
function $X(t, e) {
  var n = "attr." + t;
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (e == null)
    return this.tween(n, null);
  if (typeof e != "function")
    throw new Error();
  var i = Uh(t);
  return this.tween(n, (i.local ? YX : ZX)(i, e));
}
function eQ(t, e) {
  return function() {
    r1(this, t).delay = +e.apply(this, arguments);
  };
}
function tQ(t, e) {
  return e = +e, function() {
    r1(this, t).delay = e;
  };
}
function nQ(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? eQ : tQ)(e, t)) : hr(this.node(), e).delay;
}
function iQ(t, e) {
  return function() {
    Ur(this, t).duration = +e.apply(this, arguments);
  };
}
function rQ(t, e) {
  return e = +e, function() {
    Ur(this, t).duration = e;
  };
}
function oQ(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? iQ : rQ)(e, t)) : hr(this.node(), e).duration;
}
function sQ(t, e) {
  if (typeof e != "function")
    throw new Error();
  return function() {
    Ur(this, t).ease = e;
  };
}
function lQ(t) {
  var e = this._id;
  return arguments.length ? this.each(sQ(e, t)) : hr(this.node(), e).ease;
}
function aQ(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    if (typeof n != "function")
      throw new Error();
    Ur(this, t).ease = n;
  };
}
function fQ(t) {
  if (typeof t != "function")
    throw new Error();
  return this.each(aQ(this._id, t));
}
function cQ(t) {
  typeof t != "function" && (t = q5(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = [], a, f = 0; f < s; ++f)
      (a = o[f]) && t.call(a, a.__data__, f, o) && l.push(a);
  return new ao(i, this._parents, this._name, this._id);
}
function uQ(t) {
  if (t._id !== this._id)
    throw new Error();
  for (var e = this._groups, n = t._groups, i = e.length, r = n.length, o = Math.min(i, r), s = new Array(i), l = 0; l < o; ++l)
    for (var a = e[l], f = n[l], c = a.length, u = s[l] = new Array(c), h, d = 0; d < c; ++d)
      (h = a[d] || f[d]) && (u[d] = h);
  for (; l < i; ++l)
    s[l] = e[l];
  return new ao(s, this._parents, this._name, this._id);
}
function hQ(t) {
  return (t + "").trim().split(/^|\s+/).every(function(e) {
    var n = e.indexOf(".");
    return n >= 0 && (e = e.slice(0, n)), !e || e === "start";
  });
}
function dQ(t, e, n) {
  var i, r, o = hQ(e) ? r1 : Ur;
  return function() {
    var s = o(this, t), l = s.on;
    l !== i && (r = (i = l).copy()).on(e, n), s.on = r;
  };
}
function pQ(t, e) {
  var n = this._id;
  return arguments.length < 2 ? hr(this.node(), n).on.on(t) : this.each(dQ(n, t, e));
}
function mQ(t) {
  return function() {
    var e = this.parentNode;
    for (var n in this.__transition)
      if (+n !== t)
        return;
    e && e.removeChild(this);
  };
}
function gQ() {
  return this.on("end.remove", mQ(this._id));
}
function bQ(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = e1(t));
  for (var i = this._groups, r = i.length, o = new Array(r), s = 0; s < r; ++s)
    for (var l = i[s], a = l.length, f = o[s] = new Array(a), c, u, h = 0; h < a; ++h)
      (c = l[h]) && (u = t.call(c, c.__data__, h, l)) && ("__data__" in c && (u.__data__ = c.__data__), f[h] = u, Jh(f[h], e, n, h, f, hr(c, n)));
  return new ao(o, this._parents, e, n);
}
function _Q(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = U5(t));
  for (var i = this._groups, r = i.length, o = [], s = [], l = 0; l < r; ++l)
    for (var a = i[l], f = a.length, c, u = 0; u < f; ++u)
      if (c = a[u]) {
        for (var h = t.call(c, c.__data__, u, a), d, p = hr(c, n), g = 0, _ = h.length; g < _; ++g)
          (d = h[g]) && Jh(d, e, n, g, h, p);
        o.push(h), s.push(c);
      }
  return new ao(o, s, e, n);
}
var yQ = vf.prototype.constructor;
function wQ() {
  return new yQ(this._groups, this._parents);
}
function vQ(t, e) {
  var n, i, r;
  return function() {
    var o = jl(this, t), s = (this.style.removeProperty(t), jl(this, t));
    return o === s ? null : o === n && s === i ? r : r = e(n = o, i = s);
  };
}
function h8(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function kQ(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = jl(this, t);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function CQ(t, e, n) {
  var i, r, o;
  return function() {
    var s = jl(this, t), l = n(this), a = l + "";
    return l == null && (a = l = (this.style.removeProperty(t), jl(this, t))), s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l));
  };
}
function SQ(t, e) {
  var n, i, r, o = "style." + e, s = "end." + o, l;
  return function() {
    var a = Ur(this, t), f = a.on, c = a.value[o] == null ? l || (l = h8(e)) : void 0;
    (f !== n || r !== c) && (i = (n = f).copy()).on(s, r = c), a.on = i;
  };
}
function MQ(t, e, n) {
  var i = (t += "") == "transform" ? MX : u8;
  return e == null ? this.styleTween(t, vQ(t, i)).on("end.style." + t, h8(t)) : typeof e == "function" ? this.styleTween(t, CQ(t, i, o1(this, "style." + t, e))).each(SQ(this._id, t)) : this.styleTween(t, kQ(t, i, e), n).on("end.style." + t, null);
}
function AQ(t, e, n) {
  return function(i) {
    this.style.setProperty(t, e.call(this, i), n);
  };
}
function OQ(t, e, n) {
  var i, r;
  function o() {
    var s = e.apply(this, arguments);
    return s !== r && (i = (r = s) && AQ(t, s, n)), i;
  }
  return o._value = e, o;
}
function TQ(t, e, n) {
  var i = "style." + (t += "");
  if (arguments.length < 2)
    return (i = this.tween(i)) && i._value;
  if (e == null)
    return this.tween(i, null);
  if (typeof e != "function")
    throw new Error();
  return this.tween(i, OQ(t, e, n ?? ""));
}
function EQ(t) {
  return function() {
    this.textContent = t;
  };
}
function PQ(t) {
  return function() {
    var e = t(this);
    this.textContent = e ?? "";
  };
}
function RQ(t) {
  return this.tween("text", typeof t == "function" ? PQ(o1(this, "text", t)) : EQ(t == null ? "" : t + ""));
}
function IQ(t) {
  return function(e) {
    this.textContent = t.call(this, e);
  };
}
function NQ(t) {
  var e, n;
  function i() {
    var r = t.apply(this, arguments);
    return r !== n && (e = (n = r) && IQ(r)), e;
  }
  return i._value = t, i;
}
function DQ(t) {
  var e = "text";
  if (arguments.length < 1)
    return (e = this.tween(e)) && e._value;
  if (t == null)
    return this.tween(e, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(e, NQ(t));
}
function jQ() {
  for (var t = this._name, e = this._id, n = d8(), i = this._groups, r = i.length, o = 0; o < r; ++o)
    for (var s = i[o], l = s.length, a, f = 0; f < l; ++f)
      if (a = s[f]) {
        var c = hr(a, e);
        Jh(a, t, n, f, s, {
          time: c.time + c.delay + c.duration,
          delay: 0,
          duration: c.duration,
          ease: c.ease
        });
      }
  return new ao(i, this._parents, t, n);
}
function BQ() {
  var t, e, n = this, i = n._id, r = n.size();
  return new Promise(function(o, s) {
    var l = { value: s }, a = { value: function() {
      --r === 0 && o();
    } };
    n.each(function() {
      var f = Ur(this, i), c = f.on;
      c !== t && (e = (t = c).copy(), e._.cancel.push(l), e._.interrupt.push(l), e._.end.push(a)), f.on = e;
    }), r === 0 && o();
  });
}
var LQ = 0;
function ao(t, e, n, i) {
  this._groups = t, this._parents = e, this._name = n, this._id = i;
}
function d8() {
  return ++LQ;
}
var Gr = vf.prototype;
ao.prototype = {
  constructor: ao,
  select: bQ,
  selectAll: _Q,
  selectChild: Gr.selectChild,
  selectChildren: Gr.selectChildren,
  filter: cQ,
  merge: uQ,
  selection: wQ,
  transition: jQ,
  call: Gr.call,
  nodes: Gr.nodes,
  node: Gr.node,
  size: Gr.size,
  empty: Gr.empty,
  each: Gr.each,
  on: pQ,
  attr: GX,
  attrTween: $X,
  style: MQ,
  styleTween: TQ,
  text: RQ,
  textTween: DQ,
  remove: gQ,
  tween: FX,
  delay: nQ,
  duration: oQ,
  ease: lQ,
  easeVarying: fQ,
  end: BQ,
  [Symbol.iterator]: Gr[Symbol.iterator]
};
function xQ(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}
var zQ = {
  time: null,
  delay: 0,
  duration: 250,
  ease: xQ
};
function VQ(t, e) {
  for (var n; !(n = t.__transition) || !(n = n[e]); )
    if (!(t = t.parentNode))
      throw new Error(`transition ${e} not found`);
  return n;
}
function FQ(t) {
  var e, n;
  t instanceof ao ? (e = t._id, t = t._name) : (e = d8(), (n = zQ).time = i1(), t = t == null ? null : t + "");
  for (var i = this._groups, r = i.length, o = 0; o < r; ++o)
    for (var s = i[o], l = s.length, a, f = 0; f < l; ++f)
      (a = s[f]) && Jh(a, t, e, f, s, n || VQ(a, e));
  return new ao(i, this._parents, t, e);
}
vf.prototype.interrupt = xX;
vf.prototype.transition = FQ;
const pc = (t) => () => t;
function HQ(t, {
  sourceEvent: e,
  target: n,
  transform: i,
  dispatch: r
}) {
  Object.defineProperties(this, {
    type: { value: t, enumerable: !0, configurable: !0 },
    sourceEvent: { value: e, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    transform: { value: i, enumerable: !0, configurable: !0 },
    _: { value: r }
  });
}
function eo(t, e, n) {
  this.k = t, this.x = e, this.y = n;
}
eo.prototype = {
  constructor: eo,
  scale: function(t) {
    return t === 1 ? this : new eo(this.k * t, this.x, this.y);
  },
  translate: function(t, e) {
    return t === 0 & e === 0 ? this : new eo(this.k, this.x + this.k * t, this.y + this.k * e);
  },
  apply: function(t) {
    return [t[0] * this.k + this.x, t[1] * this.k + this.y];
  },
  applyX: function(t) {
    return t * this.k + this.x;
  },
  applyY: function(t) {
    return t * this.k + this.y;
  },
  invert: function(t) {
    return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k];
  },
  invertX: function(t) {
    return (t - this.x) / this.k;
  },
  invertY: function(t) {
    return (t - this.y) / this.k;
  },
  rescaleX: function(t) {
    return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t));
  },
  rescaleY: function(t) {
    return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Ju = new eo(1, 0, 0);
eo.prototype;
function Jd(t) {
  t.stopImmediatePropagation();
}
function oa(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function WQ(t) {
  return (!t.ctrlKey || t.type === "wheel") && !t.button;
}
function UQ() {
  var t = this;
  return t instanceof SVGElement ? (t = t.ownerSVGElement || t, t.hasAttribute("viewBox") ? (t = t.viewBox.baseVal, [[t.x, t.y], [t.x + t.width, t.y + t.height]]) : [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]]) : [[0, 0], [t.clientWidth, t.clientHeight]];
}
function jv() {
  return this.__zoom || Ju;
}
function qQ(t) {
  return -t.deltaY * (t.deltaMode === 1 ? 0.05 : t.deltaMode ? 1 : 2e-3) * (t.ctrlKey ? 10 : 1);
}
function JQ() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function KQ(t, e, n) {
  var i = t.invertX(e[0][0]) - n[0][0], r = t.invertX(e[1][0]) - n[1][0], o = t.invertY(e[0][1]) - n[0][1], s = t.invertY(e[1][1]) - n[1][1];
  return t.translate(
    r > i ? (i + r) / 2 : Math.min(0, i) || Math.max(0, r),
    s > o ? (o + s) / 2 : Math.min(0, o) || Math.max(0, s)
  );
}
function GQ() {
  var t = WQ, e = UQ, n = KQ, i = qQ, r = JQ, o = [0, 1 / 0], s = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], l = 250, a = PX, f = $g("start", "zoom", "end"), c, u, h, d = 500, p = 150, g = 0, _ = 10;
  function b(C) {
    C.property("__zoom", jv).on("wheel.zoom", D, { passive: !1 }).on("mousedown.zoom", x).on("dblclick.zoom", V).filter(r).on("touchstart.zoom", R).on("touchmove.zoom", W).on("touchend.zoom touchcancel.zoom", U).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  b.transform = function(C, L, I, H) {
    var N = C.selection ? C.selection() : C;
    N.property("__zoom", jv), C !== N ? A(C, L, I, H) : N.interrupt().each(function() {
      P(this, arguments).event(H).start().zoom(null, typeof L == "function" ? L.apply(this, arguments) : L).end();
    });
  }, b.scaleBy = function(C, L, I, H) {
    b.scaleTo(C, function() {
      var N = this.__zoom.k, T = typeof L == "function" ? L.apply(this, arguments) : L;
      return N * T;
    }, I, H);
  }, b.scaleTo = function(C, L, I, H) {
    b.transform(C, function() {
      var N = e.apply(this, arguments), T = this.__zoom, K = I == null ? M(N) : typeof I == "function" ? I.apply(this, arguments) : I, ne = T.invert(K), z = typeof L == "function" ? L.apply(this, arguments) : L;
      return n(v(y(T, z), K, ne), N, s);
    }, I, H);
  }, b.translateBy = function(C, L, I, H) {
    b.transform(C, function() {
      return n(this.__zoom.translate(
        typeof L == "function" ? L.apply(this, arguments) : L,
        typeof I == "function" ? I.apply(this, arguments) : I
      ), e.apply(this, arguments), s);
    }, null, H);
  }, b.translateTo = function(C, L, I, H, N) {
    b.transform(C, function() {
      var T = e.apply(this, arguments), K = this.__zoom, ne = H == null ? M(T) : typeof H == "function" ? H.apply(this, arguments) : H;
      return n(Ju.translate(ne[0], ne[1]).scale(K.k).translate(
        typeof L == "function" ? -L.apply(this, arguments) : -L,
        typeof I == "function" ? -I.apply(this, arguments) : -I
      ), T, s);
    }, H, N);
  };
  function y(C, L) {
    return L = Math.max(o[0], Math.min(o[1], L)), L === C.k ? C : new eo(L, C.x, C.y);
  }
  function v(C, L, I) {
    var H = L[0] - I[0] * C.k, N = L[1] - I[1] * C.k;
    return H === C.x && N === C.y ? C : new eo(C.k, H, N);
  }
  function M(C) {
    return [(+C[0][0] + +C[1][0]) / 2, (+C[0][1] + +C[1][1]) / 2];
  }
  function A(C, L, I, H) {
    C.on("start.zoom", function() {
      P(this, arguments).event(H).start();
    }).on("interrupt.zoom end.zoom", function() {
      P(this, arguments).event(H).end();
    }).tween("zoom", function() {
      var N = this, T = arguments, K = P(N, T).event(H), ne = e.apply(N, T), z = I == null ? M(ne) : typeof I == "function" ? I.apply(N, T) : I, Y = Math.max(ne[1][0] - ne[0][0], ne[1][1] - ne[0][1]), $ = N.__zoom, Q = typeof L == "function" ? L.apply(N, T) : L, Te = a($.invert(z).concat(Y / $.k), Q.invert(z).concat(Y / Q.k));
      return function(Se) {
        if (Se === 1)
          Se = Q;
        else {
          var Fe = Te(Se), Z = Y / Fe[2];
          Se = new eo(Z, z[0] - Fe[0] * Z, z[1] - Fe[1] * Z);
        }
        K.zoom(null, Se);
      };
    });
  }
  function P(C, L, I) {
    return !I && C.__zooming || new S(C, L);
  }
  function S(C, L) {
    this.that = C, this.args = L, this.active = 0, this.sourceEvent = null, this.extent = e.apply(C, L), this.taps = 0;
  }
  S.prototype = {
    event: function(C) {
      return C && (this.sourceEvent = C), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(C, L) {
      return this.mouse && C !== "mouse" && (this.mouse[1] = L.invert(this.mouse[0])), this.touch0 && C !== "touch" && (this.touch0[1] = L.invert(this.touch0[0])), this.touch1 && C !== "touch" && (this.touch1[1] = L.invert(this.touch1[0])), this.that.__zoom = L, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(C) {
      var L = Zi(this.that).datum();
      f.call(
        C,
        this.that,
        new HQ(C, {
          sourceEvent: this.sourceEvent,
          target: b,
          type: C,
          transform: this.that.__zoom,
          dispatch: f
        }),
        L
      );
    }
  };
  function D(C, ...L) {
    if (!t.apply(this, arguments))
      return;
    var I = P(this, L).event(C), H = this.__zoom, N = Math.max(o[0], Math.min(o[1], H.k * Math.pow(2, i.apply(this, arguments)))), T = ss(C);
    if (I.wheel)
      (I.mouse[0][0] !== T[0] || I.mouse[0][1] !== T[1]) && (I.mouse[1] = H.invert(I.mouse[0] = T)), clearTimeout(I.wheel);
    else {
      if (H.k === N)
        return;
      I.mouse = [T, H.invert(T)], Bc(this), I.start();
    }
    oa(C), I.wheel = setTimeout(K, p), I.zoom("mouse", n(v(y(H, N), I.mouse[0], I.mouse[1]), I.extent, s));
    function K() {
      I.wheel = null, I.end();
    }
  }
  function x(C, ...L) {
    if (h || !t.apply(this, arguments))
      return;
    var I = C.currentTarget, H = P(this, L, !0).event(C), N = Zi(C.view).on("mousemove.zoom", z, !0).on("mouseup.zoom", Y, !0), T = ss(C, I), K = C.clientX, ne = C.clientY;
    iX(C.view), Jd(C), H.mouse = [T, this.__zoom.invert(T)], Bc(this), H.start();
    function z($) {
      if (oa($), !H.moved) {
        var Q = $.clientX - K, Te = $.clientY - ne;
        H.moved = Q * Q + Te * Te > g;
      }
      H.event($).zoom("mouse", n(v(H.that.__zoom, H.mouse[0] = ss($, I), H.mouse[1]), H.extent, s));
    }
    function Y($) {
      N.on("mousemove.zoom mouseup.zoom", null), rX($.view, H.moved), oa($), H.event($).end();
    }
  }
  function V(C, ...L) {
    if (t.apply(this, arguments)) {
      var I = this.__zoom, H = ss(C.changedTouches ? C.changedTouches[0] : C, this), N = I.invert(H), T = I.k * (C.shiftKey ? 0.5 : 2), K = n(v(y(I, T), H, N), e.apply(this, L), s);
      oa(C), l > 0 ? Zi(this).transition().duration(l).call(A, K, H, C) : Zi(this).call(b.transform, K, H, C);
    }
  }
  function R(C, ...L) {
    if (t.apply(this, arguments)) {
      var I = C.touches, H = I.length, N = P(this, L, C.changedTouches.length === H).event(C), T, K, ne, z;
      for (Jd(C), K = 0; K < H; ++K)
        ne = I[K], z = ss(ne, this), z = [z, this.__zoom.invert(z), ne.identifier], N.touch0 ? !N.touch1 && N.touch0[2] !== z[2] && (N.touch1 = z, N.taps = 0) : (N.touch0 = z, T = !0, N.taps = 1 + !!c);
      c && (c = clearTimeout(c)), T && (N.taps < 2 && (u = z[0], c = setTimeout(function() {
        c = null;
      }, d)), Bc(this), N.start());
    }
  }
  function W(C, ...L) {
    if (this.__zooming) {
      var I = P(this, L).event(C), H = C.changedTouches, N = H.length, T, K, ne, z;
      for (oa(C), T = 0; T < N; ++T)
        K = H[T], ne = ss(K, this), I.touch0 && I.touch0[2] === K.identifier ? I.touch0[0] = ne : I.touch1 && I.touch1[2] === K.identifier && (I.touch1[0] = ne);
      if (K = I.that.__zoom, I.touch1) {
        var Y = I.touch0[0], $ = I.touch0[1], Q = I.touch1[0], Te = I.touch1[1], Se = (Se = Q[0] - Y[0]) * Se + (Se = Q[1] - Y[1]) * Se, Fe = (Fe = Te[0] - $[0]) * Fe + (Fe = Te[1] - $[1]) * Fe;
        K = y(K, Math.sqrt(Se / Fe)), ne = [(Y[0] + Q[0]) / 2, (Y[1] + Q[1]) / 2], z = [($[0] + Te[0]) / 2, ($[1] + Te[1]) / 2];
      } else if (I.touch0)
        ne = I.touch0[0], z = I.touch0[1];
      else
        return;
      I.zoom("touch", n(v(K, ne, z), I.extent, s));
    }
  }
  function U(C, ...L) {
    if (this.__zooming) {
      var I = P(this, L).event(C), H = C.changedTouches, N = H.length, T, K;
      for (Jd(C), h && clearTimeout(h), h = setTimeout(function() {
        h = null;
      }, d), T = 0; T < N; ++T)
        K = H[T], I.touch0 && I.touch0[2] === K.identifier ? delete I.touch0 : I.touch1 && I.touch1[2] === K.identifier && delete I.touch1;
      if (I.touch1 && !I.touch0 && (I.touch0 = I.touch1, delete I.touch1), I.touch0)
        I.touch0[1] = this.__zoom.invert(I.touch0[0]);
      else if (I.end(), I.taps === 2 && (K = ss(K, this), Math.hypot(u[0] - K[0], u[1] - K[1]) < _)) {
        var ne = Zi(this).on("dblclick.zoom");
        ne && ne.apply(this, arguments);
      }
    }
  }
  return b.wheelDelta = function(C) {
    return arguments.length ? (i = typeof C == "function" ? C : pc(+C), b) : i;
  }, b.filter = function(C) {
    return arguments.length ? (t = typeof C == "function" ? C : pc(!!C), b) : t;
  }, b.touchable = function(C) {
    return arguments.length ? (r = typeof C == "function" ? C : pc(!!C), b) : r;
  }, b.extent = function(C) {
    return arguments.length ? (e = typeof C == "function" ? C : pc([[+C[0][0], +C[0][1]], [+C[1][0], +C[1][1]]]), b) : e;
  }, b.scaleExtent = function(C) {
    return arguments.length ? (o[0] = +C[0], o[1] = +C[1], b) : [o[0], o[1]];
  }, b.translateExtent = function(C) {
    return arguments.length ? (s[0][0] = +C[0][0], s[1][0] = +C[1][0], s[0][1] = +C[0][1], s[1][1] = +C[1][1], b) : [[s[0][0], s[0][1]], [s[1][0], s[1][1]]];
  }, b.constrain = function(C) {
    return arguments.length ? (n = C, b) : n;
  }, b.duration = function(C) {
    return arguments.length ? (l = +C, b) : l;
  }, b.interpolate = function(C) {
    return arguments.length ? (a = C, b) : a;
  }, b.on = function() {
    var C = f.on.apply(f, arguments);
    return C === f ? b : C;
  }, b.clickDistance = function(C) {
    return arguments.length ? (g = (C = +C) * C, b) : Math.sqrt(g);
  }, b.tapDistance = function(C) {
    return arguments.length ? (_ = +C, b) : _;
  }, b;
}
const { window: XQ } = Ku;
function Bv(t, e, n) {
  const i = t.slice();
  return i[68] = e[n], i;
}
function Lv(t, e, n) {
  const i = t.slice();
  return i[71] = e[n], i;
}
function xv(t, e, n) {
  const i = t.slice();
  return i[74] = e[n], i;
}
function zv(t, e, n) {
  const i = t.slice();
  return i[77] = e[n], i;
}
function Vv(t, e, n) {
  const i = t.slice();
  return i[80] = e[n], i;
}
function Fv(t) {
  var ue;
  let e, n, i, r, o = [], s = /* @__PURE__ */ new Map(), l, a, f, c, u, h, d, p, g, _, b, y, v, M, A, P, S, D, x, V, R, W, U, C, L, I, H, N, T, K, ne, z, Y, $, Q, Te, Se, Fe, Z, Ce, Ze, be, te, ke, Ue, de, Ve, De, He, at, mt, Ye, Me, ae, ze, ft, bt, gn, Un, ot, Gt, rn, ri, se, ve = [], ce = /* @__PURE__ */ new Map(), _t, qt, ct;
  r = new u6({
    props: { kind: t[1].theme.grid }
  });
  let Ft = t[8];
  const bn = (_e) => _e[80].id;
  for (let _e = 0; _e < Ft.length; _e += 1) {
    let Ee = Vv(t, Ft, _e), dt = bn(Ee);
    s.set(dt, o[_e] = Hv(dt, Ee));
  }
  let Rt = t[11] && !t[11].edge && t[11].snap && Wv(t), It = t[10] && qv(t), Nt = t[3].length > 0 && Jv(t), Et = t[12] && !((ue = t[1]) != null && ue.disableEditing) && Kv(t), xt = t[1].jsonupload && Yv(t), on = t[1].jsondownload && Zv(), sn = t[1].exportsvg && $v(), vn = t[1].exportcytoscape && ek(), ln = t[1] && tk(t), oi = t[9];
  const zn = (_e) => _e[68][0];
  for (let _e = 0; _e < oi.length; _e += 1) {
    let Ee = Bv(t, oi, _e), dt = zn(Ee);
    ce.set(dt, ve[_e] = rk(dt, Ee));
  }
  return {
    c() {
      e = O("div"), n = lt("svg"), i = lt("g"), oe(r.$$.fragment);
      for (let _e = 0; _e < o.length; _e += 1)
        o[_e].c();
      l = tt(), Rt && Rt.c(), f = q(), It && It.c(), c = q(), Nt && Nt.c(), u = q(), Et && Et.c(), h = q(), d = O("section"), p = O("sl-button-group"), g = O("sl-dropdown"), _ = O("sl-button"), _.innerHTML = `Menu
					<sl-icon slot="prefix" name="list"></sl-icon>`, b = q(), y = O("sl-menu"), xt && xt.c(), v = q(), on && on.c(), M = q(), A = O("sl-divider"), P = q(), S = O("sl-menu-item"), D = le(`Undo (⌘-Z or ⌃Z)
						`), x = O("sl-icon"), R = q(), W = O("sl-menu-item"), U = le(`Redo (⇧-⌘-Z or ⇧⌃Z)
						`), C = O("sl-icon"), I = q(), H = O("sl-menu-item"), N = le("Clear"), K = q(), ne = O("sl-divider"), z = q(), Y = O("sl-menu-label"), Y.textContent = "Export as:", $ = q(), sn && sn.c(), Q = q(), vn && vn.c(), Te = q(), Se = O("sl-divider"), Fe = q(), Z = O("sl-menu-label"), Z.textContent = "Switch Theme To", Ce = q(), Ze = O("sl-menu-item"), be = le("Classic"), ke = q(), Ue = O("sl-menu-item"), de = le("Elegant"), De = q(), He = O("sl-menu-item"), at = le("Foresight"), Ye = q(), Me = O("sl-menu-item"), ae = le("Minimal"), ft = q(), bt = O("sl-divider"), gn = q(), Un = O("sl-menu-item"), Un.textContent = "About...", ot = q(), Gt = O("sl-menu-item"), Gt.textContent = "Help...", rn = q(), ln && ln.c(), ri = q(), se = O("sl-select");
      for (let _e = 0; _e < ve.length; _e += 1)
        ve[_e].c();
      m(n, "tabindex", "0"), m(n, "xmlns", "http://www.w3.org/2000/svg"), m(n, "viewBox", "0 0 1000 1000"), m(n, "style", a = `background-color: ${t[1].theme.bgfill}`), m(n, "class", "svelte-1x2xcxd"), m(e, "class", "container svelte-1x2xcxd"), ee(_, "slot", "trigger"), ee(_, "caret", ""), ee(x, "slot", "prefix"), ee(x, "name", "arrow-counterclockwise"), ee(S, "value", "undo"), ee(S, "disabled", V = t[2].current <= 0), ee(C, "slot", "prefix"), ee(C, "name", "arrow-clockwise"), ee(W, "value", "redo"), ee(W, "disabled", L = t[2].versions[t[2].current + 1] === void 0), ee(H, "value", "clear"), ee(H, "disabled", T = t[1].items.length == 0), ee(Ze, "type", "checkbox"), ee(Ze, "value", "theme.classic"), ee(Ze, "checked", te = t[1].theme.name === "classic"), ee(Ue, "type", "checkbox"), ee(Ue, "value", "theme.elegant"), ee(Ue, "checked", Ve = t[1].theme.name === "elegant"), ee(He, "type", "checkbox"), ee(He, "value", "theme.foresight"), ee(He, "checked", mt = t[1].theme.name === "foresight"), ee(Me, "type", "checkbox"), ee(Me, "value", "theme.minimal"), ee(Me, "checked", ze = t[1].theme.name === "minimal"), ee(Un, "value", "about"), ee(Gt, "value", "help"), ee(se, "placeholder", "Highlight by Tag"), ee(se, "clearable", ""), ee(se, "class", "svelte-1x2xcxd"), m(d, "class", "globalmenu svelte-1x2xcxd");
    },
    m(_e, Ee) {
      B(_e, e, Ee), w(e, n), w(n, i), ie(r, i, null);
      for (let dt = 0; dt < o.length; dt += 1)
        o[dt].m(i, null);
      w(i, l), Rt && Rt.m(i, null), t[43](i), t[44](n), w(e, f), It && It.m(e, null), w(e, c), Nt && Nt.m(e, null), w(e, u), Et && Et.m(e, null), B(_e, h, Ee), B(_e, d, Ee), w(d, p), w(p, g), w(g, _), w(g, b), w(g, y), xt && xt.m(y, null), w(y, v), on && on.m(y, null), w(y, M), w(y, A), w(y, P), w(y, S), w(S, D), w(S, x), w(y, R), w(y, W), w(W, U), w(W, C), w(y, I), w(y, H), w(H, N), w(y, K), w(y, ne), w(y, z), w(y, Y), w(y, $), sn && sn.m(y, null), w(y, Q), vn && vn.m(y, null), w(y, Te), w(y, Se), w(y, Fe), w(y, Z), w(y, Ce), w(y, Ze), w(Ze, be), w(y, ke), w(y, Ue), w(Ue, de), w(y, De), w(y, He), w(He, at), w(y, Ye), w(y, Me), w(Me, ae), w(y, ft), w(y, bt), w(y, gn), w(y, Un), w(y, ot), w(y, Gt), w(p, rn), ln && ln.m(p, null), w(p, ri), w(p, se);
      for (let dt = 0; dt < ve.length; dt += 1)
        ve[dt].m(se, null);
      _t = !0, qt || (ct = [
        X(n, "mousedown", t[32]),
        X(n, "mousemove", t[25]),
        X(n, "mouseup", t[31]),
        X(n, "contextmenu", or(t[28])),
        X(n, "keydown", t[30]),
        X(g, "sl-select", t[37]),
        X(se, "sl-change", t[52])
      ], qt = !0);
    },
    p(_e, Ee) {
      var Ht;
      const dt = {};
      Ee[0] & 2 && (dt.kind = _e[1].theme.grid), r.$set(dt), Ee[0] & 553132298 | Ee[1] & 4 && (Ft = _e[8], me(), o = Do(o, Ee, bn, 1, _e, Ft, s, i, Xu, Hv, l, Vv), ge()), _e[11] && !_e[11].edge && _e[11].snap ? Rt ? Rt.p(_e, Ee) : (Rt = Wv(_e), Rt.c(), Rt.m(i, null)) : Rt && (Rt.d(1), Rt = null), (!_t || Ee[0] & 2 && a !== (a = `background-color: ${_e[1].theme.bgfill}`)) && m(n, "style", a), _e[10] ? It ? It.p(_e, Ee) : (It = qv(_e), It.c(), It.m(e, c)) : It && (It.d(1), It = null), _e[3].length > 0 ? Nt ? (Nt.p(_e, Ee), Ee[0] & 8 && k(Nt, 1)) : (Nt = Jv(_e), Nt.c(), k(Nt, 1), Nt.m(e, u)) : Nt && (me(), E(Nt, 1, 1, () => {
        Nt = null;
      }), ge()), _e[12] && !((Ht = _e[1]) != null && Ht.disableEditing) ? Et ? Et.p(_e, Ee) : (Et = Kv(_e), Et.c(), Et.m(e, null)) : Et && (Et.d(1), Et = null), _e[1].jsonupload ? xt ? xt.p(_e, Ee) : (xt = Yv(_e), xt.c(), xt.m(y, v)) : xt && (xt.d(1), xt = null), _e[1].jsondownload ? on || (on = Zv(), on.c(), on.m(y, M)) : on && (on.d(1), on = null), (!_t || Ee[0] & 4 && V !== (V = _e[2].current <= 0)) && ee(S, "disabled", V), (!_t || Ee[0] & 4 && L !== (L = _e[2].versions[_e[2].current + 1] === void 0)) && ee(W, "disabled", L), (!_t || Ee[0] & 2 && T !== (T = _e[1].items.length == 0)) && ee(H, "disabled", T), _e[1].exportsvg ? sn || (sn = $v(), sn.c(), sn.m(y, Q)) : sn && (sn.d(1), sn = null), _e[1].exportcytoscape ? vn || (vn = ek(), vn.c(), vn.m(y, Te)) : vn && (vn.d(1), vn = null), (!_t || Ee[0] & 2 && te !== (te = _e[1].theme.name === "classic")) && ee(Ze, "checked", te), (!_t || Ee[0] & 2 && Ve !== (Ve = _e[1].theme.name === "elegant")) && ee(Ue, "checked", Ve), (!_t || Ee[0] & 2 && mt !== (mt = _e[1].theme.name === "foresight")) && ee(He, "checked", mt), (!_t || Ee[0] & 2 && ze !== (ze = _e[1].theme.name === "minimal")) && ee(Me, "checked", ze), _e[1] ? ln ? ln.p(_e, Ee) : (ln = tk(_e), ln.c(), ln.m(p, ri)) : ln && (ln.d(1), ln = null), Ee[0] & 512 && (oi = _e[9], ve = Do(ve, Ee, zn, 1, _e, oi, ce, se, Gu, rk, null, Bv));
    },
    i(_e) {
      if (!_t) {
        k(r.$$.fragment, _e);
        for (let Ee = 0; Ee < Ft.length; Ee += 1)
          k(o[Ee]);
        k(Nt), _t = !0;
      }
    },
    o(_e) {
      E(r.$$.fragment, _e);
      for (let Ee = 0; Ee < o.length; Ee += 1)
        E(o[Ee]);
      E(Nt), _t = !1;
    },
    d(_e) {
      _e && j(e), re(r);
      for (let Ee = 0; Ee < o.length; Ee += 1)
        o[Ee].d();
      Rt && Rt.d(), t[43](null), t[44](null), It && It.d(), Nt && Nt.d(), Et && Et.d(), _e && j(h), _e && j(d), xt && xt.d(), on && on.d(), sn && sn.d(), vn && vn.d(), ln && ln.d();
      for (let Ee = 0; Ee < ve.length; Ee += 1)
        ve[Ee].d();
      qt = !1, nt(ct);
    }
  };
}
function QQ(t) {
  let e, n;
  return e = new p6({
    props: {
      item: t[80],
      theme: t[1].theme,
      isSelected: t[3].map(uk).includes(t[80].id)
    }
  }), e.$on("itemMouseDown", t[20]), e.$on("itemMouseUp", t[21]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 256 && (o.item = i[80]), r[0] & 2 && (o.theme = i[1].theme), r[0] & 264 && (o.isSelected = i[3].map(uk).includes(i[80].id)), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function YQ(t) {
  let e, n;
  return e = new s6({
    props: {
      item: t[80],
      graph: t[1],
      isSelected: t[3].map(ck).includes(t[80].id)
    }
  }), e.$on("itemMouseDown", t[20]), e.$on("itemMouseUp", t[21]), e.$on("edgeChanged", t[33]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 256 && (o.item = i[80]), r[0] & 2 && (o.graph = i[1]), r[0] & 264 && (o.isSelected = i[3].map(ck).includes(i[80].id)), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function ZQ(t) {
  let e, n;
  return e = new i6({
    props: {
      item: t[80],
      graph: t[1],
      isSelected: t[3].map(fk).includes(t[80].id),
      theme: t[1].theme,
      isHighlighted: t[13].includes(t[80].id),
      isHidden: t[13].length > 0 && !t[13].includes(t[80].id)
    }
  }), e.$on("itemMouseDown", t[20]), e.$on("itemMouseUp", t[21]), e.$on("itemBadgeClick", t[22]), e.$on("itemCollapserClick", t[23]), e.$on("nodeChanged", nY), e.$on("createnode", t[29]), e.$on("itemcontrolmousedown", t[19]), {
    c() {
      oe(e.$$.fragment);
    },
    m(i, r) {
      ie(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 256 && (o.item = i[80]), r[0] & 2 && (o.graph = i[1]), r[0] & 264 && (o.isSelected = i[3].map(fk).includes(i[80].id)), r[0] & 2 && (o.theme = i[1].theme), r[0] & 8448 && (o.isHighlighted = i[13].includes(i[80].id)), r[0] & 8448 && (o.isHidden = i[13].length > 0 && !i[13].includes(i[80].id)), e.$set(o);
    },
    i(i) {
      n || (k(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      re(e, i);
    }
  };
}
function Hv(t, e) {
  let n, i, r, o, s;
  const l = [ZQ, YQ, QQ], a = [];
  function f(c, u) {
    return c[80].kind === "node" ? 0 : c[80].kind === "edge" ? 1 : c[80].kind === "note" ? 2 : -1;
  }
  return ~(i = f(e)) && (r = a[i] = l[i](e)), {
    key: t,
    first: null,
    c() {
      n = tt(), r && r.c(), o = tt(), this.first = n;
    },
    m(c, u) {
      B(c, n, u), ~i && a[i].m(c, u), B(c, o, u), s = !0;
    },
    p(c, u) {
      e = c;
      let h = i;
      i = f(e), i === h ? ~i && a[i].p(e, u) : (r && (me(), E(a[h], 1, 1, () => {
        a[h] = null;
      }), ge()), ~i ? (r = a[i], r ? r.p(e, u) : (r = a[i] = l[i](e), r.c()), k(r, 1), r.m(o.parentNode, o)) : r = null);
    },
    i(c) {
      s || (k(r), s = !0);
    },
    o(c) {
      E(r), s = !1;
    },
    d(c) {
      c && j(n), ~i && a[i].d(c), c && j(o);
    }
  };
}
function Wv(t) {
  let e, n = t[11].snap, i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = Uv(zv(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = tt();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, o) {
      if (o[0] & 2050) {
        n = r[11].snap;
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = zv(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = Uv(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      Dt(i, r), r && j(e);
    }
  };
}
function Uv(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = lt("rect"), m(e, "x", n = t[77].x - t[77].width / 2), m(e, "y", i = t[77].y - t[77].height / 2), m(e, "width", r = t[77].width), m(e, "height", o = t[77].height), m(e, "fill", "transparent"), m(e, "stroke", s = t[1].theme.edgestroke), m(e, "stroke-width", "2px"), m(e, "stroke-dasharray", "12 8");
    },
    m(l, a) {
      B(l, e, a);
    },
    p(l, a) {
      a[0] & 2048 && n !== (n = l[77].x - l[77].width / 2) && m(e, "x", n), a[0] & 2048 && i !== (i = l[77].y - l[77].height / 2) && m(e, "y", i), a[0] & 2048 && r !== (r = l[77].width) && m(e, "width", r), a[0] & 2048 && o !== (o = l[77].height) && m(e, "height", o), a[0] & 2 && s !== (s = l[1].theme.edgestroke) && m(e, "stroke", s);
    },
    d(l) {
      l && j(e);
    }
  };
}
function qv(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = O("div"), n = le(`Please add comments only in the unzoomed, unpanned view.
				`), i = O("button"), i.textContent = "Reset Zoom", m(e, "class", "alert svelte-1x2xcxd");
    },
    m(s, l) {
      B(s, e, l), w(e, n), w(e, i), r || (o = X(i, "click", t[15]), r = !0);
    },
    p: fe,
    d(s) {
      s && j(e), r = !1, o();
    }
  };
}
function Jv(t) {
  let e, n, i;
  return n = new wK({
    props: {
      selectedItem: t[3],
      graph: t[1]
    }
  }), n.$on("graphchanged", t[45]), {
    c() {
      e = O("section"), oe(n.$$.fragment), m(e, "class", "sidepanel svelte-1x2xcxd");
    },
    m(r, o) {
      B(r, e, o), ie(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 8 && (s.selectedItem = r[3]), o[0] & 2 && (s.graph = r[1]), n.$set(s);
    },
    i(r) {
      i || (k(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), re(n);
    }
  };
}
function Kv(t) {
  let e, n;
  function i(s, l) {
    return s[3].length == 1 ? eY : $Q;
  }
  let r = i(t), o = r(t);
  return {
    c() {
      e = O("sl-menu"), o.c(), ee(e, "class", "contextmenu svelte-1x2xcxd"), ee(e, "style", n = `left: ${t[12][0]}px; top: ${t[12][1]}px;`);
    },
    m(s, l) {
      B(s, e, l), o.m(e, null);
    },
    p(s, l) {
      r === (r = i(s)) && o ? o.p(s, l) : (o.d(1), o = r(s), o && (o.c(), o.m(e, null))), l[0] & 4096 && n !== (n = `left: ${s[12][0]}px; top: ${s[12][1]}px;`) && ee(e, "style", n);
    },
    d(s) {
      s && j(e), o.d();
    }
  };
}
function $Q(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = O("sl-menu-item"), e.textContent = "Create new Node", n = q(), i = O("sl-menu-item"), i.textContent = "Create new Text Note", r = q(), o = O("sl-menu-item"), o.textContent = "Clear Graph", s = q(), l = O("sl-menu-item"), l.textContent = "Center here", ee(e, "value", "createnode"), ee(i, "value", "createnote"), ee(o, "value", "cleargraph"), ee(l, "value", "centergraph");
    },
    m(c, u) {
      B(c, e, u), B(c, n, u), B(c, i, u), B(c, r, u), B(c, o, u), B(c, s, u), B(c, l, u), a || (f = [
        X(e, "click", t[26]),
        X(i, "click", t[27]),
        X(o, "click", t[16]),
        X(l, "click", t[17])
      ], a = !0);
    },
    p: fe,
    d(c) {
      c && j(e), c && j(n), c && j(i), c && j(r), c && j(o), c && j(s), c && j(l), a = !1, nt(f);
    }
  };
}
function eY(t) {
  let e, n, i, r = t[3][0].label + "", o, s, l = ["node", "edge"].includes(t[3][0].kind), a, f, c = t[3][0].kind === "node" && Gv(t), u = l && Qv();
  return {
    c() {
      c && c.c(), e = q(), n = O("sl-menu-item"), i = le('Delete "'), o = le(r), s = le('" '), u && u.c(), ee(n, "value", "deleteitem");
    },
    m(h, d) {
      c && c.m(h, d), B(h, e, d), B(h, n, d), w(n, i), w(n, o), w(n, s), u && u.m(n, null), a || (f = X(n, "click", t[49]), a = !0);
    },
    p(h, d) {
      h[3][0].kind === "node" ? c ? c.p(h, d) : (c = Gv(h), c.c(), c.m(e.parentNode, e)) : c && (c.d(1), c = null), d[0] & 8 && r !== (r = h[3][0].label + "") && Pe(o, r), d[0] & 8 && (l = ["node", "edge"].includes(h[3][0].kind)), l ? u || (u = Qv(), u.c(), u.m(n, null)) : u && (u.d(1), u = null);
    },
    d(h) {
      c && c.d(h), h && j(e), h && j(n), u && u.d(), a = !1, f();
    }
  };
}
function Gv(t) {
  let e, n, i, r, o, s = t[3][0].label + "", l, a, f, c, u = t[3][0].parent && Xv(t);
  return {
    c() {
      e = O("sl-menu-item"), e.textContent = "Create child node", n = q(), u && u.c(), i = q(), r = O("sl-menu-item"), o = le('Delete "'), l = le(s), a = le(`"
							including dependents`), ee(e, "value", "createchildnode"), ee(r, "value", "deleteitemwithdependents");
    },
    m(h, d) {
      B(h, e, d), B(h, n, d), u && u.m(h, d), B(h, i, d), B(h, r, d), w(r, o), w(r, l), w(r, a), f || (c = [
        X(e, "click", t[46]),
        X(r, "click", t[48])
      ], f = !0);
    },
    p(h, d) {
      h[3][0].parent ? u ? u.p(h, d) : (u = Xv(h), u.c(), u.m(i.parentNode, i)) : u && (u.d(1), u = null), d[0] & 8 && s !== (s = h[3][0].label + "") && Pe(l, s);
    },
    d(h) {
      h && j(e), h && j(n), u && u.d(h), h && j(i), h && j(r), f = !1, nt(c);
    }
  };
}
function Xv(t) {
  let e, n, i = t[3][0].label + "", r, o, s = Cn(t[3][0].parent, t[1]).label + "", l, a, f, c;
  return {
    c() {
      e = O("sl-menu-item"), n = le('Detach "'), r = le(i), o = le(`" from
								"`), l = le(s), a = le('"'), ee(e, "value", "detach");
    },
    m(u, h) {
      B(u, e, h), w(e, n), w(e, r), w(e, o), w(e, l), w(e, a), f || (c = X(e, "click", t[47]), f = !0);
    },
    p(u, h) {
      h[0] & 8 && i !== (i = u[3][0].label + "") && Pe(r, i), h[0] & 10 && s !== (s = Cn(u[3][0].parent, u[1]).label + "") && Pe(l, s);
    },
    d(u) {
      u && j(e), f = !1, c();
    }
  };
}
function Qv(t) {
  let e;
  return {
    c() {
      e = le(`leaving
							orphans`);
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function Yv(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = O("sl-menu-item"), n = O("input"), i = q(), r = O("sl-icon"), m(n, "type", "file"), m(n, "name", "uploader"), m(n, "accept", ".graph"), ee(r, "slot", "prefix"), ee(r, "name", "folder2-open"), ee(e, "value", "openfile");
    },
    m(l, a) {
      B(l, e, a), w(e, n), w(e, i), w(e, r), o || (s = X(n, "change", t[50]), o = !0);
    },
    p: fe,
    d(l) {
      l && j(e), o = !1, s();
    }
  };
}
function Zv(t) {
  let e;
  return {
    c() {
      e = O("sl-menu-item"), e.innerHTML = `Save as .graph file...
							<sl-icon slot="prefix" name="download"></sl-icon>`, ee(e, "value", "savefile");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function $v(t) {
  let e;
  return {
    c() {
      e = O("sl-menu-item"), e.textContent = "SVG...", ee(e, "value", "export.svg");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function ek(t) {
  let e;
  return {
    c() {
      e = O("sl-menu-item"), e.textContent = "Cytoscape JSON...", ee(e, "value", "export.cytoscape");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function tk(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, o, s = t[14];
  const l = (a) => a[74].id;
  for (let a = 0; a < s.length; a += 1) {
    let f = xv(t, s, a), c = l(f);
    i.set(c, n[a] = nk(c, f));
  }
  return {
    c() {
      e = O("fluent-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      ee(e, "autocomplete", "both"), ee(e, "placeholder", "Jump to node");
    },
    m(a, f) {
      B(a, e, f);
      for (let c = 0; c < n.length; c += 1)
        n[c].m(e, null);
      r || (o = X(e, "change", t[51]), r = !0);
    },
    p(a, f) {
      f[0] & 16384 && (s = a[14], n = Do(n, f, l, 1, a, s, i, e, Gu, nk, null, xv));
    },
    d(a) {
      a && j(e);
      for (let f = 0; f < n.length; f += 1)
        n[f].d();
      r = !1, o();
    }
  };
}
function nk(t, e) {
  let n, i = e[74].label + "", r, o;
  return {
    key: t,
    first: null,
    c() {
      n = O("fluent-option"), r = le(i), ee(n, "value", o = e[74].id), this.first = n;
    },
    m(s, l) {
      B(s, n, l), w(n, r);
    },
    p(s, l) {
      e = s, l[0] & 16384 && i !== (i = e[74].label + "") && Pe(r, i), l[0] & 16384 && o !== (o = e[74].id) && ee(n, "value", o);
    },
    d(s) {
      s && j(n);
    }
  };
}
function ik(t, e) {
  let n, i = e[71].label + "", r, o;
  return {
    key: t,
    first: null,
    c() {
      n = O("sl-option"), r = le(i), ee(n, "value", o = e[71].value), this.first = n;
    },
    m(s, l) {
      B(s, n, l), w(n, r);
    },
    p(s, l) {
      e = s, l[0] & 512 && i !== (i = e[71].label + "") && Pe(r, i), l[0] & 512 && o !== (o = e[71].value) && ee(n, "value", o);
    },
    d(s) {
      s && j(n);
    }
  };
}
function rk(t, e) {
  let n, i = e[68][0] + "", r, o, s = [], l = /* @__PURE__ */ new Map(), a, f, c = e[68][1];
  const u = (h) => h[71].value;
  for (let h = 0; h < c.length; h += 1) {
    let d = Lv(e, c, h), p = u(d);
    l.set(p, s[h] = ik(p, d));
  }
  return {
    key: t,
    first: null,
    c() {
      n = O("small"), r = le(i), o = q();
      for (let h = 0; h < s.length; h += 1)
        s[h].c();
      a = q(), f = O("sl-divider"), this.first = n;
    },
    m(h, d) {
      B(h, n, d), w(n, r), B(h, o, d);
      for (let p = 0; p < s.length; p += 1)
        s[p].m(h, d);
      B(h, a, d), B(h, f, d);
    },
    p(h, d) {
      e = h, d[0] & 512 && i !== (i = e[68][0] + "") && Pe(r, i), d[0] & 512 && (c = e[68][1], s = Do(s, d, u, 1, e, c, l, a.parentNode, Gu, ik, a, Lv));
    },
    d(h) {
      h && j(n), h && j(o);
      for (let d = 0; d < s.length; d += 1)
        s[d].d(h);
      h && j(a), h && j(f);
    }
  };
}
function ok(t) {
  let e, n = t[1].title + "", i;
  return {
    c() {
      e = O("h2"), i = le(n), ai(e, "margin-top", "0");
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, o) {
      o[0] & 2 && n !== (n = r[1].title + "") && Pe(i, n);
    },
    d(r) {
      r && j(e);
    }
  };
}
function sk(t) {
  let e, n = t[1].description + "", i;
  return {
    c() {
      e = O("p"), i = le(n);
    },
    m(r, o) {
      B(r, e, o), w(e, i);
    },
    p(r, o) {
      o[0] & 2 && n !== (n = r[1].description + "") && Pe(i, n);
    },
    d(r) {
      r && j(e);
    }
  };
}
function lk(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = O("p"), n = O("a"), i = O("u"), i.textContent = "Contact here", o = le(` for improvements/feedback
			for this particular graph.`), m(n, "href", r = t[1].contact), m(n, "target", "_blank");
    },
    m(s, l) {
      B(s, e, l), w(e, n), w(n, i), w(e, o);
    },
    p(s, l) {
      l[0] & 2 && r !== (r = s[1].contact) && m(n, "href", r);
    },
    d(s) {
      s && j(e);
    }
  };
}
function tY(t) {
  var x, V, R;
  let e, n, i, r, o, s, l, a, f, c, u, h, d, p, g, _, b, y, v, M, A = t[1] && Fv(t), P = ((x = t[1]) == null ? void 0 : x.title) && ok(t), S = ((V = t[1]) == null ? void 0 : V.description) && sk(t), D = ((R = t[1]) == null ? void 0 : R.contact) && lk(t);
  return {
    c() {
      A && A.c(), e = q(), n = O("sl-dialog"), P && P.c(), i = q(), S && S.c(), r = q(), D && D.c(), o = q(), s = O("hr"), l = q(), a = O("p"), a.innerHTML = `The editor app <b>Grapher v230114</b> was created by
		<a href="https://github.com/nileshtrivedi" target="_blank">@nileshtrivedi</a>
		while being supported by
		<a href="https://foresight.org/tech-tree/" target="_blank">The Foresight Institute</a>
		who is using it for their
		<a href="https://github.com/foresight-org/LongevityTechTree" target="_blank">Nanotech, Neurotech, Healthspan, Space and Intelligent Cooperation
			tech trees</a>.`, f = q(), c = O("p"), c.innerHTML = 'The code for this tool is <a href="https://codeberg.org/nilesh/grapher" target="_blank">available as open-source</a>. Bug reports and PRs can be submitted there.', u = q(), h = O("sl-button"), h.textContent = "Close", d = q(), p = O("sl-dialog"), g = O("ul"), g.innerHTML = `<li><b>To create a new node</b>: Right-click on empty area and select
			&quot;Create New Node&quot;.</li> 
		<li><b>To create an edge</b>: Select source node by left-click, drag
			from one of the control points: ⊕ and release when on top of target
			node.</li> 
		<li><b>To create both a new node and an edge</b>: Select source-node and
			left-click on any of the control points: ⊕.</li> 
		<li><b>To create a child node</b>: Right-click on the parent node and
			choose &quot;Create child node&quot;.</li> 
		<li><b>To make one node child of another</b>: Drag it and drop it on
			parent node.</li> 
		<li><b>To delete node</b>: Right-click on the node and choose &quot;Delete&quot;
			either &quot;including dependents&quot; or &quot;leaving orphans&quot;.</li> 
		<li><b>To detach child node from its parent</b>: Right-click on the
			child node and choose &quot;Detach _ from _&quot;.</li> 
		<li><b>To add a comment on the graph</b>: Right-click on empty area and
			choose &quot;Create New Text Note&quot;.</li>`, _ = q(), b = O("sl-button"), b.textContent = "Close", ai(s, "margin", "40px 0"), ee(h, "slot", "footer"), ee(h, "variant", "primary"), ee(n, "open", t[6]), ee(n, "class", "dialog-overview"), ee(b, "slot", "footer"), ee(b, "variant", "primary"), ee(p, "open", t[7]), ee(p, "label", "Help"), ee(p, "class", "dialog-overview");
    },
    m(W, U) {
      A && A.m(W, U), B(W, e, U), B(W, n, U), P && P.m(n, null), w(n, i), S && S.m(n, null), w(n, r), D && D.m(n, null), w(n, o), w(n, s), w(n, l), w(n, a), w(n, f), w(n, c), w(n, u), w(n, h), B(W, d, U), B(W, p, U), w(p, g), w(p, _), w(p, b), y = !0, v || (M = [
        X(XQ, "keydown", t[39]),
        X(h, "click", t[53]),
        X(n, "sl-hide", t[54]),
        X(n, "sl-show", t[55]),
        X(b, "click", t[56]),
        X(p, "sl-hide", t[57]),
        X(p, "sl-show", t[58])
      ], v = !0);
    },
    p(W, U) {
      var C, L, I;
      W[1] ? A ? (A.p(W, U), U[0] & 2 && k(A, 1)) : (A = Fv(W), A.c(), k(A, 1), A.m(e.parentNode, e)) : A && (me(), E(A, 1, 1, () => {
        A = null;
      }), ge()), (C = W[1]) != null && C.title ? P ? P.p(W, U) : (P = ok(W), P.c(), P.m(n, i)) : P && (P.d(1), P = null), (L = W[1]) != null && L.description ? S ? S.p(W, U) : (S = sk(W), S.c(), S.m(n, r)) : S && (S.d(1), S = null), (I = W[1]) != null && I.contact ? D ? D.p(W, U) : (D = lk(W), D.c(), D.m(n, o)) : D && (D.d(1), D = null), (!y || U[0] & 64) && ee(n, "open", W[6]), (!y || U[0] & 128) && ee(p, "open", W[7]);
    },
    i(W) {
      y || (k(A), y = !0);
    },
    o(W) {
      E(A), y = !1;
    },
    d(W) {
      A && A.d(W), W && j(e), W && j(n), P && P.d(), S && S.d(), D && D.d(), W && j(d), W && j(p), v = !1, nt(M);
    }
  };
}
const ak = 5;
function nY(t) {
}
function iY(t) {
  if (!t)
    return Object.entries({});
  let n = t.items.filter((i) => ["node", "edge"].includes(i.kind)).map((i) => i.tags).flat().filter((i, r, o) => o.indexOf(i) === r).reduce(
    (i, r) => {
      let o = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[o] = i[o] ?? [], i[o].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return Object.entries(n);
}
function Kd(t, e) {
  let n = document.createElement("a");
  n.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(t)), n.setAttribute("download", e), n.style.display = "none", document.body.appendChild(n), n.click(), document.body.removeChild(n);
}
const fk = (t) => t.id, ck = (t) => t.id, uk = (t) => t.id;
function rY(t, e, n) {
  let i, r, { graphjsonpath: o } = e, { svgForTextBBox: s } = e, { overrideOptions: l = {} } = e, a = !1, f = !1, c, u = { versions: [], current: -1 }, h, d, p = !1, g = {}, _ = [], b = null, y = null, v, M, A = [], P;
  function S() {
    v && M && Zi(v).transition().duration(300).call(P.transform, Ju.translate(0, 0).scale(1));
  }
  Ei(() => {
    o && fetch(o).then((se) => se.json()).then((se) => {
      if (window.overrideOptions.persistLocalStorage) {
        let ve = localStorage.getItem(o);
        n(1, c = Ws(ve ? JSON.parse(ve) : Object.assign(se, l), null, s));
      } else
        n(1, c = Ws(Object.assign(se, l), null, s));
      R(c);
    }), D();
  });
  function D() {
    window.location !== window.parent.location && n(10, p = !0);
  }
  function x() {
    u.current <= 0 || (n(1, c = structuredClone(u.versions[u.current - 1])), C(), n(2, u = {
      versions: u.versions,
      current: u.current - 1
    }));
  }
  function V() {
    u.current >= u.versions.length - 1 || (n(1, c = structuredClone(u.versions[u.current + 1])), C(), n(2, u = {
      versions: u.versions,
      current: u.current + 1
    }));
  }
  function R(se) {
    let ve = u.versions.slice(u.versions.length == ak ? 1 : 0, u.current + 1);
    n(2, u = {
      versions: [...ve, structuredClone(se)],
      current: Math.min(u.current + 1, ak - 1)
    });
  }
  function W() {
    n(1, c.items = [], c), n(12, y = null), C(), R(c);
  }
  function U(se) {
    z8(y[0], y[1], c, v, M), n(12, y = null), C(), R(c);
  }
  function C(se) {
    n(4, v), n(5, M), n(3, _), n(1, c = Ws(c, _, s, se)), window.overrideOptions.persistLocalStorage && localStorage.setItem(o, JSON.stringify(c));
  }
  function L(se) {
    n(11, b = {
      x: se.detail.rawEvent.clientX,
      y: se.detail.rawEvent.clientY
    }), n(12, y = null);
    let ve = v.createSVGPoint();
    ve.x = b.x, ve.y = b.y;
    let ce = ve.matrixTransform(M.getCTM().inverse()), _t = { x: ce.x, y: ce.y };
    n(11, b.edge = F8(se.detail.source, _t, c), b), C();
  }
  function I(se) {
    var ve;
    ["note", "edge"].includes(se.detail.source.kind) || ["note", "edge"].includes((ve = _[0]) == null ? void 0 : ve.kind) ? n(3, _ = [se.detail.source]) : se.detail.rawEvent.ctrlKey || se.detail.rawEvent.metaKey ? n(3, _ = [.../* @__PURE__ */ new Set([..._, se.detail.source])]) : n(3, _ = [se.detail.source]), n(11, b = {
      x: se.detail.rawEvent.clientX,
      y: se.detail.rawEvent.clientY
    }), n(12, y = null);
  }
  function H(se) {
    var ce;
    ["note", "edge"].includes(se.detail.source.kind) || ["note", "edge"].includes((ce = _[0]) == null ? void 0 : ce.kind) ? n(3, _ = [se.detail.source]) : se.detail.rawEvent.ctrlKey || se.detail.rawEvent.metaKey ? n(3, _ = [.../* @__PURE__ */ new Set([..._, se.detail.source])]) : n(3, _ = [se.detail.source]);
    let ve = se.detail.source;
    if (b.edge && ve.kind === "node")
      n(11, b.edge.toId = ve.id, b), delete b.edge.toOrphan;
    else if (b.edge && ve.kind === "edge")
      Ys(b.edge, c, !1), R(c);
    else if ((ve == null ? void 0 : ve.kind) === "node" && !b.hasOwnProperty("edge")) {
      let _t = v.createSVGPoint();
      _t.x = b.x, _t.y = b.y;
      let qt = _t.matrixTransform(M.getCTM().inverse()), ct = W8(qt, ve, c);
      ct && ve.parent != ct.id && !Fc(c, ct).map((Ft) => Ft.id).includes(ve.id) && (ve.parent = ct.id, R(c)), ve.id && ct === void 0 && Se();
    }
    n(11, b = null), C();
  }
  function N(se) {
    if (c.disableEditing)
      return;
    let ve = se.detail.source, _t = (c.theme.badges.indexOf(ve.badge) + 1) % c.theme.badges.length;
    ve.badge = c.theme.badges[_t], C();
  }
  function T(se) {
    let ve = se.detail.source;
    ve.kind === "node" && (ve.is_collapsed = !ve.is_collapsed, C());
  }
  function K(se, ve) {
    se.forEach((ce) => Ys(ce, c, ve)), R(c), n(3, _ = []), C(), n(12, y = null);
  }
  function ne(se) {
    if (g = { x: se.clientX, y: se.clientY }, !(!_ || !b || !_[0] || !_[0].pos) && se.buttons == 1 && !c.disableEditing) {
      if (b.edge) {
        let ve = v.createSVGPoint();
        ve.x = b.x + 20 * Math.cos(Math.atan2(b.y, b.x)), ve.y = b.y + 20 * Math.sin(Math.atan2(b.y, b.x)) - 20;
        let ce = ve.matrixTransform(M.getCTM().inverse());
        n(11, b.edge.toOrphan = { pos: { x: ce.x, y: ce.y } }, b);
      } else {
        let ve = v.createSVGPoint();
        ve.x = b.x, ve.y = b.y;
        let ce = ve.matrixTransform(M.getCTM().inverse()), _t = v.createSVGPoint();
        _t.x = g.x, _t.y = g.y;
        let qt = _t.matrixTransform(M.getCTM().inverse());
        _.forEach((ct) => Qd(ct, c, qt.x - ce.x, qt.y - ce.y)), n(
          11,
          b.snap = _.map((ct) => {
            var Rt, It;
            let Ft = ((Rt = c.theme.snapdist) == null ? void 0 : Rt.x) || 100, bn = ((It = c.theme.snapdist) == null ? void 0 : It.y) || 100;
            return {
              x: ct.width / 2 + Math.round((ct.pos.x - ct.width / 2) / Ft) * Ft,
              y: ct.height / 2 + Math.round((ct.pos.y - ct.height / 2) / bn) * bn,
              width: ct.width,
              height: ct.height
            };
          }),
          b
        );
      }
      n(11, b.x = g.x, b), n(11, b.y = g.y, b), C({ kind: "movingitem", item: _ });
    }
  }
  function z(se) {
    B8(y[0], y[1], c, v, M), R(c), C(), n(12, y = null);
  }
  function Y(se) {
    L8(y[0], y[1], c, v, M), C(), n(12, y = null);
  }
  function $(se) {
    c.contextmenu && n(12, y = [se.clientX, se.clientY]);
  }
  function Q(se) {
    console.log("handleCreateNode", se.detail), H8(se.detail.from, se.detail.handle, c), R(c), C();
  }
  function Te(se) {
    _ && (se.key === "Backspace" || se.key === "Delete") && (K(_, !1), R(c));
  }
  function Se() {
    b != null && b.snap && _.forEach((se, ve) => {
      Qd(se, c, b.snap[ve].x - se.pos.x, b.snap[ve].y - se.pos.y);
    });
  }
  function Fe(se) {
    b != null && b.edge && Ys(b.edge, c, !1), Se(), n(11, b = null), C();
  }
  function Z(se) {
    n(3, _ = []), se.buttons === 1 && (n(11, b = { x: se.clientX, y: se.clientY }), n(12, y = null));
  }
  function Ce(se) {
    let ve = se.detail.source;
    ve && (Ys(ve, c, !1), R(c)), C();
  }
  function Ze(se, ve) {
    V8(se, c, ve, v, M), R(c), C(), n(12, y = null);
  }
  function be(se) {
    j8(se, c), R(c), C(), n(12, y = null);
  }
  function te(se) {
    n(1, c.theme = K8[se], c), C();
  }
  function ke(se) {
    let ve = c.items.find((ce) => ce.kind === "node" && ce.label === se.value);
    Zi(v).transition().duration(1500).call(P.transform, Ju.translate(500, 500).scale(1.8).translate(0 - ve.pos.x, 0 - ve.pos.y));
  }
  function Ue(se) {
    let ve = se.detail.item.value;
    if (ve.startsWith("theme."))
      te(ve.split(".")[1]);
    else if (ve.startsWith("export.")) {
      let ce = ve.split(".")[1];
      ce === "svg" ? Kd(v.outerHTML, `${i}.svg`) : ce === "cytoscape" && Kd(J8(c), `${i}-cytoscape.json`);
    } else
      ve === "openfile" || (ve === "savefile" ? Kd(q8(c), `${i}.graph`) : ve === "undo" ? x() : ve === "redo" ? V() : ve === "clear" ? W() : ve === "about" ? n(6, a = !0) : ve === "help" && n(7, f = !0));
  }
  function de(se) {
    let ve = se.target.files[0], ce = new FileReader();
    ce.readAsText(ve), ce.onload = (_t) => {
      n(1, c = Ws(JSON.parse(_t.target.result), null, s)), C();
    };
  }
  const Ve = (se) => {
    (se.metaKey || se.ctrlKey) && se.which === 90 && (se.preventDefault(), (se.shiftKey ? V : x)());
  };
  function De(se) {
    ht[se ? "unshift" : "push"](() => {
      M = se, n(5, M);
    });
  }
  function He(se) {
    ht[se ? "unshift" : "push"](() => {
      v = se, n(4, v);
    });
  }
  const at = (se) => {
    n(1, c = Ws(se.detail, _, s)), C();
  }, mt = (se) => Ze(se, _[0]), Ye = (se) => be(_[0]), Me = (se) => K(_, !0), ae = (se) => K(_, !1), ze = (se) => de(se), ft = (se) => ke(se.target), bt = (se) => n(13, A = c.items.filter((ve) => ve.kind === "node" && ve.tags.includes(se.target.value)).map((ve) => ve.id)), gn = (se) => n(6, a = !1), Un = (se) => n(6, a = !1), ot = (se) => n(6, a = !0), Gt = (se) => n(7, f = !1), rn = (se) => n(7, f = !1), ri = (se) => n(7, f = !0);
  return t.$$set = (se) => {
    "graphjsonpath" in se && n(40, o = se.graphjsonpath), "svgForTextBBox" in se && n(0, s = se.svgForTextBBox), "overrideOptions" in se && n(41, l = se.overrideOptions);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 512 && (i = o.split("/").pop().split("#")[0].split("?")[0].replace(/\.graph/, "")), t.$$.dirty[0] & 2 && (window.graph = c), t.$$.dirty[0] & 4 && (window.graphHistory = u), t.$$.dirty[0] & 2 && n(14, r = c ? c.items.filter((se) => se.kind === "node").sort((se, ve) => se.label.localeCompare(ve.label)) : []), t.$$.dirty[0] & 10 && n(8, h = U8(c, _)), t.$$.dirty[0] & 2 && n(9, d = iY(c)), t.$$.dirty[0] & 48 | t.$$.dirty[1] & 2048 && v && M && (n(42, P = GQ().on("zoom", ({ transform: se }) => {
      Zi(M).attr("transform", se);
    })), Zi(v).call(P));
  }, window.gpa = Fc, [
    s,
    c,
    u,
    _,
    v,
    M,
    a,
    f,
    h,
    d,
    p,
    b,
    y,
    A,
    r,
    S,
    W,
    U,
    C,
    L,
    I,
    H,
    N,
    T,
    K,
    ne,
    z,
    Y,
    $,
    Q,
    Te,
    Fe,
    Z,
    Ce,
    Ze,
    be,
    ke,
    Ue,
    de,
    Ve,
    o,
    l,
    P,
    De,
    He,
    at,
    mt,
    Ye,
    Me,
    ae,
    ze,
    ft,
    bt,
    gn,
    Un,
    ot,
    Gt,
    rn,
    ri
  ];
}
class oY extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      rY,
      tY,
      Pt,
      {
        graphjsonpath: 40,
        svgForTextBBox: 0,
        overrideOptions: 41
      },
      null,
      [-1, -1, -1]
    );
  }
}
const cY = new oY({
  target: document.querySelector("#grapheditor"),
  props: {
    graphjsonpath: window.graphjsonpath,
    overrideOptions: window.overrideOptions || {},
    svgForTextBBox: document.getElementById("textbbox")
  }
});
export {
  cY as default
};
