function ve() {
}
const L4 = (t) => t;
function Go(t, e) {
  for (const n in e)
    t[n] = e[n];
  return t;
}
function j4(t) {
  return t();
}
function z_() {
  return /* @__PURE__ */ Object.create(null);
}
function ht(t) {
  t.forEach(j4);
}
function hi(t) {
  return typeof t == "function";
}
function xt(t, e) {
  return t != t ? e == e : t !== e || t && typeof t == "object" || typeof t == "function";
}
let ff;
function jh(t, e) {
  return ff || (ff = document.createElement("a")), ff.href = e, t === ff.href;
}
function wt(t, e) {
  return t != t ? e == e : t !== e;
}
function sT(t) {
  return Object.keys(t).length === 0;
}
function oT(t, ...e) {
  if (t == null)
    return ve;
  const n = t.subscribe(...e);
  return n.unsubscribe ? () => n.unsubscribe() : n;
}
function Vn(t, e, n, i) {
  if (t) {
    const r = B4(t, e, n, i);
    return t[0](r);
  }
}
function B4(t, e, n, i) {
  return t[1] && i ? Go(n.ctx.slice(), t[1](i(e))) : n.ctx;
}
function Un(t, e, n, i) {
  if (t[2] && i) {
    const r = t[2](i(n));
    if (e.dirty === void 0)
      return r;
    if (typeof r == "object") {
      const s = [], o = Math.max(e.dirty.length, r.length);
      for (let l = 0; l < o; l += 1)
        s[l] = e.dirty[l] | r[l];
      return s;
    }
    return e.dirty | r;
  }
  return e.dirty;
}
function Hn(t, e, n, i, r, s) {
  if (r) {
    const o = B4(e, n, i, s);
    t.p(o, r);
  }
}
function Wn(t) {
  if (t.ctx.length > 32) {
    const e = [], n = t.ctx.length / 32;
    for (let i = 0; i < n; i++)
      e[i] = -1;
    return e;
  }
  return -1;
}
function lT(t) {
  const e = {};
  for (const n in t)
    e[n] = !0;
  return e;
}
function bn(t) {
  return t ?? "";
}
function bg(t, e, n) {
  return t.set(n), e;
}
function Wi(t) {
  return t && hi(t.destroy) ? t.destroy : ve;
}
const x4 = typeof window < "u";
let aT = x4 ? () => window.performance.now() : () => Date.now(), k0 = x4 ? (t) => requestAnimationFrame(t) : ve;
const ha = /* @__PURE__ */ new Set();
function F4(t) {
  ha.forEach((e) => {
    e.c(t) || (ha.delete(e), e.f());
  }), ha.size !== 0 && k0(F4);
}
function cT(t) {
  let e;
  return ha.size === 0 && k0(F4), {
    promise: new Promise((n) => {
      ha.add(e = { c: t, f: n });
    }),
    abort() {
      ha.delete(e);
    }
  };
}
function E(t, e) {
  t.appendChild(e);
}
function z4(t) {
  if (!t)
    return document;
  const e = t.getRootNode ? t.getRootNode() : t.ownerDocument;
  return e && e.host ? e : t.ownerDocument;
}
function uT(t) {
  const e = j("style");
  return fT(z4(t), e), e.sheet;
}
function fT(t, e) {
  return E(t.head || t, e), e.sheet;
}
function U(t, e, n) {
  t.insertBefore(e, n || null);
}
function V(t) {
  t.parentNode && t.parentNode.removeChild(t);
}
function Vt(t, e) {
  for (let n = 0; n < t.length; n += 1)
    t[n] && t[n].d(e);
}
function j(t) {
  return document.createElement(t);
}
function bt(t) {
  return document.createElementNS("http://www.w3.org/2000/svg", t);
}
function we(t) {
  return document.createTextNode(t);
}
function Q() {
  return we(" ");
}
function ot() {
  return we("");
}
function se(t, e, n, i) {
  return t.addEventListener(e, n, i), () => t.removeEventListener(e, n, i);
}
function sr(t) {
  return function(e) {
    return e.preventDefault(), t.call(this, e);
  };
}
function Ye(t) {
  return function(e) {
    return e.stopPropagation(), t.call(this, e);
  };
}
function b(t, e, n) {
  n == null ? t.removeAttribute(e) : t.getAttribute(e) !== n && t.setAttribute(e, n);
}
function V_(t, e) {
  const n = Object.getOwnPropertyDescriptors(t.__proto__);
  for (const i in e)
    e[i] == null ? t.removeAttribute(i) : i === "style" ? t.style.cssText = e[i] : i === "__value" ? t.value = t[i] = e[i] : n[i] && n[i].set ? t[i] = e[i] : b(t, i, e[i]);
}
function Bh(t, e) {
  for (const n in e)
    b(t, n, e[n]);
}
function ne(t, e, n) {
  e in t ? t[e] = typeof t[e] == "boolean" && n === "" ? !0 : n : b(t, e, n);
}
function hT(t) {
  return Array.from(t.childNodes);
}
function ze(t, e) {
  e = "" + e, t.wholeText !== e && (t.data = e);
}
function Io(t, e) {
  t.value = e ?? "";
}
function Li(t, e, n, i) {
  n === null ? t.style.removeProperty(e) : t.style.setProperty(e, n, i ? "important" : "");
}
function Ce(t, e, n) {
  t.classList[n ? "add" : "remove"](e);
}
function V4(t, e, { bubbles: n = !1, cancelable: i = !1 } = {}) {
  const r = document.createEvent("CustomEvent");
  return r.initCustomEvent(t, n, i, e), r;
}
function ws(t, e) {
  return new t(e);
}
const xh = /* @__PURE__ */ new Map();
let Fh = 0;
function dT(t) {
  let e = 5381, n = t.length;
  for (; n--; )
    e = (e << 5) - e ^ t.charCodeAt(n);
  return e >>> 0;
}
function pT(t, e) {
  const n = { stylesheet: uT(e), rules: {} };
  return xh.set(t, n), n;
}
function U_(t, e, n, i, r, s, o, l = 0) {
  const a = 16.666 / i;
  let c = `{
`;
  for (let _ = 0; _ <= 1; _ += a) {
    const m = e + (n - e) * s(_);
    c += _ * 100 + `%{${o(m, 1 - m)}}
`;
  }
  const u = c + `100% {${o(n, 1 - n)}}
}`, f = `__svelte_${dT(u)}_${l}`, h = z4(t), { stylesheet: d, rules: p } = xh.get(h) || pT(h, t);
  p[f] || (p[f] = !0, d.insertRule(`@keyframes ${f} ${u}`, d.cssRules.length));
  const g = t.style.animation || "";
  return t.style.animation = `${g ? `${g}, ` : ""}${f} ${i}ms linear ${r}ms 1 both`, Fh += 1, f;
}
function gT(t, e) {
  const n = (t.style.animation || "").split(", "), i = n.filter(
    e ? (s) => s.indexOf(e) < 0 : (s) => s.indexOf("__svelte") === -1
  ), r = n.length - i.length;
  r && (t.style.animation = i.join(", "), Fh -= r, Fh || mT());
}
function mT() {
  k0(() => {
    Fh || (xh.forEach((t) => {
      const { ownerNode: e } = t.stylesheet;
      e && V(e);
    }), xh.clear());
  });
}
let Kc;
function Dc(t) {
  Kc = t;
}
function ec() {
  if (!Kc)
    throw new Error("Function called outside component initialization");
  return Kc;
}
function bT(t) {
  ec().$$.before_update.push(t);
}
function or(t) {
  ec().$$.on_mount.push(t);
}
function vs(t) {
  ec().$$.on_destroy.push(t);
}
function Vl() {
  const t = ec();
  return (e, n, { cancelable: i = !1 } = {}) => {
    const r = t.$$.callbacks[e];
    if (r) {
      const s = V4(e, n, { cancelable: i });
      return r.slice().forEach((o) => {
        o.call(t, s);
      }), !s.defaultPrevented;
    }
    return !0;
  };
}
function U4(t, e) {
  return ec().$$.context.set(t, e), e;
}
function gi(t) {
  return ec().$$.context.get(t);
}
function Ut(t, e) {
  const n = t.$$.callbacks[e.type];
  n && n.slice().forEach((i) => i.call(this, e));
}
const Ec = [], yt = [], ch = [], Om = [], H4 = Promise.resolve();
let Tm = !1;
function W4() {
  Tm || (Tm = !0, H4.then(q4));
}
function Xi() {
  return W4(), H4;
}
function Sa(t) {
  ch.push(t);
}
function Rr(t) {
  Om.push(t);
}
const _g = /* @__PURE__ */ new Set();
let hf = 0;
function q4() {
  const t = Kc;
  do {
    for (; hf < Ec.length; ) {
      const e = Ec[hf];
      hf++, Dc(e), _T(e.$$);
    }
    for (Dc(null), Ec.length = 0, hf = 0; yt.length; )
      yt.pop()();
    for (let e = 0; e < ch.length; e += 1) {
      const n = ch[e];
      _g.has(n) || (_g.add(n), n());
    }
    ch.length = 0;
  } while (Ec.length);
  for (; Om.length; )
    Om.pop()();
  Tm = !1, _g.clear(), Dc(t);
}
function _T(t) {
  if (t.fragment !== null) {
    t.update(), ht(t.before_update);
    const e = t.dirty;
    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, e), t.after_update.forEach(Sa);
  }
}
let dc;
function yT() {
  return dc || (dc = Promise.resolve(), dc.then(() => {
    dc = null;
  })), dc;
}
function yg(t, e, n) {
  t.dispatchEvent(V4(`${e ? "intro" : "outro"}${n}`));
}
const uh = /* @__PURE__ */ new Set();
let Vs;
function Se() {
  Vs = {
    r: 0,
    c: [],
    p: Vs
  };
}
function Ee() {
  Vs.r || ht(Vs.c), Vs = Vs.p;
}
function P(t, e) {
  t && t.i && (uh.delete(t), t.i(e));
}
function x(t, e, n, i) {
  if (t && t.o) {
    if (uh.has(t))
      return;
    uh.add(t), Vs.c.push(() => {
      uh.delete(t), i && (n && t.d(1), i());
    }), t.o(e);
  } else
    i && i();
}
const wT = { duration: 0 };
function df(t, e, n, i) {
  const r = { direction: "both" };
  let s = e(t, n, r), o = i ? 0 : 1, l = null, a = null, c = null;
  function u() {
    c && gT(t, c);
  }
  function f(d, p) {
    const g = d.b - o;
    return p *= Math.abs(g), {
      a: o,
      b: d.b,
      d: g,
      duration: p,
      start: d.start,
      end: d.start + p,
      group: d.group
    };
  }
  function h(d) {
    const { delay: p = 0, duration: g = 300, easing: _ = L4, tick: m = ve, css: C } = s || wT, v = {
      start: aT() + p,
      b: d
    };
    d || (v.group = Vs, Vs.r += 1), l || a ? a = v : (C && (u(), c = U_(t, o, d, g, p, _, C)), d && m(0, 1), l = f(v, g), Sa(() => yg(t, d, "start")), cT((k) => {
      if (a && k > a.start && (l = f(a, g), a = null, yg(t, l.b, "start"), C && (u(), c = U_(t, o, l.b, l.duration, 0, _, s.css))), l) {
        if (k >= l.end)
          m(o = l.b, 1 - o), yg(t, l.b, "end"), a || (l.b ? u() : --l.group.r || ht(l.group.c)), l = null;
        else if (k >= l.start) {
          const S = k - l.start;
          o = l.a + l.d * _(S / l.duration), m(o, 1 - o);
        }
      }
      return !!(l || a);
    }));
  }
  return {
    run(d) {
      hi(s) ? yT().then(() => {
        s = s(r), h(d);
      }) : h(d);
    },
    end() {
      u(), l = a = null;
    }
  };
}
const np = typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : global;
function Bu(t, e) {
  t.d(1), e.delete(t.key);
}
function ip(t, e) {
  x(t, 1, 1, () => {
    e.delete(t.key);
  });
}
function Gs(t, e, n, i, r, s, o, l, a, c, u, f) {
  let h = t.length, d = s.length, p = h;
  const g = {};
  for (; p--; )
    g[t[p].key] = p;
  const _ = [], m = /* @__PURE__ */ new Map(), C = /* @__PURE__ */ new Map();
  for (p = d; p--; ) {
    const O = f(r, s, p), w = n(O);
    let A = o.get(w);
    A ? i && A.p(O, e) : (A = c(w, O), A.c()), m.set(w, _[p] = A), w in g && C.set(w, Math.abs(p - g[w]));
  }
  const v = /* @__PURE__ */ new Set(), k = /* @__PURE__ */ new Set();
  function S(O) {
    P(O, 1), O.m(l, u), o.set(O.key, O), u = O.first, d--;
  }
  for (; h && d; ) {
    const O = _[d - 1], w = t[h - 1], A = O.key, D = w.key;
    O === w ? (u = O.first, h--, d--) : m.has(D) ? !o.has(A) || v.has(A) ? S(O) : k.has(D) ? h-- : C.get(A) > C.get(D) ? (k.add(A), S(O)) : (v.add(D), h--) : (a(w, o), h--);
  }
  for (; h--; ) {
    const O = t[h];
    m.has(O.key) || a(O, o);
  }
  for (; d; )
    S(_[d - 1]);
  return _;
}
function Ul(t, e) {
  const n = {}, i = {}, r = { $$scope: 1 };
  let s = t.length;
  for (; s--; ) {
    const o = t[s], l = e[s];
    if (l) {
      for (const a in o)
        a in l || (i[a] = 1);
      for (const a in l)
        r[a] || (n[a] = l[a], r[a] = 1);
      t[s] = l;
    } else
      for (const a in o)
        r[a] = 1;
  }
  for (const o in i)
    o in n || (n[o] = void 0);
  return n;
}
function rp(t) {
  return typeof t == "object" && t !== null ? t : {};
}
function Pr(t, e, n, i) {
  const r = t.$$.props[e];
  r !== void 0 && (t.$$.bound[r] = n, i === void 0 && n(t.$$.ctx[r]));
}
function me(t) {
  t && t.c();
}
function pe(t, e, n, i) {
  const { fragment: r, after_update: s } = t.$$;
  r && r.m(e, n), i || Sa(() => {
    const o = t.$$.on_mount.map(j4).filter(hi);
    t.$$.on_destroy ? t.$$.on_destroy.push(...o) : ht(o), t.$$.on_mount = [];
  }), s.forEach(Sa);
}
function ge(t, e) {
  const n = t.$$;
  n.fragment !== null && (ht(n.on_destroy), n.fragment && n.fragment.d(e), n.on_destroy = n.fragment = null, n.ctx = []);
}
function vT(t, e) {
  t.$$.dirty[0] === -1 && (Ec.push(t), W4(), t.$$.dirty.fill(0)), t.$$.dirty[e / 31 | 0] |= 1 << e % 31;
}
function Xe(t, e, n, i, r, s, o, l = [-1]) {
  const a = Kc;
  Dc(t);
  const c = t.$$ = {
    fragment: null,
    ctx: [],
    props: s,
    update: ve,
    not_equal: r,
    bound: z_(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (a ? a.$$.context : [])),
    callbacks: z_(),
    dirty: l,
    skip_bound: !1,
    root: e.target || a.$$.root
  };
  o && o(c.root);
  let u = !1;
  if (c.ctx = n ? n(t, e.props || {}, (f, h, ...d) => {
    const p = d.length ? d[0] : h;
    return c.ctx && r(c.ctx[f], c.ctx[f] = p) && (!c.skip_bound && c.bound[f] && c.bound[f](p), u && vT(t, f)), h;
  }) : [], c.update(), u = !0, ht(c.before_update), c.fragment = i ? i(c.ctx) : !1, e.target) {
    if (e.hydrate) {
      const f = hT(e.target);
      c.fragment && c.fragment.l(f), f.forEach(V);
    } else
      c.fragment && c.fragment.c();
    e.intro && P(t.$$.fragment), pe(t, e.target, e.anchor, e.customElement), q4();
  }
  Dc(a);
}
class Qe {
  $destroy() {
    ge(this, 1), this.$destroy = ve;
  }
  $on(e, n) {
    if (!hi(n))
      return ve;
    const i = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return i.push(n), () => {
      const r = i.indexOf(n);
      r !== -1 && i.splice(r, 1);
    };
  }
  $set(e) {
    this.$$set && !sT(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);
  }
}
function zn(t, e) {
  return e && t && e.items.find((n) => n.id === t);
}
function kT(t, e) {
  return t.items.filter((n) => n.kind === "node").forEach((n) => {
    n.children = [], (!n.pos || !n.pos.hasOwnProperty("x") || !n.pos.hasOwnProperty("y")) && (console.error(`Got null position for ${n.label}`), n.pos = { x: Math.random() * 600, y: Math.random() * 600 }), n.notes = n.notes ?? "", n.hasOwnProperty("parent") || (n.parent = null);
  }), t.items.filter((n) => n.kind === "note").forEach((n) => {
    n.children = [];
  }), t.items.forEach((n) => {
    if (n.parent) {
      let i = zn(n.parent, t);
      if (!i) {
        delete n.parent;
        return;
      }
      i.children = [...i.children || [], n.id];
    }
  }), t;
}
function CT(t, e) {
  let n = zn(t.parent, e);
  return n && (t.parent = n.parent), e;
}
function Rm(t, e, n, i) {
  t.pos.x += n, t.pos.y += i, (t.children || []).forEach((r) => {
    let s = zn(r, e);
    Rm(s, e, n, i);
  });
}
function Pm(t, e, n, i) {
  var v;
  if ((t.children || []).forEach((k) => {
    let S = zn(k, e);
    Pm(S, e, n, i);
  }), i && i.kind === "movingitem" && !i.item.map((k) => C0(e, k)).flat().includes(t))
    return;
  let r = t.nodenotesfontsize || e.theme.nodenotesfontsize || 16, s = Math.min(300, t.notes ? t.notes.length * (r - 6) : 0), o = t.notes ? (Math.ceil(t.notes.length * (r - 6) / s) + t.notes.split(/\r\n|\r|\n/).length) * (r + 4) : 0;
  t.noteswidth = s, t.notesheight = o;
  let l = t.has_dynamic_notes ? 140 : 0, a = t.children.length > 0 || ((v = t.notes) == null ? void 0 : v.length) > 0 ? "700" : "300", c = t.nodelabelfontsize || e.theme.nodelabelfontsize || 16, u = AT(n, t.label, e.theme.font, c, a);
  t.labelwidth = u.width + 60, t.labelheight = u.height;
  let f = Math.max(t.labelwidth / 2, s / 2), h = Math.max(...t.children.map((k) => {
    let S = zn(k, e);
    return S.pos.x + S.width / 2 + 15;
  }), t.pos.x) - t.pos.x, d = t.pos.x - Math.min(...t.children.map((k) => {
    let S = zn(k, e);
    return S.pos.x - S.width / 2 - 15;
  }), t.pos.x);
  t.is_collapsed ? t.width = 2 * f + 20 : t.width = 2 * Math.max(f, h, d) + 20;
  let p = t.labelheight / 2 + o / 2 + l / 2, g = t.children.map((k) => {
    let S = zn(k, e);
    return S.pos.y + S.height / 2 + 20;
  }), _ = Math.max(...g, t.pos.y) - t.pos.y, m = t.children.map((k) => {
    let S = zn(k, e);
    return S.pos.y - S.height / 2 - 20 - 30 - o - l;
  }), C = t.pos.y - Math.min(...m, t.pos.y);
  t.is_collapsed ? t.height = 2 * p + 20 : t.height = 2 * Math.max(p, C, _) + 20;
}
function J4(t, e, n, i) {
  t.level = i && i.id === t.id ? 500 + n : n, t.children.forEach((r) => J4(zn(r, e), e, t.level + 2, i));
}
function uo(t, e, n, i) {
  return t ? (kT(t), t.items.filter((r) => r.kind === "node" && !r.parent).forEach((r) => {
    Pm(r, t, n, i), J4(r, t, 0, e);
  }), t.items.filter((r) => r.kind === "note").forEach((r) => {
    Pm(r, t, n, i);
  }), t.items.filter((r) => r.kind === "edge").forEach((r) => {
    r.level = Math.min(
      r.fromId ? zn(r.fromId, t).level : 20,
      r.toId ? zn(r.toId, t).level : 20
    ) - 1;
  }), t) : null;
}
function la(t, e, n) {
  t.kind === "edge" || t.kind === "note" ? e.items = e.items.filter((i) => i != t) : t.kind === "node" && (n ? (e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    la(i, e, !1);
  }), e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    la(i, e, !0);
  }), e.items = e.items.filter((i) => i != t)) : (e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    t.parent ? i.parent = t.parent : delete i.parent;
  }), e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    i.fromId === t.id && (t.parent ? i.fromId = t.parent : (delete i.fromId, i.fromOrphan = { pos: { x: t.pos.x, y: t.pos.y } })), i.toId === t.id && (t.parent ? i.toId = t.parent : (delete i.toId, i.toOrphan = { pos: { x: t.pos.x, y: t.pos.y } }));
  }), e.items = e.items.filter((i) => i != t)));
}
function ST(t, e, n, i, r) {
  let s = Ea(n);
  n.items.push({
    id: s,
    kind: "node",
    label: `New node ${s}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Gc(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function ET(t, e, n, i, r) {
  let s = Ea(n);
  n.items.push({
    id: s,
    kind: "note",
    label: "Add your notes here",
    notes: "some extra content",
    pos: Gc(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function Gc(t, e, n, i) {
  const r = t.createSVGPoint();
  r.x = e, r.y = n;
  let s = r.matrixTransform(i.getCTM().inverse());
  return { x: s.x, y: s.y };
}
function AT(t, e, n, i, r) {
  let s = "http://www.w3.org/2000/svg";
  var o = document.createElementNS(s, "text");
  o.setAttribute("font-family", n), o.setAttribute("font-size", i), o.setAttribute("font-weight", r), o.setAttributeNS(s, "x", 200), o.setAttributeNS(s, "y", 300), o.textContent = e, t.appendChild(o);
  var l = o.getBBox();
  return o.parentNode.removeChild(o), l;
}
function Ea(t) {
  return Math.max(...t.items.map((e) => e.id), 0) + 1;
}
function MT(t, e, n, i, r) {
  let s = Gc(i, t, e, r), o = Gc(i, window.innerWidth, window.innerHeight, r);
  n.items.forEach((l) => {
    l.pos && (l.pos.x -= Math.round(s.x - o.x / 2), l.pos.y -= Math.round(s.y - o.y / 2));
  });
}
function OT(t, e, n, i, r) {
  let s = Ea(e);
  e.items.push({
    id: s,
    kind: "node",
    label: `New node ${s}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Gc(i, t.clientX, t.clientY, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    parent: n.id
  });
}
function TT(t, e, n) {
  let i = {
    id: Ea(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toOrphan: { pos: { x: e.x, y: e.y } },
    directed: !0,
    weight: 5
  };
  return n.items.push(i), i;
}
function RT(t, e, n) {
  console.log("createGraphNodeEdge");
  let i = Ea(n);
  n.items.push({
    id: i,
    kind: "node",
    label: `New node ${i}`,
    desc: "",
    link: "",
    tags: [],
    parent: t.parent,
    children: [],
    pos: {
      x: t.pos.x + (100 + t.width / 2 + Math.random() * 100) * (Math.floor(e / 10) - 2),
      y: t.pos.y + (100 + t.height / 2 + Math.random() * 100) * (e % 10 - 2)
    },
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    fill: t.fill,
    stroke: t.stroke
  }), n.items.push({
    id: Ea(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toId: i,
    directed: !0,
    weight: 5
  });
}
function PT(t, e, n) {
  return n.items.filter((r) => r.kind === "node").filter((r) => r.id != e.id).filter((r) => t.x > r.pos.x - r.width / 2 && t.x < r.pos.x + r.width / 2 && t.y > r.pos.y - r.height / 2 && t.y < r.pos.y + r.height / 2).sort((r, s) => s.level - r.level)[0];
}
function K4(t, e, n) {
  return e.kind !== "node" ? [] : t.items.filter((s) => s.kind === "edge" && s.toId === e.id).map((s) => {
    let o = zn(s.fromId, t);
    return { node: o, parents: n == 2 ? [] : K4(t, o, n + 1) };
  });
}
function C0(t, e) {
  if (e == null)
    return [];
  if (e.kind !== "node")
    return [];
  if (e.parent == null)
    return [];
  let n = zn(e.parent, t);
  return [...C0(t, n), n];
}
function Aa(t, e) {
  if (t.kind === "edge")
    return Aa(zn(t.fromId, e), e) && Aa(zn(t.toId, e), e);
  if (t.kind === "note")
    return !1;
  let n = t.parent;
  for (; n; ) {
    let i = zn(n, e);
    if (!i)
      return console.error(
        `item ${t.label}'s parent ${n} is missing`
      ), !1;
    if (i.is_collapsed)
      return i;
    n = i.parent;
  }
  return !1;
}
function IT(t, e) {
  if (!t)
    return [];
  let n = e[e.length - 1];
  return (n == null ? void 0 : n.kind) === "edge" ? [
    ...t.items.sort((i, r) => i.level - r.level).filter((i) => i.id !== n.id).filter((i) => !Aa(i, t)),
    ...t.items.filter((i) => i.id === n.id)
  ] : t.items.sort((i, r) => i.level - r.level).filter((i) => !Aa(i, t));
}
function DT(t) {
  let e = {};
  return e.items = t.items.map((n) => {
    if (n.kind === "node")
      return {
        id: n.id,
        kind: "node",
        label: n.label,
        notes: n.notes,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        has_dynamic_notes: n.has_dynamic_notes || !1,
        labelcolor: n.labelcolor,
        is_collapsed: n.is_collapsed || !1,
        parent: n.parent,
        pos: n.pos,
        fill: n.fill,
        stroke: n.stroke,
        badge: n.badge,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
    if (n.kind === "edge")
      return {
        id: n.id,
        kind: "edge",
        label: n.label,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        stroke: n.stroke,
        strokeType: n.strokeType,
        directed: n.directed,
        weight: n.weight,
        fromId: n.fromId,
        toId: n.toId,
        shape: n.shape,
        fromOrphan: n.fromOrphan,
        toOrphan: n.toOrphan
      };
    if (n.kind === "note")
      return {
        id: n.id,
        kind: n.kind,
        pos: n.pos,
        label: n.label,
        notes: n.notes,
        labelcolor: n.labelcolor,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
  }).sort((n, i) => n.kind === i.kind ? (n.parent || 0) - (i.parent || 0) : n.kind.localeCompare(i.kind)), e.grid = t.grid, e.theme = t.theme, e.jsondownload = t.jsondownload, e.jsonupload = t.jsonupload, e.contextmenu = t.contextmenu, e.customjson = t.customjson, e.exportcytoscape = t.exportcytoscape, e.exportsvg = t.exportsvg, e.title = t.title || "", e.description = t.description || "", e.contact = t.contact || "", JSON.stringify(e, null, 2);
}
function NT(t) {
  let e = {};
  return e.elements = t.items.filter((n) => n.kind === "node" || n.fromId && n.toId).map((n) => {
    if (n.kind === "node")
      return {
        group: "nodes",
        data: {
          id: n.id,
          parent: n.parent
        },
        position: { x: n.pos.x, y: n.pos.y }
      };
    if (n.kind === "edge")
      return {
        group: "edges",
        data: {
          id: n.id,
          source: n.fromId,
          target: n.toId
        }
      };
  }), JSON.stringify(e, null, 2);
}
const LT = {
  elegant: {
    name: "elegant",
    bgfill: "#334155",
    grid: "cartesian",
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#bae6fd",
    nodelabelstroke: "#334155",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 2,
    nodeBackgroundImageURL: null,
    edgestroke: "red",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "Dosis",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  foresight: {
    name: "foresight",
    bgfill: "#1c170b",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#7b9ecb",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#ccc",
    edgeshape: "ortho",
    edgestroketype: "solid",
    font: "Roboto Condensed",
    badges: ["✅", "❌", "⚡", "👎", "👍", "https://cdn.discordapp.com/attachments/987690735639875584/997881951534981203/hexbadge.png"]
  },
  minimal: {
    name: "minimal",
    bgfill: "#e5e7eb",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "#1f2937",
    highlightColor: "red",
    nodefill: "white",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 15,
    nodeBackgroundImageURL: null,
    edgestroke: "#1f2937",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "PT Mono",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  classic: {
    name: "classic",
    bgfill: "#f3f3f3",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    font: "Balsamiq Sans",
    nodefill: "#fbe6a3",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#4277dd",
    edgeshape: "curved",
    edgestroketype: "solid",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  }
};
function jT(t) {
  let e, n, i, r;
  return {
    c() {
      e = bt("path"), b(e, "d", n = `M ${t[1] - t[3]},${t[2] - t[3]} l ${2 * t[3]},${2 * t[3]} M ${t[1] + t[3]},${t[2] - t[3]} l ${-2 * t[3]},${2 * t[3]}`), b(e, "data-handle", t[4]), b(e, "class", "svelte-qkserr");
    },
    m(s, o) {
      U(s, e, o), i || (r = [
        se(e, "click", t[8]),
        se(e, "mousedown", Ye(t[9]))
      ], i = !0);
    },
    p(s, o) {
      o & 14 && n !== (n = `M ${s[1] - s[3]},${s[2] - s[3]} l ${2 * s[3]},${2 * s[3]} M ${s[1] + s[3]},${s[2] - s[3]} l ${-2 * s[3]},${2 * s[3]}`) && b(e, "d", n), o & 16 && b(e, "data-handle", s[4]);
    },
    d(s) {
      s && V(e), i = !1, ht(r);
    }
  };
}
function BT(t) {
  let e, n, i, r;
  return {
    c() {
      e = bt("path"), b(e, "d", n = `M ${t[1]},${t[2] - t[3]} v ${2 * t[3]} M ${t[1] - t[3]},${t[2]} h ${2 * t[3]}`), b(e, "data-handle", t[4]), b(e, "class", "svelte-qkserr");
    },
    m(s, o) {
      U(s, e, o), i || (r = [
        se(e, "click", t[6]),
        se(e, "mousedown", Ye(t[7]))
      ], i = !0);
    },
    p(s, o) {
      o & 14 && n !== (n = `M ${s[1]},${s[2] - s[3]} v ${2 * s[3]} M ${s[1] - s[3]},${s[2]} h ${2 * s[3]}`) && b(e, "d", n), o & 16 && b(e, "data-handle", s[4]);
    },
    d(s) {
      s && V(e), i = !1, ht(r);
    }
  };
}
function xT(t) {
  let e, n, i, r, s;
  function o(c, u) {
    if (c[0] === "plus")
      return BT;
    if (c[0] === "cross")
      return jT;
  }
  let l = o(t), a = l && l(t);
  return {
    c() {
      e = bt("g"), n = bt("circle"), a && a.c(), b(n, "cx", t[1]), b(n, "cy", t[2]), b(n, "r", i = t[3] + 2), b(n, "title", t[5]), b(n, "data-handle", t[4]), b(n, "class", "svelte-qkserr"), b(e, "class", "svelte-qkserr");
    },
    m(c, u) {
      U(c, e, u), E(e, n), a && a.m(e, null), r || (s = [
        se(n, "click", t[10]),
        se(n, "mousedown", Ye(t[11]))
      ], r = !0);
    },
    p(c, [u]) {
      u & 2 && b(n, "cx", c[1]), u & 4 && b(n, "cy", c[2]), u & 8 && i !== (i = c[3] + 2) && b(n, "r", i), u & 32 && b(n, "title", c[5]), u & 16 && b(n, "data-handle", c[4]), l === (l = o(c)) && a ? a.p(c, u) : (a && a.d(1), a = l && l(c), a && (a.c(), a.m(e, null)));
    },
    i: ve,
    o: ve,
    d(c) {
      c && V(e), a && a.d(), r = !1, ht(s);
    }
  };
}
function FT(t, e, n) {
  let { kind: i = "plus" } = e, { x: r } = e, { y: s } = e, { size: o = 4 } = e, { data: l } = e, { title: a } = e;
  function c(g) {
    Ut.call(this, t, g);
  }
  function u(g) {
    Ut.call(this, t, g);
  }
  function f(g) {
    Ut.call(this, t, g);
  }
  function h(g) {
    Ut.call(this, t, g);
  }
  function d(g) {
    Ut.call(this, t, g);
  }
  function p(g) {
    Ut.call(this, t, g);
  }
  return t.$$set = (g) => {
    "kind" in g && n(0, i = g.kind), "x" in g && n(1, r = g.x), "y" in g && n(2, s = g.y), "size" in g && n(3, o = g.size), "data" in g && n(4, l = g.data), "title" in g && n(5, a = g.title);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p
  ];
}
class S0 extends Qe {
  constructor(e) {
    super(), Xe(this, e, FT, xT, xt, {
      kind: 0,
      x: 1,
      y: 2,
      size: 3,
      data: 4,
      title: 5
    });
  }
}
function H_(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function W_(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = bt("image"), b(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), b(e, "height", i = t[1].height), b(e, "width", r = t[1].width), b(e, "preserveAspectRatio", "none"), b(e, "x", s = t[1].pos.x - t[1].width / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2);
    },
    m(c, u) {
      U(c, e, u), l || (a = [
        se(e, "mousedown", Ye(t[19])),
        se(e, "mouseup", Ye(t[20])),
        se(e, "click", Ye(t[15]))
      ], l = !0);
    },
    p(c, u) {
      u[0] & 3 && n !== (n = c[1].backgroundImageURL || c[0].nodeBackgroundImageURL) && b(e, "href", n), u[0] & 2 && i !== (i = c[1].height) && b(e, "height", i), u[0] & 2 && r !== (r = c[1].width) && b(e, "width", r), u[0] & 2 && s !== (s = c[1].pos.x - c[1].width / 2) && b(e, "x", s), u[0] & 2 && o !== (o = c[1].pos.y - c[1].height / 2) && b(e, "y", o);
    },
    d(c) {
      c && V(e), l = !1, ht(a);
    }
  };
}
function q_(t) {
  let e, n, i = t[1].notes + "", r, s, o, l, a, c, u, f, h, d;
  return {
    c() {
      e = bt("foreignObject"), n = j("div"), r = we(i), s = Q(), b(n, "class", "foreign-obj-div svelte-1td5oib"), b(e, "x", o = t[1].pos.x - t[1].noteswidth / 2), b(e, "y", l = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), b(e, "font-family", a = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", c = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", u = t[1].noteswidth), b(e, "height", f = t[1].notesheight);
    },
    m(p, g) {
      U(p, e, g), E(e, n), E(n, r), E(n, s), h || (d = [
        se(e, "mousedown", Ye(t[23])),
        se(e, "mouseup", Ye(t[24])),
        se(e, "click", Ye(t[13]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && i !== (i = p[1].notes + "") && ze(r, i), g[0] & 2 && o !== (o = p[1].pos.x - p[1].noteswidth / 2) && b(e, "x", o), g[0] & 2 && l !== (l = p[1].pos.y - p[1].height / 2 + p[1].labelheight + 10) && b(e, "y", l), g[0] & 1 && a !== (a = p[0].font) && b(e, "font-family", a), g[0] & 3 && c !== (c = p[1].nodenotesfontsize || p[0].nodenotesfontsize || 16) && b(e, "font-size", c), g[0] & 2 && u !== (u = p[1].noteswidth) && b(e, "width", u), g[0] & 2 && f !== (f = p[1].notesheight) && b(e, "height", f);
    },
    d(p) {
      p && V(e), h = !1, ht(d);
    }
  };
}
function J_(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = bt("foreignObject"), n = document.createElementNS("http://www.w3.org/1999/xhtml", "div"), b(n, "xmlns", "http://www.w3.org/1999/xhtml"), b(n, "class", "dynamicnotes-div svelte-1td5oib"), b(e, "x", i = t[1].pos.x - t[1].width / 2), b(e, "y", r = t[1].pos.y - t[1].height / 2 + 30 + t[1].notesheight), b(e, "font-family", s = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", o = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", l = t[1].width), b(e, "height", 140);
    },
    m(u, f) {
      U(u, e, f), E(e, n), n.innerHTML = t[6], a || (c = [
        se(e, "mousedown", Ye(t[25])),
        se(e, "mouseup", Ye(t[26])),
        se(e, "click", Ye(t[12]))
      ], a = !0);
    },
    p(u, f) {
      f[0] & 64 && (n.innerHTML = u[6]), f[0] & 2 && i !== (i = u[1].pos.x - u[1].width / 2) && b(e, "x", i), f[0] & 2 && r !== (r = u[1].pos.y - u[1].height / 2 + 30 + u[1].notesheight) && b(e, "y", r), f[0] & 1 && s !== (s = u[0].font) && b(e, "font-family", s), f[0] & 3 && o !== (o = u[1].nodenotesfontsize || u[0].nodenotesfontsize || 16) && b(e, "font-size", o), f[0] & 2 && l !== (l = u[1].width) && b(e, "width", l);
    },
    d(u) {
      u && V(e), a = !1, ht(c);
    }
  };
}
function K_(t) {
  let e, n, i = [[1, 0], [0, 1], [-1, 0], [0, -1]], r = [];
  for (let o = 0; o < 4; o += 1)
    r[o] = G_(H_(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < 4; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < 4; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 770) {
        i = [[1, 0], [0, 1], [-1, 0], [0, -1]];
        let a;
        for (a = 0; a < 4; a += 1) {
          const c = H_(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = G_(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = 4; a < 4; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < 4; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < 4; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function G_(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "plus",
      data: 22 + t[38][1] + 10 * t[38][0],
      x: t[1].pos.x + t[38][0] * t[1].width / 2,
      y: t[1].pos.y + t[38][1] * t[1].height / 2,
      title: "Create new connected node",
      size: 4
    }
  }), e.$on("click", t[8]), e.$on("mousedown", t[9]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.x = i[1].pos.x + i[38][0] * i[1].width / 2), r[0] & 2 && (s.y = i[1].pos.y + i[38][1] * i[1].height / 2), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Y_(t) {
  let e, n;
  function i(o, l) {
    return l[0] & 2 && (n = null), n == null && (n = !!o[1].badge.startsWith("http")), n ? VT : zT;
  }
  let r = i(t, [-1, -1]), s = r(t);
  return {
    c() {
      e = bt("g"), s.c(), b(e, "class", "badge");
    },
    m(o, l) {
      U(o, e, l), s.m(e, null);
    },
    p(o, l) {
      r === (r = i(o, l)) && s ? s.p(o, l) : (s.d(1), s = r(o), s && (s.c(), s.m(e, null)));
    },
    d(o) {
      o && V(e), s.d();
    }
  };
}
function zT(t) {
  let e, n, i, r, s = t[1].badge + "", o, l, a, c, u;
  return {
    c() {
      e = bt("circle"), r = bt("text"), o = we(s), b(e, "cx", n = t[1].pos.x - t[1].width / 2), b(e, "cy", i = t[1].pos.y - t[1].height / 2), b(e, "r", 10), b(e, "fill", "white"), b(e, "stroke", "orange"), b(r, "x", l = t[1].pos.x - t[1].width / 2 - 7), b(r, "y", a = t[1].pos.y - t[1].height / 2 + 6), b(r, "stroke", "white"), b(r, "fill", "white"), b(r, "class", "svelte-1td5oib");
    },
    m(f, h) {
      U(f, e, h), U(f, r, h), E(r, o), c || (u = [
        se(e, "mousedown", Ye(t[30])),
        se(e, "mouseup", Ye(t[31])),
        se(e, "click", Ye(t[32])),
        se(r, "mousedown", Ye(t[33])),
        se(r, "mouseup", Ye(t[34])),
        se(r, "click", Ye(t[35]))
      ], c = !0);
    },
    p(f, h) {
      h[0] & 2 && n !== (n = f[1].pos.x - f[1].width / 2) && b(e, "cx", n), h[0] & 2 && i !== (i = f[1].pos.y - f[1].height / 2) && b(e, "cy", i), h[0] & 2 && s !== (s = f[1].badge + "") && ze(o, s), h[0] & 2 && l !== (l = f[1].pos.x - f[1].width / 2 - 7) && b(r, "x", l), h[0] & 2 && a !== (a = f[1].pos.y - f[1].height / 2 + 6) && b(r, "y", a);
    },
    d(f) {
      f && V(e), f && V(r), c = !1, ht(u);
    }
  };
}
function VT(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = bt("image"), b(e, "x", n = t[1].pos.x - t[1].width / 2 - 10), b(e, "y", i = t[1].pos.y - t[1].height / 2 - 10), b(e, "width", 30), b(e, "height", 28), b(e, "href", r = t[1].badge);
    },
    m(l, a) {
      U(l, e, a), s || (o = [
        se(e, "mousedown", Ye(t[27])),
        se(e, "mouseup", Ye(t[28])),
        se(e, "click", Ye(t[29]))
      ], s = !0);
    },
    p(l, a) {
      a[0] & 2 && n !== (n = l[1].pos.x - l[1].width / 2 - 10) && b(e, "x", n), a[0] & 2 && i !== (i = l[1].pos.y - l[1].height / 2 - 10) && b(e, "y", i), a[0] & 2 && r !== (r = l[1].badge) && b(e, "href", r);
    },
    d(l) {
      l && V(e), s = !1, ht(o);
    }
  };
}
function X_(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d;
  return {
    c() {
      e = bt("polygon"), o = bt("line"), b(e, "points", n = [
        [
          t[1].pos.x + t[1].width / 2 - 24,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 + 24
        ].join(",")
      ].join(" ")), b(e, "fill", i = t[5] ? "transparent" : t[1].is_collapsed ? t[1].fill || t[0].nodefill : t[0].bgfill), b(e, "stroke", r = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(e, "stroke-width", s = t[3] || t[4] ? "2px" : "1px"), b(e, "class", "svelte-1td5oib"), b(o, "x1", l = t[1].pos.x + t[1].width / 2 - 27), b(o, "y1", a = t[1].pos.y - t[1].height / 2), b(o, "x2", c = t[1].pos.x + t[1].width / 2), b(o, "y2", u = t[1].pos.y - t[1].height / 2 + 27), b(o, "stroke", f = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(o, "stroke-width", "3px");
    },
    m(p, g) {
      U(p, e, g), U(p, o, g), h || (d = [
        se(e, "mousedown", Ye(t[10])),
        se(e, "mouseup", Ye(t[11])),
        se(e, "click", Ye(t[36]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && n !== (n = [
        [
          p[1].pos.x + p[1].width / 2 - 24,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 + 24
        ].join(",")
      ].join(" ")) && b(e, "points", n), g[0] & 35 && i !== (i = p[5] ? "transparent" : p[1].is_collapsed ? p[1].fill || p[0].nodefill : p[0].bgfill) && b(e, "fill", i), g[0] & 27 && r !== (r = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && b(e, "stroke", r), g[0] & 24 && s !== (s = p[3] || p[4] ? "2px" : "1px") && b(e, "stroke-width", s), g[0] & 2 && l !== (l = p[1].pos.x + p[1].width / 2 - 27) && b(o, "x1", l), g[0] & 2 && a !== (a = p[1].pos.y - p[1].height / 2) && b(o, "y1", a), g[0] & 2 && c !== (c = p[1].pos.x + p[1].width / 2) && b(o, "x2", c), g[0] & 2 && u !== (u = p[1].pos.y - p[1].height / 2 + 27) && b(o, "y2", u), g[0] & 27 && f !== (f = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && b(o, "stroke", f);
    },
    d(p) {
      p && V(e), p && V(o), h = !1, ht(d);
    }
  };
}
function UT(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = Q_(t[1]) + "", d, p = t[1].label + "", g, _, m, C, v, k, S, O, w, A, D, R, M, H, J = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && W_(t), I = t[1].notes && q_(t), z = t[1].has_dynamic_notes && J_(t), L = t[3] && !t[2].disableEditing && K_(t), K = t[1].badge && Y_(t), F = t[1].kind === "node" && !t[2].disableEditing && t[1].children && t[1].children.length > 0 && X_(t);
  return {
    c() {
      var N;
      e = bt("g"), n = bt("rect"), J && J.c(), f = bt("text"), d = we(h), g = we(p), I && I.c(), O = ot(), z && z.c(), w = ot(), L && L.c(), A = ot(), K && K.c(), D = ot(), F && F.c(), b(n, "x", i = t[1].pos.x - t[1].width / 2), b(n, "y", r = t[1].pos.y - t[1].height / 2), b(n, "width", s = t[1].width), b(n, "height", o = t[1].height), b(n, "fill", l = t[5] ? "transparent" : t[1].fill || t[0].nodefill), b(n, "fill-opacity", 1), b(n, "stroke", a = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(n, "stroke-width", c = t[3] || t[4] ? "2px" : "1px"), b(n, "rx", u = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), b(n, "class", "svelte-1td5oib"), b(f, "x", _ = t[1].pos.x - t[1].width / 2 + 30), b(f, "y", m = t[1].pos.y - t[1].height / 2 + t[1].labelheight), b(f, "font-family", C = t[0].font), b(f, "font-weight", v = ((N = t[1].notes) == null ? void 0 : N.length) > 0 ? "700" : "300"), b(f, "font-size", k = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), b(f, "fill", S = t[1].labelcolor || t[0].nodelabelstroke), b(f, "class", "svelte-1td5oib"), b(e, "class", "svelte-1td5oib");
    },
    m(N, te) {
      U(N, e, te), E(e, n), J && J.m(e, null), E(e, f), E(f, d), E(f, g), I && I.m(e, null), E(e, O), z && z.m(e, null), E(e, w), L && L.m(e, null), E(e, A), K && K.m(e, null), E(e, D), F && F.m(e, null), R = !0, M || (H = [
        se(n, "mousedown", Ye(t[17])),
        se(n, "mouseup", Ye(t[18])),
        se(n, "click", Ye(t[16])),
        se(f, "mousedown", Ye(t[21])),
        se(f, "mouseup", Ye(t[22])),
        se(f, "click", Ye(t[14]))
      ], M = !0);
    },
    p(N, te) {
      var ue;
      (!R || te[0] & 2 && i !== (i = N[1].pos.x - N[1].width / 2)) && b(n, "x", i), (!R || te[0] & 2 && r !== (r = N[1].pos.y - N[1].height / 2)) && b(n, "y", r), (!R || te[0] & 2 && s !== (s = N[1].width)) && b(n, "width", s), (!R || te[0] & 2 && o !== (o = N[1].height)) && b(n, "height", o), (!R || te[0] & 35 && l !== (l = N[5] ? "transparent" : N[1].fill || N[0].nodefill)) && b(n, "fill", l), (!R || te[0] & 27 && a !== (a = N[3] ? N[0].selectionColor : N[4] ? N[0].highlightColor : N[1].bordercolor || N[0].nodeborder)) && b(n, "stroke", a), (!R || te[0] & 24 && c !== (c = N[3] || N[4] ? "2px" : "1px")) && b(n, "stroke-width", c), (!R || te[0] & 1 && u !== (u = N[0].nodeborderradius === 0 ? N[0].nodeborderradius : N[0].nodeborderradius || 5)) && b(n, "rx", u), N[1].backgroundImageURL || N[0].nodeBackgroundImageURL ? J ? J.p(N, te) : (J = W_(N), J.c(), J.m(e, f)) : J && (J.d(1), J = null), (!R || te[0] & 2) && h !== (h = Q_(N[1]) + "") && ze(d, h), (!R || te[0] & 2) && p !== (p = N[1].label + "") && ze(g, p), (!R || te[0] & 2 && _ !== (_ = N[1].pos.x - N[1].width / 2 + 30)) && b(f, "x", _), (!R || te[0] & 2 && m !== (m = N[1].pos.y - N[1].height / 2 + N[1].labelheight)) && b(f, "y", m), (!R || te[0] & 1 && C !== (C = N[0].font)) && b(f, "font-family", C), (!R || te[0] & 2 && v !== (v = ((ue = N[1].notes) == null ? void 0 : ue.length) > 0 ? "700" : "300")) && b(f, "font-weight", v), (!R || te[0] & 3 && k !== (k = N[1].nodelabelfontsize || N[0].nodelabelfontsize || 16)) && b(f, "font-size", k), (!R || te[0] & 3 && S !== (S = N[1].labelcolor || N[0].nodelabelstroke)) && b(f, "fill", S), N[1].notes ? I ? I.p(N, te) : (I = q_(N), I.c(), I.m(e, O)) : I && (I.d(1), I = null), N[1].has_dynamic_notes ? z ? z.p(N, te) : (z = J_(N), z.c(), z.m(e, w)) : z && (z.d(1), z = null), N[3] && !N[2].disableEditing ? L ? (L.p(N, te), te[0] & 12 && P(L, 1)) : (L = K_(N), L.c(), P(L, 1), L.m(e, A)) : L && (Se(), x(L, 1, 1, () => {
        L = null;
      }), Ee()), N[1].badge ? K ? K.p(N, te) : (K = Y_(N), K.c(), K.m(e, D)) : K && (K.d(1), K = null), N[1].kind === "node" && !N[2].disableEditing && N[1].children && N[1].children.length > 0 ? F ? F.p(N, te) : (F = X_(N), F.c(), F.m(e, null)) : F && (F.d(1), F = null);
    },
    i(N) {
      R || (P(L), R = !0);
    },
    o(N) {
      x(L), R = !1;
    },
    d(N) {
      N && V(e), J && J.d(), I && I.d(), z && z.d(), L && L.d(), K && K.d(), F && F.d(), M = !1, ht(H);
    }
  };
}
function Q_(t) {
  return ";";
}
function HT(t) {
  let n = Array.from(t).reduce(
    (i, r) => {
      let s = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[s] = i[s] ?? [], i[s].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return "<table>" + Object.entries(n).map((i) => `<tr><td>${i[0]}</td><td><div style='display: flex'>` + i[1].map((r) => `<div style='background-color: yellow; padding: 2px 4px; border: thin solid black; margin-right: 4px'>${r.label}</div>`).join("") + "</div></td></tr>").join("") + "</table>";
}
function WT(t, e, n) {
  let i;
  const r = Vl();
  let { theme: s } = e, { item: o } = e, { graph: l } = e, { isSelected: a } = e, { isHighlighted: c } = e, { isHidden: u = !1 } = e;
  function f(Z) {
    let Le = parseInt(Z.target.getAttribute("data-handle"));
    r("createnode", { from: o, handle: Le });
  }
  function h(Z) {
    let Le = parseInt(Z.target.getAttribute("data-handle"));
    r("itemcontrolmousedown", { source: o, handle: Le, rawEvent: Z });
  }
  function d(Z, Le, Ie) {
    return Le.tags.forEach((Fe) => Ie.add(Fe)), Le.children.forEach((Fe) => {
      d(Z, zn(Fe, Z), Ie);
    }), Ie;
  }
  function p(Z) {
    Ut.call(this, t, Z);
  }
  function g(Z) {
    Ut.call(this, t, Z);
  }
  function _(Z) {
    Ut.call(this, t, Z);
  }
  function m(Z) {
    Ut.call(this, t, Z);
  }
  function C(Z) {
    Ut.call(this, t, Z);
  }
  function v(Z) {
    Ut.call(this, t, Z);
  }
  function k(Z) {
    Ut.call(this, t, Z);
  }
  const S = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), O = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), w = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), A = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), D = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), R = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), M = (Z) => r("itemMouseDown", {
    source: o,
    rawEvent: Z,
    from: { x: Z.clientX, y: Z.clientY }
  }), H = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), J = (Z) => r("itemMouseDown", {
    source: o,
    rawEvent: Z,
    from: { x: Z.clientX, y: Z.clientY }
  }), I = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), z = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), L = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), K = (Z) => r("itemBadgeClick", { source: o, rawEvent: Z }), F = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), N = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), te = (Z) => r("itemBadgeClick", { source: o, rawEvent: Z }), ue = (Z) => r("itemMouseDown", { source: o, rawEvent: Z }), q = (Z) => r("itemMouseUp", { source: o, rawEvent: Z }), re = (Z) => r("itemBadgeClick", { source: o, rawEvent: Z }), ie = (Z) => r("itemCollapserClick", { source: o, rawEvent: Z });
  return t.$$set = (Z) => {
    "theme" in Z && n(0, s = Z.theme), "item" in Z && n(1, o = Z.item), "graph" in Z && n(2, l = Z.graph), "isSelected" in Z && n(3, a = Z.isSelected), "isHighlighted" in Z && n(4, c = Z.isHighlighted), "isHidden" in Z && n(5, u = Z.isHidden);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 6 && n(6, i = HT(d(l, o, /* @__PURE__ */ new Set())));
  }, [
    s,
    o,
    l,
    a,
    c,
    u,
    i,
    r,
    f,
    h,
    p,
    g,
    _,
    m,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    D,
    R,
    M,
    H,
    J,
    I,
    z,
    L,
    K,
    F,
    N,
    te,
    ue,
    q,
    re,
    ie
  ];
}
class qT extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      WT,
      UT,
      xt,
      {
        theme: 0,
        item: 1,
        graph: 2,
        isSelected: 3,
        isHighlighted: 4,
        isHidden: 5
      },
      null,
      [-1, -1]
    );
  }
}
function Z_(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g = t[0].label.length > 0 && $_(t);
  return {
    c() {
      e = bt("text"), n = bt("textPath"), i = we(`➤
			`), g && g.c(), b(n, "href", r = `#edgepathmain${t[0].id}`), b(n, "startOffset", s = t[0].label.length > 0 ? "20%" : "50%"), b(n, "lengthAdjust", "spacingAndGlyphs"), b(n, "font-family", "Verdana"), b(n, "font-size", "20"), b(n, "start", ""), b(n, "fill", o = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke", l = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke-width", a = t[0].weight || 5), b(n, "style", c = `--hoverColor: ${t[1].theme.selectionColor}`), b(n, "class", "svelte-18y4spp"), b(e, "font-family", u = t[1].theme.font), b(e, "class", "arrowhead svelte-18y4spp"), b(e, "font-size", "20"), b(e, "fill", f = t[0].stroke), b(e, "style", h = `--hoverColor: ${t[1].theme.selectionColor}`);
    },
    m(_, m) {
      U(_, e, m), E(e, n), E(n, i), g && g.m(e, null), d || (p = [
        se(n, "mousedown", Ye(t[28])),
        se(n, "mouseup", Ye(t[29])),
        se(n, "click", Ye(t[15])),
        se(e, "mousedown", Ye(t[32])),
        se(e, "mouseup", Ye(t[33])),
        se(e, "click", Ye(t[13]))
      ], d = !0);
    },
    p(_, m) {
      m[0] & 1 && r !== (r = `#edgepathmain${_[0].id}`) && b(n, "href", r), m[0] & 1 && s !== (s = _[0].label.length > 0 ? "20%" : "50%") && b(n, "startOffset", s), m[0] & 7 && o !== (o = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && b(n, "fill", o), m[0] & 7 && l !== (l = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && b(n, "stroke", l), m[0] & 1 && a !== (a = _[0].weight || 5) && b(n, "stroke-width", a), m[0] & 2 && c !== (c = `--hoverColor: ${_[1].theme.selectionColor}`) && b(n, "style", c), _[0].label.length > 0 ? g ? g.p(_, m) : (g = $_(_), g.c(), g.m(e, null)) : g && (g.d(1), g = null), m[0] & 2 && u !== (u = _[1].theme.font) && b(e, "font-family", u), m[0] & 1 && f !== (f = _[0].stroke) && b(e, "fill", f), m[0] & 2 && h !== (h = `--hoverColor: ${_[1].theme.selectionColor}`) && b(e, "style", h);
    },
    d(_) {
      _ && V(e), g && g.d(), d = !1, ht(p);
    }
  };
}
function $_(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = bt("textPath"), n = we(`➤
				`), b(e, "href", i = `#edgepathmain${t[0].id}`), b(e, "startOffset", "80%"), b(e, "lengthAdjust", "spacingAndGlyphs"), b(e, "font-family", "Verdana"), b(e, "font-size", "20"), b(e, "start", ""), b(e, "fill", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(e, "stroke", s = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(e, "stroke-width", o = t[0].weight || 5), b(e, "style", l = `--hoverColor: ${t[1].theme.selectionColor}`), b(e, "class", "svelte-18y4spp");
    },
    m(u, f) {
      U(u, e, f), E(e, n), a || (c = [
        se(e, "mousedown", Ye(t[30])),
        se(e, "mouseup", Ye(t[31])),
        se(e, "click", Ye(t[14]))
      ], a = !0);
    },
    p(u, f) {
      f[0] & 1 && i !== (i = `#edgepathmain${u[0].id}`) && b(e, "href", i), f[0] & 7 && r !== (r = u[2] ? u[1].theme.selectionColor : u[0].stroke || u[1].theme.edgestroke) && b(e, "fill", r), f[0] & 7 && s !== (s = u[2] ? u[1].theme.selectionColor : u[0].stroke || u[1].theme.edgestroke) && b(e, "stroke", s), f[0] & 1 && o !== (o = u[0].weight || 5) && b(e, "stroke-width", o), f[0] & 2 && l !== (l = `--hoverColor: ${u[1].theme.selectionColor}`) && b(e, "style", l);
    },
    d(u) {
      u && V(e), a = !1, ht(c);
    }
  };
}
function ey(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "cross",
      data: "from",
      x: t[5].x,
      y: t[5].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32 && (s.x = i[5].x), r[0] & 32 && (s.y = i[5].y), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function ty(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "cross",
      data: "to",
      x: t[4].x,
      y: t[4].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16 && (s.x = i[4].x), r[0] & 16 && (s.y = i[4].y), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function JT(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g = t[0].label + "", _, m, C, v, k, S, O, w, A, D, R, M, H, J = t[0].directed && Z_(t), I = t[2] && t[5] && !t[1].disableEditing && ey(t), z = t[2] && t[4] && !t[1].disableEditing && ty(t);
  return {
    c() {
      e = bt("g"), n = bt("path"), c = bt("path"), d = bt("text"), p = bt("textPath"), _ = we(g), J && J.c(), A = ot(), I && I.c(), D = ot(), z && z.c(), b(n, "d", i = t[7](t[1])), b(n, "fill", "none"), b(n, "stroke", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke-width", s = t[0].weight || 5), b(n, "class", "edgePath svelte-18y4spp"), b(n, "id", o = `edgepathmain${t[0].id}`), b(n, "stroke-dasharray", l = ny(t[0].strokeType || t[1].theme.edgestroketype)), b(n, "style", a = `--hoverColor: ${t[1].theme.selectionColor}`), b(c, "d", u = t[7](t[1])), b(c, "fill", "none"), b(c, "stroke", "transparent"), b(c, "stroke-width", f = t[0].weight || 5), b(c, "transform", t[3]), b(c, "id", h = `edgepath${t[0].id}`), b(c, "class", "svelte-18y4spp"), b(p, "href", m = `#edgepath${t[0].id}`), b(p, "startOffset", "40%"), b(p, "lengthAdjust", "spacingAndGlyphs"), b(p, "font-family", "Verdana"), b(p, "font-size", "20"), b(p, "fill", C = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(p, "stroke", v = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(p, "style", k = `--hoverColor: ${t[1].theme.selectionColor}`), b(p, "class", "svelte-18y4spp"), b(d, "font-family", S = t[1].theme.font), b(d, "font-size", "20"), b(d, "fill", O = t[0].stroke), b(d, "style", w = `--hoverColor: ${t[1].theme.selectionColor}`), b(d, "class", "svelte-18y4spp"), b(e, "class", "svelte-18y4spp");
    },
    m(L, K) {
      U(L, e, K), E(e, n), E(e, c), E(e, d), E(d, p), E(p, _), J && J.m(e, null), E(e, A), I && I.m(e, null), E(e, D), z && z.m(e, null), R = !0, M || (H = [
        se(n, "mousedown", Ye(t[20])),
        se(n, "mouseup", Ye(t[21])),
        se(n, "click", Ye(t[19])),
        se(c, "mousedown", Ye(t[22])),
        se(c, "mouseup", Ye(t[23])),
        se(c, "click", Ye(t[18])),
        se(p, "mousedown", Ye(t[24])),
        se(p, "mouseup", Ye(t[25])),
        se(p, "click", Ye(t[17])),
        se(d, "mousedown", Ye(t[26])),
        se(d, "mouseup", Ye(t[27])),
        se(d, "click", Ye(t[16]))
      ], M = !0);
    },
    p(L, K) {
      (!R || K[0] & 2 && i !== (i = L[7](L[1]))) && b(n, "d", i), (!R || K[0] & 7 && r !== (r = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(n, "stroke", r), (!R || K[0] & 1 && s !== (s = L[0].weight || 5)) && b(n, "stroke-width", s), (!R || K[0] & 1 && o !== (o = `edgepathmain${L[0].id}`)) && b(n, "id", o), (!R || K[0] & 3 && l !== (l = ny(L[0].strokeType || L[1].theme.edgestroketype))) && b(n, "stroke-dasharray", l), (!R || K[0] & 2 && a !== (a = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(n, "style", a), (!R || K[0] & 2 && u !== (u = L[7](L[1]))) && b(c, "d", u), (!R || K[0] & 1 && f !== (f = L[0].weight || 5)) && b(c, "stroke-width", f), (!R || K[0] & 8) && b(c, "transform", L[3]), (!R || K[0] & 1 && h !== (h = `edgepath${L[0].id}`)) && b(c, "id", h), (!R || K[0] & 1) && g !== (g = L[0].label + "") && ze(_, g), (!R || K[0] & 1 && m !== (m = `#edgepath${L[0].id}`)) && b(p, "href", m), (!R || K[0] & 7 && C !== (C = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(p, "fill", C), (!R || K[0] & 7 && v !== (v = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(p, "stroke", v), (!R || K[0] & 2 && k !== (k = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(p, "style", k), (!R || K[0] & 2 && S !== (S = L[1].theme.font)) && b(d, "font-family", S), (!R || K[0] & 1 && O !== (O = L[0].stroke)) && b(d, "fill", O), (!R || K[0] & 2 && w !== (w = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(d, "style", w), L[0].directed ? J ? J.p(L, K) : (J = Z_(L), J.c(), J.m(e, A)) : J && (J.d(1), J = null), L[2] && L[5] && !L[1].disableEditing ? I ? (I.p(L, K), K[0] & 38 && P(I, 1)) : (I = ey(L), I.c(), P(I, 1), I.m(e, D)) : I && (Se(), x(I, 1, 1, () => {
        I = null;
      }), Ee()), L[2] && L[4] && !L[1].disableEditing ? z ? (z.p(L, K), K[0] & 22 && P(z, 1)) : (z = ty(L), z.c(), P(z, 1), z.m(e, null)) : z && (Se(), x(z, 1, 1, () => {
        z = null;
      }), Ee());
    },
    i(L) {
      R || (P(I), P(z), R = !0);
    },
    o(L) {
      x(I), x(z), R = !1;
    },
    d(L) {
      L && V(e), J && J.d(), I && I.d(), z && z.d(), M = !1, ht(H);
    }
  };
}
function ny(t) {
  return t === "dashed" ? "8,5" : t === "dotted" ? "5,5" : !1;
}
function KT(t, e, n) {
  let i, r, s, o, l, a, c;
  const u = Vl();
  let { item: f } = e, { graph: h } = e, { isSelected: d } = e;
  function p(q) {
    let re = f.shape || q.theme.edgeshape;
    if (re === "straight")
      return `M ${l.x},${l.y} L ${a.x},${a.y}`;
    if (re === "curved") {
      let ie = {
        x: s.pos.x + 30,
        y: s.pos.y + 30
      }, Z = {
        x: o.pos.x - 30,
        y: o.pos.y - 30
      };
      return [
        `M ${l.x},${l.y}`,
        "C",
        `${ie.x},${ie.y}`,
        `${Z.x},${Z.y}`,
        `${a.x},${a.y}`
      ].join(" ");
    } else if (re === "ortho")
      return `M ${l.x},${l.y} h ${(a.x - l.x) / 2} v ${a.y - l.y} L ${a.x},${a.y}`;
  }
  function g(q) {
    q.target.getAttribute("data-handle"), u("edgeChanged", { source: f });
  }
  function _(q, re) {
    let ie = (q.pos.x + re.pos.x) / 2, Z = (q.pos.y + re.pos.y) / 2, Le = Math.atan2(re.pos.y - q.pos.y, re.pos.x - q.pos.x) * 180 / Math.PI;
    return Le < -90 || Le > 90 ? `translate(0, -6) rotate(180, ${ie}, ${Z})` : "translate(0, -6) rotate(0)";
  }
  function m(q) {
    Ut.call(this, t, q);
  }
  function C(q) {
    Ut.call(this, t, q);
  }
  function v(q) {
    Ut.call(this, t, q);
  }
  function k(q) {
    Ut.call(this, t, q);
  }
  function S(q) {
    Ut.call(this, t, q);
  }
  function O(q) {
    Ut.call(this, t, q);
  }
  function w(q) {
    Ut.call(this, t, q);
  }
  const A = (q) => u("itemMouseDown", { source: f, rawEvent: q }), D = (q) => u("itemMouseUp", { source: f, rawEvent: q }), R = (q) => u("itemMouseDown", { source: f, rawEvent: q }), M = (q) => u("itemMouseUp", { source: f, rawEvent: q }), H = (q) => u("itemMouseDown", { source: f, rawEvent: q }), J = (q) => u("itemMouseUp", { source: f, rawEvent: q }), I = (q) => u("itemMouseDown", { source: f, rawEvent: q }), z = (q) => u("itemMouseUp", { source: f, rawEvent: q }), L = (q) => u("itemMouseDown", { source: f, rawEvent: q }), K = (q) => u("itemMouseUp", { source: f, rawEvent: q }), F = (q) => u("itemMouseDown", { source: f, rawEvent: q }), N = (q) => u("itemMouseUp", { source: f, rawEvent: q }), te = (q) => u("itemMouseDown", { source: f, rawEvent: q }), ue = (q) => u("itemMouseUp", { source: f, rawEvent: q });
  return t.$$set = (q) => {
    "item" in q && n(0, f = q.item), "graph" in q && n(1, h = q.graph), "isSelected" in q && n(2, d = q.isSelected);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(12, i = f.fromOrphan || zn(f.fromId, h)), t.$$.dirty[0] & 3 && n(11, r = f.toOrphan || zn(f.toId, h)), t.$$.dirty[0] & 4098 && n(10, s = Aa(i, h) || i), t.$$.dirty[0] & 2050 && n(9, o = Aa(r, h) || r), t.$$.dirty[0] & 1024 && n(5, l = s && { x: s.pos.x, y: s.pos.y }), t.$$.dirty[0] & 512 && n(4, a = o && { x: o.pos.x, y: o.pos.y }), t.$$.dirty[0] & 1536 && n(3, c = s && o && _(s, o));
  }, [
    f,
    h,
    d,
    c,
    a,
    l,
    u,
    p,
    g,
    o,
    s,
    r,
    i,
    m,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    D,
    R,
    M,
    H,
    J,
    I,
    z,
    L,
    K,
    F,
    N,
    te,
    ue
  ];
}
class GT extends Qe {
  constructor(e) {
    super(), Xe(this, e, KT, JT, xt, { item: 0, graph: 1, isSelected: 2 }, null, [-1, -1]);
  }
}
function iy(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function ry(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function sy(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function YT(t) {
  let e, n, i = t[1], r = [];
  for (let l = 0; l < i.length; l += 1)
    r[l] = oy(ry(t, i, l));
  let s = t[2], o = [];
  for (let l = 0; l < s.length; l += 1)
    o[l] = ly(iy(t, s, l));
  return {
    c() {
      for (let l = 0; l < r.length; l += 1)
        r[l].c();
      e = Q();
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      n = ot();
    },
    m(l, a) {
      for (let c = 0; c < r.length; c += 1)
        r[c].m(l, a);
      U(l, e, a);
      for (let c = 0; c < o.length; c += 1)
        o[c].m(l, a);
      U(l, n, a);
    },
    p(l, a) {
      if (a & 2) {
        i = l[1];
        let c;
        for (c = 0; c < i.length; c += 1) {
          const u = ry(l, i, c);
          r[c] ? r[c].p(u, a) : (r[c] = oy(u), r[c].c(), r[c].m(e.parentNode, e));
        }
        for (; c < r.length; c += 1)
          r[c].d(1);
        r.length = i.length;
      }
      if (a & 4) {
        s = l[2];
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = iy(l, s, c);
          o[c] ? o[c].p(u, a) : (o[c] = ly(u), o[c].c(), o[c].m(n.parentNode, n));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = s.length;
      }
    },
    d(l) {
      Vt(r, l), l && V(e), Vt(o, l), l && V(n);
    }
  };
}
function XT(t) {
  let e, n = t[1], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = ay(sy(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = ot();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s & 2) {
        n = r[1];
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = sy(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = ay(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      Vt(i, r), r && V(e);
    }
  };
}
function oy(t) {
  let e;
  return {
    c() {
      e = bt("circle"), b(e, "r", 100 + t[3]), b(e, "stroke", "black"), b(e, "fill", "none"), b(e, "opacity", "0.6");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function ly(t) {
  let e;
  return {
    c() {
      e = bt("line"), b(e, "x1", -5e3 * Math.cos(t[6])), b(e, "y1", -5e3 * Math.sin(t[6])), b(e, "x2", 5e3 * Math.cos(t[6])), b(e, "y2", 5e3 * Math.sin(t[6])), b(e, "class", "svelte-19wjlzj");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function ay(t) {
  let e, n, i;
  return {
    c() {
      e = bt("line"), n = Q(), i = bt("line"), b(e, "x1", "0"), b(e, "y1", 0 + t[3]), b(e, "x2", 5e3), b(e, "y2", 0 + t[3]), b(e, "class", "svelte-19wjlzj"), b(i, "x1", 0 + t[3]), b(i, "y1", "0"), b(i, "x2", 0 + t[3]), b(i, "y2", "5000"), b(i, "class", "svelte-19wjlzj");
    },
    m(r, s) {
      U(r, e, s), U(r, n, s), U(r, i, s);
    },
    p: ve,
    d(r) {
      r && V(e), r && V(n), r && V(i);
    }
  };
}
function QT(t) {
  let e;
  function n(s, o) {
    if (s[0] === "cartesian")
      return XT;
    if (s[0] === "polar")
      return YT;
  }
  let i = n(t), r = i && i(t);
  return {
    c() {
      r && r.c(), e = ot();
    },
    m(s, o) {
      r && r.m(s, o), U(s, e, o);
    },
    p(s, [o]) {
      i === (i = n(s)) && r ? r.p(s, o) : (r && r.d(1), r = i && i(s), r && (r.c(), r.m(e.parentNode, e)));
    },
    i: ve,
    o: ve,
    d(s) {
      r && r.d(s), s && V(e);
    }
  };
}
function ZT(t, e, n) {
  let i = [...Array(50).keys()].map((o) => o * 100), r = [0, 30, 60, 90, 120, 150].map((o) => o * Math.PI / 180), { kind: s } = e;
  return t.$$set = (o) => {
    "kind" in o && n(0, s = o.kind);
  }, [s, i, r];
}
class $T extends Qe {
  constructor(e) {
    super(), Xe(this, e, ZT, QT, xt, { kind: 0 });
  }
}
function cy(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = bt("image"), b(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), b(e, "height", i = t[1].height), b(e, "width", r = t[1].width), b(e, "preserveAspectRatio", "none"), b(e, "x", s = t[1].pos.x - t[1].width / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2);
    },
    m(c, u) {
      U(c, e, u), l || (a = [
        se(e, "mousedown", Ye(t[10])),
        se(e, "mouseup", Ye(t[11])),
        se(e, "click", Ye(t[6]))
      ], l = !0);
    },
    p(c, u) {
      u & 3 && n !== (n = c[1].backgroundImageURL || c[0].nodeBackgroundImageURL) && b(e, "href", n), u & 2 && i !== (i = c[1].height) && b(e, "height", i), u & 2 && r !== (r = c[1].width) && b(e, "width", r), u & 2 && s !== (s = c[1].pos.x - c[1].width / 2) && b(e, "x", s), u & 2 && o !== (o = c[1].pos.y - c[1].height / 2) && b(e, "y", o);
    },
    d(c) {
      c && V(e), l = !1, ht(a);
    }
  };
}
function uy(t) {
  let e, n, i = t[1].notes + "", r, s, o, l, a, c, u, f, h;
  return {
    c() {
      e = bt("foreignObject"), n = j("div"), r = we(i), b(n, "class", "foreign-obj-div svelte-3cf8cd"), b(e, "x", s = t[1].pos.x - t[1].noteswidth / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), b(e, "font-family", l = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", a = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", c = t[1].noteswidth), b(e, "height", u = t[1].notesheight);
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(n, r), f || (h = [
        se(e, "mousedown", Ye(t[14])),
        se(e, "mouseup", Ye(t[15])),
        se(e, "click", Ye(t[4]))
      ], f = !0);
    },
    p(d, p) {
      p & 2 && i !== (i = d[1].notes + "") && ze(r, i), p & 2 && s !== (s = d[1].pos.x - d[1].noteswidth / 2) && b(e, "x", s), p & 2 && o !== (o = d[1].pos.y - d[1].height / 2 + d[1].labelheight + 10) && b(e, "y", o), p & 1 && l !== (l = d[0].font) && b(e, "font-family", l), p & 3 && a !== (a = d[1].nodenotesfontsize || d[0].nodenotesfontsize || 16) && b(e, "font-size", a), p & 2 && c !== (c = d[1].noteswidth) && b(e, "width", c), p & 2 && u !== (u = d[1].notesheight) && b(e, "height", u);
    },
    d(d) {
      d && V(e), f = !1, ht(h);
    }
  };
}
function eR(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = t[1].label + "", d, p, g, _, m, C, v, k, S, O = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && cy(t), w = t[1].notes && uy(t);
  return {
    c() {
      var A;
      e = bt("g"), n = bt("rect"), O && O.c(), f = bt("text"), d = we(h), w && w.c(), b(n, "x", i = t[1].pos.x - t[1].width / 2), b(n, "y", r = t[1].pos.y - t[1].height / 2), b(n, "width", s = t[1].width), b(n, "height", o = t[1].height), b(n, "fill", l = t[1].fill || t[0].nodefill), b(n, "fill-opacity", 1), b(n, "stroke", a = t[2] ? t[0].selectionColor : t[1].bordercolor || t[0].nodeborder), b(n, "stroke-width", c = t[2] ? "6px" : "3px"), b(n, "rx", u = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), b(n, "class", "svelte-3cf8cd"), b(f, "x", p = t[1].pos.x - t[1].width / 2 + 30), b(f, "y", g = t[1].pos.y - t[1].height / 2 + 20), b(f, "font-family", _ = t[0].font), b(f, "font-weight", m = ((A = t[1].notes) == null ? void 0 : A.length) > 0 ? "700" : "300"), b(f, "font-size", C = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), b(f, "fill", v = t[1].labelcolor || t[0].nodelabelstroke), b(f, "class", "svelte-3cf8cd"), b(e, "class", "svelte-3cf8cd");
    },
    m(A, D) {
      U(A, e, D), E(e, n), O && O.m(e, null), E(e, f), E(f, d), w && w.m(e, null), k || (S = [
        se(n, "mousedown", Ye(t[8])),
        se(n, "mouseup", Ye(t[9])),
        se(n, "click", Ye(t[7])),
        se(f, "mousedown", Ye(t[12])),
        se(f, "mouseup", Ye(t[13])),
        se(f, "click", Ye(t[5]))
      ], k = !0);
    },
    p(A, [D]) {
      var R;
      D & 2 && i !== (i = A[1].pos.x - A[1].width / 2) && b(n, "x", i), D & 2 && r !== (r = A[1].pos.y - A[1].height / 2) && b(n, "y", r), D & 2 && s !== (s = A[1].width) && b(n, "width", s), D & 2 && o !== (o = A[1].height) && b(n, "height", o), D & 3 && l !== (l = A[1].fill || A[0].nodefill) && b(n, "fill", l), D & 7 && a !== (a = A[2] ? A[0].selectionColor : A[1].bordercolor || A[0].nodeborder) && b(n, "stroke", a), D & 4 && c !== (c = A[2] ? "6px" : "3px") && b(n, "stroke-width", c), D & 1 && u !== (u = A[0].nodeborderradius === 0 ? A[0].nodeborderradius : A[0].nodeborderradius || 5) && b(n, "rx", u), A[1].backgroundImageURL || A[0].nodeBackgroundImageURL ? O ? O.p(A, D) : (O = cy(A), O.c(), O.m(e, f)) : O && (O.d(1), O = null), D & 2 && h !== (h = A[1].label + "") && ze(d, h), D & 2 && p !== (p = A[1].pos.x - A[1].width / 2 + 30) && b(f, "x", p), D & 2 && g !== (g = A[1].pos.y - A[1].height / 2 + 20) && b(f, "y", g), D & 1 && _ !== (_ = A[0].font) && b(f, "font-family", _), D & 2 && m !== (m = ((R = A[1].notes) == null ? void 0 : R.length) > 0 ? "700" : "300") && b(f, "font-weight", m), D & 3 && C !== (C = A[1].nodelabelfontsize || A[0].nodelabelfontsize || 16) && b(f, "font-size", C), D & 3 && v !== (v = A[1].labelcolor || A[0].nodelabelstroke) && b(f, "fill", v), A[1].notes ? w ? w.p(A, D) : (w = uy(A), w.c(), w.m(e, null)) : w && (w.d(1), w = null);
    },
    i: ve,
    o: ve,
    d(A) {
      A && V(e), O && O.d(), w && w.d(), k = !1, ht(S);
    }
  };
}
function tR(t, e, n) {
  const i = Vl();
  let { theme: r } = e, { item: s } = e, { isSelected: o } = e;
  function l(v) {
    Ut.call(this, t, v);
  }
  function a(v) {
    Ut.call(this, t, v);
  }
  function c(v) {
    Ut.call(this, t, v);
  }
  function u(v) {
    Ut.call(this, t, v);
  }
  const f = (v) => i("itemMouseDown", { source: s, rawEvent: v }), h = (v) => i("itemMouseUp", { source: s, rawEvent: v }), d = (v) => i("itemMouseDown", { source: s, rawEvent: v }), p = (v) => i("itemMouseUp", { source: s, rawEvent: v }), g = (v) => i("itemMouseDown", { source: s, rawEvent: v }), _ = (v) => i("itemMouseUp", { source: s, rawEvent: v }), m = (v) => i("itemMouseDown", {
    source: s,
    rawEvent: v,
    from: { x: v.clientX, y: v.clientY }
  }), C = (v) => i("itemMouseUp", { source: s, rawEvent: v });
  return t.$$set = (v) => {
    "theme" in v && n(0, r = v.theme), "item" in v && n(1, s = v.item), "isSelected" in v && n(2, o = v.isSelected);
  }, [
    r,
    s,
    o,
    i,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C
  ];
}
class nR extends Qe {
  constructor(e) {
    super(), Xe(this, e, tR, eR, xt, { theme: 0, item: 1, isSelected: 2 });
  }
}
function mi(t, e = !!rR("debug")) {
  if (e) {
    const n = sR(t);
    return function(...r) {
      console.log(`%c${t}`, `color:${n}`, ...r);
    };
  } else
    return iR;
}
function iR() {
}
function rR(t) {
  try {
    if (typeof window < "u" && typeof window.localStorage < "u")
      return window.localStorage[t];
  } catch {
  }
}
function sR(t) {
  let e = 0;
  for (let n = 0; n < t.length; n++)
    e = (e << 5) - e + t.charCodeAt(n), e |= 0;
  return fy[Math.abs(e) % fy.length];
}
const fy = [
  "#0000CC",
  "#0099FF",
  "#009400",
  "#8dd200",
  "#CCCC00",
  "#CC9933",
  "#ae04e7",
  "#ff35d7",
  "#FF3333",
  "#FF6600",
  "#FF9933",
  "#FFCC33"
];
function oR(t, { delay: e = 0, duration: n = 400, easing: i = L4 } = {}) {
  const r = +getComputedStyle(t).opacity;
  return {
    delay: e,
    duration: n,
    easing: i,
    css: (s) => `opacity: ${s * r}`
  };
}
const { window: lR } = np;
function hy(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C = t[1].closeButton && dy(t);
  var v = t[2];
  function k(S) {
    return {};
  }
  return v && (o = ws(v, k())), {
    c() {
      e = j("div"), n = j("div"), i = j("div"), C && C.c(), r = Q(), s = j("div"), o && me(o.$$.fragment), b(s, "class", l = bn(t[1].classContent) + " svelte-n7cvum"), b(s, "style", t[9]), Ce(s, "content", !t[0]), b(i, "class", a = bn(t[1].classWindow) + " svelte-n7cvum"), b(i, "role", "dialog"), b(i, "aria-modal", "true"), b(i, "aria-label", c = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null), b(i, "aria-labelledby", u = t[1].ariaLabelledBy || null), b(i, "style", t[8]), Ce(i, "window", !t[0]), b(n, "class", h = bn(t[1].classWindowWrap) + " svelte-n7cvum"), b(n, "style", t[7]), Ce(n, "wrap", !t[0]), b(e, "class", d = bn(t[1].classBg) + " svelte-n7cvum"), b(e, "style", t[6]), Ce(e, "bg", !t[0]);
    },
    m(S, O) {
      U(S, e, O), E(e, n), E(n, i), C && C.m(i, null), E(i, r), E(i, s), o && pe(o, s, null), t[49](i), t[50](n), t[51](e), g = !0, _ || (m = [
        se(i, "introstart", function() {
          hi(t[13]) && t[13].apply(this, arguments);
        }),
        se(i, "outrostart", function() {
          hi(t[14]) && t[14].apply(this, arguments);
        }),
        se(i, "introend", function() {
          hi(t[15]) && t[15].apply(this, arguments);
        }),
        se(i, "outroend", function() {
          hi(t[16]) && t[16].apply(this, arguments);
        }),
        se(e, "mousedown", t[20]),
        se(e, "mouseup", t[21])
      ], _ = !0);
    },
    p(S, O) {
      if (t = S, t[1].closeButton ? C ? (C.p(t, O), O[0] & 2 && P(C, 1)) : (C = dy(t), C.c(), P(C, 1), C.m(i, r)) : C && (Se(), x(C, 1, 1, () => {
        C = null;
      }), Ee()), v !== (v = t[2])) {
        if (o) {
          Se();
          const w = o;
          x(w.$$.fragment, 1, 0, () => {
            ge(w, 1);
          }), Ee();
        }
        v ? (o = ws(v, k()), me(o.$$.fragment), P(o.$$.fragment, 1), pe(o, s, null)) : o = null;
      }
      (!g || O[0] & 2 && l !== (l = bn(t[1].classContent) + " svelte-n7cvum")) && b(s, "class", l), (!g || O[0] & 512) && b(s, "style", t[9]), (!g || O[0] & 3) && Ce(s, "content", !t[0]), (!g || O[0] & 2 && a !== (a = bn(t[1].classWindow) + " svelte-n7cvum")) && b(i, "class", a), (!g || O[0] & 2 && c !== (c = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null)) && b(i, "aria-label", c), (!g || O[0] & 2 && u !== (u = t[1].ariaLabelledBy || null)) && b(i, "aria-labelledby", u), (!g || O[0] & 256) && b(i, "style", t[8]), (!g || O[0] & 3) && Ce(i, "window", !t[0]), (!g || O[0] & 2 && h !== (h = bn(t[1].classWindowWrap) + " svelte-n7cvum")) && b(n, "class", h), (!g || O[0] & 128) && b(n, "style", t[7]), (!g || O[0] & 3) && Ce(n, "wrap", !t[0]), (!g || O[0] & 2 && d !== (d = bn(t[1].classBg) + " svelte-n7cvum")) && b(e, "class", d), (!g || O[0] & 64) && b(e, "style", t[6]), (!g || O[0] & 3) && Ce(e, "bg", !t[0]);
    },
    i(S) {
      g || (P(C), o && P(o.$$.fragment, S), Sa(() => {
        f || (f = df(i, t[12], t[1].transitionWindowProps, !0)), f.run(1);
      }), Sa(() => {
        p || (p = df(e, t[11], t[1].transitionBgProps, !0)), p.run(1);
      }), g = !0);
    },
    o(S) {
      x(C), o && x(o.$$.fragment, S), f || (f = df(i, t[12], t[1].transitionWindowProps, !1)), f.run(0), p || (p = df(e, t[11], t[1].transitionBgProps, !1)), p.run(0), g = !1;
    },
    d(S) {
      S && V(e), C && C.d(), o && ge(o), t[49](null), S && f && f.end(), t[50](null), t[51](null), S && p && p.end(), _ = !1, ht(m);
    }
  };
}
function dy(t) {
  let e, n, i, r, s;
  const o = [cR, aR], l = [];
  function a(c, u) {
    return u[0] & 2 && (e = null), e == null && (e = !!c[17](c[1].closeButton)), e ? 0 : 1;
  }
  return n = a(t, [-1, -1, -1]), i = l[n] = o[n](t), {
    c() {
      i.c(), r = ot();
    },
    m(c, u) {
      l[n].m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      let f = n;
      n = a(c, u), n === f ? l[n].p(c, u) : (Se(), x(l[f], 1, 1, () => {
        l[f] = null;
      }), Ee(), i = l[n], i ? i.p(c, u) : (i = l[n] = o[n](c), i.c()), P(i, 1), i.m(r.parentNode, r));
    },
    i(c) {
      s || (P(i), s = !0);
    },
    o(c) {
      x(i), s = !1;
    },
    d(c) {
      l[n].d(c), c && V(r);
    }
  };
}
function aR(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), b(e, "class", n = bn(t[1].classCloseButton) + " svelte-n7cvum"), b(e, "aria-label", "Close modal"), b(e, "style", t[10]), b(e, "type", "button"), Ce(e, "close", !t[0]);
    },
    m(s, o) {
      U(s, e, o), i || (r = se(e, "click", t[18]), i = !0);
    },
    p(s, o) {
      o[0] & 2 && n !== (n = bn(s[1].classCloseButton) + " svelte-n7cvum") && b(e, "class", n), o[0] & 1024 && b(e, "style", s[10]), o[0] & 3 && Ce(e, "close", !s[0]);
    },
    i: ve,
    o: ve,
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function cR(t) {
  let e, n, i;
  var r = t[1].closeButton;
  function s(o) {
    return { props: { onClose: o[18] } };
  }
  return r && (e = ws(r, s(t))), {
    c() {
      e && me(e.$$.fragment), n = ot();
    },
    m(o, l) {
      e && pe(e, o, l), U(o, n, l), i = !0;
    },
    p(o, l) {
      if (r !== (r = o[1].closeButton)) {
        if (e) {
          Se();
          const a = e;
          x(a.$$.fragment, 1, 0, () => {
            ge(a, 1);
          }), Ee();
        }
        r ? (e = ws(r, s(o)), me(e.$$.fragment), P(e.$$.fragment, 1), pe(e, n.parentNode, n)) : e = null;
      }
    },
    i(o) {
      i || (e && P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      e && x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(n), e && ge(e, o);
    }
  };
}
function uR(t) {
  let e, n, i, r, s = t[2] && hy(t);
  const o = t[48].default, l = Vn(o, t, t[47], null);
  return {
    c() {
      s && s.c(), e = Q(), l && l.c();
    },
    m(a, c) {
      s && s.m(a, c), U(a, e, c), l && l.m(a, c), n = !0, i || (r = se(lR, "keydown", t[19]), i = !0);
    },
    p(a, c) {
      a[2] ? s ? (s.p(a, c), c[0] & 4 && P(s, 1)) : (s = hy(a), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Se(), x(s, 1, 1, () => {
        s = null;
      }), Ee()), l && l.p && (!n || c[1] & 65536) && Hn(
        l,
        o,
        a,
        a[47],
        n ? Un(o, a[47], c, null) : Wn(a[47]),
        null
      );
    },
    i(a) {
      n || (P(s), P(l, a), n = !0);
    },
    o(a) {
      x(s), x(l, a), n = !1;
    },
    d(a) {
      s && s.d(a), a && V(e), l && l.d(a), i = !1, r();
    }
  };
}
function G4(t, e = {}) {
  return function(i) {
    return new t({
      ...i,
      props: { ...e, ...i.props }
    });
  };
}
function fR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const s = Vl(), o = U4, l = (Oe) => Oe.tabIndex >= 0 && !Oe.hidden && !Oe.disabled && Oe.style.display !== "none" && Oe.type !== "hidden" && Boolean(Oe.offsetWidth || Oe.offsetHeight || Oe.getClientRects().length);
  let { isTabbable: a = l } = e, { show: c = null } = e, { key: u = "simple-modal" } = e, { ariaLabel: f = null } = e, { ariaLabelledBy: h = null } = e, { closeButton: d = !0 } = e, { closeOnEsc: p = !0 } = e, { closeOnOuterClick: g = !0 } = e, { styleBg: _ = {} } = e, { styleWindowWrap: m = {} } = e, { styleWindow: C = {} } = e, { styleContent: v = {} } = e, { styleCloseButton: k = {} } = e, { classBg: S = null } = e, { classWindowWrap: O = null } = e, { classWindow: w = null } = e, { classContent: A = null } = e, { classCloseButton: D = null } = e, { unstyled: R = !1 } = e, { setContext: M = o } = e, { transitionBg: H = oR } = e, { transitionBgProps: J = { duration: 250 } } = e, { transitionWindow: I = H } = e, { transitionWindowProps: z = J } = e, { disableFocusTrap: L = !1 } = e;
  const K = {
    ariaLabel: f,
    ariaLabelledBy: h,
    closeButton: d,
    closeOnEsc: p,
    closeOnOuterClick: g,
    styleBg: _,
    styleWindowWrap: m,
    styleWindow: C,
    styleContent: v,
    styleCloseButton: k,
    classBg: S,
    classWindowWrap: O,
    classWindow: w,
    classContent: A,
    classCloseButton: D,
    transitionBg: H,
    transitionBgProps: J,
    transitionWindow: I,
    transitionWindowProps: z,
    disableFocusTrap: L,
    isTabbable: a,
    unstyled: R
  };
  let F = { ...K }, N = null, te, ue, q, re, ie, Z, Le, Ie, Fe, le, De, Ve, ye, fe, Ae;
  const ae = (Oe) => Oe.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(), $ = (Oe) => Oe ? Object.keys(Oe).reduce((si, Jt) => `${si}; ${ae(Jt)}: ${Oe[Jt]}`, "") : "", de = (Oe) => !!(Oe && Oe.constructor && Oe.call && Oe.apply), he = () => {
    n(6, ie = $(Object.assign(
      {},
      {
        width: window.innerWidth,
        height: window.innerHeight
      },
      F.styleBg
    ))), n(7, Z = $(F.styleWindowWrap)), n(8, Le = $(F.styleWindow)), n(9, Ie = $(F.styleContent)), n(10, Fe = $(F.styleCloseButton)), n(11, le = F.transitionBg), n(12, De = F.transitionWindow);
  }, W = () => {
  };
  let y = W, T = W, B = W, X = W;
  const G = (Oe, si = {}, Jt = {}, Kt = {}) => {
    n(2, N = G4(Oe, si)), n(1, F = { ...K, ...Jt }), he(), dt(), n(13, y = (ln) => {
      Kt.onOpen && Kt.onOpen(ln), s("open"), s("opening");
    }), n(14, T = (ln) => {
      Kt.onClose && Kt.onClose(ln), s("close"), s("closing");
    }), n(15, B = (ln) => {
      Kt.onOpened && Kt.onOpened(ln), s("opened");
    }), n(16, X = (ln) => {
      Kt.onClosed && Kt.onClosed(ln), s("closed");
    });
  }, ce = (Oe = {}) => {
    N && (n(14, T = Oe.onClose || T), n(16, X = Oe.onClosed || X), n(2, N = null), je());
  }, Ne = (Oe) => {
    if (F.closeOnEsc && N && Oe.key === "Escape" && (Oe.preventDefault(), ce()), N && Oe.key === "Tab" && !F.disableFocusTrap) {
      const si = q.querySelectorAll("*"), Jt = Array.from(si).filter(F.isTabbable).sort((ln, yn) => ln.tabIndex - yn.tabIndex);
      let Kt = Jt.indexOf(document.activeElement);
      Kt === -1 && Oe.shiftKey && (Kt = 0), Kt += Jt.length + (Oe.shiftKey ? -1 : 1), Kt %= Jt.length, Jt[Kt].focus(), Oe.preventDefault();
    }
  }, qe = (Oe) => {
    F.closeOnOuterClick && (Oe.target === te || Oe.target === ue) && (Ae = Oe.target);
  }, mt = (Oe) => {
    F.closeOnOuterClick && Oe.target === Ae && (Oe.preventDefault(), ce());
  }, dt = () => {
    re = window.scrollY, Ve = document.body.style.position, ye = document.body.style.overflow, fe = document.body.style.width, document.body.style.position = "fixed", document.body.style.top = `-${re}px`, document.body.style.overflow = "hidden", document.body.style.width = "100%";
  }, je = () => {
    document.body.style.position = Ve || "", document.body.style.top = "", document.body.style.overflow = ye || "", document.body.style.width = fe || "", window.scrollTo(0, re);
  };
  M(u, { open: G, close: ce });
  let zt = !1;
  vs(() => {
    zt && ce();
  }), or(() => {
    n(46, zt = !0);
  });
  function Yt(Oe) {
    yt[Oe ? "unshift" : "push"](() => {
      q = Oe, n(5, q);
    });
  }
  function Bn(Oe) {
    yt[Oe ? "unshift" : "push"](() => {
      ue = Oe, n(4, ue);
    });
  }
  function Tt(Oe) {
    yt[Oe ? "unshift" : "push"](() => {
      te = Oe, n(3, te);
    });
  }
  return t.$$set = (Oe) => {
    "isTabbable" in Oe && n(22, a = Oe.isTabbable), "show" in Oe && n(23, c = Oe.show), "key" in Oe && n(24, u = Oe.key), "ariaLabel" in Oe && n(25, f = Oe.ariaLabel), "ariaLabelledBy" in Oe && n(26, h = Oe.ariaLabelledBy), "closeButton" in Oe && n(27, d = Oe.closeButton), "closeOnEsc" in Oe && n(28, p = Oe.closeOnEsc), "closeOnOuterClick" in Oe && n(29, g = Oe.closeOnOuterClick), "styleBg" in Oe && n(30, _ = Oe.styleBg), "styleWindowWrap" in Oe && n(31, m = Oe.styleWindowWrap), "styleWindow" in Oe && n(32, C = Oe.styleWindow), "styleContent" in Oe && n(33, v = Oe.styleContent), "styleCloseButton" in Oe && n(34, k = Oe.styleCloseButton), "classBg" in Oe && n(35, S = Oe.classBg), "classWindowWrap" in Oe && n(36, O = Oe.classWindowWrap), "classWindow" in Oe && n(37, w = Oe.classWindow), "classContent" in Oe && n(38, A = Oe.classContent), "classCloseButton" in Oe && n(39, D = Oe.classCloseButton), "unstyled" in Oe && n(0, R = Oe.unstyled), "setContext" in Oe && n(40, M = Oe.setContext), "transitionBg" in Oe && n(41, H = Oe.transitionBg), "transitionBgProps" in Oe && n(42, J = Oe.transitionBgProps), "transitionWindow" in Oe && n(43, I = Oe.transitionWindow), "transitionWindowProps" in Oe && n(44, z = Oe.transitionWindowProps), "disableFocusTrap" in Oe && n(45, L = Oe.disableFocusTrap), "$$scope" in Oe && n(47, r = Oe.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8388608 | t.$$.dirty[1] & 32768 && zt && (de(c) ? G(c) : ce());
  }, [
    R,
    F,
    N,
    te,
    ue,
    q,
    ie,
    Z,
    Le,
    Ie,
    Fe,
    le,
    De,
    y,
    T,
    B,
    X,
    de,
    ce,
    Ne,
    qe,
    mt,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    D,
    M,
    H,
    J,
    I,
    z,
    L,
    zt,
    r,
    i,
    Yt,
    Bn,
    Tt
  ];
}
class Y4 extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      fR,
      uR,
      xt,
      {
        isTabbable: 22,
        show: 23,
        key: 24,
        ariaLabel: 25,
        ariaLabelledBy: 26,
        closeButton: 27,
        closeOnEsc: 28,
        closeOnOuterClick: 29,
        styleBg: 30,
        styleWindowWrap: 31,
        styleWindow: 32,
        styleContent: 33,
        styleCloseButton: 34,
        classBg: 35,
        classWindowWrap: 36,
        classWindow: 37,
        classContent: 38,
        classCloseButton: 39,
        unstyled: 0,
        setContext: 40,
        transitionBg: 41,
        transitionBgProps: 42,
        transitionWindow: 43,
        transitionWindowProps: 44,
        disableFocusTrap: 45
      },
      null,
      [-1, -1, -1]
    );
  }
}
var vi;
(function(t) {
  t.text = "text", t.tree = "tree", t.table = "table";
})(vi || (vi = {}));
var Gt;
(function(t) {
  t.after = "after", t.inside = "inside", t.key = "key", t.value = "value", t.multi = "multi";
})(Gt || (Gt = {}));
var Ir;
(function(t) {
  t.after = "after", t.key = "key", t.value = "value", t.inside = "inside";
})(Ir || (Ir = {}));
var Do;
(function(t) {
  t.info = "info", t.warning = "warning", t.error = "error";
})(Do || (Do = {}));
var xr;
(function(t) {
  t.key = "key", t.value = "value";
})(xr || (xr = {}));
var gr;
(function(t) {
  t.asc = "asc", t.desc = "desc";
})(gr || (gr = {}));
const Im = 300, X4 = 300, py = 300, hR = 300, gy = 50, dR = 200, pR = 400, gR = 1200, Dm = 1e3, Yc = 100, aa = 100, zh = 2e4, my = 50, by = 50, El = [{ start: 0, end: Yc }], mR = 100 * 1024 * 1024, bR = 1024 * 1024, Nm = 10 * 1024 * 1024, Q4 = 10 * 1024, Al = {
  closeButton: !1,
  classBg: "jse-modal-bg",
  classWindow: "jse-modal-window",
  classWindowWrap: "jse-modal-window-wrap",
  classContent: "jse-modal-content"
}, _R = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-sort"
}, yR = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-transform"
}, _y = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-jsoneditor"
}, E0 = "Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value", A0 = "Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)", Ys = "hover-insert-inside", Xc = "hover-insert-after", Lm = "hover-collection", wg = "valid", yy = "repairable", wR = "invalid", Us = (40 + 2) * 8, Hs = 260, bl = {
  NO: "NO",
  SELF: "SELF",
  NEXT_INSIDE: "NEXT_INSIDE"
}, vR = {
  [gr.asc]: "ascending",
  [gr.desc]: "descending"
};
let wy = 0;
function Nc() {
  return wy++, wy;
}
function No(t) {
  return No = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, No(t);
}
function qt(t) {
  return Array.isArray(t);
}
function En(t) {
  return t !== null && No(t) === "object" && t.constructor === Object;
}
function Z4(t) {
  return t && No(t) === "object" ? t.op === "add" : !1;
}
function $4(t) {
  return t && No(t) === "object" ? t.op === "remove" : !1;
}
function M0(t) {
  return t && No(t) === "object" ? t.op === "replace" : !1;
}
function jm(t) {
  return t && No(t) === "object" ? t.op === "copy" : !1;
}
function Ma(t) {
  return t && No(t) === "object" ? t.op === "move" : !1;
}
function Bm(t) {
  return Bm = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Bm(t);
}
function kR(t, e) {
  return JSON.stringify(t) === JSON.stringify(e);
}
function CR(t, e) {
  return t === e;
}
function e5(t) {
  return t.slice(0, t.length - 1);
}
function SR(t) {
  return t[t.length - 1];
}
function ER(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : CR;
  if (t.length < e.length)
    return !1;
  for (var i = 0; i < e.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function t5(t) {
  return Bm(t) === "object" && t !== null;
}
function vy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(t);
    e && (i = i.filter(function(r) {
      return Object.getOwnPropertyDescriptor(t, r).enumerable;
    })), n.push.apply(n, i);
  }
  return n;
}
function AR(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? vy(Object(n), !0).forEach(function(i) {
      MR(t, i, n[i]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : vy(Object(n)).forEach(function(i) {
      Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(n, i));
    });
  }
  return t;
}
function MR(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
function O0(t) {
  if (qt(t)) {
    var e = t.slice();
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      e[i] = t[i];
    }), e;
  } else if (En(t)) {
    var n = AR({}, t);
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      n[i] = t[i];
    }), n;
  } else
    return t;
}
function T0(t, e, n) {
  if (t[e] === n)
    return t;
  var i = O0(t);
  return i[e] = n, i;
}
function Ze(t, e) {
  for (var n = t, i = 0; i < e.length; )
    En(n) ? n = n[e[i]] : qt(n) ? n = n[parseInt(e[i])] : n = void 0, i++;
  return n;
}
function Tr(t, e, n) {
  var i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
  if (e.length === 0)
    return n;
  var r = e[0], s = Tr(t ? t[r] : void 0, e.slice(1), n, i);
  if (En(t) || qt(t))
    return T0(t, r, s);
  if (i) {
    var o = OR.test(r) ? [] : {};
    return o[r] = s, o;
  } else
    throw new Error("Path does not exist");
}
var OR = /^\d+$/;
function n5(t, e, n) {
  if (e.length === 0)
    return n(t);
  if (!t5(t))
    throw new Error("Path doesn't exist");
  var i = e[0], r = n5(t[i], e.slice(1), n);
  return T0(t, i, r);
}
function R0(t, e) {
  if (e.length === 0)
    return t;
  if (!t5(t))
    throw new Error("Path does not exist");
  if (e.length === 1) {
    var n = e[0];
    if (n in t) {
      var i = O0(t);
      return qt(i) && i.splice(parseInt(n), 1), En(i) && delete i[n], i;
    } else
      return t;
  }
  var r = e[0], s = R0(t[r], e.slice(1));
  return T0(t, r, s);
}
function P0(t, e, n) {
  var i = e.slice(0, e.length - 1), r = e[e.length - 1];
  return n5(t, i, function(s) {
    if (!Array.isArray(s))
      throw new TypeError("Array expected at path " + JSON.stringify(i));
    var o = O0(s);
    return o.splice(parseInt(r), 0, n), o;
  });
}
function mr(t, e) {
  return t === void 0 ? !1 : e.length === 0 ? !0 : t === null ? !1 : mr(t[e[0]], e.slice(1));
}
function zr(t) {
  var e = t.split("/");
  return e.shift(), e.map(function(n) {
    return n.replace(/~1/g, "/").replace(/~0/g, "~");
  });
}
function Be(t) {
  return t.map(i5).join("");
}
function i5(t) {
  return "/" + String(t).replace(/~/g, "~0").replace(/\//g, "~1");
}
function xm(t, e) {
  return t + i5(e);
}
function Oa(t, e) {
  return t.startsWith(e) && (t.length === e.length || t[e.length] === "/");
}
function Fr(t, e, n) {
  for (var i = t, r = 0; r < e.length; r++) {
    jR(e[r]);
    var s = e[r];
    if (n && n.before) {
      var o = n.before(i, s);
      if (o !== void 0) {
        if (o.document !== void 0 && (i = o.document), o.json !== void 0)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
        o.operation !== void 0 && (s = o.operation);
      }
    }
    var l = i, a = as(i, s.path);
    if (s.op === "add")
      i = PR(i, a, s.value);
    else if (s.op === "remove")
      i = RR(i, a);
    else if (s.op === "replace")
      i = TR(i, a, s.value);
    else if (s.op === "copy")
      i = IR(i, a, Fm(s.from));
    else if (s.op === "move")
      i = DR(i, a, Fm(s.from));
    else if (s.op === "test")
      NR(i, a, s.value);
    else
      throw new Error("Unknown JSONPatch operation " + JSON.stringify(s));
    if (n && n.after) {
      var c = n.after(i, s, l);
      c !== void 0 && (i = c);
    }
  }
  return i;
}
function TR(t, e, n) {
  return Tr(t, e, n);
}
function RR(t, e) {
  return R0(t, e);
}
function PR(t, e, n) {
  return xu(t, e) ? P0(t, e, n) : Tr(t, e, n);
}
function IR(t, e, n) {
  var i = Ze(t, n);
  if (xu(t, e))
    return P0(t, e, i);
  var r = Ze(t, n);
  return Tr(t, e, r);
}
function DR(t, e, n) {
  var i = Ze(t, n), r = R0(t, n);
  return xu(r, e) ? P0(r, e, i) : Tr(r, e, i);
}
function NR(t, e, n) {
  if (n === void 0)
    throw new Error('Test failed: no value provided (path: "'.concat(Be(e), '")'));
  if (!mr(t, e))
    throw new Error('Test failed: path not found (path: "'.concat(Be(e), '")'));
  var i = Ze(t, e);
  if (!kR(i, n))
    throw new Error('Test failed, value differs (path: "'.concat(Be(e), '")'));
}
function xu(t, e) {
  if (e.length === 0)
    return !1;
  var n = Ze(t, e5(e));
  return Array.isArray(n);
}
function LR(t, e) {
  if (SR(e) !== "-")
    return e;
  var n = e5(e), i = Ze(t, n);
  return n.concat(i.length);
}
function jR(t) {
  var e = ["add", "remove", "replace", "copy", "move", "test"];
  if (!e.includes(t.op))
    throw new Error("Unknown JSONPatch op " + JSON.stringify(t.op));
  if (typeof t.path != "string")
    throw new Error('Required property "path" missing or not a string in operation ' + JSON.stringify(t));
  if ((t.op === "copy" || t.op === "move") && typeof t.from != "string")
    throw new Error('Required property "from" missing or not a string in operation ' + JSON.stringify(t));
}
function as(t, e) {
  return LR(t, zr(e));
}
function Fm(t) {
  return zr(t);
}
function BR(t) {
  return VR(t) || zR(t) || FR(t) || xR();
}
function xR() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function FR(t, e) {
  if (t) {
    if (typeof t == "string")
      return zm(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    if (n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set")
      return Array.from(t);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
      return zm(t, e);
  }
}
function zR(t) {
  if (typeof Symbol < "u" && t[Symbol.iterator] != null || t["@@iterator"] != null)
    return Array.from(t);
}
function VR(t) {
  if (Array.isArray(t))
    return zm(t);
}
function zm(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, i = new Array(e); n < e; n++)
    i[n] = t[n];
  return i;
}
function r5(t, e, n) {
  var i = [];
  return Fr(t, e, {
    before: function(s, o) {
      var l, a = as(s, o.path);
      if (o.op === "add")
        l = l5(s, a);
      else if (o.op === "remove")
        l = o5(s, a);
      else if (o.op === "replace")
        l = s5(s, a);
      else if (o.op === "copy")
        l = UR(s, a);
      else if (o.op === "move")
        l = HR(s, a, Fm(o.from));
      else if (o.op === "test")
        l = [];
      else
        throw new Error("Unknown JSONPatch operation " + JSON.stringify(o));
      var c;
      if (n && n.before) {
        var u = n.before(s, o, l);
        if (u && u.revertOperations && (l = u.revertOperations), u && u.document && (c = u.document), u && u.json)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
      }
      if (i = l.concat(i), c !== void 0)
        return {
          document: c
        };
    }
  }), i;
}
function s5(t, e) {
  return [{
    op: "replace",
    path: Be(e),
    value: Ze(t, e)
  }];
}
function o5(t, e) {
  return [{
    op: "add",
    path: Be(e),
    value: Ze(t, e)
  }];
}
function l5(t, e) {
  return xu(t, e) || !mr(t, e) ? [{
    op: "remove",
    path: Be(e)
  }] : s5(t, e);
}
function UR(t, e) {
  return l5(t, e);
}
function HR(t, e, n) {
  if (e.length < n.length && ER(n, e))
    return [{
      op: "replace",
      path: Be(e),
      value: t
    }];
  var i = {
    op: "move",
    from: Be(e),
    path: Be(n)
  };
  return !xu(t, e) && mr(t, e) ? [i].concat(BR(o5(t, e))) : [i];
}
var Yr = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, sp = {}, ky = {
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	",
  '"': '"',
  "/": "/",
  "\\": "\\"
}, WR = "a".charCodeAt();
sp.parse = function(t, e, n) {
  var i = {}, r = 0, s = 0, o = 0, l = n && n.bigint && typeof BigInt < "u";
  return {
    data: a("", !0),
    pointers: i
  };
  function a(D, R) {
    c();
    var M;
    v(D, "value");
    var H = g();
    switch (H) {
      case "t":
        p("rue"), M = !0;
        break;
      case "f":
        p("alse"), M = !1;
        break;
      case "n":
        p("ull"), M = null;
        break;
      case '"':
        M = u();
        break;
      case "[":
        M = h(D);
        break;
      case "{":
        M = d(D);
        break;
      default:
        _(), "-0123456789".indexOf(H) >= 0 ? M = f() : O();
    }
    return v(D, "valueEnd"), c(), R && o < t.length && O(), M;
  }
  function c() {
    e:
      for (; o < t.length; ) {
        switch (t[o]) {
          case " ":
            s++;
            break;
          case "	":
            s += 4;
            break;
          case "\r":
            s = 0;
            break;
          case `
`:
            s = 0, r++;
            break;
          default:
            break e;
        }
        o++;
      }
  }
  function u() {
    for (var D = "", R; R = g(), R != '"'; )
      R == "\\" ? (R = g(), R in ky ? D += ky[R] : R == "u" ? D += m() : w()) : D += R;
    return D;
  }
  function f() {
    var D = "", R = !0;
    t[o] == "-" && (D += g()), D += t[o] == "0" ? g() : C(), t[o] == "." && (D += g() + C(), R = !1), (t[o] == "e" || t[o] == "E") && (D += g(), (t[o] == "+" || t[o] == "-") && (D += g()), D += C(), R = !1);
    var M = +D;
    return l && R && (M > Number.MAX_SAFE_INTEGER || M < Number.MIN_SAFE_INTEGER) ? BigInt(D) : M;
  }
  function h(D) {
    c();
    var R = [], M = 0;
    if (g() == "]")
      return R;
    for (_(); ; ) {
      var H = D + "/" + M;
      R.push(a(H)), c();
      var J = g();
      if (J == "]")
        break;
      J != "," && w(), c(), M++;
    }
    return R;
  }
  function d(D) {
    c();
    var R = {};
    if (g() == "}")
      return R;
    for (_(); ; ) {
      var M = S();
      g() != '"' && w();
      var H = u(), J = D + "/" + Vm(H);
      k(J, "key", M), v(J, "keyEnd"), c(), g() != ":" && w(), c(), R[H] = a(J), c();
      var I = g();
      if (I == "}")
        break;
      I != "," && w(), c();
    }
    return R;
  }
  function p(D) {
    for (var R = 0; R < D.length; R++)
      g() !== D[R] && w();
  }
  function g() {
    A();
    var D = t[o];
    return o++, s++, D;
  }
  function _() {
    o--, s--;
  }
  function m() {
    for (var D = 4, R = 0; D--; ) {
      R <<= 4;
      var M = g().toLowerCase();
      M >= "a" && M <= "f" ? R += M.charCodeAt() - WR + 10 : M >= "0" && M <= "9" ? R += +M : w();
    }
    return String.fromCharCode(R);
  }
  function C() {
    for (var D = ""; t[o] >= "0" && t[o] <= "9"; )
      D += g();
    if (D.length)
      return D;
    A(), O();
  }
  function v(D, R) {
    k(D, R, S());
  }
  function k(D, R, M) {
    i[D] = i[D] || {}, i[D][R] = M;
  }
  function S() {
    return {
      line: r,
      column: s,
      pos: o
    };
  }
  function O() {
    throw new SyntaxError("Unexpected token " + t[o] + " in JSON at position " + o);
  }
  function w() {
    _(), O();
  }
  function A() {
    if (o >= t.length)
      throw new SyntaxError("Unexpected end of JSON input");
  }
};
sp.stringify = function(t, e, n) {
  if (!pf(t))
    return;
  var i = 0, r, s, o = typeof n == "object" ? n.space : n;
  switch (typeof o) {
    case "number":
      var l = o > 10 ? 10 : o < 0 ? 0 : Math.floor(o);
      o = l && k(l, " "), r = l, s = l;
      break;
    case "string":
      o = o.slice(0, 10), r = 0, s = 0;
      for (var a = 0; a < o.length; a++) {
        var c = o[a];
        switch (c) {
          case " ":
            s++;
            break;
          case "	":
            s += 4;
            break;
          case "\r":
            s = 0;
            break;
          case `
`:
            s = 0, i++;
            break;
          default:
            throw new Error("whitespace characters not allowed in JSON");
        }
        r++;
      }
      break;
    default:
      o = void 0;
  }
  var u = "", f = {}, h = 0, d = 0, p = 0, g = n && n.es6 && typeof Map == "function";
  return _(t, 0, ""), {
    json: u,
    pointers: f
  };
  function _(S, O, w) {
    switch (v(w, "value"), typeof S) {
      case "number":
      case "bigint":
      case "boolean":
        m("" + S);
        break;
      case "string":
        m(gf(S));
        break;
      case "object":
        S === null ? m("null") : typeof S.toJSON == "function" ? m(gf(S.toJSON())) : Array.isArray(S) ? A() : g ? S.constructor.BYTES_PER_ELEMENT ? A() : S instanceof Map ? R() : S instanceof Set ? R(!0) : D() : D();
    }
    v(w, "valueEnd");
    function A() {
      if (S.length) {
        m("[");
        for (var M = O + 1, H = 0; H < S.length; H++) {
          H && m(","), C(M);
          var J = pf(S[H]) ? S[H] : null, I = w + "/" + H;
          _(J, M, I);
        }
        C(O), m("]");
      } else
        m("[]");
    }
    function D() {
      var M = Object.keys(S);
      if (M.length) {
        m("{");
        for (var H = O + 1, J = 0; J < M.length; J++) {
          var I = M[J], z = S[I];
          if (pf(z)) {
            J && m(",");
            var L = w + "/" + Vm(I);
            C(H), v(L, "key"), m(gf(I)), v(L, "keyEnd"), m(":"), o && m(" "), _(z, H, L);
          }
        }
        C(O), m("}");
      } else
        m("{}");
    }
    function R(M) {
      if (S.size) {
        m("{");
        for (var H = O + 1, J = !0, I = S.entries(), z = I.next(); !z.done; ) {
          var L = z.value, K = L[0], F = M ? !0 : L[1];
          if (pf(F)) {
            J || m(","), J = !1;
            var N = w + "/" + Vm(K);
            C(H), v(N, "key"), m(gf(K)), v(N, "keyEnd"), m(":"), o && m(" "), _(F, H, N);
          }
          z = I.next();
        }
        C(O), m("}");
      } else
        m("{}");
    }
  }
  function m(S) {
    d += S.length, p += S.length, u += S;
  }
  function C(S) {
    if (o) {
      for (u += `
` + k(S, o), h++, d = 0; S--; )
        i ? (h += i, d = s) : d += s, p += r;
      p += 1;
    }
  }
  function v(S, O) {
    f[S] = f[S] || {}, f[S][O] = {
      line: h,
      column: d,
      pos: p
    };
  }
  function k(S, O) {
    return Array(S + 1).join(O);
  }
};
var qR = ["number", "bigint", "boolean", "string", "object"];
function pf(t) {
  return qR.indexOf(typeof t) >= 0;
}
var JR = /"|\\/g, KR = /[\b]/g, GR = /\f/g, YR = /\n/g, XR = /\r/g, QR = /\t/g;
function gf(t) {
  return t = t.replace(JR, "\\$&").replace(GR, "\\f").replace(KR, "\\b").replace(YR, "\\n").replace(XR, "\\r").replace(QR, "\\t"), '"' + t + '"';
}
var ZR = /~/g, $R = /\//g;
function Vm(t) {
  return t.replace(ZR, "~0").replace($R, "~1");
}
function Um(t) {
  return Um = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Um(t);
}
function Cy(t, e) {
  for (var n = 0; n < e.length; n++) {
    var i = e[n];
    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
  }
}
function eP(t, e, n) {
  return e && Cy(t.prototype, e), n && Cy(t, n), Object.defineProperty(t, "prototype", { writable: !1 }), t;
}
function tP(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function nP(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Qc(t, e);
}
function iP(t) {
  var e = a5();
  return function() {
    var i = Zc(t), r;
    if (e) {
      var s = Zc(this).constructor;
      r = Reflect.construct(i, arguments, s);
    } else
      r = i.apply(this, arguments);
    return rP(this, r);
  };
}
function rP(t, e) {
  if (e && (Um(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return sP(t);
}
function sP(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
function Hm(t) {
  var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return Hm = function(i) {
    if (i === null || !oP(i))
      return i;
    if (typeof i != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof e < "u") {
      if (e.has(i))
        return e.get(i);
      e.set(i, r);
    }
    function r() {
      return fh(i, arguments, Zc(this).constructor);
    }
    return r.prototype = Object.create(i.prototype, { constructor: { value: r, enumerable: !1, writable: !0, configurable: !0 } }), Qc(r, i);
  }, Hm(t);
}
function fh(t, e, n) {
  return a5() ? fh = Reflect.construct.bind() : fh = function(r, s, o) {
    var l = [null];
    l.push.apply(l, s);
    var a = Function.bind.apply(r, l), c = new a();
    return o && Qc(c, o.prototype), c;
  }, fh.apply(null, arguments);
}
function a5() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function oP(t) {
  return Function.toString.call(t).indexOf("[native code]") !== -1;
}
function Qc(t, e) {
  return Qc = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(i, r) {
    return i.__proto__ = r, i;
  }, Qc(t, e);
}
function Zc(t) {
  return Zc = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(n) {
    return n.__proto__ || Object.getPrototypeOf(n);
  }, Zc(t);
}
var fo = /* @__PURE__ */ function(t) {
  nP(n, t);
  var e = iP(n);
  function n(i, r) {
    var s;
    return tP(this, n), s = e.call(this, i + " at position " + r), s.position = r, s;
  }
  return eP(n);
}(/* @__PURE__ */ Hm(Error)), mf = 92, vg = 47, lP = 42, Sy = 123, kg = 125, Ey = 91, Cg = 93, aP = 40, cP = 41, uP = 32, I0 = 10, c5 = 9, u5 = 13, fP = 8, hP = 12, hh = 34, Ay = 43, My = 45, dP = 39, D0 = 48, pP = 49, N0 = 57, bf = 44, gP = 46, mP = 58, bP = 59, _P = 65, yP = 97, wP = 69, vP = 101, kP = 70, CP = 102, SP = 160, EP = 8192, AP = 8202, MP = 8239, OP = 8287, TP = 12288, RP = 8220, PP = 8221, IP = 8216, DP = 8217, NP = 96, LP = 180;
function _f(t) {
  return t >= D0 && t < N0 || t >= _P && t <= kP || t >= yP && t <= CP;
}
function yf(t) {
  return t >= D0 && t <= N0;
}
function jP(t) {
  return t >= pP && t <= N0;
}
function BP(t) {
  return t >= 32 && t <= 1114111;
}
function xP(t) {
  return FP.test(t) || t && Uh(t.charCodeAt(0));
}
var FP = /^[,:[\]{}()\n]$/;
function Oy(t) {
  return zP.test(t) || t && Uh(t.charCodeAt(0));
}
var zP = /^[[{\w-]$/;
function VP(t) {
  return t === I0 || t === u5 || t === c5 || t === fP || t === hP;
}
function Vh(t) {
  return t === uP || t === I0 || t === c5 || t === u5;
}
function UP(t) {
  return t === SP || t >= EP && t <= AP || t === MP || t === OP || t === TP;
}
function Uh(t) {
  return f5(t) || Wm(t);
}
function f5(t) {
  return t === hh || t === RP || t === PP;
}
function Wm(t) {
  return t === dP || t === IP || t === DP || t === NP || t === LP;
}
function pc(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, i = t.lastIndexOf(e);
  return i !== -1 ? t.substring(0, i) + (n ? "" : t.substring(i + 1)) : t;
}
function sl(t, e) {
  var n = t.length;
  if (!Vh(t.charCodeAt(n - 1)))
    return t + e;
  for (; Vh(t.charCodeAt(n - 1)); )
    n--;
  return t.substring(0, n) + e + t.substring(n);
}
function HP(t, e, n) {
  return t.substring(0, e) + t.substring(e + n);
}
function WP(t) {
  return /[,\n][ \t\r]*$/.test(t);
}
var qP = {
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, JP = {
  '"': '"',
  "\\": "\\",
  "/": "/",
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	"
};
function cs(t) {
  var e = 0, n = "", i = s();
  i || A();
  var r = c(bf);
  if (r && o(), Oy(t[e]) && WP(n) ? (r || (n = sl(n, ",")), p()) : r && (n = pc(n, ",")), e >= t.length)
    return n;
  w();
  function s() {
    o();
    var I = h() || d() || g() || m() || C() || k();
    return o(), I;
  }
  function o() {
    var I = e, z = l();
    do
      z = a(), z && (z = l());
    while (z);
    return e > I;
  }
  function l() {
    for (var I = "", z; (z = Vh(t.charCodeAt(e))) || UP(t.charCodeAt(e)); )
      z ? I += t[e] : I += " ", e++;
    return I.length > 0 ? (n += I, !0) : !1;
  }
  function a() {
    if (t.charCodeAt(e) === vg && t.charCodeAt(e + 1) === lP) {
      for (; e < t.length && !KP(t, e); )
        e++;
      return e += 2, !0;
    }
    if (t.charCodeAt(e) === vg && t.charCodeAt(e + 1) === vg) {
      for (; e < t.length && t.charCodeAt(e) !== I0; )
        e++;
      return !0;
    }
    return !1;
  }
  function c(I) {
    return t.charCodeAt(e) === I ? (n += t[e], e++, !0) : !1;
  }
  function u(I) {
    return t.charCodeAt(e) === I ? (e++, !0) : !1;
  }
  function f() {
    return u(mf);
  }
  function h() {
    if (t.charCodeAt(e) === Sy) {
      n += "{", e++, o();
      for (var I = !0; e < t.length && t.charCodeAt(e) !== kg; ) {
        var z = void 0;
        I ? (z = !0, I = !1) : (z = c(bf), z || (n = sl(n, ",")), o());
        var L = g() || k();
        if (!L) {
          t.charCodeAt(e) === kg || t.charCodeAt(e) === Sy || t.charCodeAt(e) === Cg || t.charCodeAt(e) === Ey || t[e] === void 0 ? n = pc(n, ",") : D();
          break;
        }
        o();
        var K = c(mP);
        K || (Oy(t[e]) ? n = sl(n, ":") : M());
        var F = s();
        F || (K ? R() : M());
      }
      return t.charCodeAt(e) === kg ? (n += "}", e++) : n = sl(n, "}"), !0;
    }
    return !1;
  }
  function d() {
    if (t.charCodeAt(e) === Ey) {
      n += "[", e++, o();
      for (var I = !0; e < t.length && t.charCodeAt(e) !== Cg; ) {
        if (I)
          I = !1;
        else {
          var z = c(bf);
          z || (n = sl(n, ","));
        }
        var L = s();
        if (!L) {
          n = pc(n, ",");
          break;
        }
      }
      return t.charCodeAt(e) === Cg ? (n += "]", e++) : n = sl(n, "]"), !0;
    }
    return !1;
  }
  function p() {
    for (var I = !0, z = !0; z; ) {
      if (I)
        I = !1;
      else {
        var L = c(bf);
        L || (n = sl(n, ","));
      }
      z = s();
    }
    z || (n = pc(n, ",")), n = `[
`.concat(n, `
]`);
  }
  function g() {
    var I = t.charCodeAt(e) === mf;
    if (I && (e++, I = !0), Uh(t.charCodeAt(e))) {
      var z = Wm(t.charCodeAt(e)) ? Wm : f5;
      for (t.charCodeAt(e), n += '"', e++; e < t.length && !z(t.charCodeAt(e)); ) {
        if (t.charCodeAt(e) === mf) {
          var L = t[e + 1], K = JP[L];
          K !== void 0 ? (n += t.slice(e, e + 2), e += 2) : L === "u" ? _f(t.charCodeAt(e + 2)) && _f(t.charCodeAt(e + 3)) && _f(t.charCodeAt(e + 4)) && _f(t.charCodeAt(e + 5)) ? (n += t.slice(e, e + 6), e += 6) : H(e) : (n += L, e += 2);
        } else {
          var F = t[e], N = t.charCodeAt(e);
          N === hh && t.charCodeAt(e - 1) !== mf ? (n += "\\" + F, e++) : VP(N) ? (n += qP[F], e++) : (BP(N) || O(F), n += F, e++);
        }
        I && f();
      }
      return Uh(t.charCodeAt(e)) ? (t.charCodeAt(e), n += '"', e++) : n += '"', _(), !0;
    }
    return !1;
  }
  function _() {
    var I = !1;
    for (o(); t.charCodeAt(e) === Ay; ) {
      I = !0, e++, o(), n = pc(n, '"', !0);
      var z = n.length;
      g(), n = HP(n, z, 1);
    }
    return I;
  }
  function m() {
    var I = e;
    if (t.charCodeAt(e) === My && (e++, S(I)), t.charCodeAt(e) === D0)
      e++;
    else if (jP(t.charCodeAt(e)))
      for (e++; yf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === gP)
      for (e++, S(I); yf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === vP || t.charCodeAt(e) === wP)
      for (e++, (t.charCodeAt(e) === My || t.charCodeAt(e) === Ay) && e++, S(I); yf(t.charCodeAt(e)); )
        e++;
    return e > I ? (n += t.slice(I, e), !0) : !1;
  }
  function C() {
    return v("true", "true") || v("false", "false") || v("null", "null") || v("True", "true") || v("False", "false") || v("None", "null");
  }
  function v(I, z) {
    return t.slice(e, e + I.length) === I ? (n += z, e += I.length, !0) : !1;
  }
  function k() {
    for (var I = e; e < t.length && !xP(t[e]); )
      e++;
    if (e > I) {
      if (t.charCodeAt(e) === aP)
        return e++, s(), t.charCodeAt(e) === cP && (e++, t.charCodeAt(e) === bP && e++), !0;
      for (; Vh(t.charCodeAt(e - 1)) && e > 0; )
        e--;
      var z = t.slice(I, e);
      return n += JSON.stringify(z), !0;
    }
  }
  function S(I) {
    if (!yf(t.charCodeAt(e))) {
      var z = t.slice(I, e);
      throw new fo("Invalid number '".concat(z, "', expecting a digit ").concat(J()), 2);
    }
  }
  function O(I) {
    throw new fo("Invalid character " + JSON.stringify(I), e);
  }
  function w() {
    throw new fo("Unexpected character " + JSON.stringify(t[e]), e);
  }
  function A() {
    throw new fo("Unexpected end of json string", t.length);
  }
  function D() {
    throw new fo("Object key expected", e);
  }
  function R() {
    throw new fo("Object value expected", e);
  }
  function M() {
    throw new fo("Colon expected", e);
  }
  function H(I) {
    for (var z = I + 2; /\w/.test(t[z]); )
      z++;
    var L = t.slice(I, z);
    throw new fo('Invalid unicode character "'.concat(L, '"'), e);
  }
  function J() {
    return t[e] ? "but got '".concat(t[e], "'") : "but reached end of input";
  }
}
function KP(t, e) {
  return t[e] === "*" && t[e + 1] === "/";
}
function Jn(t) {
  return parseInt(t, 10);
}
function L0(t) {
  return GP.test(t);
}
const GP = /^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;
function Cn(t) {
  return typeof t == "object" && t !== null && t.constructor === Object;
}
function dn(t) {
  return typeof t == "object" && t !== null && (t.constructor === Object || t.constructor === Array);
}
function YP(t) {
  return t === !0 || t === !1;
}
function qm(t) {
  if (typeof t == "number")
    return t > 9466848e5 && isFinite(t) && Math.floor(t) === t && !isNaN(new Date(t).valueOf());
  if (typeof t == "bigint")
    return qm(Number(t));
  try {
    const n = t.valueOf();
    if (n !== t)
      return qm(n);
  } catch {
    return !1;
  }
}
function h5(t) {
  const e = window.document.createElement("div");
  return e.style.color = t, e.style.color.split(/\s+/).join("").toLowerCase() || null;
}
function XP(t) {
  return typeof t == "string" && !!h5(t);
}
function j0(t, e) {
  if (typeof t == "number" || typeof t == "string" || typeof t == "boolean" || typeof t > "u")
    return typeof t;
  if (typeof t == "bigint")
    return "number";
  if (t === null)
    return "null";
  if (Array.isArray(t))
    return "array";
  if (Cn(t))
    return "object";
  const n = e.stringify(t);
  return n && L0(n) ? "number" : n === "true" || n === "false" ? "boolean" : n === "null" ? "null" : "unknown";
}
const QP = /^https?:\/\/\S+$/;
function op(t) {
  return typeof t == "string" && QP.test(t);
}
function tc(t, e) {
  if (t === "")
    return "";
  const n = t.trim();
  return n === "null" ? null : n === "true" ? !0 : n === "false" ? !1 : L0(n) ? e.parse(n) : t;
}
function ZP(t, e) {
  return typeof t == "string" && typeof tc(t, e) != "string";
}
function $P(t) {
  return e7.test(t);
}
const e7 = /^-?[0-9]+$/;
var t7 = typeof global == "object" && global && global.Object === Object && global;
const d5 = t7;
var n7 = typeof self == "object" && self && self.Object === Object && self, i7 = d5 || n7 || Function("return this")();
const Hr = i7;
var r7 = Hr.Symbol;
const yr = r7;
var p5 = Object.prototype, s7 = p5.hasOwnProperty, o7 = p5.toString, gc = yr ? yr.toStringTag : void 0;
function l7(t) {
  var e = s7.call(t, gc), n = t[gc];
  try {
    t[gc] = void 0;
    var i = !0;
  } catch {
  }
  var r = o7.call(t);
  return i && (e ? t[gc] = n : delete t[gc]), r;
}
var a7 = Object.prototype, c7 = a7.toString;
function u7(t) {
  return c7.call(t);
}
var f7 = "[object Null]", h7 = "[object Undefined]", Ty = yr ? yr.toStringTag : void 0;
function nc(t) {
  return t == null ? t === void 0 ? h7 : f7 : Ty && Ty in Object(t) ? l7(t) : u7(t);
}
function Lo(t) {
  return t != null && typeof t == "object";
}
var d7 = "[object Symbol]";
function Ml(t) {
  return typeof t == "symbol" || Lo(t) && nc(t) == d7;
}
function Lc(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = Array(i); ++n < i; )
    r[n] = e(t[n], n, t);
  return r;
}
var p7 = Array.isArray;
const Ri = p7;
var g7 = 1 / 0, Ry = yr ? yr.prototype : void 0, Py = Ry ? Ry.toString : void 0;
function g5(t) {
  if (typeof t == "string")
    return t;
  if (Ri(t))
    return Lc(t, g5) + "";
  if (Ml(t))
    return Py ? Py.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -g7 ? "-0" : e;
}
var m7 = /\s/;
function b7(t) {
  for (var e = t.length; e-- && m7.test(t.charAt(e)); )
    ;
  return e;
}
var _7 = /^\s+/;
function y7(t) {
  return t && t.slice(0, b7(t) + 1).replace(_7, "");
}
function Vr(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var Iy = 0 / 0, w7 = /^[-+]0x[0-9a-f]+$/i, v7 = /^0b[01]+$/i, k7 = /^0o[0-7]+$/i, C7 = parseInt;
function Jm(t) {
  if (typeof t == "number")
    return t;
  if (Ml(t))
    return Iy;
  if (Vr(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = Vr(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = y7(t);
  var n = v7.test(t);
  return n || k7.test(t) ? C7(t.slice(2), n ? 2 : 8) : w7.test(t) ? Iy : +t;
}
var Dy = 1 / 0, S7 = 17976931348623157e292;
function dh(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = Jm(t), t === Dy || t === -Dy) {
    var e = t < 0 ? -1 : 1;
    return e * S7;
  }
  return t === t ? t : 0;
}
function E7(t) {
  var e = dh(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
function Fu(t) {
  return t;
}
var A7 = "[object AsyncFunction]", M7 = "[object Function]", O7 = "[object GeneratorFunction]", T7 = "[object Proxy]";
function m5(t) {
  if (!Vr(t))
    return !1;
  var e = nc(t);
  return e == M7 || e == O7 || e == A7 || e == T7;
}
var R7 = Hr["__core-js_shared__"];
const Sg = R7;
var Ny = function() {
  var t = /[^.]+$/.exec(Sg && Sg.keys && Sg.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function P7(t) {
  return !!Ny && Ny in t;
}
var I7 = Function.prototype, D7 = I7.toString;
function Hl(t) {
  if (t != null) {
    try {
      return D7.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var N7 = /[\\^$.*+?()[\]{}|]/g, L7 = /^\[object .+?Constructor\]$/, j7 = Function.prototype, B7 = Object.prototype, x7 = j7.toString, F7 = B7.hasOwnProperty, z7 = RegExp(
  "^" + x7.call(F7).replace(N7, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function V7(t) {
  if (!Vr(t) || P7(t))
    return !1;
  var e = m5(t) ? z7 : L7;
  return e.test(Hl(t));
}
function U7(t, e) {
  return t == null ? void 0 : t[e];
}
function Wl(t, e) {
  var n = U7(t, e);
  return V7(n) ? n : void 0;
}
var H7 = Wl(Hr, "WeakMap");
const Km = H7;
var Ly = Object.create, W7 = function() {
  function t() {
  }
  return function(e) {
    if (!Vr(e))
      return {};
    if (Ly)
      return Ly(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
const q7 = W7;
function J7(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
function hn() {
}
function K7(t, e) {
  var n = -1, i = t.length;
  for (e || (e = Array(i)); ++n < i; )
    e[n] = t[n];
  return e;
}
var G7 = 800, Y7 = 16, X7 = Date.now;
function Q7(t) {
  var e = 0, n = 0;
  return function() {
    var i = X7(), r = Y7 - (i - n);
    if (n = i, r > 0) {
      if (++e >= G7)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function Z7(t) {
  return function() {
    return t;
  };
}
var $7 = function() {
  try {
    var t = Wl(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
const Hh = $7;
var eI = Hh ? function(t, e) {
  return Hh(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: Z7(e),
    writable: !0
  });
} : Fu;
const tI = eI;
var nI = Q7(tI);
const iI = nI;
function rI(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var sI = 9007199254740991, oI = /^(?:0|[1-9]\d*)$/;
function B0(t, e) {
  var n = typeof t;
  return e = e ?? sI, !!e && (n == "number" || n != "symbol" && oI.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function lp(t, e, n) {
  e == "__proto__" && Hh ? Hh(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function ap(t, e) {
  return t === e || t !== t && e !== e;
}
var lI = Object.prototype, aI = lI.hasOwnProperty;
function b5(t, e, n) {
  var i = t[e];
  (!(aI.call(t, e) && ap(i, n)) || n === void 0 && !(e in t)) && lp(t, e, n);
}
function cp(t, e, n, i) {
  var r = !n;
  n || (n = {});
  for (var s = -1, o = e.length; ++s < o; ) {
    var l = e[s], a = i ? i(n[l], t[l], l, n, t) : void 0;
    a === void 0 && (a = t[l]), r ? lp(n, l, a) : b5(n, l, a);
  }
  return n;
}
var jy = Math.max;
function cI(t, e, n) {
  return e = jy(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var i = arguments, r = -1, s = jy(i.length - e, 0), o = Array(s); ++r < s; )
      o[r] = i[e + r];
    r = -1;
    for (var l = Array(e + 1); ++r < e; )
      l[r] = i[r];
    return l[e] = n(o), J7(t, this, l);
  };
}
function uI(t, e) {
  return iI(cI(t, e, Fu), t + "");
}
var fI = 9007199254740991;
function x0(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= fI;
}
function ic(t) {
  return t != null && x0(t.length) && !m5(t);
}
function Gm(t, e, n) {
  if (!Vr(n))
    return !1;
  var i = typeof e;
  return (i == "number" ? ic(n) && B0(e, n.length) : i == "string" && e in n) ? ap(n[e], t) : !1;
}
var hI = Object.prototype;
function up(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || hI;
  return t === n;
}
function _5(t, e) {
  for (var n = -1, i = Array(t); ++n < t; )
    i[n] = e(n);
  return i;
}
var dI = "[object Arguments]";
function By(t) {
  return Lo(t) && nc(t) == dI;
}
var y5 = Object.prototype, pI = y5.hasOwnProperty, gI = y5.propertyIsEnumerable, mI = By(function() {
  return arguments;
}()) ? By : function(t) {
  return Lo(t) && pI.call(t, "callee") && !gI.call(t, "callee");
};
const fp = mI;
function bI() {
  return !1;
}
var w5 = typeof exports == "object" && exports && !exports.nodeType && exports, xy = w5 && typeof module == "object" && module && !module.nodeType && module, _I = xy && xy.exports === w5, Fy = _I ? Hr.Buffer : void 0, yI = Fy ? Fy.isBuffer : void 0, wI = yI || bI;
const $c = wI;
var vI = "[object Arguments]", kI = "[object Array]", CI = "[object Boolean]", SI = "[object Date]", EI = "[object Error]", AI = "[object Function]", MI = "[object Map]", OI = "[object Number]", TI = "[object Object]", RI = "[object RegExp]", PI = "[object Set]", II = "[object String]", DI = "[object WeakMap]", NI = "[object ArrayBuffer]", LI = "[object DataView]", jI = "[object Float32Array]", BI = "[object Float64Array]", xI = "[object Int8Array]", FI = "[object Int16Array]", zI = "[object Int32Array]", VI = "[object Uint8Array]", UI = "[object Uint8ClampedArray]", HI = "[object Uint16Array]", WI = "[object Uint32Array]", un = {};
un[jI] = un[BI] = un[xI] = un[FI] = un[zI] = un[VI] = un[UI] = un[HI] = un[WI] = !0;
un[vI] = un[kI] = un[NI] = un[CI] = un[LI] = un[SI] = un[EI] = un[AI] = un[MI] = un[OI] = un[TI] = un[RI] = un[PI] = un[II] = un[DI] = !1;
function qI(t) {
  return Lo(t) && x0(t.length) && !!un[nc(t)];
}
function hp(t) {
  return function(e) {
    return t(e);
  };
}
var v5 = typeof exports == "object" && exports && !exports.nodeType && exports, jc = v5 && typeof module == "object" && module && !module.nodeType && module, JI = jc && jc.exports === v5, Eg = JI && d5.process, KI = function() {
  try {
    var t = jc && jc.require && jc.require("util").types;
    return t || Eg && Eg.binding && Eg.binding("util");
  } catch {
  }
}();
const Ta = KI;
var zy = Ta && Ta.isTypedArray, GI = zy ? hp(zy) : qI;
const F0 = GI;
var YI = Object.prototype, XI = YI.hasOwnProperty;
function k5(t, e) {
  var n = Ri(t), i = !n && fp(t), r = !n && !i && $c(t), s = !n && !i && !r && F0(t), o = n || i || r || s, l = o ? _5(t.length, String) : [], a = l.length;
  for (var c in t)
    (e || XI.call(t, c)) && !(o && (c == "length" || r && (c == "offset" || c == "parent") || s && (c == "buffer" || c == "byteLength" || c == "byteOffset") || B0(c, a))) && l.push(c);
  return l;
}
function C5(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var QI = C5(Object.keys, Object);
const ZI = QI;
var $I = Object.prototype, eD = $I.hasOwnProperty;
function S5(t) {
  if (!up(t))
    return ZI(t);
  var e = [];
  for (var n in Object(t))
    eD.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function rc(t) {
  return ic(t) ? k5(t) : S5(t);
}
function tD(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var nD = Object.prototype, iD = nD.hasOwnProperty;
function rD(t) {
  if (!Vr(t))
    return tD(t);
  var e = up(t), n = [];
  for (var i in t)
    i == "constructor" && (e || !iD.call(t, i)) || n.push(i);
  return n;
}
function z0(t) {
  return ic(t) ? k5(t, !0) : rD(t);
}
var sD = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, oD = /^\w*$/;
function V0(t, e) {
  if (Ri(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Ml(t) ? !0 : oD.test(t) || !sD.test(t) || e != null && t in Object(e);
}
var lD = Wl(Object, "create");
const eu = lD;
function aD() {
  this.__data__ = eu ? eu(null) : {}, this.size = 0;
}
function cD(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var uD = "__lodash_hash_undefined__", fD = Object.prototype, hD = fD.hasOwnProperty;
function dD(t) {
  var e = this.__data__;
  if (eu) {
    var n = e[t];
    return n === uD ? void 0 : n;
  }
  return hD.call(e, t) ? e[t] : void 0;
}
var pD = Object.prototype, gD = pD.hasOwnProperty;
function mD(t) {
  var e = this.__data__;
  return eu ? e[t] !== void 0 : gD.call(e, t);
}
var bD = "__lodash_hash_undefined__";
function _D(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = eu && e === void 0 ? bD : e, this;
}
function Ol(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
Ol.prototype.clear = aD;
Ol.prototype.delete = cD;
Ol.prototype.get = dD;
Ol.prototype.has = mD;
Ol.prototype.set = _D;
function yD() {
  this.__data__ = [], this.size = 0;
}
function dp(t, e) {
  for (var n = t.length; n--; )
    if (ap(t[n][0], e))
      return n;
  return -1;
}
var wD = Array.prototype, vD = wD.splice;
function kD(t) {
  var e = this.__data__, n = dp(e, t);
  if (n < 0)
    return !1;
  var i = e.length - 1;
  return n == i ? e.pop() : vD.call(e, n, 1), --this.size, !0;
}
function CD(t) {
  var e = this.__data__, n = dp(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function SD(t) {
  return dp(this.__data__, t) > -1;
}
function ED(t, e) {
  var n = this.__data__, i = dp(n, t);
  return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this;
}
function io(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
io.prototype.clear = yD;
io.prototype.delete = kD;
io.prototype.get = CD;
io.prototype.has = SD;
io.prototype.set = ED;
var AD = Wl(Hr, "Map");
const tu = AD;
function MD() {
  this.size = 0, this.__data__ = {
    hash: new Ol(),
    map: new (tu || io)(),
    string: new Ol()
  };
}
function OD(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function pp(t, e) {
  var n = t.__data__;
  return OD(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function TD(t) {
  var e = pp(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function RD(t) {
  return pp(this, t).get(t);
}
function PD(t) {
  return pp(this, t).has(t);
}
function ID(t, e) {
  var n = pp(this, t), i = n.size;
  return n.set(t, e), this.size += n.size == i ? 0 : 1, this;
}
function ro(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
ro.prototype.clear = MD;
ro.prototype.delete = TD;
ro.prototype.get = RD;
ro.prototype.has = PD;
ro.prototype.set = ID;
var DD = "Expected a function";
function gp(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(DD);
  var n = function() {
    var i = arguments, r = e ? e.apply(this, i) : i[0], s = n.cache;
    if (s.has(r))
      return s.get(r);
    var o = t.apply(this, i);
    return n.cache = s.set(r, o) || s, o;
  };
  return n.cache = new (gp.Cache || ro)(), n;
}
gp.Cache = ro;
var ND = 500;
function LD(t) {
  var e = gp(t, function(i) {
    return n.size === ND && n.clear(), i;
  }), n = e.cache;
  return e;
}
var jD = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, BD = /\\(\\)?/g, xD = LD(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(jD, function(n, i, r, s) {
    e.push(r ? s.replace(BD, "$1") : i || n);
  }), e;
});
const FD = xD;
function E5(t) {
  return t == null ? "" : g5(t);
}
function A5(t, e) {
  return Ri(t) ? t : V0(t, e) ? [t] : FD(E5(t));
}
var zD = 1 / 0;
function mp(t) {
  if (typeof t == "string" || Ml(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -zD ? "-0" : e;
}
function U0(t, e) {
  e = A5(e, t);
  for (var n = 0, i = e.length; t != null && n < i; )
    t = t[mp(e[n++])];
  return n && n == i ? t : void 0;
}
function VD(t, e, n) {
  var i = t == null ? void 0 : U0(t, e);
  return i === void 0 ? n : i;
}
function H0(t, e) {
  for (var n = -1, i = e.length, r = t.length; ++n < i; )
    t[r + n] = e[n];
  return t;
}
var Vy = yr ? yr.isConcatSpreadable : void 0;
function UD(t) {
  return Ri(t) || fp(t) || !!(Vy && t && t[Vy]);
}
function M5(t, e, n, i, r) {
  var s = -1, o = t.length;
  for (n || (n = UD), r || (r = []); ++s < o; ) {
    var l = t[s];
    e > 0 && n(l) ? e > 1 ? M5(l, e - 1, n, i, r) : H0(r, l) : i || (r[r.length] = l);
  }
  return r;
}
var HD = C5(Object.getPrototypeOf, Object);
const O5 = HD;
function WD(t, e, n) {
  var i = -1, r = t.length;
  e < 0 && (e = -e > r ? 0 : r + e), n = n > r ? r : n, n < 0 && (n += r), r = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var s = Array(r); ++i < r; )
    s[i] = t[i + e];
  return s;
}
function qD() {
  this.__data__ = new io(), this.size = 0;
}
function JD(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function KD(t) {
  return this.__data__.get(t);
}
function GD(t) {
  return this.__data__.has(t);
}
var YD = 200;
function XD(t, e) {
  var n = this.__data__;
  if (n instanceof io) {
    var i = n.__data__;
    if (!tu || i.length < YD - 1)
      return i.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new ro(i);
  }
  return n.set(t, e), this.size = n.size, this;
}
function us(t) {
  var e = this.__data__ = new io(t);
  this.size = e.size;
}
us.prototype.clear = qD;
us.prototype.delete = JD;
us.prototype.get = KD;
us.prototype.has = GD;
us.prototype.set = XD;
function QD(t, e) {
  return t && cp(e, rc(e), t);
}
function ZD(t, e) {
  return t && cp(e, z0(e), t);
}
var T5 = typeof exports == "object" && exports && !exports.nodeType && exports, Uy = T5 && typeof module == "object" && module && !module.nodeType && module, $D = Uy && Uy.exports === T5, Hy = $D ? Hr.Buffer : void 0, Wy = Hy ? Hy.allocUnsafe : void 0;
function e9(t, e) {
  if (e)
    return t.slice();
  var n = t.length, i = Wy ? Wy(n) : new t.constructor(n);
  return t.copy(i), i;
}
function t9(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = 0, s = []; ++n < i; ) {
    var o = t[n];
    e(o, n, t) && (s[r++] = o);
  }
  return s;
}
function R5() {
  return [];
}
var n9 = Object.prototype, i9 = n9.propertyIsEnumerable, qy = Object.getOwnPropertySymbols, r9 = qy ? function(t) {
  return t == null ? [] : (t = Object(t), t9(qy(t), function(e) {
    return i9.call(t, e);
  }));
} : R5;
const W0 = r9;
function s9(t, e) {
  return cp(t, W0(t), e);
}
var o9 = Object.getOwnPropertySymbols, l9 = o9 ? function(t) {
  for (var e = []; t; )
    H0(e, W0(t)), t = O5(t);
  return e;
} : R5;
const P5 = l9;
function a9(t, e) {
  return cp(t, P5(t), e);
}
function I5(t, e, n) {
  var i = e(t);
  return Ri(t) ? i : H0(i, n(t));
}
function Ym(t) {
  return I5(t, rc, W0);
}
function c9(t) {
  return I5(t, z0, P5);
}
var u9 = Wl(Hr, "DataView");
const Xm = u9;
var f9 = Wl(Hr, "Promise");
const Qm = f9;
var h9 = Wl(Hr, "Set");
const Zm = h9;
var Jy = "[object Map]", d9 = "[object Object]", Ky = "[object Promise]", Gy = "[object Set]", Yy = "[object WeakMap]", Xy = "[object DataView]", p9 = Hl(Xm), g9 = Hl(tu), m9 = Hl(Qm), b9 = Hl(Zm), _9 = Hl(Km), al = nc;
(Xm && al(new Xm(new ArrayBuffer(1))) != Xy || tu && al(new tu()) != Jy || Qm && al(Qm.resolve()) != Ky || Zm && al(new Zm()) != Gy || Km && al(new Km()) != Yy) && (al = function(t) {
  var e = nc(t), n = e == d9 ? t.constructor : void 0, i = n ? Hl(n) : "";
  if (i)
    switch (i) {
      case p9:
        return Xy;
      case g9:
        return Jy;
      case m9:
        return Ky;
      case b9:
        return Gy;
      case _9:
        return Yy;
    }
  return e;
});
const Ra = al;
var y9 = Object.prototype, w9 = y9.hasOwnProperty;
function v9(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && w9.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var k9 = Hr.Uint8Array;
const Wh = k9;
function q0(t) {
  var e = new t.constructor(t.byteLength);
  return new Wh(e).set(new Wh(t)), e;
}
function C9(t, e) {
  var n = e ? q0(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var S9 = /\w*$/;
function E9(t) {
  var e = new t.constructor(t.source, S9.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var Qy = yr ? yr.prototype : void 0, Zy = Qy ? Qy.valueOf : void 0;
function A9(t) {
  return Zy ? Object(Zy.call(t)) : {};
}
function M9(t, e) {
  var n = e ? q0(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var O9 = "[object Boolean]", T9 = "[object Date]", R9 = "[object Map]", P9 = "[object Number]", I9 = "[object RegExp]", D9 = "[object Set]", N9 = "[object String]", L9 = "[object Symbol]", j9 = "[object ArrayBuffer]", B9 = "[object DataView]", x9 = "[object Float32Array]", F9 = "[object Float64Array]", z9 = "[object Int8Array]", V9 = "[object Int16Array]", U9 = "[object Int32Array]", H9 = "[object Uint8Array]", W9 = "[object Uint8ClampedArray]", q9 = "[object Uint16Array]", J9 = "[object Uint32Array]";
function K9(t, e, n) {
  var i = t.constructor;
  switch (e) {
    case j9:
      return q0(t);
    case O9:
    case T9:
      return new i(+t);
    case B9:
      return C9(t, n);
    case x9:
    case F9:
    case z9:
    case V9:
    case U9:
    case H9:
    case W9:
    case q9:
    case J9:
      return M9(t, n);
    case R9:
      return new i();
    case P9:
    case N9:
      return new i(t);
    case I9:
      return E9(t);
    case D9:
      return new i();
    case L9:
      return A9(t);
  }
}
function G9(t) {
  return typeof t.constructor == "function" && !up(t) ? q7(O5(t)) : {};
}
var Y9 = "[object Map]";
function X9(t) {
  return Lo(t) && Ra(t) == Y9;
}
var $y = Ta && Ta.isMap, Q9 = $y ? hp($y) : X9;
const Z9 = Q9;
var $9 = "[object Set]";
function eN(t) {
  return Lo(t) && Ra(t) == $9;
}
var ew = Ta && Ta.isSet, tN = ew ? hp(ew) : eN;
const nN = tN;
var iN = 1, rN = 2, sN = 4, D5 = "[object Arguments]", oN = "[object Array]", lN = "[object Boolean]", aN = "[object Date]", cN = "[object Error]", N5 = "[object Function]", uN = "[object GeneratorFunction]", fN = "[object Map]", hN = "[object Number]", L5 = "[object Object]", dN = "[object RegExp]", pN = "[object Set]", gN = "[object String]", mN = "[object Symbol]", bN = "[object WeakMap]", _N = "[object ArrayBuffer]", yN = "[object DataView]", wN = "[object Float32Array]", vN = "[object Float64Array]", kN = "[object Int8Array]", CN = "[object Int16Array]", SN = "[object Int32Array]", EN = "[object Uint8Array]", AN = "[object Uint8ClampedArray]", MN = "[object Uint16Array]", ON = "[object Uint32Array]", nn = {};
nn[D5] = nn[oN] = nn[_N] = nn[yN] = nn[lN] = nn[aN] = nn[wN] = nn[vN] = nn[kN] = nn[CN] = nn[SN] = nn[fN] = nn[hN] = nn[L5] = nn[dN] = nn[pN] = nn[gN] = nn[mN] = nn[EN] = nn[AN] = nn[MN] = nn[ON] = !0;
nn[cN] = nn[N5] = nn[bN] = !1;
function ph(t, e, n, i, r, s) {
  var o, l = e & iN, a = e & rN, c = e & sN;
  if (n && (o = r ? n(t, i, r, s) : n(t)), o !== void 0)
    return o;
  if (!Vr(t))
    return t;
  var u = Ri(t);
  if (u) {
    if (o = v9(t), !l)
      return K7(t, o);
  } else {
    var f = Ra(t), h = f == N5 || f == uN;
    if ($c(t))
      return e9(t, l);
    if (f == L5 || f == D5 || h && !r) {
      if (o = a || h ? {} : G9(t), !l)
        return a ? a9(t, ZD(o, t)) : s9(t, QD(o, t));
    } else {
      if (!nn[f])
        return r ? t : {};
      o = K9(t, f, l);
    }
  }
  s || (s = new us());
  var d = s.get(t);
  if (d)
    return d;
  s.set(t, o), nN(t) ? t.forEach(function(_) {
    o.add(ph(_, e, n, _, t, s));
  }) : Z9(t) && t.forEach(function(_, m) {
    o.set(m, ph(_, e, n, m, t, s));
  });
  var p = c ? a ? c9 : Ym : a ? z0 : rc, g = u ? void 0 : p(t);
  return rI(g || t, function(_, m) {
    g && (m = _, _ = t[m]), b5(o, m, ph(_, e, n, m, t, s));
  }), o;
}
var TN = 1, RN = 4;
function PN(t, e) {
  return e = typeof e == "function" ? e : void 0, ph(t, TN | RN, e);
}
var IN = "__lodash_hash_undefined__";
function DN(t) {
  return this.__data__.set(t, IN), this;
}
function NN(t) {
  return this.__data__.has(t);
}
function qh(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new ro(); ++e < n; )
    this.add(t[e]);
}
qh.prototype.add = qh.prototype.push = DN;
qh.prototype.has = NN;
function LN(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function jN(t, e) {
  return t.has(e);
}
var BN = 1, xN = 2;
function j5(t, e, n, i, r, s) {
  var o = n & BN, l = t.length, a = e.length;
  if (l != a && !(o && a > l))
    return !1;
  var c = s.get(t), u = s.get(e);
  if (c && u)
    return c == e && u == t;
  var f = -1, h = !0, d = n & xN ? new qh() : void 0;
  for (s.set(t, e), s.set(e, t); ++f < l; ) {
    var p = t[f], g = e[f];
    if (i)
      var _ = o ? i(g, p, f, e, t, s) : i(p, g, f, t, e, s);
    if (_ !== void 0) {
      if (_)
        continue;
      h = !1;
      break;
    }
    if (d) {
      if (!LN(e, function(m, C) {
        if (!jN(d, C) && (p === m || r(p, m, n, i, s)))
          return d.push(C);
      })) {
        h = !1;
        break;
      }
    } else if (!(p === g || r(p, g, n, i, s))) {
      h = !1;
      break;
    }
  }
  return s.delete(t), s.delete(e), h;
}
function FN(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i, r) {
    n[++e] = [r, i];
  }), n;
}
function zN(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i) {
    n[++e] = i;
  }), n;
}
var VN = 1, UN = 2, HN = "[object Boolean]", WN = "[object Date]", qN = "[object Error]", JN = "[object Map]", KN = "[object Number]", GN = "[object RegExp]", YN = "[object Set]", XN = "[object String]", QN = "[object Symbol]", ZN = "[object ArrayBuffer]", $N = "[object DataView]", tw = yr ? yr.prototype : void 0, Ag = tw ? tw.valueOf : void 0;
function eL(t, e, n, i, r, s, o) {
  switch (n) {
    case $N:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case ZN:
      return !(t.byteLength != e.byteLength || !s(new Wh(t), new Wh(e)));
    case HN:
    case WN:
    case KN:
      return ap(+t, +e);
    case qN:
      return t.name == e.name && t.message == e.message;
    case GN:
    case XN:
      return t == e + "";
    case JN:
      var l = FN;
    case YN:
      var a = i & VN;
      if (l || (l = zN), t.size != e.size && !a)
        return !1;
      var c = o.get(t);
      if (c)
        return c == e;
      i |= UN, o.set(t, e);
      var u = j5(l(t), l(e), i, r, s, o);
      return o.delete(t), u;
    case QN:
      if (Ag)
        return Ag.call(t) == Ag.call(e);
  }
  return !1;
}
var tL = 1, nL = Object.prototype, iL = nL.hasOwnProperty;
function rL(t, e, n, i, r, s) {
  var o = n & tL, l = Ym(t), a = l.length, c = Ym(e), u = c.length;
  if (a != u && !o)
    return !1;
  for (var f = a; f--; ) {
    var h = l[f];
    if (!(o ? h in e : iL.call(e, h)))
      return !1;
  }
  var d = s.get(t), p = s.get(e);
  if (d && p)
    return d == e && p == t;
  var g = !0;
  s.set(t, e), s.set(e, t);
  for (var _ = o; ++f < a; ) {
    h = l[f];
    var m = t[h], C = e[h];
    if (i)
      var v = o ? i(C, m, h, e, t, s) : i(m, C, h, t, e, s);
    if (!(v === void 0 ? m === C || r(m, C, n, i, s) : v)) {
      g = !1;
      break;
    }
    _ || (_ = h == "constructor");
  }
  if (g && !_) {
    var k = t.constructor, S = e.constructor;
    k != S && "constructor" in t && "constructor" in e && !(typeof k == "function" && k instanceof k && typeof S == "function" && S instanceof S) && (g = !1);
  }
  return s.delete(t), s.delete(e), g;
}
var sL = 1, nw = "[object Arguments]", iw = "[object Array]", wf = "[object Object]", oL = Object.prototype, rw = oL.hasOwnProperty;
function lL(t, e, n, i, r, s) {
  var o = Ri(t), l = Ri(e), a = o ? iw : Ra(t), c = l ? iw : Ra(e);
  a = a == nw ? wf : a, c = c == nw ? wf : c;
  var u = a == wf, f = c == wf, h = a == c;
  if (h && $c(t)) {
    if (!$c(e))
      return !1;
    o = !0, u = !1;
  }
  if (h && !u)
    return s || (s = new us()), o || F0(t) ? j5(t, e, n, i, r, s) : eL(t, e, a, n, i, r, s);
  if (!(n & sL)) {
    var d = u && rw.call(t, "__wrapped__"), p = f && rw.call(e, "__wrapped__");
    if (d || p) {
      var g = d ? t.value() : t, _ = p ? e.value() : e;
      return s || (s = new us()), r(g, _, n, i, s);
    }
  }
  return h ? (s || (s = new us()), rL(t, e, n, i, r, s)) : !1;
}
function bp(t, e, n, i, r) {
  return t === e ? !0 : t == null || e == null || !Lo(t) && !Lo(e) ? t !== t && e !== e : lL(t, e, n, i, bp, r);
}
var aL = 1, cL = 2;
function uL(t, e, n, i) {
  var r = n.length, s = r, o = !i;
  if (t == null)
    return !s;
  for (t = Object(t); r--; ) {
    var l = n[r];
    if (o && l[2] ? l[1] !== t[l[0]] : !(l[0] in t))
      return !1;
  }
  for (; ++r < s; ) {
    l = n[r];
    var a = l[0], c = t[a], u = l[1];
    if (o && l[2]) {
      if (c === void 0 && !(a in t))
        return !1;
    } else {
      var f = new us();
      if (i)
        var h = i(c, u, a, t, e, f);
      if (!(h === void 0 ? bp(u, c, aL | cL, i, f) : h))
        return !1;
    }
  }
  return !0;
}
function B5(t) {
  return t === t && !Vr(t);
}
function fL(t) {
  for (var e = rc(t), n = e.length; n--; ) {
    var i = e[n], r = t[i];
    e[n] = [i, r, B5(r)];
  }
  return e;
}
function x5(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function hL(t) {
  var e = fL(t);
  return e.length == 1 && e[0][2] ? x5(e[0][0], e[0][1]) : function(n) {
    return n === t || uL(n, t, e);
  };
}
function dL(t, e) {
  return t != null && e in Object(t);
}
function pL(t, e, n) {
  e = A5(e, t);
  for (var i = -1, r = e.length, s = !1; ++i < r; ) {
    var o = mp(e[i]);
    if (!(s = t != null && n(t, o)))
      break;
    t = t[o];
  }
  return s || ++i != r ? s : (r = t == null ? 0 : t.length, !!r && x0(r) && B0(o, r) && (Ri(t) || fp(t)));
}
function gL(t, e) {
  return t != null && pL(t, e, dL);
}
var mL = 1, bL = 2;
function _L(t, e) {
  return V0(t) && B5(e) ? x5(mp(t), e) : function(n) {
    var i = VD(n, t);
    return i === void 0 && i === e ? gL(n, t) : bp(e, i, mL | bL);
  };
}
function yL(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function wL(t) {
  return function(e) {
    return U0(e, t);
  };
}
function vL(t) {
  return V0(t) ? yL(mp(t)) : wL(t);
}
function zu(t) {
  return typeof t == "function" ? t : t == null ? Fu : typeof t == "object" ? Ri(t) ? _L(t[0], t[1]) : hL(t) : vL(t);
}
function kL(t, e, n, i) {
  for (var r = -1, s = t == null ? 0 : t.length; ++r < s; ) {
    var o = t[r];
    e(i, o, n(o), t);
  }
  return i;
}
function F5(t) {
  return function(e, n, i) {
    for (var r = -1, s = Object(e), o = i(e), l = o.length; l--; ) {
      var a = o[t ? l : ++r];
      if (n(s[a], a, s) === !1)
        break;
    }
    return e;
  };
}
var CL = F5();
const SL = CL;
function z5(t, e) {
  return t && SL(t, e, rc);
}
function V5(t, e) {
  return function(n, i) {
    if (n == null)
      return n;
    if (!ic(n))
      return t(n, i);
    for (var r = n.length, s = e ? r : -1, o = Object(n); (e ? s-- : ++s < r) && i(o[s], s, o) !== !1; )
      ;
    return n;
  };
}
var EL = V5(z5);
const U5 = EL;
function AL(t, e, n, i) {
  return U5(t, function(r, s, o) {
    e(i, r, n(r), o);
  }), i;
}
function H5(t, e) {
  return function(n, i) {
    var r = Ri(n) ? kL : AL, s = e ? e() : {};
    return r(n, t, zu(i), s);
  };
}
var ML = function() {
  return Hr.Date.now();
};
const Mg = ML;
var OL = "Expected a function", TL = Math.max, RL = Math.min;
function _p(t, e, n) {
  var i, r, s, o, l, a, c = 0, u = !1, f = !1, h = !0;
  if (typeof t != "function")
    throw new TypeError(OL);
  e = Jm(e) || 0, Vr(n) && (u = !!n.leading, f = "maxWait" in n, s = f ? TL(Jm(n.maxWait) || 0, e) : s, h = "trailing" in n ? !!n.trailing : h);
  function d(O) {
    var w = i, A = r;
    return i = r = void 0, c = O, o = t.apply(A, w), o;
  }
  function p(O) {
    return c = O, l = setTimeout(m, e), u ? d(O) : o;
  }
  function g(O) {
    var w = O - a, A = O - c, D = e - w;
    return f ? RL(D, s - A) : D;
  }
  function _(O) {
    var w = O - a, A = O - c;
    return a === void 0 || w >= e || w < 0 || f && A >= s;
  }
  function m() {
    var O = Mg();
    if (_(O))
      return C(O);
    l = setTimeout(m, g(O));
  }
  function C(O) {
    return l = void 0, h && i ? d(O) : (i = r = void 0, o);
  }
  function v() {
    l !== void 0 && clearTimeout(l), c = 0, i = a = r = l = void 0;
  }
  function k() {
    return l === void 0 ? o : C(Mg());
  }
  function S() {
    var O = Mg(), w = _(O);
    if (i = arguments, r = this, a = O, w) {
      if (l === void 0)
        return p(a);
      if (f)
        return clearTimeout(l), l = setTimeout(m, e), d(a);
    }
    return l === void 0 && (l = setTimeout(m, e)), o;
  }
  return S.cancel = v, S.flush = k, S;
}
function ft(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
function W5(t) {
  return typeof t == "function" ? t : Fu;
}
function PL(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var IL = F5(!0);
const DL = IL;
function NL(t, e) {
  return t && DL(t, e, rc);
}
var LL = V5(NL, !0);
const jL = LL;
function BL(t, e) {
  var n = Ri(t) ? PL : jL;
  return n(t, W5(e));
}
function xi(t) {
  return t && t.length ? t[0] : void 0;
}
function q5(t, e) {
  var n = -1, i = ic(t) ? Array(t.length) : [];
  return U5(t, function(r, s, o) {
    i[++n] = e(r, s, o);
  }), i;
}
function xL(t, e) {
  var n = Ri(t) ? Lc : q5;
  return n(t, zu(e));
}
var FL = Object.prototype, zL = FL.hasOwnProperty, VL = H5(function(t, e, n) {
  zL.call(t, n) ? t[n].push(e) : lp(t, n, [e]);
});
const yp = VL;
function At(t) {
  var e = t == null ? 0 : t.length;
  return e ? WD(t, 0, -1) : [];
}
var UL = "[object Map]", HL = "[object Set]", WL = Object.prototype, qL = WL.hasOwnProperty;
function Pt(t) {
  if (t == null)
    return !0;
  if (ic(t) && (Ri(t) || typeof t == "string" || typeof t.splice == "function" || $c(t) || F0(t) || fp(t)))
    return !t.length;
  var e = Ra(t);
  if (e == UL || e == HL)
    return !t.size;
  if (up(t))
    return !S5(t).length;
  for (var n in t)
    if (qL.call(t, n))
      return !1;
  return !0;
}
function Ot(t, e) {
  return bp(t, e);
}
function JL(t, e) {
  return t < e;
}
function KL(t, e) {
  var n = {};
  return e = zu(e), z5(t, function(i, r, s) {
    lp(n, r, e(i, r, s));
  }), n;
}
function GL(t, e, n) {
  for (var i = -1, r = t.length; ++i < r; ) {
    var s = t[i], o = e(s);
    if (o != null && (l === void 0 ? o === o && !Ml(o) : n(o, l)))
      var l = o, a = s;
  }
  return a;
}
function vf(t, e) {
  return t && t.length ? GL(t, zu(e), JL) : void 0;
}
function YL(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function XL(t, e) {
  if (t !== e) {
    var n = t !== void 0, i = t === null, r = t === t, s = Ml(t), o = e !== void 0, l = e === null, a = e === e, c = Ml(e);
    if (!l && !c && !s && t > e || s && o && a && !l && !c || i && o && a || !n && a || !r)
      return 1;
    if (!i && !s && !c && t < e || c && n && r && !i && !s || l && n && r || !o && r || !a)
      return -1;
  }
  return 0;
}
function QL(t, e, n) {
  for (var i = -1, r = t.criteria, s = e.criteria, o = r.length, l = n.length; ++i < o; ) {
    var a = XL(r[i], s[i]);
    if (a) {
      if (i >= l)
        return a;
      var c = n[i];
      return a * (c == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function ZL(t, e, n) {
  e.length ? e = Lc(e, function(s) {
    return Ri(s) ? function(o) {
      return U0(o, s.length === 1 ? s[0] : s);
    } : s;
  }) : e = [Fu];
  var i = -1;
  e = Lc(e, hp(zu));
  var r = q5(t, function(s, o, l) {
    var a = Lc(e, function(c) {
      return c(s);
    });
    return { criteria: a, index: ++i, value: s };
  });
  return YL(r, function(s, o) {
    return QL(s, o, n);
  });
}
var $L = H5(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
const ej = $L;
var tj = Math.ceil, nj = Math.max;
function ij(t, e, n, i) {
  for (var r = -1, s = nj(tj((e - t) / (n || 1)), 0), o = Array(s); s--; )
    o[i ? s : ++r] = t, t += n;
  return o;
}
function rj(t) {
  return function(e, n, i) {
    return i && typeof i != "number" && Gm(e, n, i) && (n = i = void 0), e = dh(e), n === void 0 ? (n = e, e = 0) : n = dh(n), i = i === void 0 ? e < n ? 1 : -1 : dh(i), ij(e, n, i, t);
  };
}
var sj = rj();
const oj = sj;
var lj = uI(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && Gm(t, e[0], e[1]) ? e = [] : n > 2 && Gm(e[0], e[1], e[2]) && (e = [e[0]]), ZL(t, M5(e, 1), []);
});
const aj = lj;
var cj = "Expected a function";
function uj(t, e, n) {
  var i = !0, r = !0;
  if (typeof t != "function")
    throw new TypeError(cj);
  return Vr(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), _p(t, e, {
    leading: i,
    maxWait: e,
    trailing: r
  });
}
var fj = 9007199254740991, Og = 4294967295, hj = Math.min;
function sw(t, e) {
  if (t = E7(t), t < 1 || t > fj)
    return [];
  var n = Og, i = hj(t, Og);
  e = W5(e), t -= Og;
  for (var r = _5(i, e); ++n < t; )
    e(n);
  return r;
}
var dj = 0;
function Pa(t) {
  var e = ++dj;
  return E5(t) + e;
}
const pj = 1e4, gj = [];
function $m(t, e = !1) {
  const n = {};
  if (!Array.isArray(t))
    throw new TypeError("Array expected");
  function i(o, l) {
    (!Array.isArray(o) && !Cn(o) || e && l.length > 0) && (n[Be(l)] = !0), Cn(o) && Object.keys(o).forEach((c) => {
      i(o[c], l.concat(c));
    });
  }
  const r = Math.min(t.length, pj);
  for (let o = 0; o < r; o++) {
    const l = t[o];
    i(l, gj);
  }
  return Object.keys(n).sort().map(zr);
}
function J5(t, e, n) {
  if (!(e <= t))
    for (let i = t; i < e; i++)
      n(i);
}
function Jh(t, e) {
  return t.length > e ? t.slice(0, e) : t;
}
function ow(t) {
  return {
    ...t
  };
}
function lw(t) {
  return Object.values(t);
}
function aw(t, e, n, i) {
  const r = t.slice(0), s = r.splice(e, n);
  return r.splice.apply(r, [e + i, 0, ...s]), r;
}
function J0(t, e) {
  try {
    return e.parse(t);
  } catch {
    return e.parse(cs(t));
  }
}
function K5(t, e) {
  try {
    return J0(t, e);
  } catch {
    return;
  }
}
function wp(t, e) {
  t = t.replace(Y5, "");
  try {
    return e(t);
  } catch {
  }
  try {
    return e("[" + t + "]");
  } catch {
  }
  try {
    return e("{" + t + "}");
  } catch {
  }
  throw new Error("Failed to parse partial JSON");
}
function G5(t) {
  t = t.replace(Y5, "");
  try {
    return cs(t);
  } catch {
  }
  try {
    const e = cs("[" + t + "]");
    return e.substring(1, e.length - 1);
  } catch {
  }
  try {
    const e = cs("{" + t + "}");
    return e.substring(1, e.length - 1);
  } catch {
  }
  throw new Error("Failed to repair partial JSON");
}
const Y5 = /,\s*$/;
function vp(t, e) {
  const n = uw.exec(e);
  if (n) {
    const i = Jn(n[2]), r = bj(t, `
`, 0, i), s = t.lastIndexOf(`
`, i), o = i - s - 1;
    return {
      position: i,
      line: r,
      column: o,
      message: e.replace(uw, () => `line ${r + 1} column ${o + 1}`)
    };
  } else {
    const i = kj.exec(e), r = i ? Jn(i[1]) : null, s = r !== null ? r - 1 : null, o = Cj.exec(e), l = o ? Jn(o[1]) : null, a = l !== null ? l - 1 : null;
    return {
      position: s !== null && a !== null ? mj(t, s, a) : null,
      line: s,
      column: a,
      message: e.replace(/^JSON.parse: /, "").replace(/ of the JSON data$/, "")
    };
  }
}
function mj(t, e, n) {
  let i = t.indexOf(`
`), r = 1;
  for (; r < e && i !== -1; )
    i = t.indexOf(`
`, i + 1), r++;
  return i !== -1 ? i + n + 1 : null;
}
function bj(t, e, n = 0, i = t.length) {
  let r = 0;
  for (let s = n; s < i; s++)
    t.charAt(s) === e && r++;
  return r;
}
function _j(t, e) {
  try {
    const n = sp.parse(t), i = Be(e), r = n.pointers[i];
    if (r)
      return {
        path: e,
        line: r.key ? r.key.line : r.value ? r.value.line : 0,
        column: r.key ? r.key.column : r.value ? r.value.column : 0,
        from: r.key ? r.key.pos : r.value ? r.value.pos : 0,
        to: r.keyEnd ? r.keyEnd.pos : r.valueEnd ? r.valueEnd.pos : 0
      };
  } catch (n) {
    console.error(n);
  }
  return null;
}
function yj(t, e, n) {
  if (e === "array") {
    if (Array.isArray(t))
      return t;
    if (Cn(t))
      return lw(t);
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (Array.isArray(i))
          return i;
        if (Cn(i))
          return lw(i);
      } catch {
        return [t];
      }
    return [t];
  }
  if (e === "object") {
    if (Array.isArray(t))
      return ow(t);
    if (Cn(t))
      return t;
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (Cn(i))
          return i;
        if (Array.isArray(i))
          return ow(i);
      } catch {
        return { value: t };
      }
    return { value: t };
  }
  if (e === "value")
    return dn(t) ? n.stringify(t) : t;
  throw new Error(`Cannot convert ${j0(t, n)} to ${e}`);
}
function Tg(t) {
  return Cn(t) ? t.json !== void 0 ? t.text !== void 0 ? 'Content must contain either a property "json" or a property "text" but not both' : null : t.text === void 0 ? 'Content must contain either a property "json" or a property "text"' : typeof t.text != "string" ? 'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?' : null : "Content must be an object";
}
function Ia(t) {
  return Cn(t) && typeof t.text == "string";
}
function K0(t) {
  return Cn(t) && typeof t.json < "u" && !Ia(t);
}
function wj(t, e = void 0, n = JSON) {
  return Ia(t) ? t : { text: n.stringify(t.json, null, e) };
}
function cw(t, e = JSON) {
  return K0(t) ? t : { json: e.parse(t.text) };
}
function Kh(t, e, n) {
  return wj(t, e, n).text;
}
function X5(t, e) {
  return vj(t, e) > e;
}
function vj(t, e = 1 / 0) {
  if (Ia(t))
    return t.text.length;
  const n = t.json;
  let i = 0;
  function r(s) {
    if (Array.isArray(s)) {
      if (i += 2 + (s.length - 1), i > e)
        return i;
      for (let o = 0; o < s.length; o++) {
        const l = s[o];
        if (r(l), i > e)
          return i;
      }
    } else if (Cn(s)) {
      const o = Object.keys(s);
      i += 2 + o.length + (o.length - 1);
      for (let l = 0; l < o.length; l++) {
        const a = o[l], c = s[a];
        i += a.length + 2, r(c);
      }
    } else
      typeof s == "string" ? i += s.length + 2 : i += String(s).length;
  }
  return r(n), i;
}
const uw = /(position|char) (\d+)/, kj = /line (\d+)/, Cj = /column (\d+)/;
function Sj(t, e) {
  return t.parse === e.parse && t.stringify === e.stringify;
}
function G0({ escapeControlCharacters: t, escapeUnicodeCharacters: e }) {
  return t ? e ? Ej : Aj : e ? Mj : Oj;
}
const Ej = {
  escapeValue: (t) => Q5(e6(String(t))),
  unescapeValue: (t) => t6(Z5(t))
}, Aj = {
  escapeValue: (t) => e6(String(t)),
  unescapeValue: (t) => t6(t)
}, Mj = {
  escapeValue: (t) => Q5(String(t)),
  unescapeValue: (t) => Z5(t)
}, Oj = {
  escapeValue: (t) => String(t),
  unescapeValue: (t) => t
};
function Q5(t) {
  return t.replace(/[^\x20-\x7F]/g, (e) => {
    var n;
    return e === "\b" || e === "\f" || e === `
` || e === "\r" || e === "	" ? e : "\\u" + ("000" + ((n = e.codePointAt(0)) == null ? void 0 : n.toString(16))).slice(-4);
  });
}
function Z5(t) {
  return t.replace(/\\u[a-fA-F0-9]{4}/g, (e) => {
    try {
      const n = JSON.parse('"' + e + '"');
      return $5[n] || n;
    } catch {
      return e;
    }
  });
}
const $5 = {
  '"': '\\"',
  "\\": "\\\\",
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, Tj = {
  '\\"': '"',
  "\\\\": "\\",
  "\\/": "/",
  "\\b": "\b",
  "\\f": "\f",
  "\\n": `
`,
  "\\r": "\r",
  "\\t": "	"
};
function e6(t) {
  return t.replace(/["\b\f\n\r\t\\]/g, (e) => $5[e] || e);
}
function t6(t) {
  return t.replace(/\\["bfnrt\\]/g, (e) => Tj[e] || e);
}
function Tl(t) {
  return typeof t != "string" ? String(t) : t.endsWith(`
`) ? t + `
` : t;
}
function Rj(t) {
  return t.replace(/\n$/, "");
}
function n6(t, e) {
  return Vu(t, (n) => n.nodeName.toUpperCase() === e.toUpperCase());
}
function hl(t, e, n) {
  return Vu(t, (i) => Ij(i, e, n));
}
function Pj(t) {
  return t.nodeName === "DIV" && t.contentEditable === "true";
}
function Ij(t, e, n) {
  return typeof t.getAttribute == "function" && t.getAttribute(e) === n;
}
function Vu(t, e) {
  return !!Y0(t, e);
}
function Y0(t, e) {
  let n = t;
  for (; n && !e(n); )
    n = n.parentNode;
  return n || void 0;
}
function i6(t) {
  if (t.firstChild == null) {
    t.focus();
    return;
  }
  const e = document.createRange(), n = window.getSelection();
  e.setStart(t, 1), e.collapse(!0), n == null || n.removeAllRanges(), n == null || n.addRange(e);
}
function Gh(t, e, n) {
  const i = sc(t).document.activeElement;
  i.isContentEditable && (i.textContent = n ? e : i.textContent + e, i6(i));
}
function sc(t) {
  return t && t.ownerDocument && t.ownerDocument.defaultView;
}
function Yh(t) {
  const e = sc(t);
  return Vu(e.document.activeElement, (n) => n === t);
}
function r6(t, e) {
  return Y0(t, (n) => n.nodeName === e);
}
function Rg(t) {
  return hl(t, "data-type", "selectable-key") ? Gt.key : hl(t, "data-type", "selectable-value") ? Gt.value : hl(t, "data-type", "insert-selection-area-inside") ? Gt.inside : hl(t, "data-type", "insert-selection-area-after") ? Gt.after : Gt.multi;
}
function Da(t) {
  return encodeURIComponent(Be(t));
}
function Dj(t) {
  return zr(decodeURIComponent(t));
}
function s6(t) {
  const e = Y0(t, (n) => n != null && n.hasAttribute ? n.hasAttribute("data-path") : !1);
  return e ? Dj(e.getAttribute("data-path")) : null;
}
function Nj({ allElements: t, currentElement: e, direction: n, hasPrio: i = () => !0, margin: r = 10 }) {
  const s = xL(t.filter(l), a), o = a(e);
  function l(m) {
    const C = m.getBoundingClientRect();
    return C.width > 0 && C.height > 0;
  }
  function a(m) {
    const C = m.getBoundingClientRect();
    return {
      x: C.left + C.width / 2,
      y: C.top + C.height / 2,
      rect: C,
      element: m
    };
  }
  const c = (m, C) => Math.abs(m.y - C.y) < r, u = (m, C) => m.rect.left + r < C.rect.left, f = (m, C) => m.rect.right > C.rect.right + r, h = (m, C) => m.y + r < C.y, d = (m, C) => m.y > C.y + r;
  function p(m, C, v = 1) {
    const k = m.x - C.x, S = (m.y - C.y) * v;
    return Math.sqrt(k * k + S * S);
  }
  const g = (m) => p(m, o), _ = (m) => p(m, o, 10);
  if (n === "Left" || n === "Right") {
    const m = n === "Left" ? s.filter((k) => u(k, o)) : s.filter((k) => f(k, o)), C = m.filter((k) => c(k, o)), v = vf(C, g) || vf(m, _);
    return v == null ? void 0 : v.element;
  }
  if (n === "Up" || n === "Down") {
    const m = n === "Up" ? s.filter((k) => h(k, o)) : s.filter((k) => d(k, o)), C = m.filter((k) => i(k.element)), v = vf(C, g) || vf(m, g);
    return v == null ? void 0 : v.element;
  }
}
const o6 = typeof navigator < "u" ? navigator.platform.toUpperCase().indexOf("MAC") >= 0 : !1;
function Lj(t) {
  return Bj[t] || "";
}
function Yo(t) {
  const e = [];
  t.ctrlKey && e.push("Ctrl"), t.metaKey && e.push("Command"), t.altKey && e.push(o6 ? "Option" : "Alt"), t.shiftKey && e.push("Shift");
  const n = Lj(t.which);
  return jj[n] || e.push(n), e.join("+");
}
const jj = {
  Ctrl: !0,
  Command: !0,
  Alt: !0,
  Option: !0,
  Shift: !0
}, Bj = {
  8: "Backspace",
  9: "Tab",
  13: "Enter",
  16: "Shift",
  17: "Ctrl",
  18: "Alt",
  19: "Pause_Break",
  20: "Caps_Lock",
  27: "Escape",
  33: "Page_Up",
  34: "Page_Down",
  35: "End",
  36: "Home",
  37: "Left",
  38: "Up",
  39: "Right",
  40: "Down",
  45: "Insert",
  46: "Delete",
  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",
  65: "A",
  66: "B",
  67: "C",
  68: "D",
  69: "E",
  70: "F",
  71: "G",
  72: "H",
  73: "I",
  74: "J",
  75: "K",
  76: "L",
  77: "M",
  78: "N",
  79: "O",
  80: "P",
  81: "Q",
  82: "R",
  83: "S",
  84: "T",
  85: "U",
  86: "V",
  87: "W",
  88: "X",
  89: "Y",
  90: "Z",
  91: "Left_Window_Key",
  92: "Right_Window_Key",
  93: "Select_Key",
  96: "Numpad_0",
  97: "Numpad_1",
  98: "Numpad_2",
  99: "Numpad_3",
  100: "Numpad_4",
  101: "Numpad_5",
  102: "Numpad_6",
  103: "Numpad_7",
  104: "Numpad_8",
  105: "Numpad_9",
  106: "Numpad_*",
  107: "Numpad_+",
  109: "Numpad_-",
  110: "Numpad_.",
  111: "Numpad_/",
  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",
  144: "Num_Lock",
  145: "Scroll_Lock",
  186: ";",
  59: ";",
  187: "=",
  61: "=",
  188: ",",
  189: "-",
  173: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
};
const { window: Pg } = np;
function fw(t) {
  let e, n, i, r, s, o;
  const l = [t[0].props];
  var a = t[0].component;
  function c(u) {
    let f = {};
    for (let h = 0; h < l.length; h += 1)
      f = Go(f, l[h]);
    return { props: f };
  }
  return a && (r = ws(a, c())), {
    c() {
      e = j("div"), n = j("input"), i = Q(), r && me(r.$$.fragment), b(n, "type", "text"), n.readOnly = !0, b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-1r8q3m8"), b(e, "class", "jse-absolute-popup-content svelte-1r8q3m8"), b(e, "style", s = hw(t[1], t[0].options));
    },
    m(u, f) {
      U(u, e, f), E(e, n), t[7](n), E(e, i), r && pe(r, e, null), o = !0;
    },
    p(u, f) {
      const h = f & 1 ? Ul(l, [rp(u[0].props)]) : {};
      if (a !== (a = u[0].component)) {
        if (r) {
          Se();
          const d = r;
          x(d.$$.fragment, 1, 0, () => {
            ge(d, 1);
          }), Ee();
        }
        a ? (r = ws(a, c()), me(r.$$.fragment), P(r.$$.fragment, 1), pe(r, e, null)) : r = null;
      } else
        a && r.$set(h);
      (!o || f & 3 && s !== (s = hw(u[1], u[0].options))) && b(e, "style", s);
    },
    i(u) {
      o || (r && P(r.$$.fragment, u), o = !0);
    },
    o(u) {
      r && x(r.$$.fragment, u), o = !1;
    },
    d(u) {
      u && V(e), t[7](null), r && ge(r);
    }
  };
}
function xj(t) {
  let e, n, i, r, s = t[1] && fw(t);
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "jse-absolute-popup svelte-1r8q3m8");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), t[8](e), n = !0, i || (r = [
        se(Pg, "mousedown", t[3], !0),
        se(Pg, "keydown", t[4], !0),
        se(Pg, "wheel", t[5], !0),
        se(e, "mousedown", Fj),
        se(e, "keydown", t[4])
      ], i = !0);
    },
    p(o, [l]) {
      o[1] ? s ? (s.p(o, l), l & 2 && P(s, 1)) : (s = fw(o), s.c(), P(s, 1), s.m(e, null)) : s && (Se(), x(s, 1, 1, () => {
        s = null;
      }), Ee());
    },
    i(o) {
      n || (P(s), n = !0);
    },
    o(o) {
      x(s), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(), t[8](null), i = !1, ht(r);
    }
  };
}
function Fj(t) {
  t.stopPropagation();
}
function hw(t, e) {
  function n() {
    if (e.anchor) {
      const { anchor: u, width: f = 0, height: h = 0, offsetTop: d = 0, offsetLeft: p = 0, position: g } = e, { left: _, top: m, bottom: C, right: v } = u.getBoundingClientRect(), k = g === "top" || m + h > window.innerHeight && m > h, S = g === "left" || _ + f > window.innerWidth && _ > f;
      return {
        left: S ? v - p : _ + p,
        top: k ? m - d : C + d,
        positionAbove: k,
        positionLeft: S
      };
    } else if (typeof e.left == "number" && typeof e.top == "number") {
      const { left: u, top: f, width: h = 0, height: d = 0 } = e, p = f + d > window.innerHeight && f > d, g = u + h > window.innerWidth && u > h;
      return { left: u, top: f, positionAbove: p, positionLeft: g };
    } else
      throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"');
  }
  const i = t.getBoundingClientRect(), { left: r, top: s, positionAbove: o, positionLeft: l } = n(), a = o ? `bottom: ${i.top - s}px;` : `top: ${s - i.top}px;`, c = l ? `right: ${i.left - r}px;` : `left: ${r - i.left}px;`;
  return a + c;
}
function zj(t, e, n) {
  let { popup: i } = e, { closeAbsolutePopup: r } = e, s, o;
  or(f);
  function l(p) {
    i.options && i.options.closeOnOuterClick && !Vu(p.target, (g) => g === s) && r(i.id);
  }
  function a(p) {
    l(p);
  }
  function c(p) {
    Yo(p) === "Escape" && r(i.id);
  }
  function u(p) {
    l(p);
  }
  function f() {
    o && o.focus();
  }
  function h(p) {
    yt[p ? "unshift" : "push"](() => {
      o = p, n(2, o);
    });
  }
  function d(p) {
    yt[p ? "unshift" : "push"](() => {
      s = p, n(1, s);
    });
  }
  return t.$$set = (p) => {
    "popup" in p && n(0, i = p.popup), "closeAbsolutePopup" in p && n(6, r = p.closeAbsolutePopup);
  }, [
    i,
    s,
    o,
    a,
    c,
    u,
    r,
    h,
    d
  ];
}
class Vj extends Qe {
  constructor(e) {
    super(), Xe(this, e, zj, xj, xt, { popup: 0, closeAbsolutePopup: 6 });
  }
}
const Uj = Vj;
function dw(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function pw(t) {
  let e, n;
  return e = new Uj({
    props: {
      popup: t[6],
      closeAbsolutePopup: t[1]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.popup = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Hj(t) {
  let e, n, i = t[0], r = [];
  for (let a = 0; a < i.length; a += 1)
    r[a] = pw(dw(t, i, a));
  const s = (a) => x(r[a], 1, 1, () => {
    r[a] = null;
  }), o = t[3].default, l = Vn(o, t, t[2], null);
  return {
    c() {
      for (let a = 0; a < r.length; a += 1)
        r[a].c();
      e = Q(), l && l.c();
    },
    m(a, c) {
      for (let u = 0; u < r.length; u += 1)
        r[u].m(a, c);
      U(a, e, c), l && l.m(a, c), n = !0;
    },
    p(a, [c]) {
      if (c & 3) {
        i = a[0];
        let u;
        for (u = 0; u < i.length; u += 1) {
          const f = dw(a, i, u);
          r[u] ? (r[u].p(f, c), P(r[u], 1)) : (r[u] = pw(f), r[u].c(), P(r[u], 1), r[u].m(e.parentNode, e));
        }
        for (Se(), u = i.length; u < r.length; u += 1)
          s(u);
        Ee();
      }
      l && l.p && (!n || c & 4) && Hn(
        l,
        o,
        a,
        a[2],
        n ? Un(o, a[2], c, null) : Wn(a[2]),
        null
      );
    },
    i(a) {
      if (!n) {
        for (let c = 0; c < i.length; c += 1)
          P(r[c]);
        P(l, a), n = !0;
      }
    },
    o(a) {
      r = r.filter(Boolean);
      for (let c = 0; c < r.length; c += 1)
        x(r[c]);
      x(l, a), n = !1;
    },
    d(a) {
      Vt(r, a), a && V(e), l && l.d(a);
    }
  };
}
function Wj(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const s = mi("jsoneditor:AbsolutePopup");
  let o = [];
  function l(c, u, f) {
    s("open...", u, f);
    const h = {
      id: Nc(),
      component: c,
      props: u || {},
      options: f || {}
    };
    return n(0, o = [...o, h]), h.id;
  }
  function a(c) {
    const u = o.findIndex((f) => f.id === c);
    if (u !== -1) {
      const f = o[u];
      f.options.onClose && f.options.onClose(), n(0, o = o.filter((h) => h.id !== c));
    }
  }
  return U4("absolute-popup", { openAbsolutePopup: l, closeAbsolutePopup: a }), t.$$set = (c) => {
    "$$scope" in c && n(2, r = c.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && s("popups", o);
  }, [o, a, r, i];
}
class qj extends Qe {
  constructor(e) {
    super(), Xe(this, e, Wj, Hj, wt, {});
  }
}
const l6 = qj;
function qi(t) {
  return "$" + t.map(Jj).join("");
}
function Jj(t) {
  if (c6.test(t))
    return "[" + t + "]";
  if (a6.test(t))
    return "." + t;
  {
    const e = JSON.stringify(t);
    return "['" + e.substring(1, e.length - 1).replace(/\\"/g, '"') + "']";
  }
}
function wr(t) {
  return t.replace(/^\$/, "").replace(/^\./, "");
}
function Kj(t) {
  return t.startsWith("$") ? t : !t.startsWith("[") && !t.startsWith(".") ? "$." + t : "$" + t;
}
function Gj(t) {
  let e = Kj(t.trim()).substring(1);
  const n = [];
  for (; e.length > 0; ) {
    const i = e.match(Zj);
    if (!i)
      throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${t.length - e.length}`);
    n.push(i[1] || i[2] || i[3]), e = e.substring(i[0].length);
  }
  return n;
}
const Yj = "^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)", Xj = "^\\[([0-9]+)]", Qj = "^\\['(.*)']", Zj = new RegExp([Yj, Xj, Qj].join("|"));
function na(t) {
  return {
    value: t,
    label: Pt(t) ? "(whole item)" : wr(qi(t))
  };
}
function ol(t) {
  return t.map((e) => c6.test(e) ? `?.[${e}]` : a6.test(e) ? `?.${e}` : `?.[${JSON.stringify(e)}]`).join("");
}
const a6 = /^[a-zA-Z$_][a-zA-Z$_\d]*$/, c6 = /^\d+$/;
function $j() {
  return gp((t) => t, qi);
}
function Uu(t, e) {
  const n = new Set(e), i = t.replace(/ \(copy( \d+)?\)$/, "");
  let r = t, s = 1;
  for (; n.has(r); ) {
    const o = "copy" + (s > 1 ? " " + s : "");
    r = `${i} (${o})`, s++;
  }
  return r;
}
function ks(t, e) {
  const n = "...", i = e - n.length;
  return t.length > e ? t.substring(0, i) + n : t;
}
function eB(t) {
  if (t === "")
    return "";
  const e = t.toLowerCase();
  if (e === "null")
    return null;
  if (e === "true")
    return !0;
  if (e === "false")
    return !1;
  if (e === "undefined")
    return;
  const n = Number(t), i = parseFloat(t);
  return !isNaN(n) && !isNaN(i) ? n : t;
}
const tB = `
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`, nB = {
  id: "javascript",
  name: "JavaScript",
  description: tB,
  createQuery: iB,
  executeQuery: rB
};
function iB(t, e) {
  const { filter: n, sort: i, projection: r } = e, s = [];
  if (n && n.path && n.relation && n.value) {
    const o = `item => item${ol(n.path)}`, l = eB(n.value), a = typeof l == "string" ? `'${n.value}'` : $P(n.value) && !Number.isSafeInteger(l) ? `${n.value}n` : n.value;
    s.push(`  data = data.filter(${o} ${n.relation} ${a})
`);
  }
  if (i && i.path && i.direction && (i.direction === "desc" ? s.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${ol(i.path)}
    const valueB = b${ol(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`) : s.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${ol(i.path)}
    const valueB = b${ol(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)), r && r.paths)
    if (r.paths.length > 1) {
      const o = r.paths.map((l) => {
        const a = l[l.length - 1] || "item", c = `item${ol(l)}`;
        return `    ${JSON.stringify(a)}: ${c}`;
      });
      s.push(`  data = data.map(item => ({
${o.join(`,
`)}})
  )
`);
    } else {
      const o = `item${ol(r.paths[0])}`;
      s.push(`  data = data.map(item => ${o})
`);
    }
  return s.push(`  return data
`), `function query (data) {
${s.join("")}}`;
}
function rB(t, e) {
  const i = new Function(`"use strict";

` + e + `

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(t);
  return i !== void 0 ? i : null;
}
var sB = {
  prefix: "far",
  iconName: "lightbulb",
  icon: [384, 512, [128161], "f0eb", "M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]
}, oB = {
  prefix: "far",
  iconName: "square-check",
  icon: [448, 512, [9745, 9989, 61510, "check-square"], "f14a", "M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]
}, nu = oB, iu = {
  prefix: "far",
  iconName: "square",
  icon: [448, 512, [9632, 9723, 9724, 61590], "f0c8", "M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]
}, lB = {
  prefix: "far",
  iconName: "clock",
  icon: [512, 512, [128339, "clock-four"], "f017", "M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]
};
function aB(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Go(i, n[r]);
  return {
    c() {
      e = bt("path"), Bh(e, i);
    },
    m(r, s) {
      U(r, e, s);
    },
    p(r, [s]) {
      Bh(e, i = Ul(n, [s & 1 && r[0]]));
    },
    i: ve,
    o: ve,
    d(r) {
      r && V(e);
    }
  };
}
function cB(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class uB extends Qe {
  constructor(e) {
    super(), Xe(this, e, cB, aB, xt, { data: 0 });
  }
}
function fB(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Go(i, n[r]);
  return {
    c() {
      e = bt("polygon"), Bh(e, i);
    },
    m(r, s) {
      U(r, e, s);
    },
    p(r, [s]) {
      Bh(e, i = Ul(n, [s & 1 && r[0]]));
    },
    i: ve,
    o: ve,
    d(r) {
      r && V(e);
    }
  };
}
function hB(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class dB extends Qe {
  constructor(e) {
    super(), Xe(this, e, hB, fB, xt, { data: 0 });
  }
}
function pB(t) {
  let e;
  return {
    c() {
      e = bt("g");
    },
    m(n, i) {
      U(n, e, i), e.innerHTML = t[0];
    },
    p(n, [i]) {
      i & 1 && (e.innerHTML = n[0]);
    },
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function gB(t, e, n) {
  let i = 870711;
  function r() {
    return i += 1, `fa-${i.toString(16)}`;
  }
  let s, { data: o } = e;
  function l(a) {
    if (!a || !a.raw)
      return null;
    let c = a.raw;
    const u = {};
    return c = c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g, (f, h) => {
      const d = r();
      return u[h] = d, ` id="${d}"`;
    }), c = c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g, (f, h, d, p) => {
      const g = h || p;
      return !g || !u[g] ? f : `#${u[g]}`;
    }), c;
  }
  return t.$$set = (a) => {
    "data" in a && n(1, o = a.data);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(0, s = l(o));
  }, [s, o];
}
class mB extends Qe {
  constructor(e) {
    super(), Xe(this, e, gB, pB, xt, { data: 1 });
  }
}
function bB(t) {
  let e, n, i, r;
  const s = t[13].default, o = Vn(s, t, t[12], null);
  return {
    c() {
      e = bt("svg"), o && o.c(), b(e, "version", "1.1"), b(e, "class", n = "fa-icon " + t[0] + " svelte-1dof0an"), b(e, "x", t[8]), b(e, "y", t[9]), b(e, "width", t[1]), b(e, "height", t[2]), b(e, "aria-label", t[11]), b(e, "role", i = t[11] ? "img" : "presentation"), b(e, "viewBox", t[3]), b(e, "style", t[10]), Ce(e, "fa-spin", t[4]), Ce(e, "fa-pulse", t[6]), Ce(e, "fa-inverse", t[5]), Ce(e, "fa-flip-horizontal", t[7] === "horizontal"), Ce(e, "fa-flip-vertical", t[7] === "vertical");
    },
    m(l, a) {
      U(l, e, a), o && o.m(e, null), r = !0;
    },
    p(l, [a]) {
      o && o.p && (!r || a & 4096) && Hn(
        o,
        s,
        l,
        l[12],
        r ? Un(s, l[12], a, null) : Wn(l[12]),
        null
      ), (!r || a & 1 && n !== (n = "fa-icon " + l[0] + " svelte-1dof0an")) && b(e, "class", n), (!r || a & 256) && b(e, "x", l[8]), (!r || a & 512) && b(e, "y", l[9]), (!r || a & 2) && b(e, "width", l[1]), (!r || a & 4) && b(e, "height", l[2]), (!r || a & 2048) && b(e, "aria-label", l[11]), (!r || a & 2048 && i !== (i = l[11] ? "img" : "presentation")) && b(e, "role", i), (!r || a & 8) && b(e, "viewBox", l[3]), (!r || a & 1024) && b(e, "style", l[10]), (!r || a & 17) && Ce(e, "fa-spin", l[4]), (!r || a & 65) && Ce(e, "fa-pulse", l[6]), (!r || a & 33) && Ce(e, "fa-inverse", l[5]), (!r || a & 129) && Ce(e, "fa-flip-horizontal", l[7] === "horizontal"), (!r || a & 129) && Ce(e, "fa-flip-vertical", l[7] === "vertical");
    },
    i(l) {
      r || (P(o, l), r = !0);
    },
    o(l) {
      x(o, l), r = !1;
    },
    d(l) {
      l && V(e), o && o.d(l);
    }
  };
}
function _B(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: s } = e, { width: o } = e, { height: l } = e, { box: a } = e, { spin: c = !1 } = e, { inverse: u = !1 } = e, { pulse: f = !1 } = e, { flip: h = null } = e, { x: d = void 0 } = e, { y: p = void 0 } = e, { style: g = void 0 } = e, { label: _ = void 0 } = e;
  return t.$$set = (m) => {
    "class" in m && n(0, s = m.class), "width" in m && n(1, o = m.width), "height" in m && n(2, l = m.height), "box" in m && n(3, a = m.box), "spin" in m && n(4, c = m.spin), "inverse" in m && n(5, u = m.inverse), "pulse" in m && n(6, f = m.pulse), "flip" in m && n(7, h = m.flip), "x" in m && n(8, d = m.x), "y" in m && n(9, p = m.y), "style" in m && n(10, g = m.style), "label" in m && n(11, _ = m.label), "$$scope" in m && n(12, r = m.$$scope);
  }, [
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    r,
    i
  ];
}
class yB extends Qe {
  constructor(e) {
    super(), Xe(this, e, _B, bB, xt, {
      class: 0,
      width: 1,
      height: 2,
      box: 3,
      spin: 4,
      inverse: 5,
      pulse: 6,
      flip: 7,
      x: 8,
      y: 9,
      style: 10,
      label: 11
    });
  }
}
function gw(t, e, n) {
  const i = t.slice();
  return i[24] = e[n], i;
}
function mw(t, e, n) {
  const i = t.slice();
  return i[27] = e[n], i;
}
function bw(t) {
  let e, n, i, r, s = t[6].paths && _w(t), o = t[6].polygons && ww(t), l = t[6].raw && kw(t);
  return {
    c() {
      s && s.c(), e = Q(), o && o.c(), n = Q(), l && l.c(), i = ot();
    },
    m(a, c) {
      s && s.m(a, c), U(a, e, c), o && o.m(a, c), U(a, n, c), l && l.m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      a[6].paths ? s ? (s.p(a, c), c & 64 && P(s, 1)) : (s = _w(a), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Se(), x(s, 1, 1, () => {
        s = null;
      }), Ee()), a[6].polygons ? o ? (o.p(a, c), c & 64 && P(o, 1)) : (o = ww(a), o.c(), P(o, 1), o.m(n.parentNode, n)) : o && (Se(), x(o, 1, 1, () => {
        o = null;
      }), Ee()), a[6].raw ? l ? (l.p(a, c), c & 64 && P(l, 1)) : (l = kw(a), l.c(), P(l, 1), l.m(i.parentNode, i)) : l && (Se(), x(l, 1, 1, () => {
        l = null;
      }), Ee());
    },
    i(a) {
      r || (P(s), P(o), P(l), r = !0);
    },
    o(a) {
      x(s), x(o), x(l), r = !1;
    },
    d(a) {
      s && s.d(a), a && V(e), o && o.d(a), a && V(n), l && l.d(a), a && V(i);
    }
  };
}
function _w(t) {
  let e, n, i = t[6].paths, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = yw(mw(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l & 64) {
        i = o[6].paths;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = mw(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = yw(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function yw(t) {
  let e, n;
  return e = new uB({ props: { data: t[27] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.data = i[27]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function ww(t) {
  let e, n, i = t[6].polygons, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = vw(gw(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l & 64) {
        i = o[6].polygons;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = gw(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = vw(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function vw(t) {
  let e, n;
  return e = new dB({ props: { data: t[24] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.data = i[24]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function kw(t) {
  let e, n, i;
  function r(o) {
    t[15](o);
  }
  let s = {};
  return t[6] !== void 0 && (s.data = t[6]), e = new mB({ props: s }), yt.push(() => Pr(e, "data", r, t[6])), {
    c() {
      me(e.$$.fragment);
    },
    m(o, l) {
      pe(e, o, l), i = !0;
    },
    p(o, l) {
      const a = {};
      !n && l & 64 && (n = !0, a.data = o[6], Rr(() => n = !1)), e.$set(a);
    },
    i(o) {
      i || (P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      ge(e, o);
    }
  };
}
function wB(t) {
  let e, n, i = t[6] && bw(t);
  return {
    c() {
      i && i.c(), e = ot();
    },
    m(r, s) {
      i && i.m(r, s), U(r, e, s), n = !0;
    },
    p(r, s) {
      r[6] ? i ? (i.p(r, s), s & 64 && P(i, 1)) : (i = bw(r), i.c(), P(i, 1), i.m(e.parentNode, e)) : i && (Se(), x(i, 1, 1, () => {
        i = null;
      }), Ee());
    },
    i(r) {
      n || (P(i), n = !0);
    },
    o(r) {
      x(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && V(e);
    }
  };
}
function vB(t) {
  let e;
  const n = t[14].default, i = Vn(n, t, t[16], null), r = i || wB(t);
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i ? i.p && (!e || o & 65536) && Hn(
        i,
        n,
        s,
        s[16],
        e ? Un(n, s[16], o, null) : Wn(s[16]),
        null
      ) : r && r.p && (!e || o & 64) && r.p(s, e ? o : -1);
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function kB(t) {
  let e, n;
  return e = new yB({
    props: {
      label: t[5],
      width: t[7],
      height: t[8],
      box: t[10],
      style: t[9],
      spin: t[1],
      flip: t[4],
      inverse: t[2],
      pulse: t[3],
      class: t[0],
      $$slots: { default: [vB] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 32 && (s.label = i[5]), r & 128 && (s.width = i[7]), r & 256 && (s.height = i[8]), r & 1024 && (s.box = i[10]), r & 512 && (s.style = i[9]), r & 2 && (s.spin = i[1]), r & 16 && (s.flip = i[4]), r & 4 && (s.inverse = i[2]), r & 8 && (s.pulse = i[3]), r & 1 && (s.class = i[0]), r & 65600 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
let Cw = 1;
function CB(t) {
  if ("iconName" in t && "icon" in t) {
    let e = {}, n = t.icon, i = t.iconName, r = n[0], s = n[1], o = n[4], l = { width: r, height: s, paths: [{ d: o }] };
    return e[i] = l, e;
  }
  return t;
}
function SB(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: s = "" } = e, { data: o } = e, { scale: l = 1 } = e, { spin: a = !1 } = e, { inverse: c = !1 } = e, { pulse: u = !1 } = e, { flip: f = null } = e, { label: h = null } = e, d = null, { style: p = null } = e, g, _, m, C;
  function v() {
    if (typeof o > "u")
      return;
    const M = CB(o), [H] = Object.keys(M), J = M[H];
    J.paths || (J.paths = []), J.d && J.paths.push({ d: J.d }), J.polygons || (J.polygons = []), J.points && J.polygons.push({ points: J.points }), n(6, d = J);
  }
  function k() {
    let M = 1;
    return typeof l < "u" && (M = Number(l)), isNaN(M) || M <= 0 ? (console.warn('Invalid prop: prop "scale" should be a number over 0.'), Cw) : M * Cw;
  }
  function S() {
    return d ? `0 0 ${d.width} ${d.height}` : `0 0 ${g} ${_}`;
  }
  function O() {
    return d ? Math.max(d.width, d.height) / 16 : 1;
  }
  function w() {
    return d ? d.width / O() * k() : 0;
  }
  function A() {
    return d ? d.height / O() * k() : 0;
  }
  function D() {
    let M = "";
    p !== null && (M += p);
    let H = k();
    return H === 1 ? M.length === 0 ? void 0 : M : (M !== "" && !M.endsWith(";") && (M += "; "), `${M}font-size: ${H}em`);
  }
  function R(M) {
    d = M, n(6, d);
  }
  return t.$$set = (M) => {
    "class" in M && n(0, s = M.class), "data" in M && n(11, o = M.data), "scale" in M && n(12, l = M.scale), "spin" in M && n(1, a = M.spin), "inverse" in M && n(2, c = M.inverse), "pulse" in M && n(3, u = M.pulse), "flip" in M && n(4, f = M.flip), "label" in M && n(5, h = M.label), "style" in M && n(13, p = M.style), "$$scope" in M && n(16, r = M.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 14336 && (v(), n(7, g = w()), n(8, _ = A()), n(9, m = D()), n(10, C = S()));
  }, [
    s,
    a,
    c,
    u,
    f,
    h,
    d,
    g,
    _,
    m,
    C,
    o,
    l,
    p,
    i,
    R,
    r
  ];
}
class Mt extends Qe {
  constructor(e) {
    super(), Xe(this, e, SB, kB, xt, {
      class: 0,
      data: 11,
      scale: 12,
      spin: 1,
      inverse: 2,
      pulse: 3,
      flip: 4,
      label: 5,
      style: 13
    });
  }
}
function EB(t) {
  let e, n, i, r, s, o;
  return n = new Mt({
    props: {
      data: t[0] === !0 ? nu : iu
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-boolean-toggle svelte-1vj58yv"), b(e, "title", i = t[1] ? `Boolean value ${t[0]}` : "Click to toggle this boolean value"), Ce(e, "jse-readonly", t[1]);
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), r = !0, s || (o = se(e, "mousedown", t[2]), s = !0);
    },
    p(l, [a]) {
      const c = {};
      a & 1 && (c.data = l[0] === !0 ? nu : iu), n.$set(c), (!r || a & 3 && i !== (i = l[1] ? `Boolean value ${l[0]}` : "Click to toggle this boolean value")) && b(e, "title", i), (!r || a & 2) && Ce(e, "jse-readonly", l[1]);
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n), s = !1, o();
    }
  };
}
function AB(t, e, n) {
  let { path: i } = e, { value: r } = e, { readOnly: s } = e, { onPatch: o } = e, { focus: l } = e;
  function a(c) {
    c.stopPropagation(), !s && (o([
      {
        op: "replace",
        path: Be(i),
        value: !r
      }
    ]), setTimeout(l));
  }
  return t.$$set = (c) => {
    "path" in c && n(3, i = c.path), "value" in c && n(0, r = c.value), "readOnly" in c && n(1, s = c.readOnly), "onPatch" in c && n(4, o = c.onPatch), "focus" in c && n(5, l = c.focus);
  }, [r, s, a, i, o, l];
}
class MB extends Qe {
  constructor(e) {
    super(), Xe(this, e, AB, EB, wt, {
      path: 3,
      value: 0,
      readOnly: 1,
      onPatch: 4,
      focus: 5
    });
  }
}
const OB = MB;
function TB(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-color-picker-popup svelte-1gn8yt9");
    },
    m(n, i) {
      U(n, e, i), t[4](e);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e), t[4](null);
    }
  };
}
function RB(t, e, n) {
  let { color: i } = e, { onChange: r } = e, { showOnTop: s } = e, o, l;
  or(async () => {
    const c = (await import("./vanilla-picker-b99e900d.js")).default;
    l = new c({
      parent: o,
      color: i,
      popup: s ? "top" : "bottom",
      onDone(u) {
        const h = u.rgba[3] === 1 ? u.hex.substring(0, 7) : u.hex;
        r(h);
      }
    }), l.show();
  }), vs(() => {
    l && l.destroy();
  });
  function a(c) {
    yt[c ? "unshift" : "push"](() => {
      o = c, n(0, o);
    });
  }
  return t.$$set = (c) => {
    "color" in c && n(1, i = c.color), "onChange" in c && n(2, r = c.onChange), "showOnTop" in c && n(3, s = c.showOnTop);
  }, [o, i, r, s, a];
}
class PB extends Qe {
  constructor(e) {
    super(), Xe(this, e, RB, TB, xt, { color: 1, onChange: 2, showOnTop: 3 });
  }
}
const IB = PB;
function DB(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), b(e, "type", "button"), b(e, "class", "jse-color-picker-button svelte-1nv0s05"), Li(e, "background", t[2]), b(e, "title", n = t[1] ? `Color ${t[0]}` : "Click to open a color picker"), Ce(e, "jse-readonly", t[1]);
    },
    m(s, o) {
      U(s, e, o), i || (r = se(e, "click", t[3]), i = !0);
    },
    p(s, [o]) {
      o & 4 && Li(e, "background", s[2]), o & 3 && n !== (n = s[1] ? `Color ${s[0]}` : "Click to open a color picker") && b(e, "title", n), o & 2 && Ce(e, "jse-readonly", s[1]);
    },
    i: ve,
    o: ve,
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function NB(t, e, n) {
  let i;
  const { openAbsolutePopup: r } = gi("absolute-popup");
  let { path: s } = e, { value: o } = e, { readOnly: l } = e, { onPatch: a } = e, { focus: c } = e;
  function u(d) {
    a([
      {
        op: "replace",
        path: Be(s),
        value: d
      }
    ]), f();
  }
  function f() {
    c();
  }
  function h(d) {
    if (l)
      return;
    const p = 300, g = d.target.getBoundingClientRect().top, m = sc(d.target).innerHeight - g < p && g > p;
    r(IB, { color: o, onChange: u, showOnTop: m }, {
      anchor: d.target,
      closeOnOuterClick: !0,
      onClose: f,
      offsetTop: 18,
      offsetLeft: -8,
      height: p
    });
  }
  return t.$$set = (d) => {
    "path" in d && n(4, s = d.path), "value" in d && n(0, o = d.value), "readOnly" in d && n(1, l = d.readOnly), "onPatch" in d && n(5, a = d.onPatch), "focus" in d && n(6, c = d.focus);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = h5(o));
  }, [o, l, i, h, s, a, c];
}
class LB extends Qe {
  constructor(e) {
    super(), Xe(this, e, NB, DB, wt, {
      path: 4,
      value: 0,
      readOnly: 1,
      onPatch: 5,
      focus: 6
    });
  }
}
const jB = LB;
function BB(t, e) {
  const n = {
    start: t,
    end: Math.min(e1(t), e)
  }, i = Math.max(Xh((t + e) / 2), t), r = {
    start: i,
    end: Math.min(e1(i), e)
  }, s = Xh(e), o = s === e ? s - Yc : s, l = {
    start: Math.max(o, t),
    end: e
  }, a = [n], c = r.start >= n.end && r.end <= l.start;
  return c && a.push(r), l.start >= (c ? r.end : n.end) && a.push(l), a;
}
function u6(t) {
  const e = aj(t, (i) => i.start), n = [e[0]];
  for (let i = 0; i < e.length; i++) {
    const r = n.length - 1, s = n[r], o = e[i];
    o.start <= s.end ? n[r] = {
      start: Math.min(s.start, o.start),
      end: Math.max(s.end, o.end)
    } : n.push(o);
  }
  return n;
}
function xB(t, e) {
  return t.some((n) => e >= n.start && e < n.end);
}
function e1(t) {
  return Xh(t) + Yc;
}
function Xh(t) {
  return Math.floor(t / Yc) * Yc;
}
function Qh(t) {
  let e = {
    expandedMap: {},
    enforceStringMap: {},
    visibleSectionsMap: {},
    selection: void 0,
    sortedColumn: void 0
  };
  return t != null && t.select && (e = {
    ...e,
    selection: t.select(t.json, e)
  }), t != null && t.expand && (e = ur(t.json, e, [], t.expand)), e;
}
function kp(t, e) {
  return t.visibleSectionsMap[e] || El;
}
function X0(t, e, n) {
  e.forEach(({ start: i, end: r }) => {
    J5(i, Math.min(t.length, r), n);
  });
}
function t1(t, e, n) {
  const i = { ...e.expandedMap }, r = { ...e.visibleSectionsMap };
  for (let s = 0; s <= n.length; s++) {
    const o = n.slice(0, s), l = Be(o), a = Ze(t, o);
    if (dn(a) && (i[l] = !0), Array.isArray(a) && s < n.length) {
      const c = r[l] || El, u = Jn(n[s]);
      if (!xB(c, u)) {
        const f = Xh(u), h = e1(f), d = { start: f, end: h };
        r[l] = u6(c.concat(d));
      }
    }
  }
  return {
    ...e,
    expandedMap: i,
    visibleSectionsMap: r
  };
}
function ur(t, e, n, i) {
  const r = { ...e.expandedMap };
  function s(l) {
    const a = o.length;
    if (Array.isArray(l)) {
      if (i(o)) {
        const c = Be(o);
        if (r[c] = !0, l.length > 0) {
          const u = kp(e, c);
          X0(l, u, (f) => {
            o[a] = String(f), s(l[f]);
          }), o.pop();
        }
      }
    } else if (Cn(l) && i(o)) {
      r[Be(o)] = !0;
      const c = Object.keys(l);
      if (c.length > 0) {
        for (const u of c)
          o[a] = u, s(l[u]);
        o.pop();
      }
    }
  }
  const o = n.slice();
  return s(Ze(t, n)), {
    ...e,
    expandedMap: r
  };
}
function FB(t, e) {
  return {
    ...t,
    expandedMap: {
      ...t.expandedMap,
      [Be(e)]: !0
    }
  };
}
function f6(t, e) {
  const n = da(t.expandedMap, e), i = da(t.enforceStringMap, e), r = da(t.visibleSectionsMap, e);
  return {
    ...t,
    expandedMap: n,
    enforceStringMap: i,
    visibleSectionsMap: r
  };
}
function h6(t, e, n) {
  if (n) {
    const i = { ...t.enforceStringMap };
    return i[e] = n, {
      ...t,
      enforceStringMap: i
    };
  } else if (typeof t.enforceStringMap[e] == "boolean") {
    const i = { ...t.enforceStringMap };
    return delete i[e], {
      ...t,
      enforceStringMap: i
    };
  } else
    return t;
}
function zB(t, e, n, i) {
  return {
    ...e,
    visibleSectionsMap: {
      ...e.visibleSectionsMap,
      [n]: u6(kp(e, n).concat(i))
    }
  };
}
function d6(t, e, n) {
  const i = Fr(t, n), r = n.reduce((s, o) => Z4(o) ? p6(i, s, o) : $4(o) ? g6(i, s, o) : M0(o) ? VB(i, s, o) : jm(o) || Ma(o) ? UB(i, s, o) : s, e);
  return {
    json: i,
    documentState: r
  };
}
function p6(t, e, n) {
  const i = as(t, n.path), r = At(i), s = Be(r), o = Ze(t, r);
  if (qt(o)) {
    const l = Jn(ft(i)), a = pa(e.expandedMap, r, l, 1), c = pa(e.enforceStringMap, r, l, 1);
    let u = pa(e.visibleSectionsMap, r, l, 1);
    return u = m6(u, s, (f) => b6(f, l, 1)), {
      ...e,
      expandedMap: a,
      enforceStringMap: c,
      visibleSectionsMap: u
    };
  }
  return e;
}
function g6(t, e, n) {
  const i = as(t, n.path), r = At(i), s = Be(r), o = Ze(t, r);
  let { expandedMap: l, enforceStringMap: a, visibleSectionsMap: c } = e;
  if (l = da(l, i), a = da(a, i), c = da(c, i), qt(o)) {
    const u = Jn(ft(i));
    l = pa(l, r, u, -1), a = pa(a, r, u, -1), c = pa(c, r, u, -1), c = m6(c, s, (f) => b6(f, u, -1));
  }
  return {
    ...e,
    expandedMap: l,
    enforceStringMap: a,
    visibleSectionsMap: c
  };
}
function VB(t, e, n) {
  const i = n.path, r = Lg(t, e.expandedMap), s = Lg(t, e.enforceStringMap), o = Lg(t, e.visibleSectionsMap);
  return !En(n.value) && !qt(n.value) && delete r[i], qt(n.value) || delete o[i], (En(n.value) || qt(n.value)) && delete s[i], {
    ...e,
    expandedMap: r,
    enforceStringMap: s,
    visibleSectionsMap: o
  };
}
function UB(t, e, n) {
  if (Ma(n) && n.from === n.path)
    return e;
  const i = (f) => n.path + f.substring(n.from.length), r = Ng(Ig(e.expandedMap, n.from), i), s = Ng(Ig(e.enforceStringMap, n.from), i), o = Ng(Ig(e.visibleSectionsMap, n.from), i);
  let l = e;
  Ma(n) && (l = g6(t, l, {
    op: "remove",
    path: n.from
  })), l = p6(t, l, {
    op: "add",
    path: n.path,
    value: null
  });
  const a = Dg(l.expandedMap, r), c = Dg(l.enforceStringMap, s), u = Dg(l.visibleSectionsMap, o);
  return {
    ...e,
    expandedMap: a,
    enforceStringMap: c,
    visibleSectionsMap: u
  };
}
function da(t, e) {
  const n = {}, i = Be(e);
  return Object.keys(t).forEach((r) => {
    Oa(r, i) || (n[r] = t[r]);
  }), n;
}
function Ig(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    Oa(i, e) && (n[i] = t[i]);
  }), n;
}
function Dg(t, e) {
  return { ...t, ...e };
}
function Ng(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    const r = e(i);
    n[r] = t[i];
  }), n;
}
function pa(t, e, n, i) {
  const r = e.length, s = Be(e), o = [];
  for (const a of Object.keys(t))
    if (Oa(a, s)) {
      const c = zr(a), u = Jn(c[r]);
      u >= n && (c[r] = String(u + i), o.push({
        oldPointer: a,
        newPointer: Be(c),
        value: t[a]
      }));
    }
  if (o.length === 0)
    return t;
  const l = { ...t };
  return o.forEach((a) => {
    delete l[a.oldPointer];
  }), o.forEach((a) => {
    l[a.newPointer] = a.value;
  }), l;
}
function Lg(t, e) {
  const n = {};
  return Object.keys(e).filter((i) => mr(t, as(t, i))).forEach((i) => {
    n[i] = e[i];
  }), n;
}
function m6(t, e, n) {
  const i = t[e];
  if (e in t) {
    const r = n(i);
    if (!Ot(i, r)) {
      const s = { ...t };
      return r === void 0 ? delete s[e] : s[e] = r, s;
    }
  }
  return t;
}
function b6(t, e, n) {
  return t.map((i) => ({
    start: i.start > e ? i.start + n : i.start,
    end: i.end >= e ? i.end + n : i.end
  }));
}
function Xs(t, e, n, i) {
  const r = e ? e[n] : void 0;
  return typeof r == "boolean" ? r : ZP(t, i);
}
function Hu(t, e, n = !1) {
  const i = t.indexOf(e);
  return i !== -1 ? n ? t.slice(i) : t.slice(i + 1) : [];
}
function Q0(t, e) {
  const n = [];
  function i(r, s) {
    n.push(s);
    const o = Be(s);
    if (r && e.expandedMap[o] === !0) {
      if (qt(r)) {
        const l = kp(e, o);
        X0(r, l, (a) => {
          i(r[a], s.concat(String(a)));
        });
      }
      En(r) && Object.keys(r).forEach((l) => {
        i(r[l], s.concat(l));
      });
    }
  }
  return i(t, []), n;
}
function _6(t, e, n = !0) {
  const i = [];
  function r(s, o) {
    i.push({ path: o, type: Ir.value });
    const l = Be(o);
    if (s && e.expandedMap[l] === !0) {
      if (n && i.push({ path: o, type: Ir.inside }), qt(s)) {
        const a = kp(e, l);
        X0(s, a, (c) => {
          const u = o.concat(String(c));
          r(s[c], u), n && i.push({ path: u, type: Ir.after });
        });
      }
      En(s) && Object.keys(s).forEach((c) => {
        const u = o.concat(c);
        i.push({ path: u, type: Ir.key }), r(s[c], u), n && i.push({ path: u, type: Ir.after });
      });
    }
  }
  return r(t, []), i;
}
function HB(t, e, n) {
  const i = Q0(t, e), r = i.map(Be), s = Be(n), o = r.indexOf(s);
  return o !== -1 && o > 0 ? i[o - 1] : null;
}
function n1(t, e, n) {
  const i = Q0(t, e), s = i.map(Be).indexOf(Be(n));
  return s !== -1 && s < i.length - 1 ? i[s + 1] : null;
}
function yo(t, e, n) {
  const i = Ze(t, n), s = !X5({ json: i }, Q4) ? ru : ss;
  return ur(t, e, n, s);
}
function ss(t) {
  return t.length === 0 ? !0 : t.length === 1 && t[0] === "0";
}
function ru() {
  return !0;
}
function WB(t) {
  return X5({ json: t }, Q4) ? ss : ru;
}
function Lr(t) {
  return t && t.type === Gt.after || !1;
}
function Kn(t) {
  return t && t.type === Gt.inside || !1;
}
function Ln(t) {
  return t && t.type === Gt.key || !1;
}
function Et(t) {
  return t && t.type === Gt.value || !1;
}
function Bt(t) {
  return t && t.type === Gt.multi || !1;
}
function qB(t, e, n) {
  if (Ot(e, n))
    return [e];
  {
    const i = QB(e, n);
    if (e.length === i.length || n.length === i.length)
      return [i];
    const r = e[i.length], s = n[i.length], o = Ze(t, i);
    if (En(o)) {
      const l = Object.keys(o), a = l.indexOf(r), c = l.indexOf(s);
      if (a !== -1 && c !== -1) {
        const u = Math.min(a, c), f = Math.max(a, c), h = [];
        for (let d = u; d <= f; d++)
          h.push(i.concat(l[d]));
        return h;
      }
    }
    if (qt(o)) {
      const l = Math.min(Jn(r), Jn(s)), a = Math.max(Jn(r), Jn(s)), c = [];
      for (let u = l; u <= a; u++)
        c.push(i.concat(String(u)));
      return c;
    }
  }
  throw new Error("Failed to create selection");
}
function y6(t) {
  return Kn(t) ? t.focusPath : At(t.focusPath);
}
function Na(t) {
  return Bt(t) ? xi(t.paths) : t.focusPath;
}
function Cp(t) {
  return Bt(t) ? ft(t.paths) : t.focusPath;
}
function JB(t, e) {
  return ja(t.focusPath, e) && (t.focusPath.length > e.length || Kn(t));
}
function w6(t, e, n) {
  if (!t)
    return !1;
  const i = e.slice(0);
  if (Bt(t))
    for (; i.length > 0; ) {
      if (t.pointersMap[Be(i)] === !0)
        return !0;
      i.pop();
    }
  return Ln(t) ? n === Gt.key && Ot(t.focusPath, e) : !!(Et(t) && (n === Gt.value && Ot(t.focusPath, e) || ja(e, t.focusPath) && e.length > t.focusPath.length && (n === Gt.key || n === Gt.value || n === Gt.multi)));
}
function Sw(t, e, n = !1, i = !1) {
  const r = e.selection, s = !i && Bt(r) ? xi(r.paths) : r.focusPath, o = HB(t, e, s);
  if (o === null)
    return null;
  const l = o, a = o;
  if (n)
    return Lr(r) || Kn(r) ? Nn(t, r.anchorPath, r.anchorPath) : Nn(t, r.anchorPath, a);
  if (Ln(r)) {
    const c = At(o), u = Ze(t, c);
    return Array.isArray(u) || Pt(o) ? Lt(o, !1) : br(o, !1);
  }
  return Et(r) ? Lt(o, !1) : Lr(r) || Kn(r) ? Nn(t, s, s) : Nn(t, l, a);
}
function KB(t, e, n = !1, i = !1) {
  const r = e.selection, s = !i && Bt(r) ? ft(r.paths) : r.focusPath, o = n1(t, e, s), l = o, a = o;
  if (o === null)
    return null;
  if (n) {
    const c = dn(Ze(t, s)) ? f6(e, s) : e, u = n1(t, c, s);
    return u === null ? null : Lr(r) ? Nn(t, u, u) : Kn(r) ? Nn(t, l, a) : Nn(t, r.anchorPath, u);
  }
  if (Ln(r)) {
    const c = At(o), u = Ze(t, c);
    return Array.isArray(u) ? Lt(a, !1) : br(a, !1);
  }
  return Et(r) ? Lt(a, !1) : Kn(r) ? Nn(t, l, a) : Nn(t, o, o);
}
function GB(t, e, n) {
  const i = At(n), r = [ft(n)], s = n1(Ze(t, i), e, r);
  return s ? Lt(i.concat(s), !1) : Zs(n);
}
function v6(t, e, n) {
  const i = e.selection, r = _6(t, e, n), s = r.findIndex((o) => Ot(o.path, i.focusPath) && String(o.type) === String(i.type));
  return {
    caret: s !== -1 ? r[s] : null,
    previous: s !== -1 && s > 0 ? r[s - 1] : null,
    next: s !== -1 && s < r.length - 1 ? r[s + 1] : null
  };
}
function YB(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: s, previous: o } = v6(t, e, i);
  if (n)
    return Bt(r) ? null : Nn(t, r.anchorPath, r.focusPath);
  if (s && o)
    return Z0(o);
  const l = At(r.focusPath), a = Ze(t, l);
  return Et(r) && Array.isArray(a) ? Nn(t, r.focusPath, r.focusPath) : Bt(r) && !Array.isArray(a) ? br(r.focusPath, !1) : null;
}
function XB(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: s, next: o } = v6(t, e, i);
  return n ? Bt(r) ? null : Nn(t, r.anchorPath, r.focusPath) : s && o ? Z0(o) : Bt(r) ? Lt(r.focusPath, !1) : null;
}
function ia(t, e) {
  const n = Q0(t, e);
  let i = 0;
  for (; i < n.length - 1 && n[i + 1].length > n[i].length; )
    i++;
  const r = n[i];
  return r.length === 0 || Array.isArray(Ze(t, At(r))) ? Lt(r, !1) : br(r, !1);
}
function La(t, e) {
  if (e.length === 1) {
    const i = xi(e);
    if (i.op === "replace" || i.op === "move") {
      const r = as(t, i.path);
      return Lt(r, !1);
    }
  }
  if (!Pt(e) && e.every((i) => i.op === "move")) {
    const i = xi(e), r = e.slice(1);
    if ((jm(i) || Ma(i)) && i.from !== i.path && r.every((s) => (jm(s) || Ma(s)) && s.from === s.path)) {
      const s = as(t, i.path);
      return br(s, !1);
    }
  }
  const n = e.filter((i) => i.op !== "test" && i.op !== "remove" && (i.op !== "move" || i.from !== i.path) && typeof i.path == "string").map((i) => as(t, i.path));
  return Pt(n) ? null : {
    type: Gt.multi,
    paths: n,
    anchorPath: xi(n),
    focusPath: ft(n),
    pointersMap: k6(n)
  };
}
function k6(t) {
  const e = {};
  return t.forEach((n) => {
    e[Be(n)] = !0;
  }), e;
}
function Sp(t) {
  return {
    [Be(t)]: !0
  };
}
function QB(t, e) {
  let n = 0;
  for (; n < t.length && n < e.length && t[n] === e[n]; )
    n++;
  return t.slice(0, n);
}
function su(t) {
  return t && (Ln(t) || Et(t) || Bt(t) && t.paths.length === 1);
}
function Ew(t, e) {
  return su(e) && dn(Ze(t, e.focusPath)) ? e.focusPath : At(e.focusPath);
}
function ja(t, e) {
  if (t.length < e.length)
    return !1;
  for (let n = 0; n < e.length; n++)
    if (t[n] !== e[n])
      return !1;
  return !0;
}
function Mi(t) {
  const e = t.selection;
  return (Ln(e) || Et(e)) && e.edit ? {
    ...t,
    selection: {
      ...e,
      edit: !1
    }
  } : t;
}
function br(t, e) {
  return {
    type: Gt.key,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t),
    edit: e
  };
}
function Lt(t, e) {
  return {
    type: Gt.value,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t),
    edit: e
  };
}
function Qs(t) {
  return {
    type: Gt.inside,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t)
  };
}
function Zs(t) {
  return {
    type: Gt.after,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t)
  };
}
function Nn(t, e, n) {
  const i = qB(t, e, n), r = ja(n, ft(i)) || ja(e, xi(i));
  return {
    type: Gt.multi,
    anchorPath: r ? xi(i) : ft(i),
    focusPath: r ? ft(i) : xi(i),
    paths: i,
    pointersMap: k6(i)
  };
}
function C6(t, e, n, i) {
  if (Ln(e))
    return String(ft(e.focusPath));
  if (Et(e)) {
    const r = Ze(t, e.focusPath);
    return typeof r == "string" ? r : i.stringify(r, null, n);
  }
  if (Bt(e)) {
    if (Pt(e.focusPath))
      return i.stringify(t, null, n);
    const r = y6(e), s = Ze(t, r);
    if (Array.isArray(s))
      if (e.paths.length === 1) {
        const o = Ze(t, xi(e.paths));
        return i.stringify(o, null, n);
      } else
        return e.paths.map((o) => {
          const l = Ze(t, o);
          return `${i.stringify(l, null, n)},`;
        }).join(`
`);
    else
      return e.paths.map((o) => {
        const l = ft(o), a = Ze(t, o);
        return `${i.stringify(l)}: ${i.stringify(a, null, n)},`;
      }).join(`
`);
  }
  return null;
}
function S6(t) {
  return Bt(t) ? t.paths : [t.focusPath];
}
function jo(t) {
  return (Ln(t) || Et(t)) && t.edit;
}
function ZB(t, e, n = !0) {
  return e === void 0 && !n ? t : {
    ...t,
    selection: e
  };
}
function $B() {
  return Lt([], !1);
}
function E6(t) {
  return Bt(t) || Ln(t) || Et(t);
}
function _l(t) {
  if (!t)
    return !1;
  if (Ln(t) || Et(t) || Bt(t) && t.paths.length === 1)
    return !0;
}
function Z0(t) {
  switch (t.type) {
    case Ir.key:
      return br(t.path, !1);
    case Ir.value:
      return Lt(t.path, !1);
    case Ir.after:
      return Zs(t.path);
    case Ir.inside:
      return Qs(t.path);
  }
}
function Aw(t, e, n) {
  switch (e) {
    case Gt.key:
      return br(n, !1);
    case Gt.value:
      return Lt(n, !1);
    case Gt.after:
      return Zs(n);
    case Gt.inside:
      return Qs(n);
    case Gt.multi:
      return Nn(t, n, n);
  }
}
function Mw(t, e) {
  if (t)
    return Object.keys(t.pointersMap).some((n) => Oa(n, e) || Oa(e, n)) ? t : void 0;
}
function Cs(...t) {
  const e = [];
  for (const n of t)
    if (typeof n == "string" && e.push(n), n && typeof n == "object")
      for (const i in n)
        Object.hasOwnProperty.call(n, i) && n[i] && e.push(i);
  return e.join(" ");
}
function i1(t, e) {
  const n = j0(t, e);
  return Cs("jse-value", "jse-" + n, {
    "jse-url": op(t),
    "jse-empty": typeof t == "string" && t.length === 0
  });
}
function ex(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("div"), b(e, "class", n = bn(Cs("jse-editable-div", t[2], { "jse-short-text": t[0] })) + " svelte-rw77oa"), b(e, "contenteditable", "true"), b(e, "spellcheck", "false");
    },
    m(s, o) {
      U(s, e, o), t[13](e), i || (r = [
        se(e, "input", t[3]),
        se(e, "keydown", t[4]),
        se(e, "paste", t[5]),
        se(e, "blur", t[6])
      ], i = !0);
    },
    p(s, [o]) {
      o & 5 && n !== (n = bn(Cs("jse-editable-div", s[2], { "jse-short-text": s[0] })) + " svelte-rw77oa") && b(e, "class", n);
    },
    i: ve,
    o: ve,
    d(s) {
      s && V(e), t[13](null), i = !1, ht(r);
    }
  };
}
function tx(t, e, n) {
  const i = mi("jsoneditor:EditableDiv");
  let { value: r } = e, { shortText: s = !1 } = e, { onChange: o } = e, { onCancel: l } = e, { onFind: a } = e, { onPaste: c = hn } = e, { onValueClass: u = () => "" } = e, f, h = u(r), d = !1;
  or(() => {
    i("onMount", { value: r }), g(r), setTimeout(() => i6(f));
  }), vs(() => {
    const S = p();
    i("onDestroy", { closed: d, value: r, newValue: S }), !d && S !== r && o(S, bl.NO);
  });
  function p() {
    return Rj(f.innerText);
  }
  function g(S) {
    n(1, f.innerText = Tl(S), f);
  }
  function _() {
    const S = p();
    S === "" && g(""), n(2, h = u(S));
  }
  function m(S) {
    S.stopPropagation();
    const O = Yo(S).replace(/^Command\+/, "Ctrl+");
    if (O === "Escape" && (d = !0, l()), O === "Enter" || O === "Tab") {
      d = !0;
      const w = p();
      o(w, bl.NEXT_INSIDE);
    }
    O === "Ctrl+F" && (S.preventDefault(), a(!1)), O === "Ctrl+H" && (S.preventDefault(), a(!0));
  }
  function C(S) {
    if (!c)
      return;
    const O = S.clipboardData.getData("text/plain");
    c(O);
  }
  function v() {
    const S = document.hasFocus(), O = p();
    i("handleBlur", { hasFocus: S, closed: d, value: r, newValue: O }), document.hasFocus() && !d && (d = !0, O !== r ? o(O, bl.SELF) : l());
  }
  function k(S) {
    yt[S ? "unshift" : "push"](() => {
      f = S, n(1, f);
    });
  }
  return t.$$set = (S) => {
    "value" in S && n(7, r = S.value), "shortText" in S && n(0, s = S.shortText), "onChange" in S && n(8, o = S.onChange), "onCancel" in S && n(9, l = S.onCancel), "onFind" in S && n(10, a = S.onFind), "onPaste" in S && n(11, c = S.onPaste), "onValueClass" in S && n(12, u = S.onValueClass);
  }, [
    s,
    f,
    h,
    _,
    m,
    C,
    v,
    r,
    o,
    l,
    a,
    c,
    u,
    k
  ];
}
class nx extends Qe {
  constructor(e) {
    super(), Xe(this, e, tx, ex, wt, {
      value: 7,
      shortText: 0,
      onChange: 8,
      onCancel: 9,
      onFind: 10,
      onPaste: 11,
      onValueClass: 12
    });
  }
}
const A6 = nx;
function ix(t) {
  let e, n;
  return e = new A6({
    props: {
      value: t[1].escapeValue(t[0]),
      onChange: t[3],
      onCancel: t[4],
      onPaste: t[5],
      onFind: t[2],
      onValueClass: t[6]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 3 && (s.value = i[1].escapeValue(i[0])), r & 4 && (s.onFind = i[2]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function rx(t, e, n) {
  let { path: i } = e, { value: r } = e, { parser: s } = e, { normalization: o } = e, { enforceString: l } = e, { onPatch: a } = e, { onPasteJson: c } = e, { onSelect: u } = e, { onFind: f } = e, { focus: h } = e, { findNextInside: d } = e;
  function p(v) {
    return l ? v : tc(v, s);
  }
  function g(v, k) {
    a(
      [
        {
          op: "replace",
          path: Be(i),
          value: p(o.unescapeValue(v))
        }
      ],
      (S, O) => {
        if (!Ot(i, O.selection.focusPath))
          return;
        const w = k === bl.NEXT_INSIDE ? d(i) : Lt(i, !1);
        return { state: { ...O, selection: w } };
      }
    ), k !== bl.SELF && h();
  }
  function _() {
    u(Lt(i, !1)), h();
  }
  function m(v) {
    try {
      const k = s.parse(v);
      dn(k) && c({ path: i, contents: k });
    } catch {
    }
  }
  function C(v) {
    return i1(p(o.unescapeValue(v)), s);
  }
  return t.$$set = (v) => {
    "path" in v && n(7, i = v.path), "value" in v && n(0, r = v.value), "parser" in v && n(8, s = v.parser), "normalization" in v && n(1, o = v.normalization), "enforceString" in v && n(9, l = v.enforceString), "onPatch" in v && n(10, a = v.onPatch), "onPasteJson" in v && n(11, c = v.onPasteJson), "onSelect" in v && n(12, u = v.onSelect), "onFind" in v && n(2, f = v.onFind), "focus" in v && n(13, h = v.focus), "findNextInside" in v && n(14, d = v.findNextInside);
  }, [
    r,
    o,
    f,
    g,
    _,
    m,
    C,
    i,
    s,
    l,
    a,
    c,
    u,
    h,
    d
  ];
}
class sx extends Qe {
  constructor(e) {
    super(), Xe(this, e, rx, ix, wt, {
      path: 7,
      value: 0,
      parser: 8,
      normalization: 1,
      enforceString: 9,
      onPatch: 10,
      onPasteJson: 11,
      onSelect: 12,
      onFind: 2,
      focus: 13,
      findNextInside: 14
    });
  }
}
const ox = sx;
function kf(t, e, n) {
  const i = At(e), r = Ze(t, i);
  if (qt(r)) {
    const s = Jn(ft(e));
    return n.map((o, l) => ({
      op: "add",
      path: Be(i.concat(String(s + l))),
      value: o.value
    }));
  } else if (En(r)) {
    const s = ft(e), o = Object.keys(r), l = Hu(o, s, !0);
    return [
      ...n.map((a) => {
        const c = Uu(a.key, o);
        return {
          op: "add",
          path: Be(i.concat(c)),
          value: a.value
        };
      }),
      ...l.map((a) => Rl(i, a))
    ];
  } else
    throw new Error("Cannot create insert operations: parent must be an Object or Array");
}
function Ow(t, e, n) {
  const i = Ze(t, e);
  if (Array.isArray(i)) {
    const r = i.length;
    return n.map((s, o) => ({
      op: "add",
      path: Be(e.concat(String(r + o))),
      value: s.value
    }));
  } else
    return n.map((r) => {
      const s = Uu(r.key, Object.keys(i));
      return {
        op: "add",
        path: Be(e.concat(s)),
        value: r.value
      };
    });
}
function Wu(t, e, n, i) {
  const r = e.filter((l) => l !== n), s = Uu(i, r), o = Hu(e, n, !1);
  return [
    {
      op: "move",
      from: Be(t.concat(n)),
      path: Be(t.concat(s))
    },
    ...o.map((l) => Rl(t, l))
  ];
}
function lx(t, e, n) {
  const i = xi(e), r = At(i), s = Ze(t, r);
  if (qt(s)) {
    const o = xi(e), l = o ? Jn(ft(o)) : 0;
    return [
      ...r1(e),
      ...n.map((a, c) => ({
        op: "add",
        path: Be(r.concat(String(c + l))),
        value: a.value
      }))
    ];
  } else if (En(s)) {
    const o = ft(e), l = At(o), a = ft(o), c = Object.keys(s), u = Hu(c, a, !1), f = new Set(e.map((d) => ft(d))), h = c.filter((d) => !f.has(d));
    return [
      ...r1(e),
      ...n.map((d) => {
        const p = Uu(d.key, h);
        return {
          op: "add",
          path: Be(l.concat(p)),
          value: d.value
        };
      }),
      ...u.map((d) => Rl(l, d))
    ];
  } else
    throw new Error("Cannot create replace operations: parent must be an Object or Array");
}
function ax(t, e) {
  const n = ft(e);
  if (Pt(n))
    throw new Error("Cannot duplicate root object");
  const i = At(n), r = ft(n), s = Ze(t, i);
  if (qt(s)) {
    const o = ft(e), l = o ? Jn(ft(o)) + 1 : 0;
    return [
      ...e.map((a, c) => ({
        op: "copy",
        from: Be(a),
        path: Be(i.concat(String(c + l)))
      }))
    ];
  } else if (En(s)) {
    const o = Object.keys(s), l = Hu(o, r, !1);
    return [
      ...e.map((a) => {
        const c = ft(a), u = Uu(c, o);
        return {
          op: "copy",
          from: Be(a),
          path: Be(i.concat(u))
        };
      }),
      ...l.map((a) => Rl(i, a))
    ];
  } else
    throw new Error("Cannot create duplicate operations: parent must be an Object or Array");
}
function cx(t, e) {
  if (Et(e))
    return [
      {
        op: "move",
        from: Be(e.focusPath),
        path: ""
      }
    ];
  if (Bt(e)) {
    const n = At(e.focusPath), i = Ze(t, n);
    if (qt(i))
      return [
        {
          op: "replace",
          path: "",
          value: e.paths.map((s) => {
            const o = Jn(ft(s));
            return i[o];
          })
        }
      ];
    if (En(i)) {
      const r = {};
      return e.paths.forEach((s) => {
        const o = String(ft(s));
        r[o] = i[o];
      }), [
        {
          op: "replace",
          path: "",
          value: r
        }
      ];
    }
  } else
    throw new Error("Cannot create extract operations: parent must be an Object or Array");
  throw new Error("Cannot extract: unsupported type of selection " + JSON.stringify(e));
}
function M6(t, e, n, i) {
  if (Ln(e)) {
    const r = K5(n, i), s = At(e.focusPath), o = Ze(t, s), l = Object.keys(o), a = ft(e.focusPath);
    return Wu(s, l, a, typeof r == "string" ? r : n);
  }
  if (Et(e) || Bt(e) && Pt(e.focusPath))
    try {
      return [
        {
          op: "replace",
          path: Be(e.focusPath),
          value: wp(n, (r) => J0(r, i))
        }
      ];
    } catch {
      return [
        {
          op: "replace",
          path: Be(e.focusPath),
          value: n
        }
      ];
    }
  if (Bt(e)) {
    const r = jg(n, i);
    return lx(t, e.paths, r);
  }
  if (Lr(e)) {
    const r = jg(n, i), s = e.focusPath, o = At(s), l = Ze(t, o);
    if (qt(l)) {
      const a = Jn(ft(s)), c = o.concat(String(a + 1));
      return kf(t, c, r);
    } else if (En(l)) {
      const a = String(ft(s)), c = Object.keys(l);
      if (Pt(c) || ft(c) === a)
        return Ow(t, o, r);
      {
        const u = c.indexOf(a), f = c[u + 1], h = o.concat(f);
        return kf(t, h, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  if (Kn(e)) {
    const r = jg(n, i), s = e.focusPath, o = Ze(t, s);
    if (qt(o)) {
      const l = s.concat("0");
      return kf(t, l, r);
    } else if (En(o)) {
      const l = Object.keys(o);
      if (Pt(l))
        return Ow(t, s, r);
      {
        const a = xi(l), c = s.concat(a);
        return kf(t, c, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  throw new Error("Cannot insert: unsupported type of selection " + JSON.stringify(e));
}
function ux(t, e, n) {
  const i = n.beforePath, r = n.append, s = At(e.focusPath), o = Ze(t, s);
  if (!r && !(i && ja(i, s) && i.length > s.length))
    return [];
  const l = Na(e), a = Cp(e), c = ft(l), u = ft(a), f = i ? i[s.length] : void 0;
  if (En(o)) {
    const h = Object.keys(o), d = h.indexOf(c), p = h.indexOf(u), g = r ? h.length : h.indexOf(f);
    if (d !== -1 && p !== -1 && g !== -1)
      return g > d ? [...h.slice(d, p + 1), ...h.slice(g, h.length)].map((_) => Rl(s, _)) : [...h.slice(g, d), ...h.slice(p + 1, h.length)].map((_) => Rl(s, _));
  } else if (qt(o)) {
    const h = Jn(c), d = Jn(u), p = f !== void 0 ? Jn(f) : o.length, g = d - h + 1;
    return p < h ? sw(g, (_) => ({
      op: "move",
      from: Be(s.concat(String(h + _))),
      path: Be(s.concat(String(p + _)))
    })) : sw(g, () => ({
      op: "move",
      from: Be(s.concat(String(h))),
      path: Be(s.concat(String(p)))
    }));
  } else
    throw new Error("Cannot create move operations: parent must be an Object or Array");
}
function fx(t, e, n) {
  if (n === "object")
    return {};
  if (n === "array")
    return [];
  if (n === "structure") {
    const i = y6(e), r = Ze(t, i);
    if (Array.isArray(r) && !Pt(r)) {
      const s = xi(r);
      return dn(s) ? PN(s, (o) => Array.isArray(o) ? [] : Cn(o) ? void 0 : "") : "";
    }
  }
  return "";
}
function r1(t) {
  return t.map((e) => ({
    op: "remove",
    path: Be(e)
  })).reverse();
}
function Rl(t, e) {
  return {
    op: "move",
    from: Be(t.concat(e)),
    path: Be(t.concat(e))
  };
}
function jg(t, e) {
  const n = /^\s*{/.test(t), i = /^\s*\[/.test(t), r = K5(t, e), s = r !== void 0 ? r : wp(t, (o) => J0(o, e));
  return n && Cn(s) || i && Array.isArray(s) ? [{ key: "New item", value: s }] : Array.isArray(s) ? s.map((o, l) => ({ key: "New item " + l, value: o })) : Cn(s) ? Object.keys(s).map((o) => ({ key: o, value: s[o] })) : [{ key: "New item", value: s }];
}
function O6(t, e) {
  if (Ln(e)) {
    const n = At(e.focusPath), i = Ze(t, n), r = Object.keys(i), s = ft(e.focusPath), l = Wu(n, r, s, ""), a = La(t, l);
    return { operations: l, newSelection: a };
  }
  if (Et(e))
    return { operations: [
      {
        op: "replace",
        path: Be(e.focusPath),
        value: ""
      }
    ], newSelection: e };
  if (Bt(e)) {
    const n = r1(e.paths), i = ft(e.paths);
    if (Pt(i)) {
      const o = [{ op: "replace", path: "", value: "" }], l = Lt([], !1);
      return { operations: o, newSelection: l };
    }
    const r = At(i), s = Ze(t, r);
    if (qt(s)) {
      const o = xi(e.paths), l = Jn(ft(o)), a = l === 0 ? Qs(r) : Zs(r.concat(String(l - 1)));
      return { operations: n, newSelection: a };
    } else if (En(s)) {
      const o = Object.keys(s), l = xi(e.paths), a = ft(l), c = o.indexOf(a), u = o[c - 1], f = c === 0 ? Qs(r) : Zs(r.concat(u));
      return { operations: n, newSelection: f };
    } else
      throw new Error("Cannot create remove operations: parent must be an Object or Array");
  }
  throw new Error("Cannot remove: unsupported type of selection " + JSON.stringify(e));
}
function T6(t, e) {
  return r5(t, e, {
    before: (n, i, r) => {
      if ($4(i)) {
        const s = zr(i.path);
        return {
          revertOperations: [...r, ...Tw(n, s)]
        };
      }
      if (Ma(i)) {
        const s = zr(i.from);
        return {
          revertOperations: [...r, ...Tw(n, s)]
        };
      }
      return { revertOperations: r };
    }
  });
}
function Tw(t, e) {
  const n = At(e), i = ft(e), r = Ze(t, n);
  if (En(r)) {
    const s = Object.keys(r);
    return Hu(s, i, !1).map((l) => Rl(n, l));
  }
  return [];
}
function hx(t, e) {
  return t.flatMap((n) => {
    if (M0(n)) {
      const i = zr(n.path);
      if (i.length > 0) {
        const r = [n];
        let s = At(i);
        for (; s.length > 0 && !mr(e, s); )
          r.unshift({
            op: "add",
            path: Be(s),
            value: {}
          }), s = At(s);
        return r;
      }
    }
    return n;
  });
}
function dx(t, e, n) {
  const i = n != null && n.activeItem ? Iw(n.activeItem) : void 0, r = e.findIndex((a) => Ot(i, Iw(a))), s = r !== -1 ? r : (n == null ? void 0 : n.activeIndex) < e.length ? n == null ? void 0 : n.activeIndex : e.length > 0 ? 0 : -1, o = e.map((a, c) => ({ ...a, active: c === s })), l = o[s];
  return {
    items: o,
    itemsMap: yp(o, (a) => Be(a.path)),
    activeItem: l,
    activeIndex: s
  };
}
function px(t) {
  const e = t.activeIndex < t.items.length - 1 ? t.activeIndex + 1 : t.items.length > 0 ? 0 : -1, n = t.items[e], i = t.items.map((r, s) => ({ ...r, active: s === e }));
  return {
    ...t,
    items: i,
    itemsMap: yp(i, (r) => Be(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function gx(t) {
  const e = t.activeIndex > 0 ? t.activeIndex - 1 : t.items.length - 1, n = t.items[e], i = t.items.map((r, s) => ({ ...r, active: s === e }));
  return {
    ...t,
    items: i,
    itemsMap: yp(i, (r) => Be(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function R6(t, e, n, i = 1 / 0) {
  const r = [], s = [];
  function o(a) {
    r.length < i && r.push(a);
  }
  function l(a, c) {
    if (qt(c)) {
      const u = s.length;
      s.push("0");
      for (let f = 0; f < c.length; f++)
        if (s[u] = String(f), l(a, c[f]), r.length >= i)
          return;
      s.pop();
    } else if (En(c)) {
      const u = Object.keys(c), f = s.length;
      s.push("");
      for (const h of u)
        if (s[f] = h, Rw(h, a, s, xr.key, o), l(a, c[h]), r.length >= i)
          return;
      s.pop();
    } else
      Rw(String(c), a, s, xr.value, o);
  }
  if (typeof t == "string" && t !== "") {
    const a = t.toLowerCase();
    l(a, e);
  }
  return r;
}
function Rw(t, e, n, i, r) {
  const s = t.toLowerCase();
  let o = 0, l = -1, a = -1;
  do
    a = s.indexOf(e, l), a !== -1 && (l = a + e.length, r({
      path: n.slice(0),
      field: i,
      fieldIndex: o,
      start: a,
      end: l
    }), o++);
  while (a !== -1);
}
function s1(t, e, n, i) {
  return t.substring(0, n) + e + t.substring(i);
}
function Pw(t, e, n) {
  let i = t;
  return BL(n, (r) => {
    i = s1(i, e, r.start, r.end);
  }), i;
}
function mx(t, e, n, i, r) {
  const { field: s, path: o, start: l, end: a } = i;
  if (s === xr.key) {
    const c = At(o), u = Ze(t, c), f = ft(o), h = Object.keys(u), d = s1(f, n, l, a), p = Wu(c, h, f, d);
    return {
      newSelection: La(t, p),
      operations: p
    };
  } else if (s === xr.value) {
    const c = Ze(t, o);
    if (c === void 0)
      throw new Error(`Cannot replace: path not found ${Be(o)}`);
    const u = typeof c == "string" ? c : String(c), f = Be(o), h = Xs(c, e.enforceStringMap, f, r), d = s1(u, n, l, a), p = [
      {
        op: "replace",
        path: Be(o),
        value: h ? d : tc(d, r)
      }
    ];
    return {
      newSelection: La(t, p),
      operations: p
    };
  } else
    throw new Error(`Cannot replace: unknown type of search result field ${s}`);
}
function bx(t, e, n, i, r) {
  const s = R6(n, t, e, 1 / 0), o = [];
  for (let c = 0; c < s.length; c++) {
    const u = s[c - 1], f = s[c];
    c === 0 || f.field !== u.field || !Ot(f.path, u.path) ? o.push({
      path: f.path,
      field: f.field,
      items: [f]
    }) : ft(o).items.push(f);
  }
  o.sort((c, u) => c.field !== u.field ? c.field === xr.key ? 1 : -1 : u.path.length - c.path.length);
  let l = [], a;
  return o.forEach((c) => {
    const { field: u, path: f, items: h } = c;
    if (u === xr.key) {
      const d = At(f), p = Ze(t, d), g = ft(f), _ = Object.keys(p), m = Pw(g, i, h), C = Wu(d, _, g, m);
      l = l.concat(C), a = La(t, C);
    } else if (u === xr.value) {
      const d = Ze(t, f);
      if (d === void 0)
        throw new Error(`Cannot replace: path not found ${Be(f)}`);
      const p = typeof d == "string" ? d : String(d), g = Be(f), _ = Xs(d, e.enforceStringMap, g, r), m = Pw(p, i, h), C = [
        {
          op: "replace",
          path: Be(f),
          value: _ ? m : tc(m, r)
        }
      ];
      l = l.concat(C), a = La(t, C);
    } else
      throw new Error(`Cannot replace: unknown type of search result field ${u}`);
  }), {
    operations: l,
    newSelection: a
  };
}
function _x(t, e) {
  const n = [];
  let i = 0;
  for (const s of e) {
    const o = t.slice(i, s.start);
    o !== "" && n.push({
      type: "normal",
      text: o,
      active: !1
    });
    const l = t.slice(s.start, s.end);
    n.push({
      type: "highlight",
      text: l,
      active: s.active
    }), i = s.end;
  }
  const r = ft(e);
  return r.end < t.length && n.push({
    type: "normal",
    text: t.slice(r.end),
    active: !1
  }), n;
}
function Iw(t) {
  return t.path.concat(t.field, String(t.fieldIndex));
}
function yx(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === xr.key);
  if (!(!n || n.length === 0))
    return n;
}
function Dw(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === xr.value);
  if (!(!n || n.length === 0))
    return n;
}
function Nw(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function wx(t) {
  let e, n = Tl(t[3].text) + "", i;
  return {
    c() {
      e = j("span"), i = we(n), b(e, "class", "jse-highlight svelte-s6kbew"), Ce(e, "jse-active", t[3].active);
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s & 1 && n !== (n = Tl(r[3].text) + "") && ze(i, n), s & 1 && Ce(e, "jse-active", r[3].active);
    },
    d(r) {
      r && V(e);
    }
  };
}
function vx(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function Lw(t) {
  let e;
  function n(s, o) {
    return s[3].type === "normal" ? vx : wx;
  }
  let i = n(t), r = i(t);
  return {
    c() {
      r.c(), e = ot();
    },
    m(s, o) {
      r.m(s, o), U(s, e, o);
    },
    p(s, o) {
      i === (i = n(s)) && r ? r.p(s, o) : (r.d(1), r = i(s), r && (r.c(), r.m(e.parentNode, e)));
    },
    d(s) {
      r.d(s), s && V(e);
    }
  };
}
function kx(t) {
  let e, n = t[0], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = Lw(Nw(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = ot();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, [s]) {
      if (s & 1) {
        n = r[0];
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = Nw(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = Lw(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    i: ve,
    o: ve,
    d(r) {
      Vt(i, r), r && V(e);
    }
  };
}
function Cx(t, e, n) {
  let i, { text: r } = e, { searchResultItems: s } = e;
  return t.$$set = (o) => {
    "text" in o && n(1, r = o.text), "searchResultItems" in o && n(2, s = o.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 6 && n(0, i = _x(String(r), s));
  }, [i, r, s];
}
class Sx extends Qe {
  constructor(e) {
    super(), Xe(this, e, Cx, kx, xt, { text: 1, searchResultItems: 2 });
  }
}
const P6 = Sx;
function Ex(t) {
  let e = Tl(t[1].escapeValue(t[0])) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 3 && e !== (e = Tl(i[1].escapeValue(i[0])) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function Ax(t) {
  let e, n;
  return e = new P6({
    props: {
      text: t[1].escapeValue(t[0]),
      searchResultItems: t[3]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 3 && (s.text = i[1].escapeValue(i[0])), r & 8 && (s.searchResultItems = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Mx(t) {
  let e, n, i, r, s, o, l, a;
  const c = [Ax, Ex], u = [];
  function f(h, d) {
    return h[3] ? 0 : 1;
  }
  return n = f(t), i = u[n] = c[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "data-type", "selectable-value"), b(e, "class", r = bn(i1(t[0], t[2])) + " svelte-6ci2p7"), b(e, "title", s = t[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null);
    },
    m(h, d) {
      U(h, e, d), u[n].m(e, null), o = !0, l || (a = [
        se(e, "click", t[5]),
        se(e, "dblclick", t[6])
      ], l = !0);
    },
    p(h, [d]) {
      let p = n;
      n = f(h), n === p ? u[n].p(h, d) : (Se(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Ee(), i = u[n], i ? i.p(h, d) : (i = u[n] = c[n](h), i.c()), P(i, 1), i.m(e, null)), (!o || d & 5 && r !== (r = bn(i1(h[0], h[2])) + " svelte-6ci2p7")) && b(e, "class", r), (!o || d & 16 && s !== (s = h[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null)) && b(e, "title", s);
    },
    i(h) {
      o || (P(i), o = !0);
    },
    o(h) {
      x(i), o = !1;
    },
    d(h) {
      h && V(e), u[n].d(), l = !1, ht(a);
    }
  };
}
function Ox(t, e, n) {
  let i, { path: r } = e, { value: s } = e, { readOnly: o } = e, { normalization: l } = e, { parser: a } = e, { onSelect: c } = e, { searchResultItems: u } = e;
  function f(d) {
    typeof s == "string" && i && d.ctrlKey && (d.preventDefault(), d.stopPropagation(), window.open(s, "_blank"));
  }
  function h(d) {
    o || (d.preventDefault(), c(Lt(r, !0)));
  }
  return t.$$set = (d) => {
    "path" in d && n(7, r = d.path), "value" in d && n(0, s = d.value), "readOnly" in d && n(8, o = d.readOnly), "normalization" in d && n(1, l = d.normalization), "parser" in d && n(2, a = d.parser), "onSelect" in d && n(9, c = d.onSelect), "searchResultItems" in d && n(3, u = d.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = op(s));
  }, [
    s,
    l,
    a,
    u,
    i,
    f,
    h,
    r,
    o,
    c
  ];
}
class Tx extends Qe {
  constructor(e) {
    super(), Xe(this, e, Ox, Mx, wt, {
      path: 7,
      value: 0,
      readOnly: 8,
      normalization: 1,
      parser: 2,
      onSelect: 9,
      searchResultItems: 3
    });
  }
}
const Rx = Tx;
function Px(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = we(t[0]), b(e, "class", "jse-tooltip svelte-r4omvg");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, [r]) {
      r & 1 && ze(n, i[0]);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(e);
    }
  };
}
function Ix(t, e, n) {
  let { text: i } = e;
  return t.$$set = (r) => {
    "text" in r && n(0, i = r.text);
  }, [i];
}
class Dx extends Qe {
  constructor(e) {
    super(), Xe(this, e, Ix, Px, xt, { text: 0 });
  }
}
const Nx = Dx;
function $0(t, { text: e, openAbsolutePopup: n, closeAbsolutePopup: i }) {
  let r;
  function s() {
    r = n(Nx, {
      text: e
    }, {
      position: "top",
      width: 10 * e.length,
      offsetTop: 3,
      anchor: t,
      closeOnOuterClick: !0
    });
  }
  function o() {
    i(r);
  }
  return t.addEventListener("mouseenter", s), t.addEventListener("mouseleave", o), {
    destroy() {
      t.removeEventListener("mouseenter", s), t.removeEventListener("mouseleave", o);
    }
  };
}
function Lx(t) {
  let e, n, i, r, s, o;
  return n = new Mt({ props: { data: lB } }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-timestamp svelte-1w5pf7");
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), r = !0, s || (o = Wi(i = $0.call(null, e, {
        text: t[0],
        ...t[1]
      })), s = !0);
    },
    p(l, [a]) {
      i && hi(i.update) && a & 1 && i.update.call(null, {
        text: l[0],
        ...l[1]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n), s = !1, o();
    }
  };
}
function jx(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { value: s } = e;
  return t.$$set = (o) => {
    "value" in o && n(2, s = o.value);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(0, i = `Time: ${new Date(s).toString()}`);
  }, [i, r, s];
}
class Bx extends Qe {
  constructor(e) {
    super(), Xe(this, e, jx, Lx, wt, { value: 2 });
  }
}
const xx = Bx;
function Fx({ path: t, value: e, readOnly: n, enforceString: i, searchResultItems: r, isEditing: s, parser: o, normalization: l, onPatch: a, onPasteJson: c, onSelect: u, onFind: f, findNextInside: h, focus: d }) {
  const p = [];
  return !s && YP(e) && p.push({
    component: OB,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), !s && XP(e) && p.push({
    component: jB,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), s && p.push({
    component: ox,
    props: {
      path: t,
      value: e,
      enforceString: i,
      parser: o,
      normalization: l,
      onPatch: a,
      onPasteJson: c,
      onSelect: u,
      onFind: f,
      findNextInside: h,
      focus: d
    }
  }), s || p.push({
    component: Rx,
    props: { path: t, value: e, readOnly: n, parser: o, normalization: l, searchResultItems: r, onSelect: u }
  }), !s && qm(e) && p.push({
    component: xx,
    props: { value: e }
  }), p;
}
var ko = {
  prefix: "fas",
  iconName: "caret-right",
  icon: [256, 512, [], "f0da", "M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]
}, I6 = {
  prefix: "fas",
  iconName: "paste",
  icon: [512, 512, ["file-clipboard"], "f0ea", "M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]
}, zx = {
  prefix: "fas",
  iconName: "circle-notch",
  icon: [512, 512, [], "f1ce", "M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]
}, Vx = {
  prefix: "fas",
  iconName: "scissors",
  icon: [512, 512, [9984, 9986, 9988, "cut"], "f0c4", "M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM160 112c0 26.5-21.5 48-48 48s-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48zM112 448c-26.5 0-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48z"]
}, ga = Vx, Ux = {
  prefix: "fas",
  iconName: "square-caret-down",
  icon: [448, 512, ["caret-square-down"], "f150", "M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]
}, Hx = Ux, Wx = {
  prefix: "fas",
  iconName: "caret-left",
  icon: [256, 512, [], "f0d9", "M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]
}, qx = {
  prefix: "fas",
  iconName: "pen-to-square",
  icon: [512, 512, ["edit"], "f044", "M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]
}, jw = qx, Jx = {
  prefix: "fas",
  iconName: "chevron-up",
  icon: [512, 512, [], "f077", "M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]
}, D6 = {
  prefix: "fas",
  iconName: "angle-right",
  icon: [320, 512, [8250], "f105", "M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]
}, Kx = {
  prefix: "fas",
  iconName: "square-caret-up",
  icon: [448, 512, ["caret-square-up"], "f151", "M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]
}, Gx = Kx, Bw = {
  prefix: "fas",
  iconName: "caret-up",
  icon: [320, 512, [], "f0d8", "M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]
}, Ep = {
  prefix: "fas",
  iconName: "filter",
  icon: [512, 512, [], "f0b0", "M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]
}, Bo = {
  prefix: "fas",
  iconName: "code",
  icon: [640, 512, [], "f121", "M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]
}, Ap = {
  prefix: "fas",
  iconName: "wrench",
  icon: [512, 512, [128295], "f0ad", "M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 456c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"]
}, Bc = {
  prefix: "fas",
  iconName: "pen",
  icon: [512, 512, [128394], "f304", "M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]
}, Yx = {
  prefix: "fas",
  iconName: "arrow-rotate-right",
  icon: [512, 512, [8635, "arrow-right-rotate", "arrow-rotate-forward", "redo"], "f01e", "M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]
}, eb = Yx, Xx = {
  prefix: "fas",
  iconName: "arrow-rotate-left",
  icon: [512, 512, [8634, "arrow-left-rotate", "arrow-rotate-back", "arrow-rotate-backward", "undo"], "f0e2", "M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]
}, tb = Xx, Qx = {
  prefix: "fas",
  iconName: "crop-simple",
  icon: [512, 512, ["crop-alt"], "f565", "M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]
}, Zx = Qx, $x = {
  prefix: "fas",
  iconName: "gear",
  icon: [512, 512, [9881, "cog"], "f013", "M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"]
}, eF = $x, dr = {
  prefix: "fas",
  iconName: "caret-down",
  icon: [320, 512, [], "f0d7", "M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]
}, tF = {
  prefix: "fas",
  iconName: "ellipsis-vertical",
  icon: [128, 512, ["ellipsis-v"], "f142", "M64 360c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zm0-160c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zM120 96c0 30.9-25.1 56-56 56S8 126.9 8 96S33.1 40 64 40s56 25.1 56 56z"]
}, N6 = tF, Cf = {
  prefix: "fas",
  iconName: "arrow-right-arrow-left",
  icon: [448, 512, [8644, "exchange"], "f0ec", "M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]
}, nF = {
  prefix: "fas",
  iconName: "arrow-down-short-wide",
  icon: [576, 512, ["sort-amount-desc", "sort-amount-down-alt"], "f884", "M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]
}, Mp = nF, iF = {
  prefix: "fas",
  iconName: "angle-down",
  icon: [448, 512, [8964], "f107", "M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, rF = {
  prefix: "fas",
  iconName: "arrow-down",
  icon: [384, 512, [8595], "f063", "M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, sF = {
  prefix: "fas",
  iconName: "magnifying-glass",
  icon: [512, 512, [128269, "search"], "f002", "M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"]
}, nb = sF, oF = {
  prefix: "fas",
  iconName: "chevron-down",
  icon: [512, 512, [], "f078", "M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]
}, To = {
  prefix: "fas",
  iconName: "copy",
  icon: [512, 512, [], "f0c5", "M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]
}, Sf = {
  prefix: "fas",
  iconName: "plus",
  icon: [448, 512, [10133, 61543, "add"], "2b", "M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]
}, L6 = {
  prefix: "fas",
  iconName: "xmark",
  icon: [320, 512, [128473, 10005, 10006, 10060, 215, "close", "multiply", "remove", "times"], "f00d", "M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]
}, xw = L6, oc = L6, lF = {
  prefix: "fas",
  iconName: "clone",
  icon: [512, 512, [], "f24d", "M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]
}, ou = {
  prefix: "fas",
  iconName: "check",
  icon: [512, 512, [10003, 10004], "f00c", "M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]
}, aF = {
  prefix: "fas",
  iconName: "triangle-exclamation",
  icon: [512, 512, [9888, "exclamation-triangle", "warning"], "f071", "M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"]
}, ql = aF;
const Mr = {};
function qu(t) {
  return t.split("-")[0];
}
function ib(t) {
  return t.split("-")[1];
}
function Op(t) {
  return ["top", "bottom"].includes(qu(t)) ? "x" : "y";
}
function j6(t) {
  return t === "y" ? "height" : "width";
}
function Fw(t, e, n) {
  let {
    reference: i,
    floating: r
  } = t;
  const s = i.x + i.width / 2 - r.width / 2, o = i.y + i.height / 2 - r.height / 2, l = Op(e), a = j6(l), c = i[a] / 2 - r[a] / 2, u = qu(e), f = l === "x";
  let h;
  switch (u) {
    case "top":
      h = {
        x: s,
        y: i.y - r.height
      };
      break;
    case "bottom":
      h = {
        x: s,
        y: i.y + i.height
      };
      break;
    case "right":
      h = {
        x: i.x + i.width,
        y: o
      };
      break;
    case "left":
      h = {
        x: i.x - r.width,
        y: o
      };
      break;
    default:
      h = {
        x: i.x,
        y: i.y
      };
  }
  switch (ib(e)) {
    case "start":
      h[l] -= c * (n && f ? -1 : 1);
      break;
    case "end":
      h[l] += c * (n && f ? -1 : 1);
      break;
  }
  return h;
}
const cF = async (t, e, n) => {
  const {
    placement: i = "bottom",
    strategy: r = "absolute",
    middleware: s = [],
    platform: o
  } = n, l = s.filter(Boolean), a = await (o.isRTL == null ? void 0 : o.isRTL(e));
  if (process.env.NODE_ENV !== "production") {
    if (o == null && console.error(["Floating UI: `platform` property was not passed to config. If you", "want to use Floating UI on the web, install @floating-ui/dom", "instead of the /core package. Otherwise, you can create your own", "`platform`: https://floating-ui.com/docs/platform"].join(" ")), l.filter((g) => {
      let {
        name: _
      } = g;
      return _ === "autoPlacement" || _ === "flip";
    }).length > 1)
      throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware", "detected. This will lead to an infinite loop. Ensure only one of", "either has been passed to the `middleware` array."].join(" "));
    (!t || !e) && console.error(["Floating UI: The reference and/or floating element was not defined", "when `computePosition()` was called. Ensure that both elements have", "been created and can be measured."].join(" "));
  }
  let c = await o.getElementRects({
    reference: t,
    floating: e,
    strategy: r
  }), {
    x: u,
    y: f
  } = Fw(c, i, a), h = i, d = {}, p = 0;
  for (let g = 0; g < l.length; g++) {
    const {
      name: _,
      fn: m
    } = l[g], {
      x: C,
      y: v,
      data: k,
      reset: S
    } = await m({
      x: u,
      y: f,
      initialPlacement: i,
      placement: h,
      strategy: r,
      middlewareData: d,
      rects: c,
      platform: o,
      elements: {
        reference: t,
        floating: e
      }
    });
    if (u = C ?? u, f = v ?? f, d = {
      ...d,
      [_]: {
        ...d[_],
        ...k
      }
    }, process.env.NODE_ENV !== "production" && p > 50 && console.warn(["Floating UI: The middleware lifecycle appears to be running in an", "infinite loop. This is usually caused by a `reset` continually", "being returned without a break condition."].join(" ")), S && p <= 50) {
      p++, typeof S == "object" && (S.placement && (h = S.placement), S.rects && (c = S.rects === !0 ? await o.getElementRects({
        reference: t,
        floating: e,
        strategy: r
      }) : S.rects), {
        x: u,
        y: f
      } = Fw(c, h, a)), g = -1;
      continue;
    }
  }
  return {
    x: u,
    y: f,
    placement: h,
    strategy: r,
    middlewareData: d
  };
};
function uF(t) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...t
  };
}
function fF(t) {
  return typeof t != "number" ? uF(t) : {
    top: t,
    right: t,
    bottom: t,
    left: t
  };
}
function Zh(t) {
  return {
    ...t,
    top: t.y,
    left: t.x,
    right: t.x + t.width,
    bottom: t.y + t.height
  };
}
async function B6(t, e) {
  var n;
  e === void 0 && (e = {});
  const {
    x: i,
    y: r,
    platform: s,
    rects: o,
    elements: l,
    strategy: a
  } = t, {
    boundary: c = "clippingAncestors",
    rootBoundary: u = "viewport",
    elementContext: f = "floating",
    altBoundary: h = !1,
    padding: d = 0
  } = e, p = fF(d), _ = l[h ? f === "floating" ? "reference" : "floating" : f], m = Zh(await s.getClippingRect({
    element: (n = await (s.isElement == null ? void 0 : s.isElement(_))) == null || n ? _ : _.contextElement || await (s.getDocumentElement == null ? void 0 : s.getDocumentElement(l.floating)),
    boundary: c,
    rootBoundary: u,
    strategy: a
  })), C = f === "floating" ? {
    ...o.floating,
    x: i,
    y: r
  } : o.reference, v = await (s.getOffsetParent == null ? void 0 : s.getOffsetParent(l.floating)), k = await (s.isElement == null ? void 0 : s.isElement(v)) ? await (s.getScale == null ? void 0 : s.getScale(v)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, S = Zh(s.convertOffsetParentRelativeRectToViewportRelativeRect ? await s.convertOffsetParentRelativeRectToViewportRelativeRect({
    rect: C,
    offsetParent: v,
    strategy: a
  }) : C);
  return process.env.NODE_ENV, {
    top: (m.top - S.top + p.top) / k.y,
    bottom: (S.bottom - m.bottom + p.bottom) / k.y,
    left: (m.left - S.left + p.left) / k.x,
    right: (S.right - m.right + p.right) / k.x
  };
}
const hF = Math.min, dF = Math.max;
function zw(t, e, n) {
  return dF(t, hF(e, n));
}
const pF = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function $h(t) {
  return t.replace(/left|right|bottom|top/g, (e) => pF[e]);
}
function gF(t, e, n) {
  n === void 0 && (n = !1);
  const i = ib(t), r = Op(t), s = j6(r);
  let o = r === "x" ? i === (n ? "end" : "start") ? "right" : "left" : i === "start" ? "bottom" : "top";
  return e.reference[s] > e.floating[s] && (o = $h(o)), {
    main: o,
    cross: $h(o)
  };
}
const mF = {
  start: "end",
  end: "start"
};
function Vw(t) {
  return t.replace(/start|end/g, (e) => mF[e]);
}
function bF(t) {
  const e = $h(t);
  return [Vw(t), e, Vw(e)];
}
const _F = function(t) {
  return t === void 0 && (t = {}), {
    name: "flip",
    options: t,
    async fn(e) {
      var n;
      const {
        placement: i,
        middlewareData: r,
        rects: s,
        initialPlacement: o,
        platform: l,
        elements: a
      } = e, {
        mainAxis: c = !0,
        crossAxis: u = !0,
        fallbackPlacements: f,
        fallbackStrategy: h = "bestFit",
        flipAlignment: d = !0,
        ...p
      } = t, g = qu(i), m = f || (g === o || !d ? [$h(o)] : bF(o)), C = [o, ...m], v = await B6(e, p), k = [];
      let S = ((n = r.flip) == null ? void 0 : n.overflows) || [];
      if (c && k.push(v[g]), u) {
        const {
          main: D,
          cross: R
        } = gF(i, s, await (l.isRTL == null ? void 0 : l.isRTL(a.floating)));
        k.push(v[D], v[R]);
      }
      if (S = [...S, {
        placement: i,
        overflows: k
      }], !k.every((D) => D <= 0)) {
        var O, w;
        const D = ((O = (w = r.flip) == null ? void 0 : w.index) != null ? O : 0) + 1, R = C[D];
        if (R)
          return {
            data: {
              index: D,
              overflows: S
            },
            reset: {
              placement: R
            }
          };
        let M = "bottom";
        switch (h) {
          case "bestFit": {
            var A;
            const H = (A = S.map((J) => [J, J.overflows.filter((I) => I > 0).reduce((I, z) => I + z, 0)]).sort((J, I) => J[1] - I[1])[0]) == null ? void 0 : A[0].placement;
            H && (M = H);
            break;
          }
          case "initialPlacement":
            M = o;
            break;
        }
        if (i !== M)
          return {
            reset: {
              placement: M
            }
          };
      }
      return {};
    }
  };
};
async function yF(t, e) {
  const {
    placement: n,
    platform: i,
    elements: r
  } = t, s = await (i.isRTL == null ? void 0 : i.isRTL(r.floating)), o = qu(n), l = ib(n), a = Op(n) === "x", c = ["left", "top"].includes(o) ? -1 : 1, u = s && a ? -1 : 1, f = typeof e == "function" ? e(t) : e;
  let {
    mainAxis: h,
    crossAxis: d,
    alignmentAxis: p
  } = typeof f == "number" ? {
    mainAxis: f,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...f
  };
  return l && typeof p == "number" && (d = l === "end" ? p * -1 : p), a ? {
    x: d * u,
    y: h * c
  } : {
    x: h * c,
    y: d * u
  };
}
const wF = function(t) {
  return t === void 0 && (t = 0), {
    name: "offset",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i
      } = e, r = await yF(e, t);
      return {
        x: n + r.x,
        y: i + r.y,
        data: r
      };
    }
  };
};
function vF(t) {
  return t === "x" ? "y" : "x";
}
const kF = function(t) {
  return t === void 0 && (t = {}), {
    name: "shift",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i,
        placement: r
      } = e, {
        mainAxis: s = !0,
        crossAxis: o = !1,
        limiter: l = {
          fn: (_) => {
            let {
              x: m,
              y: C
            } = _;
            return {
              x: m,
              y: C
            };
          }
        },
        ...a
      } = t, c = {
        x: n,
        y: i
      }, u = await B6(e, a), f = Op(qu(r)), h = vF(f);
      let d = c[f], p = c[h];
      if (s) {
        const _ = f === "y" ? "top" : "left", m = f === "y" ? "bottom" : "right", C = d + u[_], v = d - u[m];
        d = zw(C, d, v);
      }
      if (o) {
        const _ = h === "y" ? "top" : "left", m = h === "y" ? "bottom" : "right", C = p + u[_], v = p - u[m];
        p = zw(C, p, v);
      }
      const g = l.fn({
        ...e,
        [f]: d,
        [h]: p
      });
      return {
        ...g,
        data: {
          x: g.x - n,
          y: g.y - i
        }
      };
    }
  };
};
function so(t) {
  var e;
  return ((e = t.ownerDocument) == null ? void 0 : e.defaultView) || window;
}
function Ss(t) {
  return so(t).getComputedStyle(t);
}
function xo(t) {
  return F6(t) ? (t.nodeName || "").toLowerCase() : "";
}
let Ef;
function x6() {
  if (Ef)
    return Ef;
  const t = navigator.userAgentData;
  return t && Array.isArray(t.brands) ? (Ef = t.brands.map((e) => e.brand + "/" + e.version).join(" "), Ef) : navigator.userAgent;
}
function Es(t) {
  return t instanceof so(t).HTMLElement;
}
function _r(t) {
  return t instanceof so(t).Element;
}
function F6(t) {
  return t instanceof so(t).Node;
}
function Uw(t) {
  if (typeof ShadowRoot > "u")
    return !1;
  const e = so(t).ShadowRoot;
  return t instanceof e || t instanceof ShadowRoot;
}
function Tp(t) {
  const {
    overflow: e,
    overflowX: n,
    overflowY: i,
    display: r
  } = Ss(t);
  return /auto|scroll|overlay|hidden/.test(e + i + n) && !["inline", "contents"].includes(r);
}
function CF(t) {
  return ["table", "td", "th"].includes(xo(t));
}
function rb(t) {
  const e = /firefox/i.test(x6()), n = Ss(t), i = n.backdropFilter || n.WebkitBackdropFilter;
  return n.transform !== "none" || n.perspective !== "none" || (i ? i !== "none" : !1) || e && n.willChange === "filter" || e && (n.filter ? n.filter !== "none" : !1) || ["transform", "perspective"].some((r) => n.willChange.includes(r)) || ["paint", "layout", "strict", "content"].some(
    (r) => {
      const s = n.contain;
      return s != null ? s.includes(r) : !1;
    }
  );
}
function z6() {
  return !/^((?!chrome|android).)*safari/i.test(x6());
}
function sb(t) {
  return ["html", "body", "#document"].includes(xo(t));
}
const Hw = Math.min, xc = Math.max, Ww = Math.round, o1 = {
  x: 1,
  y: 1
};
function lu(t) {
  const e = !_r(t) && t.contextElement ? t.contextElement : _r(t) ? t : null;
  if (!e)
    return o1;
  const n = e.getBoundingClientRect(), i = Ss(e);
  if (i.boxSizing !== "border-box")
    return Es(e) ? {
      x: e.offsetWidth > 0 && Ww(n.width) / e.offsetWidth || 1,
      y: e.offsetHeight > 0 && Ww(n.height) / e.offsetHeight || 1
    } : o1;
  let r = n.width / parseFloat(i.width), s = n.height / parseFloat(i.height);
  return (!r || !Number.isFinite(r)) && (r = 1), (!s || !Number.isFinite(s)) && (s = 1), {
    x: r,
    y: s
  };
}
function Fo(t, e, n, i) {
  var r, s, o, l;
  e === void 0 && (e = !1), n === void 0 && (n = !1);
  const a = t.getBoundingClientRect();
  let c = o1;
  e && (i ? _r(i) && (c = lu(i)) : c = lu(t));
  const u = _r(t) ? so(t) : window, f = !z6() && n, h = (a.left + (f && (r = (s = u.visualViewport) == null ? void 0 : s.offsetLeft) != null ? r : 0)) / c.x, d = (a.top + (f && (o = (l = u.visualViewport) == null ? void 0 : l.offsetTop) != null ? o : 0)) / c.y, p = a.width / c.x, g = a.height / c.y;
  return {
    width: p,
    height: g,
    top: d,
    right: h + p,
    bottom: d + g,
    left: h,
    x: h,
    y: d
  };
}
function Xo(t) {
  return ((F6(t) ? t.ownerDocument : t.document) || window.document).documentElement;
}
function Rp(t) {
  return _r(t) ? {
    scrollLeft: t.scrollLeft,
    scrollTop: t.scrollTop
  } : {
    scrollLeft: t.pageXOffset,
    scrollTop: t.pageYOffset
  };
}
function V6(t) {
  return Fo(Xo(t)).left + Rp(t).scrollLeft;
}
function SF(t, e, n) {
  const i = Es(e), r = Xo(e), s = Fo(t, !0, n === "fixed", e);
  let o = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = {
    x: 0,
    y: 0
  };
  if (i || !i && n !== "fixed")
    if ((xo(e) !== "body" || Tp(r)) && (o = Rp(e)), Es(e)) {
      const a = Fo(e, !0);
      l.x = a.x + e.clientLeft, l.y = a.y + e.clientTop;
    } else
      r && (l.x = V6(r));
  return {
    x: s.left + o.scrollLeft - l.x,
    y: s.top + o.scrollTop - l.y,
    width: s.width,
    height: s.height
  };
}
function au(t) {
  if (xo(t) === "html")
    return t;
  const e = t.assignedSlot || t.parentNode || (Uw(t) ? t.host : null) || Xo(t);
  return Uw(e) ? e.host : e;
}
function qw(t) {
  return !Es(t) || Ss(t).position === "fixed" ? null : t.offsetParent;
}
function EF(t) {
  let e = au(t);
  for (; Es(e) && !sb(e); ) {
    if (rb(e))
      return e;
    e = au(e);
  }
  return null;
}
function Jw(t) {
  const e = so(t);
  let n = qw(t);
  for (; n && CF(n) && Ss(n).position === "static"; )
    n = qw(n);
  return n && (xo(n) === "html" || xo(n) === "body" && Ss(n).position === "static" && !rb(n)) ? e : n || EF(t) || e;
}
function AF(t) {
  if (Es(t))
    return {
      width: t.offsetWidth,
      height: t.offsetHeight
    };
  const e = Fo(t);
  return {
    width: e.width,
    height: e.height
  };
}
function MF(t) {
  let {
    rect: e,
    offsetParent: n,
    strategy: i
  } = t;
  const r = Es(n), s = Xo(n);
  if (n === s)
    return e;
  let o = {
    scrollLeft: 0,
    scrollTop: 0
  }, l = {
    x: 1,
    y: 1
  };
  const a = {
    x: 0,
    y: 0
  };
  if ((r || !r && i !== "fixed") && ((xo(n) !== "body" || Tp(s)) && (o = Rp(n)), Es(n))) {
    const c = Fo(n);
    l = lu(n), a.x = c.x + n.clientLeft, a.y = c.y + n.clientTop;
  }
  return {
    width: e.width * l.x,
    height: e.height * l.y,
    x: e.x * l.x - o.scrollLeft * l.x + a.x,
    y: e.y * l.y - o.scrollTop * l.y + a.y
  };
}
function OF(t, e) {
  const n = so(t), i = Xo(t), r = n.visualViewport;
  let s = i.clientWidth, o = i.clientHeight, l = 0, a = 0;
  if (r) {
    s = r.width, o = r.height;
    const c = z6();
    (c || !c && e === "fixed") && (l = r.offsetLeft, a = r.offsetTop);
  }
  return {
    width: s,
    height: o,
    x: l,
    y: a
  };
}
function TF(t) {
  var e;
  const n = Xo(t), i = Rp(t), r = (e = t.ownerDocument) == null ? void 0 : e.body, s = xc(n.scrollWidth, n.clientWidth, r ? r.scrollWidth : 0, r ? r.clientWidth : 0), o = xc(n.scrollHeight, n.clientHeight, r ? r.scrollHeight : 0, r ? r.clientHeight : 0);
  let l = -i.scrollLeft + V6(t);
  const a = -i.scrollTop;
  return Ss(r || n).direction === "rtl" && (l += xc(n.clientWidth, r ? r.clientWidth : 0) - s), {
    width: s,
    height: o,
    x: l,
    y: a
  };
}
function U6(t) {
  const e = au(t);
  return sb(e) ? t.ownerDocument.body : Es(e) && Tp(e) ? e : U6(e);
}
function Fc(t, e) {
  var n;
  e === void 0 && (e = []);
  const i = U6(t), r = i === ((n = t.ownerDocument) == null ? void 0 : n.body), s = so(i);
  return r ? e.concat(s, s.visualViewport || [], Tp(i) ? i : []) : e.concat(i, Fc(i));
}
function RF(t, e) {
  const n = Fo(t, !0, e === "fixed"), i = n.top + t.clientTop, r = n.left + t.clientLeft, s = Es(t) ? lu(t) : {
    x: 1,
    y: 1
  }, o = t.clientWidth * s.x, l = t.clientHeight * s.y, a = r * s.x, c = i * s.y;
  return {
    top: c,
    left: a,
    right: a + o,
    bottom: c + l,
    x: a,
    y: c,
    width: o,
    height: l
  };
}
function Kw(t, e, n) {
  return e === "viewport" ? Zh(OF(t, n)) : _r(e) ? RF(e, n) : Zh(TF(Xo(t)));
}
function PF(t, e) {
  const n = e.get(t);
  if (n)
    return n;
  let i = Fc(t).filter((l) => _r(l) && xo(l) !== "body"), r = null;
  const s = Ss(t).position === "fixed";
  let o = s ? au(t) : t;
  for (; _r(o) && !sb(o); ) {
    const l = Ss(o), a = rb(o);
    (s ? !a && !r : !a && l.position === "static" && !!r && ["absolute", "fixed"].includes(r.position)) ? i = i.filter((u) => u !== o) : r = l, o = au(o);
  }
  return e.set(t, i), i;
}
function IF(t) {
  let {
    element: e,
    boundary: n,
    rootBoundary: i,
    strategy: r
  } = t;
  const o = [...n === "clippingAncestors" ? PF(e, this._c) : [].concat(n), i], l = o[0], a = o.reduce((c, u) => {
    const f = Kw(e, u, r);
    return c.top = xc(f.top, c.top), c.right = Hw(f.right, c.right), c.bottom = Hw(f.bottom, c.bottom), c.left = xc(f.left, c.left), c;
  }, Kw(e, l, r));
  return {
    width: a.right - a.left,
    height: a.bottom - a.top,
    x: a.left,
    y: a.top
  };
}
const DF = {
  getClippingRect: IF,
  convertOffsetParentRelativeRectToViewportRelativeRect: MF,
  isElement: _r,
  getDimensions: AF,
  getOffsetParent: Jw,
  getDocumentElement: Xo,
  getScale: lu,
  async getElementRects(t) {
    let {
      reference: e,
      floating: n,
      strategy: i
    } = t;
    const r = this.getOffsetParent || Jw, s = this.getDimensions;
    return {
      reference: SF(e, await r(n), i),
      floating: {
        x: 0,
        y: 0,
        ...await s(n)
      }
    };
  },
  getClientRects: (t) => Array.from(t.getClientRects()),
  isRTL: (t) => Ss(t).direction === "rtl"
};
function NF(t, e, n, i) {
  i === void 0 && (i = {});
  const {
    ancestorScroll: r = !0,
    ancestorResize: s = !0,
    elementResize: o = !0,
    animationFrame: l = !1
  } = i, a = r && !l, c = a || s ? [..._r(t) ? Fc(t) : t.contextElement ? Fc(t.contextElement) : [], ...Fc(e)] : [];
  c.forEach((p) => {
    a && p.addEventListener("scroll", n, {
      passive: !0
    }), s && p.addEventListener("resize", n);
  });
  let u = null;
  if (o) {
    let p = !0;
    u = new ResizeObserver(() => {
      p || n(), p = !1;
    }), _r(t) && !l && u.observe(t), !_r(t) && t.contextElement && !l && u.observe(t.contextElement), u.observe(e);
  }
  let f, h = l ? Fo(t) : null;
  l && d();
  function d() {
    const p = Fo(t);
    h && (p.x !== h.x || p.y !== h.y || p.width !== h.width || p.height !== h.height) && n(), h = p, f = requestAnimationFrame(d);
  }
  return n(), () => {
    var p;
    c.forEach((g) => {
      a && g.removeEventListener("scroll", n), s && g.removeEventListener("resize", n);
    }), (p = u) == null || p.disconnect(), u = null, l && cancelAnimationFrame(f);
  };
}
const LF = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = {
    platform: DF,
    ...n
  }, s = {
    ...r.platform,
    _c: i
  };
  return cF(t, e, {
    ...r,
    platform: s
  });
}, $l = [];
function jF(t, e) {
  return {
    subscribe: BF(t, e).subscribe
  };
}
function BF(t, e = ve) {
  let n;
  const i = /* @__PURE__ */ new Set();
  function r(l) {
    if (xt(t, l) && (t = l, n)) {
      const a = !$l.length;
      for (const c of i)
        c[1](), $l.push(c, t);
      if (a) {
        for (let c = 0; c < $l.length; c += 2)
          $l[c][0]($l[c + 1]);
        $l.length = 0;
      }
    }
  }
  function s(l) {
    r(l(t));
  }
  function o(l, a = ve) {
    const c = [l, a];
    return i.add(c), i.size === 1 && (n = e(r) || ve), l(t), () => {
      i.delete(c), i.size === 0 && (n(), n = null);
    };
  }
  return { set: r, update: s, subscribe: o };
}
function xF(t) {
  let e, n;
  const i = {
    autoUpdate: !0
  };
  let r = t;
  const s = (c) => ({ ...i, ...t || {}, ...c || {} }), o = (c) => {
    e && n && (r = s(c), LF(e, n, r).then((u) => {
      Object.assign(n.style, {
        position: u.strategy,
        left: `${u.x}px`,
        top: `${u.y}px`
      }), r != null && r.onComputed && r.onComputed(u);
    }));
  };
  return [
    (c) => {
      e = c, o();
    },
    (c, u) => {
      let f;
      n = c, r = s(u), setTimeout(() => o(u), 0), o(u);
      const h = () => {
        f && (f(), f = void 0);
      }, d = ({ autoUpdate: p } = r || {}) => {
        if (h(), p !== !1)
          return NF(e, n, () => o(r), p === !0 ? {} : p);
      };
      return f = d(), {
        update(p) {
          o(p), f = d(p);
        },
        destroy() {
          h();
        }
      };
    },
    o
  ];
}
function FF({
  loadOptions: t,
  filterText: e,
  items: n,
  multiple: i,
  value: r,
  itemId: s,
  groupBy: o,
  filterSelectedItems: l,
  itemFilter: a,
  convertStringItemsToObjects: c,
  filterGroupedItems: u,
  label: f
}) {
  if (n && t)
    return n;
  if (!n)
    return [];
  n && n.length > 0 && typeof n[0] != "object" && (n = c(n));
  let h = n.filter((d) => {
    let p = a(d[f], e, d);
    return p && i && (r != null && r.length) && (p = !r.some((g) => l ? g[s] === d[s] : !1)), p;
  });
  return o && (h = u(h)), h;
}
async function zF({ dispatch: t, loadOptions: e, convertStringItemsToObjects: n, filterText: i }) {
  let r = await e(i).catch((s) => {
    console.warn("svelte-select loadOptions error :>> ", s), t("error", { type: "loadOptions", details: s });
  });
  if (r && !r.cancelled)
    return r ? (r && r.length > 0 && typeof r[0] != "object" && (r = n(r)), t("loaded", { items: r })) : r = [], {
      filteredItems: r,
      loading: !1,
      focused: !0,
      listOpen: !0
    };
}
function VF(t) {
  let e, n;
  return {
    c() {
      e = bt("svg"), n = bt("path"), b(n, "fill", "currentColor"), b(n, "d", `M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`), b(e, "width", "100%"), b(e, "height", "100%"), b(e, "viewBox", "0 0 20 20"), b(e, "focusable", "false"), b(e, "aria-hidden", "true"), b(e, "class", "svelte-qbd276");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ve,
    i: ve,
    o: ve,
    d(i) {
      i && V(e);
    }
  };
}
class UF extends Qe {
  constructor(e) {
    super(), Xe(this, e, null, VF, xt, {});
  }
}
function HF(t) {
  let e, n;
  return {
    c() {
      e = bt("svg"), n = bt("path"), b(n, "fill", "currentColor"), b(n, "d", `M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`), b(e, "width", "100%"), b(e, "height", "100%"), b(e, "viewBox", "-2 -2 50 50"), b(e, "focusable", "false"), b(e, "aria-hidden", "true"), b(e, "role", "presentation"), b(e, "class", "svelte-whdbu1");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ve,
    i: ve,
    o: ve,
    d(i) {
      i && V(e);
    }
  };
}
class ed extends Qe {
  constructor(e) {
    super(), Xe(this, e, null, HF, xt, {});
  }
}
function WF(t) {
  let e, n;
  return {
    c() {
      e = bt("svg"), n = bt("circle"), b(n, "class", "circle_path svelte-1p3nqvd"), b(n, "cx", "50"), b(n, "cy", "50"), b(n, "r", "20"), b(n, "fill", "none"), b(n, "stroke", "currentColor"), b(n, "stroke-width", "5"), b(n, "stroke-miterlimit", "10"), b(e, "class", "loading svelte-1p3nqvd"), b(e, "viewBox", "25 25 50 50");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ve,
    i: ve,
    o: ve,
    d(i) {
      i && V(e);
    }
  };
}
class qF extends Qe {
  constructor(e) {
    super(), Xe(this, e, null, WF, xt, {});
  }
}
const JF = (t) => ({ value: t[0] & 8 }), Gw = (t) => ({ value: t[3] }), KF = (t) => ({ listOpen: t[0] & 64 }), Yw = (t) => ({ listOpen: t[6] }), GF = (t) => ({}), Xw = (t) => ({}), YF = (t) => ({}), Qw = (t) => ({}), XF = (t) => ({ selection: t[0] & 8 }), Zw = (t) => ({ selection: t[3] });
function $w(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const QF = (t) => ({}), e2 = (t) => ({}), ZF = (t) => ({ selection: t[0] & 8 }), t2 = (t) => ({
  selection: t[127],
  index: t[129]
}), $F = (t) => ({}), n2 = (t) => ({}), ez = (t) => ({}), i2 = (t) => ({});
function r2(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const tz = (t) => ({
  item: t[0] & 16777216
}), s2 = (t) => ({
  item: t[127],
  index: t[129]
}), nz = (t) => ({
  filteredItems: t[0] & 16777216
}), o2 = (t) => ({ filteredItems: t[24] });
function l2(t) {
  let e, n, i, r, s, o;
  const l = [sz, rz, iz], a = [];
  function c(u, f) {
    return u[50].list ? 0 : u[24].length > 0 ? 1 : u[19] ? -1 : 2;
  }
  return ~(n = c(t)) && (i = a[n] = l[n](t)), {
    c() {
      e = j("div"), i && i.c(), b(e, "class", "svelte-select-list svelte-18e845"), Ce(e, "prefloat", t[28]);
    },
    m(u, f) {
      U(u, e, f), ~n && a[n].m(e, null), t[91](e), r = !0, s || (o = [
        Wi(t[49].call(null, e)),
        se(e, "scroll", t[41]),
        se(e, "pointerdown", Ye(sr(t[85]))),
        se(e, "pointerup", Ye(sr(t[86])))
      ], s = !0);
    },
    p(u, f) {
      let h = n;
      n = c(u), n === h ? ~n && a[n].p(u, f) : (i && (Se(), x(a[h], 1, 1, () => {
        a[h] = null;
      }), Ee()), ~n ? (i = a[n], i ? i.p(u, f) : (i = a[n] = l[n](u), i.c()), P(i, 1), i.m(e, null)) : i = null), (!r || f[0] & 268435456) && Ce(e, "prefloat", u[28]);
    },
    i(u) {
      r || (P(i), r = !0);
    },
    o(u) {
      x(i), r = !1;
    },
    d(u) {
      u && V(e), ~n && a[n].d(), t[91](null), s = !1, ht(o);
    }
  };
}
function iz(t) {
  let e;
  const n = t[80].empty, i = Vn(n, t, t[79], i2), r = i || oz();
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i && i.p && (!e || o[2] & 131072) && Hn(
        i,
        n,
        s,
        s[79],
        e ? Un(n, s[79], o, ez) : Wn(s[79]),
        i2
      );
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function rz(t) {
  let e, n, i = t[24], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = a2(r2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 1627402376 | l[1] & 28672 | l[2] & 131072) {
        i = o[24];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = r2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = a2(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function sz(t) {
  let e;
  const n = t[80].list, i = Vn(n, t, t[79], o2);
  return {
    c() {
      i && i.c();
    },
    m(r, s) {
      i && i.m(r, s), e = !0;
    },
    p(r, s) {
      i && i.p && (!e || s[0] & 16777216 | s[2] & 131072) && Hn(
        i,
        n,
        r,
        r[79],
        e ? Un(n, r[79], s, nz) : Wn(r[79]),
        o2
      );
    },
    i(r) {
      e || (P(i, r), e = !0);
    },
    o(r) {
      x(i, r), e = !1;
    },
    d(r) {
      i && i.d(r);
    }
  };
}
function oz(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "No options", b(e, "class", "empty svelte-18e845");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function lz(t) {
  var i;
  let e = ((i = t[127]) == null ? void 0 : i[t[12]]) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(r, s) {
      U(r, n, s);
    },
    p(r, s) {
      var o;
      s[0] & 16781312 && e !== (e = ((o = r[127]) == null ? void 0 : o[r[12]]) + "") && ze(n, e);
    },
    d(r) {
      r && V(n);
    }
  };
}
function a2(t) {
  let e, n, i, r, s, o, l, a;
  const c = t[80].item, u = Vn(c, t, t[79], s2), f = u || lz(t);
  function h() {
    return t[88](t[129]);
  }
  function d() {
    return t[89](t[129]);
  }
  function p() {
    return t[90](t[127], t[129]);
  }
  return {
    c() {
      var g;
      e = j("div"), n = j("div"), f && f.c(), s = Q(), b(n, "class", "item svelte-18e845"), Ce(n, "list-group-title", t[127].groupHeader), Ce(n, "active", t[45](t[127], t[3], t[13])), Ce(n, "first", _z(t[129])), Ce(n, "hover", t[7] === t[129]), Ce(n, "group-item", t[127].groupItem), Ce(n, "not-selectable", ((g = t[127]) == null ? void 0 : g.selectable) === !1), b(e, "class", "list-item svelte-18e845"), b(e, "tabindex", "-1");
    },
    m(g, _) {
      U(g, e, _), E(e, n), f && f.m(n, null), E(e, s), o = !0, l || (a = [
        Wi(i = t[46].call(null, n, {
          scroll: t[45](t[127], t[3], t[13]),
          listDom: t[30]
        })),
        Wi(r = t[47].call(null, n, {
          scroll: t[29] === t[129],
          listDom: t[30]
        })),
        se(e, "mouseover", h),
        se(e, "focus", d),
        se(e, "click", Ye(p)),
        se(e, "keydown", Ye(sr(t[87])))
      ], l = !0);
    },
    p(g, _) {
      var m;
      t = g, u ? u.p && (!o || _[0] & 16777216 | _[2] & 131072) && Hn(
        u,
        c,
        t,
        t[79],
        o ? Un(c, t[79], _, tz) : Wn(t[79]),
        s2
      ) : f && f.p && (!o || _[0] & 16781312) && f.p(t, o ? _ : [-1, -1, -1, -1, -1]), i && hi(i.update) && _[0] & 1090527240 && i.update.call(null, {
        scroll: t[45](t[127], t[3], t[13]),
        listDom: t[30]
      }), r && hi(r.update) && _[0] & 1610612736 && r.update.call(null, {
        scroll: t[29] === t[129],
        listDom: t[30]
      }), (!o || _[0] & 16777216) && Ce(n, "list-group-title", t[127].groupHeader), (!o || _[0] & 16785416 | _[1] & 16384) && Ce(n, "active", t[45](t[127], t[3], t[13])), (!o || _[0] & 128) && Ce(n, "hover", t[7] === t[129]), (!o || _[0] & 16777216) && Ce(n, "group-item", t[127].groupItem), (!o || _[0] & 16777216) && Ce(n, "not-selectable", ((m = t[127]) == null ? void 0 : m.selectable) === !1);
    },
    i(g) {
      o || (P(f, g), o = !0);
    },
    o(g) {
      x(f, g), o = !1;
    },
    d(g) {
      g && V(e), f && f.d(g), l = !1, ht(a);
    }
  };
}
function c2(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("span"), n = we(t[32]), i = Q(), r = j("span"), s = we(t[31]), b(e, "id", "aria-selection"), b(e, "class", "svelte-18e845"), b(r, "id", "aria-context"), b(r, "class", "svelte-18e845");
    },
    m(o, l) {
      U(o, e, l), E(e, n), U(o, i, l), U(o, r, l), E(r, s);
    },
    p(o, l) {
      l[1] & 2 && ze(n, o[32]), l[1] & 1 && ze(s, o[31]);
    },
    d(o) {
      o && V(e), o && V(i), o && V(r);
    }
  };
}
function u2(t) {
  let e, n, i, r;
  const s = [cz, az], o = [];
  function l(a, c) {
    return a[9] ? 0 : 1;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = ot();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Se(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Ee(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function az(t) {
  let e, n;
  const i = t[80].selection, r = Vn(i, t, t[79], Zw), s = r || uz(t);
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "selected-item svelte-18e845"), Ce(e, "hide-selected-item", t[35]);
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r ? r.p && (!n || l[0] & 8 | l[2] & 131072) && Hn(
        r,
        i,
        o,
        o[79],
        n ? Un(i, o[79], l, XF) : Wn(o[79]),
        Zw
      ) : s && s.p && (!n || l[0] & 4104) && s.p(o, n ? l : [-1, -1, -1, -1, -1]), (!n || l[1] & 16) && Ce(e, "hide-selected-item", o[35]);
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function cz(t) {
  let e, n, i = t[3], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = h2($w(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 67116040 | l[1] & 32 | l[2] & 131072) {
        i = o[3];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = $w(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = h2(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function uz(t) {
  let e = t[3][t[12]] + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[3][i[12]] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function fz(t) {
  let e = t[127][t[12]] + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[127][i[12]] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function f2(t) {
  let e, n, i, r;
  const s = t[80]["multi-clear-icon"], o = Vn(s, t, t[79], e2), l = o || hz();
  function a() {
    return t[92](t[129]);
  }
  return {
    c() {
      e = j("div"), l && l.c(), b(e, "class", "multi-item-clear svelte-18e845");
    },
    m(c, u) {
      U(c, e, u), l && l.m(e, null), n = !0, i || (r = [
        se(e, "pointerdown", Ye(sr(t[83]))),
        se(e, "click", a),
        se(e, "keydown", Ye(sr(t[84])))
      ], i = !0);
    },
    p(c, u) {
      t = c, o && o.p && (!n || u[2] & 131072) && Hn(
        o,
        s,
        t,
        t[79],
        n ? Un(s, t[79], u, QF) : Wn(t[79]),
        e2
      );
    },
    i(c) {
      n || (P(l, c), n = !0);
    },
    o(c) {
      x(l, c), n = !1;
    },
    d(c) {
      c && V(e), l && l.d(c), i = !1, ht(r);
    }
  };
}
function hz(t) {
  let e, n;
  return e = new ed({}), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function h2(t) {
  let e, n, i, r, s, o, l;
  const a = t[80].selection, c = Vn(a, t, t[79], t2), u = c || fz(t);
  let f = !t[11] && !t[10] && ed && f2(t);
  function h() {
    return t[93](t[129]);
  }
  return {
    c() {
      e = j("div"), n = j("span"), u && u.c(), i = Q(), f && f.c(), r = Q(), b(n, "class", "multi-item-text svelte-18e845"), b(e, "class", "multi-item svelte-18e845"), Ce(e, "active", t[26] === t[129]), Ce(e, "disabled", t[11]);
    },
    m(d, p) {
      U(d, e, p), E(e, n), u && u.m(n, null), E(e, i), f && f.m(e, null), E(e, r), s = !0, o || (l = [
        se(e, "click", sr(h)),
        se(e, "keydown", Ye(sr(t[82])))
      ], o = !0);
    },
    p(d, p) {
      t = d, c ? c.p && (!s || p[0] & 8 | p[2] & 131072) && Hn(
        c,
        a,
        t,
        t[79],
        s ? Un(a, t[79], p, ZF) : Wn(t[79]),
        t2
      ) : u && u.p && (!s || p[0] & 4104) && u.p(t, s ? p : [-1, -1, -1, -1, -1]), !t[11] && !t[10] && ed ? f ? (f.p(t, p), p[0] & 3072 && P(f, 1)) : (f = f2(t), f.c(), P(f, 1), f.m(e, r)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), (!s || p[0] & 67108864) && Ce(e, "active", t[26] === t[129]), (!s || p[0] & 2048) && Ce(e, "disabled", t[11]);
    },
    i(d) {
      s || (P(u, d), P(f), s = !0);
    },
    o(d) {
      x(u, d), x(f), s = !1;
    },
    d(d) {
      d && V(e), u && u.d(d), f && f.d(), o = !1, ht(l);
    }
  };
}
function d2(t) {
  let e, n;
  const i = t[80]["loading-icon"], r = Vn(i, t, t[79], Qw), s = r || dz();
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "icon loading svelte-18e845"), b(e, "aria-hidden", "true");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r && r.p && (!n || l[2] & 131072) && Hn(
        r,
        i,
        o,
        o[79],
        n ? Un(i, o[79], l, YF) : Wn(o[79]),
        Qw
      );
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function dz(t) {
  let e, n;
  return e = new qF({}), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function p2(t) {
  let e, n, i, r;
  const s = t[80]["clear-icon"], o = Vn(s, t, t[79], Xw), l = o || pz();
  return {
    c() {
      e = j("button"), l && l.c(), b(e, "class", "icon clear-select svelte-18e845"), b(e, "tabindex", "0");
    },
    m(a, c) {
      U(a, e, c), l && l.m(e, null), n = !0, i || (r = [
        se(e, "click", Ye(sr(t[22]))),
        se(e, "pointerdown", Ye(sr(t[81])))
      ], i = !0);
    },
    p(a, c) {
      o && o.p && (!n || c[2] & 131072) && Hn(
        o,
        s,
        a,
        a[79],
        n ? Un(s, a[79], c, GF) : Wn(a[79]),
        Xw
      );
    },
    i(a) {
      n || (P(l, a), n = !0);
    },
    o(a) {
      x(l, a), n = !1;
    },
    d(a) {
      a && V(e), l && l.d(a), i = !1, ht(r);
    }
  };
}
function pz(t) {
  let e, n;
  return e = new ed({}), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function g2(t) {
  let e, n;
  const i = t[80]["chevron-icon"], r = Vn(i, t, t[79], Yw), s = r || gz();
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "icon chevron svelte-18e845"), b(e, "aria-hidden", "true");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r && r.p && (!n || l[0] & 64 | l[2] & 131072) && Hn(
        r,
        i,
        o,
        o[79],
        n ? Un(i, o[79], l, KF) : Wn(o[79]),
        Yw
      );
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function gz(t) {
  let e, n;
  return e = new UF({}), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function m2(t) {
  let e;
  const n = t[80].required, i = Vn(n, t, t[79], Gw), r = i || mz();
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i && i.p && (!e || o[0] & 8 | o[2] & 131072) && Hn(
        i,
        n,
        s,
        s[79],
        e ? Un(n, s[79], o, JF) : Wn(s[79]),
        Gw
      );
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function mz(t) {
  let e;
  return {
    c() {
      e = j("select"), b(e, "class", "required svelte-18e845"), e.required = !0;
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function bz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w = t[6] && l2(t), A = t[2] && c2(t);
  const D = t[80].prepend, R = Vn(D, t, t[79], n2);
  let M = t[25] && u2(t), H = [
    {
      readOnly: u = !t[17]
    },
    t[27],
    { placeholder: t[33] },
    { style: t[18] },
    { disabled: t[11] }
  ], J = {};
  for (let F = 0; F < H.length; F += 1)
    J = Go(J, H[F]);
  let I = t[5] && d2(t), z = t[34] && p2(t), L = t[20] && g2(t), K = t[16] && (!t[3] || t[3].length === 0) && m2(t);
  return {
    c() {
      e = j("div"), w && w.c(), n = Q(), i = j("span"), A && A.c(), r = Q(), s = j("div"), R && R.c(), o = Q(), l = j("div"), M && M.c(), a = Q(), c = j("input"), f = Q(), h = j("div"), I && I.c(), d = Q(), z && z.c(), p = Q(), L && L.c(), g = Q(), _ = j("input"), C = Q(), K && K.c(), b(i, "aria-live", "polite"), b(i, "aria-atomic", "false"), b(i, "aria-relevant", "additions text"), b(i, "class", "a11y-text svelte-18e845"), b(s, "class", "prepend svelte-18e845"), V_(c, J), Ce(c, "svelte-18e845", !0), b(l, "class", "value-container svelte-18e845"), b(h, "class", "indicators svelte-18e845"), b(_, "name", t[8]), b(_, "type", "hidden"), _.value = m = t[3] ? JSON.stringify(t[3]) : null, b(_, "class", "svelte-18e845"), b(e, "class", v = "svelte-select " + t[21] + " svelte-18e845"), b(e, "style", t[14]), Ce(e, "multi", t[9]), Ce(e, "disabled", t[11]), Ce(e, "focused", t[2]), Ce(e, "list-open", t[6]), Ce(e, "show-chevron", t[20]), Ce(e, "error", t[15]);
    },
    m(F, N) {
      U(F, e, N), w && w.m(e, null), E(e, n), E(e, i), A && A.m(i, null), E(e, r), E(e, s), R && R.m(s, null), E(e, o), E(e, l), M && M.m(l, null), E(l, a), E(l, c), c.autofocus && c.focus(), t[94](c), Io(c, t[4]), E(e, f), E(e, h), I && I.m(h, null), E(h, d), z && z.m(h, null), E(h, p), L && L.m(h, null), E(e, g), E(e, _), E(e, C), K && K.m(e, null), t[96](e), k = !0, S || (O = [
        se(window, "click", t[42]),
        se(window, "keydown", t[37]),
        se(c, "keydown", t[37]),
        se(c, "blur", t[39]),
        se(c, "focus", t[38]),
        se(c, "input", t[95]),
        se(e, "pointerup", sr(t[40])),
        Wi(t[48].call(null, e))
      ], S = !0);
    },
    p(F, N) {
      F[6] ? w ? (w.p(F, N), N[0] & 64 && P(w, 1)) : (w = l2(F), w.c(), P(w, 1), w.m(e, n)) : w && (Se(), x(w, 1, 1, () => {
        w = null;
      }), Ee()), F[2] ? A ? A.p(F, N) : (A = c2(F), A.c(), A.m(i, null)) : A && (A.d(1), A = null), R && R.p && (!k || N[2] & 131072) && Hn(
        R,
        D,
        F,
        F[79],
        k ? Un(D, F[79], N, $F) : Wn(F[79]),
        n2
      ), F[25] ? M ? (M.p(F, N), N[0] & 33554432 && P(M, 1)) : (M = u2(F), M.c(), P(M, 1), M.m(l, a)) : M && (Se(), x(M, 1, 1, () => {
        M = null;
      }), Ee()), V_(c, J = Ul(H, [
        (!k || N[0] & 131072 && u !== (u = !F[17])) && { readOnly: u },
        N[0] & 134217728 && F[27],
        (!k || N[1] & 4) && { placeholder: F[33] },
        (!k || N[0] & 262144) && { style: F[18] },
        (!k || N[0] & 2048) && { disabled: F[11] }
      ])), N[0] & 16 && c.value !== F[4] && Io(c, F[4]), Ce(c, "svelte-18e845", !0), F[5] ? I ? (I.p(F, N), N[0] & 32 && P(I, 1)) : (I = d2(F), I.c(), P(I, 1), I.m(h, d)) : I && (Se(), x(I, 1, 1, () => {
        I = null;
      }), Ee()), F[34] ? z ? (z.p(F, N), N[1] & 8 && P(z, 1)) : (z = p2(F), z.c(), P(z, 1), z.m(h, p)) : z && (Se(), x(z, 1, 1, () => {
        z = null;
      }), Ee()), F[20] ? L ? (L.p(F, N), N[0] & 1048576 && P(L, 1)) : (L = g2(F), L.c(), P(L, 1), L.m(h, null)) : L && (Se(), x(L, 1, 1, () => {
        L = null;
      }), Ee()), (!k || N[0] & 256) && b(_, "name", F[8]), (!k || N[0] & 8 && m !== (m = F[3] ? JSON.stringify(F[3]) : null)) && (_.value = m), F[16] && (!F[3] || F[3].length === 0) ? K ? (K.p(F, N), N[0] & 65544 && P(K, 1)) : (K = m2(F), K.c(), P(K, 1), K.m(e, null)) : K && (Se(), x(K, 1, 1, () => {
        K = null;
      }), Ee()), (!k || N[0] & 2097152 && v !== (v = "svelte-select " + F[21] + " svelte-18e845")) && b(e, "class", v), (!k || N[0] & 16384) && b(e, "style", F[14]), (!k || N[0] & 2097664) && Ce(e, "multi", F[9]), (!k || N[0] & 2099200) && Ce(e, "disabled", F[11]), (!k || N[0] & 2097156) && Ce(e, "focused", F[2]), (!k || N[0] & 2097216) && Ce(e, "list-open", F[6]), (!k || N[0] & 3145728) && Ce(e, "show-chevron", F[20]), (!k || N[0] & 2129920) && Ce(e, "error", F[15]);
    },
    i(F) {
      k || (P(w), P(R, F), P(M), P(I), P(z), P(L), P(K), k = !0);
    },
    o(F) {
      x(w), x(R, F), x(M), x(I), x(z), x(L), x(K), k = !1;
    },
    d(F) {
      F && V(e), w && w.d(), A && A.d(), R && R.d(F), M && M.d(), t[94](null), I && I.d(), z && z.d(), L && L.d(), K && K.d(), t[96](null), S = !1, ht(O);
    }
  };
}
function b2(t) {
  return t.map((e, n) => ({ index: n, value: e, label: `${e}` }));
}
function _z(t) {
  return t === 0;
}
function yz(t) {
  return t.groupHeader && t.selectable || t.selectable || !t.hasOwnProperty("selectable");
}
function wz(t, e, n) {
  let i, r, s, o, l, a, c, u, f, { $$slots: h = {}, $$scope: d } = e;
  const p = lT(h), g = Vl();
  let { justValue: _ = null } = e, { filter: m = FF } = e, { getItems: C = zF } = e, { id: v = null } = e, { name: k = null } = e, { container: S = void 0 } = e, { input: O = void 0 } = e, { multiple: w = !1 } = e, { multiFullItemClearable: A = !1 } = e, { disabled: D = !1 } = e, { focused: R = !1 } = e, { value: M = null } = e, { filterText: H = "" } = e, { placeholder: J = "Please select" } = e, { placeholderAlwaysShow: I = !1 } = e, { items: z = null } = e, { label: L = "label" } = e, { itemFilter: K = (oe, Je) => `${oe}`.toLowerCase().includes(Je.toLowerCase()) } = e, { groupBy: F = void 0 } = e, { groupFilter: N = (oe) => oe } = e, { groupHeaderSelectable: te = !1 } = e, { itemId: ue = "value" } = e, { loadOptions: q = void 0 } = e, { containerStyles: re = "" } = e, { hasError: ie = !1 } = e, { filterSelectedItems: Z = !0 } = e, { required: Le = !1 } = e, { createGroupHeaderItem: Ie = (oe, Je) => ({ value: oe, [L]: oe }) } = e;
  const Fe = () => c;
  let { searchable: le = !0 } = e, { inputStyles: De = "" } = e, { clearable: Ve = !0 } = e, { loading: ye = !1 } = e, { listOpen: fe = !1 } = e, Ae, { debounce: ae = (oe, Je = 1) => {
    clearTimeout(Ae), Ae = setTimeout(oe, Je);
  } } = e, { debounceWait: $ = 300 } = e, { hideEmptyState: de = !1 } = e, { inputAttributes: he = {} } = e, { listAutoWidth: W = !0 } = e, { showChevron: y = !1 } = e, { listOffset: T = 5 } = e, { hoverItemIndex: B = 0 } = e, { floatingConfig: X = {} } = e, { class: G = "" } = e, ce, Ne, qe, mt;
  function dt() {
    if (typeof M == "string") {
      let oe = z.find((Je) => Je[ue] === M);
      n(3, M = oe || { [ue]: M, label: M });
    } else
      w && Array.isArray(M) && M.length > 0 && n(3, M = M.map((oe) => typeof oe == "string" ? { value: oe, label: oe } : oe));
  }
  let je;
  function vt() {
    n(27, je = Object.assign(
      {
        autocapitalize: "none",
        autocomplete: "off",
        autocorrect: "off",
        spellcheck: !1,
        tabindex: 0,
        type: "text",
        "aria-autocomplete": "list"
      },
      he
    )), v && n(27, je.id = v, je), le || n(27, je.readonly = !0, je);
  }
  function zt(oe) {
    const Je = [], mn = {};
    oe.forEach((co) => {
      const Ar = F(co);
      Je.includes(Ar) || (Je.push(Ar), mn[Ar] = [], Ar && mn[Ar].push(Object.assign(Ie(Ar, co), {
        id: Ar,
        groupHeader: !0,
        selectable: te
      }))), mn[Ar].push(Object.assign({ groupItem: !!Ar }, co));
    });
    const Er = [];
    return N(Je).forEach((co) => {
      mn[co] && Er.push(...mn[co]);
    }), Er;
  }
  function Yt() {
    if (w) {
      JSON.stringify(M) !== JSON.stringify(Ne) && Xn() && g("input", M);
      return;
    }
    (!Ne || JSON.stringify(M[ue]) !== JSON.stringify(Ne[ue])) && g("input", M);
  }
  function Bn() {
    M && (Array.isArray(M) ? n(3, M = [...M]) : n(3, M = [M]));
  }
  function Tt() {
    M && n(3, M = null);
  }
  function Oe() {
    const oe = c.findIndex((Je) => Je[ue] === M[ue]);
    Jt(oe, !0);
  }
  function si(oe) {
    g("hoverItem", oe);
  }
  function Jt(oe = 0, Je) {
    n(7, B = oe), !Je && F && c[B] && !c[B].selectable && bi(1);
  }
  function Kt() {
    !q && H.length === 0 || (q ? ae(
      async function() {
        n(5, ye = !0);
        let oe = await C({
          dispatch: g,
          loadOptions: q,
          convertStringItemsToObjects: b2,
          filterText: H
        });
        oe ? (n(5, ye = oe.loading), n(6, fe = fe ? oe.listOpen : H.length > 0), n(2, R = fe && oe.focused), n(51, z = F ? zt(oe.filteredItems) : oe.filteredItems)) : (n(5, ye = !1), n(2, R = !0), n(6, fe = !0));
      },
      $
    ) : (n(6, fe = !0), w && n(26, ce = void 0)));
  }
  function ln(oe) {
    fe && g("filter", oe);
  }
  bT(async () => {
    n(76, Ne = M), n(77, qe = H), n(78, mt = w);
  });
  function yn() {
    return w ? M ? M.map((oe) => oe[ue]) : null : M && M[ue];
  }
  function Xn() {
    let oe = !0;
    if (M) {
      const Je = [], mn = [];
      M.forEach((Er) => {
        Je.includes(Er[ue]) ? oe = !1 : (Je.push(Er[ue]), mn.push(Er));
      }), oe || n(3, M = mn);
    }
    return oe;
  }
  function en(oe) {
    let Je = oe ? oe[ue] : M[ue];
    return z.find((mn) => mn[ue] === Je);
  }
  function oi(oe) {
    !oe || oe.length === 0 || oe.some((Je) => typeof Je != "object") || !M || (w ? M.some((Je) => !Je || !Je[ue]) : !M[ue]) || (Array.isArray(M) ? n(3, M = M.map((Je) => en(Je) || Je)) : n(3, M = en() || M));
  }
  async function an(oe) {
    const Je = M[oe];
    M.length === 1 ? n(3, M = void 0) : n(3, M = M.filter((mn) => mn !== Je)), g("clear", Je);
  }
  function An(oe) {
    if (R)
      switch (oe.stopPropagation(), oe.key) {
        case "Escape":
          oe.preventDefault(), lt();
          break;
        case "Enter":
          if (oe.preventDefault(), fe) {
            if (c.length === 0)
              break;
            const Je = c[B];
            if (M && !w && M[ue] === Je[ue]) {
              lt();
              break;
            } else
              Zt(c[B]);
          }
          break;
        case "ArrowDown":
          oe.preventDefault(), fe ? bi(1) : (n(6, fe = !0), n(26, ce = void 0));
          break;
        case "ArrowUp":
          oe.preventDefault(), fe ? bi(-1) : (n(6, fe = !0), n(26, ce = void 0));
          break;
        case "Tab":
          if (fe && R) {
            if (c.length === 0 || M && M[ue] === c[B][ue])
              return lt();
            oe.preventDefault(), Zt(c[B]), lt();
          }
          break;
        case "Backspace":
          if (!w || H.length > 0)
            return;
          if (w && M && M.length > 0) {
            if (an(ce !== void 0 ? ce : M.length - 1), ce === 0 || ce === void 0)
              break;
            n(26, ce = M.length > ce ? ce - 1 : void 0);
          }
          break;
        case "ArrowLeft":
          if (!M || !w || H.length > 0)
            return;
          ce === void 0 ? n(26, ce = M.length - 1) : M.length > ce && ce !== 0 && n(26, ce -= 1);
          break;
        case "ArrowRight":
          if (!M || !w || H.length > 0 || ce === void 0)
            return;
          ce === M.length - 1 ? n(26, ce = void 0) : ce < M.length - 1 && n(26, ce += 1);
          break;
      }
  }
  function Di(oe) {
    oe && g("focus", oe), O.focus(), n(2, R = !0);
  }
  async function Mn(oe) {
    Ki || (fe || R) && (g("blur", oe), lt(), n(2, R = !1), n(26, ce = void 0), O.blur());
  }
  function ar() {
    D || (n(6, fe = !fe), fe && !R && Di());
  }
  function _e() {
    n(3, M = void 0), lt(), g("clear", M), Di();
  }
  or(() => {
    fe && n(2, R = !0), R && O && O.focus();
  });
  function Re(oe) {
    if (oe) {
      n(4, H = "");
      const Je = Object.assign({}, oe);
      (!Je.groupHeader || Je.selectable) && (w ? n(3, M = M ? M.concat([Je]) : [Je]) : n(3, M = Je), n(3, M), setTimeout(() => {
        lt(), n(26, ce = void 0), g("change", M);
      }));
    }
  }
  function lt() {
    n(4, H = ""), n(6, fe = !1);
  }
  let { ariaValues: be = (oe) => `Option ${oe}, selected.` } = e, { ariaListOpen: at = (oe, Je) => `You are currently focused on option ${oe}. There are ${Je} results available.` } = e, { ariaFocused: st = () => "Select is focused, type to refine list, press down to open the menu." } = e;
  function Nt(oe) {
    let Je;
    return oe && M.length > 0 ? Je = M.map((mn) => mn[L]).join(", ") : Je = M[L], be(Je);
  }
  function Ft() {
    if (!c || c.length === 0)
      return "";
    let oe = c[B];
    if (fe && oe) {
      let Je = c ? c.length : 0;
      return at(oe[L], Je);
    } else
      return st();
  }
  let kt = null, On;
  function Qn() {
    clearTimeout(On), On = setTimeout(
      () => {
        Ki = !1;
      },
      100
    );
  }
  function li(oe) {
    S && !S.contains(oe.target) && !(kt != null && kt.contains(oe.target)) && Mn();
  }
  vs(() => {
    kt == null || kt.remove();
  });
  let Ki = !1;
  function Zt(oe) {
    oe.isCreator || oe.selectable === !1 || Re(oe);
  }
  function Gi(oe) {
    Ki || n(7, B = oe);
  }
  function cr(oe) {
    const { item: Je, i: mn } = oe;
    if ((Je == null ? void 0 : Je.selectable) !== !1) {
      if (M && !w && M[ue] === Je[ue])
        return lt();
      yz(Je) && (n(7, B = mn), Zt(Je));
    }
  }
  function bi(oe) {
    if (c.filter((Er) => !Object.hasOwn(Er, "selectable") || Er.selectable === !0).length === 0)
      return n(7, B = 0);
    oe > 0 && B === c.length - 1 ? n(7, B = 0) : oe < 0 && B === 0 ? n(7, B = c.length - 1) : n(7, B = B + oe);
    const mn = c[B];
    if (mn && mn.selectable === !1) {
      (oe === 1 || oe === -1) && bi(oe);
      return;
    }
  }
  function ao(oe, Je, mn) {
    if (!w)
      return Je && Je[mn] === oe[mn];
  }
  const qn = Rn, Tn = Rn;
  function Rn(oe) {
    return {
      update(Je) {
        Je.scroll && (Qn(), oe.scrollIntoView({
          behavior: "auto",
          block: "nearest",
          inline: "start"
        }));
      }
    };
  }
  function cn() {
    const { width: oe } = S.getBoundingClientRect();
    n(23, kt.style.width = W ? oe + "px" : "auto", kt);
  }
  let xn = {
    strategy: "absolute",
    placement: "bottom-start",
    middleware: [wF(T), _F(), kF()],
    autoUpdate: !1
  };
  const [tn, Pn, In] = xF(xn);
  let Ei = !0;
  function gn(oe, Je) {
    if (!oe || !Je)
      return n(28, Ei = !0);
    setTimeout(
      () => {
        n(28, Ei = !1);
      },
      0
    );
  }
  function Ai(oe) {
    Ut.call(this, t, oe);
  }
  function ee(oe) {
    Ut.call(this, t, oe);
  }
  function Me(oe) {
    Ut.call(this, t, oe);
  }
  function He(oe) {
    Ut.call(this, t, oe);
  }
  function $e(oe) {
    Ut.call(this, t, oe);
  }
  function ut(oe) {
    Ut.call(this, t, oe);
  }
  function Te(oe) {
    Ut.call(this, t, oe);
  }
  const Ue = (oe) => Gi(oe), It = (oe) => Gi(oe), Xt = (oe, Je) => cr({ item: oe, i: Je });
  function _i(oe) {
    yt[oe ? "unshift" : "push"](() => {
      kt = oe, n(23, kt);
    });
  }
  const zi = (oe) => an(oe), Xl = (oe) => A ? an(oe) : {};
  function Ql(oe) {
    yt[oe ? "unshift" : "push"](() => {
      O = oe, n(1, O);
    });
  }
  function gg() {
    H = this.value, n(4, H);
  }
  function mg(oe) {
    yt[oe ? "unshift" : "push"](() => {
      S = oe, n(0, S);
    });
  }
  return t.$$set = (oe) => {
    "justValue" in oe && n(52, _ = oe.justValue), "filter" in oe && n(53, m = oe.filter), "getItems" in oe && n(54, C = oe.getItems), "id" in oe && n(55, v = oe.id), "name" in oe && n(8, k = oe.name), "container" in oe && n(0, S = oe.container), "input" in oe && n(1, O = oe.input), "multiple" in oe && n(9, w = oe.multiple), "multiFullItemClearable" in oe && n(10, A = oe.multiFullItemClearable), "disabled" in oe && n(11, D = oe.disabled), "focused" in oe && n(2, R = oe.focused), "value" in oe && n(3, M = oe.value), "filterText" in oe && n(4, H = oe.filterText), "placeholder" in oe && n(56, J = oe.placeholder), "placeholderAlwaysShow" in oe && n(57, I = oe.placeholderAlwaysShow), "items" in oe && n(51, z = oe.items), "label" in oe && n(12, L = oe.label), "itemFilter" in oe && n(58, K = oe.itemFilter), "groupBy" in oe && n(59, F = oe.groupBy), "groupFilter" in oe && n(60, N = oe.groupFilter), "groupHeaderSelectable" in oe && n(61, te = oe.groupHeaderSelectable), "itemId" in oe && n(13, ue = oe.itemId), "loadOptions" in oe && n(62, q = oe.loadOptions), "containerStyles" in oe && n(14, re = oe.containerStyles), "hasError" in oe && n(15, ie = oe.hasError), "filterSelectedItems" in oe && n(63, Z = oe.filterSelectedItems), "required" in oe && n(16, Le = oe.required), "createGroupHeaderItem" in oe && n(64, Ie = oe.createGroupHeaderItem), "searchable" in oe && n(17, le = oe.searchable), "inputStyles" in oe && n(18, De = oe.inputStyles), "clearable" in oe && n(66, Ve = oe.clearable), "loading" in oe && n(5, ye = oe.loading), "listOpen" in oe && n(6, fe = oe.listOpen), "debounce" in oe && n(67, ae = oe.debounce), "debounceWait" in oe && n(68, $ = oe.debounceWait), "hideEmptyState" in oe && n(19, de = oe.hideEmptyState), "inputAttributes" in oe && n(69, he = oe.inputAttributes), "listAutoWidth" in oe && n(70, W = oe.listAutoWidth), "showChevron" in oe && n(20, y = oe.showChevron), "listOffset" in oe && n(71, T = oe.listOffset), "hoverItemIndex" in oe && n(7, B = oe.hoverItemIndex), "floatingConfig" in oe && n(72, X = oe.floatingConfig), "class" in oe && n(21, G = oe.class), "ariaValues" in oe && n(73, be = oe.ariaValues), "ariaListOpen" in oe && n(74, at = oe.ariaListOpen), "ariaFocused" in oe && n(75, st = oe.ariaFocused), "$$scope" in oe && n(79, d = oe.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 | t.$$.dirty[1] & 1048576 && M && dt(), t.$$.dirty[0] & 131072 | t.$$.dirty[2] & 128 && (he || !le) && vt(), t.$$.dirty[0] & 512 && w && Bn(), t.$$.dirty[0] & 512 | t.$$.dirty[2] & 65536 && mt && !w && Tt(), t.$$.dirty[0] & 520 && w && M && M.length > 1 && Xn(), t.$$.dirty[0] & 8 && M && Yt(), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !M && w && Ne && g("input", M), t.$$.dirty[0] & 6 && !R && O && lt(), t.$$.dirty[0] & 16 | t.$$.dirty[2] & 32768 && H !== qe && Kt(), t.$$.dirty[0] & 12824 | t.$$.dirty[1] & 407896064 | t.$$.dirty[2] & 3 && n(24, c = m({
      loadOptions: q,
      filterText: H,
      items: z,
      multiple: w,
      value: M,
      itemId: ue,
      groupBy: F,
      label: L,
      filterSelectedItems: Z,
      itemFilter: K,
      convertStringItemsToObjects: b2,
      filterGroupedItems: zt
    })), t.$$.dirty[0] & 16777800 && !w && fe && M && c && Oe(), t.$$.dirty[0] & 576 && fe && w && n(7, B = 0), t.$$.dirty[0] & 128 && si(B), t.$$.dirty[0] & 520 && n(25, i = w ? M && M.length > 0 : M), t.$$.dirty[0] & 33554448 && n(35, r = i && H.length > 0), t.$$.dirty[0] & 33556512 | t.$$.dirty[2] & 16 && n(34, s = i && Ve && !D && !ye), t.$$.dirty[0] & 520 | t.$$.dirty[1] & 100663296 && n(33, o = I && w ? J : M ? "" : J), t.$$.dirty[0] & 520 && n(32, l = M ? Nt(w) : ""), t.$$.dirty[0] & 16777412 && n(31, a = Ft()), t.$$.dirty[1] & 1048576 && oi(z), t.$$.dirty[0] & 8712 && n(52, _ = yn()), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !w && Ne && !M && g("input", M), t.$$.dirty[0] & 16777800 && fe && c && !w && !M && Jt(), t.$$.dirty[0] & 16777216 && ln(c), t.$$.dirty[2] & 1024 && X && In(Object.assign(xn, X)), t.$$.dirty[0] & 8388608 && n(30, u = !!kt), t.$$.dirty[0] & 8388672 && gn(kt, fe), t.$$.dirty[0] & 8388673 && fe && S && kt && cn(), t.$$.dirty[0] & 128 && n(29, f = B);
  }, [
    S,
    O,
    R,
    M,
    H,
    ye,
    fe,
    B,
    k,
    w,
    A,
    D,
    L,
    ue,
    re,
    ie,
    Le,
    le,
    De,
    de,
    y,
    G,
    _e,
    kt,
    c,
    i,
    ce,
    je,
    Ei,
    f,
    u,
    a,
    l,
    o,
    s,
    r,
    an,
    An,
    Di,
    Mn,
    ar,
    Qn,
    li,
    Gi,
    cr,
    ao,
    qn,
    Tn,
    tn,
    Pn,
    p,
    z,
    _,
    m,
    C,
    v,
    J,
    I,
    K,
    F,
    N,
    te,
    q,
    Z,
    Ie,
    Fe,
    Ve,
    ae,
    $,
    he,
    W,
    T,
    X,
    be,
    at,
    st,
    Ne,
    qe,
    mt,
    d,
    h,
    Ai,
    ee,
    Me,
    He,
    $e,
    ut,
    Te,
    Ue,
    It,
    Xt,
    _i,
    zi,
    Xl,
    Ql,
    gg,
    mg
  ];
}
class cl extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      wz,
      bz,
      xt,
      {
        justValue: 52,
        filter: 53,
        getItems: 54,
        id: 55,
        name: 8,
        container: 0,
        input: 1,
        multiple: 9,
        multiFullItemClearable: 10,
        disabled: 11,
        focused: 2,
        value: 3,
        filterText: 4,
        placeholder: 56,
        placeholderAlwaysShow: 57,
        items: 51,
        label: 12,
        itemFilter: 58,
        groupBy: 59,
        groupFilter: 60,
        groupHeaderSelectable: 61,
        itemId: 13,
        loadOptions: 62,
        containerStyles: 14,
        hasError: 15,
        filterSelectedItems: 63,
        required: 16,
        createGroupHeaderItem: 64,
        getFilteredItems: 65,
        searchable: 17,
        inputStyles: 18,
        clearable: 66,
        loading: 5,
        listOpen: 6,
        debounce: 67,
        debounceWait: 68,
        hideEmptyState: 19,
        inputAttributes: 69,
        listAutoWidth: 70,
        showChevron: 20,
        listOffset: 71,
        hoverItemIndex: 7,
        floatingConfig: 72,
        class: 21,
        handleClear: 22,
        ariaValues: 73,
        ariaListOpen: 74,
        ariaFocused: 75
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get getFilteredItems() {
    return this.$$.ctx[65];
  }
  get handleClear() {
    return this.$$.ctx[22];
  }
}
function vz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z, L, K, F, N;
  function te(De) {
    t[16](De);
  }
  let ue = {
    class: "jse-filter-path",
    showChevron: !0,
    items: t[6]
  };
  t[0] !== void 0 && (ue.value = t[0]), l = new cl({ props: ue }), yt.push(() => Pr(l, "value", te, t[0]));
  function q(De) {
    t[17](De);
  }
  let re = {
    class: "jse-filter-relation",
    showChevron: !0,
    items: t[8]
  };
  t[1] !== void 0 && (re.value = t[1]), u = new cl({ props: re }), yt.push(() => Pr(u, "value", q, t[1]));
  function ie(De) {
    t[19](De);
  }
  let Z = {
    class: "jse-sort-path",
    showChevron: !0,
    items: t[6]
  };
  t[3] !== void 0 && (Z.value = t[3]), k = new cl({ props: Z }), yt.push(() => Pr(k, "value", ie, t[3]));
  function Le(De) {
    t[20](De);
  }
  let Ie = {
    class: "jse-sort-direction",
    showChevron: !0,
    items: t[9]
  };
  t[4] !== void 0 && (Ie.value = t[4]), w = new cl({ props: Ie }), yt.push(() => Pr(w, "value", Le, t[4]));
  function Fe(De) {
    t[21](De);
  }
  let le = {
    class: "jse-projection-paths",
    multiple: !0,
    showChevron: !0,
    items: t[7]
  };
  return t[5] !== void 0 && (le.value = t[5]), z = new cl({ props: le }), yt.push(() => Pr(z, "value", Fe, t[5])), {
    c() {
      e = j("table"), n = j("tr"), i = j("th"), i.textContent = "Filter", r = Q(), s = j("td"), o = j("div"), me(l.$$.fragment), c = Q(), me(u.$$.fragment), h = Q(), d = j("input"), p = Q(), g = j("tr"), _ = j("th"), _.textContent = "Sort", m = Q(), C = j("td"), v = j("div"), me(k.$$.fragment), O = Q(), me(w.$$.fragment), D = Q(), R = j("tr"), M = j("th"), M.textContent = "Pick", H = Q(), J = j("td"), I = j("div"), me(z.$$.fragment), b(i, "class", "svelte-1vxsn9f"), b(d, "class", "jse-filter-value svelte-1vxsn9f"), b(o, "class", "jse-horizontal svelte-1vxsn9f"), b(_, "class", "svelte-1vxsn9f"), b(v, "class", "jse-horizontal svelte-1vxsn9f"), b(M, "class", "svelte-1vxsn9f"), b(I, "class", "jse-horizontal svelte-1vxsn9f"), b(e, "class", "jse-transform-wizard svelte-1vxsn9f");
    },
    m(De, Ve) {
      U(De, e, Ve), E(e, n), E(n, i), E(n, r), E(n, s), E(s, o), pe(l, o, null), E(o, c), pe(u, o, null), E(o, h), E(o, d), Io(d, t[2]), E(e, p), E(e, g), E(g, _), E(g, m), E(g, C), E(C, v), pe(k, v, null), E(v, O), pe(w, v, null), E(e, D), E(e, R), E(R, M), E(R, H), E(R, J), E(J, I), pe(z, I, null), K = !0, F || (N = se(d, "input", t[18]), F = !0);
    },
    p(De, [Ve]) {
      const ye = {};
      Ve & 64 && (ye.items = De[6]), !a && Ve & 1 && (a = !0, ye.value = De[0], Rr(() => a = !1)), l.$set(ye);
      const fe = {};
      !f && Ve & 2 && (f = !0, fe.value = De[1], Rr(() => f = !1)), u.$set(fe), Ve & 4 && d.value !== De[2] && Io(d, De[2]);
      const Ae = {};
      Ve & 64 && (Ae.items = De[6]), !S && Ve & 8 && (S = !0, Ae.value = De[3], Rr(() => S = !1)), k.$set(Ae);
      const ae = {};
      !A && Ve & 16 && (A = !0, ae.value = De[4], Rr(() => A = !1)), w.$set(ae);
      const $ = {};
      Ve & 128 && ($.items = De[7]), !L && Ve & 32 && (L = !0, $.value = De[5], Rr(() => L = !1)), z.$set($);
    },
    i(De) {
      K || (P(l.$$.fragment, De), P(u.$$.fragment, De), P(k.$$.fragment, De), P(w.$$.fragment, De), P(z.$$.fragment, De), K = !0);
    },
    o(De) {
      x(l.$$.fragment, De), x(u.$$.fragment, De), x(k.$$.fragment, De), x(w.$$.fragment, De), x(z.$$.fragment, De), K = !1;
    },
    d(De) {
      De && V(e), ge(l), ge(u), ge(k), ge(w), ge(z), F = !1, N();
    }
  };
}
function kz(t, e, n) {
  var L, K, F, N, te, ue;
  let i, r, s, o, l;
  const a = mi("jsoneditor:TransformWizard");
  let { json: c } = e, { queryOptions: u = {} } = e, { onChange: f } = e;
  const h = ["==", "!=", "<", "<=", ">", ">="].map((q) => ({ value: q, label: q })), d = [{ value: "asc", label: "ascending" }, { value: "desc", label: "descending" }];
  let p = (L = u == null ? void 0 : u.filter) != null && L.path ? na(u.filter.path) : null, g = (K = u == null ? void 0 : u.filter) != null && K.relation ? h.find((q) => q.value === u.filter.relation) : null, _ = ((F = u == null ? void 0 : u.filter) == null ? void 0 : F.value) || "", m = (N = u == null ? void 0 : u.sort) != null && N.path ? na(u.sort.path) : null, C = (te = u == null ? void 0 : u.sort) != null && te.direction ? d.find((q) => q.value === u.sort.direction) : null, v = (ue = u == null ? void 0 : u.projection) != null && ue.paths ? u.projection.paths.map(na) : null;
  function k(q) {
    var re;
    Ot((re = u == null ? void 0 : u.filter) == null ? void 0 : re.path, q) || (a("changeFilterPath", q), n(10, u = Tr(u, ["filter", "path"], q, !0)), f(u));
  }
  function S(q) {
    var re;
    Ot((re = u == null ? void 0 : u.filter) == null ? void 0 : re.relation, q) || (a("changeFilterRelation", q), n(10, u = Tr(u, ["filter", "relation"], q, !0)), f(u));
  }
  function O(q) {
    var re;
    Ot((re = u == null ? void 0 : u.filter) == null ? void 0 : re.value, q) || (a("changeFilterValue", q), n(10, u = Tr(u, ["filter", "value"], q, !0)), f(u));
  }
  function w(q) {
    var re;
    Ot((re = u == null ? void 0 : u.sort) == null ? void 0 : re.path, q) || (a("changeSortPath", q), n(10, u = Tr(u, ["sort", "path"], q, !0)), f(u));
  }
  function A(q) {
    var re;
    Ot((re = u == null ? void 0 : u.sort) == null ? void 0 : re.direction, q) || (a("changeSortDirection", q), n(10, u = Tr(u, ["sort", "direction"], q, !0)), f(u));
  }
  function D(q) {
    var re;
    Ot((re = u == null ? void 0 : u.projection) == null ? void 0 : re.paths, q) || (a("changeProjectionPaths", q), n(10, u = Tr(u, ["projection", "paths"], q, !0)), f(u));
  }
  function R(q) {
    p = q, n(0, p);
  }
  function M(q) {
    g = q, n(1, g);
  }
  function H() {
    _ = this.value, n(2, _);
  }
  function J(q) {
    m = q, n(3, m);
  }
  function I(q) {
    C = q, n(4, C);
  }
  function z(q) {
    v = q, n(5, v);
  }
  return t.$$set = (q) => {
    "json" in q && n(11, c = q.json), "queryOptions" in q && n(10, u = q.queryOptions), "onChange" in q && n(12, f = q.onChange);
  }, t.$$.update = () => {
    var q;
    t.$$.dirty & 2048 && n(15, i = Array.isArray(c)), t.$$.dirty & 34816 && n(14, r = i ? $m(c) : []), t.$$.dirty & 34816 && n(13, s = i ? $m(c, !0) : []), t.$$.dirty & 16384 && n(6, o = r.map(na)), t.$$.dirty & 8192 && n(7, l = s ? s.map(na) : []), t.$$.dirty & 1088 && (q = u == null ? void 0 : u.filter) != null && q.path && o.find((re) => {
      var ie;
      return Ot(re.value, (ie = u == null ? void 0 : u.filter) == null ? void 0 : ie.path);
    }), t.$$.dirty & 1 && k((p == null ? void 0 : p.value) || null), t.$$.dirty & 2 && S((g == null ? void 0 : g.value) || null), t.$$.dirty & 4 && O(_ || null), t.$$.dirty & 8 && w((m == null ? void 0 : m.value) || null), t.$$.dirty & 16 && A((C == null ? void 0 : C.value) || null), t.$$.dirty & 32 && D(v ? v.map((re) => re.value) : null);
  }, [
    p,
    g,
    _,
    m,
    C,
    v,
    o,
    l,
    h,
    d,
    u,
    c,
    f,
    s,
    r,
    i,
    R,
    M,
    H,
    J,
    I,
    z
  ];
}
class Cz extends Qe {
  constructor(e) {
    super(), Xe(this, e, kz, vz, wt, { json: 11, queryOptions: 10, onChange: 12 });
  }
}
const Sz = Cz;
function _2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function Ez(t) {
  let e, n;
  return e = new Mt({ props: { data: iu } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Az(t) {
  let e, n;
  return e = new Mt({ props: { data: nu } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function y2(t) {
  let e, n, i, r, s = t[5].name + "", o, l, a, c, u, f;
  const h = [Az, Ez], d = [];
  function p(_, m) {
    return _[5].id === _[0] ? 0 : 1;
  }
  n = p(t), i = d[n] = h[n](t);
  function g() {
    return t[4](t[5]);
  }
  return {
    c() {
      e = j("button"), i.c(), r = Q(), o = we(s), l = Q(), b(e, "type", "button"), b(e, "class", "jse-query-language svelte-19cxesy"), b(e, "title", a = `Select ${t[5].name} as query language`), Ce(e, "selected", t[5].id === t[0]);
    },
    m(_, m) {
      U(_, e, m), d[n].m(e, null), E(e, r), E(e, o), E(e, l), c = !0, u || (f = se(e, "click", g), u = !0);
    },
    p(_, m) {
      t = _;
      let C = n;
      n = p(t), n === C ? d[n].p(t, m) : (Se(), x(d[C], 1, 1, () => {
        d[C] = null;
      }), Ee(), i = d[n], i ? i.p(t, m) : (i = d[n] = h[n](t), i.c()), P(i, 1), i.m(e, r)), (!c || m & 2) && s !== (s = t[5].name + "") && ze(o, s), (!c || m & 2 && a !== (a = `Select ${t[5].name} as query language`)) && b(e, "title", a), (!c || m & 3) && Ce(e, "selected", t[5].id === t[0]);
    },
    i(_) {
      c || (P(i), c = !0);
    },
    o(_) {
      x(i), c = !1;
    },
    d(_) {
      _ && V(e), d[n].d(), u = !1, f();
    }
  };
}
function Mz(t) {
  let e, n, i, r = t[1], s = [];
  for (let l = 0; l < r.length; l += 1)
    s[l] = y2(_2(t, r, l));
  const o = (l) => x(s[l], 1, 1, () => {
    s[l] = null;
  });
  return {
    c() {
      e = j("div"), n = j("div");
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      b(n, "class", "jse-select-query-language-container svelte-19cxesy"), b(e, "class", "jse-select-query-language svelte-19cxesy");
    },
    m(l, a) {
      U(l, e, a), E(e, n);
      for (let c = 0; c < s.length; c += 1)
        s[c].m(n, null);
      i = !0;
    },
    p(l, [a]) {
      if (a & 7) {
        r = l[1];
        let c;
        for (c = 0; c < r.length; c += 1) {
          const u = _2(l, r, c);
          s[c] ? (s[c].p(u, a), P(s[c], 1)) : (s[c] = y2(u), s[c].c(), P(s[c], 1), s[c].m(n, null));
        }
        for (Se(), c = r.length; c < s.length; c += 1)
          o(c);
        Ee();
      }
    },
    i(l) {
      if (!i) {
        for (let a = 0; a < r.length; a += 1)
          P(s[a]);
        i = !0;
      }
    },
    o(l) {
      s = s.filter(Boolean);
      for (let a = 0; a < s.length; a += 1)
        x(s[a]);
      i = !1;
    },
    d(l) {
      l && V(e), Vt(s, l);
    }
  };
}
function Oz(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: s } = e;
  function o(a) {
    n(0, r = a), s(a);
  }
  const l = (a) => o(a.id);
  return t.$$set = (a) => {
    "queryLanguages" in a && n(1, i = a.queryLanguages), "queryLanguageId" in a && n(0, r = a.queryLanguageId), "onChangeQueryLanguage" in a && n(3, s = a.onChangeQueryLanguage);
  }, [
    r,
    i,
    o,
    s,
    l
  ];
}
class Tz extends Qe {
  constructor(e) {
    super(), Xe(this, e, Oz, Mz, xt, {
      queryLanguages: 1,
      queryLanguageId: 0,
      onChangeQueryLanguage: 3
    });
  }
}
const Rz = Tz;
function w2(t) {
  let e, n, i, r, s;
  return n = new Mt({ props: { data: eF } }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-config svelte-d01h2s"), b(e, "title", "Select a query language");
    },
    m(o, l) {
      U(o, e, l), pe(n, e, null), t[6](e), i = !0, r || (s = se(e, "click", t[3]), r = !0);
    },
    p: ve,
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), ge(n), t[6](null), r = !1, s();
    }
  };
}
function Pz(t) {
  let e, n, i, r, s, o, l, a, c, u = t[0].length > 1 && w2(t);
  return o = new Mt({ props: { data: oc } }), {
    c() {
      e = j("div"), n = j("div"), n.textContent = "Transform", i = Q(), u && u.c(), r = Q(), s = j("button"), me(o.$$.fragment), b(n, "class", "jse-title svelte-d01h2s"), b(s, "type", "button"), b(s, "class", "jse-close svelte-d01h2s"), b(e, "class", "jse-header svelte-d01h2s");
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(e, i), u && u.m(e, null), E(e, r), E(e, s), pe(o, s, null), l = !0, a || (c = se(s, "click", t[2]), a = !0);
    },
    p(f, [h]) {
      f[0].length > 1 ? u ? (u.p(f, h), h & 1 && P(u, 1)) : (u = w2(f), u.c(), P(u, 1), u.m(e, r)) : u && (Se(), x(u, 1, 1, () => {
        u = null;
      }), Ee());
    },
    i(f) {
      l || (P(u), P(o.$$.fragment, f), l = !0);
    },
    o(f) {
      x(u), x(o.$$.fragment, f), l = !1;
    },
    d(f) {
      f && V(e), u && u.d(), ge(o), a = !1, c();
    }
  };
}
function Iz(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: s } = e, o, l;
  const { close: a } = gi("simple-modal"), { openAbsolutePopup: c, closeAbsolutePopup: u } = gi("absolute-popup");
  function f() {
    l = c(Rz, {
      queryLanguages: i,
      queryLanguageId: r,
      onChangeQueryLanguage: (p) => {
        u(l), s(p);
      }
    }, {
      position: "bottom",
      offsetTop: -2,
      offsetLeft: 0,
      anchor: o,
      closeOnOuterClick: !0
    });
  }
  function h(d) {
    yt[d ? "unshift" : "push"](() => {
      o = d, n(1, o);
    });
  }
  return t.$$set = (d) => {
    "queryLanguages" in d && n(0, i = d.queryLanguages), "queryLanguageId" in d && n(4, r = d.queryLanguageId), "onChangeQueryLanguage" in d && n(5, s = d.onChangeQueryLanguage);
  }, [
    i,
    o,
    a,
    f,
    r,
    s,
    h
  ];
}
class Dz extends Qe {
  constructor(e) {
    super(), Xe(this, e, Iz, Pz, wt, {
      queryLanguages: 0,
      queryLanguageId: 4,
      onChangeQueryLanguage: 5
    });
  }
}
const Nz = Dz, Bg = mi("jsoneditor:AutoScrollHandler");
function Lz(t) {
  Bg("createAutoScrollHandler", t);
  let e, n;
  function i(c) {
    return c < 20 ? dR : c < 50 ? pR : gR;
  }
  function r() {
    if (t) {
      const c = e * (gy / 1e3);
      t.scrollTop += c;
    }
  }
  function s(c) {
    (!n || c !== e) && (o(), Bg("startAutoScroll", c), e = c, n = setInterval(r, gy));
  }
  function o() {
    n && (Bg("stopAutoScroll"), clearInterval(n), n = void 0, e = void 0);
  }
  function l(c) {
    if (t) {
      const u = c.clientY, { top: f, bottom: h } = t.getBoundingClientRect();
      if (u < f) {
        const d = i(f - u);
        s(-d);
      } else if (u > h) {
        const d = i(u - h);
        s(d);
      } else
        o();
    }
  }
  function a() {
    o();
  }
  return {
    onDrag: l,
    onDragEnd: a
  };
}
const jz = (t, e, n, i) => (t /= i / 2, t < 1 ? n / 2 * t * t + e : (t--, -n / 2 * (t * (t - 2) - 1) + e)), H6 = () => {
  let t, e, n, i, r, s, o, l, a, c, u, f, h, d;
  function p() {
    return t.scrollY || t.pageYOffset || t.scrollTop;
  }
  function g(k) {
    const S = k.getBoundingClientRect().top, O = t.getBoundingClientRect ? t.getBoundingClientRect().top : 0;
    return S - O + n;
  }
  function _(k) {
    t.scrollTo ? t.scrollTo(t.scrollLeft, k) : t.scrollTop = k;
  }
  function m(k) {
    c || (c = k), u = k - c, f = s(u, n, l, a), _(f), d = !0, u < a ? requestAnimationFrame(m) : C();
  }
  function C() {
    _(n + l), e && o && (e.setAttribute("tabindex", "-1"), e.focus()), typeof h == "function" && h(), c = !1, d = !1;
  }
  function v(k, S = {}) {
    switch (a = S.duration || 1e3, r = S.offset || 0, h = S.callback, s = S.easing || jz, o = S.a11y || !1, typeof S.container) {
      case "object":
        t = S.container;
        break;
      case "string":
        t = document.querySelector(S.container);
        break;
      default:
        t = window;
    }
    switch (n = p(), typeof k) {
      case "number":
        e = void 0, o = !1, i = n + k;
        break;
      case "object":
        e = k, i = g(e);
        break;
      case "string":
        e = document.querySelector(k), i = g(e);
        break;
    }
    switch (l = i - n + r, typeof S.duration) {
      case "number":
        a = S.duration;
        break;
      case "function":
        a = S.duration(l);
        break;
    }
    d ? c = !1 : requestAnimationFrame(m);
  }
  return v;
}, Bz = 1e3, Af = mi("jsoneditor:History");
function W6(t = {}) {
  const e = t.maxItems || Bz;
  let n = [], i = 0;
  function r() {
    return i < n.length;
  }
  function s() {
    return i > 0;
  }
  function o() {
    return {
      canUndo: r(),
      canRedo: s(),
      length: n.length
    };
  }
  function l() {
    t.onChange && t.onChange(o());
  }
  function a(h) {
    Af("add", h), n = [h].concat(n.slice(i)).slice(0, e), i = 0, l();
  }
  function c() {
    Af("clear"), n = [], i = 0, l();
  }
  function u() {
    if (r()) {
      const h = n[i];
      return i += 1, Af("undo", h), l(), h;
    }
  }
  function f() {
    if (s())
      return i -= 1, Af("redo", n[i]), l(), n[i];
  }
  return {
    add: a,
    clear: c,
    getState: o,
    undo: u,
    redo: f
  };
}
function ca(t, e) {
  const n = Date.now(), i = t(), r = Date.now();
  return e(r - n), i;
}
const ra = mi("validation");
function xz(t) {
  const e = {};
  return t.forEach((n) => {
    e[Be(n.path)] = n;
  }), t.forEach((n) => {
    let i = n.path;
    for (; i.length > 0; ) {
      i = At(i);
      const r = Be(i);
      r in e || (e[r] = {
        isChildError: !0,
        path: i,
        message: "Contains invalid data"
      });
    }
  }), e;
}
function q6(t, e, n, i) {
  if (ra("validateJSON"), !e)
    return [];
  if (n !== i) {
    const r = i.parse(n.stringify(t));
    return e(r);
  } else
    return e(t);
}
function Fz(t, e, n, i) {
  if (ra("validateText"), t.length > mR)
    return {
      validationErrors: [{
        path: [],
        message: "Validation turned off: the document is too large",
        severity: Do.info
      }]
    };
  if (t.length === 0)
    return {
      validationErrors: []
    };
  try {
    const r = ca(() => n.parse(t), (l) => ra(`validate: parsed json in ${l} ms`));
    if (!e)
      return {
        validationErrors: []
      };
    const s = n === i ? r : ca(() => i.parse(t), (l) => ra(`validate: parsed json with the validationParser in ${l} ms`));
    return { validationErrors: ca(() => e(s), (l) => ra(`validate: validated json in ${l} ms`)) };
  } catch (r) {
    const s = ca(() => zz(t, n), (l) => ra(`validate: checked whether repairable in ${l} ms`));
    return {
      parseError: vp(t, r.message || r.toString()),
      isRepairable: s
    };
  }
}
function zz(t, e) {
  if (t.length > bR)
    return !1;
  try {
    return e.parse(cs(t)), !0;
  } catch {
    return !1;
  }
}
const Mf = mi("jsoneditor:FocusTracker");
function ob({ onMount: t, onDestroy: e, getWindow: n, hasFocus: i, onFocus: r, onBlur: s }) {
  let o, l = !1;
  function a() {
    const u = i();
    u && (clearTimeout(o), l || (Mf("focus"), r(), l = u));
  }
  function c() {
    l && (clearTimeout(o), o = setTimeout(() => {
      Mf("blur"), l = !1, s();
    }));
  }
  t(() => {
    Mf("mount FocusTracker");
    const u = n();
    u && (u.addEventListener("focusin", a, !0), u.addEventListener("focusout", c, !0));
  }), e(() => {
    Mf("destroy FocusTracker");
    const u = n();
    u && (u.removeEventListener("focusin", a, !0), u.removeEventListener("focusout", c, !0));
  });
}
function v2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function k2(t) {
  let e, n;
  return e = new Mt({ props: { data: t[1] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 2 && (s.data = i[1]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function C2(t) {
  let e, n;
  return e = new Mt({ props: { data: t[8].icon } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.data = i[8].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function S2(t) {
  let e, n, i = t[8].text + "", r, s, o, l, a, c, u, f = t[8].icon && C2(t);
  function h() {
    return t[6](t[8]);
  }
  function d() {
    return t[7](t[8]);
  }
  return {
    c() {
      e = j("button"), f && f.c(), n = Q(), r = we(i), s = Q(), b(e, "type", "button"), b(e, "class", "jse-button jse-action jse-primary svelte-kvi5ls"), b(e, "title", o = t[8].title), e.disabled = l = t[8].disabled;
    },
    m(p, g) {
      U(p, e, g), f && f.m(e, null), E(e, n), E(e, r), E(e, s), a = !0, c || (u = [
        se(e, "click", h),
        se(e, "mousedown", d)
      ], c = !0);
    },
    p(p, g) {
      t = p, t[8].icon ? f ? (f.p(t, g), g & 8 && P(f, 1)) : (f = C2(t), f.c(), P(f, 1), f.m(e, n)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), (!a || g & 8) && i !== (i = t[8].text + "") && ze(r, i), (!a || g & 8 && o !== (o = t[8].title)) && b(e, "title", o), (!a || g & 8 && l !== (l = t[8].disabled)) && (e.disabled = l);
    },
    i(p) {
      a || (P(f), a = !0);
    },
    o(p) {
      x(f), a = !1;
    },
    d(p) {
      p && V(e), f && f.d(), c = !1, ht(u);
    }
  };
}
function Vz(t) {
  let e, n, i, r, s, o, l, a, c, u, f = t[1] && k2(t), h = t[3], d = [];
  for (let g = 0; g < h.length; g += 1)
    d[g] = S2(v2(t, h, g));
  const p = (g) => x(d[g], 1, 1, () => {
    d[g] = null;
  });
  return {
    c() {
      e = j("div"), n = j("div"), f && f.c(), i = Q(), r = we(t[2]), s = Q(), o = j("div");
      for (let g = 0; g < d.length; g += 1)
        d[g].c();
      b(n, "class", "jse-text svelte-kvi5ls"), Ce(n, "jse-clickable", !!t[4]), b(o, "class", "jse-actions svelte-kvi5ls"), b(e, "class", l = "jse-message jse-" + t[0] + " svelte-kvi5ls");
    },
    m(g, _) {
      U(g, e, _), E(e, n), f && f.m(n, null), E(n, i), E(n, r), E(e, s), E(e, o);
      for (let m = 0; m < d.length; m += 1)
        d[m].m(o, null);
      a = !0, c || (u = se(n, "click", t[5]), c = !0);
    },
    p(g, [_]) {
      if (g[1] ? f ? (f.p(g, _), _ & 2 && P(f, 1)) : (f = k2(g), f.c(), P(f, 1), f.m(n, i)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), (!a || _ & 4) && ze(r, g[2]), (!a || _ & 16) && Ce(n, "jse-clickable", !!g[4]), _ & 8) {
        h = g[3];
        let m;
        for (m = 0; m < h.length; m += 1) {
          const C = v2(g, h, m);
          d[m] ? (d[m].p(C, _), P(d[m], 1)) : (d[m] = S2(C), d[m].c(), P(d[m], 1), d[m].m(o, null));
        }
        for (Se(), m = h.length; m < d.length; m += 1)
          p(m);
        Ee();
      }
      (!a || _ & 1 && l !== (l = "jse-message jse-" + g[0] + " svelte-kvi5ls")) && b(e, "class", l);
    },
    i(g) {
      if (!a) {
        P(f);
        for (let _ = 0; _ < h.length; _ += 1)
          P(d[_]);
        a = !0;
      }
    },
    o(g) {
      x(f), d = d.filter(Boolean);
      for (let _ = 0; _ < d.length; _ += 1)
        x(d[_]);
      a = !1;
    },
    d(g) {
      g && V(e), f && f.d(), Vt(d, g), c = !1, u();
    }
  };
}
function Uz(t, e, n) {
  let { type: i = "success" } = e, { icon: r = void 0 } = e, { message: s = void 0 } = e, { actions: o = [] } = e, { onClick: l = void 0 } = e;
  function a() {
    l && l();
  }
  const c = (f) => {
    f.onClick && f.onClick();
  }, u = (f) => {
    f.onMouseDown && f.onMouseDown();
  };
  return t.$$set = (f) => {
    "type" in f && n(0, i = f.type), "icon" in f && n(1, r = f.icon), "message" in f && n(2, s = f.message), "actions" in f && n(3, o = f.actions), "onClick" in f && n(4, l = f.onClick);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u
  ];
}
class Hz extends Qe {
  constructor(e) {
    super(), Xe(this, e, Uz, Vz, wt, {
      type: 0,
      icon: 1,
      message: 2,
      actions: 3,
      onClick: 4
    });
  }
}
const Ds = Hz;
function E2(t, e, n) {
  const i = t.slice();
  return i[7] = e[n], i[9] = n, i;
}
function A2(t) {
  let e, n, i, r;
  const s = [qz, Wz], o = [];
  function l(a, c) {
    return a[2] || a[3] === 1 ? 0 : 1;
  }
  return n = l(t), i = o[n] = s[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "class", "jse-validation-errors-overview svelte-1oe8e8r");
    },
    m(a, c) {
      U(a, e, c), o[n].m(e, null), r = !0;
    },
    p(a, c) {
      let u = n;
      n = l(a), n === u ? o[n].p(a, c) : (Se(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Ee(), i = o[n], i ? i.p(a, c) : (i = o[n] = s[n](a), i.c()), P(i, 1), i.m(e, null));
    },
    i(a) {
      r || (P(i), r = !0);
    },
    o(a) {
      x(i), r = !1;
    },
    d(a) {
      a && V(e), o[n].d();
    }
  };
}
function Wz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p;
  return s = new Mt({ props: { data: ql } }), f = new Mt({ props: { data: D6 } }), {
    c() {
      e = j("table"), n = j("tbody"), i = j("tr"), r = j("td"), me(s.$$.fragment), o = Q(), l = j("td"), a = we(t[3]), c = we(` validation errors
              `), u = j("div"), me(f.$$.fragment), b(r, "class", "jse-validation-error-icon svelte-1oe8e8r"), b(u, "class", "jse-validation-errors-expand svelte-1oe8e8r"), b(l, "class", "svelte-1oe8e8r"), b(i, "class", "jse-validation-error svelte-1oe8e8r"), b(e, "class", "svelte-1oe8e8r");
    },
    m(g, _) {
      U(g, e, _), E(e, n), E(n, i), E(i, r), pe(s, r, null), E(i, o), E(i, l), E(l, a), E(l, c), E(l, u), pe(f, u, null), h = !0, d || (p = se(i, "click", t[5]), d = !0);
    },
    p(g, _) {
      (!h || _ & 8) && ze(a, g[3]);
    },
    i(g) {
      h || (P(s.$$.fragment, g), P(f.$$.fragment, g), h = !0);
    },
    o(g) {
      x(s.$$.fragment, g), x(f.$$.fragment, g), h = !1;
    },
    d(g) {
      g && V(e), ge(s), ge(f), d = !1, p();
    }
  };
}
function qz(t) {
  let e, n, i, r, s = Jh(t[0], aa), o = [];
  for (let c = 0; c < s.length; c += 1)
    o[c] = O2(E2(t, s, c));
  const l = (c) => x(o[c], 1, 1, () => {
    o[c] = null;
  });
  let a = t[3] > aa && T2(t);
  return {
    c() {
      e = j("table"), n = j("tbody");
      for (let c = 0; c < o.length; c += 1)
        o[c].c();
      i = Q(), a && a.c(), b(e, "class", "svelte-1oe8e8r");
    },
    m(c, u) {
      U(c, e, u), E(e, n);
      for (let f = 0; f < o.length; f += 1)
        o[f].m(n, null);
      E(n, i), a && a.m(n, null), r = !0;
    },
    p(c, u) {
      if (u & 19) {
        s = Jh(c[0], aa);
        let f;
        for (f = 0; f < s.length; f += 1) {
          const h = E2(c, s, f);
          o[f] ? (o[f].p(h, u), P(o[f], 1)) : (o[f] = O2(h), o[f].c(), P(o[f], 1), o[f].m(n, i));
        }
        for (Se(), f = s.length; f < o.length; f += 1)
          l(f);
        Ee();
      }
      c[3] > aa ? a ? a.p(c, u) : (a = T2(c), a.c(), a.m(n, null)) : a && (a.d(1), a = null);
    },
    i(c) {
      if (!r) {
        for (let u = 0; u < s.length; u += 1)
          P(o[u]);
        r = !0;
      }
    },
    o(c) {
      o = o.filter(Boolean);
      for (let u = 0; u < o.length; u += 1)
        x(o[u]);
      r = !1;
    },
    d(c) {
      c && V(e), Vt(o, c), a && a.d();
    }
  };
}
function M2(t) {
  let e, n, i, r, s;
  return n = new Mt({ props: { data: iF } }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-validation-errors-collapse svelte-1oe8e8r"), b(e, "title", "Collapse validation errors");
    },
    m(o, l) {
      U(o, e, l), pe(n, e, null), i = !0, r || (s = se(e, "click", Ye(t[4])), r = !0);
    },
    p: ve,
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), ge(n), r = !1, s();
    }
  };
}
function O2(t) {
  let e, n, i, r, s, o = wr(qi(t[7].path)) + "", l, a, c, u = t[7].message + "", f, h, d, p, g, _;
  i = new Mt({ props: { data: ql } });
  let m = t[9] === 0 && t[0].length > 1 && M2(t);
  function C() {
    return t[6](t[7]);
  }
  return {
    c() {
      e = j("tr"), n = j("td"), me(i.$$.fragment), r = Q(), s = j("td"), l = we(o), a = Q(), c = j("td"), f = we(u), h = Q(), d = j("td"), m && m.c(), b(n, "class", "jse-validation-error-icon svelte-1oe8e8r"), b(s, "class", "svelte-1oe8e8r"), b(c, "class", "svelte-1oe8e8r"), b(d, "class", "jse-validation-error-action svelte-1oe8e8r"), b(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(v, k) {
      U(v, e, k), E(e, n), pe(i, n, null), E(e, r), E(e, s), E(s, l), E(e, a), E(e, c), E(c, f), E(e, h), E(e, d), m && m.m(d, null), p = !0, g || (_ = se(e, "click", C), g = !0);
    },
    p(v, k) {
      t = v, (!p || k & 1) && o !== (o = wr(qi(t[7].path)) + "") && ze(l, o), (!p || k & 1) && u !== (u = t[7].message + "") && ze(f, u), t[9] === 0 && t[0].length > 1 ? m ? (m.p(t, k), k & 1 && P(m, 1)) : (m = M2(t), m.c(), P(m, 1), m.m(d, null)) : m && (Se(), x(m, 1, 1, () => {
        m = null;
      }), Ee());
    },
    i(v) {
      p || (P(i.$$.fragment, v), P(m), p = !0);
    },
    o(v) {
      x(i.$$.fragment, v), x(m), p = !1;
    },
    d(v) {
      v && V(e), ge(i), m && m.d(), g = !1, _();
    }
  };
}
function T2(t) {
  let e, n, i, r, s, o, l, a = t[3] - aa + "", c, u, f, h;
  return {
    c() {
      e = j("tr"), n = j("td"), i = Q(), r = j("td"), s = Q(), o = j("td"), l = we("(and "), c = we(a), u = we(" more errors)"), f = Q(), h = j("td"), b(n, "class", "svelte-1oe8e8r"), b(r, "class", "svelte-1oe8e8r"), b(o, "class", "svelte-1oe8e8r"), b(h, "class", "svelte-1oe8e8r"), b(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(e, i), E(e, r), E(e, s), E(e, o), E(o, l), E(o, c), E(o, u), E(e, f), E(e, h);
    },
    p(d, p) {
      p & 8 && a !== (a = d[3] - aa + "") && ze(c, a);
    },
    d(d) {
      d && V(e);
    }
  };
}
function Jz(t) {
  let e = !Pt(t[0]), n, i, r = e && A2(t);
  return {
    c() {
      r && r.c(), n = ot();
    },
    m(s, o) {
      r && r.m(s, o), U(s, n, o), i = !0;
    },
    p(s, [o]) {
      o & 1 && (e = !Pt(s[0])), e ? r ? (r.p(s, o), o & 1 && P(r, 1)) : (r = A2(s), r.c(), P(r, 1), r.m(n.parentNode, n)) : r && (Se(), x(r, 1, 1, () => {
        r = null;
      }), Ee());
    },
    i(s) {
      i || (P(r), i = !0);
    },
    o(s) {
      x(r), i = !1;
    },
    d(s) {
      r && r.d(s), s && V(n);
    }
  };
}
function Kz(t, e, n) {
  let i, { validationErrors: r } = e, { selectError: s } = e, o = !0;
  function l() {
    n(2, o = !1);
  }
  function a() {
    n(2, o = !0);
  }
  const c = (u) => {
    setTimeout(() => s(u));
  };
  return t.$$set = (u) => {
    "validationErrors" in u && n(0, r = u.validationErrors), "selectError" in u && n(1, s = u.selectError);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(3, i = r.length);
  }, [
    r,
    s,
    o,
    i,
    l,
    a,
    c
  ];
}
class Gz extends Qe {
  constructor(e) {
    super(), Xe(this, e, Kz, Jz, wt, { validationErrors: 0, selectError: 1 });
  }
}
const lb = Gz;
function Yz(t) {
  let e, n, i, r, s, o, l, a, c;
  return o = new Mt({ props: { data: oc } }), {
    c() {
      e = j("div"), n = j("div"), i = we(t[0]), r = Q(), s = j("button"), me(o.$$.fragment), b(n, "class", "jse-title svelte-d01h2s"), b(s, "type", "button"), b(s, "class", "jse-close svelte-d01h2s"), b(e, "class", "jse-header svelte-d01h2s");
    },
    m(u, f) {
      U(u, e, f), E(e, n), E(n, i), E(e, r), E(e, s), pe(o, s, null), l = !0, a || (c = se(s, "click", t[3]), a = !0);
    },
    p(u, [f]) {
      (!l || f & 1) && ze(i, u[0]);
    },
    i(u) {
      l || (P(o.$$.fragment, u), l = !0);
    },
    o(u) {
      x(o.$$.fragment, u), l = !1;
    },
    d(u) {
      u && V(e), ge(o), a = !1, c();
    }
  };
}
function Xz(t, e, n) {
  let { title: i = "Modal" } = e, { onClose: r = void 0 } = e;
  const { close: s } = gi("simple-modal"), o = () => {
    r ? r() : s();
  };
  return t.$$set = (l) => {
    "title" in l && n(0, i = l.title), "onClose" in l && n(1, r = l.onClose);
  }, [i, r, s, o];
}
class Qz extends Qe {
  constructor(e) {
    super(), Xe(this, e, Xz, Yz, wt, { title: 0, onClose: 1 });
  }
}
const ab = Qz;
function Zz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A;
  return n = new ab({ props: { title: "Copying and pasting" } }), {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), r = j("div"), s = j("div"), s.textContent = "These actions are unavailable via the menu. Please use:", o = Q(), l = j("div"), a = j("div"), c = j("div"), c.textContent = `${t[1]}+C`, u = we(`
        for copy`), f = Q(), h = j("div"), d = j("div"), d.textContent = `${t[1]}+X`, p = we(`
        for cut`), g = Q(), _ = j("div"), m = j("div"), m.textContent = `${t[1]}+V`, C = we(`
        for paste`), v = Q(), k = j("div"), S = j("button"), S.textContent = "Close", b(c, "class", "jse-key svelte-1olothd"), b(a, "class", "jse-shortcut"), b(d, "class", "jse-key svelte-1olothd"), b(h, "class", "jse-shortcut"), b(m, "class", "jse-key svelte-1olothd"), b(_, "class", "jse-shortcut"), b(l, "class", "jse-shortcuts svelte-1olothd"), b(S, "type", "button"), b(S, "class", "jse-primary svelte-1olothd"), b(k, "class", "jse-actions svelte-1olothd"), b(r, "class", "jse-modal-contents svelte-1olothd"), b(e, "class", "jse-modal jse-copy-paste svelte-1olothd");
    },
    m(D, R) {
      U(D, e, R), pe(n, e, null), E(e, i), E(e, r), E(r, s), E(r, o), E(r, l), E(l, a), E(a, c), E(a, u), E(l, f), E(l, h), E(h, d), E(h, p), E(l, g), E(l, _), E(_, m), E(_, C), E(r, v), E(r, k), E(k, S), O = !0, w || (A = se(S, "click", t[0]), w = !0);
    },
    p: ve,
    i(D) {
      O || (P(n.$$.fragment, D), O = !0);
    },
    o(D) {
      x(n.$$.fragment, D), O = !1;
    },
    d(D) {
      D && V(e), ge(n), w = !1, A();
    }
  };
}
function $z(t) {
  const { close: e } = gi("simple-modal");
  return [e, o6 ? "⌘" : "Ctrl"];
}
class eV extends Qe {
  constructor(e) {
    super(), Xe(this, e, $z, Zz, wt, {});
  }
}
const J6 = eV;
function tV(t) {
  return K6(t);
}
function K6(t) {
  return t && (t.type === "space" || t.space === !0);
}
function Pp(t) {
  return t && (t.type === "separator" || t.separator === !0);
}
function nV(t) {
  return t && t.type === "label" && typeof t.text == "string";
}
function Ju(t) {
  return t && typeof t.onClick == "function";
}
function cb(t) {
  return t && t.type === "dropdown-button" && Ju(t.main) && Array.isArray(t.items);
}
function iV(t) {
  return t && t.type === "row" && Array.isArray(t.items);
}
function rV(t) {
  return t && t.type === "column" && Array.isArray(t.items);
}
function R2(t) {
  return typeof t.parseError == "object" && t.parseError !== null;
}
function sV(t) {
  return Array.isArray(t.validationErrors);
}
const oV = (t) => ({}), P2 = (t) => ({});
function I2(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
const lV = (t) => ({}), D2 = (t) => ({});
function aV(t) {
  let e = B2(t[3]) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = B2(i[3]) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function cV(t) {
  let e, n, i, r, s, o, l, a, c = t[3].icon && N2(t), u = t[3].text && L2(t);
  return {
    c() {
      e = j("button"), c && c.c(), n = Q(), u && u.c(), b(e, "type", "button"), b(e, "class", i = "jse-button " + t[3].className + " svelte-497ud4"), b(e, "title", r = t[3].title), e.disabled = s = t[3].disabled || !1;
    },
    m(f, h) {
      U(f, e, h), c && c.m(e, null), E(e, n), u && u.m(e, null), o = !0, l || (a = se(e, "click", function() {
        hi(t[3].onClick) && t[3].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(f, h) {
      t = f, t[3].icon ? c ? (c.p(t, h), h & 1 && P(c, 1)) : (c = N2(t), c.c(), P(c, 1), c.m(e, n)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee()), t[3].text ? u ? u.p(t, h) : (u = L2(t), u.c(), u.m(e, null)) : u && (u.d(1), u = null), (!o || h & 1 && i !== (i = "jse-button " + t[3].className + " svelte-497ud4")) && b(e, "class", i), (!o || h & 1 && r !== (r = t[3].title)) && b(e, "title", r), (!o || h & 1 && s !== (s = t[3].disabled || !1)) && (e.disabled = s);
    },
    i(f) {
      o || (P(c), o = !0);
    },
    o(f) {
      x(c), o = !1;
    },
    d(f) {
      f && V(e), c && c.d(), u && u.d(), l = !1, a();
    }
  };
}
function uV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-space svelte-497ud4");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function fV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-497ud4");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function N2(t) {
  let e, n;
  return e = new Mt({ props: { data: t[3].icon } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[3].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function L2(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function j2(t) {
  let e, n, i, r, s, o, l;
  const a = [fV, uV, cV, aV], c = [];
  function u(f, h) {
    return h & 1 && (e = null), h & 1 && (n = null), h & 1 && (i = null), e == null && (e = !!Pp(f[3])), e ? 0 : (n == null && (n = !!K6(f[3])), n ? 1 : (i == null && (i = !!Ju(f[3])), i ? 2 : 3));
  }
  return r = u(t, -1), s = c[r] = a[r](t), {
    c() {
      s.c(), o = ot();
    },
    m(f, h) {
      c[r].m(f, h), U(f, o, h), l = !0;
    },
    p(f, h) {
      let d = r;
      r = u(f, h), r === d ? c[r].p(f, h) : (Se(), x(c[d], 1, 1, () => {
        c[d] = null;
      }), Ee(), s = c[r], s ? s.p(f, h) : (s = c[r] = a[r](f), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(f) {
      l || (P(s), l = !0);
    },
    o(f) {
      x(s), l = !1;
    },
    d(f) {
      c[r].d(f), f && V(o);
    }
  };
}
function hV(t) {
  let e, n, i, r;
  const s = t[2].left, o = Vn(s, t, t[1], D2);
  let l = t[0], a = [];
  for (let h = 0; h < l.length; h += 1)
    a[h] = j2(I2(t, l, h));
  const c = (h) => x(a[h], 1, 1, () => {
    a[h] = null;
  }), u = t[2].right, f = Vn(u, t, t[1], P2);
  return {
    c() {
      e = j("div"), o && o.c(), n = Q();
      for (let h = 0; h < a.length; h += 1)
        a[h].c();
      i = Q(), f && f.c(), b(e, "class", "jse-menu svelte-497ud4");
    },
    m(h, d) {
      U(h, e, d), o && o.m(e, null), E(e, n);
      for (let p = 0; p < a.length; p += 1)
        a[p].m(e, null);
      E(e, i), f && f.m(e, null), r = !0;
    },
    p(h, [d]) {
      if (o && o.p && (!r || d & 2) && Hn(
        o,
        s,
        h,
        h[1],
        r ? Un(s, h[1], d, lV) : Wn(h[1]),
        D2
      ), d & 1) {
        l = h[0];
        let p;
        for (p = 0; p < l.length; p += 1) {
          const g = I2(h, l, p);
          a[p] ? (a[p].p(g, d), P(a[p], 1)) : (a[p] = j2(g), a[p].c(), P(a[p], 1), a[p].m(e, i));
        }
        for (Se(), p = l.length; p < a.length; p += 1)
          c(p);
        Ee();
      }
      f && f.p && (!r || d & 2) && Hn(
        f,
        u,
        h,
        h[1],
        r ? Un(u, h[1], d, oV) : Wn(h[1]),
        P2
      );
    },
    i(h) {
      if (!r) {
        P(o, h);
        for (let d = 0; d < l.length; d += 1)
          P(a[d]);
        P(f, h), r = !0;
      }
    },
    o(h) {
      x(o, h), a = a.filter(Boolean);
      for (let d = 0; d < a.length; d += 1)
        x(a[d]);
      x(f, h), r = !1;
    },
    d(h) {
      h && V(e), o && o.d(h), Vt(a, h), f && f.d(h);
    }
  };
}
function B2(t) {
  return console.error("Unknown type of menu item", t), "???";
}
function dV(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { items: s = [] } = e;
  return t.$$set = (o) => {
    "items" in o && n(0, s = o.items), "$$scope" in o && n(1, r = o.$$scope);
  }, [s, r, i];
}
class pV extends Qe {
  constructor(e) {
    super(), Xe(this, e, dV, hV, wt, { items: 0 });
  }
}
const Ip = pV;
function gV(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "Repair invalid JSON, then click apply", b(e, "slot", "left"), b(e, "class", "jse-info svelte-gz09vf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function mV(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "success",
      message: "JSON is valid now and can be parsed.",
      actions: t[6]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.actions = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function bV(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "error",
      icon: ql,
      message: `Cannot parse JSON: ${t[2].message}`,
      actions: t[7]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 4 && (s.message = `Cannot parse JSON: ${i[2].message}`), r & 128 && (s.actions = i[7]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function _V(t) {
  let e, n, i, r, s, o, l, a, c, u;
  n = new Ip({
    props: {
      items: t[5],
      $$slots: { left: [gV] },
      $$scope: { ctx: t }
    }
  });
  const f = [bV, mV], h = [];
  function d(p, g) {
    return p[2] ? 0 : 1;
  }
  return r = d(t), s = h[r] = f[r](t), {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), s.c(), o = Q(), l = j("textarea"), l.value = t[0], l.readOnly = t[1], b(l, "class", "jse-json-text svelte-gz09vf"), b(l, "autocomplete", "off"), b(l, "autocapitalize", "off"), b(l, "spellcheck", "false"), b(e, "class", "jse-json-repair-component svelte-gz09vf");
    },
    m(p, g) {
      U(p, e, g), pe(n, e, null), E(e, i), h[r].m(e, null), E(e, o), E(e, l), t[17](l), t[18](e), a = !0, c || (u = se(l, "input", t[8]), c = !0);
    },
    p(p, [g]) {
      const _ = {};
      g & 32 && (_.items = p[5]), g & 33554432 && (_.$$scope = { dirty: g, ctx: p }), n.$set(_);
      let m = r;
      r = d(p), r === m ? h[r].p(p, g) : (Se(), x(h[m], 1, 1, () => {
        h[m] = null;
      }), Ee(), s = h[r], s ? s.p(p, g) : (s = h[r] = f[r](p), s.c()), P(s, 1), s.m(e, o)), (!a || g & 1) && (l.value = p[0]), (!a || g & 2) && (l.readOnly = p[1]);
    },
    i(p) {
      a || (P(n.$$.fragment, p), P(s), a = !0);
    },
    o(p) {
      x(n.$$.fragment, p), x(s), a = !1;
    },
    d(p) {
      p && V(e), ge(n), h[r].d(), t[17](null), t[18](null), c = !1, u();
    }
  };
}
function yV(t, e, n) {
  let i, r, s, o, l, a, { text: c = "" } = e, { readOnly: u = !1 } = e, { onParse: f } = e, { onRepair: h } = e, { onChange: d = null } = e, { onApply: p } = e, { onCancel: g } = e;
  const _ = mi("jsoneditor:JSONRepair");
  let m, C;
  function v(H) {
    try {
      return f(H), null;
    } catch (J) {
      return vp(H, J.message);
    }
  }
  function k(H) {
    try {
      return h(H), !0;
    } catch {
      return !1;
    }
  }
  function S() {
    C && i && i.position != null && (C.setSelectionRange(i.position, i.position), setTimeout(() => {
      C.focus();
    }));
  }
  function O(H) {
    _("handleChange");
    const J = H.target.value;
    c !== J && (n(0, c = J), d && d(c));
  }
  function w() {
    p(c);
  }
  function A() {
    try {
      n(0, c = h(c)), d && d(c);
    } catch {
    }
  }
  let D;
  function R(H) {
    yt[H ? "unshift" : "push"](() => {
      C = H, n(4, C);
    });
  }
  function M(H) {
    yt[H ? "unshift" : "push"](() => {
      m = H, n(3, m);
    });
  }
  return t.$$set = (H) => {
    "text" in H && n(0, c = H.text), "readOnly" in H && n(1, u = H.readOnly), "onParse" in H && n(9, f = H.onParse), "onRepair" in H && n(10, h = H.onRepair), "onChange" in H && n(11, d = H.onChange), "onApply" in H && n(12, p = H.onApply), "onCancel" in H && n(13, g = H.onCancel);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = v(c)), t.$$.dirty & 1 && n(16, r = k(c)), t.$$.dirty & 4 && _("error", i), t.$$.dirty & 8192 && n(5, D = [
      { type: "space" },
      {
        type: "button",
        icon: oc,
        title: "Cancel repair",
        className: "jse-cancel",
        onClick: g
      }
    ]), t.$$.dirty & 114688 && n(7, l = r ? [s, o] : [s]), t.$$.dirty & 2 && n(6, a = [
      {
        icon: ou,
        text: "Apply",
        title: "Apply fixed JSON",
        disabled: u,
        onClick: w
      }
    ]);
  }, n(14, s = {
    icon: rF,
    text: "Show me",
    title: "Scroll to the error location",
    onClick: S
  }), n(15, o = {
    icon: Ap,
    text: "Auto repair",
    title: "Automatically repair JSON",
    onClick: A
  }), [
    c,
    u,
    i,
    m,
    C,
    D,
    a,
    l,
    O,
    f,
    h,
    d,
    p,
    g,
    s,
    o,
    r,
    R,
    M
  ];
}
class wV extends Qe {
  constructor(e) {
    super(), Xe(this, e, yV, _V, wt, {
      text: 0,
      readOnly: 1,
      onParse: 9,
      onRepair: 10,
      onChange: 11,
      onApply: 12,
      onCancel: 13
    });
  }
}
const vV = wV;
function kV(t) {
  let e, n, i, r;
  function s(l) {
    t[6](l);
  }
  let o = {
    onParse: t[1],
    onRepair: t[2],
    onApply: t[3],
    onCancel: t[4]
  };
  return t[0] !== void 0 && (o.text = t[0]), n = new vV({ props: o }), yt.push(() => Pr(n, "text", s, t[0])), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-modal jse-repair svelte-1ffm3pm");
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), r = !0;
    },
    p(l, [a]) {
      const c = {};
      a & 2 && (c.onParse = l[1]), a & 4 && (c.onRepair = l[2]), !i && a & 1 && (i = !0, c.text = l[0], Rr(() => i = !1)), n.$set(c);
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n);
    }
  };
}
function CV(t, e, n) {
  let { text: i } = e, { onParse: r } = e, { onRepair: s } = e, { onApply: o } = e;
  const { close: l } = gi("simple-modal");
  function a(f) {
    l(), o(f);
  }
  function c() {
    l();
  }
  function u(f) {
    i = f, n(0, i);
  }
  return t.$$set = (f) => {
    "text" in f && n(0, i = f.text), "onParse" in f && n(1, r = f.onParse), "onRepair" in f && n(2, s = f.onRepair), "onApply" in f && n(5, o = f.onApply);
  }, [
    i,
    r,
    s,
    a,
    c,
    o,
    u
  ];
}
class SV extends Qe {
  constructor(e) {
    super(), Xe(this, e, CV, kV, wt, {
      text: 0,
      onParse: 1,
      onRepair: 2,
      onApply: 5
    });
  }
}
const G6 = SV;
function x2(t) {
  let e, n;
  return e = new Mt({ props: { data: t[0].icon } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[0].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function F2(t) {
  let e = t[0].text + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[0].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function EV(t) {
  let e, n, i, r, s, o, l, a, c = t[0].icon && x2(t), u = t[0].text && F2(t);
  return {
    c() {
      e = j("button"), c && c.c(), n = Q(), u && u.c(), b(e, "type", "button"), b(e, "class", i = bn(Cs("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8"), b(e, "title", r = t[0].title), e.disabled = s = t[0].disabled || !1;
    },
    m(f, h) {
      U(f, e, h), c && c.m(e, null), E(e, n), u && u.m(e, null), o = !0, l || (a = se(e, "click", function() {
        hi(t[0].onClick) && t[0].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(f, [h]) {
      t = f, t[0].icon ? c ? (c.p(t, h), h & 1 && P(c, 1)) : (c = x2(t), c.c(), P(c, 1), c.m(e, n)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee()), t[0].text ? u ? u.p(t, h) : (u = F2(t), u.c(), u.m(e, null)) : u && (u.d(1), u = null), (!o || h & 3 && i !== (i = bn(Cs("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8")) && b(e, "class", i), (!o || h & 1 && r !== (r = t[0].title)) && b(e, "title", r), (!o || h & 1 && s !== (s = t[0].disabled || !1)) && (e.disabled = s);
    },
    i(f) {
      o || (P(c), o = !0);
    },
    o(f) {
      x(c), o = !1;
    },
    d(f) {
      f && V(e), c && c.d(), u && u.d(), l = !1, a();
    }
  };
}
function AV(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (s) => {
    "item" in s && n(0, i = s.item), "className" in s && n(1, r = s.className);
  }, [i, r];
}
class MV extends Qe {
  constructor(e) {
    super(), Xe(this, e, AV, EV, xt, { item: 0, className: 1 });
  }
}
const ub = MV;
function z2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
const OV = (t) => ({}), V2 = (t) => ({});
function U2(t) {
  let e, n;
  return e = new Mt({ props: { data: t[11].icon } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[11].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function H2(t) {
  let e, n, i, r = t[11].text + "", s, o, l, a, c, u, f, h, d = t[11].icon && U2(t);
  function p() {
    return t[9](t[11]);
  }
  return {
    c() {
      e = j("li"), n = j("button"), d && d.c(), i = Q(), s = we(r), c = Q(), b(n, "type", "button"), b(n, "title", o = t[11].title), n.disabled = l = t[11].disabled, b(n, "class", a = bn(t[11].className) + " svelte-12ophpi"), b(e, "class", "svelte-12ophpi");
    },
    m(g, _) {
      U(g, e, _), E(e, n), d && d.m(n, null), E(n, i), E(n, s), E(e, c), u = !0, f || (h = se(n, "click", p), f = !0);
    },
    p(g, _) {
      t = g, t[11].icon ? d ? (d.p(t, _), _ & 1 && P(d, 1)) : (d = U2(t), d.c(), P(d, 1), d.m(n, i)) : d && (Se(), x(d, 1, 1, () => {
        d = null;
      }), Ee()), (!u || _ & 1) && r !== (r = t[11].text + "") && ze(s, r), (!u || _ & 1 && o !== (o = t[11].title)) && b(n, "title", o), (!u || _ & 1 && l !== (l = t[11].disabled)) && (n.disabled = l), (!u || _ & 1 && a !== (a = bn(t[11].className) + " svelte-12ophpi")) && b(n, "class", a);
    },
    i(g) {
      u || (P(d), u = !0);
    },
    o(g) {
      x(d), u = !1;
    },
    d(g) {
      g && V(e), d && d.d(), f = !1, h();
    }
  };
}
function TV(t) {
  let e, n, i, r, s, o, l, a, c, u;
  const f = t[8].defaultItem, h = Vn(f, t, t[7], V2);
  r = new Mt({ props: { data: dr } });
  let d = t[0], p = [];
  for (let _ = 0; _ < d.length; _ += 1)
    p[_] = H2(z2(t, d, _));
  const g = (_) => x(p[_], 1, 1, () => {
    p[_] = null;
  });
  return {
    c() {
      e = j("div"), h && h.c(), n = Q(), i = j("button"), me(r.$$.fragment), s = Q(), o = j("div"), l = j("ul");
      for (let _ = 0; _ < p.length; _ += 1)
        p[_].c();
      b(i, "type", "button"), b(i, "class", "jse-open-dropdown svelte-12ophpi"), b(i, "data-type", "jse-open-dropdown"), i.disabled = t[4], Ce(i, "jse-visible", t[3]), b(l, "class", "svelte-12ophpi"), b(o, "class", "jse-dropdown-items svelte-12ophpi"), Li(o, "width", t[2]), Ce(o, "jse-visible", t[3]), b(e, "class", "jse-dropdown-button svelte-12ophpi"), b(e, "title", t[1]);
    },
    m(_, m) {
      U(_, e, m), h && h.m(e, null), E(e, n), E(e, i), pe(r, i, null), E(e, s), E(e, o), E(o, l);
      for (let C = 0; C < p.length; C += 1)
        p[C].m(l, null);
      a = !0, c || (u = [
        se(i, "click", t[5]),
        se(e, "click", t[6])
      ], c = !0);
    },
    p(_, [m]) {
      if (h && h.p && (!a || m & 128) && Hn(
        h,
        f,
        _,
        _[7],
        a ? Un(f, _[7], m, OV) : Wn(_[7]),
        V2
      ), (!a || m & 16) && (i.disabled = _[4]), (!a || m & 8) && Ce(i, "jse-visible", _[3]), m & 1) {
        d = _[0];
        let C;
        for (C = 0; C < d.length; C += 1) {
          const v = z2(_, d, C);
          p[C] ? (p[C].p(v, m), P(p[C], 1)) : (p[C] = H2(v), p[C].c(), P(p[C], 1), p[C].m(l, null));
        }
        for (Se(), C = d.length; C < p.length; C += 1)
          g(C);
        Ee();
      }
      (!a || m & 4) && Li(o, "width", _[2]), (!a || m & 8) && Ce(o, "jse-visible", _[3]), (!a || m & 2) && b(e, "title", _[1]);
    },
    i(_) {
      if (!a) {
        P(h, _), P(r.$$.fragment, _);
        for (let m = 0; m < d.length; m += 1)
          P(p[m]);
        a = !0;
      }
    },
    o(_) {
      x(h, _), x(r.$$.fragment, _), p = p.filter(Boolean);
      for (let m = 0; m < p.length; m += 1)
        x(p[m]);
      a = !1;
    },
    d(_) {
      _ && V(e), h && h.d(_), ge(r), Vt(p, _), c = !1, ht(u);
    }
  };
}
function RV(t, e, n) {
  let i, { $$slots: r = {}, $$scope: s } = e, { items: o = [] } = e, { title: l = void 0 } = e, { width: a = "120px" } = e, c = !1;
  function u() {
    const p = c;
    setTimeout(() => n(3, c = !p));
  }
  function f() {
    n(3, c = !1);
  }
  function h(p) {
    Yo(p) === "Escape" && (p.preventDefault(), n(3, c = !1));
  }
  or(() => {
    document.addEventListener("click", f), document.addEventListener("keydown", h);
  }), vs(() => {
    document.removeEventListener("click", f), document.removeEventListener("keydown", h);
  });
  const d = (p) => p.onClick();
  return t.$$set = (p) => {
    "items" in p && n(0, o = p.items), "title" in p && n(1, l = p.title), "width" in p && n(2, a = p.width), "$$scope" in p && n(7, s = p.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = o.every((p) => p.disabled === !0));
  }, [
    o,
    l,
    a,
    c,
    i,
    u,
    f,
    s,
    r,
    d
  ];
}
class PV extends Qe {
  constructor(e) {
    super(), Xe(this, e, RV, TV, wt, { items: 0, title: 1, width: 2 });
  }
}
const IV = PV;
function W2(t) {
  let e, n;
  return e = new Mt({
    props: { data: t[0].main.icon }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[0].main.icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function DV(t) {
  let e, n, i = t[0].main.text + "", r, s, o, l, a, c, u, f = t[0].main.icon && W2(t);
  return {
    c() {
      e = j("button"), f && f.c(), n = Q(), r = we(i), b(e, "class", s = bn(Cs("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8"), b(e, "type", "button"), b(e, "slot", "defaultItem"), b(e, "title", o = t[0].main.title), e.disabled = l = t[0].main.disabled || !1;
    },
    m(h, d) {
      U(h, e, d), f && f.m(e, null), E(e, n), E(e, r), a = !0, c || (u = se(e, "click", function() {
        hi(t[0].main.onClick) && t[0].main.onClick.apply(this, arguments);
      }), c = !0);
    },
    p(h, d) {
      t = h, t[0].main.icon ? f ? (f.p(t, d), d & 1 && P(f, 1)) : (f = W2(t), f.c(), P(f, 1), f.m(e, n)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), (!a || d & 1) && i !== (i = t[0].main.text + "") && ze(r, i), (!a || d & 3 && s !== (s = bn(Cs("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8")) && b(e, "class", s), (!a || d & 1 && o !== (o = t[0].main.title)) && b(e, "title", o), (!a || d & 1 && l !== (l = t[0].main.disabled || !1)) && (e.disabled = l);
    },
    i(h) {
      a || (P(f), a = !0);
    },
    o(h) {
      x(f), a = !1;
    },
    d(h) {
      h && V(e), f && f.d(), c = !1, u();
    }
  };
}
function NV(t) {
  let e, n;
  return e = new IV({
    props: {
      width: t[0].width,
      items: t[0].items,
      $$slots: { defaultItem: [DV] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.width = i[0].width), r & 1 && (s.items = i[0].items), r & 7 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function LV(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (s) => {
    "item" in s && n(0, i = s.item), "className" in s && n(1, r = s.className);
  }, [i, r];
}
class jV extends Qe {
  constructor(e) {
    super(), Xe(this, e, LV, NV, xt, { item: 0, className: 1 });
  }
}
const fb = jV;
function q2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function J2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function K2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
function BV(t) {
  let e = Ba(t[5]) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[5]) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function xV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function FV(t) {
  let e, n, i = t[5].items, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = Y2(J2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      e = j("div");
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      b(e, "class", "jse-row svelte-1nininf");
    },
    m(o, l) {
      U(o, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(o, l) {
      if (l & 1) {
        i = o[5].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = J2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = Y2(c), r[a].c(), P(r[a], 1), r[a].m(e, null));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      o && V(e), Vt(r, o);
    }
  };
}
function zV(t) {
  let e, n;
  return e = new fb({ props: { item: t[5] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function VV(t) {
  let e, n;
  return e = new ub({ props: { item: t[5] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function UV(t) {
  let e = Ba(t[8]) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[8]) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function HV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function WV(t) {
  let e, n, i = t[8].items, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = G2(K2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      e = j("div");
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      b(e, "class", "jse-column svelte-1nininf");
    },
    m(o, l) {
      U(o, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(o, l) {
      if (l & 1) {
        i = o[8].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = K2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = G2(c), r[a].c(), P(r[a], 1), r[a].m(e, null));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      o && V(e), Vt(r, o);
    }
  };
}
function qV(t) {
  let e, n;
  return e = new fb({ props: { item: t[8] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function JV(t) {
  let e, n;
  return e = new ub({ props: { item: t[8] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function KV(t) {
  let e = Ba(t[11]) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[11]) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function GV(t) {
  let e, n = t[11].text + "", i;
  return {
    c() {
      e = j("div"), i = we(n), b(e, "class", "jse-label svelte-1nininf");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s & 1 && n !== (n = r[11].text + "") && ze(i, n);
    },
    i: ve,
    o: ve,
    d(r) {
      r && V(e);
    }
  };
}
function YV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function XV(t) {
  let e, n;
  return e = new fb({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[11]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function QV(t) {
  let e, n;
  return e = new ub({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[11]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function G2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    QV,
    XV,
    YV,
    GV,
    KV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[11])), e ? 0 : (n == null && (n = !!cb(h[11])), n ? 1 : (i == null && (i = !!Pp(h[11])), i ? 2 : (r == null && (r = !!nV(h[11])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = ot();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Se(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Ee(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function Y2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    JV,
    qV,
    WV,
    HV,
    UV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[8])), e ? 0 : (n == null && (n = !!cb(h[8])), n ? 1 : (i == null && (i = !!rV(h[8])), i ? 2 : (r == null && (r = !!Pp(h[8])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = ot();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Se(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Ee(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function X2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    VV,
    zV,
    FV,
    xV,
    BV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[5])), e ? 0 : (n == null && (n = !!cb(h[5])), n ? 1 : (i == null && (i = !!iV(h[5])), i ? 2 : (r == null && (r = !!Pp(h[5])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = ot();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Se(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Ee(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function Q2(t) {
  let e, n, i, r, s, o, l, a;
  return r = new Mt({ props: { data: sB } }), {
    c() {
      e = j("div"), n = j("div"), i = j("div"), me(r.$$.fragment), s = Q(), o = j("div"), l = we(t[1]), b(i, "class", "jse-tip-icon svelte-1nininf"), b(o, "class", "jse-tip-text"), b(n, "class", "jse-tip svelte-1nininf"), b(e, "class", "jse-row svelte-1nininf");
    },
    m(c, u) {
      U(c, e, u), E(e, n), E(n, i), pe(r, i, null), E(n, s), E(n, o), E(o, l), a = !0;
    },
    p(c, u) {
      (!a || u & 2) && ze(l, c[1]);
    },
    i(c) {
      a || (P(r.$$.fragment, c), a = !0);
    },
    o(c) {
      x(r.$$.fragment, c), a = !1;
    },
    d(c) {
      c && V(e), ge(r);
    }
  };
}
function ZV(t) {
  let e, n, i, r, s, o = t[0], l = [];
  for (let u = 0; u < o.length; u += 1)
    l[u] = X2(q2(t, o, u));
  const a = (u) => x(l[u], 1, 1, () => {
    l[u] = null;
  });
  let c = t[1] && Q2(t);
  return {
    c() {
      e = j("div");
      for (let u = 0; u < l.length; u += 1)
        l[u].c();
      n = Q(), c && c.c(), b(e, "class", "jse-contextmenu svelte-1nininf");
    },
    m(u, f) {
      U(u, e, f);
      for (let h = 0; h < l.length; h += 1)
        l[h].m(e, null);
      E(e, n), c && c.m(e, null), t[4](e), i = !0, r || (s = se(e, "keydown", t[3]), r = !0);
    },
    p(u, [f]) {
      if (f & 1) {
        o = u[0];
        let h;
        for (h = 0; h < o.length; h += 1) {
          const d = q2(u, o, h);
          l[h] ? (l[h].p(d, f), P(l[h], 1)) : (l[h] = X2(d), l[h].c(), P(l[h], 1), l[h].m(e, n));
        }
        for (Se(), h = o.length; h < l.length; h += 1)
          a(h);
        Ee();
      }
      u[1] ? c ? (c.p(u, f), f & 2 && P(c, 1)) : (c = Q2(u), c.c(), P(c, 1), c.m(e, null)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee());
    },
    i(u) {
      if (!i) {
        for (let f = 0; f < o.length; f += 1)
          P(l[f]);
        P(c), i = !0;
      }
    },
    o(u) {
      l = l.filter(Boolean);
      for (let f = 0; f < l.length; f += 1)
        x(l[f]);
      x(c), i = !1;
    },
    d(u) {
      u && V(e), Vt(l, u), c && c.d(), t[4](null), r = !1, s();
    }
  };
}
function Ba(t) {
  return console.error("Unknown type of context menu item", t), "???";
}
function $V(t, e, n) {
  let { items: i } = e, { tip: r } = e, s;
  or(() => {
    setTimeout(() => {
      const a = [...s.querySelectorAll("button")].find((c) => !c.disabled);
      a && a.focus();
    });
  });
  function o(a) {
    const c = Yo(a).replace(/^Command\+/, "Ctrl+");
    if (c === "Up" || c === "Down" || c === "Left" || c === "Right") {
      a.preventDefault();
      const u = Array.from(s.querySelectorAll("button:not([disabled])")), f = Nj({
        allElements: u,
        currentElement: a.target,
        direction: c,
        hasPrio: (h) => h.getAttribute("data-type") !== "jse-open-dropdown"
      });
      f && f.focus();
    }
  }
  function l(a) {
    yt[a ? "unshift" : "push"](() => {
      s = a, n(2, s);
    });
  }
  return t.$$set = (a) => {
    "items" in a && n(0, i = a.items), "tip" in a && n(1, r = a.tip);
  }, [i, r, s, o, l];
}
class eU extends Qe {
  constructor(e) {
    super(), Xe(this, e, $V, ZV, wt, { items: 0, tip: 1 });
  }
}
const Y6 = eU;
function tU(t) {
  let e, n;
  return e = new Y6({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.items = i[1]), r[0] & 1 && (s.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function nU(t, e, n) {
  let i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, { json: O } = e, { documentState: w } = e, { parser: A } = e, { showTip: D } = e, { onCloseContextMenu: R } = e, { onEditKey: M } = e, { onEditValue: H } = e, { onToggleEnforceString: J } = e, { onCut: I } = e, { onCopy: z } = e, { onPaste: L } = e, { onRemove: K } = e, { onDuplicate: F } = e, { onExtract: N } = e, { onInsertBefore: te } = e, { onInsert: ue } = e, { onConvert: q } = e, { onInsertAfter: re } = e, { onSort: ie } = e, { onTransform: Z } = e;
  function Le() {
    R(), M();
  }
  function Ie() {
    R(), H();
  }
  function Fe() {
    R(), J();
  }
  function le() {
    R(), I(!0);
  }
  function De() {
    R(), I(!1);
  }
  function Ve() {
    R(), z(!0);
  }
  function ye() {
    R(), z(!1);
  }
  function fe() {
    R(), L();
  }
  function Ae() {
    R(), K();
  }
  function ae() {
    R(), F();
  }
  function $() {
    R(), N();
  }
  function de(X) {
    R(), c ? q(X) : ue(X);
  }
  function he() {
    R(), ie();
  }
  function W() {
    R(), Z();
  }
  function y() {
    R(), te();
  }
  function T() {
    R(), re();
  }
  let B;
  return t.$$set = (X) => {
    "json" in X && n(2, O = X.json), "documentState" in X && n(3, w = X.documentState), "parser" in X && n(4, A = X.parser), "showTip" in X && n(0, D = X.showTip), "onCloseContextMenu" in X && n(5, R = X.onCloseContextMenu), "onEditKey" in X && n(6, M = X.onEditKey), "onEditValue" in X && n(7, H = X.onEditValue), "onToggleEnforceString" in X && n(8, J = X.onToggleEnforceString), "onCut" in X && n(9, I = X.onCut), "onCopy" in X && n(10, z = X.onCopy), "onPaste" in X && n(11, L = X.onPaste), "onRemove" in X && n(12, K = X.onRemove), "onDuplicate" in X && n(13, F = X.onDuplicate), "onExtract" in X && n(14, N = X.onExtract), "onInsertBefore" in X && n(15, te = X.onInsertBefore), "onInsert" in X && n(16, ue = X.onInsert), "onConvert" in X && n(17, q = X.onConvert), "onInsertAfter" in X && n(18, re = X.onInsertAfter), "onSort" in X && n(19, ie = X.onSort), "onTransform" in X && n(20, Z = X.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(37, i = w.selection), t.$$.dirty[0] & 4 && n(39, r = O !== void 0), t.$$.dirty[1] & 64 && n(31, s = i != null), t.$$.dirty[1] & 65 && n(21, o = s && Pt(i.focusPath)), t.$$.dirty[0] & 4 | t.$$.dirty[1] & 65 && n(38, l = s ? Ze(O, i.focusPath) : void 0), t.$$.dirty[1] & 128 && n(35, a = Array.isArray(l) ? "Edit array" : Cn(l) ? "Edit object" : "Edit value"), t.$$.dirty[1] & 320 && n(22, c = r && (Bt(i) || Ln(i) || Et(i))), t.$$.dirty[0] & 6291456 | t.$$.dirty[1] & 256 && n(30, u = r && c && !o), t.$$.dirty[0] & 2097152 | t.$$.dirty[1] & 320 && n(29, f = r && i != null && (Bt(i) || Et(i)) && !o), t.$$.dirty[0] & 2097156 | t.$$.dirty[1] & 320 && n(36, h = r && i != null && su(i) && !o && !Array.isArray(Ze(O, At(i.focusPath)))), t.$$.dirty[1] & 320 && n(34, d = r && i != null && su(i)), t.$$.dirty[1] & 136 && n(32, p = d && !dn(l)), t.$$.dirty[0] & 4194304 && n(25, g = c), t.$$.dirty[0] & 33554432 && n(24, _ = g ? "Convert to:" : "Insert:"), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 1 && n(28, m = g ? !1 : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(27, C = g ? _l(i) && !Cn(l) : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(26, v = g ? _l(i) && !Array.isArray(l) : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(23, k = g ? _l(i) && dn(l) : s), t.$$.dirty[0] & 24 | t.$$.dirty[1] & 192 && n(33, S = i != null ? Xs(l, w.enforceStringMap, Be(i.focusPath), A) : !1), t.$$.dirty[0] & 2145386496 | t.$$.dirty[1] & 63 && n(1, B = [
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: Le,
            icon: Bc,
            text: "Edit key",
            title: "Edit the key (Double-click on the key)",
            disabled: !h
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Ie,
              icon: Bc,
              text: a,
              title: "Edit the value (Double-click on the value)",
              disabled: !d
            },
            width: "11em",
            items: [
              {
                type: "button",
                icon: Bc,
                text: a,
                title: "Edit the value (Double-click on the value)",
                onClick: Ie,
                disabled: !d
              },
              {
                type: "button",
                icon: S ? nu : iu,
                text: "Enforce string",
                title: "Enforce keeping the value as string when it contains a numeric value",
                onClick: Fe,
                disabled: !p
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: le,
              icon: ga,
              text: "Cut",
              title: "Cut selected contents, formatted with indentation (Ctrl+X)",
              disabled: !c
            },
            width: "10em",
            items: [
              {
                type: "button",
                icon: ga,
                text: "Cut formatted",
                title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                onClick: le,
                disabled: !c
              },
              {
                type: "button",
                icon: ga,
                text: "Cut compacted",
                title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                onClick: De,
                disabled: !c
              }
            ]
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Ve,
              icon: To,
              text: "Copy",
              title: "Copy selected contents, formatted with indentation (Ctrl+C)",
              disabled: !c
            },
            width: "12em",
            items: [
              {
                type: "button",
                icon: To,
                text: "Copy formatted",
                title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                onClick: Ve,
                disabled: !c
              },
              {
                type: "button",
                icon: To,
                text: "Copy compacted",
                title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                onClick: ye,
                disabled: !c
              }
            ]
          },
          {
            type: "button",
            onClick: fe,
            icon: I6,
            text: "Paste",
            title: "Paste clipboard contents (Ctrl+V)",
            disabled: !s
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "button",
                onClick: Ae,
                icon: oc,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !c
              },
              {
                type: "button",
                onClick: ae,
                icon: lF,
                text: "Duplicate",
                title: "Duplicate selected contents (Ctrl+D)",
                disabled: !u
              },
              {
                type: "button",
                onClick: $,
                icon: Zx,
                text: "Extract",
                title: "Extract selected contents",
                disabled: !f
              },
              {
                type: "button",
                onClick: he,
                icon: Mp,
                text: "Sort",
                title: "Sort array or object contents",
                disabled: !c
              },
              {
                type: "button",
                onClick: W,
                icon: Ep,
                text: "Transform",
                title: "Transform array or object contents (filter, sort, project)",
                disabled: !c
              }
            ]
          },
          {
            type: "column",
            items: [
              { type: "label", text: _ },
              {
                type: "button",
                onClick: () => de("structure"),
                icon: g ? Cf : Sf,
                text: "Structure",
                title: _ + " structure",
                disabled: !m
              },
              {
                type: "button",
                onClick: () => de("object"),
                icon: g ? Cf : Sf,
                text: "Object",
                title: _ + " structure",
                disabled: !C
              },
              {
                type: "button",
                onClick: () => de("array"),
                icon: g ? Cf : Sf,
                text: "Array",
                title: _ + " array",
                disabled: !v
              },
              {
                type: "button",
                onClick: () => de("value"),
                icon: g ? Cf : Sf,
                text: "Value",
                title: _ + " value",
                disabled: !k
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: y,
            icon: Gx,
            text: "Insert before",
            title: "Select area before current entry to insert or paste contents",
            disabled: !c || o
          },
          {
            type: "button",
            onClick: T,
            icon: Hx,
            text: "Insert after",
            title: "Select area after current entry to insert or paste contents",
            disabled: !c || o
          }
        ]
      }
    ]);
  }, [
    D,
    B,
    O,
    w,
    A,
    R,
    M,
    H,
    J,
    I,
    z,
    L,
    K,
    F,
    N,
    te,
    ue,
    q,
    re,
    ie,
    Z,
    o,
    c,
    k,
    _,
    g,
    v,
    C,
    m,
    f,
    u,
    s,
    p,
    S,
    d,
    a,
    h,
    i,
    l,
    r
  ];
}
class iU extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      nU,
      tU,
      wt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditKey: 6,
        onEditValue: 7,
        onToggleEnforceString: 8,
        onCut: 9,
        onCopy: 10,
        onPaste: 11,
        onRemove: 12,
        onDuplicate: 13,
        onExtract: 14,
        onInsertBefore: 15,
        onInsert: 16,
        onConvert: 17,
        onInsertAfter: 18,
        onSort: 19,
        onTransform: 20
      },
      null,
      [-1, -1]
    );
  }
}
const rU = iU;
function Z2(t, e, n) {
  const i = t.slice();
  return i[13] = e[n], i;
}
function $2(t) {
  let e, n, i = t[13].start + "", r, s, o = t[13].end + "", l, a, c, u;
  function f() {
    return t[12](t[13]);
  }
  return {
    c() {
      e = j("button"), n = we("show "), r = we(i), s = we("-"), l = we(o), a = Q(), b(e, "type", "button"), b(e, "class", "jse-expand-items svelte-1knbf5w");
    },
    m(h, d) {
      U(h, e, d), E(e, n), E(e, r), E(e, s), E(e, l), E(e, a), c || (u = se(e, "click", f), c = !0);
    },
    p(h, d) {
      t = h, d & 16 && i !== (i = t[13].start + "") && ze(r, i), d & 16 && o !== (o = t[13].end + "") && ze(l, o);
    },
    d(h) {
      h && V(e), c = !1, u();
    }
  };
}
function sU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = t[4], d = [];
  for (let p = 0; p < h.length; p += 1)
    d[p] = $2(Z2(t, h, p));
  return {
    c() {
      e = j("div"), n = j("div"), i = j("div"), r = we("Items "), s = we(t[3]), o = we("-"), l = we(t[2]), a = Q();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      b(i, "class", "jse-text svelte-1knbf5w"), b(e, "class", "jse-collapsed-items svelte-1knbf5w"), b(e, "style", c = ev(t[0].length + 2)), Ce(e, "jse-selected", t[5]);
    },
    m(p, g) {
      U(p, e, g), E(e, n), E(n, i), E(i, r), E(i, s), E(i, o), E(i, l), E(n, a);
      for (let _ = 0; _ < d.length; _ += 1)
        d[_].m(n, null);
      u || (f = se(e, "mousemove", oU), u = !0);
    },
    p(p, [g]) {
      if (g & 8 && ze(s, p[3]), g & 4 && ze(l, p[2]), g & 19) {
        h = p[4];
        let _;
        for (_ = 0; _ < h.length; _ += 1) {
          const m = Z2(p, h, _);
          d[_] ? d[_].p(m, g) : (d[_] = $2(m), d[_].c(), d[_].m(n, null));
        }
        for (; _ < d.length; _ += 1)
          d[_].d(1);
        d.length = h.length;
      }
      g & 1 && c !== (c = ev(p[0].length + 2)) && b(e, "style", c), g & 32 && Ce(e, "jse-selected", p[5]);
    },
    i: ve,
    o: ve,
    d(p) {
      p && V(e), Vt(d, p), u = !1, f();
    }
  };
}
function ev(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function oU(t) {
  t.stopPropagation();
}
function lU(t, e, n) {
  let i, r, s, o, l, { visibleSections: a } = e, { sectionIndex: c } = e, { total: u } = e, { path: f } = e, { pointer: h } = e, { selection: d } = e, { onExpandSection: p } = e;
  const g = (_) => p(f, _);
  return t.$$set = (_) => {
    "visibleSections" in _ && n(6, a = _.visibleSections), "sectionIndex" in _ && n(7, c = _.sectionIndex), "total" in _ && n(8, u = _.total), "path" in _ && n(0, f = _.path), "pointer" in _ && n(9, h = _.pointer), "selection" in _ && n(10, d = _.selection), "onExpandSection" in _ && n(1, p = _.onExpandSection);
  }, t.$$.update = () => {
    t.$$.dirty & 192 && n(11, i = a[c]), t.$$.dirty & 2048 && n(3, r = i.end), t.$$.dirty & 448 && n(2, s = a[c + 1] ? a[c + 1].start : u), t.$$.dirty & 1544 && n(5, o = Bt(d) ? d.pointersMap[xm(h, r)] === !0 : !1), t.$$.dirty & 12 && n(4, l = BB(r, s));
  }, [
    f,
    p,
    s,
    r,
    l,
    o,
    a,
    c,
    u,
    h,
    d,
    i,
    g
  ];
}
class aU extends Qe {
  constructor(e) {
    super(), Xe(this, e, lU, sU, wt, {
      visibleSections: 6,
      sectionIndex: 7,
      total: 8,
      path: 0,
      pointer: 9,
      selection: 10,
      onExpandSection: 1
    });
  }
}
const cU = aU;
function uU(t) {
  let e, n, i, r, s;
  return n = new Mt({ props: { data: dr } }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-context-menu-pointer svelte-1yzl4st"), b(e, "title", A0), Ce(e, "jse-selected", t[0]);
    },
    m(o, l) {
      U(o, e, l), pe(n, e, null), i = !0, r || (s = se(e, "click", t[1]), r = !0);
    },
    p(o, [l]) {
      (!i || l & 1) && Ce(e, "jse-selected", o[0]);
    },
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), ge(n), r = !1, s();
    }
  };
}
function fU(t, e, n) {
  let { selected: i } = e, { onContextMenu: r } = e;
  function s(o) {
    let l = o.target;
    for (; l && l.nodeName !== "BUTTON"; )
      l = l.parentNode;
    l && r({
      anchor: l,
      left: 0,
      top: 0,
      width: Hs,
      height: Us,
      offsetTop: 2,
      offsetLeft: 0,
      showTip: !0
    });
  }
  return t.$$set = (o) => {
    "selected" in o && n(0, i = o.selected), "onContextMenu" in o && n(2, r = o.onContextMenu);
  }, [i, s, r];
}
class hU extends Qe {
  constructor(e) {
    super(), Xe(this, e, fU, uU, wt, { selected: 0, onContextMenu: 2 });
  }
}
const Qo = hU;
function dU(t) {
  let e, n, i, r, s, o, l;
  const a = [mU, gU], c = [];
  function u(f, h) {
    return f[1] ? 0 : 1;
  }
  return n = u(t), i = c[n] = a[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "data-type", "selectable-key"), b(e, "class", r = bn(t[6](t[0])) + " svelte-566egb");
    },
    m(f, h) {
      U(f, e, h), c[n].m(e, null), s = !0, o || (l = se(e, "dblclick", t[5]), o = !0);
    },
    p(f, h) {
      let d = n;
      n = u(f), n === d ? c[n].p(f, h) : (Se(), x(c[d], 1, 1, () => {
        c[d] = null;
      }), Ee(), i = c[n], i ? i.p(f, h) : (i = c[n] = a[n](f), i.c()), P(i, 1), i.m(e, null)), (!s || h & 1 && r !== (r = bn(f[6](f[0])) + " svelte-566egb")) && b(e, "class", r);
    },
    i(f) {
      s || (P(i), s = !0);
    },
    o(f) {
      x(i), s = !1;
    },
    d(f) {
      f && V(e), c[n].d(), o = !1, l();
    }
  };
}
function pU(t) {
  let e, n;
  return e = new A6({
    props: {
      value: t[2].normalization.escapeValue(t[0]),
      shortText: !0,
      onChange: t[7],
      onCancel: t[8],
      onFind: t[2].onFind
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 5 && (s.value = i[2].normalization.escapeValue(i[0])), r & 4 && (s.onFind = i[2].onFind), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function gU(t) {
  let e = Tl(t[2].normalization.escapeValue(t[0])) + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 5 && e !== (e = Tl(i[2].normalization.escapeValue(i[0])) + "") && ze(n, e);
    },
    i: ve,
    o: ve,
    d(i) {
      i && V(n);
    }
  };
}
function mU(t) {
  let e, n;
  return e = new P6({
    props: {
      text: t[2].normalization.escapeValue(t[0]),
      searchResultItems: t[1]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 5 && (s.text = i[2].normalization.escapeValue(i[0])), r & 2 && (s.searchResultItems = i[1]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function tv(t) {
  let e, n;
  return e = new Qo({
    props: {
      selected: !0,
      onContextMenu: t[2].onContextMenu
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 4 && (s.onContextMenu = i[2].onContextMenu), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function bU(t) {
  let e, n, i, r, s;
  const o = [pU, dU], l = [];
  function a(u, f) {
    return u[4] ? 0 : 1;
  }
  e = a(t), n = l[e] = o[e](t);
  let c = !t[2].readOnly && t[3] && !t[4] && tv(t);
  return {
    c() {
      n.c(), i = Q(), c && c.c(), r = ot();
    },
    m(u, f) {
      l[e].m(u, f), U(u, i, f), c && c.m(u, f), U(u, r, f), s = !0;
    },
    p(u, [f]) {
      let h = e;
      e = a(u), e === h ? l[e].p(u, f) : (Se(), x(l[h], 1, 1, () => {
        l[h] = null;
      }), Ee(), n = l[e], n ? n.p(u, f) : (n = l[e] = o[e](u), n.c()), P(n, 1), n.m(i.parentNode, i)), !u[2].readOnly && u[3] && !u[4] ? c ? (c.p(u, f), f & 28 && P(c, 1)) : (c = tv(u), c.c(), P(c, 1), c.m(r.parentNode, r)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee());
    },
    i(u) {
      s || (P(n), P(c), s = !0);
    },
    o(u) {
      x(n), x(c), s = !1;
    },
    d(u) {
      l[e].d(u), u && V(i), c && c.d(u), u && V(r);
    }
  };
}
function _U(t, e, n) {
  let i, r, { path: s } = e, { pointer: o } = e, { key: l } = e, { selection: a } = e, { searchResultItems: c } = e, { onUpdateKey: u } = e, { context: f } = e;
  function h(_) {
    !r && !f.readOnly && (_.preventDefault(), f.onSelect(br(s, !0)));
  }
  function d(_) {
    return Cs("jse-key", { "jse-empty": _ === "" });
  }
  function p(_, m) {
    const C = u(l, f.normalization.unescapeValue(_)), v = At(s).concat(C);
    f.onSelect(m === bl.NEXT_INSIDE ? Lt(v, !1) : br(v, !1)), m !== bl.SELF && f.focus();
  }
  function g() {
    f.onSelect(br(s, !1)), f.focus();
  }
  return t.$$set = (_) => {
    "path" in _ && n(9, s = _.path), "pointer" in _ && n(10, o = _.pointer), "key" in _ && n(0, l = _.key), "selection" in _ && n(11, a = _.selection), "searchResultItems" in _ && n(1, c = _.searchResultItems), "onUpdateKey" in _ && n(12, u = _.onUpdateKey), "context" in _ && n(2, f = _.context);
  }, t.$$.update = () => {
    t.$$.dirty & 3072 && n(3, i = a ? a.pointersMap[o] === !0 && Ln(a) : void 0), t.$$.dirty & 2056 && n(4, r = i && jo(a));
  }, [
    l,
    c,
    f,
    i,
    r,
    h,
    d,
    p,
    g,
    s,
    o,
    a,
    u
  ];
}
class yU extends Qe {
  constructor(e) {
    super(), Xe(this, e, _U, bU, wt, {
      path: 9,
      pointer: 10,
      key: 0,
      selection: 11,
      searchResultItems: 1,
      onUpdateKey: 12,
      context: 2
    });
  }
}
const wU = yU;
function nv(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function iv(t) {
  let e, n, i;
  const r = [t[8].props];
  var s = t[8].component;
  function o(l) {
    let a = {};
    for (let c = 0; c < r.length; c += 1)
      a = Go(a, r[c]);
    return { props: a };
  }
  return s && (e = ws(s, o())), {
    c() {
      e && me(e.$$.fragment), n = ot();
    },
    m(l, a) {
      e && pe(e, l, a), U(l, n, a), i = !0;
    },
    p(l, a) {
      const c = a & 1 ? Ul(r, [rp(l[8].props)]) : {};
      if (s !== (s = l[8].component)) {
        if (e) {
          Se();
          const u = e;
          x(u.$$.fragment, 1, 0, () => {
            ge(u, 1);
          }), Ee();
        }
        s ? (e = ws(s, o()), me(e.$$.fragment), P(e.$$.fragment, 1), pe(e, n.parentNode, n)) : e = null;
      } else
        s && e.$set(c);
    },
    i(l) {
      i || (e && P(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && x(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && V(n), e && ge(e, l);
    }
  };
}
function vU(t) {
  let e, n, i = t[0], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = iv(nv(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, [l]) {
      if (l & 1) {
        i = o[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = nv(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = iv(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function kU(t, e, n) {
  let i, r, { path: s } = e, { value: o } = e, { context: l } = e, { enforceString: a } = e, { selection: c } = e, { searchResultItems: u } = e;
  return t.$$set = (f) => {
    "path" in f && n(1, s = f.path), "value" in f && n(2, o = f.value), "context" in f && n(3, l = f.context), "enforceString" in f && n(4, a = f.enforceString), "selection" in f && n(5, c = f.selection), "searchResultItems" in f && n(6, u = f.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && Et(c) && jo(c)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: s,
      value: o,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: c,
      searchResultItems: u,
      onPatch: l.onPatch,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    i
  ];
}
let CU = class extends Qe {
  constructor(e) {
    super(), Xe(this, e, kU, vU, wt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
};
const SU = CU, ai = {
  selecting: !1,
  selectionAnchor: null,
  selectionAnchorType: null,
  selectionFocus: null,
  dragging: !1
};
function xg({ json: t, documentState: e, deltaY: n, items: i }) {
  const r = e.selection, s = n < 0 ? EU({ json: t, selection: r, deltaY: n, items: i }) : AU({ json: t, selection: r, deltaY: n, items: i });
  if (!s || s.offset === 0)
    return {
      operations: void 0,
      updatedSelection: void 0,
      offset: 0
    };
  const o = ux(t, e.selection, s), l = At(Na(r)), a = Ze(t, l);
  if (Array.isArray(a)) {
    const c = MU({
      items: i,
      json: t,
      selection: r,
      offset: s.offset
    });
    return {
      operations: o,
      updatedSelection: c,
      offset: s.offset
    };
  } else
    return {
      operations: o,
      updatedSelection: void 0,
      offset: s.offset
    };
}
function EU({ items: t, selection: e, deltaY: n }) {
  const i = Na(e), r = t.findIndex((u) => Ot(u.path, i)), s = () => {
    var u;
    return (u = t[o - 1]) == null ? void 0 : u.height;
  };
  let o = r, l = 0;
  for (; s() !== void 0 && Math.abs(n) > l + s() / 2; )
    l += s(), o -= 1;
  const a = t[o].path, c = o - r;
  return o !== r && t[o] !== void 0 ? { beforePath: a, offset: c } : void 0;
}
function AU({ json: t, items: e, selection: n, deltaY: i }) {
  var g;
  const r = Cp(n), s = e.findIndex((_) => Ot(_.path, r));
  let o = 0, l = s;
  const a = () => {
    var _;
    return (_ = e[l + 1]) == null ? void 0 : _.height;
  };
  for (; a() !== void 0 && Math.abs(i) > o + a() / 2; )
    o += a(), l += 1;
  const c = At(r), u = Ze(t, c), h = Array.isArray(u) ? l : l + 1, d = (g = e[h]) == null ? void 0 : g.path, p = l - s;
  return d ? { beforePath: d, offset: p } : { append: !0, offset: p };
}
function MU({ items: t, json: e, selection: n, offset: i }) {
  var u, f;
  const r = Na(n), s = Cp(n), o = t.findIndex((h) => Ot(h.path, r)), l = t.findIndex((h) => Ot(h.path, s)), a = (u = t[o + i]) == null ? void 0 : u.path, c = (f = t[l + i]) == null ? void 0 : f.path;
  return Nn(e, a, c);
}
function OU(t, e) {
  if (!t)
    return;
  const n = {};
  for (const i of Object.keys(t))
    e(i, t[i]) && (n[i] = t[i]);
  return Object.keys(n).length > 0 ? n : void 0;
}
function Xr(t, e) {
  return OU(t, (n) => Oa(n, e));
}
function TU(t) {
  let e, n, i, r, s, o;
  return n = new Mt({ props: { data: ql } }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-validation-error svelte-pz3g1j");
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), r = !0, s || (o = [
        se(e, "click", function() {
          hi(t[0]) && t[0].apply(this, arguments);
        }),
        Wi(i = $0.call(null, e, {
          text: t[1],
          ...t[2]
        }))
      ], s = !0);
    },
    p(l, [a]) {
      t = l, i && hi(i.update) && a & 2 && i.update.call(null, {
        text: t[1],
        ...t[2]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n), s = !1, ht(o);
    }
  };
}
function RU(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { validationError: s } = e, { onExpand: o } = e;
  return t.$$set = (l) => {
    "validationError" in l && n(3, s = l.validationError), "onExpand" in l && n(0, o = l.onExpand);
  }, t.$$.update = () => {
    t.$$.dirty & 8 && n(1, i = s.isChildError ? "Contains invalid data" : s.message);
  }, [o, i, r, s];
}
class PU extends Qe {
  constructor(e) {
    super(), Xe(this, e, RU, TU, xt, { validationError: 3, onExpand: 0 });
  }
}
const lc = PU;
const IU = (t) => ({}), rv = (t) => ({});
function sv(t, e, n) {
  const i = t.slice();
  return i[53] = e[n], i;
}
const DU = (t) => ({}), ov = (t) => ({});
function lv(t, e, n) {
  const i = t.slice();
  return i[47] = e[n], i[49] = n, i;
}
function av(t, e, n) {
  const i = t.slice();
  return i[50] = e[n], i;
}
const NU = (t) => ({}), cv = (t) => ({});
function LU(t) {
  let e, n, i, r, s, o, l = !t[8].readOnly && t[16] && t[7] && (Et(t[7]) || Bt(t[7])) && !t[7].edit && Ot(t[7].focusPath, t[1]), a, c, u;
  const f = t[34].identifier, h = Vn(f, t, t[35], rv);
  let d = !t[17] && uv();
  s = new SU({
    props: {
      path: t[1],
      value: t[0],
      enforceString: t[13],
      selection: t[16] ? t[7] : void 0,
      searchResultItems: Dw(t[6], t[9]),
      context: t[8]
    }
  });
  let p = l && fv(t), g = t[15] && hv(t), _ = !t[17] && dv(t);
  return {
    c() {
      e = j("div"), n = j("div"), h && h.c(), i = Q(), d && d.c(), r = Q(), me(s.$$.fragment), o = Q(), p && p.c(), a = Q(), g && g.c(), c = Q(), _ && _.c(), b(n, "class", "jse-contents svelte-lts9i5"), b(e, "class", "jse-contents-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(m, C) {
      U(m, e, C), E(e, n), h && h.m(n, null), E(n, i), d && d.m(n, null), E(n, r), pe(s, n, null), E(n, o), p && p.m(n, null), E(e, a), g && g.m(e, null), E(e, c), _ && _.m(e, null), u = !0;
    },
    p(m, C) {
      h && h.p && (!u || C[1] & 16) && Hn(
        h,
        f,
        m,
        m[35],
        u ? Un(f, m[35], C, IU) : Wn(m[35]),
        rv
      ), m[17] ? d && (d.d(1), d = null) : d || (d = uv(), d.c(), d.m(n, r));
      const v = {};
      C[0] & 2 && (v.path = m[1]), C[0] & 1 && (v.value = m[0]), C[0] & 8192 && (v.enforceString = m[13]), C[0] & 65664 && (v.selection = m[16] ? m[7] : void 0), C[0] & 576 && (v.searchResultItems = Dw(m[6], m[9])), C[0] & 256 && (v.context = m[8]), s.$set(v), C[0] & 65922 && (l = !m[8].readOnly && m[16] && m[7] && (Et(m[7]) || Bt(m[7])) && !m[7].edit && Ot(m[7].focusPath, m[1])), l ? p ? (p.p(m, C), C[0] & 65922 && P(p, 1)) : (p = fv(m), p.c(), P(p, 1), p.m(n, null)) : p && (Se(), x(p, 1, 1, () => {
        p = null;
      }), Ee()), m[15] ? g ? (g.p(m, C), C[0] & 32768 && P(g, 1)) : (g = hv(m), g.c(), P(g, 1), g.m(e, c)) : g && (Se(), x(g, 1, 1, () => {
        g = null;
      }), Ee()), m[17] ? _ && (_.d(1), _ = null) : _ ? _.p(m, C) : (_ = dv(m), _.c(), _.m(e, null)), (!u || C[0] & 262144) && b(e, "style", m[18]);
    },
    i(m) {
      u || (P(h, m), P(s.$$.fragment, m), P(p), P(g), u = !0);
    },
    o(m) {
      x(h, m), x(s.$$.fragment, m), x(p), x(g), u = !1;
    },
    d(m) {
      m && V(e), h && h.d(m), d && d.d(), ge(s), p && p.d(), g && g.d(), _ && _.d();
    }
  };
}
function jU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = !t[8].readOnly && t[16] && t[7] && (Et(t[7]) || Bt(t[7])) && !t[7].edit && Ot(t[7].focusPath, t[1]), d, p, g, _, m, C, v;
  const k = [FU, xU], S = [];
  function O(N, te) {
    return N[12] ? 0 : 1;
  }
  r = O(t), s = S[r] = k[r](t);
  const w = t[34].identifier, A = Vn(w, t, t[35], ov);
  let D = !t[17] && pv();
  function R(N, te) {
    return N[12] ? VU : zU;
  }
  let M = R(t), H = M(t), J = h && gv(t), I = t[15] && (!t[12] || !t[15].isChildError) && mv(t);
  function z(N, te) {
    if (N[12])
      return HU;
    if (!N[17])
      return UU;
  }
  let L = z(t), K = L && L(t), F = t[12] && bv(t);
  return {
    c() {
      e = j("div"), n = j("div"), i = j("button"), s.c(), o = Q(), A && A.c(), l = Q(), D && D.c(), a = Q(), c = j("div"), u = j("div"), H.c(), f = Q(), J && J.c(), d = Q(), I && I.c(), p = Q(), K && K.c(), g = Q(), F && F.c(), _ = ot(), b(i, "type", "button"), b(i, "class", "jse-expand svelte-lts9i5"), b(i, "title", "Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"), b(u, "class", "jse-meta-inner svelte-lts9i5"), b(c, "class", "jse-meta svelte-lts9i5"), b(c, "data-type", "selectable-value"), b(n, "class", "jse-header svelte-lts9i5"), b(e, "class", "jse-header-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(N, te) {
      U(N, e, te), E(e, n), E(n, i), S[r].m(i, null), E(n, o), A && A.m(n, null), E(n, l), D && D.m(n, null), E(n, a), E(n, c), E(c, u), H.m(u, null), E(n, f), J && J.m(n, null), E(e, d), I && I.m(e, null), E(e, p), K && K.m(e, null), U(N, g, te), F && F.m(N, te), U(N, _, te), m = !0, C || (v = se(i, "click", t[21]), C = !0);
    },
    p(N, te) {
      let ue = r;
      r = O(N), r === ue ? S[r].p(N, te) : (Se(), x(S[ue], 1, 1, () => {
        S[ue] = null;
      }), Ee(), s = S[r], s ? s.p(N, te) : (s = S[r] = k[r](N), s.c()), P(s, 1), s.m(i, null)), A && A.p && (!m || te[1] & 16) && Hn(
        A,
        w,
        N,
        N[35],
        m ? Un(w, N[35], te, DU) : Wn(N[35]),
        ov
      ), N[17] ? D && (D.d(1), D = null) : D || (D = pv(), D.c(), D.m(n, a)), M === (M = R(N)) && H ? H.p(N, te) : (H.d(1), H = M(N), H && (H.c(), H.m(u, null))), te[0] & 65922 && (h = !N[8].readOnly && N[16] && N[7] && (Et(N[7]) || Bt(N[7])) && !N[7].edit && Ot(N[7].focusPath, N[1])), h ? J ? (J.p(N, te), te[0] & 65922 && P(J, 1)) : (J = gv(N), J.c(), P(J, 1), J.m(n, null)) : J && (Se(), x(J, 1, 1, () => {
        J = null;
      }), Ee()), N[15] && (!N[12] || !N[15].isChildError) ? I ? (I.p(N, te), te[0] & 36864 && P(I, 1)) : (I = mv(N), I.c(), P(I, 1), I.m(e, p)) : I && (Se(), x(I, 1, 1, () => {
        I = null;
      }), Ee()), L === (L = z(N)) && K ? K.p(N, te) : (K && K.d(1), K = L && L(N), K && (K.c(), K.m(e, null))), (!m || te[0] & 262144) && b(e, "style", N[18]), N[12] ? F ? (F.p(N, te), te[0] & 4096 && P(F, 1)) : (F = bv(N), F.c(), P(F, 1), F.m(_.parentNode, _)) : F && (Se(), x(F, 1, 1, () => {
        F = null;
      }), Ee());
    },
    i(N) {
      m || (P(s), P(A, N), P(J), P(I), P(F), m = !0);
    },
    o(N) {
      x(s), x(A, N), x(J), x(I), x(F), m = !1;
    },
    d(N) {
      N && V(e), S[r].d(), A && A.d(N), D && D.d(), H.d(), J && J.d(), I && I.d(), K && K.d(), N && V(g), F && F.d(N), N && V(_), C = !1, v();
    }
  };
}
function BU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = !t[8].readOnly && t[16] && t[7] && (Et(t[7]) || Bt(t[7])) && !t[7].edit && Ot(t[7].focusPath, t[1]), d, p, g, _, m, C, v;
  const k = [JU, qU], S = [];
  function O(N, te) {
    return N[12] ? 0 : 1;
  }
  r = O(t), s = S[r] = k[r](t);
  const w = t[34].identifier, A = Vn(w, t, t[35], cv);
  let D = !t[17] && vv();
  function R(N, te) {
    return N[12] ? GU : KU;
  }
  let M = R(t), H = M(t), J = h && kv(t), I = t[15] && (!t[12] || !t[15].isChildError) && Cv(t);
  function z(N, te) {
    return N[12] ? XU : YU;
  }
  let L = z(t), K = L(t), F = t[12] && Sv(t);
  return {
    c() {
      e = j("div"), n = j("div"), i = j("button"), s.c(), o = Q(), A && A.c(), l = Q(), D && D.c(), a = Q(), c = j("div"), u = j("div"), H.c(), f = Q(), J && J.c(), d = Q(), I && I.c(), p = Q(), K.c(), g = Q(), F && F.c(), _ = ot(), b(i, "type", "button"), b(i, "class", "jse-expand svelte-lts9i5"), b(i, "title", "Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"), b(u, "class", "jse-meta-inner svelte-lts9i5"), b(u, "data-type", "selectable-value"), b(c, "class", "jse-meta svelte-lts9i5"), b(n, "class", "jse-header svelte-lts9i5"), b(e, "class", "jse-header-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(N, te) {
      U(N, e, te), E(e, n), E(n, i), S[r].m(i, null), E(n, o), A && A.m(n, null), E(n, l), D && D.m(n, null), E(n, a), E(n, c), E(c, u), H.m(u, null), E(n, f), J && J.m(n, null), E(e, d), I && I.m(e, null), E(e, p), K.m(e, null), U(N, g, te), F && F.m(N, te), U(N, _, te), m = !0, C || (v = se(i, "click", t[21]), C = !0);
    },
    p(N, te) {
      let ue = r;
      r = O(N), r === ue ? S[r].p(N, te) : (Se(), x(S[ue], 1, 1, () => {
        S[ue] = null;
      }), Ee(), s = S[r], s ? s.p(N, te) : (s = S[r] = k[r](N), s.c()), P(s, 1), s.m(i, null)), A && A.p && (!m || te[1] & 16) && Hn(
        A,
        w,
        N,
        N[35],
        m ? Un(w, N[35], te, NU) : Wn(N[35]),
        cv
      ), N[17] ? D && (D.d(1), D = null) : D || (D = vv(), D.c(), D.m(n, a)), M === (M = R(N)) && H ? H.p(N, te) : (H.d(1), H = M(N), H && (H.c(), H.m(u, null))), te[0] & 65922 && (h = !N[8].readOnly && N[16] && N[7] && (Et(N[7]) || Bt(N[7])) && !N[7].edit && Ot(N[7].focusPath, N[1])), h ? J ? (J.p(N, te), te[0] & 65922 && P(J, 1)) : (J = kv(N), J.c(), P(J, 1), J.m(n, null)) : J && (Se(), x(J, 1, 1, () => {
        J = null;
      }), Ee()), N[15] && (!N[12] || !N[15].isChildError) ? I ? (I.p(N, te), te[0] & 36864 && P(I, 1)) : (I = Cv(N), I.c(), P(I, 1), I.m(e, p)) : I && (Se(), x(I, 1, 1, () => {
        I = null;
      }), Ee()), L === (L = z(N)) && K ? K.p(N, te) : (K.d(1), K = L(N), K && (K.c(), K.m(e, null))), (!m || te[0] & 262144) && b(e, "style", N[18]), N[12] ? F ? (F.p(N, te), te[0] & 4096 && P(F, 1)) : (F = Sv(N), F.c(), P(F, 1), F.m(_.parentNode, _)) : F && (Se(), x(F, 1, 1, () => {
        F = null;
      }), Ee());
    },
    i(N) {
      m || (P(s), P(A, N), P(J), P(I), P(F), m = !0);
    },
    o(N) {
      x(s), x(A, N), x(J), x(I), x(F), m = !1;
    },
    d(N) {
      N && V(e), S[r].d(), A && A.d(N), D && D.d(), H.d(), J && J.d(), I && I.d(), K.d(), N && V(g), F && F.d(N), N && V(_), C = !1, v();
    }
  };
}
function uv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function fv(t) {
  let e, n, i;
  return n = new Qo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function hv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function dv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[30]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function xU(t) {
  let e, n;
  return e = new Mt({ props: { data: ko } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function FU(t) {
  let e, n;
  return e = new Mt({ props: { data: dr } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function pv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function zU(t) {
  let e, n, i, r = Object.keys(t[0]).length + "", s, o, l = Object.keys(t[0]).length === 1 ? "prop" : "props", a, c, u, f, h;
  return {
    c() {
      e = j("div"), e.textContent = "{", n = Q(), i = j("button"), s = we(r), o = Q(), a = we(l), c = Q(), u = j("div"), u.textContent = "}", b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "type", "button"), b(i, "class", "jse-tag svelte-lts9i5"), b(u, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      U(d, e, p), U(d, n, p), U(d, i, p), E(i, s), E(i, o), E(i, a), U(d, c, p), U(d, u, p), f || (h = se(i, "click", t[22]), f = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = Object.keys(d[0]).length + "") && ze(s, r), p[0] & 1 && l !== (l = Object.keys(d[0]).length === 1 ? "prop" : "props") && ze(a, l);
    },
    d(d) {
      d && V(e), d && V(n), d && V(i), d && V(c), d && V(u), f = !1, h();
    }
  };
}
function VU(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "{", b(e, "class", "jse-bracket jse-expanded svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function gv(t) {
  let e, n, i;
  return n = new Qo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function mv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function UU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[30]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function HU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[29]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function bv(t) {
  let e, n = !t[8].readOnly && (t[10] === Ys || t[16] && Kn(t[7])), i, r, s, o, l, a, c = n && _v(t), u = t[19](t[1], t[0], t[2], t[3], t[4], t[5], t[6], t[7], t[11]), f = [];
  for (let p = 0; p < u.length; p += 1)
    f[p] = yv(sv(t, u, p));
  const h = (p) => x(f[p], 1, 1, () => {
    f[p] = null;
  });
  let d = !t[17] && wv(t);
  return {
    c() {
      e = j("div"), c && c.c(), i = Q();
      for (let p = 0; p < f.length; p += 1)
        f[p].c();
      r = Q(), s = j("div"), o = j("div"), o.innerHTML = '<div class="jse-bracket svelte-lts9i5">}</div>', l = Q(), d && d.c(), b(e, "class", "jse-props svelte-lts9i5"), b(o, "data-type", "selectable-value"), b(o, "class", "jse-footer svelte-lts9i5"), b(s, "class", "jse-footer-outer svelte-lts9i5"), b(s, "style", t[18]);
    },
    m(p, g) {
      U(p, e, g), c && c.m(e, null), E(e, i);
      for (let _ = 0; _ < f.length; _ += 1)
        f[_].m(e, null);
      U(p, r, g), U(p, s, g), E(s, o), E(s, l), d && d.m(s, null), a = !0;
    },
    p(p, g) {
      if (g[0] & 66944 && (n = !p[8].readOnly && (p[10] === Ys || p[16] && Kn(p[7]))), n ? c ? (c.p(p, g), g[0] & 66944 && P(c, 1)) : (c = _v(p), c.c(), P(c, 1), c.m(e, i)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee()), g[0] & 76024319) {
        u = p[19](p[1], p[0], p[2], p[3], p[4], p[5], p[6], p[7], p[11]);
        let _;
        for (_ = 0; _ < u.length; _ += 1) {
          const m = sv(p, u, _);
          f[_] ? (f[_].p(m, g), P(f[_], 1)) : (f[_] = yv(m), f[_].c(), P(f[_], 1), f[_].m(e, null));
        }
        for (Se(), _ = u.length; _ < f.length; _ += 1)
          h(_);
        Ee();
      }
      p[17] ? d && (d.d(1), d = null) : d ? d.p(p, g) : (d = wv(p), d.c(), d.m(s, null)), (!a || g[0] & 262144) && b(s, "style", p[18]);
    },
    i(p) {
      if (!a) {
        P(c);
        for (let g = 0; g < u.length; g += 1)
          P(f[g]);
        a = !0;
      }
    },
    o(p) {
      x(c), f = f.filter(Boolean);
      for (let g = 0; g < f.length; g += 1)
        x(f[g]);
      a = !1;
    },
    d(p) {
      p && V(e), c && c.d(), Vt(f, p), p && V(r), p && V(s), d && d.d();
    }
  };
}
function _v(t) {
  let e, n, i, r;
  return n = new Qo({
    props: {
      selected: t[16] && Kn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside"), b(e, "style", i = cu(t[1].length + 1)), b(e, "title", E0), Ce(e, "jse-hovered", t[10] === Ys), Ce(e, "jse-selected", t[16] && Kn(t[7]));
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 65664 && (l.selected = s[16] && Kn(s[7])), n.$set(l), (!r || o[0] & 2 && i !== (i = cu(s[1].length + 1))) && b(e, "style", i), (!r || o[0] & 1024) && Ce(e, "jse-hovered", s[10] === Ys), (!r || o[0] & 65664) && Ce(e, "jse-selected", s[16] && Kn(s[7]));
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function WU(t) {
  let e, n, i, r;
  return n = new wU({
    props: {
      path: t[53].path,
      pointer: t[53].pointer,
      key: t[53].key,
      selection: t[53].selection,
      searchResultItems: t[53].keySearchResultItemsMap,
      context: t[8],
      onUpdateKey: t[23]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), b(e, "slot", "identifier"), b(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), E(e, i), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 2303 && (l.path = s[53].path), o[0] & 2303 && (l.pointer = s[53].pointer), o[0] & 2303 && (l.key = s[53].key), o[0] & 2303 && (l.selection = s[53].selection), o[0] & 2303 && (l.searchResultItems = s[53].keySearchResultItemsMap), o[0] & 256 && (l.context = s[8]), n.$set(l);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function yv(t) {
  let e, n;
  return e = new hb({
    props: {
      value: t[53].value,
      path: t[53].path,
      expandedMap: t[53].expandedMap,
      enforceStringMap: t[53].enforceStringMap,
      visibleSectionsMap: t[53].visibleSectionsMap,
      validationErrorsMap: t[53].validationErrorsMap,
      searchResultItemsMap: t[53].valueSearchResultItemsMap,
      selection: t[53].selection,
      context: t[8],
      onDragSelectionStart: t[26],
      $$slots: { identifier: [WU] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2303 && (s.value = i[53].value), r[0] & 2303 && (s.path = i[53].path), r[0] & 2303 && (s.expandedMap = i[53].expandedMap), r[0] & 2303 && (s.enforceStringMap = i[53].enforceStringMap), r[0] & 2303 && (s.visibleSectionsMap = i[53].visibleSectionsMap), r[0] & 2303 && (s.validationErrorsMap = i[53].validationErrorsMap), r[0] & 2303 && (s.searchResultItemsMap = i[53].valueSearchResultItemsMap), r[0] & 2303 && (s.selection = i[53].selection), r[0] & 256 && (s.context = i[8]), r[0] & 2559 | r[1] & 16 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function wv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[30]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function qU(t) {
  let e, n;
  return e = new Mt({ props: { data: ko } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function JU(t) {
  let e, n;
  return e = new Mt({ props: { data: dr } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function vv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function KU(t) {
  let e, n, i, r = t[0].length + "", s, o, l = t[0].length === 1 ? "item" : "items", a, c, u, f, h;
  return {
    c() {
      e = j("div"), e.textContent = "[", n = Q(), i = j("button"), s = we(r), o = Q(), a = we(l), c = Q(), u = j("div"), u.textContent = "]", b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "type", "button"), b(i, "class", "jse-tag svelte-lts9i5"), b(u, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      U(d, e, p), U(d, n, p), U(d, i, p), E(i, s), E(i, o), E(i, a), U(d, c, p), U(d, u, p), f || (h = se(i, "click", t[22]), f = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = d[0].length + "") && ze(s, r), p[0] & 1 && l !== (l = d[0].length === 1 ? "item" : "items") && ze(a, l);
    },
    d(d) {
      d && V(e), d && V(n), d && V(i), d && V(c), d && V(u), f = !1, h();
    }
  };
}
function GU(t) {
  let e, n, i, r = t[0].length + "", s, o, l = t[0].length === 1 ? "item" : "items", a, c;
  return {
    c() {
      e = j("div"), e.textContent = "[", n = Q(), i = j("span"), s = we(r), o = Q(), a = we(l), c = we(`
               `), b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "class", "jse-tag jse-expanded svelte-lts9i5");
    },
    m(u, f) {
      U(u, e, f), U(u, n, f), U(u, i, f), E(i, s), E(i, o), E(i, a), U(u, c, f);
    },
    p(u, f) {
      f[0] & 1 && r !== (r = u[0].length + "") && ze(s, r), f[0] & 1 && l !== (l = u[0].length === 1 ? "item" : "items") && ze(a, l);
    },
    d(u) {
      u && V(e), u && V(n), u && V(i), u && V(c);
    }
  };
}
function kv(t) {
  let e, n, i;
  return n = new Qo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function Cv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function YU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[30]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function XU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[29]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function Sv(t) {
  let e, n = !t[8].readOnly && (t[10] === Ys || t[16] && Kn(t[7])), i, r = [], s = /* @__PURE__ */ new Map(), o, l, a, c, u, f = n && Ev(t), h = t[14] || El;
  const d = (g) => g[49];
  for (let g = 0; g < h.length; g += 1) {
    let _ = lv(t, h, g), m = d(_);
    s.set(m, r[g] = Ov(m, _));
  }
  let p = !t[17] && Tv(t);
  return {
    c() {
      e = j("div"), f && f.c(), i = Q();
      for (let g = 0; g < r.length; g += 1)
        r[g].c();
      o = Q(), l = j("div"), a = j("div"), a.innerHTML = '<span class="jse-bracket svelte-lts9i5">]</span>', c = Q(), p && p.c(), b(e, "class", "jse-items svelte-lts9i5"), b(a, "data-type", "selectable-value"), b(a, "class", "jse-footer svelte-lts9i5"), b(l, "class", "jse-footer-outer svelte-lts9i5"), b(l, "style", t[18]);
    },
    m(g, _) {
      U(g, e, _), f && f.m(e, null), E(e, i);
      for (let m = 0; m < r.length; m += 1)
        r[m].m(e, null);
      U(g, o, _), U(g, l, _), E(l, a), E(l, c), p && p.m(l, null), u = !0;
    },
    p(g, _) {
      _[0] & 66944 && (n = !g[8].readOnly && (g[10] === Ys || g[16] && Kn(g[7]))), n ? f ? (f.p(g, _), _[0] & 66944 && P(f, 1)) : (f = Ev(g), f.c(), P(f, 1), f.m(e, i)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), _[0] & 68176895 && (h = g[14] || El, Se(), r = Gs(r, _, d, 1, g, h, s, e, ip, Ov, null, lv), Ee()), g[17] ? p && (p.d(1), p = null) : p ? p.p(g, _) : (p = Tv(g), p.c(), p.m(l, null)), (!u || _[0] & 262144) && b(l, "style", g[18]);
    },
    i(g) {
      if (!u) {
        P(f);
        for (let _ = 0; _ < h.length; _ += 1)
          P(r[_]);
        u = !0;
      }
    },
    o(g) {
      x(f);
      for (let _ = 0; _ < r.length; _ += 1)
        x(r[_]);
      u = !1;
    },
    d(g) {
      g && V(e), f && f.d();
      for (let _ = 0; _ < r.length; _ += 1)
        r[_].d();
      g && V(o), g && V(l), p && p.d();
    }
  };
}
function Ev(t) {
  let e, n, i, r;
  return n = new Qo({
    props: {
      selected: t[16] && Kn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside"), b(e, "style", i = cu(t[1].length + 1)), b(e, "title", E0), Ce(e, "jse-hovered", t[10] === Ys), Ce(e, "jse-selected", t[16] && Kn(t[7]));
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 65664 && (l.selected = s[16] && Kn(s[7])), n.$set(l), (!r || o[0] & 2 && i !== (i = cu(s[1].length + 1))) && b(e, "style", i), (!r || o[0] & 1024) && Ce(e, "jse-hovered", s[10] === Ys), (!r || o[0] & 65664) && Ce(e, "jse-selected", s[16] && Kn(s[7]));
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function QU(t) {
  let e, n, i = t[50].index + "", r;
  return {
    c() {
      e = j("div"), n = j("div"), r = we(i), b(n, "class", "jse-index svelte-lts9i5"), b(e, "slot", "identifier"), b(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(s, o) {
      U(s, e, o), E(e, n), E(n, r);
    },
    p(s, o) {
      o[0] & 18687 && i !== (i = s[50].index + "") && ze(r, i);
    },
    d(s) {
      s && V(e);
    }
  };
}
function Av(t, e) {
  let n, i, r;
  return i = new hb({
    props: {
      value: e[50].value,
      path: e[50].path,
      expandedMap: e[50].expandedMap,
      enforceStringMap: e[50].enforceStringMap,
      visibleSectionsMap: e[50].visibleSectionsMap,
      validationErrorsMap: e[50].validationErrorsMap,
      searchResultItemsMap: e[50].searchResultItemsMap,
      selection: e[50].selection,
      context: e[8],
      onDragSelectionStart: e[26],
      $$slots: { identifier: [QU] },
      $$scope: { ctx: e }
    }
  }), {
    key: t,
    first: null,
    c() {
      n = ot(), me(i.$$.fragment), this.first = n;
    },
    m(s, o) {
      U(s, n, o), pe(i, s, o), r = !0;
    },
    p(s, o) {
      e = s;
      const l = {};
      o[0] & 18687 && (l.value = e[50].value), o[0] & 18687 && (l.path = e[50].path), o[0] & 18687 && (l.expandedMap = e[50].expandedMap), o[0] & 18687 && (l.enforceStringMap = e[50].enforceStringMap), o[0] & 18687 && (l.visibleSectionsMap = e[50].visibleSectionsMap), o[0] & 18687 && (l.validationErrorsMap = e[50].validationErrorsMap), o[0] & 18687 && (l.searchResultItemsMap = e[50].searchResultItemsMap), o[0] & 18687 && (l.selection = e[50].selection), o[0] & 256 && (l.context = e[8]), o[0] & 18687 | o[1] & 16 && (l.$$scope = { dirty: o, ctx: e }), i.$set(l);
    },
    i(s) {
      r || (P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(n), ge(i, s);
    }
  };
}
function Mv(t) {
  let e, n;
  return e = new cU({
    props: {
      visibleSections: t[14] || El,
      sectionIndex: t[49],
      total: t[0].length,
      path: t[1],
      pointer: t[9],
      onExpandSection: t[8].onExpandSection,
      selection: t[7]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16384 && (s.visibleSections = i[14] || El), r[0] & 16384 && (s.sectionIndex = i[49]), r[0] & 1 && (s.total = i[0].length), r[0] & 2 && (s.path = i[1]), r[0] & 512 && (s.pointer = i[9]), r[0] & 256 && (s.onExpandSection = i[8].onExpandSection), r[0] & 128 && (s.selection = i[7]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Ov(t, e) {
  let n, i = [], r = /* @__PURE__ */ new Map(), s, o, l, a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]);
  const c = (f) => f[50].index;
  for (let f = 0; f < a.length; f += 1) {
    let h = av(e, a, f), d = c(h);
    r.set(d, i[f] = Av(d, h));
  }
  let u = e[47].end < e[0].length && Mv(e);
  return {
    key: t,
    first: null,
    c() {
      n = ot();
      for (let f = 0; f < i.length; f += 1)
        i[f].c();
      s = Q(), u && u.c(), o = ot(), this.first = n;
    },
    m(f, h) {
      U(f, n, h);
      for (let d = 0; d < i.length; d += 1)
        i[d].m(f, h);
      U(f, s, h), u && u.m(f, h), U(f, o, h), l = !0;
    },
    p(f, h) {
      e = f, h[0] & 68176383 && (a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]), Se(), i = Gs(i, h, c, 1, e, a, r, s.parentNode, ip, Av, s, av), Ee()), e[47].end < e[0].length ? u ? (u.p(e, h), h[0] & 16385 && P(u, 1)) : (u = Mv(e), u.c(), P(u, 1), u.m(o.parentNode, o)) : u && (Se(), x(u, 1, 1, () => {
        u = null;
      }), Ee());
    },
    i(f) {
      if (!l) {
        for (let h = 0; h < a.length; h += 1)
          P(i[h]);
        P(u), l = !0;
      }
    },
    o(f) {
      for (let h = 0; h < i.length; h += 1)
        x(i[h]);
      x(u), l = !1;
    },
    d(f) {
      f && V(n);
      for (let h = 0; h < i.length; h += 1)
        i[h].d(f);
      f && V(s), u && u.d(f), f && V(o);
    }
  };
}
function Tv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[30]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function Rv(t) {
  let e, n, i;
  return n = new Qo({
    props: {
      selected: t[16] && Lr(t[7]),
      onContextMenu: t[32]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-insert-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after"), b(e, "style", t[18]), b(e, "title", E0), Ce(e, "jse-hovered", t[10] === Xc), Ce(e, "jse-selected", t[16] && Lr(t[7]));
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 65664 && (o.selected = r[16] && Lr(r[7])), n.$set(o), (!i || s[0] & 262144) && b(e, "style", r[18]), (!i || s[0] & 1024) && Ce(e, "jse-hovered", r[10] === Xc), (!i || s[0] & 65664) && Ce(e, "jse-selected", r[16] && Lr(r[7]));
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function ZU(t) {
  let e, n, i, r, s, o, l = !t[8].readOnly && (t[10] === Xc || t[16] && Lr(t[7])), a, c, u, f, h;
  const d = [BU, jU, LU], p = [];
  function g(m, C) {
    return C[0] & 1 && (n = null), C[0] & 1 && (i = null), n == null && (n = !!Array.isArray(m[0])), n ? 0 : (i == null && (i = !!Cn(m[0])), i ? 1 : 2);
  }
  r = g(t, [-1, -1]), s = p[r] = d[r](t);
  let _ = l && Rv(t);
  return {
    c() {
      e = j("div"), s.c(), o = Q(), _ && _.c(), b(e, "class", a = bn(Cs("jse-json-node", { "jse-expanded": t[12] }, t[8].onClassName(t[1], t[0]))) + " svelte-lts9i5"), b(e, "data-path", c = Da(t[1])), Ce(e, "jse-root", t[17]), Ce(e, "jse-selected", t[16] && Bt(t[7])), Ce(e, "jse-selected-key", t[16] && Ln(t[7])), Ce(e, "jse-selected-value", t[16] && Et(t[7])), Ce(e, "jse-readonly", t[8].readOnly), Ce(e, "jse-hovered", t[10] === Lm);
    },
    m(m, C) {
      U(m, e, C), p[r].m(e, null), E(e, o), _ && _.m(e, null), u = !0, f || (h = [
        se(e, "mousedown", t[24]),
        se(e, "mousemove", t[25]),
        se(e, "mouseover", t[27]),
        se(e, "mouseout", t[28]),
        se(e, "focus", void 0),
        se(e, "blur", void 0)
      ], f = !0);
    },
    p(m, C) {
      let v = r;
      r = g(m, C), r === v ? p[r].p(m, C) : (Se(), x(p[v], 1, 1, () => {
        p[v] = null;
      }), Ee(), s = p[r], s ? s.p(m, C) : (s = p[r] = d[r](m), s.c()), P(s, 1), s.m(e, o)), C[0] & 66944 && (l = !m[8].readOnly && (m[10] === Xc || m[16] && Lr(m[7]))), l ? _ ? (_.p(m, C), C[0] & 66944 && P(_, 1)) : (_ = Rv(m), _.c(), P(_, 1), _.m(e, null)) : _ && (Se(), x(_, 1, 1, () => {
        _ = null;
      }), Ee()), (!u || C[0] & 4355 && a !== (a = bn(Cs("jse-json-node", { "jse-expanded": m[12] }, m[8].onClassName(m[1], m[0]))) + " svelte-lts9i5")) && b(e, "class", a), (!u || C[0] & 2 && c !== (c = Da(m[1]))) && b(e, "data-path", c), (!u || C[0] & 135427) && Ce(e, "jse-root", m[17]), (!u || C[0] & 70019) && Ce(e, "jse-selected", m[16] && Bt(m[7])), (!u || C[0] & 70019) && Ce(e, "jse-selected-key", m[16] && Ln(m[7])), (!u || C[0] & 70019) && Ce(e, "jse-selected-value", m[16] && Et(m[7])), (!u || C[0] & 4355) && Ce(e, "jse-readonly", m[8].readOnly), (!u || C[0] & 5379) && Ce(e, "jse-hovered", m[10] === Lm);
    },
    i(m) {
      u || (P(s), P(_), u = !0);
    },
    o(m) {
      x(s), x(_), u = !1;
    },
    d(m) {
      m && V(e), p[r].d(), _ && _.d(), f = !1, ht(h);
    }
  };
}
function cu(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function $U(t, e, n) {
  let i, r, { $$slots: s = {}, $$scope: o } = e, { value: l } = e, { path: a } = e, { expandedMap: c } = e, { enforceStringMap: u } = e, { visibleSectionsMap: f } = e, { validationErrorsMap: h } = e, { searchResultItemsMap: d } = e, { selection: p } = e, { context: g } = e, { onDragSelectionStart: _ } = e;
  const m = mi("jsoneditor:JSONNode");
  let C, v, k;
  const S = $j();
  let O, w, A, D, R, M;
  function H(fe, Ae, ae, $, de, he, W, y, T) {
    let B = Object.keys(Ae).map((X) => {
      const G = xm(O, X);
      return {
        key: X,
        value: Ae[X],
        path: S(fe.concat(X)),
        pointer: G,
        expandedMap: Xr(ae, G),
        enforceStringMap: Xr($, G),
        visibleSectionsMap: Xr(de, G),
        validationErrorsMap: Xr(he, G),
        keySearchResultItemsMap: yx(W, G),
        valueSearchResultItemsMap: Xr(W, G),
        selection: Mw(y, G)
      };
    });
    return T && T.offset !== 0 && (B = aw(B, T.selectionStartIndex, T.selectionItemsCount, T.offset)), B;
  }
  function J(fe, Ae, ae, $, de, he, W, y, T, B) {
    const X = ae.start, G = Math.min(ae.end, Ae.length);
    let ce = [];
    for (let Ne = X; Ne < G; Ne++) {
      const qe = xm(O, Ne);
      ce.push({
        index: Ne,
        value: Ae[Ne],
        path: S(fe.concat(String(Ne))),
        pointer: qe,
        expandedMap: Xr($, qe),
        enforceStringMap: Xr(de, qe),
        visibleSectionsMap: Xr(he, qe),
        validationErrorsMap: Xr(W, qe),
        searchResultItemsMap: Xr(y, qe),
        selection: Mw(T, qe)
      });
    }
    if (B && B.offset !== 0) {
      const Ne = ce.map((qe) => qe.index);
      ce = aw(ce, B.selectionStartIndex, B.selectionItemsCount, B.offset);
      for (let qe = 0; qe < ce.length; qe++)
        ce[qe].index = Ne[qe];
    }
    return ce;
  }
  function I(fe) {
    fe.stopPropagation();
    const Ae = fe.ctrlKey;
    g.onExpand(a, !w, Ae);
  }
  function z(fe) {
    fe.stopPropagation(), g.onExpand(a, !0);
  }
  function L(fe, Ae) {
    const ae = Wu(a, Object.keys(l), fe, Ae);
    return g.onPatch(ae), ft(zr(ae[0].path));
  }
  function K(fe) {
    if (Pj(fe.target) || fe.which === 1 && n6(fe.target, "BUTTON"))
      return;
    fe.stopPropagation(), fe.preventDefault(), document.addEventListener("mousemove", N, !0), document.addEventListener("mouseup", te);
    const Ae = Rg(fe.target), ae = g.getJson(), $ = g.getDocumentState();
    if (w6(p, a, Ae)) {
      fe.button === 0 && _(fe);
      return;
    }
    if (ai.selecting = !0, ai.selectionAnchor = a, ai.selectionAnchorType = Ae, ai.selectionFocus = a, fe.shiftKey)
      p && g.onSelect(Nn(ae, p.anchorPath, a));
    else if (Ae === Gt.multi)
      if (i && fe.target.hasAttribute("data-path")) {
        const de = ft(_6(l, $));
        g.onSelect(Z0(de));
      } else
        g.onSelect(Nn(ae, a, a));
    else
      g.onSelect(Aw(ae, Ae, a));
    g.focus();
  }
  function F(fe) {
    if (ai.selecting) {
      fe.preventDefault(), fe.stopPropagation(), ai.selectionFocus == null && window.getSelection && window.getSelection().empty();
      const Ae = Rg(fe.target);
      if (!Ot(a, ai.selectionFocus) || Ae !== ai.selectionAnchorType) {
        ai.selectionFocus = a, ai.selectionAnchorType = Ae;
        const ae = g.getJson();
        g.onSelect(Nn(ae, ai.selectionAnchor, ai.selectionFocus));
      }
    }
  }
  function N(fe) {
    g.onDrag(fe);
  }
  function te(fe) {
    ai.selecting && (ai.selecting = !1, fe.stopPropagation()), g.onDragEnd(), document.removeEventListener("mousemove", N, !0), document.removeEventListener("mouseup", te);
  }
  function ue() {
    var fe, Ae;
    return ((Ae = (fe = g.findElement([])) == null ? void 0 : fe.getBoundingClientRect()) == null ? void 0 : Ae.top) || 0;
  }
  function q(fe, Ae) {
    const $ = ue() - fe.initialContentTop;
    return Ae.clientY - fe.initialClientY - $;
  }
  function re(fe) {
    if (g.readOnly)
      return;
    const Ae = At(p.focusPath);
    if (!Ot(a, Ae)) {
      _(fe);
      return;
    }
    const ae = Le(p, D || El);
    if (m("dragSelectionStart", { selection: p, items: ae }), !ae) {
      m("Cannot drag the current selection (probably spread over multiple sections)");
      return;
    }
    const $ = Na(p), de = ae.findIndex((T) => Ot(T.path, $)), he = g.getJson(), W = g.getDocumentState(), { offset: y } = xg({ json: he, documentState: W, deltaY: 0, items: ae });
    n(11, k = {
      initialTarget: fe.target,
      initialClientY: fe.clientY,
      initialContentTop: ue(),
      selectionStartIndex: de,
      selectionItemsCount: S6(p).length,
      items: ae,
      offset: y,
      didMoveItems: !1
    }), ai.dragging = !0, document.addEventListener("mousemove", ie, !0), document.addEventListener("mouseup", Z);
  }
  function ie(fe) {
    if (k) {
      const Ae = g.getJson(), ae = g.getDocumentState(), $ = q(k, fe), { offset: de } = xg({
        json: Ae,
        documentState: ae,
        deltaY: $,
        items: k.items
      });
      de !== k.offset && (m("drag selection", de, $), n(11, k = { ...k, offset: de, didMoveItems: !0 }));
    }
  }
  function Z(fe) {
    if (k) {
      const Ae = g.getJson(), ae = g.getDocumentState(), $ = q(k, fe), { operations: de, updatedSelection: he } = xg({
        json: Ae,
        documentState: ae,
        deltaY: $,
        items: k.items
      });
      if (de)
        g.onPatch(de, (W, y) => ({
          state: {
            ...y,
            selection: he || p
          }
        }));
      else if (fe.target === k.initialTarget && !k.didMoveItems) {
        const W = Rg(fe.target), y = s6(fe.target);
        y && g.onSelect(Aw(Ae, W, y));
      }
      n(11, k = void 0), ai.dragging = !1, document.removeEventListener("mousemove", ie, !0), document.removeEventListener("mouseup", Z);
    }
  }
  function Le(fe, Ae) {
    const ae = [];
    function $(de) {
      const he = a.concat(de), W = g.findElement(he);
      W != null && ae.push({
        path: he,
        height: W.clientHeight
      });
    }
    if (Array.isArray(l)) {
      const de = Na(fe), he = Cp(fe), W = ft(de), y = ft(he), T = Ae.find((G) => W >= G.start && y <= G.end);
      if (!T)
        return null;
      const { start: B, end: X } = T;
      J5(B, Math.min(l.length, X), (G) => $(String(G)));
    } else
      Object.keys(l).forEach($);
    return ae;
  }
  function Ie(fe) {
    ai.selecting || ai.dragging || (fe.stopPropagation(), hl(fe.target, "data-type", "selectable-value") ? n(10, C = Lm) : hl(fe.target, "data-type", "insert-selection-area-inside") ? n(10, C = Ys) : hl(fe.target, "data-type", "insert-selection-area-after") && n(10, C = Xc), clearTimeout(v));
  }
  function Fe(fe) {
    fe.stopPropagation(), v = setTimeout(() => n(10, C = void 0));
  }
  function le(fe) {
    fe.shiftKey || (fe.stopPropagation(), fe.preventDefault(), g.onSelect(Qs(a)));
  }
  function De(fe) {
    fe.shiftKey || (fe.stopPropagation(), fe.preventDefault(), g.onSelect(Zs(a)));
  }
  function Ve(fe) {
    g.onSelect(Qs(a)), g.onContextMenu(fe);
  }
  function ye(fe) {
    g.onSelect(Zs(a)), g.onContextMenu(fe);
  }
  return t.$$set = (fe) => {
    "value" in fe && n(0, l = fe.value), "path" in fe && n(1, a = fe.path), "expandedMap" in fe && n(2, c = fe.expandedMap), "enforceStringMap" in fe && n(3, u = fe.enforceStringMap), "visibleSectionsMap" in fe && n(4, f = fe.visibleSectionsMap), "validationErrorsMap" in fe && n(5, h = fe.validationErrorsMap), "searchResultItemsMap" in fe && n(6, d = fe.searchResultItemsMap), "selection" in fe && n(7, p = fe.selection), "context" in fe && n(8, g = fe.context), "onDragSelectionStart" in fe && n(33, _ = fe.onDragSelectionStart), "$$scope" in fe && n(35, o = fe.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 2 && n(9, O = Be(a)), t.$$.dirty[0] & 516 && n(12, w = c ? c[O] === !0 : !1), t.$$.dirty[0] & 777 && n(13, A = Xs(l, u, O, g.parser)), t.$$.dirty[0] & 528 && n(14, D = f ? f[O] : void 0), t.$$.dirty[0] & 544 && n(15, R = h ? h[O] : void 0), t.$$.dirty[0] & 640 && n(16, M = p ? p.pointersMap[O] === !0 : !1), t.$$.dirty[0] & 2 && n(17, i = a.length === 0), t.$$.dirty[0] & 2 && n(18, r = cu(a.length));
  }, [
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    O,
    C,
    k,
    w,
    A,
    D,
    R,
    M,
    i,
    r,
    H,
    J,
    I,
    z,
    L,
    K,
    F,
    re,
    Ie,
    Fe,
    le,
    De,
    Ve,
    ye,
    _,
    s,
    o
  ];
}
class hb extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      $U,
      ZU,
      wt,
      {
        value: 0,
        path: 1,
        expandedMap: 2,
        enforceStringMap: 3,
        visibleSectionsMap: 4,
        validationErrorsMap: 5,
        searchResultItemsMap: 6,
        selection: 7,
        context: 8,
        onDragSelectionStart: 33
      },
      null,
      [-1, -1]
    );
  }
}
const eH = hb, tH = {
  prefix: "fas",
  iconName: "jsoneditor-expand",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"
  ]
}, nH = {
  prefix: "fas",
  iconName: "jsoneditor-collapse",
  icon: [
    512,
    512,
    [],
    null,
    "m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"
  ]
}, iH = {
  prefix: "fas",
  iconName: "jsoneditor-format",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"
  ]
}, rH = {
  prefix: "fas",
  iconName: "jsoneditor-compact",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"
  ]
};
function sH(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function oH(t, e, n) {
  let i, r, s, { json: o } = e, { selection: l } = e, { readOnly: a } = e, { showSearch: c = !1 } = e, { historyState: u } = e, { onExpandAll: f } = e, { onCollapseAll: h } = e, { onUndo: d } = e, { onRedo: p } = e, { onSort: g } = e, { onTransform: _ } = e, { onContextMenu: m } = e, { onCopy: C } = e, { onRenderMenu: v } = e;
  function k() {
    n(1, c = !c);
  }
  let S, O, w, A;
  return t.$$set = (D) => {
    "json" in D && n(2, o = D.json), "selection" in D && n(3, l = D.selection), "readOnly" in D && n(4, a = D.readOnly), "showSearch" in D && n(1, c = D.showSearch), "historyState" in D && n(5, u = D.historyState), "onExpandAll" in D && n(6, f = D.onExpandAll), "onCollapseAll" in D && n(7, h = D.onCollapseAll), "onUndo" in D && n(8, d = D.onUndo), "onRedo" in D && n(9, p = D.onRedo), "onSort" in D && n(10, g = D.onSort), "onTransform" in D && n(11, _ = D.onTransform), "onContextMenu" in D && n(12, m = D.onContextMenu), "onCopy" in D && n(13, C = D.onCopy), "onRenderMenu" in D && n(14, v = D.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(20, i = o !== void 0), t.$$.dirty & 8, t.$$.dirty & 1048584 && n(19, r = i && (Bt(l) || Ln(l) || Et(l))), t.$$.dirty & 68 && n(15, S = {
      type: "button",
      icon: tH,
      title: "Expand all",
      className: "jse-expand-all",
      onClick: f,
      disabled: !dn(o)
    }), t.$$.dirty & 132 && n(16, O = {
      type: "button",
      icon: nH,
      title: "Collapse all",
      className: "jse-collapse-all",
      onClick: h,
      disabled: !dn(o)
    }), t.$$.dirty & 4 && n(17, w = {
      type: "button",
      icon: nb,
      title: "Search (Ctrl+F)",
      className: "jse-search",
      onClick: k,
      disabled: o === void 0
    }), t.$$.dirty & 769844 && n(18, A = a ? [
      S,
      O,
      { type: "separator" },
      {
        type: "button",
        icon: To,
        title: "Copy (Ctrl+C)",
        className: "jse-copy",
        onClick: C,
        disabled: !r
      },
      { type: "separator" },
      w,
      { type: "space" }
    ] : [
      S,
      O,
      { type: "separator" },
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: g,
        disabled: a || o === void 0
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: _,
        disabled: a || o === void 0
      },
      w,
      {
        type: "button",
        icon: N6,
        title: A0,
        className: "jse-contextmenu",
        onClick: m
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: d,
        disabled: !u.canUndo
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: p,
        disabled: !u.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 278528 && n(0, s = v("tree", A) || A);
  }, [
    s,
    c,
    o,
    l,
    a,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    S,
    O,
    w,
    A,
    r,
    i
  ];
}
class lH extends Qe {
  constructor(e) {
    super(), Xe(this, e, oH, sH, wt, {
      json: 2,
      selection: 3,
      readOnly: 4,
      showSearch: 1,
      historyState: 5,
      onExpandAll: 6,
      onCollapseAll: 7,
      onUndo: 8,
      onRedo: 9,
      onSort: 10,
      onTransform: 11,
      onContextMenu: 12,
      onCopy: 13,
      onRenderMenu: 14
    });
  }
}
const aH = lH;
function Pv(t) {
  let e;
  return {
    c() {
      e = j("ul"), e.innerHTML = `<li class="svelte-1q2qkk2">Click inside the editor</li> 
        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> 
        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> 
        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>`, b(e, "class", "svelte-1q2qkk2");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function cH(t) {
  let e, n, i, r, s, o, l, a = !t[0] && Pv();
  return {
    c() {
      e = j("div"), n = j("div"), i = Q(), r = j("div"), s = we(`Empty document
    `), a && a.c(), o = Q(), l = j("div"), b(n, "class", "jse-space jse-before svelte-1q2qkk2"), b(r, "class", "jse-contents svelte-1q2qkk2"), b(l, "class", "jse-space jse-after svelte-1q2qkk2"), b(e, "class", "jse-welcome svelte-1q2qkk2");
    },
    m(c, u) {
      U(c, e, u), E(e, n), E(e, i), E(e, r), E(r, s), a && a.m(r, null), E(e, o), E(e, l);
    },
    p(c, [u]) {
      c[0] ? a && (a.d(1), a = null) : a || (a = Pv(), a.c(), a.m(r, null));
    },
    i: ve,
    o: ve,
    d(c) {
      c && V(e), a && a.d();
    }
  };
}
function uH(t, e, n) {
  let { readOnly: i } = e;
  return t.$$set = (r) => {
    "readOnly" in r && n(0, i = r.readOnly);
  }, [i];
}
class fH extends Qe {
  constructor(e) {
    super(), Xe(this, e, uH, cH, wt, { readOnly: 0 });
  }
}
const hH = fH;
var X6 = { exports: {} };
/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */
var Iv = function(t, e) {
  var n, i, r = 1, s = 0, o = 0, l = String.alphabet;
  function a(c, u, f) {
    if (f) {
      for (n = u; f = a(c, n), f < 76 && f > 65; )
        ++n;
      return +c.slice(u - 1, n);
    }
    return f = l && l.indexOf(c.charAt(u)), f > -1 ? f + 76 : (f = c.charCodeAt(u) || 0, f < 45 || f > 127 ? f : f < 46 ? 65 : f < 48 ? f - 1 : f < 58 ? f + 18 : f < 65 ? f - 11 : f < 91 ? f + 11 : f < 97 ? f - 37 : f < 123 ? f + 5 : f - 63);
  }
  if ((t += "") != (e += "")) {
    for (; r; )
      if (i = a(t, s++), r = a(e, o++), i < 76 && r < 76 && i > 66 && r > 66 && (i = a(t, s, s), r = a(e, o, s = n), o = n), i != r)
        return i < r ? -1 : 1;
  }
  return 0;
};
try {
  X6.exports = Iv;
} catch {
  String.naturalCompare = Iv;
}
function db(t, e) {
  const n = typeof t == "string" ? t.toLowerCase() : t, i = typeof e == "string" ? e.toLowerCase() : e;
  return X6.exports(n, i);
}
function Q6(t, e = [], n = [], i = 1) {
  if (qt(Ze(t, e))) {
    if (n === void 0)
      throw new Error("Cannot sort: no property selected by which to sort the array");
    return pH(t, e, n, i);
  }
  if (Cn(t))
    return dH(t, e, i);
  throw new Error("Cannot sort: no array or object");
}
function dH(t, e = [], n = 1) {
  const i = Ze(t, e), s = Object.keys(i).slice();
  s.sort((l, a) => n * db(l, a));
  const o = [];
  for (let l = 0; l < s.length; l++) {
    const a = s[l], c = Be(e.concat(a));
    o.push({
      op: "move",
      from: c,
      path: c
    });
  }
  return o;
}
function pH(t, e = [], n = [], i = 1) {
  const r = gH(n, i), s = Ze(t, e);
  return [
    {
      op: "replace",
      path: Be(e),
      value: s.slice(0).sort(r)
    }
  ];
}
function gH(t, e) {
  return function(i, r) {
    const s = Ze(i, t), o = Ze(r, t);
    return s === void 0 ? e : o === void 0 ? -e : typeof s != "string" && typeof o != "string" ? s > o ? e : s < o ? -e : 0 : e * db(s, o);
  };
}
function Dv(t, e, n) {
  const i = t.slice();
  return i[4] = e[n], i;
}
function Nv(t, e) {
  let n, i = ks(e[4].toString(), jv) + "", r, s, o, l;
  function a() {
    return e[3](e[4]);
  }
  return {
    key: t,
    first: null,
    c() {
      n = j("button"), r = we(i), b(n, "type", "button"), b(n, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), b(n, "title", s = e[4].toString()), Ce(n, "jse-selected", e[4] === e[1]), this.first = n;
    },
    m(c, u) {
      U(c, n, u), E(n, r), o || (l = se(n, "click", Ye(a)), o = !0);
    },
    p(c, u) {
      e = c, u & 1 && i !== (i = ks(e[4].toString(), jv) + "") && ze(r, i), u & 1 && s !== (s = e[4].toString()) && b(n, "title", s), u & 3 && Ce(n, "jse-selected", e[4] === e[1]);
    },
    d(c) {
      c && V(n), o = !1, l();
    }
  };
}
function Lv(t) {
  let e, n;
  return {
    c() {
      e = j("button"), n = we("..."), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), b(e, "title", "Limited to " + Ac + " items");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ve,
    d(i) {
      i && V(e);
    }
  };
}
function mH(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s = Jh(t[0], Ac);
  const o = (a) => a[4];
  for (let a = 0; a < s.length; a += 1) {
    let c = Dv(t, s, a), u = o(c);
    i.set(u, n[a] = Nv(u, c));
  }
  let l = t[0].length > Ac && Lv();
  return {
    c() {
      e = j("div");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      r = Q(), l && l.c(), b(e, "class", "jse-navigation-bar-dropdown svelte-6hb2gf");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      E(e, r), l && l.m(e, null);
    },
    p(a, [c]) {
      c & 7 && (s = Jh(a[0], Ac), n = Gs(n, c, o, 1, a, s, i, e, Bu, Nv, r, Dv)), a[0].length > Ac ? l ? l.p(a, c) : (l = Lv(), l.c(), l.m(e, null)) : l && (l.d(1), l = null);
    },
    i: ve,
    o: ve,
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      l && l.d();
    }
  };
}
const Ac = 100, jv = 30;
function bH(t, e, n) {
  let { items: i } = e, { selectedItem: r } = e, { onSelect: s } = e;
  const o = (l) => s(l);
  return t.$$set = (l) => {
    "items" in l && n(0, i = l.items), "selectedItem" in l && n(1, r = l.selectedItem), "onSelect" in l && n(2, s = l.onSelect);
  }, [i, r, s, o];
}
class _H extends Qe {
  constructor(e) {
    super(), Xe(this, e, bH, mH, wt, { items: 0, selectedItem: 1, onSelect: 2 });
  }
}
const yH = _H;
function Bv(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), n = we(t[2]), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-button svelte-1r1k9th");
    },
    m(s, o) {
      U(s, e, o), E(e, n), i || (r = se(e, "click", t[9]), i = !0);
    },
    p(s, o) {
      o & 4 && ze(n, s[2]);
    },
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function wH(t) {
  let e, n, i, r, s, o, l;
  i = new Mt({ props: { data: D6 } });
  let a = t[2] !== void 0 && Bv(t);
  return {
    c() {
      e = j("div"), n = j("button"), me(i.$$.fragment), r = Q(), a && a.c(), b(n, "type", "button"), b(n, "class", "jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"), Ce(n, "jse-open", t[1]), b(e, "class", "jse-navigation-bar-item svelte-1r1k9th");
    },
    m(c, u) {
      U(c, e, u), E(e, n), pe(i, n, null), E(e, r), a && a.m(e, null), t[10](e), s = !0, o || (l = se(n, "click", t[4]), o = !0);
    },
    p(c, [u]) {
      (!s || u & 2) && Ce(n, "jse-open", c[1]), c[2] !== void 0 ? a ? a.p(c, u) : (a = Bv(c), a.c(), a.m(e, null)) : a && (a.d(1), a = null);
    },
    i(c) {
      s || (P(i.$$.fragment, c), s = !0);
    },
    o(c) {
      x(i.$$.fragment, c), s = !1;
    },
    d(c) {
      c && V(e), ge(i), a && a.d(), t[10](null), o = !1, l();
    }
  };
}
function vH(t, e, n) {
  let i, r;
  const { openAbsolutePopup: s, closeAbsolutePopup: o } = gi("absolute-popup");
  let { path: l } = e, { index: a } = e, { onSelect: c } = e, { getItems: u } = e, f, h = !1, d;
  function p(C) {
    o(d), c(i.concat(C));
  }
  function g() {
    if (f) {
      n(1, h = !0);
      const C = {
        items: u(i),
        selectedItem: r,
        onSelect: p
      };
      d = s(yH, C, {
        anchor: f,
        closeOnOuterClick: !0,
        onClose: () => {
          n(1, h = !1);
        }
      });
    }
  }
  const _ = () => p(r);
  function m(C) {
    yt[C ? "unshift" : "push"](() => {
      f = C, n(0, f);
    });
  }
  return t.$$set = (C) => {
    "path" in C && n(5, l = C.path), "index" in C && n(6, a = C.index), "onSelect" in C && n(7, c = C.onSelect), "getItems" in C && n(8, u = C.getItems);
  }, t.$$.update = () => {
    t.$$.dirty & 96 && (i = l.slice(0, a)), t.$$.dirty & 96 && n(2, r = l[a]);
  }, [
    f,
    h,
    r,
    p,
    g,
    l,
    a,
    c,
    u,
    _,
    m
  ];
}
class kH extends Qe {
  constructor(e) {
    super(), Xe(this, e, vH, wH, wt, {
      path: 5,
      index: 6,
      onSelect: 7,
      getItems: 8
    });
  }
}
const Z6 = kH;
function pb(t) {
  var e;
  if (navigator.clipboard)
    return navigator.clipboard.writeText(t);
  if ((e = document.queryCommandSupported) != null && e.call(document, "copy")) {
    const n = document.createElement("textarea");
    n.value = t, n.style.position = "fixed", n.style.opacity = "0", document.body.appendChild(n), n.select();
    try {
      document.execCommand("copy");
    } catch (i) {
      console.error(i);
    } finally {
      document.body.removeChild(n);
    }
  } else
    console.error("Copy failed.");
}
function xv(t) {
  let e, n, i, r, s, o;
  return n = new Mt({ props: { data: ql } }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-validation-error svelte-g0evpe");
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), r = !0, s || (o = Wi(i = $0.call(null, e, {
        text: t[3],
        ...t[4]
      })), s = !0);
    },
    p(l, a) {
      i && hi(i.update) && a & 8 && i.update.call(null, {
        text: l[3],
        ...l[4]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n), s = !1, o();
    }
  };
}
function Fv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "Copied!", b(e, "class", "jse-copied-text svelte-g0evpe");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function CH(t) {
  let e, n, i, r, s, o, l, a, c, u, f = t[3] && xv(t), h = t[2] && Fv();
  return l = new Mt({ props: { data: To } }), {
    c() {
      e = j("div"), n = j("input"), i = Q(), f && f.c(), r = Q(), h && h.c(), s = Q(), o = j("button"), me(l.$$.fragment), b(n, "type", "text"), b(n, "class", "jse-navigation-bar-text svelte-g0evpe"), n.value = t[0], b(o, "type", "button"), b(o, "class", "jse-navigation-bar-copy svelte-g0evpe"), b(o, "title", "Copy selected path to the clipboard"), Ce(o, "copied", t[2]), b(e, "class", "jse-navigation-bar-path-editor svelte-g0evpe"), Ce(e, "error", t[3]);
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[15](n), E(e, i), f && f.m(e, null), E(e, r), h && h.m(e, null), E(e, s), E(e, o), pe(l, o, null), a = !0, c || (u = [
        se(n, "keydown", Ye(t[6])),
        se(n, "input", t[5]),
        se(o, "click", t[7])
      ], c = !0);
    },
    p(d, [p]) {
      (!a || p & 1 && n.value !== d[0]) && (n.value = d[0]), d[3] ? f ? (f.p(d, p), p & 8 && P(f, 1)) : (f = xv(d), f.c(), P(f, 1), f.m(e, r)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), d[2] ? h || (h = Fv(), h.c(), h.m(e, s)) : h && (h.d(1), h = null), (!a || p & 4) && Ce(o, "copied", d[2]), (!a || p & 8) && Ce(e, "error", d[3]);
    },
    i(d) {
      a || (P(f), P(l.$$.fragment, d), a = !0);
    },
    o(d) {
      x(f), x(l.$$.fragment, d), a = !1;
    },
    d(d) {
      d && V(e), t[15](null), f && f.d(), h && h.d(), ge(l), c = !1, ht(u);
    }
  };
}
const SH = 1e3;
function EH(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { path: s } = e, { pathParser: o } = e, { onChange: l } = e, { onClose: a } = e, { onError: c } = e, { pathExists: u } = e, f, h, d = !1, p, g = !1;
  or(() => {
    _();
  }), vs(() => {
    clearTimeout(p);
  });
  function _() {
    f.focus();
  }
  function m(w) {
    try {
      const A = o.parse(w);
      return C(A), { path: A, error: void 0 };
    } catch (A) {
      return { path: void 0, error: A };
    }
  }
  function C(w) {
    if (!u(w))
      throw new Error("Path does not exist in current document");
  }
  function v(w) {
    n(0, h = w.currentTarget.value);
  }
  function k(w) {
    const A = Yo(w);
    if (A === "Escape" && a(), A === "Enter") {
      n(14, d = !0);
      const D = m(h);
      D.path !== void 0 ? l(D.path) : c(D.error);
    }
  }
  function S() {
    pb(h), n(2, g = !0), p = setTimeout(() => n(2, g = !1), SH), _();
  }
  function O(w) {
    yt[w ? "unshift" : "push"](() => {
      f = w, n(1, f);
    });
  }
  return t.$$set = (w) => {
    "path" in w && n(8, s = w.path), "pathParser" in w && n(9, o = w.pathParser), "onChange" in w && n(10, l = w.onChange), "onClose" in w && n(11, a = w.onClose), "onError" in w && n(12, c = w.onError), "pathExists" in w && n(13, u = w.pathExists);
  }, t.$$.update = () => {
    t.$$.dirty & 768 && n(0, h = o.stringify(s)), t.$$.dirty & 16385 && n(3, i = d ? m(h).error : void 0);
  }, [
    h,
    f,
    g,
    i,
    r,
    v,
    k,
    S,
    s,
    o,
    l,
    a,
    c,
    u,
    d,
    O
  ];
}
class AH extends Qe {
  constructor(e) {
    super(), Xe(this, e, EH, CH, xt, {
      path: 8,
      pathParser: 9,
      onChange: 10,
      onClose: 11,
      onError: 12,
      pathExists: 13
    });
  }
}
const MH = AH;
function zv(t, e, n) {
  const i = t.slice();
  return i[20] = e[n], i[22] = n, i;
}
function OH(t) {
  let e, n;
  return e = new MH({
    props: {
      path: t[3],
      onClose: t[12],
      onChange: t[13],
      onError: t[1],
      pathExists: t[9],
      pathParser: t[2]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.path = i[3]), r & 2 && (s.onError = i[1]), r & 4 && (s.pathParser = i[2]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function TH(t) {
  let e = [], n = /* @__PURE__ */ new Map(), i, r, s, o = t[3];
  const l = (c) => c[22];
  for (let c = 0; c < o.length; c += 1) {
    let u = zv(t, o, c), f = l(u);
    n.set(f, e[c] = Vv(f, u));
  }
  let a = t[7] && Uv(t);
  return {
    c() {
      for (let c = 0; c < e.length; c += 1)
        e[c].c();
      i = Q(), a && a.c(), r = ot();
    },
    m(c, u) {
      for (let f = 0; f < e.length; f += 1)
        e[f].m(c, u);
      U(c, i, u), a && a.m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      u & 1288 && (o = c[3], Se(), e = Gs(e, u, l, 1, c, o, n, i.parentNode, ip, Vv, i, zv), Ee()), c[7] ? a ? (a.p(c, u), u & 128 && P(a, 1)) : (a = Uv(c), a.c(), P(a, 1), a.m(r.parentNode, r)) : a && (Se(), x(a, 1, 1, () => {
        a = null;
      }), Ee());
    },
    i(c) {
      if (!s) {
        for (let u = 0; u < o.length; u += 1)
          P(e[u]);
        P(a), s = !0;
      }
    },
    o(c) {
      for (let u = 0; u < e.length; u += 1)
        x(e[u]);
      x(a), s = !1;
    },
    d(c) {
      for (let u = 0; u < e.length; u += 1)
        e[u].d(c);
      c && V(i), a && a.d(c), c && V(r);
    }
  };
}
function Vv(t, e) {
  let n, i, r;
  return i = new Z6({
    props: {
      getItems: e[8],
      path: e[3],
      index: e[22],
      onSelect: e[10]
    }
  }), {
    key: t,
    first: null,
    c() {
      n = ot(), me(i.$$.fragment), this.first = n;
    },
    m(s, o) {
      U(s, n, o), pe(i, s, o), r = !0;
    },
    p(s, o) {
      e = s;
      const l = {};
      o & 8 && (l.path = e[3]), o & 8 && (l.index = e[22]), i.$set(l);
    },
    i(s) {
      r || (P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(n), ge(i, s);
    }
  };
}
function Uv(t) {
  let e, n;
  return e = new Z6({
    props: {
      getItems: t[8],
      path: t[3],
      index: void 0,
      onSelect: t[10]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.path = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function RH(t) {
  let e, n, i, r, s, o, l = !dn(t[0]) && !t[6] ? "Navigation bar" : " ", a, c, u, f, h, d, p;
  const g = [TH, OH], _ = [];
  function m(C, v) {
    return C[6] ? 1 : 0;
  }
  return n = m(t), i = _[n] = g[n](t), u = new Mt({
    props: {
      data: t[6] ? xw : jw
    }
  }), {
    c() {
      e = j("div"), i.c(), r = Q(), s = j("button"), o = j("span"), a = we(l), c = Q(), me(u.$$.fragment), b(o, "class", "jse-navigation-bar-space svelte-15r3ahw"), b(s, "type", "button"), b(s, "class", "jse-navigation-bar-edit svelte-15r3ahw"), b(s, "title", f = t[6] ? "Cancel editing the selected path" : "Edit the selected path"), Ce(s, "flex", !t[6]), Ce(s, "editing", t[6]), b(e, "class", "jse-navigation-bar svelte-15r3ahw");
    },
    m(C, v) {
      U(C, e, v), _[n].m(e, null), E(e, r), E(e, s), E(s, o), E(o, a), E(s, c), pe(u, s, null), t[16](s), t[17](e), h = !0, d || (p = se(s, "click", t[11]), d = !0);
    },
    p(C, [v]) {
      let k = n;
      n = m(C), n === k ? _[n].p(C, v) : (Se(), x(_[k], 1, 1, () => {
        _[k] = null;
      }), Ee(), i = _[n], i ? i.p(C, v) : (i = _[n] = g[n](C), i.c()), P(i, 1), i.m(e, r)), (!h || v & 65) && l !== (l = !dn(C[0]) && !C[6] ? "Navigation bar" : " ") && ze(a, l);
      const S = {};
      v & 64 && (S.data = C[6] ? xw : jw), u.$set(S), (!h || v & 64 && f !== (f = C[6] ? "Cancel editing the selected path" : "Edit the selected path")) && b(s, "title", f), (!h || v & 64) && Ce(s, "flex", !C[6]), (!h || v & 64) && Ce(s, "editing", C[6]);
    },
    i(C) {
      h || (P(i), P(u.$$.fragment, C), h = !0);
    },
    o(C) {
      x(i), x(u.$$.fragment, C), h = !1;
    },
    d(C) {
      C && V(e), _[n].d(), ge(u), t[16](null), t[17](null), d = !1, p();
    }
  };
}
function PH(t, e, n) {
  let i, r;
  const s = mi("jsoneditor:NavigationBar");
  let { json: o } = e, { documentState: l } = e, { onSelect: a } = e, { onError: c } = e, { pathParser: u } = e, f, h, d = !1;
  function p(w) {
    setTimeout(() => {
      if (f && f.scrollTo) {
        const A = f.scrollWidth - f.clientWidth;
        A > 0 && (s("scrollTo ", A), f.scrollTo({ left: A, behavior: "smooth" }));
      }
    });
  }
  function g(w) {
    s("get items for path", w);
    const A = Ze(o, w);
    if (Array.isArray(A))
      return oj(0, A.length).map(String);
    if (Cn(A)) {
      const R = Object.keys(A).slice(0);
      return R.sort(db), R;
    } else
      return [];
  }
  function _(w) {
    return mr(o, w);
  }
  function m(w) {
    s("select path", JSON.stringify(w)), a(Nn(o, w, w));
  }
  function C() {
    n(6, d = !d);
  }
  function v() {
    n(6, d = !1);
  }
  function k(w) {
    v(), m(w);
  }
  function S(w) {
    yt[w ? "unshift" : "push"](() => {
      h = w, n(5, h);
    });
  }
  function O(w) {
    yt[w ? "unshift" : "push"](() => {
      f = w, n(4, f);
    });
  }
  return t.$$set = (w) => {
    "json" in w && n(0, o = w.json), "documentState" in w && n(14, l = w.documentState), "onSelect" in w && n(15, a = w.onSelect), "onError" in w && n(1, c = w.onError), "pathParser" in w && n(2, u = w.pathParser);
  }, t.$$.update = () => {
    t.$$.dirty & 16384 && n(3, i = l.selection ? l.selection.focusPath : []), t.$$.dirty & 9 && n(7, r = dn(Ze(o, i))), t.$$.dirty & 8 && p();
  }, [
    o,
    c,
    u,
    i,
    f,
    h,
    d,
    r,
    g,
    _,
    m,
    C,
    v,
    k,
    l,
    a,
    S,
    O
  ];
}
class IH extends Qe {
  constructor(e) {
    super(), Xe(this, e, PH, RH, wt, {
      json: 0,
      documentState: 14,
      onSelect: 15,
      onError: 1,
      pathParser: 2
    });
  }
}
const DH = IH;
function Hv(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p = t[3] !== -1 ? `${t[3] + 1}/` : "", g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I = !t[4] && Wv(t);
  const z = [LH, NH], L = [];
  function K(N, te) {
    return N[2] ? 0 : 1;
  }
  l = K(t), a = L[l] = z[l](t), v = new Mt({ props: { data: oF } }), O = new Mt({ props: { data: Jx } }), D = new Mt({ props: { data: oc } });
  let F = t[0] && !t[4] && qv(t);
  return {
    c() {
      e = j("div"), n = j("form"), I && I.c(), i = Q(), r = j("div"), s = j("div"), o = j("div"), a.c(), c = Q(), u = j("label"), f = j("input"), h = Q(), d = j("div"), g = we(p), _ = we(t[10]), m = Q(), C = j("button"), me(v.$$.fragment), k = Q(), S = j("button"), me(O.$$.fragment), w = Q(), A = j("button"), me(D.$$.fragment), R = Q(), F && F.c(), b(o, "class", "jse-search-icon svelte-18vllqh"), b(f, "class", "jse-search-input svelte-18vllqh"), b(f, "title", "Enter text to search"), b(f, "type", "text"), b(f, "placeholder", "Find"), b(u, "class", "jse-search-input-label svelte-18vllqh"), b(u, "about", "jse-search input"), b(d, "class", "jse-search-count svelte-18vllqh"), Ce(d, "jse-visible", t[8] !== ""), b(C, "type", "button"), b(C, "class", "jse-search-next svelte-18vllqh"), b(C, "title", "Go to next search result (Enter)"), b(S, "type", "button"), b(S, "class", "jse-search-previous svelte-18vllqh"), b(S, "title", "Go to previous search result (Shift+Enter)"), b(A, "type", "button"), b(A, "class", "jse-search-clear svelte-18vllqh"), b(A, "title", "Close search box (Esc)"), b(s, "class", "jse-search-section svelte-18vllqh"), b(r, "class", "jse-search-contents svelte-18vllqh"), b(n, "class", "jse-search-form svelte-18vllqh"), b(e, "class", "jse-search-box svelte-18vllqh");
    },
    m(N, te) {
      U(N, e, te), E(e, n), I && I.m(n, null), E(n, i), E(n, r), E(r, s), E(s, o), L[l].m(o, null), E(s, c), E(s, u), E(u, f), Io(f, t[8]), E(s, h), E(s, d), E(d, g), E(d, _), E(s, m), E(s, C), pe(v, C, null), E(s, k), E(s, S), pe(O, S, null), E(s, w), E(s, A), pe(D, A, null), E(r, R), F && F.m(r, null), M = !0, H || (J = [
        se(f, "input", t[21]),
        Wi(BH.call(null, f)),
        se(C, "click", t[22]),
        se(S, "click", t[23]),
        se(A, "click", t[24]),
        se(n, "submit", t[12]),
        se(n, "keydown", t[13])
      ], H = !0);
    },
    p(N, te) {
      N[4] ? I && (Se(), x(I, 1, 1, () => {
        I = null;
      }), Ee()) : I ? (I.p(N, te), te & 16 && P(I, 1)) : (I = Wv(N), I.c(), P(I, 1), I.m(n, i));
      let ue = l;
      l = K(N), l === ue ? L[l].p(N, te) : (Se(), x(L[ue], 1, 1, () => {
        L[ue] = null;
      }), Ee(), a = L[l], a ? a.p(N, te) : (a = L[l] = z[l](N), a.c()), P(a, 1), a.m(o, null)), te & 256 && f.value !== N[8] && Io(f, N[8]), (!M || te & 8) && p !== (p = N[3] !== -1 ? `${N[3] + 1}/` : "") && ze(g, p), (!M || te & 1024) && ze(_, N[10]), (!M || te & 256) && Ce(d, "jse-visible", N[8] !== ""), N[0] && !N[4] ? F ? F.p(N, te) : (F = qv(N), F.c(), F.m(r, null)) : F && (F.d(1), F = null);
    },
    i(N) {
      M || (P(I), P(a), P(v.$$.fragment, N), P(O.$$.fragment, N), P(D.$$.fragment, N), M = !0);
    },
    o(N) {
      x(I), x(a), x(v.$$.fragment, N), x(O.$$.fragment, N), x(D.$$.fragment, N), M = !1;
    },
    d(N) {
      N && V(e), I && I.d(), L[l].d(), ge(v), ge(O), ge(D), F && F.d(), H = !1, ht(J);
    }
  };
}
function Wv(t) {
  let e, n, i, r, s;
  return n = new Mt({
    props: {
      data: t[0] ? dr : ko
    }
  }), {
    c() {
      e = j("button"), me(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-replace-toggle svelte-18vllqh"), b(e, "title", "Toggle visibility of replace options (Ctrl+H)");
    },
    m(o, l) {
      U(o, e, l), pe(n, e, null), i = !0, r || (s = se(e, "click", t[11]), r = !0);
    },
    p(o, l) {
      const a = {};
      l & 1 && (a.data = o[0] ? dr : ko), n.$set(a);
    },
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), ge(n), r = !1, s();
    }
  };
}
function NH(t) {
  let e, n;
  return e = new Mt({ props: { data: nb } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function LH(t) {
  let e, n;
  return e = new Mt({
    props: { data: zx, spin: !0 }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p: ve,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function qv(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = j("div"), n = j("input"), i = Q(), r = j("button"), r.textContent = "Replace", s = Q(), o = j("button"), o.textContent = "All", b(n, "class", "jse-replace-input svelte-18vllqh"), b(n, "title", "Enter replacement text"), b(n, "type", "text"), b(n, "placeholder", "Replace"), b(r, "type", "button"), b(r, "title", "Replace current occurrence (Ctrl+Enter)"), b(r, "class", "svelte-18vllqh"), b(o, "type", "button"), b(o, "title", "Replace all occurrences"), b(o, "class", "svelte-18vllqh"), b(e, "class", "jse-replace-section svelte-18vllqh");
    },
    m(c, u) {
      U(c, e, u), E(e, n), Io(n, t[9]), E(e, i), E(e, r), E(e, s), E(e, o), l || (a = [
        se(n, "input", t[25]),
        se(r, "click", t[14]),
        se(o, "click", t[15])
      ], l = !0);
    },
    p(c, u) {
      u & 512 && n.value !== c[9] && Io(n, c[9]);
    },
    d(c) {
      c && V(e), l = !1, ht(a);
    }
  };
}
function jH(t) {
  let e, n, i = t[1] && Hv(t);
  return {
    c() {
      i && i.c(), e = ot();
    },
    m(r, s) {
      i && i.m(r, s), U(r, e, s), n = !0;
    },
    p(r, [s]) {
      r[1] ? i ? (i.p(r, s), s & 2 && P(i, 1)) : (i = Hv(r), i.c(), P(i, 1), i.m(e.parentNode, e)) : i && (Se(), x(i, 1, 1, () => {
        i = null;
      }), Ee());
    },
    i(r) {
      n || (P(i), n = !0);
    },
    o(r) {
      x(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && V(e);
    }
  };
}
function BH(t) {
  t.select();
}
function xH(t, e, n) {
  let i, r, { show: s = !1 } = e, { searching: o } = e, { resultCount: l = 0 } = e, { activeIndex: a = 0 } = e, { showReplace: c = !1 } = e, { readOnly: u = !1 } = e, { onChange: f = hn } = e, { onPrevious: h = hn } = e, { onNext: d = hn } = e, { onReplace: p = hn } = e, { onReplaceAll: g = hn } = e, { onClose: _ = hn } = e, m = "", C = "", v = "";
  function k() {
    m !== "" && f(m);
  }
  function S() {
    n(0, c = !c && !u);
  }
  function O(z) {
    z.preventDefault(), m !== C ? (C = m, r.cancel(), f(m)) : d();
  }
  function w(z) {
    z.stopPropagation();
    const L = Yo(z);
    L === "Enter" && (z.preventDefault(), d()), L === "Shift+Enter" && (z.preventDefault(), h()), (L === "Ctrl+Enter" || L === "Command+Enter") && (z.preventDefault(), c ? A() : d()), L === "Ctrl+H" && (z.preventDefault(), S()), L === "Escape" && (z.preventDefault(), _());
  }
  function A() {
    u || p(m, v);
  }
  function D() {
    u || g(m, v);
  }
  function R() {
    m = this.value, n(8, m);
  }
  const M = () => d(), H = () => h(), J = () => _();
  function I() {
    v = this.value, n(9, v);
  }
  return t.$$set = (z) => {
    "show" in z && n(1, s = z.show), "searching" in z && n(2, o = z.searching), "resultCount" in z && n(16, l = z.resultCount), "activeIndex" in z && n(3, a = z.activeIndex), "showReplace" in z && n(0, c = z.showReplace), "readOnly" in z && n(4, u = z.readOnly), "onChange" in z && n(17, f = z.onChange), "onPrevious" in z && n(5, h = z.onPrevious), "onNext" in z && n(6, d = z.onNext), "onReplace" in z && n(18, p = z.onReplace), "onReplaceAll" in z && n(19, g = z.onReplaceAll), "onClose" in z && n(7, _ = z.onClose);
  }, t.$$.update = () => {
    t.$$.dirty & 65536 && n(10, i = l >= Dm ? `${Dm - 1}+` : String(l)), t.$$.dirty & 131072 && n(20, r = _p(f, X4)), t.$$.dirty & 1048832 && r(m), t.$$.dirty & 2 && s && k();
  }, [
    c,
    s,
    o,
    a,
    u,
    h,
    d,
    _,
    m,
    v,
    i,
    S,
    O,
    w,
    A,
    D,
    l,
    f,
    p,
    g,
    r,
    R,
    M,
    H,
    J,
    I
  ];
}
class FH extends Qe {
  constructor(e) {
    super(), Xe(this, e, xH, jH, wt, {
      show: 1,
      searching: 2,
      resultCount: 16,
      activeIndex: 3,
      showReplace: 0,
      readOnly: 4,
      onChange: 17,
      onPrevious: 5,
      onNext: 6,
      onReplace: 18,
      onReplaceAll: 19,
      onClose: 7
    });
  }
}
const zH = FH;
var Jv = Number.isNaN || function(e) {
  return typeof e == "number" && e !== e;
};
function VH(t, e) {
  return !!(t === e || Jv(t) && Jv(e));
}
function UH(t, e) {
  if (t.length !== e.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!VH(t[n], e[n]))
      return !1;
  return !0;
}
function Ku(t, e) {
  e === void 0 && (e = UH);
  var n = null;
  function i() {
    for (var r = [], s = 0; s < arguments.length; s++)
      r[s] = arguments[s];
    if (n && n.lastThis === this && e(r, n.lastArgs))
      return n.lastResult;
    var o = t.apply(this, r);
    return n = {
      lastResult: o,
      lastArgs: r,
      lastThis: this
    }, o;
  }
  return i.clear = function() {
    n = null;
  }, i;
}
const fs = mi("jsoneditor:actions");
async function $6({ json: t, documentState: e, indentation: n, readOnly: i, parser: r, onPatch: s }) {
  if (i || !E6(e.selection))
    return;
  const o = C6(t, e.selection, n, r);
  if (o == null)
    return;
  fs("cut", { selection: e.selection, clipboard: o, indentation: n }), await pb(o);
  const { operations: l, newSelection: a } = O6(t, e.selection);
  s(l, (c, u) => ({
    state: {
      ...u,
      selection: a
    }
  }));
}
async function e8({ json: t, documentState: e, indentation: n, parser: i }) {
  const r = C6(t, e.selection, n, i);
  r != null && (fs("copy", { clipboard: r, indentation: n }), await pb(r));
}
function t8({ clipboardText: t, json: e, documentState: n, readOnly: i, parser: r, onPatch: s, onChangeText: o, openRepairModal: l }) {
  if (i)
    return;
  function a(c) {
    if (e !== void 0) {
      const u = n.selection || Nn(e || {}, [], []), f = M6(e, u, c, r);
      fs("paste", { pastedText: c, operations: f, selection: u }), s(f, (h, d) => {
        let p = d;
        return f.filter((g) => (Z4(g) || M0(g)) && dn(g.value)).forEach((g) => {
          const _ = as(e, g.path);
          p = yo(h, p, _);
        }), {
          state: p
        };
      });
    } else
      fs("paste text", { pastedText: c }), o(t, (u, f) => {
        if (u)
          return {
            state: yo(u, f, [])
          };
      });
  }
  try {
    a(t);
  } catch {
    l(t, (u) => {
      fs("repaired pasted text: ", u), a(u);
    });
  }
}
function n8({ json: t, text: e, documentState: n, keepSelection: i, readOnly: r, onChange: s, onPatch: o }) {
  if (r || !n.selection)
    return;
  const l = Ln(n.selection) || Et(n.selection) ? Nn(t, n.selection.anchorPath, n.selection.focusPath) : n.selection;
  if (Pt(n.selection.focusPath))
    fs("remove root", { selection: n.selection }), s({ text: "", json: void 0 }, { text: e, json: t }, {
      contentErrors: { validationErrors: [] },
      patchResult: null
    });
  else {
    const { operations: a, newSelection: c } = O6(t, l);
    fs("remove", { operations: a, selection: n.selection, newSelection: c }), o(a, (u, f) => ({
      state: {
        ...f,
        selection: i ? n.selection : c
      }
    }));
  }
}
function td({ insertType: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: s, parser: o, onPatch: l, onReplaceJson: a }) {
  if (s || !r.selection)
    return;
  const c = fx(i, r.selection, t);
  if (i !== void 0) {
    const u = o.stringify(c), f = M6(i, r.selection, u, o);
    fs("onInsert", { insertType: t, operations: f, newValue: c, data: u });
    const h = ft(f.filter((d) => d.op === "add" || d.op === "replace"));
    l(f, (d, p) => {
      if (h) {
        const g = as(d, h.path);
        if (dn(c))
          return {
            state: {
              ...ur(d, p, g, ru),
              selection: e ? Qs(g) : p.selection
            }
          };
        if (c === "") {
          const _ = Pt(g) ? null : Ze(d, At(g));
          return {
            state: t1(d, {
              ...r,
              selection: Cn(_) ? br(g, !0) : Lt(g, !0)
            }, g)
          };
        }
        return;
      }
    }), fs("after patch"), h && c === "" && nd(() => Gh(n, "", !0));
  } else {
    fs("onInsert", { insertType: t, newValue: c });
    const u = [];
    a(c, (f, h) => ({
      state: {
        ...yo(f, h, u),
        selection: Qs(u)
      }
    }));
  }
}
async function i8({ char: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: s, parser: o, onPatch: l, onReplaceJson: a, onSelect: c }) {
  if (!(s || !r.selection)) {
    if (Ln(r.selection)) {
      const u = !r.selection.edit;
      c({ ...r.selection, edit: !0 }), nd(() => Gh(n, t, u));
      return;
    }
    if (t === "{")
      td({
        insertType: "object",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
    else if (t === "[")
      td({
        insertType: "array",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
    else if (Et(r.selection)) {
      if (!dn(Ze(i, r.selection.focusPath))) {
        const u = !r.selection.edit;
        c({ ...r.selection, edit: !0 }), nd(() => Gh(n, t, u));
      }
    } else
      await HH({
        char: t,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
  }
}
async function HH({ char: t, refJsonEditor: e, json: n, documentState: i, readOnly: r, parser: s, onPatch: o, onReplaceJson: l }) {
  if (r || !i.selection)
    return;
  td({
    insertType: "value",
    selectInside: !1,
    refJsonEditor: e,
    json: n,
    documentState: i,
    readOnly: r,
    parser: s,
    onPatch: o,
    onReplaceJson: l
  });
  const a = !jo(i.selection);
  nd(() => Gh(e, t, a));
}
function nd(t) {
  setTimeout(() => setTimeout(t));
}
function WH(t) {
  let e, n = ks(
    Kh(
      {
        text: t[0],
        json: t[1]
      },
      t[2],
      t[3]
    ),
    zh
  ) + "", i;
  return {
    c() {
      e = j("div"), i = we(n), b(e, "class", "jse-json-preview svelte-1ch6ow4");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, [s]) {
      s & 15 && n !== (n = ks(
        Kh(
          {
            text: r[0],
            json: r[1]
          },
          r[2],
          r[3]
        ),
        zh
      ) + "") && ze(i, n);
    },
    i: ve,
    o: ve,
    d(r) {
      r && V(e);
    }
  };
}
function qH(t, e, n) {
  let { text: i } = e, { json: r } = e, { indentation: s } = e, { parser: o } = e;
  return t.$$set = (l) => {
    "text" in l && n(0, i = l.text), "json" in l && n(1, r = l.json), "indentation" in l && n(2, s = l.indentation), "parser" in l && n(3, o = l.parser);
  }, [i, r, s, o];
}
class JH extends Qe {
  constructor(e) {
    super(), Xe(this, e, qH, WH, xt, {
      text: 0,
      json: 1,
      indentation: 2,
      parser: 3
    });
  }
}
const r8 = JH;
const { window: KH } = np;
function Kv(t) {
  let e, n, i;
  function r(o) {
    t[75](o);
  }
  let s = {
    json: t[10],
    selection: t[16].selection,
    readOnly: t[0],
    historyState: t[22],
    onExpandAll: t[39],
    onCollapseAll: t[40],
    onUndo: t[35],
    onRedo: t[36],
    onSort: t[37],
    onTransform: t[38],
    onContextMenu: t[44],
    onCopy: t[33],
    onRenderMenu: t[7]
  };
  return t[19] !== void 0 && (s.showSearch = t[19]), e = new aH({ props: s }), yt.push(() => Pr(e, "showSearch", r, t[19])), {
    c() {
      me(e.$$.fragment);
    },
    m(o, l) {
      pe(e, o, l), i = !0;
    },
    p(o, l) {
      const a = {};
      l[0] & 1024 && (a.json = o[10]), l[0] & 65536 && (a.selection = o[16].selection), l[0] & 1 && (a.readOnly = o[0]), l[0] & 4194304 && (a.historyState = o[22]), l[0] & 128 && (a.onRenderMenu = o[7]), !n && l[0] & 524288 && (n = !0, a.showSearch = o[19], Rr(() => n = !1)), e.$set(a);
    },
    i(o) {
      i || (P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      ge(e, o);
    }
  };
}
function Gv(t) {
  let e, n;
  return e = new DH({
    props: {
      json: t[10],
      documentState: t[16],
      onSelect: t[48],
      onError: t[6],
      pathParser: t[4]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1024 && (s.json = i[10]), r[0] & 65536 && (s.documentState = i[16]), r[0] & 64 && (s.onError = i[6]), r[0] & 16 && (s.pathParser = i[4]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function GH(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-qojdc1"></div> 
      <div class="jse-loading svelte-qojdc1">loading...</div>`, b(e, "class", "jse-contents svelte-qojdc1");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function YH(t) {
  let e, n, i, r, s, o, l, a, c;
  const u = [QH, XH], f = [];
  function h(d, p) {
    return d[10] === void 0 ? 0 : 1;
  }
  return r = h(t), s = f[r] = u[r](t), {
    c() {
      e = j("label"), n = j("input"), i = Q(), s.c(), o = ot(), b(n, "type", "text"), n.readOnly = "readonly", b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-qojdc1"), b(e, "class", "jse-hidden-input-label svelte-qojdc1");
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[76](n), U(d, i, p), f[r].m(d, p), U(d, o, p), l = !0, a || (c = se(n, "paste", t[34]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? f[r].p(d, p) : (Se(), x(f[g], 1, 1, () => {
        f[g] = null;
      }), Ee(), s = f[r], s ? s.p(d, p) : (s = f[r] = u[r](d), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(d) {
      l || (P(s), l = !0);
    },
    o(d) {
      x(s), l = !1;
    },
    d(d) {
      d && V(e), t[76](null), d && V(i), f[r].d(d), d && V(o), a = !1, c();
    }
  };
}
function XH(t) {
  var d, p, g, _;
  let e, n, i, r, s, o, l, a, c, u;
  n = new zH({
    props: {
      show: t[19],
      resultCount: ((p = (d = t[17]) == null ? void 0 : d.items) == null ? void 0 : p.length) || 0,
      activeIndex: ((g = t[17]) == null ? void 0 : g.activeIndex) || 0,
      showReplace: t[20],
      searching: t[21],
      readOnly: t[0],
      onChange: t[26],
      onNext: t[27],
      onPrevious: t[28],
      onReplace: t[29],
      onReplaceAll: t[30],
      onClose: t[31]
    }
  }), s = new eH({
    props: {
      value: t[10],
      path: [],
      expandedMap: t[16].expandedMap,
      enforceStringMap: t[16].enforceStringMap,
      visibleSectionsMap: t[16].visibleSectionsMap,
      validationErrorsMap: t[24],
      searchResultItemsMap: (_ = t[17]) == null ? void 0 : _.itemsMap,
      selection: t[16].selection,
      context: t[13],
      onDragSelectionStart: hn
    }
  });
  let f = t[18] && Yv(t), h = t[23] && Xv(t);
  return c = new lb({
    props: {
      validationErrors: t[12],
      selectError: t[32]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), r = j("div"), me(s.$$.fragment), o = Q(), f && f.c(), l = Q(), h && h.c(), a = Q(), me(c.$$.fragment), b(e, "class", "jse-search-box-container svelte-qojdc1"), b(r, "class", "jse-contents svelte-qojdc1"), b(r, "data-jsoneditor-scrollable-contents", !0);
    },
    m(m, C) {
      U(m, e, C), pe(n, e, null), U(m, i, C), U(m, r, C), pe(s, r, null), t[77](r), U(m, o, C), f && f.m(m, C), U(m, l, C), h && h.m(m, C), U(m, a, C), pe(c, m, C), u = !0;
    },
    p(m, C) {
      var O, w, A, D;
      const v = {};
      C[0] & 524288 && (v.show = m[19]), C[0] & 131072 && (v.resultCount = ((w = (O = m[17]) == null ? void 0 : O.items) == null ? void 0 : w.length) || 0), C[0] & 131072 && (v.activeIndex = ((A = m[17]) == null ? void 0 : A.activeIndex) || 0), C[0] & 1048576 && (v.showReplace = m[20]), C[0] & 2097152 && (v.searching = m[21]), C[0] & 1 && (v.readOnly = m[0]), n.$set(v);
      const k = {};
      C[0] & 1024 && (k.value = m[10]), C[0] & 65536 && (k.expandedMap = m[16].expandedMap), C[0] & 65536 && (k.enforceStringMap = m[16].enforceStringMap), C[0] & 65536 && (k.visibleSectionsMap = m[16].visibleSectionsMap), C[0] & 16777216 && (k.validationErrorsMap = m[24]), C[0] & 131072 && (k.searchResultItemsMap = (D = m[17]) == null ? void 0 : D.itemsMap), C[0] & 65536 && (k.selection = m[16].selection), C[0] & 8192 && (k.context = m[13]), s.$set(k), m[18] ? f ? (f.p(m, C), C[0] & 262144 && P(f, 1)) : (f = Yv(m), f.c(), P(f, 1), f.m(l.parentNode, l)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), m[23] ? h ? (h.p(m, C), C[0] & 8388608 && P(h, 1)) : (h = Xv(m), h.c(), P(h, 1), h.m(a.parentNode, a)) : h && (Se(), x(h, 1, 1, () => {
        h = null;
      }), Ee());
      const S = {};
      C[0] & 4096 && (S.validationErrors = m[12]), c.$set(S);
    },
    i(m) {
      u || (P(n.$$.fragment, m), P(s.$$.fragment, m), P(f), P(h), P(c.$$.fragment, m), u = !0);
    },
    o(m) {
      x(n.$$.fragment, m), x(s.$$.fragment, m), x(f), x(h), x(c.$$.fragment, m), u = !1;
    },
    d(m) {
      m && V(e), ge(n), m && V(i), m && V(r), ge(s), t[77](null), m && V(o), f && f.d(m), m && V(l), h && h.d(m), m && V(a), ge(c, m);
    }
  };
}
function QH(t) {
  let e, n, i, r;
  const s = [$H, ZH], o = [];
  function l(a, c) {
    return a[11] === "" || a[11] === void 0 ? 0 : 1;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = ot();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Se(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Ee(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function Yv(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[18].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: Ap,
          text: "Paste as JSON instead",
          onMouseDown: t[45]
        },
        {
          text: "Leave as is",
          onClick: t[46]
        }
      ]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 262144 && (s.message = `You pasted a JSON ${Array.isArray(i[18].contents) ? "array" : "object"} as text`), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Xv(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: t[8]
        },
        {
          icon: Bo,
          text: "Repair manually instead",
          onClick: t[47]
        }
      ]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.actions = i[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: i[8]
        },
        {
          icon: Bo,
          text: "Repair manually instead",
          onClick: i[47]
        }
      ]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function ZH(t) {
  let e, n, i, r;
  return e = new Ds({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: Bo,
          text: "Repair manually",
          onClick: t[47]
        }
      ]
    }
  }), i = new r8({
    props: {
      text: t[11],
      json: t[10],
      indentation: t[5],
      parser: t[3]
    }
  }), {
    c() {
      me(e.$$.fragment), n = Q(), me(i.$$.fragment);
    },
    m(s, o) {
      pe(e, s, o), U(s, n, o), pe(i, s, o), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 1 && (l.actions = s[0] ? [] : [
        {
          icon: Bo,
          text: "Repair manually",
          onClick: s[47]
        }
      ]), e.$set(l);
      const a = {};
      o[0] & 2048 && (a.text = s[11]), o[0] & 1024 && (a.json = s[10]), o[0] & 32 && (a.indentation = s[5]), o[0] & 8 && (a.parser = s[3]), i.$set(a);
    },
    i(s) {
      r || (P(e.$$.fragment, s), P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(e.$$.fragment, s), x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      ge(e, s), s && V(n), ge(i, s);
    }
  };
}
function $H(t) {
  let e, n;
  return e = new hH({ props: { readOnly: t[0] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.readOnly = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function eW(t) {
  let e, n, i, r, s, o, l, a, c = t[1] && Kv(t), u = t[2] && Gv(t);
  const f = [YH, GH], h = [];
  function d(p, g) {
    return p[25] ? 1 : 0;
  }
  return r = d(t), s = h[r] = f[r](t), {
    c() {
      e = j("div"), c && c.c(), n = Q(), u && u.c(), i = Q(), s.c(), b(e, "class", "jse-tree-mode svelte-qojdc1"), Ce(e, "no-main-menu", !t[1]);
    },
    m(p, g) {
      U(p, e, g), c && c.m(e, null), E(e, n), u && u.m(e, null), E(e, i), h[r].m(e, null), t[78](e), o = !0, l || (a = [
        se(KH, "mousedown", t[49]),
        se(e, "keydown", t[41]),
        se(e, "mousedown", t[42]),
        se(e, "contextmenu", t[43])
      ], l = !0);
    },
    p(p, g) {
      p[1] ? c ? (c.p(p, g), g[0] & 2 && P(c, 1)) : (c = Kv(p), c.c(), P(c, 1), c.m(e, n)) : c && (Se(), x(c, 1, 1, () => {
        c = null;
      }), Ee()), p[2] ? u ? (u.p(p, g), g[0] & 4 && P(u, 1)) : (u = Gv(p), u.c(), P(u, 1), u.m(e, i)) : u && (Se(), x(u, 1, 1, () => {
        u = null;
      }), Ee()), s.p(p, g), (!o || g[0] & 2) && Ce(e, "no-main-menu", !p[1]);
    },
    i(p) {
      o || (P(c), P(u), P(s), o = !0);
    },
    o(p) {
      x(c), x(u), x(s), o = !1;
    },
    d(p) {
      p && V(e), c && c.d(), u && u.d(), h[r].d(), t[78](null), l = !1, ht(a);
    }
  };
}
function tW(t, e, n) {
  let i;
  const r = mi("jsoneditor:TreeMode"), s = typeof window > "u";
  r("isSSR:", s);
  const { open: o } = gi("simple-modal"), l = Pa(), a = Pa(), { openAbsolutePopup: c, closeAbsolutePopup: u } = gi("absolute-popup");
  let f, h, d, p = !1;
  const g = H6();
  let { readOnly: _ } = e, { externalContent: m } = e, { mainMenuBar: C } = e, { navigationBar: v } = e, { escapeControlCharacters: k } = e, { escapeUnicodeCharacters: S } = e, { parser: O } = e, { parseMemoizeOne: w } = e, { validator: A } = e, { validationParser: D } = e, { pathParser: R } = e, { indentation: M } = e, { onError: H } = e, { onChange: J } = e, { onChangeMode: I } = e, { onRenderValue: z } = e, { onRenderMenu: L } = e, { onClassName: K } = e, { onFocus: F } = e, { onBlur: N } = e, { onSortModal: te } = e, { onTransformModal: ue } = e, { onJSONEditorModal: q } = e, re = !1;
  ob({
    onMount: or,
    onDestroy: vs,
    getWindow: () => sc(d),
    hasFocus: () => re && document.hasFocus() || Yh(d),
    onFocus: () => {
      p = !0, F && F();
    },
    onBlur: () => {
      p = !1, N && N();
    }
  });
  let ie, Z, Le;
  function Ie(Y) {
    r("updateSelection", Y);
    const ke = typeof Y == "function" ? Y(le.selection) : Y;
    Ot(ke, le.selection) || n(16, le = {
      ...le,
      selection: ke
    });
  }
  let Fe = !1, le = Qh(), De, Ve, ye, fe = !1, Ae = !1, ae = !1, $ = "";
  async function de(Y) {
    r("search text updated", Y), n(74, $ = Y), await Xi(), await X();
  }
  async function he() {
    n(17, De = De ? px(De) : void 0), await X();
  }
  async function W() {
    n(17, De = De ? gx(De) : void 0), await X();
  }
  async function y(Y, ke) {
    const We = De == null ? void 0 : De.activeItem;
    if (r("handleReplace", { replacementText: ke, activeItem: We }), !We)
      return;
    const { operations: _t, newSelection: Ge } = mx(ie, le, ke, We, O);
    gn(_t, (Qt, Zn) => ({
      state: { ...Zn, selection: Ge }
    })), await Xi(), await X();
  }
  async function T(Y, ke) {
    r("handleReplaceAll", { text: Y, replacementText: ke });
    const { operations: We, newSelection: _t } = bx(ie, le, Y, ke, O);
    gn(We, (Ge, Qt) => ({
      state: { ...Qt, selection: _t }
    })), await Xi(), await X();
  }
  function B() {
    n(19, fe = !1), n(20, Ae = !1), de(""), Je();
  }
  async function X() {
    const Y = De == null ? void 0 : De.activeItem;
    if (r("focusActiveSearchResult", De), Y) {
      const ke = Y.path;
      n(16, le = {
        ...t1(ie, le, ke),
        selection: void 0
      }), await Xi(), await tn(ke);
    }
  }
  function G(Y, ke) {
    if (Y === "") {
      r("clearing search result"), De !== void 0 && n(17, De = void 0);
      return;
    }
    n(21, ae = !0), setTimeout(() => {
      r("searching...", Y);
      const We = R6(Y, ke, le, Dm);
      n(17, De = dx(ke, We, De)), n(21, ae = !1);
    });
  }
  function ce(Y) {
    r("select validation error", Y), Ie(Lt(Y.path, !1)), tn(Y.path);
  }
  const Ne = W6({
    onChange: (Y) => {
      n(22, qe = Y);
    }
  });
  let qe = Ne.getState();
  function mt(Y = ru) {
    r("expand");
    const ke = {
      ...le,
      expandedMap: {},
      visibleSectionsMap: {}
    };
    n(16, le = ur(ie, ke, [], Y));
  }
  const dt = uj(G, hR);
  let je = !1, vt = [], zt;
  const Yt = Ku(q6);
  function Bn(Y, ke, We, _t) {
    ca(
      () => {
        let Ge;
        try {
          Ge = Yt(Y, ke, We, _t);
        } catch (Qt) {
          Ge = [
            {
              path: [],
              message: "Failed to validate: " + Qt.message,
              severity: Do.warning
            }
          ];
        }
        Ot(Ge, vt) || (r("validationErrors changed:", Ge), n(12, vt = Ge));
      },
      (Ge) => r(`validationErrors updated in ${Ge} ms`)
    );
  }
  function Tt() {
    return r("validate"), Le ? {
      parseError: Le,
      isRepairable: !1
    } : (Bn(ie, A, O, D), { validationErrors: vt });
  }
  function Oe() {
    return ie;
  }
  function si() {
    return le;
  }
  function Jt(Y) {
    Y.json !== void 0 && Kt(Y.json), Y.text !== void 0 && ln(Y.text);
  }
  function Kt(Y) {
    if (Y === void 0)
      return;
    const ke = !Ot(ie, Y);
    if (r("update external json", {
      isChanged: ke,
      currentlyText: ie === void 0
    }), !ke)
      return;
    const We = { json: ie, text: Z }, _t = le, Ge = ie, Qt = Z, Zn = je;
    n(10, ie = Y), yn(ie), n(11, Z = void 0), n(23, je = !1), Xn(ie), en({
      previousJson: Ge,
      previousState: _t,
      previousText: Qt,
      previousTextIsRepaired: Zn
    }), Ei(We, null);
  }
  function ln(Y) {
    if (Y === void 0 || m.json !== void 0)
      return;
    const ke = Y !== Z;
    if (r("update external text", { isChanged: ke }), !ke)
      return;
    const We = { json: ie, text: Z }, _t = ie, Ge = le, Qt = Z, Zn = je;
    try {
      n(10, ie = w(Y)), yn(ie), n(11, Z = Y), n(23, je = !1), Le = void 0;
    } catch (wn) {
      try {
        n(10, ie = w(cs(Y))), yn(ie), n(11, Z = Y), n(23, je = !0), Le = void 0, Xn(ie);
      } catch {
        n(10, ie = void 0), n(11, Z = m.text), n(23, je = !1), Le = vp(Z, wn.message || wn.toString());
      }
    }
    Xn(ie), en({
      previousJson: _t,
      previousState: Ge,
      previousText: Qt,
      previousTextIsRepaired: Zn
    }), Ei(We, null);
  }
  function yn(Y) {
    Fe || (Fe = !0, n(16, le = ur(Y, le, [], WB(Y))));
  }
  function Xn(Y) {
    le.selection !== void 0 && (le.selection && mr(Y, le.selection.anchorPath) && mr(Y, le.selection.focusPath) || (r("clearing selection: path does not exist anymore", le.selection), n(16, le = {
      ...le,
      selection: ia(Y, le)
    })));
  }
  function en({ previousJson: Y, previousState: ke, previousText: We, previousTextIsRepaired: _t }) {
    Y === void 0 && We === void 0 || (ie !== void 0 ? Y !== void 0 ? Ne.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: Y
          }
        ],
        state: Mi(ke),
        json: void 0,
        text: We,
        textIsRepaired: _t
      },
      redo: {
        patch: [{ op: "replace", path: "", value: ie }],
        state: Mi(le),
        json: void 0,
        text: Z,
        textIsRepaired: je
      }
    }) : Ne.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: We,
        state: Mi(ke),
        textIsRepaired: _t
      },
      redo: {
        patch: void 0,
        json: ie,
        state: Mi(le),
        text: Z,
        textIsRepaired: je
      }
    }) : Y !== void 0 && Ne.add({
      undo: {
        patch: void 0,
        json: Y,
        state: Mi(ke),
        text: We,
        textIsRepaired: _t
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: Z,
        textIsRepaired: je,
        state: Mi(le)
      }
    }));
  }
  function oi() {
    r("createDefaultSelection"), n(16, le = {
      ...le,
      selection: Nn(ie || {}, [], [])
    });
  }
  function an(Y, ke) {
    if (r("patch", Y, ke), ie === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const We = { json: ie, text: Z }, _t = ie, Ge = le, Qt = Z, Zn = je, Gr = T6(ie, Y), wn = d6(ie, le, Y), rl = La(ie, Y), B_ = ZB(wn.documentState, rl, !1);
    r("patch updatedSelection", rl);
    const Zl = typeof ke == "function" ? ke(wn.json, B_) : void 0;
    n(10, ie = Zl && Zl.json !== void 0 ? Zl.json : wn.json);
    const x_ = Zl && Zl.state !== void 0 ? Zl.state : B_;
    n(16, le = x_), n(11, Z = void 0), n(23, je = !1), n(18, ye = void 0), Xn(ie), Ne.add({
      undo: {
        patch: Gr,
        json: void 0,
        text: Qt,
        state: Mi(Ge),
        textIsRepaired: Zn
      },
      redo: {
        patch: Y,
        json: void 0,
        state: Mi(x_),
        text: Z,
        textIsRepaired: je
      }
    });
    const F_ = {
      json: ie,
      previousJson: _t,
      undo: Gr,
      redo: Y
    };
    return Ei(We, F_), F_;
  }
  function An() {
    _ || !le.selection || Ie(br(le.selection.focusPath, !0));
  }
  function Di() {
    if (_ || !le.selection)
      return;
    const Y = le.selection.focusPath, ke = Ze(ie, Y);
    dn(ke) ? xn(Y, ke) : Ie(Lt(Y, !0));
  }
  function Mn() {
    if (_ || !Et(le.selection))
      return;
    const Y = le.selection.focusPath, ke = Be(Y), We = Ze(ie, Y), _t = !Xs(We, le.enforceStringMap, ke, O), Ge = _t ? String(We) : tc(String(We), O);
    r("handleToggleEnforceString", { enforceString: _t, value: We, updatedValue: Ge }), gn(
      [
        {
          op: "replace",
          path: ke,
          value: Ge
        }
      ],
      (Qt, Zn) => ({
        state: h6(Zn, ke, _t)
      })
    );
  }
  function ar() {
    return je && ie !== void 0 && Ai(ie), { json: ie, text: Z };
  }
  async function _e(Y = !0) {
    await $6({
      json: ie,
      documentState: le,
      indentation: Y ? M : void 0,
      readOnly: _,
      parser: O,
      onPatch: gn
    });
  }
  async function Re(Y = !0) {
    await e8({
      json: ie,
      documentState: le,
      indentation: Y ? M : void 0,
      parser: O
    });
  }
  function lt(Y) {
    Y.preventDefault();
    const ke = Y.clipboardData.getData("text/plain");
    t8({
      clipboardText: ke,
      json: ie,
      documentState: le,
      readOnly: _,
      parser: O,
      onPatch: gn,
      onChangeText: ee,
      openRepairModal: at
    });
  }
  function be() {
    o(
      J6,
      {},
      {
        ...Al,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Je() }
    );
  }
  function at(Y, ke) {
    o(
      G6,
      {
        text: Y,
        onParse: wp,
        onRepair: G5,
        onApply: ke
      },
      {
        ...Al,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Je() }
    );
  }
  function st() {
    n8({
      json: ie,
      text: Z,
      documentState: le,
      keepSelection: !1,
      readOnly: _,
      onChange: J,
      onPatch: gn
    });
  }
  function Nt() {
    if (_ || !E6(le.selection) || Pt(le.selection.focusPath))
      return;
    r("duplicate", { selection: le.selection });
    const Y = ax(ie, S6(le.selection));
    gn(Y);
  }
  function Ft() {
    if (_ || !le.selection || !Bt(le.selection) && !Et(le.selection) || Pt(le.selection.focusPath))
      return;
    r("extract", { selection: le.selection });
    const Y = cx(ie, le.selection);
    gn(Y, (ke, We) => {
      if (dn(ke))
        return {
          state: yo(ke, We, [])
        };
    });
  }
  function kt(Y) {
    td({
      insertType: Y,
      selectInside: !0,
      refJsonEditor: d,
      json: ie,
      documentState: le,
      readOnly: _,
      parser: O,
      onPatch: gn,
      onReplaceJson: Ai
    });
  }
  function On(Y) {
    Ln(le.selection) && Ie(Lt(le.selection.focusPath, !1)), kt(Y);
  }
  function Qn(Y) {
    if (!(_ || !le.selection)) {
      if (!_l(le.selection)) {
        H(new Error(`Cannot convert current selection to ${Y}`));
        return;
      }
      try {
        const ke = le.selection.anchorPath, We = Ze(ie, ke), _t = yj(We, Y, O);
        if (_t === We)
          return;
        const Ge = [
          {
            op: "replace",
            path: Be(ke),
            value: _t
          }
        ];
        r("handleConvert", {
          selection: le.selection,
          path: ke,
          type: Y,
          operations: Ge
        }), gn(Ge, (Qt, Zn) => ({
          state: yo(Qt, Zn, le.selection.focusPath)
        }));
      } catch (ke) {
        H(ke);
      }
    }
  }
  function li() {
    const Y = Sw(ie, le, !1), ke = At(le.selection.focusPath);
    !Pt(Y.focusPath) && Ot(ke, At(Y.focusPath)) ? Ie(Zs(Y.focusPath)) : Ie(Qs(ke)), r("insert before", {
      selection: le.selection,
      selectionBefore: Y,
      parentPath: ke
    }), Xi().then(zi);
  }
  function Ki() {
    const Y = Bt(le.selection) ? ft(le.selection.paths) : le.selection.focusPath;
    r("insert after", Y), Ie(Zs(Y)), Xi().then(zi);
  }
  async function Zt(Y) {
    await i8({
      char: Y,
      selectInside: !0,
      refJsonEditor: d,
      json: ie,
      documentState: le,
      readOnly: _,
      parser: O,
      onPatch: gn,
      onReplaceJson: Ai,
      onSelect: Ie
    });
  }
  function Gi() {
    if (_ || !Ne.getState().canUndo)
      return;
    const Y = Ne.undo();
    if (!Y)
      return;
    const ke = { json: ie, text: Z };
    n(10, ie = Y.undo.patch ? Fr(ie, Y.undo.patch) : Y.undo.json), n(16, le = Y.undo.state), n(11, Z = Y.undo.text), n(23, je = Y.undo.textIsRepaired), r("undo", { item: Y, json: ie, documentState: le });
    const We = {
      json: ie,
      previousJson: ke.json,
      redo: Y.undo.patch,
      undo: Y.redo.patch
    };
    Ei(ke, We), Je(), le.selection && tn(le.selection.focusPath, !1);
  }
  function cr() {
    if (_ || !Ne.getState().canRedo)
      return;
    const Y = Ne.redo();
    if (!Y)
      return;
    const ke = { json: ie, text: Z };
    n(10, ie = Y.redo.patch ? Fr(ie, Y.redo.patch) : Y.redo.json), n(16, le = Y.redo.state), n(11, Z = Y.redo.text), n(23, je = Y.redo.textIsRepaired), r("redo", { item: Y, json: ie, documentState: le });
    const We = {
      json: ie,
      previousJson: ke.json,
      redo: Y.redo.patch,
      undo: Y.undo.patch
    };
    Ei(ke, We), Je(), le.selection && tn(le.selection.focusPath, !1);
  }
  function bi(Y) {
    _ || (re = !0, te({
      id: l,
      json: ie,
      rootPath: Y,
      onSort: async ({ operations: ke }) => {
        r("onSort", Y, ke), gn(ke, (We, _t) => ({
          state: {
            ...yo(We, _t, Y),
            selection: Lt(Y, !1)
          }
        }));
      },
      onClose: () => {
        re = !1, Je();
      }
    }));
  }
  function ao() {
    if (!le.selection)
      return;
    const Y = Ew(ie, le.selection);
    bi(Y);
  }
  function qn() {
    bi([]);
  }
  function Tn({ id: Y, rootPath: ke, onTransform: We, onClose: _t }) {
    re = !0, ue({
      id: Y || a,
      json: ie,
      rootPath: ke,
      onTransform: We ? (Ge) => {
        We({
          operations: Ge,
          json: ie,
          transformedJson: Fr(ie, Ge)
        });
      } : (Ge) => {
        r("onTransform", ke, Ge), gn(Ge, (Qt, Zn) => ({
          state: {
            ...yo(Qt, Zn, ke),
            selection: Lt(ke, !1)
          }
        }));
      },
      onClose: () => {
        re = !1, Je(), _t && _t();
      }
    });
  }
  function Rn() {
    if (!le.selection)
      return;
    const Y = Ew(ie, le.selection);
    Tn({ rootPath: Y });
  }
  function cn() {
    Tn({ rootPath: [] });
  }
  function xn(Y, ke) {
    r("openJSONEditorModal", { path: Y, value: ke }), re = !0, q({
      content: { json: ke },
      path: Y,
      onPatch: uf.onPatch,
      onClose: () => {
        re = !1, Je();
      }
    });
  }
  async function tn(Y, ke = !0) {
    n(16, le = t1(ie, le, At(Y))), await Xi();
    const We = Pn(Y);
    if (We) {
      r("scrollTo", { path: Y, elem: We, refContents: f });
      const _t = f.getBoundingClientRect(), Ge = We.getBoundingClientRect();
      if (!ke && Ge.bottom > _t.top && Ge.top < _t.bottom)
        return;
      const Qt = -(_t.height / 4);
      g(We, {
        container: f,
        offset: Qt,
        duration: Im
      });
    }
  }
  function Pn(Y) {
    return f ? f.querySelector(`div[data-path="${Da(Y)}"]`) : null;
  }
  function In(Y) {
    const ke = Pn(Y);
    if (!ke || !f)
      return;
    const We = f.getBoundingClientRect(), _t = ke.getBoundingClientRect(), Ge = 20, Qt = dn(Ze(ie, Y)) ? Ge : _t.height;
    _t.top < We.top + Ge ? g(ke, {
      container: f,
      offset: -Ge,
      duration: 0
    }) : _t.top + Qt > We.bottom - Ge && g(ke, {
      container: f,
      offset: -(We.height - Qt - Ge),
      duration: 0
    });
  }
  function Ei(Y, ke) {
    Y.json === void 0 && (Y == null ? void 0 : Y.text) === void 0 || (Z !== void 0 ? J({ text: Z, json: void 0 }, Y, { contentErrors: Tt(), patchResult: ke }) : ie !== void 0 && J({ text: void 0, json: ie }, Y, { contentErrors: Tt(), patchResult: ke }));
  }
  function gn(Y, ke) {
    if (!_)
      return r("handlePatch", Y, ke), an(Y, ke);
  }
  function Ai(Y, ke) {
    const We = le, _t = ie, Ge = Z, Qt = { json: ie, text: Z }, Zn = je, Gr = ur(ie, le, [], ss), wn = typeof ke == "function" ? ke(Y, Gr) : void 0;
    n(10, ie = wn && wn.json !== void 0 ? wn.json : Y), n(16, le = wn && wn.state !== void 0 ? wn.state : Gr), n(11, Z = void 0), n(23, je = !1), Xn(ie), en({
      previousJson: _t,
      previousState: We,
      previousText: Ge,
      previousTextIsRepaired: Zn
    }), Ei(Qt, null);
  }
  function ee(Y, ke) {
    r("handleChangeText");
    const We = le, _t = ie, Ge = Z, Qt = { json: ie, text: Z }, Zn = je;
    try {
      n(10, ie = w(Y)), n(16, le = ur(ie, le, [], ss)), n(11, Z = void 0), n(23, je = !1);
    } catch {
      try {
        n(10, ie = w(cs(Y))), n(16, le = ur(ie, le, [], ss)), n(11, Z = Y), n(23, je = !0);
      } catch {
        n(10, ie = void 0), n(16, le = Qh({ json: ie, expand: ss })), n(11, Z = Y), n(23, je = !1);
      }
    }
    if (typeof ke == "function") {
      const wn = ke(ie, le);
      n(10, ie = wn && wn.json ? wn.json : ie), n(16, le = wn && wn.state ? wn.state : le);
    }
    Xn(ie), en({
      previousJson: _t,
      previousState: We,
      previousText: Ge,
      previousTextIsRepaired: Zn
    }), Ei(Qt, null);
  }
  function Me(Y, ke, We = !1) {
    r("expand", { path: Y, expanded: ke, recursive: We }), ke ? We ? n(16, le = ur(ie, le, Y, ru)) : n(16, le = FB(le, Y)) : n(16, le = f6(le, Y)), le.selection && !ke && JB(le.selection, Y) && Ie(void 0), setTimeout(() => {
      Yh(d) || Je();
    });
  }
  function He() {
    Me([], !0, !0);
  }
  function $e() {
    Me([], !1, !0);
  }
  function ut(Y) {
    r("openFind", { findAndReplace: Y }), n(19, fe = !1), n(20, Ae = !1), Xi().then(() => {
      n(19, fe = !0), n(20, Ae = Y);
    });
  }
  function Te(Y, ke) {
    r("handleExpandSection", Y, ke);
    const We = Be(Y);
    n(16, le = zB(ie, le, We, ke));
  }
  function Ue(Y) {
    r("pasted json as text", Y), n(18, ye = Y);
  }
  function It(Y) {
    const ke = Yo(Y).replace(/^Command\+/, "Ctrl+"), We = Y.shiftKey;
    if (r("keydown", { combo: ke, key: Y.key }), ke === "Ctrl+X" && (Y.preventDefault(), _e(!0)), ke === "Ctrl+Shift+X" && (Y.preventDefault(), _e(!1)), ke === "Ctrl+C" && (Y.preventDefault(), Re(!0)), ke === "Ctrl+Shift+C" && (Y.preventDefault(), Re(!1)), ke === "Ctrl+D" && (Y.preventDefault(), Nt()), (ke === "Delete" || ke === "Backspace") && (Y.preventDefault(), st()), ke === "Insert" && (Y.preventDefault(), kt("structure")), ke === "Ctrl+A" && (Y.preventDefault(), Ie($B())), ke === "Ctrl+Q" && zi(Y), ke === "Up" || ke === "Shift+Up") {
      Y.preventDefault();
      const Ge = le.selection ? Sw(ie, le, We, !0) || le.selection : ia(ie, le);
      Ie(Ge), In(Ge.focusPath);
    }
    if (ke === "Down" || ke === "Shift+Down") {
      Y.preventDefault();
      const Ge = le.selection ? KB(ie, le, We, !0) || le.selection : ia(ie, le);
      Ie(Ge), In(Ge.focusPath);
    }
    if (ke === "Left" || ke === "Shift+Left") {
      Y.preventDefault();
      const Ge = le.selection ? YB(ie, le, We, !_) || le.selection : ia(ie, le);
      Ie(Ge), In(Ge.focusPath);
    }
    if (ke === "Right" || ke === "Shift+Right") {
      Y.preventDefault();
      const Ge = le.selection ? XB(ie, le, We, !_) || le.selection : ia(ie, le);
      Ie(Ge), In(Ge.focusPath);
    }
    if (ke === "Enter" && le.selection) {
      if (!_ && Bt(le.selection) && le.selection.paths.length === 1) {
        const Ge = le.selection.focusPath, Qt = Ze(ie, At(Ge));
        Array.isArray(Qt) && Ie(Lt(Ge, !1));
      }
      if (!_ && Ln(le.selection) && (Y.preventDefault(), Ie({ ...le.selection, edit: !0 })), Et(le.selection)) {
        Y.preventDefault();
        const Ge = Ze(ie, le.selection.focusPath);
        dn(Ge) ? Me(le.selection.focusPath, !0) : _ || Ie({ ...le.selection, edit: !0 });
      }
    }
    if (ke.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && le.selection) {
      Y.preventDefault(), Zt(Y.key);
      return;
    }
    if (ke === "Enter" && (Lr(le.selection) || Kn(le.selection))) {
      Y.preventDefault(), Zt("");
      return;
    }
    if (ke === "Ctrl+Enter" && Et(le.selection)) {
      const Ge = Ze(ie, le.selection.focusPath);
      op(Ge) && window.open(String(Ge), "_blank");
    }
    if (ke === "Escape" && le.selection && (Y.preventDefault(), Ie(void 0)), ke === "Ctrl+F" && (Y.preventDefault(), ut(!1)), ke === "Ctrl+H" && (Y.preventDefault(), ut(!0)), ke === "Ctrl+Z") {
      Y.preventDefault();
      const Ge = document.activeElement;
      Ge && Ge.blur && Ge.focus ? (Ge.blur(), setTimeout(() => {
        Gi(), setTimeout(() => Ge.select());
      })) : Gi();
    }
    if (ke === "Ctrl+Shift+Z") {
      Y.preventDefault();
      const Ge = document.activeElement;
      Ge && Ge.blur && Ge.focus ? (Ge.blur(), setTimeout(() => {
        cr(), setTimeout(() => Ge.select());
      })) : cr();
    }
  }
  function Xt(Y) {
    r("handleMouseDown", Y), setTimeout(() => {
      setTimeout(() => {
        !p && !n6(Y.target, "BUTTON") && (Je(), !le.selection && ie === void 0 && (Z === "" || Z === void 0) && oi());
      });
    });
  }
  function _i({ anchor: Y, left: ke, top: We, width: _t, height: Ge, offsetTop: Qt, offsetLeft: Zn, showTip: Gr }) {
    const wn = {
      json: ie,
      documentState: le,
      parser: O,
      showTip: Gr,
      onEditKey: An,
      onEditValue: Di,
      onToggleEnforceString: Mn,
      onCut: _e,
      onCopy: Re,
      onPaste: be,
      onRemove: st,
      onDuplicate: Nt,
      onExtract: Ft,
      onInsertBefore: li,
      onInsert: On,
      onConvert: Qn,
      onInsertAfter: Ki,
      onSort: ao,
      onTransform: Rn,
      onCloseContextMenu() {
        u(rl), Je();
      }
    };
    re = !0;
    const rl = c(rU, wn, {
      left: ke,
      top: We,
      offsetTop: Qt,
      offsetLeft: Zn,
      width: _t,
      height: Ge,
      anchor: Y,
      closeOnOuterClick: !0,
      onClose: () => {
        re = !1, Je();
      }
    });
  }
  function zi(Y) {
    if (!(_ || jo(le.selection))) {
      if (Y && (Y.stopPropagation(), Y.preventDefault()), Y && Y.type === "contextmenu" && Y.target !== h)
        _i({
          left: Y.clientX,
          top: Y.clientY,
          width: Hs,
          height: Us,
          showTip: !1
        });
      else {
        const ke = f == null ? void 0 : f.querySelector(".jse-context-menu-pointer.jse-selected");
        if (ke)
          _i({
            anchor: ke,
            offsetTop: 2,
            width: Hs,
            height: Us,
            showTip: !1
          });
        else {
          const We = f == null ? void 0 : f.getBoundingClientRect();
          We && _i({
            top: We.top + 2,
            left: We.left + 2,
            width: Hs,
            height: Us,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function Xl(Y) {
    _ || _i({
      anchor: r6(Y.target, "BUTTON"),
      offsetTop: 0,
      width: Hs,
      height: Us,
      showTip: !0
    });
  }
  async function Ql() {
    r("apply pasted json", ye);
    const { path: Y, contents: ke } = ye;
    Ie(Lt(Y, !1)), await Xi();
    const We = [
      {
        op: "replace",
        path: Be(Y),
        value: ke
      }
    ];
    gn(We, (_t, Ge) => ({
      state: yo(_t, Ge, Y)
    }));
  }
  function gg() {
    r("clear pasted json"), n(18, ye = void 0);
  }
  function mg() {
    I(vi.text);
  }
  function oe(Y) {
    Ie(Y), Je(), tn(Y.focusPath);
  }
  function Je() {
    r("focus"), h && (h.focus(), h.select());
  }
  function mn(Y) {
    !Vu(Y.target, (We) => We === d) && jo(le.selection) && (r("click outside the editor, stop edit mode"), Ie((We) => Ln(We) ? { ...We, edit: !1 } : Et(We) ? { ...We, edit: !1 } : We), p && h && (h.focus(), h.blur()), Xi().then(() => {
      setTimeout(() => {
        h && h.blur();
      });
    }));
  }
  function Er(Y) {
    return GB(ie, le, Y);
  }
  function co(Y) {
    i && i.onDrag(Y);
  }
  function Ar() {
    i && i.onDragEnd();
  }
  let uf;
  function tT(Y) {
    fe = Y, n(19, fe);
  }
  function nT(Y) {
    yt[Y ? "unshift" : "push"](() => {
      h = Y, n(14, h);
    });
  }
  function iT(Y) {
    yt[Y ? "unshift" : "push"](() => {
      f = Y, n(9, f);
    });
  }
  function rT(Y) {
    yt[Y ? "unshift" : "push"](() => {
      d = Y, n(15, d);
    });
  }
  return t.$$set = (Y) => {
    "readOnly" in Y && n(0, _ = Y.readOnly), "externalContent" in Y && n(50, m = Y.externalContent), "mainMenuBar" in Y && n(1, C = Y.mainMenuBar), "navigationBar" in Y && n(2, v = Y.navigationBar), "escapeControlCharacters" in Y && n(51, k = Y.escapeControlCharacters), "escapeUnicodeCharacters" in Y && n(52, S = Y.escapeUnicodeCharacters), "parser" in Y && n(3, O = Y.parser), "parseMemoizeOne" in Y && n(53, w = Y.parseMemoizeOne), "validator" in Y && n(54, A = Y.validator), "validationParser" in Y && n(55, D = Y.validationParser), "pathParser" in Y && n(4, R = Y.pathParser), "indentation" in Y && n(5, M = Y.indentation), "onError" in Y && n(6, H = Y.onError), "onChange" in Y && n(56, J = Y.onChange), "onChangeMode" in Y && n(57, I = Y.onChangeMode), "onRenderValue" in Y && n(58, z = Y.onRenderValue), "onRenderMenu" in Y && n(7, L = Y.onRenderMenu), "onClassName" in Y && n(59, K = Y.onClassName), "onFocus" in Y && n(60, F = Y.onFocus), "onBlur" in Y && n(61, N = Y.onBlur), "onSortModal" in Y && n(62, te = Y.onSortModal), "onTransformModal" in Y && n(63, ue = Y.onTransformModal), "onJSONEditorModal" in Y && n(64, q = Y.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 3145728 && n(73, Ve = G0({
      escapeControlCharacters: k,
      escapeUnicodeCharacters: S
    })), t.$$.dirty[1] & 524288 && Jt(m), t.$$.dirty[0] & 1024 | t.$$.dirty[2] & 4096 && dt($, ie), t.$$.dirty[0] & 3072, t.$$.dirty[0] & 1032 | t.$$.dirty[1] & 25165824 && Bn(ie, A, O, D), t.$$.dirty[0] & 4096 && n(24, zt = xz(vt)), t.$$.dirty[0] & 512 && (i = f ? Lz(f) : void 0), t.$$.dirty[0] & 9 | t.$$.dirty[1] & 402653184 | t.$$.dirty[2] & 2048 && n(13, uf = {
      readOnly: _,
      parser: O,
      normalization: Ve,
      getJson: Oe,
      getDocumentState: si,
      findElement: Pn,
      findNextInside: Er,
      focus: Je,
      onPatch: gn,
      onInsert: kt,
      onExpand: Me,
      onSelect: Ie,
      onFind: ut,
      onExpandSection: Te,
      onPasteJson: Ue,
      onRenderValue: z,
      onContextMenu: _i,
      onClassName: K || (() => {
      }),
      onDrag: co,
      onDragEnd: Ar
    }), t.$$.dirty[0] & 8192 && r("context changed", uf);
  }, [
    _,
    C,
    v,
    O,
    R,
    M,
    H,
    L,
    ar,
    f,
    ie,
    Z,
    vt,
    uf,
    h,
    d,
    le,
    De,
    ye,
    fe,
    Ae,
    ae,
    qe,
    je,
    zt,
    s,
    de,
    he,
    W,
    y,
    T,
    B,
    ce,
    Re,
    lt,
    Gi,
    cr,
    qn,
    cn,
    He,
    $e,
    It,
    Xt,
    zi,
    Xl,
    Ql,
    gg,
    mg,
    oe,
    mn,
    m,
    k,
    S,
    w,
    A,
    D,
    J,
    I,
    z,
    K,
    F,
    N,
    te,
    ue,
    q,
    mt,
    Tt,
    Oe,
    an,
    Tn,
    tn,
    Pn,
    Je,
    Ve,
    $,
    tT,
    nT,
    iT,
    rT
  ];
}
class nW extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      tW,
      eW,
      wt,
      {
        readOnly: 0,
        externalContent: 50,
        mainMenuBar: 1,
        navigationBar: 2,
        escapeControlCharacters: 51,
        escapeUnicodeCharacters: 52,
        parser: 3,
        parseMemoizeOne: 53,
        validator: 54,
        validationParser: 55,
        pathParser: 4,
        indentation: 5,
        onError: 6,
        onChange: 56,
        onChangeMode: 57,
        onRenderValue: 58,
        onRenderMenu: 7,
        onClassName: 59,
        onFocus: 60,
        onBlur: 61,
        onSortModal: 62,
        onTransformModal: 63,
        onJSONEditorModal: 64,
        expand: 65,
        validate: 66,
        getJson: 67,
        patch: 68,
        acceptAutoRepair: 8,
        openTransformModal: 69,
        scrollTo: 70,
        findElement: 71,
        focus: 72
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get expand() {
    return this.$$.ctx[65];
  }
  get validate() {
    return this.$$.ctx[66];
  }
  get getJson() {
    return this.$$.ctx[67];
  }
  get patch() {
    return this.$$.ctx[68];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[8];
  }
  get openTransformModal() {
    return this.$$.ctx[69];
  }
  get scrollTo() {
    return this.$$.ctx[70];
  }
  get findElement() {
    return this.$$.ctx[71];
  }
  get focus() {
    return this.$$.ctx[72];
  }
}
const gb = nW;
function Qv(t) {
  let e, n, i, r, s;
  const o = [rW, iW], l = [];
  function a(c, u) {
    return u[0] & 16384 && (e = null), e == null && (e = !!Array.isArray(c[14])), e ? 0 : 1;
  }
  return n = a(t, [-1, -1]), i = l[n] = o[n](t), {
    c() {
      i.c(), r = ot();
    },
    m(c, u) {
      l[n].m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      let f = n;
      n = a(c, u), n === f ? l[n].p(c, u) : (Se(), x(l[f], 1, 1, () => {
        l[f] = null;
      }), Ee(), i = l[n], i ? i.p(c, u) : (i = l[n] = o[n](c), i.c()), P(i, 1), i.m(r.parentNode, r));
    },
    i(c) {
      s || (P(i), s = !0);
    },
    o(c) {
      x(i), s = !1;
    },
    d(c) {
      l[n].d(c), c && V(r);
    }
  };
}
function iW(t) {
  let e;
  return {
    c() {
      e = we("(Only available for arrays, not for objects)");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function rW(t) {
  let e, n;
  return e = new Sz({
    props: {
      queryOptions: t[12],
      json: t[14],
      onChange: t[21]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.queryOptions = i[12]), r[0] & 16384 && (s.json = i[14]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function Zv(t) {
  let e, n;
  return e = new gb({
    props: {
      externalContent: t[19],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: hn,
      onError: console.error,
      onChange: hn,
      onChangeMode: hn,
      onFocus: hn,
      onBlur: hn,
      onSortModal: hn,
      onTransformModal: hn,
      onJSONEditorModal: hn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 524288 && (s.externalContent = i[19]), r[0] & 4 && (s.indentation = i[2]), r[0] & 8 && (s.escapeControlCharacters = i[3]), r[0] & 16 && (s.escapeUnicodeCharacters = i[4]), r[0] & 32 && (s.parser = i[5]), r[0] & 64 && (s.parseMemoizeOne = i[6]), r[0] & 1024 && (s.onRenderValue = i[10]), r[0] & 2048 && (s.onClassName = i[11]), r[0] & 128 && (s.validationParser = i[7]), r[0] & 256 && (s.pathParser = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function sW(t) {
  let e, n = t[17].toString() + "", i;
  return {
    c() {
      e = j("div"), i = we(n), b(e, "class", "jse-preview jse-error svelte-107mggt");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 131072 && n !== (n = r[17].toString() + "") && ze(i, n);
    },
    i: ve,
    o: ve,
    d(r) {
      r && V(e);
    }
  };
}
function oW(t) {
  let e, n;
  return e = new gb({
    props: {
      externalContent: t[18],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: hn,
      onError: console.error,
      onChange: hn,
      onChangeMode: hn,
      onFocus: hn,
      onBlur: hn,
      onSortModal: hn,
      onTransformModal: hn,
      onJSONEditorModal: hn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 262144 && (s.externalContent = i[18]), r[0] & 4 && (s.indentation = i[2]), r[0] & 8 && (s.escapeControlCharacters = i[3]), r[0] & 16 && (s.escapeUnicodeCharacters = i[4]), r[0] & 32 && (s.parser = i[5]), r[0] & 64 && (s.parseMemoizeOne = i[6]), r[0] & 1024 && (s.onRenderValue = i[10]), r[0] & 2048 && (s.onClassName = i[11]), r[0] & 128 && (s.validationParser = i[7]), r[0] & 256 && (s.pathParser = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function lW(t) {
  let e, n, i, r, s, o, l, a, c = t[20](t[0]).description + "", u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z, L, K, F, N, te, ue, q, re, ie, Z, Le, Ie, Fe, le, De, Ve, ye;
  e = new Nz({
    props: {
      queryLanguages: t[9],
      queryLanguageId: t[0],
      onChangeQueryLanguage: t[26]
    }
  }), v = new Mt({
    props: {
      data: t[15] ? dr : ko
    }
  });
  let fe = t[15] && Qv(t);
  L = new Mt({
    props: {
      data: t[16] ? dr : ko
    }
  });
  let Ae = t[16] && Zv(t);
  const ae = [oW, sW], $ = [];
  function de(he, W) {
    return he[17] ? 1 : 0;
  }
  return re = de(t), ie = $[re] = ae[re](t), {
    c() {
      me(e.$$.fragment), n = Q(), i = j("div"), r = j("div"), s = j("div"), o = j("div"), o.innerHTML = '<div class="jse-label-inner svelte-107mggt">Language</div>', l = Q(), a = j("div"), u = Q(), f = j("div"), f.innerHTML = '<div class="jse-label-inner svelte-107mggt">Path</div>', h = Q(), d = j("input"), g = Q(), _ = j("div"), m = j("div"), C = j("button"), me(v.$$.fragment), k = we(`
                Wizard`), S = Q(), fe && fe.c(), O = Q(), w = j("div"), w.innerHTML = '<div class="jse-label-inner svelte-107mggt">Query</div>', A = Q(), D = j("textarea"), R = Q(), M = j("div"), H = j("div"), J = j("div"), I = j("div"), z = j("button"), me(L.$$.fragment), K = we(`
                  Original`), F = Q(), Ae && Ae.c(), N = Q(), te = j("div"), ue = j("div"), ue.innerHTML = '<div class="jse-label-inner svelte-107mggt">Preview</div>', q = Q(), ie.c(), Z = Q(), Le = j("div"), Ie = j("button"), Fe = we("Transform"), b(o, "class", "jse-label svelte-107mggt"), b(a, "class", "jse-description svelte-107mggt"), b(f, "class", "jse-label svelte-107mggt"), b(d, "class", "jse-path svelte-107mggt"), b(d, "type", "text"), d.readOnly = !0, b(d, "title", "Selected path"), d.value = p = Pt(t[1]) ? "(whole document)" : wr(qi(t[1])), b(C, "type", "button"), b(C, "class", "svelte-107mggt"), b(m, "class", "jse-label-inner svelte-107mggt"), b(_, "class", "jse-label svelte-107mggt"), b(w, "class", "jse-label svelte-107mggt"), b(D, "class", "jse-query svelte-107mggt"), b(D, "spellcheck", "false"), D.value = t[13], b(s, "class", "jse-query-contents svelte-107mggt"), b(z, "type", "button"), b(z, "class", "svelte-107mggt"), b(I, "class", "jse-label-inner svelte-107mggt"), b(J, "class", "jse-label svelte-107mggt"), b(H, "class", "jse-original-data svelte-107mggt"), Ce(H, "jse-hide", !t[16]), b(ue, "class", "jse-label svelte-107mggt"), b(te, "class", "jse-preview-data svelte-107mggt"), b(M, "class", "jse-data-contents svelte-107mggt"), Ce(M, "jse-hide-original-data", !t[16]), b(r, "class", "jse-main-contents svelte-107mggt"), b(Ie, "type", "button"), b(Ie, "class", "jse-primary svelte-107mggt"), Ie.disabled = le = !!t[17], b(Le, "class", "jse-actions svelte-107mggt"), b(i, "class", "jse-modal-contents svelte-107mggt");
    },
    m(he, W) {
      pe(e, he, W), U(he, n, W), U(he, i, W), E(i, r), E(r, s), E(s, o), E(s, l), E(s, a), a.innerHTML = c, E(s, u), E(s, f), E(s, h), E(s, d), E(s, g), E(s, _), E(_, m), E(m, C), pe(v, C, null), E(C, k), E(s, S), fe && fe.m(s, null), E(s, O), E(s, w), E(s, A), E(s, D), E(r, R), E(r, M), E(M, H), E(H, J), E(J, I), E(I, z), pe(L, z, null), E(z, K), E(H, F), Ae && Ae.m(H, null), E(M, N), E(M, te), E(te, ue), E(te, q), $[re].m(te, null), E(i, Z), E(i, Le), E(Le, Ie), E(Ie, Fe), De = !0, Ve || (ye = [
        se(C, "click", t[24]),
        se(D, "input", t[22]),
        se(z, "click", t[25]),
        se(Ie, "click", t[23]),
        Wi(cW.call(null, Ie))
      ], Ve = !0);
    },
    p(he, W) {
      const y = {};
      W[0] & 512 && (y.queryLanguages = he[9]), W[0] & 1 && (y.queryLanguageId = he[0]), e.$set(y), (!De || W[0] & 1) && c !== (c = he[20](he[0]).description + "") && (a.innerHTML = c), (!De || W[0] & 2 && p !== (p = Pt(he[1]) ? "(whole document)" : wr(qi(he[1]))) && d.value !== p) && (d.value = p);
      const T = {};
      W[0] & 32768 && (T.data = he[15] ? dr : ko), v.$set(T), he[15] ? fe ? (fe.p(he, W), W[0] & 32768 && P(fe, 1)) : (fe = Qv(he), fe.c(), P(fe, 1), fe.m(s, O)) : fe && (Se(), x(fe, 1, 1, () => {
        fe = null;
      }), Ee()), (!De || W[0] & 8192) && (D.value = he[13]);
      const B = {};
      W[0] & 65536 && (B.data = he[16] ? dr : ko), L.$set(B), he[16] ? Ae ? (Ae.p(he, W), W[0] & 65536 && P(Ae, 1)) : (Ae = Zv(he), Ae.c(), P(Ae, 1), Ae.m(H, null)) : Ae && (Se(), x(Ae, 1, 1, () => {
        Ae = null;
      }), Ee()), (!De || W[0] & 65536) && Ce(H, "jse-hide", !he[16]);
      let X = re;
      re = de(he), re === X ? $[re].p(he, W) : (Se(), x($[X], 1, 1, () => {
        $[X] = null;
      }), Ee(), ie = $[re], ie ? ie.p(he, W) : (ie = $[re] = ae[re](he), ie.c()), P(ie, 1), ie.m(te, null)), (!De || W[0] & 65536) && Ce(M, "jse-hide-original-data", !he[16]), (!De || W[0] & 131072 && le !== (le = !!he[17])) && (Ie.disabled = le);
    },
    i(he) {
      De || (P(e.$$.fragment, he), P(v.$$.fragment, he), P(fe), P(L.$$.fragment, he), P(Ae), P(ie), De = !0);
    },
    o(he) {
      x(e.$$.fragment, he), x(v.$$.fragment, he), x(fe), x(L.$$.fragment, he), x(Ae), x(ie), De = !1;
    },
    d(he) {
      ge(e, he), he && V(n), he && V(i), ge(v), fe && fe.d(), ge(L), Ae && Ae.d(), $[re].d(), Ve = !1, ht(ye);
    }
  };
}
function aW(t) {
  let e, n, i;
  return n = new l6({
    props: {
      $$slots: { default: [lW] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-modal jse-transform svelte-107mggt");
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1048575 | s[1] & 256 && (o.$$scope = { dirty: s, ctx: r }), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function cW(t) {
  t.focus();
}
function uW(t, e, n) {
  let i, r;
  const s = mi("jsoneditor:TransformModal");
  let { id: o = "transform-modal-" + Nc() } = e, { json: l } = e, { rootPath: a = [] } = e, { indentation: c } = e, { escapeControlCharacters: u } = e, { escapeUnicodeCharacters: f } = e, { parser: h } = e, { parseMemoizeOne: d } = e, { validationParser: p } = e, { pathParser: g } = e, { queryLanguages: _ } = e, { queryLanguageId: m } = e, { onChangeQueryLanguage: C } = e, { onRenderValue: v } = e, { onClassName: k } = e, { onTransform: S } = e;
  const { close: O } = gi("simple-modal"), w = `${o}:${Be(a)}`, A = Mr[w] || {};
  let D = Mr.showWizard !== !1, R = Mr.showOriginal !== !1, M = A.queryOptions || {}, H = m === A.queryLanguageId && A.query ? A.query : L(m).createQuery(l, A.queryOptions || {}), J = A.isManual || !1, I, z = { text: "" };
  function L(Z) {
    return _.find((Le) => Le.id === Z) || _[0];
  }
  function K(Z) {
    n(12, M = Z), n(13, H = L(m).createQuery(l, Z)), n(32, J = !1), s("updateQueryByWizard", { queryOptions: M, query: H, isManual: J });
  }
  function F(Z) {
    n(13, H = Z.target.value), n(32, J = !0), s("handleChangeQuery", { query: H, isManual: J });
  }
  function N(Z, Le) {
    try {
      s("previewTransform", { query: Le });
      const Ie = L(m).executeQuery(Z, Le);
      n(18, z = { json: Ie }), n(17, I = void 0);
    } catch (Ie) {
      n(18, z = { text: "" }), n(17, I = Ie);
    }
  }
  const te = _p(N, X4);
  function ue() {
    try {
      s("handleTransform", { query: H });
      const Z = L(m).executeQuery(i, H);
      S([
        {
          op: "replace",
          path: Be(a),
          value: Z
        }
      ]), O();
    } catch (Z) {
      console.error(Z), n(18, z = { text: "" }), n(17, I = Z.toString());
    }
  }
  function q() {
    n(15, D = !D), n(31, Mr.showWizard = D, Mr);
  }
  function re() {
    n(16, R = !R), n(31, Mr.showOriginal = R, Mr);
  }
  function ie(Z) {
    s("handleChangeQueryLanguage", Z), n(0, m = Z), C(Z);
    const Le = L(m);
    n(13, H = Le.createQuery(l, M)), n(32, J = !1);
  }
  return t.$$set = (Z) => {
    "id" in Z && n(27, o = Z.id), "json" in Z && n(28, l = Z.json), "rootPath" in Z && n(1, a = Z.rootPath), "indentation" in Z && n(2, c = Z.indentation), "escapeControlCharacters" in Z && n(3, u = Z.escapeControlCharacters), "escapeUnicodeCharacters" in Z && n(4, f = Z.escapeUnicodeCharacters), "parser" in Z && n(5, h = Z.parser), "parseMemoizeOne" in Z && n(6, d = Z.parseMemoizeOne), "validationParser" in Z && n(7, p = Z.validationParser), "pathParser" in Z && n(8, g = Z.pathParser), "queryLanguages" in Z && n(9, _ = Z.queryLanguages), "queryLanguageId" in Z && n(0, m = Z.queryLanguageId), "onChangeQueryLanguage" in Z && n(29, C = Z.onChangeQueryLanguage), "onRenderValue" in Z && n(10, v = Z.onRenderValue), "onClassName" in Z && n(11, k = Z.onClassName), "onTransform" in Z && n(30, S = Z.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 268435458 && n(14, i = Ze(l, a)), t.$$.dirty[0] & 16384 && n(19, r = { json: i }), t.$$.dirty[0] & 24576 && te(i, H), t.$$.dirty[0] & 12289 | t.$$.dirty[1] & 3 && (n(
      31,
      Mr[w] = {
        queryOptions: M,
        query: H,
        queryLanguageId: m,
        isManual: J
      },
      Mr
    ), s("store state in memory", w, Mr[w]));
  }, [
    m,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    v,
    k,
    M,
    H,
    i,
    D,
    R,
    I,
    z,
    r,
    L,
    K,
    F,
    ue,
    q,
    re,
    ie,
    o,
    l,
    C,
    S,
    Mr,
    J
  ];
}
class fW extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      uW,
      aW,
      wt,
      {
        id: 27,
        json: 28,
        rootPath: 1,
        indentation: 2,
        escapeControlCharacters: 3,
        escapeUnicodeCharacters: 4,
        parser: 5,
        parseMemoizeOne: 6,
        validationParser: 7,
        pathParser: 8,
        queryLanguages: 9,
        queryLanguageId: 0,
        onChangeQueryLanguage: 29,
        onRenderValue: 10,
        onClassName: 11,
        onTransform: 30
      },
      null,
      [-1, -1]
    );
  }
}
const hW = fW, ho = {};
function $v(t) {
  let e, n, i, r, s, o, l;
  function a(u) {
    t[13](u);
  }
  let c = {
    showChevron: !0,
    items: t[3]
  };
  return t[1] !== void 0 && (c.value = t[1]), s = new cl({ props: c }), yt.push(() => Pr(s, "value", a, t[1])), {
    c() {
      e = j("tr"), n = j("th"), n.textContent = "Property", i = Q(), r = j("td"), me(s.$$.fragment), b(n, "class", "svelte-1y818v2"), b(r, "class", "svelte-1y818v2");
    },
    m(u, f) {
      U(u, e, f), E(e, n), E(e, i), E(e, r), pe(s, r, null), l = !0;
    },
    p(u, f) {
      const h = {};
      f & 8 && (h.items = u[3]), !o && f & 2 && (o = !0, h.value = u[1], Rr(() => o = !1)), s.$set(h);
    },
    i(u) {
      l || (P(s.$$.fragment, u), l = !0);
    },
    o(u) {
      x(s.$$.fragment, u), l = !1;
    },
    d(u) {
      u && V(e), ge(s);
    }
  };
}
function ek(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = we(t[5]), b(e, "class", "jse-error svelte-1y818v2");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, r) {
      r & 32 && ze(n, i[5]);
    },
    d(i) {
      i && V(e);
    }
  };
}
function dW(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z, L;
  n = new ab({
    props: {
      title: t[4] ? "Sort array items" : "Sort object keys"
    }
  });
  let K = t[4] && (t[3].length > 1 || t[1] === void 0) && $v(t);
  function F(ue) {
    t[14](ue);
  }
  let N = {
    showChevron: !0,
    clearable: !1,
    items: t[6]
  };
  t[2] !== void 0 && (N.value = t[2]), S = new cl({ props: N }), yt.push(() => Pr(S, "value", F, t[2]));
  let te = t[5] && ek(t);
  return {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), r = j("div"), s = j("table"), o = j("colgroup"), o.innerHTML = `<col width="25%"/> 
        <col width="75%"/>`, l = Q(), a = j("tbody"), c = j("tr"), u = j("th"), u.textContent = "Path", f = Q(), h = j("td"), d = j("input"), g = Q(), K && K.c(), _ = Q(), m = j("tr"), C = j("th"), C.textContent = "Direction", v = Q(), k = j("td"), me(S.$$.fragment), w = Q(), A = j("div"), te && te.c(), D = Q(), R = j("div"), M = j("button"), H = we("Sort"), b(u, "class", "svelte-1y818v2"), b(d, "class", "jse-path svelte-1y818v2"), b(d, "type", "text"), d.readOnly = !0, b(d, "title", "Selected path"), d.value = p = Pt(t[0]) ? "(whole document)" : wr(qi(t[0])), b(h, "class", "svelte-1y818v2"), b(C, "class", "svelte-1y818v2"), b(k, "class", "svelte-1y818v2"), b(s, "class", "svelte-1y818v2"), b(A, "class", "jse-space svelte-1y818v2"), b(M, "type", "button"), b(M, "class", "jse-primary svelte-1y818v2"), M.disabled = J = t[4] ? !t[1] : !1, b(R, "class", "jse-actions svelte-1y818v2"), b(r, "class", "jse-modal-contents svelte-1y818v2"), b(e, "class", "jse-modal jse-sort svelte-1y818v2");
    },
    m(ue, q) {
      U(ue, e, q), pe(n, e, null), E(e, i), E(e, r), E(r, s), E(s, o), E(s, l), E(s, a), E(a, c), E(c, u), E(c, f), E(c, h), E(h, d), E(a, g), K && K.m(a, null), E(a, _), E(a, m), E(m, C), E(m, v), E(m, k), pe(S, k, null), E(r, w), E(r, A), te && te.m(A, null), E(r, D), E(r, R), E(R, M), E(M, H), I = !0, z || (L = [
        se(M, "click", t[7]),
        Wi(pW.call(null, M))
      ], z = !0);
    },
    p(ue, [q]) {
      const re = {};
      q & 16 && (re.title = ue[4] ? "Sort array items" : "Sort object keys"), n.$set(re), (!I || q & 1 && p !== (p = Pt(ue[0]) ? "(whole document)" : wr(qi(ue[0]))) && d.value !== p) && (d.value = p), ue[4] && (ue[3].length > 1 || ue[1] === void 0) ? K ? (K.p(ue, q), q & 26 && P(K, 1)) : (K = $v(ue), K.c(), P(K, 1), K.m(a, _)) : K && (Se(), x(K, 1, 1, () => {
        K = null;
      }), Ee());
      const ie = {};
      !O && q & 4 && (O = !0, ie.value = ue[2], Rr(() => O = !1)), S.$set(ie), ue[5] ? te ? te.p(ue, q) : (te = ek(ue), te.c(), te.m(A, null)) : te && (te.d(1), te = null), (!I || q & 18 && J !== (J = ue[4] ? !ue[1] : !1)) && (M.disabled = J);
    },
    i(ue) {
      I || (P(n.$$.fragment, ue), P(K), P(S.$$.fragment, ue), I = !0);
    },
    o(ue) {
      x(n.$$.fragment, ue), x(K), x(S.$$.fragment, ue), I = !1;
    },
    d(ue) {
      ue && V(e), ge(n), K && K.d(), ge(S), te && te.d(), z = !1, ht(L);
    }
  };
}
function pW(t) {
  t.focus();
}
function gW(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:SortModal");
  let { id: l } = e, { json: a } = e, { rootPath: c } = e, { onSort: u } = e;
  const { close: f } = gi("simple-modal"), h = `${l}:${Be(c)}`, d = Ze(a, c), p = { value: 1, label: "ascending" }, _ = [p, { value: -1, label: "descending" }];
  let m = ho[h] && ho[h].selectedProperty || void 0, C = ho[h] && ho[h].selectedDirection || p, v;
  function k() {
    try {
      n(5, v = void 0);
      const w = m == null ? void 0 : m.value, A = C == null ? void 0 : C.value, D = Q6(a, c, w, A);
      u({
        operations: D,
        rootPath: c,
        itemPath: w,
        direction: A
      }), f();
    } catch (w) {
      n(5, v = w.toString());
    }
  }
  function S(w) {
    m = w, n(1, m), n(3, s), n(12, r), n(4, i);
  }
  function O(w) {
    C = w, n(2, C);
  }
  return t.$$set = (w) => {
    "id" in w && n(8, l = w.id), "json" in w && n(9, a = w.json), "rootPath" in w && n(0, c = w.rootPath), "onSort" in w && n(10, u = w.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 16 && n(12, r = i ? $m(d) : void 0), t.$$.dirty & 4096 && n(3, s = r ? r.map(na) : void 0), t.$$.dirty & 10 && m === void 0 && s && s.length === 1 && n(1, m = s[0]), t.$$.dirty & 2054 && (n(11, ho[h] = { selectedProperty: m, selectedDirection: C }, ho), o("store state in memory", h, ho[h]));
  }, n(4, i = Array.isArray(d)), [
    c,
    m,
    C,
    s,
    i,
    v,
    _,
    k,
    l,
    a,
    u,
    ho,
    r,
    S,
    O
  ];
}
class mW extends Qe {
  constructor(e) {
    super(), Xe(this, e, gW, dW, wt, { id: 8, json: 9, rootPath: 0, onSort: 10 });
  }
}
const bW = mW;
function is() {
}
function Of(t, e = 1e3) {
  if (t < 0.9 * e)
    return t.toFixed() + " B";
  const n = t / e;
  if (n < 0.9 * e)
    return n.toFixed(1) + " KB";
  const i = n / e;
  if (i < 0.9 * e)
    return i.toFixed(1) + " MB";
  const r = i / e;
  return r < 0.9 * e ? r.toFixed(1) + " GB" : (r / e).toFixed(1) + " TB";
}
function _W(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function yW(t, e, n) {
  let i, { readOnly: r = !1 } = e, { onFormat: s } = e, { onCompact: o } = e, { onSort: l } = e, { onTransform: a } = e, { onToggleSearch: c } = e, { onUndo: u } = e, { onRedo: f } = e, { canUndo: h } = e, { canRedo: d } = e, { canFormat: p } = e, { canCompact: g } = e, { canSort: _ } = e, { canTransform: m } = e, { onRenderMenu: C = hn } = e, v;
  return t.$$set = (k) => {
    "readOnly" in k && n(1, r = k.readOnly), "onFormat" in k && n(2, s = k.onFormat), "onCompact" in k && n(3, o = k.onCompact), "onSort" in k && n(4, l = k.onSort), "onTransform" in k && n(5, a = k.onTransform), "onToggleSearch" in k && n(6, c = k.onToggleSearch), "onUndo" in k && n(7, u = k.onUndo), "onRedo" in k && n(8, f = k.onRedo), "canUndo" in k && n(9, h = k.canUndo), "canRedo" in k && n(10, d = k.canRedo), "canFormat" in k && n(11, p = k.canFormat), "canCompact" in k && n(12, g = k.canCompact), "canSort" in k && n(13, _ = k.canSort), "canTransform" in k && n(14, m = k.canTransform), "onRenderMenu" in k && n(15, C = k.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 32766 && n(16, v = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: iH,
        title: "Format JSON: add proper indentation and new lines (Ctrl+I)",
        className: "jse-format",
        onClick: s,
        disabled: r || !p
      },
      {
        type: "button",
        icon: rH,
        title: "Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",
        className: "jse-compact",
        onClick: o,
        disabled: r || !g
      },
      { type: "separator" },
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: l,
        disabled: r || !_
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: a,
        disabled: r || !m
      },
      {
        type: "button",
        icon: nb,
        title: "Search (Ctrl+F)",
        className: "jse-search",
        onClick: c
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: u,
        disabled: !h
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: f,
        disabled: !d
      },
      { type: "space" }
    ]), t.$$.dirty & 98304 && n(0, i = C("text", v) || v);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v
  ];
}
class wW extends Qe {
  constructor(e) {
    super(), Xe(this, e, yW, _W, wt, {
      readOnly: 1,
      onFormat: 2,
      onCompact: 3,
      onSort: 4,
      onTransform: 5,
      onToggleSearch: 6,
      onUndo: 7,
      onRedo: 8,
      canUndo: 9,
      canRedo: 10,
      canFormat: 11,
      canCompact: 12,
      canSort: 13,
      canTransform: 14,
      onRenderMenu: 15
    });
  }
}
const vW = wW;
class Ht {
  constructor() {
  }
  lineAt(e) {
    if (e < 0 || e > this.length)
      throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);
    return this.lineInner(e, !1, 1, 0);
  }
  line(e) {
    if (e < 1 || e > this.lines)
      throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);
    return this.lineInner(e, !0, 1, 0);
  }
  replace(e, n, i) {
    let r = [];
    return this.decompose(0, e, r, 2), i.length && i.decompose(0, i.length, r, 3), this.decompose(n, this.length, r, 1), rs.from(r, this.length - (n - e) + i.length);
  }
  append(e) {
    return this.replace(this.length, this.length, e);
  }
  slice(e, n = this.length) {
    let i = [];
    return this.decompose(e, n, i, 0), rs.from(i, n - e);
  }
  eq(e) {
    if (e == this)
      return !0;
    if (e.length != this.length || e.lines != this.lines)
      return !1;
    let n = this.scanIdentical(e, 1), i = this.length - this.scanIdentical(e, -1), r = new zc(this), s = new zc(e);
    for (let o = n, l = n; ; ) {
      if (r.next(o), s.next(o), o = 0, r.lineBreak != s.lineBreak || r.done != s.done || r.value != s.value)
        return !1;
      if (l += r.value.length, r.done || l >= i)
        return !0;
    }
  }
  iter(e = 1) {
    return new zc(this, e);
  }
  iterRange(e, n = this.length) {
    return new s8(this, e, n);
  }
  iterLines(e, n) {
    let i;
    if (e == null)
      i = this.iter();
    else {
      n == null && (n = this.lines + 1);
      let r = this.line(e).from;
      i = this.iterRange(r, Math.max(r, n == this.lines + 1 ? this.length : n <= 1 ? 0 : this.line(n - 1).to));
    }
    return new o8(i);
  }
  toString() {
    return this.sliceString(0);
  }
  toJSON() {
    let e = [];
    return this.flatten(e), e;
  }
  static of(e) {
    if (e.length == 0)
      throw new RangeError("A document must have at least one line");
    return e.length == 1 && !e[0] ? Ht.empty : e.length <= 32 ? new Fn(e) : rs.from(Fn.split(e, []));
  }
}
class Fn extends Ht {
  constructor(e, n = kW(e)) {
    super(), this.text = e, this.length = n;
  }
  get lines() {
    return this.text.length;
  }
  get children() {
    return null;
  }
  lineInner(e, n, i, r) {
    for (let s = 0; ; s++) {
      let o = this.text[s], l = r + o.length;
      if ((n ? i : l) >= e)
        return new CW(r, l, i, o);
      r = l + 1, i++;
    }
  }
  decompose(e, n, i, r) {
    let s = e <= 0 && n >= this.length ? this : new Fn(tk(this.text, e, n), Math.min(n, this.length) - Math.max(0, e));
    if (r & 1) {
      let o = i.pop(), l = gh(s.text, o.text.slice(), 0, s.length);
      if (l.length <= 32)
        i.push(new Fn(l, o.length + s.length));
      else {
        let a = l.length >> 1;
        i.push(new Fn(l.slice(0, a)), new Fn(l.slice(a)));
      }
    } else
      i.push(s);
  }
  replace(e, n, i) {
    if (!(i instanceof Fn))
      return super.replace(e, n, i);
    let r = gh(this.text, gh(i.text, tk(this.text, 0, e)), n), s = this.length + i.length - (n - e);
    return r.length <= 32 ? new Fn(r, s) : rs.from(Fn.split(r, []), s);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let s = 0, o = 0; s <= n && o < this.text.length; o++) {
      let l = this.text[o], a = s + l.length;
      s > e && o && (r += i), e < a && n > s && (r += l.slice(Math.max(0, e - s), n - s)), s = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.text)
      e.push(n);
  }
  scanIdentical() {
    return 0;
  }
  static split(e, n) {
    let i = [], r = -1;
    for (let s of e)
      i.push(s), r += s.length + 1, i.length == 32 && (n.push(new Fn(i, r)), i = [], r = -1);
    return r > -1 && n.push(new Fn(i, r)), n;
  }
}
class rs extends Ht {
  constructor(e, n) {
    super(), this.children = e, this.length = n, this.lines = 0;
    for (let i of e)
      this.lines += i.lines;
  }
  lineInner(e, n, i, r) {
    for (let s = 0; ; s++) {
      let o = this.children[s], l = r + o.length, a = i + o.lines - 1;
      if ((n ? a : l) >= e)
        return o.lineInner(e, n, i, r);
      r = l + 1, i = a + 1;
    }
  }
  decompose(e, n, i, r) {
    for (let s = 0, o = 0; o <= n && s < this.children.length; s++) {
      let l = this.children[s], a = o + l.length;
      if (e <= a && n >= o) {
        let c = r & ((o <= e ? 1 : 0) | (a >= n ? 2 : 0));
        o >= e && a <= n && !c ? i.push(l) : l.decompose(e - o, n - o, i, c);
      }
      o = a + 1;
    }
  }
  replace(e, n, i) {
    if (i.lines < this.lines)
      for (let r = 0, s = 0; r < this.children.length; r++) {
        let o = this.children[r], l = s + o.length;
        if (e >= s && n <= l) {
          let a = o.replace(e - s, n - s, i), c = this.lines - o.lines + a.lines;
          if (a.lines < c >> 5 - 1 && a.lines > c >> 5 + 1) {
            let u = this.children.slice();
            return u[r] = a, new rs(u, this.length - (n - e) + i.length);
          }
          return super.replace(s, l, a);
        }
        s = l + 1;
      }
    return super.replace(e, n, i);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let s = 0, o = 0; s < this.children.length && o <= n; s++) {
      let l = this.children[s], a = o + l.length;
      o > e && s && (r += i), e < a && n > o && (r += l.sliceString(e - o, n - o, i)), o = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.children)
      n.flatten(e);
  }
  scanIdentical(e, n) {
    if (!(e instanceof rs))
      return 0;
    let i = 0, [r, s, o, l] = n > 0 ? [0, 0, this.children.length, e.children.length] : [this.children.length - 1, e.children.length - 1, -1, -1];
    for (; ; r += n, s += n) {
      if (r == o || s == l)
        return i;
      let a = this.children[r], c = e.children[s];
      if (a != c)
        return i + a.scanIdentical(c, n);
      i += a.length + 1;
    }
  }
  static from(e, n = e.reduce((i, r) => i + r.length + 1, -1)) {
    let i = 0;
    for (let d of e)
      i += d.lines;
    if (i < 32) {
      let d = [];
      for (let p of e)
        p.flatten(d);
      return new Fn(d, n);
    }
    let r = Math.max(32, i >> 5), s = r << 1, o = r >> 1, l = [], a = 0, c = -1, u = [];
    function f(d) {
      let p;
      if (d.lines > s && d instanceof rs)
        for (let g of d.children)
          f(g);
      else
        d.lines > o && (a > o || !a) ? (h(), l.push(d)) : d instanceof Fn && a && (p = u[u.length - 1]) instanceof Fn && d.lines + p.lines <= 32 ? (a += d.lines, c += d.length + 1, u[u.length - 1] = new Fn(p.text.concat(d.text), p.length + 1 + d.length)) : (a + d.lines > r && h(), a += d.lines, c += d.length + 1, u.push(d));
    }
    function h() {
      a != 0 && (l.push(u.length == 1 ? u[0] : rs.from(u, c)), c = -1, a = u.length = 0);
    }
    for (let d of e)
      f(d);
    return h(), l.length == 1 ? l[0] : new rs(l, n);
  }
}
Ht.empty = /* @__PURE__ */ new Fn([""], 0);
function kW(t) {
  let e = -1;
  for (let n of t)
    e += n.length + 1;
  return e;
}
function gh(t, e, n = 0, i = 1e9) {
  for (let r = 0, s = 0, o = !0; s < t.length && r <= i; s++) {
    let l = t[s], a = r + l.length;
    a >= n && (a > i && (l = l.slice(0, i - r)), r < n && (l = l.slice(n - r)), o ? (e[e.length - 1] += l, o = !1) : e.push(l)), r = a + 1;
  }
  return e;
}
function tk(t, e, n) {
  return gh(t, [""], e, n);
}
class zc {
  constructor(e, n = 1) {
    this.dir = n, this.done = !1, this.lineBreak = !1, this.value = "", this.nodes = [e], this.offsets = [n > 0 ? 1 : (e instanceof Fn ? e.text.length : e.children.length) << 1];
  }
  nextInner(e, n) {
    for (this.done = this.lineBreak = !1; ; ) {
      let i = this.nodes.length - 1, r = this.nodes[i], s = this.offsets[i], o = s >> 1, l = r instanceof Fn ? r.text.length : r.children.length;
      if (o == (n > 0 ? l : 0)) {
        if (i == 0)
          return this.done = !0, this.value = "", this;
        n > 0 && this.offsets[i - 1]++, this.nodes.pop(), this.offsets.pop();
      } else if ((s & 1) == (n > 0 ? 0 : 1)) {
        if (this.offsets[i] += n, e == 0)
          return this.lineBreak = !0, this.value = `
`, this;
        e--;
      } else if (r instanceof Fn) {
        let a = r.text[o + (n < 0 ? -1 : 0)];
        if (this.offsets[i] += n, a.length > Math.max(0, e))
          return this.value = e == 0 ? a : n > 0 ? a.slice(e) : a.slice(0, a.length - e), this;
        e -= a.length;
      } else {
        let a = r.children[o + (n < 0 ? -1 : 0)];
        e > a.length ? (e -= a.length, this.offsets[i] += n) : (n < 0 && this.offsets[i]--, this.nodes.push(a), this.offsets.push(n > 0 ? 1 : (a instanceof Fn ? a.text.length : a.children.length) << 1));
      }
    }
  }
  next(e = 0) {
    return e < 0 && (this.nextInner(-e, -this.dir), e = this.value.length), this.nextInner(e, this.dir);
  }
}
class s8 {
  constructor(e, n, i) {
    this.value = "", this.done = !1, this.cursor = new zc(e, n > i ? -1 : 1), this.pos = n > i ? e.length : 0, this.from = Math.min(n, i), this.to = Math.max(n, i);
  }
  nextInner(e, n) {
    if (n < 0 ? this.pos <= this.from : this.pos >= this.to)
      return this.value = "", this.done = !0, this;
    e += Math.max(0, n < 0 ? this.pos - this.to : this.from - this.pos);
    let i = n < 0 ? this.pos - this.from : this.to - this.pos;
    e > i && (e = i), i -= e;
    let { value: r } = this.cursor.next(e);
    return this.pos += (r.length + e) * n, this.value = r.length <= i ? r : n < 0 ? r.slice(r.length - i) : r.slice(0, i), this.done = !this.value, this;
  }
  next(e = 0) {
    return e < 0 ? e = Math.max(e, this.from - this.pos) : e > 0 && (e = Math.min(e, this.to - this.pos)), this.nextInner(e, this.cursor.dir);
  }
  get lineBreak() {
    return this.cursor.lineBreak && this.value != "";
  }
}
class o8 {
  constructor(e) {
    this.inner = e, this.afterBreak = !0, this.value = "", this.done = !1;
  }
  next(e = 0) {
    let { done: n, lineBreak: i, value: r } = this.inner.next(e);
    return n ? (this.done = !0, this.value = "") : i ? this.afterBreak ? this.value = "" : (this.afterBreak = !0, this.next()) : (this.value = r, this.afterBreak = !1), this;
  }
  get lineBreak() {
    return !1;
  }
}
typeof Symbol < "u" && (Ht.prototype[Symbol.iterator] = function() {
  return this.iter();
}, zc.prototype[Symbol.iterator] = s8.prototype[Symbol.iterator] = o8.prototype[Symbol.iterator] = function() {
  return this;
});
class CW {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.number = i, this.text = r;
  }
  get length() {
    return this.to - this.from;
  }
}
let ma = /* @__PURE__ */ "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t) => t ? parseInt(t, 36) : 1);
for (let t = 1; t < ma.length; t++)
  ma[t] += ma[t - 1];
function SW(t) {
  for (let e = 1; e < ma.length; e += 2)
    if (ma[e] > t)
      return ma[e - 1] <= t;
  return !1;
}
function nk(t) {
  return t >= 127462 && t <= 127487;
}
const ik = 8205;
function ji(t, e, n = !0, i = !0) {
  return (n ? l8 : EW)(t, e, i);
}
function l8(t, e, n) {
  if (e == t.length)
    return e;
  e && a8(t.charCodeAt(e)) && c8(t.charCodeAt(e - 1)) && e--;
  let i = ki(t, e);
  for (e += Zi(i); e < t.length; ) {
    let r = ki(t, e);
    if (i == ik || r == ik || n && SW(r))
      e += Zi(r), i = r;
    else if (nk(r)) {
      let s = 0, o = e - 2;
      for (; o >= 0 && nk(ki(t, o)); )
        s++, o -= 2;
      if (s % 2 == 0)
        break;
      e += 2;
    } else
      break;
  }
  return e;
}
function EW(t, e, n) {
  for (; e > 0; ) {
    let i = l8(t, e - 2, n);
    if (i < e)
      return i;
    e--;
  }
  return 0;
}
function a8(t) {
  return t >= 56320 && t < 57344;
}
function c8(t) {
  return t >= 55296 && t < 56320;
}
function ki(t, e) {
  let n = t.charCodeAt(e);
  if (!c8(n) || e + 1 == t.length)
    return n;
  let i = t.charCodeAt(e + 1);
  return a8(i) ? (n - 55296 << 10) + (i - 56320) + 65536 : n;
}
function mb(t) {
  return t <= 65535 ? String.fromCharCode(t) : (t -= 65536, String.fromCharCode((t >> 10) + 55296, (t & 1023) + 56320));
}
function Zi(t) {
  return t < 65536 ? 1 : 2;
}
const l1 = /\r\n?|\n/;
var Ni = /* @__PURE__ */ function(t) {
  return t[t.Simple = 0] = "Simple", t[t.TrackDel = 1] = "TrackDel", t[t.TrackBefore = 2] = "TrackBefore", t[t.TrackAfter = 3] = "TrackAfter", t;
}(Ni || (Ni = {}));
class hs {
  constructor(e) {
    this.sections = e;
  }
  get length() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2)
      e += this.sections[n];
    return e;
  }
  get newLength() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n + 1];
      e += i < 0 ? this.sections[n] : i;
    }
    return e;
  }
  get empty() {
    return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
  }
  iterGaps(e) {
    for (let n = 0, i = 0, r = 0; n < this.sections.length; ) {
      let s = this.sections[n++], o = this.sections[n++];
      o < 0 ? (e(i, r, s), r += s) : r += o, i += s;
    }
  }
  iterChangedRanges(e, n = !1) {
    a1(this, e, n);
  }
  get invertedDesc() {
    let e = [];
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      r < 0 ? e.push(i, r) : e.push(r, i);
    }
    return new hs(e);
  }
  composeDesc(e) {
    return this.empty ? e : e.empty ? this : u8(this, e);
  }
  mapDesc(e, n = !1) {
    return e.empty ? this : c1(this, e, n);
  }
  mapPos(e, n = -1, i = Ni.Simple) {
    let r = 0, s = 0;
    for (let o = 0; o < this.sections.length; ) {
      let l = this.sections[o++], a = this.sections[o++], c = r + l;
      if (a < 0) {
        if (c > e)
          return s + (e - r);
        s += l;
      } else {
        if (i != Ni.Simple && c >= e && (i == Ni.TrackDel && r < e && c > e || i == Ni.TrackBefore && r < e || i == Ni.TrackAfter && c > e))
          return null;
        if (c > e || c == e && n < 0 && !l)
          return e == r || n < 0 ? s : s + a;
        s += a;
      }
      r = c;
    }
    if (e > r)
      throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);
    return s;
  }
  touchesRange(e, n = e) {
    for (let i = 0, r = 0; i < this.sections.length && r <= n; ) {
      let s = this.sections[i++], o = this.sections[i++], l = r + s;
      if (o >= 0 && r <= n && l >= e)
        return r < e && l > n ? "cover" : !0;
      r = l;
    }
    return !1;
  }
  toString() {
    let e = "";
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      e += (e ? " " : "") + i + (r >= 0 ? ":" + r : "");
    }
    return e;
  }
  toJSON() {
    return this.sections;
  }
  static fromJSON(e) {
    if (!Array.isArray(e) || e.length % 2 || e.some((n) => typeof n != "number"))
      throw new RangeError("Invalid JSON representation of ChangeDesc");
    return new hs(e);
  }
  static create(e) {
    return new hs(e);
  }
}
class $n extends hs {
  constructor(e, n) {
    super(e), this.inserted = n;
  }
  apply(e) {
    if (this.length != e.length)
      throw new RangeError("Applying change set to a document with the wrong length");
    return a1(this, (n, i, r, s, o) => e = e.replace(r, r + (i - n), o), !1), e;
  }
  mapDesc(e, n = !1) {
    return c1(this, e, n, !0);
  }
  invert(e) {
    let n = this.sections.slice(), i = [];
    for (let r = 0, s = 0; r < n.length; r += 2) {
      let o = n[r], l = n[r + 1];
      if (l >= 0) {
        n[r] = l, n[r + 1] = o;
        let a = r >> 1;
        for (; i.length < a; )
          i.push(Ht.empty);
        i.push(o ? e.slice(s, s + o) : Ht.empty);
      }
      s += o;
    }
    return new $n(n, i);
  }
  compose(e) {
    return this.empty ? e : e.empty ? this : u8(this, e, !0);
  }
  map(e, n = !1) {
    return e.empty ? this : c1(this, e, n, !0);
  }
  iterChanges(e, n = !1) {
    a1(this, e, n);
  }
  get desc() {
    return hs.create(this.sections);
  }
  filter(e) {
    let n = [], i = [], r = [], s = new uu(this);
    e:
      for (let o = 0, l = 0; ; ) {
        let a = o == e.length ? 1e9 : e[o++];
        for (; l < a || l == a && s.len == 0; ) {
          if (s.done)
            break e;
          let u = Math.min(s.len, a - l);
          Oi(r, u, -1);
          let f = s.ins == -1 ? -1 : s.off == 0 ? s.ins : 0;
          Oi(n, u, f), f > 0 && Co(i, n, s.text), s.forward(u), l += u;
        }
        let c = e[o++];
        for (; l < c; ) {
          if (s.done)
            break e;
          let u = Math.min(s.len, c - l);
          Oi(n, u, -1), Oi(r, u, s.ins == -1 ? -1 : s.off == 0 ? s.ins : 0), s.forward(u), l += u;
        }
      }
    return {
      changes: new $n(n, i),
      filtered: hs.create(r)
    };
  }
  toJSON() {
    let e = [];
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n], r = this.sections[n + 1];
      r < 0 ? e.push(i) : r == 0 ? e.push([i]) : e.push([i].concat(this.inserted[n >> 1].toJSON()));
    }
    return e;
  }
  static of(e, n, i) {
    let r = [], s = [], o = 0, l = null;
    function a(u = !1) {
      if (!u && !r.length)
        return;
      o < n && Oi(r, n - o, -1);
      let f = new $n(r, s);
      l = l ? l.compose(f.map(l)) : f, r = [], s = [], o = 0;
    }
    function c(u) {
      if (Array.isArray(u))
        for (let f of u)
          c(f);
      else if (u instanceof $n) {
        if (u.length != n)
          throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);
        a(), l = l ? l.compose(u.map(l)) : u;
      } else {
        let { from: f, to: h = f, insert: d } = u;
        if (f > h || f < 0 || h > n)
          throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);
        let p = d ? typeof d == "string" ? Ht.of(d.split(i || l1)) : d : Ht.empty, g = p.length;
        if (f == h && g == 0)
          return;
        f < o && a(), f > o && Oi(r, f - o, -1), Oi(r, h - f, g), Co(s, r, p), o = h;
      }
    }
    return c(e), a(!l), l;
  }
  static empty(e) {
    return new $n(e ? [e, -1] : [], []);
  }
  static fromJSON(e) {
    if (!Array.isArray(e))
      throw new RangeError("Invalid JSON representation of ChangeSet");
    let n = [], i = [];
    for (let r = 0; r < e.length; r++) {
      let s = e[r];
      if (typeof s == "number")
        n.push(s, -1);
      else {
        if (!Array.isArray(s) || typeof s[0] != "number" || s.some((o, l) => l && typeof o != "string"))
          throw new RangeError("Invalid JSON representation of ChangeSet");
        if (s.length == 1)
          n.push(s[0], 0);
        else {
          for (; i.length < r; )
            i.push(Ht.empty);
          i[r] = Ht.of(s.slice(1)), n.push(s[0], i[r].length);
        }
      }
    }
    return new $n(n, i);
  }
  static createSet(e, n) {
    return new $n(e, n);
  }
}
function Oi(t, e, n, i = !1) {
  if (e == 0 && n <= 0)
    return;
  let r = t.length - 2;
  r >= 0 && n <= 0 && n == t[r + 1] ? t[r] += e : e == 0 && t[r] == 0 ? t[r + 1] += n : i ? (t[r] += e, t[r + 1] += n) : t.push(e, n);
}
function Co(t, e, n) {
  if (n.length == 0)
    return;
  let i = e.length - 2 >> 1;
  if (i < t.length)
    t[t.length - 1] = t[t.length - 1].append(n);
  else {
    for (; t.length < i; )
      t.push(Ht.empty);
    t.push(n);
  }
}
function a1(t, e, n) {
  let i = t.inserted;
  for (let r = 0, s = 0, o = 0; o < t.sections.length; ) {
    let l = t.sections[o++], a = t.sections[o++];
    if (a < 0)
      r += l, s += l;
    else {
      let c = r, u = s, f = Ht.empty;
      for (; c += l, u += a, a && i && (f = f.append(i[o - 2 >> 1])), !(n || o == t.sections.length || t.sections[o + 1] < 0); )
        l = t.sections[o++], a = t.sections[o++];
      e(r, c, s, u, f), r = c, s = u;
    }
  }
}
function c1(t, e, n, i = !1) {
  let r = [], s = i ? [] : null, o = new uu(t), l = new uu(e);
  for (let a = -1; ; )
    if (o.ins == -1 && l.ins == -1) {
      let c = Math.min(o.len, l.len);
      Oi(r, c, -1), o.forward(c), l.forward(c);
    } else if (l.ins >= 0 && (o.ins < 0 || a == o.i || o.off == 0 && (l.len < o.len || l.len == o.len && !n))) {
      let c = l.len;
      for (Oi(r, l.ins, -1); c; ) {
        let u = Math.min(o.len, c);
        o.ins >= 0 && a < o.i && o.len <= u && (Oi(r, 0, o.ins), s && Co(s, r, o.text), a = o.i), o.forward(u), c -= u;
      }
      l.next();
    } else if (o.ins >= 0) {
      let c = 0, u = o.len;
      for (; u; )
        if (l.ins == -1) {
          let f = Math.min(u, l.len);
          c += f, u -= f, l.forward(f);
        } else if (l.ins == 0 && l.len < u)
          u -= l.len, l.next();
        else
          break;
      Oi(r, c, a < o.i ? o.ins : 0), s && a < o.i && Co(s, r, o.text), a = o.i, o.forward(o.len - u);
    } else {
      if (o.done && l.done)
        return s ? $n.createSet(r, s) : hs.create(r);
      throw new Error("Mismatched change set lengths");
    }
}
function u8(t, e, n = !1) {
  let i = [], r = n ? [] : null, s = new uu(t), o = new uu(e);
  for (let l = !1; ; ) {
    if (s.done && o.done)
      return r ? $n.createSet(i, r) : hs.create(i);
    if (s.ins == 0)
      Oi(i, s.len, 0, l), s.next();
    else if (o.len == 0 && !o.done)
      Oi(i, 0, o.ins, l), r && Co(r, i, o.text), o.next();
    else {
      if (s.done || o.done)
        throw new Error("Mismatched change set lengths");
      {
        let a = Math.min(s.len2, o.len), c = i.length;
        if (s.ins == -1) {
          let u = o.ins == -1 ? -1 : o.off ? 0 : o.ins;
          Oi(i, a, u, l), r && u && Co(r, i, o.text);
        } else
          o.ins == -1 ? (Oi(i, s.off ? 0 : s.len, a, l), r && Co(r, i, s.textBit(a))) : (Oi(i, s.off ? 0 : s.len, o.off ? 0 : o.ins, l), r && !o.off && Co(r, i, o.text));
        l = (s.ins > a || o.ins >= 0 && o.len > a) && (l || i.length > c), s.forward2(a), o.forward(a);
      }
    }
  }
}
class uu {
  constructor(e) {
    this.set = e, this.i = 0, this.next();
  }
  next() {
    let { sections: e } = this.set;
    this.i < e.length ? (this.len = e[this.i++], this.ins = e[this.i++]) : (this.len = 0, this.ins = -2), this.off = 0;
  }
  get done() {
    return this.ins == -2;
  }
  get len2() {
    return this.ins < 0 ? this.len : this.ins;
  }
  get text() {
    let { inserted: e } = this.set, n = this.i - 2 >> 1;
    return n >= e.length ? Ht.empty : e[n];
  }
  textBit(e) {
    let { inserted: n } = this.set, i = this.i - 2 >> 1;
    return i >= n.length && !e ? Ht.empty : n[i].slice(this.off, e == null ? void 0 : this.off + e);
  }
  forward(e) {
    e == this.len ? this.next() : (this.len -= e, this.off += e);
  }
  forward2(e) {
    this.ins == -1 ? this.forward(e) : e == this.ins ? this.next() : (this.ins -= e, this.off += e);
  }
}
class dl {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.flags = i;
  }
  get anchor() {
    return this.flags & 16 ? this.to : this.from;
  }
  get head() {
    return this.flags & 16 ? this.from : this.to;
  }
  get empty() {
    return this.from == this.to;
  }
  get assoc() {
    return this.flags & 4 ? -1 : this.flags & 8 ? 1 : 0;
  }
  get bidiLevel() {
    let e = this.flags & 3;
    return e == 3 ? null : e;
  }
  get goalColumn() {
    let e = this.flags >> 5;
    return e == 33554431 ? void 0 : e;
  }
  map(e, n = -1) {
    let i, r;
    return this.empty ? i = r = e.mapPos(this.from, n) : (i = e.mapPos(this.from, 1), r = e.mapPos(this.to, -1)), i == this.from && r == this.to ? this : new dl(i, r, this.flags);
  }
  extend(e, n = e) {
    if (e <= this.anchor && n >= this.anchor)
      return Pe.range(e, n);
    let i = Math.abs(e - this.anchor) > Math.abs(n - this.anchor) ? e : n;
    return Pe.range(this.anchor, i);
  }
  eq(e) {
    return this.anchor == e.anchor && this.head == e.head;
  }
  toJSON() {
    return { anchor: this.anchor, head: this.head };
  }
  static fromJSON(e) {
    if (!e || typeof e.anchor != "number" || typeof e.head != "number")
      throw new RangeError("Invalid JSON representation for SelectionRange");
    return Pe.range(e.anchor, e.head);
  }
  static create(e, n, i) {
    return new dl(e, n, i);
  }
}
class Pe {
  constructor(e, n) {
    this.ranges = e, this.mainIndex = n;
  }
  map(e, n = -1) {
    return e.empty ? this : Pe.create(this.ranges.map((i) => i.map(e, n)), this.mainIndex);
  }
  eq(e) {
    if (this.ranges.length != e.ranges.length || this.mainIndex != e.mainIndex)
      return !1;
    for (let n = 0; n < this.ranges.length; n++)
      if (!this.ranges[n].eq(e.ranges[n]))
        return !1;
    return !0;
  }
  get main() {
    return this.ranges[this.mainIndex];
  }
  asSingle() {
    return this.ranges.length == 1 ? this : new Pe([this.main], 0);
  }
  addRange(e, n = !0) {
    return Pe.create([e].concat(this.ranges), n ? 0 : this.mainIndex + 1);
  }
  replaceRange(e, n = this.mainIndex) {
    let i = this.ranges.slice();
    return i[n] = e, Pe.create(i, this.mainIndex);
  }
  toJSON() {
    return { ranges: this.ranges.map((e) => e.toJSON()), main: this.mainIndex };
  }
  static fromJSON(e) {
    if (!e || !Array.isArray(e.ranges) || typeof e.main != "number" || e.main >= e.ranges.length)
      throw new RangeError("Invalid JSON representation for EditorSelection");
    return new Pe(e.ranges.map((n) => dl.fromJSON(n)), e.main);
  }
  static single(e, n = e) {
    return new Pe([Pe.range(e, n)], 0);
  }
  static create(e, n = 0) {
    if (e.length == 0)
      throw new RangeError("A selection needs at least one range");
    for (let i = 0, r = 0; r < e.length; r++) {
      let s = e[r];
      if (s.empty ? s.from <= i : s.from < i)
        return Pe.normalized(e.slice(), n);
      i = s.to;
    }
    return new Pe(e, n);
  }
  static cursor(e, n = 0, i, r) {
    return dl.create(e, e, (n == 0 ? 0 : n < 0 ? 4 : 8) | (i == null ? 3 : Math.min(2, i)) | (r ?? 33554431) << 5);
  }
  static range(e, n, i) {
    let r = (i ?? 33554431) << 5;
    return n < e ? dl.create(n, e, 16 | r | 8) : dl.create(e, n, r | (n > e ? 4 : 0));
  }
  static normalized(e, n = 0) {
    let i = e[n];
    e.sort((r, s) => r.from - s.from), n = e.indexOf(i);
    for (let r = 1; r < e.length; r++) {
      let s = e[r], o = e[r - 1];
      if (s.empty ? s.from <= o.to : s.from < o.to) {
        let l = o.from, a = Math.max(s.to, o.to);
        r <= n && n--, e.splice(--r, 2, s.anchor > s.head ? Pe.range(a, l) : Pe.range(l, a));
      }
    }
    return new Pe(e, n);
  }
}
function f8(t, e) {
  for (let n of t.ranges)
    if (n.to > e)
      throw new RangeError("Selection points outside of document");
}
let bb = 0;
class nt {
  constructor(e, n, i, r, s) {
    this.combine = e, this.compareInput = n, this.compare = i, this.isStatic = r, this.id = bb++, this.default = e([]), this.extensions = typeof s == "function" ? s(this) : s;
  }
  static define(e = {}) {
    return new nt(e.combine || ((n) => n), e.compareInput || ((n, i) => n === i), e.compare || (e.combine ? (n, i) => n === i : _b), !!e.static, e.enables);
  }
  of(e) {
    return new mh([], this, 0, e);
  }
  compute(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new mh(e, this, 1, n);
  }
  computeN(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new mh(e, this, 2, n);
  }
  from(e, n) {
    return n || (n = (i) => i), this.compute([e], (i) => n(i.field(e)));
  }
}
function _b(t, e) {
  return t == e || t.length == e.length && t.every((n, i) => n === e[i]);
}
class mh {
  constructor(e, n, i, r) {
    this.dependencies = e, this.facet = n, this.type = i, this.value = r, this.id = bb++;
  }
  dynamicSlot(e) {
    var n;
    let i = this.value, r = this.facet.compareInput, s = this.id, o = e[s] >> 1, l = this.type == 2, a = !1, c = !1, u = [];
    for (let f of this.dependencies)
      f == "doc" ? a = !0 : f == "selection" ? c = !0 : ((n = e[f.id]) !== null && n !== void 0 ? n : 1) & 1 || u.push(e[f.id]);
    return {
      create(f) {
        return f.values[o] = i(f), 1;
      },
      update(f, h) {
        if (a && h.docChanged || c && (h.docChanged || h.selection) || u1(f, u)) {
          let d = i(f);
          if (l ? !rk(d, f.values[o], r) : !r(d, f.values[o]))
            return f.values[o] = d, 1;
        }
        return 0;
      },
      reconfigure: (f, h) => {
        let d, p = h.config.address[s];
        if (p != null) {
          let g = rd(h, p);
          if (this.dependencies.every((_) => _ instanceof nt ? h.facet(_) === f.facet(_) : _ instanceof ri ? h.field(_, !1) == f.field(_, !1) : !0) || (l ? rk(d = i(f), g, r) : r(d = i(f), g)))
            return f.values[o] = g, 0;
        } else
          d = i(f);
        return f.values[o] = d, 1;
      }
    };
  }
}
function rk(t, e, n) {
  if (t.length != e.length)
    return !1;
  for (let i = 0; i < t.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function u1(t, e) {
  let n = !1;
  for (let i of e)
    Vc(t, i) & 1 && (n = !0);
  return n;
}
function AW(t, e, n) {
  let i = n.map((a) => t[a.id]), r = n.map((a) => a.type), s = i.filter((a) => !(a & 1)), o = t[e.id] >> 1;
  function l(a) {
    let c = [];
    for (let u = 0; u < i.length; u++) {
      let f = rd(a, i[u]);
      if (r[u] == 2)
        for (let h of f)
          c.push(h);
      else
        c.push(f);
    }
    return e.combine(c);
  }
  return {
    create(a) {
      for (let c of i)
        Vc(a, c);
      return a.values[o] = l(a), 1;
    },
    update(a, c) {
      if (!u1(a, s))
        return 0;
      let u = l(a);
      return e.compare(u, a.values[o]) ? 0 : (a.values[o] = u, 1);
    },
    reconfigure(a, c) {
      let u = u1(a, i), f = c.config.facets[e.id], h = c.facet(e);
      if (f && !u && _b(n, f))
        return a.values[o] = h, 0;
      let d = l(a);
      return e.compare(d, h) ? (a.values[o] = h, 0) : (a.values[o] = d, 1);
    }
  };
}
const sk = /* @__PURE__ */ nt.define({ static: !0 });
class ri {
  constructor(e, n, i, r, s) {
    this.id = e, this.createF = n, this.updateF = i, this.compareF = r, this.spec = s, this.provides = void 0;
  }
  static define(e) {
    let n = new ri(bb++, e.create, e.update, e.compare || ((i, r) => i === r), e);
    return e.provide && (n.provides = e.provide(n)), n;
  }
  create(e) {
    let n = e.facet(sk).find((i) => i.field == this);
    return ((n == null ? void 0 : n.create) || this.createF)(e);
  }
  slot(e) {
    let n = e[this.id] >> 1;
    return {
      create: (i) => (i.values[n] = this.create(i), 1),
      update: (i, r) => {
        let s = i.values[n], o = this.updateF(s, r);
        return this.compareF(s, o) ? 0 : (i.values[n] = o, 1);
      },
      reconfigure: (i, r) => r.config.address[this.id] != null ? (i.values[n] = r.field(this), 0) : (i.values[n] = this.create(i), 1)
    };
  }
  init(e) {
    return [this, sk.of({ field: this, create: e })];
  }
  get extension() {
    return this;
  }
}
const ul = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };
function mc(t) {
  return (e) => new h8(e, t);
}
const ac = {
  highest: /* @__PURE__ */ mc(ul.highest),
  high: /* @__PURE__ */ mc(ul.high),
  default: /* @__PURE__ */ mc(ul.default),
  low: /* @__PURE__ */ mc(ul.low),
  lowest: /* @__PURE__ */ mc(ul.lowest)
};
class h8 {
  constructor(e, n) {
    this.inner = e, this.prec = n;
  }
}
class zs {
  of(e) {
    return new f1(this, e);
  }
  reconfigure(e) {
    return zs.reconfigure.of({ compartment: this, extension: e });
  }
  get(e) {
    return e.config.compartments.get(this);
  }
}
class f1 {
  constructor(e, n) {
    this.compartment = e, this.inner = n;
  }
}
class id {
  constructor(e, n, i, r, s, o) {
    for (this.base = e, this.compartments = n, this.dynamicSlots = i, this.address = r, this.staticValues = s, this.facets = o, this.statusTemplate = []; this.statusTemplate.length < i.length; )
      this.statusTemplate.push(0);
  }
  staticFacet(e) {
    let n = this.address[e.id];
    return n == null ? e.default : this.staticValues[n >> 1];
  }
  static resolve(e, n, i) {
    let r = [], s = /* @__PURE__ */ Object.create(null), o = /* @__PURE__ */ new Map();
    for (let h of MW(e, n, o))
      h instanceof ri ? r.push(h) : (s[h.facet.id] || (s[h.facet.id] = [])).push(h);
    let l = /* @__PURE__ */ Object.create(null), a = [], c = [];
    for (let h of r)
      l[h.id] = c.length << 1, c.push((d) => h.slot(d));
    let u = i == null ? void 0 : i.config.facets;
    for (let h in s) {
      let d = s[h], p = d[0].facet, g = u && u[h] || [];
      if (d.every((_) => _.type == 0))
        if (l[p.id] = a.length << 1 | 1, _b(g, d))
          a.push(i.facet(p));
        else {
          let _ = p.combine(d.map((m) => m.value));
          a.push(i && p.compare(_, i.facet(p)) ? i.facet(p) : _);
        }
      else {
        for (let _ of d)
          _.type == 0 ? (l[_.id] = a.length << 1 | 1, a.push(_.value)) : (l[_.id] = c.length << 1, c.push((m) => _.dynamicSlot(m)));
        l[p.id] = c.length << 1, c.push((_) => AW(_, p, d));
      }
    }
    let f = c.map((h) => h(l));
    return new id(e, o, f, l, a, s);
  }
}
function MW(t, e, n) {
  let i = [[], [], [], [], []], r = /* @__PURE__ */ new Map();
  function s(o, l) {
    let a = r.get(o);
    if (a != null) {
      if (a <= l)
        return;
      let c = i[a].indexOf(o);
      c > -1 && i[a].splice(c, 1), o instanceof f1 && n.delete(o.compartment);
    }
    if (r.set(o, l), Array.isArray(o))
      for (let c of o)
        s(c, l);
    else if (o instanceof f1) {
      if (n.has(o.compartment))
        throw new RangeError("Duplicate use of compartment in extensions");
      let c = e.get(o.compartment) || o.inner;
      n.set(o.compartment, c), s(c, l);
    } else if (o instanceof h8)
      s(o.inner, o.prec);
    else if (o instanceof ri)
      i[l].push(o), o.provides && s(o.provides, l);
    else if (o instanceof mh)
      i[l].push(o), o.facet.extensions && s(o.facet.extensions, ul.default);
    else {
      let c = o.extension;
      if (!c)
        throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
      s(c, l);
    }
  }
  return s(t, ul.default), i.reduce((o, l) => o.concat(l));
}
function Vc(t, e) {
  if (e & 1)
    return 2;
  let n = e >> 1, i = t.status[n];
  if (i == 4)
    throw new Error("Cyclic dependency between fields and/or facets");
  if (i & 2)
    return i;
  t.status[n] = 4;
  let r = t.computeSlot(t, t.config.dynamicSlots[n]);
  return t.status[n] = 2 | r;
}
function rd(t, e) {
  return e & 1 ? t.config.staticValues[e >> 1] : t.values[e >> 1];
}
const d8 = /* @__PURE__ */ nt.define(), p8 = /* @__PURE__ */ nt.define({
  combine: (t) => t.some((e) => e),
  static: !0
}), g8 = /* @__PURE__ */ nt.define({
  combine: (t) => t.length ? t[0] : void 0,
  static: !0
}), m8 = /* @__PURE__ */ nt.define(), b8 = /* @__PURE__ */ nt.define(), _8 = /* @__PURE__ */ nt.define(), y8 = /* @__PURE__ */ nt.define({
  combine: (t) => t.length ? t[0] : !1
});
class Zo {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  static define() {
    return new OW();
  }
}
class OW {
  of(e) {
    return new Zo(this, e);
  }
}
class TW {
  constructor(e) {
    this.map = e;
  }
  of(e) {
    return new St(this, e);
  }
}
class St {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  map(e) {
    let n = this.type.map(this.value, e);
    return n === void 0 ? void 0 : n == this.value ? this : new St(this.type, n);
  }
  is(e) {
    return this.type == e;
  }
  static define(e = {}) {
    return new TW(e.map || ((n) => n));
  }
  static mapEffects(e, n) {
    if (!e.length)
      return e;
    let i = [];
    for (let r of e) {
      let s = r.map(n);
      s && i.push(s);
    }
    return i;
  }
}
St.reconfigure = /* @__PURE__ */ St.define();
St.appendConfig = /* @__PURE__ */ St.define();
let di = class {
  constructor(e, n, i, r, s, o) {
    this.startState = e, this.changes = n, this.selection = i, this.effects = r, this.annotations = s, this.scrollIntoView = o, this._doc = null, this._state = null, i && f8(i, n.newLength), s.some((l) => l.type == di.time) || (this.annotations = s.concat(di.time.of(Date.now())));
  }
  static create(e, n, i, r, s, o) {
    return new di(e, n, i, r, s, o);
  }
  get newDoc() {
    return this._doc || (this._doc = this.changes.apply(this.startState.doc));
  }
  get newSelection() {
    return this.selection || this.startState.selection.map(this.changes);
  }
  get state() {
    return this._state || this.startState.applyTransaction(this), this._state;
  }
  annotation(e) {
    for (let n of this.annotations)
      if (n.type == e)
        return n.value;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get reconfigured() {
    return this.startState.config != this.state.config;
  }
  isUserEvent(e) {
    let n = this.annotation(di.userEvent);
    return !!(n && (n == e || n.length > e.length && n.slice(0, e.length) == e && n[e.length] == "."));
  }
};
di.time = /* @__PURE__ */ Zo.define();
di.userEvent = /* @__PURE__ */ Zo.define();
di.addToHistory = /* @__PURE__ */ Zo.define();
di.remote = /* @__PURE__ */ Zo.define();
function RW(t, e) {
  let n = [];
  for (let i = 0, r = 0; ; ) {
    let s, o;
    if (i < t.length && (r == e.length || e[r] >= t[i]))
      s = t[i++], o = t[i++];
    else if (r < e.length)
      s = e[r++], o = e[r++];
    else
      return n;
    !n.length || n[n.length - 1] < s ? n.push(s, o) : n[n.length - 1] < o && (n[n.length - 1] = o);
  }
}
function w8(t, e, n) {
  var i;
  let r, s, o;
  return n ? (r = e.changes, s = $n.empty(e.changes.length), o = t.changes.compose(e.changes)) : (r = e.changes.map(t.changes), s = t.changes.mapDesc(e.changes, !0), o = t.changes.compose(r)), {
    changes: o,
    selection: e.selection ? e.selection.map(s) : (i = t.selection) === null || i === void 0 ? void 0 : i.map(r),
    effects: St.mapEffects(t.effects, r).concat(St.mapEffects(e.effects, s)),
    annotations: t.annotations.length ? t.annotations.concat(e.annotations) : e.annotations,
    scrollIntoView: t.scrollIntoView || e.scrollIntoView
  };
}
function h1(t, e, n) {
  let i = e.selection, r = ba(e.annotations);
  return e.userEvent && (r = r.concat(di.userEvent.of(e.userEvent))), {
    changes: e.changes instanceof $n ? e.changes : $n.of(e.changes || [], n, t.facet(g8)),
    selection: i && (i instanceof Pe ? i : Pe.single(i.anchor, i.head)),
    effects: ba(e.effects),
    annotations: r,
    scrollIntoView: !!e.scrollIntoView
  };
}
function v8(t, e, n) {
  let i = h1(t, e.length ? e[0] : {}, t.doc.length);
  e.length && e[0].filter === !1 && (n = !1);
  for (let s = 1; s < e.length; s++) {
    e[s].filter === !1 && (n = !1);
    let o = !!e[s].sequential;
    i = w8(i, h1(t, e[s], o ? i.changes.newLength : t.doc.length), o);
  }
  let r = di.create(t, i.changes, i.selection, i.effects, i.annotations, i.scrollIntoView);
  return IW(n ? PW(r) : r);
}
function PW(t) {
  let e = t.startState, n = !0;
  for (let r of e.facet(m8)) {
    let s = r(t);
    if (s === !1) {
      n = !1;
      break;
    }
    Array.isArray(s) && (n = n === !0 ? s : RW(n, s));
  }
  if (n !== !0) {
    let r, s;
    if (n === !1)
      s = t.changes.invertedDesc, r = $n.empty(e.doc.length);
    else {
      let o = t.changes.filter(n);
      r = o.changes, s = o.filtered.mapDesc(o.changes).invertedDesc;
    }
    t = di.create(e, r, t.selection && t.selection.map(s), St.mapEffects(t.effects, s), t.annotations, t.scrollIntoView);
  }
  let i = e.facet(b8);
  for (let r = i.length - 1; r >= 0; r--) {
    let s = i[r](t);
    s instanceof di ? t = s : Array.isArray(s) && s.length == 1 && s[0] instanceof di ? t = s[0] : t = v8(e, ba(s), !1);
  }
  return t;
}
function IW(t) {
  let e = t.startState, n = e.facet(_8), i = t;
  for (let r = n.length - 1; r >= 0; r--) {
    let s = n[r](t);
    s && Object.keys(s).length && (i = w8(i, h1(e, s, t.changes.newLength), !0));
  }
  return i == t ? t : di.create(e, t.changes, t.selection, i.effects, i.annotations, i.scrollIntoView);
}
const DW = [];
function ba(t) {
  return t == null ? DW : Array.isArray(t) ? t : [t];
}
var _n = /* @__PURE__ */ function(t) {
  return t[t.Word = 0] = "Word", t[t.Space = 1] = "Space", t[t.Other = 2] = "Other", t;
}(_n || (_n = {}));
const NW = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
let d1;
try {
  d1 = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
} catch {
}
function LW(t) {
  if (d1)
    return d1.test(t);
  for (let e = 0; e < t.length; e++) {
    let n = t[e];
    if (/\w/.test(n) || n > "" && (n.toUpperCase() != n.toLowerCase() || NW.test(n)))
      return !0;
  }
  return !1;
}
function jW(t) {
  return (e) => {
    if (!/\S/.test(e))
      return _n.Space;
    if (LW(e))
      return _n.Word;
    for (let n = 0; n < t.length; n++)
      if (e.indexOf(t[n]) > -1)
        return _n.Word;
    return _n.Other;
  };
}
class Rt {
  constructor(e, n, i, r, s, o) {
    this.config = e, this.doc = n, this.selection = i, this.values = r, this.status = e.statusTemplate.slice(), this.computeSlot = s, o && (o._state = this);
    for (let l = 0; l < this.config.dynamicSlots.length; l++)
      Vc(this, l << 1);
    this.computeSlot = null;
  }
  field(e, n = !0) {
    let i = this.config.address[e.id];
    if (i == null) {
      if (n)
        throw new RangeError("Field is not present in this state");
      return;
    }
    return Vc(this, i), rd(this, i);
  }
  update(...e) {
    return v8(this, e, !0);
  }
  applyTransaction(e) {
    let n = this.config, { base: i, compartments: r } = n;
    for (let o of e.effects)
      o.is(zs.reconfigure) ? (n && (r = /* @__PURE__ */ new Map(), n.compartments.forEach((l, a) => r.set(a, l)), n = null), r.set(o.value.compartment, o.value.extension)) : o.is(St.reconfigure) ? (n = null, i = o.value) : o.is(St.appendConfig) && (n = null, i = ba(i).concat(o.value));
    let s;
    n ? s = e.startState.values.slice() : (n = id.resolve(i, r, this), s = new Rt(n, this.doc, this.selection, n.dynamicSlots.map(() => null), (l, a) => a.reconfigure(l, this), null).values), new Rt(n, e.newDoc, e.newSelection, s, (o, l) => l.update(o, e), e);
  }
  replaceSelection(e) {
    return typeof e == "string" && (e = this.toText(e)), this.changeByRange((n) => ({
      changes: { from: n.from, to: n.to, insert: e },
      range: Pe.cursor(n.from + e.length)
    }));
  }
  changeByRange(e) {
    let n = this.selection, i = e(n.ranges[0]), r = this.changes(i.changes), s = [i.range], o = ba(i.effects);
    for (let l = 1; l < n.ranges.length; l++) {
      let a = e(n.ranges[l]), c = this.changes(a.changes), u = c.map(r);
      for (let h = 0; h < l; h++)
        s[h] = s[h].map(u);
      let f = r.mapDesc(c, !0);
      s.push(a.range.map(f)), r = r.compose(u), o = St.mapEffects(o, u).concat(St.mapEffects(ba(a.effects), f));
    }
    return {
      changes: r,
      selection: Pe.create(s, n.mainIndex),
      effects: o
    };
  }
  changes(e = []) {
    return e instanceof $n ? e : $n.of(e, this.doc.length, this.facet(Rt.lineSeparator));
  }
  toText(e) {
    return Ht.of(e.split(this.facet(Rt.lineSeparator) || l1));
  }
  sliceDoc(e = 0, n = this.doc.length) {
    return this.doc.sliceString(e, n, this.lineBreak);
  }
  facet(e) {
    let n = this.config.address[e.id];
    return n == null ? e.default : (Vc(this, n), rd(this, n));
  }
  toJSON(e) {
    let n = {
      doc: this.sliceDoc(),
      selection: this.selection.toJSON()
    };
    if (e)
      for (let i in e) {
        let r = e[i];
        r instanceof ri && this.config.address[r.id] != null && (n[i] = r.spec.toJSON(this.field(e[i]), this));
      }
    return n;
  }
  static fromJSON(e, n = {}, i) {
    if (!e || typeof e.doc != "string")
      throw new RangeError("Invalid JSON representation for EditorState");
    let r = [];
    if (i) {
      for (let s in i)
        if (Object.prototype.hasOwnProperty.call(e, s)) {
          let o = i[s], l = e[s];
          r.push(o.init((a) => o.spec.fromJSON(l, a)));
        }
    }
    return Rt.create({
      doc: e.doc,
      selection: Pe.fromJSON(e.selection),
      extensions: n.extensions ? r.concat([n.extensions]) : r
    });
  }
  static create(e = {}) {
    let n = id.resolve(e.extensions || [], /* @__PURE__ */ new Map()), i = e.doc instanceof Ht ? e.doc : Ht.of((e.doc || "").split(n.staticFacet(Rt.lineSeparator) || l1)), r = e.selection ? e.selection instanceof Pe ? e.selection : Pe.single(e.selection.anchor, e.selection.head) : Pe.single(0);
    return f8(r, i.length), n.staticFacet(p8) || (r = r.asSingle()), new Rt(n, i, r, n.dynamicSlots.map(() => null), (s, o) => o.create(s), null);
  }
  get tabSize() {
    return this.facet(Rt.tabSize);
  }
  get lineBreak() {
    return this.facet(Rt.lineSeparator) || `
`;
  }
  get readOnly() {
    return this.facet(y8);
  }
  phrase(e, ...n) {
    for (let i of this.facet(Rt.phrases))
      if (Object.prototype.hasOwnProperty.call(i, e)) {
        e = i[e];
        break;
      }
    return n.length && (e = e.replace(/\$(\$|\d*)/g, (i, r) => {
      if (r == "$")
        return "$";
      let s = +(r || 1);
      return !s || s > n.length ? i : n[s - 1];
    })), e;
  }
  languageDataAt(e, n, i = -1) {
    let r = [];
    for (let s of this.facet(d8))
      for (let o of s(this, n, i))
        Object.prototype.hasOwnProperty.call(o, e) && r.push(o[e]);
    return r;
  }
  charCategorizer(e) {
    return jW(this.languageDataAt("wordChars", e).join(""));
  }
  wordAt(e) {
    let { text: n, from: i, length: r } = this.doc.lineAt(e), s = this.charCategorizer(e), o = e - i, l = e - i;
    for (; o > 0; ) {
      let a = ji(n, o, !1);
      if (s(n.slice(a, o)) != _n.Word)
        break;
      o = a;
    }
    for (; l < r; ) {
      let a = ji(n, l);
      if (s(n.slice(l, a)) != _n.Word)
        break;
      l = a;
    }
    return o == l ? null : Pe.range(o + i, l + i);
  }
}
Rt.allowMultipleSelections = p8;
Rt.tabSize = /* @__PURE__ */ nt.define({
  combine: (t) => t.length ? t[0] : 4
});
Rt.lineSeparator = g8;
Rt.readOnly = y8;
Rt.phrases = /* @__PURE__ */ nt.define({
  compare(t, e) {
    let n = Object.keys(t), i = Object.keys(e);
    return n.length == i.length && n.every((r) => t[r] == e[r]);
  }
});
Rt.languageData = d8;
Rt.changeFilter = m8;
Rt.transactionFilter = b8;
Rt.transactionExtender = _8;
zs.reconfigure = /* @__PURE__ */ St.define();
function Wr(t, e, n = {}) {
  let i = {};
  for (let r of t)
    for (let s of Object.keys(r)) {
      let o = r[s], l = i[s];
      if (l === void 0)
        i[s] = o;
      else if (!(l === o || o === void 0))
        if (Object.hasOwnProperty.call(n, s))
          i[s] = n[s](l, o);
        else
          throw new Error("Config merge conflict for field " + s);
    }
  for (let r in e)
    i[r] === void 0 && (i[r] = e[r]);
  return i;
}
class Pl {
  eq(e) {
    return this == e;
  }
  range(e, n = e) {
    return sd.create(e, n, this);
  }
}
Pl.prototype.startSide = Pl.prototype.endSide = 0;
Pl.prototype.point = !1;
Pl.prototype.mapMode = Ni.TrackDel;
let sd = class {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.value = i;
  }
  static create(e, n, i) {
    return new sd(e, n, i);
  }
};
function p1(t, e) {
  return t.from - e.from || t.value.startSide - e.value.startSide;
}
class yb {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.value = i, this.maxPoint = r;
  }
  get length() {
    return this.to[this.to.length - 1];
  }
  findIndex(e, n, i, r = 0) {
    let s = i ? this.to : this.from;
    for (let o = r, l = s.length; ; ) {
      if (o == l)
        return o;
      let a = o + l >> 1, c = s[a] - e || (i ? this.value[a].endSide : this.value[a].startSide) - n;
      if (a == o)
        return c >= 0 ? o : l;
      c >= 0 ? l = a : o = a + 1;
    }
  }
  between(e, n, i, r) {
    for (let s = this.findIndex(n, -1e9, !0), o = this.findIndex(i, 1e9, !1, s); s < o; s++)
      if (r(this.from[s] + e, this.to[s] + e, this.value[s]) === !1)
        return !1;
  }
  map(e, n) {
    let i = [], r = [], s = [], o = -1, l = -1;
    for (let a = 0; a < this.value.length; a++) {
      let c = this.value[a], u = this.from[a] + e, f = this.to[a] + e, h, d;
      if (u == f) {
        let p = n.mapPos(u, c.startSide, c.mapMode);
        if (p == null || (h = d = p, c.startSide != c.endSide && (d = n.mapPos(u, c.endSide), d < h)))
          continue;
      } else if (h = n.mapPos(u, c.startSide), d = n.mapPos(f, c.endSide), h > d || h == d && c.startSide > 0 && c.endSide <= 0)
        continue;
      (d - h || c.endSide - c.startSide) < 0 || (o < 0 && (o = h), c.point && (l = Math.max(l, d - h)), i.push(c), r.push(h - o), s.push(d - o));
    }
    return { mapped: i.length ? new yb(r, s, i, l) : null, pos: o };
  }
}
class Wt {
  constructor(e, n, i, r) {
    this.chunkPos = e, this.chunk = n, this.nextLayer = i, this.maxPoint = r;
  }
  static create(e, n, i, r) {
    return new Wt(e, n, i, r);
  }
  get length() {
    let e = this.chunk.length - 1;
    return e < 0 ? 0 : Math.max(this.chunkEnd(e), this.nextLayer.length);
  }
  get size() {
    if (this.isEmpty)
      return 0;
    let e = this.nextLayer.size;
    for (let n of this.chunk)
      e += n.value.length;
    return e;
  }
  chunkEnd(e) {
    return this.chunkPos[e] + this.chunk[e].length;
  }
  update(e) {
    let { add: n = [], sort: i = !1, filterFrom: r = 0, filterTo: s = this.length } = e, o = e.filter;
    if (n.length == 0 && !o)
      return this;
    if (i && (n = n.slice().sort(p1)), this.isEmpty)
      return n.length ? Wt.of(n) : this;
    let l = new k8(this, null, -1).goto(0), a = 0, c = [], u = new zo();
    for (; l.value || a < n.length; )
      if (a < n.length && (l.from - n[a].from || l.startSide - n[a].value.startSide) >= 0) {
        let f = n[a++];
        u.addInner(f.from, f.to, f.value) || c.push(f);
      } else
        l.rangeIndex == 1 && l.chunkIndex < this.chunk.length && (a == n.length || this.chunkEnd(l.chunkIndex) < n[a].from) && (!o || r > this.chunkEnd(l.chunkIndex) || s < this.chunkPos[l.chunkIndex]) && u.addChunk(this.chunkPos[l.chunkIndex], this.chunk[l.chunkIndex]) ? l.nextChunk() : ((!o || r > l.to || s < l.from || o(l.from, l.to, l.value)) && (u.addInner(l.from, l.to, l.value) || c.push(sd.create(l.from, l.to, l.value))), l.next());
    return u.finishInner(this.nextLayer.isEmpty && !c.length ? Wt.empty : this.nextLayer.update({ add: c, filter: o, filterFrom: r, filterTo: s }));
  }
  map(e) {
    if (e.empty || this.isEmpty)
      return this;
    let n = [], i = [], r = -1;
    for (let o = 0; o < this.chunk.length; o++) {
      let l = this.chunkPos[o], a = this.chunk[o], c = e.touchesRange(l, l + a.length);
      if (c === !1)
        r = Math.max(r, a.maxPoint), n.push(a), i.push(e.mapPos(l));
      else if (c === !0) {
        let { mapped: u, pos: f } = a.map(l, e);
        u && (r = Math.max(r, u.maxPoint), n.push(u), i.push(f));
      }
    }
    let s = this.nextLayer.map(e);
    return n.length == 0 ? s : new Wt(i, n, s || Wt.empty, r);
  }
  between(e, n, i) {
    if (!this.isEmpty) {
      for (let r = 0; r < this.chunk.length; r++) {
        let s = this.chunkPos[r], o = this.chunk[r];
        if (n >= s && e <= s + o.length && o.between(s, e - s, n - s, i) === !1)
          return;
      }
      this.nextLayer.between(e, n, i);
    }
  }
  iter(e = 0) {
    return fu.from([this]).goto(e);
  }
  get isEmpty() {
    return this.nextLayer == this;
  }
  static iter(e, n = 0) {
    return fu.from(e).goto(n);
  }
  static compare(e, n, i, r, s = -1) {
    let o = e.filter((f) => f.maxPoint > 0 || !f.isEmpty && f.maxPoint >= s), l = n.filter((f) => f.maxPoint > 0 || !f.isEmpty && f.maxPoint >= s), a = ok(o, l, i), c = new bc(o, a, s), u = new bc(l, a, s);
    i.iterGaps((f, h, d) => lk(c, f, u, h, d, r)), i.empty && i.length == 0 && lk(c, 0, u, 0, 0, r);
  }
  static eq(e, n, i = 0, r) {
    r == null && (r = 1e9 - 1);
    let s = e.filter((u) => !u.isEmpty && n.indexOf(u) < 0), o = n.filter((u) => !u.isEmpty && e.indexOf(u) < 0);
    if (s.length != o.length)
      return !1;
    if (!s.length)
      return !0;
    let l = ok(s, o), a = new bc(s, l, 0).goto(i), c = new bc(o, l, 0).goto(i);
    for (; ; ) {
      if (a.to != c.to || !g1(a.active, c.active) || a.point && (!c.point || !a.point.eq(c.point)))
        return !1;
      if (a.to > r)
        return !0;
      a.next(), c.next();
    }
  }
  static spans(e, n, i, r, s = -1) {
    let o = new bc(e, null, s).goto(n), l = n, a = o.openStart;
    for (; ; ) {
      let c = Math.min(o.to, i);
      if (o.point) {
        let u = o.activeForPoint(o.to), f = o.pointFrom < n ? u.length + 1 : Math.min(u.length, a);
        r.point(l, c, o.point, u, f, o.pointRank), a = Math.min(o.openEnd(c), u.length);
      } else
        c > l && (r.span(l, c, o.active, a), a = o.openEnd(c));
      if (o.to > i)
        return a + (o.point && o.to > i ? 1 : 0);
      l = o.to, o.next();
    }
  }
  static of(e, n = !1) {
    let i = new zo();
    for (let r of e instanceof sd ? [e] : n ? BW(e) : e)
      i.add(r.from, r.to, r.value);
    return i.finish();
  }
}
Wt.empty = /* @__PURE__ */ new Wt([], [], null, -1);
function BW(t) {
  if (t.length > 1)
    for (let e = t[0], n = 1; n < t.length; n++) {
      let i = t[n];
      if (p1(e, i) > 0)
        return t.slice().sort(p1);
      e = i;
    }
  return t;
}
Wt.empty.nextLayer = Wt.empty;
class zo {
  constructor() {
    this.chunks = [], this.chunkPos = [], this.chunkStart = -1, this.last = null, this.lastFrom = -1e9, this.lastTo = -1e9, this.from = [], this.to = [], this.value = [], this.maxPoint = -1, this.setMaxPoint = -1, this.nextLayer = null;
  }
  finishChunk(e) {
    this.chunks.push(new yb(this.from, this.to, this.value, this.maxPoint)), this.chunkPos.push(this.chunkStart), this.chunkStart = -1, this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint), this.maxPoint = -1, e && (this.from = [], this.to = [], this.value = []);
  }
  add(e, n, i) {
    this.addInner(e, n, i) || (this.nextLayer || (this.nextLayer = new zo())).add(e, n, i);
  }
  addInner(e, n, i) {
    let r = e - this.lastTo || i.startSide - this.last.endSide;
    if (r <= 0 && (e - this.lastFrom || i.startSide - this.last.startSide) < 0)
      throw new Error("Ranges must be added sorted by `from` position and `startSide`");
    return r < 0 ? !1 : (this.from.length == 250 && this.finishChunk(!0), this.chunkStart < 0 && (this.chunkStart = e), this.from.push(e - this.chunkStart), this.to.push(n - this.chunkStart), this.last = i, this.lastFrom = e, this.lastTo = n, this.value.push(i), i.point && (this.maxPoint = Math.max(this.maxPoint, n - e)), !0);
  }
  addChunk(e, n) {
    if ((e - this.lastTo || n.value[0].startSide - this.last.endSide) < 0)
      return !1;
    this.from.length && this.finishChunk(!0), this.setMaxPoint = Math.max(this.setMaxPoint, n.maxPoint), this.chunks.push(n), this.chunkPos.push(e);
    let i = n.value.length - 1;
    return this.last = n.value[i], this.lastFrom = n.from[i] + e, this.lastTo = n.to[i] + e, !0;
  }
  finish() {
    return this.finishInner(Wt.empty);
  }
  finishInner(e) {
    if (this.from.length && this.finishChunk(!1), this.chunks.length == 0)
      return e;
    let n = Wt.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(e) : e, this.setMaxPoint);
    return this.from = null, n;
  }
}
function ok(t, e, n) {
  let i = /* @__PURE__ */ new Map();
  for (let s of t)
    for (let o = 0; o < s.chunk.length; o++)
      s.chunk[o].maxPoint <= 0 && i.set(s.chunk[o], s.chunkPos[o]);
  let r = /* @__PURE__ */ new Set();
  for (let s of e)
    for (let o = 0; o < s.chunk.length; o++) {
      let l = i.get(s.chunk[o]);
      l != null && (n ? n.mapPos(l) : l) == s.chunkPos[o] && !(n != null && n.touchesRange(l, l + s.chunk[o].length)) && r.add(s.chunk[o]);
    }
  return r;
}
class k8 {
  constructor(e, n, i, r = 0) {
    this.layer = e, this.skip = n, this.minPoint = i, this.rank = r;
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  get endSide() {
    return this.value ? this.value.endSide : 0;
  }
  goto(e, n = -1e9) {
    return this.chunkIndex = this.rangeIndex = 0, this.gotoInner(e, n, !1), this;
  }
  gotoInner(e, n, i) {
    for (; this.chunkIndex < this.layer.chunk.length; ) {
      let r = this.layer.chunk[this.chunkIndex];
      if (!(this.skip && this.skip.has(r) || this.layer.chunkEnd(this.chunkIndex) < e || r.maxPoint < this.minPoint))
        break;
      this.chunkIndex++, i = !1;
    }
    if (this.chunkIndex < this.layer.chunk.length) {
      let r = this.layer.chunk[this.chunkIndex].findIndex(e - this.layer.chunkPos[this.chunkIndex], n, !0);
      (!i || this.rangeIndex < r) && this.setRangeIndex(r);
    }
    this.next();
  }
  forward(e, n) {
    (this.to - e || this.endSide - n) < 0 && this.gotoInner(e, n, !0);
  }
  next() {
    for (; ; )
      if (this.chunkIndex == this.layer.chunk.length) {
        this.from = this.to = 1e9, this.value = null;
        break;
      } else {
        let e = this.layer.chunkPos[this.chunkIndex], n = this.layer.chunk[this.chunkIndex], i = e + n.from[this.rangeIndex];
        if (this.from = i, this.to = e + n.to[this.rangeIndex], this.value = n.value[this.rangeIndex], this.setRangeIndex(this.rangeIndex + 1), this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
          break;
      }
  }
  setRangeIndex(e) {
    if (e == this.layer.chunk[this.chunkIndex].value.length) {
      if (this.chunkIndex++, this.skip)
        for (; this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]); )
          this.chunkIndex++;
      this.rangeIndex = 0;
    } else
      this.rangeIndex = e;
  }
  nextChunk() {
    this.chunkIndex++, this.rangeIndex = 0, this.next();
  }
  compare(e) {
    return this.from - e.from || this.startSide - e.startSide || this.rank - e.rank || this.to - e.to || this.endSide - e.endSide;
  }
}
class fu {
  constructor(e) {
    this.heap = e;
  }
  static from(e, n = null, i = -1) {
    let r = [];
    for (let s = 0; s < e.length; s++)
      for (let o = e[s]; !o.isEmpty; o = o.nextLayer)
        o.maxPoint >= i && r.push(new k8(o, n, i, s));
    return r.length == 1 ? r[0] : new fu(r);
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  goto(e, n = -1e9) {
    for (let i of this.heap)
      i.goto(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      Fg(this.heap, i);
    return this.next(), this;
  }
  forward(e, n) {
    for (let i of this.heap)
      i.forward(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      Fg(this.heap, i);
    (this.to - e || this.value.endSide - n) < 0 && this.next();
  }
  next() {
    if (this.heap.length == 0)
      this.from = this.to = 1e9, this.value = null, this.rank = -1;
    else {
      let e = this.heap[0];
      this.from = e.from, this.to = e.to, this.value = e.value, this.rank = e.rank, e.value && e.next(), Fg(this.heap, 0);
    }
  }
}
function Fg(t, e) {
  for (let n = t[e]; ; ) {
    let i = (e << 1) + 1;
    if (i >= t.length)
      break;
    let r = t[i];
    if (i + 1 < t.length && r.compare(t[i + 1]) >= 0 && (r = t[i + 1], i++), n.compare(r) < 0)
      break;
    t[i] = n, t[e] = r, e = i;
  }
}
class bc {
  constructor(e, n, i) {
    this.minPoint = i, this.active = [], this.activeTo = [], this.activeRank = [], this.minActive = -1, this.point = null, this.pointFrom = 0, this.pointRank = 0, this.to = -1e9, this.endSide = 0, this.openStart = -1, this.cursor = fu.from(e, n, i);
  }
  goto(e, n = -1e9) {
    return this.cursor.goto(e, n), this.active.length = this.activeTo.length = this.activeRank.length = 0, this.minActive = -1, this.to = e, this.endSide = n, this.openStart = -1, this.next(), this;
  }
  forward(e, n) {
    for (; this.minActive > -1 && (this.activeTo[this.minActive] - e || this.active[this.minActive].endSide - n) < 0; )
      this.removeActive(this.minActive);
    this.cursor.forward(e, n);
  }
  removeActive(e) {
    Tf(this.active, e), Tf(this.activeTo, e), Tf(this.activeRank, e), this.minActive = ak(this.active, this.activeTo);
  }
  addActive(e) {
    let n = 0, { value: i, to: r, rank: s } = this.cursor;
    for (; n < this.activeRank.length && this.activeRank[n] <= s; )
      n++;
    Rf(this.active, n, i), Rf(this.activeTo, n, r), Rf(this.activeRank, n, s), e && Rf(e, n, this.cursor.from), this.minActive = ak(this.active, this.activeTo);
  }
  next() {
    let e = this.to, n = this.point;
    this.point = null;
    let i = this.openStart < 0 ? [] : null;
    for (; ; ) {
      let r = this.minActive;
      if (r > -1 && (this.activeTo[r] - this.cursor.from || this.active[r].endSide - this.cursor.startSide) < 0) {
        if (this.activeTo[r] > e) {
          this.to = this.activeTo[r], this.endSide = this.active[r].endSide;
          break;
        }
        this.removeActive(r), i && Tf(i, r);
      } else if (this.cursor.value)
        if (this.cursor.from > e) {
          this.to = this.cursor.from, this.endSide = this.cursor.startSide;
          break;
        } else {
          let s = this.cursor.value;
          if (!s.point)
            this.addActive(i), this.cursor.next();
          else if (n && this.cursor.to == this.to && this.cursor.from < this.cursor.to)
            this.cursor.next();
          else {
            this.point = s, this.pointFrom = this.cursor.from, this.pointRank = this.cursor.rank, this.to = this.cursor.to, this.endSide = s.endSide, this.cursor.next(), this.forward(this.to, this.endSide);
            break;
          }
        }
      else {
        this.to = this.endSide = 1e9;
        break;
      }
    }
    if (i) {
      this.openStart = 0;
      for (let r = i.length - 1; r >= 0 && i[r] < e; r--)
        this.openStart++;
    }
  }
  activeForPoint(e) {
    if (!this.active.length)
      return this.active;
    let n = [];
    for (let i = this.active.length - 1; i >= 0 && !(this.activeRank[i] < this.pointRank); i--)
      (this.activeTo[i] > e || this.activeTo[i] == e && this.active[i].endSide >= this.point.endSide) && n.push(this.active[i]);
    return n.reverse();
  }
  openEnd(e) {
    let n = 0;
    for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > e; i--)
      n++;
    return n;
  }
}
function lk(t, e, n, i, r, s) {
  t.goto(e), n.goto(i);
  let o = i + r, l = i, a = i - e;
  for (; ; ) {
    let c = t.to + a - n.to || t.endSide - n.endSide, u = c < 0 ? t.to + a : n.to, f = Math.min(u, o);
    if (t.point || n.point ? t.point && n.point && (t.point == n.point || t.point.eq(n.point)) && g1(t.activeForPoint(t.to + a), n.activeForPoint(n.to)) || s.comparePoint(l, f, t.point, n.point) : f > l && !g1(t.active, n.active) && s.compareRange(l, f, t.active, n.active), u > o)
      break;
    l = u, c <= 0 && t.next(), c >= 0 && n.next();
  }
}
function g1(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (t[n] != e[n] && !t[n].eq(e[n]))
      return !1;
  return !0;
}
function Tf(t, e) {
  for (let n = e, i = t.length - 1; n < i; n++)
    t[n] = t[n + 1];
  t.pop();
}
function Rf(t, e, n) {
  for (let i = t.length - 1; i >= e; i--)
    t[i + 1] = t[i];
  t[e] = n;
}
function ak(t, e) {
  let n = -1, i = 1e9;
  for (let r = 0; r < e.length; r++)
    (e[r] - i || t[r].endSide - t[n].endSide) < 0 && (n = r, i = e[r]);
  return n;
}
function Gu(t, e, n = t.length) {
  let i = 0;
  for (let r = 0; r < n; )
    t.charCodeAt(r) == 9 ? (i += e - i % e, r++) : (i++, r = ji(t, r));
  return i;
}
function m1(t, e, n, i) {
  for (let r = 0, s = 0; ; ) {
    if (s >= e)
      return r;
    if (r == t.length)
      break;
    s += t.charCodeAt(r) == 9 ? n - s % n : 1, r = ji(t, r);
  }
  return i === !0 ? -1 : t.length;
}
const b1 = "ͼ", ck = typeof Symbol > "u" ? "__" + b1 : Symbol.for(b1), _1 = typeof Symbol > "u" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet"), uk = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : {};
class Vo {
  constructor(e, n) {
    this.rules = [];
    let { finish: i } = n || {};
    function r(o) {
      return /^@/.test(o) ? [o] : o.split(/,\s*/);
    }
    function s(o, l, a, c) {
      let u = [], f = /^@(\w+)\b/.exec(o[0]), h = f && f[1] == "keyframes";
      if (f && l == null)
        return a.push(o[0] + ";");
      for (let d in l) {
        let p = l[d];
        if (/&/.test(d))
          s(
            d.split(/,\s*/).map((g) => o.map((_) => g.replace(/&/, _))).reduce((g, _) => g.concat(_)),
            p,
            a
          );
        else if (p && typeof p == "object") {
          if (!f)
            throw new RangeError("The value of a property (" + d + ") should be a primitive value.");
          s(r(d), p, u, h);
        } else
          p != null && u.push(d.replace(/_.*/, "").replace(/[A-Z]/g, (g) => "-" + g.toLowerCase()) + ": " + p + ";");
      }
      (u.length || h) && a.push((i && !f && !c ? o.map(i) : o).join(", ") + " {" + u.join(" ") + "}");
    }
    for (let o in e)
      s(r(o), e[o], this.rules);
  }
  getRules() {
    return this.rules.join(`
`);
  }
  static newName() {
    let e = uk[ck] || 1;
    return uk[ck] = e + 1, b1 + e.toString(36);
  }
  static mount(e, n) {
    (e[_1] || new xW(e)).mount(Array.isArray(n) ? n : [n]);
  }
}
let Pf = null;
class xW {
  constructor(e) {
    if (!e.head && e.adoptedStyleSheets && typeof CSSStyleSheet < "u") {
      if (Pf)
        return e.adoptedStyleSheets = [Pf.sheet].concat(e.adoptedStyleSheets), e[_1] = Pf;
      this.sheet = new CSSStyleSheet(), e.adoptedStyleSheets = [this.sheet].concat(e.adoptedStyleSheets), Pf = this;
    } else {
      this.styleTag = (e.ownerDocument || e).createElement("style");
      let n = e.head || e;
      n.insertBefore(this.styleTag, n.firstChild);
    }
    this.modules = [], e[_1] = this;
  }
  mount(e) {
    let n = this.sheet, i = 0, r = 0;
    for (let s = 0; s < e.length; s++) {
      let o = e[s], l = this.modules.indexOf(o);
      if (l < r && l > -1 && (this.modules.splice(l, 1), r--, l = -1), l == -1) {
        if (this.modules.splice(r++, 0, o), n)
          for (let a = 0; a < o.rules.length; a++)
            n.insertRule(o.rules[a], i++);
      } else {
        for (; r < l; )
          i += this.modules[r++].rules.length;
        i += o.rules.length, r++;
      }
    }
    if (!n) {
      let s = "";
      for (let o = 0; o < this.modules.length; o++)
        s += this.modules[o].getRules() + `
`;
      this.styleTag.textContent = s;
    }
  }
}
var Uo = {
  8: "Backspace",
  9: "Tab",
  10: "Enter",
  12: "NumLock",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  44: "PrintScreen",
  45: "Insert",
  46: "Delete",
  59: ";",
  61: "=",
  91: "Meta",
  92: "Meta",
  106: "*",
  107: "+",
  108: ",",
  109: "-",
  110: ".",
  111: "/",
  144: "NumLock",
  145: "ScrollLock",
  160: "Shift",
  161: "Shift",
  162: "Control",
  163: "Control",
  164: "Alt",
  165: "Alt",
  173: "-",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
}, hu = {
  48: ")",
  49: "!",
  50: "@",
  51: "#",
  52: "$",
  53: "%",
  54: "^",
  55: "&",
  56: "*",
  57: "(",
  59: ":",
  61: "+",
  173: "_",
  186: ":",
  187: "+",
  188: "<",
  189: "_",
  190: ">",
  191: "?",
  192: "~",
  219: "{",
  220: "|",
  221: "}",
  222: '"'
}, fk = typeof navigator < "u" && /Chrome\/(\d+)/.exec(navigator.userAgent), FW = typeof navigator < "u" && /Mac/.test(navigator.platform), zW = typeof navigator < "u" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent), VW = FW || fk && +fk[1] < 57;
for (var Ci = 0; Ci < 10; Ci++)
  Uo[48 + Ci] = Uo[96 + Ci] = String(Ci);
for (var Ci = 1; Ci <= 24; Ci++)
  Uo[Ci + 111] = "F" + Ci;
for (var Ci = 65; Ci <= 90; Ci++)
  Uo[Ci] = String.fromCharCode(Ci + 32), hu[Ci] = String.fromCharCode(Ci);
for (var zg in Uo)
  hu.hasOwnProperty(zg) || (hu[zg] = Uo[zg]);
function UW(t) {
  var e = VW && (t.ctrlKey || t.altKey || t.metaKey) || zW && t.shiftKey && t.key && t.key.length == 1 || t.key == "Unidentified", n = !e && t.key || (t.shiftKey ? hu : Uo)[t.keyCode] || t.key || "Unidentified";
  return n == "Esc" && (n = "Escape"), n == "Del" && (n = "Delete"), n == "Left" && (n = "ArrowLeft"), n == "Up" && (n = "ArrowUp"), n == "Right" && (n = "ArrowRight"), n == "Down" && (n = "ArrowDown"), n;
}
function od(t) {
  let e;
  return t.nodeType == 11 ? e = t.getSelection ? t : t.ownerDocument : e = t, e.getSelection();
}
function xa(t, e) {
  return e ? t == e || t.contains(e.nodeType != 1 ? e.parentNode : e) : !1;
}
function HW(t) {
  let e = t.activeElement;
  for (; e && e.shadowRoot; )
    e = e.shadowRoot.activeElement;
  return e;
}
function bh(t, e) {
  if (!e.anchorNode)
    return !1;
  try {
    return xa(t, e.anchorNode);
  } catch {
    return !1;
  }
}
function du(t) {
  return t.nodeType == 3 ? Fa(t, 0, t.nodeValue.length).getClientRects() : t.nodeType == 1 ? t.getClientRects() : [];
}
function ld(t, e, n, i) {
  return n ? hk(t, e, n, i, -1) || hk(t, e, n, i, 1) : !1;
}
function ad(t) {
  for (var e = 0; ; e++)
    if (t = t.previousSibling, !t)
      return e;
}
function hk(t, e, n, i, r) {
  for (; ; ) {
    if (t == n && e == i)
      return !0;
    if (e == (r < 0 ? 0 : pu(t))) {
      if (t.nodeName == "DIV")
        return !1;
      let s = t.parentNode;
      if (!s || s.nodeType != 1)
        return !1;
      e = ad(t) + (r < 0 ? 0 : 1), t = s;
    } else if (t.nodeType == 1) {
      if (t = t.childNodes[e + (r < 0 ? -1 : 0)], t.nodeType == 1 && t.contentEditable == "false")
        return !1;
      e = r < 0 ? pu(t) : 0;
    } else
      return !1;
  }
}
function pu(t) {
  return t.nodeType == 3 ? t.nodeValue.length : t.childNodes.length;
}
const C8 = { left: 0, right: 0, top: 0, bottom: 0 };
function wb(t, e) {
  let n = e ? t.left : t.right;
  return { left: n, right: n, top: t.top, bottom: t.bottom };
}
function WW(t) {
  return {
    left: 0,
    right: t.innerWidth,
    top: 0,
    bottom: t.innerHeight
  };
}
function qW(t, e, n, i, r, s, o, l) {
  let a = t.ownerDocument, c = a.defaultView || window;
  for (let u = t; u; )
    if (u.nodeType == 1) {
      let f, h = u == a.body;
      if (h)
        f = WW(c);
      else {
        if (u.scrollHeight <= u.clientHeight && u.scrollWidth <= u.clientWidth) {
          u = u.assignedSlot || u.parentNode;
          continue;
        }
        let g = u.getBoundingClientRect();
        f = {
          left: g.left,
          right: g.left + u.clientWidth,
          top: g.top,
          bottom: g.top + u.clientHeight
        };
      }
      let d = 0, p = 0;
      if (r == "nearest")
        e.top < f.top ? (p = -(f.top - e.top + o), n > 0 && e.bottom > f.bottom + p && (p = e.bottom - f.bottom + p + o)) : e.bottom > f.bottom && (p = e.bottom - f.bottom + o, n < 0 && e.top - p < f.top && (p = -(f.top + p - e.top + o)));
      else {
        let g = e.bottom - e.top, _ = f.bottom - f.top;
        p = (r == "center" && g <= _ ? e.top + g / 2 - _ / 2 : r == "start" || r == "center" && n < 0 ? e.top - o : e.bottom - _ + o) - f.top;
      }
      if (i == "nearest" ? e.left < f.left ? (d = -(f.left - e.left + s), n > 0 && e.right > f.right + d && (d = e.right - f.right + d + s)) : e.right > f.right && (d = e.right - f.right + s, n < 0 && e.left < f.left + d && (d = -(f.left + d - e.left + s))) : d = (i == "center" ? e.left + (e.right - e.left) / 2 - (f.right - f.left) / 2 : i == "start" == l ? e.left - s : e.right - (f.right - f.left) + s) - f.left, d || p)
        if (h)
          c.scrollBy(d, p);
        else {
          let g = 0, _ = 0;
          if (p) {
            let m = u.scrollTop;
            u.scrollTop += p, _ = u.scrollTop - m;
          }
          if (d) {
            let m = u.scrollLeft;
            u.scrollLeft += d, g = u.scrollLeft - m;
          }
          e = {
            left: e.left - g,
            top: e.top - _,
            right: e.right - g,
            bottom: e.bottom - _
          }, g && Math.abs(g - d) < 1 && (i = "nearest"), _ && Math.abs(_ - p) < 1 && (r = "nearest");
        }
      if (h)
        break;
      u = u.assignedSlot || u.parentNode;
    } else if (u.nodeType == 11)
      u = u.host;
    else
      break;
}
function JW(t) {
  let e = t.ownerDocument;
  for (let n = t.parentNode; n && n != e.body; )
    if (n.nodeType == 1) {
      if (n.scrollHeight > n.clientHeight || n.scrollWidth > n.clientWidth)
        return n;
      n = n.assignedSlot || n.parentNode;
    } else if (n.nodeType == 11)
      n = n.host;
    else
      break;
  return null;
}
class KW {
  constructor() {
    this.anchorNode = null, this.anchorOffset = 0, this.focusNode = null, this.focusOffset = 0;
  }
  eq(e) {
    return this.anchorNode == e.anchorNode && this.anchorOffset == e.anchorOffset && this.focusNode == e.focusNode && this.focusOffset == e.focusOffset;
  }
  setRange(e) {
    this.set(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset);
  }
  set(e, n, i, r) {
    this.anchorNode = e, this.anchorOffset = n, this.focusNode = i, this.focusOffset = r;
  }
}
let ea = null;
function S8(t) {
  if (t.setActive)
    return t.setActive();
  if (ea)
    return t.focus(ea);
  let e = [];
  for (let n = t; n && (e.push(n, n.scrollTop, n.scrollLeft), n != n.ownerDocument); n = n.parentNode)
    ;
  if (t.focus(ea == null ? {
    get preventScroll() {
      return ea = { preventScroll: !0 }, !0;
    }
  } : void 0), !ea) {
    ea = !1;
    for (let n = 0; n < e.length; ) {
      let i = e[n++], r = e[n++], s = e[n++];
      i.scrollTop != r && (i.scrollTop = r), i.scrollLeft != s && (i.scrollLeft = s);
    }
  }
}
let dk;
function Fa(t, e, n = e) {
  let i = dk || (dk = document.createRange());
  return i.setEnd(t, n), i.setStart(t, e), i;
}
function _a(t, e, n) {
  let i = { key: e, code: e, keyCode: n, which: n, cancelable: !0 }, r = new KeyboardEvent("keydown", i);
  r.synthetic = !0, t.dispatchEvent(r);
  let s = new KeyboardEvent("keyup", i);
  return s.synthetic = !0, t.dispatchEvent(s), r.defaultPrevented || s.defaultPrevented;
}
function GW(t) {
  for (; t; ) {
    if (t && (t.nodeType == 9 || t.nodeType == 11 && t.host))
      return t;
    t = t.assignedSlot || t.parentNode;
  }
  return null;
}
function E8(t) {
  for (; t.attributes.length; )
    t.removeAttributeNode(t.attributes[0]);
}
function YW(t, e) {
  let n = e.focusNode, i = e.focusOffset;
  if (!n || e.anchorNode != n || e.anchorOffset != i)
    return !1;
  for (; ; )
    if (i) {
      if (n.nodeType != 1)
        return !1;
      let r = n.childNodes[i - 1];
      r.contentEditable == "false" ? i-- : (n = r, i = pu(n));
    } else {
      if (n == t)
        return !0;
      i = ad(n), n = n.parentNode;
    }
}
class Ti {
  constructor(e, n, i = !0) {
    this.node = e, this.offset = n, this.precise = i;
  }
  static before(e, n) {
    return new Ti(e.parentNode, ad(e), n);
  }
  static after(e, n) {
    return new Ti(e.parentNode, ad(e) + 1, n);
  }
}
const vb = [];
class pn {
  constructor() {
    this.parent = null, this.dom = null, this.dirty = 2;
  }
  get editorView() {
    if (!this.parent)
      throw new Error("Accessing view in orphan content view");
    return this.parent.editorView;
  }
  get overrideDOMText() {
    return null;
  }
  get posAtStart() {
    return this.parent ? this.parent.posBefore(this) : 0;
  }
  get posAtEnd() {
    return this.posAtStart + this.length;
  }
  posBefore(e) {
    let n = this.posAtStart;
    for (let i of this.children) {
      if (i == e)
        return n;
      n += i.length + i.breakAfter;
    }
    throw new RangeError("Invalid child in posBefore");
  }
  posAfter(e) {
    return this.posBefore(e) + e.length;
  }
  coordsAt(e, n) {
    return null;
  }
  sync(e) {
    if (this.dirty & 2) {
      let n = this.dom, i = null, r;
      for (let s of this.children) {
        if (s.dirty) {
          if (!s.dom && (r = i ? i.nextSibling : n.firstChild)) {
            let o = pn.get(r);
            (!o || !o.parent && o.canReuseDOM(s)) && s.reuseDOM(r);
          }
          s.sync(e), s.dirty = 0;
        }
        if (r = i ? i.nextSibling : n.firstChild, e && !e.written && e.node == n && r != s.dom && (e.written = !0), s.dom.parentNode == n)
          for (; r && r != s.dom; )
            r = pk(r);
        else
          n.insertBefore(s.dom, r);
        i = s.dom;
      }
      for (r = i ? i.nextSibling : n.firstChild, r && e && e.node == n && (e.written = !0); r; )
        r = pk(r);
    } else if (this.dirty & 1)
      for (let n of this.children)
        n.dirty && (n.sync(e), n.dirty = 0);
  }
  reuseDOM(e) {
  }
  localPosFromDOM(e, n) {
    let i;
    if (e == this.dom)
      i = this.dom.childNodes[n];
    else {
      let r = pu(e) == 0 ? 0 : n == 0 ? -1 : 1;
      for (; ; ) {
        let s = e.parentNode;
        if (s == this.dom)
          break;
        r == 0 && s.firstChild != s.lastChild && (e == s.firstChild ? r = -1 : r = 1), e = s;
      }
      r < 0 ? i = e : i = e.nextSibling;
    }
    if (i == this.dom.firstChild)
      return 0;
    for (; i && !pn.get(i); )
      i = i.nextSibling;
    if (!i)
      return this.length;
    for (let r = 0, s = 0; ; r++) {
      let o = this.children[r];
      if (o.dom == i)
        return s;
      s += o.length + o.breakAfter;
    }
  }
  domBoundsAround(e, n, i = 0) {
    let r = -1, s = -1, o = -1, l = -1;
    for (let a = 0, c = i, u = i; a < this.children.length; a++) {
      let f = this.children[a], h = c + f.length;
      if (c < e && h > n)
        return f.domBoundsAround(e, n, c);
      if (h >= e && r == -1 && (r = a, s = c), c > n && f.dom.parentNode == this.dom) {
        o = a, l = u;
        break;
      }
      u = h, c = h + f.breakAfter;
    }
    return {
      from: s,
      to: l < 0 ? i + this.length : l,
      startDOM: (r ? this.children[r - 1].dom.nextSibling : null) || this.dom.firstChild,
      endDOM: o < this.children.length && o >= 0 ? this.children[o].dom : null
    };
  }
  markDirty(e = !1) {
    this.dirty |= 2, this.markParentsDirty(e);
  }
  markParentsDirty(e) {
    for (let n = this.parent; n; n = n.parent) {
      if (e && (n.dirty |= 2), n.dirty & 1)
        return;
      n.dirty |= 1, e = !1;
    }
  }
  setParent(e) {
    this.parent != e && (this.parent = e, this.dirty && this.markParentsDirty(!0));
  }
  setDOM(e) {
    this.dom && (this.dom.cmView = null), this.dom = e, e.cmView = this;
  }
  get rootView() {
    for (let e = this; ; ) {
      let n = e.parent;
      if (!n)
        return e;
      e = n;
    }
  }
  replaceChildren(e, n, i = vb) {
    this.markDirty();
    for (let r = e; r < n; r++) {
      let s = this.children[r];
      s.parent == this && s.destroy();
    }
    this.children.splice(e, n - e, ...i);
    for (let r = 0; r < i.length; r++)
      i[r].setParent(this);
  }
  ignoreMutation(e) {
    return !1;
  }
  ignoreEvent(e) {
    return !1;
  }
  childCursor(e = this.length) {
    return new A8(this.children, e, this.children.length);
  }
  childPos(e, n = 1) {
    return this.childCursor().findPos(e, n);
  }
  toString() {
    let e = this.constructor.name.replace("View", "");
    return e + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + (e == "Text" ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");
  }
  static get(e) {
    return e.cmView;
  }
  get isEditable() {
    return !0;
  }
  merge(e, n, i, r, s, o) {
    return !1;
  }
  become(e) {
    return !1;
  }
  canReuseDOM(e) {
    return e.constructor == this.constructor;
  }
  getSide() {
    return 0;
  }
  destroy() {
    this.parent = null;
  }
}
pn.prototype.breakAfter = 0;
function pk(t) {
  let e = t.nextSibling;
  return t.parentNode.removeChild(t), e;
}
class A8 {
  constructor(e, n, i) {
    this.children = e, this.pos = n, this.i = i, this.off = 0;
  }
  findPos(e, n = 1) {
    for (; ; ) {
      if (e > this.pos || e == this.pos && (n > 0 || this.i == 0 || this.children[this.i - 1].breakAfter))
        return this.off = e - this.pos, this;
      let i = this.children[--this.i];
      this.pos -= i.length + i.breakAfter;
    }
  }
}
function M8(t, e, n, i, r, s, o, l, a) {
  let { children: c } = t, u = c.length ? c[e] : null, f = s.length ? s[s.length - 1] : null, h = f ? f.breakAfter : o;
  if (!(e == i && u && !o && !h && s.length < 2 && u.merge(n, r, s.length ? f : null, n == 0, l, a))) {
    if (i < c.length) {
      let d = c[i];
      d && r < d.length ? (e == i && (d = d.split(r), r = 0), !h && f && d.merge(0, r, f, !0, 0, a) ? s[s.length - 1] = d : (r && d.merge(0, r, null, !1, 0, a), s.push(d))) : d != null && d.breakAfter && (f ? f.breakAfter = 1 : o = 1), i++;
    }
    for (u && (u.breakAfter = o, n > 0 && (!o && s.length && u.merge(n, u.length, s[0], !1, l, 0) ? u.breakAfter = s.shift().breakAfter : (n < u.length || u.children.length && u.children[u.children.length - 1].length == 0) && u.merge(n, u.length, null, !1, l, 0), e++)); e < i && s.length; )
      if (c[i - 1].become(s[s.length - 1]))
        i--, s.pop(), a = s.length ? 0 : l;
      else if (c[e].become(s[0]))
        e++, s.shift(), l = s.length ? 0 : a;
      else
        break;
    !s.length && e && i < c.length && !c[e - 1].breakAfter && c[i].merge(0, 0, c[e - 1], !1, l, a) && e--, (e < i || s.length) && t.replaceChildren(e, i, s);
  }
}
function O8(t, e, n, i, r, s) {
  let o = t.childCursor(), { i: l, off: a } = o.findPos(n, 1), { i: c, off: u } = o.findPos(e, -1), f = e - n;
  for (let h of i)
    f += h.length;
  t.length += f, M8(t, c, u, l, a, i, 0, r, s);
}
let $i = typeof navigator < "u" ? navigator : { userAgent: "", vendor: "", platform: "" }, y1 = typeof document < "u" ? document : { documentElement: { style: {} } };
const w1 = /* @__PURE__ */ /Edge\/(\d+)/.exec($i.userAgent), T8 = /* @__PURE__ */ /MSIE \d/.test($i.userAgent), v1 = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($i.userAgent), Dp = !!(T8 || v1 || w1), gk = !Dp && /* @__PURE__ */ /gecko\/(\d+)/i.test($i.userAgent), Vg = !Dp && /* @__PURE__ */ /Chrome\/(\d+)/.exec($i.userAgent), mk = "webkitFontSmoothing" in y1.documentElement.style, R8 = !Dp && /* @__PURE__ */ /Apple Computer/.test($i.vendor), bk = R8 && (/* @__PURE__ */ /Mobile\/\w+/.test($i.userAgent) || $i.maxTouchPoints > 2);
var it = {
  mac: bk || /* @__PURE__ */ /Mac/.test($i.platform),
  windows: /* @__PURE__ */ /Win/.test($i.platform),
  linux: /* @__PURE__ */ /Linux|X11/.test($i.platform),
  ie: Dp,
  ie_version: T8 ? y1.documentMode || 6 : v1 ? +v1[1] : w1 ? +w1[1] : 0,
  gecko: gk,
  gecko_version: gk ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec($i.userAgent) || [0, 0])[1] : 0,
  chrome: !!Vg,
  chrome_version: Vg ? +Vg[1] : 0,
  ios: bk,
  android: /* @__PURE__ */ /Android\b/.test($i.userAgent),
  webkit: mk,
  safari: R8,
  webkit_version: mk ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,
  tabSize: y1.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
};
const XW = 256;
class Ho extends pn {
  constructor(e) {
    super(), this.text = e;
  }
  get length() {
    return this.text.length;
  }
  createDOM(e) {
    this.setDOM(e || document.createTextNode(this.text));
  }
  sync(e) {
    this.dom || this.createDOM(), this.dom.nodeValue != this.text && (e && e.node == this.dom && (e.written = !0), this.dom.nodeValue = this.text);
  }
  reuseDOM(e) {
    e.nodeType == 3 && this.createDOM(e);
  }
  merge(e, n, i) {
    return i && (!(i instanceof Ho) || this.length - (n - e) + i.length > XW) ? !1 : (this.text = this.text.slice(0, e) + (i ? i.text : "") + this.text.slice(n), this.markDirty(), !0);
  }
  split(e) {
    let n = new Ho(this.text.slice(e));
    return this.text = this.text.slice(0, e), this.markDirty(), n;
  }
  localPosFromDOM(e, n) {
    return e == this.dom ? n : n ? this.text.length : 0;
  }
  domAtPos(e) {
    return new Ti(this.dom, e);
  }
  domBoundsAround(e, n, i) {
    return { from: i, to: i + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };
  }
  coordsAt(e, n) {
    return k1(this.dom, e, n);
  }
}
class As extends pn {
  constructor(e, n = [], i = 0) {
    super(), this.mark = e, this.children = n, this.length = i;
    for (let r of n)
      r.setParent(this);
  }
  setAttrs(e) {
    if (E8(e), this.mark.class && (e.className = this.mark.class), this.mark.attrs)
      for (let n in this.mark.attrs)
        e.setAttribute(n, this.mark.attrs[n]);
    return e;
  }
  reuseDOM(e) {
    e.nodeName == this.mark.tagName.toUpperCase() && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    this.dom ? this.dirty & 4 && this.setAttrs(this.dom) : this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))), super.sync(e);
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof As && i.mark.eq(this.mark)) || e && s <= 0 || n < this.length && o <= 0) ? !1 : (O8(this, e, n, i ? i.children : [], s - 1, o - 1), this.markDirty(), !0);
  }
  split(e) {
    let n = [], i = 0, r = -1, s = 0;
    for (let l of this.children) {
      let a = i + l.length;
      a > e && n.push(i < e ? l.split(e - i) : l), r < 0 && i >= e && (r = s), i = a, s++;
    }
    let o = this.length - e;
    return this.length = e, r > -1 && (this.children.length = r, this.markDirty()), new As(this.mark, n, o);
  }
  domAtPos(e) {
    return D8(this, e);
  }
  coordsAt(e, n) {
    return L8(this, e, n);
  }
}
function k1(t, e, n) {
  let i = t.nodeValue.length;
  e > i && (e = i);
  let r = e, s = e, o = 0;
  e == 0 && n < 0 || e == i && n >= 0 ? it.chrome || it.gecko || (e ? (r--, o = 1) : s < i && (s++, o = -1)) : n < 0 ? r-- : s < i && s++;
  let l = Fa(t, r, s).getClientRects();
  if (!l.length)
    return C8;
  let a = l[(o ? o < 0 : n >= 0) ? 0 : l.length - 1];
  return it.safari && !o && a.width == 0 && (a = Array.prototype.find.call(l, (c) => c.width) || a), o ? wb(a, o < 0) : a || null;
}
class So extends pn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.side = i, this.prevWidget = null;
  }
  static create(e, n, i) {
    return new (e.customView || So)(e, n, i);
  }
  split(e) {
    let n = So.create(this.widget, this.length - e, this.side);
    return this.length -= e, n;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  getSide() {
    return this.side;
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof So) || !this.widget.compare(i.widget) || e > 0 && s <= 0 || n < this.length && o <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  become(e) {
    return e.length == this.length && e instanceof So && e.side == this.side && this.widget.constructor == e.widget.constructor ? (this.widget.eq(e.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  get overrideDOMText() {
    if (this.length == 0)
      return Ht.empty;
    let e = this;
    for (; e.parent; )
      e = e.parent;
    let n = e.editorView, i = n && n.state.doc, r = this.posAtStart;
    return i ? i.slice(r, r + this.length) : Ht.empty;
  }
  domAtPos(e) {
    return e == 0 ? Ti.before(this.dom) : Ti.after(this.dom, e == this.length);
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e, n) {
    let i = this.dom.getClientRects(), r = null;
    if (!i.length)
      return C8;
    for (let s = e > 0 ? i.length - 1 : 0; r = i[s], !(e > 0 ? s == 0 : s == i.length - 1 || r.top < r.bottom); s += e > 0 ? -1 : 1)
      ;
    return this.length ? r : wb(r, this.side > 0);
  }
  get isEditable() {
    return !1;
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class P8 extends So {
  domAtPos(e) {
    let { topView: n, text: i } = this.widget;
    return n ? C1(e, 0, n, i, (r, s) => r.domAtPos(s), (r) => new Ti(i, Math.min(r, i.nodeValue.length))) : new Ti(i, Math.min(e, i.nodeValue.length));
  }
  sync() {
    this.setDOM(this.widget.toDOM());
  }
  localPosFromDOM(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? I8(e, n, i, r) : Math.min(n, this.length);
  }
  ignoreMutation() {
    return !1;
  }
  get overrideDOMText() {
    return null;
  }
  coordsAt(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? C1(e, n, i, r, (s, o, l) => s.coordsAt(o, l), (s, o) => k1(r, s, o)) : k1(r, e, n);
  }
  destroy() {
    var e;
    super.destroy(), (e = this.widget.topView) === null || e === void 0 || e.destroy();
  }
  get isEditable() {
    return !0;
  }
  canReuseDOM() {
    return !0;
  }
}
function C1(t, e, n, i, r, s) {
  if (n instanceof As) {
    for (let o = n.dom.firstChild; o; o = o.nextSibling) {
      let l = pn.get(o);
      if (!l)
        return s(t, e);
      let a = xa(o, i), c = l.length + (a ? i.nodeValue.length : 0);
      if (t < c || t == c && l.getSide() <= 0)
        return a ? C1(t, e, l, i, r, s) : r(l, t, e);
      t -= c;
    }
    return r(n, n.length, -1);
  } else
    return n.dom == i ? s(t, e) : r(n, t, e);
}
function I8(t, e, n, i) {
  if (n instanceof As)
    for (let r of n.children) {
      let s = 0, o = xa(r.dom, i);
      if (xa(r.dom, t))
        return s + (o ? I8(t, e, r, i) : r.localPosFromDOM(t, e));
      s += o ? i.nodeValue.length : r.length;
    }
  else if (n.dom == i)
    return Math.min(e, i.nodeValue.length);
  return n.localPosFromDOM(t, e);
}
class za extends pn {
  constructor(e) {
    super(), this.side = e;
  }
  get length() {
    return 0;
  }
  merge() {
    return !1;
  }
  become(e) {
    return e instanceof za && e.side == this.side;
  }
  split() {
    return new za(this.side);
  }
  sync() {
    if (!this.dom) {
      let e = document.createElement("img");
      e.className = "cm-widgetBuffer", e.setAttribute("aria-hidden", "true"), this.setDOM(e);
    }
  }
  getSide() {
    return this.side;
  }
  domAtPos(e) {
    return Ti.before(this.dom);
  }
  localPosFromDOM() {
    return 0;
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e) {
    let n = this.dom.getBoundingClientRect(), i = QW(this, this.side > 0 ? -1 : 1);
    return i && i.top < n.bottom && i.bottom > n.top ? { left: n.left, right: n.right, top: i.top, bottom: i.bottom } : n;
  }
  get overrideDOMText() {
    return Ht.empty;
  }
}
Ho.prototype.children = So.prototype.children = za.prototype.children = vb;
function QW(t, e) {
  let n = t.parent, i = n ? n.children.indexOf(t) : -1;
  for (; n && i >= 0; )
    if (e < 0 ? i > 0 : i < n.children.length) {
      let r = n.children[i + e];
      if (r instanceof Ho) {
        let s = r.coordsAt(e < 0 ? r.length : 0, e);
        if (s)
          return s;
      }
      i += e;
    } else if (n instanceof As && n.parent)
      i = n.parent.children.indexOf(n) + (e < 0 ? 0 : 1), n = n.parent;
    else {
      let r = n.dom.lastChild;
      if (r && r.nodeName == "BR")
        return r.getClientRects()[0];
      break;
    }
}
function D8(t, e) {
  let n = t.dom, { children: i } = t, r = 0;
  for (let s = 0; r < i.length; r++) {
    let o = i[r], l = s + o.length;
    if (!(l == s && o.getSide() <= 0)) {
      if (e > s && e < l && o.dom.parentNode == n)
        return o.domAtPos(e - s);
      if (e <= s)
        break;
      s = l;
    }
  }
  for (let s = r; s > 0; s--) {
    let o = i[s - 1];
    if (o.dom.parentNode == n)
      return o.domAtPos(o.length);
  }
  for (let s = r; s < i.length; s++) {
    let o = i[s];
    if (o.dom.parentNode == n)
      return o.domAtPos(0);
  }
  return new Ti(n, 0);
}
function N8(t, e, n) {
  let i, { children: r } = t;
  n > 0 && e instanceof As && r.length && (i = r[r.length - 1]) instanceof As && i.mark.eq(e.mark) ? N8(i, e.children[0], n - 1) : (r.push(e), e.setParent(t)), t.length += e.length;
}
function L8(t, e, n) {
  let i = null, r = -1, s = null, o = -1;
  function l(c, u) {
    for (let f = 0, h = 0; f < c.children.length && h <= u; f++) {
      let d = c.children[f], p = h + d.length;
      p >= u && (d.children.length ? l(d, u - h) : !s && (p > u || h == p && d.getSide() > 0) ? (s = d, o = u - h) : (h < u || h == p && d.getSide() < 0) && (i = d, r = u - h)), h = p;
    }
  }
  l(t, e);
  let a = (n < 0 ? i : s) || i || s;
  return a ? a.coordsAt(Math.max(0, a == i ? r : o), n) : ZW(t);
}
function ZW(t) {
  let e = t.dom.lastChild;
  if (!e)
    return t.dom.getBoundingClientRect();
  let n = du(e);
  return n[n.length - 1] || null;
}
function S1(t, e) {
  for (let n in t)
    n == "class" && e.class ? e.class += " " + t.class : n == "style" && e.style ? e.style += ";" + t.style : e[n] = t[n];
  return e;
}
function kb(t, e) {
  if (t == e)
    return !0;
  if (!t || !e)
    return !1;
  let n = Object.keys(t), i = Object.keys(e);
  if (n.length != i.length)
    return !1;
  for (let r of n)
    if (i.indexOf(r) == -1 || t[r] !== e[r])
      return !1;
  return !0;
}
function E1(t, e, n) {
  let i = null;
  if (e)
    for (let r in e)
      n && r in n || t.removeAttribute(i = r);
  if (n)
    for (let r in n)
      e && e[r] == n[r] || t.setAttribute(i = r, n[r]);
  return !!i;
}
class $o {
  eq(e) {
    return !1;
  }
  updateDOM(e) {
    return !1;
  }
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  get estimatedHeight() {
    return -1;
  }
  ignoreEvent(e) {
    return !0;
  }
  get customView() {
    return null;
  }
  destroy(e) {
  }
}
var on = /* @__PURE__ */ function(t) {
  return t[t.Text = 0] = "Text", t[t.WidgetBefore = 1] = "WidgetBefore", t[t.WidgetAfter = 2] = "WidgetAfter", t[t.WidgetRange = 3] = "WidgetRange", t;
}(on || (on = {}));
class gt extends Pl {
  constructor(e, n, i, r) {
    super(), this.startSide = e, this.endSide = n, this.widget = i, this.spec = r;
  }
  get heightRelevant() {
    return !1;
  }
  static mark(e) {
    return new Np(e);
  }
  static widget(e) {
    let n = e.side || 0, i = !!e.block;
    return n += i ? n > 0 ? 3e8 : -4e8 : n > 0 ? 1e8 : -1e8, new Il(e, n, n, i, e.widget || null, !1);
  }
  static replace(e) {
    let n = !!e.block, i, r;
    if (e.isBlockGap)
      i = -5e8, r = 4e8;
    else {
      let { start: s, end: o } = j8(e, n);
      i = (s ? n ? -3e8 : -1 : 5e8) - 1, r = (o ? n ? 2e8 : 1 : -6e8) + 1;
    }
    return new Il(e, i, r, n, e.widget || null, !0);
  }
  static line(e) {
    return new Yu(e);
  }
  static set(e, n = !1) {
    return Wt.of(e, n);
  }
  hasHeight() {
    return this.widget ? this.widget.estimatedHeight > -1 : !1;
  }
}
gt.none = Wt.empty;
class Np extends gt {
  constructor(e) {
    let { start: n, end: i } = j8(e);
    super(n ? -1 : 5e8, i ? 1 : -6e8, null, e), this.tagName = e.tagName || "span", this.class = e.class || "", this.attrs = e.attributes || null;
  }
  eq(e) {
    return this == e || e instanceof Np && this.tagName == e.tagName && this.class == e.class && kb(this.attrs, e.attrs);
  }
  range(e, n = e) {
    if (e >= n)
      throw new RangeError("Mark decorations may not be empty");
    return super.range(e, n);
  }
}
Np.prototype.point = !1;
class Yu extends gt {
  constructor(e) {
    super(-2e8, -2e8, null, e);
  }
  eq(e) {
    return e instanceof Yu && kb(this.spec.attributes, e.spec.attributes);
  }
  range(e, n = e) {
    if (n != e)
      throw new RangeError("Line decoration ranges must be zero-length");
    return super.range(e, n);
  }
}
Yu.prototype.mapMode = Ni.TrackBefore;
Yu.prototype.point = !0;
class Il extends gt {
  constructor(e, n, i, r, s, o) {
    super(n, i, s, e), this.block = r, this.isReplace = o, this.mapMode = r ? n <= 0 ? Ni.TrackBefore : Ni.TrackAfter : Ni.TrackDel;
  }
  get type() {
    return this.startSide < this.endSide ? on.WidgetRange : this.startSide <= 0 ? on.WidgetBefore : on.WidgetAfter;
  }
  get heightRelevant() {
    return this.block || !!this.widget && this.widget.estimatedHeight >= 5;
  }
  eq(e) {
    return e instanceof Il && $W(this.widget, e.widget) && this.block == e.block && this.startSide == e.startSide && this.endSide == e.endSide;
  }
  range(e, n = e) {
    if (this.isReplace && (e > n || e == n && this.startSide > 0 && this.endSide <= 0))
      throw new RangeError("Invalid range for replacement decoration");
    if (!this.isReplace && n != e)
      throw new RangeError("Widget decorations can only have zero-length ranges");
    return super.range(e, n);
  }
}
Il.prototype.point = !0;
function j8(t, e = !1) {
  let { inclusiveStart: n, inclusiveEnd: i } = t;
  return n == null && (n = t.inclusive), i == null && (i = t.inclusive), { start: n ?? e, end: i ?? e };
}
function $W(t, e) {
  return t == e || !!(t && e && t.compare(e));
}
function A1(t, e, n, i = 0) {
  let r = n.length - 1;
  r >= 0 && n[r] + i >= t ? n[r] = Math.max(n[r], e) : n.push(t, e);
}
class Bi extends pn {
  constructor() {
    super(...arguments), this.children = [], this.length = 0, this.prevAttrs = void 0, this.attrs = null, this.breakAfter = 0;
  }
  merge(e, n, i, r, s, o) {
    if (i) {
      if (!(i instanceof Bi))
        return !1;
      this.dom || i.transferDOM(this);
    }
    return r && this.setDeco(i ? i.attrs : null), O8(this, e, n, i ? i.children : [], s, o), !0;
  }
  split(e) {
    let n = new Bi();
    if (n.breakAfter = this.breakAfter, this.length == 0)
      return n;
    let { i, off: r } = this.childPos(e);
    r && (n.append(this.children[i].split(r), 0), this.children[i].merge(r, this.children[i].length, null, !1, 0, 0), i++);
    for (let s = i; s < this.children.length; s++)
      n.append(this.children[s], 0);
    for (; i > 0 && this.children[i - 1].length == 0; )
      this.children[--i].destroy();
    return this.children.length = i, this.markDirty(), this.length = e, n;
  }
  transferDOM(e) {
    this.dom && (this.markDirty(), e.setDOM(this.dom), e.prevAttrs = this.prevAttrs === void 0 ? this.attrs : this.prevAttrs, this.prevAttrs = void 0, this.dom = null);
  }
  setDeco(e) {
    kb(this.attrs, e) || (this.dom && (this.prevAttrs = this.attrs, this.markDirty()), this.attrs = e);
  }
  append(e, n) {
    N8(this, e, n);
  }
  addLineDeco(e) {
    let n = e.spec.attributes, i = e.spec.class;
    n && (this.attrs = S1(n, this.attrs || {})), i && (this.attrs = S1({ class: i }, this.attrs || {}));
  }
  domAtPos(e) {
    return D8(this, e);
  }
  reuseDOM(e) {
    e.nodeName == "DIV" && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    var n;
    this.dom ? this.dirty & 4 && (E8(this.dom), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0) : (this.setDOM(document.createElement("div")), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0), this.prevAttrs !== void 0 && (E1(this.dom, this.prevAttrs, this.attrs), this.dom.classList.add("cm-line"), this.prevAttrs = void 0), super.sync(e);
    let i = this.dom.lastChild;
    for (; i && pn.get(i) instanceof As; )
      i = i.lastChild;
    if (!i || !this.length || i.nodeName != "BR" && ((n = pn.get(i)) === null || n === void 0 ? void 0 : n.isEditable) == !1 && (!it.ios || !this.children.some((r) => r instanceof Ho))) {
      let r = document.createElement("BR");
      r.cmIgnore = !0, this.dom.appendChild(r);
    }
  }
  measureTextSize() {
    if (this.children.length == 0 || this.length > 20)
      return null;
    let e = 0;
    for (let n of this.children) {
      if (!(n instanceof Ho) || /[^ -~]/.test(n.text))
        return null;
      let i = du(n.dom);
      if (i.length != 1)
        return null;
      e += i[0].width;
    }
    return e ? {
      lineHeight: this.dom.getBoundingClientRect().height,
      charWidth: e / this.length
    } : null;
  }
  coordsAt(e, n) {
    return L8(this, e, n);
  }
  become(e) {
    return !1;
  }
  get type() {
    return on.Text;
  }
  static find(e, n) {
    for (let i = 0, r = 0; i < e.children.length; i++) {
      let s = e.children[i], o = r + s.length;
      if (o >= n) {
        if (s instanceof Bi)
          return s;
        if (o > n)
          break;
      }
      r = o + s.breakAfter;
    }
    return null;
  }
}
class yl extends pn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.type = i, this.breakAfter = 0, this.prevWidget = null;
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof yl) || !this.widget.compare(i.widget) || e > 0 && s <= 0 || n < this.length && o <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  domAtPos(e) {
    return e == 0 ? Ti.before(this.dom) : Ti.after(this.dom, e == this.length);
  }
  split(e) {
    let n = this.length - e;
    this.length = e;
    let i = new yl(this.widget, n, this.type);
    return i.breakAfter = this.breakAfter, i;
  }
  get children() {
    return vb;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  get overrideDOMText() {
    return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : Ht.empty;
  }
  domBoundsAround() {
    return null;
  }
  become(e) {
    return e instanceof yl && e.type == this.type && e.widget.constructor == this.widget.constructor ? (e.widget.eq(this.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, this.length = e.length, this.breakAfter = e.breakAfter, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class Cb {
  constructor(e, n, i, r) {
    this.doc = e, this.pos = n, this.end = i, this.disallowBlockEffectsFor = r, this.content = [], this.curLine = null, this.breakAtStart = 0, this.pendingBuffer = 0, this.bufferMarks = [], this.atCursorPos = !0, this.openStart = -1, this.openEnd = -1, this.text = "", this.textOff = 0, this.cursor = e.iter(), this.skip = n;
  }
  posCovered() {
    if (this.content.length == 0)
      return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;
    let e = this.content[this.content.length - 1];
    return !e.breakAfter && !(e instanceof yl && e.type == on.WidgetBefore);
  }
  getLine() {
    return this.curLine || (this.content.push(this.curLine = new Bi()), this.atCursorPos = !0), this.curLine;
  }
  flushBuffer(e = this.bufferMarks) {
    this.pendingBuffer && (this.curLine.append(If(new za(-1), e), e.length), this.pendingBuffer = 0);
  }
  addBlockWidget(e) {
    this.flushBuffer(), this.curLine = null, this.content.push(e);
  }
  finish(e) {
    this.pendingBuffer && e <= this.bufferMarks.length ? this.flushBuffer() : this.pendingBuffer = 0, this.posCovered() || this.getLine();
  }
  buildText(e, n, i) {
    for (; e > 0; ) {
      if (this.textOff == this.text.length) {
        let { value: s, lineBreak: o, done: l } = this.cursor.next(this.skip);
        if (this.skip = 0, l)
          throw new Error("Ran out of text content when drawing inline views");
        if (o) {
          this.posCovered() || this.getLine(), this.content.length ? this.content[this.content.length - 1].breakAfter = 1 : this.breakAtStart = 1, this.flushBuffer(), this.curLine = null, this.atCursorPos = !0, e--;
          continue;
        } else
          this.text = s, this.textOff = 0;
      }
      let r = Math.min(this.text.length - this.textOff, e, 512);
      this.flushBuffer(n.slice(n.length - i)), this.getLine().append(If(new Ho(this.text.slice(this.textOff, this.textOff + r)), n), i), this.atCursorPos = !0, this.textOff += r, e -= r, i = 0;
    }
  }
  span(e, n, i, r) {
    this.buildText(n - e, i, r), this.pos = n, this.openStart < 0 && (this.openStart = r);
  }
  point(e, n, i, r, s, o) {
    if (this.disallowBlockEffectsFor[o] && i instanceof Il) {
      if (i.block)
        throw new RangeError("Block decorations may not be specified via plugins");
      if (n > this.doc.lineAt(this.pos).to)
        throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
    }
    let l = n - e;
    if (i instanceof Il)
      if (i.block) {
        let { type: a } = i;
        a == on.WidgetAfter && !this.posCovered() && this.getLine(), this.addBlockWidget(new yl(i.widget || new _k("div"), l, a));
      } else {
        let a = So.create(i.widget || new _k("span"), l, l ? 0 : i.startSide), c = this.atCursorPos && !a.isEditable && s <= r.length && (e < n || i.startSide > 0), u = !a.isEditable && (e < n || s > r.length || i.startSide <= 0), f = this.getLine();
        this.pendingBuffer == 2 && !c && (this.pendingBuffer = 0), this.flushBuffer(r), c && (f.append(If(new za(1), r), s), s = r.length + Math.max(0, s - r.length)), f.append(If(a, r), s), this.atCursorPos = u, this.pendingBuffer = u ? e < n || s > r.length ? 1 : 2 : 0, this.pendingBuffer && (this.bufferMarks = r.slice());
      }
    else
      this.doc.lineAt(this.pos).from == this.pos && this.getLine().addLineDeco(i);
    l && (this.textOff + l <= this.text.length ? this.textOff += l : (this.skip += l - (this.text.length - this.textOff), this.text = "", this.textOff = 0), this.pos = n), this.openStart < 0 && (this.openStart = s);
  }
  static build(e, n, i, r, s) {
    let o = new Cb(e, n, i, s);
    return o.openEnd = Wt.spans(r, n, i, o), o.openStart < 0 && (o.openStart = o.openEnd), o.finish(o.openEnd), o;
  }
}
function If(t, e) {
  for (let n of e)
    t = new As(n, [t], t.length);
  return t;
}
class _k extends $o {
  constructor(e) {
    super(), this.tag = e;
  }
  eq(e) {
    return e.tag == this.tag;
  }
  toDOM() {
    return document.createElement(this.tag);
  }
  updateDOM(e) {
    return e.nodeName.toLowerCase() == this.tag;
  }
}
const B8 = /* @__PURE__ */ nt.define(), x8 = /* @__PURE__ */ nt.define(), F8 = /* @__PURE__ */ nt.define(), z8 = /* @__PURE__ */ nt.define(), M1 = /* @__PURE__ */ nt.define(), V8 = /* @__PURE__ */ nt.define(), U8 = /* @__PURE__ */ nt.define({
  combine: (t) => t.some((e) => e)
}), H8 = /* @__PURE__ */ nt.define({
  combine: (t) => t.some((e) => e)
});
class cd {
  constructor(e, n = "nearest", i = "nearest", r = 5, s = 5) {
    this.range = e, this.y = n, this.x = i, this.yMargin = r, this.xMargin = s;
  }
  map(e) {
    return e.empty ? this : new cd(this.range.map(e), this.y, this.x, this.yMargin, this.xMargin);
  }
}
const yk = /* @__PURE__ */ St.define({ map: (t, e) => t.map(e) });
function ir(t, e, n) {
  let i = t.facet(z8);
  i.length ? i[0](e) : window.onerror ? window.onerror(String(e), n, void 0, void 0, e) : n ? console.error(n + ":", e) : console.error(e);
}
const Lp = /* @__PURE__ */ nt.define({ combine: (t) => t.length ? t[0] : !0 });
let eq = 0;
const Mc = /* @__PURE__ */ nt.define();
class Yn {
  constructor(e, n, i, r) {
    this.id = e, this.create = n, this.domEventHandlers = i, this.extension = r(this);
  }
  static define(e, n) {
    const { eventHandlers: i, provide: r, decorations: s } = n || {};
    return new Yn(eq++, e, i, (o) => {
      let l = [Mc.of(o)];
      return s && l.push(gu.of((a) => {
        let c = a.plugin(o);
        return c ? s(c) : gt.none;
      })), r && l.push(r(o)), l;
    });
  }
  static fromClass(e, n) {
    return Yn.define((i) => new e(i), n);
  }
}
class Ug {
  constructor(e) {
    this.spec = e, this.mustUpdate = null, this.value = null;
  }
  update(e) {
    if (this.value) {
      if (this.mustUpdate) {
        let n = this.mustUpdate;
        if (this.mustUpdate = null, this.value.update)
          try {
            this.value.update(n);
          } catch (i) {
            if (ir(n.state, i, "CodeMirror plugin crashed"), this.value.destroy)
              try {
                this.value.destroy();
              } catch {
              }
            this.deactivate();
          }
      }
    } else if (this.spec)
      try {
        this.value = this.spec.create(e);
      } catch (n) {
        ir(e.state, n, "CodeMirror plugin crashed"), this.deactivate();
      }
    return this;
  }
  destroy(e) {
    var n;
    if (!((n = this.value) === null || n === void 0) && n.destroy)
      try {
        this.value.destroy();
      } catch (i) {
        ir(e.state, i, "CodeMirror plugin crashed");
      }
  }
  deactivate() {
    this.spec = this.value = null;
  }
}
const W8 = /* @__PURE__ */ nt.define(), Sb = /* @__PURE__ */ nt.define(), gu = /* @__PURE__ */ nt.define(), q8 = /* @__PURE__ */ nt.define(), J8 = /* @__PURE__ */ nt.define(), Oc = /* @__PURE__ */ nt.define();
class ds {
  constructor(e, n, i, r) {
    this.fromA = e, this.toA = n, this.fromB = i, this.toB = r;
  }
  join(e) {
    return new ds(Math.min(this.fromA, e.fromA), Math.max(this.toA, e.toA), Math.min(this.fromB, e.fromB), Math.max(this.toB, e.toB));
  }
  addToSet(e) {
    let n = e.length, i = this;
    for (; n > 0; n--) {
      let r = e[n - 1];
      if (!(r.fromA > i.toA)) {
        if (r.toA < i.fromA)
          break;
        i = i.join(r), e.splice(n - 1, 1);
      }
    }
    return e.splice(n, 0, i), e;
  }
  static extendWithRanges(e, n) {
    if (n.length == 0)
      return e;
    let i = [];
    for (let r = 0, s = 0, o = 0, l = 0; ; r++) {
      let a = r == e.length ? null : e[r], c = o - l, u = a ? a.fromB : 1e9;
      for (; s < n.length && n[s] < u; ) {
        let f = n[s], h = n[s + 1], d = Math.max(l, f), p = Math.min(u, h);
        if (d <= p && new ds(d + c, p + c, d, p).addToSet(i), h > u)
          break;
        s += 2;
      }
      if (!a)
        return i;
      new ds(a.fromA, a.toA, a.fromB, a.toB).addToSet(i), o = a.toA, l = a.toB;
    }
  }
}
class ud {
  constructor(e, n, i) {
    this.view = e, this.state = n, this.transactions = i, this.flags = 0, this.startState = e.state, this.changes = $n.empty(this.startState.doc.length);
    for (let o of i)
      this.changes = this.changes.compose(o.changes);
    let r = [];
    this.changes.iterChangedRanges((o, l, a, c) => r.push(new ds(o, l, a, c))), this.changedRanges = r;
    let s = e.hasFocus;
    s != e.inputState.notifiedFocused && (e.inputState.notifiedFocused = s, this.flags |= 1);
  }
  static create(e, n, i) {
    return new ud(e, n, i);
  }
  get viewportChanged() {
    return (this.flags & 4) > 0;
  }
  get heightChanged() {
    return (this.flags & 2) > 0;
  }
  get geometryChanged() {
    return this.docChanged || (this.flags & 10) > 0;
  }
  get focusChanged() {
    return (this.flags & 1) > 0;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get selectionSet() {
    return this.transactions.some((e) => e.selection);
  }
  get empty() {
    return this.flags == 0 && this.transactions.length == 0;
  }
}
var Sn = /* @__PURE__ */ function(t) {
  return t[t.LTR = 0] = "LTR", t[t.RTL = 1] = "RTL", t;
}(Sn || (Sn = {}));
const O1 = Sn.LTR, tq = Sn.RTL;
function K8(t) {
  let e = [];
  for (let n = 0; n < t.length; n++)
    e.push(1 << +t[n]);
  return e;
}
const nq = /* @__PURE__ */ K8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"), iq = /* @__PURE__ */ K8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"), T1 = /* @__PURE__ */ Object.create(null), Qr = [];
for (let t of ["()", "[]", "{}"]) {
  let e = /* @__PURE__ */ t.charCodeAt(0), n = /* @__PURE__ */ t.charCodeAt(1);
  T1[e] = n, T1[n] = -e;
}
function rq(t) {
  return t <= 247 ? nq[t] : 1424 <= t && t <= 1524 ? 2 : 1536 <= t && t <= 1785 ? iq[t - 1536] : 1774 <= t && t <= 2220 ? 4 : 8192 <= t && t <= 8203 ? 256 : 64336 <= t && t <= 65023 ? 4 : t == 8204 ? 256 : 1;
}
const sq = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;
class ya {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.level = i;
  }
  get dir() {
    return this.level % 2 ? tq : O1;
  }
  side(e, n) {
    return this.dir == n == e ? this.to : this.from;
  }
  static find(e, n, i, r) {
    let s = -1;
    for (let o = 0; o < e.length; o++) {
      let l = e[o];
      if (l.from <= n && l.to >= n) {
        if (l.level == i)
          return o;
        (s < 0 || (r != 0 ? r < 0 ? l.from < n : l.to > n : e[s].level > l.level)) && (s = o);
      }
    }
    if (s < 0)
      throw new RangeError("Index out of range");
    return s;
  }
}
const vn = [];
function oq(t, e) {
  let n = t.length, i = e == O1 ? 1 : 2, r = e == O1 ? 2 : 1;
  if (!t || i == 1 && !sq.test(t))
    return G8(n);
  for (let o = 0, l = i, a = i; o < n; o++) {
    let c = rq(t.charCodeAt(o));
    c == 512 ? c = l : c == 8 && a == 4 && (c = 16), vn[o] = c == 4 ? 2 : c, c & 7 && (a = c), l = c;
  }
  for (let o = 0, l = i, a = i; o < n; o++) {
    let c = vn[o];
    if (c == 128)
      o < n - 1 && l == vn[o + 1] && l & 24 ? c = vn[o] = l : vn[o] = 256;
    else if (c == 64) {
      let u = o + 1;
      for (; u < n && vn[u] == 64; )
        u++;
      let f = o && l == 8 || u < n && vn[u] == 8 ? a == 1 ? 1 : 8 : 256;
      for (let h = o; h < u; h++)
        vn[h] = f;
      o = u - 1;
    } else
      c == 8 && a == 1 && (vn[o] = 1);
    l = c, c & 7 && (a = c);
  }
  for (let o = 0, l = 0, a = 0, c, u, f; o < n; o++)
    if (u = T1[c = t.charCodeAt(o)])
      if (u < 0) {
        for (let h = l - 3; h >= 0; h -= 3)
          if (Qr[h + 1] == -u) {
            let d = Qr[h + 2], p = d & 2 ? i : d & 4 ? d & 1 ? r : i : 0;
            p && (vn[o] = vn[Qr[h]] = p), l = h;
            break;
          }
      } else {
        if (Qr.length == 189)
          break;
        Qr[l++] = o, Qr[l++] = c, Qr[l++] = a;
      }
    else if ((f = vn[o]) == 2 || f == 1) {
      let h = f == i;
      a = h ? 0 : 1;
      for (let d = l - 3; d >= 0; d -= 3) {
        let p = Qr[d + 2];
        if (p & 2)
          break;
        if (h)
          Qr[d + 2] |= 2;
        else {
          if (p & 4)
            break;
          Qr[d + 2] |= 4;
        }
      }
    }
  for (let o = 0; o < n; o++)
    if (vn[o] == 256) {
      let l = o + 1;
      for (; l < n && vn[l] == 256; )
        l++;
      let a = (o ? vn[o - 1] : i) == 1, c = (l < n ? vn[l] : i) == 1, u = a == c ? a ? 1 : 2 : i;
      for (let f = o; f < l; f++)
        vn[f] = u;
      o = l - 1;
    }
  let s = [];
  if (i == 1)
    for (let o = 0; o < n; ) {
      let l = o, a = vn[o++] != 1;
      for (; o < n && a == (vn[o] != 1); )
        o++;
      if (a)
        for (let c = o; c > l; ) {
          let u = c, f = vn[--c] != 2;
          for (; c > l && f == (vn[c - 1] != 2); )
            c--;
          s.push(new ya(c, u, f ? 2 : 1));
        }
      else
        s.push(new ya(l, o, 0));
    }
  else
    for (let o = 0; o < n; ) {
      let l = o, a = vn[o++] == 2;
      for (; o < n && a == (vn[o] == 2); )
        o++;
      s.push(new ya(l, o, a ? 1 : 2));
    }
  return s;
}
function G8(t) {
  return [new ya(0, t, 0)];
}
let Y8 = "";
function lq(t, e, n, i, r) {
  var s;
  let o = i.head - t.from, l = -1;
  if (o == 0) {
    if (!r || !t.length)
      return null;
    e[0].level != n && (o = e[0].side(!1, n), l = 0);
  } else if (o == t.length) {
    if (r)
      return null;
    let h = e[e.length - 1];
    h.level != n && (o = h.side(!0, n), l = e.length - 1);
  }
  l < 0 && (l = ya.find(e, o, (s = i.bidiLevel) !== null && s !== void 0 ? s : -1, i.assoc));
  let a = e[l];
  o == a.side(r, n) && (a = e[l += r ? 1 : -1], o = a.side(!r, n));
  let c = r == (a.dir == n), u = ji(t.text, o, c);
  if (Y8 = t.text.slice(Math.min(o, u), Math.max(o, u)), u != a.side(r, n))
    return Pe.cursor(u + t.from, c ? -1 : 1, a.level);
  let f = l == (r ? e.length - 1 : 0) ? null : e[l + (r ? 1 : -1)];
  return !f && a.level != n ? Pe.cursor(r ? t.to : t.from, r ? -1 : 1, n) : f && f.level < a.level ? Pe.cursor(f.side(!r, n) + t.from, r ? 1 : -1, f.level) : Pe.cursor(u + t.from, r ? -1 : 1, a.level);
}
const Eo = "￿";
class X8 {
  constructor(e, n) {
    this.points = e, this.text = "", this.lineSeparator = n.facet(Rt.lineSeparator);
  }
  append(e) {
    this.text += e;
  }
  lineBreak() {
    this.text += Eo;
  }
  readRange(e, n) {
    if (!e)
      return this;
    let i = e.parentNode;
    for (let r = e; ; ) {
      this.findPointBefore(i, r), this.readNode(r);
      let s = r.nextSibling;
      if (s == n)
        break;
      let o = pn.get(r), l = pn.get(s);
      (o && l ? o.breakAfter : (o ? o.breakAfter : wk(r)) || wk(s) && (r.nodeName != "BR" || r.cmIgnore)) && this.lineBreak(), r = s;
    }
    return this.findPointBefore(i, n), this;
  }
  readTextNode(e) {
    let n = e.nodeValue;
    for (let i of this.points)
      i.node == e && (i.pos = this.text.length + Math.min(i.offset, n.length));
    for (let i = 0, r = this.lineSeparator ? null : /\r\n?|\n/g; ; ) {
      let s = -1, o = 1, l;
      if (this.lineSeparator ? (s = n.indexOf(this.lineSeparator, i), o = this.lineSeparator.length) : (l = r.exec(n)) && (s = l.index, o = l[0].length), this.append(n.slice(i, s < 0 ? n.length : s)), s < 0)
        break;
      if (this.lineBreak(), o > 1)
        for (let a of this.points)
          a.node == e && a.pos > this.text.length && (a.pos -= o - 1);
      i = s + o;
    }
  }
  readNode(e) {
    if (e.cmIgnore)
      return;
    let n = pn.get(e), i = n && n.overrideDOMText;
    if (i != null) {
      this.findPointInside(e, i.length);
      for (let r = i.iter(); !r.next().done; )
        r.lineBreak ? this.lineBreak() : this.append(r.value);
    } else
      e.nodeType == 3 ? this.readTextNode(e) : e.nodeName == "BR" ? e.nextSibling && this.lineBreak() : e.nodeType == 1 && this.readRange(e.firstChild, null);
  }
  findPointBefore(e, n) {
    for (let i of this.points)
      i.node == e && e.childNodes[i.offset] == n && (i.pos = this.text.length);
  }
  findPointInside(e, n) {
    for (let i of this.points)
      (e.nodeType == 3 ? i.node == e : e.contains(i.node)) && (i.pos = this.text.length + Math.min(n, i.offset));
  }
}
function wk(t) {
  return t.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName);
}
class vk {
  constructor(e, n) {
    this.node = e, this.offset = n, this.pos = -1;
  }
}
class kk extends pn {
  constructor(e) {
    super(), this.view = e, this.compositionDeco = gt.none, this.decorations = [], this.dynamicDecorationMap = [], this.minWidth = 0, this.minWidthFrom = 0, this.minWidthTo = 0, this.impreciseAnchor = null, this.impreciseHead = null, this.forceSelection = !1, this.lastUpdate = Date.now(), this.setDOM(e.contentDOM), this.children = [new Bi()], this.children[0].setParent(this), this.updateDeco(), this.updateInner([new ds(0, 0, 0, e.state.doc.length)], 0);
  }
  get editorView() {
    return this.view;
  }
  get length() {
    return this.view.state.doc.length;
  }
  update(e) {
    let n = e.changedRanges;
    this.minWidth > 0 && n.length && (n.every(({ fromA: o, toA: l }) => l < this.minWidthFrom || o > this.minWidthTo) ? (this.minWidthFrom = e.changes.mapPos(this.minWidthFrom, 1), this.minWidthTo = e.changes.mapPos(this.minWidthTo, 1)) : this.minWidth = this.minWidthFrom = this.minWidthTo = 0), this.view.inputState.composing < 0 ? this.compositionDeco = gt.none : (e.transactions.length || this.dirty) && (this.compositionDeco = cq(this.view, e.changes)), (it.ie || it.chrome) && !this.compositionDeco.size && e && e.state.doc.lines != e.startState.doc.lines && (this.forceSelection = !0);
    let i = this.decorations, r = this.updateDeco(), s = dq(i, r, e.changes);
    return n = ds.extendWithRanges(n, s), this.dirty == 0 && n.length == 0 ? !1 : (this.updateInner(n, e.startState.doc.length), e.transactions.length && (this.lastUpdate = Date.now()), !0);
  }
  updateInner(e, n) {
    this.view.viewState.mustMeasureContent = !0, this.updateChildren(e, n);
    let { observer: i } = this.view;
    i.ignore(() => {
      this.dom.style.height = this.view.viewState.contentHeight + "px", this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
      let s = it.chrome || it.ios ? { node: i.selectionRange.focusNode, written: !1 } : void 0;
      this.sync(s), this.dirty = 0, s && (s.written || i.selectionRange.focusNode != s.node) && (this.forceSelection = !0), this.dom.style.height = "";
    });
    let r = [];
    if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length)
      for (let s of this.children)
        s instanceof yl && s.widget instanceof Ck && r.push(s.dom);
    i.updateGaps(r);
  }
  updateChildren(e, n) {
    let i = this.childCursor(n);
    for (let r = e.length - 1; ; r--) {
      let s = r >= 0 ? e[r] : null;
      if (!s)
        break;
      let { fromA: o, toA: l, fromB: a, toB: c } = s, { content: u, breakAtStart: f, openStart: h, openEnd: d } = Cb.build(this.view.state.doc, a, c, this.decorations, this.dynamicDecorationMap), { i: p, off: g } = i.findPos(l, 1), { i: _, off: m } = i.findPos(o, -1);
      M8(this, _, m, p, g, u, f, h, d);
    }
  }
  updateSelection(e = !1, n = !1) {
    if ((e || !this.view.observer.selectionRange.focusNode) && this.view.observer.readSelectionRange(), !(n || this.mayControlSelection()))
      return;
    let i = this.forceSelection;
    this.forceSelection = !1;
    let r = this.view.state.selection.main, s = this.domAtPos(r.anchor), o = r.empty ? s : this.domAtPos(r.head);
    if (it.gecko && r.empty && aq(s)) {
      let a = document.createTextNode("");
      this.view.observer.ignore(() => s.node.insertBefore(a, s.node.childNodes[s.offset] || null)), s = o = new Ti(a, 0), i = !0;
    }
    let l = this.view.observer.selectionRange;
    (i || !l.focusNode || !ld(s.node, s.offset, l.anchorNode, l.anchorOffset) || !ld(o.node, o.offset, l.focusNode, l.focusOffset)) && (this.view.observer.ignore(() => {
      it.android && it.chrome && this.dom.contains(l.focusNode) && pq(l.focusNode, this.dom) && (this.dom.blur(), this.dom.focus({ preventScroll: !0 }));
      let a = od(this.view.root);
      if (a)
        if (r.empty) {
          if (it.gecko) {
            let c = fq(s.node, s.offset);
            if (c && c != 3) {
              let u = Z8(s.node, s.offset, c == 1 ? 1 : -1);
              u && (s = new Ti(u, c == 1 ? 0 : u.nodeValue.length));
            }
          }
          a.collapse(s.node, s.offset), r.bidiLevel != null && l.cursorBidiLevel != null && (l.cursorBidiLevel = r.bidiLevel);
        } else if (a.extend) {
          a.collapse(s.node, s.offset);
          try {
            a.extend(o.node, o.offset);
          } catch {
          }
        } else {
          let c = document.createRange();
          r.anchor > r.head && ([s, o] = [o, s]), c.setEnd(o.node, o.offset), c.setStart(s.node, s.offset), a.removeAllRanges(), a.addRange(c);
        }
    }), this.view.observer.setSelectionRange(s, o)), this.impreciseAnchor = s.precise ? null : new Ti(l.anchorNode, l.anchorOffset), this.impreciseHead = o.precise ? null : new Ti(l.focusNode, l.focusOffset);
  }
  enforceCursorAssoc() {
    if (this.compositionDeco.size)
      return;
    let { view: e } = this, n = e.state.selection.main, i = od(e.root), { anchorNode: r, anchorOffset: s } = e.observer.selectionRange;
    if (!i || !n.empty || !n.assoc || !i.modify)
      return;
    let o = Bi.find(this, n.head);
    if (!o)
      return;
    let l = o.posAtStart;
    if (n.head == l || n.head == l + o.length)
      return;
    let a = this.coordsAt(n.head, -1), c = this.coordsAt(n.head, 1);
    if (!a || !c || a.bottom > c.top)
      return;
    let u = this.domAtPos(n.head + n.assoc);
    i.collapse(u.node, u.offset), i.modify("move", n.assoc < 0 ? "forward" : "backward", "lineboundary"), e.observer.readSelectionRange();
    let f = e.observer.selectionRange;
    e.docView.posFromDOM(f.anchorNode, f.anchorOffset) != n.from && i.collapse(r, s);
  }
  mayControlSelection() {
    let e = this.view.root.activeElement;
    return e == this.dom || bh(this.dom, this.view.observer.selectionRange) && !(e && this.dom.contains(e));
  }
  nearest(e) {
    for (let n = e; n; ) {
      let i = pn.get(n);
      if (i && i.rootView == this)
        return i;
      n = n.parentNode;
    }
    return null;
  }
  posFromDOM(e, n) {
    let i = this.nearest(e);
    if (!i)
      throw new RangeError("Trying to find position for a DOM position outside of the document");
    return i.localPosFromDOM(e, n) + i.posAtStart;
  }
  domAtPos(e) {
    let { i: n, off: i } = this.childCursor().findPos(e, -1);
    for (; n < this.children.length - 1; ) {
      let r = this.children[n];
      if (i < r.length || r instanceof Bi)
        break;
      n++, i = 0;
    }
    return this.children[n].domAtPos(i);
  }
  coordsAt(e, n) {
    for (let i = this.length, r = this.children.length - 1; ; r--) {
      let s = this.children[r], o = i - s.breakAfter - s.length;
      if (e > o || e == o && s.type != on.WidgetBefore && s.type != on.WidgetAfter && (!r || n == 2 || this.children[r - 1].breakAfter || this.children[r - 1].type == on.WidgetBefore && n > -2))
        return s.coordsAt(e - o, n);
      i = o;
    }
  }
  measureVisibleLineHeights(e) {
    let n = [], { from: i, to: r } = e, s = this.view.contentDOM.clientWidth, o = s > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1, l = -1, a = this.view.textDirection == Sn.LTR;
    for (let c = 0, u = 0; u < this.children.length; u++) {
      let f = this.children[u], h = c + f.length;
      if (h > r)
        break;
      if (c >= i) {
        let d = f.dom.getBoundingClientRect();
        if (n.push(d.height), o) {
          let p = f.dom.lastChild, g = p ? du(p) : [];
          if (g.length) {
            let _ = g[g.length - 1], m = a ? _.right - d.left : d.right - _.left;
            m > l && (l = m, this.minWidth = s, this.minWidthFrom = c, this.minWidthTo = h);
          }
        }
      }
      c = h + f.breakAfter;
    }
    return n;
  }
  textDirectionAt(e) {
    let { i: n } = this.childPos(e, 1);
    return getComputedStyle(this.children[n].dom).direction == "rtl" ? Sn.RTL : Sn.LTR;
  }
  measureTextSize() {
    for (let r of this.children)
      if (r instanceof Bi) {
        let s = r.measureTextSize();
        if (s)
          return s;
      }
    let e = document.createElement("div"), n, i;
    return e.className = "cm-line", e.style.width = "99999px", e.textContent = "abc def ghi jkl mno pqr stu", this.view.observer.ignore(() => {
      this.dom.appendChild(e);
      let r = du(e.firstChild)[0];
      n = e.getBoundingClientRect().height, i = r ? r.width / 27 : 7, e.remove();
    }), { lineHeight: n, charWidth: i };
  }
  childCursor(e = this.length) {
    let n = this.children.length;
    return n && (e -= this.children[--n].length), new A8(this.children, e, n);
  }
  computeBlockGapDeco() {
    let e = [], n = this.view.viewState;
    for (let i = 0, r = 0; ; r++) {
      let s = r == n.viewports.length ? null : n.viewports[r], o = s ? s.from - 1 : this.length;
      if (o > i) {
        let l = n.lineBlockAt(o).bottom - n.lineBlockAt(i).top;
        e.push(gt.replace({
          widget: new Ck(l),
          block: !0,
          inclusive: !0,
          isBlockGap: !0
        }).range(i, o));
      }
      if (!s)
        break;
      i = s.to + 1;
    }
    return gt.set(e);
  }
  updateDeco() {
    let e = this.view.state.facet(gu).map((n, i) => (this.dynamicDecorationMap[i] = typeof n == "function") ? n(this.view) : n);
    for (let n = e.length; n < e.length + 3; n++)
      this.dynamicDecorationMap[n] = !1;
    return this.decorations = [
      ...e,
      this.compositionDeco,
      this.computeBlockGapDeco(),
      this.view.viewState.lineGapDeco
    ];
  }
  scrollIntoView(e) {
    let { range: n } = e, i = this.coordsAt(n.head, n.empty ? n.assoc : n.head > n.anchor ? -1 : 1), r;
    if (!i)
      return;
    !n.empty && (r = this.coordsAt(n.anchor, n.anchor > n.head ? -1 : 1)) && (i = {
      left: Math.min(i.left, r.left),
      top: Math.min(i.top, r.top),
      right: Math.max(i.right, r.right),
      bottom: Math.max(i.bottom, r.bottom)
    });
    let s = 0, o = 0, l = 0, a = 0;
    for (let u of this.view.state.facet(J8).map((f) => f(this.view)))
      if (u) {
        let { left: f, right: h, top: d, bottom: p } = u;
        f != null && (s = Math.max(s, f)), h != null && (o = Math.max(o, h)), d != null && (l = Math.max(l, d)), p != null && (a = Math.max(a, p));
      }
    let c = {
      left: i.left - s,
      top: i.top - l,
      right: i.right + o,
      bottom: i.bottom + a
    };
    qW(this.view.scrollDOM, c, n.head < n.anchor ? -1 : 1, e.x, e.y, e.xMargin, e.yMargin, this.view.textDirection == Sn.LTR);
  }
}
function aq(t) {
  return t.node.nodeType == 1 && t.node.firstChild && (t.offset == 0 || t.node.childNodes[t.offset - 1].contentEditable == "false") && (t.offset == t.node.childNodes.length || t.node.childNodes[t.offset].contentEditable == "false");
}
class Ck extends $o {
  constructor(e) {
    super(), this.height = e;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.updateDOM(e), e;
  }
  eq(e) {
    return e.height == this.height;
  }
  updateDOM(e) {
    return e.style.height = this.height + "px", !0;
  }
  get estimatedHeight() {
    return this.height;
  }
}
function Q8(t) {
  let e = t.observer.selectionRange, n = e.focusNode && Z8(e.focusNode, e.focusOffset, 0);
  if (!n)
    return null;
  let i = t.docView.nearest(n);
  if (!i)
    return null;
  if (i instanceof Bi) {
    let r = n;
    for (; r.parentNode != i.dom; )
      r = r.parentNode;
    let s = r.previousSibling;
    for (; s && !pn.get(s); )
      s = s.previousSibling;
    let o = s ? pn.get(s).posAtEnd : i.posAtStart;
    return { from: o, to: o, node: r, text: n };
  } else {
    for (; ; ) {
      let { parent: s } = i;
      if (!s)
        return null;
      if (s instanceof Bi)
        break;
      i = s;
    }
    let r = i.posAtStart;
    return { from: r, to: r + i.length, node: i.dom, text: n };
  }
}
function cq(t, e) {
  let n = Q8(t);
  if (!n)
    return gt.none;
  let { from: i, to: r, node: s, text: o } = n, l = e.mapPos(i, 1), a = Math.max(l, e.mapPos(r, -1)), { state: c } = t, u = s.nodeType == 3 ? s.nodeValue : new X8([], c).readRange(s.firstChild, null).text;
  if (a - l < u.length)
    if (c.doc.sliceString(l, Math.min(c.doc.length, l + u.length), Eo) == u)
      a = l + u.length;
    else if (c.doc.sliceString(Math.max(0, a - u.length), a, Eo) == u)
      l = a - u.length;
    else
      return gt.none;
  else if (c.doc.sliceString(l, a, Eo) != u)
    return gt.none;
  let f = pn.get(s);
  return f instanceof P8 ? f = f.widget.topView : f && (f.parent = null), gt.set(gt.replace({ widget: new uq(s, o, f), inclusive: !0 }).range(l, a));
}
class uq extends $o {
  constructor(e, n, i) {
    super(), this.top = e, this.text = n, this.topView = i;
  }
  eq(e) {
    return this.top == e.top && this.text == e.text;
  }
  toDOM() {
    return this.top;
  }
  ignoreEvent() {
    return !1;
  }
  get customView() {
    return P8;
  }
}
function Z8(t, e, n) {
  for (; ; ) {
    if (t.nodeType == 3)
      return t;
    if (t.nodeType == 1 && e > 0 && n <= 0)
      t = t.childNodes[e - 1], e = pu(t);
    else if (t.nodeType == 1 && e < t.childNodes.length && n >= 0)
      t = t.childNodes[e], e = 0;
    else
      return null;
  }
}
function fq(t, e) {
  return t.nodeType != 1 ? 0 : (e && t.childNodes[e - 1].contentEditable == "false" ? 1 : 0) | (e < t.childNodes.length && t.childNodes[e].contentEditable == "false" ? 2 : 0);
}
class hq {
  constructor() {
    this.changes = [];
  }
  compareRange(e, n) {
    A1(e, n, this.changes);
  }
  comparePoint(e, n) {
    A1(e, n, this.changes);
  }
}
function dq(t, e, n) {
  let i = new hq();
  return Wt.compare(t, e, n, i), i.changes;
}
function pq(t, e) {
  for (let n = t; n && n != e; n = n.assignedSlot || n.parentNode)
    if (n.nodeType == 1 && n.contentEditable == "false")
      return !0;
  return !1;
}
function gq(t, e, n = 1) {
  let i = t.charCategorizer(e), r = t.doc.lineAt(e), s = e - r.from;
  if (r.length == 0)
    return Pe.cursor(e);
  s == 0 ? n = 1 : s == r.length && (n = -1);
  let o = s, l = s;
  n < 0 ? o = ji(r.text, s, !1) : l = ji(r.text, s);
  let a = i(r.text.slice(o, l));
  for (; o > 0; ) {
    let c = ji(r.text, o, !1);
    if (i(r.text.slice(c, o)) != a)
      break;
    o = c;
  }
  for (; l < r.length; ) {
    let c = ji(r.text, l);
    if (i(r.text.slice(l, c)) != a)
      break;
    l = c;
  }
  return Pe.range(o + r.from, l + r.from);
}
function mq(t, e) {
  return e.left > t ? e.left - t : Math.max(0, t - e.right);
}
function bq(t, e) {
  return e.top > t ? e.top - t : Math.max(0, t - e.bottom);
}
function Hg(t, e) {
  return t.top < e.bottom - 1 && t.bottom > e.top + 1;
}
function Sk(t, e) {
  return e < t.top ? { top: e, left: t.left, right: t.right, bottom: t.bottom } : t;
}
function Ek(t, e) {
  return e > t.bottom ? { top: t.top, left: t.left, right: t.right, bottom: e } : t;
}
function R1(t, e, n) {
  let i, r, s, o, l = !1, a, c, u, f;
  for (let p = t.firstChild; p; p = p.nextSibling) {
    let g = du(p);
    for (let _ = 0; _ < g.length; _++) {
      let m = g[_];
      r && Hg(r, m) && (m = Sk(Ek(m, r.bottom), r.top));
      let C = mq(e, m), v = bq(n, m);
      if (C == 0 && v == 0)
        return p.nodeType == 3 ? Ak(p, e, n) : R1(p, e, n);
      (!i || o > v || o == v && s > C) && (i = p, r = m, s = C, o = v, l = !C || (C > 0 ? _ < g.length - 1 : _ > 0)), C == 0 ? n > m.bottom && (!u || u.bottom < m.bottom) ? (a = p, u = m) : n < m.top && (!f || f.top > m.top) && (c = p, f = m) : u && Hg(u, m) ? u = Ek(u, m.bottom) : f && Hg(f, m) && (f = Sk(f, m.top));
    }
  }
  if (u && u.bottom >= n ? (i = a, r = u) : f && f.top <= n && (i = c, r = f), !i)
    return { node: t, offset: 0 };
  let h = Math.max(r.left, Math.min(r.right, e));
  if (i.nodeType == 3)
    return Ak(i, h, n);
  if (l && i.contentEditable != "false")
    return R1(i, h, n);
  let d = Array.prototype.indexOf.call(t.childNodes, i) + (e >= (r.left + r.right) / 2 ? 1 : 0);
  return { node: t, offset: d };
}
function Ak(t, e, n) {
  let i = t.nodeValue.length, r = -1, s = 1e9, o = 0;
  for (let l = 0; l < i; l++) {
    let a = Fa(t, l, l + 1).getClientRects();
    for (let c = 0; c < a.length; c++) {
      let u = a[c];
      if (u.top == u.bottom)
        continue;
      o || (o = e - u.left);
      let f = (u.top > n ? u.top - n : n - u.bottom) - 1;
      if (u.left - 1 <= e && u.right + 1 >= e && f < s) {
        let h = e >= (u.left + u.right) / 2, d = h;
        if ((it.chrome || it.gecko) && Fa(t, l).getBoundingClientRect().left == u.right && (d = !h), f <= 0)
          return { node: t, offset: l + (d ? 1 : 0) };
        r = l + (d ? 1 : 0), s = f;
      }
    }
  }
  return { node: t, offset: r > -1 ? r : o > 0 ? t.nodeValue.length : 0 };
}
function $8(t, { x: e, y: n }, i, r = -1) {
  var s;
  let o = t.contentDOM.getBoundingClientRect(), l = o.top + t.viewState.paddingTop, a, { docHeight: c } = t.viewState, u = n - l;
  if (u < 0)
    return 0;
  if (u > c)
    return t.state.doc.length;
  for (let m = t.defaultLineHeight / 2, C = !1; a = t.elementAtHeight(u), a.type != on.Text; )
    for (; u = r > 0 ? a.bottom + m : a.top - m, !(u >= 0 && u <= c); ) {
      if (C)
        return i ? null : 0;
      C = !0, r = -r;
    }
  n = l + u;
  let f = a.from;
  if (f < t.viewport.from)
    return t.viewport.from == 0 ? 0 : i ? null : Mk(t, o, a, e, n);
  if (f > t.viewport.to)
    return t.viewport.to == t.state.doc.length ? t.state.doc.length : i ? null : Mk(t, o, a, e, n);
  let h = t.dom.ownerDocument, d = t.root.elementFromPoint ? t.root : h, p = d.elementFromPoint(e, n);
  p && !t.contentDOM.contains(p) && (p = null), p || (e = Math.max(o.left + 1, Math.min(o.right - 1, e)), p = d.elementFromPoint(e, n), p && !t.contentDOM.contains(p) && (p = null));
  let g, _ = -1;
  if (p && ((s = t.docView.nearest(p)) === null || s === void 0 ? void 0 : s.isEditable) != !1) {
    if (h.caretPositionFromPoint) {
      let m = h.caretPositionFromPoint(e, n);
      m && ({ offsetNode: g, offset: _ } = m);
    } else if (h.caretRangeFromPoint) {
      let m = h.caretRangeFromPoint(e, n);
      m && ({ startContainer: g, startOffset: _ } = m, (!t.contentDOM.contains(g) || it.safari && _q(g, _, e) || it.chrome && yq(g, _, e)) && (g = void 0));
    }
  }
  if (!g || !t.docView.dom.contains(g)) {
    let m = Bi.find(t.docView, f);
    if (!m)
      return u > a.top + a.height / 2 ? a.to : a.from;
    ({ node: g, offset: _ } = R1(m.dom, e, n));
  }
  return t.docView.posFromDOM(g, _);
}
function Mk(t, e, n, i, r) {
  let s = Math.round((i - e.left) * t.defaultCharacterWidth);
  if (t.lineWrapping && n.height > t.defaultLineHeight * 1.5) {
    let l = Math.floor((r - n.top) / t.defaultLineHeight);
    s += l * t.viewState.heightOracle.lineLength;
  }
  let o = t.state.sliceDoc(n.from, n.to);
  return n.from + m1(o, s, t.state.tabSize);
}
function _q(t, e, n) {
  let i;
  if (t.nodeType != 3 || e != (i = t.nodeValue.length))
    return !1;
  for (let r = t.nextSibling; r; r = r.nextSibling)
    if (r.nodeType != 1 || r.nodeName != "BR")
      return !1;
  return Fa(t, i - 1, i).getBoundingClientRect().left > n;
}
function yq(t, e, n) {
  if (e != 0)
    return !1;
  for (let r = t; ; ) {
    let s = r.parentNode;
    if (!s || s.nodeType != 1 || s.firstChild != r)
      return !1;
    if (s.classList.contains("cm-line"))
      break;
    r = s;
  }
  let i = t.nodeType == 1 ? t.getBoundingClientRect() : Fa(t, 0, Math.max(t.nodeValue.length, 1)).getBoundingClientRect();
  return n - i.left > 5;
}
function wq(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), s = !i || !t.lineWrapping ? null : t.coordsAtPos(e.assoc < 0 && e.head > r.from ? e.head - 1 : e.head);
  if (s) {
    let a = t.dom.getBoundingClientRect(), c = t.textDirectionAt(r.from), u = t.posAtCoords({
      x: n == (c == Sn.LTR) ? a.right - 1 : a.left + 1,
      y: (s.top + s.bottom) / 2
    });
    if (u != null)
      return Pe.cursor(u, n ? -1 : 1);
  }
  let o = Bi.find(t.docView, e.head), l = o ? n ? o.posAtEnd : o.posAtStart : n ? r.to : r.from;
  return Pe.cursor(l, n ? -1 : 1);
}
function Ok(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), s = t.bidiSpans(r), o = t.textDirectionAt(r.from);
  for (let l = e, a = null; ; ) {
    let c = lq(r, s, o, l, n), u = Y8;
    if (!c) {
      if (r.number == (n ? t.state.doc.lines : 1))
        return l;
      u = `
`, r = t.state.doc.line(r.number + (n ? 1 : -1)), s = t.bidiSpans(r), c = Pe.cursor(n ? r.from : r.to);
    }
    if (a) {
      if (!a(u))
        return l;
    } else {
      if (!i)
        return c;
      a = i(u);
    }
    l = c;
  }
}
function vq(t, e, n) {
  let i = t.state.charCategorizer(e), r = i(n);
  return (s) => {
    let o = i(s);
    return r == _n.Space && (r = o), r == o;
  };
}
function kq(t, e, n, i) {
  let r = e.head, s = n ? 1 : -1;
  if (r == (n ? t.state.doc.length : 0))
    return Pe.cursor(r, e.assoc);
  let o = e.goalColumn, l, a = t.contentDOM.getBoundingClientRect(), c = t.coordsAtPos(r), u = t.documentTop;
  if (c)
    o == null && (o = c.left - a.left), l = s < 0 ? c.top : c.bottom;
  else {
    let d = t.viewState.lineBlockAt(r);
    o == null && (o = Math.min(a.right - a.left, t.defaultCharacterWidth * (r - d.from))), l = (s < 0 ? d.top : d.bottom) + u;
  }
  let f = a.left + o, h = i ?? t.defaultLineHeight >> 1;
  for (let d = 0; ; d += 10) {
    let p = l + (h + d) * s, g = $8(t, { x: f, y: p }, !1, s);
    if (p < a.top || p > a.bottom || (s < 0 ? g < r : g > r))
      return Pe.cursor(g, e.assoc, void 0, o);
  }
}
function Wg(t, e, n) {
  let i = t.state.facet(q8).map((r) => r(t));
  for (; ; ) {
    let r = !1;
    for (let s of i)
      s.between(n.from - 1, n.from + 1, (o, l, a) => {
        n.from > o && n.from < l && (n = e.head > n.from ? Pe.cursor(o, 1) : Pe.cursor(l, -1), r = !0);
      });
    if (!r)
      return n;
  }
}
class Cq {
  constructor(e) {
    this.lastKeyCode = 0, this.lastKeyTime = 0, this.lastTouchTime = 0, this.lastFocusTime = 0, this.lastScrollTop = 0, this.lastScrollLeft = 0, this.chromeScrollHack = -1, this.pendingIOSKey = void 0, this.lastSelectionOrigin = null, this.lastSelectionTime = 0, this.lastEscPress = 0, this.lastContextMenu = 0, this.scrollHandlers = [], this.registeredEvents = [], this.customHandlers = [], this.composing = -1, this.compositionFirstChange = null, this.compositionEndedAt = 0, this.mouseSelection = null;
    let n = (i, r) => {
      this.ignoreDuringComposition(r) || r.type == "keydown" && this.keydown(e, r) || (this.mustFlushObserver(r) && e.observer.forceFlush(), this.runCustomHandlers(r.type, e, r) ? r.preventDefault() : i(e, r));
    };
    for (let i in ti) {
      let r = ti[i];
      e.contentDOM.addEventListener(i, (s) => {
        Tk(e, s) && n(r, s);
      }, P1[i]), this.registeredEvents.push(i);
    }
    e.scrollDOM.addEventListener("mousedown", (i) => {
      i.target == e.scrollDOM && n(ti.mousedown, i);
    }), it.chrome && it.chrome_version == 102 && e.scrollDOM.addEventListener("wheel", () => {
      this.chromeScrollHack < 0 ? e.contentDOM.style.pointerEvents = "none" : window.clearTimeout(this.chromeScrollHack), this.chromeScrollHack = setTimeout(() => {
        this.chromeScrollHack = -1, e.contentDOM.style.pointerEvents = "";
      }, 100);
    }, { passive: !0 }), this.notifiedFocused = e.hasFocus, it.safari && e.contentDOM.addEventListener("input", () => null);
  }
  setSelectionOrigin(e) {
    this.lastSelectionOrigin = e, this.lastSelectionTime = Date.now();
  }
  ensureHandlers(e, n) {
    var i;
    let r;
    this.customHandlers = [];
    for (let s of n)
      if (r = (i = s.update(e).spec) === null || i === void 0 ? void 0 : i.domEventHandlers) {
        this.customHandlers.push({ plugin: s.value, handlers: r });
        for (let o in r)
          this.registeredEvents.indexOf(o) < 0 && o != "scroll" && (this.registeredEvents.push(o), e.contentDOM.addEventListener(o, (l) => {
            Tk(e, l) && this.runCustomHandlers(o, e, l) && l.preventDefault();
          }));
      }
  }
  runCustomHandlers(e, n, i) {
    for (let r of this.customHandlers) {
      let s = r.handlers[e];
      if (s)
        try {
          if (s.call(r.plugin, i, n) || i.defaultPrevented)
            return !0;
        } catch (o) {
          ir(n.state, o);
        }
    }
    return !1;
  }
  runScrollHandlers(e, n) {
    this.lastScrollTop = e.scrollDOM.scrollTop, this.lastScrollLeft = e.scrollDOM.scrollLeft;
    for (let i of this.customHandlers) {
      let r = i.handlers.scroll;
      if (r)
        try {
          r.call(i.plugin, n, e);
        } catch (s) {
          ir(e.state, s);
        }
    }
  }
  keydown(e, n) {
    if (this.lastKeyCode = n.keyCode, this.lastKeyTime = Date.now(), n.keyCode == 9 && Date.now() < this.lastEscPress + 2e3)
      return !0;
    if (it.android && it.chrome && !n.synthetic && (n.keyCode == 13 || n.keyCode == 8))
      return e.observer.delayAndroidKey(n.key, n.keyCode), !0;
    let i;
    return it.ios && !n.synthetic && !n.altKey && !n.metaKey && ((i = eE.find((r) => r.keyCode == n.keyCode)) && !n.ctrlKey || Sq.indexOf(n.key) > -1 && n.ctrlKey && !n.shiftKey) ? (this.pendingIOSKey = i || n, setTimeout(() => this.flushIOSKey(e), 250), !0) : !1;
  }
  flushIOSKey(e) {
    let n = this.pendingIOSKey;
    return n ? (this.pendingIOSKey = void 0, _a(e.contentDOM, n.key, n.keyCode)) : !1;
  }
  ignoreDuringComposition(e) {
    return /^key/.test(e.type) ? this.composing > 0 ? !0 : it.safari && !it.ios && Date.now() - this.compositionEndedAt < 100 ? (this.compositionEndedAt = 0, !0) : !1 : !1;
  }
  mustFlushObserver(e) {
    return e.type == "keydown" && e.keyCode != 229;
  }
  startMouseSelection(e) {
    this.mouseSelection && this.mouseSelection.destroy(), this.mouseSelection = e;
  }
  update(e) {
    this.mouseSelection && this.mouseSelection.update(e), e.transactions.length && (this.lastKeyCode = this.lastSelectionTime = 0);
  }
  destroy() {
    this.mouseSelection && this.mouseSelection.destroy();
  }
}
const eE = [
  { key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" },
  { key: "Enter", keyCode: 13, inputType: "insertParagraph" },
  { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }
], Sq = "dthko", tE = [16, 17, 18, 20, 91, 92, 224, 225];
function Df(t) {
  return t * 0.7 + 8;
}
class Eq {
  constructor(e, n, i, r) {
    this.view = e, this.style = i, this.mustSelect = r, this.scrollSpeed = { x: 0, y: 0 }, this.scrolling = -1, this.lastEvent = n, this.scrollParent = JW(e.contentDOM);
    let s = e.contentDOM.ownerDocument;
    s.addEventListener("mousemove", this.move = this.move.bind(this)), s.addEventListener("mouseup", this.up = this.up.bind(this)), this.extend = n.shiftKey, this.multiple = e.state.facet(Rt.allowMultipleSelections) && Aq(e, n), this.dragMove = Mq(e, n), this.dragging = Oq(e, n) && sE(n) == 1 ? null : !1, this.dragging === !1 && (n.preventDefault(), this.select(n));
  }
  move(e) {
    var n;
    if (e.buttons == 0)
      return this.destroy();
    if (this.dragging !== !1)
      return;
    this.select(this.lastEvent = e);
    let i = 0, r = 0, s = ((n = this.scrollParent) === null || n === void 0 ? void 0 : n.getBoundingClientRect()) || { left: 0, top: 0, right: this.view.win.innerWidth, bottom: this.view.win.innerHeight };
    e.clientX <= s.left ? i = -Df(s.left - e.clientX) : e.clientX >= s.right && (i = Df(e.clientX - s.right)), e.clientY <= s.top ? r = -Df(s.top - e.clientY) : e.clientY >= s.bottom && (r = Df(e.clientY - s.bottom)), this.setScrollSpeed(i, r);
  }
  up(e) {
    this.dragging == null && this.select(this.lastEvent), this.dragging || e.preventDefault(), this.destroy();
  }
  destroy() {
    this.setScrollSpeed(0, 0);
    let e = this.view.contentDOM.ownerDocument;
    e.removeEventListener("mousemove", this.move), e.removeEventListener("mouseup", this.up), this.view.inputState.mouseSelection = null;
  }
  setScrollSpeed(e, n) {
    this.scrollSpeed = { x: e, y: n }, e || n ? this.scrolling < 0 && (this.scrolling = setInterval(() => this.scroll(), 50)) : this.scrolling > -1 && (clearInterval(this.scrolling), this.scrolling = -1);
  }
  scroll() {
    this.scrollParent ? (this.scrollParent.scrollLeft += this.scrollSpeed.x, this.scrollParent.scrollTop += this.scrollSpeed.y) : this.view.win.scrollBy(this.scrollSpeed.x, this.scrollSpeed.y), this.dragging === !1 && this.select(this.lastEvent);
  }
  select(e) {
    let n = this.style.get(e, this.extend, this.multiple);
    (this.mustSelect || !n.eq(this.view.state.selection) || n.main.assoc != this.view.state.selection.main.assoc) && this.view.dispatch({
      selection: n,
      userEvent: "select.pointer"
    }), this.mustSelect = !1;
  }
  update(e) {
    e.docChanged && this.dragging && (this.dragging = this.dragging.map(e.changes)), this.style.update(e) && setTimeout(() => this.select(this.lastEvent), 20);
  }
}
function Aq(t, e) {
  let n = t.state.facet(B8);
  return n.length ? n[0](e) : it.mac ? e.metaKey : e.ctrlKey;
}
function Mq(t, e) {
  let n = t.state.facet(x8);
  return n.length ? n[0](e) : it.mac ? !e.altKey : !e.ctrlKey;
}
function Oq(t, e) {
  let { main: n } = t.state.selection;
  if (n.empty)
    return !1;
  let i = od(t.root);
  if (!i || i.rangeCount == 0)
    return !0;
  let r = i.getRangeAt(0).getClientRects();
  for (let s = 0; s < r.length; s++) {
    let o = r[s];
    if (o.left <= e.clientX && o.right >= e.clientX && o.top <= e.clientY && o.bottom >= e.clientY)
      return !0;
  }
  return !1;
}
function Tk(t, e) {
  if (!e.bubbles)
    return !0;
  if (e.defaultPrevented)
    return !1;
  for (let n = e.target, i; n != t.contentDOM; n = n.parentNode)
    if (!n || n.nodeType == 11 || (i = pn.get(n)) && i.ignoreEvent(e))
      return !1;
  return !0;
}
const ti = /* @__PURE__ */ Object.create(null), P1 = /* @__PURE__ */ Object.create(null), nE = it.ie && it.ie_version < 15 || it.ios && it.webkit_version < 604;
function Tq(t) {
  let e = t.dom.parentNode;
  if (!e)
    return;
  let n = e.appendChild(document.createElement("textarea"));
  n.style.cssText = "position: fixed; left: -10000px; top: 10px", n.focus(), setTimeout(() => {
    t.focus(), n.remove(), iE(t, n.value);
  }, 50);
}
function iE(t, e) {
  let { state: n } = t, i, r = 1, s = n.toText(e), o = s.lines == n.selection.ranges.length;
  if (I1 != null && n.selection.ranges.every((a) => a.empty) && I1 == s.toString()) {
    let a = -1;
    i = n.changeByRange((c) => {
      let u = n.doc.lineAt(c.from);
      if (u.from == a)
        return { range: c };
      a = u.from;
      let f = n.toText((o ? s.line(r++).text : e) + n.lineBreak);
      return {
        changes: { from: u.from, insert: f },
        range: Pe.cursor(c.from + f.length)
      };
    });
  } else
    o ? i = n.changeByRange((a) => {
      let c = s.line(r++);
      return {
        changes: { from: a.from, to: a.to, insert: c.text },
        range: Pe.cursor(a.from + c.length)
      };
    }) : i = n.replaceSelection(s);
  t.dispatch(i, {
    userEvent: "input.paste",
    scrollIntoView: !0
  });
}
ti.keydown = (t, e) => {
  t.inputState.setSelectionOrigin("select"), e.keyCode == 27 ? t.inputState.lastEscPress = Date.now() : tE.indexOf(e.keyCode) < 0 && (t.inputState.lastEscPress = 0);
};
ti.touchstart = (t, e) => {
  t.inputState.lastTouchTime = Date.now(), t.inputState.setSelectionOrigin("select.pointer");
};
ti.touchmove = (t) => {
  t.inputState.setSelectionOrigin("select.pointer");
};
P1.touchstart = P1.touchmove = { passive: !0 };
ti.mousedown = (t, e) => {
  if (t.observer.flush(), t.inputState.lastTouchTime > Date.now() - 2e3)
    return;
  let n = null;
  for (let i of t.state.facet(F8))
    if (n = i(t, e), n)
      break;
  if (!n && e.button == 0 && (n = Iq(t, e)), n) {
    let i = t.root.activeElement != t.contentDOM;
    i && t.observer.ignore(() => S8(t.contentDOM)), t.inputState.startMouseSelection(new Eq(t, e, n, i));
  }
};
function Rk(t, e, n, i) {
  if (i == 1)
    return Pe.cursor(e, n);
  if (i == 2)
    return gq(t.state, e, n);
  {
    let r = Bi.find(t.docView, e), s = t.state.doc.lineAt(r ? r.posAtEnd : e), o = r ? r.posAtStart : s.from, l = r ? r.posAtEnd : s.to;
    return l < t.state.doc.length && l == s.to && l++, Pe.range(o, l);
  }
}
let rE = (t, e) => t >= e.top && t <= e.bottom, Pk = (t, e, n) => rE(e, n) && t >= n.left && t <= n.right;
function Rq(t, e, n, i) {
  let r = Bi.find(t.docView, e);
  if (!r)
    return 1;
  let s = e - r.posAtStart;
  if (s == 0)
    return 1;
  if (s == r.length)
    return -1;
  let o = r.coordsAt(s, -1);
  if (o && Pk(n, i, o))
    return -1;
  let l = r.coordsAt(s, 1);
  return l && Pk(n, i, l) ? 1 : o && rE(i, o) ? -1 : 1;
}
function Ik(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  return { pos: n, bias: Rq(t, n, e.clientX, e.clientY) };
}
const Pq = it.ie && it.ie_version <= 11;
let Dk = null, Nk = 0, Lk = 0;
function sE(t) {
  if (!Pq)
    return t.detail;
  let e = Dk, n = Lk;
  return Dk = t, Lk = Date.now(), Nk = !e || n > Date.now() - 400 && Math.abs(e.clientX - t.clientX) < 2 && Math.abs(e.clientY - t.clientY) < 2 ? (Nk + 1) % 3 : 1;
}
function Iq(t, e) {
  let n = Ik(t, e), i = sE(e), r = t.state.selection;
  return {
    update(s) {
      s.docChanged && (n.pos = s.changes.mapPos(n.pos), r = r.map(s.changes));
    },
    get(s, o, l) {
      let a = Ik(t, s), c = Rk(t, a.pos, a.bias, i);
      if (n.pos != a.pos && !o) {
        let u = Rk(t, n.pos, n.bias, i), f = Math.min(u.from, c.from), h = Math.max(u.to, c.to);
        c = f < c.from ? Pe.range(f, h) : Pe.range(h, f);
      }
      return o ? r.replaceRange(r.main.extend(c.from, c.to)) : l && r.ranges.length > 1 && r.ranges.some((u) => u.eq(c)) ? Dq(r, c) : l ? r.addRange(c) : Pe.create([c]);
    }
  };
}
function Dq(t, e) {
  for (let n = 0; ; n++)
    if (t.ranges[n].eq(e))
      return Pe.create(t.ranges.slice(0, n).concat(t.ranges.slice(n + 1)), t.mainIndex == n ? 0 : t.mainIndex - (t.mainIndex > n ? 1 : 0));
}
ti.dragstart = (t, e) => {
  let { selection: { main: n } } = t.state, { mouseSelection: i } = t.inputState;
  i && (i.dragging = n), e.dataTransfer && (e.dataTransfer.setData("Text", t.state.sliceDoc(n.from, n.to)), e.dataTransfer.effectAllowed = "copyMove");
};
function jk(t, e, n, i) {
  if (!n)
    return;
  let r = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  e.preventDefault();
  let { mouseSelection: s } = t.inputState, o = i && s && s.dragging && s.dragMove ? { from: s.dragging.from, to: s.dragging.to } : null, l = { from: r, insert: n }, a = t.state.changes(o ? [o, l] : l);
  t.focus(), t.dispatch({
    changes: a,
    selection: { anchor: a.mapPos(r, -1), head: a.mapPos(r, 1) },
    userEvent: o ? "move.drop" : "input.drop"
  });
}
ti.drop = (t, e) => {
  if (!e.dataTransfer)
    return;
  if (t.state.readOnly)
    return e.preventDefault();
  let n = e.dataTransfer.files;
  if (n && n.length) {
    e.preventDefault();
    let i = Array(n.length), r = 0, s = () => {
      ++r == n.length && jk(t, e, i.filter((o) => o != null).join(t.state.lineBreak), !1);
    };
    for (let o = 0; o < n.length; o++) {
      let l = new FileReader();
      l.onerror = s, l.onload = () => {
        /[\x00-\x08\x0e-\x1f]{2}/.test(l.result) || (i[o] = l.result), s();
      }, l.readAsText(n[o]);
    }
  } else
    jk(t, e, e.dataTransfer.getData("Text"), !0);
};
ti.paste = (t, e) => {
  if (t.state.readOnly)
    return e.preventDefault();
  t.observer.flush();
  let n = nE ? null : e.clipboardData;
  n ? (iE(t, n.getData("text/plain")), e.preventDefault()) : Tq(t);
};
function Nq(t, e) {
  let n = t.dom.parentNode;
  if (!n)
    return;
  let i = n.appendChild(document.createElement("textarea"));
  i.style.cssText = "position: fixed; left: -10000px; top: 10px", i.value = e, i.focus(), i.selectionEnd = e.length, i.selectionStart = 0, setTimeout(() => {
    i.remove(), t.focus();
  }, 50);
}
function Lq(t) {
  let e = [], n = [], i = !1;
  for (let r of t.selection.ranges)
    r.empty || (e.push(t.sliceDoc(r.from, r.to)), n.push(r));
  if (!e.length) {
    let r = -1;
    for (let { from: s } of t.selection.ranges) {
      let o = t.doc.lineAt(s);
      o.number > r && (e.push(o.text), n.push({ from: o.from, to: Math.min(t.doc.length, o.to + 1) })), r = o.number;
    }
    i = !0;
  }
  return { text: e.join(t.lineBreak), ranges: n, linewise: i };
}
let I1 = null;
ti.copy = ti.cut = (t, e) => {
  let { text: n, ranges: i, linewise: r } = Lq(t.state);
  if (!n && !r)
    return;
  I1 = r ? n : null;
  let s = nE ? null : e.clipboardData;
  s ? (e.preventDefault(), s.clearData(), s.setData("text/plain", n)) : Nq(t, n), e.type == "cut" && !t.state.readOnly && t.dispatch({
    changes: i,
    scrollIntoView: !0,
    userEvent: "delete.cut"
  });
};
function oE(t) {
  setTimeout(() => {
    t.hasFocus != t.inputState.notifiedFocused && t.update([]);
  }, 10);
}
ti.focus = (t) => {
  t.inputState.lastFocusTime = Date.now(), !t.scrollDOM.scrollTop && (t.inputState.lastScrollTop || t.inputState.lastScrollLeft) && (t.scrollDOM.scrollTop = t.inputState.lastScrollTop, t.scrollDOM.scrollLeft = t.inputState.lastScrollLeft), oE(t);
};
ti.blur = (t) => {
  t.observer.clearSelectionRange(), oE(t);
};
ti.compositionstart = ti.compositionupdate = (t) => {
  t.inputState.compositionFirstChange == null && (t.inputState.compositionFirstChange = !0), t.inputState.composing < 0 && (t.inputState.composing = 0);
};
ti.compositionend = (t) => {
  t.inputState.composing = -1, t.inputState.compositionEndedAt = Date.now(), t.inputState.compositionFirstChange = null, it.chrome && it.android && t.observer.flushSoon(), setTimeout(() => {
    t.inputState.composing < 0 && t.docView.compositionDeco.size && t.update([]);
  }, 50);
};
ti.contextmenu = (t) => {
  t.inputState.lastContextMenu = Date.now();
};
ti.beforeinput = (t, e) => {
  var n;
  let i;
  if (it.chrome && it.android && (i = eE.find((r) => r.inputType == e.inputType)) && (t.observer.delayAndroidKey(i.key, i.keyCode), i.key == "Backspace" || i.key == "Delete")) {
    let r = ((n = window.visualViewport) === null || n === void 0 ? void 0 : n.height) || 0;
    setTimeout(() => {
      var s;
      (((s = window.visualViewport) === null || s === void 0 ? void 0 : s.height) || 0) > r + 10 && t.hasFocus && (t.contentDOM.blur(), t.focus());
    }, 100);
  }
};
const Bk = ["pre-wrap", "normal", "pre-line", "break-spaces"];
class jq {
  constructor(e) {
    this.lineWrapping = e, this.doc = Ht.empty, this.heightSamples = {}, this.lineHeight = 14, this.charWidth = 7, this.lineLength = 30, this.heightChanged = !1;
  }
  heightForGap(e, n) {
    let i = this.doc.lineAt(n).number - this.doc.lineAt(e).number + 1;
    return this.lineWrapping && (i += Math.ceil((n - e - i * this.lineLength * 0.5) / this.lineLength)), this.lineHeight * i;
  }
  heightForLine(e) {
    return this.lineWrapping ? (1 + Math.max(0, Math.ceil((e - this.lineLength) / (this.lineLength - 5)))) * this.lineHeight : this.lineHeight;
  }
  setDoc(e) {
    return this.doc = e, this;
  }
  mustRefreshForWrapping(e) {
    return Bk.indexOf(e) > -1 != this.lineWrapping;
  }
  mustRefreshForHeights(e) {
    let n = !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i];
      r < 0 ? i++ : this.heightSamples[Math.floor(r * 10)] || (n = !0, this.heightSamples[Math.floor(r * 10)] = !0);
    }
    return n;
  }
  refresh(e, n, i, r, s) {
    let o = Bk.indexOf(e) > -1, l = Math.round(n) != Math.round(this.lineHeight) || this.lineWrapping != o;
    if (this.lineWrapping = o, this.lineHeight = n, this.charWidth = i, this.lineLength = r, l) {
      this.heightSamples = {};
      for (let a = 0; a < s.length; a++) {
        let c = s[a];
        c < 0 ? a++ : this.heightSamples[Math.floor(c * 10)] = !0;
      }
    }
    return l;
  }
}
class Bq {
  constructor(e, n) {
    this.from = e, this.heights = n, this.index = 0;
  }
  get more() {
    return this.index < this.heights.length;
  }
}
class Ao {
  constructor(e, n, i, r, s) {
    this.from = e, this.length = n, this.top = i, this.height = r, this.type = s;
  }
  get to() {
    return this.from + this.length;
  }
  get bottom() {
    return this.top + this.height;
  }
  join(e) {
    let n = (Array.isArray(this.type) ? this.type : [this]).concat(Array.isArray(e.type) ? e.type : [e]);
    return new Ao(this.from, this.length + e.length, this.top, this.height + e.height, n);
  }
}
var fn = /* @__PURE__ */ function(t) {
  return t[t.ByPos = 0] = "ByPos", t[t.ByHeight = 1] = "ByHeight", t[t.ByPosNoHeight = 2] = "ByPosNoHeight", t;
}(fn || (fn = {}));
const _h = 1e-3;
class Fi {
  constructor(e, n, i = 2) {
    this.length = e, this.height = n, this.flags = i;
  }
  get outdated() {
    return (this.flags & 2) > 0;
  }
  set outdated(e) {
    this.flags = (e ? 2 : 0) | this.flags & -3;
  }
  setHeight(e, n) {
    this.height != n && (Math.abs(this.height - n) > _h && (e.heightChanged = !0), this.height = n);
  }
  replace(e, n, i) {
    return Fi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(this);
  }
  decomposeRight(e, n) {
    n.push(this);
  }
  applyChanges(e, n, i, r) {
    let s = this;
    for (let o = r.length - 1; o >= 0; o--) {
      let { fromA: l, toA: a, fromB: c, toB: u } = r[o], f = s.lineAt(l, fn.ByPosNoHeight, n, 0, 0), h = f.to >= a ? f : s.lineAt(a, fn.ByPosNoHeight, n, 0, 0);
      for (u += h.to - a, a = h.to; o > 0 && f.from <= r[o - 1].toA; )
        l = r[o - 1].fromA, c = r[o - 1].fromB, o--, l < f.from && (f = s.lineAt(l, fn.ByPosNoHeight, n, 0, 0));
      c += f.from - l, l = f.from;
      let d = Eb.build(i, e, c, u);
      s = s.replace(l, a, d);
    }
    return s.updateHeight(i, 0);
  }
  static empty() {
    return new Qi(0, 0);
  }
  static of(e) {
    if (e.length == 1)
      return e[0];
    let n = 0, i = e.length, r = 0, s = 0;
    for (; ; )
      if (n == i)
        if (r > s * 2) {
          let l = e[n - 1];
          l.break ? e.splice(--n, 1, l.left, null, l.right) : e.splice(--n, 1, l.left, l.right), i += 1 + l.break, r -= l.size;
        } else if (s > r * 2) {
          let l = e[i];
          l.break ? e.splice(i, 1, l.left, null, l.right) : e.splice(i, 1, l.left, l.right), i += 2 + l.break, s -= l.size;
        } else
          break;
      else if (r < s) {
        let l = e[n++];
        l && (r += l.size);
      } else {
        let l = e[--i];
        l && (s += l.size);
      }
    let o = 0;
    return e[n - 1] == null ? (o = 1, n--) : e[n] == null && (o = 1, i++), new xq(Fi.of(e.slice(0, n)), o, Fi.of(e.slice(i)));
  }
}
Fi.prototype.size = 1;
class lE extends Fi {
  constructor(e, n, i) {
    super(e, n), this.type = i;
  }
  blockAt(e, n, i, r) {
    return new Ao(r, this.length, i, this.height, this.type);
  }
  lineAt(e, n, i, r, s) {
    return this.blockAt(0, i, r, s);
  }
  forEachLine(e, n, i, r, s, o) {
    e <= s + this.length && n >= s && o(this.blockAt(0, i, r, s));
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more && this.setHeight(e, r.heights[r.index++]), this.outdated = !1, this;
  }
  toString() {
    return `block(${this.length})`;
  }
}
class Qi extends lE {
  constructor(e, n) {
    super(e, n, on.Text), this.collapsed = 0, this.widgetHeight = 0;
  }
  replace(e, n, i) {
    let r = i[0];
    return i.length == 1 && (r instanceof Qi || r instanceof yi && r.flags & 4) && Math.abs(this.length - r.length) < 10 ? (r instanceof yi ? r = new Qi(r.length, this.height) : r.height = this.height, this.outdated || (r.outdated = !1), r) : Fi.of(i);
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more ? this.setHeight(e, r.heights[r.index++]) : (i || this.outdated) && this.setHeight(e, Math.max(this.widgetHeight, e.heightForLine(this.length - this.collapsed))), this.outdated = !1, this;
  }
  toString() {
    return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
  }
}
class yi extends Fi {
  constructor(e) {
    super(e, 0);
  }
  lines(e, n) {
    let i = e.lineAt(n).number, r = e.lineAt(n + this.length).number;
    return { firstLine: i, lastLine: r, lineHeight: this.height / (r - i + 1) };
  }
  blockAt(e, n, i, r) {
    let { firstLine: s, lastLine: o, lineHeight: l } = this.lines(n, r), a = Math.max(0, Math.min(o - s, Math.floor((e - i) / l))), { from: c, length: u } = n.line(s + a);
    return new Ao(c, u, i + l * a, l, on.Text);
  }
  lineAt(e, n, i, r, s) {
    if (n == fn.ByHeight)
      return this.blockAt(e, i, r, s);
    if (n == fn.ByPosNoHeight) {
      let { from: f, to: h } = i.lineAt(e);
      return new Ao(f, h - f, 0, 0, on.Text);
    }
    let { firstLine: o, lineHeight: l } = this.lines(i, s), { from: a, length: c, number: u } = i.lineAt(e);
    return new Ao(a, c, r + l * (u - o), l, on.Text);
  }
  forEachLine(e, n, i, r, s, o) {
    let { firstLine: l, lineHeight: a } = this.lines(i, s);
    for (let c = Math.max(e, s), u = Math.min(s + this.length, n); c <= u; ) {
      let f = i.lineAt(c);
      c == e && (r += a * (f.number - l)), o(new Ao(f.from, f.length, r, a, on.Text)), r += a, c = f.to + 1;
    }
  }
  replace(e, n, i) {
    let r = this.length - n;
    if (r > 0) {
      let s = i[i.length - 1];
      s instanceof yi ? i[i.length - 1] = new yi(s.length + r) : i.push(null, new yi(r - 1));
    }
    if (e > 0) {
      let s = i[0];
      s instanceof yi ? i[0] = new yi(e + s.length) : i.unshift(new yi(e - 1), null);
    }
    return Fi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(new yi(e - 1), null);
  }
  decomposeRight(e, n) {
    n.push(null, new yi(this.length - e - 1));
  }
  updateHeight(e, n = 0, i = !1, r) {
    let s = n + this.length;
    if (r && r.from <= n + this.length && r.more) {
      let o = [], l = Math.max(n, r.from), a = -1, c = e.heightChanged;
      for (r.from > n && o.push(new yi(r.from - n - 1).updateHeight(e, n)); l <= s && r.more; ) {
        let f = e.doc.lineAt(l).length;
        o.length && o.push(null);
        let h = r.heights[r.index++];
        a == -1 ? a = h : Math.abs(h - a) >= _h && (a = -2);
        let d = new Qi(f, h);
        d.outdated = !1, o.push(d), l += f + 1;
      }
      l <= s && o.push(null, new yi(s - l).updateHeight(e, l));
      let u = Fi.of(o);
      return e.heightChanged = c || a < 0 || Math.abs(u.height - this.height) >= _h || Math.abs(a - this.lines(e.doc, n).lineHeight) >= _h, u;
    } else
      (i || this.outdated) && (this.setHeight(e, e.heightForGap(n, n + this.length)), this.outdated = !1);
    return this;
  }
  toString() {
    return `gap(${this.length})`;
  }
}
class xq extends Fi {
  constructor(e, n, i) {
    super(e.length + n + i.length, e.height + i.height, n | (e.outdated || i.outdated ? 2 : 0)), this.left = e, this.right = i, this.size = e.size + i.size;
  }
  get break() {
    return this.flags & 1;
  }
  blockAt(e, n, i, r) {
    let s = i + this.left.height;
    return e < s ? this.left.blockAt(e, n, i, r) : this.right.blockAt(e, n, s, r + this.left.length + this.break);
  }
  lineAt(e, n, i, r, s) {
    let o = r + this.left.height, l = s + this.left.length + this.break, a = n == fn.ByHeight ? e < o : e < l, c = a ? this.left.lineAt(e, n, i, r, s) : this.right.lineAt(e, n, i, o, l);
    if (this.break || (a ? c.to < l : c.from > l))
      return c;
    let u = n == fn.ByPosNoHeight ? fn.ByPosNoHeight : fn.ByPos;
    return a ? c.join(this.right.lineAt(l, u, i, o, l)) : this.left.lineAt(l, u, i, r, s).join(c);
  }
  forEachLine(e, n, i, r, s, o) {
    let l = r + this.left.height, a = s + this.left.length + this.break;
    if (this.break)
      e < a && this.left.forEachLine(e, n, i, r, s, o), n >= a && this.right.forEachLine(e, n, i, l, a, o);
    else {
      let c = this.lineAt(a, fn.ByPos, i, r, s);
      e < c.from && this.left.forEachLine(e, c.from - 1, i, r, s, o), c.to >= e && c.from <= n && o(c), n > c.to && this.right.forEachLine(c.to + 1, n, i, l, a, o);
    }
  }
  replace(e, n, i) {
    let r = this.left.length + this.break;
    if (n < r)
      return this.balanced(this.left.replace(e, n, i), this.right);
    if (e > this.left.length)
      return this.balanced(this.left, this.right.replace(e - r, n - r, i));
    let s = [];
    e > 0 && this.decomposeLeft(e, s);
    let o = s.length;
    for (let l of i)
      s.push(l);
    if (e > 0 && xk(s, o - 1), n < this.length) {
      let l = s.length;
      this.decomposeRight(n, s), xk(s, l);
    }
    return Fi.of(s);
  }
  decomposeLeft(e, n) {
    let i = this.left.length;
    if (e <= i)
      return this.left.decomposeLeft(e, n);
    n.push(this.left), this.break && (i++, e >= i && n.push(null)), e > i && this.right.decomposeLeft(e - i, n);
  }
  decomposeRight(e, n) {
    let i = this.left.length, r = i + this.break;
    if (e >= r)
      return this.right.decomposeRight(e - r, n);
    e < i && this.left.decomposeRight(e, n), this.break && e < r && n.push(null), n.push(this.right);
  }
  balanced(e, n) {
    return e.size > 2 * n.size || n.size > 2 * e.size ? Fi.of(this.break ? [e, null, n] : [e, n]) : (this.left = e, this.right = n, this.height = e.height + n.height, this.outdated = e.outdated || n.outdated, this.size = e.size + n.size, this.length = e.length + this.break + n.length, this);
  }
  updateHeight(e, n = 0, i = !1, r) {
    let { left: s, right: o } = this, l = n + s.length + this.break, a = null;
    return r && r.from <= n + s.length && r.more ? a = s = s.updateHeight(e, n, i, r) : s.updateHeight(e, n, i), r && r.from <= l + o.length && r.more ? a = o = o.updateHeight(e, l, i, r) : o.updateHeight(e, l, i), a ? this.balanced(s, o) : (this.height = this.left.height + this.right.height, this.outdated = !1, this);
  }
  toString() {
    return this.left + (this.break ? " " : "-") + this.right;
  }
}
function xk(t, e) {
  let n, i;
  t[e] == null && (n = t[e - 1]) instanceof yi && (i = t[e + 1]) instanceof yi && t.splice(e - 1, 3, new yi(n.length + 1 + i.length));
}
const Fq = 5;
class Eb {
  constructor(e, n) {
    this.pos = e, this.oracle = n, this.nodes = [], this.lineStart = -1, this.lineEnd = -1, this.covering = null, this.writtenTo = e;
  }
  get isCovered() {
    return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
  }
  span(e, n) {
    if (this.lineStart > -1) {
      let i = Math.min(n, this.lineEnd), r = this.nodes[this.nodes.length - 1];
      r instanceof Qi ? r.length += i - this.pos : (i > this.pos || !this.isCovered) && this.nodes.push(new Qi(i - this.pos, -1)), this.writtenTo = i, n > i && (this.nodes.push(null), this.writtenTo++, this.lineStart = -1);
    }
    this.pos = n;
  }
  point(e, n, i) {
    if (e < n || i.heightRelevant) {
      let r = i.widget ? i.widget.estimatedHeight : 0;
      r < 0 && (r = this.oracle.lineHeight);
      let s = n - e;
      i.block ? this.addBlock(new lE(s, r, i.type)) : (s || r >= Fq) && this.addLineDeco(r, s);
    } else
      n > e && this.span(e, n);
    this.lineEnd > -1 && this.lineEnd < this.pos && (this.lineEnd = this.oracle.doc.lineAt(this.pos).to);
  }
  enterLine() {
    if (this.lineStart > -1)
      return;
    let { from: e, to: n } = this.oracle.doc.lineAt(this.pos);
    this.lineStart = e, this.lineEnd = n, this.writtenTo < e && ((this.writtenTo < e - 1 || this.nodes[this.nodes.length - 1] == null) && this.nodes.push(this.blankContent(this.writtenTo, e - 1)), this.nodes.push(null)), this.pos > e && this.nodes.push(new Qi(this.pos - e, -1)), this.writtenTo = this.pos;
  }
  blankContent(e, n) {
    let i = new yi(n - e);
    return this.oracle.doc.lineAt(e).to == n && (i.flags |= 4), i;
  }
  ensureLine() {
    this.enterLine();
    let e = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
    if (e instanceof Qi)
      return e;
    let n = new Qi(0, -1);
    return this.nodes.push(n), n;
  }
  addBlock(e) {
    this.enterLine(), e.type == on.WidgetAfter && !this.isCovered && this.ensureLine(), this.nodes.push(e), this.writtenTo = this.pos = this.pos + e.length, e.type != on.WidgetBefore && (this.covering = e);
  }
  addLineDeco(e, n) {
    let i = this.ensureLine();
    i.length += n, i.collapsed += n, i.widgetHeight = Math.max(i.widgetHeight, e), this.writtenTo = this.pos = this.pos + n;
  }
  finish(e) {
    let n = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
    this.lineStart > -1 && !(n instanceof Qi) && !this.isCovered ? this.nodes.push(new Qi(0, -1)) : (this.writtenTo < this.pos || n == null) && this.nodes.push(this.blankContent(this.writtenTo, this.pos));
    let i = e;
    for (let r of this.nodes)
      r instanceof Qi && r.updateHeight(this.oracle, i), i += r ? r.length : 1;
    return this.nodes;
  }
  static build(e, n, i, r) {
    let s = new Eb(i, e);
    return Wt.spans(n, i, r, s, 0), s.finish(i);
  }
}
function zq(t, e, n) {
  let i = new Vq();
  return Wt.compare(t, e, n, i, 0), i.changes;
}
class Vq {
  constructor() {
    this.changes = [];
  }
  compareRange() {
  }
  comparePoint(e, n, i, r) {
    (e < n || i && i.heightRelevant || r && r.heightRelevant) && A1(e, n, this.changes, 5);
  }
}
function Uq(t, e) {
  let n = t.getBoundingClientRect(), i = t.ownerDocument, r = i.defaultView || window, s = Math.max(0, n.left), o = Math.min(r.innerWidth, n.right), l = Math.max(0, n.top), a = Math.min(r.innerHeight, n.bottom);
  for (let c = t.parentNode; c && c != i.body; )
    if (c.nodeType == 1) {
      let u = c, f = window.getComputedStyle(u);
      if ((u.scrollHeight > u.clientHeight || u.scrollWidth > u.clientWidth) && f.overflow != "visible") {
        let h = u.getBoundingClientRect();
        s = Math.max(s, h.left), o = Math.min(o, h.right), l = Math.max(l, h.top), a = c == t.parentNode ? h.bottom : Math.min(a, h.bottom);
      }
      c = f.position == "absolute" || f.position == "fixed" ? u.offsetParent : u.parentNode;
    } else if (c.nodeType == 11)
      c = c.host;
    else
      break;
  return {
    left: s - n.left,
    right: Math.max(s, o) - n.left,
    top: l - (n.top + e),
    bottom: Math.max(l, a) - (n.top + e)
  };
}
function Hq(t, e) {
  let n = t.getBoundingClientRect();
  return {
    left: 0,
    right: n.right - n.left,
    top: e,
    bottom: n.bottom - (n.top + e)
  };
}
class qg {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.size = i;
  }
  static same(e, n) {
    if (e.length != n.length)
      return !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i], s = n[i];
      if (r.from != s.from || r.to != s.to || r.size != s.size)
        return !1;
    }
    return !0;
  }
  draw(e) {
    return gt.replace({ widget: new Wq(this.size, e) }).range(this.from, this.to);
  }
}
class Wq extends $o {
  constructor(e, n) {
    super(), this.size = e, this.vertical = n;
  }
  eq(e) {
    return e.size == this.size && e.vertical == this.vertical;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.vertical ? e.style.height = this.size + "px" : (e.style.width = this.size + "px", e.style.height = "2px", e.style.display = "inline-block"), e;
  }
  get estimatedHeight() {
    return this.vertical ? this.size : -1;
  }
}
class Fk {
  constructor(e) {
    this.state = e, this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 }, this.inView = !0, this.paddingTop = 0, this.paddingBottom = 0, this.contentDOMWidth = 0, this.contentDOMHeight = 0, this.editorHeight = 0, this.editorWidth = 0, this.scaler = zk, this.scrollTarget = null, this.printing = !1, this.mustMeasureContent = !0, this.defaultTextDirection = Sn.LTR, this.visibleRanges = [], this.mustEnforceCursorAssoc = !1;
    let n = e.facet(Sb).some((i) => typeof i != "function" && i.class == "cm-lineWrapping");
    this.heightOracle = new jq(n), this.stateDeco = e.facet(gu).filter((i) => typeof i != "function"), this.heightMap = Fi.empty().applyChanges(this.stateDeco, Ht.empty, this.heightOracle.setDoc(e.doc), [new ds(0, 0, 0, e.doc.length)]), this.viewport = this.getViewport(0, null), this.updateViewportLines(), this.updateForViewport(), this.lineGaps = this.ensureLineGaps([]), this.lineGapDeco = gt.set(this.lineGaps.map((i) => i.draw(!1))), this.computeVisibleRanges();
  }
  updateForViewport() {
    let e = [this.viewport], { main: n } = this.state.selection;
    for (let i = 0; i <= 1; i++) {
      let r = i ? n.head : n.anchor;
      if (!e.some(({ from: s, to: o }) => r >= s && r <= o)) {
        let { from: s, to: o } = this.lineBlockAt(r);
        e.push(new Nf(s, o));
      }
    }
    this.viewports = e.sort((i, r) => i.from - r.from), this.scaler = this.heightMap.height <= 7e6 ? zk : new Kq(this.heightOracle.doc, this.heightMap, this.viewports);
  }
  updateViewportLines() {
    this.viewportLines = [], this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, (e) => {
      this.viewportLines.push(this.scaler.scale == 1 ? e : Tc(e, this.scaler));
    });
  }
  update(e, n = null) {
    this.state = e.state;
    let i = this.stateDeco;
    this.stateDeco = this.state.facet(gu).filter((c) => typeof c != "function");
    let r = e.changedRanges, s = ds.extendWithRanges(r, zq(i, this.stateDeco, e ? e.changes : $n.empty(this.state.doc.length))), o = this.heightMap.height;
    this.heightMap = this.heightMap.applyChanges(this.stateDeco, e.startState.doc, this.heightOracle.setDoc(this.state.doc), s), this.heightMap.height != o && (e.flags |= 2);
    let l = s.length ? this.mapViewport(this.viewport, e.changes) : this.viewport;
    (n && (n.range.head < l.from || n.range.head > l.to) || !this.viewportIsAppropriate(l)) && (l = this.getViewport(0, n));
    let a = !e.changes.empty || e.flags & 2 || l.from != this.viewport.from || l.to != this.viewport.to;
    this.viewport = l, this.updateForViewport(), a && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, e.changes))), e.flags |= this.computeVisibleRanges(), n && (this.scrollTarget = n), !this.mustEnforceCursorAssoc && e.selectionSet && e.view.lineWrapping && e.state.selection.main.empty && e.state.selection.main.assoc && !e.state.facet(H8) && (this.mustEnforceCursorAssoc = !0);
  }
  measure(e) {
    let n = e.contentDOM, i = window.getComputedStyle(n), r = this.heightOracle, s = i.whiteSpace;
    this.defaultTextDirection = i.direction == "rtl" ? Sn.RTL : Sn.LTR;
    let o = this.heightOracle.mustRefreshForWrapping(s), l = o || this.mustMeasureContent || this.contentDOMHeight != n.clientHeight;
    this.contentDOMHeight = n.clientHeight, this.mustMeasureContent = !1;
    let a = 0, c = 0, u = parseInt(i.paddingTop) || 0, f = parseInt(i.paddingBottom) || 0;
    (this.paddingTop != u || this.paddingBottom != f) && (this.paddingTop = u, this.paddingBottom = f, a |= 10), this.editorWidth != e.scrollDOM.clientWidth && (r.lineWrapping && (l = !0), this.editorWidth = e.scrollDOM.clientWidth, a |= 8);
    let h = (this.printing ? Hq : Uq)(n, this.paddingTop), d = h.top - this.pixelViewport.top, p = h.bottom - this.pixelViewport.bottom;
    this.pixelViewport = h;
    let g = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
    if (g != this.inView && (this.inView = g, g && (l = !0)), !this.inView && !this.scrollTarget)
      return 0;
    let _ = n.clientWidth;
    if ((this.contentDOMWidth != _ || this.editorHeight != e.scrollDOM.clientHeight) && (this.contentDOMWidth = _, this.editorHeight = e.scrollDOM.clientHeight, a |= 8), l) {
      let C = e.docView.measureVisibleLineHeights(this.viewport);
      if (r.mustRefreshForHeights(C) && (o = !0), o || r.lineWrapping && Math.abs(_ - this.contentDOMWidth) > r.charWidth) {
        let { lineHeight: v, charWidth: k } = e.docView.measureTextSize();
        o = v > 0 && r.refresh(s, v, k, _ / k, C), o && (e.docView.minWidth = 0, a |= 8);
      }
      d > 0 && p > 0 ? c = Math.max(d, p) : d < 0 && p < 0 && (c = Math.min(d, p)), r.heightChanged = !1;
      for (let v of this.viewports) {
        let k = v.from == this.viewport.from ? C : e.docView.measureVisibleLineHeights(v);
        this.heightMap = (o ? Fi.empty().applyChanges(this.stateDeco, Ht.empty, this.heightOracle, [new ds(0, 0, 0, e.state.doc.length)]) : this.heightMap).updateHeight(r, 0, o, new Bq(v.from, k));
      }
      r.heightChanged && (a |= 2);
    }
    let m = !this.viewportIsAppropriate(this.viewport, c) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
    return m && (this.viewport = this.getViewport(c, this.scrollTarget)), this.updateForViewport(), (a & 2 || m) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(o ? [] : this.lineGaps, e)), a |= this.computeVisibleRanges(), this.mustEnforceCursorAssoc && (this.mustEnforceCursorAssoc = !1, e.docView.enforceCursorAssoc()), a;
  }
  get visibleTop() {
    return this.scaler.fromDOM(this.pixelViewport.top);
  }
  get visibleBottom() {
    return this.scaler.fromDOM(this.pixelViewport.bottom);
  }
  getViewport(e, n) {
    let i = 0.5 - Math.max(-0.5, Math.min(0.5, e / 1e3 / 2)), r = this.heightMap, s = this.state.doc, { visibleTop: o, visibleBottom: l } = this, a = new Nf(r.lineAt(o - i * 1e3, fn.ByHeight, s, 0, 0).from, r.lineAt(l + (1 - i) * 1e3, fn.ByHeight, s, 0, 0).to);
    if (n) {
      let { head: c } = n.range;
      if (c < a.from || c > a.to) {
        let u = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top), f = r.lineAt(c, fn.ByPos, s, 0, 0), h;
        n.y == "center" ? h = (f.top + f.bottom) / 2 - u / 2 : n.y == "start" || n.y == "nearest" && c < a.from ? h = f.top : h = f.bottom - u, a = new Nf(r.lineAt(h - 1e3 / 2, fn.ByHeight, s, 0, 0).from, r.lineAt(h + u + 1e3 / 2, fn.ByHeight, s, 0, 0).to);
      }
    }
    return a;
  }
  mapViewport(e, n) {
    let i = n.mapPos(e.from, -1), r = n.mapPos(e.to, 1);
    return new Nf(this.heightMap.lineAt(i, fn.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(r, fn.ByPos, this.state.doc, 0, 0).to);
  }
  viewportIsAppropriate({ from: e, to: n }, i = 0) {
    if (!this.inView)
      return !0;
    let { top: r } = this.heightMap.lineAt(e, fn.ByPos, this.state.doc, 0, 0), { bottom: s } = this.heightMap.lineAt(n, fn.ByPos, this.state.doc, 0, 0), { visibleTop: o, visibleBottom: l } = this;
    return (e == 0 || r <= o - Math.max(10, Math.min(-i, 250))) && (n == this.state.doc.length || s >= l + Math.max(10, Math.min(i, 250))) && r > o - 2 * 1e3 && s < l + 2 * 1e3;
  }
  mapLineGaps(e, n) {
    if (!e.length || n.empty)
      return e;
    let i = [];
    for (let r of e)
      n.touchesRange(r.from, r.to) || i.push(new qg(n.mapPos(r.from), n.mapPos(r.to), r.size));
    return i;
  }
  ensureLineGaps(e, n) {
    let i = this.heightOracle.lineWrapping, r = i ? 1e4 : 2e3, s = r >> 1, o = r << 1;
    if (this.defaultTextDirection != Sn.LTR && !i)
      return [];
    let l = [], a = (c, u, f, h) => {
      if (u - c < s)
        return;
      let d = this.state.selection.main, p = [d.from];
      d.empty || p.push(d.to);
      for (let _ of p)
        if (_ > c && _ < u) {
          a(c, _ - 10, f, h), a(_ + 10, u, f, h);
          return;
        }
      let g = Jq(e, (_) => _.from >= f.from && _.to <= f.to && Math.abs(_.from - c) < s && Math.abs(_.to - u) < s && !p.some((m) => _.from < m && _.to > m));
      if (!g) {
        if (u < f.to && n && i && n.visibleRanges.some((_) => _.from <= u && _.to >= u)) {
          let _ = n.moveToLineBoundary(Pe.cursor(u), !1, !0).head;
          _ > c && (u = _);
        }
        g = new qg(c, u, this.gapSize(f, c, u, h));
      }
      l.push(g);
    };
    for (let c of this.viewportLines) {
      if (c.length < o)
        continue;
      let u = qq(c.from, c.to, this.stateDeco);
      if (u.total < o)
        continue;
      let f = this.scrollTarget ? this.scrollTarget.range.head : null, h, d;
      if (i) {
        let p = r / this.heightOracle.lineLength * this.heightOracle.lineHeight, g, _;
        if (f != null) {
          let m = jf(u, f), C = ((this.visibleBottom - this.visibleTop) / 2 + p) / c.height;
          g = m - C, _ = m + C;
        } else
          g = (this.visibleTop - c.top - p) / c.height, _ = (this.visibleBottom - c.top + p) / c.height;
        h = Lf(u, g), d = Lf(u, _);
      } else {
        let p = u.total * this.heightOracle.charWidth, g = r * this.heightOracle.charWidth, _, m;
        if (f != null) {
          let C = jf(u, f), v = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + g) / p;
          _ = C - v, m = C + v;
        } else
          _ = (this.pixelViewport.left - g) / p, m = (this.pixelViewport.right + g) / p;
        h = Lf(u, _), d = Lf(u, m);
      }
      h > c.from && a(c.from, h, c, u), d < c.to && a(d, c.to, c, u);
    }
    return l;
  }
  gapSize(e, n, i, r) {
    let s = jf(r, i) - jf(r, n);
    return this.heightOracle.lineWrapping ? e.height * s : r.total * this.heightOracle.charWidth * s;
  }
  updateLineGaps(e) {
    qg.same(e, this.lineGaps) || (this.lineGaps = e, this.lineGapDeco = gt.set(e.map((n) => n.draw(this.heightOracle.lineWrapping))));
  }
  computeVisibleRanges() {
    let e = this.stateDeco;
    this.lineGaps.length && (e = e.concat(this.lineGapDeco));
    let n = [];
    Wt.spans(e, this.viewport.from, this.viewport.to, {
      span(r, s) {
        n.push({ from: r, to: s });
      },
      point() {
      }
    }, 20);
    let i = n.length != this.visibleRanges.length || this.visibleRanges.some((r, s) => r.from != n[s].from || r.to != n[s].to);
    return this.visibleRanges = n, i ? 4 : 0;
  }
  lineBlockAt(e) {
    return e >= this.viewport.from && e <= this.viewport.to && this.viewportLines.find((n) => n.from <= e && n.to >= e) || Tc(this.heightMap.lineAt(e, fn.ByPos, this.state.doc, 0, 0), this.scaler);
  }
  lineBlockAtHeight(e) {
    return Tc(this.heightMap.lineAt(this.scaler.fromDOM(e), fn.ByHeight, this.state.doc, 0, 0), this.scaler);
  }
  elementAtHeight(e) {
    return Tc(this.heightMap.blockAt(this.scaler.fromDOM(e), this.state.doc, 0, 0), this.scaler);
  }
  get docHeight() {
    return this.scaler.toDOM(this.heightMap.height);
  }
  get contentHeight() {
    return this.docHeight + this.paddingTop + this.paddingBottom;
  }
}
class Nf {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
function qq(t, e, n) {
  let i = [], r = t, s = 0;
  return Wt.spans(n, t, e, {
    span() {
    },
    point(o, l) {
      o > r && (i.push({ from: r, to: o }), s += o - r), r = l;
    }
  }, 20), r < e && (i.push({ from: r, to: e }), s += e - r), { total: s, ranges: i };
}
function Lf({ total: t, ranges: e }, n) {
  if (n <= 0)
    return e[0].from;
  if (n >= 1)
    return e[e.length - 1].to;
  let i = Math.floor(t * n);
  for (let r = 0; ; r++) {
    let { from: s, to: o } = e[r], l = o - s;
    if (i <= l)
      return s + i;
    i -= l;
  }
}
function jf(t, e) {
  let n = 0;
  for (let { from: i, to: r } of t.ranges) {
    if (e <= r) {
      n += e - i;
      break;
    }
    n += r - i;
  }
  return n / t.total;
}
function Jq(t, e) {
  for (let n of t)
    if (e(n))
      return n;
}
const zk = {
  toDOM(t) {
    return t;
  },
  fromDOM(t) {
    return t;
  },
  scale: 1
};
class Kq {
  constructor(e, n, i) {
    let r = 0, s = 0, o = 0;
    this.viewports = i.map(({ from: l, to: a }) => {
      let c = n.lineAt(l, fn.ByPos, e, 0, 0).top, u = n.lineAt(a, fn.ByPos, e, 0, 0).bottom;
      return r += u - c, { from: l, to: a, top: c, bottom: u, domTop: 0, domBottom: 0 };
    }), this.scale = (7e6 - r) / (n.height - r);
    for (let l of this.viewports)
      l.domTop = o + (l.top - s) * this.scale, o = l.domBottom = l.domTop + (l.bottom - l.top), s = l.bottom;
  }
  toDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let s = n < this.viewports.length ? this.viewports[n] : null;
      if (!s || e < s.top)
        return r + (e - i) * this.scale;
      if (e <= s.bottom)
        return s.domTop + (e - s.top);
      i = s.bottom, r = s.domBottom;
    }
  }
  fromDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let s = n < this.viewports.length ? this.viewports[n] : null;
      if (!s || e < s.domTop)
        return i + (e - r) / this.scale;
      if (e <= s.domBottom)
        return s.top + (e - s.domTop);
      i = s.bottom, r = s.domBottom;
    }
  }
}
function Tc(t, e) {
  if (e.scale == 1)
    return t;
  let n = e.toDOM(t.top), i = e.toDOM(t.bottom);
  return new Ao(t.from, t.length, n, i - n, Array.isArray(t.type) ? t.type.map((r) => Tc(r, e)) : t.type);
}
const Bf = /* @__PURE__ */ nt.define({ combine: (t) => t.join(" ") }), D1 = /* @__PURE__ */ nt.define({ combine: (t) => t.indexOf(!0) > -1 }), N1 = /* @__PURE__ */ Vo.newName(), aE = /* @__PURE__ */ Vo.newName(), cE = /* @__PURE__ */ Vo.newName(), uE = { "&light": "." + aE, "&dark": "." + cE };
function L1(t, e, n) {
  return new Vo(e, {
    finish(i) {
      return /&/.test(i) ? i.replace(/&\w*/, (r) => {
        if (r == "&")
          return t;
        if (!n || !n[r])
          throw new RangeError(`Unsupported selector: ${r}`);
        return n[r];
      }) : t + " " + i;
    }
  });
}
const Gq = /* @__PURE__ */ L1("." + N1, {
  "&.cm-editor": {
    position: "relative !important",
    boxSizing: "border-box",
    "&.cm-focused": {
      outline: "1px dotted #212121"
    },
    display: "flex !important",
    flexDirection: "column"
  },
  ".cm-scroller": {
    display: "flex !important",
    alignItems: "flex-start !important",
    fontFamily: "monospace",
    lineHeight: 1.4,
    height: "100%",
    overflowX: "auto",
    position: "relative",
    zIndex: 0
  },
  ".cm-content": {
    margin: 0,
    flexGrow: 2,
    flexShrink: 0,
    display: "block",
    whiteSpace: "pre",
    wordWrap: "normal",
    boxSizing: "border-box",
    padding: "4px 0",
    outline: "none",
    "&[contenteditable=true]": {
      WebkitUserModify: "read-write-plaintext-only"
    }
  },
  ".cm-lineWrapping": {
    whiteSpace_fallback: "pre-wrap",
    whiteSpace: "break-spaces",
    wordBreak: "break-word",
    overflowWrap: "anywhere",
    flexShrink: 1
  },
  "&light .cm-content": { caretColor: "black" },
  "&dark .cm-content": { caretColor: "white" },
  ".cm-line": {
    display: "block",
    padding: "0 2px 0 6px"
  },
  ".cm-layer": {
    contain: "size style",
    "& > *": {
      position: "absolute"
    }
  },
  "&light .cm-selectionBackground": {
    background: "#d9d9d9"
  },
  "&dark .cm-selectionBackground": {
    background: "#222"
  },
  "&light.cm-focused .cm-selectionBackground": {
    background: "#d7d4f0"
  },
  "&dark.cm-focused .cm-selectionBackground": {
    background: "#233"
  },
  ".cm-cursorLayer": {
    pointerEvents: "none"
  },
  "&.cm-focused .cm-cursorLayer": {
    animation: "steps(1) cm-blink 1.2s infinite"
  },
  "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  ".cm-cursor, .cm-dropCursor": {
    borderLeft: "1.2px solid black",
    marginLeft: "-0.6px",
    pointerEvents: "none"
  },
  ".cm-cursor": {
    display: "none"
  },
  "&dark .cm-cursor": {
    borderLeftColor: "#444"
  },
  "&.cm-focused .cm-cursor": {
    display: "block"
  },
  "&light .cm-activeLine": { backgroundColor: "#cceeff44" },
  "&dark .cm-activeLine": { backgroundColor: "#99eeff33" },
  "&light .cm-specialChar": { color: "red" },
  "&dark .cm-specialChar": { color: "#f78" },
  ".cm-gutters": {
    flexShrink: 0,
    display: "flex",
    height: "100%",
    boxSizing: "border-box",
    left: 0,
    zIndex: 200
  },
  "&light .cm-gutters": {
    backgroundColor: "#f5f5f5",
    color: "#6c6c6c",
    borderRight: "1px solid #ddd"
  },
  "&dark .cm-gutters": {
    backgroundColor: "#333338",
    color: "#ccc"
  },
  ".cm-gutter": {
    display: "flex !important",
    flexDirection: "column",
    flexShrink: 0,
    boxSizing: "border-box",
    minHeight: "100%",
    overflow: "hidden"
  },
  ".cm-gutterElement": {
    boxSizing: "border-box"
  },
  ".cm-lineNumbers .cm-gutterElement": {
    padding: "0 3px 0 5px",
    minWidth: "20px",
    textAlign: "right",
    whiteSpace: "nowrap"
  },
  "&light .cm-activeLineGutter": {
    backgroundColor: "#e2f2ff"
  },
  "&dark .cm-activeLineGutter": {
    backgroundColor: "#222227"
  },
  ".cm-panels": {
    boxSizing: "border-box",
    position: "sticky",
    left: 0,
    right: 0
  },
  "&light .cm-panels": {
    backgroundColor: "#f5f5f5",
    color: "black"
  },
  "&light .cm-panels-top": {
    borderBottom: "1px solid #ddd"
  },
  "&light .cm-panels-bottom": {
    borderTop: "1px solid #ddd"
  },
  "&dark .cm-panels": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tab": {
    display: "inline-block",
    overflow: "hidden",
    verticalAlign: "bottom"
  },
  ".cm-widgetBuffer": {
    verticalAlign: "text-top",
    height: "1em",
    width: 0,
    display: "inline"
  },
  ".cm-placeholder": {
    color: "#888",
    display: "inline-block",
    verticalAlign: "top"
  },
  ".cm-highlightSpace:before": {
    content: "attr(data-display)",
    position: "absolute",
    pointerEvents: "none",
    color: "#888"
  },
  ".cm-highlightTab": {
    backgroundImage: `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,
    backgroundSize: "auto 100%",
    backgroundPosition: "right 90%",
    backgroundRepeat: "no-repeat"
  },
  ".cm-trailingSpace": {
    backgroundColor: "#ff332255"
  },
  ".cm-button": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    padding: ".2em 1em",
    borderRadius: "1px"
  },
  "&light .cm-button": {
    backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
    }
  },
  "&dark .cm-button": {
    backgroundImage: "linear-gradient(#393939, #111)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#111, #333)"
    }
  },
  ".cm-textfield": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    border: "1px solid silver",
    padding: ".2em .5em"
  },
  "&light .cm-textfield": {
    backgroundColor: "white"
  },
  "&dark .cm-textfield": {
    border: "1px solid #555",
    backgroundColor: "inherit"
  }
}, uE);
class Yq {
  constructor(e, n, i, r) {
    this.typeOver = r, this.bounds = null, this.text = "";
    let { impreciseHead: s, impreciseAnchor: o } = e.docView;
    if (e.state.readOnly && n > -1)
      this.newSel = null;
    else if (n > -1 && (this.bounds = e.docView.domBoundsAround(n, i, 0))) {
      let l = s || o ? [] : Qq(e), a = new X8(l, e.state);
      a.readRange(this.bounds.startDOM, this.bounds.endDOM), this.text = a.text, this.newSel = Zq(l, this.bounds.from);
    } else {
      let l = e.observer.selectionRange, a = s && s.node == l.focusNode && s.offset == l.focusOffset || !xa(e.contentDOM, l.focusNode) ? e.state.selection.main.head : e.docView.posFromDOM(l.focusNode, l.focusOffset), c = o && o.node == l.anchorNode && o.offset == l.anchorOffset || !xa(e.contentDOM, l.anchorNode) ? e.state.selection.main.anchor : e.docView.posFromDOM(l.anchorNode, l.anchorOffset);
      this.newSel = Pe.single(c, a);
    }
  }
}
function fE(t, e) {
  let n, { newSel: i } = e, r = t.state.selection.main;
  if (e.bounds) {
    let { from: s, to: o } = e.bounds, l = r.from, a = null;
    (t.inputState.lastKeyCode === 8 && t.inputState.lastKeyTime > Date.now() - 100 || it.android && e.text.length < o - s) && (l = r.to, a = "end");
    let c = Xq(t.state.doc.sliceString(s, o, Eo), e.text, l - s, a);
    c && (it.chrome && t.inputState.lastKeyCode == 13 && c.toB == c.from + 2 && e.text.slice(c.from, c.toB) == Eo + Eo && c.toB--, n = {
      from: s + c.from,
      to: s + c.toA,
      insert: Ht.of(e.text.slice(c.from, c.toB).split(Eo))
    });
  } else
    i && (!t.hasFocus || !t.state.facet(Lp) || i.main.eq(r)) && (i = null);
  if (!n && !i)
    return !1;
  if (!n && e.typeOver && !r.empty && i && i.main.empty ? n = { from: r.from, to: r.to, insert: t.state.doc.slice(r.from, r.to) } : n && n.from >= r.from && n.to <= r.to && (n.from != r.from || n.to != r.to) && r.to - r.from - (n.to - n.from) <= 4 ? n = {
    from: r.from,
    to: r.to,
    insert: t.state.doc.slice(r.from, n.from).append(n.insert).append(t.state.doc.slice(n.to, r.to))
  } : (it.mac || it.android) && n && n.from == n.to && n.from == r.head - 1 && /^\. ?$/.test(n.insert.toString()) ? (i && n.insert.length == 2 && (i = Pe.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: Ht.of([" "]) }) : it.chrome && n && n.from == n.to && n.from == r.head && n.insert.toString() == `
 ` && t.lineWrapping && (i && (i = Pe.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: Ht.of([" "]) }), n) {
    let s = t.state;
    if (it.ios && t.inputState.flushIOSKey(t) || it.android && (n.from == r.from && n.to == r.to && n.insert.length == 1 && n.insert.lines == 2 && _a(t.contentDOM, "Enter", 13) || n.from == r.from - 1 && n.to == r.to && n.insert.length == 0 && _a(t.contentDOM, "Backspace", 8) || n.from == r.from && n.to == r.to + 1 && n.insert.length == 0 && _a(t.contentDOM, "Delete", 46)))
      return !0;
    let o = n.insert.toString();
    if (t.state.facet(V8).some((c) => c(t, n.from, n.to, o)))
      return !0;
    t.inputState.composing >= 0 && t.inputState.composing++;
    let l;
    if (n.from >= r.from && n.to <= r.to && n.to - n.from >= (r.to - r.from) / 3 && (!i || i.main.empty && i.main.from == n.from + n.insert.length) && t.inputState.composing < 0) {
      let c = r.from < n.from ? s.sliceDoc(r.from, n.from) : "", u = r.to > n.to ? s.sliceDoc(n.to, r.to) : "";
      l = s.replaceSelection(t.state.toText(c + n.insert.sliceString(0, void 0, t.state.lineBreak) + u));
    } else {
      let c = s.changes(n), u = i && !s.selection.main.eq(i.main) && i.main.to <= c.newLength ? i.main : void 0;
      if (s.selection.ranges.length > 1 && t.inputState.composing >= 0 && n.to <= r.to && n.to >= r.to - 10) {
        let f = t.state.sliceDoc(n.from, n.to), h = Q8(t) || t.state.doc.lineAt(r.head), d = r.to - n.to, p = r.to - r.from;
        l = s.changeByRange((g) => {
          if (g.from == r.from && g.to == r.to)
            return { changes: c, range: u || g.map(c) };
          let _ = g.to - d, m = _ - f.length;
          if (g.to - g.from != p || t.state.sliceDoc(m, _) != f || h && g.to >= h.from && g.from <= h.to)
            return { range: g };
          let C = s.changes({ from: m, to: _, insert: n.insert }), v = g.to - r.to;
          return {
            changes: C,
            range: u ? Pe.range(Math.max(0, u.anchor + v), Math.max(0, u.head + v)) : g.map(C)
          };
        });
      } else
        l = {
          changes: c,
          selection: u && s.selection.replaceRange(u)
        };
    }
    let a = "input.type";
    return t.composing && (a += ".compose", t.inputState.compositionFirstChange && (a += ".start", t.inputState.compositionFirstChange = !1)), t.dispatch(l, { scrollIntoView: !0, userEvent: a }), !0;
  } else if (i && !i.main.eq(r)) {
    let s = !1, o = "select";
    return t.inputState.lastSelectionTime > Date.now() - 50 && (t.inputState.lastSelectionOrigin == "select" && (s = !0), o = t.inputState.lastSelectionOrigin), t.dispatch({ selection: i, scrollIntoView: s, userEvent: o }), !0;
  } else
    return !1;
}
function Xq(t, e, n, i) {
  let r = Math.min(t.length, e.length), s = 0;
  for (; s < r && t.charCodeAt(s) == e.charCodeAt(s); )
    s++;
  if (s == r && t.length == e.length)
    return null;
  let o = t.length, l = e.length;
  for (; o > 0 && l > 0 && t.charCodeAt(o - 1) == e.charCodeAt(l - 1); )
    o--, l--;
  if (i == "end") {
    let a = Math.max(0, s - Math.min(o, l));
    n -= o + a - s;
  }
  if (o < s && t.length < e.length) {
    let a = n <= s && n >= o ? s - n : 0;
    s -= a, l = s + (l - o), o = s;
  } else if (l < s) {
    let a = n <= s && n >= l ? s - n : 0;
    s -= a, o = s + (o - l), l = s;
  }
  return { from: s, toA: o, toB: l };
}
function Qq(t) {
  let e = [];
  if (t.root.activeElement != t.contentDOM)
    return e;
  let { anchorNode: n, anchorOffset: i, focusNode: r, focusOffset: s } = t.observer.selectionRange;
  return n && (e.push(new vk(n, i)), (r != n || s != i) && e.push(new vk(r, s))), e;
}
function Zq(t, e) {
  if (t.length == 0)
    return null;
  let n = t[0].pos, i = t.length == 2 ? t[1].pos : n;
  return n > -1 && i > -1 ? Pe.single(n + e, i + e) : null;
}
const $q = {
  childList: !0,
  characterData: !0,
  subtree: !0,
  attributes: !0,
  characterDataOldValue: !0
}, Jg = it.ie && it.ie_version <= 11;
class eJ {
  constructor(e) {
    this.view = e, this.active = !1, this.selectionRange = new KW(), this.selectionChanged = !1, this.delayedFlush = -1, this.resizeTimeout = -1, this.queue = [], this.delayedAndroidKey = null, this.flushingAndroidKey = -1, this.lastChange = 0, this.scrollTargets = [], this.intersection = null, this.resizeScroll = null, this.resizeContent = null, this.intersecting = !1, this.gapIntersection = null, this.gaps = [], this.parentCheck = -1, this.dom = e.contentDOM, this.observer = new MutationObserver((n) => {
      for (let i of n)
        this.queue.push(i);
      (it.ie && it.ie_version <= 11 || it.ios && e.composing) && n.some((i) => i.type == "childList" && i.removedNodes.length || i.type == "characterData" && i.oldValue.length > i.target.nodeValue.length) ? this.flushSoon() : this.flush();
    }), Jg && (this.onCharData = (n) => {
      this.queue.push({
        target: n.target,
        type: "characterData",
        oldValue: n.prevValue
      }), this.flushSoon();
    }), this.onSelectionChange = this.onSelectionChange.bind(this), this.onResize = this.onResize.bind(this), this.onPrint = this.onPrint.bind(this), this.onScroll = this.onScroll.bind(this), typeof ResizeObserver == "function" && (this.resizeScroll = new ResizeObserver(() => {
      var n;
      ((n = this.view.docView) === null || n === void 0 ? void 0 : n.lastUpdate) < Date.now() - 75 && this.onResize();
    }), this.resizeScroll.observe(e.scrollDOM), this.resizeContent = new ResizeObserver(() => this.view.requestMeasure()), this.resizeContent.observe(e.contentDOM)), this.addWindowListeners(this.win = e.win), this.start(), typeof IntersectionObserver == "function" && (this.intersection = new IntersectionObserver((n) => {
      this.parentCheck < 0 && (this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3)), n.length > 0 && n[n.length - 1].intersectionRatio > 0 != this.intersecting && (this.intersecting = !this.intersecting, this.intersecting != this.view.inView && this.onScrollChanged(document.createEvent("Event")));
    }, {}), this.intersection.observe(this.dom), this.gapIntersection = new IntersectionObserver((n) => {
      n.length > 0 && n[n.length - 1].intersectionRatio > 0 && this.onScrollChanged(document.createEvent("Event"));
    }, {})), this.listenForScroll(), this.readSelectionRange();
  }
  onScrollChanged(e) {
    this.view.inputState.runScrollHandlers(this.view, e), this.intersecting && this.view.measure();
  }
  onScroll(e) {
    this.intersecting && this.flush(!1), this.onScrollChanged(e);
  }
  onResize() {
    this.resizeTimeout < 0 && (this.resizeTimeout = setTimeout(() => {
      this.resizeTimeout = -1, this.view.requestMeasure();
    }, 50));
  }
  onPrint() {
    this.view.viewState.printing = !0, this.view.measure(), setTimeout(() => {
      this.view.viewState.printing = !1, this.view.requestMeasure();
    }, 500);
  }
  updateGaps(e) {
    if (this.gapIntersection && (e.length != this.gaps.length || this.gaps.some((n, i) => n != e[i]))) {
      this.gapIntersection.disconnect();
      for (let n of e)
        this.gapIntersection.observe(n);
      this.gaps = e;
    }
  }
  onSelectionChange(e) {
    let n = this.selectionChanged;
    if (!this.readSelectionRange() || this.delayedAndroidKey)
      return;
    let { view: i } = this, r = this.selectionRange;
    if (i.state.facet(Lp) ? i.root.activeElement != this.dom : !bh(i.dom, r))
      return;
    let s = r.anchorNode && i.docView.nearest(r.anchorNode);
    if (s && s.ignoreEvent(e)) {
      n || (this.selectionChanged = !1);
      return;
    }
    (it.ie && it.ie_version <= 11 || it.android && it.chrome) && !i.state.selection.main.empty && r.focusNode && ld(r.focusNode, r.focusOffset, r.anchorNode, r.anchorOffset) ? this.flushSoon() : this.flush(!1);
  }
  readSelectionRange() {
    let { view: e } = this, n = it.safari && e.root.nodeType == 11 && HW(this.dom.ownerDocument) == this.dom && tJ(this.view) || od(e.root);
    if (!n || this.selectionRange.eq(n))
      return !1;
    let i = bh(this.dom, n);
    return i && !this.selectionChanged && e.inputState.lastFocusTime > Date.now() - 200 && e.inputState.lastTouchTime < Date.now() - 300 && YW(this.dom, n) ? (this.view.inputState.lastFocusTime = 0, e.docView.updateSelection(), !1) : (this.selectionRange.setRange(n), i && (this.selectionChanged = !0), !0);
  }
  setSelectionRange(e, n) {
    this.selectionRange.set(e.node, e.offset, n.node, n.offset), this.selectionChanged = !1;
  }
  clearSelectionRange() {
    this.selectionRange.set(null, 0, null, 0);
  }
  listenForScroll() {
    this.parentCheck = -1;
    let e = 0, n = null;
    for (let i = this.dom; i; )
      if (i.nodeType == 1)
        !n && e < this.scrollTargets.length && this.scrollTargets[e] == i ? e++ : n || (n = this.scrollTargets.slice(0, e)), n && n.push(i), i = i.assignedSlot || i.parentNode;
      else if (i.nodeType == 11)
        i = i.host;
      else
        break;
    if (e < this.scrollTargets.length && !n && (n = this.scrollTargets.slice(0, e)), n) {
      for (let i of this.scrollTargets)
        i.removeEventListener("scroll", this.onScroll);
      for (let i of this.scrollTargets = n)
        i.addEventListener("scroll", this.onScroll);
    }
  }
  ignore(e) {
    if (!this.active)
      return e();
    try {
      return this.stop(), e();
    } finally {
      this.start(), this.clear();
    }
  }
  start() {
    this.active || (this.observer.observe(this.dom, $q), Jg && this.dom.addEventListener("DOMCharacterDataModified", this.onCharData), this.active = !0);
  }
  stop() {
    this.active && (this.active = !1, this.observer.disconnect(), Jg && this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData));
  }
  clear() {
    this.processRecords(), this.queue.length = 0, this.selectionChanged = !1;
  }
  delayAndroidKey(e, n) {
    var i;
    if (!this.delayedAndroidKey) {
      let r = () => {
        let s = this.delayedAndroidKey;
        s && (this.clearDelayedAndroidKey(), !this.flush() && s.force && _a(this.dom, s.key, s.keyCode));
      };
      this.flushingAndroidKey = this.view.win.requestAnimationFrame(r);
    }
    (!this.delayedAndroidKey || e == "Enter") && (this.delayedAndroidKey = {
      key: e,
      keyCode: n,
      force: this.lastChange < Date.now() - 50 || !!(!((i = this.delayedAndroidKey) === null || i === void 0) && i.force)
    });
  }
  clearDelayedAndroidKey() {
    this.win.cancelAnimationFrame(this.flushingAndroidKey), this.delayedAndroidKey = null, this.flushingAndroidKey = -1;
  }
  flushSoon() {
    this.delayedFlush < 0 && (this.delayedFlush = this.view.win.requestAnimationFrame(() => {
      this.delayedFlush = -1, this.flush();
    }));
  }
  forceFlush() {
    this.delayedFlush >= 0 && (this.view.win.cancelAnimationFrame(this.delayedFlush), this.delayedFlush = -1), this.flush();
  }
  processRecords() {
    let e = this.queue;
    for (let s of this.observer.takeRecords())
      e.push(s);
    e.length && (this.queue = []);
    let n = -1, i = -1, r = !1;
    for (let s of e) {
      let o = this.readMutation(s);
      o && (o.typeOver && (r = !0), n == -1 ? { from: n, to: i } = o : (n = Math.min(o.from, n), i = Math.max(o.to, i)));
    }
    return { from: n, to: i, typeOver: r };
  }
  readChange() {
    let { from: e, to: n, typeOver: i } = this.processRecords(), r = this.selectionChanged && bh(this.dom, this.selectionRange);
    return e < 0 && !r ? null : (e > -1 && (this.lastChange = Date.now()), this.view.inputState.lastFocusTime = 0, this.selectionChanged = !1, new Yq(this.view, e, n, i));
  }
  flush(e = !0) {
    if (this.delayedFlush >= 0 || this.delayedAndroidKey)
      return !1;
    e && this.readSelectionRange();
    let n = this.readChange();
    if (!n)
      return !1;
    let i = this.view.state, r = fE(this.view, n);
    return this.view.state == i && this.view.update([]), r;
  }
  readMutation(e) {
    let n = this.view.docView.nearest(e.target);
    if (!n || n.ignoreMutation(e))
      return null;
    if (n.markDirty(e.type == "attributes"), e.type == "attributes" && (n.dirty |= 4), e.type == "childList") {
      let i = Vk(n, e.previousSibling || e.target.previousSibling, -1), r = Vk(n, e.nextSibling || e.target.nextSibling, 1);
      return {
        from: i ? n.posAfter(i) : n.posAtStart,
        to: r ? n.posBefore(r) : n.posAtEnd,
        typeOver: !1
      };
    } else
      return e.type == "characterData" ? { from: n.posAtStart, to: n.posAtEnd, typeOver: e.target.nodeValue == e.oldValue } : null;
  }
  setWindow(e) {
    e != this.win && (this.removeWindowListeners(this.win), this.win = e, this.addWindowListeners(this.win));
  }
  addWindowListeners(e) {
    e.addEventListener("resize", this.onResize), e.addEventListener("beforeprint", this.onPrint), e.addEventListener("scroll", this.onScroll), e.document.addEventListener("selectionchange", this.onSelectionChange);
  }
  removeWindowListeners(e) {
    e.removeEventListener("scroll", this.onScroll), e.removeEventListener("resize", this.onResize), e.removeEventListener("beforeprint", this.onPrint), e.document.removeEventListener("selectionchange", this.onSelectionChange);
  }
  destroy() {
    var e, n, i, r;
    this.stop(), (e = this.intersection) === null || e === void 0 || e.disconnect(), (n = this.gapIntersection) === null || n === void 0 || n.disconnect(), (i = this.resizeScroll) === null || i === void 0 || i.disconnect(), (r = this.resizeContent) === null || r === void 0 || r.disconnect();
    for (let s of this.scrollTargets)
      s.removeEventListener("scroll", this.onScroll);
    this.removeWindowListeners(this.win), clearTimeout(this.parentCheck), clearTimeout(this.resizeTimeout), this.win.cancelAnimationFrame(this.delayedFlush), this.win.cancelAnimationFrame(this.flushingAndroidKey);
  }
}
function Vk(t, e, n) {
  for (; e; ) {
    let i = pn.get(e);
    if (i && i.parent == t)
      return i;
    let r = e.parentNode;
    e = r != t.dom ? r : n > 0 ? e.nextSibling : e.previousSibling;
  }
  return null;
}
function tJ(t) {
  let e = null;
  function n(a) {
    a.preventDefault(), a.stopImmediatePropagation(), e = a.getTargetRanges()[0];
  }
  if (t.contentDOM.addEventListener("beforeinput", n, !0), t.dom.ownerDocument.execCommand("indent"), t.contentDOM.removeEventListener("beforeinput", n, !0), !e)
    return null;
  let i = e.startContainer, r = e.startOffset, s = e.endContainer, o = e.endOffset, l = t.docView.domAtPos(t.state.selection.main.anchor);
  return ld(l.node, l.offset, s, o) && ([i, r, s, o] = [s, o, i, r]), { anchorNode: i, anchorOffset: r, focusNode: s, focusOffset: o };
}
class tt {
  constructor(e = {}) {
    this.plugins = [], this.pluginMap = /* @__PURE__ */ new Map(), this.editorAttrs = {}, this.contentAttrs = {}, this.bidiCache = [], this.destroyed = !1, this.updateState = 2, this.measureScheduled = -1, this.measureRequests = [], this.contentDOM = document.createElement("div"), this.scrollDOM = document.createElement("div"), this.scrollDOM.tabIndex = -1, this.scrollDOM.className = "cm-scroller", this.scrollDOM.appendChild(this.contentDOM), this.announceDOM = document.createElement("div"), this.announceDOM.style.cssText = "position: fixed; top: -10000px", this.announceDOM.setAttribute("aria-live", "polite"), this.dom = document.createElement("div"), this.dom.appendChild(this.announceDOM), this.dom.appendChild(this.scrollDOM), this._dispatch = e.dispatch || ((n) => this.update([n])), this.dispatch = this.dispatch.bind(this), this._root = e.root || GW(e.parent) || document, this.viewState = new Fk(e.state || Rt.create(e)), this.plugins = this.state.facet(Mc).map((n) => new Ug(n));
    for (let n of this.plugins)
      n.update(this);
    this.observer = new eJ(this), this.inputState = new Cq(this), this.inputState.ensureHandlers(this, this.plugins), this.docView = new kk(this), this.mountStyles(), this.updateAttrs(), this.updateState = 0, this.requestMeasure(), e.parent && e.parent.appendChild(this.dom);
  }
  get state() {
    return this.viewState.state;
  }
  get viewport() {
    return this.viewState.viewport;
  }
  get visibleRanges() {
    return this.viewState.visibleRanges;
  }
  get inView() {
    return this.viewState.inView;
  }
  get composing() {
    return this.inputState.composing > 0;
  }
  get compositionStarted() {
    return this.inputState.composing >= 0;
  }
  get root() {
    return this._root;
  }
  get win() {
    return this.dom.ownerDocument.defaultView || window;
  }
  dispatch(...e) {
    this._dispatch(e.length == 1 && e[0] instanceof di ? e[0] : this.state.update(...e));
  }
  update(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
    let n = !1, i = !1, r, s = this.state;
    for (let c of e) {
      if (c.startState != s)
        throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
      s = c.state;
    }
    if (this.destroyed) {
      this.viewState.state = s;
      return;
    }
    let o = this.observer.delayedAndroidKey, l = null;
    if (o ? (this.observer.clearDelayedAndroidKey(), l = this.observer.readChange(), (l && !this.state.doc.eq(s.doc) || !this.state.selection.eq(s.selection)) && (l = null)) : this.observer.clear(), s.facet(Rt.phrases) != this.state.facet(Rt.phrases))
      return this.setState(s);
    r = ud.create(this, s, e);
    let a = this.viewState.scrollTarget;
    try {
      this.updateState = 2;
      for (let c of e) {
        if (a && (a = a.map(c.changes)), c.scrollIntoView) {
          let { main: u } = c.state.selection;
          a = new cd(u.empty ? u : Pe.cursor(u.head, u.head > u.anchor ? -1 : 1));
        }
        for (let u of c.effects)
          u.is(yk) && (a = u.value);
      }
      this.viewState.update(r, a), this.bidiCache = fd.update(this.bidiCache, r.changes), r.empty || (this.updatePlugins(r), this.inputState.update(r)), n = this.docView.update(r), this.state.facet(Oc) != this.styleModules && this.mountStyles(), i = this.updateAttrs(), this.showAnnouncements(e), this.docView.updateSelection(n, e.some((c) => c.isUserEvent("select.pointer")));
    } finally {
      this.updateState = 0;
    }
    if (r.startState.facet(Bf) != r.state.facet(Bf) && (this.viewState.mustMeasureContent = !0), (n || i || a || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent) && this.requestMeasure(), !r.empty)
      for (let c of this.state.facet(M1))
        c(r);
    l && !fE(this, l) && o.force && _a(this.contentDOM, o.key, o.keyCode);
  }
  setState(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
    if (this.destroyed) {
      this.viewState.state = e;
      return;
    }
    this.updateState = 2;
    let n = this.hasFocus;
    try {
      for (let i of this.plugins)
        i.destroy(this);
      this.viewState = new Fk(e), this.plugins = e.facet(Mc).map((i) => new Ug(i)), this.pluginMap.clear();
      for (let i of this.plugins)
        i.update(this);
      this.docView = new kk(this), this.inputState.ensureHandlers(this, this.plugins), this.mountStyles(), this.updateAttrs(), this.bidiCache = [];
    } finally {
      this.updateState = 0;
    }
    n && this.focus(), this.requestMeasure();
  }
  updatePlugins(e) {
    let n = e.startState.facet(Mc), i = e.state.facet(Mc);
    if (n != i) {
      let r = [];
      for (let s of i) {
        let o = n.indexOf(s);
        if (o < 0)
          r.push(new Ug(s));
        else {
          let l = this.plugins[o];
          l.mustUpdate = e, r.push(l);
        }
      }
      for (let s of this.plugins)
        s.mustUpdate != e && s.destroy(this);
      this.plugins = r, this.pluginMap.clear(), this.inputState.ensureHandlers(this, this.plugins);
    } else
      for (let r of this.plugins)
        r.mustUpdate = e;
    for (let r = 0; r < this.plugins.length; r++)
      this.plugins[r].update(this);
  }
  measure(e = !0) {
    if (this.destroyed)
      return;
    this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.measureScheduled = 0, e && this.observer.forceFlush();
    let n = null, { scrollHeight: i, scrollTop: r, clientHeight: s } = this.scrollDOM, o = r > i - s - 4 ? i : r;
    try {
      for (let l = 0; ; l++) {
        this.updateState = 1;
        let a = this.viewport, c = this.viewState.lineBlockAtHeight(o), u = this.viewState.measure(this);
        if (!u && !this.measureRequests.length && this.viewState.scrollTarget == null)
          break;
        if (l > 5) {
          console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
          break;
        }
        let f = [];
        u & 4 || ([this.measureRequests, f] = [f, this.measureRequests]);
        let h = f.map((_) => {
          try {
            return _.read(this);
          } catch (m) {
            return ir(this.state, m), Uk;
          }
        }), d = ud.create(this, this.state, []), p = !1, g = !1;
        d.flags |= u, n ? n.flags |= u : n = d, this.updateState = 2, d.empty || (this.updatePlugins(d), this.inputState.update(d), this.updateAttrs(), p = this.docView.update(d));
        for (let _ = 0; _ < f.length; _++)
          if (h[_] != Uk)
            try {
              let m = f[_];
              m.write && m.write(h[_], this);
            } catch (m) {
              ir(this.state, m);
            }
        if (this.viewState.editorHeight)
          if (this.viewState.scrollTarget)
            this.docView.scrollIntoView(this.viewState.scrollTarget), this.viewState.scrollTarget = null, g = !0;
          else {
            let _ = this.viewState.lineBlockAt(c.from).top - c.top;
            (_ > 1 || _ < -1) && (this.scrollDOM.scrollTop += _, g = !0);
          }
        if (p && this.docView.updateSelection(!0), this.viewport.from == a.from && this.viewport.to == a.to && !g && this.measureRequests.length == 0)
          break;
      }
    } finally {
      this.updateState = 0, this.measureScheduled = -1;
    }
    if (n && !n.empty)
      for (let l of this.state.facet(M1))
        l(n);
  }
  get themeClasses() {
    return N1 + " " + (this.state.facet(D1) ? cE : aE) + " " + this.state.facet(Bf);
  }
  updateAttrs() {
    let e = Hk(this, W8, {
      class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
    }), n = {
      spellcheck: "false",
      autocorrect: "off",
      autocapitalize: "off",
      translate: "no",
      contenteditable: this.state.facet(Lp) ? "true" : "false",
      class: "cm-content",
      style: `${it.tabSize}: ${this.state.tabSize}`,
      role: "textbox",
      "aria-multiline": "true"
    };
    this.state.readOnly && (n["aria-readonly"] = "true"), Hk(this, Sb, n);
    let i = this.observer.ignore(() => {
      let r = E1(this.contentDOM, this.contentAttrs, n), s = E1(this.dom, this.editorAttrs, e);
      return r || s;
    });
    return this.editorAttrs = e, this.contentAttrs = n, i;
  }
  showAnnouncements(e) {
    let n = !0;
    for (let i of e)
      for (let r of i.effects)
        if (r.is(tt.announce)) {
          n && (this.announceDOM.textContent = ""), n = !1;
          let s = this.announceDOM.appendChild(document.createElement("div"));
          s.textContent = r.value;
        }
  }
  mountStyles() {
    this.styleModules = this.state.facet(Oc), Vo.mount(this.root, this.styleModules.concat(Gq).reverse());
  }
  readMeasured() {
    if (this.updateState == 2)
      throw new Error("Reading the editor layout isn't allowed during an update");
    this.updateState == 0 && this.measureScheduled > -1 && this.measure(!1);
  }
  requestMeasure(e) {
    if (this.measureScheduled < 0 && (this.measureScheduled = this.win.requestAnimationFrame(() => this.measure())), e) {
      if (e.key != null) {
        for (let n = 0; n < this.measureRequests.length; n++)
          if (this.measureRequests[n].key === e.key) {
            this.measureRequests[n] = e;
            return;
          }
      }
      this.measureRequests.push(e);
    }
  }
  plugin(e) {
    let n = this.pluginMap.get(e);
    return (n === void 0 || n && n.spec != e) && this.pluginMap.set(e, n = this.plugins.find((i) => i.spec == e) || null), n && n.update(this).value;
  }
  get documentTop() {
    return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
  }
  get documentPadding() {
    return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };
  }
  elementAtHeight(e) {
    return this.readMeasured(), this.viewState.elementAtHeight(e);
  }
  lineBlockAtHeight(e) {
    return this.readMeasured(), this.viewState.lineBlockAtHeight(e);
  }
  get viewportLineBlocks() {
    return this.viewState.viewportLines;
  }
  lineBlockAt(e) {
    return this.viewState.lineBlockAt(e);
  }
  get contentHeight() {
    return this.viewState.contentHeight;
  }
  moveByChar(e, n, i) {
    return Wg(this, e, Ok(this, e, n, i));
  }
  moveByGroup(e, n) {
    return Wg(this, e, Ok(this, e, n, (i) => vq(this, e.head, i)));
  }
  moveToLineBoundary(e, n, i = !0) {
    return wq(this, e, n, i);
  }
  moveVertically(e, n, i) {
    return Wg(this, e, kq(this, e, n, i));
  }
  domAtPos(e) {
    return this.docView.domAtPos(e);
  }
  posAtDOM(e, n = 0) {
    return this.docView.posFromDOM(e, n);
  }
  posAtCoords(e, n = !0) {
    return this.readMeasured(), $8(this, e, n);
  }
  coordsAtPos(e, n = 1) {
    this.readMeasured();
    let i = this.docView.coordsAt(e, n);
    if (!i || i.left == i.right)
      return i;
    let r = this.state.doc.lineAt(e), s = this.bidiSpans(r), o = s[ya.find(s, e - r.from, -1, n)];
    return wb(i, o.dir == Sn.LTR == n > 0);
  }
  get defaultCharacterWidth() {
    return this.viewState.heightOracle.charWidth;
  }
  get defaultLineHeight() {
    return this.viewState.heightOracle.lineHeight;
  }
  get textDirection() {
    return this.viewState.defaultTextDirection;
  }
  textDirectionAt(e) {
    return !this.state.facet(U8) || e < this.viewport.from || e > this.viewport.to ? this.textDirection : (this.readMeasured(), this.docView.textDirectionAt(e));
  }
  get lineWrapping() {
    return this.viewState.heightOracle.lineWrapping;
  }
  bidiSpans(e) {
    if (e.length > nJ)
      return G8(e.length);
    let n = this.textDirectionAt(e.from);
    for (let r of this.bidiCache)
      if (r.from == e.from && r.dir == n)
        return r.order;
    let i = oq(e.text, n);
    return this.bidiCache.push(new fd(e.from, e.to, n, i)), i;
  }
  get hasFocus() {
    var e;
    return (this.dom.ownerDocument.hasFocus() || it.safari && ((e = this.inputState) === null || e === void 0 ? void 0 : e.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;
  }
  focus() {
    this.observer.ignore(() => {
      S8(this.contentDOM), this.docView.updateSelection();
    });
  }
  setRoot(e) {
    this._root != e && (this._root = e, this.observer.setWindow((e.nodeType == 9 ? e : e.ownerDocument).defaultView || window), this.mountStyles());
  }
  destroy() {
    for (let e of this.plugins)
      e.destroy(this);
    this.plugins = [], this.inputState.destroy(), this.dom.remove(), this.observer.destroy(), this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.destroyed = !0;
  }
  static scrollIntoView(e, n = {}) {
    return yk.of(new cd(typeof e == "number" ? Pe.cursor(e) : e, n.y, n.x, n.yMargin, n.xMargin));
  }
  static domEventHandlers(e) {
    return Yn.define(() => ({}), { eventHandlers: e });
  }
  static theme(e, n) {
    let i = Vo.newName(), r = [Bf.of(i), Oc.of(L1(`.${i}`, e))];
    return n && n.dark && r.push(D1.of(!0)), r;
  }
  static baseTheme(e) {
    return ac.lowest(Oc.of(L1("." + N1, e, uE)));
  }
  static findFromDOM(e) {
    var n;
    let i = e.querySelector(".cm-content"), r = i && pn.get(i) || pn.get(e);
    return ((n = r == null ? void 0 : r.rootView) === null || n === void 0 ? void 0 : n.view) || null;
  }
}
tt.styleModule = Oc;
tt.inputHandler = V8;
tt.perLineTextDirection = U8;
tt.exceptionSink = z8;
tt.updateListener = M1;
tt.editable = Lp;
tt.mouseSelectionStyle = F8;
tt.dragMovesSelection = x8;
tt.clickAddsSelectionRange = B8;
tt.decorations = gu;
tt.atomicRanges = q8;
tt.scrollMargins = J8;
tt.darkTheme = D1;
tt.contentAttributes = Sb;
tt.editorAttributes = W8;
tt.lineWrapping = /* @__PURE__ */ tt.contentAttributes.of({ class: "cm-lineWrapping" });
tt.announce = /* @__PURE__ */ St.define();
const nJ = 4096, Uk = {};
class fd {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.dir = i, this.order = r;
  }
  static update(e, n) {
    if (n.empty)
      return e;
    let i = [], r = e.length ? e[e.length - 1].dir : Sn.LTR;
    for (let s = Math.max(0, e.length - 10); s < e.length; s++) {
      let o = e[s];
      o.dir == r && !n.touchesRange(o.from, o.to) && i.push(new fd(n.mapPos(o.from, 1), n.mapPos(o.to, -1), o.dir, o.order));
    }
    return i;
  }
}
function Hk(t, e, n) {
  for (let i = t.state.facet(e), r = i.length - 1; r >= 0; r--) {
    let s = i[r], o = typeof s == "function" ? s(t) : s;
    o && S1(o, n);
  }
  return n;
}
const iJ = it.mac ? "mac" : it.windows ? "win" : it.linux ? "linux" : "key";
function rJ(t, e) {
  const n = t.split(/-(?!$)/);
  let i = n[n.length - 1];
  i == "Space" && (i = " ");
  let r, s, o, l;
  for (let a = 0; a < n.length - 1; ++a) {
    const c = n[a];
    if (/^(cmd|meta|m)$/i.test(c))
      l = !0;
    else if (/^a(lt)?$/i.test(c))
      r = !0;
    else if (/^(c|ctrl|control)$/i.test(c))
      s = !0;
    else if (/^s(hift)?$/i.test(c))
      o = !0;
    else if (/^mod$/i.test(c))
      e == "mac" ? l = !0 : s = !0;
    else
      throw new Error("Unrecognized modifier name: " + c);
  }
  return r && (i = "Alt-" + i), s && (i = "Ctrl-" + i), l && (i = "Meta-" + i), o && (i = "Shift-" + i), i;
}
function xf(t, e, n) {
  return e.altKey && (t = "Alt-" + t), e.ctrlKey && (t = "Ctrl-" + t), e.metaKey && (t = "Meta-" + t), n !== !1 && e.shiftKey && (t = "Shift-" + t), t;
}
const sJ = /* @__PURE__ */ ac.default(/* @__PURE__ */ tt.domEventHandlers({
  keydown(t, e) {
    return dE(hE(e.state), t, e, "editor");
  }
})), jp = /* @__PURE__ */ nt.define({ enables: sJ }), Wk = /* @__PURE__ */ new WeakMap();
function hE(t) {
  let e = t.facet(jp), n = Wk.get(e);
  return n || Wk.set(e, n = aJ(e.reduce((i, r) => i.concat(r), []))), n;
}
function oJ(t, e, n) {
  return dE(hE(t.state), e, t, n);
}
let wo = null;
const lJ = 4e3;
function aJ(t, e = iJ) {
  let n = /* @__PURE__ */ Object.create(null), i = /* @__PURE__ */ Object.create(null), r = (o, l) => {
    let a = i[o];
    if (a == null)
      i[o] = l;
    else if (a != l)
      throw new Error("Key binding " + o + " is used both as a regular binding and as a multi-stroke prefix");
  }, s = (o, l, a, c) => {
    var u, f;
    let h = n[o] || (n[o] = /* @__PURE__ */ Object.create(null)), d = l.split(/ (?!$)/).map((_) => rJ(_, e));
    for (let _ = 1; _ < d.length; _++) {
      let m = d.slice(0, _).join(" ");
      r(m, !0), h[m] || (h[m] = {
        preventDefault: !0,
        run: [(C) => {
          let v = wo = { view: C, prefix: m, scope: o };
          return setTimeout(() => {
            wo == v && (wo = null);
          }, lJ), !0;
        }]
      });
    }
    let p = d.join(" ");
    r(p, !1);
    let g = h[p] || (h[p] = { preventDefault: !1, run: ((f = (u = h._any) === null || u === void 0 ? void 0 : u.run) === null || f === void 0 ? void 0 : f.slice()) || [] });
    a && g.run.push(a), c && (g.preventDefault = !0);
  };
  for (let o of t) {
    let l = o.scope ? o.scope.split(" ") : ["editor"];
    if (o.any)
      for (let c of l) {
        let u = n[c] || (n[c] = /* @__PURE__ */ Object.create(null));
        u._any || (u._any = { preventDefault: !1, run: [] });
        for (let f in u)
          u[f].run.push(o.any);
      }
    let a = o[e] || o.key;
    if (a)
      for (let c of l)
        s(c, a, o.run, o.preventDefault), o.shift && s(c, "Shift-" + a, o.shift, o.preventDefault);
  }
  return n;
}
function dE(t, e, n, i) {
  let r = UW(e), s = ki(r, 0), o = Zi(s) == r.length && r != " ", l = "", a = !1;
  wo && wo.view == n && wo.scope == i && (l = wo.prefix + " ", (a = tE.indexOf(e.keyCode) < 0) && (wo = null));
  let c = /* @__PURE__ */ new Set(), u = (p) => {
    if (p) {
      for (let g of p.run)
        if (!c.has(g) && (c.add(g), g(n, e)))
          return !0;
      p.preventDefault && (a = !0);
    }
    return !1;
  }, f = t[i], h, d;
  if (f) {
    if (u(f[l + xf(r, e, !o)]))
      return !0;
    if (o && (e.altKey || e.metaKey || e.ctrlKey) && (h = Uo[e.keyCode]) && h != r) {
      if (u(f[l + xf(h, e, !0)]))
        return !0;
      if (e.shiftKey && (d = hu[e.keyCode]) != r && d != h && u(f[l + xf(d, e, !1)]))
        return !0;
    } else if (o && e.shiftKey && u(f[l + xf(r, e, !0)]))
      return !0;
    if (u(f._any))
      return !0;
  }
  return a;
}
class Xu {
  constructor(e, n, i, r, s) {
    this.className = e, this.left = n, this.top = i, this.width = r, this.height = s;
  }
  draw() {
    let e = document.createElement("div");
    return e.className = this.className, this.adjust(e), e;
  }
  update(e, n) {
    return n.className != this.className ? !1 : (this.adjust(e), !0);
  }
  adjust(e) {
    e.style.left = this.left + "px", e.style.top = this.top + "px", this.width != null && (e.style.width = this.width + "px"), e.style.height = this.height + "px";
  }
  eq(e) {
    return this.left == e.left && this.top == e.top && this.width == e.width && this.height == e.height && this.className == e.className;
  }
  static forRange(e, n, i) {
    if (i.empty) {
      let r = e.coordsAtPos(i.head, i.assoc || 1);
      if (!r)
        return [];
      let s = pE(e);
      return [new Xu(n, r.left - s.left, r.top - s.top, null, r.bottom - r.top)];
    } else
      return cJ(e, n, i);
  }
}
function pE(t) {
  let e = t.scrollDOM.getBoundingClientRect();
  return { left: (t.textDirection == Sn.LTR ? e.left : e.right - t.scrollDOM.clientWidth) - t.scrollDOM.scrollLeft, top: e.top - t.scrollDOM.scrollTop };
}
function qk(t, e, n) {
  let i = Pe.cursor(e);
  return {
    from: Math.max(n.from, t.moveToLineBoundary(i, !1, !0).from),
    to: Math.min(n.to, t.moveToLineBoundary(i, !0, !0).from),
    type: on.Text
  };
}
function Jk(t, e) {
  let n = t.lineBlockAt(e);
  if (Array.isArray(n.type)) {
    for (let i of n.type)
      if (i.to > e || i.to == e && (i.to == n.to || i.type == on.Text))
        return i;
  }
  return n;
}
function cJ(t, e, n) {
  if (n.to <= t.viewport.from || n.from >= t.viewport.to)
    return [];
  let i = Math.max(n.from, t.viewport.from), r = Math.min(n.to, t.viewport.to), s = t.textDirection == Sn.LTR, o = t.contentDOM, l = o.getBoundingClientRect(), a = pE(t), c = window.getComputedStyle(o.firstChild), u = l.left + parseInt(c.paddingLeft) + Math.min(0, parseInt(c.textIndent)), f = l.right - parseInt(c.paddingRight), h = Jk(t, i), d = Jk(t, r), p = h.type == on.Text ? h : null, g = d.type == on.Text ? d : null;
  if (t.lineWrapping && (p && (p = qk(t, i, p)), g && (g = qk(t, r, g))), p && g && p.from == g.from)
    return m(C(n.from, n.to, p));
  {
    let k = p ? C(n.from, null, p) : v(h, !1), S = g ? C(null, n.to, g) : v(d, !0), O = [];
    return (p || h).to < (g || d).from - 1 ? O.push(_(u, k.bottom, f, S.top)) : k.bottom < S.top && t.elementAtHeight((k.bottom + S.top) / 2).type == on.Text && (k.bottom = S.top = (k.bottom + S.top) / 2), m(k).concat(O).concat(m(S));
  }
  function _(k, S, O, w) {
    return new Xu(e, k - a.left, S - a.top - 0.01, O - k, w - S + 0.01);
  }
  function m({ top: k, bottom: S, horizontal: O }) {
    let w = [];
    for (let A = 0; A < O.length; A += 2)
      w.push(_(O[A], k, O[A + 1], S));
    return w;
  }
  function C(k, S, O) {
    let w = 1e9, A = -1e9, D = [];
    function R(J, I, z, L, K) {
      let F = t.coordsAtPos(J, J == O.to ? -2 : 2), N = t.coordsAtPos(z, z == O.from ? 2 : -2);
      w = Math.min(F.top, N.top, w), A = Math.max(F.bottom, N.bottom, A), K == Sn.LTR ? D.push(s && I ? u : F.left, s && L ? f : N.right) : D.push(!s && L ? u : N.left, !s && I ? f : F.right);
    }
    let M = k ?? O.from, H = S ?? O.to;
    for (let J of t.visibleRanges)
      if (J.to > M && J.from < H)
        for (let I = Math.max(J.from, M), z = Math.min(J.to, H); ; ) {
          let L = t.state.doc.lineAt(I);
          for (let K of t.bidiSpans(L)) {
            let F = K.from + L.from, N = K.to + L.from;
            if (F >= z)
              break;
            N > I && R(Math.max(F, I), k == null && F <= M, Math.min(N, z), S == null && N >= H, K.dir);
          }
          if (I = L.to + 1, I >= z)
            break;
        }
    return D.length == 0 && R(M, k == null, H, S == null, t.textDirection), { top: w, bottom: A, horizontal: D };
  }
  function v(k, S) {
    let O = l.top + (S ? k.top : k.bottom);
    return { top: O, bottom: O, horizontal: [] };
  }
}
function uJ(t, e) {
  return t.constructor == e.constructor && t.eq(e);
}
class fJ {
  constructor(e, n) {
    this.view = e, this.layer = n, this.drawn = [], this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) }, this.dom = e.scrollDOM.appendChild(document.createElement("div")), this.dom.classList.add("cm-layer"), n.above && this.dom.classList.add("cm-layer-above"), n.class && this.dom.classList.add(n.class), this.dom.setAttribute("aria-hidden", "true"), this.setOrder(e.state), e.requestMeasure(this.measureReq), n.mount && n.mount(this.dom, e);
  }
  update(e) {
    e.startState.facet(yh) != e.state.facet(yh) && this.setOrder(e.state), (this.layer.update(e, this.dom) || e.geometryChanged) && e.view.requestMeasure(this.measureReq);
  }
  setOrder(e) {
    let n = 0, i = e.facet(yh);
    for (; n < i.length && i[n] != this.layer; )
      n++;
    this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - n);
  }
  measure() {
    return this.layer.markers(this.view);
  }
  draw(e) {
    if (e.length != this.drawn.length || e.some((n, i) => !uJ(n, this.drawn[i]))) {
      let n = this.dom.firstChild, i = 0;
      for (let r of e)
        r.update && n && r.constructor && this.drawn[i].constructor && r.update(n, this.drawn[i]) ? (n = n.nextSibling, i++) : this.dom.insertBefore(r.draw(), n);
      for (; n; ) {
        let r = n.nextSibling;
        n.remove(), n = r;
      }
      this.drawn = e;
    }
  }
  destroy() {
    this.layer.destroy && this.layer.destroy(this.dom, this.view), this.dom.remove();
  }
}
const yh = /* @__PURE__ */ nt.define();
function gE(t) {
  return [
    Yn.define((e) => new fJ(e, t)),
    yh.of(t)
  ];
}
const mE = !it.ios, mu = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      cursorBlinkRate: 1200,
      drawRangeCursor: !0
    }, {
      cursorBlinkRate: (e, n) => Math.min(e, n),
      drawRangeCursor: (e, n) => e || n
    });
  }
});
function hJ(t = {}) {
  return [
    mu.of(t),
    dJ,
    pJ,
    gJ,
    H8.of(!0)
  ];
}
function bE(t) {
  return t.startState.facet(mu) != t.startState.facet(mu);
}
const dJ = /* @__PURE__ */ gE({
  above: !0,
  markers(t) {
    let { state: e } = t, n = e.facet(mu), i = [];
    for (let r of e.selection.ranges) {
      let s = r == e.selection.main;
      if (r.empty ? !s || mE : n.drawRangeCursor) {
        let o = s ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary", l = r.empty ? r : Pe.cursor(r.head, r.head > r.anchor ? -1 : 1);
        for (let a of Xu.forRange(t, o, l))
          i.push(a);
      }
    }
    return i;
  },
  update(t, e) {
    t.transactions.some((i) => i.scrollIntoView) && (e.style.animationName = e.style.animationName == "cm-blink" ? "cm-blink2" : "cm-blink");
    let n = bE(t);
    return n && Kk(t.state, e), t.docChanged || t.selectionSet || n;
  },
  mount(t, e) {
    Kk(e.state, t);
  },
  class: "cm-cursorLayer"
});
function Kk(t, e) {
  e.style.animationDuration = t.facet(mu).cursorBlinkRate + "ms";
}
const pJ = /* @__PURE__ */ gE({
  above: !1,
  markers(t) {
    return t.state.selection.ranges.map((e) => e.empty ? [] : Xu.forRange(t, "cm-selectionBackground", e)).reduce((e, n) => e.concat(n));
  },
  update(t, e) {
    return t.docChanged || t.selectionSet || t.viewportChanged || bE(t);
  },
  class: "cm-selectionLayer"
}), _E = {
  ".cm-line": {
    "& ::selection": { backgroundColor: "transparent !important" },
    "&::selection": { backgroundColor: "transparent !important" }
  }
};
mE && (_E[".cm-line"].caretColor = "transparent !important");
const gJ = /* @__PURE__ */ ac.highest(/* @__PURE__ */ tt.theme(_E)), yE = /* @__PURE__ */ St.define({
  map(t, e) {
    return t == null ? null : e.mapPos(t);
  }
}), Rc = /* @__PURE__ */ ri.define({
  create() {
    return null;
  },
  update(t, e) {
    return t != null && (t = e.changes.mapPos(t)), e.effects.reduce((n, i) => i.is(yE) ? i.value : n, t);
  }
}), mJ = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.cursor = null, this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };
  }
  update(t) {
    var e;
    let n = t.state.field(Rc);
    n == null ? this.cursor != null && ((e = this.cursor) === null || e === void 0 || e.remove(), this.cursor = null) : (this.cursor || (this.cursor = this.view.scrollDOM.appendChild(document.createElement("div")), this.cursor.className = "cm-dropCursor"), (t.startState.field(Rc) != n || t.docChanged || t.geometryChanged) && this.view.requestMeasure(this.measureReq));
  }
  readPos() {
    let t = this.view.state.field(Rc), e = t != null && this.view.coordsAtPos(t);
    if (!e)
      return null;
    let n = this.view.scrollDOM.getBoundingClientRect();
    return {
      left: e.left - n.left + this.view.scrollDOM.scrollLeft,
      top: e.top - n.top + this.view.scrollDOM.scrollTop,
      height: e.bottom - e.top
    };
  }
  drawCursor(t) {
    this.cursor && (t ? (this.cursor.style.left = t.left + "px", this.cursor.style.top = t.top + "px", this.cursor.style.height = t.height + "px") : this.cursor.style.left = "-100000px");
  }
  destroy() {
    this.cursor && this.cursor.remove();
  }
  setDropPos(t) {
    this.view.state.field(Rc) != t && this.view.dispatch({ effects: yE.of(t) });
  }
}, {
  eventHandlers: {
    dragover(t) {
      this.setDropPos(this.view.posAtCoords({ x: t.clientX, y: t.clientY }));
    },
    dragleave(t) {
      (t.target == this.view.contentDOM || !this.view.contentDOM.contains(t.relatedTarget)) && this.setDropPos(null);
    },
    dragend() {
      this.setDropPos(null);
    },
    drop() {
      this.setDropPos(null);
    }
  }
});
function bJ() {
  return [Rc, mJ];
}
function Gk(t, e, n, i, r) {
  e.lastIndex = 0;
  for (let s = t.iterRange(n, i), o = n, l; !s.next().done; o += s.value.length)
    if (!s.lineBreak)
      for (; l = e.exec(s.value); )
        r(o + l.index, l);
}
function _J(t, e) {
  let n = t.visibleRanges;
  if (n.length == 1 && n[0].from == t.viewport.from && n[0].to == t.viewport.to)
    return n;
  let i = [];
  for (let { from: r, to: s } of n)
    r = Math.max(t.state.doc.lineAt(r).from, r - e), s = Math.min(t.state.doc.lineAt(s).to, s + e), i.length && i[i.length - 1].to >= r ? i[i.length - 1].to = s : i.push({ from: r, to: s });
  return i;
}
class yJ {
  constructor(e) {
    const { regexp: n, decoration: i, decorate: r, boundary: s, maxLength: o = 1e3 } = e;
    if (!n.global)
      throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");
    if (this.regexp = n, r)
      this.addMatch = (l, a, c, u) => r(u, c, c + l[0].length, l, a);
    else if (typeof i == "function")
      this.addMatch = (l, a, c, u) => {
        let f = i(l, a, c);
        f && u(c, c + l[0].length, f);
      };
    else if (i)
      this.addMatch = (l, a, c, u) => u(c, c + l[0].length, i);
    else
      throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");
    this.boundary = s, this.maxLength = o;
  }
  createDeco(e) {
    let n = new zo(), i = n.add.bind(n);
    for (let { from: r, to: s } of _J(e, this.maxLength))
      Gk(e.state.doc, this.regexp, r, s, (o, l) => this.addMatch(l, e, o, i));
    return n.finish();
  }
  updateDeco(e, n) {
    let i = 1e9, r = -1;
    return e.docChanged && e.changes.iterChanges((s, o, l, a) => {
      a > e.view.viewport.from && l < e.view.viewport.to && (i = Math.min(l, i), r = Math.max(a, r));
    }), e.viewportChanged || r - i > 1e3 ? this.createDeco(e.view) : r > -1 ? this.updateRange(e.view, n.map(e.changes), i, r) : n;
  }
  updateRange(e, n, i, r) {
    for (let s of e.visibleRanges) {
      let o = Math.max(s.from, i), l = Math.min(s.to, r);
      if (l > o) {
        let a = e.state.doc.lineAt(o), c = a.to < l ? e.state.doc.lineAt(l) : a, u = Math.max(s.from, a.from), f = Math.min(s.to, c.to);
        if (this.boundary) {
          for (; o > a.from; o--)
            if (this.boundary.test(a.text[o - 1 - a.from])) {
              u = o;
              break;
            }
          for (; l < c.to; l++)
            if (this.boundary.test(c.text[l - c.from])) {
              f = l;
              break;
            }
        }
        let h = [], d, p = (g, _, m) => h.push(m.range(g, _));
        if (a == c)
          for (this.regexp.lastIndex = u - a.from; (d = this.regexp.exec(a.text)) && d.index < f - a.from; )
            this.addMatch(d, e, d.index + a.from, p);
        else
          Gk(e.state.doc, this.regexp, u, f, (g, _) => this.addMatch(_, e, g, p));
        n = n.update({ filterFrom: u, filterTo: f, filter: (g, _) => g < u || _ > f, add: h });
      }
    }
    return n;
  }
}
const j1 = /x/.unicode != null ? "gu" : "g", wJ = /* @__PURE__ */ new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`, j1), vJ = {
  0: "null",
  7: "bell",
  8: "backspace",
  10: "newline",
  11: "vertical tab",
  13: "carriage return",
  27: "escape",
  8203: "zero width space",
  8204: "zero width non-joiner",
  8205: "zero width joiner",
  8206: "left-to-right mark",
  8207: "right-to-left mark",
  8232: "line separator",
  8237: "left-to-right override",
  8238: "right-to-left override",
  8294: "left-to-right isolate",
  8295: "right-to-left isolate",
  8297: "pop directional isolate",
  8233: "paragraph separator",
  65279: "zero width no-break space",
  65532: "object replacement"
};
let Kg = null;
function kJ() {
  var t;
  if (Kg == null && typeof document < "u" && document.body) {
    let e = document.body.style;
    Kg = ((t = e.tabSize) !== null && t !== void 0 ? t : e.MozTabSize) != null;
  }
  return Kg || !1;
}
const wh = /* @__PURE__ */ nt.define({
  combine(t) {
    let e = Wr(t, {
      render: null,
      specialChars: wJ,
      addSpecialChars: null
    });
    return (e.replaceTabs = !kJ()) && (e.specialChars = new RegExp("	|" + e.specialChars.source, j1)), e.addSpecialChars && (e.specialChars = new RegExp(e.specialChars.source + "|" + e.addSpecialChars.source, j1)), e;
  }
});
function CJ(t = {}) {
  return [wh.of(t), SJ()];
}
let Yk = null;
function SJ() {
  return Yk || (Yk = Yn.fromClass(class {
    constructor(t) {
      this.view = t, this.decorations = gt.none, this.decorationCache = /* @__PURE__ */ Object.create(null), this.decorator = this.makeDecorator(t.state.facet(wh)), this.decorations = this.decorator.createDeco(t);
    }
    makeDecorator(t) {
      return new yJ({
        regexp: t.specialChars,
        decoration: (e, n, i) => {
          let { doc: r } = n.state, s = ki(e[0], 0);
          if (s == 9) {
            let o = r.lineAt(i), l = n.state.tabSize, a = Gu(o.text, l, i - o.from);
            return gt.replace({ widget: new OJ((l - a % l) * this.view.defaultCharacterWidth) });
          }
          return this.decorationCache[s] || (this.decorationCache[s] = gt.replace({ widget: new MJ(t, s) }));
        },
        boundary: t.replaceTabs ? void 0 : /[^]/
      });
    }
    update(t) {
      let e = t.state.facet(wh);
      t.startState.facet(wh) != e ? (this.decorator = this.makeDecorator(e), this.decorations = this.decorator.createDeco(t.view)) : this.decorations = this.decorator.updateDeco(t, this.decorations);
    }
  }, {
    decorations: (t) => t.decorations
  }));
}
const EJ = "•";
function AJ(t) {
  return t >= 32 ? EJ : t == 10 ? "␤" : String.fromCharCode(9216 + t);
}
class MJ extends $o {
  constructor(e, n) {
    super(), this.options = e, this.code = n;
  }
  eq(e) {
    return e.code == this.code;
  }
  toDOM(e) {
    let n = AJ(this.code), i = e.state.phrase("Control character") + " " + (vJ[this.code] || "0x" + this.code.toString(16)), r = this.options.render && this.options.render(this.code, i, n);
    if (r)
      return r;
    let s = document.createElement("span");
    return s.textContent = n, s.title = i, s.setAttribute("aria-label", i), s.className = "cm-specialChar", s;
  }
  ignoreEvent() {
    return !1;
  }
}
class OJ extends $o {
  constructor(e) {
    super(), this.width = e;
  }
  eq(e) {
    return e.width == this.width;
  }
  toDOM() {
    let e = document.createElement("span");
    return e.textContent = "	", e.className = "cm-tab", e.style.width = this.width + "px", e;
  }
  ignoreEvent() {
    return !1;
  }
}
function TJ() {
  return PJ;
}
const RJ = /* @__PURE__ */ gt.line({ class: "cm-activeLine" }), PJ = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.docChanged || t.selectionSet) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = -1, n = [];
    for (let i of t.state.selection.ranges) {
      let r = t.lineBlockAt(i.head);
      r.from > e && (n.push(RJ.range(r.from)), e = r.from);
    }
    return gt.set(n);
  }
}, {
  decorations: (t) => t.decorations
}), B1 = 2e3;
function IJ(t, e, n) {
  let i = Math.min(e.line, n.line), r = Math.max(e.line, n.line), s = [];
  if (e.off > B1 || n.off > B1 || e.col < 0 || n.col < 0) {
    let o = Math.min(e.off, n.off), l = Math.max(e.off, n.off);
    for (let a = i; a <= r; a++) {
      let c = t.doc.line(a);
      c.length <= l && s.push(Pe.range(c.from + o, c.to + l));
    }
  } else {
    let o = Math.min(e.col, n.col), l = Math.max(e.col, n.col);
    for (let a = i; a <= r; a++) {
      let c = t.doc.line(a), u = m1(c.text, o, t.tabSize, !0);
      if (u < 0)
        s.push(Pe.cursor(c.to));
      else {
        let f = m1(c.text, l, t.tabSize);
        s.push(Pe.range(c.from + u, c.from + f));
      }
    }
  }
  return s;
}
function DJ(t, e) {
  let n = t.coordsAtPos(t.viewport.from);
  return n ? Math.round(Math.abs((n.left - e) / t.defaultCharacterWidth)) : -1;
}
function Xk(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1), i = t.state.doc.lineAt(n), r = n - i.from, s = r > B1 ? -1 : r == i.length ? DJ(t, e.clientX) : Gu(i.text, t.state.tabSize, n - i.from);
  return { line: i.number, col: s, off: r };
}
function NJ(t, e) {
  let n = Xk(t, e), i = t.state.selection;
  return n ? {
    update(r) {
      if (r.docChanged) {
        let s = r.changes.mapPos(r.startState.doc.line(n.line).from), o = r.state.doc.lineAt(s);
        n = { line: o.number, col: n.col, off: Math.min(n.off, o.length) }, i = i.map(r.changes);
      }
    },
    get(r, s, o) {
      let l = Xk(t, r);
      if (!l)
        return i;
      let a = IJ(t.state, n, l);
      return a.length ? o ? Pe.create(a.concat(i.ranges)) : Pe.create(a) : i;
    }
  } : null;
}
function LJ(t) {
  let e = (t == null ? void 0 : t.eventFilter) || ((n) => n.altKey && n.button == 0);
  return tt.mouseSelectionStyle.of((n, i) => e(i) ? NJ(n, i) : null);
}
const jJ = {
  Alt: [18, (t) => t.altKey],
  Control: [17, (t) => t.ctrlKey],
  Shift: [16, (t) => t.shiftKey],
  Meta: [91, (t) => t.metaKey]
}, BJ = { style: "cursor: crosshair" };
function xJ(t = {}) {
  let [e, n] = jJ[t.key || "Alt"], i = Yn.fromClass(class {
    constructor(r) {
      this.view = r, this.isDown = !1;
    }
    set(r) {
      this.isDown != r && (this.isDown = r, this.view.update([]));
    }
  }, {
    eventHandlers: {
      keydown(r) {
        this.set(r.keyCode == e || n(r));
      },
      keyup(r) {
        (r.keyCode == e || !n(r)) && this.set(!1);
      },
      mousemove(r) {
        this.set(n(r));
      }
    }
  });
  return [
    i,
    tt.contentAttributes.of((r) => {
      var s;
      return !((s = r.plugin(i)) === null || s === void 0) && s.isDown ? BJ : null;
    })
  ];
}
const Ff = "-10000px";
class wE {
  constructor(e, n, i) {
    this.facet = n, this.createTooltipView = i, this.input = e.state.facet(n), this.tooltips = this.input.filter((r) => r), this.tooltipViews = this.tooltips.map(i);
  }
  update(e) {
    var n;
    let i = e.state.facet(this.facet), r = i.filter((o) => o);
    if (i === this.input) {
      for (let o of this.tooltipViews)
        o.update && o.update(e);
      return !1;
    }
    let s = [];
    for (let o = 0; o < r.length; o++) {
      let l = r[o], a = -1;
      if (l) {
        for (let c = 0; c < this.tooltips.length; c++) {
          let u = this.tooltips[c];
          u && u.create == l.create && (a = c);
        }
        if (a < 0)
          s[o] = this.createTooltipView(l);
        else {
          let c = s[o] = this.tooltipViews[a];
          c.update && c.update(e);
        }
      }
    }
    for (let o of this.tooltipViews)
      s.indexOf(o) < 0 && (o.dom.remove(), (n = o.destroy) === null || n === void 0 || n.call(o));
    return this.input = i, this.tooltips = r, this.tooltipViews = s, !0;
  }
}
function FJ(t) {
  let { win: e } = t;
  return { top: 0, left: 0, bottom: e.innerHeight, right: e.innerWidth };
}
const Gg = /* @__PURE__ */ nt.define({
  combine: (t) => {
    var e, n, i;
    return {
      position: it.ios ? "absolute" : ((e = t.find((r) => r.position)) === null || e === void 0 ? void 0 : e.position) || "fixed",
      parent: ((n = t.find((r) => r.parent)) === null || n === void 0 ? void 0 : n.parent) || null,
      tooltipSpace: ((i = t.find((r) => r.tooltipSpace)) === null || i === void 0 ? void 0 : i.tooltipSpace) || FJ
    };
  }
}), vE = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.inView = !0, this.lastTransaction = 0, this.measureTimeout = -1;
    let e = t.state.facet(Gg);
    this.position = e.position, this.parent = e.parent, this.classes = t.themeClasses, this.createContainer(), this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this }, this.manager = new wE(t, Bp, (n) => this.createTooltip(n)), this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((n) => {
      Date.now() > this.lastTransaction - 50 && n.length > 0 && n[n.length - 1].intersectionRatio < 1 && this.measureSoon();
    }, { threshold: [1] }) : null, this.observeIntersection(), t.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this)), this.maybeMeasure();
  }
  createContainer() {
    this.parent ? (this.container = document.createElement("div"), this.container.style.position = "relative", this.container.className = this.view.themeClasses, this.parent.appendChild(this.container)) : this.container = this.view.dom;
  }
  observeIntersection() {
    if (this.intersectionObserver) {
      this.intersectionObserver.disconnect();
      for (let t of this.manager.tooltipViews)
        this.intersectionObserver.observe(t.dom);
    }
  }
  measureSoon() {
    this.measureTimeout < 0 && (this.measureTimeout = setTimeout(() => {
      this.measureTimeout = -1, this.maybeMeasure();
    }, 50));
  }
  update(t) {
    t.transactions.length && (this.lastTransaction = Date.now());
    let e = this.manager.update(t);
    e && this.observeIntersection();
    let n = e || t.geometryChanged, i = t.state.facet(Gg);
    if (i.position != this.position) {
      this.position = i.position;
      for (let r of this.manager.tooltipViews)
        r.dom.style.position = this.position;
      n = !0;
    }
    if (i.parent != this.parent) {
      this.parent && this.container.remove(), this.parent = i.parent, this.createContainer();
      for (let r of this.manager.tooltipViews)
        this.container.appendChild(r.dom);
      n = !0;
    } else
      this.parent && this.view.themeClasses != this.classes && (this.classes = this.container.className = this.view.themeClasses);
    n && this.maybeMeasure();
  }
  createTooltip(t) {
    let e = t.create(this.view);
    if (e.dom.classList.add("cm-tooltip"), t.arrow && !e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
      let n = document.createElement("div");
      n.className = "cm-tooltip-arrow", e.dom.appendChild(n);
    }
    return e.dom.style.position = this.position, e.dom.style.top = Ff, this.container.appendChild(e.dom), e.mount && e.mount(this.view), e;
  }
  destroy() {
    var t, e;
    this.view.win.removeEventListener("resize", this.measureSoon);
    for (let n of this.manager.tooltipViews)
      n.dom.remove(), (t = n.destroy) === null || t === void 0 || t.call(n);
    (e = this.intersectionObserver) === null || e === void 0 || e.disconnect(), clearTimeout(this.measureTimeout);
  }
  readMeasure() {
    let t = this.view.dom.getBoundingClientRect();
    return {
      editor: t,
      parent: this.parent ? this.container.getBoundingClientRect() : t,
      pos: this.manager.tooltips.map((e, n) => {
        let i = this.manager.tooltipViews[n];
        return i.getCoords ? i.getCoords(e.pos) : this.view.coordsAtPos(e.pos);
      }),
      size: this.manager.tooltipViews.map(({ dom: e }) => e.getBoundingClientRect()),
      space: this.view.state.facet(Gg).tooltipSpace(this.view)
    };
  }
  writeMeasure(t) {
    let { editor: e, space: n } = t, i = [];
    for (let r = 0; r < this.manager.tooltips.length; r++) {
      let s = this.manager.tooltips[r], o = this.manager.tooltipViews[r], { dom: l } = o, a = t.pos[r], c = t.size[r];
      if (!a || a.bottom <= Math.max(e.top, n.top) || a.top >= Math.min(e.bottom, n.bottom) || a.right < Math.max(e.left, n.left) - 0.1 || a.left > Math.min(e.right, n.right) + 0.1) {
        l.style.top = Ff;
        continue;
      }
      let u = s.arrow ? o.dom.querySelector(".cm-tooltip-arrow") : null, f = u ? 7 : 0, h = c.right - c.left, d = c.bottom - c.top, p = o.offset || VJ, g = this.view.textDirection == Sn.LTR, _ = c.width > n.right - n.left ? g ? n.left : n.right - c.width : g ? Math.min(a.left - (u ? 14 : 0) + p.x, n.right - h) : Math.max(n.left, a.left - h + (u ? 14 : 0) - p.x), m = !!s.above;
      !s.strictSide && (m ? a.top - (c.bottom - c.top) - p.y < n.top : a.bottom + (c.bottom - c.top) + p.y > n.bottom) && m == n.bottom - a.bottom > a.top - n.top && (m = !m);
      let C = (m ? a.top - n.top : n.bottom - a.bottom) - f;
      if (C < d && o.resize !== !1) {
        if (C < this.view.defaultLineHeight) {
          l.style.top = Ff;
          continue;
        }
        l.style.height = (d = C) + "px";
      } else
        l.style.height && (l.style.height = "");
      let v = m ? a.top - d - f - p.y : a.bottom + f + p.y, k = _ + h;
      if (o.overlap !== !0)
        for (let S of i)
          S.left < k && S.right > _ && S.top < v + d && S.bottom > v && (v = m ? S.top - d - 2 - f : S.bottom + f + 2);
      this.position == "absolute" ? (l.style.top = v - t.parent.top + "px", l.style.left = _ - t.parent.left + "px") : (l.style.top = v + "px", l.style.left = _ + "px"), u && (u.style.left = `${a.left + (g ? p.x : -p.x) - (_ + 14 - 7)}px`), o.overlap !== !0 && i.push({ left: _, top: v, right: k, bottom: v + d }), l.classList.toggle("cm-tooltip-above", m), l.classList.toggle("cm-tooltip-below", !m), o.positioned && o.positioned(t.space);
    }
  }
  maybeMeasure() {
    if (this.manager.tooltips.length && (this.view.inView && this.view.requestMeasure(this.measureReq), this.inView != this.view.inView && (this.inView = this.view.inView, !this.inView)))
      for (let t of this.manager.tooltipViews)
        t.dom.style.top = Ff;
  }
}, {
  eventHandlers: {
    scroll() {
      this.maybeMeasure();
    }
  }
}), zJ = /* @__PURE__ */ tt.baseTheme({
  ".cm-tooltip": {
    zIndex: 100,
    boxSizing: "border-box"
  },
  "&light .cm-tooltip": {
    border: "1px solid #bbb",
    backgroundColor: "#f5f5f5"
  },
  "&light .cm-tooltip-section:not(:first-child)": {
    borderTop: "1px solid #bbb"
  },
  "&dark .cm-tooltip": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tooltip-arrow": {
    height: `${7}px`,
    width: `${7 * 2}px`,
    position: "absolute",
    zIndex: -1,
    overflow: "hidden",
    "&:before, &:after": {
      content: "''",
      position: "absolute",
      width: 0,
      height: 0,
      borderLeft: `${7}px solid transparent`,
      borderRight: `${7}px solid transparent`
    },
    ".cm-tooltip-above &": {
      bottom: `-${7}px`,
      "&:before": {
        borderTop: `${7}px solid #bbb`
      },
      "&:after": {
        borderTop: `${7}px solid #f5f5f5`,
        bottom: "1px"
      }
    },
    ".cm-tooltip-below &": {
      top: `-${7}px`,
      "&:before": {
        borderBottom: `${7}px solid #bbb`
      },
      "&:after": {
        borderBottom: `${7}px solid #f5f5f5`,
        top: "1px"
      }
    }
  },
  "&dark .cm-tooltip .cm-tooltip-arrow": {
    "&:before": {
      borderTopColor: "#333338",
      borderBottomColor: "#333338"
    },
    "&:after": {
      borderTopColor: "transparent",
      borderBottomColor: "transparent"
    }
  }
}), VJ = { x: 0, y: 0 }, Bp = /* @__PURE__ */ nt.define({
  enables: [vE, zJ]
}), hd = /* @__PURE__ */ nt.define();
class Ab {
  constructor(e) {
    this.view = e, this.mounted = !1, this.dom = document.createElement("div"), this.dom.classList.add("cm-tooltip-hover"), this.manager = new wE(e, hd, (n) => this.createHostedView(n));
  }
  static create(e) {
    return new Ab(e);
  }
  createHostedView(e) {
    let n = e.create(this.view);
    return n.dom.classList.add("cm-tooltip-section"), this.dom.appendChild(n.dom), this.mounted && n.mount && n.mount(this.view), n;
  }
  mount(e) {
    for (let n of this.manager.tooltipViews)
      n.mount && n.mount(e);
    this.mounted = !0;
  }
  positioned(e) {
    for (let n of this.manager.tooltipViews)
      n.positioned && n.positioned(e);
  }
  update(e) {
    this.manager.update(e);
  }
}
const UJ = /* @__PURE__ */ Bp.compute([hd], (t) => {
  let e = t.facet(hd).filter((n) => n);
  return e.length === 0 ? null : {
    pos: Math.min(...e.map((n) => n.pos)),
    end: Math.max(...e.filter((n) => n.end != null).map((n) => n.end)),
    create: Ab.create,
    above: e[0].above,
    arrow: e.some((n) => n.arrow)
  };
});
class HJ {
  constructor(e, n, i, r, s) {
    this.view = e, this.source = n, this.field = i, this.setHover = r, this.hoverTime = s, this.hoverTimeout = -1, this.restartTimeout = -1, this.pending = null, this.lastMove = { x: 0, y: 0, target: e.dom, time: 0 }, this.checkHover = this.checkHover.bind(this), e.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this)), e.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));
  }
  update() {
    this.pending && (this.pending = null, clearTimeout(this.restartTimeout), this.restartTimeout = setTimeout(() => this.startHover(), 20));
  }
  get active() {
    return this.view.state.field(this.field);
  }
  checkHover() {
    if (this.hoverTimeout = -1, this.active)
      return;
    let e = Date.now() - this.lastMove.time;
    e < this.hoverTime ? this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - e) : this.startHover();
  }
  startHover() {
    clearTimeout(this.restartTimeout);
    let { lastMove: e } = this, n = this.view.contentDOM.contains(e.target) ? this.view.posAtCoords(e) : null;
    if (n == null)
      return;
    let i = this.view.coordsAtPos(n);
    if (i == null || e.y < i.top || e.y > i.bottom || e.x < i.left - this.view.defaultCharacterWidth || e.x > i.right + this.view.defaultCharacterWidth)
      return;
    let r = this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((l) => l.from <= n && l.to >= n), s = r && r.dir == Sn.RTL ? -1 : 1, o = this.source(this.view, n, e.x < i.left ? -s : s);
    if (o != null && o.then) {
      let l = this.pending = { pos: n };
      o.then((a) => {
        this.pending == l && (this.pending = null, a && this.view.dispatch({ effects: this.setHover.of(a) }));
      }, (a) => ir(this.view.state, a, "hover tooltip"));
    } else
      o && this.view.dispatch({ effects: this.setHover.of(o) });
  }
  mousemove(e) {
    var n;
    this.lastMove = { x: e.clientX, y: e.clientY, target: e.target, time: Date.now() }, this.hoverTimeout < 0 && (this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime));
    let i = this.active;
    if (i && !Qk(this.lastMove.target) || this.pending) {
      let { pos: r } = i || this.pending, s = (n = i == null ? void 0 : i.end) !== null && n !== void 0 ? n : r;
      (r == s ? this.view.posAtCoords(this.lastMove) != r : !WJ(this.view, r, s, e.clientX, e.clientY, 6)) && (this.view.dispatch({ effects: this.setHover.of(null) }), this.pending = null);
    }
  }
  mouseleave(e) {
    clearTimeout(this.hoverTimeout), this.hoverTimeout = -1, this.active && !Qk(e.relatedTarget) && this.view.dispatch({ effects: this.setHover.of(null) });
  }
  destroy() {
    clearTimeout(this.hoverTimeout), this.view.dom.removeEventListener("mouseleave", this.mouseleave), this.view.dom.removeEventListener("mousemove", this.mousemove);
  }
}
function Qk(t) {
  for (let e = t; e; e = e.parentNode)
    if (e.nodeType == 1 && e.classList.contains("cm-tooltip"))
      return !0;
  return !1;
}
function WJ(t, e, n, i, r, s) {
  let o = document.createRange(), l = t.domAtPos(e), a = t.domAtPos(n);
  o.setEnd(a.node, a.offset), o.setStart(l.node, l.offset);
  let c = o.getClientRects();
  o.detach();
  for (let u = 0; u < c.length; u++) {
    let f = c[u];
    if (Math.max(f.top - r, r - f.bottom, f.left - i, i - f.right) <= s)
      return !0;
  }
  return !1;
}
function qJ(t, e = {}) {
  let n = St.define(), i = ri.define({
    create() {
      return null;
    },
    update(r, s) {
      if (r && (e.hideOnChange && (s.docChanged || s.selection) || e.hideOn && e.hideOn(s, r)))
        return null;
      if (r && s.docChanged) {
        let o = s.changes.mapPos(r.pos, -1, Ni.TrackDel);
        if (o == null)
          return null;
        let l = Object.assign(/* @__PURE__ */ Object.create(null), r);
        l.pos = o, r.end != null && (l.end = s.changes.mapPos(r.end)), r = l;
      }
      for (let o of s.effects)
        o.is(n) && (r = o.value), o.is(KJ) && (r = null);
      return r;
    },
    provide: (r) => hd.from(r)
  });
  return [
    i,
    Yn.define((r) => new HJ(r, t, i, n, e.hoverTime || 300)),
    UJ
  ];
}
function JJ(t, e) {
  let n = t.plugin(vE);
  if (!n)
    return null;
  let i = n.manager.tooltips.indexOf(e);
  return i < 0 ? null : n.manager.tooltipViews[i];
}
const KJ = /* @__PURE__ */ St.define(), Zk = /* @__PURE__ */ nt.define({
  combine(t) {
    let e, n;
    for (let i of t)
      e = e || i.topContainer, n = n || i.bottomContainer;
    return { topContainer: e, bottomContainer: n };
  }
});
function bu(t, e) {
  let n = t.plugin(kE), i = n ? n.specs.indexOf(e) : -1;
  return i > -1 ? n.panels[i] : null;
}
const kE = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.input = t.state.facet(_u), this.specs = this.input.filter((n) => n), this.panels = this.specs.map((n) => n(t));
    let e = t.state.facet(Zk);
    this.top = new zf(t, !0, e.topContainer), this.bottom = new zf(t, !1, e.bottomContainer), this.top.sync(this.panels.filter((n) => n.top)), this.bottom.sync(this.panels.filter((n) => !n.top));
    for (let n of this.panels)
      n.dom.classList.add("cm-panel"), n.mount && n.mount();
  }
  update(t) {
    let e = t.state.facet(Zk);
    this.top.container != e.topContainer && (this.top.sync([]), this.top = new zf(t.view, !0, e.topContainer)), this.bottom.container != e.bottomContainer && (this.bottom.sync([]), this.bottom = new zf(t.view, !1, e.bottomContainer)), this.top.syncClasses(), this.bottom.syncClasses();
    let n = t.state.facet(_u);
    if (n != this.input) {
      let i = n.filter((a) => a), r = [], s = [], o = [], l = [];
      for (let a of i) {
        let c = this.specs.indexOf(a), u;
        c < 0 ? (u = a(t.view), l.push(u)) : (u = this.panels[c], u.update && u.update(t)), r.push(u), (u.top ? s : o).push(u);
      }
      this.specs = i, this.panels = r, this.top.sync(s), this.bottom.sync(o);
      for (let a of l)
        a.dom.classList.add("cm-panel"), a.mount && a.mount();
    } else
      for (let i of this.panels)
        i.update && i.update(t);
  }
  destroy() {
    this.top.sync([]), this.bottom.sync([]);
  }
}, {
  provide: (t) => tt.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return n && { top: n.top.scrollMargin(), bottom: n.bottom.scrollMargin() };
  })
});
class zf {
  constructor(e, n, i) {
    this.view = e, this.top = n, this.container = i, this.dom = void 0, this.classes = "", this.panels = [], this.syncClasses();
  }
  sync(e) {
    for (let n of this.panels)
      n.destroy && e.indexOf(n) < 0 && n.destroy();
    this.panels = e, this.syncDOM();
  }
  syncDOM() {
    if (this.panels.length == 0) {
      this.dom && (this.dom.remove(), this.dom = void 0);
      return;
    }
    if (!this.dom) {
      this.dom = document.createElement("div"), this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom", this.dom.style[this.top ? "top" : "bottom"] = "0";
      let n = this.container || this.view.dom;
      n.insertBefore(this.dom, this.top ? n.firstChild : null);
    }
    let e = this.dom.firstChild;
    for (let n of this.panels)
      if (n.dom.parentNode == this.dom) {
        for (; e != n.dom; )
          e = $k(e);
        e = e.nextSibling;
      } else
        this.dom.insertBefore(n.dom, e);
    for (; e; )
      e = $k(e);
  }
  scrollMargin() {
    return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);
  }
  syncClasses() {
    if (!(!this.container || this.classes == this.view.themeClasses)) {
      for (let e of this.classes.split(" "))
        e && this.container.classList.remove(e);
      for (let e of (this.classes = this.view.themeClasses).split(" "))
        e && this.container.classList.add(e);
    }
  }
}
function $k(t) {
  let e = t.nextSibling;
  return t.remove(), e;
}
const _u = /* @__PURE__ */ nt.define({
  enables: kE
});
class Ms extends Pl {
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  eq(e) {
    return !1;
  }
  destroy(e) {
  }
}
Ms.prototype.elementClass = "";
Ms.prototype.toDOM = void 0;
Ms.prototype.mapMode = Ni.TrackBefore;
Ms.prototype.startSide = Ms.prototype.endSide = -1;
Ms.prototype.point = !0;
const vh = /* @__PURE__ */ nt.define(), GJ = {
  class: "",
  renderEmptyElements: !1,
  elementStyle: "",
  markers: () => Wt.empty,
  lineMarker: () => null,
  lineMarkerChange: null,
  initialSpacer: null,
  updateSpacer: null,
  domEventHandlers: {}
}, Uc = /* @__PURE__ */ nt.define();
function CE(t) {
  return [SE(), Uc.of(Object.assign(Object.assign({}, GJ), t))];
}
const x1 = /* @__PURE__ */ nt.define({
  combine: (t) => t.some((e) => e)
});
function SE(t) {
  let e = [
    YJ
  ];
  return t && t.fixed === !1 && e.push(x1.of(!0)), e;
}
const YJ = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.prevViewport = t.viewport, this.dom = document.createElement("div"), this.dom.className = "cm-gutters", this.dom.setAttribute("aria-hidden", "true"), this.dom.style.minHeight = this.view.contentHeight + "px", this.gutters = t.state.facet(Uc).map((e) => new tC(t, e));
    for (let e of this.gutters)
      this.dom.appendChild(e.dom);
    this.fixed = !t.state.facet(x1), this.fixed && (this.dom.style.position = "sticky"), this.syncGutters(!1), t.scrollDOM.insertBefore(this.dom, t.contentDOM);
  }
  update(t) {
    if (this.updateGutters(t)) {
      let e = this.prevViewport, n = t.view.viewport, i = Math.min(e.to, n.to) - Math.max(e.from, n.from);
      this.syncGutters(i < (n.to - n.from) * 0.8);
    }
    t.geometryChanged && (this.dom.style.minHeight = this.view.contentHeight + "px"), this.view.state.facet(x1) != !this.fixed && (this.fixed = !this.fixed, this.dom.style.position = this.fixed ? "sticky" : ""), this.prevViewport = t.view.viewport;
  }
  syncGutters(t) {
    let e = this.dom.nextSibling;
    t && this.dom.remove();
    let n = Wt.iter(this.view.state.facet(vh), this.view.viewport.from), i = [], r = this.gutters.map((s) => new XJ(s, this.view.viewport, -this.view.documentPadding.top));
    for (let s of this.view.viewportLineBlocks) {
      let o;
      if (Array.isArray(s.type)) {
        for (let l of s.type)
          if (l.type == on.Text) {
            o = l;
            break;
          }
      } else
        o = s.type == on.Text ? s : void 0;
      if (o) {
        i.length && (i = []), EE(n, i, s.from);
        for (let l of r)
          l.line(this.view, o, i);
      }
    }
    for (let s of r)
      s.finish();
    t && this.view.scrollDOM.insertBefore(this.dom, e);
  }
  updateGutters(t) {
    let e = t.startState.facet(Uc), n = t.state.facet(Uc), i = t.docChanged || t.heightChanged || t.viewportChanged || !Wt.eq(t.startState.facet(vh), t.state.facet(vh), t.view.viewport.from, t.view.viewport.to);
    if (e == n)
      for (let r of this.gutters)
        r.update(t) && (i = !0);
    else {
      i = !0;
      let r = [];
      for (let s of n) {
        let o = e.indexOf(s);
        o < 0 ? r.push(new tC(this.view, s)) : (this.gutters[o].update(t), r.push(this.gutters[o]));
      }
      for (let s of this.gutters)
        s.dom.remove(), r.indexOf(s) < 0 && s.destroy();
      for (let s of r)
        this.dom.appendChild(s.dom);
      this.gutters = r;
    }
    return i;
  }
  destroy() {
    for (let t of this.gutters)
      t.destroy();
    this.dom.remove();
  }
}, {
  provide: (t) => tt.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return !n || n.gutters.length == 0 || !n.fixed ? null : e.textDirection == Sn.LTR ? { left: n.dom.offsetWidth } : { right: n.dom.offsetWidth };
  })
});
function eC(t) {
  return Array.isArray(t) ? t : [t];
}
function EE(t, e, n) {
  for (; t.value && t.from <= n; )
    t.from == n && e.push(t.value), t.next();
}
class XJ {
  constructor(e, n, i) {
    this.gutter = e, this.height = i, this.localMarkers = [], this.i = 0, this.cursor = Wt.iter(e.markers, n.from);
  }
  line(e, n, i) {
    this.localMarkers.length && (this.localMarkers = []), EE(this.cursor, this.localMarkers, n.from);
    let r = i.length ? this.localMarkers.concat(i) : this.localMarkers, s = this.gutter.config.lineMarker(e, n, r);
    s && r.unshift(s);
    let o = this.gutter;
    if (r.length == 0 && !o.config.renderEmptyElements)
      return;
    let l = n.top - this.height;
    if (this.i == o.elements.length) {
      let a = new AE(e, n.height, l, r);
      o.elements.push(a), o.dom.appendChild(a.dom);
    } else
      o.elements[this.i].update(e, n.height, l, r);
    this.height = n.bottom, this.i++;
  }
  finish() {
    let e = this.gutter;
    for (; e.elements.length > this.i; ) {
      let n = e.elements.pop();
      e.dom.removeChild(n.dom), n.destroy();
    }
  }
}
class tC {
  constructor(e, n) {
    this.view = e, this.config = n, this.elements = [], this.spacer = null, this.dom = document.createElement("div"), this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
    for (let i in n.domEventHandlers)
      this.dom.addEventListener(i, (r) => {
        let s = e.lineBlockAtHeight(r.clientY - e.documentTop);
        n.domEventHandlers[i](e, s, r) && r.preventDefault();
      });
    this.markers = eC(n.markers(e)), n.initialSpacer && (this.spacer = new AE(e, 0, 0, [n.initialSpacer(e)]), this.dom.appendChild(this.spacer.dom), this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none");
  }
  update(e) {
    let n = this.markers;
    if (this.markers = eC(this.config.markers(e.view)), this.spacer && this.config.updateSpacer) {
      let r = this.config.updateSpacer(this.spacer.markers[0], e);
      r != this.spacer.markers[0] && this.spacer.update(e.view, 0, 0, [r]);
    }
    let i = e.view.viewport;
    return !Wt.eq(this.markers, n, i.from, i.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(e) : !1);
  }
  destroy() {
    for (let e of this.elements)
      e.destroy();
  }
}
class AE {
  constructor(e, n, i, r) {
    this.height = -1, this.above = 0, this.markers = [], this.dom = document.createElement("div"), this.dom.className = "cm-gutterElement", this.update(e, n, i, r);
  }
  update(e, n, i, r) {
    this.height != n && (this.dom.style.height = (this.height = n) + "px"), this.above != i && (this.dom.style.marginTop = (this.above = i) ? i + "px" : ""), QJ(this.markers, r) || this.setMarkers(e, r);
  }
  setMarkers(e, n) {
    let i = "cm-gutterElement", r = this.dom.firstChild;
    for (let s = 0, o = 0; ; ) {
      let l = o, a = s < n.length ? n[s++] : null, c = !1;
      if (a) {
        let u = a.elementClass;
        u && (i += " " + u);
        for (let f = o; f < this.markers.length; f++)
          if (this.markers[f].compare(a)) {
            l = f, c = !0;
            break;
          }
      } else
        l = this.markers.length;
      for (; o < l; ) {
        let u = this.markers[o++];
        if (u.toDOM) {
          u.destroy(r);
          let f = r.nextSibling;
          r.remove(), r = f;
        }
      }
      if (!a)
        break;
      a.toDOM && (c ? r = r.nextSibling : this.dom.insertBefore(a.toDOM(e), r)), c && o++;
    }
    this.dom.className = i, this.markers = n;
  }
  destroy() {
    this.setMarkers(null, []);
  }
}
function QJ(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (!t[n].compare(e[n]))
      return !1;
  return !0;
}
const ZJ = /* @__PURE__ */ nt.define(), ua = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, { formatNumber: String, domEventHandlers: {} }, {
      domEventHandlers(e, n) {
        let i = Object.assign({}, e);
        for (let r in n) {
          let s = i[r], o = n[r];
          i[r] = s ? (l, a, c) => s(l, a, c) || o(l, a, c) : o;
        }
        return i;
      }
    });
  }
});
class Yg extends Ms {
  constructor(e) {
    super(), this.number = e;
  }
  eq(e) {
    return this.number == e.number;
  }
  toDOM() {
    return document.createTextNode(this.number);
  }
}
function Xg(t, e) {
  return t.state.facet(ua).formatNumber(e, t.state);
}
const $J = /* @__PURE__ */ Uc.compute([ua], (t) => ({
  class: "cm-lineNumbers",
  renderEmptyElements: !1,
  markers(e) {
    return e.state.facet(ZJ);
  },
  lineMarker(e, n, i) {
    return i.some((r) => r.toDOM) ? null : new Yg(Xg(e, e.state.doc.lineAt(n.from).number));
  },
  lineMarkerChange: (e) => e.startState.facet(ua) != e.state.facet(ua),
  initialSpacer(e) {
    return new Yg(Xg(e, nC(e.state.doc.lines)));
  },
  updateSpacer(e, n) {
    let i = Xg(n.view, nC(n.view.state.doc.lines));
    return i == e.number ? e : new Yg(i);
  },
  domEventHandlers: t.facet(ua).domEventHandlers
}));
function eK(t = {}) {
  return [
    ua.of(t),
    SE(),
    $J
  ];
}
function nC(t) {
  let e = 9;
  for (; e < t; )
    e = e * 10 + 9;
  return e;
}
const tK = /* @__PURE__ */ new class extends Ms {
  constructor() {
    super(...arguments), this.elementClass = "cm-activeLineGutter";
  }
}(), nK = /* @__PURE__ */ vh.compute(["selection"], (t) => {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.head).from;
    r > n && (n = r, e.push(tK.range(r)));
  }
  return Wt.of(e);
});
function iK() {
  return nK;
}
const ME = 1024;
let rK = 0;
class Qg {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
class Dt {
  constructor(e = {}) {
    this.id = rK++, this.perNode = !!e.perNode, this.deserialize = e.deserialize || (() => {
      throw new Error("This node type doesn't define a deserialize function");
    });
  }
  add(e) {
    if (this.perNode)
      throw new RangeError("Can't add per-node props to node types");
    return typeof e != "function" && (e = Ji.match(e)), (n) => {
      let i = e(n);
      return i === void 0 ? null : [this, i];
    };
  }
}
Dt.closedBy = new Dt({ deserialize: (t) => t.split(" ") });
Dt.openedBy = new Dt({ deserialize: (t) => t.split(" ") });
Dt.group = new Dt({ deserialize: (t) => t.split(" ") });
Dt.contextHash = new Dt({ perNode: !0 });
Dt.lookAhead = new Dt({ perNode: !0 });
Dt.mounted = new Dt({ perNode: !0 });
const sK = /* @__PURE__ */ Object.create(null);
class Ji {
  constructor(e, n, i, r = 0) {
    this.name = e, this.props = n, this.id = i, this.flags = r;
  }
  static define(e) {
    let n = e.props && e.props.length ? /* @__PURE__ */ Object.create(null) : sK, i = (e.top ? 1 : 0) | (e.skipped ? 2 : 0) | (e.error ? 4 : 0) | (e.name == null ? 8 : 0), r = new Ji(e.name || "", n, e.id, i);
    if (e.props) {
      for (let s of e.props)
        if (Array.isArray(s) || (s = s(r)), s) {
          if (s[0].perNode)
            throw new RangeError("Can't store a per-node prop on a node type");
          n[s[0].id] = s[1];
        }
    }
    return r;
  }
  prop(e) {
    return this.props[e.id];
  }
  get isTop() {
    return (this.flags & 1) > 0;
  }
  get isSkipped() {
    return (this.flags & 2) > 0;
  }
  get isError() {
    return (this.flags & 4) > 0;
  }
  get isAnonymous() {
    return (this.flags & 8) > 0;
  }
  is(e) {
    if (typeof e == "string") {
      if (this.name == e)
        return !0;
      let n = this.prop(Dt.group);
      return n ? n.indexOf(e) > -1 : !1;
    }
    return this.id == e;
  }
  static match(e) {
    let n = /* @__PURE__ */ Object.create(null);
    for (let i in e)
      for (let r of i.split(" "))
        n[r] = e[i];
    return (i) => {
      for (let r = i.prop(Dt.group), s = -1; s < (r ? r.length : 0); s++) {
        let o = n[s < 0 ? i.name : r[s]];
        if (o)
          return o;
      }
    };
  }
}
Ji.none = new Ji("", /* @__PURE__ */ Object.create(null), 0, 8);
class Mb {
  constructor(e) {
    this.types = e;
    for (let n = 0; n < e.length; n++)
      if (e[n].id != n)
        throw new RangeError("Node type ids should correspond to array positions when creating a node set");
  }
  extend(...e) {
    let n = [];
    for (let i of this.types) {
      let r = null;
      for (let s of e) {
        let o = s(i);
        o && (r || (r = Object.assign({}, i.props)), r[o[0].id] = o[1]);
      }
      n.push(r ? new Ji(i.name, r, i.id, i.flags) : i);
    }
    return new Mb(n);
  }
}
const Vf = /* @__PURE__ */ new WeakMap(), iC = /* @__PURE__ */ new WeakMap();
var Si;
(function(t) {
  t[t.ExcludeBuffers = 1] = "ExcludeBuffers", t[t.IncludeAnonymous = 2] = "IncludeAnonymous", t[t.IgnoreMounts = 4] = "IgnoreMounts", t[t.IgnoreOverlays = 8] = "IgnoreOverlays";
})(Si || (Si = {}));
class Gn {
  constructor(e, n, i, r, s) {
    if (this.type = e, this.children = n, this.positions = i, this.length = r, this.props = null, s && s.length) {
      this.props = /* @__PURE__ */ Object.create(null);
      for (let [o, l] of s)
        this.props[typeof o == "number" ? o : o.id] = l;
    }
  }
  toString() {
    let e = this.prop(Dt.mounted);
    if (e && !e.overlay)
      return e.tree.toString();
    let n = "";
    for (let i of this.children) {
      let r = i.toString();
      r && (n && (n += ","), n += r);
    }
    return this.type.name ? (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (n.length ? "(" + n + ")" : "") : n;
  }
  cursor(e = 0) {
    return new gd(this.topNode, e);
  }
  cursorAt(e, n = 0, i = 0) {
    let r = Vf.get(this) || this.topNode, s = new gd(r);
    return s.moveTo(e, n), Vf.set(this, s._tree), s;
  }
  get topNode() {
    return new qs(this, 0, 0, null);
  }
  resolve(e, n = 0) {
    let i = Va(Vf.get(this) || this.topNode, e, n, !1);
    return Vf.set(this, i), i;
  }
  resolveInner(e, n = 0) {
    let i = Va(iC.get(this) || this.topNode, e, n, !0);
    return iC.set(this, i), i;
  }
  iterate(e) {
    let { enter: n, leave: i, from: r = 0, to: s = this.length } = e;
    for (let o = this.cursor((e.mode || 0) | Si.IncludeAnonymous); ; ) {
      let l = !1;
      if (o.from <= s && o.to >= r && (o.type.isAnonymous || n(o) !== !1)) {
        if (o.firstChild())
          continue;
        l = !0;
      }
      for (; l && i && !o.type.isAnonymous && i(o), !o.nextSibling(); ) {
        if (!o.parent())
          return;
        l = !0;
      }
    }
  }
  prop(e) {
    return e.perNode ? this.props ? this.props[e.id] : void 0 : this.type.prop(e);
  }
  get propValues() {
    let e = [];
    if (this.props)
      for (let n in this.props)
        e.push([+n, this.props[n]]);
    return e;
  }
  balance(e = {}) {
    return this.children.length <= 8 ? this : Rb(Ji.none, this.children, this.positions, 0, this.children.length, 0, this.length, (n, i, r) => new Gn(this.type, n, i, r, this.propValues), e.makeTree || ((n, i, r) => new Gn(Ji.none, n, i, r)));
  }
  static build(e) {
    return lK(e);
  }
}
Gn.empty = new Gn(Ji.none, [], [], 0);
class Ob {
  constructor(e, n) {
    this.buffer = e, this.index = n;
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  get pos() {
    return this.index;
  }
  next() {
    this.index -= 4;
  }
  fork() {
    return new Ob(this.buffer, this.index);
  }
}
class Jl {
  constructor(e, n, i) {
    this.buffer = e, this.length = n, this.set = i;
  }
  get type() {
    return Ji.none;
  }
  toString() {
    let e = [];
    for (let n = 0; n < this.buffer.length; )
      e.push(this.childString(n)), n = this.buffer[n + 3];
    return e.join(",");
  }
  childString(e) {
    let n = this.buffer[e], i = this.buffer[e + 3], r = this.set.types[n], s = r.name;
    if (/\W/.test(s) && !r.isError && (s = JSON.stringify(s)), e += 4, i == e)
      return s;
    let o = [];
    for (; e < i; )
      o.push(this.childString(e)), e = this.buffer[e + 3];
    return s + "(" + o.join(",") + ")";
  }
  findChild(e, n, i, r, s) {
    let { buffer: o } = this, l = -1;
    for (let a = e; a != n && !(OE(s, r, o[a + 1], o[a + 2]) && (l = a, i > 0)); a = o[a + 3])
      ;
    return l;
  }
  slice(e, n, i) {
    let r = this.buffer, s = new Uint16Array(n - e), o = 0;
    for (let l = e, a = 0; l < n; ) {
      s[a++] = r[l++], s[a++] = r[l++] - i;
      let c = s[a++] = r[l++] - i;
      s[a++] = r[l++] - e, o = Math.max(o, c);
    }
    return new Jl(s, o, this.set);
  }
}
function OE(t, e, n, i) {
  switch (t) {
    case -2:
      return n < e;
    case -1:
      return i >= e && n < e;
    case 0:
      return n < e && i > e;
    case 1:
      return n <= e && i > e;
    case 2:
      return i > e;
    case 4:
      return !0;
  }
}
function TE(t, e) {
  let n = t.childBefore(e);
  for (; n; ) {
    let i = n.lastChild;
    if (!i || i.to != n.to)
      break;
    i.type.isError && i.from == i.to ? (t = n, n = i.prevSibling) : n = i;
  }
  return t;
}
function Va(t, e, n, i) {
  for (var r; t.from == t.to || (n < 1 ? t.from >= e : t.from > e) || (n > -1 ? t.to <= e : t.to < e); ) {
    let o = !i && t instanceof qs && t.index < 0 ? null : t.parent;
    if (!o)
      return t;
    t = o;
  }
  let s = i ? 0 : Si.IgnoreOverlays;
  if (i)
    for (let o = t, l = o.parent; l; o = l, l = o.parent)
      o instanceof qs && o.index < 0 && ((r = l.enter(e, n, s)) === null || r === void 0 ? void 0 : r.from) != o.from && (t = l);
  for (; ; ) {
    let o = t.enter(e, n, s);
    if (!o)
      return t;
    t = o;
  }
}
class qs {
  constructor(e, n, i, r) {
    this._tree = e, this.from = n, this.index = i, this._parent = r;
  }
  get type() {
    return this._tree.type;
  }
  get name() {
    return this._tree.type.name;
  }
  get to() {
    return this.from + this._tree.length;
  }
  nextChild(e, n, i, r, s = 0) {
    for (let o = this; ; ) {
      for (let { children: l, positions: a } = o._tree, c = n > 0 ? l.length : -1; e != c; e += n) {
        let u = l[e], f = a[e] + o.from;
        if (OE(r, i, f, f + u.length)) {
          if (u instanceof Jl) {
            if (s & Si.ExcludeBuffers)
              continue;
            let h = u.findChild(0, u.buffer.length, n, i - f, r);
            if (h > -1)
              return new Mo(new oK(o, u, e, f), null, h);
          } else if (s & Si.IncludeAnonymous || !u.type.isAnonymous || Tb(u)) {
            let h;
            if (!(s & Si.IgnoreMounts) && u.props && (h = u.prop(Dt.mounted)) && !h.overlay)
              return new qs(h.tree, f, e, o);
            let d = new qs(u, f, e, o);
            return s & Si.IncludeAnonymous || !d.type.isAnonymous ? d : d.nextChild(n < 0 ? u.children.length - 1 : 0, n, i, r);
          }
        }
      }
      if (s & Si.IncludeAnonymous || !o.type.isAnonymous || (o.index >= 0 ? e = o.index + n : e = n < 0 ? -1 : o._parent._tree.children.length, o = o._parent, !o))
        return null;
    }
  }
  get firstChild() {
    return this.nextChild(0, 1, 0, 4);
  }
  get lastChild() {
    return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
  }
  childAfter(e) {
    return this.nextChild(0, 1, e, 2);
  }
  childBefore(e) {
    return this.nextChild(this._tree.children.length - 1, -1, e, -2);
  }
  enter(e, n, i = 0) {
    let r;
    if (!(i & Si.IgnoreOverlays) && (r = this._tree.prop(Dt.mounted)) && r.overlay) {
      let s = e - this.from;
      for (let { from: o, to: l } of r.overlay)
        if ((n > 0 ? o <= s : o < s) && (n < 0 ? l >= s : l > s))
          return new qs(r.tree, r.overlay[0].from + this.from, -1, this);
    }
    return this.nextChild(0, 1, e, n, i);
  }
  nextSignificantParent() {
    let e = this;
    for (; e.type.isAnonymous && e._parent; )
      e = e._parent;
    return e;
  }
  get parent() {
    return this._parent ? this._parent.nextSignificantParent() : null;
  }
  get nextSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
  }
  get prevSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
  }
  cursor(e = 0) {
    return new gd(this, e);
  }
  get tree() {
    return this._tree;
  }
  toTree() {
    return this._tree;
  }
  resolve(e, n = 0) {
    return Va(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Va(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return TE(this, e);
  }
  getChild(e, n = null, i = null) {
    let r = dd(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return dd(this, e, n, i);
  }
  toString() {
    return this._tree.toString();
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return pd(this, e);
  }
}
function dd(t, e, n, i) {
  let r = t.cursor(), s = [];
  if (!r.firstChild())
    return s;
  if (n != null) {
    for (; !r.type.is(n); )
      if (!r.nextSibling())
        return s;
  }
  for (; ; ) {
    if (i != null && r.type.is(i))
      return s;
    if (r.type.is(e) && s.push(r.node), !r.nextSibling())
      return i == null ? s : [];
  }
}
function pd(t, e, n = e.length - 1) {
  for (let i = t.parent; n >= 0; i = i.parent) {
    if (!i)
      return !1;
    if (!i.type.isAnonymous) {
      if (e[n] && e[n] != i.name)
        return !1;
      n--;
    }
  }
  return !0;
}
class oK {
  constructor(e, n, i, r) {
    this.parent = e, this.buffer = n, this.index = i, this.start = r;
  }
}
class Mo {
  get name() {
    return this.type.name;
  }
  get from() {
    return this.context.start + this.context.buffer.buffer[this.index + 1];
  }
  get to() {
    return this.context.start + this.context.buffer.buffer[this.index + 2];
  }
  constructor(e, n, i) {
    this.context = e, this._parent = n, this.index = i, this.type = e.buffer.set.types[e.buffer.buffer[i]];
  }
  child(e, n, i) {
    let { buffer: r } = this.context, s = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.context.start, i);
    return s < 0 ? null : new Mo(this.context, this, s);
  }
  get firstChild() {
    return this.child(1, 0, 4);
  }
  get lastChild() {
    return this.child(-1, 0, 4);
  }
  childAfter(e) {
    return this.child(1, e, 2);
  }
  childBefore(e) {
    return this.child(-1, e, -2);
  }
  enter(e, n, i = 0) {
    if (i & Si.ExcludeBuffers)
      return null;
    let { buffer: r } = this.context, s = r.findChild(this.index + 4, r.buffer[this.index + 3], n > 0 ? 1 : -1, e - this.context.start, n);
    return s < 0 ? null : new Mo(this.context, this, s);
  }
  get parent() {
    return this._parent || this.context.parent.nextSignificantParent();
  }
  externalSibling(e) {
    return this._parent ? null : this.context.parent.nextChild(this.context.index + e, e, 0, 4);
  }
  get nextSibling() {
    let { buffer: e } = this.context, n = e.buffer[this.index + 3];
    return n < (this._parent ? e.buffer[this._parent.index + 3] : e.buffer.length) ? new Mo(this.context, this._parent, n) : this.externalSibling(1);
  }
  get prevSibling() {
    let { buffer: e } = this.context, n = this._parent ? this._parent.index + 4 : 0;
    return this.index == n ? this.externalSibling(-1) : new Mo(this.context, this._parent, e.findChild(n, this.index, -1, 0, 4));
  }
  cursor(e = 0) {
    return new gd(this, e);
  }
  get tree() {
    return null;
  }
  toTree() {
    let e = [], n = [], { buffer: i } = this.context, r = this.index + 4, s = i.buffer[this.index + 3];
    if (s > r) {
      let o = i.buffer[this.index + 1];
      e.push(i.slice(r, s, o)), n.push(0);
    }
    return new Gn(this.type, e, n, this.to - this.from);
  }
  resolve(e, n = 0) {
    return Va(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Va(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return TE(this, e);
  }
  toString() {
    return this.context.buffer.childString(this.index);
  }
  getChild(e, n = null, i = null) {
    let r = dd(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return dd(this, e, n, i);
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return pd(this, e);
  }
}
class gd {
  get name() {
    return this.type.name;
  }
  constructor(e, n = 0) {
    if (this.mode = n, this.buffer = null, this.stack = [], this.index = 0, this.bufferNode = null, e instanceof qs)
      this.yieldNode(e);
    else {
      this._tree = e.context.parent, this.buffer = e.context;
      for (let i = e._parent; i; i = i._parent)
        this.stack.unshift(i.index);
      this.bufferNode = e, this.yieldBuf(e.index);
    }
  }
  yieldNode(e) {
    return e ? (this._tree = e, this.type = e.type, this.from = e.from, this.to = e.to, !0) : !1;
  }
  yieldBuf(e, n) {
    this.index = e;
    let { start: i, buffer: r } = this.buffer;
    return this.type = n || r.set.types[r.buffer[e]], this.from = i + r.buffer[e + 1], this.to = i + r.buffer[e + 2], !0;
  }
  yield(e) {
    return e ? e instanceof qs ? (this.buffer = null, this.yieldNode(e)) : (this.buffer = e.context, this.yieldBuf(e.index, e.type)) : !1;
  }
  toString() {
    return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
  }
  enterChild(e, n, i) {
    if (!this.buffer)
      return this.yield(this._tree.nextChild(e < 0 ? this._tree._tree.children.length - 1 : 0, e, n, i, this.mode));
    let { buffer: r } = this.buffer, s = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.buffer.start, i);
    return s < 0 ? !1 : (this.stack.push(this.index), this.yieldBuf(s));
  }
  firstChild() {
    return this.enterChild(1, 0, 4);
  }
  lastChild() {
    return this.enterChild(-1, 0, 4);
  }
  childAfter(e) {
    return this.enterChild(1, e, 2);
  }
  childBefore(e) {
    return this.enterChild(-1, e, -2);
  }
  enter(e, n, i = this.mode) {
    return this.buffer ? i & Si.ExcludeBuffers ? !1 : this.enterChild(1, e, n) : this.yield(this._tree.enter(e, n, i));
  }
  parent() {
    if (!this.buffer)
      return this.yieldNode(this.mode & Si.IncludeAnonymous ? this._tree._parent : this._tree.parent);
    if (this.stack.length)
      return this.yieldBuf(this.stack.pop());
    let e = this.mode & Si.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
    return this.buffer = null, this.yieldNode(e);
  }
  sibling(e) {
    if (!this.buffer)
      return this._tree._parent ? this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + e, e, 0, 4, this.mode)) : !1;
    let { buffer: n } = this.buffer, i = this.stack.length - 1;
    if (e < 0) {
      let r = i < 0 ? 0 : this.stack[i] + 4;
      if (this.index != r)
        return this.yieldBuf(n.findChild(r, this.index, -1, 0, 4));
    } else {
      let r = n.buffer[this.index + 3];
      if (r < (i < 0 ? n.buffer.length : n.buffer[this.stack[i] + 3]))
        return this.yieldBuf(r);
    }
    return i < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + e, e, 0, 4, this.mode)) : !1;
  }
  nextSibling() {
    return this.sibling(1);
  }
  prevSibling() {
    return this.sibling(-1);
  }
  atLastNode(e) {
    let n, i, { buffer: r } = this;
    if (r) {
      if (e > 0) {
        if (this.index < r.buffer.buffer.length)
          return !1;
      } else
        for (let s = 0; s < this.index; s++)
          if (r.buffer.buffer[s + 3] < this.index)
            return !1;
      ({ index: n, parent: i } = r);
    } else
      ({ index: n, _parent: i } = this._tree);
    for (; i; { index: n, _parent: i } = i)
      if (n > -1)
        for (let s = n + e, o = e < 0 ? -1 : i._tree.children.length; s != o; s += e) {
          let l = i._tree.children[s];
          if (this.mode & Si.IncludeAnonymous || l instanceof Jl || !l.type.isAnonymous || Tb(l))
            return !1;
        }
    return !0;
  }
  move(e, n) {
    if (n && this.enterChild(e, 0, 4))
      return !0;
    for (; ; ) {
      if (this.sibling(e))
        return !0;
      if (this.atLastNode(e) || !this.parent())
        return !1;
    }
  }
  next(e = !0) {
    return this.move(1, e);
  }
  prev(e = !0) {
    return this.move(-1, e);
  }
  moveTo(e, n = 0) {
    for (; (this.from == this.to || (n < 1 ? this.from >= e : this.from > e) || (n > -1 ? this.to <= e : this.to < e)) && this.parent(); )
      ;
    for (; this.enterChild(1, e, n); )
      ;
    return this;
  }
  get node() {
    if (!this.buffer)
      return this._tree;
    let e = this.bufferNode, n = null, i = 0;
    if (e && e.context == this.buffer) {
      e:
        for (let r = this.index, s = this.stack.length; s >= 0; ) {
          for (let o = e; o; o = o._parent)
            if (o.index == r) {
              if (r == this.index)
                return o;
              n = o, i = s + 1;
              break e;
            }
          r = this.stack[--s];
        }
    }
    for (let r = i; r < this.stack.length; r++)
      n = new Mo(this.buffer, n, this.stack[r]);
    return this.bufferNode = new Mo(this.buffer, n, this.index);
  }
  get tree() {
    return this.buffer ? null : this._tree._tree;
  }
  iterate(e, n) {
    for (let i = 0; ; ) {
      let r = !1;
      if (this.type.isAnonymous || e(this) !== !1) {
        if (this.firstChild()) {
          i++;
          continue;
        }
        this.type.isAnonymous || (r = !0);
      }
      for (; r && n && n(this), r = this.type.isAnonymous, !this.nextSibling(); ) {
        if (!i)
          return;
        this.parent(), i--, r = !0;
      }
    }
  }
  matchContext(e) {
    if (!this.buffer)
      return pd(this.node, e);
    let { buffer: n } = this.buffer, { types: i } = n.set;
    for (let r = e.length - 1, s = this.stack.length - 1; r >= 0; s--) {
      if (s < 0)
        return pd(this.node, e, r);
      let o = i[n.buffer[this.stack[s]]];
      if (!o.isAnonymous) {
        if (e[r] && e[r] != o.name)
          return !1;
        r--;
      }
    }
    return !0;
  }
}
function Tb(t) {
  return t.children.some((e) => e instanceof Jl || !e.type.isAnonymous || Tb(e));
}
function lK(t) {
  var e;
  let { buffer: n, nodeSet: i, maxBufferLength: r = ME, reused: s = [], minRepeatType: o = i.types.length } = t, l = Array.isArray(n) ? new Ob(n, n.length) : n, a = i.types, c = 0, u = 0;
  function f(k, S, O, w, A) {
    let { id: D, start: R, end: M, size: H } = l, J = u;
    for (; H < 0; )
      if (l.next(), H == -1) {
        let F = s[D];
        O.push(F), w.push(R - k);
        return;
      } else if (H == -3) {
        c = D;
        return;
      } else if (H == -4) {
        u = D;
        return;
      } else
        throw new RangeError(`Unrecognized record size: ${H}`);
    let I = a[D], z, L, K = R - k;
    if (M - R <= r && (L = g(l.pos - S, A))) {
      let F = new Uint16Array(L.size - L.skip), N = l.pos - L.size, te = F.length;
      for (; l.pos > N; )
        te = _(L.start, F, te);
      z = new Jl(F, M - L.start, i), K = L.start - k;
    } else {
      let F = l.pos - H;
      l.next();
      let N = [], te = [], ue = D >= o ? D : -1, q = 0, re = M;
      for (; l.pos > F; )
        ue >= 0 && l.id == ue && l.size >= 0 ? (l.end <= re - r && (d(N, te, R, q, l.end, re, ue, J), q = N.length, re = l.end), l.next()) : f(R, F, N, te, ue);
      if (ue >= 0 && q > 0 && q < N.length && d(N, te, R, q, R, re, ue, J), N.reverse(), te.reverse(), ue > -1 && q > 0) {
        let ie = h(I);
        z = Rb(I, N, te, 0, N.length, 0, M - R, ie, ie);
      } else
        z = p(I, N, te, M - R, J - M);
    }
    O.push(z), w.push(K);
  }
  function h(k) {
    return (S, O, w) => {
      let A = 0, D = S.length - 1, R, M;
      if (D >= 0 && (R = S[D]) instanceof Gn) {
        if (!D && R.type == k && R.length == w)
          return R;
        (M = R.prop(Dt.lookAhead)) && (A = O[D] + R.length + M);
      }
      return p(k, S, O, w, A);
    };
  }
  function d(k, S, O, w, A, D, R, M) {
    let H = [], J = [];
    for (; k.length > w; )
      H.push(k.pop()), J.push(S.pop() + O - A);
    k.push(p(i.types[R], H, J, D - A, M - D)), S.push(A - O);
  }
  function p(k, S, O, w, A = 0, D) {
    if (c) {
      let R = [Dt.contextHash, c];
      D = D ? [R].concat(D) : [R];
    }
    if (A > 25) {
      let R = [Dt.lookAhead, A];
      D = D ? [R].concat(D) : [R];
    }
    return new Gn(k, S, O, w, D);
  }
  function g(k, S) {
    let O = l.fork(), w = 0, A = 0, D = 0, R = O.end - r, M = { size: 0, start: 0, skip: 0 };
    e:
      for (let H = O.pos - k; O.pos > H; ) {
        let J = O.size;
        if (O.id == S && J >= 0) {
          M.size = w, M.start = A, M.skip = D, D += 4, w += 4, O.next();
          continue;
        }
        let I = O.pos - J;
        if (J < 0 || I < H || O.start < R)
          break;
        let z = O.id >= o ? 4 : 0, L = O.start;
        for (O.next(); O.pos > I; ) {
          if (O.size < 0)
            if (O.size == -3)
              z += 4;
            else
              break e;
          else
            O.id >= o && (z += 4);
          O.next();
        }
        A = L, w += J, D += z;
      }
    return (S < 0 || w == k) && (M.size = w, M.start = A, M.skip = D), M.size > 4 ? M : void 0;
  }
  function _(k, S, O) {
    let { id: w, start: A, end: D, size: R } = l;
    if (l.next(), R >= 0 && w < o) {
      let M = O;
      if (R > 4) {
        let H = l.pos - (R - 4);
        for (; l.pos > H; )
          O = _(k, S, O);
      }
      S[--O] = M, S[--O] = D - k, S[--O] = A - k, S[--O] = w;
    } else
      R == -3 ? c = w : R == -4 && (u = w);
    return O;
  }
  let m = [], C = [];
  for (; l.pos > 0; )
    f(t.start || 0, t.bufferStart || 0, m, C, -1);
  let v = (e = t.length) !== null && e !== void 0 ? e : m.length ? C[0] + m[0].length : 0;
  return new Gn(a[t.topID], m.reverse(), C.reverse(), v);
}
const rC = /* @__PURE__ */ new WeakMap();
function kh(t, e) {
  if (!t.isAnonymous || e instanceof Jl || e.type != t)
    return 1;
  let n = rC.get(e);
  if (n == null) {
    n = 1;
    for (let i of e.children) {
      if (i.type != t || !(i instanceof Gn)) {
        n = 1;
        break;
      }
      n += kh(t, i);
    }
    rC.set(e, n);
  }
  return n;
}
function Rb(t, e, n, i, r, s, o, l, a) {
  let c = 0;
  for (let p = i; p < r; p++)
    c += kh(t, e[p]);
  let u = Math.ceil(c * 1.5 / 8), f = [], h = [];
  function d(p, g, _, m, C) {
    for (let v = _; v < m; ) {
      let k = v, S = g[v], O = kh(t, p[v]);
      for (v++; v < m; v++) {
        let w = kh(t, p[v]);
        if (O + w >= u)
          break;
        O += w;
      }
      if (v == k + 1) {
        if (O > u) {
          let w = p[k];
          d(w.children, w.positions, 0, w.children.length, g[k] + C);
          continue;
        }
        f.push(p[k]);
      } else {
        let w = g[v - 1] + p[v - 1].length - S;
        f.push(Rb(t, p, g, k, v, S, w, null, a));
      }
      h.push(S + C - s);
    }
  }
  return d(e, n, i, r, 0), (l || a)(f, h, o);
}
class wl {
  constructor(e, n, i, r, s = !1, o = !1) {
    this.from = e, this.to = n, this.tree = i, this.offset = r, this.open = (s ? 1 : 0) | (o ? 2 : 0);
  }
  get openStart() {
    return (this.open & 1) > 0;
  }
  get openEnd() {
    return (this.open & 2) > 0;
  }
  static addTree(e, n = [], i = !1) {
    let r = [new wl(0, e.length, e, 0, !1, i)];
    for (let s of n)
      s.to > e.length && r.push(s);
    return r;
  }
  static applyChanges(e, n, i = 128) {
    if (!n.length)
      return e;
    let r = [], s = 1, o = e.length ? e[0] : null;
    for (let l = 0, a = 0, c = 0; ; l++) {
      let u = l < n.length ? n[l] : null, f = u ? u.fromA : 1e9;
      if (f - a >= i)
        for (; o && o.from < f; ) {
          let h = o;
          if (a >= h.from || f <= h.to || c) {
            let d = Math.max(h.from, a) - c, p = Math.min(h.to, f) - c;
            h = d >= p ? null : new wl(d, p, h.tree, h.offset + c, l > 0, !!u);
          }
          if (h && r.push(h), o.to > f)
            break;
          o = s < e.length ? e[s++] : null;
        }
      if (!u)
        break;
      a = u.toA, c = u.toA - u.toB;
    }
    return r;
  }
}
let RE = class {
  startParse(e, n, i) {
    return typeof e == "string" && (e = new aK(e)), i = i ? i.length ? i.map((r) => new Qg(r.from, r.to)) : [new Qg(0, 0)] : [new Qg(0, e.length)], this.createParse(e, n || [], i);
  }
  parse(e, n, i) {
    let r = this.startParse(e, n, i);
    for (; ; ) {
      let s = r.advance();
      if (s)
        return s;
    }
  }
};
class aK {
  constructor(e) {
    this.string = e;
  }
  get length() {
    return this.string.length;
  }
  chunk(e) {
    return this.string.slice(e);
  }
  get lineChunks() {
    return !1;
  }
  read(e, n) {
    return this.string.slice(e, n);
  }
}
new Dt({ perNode: !0 });
let cK = 0;
class ns {
  constructor(e, n, i) {
    this.set = e, this.base = n, this.modified = i, this.id = cK++;
  }
  static define(e) {
    if (e != null && e.base)
      throw new Error("Can not derive from a modified tag");
    let n = new ns([], null, []);
    if (n.set.push(n), e)
      for (let i of e.set)
        n.set.push(i);
    return n;
  }
  static defineModifier() {
    let e = new md();
    return (n) => n.modified.indexOf(e) > -1 ? n : md.get(n.base || n, n.modified.concat(e).sort((i, r) => i.id - r.id));
  }
}
let uK = 0;
class md {
  constructor() {
    this.instances = [], this.id = uK++;
  }
  static get(e, n) {
    if (!n.length)
      return e;
    let i = n[0].instances.find((l) => l.base == e && fK(n, l.modified));
    if (i)
      return i;
    let r = [], s = new ns(r, e, n);
    for (let l of n)
      l.instances.push(s);
    let o = hK(n);
    for (let l of e.set)
      if (!l.modified.length)
        for (let a of o)
          r.push(md.get(l, a));
    return s;
  }
}
function fK(t, e) {
  return t.length == e.length && t.every((n, i) => n == e[i]);
}
function hK(t) {
  let e = [[]];
  for (let n = 0; n < t.length; n++)
    for (let i = 0, r = e.length; i < r; i++)
      e.push(e[i].concat(t[n]));
  return e.sort((n, i) => i.length - n.length);
}
function PE(t) {
  let e = /* @__PURE__ */ Object.create(null);
  for (let n in t) {
    let i = t[n];
    Array.isArray(i) || (i = [i]);
    for (let r of n.split(" "))
      if (r) {
        let s = [], o = 2, l = r;
        for (let f = 0; ; ) {
          if (l == "..." && f > 0 && f + 3 == r.length) {
            o = 1;
            break;
          }
          let h = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);
          if (!h)
            throw new RangeError("Invalid path: " + r);
          if (s.push(h[0] == "*" ? "" : h[0][0] == '"' ? JSON.parse(h[0]) : h[0]), f += h[0].length, f == r.length)
            break;
          let d = r[f++];
          if (f == r.length && d == "!") {
            o = 0;
            break;
          }
          if (d != "/")
            throw new RangeError("Invalid path: " + r);
          l = r.slice(f);
        }
        let a = s.length - 1, c = s[a];
        if (!c)
          throw new RangeError("Invalid path: " + r);
        let u = new bd(i, o, a > 0 ? s.slice(0, a) : null);
        e[c] = u.sort(e[c]);
      }
  }
  return IE.add(e);
}
const IE = new Dt();
class bd {
  constructor(e, n, i, r) {
    this.tags = e, this.mode = n, this.context = i, this.next = r;
  }
  get opaque() {
    return this.mode == 0;
  }
  get inherit() {
    return this.mode == 1;
  }
  sort(e) {
    return !e || e.depth < this.depth ? (this.next = e, this) : (e.next = this.sort(e.next), e);
  }
  get depth() {
    return this.context ? this.context.length : 0;
  }
}
bd.empty = new bd([], 2, null);
function DE(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let s of t)
    if (!Array.isArray(s.tag))
      n[s.tag.id] = s.class;
    else
      for (let o of s.tag)
        n[o.id] = s.class;
  let { scope: i, all: r = null } = e || {};
  return {
    style: (s) => {
      let o = r;
      for (let l of s)
        for (let a of l.set) {
          let c = n[a.id];
          if (c) {
            o = o ? o + " " + c : c;
            break;
          }
        }
      return o;
    },
    scope: i
  };
}
function dK(t, e) {
  let n = null;
  for (let i of t) {
    let r = i.style(e);
    r && (n = n ? n + " " + r : r);
  }
  return n;
}
function pK(t, e, n, i = 0, r = t.length) {
  let s = new gK(i, Array.isArray(e) ? e : [e], n);
  s.highlightRange(t.cursor(), i, r, "", s.highlighters), s.flush(r);
}
class gK {
  constructor(e, n, i) {
    this.at = e, this.highlighters = n, this.span = i, this.class = "";
  }
  startSpan(e, n) {
    n != this.class && (this.flush(e), e > this.at && (this.at = e), this.class = n);
  }
  flush(e) {
    e > this.at && this.class && this.span(this.at, e, this.class);
  }
  highlightRange(e, n, i, r, s) {
    let { type: o, from: l, to: a } = e;
    if (l >= i || a <= n)
      return;
    o.isTop && (s = this.highlighters.filter((d) => !d.scope || d.scope(o)));
    let c = r, u = mK(e) || bd.empty, f = dK(s, u.tags);
    if (f && (c && (c += " "), c += f, u.mode == 1 && (r += (r ? " " : "") + f)), this.startSpan(e.from, c), u.opaque)
      return;
    let h = e.tree && e.tree.prop(Dt.mounted);
    if (h && h.overlay) {
      let d = e.node.enter(h.overlay[0].from + l, 1), p = this.highlighters.filter((_) => !_.scope || _.scope(h.tree.type)), g = e.firstChild();
      for (let _ = 0, m = l; ; _++) {
        let C = _ < h.overlay.length ? h.overlay[_] : null, v = C ? C.from + l : a, k = Math.max(n, m), S = Math.min(i, v);
        if (k < S && g)
          for (; e.from < S && (this.highlightRange(e, k, S, r, s), this.startSpan(Math.min(S, e.to), c), !(e.to >= v || !e.nextSibling())); )
            ;
        if (!C || v > i)
          break;
        m = C.to + l, m > n && (this.highlightRange(d.cursor(), Math.max(n, C.from + l), Math.min(i, m), r, p), this.startSpan(m, c));
      }
      g && e.parent();
    } else if (e.firstChild()) {
      do
        if (!(e.to <= n)) {
          if (e.from >= i)
            break;
          this.highlightRange(e, n, i, r, s), this.startSpan(Math.min(i, e.to), c);
        }
      while (e.nextSibling());
      e.parent();
    }
  }
}
function mK(t) {
  let e = t.type.prop(IE);
  for (; e && e.context && !t.matchContext(e.context); )
    e = e.next;
  return e || null;
}
const Ke = ns.define, Uf = Ke(), go = Ke(), sC = Ke(go), oC = Ke(go), mo = Ke(), Hf = Ke(mo), Zg = Ke(mo), ts = Ke(), ll = Ke(ts), Zr = Ke(), $r = Ke(), F1 = Ke(), _c = Ke(F1), Wf = Ke(), xe = {
  comment: Uf,
  lineComment: Ke(Uf),
  blockComment: Ke(Uf),
  docComment: Ke(Uf),
  name: go,
  variableName: Ke(go),
  typeName: sC,
  tagName: Ke(sC),
  propertyName: oC,
  attributeName: Ke(oC),
  className: Ke(go),
  labelName: Ke(go),
  namespace: Ke(go),
  macroName: Ke(go),
  literal: mo,
  string: Hf,
  docString: Ke(Hf),
  character: Ke(Hf),
  attributeValue: Ke(Hf),
  number: Zg,
  integer: Ke(Zg),
  float: Ke(Zg),
  bool: Ke(mo),
  regexp: Ke(mo),
  escape: Ke(mo),
  color: Ke(mo),
  url: Ke(mo),
  keyword: Zr,
  self: Ke(Zr),
  null: Ke(Zr),
  atom: Ke(Zr),
  unit: Ke(Zr),
  modifier: Ke(Zr),
  operatorKeyword: Ke(Zr),
  controlKeyword: Ke(Zr),
  definitionKeyword: Ke(Zr),
  moduleKeyword: Ke(Zr),
  operator: $r,
  derefOperator: Ke($r),
  arithmeticOperator: Ke($r),
  logicOperator: Ke($r),
  bitwiseOperator: Ke($r),
  compareOperator: Ke($r),
  updateOperator: Ke($r),
  definitionOperator: Ke($r),
  typeOperator: Ke($r),
  controlOperator: Ke($r),
  punctuation: F1,
  separator: Ke(F1),
  bracket: _c,
  angleBracket: Ke(_c),
  squareBracket: Ke(_c),
  paren: Ke(_c),
  brace: Ke(_c),
  content: ts,
  heading: ll,
  heading1: Ke(ll),
  heading2: Ke(ll),
  heading3: Ke(ll),
  heading4: Ke(ll),
  heading5: Ke(ll),
  heading6: Ke(ll),
  contentSeparator: Ke(ts),
  list: Ke(ts),
  quote: Ke(ts),
  emphasis: Ke(ts),
  strong: Ke(ts),
  link: Ke(ts),
  monospace: Ke(ts),
  strikethrough: Ke(ts),
  inserted: Ke(),
  deleted: Ke(),
  changed: Ke(),
  invalid: Ke(),
  meta: Wf,
  documentMeta: Ke(Wf),
  annotation: Ke(Wf),
  processingInstruction: Ke(Wf),
  definition: ns.defineModifier(),
  constant: ns.defineModifier(),
  function: ns.defineModifier(),
  standard: ns.defineModifier(),
  local: ns.defineModifier(),
  special: ns.defineModifier()
};
DE([
  { tag: xe.link, class: "tok-link" },
  { tag: xe.heading, class: "tok-heading" },
  { tag: xe.emphasis, class: "tok-emphasis" },
  { tag: xe.strong, class: "tok-strong" },
  { tag: xe.keyword, class: "tok-keyword" },
  { tag: xe.atom, class: "tok-atom" },
  { tag: xe.bool, class: "tok-bool" },
  { tag: xe.url, class: "tok-url" },
  { tag: xe.labelName, class: "tok-labelName" },
  { tag: xe.inserted, class: "tok-inserted" },
  { tag: xe.deleted, class: "tok-deleted" },
  { tag: xe.literal, class: "tok-literal" },
  { tag: xe.string, class: "tok-string" },
  { tag: xe.number, class: "tok-number" },
  { tag: [xe.regexp, xe.escape, xe.special(xe.string)], class: "tok-string2" },
  { tag: xe.variableName, class: "tok-variableName" },
  { tag: xe.local(xe.variableName), class: "tok-variableName tok-local" },
  { tag: xe.definition(xe.variableName), class: "tok-variableName tok-definition" },
  { tag: xe.special(xe.variableName), class: "tok-variableName2" },
  { tag: xe.definition(xe.propertyName), class: "tok-propertyName tok-definition" },
  { tag: xe.typeName, class: "tok-typeName" },
  { tag: xe.namespace, class: "tok-namespace" },
  { tag: xe.className, class: "tok-className" },
  { tag: xe.macroName, class: "tok-macroName" },
  { tag: xe.propertyName, class: "tok-propertyName" },
  { tag: xe.operator, class: "tok-operator" },
  { tag: xe.comment, class: "tok-comment" },
  { tag: xe.meta, class: "tok-meta" },
  { tag: xe.invalid, class: "tok-invalid" },
  { tag: xe.punctuation, class: "tok-punctuation" }
]);
var $g;
const yu = /* @__PURE__ */ new Dt();
function bK(t) {
  return nt.define({
    combine: t ? (e) => e.concat(t) : void 0
  });
}
class jr {
  constructor(e, n, i = [], r = "") {
    this.data = e, this.name = r, Rt.prototype.hasOwnProperty("tree") || Object.defineProperty(Rt.prototype, "tree", { get() {
      return Pi(this);
    } }), this.parser = n, this.extension = [
      Wo.of(this),
      Rt.languageData.of((s, o, l) => s.facet(lC(s, o, l)))
    ].concat(i);
  }
  isActiveAt(e, n, i = -1) {
    return lC(e, n, i) == this.data;
  }
  findRegions(e) {
    let n = e.facet(Wo);
    if ((n == null ? void 0 : n.data) == this.data)
      return [{ from: 0, to: e.doc.length }];
    if (!n || !n.allowsNesting)
      return [];
    let i = [], r = (s, o) => {
      if (s.prop(yu) == this.data) {
        i.push({ from: o, to: o + s.length });
        return;
      }
      let l = s.prop(Dt.mounted);
      if (l) {
        if (l.tree.prop(yu) == this.data) {
          if (l.overlay)
            for (let a of l.overlay)
              i.push({ from: a.from + o, to: a.to + o });
          else
            i.push({ from: o, to: o + s.length });
          return;
        } else if (l.overlay) {
          let a = i.length;
          if (r(l.tree, l.overlay[0].from + o), i.length > a)
            return;
        }
      }
      for (let a = 0; a < s.children.length; a++) {
        let c = s.children[a];
        c instanceof Gn && r(c, s.positions[a] + o);
      }
    };
    return r(Pi(e), 0), i;
  }
  get allowsNesting() {
    return !0;
  }
}
jr.setState = /* @__PURE__ */ St.define();
function lC(t, e, n) {
  let i = t.facet(Wo);
  if (!i)
    return null;
  let r = i.data;
  if (i.allowsNesting)
    for (let s = Pi(t).topNode; s; s = s.enter(e, n, Si.ExcludeBuffers))
      r = s.type.prop(yu) || r;
  return r;
}
class _d extends jr {
  constructor(e, n, i) {
    super(e, n, [], i), this.parser = n;
  }
  static define(e) {
    let n = bK(e.languageData);
    return new _d(n, e.parser.configure({
      props: [yu.add((i) => i.isTop ? n : void 0)]
    }), e.name);
  }
  configure(e, n) {
    return new _d(this.data, this.parser.configure(e), n || this.name);
  }
  get allowsNesting() {
    return this.parser.hasWrappers();
  }
}
function Pi(t) {
  let e = t.field(jr.state, !1);
  return e ? e.tree : Gn.empty;
}
class _K {
  constructor(e, n = e.length) {
    this.doc = e, this.length = n, this.cursorPos = 0, this.string = "", this.cursor = e.iter();
  }
  syncTo(e) {
    return this.string = this.cursor.next(e - this.cursorPos).value, this.cursorPos = e + this.string.length, this.cursorPos - this.string.length;
  }
  chunk(e) {
    return this.syncTo(e), this.string;
  }
  get lineChunks() {
    return !0;
  }
  read(e, n) {
    let i = this.cursorPos - this.string.length;
    return e < i || n >= this.cursorPos ? this.doc.sliceString(e, n) : this.string.slice(e - i, n - i);
  }
}
let yc = null;
class yd {
  constructor(e, n, i = [], r, s, o, l, a) {
    this.parser = e, this.state = n, this.fragments = i, this.tree = r, this.treeLen = s, this.viewport = o, this.skipped = l, this.scheduleOn = a, this.parse = null, this.tempSkipped = [];
  }
  static create(e, n, i) {
    return new yd(e, n, [], Gn.empty, 0, i, [], null);
  }
  startParse() {
    return this.parser.startParse(new _K(this.state.doc), this.fragments);
  }
  work(e, n) {
    return n != null && n >= this.state.doc.length && (n = void 0), this.tree != Gn.empty && this.isDone(n ?? this.state.doc.length) ? (this.takeTree(), !0) : this.withContext(() => {
      var i;
      if (typeof e == "number") {
        let r = Date.now() + e;
        e = () => Date.now() > r;
      }
      for (this.parse || (this.parse = this.startParse()), n != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > n) && n < this.state.doc.length && this.parse.stopAt(n); ; ) {
        let r = this.parse.advance();
        if (r)
          if (this.fragments = this.withoutTempSkipped(wl.addTree(r, this.fragments, this.parse.stoppedAt != null)), this.treeLen = (i = this.parse.stoppedAt) !== null && i !== void 0 ? i : this.state.doc.length, this.tree = r, this.parse = null, this.treeLen < (n ?? this.state.doc.length))
            this.parse = this.startParse();
          else
            return !0;
        if (e())
          return !1;
      }
    });
  }
  takeTree() {
    let e, n;
    this.parse && (e = this.parse.parsedPos) >= this.treeLen && ((this.parse.stoppedAt == null || this.parse.stoppedAt > e) && this.parse.stopAt(e), this.withContext(() => {
      for (; !(n = this.parse.advance()); )
        ;
    }), this.treeLen = e, this.tree = n, this.fragments = this.withoutTempSkipped(wl.addTree(this.tree, this.fragments, !0)), this.parse = null);
  }
  withContext(e) {
    let n = yc;
    yc = this;
    try {
      return e();
    } finally {
      yc = n;
    }
  }
  withoutTempSkipped(e) {
    for (let n; n = this.tempSkipped.pop(); )
      e = aC(e, n.from, n.to);
    return e;
  }
  changes(e, n) {
    let { fragments: i, tree: r, treeLen: s, viewport: o, skipped: l } = this;
    if (this.takeTree(), !e.empty) {
      let a = [];
      if (e.iterChangedRanges((c, u, f, h) => a.push({ fromA: c, toA: u, fromB: f, toB: h })), i = wl.applyChanges(i, a), r = Gn.empty, s = 0, o = { from: e.mapPos(o.from, -1), to: e.mapPos(o.to, 1) }, this.skipped.length) {
        l = [];
        for (let c of this.skipped) {
          let u = e.mapPos(c.from, 1), f = e.mapPos(c.to, -1);
          u < f && l.push({ from: u, to: f });
        }
      }
    }
    return new yd(this.parser, n, i, r, s, o, l, this.scheduleOn);
  }
  updateViewport(e) {
    if (this.viewport.from == e.from && this.viewport.to == e.to)
      return !1;
    this.viewport = e;
    let n = this.skipped.length;
    for (let i = 0; i < this.skipped.length; i++) {
      let { from: r, to: s } = this.skipped[i];
      r < e.to && s > e.from && (this.fragments = aC(this.fragments, r, s), this.skipped.splice(i--, 1));
    }
    return this.skipped.length >= n ? !1 : (this.reset(), !0);
  }
  reset() {
    this.parse && (this.takeTree(), this.parse = null);
  }
  skipUntilInView(e, n) {
    this.skipped.push({ from: e, to: n });
  }
  static getSkippingParser(e) {
    return new class extends RE {
      createParse(n, i, r) {
        let s = r[0].from, o = r[r.length - 1].to;
        return {
          parsedPos: s,
          advance() {
            let a = yc;
            if (a) {
              for (let c of r)
                a.tempSkipped.push(c);
              e && (a.scheduleOn = a.scheduleOn ? Promise.all([a.scheduleOn, e]) : e);
            }
            return this.parsedPos = o, new Gn(Ji.none, [], [], o - s);
          },
          stoppedAt: null,
          stopAt() {
          }
        };
      }
    }();
  }
  isDone(e) {
    e = Math.min(e, this.state.doc.length);
    let n = this.fragments;
    return this.treeLen >= e && n.length && n[0].from == 0 && n[0].to >= e;
  }
  static get() {
    return yc;
  }
}
function aC(t, e, n) {
  return wl.applyChanges(t, [{ fromA: e, toA: n, fromB: e, toB: n }]);
}
class Ua {
  constructor(e) {
    this.context = e, this.tree = e.tree;
  }
  apply(e) {
    if (!e.docChanged && this.tree == this.context.tree)
      return this;
    let n = this.context.changes(e.changes, e.state), i = this.context.treeLen == e.startState.doc.length ? void 0 : Math.max(e.changes.mapPos(this.context.treeLen), n.viewport.to);
    return n.work(20, i) || n.takeTree(), new Ua(n);
  }
  static init(e) {
    let n = Math.min(3e3, e.doc.length), i = yd.create(e.facet(Wo).parser, e, { from: 0, to: n });
    return i.work(20, n) || i.takeTree(), new Ua(i);
  }
}
jr.state = /* @__PURE__ */ ri.define({
  create: Ua.init,
  update(t, e) {
    for (let n of e.effects)
      if (n.is(jr.setState))
        return n.value;
    return e.startState.facet(Wo) != e.state.facet(Wo) ? Ua.init(e.state) : t.apply(e);
  }
});
let NE = (t) => {
  let e = setTimeout(() => t(), 500);
  return () => clearTimeout(e);
};
typeof requestIdleCallback < "u" && (NE = (t) => {
  let e = -1, n = setTimeout(() => {
    e = requestIdleCallback(t, { timeout: 500 - 100 });
  }, 100);
  return () => e < 0 ? clearTimeout(n) : cancelIdleCallback(e);
});
const em = typeof navigator < "u" && (!(($g = navigator.scheduling) === null || $g === void 0) && $g.isInputPending) ? () => navigator.scheduling.isInputPending() : null, yK = /* @__PURE__ */ Yn.fromClass(class {
  constructor(e) {
    this.view = e, this.working = null, this.workScheduled = 0, this.chunkEnd = -1, this.chunkBudget = -1, this.work = this.work.bind(this), this.scheduleWork();
  }
  update(e) {
    let n = this.view.state.field(jr.state).context;
    (n.updateViewport(e.view.viewport) || this.view.viewport.to > n.treeLen) && this.scheduleWork(), e.docChanged && (this.view.hasFocus && (this.chunkBudget += 50), this.scheduleWork()), this.checkAsyncSchedule(n);
  }
  scheduleWork() {
    if (this.working)
      return;
    let { state: e } = this.view, n = e.field(jr.state);
    (n.tree != n.context.tree || !n.context.isDone(e.doc.length)) && (this.working = NE(this.work));
  }
  work(e) {
    this.working = null;
    let n = Date.now();
    if (this.chunkEnd < n && (this.chunkEnd < 0 || this.view.hasFocus) && (this.chunkEnd = n + 3e4, this.chunkBudget = 3e3), this.chunkBudget <= 0)
      return;
    let { state: i, viewport: { to: r } } = this.view, s = i.field(jr.state);
    if (s.tree == s.context.tree && s.context.isDone(r + 1e5))
      return;
    let o = Date.now() + Math.min(this.chunkBudget, 100, e && !em ? Math.max(25, e.timeRemaining() - 5) : 1e9), l = s.context.treeLen < r && i.doc.length > r + 1e3, a = s.context.work(() => em && em() || Date.now() > o, r + (l ? 0 : 1e5));
    this.chunkBudget -= Date.now() - n, (a || this.chunkBudget <= 0) && (s.context.takeTree(), this.view.dispatch({ effects: jr.setState.of(new Ua(s.context)) })), this.chunkBudget > 0 && !(a && !l) && this.scheduleWork(), this.checkAsyncSchedule(s.context);
  }
  checkAsyncSchedule(e) {
    e.scheduleOn && (this.workScheduled++, e.scheduleOn.then(() => this.scheduleWork()).catch((n) => ir(this.view.state, n)).then(() => this.workScheduled--), e.scheduleOn = null);
  }
  destroy() {
    this.working && this.working();
  }
  isWorking() {
    return !!(this.working || this.workScheduled > 0);
  }
}, {
  eventHandlers: { focus() {
    this.scheduleWork();
  } }
}), Wo = /* @__PURE__ */ nt.define({
  combine(t) {
    return t.length ? t[0] : null;
  },
  enables: (t) => [
    jr.state,
    yK,
    tt.contentAttributes.compute([t], (e) => {
      let n = e.facet(t);
      return n && n.name ? { "data-language": n.name } : {};
    })
  ]
});
class wK {
  constructor(e, n = []) {
    this.language = e, this.support = n, this.extension = [e, n];
  }
}
const vK = /* @__PURE__ */ nt.define(), xp = /* @__PURE__ */ nt.define({
  combine: (t) => {
    if (!t.length)
      return "  ";
    if (!/^(?: +|\t+)$/.test(t[0]))
      throw new Error("Invalid indent unit: " + JSON.stringify(t[0]));
    return t[0];
  }
});
function wd(t) {
  let e = t.facet(xp);
  return e.charCodeAt(0) == 9 ? t.tabSize * e.length : e.length;
}
function wu(t, e) {
  let n = "", i = t.tabSize;
  if (t.facet(xp).charCodeAt(0) == 9)
    for (; e >= i; )
      n += "	", e -= i;
  for (let r = 0; r < e; r++)
    n += " ";
  return n;
}
function Pb(t, e) {
  t instanceof Rt && (t = new Fp(t));
  for (let i of t.state.facet(vK)) {
    let r = i(t, e);
    if (r !== void 0)
      return r;
  }
  let n = Pi(t.state);
  return n ? kK(t, n, e) : null;
}
class Fp {
  constructor(e, n = {}) {
    this.state = e, this.options = n, this.unit = wd(e);
  }
  lineAt(e, n = 1) {
    let i = this.state.doc.lineAt(e), { simulateBreak: r, simulateDoubleBreak: s } = this.options;
    return r != null && r >= i.from && r <= i.to ? s && r == e ? { text: "", from: e } : (n < 0 ? r < e : r <= e) ? { text: i.text.slice(r - i.from), from: r } : { text: i.text.slice(0, r - i.from), from: i.from } : i;
  }
  textAfterPos(e, n = 1) {
    if (this.options.simulateDoubleBreak && e == this.options.simulateBreak)
      return "";
    let { text: i, from: r } = this.lineAt(e, n);
    return i.slice(e - r, Math.min(i.length, e + 100 - r));
  }
  column(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), s = this.countColumn(i, e - r), o = this.options.overrideIndentation ? this.options.overrideIndentation(r) : -1;
    return o > -1 && (s += o - this.countColumn(i, i.search(/\S|$/))), s;
  }
  countColumn(e, n = e.length) {
    return Gu(e, this.state.tabSize, n);
  }
  lineIndent(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), s = this.options.overrideIndentation;
    if (s) {
      let o = s(r);
      if (o > -1)
        return o;
    }
    return this.countColumn(i, i.search(/\S|$/));
  }
  get simulatedBreak() {
    return this.options.simulateBreak || null;
  }
}
const LE = /* @__PURE__ */ new Dt();
function kK(t, e, n) {
  return jE(e.resolveInner(n).enterUnfinishedNodesBefore(n), n, t);
}
function CK(t) {
  return t.pos == t.options.simulateBreak && t.options.simulateDoubleBreak;
}
function SK(t) {
  let e = t.type.prop(LE);
  if (e)
    return e;
  let n = t.firstChild, i;
  if (n && (i = n.type.prop(Dt.closedBy))) {
    let r = t.lastChild, s = r && i.indexOf(r.name) > -1;
    return (o) => OK(o, !0, 1, void 0, s && !CK(o) ? r.from : void 0);
  }
  return t.parent == null ? EK : null;
}
function jE(t, e, n) {
  for (; t; t = t.parent) {
    let i = SK(t);
    if (i)
      return i(Ib.create(n, e, t));
  }
  return null;
}
function EK() {
  return 0;
}
class Ib extends Fp {
  constructor(e, n, i) {
    super(e.state, e.options), this.base = e, this.pos = n, this.node = i;
  }
  static create(e, n, i) {
    return new Ib(e, n, i);
  }
  get textAfter() {
    return this.textAfterPos(this.pos);
  }
  get baseIndent() {
    let e = this.state.doc.lineAt(this.node.from);
    for (; ; ) {
      let n = this.node.resolve(e.from);
      for (; n.parent && n.parent.from == n.from; )
        n = n.parent;
      if (AK(n, this.node))
        break;
      e = this.state.doc.lineAt(n.from);
    }
    return this.lineIndent(e.from);
  }
  continue() {
    let e = this.node.parent;
    return e ? jE(e, this.pos, this.base) : 0;
  }
}
function AK(t, e) {
  for (let n = e; n; n = n.parent)
    if (t == n)
      return !0;
  return !1;
}
function MK(t) {
  let e = t.node, n = e.childAfter(e.from), i = e.lastChild;
  if (!n)
    return null;
  let r = t.options.simulateBreak, s = t.state.doc.lineAt(n.from), o = r == null || r <= s.from ? s.to : Math.min(s.to, r);
  for (let l = n.to; ; ) {
    let a = e.childAfter(l);
    if (!a || a == i)
      return null;
    if (!a.type.isSkipped)
      return a.from < o ? n : null;
    l = a.to;
  }
}
function OK(t, e, n, i, r) {
  let s = t.textAfter, o = s.match(/^\s*/)[0].length, l = i && s.slice(o, o + i.length) == i || r == t.pos + o, a = e ? MK(t) : null;
  return a ? l ? t.column(a.from) : t.column(a.to) : t.baseIndent + (l ? 0 : t.unit * n);
}
function cC({ except: t, units: e = 1 } = {}) {
  return (n) => {
    let i = t && t.test(n.textAfter);
    return n.baseIndent + (i ? 0 : e * n.unit);
  };
}
const TK = 200;
function RK() {
  return Rt.transactionFilter.of((t) => {
    if (!t.docChanged || !t.isUserEvent("input.type") && !t.isUserEvent("input.complete"))
      return t;
    let e = t.startState.languageDataAt("indentOnInput", t.startState.selection.main.head);
    if (!e.length)
      return t;
    let n = t.newDoc, { head: i } = t.newSelection.main, r = n.lineAt(i);
    if (i > r.from + TK)
      return t;
    let s = n.sliceString(r.from, i);
    if (!e.some((c) => c.test(s)))
      return t;
    let { state: o } = t, l = -1, a = [];
    for (let { head: c } of o.selection.ranges) {
      let u = o.doc.lineAt(c);
      if (u.from == l)
        continue;
      l = u.from;
      let f = Pb(o, u.from);
      if (f == null)
        continue;
      let h = /^\s*/.exec(u.text)[0], d = wu(o, f);
      h != d && a.push({ from: u.from, to: u.from + h.length, insert: d });
    }
    return a.length ? [t, { changes: a, sequential: !0 }] : t;
  });
}
const PK = /* @__PURE__ */ nt.define(), BE = /* @__PURE__ */ new Dt();
function IK(t) {
  let e = t.firstChild, n = t.lastChild;
  return e && e.to < n.from ? { from: e.to, to: n.type.isError ? t.to : n.from } : null;
}
function DK(t, e, n) {
  let i = Pi(t);
  if (i.length < n)
    return null;
  let r = i.resolveInner(n, 1), s = null;
  for (let o = r; o; o = o.parent) {
    if (o.to <= n || o.from > n)
      continue;
    if (s && o.from < e)
      break;
    let l = o.type.prop(BE);
    if (l && (o.to < i.length - 50 || i.length == t.doc.length || !NK(o))) {
      let a = l(o, t);
      a && a.from <= n && a.from >= e && a.to > n && (s = a);
    }
  }
  return s;
}
function NK(t) {
  let e = t.lastChild;
  return e && e.to == t.to && e.type.isError;
}
function vd(t, e, n) {
  for (let i of t.facet(PK)) {
    let r = i(t, e, n);
    if (r)
      return r;
  }
  return DK(t, e, n);
}
function xE(t, e) {
  let n = e.mapPos(t.from, 1), i = e.mapPos(t.to, -1);
  return n >= i ? void 0 : { from: n, to: i };
}
const zp = /* @__PURE__ */ St.define({ map: xE }), Qu = /* @__PURE__ */ St.define({ map: xE });
function FE(t) {
  let e = [];
  for (let { head: n } of t.state.selection.ranges)
    e.some((i) => i.from <= n && i.to >= n) || e.push(t.lineBlockAt(n));
  return e;
}
const Dl = /* @__PURE__ */ ri.define({
  create() {
    return gt.none;
  },
  update(t, e) {
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(zp) && !LK(t, n.value.from, n.value.to) ? t = t.update({ add: [uC.range(n.value.from, n.value.to)] }) : n.is(Qu) && (t = t.update({
        filter: (i, r) => n.value.from != i || n.value.to != r,
        filterFrom: n.value.from,
        filterTo: n.value.to
      }));
    if (e.selection) {
      let n = !1, { head: i } = e.selection.main;
      t.between(i, i, (r, s) => {
        r < i && s > i && (n = !0);
      }), n && (t = t.update({
        filterFrom: i,
        filterTo: i,
        filter: (r, s) => s <= i || r >= i
      }));
    }
    return t;
  },
  provide: (t) => tt.decorations.from(t),
  toJSON(t, e) {
    let n = [];
    return t.between(0, e.doc.length, (i, r) => {
      n.push(i, r);
    }), n;
  },
  fromJSON(t) {
    if (!Array.isArray(t) || t.length % 2)
      throw new RangeError("Invalid JSON for fold state");
    let e = [];
    for (let n = 0; n < t.length; ) {
      let i = t[n++], r = t[n++];
      if (typeof i != "number" || typeof r != "number")
        throw new RangeError("Invalid JSON for fold state");
      e.push(uC.range(i, r));
    }
    return gt.set(e, !0);
  }
});
function kd(t, e, n) {
  var i;
  let r = null;
  return (i = t.field(Dl, !1)) === null || i === void 0 || i.between(e, n, (s, o) => {
    (!r || r.from > s) && (r = { from: s, to: o });
  }), r;
}
function LK(t, e, n) {
  let i = !1;
  return t.between(e, e, (r, s) => {
    r == e && s == n && (i = !0);
  }), i;
}
function zE(t, e) {
  return t.field(Dl, !1) ? e : e.concat(St.appendConfig.of(HE()));
}
const jK = (t) => {
  for (let e of FE(t)) {
    let n = vd(t.state, e.from, e.to);
    if (n)
      return t.dispatch({ effects: zE(t.state, [zp.of(n), VE(t, n)]) }), !0;
  }
  return !1;
}, BK = (t) => {
  if (!t.state.field(Dl, !1))
    return !1;
  let e = [];
  for (let n of FE(t)) {
    let i = kd(t.state, n.from, n.to);
    i && e.push(Qu.of(i), VE(t, i, !1));
  }
  return e.length && t.dispatch({ effects: e }), e.length > 0;
};
function VE(t, e, n = !0) {
  let i = t.state.doc.lineAt(e.from).number, r = t.state.doc.lineAt(e.to).number;
  return tt.announce.of(`${t.state.phrase(n ? "Folded lines" : "Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`);
}
const xK = (t) => {
  let { state: e } = t, n = [];
  for (let i = 0; i < e.doc.length; ) {
    let r = t.lineBlockAt(i), s = vd(e, r.from, r.to);
    s && n.push(zp.of(s)), i = (s ? t.lineBlockAt(s.to) : r).to + 1;
  }
  return n.length && t.dispatch({ effects: zE(t.state, n) }), !!n.length;
}, FK = (t) => {
  let e = t.state.field(Dl, !1);
  if (!e || !e.size)
    return !1;
  let n = [];
  return e.between(0, t.state.doc.length, (i, r) => {
    n.push(Qu.of({ from: i, to: r }));
  }), t.dispatch({ effects: n }), !0;
}, zK = [
  { key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: jK },
  { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: BK },
  { key: "Ctrl-Alt-[", run: xK },
  { key: "Ctrl-Alt-]", run: FK }
], VK = {
  placeholderDOM: null,
  placeholderText: "…"
}, UE = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, VK);
  }
});
function HE(t) {
  let e = [Dl, WK];
  return t && e.push(UE.of(t)), e;
}
const uC = /* @__PURE__ */ gt.replace({ widget: /* @__PURE__ */ new class extends $o {
  toDOM(t) {
    let { state: e } = t, n = e.facet(UE), i = (s) => {
      let o = t.lineBlockAt(t.posAtDOM(s.target)), l = kd(t.state, o.from, o.to);
      l && t.dispatch({ effects: Qu.of(l) }), s.preventDefault();
    };
    if (n.placeholderDOM)
      return n.placeholderDOM(t, i);
    let r = document.createElement("span");
    return r.textContent = n.placeholderText, r.setAttribute("aria-label", e.phrase("folded code")), r.title = e.phrase("unfold"), r.className = "cm-foldPlaceholder", r.onclick = i, r;
  }
}() }), UK = {
  openText: "⌄",
  closedText: "›",
  markerDOM: null,
  domEventHandlers: {},
  foldingChanged: () => !1
};
class tm extends Ms {
  constructor(e, n) {
    super(), this.config = e, this.open = n;
  }
  eq(e) {
    return this.config == e.config && this.open == e.open;
  }
  toDOM(e) {
    if (this.config.markerDOM)
      return this.config.markerDOM(this.open);
    let n = document.createElement("span");
    return n.textContent = this.open ? this.config.openText : this.config.closedText, n.title = e.state.phrase(this.open ? "Fold line" : "Unfold line"), n;
  }
}
function HK(t = {}) {
  let e = Object.assign(Object.assign({}, UK), t), n = new tm(e, !0), i = new tm(e, !1), r = Yn.fromClass(class {
    constructor(o) {
      this.from = o.viewport.from, this.markers = this.buildMarkers(o);
    }
    update(o) {
      (o.docChanged || o.viewportChanged || o.startState.facet(Wo) != o.state.facet(Wo) || o.startState.field(Dl, !1) != o.state.field(Dl, !1) || Pi(o.startState) != Pi(o.state) || e.foldingChanged(o)) && (this.markers = this.buildMarkers(o.view));
    }
    buildMarkers(o) {
      let l = new zo();
      for (let a of o.viewportLineBlocks) {
        let c = kd(o.state, a.from, a.to) ? i : vd(o.state, a.from, a.to) ? n : null;
        c && l.add(a.from, a.from, c);
      }
      return l.finish();
    }
  }), { domEventHandlers: s } = e;
  return [
    r,
    CE({
      class: "cm-foldGutter",
      markers(o) {
        var l;
        return ((l = o.plugin(r)) === null || l === void 0 ? void 0 : l.markers) || Wt.empty;
      },
      initialSpacer() {
        return new tm(e, !1);
      },
      domEventHandlers: Object.assign(Object.assign({}, s), { click: (o, l, a) => {
        if (s.click && s.click(o, l, a))
          return !0;
        let c = kd(o.state, l.from, l.to);
        if (c)
          return o.dispatch({ effects: Qu.of(c) }), !0;
        let u = vd(o.state, l.from, l.to);
        return u ? (o.dispatch({ effects: zp.of(u) }), !0) : !1;
      } })
    }),
    HE()
  ];
}
const WK = /* @__PURE__ */ tt.baseTheme({
  ".cm-foldPlaceholder": {
    backgroundColor: "#eee",
    border: "1px solid #ddd",
    color: "#888",
    borderRadius: ".2em",
    margin: "0 1px",
    padding: "0 1px",
    cursor: "pointer"
  },
  ".cm-foldGutter span": {
    padding: "0 1px",
    cursor: "pointer"
  }
});
class Zu {
  constructor(e, n) {
    this.specs = e;
    let i;
    function r(l) {
      let a = Vo.newName();
      return (i || (i = /* @__PURE__ */ Object.create(null)))["." + a] = l, a;
    }
    const s = typeof n.all == "string" ? n.all : n.all ? r(n.all) : void 0, o = n.scope;
    this.scope = o instanceof jr ? (l) => l.prop(yu) == o.data : o ? (l) => l == o : void 0, this.style = DE(e.map((l) => ({
      tag: l.tag,
      class: l.class || r(Object.assign({}, l, { tag: null }))
    })), {
      all: s
    }).style, this.module = i ? new Vo(i) : null, this.themeType = n.themeType;
  }
  static define(e, n) {
    return new Zu(e, n || {});
  }
}
const z1 = /* @__PURE__ */ nt.define(), WE = /* @__PURE__ */ nt.define({
  combine(t) {
    return t.length ? [t[0]] : null;
  }
});
function nm(t) {
  let e = t.facet(z1);
  return e.length ? e : t.facet(WE);
}
function qE(t, e) {
  let n = [JK], i;
  return t instanceof Zu && (t.module && n.push(tt.styleModule.of(t.module)), i = t.themeType), e != null && e.fallback ? n.push(WE.of(t)) : i ? n.push(z1.computeN([tt.darkTheme], (r) => r.facet(tt.darkTheme) == (i == "dark") ? [t] : [])) : n.push(z1.of(t)), n;
}
class qK {
  constructor(e) {
    this.markCache = /* @__PURE__ */ Object.create(null), this.tree = Pi(e.state), this.decorations = this.buildDeco(e, nm(e.state));
  }
  update(e) {
    let n = Pi(e.state), i = nm(e.state), r = i != nm(e.startState);
    n.length < e.view.viewport.to && !r && n.type == this.tree.type ? this.decorations = this.decorations.map(e.changes) : (n != this.tree || e.viewportChanged || r) && (this.tree = n, this.decorations = this.buildDeco(e.view, i));
  }
  buildDeco(e, n) {
    if (!n || !this.tree.length)
      return gt.none;
    let i = new zo();
    for (let { from: r, to: s } of e.visibleRanges)
      pK(this.tree, n, (o, l, a) => {
        i.add(o, l, this.markCache[a] || (this.markCache[a] = gt.mark({ class: a })));
      }, r, s);
    return i.finish();
  }
}
const JK = /* @__PURE__ */ ac.high(/* @__PURE__ */ Yn.fromClass(qK, {
  decorations: (t) => t.decorations
})), KK = /* @__PURE__ */ Zu.define([
  {
    tag: xe.meta,
    color: "#404740"
  },
  {
    tag: xe.link,
    textDecoration: "underline"
  },
  {
    tag: xe.heading,
    textDecoration: "underline",
    fontWeight: "bold"
  },
  {
    tag: xe.emphasis,
    fontStyle: "italic"
  },
  {
    tag: xe.strong,
    fontWeight: "bold"
  },
  {
    tag: xe.strikethrough,
    textDecoration: "line-through"
  },
  {
    tag: xe.keyword,
    color: "#708"
  },
  {
    tag: [xe.atom, xe.bool, xe.url, xe.contentSeparator, xe.labelName],
    color: "#219"
  },
  {
    tag: [xe.literal, xe.inserted],
    color: "#164"
  },
  {
    tag: [xe.string, xe.deleted],
    color: "#a11"
  },
  {
    tag: [xe.regexp, xe.escape, /* @__PURE__ */ xe.special(xe.string)],
    color: "#e40"
  },
  {
    tag: /* @__PURE__ */ xe.definition(xe.variableName),
    color: "#00f"
  },
  {
    tag: /* @__PURE__ */ xe.local(xe.variableName),
    color: "#30a"
  },
  {
    tag: [xe.typeName, xe.namespace],
    color: "#085"
  },
  {
    tag: xe.className,
    color: "#167"
  },
  {
    tag: [/* @__PURE__ */ xe.special(xe.variableName), xe.macroName],
    color: "#256"
  },
  {
    tag: /* @__PURE__ */ xe.definition(xe.propertyName),
    color: "#00c"
  },
  {
    tag: xe.comment,
    color: "#940"
  },
  {
    tag: xe.invalid,
    color: "#f00"
  }
]), GK = /* @__PURE__ */ tt.baseTheme({
  "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" },
  "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" }
}), JE = 1e4, KE = "()[]{}", GE = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      afterCursor: !0,
      brackets: KE,
      maxScanDistance: JE,
      renderMatch: QK
    });
  }
}), YK = /* @__PURE__ */ gt.mark({ class: "cm-matchingBracket" }), XK = /* @__PURE__ */ gt.mark({ class: "cm-nonmatchingBracket" });
function QK(t) {
  let e = [], n = t.matched ? YK : XK;
  return e.push(n.range(t.start.from, t.start.to)), t.end && e.push(n.range(t.end.from, t.end.to)), e;
}
const ZK = /* @__PURE__ */ ri.define({
  create() {
    return gt.none;
  },
  update(t, e) {
    if (!e.docChanged && !e.selection)
      return t;
    let n = [], i = e.state.facet(GE);
    for (let r of e.state.selection.ranges) {
      if (!r.empty)
        continue;
      let s = os(e.state, r.head, -1, i) || r.head > 0 && os(e.state, r.head - 1, 1, i) || i.afterCursor && (os(e.state, r.head, 1, i) || r.head < e.state.doc.length && os(e.state, r.head + 1, -1, i));
      s && (n = n.concat(i.renderMatch(s, e.state)));
    }
    return gt.set(n, !0);
  },
  provide: (t) => tt.decorations.from(t)
}), $K = [
  ZK,
  GK
];
function eG(t = {}) {
  return [GE.of(t), $K];
}
function V1(t, e, n) {
  let i = t.prop(e < 0 ? Dt.openedBy : Dt.closedBy);
  if (i)
    return i;
  if (t.name.length == 1) {
    let r = n.indexOf(t.name);
    if (r > -1 && r % 2 == (e < 0 ? 1 : 0))
      return [n[r + e]];
  }
  return null;
}
function os(t, e, n, i = {}) {
  let r = i.maxScanDistance || JE, s = i.brackets || KE, o = Pi(t), l = o.resolveInner(e, n);
  for (let a = l; a; a = a.parent) {
    let c = V1(a.type, n, s);
    if (c && a.from < a.to)
      return tG(t, e, n, a, c, s);
  }
  return nG(t, e, n, o, l.type, r, s);
}
function tG(t, e, n, i, r, s) {
  let o = i.parent, l = { from: i.from, to: i.to }, a = 0, c = o == null ? void 0 : o.cursor();
  if (c && (n < 0 ? c.childBefore(i.from) : c.childAfter(i.to)))
    do
      if (n < 0 ? c.to <= i.from : c.from >= i.to) {
        if (a == 0 && r.indexOf(c.type.name) > -1 && c.from < c.to)
          return { start: l, end: { from: c.from, to: c.to }, matched: !0 };
        if (V1(c.type, n, s))
          a++;
        else if (V1(c.type, -n, s)) {
          if (a == 0)
            return {
              start: l,
              end: c.from == c.to ? void 0 : { from: c.from, to: c.to },
              matched: !1
            };
          a--;
        }
      }
    while (n < 0 ? c.prevSibling() : c.nextSibling());
  return { start: l, matched: !1 };
}
function nG(t, e, n, i, r, s, o) {
  let l = n < 0 ? t.sliceDoc(e - 1, e) : t.sliceDoc(e, e + 1), a = o.indexOf(l);
  if (a < 0 || a % 2 == 0 != n > 0)
    return null;
  let c = { from: n < 0 ? e - 1 : e, to: n > 0 ? e + 1 : e }, u = t.doc.iterRange(e, n > 0 ? t.doc.length : 0), f = 0;
  for (let h = 0; !u.next().done && h <= s; ) {
    let d = u.value;
    n < 0 && (h += d.length);
    let p = e + h * n;
    for (let g = n > 0 ? 0 : d.length - 1, _ = n > 0 ? d.length : -1; g != _; g += n) {
      let m = o.indexOf(d[g]);
      if (!(m < 0 || i.resolveInner(p + g, 1).type != r))
        if (m % 2 == 0 == n > 0)
          f++;
        else {
          if (f == 1)
            return { start: c, end: { from: p + g, to: p + g + 1 }, matched: m >> 1 == a >> 1 };
          f--;
        }
    }
    n > 0 && (h += d.length);
  }
  return u.done ? { start: c, matched: !1 } : null;
}
const iG = /* @__PURE__ */ Object.create(null), fC = [Ji.none], hC = [], rG = /* @__PURE__ */ Object.create(null);
for (let [t, e] of [
  ["variable", "variableName"],
  ["variable-2", "variableName.special"],
  ["string-2", "string.special"],
  ["def", "variableName.definition"],
  ["tag", "tagName"],
  ["attribute", "attributeName"],
  ["type", "typeName"],
  ["builtin", "variableName.standard"],
  ["qualifier", "modifier"],
  ["error", "invalid"],
  ["header", "heading"],
  ["property", "propertyName"]
])
  rG[t] = /* @__PURE__ */ sG(iG, e);
function im(t, e) {
  hC.indexOf(t) > -1 || (hC.push(t), console.warn(e));
}
function sG(t, e) {
  let n = null;
  for (let s of e.split(".")) {
    let o = t[s] || xe[s];
    o ? typeof o == "function" ? n ? n = o(n) : im(s, `Modifier ${s} used at start of tag`) : n ? im(s, `Tag ${s} used as modifier`) : n = o : im(s, `Unknown highlighting tag ${s}`);
  }
  if (!n)
    return 0;
  let i = e.replace(/ /g, "_"), r = Ji.define({
    id: fC.length,
    name: i,
    props: [PE({ [i]: n })]
  });
  return fC.push(r), r.id;
}
const oG = (t) => {
  let e = Nb(t.state);
  return e.line ? lG(t) : e.block ? cG(t) : !1;
};
function Db(t, e) {
  return ({ state: n, dispatch: i }) => {
    if (n.readOnly)
      return !1;
    let r = t(e, n);
    return r ? (i(n.update(r)), !0) : !1;
  };
}
const lG = /* @__PURE__ */ Db(hG, 0), aG = /* @__PURE__ */ Db(YE, 0), cG = /* @__PURE__ */ Db((t, e) => YE(t, e, fG(e)), 0);
function Nb(t, e = t.selection.main.head) {
  let n = t.languageDataAt("commentTokens", e);
  return n.length ? n[0] : {};
}
const wc = 50;
function uG(t, { open: e, close: n }, i, r) {
  let s = t.sliceDoc(i - wc, i), o = t.sliceDoc(r, r + wc), l = /\s*$/.exec(s)[0].length, a = /^\s*/.exec(o)[0].length, c = s.length - l;
  if (s.slice(c - e.length, c) == e && o.slice(a, a + n.length) == n)
    return {
      open: { pos: i - l, margin: l && 1 },
      close: { pos: r + a, margin: a && 1 }
    };
  let u, f;
  r - i <= 2 * wc ? u = f = t.sliceDoc(i, r) : (u = t.sliceDoc(i, i + wc), f = t.sliceDoc(r - wc, r));
  let h = /^\s*/.exec(u)[0].length, d = /\s*$/.exec(f)[0].length, p = f.length - d - n.length;
  return u.slice(h, h + e.length) == e && f.slice(p, p + n.length) == n ? {
    open: {
      pos: i + h + e.length,
      margin: /\s/.test(u.charAt(h + e.length)) ? 1 : 0
    },
    close: {
      pos: r - d - n.length,
      margin: /\s/.test(f.charAt(p - 1)) ? 1 : 0
    }
  } : null;
}
function fG(t) {
  let e = [];
  for (let n of t.selection.ranges) {
    let i = t.doc.lineAt(n.from), r = n.to <= i.to ? i : t.doc.lineAt(n.to), s = e.length - 1;
    s >= 0 && e[s].to > i.from ? e[s].to = r.to : e.push({ from: i.from, to: r.to });
  }
  return e;
}
function YE(t, e, n = e.selection.ranges) {
  let i = n.map((s) => Nb(e, s.from).block);
  if (!i.every((s) => s))
    return null;
  let r = n.map((s, o) => uG(e, i[o], s.from, s.to));
  if (t != 2 && !r.every((s) => s))
    return { changes: e.changes(n.map((s, o) => r[o] ? [] : [{ from: s.from, insert: i[o].open + " " }, { from: s.to, insert: " " + i[o].close }])) };
  if (t != 1 && r.some((s) => s)) {
    let s = [];
    for (let o = 0, l; o < r.length; o++)
      if (l = r[o]) {
        let a = i[o], { open: c, close: u } = l;
        s.push({ from: c.pos - a.open.length, to: c.pos + c.margin }, { from: u.pos - u.margin, to: u.pos + a.close.length });
      }
    return { changes: s };
  }
  return null;
}
function hG(t, e, n = e.selection.ranges) {
  let i = [], r = -1;
  for (let { from: s, to: o } of n) {
    let l = i.length, a = 1e9;
    for (let c = s; c <= o; ) {
      let u = e.doc.lineAt(c);
      if (u.from > r && (s == o || o > u.from)) {
        r = u.from;
        let f = Nb(e, c).line;
        if (!f)
          continue;
        let h = /^\s*/.exec(u.text)[0].length, d = h == u.length, p = u.text.slice(h, h + f.length) == f ? h : -1;
        h < u.text.length && h < a && (a = h), i.push({ line: u, comment: p, token: f, indent: h, empty: d, single: !1 });
      }
      c = u.to + 1;
    }
    if (a < 1e9)
      for (let c = l; c < i.length; c++)
        i[c].indent < i[c].line.text.length && (i[c].indent = a);
    i.length == l + 1 && (i[l].single = !0);
  }
  if (t != 2 && i.some((s) => s.comment < 0 && (!s.empty || s.single))) {
    let s = [];
    for (let { line: l, token: a, indent: c, empty: u, single: f } of i)
      (f || !u) && s.push({ from: l.from + c, insert: a + " " });
    let o = e.changes(s);
    return { changes: o, selection: e.selection.map(o, 1) };
  } else if (t != 1 && i.some((s) => s.comment >= 0)) {
    let s = [];
    for (let { line: o, comment: l, token: a } of i)
      if (l >= 0) {
        let c = o.from + l, u = c + a.length;
        o.text[u - o.from] == " " && u++, s.push({ from: c, to: u });
      }
    return { changes: s };
  }
  return null;
}
const U1 = /* @__PURE__ */ Zo.define(), dG = /* @__PURE__ */ Zo.define(), pG = /* @__PURE__ */ nt.define(), XE = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      minDepth: 100,
      newGroupDelay: 500
    }, { minDepth: Math.max, newGroupDelay: Math.min });
  }
});
function gG(t) {
  let e = 0;
  return t.iterChangedRanges((n, i) => e = i), e;
}
const Lb = /* @__PURE__ */ ri.define({
  create() {
    return ls.empty;
  },
  update(t, e) {
    let n = e.state.facet(XE), i = e.annotation(U1);
    if (i) {
      let a = e.docChanged ? Pe.single(gG(e.changes)) : void 0, c = Ui.fromTransaction(e, a), u = i.side, f = u == 0 ? t.undone : t.done;
      return c ? f = Sd(f, f.length, n.minDepth, c) : f = $E(f, e.startState.selection), new ls(u == 0 ? i.rest : f, u == 0 ? f : i.rest);
    }
    let r = e.annotation(dG);
    if ((r == "full" || r == "before") && (t = t.isolate()), e.annotation(di.addToHistory) === !1)
      return e.changes.empty ? t : t.addMapping(e.changes.desc);
    let s = Ui.fromTransaction(e), o = e.annotation(di.time), l = e.annotation(di.userEvent);
    return s ? t = t.addChanges(s, o, l, n.newGroupDelay, n.minDepth) : e.selection && (t = t.addSelection(e.startState.selection, o, l, n.newGroupDelay)), (r == "full" || r == "after") && (t = t.isolate()), t;
  },
  toJSON(t) {
    return { done: t.done.map((e) => e.toJSON()), undone: t.undone.map((e) => e.toJSON()) };
  },
  fromJSON(t) {
    return new ls(t.done.map(Ui.fromJSON), t.undone.map(Ui.fromJSON));
  }
});
function mG(t = {}) {
  return [
    Lb,
    XE.of(t),
    tt.domEventHandlers({
      beforeinput(e, n) {
        let i = e.inputType == "historyUndo" ? jb : e.inputType == "historyRedo" ? Cd : null;
        return i ? (e.preventDefault(), i(n)) : !1;
      }
    })
  ];
}
function Vp(t, e) {
  return function({ state: n, dispatch: i }) {
    if (!e && n.readOnly)
      return !1;
    let r = n.field(Lb, !1);
    if (!r)
      return !1;
    let s = r.pop(t, n, e);
    return s ? (i(s), !0) : !1;
  };
}
const jb = /* @__PURE__ */ Vp(0, !1), Cd = /* @__PURE__ */ Vp(1, !1), bG = /* @__PURE__ */ Vp(0, !0), _G = /* @__PURE__ */ Vp(1, !0);
function QE(t) {
  return function(e) {
    let n = e.field(Lb, !1);
    if (!n)
      return 0;
    let i = t == 0 ? n.done : n.undone;
    return i.length - (i.length && !i[0].changes ? 1 : 0);
  };
}
const yG = /* @__PURE__ */ QE(0), wG = /* @__PURE__ */ QE(1);
class Ui {
  constructor(e, n, i, r, s) {
    this.changes = e, this.effects = n, this.mapped = i, this.startSelection = r, this.selectionsAfter = s;
  }
  setSelAfter(e) {
    return new Ui(this.changes, this.effects, this.mapped, this.startSelection, e);
  }
  toJSON() {
    var e, n, i;
    return {
      changes: (e = this.changes) === null || e === void 0 ? void 0 : e.toJSON(),
      mapped: (n = this.mapped) === null || n === void 0 ? void 0 : n.toJSON(),
      startSelection: (i = this.startSelection) === null || i === void 0 ? void 0 : i.toJSON(),
      selectionsAfter: this.selectionsAfter.map((r) => r.toJSON())
    };
  }
  static fromJSON(e) {
    return new Ui(e.changes && $n.fromJSON(e.changes), [], e.mapped && hs.fromJSON(e.mapped), e.startSelection && Pe.fromJSON(e.startSelection), e.selectionsAfter.map(Pe.fromJSON));
  }
  static fromTransaction(e, n) {
    let i = pr;
    for (let r of e.startState.facet(pG)) {
      let s = r(e);
      s.length && (i = i.concat(s));
    }
    return !i.length && e.changes.empty ? null : new Ui(e.changes.invert(e.startState.doc), i, void 0, n || e.startState.selection, pr);
  }
  static selection(e) {
    return new Ui(void 0, pr, void 0, void 0, e);
  }
}
function Sd(t, e, n, i) {
  let r = e + 1 > n + 20 ? e - n - 1 : 0, s = t.slice(r, e);
  return s.push(i), s;
}
function vG(t, e) {
  let n = [], i = !1;
  return t.iterChangedRanges((r, s) => n.push(r, s)), e.iterChangedRanges((r, s, o, l) => {
    for (let a = 0; a < n.length; ) {
      let c = n[a++], u = n[a++];
      l >= c && o <= u && (i = !0);
    }
  }), i;
}
function kG(t, e) {
  return t.ranges.length == e.ranges.length && t.ranges.filter((n, i) => n.empty != e.ranges[i].empty).length === 0;
}
function ZE(t, e) {
  return t.length ? e.length ? t.concat(e) : t : e;
}
const pr = [], CG = 200;
function $E(t, e) {
  if (t.length) {
    let n = t[t.length - 1], i = n.selectionsAfter.slice(Math.max(0, n.selectionsAfter.length - CG));
    return i.length && i[i.length - 1].eq(e) ? t : (i.push(e), Sd(t, t.length - 1, 1e9, n.setSelAfter(i)));
  } else
    return [Ui.selection([e])];
}
function SG(t) {
  let e = t[t.length - 1], n = t.slice();
  return n[t.length - 1] = e.setSelAfter(e.selectionsAfter.slice(0, e.selectionsAfter.length - 1)), n;
}
function rm(t, e) {
  if (!t.length)
    return t;
  let n = t.length, i = pr;
  for (; n; ) {
    let r = EG(t[n - 1], e, i);
    if (r.changes && !r.changes.empty || r.effects.length) {
      let s = t.slice(0, n);
      return s[n - 1] = r, s;
    } else
      e = r.mapped, n--, i = r.selectionsAfter;
  }
  return i.length ? [Ui.selection(i)] : pr;
}
function EG(t, e, n) {
  let i = ZE(t.selectionsAfter.length ? t.selectionsAfter.map((l) => l.map(e)) : pr, n);
  if (!t.changes)
    return Ui.selection(i);
  let r = t.changes.map(e), s = e.mapDesc(t.changes, !0), o = t.mapped ? t.mapped.composeDesc(s) : s;
  return new Ui(r, St.mapEffects(t.effects, e), o, t.startSelection.map(s), i);
}
const AG = /^(input\.type|delete)($|\.)/;
class ls {
  constructor(e, n, i = 0, r = void 0) {
    this.done = e, this.undone = n, this.prevTime = i, this.prevUserEvent = r;
  }
  isolate() {
    return this.prevTime ? new ls(this.done, this.undone) : this;
  }
  addChanges(e, n, i, r, s) {
    let o = this.done, l = o[o.length - 1];
    return l && l.changes && !l.changes.empty && e.changes && (!i || AG.test(i)) && (!l.selectionsAfter.length && n - this.prevTime < r && vG(l.changes, e.changes) || i == "input.type.compose") ? o = Sd(o, o.length - 1, s, new Ui(e.changes.compose(l.changes), ZE(e.effects, l.effects), l.mapped, l.startSelection, pr)) : o = Sd(o, o.length, s, e), new ls(o, pr, n, i);
  }
  addSelection(e, n, i, r) {
    let s = this.done.length ? this.done[this.done.length - 1].selectionsAfter : pr;
    return s.length > 0 && n - this.prevTime < r && i == this.prevUserEvent && i && /^select($|\.)/.test(i) && kG(s[s.length - 1], e) ? this : new ls($E(this.done, e), this.undone, n, i);
  }
  addMapping(e) {
    return new ls(rm(this.done, e), rm(this.undone, e), this.prevTime, this.prevUserEvent);
  }
  pop(e, n, i) {
    let r = e == 0 ? this.done : this.undone;
    if (r.length == 0)
      return null;
    let s = r[r.length - 1];
    if (i && s.selectionsAfter.length)
      return n.update({
        selection: s.selectionsAfter[s.selectionsAfter.length - 1],
        annotations: U1.of({ side: e, rest: SG(r) }),
        userEvent: e == 0 ? "select.undo" : "select.redo",
        scrollIntoView: !0
      });
    if (s.changes) {
      let o = r.length == 1 ? pr : r.slice(0, r.length - 1);
      return s.mapped && (o = rm(o, s.mapped)), n.update({
        changes: s.changes,
        selection: s.startSelection,
        effects: s.effects,
        annotations: U1.of({ side: e, rest: o }),
        filter: !1,
        userEvent: e == 0 ? "undo" : "redo",
        scrollIntoView: !0
      });
    } else
      return null;
  }
}
ls.empty = /* @__PURE__ */ new ls(pr, pr);
const MG = [
  { key: "Mod-z", run: jb, preventDefault: !0 },
  { key: "Mod-y", mac: "Mod-Shift-z", run: Cd, preventDefault: !0 },
  { linux: "Ctrl-Shift-z", run: Cd, preventDefault: !0 },
  { key: "Mod-u", run: bG, preventDefault: !0 },
  { key: "Alt-u", mac: "Mod-Shift-u", run: _G, preventDefault: !0 }
];
function cc(t, e) {
  return Pe.create(t.ranges.map(e), t.mainIndex);
}
function Ns(t, e) {
  return t.update({ selection: e, scrollIntoView: !0, userEvent: "select" });
}
function qr({ state: t, dispatch: e }, n) {
  let i = cc(t.selection, n);
  return i.eq(t.selection) ? !1 : (e(Ns(t, i)), !0);
}
function Up(t, e) {
  return Pe.cursor(e ? t.to : t.from);
}
function eA(t, e) {
  return qr(t, (n) => n.empty ? t.moveByChar(n, e) : Up(n, e));
}
function Ii(t) {
  return t.textDirectionAt(t.state.selection.main.head) == Sn.LTR;
}
const tA = (t) => eA(t, !Ii(t)), nA = (t) => eA(t, Ii(t));
function iA(t, e) {
  return qr(t, (n) => n.empty ? t.moveByGroup(n, e) : Up(n, e));
}
const OG = (t) => iA(t, !Ii(t)), TG = (t) => iA(t, Ii(t));
function RG(t, e, n) {
  if (e.type.prop(n))
    return !0;
  let i = e.to - e.from;
  return i && (i > 2 || /[^\s,.;:]/.test(t.sliceDoc(e.from, e.to))) || e.firstChild;
}
function Hp(t, e, n) {
  let i = Pi(t).resolveInner(e.head), r = n ? Dt.closedBy : Dt.openedBy;
  for (let a = e.head; ; ) {
    let c = n ? i.childAfter(a) : i.childBefore(a);
    if (!c)
      break;
    RG(t, c, r) ? i = c : a = n ? c.to : c.from;
  }
  let s = i.type.prop(r), o, l;
  return s && (o = n ? os(t, i.from, 1) : os(t, i.to, -1)) && o.matched ? l = n ? o.end.to : o.end.from : l = n ? i.to : i.from, Pe.cursor(l, n ? -1 : 1);
}
const PG = (t) => qr(t, (e) => Hp(t.state, e, !Ii(t))), IG = (t) => qr(t, (e) => Hp(t.state, e, Ii(t)));
function rA(t, e) {
  return qr(t, (n) => {
    if (!n.empty)
      return Up(n, e);
    let i = t.moveVertically(n, e);
    return i.head != n.head ? i : t.moveToLineBoundary(n, e);
  });
}
const sA = (t) => rA(t, !1), oA = (t) => rA(t, !0);
function lA(t) {
  return Math.max(t.defaultLineHeight, Math.min(t.dom.clientHeight, innerHeight) - 5);
}
function aA(t, e) {
  let { state: n } = t, i = cc(n.selection, (l) => l.empty ? t.moveVertically(l, e, lA(t)) : Up(l, e));
  if (i.eq(n.selection))
    return !1;
  let r = t.coordsAtPos(n.selection.main.head), s = t.scrollDOM.getBoundingClientRect(), o;
  return r && r.top > s.top && r.bottom < s.bottom && r.top - s.top <= t.scrollDOM.scrollHeight - t.scrollDOM.scrollTop - t.scrollDOM.clientHeight && (o = tt.scrollIntoView(i.main.head, { y: "start", yMargin: r.top - s.top })), t.dispatch(Ns(n, i), { effects: o }), !0;
}
const dC = (t) => aA(t, !1), H1 = (t) => aA(t, !0);
function el(t, e, n) {
  let i = t.lineBlockAt(e.head), r = t.moveToLineBoundary(e, n);
  if (r.head == e.head && r.head != (n ? i.to : i.from) && (r = t.moveToLineBoundary(e, n, !1)), !n && r.head == i.from && i.length) {
    let s = /^\s*/.exec(t.state.sliceDoc(i.from, Math.min(i.from + 100, i.to)))[0].length;
    s && e.head != i.from + s && (r = Pe.cursor(i.from + s));
  }
  return r;
}
const DG = (t) => qr(t, (e) => el(t, e, !0)), NG = (t) => qr(t, (e) => el(t, e, !1)), LG = (t) => qr(t, (e) => el(t, e, !Ii(t))), jG = (t) => qr(t, (e) => el(t, e, Ii(t))), BG = (t) => qr(t, (e) => Pe.cursor(t.lineBlockAt(e.head).from, 1)), xG = (t) => qr(t, (e) => Pe.cursor(t.lineBlockAt(e.head).to, -1));
function FG(t, e, n) {
  let i = !1, r = cc(t.selection, (s) => {
    let o = os(t, s.head, -1) || os(t, s.head, 1) || s.head > 0 && os(t, s.head - 1, 1) || s.head < t.doc.length && os(t, s.head + 1, -1);
    if (!o || !o.end)
      return s;
    i = !0;
    let l = o.start.from == s.head ? o.end.to : o.end.from;
    return n ? Pe.range(s.anchor, l) : Pe.cursor(l);
  });
  return i ? (e(Ns(t, r)), !0) : !1;
}
const zG = ({ state: t, dispatch: e }) => FG(t, e, !1);
function Sr(t, e) {
  let n = cc(t.state.selection, (i) => {
    let r = e(i);
    return Pe.range(i.anchor, r.head, r.goalColumn);
  });
  return n.eq(t.state.selection) ? !1 : (t.dispatch(Ns(t.state, n)), !0);
}
function cA(t, e) {
  return Sr(t, (n) => t.moveByChar(n, e));
}
const uA = (t) => cA(t, !Ii(t)), fA = (t) => cA(t, Ii(t));
function hA(t, e) {
  return Sr(t, (n) => t.moveByGroup(n, e));
}
const VG = (t) => hA(t, !Ii(t)), UG = (t) => hA(t, Ii(t)), HG = (t) => Sr(t, (e) => Hp(t.state, e, !Ii(t))), WG = (t) => Sr(t, (e) => Hp(t.state, e, Ii(t)));
function dA(t, e) {
  return Sr(t, (n) => t.moveVertically(n, e));
}
const pA = (t) => dA(t, !1), gA = (t) => dA(t, !0);
function mA(t, e) {
  return Sr(t, (n) => t.moveVertically(n, e, lA(t)));
}
const pC = (t) => mA(t, !1), gC = (t) => mA(t, !0), qG = (t) => Sr(t, (e) => el(t, e, !0)), JG = (t) => Sr(t, (e) => el(t, e, !1)), KG = (t) => Sr(t, (e) => el(t, e, !Ii(t))), GG = (t) => Sr(t, (e) => el(t, e, Ii(t))), YG = (t) => Sr(t, (e) => Pe.cursor(t.lineBlockAt(e.head).from)), XG = (t) => Sr(t, (e) => Pe.cursor(t.lineBlockAt(e.head).to)), mC = ({ state: t, dispatch: e }) => (e(Ns(t, { anchor: 0 })), !0), bC = ({ state: t, dispatch: e }) => (e(Ns(t, { anchor: t.doc.length })), !0), _C = ({ state: t, dispatch: e }) => (e(Ns(t, { anchor: t.selection.main.anchor, head: 0 })), !0), yC = ({ state: t, dispatch: e }) => (e(Ns(t, { anchor: t.selection.main.anchor, head: t.doc.length })), !0), QG = ({ state: t, dispatch: e }) => (e(t.update({ selection: { anchor: 0, head: t.doc.length }, userEvent: "select" })), !0), ZG = ({ state: t, dispatch: e }) => {
  let n = qp(t).map(({ from: i, to: r }) => Pe.range(i, Math.min(r + 1, t.doc.length)));
  return e(t.update({ selection: Pe.create(n), userEvent: "select" })), !0;
}, $G = ({ state: t, dispatch: e }) => {
  let n = cc(t.selection, (i) => {
    var r;
    let s = Pi(t).resolveInner(i.head, 1);
    for (; !(s.from < i.from && s.to >= i.to || s.to > i.to && s.from <= i.from || !(!((r = s.parent) === null || r === void 0) && r.parent)); )
      s = s.parent;
    return Pe.range(s.to, s.from);
  });
  return e(Ns(t, n)), !0;
}, eY = ({ state: t, dispatch: e }) => {
  let n = t.selection, i = null;
  return n.ranges.length > 1 ? i = Pe.create([n.main]) : n.main.empty || (i = Pe.create([Pe.cursor(n.main.head)])), i ? (e(Ns(t, i)), !0) : !1;
};
function Wp(t, e) {
  if (t.state.readOnly)
    return !1;
  let n = "delete.selection", { state: i } = t, r = i.changeByRange((s) => {
    let { from: o, to: l } = s;
    if (o == l) {
      let a = e(o);
      a < o ? (n = "delete.backward", a = qf(t, a, !1)) : a > o && (n = "delete.forward", a = qf(t, a, !0)), o = Math.min(o, a), l = Math.max(l, a);
    } else
      o = qf(t, o, !1), l = qf(t, l, !0);
    return o == l ? { range: s } : { changes: { from: o, to: l }, range: Pe.cursor(o) };
  });
  return r.changes.empty ? !1 : (t.dispatch(i.update(r, {
    scrollIntoView: !0,
    userEvent: n,
    effects: n == "delete.selection" ? tt.announce.of(i.phrase("Selection deleted")) : void 0
  })), !0);
}
function qf(t, e, n) {
  if (t instanceof tt)
    for (let i of t.state.facet(tt.atomicRanges).map((r) => r(t)))
      i.between(e, e, (r, s) => {
        r < e && s > e && (e = n ? s : r);
      });
  return e;
}
const bA = (t, e) => Wp(t, (n) => {
  let { state: i } = t, r = i.doc.lineAt(n), s, o;
  if (!e && n > r.from && n < r.from + 200 && !/[^ \t]/.test(s = r.text.slice(0, n - r.from))) {
    if (s[s.length - 1] == "	")
      return n - 1;
    let l = Gu(s, i.tabSize), a = l % wd(i) || wd(i);
    for (let c = 0; c < a && s[s.length - 1 - c] == " "; c++)
      n--;
    o = n;
  } else
    o = ji(r.text, n - r.from, e, e) + r.from, o == n && r.number != (e ? i.doc.lines : 1) && (o += e ? 1 : -1);
  return o;
}), W1 = (t) => bA(t, !1), _A = (t) => bA(t, !0), yA = (t, e) => Wp(t, (n) => {
  let i = n, { state: r } = t, s = r.doc.lineAt(i), o = r.charCategorizer(i);
  for (let l = null; ; ) {
    if (i == (e ? s.to : s.from)) {
      i == n && s.number != (e ? r.doc.lines : 1) && (i += e ? 1 : -1);
      break;
    }
    let a = ji(s.text, i - s.from, e) + s.from, c = s.text.slice(Math.min(i, a) - s.from, Math.max(i, a) - s.from), u = o(c);
    if (l != null && u != l)
      break;
    (c != " " || i != n) && (l = u), i = a;
  }
  return i;
}), wA = (t) => yA(t, !1), tY = (t) => yA(t, !0), vA = (t) => Wp(t, (e) => {
  let n = t.lineBlockAt(e).to;
  return e < n ? n : Math.min(t.state.doc.length, e + 1);
}), nY = (t) => Wp(t, (e) => {
  let n = t.lineBlockAt(e).from;
  return e > n ? n : Math.max(0, e - 1);
}), iY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => ({
    changes: { from: i.from, to: i.to, insert: Ht.of(["", ""]) },
    range: Pe.cursor(i.from)
  }));
  return e(t.update(n, { scrollIntoView: !0, userEvent: "input" })), !0;
}, rY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => {
    if (!i.empty || i.from == 0 || i.from == t.doc.length)
      return { range: i };
    let r = i.from, s = t.doc.lineAt(r), o = r == s.from ? r - 1 : ji(s.text, r - s.from, !1) + s.from, l = r == s.to ? r + 1 : ji(s.text, r - s.from, !0) + s.from;
    return {
      changes: { from: o, to: l, insert: t.doc.slice(r, l).append(t.doc.slice(o, r)) },
      range: Pe.cursor(l)
    };
  });
  return n.changes.empty ? !1 : (e(t.update(n, { scrollIntoView: !0, userEvent: "move.character" })), !0);
};
function qp(t) {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.from), s = t.doc.lineAt(i.to);
    if (!i.empty && i.to == s.from && (s = t.doc.lineAt(i.to - 1)), n >= r.number) {
      let o = e[e.length - 1];
      o.to = s.to, o.ranges.push(i);
    } else
      e.push({ from: r.from, to: s.to, ranges: [i] });
    n = s.number + 1;
  }
  return e;
}
function kA(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [], r = [];
  for (let s of qp(t)) {
    if (n ? s.to == t.doc.length : s.from == 0)
      continue;
    let o = t.doc.lineAt(n ? s.to + 1 : s.from - 1), l = o.length + 1;
    if (n) {
      i.push({ from: s.to, to: o.to }, { from: s.from, insert: o.text + t.lineBreak });
      for (let a of s.ranges)
        r.push(Pe.range(Math.min(t.doc.length, a.anchor + l), Math.min(t.doc.length, a.head + l)));
    } else {
      i.push({ from: o.from, to: s.from }, { from: s.to, insert: t.lineBreak + o.text });
      for (let a of s.ranges)
        r.push(Pe.range(a.anchor - l, a.head - l));
    }
  }
  return i.length ? (e(t.update({
    changes: i,
    scrollIntoView: !0,
    selection: Pe.create(r, t.selection.mainIndex),
    userEvent: "move.line"
  })), !0) : !1;
}
const sY = ({ state: t, dispatch: e }) => kA(t, e, !1), oY = ({ state: t, dispatch: e }) => kA(t, e, !0);
function CA(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [];
  for (let r of qp(t))
    n ? i.push({ from: r.from, insert: t.doc.slice(r.from, r.to) + t.lineBreak }) : i.push({ from: r.to, insert: t.lineBreak + t.doc.slice(r.from, r.to) });
  return e(t.update({ changes: i, scrollIntoView: !0, userEvent: "input.copyline" })), !0;
}
const lY = ({ state: t, dispatch: e }) => CA(t, e, !1), aY = ({ state: t, dispatch: e }) => CA(t, e, !0), cY = (t) => {
  if (t.state.readOnly)
    return !1;
  let { state: e } = t, n = e.changes(qp(e).map(({ from: r, to: s }) => (r > 0 ? r-- : s < e.doc.length && s++, { from: r, to: s }))), i = cc(e.selection, (r) => t.moveVertically(r, !0)).map(n);
  return t.dispatch({ changes: n, selection: i, scrollIntoView: !0, userEvent: "delete.line" }), !0;
};
function uY(t, e) {
  if (/\(\)|\[\]|\{\}/.test(t.sliceDoc(e - 1, e + 1)))
    return { from: e, to: e };
  let n = Pi(t).resolveInner(e), i = n.childBefore(e), r = n.childAfter(e), s;
  return i && r && i.to <= e && r.from >= e && (s = i.type.prop(Dt.closedBy)) && s.indexOf(r.name) > -1 && t.doc.lineAt(i.to).from == t.doc.lineAt(r.from).from ? { from: i.to, to: r.from } : null;
}
const fY = /* @__PURE__ */ SA(!1), hY = /* @__PURE__ */ SA(!0);
function SA(t) {
  return ({ state: e, dispatch: n }) => {
    if (e.readOnly)
      return !1;
    let i = e.changeByRange((r) => {
      let { from: s, to: o } = r, l = e.doc.lineAt(s), a = !t && s == o && uY(e, s);
      t && (s = o = (o <= l.to ? l : e.doc.lineAt(o)).to);
      let c = new Fp(e, { simulateBreak: s, simulateDoubleBreak: !!a }), u = Pb(c, s);
      for (u == null && (u = /^\s*/.exec(e.doc.lineAt(s).text)[0].length); o < l.to && /\s/.test(l.text[o - l.from]); )
        o++;
      a ? { from: s, to: o } = a : s > l.from && s < l.from + 100 && !/\S/.test(l.text.slice(0, s)) && (s = l.from);
      let f = ["", wu(e, u)];
      return a && f.push(wu(e, c.lineIndent(l.from, -1))), {
        changes: { from: s, to: o, insert: Ht.of(f) },
        range: Pe.cursor(s + 1 + f[1].length)
      };
    });
    return n(e.update(i, { scrollIntoView: !0, userEvent: "input" })), !0;
  };
}
function Bb(t, e) {
  let n = -1;
  return t.changeByRange((i) => {
    let r = [];
    for (let o = i.from; o <= i.to; ) {
      let l = t.doc.lineAt(o);
      l.number > n && (i.empty || i.to > l.from) && (e(l, r, i), n = l.number), o = l.to + 1;
    }
    let s = t.changes(r);
    return {
      changes: r,
      range: Pe.range(s.mapPos(i.anchor, 1), s.mapPos(i.head, 1))
    };
  });
}
const dY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = /* @__PURE__ */ Object.create(null), i = new Fp(t, { overrideIndentation: (s) => {
    let o = n[s];
    return o ?? -1;
  } }), r = Bb(t, (s, o, l) => {
    let a = Pb(i, s.from);
    if (a == null)
      return;
    /\S/.test(s.text) || (a = 0);
    let c = /^\s*/.exec(s.text)[0], u = wu(t, a);
    (c != u || l.from < s.from + c.length) && (n[s.from] = a, o.push({ from: s.from, to: s.from + c.length, insert: u }));
  });
  return r.changes.empty || e(t.update(r, { userEvent: "indent" })), !0;
}, EA = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Bb(t, (n, i) => {
  i.push({ from: n.from, insert: t.facet(xp) });
}), { userEvent: "input.indent" })), !0), AA = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Bb(t, (n, i) => {
  let r = /^\s*/.exec(n.text)[0];
  if (!r)
    return;
  let s = Gu(r, t.tabSize), o = 0, l = wu(t, Math.max(0, s - wd(t)));
  for (; o < r.length && o < l.length && r.charCodeAt(o) == l.charCodeAt(o); )
    o++;
  i.push({ from: n.from + o, to: n.from + r.length, insert: l.slice(o) });
}), { userEvent: "delete.dedent" })), !0), pY = [
  { key: "Ctrl-b", run: tA, shift: uA, preventDefault: !0 },
  { key: "Ctrl-f", run: nA, shift: fA },
  { key: "Ctrl-p", run: sA, shift: pA },
  { key: "Ctrl-n", run: oA, shift: gA },
  { key: "Ctrl-a", run: BG, shift: YG },
  { key: "Ctrl-e", run: xG, shift: XG },
  { key: "Ctrl-d", run: _A },
  { key: "Ctrl-h", run: W1 },
  { key: "Ctrl-k", run: vA },
  { key: "Ctrl-Alt-h", run: wA },
  { key: "Ctrl-o", run: iY },
  { key: "Ctrl-t", run: rY },
  { key: "Ctrl-v", run: H1 }
], gY = /* @__PURE__ */ [
  { key: "ArrowLeft", run: tA, shift: uA, preventDefault: !0 },
  { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: OG, shift: VG, preventDefault: !0 },
  { mac: "Cmd-ArrowLeft", run: LG, shift: KG, preventDefault: !0 },
  { key: "ArrowRight", run: nA, shift: fA, preventDefault: !0 },
  { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: TG, shift: UG, preventDefault: !0 },
  { mac: "Cmd-ArrowRight", run: jG, shift: GG, preventDefault: !0 },
  { key: "ArrowUp", run: sA, shift: pA, preventDefault: !0 },
  { mac: "Cmd-ArrowUp", run: mC, shift: _C },
  { mac: "Ctrl-ArrowUp", run: dC, shift: pC },
  { key: "ArrowDown", run: oA, shift: gA, preventDefault: !0 },
  { mac: "Cmd-ArrowDown", run: bC, shift: yC },
  { mac: "Ctrl-ArrowDown", run: H1, shift: gC },
  { key: "PageUp", run: dC, shift: pC },
  { key: "PageDown", run: H1, shift: gC },
  { key: "Home", run: NG, shift: JG, preventDefault: !0 },
  { key: "Mod-Home", run: mC, shift: _C },
  { key: "End", run: DG, shift: qG, preventDefault: !0 },
  { key: "Mod-End", run: bC, shift: yC },
  { key: "Enter", run: fY },
  { key: "Mod-a", run: QG },
  { key: "Backspace", run: W1, shift: W1 },
  { key: "Delete", run: _A },
  { key: "Mod-Backspace", mac: "Alt-Backspace", run: wA },
  { key: "Mod-Delete", mac: "Alt-Delete", run: tY },
  { mac: "Mod-Backspace", run: nY },
  { mac: "Mod-Delete", run: vA }
].concat(/* @__PURE__ */ pY.map((t) => ({ mac: t.key, run: t.run, shift: t.shift }))), mY = /* @__PURE__ */ [
  { key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: PG, shift: HG },
  { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: IG, shift: WG },
  { key: "Alt-ArrowUp", run: sY },
  { key: "Shift-Alt-ArrowUp", run: lY },
  { key: "Alt-ArrowDown", run: oY },
  { key: "Shift-Alt-ArrowDown", run: aY },
  { key: "Escape", run: eY },
  { key: "Mod-Enter", run: hY },
  { key: "Alt-l", mac: "Ctrl-l", run: ZG },
  { key: "Mod-i", run: $G, preventDefault: !0 },
  { key: "Mod-[", run: AA },
  { key: "Mod-]", run: EA },
  { key: "Mod-Alt-\\", run: dY },
  { key: "Shift-Mod-k", run: cY },
  { key: "Shift-Mod-\\", run: zG },
  { key: "Mod-/", run: oG },
  { key: "Alt-A", run: aG }
].concat(gY), bY = { key: "Tab", run: EA, shift: AA };
function rn() {
  var t = arguments[0];
  typeof t == "string" && (t = document.createElement(t));
  var e = 1, n = arguments[1];
  if (n && typeof n == "object" && n.nodeType == null && !Array.isArray(n)) {
    for (var i in n)
      if (Object.prototype.hasOwnProperty.call(n, i)) {
        var r = n[i];
        typeof r == "string" ? t.setAttribute(i, r) : r != null && (t[i] = r);
      }
    e++;
  }
  for (; e < arguments.length; e++)
    MA(t, arguments[e]);
  return t;
}
function MA(t, e) {
  if (typeof e == "string")
    t.appendChild(document.createTextNode(e));
  else if (e != null)
    if (e.nodeType != null)
      t.appendChild(e);
    else if (Array.isArray(e))
      for (var n = 0; n < e.length; n++)
        MA(t, e[n]);
    else
      throw new RangeError("Unsupported child node: " + e);
}
const wC = typeof String.prototype.normalize == "function" ? (t) => t.normalize("NFKD") : (t) => t;
class Ha {
  constructor(e, n, i = 0, r = e.length, s, o) {
    this.test = o, this.value = { from: 0, to: 0 }, this.done = !1, this.matches = [], this.buffer = "", this.bufferPos = 0, this.iter = e.iterRange(i, r), this.bufferStart = i, this.normalize = s ? (l) => s(wC(l)) : wC, this.query = this.normalize(n);
  }
  peek() {
    if (this.bufferPos == this.buffer.length) {
      if (this.bufferStart += this.buffer.length, this.iter.next(), this.iter.done)
        return -1;
      this.bufferPos = 0, this.buffer = this.iter.value;
    }
    return ki(this.buffer, this.bufferPos);
  }
  next() {
    for (; this.matches.length; )
      this.matches.pop();
    return this.nextOverlapping();
  }
  nextOverlapping() {
    for (; ; ) {
      let e = this.peek();
      if (e < 0)
        return this.done = !0, this;
      let n = mb(e), i = this.bufferStart + this.bufferPos;
      this.bufferPos += Zi(e);
      let r = this.normalize(n);
      for (let s = 0, o = i; ; s++) {
        let l = r.charCodeAt(s), a = this.match(l, o);
        if (a)
          return this.value = a, this;
        if (s == r.length - 1)
          break;
        o == i && s < n.length && n.charCodeAt(s) == l && o++;
      }
    }
  }
  match(e, n) {
    let i = null;
    for (let r = 0; r < this.matches.length; r += 2) {
      let s = this.matches[r], o = !1;
      this.query.charCodeAt(s) == e && (s == this.query.length - 1 ? i = { from: this.matches[r + 1], to: n + 1 } : (this.matches[r]++, o = !0)), o || (this.matches.splice(r, 2), r -= 2);
    }
    return this.query.charCodeAt(0) == e && (this.query.length == 1 ? i = { from: n, to: n + 1 } : this.matches.push(1, n)), i && this.test && !this.test(i.from, i.to, this.buffer, this.bufferPos) && (i = null), i;
  }
}
typeof Symbol < "u" && (Ha.prototype[Symbol.iterator] = function() {
  return this;
});
const OA = { from: -1, to: -1, match: /* @__PURE__ */ /.*/.exec("") }, xb = "gm" + (/x/.unicode == null ? "" : "u");
class TA {
  constructor(e, n, i, r = 0, s = e.length) {
    if (this.text = e, this.to = s, this.curLine = "", this.done = !1, this.value = OA, /\\[sWDnr]|\n|\r|\[\^/.test(n))
      return new RA(e, n, i, r, s);
    this.re = new RegExp(n, xb + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.iter = e.iter();
    let o = e.lineAt(r);
    this.curLineStart = o.from, this.matchPos = Ed(e, r), this.getLine(this.curLineStart);
  }
  getLine(e) {
    this.iter.next(e), this.iter.lineBreak ? this.curLine = "" : (this.curLine = this.iter.value, this.curLineStart + this.curLine.length > this.to && (this.curLine = this.curLine.slice(0, this.to - this.curLineStart)), this.iter.next());
  }
  nextLine() {
    this.curLineStart = this.curLineStart + this.curLine.length + 1, this.curLineStart > this.to ? this.curLine = "" : this.getLine(0);
  }
  next() {
    for (let e = this.matchPos - this.curLineStart; ; ) {
      this.re.lastIndex = e;
      let n = this.matchPos <= this.to && this.re.exec(this.curLine);
      if (n) {
        let i = this.curLineStart + n.index, r = i + n[0].length;
        if (this.matchPos = Ed(this.text, r + (i == r ? 1 : 0)), i == this.curLineStart + this.curLine.length && this.nextLine(), (i < r || i > this.value.to) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this;
        e = this.matchPos - this.curLineStart;
      } else if (this.curLineStart + this.curLine.length < this.to)
        this.nextLine(), e = 0;
      else
        return this.done = !0, this;
    }
  }
}
const sm = /* @__PURE__ */ new WeakMap();
class wa {
  constructor(e, n) {
    this.from = e, this.text = n;
  }
  get to() {
    return this.from + this.text.length;
  }
  static get(e, n, i) {
    let r = sm.get(e);
    if (!r || r.from >= i || r.to <= n) {
      let l = new wa(n, e.sliceString(n, i));
      return sm.set(e, l), l;
    }
    if (r.from == n && r.to == i)
      return r;
    let { text: s, from: o } = r;
    return o > n && (s = e.sliceString(n, o) + s, o = n), r.to < i && (s += e.sliceString(r.to, i)), sm.set(e, new wa(o, s)), new wa(n, s.slice(n - o, i - o));
  }
}
class RA {
  constructor(e, n, i, r, s) {
    this.text = e, this.to = s, this.done = !1, this.value = OA, this.matchPos = Ed(e, r), this.re = new RegExp(n, xb + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.flat = wa.get(e, r, this.chunkEnd(r + 5e3));
  }
  chunkEnd(e) {
    return e >= this.to ? this.to : this.text.lineAt(e).to;
  }
  next() {
    for (; ; ) {
      let e = this.re.lastIndex = this.matchPos - this.flat.from, n = this.re.exec(this.flat.text);
      if (n && !n[0] && n.index == e && (this.re.lastIndex = e + 1, n = this.re.exec(this.flat.text)), n) {
        let i = this.flat.from + n.index, r = i + n[0].length;
        if ((this.flat.to >= this.to || n.index + n[0].length <= this.flat.text.length - 10) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this.matchPos = Ed(this.text, r + (i == r ? 1 : 0)), this;
      }
      if (this.flat.to == this.to)
        return this.done = !0, this;
      this.flat = wa.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));
    }
  }
}
typeof Symbol < "u" && (TA.prototype[Symbol.iterator] = RA.prototype[Symbol.iterator] = function() {
  return this;
});
function _Y(t) {
  try {
    return new RegExp(t, xb), !0;
  } catch {
    return !1;
  }
}
function Ed(t, e) {
  if (e >= t.length)
    return e;
  let n = t.lineAt(e), i;
  for (; e < n.to && (i = n.text.charCodeAt(e - n.from)) >= 56320 && i < 57344; )
    e++;
  return e;
}
function q1(t) {
  let e = rn("input", { class: "cm-textfield", name: "line" }), n = rn("form", {
    class: "cm-gotoLine",
    onkeydown: (r) => {
      r.keyCode == 27 ? (r.preventDefault(), t.dispatch({ effects: Ad.of(!1) }), t.focus()) : r.keyCode == 13 && (r.preventDefault(), i());
    },
    onsubmit: (r) => {
      r.preventDefault(), i();
    }
  }, rn("label", t.state.phrase("Go to line"), ": ", e), " ", rn("button", { class: "cm-button", type: "submit" }, t.state.phrase("go")));
  function i() {
    let r = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);
    if (!r)
      return;
    let { state: s } = t, o = s.doc.lineAt(s.selection.main.head), [, l, a, c, u] = r, f = c ? +c.slice(1) : 0, h = a ? +a : o.number;
    if (a && u) {
      let p = h / 100;
      l && (p = p * (l == "-" ? -1 : 1) + o.number / s.doc.lines), h = Math.round(s.doc.lines * p);
    } else
      a && l && (h = h * (l == "-" ? -1 : 1) + o.number);
    let d = s.doc.line(Math.max(1, Math.min(s.doc.lines, h)));
    t.dispatch({
      effects: Ad.of(!1),
      selection: Pe.cursor(d.from + Math.max(0, Math.min(f, d.length))),
      scrollIntoView: !0
    }), t.focus();
  }
  return { dom: n };
}
const Ad = /* @__PURE__ */ St.define(), vC = /* @__PURE__ */ ri.define({
  create() {
    return !0;
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Ad) && (t = n.value);
    return t;
  },
  provide: (t) => _u.from(t, (e) => e ? q1 : null)
}), yY = (t) => {
  let e = bu(t, q1);
  if (!e) {
    let n = [Ad.of(!0)];
    t.state.field(vC, !1) == null && n.push(St.appendConfig.of([vC, wY])), t.dispatch({ effects: n }), e = bu(t, q1);
  }
  return e && e.dom.querySelector("input").focus(), !0;
}, wY = /* @__PURE__ */ tt.baseTheme({
  ".cm-panel.cm-gotoLine": {
    padding: "2px 6px 4px",
    "& label": { fontSize: "80%" }
  }
}), vY = {
  highlightWordAroundCursor: !1,
  minSelectionLength: 1,
  maxMatches: 100,
  wholeWords: !1
}, PA = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, vY, {
      highlightWordAroundCursor: (e, n) => e || n,
      minSelectionLength: Math.min,
      maxMatches: Math.min
    });
  }
});
function kY(t) {
  let e = [MY, AY];
  return t && e.push(PA.of(t)), e;
}
const CY = /* @__PURE__ */ gt.mark({ class: "cm-selectionMatch" }), SY = /* @__PURE__ */ gt.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });
function kC(t, e, n, i) {
  return (n == 0 || t(e.sliceDoc(n - 1, n)) != _n.Word) && (i == e.doc.length || t(e.sliceDoc(i, i + 1)) != _n.Word);
}
function EY(t, e, n, i) {
  return t(e.sliceDoc(n, n + 1)) == _n.Word && t(e.sliceDoc(i - 1, i)) == _n.Word;
}
const AY = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.selectionSet || t.docChanged || t.viewportChanged) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = t.state.facet(PA), { state: n } = t, i = n.selection;
    if (i.ranges.length > 1)
      return gt.none;
    let r = i.main, s, o = null;
    if (r.empty) {
      if (!e.highlightWordAroundCursor)
        return gt.none;
      let a = n.wordAt(r.head);
      if (!a)
        return gt.none;
      o = n.charCategorizer(r.head), s = n.sliceDoc(a.from, a.to);
    } else {
      let a = r.to - r.from;
      if (a < e.minSelectionLength || a > 200)
        return gt.none;
      if (e.wholeWords) {
        if (s = n.sliceDoc(r.from, r.to), o = n.charCategorizer(r.head), !(kC(o, n, r.from, r.to) && EY(o, n, r.from, r.to)))
          return gt.none;
      } else if (s = n.sliceDoc(r.from, r.to).trim(), !s)
        return gt.none;
    }
    let l = [];
    for (let a of t.visibleRanges) {
      let c = new Ha(n.doc, s, a.from, a.to);
      for (; !c.next().done; ) {
        let { from: u, to: f } = c.value;
        if ((!o || kC(o, n, u, f)) && (r.empty && u <= r.from && f >= r.to ? l.push(SY.range(u, f)) : (u >= r.to || f <= r.from) && l.push(CY.range(u, f)), l.length > e.maxMatches))
          return gt.none;
      }
    }
    return gt.set(l);
  }
}, {
  decorations: (t) => t.decorations
}), MY = /* @__PURE__ */ tt.baseTheme({
  ".cm-selectionMatch": { backgroundColor: "#99ff7780" },
  ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" }
}), OY = ({ state: t, dispatch: e }) => {
  let { selection: n } = t, i = Pe.create(n.ranges.map((r) => t.wordAt(r.head) || Pe.cursor(r.head)), n.mainIndex);
  return i.eq(n) ? !1 : (e(t.update({ selection: i })), !0);
};
function TY(t, e) {
  let { main: n, ranges: i } = t.selection, r = t.wordAt(n.head), s = r && r.from == n.from && r.to == n.to;
  for (let o = !1, l = new Ha(t.doc, e, i[i.length - 1].to); ; )
    if (l.next(), l.done) {
      if (o)
        return null;
      l = new Ha(t.doc, e, 0, Math.max(0, i[i.length - 1].from - 1)), o = !0;
    } else {
      if (o && i.some((a) => a.from == l.value.from))
        continue;
      if (s) {
        let a = t.wordAt(l.value.from);
        if (!a || a.from != l.value.from || a.to != l.value.to)
          continue;
      }
      return l.value;
    }
}
const RY = ({ state: t, dispatch: e }) => {
  let { ranges: n } = t.selection;
  if (n.some((s) => s.from === s.to))
    return OY({ state: t, dispatch: e });
  let i = t.sliceDoc(n[0].from, n[0].to);
  if (t.selection.ranges.some((s) => t.sliceDoc(s.from, s.to) != i))
    return !1;
  let r = TY(t, i);
  return r ? (e(t.update({
    selection: t.selection.addRange(Pe.range(r.from, r.to), !1),
    effects: tt.scrollIntoView(r.to)
  })), !0) : !1;
}, Jp = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      top: !1,
      caseSensitive: !1,
      literal: !1,
      wholeWord: !1,
      createPanel: (e) => new HY(e)
    });
  }
});
function PY(t) {
  return t ? [Jp.of(t), K1] : K1;
}
class IA {
  constructor(e) {
    this.search = e.search, this.caseSensitive = !!e.caseSensitive, this.literal = !!e.literal, this.regexp = !!e.regexp, this.replace = e.replace || "", this.valid = !!this.search && (!this.regexp || _Y(this.search)), this.unquoted = this.unquote(this.search), this.wholeWord = !!e.wholeWord;
  }
  unquote(e) {
    return this.literal ? e : e.replace(/\\([nrt\\])/g, (n, i) => i == "n" ? `
` : i == "r" ? "\r" : i == "t" ? "	" : "\\");
  }
  eq(e) {
    return this.search == e.search && this.replace == e.replace && this.caseSensitive == e.caseSensitive && this.regexp == e.regexp && this.wholeWord == e.wholeWord;
  }
  create() {
    return this.regexp ? new LY(this) : new DY(this);
  }
  getCursor(e, n = 0, i) {
    let r = e.doc ? e : Rt.create({ doc: e });
    return i == null && (i = r.doc.length), this.regexp ? oa(this, r, n, i) : sa(this, r, n, i);
  }
}
class DA {
  constructor(e) {
    this.spec = e;
  }
}
function sa(t, e, n, i) {
  return new Ha(e.doc, t.unquoted, n, i, t.caseSensitive ? void 0 : (r) => r.toLowerCase(), t.wholeWord ? IY(e.doc, e.charCategorizer(e.selection.main.head)) : void 0);
}
function IY(t, e) {
  return (n, i, r, s) => ((s > n || s + r.length < i) && (s = Math.max(0, n - 2), r = t.sliceString(s, Math.min(t.length, i + 2))), (e(Md(r, n - s)) != _n.Word || e(Od(r, n - s)) != _n.Word) && (e(Od(r, i - s)) != _n.Word || e(Md(r, i - s)) != _n.Word));
}
class DY extends DA {
  constructor(e) {
    super(e);
  }
  nextMatch(e, n, i) {
    let r = sa(this.spec, e, i, e.doc.length).nextOverlapping();
    return r.done && (r = sa(this.spec, e, 0, n).nextOverlapping()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = i; ; ) {
      let s = Math.max(n, r - 1e4 - this.spec.unquoted.length), o = sa(this.spec, e, s, r), l = null;
      for (; !o.nextOverlapping().done; )
        l = o.value;
      if (l)
        return l;
      if (s == n)
        return null;
      r -= 1e4;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace);
  }
  matchAll(e, n) {
    let i = sa(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let s = sa(this.spec, e, Math.max(0, n - this.spec.unquoted.length), Math.min(i + this.spec.unquoted.length, e.doc.length));
    for (; !s.next().done; )
      r(s.value.from, s.value.to);
  }
}
function oa(t, e, n, i) {
  return new TA(e.doc, t.search, {
    ignoreCase: !t.caseSensitive,
    test: t.wholeWord ? NY(e.charCategorizer(e.selection.main.head)) : void 0
  }, n, i);
}
function Md(t, e) {
  return t.slice(ji(t, e, !1), e);
}
function Od(t, e) {
  return t.slice(e, ji(t, e));
}
function NY(t) {
  return (e, n, i) => !i[0].length || (t(Md(i.input, i.index)) != _n.Word || t(Od(i.input, i.index)) != _n.Word) && (t(Od(i.input, i.index + i[0].length)) != _n.Word || t(Md(i.input, i.index + i[0].length)) != _n.Word);
}
class LY extends DA {
  nextMatch(e, n, i) {
    let r = oa(this.spec, e, i, e.doc.length).next();
    return r.done && (r = oa(this.spec, e, 0, n).next()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = 1; ; r++) {
      let s = Math.max(n, i - r * 1e4), o = oa(this.spec, e, s, i), l = null;
      for (; !o.next().done; )
        l = o.value;
      if (l && (s == n || l.from > s + 10))
        return l;
      if (s == n)
        return null;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g, (n, i) => i == "$" ? "$" : i == "&" ? e.match[0] : i != "0" && +i < e.match.length ? e.match[i] : n));
  }
  matchAll(e, n) {
    let i = oa(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let s = oa(this.spec, e, Math.max(0, n - 250), Math.min(i + 250, e.doc.length));
    for (; !s.next().done; )
      r(s.value.from, s.value.to);
  }
}
const vu = /* @__PURE__ */ St.define(), Fb = /* @__PURE__ */ St.define(), Ro = /* @__PURE__ */ ri.define({
  create(t) {
    return new om(J1(t).create(), null);
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(vu) ? t = new om(n.value.create(), t.panel) : n.is(Fb) && (t = new om(t.query, n.value ? zb : null));
    return t;
  },
  provide: (t) => _u.from(t, (e) => e.panel)
});
class om {
  constructor(e, n) {
    this.query = e, this.panel = n;
  }
}
const jY = /* @__PURE__ */ gt.mark({ class: "cm-searchMatch" }), BY = /* @__PURE__ */ gt.mark({ class: "cm-searchMatch cm-searchMatch-selected" }), xY = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.decorations = this.highlight(t.state.field(Ro));
  }
  update(t) {
    let e = t.state.field(Ro);
    (e != t.startState.field(Ro) || t.docChanged || t.selectionSet || t.viewportChanged) && (this.decorations = this.highlight(e));
  }
  highlight({ query: t, panel: e }) {
    if (!e || !t.spec.valid)
      return gt.none;
    let { view: n } = this, i = new zo();
    for (let r = 0, s = n.visibleRanges, o = s.length; r < o; r++) {
      let { from: l, to: a } = s[r];
      for (; r < o - 1 && a > s[r + 1].from - 2 * 250; )
        a = s[++r].to;
      t.highlight(n.state, l, a, (c, u) => {
        let f = n.state.selection.ranges.some((h) => h.from == c && h.to == u);
        i.add(c, u, f ? BY : jY);
      });
    }
    return i.finish();
  }
}, {
  decorations: (t) => t.decorations
});
function $u(t) {
  return (e) => {
    let n = e.state.field(Ro, !1);
    return n && n.query.spec.valid ? t(e, n) : Vb(e);
  };
}
const Td = /* @__PURE__ */ $u((t, { query: e }) => {
  let { to: n } = t.state.selection.main, i = e.nextMatch(t.state, n, n);
  return i ? (t.dispatch({
    selection: { anchor: i.from, head: i.to },
    scrollIntoView: !0,
    effects: Hb(t, i),
    userEvent: "select.search"
  }), !0) : !1;
}), Rd = /* @__PURE__ */ $u((t, { query: e }) => {
  let { state: n } = t, { from: i } = n.selection.main, r = e.prevMatch(n, i, i);
  return r ? (t.dispatch({
    selection: { anchor: r.from, head: r.to },
    scrollIntoView: !0,
    effects: Hb(t, r),
    userEvent: "select.search"
  }), !0) : !1;
}), FY = /* @__PURE__ */ $u((t, { query: e }) => {
  let n = e.matchAll(t.state, 1e3);
  return !n || !n.length ? !1 : (t.dispatch({
    selection: Pe.create(n.map((i) => Pe.range(i.from, i.to))),
    userEvent: "select.search.matches"
  }), !0);
}), zY = ({ state: t, dispatch: e }) => {
  let n = t.selection;
  if (n.ranges.length > 1 || n.main.empty)
    return !1;
  let { from: i, to: r } = n.main, s = [], o = 0;
  for (let l = new Ha(t.doc, t.sliceDoc(i, r)); !l.next().done; ) {
    if (s.length > 1e3)
      return !1;
    l.value.from == i && (o = s.length), s.push(Pe.range(l.value.from, l.value.to));
  }
  return e(t.update({
    selection: Pe.create(s, o),
    userEvent: "select.search.matches"
  })), !0;
}, CC = /* @__PURE__ */ $u((t, { query: e }) => {
  let { state: n } = t, { from: i, to: r } = n.selection.main;
  if (n.readOnly)
    return !1;
  let s = e.nextMatch(n, i, i);
  if (!s)
    return !1;
  let o = [], l, a, c = [];
  if (s.from == i && s.to == r && (a = n.toText(e.getReplacement(s)), o.push({ from: s.from, to: s.to, insert: a }), s = e.nextMatch(n, s.from, s.to), c.push(tt.announce.of(n.phrase("replaced match on line $", n.doc.lineAt(i).number) + "."))), s) {
    let u = o.length == 0 || o[0].from >= s.to ? 0 : s.to - s.from - a.length;
    l = { anchor: s.from - u, head: s.to - u }, c.push(Hb(t, s));
  }
  return t.dispatch({
    changes: o,
    selection: l,
    scrollIntoView: !!l,
    effects: c,
    userEvent: "input.replace"
  }), !0;
}), VY = /* @__PURE__ */ $u((t, { query: e }) => {
  if (t.state.readOnly)
    return !1;
  let n = e.matchAll(t.state, 1e9).map((r) => {
    let { from: s, to: o } = r;
    return { from: s, to: o, insert: e.getReplacement(r) };
  });
  if (!n.length)
    return !1;
  let i = t.state.phrase("replaced $ matches", n.length) + ".";
  return t.dispatch({
    changes: n,
    effects: tt.announce.of(i),
    userEvent: "input.replace.all"
  }), !0;
});
function zb(t) {
  return t.state.facet(Jp).createPanel(t);
}
function J1(t, e) {
  var n, i, r, s;
  let o = t.selection.main, l = o.empty || o.to > o.from + 100 ? "" : t.sliceDoc(o.from, o.to);
  if (e && !l)
    return e;
  let a = t.facet(Jp);
  return new IA({
    search: ((n = e == null ? void 0 : e.literal) !== null && n !== void 0 ? n : a.literal) ? l : l.replace(/\n/g, "\\n"),
    caseSensitive: (i = e == null ? void 0 : e.caseSensitive) !== null && i !== void 0 ? i : a.caseSensitive,
    literal: (r = e == null ? void 0 : e.literal) !== null && r !== void 0 ? r : a.literal,
    wholeWord: (s = e == null ? void 0 : e.wholeWord) !== null && s !== void 0 ? s : a.wholeWord
  });
}
const Vb = (t) => {
  let e = t.state.field(Ro, !1);
  if (e && e.panel) {
    let n = bu(t, zb);
    if (!n)
      return !1;
    let i = n.dom.querySelector("[main-field]");
    if (i && i != t.root.activeElement) {
      let r = J1(t.state, e.query.spec);
      r.valid && t.dispatch({ effects: vu.of(r) }), i.focus(), i.select();
    }
  } else
    t.dispatch({ effects: [
      Fb.of(!0),
      e ? vu.of(J1(t.state, e.query.spec)) : St.appendConfig.of(K1)
    ] });
  return !0;
}, Ub = (t) => {
  let e = t.state.field(Ro, !1);
  if (!e || !e.panel)
    return !1;
  let n = bu(t, zb);
  return n && n.dom.contains(t.root.activeElement) && t.focus(), t.dispatch({ effects: Fb.of(!1) }), !0;
}, UY = [
  { key: "Mod-f", run: Vb, scope: "editor search-panel" },
  { key: "F3", run: Td, shift: Rd, scope: "editor search-panel", preventDefault: !0 },
  { key: "Mod-g", run: Td, shift: Rd, scope: "editor search-panel", preventDefault: !0 },
  { key: "Escape", run: Ub, scope: "editor search-panel" },
  { key: "Mod-Shift-l", run: zY },
  { key: "Alt-g", run: yY },
  { key: "Mod-d", run: RY, preventDefault: !0 }
];
class HY {
  constructor(e) {
    this.view = e;
    let n = this.query = e.state.field(Ro).query.spec;
    this.commit = this.commit.bind(this), this.searchField = rn("input", {
      value: n.search,
      placeholder: Yi(e, "Find"),
      "aria-label": Yi(e, "Find"),
      class: "cm-textfield",
      name: "search",
      form: "",
      "main-field": "true",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.replaceField = rn("input", {
      value: n.replace,
      placeholder: Yi(e, "Replace"),
      "aria-label": Yi(e, "Replace"),
      class: "cm-textfield",
      name: "replace",
      form: "",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.caseField = rn("input", {
      type: "checkbox",
      name: "case",
      form: "",
      checked: n.caseSensitive,
      onchange: this.commit
    }), this.reField = rn("input", {
      type: "checkbox",
      name: "re",
      form: "",
      checked: n.regexp,
      onchange: this.commit
    }), this.wordField = rn("input", {
      type: "checkbox",
      name: "word",
      form: "",
      checked: n.wholeWord,
      onchange: this.commit
    });
    function i(r, s, o) {
      return rn("button", { class: "cm-button", name: r, onclick: s, type: "button" }, o);
    }
    this.dom = rn("div", { onkeydown: (r) => this.keydown(r), class: "cm-search" }, [
      this.searchField,
      i("next", () => Td(e), [Yi(e, "next")]),
      i("prev", () => Rd(e), [Yi(e, "previous")]),
      i("select", () => FY(e), [Yi(e, "all")]),
      rn("label", null, [this.caseField, Yi(e, "match case")]),
      rn("label", null, [this.reField, Yi(e, "regexp")]),
      rn("label", null, [this.wordField, Yi(e, "by word")]),
      ...e.state.readOnly ? [] : [
        rn("br"),
        this.replaceField,
        i("replace", () => CC(e), [Yi(e, "replace")]),
        i("replaceAll", () => VY(e), [Yi(e, "replace all")])
      ],
      rn("button", {
        name: "close",
        onclick: () => Ub(e),
        "aria-label": Yi(e, "close"),
        type: "button"
      }, ["×"])
    ]);
  }
  commit() {
    let e = new IA({
      search: this.searchField.value,
      caseSensitive: this.caseField.checked,
      regexp: this.reField.checked,
      wholeWord: this.wordField.checked,
      replace: this.replaceField.value
    });
    e.eq(this.query) || (this.query = e, this.view.dispatch({ effects: vu.of(e) }));
  }
  keydown(e) {
    oJ(this.view, e, "search-panel") ? e.preventDefault() : e.keyCode == 13 && e.target == this.searchField ? (e.preventDefault(), (e.shiftKey ? Rd : Td)(this.view)) : e.keyCode == 13 && e.target == this.replaceField && (e.preventDefault(), CC(this.view));
  }
  update(e) {
    for (let n of e.transactions)
      for (let i of n.effects)
        i.is(vu) && !i.value.eq(this.query) && this.setQuery(i.value);
  }
  setQuery(e) {
    this.query = e, this.searchField.value = e.search, this.replaceField.value = e.replace, this.caseField.checked = e.caseSensitive, this.reField.checked = e.regexp, this.wordField.checked = e.wholeWord;
  }
  mount() {
    this.searchField.select();
  }
  get pos() {
    return 80;
  }
  get top() {
    return this.view.state.facet(Jp).top;
  }
}
function Yi(t, e) {
  return t.state.phrase(e);
}
const Jf = 30, Kf = /[\s\.,:;?!]/;
function Hb(t, { from: e, to: n }) {
  let i = t.state.doc.lineAt(e), r = t.state.doc.lineAt(n).to, s = Math.max(i.from, e - Jf), o = Math.min(r, n + Jf), l = t.state.sliceDoc(s, o);
  if (s != i.from) {
    for (let a = 0; a < Jf; a++)
      if (!Kf.test(l[a + 1]) && Kf.test(l[a])) {
        l = l.slice(a);
        break;
      }
  }
  if (o != r) {
    for (let a = l.length - 1; a > l.length - Jf; a--)
      if (!Kf.test(l[a - 1]) && Kf.test(l[a])) {
        l = l.slice(0, a);
        break;
      }
  }
  return tt.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`);
}
const WY = /* @__PURE__ */ tt.baseTheme({
  ".cm-panel.cm-search": {
    padding: "2px 6px 4px",
    position: "relative",
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    },
    "& input, & button, & label": {
      margin: ".2em .6em .2em 0"
    },
    "& input[type=checkbox]": {
      marginRight: ".2em"
    },
    "& label": {
      fontSize: "80%",
      whiteSpace: "pre"
    }
  },
  "&light .cm-searchMatch": { backgroundColor: "#ffff0054" },
  "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" },
  "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" },
  "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" }
}), K1 = [
  Ro,
  /* @__PURE__ */ ac.lowest(xY),
  WY
];
class NA {
  constructor(e, n, i) {
    this.state = e, this.pos = n, this.explicit = i, this.abortListeners = [];
  }
  tokenBefore(e) {
    let n = Pi(this.state).resolveInner(this.pos, -1);
    for (; n && e.indexOf(n.name) < 0; )
      n = n.parent;
    return n ? {
      from: n.from,
      to: this.pos,
      text: this.state.sliceDoc(n.from, this.pos),
      type: n.type
    } : null;
  }
  matchBefore(e) {
    let n = this.state.doc.lineAt(this.pos), i = Math.max(n.from, this.pos - 250), r = n.text.slice(i - n.from, this.pos - n.from), s = r.search(LA(e, !1));
    return s < 0 ? null : { from: i + s, to: this.pos, text: r.slice(s) };
  }
  get aborted() {
    return this.abortListeners == null;
  }
  addEventListener(e, n) {
    e == "abort" && this.abortListeners && this.abortListeners.push(n);
  }
}
function SC(t) {
  let e = Object.keys(t).join(""), n = /\w/.test(e);
  return n && (e = e.replace(/\w/g, "")), `[${n ? "\\w" : ""}${e.replace(/[^\w\s]/g, "\\$&")}]`;
}
function qY(t) {
  let e = /* @__PURE__ */ Object.create(null), n = /* @__PURE__ */ Object.create(null);
  for (let { label: r } of t) {
    e[r[0]] = !0;
    for (let s = 1; s < r.length; s++)
      n[r[s]] = !0;
  }
  let i = SC(e) + SC(n) + "*$";
  return [new RegExp("^" + i), new RegExp(i)];
}
function JY(t) {
  let e = t.map((r) => typeof r == "string" ? { label: r } : r), [n, i] = e.every((r) => /^\w+$/.test(r.label)) ? [/\w*$/, /\w+$/] : qY(e);
  return (r) => {
    let s = r.matchBefore(i);
    return s || r.explicit ? { from: s ? s.from : r.pos, options: e, validFor: n } : null;
  };
}
class EC {
  constructor(e, n, i) {
    this.completion = e, this.source = n, this.match = i;
  }
}
function Po(t) {
  return t.selection.main.head;
}
function LA(t, e) {
  var n;
  let { source: i } = t, r = e && i[0] != "^", s = i[i.length - 1] != "$";
  return !r && !s ? t : new RegExp(`${r ? "^" : ""}(?:${i})${s ? "$" : ""}`, (n = t.flags) !== null && n !== void 0 ? n : t.ignoreCase ? "i" : "");
}
const KY = /* @__PURE__ */ Zo.define();
function GY(t, e, n, i) {
  return Object.assign(Object.assign({}, t.changeByRange((r) => {
    if (r == t.selection.main)
      return {
        changes: { from: n, to: i, insert: e },
        range: Pe.cursor(n + e.length)
      };
    let s = i - n;
    return !r.empty || s && t.sliceDoc(r.from - s, r.from) != t.sliceDoc(n, i) ? { range: r } : {
      changes: { from: r.from - s, to: r.from, insert: e },
      range: Pe.cursor(r.from - s + e.length)
    };
  })), { userEvent: "input.complete" });
}
function jA(t, e) {
  const n = e.completion.apply || e.completion.label;
  let i = e.source;
  typeof n == "string" ? t.dispatch(Object.assign(Object.assign({}, GY(t.state, n, i.from, i.to)), { annotations: KY.of(e.completion) })) : n(t, e.completion, i.from, i.to);
}
const AC = /* @__PURE__ */ new WeakMap();
function YY(t) {
  if (!Array.isArray(t))
    return t;
  let e = AC.get(t);
  return e || AC.set(t, e = JY(t)), e;
}
class XY {
  constructor(e) {
    this.pattern = e, this.chars = [], this.folded = [], this.any = [], this.precise = [], this.byWord = [];
    for (let n = 0; n < e.length; ) {
      let i = ki(e, n), r = Zi(i);
      this.chars.push(i);
      let s = e.slice(n, n + r), o = s.toUpperCase();
      this.folded.push(ki(o == s ? s.toLowerCase() : o, 0)), n += r;
    }
    this.astral = e.length != this.chars.length;
  }
  match(e) {
    if (this.pattern.length == 0)
      return [0];
    if (e.length < this.pattern.length)
      return null;
    let { chars: n, folded: i, any: r, precise: s, byWord: o } = this;
    if (n.length == 1) {
      let C = ki(e, 0);
      return C == n[0] ? [0, 0, Zi(C)] : C == i[0] ? [-200, 0, Zi(C)] : null;
    }
    let l = e.indexOf(this.pattern);
    if (l == 0)
      return [0, 0, this.pattern.length];
    let a = n.length, c = 0;
    if (l < 0) {
      for (let C = 0, v = Math.min(e.length, 200); C < v && c < a; ) {
        let k = ki(e, C);
        (k == n[c] || k == i[c]) && (r[c++] = C), C += Zi(k);
      }
      if (c < a)
        return null;
    }
    let u = 0, f = 0, h = !1, d = 0, p = -1, g = -1, _ = /[a-z]/.test(e), m = !0;
    for (let C = 0, v = Math.min(e.length, 200), k = 0; C < v && f < a; ) {
      let S = ki(e, C);
      l < 0 && (u < a && S == n[u] && (s[u++] = C), d < a && (S == n[d] || S == i[d] ? (d == 0 && (p = C), g = C + 1, d++) : d = 0));
      let O, w = S < 255 ? S >= 48 && S <= 57 || S >= 97 && S <= 122 ? 2 : S >= 65 && S <= 90 ? 1 : 0 : (O = mb(S)) != O.toLowerCase() ? 1 : O != O.toUpperCase() ? 2 : 0;
      (!C || w == 1 && _ || k == 0 && w != 0) && (n[f] == S || i[f] == S && (h = !0) ? o[f++] = C : o.length && (m = !1)), k = w, C += Zi(S);
    }
    return f == a && o[0] == 0 && m ? this.result(-100 + (h ? -200 : 0), o, e) : d == a && p == 0 ? [-200 - e.length, 0, g] : l > -1 ? [-700 - e.length, l, l + this.pattern.length] : d == a ? [-200 + -700 - e.length, p, g] : f == a ? this.result(-100 + (h ? -200 : 0) + -700 + (m ? 0 : -1100), o, e) : n.length == 2 ? null : this.result((r[0] ? -700 : 0) + -200 + -1100, r, e);
  }
  result(e, n, i) {
    let r = [e - i.length], s = 1;
    for (let o of n) {
      let l = o + (this.astral ? Zi(ki(i, o)) : 1);
      s > 1 && r[s - 1] == o ? r[s - 1] = l : (r[s++] = o, r[s++] = l);
    }
    return r;
  }
}
const vr = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      activateOnTyping: !0,
      selectOnOpen: !0,
      override: null,
      closeOnBlur: !0,
      maxRenderedOptions: 100,
      defaultKeymap: !0,
      tooltipClass: () => "",
      optionClass: () => "",
      aboveCursor: !1,
      icons: !0,
      addToOptions: [],
      compareCompletions: (e, n) => e.label.localeCompare(n.label),
      interactionDelay: 75
    }, {
      defaultKeymap: (e, n) => e && n,
      closeOnBlur: (e, n) => e && n,
      icons: (e, n) => e && n,
      tooltipClass: (e, n) => (i) => MC(e(i), n(i)),
      optionClass: (e, n) => (i) => MC(e(i), n(i)),
      addToOptions: (e, n) => e.concat(n)
    });
  }
});
function MC(t, e) {
  return t ? e ? t + " " + e : t : e;
}
function QY(t) {
  let e = t.addToOptions.slice();
  return t.icons && e.push({
    render(n) {
      let i = document.createElement("div");
      return i.classList.add("cm-completionIcon"), n.type && i.classList.add(...n.type.split(/\s+/g).map((r) => "cm-completionIcon-" + r)), i.setAttribute("aria-hidden", "true"), i;
    },
    position: 20
  }), e.push({
    render(n, i, r) {
      let s = document.createElement("span");
      s.className = "cm-completionLabel";
      let { label: o } = n, l = 0;
      for (let a = 1; a < r.length; ) {
        let c = r[a++], u = r[a++];
        c > l && s.appendChild(document.createTextNode(o.slice(l, c)));
        let f = s.appendChild(document.createElement("span"));
        f.appendChild(document.createTextNode(o.slice(c, u))), f.className = "cm-completionMatchedText", l = u;
      }
      return l < o.length && s.appendChild(document.createTextNode(o.slice(l))), s;
    },
    position: 50
  }, {
    render(n) {
      if (!n.detail)
        return null;
      let i = document.createElement("span");
      return i.className = "cm-completionDetail", i.textContent = n.detail, i;
    },
    position: 80
  }), e.sort((n, i) => n.position - i.position).map((n) => n.render);
}
function OC(t, e, n) {
  if (t <= n)
    return { from: 0, to: t };
  if (e < 0 && (e = 0), e <= t >> 1) {
    let r = Math.floor(e / n);
    return { from: r * n, to: (r + 1) * n };
  }
  let i = Math.floor((t - e) / n);
  return { from: t - (i + 1) * n, to: t - i * n };
}
class ZY {
  constructor(e, n) {
    this.view = e, this.stateField = n, this.info = null, this.placeInfo = {
      read: () => this.measureInfo(),
      write: (l) => this.positionInfo(l),
      key: this
    }, this.space = null, this.currentClass = "";
    let i = e.state.field(n), { options: r, selected: s } = i.open, o = e.state.facet(vr);
    this.optionContent = QY(o), this.optionClass = o.optionClass, this.tooltipClass = o.tooltipClass, this.range = OC(r.length, s, o.maxRenderedOptions), this.dom = document.createElement("div"), this.dom.className = "cm-tooltip-autocomplete", this.updateTooltipClass(e.state), this.dom.addEventListener("mousedown", (l) => {
      for (let a = l.target, c; a && a != this.dom; a = a.parentNode)
        if (a.nodeName == "LI" && (c = /-(\d+)$/.exec(a.id)) && +c[1] < r.length) {
          jA(e, r[+c[1]]), l.preventDefault();
          return;
        }
    }), this.list = this.dom.appendChild(this.createListBox(r, i.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    });
  }
  mount() {
    this.updateSel();
  }
  update(e) {
    var n, i, r;
    let s = e.state.field(this.stateField), o = e.startState.field(this.stateField);
    this.updateTooltipClass(e.state), s != o && (this.updateSel(), ((n = s.open) === null || n === void 0 ? void 0 : n.disabled) != ((i = o.open) === null || i === void 0 ? void 0 : i.disabled) && this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!(!((r = s.open) === null || r === void 0) && r.disabled)));
  }
  updateTooltipClass(e) {
    let n = this.tooltipClass(e);
    if (n != this.currentClass) {
      for (let i of this.currentClass.split(" "))
        i && this.dom.classList.remove(i);
      for (let i of n.split(" "))
        i && this.dom.classList.add(i);
      this.currentClass = n;
    }
  }
  positioned(e) {
    this.space = e, this.info && this.view.requestMeasure(this.placeInfo);
  }
  updateSel() {
    let e = this.view.state.field(this.stateField), n = e.open;
    if ((n.selected > -1 && n.selected < this.range.from || n.selected >= this.range.to) && (this.range = OC(n.options.length, n.selected, this.view.state.facet(vr).maxRenderedOptions), this.list.remove(), this.list = this.dom.appendChild(this.createListBox(n.options, e.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    })), this.updateSelectedOption(n.selected)) {
      this.info && (this.info.remove(), this.info = null);
      let { completion: i } = n.options[n.selected], { info: r } = i;
      if (!r)
        return;
      let s = typeof r == "string" ? document.createTextNode(r) : r(i);
      if (!s)
        return;
      "then" in s ? s.then((o) => {
        o && this.view.state.field(this.stateField, !1) == e && this.addInfoPane(o);
      }).catch((o) => ir(this.view.state, o, "completion info")) : this.addInfoPane(s);
    }
  }
  addInfoPane(e) {
    let n = this.info = document.createElement("div");
    n.className = "cm-tooltip cm-completionInfo", n.appendChild(e), this.dom.appendChild(n), this.view.requestMeasure(this.placeInfo);
  }
  updateSelectedOption(e) {
    let n = null;
    for (let i = this.list.firstChild, r = this.range.from; i; i = i.nextSibling, r++)
      r == e ? i.hasAttribute("aria-selected") || (i.setAttribute("aria-selected", "true"), n = i) : i.hasAttribute("aria-selected") && i.removeAttribute("aria-selected");
    return n && eX(this.list, n), n;
  }
  measureInfo() {
    let e = this.dom.querySelector("[aria-selected]");
    if (!e || !this.info)
      return null;
    let n = this.dom.getBoundingClientRect(), i = this.info.getBoundingClientRect(), r = e.getBoundingClientRect(), s = this.space;
    if (!s) {
      let p = this.dom.ownerDocument.defaultView || window;
      s = { left: 0, top: 0, right: p.innerWidth, bottom: p.innerHeight };
    }
    if (r.top > Math.min(s.bottom, n.bottom) - 10 || r.bottom < Math.max(s.top, n.top) + 10)
      return null;
    let o = this.view.textDirection == Sn.RTL, l = o, a = !1, c, u = "", f = "", h = n.left - s.left, d = s.right - n.right;
    if (l && h < Math.min(i.width, d) ? l = !1 : !l && d < Math.min(i.width, h) && (l = !0), i.width <= (l ? h : d))
      u = Math.max(s.top, Math.min(r.top, s.bottom - i.height)) - n.top + "px", c = Math.min(400, l ? h : d) + "px";
    else {
      a = !0, c = Math.min(400, (o ? n.right : s.right - n.left) - 30) + "px";
      let p = s.bottom - n.bottom;
      p >= i.height || p > n.top ? u = r.bottom - n.top + "px" : f = n.bottom - r.top + "px";
    }
    return {
      top: u,
      bottom: f,
      maxWidth: c,
      class: a ? o ? "left-narrow" : "right-narrow" : l ? "left" : "right"
    };
  }
  positionInfo(e) {
    this.info && (e ? (this.info.style.top = e.top, this.info.style.bottom = e.bottom, this.info.style.maxWidth = e.maxWidth, this.info.className = "cm-tooltip cm-completionInfo cm-completionInfo-" + e.class) : this.info.style.top = "-1e6px");
  }
  createListBox(e, n, i) {
    const r = document.createElement("ul");
    r.id = n, r.setAttribute("role", "listbox"), r.setAttribute("aria-expanded", "true"), r.setAttribute("aria-label", this.view.state.phrase("Completions"));
    for (let s = i.from; s < i.to; s++) {
      let { completion: o, match: l } = e[s];
      const a = r.appendChild(document.createElement("li"));
      a.id = n + "-" + s, a.setAttribute("role", "option");
      let c = this.optionClass(o);
      c && (a.className = c);
      for (let u of this.optionContent) {
        let f = u(o, this.view.state, l);
        f && a.appendChild(f);
      }
    }
    return i.from && r.classList.add("cm-completionListIncompleteTop"), i.to < e.length && r.classList.add("cm-completionListIncompleteBottom"), r;
  }
}
function $Y(t) {
  return (e) => new ZY(e, t);
}
function eX(t, e) {
  let n = t.getBoundingClientRect(), i = e.getBoundingClientRect();
  i.top < n.top ? t.scrollTop -= n.top - i.top : i.bottom > n.bottom && (t.scrollTop += i.bottom - n.bottom);
}
function TC(t) {
  return (t.boost || 0) * 100 + (t.apply ? 10 : 0) + (t.info ? 5 : 0) + (t.type ? 1 : 0);
}
function tX(t, e) {
  let n = [], i = 0;
  for (let l of t)
    if (l.hasResult())
      if (l.result.filter === !1) {
        let a = l.result.getMatch;
        for (let c of l.result.options) {
          let u = [1e9 - i++];
          if (a)
            for (let f of a(c))
              u.push(f);
          n.push(new EC(c, l, u));
        }
      } else {
        let a = new XY(e.sliceDoc(l.from, l.to)), c;
        for (let u of l.result.options)
          (c = a.match(u.label)) && (u.boost != null && (c[0] += u.boost), n.push(new EC(u, l, c)));
      }
  let r = [], s = null, o = e.facet(vr).compareCompletions;
  for (let l of n.sort((a, c) => c.match[0] - a.match[0] || o(a.completion, c.completion)))
    !s || s.label != l.completion.label || s.detail != l.completion.detail || s.type != null && l.completion.type != null && s.type != l.completion.type || s.apply != l.completion.apply ? r.push(l) : TC(l.completion) > TC(s) && (r[r.length - 1] = l), s = l.completion;
  return r;
}
class fa {
  constructor(e, n, i, r, s, o) {
    this.options = e, this.attrs = n, this.tooltip = i, this.timestamp = r, this.selected = s, this.disabled = o;
  }
  setSelected(e, n) {
    return e == this.selected || e >= this.options.length ? this : new fa(this.options, RC(n, e), this.tooltip, this.timestamp, e, this.disabled);
  }
  static build(e, n, i, r, s) {
    let o = tX(e, n);
    if (!o.length)
      return r && e.some((a) => a.state == 1) ? new fa(r.options, r.attrs, r.tooltip, r.timestamp, r.selected, !0) : null;
    let l = n.facet(vr).selectOnOpen ? 0 : -1;
    if (r && r.selected != l && r.selected != -1) {
      let a = r.options[r.selected].completion;
      for (let c = 0; c < o.length; c++)
        if (o[c].completion == a) {
          l = c;
          break;
        }
    }
    return new fa(o, RC(i, l), {
      pos: e.reduce((a, c) => c.hasResult() ? Math.min(a, c.from) : a, 1e8),
      create: $Y(fr),
      above: s.aboveCursor
    }, r ? r.timestamp : Date.now(), l, !1);
  }
  map(e) {
    return new fa(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: e.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);
  }
}
class Pd {
  constructor(e, n, i) {
    this.active = e, this.id = n, this.open = i;
  }
  static start() {
    return new Pd(rX, "cm-ac-" + Math.floor(Math.random() * 2e6).toString(36), null);
  }
  update(e) {
    let { state: n } = e, i = n.facet(vr), s = (i.override || n.languageDataAt("autocomplete", Po(n)).map(YY)).map((l) => (this.active.find((c) => c.source == l) || new Vi(l, this.active.some((c) => c.state != 0) ? 1 : 0)).update(e, i));
    s.length == this.active.length && s.every((l, a) => l == this.active[a]) && (s = this.active);
    let o = this.open;
    o && e.docChanged && (o = o.map(e.changes)), e.selection || s.some((l) => l.hasResult() && e.changes.touchesRange(l.from, l.to)) || !nX(s, this.active) ? o = fa.build(s, n, this.id, o, i) : o && o.disabled && !s.some((l) => l.state == 1) && (o = null), !o && s.every((l) => l.state != 1) && s.some((l) => l.hasResult()) && (s = s.map((l) => l.hasResult() ? new Vi(l.source, 0) : l));
    for (let l of e.effects)
      l.is(xA) && (o = o && o.setSelected(l.value, this.id));
    return s == this.active && o == this.open ? this : new Pd(s, this.id, o);
  }
  get tooltip() {
    return this.open ? this.open.tooltip : null;
  }
  get attrs() {
    return this.open ? this.open.attrs : iX;
  }
}
function nX(t, e) {
  if (t == e)
    return !0;
  for (let n = 0, i = 0; ; ) {
    for (; n < t.length && !t[n].hasResult; )
      n++;
    for (; i < e.length && !e[i].hasResult; )
      i++;
    let r = n == t.length, s = i == e.length;
    if (r || s)
      return r == s;
    if (t[n++].result != e[i++].result)
      return !1;
  }
}
const iX = {
  "aria-autocomplete": "list"
};
function RC(t, e) {
  let n = {
    "aria-autocomplete": "list",
    "aria-haspopup": "listbox",
    "aria-controls": t
  };
  return e > -1 && (n["aria-activedescendant"] = t + "-" + e), n;
}
const rX = [];
function G1(t) {
  return t.isUserEvent("input.type") ? "input" : t.isUserEvent("delete.backward") ? "delete" : null;
}
class Vi {
  constructor(e, n, i = -1) {
    this.source = e, this.state = n, this.explicitPos = i;
  }
  hasResult() {
    return !1;
  }
  update(e, n) {
    let i = G1(e), r = this;
    i ? r = r.handleUserEvent(e, i, n) : e.docChanged ? r = r.handleChange(e) : e.selection && r.state != 0 && (r = new Vi(r.source, 0));
    for (let s of e.effects)
      if (s.is(Wb))
        r = new Vi(r.source, 1, s.value ? Po(e.state) : -1);
      else if (s.is(Id))
        r = new Vi(r.source, 0);
      else if (s.is(BA))
        for (let o of s.value)
          o.source == r.source && (r = o);
    return r;
  }
  handleUserEvent(e, n, i) {
    return n == "delete" || !i.activateOnTyping ? this.map(e.changes) : new Vi(this.source, 1);
  }
  handleChange(e) {
    return e.changes.touchesRange(Po(e.startState)) ? new Vi(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty || this.explicitPos < 0 ? this : new Vi(this.source, this.state, e.mapPos(this.explicitPos));
  }
}
class Hc extends Vi {
  constructor(e, n, i, r, s) {
    super(e, 2, n), this.result = i, this.from = r, this.to = s;
  }
  hasResult() {
    return !0;
  }
  handleUserEvent(e, n, i) {
    var r;
    let s = e.changes.mapPos(this.from), o = e.changes.mapPos(this.to, 1), l = Po(e.state);
    if ((this.explicitPos < 0 ? l <= s : l < this.from) || l > o || n == "delete" && Po(e.startState) == this.from)
      return new Vi(this.source, n == "input" && i.activateOnTyping ? 1 : 0);
    let a = this.explicitPos < 0 ? -1 : e.changes.mapPos(this.explicitPos), c;
    return sX(this.result.validFor, e.state, s, o) ? new Hc(this.source, a, this.result, s, o) : this.result.update && (c = this.result.update(this.result, s, o, new NA(e.state, l, a >= 0))) ? new Hc(this.source, a, c, c.from, (r = c.to) !== null && r !== void 0 ? r : Po(e.state)) : new Vi(this.source, 1, a);
  }
  handleChange(e) {
    return e.changes.touchesRange(this.from, this.to) ? new Vi(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty ? this : new Hc(this.source, this.explicitPos < 0 ? -1 : e.mapPos(this.explicitPos), this.result, e.mapPos(this.from), e.mapPos(this.to, 1));
  }
}
function sX(t, e, n, i) {
  if (!t)
    return !1;
  let r = e.sliceDoc(n, i);
  return typeof t == "function" ? t(r, n, i, e) : LA(t, !0).test(r);
}
const Wb = /* @__PURE__ */ St.define(), Id = /* @__PURE__ */ St.define(), BA = /* @__PURE__ */ St.define({
  map(t, e) {
    return t.map((n) => n.map(e));
  }
}), xA = /* @__PURE__ */ St.define(), fr = /* @__PURE__ */ ri.define({
  create() {
    return Pd.start();
  },
  update(t, e) {
    return t.update(e);
  },
  provide: (t) => [
    Bp.from(t, (e) => e.tooltip),
    tt.contentAttributes.from(t, (e) => e.attrs)
  ]
});
function Gf(t, e = "option") {
  return (n) => {
    let i = n.state.field(fr, !1);
    if (!i || !i.open || i.open.disabled || Date.now() - i.open.timestamp < n.state.facet(vr).interactionDelay)
      return !1;
    let r = 1, s;
    e == "page" && (s = JJ(n, i.open.tooltip)) && (r = Math.max(2, Math.floor(s.dom.offsetHeight / s.dom.querySelector("li").offsetHeight) - 1));
    let { length: o } = i.open.options, l = i.open.selected > -1 ? i.open.selected + r * (t ? 1 : -1) : t ? 0 : o - 1;
    return l < 0 ? l = e == "page" ? 0 : o - 1 : l >= o && (l = e == "page" ? o - 1 : 0), n.dispatch({ effects: xA.of(l) }), !0;
  };
}
const oX = (t) => {
  let e = t.state.field(fr, !1);
  return t.state.readOnly || !e || !e.open || e.open.selected < 0 || Date.now() - e.open.timestamp < t.state.facet(vr).interactionDelay ? !1 : (e.open.disabled || jA(t, e.open.options[e.open.selected]), !0);
}, lX = (t) => t.state.field(fr, !1) ? (t.dispatch({ effects: Wb.of(!0) }), !0) : !1, aX = (t) => {
  let e = t.state.field(fr, !1);
  return !e || !e.active.some((n) => n.state != 0) ? !1 : (t.dispatch({ effects: Id.of(null) }), !0);
};
class cX {
  constructor(e, n) {
    this.active = e, this.context = n, this.time = Date.now(), this.updates = [], this.done = void 0;
  }
}
const PC = 50, uX = 50, fX = 1e3, hX = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.debounceUpdate = -1, this.running = [], this.debounceAccept = -1, this.composing = 0;
    for (let e of t.state.field(fr).active)
      e.state == 1 && this.startQuery(e);
  }
  update(t) {
    let e = t.state.field(fr);
    if (!t.selectionSet && !t.docChanged && t.startState.field(fr) == e)
      return;
    let n = t.transactions.some((i) => (i.selection || i.docChanged) && !G1(i));
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (n || r.updates.length + t.transactions.length > uX && Date.now() - r.time > fX) {
        for (let s of r.context.abortListeners)
          try {
            s();
          } catch (o) {
            ir(this.view.state, o);
          }
        r.context.abortListeners = null, this.running.splice(i--, 1);
      } else
        r.updates.push(...t.transactions);
    }
    if (this.debounceUpdate > -1 && clearTimeout(this.debounceUpdate), this.debounceUpdate = e.active.some((i) => i.state == 1 && !this.running.some((r) => r.active.source == i.source)) ? setTimeout(() => this.startUpdate(), PC) : -1, this.composing != 0)
      for (let i of t.transactions)
        G1(i) == "input" ? this.composing = 2 : this.composing == 2 && i.selection && (this.composing = 3);
  }
  startUpdate() {
    this.debounceUpdate = -1;
    let { state: t } = this.view, e = t.field(fr);
    for (let n of e.active)
      n.state == 1 && !this.running.some((i) => i.active.source == n.source) && this.startQuery(n);
  }
  startQuery(t) {
    let { state: e } = this.view, n = Po(e), i = new NA(e, n, t.explicitPos == n), r = new cX(t, i);
    this.running.push(r), Promise.resolve(t.source(i)).then((s) => {
      r.context.aborted || (r.done = s || null, this.scheduleAccept());
    }, (s) => {
      this.view.dispatch({ effects: Id.of(null) }), ir(this.view.state, s);
    });
  }
  scheduleAccept() {
    this.running.every((t) => t.done !== void 0) ? this.accept() : this.debounceAccept < 0 && (this.debounceAccept = setTimeout(() => this.accept(), PC));
  }
  accept() {
    var t;
    this.debounceAccept > -1 && clearTimeout(this.debounceAccept), this.debounceAccept = -1;
    let e = [], n = this.view.state.facet(vr);
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (r.done === void 0)
        continue;
      if (this.running.splice(i--, 1), r.done) {
        let o = new Hc(r.active.source, r.active.explicitPos, r.done, r.done.from, (t = r.done.to) !== null && t !== void 0 ? t : Po(r.updates.length ? r.updates[0].startState : this.view.state));
        for (let l of r.updates)
          o = o.update(l, n);
        if (o.hasResult()) {
          e.push(o);
          continue;
        }
      }
      let s = this.view.state.field(fr).active.find((o) => o.source == r.active.source);
      if (s && s.state == 1)
        if (r.done == null) {
          let o = new Vi(r.active.source, 0);
          for (let l of r.updates)
            o = o.update(l, n);
          o.state != 1 && e.push(o);
        } else
          this.startQuery(s);
    }
    e.length && this.view.dispatch({ effects: BA.of(e) });
  }
}, {
  eventHandlers: {
    blur() {
      let t = this.view.state.field(fr, !1);
      t && t.tooltip && this.view.state.facet(vr).closeOnBlur && this.view.dispatch({ effects: Id.of(null) });
    },
    compositionstart() {
      this.composing = 1;
    },
    compositionend() {
      this.composing == 3 && setTimeout(() => this.view.dispatch({ effects: Wb.of(!1) }), 20), this.composing = 0;
    }
  }
}), dX = /* @__PURE__ */ tt.baseTheme({
  ".cm-tooltip.cm-tooltip-autocomplete": {
    "& > ul": {
      fontFamily: "monospace",
      whiteSpace: "nowrap",
      overflow: "hidden auto",
      maxWidth_fallback: "700px",
      maxWidth: "min(700px, 95vw)",
      minWidth: "250px",
      maxHeight: "10em",
      height: "100%",
      listStyle: "none",
      margin: 0,
      padding: 0,
      "& > li": {
        overflowX: "hidden",
        textOverflow: "ellipsis",
        cursor: "pointer",
        padding: "1px 3px",
        lineHeight: 1.2
      }
    }
  },
  "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#17c",
    color: "white"
  },
  "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#777"
  },
  "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#347",
    color: "white"
  },
  "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#444"
  },
  ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
    content: '"···"',
    opacity: 0.5,
    display: "block",
    textAlign: "center"
  },
  ".cm-tooltip.cm-completionInfo": {
    position: "absolute",
    padding: "3px 9px",
    width: "max-content",
    maxWidth: `${400}px`,
    boxSizing: "border-box"
  },
  ".cm-completionInfo.cm-completionInfo-left": { right: "100%" },
  ".cm-completionInfo.cm-completionInfo-right": { left: "100%" },
  ".cm-completionInfo.cm-completionInfo-left-narrow": { right: `${30}px` },
  ".cm-completionInfo.cm-completionInfo-right-narrow": { left: `${30}px` },
  "&light .cm-snippetField": { backgroundColor: "#00000022" },
  "&dark .cm-snippetField": { backgroundColor: "#ffffff22" },
  ".cm-snippetFieldPosition": {
    verticalAlign: "text-top",
    width: 0,
    height: "1.15em",
    display: "inline-block",
    margin: "0 -0.7px -.7em",
    borderLeft: "1.4px dotted #888"
  },
  ".cm-completionMatchedText": {
    textDecoration: "underline"
  },
  ".cm-completionDetail": {
    marginLeft: "0.5em",
    fontStyle: "italic"
  },
  ".cm-completionIcon": {
    fontSize: "90%",
    width: ".8em",
    display: "inline-block",
    textAlign: "center",
    paddingRight: ".6em",
    opacity: "0.6",
    boxSizing: "content-box"
  },
  ".cm-completionIcon-function, .cm-completionIcon-method": {
    "&:after": { content: "'ƒ'" }
  },
  ".cm-completionIcon-class": {
    "&:after": { content: "'○'" }
  },
  ".cm-completionIcon-interface": {
    "&:after": { content: "'◌'" }
  },
  ".cm-completionIcon-variable": {
    "&:after": { content: "'𝑥'" }
  },
  ".cm-completionIcon-constant": {
    "&:after": { content: "'𝐶'" }
  },
  ".cm-completionIcon-type": {
    "&:after": { content: "'𝑡'" }
  },
  ".cm-completionIcon-enum": {
    "&:after": { content: "'∪'" }
  },
  ".cm-completionIcon-property": {
    "&:after": { content: "'□'" }
  },
  ".cm-completionIcon-keyword": {
    "&:after": { content: "'🔑︎'" }
  },
  ".cm-completionIcon-namespace": {
    "&:after": { content: "'▢'" }
  },
  ".cm-completionIcon-text": {
    "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" }
  }
}), ku = {
  brackets: ["(", "[", "{", "'", '"'],
  before: ")]}:;>",
  stringPrefixes: []
}, pl = /* @__PURE__ */ St.define({
  map(t, e) {
    let n = e.mapPos(t, -1, Ni.TrackAfter);
    return n ?? void 0;
  }
}), qb = /* @__PURE__ */ St.define({
  map(t, e) {
    return e.mapPos(t);
  }
}), Jb = /* @__PURE__ */ new class extends Pl {
}();
Jb.startSide = 1;
Jb.endSide = -1;
const FA = /* @__PURE__ */ ri.define({
  create() {
    return Wt.empty;
  },
  update(t, e) {
    if (e.selection) {
      let n = e.state.doc.lineAt(e.selection.main.head).from, i = e.startState.doc.lineAt(e.startState.selection.main.head).from;
      n != e.changes.mapPos(i, -1) && (t = Wt.empty);
    }
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(pl) ? t = t.update({ add: [Jb.range(n.value, n.value + 1)] }) : n.is(qb) && (t = t.update({ filter: (i) => i != n.value }));
    return t;
  }
});
function pX() {
  return [mX, FA];
}
const lm = "()[]{}<>";
function zA(t) {
  for (let e = 0; e < lm.length; e += 2)
    if (lm.charCodeAt(e) == t)
      return lm.charAt(e + 1);
  return mb(t < 128 ? t : t + 1);
}
function VA(t, e) {
  return t.languageDataAt("closeBrackets", e)[0] || ku;
}
const gX = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent), mX = /* @__PURE__ */ tt.inputHandler.of((t, e, n, i) => {
  if ((gX ? t.composing : t.compositionStarted) || t.state.readOnly)
    return !1;
  let r = t.state.selection.main;
  if (i.length > 2 || i.length == 2 && Zi(ki(i, 0)) == 1 || e != r.from || n != r.to)
    return !1;
  let s = yX(t.state, i);
  return s ? (t.dispatch(s), !0) : !1;
}), bX = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let i = VA(t, t.selection.main.head).brackets || ku.brackets, r = null, s = t.changeByRange((o) => {
    if (o.empty) {
      let l = wX(t.doc, o.head);
      for (let a of i)
        if (a == l && Kp(t.doc, o.head) == zA(ki(a, 0)))
          return {
            changes: { from: o.head - a.length, to: o.head + a.length },
            range: Pe.cursor(o.head - a.length)
          };
    }
    return { range: r = o };
  });
  return r || e(t.update(s, { scrollIntoView: !0, userEvent: "delete.backward" })), !r;
}, _X = [
  { key: "Backspace", run: bX }
];
function yX(t, e) {
  let n = VA(t, t.selection.main.head), i = n.brackets || ku.brackets;
  for (let r of i) {
    let s = zA(ki(r, 0));
    if (e == r)
      return s == r ? CX(t, r, i.indexOf(r + r + r) > -1, n) : vX(t, r, s, n.before || ku.before);
    if (e == s && UA(t, t.selection.main.from))
      return kX(t, r, s);
  }
  return null;
}
function UA(t, e) {
  let n = !1;
  return t.field(FA).between(0, t.doc.length, (i) => {
    i == e && (n = !0);
  }), n;
}
function Kp(t, e) {
  let n = t.sliceString(e, e + 2);
  return n.slice(0, Zi(ki(n, 0)));
}
function wX(t, e) {
  let n = t.sliceString(e - 2, e);
  return Zi(ki(n, 0)) == n.length ? n : n.slice(1);
}
function vX(t, e, n, i) {
  let r = null, s = t.changeByRange((o) => {
    if (!o.empty)
      return {
        changes: [{ insert: e, from: o.from }, { insert: n, from: o.to }],
        effects: pl.of(o.to + e.length),
        range: Pe.range(o.anchor + e.length, o.head + e.length)
      };
    let l = Kp(t.doc, o.head);
    return !l || /\s/.test(l) || i.indexOf(l) > -1 ? {
      changes: { insert: e + n, from: o.head },
      effects: pl.of(o.head + e.length),
      range: Pe.cursor(o.head + e.length)
    } : { range: r = o };
  });
  return r ? null : t.update(s, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function kX(t, e, n) {
  let i = null, r = t.selection.ranges.map((s) => s.empty && Kp(t.doc, s.head) == n ? Pe.cursor(s.head + n.length) : i = s);
  return i ? null : t.update({
    selection: Pe.create(r, t.selection.mainIndex),
    scrollIntoView: !0,
    effects: t.selection.ranges.map(({ from: s }) => qb.of(s))
  });
}
function CX(t, e, n, i) {
  let r = i.stringPrefixes || ku.stringPrefixes, s = null, o = t.changeByRange((l) => {
    if (!l.empty)
      return {
        changes: [{ insert: e, from: l.from }, { insert: e, from: l.to }],
        effects: pl.of(l.to + e.length),
        range: Pe.range(l.anchor + e.length, l.head + e.length)
      };
    let a = l.head, c = Kp(t.doc, a), u;
    if (c == e) {
      if (IC(t, a))
        return {
          changes: { insert: e + e, from: a },
          effects: pl.of(a + e.length),
          range: Pe.cursor(a + e.length)
        };
      if (UA(t, a)) {
        let f = n && t.sliceDoc(a, a + e.length * 3) == e + e + e;
        return {
          range: Pe.cursor(a + e.length * (f ? 3 : 1)),
          effects: qb.of(a)
        };
      }
    } else {
      if (n && t.sliceDoc(a - 2 * e.length, a) == e + e && (u = DC(t, a - 2 * e.length, r)) > -1 && IC(t, u))
        return {
          changes: { insert: e + e + e + e, from: a },
          effects: pl.of(a + e.length),
          range: Pe.cursor(a + e.length)
        };
      if (t.charCategorizer(a)(c) != _n.Word && DC(t, a, r) > -1 && !SX(t, a, e, r))
        return {
          changes: { insert: e + e, from: a },
          effects: pl.of(a + e.length),
          range: Pe.cursor(a + e.length)
        };
    }
    return { range: s = l };
  });
  return s ? null : t.update(o, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function IC(t, e) {
  let n = Pi(t).resolveInner(e + 1);
  return n.parent && n.from == e;
}
function SX(t, e, n, i) {
  let r = Pi(t).resolveInner(e, -1), s = i.reduce((o, l) => Math.max(o, l.length), 0);
  for (let o = 0; o < 5; o++) {
    let l = t.sliceDoc(r.from, Math.min(r.to, r.from + n.length + s)), a = l.indexOf(n);
    if (!a || a > -1 && i.indexOf(l.slice(0, a)) > -1) {
      let u = r.firstChild;
      for (; u && u.from == r.from && u.to - u.from > n.length + a; ) {
        if (t.sliceDoc(u.to - n.length, u.to) == n)
          return !1;
        u = u.firstChild;
      }
      return !0;
    }
    let c = r.to == e && r.parent;
    if (!c)
      break;
    r = c;
  }
  return !1;
}
function DC(t, e, n) {
  let i = t.charCategorizer(e);
  if (i(t.sliceDoc(e - 1, e)) != _n.Word)
    return e;
  for (let r of n) {
    let s = e - r.length;
    if (t.sliceDoc(s, e) == r && i(t.sliceDoc(s - 1, s)) != _n.Word)
      return s;
  }
  return -1;
}
function EX(t = {}) {
  return [
    fr,
    vr.of(t),
    hX,
    AX,
    dX
  ];
}
const HA = [
  { key: "Ctrl-Space", run: lX },
  { key: "Escape", run: aX },
  { key: "ArrowDown", run: /* @__PURE__ */ Gf(!0) },
  { key: "ArrowUp", run: /* @__PURE__ */ Gf(!1) },
  { key: "PageDown", run: /* @__PURE__ */ Gf(!0, "page") },
  { key: "PageUp", run: /* @__PURE__ */ Gf(!1, "page") },
  { key: "Enter", run: oX }
], AX = /* @__PURE__ */ ac.highest(/* @__PURE__ */ jp.computeN([vr], (t) => t.facet(vr).defaultKeymap ? [HA] : []));
class MX {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.diagnostic = i;
  }
}
class fl {
  constructor(e, n, i) {
    this.diagnostics = e, this.panel = n, this.selected = i;
  }
  static init(e, n, i) {
    let r = e, s = i.facet(gl).markerFilter;
    s && (r = s(r));
    let o = gt.set(r.map((l) => l.from == l.to || l.from == l.to - 1 && i.doc.lineAt(l.from).to == l.from ? gt.widget({
      widget: new jX(l),
      diagnostic: l
    }).range(l.from) : gt.mark({
      attributes: { class: "cm-lintRange cm-lintRange-" + l.severity },
      diagnostic: l
    }).range(l.from, l.to)), !0);
    return new fl(o, n, Wa(o));
  }
}
function Wa(t, e = null, n = 0) {
  let i = null;
  return t.between(n, 1e9, (r, s, { spec: o }) => {
    if (!(e && o.diagnostic != e))
      return i = new MX(r, s, o.diagnostic), !1;
  }), i;
}
function WA(t, e) {
  return !!(t.effects.some((n) => n.is(Gp)) || t.changes.touchesRange(e.pos));
}
function qA(t, e) {
  return t.field(tr, !1) ? e : e.concat(St.appendConfig.of([
    tr,
    tt.decorations.compute([tr], (n) => {
      let { selected: i, panel: r } = n.field(tr);
      return !i || !r || i.from == i.to ? gt.none : gt.set([
        TX.range(i.from, i.to)
      ]);
    }),
    qJ(RX, { hideOn: WA }),
    BX
  ]));
}
function OX(t, e) {
  return {
    effects: qA(t, [Gp.of(e)])
  };
}
const Gp = /* @__PURE__ */ St.define(), Kb = /* @__PURE__ */ St.define(), JA = /* @__PURE__ */ St.define(), tr = /* @__PURE__ */ ri.define({
  create() {
    return new fl(gt.none, null, null);
  },
  update(t, e) {
    if (e.docChanged) {
      let n = t.diagnostics.map(e.changes), i = null;
      if (t.selected) {
        let r = e.changes.mapPos(t.selected.from, 1);
        i = Wa(n, t.selected.diagnostic, r) || Wa(n, null, r);
      }
      t = new fl(n, t.panel, i);
    }
    for (let n of e.effects)
      n.is(Gp) ? t = fl.init(n.value, t.panel, e.state) : n.is(Kb) ? t = new fl(t.diagnostics, n.value ? Yp.open : null, t.selected) : n.is(JA) && (t = new fl(t.diagnostics, t.panel, n.value));
    return t;
  },
  provide: (t) => [
    _u.from(t, (e) => e.panel),
    tt.decorations.from(t, (e) => e.diagnostics)
  ]
}), TX = /* @__PURE__ */ gt.mark({ class: "cm-lintRange cm-lintRange-active" });
function RX(t, e, n) {
  let { diagnostics: i } = t.state.field(tr), r = [], s = 2e8, o = 0;
  i.between(e - (n < 0 ? 1 : 0), e + (n > 0 ? 1 : 0), (a, c, { spec: u }) => {
    e >= a && e <= c && (a == c || (e > a || n > 0) && (e < c || n < 0)) && (r.push(u.diagnostic), s = Math.min(a, s), o = Math.max(c, o));
  });
  let l = t.state.facet(gl).tooltipFilter;
  return l && (r = l(r)), r.length ? {
    pos: s,
    end: o,
    above: t.state.doc.lineAt(s).to < o,
    create() {
      return { dom: KA(t, r) };
    }
  } : null;
}
function KA(t, e) {
  return rn("ul", { class: "cm-tooltip-lint" }, e.map((n) => YA(t, n, !1)));
}
const PX = (t) => {
  let e = t.state.field(tr, !1);
  (!e || !e.panel) && t.dispatch({ effects: qA(t.state, [Kb.of(!0)]) });
  let n = bu(t, Yp.open);
  return n && n.dom.querySelector(".cm-panel-lint ul").focus(), !0;
}, NC = (t) => {
  let e = t.state.field(tr, !1);
  return !e || !e.panel ? !1 : (t.dispatch({ effects: Kb.of(!1) }), !0);
}, IX = (t) => {
  let e = t.state.field(tr, !1);
  if (!e)
    return !1;
  let n = t.state.selection.main, i = e.diagnostics.iter(n.to + 1);
  return !i.value && (i = e.diagnostics.iter(0), !i.value || i.from == n.from && i.to == n.to) ? !1 : (t.dispatch({ selection: { anchor: i.from, head: i.to }, scrollIntoView: !0 }), !0);
}, DX = [
  { key: "Mod-Shift-m", run: PX, preventDefault: !0 },
  { key: "F8", run: IX }
], NX = /* @__PURE__ */ Yn.fromClass(class {
  constructor(t) {
    this.view = t, this.timeout = -1, this.set = !0;
    let { delay: e } = t.state.facet(gl);
    this.lintTime = Date.now() + e, this.run = this.run.bind(this), this.timeout = setTimeout(this.run, e);
  }
  run() {
    let t = Date.now();
    if (t < this.lintTime - 10)
      setTimeout(this.run, this.lintTime - t);
    else {
      this.set = !1;
      let { state: e } = this.view, { sources: n } = e.facet(gl);
      Promise.all(n.map((i) => Promise.resolve(i(this.view)))).then((i) => {
        let r = i.reduce((s, o) => s.concat(o));
        this.view.state.doc == e.doc && this.view.dispatch(OX(this.view.state, r));
      }, (i) => {
        ir(this.view.state, i);
      });
    }
  }
  update(t) {
    let e = t.state.facet(gl);
    (t.docChanged || e != t.startState.facet(gl)) && (this.lintTime = Date.now() + e.delay, this.set || (this.set = !0, this.timeout = setTimeout(this.run, e.delay)));
  }
  force() {
    this.set && (this.lintTime = Date.now(), this.run());
  }
  destroy() {
    clearTimeout(this.timeout);
  }
}), gl = /* @__PURE__ */ nt.define({
  combine(t) {
    return Object.assign({ sources: t.map((e) => e.source) }, Wr(t.map((e) => e.config), {
      delay: 750,
      markerFilter: null,
      tooltipFilter: null
    }));
  },
  enables: NX
});
function LX(t, e = {}) {
  return gl.of({ source: t, config: e });
}
function GA(t) {
  let e = [];
  if (t)
    e:
      for (let { name: n } of t) {
        for (let i = 0; i < n.length; i++) {
          let r = n[i];
          if (/[a-zA-Z]/.test(r) && !e.some((s) => s.toLowerCase() == r.toLowerCase())) {
            e.push(r);
            continue e;
          }
        }
        e.push("");
      }
  return e;
}
function YA(t, e, n) {
  var i;
  let r = n ? GA(e.actions) : [];
  return rn("li", { class: "cm-diagnostic cm-diagnostic-" + e.severity }, rn("span", { class: "cm-diagnosticText" }, e.renderMessage ? e.renderMessage() : e.message), (i = e.actions) === null || i === void 0 ? void 0 : i.map((s, o) => {
    let l = (f) => {
      f.preventDefault();
      let h = Wa(t.state.field(tr).diagnostics, e);
      h && s.apply(t, h.from, h.to);
    }, { name: a } = s, c = r[o] ? a.indexOf(r[o]) : -1, u = c < 0 ? a : [
      a.slice(0, c),
      rn("u", a.slice(c, c + 1)),
      a.slice(c + 1)
    ];
    return rn("button", {
      type: "button",
      class: "cm-diagnosticAction",
      onclick: l,
      onmousedown: l,
      "aria-label": ` Action: ${a}${c < 0 ? "" : ` (access key "${r[o]})"`}.`
    }, u);
  }), e.source && rn("div", { class: "cm-diagnosticSource" }, e.source));
}
class jX extends $o {
  constructor(e) {
    super(), this.diagnostic = e;
  }
  eq(e) {
    return e.diagnostic == this.diagnostic;
  }
  toDOM() {
    return rn("span", { class: "cm-lintPoint cm-lintPoint-" + this.diagnostic.severity });
  }
}
class LC {
  constructor(e, n) {
    this.diagnostic = n, this.id = "item_" + Math.floor(Math.random() * 4294967295).toString(16), this.dom = YA(e, n, !0), this.dom.id = this.id, this.dom.setAttribute("role", "option");
  }
}
class Yp {
  constructor(e) {
    this.view = e, this.items = [];
    let n = (r) => {
      if (r.keyCode == 27)
        NC(this.view), this.view.focus();
      else if (r.keyCode == 38 || r.keyCode == 33)
        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);
      else if (r.keyCode == 40 || r.keyCode == 34)
        this.moveSelection((this.selectedIndex + 1) % this.items.length);
      else if (r.keyCode == 36)
        this.moveSelection(0);
      else if (r.keyCode == 35)
        this.moveSelection(this.items.length - 1);
      else if (r.keyCode == 13)
        this.view.focus();
      else if (r.keyCode >= 65 && r.keyCode <= 90 && this.selectedIndex >= 0) {
        let { diagnostic: s } = this.items[this.selectedIndex], o = GA(s.actions);
        for (let l = 0; l < o.length; l++)
          if (o[l].toUpperCase().charCodeAt(0) == r.keyCode) {
            let a = Wa(this.view.state.field(tr).diagnostics, s);
            a && s.actions[l].apply(e, a.from, a.to);
          }
      } else
        return;
      r.preventDefault();
    }, i = (r) => {
      for (let s = 0; s < this.items.length; s++)
        this.items[s].dom.contains(r.target) && this.moveSelection(s);
    };
    this.list = rn("ul", {
      tabIndex: 0,
      role: "listbox",
      "aria-label": this.view.state.phrase("Diagnostics"),
      onkeydown: n,
      onclick: i
    }), this.dom = rn("div", { class: "cm-panel-lint" }, this.list, rn("button", {
      type: "button",
      name: "close",
      "aria-label": this.view.state.phrase("close"),
      onclick: () => NC(this.view)
    }, "×")), this.update();
  }
  get selectedIndex() {
    let e = this.view.state.field(tr).selected;
    if (!e)
      return -1;
    for (let n = 0; n < this.items.length; n++)
      if (this.items[n].diagnostic == e.diagnostic)
        return n;
    return -1;
  }
  update() {
    let { diagnostics: e, selected: n } = this.view.state.field(tr), i = 0, r = !1, s = null;
    for (e.between(0, this.view.state.doc.length, (o, l, { spec: a }) => {
      let c = -1, u;
      for (let f = i; f < this.items.length; f++)
        if (this.items[f].diagnostic == a.diagnostic) {
          c = f;
          break;
        }
      c < 0 ? (u = new LC(this.view, a.diagnostic), this.items.splice(i, 0, u), r = !0) : (u = this.items[c], c > i && (this.items.splice(i, c - i), r = !0)), n && u.diagnostic == n.diagnostic ? u.dom.hasAttribute("aria-selected") || (u.dom.setAttribute("aria-selected", "true"), s = u) : u.dom.hasAttribute("aria-selected") && u.dom.removeAttribute("aria-selected"), i++;
    }); i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0); )
      r = !0, this.items.pop();
    this.items.length == 0 && (this.items.push(new LC(this.view, {
      from: -1,
      to: -1,
      severity: "info",
      message: this.view.state.phrase("No diagnostics")
    })), r = !0), s ? (this.list.setAttribute("aria-activedescendant", s.id), this.view.requestMeasure({
      key: this,
      read: () => ({ sel: s.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),
      write: ({ sel: o, panel: l }) => {
        o.top < l.top ? this.list.scrollTop -= l.top - o.top : o.bottom > l.bottom && (this.list.scrollTop += o.bottom - l.bottom);
      }
    })) : this.selectedIndex < 0 && this.list.removeAttribute("aria-activedescendant"), r && this.sync();
  }
  sync() {
    let e = this.list.firstChild;
    function n() {
      let i = e;
      e = i.nextSibling, i.remove();
    }
    for (let i of this.items)
      if (i.dom.parentNode == this.list) {
        for (; e != i.dom; )
          n();
        e = i.dom.nextSibling;
      } else
        this.list.insertBefore(i.dom, e);
    for (; e; )
      n();
  }
  moveSelection(e) {
    if (this.selectedIndex < 0)
      return;
    let n = this.view.state.field(tr), i = Wa(n.diagnostics, this.items[e].diagnostic);
    i && this.view.dispatch({
      selection: { anchor: i.from, head: i.to },
      scrollIntoView: !0,
      effects: JA.of(i)
    });
  }
  static open(e) {
    return new Yp(e);
  }
}
function Ch(t, e = 'viewBox="0 0 40 40"') {
  return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`;
}
function am(t) {
  return Ch(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`, 'width="6" height="3"');
}
const BX = /* @__PURE__ */ tt.baseTheme({
  ".cm-diagnostic": {
    padding: "3px 6px 3px 8px",
    marginLeft: "-1px",
    display: "block",
    whiteSpace: "pre-wrap"
  },
  ".cm-diagnostic-error": { borderLeft: "5px solid #d11" },
  ".cm-diagnostic-warning": { borderLeft: "5px solid orange" },
  ".cm-diagnostic-info": { borderLeft: "5px solid #999" },
  ".cm-diagnosticAction": {
    font: "inherit",
    border: "none",
    padding: "2px 4px",
    backgroundColor: "#444",
    color: "white",
    borderRadius: "3px",
    marginLeft: "8px"
  },
  ".cm-diagnosticSource": {
    fontSize: "70%",
    opacity: 0.7
  },
  ".cm-lintRange": {
    backgroundPosition: "left bottom",
    backgroundRepeat: "repeat-x",
    paddingBottom: "0.7px"
  },
  ".cm-lintRange-error": { backgroundImage: /* @__PURE__ */ am("#d11") },
  ".cm-lintRange-warning": { backgroundImage: /* @__PURE__ */ am("orange") },
  ".cm-lintRange-info": { backgroundImage: /* @__PURE__ */ am("#999") },
  ".cm-lintRange-active": { backgroundColor: "#ffdd9980" },
  ".cm-tooltip-lint": {
    padding: 0,
    margin: 0
  },
  ".cm-lintPoint": {
    position: "relative",
    "&:after": {
      content: '""',
      position: "absolute",
      bottom: 0,
      left: "-2px",
      borderLeft: "3px solid transparent",
      borderRight: "3px solid transparent",
      borderBottom: "4px solid #d11"
    }
  },
  ".cm-lintPoint-warning": {
    "&:after": { borderBottomColor: "orange" }
  },
  ".cm-lintPoint-info": {
    "&:after": { borderBottomColor: "#999" }
  },
  ".cm-panel.cm-panel-lint": {
    position: "relative",
    "& ul": {
      maxHeight: "100px",
      overflowY: "auto",
      "& [aria-selected]": {
        backgroundColor: "#ddd",
        "& u": { textDecoration: "underline" }
      },
      "&:focus [aria-selected]": {
        background_fallback: "#bdf",
        backgroundColor: "Highlight",
        color_fallback: "white",
        color: "HighlightText"
      },
      "& u": { textDecoration: "none" },
      padding: 0,
      margin: 0
    },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "2px",
      background: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    }
  }
});
class xX extends Ms {
  constructor(e) {
    super(), this.diagnostics = e, this.severity = e.reduce((n, i) => {
      let r = i.severity;
      return r == "error" || r == "warning" && n == "info" ? r : n;
    }, "info");
  }
  toDOM(e) {
    let n = document.createElement("div");
    n.className = "cm-lint-marker cm-lint-marker-" + this.severity;
    let i = this.diagnostics, r = e.state.facet(Xp).tooltipFilter;
    return r && (i = r(i)), i.length && (n.onmouseover = () => zX(e, n, i)), n;
  }
}
function FX(t, e) {
  let n = (i) => {
    let r = e.getBoundingClientRect();
    if (!(i.clientX > r.left - 10 && i.clientX < r.right + 10 && i.clientY > r.top - 10 && i.clientY < r.bottom + 10)) {
      for (let s = i.target; s; s = s.parentNode)
        if (s.nodeType == 1 && s.classList.contains("cm-tooltip-lint"))
          return;
      window.removeEventListener("mousemove", n), t.state.field(QA) && t.dispatch({ effects: Gb.of(null) });
    }
  };
  window.addEventListener("mousemove", n);
}
function zX(t, e, n) {
  function i() {
    let o = t.elementAtHeight(e.getBoundingClientRect().top + 5 - t.documentTop);
    t.coordsAtPos(o.from) && t.dispatch({ effects: Gb.of({
      pos: o.from,
      above: !1,
      create() {
        return {
          dom: KA(t, n),
          getCoords: () => e.getBoundingClientRect()
        };
      }
    }) }), e.onmouseout = e.onmousemove = null, FX(t, e);
  }
  let { hoverTime: r } = t.state.facet(Xp), s = setTimeout(i, r);
  e.onmouseout = () => {
    clearTimeout(s), e.onmouseout = e.onmousemove = null;
  }, e.onmousemove = () => {
    clearTimeout(s), s = setTimeout(i, r);
  };
}
function VX(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let r of e) {
    let s = t.lineAt(r.from);
    (n[s.from] || (n[s.from] = [])).push(r);
  }
  let i = [];
  for (let r in n)
    i.push(new xX(n[r]).range(+r));
  return Wt.of(i, !0);
}
const UX = /* @__PURE__ */ CE({
  class: "cm-gutter-lint",
  markers: (t) => t.state.field(XA)
}), XA = /* @__PURE__ */ ri.define({
  create() {
    return Wt.empty;
  },
  update(t, e) {
    t = t.map(e.changes);
    let n = e.state.facet(Xp).markerFilter;
    for (let i of e.effects)
      if (i.is(Gp)) {
        let r = i.value;
        n && (r = n(r || [])), t = VX(e.state.doc, r.slice(0));
      }
    return t;
  }
}), Gb = /* @__PURE__ */ St.define(), QA = /* @__PURE__ */ ri.define({
  create() {
    return null;
  },
  update(t, e) {
    return t && e.docChanged && (t = WA(e, t) ? null : Object.assign(Object.assign({}, t), { pos: e.changes.mapPos(t.pos) })), e.effects.reduce((n, i) => i.is(Gb) ? i.value : n, t);
  },
  provide: (t) => Bp.from(t)
}), HX = /* @__PURE__ */ tt.baseTheme({
  ".cm-gutter-lint": {
    width: "1.4em",
    "& .cm-gutterElement": {
      padding: ".2em"
    }
  },
  ".cm-lint-marker": {
    width: "1em",
    height: "1em"
  },
  ".cm-lint-marker-info": {
    content: /* @__PURE__ */ Ch('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')
  },
  ".cm-lint-marker-warning": {
    content: /* @__PURE__ */ Ch('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')
  },
  ".cm-lint-marker-error": {
    content: /* @__PURE__ */ Ch('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')
  }
}), Xp = /* @__PURE__ */ nt.define({
  combine(t) {
    return Wr(t, {
      hoverTime: 300,
      markerFilter: null,
      tooltipFilter: null
    });
  }
});
function WX(t = {}) {
  return [Xp.of(t), XA, UX, HX, QA];
}
const qX = /* @__PURE__ */ (() => [
  eK(),
  iK(),
  CJ(),
  mG(),
  HK(),
  hJ(),
  bJ(),
  Rt.allowMultipleSelections.of(!0),
  RK(),
  qE(KK, { fallback: !0 }),
  eG(),
  pX(),
  EX(),
  LJ(),
  xJ(),
  TJ(),
  kY(),
  jp.of([
    ..._X,
    ...mY,
    ...UY,
    ...MG,
    ...zK,
    ...HA,
    ...DX
  ])
])();
class Dd {
  constructor(e, n, i, r, s, o, l, a, c, u = 0, f) {
    this.p = e, this.stack = n, this.state = i, this.reducePos = r, this.pos = s, this.score = o, this.buffer = l, this.bufferBase = a, this.curContext = c, this.lookAhead = u, this.parent = f;
  }
  toString() {
    return `[${this.stack.filter((e, n) => n % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
  }
  static start(e, n, i = 0) {
    let r = e.parser.context;
    return new Dd(e, [], n, i, i, 0, [], 0, r ? new jC(r, r.start) : null, 0, null);
  }
  get context() {
    return this.curContext ? this.curContext.context : null;
  }
  pushState(e, n) {
    this.stack.push(this.state, n, this.bufferBase + this.buffer.length), this.state = e;
  }
  reduce(e) {
    let n = e >> 19, i = e & 65535, { parser: r } = this.p, s = r.dynamicPrecedence(i);
    if (s && (this.score += s), n == 0) {
      this.pushState(r.getGoto(this.state, i, !0), this.reducePos), i < r.minRepeatTerm && this.storeNode(i, this.reducePos, this.reducePos, 4, !0), this.reduceContext(i, this.reducePos);
      return;
    }
    let o = this.stack.length - (n - 1) * 3 - (e & 262144 ? 6 : 0), l = this.stack[o - 2], a = this.stack[o - 1], c = this.bufferBase + this.buffer.length - a;
    if (i < r.minRepeatTerm || e & 131072) {
      let u = r.stateFlag(this.state, 1) ? this.pos : this.reducePos;
      this.storeNode(i, l, u, c + 4, !0);
    }
    if (e & 262144)
      this.state = this.stack[o];
    else {
      let u = this.stack[o - 3];
      this.state = r.getGoto(u, i, !0);
    }
    for (; this.stack.length > o; )
      this.stack.pop();
    this.reduceContext(i, l);
  }
  storeNode(e, n, i, r = 4, s = !1) {
    if (e == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
      let o = this, l = this.buffer.length;
      if (l == 0 && o.parent && (l = o.bufferBase - o.parent.bufferBase, o = o.parent), l > 0 && o.buffer[l - 4] == 0 && o.buffer[l - 1] > -1) {
        if (n == i)
          return;
        if (o.buffer[l - 2] >= n) {
          o.buffer[l - 2] = i;
          return;
        }
      }
    }
    if (!s || this.pos == i)
      this.buffer.push(e, n, i, r);
    else {
      let o = this.buffer.length;
      if (o > 0 && this.buffer[o - 4] != 0)
        for (; o > 0 && this.buffer[o - 2] > i; )
          this.buffer[o] = this.buffer[o - 4], this.buffer[o + 1] = this.buffer[o - 3], this.buffer[o + 2] = this.buffer[o - 2], this.buffer[o + 3] = this.buffer[o - 1], o -= 4, r > 4 && (r -= 4);
      this.buffer[o] = e, this.buffer[o + 1] = n, this.buffer[o + 2] = i, this.buffer[o + 3] = r;
    }
  }
  shift(e, n, i) {
    let r = this.pos;
    if (e & 131072)
      this.pushState(e & 65535, this.pos);
    else if (e & 262144)
      this.pos = i, this.shiftContext(n, r), n <= this.p.parser.maxNode && this.buffer.push(n, r, i, 4);
    else {
      let s = e, { parser: o } = this.p;
      (i > this.pos || n <= o.maxNode) && (this.pos = i, o.stateFlag(s, 1) || (this.reducePos = i)), this.pushState(s, r), this.shiftContext(n, r), n <= o.maxNode && this.buffer.push(n, r, i, 4);
    }
  }
  apply(e, n, i) {
    e & 65536 ? this.reduce(e) : this.shift(e, n, i);
  }
  useNode(e, n) {
    let i = this.p.reused.length - 1;
    (i < 0 || this.p.reused[i] != e) && (this.p.reused.push(e), i++);
    let r = this.pos;
    this.reducePos = this.pos = r + e.length, this.pushState(n, r), this.buffer.push(i, r, this.reducePos, -1), this.curContext && this.updateContext(this.curContext.tracker.reuse(this.curContext.context, e, this, this.p.stream.reset(this.pos - e.length)));
  }
  split() {
    let e = this, n = e.buffer.length;
    for (; n > 0 && e.buffer[n - 2] > e.reducePos; )
      n -= 4;
    let i = e.buffer.slice(n), r = e.bufferBase + n;
    for (; e && r == e.bufferBase; )
      e = e.parent;
    return new Dd(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, i, r, this.curContext, this.lookAhead, e);
  }
  recoverByDelete(e, n) {
    let i = e <= this.p.parser.maxNode;
    i && this.storeNode(e, this.pos, n, 4), this.storeNode(0, this.pos, n, i ? 8 : 4), this.pos = this.reducePos = n, this.score -= 190;
  }
  canShift(e) {
    for (let n = new JX(this); ; ) {
      let i = this.p.parser.stateSlot(n.state, 4) || this.p.parser.hasAction(n.state, e);
      if (i == 0)
        return !1;
      if (!(i & 65536))
        return !0;
      n.reduce(i);
    }
  }
  recoverByInsert(e) {
    if (this.stack.length >= 300)
      return [];
    let n = this.p.parser.nextStates(this.state);
    if (n.length > 4 << 1 || this.stack.length >= 120) {
      let r = [];
      for (let s = 0, o; s < n.length; s += 2)
        (o = n[s + 1]) != this.state && this.p.parser.hasAction(o, e) && r.push(n[s], o);
      if (this.stack.length < 120)
        for (let s = 0; r.length < 4 << 1 && s < n.length; s += 2) {
          let o = n[s + 1];
          r.some((l, a) => a & 1 && l == o) || r.push(n[s], o);
        }
      n = r;
    }
    let i = [];
    for (let r = 0; r < n.length && i.length < 4; r += 2) {
      let s = n[r + 1];
      if (s == this.state)
        continue;
      let o = this.split();
      o.pushState(s, this.pos), o.storeNode(0, o.pos, o.pos, 4, !0), o.shiftContext(n[r], this.pos), o.score -= 200, i.push(o);
    }
    return i;
  }
  forceReduce() {
    let e = this.p.parser.stateSlot(this.state, 5);
    if (!(e & 65536))
      return !1;
    let { parser: n } = this.p;
    if (!n.validAction(this.state, e)) {
      let i = e >> 19, r = e & 65535, s = this.stack.length - i * 3;
      if (s < 0 || n.getGoto(this.stack[s], r, !1) < 0)
        return !1;
      this.storeNode(0, this.reducePos, this.reducePos, 4, !0), this.score -= 100;
    }
    return this.reducePos = this.pos, this.reduce(e), !0;
  }
  forceAll() {
    for (; !this.p.parser.stateFlag(this.state, 2); )
      if (!this.forceReduce()) {
        this.storeNode(0, this.pos, this.pos, 4, !0);
        break;
      }
    return this;
  }
  get deadEnd() {
    if (this.stack.length != 3)
      return !1;
    let { parser: e } = this.p;
    return e.data[e.stateSlot(this.state, 1)] == 65535 && !e.stateSlot(this.state, 4);
  }
  restart() {
    this.state = this.stack[0], this.stack.length = 0;
  }
  sameState(e) {
    if (this.state != e.state || this.stack.length != e.stack.length)
      return !1;
    for (let n = 0; n < this.stack.length; n += 3)
      if (this.stack[n] != e.stack[n])
        return !1;
    return !0;
  }
  get parser() {
    return this.p.parser;
  }
  dialectEnabled(e) {
    return this.p.parser.dialect.flags[e];
  }
  shiftContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.shift(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  reduceContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.reduce(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  emitContext() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -3) && this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);
  }
  emitLookAhead() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -4) && this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);
  }
  updateContext(e) {
    if (e != this.curContext.context) {
      let n = new jC(this.curContext.tracker, e);
      n.hash != this.curContext.hash && this.emitContext(), this.curContext = n;
    }
  }
  setLookAhead(e) {
    e > this.lookAhead && (this.emitLookAhead(), this.lookAhead = e);
  }
  close() {
    this.curContext && this.curContext.tracker.strict && this.emitContext(), this.lookAhead > 0 && this.emitLookAhead();
  }
}
class jC {
  constructor(e, n) {
    this.tracker = e, this.context = n, this.hash = e.strict ? e.hash(n) : 0;
  }
}
var BC;
(function(t) {
  t[t.Insert = 200] = "Insert", t[t.Delete = 190] = "Delete", t[t.Reduce = 100] = "Reduce", t[t.MaxNext = 4] = "MaxNext", t[t.MaxInsertStackDepth = 300] = "MaxInsertStackDepth", t[t.DampenInsertStackDepth = 120] = "DampenInsertStackDepth";
})(BC || (BC = {}));
class JX {
  constructor(e) {
    this.start = e, this.state = e.state, this.stack = e.stack, this.base = this.stack.length;
  }
  reduce(e) {
    let n = e & 65535, i = e >> 19;
    i == 0 ? (this.stack == this.start.stack && (this.stack = this.stack.slice()), this.stack.push(this.state, 0, 0), this.base += 3) : this.base -= (i - 1) * 3;
    let r = this.start.p.parser.getGoto(this.stack[this.base - 3], n, !0);
    this.state = r;
  }
}
class Nd {
  constructor(e, n, i) {
    this.stack = e, this.pos = n, this.index = i, this.buffer = e.buffer, this.index == 0 && this.maybeNext();
  }
  static create(e, n = e.bufferBase + e.buffer.length) {
    return new Nd(e, n, n - e.bufferBase);
  }
  maybeNext() {
    let e = this.stack.parent;
    e != null && (this.index = this.stack.bufferBase - e.bufferBase, this.stack = e, this.buffer = e.buffer);
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  next() {
    this.index -= 4, this.pos -= 4, this.index == 0 && this.maybeNext();
  }
  fork() {
    return new Nd(this.stack, this.pos, this.index);
  }
}
class Sh {
  constructor() {
    this.start = -1, this.value = -1, this.end = -1, this.extended = -1, this.lookAhead = 0, this.mask = 0, this.context = 0;
  }
}
const xC = new Sh();
class KX {
  constructor(e, n) {
    this.input = e, this.ranges = n, this.chunk = "", this.chunkOff = 0, this.chunk2 = "", this.chunk2Pos = 0, this.next = -1, this.token = xC, this.rangeIndex = 0, this.pos = this.chunkPos = n[0].from, this.range = n[0], this.end = n[n.length - 1].to, this.readNext();
  }
  resolveOffset(e, n) {
    let i = this.range, r = this.rangeIndex, s = this.pos + e;
    for (; s < i.from; ) {
      if (!r)
        return null;
      let o = this.ranges[--r];
      s -= i.from - o.to, i = o;
    }
    for (; n < 0 ? s > i.to : s >= i.to; ) {
      if (r == this.ranges.length - 1)
        return null;
      let o = this.ranges[++r];
      s += o.from - i.to, i = o;
    }
    return s;
  }
  clipPos(e) {
    if (e >= this.range.from && e < this.range.to)
      return e;
    for (let n of this.ranges)
      if (n.to > e)
        return Math.max(e, n.from);
    return this.end;
  }
  peek(e) {
    let n = this.chunkOff + e, i, r;
    if (n >= 0 && n < this.chunk.length)
      i = this.pos + e, r = this.chunk.charCodeAt(n);
    else {
      let s = this.resolveOffset(e, 1);
      if (s == null)
        return -1;
      if (i = s, i >= this.chunk2Pos && i < this.chunk2Pos + this.chunk2.length)
        r = this.chunk2.charCodeAt(i - this.chunk2Pos);
      else {
        let o = this.rangeIndex, l = this.range;
        for (; l.to <= i; )
          l = this.ranges[++o];
        this.chunk2 = this.input.chunk(this.chunk2Pos = i), i + this.chunk2.length > l.to && (this.chunk2 = this.chunk2.slice(0, l.to - i)), r = this.chunk2.charCodeAt(0);
      }
    }
    return i >= this.token.lookAhead && (this.token.lookAhead = i + 1), r;
  }
  acceptToken(e, n = 0) {
    let i = n ? this.resolveOffset(n, -1) : this.pos;
    if (i == null || i < this.token.start)
      throw new RangeError("Token end out of bounds");
    this.token.value = e, this.token.end = i;
  }
  getChunk() {
    if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
      let { chunk: e, chunkPos: n } = this;
      this.chunk = this.chunk2, this.chunkPos = this.chunk2Pos, this.chunk2 = e, this.chunk2Pos = n, this.chunkOff = this.pos - this.chunkPos;
    } else {
      this.chunk2 = this.chunk, this.chunk2Pos = this.chunkPos;
      let e = this.input.chunk(this.pos), n = this.pos + e.length;
      this.chunk = n > this.range.to ? e.slice(0, this.range.to - this.pos) : e, this.chunkPos = this.pos, this.chunkOff = 0;
    }
  }
  readNext() {
    return this.chunkOff >= this.chunk.length && (this.getChunk(), this.chunkOff == this.chunk.length) ? this.next = -1 : this.next = this.chunk.charCodeAt(this.chunkOff);
  }
  advance(e = 1) {
    for (this.chunkOff += e; this.pos + e >= this.range.to; ) {
      if (this.rangeIndex == this.ranges.length - 1)
        return this.setDone();
      e -= this.range.to - this.pos, this.range = this.ranges[++this.rangeIndex], this.pos = this.range.from;
    }
    return this.pos += e, this.pos >= this.token.lookAhead && (this.token.lookAhead = this.pos + 1), this.readNext();
  }
  setDone() {
    return this.pos = this.chunkPos = this.end, this.range = this.ranges[this.rangeIndex = this.ranges.length - 1], this.chunk = "", this.next = -1;
  }
  reset(e, n) {
    if (n ? (this.token = n, n.start = e, n.lookAhead = e + 1, n.value = n.extended = -1) : this.token = xC, this.pos != e) {
      if (this.pos = e, e == this.end)
        return this.setDone(), this;
      for (; e < this.range.from; )
        this.range = this.ranges[--this.rangeIndex];
      for (; e >= this.range.to; )
        this.range = this.ranges[++this.rangeIndex];
      e >= this.chunkPos && e < this.chunkPos + this.chunk.length ? this.chunkOff = e - this.chunkPos : (this.chunk = "", this.chunkOff = 0), this.readNext();
    }
    return this;
  }
  read(e, n) {
    if (e >= this.chunkPos && n <= this.chunkPos + this.chunk.length)
      return this.chunk.slice(e - this.chunkPos, n - this.chunkPos);
    if (e >= this.chunk2Pos && n <= this.chunk2Pos + this.chunk2.length)
      return this.chunk2.slice(e - this.chunk2Pos, n - this.chunk2Pos);
    if (e >= this.range.from && n <= this.range.to)
      return this.input.read(e, n);
    let i = "";
    for (let r of this.ranges) {
      if (r.from >= n)
        break;
      r.to > e && (i += this.input.read(Math.max(r.from, e), Math.min(r.to, n)));
    }
    return i;
  }
}
class Eh {
  constructor(e, n) {
    this.data = e, this.id = n;
  }
  token(e, n) {
    GX(this.data, e, n, this.id);
  }
}
Eh.prototype.contextual = Eh.prototype.fallback = Eh.prototype.extend = !1;
function GX(t, e, n, i) {
  let r = 0, s = 1 << i, { parser: o } = n.p, { dialect: l } = o;
  e:
    for (; s & t[r]; ) {
      let a = t[r + 1];
      for (let h = r + 3; h < a; h += 2)
        if ((t[h + 1] & s) > 0) {
          let d = t[h];
          if (l.allows(d) && (e.token.value == -1 || e.token.value == d || o.overrides(d, e.token.value))) {
            e.acceptToken(d);
            break;
          }
        }
      let c = e.next, u = 0, f = t[r + 2];
      if (e.next < 0 && f > u && t[a + f * 3 - 3] == 65535 && t[a + f * 3 - 3] == 65535) {
        r = t[a + f * 3 - 1];
        continue e;
      }
      for (; u < f; ) {
        let h = u + f >> 1, d = a + h + (h << 1), p = t[d], g = t[d + 1] || 65536;
        if (c < p)
          f = h;
        else if (c >= g)
          u = h + 1;
        else {
          r = t[d + 2], e.advance();
          continue e;
        }
      }
      break;
    }
}
function Yf(t, e = Uint16Array) {
  if (typeof t != "string")
    return t;
  let n = null;
  for (let i = 0, r = 0; i < t.length; ) {
    let s = 0;
    for (; ; ) {
      let o = t.charCodeAt(i++), l = !1;
      if (o == 126) {
        s = 65535;
        break;
      }
      o >= 92 && o--, o >= 34 && o--;
      let a = o - 32;
      if (a >= 46 && (a -= 46, l = !0), s += a, l)
        break;
      s *= 46;
    }
    n ? n[r++] = s : n = new e(s);
  }
  return n;
}
const Or = typeof process < "u" && process.env && /\bparse\b/.test(process.env.LOG);
let cm = null;
var FC;
(function(t) {
  t[t.Margin = 25] = "Margin";
})(FC || (FC = {}));
function zC(t, e, n) {
  let i = t.cursor(Si.IncludeAnonymous);
  for (i.moveTo(e); ; )
    if (!(n < 0 ? i.childBefore(e) : i.childAfter(e)))
      for (; ; ) {
        if ((n < 0 ? i.to < e : i.from > e) && !i.type.isError)
          return n < 0 ? Math.max(0, Math.min(i.to - 1, e - 25)) : Math.min(t.length, Math.max(i.from + 1, e + 25));
        if (n < 0 ? i.prevSibling() : i.nextSibling())
          break;
        if (!i.parent())
          return n < 0 ? 0 : t.length;
      }
}
class YX {
  constructor(e, n) {
    this.fragments = e, this.nodeSet = n, this.i = 0, this.fragment = null, this.safeFrom = -1, this.safeTo = -1, this.trees = [], this.start = [], this.index = [], this.nextFragment();
  }
  nextFragment() {
    let e = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
    if (e) {
      for (this.safeFrom = e.openStart ? zC(e.tree, e.from + e.offset, 1) - e.offset : e.from, this.safeTo = e.openEnd ? zC(e.tree, e.to + e.offset, -1) - e.offset : e.to; this.trees.length; )
        this.trees.pop(), this.start.pop(), this.index.pop();
      this.trees.push(e.tree), this.start.push(-e.offset), this.index.push(0), this.nextStart = this.safeFrom;
    } else
      this.nextStart = 1e9;
  }
  nodeAt(e) {
    if (e < this.nextStart)
      return null;
    for (; this.fragment && this.safeTo <= e; )
      this.nextFragment();
    if (!this.fragment)
      return null;
    for (; ; ) {
      let n = this.trees.length - 1;
      if (n < 0)
        return this.nextFragment(), null;
      let i = this.trees[n], r = this.index[n];
      if (r == i.children.length) {
        this.trees.pop(), this.start.pop(), this.index.pop();
        continue;
      }
      let s = i.children[r], o = this.start[n] + i.positions[r];
      if (o > e)
        return this.nextStart = o, null;
      if (s instanceof Gn) {
        if (o == e) {
          if (o < this.safeFrom)
            return null;
          let l = o + s.length;
          if (l <= this.safeTo) {
            let a = s.prop(Dt.lookAhead);
            if (!a || l + a < this.fragment.to)
              return s;
          }
        }
        this.index[n]++, o + s.length >= Math.max(this.safeFrom, e) && (this.trees.push(s), this.start.push(o), this.index.push(0));
      } else
        this.index[n]++, this.nextStart = o + s.length;
    }
  }
}
class XX {
  constructor(e, n) {
    this.stream = n, this.tokens = [], this.mainToken = null, this.actions = [], this.tokens = e.tokenizers.map((i) => new Sh());
  }
  getActions(e) {
    let n = 0, i = null, { parser: r } = e.p, { tokenizers: s } = r, o = r.stateSlot(e.state, 3), l = e.curContext ? e.curContext.hash : 0, a = 0;
    for (let c = 0; c < s.length; c++) {
      if (!(1 << c & o))
        continue;
      let u = s[c], f = this.tokens[c];
      if (!(i && !u.fallback) && ((u.contextual || f.start != e.pos || f.mask != o || f.context != l) && (this.updateCachedToken(f, u, e), f.mask = o, f.context = l), f.lookAhead > f.end + 25 && (a = Math.max(f.lookAhead, a)), f.value != 0)) {
        let h = n;
        if (f.extended > -1 && (n = this.addActions(e, f.extended, f.end, n)), n = this.addActions(e, f.value, f.end, n), !u.extend && (i = f, n > h))
          break;
      }
    }
    for (; this.actions.length > n; )
      this.actions.pop();
    return a && e.setLookAhead(a), !i && e.pos == this.stream.end && (i = new Sh(), i.value = e.p.parser.eofTerm, i.start = i.end = e.pos, n = this.addActions(e, i.value, i.end, n)), this.mainToken = i, this.actions;
  }
  getMainToken(e) {
    if (this.mainToken)
      return this.mainToken;
    let n = new Sh(), { pos: i, p: r } = e;
    return n.start = i, n.end = Math.min(i + 1, r.stream.end), n.value = i == r.stream.end ? r.parser.eofTerm : 0, n;
  }
  updateCachedToken(e, n, i) {
    let r = this.stream.clipPos(i.pos);
    if (n.token(this.stream.reset(r, e), i), e.value > -1) {
      let { parser: s } = i.p;
      for (let o = 0; o < s.specialized.length; o++)
        if (s.specialized[o] == e.value) {
          let l = s.specializers[o](this.stream.read(e.start, e.end), i);
          if (l >= 0 && i.p.parser.dialect.allows(l >> 1)) {
            l & 1 ? e.extended = l >> 1 : e.value = l >> 1;
            break;
          }
        }
    } else
      e.value = 0, e.end = this.stream.clipPos(r + 1);
  }
  putAction(e, n, i, r) {
    for (let s = 0; s < r; s += 3)
      if (this.actions[s] == e)
        return r;
    return this.actions[r++] = e, this.actions[r++] = n, this.actions[r++] = i, r;
  }
  addActions(e, n, i, r) {
    let { state: s } = e, { parser: o } = e.p, { data: l } = o;
    for (let a = 0; a < 2; a++)
      for (let c = o.stateSlot(s, a ? 2 : 1); ; c += 3) {
        if (l[c] == 65535)
          if (l[c + 1] == 1)
            c = Fs(l, c + 2);
          else {
            r == 0 && l[c + 1] == 2 && (r = this.putAction(Fs(l, c + 2), n, i, r));
            break;
          }
        l[c] == n && (r = this.putAction(Fs(l, c + 1), n, i, r));
      }
    return r;
  }
}
var VC;
(function(t) {
  t[t.Distance = 5] = "Distance", t[t.MaxRemainingPerStep = 3] = "MaxRemainingPerStep", t[t.MinBufferLengthPrune = 500] = "MinBufferLengthPrune", t[t.ForceReduceLimit = 10] = "ForceReduceLimit", t[t.CutDepth = 15e3] = "CutDepth", t[t.CutTo = 9e3] = "CutTo";
})(VC || (VC = {}));
class QX {
  constructor(e, n, i, r) {
    this.parser = e, this.input = n, this.ranges = r, this.recovering = 0, this.nextStackID = 9812, this.minStackPos = 0, this.reused = [], this.stoppedAt = null, this.stream = new KX(n, r), this.tokens = new XX(e, this.stream), this.topTerm = e.top[1];
    let { from: s } = r[0];
    this.stacks = [Dd.start(this, e.top[0], s)], this.fragments = i.length && this.stream.end - s > e.bufferLength * 4 ? new YX(i, e.nodeSet) : null;
  }
  get parsedPos() {
    return this.minStackPos;
  }
  advance() {
    let e = this.stacks, n = this.minStackPos, i = this.stacks = [], r, s;
    for (let o = 0; o < e.length; o++) {
      let l = e[o];
      for (; ; ) {
        if (this.tokens.mainToken = null, l.pos > n)
          i.push(l);
        else {
          if (this.advanceStack(l, i, e))
            continue;
          {
            r || (r = [], s = []), r.push(l);
            let a = this.tokens.getMainToken(l);
            s.push(a.value, a.end);
          }
        }
        break;
      }
    }
    if (!i.length) {
      let o = r && $X(r);
      if (o)
        return this.stackToTree(o);
      if (this.parser.strict)
        throw Or && r && console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none")), new SyntaxError("No parse at " + n);
      this.recovering || (this.recovering = 5);
    }
    if (this.recovering && r) {
      let o = this.stoppedAt != null && r[0].pos > this.stoppedAt ? r[0] : this.runRecovery(r, s, i);
      if (o)
        return this.stackToTree(o.forceAll());
    }
    if (this.recovering) {
      let o = this.recovering == 1 ? 1 : this.recovering * 3;
      if (i.length > o)
        for (i.sort((l, a) => a.score - l.score); i.length > o; )
          i.pop();
      i.some((l) => l.reducePos > n) && this.recovering--;
    } else if (i.length > 1) {
      e:
        for (let o = 0; o < i.length - 1; o++) {
          let l = i[o];
          for (let a = o + 1; a < i.length; a++) {
            let c = i[a];
            if (l.sameState(c) || l.buffer.length > 500 && c.buffer.length > 500)
              if ((l.score - c.score || l.buffer.length - c.buffer.length) > 0)
                i.splice(a--, 1);
              else {
                i.splice(o--, 1);
                continue e;
              }
          }
        }
    }
    this.minStackPos = i[0].pos;
    for (let o = 1; o < i.length; o++)
      i[o].pos < this.minStackPos && (this.minStackPos = i[o].pos);
    return null;
  }
  stopAt(e) {
    if (this.stoppedAt != null && this.stoppedAt < e)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = e;
  }
  advanceStack(e, n, i) {
    let r = e.pos, { parser: s } = this, o = Or ? this.stackID(e) + " -> " : "";
    if (this.stoppedAt != null && r > this.stoppedAt)
      return e.forceReduce() ? e : null;
    if (this.fragments) {
      let c = e.curContext && e.curContext.tracker.strict, u = c ? e.curContext.hash : 0;
      for (let f = this.fragments.nodeAt(r); f; ) {
        let h = this.parser.nodeSet.types[f.type.id] == f.type ? s.getGoto(e.state, f.type.id) : -1;
        if (h > -1 && f.length && (!c || (f.prop(Dt.contextHash) || 0) == u))
          return e.useNode(f, h), Or && console.log(o + this.stackID(e) + ` (via reuse of ${s.getName(f.type.id)})`), !0;
        if (!(f instanceof Gn) || f.children.length == 0 || f.positions[0] > 0)
          break;
        let d = f.children[0];
        if (d instanceof Gn && f.positions[0] == 0)
          f = d;
        else
          break;
      }
    }
    let l = s.stateSlot(e.state, 4);
    if (l > 0)
      return e.reduce(l), Or && console.log(o + this.stackID(e) + ` (via always-reduce ${s.getName(l & 65535)})`), !0;
    if (e.stack.length >= 15e3)
      for (; e.stack.length > 9e3 && e.forceReduce(); )
        ;
    let a = this.tokens.getActions(e);
    for (let c = 0; c < a.length; ) {
      let u = a[c++], f = a[c++], h = a[c++], d = c == a.length || !i, p = d ? e : e.split();
      if (p.apply(u, f, h), Or && console.log(o + this.stackID(p) + ` (via ${u & 65536 ? `reduce of ${s.getName(u & 65535)}` : "shift"} for ${s.getName(f)} @ ${r}${p == e ? "" : ", split"})`), d)
        return !0;
      p.pos > r ? n.push(p) : i.push(p);
    }
    return !1;
  }
  advanceFully(e, n) {
    let i = e.pos;
    for (; ; ) {
      if (!this.advanceStack(e, null, null))
        return !1;
      if (e.pos > i)
        return UC(e, n), !0;
    }
  }
  runRecovery(e, n, i) {
    let r = null, s = !1;
    for (let o = 0; o < e.length; o++) {
      let l = e[o], a = n[o << 1], c = n[(o << 1) + 1], u = Or ? this.stackID(l) + " -> " : "";
      if (l.deadEnd && (s || (s = !0, l.restart(), Or && console.log(u + this.stackID(l) + " (restarted)"), this.advanceFully(l, i))))
        continue;
      let f = l.split(), h = u;
      for (let d = 0; f.forceReduce() && d < 10 && (Or && console.log(h + this.stackID(f) + " (via force-reduce)"), !this.advanceFully(f, i)); d++)
        Or && (h = this.stackID(f) + " -> ");
      for (let d of l.recoverByInsert(a))
        Or && console.log(u + this.stackID(d) + " (via recover-insert)"), this.advanceFully(d, i);
      this.stream.end > l.pos ? (c == l.pos && (c++, a = 0), l.recoverByDelete(a, c), Or && console.log(u + this.stackID(l) + ` (via recover-delete ${this.parser.getName(a)})`), UC(l, i)) : (!r || r.score < l.score) && (r = l);
    }
    return r;
  }
  stackToTree(e) {
    return e.close(), Gn.build({
      buffer: Nd.create(e),
      nodeSet: this.parser.nodeSet,
      topID: this.topTerm,
      maxBufferLength: this.parser.bufferLength,
      reused: this.reused,
      start: this.ranges[0].from,
      length: e.pos - this.ranges[0].from,
      minRepeatType: this.parser.minRepeatTerm
    });
  }
  stackID(e) {
    let n = (cm || (cm = /* @__PURE__ */ new WeakMap())).get(e);
    return n || cm.set(e, n = String.fromCodePoint(this.nextStackID++)), n + e;
  }
}
function UC(t, e) {
  for (let n = 0; n < e.length; n++) {
    let i = e[n];
    if (i.pos == t.pos && i.sameState(t)) {
      e[n].score < t.score && (e[n] = t);
      return;
    }
  }
  e.push(t);
}
class ZX {
  constructor(e, n, i) {
    this.source = e, this.flags = n, this.disabled = i;
  }
  allows(e) {
    return !this.disabled || this.disabled[e] == 0;
  }
}
class Ld extends RE {
  constructor(e) {
    if (super(), this.wrappers = [], e.version != 14)
      throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);
    let n = e.nodeNames.split(" ");
    this.minRepeatTerm = n.length;
    for (let l = 0; l < e.repeatNodeCount; l++)
      n.push("");
    let i = Object.keys(e.topRules).map((l) => e.topRules[l][1]), r = [];
    for (let l = 0; l < n.length; l++)
      r.push([]);
    function s(l, a, c) {
      r[l].push([a, a.deserialize(String(c))]);
    }
    if (e.nodeProps)
      for (let l of e.nodeProps) {
        let a = l[0];
        typeof a == "string" && (a = Dt[a]);
        for (let c = 1; c < l.length; ) {
          let u = l[c++];
          if (u >= 0)
            s(u, a, l[c++]);
          else {
            let f = l[c + -u];
            for (let h = -u; h > 0; h--)
              s(l[c++], a, f);
            c++;
          }
        }
      }
    this.nodeSet = new Mb(n.map((l, a) => Ji.define({
      name: a >= this.minRepeatTerm ? void 0 : l,
      id: a,
      props: r[a],
      top: i.indexOf(a) > -1,
      error: a == 0,
      skipped: e.skippedNodes && e.skippedNodes.indexOf(a) > -1
    }))), e.propSources && (this.nodeSet = this.nodeSet.extend(...e.propSources)), this.strict = !1, this.bufferLength = ME;
    let o = Yf(e.tokenData);
    this.context = e.context, this.specializerSpecs = e.specialized || [], this.specialized = new Uint16Array(this.specializerSpecs.length);
    for (let l = 0; l < this.specializerSpecs.length; l++)
      this.specialized[l] = this.specializerSpecs[l].term;
    this.specializers = this.specializerSpecs.map(WC), this.states = Yf(e.states, Uint32Array), this.data = Yf(e.stateData), this.goto = Yf(e.goto), this.maxTerm = e.maxTerm, this.tokenizers = e.tokenizers.map((l) => typeof l == "number" ? new Eh(o, l) : l), this.topRules = e.topRules, this.dialects = e.dialects || {}, this.dynamicPrecedences = e.dynamicPrecedences || null, this.tokenPrecTable = e.tokenPrec, this.termNames = e.termNames || null, this.maxNode = this.nodeSet.types.length - 1, this.dialect = this.parseDialect(), this.top = this.topRules[Object.keys(this.topRules)[0]];
  }
  createParse(e, n, i) {
    let r = new QX(this, e, n, i);
    for (let s of this.wrappers)
      r = s(r, e, n, i);
    return r;
  }
  getGoto(e, n, i = !1) {
    let r = this.goto;
    if (n >= r[0])
      return -1;
    for (let s = r[n + 1]; ; ) {
      let o = r[s++], l = o & 1, a = r[s++];
      if (l && i)
        return a;
      for (let c = s + (o >> 1); s < c; s++)
        if (r[s] == e)
          return a;
      if (l)
        return -1;
    }
  }
  hasAction(e, n) {
    let i = this.data;
    for (let r = 0; r < 2; r++)
      for (let s = this.stateSlot(e, r ? 2 : 1), o; ; s += 3) {
        if ((o = i[s]) == 65535)
          if (i[s + 1] == 1)
            o = i[s = Fs(i, s + 2)];
          else {
            if (i[s + 1] == 2)
              return Fs(i, s + 2);
            break;
          }
        if (o == n || o == 0)
          return Fs(i, s + 1);
      }
    return 0;
  }
  stateSlot(e, n) {
    return this.states[e * 6 + n];
  }
  stateFlag(e, n) {
    return (this.stateSlot(e, 0) & n) > 0;
  }
  validAction(e, n) {
    if (n == this.stateSlot(e, 4))
      return !0;
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = Fs(this.data, i + 2);
        else
          return !1;
      if (n == Fs(this.data, i + 1))
        return !0;
    }
  }
  nextStates(e) {
    let n = [];
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = Fs(this.data, i + 2);
        else
          break;
      if (!(this.data[i + 2] & 1)) {
        let r = this.data[i + 1];
        n.some((s, o) => o & 1 && s == r) || n.push(this.data[i], r);
      }
    }
    return n;
  }
  overrides(e, n) {
    let i = HC(this.data, this.tokenPrecTable, n);
    return i < 0 || HC(this.data, this.tokenPrecTable, e) < i;
  }
  configure(e) {
    let n = Object.assign(Object.create(Ld.prototype), this);
    if (e.props && (n.nodeSet = this.nodeSet.extend(...e.props)), e.top) {
      let i = this.topRules[e.top];
      if (!i)
        throw new RangeError(`Invalid top rule name ${e.top}`);
      n.top = i;
    }
    return e.tokenizers && (n.tokenizers = this.tokenizers.map((i) => {
      let r = e.tokenizers.find((s) => s.from == i);
      return r ? r.to : i;
    })), e.specializers && (n.specializers = this.specializers.slice(), n.specializerSpecs = this.specializerSpecs.map((i, r) => {
      let s = e.specializers.find((l) => l.from == i.external);
      if (!s)
        return i;
      let o = Object.assign(Object.assign({}, i), { external: s.to });
      return n.specializers[r] = WC(o), o;
    })), e.contextTracker && (n.context = e.contextTracker), e.dialect && (n.dialect = this.parseDialect(e.dialect)), e.strict != null && (n.strict = e.strict), e.wrap && (n.wrappers = n.wrappers.concat(e.wrap)), e.bufferLength != null && (n.bufferLength = e.bufferLength), n;
  }
  hasWrappers() {
    return this.wrappers.length > 0;
  }
  getName(e) {
    return this.termNames ? this.termNames[e] : String(e <= this.maxNode && this.nodeSet.types[e].name || e);
  }
  get eofTerm() {
    return this.maxNode + 1;
  }
  get topNode() {
    return this.nodeSet.types[this.top[1]];
  }
  dynamicPrecedence(e) {
    let n = this.dynamicPrecedences;
    return n == null ? 0 : n[e] || 0;
  }
  parseDialect(e) {
    let n = Object.keys(this.dialects), i = n.map(() => !1);
    if (e)
      for (let s of e.split(" ")) {
        let o = n.indexOf(s);
        o >= 0 && (i[o] = !0);
      }
    let r = null;
    for (let s = 0; s < n.length; s++)
      if (!i[s])
        for (let o = this.dialects[n[s]], l; (l = this.data[o++]) != 65535; )
          (r || (r = new Uint8Array(this.maxTerm + 1)))[l] = 1;
    return new ZX(e, i, r);
  }
  static deserialize(e) {
    return new Ld(e);
  }
}
function Fs(t, e) {
  return t[e] | t[e + 1] << 16;
}
function HC(t, e, n) {
  for (let i = e, r; (r = t[i]) != 65535; i++)
    if (r == n)
      return i - e;
  return -1;
}
function $X(t) {
  let e = null;
  for (let n of t) {
    let i = n.p.stoppedAt;
    (n.pos == n.p.stream.end || i != null && n.pos > i) && n.p.parser.stateFlag(n.state, 2) && (!e || e.score < n.score) && (e = n);
  }
  return e;
}
function WC(t) {
  if (t.external) {
    let e = t.extend ? 1 : 0;
    return (n, i) => t.external(n, i) << 1 | e;
  }
  return t.get;
}
const eQ = PE({
  String: xe.string,
  Number: xe.number,
  "True False": xe.bool,
  PropertyName: xe.propertyName,
  Null: xe.null,
  ",": xe.separator,
  "[ ]": xe.squareBracket,
  "{ }": xe.brace
}), tQ = Ld.deserialize({
  version: 14,
  states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",
  stateData: "#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",
  goto: "!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
  nodeNames: "⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",
  maxTerm: 25,
  nodeProps: [
    ["openedBy", 7, "{", 12, "["],
    ["closedBy", 8, "}", 13, "]"]
  ],
  propSources: [eQ],
  skippedNodes: [0],
  repeatNodeCount: 2,
  tokenData: "(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",
  tokenizers: [0],
  topRules: { JsonText: [0, 1] },
  tokenPrec: 0
}), nQ = /* @__PURE__ */ _d.define({
  name: "json",
  parser: /* @__PURE__ */ tQ.configure({
    props: [
      /* @__PURE__ */ LE.add({
        Object: /* @__PURE__ */ cC({ except: /^\s*\}/ }),
        Array: /* @__PURE__ */ cC({ except: /^\s*\]/ })
      }),
      /* @__PURE__ */ BE.add({
        "Object Array": IK
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["[", "{", '"'] },
    indentOnInput: /^\s*[\}\]]$/
  }
});
function iQ() {
  return new wK(nQ);
}
function qC(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), n = we("Line: "), i = we(t[0]), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, s) {
      U(r, e, s), E(e, n), E(e, i);
    },
    p(r, s) {
      s & 1 && ze(i, r[0]);
    },
    d(r) {
      r && V(e);
    }
  };
}
function JC(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), n = we("Column: "), i = we(t[1]), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, s) {
      U(r, e, s), E(e, n), E(e, i);
    },
    p(r, s) {
      s & 2 && ze(i, r[1]);
    },
    d(r) {
      r && V(e);
    }
  };
}
function KC(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("div"), n = we("Selection: "), i = we(t[2]), r = we(" characters"), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(s, o) {
      U(s, e, o), E(e, n), E(e, i), E(e, r);
    },
    p(s, o) {
      o & 4 && ze(i, s[2]);
    },
    d(s) {
      s && V(e);
    }
  };
}
function rQ(t) {
  let e, n, i, r = t[0] !== void 0 && qC(t), s = t[1] !== void 0 && JC(t), o = t[2] !== void 0 && t[2] > 0 && KC(t);
  return {
    c() {
      e = j("div"), r && r.c(), n = Q(), s && s.c(), i = Q(), o && o.c(), b(e, "class", "jse-status-bar svelte-1oo7hnc");
    },
    m(l, a) {
      U(l, e, a), r && r.m(e, null), E(e, n), s && s.m(e, null), E(e, i), o && o.m(e, null);
    },
    p(l, [a]) {
      l[0] !== void 0 ? r ? r.p(l, a) : (r = qC(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), l[1] !== void 0 ? s ? s.p(l, a) : (s = JC(l), s.c(), s.m(e, i)) : s && (s.d(1), s = null), l[2] !== void 0 && l[2] > 0 ? o ? o.p(l, a) : (o = KC(l), o.c(), o.m(e, null)) : o && (o.d(1), o = null);
    },
    i: ve,
    o: ve,
    d(l) {
      l && V(e), r && r.d(), s && s.d(), o && o.d();
    }
  };
}
function sQ(t, e, n) {
  let { editorState: i } = e, r, s, o, l, a;
  return t.$$set = (c) => {
    "editorState" in c && n(3, i = c.editorState);
  }, t.$$.update = () => {
    var c, u, f, h, d;
    t.$$.dirty & 8 && n(4, r = (u = (c = i == null ? void 0 : i.selection) == null ? void 0 : c.main) == null ? void 0 : u.head), t.$$.dirty & 24 && n(5, s = (f = i == null ? void 0 : i.doc) == null ? void 0 : f.lineAt(r)), t.$$.dirty & 32 && n(0, o = s ? s.number : void 0), t.$$.dirty & 48 && n(1, l = s ? r - s.from + 1 : void 0), t.$$.dirty & 8 && n(2, a = (d = (h = i == null ? void 0 : i.selection) == null ? void 0 : h.ranges) == null ? void 0 : d.reduce(
      (p, g) => p + g.to - g.from,
      0
    ));
  }, [o, l, a, i, r, s];
}
class oQ extends Qe {
  constructor(e) {
    super(), Xe(this, e, sQ, rQ, xt, { editorState: 3 });
  }
}
const lQ = oQ, Yb = Zu.define([
  { tag: xe.propertyName, color: "var(--jse-key-color)" },
  { tag: xe.number, color: "var(--jse-value-color-number)" },
  { tag: xe.bool, color: "var(--jse-value-color-boolean)" },
  { tag: xe.string, color: "var(--jse-value-color-string)" },
  { tag: xe.keyword, color: "var(--jse-value-color-null)" }
]), aQ = qE(Yb), cQ = Yb.style;
Yb.style = (t) => cQ(t || []);
function uQ(t) {
  const e = t.slice(), n = e[27](e[9], e[7]);
  return e[86] = n, e;
}
function um(t) {
  const e = t.slice(), n = e[9].length === 0;
  return e[87] = n, e;
}
function GC(t) {
  let e, n;
  return e = new vW({
    props: {
      readOnly: t[0],
      onFormat: t[15],
      onCompact: t[16],
      onSort: t[17],
      onTransform: t[18],
      onToggleSearch: t[19],
      onUndo: t[20],
      onRedo: t[21],
      canFormat: !t[87],
      canCompact: !t[87],
      canSort: !t[87],
      canTransform: !t[87],
      canUndo: t[10],
      canRedo: t[11],
      onRenderMenu: t[3]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.readOnly = i[0]), r[0] & 512 && (s.canFormat = !i[87]), r[0] & 512 && (s.canCompact = !i[87]), r[0] & 512 && (s.canSort = !i[87]), r[0] & 512 && (s.canTransform = !i[87]), r[0] & 1024 && (s.canUndo = i[10]), r[0] & 2048 && (s.canRedo = i[11]), r[0] & 8 && (s.onRenderMenu = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function fQ(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-1yqirn0"></div> 
      <div class="jse-loading svelte-1yqirn0">loading...</div>`, b(e, "class", "jse-contents svelte-1yqirn0");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function hQ(t) {
  let e, n, i, r, s, o = t[86] && YC(t), l = !t[86] && XC(t);
  return {
    c() {
      e = j("div"), n = Q(), o && o.c(), i = Q(), l && l.c(), r = ot(), b(e, "class", "jse-contents svelte-1yqirn0"), Ce(e, "jse-hidden", t[86]);
    },
    m(a, c) {
      U(a, e, c), t[49](e), U(a, n, c), o && o.m(a, c), U(a, i, c), l && l.m(a, c), U(a, r, c), s = !0;
    },
    p(a, c) {
      (!s || c[0] & 134218368) && Ce(e, "jse-hidden", a[86]), a[86] ? o ? (o.p(a, c), c[0] & 640 && P(o, 1)) : (o = YC(a), o.c(), P(o, 1), o.m(i.parentNode, i)) : o && (Se(), x(o, 1, 1, () => {
        o = null;
      }), Ee()), a[86] ? l && (Se(), x(l, 1, 1, () => {
        l = null;
      }), Ee()) : l ? (l.p(a, c), c[0] & 640 && P(l, 1)) : (l = XC(a), l.c(), P(l, 1), l.m(r.parentNode, r));
    },
    i(a) {
      s || (P(o), P(l), s = !0);
    },
    o(a) {
      x(o), x(l), s = !1;
    },
    d(a) {
      a && V(e), t[49](null), a && V(n), o && o.d(a), a && V(i), l && l.d(a), a && V(r);
    }
  };
}
function YC(t) {
  let e, n, i, r = ks(t[9] || "", zh) + "", s, o;
  return e = new Ds({
    props: {
      icon: ql,
      type: "error",
      message: `The JSON document is larger than ${Of(Nm, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Of(t[9].length, 1024)}.`,
      actions: [
        {
          text: "Open anyway",
          title: "Open the document in text mode. This may freeze or crash your browser.",
          onClick: t[22]
        },
        {
          text: "Open in tree mode",
          title: "Open the document in tree mode. Tree mode can handle large documents.",
          onClick: t[23]
        },
        {
          text: "Cancel",
          title: "Cancel opening this large document.",
          onClick: t[24]
        }
      ]
    }
  }), {
    c() {
      me(e.$$.fragment), n = Q(), i = j("div"), s = we(r), b(i, "class", "jse-contents jse-preview svelte-1yqirn0");
    },
    m(l, a) {
      pe(e, l, a), U(l, n, a), U(l, i, a), E(i, s), o = !0;
    },
    p(l, a) {
      const c = {};
      a[0] & 512 && (c.message = `The JSON document is larger than ${Of(Nm, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Of(l[9].length, 1024)}.`), e.$set(c), (!o || a[0] & 512) && r !== (r = ks(l[9] || "", zh) + "") && ze(s, r);
    },
    i(l) {
      o || (P(e.$$.fragment, l), o = !0);
    },
    o(l) {
      x(e.$$.fragment, l), o = !1;
    },
    d(l) {
      ge(e, l), l && V(n), l && V(i);
    }
  };
}
function XC(t) {
  let e, n, i, r, s = t[2] && QC(t), o = t[12] && ZC(t);
  return i = new lb({
    props: {
      validationErrors: t[8],
      selectError: t[25]
    }
  }), {
    c() {
      s && s.c(), e = Q(), o && o.c(), n = Q(), me(i.$$.fragment);
    },
    m(l, a) {
      s && s.m(l, a), U(l, e, a), o && o.m(l, a), U(l, n, a), pe(i, l, a), r = !0;
    },
    p(l, a) {
      l[2] ? s ? (s.p(l, a), a[0] & 4 && P(s, 1)) : (s = QC(l), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Se(), x(s, 1, 1, () => {
        s = null;
      }), Ee()), l[12] ? o ? (o.p(l, a), a[0] & 4096 && P(o, 1)) : (o = ZC(l), o.c(), P(o, 1), o.m(n.parentNode, n)) : o && (Se(), x(o, 1, 1, () => {
        o = null;
      }), Ee());
      const c = {};
      a[0] & 256 && (c.validationErrors = l[8]), i.$set(c);
    },
    i(l) {
      r || (P(s), P(o), P(i.$$.fragment, l), r = !0);
    },
    o(l) {
      x(s), x(o), x(i.$$.fragment, l), r = !1;
    },
    d(l) {
      s && s.d(l), l && V(e), o && o.d(l), l && V(n), ge(i, l);
    }
  };
}
function QC(t) {
  let e, n;
  return e = new lQ({
    props: { editorState: t[6] }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 64 && (s.editorState = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function ZC(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "error",
      icon: ql,
      message: t[12].message,
      actions: t[13],
      onClick: t[50]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.message = i[12].message), r[0] & 8192 && (s.actions = i[13]), r[0] & 4096 && (s.onClick = i[50]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function dQ(t) {
  let e, n, i, r, s, o = t[1] && GC(um(t));
  const l = [hQ, fQ], a = [];
  function c(f, h) {
    return f[14] ? 1 : 0;
  }
  function u(f, h) {
    return h === 0 ? uQ(f) : f;
  }
  return i = c(t), r = a[i] = l[i](u(t, i)), {
    c() {
      e = j("div"), o && o.c(), n = Q(), r.c(), b(e, "class", "jse-text-mode svelte-1yqirn0"), Ce(e, "no-main-menu", !t[1]);
    },
    m(f, h) {
      U(f, e, h), o && o.m(e, null), E(e, n), a[i].m(e, null), t[51](e), s = !0;
    },
    p(f, h) {
      f[1] ? o ? (o.p(um(f), h), h[0] & 2 && P(o, 1)) : (o = GC(um(f)), o.c(), P(o, 1), o.m(e, n)) : o && (Se(), x(o, 1, 1, () => {
        o = null;
      }), Ee()), r.p(u(f, i), h), (!s || h[0] & 2) && Ce(e, "no-main-menu", !f[1]);
    },
    i(f) {
      s || (P(o), P(r), s = !0);
    },
    o(f) {
      x(o), x(r), s = !1;
    },
    d(f) {
      f && V(e), o && o.d(), a[i].d(), t[51](null);
    }
  };
}
function $C(t) {
  return {
    from: t.from,
    to: t.to,
    message: t.message,
    actions: t.actions,
    severity: t.severity,
    source: void 0
  };
}
function pQ(t, e, n) {
  let i, r, { readOnly: s } = e, { mainMenuBar: o } = e, { statusBar: l } = e, { externalContent: a } = e, { indentation: c } = e, { tabSize: u } = e, { escapeUnicodeCharacters: f } = e, { parser: h } = e, { validator: d } = e, { validationParser: p } = e, { onChange: g } = e, { onChangeMode: _ } = e, { onError: m } = e, { onFocus: C } = e, { onBlur: v } = e, { onRenderMenu: k } = e, { onSortModal: S } = e, { onTransformModal: O } = e;
  const w = mi("jsoneditor:TextMode"), A = {
    key: "Mod-i",
    run: Ve,
    shift: ye,
    preventDefault: !0
  }, D = typeof window > "u";
  w("isSSR:", D);
  let R, M, H, J, I = !1, z = [];
  const L = new zs(), K = new zs(), F = new zs(), N = new zs(), te = new zs();
  let ue = a, q = Kh(ue, c, h), re = f;
  or(async () => {
    if (!D)
      try {
        M = mt({
          target: R,
          initialText: oi(q, I) ? "" : i.escapeValue(q),
          readOnly: s,
          indentation: c
        }), Fe();
      } catch (be) {
        console.error(be);
      }
  }), vs(() => {
    M && (w("Destroy CodeMirror editor"), M.destroy());
  });
  let ie = !1, Z = !1;
  const Le = Pa(), Ie = Pa();
  function Fe() {
    M && (w("focus"), M.focus());
  }
  let le = !1;
  ob({
    onMount: or,
    onDestroy: vs,
    getWindow: () => sc(H),
    hasFocus: () => le && document.hasFocus() || Yh(H),
    onFocus: C,
    onBlur: v
  });
  function De(be) {
    w("patch", be);
    const at = h.parse(q), st = Fr(at, be), Nt = r5(at, be);
    return zt({
      text: h.stringify(st, null, c)
    }), {
      json: st,
      previousJson: at,
      undo: Nt,
      redo: be
    };
  }
  function Ve() {
    if (w("format"), !s)
      try {
        const be = h.parse(q);
        zt({
          text: h.stringify(be, null, c)
        });
      } catch (be) {
        m(be);
      }
  }
  function ye() {
    if (w("compact"), !s)
      try {
        const be = h.parse(q);
        zt({ text: h.stringify(be) });
      } catch (be) {
        m(be);
      }
  }
  function fe() {
    if (w("repair"), !s)
      try {
        zt({ text: cs(q) }), n(48, an = wg), n(12, An = void 0);
      } catch (be) {
        m(be);
      }
  }
  function Ae() {
    if (!s)
      try {
        const be = h.parse(q);
        le = !0, S({
          id: Le,
          json: be,
          rootPath: [],
          onSort: async ({ operations: at }) => {
            w("onSort", at), De(at);
          },
          onClose: () => {
            le = !1, Fe();
          }
        });
      } catch (be) {
        m(be);
      }
  }
  function ae({ id: be, rootPath: at, onTransform: st, onClose: Nt }) {
    try {
      const Ft = h.parse(q);
      le = !0, O({
        id: be || Ie,
        json: Ft,
        rootPath: at,
        onTransform: st ? (kt) => {
          st({
            operations: kt,
            json: Ft,
            transformedJson: Fr(Ft, kt)
          });
        } : (kt) => {
          w("onTransform", kt), De(kt);
        },
        onClose: () => {
          le = !1, Fe(), Nt && Nt();
        }
      });
    } catch (Ft) {
      m(Ft);
    }
  }
  function $() {
    s || ae({ rootPath: [] });
  }
  function de() {
    M && (R && R.querySelector(".cm-search") ? Ub(M) : Vb(M));
  }
  function he() {
    s || M && (jb(M), Fe());
  }
  function W() {
    s || M && (Cd(M), Fe());
  }
  function y() {
    n(7, I = !0), zt(a, !0);
  }
  function T() {
    _(vi.tree);
  }
  function B() {
    Tt();
  }
  function X(be) {
    w("select validation error", be);
    const at = je(be);
    ce(at.from, at.to), Fe();
  }
  function G(be) {
    w("select parse error", be);
    const at = vt(be, !1);
    ce(at.from, at.to), Fe();
  }
  function ce(be, at) {
    w("setSelection", { anchor: be, head: at }), M && M.dispatch(M.state.update({
      selection: { anchor: be, head: at },
      scrollIntoView: !0
    }));
  }
  function Ne(be, at) {
    if (at.state.selection.ranges.length === 1) {
      const st = at.state.selection.ranges[0], Nt = q.slice(st.from, st.to);
      if (Nt === "{" || Nt === "[") {
        const Ft = sp.parse(q), kt = Object.keys(Ft.pointers).find((Qn) => {
          var Ki;
          return ((Ki = Ft.pointers[Qn].value) == null ? void 0 : Ki.pos) === st.from;
        }), On = Ft.pointers[kt];
        if (kt && On && On.value && On.valueEnd) {
          w("pointer found, selecting inner contents of path:", kt, On);
          const Qn = On.value.pos + 1, li = On.valueEnd.pos - 1;
          ce(Qn, li);
        }
      }
    }
  }
  function qe() {
    return LX(Di, { delay: py });
  }
  function mt({ target: be, initialText: at, readOnly: st, indentation: Nt }) {
    w("Create CodeMirror editor", { readOnly: st, indentation: Nt });
    const Ft = Rt.create({
      doc: at,
      extensions: [
        jp.of([bY, A]),
        L.of(qe()),
        WX(),
        qX,
        aQ,
        tt.domEventHandlers({ dblclick: Ne }),
        tt.updateListener.of((kt) => {
          n(6, J = kt.state), kt.docChanged && Xn();
        }),
        iQ(),
        PY({ top: !0 }),
        F.of(Rt.readOnly.of(st)),
        K.of(tt.editable.of(!st)),
        te.of(Rt.tabSize.of(u)),
        N.of(ln(Nt)),
        tt.lineWrapping
      ]
    });
    return M = new tt({ state: Ft, parent: be }), M;
  }
  function dt() {
    return M ? i.unescapeValue(M.state.doc.toString()) : "";
  }
  function je(be) {
    const { path: at, message: st } = be, { line: Nt, column: Ft, from: kt, to: On } = _j(i.escapeValue(q), at);
    return {
      path: at,
      line: Nt,
      column: Ft,
      from: kt,
      to: On,
      message: st,
      severity: Do.warning,
      actions: []
    };
  }
  function vt(be, at) {
    const { line: st, column: Nt, position: Ft, message: kt } = be;
    return {
      path: null,
      line: st,
      column: Nt,
      from: Ft || 0,
      to: Ft || 0,
      severity: Do.error,
      message: kt,
      actions: at && !s ? [
        {
          name: "Auto repair",
          apply: () => fe()
        }
      ] : null
    };
  }
  function zt(be, at = !1) {
    const st = Kh(be, c, h), Nt = !Ot(be, ue), Ft = ue;
    ue = be, n(9, q = st), w("setCodeMirrorContent", { isChanged: Nt, forceUpdate: at }), !(!M || !Nt && !at) && (oi(q, I) || M.dispatch({
      changes: {
        from: 0,
        to: M.state.doc.length,
        insert: i.escapeValue(q)
      }
    }), yn(), Nt && en(ue, Ft));
  }
  function Yt() {
    w("refresh");
    const be = M.state.doc.length;
    M.dispatch({
      changes: { from: be, to: be, insert: " " }
    }), M.dispatch({
      changes: { from: be, to: be + 1, insert: "" }
    });
  }
  function Bn() {
    w("forceUpdateText", { escapeUnicodeCharacters: f }), M && M.dispatch({
      changes: {
        from: 0,
        to: M.state.doc.length,
        insert: i.escapeValue(q)
      }
    });
  }
  function Tt() {
    if (!M)
      return;
    const be = dt(), at = be !== q;
    if (w("onChangeCodeMirrorValue", { isChanged: at }), !at)
      return;
    const st = ue;
    n(9, q = be), ue = { text: q }, yn(), en(ue, st);
  }
  function Oe(be) {
    w("updateLinter", be), M && M.dispatch({
      effects: L.reconfigure(qe())
    });
  }
  function si(be) {
    M && (w("updateIndentation", be), M.dispatch({
      effects: N.reconfigure(ln(be))
    }));
  }
  function Jt(be) {
    M && (w("updateTabSize", be), M.dispatch({
      effects: te.reconfigure(Rt.tabSize.of(be))
    }));
  }
  function Kt(be) {
    M && (w("updateReadOnly", be), M.dispatch({
      effects: [
        F.reconfigure(Rt.readOnly.of(be)),
        K.reconfigure(tt.editable.of(!be))
      ]
    }));
  }
  function ln(be) {
    return xp.of(typeof be == "number" ? " ".repeat(be) : be);
  }
  function yn() {
    n(10, ie = yG(M.state) > 0), n(11, Z = wG(M.state) > 0), w({ canUndo: ie, canRedo: Z });
  }
  const Xn = _p(Tt, py);
  function en(be, at) {
    g && g(be, at, {
      contentErrors: Mn(),
      patchResult: null
    });
  }
  function oi(be, at) {
    return be && be.length > Nm && !at;
  }
  let an = wg, An = null;
  function Di() {
    if (oi(q, I))
      return [];
    const be = Mn();
    if (R2(be)) {
      const { parseError: at, isRepairable: st } = be;
      return [$C(vt(at, st))];
    }
    return sV(be) ? be.validationErrors.map(je).map($C) : [];
  }
  function Mn() {
    w("validate:start"), Xn.flush();
    const be = ar(i.escapeValue(q), d, h, p);
    return R2(be) ? (n(48, an = be.isRepairable ? yy : wR), n(12, An = be.parseError), n(8, z = [])) : (n(48, an = wg), n(12, An = null), n(8, z = be.validationErrors)), w("validate:end"), be;
  }
  const ar = Ku(Fz);
  function _e(be) {
    yt[be ? "unshift" : "push"](() => {
      R = be, n(4, R);
    });
  }
  const Re = () => G(An);
  function lt(be) {
    yt[be ? "unshift" : "push"](() => {
      H = be, n(5, H);
    });
  }
  return t.$$set = (be) => {
    "readOnly" in be && n(0, s = be.readOnly), "mainMenuBar" in be && n(1, o = be.mainMenuBar), "statusBar" in be && n(2, l = be.statusBar), "externalContent" in be && n(28, a = be.externalContent), "indentation" in be && n(29, c = be.indentation), "tabSize" in be && n(30, u = be.tabSize), "escapeUnicodeCharacters" in be && n(31, f = be.escapeUnicodeCharacters), "parser" in be && n(32, h = be.parser), "validator" in be && n(33, d = be.validator), "validationParser" in be && n(34, p = be.validationParser), "onChange" in be && n(35, g = be.onChange), "onChangeMode" in be && n(36, _ = be.onChangeMode), "onError" in be && n(37, m = be.onError), "onFocus" in be && n(38, C = be.onFocus), "onBlur" in be && n(39, v = be.onBlur), "onRenderMenu" in be && n(3, k = be.onRenderMenu), "onSortModal" in be && n(40, S = be.onSortModal), "onTransformModal" in be && n(41, O = be.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 1 && (i = G0({
      escapeControlCharacters: !1,
      escapeUnicodeCharacters: f
    })), t.$$.dirty[0] & 268435456 && zt(a), t.$$.dirty[1] & 4 && Oe(d), t.$$.dirty[0] & 536870912 && si(c), t.$$.dirty[0] & 1073741824 && Jt(u), t.$$.dirty[0] & 1 && Kt(s), t.$$.dirty[1] & 65537 && re !== f && (n(47, re = f), Bn()), t.$$.dirty[0] & 1 | t.$$.dirty[1] & 131072 && n(13, r = an === yy && !s ? [
      {
        icon: Ap,
        text: "Auto repair",
        title: "Automatically repair JSON",
        onClick: fe
      }
    ] : []);
  }, [
    s,
    o,
    l,
    k,
    R,
    H,
    J,
    I,
    z,
    q,
    ie,
    Z,
    An,
    r,
    D,
    Ve,
    ye,
    Ae,
    $,
    de,
    he,
    W,
    y,
    T,
    B,
    X,
    G,
    oi,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    S,
    O,
    Fe,
    De,
    ae,
    Yt,
    Mn,
    re,
    an,
    _e,
    Re,
    lt
  ];
}
class gQ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      pQ,
      dQ,
      wt,
      {
        readOnly: 0,
        mainMenuBar: 1,
        statusBar: 2,
        externalContent: 28,
        indentation: 29,
        tabSize: 30,
        escapeUnicodeCharacters: 31,
        parser: 32,
        validator: 33,
        validationParser: 34,
        onChange: 35,
        onChangeMode: 36,
        onError: 37,
        onFocus: 38,
        onBlur: 39,
        onRenderMenu: 3,
        onSortModal: 40,
        onTransformModal: 41,
        focus: 42,
        patch: 43,
        openTransformModal: 44,
        refresh: 45,
        validate: 46
      },
      null,
      [-1, -1, -1]
    );
  }
  get focus() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get openTransformModal() {
    return this.$$.ctx[44];
  }
  get refresh() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
}
const mQ = gQ;
function bQ(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function _Q(t, e, n) {
  let { json: i } = e, { readOnly: r } = e, { historyState: s } = e, { onSort: o } = e, { onTransform: l } = e, { onContextMenu: a } = e, { onUndo: c } = e, { onRedo: u } = e, { onRenderMenu: f } = e, h, d;
  return t.$$set = (p) => {
    "json" in p && n(1, i = p.json), "readOnly" in p && n(2, r = p.readOnly), "historyState" in p && n(3, s = p.historyState), "onSort" in p && n(4, o = p.onSort), "onTransform" in p && n(5, l = p.onTransform), "onContextMenu" in p && n(6, a = p.onContextMenu), "onUndo" in p && n(7, c = p.onUndo), "onRedo" in p && n(8, u = p.onRedo), "onRenderMenu" in p && n(9, f = p.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 510 && n(10, h = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: o,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: l,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: N6,
        title: A0,
        className: "jse-contextmenu",
        onClick: a
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: c,
        disabled: !s.canUndo
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: u,
        disabled: !s.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 1536 && n(0, d = f("table", h) || h);
  }, [
    d,
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h
  ];
}
class yQ extends Qe {
  constructor(e) {
    super(), Xe(this, e, _Q, bQ, wt, {
      json: 1,
      readOnly: 2,
      historyState: 3,
      onSort: 4,
      onTransform: 5,
      onContextMenu: 6,
      onUndo: 7,
      onRedo: 8,
      onRenderMenu: 9
    });
  }
}
const wQ = yQ;
function vQ(t, e, n = Math.min(qt(t) ? t.length : 0, 100)) {
  const i = /* @__PURE__ */ new Set();
  for (let r = 0; r < n; r++)
    (e ? CQ(t[r]) : kQ(t[r])).forEach((o) => i.add(Be(o)));
  return Array.from(i).map(zr);
}
function kQ(t) {
  return En(t) ? Object.keys(t).map((e) => [e]) : [[]];
}
function CQ(t) {
  const e = [];
  function n(i, r) {
    En(i) ? Object.keys(i).forEach((s) => {
      n(i[s], r.concat(s));
    }) : e.push(r);
  }
  return n(t, []), e;
}
function SQ(t, e, n, i, r, s = 80) {
  const o = qt(n) ? n.length : 0, l = EQ(i, r), a = t - s, c = e + 2 * s, u = (m) => i[m] || r;
  let f = 0, h = 0;
  for (; h < a && f < o; )
    h += u(f), f++;
  f > 0 && (f--, h -= u(f));
  let d = f, p = 0;
  for (; p < c && d < o; )
    p += u(d), d++;
  let g = 0;
  for (let m = d; m < o; m++)
    g += u(m);
  const _ = qt(n) ? n.slice(f, d) : [];
  return {
    startIndex: f,
    endIndex: d,
    startHeight: h,
    endHeight: g,
    averageItemHeight: l,
    visibleHeight: p,
    visibleItems: _
  };
}
function fm(t, e, n, i) {
  const { rowIndex: r } = tl(t, e);
  let s = 0;
  for (let o = 0; o < r; o++)
    s += n[o] || i;
  return s;
}
function EQ(t, e) {
  const n = Object.values(t);
  if (Pt(n))
    return e;
  const i = (s, o) => s + o;
  return n.reduce(i) / n.length;
}
function AQ(t, e) {
  const { rowIndex: n, columnIndex: i } = tl(e.focusPath, t);
  if (n > 0) {
    const r = { rowIndex: n - 1, columnIndex: i }, s = Qp(r, t);
    return Lt(s, !1);
  }
  return e;
}
function MQ(t, e, n) {
  const { rowIndex: i, columnIndex: r } = tl(n.focusPath, e);
  if (i < t.length - 1) {
    const s = { rowIndex: i + 1, columnIndex: r }, o = Qp(s, e);
    return Lt(o, !1);
  }
  return n;
}
function OQ(t, e) {
  const { rowIndex: n, columnIndex: i } = tl(e.focusPath, t);
  if (i > 0) {
    const r = { rowIndex: n, columnIndex: i - 1 }, s = Qp(r, t);
    return Lt(s, !1);
  }
  return e;
}
function TQ(t, e) {
  const { rowIndex: n, columnIndex: i } = tl(e.focusPath, t);
  if (i < t.length - 1) {
    const r = { rowIndex: n, columnIndex: i + 1 }, s = Qp(r, t);
    return Lt(s, !1);
  }
  return e;
}
function tl(t, e) {
  const [n, ...i] = t, r = parseInt(n, 10);
  return {
    rowIndex: isNaN(r) ? -1 : r,
    columnIndex: e.findIndex((s) => ja(i, s))
  };
}
function Qp(t, e) {
  const { rowIndex: n, columnIndex: i } = t;
  return [String(n), ...e[i]];
}
function RQ(t, e) {
  const [n, i] = ej(t, (o) => L0(o.path[0])), r = yp(n, PQ), s = KL(r, (o) => {
    const l = {
      row: [],
      columns: {}
    };
    return o.forEach((a) => {
      const c = IQ(a, e);
      c !== -1 ? (l.columns[c] === void 0 && (l.columns[c] = []), l.columns[c].push(a)) : l.row.push(a);
    }), l;
  });
  return {
    root: i,
    rows: s
  };
}
function qa(t, e) {
  if (!(!e || e.length === 0))
    return e.length === 1 ? e[0] : {
      path: t,
      message: "Multiple validation issues: " + e.map((n) => wr(qi(n.path)) + " " + n.message).join(", "),
      severity: Do.warning
    };
}
function PQ(t) {
  return parseInt(t.path[0], 10);
}
function IQ(t, e) {
  const n = tl(t.path, e);
  return n.columnIndex !== -1 ? n.columnIndex : -1;
}
function DQ(t, e, n) {
  return e.some((r) => NQ(t.sortedColumn, r, n)) ? {
    ...t,
    sortedColumn: void 0
  } : t;
}
function NQ(t, e, n) {
  if (!t)
    return !1;
  if (e.op === "replace") {
    const i = zr(e.path), { rowIndex: r, columnIndex: s } = tl(i, n), o = n.findIndex((l) => Ot(l, t.path));
    if (r !== -1 && s !== -1 && s !== o)
      return !1;
  }
  return !0;
}
function LQ(t, e = 2) {
  const n = [];
  function i(r, s) {
    En(r) && s.length < e && Object.keys(r).forEach((o) => {
      i(r[o], s.concat(o));
    }), qt(r) && n.push(s);
  }
  return i(t, []), n;
}
function eS(t, e, n) {
  const i = t.slice();
  return i[9] = e[n], i;
}
function tS(t) {
  let e, n, i;
  const r = [t[9].props];
  var s = t[9].component;
  function o(l) {
    let a = {};
    for (let c = 0; c < r.length; c += 1)
      a = Go(a, r[c]);
    return { props: a };
  }
  return s && (e = ws(s, o())), {
    c() {
      e && me(e.$$.fragment), n = ot();
    },
    m(l, a) {
      e && pe(e, l, a), U(l, n, a), i = !0;
    },
    p(l, a) {
      const c = a & 1 ? Ul(r, [rp(l[9].props)]) : {};
      if (s !== (s = l[9].component)) {
        if (e) {
          Se();
          const u = e;
          x(u.$$.fragment, 1, 0, () => {
            ge(u, 1);
          }), Ee();
        }
        s ? (e = ws(s, o()), me(e.$$.fragment), P(e.$$.fragment, 1), pe(e, n.parentNode, n)) : e = null;
      } else
        s && e.$set(c);
    },
    i(l) {
      i || (e && P(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && x(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && V(n), e && ge(e, l);
    }
  };
}
function jQ(t) {
  let e, n, i = t[0], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = tS(eS(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = ot();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, [l]) {
      if (l & 1) {
        i = o[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = eS(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = tS(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Se(), a = i.length; a < r.length; a += 1)
          s(a);
        Ee();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      Vt(r, o), o && V(e);
    }
  };
}
function BQ(t, e, n) {
  let i, r, { path: s } = e, { value: o } = e, { context: l } = e, { enforceString: a } = e, { selection: c } = e, { searchResultItems: u } = e;
  function f(h, d) {
    return l.onPatch(hx(h, l.getJson()), d);
  }
  return t.$$set = (h) => {
    "path" in h && n(1, s = h.path), "value" in h && n(2, o = h.value), "context" in h && n(3, l = h.context), "enforceString" in h && n(4, a = h.enforceString), "selection" in h && n(5, c = h.selection), "searchResultItems" in h && n(6, u = h.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && Et(c) && jo(c)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: s,
      value: o,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: c,
      searchResultItems: u,
      onPatch: f,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    i
  ];
}
class xQ extends Qe {
  constructor(e) {
    super(), Xe(this, e, BQ, jQ, wt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
}
const FQ = xQ;
function zQ(t) {
  let e, n = ks(t[2].stringify(t[1]), my) + "", i, r, s;
  return {
    c() {
      e = j("button"), i = we(n), b(e, "type", "button"), b(e, "class", "jse-inline-value svelte-l28mqd"), Ce(e, "jse-selected", t[3]);
    },
    m(o, l) {
      U(o, e, l), E(e, i), r || (s = se(e, "dblclick", t[6]), r = !0);
    },
    p(o, [l]) {
      l & 6 && n !== (n = ks(o[2].stringify(o[1]), my) + "") && ze(i, n), l & 8 && Ce(e, "jse-selected", o[3]);
    },
    i: ve,
    o: ve,
    d(o) {
      o && V(e), r = !1, s();
    }
  };
}
function VQ(t, e, n) {
  let i, { path: r } = e, { value: s } = e, { parser: o } = e, { isSelected: l } = e, { onEdit: a } = e;
  const c = () => a(r);
  return t.$$set = (u) => {
    "path" in u && n(0, r = u.path), "value" in u && n(1, s = u.value), "parser" in u && n(2, o = u.parser), "isSelected" in u && n(3, l = u.isSelected), "onEdit" in u && n(4, a = u.onEdit);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(5, i = qt(s) ? s.length : Object.keys(s).length), t.$$.dirty & 34;
  }, [r, s, o, l, a, i, c];
}
class UQ extends Qe {
  constructor(e) {
    super(), Xe(this, e, VQ, zQ, xt, {
      path: 0,
      value: 1,
      parser: 2,
      isSelected: 3,
      onEdit: 4
    });
  }
}
const HQ = UQ;
function nS(t) {
  let e, n, i, r;
  return n = new Mt({
    props: {
      data: t[1] === gr.asc ? dr : Bw
    }
  }), {
    c() {
      e = j("span"), me(n.$$.fragment), b(e, "class", "jse-column-sort-icon svelte-h4fort"), b(e, "title", i = `Currently sorted in ${t[2]} order`);
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o & 2 && (l.data = s[1] === gr.asc ? dr : Bw), n.$set(l), (!r || o & 4 && i !== (i = `Currently sorted in ${s[2]} order`)) && b(e, "title", i);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function WQ(t) {
  let e, n, i = ks(t[3], by) + "", r, s, o, l, a, c, u = t[1] !== void 0 && nS(t);
  return {
    c() {
      e = j("button"), n = j("span"), r = we(i), s = Q(), u && u.c(), b(n, "class", "jse-column-name"), b(e, "type", "button"), b(e, "class", "jse-column-header svelte-h4fort"), b(e, "title", o = t[0] ? t[3] : t[3] + " (Click to sort the data by this column)"), Ce(e, "jse-readonly", t[0]);
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(n, r), E(e, s), u && u.m(e, null), l = !0, a || (c = se(e, "click", t[4]), a = !0);
    },
    p(f, [h]) {
      (!l || h & 8) && i !== (i = ks(f[3], by) + "") && ze(r, i), f[1] !== void 0 ? u ? (u.p(f, h), h & 2 && P(u, 1)) : (u = nS(f), u.c(), P(u, 1), u.m(e, null)) : u && (Se(), x(u, 1, 1, () => {
        u = null;
      }), Ee()), (!l || h & 9 && o !== (o = f[0] ? f[3] : f[3] + " (Click to sort the data by this column)")) && b(e, "title", o), (!l || h & 1) && Ce(e, "jse-readonly", f[0]);
    },
    i(f) {
      l || (P(u), l = !0);
    },
    o(f) {
      x(u), l = !1;
    },
    d(f) {
      f && V(e), u && u.d(), a = !1, c();
    }
  };
}
function qQ(t, e, n) {
  let i, r, s, { path: o } = e, { sortedColumn: l } = e, { readOnly: a } = e, { onSort: c } = e;
  function u() {
    a || c({
      path: o,
      sortDirection: r === gr.asc ? gr.desc : gr.asc
    });
  }
  return t.$$set = (f) => {
    "path" in f && n(5, o = f.path), "sortedColumn" in f && n(6, l = f.sortedColumn), "readOnly" in f && n(0, a = f.readOnly), "onSort" in f && n(7, c = f.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 32 && n(3, i = Pt(o) ? "values" : wr(qi(o))), t.$$.dirty & 96 && n(1, r = Ot(o, l == null ? void 0 : l.path) ? l.sortDirection : void 0), t.$$.dirty & 2 && n(2, s = vR[r]);
  }, [
    a,
    r,
    s,
    i,
    u,
    o,
    l,
    c
  ];
}
class JQ extends Qe {
  constructor(e) {
    super(), Xe(this, e, qQ, WQ, xt, {
      path: 5,
      sortedColumn: 6,
      readOnly: 0,
      onSort: 7
    });
  }
}
const KQ = JQ;
let Xf, Qf;
function ZA(t, e) {
  return Xf || (Qf = /* @__PURE__ */ new WeakMap(), Xf = new ResizeObserver((n) => {
    for (const i of n) {
      const r = Qf.get(i.target);
      r && r(i.target);
    }
  })), Qf.set(t, e), Xf.observe(t), {
    destroy: () => {
      Qf.delete(t), Xf.unobserve(t);
    }
  };
}
function GQ(t) {
  let e, n;
  return e = new Y6({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.items = i[1]), r[0] & 1 && (s.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function YQ(t, e, n) {
  let i, r, s, o, l, a, c, u, f, h, d, { json: p } = e, { documentState: g } = e, { parser: _ } = e, { showTip: m } = e, { onCloseContextMenu: C } = e, { onEditValue: v } = e, { onToggleEnforceString: k } = e, { onCut: S } = e, { onCopy: O } = e, { onPaste: w } = e, { onRemove: A } = e;
  function D() {
    C(), v();
  }
  function R() {
    C(), k();
  }
  function M() {
    C(), S(!0);
  }
  function H() {
    C(), S(!1);
  }
  function J() {
    C(), O(!0);
  }
  function I() {
    C(), O(!1);
  }
  function z() {
    C(), w();
  }
  function L() {
    C(), A();
  }
  let K;
  return t.$$set = (F) => {
    "json" in F && n(2, p = F.json), "documentState" in F && n(3, g = F.documentState), "parser" in F && n(4, _ = F.parser), "showTip" in F && n(0, m = F.showTip), "onCloseContextMenu" in F && n(5, C = F.onCloseContextMenu), "onEditValue" in F && n(6, v = F.onEditValue), "onToggleEnforceString" in F && n(7, k = F.onToggleEnforceString), "onCut" in F && n(8, S = F.onCut), "onCopy" in F && n(9, O = F.onCopy), "onPaste" in F && n(10, w = F.onPaste), "onRemove" in F && n(11, A = F.onRemove);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(18, i = g.selection), t.$$.dirty[0] & 4 && n(21, r = p !== void 0), t.$$.dirty[0] & 262144 && n(13, s = i != null), t.$$.dirty[0] & 270336 && n(22, o = s && Pt(i.focusPath)), t.$$.dirty[0] & 270340 && n(19, l = s ? Ze(p, i.focusPath) : void 0), t.$$.dirty[0] & 524288 && n(17, a = Array.isArray(l) ? "Edit array" : Cn(l) ? "Edit object" : "Edit value"), t.$$.dirty[0] & 2359296 && n(12, c = r && (Bt(i) || Ln(i) || Et(i))), t.$$.dirty[0] & 6295552, t.$$.dirty[0] & 6553600 && r && i != null && (Bt(i) || Et(i)), t.$$.dirty[0] & 6553604 && r && i != null && su(i) && !o && Array.isArray(Ze(p, At(i.focusPath))), t.$$.dirty[0] & 2359296 && n(16, u = r && i != null && su(i)), t.$$.dirty[0] & 589824 && n(14, f = u && !dn(l)), t.$$.dirty[0] & 4096 && n(20, h = c), t.$$.dirty[0] & 1048576, t.$$.dirty[0] & 1056768, t.$$.dirty[0] & 1843200 && h && _l(i) && Cn(l), t.$$.dirty[0] & 1843200 && h && _l(i) && Array.isArray(l), t.$$.dirty[0] & 1843200 && h && _l(i) && dn(l), t.$$.dirty[0] & 786456 && n(15, d = i != null ? Xs(l, g.enforceStringMap, Be(i.focusPath), _) : !1), t.$$.dirty[0] & 258048 && n(1, K = [
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: D,
                  icon: Bc,
                  text: a,
                  title: "Edit the value (Double-click on the value)",
                  disabled: !u
                },
                width: "11em",
                items: [
                  {
                    type: "button",
                    icon: Bc,
                    text: a,
                    title: "Edit the value (Double-click on the value)",
                    onClick: D,
                    disabled: !u
                  },
                  {
                    type: "button",
                    icon: d ? nu : iu,
                    text: "Enforce string",
                    title: "Enforce keeping the value as string when it contains a numeric value",
                    onClick: R,
                    disabled: !f
                  }
                ]
              },
              { type: "separator" },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: M,
                  icon: ga,
                  text: "Cut",
                  title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                  disabled: !c
                },
                width: "10em",
                items: [
                  {
                    type: "button",
                    icon: ga,
                    text: "Cut formatted",
                    title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                    onClick: M,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: ga,
                    text: "Cut compacted",
                    title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                    onClick: H,
                    disabled: !c
                  }
                ]
              },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: J,
                  icon: To,
                  text: "Copy",
                  title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                  disabled: !c
                },
                width: "12em",
                items: [
                  {
                    type: "button",
                    icon: To,
                    text: "Copy formatted",
                    title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                    onClick: J,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: To,
                    text: "Copy compacted",
                    title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                    onClick: I,
                    disabled: !c
                  }
                ]
              },
              {
                type: "button",
                onClick: z,
                icon: I6,
                text: "Paste",
                title: "Paste clipboard contents (Ctrl+V)",
                disabled: !s
              },
              { type: "separator" },
              {
                type: "button",
                onClick: L,
                icon: oc,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !c
              }
            ]
          }
        ]
      }
    ]);
  }, [
    m,
    K,
    p,
    g,
    _,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    c,
    s,
    f,
    d,
    u,
    a,
    i,
    l,
    h,
    r,
    o
  ];
}
class XQ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      YQ,
      GQ,
      wt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditValue: 6,
        onToggleEnforceString: 7,
        onCut: 8,
        onCopy: 9,
        onPaste: 10,
        onRemove: 11
      },
      null,
      [-1, -1]
    );
  }
}
const QQ = XQ;
function iS(t, e, n) {
  const i = t.slice();
  i[12] = e[n];
  const r = Ze(i[0], i[12]).length;
  return i[13] = r, i;
}
function ZQ(t) {
  let e, n;
  return {
    c() {
      e = we(t[5]), n = we(" cannot be opened in table mode. You can open the document in tree mode instead.");
    },
    m(i, r) {
      U(i, e, r), U(i, n, r);
    },
    p(i, r) {
      r & 32 && ze(e, i[5]);
    },
    d(i) {
      i && V(e), i && V(n);
    }
  };
}
function $Q(t) {
  let e;
  return {
    c() {
      e = we(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`);
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function rS(t) {
  let e, n, i, r = wr(qi(t[12])) + "", s, o, l, a, c = t[13] + "", u, f, h = t[13] !== 1 ? "items" : "item", d, p, g, _;
  function m() {
    return t[10](t[12]);
  }
  return {
    c() {
      e = j("button"), n = we(t[6]), i = we(' "'), s = we(r), o = we(`"
        `), l = j("span"), a = we("("), u = we(c), f = Q(), d = we(h), p = we(")"), b(l, "class", "jse-nested-array-count svelte-1te5h1h"), b(e, "type", "button"), b(e, "class", "jse-nested-array-action svelte-1te5h1h");
    },
    m(C, v) {
      U(C, e, v), E(e, n), E(e, i), E(e, s), E(e, o), E(e, l), E(l, a), E(l, u), E(l, f), E(l, d), E(l, p), g || (_ = se(e, "click", m), g = !0);
    },
    p(C, v) {
      t = C, v & 64 && ze(n, t[6]), v & 8 && r !== (r = wr(qi(t[12])) + "") && ze(s, r), v & 9 && c !== (c = t[13] + "") && ze(u, c), v & 9 && h !== (h = t[13] !== 1 ? "items" : "item") && ze(d, h);
    },
    d(C) {
      C && V(e), g = !1, _();
    }
  };
}
function eZ(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m;
  function C(w, A) {
    return w[4] ? $Q : ZQ;
  }
  let v = C(t), k = v(t), S = t[3], O = [];
  for (let w = 0; w < S.length; w += 1)
    O[w] = rS(iS(t, S, w));
  return {
    c() {
      e = j("div"), n = j("div"), i = Q(), r = j("div"), s = j("div"), o = we(t[5]), l = Q(), a = j("div"), k.c(), c = Q();
      for (let w = 0; w < O.length; w += 1)
        O[w].c();
      u = Q(), f = j("button"), h = we(t[6]), d = we(" in tree mode"), p = Q(), g = j("div"), b(n, "class", "jse-space jse-before svelte-1te5h1h"), b(s, "class", "jse-nested-arrays-title"), b(a, "class", "jse-nested-arrays-info svelte-1te5h1h"), b(f, "type", "button"), b(f, "class", "jse-nested-array-action svelte-1te5h1h"), b(r, "class", "jse-nested-arrays svelte-1te5h1h"), b(g, "class", "jse-space jse-after svelte-1te5h1h"), b(e, "class", "jse-table-mode-welcome svelte-1te5h1h");
    },
    m(w, A) {
      U(w, e, A), E(e, n), E(e, i), E(e, r), E(r, s), E(s, o), E(r, l), E(r, a), k.m(a, null), E(r, c);
      for (let D = 0; D < O.length; D += 1)
        O[D].m(r, null);
      E(r, u), E(r, f), E(f, h), E(f, d), E(e, p), E(e, g), _ || (m = se(f, "click", t[11]), _ = !0);
    },
    p(w, [A]) {
      if (A & 32 && ze(o, w[5]), v === (v = C(w)) && k ? k.p(w, A) : (k.d(1), k = v(w), k && (k.c(), k.m(a, null))), A & 75) {
        S = w[3];
        let D;
        for (D = 0; D < S.length; D += 1) {
          const R = iS(w, S, D);
          O[D] ? O[D].p(R, A) : (O[D] = rS(R), O[D].c(), O[D].m(r, u));
        }
        for (; D < O.length; D += 1)
          O[D].d(1);
        O.length = S.length;
      }
      A & 64 && ze(h, w[6]);
    },
    i: ve,
    o: ve,
    d(w) {
      w && V(e), k.d(), Vt(O, w), _ = !1, m();
    }
  };
}
function tZ(t, e, n) {
  let i, r, s, { text: o } = e, { json: l } = e, { readOnly: a } = e, { parser: c } = e, { openJSONEditorModal: u } = e, { onChangeMode: f } = e, h;
  const d = (g) => u(g), p = () => f(vi.tree);
  return t.$$set = (g) => {
    "text" in g && n(7, o = g.text), "json" in g && n(0, l = g.json), "readOnly" in g && n(8, a = g.readOnly), "parser" in g && n(9, c = g.parser), "openJSONEditorModal" in g && n(1, u = g.openJSONEditorModal), "onChangeMode" in g && n(2, f = g.onChangeMode);
  }, t.$$.update = () => {
    t.$$.dirty & 256 && n(6, i = a ? "View" : "Edit"), t.$$.dirty & 1 && n(3, h = l ? LQ(l).slice(0, 99).filter((g) => g.length > 0) : []), t.$$.dirty & 8 && n(4, r = !Pt(h)), t.$$.dirty & 657 && n(5, s = r ? "Object with nested arrays" : l === void 0 && (o === "" || o === void 0) ? "An empty document" : En(l) ? "An object" : qt(l) ? "An empty array" : `A ${j0(l, c)}`);
  }, [
    l,
    u,
    f,
    h,
    r,
    s,
    i,
    o,
    a,
    c,
    d,
    p
  ];
}
class nZ extends Qe {
  constructor(e) {
    super(), Xe(this, e, tZ, eZ, xt, {
      text: 7,
      json: 0,
      readOnly: 8,
      parser: 9,
      openJSONEditorModal: 1,
      onChangeMode: 2
    });
  }
}
const iZ = nZ;
function sS(t, e, n) {
  const i = t.slice();
  i[112] = e[n], i[116] = n;
  const r = i[21].startIndex + i[116];
  i[113] = r;
  const s = i[20].rows[i[113]];
  return i[114] = s, i;
}
function oS(t, e, n) {
  var a;
  const i = t.slice();
  i[117] = e[n], i[123] = n;
  const r = [String(i[113])].concat(i[117]);
  i[118] = r;
  const s = Ze(i[112], i[117]);
  i[119] = s;
  const o = i[44](i[118], i[9].selection);
  i[120] = o;
  const l = (a = i[114]) == null ? void 0 : a.columns[i[123]];
  return i[121] = l, i;
}
function lS(t, e, n) {
  const i = t.slice();
  return i[117] = e[n], i;
}
function aS(t) {
  let e, n;
  return e = new wQ({
    props: {
      json: t[7],
      readOnly: t[0],
      historyState: t[18],
      onSort: t[38],
      onTransform: t[39],
      onUndo: t[40],
      onRedo: t[41],
      onContextMenu: t[30],
      onRenderMenu: t[5]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 128 && (s.json = i[7]), r[0] & 1 && (s.readOnly = i[0]), r[0] & 262144 && (s.historyState = i[18]), r[0] & 32 && (s.onRenderMenu = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function rZ(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-hs49xj"></div> 
      <div class="jse-loading svelte-hs49xj">loading...</div>`, b(e, "class", "jse-contents jse-contents-loading svelte-hs49xj");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    i: ve,
    o: ve,
    d(n) {
      n && V(e);
    }
  };
}
function sZ(t) {
  let e, n, i, r, s, o, l, a, c;
  const u = [aZ, lZ, oZ], f = [];
  function h(d, p) {
    return d[22] ? 0 : d[15] && d[14] !== void 0 && d[14] !== "" ? 1 : 2;
  }
  return r = h(t), s = f[r] = u[r](t), {
    c() {
      e = j("label"), n = j("input"), i = Q(), s.c(), o = ot(), b(n, "type", "text"), n.readOnly = "readonly", b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-hs49xj"), b(e, "class", "jse-hidden-input-label svelte-hs49xj");
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[69](n), U(d, i, p), f[r].m(d, p), U(d, o, p), l = !0, a || (c = se(n, "paste", t[35]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? f[r].p(d, p) : (Se(), x(f[g], 1, 1, () => {
        f[g] = null;
      }), Ee(), s = f[r], s ? s.p(d, p) : (s = f[r] = u[r](d), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(d) {
      l || (P(s), l = !0);
    },
    o(d) {
      x(s), l = !1;
    },
    d(d) {
      d && V(e), t[69](null), d && V(i), f[r].d(d), d && V(o), a = !1, c();
    }
  };
}
function oZ(t) {
  let e, n;
  return e = new iZ({
    props: {
      text: t[14],
      json: t[7],
      readOnly: t[0],
      parser: t[2],
      openJSONEditorModal: t[37],
      onChangeMode: t[4]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16384 && (s.text = i[14]), r[0] & 128 && (s.json = i[7]), r[0] & 1 && (s.readOnly = i[0]), r[0] & 4 && (s.parser = i[2]), r[0] & 16 && (s.onChangeMode = i[4]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function lZ(t) {
  let e, n, i, r;
  return e = new Ds({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: Bo,
          text: "Repair manually",
          onClick: t[33]
        }
      ]
    }
  }), i = new r8({
    props: {
      text: t[14] || "",
      json: t[7],
      indentation: t[3],
      parser: t[2]
    }
  }), {
    c() {
      me(e.$$.fragment), n = Q(), me(i.$$.fragment);
    },
    m(s, o) {
      pe(e, s, o), U(s, n, o), pe(i, s, o), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 1 && (l.actions = s[0] ? [] : [
        {
          icon: Bo,
          text: "Repair manually",
          onClick: s[33]
        }
      ]), e.$set(l);
      const a = {};
      o[0] & 16384 && (a.text = s[14] || ""), o[0] & 128 && (a.json = s[7]), o[0] & 8 && (a.indentation = s[3]), o[0] & 4 && (a.parser = s[2]), i.$set(a);
    },
    i(s) {
      r || (P(e.$$.fragment, s), P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(e.$$.fragment, s), x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      ge(e, s), s && V(n), ge(i, s);
    }
  };
}
function aZ(t) {
  var K;
  let e, n, i, r, s, o = !Pt((K = t[20]) == null ? void 0 : K.root), l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A = o && cS(t), D = t[8], R = [];
  for (let F = 0; F < D.length; F += 1)
    R[F] = uS(lS(t, D, F));
  const M = (F) => x(R[F], 1, 1, () => {
    R[F] = null;
  });
  let H = t[21].visibleItems, J = [];
  for (let F = 0; F < H.length; F += 1)
    J[F] = mS(sS(t, H, F));
  const I = (F) => x(J[F], 1, 1, () => {
    J[F] = null;
  });
  let z = t[16] && bS(t), L = t[17] && _S(t);
  return k = new lb({
    props: {
      validationErrors: t[10],
      selectError: t[36]
    }
  }), {
    c() {
      e = j("div"), n = j("table"), i = j("tbody"), r = j("tr"), s = j("th"), A && A.c(), l = Q();
      for (let F = 0; F < R.length; F += 1)
        R[F].c();
      a = Q(), c = j("tr"), u = j("td"), h = Q();
      for (let F = 0; F < J.length; F += 1)
        J[F].c();
      d = Q(), p = j("tr"), g = j("td"), m = Q(), z && z.c(), C = Q(), L && L.c(), v = Q(), me(k.$$.fragment), b(s, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj"), b(r, "class", "jse-table-row jse-table-row-header svelte-hs49xj"), b(u, "colspan", f = t[8].length), b(u, "class", "svelte-hs49xj"), Li(u, "height", t[21].startHeight + "px"), b(c, "class", "jse-table-invisible-start-section"), b(g, "colspan", _ = t[8].length), b(g, "class", "svelte-hs49xj"), Li(g, "height", t[21].endHeight + "px"), b(p, "class", "jse-table-invisible-end-section"), b(n, "class", "jse-table-main svelte-hs49xj"), b(n, "cellpadding", "0"), b(n, "cellspacing", "0"), b(e, "class", "jse-contents svelte-hs49xj");
    },
    m(F, N) {
      U(F, e, N), E(e, n), E(n, i), E(i, r), E(r, s), A && A.m(s, null), E(r, l);
      for (let te = 0; te < R.length; te += 1)
        R[te].m(r, null);
      E(i, a), E(i, c), E(c, u), E(i, h);
      for (let te = 0; te < J.length; te += 1)
        J[te].m(i, null);
      E(i, d), E(i, p), E(p, g), t[71](e), U(F, m, N), z && z.m(F, N), U(F, C, N), L && L.m(F, N), U(F, v, N), pe(k, F, N), S = !0, O || (w = [
        Wi(ZA.call(null, e, t[42])),
        se(e, "scroll", t[26])
      ], O = !0);
    },
    p(F, N) {
      var ue;
      if (N[0] & 1048576 && (o = !Pt((ue = F[20]) == null ? void 0 : ue.root)), o ? A ? (A.p(F, N), N[0] & 1048576 && P(A, 1)) : (A = cS(F), A.c(), P(A, 1), A.m(s, null)) : A && (Se(), x(A, 1, 1, () => {
        A = null;
      }), Ee()), N[0] & 33555201) {
        D = F[8];
        let q;
        for (q = 0; q < D.length; q += 1) {
          const re = lS(F, D, q);
          R[q] ? (R[q].p(re, N), P(R[q], 1)) : (R[q] = uS(re), R[q].c(), P(R[q], 1), R[q].m(r, null));
        }
        for (Se(), q = D.length; q < R.length; q += 1)
          M(q);
        Ee();
      }
      if ((!S || N[0] & 256 && f !== (f = F[8].length)) && b(u, "colspan", f), N[0] & 2097152 && Li(u, "height", F[21].startHeight + "px"), N[0] & 288883461 | N[1] & 12352) {
        H = F[21].visibleItems;
        let q;
        for (q = 0; q < H.length; q += 1) {
          const re = sS(F, H, q);
          J[q] ? (J[q].p(re, N), P(J[q], 1)) : (J[q] = mS(re), J[q].c(), P(J[q], 1), J[q].m(i, d));
        }
        for (Se(), q = H.length; q < J.length; q += 1)
          I(q);
        Ee();
      }
      (!S || N[0] & 256 && _ !== (_ = F[8].length)) && b(g, "colspan", _), N[0] & 2097152 && Li(g, "height", F[21].endHeight + "px"), F[16] ? z ? (z.p(F, N), N[0] & 65536 && P(z, 1)) : (z = bS(F), z.c(), P(z, 1), z.m(C.parentNode, C)) : z && (Se(), x(z, 1, 1, () => {
        z = null;
      }), Ee()), F[17] ? L ? (L.p(F, N), N[0] & 131072 && P(L, 1)) : (L = _S(F), L.c(), P(L, 1), L.m(v.parentNode, v)) : L && (Se(), x(L, 1, 1, () => {
        L = null;
      }), Ee());
      const te = {};
      N[0] & 1024 && (te.validationErrors = F[10]), k.$set(te);
    },
    i(F) {
      if (!S) {
        P(A);
        for (let N = 0; N < D.length; N += 1)
          P(R[N]);
        for (let N = 0; N < H.length; N += 1)
          P(J[N]);
        P(z), P(L), P(k.$$.fragment, F), S = !0;
      }
    },
    o(F) {
      x(A), R = R.filter(Boolean);
      for (let N = 0; N < R.length; N += 1)
        x(R[N]);
      J = J.filter(Boolean);
      for (let N = 0; N < J.length; N += 1)
        x(J[N]);
      x(z), x(L), x(k.$$.fragment, F), S = !1;
    },
    d(F) {
      F && V(e), A && A.d(), Vt(R, F), Vt(J, F), t[71](null), F && V(m), z && z.d(F), F && V(C), L && L.d(F), F && V(v), ge(k, F), O = !1, ht(w);
    }
  };
}
function cS(t) {
  var r;
  let e, n, i;
  return n = new lc({
    props: {
      validationError: qa([], (r = t[20]) == null ? void 0 : r.root),
      onExpand: is
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), b(e, "class", "jse-table-root-error svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), i = !0;
    },
    p(s, o) {
      var a;
      const l = {};
      o[0] & 1048576 && (l.validationError = qa([], (a = s[20]) == null ? void 0 : a.root)), n.$set(l);
    },
    i(s) {
      i || (P(n.$$.fragment, s), i = !0);
    },
    o(s) {
      x(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function uS(t) {
  let e, n, i, r;
  return n = new KQ({
    props: {
      path: t[117],
      sortedColumn: t[9].sortedColumn,
      readOnly: t[0],
      onSort: t[25]
    }
  }), {
    c() {
      e = j("th"), me(n.$$.fragment), i = Q(), b(e, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), E(e, i), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 256 && (l.path = s[117]), o[0] & 512 && (l.sortedColumn = s[9].sortedColumn), o[0] & 1 && (l.readOnly = s[0]), n.$set(l);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n);
    }
  };
}
function fS(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: qa([String(t[113])], t[114].row),
      onExpand: is
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 3145728 && (s.validationError = qa([String(i[113])], i[114].row)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function hS(t) {
  var h;
  let e, n = t[113] + 1 + "", i, r, s = !Pt((h = t[114]) == null ? void 0 : h.row), o, l, a, c, u = s && fS(t);
  function f(...d) {
    return t[70](t[113], ...d);
  }
  return {
    c() {
      e = j("th"), i = we(n), r = Q(), u && u.c(), b(e, "class", "jse-table-cell jse-table-cell-gutter svelte-hs49xj");
    },
    m(d, p) {
      U(d, e, p), E(e, i), E(e, r), u && u.m(e, null), l = !0, a || (c = Wi(o = ZA.call(null, e, f)), a = !0);
    },
    p(d, p) {
      var g;
      t = d, (!l || p[0] & 2097152) && n !== (n = t[113] + 1 + "") && ze(i, n), p[0] & 3145728 && (s = !Pt((g = t[114]) == null ? void 0 : g.row)), s ? u ? (u.p(t, p), p[0] & 3145728 && P(u, 1)) : (u = fS(t), u.c(), P(u, 1), u.m(e, null)) : u && (Se(), x(u, 1, 1, () => {
        u = null;
      }), Ee()), o && hi(o.update) && p[0] & 2097152 && o.update.call(null, f);
    },
    i(d) {
      l || (P(u), l = !0);
    },
    o(d) {
      x(u), l = !1;
    },
    d(d) {
      d && V(e), u && u.d(), a = !1, c();
    }
  };
}
function cZ(t) {
  let e, n;
  return e = new FQ({
    props: {
      path: t[118],
      value: t[119] !== void 0 ? t[119] : "",
      enforceString: Xs(t[119], t[9].enforceStringMap, Be(t[118]), t[19].parser),
      selection: t[120] ? t[9].selection : void 0,
      searchResultItems: t[24],
      context: t[19]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2097408 && (s.path = i[118]), r[0] & 2097408 && (s.value = i[119] !== void 0 ? i[119] : ""), r[0] & 2622208 && (s.enforceString = Xs(i[119], i[9].enforceStringMap, Be(i[118]), i[19].parser)), r[0] & 2097920 && (s.selection = i[120] ? i[9].selection : void 0), r[0] & 524288 && (s.context = i[19]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function uZ(t) {
  let e, n;
  return e = new HQ({
    props: {
      path: t[118],
      value: t[119],
      parser: t[2],
      isSelected: t[120],
      onEdit: t[37]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2097408 && (s.path = i[118]), r[0] & 2097408 && (s.value = i[119]), r[0] & 4 && (s.parser = i[2]), r[0] & 2097920 && (s.isSelected = i[120]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function dS(t) {
  let e, n, i, r;
  return n = new Qo({
    props: {
      selected: !0,
      onContextMenu: t[28]
    }
  }), {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), b(e, "class", "jse-context-menu-anchor svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), pe(n, e, null), U(s, i, o), r = !0;
    },
    p: ve,
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), ge(n), s && V(i);
    }
  };
}
function pS(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: qa(t[118], t[121]),
      onExpand: is
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 3145984 && (s.validationError = qa(i[118], i[121])), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function gS(t) {
  let e, n, i, r, s, o, l = !Pt(t[121]), a, c;
  const u = [uZ, cZ], f = [];
  function h(g, _) {
    return _[0] & 2097408 && (n = null), n == null && (n = !!dn(g[119])), n ? 0 : 1;
  }
  i = h(t, [-1, -1, -1, -1, -1]), r = f[i] = u[i](t);
  let d = !t[0] && t[120] && !t[9].selection.edit && dS(t), p = l && pS(t);
  return {
    c() {
      e = j("td"), r.c(), s = ot(), d && d.c(), o = ot(), p && p.c(), b(e, "class", "jse-table-cell svelte-hs49xj"), b(e, "data-path", a = Da(t[118])), Ce(e, "jse-selected-value", t[120] && Et(t[9].selection));
    },
    m(g, _) {
      U(g, e, _), f[i].m(e, null), E(e, s), d && d.m(e, null), E(e, o), p && p.m(e, null), c = !0;
    },
    p(g, _) {
      let m = i;
      i = h(g, _), i === m ? f[i].p(g, _) : (Se(), x(f[m], 1, 1, () => {
        f[m] = null;
      }), Ee(), r = f[i], r ? r.p(g, _) : (r = f[i] = u[i](g), r.c()), P(r, 1), r.m(e, s)), !g[0] && g[120] && !g[9].selection.edit ? d ? (d.p(g, _), _[0] & 2097921 && P(d, 1)) : (d = dS(g), d.c(), P(d, 1), d.m(e, o)) : d && (Se(), x(d, 1, 1, () => {
        d = null;
      }), Ee()), _[0] & 3145728 && (l = !Pt(g[121])), l ? p ? (p.p(g, _), _[0] & 3145728 && P(p, 1)) : (p = pS(g), p.c(), P(p, 1), p.m(e, null)) : p && (Se(), x(p, 1, 1, () => {
        p = null;
      }), Ee()), (!c || _[0] & 2097408 && a !== (a = Da(g[118]))) && b(e, "data-path", a), (!c || _[0] & 2097920 | _[1] & 8192) && Ce(e, "jse-selected-value", g[120] && Et(g[9].selection));
    },
    i(g) {
      c || (P(r), P(d), P(p), c = !0);
    },
    o(g) {
      x(r), x(d), x(p), c = !1;
    },
    d(g) {
      g && V(e), f[i].d(), d && d.d(), p && p.d();
    }
  };
}
function mS(t) {
  let e, n = t[113], i, r, s = hS(t), o = t[8], l = [];
  for (let c = 0; c < o.length; c += 1)
    l[c] = gS(oS(t, o, c));
  const a = (c) => x(l[c], 1, 1, () => {
    l[c] = null;
  });
  return {
    c() {
      e = j("tr"), s.c(), i = Q();
      for (let c = 0; c < l.length; c += 1)
        l[c].c();
      b(e, "class", "jse-table-row svelte-hs49xj");
    },
    m(c, u) {
      U(c, e, u), s.m(e, null), E(e, i);
      for (let f = 0; f < l.length; f += 1)
        l[f].m(e, null);
      r = !0;
    },
    p(c, u) {
      if (u[0] & 2097152 && wt(n, n = c[113]) ? (Se(), x(s, 1, 1, ve), Ee(), s = hS(c), s.c(), P(s, 1), s.m(e, i)) : s.p(c, u), u[0] & 288883461 | u[1] & 8256) {
        o = c[8];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const h = oS(c, o, f);
          l[f] ? (l[f].p(h, u), P(l[f], 1)) : (l[f] = gS(h), l[f].c(), P(l[f], 1), l[f].m(e, null));
        }
        for (Se(), f = o.length; f < l.length; f += 1)
          a(f);
        Ee();
      }
    },
    i(c) {
      if (!r) {
        P(s);
        for (let u = 0; u < o.length; u += 1)
          P(l[u]);
        r = !0;
      }
    },
    o(c) {
      x(s), l = l.filter(Boolean);
      for (let u = 0; u < l.length; u += 1)
        x(l[u]);
      r = !1;
    },
    d(c) {
      c && V(e), s.d(c), Vt(l, c);
    }
  };
}
function bS(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[16].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: Ap,
          text: "Paste as JSON instead",
          onMouseDown: t[31]
        },
        {
          text: "Leave as is",
          onClick: t[32]
        }
      ]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 65536 && (s.message = `You pasted a JSON ${Array.isArray(i[16].contents) ? "array" : "object"} as text`), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function _S(t) {
  let e, n;
  return e = new Ds({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: t[6]
        },
        {
          icon: Bo,
          text: "Repair manually instead",
          onClick: t[33]
        }
      ]
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.actions = i[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: i[6]
        },
        {
          icon: Bo,
          text: "Repair manually instead",
          onClick: i[33]
        }
      ]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function fZ(t) {
  let e, n, i, r, s, o, l, a = t[1] && aS(t);
  const c = [sZ, rZ], u = [];
  function f(h, d) {
    return h[23] ? 1 : 0;
  }
  return i = f(t), r = u[i] = c[i](t), {
    c() {
      e = j("div"), a && a.c(), n = Q(), r.c(), b(e, "class", "jse-table-mode svelte-hs49xj"), Ce(e, "no-main-menu", !t[1]);
    },
    m(h, d) {
      U(h, e, d), a && a.m(e, null), E(e, n), u[i].m(e, null), t[72](e), s = !0, o || (l = [
        se(e, "mousedown", t[27]),
        se(e, "keydown", t[34]),
        se(e, "contextmenu", t[29])
      ], o = !0);
    },
    p(h, d) {
      h[1] ? a ? (a.p(h, d), d[0] & 2 && P(a, 1)) : (a = aS(h), a.c(), P(a, 1), a.m(e, n)) : a && (Se(), x(a, 1, 1, () => {
        a = null;
      }), Ee()), r.p(h, d), (!s || d[0] & 2) && Ce(e, "no-main-menu", !h[1]);
    },
    i(h) {
      s || (P(a), P(r), s = !0);
    },
    o(h) {
      x(a), x(r), s = !1;
    },
    d(h) {
      h && V(e), a && a.d(), u[i].d(), t[72](null), o = !1, ht(l);
    }
  };
}
let ta = 18;
function hZ(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:TableMode"), { open: l } = gi("simple-modal"), { openAbsolutePopup: a, closeAbsolutePopup: c } = gi("absolute-popup"), u = H6(), f = Pa(), h = Pa(), d = typeof window > "u";
  o("isSSR:", d);
  let { readOnly: p } = e, { externalContent: g } = e, { mainMenuBar: _ } = e, { escapeControlCharacters: m } = e, { escapeUnicodeCharacters: C } = e, { flattenColumns: v } = e, { parser: k } = e, { parseMemoizeOne: S } = e, { validator: O } = e, { validationParser: w } = e, { indentation: A } = e, { onChange: D } = e, { onChangeMode: R } = e, { onRenderValue: M } = e, { onRenderMenu: H } = e, { onFocus: J } = e, { onBlur: I } = e, { onSortModal: z } = e, { onTransformModal: L } = e, { onJSONEditorModal: K } = e, F, N, te, ue;
  ob({
    onMount: or,
    onDestroy: vs,
    getWindow: () => sc(N),
    hasFocus: () => Ie && document.hasFocus() || Yh(N),
    onFocus: () => {
      Fe = !0, J && J();
    },
    onBlur: () => {
      Fe = !1, I && I();
    }
  });
  let q, re, ie, Z, Le, Ie = !1, Fe = !1, le = {}, De = 600, Ve = 0;
  function ye(ee) {
    te && te.scrollTo({
      top: te.scrollTop,
      left: te.scrollLeft
    });
  }
  function fe() {
    $.sortedColumn && n(9, $ = {
      ...$,
      sortedColumn: void 0
    });
  }
  function Ae(ee) {
    o("updateSelection", ee);
    const Me = typeof ee == "function" ? ee($.selection) : ee;
    Ot(Me, $.selection) || n(9, $ = {
      ...$,
      selection: Me
    });
  }
  function ae(ee) {
    $.selection !== void 0 && ($.selection && mr(ee, $.selection.anchorPath) && mr(ee, $.selection.focusPath) || (o("clearing selection: path does not exist anymore", $.selection), n(9, $ = {
      ...$,
      selection: ia(ee, $)
    })));
  }
  let $ = Qh(), de = !1;
  const he = void 0;
  function W(ee) {
    if (p)
      return;
    o("onSortByHeader", ee);
    const Me = [], He = ee.sortDirection === gr.desc ? -1 : 1, $e = Q6(q, Me, ee.path, He);
    je($e, (ut, Te) => ({
      state: {
        ...Te,
        sortedColumn: ee
      }
    }));
  }
  const y = W6({
    onChange: (ee) => {
      n(18, T = ee);
    }
  });
  let T = y.getState(), B;
  function X(ee) {
    const Me = { json: q }, He = Ia(ee) ? ee.text !== re : !Ot(Me.json, ee.json);
    if (o("update external content", { isChanged: He }), !He)
      return;
    const $e = { json: q, text: re }, ut = q, Te = $, Ue = re, It = de;
    if (Ia(ee))
      try {
        n(7, q = S(ee.text)), n(14, re = ee.text), n(17, de = !1), n(15, ie = void 0);
      } catch (_i) {
        try {
          n(7, q = S(cs(ee.text))), n(14, re = ee.text), n(17, de = !0), n(15, ie = void 0);
        } catch {
          n(7, q = void 0), n(14, re = g.text), n(17, de = !1), n(15, ie = vp(re, _i.message || _i.toString()));
        }
      }
    else
      n(7, q = ee.json), n(14, re = void 0), n(17, de = !1), n(15, ie = void 0);
    ae(q), fe(), G({
      previousJson: ut,
      previousState: Te,
      previousText: Ue,
      previousTextIsRepaired: It
    }), vt($e, null);
  }
  function G({ previousJson: ee, previousState: Me, previousText: He, previousTextIsRepaired: $e }) {
    ee === void 0 && He === void 0 || (q !== void 0 ? ee !== void 0 ? y.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: ee
          }
        ],
        state: Mi(Me),
        json: void 0,
        text: He,
        textIsRepaired: $e
      },
      redo: {
        patch: [{ op: "replace", path: "", value: q }],
        state: Mi($),
        json: void 0,
        text: re,
        textIsRepaired: de
      }
    }) : y.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: He,
        state: Mi(Me),
        textIsRepaired: $e
      },
      redo: {
        patch: void 0,
        json: q,
        state: Mi($),
        text: re,
        textIsRepaired: de
      }
    }) : ee !== void 0 && y.add({
      undo: {
        patch: void 0,
        json: ee,
        state: Mi(Me),
        text: He,
        textIsRepaired: $e
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: re,
        textIsRepaired: de,
        state: Mi($)
      }
    }));
  }
  let ce = [];
  const Ne = Ku(q6);
  function qe(ee, Me, He, $e) {
    ca(
      () => {
        let ut;
        try {
          ut = Ne(ee, Me, He, $e);
        } catch (Te) {
          ut = [
            {
              path: [],
              message: "Failed to validate: " + Te.message,
              severity: Do.warning
            }
          ];
        }
        Ot(ut, ce) || (o("validationErrors changed:", ut), n(10, ce = ut));
      },
      (ut) => o(`validationErrors updated in ${ut} ms`)
    );
  }
  function mt() {
    return o("validate"), ie ? {
      parseError: ie,
      isRepairable: !1
    } : (qe(q, O, k, w), { validationErrors: ce });
  }
  function dt(ee, Me) {
    if (o("patch", ee, Me), q === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const He = { json: q }, $e = q, ut = $, Te = de, Ue = T6(q, ee), Xt = d6(q, $, ee).json, _i = DQ($, ee, Le), zi = typeof Me == "function" ? Me(Xt, _i) : void 0;
    n(7, q = zi && zi.json !== void 0 ? zi.json : Xt);
    const Xl = zi && zi.state !== void 0 ? zi.state : _i;
    n(9, $ = Xl), n(14, re = void 0), n(17, de = !1), n(16, Z = void 0), y.add({
      undo: {
        patch: Ue,
        json: void 0,
        text: void 0,
        state: Mi(ut),
        textIsRepaired: Te
      },
      redo: {
        patch: ee,
        json: void 0,
        state: Mi(Xl),
        text: void 0,
        textIsRepaired: de
      }
    });
    const Ql = {
      json: q,
      previousJson: $e,
      undo: Ue,
      redo: ee
    };
    return vt(He, Ql), Ql;
  }
  function je(ee, Me) {
    if (!p)
      return dt(ee, Me);
  }
  function vt(ee, Me) {
    ee.json === void 0 && (ee == null ? void 0 : ee.text) === void 0 || (re !== void 0 ? D({ text: re, json: void 0 }, ee, { contentErrors: mt(), patchResult: Me }) : q !== void 0 && D({ text: void 0, json: q }, ee, { contentErrors: mt(), patchResult: Me }));
  }
  function zt(ee) {
    o("handleFind", ee);
  }
  function Yt(ee) {
    o("pasted json as text", ee), n(16, Z = ee);
  }
  function Bn(ee) {
    const Me = parseInt(ee[0]), He = [String(Me + 1), ...ee.slice(1)];
    return mr(q, He) ? Lt(He, !1) : Lt(ee, !1);
  }
  function Tt() {
    ue && (ue.focus(), ue.select());
  }
  function Oe(ee) {
    n(68, Ve = ee.target.scrollTop);
  }
  function si(ee) {
    const Me = ee != null && ee.target ? s6(ee.target) : void 0;
    if (Me) {
      if (jo($.selection) && w6($.selection, Me, Gt.value))
        return;
      Ae(Lt(Me, !1)), Tt(), ee.preventDefault();
    }
  }
  function Jt() {
    if (qt(q) && !Pt(q) && !Pt(Le)) {
      const ee = ["0", ...Le[0]];
      return Lt(ee, !1);
    } else
      return;
  }
  function Kt() {
    $.selection || Ae(Jt());
  }
  function ln() {
    if (de && q !== void 0) {
      const ee = $, Me = q, He = re, $e = { json: q, text: re }, ut = de;
      n(14, re = void 0), n(17, de = !1), ae(q), G({
        previousJson: Me,
        previousState: ee,
        previousText: He,
        previousTextIsRepaired: ut
      }), vt($e, null);
    }
    return { json: q, text: re };
  }
  function yn(ee, Me = !0) {
    const He = fm(ee, Le, le, ta), $e = He - Ve, ut = an(ee);
    o("scrollTo", { path: ee, top: He, scrollTop: Ve, elem: ut });
    const Te = te.getBoundingClientRect();
    if (ut && !Me) {
      const It = ut.getBoundingClientRect();
      if (It.bottom > Te.top && It.top < Te.bottom)
        return;
    }
    const Ue = -(Te.height / 4);
    ut ? u(ut, {
      container: te,
      offset: Ue,
      duration: Im,
      callback: () => {
        en(ee);
      }
    }) : u($e, {
      container: te,
      offset: Ue,
      duration: Im,
      callback: () => {
        Xi().then(() => {
          fm(ee, Le, le, ta) !== He ? yn(ee, Me) : en(ee);
        });
      }
    });
  }
  function Xn(ee) {
    const { rowIndex: Me } = tl(ee, Le), He = fm(ee, Le, le, ta), $e = He + (le[Me] || ta), ut = ta, Te = te.getBoundingClientRect(), Ue = Ve, It = Ve + Te.height - ut;
    if ($e > It) {
      const Xt = $e - It;
      n(12, te.scrollTop += Xt, te);
    }
    if (He < Ue) {
      const Xt = Ue - He;
      n(12, te.scrollTop -= Xt, te);
    }
  }
  function en(ee) {
    const Me = an(ee);
    if (Me) {
      const He = te.getBoundingClientRect(), $e = Me.getBoundingClientRect();
      if ($e.right > He.right) {
        const ut = $e.right - He.right;
        n(12, te.scrollLeft += ut, te);
      }
      if ($e.left < He.left) {
        const ut = He.left - $e.left;
        n(12, te.scrollLeft -= ut, te);
      }
    }
  }
  function oi(ee) {
    Xn(ee), en(ee);
  }
  function an(ee) {
    return te ? te.querySelector(`td[data-path="${Da(ee)}"]`) : null;
  }
  function An({ anchor: ee, left: Me, top: He, width: $e, height: ut, offsetTop: Te, offsetLeft: Ue, showTip: It }) {
    const Xt = {
      json: q,
      documentState: $,
      parser: k,
      showTip: It,
      onEditValue: ar,
      onToggleEnforceString: _e,
      onCut: st,
      onCopy: Nt,
      onPaste: lt,
      onRemove: Ft,
      onCloseContextMenu() {
        c(_i), Tt();
      }
    };
    Ie = !0;
    const _i = a(QQ, Xt, {
      left: Me,
      top: He,
      offsetTop: Te,
      offsetLeft: Ue,
      width: $e,
      height: ut,
      anchor: ee,
      closeOnOuterClick: !0,
      onClose: () => {
        Ie = !1, Tt();
      }
    });
  }
  function Di(ee) {
    if (!(p || jo($.selection))) {
      if (ee && (ee.stopPropagation(), ee.preventDefault()), ee && ee.type === "contextmenu" && ee.target !== ue)
        An({
          left: ee.clientX,
          top: ee.clientY,
          width: Hs,
          height: Us,
          showTip: !1
        });
      else {
        const Me = te == null ? void 0 : te.querySelector(".jse-table-cell.jse-selected-value");
        if (Me)
          An({
            anchor: Me,
            offsetTop: 2,
            width: Hs,
            height: Us,
            showTip: !1
          });
        else {
          const He = te == null ? void 0 : te.getBoundingClientRect();
          He && An({
            top: He.top + 2,
            left: He.left + 2,
            width: Hs,
            height: Us,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function Mn(ee) {
    p || An({
      anchor: r6(ee.target, "BUTTON"),
      offsetTop: 0,
      width: Hs,
      height: Us,
      showTip: !0
    });
  }
  function ar() {
    if (p || !$.selection)
      return;
    const ee = $.selection.focusPath, Me = Ze(q, ee);
    dn(Me) ? bi(ee) : Ae(Lt(ee, !0));
  }
  function _e() {
    if (p || !Et($.selection))
      return;
    const ee = $.selection.focusPath, Me = Be(ee), He = Ze(q, ee), $e = !Xs(He, $.enforceStringMap, Me, k), ut = $e ? String(He) : tc(String(He), k);
    o("handleToggleEnforceString", { enforceString: $e, value: He, updatedValue: ut }), je(
      [
        {
          op: "replace",
          path: Me,
          value: ut
        }
      ],
      (Te, Ue) => ({
        state: h6(Ue, Me, $e)
      })
    );
  }
  async function Re() {
    o("apply pasted json", Z);
    const { path: ee, contents: Me } = Z;
    Ae(Lt(ee, !1)), await Xi();
    const He = [
      {
        op: "replace",
        path: Be(ee),
        value: Me
      }
    ];
    je(He);
  }
  function lt() {
    l(
      J6,
      {},
      {
        ...Al,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Tt() }
    );
  }
  function be() {
    o("clear pasted json"), n(16, Z = void 0);
  }
  function at() {
    R(vi.text);
  }
  async function st(ee) {
    await $6({
      json: q,
      documentState: $,
      indentation: ee ? A : void 0,
      readOnly: p,
      parser: k,
      onPatch: je
    });
  }
  async function Nt(ee = !0) {
    await e8({
      json: q,
      documentState: $,
      indentation: ee ? A : void 0,
      parser: k
    });
  }
  function Ft() {
    n8({
      json: q,
      text: re,
      documentState: $,
      keepSelection: !0,
      readOnly: p,
      onChange: D,
      onPatch: je
    });
  }
  async function kt(ee) {
    await i8({
      char: ee,
      selectInside: !1,
      refJsonEditor: N,
      json: q,
      documentState: $,
      readOnly: p,
      parser: k,
      onPatch: je,
      onReplaceJson: li,
      onSelect: Ae
    });
  }
  function On(ee) {
    const Me = Yo(ee).replace(/^Command\+/, "Ctrl+");
    if (o("keydown", { combo: Me, key: ee.key }), Me === "Ctrl+X" && (ee.preventDefault(), st(!0)), Me === "Ctrl+Shift+X" && (ee.preventDefault(), st(!1)), Me === "Ctrl+C" && (ee.preventDefault(), Nt(!0)), Me === "Ctrl+Shift+C" && (ee.preventDefault(), Nt(!1)), Me === "Ctrl+D" && ee.preventDefault(), (Me === "Delete" || Me === "Backspace") && (ee.preventDefault(), Ft()), Me === "Insert" && ee.preventDefault(), Me === "Ctrl+A" && ee.preventDefault(), Me === "Ctrl+Q" && Di(ee), Me === "Left" && (ee.preventDefault(), Kt(), $.selection)) {
      const $e = OQ(Le, $.selection);
      Ae($e), oi($e.focusPath);
    }
    if (Me === "Right" && (ee.preventDefault(), Kt(), $.selection)) {
      const $e = TQ(Le, $.selection);
      Ae($e), oi($e.focusPath);
    }
    if (Me === "Up" && (ee.preventDefault(), Kt(), $.selection)) {
      const $e = AQ(Le, $.selection);
      Ae($e), oi($e.focusPath);
    }
    if (Me === "Down" && (ee.preventDefault(), Kt(), $.selection)) {
      const $e = MQ(q, Le, $.selection);
      Ae($e), oi($e.focusPath);
    }
    if (Me === "Enter" && $.selection && Et($.selection)) {
      ee.preventDefault();
      const $e = $.selection.focusPath, ut = Ze(q, $e);
      dn(ut) ? bi($e) : p || Ae({ ...$.selection, edit: !0 });
    }
    if (Me.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && $.selection) {
      ee.preventDefault(), kt(ee.key);
      return;
    }
    if (Me === "Ctrl+Enter" && Et($.selection)) {
      const $e = Ze(q, $.selection.focusPath);
      op($e) && window.open(String($e), "_blank");
    }
    Me === "Escape" && $.selection && (ee.preventDefault(), Ae(void 0)), Me === "Ctrl+F" && ee.preventDefault(), Me === "Ctrl+H" && ee.preventDefault(), Me === "Ctrl+Z" && (ee.preventDefault(), Rn()), Me === "Ctrl+Shift+Z" && (ee.preventDefault(), cn());
  }
  function Qn(ee) {
    ee.preventDefault();
    const Me = ee.clipboardData.getData("text/plain");
    t8({
      clipboardText: Me,
      json: q,
      documentState: $,
      readOnly: p,
      parser: k,
      onPatch: je,
      onChangeText: Ki,
      openRepairModal: ao
    });
  }
  function li(ee, Me) {
    const He = $, $e = q, ut = re, Te = { json: q, text: re }, Ue = de, It = ur(q, $, [], ss), Xt = typeof Me == "function" ? Me(ee, It) : void 0;
    n(7, q = Xt && Xt.json !== void 0 ? Xt.json : ee), n(9, $ = Xt && Xt.state !== void 0 ? Xt.state : It), n(14, re = void 0), n(17, de = !1), ae(q), G({
      previousJson: $e,
      previousState: He,
      previousText: ut,
      previousTextIsRepaired: Ue
    }), vt(Te, null);
  }
  function Ki(ee, Me) {
    o("handleChangeText");
    const He = $, $e = q, ut = re, Te = { json: q, text: re }, Ue = de;
    try {
      n(7, q = S(ee)), n(9, $ = ur(q, $, [], ss)), n(14, re = void 0), n(17, de = !1);
    } catch {
      try {
        n(7, q = S(cs(ee))), n(9, $ = ur(q, $, [], ss)), n(14, re = ee), n(17, de = !0);
      } catch {
        n(7, q = void 0), n(9, $ = Qh({ json: q, expand: ss })), n(14, re = ee), n(17, de = !1);
      }
    }
    if (typeof Me == "function") {
      const Xt = Me(q, $);
      n(7, q = Xt && Xt.json ? Xt.json : q), n(9, $ = Xt && Xt.state ? Xt.state : $);
    }
    ae(q), G({
      previousJson: $e,
      previousState: He,
      previousText: ut,
      previousTextIsRepaired: Ue
    }), vt(Te, null);
  }
  function Zt(ee) {
    o("select validation error", ee), Ae(Lt(ee.path, !1)), yn(ee.path);
  }
  function Gi(ee) {
    p || (Ie = !0, z({
      id: f,
      json: q,
      rootPath: ee,
      onSort: async ({ operations: Me, itemPath: He, direction: $e }) => {
        o("onSort", Me, ee, He, $e), je(Me, (ut, Te) => ({
          state: {
            ...Te,
            sortedColumn: {
              path: He,
              sortDirection: $e === -1 ? gr.desc : gr.asc
            }
          }
        }));
      },
      onClose: () => {
        Ie = !1, Tt();
      }
    }));
  }
  function cr({ id: ee, rootPath: Me, onTransform: He, onClose: $e }) {
    Ie = !0, L({
      id: ee || h,
      json: q,
      rootPath: Me,
      onTransform: He ? (ut) => {
        He({
          operations: ut,
          json: q,
          transformedJson: Fr(q, ut)
        });
      } : (ut) => {
        o("onTransform", Me, ut), je(ut);
      },
      onClose: () => {
        Ie = !1, Tt(), $e && $e();
      }
    });
  }
  function bi(ee) {
    o("openJSONEditorModal", { path: ee }), Ie = !0, K({
      content: { json: Ze(q, ee) },
      path: ee,
      onPatch: B.onPatch,
      onClose: () => {
        Ie = !1, Tt();
      }
    });
  }
  function ao(ee, Me) {
    l(
      G6,
      {
        text: ee,
        onParse: wp,
        onRepair: G5,
        onApply: Me
      },
      {
        ...Al,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Tt() }
    );
  }
  function qn() {
    Gi([]);
  }
  function Tn() {
    cr({ rootPath: [] });
  }
  function Rn() {
    if (p || !y.getState().canUndo)
      return;
    const ee = y.undo();
    if (!ee)
      return;
    const Me = { json: q, text: re };
    n(7, q = ee.undo.patch ? Fr(q, ee.undo.patch) : ee.undo.json), n(9, $ = ee.undo.state), n(14, re = ee.undo.text), n(17, de = ee.undo.textIsRepaired), o("undo", { item: ee, json: q });
    const He = {
      json: q,
      previousJson: Me.json,
      redo: ee.undo.patch,
      undo: ee.redo.patch
    };
    vt(Me, He), Tt(), $.selection && yn($.selection.focusPath, !1);
  }
  function cn() {
    if (p || !y.getState().canRedo)
      return;
    const ee = y.redo();
    if (!ee)
      return;
    const Me = { json: q, text: re };
    n(7, q = ee.redo.patch ? Fr(q, ee.redo.patch) : ee.redo.json), n(9, $ = ee.redo.state), n(14, re = ee.redo.text), n(17, de = ee.redo.textIsRepaired), o("redo", { item: ee, json: q });
    const He = {
      json: q,
      previousJson: Me.json,
      redo: ee.redo.patch,
      undo: ee.undo.patch
    };
    vt(Me, He), Tt(), $.selection && yn($.selection.focusPath, !1);
  }
  function xn(ee) {
    n(67, De = ee.getBoundingClientRect().height);
  }
  function tn(ee, Me) {
    n(66, le[Me] = ee.getBoundingClientRect().height, le);
  }
  function Pn(ee, Me) {
    return Me ? Me.pointersMap[Be(ee)] === !0 : !1;
  }
  function In(ee) {
    yt[ee ? "unshift" : "push"](() => {
      ue = ee, n(13, ue);
    });
  }
  const Ei = (ee, Me) => tn(Me, ee);
  function gn(ee) {
    yt[ee ? "unshift" : "push"](() => {
      te = ee, n(12, te);
    });
  }
  function Ai(ee) {
    yt[ee ? "unshift" : "push"](() => {
      N = ee, n(11, N);
    });
  }
  return t.$$set = (ee) => {
    "readOnly" in ee && n(0, p = ee.readOnly), "externalContent" in ee && n(45, g = ee.externalContent), "mainMenuBar" in ee && n(1, _ = ee.mainMenuBar), "escapeControlCharacters" in ee && n(46, m = ee.escapeControlCharacters), "escapeUnicodeCharacters" in ee && n(47, C = ee.escapeUnicodeCharacters), "flattenColumns" in ee && n(48, v = ee.flattenColumns), "parser" in ee && n(2, k = ee.parser), "parseMemoizeOne" in ee && n(49, S = ee.parseMemoizeOne), "validator" in ee && n(50, O = ee.validator), "validationParser" in ee && n(51, w = ee.validationParser), "indentation" in ee && n(3, A = ee.indentation), "onChange" in ee && n(52, D = ee.onChange), "onChangeMode" in ee && n(4, R = ee.onChangeMode), "onRenderValue" in ee && n(53, M = ee.onRenderValue), "onRenderMenu" in ee && n(5, H = ee.onRenderMenu), "onFocus" in ee && n(54, J = ee.onFocus), "onBlur" in ee && n(55, I = ee.onBlur), "onSortModal" in ee && n(56, z = ee.onSortModal), "onTransformModal" in ee && n(57, L = ee.onTransformModal), "onJSONEditorModal" in ee && n(58, K = ee.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 98304 && n(65, F = G0({
      escapeControlCharacters: m,
      escapeUnicodeCharacters: C
    })), t.$$.dirty[1] & 16384 && X(g), t.$$.dirty[0] & 128 | t.$$.dirty[1] & 131072 && n(8, Le = qt(q) ? vQ(q, v) : []), t.$$.dirty[0] & 384 && n(22, i = q && !Pt(Le)), t.$$.dirty[0] & 128 | t.$$.dirty[2] & 112 && n(21, r = SQ(Ve, De, q, le, ta)), t.$$.dirty[0] & 128 && ye(), t.$$.dirty[0] & 645 | t.$$.dirty[1] & 4194304 | t.$$.dirty[2] & 8 && n(19, B = {
      readOnly: p,
      parser: k,
      normalization: F,
      getJson: () => q,
      getDocumentState: () => $,
      findElement: an,
      findNextInside: Bn,
      focus: Tt,
      onPatch: je,
      onSelect: Ae,
      onFind: zt,
      onPasteJson: Yt,
      onRenderValue: M
    }), t.$$.dirty[0] & 132 | t.$$.dirty[1] & 1572864 && qe(q, O, k, w), t.$$.dirty[0] & 1280 && n(20, s = RQ(ce, Le));
  }, [
    p,
    _,
    k,
    A,
    R,
    H,
    ln,
    q,
    Le,
    $,
    ce,
    N,
    te,
    ue,
    re,
    ie,
    Z,
    de,
    T,
    B,
    s,
    r,
    i,
    d,
    he,
    W,
    Oe,
    si,
    An,
    Di,
    Mn,
    Re,
    be,
    at,
    On,
    Qn,
    Zt,
    bi,
    qn,
    Tn,
    Rn,
    cn,
    xn,
    tn,
    Pn,
    g,
    m,
    C,
    v,
    S,
    O,
    w,
    D,
    M,
    J,
    I,
    z,
    L,
    K,
    mt,
    dt,
    Tt,
    yn,
    an,
    cr,
    F,
    le,
    De,
    Ve,
    In,
    Ei,
    gn,
    Ai
  ];
}
class dZ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      hZ,
      fZ,
      wt,
      {
        readOnly: 0,
        externalContent: 45,
        mainMenuBar: 1,
        escapeControlCharacters: 46,
        escapeUnicodeCharacters: 47,
        flattenColumns: 48,
        parser: 2,
        parseMemoizeOne: 49,
        validator: 50,
        validationParser: 51,
        indentation: 3,
        onChange: 52,
        onChangeMode: 4,
        onRenderValue: 53,
        onRenderMenu: 5,
        onFocus: 54,
        onBlur: 55,
        onSortModal: 56,
        onTransformModal: 57,
        onJSONEditorModal: 58,
        validate: 59,
        patch: 60,
        focus: 61,
        acceptAutoRepair: 6,
        scrollTo: 62,
        findElement: 63,
        openTransformModal: 64
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get validate() {
    return this.$$.ctx[59];
  }
  get patch() {
    return this.$$.ctx[60];
  }
  get focus() {
    return this.$$.ctx[61];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[6];
  }
  get scrollTo() {
    return this.$$.ctx[62];
  }
  get findElement() {
    return this.$$.ctx[63];
  }
  get openTransformModal() {
    return this.$$.ctx[64];
  }
}
const pZ = dZ;
function gZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    pathParser: t[15],
    onError: t[20],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onClassName: t[18],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new gb({ props: i }), t[43](e), {
    c() {
      me(e.$$.fragment);
    },
    m(r, s) {
      pe(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 4 && (o.indentation = r[2]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 64 && (o.navigationBar = r[6]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 2048 && (o.parser = r[11]), s[0] & 4096 && (o.parseMemoizeOne = r[12]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 32768 && (o.pathParser = r[15]), s[0] & 1048576 && (o.onError = r[20]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 131072 && (o.onRenderValue = r[17]), s[0] & 262144 && (o.onClassName = r[18]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), s[0] & 33554432 && (o.onJSONEditorModal = r[25]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[43](null), ge(e, r);
    }
  };
}
function mZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    mainMenuBar: t[5],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    indentation: t[2],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new pZ({ props: i }), t[42](e), {
    c() {
      me(e.$$.fragment);
    },
    m(r, s) {
      pe(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 1024 && (o.flattenColumns = r[10]), s[0] & 2048 && (o.parser = r[11]), s[0] & 4096 && (o.parseMemoizeOne = r[12]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 4 && (o.indentation = r[2]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 131072 && (o.onRenderValue = r[17]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), s[0] & 33554432 && (o.onJSONEditorModal = r[25]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[42](null), ge(e, r);
    }
  };
}
function bZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    tabSize: t[3],
    mainMenuBar: t[5],
    statusBar: t[7],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    validator: t[13],
    validationParser: t[14],
    onChange: t[16],
    onChangeMode: t[19],
    onError: t[20],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24]
  };
  return e = new mQ({ props: i }), t[41](e), {
    c() {
      me(e.$$.fragment);
    },
    m(r, s) {
      pe(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 4 && (o.indentation = r[2]), s[0] & 8 && (o.tabSize = r[3]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 128 && (o.statusBar = r[7]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 2048 && (o.parser = r[11]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 1048576 && (o.onError = r[20]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[41](null), ge(e, r);
    }
  };
}
function _Z(t) {
  let e, n, i, r;
  const s = [bZ, mZ, gZ], o = [];
  function l(a, c) {
    return a[4] === vi.text || a[4] === "code" ? 0 : a[4] === vi.table ? 1 : 2;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = ot();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Se(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Ee(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function yZ(t, e, n) {
  let i, { content: r } = e, { readOnly: s } = e, { indentation: o } = e, { tabSize: l } = e, { mode: a } = e, { mainMenuBar: c } = e, { navigationBar: u } = e, { statusBar: f } = e, { escapeControlCharacters: h } = e, { escapeUnicodeCharacters: d } = e, { flattenColumns: p } = e, { parser: g } = e, { parseMemoizeOne: _ } = e, { validator: m } = e, { validationParser: C } = e, { pathParser: v } = e, { onChange: k } = e, { onRenderValue: S } = e, { onClassName: O } = e, { onRenderMenu: w } = e, { onChangeMode: A } = e, { onError: D } = e, { onFocus: R } = e, { onBlur: M } = e, { onSortModal: H } = e, { onTransformModal: J } = e, { onJSONEditorModal: I } = e, z, L, K, F;
  const N = { separator: !0 };
  function te(ye) {
    if (z)
      return z.patch(ye);
    if (L)
      return L.patch(ye);
    if (K)
      return K.patch(ye);
  }
  function ue(ye) {
    if (z)
      return z.expand(ye);
    throw new Error(`Method expand is not available in mode "${a}"`);
  }
  function q(ye) {
    if (K)
      K.openTransformModal(ye);
    else if (z)
      z.openTransformModal(ye);
    else if (L)
      L.openTransformModal(ye);
    else
      throw new Error(`Method transform is not available in mode "${a}"`);
  }
  function re() {
    if (K)
      return K.validate();
    if (z)
      return z.validate();
    if (L)
      return L.validate();
    throw new Error(`Method validate is not available in mode "${a}"`);
  }
  function ie() {
    return z ? z.acceptAutoRepair() : r;
  }
  function Z(ye) {
    if (z)
      return z.scrollTo(ye);
    throw new Error(`Method scrollTo is not available in mode "${a}"`);
  }
  function Le(ye) {
    if (z)
      return z.findElement(ye);
    if (L)
      return L.findElement(ye);
    throw new Error(`Method findElement is not available in mode "${a}"`);
  }
  function Ie() {
    K ? K.focus() : z ? z.focus() : L && L.focus();
  }
  function Fe() {
    K && K.refresh();
  }
  function le(ye) {
    yt[ye ? "unshift" : "push"](() => {
      K = ye, n(28, K);
    });
  }
  function De(ye) {
    yt[ye ? "unshift" : "push"](() => {
      L = ye, n(27, L);
    });
  }
  function Ve(ye) {
    yt[ye ? "unshift" : "push"](() => {
      z = ye, n(26, z);
    });
  }
  return t.$$set = (ye) => {
    "content" in ye && n(0, r = ye.content), "readOnly" in ye && n(1, s = ye.readOnly), "indentation" in ye && n(2, o = ye.indentation), "tabSize" in ye && n(3, l = ye.tabSize), "mode" in ye && n(4, a = ye.mode), "mainMenuBar" in ye && n(5, c = ye.mainMenuBar), "navigationBar" in ye && n(6, u = ye.navigationBar), "statusBar" in ye && n(7, f = ye.statusBar), "escapeControlCharacters" in ye && n(8, h = ye.escapeControlCharacters), "escapeUnicodeCharacters" in ye && n(9, d = ye.escapeUnicodeCharacters), "flattenColumns" in ye && n(10, p = ye.flattenColumns), "parser" in ye && n(11, g = ye.parser), "parseMemoizeOne" in ye && n(12, _ = ye.parseMemoizeOne), "validator" in ye && n(13, m = ye.validator), "validationParser" in ye && n(14, C = ye.validationParser), "pathParser" in ye && n(15, v = ye.pathParser), "onChange" in ye && n(16, k = ye.onChange), "onRenderValue" in ye && n(17, S = ye.onRenderValue), "onClassName" in ye && n(18, O = ye.onClassName), "onRenderMenu" in ye && n(30, w = ye.onRenderMenu), "onChangeMode" in ye && n(19, A = ye.onChangeMode), "onError" in ye && n(20, D = ye.onError), "onFocus" in ye && n(21, R = ye.onFocus), "onBlur" in ye && n(22, M = ye.onBlur), "onSortModal" in ye && n(23, H = ye.onSortModal), "onTransformModal" in ye && n(24, J = ye.onTransformModal), "onJSONEditorModal" in ye && n(25, I = ye.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 524304 && n(40, F = [
      {
        type: "button",
        text: "text",
        title: `Switch to text mode (current mode: ${a})`,
        className: "jse-group-button jse-first" + (a === vi.text || a === "code" ? " jse-selected" : ""),
        onClick: () => A(vi.text)
      },
      {
        type: "button",
        text: "tree",
        title: `Switch to tree mode (current mode: ${a})`,
        className: "jse-group-button " + (a === vi.tree ? " jse-selected" : ""),
        onClick: () => A(vi.tree)
      },
      {
        type: "button",
        text: "table",
        title: `Switch to table mode (current mode: ${a})`,
        className: "jse-group-button jse-last" + (a === vi.table ? " jse-selected" : ""),
        onClick: () => A(vi.table)
      }
    ]), t.$$.dirty[0] & 1073741824 | t.$$.dirty[1] & 512 && n(29, i = (ye, fe) => {
      const Ae = tV(fe[0]) ? F.concat(fe) : F.concat(N, fe);
      return w(ye, Ae) || Ae;
    });
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    k,
    S,
    O,
    A,
    D,
    R,
    M,
    H,
    J,
    I,
    z,
    L,
    K,
    i,
    w,
    te,
    ue,
    q,
    re,
    ie,
    Z,
    Le,
    Ie,
    Fe,
    F,
    le,
    De,
    Ve
  ];
}
class wZ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      yZ,
      _Z,
      xt,
      {
        content: 0,
        readOnly: 1,
        indentation: 2,
        tabSize: 3,
        mode: 4,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        parseMemoizeOne: 12,
        validator: 13,
        validationParser: 14,
        pathParser: 15,
        onChange: 16,
        onRenderValue: 17,
        onClassName: 18,
        onRenderMenu: 30,
        onChangeMode: 19,
        onError: 20,
        onFocus: 21,
        onBlur: 22,
        onSortModal: 23,
        onTransformModal: 24,
        onJSONEditorModal: 25,
        patch: 31,
        expand: 32,
        transform: 33,
        validate: 34,
        acceptAutoRepair: 35,
        scrollTo: 36,
        findElement: 37,
        focus: 38,
        refresh: 39
      },
      null,
      [-1, -1]
    );
  }
  get patch() {
    return this.$$.ctx[31];
  }
  get expand() {
    return this.$$.ctx[32];
  }
  get transform() {
    return this.$$.ctx[33];
  }
  get validate() {
    return this.$$.ctx[34];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[35];
  }
  get scrollTo() {
    return this.$$.ctx[36];
  }
  get findElement() {
    return this.$$.ctx[37];
  }
  get focus() {
    return this.$$.ctx[38];
  }
  get refresh() {
    return this.$$.ctx[39];
  }
}
const $A = wZ;
function yS(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = we(t[19]), b(e, "class", "jse-error svelte-1hibiw3");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, r) {
      r[0] & 524288 && ze(n, i[19]);
    },
    d(i) {
      i && V(e);
    }
  };
}
function wS(t) {
  let e, n, i, r, s, o;
  return n = new Mt({ props: { data: Wx } }), {
    c() {
      e = j("button"), me(n.$$.fragment), i = we(" Back"), b(e, "type", "button"), b(e, "class", "jse-secondary svelte-1hibiw3");
    },
    m(l, a) {
      U(l, e, a), pe(n, e, null), E(e, i), r = !0, s || (o = se(e, "click", t[23]), s = !0);
    },
    p: ve,
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), ge(n), s = !1, o();
    }
  };
}
function vZ(t) {
  let e, n, i;
  return {
    c() {
      e = j("button"), e.textContent = "Close", b(e, "type", "button"), b(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, s) {
      U(r, e, s), n || (i = [
        se(e, "click", t[23]),
        Wi(eM.call(null, e))
      ], n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, ht(i);
    }
  };
}
function kZ(t) {
  let e, n, i;
  return {
    c() {
      e = j("button"), e.textContent = "Apply", b(e, "type", "button"), b(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, s) {
      U(r, e, s), n || (i = [
        se(e, "click", t[22]),
        Wi(eM.call(null, e))
      ], n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, ht(i);
    }
  };
}
function CZ(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m;
  n = new ab({
    props: {
      title: "Edit nested content " + (t[18].length > 1 ? ` (${t[18].length})` : ""),
      onClose: t[23]
    }
  }), h = new $A({
    props: {
      mode: ft(t[18]).mode,
      content: ft(t[18]).content,
      readOnly: t[0],
      indentation: t[1],
      tabSize: t[2],
      statusBar: t[5],
      mainMenuBar: t[3],
      navigationBar: t[4],
      escapeControlCharacters: t[6],
      escapeUnicodeCharacters: t[7],
      flattenColumns: t[8],
      parser: t[9],
      parseMemoizeOne: t[20],
      validator: t[10],
      validationParser: t[11],
      pathParser: t[12],
      onError: t[26],
      onChange: t[24],
      onChangeMode: t[25],
      onRenderValue: t[13],
      onClassName: t[14],
      onFocus: is,
      onBlur: is,
      onRenderMenu: t[15],
      onSortModal: t[16],
      onTransformModal: t[17],
      onJSONEditorModal: t[27]
    }
  });
  let C = t[19] && yS(t), v = t[18].length > 1 && wS(t);
  function k(w, A) {
    return w[0] ? vZ : kZ;
  }
  let S = k(t), O = S(t);
  return {
    c() {
      e = j("div"), me(n.$$.fragment), i = Q(), r = j("div"), s = j("div"), s.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Path</div>', o = Q(), l = j("input"), a = Q(), c = j("div"), c.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Contents</div>', u = Q(), f = j("div"), me(h.$$.fragment), d = Q(), p = j("div"), C && C.c(), g = Q(), v && v.c(), _ = Q(), O.c(), b(s, "class", "jse-label svelte-1hibiw3"), b(l, "class", "jse-path svelte-1hibiw3"), b(l, "type", "text"), l.readOnly = !0, b(l, "title", "Selected path"), l.value = t[21], b(c, "class", "jse-label svelte-1hibiw3"), b(f, "class", "jse-modal-inline-editor svelte-1hibiw3"), b(p, "class", "jse-actions svelte-1hibiw3"), b(r, "class", "jse-modal-contents svelte-1hibiw3"), b(e, "class", "jse-modal jse-jsoneditor-modal svelte-1hibiw3");
    },
    m(w, A) {
      U(w, e, A), pe(n, e, null), E(e, i), E(e, r), E(r, s), E(r, o), E(r, l), E(r, a), E(r, c), E(r, u), E(r, f), pe(h, f, null), E(r, d), E(r, p), C && C.m(p, null), E(p, g), v && v.m(p, null), E(p, _), O.m(p, null), m = !0;
    },
    p(w, A) {
      const D = {};
      A[0] & 262144 && (D.title = "Edit nested content " + (w[18].length > 1 ? ` (${w[18].length})` : "")), n.$set(D), (!m || A[0] & 2097152 && l.value !== w[21]) && (l.value = w[21]);
      const R = {};
      A[0] & 262144 && (R.mode = ft(w[18]).mode), A[0] & 262144 && (R.content = ft(w[18]).content), A[0] & 1 && (R.readOnly = w[0]), A[0] & 2 && (R.indentation = w[1]), A[0] & 4 && (R.tabSize = w[2]), A[0] & 32 && (R.statusBar = w[5]), A[0] & 8 && (R.mainMenuBar = w[3]), A[0] & 16 && (R.navigationBar = w[4]), A[0] & 64 && (R.escapeControlCharacters = w[6]), A[0] & 128 && (R.escapeUnicodeCharacters = w[7]), A[0] & 256 && (R.flattenColumns = w[8]), A[0] & 512 && (R.parser = w[9]), A[0] & 1048576 && (R.parseMemoizeOne = w[20]), A[0] & 1024 && (R.validator = w[10]), A[0] & 2048 && (R.validationParser = w[11]), A[0] & 4096 && (R.pathParser = w[12]), A[0] & 8192 && (R.onRenderValue = w[13]), A[0] & 16384 && (R.onClassName = w[14]), A[0] & 32768 && (R.onRenderMenu = w[15]), A[0] & 65536 && (R.onSortModal = w[16]), A[0] & 131072 && (R.onTransformModal = w[17]), h.$set(R), w[19] ? C ? C.p(w, A) : (C = yS(w), C.c(), C.m(p, g)) : C && (C.d(1), C = null), w[18].length > 1 ? v ? (v.p(w, A), A[0] & 262144 && P(v, 1)) : (v = wS(w), v.c(), P(v, 1), v.m(p, _)) : v && (Se(), x(v, 1, 1, () => {
        v = null;
      }), Ee()), S === (S = k(w)) && O ? O.p(w, A) : (O.d(1), O = S(w), O && (O.c(), O.m(p, null)));
    },
    i(w) {
      m || (P(n.$$.fragment, w), P(h.$$.fragment, w), P(v), m = !0);
    },
    o(w) {
      x(n.$$.fragment, w), x(h.$$.fragment, w), x(v), m = !1;
    },
    d(w) {
      w && V(e), ge(n), ge(h), C && C.d(), v && v.d(), O.d();
    }
  };
}
function eM(t) {
  t.focus();
}
function SZ(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:JSONEditorModal");
  let { content: l } = e, { path: a } = e, { onPatch: c } = e, { readOnly: u } = e, { indentation: f } = e, { tabSize: h } = e, { mainMenuBar: d } = e, { navigationBar: p } = e, { statusBar: g } = e, { escapeControlCharacters: _ } = e, { escapeUnicodeCharacters: m } = e, { flattenColumns: C } = e, { parser: v } = e, { validator: k } = e, { validationParser: S } = e, { pathParser: O } = e, { onRenderValue: w } = e, { onClassName: A } = e, { onRenderMenu: D } = e, { onSortModal: R } = e, { onTransformModal: M } = e;
  const { close: H } = gi("simple-modal");
  let I = [{
    mode: L(l),
    content: l,
    relativePath: a
  }], z;
  function L(re) {
    return K0(re) && qt(re.json) ? vi.table : vi.tree;
  }
  function K() {
    if (o("handleApply"), !u)
      try {
        n(19, z = void 0);
        const re = [
          {
            op: "replace",
            path: Be(ft(I).relativePath),
            value: cw(ft(I).content, v).json
          }
        ];
        if (I.length > 1) {
          const ie = I[I.length - 2].content, Z = cw(ie, v).json, Le = {
            json: Fr(Z, re)
          };
          n(18, I = At(I)), N(Le);
        } else
          c(re), H();
      } catch (re) {
        n(19, z = re.toString());
      }
  }
  function F() {
    o("handleClose"), I.length > 1 ? (n(18, I = At(I)), n(19, z = void 0)) : H();
  }
  function N(re) {
    o("handleChange", re);
    const ie = { ...ft(I), content: re };
    n(18, I = [...At(I), ie]);
  }
  function te(re) {
    o("handleChangeMode", re);
    const ie = { ...ft(I), mode: re };
    n(18, I = [...At(I), ie]);
  }
  function ue(re) {
    n(19, z = re.toString()), console.error(re);
  }
  function q({ content: re, path: ie }) {
    o("handleJSONEditorModal", { content: re, path: ie });
    const Z = {
      mode: L(re),
      content: re,
      relativePath: ie
    };
    n(18, I = [...I, Z]);
  }
  return t.$$set = (re) => {
    "content" in re && n(28, l = re.content), "path" in re && n(29, a = re.path), "onPatch" in re && n(30, c = re.onPatch), "readOnly" in re && n(0, u = re.readOnly), "indentation" in re && n(1, f = re.indentation), "tabSize" in re && n(2, h = re.tabSize), "mainMenuBar" in re && n(3, d = re.mainMenuBar), "navigationBar" in re && n(4, p = re.navigationBar), "statusBar" in re && n(5, g = re.statusBar), "escapeControlCharacters" in re && n(6, _ = re.escapeControlCharacters), "escapeUnicodeCharacters" in re && n(7, m = re.escapeUnicodeCharacters), "flattenColumns" in re && n(8, C = re.flattenColumns), "parser" in re && n(9, v = re.parser), "validator" in re && n(10, k = re.validator), "validationParser" in re && n(11, S = re.validationParser), "pathParser" in re && n(12, O = re.pathParser), "onRenderValue" in re && n(13, w = re.onRenderValue), "onClassName" in re && n(14, A = re.onClassName), "onRenderMenu" in re && n(15, D = re.onRenderMenu), "onSortModal" in re && n(16, R = re.onSortModal), "onTransformModal" in re && n(17, M = re.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 262144 && n(31, i = I.flatMap((re) => re.relativePath)), t.$$.dirty[1] & 1 && n(21, r = Pt(i) ? "(whole document)" : wr(qi(i))), t.$$.dirty[0] & 512 && n(20, s = Ku(v.parse));
  }, [
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    D,
    R,
    M,
    I,
    z,
    s,
    r,
    K,
    F,
    N,
    te,
    ue,
    q,
    l,
    a,
    c,
    i
  ];
}
class EZ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      SZ,
      CZ,
      wt,
      {
        content: 28,
        path: 29,
        onPatch: 30,
        readOnly: 0,
        indentation: 1,
        tabSize: 2,
        mainMenuBar: 3,
        navigationBar: 4,
        statusBar: 5,
        escapeControlCharacters: 6,
        escapeUnicodeCharacters: 7,
        flattenColumns: 8,
        parser: 9,
        validator: 10,
        validationParser: 11,
        pathParser: 12,
        onRenderValue: 13,
        onClassName: 14,
        onRenderMenu: 15,
        onSortModal: 16,
        onTransformModal: 17
      },
      null,
      [-1, -1]
    );
  }
}
const AZ = EZ;
function MZ(t, e, n) {
  const i = gi("simple-modal"), r = i.open, s = i.close;
  return [r, s];
}
class OZ extends Qe {
  constructor(e) {
    super(), Xe(this, e, MZ, null, wt, { open: 0, close: 1 });
  }
  get open() {
    return this.$$.ctx[0];
  }
  get close() {
    return this.$$.ctx[1];
  }
}
const TZ = OZ;
function vS(t) {
  let e, n, i = {
    mode: t[1],
    content: t[0],
    readOnly: t[2],
    indentation: t[3],
    tabSize: t[4],
    statusBar: t[7],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[24],
    validator: t[12],
    validationParser: t[13],
    pathParser: t[14],
    onError: t[18],
    onChange: t[25],
    onChangeMode: t[28],
    onRenderValue: t[15],
    onClassName: t[16],
    onFocus: t[26],
    onBlur: t[27],
    onRenderMenu: t[17],
    onSortModal: t[30],
    onTransformModal: t[29],
    onJSONEditorModal: t[31]
  };
  return e = new $A({ props: i }), t[56](e), {
    c() {
      me(e.$$.fragment);
    },
    m(r, s) {
      pe(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 2 && (o.mode = r[1]), s[0] & 1 && (o.content = r[0]), s[0] & 4 && (o.readOnly = r[2]), s[0] & 8 && (o.indentation = r[3]), s[0] & 16 && (o.tabSize = r[4]), s[0] & 128 && (o.statusBar = r[7]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 64 && (o.navigationBar = r[6]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 1024 && (o.flattenColumns = r[10]), s[0] & 2048 && (o.parser = r[11]), s[0] & 16777216 && (o.parseMemoizeOne = r[24]), s[0] & 4096 && (o.validator = r[12]), s[0] & 8192 && (o.validationParser = r[13]), s[0] & 16384 && (o.pathParser = r[14]), s[0] & 262144 && (o.onError = r[18]), s[0] & 32768 && (o.onRenderValue = r[15]), s[0] & 65536 && (o.onClassName = r[16]), s[0] & 131072 && (o.onRenderMenu = r[17]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[56](null), ge(e, r);
    }
  };
}
function RZ(t) {
  let e, n, i, r, s = t[19], o;
  function l(u) {
    t[55](u);
  }
  let a = {};
  t[22] !== void 0 && (a.open = t[22]), e = new TZ({ props: a }), yt.push(() => Pr(e, "open", l, t[22]));
  let c = vS(t);
  return {
    c() {
      me(e.$$.fragment), i = Q(), r = j("div"), c.c(), b(r, "class", "jse-main svelte-16j5kem"), Ce(r, "jse-focus", t[20]);
    },
    m(u, f) {
      pe(e, u, f), U(u, i, f), U(u, r, f), c.m(r, null), o = !0;
    },
    p(u, f) {
      const h = {};
      !n && f[0] & 4194304 && (n = !0, h.open = u[22], Rr(() => n = !1)), e.$set(h), f[0] & 524288 && wt(s, s = u[19]) ? (Se(), x(c, 1, 1, ve), Ee(), c = vS(u), c.c(), P(c, 1), c.m(r, null)) : c.p(u, f), (!o || f[0] & 1048576) && Ce(r, "jse-focus", u[20]);
    },
    i(u) {
      o || (P(e.$$.fragment, u), P(c), o = !0);
    },
    o(u) {
      x(e.$$.fragment, u), x(c), o = !1;
    },
    d(u) {
      ge(e, u), u && V(i), u && V(r), c.d(u);
    }
  };
}
function PZ(t) {
  let e, n;
  return e = new Y4({
    props: {
      $$slots: { default: [RZ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 25165823 | r[1] & 268435456 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function IZ(t) {
  var s;
  let e, n;
  const i = [
    {
      show: (s = t[23]) == null ? void 0 : s.component
    },
    _y
  ];
  let r = {
    $$slots: { default: [PZ] },
    $$scope: { ctx: t }
  };
  for (let o = 0; o < i.length; o += 1)
    r = Go(r, i[o]);
  return e = new Y4({ props: r }), e.$on("close", t[32]), {
    c() {
      me(e.$$.fragment);
    },
    m(o, l) {
      pe(e, o, l), n = !0;
    },
    p(o, l) {
      var c;
      const a = l[0] & 8388608 ? Ul(i, [
        l[0] & 8388608 && {
          show: (c = o[23]) == null ? void 0 : c.component
        },
        l & 0 && rp(_y)
      ]) : {};
      l[0] & 25165823 | l[1] & 268435456 && (a.$$scope = { dirty: l, ctx: o }), e.$set(a);
    },
    i(o) {
      n || (P(e.$$.fragment, o), n = !0);
    },
    o(o) {
      x(e.$$.fragment, o), n = !1;
    },
    d(o) {
      ge(e, o);
    }
  };
}
function DZ(t) {
  let e, n;
  return e = new l6({
    props: {
      $$slots: { default: [IZ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 33554431 | r[1] & 268435456 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function tM(t) {
  this.$set(t);
}
function nM() {
  this.$destroy();
}
function NZ(t, e, n) {
  let i;
  const r = mi("jsoneditor:Main");
  let { content: s = { text: "" } } = e, { readOnly: o = !1 } = e, { indentation: l = 2 } = e, { tabSize: a = 4 } = e, { mode: c = vi.tree } = e, { mainMenuBar: u = !0 } = e, { navigationBar: f = !0 } = e, { statusBar: h = !0 } = e, { escapeControlCharacters: d = !1 } = e, { escapeUnicodeCharacters: p = !1 } = e, { flattenColumns: g = !0 } = e, { parser: _ = JSON } = e, { validator: m = null } = e, { validationParser: C = JSON } = e, { pathParser: v = {
    parse: Gj,
    stringify: qi
  } } = e, { queryLanguages: k = [nB] } = e, { queryLanguageId: S = k[0].id } = e, { onChangeQueryLanguage: O = is } = e, { onChange: w = null } = e, { onRenderValue: A = Fx } = e, { onClassName: D = () => {
  } } = e, { onRenderMenu: R = is } = e, { onChangeMode: M = is } = e, { onError: H = (G) => {
    console.error(G), alert(G.toString());
  } } = e, { onFocus: J = is } = e, { onBlur: I = is } = e, z = Nc(), L = !1, K, F, N = null, te = _;
  function ue() {
    return s;
  }
  function q(G) {
    r("set");
    const ce = Tg(G);
    if (ce)
      throw new Error(ce);
    n(19, z = Nc()), n(0, s = G);
  }
  function re(G) {
    r("update");
    const ce = Tg(G);
    if (ce)
      throw new Error(ce);
    n(0, s = G);
  }
  function ie(G) {
    if (Ia(s))
      try {
        n(0, s = {
          json: _.parse(s.text),
          text: void 0
        });
      } catch {
        throw new Error("Cannot apply patch: current document contains invalid JSON");
      }
    return K.patch(G);
  }
  function Z(G) {
    K.expand(G);
  }
  function Le(G) {
    K.transform(G);
  }
  function Ie() {
    return K.validate();
  }
  function Fe() {
    return K.acceptAutoRepair();
  }
  function le(G) {
    return K.scrollTo(G);
  }
  function De(G) {
    return K.findElement(G);
  }
  function Ve() {
    K.focus();
  }
  function ye() {
    K.refresh();
  }
  function fe(G, ce, Ne) {
    n(0, s = G), w && w(G, ce, Ne);
  }
  function Ae() {
    n(20, L = !0), J && J();
  }
  function ae() {
    n(20, L = !1), I && I();
  }
  async function $(G) {
    c !== G && (n(1, c = G), await Xi(), Ve(), M(G));
  }
  function de(G) {
    r("handleChangeQueryLanguage", G), n(33, S = G), O(G);
  }
  function he({ id: G, json: ce, rootPath: Ne, onTransform: qe, onClose: mt }) {
    o || F(
      hW,
      {
        id: G,
        json: ce,
        rootPath: Ne,
        indentation: l,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        parser: _,
        parseMemoizeOne: i,
        validationParser: C,
        pathParser: v,
        queryLanguages: k,
        queryLanguageId: S,
        onChangeQueryLanguage: de,
        onRenderValue: A,
        onClassName: D,
        onTransform: qe
      },
      yR,
      { onClose: mt }
    );
  }
  function W({ id: G, json: ce, rootPath: Ne, onSort: qe, onClose: mt }) {
    o || F(bW, { id: G, json: ce, rootPath: Ne, onSort: qe }, _R, { onClose: mt });
  }
  function y({ content: G, path: ce, onPatch: Ne, onClose: qe }) {
    r("onJSONEditorModal", { content: G, path: ce }), n(23, N = {
      component: G4(AZ, {
        content: G,
        path: ce,
        onPatch: Ne,
        readOnly: o,
        indentation: l,
        tabSize: a,
        mainMenuBar: u,
        navigationBar: f,
        statusBar: h,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        flattenColumns: g,
        parser: _,
        validator: void 0,
        validationParser: C,
        pathParser: v,
        onRenderValue: A,
        onClassName: D,
        onRenderMenu: R,
        onSortModal: W,
        onTransformModal: he
      }),
      callbacks: { onClose: qe }
    });
  }
  function T() {
    var G;
    (G = N == null ? void 0 : N.callbacks) == null || G.onClose(), n(23, N = null);
  }
  function B(G) {
    F = G, n(22, F);
  }
  function X(G) {
    yt[G ? "unshift" : "push"](() => {
      K = G, n(21, K);
    });
  }
  return t.$$set = (G) => {
    "content" in G && n(0, s = G.content), "readOnly" in G && n(2, o = G.readOnly), "indentation" in G && n(3, l = G.indentation), "tabSize" in G && n(4, a = G.tabSize), "mode" in G && n(1, c = G.mode), "mainMenuBar" in G && n(5, u = G.mainMenuBar), "navigationBar" in G && n(6, f = G.navigationBar), "statusBar" in G && n(7, h = G.statusBar), "escapeControlCharacters" in G && n(8, d = G.escapeControlCharacters), "escapeUnicodeCharacters" in G && n(9, p = G.escapeUnicodeCharacters), "flattenColumns" in G && n(10, g = G.flattenColumns), "parser" in G && n(11, _ = G.parser), "validator" in G && n(12, m = G.validator), "validationParser" in G && n(13, C = G.validationParser), "pathParser" in G && n(14, v = G.pathParser), "queryLanguages" in G && n(34, k = G.queryLanguages), "queryLanguageId" in G && n(33, S = G.queryLanguageId), "onChangeQueryLanguage" in G && n(35, O = G.onChangeQueryLanguage), "onChange" in G && n(36, w = G.onChange), "onRenderValue" in G && n(15, A = G.onRenderValue), "onClassName" in G && n(16, D = G.onClassName), "onRenderMenu" in G && n(17, R = G.onRenderMenu), "onChangeMode" in G && n(37, M = G.onChangeMode), "onError" in G && n(18, H = G.onError), "onFocus" in G && n(38, J = G.onFocus), "onBlur" in G && n(39, I = G.onBlur);
  }, t.$$.update = () => {
    if (t.$$.dirty[0] & 2049 | t.$$.dirty[1] & 8388608 && (Sj(_, te) || (r("parser changed, recreate editor"), K0(s) && n(0, s = {
      json: _.parse(te.stringify(s.json))
    }), n(54, te = _), n(19, z = Nc()))), t.$$.dirty[0] & 1) {
      const G = Tg(s);
      G && console.error("Error: " + G);
    }
    t.$$.dirty[0] & 2048 && n(24, i = Ku(_.parse)), t.$$.dirty[0] & 2 && (r("mode changed to", c), c === "code" && console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'));
  }, [
    s,
    c,
    o,
    l,
    a,
    u,
    f,
    h,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    A,
    D,
    R,
    H,
    z,
    L,
    K,
    F,
    N,
    i,
    fe,
    Ae,
    ae,
    $,
    he,
    W,
    y,
    T,
    S,
    k,
    O,
    w,
    M,
    J,
    I,
    ue,
    q,
    re,
    ie,
    Z,
    Le,
    Ie,
    Fe,
    le,
    De,
    Ve,
    ye,
    tM,
    nM,
    te,
    B,
    X
  ];
}
class LZ extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      NZ,
      DZ,
      wt,
      {
        content: 0,
        readOnly: 2,
        indentation: 3,
        tabSize: 4,
        mode: 1,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        validator: 12,
        validationParser: 13,
        pathParser: 14,
        queryLanguages: 34,
        queryLanguageId: 33,
        onChangeQueryLanguage: 35,
        onChange: 36,
        onRenderValue: 15,
        onClassName: 16,
        onRenderMenu: 17,
        onChangeMode: 37,
        onError: 18,
        onFocus: 38,
        onBlur: 39,
        get: 40,
        set: 41,
        update: 42,
        patch: 43,
        expand: 44,
        transform: 45,
        validate: 46,
        acceptAutoRepair: 47,
        scrollTo: 48,
        findElement: 49,
        focus: 50,
        refresh: 51,
        updateProps: 52,
        destroy: 53
      },
      null,
      [-1, -1]
    );
  }
  get get() {
    return this.$$.ctx[40];
  }
  get set() {
    return this.$$.ctx[41];
  }
  get update() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get expand() {
    return this.$$.ctx[44];
  }
  get transform() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[47];
  }
  get scrollTo() {
    return this.$$.ctx[48];
  }
  get findElement() {
    return this.$$.ctx[49];
  }
  get focus() {
    return this.$$.ctx[50];
  }
  get refresh() {
    return this.$$.ctx[51];
  }
  get updateProps() {
    return tM;
  }
  get destroy() {
    return nM;
  }
}
const jZ = LZ;
function Zf(t) {
  throw new Error('Could not dynamically require "' + t + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
function iM() {
  return {
    async: !1,
    baseUrl: null,
    breaks: !1,
    extensions: null,
    gfm: !0,
    headerIds: !0,
    headerPrefix: "",
    highlight: null,
    langPrefix: "language-",
    mangle: !0,
    pedantic: !1,
    renderer: null,
    sanitize: !1,
    sanitizer: null,
    silent: !1,
    smartypants: !1,
    tokenizer: null,
    walkTokens: null,
    xhtml: !1
  };
}
let uc = iM();
function BZ(t) {
  uc = t;
}
const rM = /[&<>"']/, xZ = new RegExp(rM.source, "g"), sM = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/, FZ = new RegExp(sM.source, "g"), zZ = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, kS = (t) => zZ[t];
function wi(t, e) {
  if (e) {
    if (rM.test(t))
      return t.replace(xZ, kS);
  } else if (sM.test(t))
    return t.replace(FZ, kS);
  return t;
}
const VZ = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function oM(t) {
  return t.replace(VZ, (e, n) => (n = n.toLowerCase(), n === "colon" ? ":" : n.charAt(0) === "#" ? n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1)) : ""));
}
const UZ = /(^|[^\[])\^/g;
function $t(t, e) {
  t = typeof t == "string" ? t : t.source, e = e || "";
  const n = {
    replace: (i, r) => (r = r.source || r, r = r.replace(UZ, "$1"), t = t.replace(i, r), n),
    getRegex: () => new RegExp(t, e)
  };
  return n;
}
const HZ = /[^\w:]/g, WZ = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function CS(t, e, n) {
  if (t) {
    let i;
    try {
      i = decodeURIComponent(oM(n)).replace(HZ, "").toLowerCase();
    } catch {
      return null;
    }
    if (i.indexOf("javascript:") === 0 || i.indexOf("vbscript:") === 0 || i.indexOf("data:") === 0)
      return null;
  }
  e && !WZ.test(n) && (n = GZ(e, n));
  try {
    n = encodeURI(n).replace(/%25/g, "%");
  } catch {
    return null;
  }
  return n;
}
const $f = {}, qZ = /^[^:]+:\/*[^/]*$/, JZ = /^([^:]+:)[\s\S]*$/, KZ = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function GZ(t, e) {
  $f[" " + t] || (qZ.test(t) ? $f[" " + t] = t + "/" : $f[" " + t] = Ah(t, "/", !0)), t = $f[" " + t];
  const n = t.indexOf(":") === -1;
  return e.substring(0, 2) === "//" ? n ? e : t.replace(JZ, "$1") + e : e.charAt(0) === "/" ? n ? e : t.replace(KZ, "$1") + e : t + e;
}
const jd = { exec: function() {
} };
function Jr(t) {
  let e = 1, n, i;
  for (; e < arguments.length; e++) {
    n = arguments[e];
    for (i in n)
      Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
  }
  return t;
}
function SS(t, e) {
  const n = t.replace(/\|/g, (s, o, l) => {
    let a = !1, c = o;
    for (; --c >= 0 && l[c] === "\\"; )
      a = !a;
    return a ? "|" : " |";
  }), i = n.split(/ \|/);
  let r = 0;
  if (i[0].trim() || i.shift(), i.length > 0 && !i[i.length - 1].trim() && i.pop(), i.length > e)
    i.splice(e);
  else
    for (; i.length < e; )
      i.push("");
  for (; r < i.length; r++)
    i[r] = i[r].trim().replace(/\\\|/g, "|");
  return i;
}
function Ah(t, e, n) {
  const i = t.length;
  if (i === 0)
    return "";
  let r = 0;
  for (; r < i; ) {
    const s = t.charAt(i - r - 1);
    if (s === e && !n)
      r++;
    else if (s !== e && n)
      r++;
    else
      break;
  }
  return t.slice(0, i - r);
}
function YZ(t, e) {
  if (t.indexOf(e[1]) === -1)
    return -1;
  const n = t.length;
  let i = 0, r = 0;
  for (; r < n; r++)
    if (t[r] === "\\")
      r++;
    else if (t[r] === e[0])
      i++;
    else if (t[r] === e[1] && (i--, i < 0))
      return r;
  return -1;
}
function lM(t) {
  t && t.sanitize && !t.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
}
function ES(t, e) {
  if (e < 1)
    return "";
  let n = "";
  for (; e > 1; )
    e & 1 && (n += t), e >>= 1, t += t;
  return n + t;
}
function AS(t, e, n, i) {
  const r = e.href, s = e.title ? wi(e.title) : null, o = t[1].replace(/\\([\[\]])/g, "$1");
  if (t[0].charAt(0) !== "!") {
    i.state.inLink = !0;
    const l = {
      type: "link",
      raw: n,
      href: r,
      title: s,
      text: o,
      tokens: i.inlineTokens(o)
    };
    return i.state.inLink = !1, l;
  }
  return {
    type: "image",
    raw: n,
    href: r,
    title: s,
    text: wi(o)
  };
}
function XZ(t, e) {
  const n = t.match(/^(\s+)(?:```)/);
  if (n === null)
    return e;
  const i = n[1];
  return e.split(`
`).map((r) => {
    const s = r.match(/^\s+/);
    if (s === null)
      return r;
    const [o] = s;
    return o.length >= i.length ? r.slice(i.length) : r;
  }).join(`
`);
}
class Xb {
  constructor(e) {
    this.options = e || uc;
  }
  space(e) {
    const n = this.rules.block.newline.exec(e);
    if (n && n[0].length > 0)
      return {
        type: "space",
        raw: n[0]
      };
  }
  code(e) {
    const n = this.rules.block.code.exec(e);
    if (n) {
      const i = n[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: n[0],
        codeBlockStyle: "indented",
        text: this.options.pedantic ? i : Ah(i, `
`)
      };
    }
  }
  fences(e) {
    const n = this.rules.block.fences.exec(e);
    if (n) {
      const i = n[0], r = XZ(i, n[3] || "");
      return {
        type: "code",
        raw: i,
        lang: n[2] ? n[2].trim().replace(this.rules.inline._escapes, "$1") : n[2],
        text: r
      };
    }
  }
  heading(e) {
    const n = this.rules.block.heading.exec(e);
    if (n) {
      let i = n[2].trim();
      if (/#$/.test(i)) {
        const r = Ah(i, "#");
        (this.options.pedantic || !r || / $/.test(r)) && (i = r.trim());
      }
      return {
        type: "heading",
        raw: n[0],
        depth: n[1].length,
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  hr(e) {
    const n = this.rules.block.hr.exec(e);
    if (n)
      return {
        type: "hr",
        raw: n[0]
      };
  }
  blockquote(e) {
    const n = this.rules.block.blockquote.exec(e);
    if (n) {
      const i = n[0].replace(/^ *>[ \t]?/gm, ""), r = this.lexer.state.top;
      this.lexer.state.top = !0;
      const s = this.lexer.blockTokens(i);
      return this.lexer.state.top = r, {
        type: "blockquote",
        raw: n[0],
        tokens: s,
        text: i
      };
    }
  }
  list(e) {
    let n = this.rules.block.list.exec(e);
    if (n) {
      let i, r, s, o, l, a, c, u, f, h, d, p, g = n[1].trim();
      const _ = g.length > 1, m = {
        type: "list",
        raw: "",
        ordered: _,
        start: _ ? +g.slice(0, -1) : "",
        loose: !1,
        items: []
      };
      g = _ ? `\\d{1,9}\\${g.slice(-1)}` : `\\${g}`, this.options.pedantic && (g = _ ? g : "[*+-]");
      const C = new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      for (; e && (p = !1, !(!(n = C.exec(e)) || this.rules.block.hr.test(e))); ) {
        if (i = n[0], e = e.substring(i.length), u = n[2].split(`
`, 1)[0], f = e.split(`
`, 1)[0], this.options.pedantic ? (o = 2, d = u.trimLeft()) : (o = n[2].search(/[^ ]/), o = o > 4 ? 1 : o, d = u.slice(o), o += n[1].length), a = !1, !u && /^ *$/.test(f) && (i += f + `
`, e = e.substring(f.length + 1), p = !0), !p) {
          const k = new RegExp(`^ {0,${Math.min(3, o - 1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`), S = new RegExp(`^ {0,${Math.min(3, o - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`), O = new RegExp(`^ {0,${Math.min(3, o - 1)}}(?:\`\`\`|~~~)`), w = new RegExp(`^ {0,${Math.min(3, o - 1)}}#`);
          for (; e && (h = e.split(`
`, 1)[0], u = h, this.options.pedantic && (u = u.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ")), !(O.test(u) || w.test(u) || k.test(u) || S.test(e))); ) {
            if (u.search(/[^ ]/) >= o || !u.trim())
              d += `
` + u.slice(o);
            else if (!a)
              d += `
` + u;
            else
              break;
            !a && !u.trim() && (a = !0), i += h + `
`, e = e.substring(h.length + 1);
          }
        }
        m.loose || (c ? m.loose = !0 : /\n *\n *$/.test(i) && (c = !0)), this.options.gfm && (r = /^\[[ xX]\] /.exec(d), r && (s = r[0] !== "[ ] ", d = d.replace(/^\[[ xX]\] +/, ""))), m.items.push({
          type: "list_item",
          raw: i,
          task: !!r,
          checked: s,
          loose: !1,
          text: d
        }), m.raw += i;
      }
      m.items[m.items.length - 1].raw = i.trimRight(), m.items[m.items.length - 1].text = d.trimRight(), m.raw = m.raw.trimRight();
      const v = m.items.length;
      for (l = 0; l < v; l++)
        if (this.lexer.state.top = !1, m.items[l].tokens = this.lexer.blockTokens(m.items[l].text, []), !m.loose) {
          const k = m.items[l].tokens.filter((O) => O.type === "space"), S = k.length > 0 && k.some((O) => /\n.*\n/.test(O.raw));
          m.loose = S;
        }
      if (m.loose)
        for (l = 0; l < v; l++)
          m.items[l].loose = !0;
      return m;
    }
  }
  html(e) {
    const n = this.rules.block.html.exec(e);
    if (n) {
      const i = {
        type: "html",
        raw: n[0],
        pre: !this.options.sanitizer && (n[1] === "pre" || n[1] === "script" || n[1] === "style"),
        text: n[0]
      };
      if (this.options.sanitize) {
        const r = this.options.sanitizer ? this.options.sanitizer(n[0]) : wi(n[0]);
        i.type = "paragraph", i.text = r, i.tokens = this.lexer.inline(r);
      }
      return i;
    }
  }
  def(e) {
    const n = this.rules.block.def.exec(e);
    if (n) {
      const i = n[1].toLowerCase().replace(/\s+/g, " "), r = n[2] ? n[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "", s = n[3] ? n[3].substring(1, n[3].length - 1).replace(this.rules.inline._escapes, "$1") : n[3];
      return {
        type: "def",
        tag: i,
        raw: n[0],
        href: r,
        title: s
      };
    }
  }
  table(e) {
    const n = this.rules.block.table.exec(e);
    if (n) {
      const i = {
        type: "table",
        header: SS(n[1]).map((r) => ({ text: r })),
        align: n[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: n[3] && n[3].trim() ? n[3].replace(/\n[ \t]*$/, "").split(`
`) : []
      };
      if (i.header.length === i.align.length) {
        i.raw = n[0];
        let r = i.align.length, s, o, l, a;
        for (s = 0; s < r; s++)
          /^ *-+: *$/.test(i.align[s]) ? i.align[s] = "right" : /^ *:-+: *$/.test(i.align[s]) ? i.align[s] = "center" : /^ *:-+ *$/.test(i.align[s]) ? i.align[s] = "left" : i.align[s] = null;
        for (r = i.rows.length, s = 0; s < r; s++)
          i.rows[s] = SS(i.rows[s], i.header.length).map((c) => ({ text: c }));
        for (r = i.header.length, o = 0; o < r; o++)
          i.header[o].tokens = this.lexer.inline(i.header[o].text);
        for (r = i.rows.length, o = 0; o < r; o++)
          for (a = i.rows[o], l = 0; l < a.length; l++)
            a[l].tokens = this.lexer.inline(a[l].text);
        return i;
      }
    }
  }
  lheading(e) {
    const n = this.rules.block.lheading.exec(e);
    if (n)
      return {
        type: "heading",
        raw: n[0],
        depth: n[2].charAt(0) === "=" ? 1 : 2,
        text: n[1],
        tokens: this.lexer.inline(n[1])
      };
  }
  paragraph(e) {
    const n = this.rules.block.paragraph.exec(e);
    if (n) {
      const i = n[1].charAt(n[1].length - 1) === `
` ? n[1].slice(0, -1) : n[1];
      return {
        type: "paragraph",
        raw: n[0],
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  text(e) {
    const n = this.rules.block.text.exec(e);
    if (n)
      return {
        type: "text",
        raw: n[0],
        text: n[0],
        tokens: this.lexer.inline(n[0])
      };
  }
  escape(e) {
    const n = this.rules.inline.escape.exec(e);
    if (n)
      return {
        type: "escape",
        raw: n[0],
        text: wi(n[1])
      };
  }
  tag(e) {
    const n = this.rules.inline.tag.exec(e);
    if (n)
      return !this.lexer.state.inLink && /^<a /i.test(n[0]) ? this.lexer.state.inLink = !0 : this.lexer.state.inLink && /^<\/a>/i.test(n[0]) && (this.lexer.state.inLink = !1), !this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(n[0]) ? this.lexer.state.inRawBlock = !0 : this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0]) && (this.lexer.state.inRawBlock = !1), {
        type: this.options.sanitize ? "text" : "html",
        raw: n[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(n[0]) : wi(n[0]) : n[0]
      };
  }
  link(e) {
    const n = this.rules.inline.link.exec(e);
    if (n) {
      const i = n[2].trim();
      if (!this.options.pedantic && /^</.test(i)) {
        if (!/>$/.test(i))
          return;
        const o = Ah(i.slice(0, -1), "\\");
        if ((i.length - o.length) % 2 === 0)
          return;
      } else {
        const o = YZ(n[2], "()");
        if (o > -1) {
          const a = (n[0].indexOf("!") === 0 ? 5 : 4) + n[1].length + o;
          n[2] = n[2].substring(0, o), n[0] = n[0].substring(0, a).trim(), n[3] = "";
        }
      }
      let r = n[2], s = "";
      if (this.options.pedantic) {
        const o = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);
        o && (r = o[1], s = o[3]);
      } else
        s = n[3] ? n[3].slice(1, -1) : "";
      return r = r.trim(), /^</.test(r) && (this.options.pedantic && !/>$/.test(i) ? r = r.slice(1) : r = r.slice(1, -1)), AS(n, {
        href: r && r.replace(this.rules.inline._escapes, "$1"),
        title: s && s.replace(this.rules.inline._escapes, "$1")
      }, n[0], this.lexer);
    }
  }
  reflink(e, n) {
    let i;
    if ((i = this.rules.inline.reflink.exec(e)) || (i = this.rules.inline.nolink.exec(e))) {
      let r = (i[2] || i[1]).replace(/\s+/g, " ");
      if (r = n[r.toLowerCase()], !r) {
        const s = i[0].charAt(0);
        return {
          type: "text",
          raw: s,
          text: s
        };
      }
      return AS(i, r, i[0], this.lexer);
    }
  }
  emStrong(e, n, i = "") {
    let r = this.rules.inline.emStrong.lDelim.exec(e);
    if (!r || r[3] && i.match(/[\p{L}\p{N}]/u))
      return;
    const s = r[1] || r[2] || "";
    if (!s || s && (i === "" || this.rules.inline.punctuation.exec(i))) {
      const o = r[0].length - 1;
      let l, a, c = o, u = 0;
      const f = r[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      for (f.lastIndex = 0, n = n.slice(-1 * e.length + o); (r = f.exec(n)) != null; ) {
        if (l = r[1] || r[2] || r[3] || r[4] || r[5] || r[6], !l)
          continue;
        if (a = l.length, r[3] || r[4]) {
          c += a;
          continue;
        } else if ((r[5] || r[6]) && o % 3 && !((o + a) % 3)) {
          u += a;
          continue;
        }
        if (c -= a, c > 0)
          continue;
        a = Math.min(a, a + c + u);
        const h = e.slice(0, o + r.index + (r[0].length - l.length) + a);
        if (Math.min(o, a) % 2) {
          const p = h.slice(1, -1);
          return {
            type: "em",
            raw: h,
            text: p,
            tokens: this.lexer.inlineTokens(p)
          };
        }
        const d = h.slice(2, -2);
        return {
          type: "strong",
          raw: h,
          text: d,
          tokens: this.lexer.inlineTokens(d)
        };
      }
    }
  }
  codespan(e) {
    const n = this.rules.inline.code.exec(e);
    if (n) {
      let i = n[2].replace(/\n/g, " ");
      const r = /[^ ]/.test(i), s = /^ /.test(i) && / $/.test(i);
      return r && s && (i = i.substring(1, i.length - 1)), i = wi(i, !0), {
        type: "codespan",
        raw: n[0],
        text: i
      };
    }
  }
  br(e) {
    const n = this.rules.inline.br.exec(e);
    if (n)
      return {
        type: "br",
        raw: n[0]
      };
  }
  del(e) {
    const n = this.rules.inline.del.exec(e);
    if (n)
      return {
        type: "del",
        raw: n[0],
        text: n[2],
        tokens: this.lexer.inlineTokens(n[2])
      };
  }
  autolink(e, n) {
    const i = this.rules.inline.autolink.exec(e);
    if (i) {
      let r, s;
      return i[2] === "@" ? (r = wi(this.options.mangle ? n(i[1]) : i[1]), s = "mailto:" + r) : (r = wi(i[1]), s = r), {
        type: "link",
        raw: i[0],
        text: r,
        href: s,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  url(e, n) {
    let i;
    if (i = this.rules.inline.url.exec(e)) {
      let r, s;
      if (i[2] === "@")
        r = wi(this.options.mangle ? n(i[0]) : i[0]), s = "mailto:" + r;
      else {
        let o;
        do
          o = i[0], i[0] = this.rules.inline._backpedal.exec(i[0])[0];
        while (o !== i[0]);
        r = wi(i[0]), i[1] === "www." ? s = "http://" + i[0] : s = i[0];
      }
      return {
        type: "link",
        raw: i[0],
        text: r,
        href: s,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  inlineText(e, n) {
    const i = this.rules.inline.text.exec(e);
    if (i) {
      let r;
      return this.lexer.state.inRawBlock ? r = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : wi(i[0]) : i[0] : r = wi(this.options.smartypants ? n(i[0]) : i[0]), {
        type: "text",
        raw: i[0],
        text: r
      };
    }
  }
}
const pt = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: jd,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
pt._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
pt._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
pt.def = $t(pt.def).replace("label", pt._label).replace("title", pt._title).getRegex();
pt.bullet = /(?:[*+-]|\d{1,9}[.)])/;
pt.listItemStart = $t(/^( *)(bull) */).replace("bull", pt.bullet).getRegex();
pt.list = $t(pt.list).replace(/bull/g, pt.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + pt.def.source + ")").getRegex();
pt._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
pt._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
pt.html = $t(pt.html, "i").replace("comment", pt._comment).replace("tag", pt._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
pt.paragraph = $t(pt._paragraph).replace("hr", pt.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", pt._tag).getRegex();
pt.blockquote = $t(pt.blockquote).replace("paragraph", pt.paragraph).getRegex();
pt.normal = Jr({}, pt);
pt.gfm = Jr({}, pt.normal, {
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
});
pt.gfm.table = $t(pt.gfm.table).replace("hr", pt.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", pt._tag).getRegex();
pt.gfm.paragraph = $t(pt._paragraph).replace("hr", pt.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", pt.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", pt._tag).getRegex();
pt.pedantic = Jr({}, pt.normal, {
  html: $t(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", pt._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: jd,
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: $t(pt.normal._paragraph).replace("hr", pt.hr).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", pt.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
});
const et = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: jd,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: jd,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
et._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
et.punctuation = $t(et.punctuation).replace(/punctuation/g, et._punctuation).getRegex();
et.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
et.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
et._comment = $t(pt._comment).replace("(?:-->|$)", "-->").getRegex();
et.emStrong.lDelim = $t(et.emStrong.lDelim).replace(/punct/g, et._punctuation).getRegex();
et.emStrong.rDelimAst = $t(et.emStrong.rDelimAst, "g").replace(/punct/g, et._punctuation).getRegex();
et.emStrong.rDelimUnd = $t(et.emStrong.rDelimUnd, "g").replace(/punct/g, et._punctuation).getRegex();
et._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
et._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
et._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
et.autolink = $t(et.autolink).replace("scheme", et._scheme).replace("email", et._email).getRegex();
et._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
et.tag = $t(et.tag).replace("comment", et._comment).replace("attribute", et._attribute).getRegex();
et._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
et._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
et._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
et.link = $t(et.link).replace("label", et._label).replace("href", et._href).replace("title", et._title).getRegex();
et.reflink = $t(et.reflink).replace("label", et._label).replace("ref", pt._label).getRegex();
et.nolink = $t(et.nolink).replace("ref", pt._label).getRegex();
et.reflinkSearch = $t(et.reflinkSearch, "g").replace("reflink", et.reflink).replace("nolink", et.nolink).getRegex();
et.normal = Jr({}, et);
et.pedantic = Jr({}, et.normal, {
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: $t(/^!?\[(label)\]\((.*?)\)/).replace("label", et._label).getRegex(),
  reflink: $t(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", et._label).getRegex()
});
et.gfm = Jr({}, et.normal, {
  escape: $t(et.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
});
et.gfm.url = $t(et.gfm.url, "i").replace("email", et.gfm._extended_email).getRegex();
et.breaks = Jr({}, et.gfm, {
  br: $t(et.br).replace("{2,}", "*").getRegex(),
  text: $t(et.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
});
function QZ(t) {
  return t.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…");
}
function MS(t) {
  let e = "", n, i;
  const r = t.length;
  for (n = 0; n < r; n++)
    i = t.charCodeAt(n), Math.random() > 0.5 && (i = "x" + i.toString(16)), e += "&#" + i + ";";
  return e;
}
class $s {
  constructor(e) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = e || uc, this.options.tokenizer = this.options.tokenizer || new Xb(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = {
      inLink: !1,
      inRawBlock: !1,
      top: !0
    };
    const n = {
      block: pt.normal,
      inline: et.normal
    };
    this.options.pedantic ? (n.block = pt.pedantic, n.inline = et.pedantic) : this.options.gfm && (n.block = pt.gfm, this.options.breaks ? n.inline = et.breaks : n.inline = et.gfm), this.tokenizer.rules = n;
  }
  static get rules() {
    return {
      block: pt,
      inline: et
    };
  }
  static lex(e, n) {
    return new $s(n).lex(e);
  }
  static lexInline(e, n) {
    return new $s(n).inlineTokens(e);
  }
  lex(e) {
    e = e.replace(/\r\n|\r/g, `
`), this.blockTokens(e, this.tokens);
    let n;
    for (; n = this.inlineQueue.shift(); )
      this.inlineTokens(n.src, n.tokens);
    return this.tokens;
  }
  blockTokens(e, n = []) {
    this.options.pedantic ? e = e.replace(/\t/g, "    ").replace(/^ +$/gm, "") : e = e.replace(/^( *)(\t+)/gm, (l, a, c) => a + "    ".repeat(c.length));
    let i, r, s, o;
    for (; e; )
      if (!(this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((l) => (i = l.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.space(e)) {
          e = e.substring(i.raw.length), i.raw.length === 1 && n.length > 0 ? n[n.length - 1].raw += `
` : n.push(i);
          continue;
        }
        if (i = this.tokenizer.code(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.fences(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.heading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.hr(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.blockquote(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.list(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.html(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.def(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.raw, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : this.tokens.links[i.tag] || (this.tokens.links[i.tag] = {
            href: i.href,
            title: i.title
          });
          continue;
        }
        if (i = this.tokenizer.table(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.lheading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (s = e, this.options.extensions && this.options.extensions.startBlock) {
          let l = 1 / 0;
          const a = e.slice(1);
          let c;
          this.options.extensions.startBlock.forEach(function(u) {
            c = u.call({ lexer: this }, a), typeof c == "number" && c >= 0 && (l = Math.min(l, c));
          }), l < 1 / 0 && l >= 0 && (s = e.substring(0, l + 1));
        }
        if (this.state.top && (i = this.tokenizer.paragraph(s))) {
          r = n[n.length - 1], o && r.type === "paragraph" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i), o = s.length !== e.length, e = e.substring(i.raw.length);
          continue;
        }
        if (i = this.tokenizer.text(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && r.type === "text" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (e) {
          const l = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(l);
            break;
          } else
            throw new Error(l);
        }
      }
    return this.state.top = !0, n;
  }
  inline(e, n = []) {
    return this.inlineQueue.push({ src: e, tokens: n }), n;
  }
  inlineTokens(e, n = []) {
    let i, r, s, o = e, l, a, c;
    if (this.tokens.links) {
      const u = Object.keys(this.tokens.links);
      if (u.length > 0)
        for (; (l = this.tokenizer.rules.inline.reflinkSearch.exec(o)) != null; )
          u.includes(l[0].slice(l[0].lastIndexOf("[") + 1, -1)) && (o = o.slice(0, l.index) + "[" + ES("a", l[0].length - 2) + "]" + o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (l = this.tokenizer.rules.inline.blockSkip.exec(o)) != null; )
      o = o.slice(0, l.index) + "[" + ES("a", l[0].length - 2) + "]" + o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    for (; (l = this.tokenizer.rules.inline.escapedEmSt.exec(o)) != null; )
      o = o.slice(0, l.index + l[0].length - 2) + "++" + o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex), this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    for (; e; )
      if (a || (c = ""), a = !1, !(this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((u) => (i = u.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.escape(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.tag(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.link(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.reflink(e, this.tokens.links)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.emStrong(e, o, c)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.codespan(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.br(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.del(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.autolink(e, MS)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (!this.state.inLink && (i = this.tokenizer.url(e, MS))) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (s = e, this.options.extensions && this.options.extensions.startInline) {
          let u = 1 / 0;
          const f = e.slice(1);
          let h;
          this.options.extensions.startInline.forEach(function(d) {
            h = d.call({ lexer: this }, f), typeof h == "number" && h >= 0 && (u = Math.min(u, h));
          }), u < 1 / 0 && u >= 0 && (s = e.substring(0, u + 1));
        }
        if (i = this.tokenizer.inlineText(s, QZ)) {
          e = e.substring(i.raw.length), i.raw.slice(-1) !== "_" && (c = i.raw.slice(-1)), a = !0, r = n[n.length - 1], r && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (e) {
          const u = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(u);
            break;
          } else
            throw new Error(u);
        }
      }
    return n;
  }
}
class Qb {
  constructor(e) {
    this.options = e || uc;
  }
  code(e, n, i) {
    const r = (n || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const s = this.options.highlight(e, r);
      s != null && s !== e && (i = !0, e = s);
    }
    return e = e.replace(/\n$/, "") + `
`, r ? '<pre><code class="' + this.options.langPrefix + wi(r) + '">' + (i ? e : wi(e, !0)) + `</code></pre>
` : "<pre><code>" + (i ? e : wi(e, !0)) + `</code></pre>
`;
  }
  blockquote(e) {
    return `<blockquote>
${e}</blockquote>
`;
  }
  html(e) {
    return e;
  }
  heading(e, n, i, r) {
    if (this.options.headerIds) {
      const s = this.options.headerPrefix + r.slug(i);
      return `<h${n} id="${s}">${e}</h${n}>
`;
    }
    return `<h${n}>${e}</h${n}>
`;
  }
  hr() {
    return this.options.xhtml ? `<hr/>
` : `<hr>
`;
  }
  list(e, n, i) {
    const r = n ? "ol" : "ul", s = n && i !== 1 ? ' start="' + i + '"' : "";
    return "<" + r + s + `>
` + e + "</" + r + `>
`;
  }
  listitem(e) {
    return `<li>${e}</li>
`;
  }
  checkbox(e) {
    return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  paragraph(e) {
    return `<p>${e}</p>
`;
  }
  table(e, n) {
    return n && (n = `<tbody>${n}</tbody>`), `<table>
<thead>
` + e + `</thead>
` + n + `</table>
`;
  }
  tablerow(e) {
    return `<tr>
${e}</tr>
`;
  }
  tablecell(e, n) {
    const i = n.header ? "th" : "td";
    return (n.align ? `<${i} align="${n.align}">` : `<${i}>`) + e + `</${i}>
`;
  }
  strong(e) {
    return `<strong>${e}</strong>`;
  }
  em(e) {
    return `<em>${e}</em>`;
  }
  codespan(e) {
    return `<code>${e}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  del(e) {
    return `<del>${e}</del>`;
  }
  link(e, n, i) {
    if (e = CS(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = '<a href="' + e + '"';
    return n && (r += ' title="' + n + '"'), r += ">" + i + "</a>", r;
  }
  image(e, n, i) {
    if (e = CS(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = `<img src="${e}" alt="${i}"`;
    return n && (r += ` title="${n}"`), r += this.options.xhtml ? "/>" : ">", r;
  }
  text(e) {
    return e;
  }
}
class aM {
  strong(e) {
    return e;
  }
  em(e) {
    return e;
  }
  codespan(e) {
    return e;
  }
  del(e) {
    return e;
  }
  html(e) {
    return e;
  }
  text(e) {
    return e;
  }
  link(e, n, i) {
    return "" + i;
  }
  image(e, n, i) {
    return "" + i;
  }
  br() {
    return "";
  }
}
class cM {
  constructor() {
    this.seen = {};
  }
  serialize(e) {
    return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  getNextSafeSlug(e, n) {
    let i = e, r = 0;
    if (this.seen.hasOwnProperty(i)) {
      r = this.seen[e];
      do
        r++, i = e + "-" + r;
      while (this.seen.hasOwnProperty(i));
    }
    return n || (this.seen[e] = r, this.seen[i] = 0), i;
  }
  slug(e, n = {}) {
    const i = this.serialize(e);
    return this.getNextSafeSlug(i, n.dryrun);
  }
}
class ps {
  constructor(e) {
    this.options = e || uc, this.options.renderer = this.options.renderer || new Qb(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new aM(), this.slugger = new cM();
  }
  static parse(e, n) {
    return new ps(n).parse(e);
  }
  static parseInline(e, n) {
    return new ps(n).parseInline(e);
  }
  parse(e, n = !0) {
    let i = "", r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O;
    const w = e.length;
    for (r = 0; r < w; r++) {
      if (d = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[d.type] && (O = this.options.extensions.renderers[d.type].call({ parser: this }, d), O !== !1 || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(d.type))) {
        i += O || "";
        continue;
      }
      switch (d.type) {
        case "space":
          continue;
        case "hr": {
          i += this.renderer.hr();
          continue;
        }
        case "heading": {
          i += this.renderer.heading(
            this.parseInline(d.tokens),
            d.depth,
            oM(this.parseInline(d.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          i += this.renderer.code(
            d.text,
            d.lang,
            d.escaped
          );
          continue;
        }
        case "table": {
          for (f = "", u = "", l = d.header.length, s = 0; s < l; s++)
            u += this.renderer.tablecell(
              this.parseInline(d.header[s].tokens),
              { header: !0, align: d.align[s] }
            );
          for (f += this.renderer.tablerow(u), h = "", l = d.rows.length, s = 0; s < l; s++) {
            for (c = d.rows[s], u = "", a = c.length, o = 0; o < a; o++)
              u += this.renderer.tablecell(
                this.parseInline(c[o].tokens),
                { header: !1, align: d.align[o] }
              );
            h += this.renderer.tablerow(u);
          }
          i += this.renderer.table(f, h);
          continue;
        }
        case "blockquote": {
          h = this.parse(d.tokens), i += this.renderer.blockquote(h);
          continue;
        }
        case "list": {
          for (p = d.ordered, g = d.start, _ = d.loose, l = d.items.length, h = "", s = 0; s < l; s++)
            C = d.items[s], v = C.checked, k = C.task, m = "", C.task && (S = this.renderer.checkbox(v), _ ? C.tokens.length > 0 && C.tokens[0].type === "paragraph" ? (C.tokens[0].text = S + " " + C.tokens[0].text, C.tokens[0].tokens && C.tokens[0].tokens.length > 0 && C.tokens[0].tokens[0].type === "text" && (C.tokens[0].tokens[0].text = S + " " + C.tokens[0].tokens[0].text)) : C.tokens.unshift({
              type: "text",
              text: S
            }) : m += S), m += this.parse(C.tokens, _), h += this.renderer.listitem(m, k, v);
          i += this.renderer.list(h, p, g);
          continue;
        }
        case "html": {
          i += this.renderer.html(d.text);
          continue;
        }
        case "paragraph": {
          i += this.renderer.paragraph(this.parseInline(d.tokens));
          continue;
        }
        case "text": {
          for (h = d.tokens ? this.parseInline(d.tokens) : d.text; r + 1 < w && e[r + 1].type === "text"; )
            d = e[++r], h += `
` + (d.tokens ? this.parseInline(d.tokens) : d.text);
          i += n ? this.renderer.paragraph(h) : h;
          continue;
        }
        default: {
          const A = 'Token with "' + d.type + '" type was not found.';
          if (this.options.silent) {
            console.error(A);
            return;
          } else
            throw new Error(A);
        }
      }
    }
    return i;
  }
  parseInline(e, n) {
    n = n || this.renderer;
    let i = "", r, s, o;
    const l = e.length;
    for (r = 0; r < l; r++) {
      if (s = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[s.type] && (o = this.options.extensions.renderers[s.type].call({ parser: this }, s), o !== !1 || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(s.type))) {
        i += o || "";
        continue;
      }
      switch (s.type) {
        case "escape": {
          i += n.text(s.text);
          break;
        }
        case "html": {
          i += n.html(s.text);
          break;
        }
        case "link": {
          i += n.link(s.href, s.title, this.parseInline(s.tokens, n));
          break;
        }
        case "image": {
          i += n.image(s.href, s.title, s.text);
          break;
        }
        case "strong": {
          i += n.strong(this.parseInline(s.tokens, n));
          break;
        }
        case "em": {
          i += n.em(this.parseInline(s.tokens, n));
          break;
        }
        case "codespan": {
          i += n.codespan(s.text);
          break;
        }
        case "br": {
          i += n.br();
          break;
        }
        case "del": {
          i += n.del(this.parseInline(s.tokens, n));
          break;
        }
        case "text": {
          i += n.text(s.text);
          break;
        }
        default: {
          const a = 'Token with "' + s.type + '" type was not found.';
          if (this.options.silent) {
            console.error(a);
            return;
          } else
            throw new Error(a);
        }
      }
    }
    return i;
  }
}
function rt(t, e, n) {
  if (typeof t > "u" || t === null)
    throw new Error("marked(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  if (typeof e == "function" && (n = e, e = null), e = Jr({}, rt.defaults, e || {}), lM(e), n) {
    const r = e.highlight;
    let s;
    try {
      s = $s.lex(t, e);
    } catch (a) {
      return n(a);
    }
    const o = function(a) {
      let c;
      if (!a)
        try {
          e.walkTokens && rt.walkTokens(s, e.walkTokens), c = ps.parse(s, e);
        } catch (u) {
          a = u;
        }
      return e.highlight = r, a ? n(a) : n(null, c);
    };
    if (!r || r.length < 3 || (delete e.highlight, !s.length))
      return o();
    let l = 0;
    rt.walkTokens(s, function(a) {
      a.type === "code" && (l++, setTimeout(() => {
        r(a.text, a.lang, function(c, u) {
          if (c)
            return o(c);
          u != null && u !== a.text && (a.text = u, a.escaped = !0), l--, l === 0 && o();
        });
      }, 0));
    }), l === 0 && o();
    return;
  }
  function i(r) {
    if (r.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + wi(r.message + "", !0) + "</pre>";
    throw r;
  }
  try {
    const r = $s.lex(t, e);
    if (e.walkTokens) {
      if (e.async)
        return Promise.all(rt.walkTokens(r, e.walkTokens)).then(() => ps.parse(r, e)).catch(i);
      rt.walkTokens(r, e.walkTokens);
    }
    return ps.parse(r, e);
  } catch (r) {
    i(r);
  }
}
rt.options = rt.setOptions = function(t) {
  return Jr(rt.defaults, t), BZ(rt.defaults), rt;
};
rt.getDefaults = iM;
rt.defaults = uc;
rt.use = function(...t) {
  const e = rt.defaults.extensions || { renderers: {}, childTokens: {} };
  t.forEach((n) => {
    const i = Jr({}, n);
    if (i.async = rt.defaults.async || i.async, n.extensions && (n.extensions.forEach((r) => {
      if (!r.name)
        throw new Error("extension name required");
      if (r.renderer) {
        const s = e.renderers[r.name];
        s ? e.renderers[r.name] = function(...o) {
          let l = r.renderer.apply(this, o);
          return l === !1 && (l = s.apply(this, o)), l;
        } : e.renderers[r.name] = r.renderer;
      }
      if (r.tokenizer) {
        if (!r.level || r.level !== "block" && r.level !== "inline")
          throw new Error("extension level must be 'block' or 'inline'");
        e[r.level] ? e[r.level].unshift(r.tokenizer) : e[r.level] = [r.tokenizer], r.start && (r.level === "block" ? e.startBlock ? e.startBlock.push(r.start) : e.startBlock = [r.start] : r.level === "inline" && (e.startInline ? e.startInline.push(r.start) : e.startInline = [r.start]));
      }
      r.childTokens && (e.childTokens[r.name] = r.childTokens);
    }), i.extensions = e), n.renderer) {
      const r = rt.defaults.renderer || new Qb();
      for (const s in n.renderer) {
        const o = r[s];
        r[s] = (...l) => {
          let a = n.renderer[s].apply(r, l);
          return a === !1 && (a = o.apply(r, l)), a;
        };
      }
      i.renderer = r;
    }
    if (n.tokenizer) {
      const r = rt.defaults.tokenizer || new Xb();
      for (const s in n.tokenizer) {
        const o = r[s];
        r[s] = (...l) => {
          let a = n.tokenizer[s].apply(r, l);
          return a === !1 && (a = o.apply(r, l)), a;
        };
      }
      i.tokenizer = r;
    }
    if (n.walkTokens) {
      const r = rt.defaults.walkTokens;
      i.walkTokens = function(s) {
        let o = [];
        return o.push(n.walkTokens.call(this, s)), r && (o = o.concat(r.call(this, s))), o;
      };
    }
    rt.setOptions(i);
  });
};
rt.walkTokens = function(t, e) {
  let n = [];
  for (const i of t)
    switch (n = n.concat(e.call(rt, i)), i.type) {
      case "table": {
        for (const r of i.header)
          n = n.concat(rt.walkTokens(r.tokens, e));
        for (const r of i.rows)
          for (const s of r)
            n = n.concat(rt.walkTokens(s.tokens, e));
        break;
      }
      case "list": {
        n = n.concat(rt.walkTokens(i.items, e));
        break;
      }
      default:
        rt.defaults.extensions && rt.defaults.extensions.childTokens && rt.defaults.extensions.childTokens[i.type] ? rt.defaults.extensions.childTokens[i.type].forEach(function(r) {
          n = n.concat(rt.walkTokens(i[r], e));
        }) : i.tokens && (n = n.concat(rt.walkTokens(i.tokens, e)));
    }
  return n;
};
rt.parseInline = function(t, e) {
  if (typeof t > "u" || t === null)
    throw new Error("marked.parseInline(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  e = Jr({}, rt.defaults, e || {}), lM(e);
  try {
    const n = $s.lexInline(t, e);
    return e.walkTokens && rt.walkTokens(n, e.walkTokens), ps.parseInline(n, e);
  } catch (n) {
    if (n.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + wi(n.message + "", !0) + "</pre>";
    throw n;
  }
};
rt.Parser = ps;
rt.parser = ps.parse;
rt.Renderer = Qb;
rt.TextRenderer = aM;
rt.Lexer = $s;
rt.lexer = $s.lex;
rt.Tokenizer = Xb;
rt.Slugger = cM;
rt.parse = rt;
rt.options;
rt.setOptions;
rt.use;
rt.walkTokens;
rt.parseInline;
ps.parse;
$s.lex;
function OS(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function TS(t, e) {
  let n, i, r;
  return {
    key: t,
    first: null,
    c() {
      n = j("calcite-combobox-item"), ne(n, "selected", ""), ne(n, "value", i = e[3]), ne(n, "text-label", r = e[3]), this.first = n;
    },
    m(s, o) {
      U(s, n, o);
    },
    p(s, o) {
      e = s, o & 1 && i !== (i = e[3]) && ne(n, "value", i), o & 1 && r !== (r = e[3]) && ne(n, "text-label", r);
    },
    d(s) {
      s && V(n);
    }
  };
}
function ZZ(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s, o = t[0];
  const l = (a) => a[3];
  for (let a = 0; a < o.length; a += 1) {
    let c = OS(t, o, a), u = l(c);
    i.set(u, n[a] = TS(u, c));
  }
  return {
    c() {
      e = j("calcite-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      ne(e, "label", "Tags"), ne(e, "allow-custom-values", ""), ne(e, "placeholder", "Add/remove tags using Tab/Backspace key");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      r || (s = se(e, "calciteComboboxChange", t[1]), r = !0);
    },
    p(a, [c]) {
      c & 1 && (o = a[0], n = Gs(n, c, l, 1, a, o, i, e, Bu, TS, null, OS));
    },
    i: ve,
    o: ve,
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      r = !1, s();
    }
  };
}
function $Z(t, e, n) {
  const i = Vl();
  let { tags: r = [] } = e;
  function s(o) {
    console.log("comboboxchanged", typeof o.target.value, o.target.value);
    let l;
    typeof o.target.value == "string" ? l = o.target.value === "" ? [] : [o.target.value] : o.target.value ? l = o.target.value : l = [], i("tagschanged", { value: l });
  }
  return t.$$set = (o) => {
    "tags" in o && n(0, r = o.tags);
  }, [r, s];
}
class e$ extends Qe {
  constructor(e) {
    super(), Xe(this, e, $Z, ZZ, xt, { tags: 0 });
  }
}
function RS(t, e, n) {
  const i = t.slice();
  return i[29] = e[n], i;
}
function PS(t, e, n) {
  const i = t.slice();
  return i[32] = e[n], i;
}
function IS(t, e, n) {
  const i = t.slice();
  return i[35] = e[n], i;
}
function DS(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function t$(t) {
  let e;
  return {
    c() {
      e = j("h1"), e.textContent = "Multiple nodes", b(e, "class", "svelte-1vvthkw");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ve,
    d(n) {
      n && V(e);
    }
  };
}
function n$(t) {
  var f;
  let e, n = t[0][0].label + "", i, r, s = !1, o, l = ["node", "edge"].includes((f = t[0][0]) == null ? void 0 : f.kind), a, c = s && NS(t), u = l && LS(t);
  return {
    c() {
      e = j("h1"), i = we(n), r = Q(), c && c.c(), o = Q(), u && u.c(), a = ot(), b(e, "class", "svelte-1vvthkw");
    },
    m(h, d) {
      U(h, e, d), E(e, i), E(e, r), c && c.m(e, null), U(h, o, d), u && u.m(h, d), U(h, a, d);
    },
    p(h, d) {
      var p;
      d[0] & 1 && n !== (n = h[0][0].label + "") && ze(i, n), d[0] & 1 && (s = !1), s ? c ? c.p(h, d) : (c = NS(h), c.c(), c.m(e, null)) : c && (c.d(1), c = null), d[0] & 1 && (l = ["node", "edge"].includes((p = h[0][0]) == null ? void 0 : p.kind)), l ? u ? u.p(h, d) : (u = LS(h), u.c(), u.m(a.parentNode, a)) : u && (u.d(1), u = null);
    },
    d(h) {
      h && V(e), c && c.d(), h && V(o), u && u.d(h), h && V(a);
    }
  };
}
function NS(t) {
  let e, n, i;
  return {
    c() {
      e = j("sl-button"), e.innerHTML = '<sl-icon name="gear" label="Settings"></sl-icon>', ne(e, "variant", "default"), ne(e, "size", "small"), ne(e, "circle", "");
    },
    m(r, s) {
      U(r, e, s), n || (i = se(e, "click", t[10]), n = !0);
    },
    p: ve,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function LS(t) {
  let e, n = rt(t[0][0].desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 1 && n !== (n = rt(i[0][0].desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function jS(t) {
  let e, n, i, r, s, o, l, a, c, u = (t[0][0].kind === "node" || t[0][0].kind === "note") && BS(t), f = t[0][0].kind !== "note" && xS(t), h = t[0][0].kind === "node" && zS(t);
  return {
    c() {
      e = j("div"), n = j("sl-input"), r = Q(), u && u.c(), s = Q(), f && f.c(), o = Q(), h && h.c(), ne(n, "label", "Label"), ne(n, "type", "text"), ne(n, "size", "small"), ne(n, "value", i = t[0][0].label), b(e, "class", "node-panel svelte-1vvthkw");
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(e, r), u && u.m(e, null), E(e, s), f && f.m(e, null), E(e, o), h && h.m(e, null), l = !0, a || (c = se(n, "sl-change", t[11]), a = !0);
    },
    p(d, p) {
      (!l || p[0] & 1 && i !== (i = d[0][0].label)) && ne(n, "value", i), d[0][0].kind === "node" || d[0][0].kind === "note" ? u ? u.p(d, p) : (u = BS(d), u.c(), u.m(e, s)) : u && (u.d(1), u = null), d[0][0].kind !== "note" ? f ? (f.p(d, p), p[0] & 1 && P(f, 1)) : (f = xS(d), f.c(), P(f, 1), f.m(e, o)) : f && (Se(), x(f, 1, 1, () => {
        f = null;
      }), Ee()), d[0][0].kind === "node" ? h ? h.p(d, p) : (h = zS(d), h.c(), h.m(e, null)) : h && (h.d(1), h = null);
    },
    i(d) {
      l || (P(f), l = !0);
    },
    o(d) {
      x(f), l = !1;
    },
    d(d) {
      d && V(e), u && u.d(), f && f.d(), h && h.d(), a = !1, c();
    }
  };
}
function BS(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("sl-textarea"), ne(e, "label", "Notes"), ne(e, "placeholder", "Notes (these will be shown in the graph)..."), ne(e, "size", "small"), ne(e, "value", n = t[0][0].notes);
    },
    m(s, o) {
      U(s, e, o), i || (r = se(e, "sl-change", t[12]), i = !0);
    },
    p(s, o) {
      o[0] & 1 && n !== (n = s[0][0].notes) && ne(e, "value", n);
    },
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function xS(t) {
  let e, n, i, r, s = t[0][0], o, l, a, c, u = FS(t);
  return {
    c() {
      e = j("sl-textarea"), n = j("p"), n.innerHTML = '<a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Learn about MarkDown</a>', r = Q(), u.c(), o = ot(), b(n, "slot", "help-text"), ne(e, "label", "Description"), ne(e, "placeholder", "Description in markdown..."), ne(e, "size", "small"), ne(e, "value", i = t[0][0].desc);
    },
    m(f, h) {
      U(f, e, h), E(e, n), U(f, r, h), u.m(f, h), U(f, o, h), l = !0, a || (c = se(e, "sl-change", t[13]), a = !0);
    },
    p(f, h) {
      (!l || h[0] & 1 && i !== (i = f[0][0].desc)) && ne(e, "value", i), h[0] & 1 && xt(s, s = f[0][0]) ? (Se(), x(u, 1, 1, ve), Ee(), u = FS(f), u.c(), P(u, 1), u.m(o.parentNode, o)) : u.p(f, h);
    },
    i(f) {
      l || (P(u), l = !0);
    },
    o(f) {
      x(u), l = !1;
    },
    d(f) {
      f && V(e), f && V(r), f && V(o), u.d(f), a = !1, c();
    }
  };
}
function FS(t) {
  let e, n;
  return e = new e$({
    props: { tags: t[0][0].tags }
  }), e.$on("tagschanged", t[14]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.tags = i[0][0].tags), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function zS(t) {
  var u;
  let e, n = (u = t[0][0].badge) == null ? void 0 : u.startsWith("http"), i, r, s, o, l = n && VS(t), a = t[1].theme.badges, c = [];
  for (let f = 0; f < a.length; f += 1)
    c[f] = US(DS(t, a, f));
  return {
    c() {
      e = j("sl-select"), l && l.c(), i = Q();
      for (let f = 0; f < c.length; f += 1)
        c[f].c();
      ne(e, "label", "Badge"), ne(e, "clearable", ""), ne(e, "value", r = t[0][0].badge || ""), ne(e, "placeholder", "Select badge");
    },
    m(f, h) {
      U(f, e, h), l && l.m(e, null), E(e, i);
      for (let d = 0; d < c.length; d += 1)
        c[d].m(e, null);
      s || (o = se(e, "sl-change", t[15]), s = !0);
    },
    p(f, h) {
      var d;
      if (h[0] & 1 && (n = (d = f[0][0].badge) == null ? void 0 : d.startsWith("http")), n ? l ? l.p(f, h) : (l = VS(f), l.c(), l.m(e, i)) : l && (l.d(1), l = null), h[0] & 3) {
        a = f[1].theme.badges;
        let p;
        for (p = 0; p < a.length; p += 1) {
          const g = DS(f, a, p);
          c[p] ? c[p].p(g, h) : (c[p] = US(g), c[p].c(), c[p].m(e, null));
        }
        for (; p < c.length; p += 1)
          c[p].d(1);
        c.length = a.length;
      }
      h[0] & 1 && r !== (r = f[0][0].badge || "") && ne(e, "value", r);
    },
    d(f) {
      f && V(e), l && l.d(), Vt(c, f), s = !1, o();
    }
  };
}
function VS(t) {
  let e, n;
  return {
    c() {
      e = j("img"), b(e, "width", "30"), b(e, "height", "28"), b(e, "alt", "badge"), jh(e.src, n = t[0][0].badge) || b(e, "src", n), b(e, "slot", "prefix");
    },
    m(i, r) {
      U(i, e, r);
    },
    p(i, r) {
      r[0] & 1 && !jh(e.src, n = i[0][0].badge) && b(e, "src", n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function i$(t) {
  let e = t[38] + "", n;
  return {
    c() {
      n = we(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 2 && e !== (e = i[38] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function r$(t) {
  let e, n;
  return {
    c() {
      e = j("img"), b(e, "width", "30"), b(e, "height", "28"), b(e, "alt", "badge"), jh(e.src, n = t[38]) || b(e, "src", n), b(e, "class", "http-badge svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r);
    },
    p(i, r) {
      r[0] & 2 && !jh(e.src, n = i[38]) && b(e, "src", n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function US(t) {
  let e, n, i, r, s;
  function o(c, u) {
    return u[0] & 2 && (n = null), n == null && (n = !!c[38].startsWith("http")), n ? r$ : i$;
  }
  let l = o(t, [-1, -1]), a = l(t);
  return {
    c() {
      e = j("sl-option"), a.c(), i = Q(), ne(e, "value", r = t[38]), ne(e, "selected", s = t[0][0].badge === t[38]);
    },
    m(c, u) {
      U(c, e, u), a.m(e, null), E(e, i);
    },
    p(c, u) {
      l === (l = o(c, u)) && a ? a.p(c, u) : (a.d(1), a = l(c), a && (a.c(), a.m(e, i))), u[0] & 2 && r !== (r = c[38]) && ne(e, "value", r), u[0] & 3 && s !== (s = c[0][0].badge === c[38]) && ne(e, "selected", s);
    },
    d(c) {
      c && V(e), a.d();
    }
  };
}
function s$(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z, L, K, F, N, te, ue, q, re, ie, Z, Le, Ie;
  return {
    c() {
      e = j("div"), n = j("sl-checkbox"), i = we("Directed"), s = Q(), o = j("div"), l = j("sl-color-picker"), c = Q(), u = j("span"), u.textContent = "Stroke", f = Q(), h = j("sl-input"), p = Q(), g = j("sl-select"), _ = j("sl-option"), m = we("straight"), v = Q(), k = j("sl-option"), S = we("curved"), w = Q(), A = j("sl-option"), D = we("ortho"), H = Q(), J = j("sl-select"), I = j("sl-option"), z = we("solid"), K = Q(), F = j("sl-option"), N = we("dashed"), ue = Q(), q = j("sl-option"), re = we("dotted"), Li(n, "width", "100%"), ne(n, "checked", r = t[0][0].directed), ne(l, "format", "hex"), ne(l, "size", "small"), ne(l, "value", a = t[0][0].stroke), ne(l, "label", "Select stroke color"), ne(l, "opacity", ""), ne(l, "swatches", t[6]), b(u, "class", "title svelte-1vvthkw"), b(o, "class", "edge-stroke svelte-1vvthkw"), ne(h, "label", "Weight"), ne(h, "type", "number"), ne(h, "value", d = t[0][0].weight), ne(_, "value", "straight"), ne(_, "selected", C = t[0][0].shape === "straight"), ne(k, "value", "curved"), ne(k, "selected", O = t[0][0].shape === "curved"), ne(A, "value", "ortho"), ne(A, "selected", R = t[0][0].shape === "ortho"), ne(g, "label", "Shape"), ne(g, "value", M = t[0][0].shape), ne(g, "placeholder", "Select shape"), ne(I, "value", "solid"), ne(I, "selected", L = t[0][0].strokeType === "solid"), ne(F, "value", "dashed"), ne(F, "selected", te = t[0][0].strokeType === "dashed"), ne(q, "value", "dotted"), ne(q, "selected", ie = t[0][0].strokeType === "dotted"), ne(J, "label", "StrokeType"), ne(J, "value", Z = t[0][0].strokeType), ne(J, "placeholder", "Select strokeType"), b(e, "class", "edge-panel svelte-1vvthkw");
    },
    m(Fe, le) {
      U(Fe, e, le), E(e, n), E(n, i), E(e, s), E(e, o), E(o, l), E(o, c), E(o, u), E(e, f), E(e, h), E(e, p), E(e, g), E(g, _), E(_, m), E(g, v), E(g, k), E(k, S), E(g, w), E(g, A), E(A, D), E(e, H), E(e, J), E(J, I), E(I, z), E(J, K), E(J, F), E(F, N), E(J, ue), E(J, q), E(q, re), Le || (Ie = [
        se(n, "sl-change", t[22]),
        se(l, "sl-change", t[23]),
        se(h, "sl-change", t[24]),
        se(g, "sl-change", t[25]),
        se(J, "sl-change", t[26])
      ], Le = !0);
    },
    p(Fe, le) {
      le[0] & 1 && r !== (r = Fe[0][0].directed) && ne(n, "checked", r), le[0] & 1 && a !== (a = Fe[0][0].stroke) && ne(l, "value", a), le[0] & 1 && d !== (d = Fe[0][0].weight) && ne(h, "value", d), le[0] & 1 && C !== (C = Fe[0][0].shape === "straight") && ne(_, "selected", C), le[0] & 1 && O !== (O = Fe[0][0].shape === "curved") && ne(k, "selected", O), le[0] & 1 && R !== (R = Fe[0][0].shape === "ortho") && ne(A, "selected", R), le[0] & 1 && M !== (M = Fe[0][0].shape) && ne(g, "value", M), le[0] & 1 && L !== (L = Fe[0][0].strokeType === "solid") && ne(I, "selected", L), le[0] & 1 && te !== (te = Fe[0][0].strokeType === "dashed") && ne(F, "selected", te), le[0] & 1 && ie !== (ie = Fe[0][0].strokeType === "dotted") && ne(q, "selected", ie), le[0] & 1 && Z !== (Z = Fe[0][0].strokeType) && ne(J, "value", Z);
    },
    d(Fe) {
      Fe && V(e), Le = !1, ht(Ie);
    }
  };
}
function o$(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z;
  return {
    c() {
      e = j("div"), n = j("div"), i = j("sl-color-picker"), s = Q(), o = j("span"), o.textContent = "Fill", l = Q(), a = j("div"), c = j("sl-color-picker"), f = Q(), h = j("span"), h.textContent = "Border", d = Q(), p = j("div"), g = j("sl-color-picker"), m = Q(), C = j("span"), C.textContent = "Label", v = Q(), k = j("div"), S = j("sl-input"), w = Q(), A = j("div"), D = j("sl-input"), M = Q(), H = j("sl-input"), ne(i, "format", "hex"), ne(i, "size", "small"), ne(i, "value", r = t[0][0].fill), ne(i, "label", "Select fill color"), ne(i, "opacity", ""), ne(i, "swatches", t[6]), b(o, "class", "svelte-1vvthkw"), b(n, "class", "node-color svelte-1vvthkw"), ne(c, "format", "hex"), ne(c, "size", "small"), ne(c, "value", u = t[0][0].bordercolor), ne(c, "label", "Select border color"), ne(c, "opacity", ""), ne(c, "swatches", t[6]), b(h, "class", "svelte-1vvthkw"), b(a, "class", "node-color svelte-1vvthkw"), ne(g, "format", "hex"), ne(g, "size", "small"), ne(g, "value", _ = t[0][0].labelcolor), ne(g, "label", "Select label color"), ne(g, "opacity", ""), ne(g, "swatches", t[6]), b(C, "class", "svelte-1vvthkw"), b(p, "class", "node-color svelte-1vvthkw"), b(e, "class", "node-colors svelte-1vvthkw"), ne(S, "label", "URL of Background Image"), ne(S, "type", "url"), ne(S, "size", "small"), Li(S, "width", "100%"), ne(S, "value", O = t[0][0].backgroundImageURL || ""), b(k, "class", "node-colors svelte-1vvthkw"), ne(D, "label", "Label Font Size"), ne(D, "type", "number"), ne(D, "size", "small"), ne(D, "placeholder", "16"), Li(D, "width", "40%"), ne(D, "min", "12"), ne(D, "max", "64"), ne(D, "step", "1"), ne(D, "value", R = t[0][0].nodelabelfontsize || t[1].theme.nodelabelfontsize || 16), ne(H, "label", "Notes Font Size"), ne(H, "type", "number"), ne(H, "size", "small"), ne(H, "placeholder", "16"), Li(H, "width", "40%"), ne(H, "min", "12"), ne(H, "max", "48"), ne(H, "step", "1"), ne(H, "value", J = t[0][0].nodenotesfontsize || t[1].theme.nodenotesfontsize || 16), b(A, "class", "node-colors svelte-1vvthkw");
    },
    m(L, K) {
      U(L, e, K), E(e, n), E(n, i), E(n, s), E(n, o), E(e, l), E(e, a), E(a, c), E(a, f), E(a, h), E(e, d), E(e, p), E(p, g), E(p, m), E(p, C), U(L, v, K), U(L, k, K), E(k, S), U(L, w, K), U(L, A, K), E(A, D), E(A, M), E(A, H), I || (z = [
        se(i, "sl-change", t[16]),
        se(c, "sl-change", t[17]),
        se(g, "sl-change", t[18]),
        se(S, "input", t[19]),
        se(D, "input", t[20]),
        se(H, "input", t[21])
      ], I = !0);
    },
    p(L, K) {
      K[0] & 1 && r !== (r = L[0][0].fill) && ne(i, "value", r), K[0] & 1 && u !== (u = L[0][0].bordercolor) && ne(c, "value", u), K[0] & 1 && _ !== (_ = L[0][0].labelcolor) && ne(g, "value", _), K[0] & 1 && O !== (O = L[0][0].backgroundImageURL || "") && ne(S, "value", O), K[0] & 3 && R !== (R = L[0][0].nodelabelfontsize || L[1].theme.nodelabelfontsize || 16) && ne(D, "value", R), K[0] & 3 && J !== (J = L[0][0].nodenotesfontsize || L[1].theme.nodenotesfontsize || 16) && ne(H, "value", J);
    },
    d(L) {
      L && V(e), L && V(v), L && V(k), L && V(w), L && V(A), I = !1, ht(z);
    }
  };
}
function HS(t) {
  let e, n, i, r, s;
  return r = new jZ({
    props: {
      content: {
        json: t[0][0].custom || {}
      },
      onChange: t[8]
    }
  }), {
    c() {
      e = j("div"), n = j("span"), n.innerHTML = "<strong>custom</strong>", i = Q(), me(r.$$.fragment), b(e, "class", "row");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(e, i), pe(r, e, null), s = !0;
    },
    p(o, l) {
      const a = {};
      l[0] & 1 && (a.content = {
        json: o[0][0].custom || {}
      }), r.$set(a);
    },
    i(o) {
      s || (P(r.$$.fragment, o), s = !0);
    },
    o(o) {
      x(r.$$.fragment, o), s = !1;
    },
    d(o) {
      o && V(e), ge(r);
    }
  };
}
function WS(t) {
  let e, n, i = rt(t[0][0].desc) + "", r, s, o, l, a, c, u = t[3], f = [];
  for (let h = 0; h < u.length; h += 1)
    f[h] = XS(RS(t, u, h));
  return {
    c() {
      e = j("sl-dialog"), n = j("p"), r = Q();
      for (let h = 0; h < f.length; h += 1)
        f[h].c();
      s = Q(), o = j("sl-button"), o.textContent = "Close", b(n, "class", "itemdesc svelte-1vvthkw"), ne(o, "slot", "footer"), ne(o, "variant", "primary"), ne(e, "label", l = "Literature Review for " + t[0][0].label), Li(e, "--width", "50vw"), ne(e, "open", t[2]);
    },
    m(h, d) {
      U(h, e, d), E(e, n), n.innerHTML = i, E(e, r);
      for (let p = 0; p < f.length; p += 1)
        f[p].m(e, null);
      E(e, s), E(e, o), a || (c = [
        se(o, "click", t[27]),
        se(e, "sl-hide", t[28])
      ], a = !0);
    },
    p(h, d) {
      if (d[0] & 1 && i !== (i = rt(h[0][0].desc) + "") && (n.innerHTML = i), d[0] & 8) {
        u = h[3];
        let p;
        for (p = 0; p < u.length; p += 1) {
          const g = RS(h, u, p);
          f[p] ? f[p].p(g, d) : (f[p] = XS(g), f[p].c(), f[p].m(e, s));
        }
        for (; p < f.length; p += 1)
          f[p].d(1);
        f.length = u.length;
      }
      d[0] & 1 && l !== (l = "Literature Review for " + h[0][0].label) && ne(e, "label", l), d[0] & 4 && ne(e, "open", h[2]);
    },
    d(h) {
      h && V(e), Vt(f, h), a = !1, ht(c);
    }
  };
}
function qS(t) {
  let e, n = rt(t[29].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = rt(i[29].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function JS(t) {
  let e, n = rt(t[32].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = rt(i[32].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function KS(t) {
  let e, n = rt(t[35].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = rt(i[35].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function GS(t) {
  let e, n, i = t[35].node.desc && KS(t);
  return {
    c() {
      e = j("sl-details"), i && i.c(), ne(e, "summary", n = t[32].node.label);
    },
    m(r, s) {
      U(r, e, s), i && i.m(e, null);
    },
    p(r, s) {
      r[35].node.desc ? i ? i.p(r, s) : (i = KS(r), i.c(), i.m(e, null)) : i && (i.d(1), i = null), s[0] & 8 && n !== (n = r[32].node.label) && ne(e, "summary", n);
    },
    d(r) {
      r && V(e), i && i.d();
    }
  };
}
function YS(t) {
  let e, n, i, r = t[32].node.desc && JS(t), s = t[32].parents, o = [];
  for (let l = 0; l < s.length; l += 1)
    o[l] = GS(IS(t, s, l));
  return {
    c() {
      e = j("sl-details"), r && r.c(), n = Q();
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      ne(e, "summary", i = t[32].node.label);
    },
    m(l, a) {
      U(l, e, a), r && r.m(e, null), E(e, n);
      for (let c = 0; c < o.length; c += 1)
        o[c].m(e, null);
    },
    p(l, a) {
      if (l[32].node.desc ? r ? r.p(l, a) : (r = JS(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), a[0] & 8) {
        s = l[32].parents;
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = IS(l, s, c);
          o[c] ? o[c].p(u, a) : (o[c] = GS(u), o[c].c(), o[c].m(e, null));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = s.length;
      }
      a[0] & 8 && i !== (i = l[32].node.label) && ne(e, "summary", i);
    },
    d(l) {
      l && V(e), r && r.d(), Vt(o, l);
    }
  };
}
function XS(t) {
  let e, n, i, r, s = t[29].node.desc && qS(t), o = t[29].parents, l = [];
  for (let a = 0; a < o.length; a += 1)
    l[a] = YS(PS(t, o, a));
  return {
    c() {
      e = j("div"), n = j("sl-details"), s && s.c(), i = Q();
      for (let a = 0; a < l.length; a += 1)
        l[a].c();
      ne(n, "summary", r = t[29].node.label), ne(n, "open", ""), b(e, "class", "details-group-example");
    },
    m(a, c) {
      U(a, e, c), E(e, n), s && s.m(n, null), E(n, i);
      for (let u = 0; u < l.length; u += 1)
        l[u].m(n, null);
    },
    p(a, c) {
      if (a[29].node.desc ? s ? s.p(a, c) : (s = qS(a), s.c(), s.m(n, i)) : s && (s.d(1), s = null), c[0] & 8) {
        o = a[29].parents;
        let u;
        for (u = 0; u < o.length; u += 1) {
          const f = PS(a, o, u);
          l[u] ? l[u].p(f, c) : (l[u] = YS(f), l[u].c(), l[u].m(n, null));
        }
        for (; u < l.length; u += 1)
          l[u].d(1);
        l.length = o.length;
      }
      c[0] & 8 && r !== (r = a[29].node.label) && ne(n, "summary", r);
    },
    d(a) {
      a && V(e), s && s.d(), Vt(l, a);
    }
  };
}
function l$(t) {
  var O;
  let e, n, i = t[0].length == 1 && t[4](), r, s, o, l, a = t[1].customjson && t[0].length == 1 && (t[0][0].kind === "node" || t[0][0].kind === "edge") && t[4](), c, u = t[0].length == 1 && ["node"].includes((O = t[0][0]) == null ? void 0 : O.kind), f, h;
  function d(w, A) {
    var D;
    return A[0] & 1 && (e = null), e == null && (e = !!(w[0].length == 1 && ["node", "edge", "note"].includes((D = w[0][0]) == null ? void 0 : D.kind))), e ? n$ : t$;
  }
  let p = d(t, [-1, -1]), g = p(t), _ = i && jS(t);
  function m(w, A) {
    if (A[0] & 1 && (s = null), A[0] & 1 && (o = null), s == null && (s = !!(w[0][0].kind !== "edge" && w[4]())), s)
      return o$;
    if (o == null && (o = !!(w[0][0].kind === "edge" && w[4]())), o)
      return s$;
  }
  let C = m(t, [-1, -1]), v = C && C(t), k = a && HS(t), S = u && WS(t);
  return {
    c() {
      g.c(), n = Q(), _ && _.c(), r = Q(), v && v.c(), l = Q(), k && k.c(), c = Q(), S && S.c(), f = ot();
    },
    m(w, A) {
      g.m(w, A), U(w, n, A), _ && _.m(w, A), U(w, r, A), v && v.m(w, A), U(w, l, A), k && k.m(w, A), U(w, c, A), S && S.m(w, A), U(w, f, A), h = !0;
    },
    p(w, A) {
      var D;
      p === (p = d(w, A)) && g ? g.p(w, A) : (g.d(1), g = p(w), g && (g.c(), g.m(n.parentNode, n))), A[0] & 1 && (i = w[0].length == 1 && w[4]()), i ? _ ? (_.p(w, A), A[0] & 1 && P(_, 1)) : (_ = jS(w), _.c(), P(_, 1), _.m(r.parentNode, r)) : _ && (Se(), x(_, 1, 1, () => {
        _ = null;
      }), Ee()), C === (C = m(w, A)) && v ? v.p(w, A) : (v && v.d(1), v = C && C(w), v && (v.c(), v.m(l.parentNode, l))), A[0] & 3 && (a = w[1].customjson && w[0].length == 1 && (w[0][0].kind === "node" || w[0][0].kind === "edge") && w[4]()), a ? k ? (k.p(w, A), A[0] & 3 && P(k, 1)) : (k = HS(w), k.c(), P(k, 1), k.m(c.parentNode, c)) : k && (Se(), x(k, 1, 1, () => {
        k = null;
      }), Ee()), A[0] & 1 && (u = w[0].length == 1 && ["node"].includes((D = w[0][0]) == null ? void 0 : D.kind)), u ? S ? S.p(w, A) : (S = WS(w), S.c(), S.m(f.parentNode, f)) : S && (S.d(1), S = null);
    },
    i(w) {
      h || (P(_), P(k), h = !0);
    },
    o(w) {
      x(_), x(k), h = !1;
    },
    d(w) {
      g.d(w), w && V(n), _ && _.d(w), w && V(r), v && v.d(w), w && V(l), k && k.d(w), w && V(c), S && S.d(w), w && V(f);
    }
  };
}
function a$(t, e, n) {
  let i, { selectedItem: r } = e, { graph: s } = e, { config: o = { mode: "viewonly" } } = e, l = !1;
  function a() {
    return o.mode == "editor";
  }
  const c = Vl(), u = [
    "#d0021bff",
    "#f5a623ff",
    "#bbae0eff",
    "#8b572aff",
    "#7ed321ff",
    "#417505ff",
    "#b00b0bff",
    "#9013feff",
    "#4a90e2ff",
    "#16b591ff",
    "#b8e986ff",
    "#000000ff",
    "#444444ff",
    "#888888ff",
    "#ccccccff",
    "#ffffffff"
  ];
  function f(L, K) {
    K.split("_")[0] == "text" || K.split("_")[0] == "color" || K.split("_")[0] == "url" ? r.forEach((F) => F[K.split("_")[1]] = L.target.value) : K.split("_")[0] == "number" ? r.forEach((F) => F[K.split("_")[1]] = L.target.value === "" ? null : JSON.parse(L.target.value)) : K.split("_")[0] == "checkbox" ? r.forEach((F) => F[K.split("_")[1]] = L.target.checked) : r.forEach((F) => F[K.split("_")[1]] = JSON.parse(L.target.value)), c("graphchanged", s);
  }
  function h(L, K, F) {
    n(0, r[0].custom = L.json, r), c("graphchanged", s);
  }
  const d = (L) => n(2, l = !0), p = (L) => f(L, "text_label"), g = (L) => f(L, "text_notes"), _ = (L) => f(L, "text_desc"), m = (L) => {
    n(0, r[0].tags = L.detail.value, r), c("graphchanged", s);
  }, C = (L) => f(L, "text_badge"), v = (L) => f(L, "color_fill"), k = (L) => f(L, "color_bordercolor"), S = (L) => f(L, "color_labelcolor"), O = (L) => f(L, "url_backgroundImageURL"), w = (L) => f(L, "number_nodelabelfontsize"), A = (L) => f(L, "number_nodenotesfontsize"), D = (L) => f(L, "checkbox_directed"), R = (L) => f(L, "color_stroke"), M = (L) => f(L, "number_weight"), H = (L) => f(L, "text_shape"), J = (L) => f(L, "text_strokeType"), I = (L) => n(2, l = !1), z = (L) => n(2, l = !1);
  return t.$$set = (L) => {
    "selectedItem" in L && n(0, r = L.selectedItem), "graph" in L && n(1, s = L.graph), "config" in L && n(9, o = L.config);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(3, i = K4(s, r[0], 0));
  }, [
    r,
    s,
    l,
    i,
    a,
    c,
    u,
    f,
    h,
    o,
    d,
    p,
    g,
    _,
    m,
    C,
    v,
    k,
    S,
    O,
    w,
    A,
    D,
    R,
    M,
    H,
    J,
    I,
    z
  ];
}
class c$ extends Qe {
  constructor(e) {
    super(), Xe(this, e, a$, l$, xt, { selectedItem: 0, graph: 1, config: 9 }, null, [-1, -1]);
  }
}
var u$ = { value: () => {
} };
function Zb() {
  for (var t = 0, e = arguments.length, n = {}, i; t < e; ++t) {
    if (!(i = arguments[t] + "") || i in n || /[\s.]/.test(i))
      throw new Error("illegal type: " + i);
    n[i] = [];
  }
  return new Mh(n);
}
function Mh(t) {
  this._ = t;
}
function f$(t, e) {
  return t.trim().split(/^|\s+/).map(function(n) {
    var i = "", r = n.indexOf(".");
    if (r >= 0 && (i = n.slice(r + 1), n = n.slice(0, r)), n && !e.hasOwnProperty(n))
      throw new Error("unknown type: " + n);
    return { type: n, name: i };
  });
}
Mh.prototype = Zb.prototype = {
  constructor: Mh,
  on: function(t, e) {
    var n = this._, i = f$(t + "", n), r, s = -1, o = i.length;
    if (arguments.length < 2) {
      for (; ++s < o; )
        if ((r = (t = i[s]).type) && (r = h$(n[r], t.name)))
          return r;
      return;
    }
    if (e != null && typeof e != "function")
      throw new Error("invalid callback: " + e);
    for (; ++s < o; )
      if (r = (t = i[s]).type)
        n[r] = QS(n[r], t.name, e);
      else if (e == null)
        for (r in n)
          n[r] = QS(n[r], t.name, null);
    return this;
  },
  copy: function() {
    var t = {}, e = this._;
    for (var n in e)
      t[n] = e[n].slice();
    return new Mh(t);
  },
  call: function(t, e) {
    if ((r = arguments.length - 2) > 0)
      for (var n = new Array(r), i = 0, r, s; i < r; ++i)
        n[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (s = this._[t], i = 0, r = s.length; i < r; ++i)
      s[i].value.apply(e, n);
  },
  apply: function(t, e, n) {
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (var i = this._[t], r = 0, s = i.length; r < s; ++r)
      i[r].value.apply(e, n);
  }
};
function h$(t, e) {
  for (var n = 0, i = t.length, r; n < i; ++n)
    if ((r = t[n]).name === e)
      return r.value;
}
function QS(t, e, n) {
  for (var i = 0, r = t.length; i < r; ++i)
    if (t[i].name === e) {
      t[i] = u$, t = t.slice(0, i).concat(t.slice(i + 1));
      break;
    }
  return n != null && t.push({ name: e, value: n }), t;
}
var Y1 = "http://www.w3.org/1999/xhtml";
const ZS = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: Y1,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function Zp(t) {
  var e = t += "", n = e.indexOf(":");
  return n >= 0 && (e = t.slice(0, n)) !== "xmlns" && (t = t.slice(n + 1)), ZS.hasOwnProperty(e) ? { space: ZS[e], local: t } : t;
}
function d$(t) {
  return function() {
    var e = this.ownerDocument, n = this.namespaceURI;
    return n === Y1 && e.documentElement.namespaceURI === Y1 ? e.createElement(t) : e.createElementNS(n, t);
  };
}
function p$(t) {
  return function() {
    return this.ownerDocument.createElementNS(t.space, t.local);
  };
}
function uM(t) {
  var e = Zp(t);
  return (e.local ? p$ : d$)(e);
}
function g$() {
}
function $b(t) {
  return t == null ? g$ : function() {
    return this.querySelector(t);
  };
}
function m$(t) {
  typeof t != "function" && (t = $b(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = new Array(o), a, c, u = 0; u < o; ++u)
      (a = s[u]) && (c = t.call(a, a.__data__, u, s)) && ("__data__" in a && (c.__data__ = a.__data__), l[u] = c);
  return new lr(i, this._parents);
}
function b$(t) {
  return t == null ? [] : Array.isArray(t) ? t : Array.from(t);
}
function _$() {
  return [];
}
function fM(t) {
  return t == null ? _$ : function() {
    return this.querySelectorAll(t);
  };
}
function y$(t) {
  return function() {
    return b$(t.apply(this, arguments));
  };
}
function w$(t) {
  typeof t == "function" ? t = y$(t) : t = fM(t);
  for (var e = this._groups, n = e.length, i = [], r = [], s = 0; s < n; ++s)
    for (var o = e[s], l = o.length, a, c = 0; c < l; ++c)
      (a = o[c]) && (i.push(t.call(a, a.__data__, c, o)), r.push(a));
  return new lr(i, r);
}
function hM(t) {
  return function() {
    return this.matches(t);
  };
}
function dM(t) {
  return function(e) {
    return e.matches(t);
  };
}
var v$ = Array.prototype.find;
function k$(t) {
  return function() {
    return v$.call(this.children, t);
  };
}
function C$() {
  return this.firstElementChild;
}
function S$(t) {
  return this.select(t == null ? C$ : k$(typeof t == "function" ? t : dM(t)));
}
var E$ = Array.prototype.filter;
function A$() {
  return Array.from(this.children);
}
function M$(t) {
  return function() {
    return E$.call(this.children, t);
  };
}
function O$(t) {
  return this.selectAll(t == null ? A$ : M$(typeof t == "function" ? t : dM(t)));
}
function T$(t) {
  typeof t != "function" && (t = hM(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = [], a, c = 0; c < o; ++c)
      (a = s[c]) && t.call(a, a.__data__, c, s) && l.push(a);
  return new lr(i, this._parents);
}
function pM(t) {
  return new Array(t.length);
}
function R$() {
  return new lr(this._enter || this._groups.map(pM), this._parents);
}
function Bd(t, e) {
  this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e;
}
Bd.prototype = {
  constructor: Bd,
  appendChild: function(t) {
    return this._parent.insertBefore(t, this._next);
  },
  insertBefore: function(t, e) {
    return this._parent.insertBefore(t, e);
  },
  querySelector: function(t) {
    return this._parent.querySelector(t);
  },
  querySelectorAll: function(t) {
    return this._parent.querySelectorAll(t);
  }
};
function P$(t) {
  return function() {
    return t;
  };
}
function I$(t, e, n, i, r, s) {
  for (var o = 0, l, a = e.length, c = s.length; o < c; ++o)
    (l = e[o]) ? (l.__data__ = s[o], i[o] = l) : n[o] = new Bd(t, s[o]);
  for (; o < a; ++o)
    (l = e[o]) && (r[o] = l);
}
function D$(t, e, n, i, r, s, o) {
  var l, a, c = /* @__PURE__ */ new Map(), u = e.length, f = s.length, h = new Array(u), d;
  for (l = 0; l < u; ++l)
    (a = e[l]) && (h[l] = d = o.call(a, a.__data__, l, e) + "", c.has(d) ? r[l] = a : c.set(d, a));
  for (l = 0; l < f; ++l)
    d = o.call(t, s[l], l, s) + "", (a = c.get(d)) ? (i[l] = a, a.__data__ = s[l], c.delete(d)) : n[l] = new Bd(t, s[l]);
  for (l = 0; l < u; ++l)
    (a = e[l]) && c.get(h[l]) === a && (r[l] = a);
}
function N$(t) {
  return t.__data__;
}
function L$(t, e) {
  if (!arguments.length)
    return Array.from(this, N$);
  var n = e ? D$ : I$, i = this._parents, r = this._groups;
  typeof t != "function" && (t = P$(t));
  for (var s = r.length, o = new Array(s), l = new Array(s), a = new Array(s), c = 0; c < s; ++c) {
    var u = i[c], f = r[c], h = f.length, d = j$(t.call(u, u && u.__data__, c, i)), p = d.length, g = l[c] = new Array(p), _ = o[c] = new Array(p), m = a[c] = new Array(h);
    n(u, f, g, _, m, d, e);
    for (var C = 0, v = 0, k, S; C < p; ++C)
      if (k = g[C]) {
        for (C >= v && (v = C + 1); !(S = _[v]) && ++v < p; )
          ;
        k._next = S || null;
      }
  }
  return o = new lr(o, i), o._enter = l, o._exit = a, o;
}
function j$(t) {
  return typeof t == "object" && "length" in t ? t : Array.from(t);
}
function B$() {
  return new lr(this._exit || this._groups.map(pM), this._parents);
}
function x$(t, e, n) {
  var i = this.enter(), r = this, s = this.exit();
  return typeof t == "function" ? (i = t(i), i && (i = i.selection())) : i = i.append(t + ""), e != null && (r = e(r), r && (r = r.selection())), n == null ? s.remove() : n(s), i && r ? i.merge(r).order() : r;
}
function F$(t) {
  for (var e = t.selection ? t.selection() : t, n = this._groups, i = e._groups, r = n.length, s = i.length, o = Math.min(r, s), l = new Array(r), a = 0; a < o; ++a)
    for (var c = n[a], u = i[a], f = c.length, h = l[a] = new Array(f), d, p = 0; p < f; ++p)
      (d = c[p] || u[p]) && (h[p] = d);
  for (; a < r; ++a)
    l[a] = n[a];
  return new lr(l, this._parents);
}
function z$() {
  for (var t = this._groups, e = -1, n = t.length; ++e < n; )
    for (var i = t[e], r = i.length - 1, s = i[r], o; --r >= 0; )
      (o = i[r]) && (s && o.compareDocumentPosition(s) ^ 4 && s.parentNode.insertBefore(o, s), s = o);
  return this;
}
function V$(t) {
  t || (t = U$);
  function e(f, h) {
    return f && h ? t(f.__data__, h.__data__) : !f - !h;
  }
  for (var n = this._groups, i = n.length, r = new Array(i), s = 0; s < i; ++s) {
    for (var o = n[s], l = o.length, a = r[s] = new Array(l), c, u = 0; u < l; ++u)
      (c = o[u]) && (a[u] = c);
    a.sort(e);
  }
  return new lr(r, this._parents).order();
}
function U$(t, e) {
  return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function H$() {
  var t = arguments[0];
  return arguments[0] = this, t.apply(null, arguments), this;
}
function W$() {
  return Array.from(this);
}
function q$() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, s = i.length; r < s; ++r) {
      var o = i[r];
      if (o)
        return o;
    }
  return null;
}
function J$() {
  let t = 0;
  for (const e of this)
    ++t;
  return t;
}
function K$() {
  return !this.node();
}
function G$(t) {
  for (var e = this._groups, n = 0, i = e.length; n < i; ++n)
    for (var r = e[n], s = 0, o = r.length, l; s < o; ++s)
      (l = r[s]) && t.call(l, l.__data__, s, r);
  return this;
}
function Y$(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function X$(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function Q$(t, e) {
  return function() {
    this.setAttribute(t, e);
  };
}
function Z$(t, e) {
  return function() {
    this.setAttributeNS(t.space, t.local, e);
  };
}
function $$(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttribute(t) : this.setAttribute(t, n);
  };
}
function eee(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n);
  };
}
function tee(t, e) {
  var n = Zp(t);
  if (arguments.length < 2) {
    var i = this.node();
    return n.local ? i.getAttributeNS(n.space, n.local) : i.getAttribute(n);
  }
  return this.each((e == null ? n.local ? X$ : Y$ : typeof e == "function" ? n.local ? eee : $$ : n.local ? Z$ : Q$)(n, e));
}
function gM(t) {
  return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView;
}
function nee(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function iee(t, e, n) {
  return function() {
    this.style.setProperty(t, e, n);
  };
}
function ree(t, e, n) {
  return function() {
    var i = e.apply(this, arguments);
    i == null ? this.style.removeProperty(t) : this.style.setProperty(t, i, n);
  };
}
function see(t, e, n) {
  return arguments.length > 1 ? this.each((e == null ? nee : typeof e == "function" ? ree : iee)(t, e, n ?? "")) : Ja(this.node(), t);
}
function Ja(t, e) {
  return t.style.getPropertyValue(e) || gM(t).getComputedStyle(t, null).getPropertyValue(e);
}
function oee(t) {
  return function() {
    delete this[t];
  };
}
function lee(t, e) {
  return function() {
    this[t] = e;
  };
}
function aee(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? delete this[t] : this[t] = n;
  };
}
function cee(t, e) {
  return arguments.length > 1 ? this.each((e == null ? oee : typeof e == "function" ? aee : lee)(t, e)) : this.node()[t];
}
function mM(t) {
  return t.trim().split(/^|\s+/);
}
function e_(t) {
  return t.classList || new bM(t);
}
function bM(t) {
  this._node = t, this._names = mM(t.getAttribute("class") || "");
}
bM.prototype = {
  add: function(t) {
    var e = this._names.indexOf(t);
    e < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t) {
    var e = this._names.indexOf(t);
    e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t) {
    return this._names.indexOf(t) >= 0;
  }
};
function _M(t, e) {
  for (var n = e_(t), i = -1, r = e.length; ++i < r; )
    n.add(e[i]);
}
function yM(t, e) {
  for (var n = e_(t), i = -1, r = e.length; ++i < r; )
    n.remove(e[i]);
}
function uee(t) {
  return function() {
    _M(this, t);
  };
}
function fee(t) {
  return function() {
    yM(this, t);
  };
}
function hee(t, e) {
  return function() {
    (e.apply(this, arguments) ? _M : yM)(this, t);
  };
}
function dee(t, e) {
  var n = mM(t + "");
  if (arguments.length < 2) {
    for (var i = e_(this.node()), r = -1, s = n.length; ++r < s; )
      if (!i.contains(n[r]))
        return !1;
    return !0;
  }
  return this.each((typeof e == "function" ? hee : e ? uee : fee)(n, e));
}
function pee() {
  this.textContent = "";
}
function gee(t) {
  return function() {
    this.textContent = t;
  };
}
function mee(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.textContent = e ?? "";
  };
}
function bee(t) {
  return arguments.length ? this.each(t == null ? pee : (typeof t == "function" ? mee : gee)(t)) : this.node().textContent;
}
function _ee() {
  this.innerHTML = "";
}
function yee(t) {
  return function() {
    this.innerHTML = t;
  };
}
function wee(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.innerHTML = e ?? "";
  };
}
function vee(t) {
  return arguments.length ? this.each(t == null ? _ee : (typeof t == "function" ? wee : yee)(t)) : this.node().innerHTML;
}
function kee() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function Cee() {
  return this.each(kee);
}
function See() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function Eee() {
  return this.each(See);
}
function Aee(t) {
  var e = typeof t == "function" ? t : uM(t);
  return this.select(function() {
    return this.appendChild(e.apply(this, arguments));
  });
}
function Mee() {
  return null;
}
function Oee(t, e) {
  var n = typeof t == "function" ? t : uM(t), i = e == null ? Mee : typeof e == "function" ? e : $b(e);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), i.apply(this, arguments) || null);
  });
}
function Tee() {
  var t = this.parentNode;
  t && t.removeChild(this);
}
function Ree() {
  return this.each(Tee);
}
function Pee() {
  var t = this.cloneNode(!1), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function Iee() {
  var t = this.cloneNode(!0), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function Dee(t) {
  return this.select(t ? Iee : Pee);
}
function Nee(t) {
  return arguments.length ? this.property("__data__", t) : this.node().__data__;
}
function Lee(t) {
  return function(e) {
    t.call(this, e, this.__data__);
  };
}
function jee(t) {
  return t.trim().split(/^|\s+/).map(function(e) {
    var n = "", i = e.indexOf(".");
    return i >= 0 && (n = e.slice(i + 1), e = e.slice(0, i)), { type: e, name: n };
  });
}
function Bee(t) {
  return function() {
    var e = this.__on;
    if (e) {
      for (var n = 0, i = -1, r = e.length, s; n < r; ++n)
        s = e[n], (!t.type || s.type === t.type) && s.name === t.name ? this.removeEventListener(s.type, s.listener, s.options) : e[++i] = s;
      ++i ? e.length = i : delete this.__on;
    }
  };
}
function xee(t, e, n) {
  return function() {
    var i = this.__on, r, s = Lee(e);
    if (i) {
      for (var o = 0, l = i.length; o < l; ++o)
        if ((r = i[o]).type === t.type && r.name === t.name) {
          this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = s, r.options = n), r.value = e;
          return;
        }
    }
    this.addEventListener(t.type, s, n), r = { type: t.type, name: t.name, value: e, listener: s, options: n }, i ? i.push(r) : this.__on = [r];
  };
}
function Fee(t, e, n) {
  var i = jee(t + ""), r, s = i.length, o;
  if (arguments.length < 2) {
    var l = this.node().__on;
    if (l) {
      for (var a = 0, c = l.length, u; a < c; ++a)
        for (r = 0, u = l[a]; r < s; ++r)
          if ((o = i[r]).type === u.type && o.name === u.name)
            return u.value;
    }
    return;
  }
  for (l = e ? xee : Bee, r = 0; r < s; ++r)
    this.each(l(i[r], e, n));
  return this;
}
function wM(t, e, n) {
  var i = gM(t), r = i.CustomEvent;
  typeof r == "function" ? r = new r(e, n) : (r = i.document.createEvent("Event"), n ? (r.initEvent(e, n.bubbles, n.cancelable), r.detail = n.detail) : r.initEvent(e, !1, !1)), t.dispatchEvent(r);
}
function zee(t, e) {
  return function() {
    return wM(this, t, e);
  };
}
function Vee(t, e) {
  return function() {
    return wM(this, t, e.apply(this, arguments));
  };
}
function Uee(t, e) {
  return this.each((typeof e == "function" ? Vee : zee)(t, e));
}
function* Hee() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, s = i.length, o; r < s; ++r)
      (o = i[r]) && (yield o);
}
var vM = [null];
function lr(t, e) {
  this._groups = t, this._parents = e;
}
function ef() {
  return new lr([[document.documentElement]], vM);
}
function Wee() {
  return this;
}
lr.prototype = ef.prototype = {
  constructor: lr,
  select: m$,
  selectAll: w$,
  selectChild: S$,
  selectChildren: O$,
  filter: T$,
  data: L$,
  enter: R$,
  exit: B$,
  join: x$,
  merge: F$,
  selection: Wee,
  order: z$,
  sort: V$,
  call: H$,
  nodes: W$,
  node: q$,
  size: J$,
  empty: K$,
  each: G$,
  attr: tee,
  style: see,
  property: cee,
  classed: dee,
  text: bee,
  html: vee,
  raise: Cee,
  lower: Eee,
  append: Aee,
  insert: Oee,
  remove: Ree,
  clone: Dee,
  datum: Nee,
  on: Fee,
  dispatch: Uee,
  [Symbol.iterator]: Hee
};
function Dr(t) {
  return typeof t == "string" ? new lr([[document.querySelector(t)]], [document.documentElement]) : new lr([[t]], vM);
}
function qee(t) {
  let e;
  for (; e = t.sourceEvent; )
    t = e;
  return t;
}
function po(t, e) {
  if (t = qee(t), e === void 0 && (e = t.currentTarget), e) {
    var n = e.ownerSVGElement || e;
    if (n.createSVGPoint) {
      var i = n.createSVGPoint();
      return i.x = t.clientX, i.y = t.clientY, i = i.matrixTransform(e.getScreenCTM().inverse()), [i.x, i.y];
    }
    if (e.getBoundingClientRect) {
      var r = e.getBoundingClientRect();
      return [t.clientX - r.left - e.clientLeft, t.clientY - r.top - e.clientTop];
    }
  }
  return [t.pageX, t.pageY];
}
const X1 = { capture: !0, passive: !1 };
function Q1(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function Jee(t) {
  var e = t.document.documentElement, n = Dr(t).on("dragstart.drag", Q1, X1);
  "onselectstart" in e ? n.on("selectstart.drag", Q1, X1) : (e.__noselect = e.style.MozUserSelect, e.style.MozUserSelect = "none");
}
function Kee(t, e) {
  var n = t.document.documentElement, i = Dr(t).on("dragstart.drag", null);
  e && (i.on("click.drag", Q1, X1), setTimeout(function() {
    i.on("click.drag", null);
  }, 0)), "onselectstart" in n ? i.on("selectstart.drag", null) : (n.style.MozUserSelect = n.__noselect, delete n.__noselect);
}
function t_(t, e, n) {
  t.prototype = e.prototype = n, n.constructor = t;
}
function kM(t, e) {
  var n = Object.create(t.prototype);
  for (var i in e)
    n[i] = e[i];
  return n;
}
function tf() {
}
var Cu = 0.7, xd = 1 / Cu, va = "\\s*([+-]?\\d+)\\s*", Su = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", gs = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", Gee = /^#([0-9a-f]{3,8})$/, Yee = new RegExp(`^rgb\\(${va},${va},${va}\\)$`), Xee = new RegExp(`^rgb\\(${gs},${gs},${gs}\\)$`), Qee = new RegExp(`^rgba\\(${va},${va},${va},${Su}\\)$`), Zee = new RegExp(`^rgba\\(${gs},${gs},${gs},${Su}\\)$`), $ee = new RegExp(`^hsl\\(${Su},${gs},${gs}\\)$`), ete = new RegExp(`^hsla\\(${Su},${gs},${gs},${Su}\\)$`), $S = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
t_(tf, Eu, {
  copy(t) {
    return Object.assign(new this.constructor(), this, t);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: e3,
  formatHex: e3,
  formatHex8: tte,
  formatHsl: nte,
  formatRgb: t3,
  toString: t3
});
function e3() {
  return this.rgb().formatHex();
}
function tte() {
  return this.rgb().formatHex8();
}
function nte() {
  return CM(this).formatHsl();
}
function t3() {
  return this.rgb().formatRgb();
}
function Eu(t) {
  var e, n;
  return t = (t + "").trim().toLowerCase(), (e = Gee.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), n === 6 ? n3(e) : n === 3 ? new Hi(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, (e & 15) << 4 | e & 15, 1) : n === 8 ? eh(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (e & 255) / 255) : n === 4 ? eh(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, ((e & 15) << 4 | e & 15) / 255) : null) : (e = Yee.exec(t)) ? new Hi(e[1], e[2], e[3], 1) : (e = Xee.exec(t)) ? new Hi(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, 1) : (e = Qee.exec(t)) ? eh(e[1], e[2], e[3], e[4]) : (e = Zee.exec(t)) ? eh(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, e[4]) : (e = $ee.exec(t)) ? s3(e[1], e[2] / 100, e[3] / 100, 1) : (e = ete.exec(t)) ? s3(e[1], e[2] / 100, e[3] / 100, e[4]) : $S.hasOwnProperty(t) ? n3($S[t]) : t === "transparent" ? new Hi(NaN, NaN, NaN, 0) : null;
}
function n3(t) {
  return new Hi(t >> 16 & 255, t >> 8 & 255, t & 255, 1);
}
function eh(t, e, n, i) {
  return i <= 0 && (t = e = n = NaN), new Hi(t, e, n, i);
}
function ite(t) {
  return t instanceof tf || (t = Eu(t)), t ? (t = t.rgb(), new Hi(t.r, t.g, t.b, t.opacity)) : new Hi();
}
function Z1(t, e, n, i) {
  return arguments.length === 1 ? ite(t) : new Hi(t, e, n, i ?? 1);
}
function Hi(t, e, n, i) {
  this.r = +t, this.g = +e, this.b = +n, this.opacity = +i;
}
t_(Hi, Z1, kM(tf, {
  brighter(t) {
    return t = t == null ? xd : Math.pow(xd, t), new Hi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? Cu : Math.pow(Cu, t), new Hi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Hi(vl(this.r), vl(this.g), vl(this.b), Fd(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: i3,
  formatHex: i3,
  formatHex8: rte,
  formatRgb: r3,
  toString: r3
}));
function i3() {
  return `#${ml(this.r)}${ml(this.g)}${ml(this.b)}`;
}
function rte() {
  return `#${ml(this.r)}${ml(this.g)}${ml(this.b)}${ml((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function r3() {
  const t = Fd(this.opacity);
  return `${t === 1 ? "rgb(" : "rgba("}${vl(this.r)}, ${vl(this.g)}, ${vl(this.b)}${t === 1 ? ")" : `, ${t})`}`;
}
function Fd(t) {
  return isNaN(t) ? 1 : Math.max(0, Math.min(1, t));
}
function vl(t) {
  return Math.max(0, Math.min(255, Math.round(t) || 0));
}
function ml(t) {
  return t = vl(t), (t < 16 ? "0" : "") + t.toString(16);
}
function s3(t, e, n, i) {
  return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new Nr(t, e, n, i);
}
function CM(t) {
  if (t instanceof Nr)
    return new Nr(t.h, t.s, t.l, t.opacity);
  if (t instanceof tf || (t = Eu(t)), !t)
    return new Nr();
  if (t instanceof Nr)
    return t;
  t = t.rgb();
  var e = t.r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), s = Math.max(e, n, i), o = NaN, l = s - r, a = (s + r) / 2;
  return l ? (e === s ? o = (n - i) / l + (n < i) * 6 : n === s ? o = (i - e) / l + 2 : o = (e - n) / l + 4, l /= a < 0.5 ? s + r : 2 - s - r, o *= 60) : l = a > 0 && a < 1 ? 0 : o, new Nr(o, l, a, t.opacity);
}
function ste(t, e, n, i) {
  return arguments.length === 1 ? CM(t) : new Nr(t, e, n, i ?? 1);
}
function Nr(t, e, n, i) {
  this.h = +t, this.s = +e, this.l = +n, this.opacity = +i;
}
t_(Nr, ste, kM(tf, {
  brighter(t) {
    return t = t == null ? xd : Math.pow(xd, t), new Nr(this.h, this.s, this.l * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? Cu : Math.pow(Cu, t), new Nr(this.h, this.s, this.l * t, this.opacity);
  },
  rgb() {
    var t = this.h % 360 + (this.h < 0) * 360, e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < 0.5 ? n : 1 - n) * e, r = 2 * n - i;
    return new Hi(
      hm(t >= 240 ? t - 240 : t + 120, r, i),
      hm(t, r, i),
      hm(t < 120 ? t + 240 : t - 120, r, i),
      this.opacity
    );
  },
  clamp() {
    return new Nr(o3(this.h), th(this.s), th(this.l), Fd(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t = Fd(this.opacity);
    return `${t === 1 ? "hsl(" : "hsla("}${o3(this.h)}, ${th(this.s) * 100}%, ${th(this.l) * 100}%${t === 1 ? ")" : `, ${t})`}`;
  }
}));
function o3(t) {
  return t = (t || 0) % 360, t < 0 ? t + 360 : t;
}
function th(t) {
  return Math.max(0, Math.min(1, t || 0));
}
function hm(t, e, n) {
  return (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) * 255;
}
const SM = (t) => () => t;
function ote(t, e) {
  return function(n) {
    return t + n * e;
  };
}
function lte(t, e, n) {
  return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function(i) {
    return Math.pow(t + i * e, n);
  };
}
function ate(t) {
  return (t = +t) == 1 ? EM : function(e, n) {
    return n - e ? lte(e, n, t) : SM(isNaN(e) ? n : e);
  };
}
function EM(t, e) {
  var n = e - t;
  return n ? ote(t, n) : SM(isNaN(t) ? e : t);
}
const l3 = function t(e) {
  var n = ate(e);
  function i(r, s) {
    var o = n((r = Z1(r)).r, (s = Z1(s)).r), l = n(r.g, s.g), a = n(r.b, s.b), c = EM(r.opacity, s.opacity);
    return function(u) {
      return r.r = o(u), r.g = l(u), r.b = a(u), r.opacity = c(u), r + "";
    };
  }
  return i.gamma = t, i;
}(1);
function bo(t, e) {
  return t = +t, e = +e, function(n) {
    return t * (1 - n) + e * n;
  };
}
var $1 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, dm = new RegExp($1.source, "g");
function cte(t) {
  return function() {
    return t;
  };
}
function ute(t) {
  return function(e) {
    return t(e) + "";
  };
}
function fte(t, e) {
  var n = $1.lastIndex = dm.lastIndex = 0, i, r, s, o = -1, l = [], a = [];
  for (t = t + "", e = e + ""; (i = $1.exec(t)) && (r = dm.exec(e)); )
    (s = r.index) > n && (s = e.slice(n, s), l[o] ? l[o] += s : l[++o] = s), (i = i[0]) === (r = r[0]) ? l[o] ? l[o] += r : l[++o] = r : (l[++o] = null, a.push({ i: o, x: bo(i, r) })), n = dm.lastIndex;
  return n < e.length && (s = e.slice(n), l[o] ? l[o] += s : l[++o] = s), l.length < 2 ? a[0] ? ute(a[0].x) : cte(e) : (e = a.length, function(c) {
    for (var u = 0, f; u < e; ++u)
      l[(f = a[u]).i] = f.x(c);
    return l.join("");
  });
}
var a3 = 180 / Math.PI, e0 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function AM(t, e, n, i, r, s) {
  var o, l, a;
  return (o = Math.sqrt(t * t + e * e)) && (t /= o, e /= o), (a = t * n + e * i) && (n -= t * a, i -= e * a), (l = Math.sqrt(n * n + i * i)) && (n /= l, i /= l, a /= l), t * i < e * n && (t = -t, e = -e, a = -a, o = -o), {
    translateX: r,
    translateY: s,
    rotate: Math.atan2(e, t) * a3,
    skewX: Math.atan(a) * a3,
    scaleX: o,
    scaleY: l
  };
}
var nh;
function hte(t) {
  const e = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t + "");
  return e.isIdentity ? e0 : AM(e.a, e.b, e.c, e.d, e.e, e.f);
}
function dte(t) {
  return t == null || (nh || (nh = document.createElementNS("http://www.w3.org/2000/svg", "g")), nh.setAttribute("transform", t), !(t = nh.transform.baseVal.consolidate())) ? e0 : (t = t.matrix, AM(t.a, t.b, t.c, t.d, t.e, t.f));
}
function MM(t, e, n, i) {
  function r(c) {
    return c.length ? c.pop() + " " : "";
  }
  function s(c, u, f, h, d, p) {
    if (c !== f || u !== h) {
      var g = d.push("translate(", null, e, null, n);
      p.push({ i: g - 4, x: bo(c, f) }, { i: g - 2, x: bo(u, h) });
    } else
      (f || h) && d.push("translate(" + f + e + h + n);
  }
  function o(c, u, f, h) {
    c !== u ? (c - u > 180 ? u += 360 : u - c > 180 && (c += 360), h.push({ i: f.push(r(f) + "rotate(", null, i) - 2, x: bo(c, u) })) : u && f.push(r(f) + "rotate(" + u + i);
  }
  function l(c, u, f, h) {
    c !== u ? h.push({ i: f.push(r(f) + "skewX(", null, i) - 2, x: bo(c, u) }) : u && f.push(r(f) + "skewX(" + u + i);
  }
  function a(c, u, f, h, d, p) {
    if (c !== f || u !== h) {
      var g = d.push(r(d) + "scale(", null, ",", null, ")");
      p.push({ i: g - 4, x: bo(c, f) }, { i: g - 2, x: bo(u, h) });
    } else
      (f !== 1 || h !== 1) && d.push(r(d) + "scale(" + f + "," + h + ")");
  }
  return function(c, u) {
    var f = [], h = [];
    return c = t(c), u = t(u), s(c.translateX, c.translateY, u.translateX, u.translateY, f, h), o(c.rotate, u.rotate, f, h), l(c.skewX, u.skewX, f, h), a(c.scaleX, c.scaleY, u.scaleX, u.scaleY, f, h), c = u = null, function(d) {
      for (var p = -1, g = h.length, _; ++p < g; )
        f[(_ = h[p]).i] = _.x(d);
      return f.join("");
    };
  };
}
var pte = MM(hte, "px, ", "px)", "deg)"), gte = MM(dte, ", ", ")", ")"), mte = 1e-12;
function c3(t) {
  return ((t = Math.exp(t)) + 1 / t) / 2;
}
function bte(t) {
  return ((t = Math.exp(t)) - 1 / t) / 2;
}
function _te(t) {
  return ((t = Math.exp(2 * t)) - 1) / (t + 1);
}
const yte = function t(e, n, i) {
  function r(s, o) {
    var l = s[0], a = s[1], c = s[2], u = o[0], f = o[1], h = o[2], d = u - l, p = f - a, g = d * d + p * p, _, m;
    if (g < mte)
      m = Math.log(h / c) / e, _ = function(w) {
        return [
          l + w * d,
          a + w * p,
          c * Math.exp(e * w * m)
        ];
      };
    else {
      var C = Math.sqrt(g), v = (h * h - c * c + i * g) / (2 * c * n * C), k = (h * h - c * c - i * g) / (2 * h * n * C), S = Math.log(Math.sqrt(v * v + 1) - v), O = Math.log(Math.sqrt(k * k + 1) - k);
      m = (O - S) / e, _ = function(w) {
        var A = w * m, D = c3(S), R = c / (n * C) * (D * _te(e * A + S) - bte(S));
        return [
          l + R * d,
          a + R * p,
          c * D / c3(e * A + S)
        ];
      };
    }
    return _.duration = m * 1e3 * e / Math.SQRT2, _;
  }
  return r.rho = function(s) {
    var o = Math.max(1e-3, +s), l = o * o, a = l * l;
    return t(o, l, a);
  }, r;
}(Math.SQRT2, 2, 4);
var Ka = 0, Pc = 0, vc = 0, OM = 1e3, zd, Ic, Vd = 0, Nl = 0, $p = 0, Au = typeof performance == "object" && performance.now ? performance : Date, TM = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t) {
  setTimeout(t, 17);
};
function n_() {
  return Nl || (TM(wte), Nl = Au.now() + $p);
}
function wte() {
  Nl = 0;
}
function Ud() {
  this._call = this._time = this._next = null;
}
Ud.prototype = RM.prototype = {
  constructor: Ud,
  restart: function(t, e, n) {
    if (typeof t != "function")
      throw new TypeError("callback is not a function");
    n = (n == null ? n_() : +n) + (e == null ? 0 : +e), !this._next && Ic !== this && (Ic ? Ic._next = this : zd = this, Ic = this), this._call = t, this._time = n, t0();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, t0());
  }
};
function RM(t, e, n) {
  var i = new Ud();
  return i.restart(t, e, n), i;
}
function vte() {
  n_(), ++Ka;
  for (var t = zd, e; t; )
    (e = Nl - t._time) >= 0 && t._call.call(void 0, e), t = t._next;
  --Ka;
}
function u3() {
  Nl = (Vd = Au.now()) + $p, Ka = Pc = 0;
  try {
    vte();
  } finally {
    Ka = 0, Cte(), Nl = 0;
  }
}
function kte() {
  var t = Au.now(), e = t - Vd;
  e > OM && ($p -= e, Vd = t);
}
function Cte() {
  for (var t, e = zd, n, i = 1 / 0; e; )
    e._call ? (i > e._time && (i = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : zd = n);
  Ic = t, t0(i);
}
function t0(t) {
  if (!Ka) {
    Pc && (Pc = clearTimeout(Pc));
    var e = t - Nl;
    e > 24 ? (t < 1 / 0 && (Pc = setTimeout(u3, t - Au.now() - $p)), vc && (vc = clearInterval(vc))) : (vc || (Vd = Au.now(), vc = setInterval(kte, OM)), Ka = 1, TM(u3));
  }
}
function f3(t, e, n) {
  var i = new Ud();
  return e = e == null ? 0 : +e, i.restart((r) => {
    i.stop(), t(r + e);
  }, e, n), i;
}
var Ste = Zb("start", "end", "cancel", "interrupt"), Ete = [], PM = 0, h3 = 1, n0 = 2, Oh = 3, d3 = 4, i0 = 5, Th = 6;
function eg(t, e, n, i, r, s) {
  var o = t.__transition;
  if (!o)
    t.__transition = {};
  else if (n in o)
    return;
  Ate(t, n, {
    name: e,
    index: i,
    group: r,
    on: Ste,
    tween: Ete,
    time: s.time,
    delay: s.delay,
    duration: s.duration,
    ease: s.ease,
    timer: null,
    state: PM
  });
}
function i_(t, e) {
  var n = Kr(t, e);
  if (n.state > PM)
    throw new Error("too late; already scheduled");
  return n;
}
function Ls(t, e) {
  var n = Kr(t, e);
  if (n.state > Oh)
    throw new Error("too late; already running");
  return n;
}
function Kr(t, e) {
  var n = t.__transition;
  if (!n || !(n = n[e]))
    throw new Error("transition not found");
  return n;
}
function Ate(t, e, n) {
  var i = t.__transition, r;
  i[e] = n, n.timer = RM(s, 0, n.time);
  function s(c) {
    n.state = h3, n.timer.restart(o, n.delay, n.time), n.delay <= c && o(c - n.delay);
  }
  function o(c) {
    var u, f, h, d;
    if (n.state !== h3)
      return a();
    for (u in i)
      if (d = i[u], d.name === n.name) {
        if (d.state === Oh)
          return f3(o);
        d.state === d3 ? (d.state = Th, d.timer.stop(), d.on.call("interrupt", t, t.__data__, d.index, d.group), delete i[u]) : +u < e && (d.state = Th, d.timer.stop(), d.on.call("cancel", t, t.__data__, d.index, d.group), delete i[u]);
      }
    if (f3(function() {
      n.state === Oh && (n.state = d3, n.timer.restart(l, n.delay, n.time), l(c));
    }), n.state = n0, n.on.call("start", t, t.__data__, n.index, n.group), n.state === n0) {
      for (n.state = Oh, r = new Array(h = n.tween.length), u = 0, f = -1; u < h; ++u)
        (d = n.tween[u].value.call(t, t.__data__, n.index, n.group)) && (r[++f] = d);
      r.length = f + 1;
    }
  }
  function l(c) {
    for (var u = c < n.duration ? n.ease.call(null, c / n.duration) : (n.timer.restart(a), n.state = i0, 1), f = -1, h = r.length; ++f < h; )
      r[f].call(t, u);
    n.state === i0 && (n.on.call("end", t, t.__data__, n.index, n.group), a());
  }
  function a() {
    n.state = Th, n.timer.stop(), delete i[e];
    for (var c in i)
      return;
    delete t.__transition;
  }
}
function Rh(t, e) {
  var n = t.__transition, i, r, s = !0, o;
  if (n) {
    e = e == null ? null : e + "";
    for (o in n) {
      if ((i = n[o]).name !== e) {
        s = !1;
        continue;
      }
      r = i.state > n0 && i.state < i0, i.state = Th, i.timer.stop(), i.on.call(r ? "interrupt" : "cancel", t, t.__data__, i.index, i.group), delete n[o];
    }
    s && delete t.__transition;
  }
}
function Mte(t) {
  return this.each(function() {
    Rh(this, t);
  });
}
function Ote(t, e) {
  var n, i;
  return function() {
    var r = Ls(this, t), s = r.tween;
    if (s !== n) {
      i = n = s;
      for (var o = 0, l = i.length; o < l; ++o)
        if (i[o].name === e) {
          i = i.slice(), i.splice(o, 1);
          break;
        }
    }
    r.tween = i;
  };
}
function Tte(t, e, n) {
  var i, r;
  if (typeof n != "function")
    throw new Error();
  return function() {
    var s = Ls(this, t), o = s.tween;
    if (o !== i) {
      r = (i = o).slice();
      for (var l = { name: e, value: n }, a = 0, c = r.length; a < c; ++a)
        if (r[a].name === e) {
          r[a] = l;
          break;
        }
      a === c && r.push(l);
    }
    s.tween = r;
  };
}
function Rte(t, e) {
  var n = this._id;
  if (t += "", arguments.length < 2) {
    for (var i = Kr(this.node(), n).tween, r = 0, s = i.length, o; r < s; ++r)
      if ((o = i[r]).name === t)
        return o.value;
    return null;
  }
  return this.each((e == null ? Ote : Tte)(n, t, e));
}
function r_(t, e, n) {
  var i = t._id;
  return t.each(function() {
    var r = Ls(this, i);
    (r.value || (r.value = {}))[e] = n.apply(this, arguments);
  }), function(r) {
    return Kr(r, i).value[e];
  };
}
function IM(t, e) {
  var n;
  return (typeof e == "number" ? bo : e instanceof Eu ? l3 : (n = Eu(e)) ? (e = n, l3) : fte)(t, e);
}
function Pte(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function Ite(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function Dte(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = this.getAttribute(t);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function Nte(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = this.getAttributeNS(t.space, t.local);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function Lte(t, e, n) {
  var i, r, s;
  return function() {
    var o, l = n(this), a;
    return l == null ? void this.removeAttribute(t) : (o = this.getAttribute(t), a = l + "", o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l)));
  };
}
function jte(t, e, n) {
  var i, r, s;
  return function() {
    var o, l = n(this), a;
    return l == null ? void this.removeAttributeNS(t.space, t.local) : (o = this.getAttributeNS(t.space, t.local), a = l + "", o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l)));
  };
}
function Bte(t, e) {
  var n = Zp(t), i = n === "transform" ? gte : IM;
  return this.attrTween(t, typeof e == "function" ? (n.local ? jte : Lte)(n, i, r_(this, "attr." + t, e)) : e == null ? (n.local ? Ite : Pte)(n) : (n.local ? Nte : Dte)(n, i, e));
}
function xte(t, e) {
  return function(n) {
    this.setAttribute(t, e.call(this, n));
  };
}
function Fte(t, e) {
  return function(n) {
    this.setAttributeNS(t.space, t.local, e.call(this, n));
  };
}
function zte(t, e) {
  var n, i;
  function r() {
    var s = e.apply(this, arguments);
    return s !== i && (n = (i = s) && Fte(t, s)), n;
  }
  return r._value = e, r;
}
function Vte(t, e) {
  var n, i;
  function r() {
    var s = e.apply(this, arguments);
    return s !== i && (n = (i = s) && xte(t, s)), n;
  }
  return r._value = e, r;
}
function Ute(t, e) {
  var n = "attr." + t;
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (e == null)
    return this.tween(n, null);
  if (typeof e != "function")
    throw new Error();
  var i = Zp(t);
  return this.tween(n, (i.local ? zte : Vte)(i, e));
}
function Hte(t, e) {
  return function() {
    i_(this, t).delay = +e.apply(this, arguments);
  };
}
function Wte(t, e) {
  return e = +e, function() {
    i_(this, t).delay = e;
  };
}
function qte(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? Hte : Wte)(e, t)) : Kr(this.node(), e).delay;
}
function Jte(t, e) {
  return function() {
    Ls(this, t).duration = +e.apply(this, arguments);
  };
}
function Kte(t, e) {
  return e = +e, function() {
    Ls(this, t).duration = e;
  };
}
function Gte(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? Jte : Kte)(e, t)) : Kr(this.node(), e).duration;
}
function Yte(t, e) {
  if (typeof e != "function")
    throw new Error();
  return function() {
    Ls(this, t).ease = e;
  };
}
function Xte(t) {
  var e = this._id;
  return arguments.length ? this.each(Yte(e, t)) : Kr(this.node(), e).ease;
}
function Qte(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    if (typeof n != "function")
      throw new Error();
    Ls(this, t).ease = n;
  };
}
function Zte(t) {
  if (typeof t != "function")
    throw new Error();
  return this.each(Qte(this._id, t));
}
function $te(t) {
  typeof t != "function" && (t = hM(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = [], a, c = 0; c < o; ++c)
      (a = s[c]) && t.call(a, a.__data__, c, s) && l.push(a);
  return new eo(i, this._parents, this._name, this._id);
}
function ene(t) {
  if (t._id !== this._id)
    throw new Error();
  for (var e = this._groups, n = t._groups, i = e.length, r = n.length, s = Math.min(i, r), o = new Array(i), l = 0; l < s; ++l)
    for (var a = e[l], c = n[l], u = a.length, f = o[l] = new Array(u), h, d = 0; d < u; ++d)
      (h = a[d] || c[d]) && (f[d] = h);
  for (; l < i; ++l)
    o[l] = e[l];
  return new eo(o, this._parents, this._name, this._id);
}
function tne(t) {
  return (t + "").trim().split(/^|\s+/).every(function(e) {
    var n = e.indexOf(".");
    return n >= 0 && (e = e.slice(0, n)), !e || e === "start";
  });
}
function nne(t, e, n) {
  var i, r, s = tne(e) ? i_ : Ls;
  return function() {
    var o = s(this, t), l = o.on;
    l !== i && (r = (i = l).copy()).on(e, n), o.on = r;
  };
}
function ine(t, e) {
  var n = this._id;
  return arguments.length < 2 ? Kr(this.node(), n).on.on(t) : this.each(nne(n, t, e));
}
function rne(t) {
  return function() {
    var e = this.parentNode;
    for (var n in this.__transition)
      if (+n !== t)
        return;
    e && e.removeChild(this);
  };
}
function sne() {
  return this.on("end.remove", rne(this._id));
}
function one(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = $b(t));
  for (var i = this._groups, r = i.length, s = new Array(r), o = 0; o < r; ++o)
    for (var l = i[o], a = l.length, c = s[o] = new Array(a), u, f, h = 0; h < a; ++h)
      (u = l[h]) && (f = t.call(u, u.__data__, h, l)) && ("__data__" in u && (f.__data__ = u.__data__), c[h] = f, eg(c[h], e, n, h, c, Kr(u, n)));
  return new eo(s, this._parents, e, n);
}
function lne(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = fM(t));
  for (var i = this._groups, r = i.length, s = [], o = [], l = 0; l < r; ++l)
    for (var a = i[l], c = a.length, u, f = 0; f < c; ++f)
      if (u = a[f]) {
        for (var h = t.call(u, u.__data__, f, a), d, p = Kr(u, n), g = 0, _ = h.length; g < _; ++g)
          (d = h[g]) && eg(d, e, n, g, h, p);
        s.push(h), o.push(u);
      }
  return new eo(s, o, e, n);
}
var ane = ef.prototype.constructor;
function cne() {
  return new ane(this._groups, this._parents);
}
function une(t, e) {
  var n, i, r;
  return function() {
    var s = Ja(this, t), o = (this.style.removeProperty(t), Ja(this, t));
    return s === o ? null : s === n && o === i ? r : r = e(n = s, i = o);
  };
}
function DM(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function fne(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = Ja(this, t);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function hne(t, e, n) {
  var i, r, s;
  return function() {
    var o = Ja(this, t), l = n(this), a = l + "";
    return l == null && (a = l = (this.style.removeProperty(t), Ja(this, t))), o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l));
  };
}
function dne(t, e) {
  var n, i, r, s = "style." + e, o = "end." + s, l;
  return function() {
    var a = Ls(this, t), c = a.on, u = a.value[s] == null ? l || (l = DM(e)) : void 0;
    (c !== n || r !== u) && (i = (n = c).copy()).on(o, r = u), a.on = i;
  };
}
function pne(t, e, n) {
  var i = (t += "") == "transform" ? pte : IM;
  return e == null ? this.styleTween(t, une(t, i)).on("end.style." + t, DM(t)) : typeof e == "function" ? this.styleTween(t, hne(t, i, r_(this, "style." + t, e))).each(dne(this._id, t)) : this.styleTween(t, fne(t, i, e), n).on("end.style." + t, null);
}
function gne(t, e, n) {
  return function(i) {
    this.style.setProperty(t, e.call(this, i), n);
  };
}
function mne(t, e, n) {
  var i, r;
  function s() {
    var o = e.apply(this, arguments);
    return o !== r && (i = (r = o) && gne(t, o, n)), i;
  }
  return s._value = e, s;
}
function bne(t, e, n) {
  var i = "style." + (t += "");
  if (arguments.length < 2)
    return (i = this.tween(i)) && i._value;
  if (e == null)
    return this.tween(i, null);
  if (typeof e != "function")
    throw new Error();
  return this.tween(i, mne(t, e, n ?? ""));
}
function _ne(t) {
  return function() {
    this.textContent = t;
  };
}
function yne(t) {
  return function() {
    var e = t(this);
    this.textContent = e ?? "";
  };
}
function wne(t) {
  return this.tween("text", typeof t == "function" ? yne(r_(this, "text", t)) : _ne(t == null ? "" : t + ""));
}
function vne(t) {
  return function(e) {
    this.textContent = t.call(this, e);
  };
}
function kne(t) {
  var e, n;
  function i() {
    var r = t.apply(this, arguments);
    return r !== n && (e = (n = r) && vne(r)), e;
  }
  return i._value = t, i;
}
function Cne(t) {
  var e = "text";
  if (arguments.length < 1)
    return (e = this.tween(e)) && e._value;
  if (t == null)
    return this.tween(e, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(e, kne(t));
}
function Sne() {
  for (var t = this._name, e = this._id, n = NM(), i = this._groups, r = i.length, s = 0; s < r; ++s)
    for (var o = i[s], l = o.length, a, c = 0; c < l; ++c)
      if (a = o[c]) {
        var u = Kr(a, e);
        eg(a, t, n, c, o, {
          time: u.time + u.delay + u.duration,
          delay: 0,
          duration: u.duration,
          ease: u.ease
        });
      }
  return new eo(i, this._parents, t, n);
}
function Ene() {
  var t, e, n = this, i = n._id, r = n.size();
  return new Promise(function(s, o) {
    var l = { value: o }, a = { value: function() {
      --r === 0 && s();
    } };
    n.each(function() {
      var c = Ls(this, i), u = c.on;
      u !== t && (e = (t = u).copy(), e._.cancel.push(l), e._.interrupt.push(l), e._.end.push(a)), c.on = e;
    }), r === 0 && s();
  });
}
var Ane = 0;
function eo(t, e, n, i) {
  this._groups = t, this._parents = e, this._name = n, this._id = i;
}
function NM() {
  return ++Ane;
}
var Bs = ef.prototype;
eo.prototype = {
  constructor: eo,
  select: one,
  selectAll: lne,
  selectChild: Bs.selectChild,
  selectChildren: Bs.selectChildren,
  filter: $te,
  merge: ene,
  selection: cne,
  transition: Sne,
  call: Bs.call,
  nodes: Bs.nodes,
  node: Bs.node,
  size: Bs.size,
  empty: Bs.empty,
  each: Bs.each,
  on: ine,
  attr: Bte,
  attrTween: Ute,
  style: pne,
  styleTween: bne,
  text: wne,
  textTween: Cne,
  remove: sne,
  tween: Rte,
  delay: qte,
  duration: Gte,
  ease: Xte,
  easeVarying: Zte,
  end: Ene,
  [Symbol.iterator]: Bs[Symbol.iterator]
};
function Mne(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}
var One = {
  time: null,
  delay: 0,
  duration: 250,
  ease: Mne
};
function Tne(t, e) {
  for (var n; !(n = t.__transition) || !(n = n[e]); )
    if (!(t = t.parentNode))
      throw new Error(`transition ${e} not found`);
  return n;
}
function Rne(t) {
  var e, n;
  t instanceof eo ? (e = t._id, t = t._name) : (e = NM(), (n = One).time = n_(), t = t == null ? null : t + "");
  for (var i = this._groups, r = i.length, s = 0; s < r; ++s)
    for (var o = i[s], l = o.length, a, c = 0; c < l; ++c)
      (a = o[c]) && eg(a, t, e, c, o, n || Tne(a, e));
  return new eo(i, this._parents, t, e);
}
ef.prototype.interrupt = Mte;
ef.prototype.transition = Rne;
const ih = (t) => () => t;
function Pne(t, {
  sourceEvent: e,
  target: n,
  transform: i,
  dispatch: r
}) {
  Object.defineProperties(this, {
    type: { value: t, enumerable: !0, configurable: !0 },
    sourceEvent: { value: e, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    transform: { value: i, enumerable: !0, configurable: !0 },
    _: { value: r }
  });
}
function Ws(t, e, n) {
  this.k = t, this.x = e, this.y = n;
}
Ws.prototype = {
  constructor: Ws,
  scale: function(t) {
    return t === 1 ? this : new Ws(this.k * t, this.x, this.y);
  },
  translate: function(t, e) {
    return t === 0 & e === 0 ? this : new Ws(this.k, this.x + this.k * t, this.y + this.k * e);
  },
  apply: function(t) {
    return [t[0] * this.k + this.x, t[1] * this.k + this.y];
  },
  applyX: function(t) {
    return t * this.k + this.x;
  },
  applyY: function(t) {
    return t * this.k + this.y;
  },
  invert: function(t) {
    return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k];
  },
  invertX: function(t) {
    return (t - this.x) / this.k;
  },
  invertY: function(t) {
    return (t - this.y) / this.k;
  },
  rescaleX: function(t) {
    return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t));
  },
  rescaleY: function(t) {
    return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Hd = new Ws(1, 0, 0);
Ws.prototype;
function pm(t) {
  t.stopImmediatePropagation();
}
function kc(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function Ine(t) {
  return (!t.ctrlKey || t.type === "wheel") && !t.button;
}
function Dne() {
  var t = this;
  return t instanceof SVGElement ? (t = t.ownerSVGElement || t, t.hasAttribute("viewBox") ? (t = t.viewBox.baseVal, [[t.x, t.y], [t.x + t.width, t.y + t.height]]) : [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]]) : [[0, 0], [t.clientWidth, t.clientHeight]];
}
function p3() {
  return this.__zoom || Hd;
}
function Nne(t) {
  return -t.deltaY * (t.deltaMode === 1 ? 0.05 : t.deltaMode ? 1 : 2e-3) * (t.ctrlKey ? 10 : 1);
}
function Lne() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function jne(t, e, n) {
  var i = t.invertX(e[0][0]) - n[0][0], r = t.invertX(e[1][0]) - n[1][0], s = t.invertY(e[0][1]) - n[0][1], o = t.invertY(e[1][1]) - n[1][1];
  return t.translate(
    r > i ? (i + r) / 2 : Math.min(0, i) || Math.max(0, r),
    o > s ? (s + o) / 2 : Math.min(0, s) || Math.max(0, o)
  );
}
function Bne() {
  var t = Ine, e = Dne, n = jne, i = Nne, r = Lne, s = [0, 1 / 0], o = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], l = 250, a = yte, c = Zb("start", "zoom", "end"), u, f, h, d = 500, p = 150, g = 0, _ = 10;
  function m(I) {
    I.property("__zoom", p3).on("wheel.zoom", A, { passive: !1 }).on("mousedown.zoom", D).on("dblclick.zoom", R).filter(r).on("touchstart.zoom", M).on("touchmove.zoom", H).on("touchend.zoom touchcancel.zoom", J).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  m.transform = function(I, z, L, K) {
    var F = I.selection ? I.selection() : I;
    F.property("__zoom", p3), I !== F ? S(I, z, L, K) : F.interrupt().each(function() {
      O(this, arguments).event(K).start().zoom(null, typeof z == "function" ? z.apply(this, arguments) : z).end();
    });
  }, m.scaleBy = function(I, z, L, K) {
    m.scaleTo(I, function() {
      var F = this.__zoom.k, N = typeof z == "function" ? z.apply(this, arguments) : z;
      return F * N;
    }, L, K);
  }, m.scaleTo = function(I, z, L, K) {
    m.transform(I, function() {
      var F = e.apply(this, arguments), N = this.__zoom, te = L == null ? k(F) : typeof L == "function" ? L.apply(this, arguments) : L, ue = N.invert(te), q = typeof z == "function" ? z.apply(this, arguments) : z;
      return n(v(C(N, q), te, ue), F, o);
    }, L, K);
  }, m.translateBy = function(I, z, L, K) {
    m.transform(I, function() {
      return n(this.__zoom.translate(
        typeof z == "function" ? z.apply(this, arguments) : z,
        typeof L == "function" ? L.apply(this, arguments) : L
      ), e.apply(this, arguments), o);
    }, null, K);
  }, m.translateTo = function(I, z, L, K, F) {
    m.transform(I, function() {
      var N = e.apply(this, arguments), te = this.__zoom, ue = K == null ? k(N) : typeof K == "function" ? K.apply(this, arguments) : K;
      return n(Hd.translate(ue[0], ue[1]).scale(te.k).translate(
        typeof z == "function" ? -z.apply(this, arguments) : -z,
        typeof L == "function" ? -L.apply(this, arguments) : -L
      ), N, o);
    }, K, F);
  };
  function C(I, z) {
    return z = Math.max(s[0], Math.min(s[1], z)), z === I.k ? I : new Ws(z, I.x, I.y);
  }
  function v(I, z, L) {
    var K = z[0] - L[0] * I.k, F = z[1] - L[1] * I.k;
    return K === I.x && F === I.y ? I : new Ws(I.k, K, F);
  }
  function k(I) {
    return [(+I[0][0] + +I[1][0]) / 2, (+I[0][1] + +I[1][1]) / 2];
  }
  function S(I, z, L, K) {
    I.on("start.zoom", function() {
      O(this, arguments).event(K).start();
    }).on("interrupt.zoom end.zoom", function() {
      O(this, arguments).event(K).end();
    }).tween("zoom", function() {
      var F = this, N = arguments, te = O(F, N).event(K), ue = e.apply(F, N), q = L == null ? k(ue) : typeof L == "function" ? L.apply(F, N) : L, re = Math.max(ue[1][0] - ue[0][0], ue[1][1] - ue[0][1]), ie = F.__zoom, Z = typeof z == "function" ? z.apply(F, N) : z, Le = a(ie.invert(q).concat(re / ie.k), Z.invert(q).concat(re / Z.k));
      return function(Ie) {
        if (Ie === 1)
          Ie = Z;
        else {
          var Fe = Le(Ie), le = re / Fe[2];
          Ie = new Ws(le, q[0] - Fe[0] * le, q[1] - Fe[1] * le);
        }
        te.zoom(null, Ie);
      };
    });
  }
  function O(I, z, L) {
    return !L && I.__zooming || new w(I, z);
  }
  function w(I, z) {
    this.that = I, this.args = z, this.active = 0, this.sourceEvent = null, this.extent = e.apply(I, z), this.taps = 0;
  }
  w.prototype = {
    event: function(I) {
      return I && (this.sourceEvent = I), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(I, z) {
      return this.mouse && I !== "mouse" && (this.mouse[1] = z.invert(this.mouse[0])), this.touch0 && I !== "touch" && (this.touch0[1] = z.invert(this.touch0[0])), this.touch1 && I !== "touch" && (this.touch1[1] = z.invert(this.touch1[0])), this.that.__zoom = z, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(I) {
      var z = Dr(this.that).datum();
      c.call(
        I,
        this.that,
        new Pne(I, {
          sourceEvent: this.sourceEvent,
          target: m,
          type: I,
          transform: this.that.__zoom,
          dispatch: c
        }),
        z
      );
    }
  };
  function A(I, ...z) {
    if (!t.apply(this, arguments))
      return;
    var L = O(this, z).event(I), K = this.__zoom, F = Math.max(s[0], Math.min(s[1], K.k * Math.pow(2, i.apply(this, arguments)))), N = po(I);
    if (L.wheel)
      (L.mouse[0][0] !== N[0] || L.mouse[0][1] !== N[1]) && (L.mouse[1] = K.invert(L.mouse[0] = N)), clearTimeout(L.wheel);
    else {
      if (K.k === F)
        return;
      L.mouse = [N, K.invert(N)], Rh(this), L.start();
    }
    kc(I), L.wheel = setTimeout(te, p), L.zoom("mouse", n(v(C(K, F), L.mouse[0], L.mouse[1]), L.extent, o));
    function te() {
      L.wheel = null, L.end();
    }
  }
  function D(I, ...z) {
    if (h || !t.apply(this, arguments))
      return;
    var L = I.currentTarget, K = O(this, z, !0).event(I), F = Dr(I.view).on("mousemove.zoom", q, !0).on("mouseup.zoom", re, !0), N = po(I, L), te = I.clientX, ue = I.clientY;
    Jee(I.view), pm(I), K.mouse = [N, this.__zoom.invert(N)], Rh(this), K.start();
    function q(ie) {
      if (kc(ie), !K.moved) {
        var Z = ie.clientX - te, Le = ie.clientY - ue;
        K.moved = Z * Z + Le * Le > g;
      }
      K.event(ie).zoom("mouse", n(v(K.that.__zoom, K.mouse[0] = po(ie, L), K.mouse[1]), K.extent, o));
    }
    function re(ie) {
      F.on("mousemove.zoom mouseup.zoom", null), Kee(ie.view, K.moved), kc(ie), K.event(ie).end();
    }
  }
  function R(I, ...z) {
    if (t.apply(this, arguments)) {
      var L = this.__zoom, K = po(I.changedTouches ? I.changedTouches[0] : I, this), F = L.invert(K), N = L.k * (I.shiftKey ? 0.5 : 2), te = n(v(C(L, N), K, F), e.apply(this, z), o);
      kc(I), l > 0 ? Dr(this).transition().duration(l).call(S, te, K, I) : Dr(this).call(m.transform, te, K, I);
    }
  }
  function M(I, ...z) {
    if (t.apply(this, arguments)) {
      var L = I.touches, K = L.length, F = O(this, z, I.changedTouches.length === K).event(I), N, te, ue, q;
      for (pm(I), te = 0; te < K; ++te)
        ue = L[te], q = po(ue, this), q = [q, this.__zoom.invert(q), ue.identifier], F.touch0 ? !F.touch1 && F.touch0[2] !== q[2] && (F.touch1 = q, F.taps = 0) : (F.touch0 = q, N = !0, F.taps = 1 + !!u);
      u && (u = clearTimeout(u)), N && (F.taps < 2 && (f = q[0], u = setTimeout(function() {
        u = null;
      }, d)), Rh(this), F.start());
    }
  }
  function H(I, ...z) {
    if (this.__zooming) {
      var L = O(this, z).event(I), K = I.changedTouches, F = K.length, N, te, ue, q;
      for (kc(I), N = 0; N < F; ++N)
        te = K[N], ue = po(te, this), L.touch0 && L.touch0[2] === te.identifier ? L.touch0[0] = ue : L.touch1 && L.touch1[2] === te.identifier && (L.touch1[0] = ue);
      if (te = L.that.__zoom, L.touch1) {
        var re = L.touch0[0], ie = L.touch0[1], Z = L.touch1[0], Le = L.touch1[1], Ie = (Ie = Z[0] - re[0]) * Ie + (Ie = Z[1] - re[1]) * Ie, Fe = (Fe = Le[0] - ie[0]) * Fe + (Fe = Le[1] - ie[1]) * Fe;
        te = C(te, Math.sqrt(Ie / Fe)), ue = [(re[0] + Z[0]) / 2, (re[1] + Z[1]) / 2], q = [(ie[0] + Le[0]) / 2, (ie[1] + Le[1]) / 2];
      } else if (L.touch0)
        ue = L.touch0[0], q = L.touch0[1];
      else
        return;
      L.zoom("touch", n(v(te, ue, q), L.extent, o));
    }
  }
  function J(I, ...z) {
    if (this.__zooming) {
      var L = O(this, z).event(I), K = I.changedTouches, F = K.length, N, te;
      for (pm(I), h && clearTimeout(h), h = setTimeout(function() {
        h = null;
      }, d), N = 0; N < F; ++N)
        te = K[N], L.touch0 && L.touch0[2] === te.identifier ? delete L.touch0 : L.touch1 && L.touch1[2] === te.identifier && delete L.touch1;
      if (L.touch1 && !L.touch0 && (L.touch0 = L.touch1, delete L.touch1), L.touch0)
        L.touch0[1] = this.__zoom.invert(L.touch0[0]);
      else if (L.end(), L.taps === 2 && (te = po(te, this), Math.hypot(f[0] - te[0], f[1] - te[1]) < _)) {
        var ue = Dr(this).on("dblclick.zoom");
        ue && ue.apply(this, arguments);
      }
    }
  }
  return m.wheelDelta = function(I) {
    return arguments.length ? (i = typeof I == "function" ? I : ih(+I), m) : i;
  }, m.filter = function(I) {
    return arguments.length ? (t = typeof I == "function" ? I : ih(!!I), m) : t;
  }, m.touchable = function(I) {
    return arguments.length ? (r = typeof I == "function" ? I : ih(!!I), m) : r;
  }, m.extent = function(I) {
    return arguments.length ? (e = typeof I == "function" ? I : ih([[+I[0][0], +I[0][1]], [+I[1][0], +I[1][1]]]), m) : e;
  }, m.scaleExtent = function(I) {
    return arguments.length ? (s[0] = +I[0], s[1] = +I[1], m) : [s[0], s[1]];
  }, m.translateExtent = function(I) {
    return arguments.length ? (o[0][0] = +I[0][0], o[1][0] = +I[1][0], o[0][1] = +I[0][1], o[1][1] = +I[1][1], m) : [[o[0][0], o[0][1]], [o[1][0], o[1][1]]];
  }, m.constrain = function(I) {
    return arguments.length ? (n = I, m) : n;
  }, m.duration = function(I) {
    return arguments.length ? (l = +I, m) : l;
  }, m.interpolate = function(I) {
    return arguments.length ? (a = I, m) : a;
  }, m.on = function() {
    var I = c.on.apply(c, arguments);
    return I === c ? m : I;
  }, m.clickDistance = function(I) {
    return arguments.length ? (g = (I = +I) * I, m) : Math.sqrt(g);
  }, m.tapDistance = function(I) {
    return arguments.length ? (_ = +I, m) : _;
  }, m;
}
function Mu() {
  return Mu = Object.assign || function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var n = arguments[e];
      for (var i in n)
        Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
    }
    return t;
  }, Mu.apply(this, arguments);
}
function xne(t, e) {
  t.prototype = Object.create(e.prototype), t.prototype.constructor = t, r0(t, e);
}
function r0(t, e) {
  return r0 = Object.setPrototypeOf || function(i, r) {
    return i.__proto__ = r, i;
  }, r0(t, e);
}
function Fne(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
var Ph = 0;
function LM() {
  return Ph > 0;
}
function s0(t) {
  Ph++;
  try {
    return t();
  } finally {
    Ph--, Ph === 0 && Une();
  }
}
var s_ = /* @__PURE__ */ function() {
  function t(n) {
    this.trigger = n, this.observing = /* @__PURE__ */ new Map();
  }
  var e = t.prototype;
  return e.registerConnection = function(i) {
    var r = this.observing.get(i.observable);
    r || (r = {
      byKey: /* @__PURE__ */ new Set(),
      iterate: !1
    }, this.observing.set(i.observable, r)), i.type === "iterate" ? r.iterate = !0 : r.byKey.add(i.key);
  }, e.removeObservers = function() {
    var i = this;
    this.observing.forEach(function(r, s) {
      r.iterate && s[ni].connections.iterate.delete(i), r.byKey.forEach(function(o) {
        s[ni].connections.byKey.get(o).delete(i);
      });
    }), this.observing.clear();
  }, t;
}(), kl = [], tg = /* @__PURE__ */ function(t) {
  xne(e, t);
  function e(i, r, s) {
    var o;
    if (o = t.call(this, function() {
      return o._trigger();
    }) || this, o.func = i, o.options = r, o.effect = s, o.isInitial = !0, o.reaction = function() {
      kl.push(Fne(o));
      try {
        o.func();
      } finally {
        kl.pop();
      }
      o.effect && (!o.isInitial || o.options.fireImmediately) && o.effect(), o.isInitial = !1;
    }, !s && !o.options.fireImmediately)
      throw new Error("if no effect function passed, should always fireImmediately");
    return o.reaction(), o;
  }
  var n = e.prototype;
  return n._trigger = function() {
    if (kl.includes(this))
      throw new Error("already running reaction");
    this.removeObservers(), this.reaction();
  }, e;
}(s_);
function jM() {
  return !!kl.length;
}
function BM() {
  return kl.length ? kl[kl.length - 1] : void 0;
}
function zne(t, e, n) {
  var i = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, n), r = new tg(t, i, e);
  return r;
}
var o0 = !1;
function xM() {
  return o0;
}
function FM(t) {
  o0 = !0;
  try {
    t();
  } finally {
    o0 = !1;
  }
}
function Vne(t) {
  return function() {
    return FM(t);
  };
}
var l0 = [];
function Une() {
  var t = [].concat(l0);
  l0 = [], zM(t);
}
function zM(t) {
  var e = /* @__PURE__ */ new Set();
  t.forEach(function(n) {
    var i;
    (n.type === "add" || n.type === "delete") && n.observable[ni].connections.iterate.forEach(function(r) {
      e.add(r);
    }), (i = n.observable[ni].connections.byKey.get(n.key)) == null || i.forEach(function(r) {
      e.add(r);
    });
  }), e.forEach(function(n) {
    n.trigger();
  });
}
function rh(t) {
  if (LM()) {
    l0.push(t);
    return;
  }
  zM([t]);
}
function g3(t, e) {
  if (t.type === "iterate")
    t.observable[ni].connections.iterate.add(e);
  else {
    var n = t.observable[ni].connections.byKey.get(t.key);
    n || (n = /* @__PURE__ */ new Set(), t.observable[ni].connections.byKey.set(t.key, n)), n.add(e);
  }
}
function sh(t, e) {
  if (!xM()) {
    var n = BM();
    n && (g3(t, n), n.registerConnection(t)), e && (g3(t, e), e.registerConnection(t));
  }
}
var o_ = Symbol("$skipreactive"), ni = Symbol("$reactive"), kr = Symbol("$reactiveproxy");
function nf(t, e) {
  return !!(t && t[kr] && t[kr].implicitObserver === e);
}
function l_(t) {
  return t[o_] = !0, t;
}
function VM(t) {
  return !!(t && !nf(t) && t[ni]);
}
function a0(t, e, n) {
  if (n === void 0 && (n = !1), t[o_] || nf(t, e))
    return t;
  var i = Hne(t, n);
  if (!e)
    return i;
  var r = i[ni].proxiesWithImplicitObserver.get(e);
  if (!r) {
    var s = {
      implicitObserver: e
    };
    Object.setPrototypeOf(s, UM), r = new Proxy(i[ni].raw, s), i[ni].proxiesWithImplicitObserver.set(e, r);
  }
  return r;
}
var Ga = a0;
function Hne(t, e) {
  if (e === void 0 && (e = !1), nf(t))
    return t;
  if (VM(t))
    return t[ni].proxy;
  if (t[ni] || t[kr])
    throw new Error("unexpected");
  var n = {
    connections: {
      iterate: /* @__PURE__ */ new Set(),
      byKey: /* @__PURE__ */ new Map()
    },
    proxy: {},
    raw: t,
    proxiesWithImplicitObserver: /* @__PURE__ */ new Map(),
    shallow: e
  };
  Object.defineProperty(t, ni, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
  var i = new Proxy(t, UM);
  return n.proxy = i, i;
}
var UM = {
  has: function(e, n) {
    var i = Reflect.has(e, n);
    return typeof n == "symbol" || sh({
      observable: e,
      key: n,
      type: "has"
    }, this.implicitObserver), i;
  },
  get: function(e, n, i) {
    if (n === kr)
      return {
        implicitObserver: this.implicitObserver
      };
    var r = Reflect.get(e, n, i);
    if (typeof n == "symbol")
      return r;
    if (n === "length" && Array.isArray(e) ? sh({
      observable: e,
      type: "iterate"
    }, this.implicitObserver) : sh({
      observable: e,
      key: n,
      type: "get"
    }, this.implicitObserver), VM(r))
      return a0(r, this.implicitObserver);
    if (e[ni].shallow)
      return r;
    if (typeof r == "object" && r !== null && !nf(r, this.implicitObserver) && !Object.isFrozen(r)) {
      var s = Reflect.getOwnPropertyDescriptor(e, n);
      if ((!s || !(s.writable === !1 && s.configurable === !1)) && (jM() || this.implicitObserver))
        return a0(r, this.implicitObserver);
    }
    return r;
  },
  ownKeys: function(e) {
    return sh({
      observable: e,
      type: "iterate"
    }, this.implicitObserver), Reflect.ownKeys(e);
  },
  set: function(e, n, i, r) {
    return s0(function() {
      if (typeof n == "symbol")
        return Reflect.set(e, n, i, r);
      var s = Object.hasOwnProperty.call(e, n), o = Reflect.get(e, n, r), l = Reflect.set(e, n, i, r);
      if (!s)
        rh({
          observable: e,
          key: n,
          value: i,
          type: "add"
        });
      else if (i !== o)
        if (n === "length" && Array.isArray(e)) {
          if (!(o < i))
            for (var a = i + 1; a <= o; a++)
              rh({
                observable: e,
                key: "" + (a - 1),
                oldValue: void 0,
                type: "delete"
              });
        } else
          rh({
            observable: e,
            key: n,
            value: i,
            oldValue: o,
            type: "update"
          });
      return l;
    });
  },
  deleteProperty: function(e, n) {
    return s0(function() {
      if (typeof n == "symbol")
        return Reflect.deleteProperty(e, n);
      var i = Object.hasOwnProperty.call(e, n), r = Reflect.get(e, n), s = Reflect.deleteProperty(e, n);
      return i && rh({
        observable: e,
        key: n,
        oldValue: r,
        type: "delete"
      }), s;
    });
  },
  preventExtensions: function(e) {
    throw new Error("Dynamic observable objects cannot be frozen");
  }
};
function Wne(t, e) {
  var n = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, e), i = new tg(t, n);
  return i;
}
function qne(t, e, n) {
  var i = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, n), r = new tg(function() {
    t(e);
  }, i);
  return e = Ga(e, r), e.bla = 4, i.fireImmediately && r.trigger(), r;
}
var HM = /* @__PURE__ */ function() {
  function t() {
    this._observable = Ga({
      _key: 1
    });
  }
  var e = t.prototype;
  return e.reportObserved = function(i) {
    return Ga(this._observable, i)._key;
  }, e.reportChanged = function() {
    this._observable._key++;
  }, t;
}();
function Jne(t, e, n) {
  return new HM();
}
const Kne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  $reactive: ni,
  $reactiveproxy: kr,
  $skipreactive: o_,
  Atom: HM,
  Observer: s_,
  Reaction: tg,
  autorun: Wne,
  autorunAsync: qne,
  createAtom: Jne,
  hasRunningReaction: jM,
  isActionRunning: LM,
  isReactive: nf,
  isTrackingDisabled: xM,
  markRaw: l_,
  reaction: zne,
  reactive: Ga,
  runInAction: s0,
  runningReaction: BM,
  untracked: FM,
  untrackedCB: Vne
}, Symbol.toStringTag, { value: "Module" })), ms = () => /* @__PURE__ */ new Map(), Wd = (t) => {
  const e = ms();
  return t.forEach((n, i) => {
    e.set(i, n);
  }), e;
}, Cr = (t, e, n) => {
  let i = t.get(e);
  return i === void 0 && t.set(e, i = n()), i;
}, Gne = (t, e) => {
  const n = [];
  for (const [i, r] of t)
    n.push(e(r, i));
  return n;
}, Yne = (t, e) => {
  for (const [n, i] of t)
    if (e(i, n))
      return !0;
  return !1;
}, Ou = () => /* @__PURE__ */ new Set(), gm = (t) => t[t.length - 1], Xne = (t, e) => {
  for (let n = 0; n < e.length; n++)
    t.push(e[n]);
}, WM = Array.from;
class ng {
  constructor() {
    this._observers = ms();
  }
  on(e, n) {
    Cr(this._observers, e, Ou).add(n);
  }
  once(e, n) {
    const i = (...r) => {
      this.off(e, i), n(...r);
    };
    this.on(e, i);
  }
  off(e, n) {
    const i = this._observers.get(e);
    i !== void 0 && (i.delete(n), i.size === 0 && this._observers.delete(e));
  }
  emit(e, n) {
    return WM((this._observers.get(e) || ms()).values()).forEach((i) => i(...n));
  }
  destroy() {
    this._observers = ms();
  }
}
const Os = Math.floor, Ih = Math.abs, Qne = Math.log10, a_ = (t, e) => t < e ? t : e, Kl = (t, e) => t > e ? t : e, qM = (t) => t !== 0 ? t < 0 : 1 / t < 0, Zne = String.fromCharCode, $ne = (t) => t.toLowerCase(), eie = /^\s*/g, tie = (t) => t.replace(eie, ""), nie = /([A-Z])/g, m3 = (t, e) => tie(t.replace(nie, (n) => `${e}${$ne(n)}`)), iie = (t) => {
  const e = unescape(encodeURIComponent(t)), n = e.length, i = new Uint8Array(n);
  for (let r = 0; r < n; r++)
    i[r] = e.codePointAt(r);
  return i;
}, Tu = typeof TextEncoder < "u" ? new TextEncoder() : null, rie = (t) => Tu.encode(t), c0 = Tu ? rie : iie;
let Wc = typeof TextDecoder > "u" ? null : new TextDecoder("utf-8", { fatal: !0, ignoreBOM: !0 });
Wc && Wc.decode(new Uint8Array()).length === 1 && (Wc = null);
const b3 = (t) => t === void 0 ? null : t;
class sie {
  constructor() {
    this.map = /* @__PURE__ */ new Map();
  }
  setItem(e, n) {
    this.map.set(e, n);
  }
  getItem(e) {
    return this.map.get(e);
  }
}
let JM = new sie(), KM = !0;
try {
  typeof localStorage < "u" && (JM = localStorage, KM = !1);
} catch {
}
const GM = JM, oie = (t) => KM || addEventListener("storage", t), lie = Object.keys, qd = (t) => lie(t).length, aie = (t, e) => {
  for (const n in t)
    if (!e(t[n], n))
      return !1;
  return !0;
}, YM = (t, e) => Object.prototype.hasOwnProperty.call(t, e), cie = (t, e) => t === e || qd(t) === qd(e) && aie(t, (n, i) => (n !== void 0 || YM(e, i)) && e[i] === n), c_ = (t, e, n = 0) => {
  try {
    for (; n < t.length; n++)
      t[n](...e);
  } finally {
    n < t.length && c_(t, e, n + 1);
  }
}, uie = () => {
}, fie = (t, e) => t === e, qc = (t, e) => {
  if (t == null || e == null)
    return fie(t, e);
  if (t.constructor !== e.constructor)
    return !1;
  if (t === e)
    return !0;
  switch (t.constructor) {
    case ArrayBuffer:
      t = new Uint8Array(t), e = new Uint8Array(e);
    case Uint8Array: {
      if (t.byteLength !== e.byteLength)
        return !1;
      for (let n = 0; n < t.length; n++)
        if (t[n] !== e[n])
          return !1;
      break;
    }
    case Set: {
      if (t.size !== e.size)
        return !1;
      for (const n of t)
        if (!e.has(n))
          return !1;
      break;
    }
    case Map: {
      if (t.size !== e.size)
        return !1;
      for (const n of t.keys())
        if (!e.has(n) || !qc(t.get(n), e.get(n)))
          return !1;
      break;
    }
    case Object:
      if (qd(t) !== qd(e))
        return !1;
      for (const n in t)
        if (!YM(t, n) || !qc(t[n], e[n]))
          return !1;
      break;
    case Array:
      if (t.length !== e.length)
        return !1;
      for (let n = 0; n < t.length; n++)
        if (!qc(t[n], e[n]))
          return !1;
      break;
    default:
      return !1;
  }
  return !0;
}, hie = (t, e) => e.includes(t), Ll = typeof process < "u" && process.release && /node|io\.js/.test(process.release.name), XM = typeof window < "u" && !Ll;
let es;
const die = () => {
  if (es === void 0)
    if (Ll) {
      es = ms();
      const t = process.argv;
      let e = null;
      for (let n = 0; n < t.length; n++) {
        const i = t[n];
        i[0] === "-" ? (e !== null && es.set(e, ""), e = i) : e !== null && (es.set(e, i), e = null);
      }
      e !== null && es.set(e, "");
    } else
      typeof location == "object" ? (es = ms(), (location.search || "?").slice(1).split("&").forEach((t) => {
        if (t.length !== 0) {
          const [e, n] = t.split("=");
          es.set(`--${m3(e, "-")}`, n), es.set(`-${m3(e, "-")}`, n);
        }
      })) : es = ms();
  return es;
}, u0 = (t) => die().has(t), Jd = (t) => b3(Ll ? process.env[t.toUpperCase()] : GM.getItem(t)), pie = (t) => u0("--" + t) || Jd(t) !== null;
pie("production");
const _3 = Ll && hie(process.env.FORCE_COLOR, ["true", "1", "2"]), gie = !u0("no-colors") && (!Ll || process.stdout.isTTY || _3) && (!Ll || u0("color") || _3 || Jd("COLORTERM") !== null || (Jd("TERM") || "").includes("color")), y3 = 1, w3 = 2, mm = 4, bm = 8, Ru = 32, Js = 64, rr = 128, ig = 31, f0 = 63, Cl = 127, mie = 2147483647, QM = Number.MAX_SAFE_INTEGER, bie = Number.isInteger || ((t) => typeof t == "number" && isFinite(t) && Os(t) === t), nl = (t) => new Error(t), bs = () => {
  throw nl("Method unimplemented");
}, Ts = () => {
  throw nl("Unexpected case");
}, ZM = nl("Unexpected end of array"), $M = nl("Integer out of Range");
class rg {
  constructor(e) {
    this.arr = e, this.pos = 0;
  }
}
const js = (t) => new rg(t), _ie = (t) => t.pos !== t.arr.length, yie = (t, e) => {
  const n = h_(t.arr.buffer, t.pos + t.arr.byteOffset, e);
  return t.pos += e, n;
}, ui = (t) => yie(t, Ct(t)), jl = (t) => t.arr[t.pos++], Ct = (t) => {
  let e = 0, n = 1;
  const i = t.arr.length;
  for (; t.pos < i; ) {
    const r = t.arr[t.pos++];
    if (e = e + (r & Cl) * n, n *= 128, r < rr)
      return e;
    if (e > QM)
      throw $M;
  }
  throw ZM;
}, u_ = (t) => {
  let e = t.arr[t.pos++], n = e & f0, i = 64;
  const r = (e & Js) > 0 ? -1 : 1;
  if (!(e & rr))
    return r * n;
  const s = t.arr.length;
  for (; t.pos < s; ) {
    if (e = t.arr[t.pos++], n = n + (e & Cl) * i, i *= 128, e < rr)
      return r * n;
    if (n > QM)
      throw $M;
  }
  throw ZM;
}, wie = (t) => {
  let e = Ct(t);
  if (e === 0)
    return "";
  {
    let n = String.fromCodePoint(jl(t));
    if (--e < 100)
      for (; e--; )
        n += String.fromCodePoint(jl(t));
    else
      for (; e > 0; ) {
        const i = e < 1e4 ? e : 1e4, r = t.arr.subarray(t.pos, t.pos + i);
        t.pos += i, n += String.fromCodePoint.apply(null, r), e -= i;
      }
    return decodeURIComponent(escape(n));
  }
}, vie = (t) => Wc.decode(ui(t)), Ks = Wc ? vie : wie, f_ = (t, e) => {
  const n = new DataView(t.arr.buffer, t.arr.byteOffset + t.pos, e);
  return t.pos += e, n;
}, kie = (t) => f_(t, 4).getFloat32(0, !1), Cie = (t) => f_(t, 8).getFloat64(0, !1), Sie = (t) => f_(t, 8).getBigInt64(0, !1), Eie = [
  (t) => {
  },
  (t) => null,
  u_,
  kie,
  Cie,
  Sie,
  (t) => !1,
  (t) => !0,
  Ks,
  (t) => {
    const e = Ct(t), n = {};
    for (let i = 0; i < e; i++) {
      const r = Ks(t);
      n[r] = Ya(t);
    }
    return n;
  },
  (t) => {
    const e = Ct(t), n = [];
    for (let i = 0; i < e; i++)
      n.push(Ya(t));
    return n;
  },
  ui
], Ya = (t) => Eie[127 - jl(t)](t);
class v3 extends rg {
  constructor(e, n) {
    super(e), this.reader = n, this.s = null, this.count = 0;
  }
  read() {
    return this.count === 0 && (this.s = this.reader(this), _ie(this) ? this.count = Ct(this) + 1 : this.count = -1), this.count--, this.s;
  }
}
class Dh extends rg {
  constructor(e) {
    super(e), this.s = 0, this.count = 0;
  }
  read() {
    if (this.count === 0) {
      this.s = u_(this);
      const e = qM(this.s);
      this.count = 1, e && (this.s = -this.s, this.count = Ct(this) + 2);
    }
    return this.count--, this.s;
  }
}
class _m extends rg {
  constructor(e) {
    super(e), this.s = 0, this.count = 0, this.diff = 0;
  }
  read() {
    if (this.count === 0) {
      const e = u_(this), n = e & 1;
      this.diff = Os(e / 2), this.count = 1, n && (this.count = Ct(this) + 2);
    }
    return this.s += this.diff, this.count--, this.s;
  }
}
class Aie {
  constructor(e) {
    this.decoder = new Dh(e), this.str = Ks(this.decoder), this.spos = 0;
  }
  read() {
    const e = this.spos + this.decoder.read(), n = this.str.slice(this.spos, e);
    return this.spos = e, n;
  }
}
const eO = (t) => new Uint8Array(t), h_ = (t, e, n) => new Uint8Array(t, e, n), Mie = (t) => new Uint8Array(t), Oie = (t) => {
  let e = "";
  for (let n = 0; n < t.byteLength; n++)
    e += Zne(t[n]);
  return btoa(e);
}, Tie = (t) => Buffer.from(t.buffer, t.byteOffset, t.byteLength).toString("base64"), Rie = (t) => {
  const e = atob(t), n = eO(e.length);
  for (let i = 0; i < e.length; i++)
    n[i] = e.charCodeAt(i);
  return n;
}, Pie = (t) => {
  const e = Buffer.from(t, "base64");
  return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
}, tO = XM ? Oie : Tie, nO = XM ? Rie : Pie, Iie = (t) => {
  const e = eO(t.byteLength);
  return e.set(t), e;
};
class rf {
  constructor() {
    this.cpos = 0, this.cbuf = new Uint8Array(100), this.bufs = [];
  }
}
const fi = () => new rf(), Die = (t) => {
  let e = t.cpos;
  for (let n = 0; n < t.bufs.length; n++)
    e += t.bufs[n].length;
  return e;
}, kn = (t) => {
  const e = new Uint8Array(Die(t));
  let n = 0;
  for (let i = 0; i < t.bufs.length; i++) {
    const r = t.bufs[i];
    e.set(r, n), n += r.length;
  }
  return e.set(h_(t.cbuf.buffer, 0, t.cpos), n), e;
}, Nie = (t, e) => {
  const n = t.cbuf.length;
  n - t.cpos < e && (t.bufs.push(h_(t.cbuf.buffer, 0, t.cpos)), t.cbuf = new Uint8Array(Kl(n, e) * 2), t.cpos = 0);
}, ci = (t, e) => {
  const n = t.cbuf.length;
  t.cpos === n && (t.bufs.push(t.cbuf), t.cbuf = new Uint8Array(n * 2), t.cpos = 0), t.cbuf[t.cpos++] = e;
}, Pu = ci, ct = (t, e) => {
  for (; e > Cl; )
    ci(t, rr | Cl & e), e = Os(e / 128);
  ci(t, Cl & e);
}, d_ = (t, e) => {
  const n = qM(e);
  for (n && (e = -e), ci(t, (e > f0 ? rr : 0) | (n ? Js : 0) | f0 & e), e = Os(e / 64); e > 0; )
    ci(t, (e > Cl ? rr : 0) | Cl & e), e = Os(e / 128);
}, h0 = new Uint8Array(3e4), Lie = h0.length / 3, jie = (t, e) => {
  if (e.length < Lie) {
    const n = Tu.encodeInto(e, h0).written || 0;
    ct(t, n);
    for (let i = 0; i < n; i++)
      ci(t, h0[i]);
  } else
    Dn(t, c0(e));
}, Bie = (t, e) => {
  const n = unescape(encodeURIComponent(e)), i = n.length;
  ct(t, i);
  for (let r = 0; r < i; r++)
    ci(t, n.codePointAt(r));
}, _s = Tu && Tu.encodeInto ? jie : Bie, sg = (t, e) => {
  const n = t.cbuf.length, i = t.cpos, r = a_(n - i, e.length), s = e.length - r;
  t.cbuf.set(e.subarray(0, r), i), t.cpos += r, s > 0 && (t.bufs.push(t.cbuf), t.cbuf = new Uint8Array(Kl(n * 2, s)), t.cbuf.set(e.subarray(r)), t.cpos = s);
}, Dn = (t, e) => {
  ct(t, e.byteLength), sg(t, e);
}, p_ = (t, e) => {
  Nie(t, e);
  const n = new DataView(t.cbuf.buffer, t.cpos, e);
  return t.cpos += e, n;
}, xie = (t, e) => p_(t, 4).setFloat32(0, e, !1), Fie = (t, e) => p_(t, 8).setFloat64(0, e, !1), zie = (t, e) => p_(t, 8).setBigInt64(0, e, !1), k3 = new DataView(new ArrayBuffer(4)), Vie = (t) => (k3.setFloat32(0, t), k3.getFloat32(0) === t), Xa = (t, e) => {
  switch (typeof e) {
    case "string":
      ci(t, 119), _s(t, e);
      break;
    case "number":
      bie(e) && Ih(e) <= mie ? (ci(t, 125), d_(t, e)) : Vie(e) ? (ci(t, 124), xie(t, e)) : (ci(t, 123), Fie(t, e));
      break;
    case "bigint":
      ci(t, 122), zie(t, e);
      break;
    case "object":
      if (e === null)
        ci(t, 126);
      else if (e instanceof Array) {
        ci(t, 117), ct(t, e.length);
        for (let n = 0; n < e.length; n++)
          Xa(t, e[n]);
      } else if (e instanceof Uint8Array)
        ci(t, 116), Dn(t, e);
      else {
        ci(t, 118);
        const n = Object.keys(e);
        ct(t, n.length);
        for (let i = 0; i < n.length; i++) {
          const r = n[i];
          _s(t, r), Xa(t, e[r]);
        }
      }
      break;
    case "boolean":
      ci(t, e ? 120 : 121);
      break;
    default:
      ci(t, 127);
  }
};
class C3 extends rf {
  constructor(e) {
    super(), this.w = e, this.s = null, this.count = 0;
  }
  write(e) {
    this.s === e ? this.count++ : (this.count > 0 && ct(this, this.count - 1), this.count = 1, this.w(this, e), this.s = e);
  }
}
const S3 = (t) => {
  t.count > 0 && (d_(t.encoder, t.count === 1 ? t.s : -t.s), t.count > 1 && ct(t.encoder, t.count - 2));
};
class Nh {
  constructor() {
    this.encoder = new rf(), this.s = 0, this.count = 0;
  }
  write(e) {
    this.s === e ? this.count++ : (S3(this), this.count = 1, this.s = e);
  }
  toUint8Array() {
    return S3(this), kn(this.encoder);
  }
}
const E3 = (t) => {
  if (t.count > 0) {
    const e = t.diff * 2 + (t.count === 1 ? 0 : 1);
    d_(t.encoder, e), t.count > 1 && ct(t.encoder, t.count - 2);
  }
};
class ym {
  constructor() {
    this.encoder = new rf(), this.s = 0, this.count = 0, this.diff = 0;
  }
  write(e) {
    this.diff === e - this.s ? (this.s = e, this.count++) : (E3(this), this.count = 1, this.diff = e - this.s, this.s = e);
  }
  toUint8Array() {
    return E3(this), kn(this.encoder);
  }
}
class Uie {
  constructor() {
    this.sarr = [], this.s = "", this.lensE = new Nh();
  }
  write(e) {
    this.s += e, this.s.length > 19 && (this.sarr.push(this.s), this.s = ""), this.lensE.write(e.length);
  }
  toUint8Array() {
    const e = new rf();
    return this.sarr.push(this.s), this.s = "", _s(e, this.sarr.join("")), sg(e, this.lensE.toUint8Array()), kn(e);
  }
}
const A3 = typeof crypto > "u" ? null : crypto, Hie = A3 !== null ? (t) => {
  const e = new ArrayBuffer(t), n = new Uint8Array(e);
  return A3.getRandomValues(n), e;
} : (t) => {
  const e = new ArrayBuffer(t), n = new Uint8Array(e);
  for (let i = 0; i < t; i++)
    n[i] = Math.ceil(Math.random() * 4294967295 >>> 0);
  return e;
}, Wie = Math.random, iO = () => new Uint32Array(Hie(4))[0], qie = [1e7] + -1e3 + -4e3 + -8e3 + -1e11, rO = () => qie.replace(
  /[018]/g,
  (t) => (t ^ iO() & 15 >> t / 4).toString(16)
), to = Date.now, M3 = (t) => new Promise(t), Jie = (t) => Promise.reject(t), g_ = (t) => Promise.resolve(t), oo = Symbol;
class Kie {
  constructor(e, n) {
    this.left = e, this.right = n;
  }
}
const xs = (t, e) => new Kie(t, e), Gl = typeof document < "u" ? document : {};
typeof DOMParser < "u" && new DOMParser();
const Gie = (t) => Gne(t, (e, n) => `${n}:${e};`).join("");
Gl.ELEMENT_NODE;
Gl.TEXT_NODE;
Gl.CDATA_SECTION_NODE;
Gl.COMMENT_NODE;
Gl.DOCUMENT_NODE;
Gl.DOCUMENT_TYPE_NODE;
Gl.DOCUMENT_FRAGMENT_NODE;
const nr = oo(), qo = oo(), m_ = oo(), og = oo(), b_ = oo(), __ = oo(), y_ = oo(), lg = oo(), sf = oo(), Yie = {
  [nr]: xs("font-weight", "bold"),
  [qo]: xs("font-weight", "normal"),
  [m_]: xs("color", "blue"),
  [b_]: xs("color", "green"),
  [og]: xs("color", "grey"),
  [__]: xs("color", "red"),
  [y_]: xs("color", "purple"),
  [lg]: xs("color", "orange"),
  [sf]: xs("color", "black")
}, sO = {
  [nr]: "\x1B[1m",
  [qo]: "\x1B[2m",
  [m_]: "\x1B[34m",
  [b_]: "\x1B[32m",
  [og]: "\x1B[37m",
  [__]: "\x1B[31m",
  [y_]: "\x1B[35m",
  [lg]: "\x1B[38;5;208m",
  [sf]: "\x1B[0m"
}, Xie = (t) => {
  const e = [], n = [], i = ms();
  let r = [], s = 0;
  for (; s < t.length; s++) {
    const o = t[s], l = Yie[o];
    if (l !== void 0)
      i.set(l.left, l.right);
    else if (o.constructor === String || o.constructor === Number) {
      const a = Gie(i);
      s > 0 || a.length > 0 ? (e.push("%c" + o), n.push(a)) : e.push(o);
    } else
      break;
  }
  for (s > 0 && (r = n, r.unshift(e.join(""))); s < t.length; s++) {
    const o = t[s];
    o instanceof Symbol || r.push(o);
  }
  return r;
}, Qie = (t) => {
  const e = [], n = [];
  let i = 0;
  for (; i < t.length; i++) {
    const r = t[i];
    if (sO[r] === void 0)
      if (r.constructor === String || r.constructor === Number)
        e.push(r);
      else
        break;
  }
  for (i > 0 && n.push(e.join("")); i < t.length; i++) {
    const r = t[i];
    r instanceof Symbol || (r.constructor === Object ? n.push(JSON.stringify(r)) : n.push(r));
  }
  return n;
}, Zie = (t) => {
  const e = [], n = [];
  let i = 0;
  for (; i < t.length; i++) {
    const r = t[i], s = sO[r];
    if (s !== void 0)
      e.push(s);
    else if (r.constructor === String || r.constructor === Number)
      e.push(r);
    else
      break;
  }
  for (i > 0 && (e.push("\x1B[0m"), n.push(e.join(""))); i < t.length; i++) {
    const r = t[i];
    r instanceof Symbol || n.push(r);
  }
  return n;
}, $ie = gie ? Ll ? Zie : Xie : Qie, oO = (...t) => {
  console.log(...$ie(t)), ere.forEach((e) => e.print(t));
}, ere = /* @__PURE__ */ new Set(), O3 = [b_, y_, lg, m_];
let wm = 0, T3 = to();
const tre = (t) => {
  const e = O3[wm], n = Jd("log"), i = n !== null && (n === "*" || n === "true" || new RegExp(n, "gi").test(t));
  return wm = (wm + 1) % O3.length, t += ": ", i ? (...r) => {
    const s = to(), o = s - T3;
    T3 = s, oO(
      e,
      t,
      sf,
      ...r.map(
        (l) => typeof l == "string" || typeof l == "symbol" ? l : JSON.stringify(l)
      ),
      e,
      " +" + o + "ms"
    );
  } : uie;
}, lO = (t) => ({
  [Symbol.iterator]() {
    return this;
  },
  next: t
}), nre = (t, e) => lO(() => {
  let n;
  do
    n = t.next();
  while (!n.done && !e(n.value));
  return n;
}), vm = (t, e) => lO(() => {
  const { done: n, value: i } = t.next();
  return { done: n, value: n ? void 0 : e(i) };
});
class w_ {
  constructor(e, n) {
    this.clock = e, this.len = n;
  }
}
class of {
  constructor() {
    this.clients = /* @__PURE__ */ new Map();
  }
}
const d0 = (t, e, n) => e.clients.forEach((i, r) => {
  const s = t.doc.store.clients.get(r);
  for (let o = 0; o < i.length; o++) {
    const l = i[o];
    vO(t, s, l.clock, l.len, n);
  }
}), ire = (t, e) => {
  let n = 0, i = t.length - 1;
  for (; n <= i; ) {
    const r = Os((n + i) / 2), s = t[r], o = s.clock;
    if (o <= e) {
      if (e < o + s.len)
        return r;
      n = r + 1;
    } else
      i = r - 1;
  }
  return null;
}, aO = (t, e) => {
  const n = t.clients.get(e.client);
  return n !== void 0 && ire(n, e.clock) !== null;
}, v_ = (t) => {
  t.clients.forEach((e) => {
    e.sort((r, s) => r.clock - s.clock);
    let n, i;
    for (n = 1, i = 1; n < e.length; n++) {
      const r = e[i - 1], s = e[n];
      r.clock + r.len >= s.clock ? r.len = Kl(r.len, s.clock + s.len - r.clock) : (i < n && (e[i] = s), i++);
    }
    e.length = i;
  });
}, rre = (t) => {
  const e = new of();
  for (let n = 0; n < t.length; n++)
    t[n].clients.forEach((i, r) => {
      if (!e.clients.has(r)) {
        const s = i.slice();
        for (let o = n + 1; o < t.length; o++)
          Xne(s, t[o].clients.get(r) || []);
        e.clients.set(r, s);
      }
    });
  return v_(e), e;
}, Kd = (t, e, n, i) => {
  Cr(t.clients, e, () => []).push(new w_(n, i));
}, cO = () => new of(), sre = (t) => {
  const e = cO();
  return t.clients.forEach((n, i) => {
    const r = [];
    for (let s = 0; s < n.length; s++) {
      const o = n[s];
      if (o.deleted) {
        const l = o.id.clock;
        let a = o.length;
        if (s + 1 < n.length)
          for (let c = n[s + 1]; s + 1 < n.length && c.deleted; c = n[++s + 1])
            a += c.length;
        r.push(new w_(l, a));
      }
    }
    r.length > 0 && e.clients.set(i, r);
  }), e;
}, fc = (t, e) => {
  ct(t.restEncoder, e.clients.size), e.clients.forEach((n, i) => {
    t.resetDsCurVal(), ct(t.restEncoder, i);
    const r = n.length;
    ct(t.restEncoder, r);
    for (let s = 0; s < r; s++) {
      const o = n[s];
      t.writeDsClock(o.clock), t.writeDsLen(o.len);
    }
  });
}, k_ = (t) => {
  const e = new of(), n = Ct(t.restDecoder);
  for (let i = 0; i < n; i++) {
    t.resetDsCurVal();
    const r = Ct(t.restDecoder), s = Ct(t.restDecoder);
    if (s > 0) {
      const o = Cr(e.clients, r, () => []);
      for (let l = 0; l < s; l++)
        o.push(new w_(t.readDsClock(), t.readDsLen()));
    }
  }
  return e;
}, R3 = (t, e, n) => {
  const i = new of(), r = Ct(t.restDecoder);
  for (let s = 0; s < r; s++) {
    t.resetDsCurVal();
    const o = Ct(t.restDecoder), l = Ct(t.restDecoder), a = n.clients.get(o) || [], c = pi(n, o);
    for (let u = 0; u < l; u++) {
      const f = t.readDsClock(), h = f + t.readDsLen();
      if (f < c) {
        c < h && Kd(i, o, c, h - c);
        let d = Ur(a, f), p = a[d];
        for (!p.deleted && p.id.clock < f && (a.splice(d + 1, 0, Zd(e, p, f - p.id.clock)), d++); d < a.length && (p = a[d++], p.id.clock < h); )
          p.deleted || (h < p.id.clock + p.length && a.splice(d, 0, Zd(e, p, h - p.id.clock)), p.delete(e));
      } else
        Kd(i, o, f, h - f);
    }
  }
  if (i.clients.size > 0) {
    const s = new Bl();
    return ct(s.restEncoder, 0), fc(s, i), s.toUint8Array();
  }
  return null;
}, uO = iO;
class il extends ng {
  constructor({ guid: e = rO(), collectionid: n = null, gc: i = !0, gcFilter: r = () => !0, meta: s = null, autoLoad: o = !1, shouldLoad: l = !0 } = {}) {
    super(), this.gc = i, this.gcFilter = r, this.clientID = uO(), this.guid = e, this.collectionid = n, this.share = /* @__PURE__ */ new Map(), this.store = new yO(), this._transaction = null, this._transactionCleanups = [], this.subdocs = /* @__PURE__ */ new Set(), this._item = null, this.shouldLoad = l, this.autoLoad = o, this.meta = s, this.isLoaded = !1, this.isSynced = !1, this.whenLoaded = M3((c) => {
      this.on("load", () => {
        this.isLoaded = !0, c(this);
      });
    });
    const a = () => M3((c) => {
      const u = (f) => {
        (f === void 0 || f === !0) && (this.off("sync", u), c());
      };
      this.on("sync", u);
    });
    this.on("sync", (c) => {
      c === !1 && this.isSynced && (this.whenSynced = a()), this.isSynced = c === void 0 || c === !0, this.isLoaded || this.emit("load", []);
    }), this.whenSynced = a();
  }
  load() {
    const e = this._item;
    e !== null && !this.shouldLoad && sn(e.parent.doc, (n) => {
      n.subdocsLoaded.add(this);
    }, null, !0), this.shouldLoad = !0;
  }
  getSubdocs() {
    return this.subdocs;
  }
  getSubdocGuids() {
    return new Set(Array.from(this.subdocs).map((e) => e.guid));
  }
  transact(e, n = null) {
    sn(this, e, n);
  }
  get(e, n = jn) {
    const i = Cr(this.share, e, () => {
      const s = new n();
      return s._integrate(this, null), s;
    }), r = i.constructor;
    if (n !== jn && r !== n)
      if (r === jn) {
        const s = new n();
        s._map = i._map, i._map.forEach((o) => {
          for (; o !== null; o = o.left)
            o.parent = s;
        }), s._start = i._start;
        for (let o = s._start; o !== null; o = o.right)
          o.parent = s;
        return s._length = i._length, this.share.set(e, s), s._integrate(this, null), s;
      } else
        throw new Error(`Type with the name ${e} has already been defined with a different constructor`);
    return i;
  }
  getArray(e = "") {
    return this.get(e, ys);
  }
  getText(e = "") {
    return this.get(e, no);
  }
  getMap(e = "") {
    return this.get(e, Rs);
  }
  getXmlFragment(e = "") {
    return this.get(e, Ps);
  }
  toJSON() {
    const e = {};
    return this.share.forEach((n, i) => {
      e[i] = n.toJSON();
    }), e;
  }
  destroy() {
    WM(this.subdocs).forEach((n) => n.destroy());
    const e = this._item;
    if (e !== null) {
      this._item = null;
      const n = e.content;
      n.doc = new il({ guid: this.guid, ...n.opts, shouldLoad: !1 }), n.doc._item = e, sn(e.parent.doc, (i) => {
        const r = n.doc;
        e.deleted || i.subdocsAdded.add(r), i.subdocsRemoved.add(this);
      }, null, !0);
    }
    this.emit("destroyed", [!0]), this.emit("destroy", [this]), super.destroy();
  }
  on(e, n) {
    super.on(e, n);
  }
  off(e, n) {
    super.off(e, n);
  }
}
class fO {
  constructor(e) {
    this.restDecoder = e;
  }
  resetDsCurVal() {
  }
  readDsClock() {
    return Ct(this.restDecoder);
  }
  readDsLen() {
    return Ct(this.restDecoder);
  }
}
class hO extends fO {
  readLeftID() {
    return jt(Ct(this.restDecoder), Ct(this.restDecoder));
  }
  readRightID() {
    return jt(Ct(this.restDecoder), Ct(this.restDecoder));
  }
  readClient() {
    return Ct(this.restDecoder);
  }
  readInfo() {
    return jl(this.restDecoder);
  }
  readString() {
    return Ks(this.restDecoder);
  }
  readParentInfo() {
    return Ct(this.restDecoder) === 1;
  }
  readTypeRef() {
    return Ct(this.restDecoder);
  }
  readLen() {
    return Ct(this.restDecoder);
  }
  readAny() {
    return Ya(this.restDecoder);
  }
  readBuf() {
    return Iie(ui(this.restDecoder));
  }
  readJSON() {
    return JSON.parse(Ks(this.restDecoder));
  }
  readKey() {
    return Ks(this.restDecoder);
  }
}
class ore {
  constructor(e) {
    this.dsCurrVal = 0, this.restDecoder = e;
  }
  resetDsCurVal() {
    this.dsCurrVal = 0;
  }
  readDsClock() {
    return this.dsCurrVal += Ct(this.restDecoder), this.dsCurrVal;
  }
  readDsLen() {
    const e = Ct(this.restDecoder) + 1;
    return this.dsCurrVal += e, e;
  }
}
class Qa extends ore {
  constructor(e) {
    super(e), this.keys = [], Ct(e), this.keyClockDecoder = new _m(ui(e)), this.clientDecoder = new Dh(ui(e)), this.leftClockDecoder = new _m(ui(e)), this.rightClockDecoder = new _m(ui(e)), this.infoDecoder = new v3(ui(e), jl), this.stringDecoder = new Aie(ui(e)), this.parentInfoDecoder = new v3(ui(e), jl), this.typeRefDecoder = new Dh(ui(e)), this.lenDecoder = new Dh(ui(e));
  }
  readLeftID() {
    return new ka(this.clientDecoder.read(), this.leftClockDecoder.read());
  }
  readRightID() {
    return new ka(this.clientDecoder.read(), this.rightClockDecoder.read());
  }
  readClient() {
    return this.clientDecoder.read();
  }
  readInfo() {
    return this.infoDecoder.read();
  }
  readString() {
    return this.stringDecoder.read();
  }
  readParentInfo() {
    return this.parentInfoDecoder.read() === 1;
  }
  readTypeRef() {
    return this.typeRefDecoder.read();
  }
  readLen() {
    return this.lenDecoder.read();
  }
  readAny() {
    return Ya(this.restDecoder);
  }
  readBuf() {
    return ui(this.restDecoder);
  }
  readJSON() {
    return Ya(this.restDecoder);
  }
  readKey() {
    const e = this.keyClockDecoder.read();
    if (e < this.keys.length)
      return this.keys[e];
    {
      const n = this.stringDecoder.read();
      return this.keys.push(n), n;
    }
  }
}
class dO {
  constructor() {
    this.restEncoder = fi();
  }
  toUint8Array() {
    return kn(this.restEncoder);
  }
  resetDsCurVal() {
  }
  writeDsClock(e) {
    ct(this.restEncoder, e);
  }
  writeDsLen(e) {
    ct(this.restEncoder, e);
  }
}
class lf extends dO {
  writeLeftID(e) {
    ct(this.restEncoder, e.client), ct(this.restEncoder, e.clock);
  }
  writeRightID(e) {
    ct(this.restEncoder, e.client), ct(this.restEncoder, e.clock);
  }
  writeClient(e) {
    ct(this.restEncoder, e);
  }
  writeInfo(e) {
    Pu(this.restEncoder, e);
  }
  writeString(e) {
    _s(this.restEncoder, e);
  }
  writeParentInfo(e) {
    ct(this.restEncoder, e ? 1 : 0);
  }
  writeTypeRef(e) {
    ct(this.restEncoder, e);
  }
  writeLen(e) {
    ct(this.restEncoder, e);
  }
  writeAny(e) {
    Xa(this.restEncoder, e);
  }
  writeBuf(e) {
    Dn(this.restEncoder, e);
  }
  writeJSON(e) {
    _s(this.restEncoder, JSON.stringify(e));
  }
  writeKey(e) {
    _s(this.restEncoder, e);
  }
}
class pO {
  constructor() {
    this.restEncoder = fi(), this.dsCurrVal = 0;
  }
  toUint8Array() {
    return kn(this.restEncoder);
  }
  resetDsCurVal() {
    this.dsCurrVal = 0;
  }
  writeDsClock(e) {
    const n = e - this.dsCurrVal;
    this.dsCurrVal = e, ct(this.restEncoder, n);
  }
  writeDsLen(e) {
    e === 0 && Ts(), ct(this.restEncoder, e - 1), this.dsCurrVal += e;
  }
}
class Bl extends pO {
  constructor() {
    super(), this.keyMap = /* @__PURE__ */ new Map(), this.keyClock = 0, this.keyClockEncoder = new ym(), this.clientEncoder = new Nh(), this.leftClockEncoder = new ym(), this.rightClockEncoder = new ym(), this.infoEncoder = new C3(Pu), this.stringEncoder = new Uie(), this.parentInfoEncoder = new C3(Pu), this.typeRefEncoder = new Nh(), this.lenEncoder = new Nh();
  }
  toUint8Array() {
    const e = fi();
    return ct(e, 0), Dn(e, this.keyClockEncoder.toUint8Array()), Dn(e, this.clientEncoder.toUint8Array()), Dn(e, this.leftClockEncoder.toUint8Array()), Dn(e, this.rightClockEncoder.toUint8Array()), Dn(e, kn(this.infoEncoder)), Dn(e, this.stringEncoder.toUint8Array()), Dn(e, kn(this.parentInfoEncoder)), Dn(e, this.typeRefEncoder.toUint8Array()), Dn(e, this.lenEncoder.toUint8Array()), sg(e, kn(this.restEncoder)), kn(e);
  }
  writeLeftID(e) {
    this.clientEncoder.write(e.client), this.leftClockEncoder.write(e.clock);
  }
  writeRightID(e) {
    this.clientEncoder.write(e.client), this.rightClockEncoder.write(e.clock);
  }
  writeClient(e) {
    this.clientEncoder.write(e);
  }
  writeInfo(e) {
    this.infoEncoder.write(e);
  }
  writeString(e) {
    this.stringEncoder.write(e);
  }
  writeParentInfo(e) {
    this.parentInfoEncoder.write(e ? 1 : 0);
  }
  writeTypeRef(e) {
    this.typeRefEncoder.write(e);
  }
  writeLen(e) {
    this.lenEncoder.write(e);
  }
  writeAny(e) {
    Xa(this.restEncoder, e);
  }
  writeBuf(e) {
    Dn(this.restEncoder, e);
  }
  writeJSON(e) {
    Xa(this.restEncoder, e);
  }
  writeKey(e) {
    const n = this.keyMap.get(e);
    n === void 0 ? (this.keyClockEncoder.write(this.keyClock++), this.stringEncoder.write(e)) : this.keyClockEncoder.write(n);
  }
}
const lre = (t, e, n, i) => {
  i = Kl(i, e[0].id.clock);
  const r = Ur(e, i);
  ct(t.restEncoder, e.length - r), t.writeClient(n), ct(t.restEncoder, i);
  const s = e[r];
  s.write(t, i - s.id.clock);
  for (let o = r + 1; o < e.length; o++)
    e[o].write(t, 0);
}, C_ = (t, e, n) => {
  const i = /* @__PURE__ */ new Map();
  n.forEach((r, s) => {
    pi(e, s) > r && i.set(s, r);
  }), ag(e).forEach((r, s) => {
    n.has(s) || i.set(s, 0);
  }), ct(t.restEncoder, i.size), Array.from(i.entries()).sort((r, s) => s[0] - r[0]).forEach(([r, s]) => {
    lre(t, e.clients.get(r), r, s);
  });
}, are = (t, e) => {
  const n = ms(), i = Ct(t.restDecoder);
  for (let r = 0; r < i; r++) {
    const s = Ct(t.restDecoder), o = new Array(s), l = t.readClient();
    let a = Ct(t.restDecoder);
    n.set(l, { i: 0, refs: o });
    for (let c = 0; c < s; c++) {
      const u = t.readInfo();
      switch (ig & u) {
        case 0: {
          const f = t.readLen();
          o[c] = new er(jt(l, a), f), a += f;
          break;
        }
        case 10: {
          const f = Ct(t.restDecoder);
          o[c] = new hr(jt(l, a), f), a += f;
          break;
        }
        default: {
          const f = (u & (Js | rr)) === 0, h = new ei(
            jt(l, a),
            null,
            (u & rr) === rr ? t.readLeftID() : null,
            null,
            (u & Js) === Js ? t.readRightID() : null,
            f ? t.readParentInfo() ? e.get(t.readString()) : t.readLeftID() : null,
            f && (u & Ru) === Ru ? t.readString() : null,
            zO(t, u)
          );
          o[c] = h, a += h.length;
        }
      }
    }
  }
  return n;
}, cre = (t, e, n) => {
  const i = [];
  let r = Array.from(n.keys()).sort((d, p) => d - p);
  if (r.length === 0)
    return null;
  const s = () => {
    if (r.length === 0)
      return null;
    let d = n.get(r[r.length - 1]);
    for (; d.refs.length === d.i; )
      if (r.pop(), r.length > 0)
        d = n.get(r[r.length - 1]);
      else
        return null;
    return d;
  };
  let o = s();
  if (o === null && i.length === 0)
    return null;
  const l = new yO(), a = /* @__PURE__ */ new Map(), c = (d, p) => {
    const g = a.get(d);
    (g == null || g > p) && a.set(d, p);
  };
  let u = o.refs[o.i++];
  const f = /* @__PURE__ */ new Map(), h = () => {
    for (const d of i) {
      const p = d.id.client, g = n.get(p);
      g ? (g.i--, l.clients.set(p, g.refs.slice(g.i)), n.delete(p), g.i = 0, g.refs = []) : l.clients.set(p, [d]), r = r.filter((_) => _ !== p);
    }
    i.length = 0;
  };
  for (; ; ) {
    if (u.constructor !== hr) {
      const p = Cr(f, u.id.client, () => pi(e, u.id.client)) - u.id.clock;
      if (p < 0)
        i.push(u), c(u.id.client, u.id.clock - 1), h();
      else {
        const g = u.getMissing(t, e);
        if (g !== null) {
          i.push(u);
          const _ = n.get(g) || { refs: [], i: 0 };
          if (_.refs.length === _.i)
            c(g, pi(e, g)), h();
          else {
            u = _.refs[_.i++];
            continue;
          }
        } else
          (p === 0 || p < u.length) && (u.integrate(t, p), f.set(u.id.client, u.id.clock + u.length));
      }
    }
    if (i.length > 0)
      u = i.pop();
    else if (o !== null && o.i < o.refs.length)
      u = o.refs[o.i++];
    else {
      if (o = s(), o === null)
        break;
      u = o.refs[o.i++];
    }
  }
  if (l.clients.size > 0) {
    const d = new Bl();
    return C_(d, l, /* @__PURE__ */ new Map()), ct(d.restEncoder, 0), { missing: a, update: d.toUint8Array() };
  }
  return null;
}, ure = (t, e) => C_(t, e.doc.store, e.beforeState), fre = (t, e, n, i = new Qa(t)) => sn(e, (r) => {
  r.local = !1;
  let s = !1;
  const o = r.doc, l = o.store, a = are(i, o), c = cre(r, l, a), u = l.pendingStructs;
  if (u) {
    for (const [h, d] of u.missing)
      if (d < pi(l, h)) {
        s = !0;
        break;
      }
    if (c) {
      for (const [h, d] of c.missing) {
        const p = u.missing.get(h);
        (p == null || p > d) && u.missing.set(h, d);
      }
      u.update = Gd([u.update, c.update]);
    }
  } else
    l.pendingStructs = c;
  const f = R3(i, r, l);
  if (l.pendingDs) {
    const h = new Qa(js(l.pendingDs));
    Ct(h.restDecoder);
    const d = R3(h, r, l);
    f && d ? l.pendingDs = Gd([f, d]) : l.pendingDs = f || d;
  } else
    l.pendingDs = f;
  if (s) {
    const h = l.pendingStructs.update;
    l.pendingStructs = null, gO(r.doc, h);
  }
}, n, !1), gO = (t, e, n, i = Qa) => {
  const r = js(e);
  fre(r, t, n, new i(r));
}, hre = (t, e, n) => gO(t, e, n, hO), dre = (t, e, n = /* @__PURE__ */ new Map()) => {
  C_(t, e.store, n), fc(t, sre(e.store));
}, pre = (t, e = new Uint8Array([0]), n = new Bl()) => {
  const i = mO(e);
  dre(n, t, i);
  const r = [n.toUint8Array()];
  if (t.store.pendingDs && r.push(t.store.pendingDs), t.store.pendingStructs && r.push(Ire(t.store.pendingStructs.update, e)), r.length > 1) {
    if (n.constructor === lf)
      return Rre(r.map((s, o) => o === 0 ? s : Nre(s)));
    if (n.constructor === Bl)
      return Gd(r);
  }
  return r[0];
}, gre = (t, e) => pre(t, e, new lf()), mre = (t) => {
  const e = /* @__PURE__ */ new Map(), n = Ct(t.restDecoder);
  for (let i = 0; i < n; i++) {
    const r = Ct(t.restDecoder), s = Ct(t.restDecoder);
    e.set(r, s);
  }
  return e;
}, mO = (t) => mre(new fO(js(t))), bO = (t, e) => (ct(t.restEncoder, e.size), Array.from(e.entries()).sort((n, i) => i[0] - n[0]).forEach(([n, i]) => {
  ct(t.restEncoder, n), ct(t.restEncoder, i);
}), t), bre = (t, e) => bO(t, ag(e.store)), _re = (t, e = new pO()) => (t instanceof Map ? bO(e, t) : bre(e, t), e.toUint8Array()), yre = (t) => _re(t, new dO());
class wre {
  constructor() {
    this.l = [];
  }
}
const P3 = () => new wre(), I3 = (t, e) => t.l.push(e), D3 = (t, e) => {
  const n = t.l, i = n.length;
  t.l = n.filter((r) => e !== r), i === t.l.length && console.error("[yjs] Tried to remove event handler that doesn't exist.");
}, _O = (t, e, n) => c_(t.l, [e, n]);
class ka {
  constructor(e, n) {
    this.client = e, this.clock = n;
  }
}
const oh = (t, e) => t === e || t !== null && e !== null && t.client === e.client && t.clock === e.clock, jt = (t, e) => new ka(t, e), vre = (t) => {
  for (const [e, n] of t.doc.share.entries())
    if (n === t)
      return e;
  throw Ts();
};
class kre {
  constructor(e, n) {
    this.ds = e, this.sv = n;
  }
}
const Cre = (t, e) => new kre(t, e);
Cre(cO(), /* @__PURE__ */ new Map());
const Cc = (t, e) => e === void 0 ? !t.deleted : e.sv.has(t.id.client) && (e.sv.get(t.id.client) || 0) > t.id.clock && !aO(e.ds, t.id), p0 = (t, e) => {
  const n = Cr(t.meta, p0, Ou), i = t.doc.store;
  n.has(e) || (e.sv.forEach((r, s) => {
    r < pi(i, s) && Jo(t, jt(s, r));
  }), d0(t, e.ds, (r) => {
  }), n.add(e));
};
class yO {
  constructor() {
    this.clients = /* @__PURE__ */ new Map(), this.pendingStructs = null, this.pendingDs = null;
  }
}
const ag = (t) => {
  const e = /* @__PURE__ */ new Map();
  return t.clients.forEach((n, i) => {
    const r = n[n.length - 1];
    e.set(i, r.id.clock + r.length);
  }), e;
}, pi = (t, e) => {
  const n = t.clients.get(e);
  if (n === void 0)
    return 0;
  const i = n[n.length - 1];
  return i.id.clock + i.length;
}, wO = (t, e) => {
  let n = t.clients.get(e.id.client);
  if (n === void 0)
    n = [], t.clients.set(e.id.client, n);
  else {
    const i = n[n.length - 1];
    if (i.id.clock + i.length !== e.id.clock)
      throw Ts();
  }
  n.push(e);
}, Ur = (t, e) => {
  let n = 0, i = t.length - 1, r = t[i], s = r.id.clock;
  if (s === e)
    return i;
  let o = Os(e / (s + r.length - 1) * i);
  for (; n <= i; ) {
    if (r = t[o], s = r.id.clock, s <= e) {
      if (e < s + r.length)
        return o;
      n = o + 1;
    } else
      i = o - 1;
    o = Os((n + i) / 2);
  }
  throw Ts();
}, Sre = (t, e) => {
  const n = t.clients.get(e.client);
  return n[Ur(n, e.clock)];
}, km = Sre, g0 = (t, e, n) => {
  const i = Ur(e, n), r = e[i];
  return r.id.clock < n && r instanceof ei ? (e.splice(i + 1, 0, Zd(t, r, n - r.id.clock)), i + 1) : i;
}, Jo = (t, e) => {
  const n = t.doc.store.clients.get(e.client);
  return n[g0(t, n, e.clock)];
}, N3 = (t, e, n) => {
  const i = e.clients.get(n.client), r = Ur(i, n.clock), s = i[r];
  return n.clock !== s.id.clock + s.length - 1 && s.constructor !== er && i.splice(r + 1, 0, Zd(t, s, n.clock - s.id.clock + 1)), s;
}, Ere = (t, e, n) => {
  const i = t.clients.get(e.id.client);
  i[Ur(i, e.id.clock)] = n;
}, vO = (t, e, n, i, r) => {
  if (i === 0)
    return;
  const s = n + i;
  let o = g0(t, e, n), l;
  do
    l = e[o++], s < l.id.clock + l.length && g0(t, e, s), r(l);
  while (o < e.length && e[o].id.clock < s);
};
class Are {
  constructor(e, n, i) {
    this.doc = e, this.deleteSet = new of(), this.beforeState = ag(e.store), this.afterState = /* @__PURE__ */ new Map(), this.changed = /* @__PURE__ */ new Map(), this.changedParentTypes = /* @__PURE__ */ new Map(), this._mergeStructs = [], this.origin = n, this.meta = /* @__PURE__ */ new Map(), this.local = i, this.subdocsAdded = /* @__PURE__ */ new Set(), this.subdocsRemoved = /* @__PURE__ */ new Set(), this.subdocsLoaded = /* @__PURE__ */ new Set();
  }
}
const L3 = (t, e) => e.deleteSet.clients.size === 0 && !Yne(e.afterState, (n, i) => e.beforeState.get(i) !== n) ? !1 : (v_(e.deleteSet), ure(t, e), fc(t, e.deleteSet), !0), j3 = (t, e, n) => {
  const i = e._item;
  (i === null || i.id.clock < (t.beforeState.get(i.id.client) || 0) && !i.deleted) && Cr(t.changed, e, Ou).add(n);
}, Lh = (t, e) => {
  const n = t[e - 1], i = t[e];
  n.deleted === i.deleted && n.constructor === i.constructor && n.mergeWith(i) && (t.splice(e, 1), i instanceof ei && i.parentSub !== null && i.parent._map.get(i.parentSub) === i && i.parent._map.set(i.parentSub, n));
}, Mre = (t, e, n) => {
  for (const [i, r] of t.clients.entries()) {
    const s = e.clients.get(i);
    for (let o = r.length - 1; o >= 0; o--) {
      const l = r[o], a = l.clock + l.len;
      for (let c = Ur(s, l.clock), u = s[c]; c < s.length && u.id.clock < a; u = s[++c]) {
        const f = s[c];
        if (l.clock + l.len <= f.id.clock)
          break;
        f instanceof ei && f.deleted && !f.keep && n(f) && f.gc(e, !1);
      }
    }
  }
}, Ore = (t, e) => {
  t.clients.forEach((n, i) => {
    const r = e.clients.get(i);
    for (let s = n.length - 1; s >= 0; s--) {
      const o = n[s], l = a_(r.length - 1, 1 + Ur(r, o.clock + o.len - 1));
      for (let a = l, c = r[a]; a > 0 && c.id.clock >= o.clock; c = r[--a])
        Lh(r, a);
    }
  });
}, kO = (t, e) => {
  if (e < t.length) {
    const n = t[e], i = n.doc, r = i.store, s = n.deleteSet, o = n._mergeStructs;
    try {
      v_(s), n.afterState = ag(n.doc.store), i.emit("beforeObserverCalls", [n, i]);
      const l = [];
      n.changed.forEach(
        (a, c) => l.push(() => {
          (c._item === null || !c._item.deleted) && c._callObserver(n, a);
        })
      ), l.push(() => {
        n.changedParentTypes.forEach(
          (a, c) => l.push(() => {
            (c._item === null || !c._item.deleted) && (a = a.filter(
              (u) => u.target._item === null || !u.target._item.deleted
            ), a.forEach((u) => {
              u.currentTarget = c;
            }), a.sort((u, f) => u.path.length - f.path.length), _O(c._dEH, a, n));
          })
        ), l.push(() => i.emit("afterTransaction", [n, i]));
      }), c_(l, []);
    } finally {
      i.gc && Mre(s, r, i.gcFilter), Ore(s, r), n.afterState.forEach((u, f) => {
        const h = n.beforeState.get(f) || 0;
        if (h !== u) {
          const d = r.clients.get(f), p = Kl(Ur(d, h), 1);
          for (let g = d.length - 1; g >= p; g--)
            Lh(d, g);
        }
      });
      for (let u = 0; u < o.length; u++) {
        const { client: f, clock: h } = o[u].id, d = r.clients.get(f), p = Ur(d, h);
        p + 1 < d.length && Lh(d, p + 1), p > 0 && Lh(d, p);
      }
      if (!n.local && n.afterState.get(i.clientID) !== n.beforeState.get(i.clientID) && (oO(lg, nr, "[yjs] ", qo, __, "Changed the client-id because another client seems to be using it."), i.clientID = uO()), i.emit("afterTransactionCleanup", [n, i]), i._observers.has("update")) {
        const u = new lf();
        L3(u, n) && i.emit("update", [u.toUint8Array(), n.origin, i, n]);
      }
      if (i._observers.has("updateV2")) {
        const u = new Bl();
        L3(u, n) && i.emit("updateV2", [u.toUint8Array(), n.origin, i, n]);
      }
      const { subdocsAdded: l, subdocsLoaded: a, subdocsRemoved: c } = n;
      (l.size > 0 || c.size > 0 || a.size > 0) && (l.forEach((u) => {
        u.clientID = i.clientID, u.collectionid == null && (u.collectionid = i.collectionid), i.subdocs.add(u);
      }), c.forEach((u) => i.subdocs.delete(u)), i.emit("subdocs", [{ loaded: a, added: l, removed: c }, i, n]), c.forEach((u) => u.destroy())), t.length <= e + 1 ? (i._transactionCleanups = [], i.emit("afterAllTransactions", [i, t])) : kO(t, e + 1);
    }
  }
}, sn = (t, e, n = null, i = !0) => {
  const r = t._transactionCleanups;
  let s = !1;
  t._transaction === null && (s = !0, t._transaction = new Are(t, n, i), r.push(t._transaction), r.length === 1 && t.emit("beforeAllTransactions", [t]), t.emit("beforeTransaction", [t._transaction, t]));
  try {
    e(t._transaction);
  } finally {
    if (s) {
      const o = t._transaction === r[0];
      t._transaction = null, o && kO(r, 0);
    }
  }
};
function* Tre(t) {
  const e = Ct(t.restDecoder);
  for (let n = 0; n < e; n++) {
    const i = Ct(t.restDecoder), r = t.readClient();
    let s = Ct(t.restDecoder);
    for (let o = 0; o < i; o++) {
      const l = t.readInfo();
      if (l === 10) {
        const a = Ct(t.restDecoder);
        yield new hr(jt(r, s), a), s += a;
      } else if (ig & l) {
        const a = (l & (Js | rr)) === 0, c = new ei(
          jt(r, s),
          null,
          (l & rr) === rr ? t.readLeftID() : null,
          null,
          (l & Js) === Js ? t.readRightID() : null,
          a ? t.readParentInfo() ? t.readString() : t.readLeftID() : null,
          a && (l & Ru) === Ru ? t.readString() : null,
          zO(t, l)
        );
        yield c, s += c.length;
      } else {
        const a = t.readLen();
        yield new er(jt(r, s), a), s += a;
      }
    }
  }
}
class S_ {
  constructor(e, n) {
    this.gen = Tre(e), this.curr = null, this.done = !1, this.filterSkips = n, this.next();
  }
  next() {
    do
      this.curr = this.gen.next().value || null;
    while (this.filterSkips && this.curr !== null && this.curr.constructor === hr);
    return this.curr;
  }
}
class E_ {
  constructor(e) {
    this.currClient = 0, this.startClock = 0, this.written = 0, this.encoder = e, this.clientStructs = [];
  }
}
const Rre = (t) => Gd(t, hO, lf), Pre = (t, e) => {
  if (t.constructor === er) {
    const { client: n, clock: i } = t.id;
    return new er(jt(n, i + e), t.length - e);
  } else if (t.constructor === hr) {
    const { client: n, clock: i } = t.id;
    return new hr(jt(n, i + e), t.length - e);
  } else {
    const n = t, { client: i, clock: r } = n.id;
    return new ei(
      jt(i, r + e),
      null,
      jt(i, r + e - 1),
      null,
      n.rightOrigin,
      n.parent,
      n.parentSub,
      n.content.splice(e)
    );
  }
}, Gd = (t, e = Qa, n = Bl) => {
  if (t.length === 1)
    return t[0];
  const i = t.map((u) => new e(js(u)));
  let r = i.map((u) => new S_(u, !0)), s = null;
  const o = new n(), l = new E_(o);
  for (; r = r.filter((h) => h.curr !== null), r.sort(
    (h, d) => {
      if (h.curr.id.client === d.curr.id.client) {
        const p = h.curr.id.clock - d.curr.id.clock;
        return p === 0 ? h.curr.constructor === d.curr.constructor ? 0 : h.curr.constructor === hr ? 1 : -1 : p;
      } else
        return d.curr.id.client - h.curr.id.client;
    }
  ), r.length !== 0; ) {
    const u = r[0], f = u.curr.id.client;
    if (s !== null) {
      let h = u.curr, d = !1;
      for (; h !== null && h.id.clock + h.length <= s.struct.id.clock + s.struct.length && h.id.client >= s.struct.id.client; )
        h = u.next(), d = !0;
      if (h === null || h.id.client !== f || d && h.id.clock > s.struct.id.clock + s.struct.length)
        continue;
      if (f !== s.struct.id.client)
        vo(l, s.struct, s.offset), s = { struct: h, offset: 0 }, u.next();
      else if (s.struct.id.clock + s.struct.length < h.id.clock)
        if (s.struct.constructor === hr)
          s.struct.length = h.id.clock + h.length - s.struct.id.clock;
        else {
          vo(l, s.struct, s.offset);
          const p = h.id.clock - s.struct.id.clock - s.struct.length;
          s = { struct: new hr(jt(f, s.struct.id.clock + s.struct.length), p), offset: 0 };
        }
      else {
        const p = s.struct.id.clock + s.struct.length - h.id.clock;
        p > 0 && (s.struct.constructor === hr ? s.struct.length -= p : h = Pre(h, p)), s.struct.mergeWith(h) || (vo(l, s.struct, s.offset), s = { struct: h, offset: 0 }, u.next());
      }
    } else
      s = { struct: u.curr, offset: 0 }, u.next();
    for (let h = u.curr; h !== null && h.id.client === f && h.id.clock === s.struct.id.clock + s.struct.length && h.constructor !== hr; h = u.next())
      vo(l, s.struct, s.offset), s = { struct: h, offset: 0 };
  }
  s !== null && (vo(l, s.struct, s.offset), s = null), A_(l);
  const a = i.map((u) => k_(u)), c = rre(a);
  return fc(o, c), o.toUint8Array();
}, Ire = (t, e, n = Qa, i = Bl) => {
  const r = mO(e), s = new i(), o = new E_(s), l = new n(js(t)), a = new S_(l, !1);
  for (; a.curr; ) {
    const u = a.curr, f = u.id.client, h = r.get(f) || 0;
    if (a.curr.constructor === hr) {
      a.next();
      continue;
    }
    if (u.id.clock + u.length > h)
      for (vo(o, u, Kl(h - u.id.clock, 0)), a.next(); a.curr && a.curr.id.client === f; )
        vo(o, a.curr, 0), a.next();
    else
      for (; a.curr && a.curr.id.client === f && a.curr.id.clock + a.curr.length <= h; )
        a.next();
  }
  A_(o);
  const c = k_(l);
  return fc(s, c), s.toUint8Array();
}, CO = (t) => {
  t.written > 0 && (t.clientStructs.push({ written: t.written, restEncoder: kn(t.encoder.restEncoder) }), t.encoder.restEncoder = fi(), t.written = 0);
}, vo = (t, e, n) => {
  t.written > 0 && t.currClient !== e.id.client && CO(t), t.written === 0 && (t.currClient = e.id.client, t.encoder.writeClient(e.id.client), ct(t.encoder.restEncoder, e.id.clock + n)), e.write(t.encoder, n), t.written++;
}, A_ = (t) => {
  CO(t);
  const e = t.encoder.restEncoder;
  ct(e, t.clientStructs.length);
  for (let n = 0; n < t.clientStructs.length; n++) {
    const i = t.clientStructs[n];
    ct(e, i.written), sg(e, i.restEncoder);
  }
}, Dre = (t, e, n) => {
  const i = new e(js(t)), r = new S_(i, !1), s = new n(), o = new E_(s);
  for (let a = r.curr; a !== null; a = r.next())
    vo(o, a, 0);
  A_(o);
  const l = k_(i);
  return fc(s, l), s.toUint8Array();
}, Nre = (t) => Dre(t, Qa, lf);
class cg {
  constructor(e, n) {
    this.target = e, this.currentTarget = e, this.transaction = n, this._changes = null, this._keys = null, this._delta = null;
  }
  get path() {
    return Lre(this.currentTarget, this.target);
  }
  deletes(e) {
    return aO(this.transaction.deleteSet, e.id);
  }
  get keys() {
    if (this._keys === null) {
      const e = /* @__PURE__ */ new Map(), n = this.target;
      this.transaction.changed.get(n).forEach((r) => {
        if (r !== null) {
          const s = n._map.get(r);
          let o, l;
          if (this.adds(s)) {
            let a = s.left;
            for (; a !== null && this.adds(a); )
              a = a.left;
            if (this.deletes(s))
              if (a !== null && this.deletes(a))
                o = "delete", l = gm(a.content.getContent());
              else
                return;
            else
              a !== null && this.deletes(a) ? (o = "update", l = gm(a.content.getContent())) : (o = "add", l = void 0);
          } else if (this.deletes(s))
            o = "delete", l = gm(s.content.getContent());
          else
            return;
          e.set(r, { action: o, oldValue: l });
        }
      }), this._keys = e;
    }
    return this._keys;
  }
  get delta() {
    return this.changes.delta;
  }
  adds(e) {
    return e.id.clock >= (this.transaction.beforeState.get(e.id.client) || 0);
  }
  get changes() {
    let e = this._changes;
    if (e === null) {
      const n = this.target, i = Ou(), r = Ou(), s = [];
      if (e = {
        added: i,
        deleted: r,
        delta: s,
        keys: this.keys
      }, this.transaction.changed.get(n).has(null)) {
        let l = null;
        const a = () => {
          l && s.push(l);
        };
        for (let c = n._start; c !== null; c = c.right)
          c.deleted ? this.deletes(c) && !this.adds(c) && ((l === null || l.delete === void 0) && (a(), l = { delete: 0 }), l.delete += c.length, r.add(c)) : this.adds(c) ? ((l === null || l.insert === void 0) && (a(), l = { insert: [] }), l.insert = l.insert.concat(c.content.getContent()), i.add(c)) : ((l === null || l.retain === void 0) && (a(), l = { retain: 0 }), l.retain += c.length);
        l !== null && l.retain === void 0 && a();
      }
      this._changes = e;
    }
    return e;
  }
}
const Lre = (t, e) => {
  const n = [];
  for (; e._item !== null && e !== t; ) {
    if (e._item.parentSub !== null)
      n.unshift(e._item.parentSub);
    else {
      let i = 0, r = e._item.parent._start;
      for (; r !== e._item && r !== null; )
        r.deleted || i++, r = r.right;
      n.unshift(i);
    }
    e = e._item.parent;
  }
  return n;
}, SO = 80;
let M_ = 0;
class jre {
  constructor(e, n) {
    e.marker = !0, this.p = e, this.index = n, this.timestamp = M_++;
  }
}
const Bre = (t) => {
  t.timestamp = M_++;
}, EO = (t, e, n) => {
  t.p.marker = !1, t.p = e, e.marker = !0, t.index = n, t.timestamp = M_++;
}, xre = (t, e, n) => {
  if (t.length >= SO) {
    const i = t.reduce((r, s) => r.timestamp < s.timestamp ? r : s);
    return EO(i, e, n), i;
  } else {
    const i = new jre(e, n);
    return t.push(i), i;
  }
}, ug = (t, e) => {
  if (t._start === null || e === 0 || t._searchMarker === null)
    return null;
  const n = t._searchMarker.length === 0 ? null : t._searchMarker.reduce((s, o) => Ih(e - s.index) < Ih(e - o.index) ? s : o);
  let i = t._start, r = 0;
  for (n !== null && (i = n.p, r = n.index, Bre(n)); i.right !== null && r < e; ) {
    if (!i.deleted && i.countable) {
      if (e < r + i.length)
        break;
      r += i.length;
    }
    i = i.right;
  }
  for (; i.left !== null && r > e; )
    i = i.left, !i.deleted && i.countable && (r -= i.length);
  for (; i.left !== null && i.left.id.client === i.id.client && i.left.id.clock + i.left.length === i.id.clock; )
    i = i.left, !i.deleted && i.countable && (r -= i.length);
  return n !== null && Ih(n.index - r) < i.parent.length / SO ? (EO(n, i, r), n) : xre(t._searchMarker, i, r);
}, Iu = (t, e, n) => {
  for (let i = t.length - 1; i >= 0; i--) {
    const r = t[i];
    if (n > 0) {
      let s = r.p;
      for (s.marker = !1; s && (s.deleted || !s.countable); )
        s = s.left, s && !s.deleted && s.countable && (r.index -= s.length);
      if (s === null || s.marker === !0) {
        t.splice(i, 1);
        continue;
      }
      r.p = s, s.marker = !0;
    }
    (e < r.index || n > 0 && e === r.index) && (r.index = Kl(e, r.index + n));
  }
}, fg = (t, e, n) => {
  const i = t, r = e.changedParentTypes;
  for (; Cr(r, t, () => []).push(n), t._item !== null; )
    t = t._item.parent;
  _O(i._eH, n, e);
};
class jn {
  constructor() {
    this._item = null, this._map = /* @__PURE__ */ new Map(), this._start = null, this.doc = null, this._length = 0, this._eH = P3(), this._dEH = P3(), this._searchMarker = null;
  }
  get parent() {
    return this._item ? this._item.parent : null;
  }
  _integrate(e, n) {
    this.doc = e, this._item = n;
  }
  _copy() {
    throw bs();
  }
  clone() {
    throw bs();
  }
  _write(e) {
  }
  get _first() {
    let e = this._start;
    for (; e !== null && e.deleted; )
      e = e.right;
    return e;
  }
  _callObserver(e, n) {
    !e.local && this._searchMarker && (this._searchMarker.length = 0);
  }
  observe(e) {
    I3(this._eH, e);
  }
  observeDeep(e) {
    I3(this._dEH, e);
  }
  unobserve(e) {
    D3(this._eH, e);
  }
  unobserveDeep(e) {
    D3(this._dEH, e);
  }
  toJSON() {
  }
}
const AO = (t, e, n) => {
  e < 0 && (e = t._length + e), n < 0 && (n = t._length + n);
  let i = n - e;
  const r = [];
  let s = t._start;
  for (; s !== null && i > 0; ) {
    if (s.countable && !s.deleted) {
      const o = s.content.getContent();
      if (o.length <= e)
        e -= o.length;
      else {
        for (let l = e; l < o.length && i > 0; l++)
          r.push(o[l]), i--;
        e = 0;
      }
    }
    s = s.right;
  }
  return r;
}, MO = (t) => {
  const e = [];
  let n = t._start;
  for (; n !== null; ) {
    if (n.countable && !n.deleted) {
      const i = n.content.getContent();
      for (let r = 0; r < i.length; r++)
        e.push(i[r]);
    }
    n = n.right;
  }
  return e;
}, Du = (t, e) => {
  let n = 0, i = t._start;
  for (; i !== null; ) {
    if (i.countable && !i.deleted) {
      const r = i.content.getContent();
      for (let s = 0; s < r.length; s++)
        e(r[s], n++, t);
    }
    i = i.right;
  }
}, OO = (t, e) => {
  const n = [];
  return Du(t, (i, r) => {
    n.push(e(i, r, t));
  }), n;
}, Fre = (t) => {
  let e = t._start, n = null, i = 0;
  return {
    [Symbol.iterator]() {
      return this;
    },
    next: () => {
      if (n === null) {
        for (; e !== null && e.deleted; )
          e = e.right;
        if (e === null)
          return {
            done: !0,
            value: void 0
          };
        n = e.content.getContent(), i = 0, e = e.right;
      }
      const r = n[i++];
      return n.length <= i && (n = null), {
        done: !1,
        value: r
      };
    }
  };
}, TO = (t, e) => {
  const n = ug(t, e);
  let i = t._start;
  for (n !== null && (i = n.p, e -= n.index); i !== null; i = i.right)
    if (!i.deleted && i.countable) {
      if (e < i.length)
        return i.content.getContent()[e];
      e -= i.length;
    }
}, Yd = (t, e, n, i) => {
  let r = n;
  const s = t.doc, o = s.clientID, l = s.store, a = n === null ? e._start : n.right;
  let c = [];
  const u = () => {
    c.length > 0 && (r = new ei(jt(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new Fl(c)), r.integrate(t, 0), c = []);
  };
  i.forEach((f) => {
    if (f === null)
      c.push(f);
    else
      switch (f.constructor) {
        case Number:
        case Object:
        case Boolean:
        case Array:
        case String:
          c.push(f);
          break;
        default:
          switch (u(), f.constructor) {
            case Uint8Array:
            case ArrayBuffer:
              r = new ei(jt(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new af(new Uint8Array(f))), r.integrate(t, 0);
              break;
            case il:
              r = new ei(jt(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new cf(f)), r.integrate(t, 0);
              break;
            default:
              if (f instanceof jn)
                r = new ei(jt(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new lo(f)), r.integrate(t, 0);
              else
                throw new Error("Unexpected content type in insert operation");
          }
      }
  }), u();
}, RO = nl("Length exceeded!"), PO = (t, e, n, i) => {
  if (n > e._length)
    throw RO;
  if (n === 0)
    return e._searchMarker && Iu(e._searchMarker, n, i.length), Yd(t, e, null, i);
  const r = n, s = ug(e, n);
  let o = e._start;
  for (s !== null && (o = s.p, n -= s.index, n === 0 && (o = o.prev, n += o && o.countable && !o.deleted ? o.length : 0)); o !== null; o = o.right)
    if (!o.deleted && o.countable) {
      if (n <= o.length) {
        n < o.length && Jo(t, jt(o.id.client, o.id.clock + n));
        break;
      }
      n -= o.length;
    }
  return e._searchMarker && Iu(e._searchMarker, r, i.length), Yd(t, e, o, i);
}, zre = (t, e, n) => {
  let r = (e._searchMarker || []).reduce((s, o) => o.index > s.index ? o : s, { index: 0, p: e._start }).p;
  if (r)
    for (; r.right; )
      r = r.right;
  return Yd(t, e, r, n);
}, IO = (t, e, n, i) => {
  if (i === 0)
    return;
  const r = n, s = i, o = ug(e, n);
  let l = e._start;
  for (o !== null && (l = o.p, n -= o.index); l !== null && n > 0; l = l.right)
    !l.deleted && l.countable && (n < l.length && Jo(t, jt(l.id.client, l.id.clock + n)), n -= l.length);
  for (; i > 0 && l !== null; )
    l.deleted || (i < l.length && Jo(t, jt(l.id.client, l.id.clock + i)), l.delete(t), i -= l.length), l = l.right;
  if (i > 0)
    throw RO;
  e._searchMarker && Iu(e._searchMarker, r, -s + i);
}, Xd = (t, e, n) => {
  const i = e._map.get(n);
  i !== void 0 && i.delete(t);
}, O_ = (t, e, n, i) => {
  const r = e._map.get(n) || null, s = t.doc, o = s.clientID;
  let l;
  if (i == null)
    l = new Fl([i]);
  else
    switch (i.constructor) {
      case Number:
      case Object:
      case Boolean:
      case Array:
      case String:
        l = new Fl([i]);
        break;
      case Uint8Array:
        l = new af(i);
        break;
      case il:
        l = new cf(i);
        break;
      default:
        if (i instanceof jn)
          l = new lo(i);
        else
          throw new Error("Unexpected content type");
    }
  new ei(jt(o, pi(s.store, o)), r, r && r.lastId, null, null, e, n, l).integrate(t, 0);
}, T_ = (t, e) => {
  const n = t._map.get(e);
  return n !== void 0 && !n.deleted ? n.content.getContent()[n.length - 1] : void 0;
}, DO = (t) => {
  const e = {};
  return t._map.forEach((n, i) => {
    n.deleted || (e[i] = n.content.getContent()[n.length - 1]);
  }), e;
}, NO = (t, e) => {
  const n = t._map.get(e);
  return n !== void 0 && !n.deleted;
}, lh = (t) => nre(t.entries(), (e) => !e[1].deleted);
class Vre extends cg {
  constructor(e, n) {
    super(e, n), this._transaction = n;
  }
}
class ys extends jn {
  constructor() {
    super(), this._prelimContent = [], this._searchMarker = [];
  }
  static from(e) {
    const n = new ys();
    return n.push(e), n;
  }
  _integrate(e, n) {
    super._integrate(e, n), this.insert(0, this._prelimContent), this._prelimContent = null;
  }
  _copy() {
    return new ys();
  }
  clone() {
    const e = new ys();
    return e.insert(0, this.toArray().map(
      (n) => n instanceof jn ? n.clone() : n
    )), e;
  }
  get length() {
    return this._prelimContent === null ? this._length : this._prelimContent.length;
  }
  _callObserver(e, n) {
    super._callObserver(e, n), fg(this, e, new Vre(this, e));
  }
  insert(e, n) {
    this.doc !== null ? sn(this.doc, (i) => {
      PO(i, this, e, n);
    }) : this._prelimContent.splice(e, 0, ...n);
  }
  push(e) {
    this.doc !== null ? sn(this.doc, (n) => {
      zre(n, this, e);
    }) : this._prelimContent.push(...e);
  }
  unshift(e) {
    this.insert(0, e);
  }
  delete(e, n = 1) {
    this.doc !== null ? sn(this.doc, (i) => {
      IO(i, this, e, n);
    }) : this._prelimContent.splice(e, n);
  }
  get(e) {
    return TO(this, e);
  }
  toArray() {
    return MO(this);
  }
  slice(e = 0, n = this.length) {
    return AO(this, e, n);
  }
  toJSON() {
    return this.map((e) => e instanceof jn ? e.toJSON() : e);
  }
  map(e) {
    return OO(this, e);
  }
  forEach(e) {
    Du(this, e);
  }
  [Symbol.iterator]() {
    return Fre(this);
  }
  _write(e) {
    e.writeTypeRef(use);
  }
}
const Ure = (t) => new ys();
class Hre extends cg {
  constructor(e, n, i) {
    super(e, n), this.keysChanged = i;
  }
}
class Rs extends jn {
  constructor(e) {
    super(), this._prelimContent = null, e === void 0 ? this._prelimContent = /* @__PURE__ */ new Map() : this._prelimContent = new Map(e);
  }
  _integrate(e, n) {
    super._integrate(e, n), this._prelimContent.forEach((i, r) => {
      this.set(r, i);
    }), this._prelimContent = null;
  }
  _copy() {
    return new Rs();
  }
  clone() {
    const e = new Rs();
    return this.forEach((n, i) => {
      e.set(i, n instanceof jn ? n.clone() : n);
    }), e;
  }
  _callObserver(e, n) {
    fg(this, e, new Hre(this, e, n));
  }
  toJSON() {
    const e = {};
    return this._map.forEach((n, i) => {
      if (!n.deleted) {
        const r = n.content.getContent()[n.length - 1];
        e[i] = r instanceof jn ? r.toJSON() : r;
      }
    }), e;
  }
  get size() {
    return [...lh(this._map)].length;
  }
  keys() {
    return vm(lh(this._map), (e) => e[0]);
  }
  values() {
    return vm(lh(this._map), (e) => e[1].content.getContent()[e[1].length - 1]);
  }
  entries() {
    return vm(lh(this._map), (e) => [e[0], e[1].content.getContent()[e[1].length - 1]]);
  }
  forEach(e) {
    this._map.forEach((n, i) => {
      n.deleted || e(n.content.getContent()[n.length - 1], i, this);
    });
  }
  [Symbol.iterator]() {
    return this.entries();
  }
  delete(e) {
    this.doc !== null ? sn(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._prelimContent.delete(e);
  }
  set(e, n) {
    return this.doc !== null ? sn(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._prelimContent.set(e, n), n;
  }
  get(e) {
    return T_(this, e);
  }
  has(e) {
    return NO(this, e);
  }
  clear() {
    this.doc !== null ? sn(this.doc, (e) => {
      this.forEach(function(n, i, r) {
        Xd(e, r, i);
      });
    }) : this._prelimContent.clear();
  }
  _write(e) {
    e.writeTypeRef(fse);
  }
}
const Wre = (t) => new Rs(), Oo = (t, e) => t === e || typeof t == "object" && typeof e == "object" && t && e && cie(t, e);
class m0 {
  constructor(e, n, i, r) {
    this.left = e, this.right = n, this.index = i, this.currentAttributes = r;
  }
  forward() {
    switch (this.right === null && Ts(), this.right.content.constructor) {
      case ii:
        this.right.deleted || hc(this.currentAttributes, this.right.content);
        break;
      default:
        this.right.deleted || (this.index += this.right.length);
        break;
    }
    this.left = this.right, this.right = this.right.right;
  }
}
const B3 = (t, e, n) => {
  for (; e.right !== null && n > 0; ) {
    switch (e.right.content.constructor) {
      case ii:
        e.right.deleted || hc(e.currentAttributes, e.right.content);
        break;
      default:
        e.right.deleted || (n < e.right.length && Jo(t, jt(e.right.id.client, e.right.id.clock + n)), e.index += e.right.length, n -= e.right.length);
        break;
    }
    e.left = e.right, e.right = e.right.right;
  }
  return e;
}, ah = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = ug(e, n);
  if (r) {
    const s = new m0(r.p.left, r.p, r.index, i);
    return B3(t, s, n - r.index);
  } else {
    const s = new m0(null, e._start, 0, i);
    return B3(t, s, n);
  }
}, LO = (t, e, n, i) => {
  for (; n.right !== null && (n.right.deleted === !0 || n.right.content.constructor === ii && Oo(i.get(n.right.content.key), n.right.content.value)); )
    n.right.deleted || i.delete(n.right.content.key), n.forward();
  const r = t.doc, s = r.clientID;
  i.forEach((o, l) => {
    const a = n.left, c = n.right, u = new ei(jt(s, pi(r.store, s)), a, a && a.lastId, c, c && c.id, e, null, new ii(l, o));
    u.integrate(t, 0), n.right = u, n.forward();
  });
}, hc = (t, e) => {
  const { key: n, value: i } = e;
  i === null ? t.delete(n) : t.set(n, i);
}, jO = (t, e) => {
  for (; t.right !== null; ) {
    if (!(t.right.deleted || t.right.content.constructor === ii && Oo(e[t.right.content.key] || null, t.right.content.value)))
      break;
    t.forward();
  }
}, BO = (t, e, n, i) => {
  const r = t.doc, s = r.clientID, o = /* @__PURE__ */ new Map();
  for (const l in i) {
    const a = i[l], c = n.currentAttributes.get(l) || null;
    if (!Oo(c, a)) {
      o.set(l, c);
      const { left: u, right: f } = n;
      n.right = new ei(jt(s, pi(r.store, s)), u, u && u.lastId, f, f && f.id, e, null, new ii(l, a)), n.right.integrate(t, 0), n.forward();
    }
  }
  return o;
}, Cm = (t, e, n, i, r) => {
  n.currentAttributes.forEach((h, d) => {
    r[d] === void 0 && (r[d] = null);
  });
  const s = t.doc, o = s.clientID;
  jO(n, r);
  const l = BO(t, e, n, r), a = i.constructor === String ? new Is(i) : i instanceof jn ? new lo(i) : new Yl(i);
  let { left: c, right: u, index: f } = n;
  e._searchMarker && Iu(e._searchMarker, n.index, a.getLength()), u = new ei(jt(o, pi(s.store, o)), c, c && c.lastId, u, u && u.id, e, null, a), u.integrate(t, 0), n.right = u, n.index = f, n.forward(), LO(t, e, n, l);
}, x3 = (t, e, n, i, r) => {
  const s = t.doc, o = s.clientID;
  jO(n, r);
  const l = BO(t, e, n, r);
  e:
    for (; n.right !== null && (i > 0 || l.size > 0 && (n.right.deleted || n.right.content.constructor === ii)); ) {
      if (!n.right.deleted)
        switch (n.right.content.constructor) {
          case ii: {
            const { key: a, value: c } = n.right.content, u = r[a];
            if (u !== void 0) {
              if (Oo(u, c))
                l.delete(a);
              else {
                if (i === 0)
                  break e;
                l.set(a, c);
              }
              n.right.delete(t);
            } else
              n.currentAttributes.set(a, c);
            break;
          }
          default:
            i < n.right.length && Jo(t, jt(n.right.id.client, n.right.id.clock + i)), i -= n.right.length;
            break;
        }
      n.forward();
    }
  if (i > 0) {
    let a = "";
    for (; i > 0; i--)
      a += `
`;
    n.right = new ei(jt(o, pi(s.store, o)), n.left, n.left && n.left.lastId, n.right, n.right && n.right.id, e, null, new Is(a)), n.right.integrate(t, 0), n.forward();
  }
  LO(t, e, n, l);
}, xO = (t, e, n, i, r) => {
  let s = n;
  const o = Wd(r);
  for (; s && (!s.countable || s.deleted); )
    !s.deleted && s.content.constructor === ii && hc(o, s.content), s = s.right;
  let l = 0, a = !1;
  for (; e !== s; ) {
    if (n === e && (a = !0), !e.deleted) {
      const c = e.content;
      switch (c.constructor) {
        case ii: {
          const { key: u, value: f } = c;
          ((o.get(u) || null) !== f || (i.get(u) || null) === f) && (e.delete(t), l++, !a && (r.get(u) || null) === f && (i.get(u) || null) !== f && r.delete(u));
          break;
        }
      }
    }
    e = e.right;
  }
  return l;
}, qre = (t, e) => {
  for (; e && e.right && (e.right.deleted || !e.right.countable); )
    e = e.right;
  const n = /* @__PURE__ */ new Set();
  for (; e && (e.deleted || !e.countable); ) {
    if (!e.deleted && e.content.constructor === ii) {
      const i = e.content.key;
      n.has(i) ? e.delete(t) : n.add(i);
    }
    e = e.left;
  }
}, Jre = (t) => {
  let e = 0;
  return sn(t.doc, (n) => {
    let i = t._start, r = t._start, s = ms();
    const o = Wd(s);
    for (; r; ) {
      if (r.deleted === !1)
        switch (r.content.constructor) {
          case ii:
            hc(o, r.content);
            break;
          default:
            e += xO(n, i, r, s, o), s = Wd(o), i = r;
            break;
        }
      r = r.right;
    }
  }), e;
}, F3 = (t, e, n) => {
  const i = n, r = Wd(e.currentAttributes), s = e.right;
  for (; n > 0 && e.right !== null; ) {
    if (e.right.deleted === !1)
      switch (e.right.content.constructor) {
        case lo:
        case Yl:
        case Is:
          n < e.right.length && Jo(t, jt(e.right.id.client, e.right.id.clock + n)), n -= e.right.length, e.right.delete(t);
          break;
      }
    e.forward();
  }
  s && xO(t, s, e.right, r, e.currentAttributes);
  const o = (e.left || e.right).parent;
  return o._searchMarker && Iu(o._searchMarker, e.index, -i + n), e;
};
class Kre extends cg {
  constructor(e, n, i) {
    super(e, n), this.childListChanged = !1, this.keysChanged = /* @__PURE__ */ new Set(), i.forEach((r) => {
      r === null ? this.childListChanged = !0 : this.keysChanged.add(r);
    });
  }
  get changes() {
    if (this._changes === null) {
      const e = {
        keys: this.keys,
        delta: this.delta,
        added: /* @__PURE__ */ new Set(),
        deleted: /* @__PURE__ */ new Set()
      };
      this._changes = e;
    }
    return this._changes;
  }
  get delta() {
    if (this._delta === null) {
      const e = this.target.doc, n = [];
      sn(e, (i) => {
        const r = /* @__PURE__ */ new Map(), s = /* @__PURE__ */ new Map();
        let o = this.target._start, l = null;
        const a = {};
        let c = "", u = 0, f = 0;
        const h = () => {
          if (l !== null) {
            let d;
            switch (l) {
              case "delete":
                d = { delete: f }, f = 0;
                break;
              case "insert":
                d = { insert: c }, r.size > 0 && (d.attributes = {}, r.forEach((p, g) => {
                  p !== null && (d.attributes[g] = p);
                })), c = "";
                break;
              case "retain":
                if (d = { retain: u }, Object.keys(a).length > 0) {
                  d.attributes = {};
                  for (const p in a)
                    d.attributes[p] = a[p];
                }
                u = 0;
                break;
            }
            n.push(d), l = null;
          }
        };
        for (; o !== null; ) {
          switch (o.content.constructor) {
            case lo:
            case Yl:
              this.adds(o) ? this.deletes(o) || (h(), l = "insert", c = o.content.getContent()[0], h()) : this.deletes(o) ? (l !== "delete" && (h(), l = "delete"), f += 1) : o.deleted || (l !== "retain" && (h(), l = "retain"), u += 1);
              break;
            case Is:
              this.adds(o) ? this.deletes(o) || (l !== "insert" && (h(), l = "insert"), c += o.content.str) : this.deletes(o) ? (l !== "delete" && (h(), l = "delete"), f += o.length) : o.deleted || (l !== "retain" && (h(), l = "retain"), u += o.length);
              break;
            case ii: {
              const { key: d, value: p } = o.content;
              if (this.adds(o)) {
                if (!this.deletes(o)) {
                  const g = r.get(d) || null;
                  Oo(g, p) ? p !== null && o.delete(i) : (l === "retain" && h(), Oo(p, s.get(d) || null) ? delete a[d] : a[d] = p);
                }
              } else if (this.deletes(o)) {
                s.set(d, p);
                const g = r.get(d) || null;
                Oo(g, p) || (l === "retain" && h(), a[d] = g);
              } else if (!o.deleted) {
                s.set(d, p);
                const g = a[d];
                g !== void 0 && (Oo(g, p) ? g !== null && o.delete(i) : (l === "retain" && h(), p === null ? delete a[d] : a[d] = p));
              }
              o.deleted || (l === "insert" && h(), hc(r, o.content));
              break;
            }
          }
          o = o.right;
        }
        for (h(); n.length > 0; ) {
          const d = n[n.length - 1];
          if (d.retain !== void 0 && d.attributes === void 0)
            n.pop();
          else
            break;
        }
      }), this._delta = n;
    }
    return this._delta;
  }
}
class no extends jn {
  constructor(e) {
    super(), this._pending = e !== void 0 ? [() => this.insert(0, e)] : [], this._searchMarker = [];
  }
  get length() {
    return this._length;
  }
  _integrate(e, n) {
    super._integrate(e, n);
    try {
      this._pending.forEach((i) => i());
    } catch (i) {
      console.error(i);
    }
    this._pending = null;
  }
  _copy() {
    return new no();
  }
  clone() {
    const e = new no();
    return e.applyDelta(this.toDelta()), e;
  }
  _callObserver(e, n) {
    super._callObserver(e, n);
    const i = new Kre(this, e, n), r = e.doc;
    if (fg(this, e, i), !e.local) {
      let s = !1;
      for (const [o, l] of e.afterState.entries()) {
        const a = e.beforeState.get(o) || 0;
        if (l !== a && (vO(e, r.store.clients.get(o), a, l, (c) => {
          !c.deleted && c.content.constructor === ii && (s = !0);
        }), s))
          break;
      }
      s || d0(e, e.deleteSet, (o) => {
        o instanceof er || s || o.parent === this && o.content.constructor === ii && (s = !0);
      }), sn(r, (o) => {
        s ? Jre(this) : d0(o, o.deleteSet, (l) => {
          l instanceof er || l.parent === this && qre(o, l);
        });
      });
    }
  }
  toString() {
    let e = "", n = this._start;
    for (; n !== null; )
      !n.deleted && n.countable && n.content.constructor === Is && (e += n.content.str), n = n.right;
    return e;
  }
  toJSON() {
    return this.toString();
  }
  applyDelta(e, { sanitize: n = !0 } = {}) {
    this.doc !== null ? sn(this.doc, (i) => {
      const r = new m0(null, this._start, 0, /* @__PURE__ */ new Map());
      for (let s = 0; s < e.length; s++) {
        const o = e[s];
        if (o.insert !== void 0) {
          const l = !n && typeof o.insert == "string" && s === e.length - 1 && r.right === null && o.insert.slice(-1) === `
` ? o.insert.slice(0, -1) : o.insert;
          (typeof l != "string" || l.length > 0) && Cm(i, this, r, l, o.attributes || {});
        } else
          o.retain !== void 0 ? x3(i, this, r, o.retain, o.attributes || {}) : o.delete !== void 0 && F3(i, r, o.delete);
      }
    }) : this._pending.push(() => this.applyDelta(e));
  }
  toDelta(e, n, i) {
    const r = [], s = /* @__PURE__ */ new Map(), o = this.doc;
    let l = "", a = this._start;
    function c() {
      if (l.length > 0) {
        const u = {};
        let f = !1;
        s.forEach((d, p) => {
          f = !0, u[p] = d;
        });
        const h = { insert: l };
        f && (h.attributes = u), r.push(h), l = "";
      }
    }
    return sn(o, (u) => {
      for (e && p0(u, e), n && p0(u, n); a !== null; ) {
        if (Cc(a, e) || n !== void 0 && Cc(a, n))
          switch (a.content.constructor) {
            case Is: {
              const f = s.get("ychange");
              e !== void 0 && !Cc(a, e) ? (f === void 0 || f.user !== a.id.client || f.type !== "removed") && (c(), s.set("ychange", i ? i("removed", a.id) : { type: "removed" })) : n !== void 0 && !Cc(a, n) ? (f === void 0 || f.user !== a.id.client || f.type !== "added") && (c(), s.set("ychange", i ? i("added", a.id) : { type: "added" })) : f !== void 0 && (c(), s.delete("ychange")), l += a.content.str;
              break;
            }
            case lo:
            case Yl: {
              c();
              const f = {
                insert: a.content.getContent()[0]
              };
              if (s.size > 0) {
                const h = {};
                f.attributes = h, s.forEach((d, p) => {
                  h[p] = d;
                });
              }
              r.push(f);
              break;
            }
            case ii:
              Cc(a, e) && (c(), hc(s, a.content));
              break;
          }
        a = a.right;
      }
      c();
    }, "cleanup"), r;
  }
  insert(e, n, i) {
    if (n.length <= 0)
      return;
    const r = this.doc;
    r !== null ? sn(r, (s) => {
      const o = ah(s, this, e);
      i || (i = {}, o.currentAttributes.forEach((l, a) => {
        i[a] = l;
      })), Cm(s, this, o, n, i);
    }) : this._pending.push(() => this.insert(e, n, i));
  }
  insertEmbed(e, n, i = {}) {
    const r = this.doc;
    r !== null ? sn(r, (s) => {
      const o = ah(s, this, e);
      Cm(s, this, o, n, i);
    }) : this._pending.push(() => this.insertEmbed(e, n, i));
  }
  delete(e, n) {
    if (n === 0)
      return;
    const i = this.doc;
    i !== null ? sn(i, (r) => {
      F3(r, ah(r, this, e), n);
    }) : this._pending.push(() => this.delete(e, n));
  }
  format(e, n, i) {
    if (n === 0)
      return;
    const r = this.doc;
    r !== null ? sn(r, (s) => {
      const o = ah(s, this, e);
      o.right !== null && x3(s, this, o, n, i);
    }) : this._pending.push(() => this.format(e, n, i));
  }
  removeAttribute(e) {
    this.doc !== null ? sn(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._pending.push(() => this.removeAttribute(e));
  }
  setAttribute(e, n) {
    this.doc !== null ? sn(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._pending.push(() => this.setAttribute(e, n));
  }
  getAttribute(e) {
    return T_(this, e);
  }
  getAttributes() {
    return DO(this);
  }
  _write(e) {
    e.writeTypeRef(hse);
  }
}
const Gre = (t) => new no();
class Sm {
  constructor(e, n = () => !0) {
    this._filter = n, this._root = e, this._currentNode = e._start, this._firstCall = !0;
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    let e = this._currentNode, n = e && e.content && e.content.type;
    if (e !== null && (!this._firstCall || e.deleted || !this._filter(n)))
      do
        if (n = e.content.type, !e.deleted && (n.constructor === Ko || n.constructor === Ps) && n._start !== null)
          e = n._start;
        else
          for (; e !== null; )
            if (e.right !== null) {
              e = e.right;
              break;
            } else
              e.parent === this._root ? e = null : e = e.parent._item;
      while (e !== null && (e.deleted || !this._filter(e.content.type)));
    return this._firstCall = !1, e === null ? { value: void 0, done: !0 } : (this._currentNode = e, { value: e.content.type, done: !1 });
  }
}
class Ps extends jn {
  constructor() {
    super(), this._prelimContent = [];
  }
  get firstChild() {
    const e = this._first;
    return e ? e.content.getContent()[0] : null;
  }
  _integrate(e, n) {
    super._integrate(e, n), this.insert(0, this._prelimContent), this._prelimContent = null;
  }
  _copy() {
    return new Ps();
  }
  clone() {
    const e = new Ps();
    return e.insert(0, this.toArray().map((n) => n instanceof jn ? n.clone() : n)), e;
  }
  get length() {
    return this._prelimContent === null ? this._length : this._prelimContent.length;
  }
  createTreeWalker(e) {
    return new Sm(this, e);
  }
  querySelector(e) {
    e = e.toUpperCase();
    const i = new Sm(this, (r) => r.nodeName && r.nodeName.toUpperCase() === e).next();
    return i.done ? null : i.value;
  }
  querySelectorAll(e) {
    return e = e.toUpperCase(), Array.from(new Sm(this, (n) => n.nodeName && n.nodeName.toUpperCase() === e));
  }
  _callObserver(e, n) {
    fg(this, e, new Qre(this, n, e));
  }
  toString() {
    return OO(this, (e) => e.toString()).join("");
  }
  toJSON() {
    return this.toString();
  }
  toDOM(e = document, n = {}, i) {
    const r = e.createDocumentFragment();
    return i !== void 0 && i._createAssociation(r, this), Du(this, (s) => {
      r.insertBefore(s.toDOM(e, n, i), null);
    }), r;
  }
  insert(e, n) {
    this.doc !== null ? sn(this.doc, (i) => {
      PO(i, this, e, n);
    }) : this._prelimContent.splice(e, 0, ...n);
  }
  insertAfter(e, n) {
    if (this.doc !== null)
      sn(this.doc, (i) => {
        const r = e && e instanceof jn ? e._item : e;
        Yd(i, this, r, n);
      });
    else {
      const i = this._prelimContent, r = e === null ? 0 : i.findIndex((s) => s === e) + 1;
      if (r === 0 && e !== null)
        throw nl("Reference item not found");
      i.splice(r, 0, ...n);
    }
  }
  delete(e, n = 1) {
    this.doc !== null ? sn(this.doc, (i) => {
      IO(i, this, e, n);
    }) : this._prelimContent.splice(e, n);
  }
  toArray() {
    return MO(this);
  }
  push(e) {
    this.insert(this.length, e);
  }
  unshift(e) {
    this.insert(0, e);
  }
  get(e) {
    return TO(this, e);
  }
  slice(e = 0, n = this.length) {
    return AO(this, e, n);
  }
  forEach(e) {
    Du(this, e);
  }
  _write(e) {
    e.writeTypeRef(pse);
  }
}
const Yre = (t) => new Ps();
class Ko extends Ps {
  constructor(e = "UNDEFINED") {
    super(), this.nodeName = e, this._prelimAttrs = /* @__PURE__ */ new Map();
  }
  get nextSibling() {
    const e = this._item ? this._item.next : null;
    return e ? e.content.type : null;
  }
  get prevSibling() {
    const e = this._item ? this._item.prev : null;
    return e ? e.content.type : null;
  }
  _integrate(e, n) {
    super._integrate(e, n), this._prelimAttrs.forEach((i, r) => {
      this.setAttribute(r, i);
    }), this._prelimAttrs = null;
  }
  _copy() {
    return new Ko(this.nodeName);
  }
  clone() {
    const e = new Ko(this.nodeName), n = this.getAttributes();
    for (const i in n)
      e.setAttribute(i, n[i]);
    return e.insert(0, this.toArray().map((i) => i instanceof jn ? i.clone() : i)), e;
  }
  toString() {
    const e = this.getAttributes(), n = [], i = [];
    for (const l in e)
      i.push(l);
    i.sort();
    const r = i.length;
    for (let l = 0; l < r; l++) {
      const a = i[l];
      n.push(a + '="' + e[a] + '"');
    }
    const s = this.nodeName.toLocaleLowerCase(), o = n.length > 0 ? " " + n.join(" ") : "";
    return `<${s}${o}>${super.toString()}</${s}>`;
  }
  removeAttribute(e) {
    this.doc !== null ? sn(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._prelimAttrs.delete(e);
  }
  setAttribute(e, n) {
    this.doc !== null ? sn(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._prelimAttrs.set(e, n);
  }
  getAttribute(e) {
    return T_(this, e);
  }
  hasAttribute(e) {
    return NO(this, e);
  }
  getAttributes() {
    return DO(this);
  }
  toDOM(e = document, n = {}, i) {
    const r = e.createElement(this.nodeName), s = this.getAttributes();
    for (const o in s)
      r.setAttribute(o, s[o]);
    return Du(this, (o) => {
      r.appendChild(o.toDOM(e, n, i));
    }), i !== void 0 && i._createAssociation(r, this), r;
  }
  _write(e) {
    e.writeTypeRef(dse), e.writeKey(this.nodeName);
  }
}
const Xre = (t) => new Ko(t.readKey());
class Qre extends cg {
  constructor(e, n, i) {
    super(e, i), this.childListChanged = !1, this.attributesChanged = /* @__PURE__ */ new Set(), n.forEach((r) => {
      r === null ? this.childListChanged = !0 : this.attributesChanged.add(r);
    });
  }
}
class Za extends Rs {
  constructor(e) {
    super(), this.hookName = e;
  }
  _copy() {
    return new Za(this.hookName);
  }
  clone() {
    const e = new Za(this.hookName);
    return this.forEach((n, i) => {
      e.set(i, n);
    }), e;
  }
  toDOM(e = document, n = {}, i) {
    const r = n[this.hookName];
    let s;
    return r !== void 0 ? s = r.createDom(this) : s = document.createElement(this.hookName), s.setAttribute("data-yjs-hook", this.hookName), i !== void 0 && i._createAssociation(s, this), s;
  }
  _write(e) {
    e.writeTypeRef(gse), e.writeKey(this.hookName);
  }
}
const Zre = (t) => new Za(t.readKey());
class xl extends no {
  get nextSibling() {
    const e = this._item ? this._item.next : null;
    return e ? e.content.type : null;
  }
  get prevSibling() {
    const e = this._item ? this._item.prev : null;
    return e ? e.content.type : null;
  }
  _copy() {
    return new xl();
  }
  clone() {
    const e = new xl();
    return e.applyDelta(this.toDelta()), e;
  }
  toDOM(e = document, n, i) {
    const r = e.createTextNode(this.toString());
    return i !== void 0 && i._createAssociation(r, this), r;
  }
  toString() {
    return this.toDelta().map((e) => {
      const n = [];
      for (const r in e.attributes) {
        const s = [];
        for (const o in e.attributes[r])
          s.push({ key: o, value: e.attributes[r][o] });
        s.sort((o, l) => o.key < l.key ? -1 : 1), n.push({ nodeName: r, attrs: s });
      }
      n.sort((r, s) => r.nodeName < s.nodeName ? -1 : 1);
      let i = "";
      for (let r = 0; r < n.length; r++) {
        const s = n[r];
        i += `<${s.nodeName}`;
        for (let o = 0; o < s.attrs.length; o++) {
          const l = s.attrs[o];
          i += ` ${l.key}="${l.value}"`;
        }
        i += ">";
      }
      i += e.insert;
      for (let r = n.length - 1; r >= 0; r--)
        i += `</${n[r].nodeName}>`;
      return i;
    }).join("");
  }
  toJSON() {
    return this.toString();
  }
  _write(e) {
    e.writeTypeRef(mse);
  }
}
const $re = (t) => new xl();
class R_ {
  constructor(e, n) {
    this.id = e, this.length = n;
  }
  get deleted() {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  write(e, n, i) {
    throw bs();
  }
  integrate(e, n) {
    throw bs();
  }
}
const ese = 0;
class er extends R_ {
  get deleted() {
    return !0;
  }
  delete() {
  }
  mergeWith(e) {
    return this.constructor !== e.constructor ? !1 : (this.length += e.length, !0);
  }
  integrate(e, n) {
    n > 0 && (this.id.clock += n, this.length -= n), wO(e.doc.store, this);
  }
  write(e, n) {
    e.writeInfo(ese), e.writeLen(this.length - n);
  }
  getMissing(e, n) {
    return null;
  }
}
class af {
  constructor(e) {
    this.content = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.content];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new af(this.content);
  }
  splice(e) {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeBuf(this.content);
  }
  getRef() {
    return 3;
  }
}
const tse = (t) => new af(t.readBuf());
class Nu {
  constructor(e) {
    this.len = e;
  }
  getLength() {
    return this.len;
  }
  getContent() {
    return [];
  }
  isCountable() {
    return !1;
  }
  copy() {
    return new Nu(this.len);
  }
  splice(e) {
    const n = new Nu(this.len - e);
    return this.len = e, n;
  }
  mergeWith(e) {
    return this.len += e.len, !0;
  }
  integrate(e, n) {
    Kd(e.deleteSet, n.id.client, n.id.clock, this.len), n.markDeleted();
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeLen(this.len - n);
  }
  getRef() {
    return 1;
  }
}
const nse = (t) => new Nu(t.readLen()), FO = (t, e) => new il({ guid: t, ...e, shouldLoad: e.shouldLoad || e.autoLoad || !1 });
class cf {
  constructor(e) {
    e._item && console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."), this.doc = e;
    const n = {};
    this.opts = n, e.gc || (n.gc = !1), e.autoLoad && (n.autoLoad = !0), e.meta !== null && (n.meta = e.meta);
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.doc];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new cf(FO(this.doc.guid, this.opts));
  }
  splice(e) {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    this.doc._item = n, e.subdocsAdded.add(this.doc), this.doc.shouldLoad && e.subdocsLoaded.add(this.doc);
  }
  delete(e) {
    e.subdocsAdded.has(this.doc) ? e.subdocsAdded.delete(this.doc) : e.subdocsRemoved.add(this.doc);
  }
  gc(e) {
  }
  write(e, n) {
    e.writeString(this.doc.guid), e.writeAny(this.opts);
  }
  getRef() {
    return 9;
  }
}
const ise = (t) => new cf(FO(t.readString(), t.readAny()));
class Yl {
  constructor(e) {
    this.embed = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.embed];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Yl(this.embed);
  }
  splice(e) {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeJSON(this.embed);
  }
  getRef() {
    return 5;
  }
}
const rse = (t) => new Yl(t.readJSON());
class ii {
  constructor(e, n) {
    this.key = e, this.value = n;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [];
  }
  isCountable() {
    return !1;
  }
  copy() {
    return new ii(this.key, this.value);
  }
  splice(e) {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    n.parent._searchMarker = null;
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeKey(this.key), e.writeJSON(this.value);
  }
  getRef() {
    return 6;
  }
}
const sse = (t) => new ii(t.readKey(), t.readJSON());
class Qd {
  constructor(e) {
    this.arr = e;
  }
  getLength() {
    return this.arr.length;
  }
  getContent() {
    return this.arr;
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Qd(this.arr);
  }
  splice(e) {
    const n = new Qd(this.arr.slice(e));
    return this.arr = this.arr.slice(0, e), n;
  }
  mergeWith(e) {
    return this.arr = this.arr.concat(e.arr), !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    const i = this.arr.length;
    e.writeLen(i - n);
    for (let r = n; r < i; r++) {
      const s = this.arr[r];
      e.writeString(s === void 0 ? "undefined" : JSON.stringify(s));
    }
  }
  getRef() {
    return 2;
  }
}
const ose = (t) => {
  const e = t.readLen(), n = [];
  for (let i = 0; i < e; i++) {
    const r = t.readString();
    r === "undefined" ? n.push(void 0) : n.push(JSON.parse(r));
  }
  return new Qd(n);
};
class Fl {
  constructor(e) {
    this.arr = e;
  }
  getLength() {
    return this.arr.length;
  }
  getContent() {
    return this.arr;
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Fl(this.arr);
  }
  splice(e) {
    const n = new Fl(this.arr.slice(e));
    return this.arr = this.arr.slice(0, e), n;
  }
  mergeWith(e) {
    return this.arr = this.arr.concat(e.arr), !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    const i = this.arr.length;
    e.writeLen(i - n);
    for (let r = n; r < i; r++) {
      const s = this.arr[r];
      e.writeAny(s);
    }
  }
  getRef() {
    return 8;
  }
}
const lse = (t) => {
  const e = t.readLen(), n = [];
  for (let i = 0; i < e; i++)
    n.push(t.readAny());
  return new Fl(n);
};
class Is {
  constructor(e) {
    this.str = e;
  }
  getLength() {
    return this.str.length;
  }
  getContent() {
    return this.str.split("");
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Is(this.str);
  }
  splice(e) {
    const n = new Is(this.str.slice(e));
    this.str = this.str.slice(0, e);
    const i = this.str.charCodeAt(e - 1);
    return i >= 55296 && i <= 56319 && (this.str = this.str.slice(0, e - 1) + "�", n.str = "�" + n.str.slice(1)), n;
  }
  mergeWith(e) {
    return this.str += e.str, !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeString(n === 0 ? this.str : this.str.slice(n));
  }
  getRef() {
    return 4;
  }
}
const ase = (t) => new Is(t.readString()), cse = [
  Ure,
  Wre,
  Gre,
  Xre,
  Yre,
  Zre,
  $re
], use = 0, fse = 1, hse = 2, dse = 3, pse = 4, gse = 5, mse = 6;
class lo {
  constructor(e) {
    this.type = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.type];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new lo(this.type._copy());
  }
  splice(e) {
    throw bs();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    this.type._integrate(e.doc, n);
  }
  delete(e) {
    let n = this.type._start;
    for (; n !== null; )
      n.deleted ? e._mergeStructs.push(n) : n.delete(e), n = n.right;
    this.type._map.forEach((i) => {
      i.deleted ? e._mergeStructs.push(i) : i.delete(e);
    }), e.changed.delete(this.type);
  }
  gc(e) {
    let n = this.type._start;
    for (; n !== null; )
      n.gc(e, !0), n = n.right;
    this.type._start = null, this.type._map.forEach((i) => {
      for (; i !== null; )
        i.gc(e, !0), i = i.left;
    }), this.type._map = /* @__PURE__ */ new Map();
  }
  write(e, n) {
    this.type._write(e);
  }
  getRef() {
    return 7;
  }
}
const bse = (t) => new lo(cse[t.readTypeRef()](t)), Zd = (t, e, n) => {
  const { client: i, clock: r } = e.id, s = new ei(
    jt(i, r + n),
    e,
    jt(i, r + n - 1),
    e.right,
    e.rightOrigin,
    e.parent,
    e.parentSub,
    e.content.splice(n)
  );
  return e.deleted && s.markDeleted(), e.keep && (s.keep = !0), e.redone !== null && (s.redone = jt(e.redone.client, e.redone.clock + n)), e.right = s, s.right !== null && (s.right.left = s), t._mergeStructs.push(s), s.parentSub !== null && s.right === null && s.parent._map.set(s.parentSub, s), e.length = n, s;
};
class ei extends R_ {
  constructor(e, n, i, r, s, o, l, a) {
    super(e, a.getLength()), this.origin = i, this.left = n, this.right = r, this.rightOrigin = s, this.parent = o, this.parentSub = l, this.redone = null, this.content = a, this.info = this.content.isCountable() ? w3 : 0;
  }
  set marker(e) {
    (this.info & bm) > 0 !== e && (this.info ^= bm);
  }
  get marker() {
    return (this.info & bm) > 0;
  }
  get keep() {
    return (this.info & y3) > 0;
  }
  set keep(e) {
    this.keep !== e && (this.info ^= y3);
  }
  get countable() {
    return (this.info & w3) > 0;
  }
  get deleted() {
    return (this.info & mm) > 0;
  }
  set deleted(e) {
    this.deleted !== e && (this.info ^= mm);
  }
  markDeleted() {
    this.info |= mm;
  }
  getMissing(e, n) {
    if (this.origin && this.origin.client !== this.id.client && this.origin.clock >= pi(n, this.origin.client))
      return this.origin.client;
    if (this.rightOrigin && this.rightOrigin.client !== this.id.client && this.rightOrigin.clock >= pi(n, this.rightOrigin.client))
      return this.rightOrigin.client;
    if (this.parent && this.parent.constructor === ka && this.id.client !== this.parent.client && this.parent.clock >= pi(n, this.parent.client))
      return this.parent.client;
    if (this.origin && (this.left = N3(e, n, this.origin), this.origin = this.left.lastId), this.rightOrigin && (this.right = Jo(e, this.rightOrigin), this.rightOrigin = this.right.id), (this.left && this.left.constructor === er || this.right && this.right.constructor === er) && (this.parent = null), !this.parent)
      this.left && this.left.constructor === ei && (this.parent = this.left.parent, this.parentSub = this.left.parentSub), this.right && this.right.constructor === ei && (this.parent = this.right.parent, this.parentSub = this.right.parentSub);
    else if (this.parent.constructor === ka) {
      const i = km(n, this.parent);
      i.constructor === er ? this.parent = null : this.parent = i.content.type;
    }
    return null;
  }
  integrate(e, n) {
    if (n > 0 && (this.id.clock += n, this.left = N3(e, e.doc.store, jt(this.id.client, this.id.clock - 1)), this.origin = this.left.lastId, this.content = this.content.splice(n), this.length -= n), this.parent) {
      if (!this.left && (!this.right || this.right.left !== null) || this.left && this.left.right !== this.right) {
        let i = this.left, r;
        if (i !== null)
          r = i.right;
        else if (this.parentSub !== null)
          for (r = this.parent._map.get(this.parentSub) || null; r !== null && r.left !== null; )
            r = r.left;
        else
          r = this.parent._start;
        const s = /* @__PURE__ */ new Set(), o = /* @__PURE__ */ new Set();
        for (; r !== null && r !== this.right; ) {
          if (o.add(r), s.add(r), oh(this.origin, r.origin)) {
            if (r.id.client < this.id.client)
              i = r, s.clear();
            else if (oh(this.rightOrigin, r.rightOrigin))
              break;
          } else if (r.origin !== null && o.has(km(e.doc.store, r.origin)))
            s.has(km(e.doc.store, r.origin)) || (i = r, s.clear());
          else
            break;
          r = r.right;
        }
        this.left = i;
      }
      if (this.left !== null) {
        const i = this.left.right;
        this.right = i, this.left.right = this;
      } else {
        let i;
        if (this.parentSub !== null)
          for (i = this.parent._map.get(this.parentSub) || null; i !== null && i.left !== null; )
            i = i.left;
        else
          i = this.parent._start, this.parent._start = this;
        this.right = i;
      }
      this.right !== null ? this.right.left = this : this.parentSub !== null && (this.parent._map.set(this.parentSub, this), this.left !== null && this.left.delete(e)), this.parentSub === null && this.countable && !this.deleted && (this.parent._length += this.length), wO(e.doc.store, this), this.content.integrate(e, this), j3(e, this.parent, this.parentSub), (this.parent._item !== null && this.parent._item.deleted || this.parentSub !== null && this.right !== null) && this.delete(e);
    } else
      new er(this.id, this.length).integrate(e, 0);
  }
  get next() {
    let e = this.right;
    for (; e !== null && e.deleted; )
      e = e.right;
    return e;
  }
  get prev() {
    let e = this.left;
    for (; e !== null && e.deleted; )
      e = e.left;
    return e;
  }
  get lastId() {
    return this.length === 1 ? this.id : jt(this.id.client, this.id.clock + this.length - 1);
  }
  mergeWith(e) {
    if (this.constructor === e.constructor && oh(e.origin, this.lastId) && this.right === e && oh(this.rightOrigin, e.rightOrigin) && this.id.client === e.id.client && this.id.clock + this.length === e.id.clock && this.deleted === e.deleted && this.redone === null && e.redone === null && this.content.constructor === e.content.constructor && this.content.mergeWith(e.content)) {
      const n = this.parent._searchMarker;
      return n && n.forEach((i) => {
        i.p === e && (i.p = this, !this.deleted && this.countable && (i.index -= this.length));
      }), e.keep && (this.keep = !0), this.right = e.right, this.right !== null && (this.right.left = this), this.length += e.length, !0;
    }
    return !1;
  }
  delete(e) {
    if (!this.deleted) {
      const n = this.parent;
      this.countable && this.parentSub === null && (n._length -= this.length), this.markDeleted(), Kd(e.deleteSet, this.id.client, this.id.clock, this.length), j3(e, n, this.parentSub), this.content.delete(e);
    }
  }
  gc(e, n) {
    if (!this.deleted)
      throw Ts();
    this.content.gc(e), n ? Ere(e, this, new er(this.id, this.length)) : this.content = new Nu(this.length);
  }
  write(e, n) {
    const i = n > 0 ? jt(this.id.client, this.id.clock + n - 1) : this.origin, r = this.rightOrigin, s = this.parentSub, o = this.content.getRef() & ig | (i === null ? 0 : rr) | (r === null ? 0 : Js) | (s === null ? 0 : Ru);
    if (e.writeInfo(o), i !== null && e.writeLeftID(i), r !== null && e.writeRightID(r), i === null && r === null) {
      const l = this.parent;
      if (l._item !== void 0) {
        const a = l._item;
        if (a === null) {
          const c = vre(l);
          e.writeParentInfo(!0), e.writeString(c);
        } else
          e.writeParentInfo(!1), e.writeLeftID(a.id);
      } else
        l.constructor === String ? (e.writeParentInfo(!0), e.writeString(l)) : l.constructor === ka ? (e.writeParentInfo(!1), e.writeLeftID(l)) : Ts();
      s !== null && e.writeString(s);
    }
    this.content.write(e, n);
  }
}
const zO = (t, e) => _se[e & ig](t), _se = [
  () => {
    Ts();
  },
  nse,
  ose,
  tse,
  ase,
  rse,
  sse,
  bse,
  lse,
  ise,
  () => {
    Ts();
  }
], yse = 10;
class hr extends R_ {
  get deleted() {
    return !0;
  }
  delete() {
  }
  mergeWith(e) {
    return this.constructor !== e.constructor ? !1 : (this.length += e.length, !0);
  }
  integrate(e, n) {
    Ts();
  }
  write(e, n) {
    e.writeInfo(yse), ct(e.restEncoder, this.length - n);
  }
  getMissing(e, n) {
    return null;
  }
}
const VO = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : {}, UO = "__ $YJS$ __";
VO[UO] === !0 && console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");
VO[UO] = !0;
var b0, _0, wse = function(e) {
  return e();
};
function vse(t, e) {
  if (_0)
    return _0(t, e);
  wse(t);
}
function zl(t, e, n) {
  if (b0)
    return b0.apply(null, arguments);
  throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.");
}
function kse(t) {
  b0 = function(n, i, r) {
    var s = t.createAtom(n);
    return i && i(), s;
  }, _0 = function(n, i) {
    return t.reaction(n, i, {
      fireImmediately: !1
    });
  };
}
var z3 = /* @__PURE__ */ new WeakSet();
function Cse(t) {
  if (z3.has(t))
    return t;
  z3.add(t);
  var e, n = /* @__PURE__ */ new Map();
  function i() {
    if (!e) {
      var f = function(d) {
        (d.changes.added.size || d.changes.deleted.size || d.changes.keys.size || d.changes.delta.length) && e.reportChanged();
      };
      e = zl("map", function() {
        t.observe(f);
      }, function() {
        t.unobserve(f);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  function r(f) {
    var h = n.get(f);
    if (!h) {
      var d = function(g) {
        h.reportChanged();
      };
      h = zl(f + "", function() {
        t.observe(d);
      }, function() {
        t.unobserve(d);
      }), n.set(f, h);
    }
    h.reportObserved(t._implicitObserver);
  }
  var s = t.get;
  t.get = function(f) {
    if (typeof f != "number")
      throw new Error("unexpected");
    r(f);
    var h = Reflect.apply(s, this, arguments);
    return h;
  };
  function o(f) {
    var h = t[f];
    t[f] = function() {
      i();
      var d = Reflect.apply(h, this, arguments);
      return d;
    };
  }
  function l(f) {
    var h = t, d = Object.getOwnPropertyDescriptor(h, f);
    if (d || (h = Object.getPrototypeOf(h), d = Object.getOwnPropertyDescriptor(h, f)), d || (h = Object.getPrototypeOf(h), d = Object.getOwnPropertyDescriptor(h, f)), !d)
      throw new Error("property not found");
    var p = d.get;
    d.get = function() {
      this._disableTracking || i();
      var g = Reflect.apply(p, this, arguments);
      return g;
    }, Object.defineProperty(t, f, d);
  }
  function a(f, h) {
    var d = t, p = Object.getOwnPropertyDescriptor(d, f);
    if (p || (d = Object.getPrototypeOf(d), p = Object.getOwnPropertyDescriptor(d, f)), p || (d = Object.getPrototypeOf(d), p = Object.getOwnPropertyDescriptor(d, f)), !p)
      throw new Error("property not found");
    Object.defineProperty(t, h, p);
  }
  o("forEach"), o("toJSON"), o("toArray"), o("slice"), o("map"), a("length", "lengthUntracked"), l("length");
  var c = t.push;
  t.push = function(f) {
    this._disableTracking = !0;
    var h = c.call(this, f);
    return this._disableTracking = !1, h;
  };
  var u = t.slice;
  return t.slice = function(f, h) {
    this._disableTracking = !0;
    var d = u.call(this, f, h);
    return this._disableTracking = !1, d;
  }, t;
}
var V3 = /* @__PURE__ */ new WeakSet();
function Sse(t) {
  if (V3.has(t))
    return t;
  V3.add(t);
  var e;
  function n() {
    if (!e) {
      var s = Array.from(t.share.keys()), o = function(a) {
        var c = Array.from(t.share.keys());
        JSON.stringify(s) !== JSON.stringify(c) && (s = c, e.reportChanged());
      };
      e = zl("map", function() {
        t.on("beforeObserverCalls", o);
      }, function() {
        t.off("beforeObserverCalls", o);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  var i = t.get;
  t.get = function(s) {
    if (typeof s != "string")
      throw new Error("unexpected");
    var o = Reflect.apply(i, this, arguments);
    return hg(o), o;
  };
  function r(s) {
    var o = t[s], l;
    t[s] = function() {
      var a, c = arguments;
      return n(), l && l.removeObservers(), l = vse(function() {
        return a = Reflect.apply(o, t, c), a;
      }, function() {
        return e.reportChanged();
      }), a;
    };
  }
  return r("toJSON"), Object.defineProperty(t, "keys", {
    get: function() {
      return n(), Object.keys(t.share);
    }
  }), t;
}
var U3 = /* @__PURE__ */ new WeakSet();
function Ese(t) {
  if (U3.has(t))
    return t;
  U3.add(t);
  var e, n = /* @__PURE__ */ new Map();
  function i() {
    if (!e) {
      var l = function(c) {
        (c.changes.added.size || c.changes.deleted.size || c.changes.keys.size || c.changes.delta.length) && e.reportChanged();
      };
      e = zl("map", function() {
        t.observe(l);
      }, function() {
        t.unobserve(l);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  function r(l) {
    var a = n.get(l);
    if (!a) {
      var c = function(f) {
        f.keysChanged.has(l) && (f.changes.added.size || f.changes.deleted.size || f.changes.keys.size || f.changes.delta.length) && a.reportChanged();
      };
      a = zl(l, function() {
        t.observe(c);
      }, function() {
        t.unobserve(c);
      }), n.set(l, a);
    }
    a.reportObserved(t._implicitObserver);
  }
  var s = t.get;
  t.get = function(l) {
    if (typeof l != "string")
      throw new Error("unexpected");
    r(l);
    var a = Reflect.apply(s, this, arguments);
    return a;
  };
  function o(l) {
    var a = t[l];
    t[l] = function() {
      i();
      var c = Reflect.apply(a, this, arguments);
      return c;
    };
  }
  return o("values"), o("entries"), o("keys"), o("forEach"), o("toJSON"), t;
}
var H3 = /* @__PURE__ */ new WeakSet();
function W3(t) {
  if (H3.has(t))
    return t;
  H3.add(t);
  var e, n = function(s) {
    e.reportChanged();
  };
  e = zl("text", function() {
    t.observe(n);
  }, function() {
    t.unobserve(n);
  });
  function i(r) {
    var s = t[r];
    t[r] = function() {
      e.reportObserved(this._implicitObserver);
      var o = Reflect.apply(s, this, arguments);
      return o;
    };
  }
  return i("toString"), i("toJSON"), t;
}
var q3 = /* @__PURE__ */ new WeakSet();
function J3(t) {
  if (q3.has(t))
    return t;
  q3.add(t);
  var e, n = function(o) {
    (o.changes.added.size || o.changes.deleted.size || o.changes.keys.size || o.changes.delta.length) && e.reportChanged();
  };
  e = zl("xml", function() {
    t.observe(n);
  }, function() {
    t.unobserve(n);
  });
  function i(s) {
    var o = t[s];
    t[s] = function() {
      e.reportObserved(this._implicitObserver);
      var l = Reflect.apply(o, this, arguments);
      return l;
    };
  }
  function r(s) {
    var o = t, l = Object.getOwnPropertyDescriptor(o, s);
    if (l || (o = Object.getPrototypeOf(o), l = Object.getOwnPropertyDescriptor(o, s)), l || (o = Object.getPrototypeOf(o), l = Object.getOwnPropertyDescriptor(o, s)), !l)
      throw new Error("property not found");
    var a = l.get;
    l.get = function() {
      e.reportObserved(this._implicitObserver);
      var c = Reflect.apply(a, this, arguments);
      return c;
    }, Object.defineProperty(t, s, l);
  }
  return i("toString"), i("toDOM"), i("toArray"), i("getAttribute"), r("firstChild"), t;
}
function hg(t) {
  return t instanceof xl || t instanceof no ? W3(t) : t instanceof ys ? Cse(t) : t instanceof Rs ? Ese(t) : t instanceof il || Object.prototype.hasOwnProperty.call(t, "autoLoad") ? Sse(t) : t instanceof Ps || t instanceof Ko ? J3(t) : t;
}
function K3(t) {
  t.share.forEach(function(e) {
    e.constructor !== jn && hg(e);
  });
}
function G3(t, e) {
  for (var n = t.length - 1; n >= e; n--) {
    var i = t[n];
    if (!i.deleted) {
      var r;
      if (i instanceof er)
        continue;
      (r = i.content) == null || r.getContent().forEach(function(s) {
        s instanceof jn && hg(s);
      });
    }
  }
}
var Y3 = /* @__PURE__ */ new WeakSet();
function Ase(t) {
  Y3.has(t) || (Y3.add(t), hg(t), t.store.clients.forEach(function(e) {
    e && G3(e, 0);
  }), K3(t), t.on("beforeObserverCalls", function(e) {
    K3(t), e.afterState.forEach(function(n, i) {
      var r = e.beforeState.get(i) || 0;
      if (r !== n) {
        var s = e.doc.store.clients.get(i);
        if (!s)
          return;
        var o = Ur(s, r);
        G3(s, o);
      }
    });
  }));
}
var Lu = function(e) {
  this.value = void 0, this.value = e;
};
function Mse(t) {
  return ArrayBuffer.isView(t) ? new Lu(t) : new Lu(Object.freeze(t));
}
function Ose(t) {
  var e = function() {
    var a, c = (a = this[kr]) == null ? void 0 : a.implicitObserver;
    t._implicitObserver = c;
    var u = t.slice.bind(t).apply(t, arguments);
    return u.map(function(f) {
      var h = dg(f, c);
      return c && typeof h == "object" ? Ga(h, c) : h;
    });
  }, n = function(a) {
    return a.map(function(c) {
      var u = P_(c), f = $a(u) || u;
      if (f instanceof Lu && (f = f.value), f instanceof jn && f.parent)
        throw new Error("Not supported: reassigning object that already occurs in the tree.");
      return f;
    });
  }, i = function() {
    return [].findIndex.apply(e.apply(this), arguments);
  }, r = {
    slice: e,
    unshift: function() {
      return t.unshift(n([].slice.call(arguments))), t.lengthUntracked;
    },
    push: function() {
      return t.push(n([].slice.call(arguments))), t.lengthUntracked;
    },
    insert: t.insert.bind(t),
    toJSON: t.toJSON.bind(t),
    forEach: function() {
      return [].forEach.apply(e.apply(this), arguments);
    },
    every: function() {
      return [].every.apply(e.apply(this), arguments);
    },
    filter: function() {
      return [].filter.apply(e.apply(this), arguments);
    },
    find: function() {
      return [].find.apply(e.apply(this), arguments);
    },
    findIndex: i,
    some: function() {
      return [].some.apply(e.apply(this), arguments);
    },
    includes: function() {
      return [].includes.apply(e.apply(this), arguments);
    },
    map: function() {
      return [].map.apply(e.apply(this), arguments);
    },
    indexOf: function() {
      var a = arguments[0];
      return i.call(this, function(c) {
        return Dse(c, a);
      });
    },
    splice: function() {
      var a = arguments[0] < 0 ? t.length - Math.abs(arguments[0]) : arguments[0], c = arguments[1], u = Array.from(Array.from(arguments).slice(2)), f = e.apply(this, [a, Number.isInteger(c) ? a + c : void 0]);
      return t.doc ? t.doc.transact(function() {
        t.delete(a, c), t.insert(a, n(u));
      }) : (t.delete(a, c), t.insert(a, n(u))), f;
    }
  }, s = [];
  for (var o in r)
    s[o] = r[o];
  return s;
}
function Sc(t) {
  if (typeof t == "string" && t.trim().length) {
    var e = Number(t);
    if (Number.isInteger(e))
      return e;
  }
  return t;
}
function X3(t, e) {
  if (e === void 0 && (e = new ys()), e[ni])
    throw new Error("unexpected");
  var n = Ose(e), i = new Proxy(n, {
    set: function(s, o, l) {
      var a = Sc(o);
      throw typeof a != "number" ? new Error() : new Error("array assignment is not implemented / supported");
    },
    get: function(s, o, l) {
      var a = Sc(o);
      if (a === pg)
        return e;
      if (typeof a == "number") {
        var c;
        if (l && l[kr]) {
          var u;
          c = (u = l[kr]) == null ? void 0 : u.implicitObserver, e._implicitObserver = c;
        }
        var f = e.get(a);
        return f = dg(f, c), f;
      }
      if (a === Symbol.toStringTag)
        return "Array";
      if (a === Symbol.iterator) {
        var h = e.slice();
        return Reflect.get(h, a);
      }
      if (a === "length")
        return e.length;
      var d = Reflect.get(s, a, l);
      return d;
    },
    deleteProperty: function(s, o) {
      var l = Sc(o);
      if (typeof l != "number")
        throw new Error();
      return l < e.lengthUntracked && l >= 0 ? (e.delete(l), !0) : !1;
    },
    has: function(s, o) {
      var l = Sc(o);
      return typeof l != "number" ? Reflect.has(s, l) : l < e.lengthUntracked && l >= 0;
    },
    getOwnPropertyDescriptor: function(s, o) {
      var l = Sc(o);
      if (l === "length")
        return {
          enumerable: !1,
          configurable: !1,
          writable: !0
        };
      if (typeof l == "number" && l >= 0 && l < e.lengthUntracked)
        return {
          enumerable: !0,
          configurable: !0,
          writable: !0
        };
    },
    ownKeys: function(s) {
      for (var o = [], l = 0; l < e.length; l++)
        o.push(l + "");
      return o.push("length"), o;
    }
  });
  return n.push.apply(i, t), i;
}
function Q3(t, e) {
  if (e === void 0 && (e = new Rs()), e[ni])
    throw new Error("unexpected");
  var n = new Proxy({}, {
    set: function(s, o, l) {
      if (typeof o != "string")
        throw new Error();
      var a = P_(l), c = $a(a) || a;
      if (c instanceof Lu && (c = c.value), c instanceof jn && c.parent)
        throw new Error("Not supported: reassigning object that already occurs in the tree.");
      return e.set(o, c), !0;
    },
    get: function(s, o, l) {
      if (o === pg)
        return e;
      if (typeof o != "string")
        return Reflect.get(s, o);
      var a;
      if (l && l[kr]) {
        var c;
        a = (c = l[kr]) == null ? void 0 : c.implicitObserver, e._implicitObserver = a;
      }
      var u = e.get(o);
      return u = dg(u, a), u;
    },
    deleteProperty: function(s, o) {
      if (typeof o != "string")
        throw new Error();
      return e.has(o) ? (e.delete(o), !0) : !1;
    },
    has: function(s, o) {
      return !!(typeof o == "string" && e.has(o));
    },
    getOwnPropertyDescriptor: function(s, o) {
      if (typeof o == "string" && e.has(o))
        return {
          enumerable: !0,
          configurable: !0
        };
    },
    ownKeys: function(s) {
      return Array.from(e.keys());
    }
  });
  Jc.set(e, n);
  for (var i in t)
    n[i] = t[i];
  return n;
}
function Tse(t) {
  return t instanceof jn;
}
var Jc = /* @__PURE__ */ new WeakMap();
function dg(t, e) {
  if (Tse(t)) {
    if (t._implicitObserver = e, t instanceof ys || t instanceof Rs) {
      if (!Jc.has(t)) {
        var n = P_(t);
        Jc.set(t, n);
      }
      t = Jc.get(t);
    } else if (t instanceof Ko || t instanceof Ps || t instanceof xl || t instanceof Za || t instanceof no)
      l_(t), t.__v_skip = !0;
    else
      throw new Error("unknown YType");
    return t;
  } else {
    if (t === null)
      return null;
    if (typeof t == "object")
      return Mse(t);
  }
  return t;
}
function P_(t) {
  if (t == null)
    return t;
  if (t = $a(t) || t, t instanceof ys)
    return X3([], t);
  if (t instanceof Rs)
    return Q3({}, t);
  if (typeof t == "string")
    return t;
  if (Array.isArray(t))
    return X3(t);
  if (t instanceof Ko || t instanceof Ps || t instanceof xl || t instanceof Za)
    return t;
  if (t instanceof no)
    return t;
  if (typeof t == "object")
    return t instanceof Lu ? t : Q3(t);
  if (typeof t == "number" || typeof t == "boolean")
    return t;
  throw new Error("invalid");
}
function Rse(t) {
  for (var e = 0, n = Object.entries(t); e < n.length; e++) {
    var i = n[e], r = i[1];
    if (Array.isArray(r)) {
      if (r.length !== 0)
        throw new Error("Root Array initializer must always be empty array");
    } else if (r && typeof r == "object") {
      if (Object.keys(r).length !== 0 || Object.getPrototypeOf(r) !== Object.prototype)
        throw new Error("Root Object initializer must always be {}");
    } else if (r !== "xml" && r !== "text")
      throw new Error("unknown Root initializer");
  }
}
function Z3(t, e, n) {
  var i = e[n];
  if (!i) {
    n !== "__v_raw" && n !== "__v_isRef" && n !== "__v_isReadonly" && console.warn("property not found on root doc", n);
    return;
  }
  return i === "xml" ? t.getXmlFragment(n) : i === "text" ? t.getText(n) : Array.isArray(i) ? t.getArray(n) : t.getMap(n);
}
function Pse(t, e) {
  if (t[ni])
    throw new Error("unexpected");
  Rse(e);
  var n = new Proxy({}, {
    set: function(r, s, o) {
      throw typeof s != "string" ? new Error() : new Error("cannot set new elements on root doc");
    },
    get: function(r, s, o) {
      if (s === pg)
        return t;
      if (typeof s != "string")
        return Reflect.get(r, s);
      var l;
      if (o && o[kr]) {
        var a;
        l = (a = o[kr]) == null ? void 0 : a.implicitObserver, t._implicitObserver = l;
      }
      if (s === "toJSON") {
        for (var c = 0, u = Object.keys(e); c < u.length; c++) {
          var f = u[c];
          Z3(t, e, f);
        }
        var h = Reflect.get(t, s);
        return h;
      }
      var d = Z3(t, e, s);
      return d = dg(d, l), d;
    },
    deleteProperty: function(r, s) {
      throw new Error("deleteProperty not available for doc");
    },
    has: function(r, s) {
      return !!(typeof s == "string" && t.share.has(s));
    },
    getOwnPropertyDescriptor: function(r, s) {
      if (typeof s == "string" && t.share.has(s) || s === "toJSON")
        return {
          enumerable: !0,
          configurable: !0
        };
    },
    ownKeys: function(r) {
      return Array.from(t.share.keys());
    }
  });
  return Jc.set(t, n), n;
}
kse(Kne);
var pg = Symbol("INTERNAL_SYMBOL");
function Ise(t) {
  var e = $a(t);
  if (!(e instanceof il))
    throw new Error("store is not a valid syncedStore that maps to a Y.Doc");
  return e;
}
function $a(t) {
  if (!(typeof t != "object" || t === null)) {
    var e = t[pg];
    return e && (l_(e), e.__v_skip = !0), e;
  }
}
function Dse(t, e) {
  if (t === e)
    return !0;
  if (typeof t == "object" && typeof e == "object") {
    var n = $a(t), i = $a(e);
    return !n || !i ? !1 : n === i;
  }
  return !1;
}
function Nse(t, e) {
  return e === void 0 && (e = new il()), Ase(e), Pse(e, t);
}
const Lse = 1200, jse = 2500, $d = 3e4, y0 = (t) => {
  if (t.shouldConnect && t.ws === null) {
    const e = new WebSocket(t.url), n = t.binaryType;
    let i = null;
    n && (e.binaryType = n), t.ws = e, t.connecting = !0, t.connected = !1, e.onmessage = (o) => {
      t.lastMessageReceived = to();
      const l = o.data, a = typeof l == "string" ? JSON.parse(l) : l;
      a && a.type === "pong" && (clearTimeout(i), i = setTimeout(s, $d / 2)), t.emit("message", [a, t]);
    };
    const r = (o) => {
      t.ws !== null && (t.ws = null, t.connecting = !1, t.connected ? (t.connected = !1, t.emit("disconnect", [{ type: "disconnect", error: o }, t])) : t.unsuccessfulReconnects++, setTimeout(y0, a_(Qne(t.unsuccessfulReconnects + 1) * Lse, jse), t)), clearTimeout(i);
    }, s = () => {
      t.ws === e && t.send({
        type: "ping"
      });
    };
    e.onclose = () => r(null), e.onerror = (o) => r(o), e.onopen = () => {
      t.lastMessageReceived = to(), t.connecting = !1, t.connected = !0, t.unsuccessfulReconnects = 0, t.emit("connect", [{ type: "connect" }, t]), i = setTimeout(s, $d / 2);
    };
  }
};
class Bse extends ng {
  constructor(e, { binaryType: n } = {}) {
    super(), this.url = e, this.ws = null, this.binaryType = n || null, this.connected = !1, this.connecting = !1, this.unsuccessfulReconnects = 0, this.lastMessageReceived = 0, this.shouldConnect = !0, this._checkInterval = setInterval(() => {
      this.connected && $d < to() - this.lastMessageReceived && this.ws.close();
    }, $d / 2), y0(this);
  }
  send(e) {
    this.ws && this.ws.send(JSON.stringify(e));
  }
  destroy() {
    clearInterval(this._checkInterval), this.disconnect(), super.destroy();
  }
  disconnect() {
    this.shouldConnect = !1, this.ws !== null && this.ws.close();
  }
  connect() {
    this.shouldConnect = !0, !this.connected && this.ws === null && y0(this);
  }
}
const HO = /* @__PURE__ */ new Map();
class xse {
  constructor(e) {
    this.room = e, this.onmessage = null, oie((n) => n.key === e && this.onmessage !== null && this.onmessage({ data: nO(n.newValue || "") }));
  }
  postMessage(e) {
    GM.setItem(this.room, tO(Mie(e)));
  }
}
const Fse = typeof BroadcastChannel > "u" ? xse : BroadcastChannel, I_ = (t) => Cr(HO, t, () => {
  const e = /* @__PURE__ */ new Set(), n = new Fse(t);
  return n.onmessage = (i) => e.forEach((r) => r(i.data, "broadcastchannel")), {
    bc: n,
    subs: e
  };
}), zse = (t, e) => (I_(t).subs.add(e), e), Vse = (t, e) => {
  const n = I_(t), i = n.subs.delete(e);
  return i && n.subs.size === 0 && (n.bc.close(), HO.delete(t)), i;
}, Use = (t, e, n = null) => {
  const i = I_(t);
  i.bc.postMessage(e), i.subs.forEach((r) => r(e, n));
}, Hse = () => {
  let t = !0;
  return (e, n) => {
    if (t) {
      t = !1;
      try {
        e();
      } finally {
        t = !0;
      }
    } else
      n !== void 0 && n();
  };
};
var WO = { exports: {} };
(function(t, e) {
  (function(n) {
    t.exports = n();
  })(function() {
    var n = Math.floor, i = Math.abs, r = Math.pow;
    return function() {
      function s(o, l, a) {
        function c(h, d) {
          if (!l[h]) {
            if (!o[h]) {
              var p = typeof Zf == "function" && Zf;
              if (!d && p)
                return p(h, !0);
              if (u)
                return u(h, !0);
              var g = new Error("Cannot find module '" + h + "'");
              throw g.code = "MODULE_NOT_FOUND", g;
            }
            var _ = l[h] = { exports: {} };
            o[h][0].call(_.exports, function(m) {
              var C = o[h][1][m];
              return c(C || m);
            }, _, _.exports, s, o, l, a);
          }
          return l[h].exports;
        }
        for (var u = typeof Zf == "function" && Zf, f = 0; f < a.length; f++)
          c(a[f]);
        return c;
      }
      return s;
    }()({ 1: [function(s, o, l) {
      function a(k) {
        var S = k.length;
        if (0 < S % 4)
          throw new Error("Invalid string. Length must be a multiple of 4");
        var O = k.indexOf("=");
        O === -1 && (O = S);
        var w = O === S ? 0 : 4 - O % 4;
        return [O, w];
      }
      function c(k, S, O) {
        return 3 * (S + O) / 4 - O;
      }
      function u(k) {
        var S, O, w = a(k), A = w[0], D = w[1], R = new _(c(k, A, D)), M = 0, H = 0 < D ? A - 4 : A;
        for (O = 0; O < H; O += 4)
          S = g[k.charCodeAt(O)] << 18 | g[k.charCodeAt(O + 1)] << 12 | g[k.charCodeAt(O + 2)] << 6 | g[k.charCodeAt(O + 3)], R[M++] = 255 & S >> 16, R[M++] = 255 & S >> 8, R[M++] = 255 & S;
        return D === 2 && (S = g[k.charCodeAt(O)] << 2 | g[k.charCodeAt(O + 1)] >> 4, R[M++] = 255 & S), D === 1 && (S = g[k.charCodeAt(O)] << 10 | g[k.charCodeAt(O + 1)] << 4 | g[k.charCodeAt(O + 2)] >> 2, R[M++] = 255 & S >> 8, R[M++] = 255 & S), R;
      }
      function f(k) {
        return p[63 & k >> 18] + p[63 & k >> 12] + p[63 & k >> 6] + p[63 & k];
      }
      function h(k, S, O) {
        for (var w, A = [], D = S; D < O; D += 3)
          w = (16711680 & k[D] << 16) + (65280 & k[D + 1] << 8) + (255 & k[D + 2]), A.push(f(w));
        return A.join("");
      }
      function d(k) {
        for (var S, O = k.length, w = O % 3, A = [], D = 16383, R = 0, M = O - w; R < M; R += D)
          A.push(h(k, R, R + D > M ? M : R + D));
        return w === 1 ? (S = k[O - 1], A.push(p[S >> 2] + p[63 & S << 4] + "==")) : w === 2 && (S = (k[O - 2] << 8) + k[O - 1], A.push(p[S >> 10] + p[63 & S >> 4] + p[63 & S << 2] + "=")), A.join("");
      }
      l.byteLength = function(k) {
        var S = a(k), O = S[0], w = S[1];
        return 3 * (O + w) / 4 - w;
      }, l.toByteArray = u, l.fromByteArray = d;
      for (var p = [], g = [], _ = typeof Uint8Array > "u" ? Array : Uint8Array, m = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", C = 0, v = m.length; C < v; ++C)
        p[C] = m[C], g[m.charCodeAt(C)] = C;
      g[45] = 62, g[95] = 63;
    }, {}], 2: [function() {
    }, {}], 3: [function(s, o, l) {
      (function() {
        (function() {
          var a = String.fromCharCode, c = Math.min;
          function u(y) {
            if (2147483647 < y)
              throw new RangeError('The value "' + y + '" is invalid for option "size"');
            var T = new Uint8Array(y);
            return T.__proto__ = f.prototype, T;
          }
          function f(y, T, B) {
            if (typeof y == "number") {
              if (typeof T == "string")
                throw new TypeError('The "string" argument must be of type string. Received type number');
              return g(y);
            }
            return h(y, T, B);
          }
          function h(y, T, B) {
            if (typeof y == "string")
              return _(y, T);
            if (ArrayBuffer.isView(y))
              return m(y);
            if (y == null)
              throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof y);
            if (ae(y, ArrayBuffer) || y && ae(y.buffer, ArrayBuffer))
              return C(y, T, B);
            if (typeof y == "number")
              throw new TypeError('The "value" argument must not be of type number. Received type number');
            var X = y.valueOf && y.valueOf();
            if (X != null && X !== y)
              return f.from(X, T, B);
            var G = v(y);
            if (G)
              return G;
            if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof y[Symbol.toPrimitive] == "function")
              return f.from(y[Symbol.toPrimitive]("string"), T, B);
            throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof y);
          }
          function d(y) {
            if (typeof y != "number")
              throw new TypeError('"size" argument must be of type number');
            if (0 > y)
              throw new RangeError('The value "' + y + '" is invalid for option "size"');
          }
          function p(y, T, B) {
            return d(y), 0 >= y || T === void 0 ? u(y) : typeof B == "string" ? u(y).fill(T, B) : u(y).fill(T);
          }
          function g(y) {
            return d(y), u(0 > y ? 0 : 0 | k(y));
          }
          function _(y, T) {
            if ((typeof T != "string" || T === "") && (T = "utf8"), !f.isEncoding(T))
              throw new TypeError("Unknown encoding: " + T);
            var B = 0 | S(y, T), X = u(B), G = X.write(y, T);
            return G !== B && (X = X.slice(0, G)), X;
          }
          function m(y) {
            for (var T = 0 > y.length ? 0 : 0 | k(y.length), B = u(T), X = 0; X < T; X += 1)
              B[X] = 255 & y[X];
            return B;
          }
          function C(y, T, B) {
            if (0 > T || y.byteLength < T)
              throw new RangeError('"offset" is outside of buffer bounds');
            if (y.byteLength < T + (B || 0))
              throw new RangeError('"length" is outside of buffer bounds');
            var X;
            return X = T === void 0 && B === void 0 ? new Uint8Array(y) : B === void 0 ? new Uint8Array(y, T) : new Uint8Array(y, T, B), X.__proto__ = f.prototype, X;
          }
          function v(y) {
            if (f.isBuffer(y)) {
              var T = 0 | k(y.length), B = u(T);
              return B.length === 0 || y.copy(B, 0, 0, T), B;
            }
            return y.length === void 0 ? y.type === "Buffer" && Array.isArray(y.data) ? m(y.data) : void 0 : typeof y.length != "number" || $(y.length) ? u(0) : m(y);
          }
          function k(y) {
            if (y >= 2147483647)
              throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + 2147483647 .toString(16) + " bytes");
            return 0 | y;
          }
          function S(y, T) {
            if (f.isBuffer(y))
              return y.length;
            if (ArrayBuffer.isView(y) || ae(y, ArrayBuffer))
              return y.byteLength;
            if (typeof y != "string")
              throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof y);
            var B = y.length, X = 2 < arguments.length && arguments[2] === !0;
            if (!X && B === 0)
              return 0;
            for (var G = !1; ; )
              switch (T) {
                case "ascii":
                case "latin1":
                case "binary":
                  return B;
                case "utf8":
                case "utf-8":
                  return De(y).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * B;
                case "hex":
                  return B >>> 1;
                case "base64":
                  return fe(y).length;
                default:
                  if (G)
                    return X ? -1 : De(y).length;
                  T = ("" + T).toLowerCase(), G = !0;
              }
          }
          function O(y, T, B) {
            var X = !1;
            if ((T === void 0 || 0 > T) && (T = 0), T > this.length || ((B === void 0 || B > this.length) && (B = this.length), 0 >= B) || (B >>>= 0, T >>>= 0, B <= T))
              return "";
            for (y || (y = "utf8"); ; )
              switch (y) {
                case "hex":
                  return ue(this, T, B);
                case "utf8":
                case "utf-8":
                  return K(this, T, B);
                case "ascii":
                  return N(this, T, B);
                case "latin1":
                case "binary":
                  return te(this, T, B);
                case "base64":
                  return L(this, T, B);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return q(this, T, B);
                default:
                  if (X)
                    throw new TypeError("Unknown encoding: " + y);
                  y = (y + "").toLowerCase(), X = !0;
              }
          }
          function w(y, T, B) {
            var X = y[T];
            y[T] = y[B], y[B] = X;
          }
          function A(y, T, B, X, G) {
            if (y.length === 0)
              return -1;
            if (typeof B == "string" ? (X = B, B = 0) : 2147483647 < B ? B = 2147483647 : -2147483648 > B && (B = -2147483648), B = +B, $(B) && (B = G ? 0 : y.length - 1), 0 > B && (B = y.length + B), B >= y.length) {
              if (G)
                return -1;
              B = y.length - 1;
            } else if (0 > B)
              if (G)
                B = 0;
              else
                return -1;
            if (typeof T == "string" && (T = f.from(T, X)), f.isBuffer(T))
              return T.length === 0 ? -1 : D(y, T, B, X, G);
            if (typeof T == "number")
              return T &= 255, typeof Uint8Array.prototype.indexOf == "function" ? G ? Uint8Array.prototype.indexOf.call(y, T, B) : Uint8Array.prototype.lastIndexOf.call(y, T, B) : D(y, [T], B, X, G);
            throw new TypeError("val must be string, number or Buffer");
          }
          function D(y, T, B, X, G) {
            function ce(Yt, Bn) {
              return Ne === 1 ? Yt[Bn] : Yt.readUInt16BE(Bn * Ne);
            }
            var Ne = 1, qe = y.length, mt = T.length;
            if (X !== void 0 && (X = (X + "").toLowerCase(), X === "ucs2" || X === "ucs-2" || X === "utf16le" || X === "utf-16le")) {
              if (2 > y.length || 2 > T.length)
                return -1;
              Ne = 2, qe /= 2, mt /= 2, B /= 2;
            }
            var dt;
            if (G) {
              var je = -1;
              for (dt = B; dt < qe; dt++)
                if (ce(y, dt) !== ce(T, je === -1 ? 0 : dt - je))
                  je !== -1 && (dt -= dt - je), je = -1;
                else if (je === -1 && (je = dt), dt - je + 1 === mt)
                  return je * Ne;
            } else
              for (B + mt > qe && (B = qe - mt), dt = B; 0 <= dt; dt--) {
                for (var vt = !0, zt = 0; zt < mt; zt++)
                  if (ce(y, dt + zt) !== ce(T, zt)) {
                    vt = !1;
                    break;
                  }
                if (vt)
                  return dt;
              }
            return -1;
          }
          function R(y, T, B, X) {
            B = +B || 0;
            var G = y.length - B;
            X ? (X = +X, X > G && (X = G)) : X = G;
            var ce = T.length;
            X > ce / 2 && (X = ce / 2);
            for (var Ne, qe = 0; qe < X; ++qe) {
              if (Ne = parseInt(T.substr(2 * qe, 2), 16), $(Ne))
                return qe;
              y[B + qe] = Ne;
            }
            return qe;
          }
          function M(y, T, B, X) {
            return Ae(De(T, y.length - B), y, B, X);
          }
          function H(y, T, B, X) {
            return Ae(Ve(T), y, B, X);
          }
          function J(y, T, B, X) {
            return H(y, T, B, X);
          }
          function I(y, T, B, X) {
            return Ae(fe(T), y, B, X);
          }
          function z(y, T, B, X) {
            return Ae(ye(T, y.length - B), y, B, X);
          }
          function L(y, T, B) {
            return T === 0 && B === y.length ? de.fromByteArray(y) : de.fromByteArray(y.slice(T, B));
          }
          function K(y, T, B) {
            B = c(y.length, B);
            for (var X = [], G = T; G < B; ) {
              var ce = y[G], Ne = null, qe = 239 < ce ? 4 : 223 < ce ? 3 : 191 < ce ? 2 : 1;
              if (G + qe <= B) {
                var mt, dt, je, vt;
                qe === 1 ? 128 > ce && (Ne = ce) : qe === 2 ? (mt = y[G + 1], (192 & mt) == 128 && (vt = (31 & ce) << 6 | 63 & mt, 127 < vt && (Ne = vt))) : qe === 3 ? (mt = y[G + 1], dt = y[G + 2], (192 & mt) == 128 && (192 & dt) == 128 && (vt = (15 & ce) << 12 | (63 & mt) << 6 | 63 & dt, 2047 < vt && (55296 > vt || 57343 < vt) && (Ne = vt))) : qe === 4 && (mt = y[G + 1], dt = y[G + 2], je = y[G + 3], (192 & mt) == 128 && (192 & dt) == 128 && (192 & je) == 128 && (vt = (15 & ce) << 18 | (63 & mt) << 12 | (63 & dt) << 6 | 63 & je, 65535 < vt && 1114112 > vt && (Ne = vt)));
              }
              Ne === null ? (Ne = 65533, qe = 1) : 65535 < Ne && (Ne -= 65536, X.push(55296 | 1023 & Ne >>> 10), Ne = 56320 | 1023 & Ne), X.push(Ne), G += qe;
            }
            return F(X);
          }
          function F(y) {
            var T = y.length;
            if (T <= 4096)
              return a.apply(String, y);
            for (var B = "", X = 0; X < T; )
              B += a.apply(String, y.slice(X, X += 4096));
            return B;
          }
          function N(y, T, B) {
            var X = "";
            B = c(y.length, B);
            for (var G = T; G < B; ++G)
              X += a(127 & y[G]);
            return X;
          }
          function te(y, T, B) {
            var X = "";
            B = c(y.length, B);
            for (var G = T; G < B; ++G)
              X += a(y[G]);
            return X;
          }
          function ue(y, T, B) {
            var X = y.length;
            (!T || 0 > T) && (T = 0), (!B || 0 > B || B > X) && (B = X);
            for (var G = "", ce = T; ce < B; ++ce)
              G += le(y[ce]);
            return G;
          }
          function q(y, T, B) {
            for (var X = y.slice(T, B), G = "", ce = 0; ce < X.length; ce += 2)
              G += a(X[ce] + 256 * X[ce + 1]);
            return G;
          }
          function re(y, T, B) {
            if (y % 1 != 0 || 0 > y)
              throw new RangeError("offset is not uint");
            if (y + T > B)
              throw new RangeError("Trying to access beyond buffer length");
          }
          function ie(y, T, B, X, G, ce) {
            if (!f.isBuffer(y))
              throw new TypeError('"buffer" argument must be a Buffer instance');
            if (T > G || T < ce)
              throw new RangeError('"value" argument is out of bounds');
            if (B + X > y.length)
              throw new RangeError("Index out of range");
          }
          function Z(y, T, B, X) {
            if (B + X > y.length)
              throw new RangeError("Index out of range");
            if (0 > B)
              throw new RangeError("Index out of range");
          }
          function Le(y, T, B, X, G) {
            return T = +T, B >>>= 0, G || Z(y, T, B, 4), he.write(y, T, B, X, 23, 4), B + 4;
          }
          function Ie(y, T, B, X, G) {
            return T = +T, B >>>= 0, G || Z(y, T, B, 8), he.write(y, T, B, X, 52, 8), B + 8;
          }
          function Fe(y) {
            if (y = y.split("=")[0], y = y.trim().replace(W, ""), 2 > y.length)
              return "";
            for (; y.length % 4 != 0; )
              y += "=";
            return y;
          }
          function le(y) {
            return 16 > y ? "0" + y.toString(16) : y.toString(16);
          }
          function De(y, T) {
            T = T || 1 / 0;
            for (var B, X = y.length, G = null, ce = [], Ne = 0; Ne < X; ++Ne) {
              if (B = y.charCodeAt(Ne), 55295 < B && 57344 > B) {
                if (!G) {
                  if (56319 < B) {
                    -1 < (T -= 3) && ce.push(239, 191, 189);
                    continue;
                  } else if (Ne + 1 === X) {
                    -1 < (T -= 3) && ce.push(239, 191, 189);
                    continue;
                  }
                  G = B;
                  continue;
                }
                if (56320 > B) {
                  -1 < (T -= 3) && ce.push(239, 191, 189), G = B;
                  continue;
                }
                B = (G - 55296 << 10 | B - 56320) + 65536;
              } else
                G && -1 < (T -= 3) && ce.push(239, 191, 189);
              if (G = null, 128 > B) {
                if (0 > (T -= 1))
                  break;
                ce.push(B);
              } else if (2048 > B) {
                if (0 > (T -= 2))
                  break;
                ce.push(192 | B >> 6, 128 | 63 & B);
              } else if (65536 > B) {
                if (0 > (T -= 3))
                  break;
                ce.push(224 | B >> 12, 128 | 63 & B >> 6, 128 | 63 & B);
              } else if (1114112 > B) {
                if (0 > (T -= 4))
                  break;
                ce.push(240 | B >> 18, 128 | 63 & B >> 12, 128 | 63 & B >> 6, 128 | 63 & B);
              } else
                throw new Error("Invalid code point");
            }
            return ce;
          }
          function Ve(y) {
            for (var T = [], B = 0; B < y.length; ++B)
              T.push(255 & y.charCodeAt(B));
            return T;
          }
          function ye(y, T) {
            for (var B, X, G, ce = [], Ne = 0; Ne < y.length && !(0 > (T -= 2)); ++Ne)
              B = y.charCodeAt(Ne), X = B >> 8, G = B % 256, ce.push(G), ce.push(X);
            return ce;
          }
          function fe(y) {
            return de.toByteArray(Fe(y));
          }
          function Ae(y, T, B, X) {
            for (var G = 0; G < X && !(G + B >= T.length || G >= y.length); ++G)
              T[G + B] = y[G];
            return G;
          }
          function ae(y, T) {
            return y instanceof T || y != null && y.constructor != null && y.constructor.name != null && y.constructor.name === T.name;
          }
          function $(y) {
            return y !== y;
          }
          var de = s("base64-js"), he = s("ieee754");
          l.Buffer = f, l.SlowBuffer = function(y) {
            return +y != y && (y = 0), f.alloc(+y);
          }, l.INSPECT_MAX_BYTES = 50, l.kMaxLength = 2147483647, f.TYPED_ARRAY_SUPPORT = function() {
            try {
              var y = new Uint8Array(1);
              return y.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
                return 42;
              } }, y.foo() === 42;
            } catch {
              return !1;
            }
          }(), f.TYPED_ARRAY_SUPPORT || typeof console > "u" || typeof console.error != "function" || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), Object.defineProperty(f.prototype, "parent", { enumerable: !0, get: function() {
            return f.isBuffer(this) ? this.buffer : void 0;
          } }), Object.defineProperty(f.prototype, "offset", { enumerable: !0, get: function() {
            return f.isBuffer(this) ? this.byteOffset : void 0;
          } }), typeof Symbol < "u" && Symbol.species != null && f[Symbol.species] === f && Object.defineProperty(f, Symbol.species, { value: null, configurable: !0, enumerable: !1, writable: !1 }), f.poolSize = 8192, f.from = function(y, T, B) {
            return h(y, T, B);
          }, f.prototype.__proto__ = Uint8Array.prototype, f.__proto__ = Uint8Array, f.alloc = function(y, T, B) {
            return p(y, T, B);
          }, f.allocUnsafe = function(y) {
            return g(y);
          }, f.allocUnsafeSlow = function(y) {
            return g(y);
          }, f.isBuffer = function(y) {
            return y != null && y._isBuffer === !0 && y !== f.prototype;
          }, f.compare = function(y, T) {
            if (ae(y, Uint8Array) && (y = f.from(y, y.offset, y.byteLength)), ae(T, Uint8Array) && (T = f.from(T, T.offset, T.byteLength)), !f.isBuffer(y) || !f.isBuffer(T))
              throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
            if (y === T)
              return 0;
            for (var B = y.length, X = T.length, G = 0, ce = c(B, X); G < ce; ++G)
              if (y[G] !== T[G]) {
                B = y[G], X = T[G];
                break;
              }
            return B < X ? -1 : X < B ? 1 : 0;
          }, f.isEncoding = function(y) {
            switch ((y + "").toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return !0;
              default:
                return !1;
            }
          }, f.concat = function(y, T) {
            if (!Array.isArray(y))
              throw new TypeError('"list" argument must be an Array of Buffers');
            if (y.length === 0)
              return f.alloc(0);
            var B;
            if (T === void 0)
              for (T = 0, B = 0; B < y.length; ++B)
                T += y[B].length;
            var X = f.allocUnsafe(T), G = 0;
            for (B = 0; B < y.length; ++B) {
              var ce = y[B];
              if (ae(ce, Uint8Array) && (ce = f.from(ce)), !f.isBuffer(ce))
                throw new TypeError('"list" argument must be an Array of Buffers');
              ce.copy(X, G), G += ce.length;
            }
            return X;
          }, f.byteLength = S, f.prototype._isBuffer = !0, f.prototype.swap16 = function() {
            var y = this.length;
            if (y % 2 != 0)
              throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var T = 0; T < y; T += 2)
              w(this, T, T + 1);
            return this;
          }, f.prototype.swap32 = function() {
            var y = this.length;
            if (y % 4 != 0)
              throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var T = 0; T < y; T += 4)
              w(this, T, T + 3), w(this, T + 1, T + 2);
            return this;
          }, f.prototype.swap64 = function() {
            var y = this.length;
            if (y % 8 != 0)
              throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var T = 0; T < y; T += 8)
              w(this, T, T + 7), w(this, T + 1, T + 6), w(this, T + 2, T + 5), w(this, T + 3, T + 4);
            return this;
          }, f.prototype.toString = function() {
            var y = this.length;
            return y === 0 ? "" : arguments.length === 0 ? K(this, 0, y) : O.apply(this, arguments);
          }, f.prototype.toLocaleString = f.prototype.toString, f.prototype.equals = function(y) {
            if (!f.isBuffer(y))
              throw new TypeError("Argument must be a Buffer");
            return this === y || f.compare(this, y) === 0;
          }, f.prototype.inspect = function() {
            var y = "", T = l.INSPECT_MAX_BYTES;
            return y = this.toString("hex", 0, T).replace(/(.{2})/g, "$1 ").trim(), this.length > T && (y += " ... "), "<Buffer " + y + ">";
          }, f.prototype.compare = function(y, T, B, X, G) {
            if (ae(y, Uint8Array) && (y = f.from(y, y.offset, y.byteLength)), !f.isBuffer(y))
              throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof y);
            if (T === void 0 && (T = 0), B === void 0 && (B = y ? y.length : 0), X === void 0 && (X = 0), G === void 0 && (G = this.length), 0 > T || B > y.length || 0 > X || G > this.length)
              throw new RangeError("out of range index");
            if (X >= G && T >= B)
              return 0;
            if (X >= G)
              return -1;
            if (T >= B)
              return 1;
            if (T >>>= 0, B >>>= 0, X >>>= 0, G >>>= 0, this === y)
              return 0;
            for (var ce = G - X, Ne = B - T, qe = c(ce, Ne), mt = this.slice(X, G), dt = y.slice(T, B), je = 0; je < qe; ++je)
              if (mt[je] !== dt[je]) {
                ce = mt[je], Ne = dt[je];
                break;
              }
            return ce < Ne ? -1 : Ne < ce ? 1 : 0;
          }, f.prototype.includes = function(y, T, B) {
            return this.indexOf(y, T, B) !== -1;
          }, f.prototype.indexOf = function(y, T, B) {
            return A(this, y, T, B, !0);
          }, f.prototype.lastIndexOf = function(y, T, B) {
            return A(this, y, T, B, !1);
          }, f.prototype.write = function(y, T, B, X) {
            if (T === void 0)
              X = "utf8", B = this.length, T = 0;
            else if (B === void 0 && typeof T == "string")
              X = T, B = this.length, T = 0;
            else if (isFinite(T))
              T >>>= 0, isFinite(B) ? (B >>>= 0, X === void 0 && (X = "utf8")) : (X = B, B = void 0);
            else
              throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
            var G = this.length - T;
            if ((B === void 0 || B > G) && (B = G), 0 < y.length && (0 > B || 0 > T) || T > this.length)
              throw new RangeError("Attempt to write outside buffer bounds");
            X || (X = "utf8");
            for (var ce = !1; ; )
              switch (X) {
                case "hex":
                  return R(this, y, T, B);
                case "utf8":
                case "utf-8":
                  return M(this, y, T, B);
                case "ascii":
                  return H(this, y, T, B);
                case "latin1":
                case "binary":
                  return J(this, y, T, B);
                case "base64":
                  return I(this, y, T, B);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return z(this, y, T, B);
                default:
                  if (ce)
                    throw new TypeError("Unknown encoding: " + X);
                  X = ("" + X).toLowerCase(), ce = !0;
              }
          }, f.prototype.toJSON = function() {
            return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
          }, f.prototype.slice = function(y, T) {
            var B = this.length;
            y = ~~y, T = T === void 0 ? B : ~~T, 0 > y ? (y += B, 0 > y && (y = 0)) : y > B && (y = B), 0 > T ? (T += B, 0 > T && (T = 0)) : T > B && (T = B), T < y && (T = y);
            var X = this.subarray(y, T);
            return X.__proto__ = f.prototype, X;
          }, f.prototype.readUIntLE = function(y, T, B) {
            y >>>= 0, T >>>= 0, B || re(y, T, this.length);
            for (var X = this[y], G = 1, ce = 0; ++ce < T && (G *= 256); )
              X += this[y + ce] * G;
            return X;
          }, f.prototype.readUIntBE = function(y, T, B) {
            y >>>= 0, T >>>= 0, B || re(y, T, this.length);
            for (var X = this[y + --T], G = 1; 0 < T && (G *= 256); )
              X += this[y + --T] * G;
            return X;
          }, f.prototype.readUInt8 = function(y, T) {
            return y >>>= 0, T || re(y, 1, this.length), this[y];
          }, f.prototype.readUInt16LE = function(y, T) {
            return y >>>= 0, T || re(y, 2, this.length), this[y] | this[y + 1] << 8;
          }, f.prototype.readUInt16BE = function(y, T) {
            return y >>>= 0, T || re(y, 2, this.length), this[y] << 8 | this[y + 1];
          }, f.prototype.readUInt32LE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), (this[y] | this[y + 1] << 8 | this[y + 2] << 16) + 16777216 * this[y + 3];
          }, f.prototype.readUInt32BE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), 16777216 * this[y] + (this[y + 1] << 16 | this[y + 2] << 8 | this[y + 3]);
          }, f.prototype.readIntLE = function(y, T, B) {
            y >>>= 0, T >>>= 0, B || re(y, T, this.length);
            for (var X = this[y], G = 1, ce = 0; ++ce < T && (G *= 256); )
              X += this[y + ce] * G;
            return G *= 128, X >= G && (X -= r(2, 8 * T)), X;
          }, f.prototype.readIntBE = function(y, T, B) {
            y >>>= 0, T >>>= 0, B || re(y, T, this.length);
            for (var X = T, G = 1, ce = this[y + --X]; 0 < X && (G *= 256); )
              ce += this[y + --X] * G;
            return G *= 128, ce >= G && (ce -= r(2, 8 * T)), ce;
          }, f.prototype.readInt8 = function(y, T) {
            return y >>>= 0, T || re(y, 1, this.length), 128 & this[y] ? -1 * (255 - this[y] + 1) : this[y];
          }, f.prototype.readInt16LE = function(y, T) {
            y >>>= 0, T || re(y, 2, this.length);
            var B = this[y] | this[y + 1] << 8;
            return 32768 & B ? 4294901760 | B : B;
          }, f.prototype.readInt16BE = function(y, T) {
            y >>>= 0, T || re(y, 2, this.length);
            var B = this[y + 1] | this[y] << 8;
            return 32768 & B ? 4294901760 | B : B;
          }, f.prototype.readInt32LE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), this[y] | this[y + 1] << 8 | this[y + 2] << 16 | this[y + 3] << 24;
          }, f.prototype.readInt32BE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), this[y] << 24 | this[y + 1] << 16 | this[y + 2] << 8 | this[y + 3];
          }, f.prototype.readFloatLE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), he.read(this, y, !0, 23, 4);
          }, f.prototype.readFloatBE = function(y, T) {
            return y >>>= 0, T || re(y, 4, this.length), he.read(this, y, !1, 23, 4);
          }, f.prototype.readDoubleLE = function(y, T) {
            return y >>>= 0, T || re(y, 8, this.length), he.read(this, y, !0, 52, 8);
          }, f.prototype.readDoubleBE = function(y, T) {
            return y >>>= 0, T || re(y, 8, this.length), he.read(this, y, !1, 52, 8);
          }, f.prototype.writeUIntLE = function(y, T, B, X) {
            if (y = +y, T >>>= 0, B >>>= 0, !X) {
              var G = r(2, 8 * B) - 1;
              ie(this, y, T, B, G, 0);
            }
            var ce = 1, Ne = 0;
            for (this[T] = 255 & y; ++Ne < B && (ce *= 256); )
              this[T + Ne] = 255 & y / ce;
            return T + B;
          }, f.prototype.writeUIntBE = function(y, T, B, X) {
            if (y = +y, T >>>= 0, B >>>= 0, !X) {
              var G = r(2, 8 * B) - 1;
              ie(this, y, T, B, G, 0);
            }
            var ce = B - 1, Ne = 1;
            for (this[T + ce] = 255 & y; 0 <= --ce && (Ne *= 256); )
              this[T + ce] = 255 & y / Ne;
            return T + B;
          }, f.prototype.writeUInt8 = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 1, 255, 0), this[T] = 255 & y, T + 1;
          }, f.prototype.writeUInt16LE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 2, 65535, 0), this[T] = 255 & y, this[T + 1] = y >>> 8, T + 2;
          }, f.prototype.writeUInt16BE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 2, 65535, 0), this[T] = y >>> 8, this[T + 1] = 255 & y, T + 2;
          }, f.prototype.writeUInt32LE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 4, 4294967295, 0), this[T + 3] = y >>> 24, this[T + 2] = y >>> 16, this[T + 1] = y >>> 8, this[T] = 255 & y, T + 4;
          }, f.prototype.writeUInt32BE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 4, 4294967295, 0), this[T] = y >>> 24, this[T + 1] = y >>> 16, this[T + 2] = y >>> 8, this[T + 3] = 255 & y, T + 4;
          }, f.prototype.writeIntLE = function(y, T, B, X) {
            if (y = +y, T >>>= 0, !X) {
              var G = r(2, 8 * B - 1);
              ie(this, y, T, B, G - 1, -G);
            }
            var ce = 0, Ne = 1, qe = 0;
            for (this[T] = 255 & y; ++ce < B && (Ne *= 256); )
              0 > y && qe === 0 && this[T + ce - 1] !== 0 && (qe = 1), this[T + ce] = 255 & (y / Ne >> 0) - qe;
            return T + B;
          }, f.prototype.writeIntBE = function(y, T, B, X) {
            if (y = +y, T >>>= 0, !X) {
              var G = r(2, 8 * B - 1);
              ie(this, y, T, B, G - 1, -G);
            }
            var ce = B - 1, Ne = 1, qe = 0;
            for (this[T + ce] = 255 & y; 0 <= --ce && (Ne *= 256); )
              0 > y && qe === 0 && this[T + ce + 1] !== 0 && (qe = 1), this[T + ce] = 255 & (y / Ne >> 0) - qe;
            return T + B;
          }, f.prototype.writeInt8 = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 1, 127, -128), 0 > y && (y = 255 + y + 1), this[T] = 255 & y, T + 1;
          }, f.prototype.writeInt16LE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 2, 32767, -32768), this[T] = 255 & y, this[T + 1] = y >>> 8, T + 2;
          }, f.prototype.writeInt16BE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 2, 32767, -32768), this[T] = y >>> 8, this[T + 1] = 255 & y, T + 2;
          }, f.prototype.writeInt32LE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 4, 2147483647, -2147483648), this[T] = 255 & y, this[T + 1] = y >>> 8, this[T + 2] = y >>> 16, this[T + 3] = y >>> 24, T + 4;
          }, f.prototype.writeInt32BE = function(y, T, B) {
            return y = +y, T >>>= 0, B || ie(this, y, T, 4, 2147483647, -2147483648), 0 > y && (y = 4294967295 + y + 1), this[T] = y >>> 24, this[T + 1] = y >>> 16, this[T + 2] = y >>> 8, this[T + 3] = 255 & y, T + 4;
          }, f.prototype.writeFloatLE = function(y, T, B) {
            return Le(this, y, T, !0, B);
          }, f.prototype.writeFloatBE = function(y, T, B) {
            return Le(this, y, T, !1, B);
          }, f.prototype.writeDoubleLE = function(y, T, B) {
            return Ie(this, y, T, !0, B);
          }, f.prototype.writeDoubleBE = function(y, T, B) {
            return Ie(this, y, T, !1, B);
          }, f.prototype.copy = function(y, T, B, X) {
            if (!f.isBuffer(y))
              throw new TypeError("argument should be a Buffer");
            if (B || (B = 0), X || X === 0 || (X = this.length), T >= y.length && (T = y.length), T || (T = 0), 0 < X && X < B && (X = B), X === B || y.length === 0 || this.length === 0)
              return 0;
            if (0 > T)
              throw new RangeError("targetStart out of bounds");
            if (0 > B || B >= this.length)
              throw new RangeError("Index out of range");
            if (0 > X)
              throw new RangeError("sourceEnd out of bounds");
            X > this.length && (X = this.length), y.length - T < X - B && (X = y.length - T + B);
            var G = X - B;
            if (this === y && typeof Uint8Array.prototype.copyWithin == "function")
              this.copyWithin(T, B, X);
            else if (this === y && B < T && T < X)
              for (var ce = G - 1; 0 <= ce; --ce)
                y[ce + T] = this[ce + B];
            else
              Uint8Array.prototype.set.call(y, this.subarray(B, X), T);
            return G;
          }, f.prototype.fill = function(y, T, B, X) {
            if (typeof y == "string") {
              if (typeof T == "string" ? (X = T, T = 0, B = this.length) : typeof B == "string" && (X = B, B = this.length), X !== void 0 && typeof X != "string")
                throw new TypeError("encoding must be a string");
              if (typeof X == "string" && !f.isEncoding(X))
                throw new TypeError("Unknown encoding: " + X);
              if (y.length === 1) {
                var G = y.charCodeAt(0);
                (X === "utf8" && 128 > G || X === "latin1") && (y = G);
              }
            } else
              typeof y == "number" && (y &= 255);
            if (0 > T || this.length < T || this.length < B)
              throw new RangeError("Out of range index");
            if (B <= T)
              return this;
            T >>>= 0, B = B === void 0 ? this.length : B >>> 0, y || (y = 0);
            var ce;
            if (typeof y == "number")
              for (ce = T; ce < B; ++ce)
                this[ce] = y;
            else {
              var Ne = f.isBuffer(y) ? y : f.from(y, X), qe = Ne.length;
              if (qe === 0)
                throw new TypeError('The value "' + y + '" is invalid for argument "value"');
              for (ce = 0; ce < B - T; ++ce)
                this[ce + T] = Ne[ce % qe];
            }
            return this;
          };
          var W = /[^+/0-9A-Za-z-_]/g;
        }).call(this);
      }).call(this, s("buffer").Buffer);
    }, { "base64-js": 1, buffer: 3, ieee754: 9 }], 4: [function(s, o, l) {
      (function(a) {
        (function() {
          function c() {
            let f;
            try {
              f = l.storage.getItem("debug");
            } catch {
            }
            return !f && typeof a < "u" && "env" in a && (f = a.env.DEBUG), f;
          }
          l.formatArgs = function(f) {
            if (f[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + f[0] + (this.useColors ? "%c " : " ") + "+" + o.exports.humanize(this.diff), !this.useColors)
              return;
            const h = "color: " + this.color;
            f.splice(1, 0, h, "color: inherit");
            let d = 0, p = 0;
            f[0].replace(/%[a-zA-Z%]/g, (g) => {
              g === "%%" || (d++, g === "%c" && (p = d));
            }), f.splice(p, 0, h);
          }, l.save = function(f) {
            try {
              f ? l.storage.setItem("debug", f) : l.storage.removeItem("debug");
            } catch {
            }
          }, l.load = c, l.useColors = function() {
            return !!(typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs)) || !(typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && (typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && 31 <= parseInt(RegExp.$1, 10) || typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
          }, l.storage = function() {
            try {
              return localStorage;
            } catch {
            }
          }(), l.destroy = (() => {
            let f = !1;
            return () => {
              f || (f = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
            };
          })(), l.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], l.log = console.debug || console.log || (() => {
          }), o.exports = s("./common")(l);
          const { formatters: u } = o.exports;
          u.j = function(f) {
            try {
              return JSON.stringify(f);
            } catch (h) {
              return "[UnexpectedJSONParseError]: " + h.message;
            }
          };
        }).call(this);
      }).call(this, s("_process"));
    }, { "./common": 5, _process: 12 }], 5: [function(s, o) {
      o.exports = function(l) {
        function a(f) {
          function h(...g) {
            if (!h.enabled)
              return;
            const _ = h, m = +new Date(), C = m - (d || m);
            _.diff = C, _.prev = d, _.curr = m, d = m, g[0] = a.coerce(g[0]), typeof g[0] != "string" && g.unshift("%O");
            let v = 0;
            g[0] = g[0].replace(/%([a-zA-Z%])/g, (S, O) => {
              if (S === "%%")
                return "%";
              v++;
              const w = a.formatters[O];
              if (typeof w == "function") {
                const A = g[v];
                S = w.call(_, A), g.splice(v, 1), v--;
              }
              return S;
            }), a.formatArgs.call(_, g), (_.log || a.log).apply(_, g);
          }
          let d, p = null;
          return h.namespace = f, h.useColors = a.useColors(), h.color = a.selectColor(f), h.extend = c, h.destroy = a.destroy, Object.defineProperty(h, "enabled", { enumerable: !0, configurable: !1, get: () => p === null ? a.enabled(f) : p, set: (g) => {
            p = g;
          } }), typeof a.init == "function" && a.init(h), h;
        }
        function c(f, h) {
          const d = a(this.namespace + (typeof h > "u" ? ":" : h) + f);
          return d.log = this.log, d;
        }
        function u(f) {
          return f.toString().substring(2, f.toString().length - 2).replace(/\.\*\?$/, "*");
        }
        return a.debug = a, a.default = a, a.coerce = function(f) {
          return f instanceof Error ? f.stack || f.message : f;
        }, a.disable = function() {
          const f = [...a.names.map(u), ...a.skips.map(u).map((h) => "-" + h)].join(",");
          return a.enable(""), f;
        }, a.enable = function(f) {
          a.save(f), a.names = [], a.skips = [];
          let h;
          const d = (typeof f == "string" ? f : "").split(/[\s,]+/), p = d.length;
          for (h = 0; h < p; h++)
            d[h] && (f = d[h].replace(/\*/g, ".*?"), f[0] === "-" ? a.skips.push(new RegExp("^" + f.substr(1) + "$")) : a.names.push(new RegExp("^" + f + "$")));
        }, a.enabled = function(f) {
          if (f[f.length - 1] === "*")
            return !0;
          let h, d;
          for (h = 0, d = a.skips.length; h < d; h++)
            if (a.skips[h].test(f))
              return !1;
          for (h = 0, d = a.names.length; h < d; h++)
            if (a.names[h].test(f))
              return !0;
          return !1;
        }, a.humanize = s("ms"), a.destroy = function() {
          console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
        }, Object.keys(l).forEach((f) => {
          a[f] = l[f];
        }), a.names = [], a.skips = [], a.formatters = {}, a.selectColor = function(f) {
          let h = 0;
          for (let d = 0; d < f.length; d++)
            h = (h << 5) - h + f.charCodeAt(d), h |= 0;
          return a.colors[i(h) % a.colors.length];
        }, a.enable(a.load()), a;
      };
    }, { ms: 11 }], 6: [function(s, o) {
      function l(a, c) {
        for (const u in c)
          Object.defineProperty(a, u, { value: c[u], enumerable: !0, configurable: !0 });
        return a;
      }
      o.exports = function(a, c, u) {
        if (!a || typeof a == "string")
          throw new TypeError("Please pass an Error to err-code");
        u || (u = {}), typeof c == "object" && (u = c, c = ""), c && (u.code = c);
        try {
          return l(a, u);
        } catch {
          u.message = a.message, u.stack = a.stack;
          const h = function() {
          };
          return h.prototype = Object.create(Object.getPrototypeOf(a)), l(new h(), u);
        }
      };
    }, {}], 7: [function(s, o) {
      function l(R) {
        console && console.warn && console.warn(R);
      }
      function a() {
        a.init.call(this);
      }
      function c(R) {
        if (typeof R != "function")
          throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof R);
      }
      function u(R) {
        return R._maxListeners === void 0 ? a.defaultMaxListeners : R._maxListeners;
      }
      function f(R, M, H, J) {
        var I, z, L;
        if (c(H), z = R._events, z === void 0 ? (z = R._events = /* @__PURE__ */ Object.create(null), R._eventsCount = 0) : (z.newListener !== void 0 && (R.emit("newListener", M, H.listener ? H.listener : H), z = R._events), L = z[M]), L === void 0)
          L = z[M] = H, ++R._eventsCount;
        else if (typeof L == "function" ? L = z[M] = J ? [H, L] : [L, H] : J ? L.unshift(H) : L.push(H), I = u(R), 0 < I && L.length > I && !L.warned) {
          L.warned = !0;
          var K = new Error("Possible EventEmitter memory leak detected. " + L.length + " " + (M + " listeners added. Use emitter.setMaxListeners() to increase limit"));
          K.name = "MaxListenersExceededWarning", K.emitter = R, K.type = M, K.count = L.length, l(K);
        }
        return R;
      }
      function h() {
        if (!this.fired)
          return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
      }
      function d(R, M, H) {
        var J = { fired: !1, wrapFn: void 0, target: R, type: M, listener: H }, I = h.bind(J);
        return I.listener = H, J.wrapFn = I, I;
      }
      function p(R, M, H) {
        var J = R._events;
        if (J === void 0)
          return [];
        var I = J[M];
        return I === void 0 ? [] : typeof I == "function" ? H ? [I.listener || I] : [I] : H ? C(I) : _(I, I.length);
      }
      function g(R) {
        var M = this._events;
        if (M !== void 0) {
          var H = M[R];
          if (typeof H == "function")
            return 1;
          if (H !== void 0)
            return H.length;
        }
        return 0;
      }
      function _(R, M) {
        for (var H = Array(M), J = 0; J < M; ++J)
          H[J] = R[J];
        return H;
      }
      function m(R, M) {
        for (; M + 1 < R.length; M++)
          R[M] = R[M + 1];
        R.pop();
      }
      function C(R) {
        for (var M = Array(R.length), H = 0; H < M.length; ++H)
          M[H] = R[H].listener || R[H];
        return M;
      }
      function v(R, M, H) {
        typeof R.on == "function" && k(R, "error", M, H);
      }
      function k(R, M, H, J) {
        if (typeof R.on == "function")
          J.once ? R.once(M, H) : R.on(M, H);
        else if (typeof R.addEventListener == "function")
          R.addEventListener(M, function I(z) {
            J.once && R.removeEventListener(M, I), H(z);
          });
        else
          throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof R);
      }
      var S, O = typeof Reflect == "object" ? Reflect : null, w = O && typeof O.apply == "function" ? O.apply : function(R, M, H) {
        return Function.prototype.apply.call(R, M, H);
      };
      S = O && typeof O.ownKeys == "function" ? O.ownKeys : Object.getOwnPropertySymbols ? function(R) {
        return Object.getOwnPropertyNames(R).concat(Object.getOwnPropertySymbols(R));
      } : function(R) {
        return Object.getOwnPropertyNames(R);
      };
      var A = Number.isNaN || function(R) {
        return R !== R;
      };
      o.exports = a, o.exports.once = function(R, M) {
        return new Promise(function(H, J) {
          function I(L) {
            R.removeListener(M, z), J(L);
          }
          function z() {
            typeof R.removeListener == "function" && R.removeListener("error", I), H([].slice.call(arguments));
          }
          k(R, M, z, { once: !0 }), M !== "error" && v(R, I, { once: !0 });
        });
      }, a.EventEmitter = a, a.prototype._events = void 0, a.prototype._eventsCount = 0, a.prototype._maxListeners = void 0;
      var D = 10;
      Object.defineProperty(a, "defaultMaxListeners", { enumerable: !0, get: function() {
        return D;
      }, set: function(R) {
        if (typeof R != "number" || 0 > R || A(R))
          throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + R + ".");
        D = R;
      } }), a.init = function() {
        (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
      }, a.prototype.setMaxListeners = function(R) {
        if (typeof R != "number" || 0 > R || A(R))
          throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + R + ".");
        return this._maxListeners = R, this;
      }, a.prototype.getMaxListeners = function() {
        return u(this);
      }, a.prototype.emit = function(R) {
        for (var M = [], H = 1; H < arguments.length; H++)
          M.push(arguments[H]);
        var J = R === "error", I = this._events;
        if (I !== void 0)
          J = J && I.error === void 0;
        else if (!J)
          return !1;
        if (J) {
          var z;
          if (0 < M.length && (z = M[0]), z instanceof Error)
            throw z;
          var L = new Error("Unhandled error." + (z ? " (" + z.message + ")" : ""));
          throw L.context = z, L;
        }
        var K = I[R];
        if (K === void 0)
          return !1;
        if (typeof K == "function")
          w(K, this, M);
        else
          for (var F = K.length, N = _(K, F), H = 0; H < F; ++H)
            w(N[H], this, M);
        return !0;
      }, a.prototype.addListener = function(R, M) {
        return f(this, R, M, !1);
      }, a.prototype.on = a.prototype.addListener, a.prototype.prependListener = function(R, M) {
        return f(this, R, M, !0);
      }, a.prototype.once = function(R, M) {
        return c(M), this.on(R, d(this, R, M)), this;
      }, a.prototype.prependOnceListener = function(R, M) {
        return c(M), this.prependListener(R, d(this, R, M)), this;
      }, a.prototype.removeListener = function(R, M) {
        var H, J, I, z, L;
        if (c(M), J = this._events, J === void 0)
          return this;
        if (H = J[R], H === void 0)
          return this;
        if (H === M || H.listener === M)
          --this._eventsCount == 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete J[R], J.removeListener && this.emit("removeListener", R, H.listener || M));
        else if (typeof H != "function") {
          for (I = -1, z = H.length - 1; 0 <= z; z--)
            if (H[z] === M || H[z].listener === M) {
              L = H[z].listener, I = z;
              break;
            }
          if (0 > I)
            return this;
          I === 0 ? H.shift() : m(H, I), H.length === 1 && (J[R] = H[0]), J.removeListener !== void 0 && this.emit("removeListener", R, L || M);
        }
        return this;
      }, a.prototype.off = a.prototype.removeListener, a.prototype.removeAllListeners = function(R) {
        var M, H, J;
        if (H = this._events, H === void 0)
          return this;
        if (H.removeListener === void 0)
          return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : H[R] !== void 0 && (--this._eventsCount == 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete H[R]), this;
        if (arguments.length === 0) {
          var I, z = Object.keys(H);
          for (J = 0; J < z.length; ++J)
            I = z[J], I !== "removeListener" && this.removeAllListeners(I);
          return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
        }
        if (M = H[R], typeof M == "function")
          this.removeListener(R, M);
        else if (M !== void 0)
          for (J = M.length - 1; 0 <= J; J--)
            this.removeListener(R, M[J]);
        return this;
      }, a.prototype.listeners = function(R) {
        return p(this, R, !0);
      }, a.prototype.rawListeners = function(R) {
        return p(this, R, !1);
      }, a.listenerCount = function(R, M) {
        return typeof R.listenerCount == "function" ? R.listenerCount(M) : g.call(R, M);
      }, a.prototype.listenerCount = g, a.prototype.eventNames = function() {
        return 0 < this._eventsCount ? S(this._events) : [];
      };
    }, {}], 8: [function(s, o) {
      o.exports = function() {
        if (typeof globalThis > "u")
          return null;
        var l = { RTCPeerConnection: globalThis.RTCPeerConnection || globalThis.mozRTCPeerConnection || globalThis.webkitRTCPeerConnection, RTCSessionDescription: globalThis.RTCSessionDescription || globalThis.mozRTCSessionDescription || globalThis.webkitRTCSessionDescription, RTCIceCandidate: globalThis.RTCIceCandidate || globalThis.mozRTCIceCandidate || globalThis.webkitRTCIceCandidate };
        return l.RTCPeerConnection ? l : null;
      };
    }, {}], 9: [function(s, o, l) {
      /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
      l.read = function(a, c, u, f, h) {
        var d, p, g = 8 * h - f - 1, _ = (1 << g) - 1, m = _ >> 1, C = -7, v = u ? h - 1 : 0, k = u ? -1 : 1, S = a[c + v];
        for (v += k, d = S & (1 << -C) - 1, S >>= -C, C += g; 0 < C; d = 256 * d + a[c + v], v += k, C -= 8)
          ;
        for (p = d & (1 << -C) - 1, d >>= -C, C += f; 0 < C; p = 256 * p + a[c + v], v += k, C -= 8)
          ;
        if (d === 0)
          d = 1 - m;
        else {
          if (d === _)
            return p ? NaN : (S ? -1 : 1) * (1 / 0);
          p += r(2, f), d -= m;
        }
        return (S ? -1 : 1) * p * r(2, d - f);
      }, l.write = function(a, c, u, f, h, d) {
        var p, g, _, m = Math.LN2, C = Math.log, v = 8 * d - h - 1, k = (1 << v) - 1, S = k >> 1, O = h === 23 ? r(2, -24) - r(2, -77) : 0, w = f ? 0 : d - 1, A = f ? 1 : -1, D = 0 > c || c === 0 && 0 > 1 / c ? 1 : 0;
        for (c = i(c), isNaN(c) || c === 1 / 0 ? (g = isNaN(c) ? 1 : 0, p = k) : (p = n(C(c) / m), 1 > c * (_ = r(2, -p)) && (p--, _ *= 2), c += 1 <= p + S ? O / _ : O * r(2, 1 - S), 2 <= c * _ && (p++, _ /= 2), p + S >= k ? (g = 0, p = k) : 1 <= p + S ? (g = (c * _ - 1) * r(2, h), p += S) : (g = c * r(2, S - 1) * r(2, h), p = 0)); 8 <= h; a[u + w] = 255 & g, w += A, g /= 256, h -= 8)
          ;
        for (p = p << h | g, v += h; 0 < v; a[u + w] = 255 & p, w += A, p /= 256, v -= 8)
          ;
        a[u + w - A] |= 128 * D;
      };
    }, {}], 10: [function(s, o) {
      o.exports = typeof Object.create == "function" ? function(l, a) {
        a && (l.super_ = a, l.prototype = Object.create(a.prototype, { constructor: { value: l, enumerable: !1, writable: !0, configurable: !0 } }));
      } : function(l, a) {
        if (a) {
          l.super_ = a;
          var c = function() {
          };
          c.prototype = a.prototype, l.prototype = new c(), l.prototype.constructor = l;
        }
      };
    }, {}], 11: [function(s, o) {
      var l = Math.round;
      function a(h) {
        if (h += "", !(100 < h.length)) {
          var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);
          if (d) {
            var p = parseFloat(d[1]), g = (d[2] || "ms").toLowerCase();
            return g === "years" || g === "year" || g === "yrs" || g === "yr" || g === "y" ? 315576e5 * p : g === "weeks" || g === "week" || g === "w" ? 6048e5 * p : g === "days" || g === "day" || g === "d" ? 864e5 * p : g === "hours" || g === "hour" || g === "hrs" || g === "hr" || g === "h" ? 36e5 * p : g === "minutes" || g === "minute" || g === "mins" || g === "min" || g === "m" ? 6e4 * p : g === "seconds" || g === "second" || g === "secs" || g === "sec" || g === "s" ? 1e3 * p : g === "milliseconds" || g === "millisecond" || g === "msecs" || g === "msec" || g === "ms" ? p : void 0;
          }
        }
      }
      function c(h) {
        var d = i(h);
        return 864e5 <= d ? l(h / 864e5) + "d" : 36e5 <= d ? l(h / 36e5) + "h" : 6e4 <= d ? l(h / 6e4) + "m" : 1e3 <= d ? l(h / 1e3) + "s" : h + "ms";
      }
      function u(h) {
        var d = i(h);
        return 864e5 <= d ? f(h, d, 864e5, "day") : 36e5 <= d ? f(h, d, 36e5, "hour") : 6e4 <= d ? f(h, d, 6e4, "minute") : 1e3 <= d ? f(h, d, 1e3, "second") : h + " ms";
      }
      function f(h, d, p, g) {
        return l(h / p) + " " + g + (d >= 1.5 * p ? "s" : "");
      }
      o.exports = function(h, d) {
        d = d || {};
        var p = typeof h;
        if (p == "string" && 0 < h.length)
          return a(h);
        if (p === "number" && isFinite(h))
          return d.long ? u(h) : c(h);
        throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(h));
      };
    }, {}], 12: [function(s, o) {
      function l() {
        throw new Error("setTimeout has not been defined");
      }
      function a() {
        throw new Error("clearTimeout has not been defined");
      }
      function c(O) {
        if (g === setTimeout)
          return setTimeout(O, 0);
        if ((g === l || !g) && setTimeout)
          return g = setTimeout, setTimeout(O, 0);
        try {
          return g(O, 0);
        } catch {
          try {
            return g.call(null, O, 0);
          } catch {
            return g.call(this, O, 0);
          }
        }
      }
      function u(O) {
        if (_ === clearTimeout)
          return clearTimeout(O);
        if ((_ === a || !_) && clearTimeout)
          return _ = clearTimeout, clearTimeout(O);
        try {
          return _(O);
        } catch {
          try {
            return _.call(null, O);
          } catch {
            return _.call(this, O);
          }
        }
      }
      function f() {
        k && C && (k = !1, C.length ? v = C.concat(v) : S = -1, v.length && h());
      }
      function h() {
        if (!k) {
          var O = c(f);
          k = !0;
          for (var w = v.length; w; ) {
            for (C = v, v = []; ++S < w; )
              C && C[S].run();
            S = -1, w = v.length;
          }
          C = null, k = !1, u(O);
        }
      }
      function d(O, w) {
        this.fun = O, this.array = w;
      }
      function p() {
      }
      var g, _, m = o.exports = {};
      (function() {
        try {
          g = typeof setTimeout == "function" ? setTimeout : l;
        } catch {
          g = l;
        }
        try {
          _ = typeof clearTimeout == "function" ? clearTimeout : a;
        } catch {
          _ = a;
        }
      })();
      var C, v = [], k = !1, S = -1;
      m.nextTick = function(O) {
        var w = Array(arguments.length - 1);
        if (1 < arguments.length)
          for (var A = 1; A < arguments.length; A++)
            w[A - 1] = arguments[A];
        v.push(new d(O, w)), v.length !== 1 || k || c(h);
      }, d.prototype.run = function() {
        this.fun.apply(null, this.array);
      }, m.title = "browser", m.browser = !0, m.env = {}, m.argv = [], m.version = "", m.versions = {}, m.on = p, m.addListener = p, m.once = p, m.off = p, m.removeListener = p, m.removeAllListeners = p, m.emit = p, m.prependListener = p, m.prependOnceListener = p, m.listeners = function() {
        return [];
      }, m.binding = function() {
        throw new Error("process.binding is not supported");
      }, m.cwd = function() {
        return "/";
      }, m.chdir = function() {
        throw new Error("process.chdir is not supported");
      }, m.umask = function() {
        return 0;
      };
    }, {}], 13: [function(s, o) {
      (function(l) {
        (function() {
          /*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
          let a;
          o.exports = typeof queueMicrotask == "function" ? queueMicrotask.bind(typeof window > "u" ? l : window) : (c) => (a || (a = Promise.resolve())).then(c).catch((u) => setTimeout(() => {
            throw u;
          }, 0));
        }).call(this);
      }).call(this, typeof Yr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Yr);
    }, {}], 14: [function(s, o) {
      (function(l, a) {
        (function() {
          var c = s("safe-buffer").Buffer, u = a.crypto || a.msCrypto;
          o.exports = u && u.getRandomValues ? function(f, h) {
            if (f > 4294967295)
              throw new RangeError("requested too many random bytes");
            var d = c.allocUnsafe(f);
            if (0 < f)
              if (65536 < f)
                for (var p = 0; p < f; p += 65536)
                  u.getRandomValues(d.slice(p, p + 65536));
              else
                u.getRandomValues(d);
            return typeof h == "function" ? l.nextTick(function() {
              h(null, d);
            }) : d;
          } : function() {
            throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`);
          };
        }).call(this);
      }).call(this, s("_process"), typeof Yr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Yr);
    }, { _process: 12, "safe-buffer": 30 }], 15: [function(s, o) {
      function l(p, g) {
        p.prototype = Object.create(g.prototype), p.prototype.constructor = p, p.__proto__ = g;
      }
      function a(p, g, _) {
        function m(v, k, S) {
          return typeof g == "string" ? g : g(v, k, S);
        }
        _ || (_ = Error);
        var C = function(v) {
          function k(S, O, w) {
            return v.call(this, m(S, O, w)) || this;
          }
          return l(k, v), k;
        }(_);
        C.prototype.name = _.name, C.prototype.code = p, d[p] = C;
      }
      function c(p, g) {
        if (Array.isArray(p)) {
          var _ = p.length;
          return p = p.map(function(m) {
            return m + "";
          }), 2 < _ ? "one of ".concat(g, " ").concat(p.slice(0, _ - 1).join(", "), ", or ") + p[_ - 1] : _ === 2 ? "one of ".concat(g, " ").concat(p[0], " or ").concat(p[1]) : "of ".concat(g, " ").concat(p[0]);
        }
        return "of ".concat(g, " ").concat(p + "");
      }
      function u(p, g, _) {
        return p.substr(!_ || 0 > _ ? 0 : +_, g.length) === g;
      }
      function f(p, g, _) {
        return (_ === void 0 || _ > p.length) && (_ = p.length), p.substring(_ - g.length, _) === g;
      }
      function h(p, g, _) {
        return typeof _ != "number" && (_ = 0), !(_ + g.length > p.length) && p.indexOf(g, _) !== -1;
      }
      var d = {};
      a("ERR_INVALID_OPT_VALUE", function(p, g) {
        return 'The value "' + g + '" is invalid for option "' + p + '"';
      }, TypeError), a("ERR_INVALID_ARG_TYPE", function(p, g, _) {
        var m;
        typeof g == "string" && u(g, "not ") ? (m = "must not be", g = g.replace(/^not /, "")) : m = "must be";
        var C;
        if (f(p, " argument"))
          C = "The ".concat(p, " ").concat(m, " ").concat(c(g, "type"));
        else {
          var v = h(p, ".") ? "property" : "argument";
          C = 'The "'.concat(p, '" ').concat(v, " ").concat(m, " ").concat(c(g, "type"));
        }
        return C += ". Received type ".concat(typeof _), C;
      }, TypeError), a("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF"), a("ERR_METHOD_NOT_IMPLEMENTED", function(p) {
        return "The " + p + " method is not implemented";
      }), a("ERR_STREAM_PREMATURE_CLOSE", "Premature close"), a("ERR_STREAM_DESTROYED", function(p) {
        return "Cannot call " + p + " after a stream was destroyed";
      }), a("ERR_MULTIPLE_CALLBACK", "Callback called multiple times"), a("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable"), a("ERR_STREAM_WRITE_AFTER_END", "write after end"), a("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError), a("ERR_UNKNOWN_ENCODING", function(p) {
        return "Unknown encoding: " + p;
      }, TypeError), a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event"), o.exports.codes = d;
    }, {}], 16: [function(s, o) {
      (function(l) {
        (function() {
          function a(m) {
            return this instanceof a ? (h.call(this, m), d.call(this, m), this.allowHalfOpen = !0, void (m && (m.readable === !1 && (this.readable = !1), m.writable === !1 && (this.writable = !1), m.allowHalfOpen === !1 && (this.allowHalfOpen = !1, this.once("end", c))))) : new a(m);
          }
          function c() {
            this._writableState.ended || l.nextTick(u, this);
          }
          function u(m) {
            m.end();
          }
          var f = Object.keys || function(m) {
            var C = [];
            for (var v in m)
              C.push(v);
            return C;
          };
          o.exports = a;
          var h = s("./_stream_readable"), d = s("./_stream_writable");
          s("inherits")(a, h);
          for (var p, g = f(d.prototype), _ = 0; _ < g.length; _++)
            p = g[_], a.prototype[p] || (a.prototype[p] = d.prototype[p]);
          Object.defineProperty(a.prototype, "writableHighWaterMark", { enumerable: !1, get: function() {
            return this._writableState.highWaterMark;
          } }), Object.defineProperty(a.prototype, "writableBuffer", { enumerable: !1, get: function() {
            return this._writableState && this._writableState.getBuffer();
          } }), Object.defineProperty(a.prototype, "writableLength", { enumerable: !1, get: function() {
            return this._writableState.length;
          } }), Object.defineProperty(a.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._readableState !== void 0 && this._writableState !== void 0 && this._readableState.destroyed && this._writableState.destroyed;
          }, set: function(m) {
            this._readableState === void 0 || this._writableState === void 0 || (this._readableState.destroyed = m, this._writableState.destroyed = m);
          } });
        }).call(this);
      }).call(this, s("_process"));
    }, { "./_stream_readable": 18, "./_stream_writable": 20, _process: 12, inherits: 10 }], 17: [function(s, o) {
      function l(c) {
        return this instanceof l ? void a.call(this, c) : new l(c);
      }
      o.exports = l;
      var a = s("./_stream_transform");
      s("inherits")(l, a), l.prototype._transform = function(c, u, f) {
        f(null, c);
      };
    }, { "./_stream_transform": 19, inherits: 10 }], 18: [function(s, o) {
      (function(l, a) {
        (function() {
          function c(W) {
            return q.from(W);
          }
          function u(W) {
            return q.isBuffer(W) || W instanceof re;
          }
          function f(W, y, T) {
            return typeof W.prependListener == "function" ? W.prependListener(y, T) : void (W._events && W._events[y] ? Array.isArray(W._events[y]) ? W._events[y].unshift(T) : W._events[y] = [T, W._events[y]] : W.on(y, T));
          }
          function h(W, y, T) {
            F = F || s("./_stream_duplex"), W = W || {}, typeof T != "boolean" && (T = y instanceof F), this.objectMode = !!W.objectMode, T && (this.objectMode = this.objectMode || !!W.readableObjectMode), this.highWaterMark = Ve(this, W, "readableHighWaterMark", T), this.buffer = new Fe(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = !1, this.endEmitted = !1, this.reading = !1, this.sync = !0, this.needReadable = !1, this.emittedReadable = !1, this.readableListening = !1, this.resumeScheduled = !1, this.paused = !0, this.emitClose = W.emitClose !== !1, this.autoDestroy = !!W.autoDestroy, this.destroyed = !1, this.defaultEncoding = W.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = !1, this.decoder = null, this.encoding = null, W.encoding && (!Z && (Z = s("string_decoder/").StringDecoder), this.decoder = new Z(W.encoding), this.encoding = W.encoding);
          }
          function d(W) {
            if (F = F || s("./_stream_duplex"), !(this instanceof d))
              return new d(W);
            var y = this instanceof F;
            this._readableState = new h(W, this, y), this.readable = !0, W && (typeof W.read == "function" && (this._read = W.read), typeof W.destroy == "function" && (this._destroy = W.destroy)), ue.call(this);
          }
          function p(W, y, T, B, X) {
            N("readableAddChunk", y);
            var G = W._readableState;
            if (y === null)
              G.reading = !1, v(W, G);
            else {
              var ce;
              if (X || (ce = _(G, y)), ce)
                de(W, ce);
              else if (!(G.objectMode || y && 0 < y.length))
                B || (G.reading = !1, O(W, G));
              else if (typeof y == "string" || G.objectMode || Object.getPrototypeOf(y) === q.prototype || (y = c(y)), B)
                G.endEmitted ? de(W, new $()) : g(W, G, y, !0);
              else if (G.ended)
                de(W, new Ae());
              else {
                if (G.destroyed)
                  return !1;
                G.reading = !1, G.decoder && !T ? (y = G.decoder.write(y), G.objectMode || y.length !== 0 ? g(W, G, y, !1) : O(W, G)) : g(W, G, y, !1);
              }
            }
            return !G.ended && (G.length < G.highWaterMark || G.length === 0);
          }
          function g(W, y, T, B) {
            y.flowing && y.length === 0 && !y.sync ? (y.awaitDrain = 0, W.emit("data", T)) : (y.length += y.objectMode ? 1 : T.length, B ? y.buffer.unshift(T) : y.buffer.push(T), y.needReadable && k(W)), O(W, y);
          }
          function _(W, y) {
            var T;
            return u(y) || typeof y == "string" || y === void 0 || W.objectMode || (T = new fe("chunk", ["string", "Buffer", "Uint8Array"], y)), T;
          }
          function m(W) {
            return 1073741824 <= W ? W = 1073741824 : (W--, W |= W >>> 1, W |= W >>> 2, W |= W >>> 4, W |= W >>> 8, W |= W >>> 16, W++), W;
          }
          function C(W, y) {
            return 0 >= W || y.length === 0 && y.ended ? 0 : y.objectMode ? 1 : W === W ? (W > y.highWaterMark && (y.highWaterMark = m(W)), W <= y.length ? W : y.ended ? y.length : (y.needReadable = !0, 0)) : y.flowing && y.length ? y.buffer.head.data.length : y.length;
          }
          function v(W, y) {
            if (N("onEofChunk"), !y.ended) {
              if (y.decoder) {
                var T = y.decoder.end();
                T && T.length && (y.buffer.push(T), y.length += y.objectMode ? 1 : T.length);
              }
              y.ended = !0, y.sync ? k(W) : (y.needReadable = !1, !y.emittedReadable && (y.emittedReadable = !0, S(W)));
            }
          }
          function k(W) {
            var y = W._readableState;
            N("emitReadable", y.needReadable, y.emittedReadable), y.needReadable = !1, y.emittedReadable || (N("emitReadable", y.flowing), y.emittedReadable = !0, l.nextTick(S, W));
          }
          function S(W) {
            var y = W._readableState;
            N("emitReadable_", y.destroyed, y.length, y.ended), !y.destroyed && (y.length || y.ended) && (W.emit("readable"), y.emittedReadable = !1), y.needReadable = !y.flowing && !y.ended && y.length <= y.highWaterMark, J(W);
          }
          function O(W, y) {
            y.readingMore || (y.readingMore = !0, l.nextTick(w, W, y));
          }
          function w(W, y) {
            for (; !y.reading && !y.ended && (y.length < y.highWaterMark || y.flowing && y.length === 0); ) {
              var T = y.length;
              if (N("maybeReadMore read 0"), W.read(0), T === y.length)
                break;
            }
            y.readingMore = !1;
          }
          function A(W) {
            return function() {
              var y = W._readableState;
              N("pipeOnDrain", y.awaitDrain), y.awaitDrain && y.awaitDrain--, y.awaitDrain === 0 && te(W, "data") && (y.flowing = !0, J(W));
            };
          }
          function D(W) {
            var y = W._readableState;
            y.readableListening = 0 < W.listenerCount("readable"), y.resumeScheduled && !y.paused ? y.flowing = !0 : 0 < W.listenerCount("data") && W.resume();
          }
          function R(W) {
            N("readable nexttick read 0"), W.read(0);
          }
          function M(W, y) {
            y.resumeScheduled || (y.resumeScheduled = !0, l.nextTick(H, W, y));
          }
          function H(W, y) {
            N("resume", y.reading), y.reading || W.read(0), y.resumeScheduled = !1, W.emit("resume"), J(W), y.flowing && !y.reading && W.read(0);
          }
          function J(W) {
            var y = W._readableState;
            for (N("flow", y.flowing); y.flowing && W.read() !== null; )
              ;
          }
          function I(W, y) {
            if (y.length === 0)
              return null;
            var T;
            return y.objectMode ? T = y.buffer.shift() : !W || W >= y.length ? (T = y.decoder ? y.buffer.join("") : y.buffer.length === 1 ? y.buffer.first() : y.buffer.concat(y.length), y.buffer.clear()) : T = y.buffer.consume(W, y.decoder), T;
          }
          function z(W) {
            var y = W._readableState;
            N("endReadable", y.endEmitted), y.endEmitted || (y.ended = !0, l.nextTick(L, y, W));
          }
          function L(W, y) {
            if (N("endReadableNT", W.endEmitted, W.length), !W.endEmitted && W.length === 0 && (W.endEmitted = !0, y.readable = !1, y.emit("end"), W.autoDestroy)) {
              var T = y._writableState;
              (!T || T.autoDestroy && T.finished) && y.destroy();
            }
          }
          function K(W, y) {
            for (var T = 0, B = W.length; T < B; T++)
              if (W[T] === y)
                return T;
            return -1;
          }
          o.exports = d;
          var F;
          d.ReadableState = h;
          var N;
          s("events").EventEmitter;
          var te = function(W, y) {
            return W.listeners(y).length;
          }, ue = s("./internal/streams/stream"), q = s("buffer").Buffer, re = a.Uint8Array || function() {
          }, ie = s("util");
          N = ie && ie.debuglog ? ie.debuglog("stream") : function() {
          };
          var Z, Le, Ie, Fe = s("./internal/streams/buffer_list"), le = s("./internal/streams/destroy"), De = s("./internal/streams/state"), Ve = De.getHighWaterMark, ye = s("../errors").codes, fe = ye.ERR_INVALID_ARG_TYPE, Ae = ye.ERR_STREAM_PUSH_AFTER_EOF, ae = ye.ERR_METHOD_NOT_IMPLEMENTED, $ = ye.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;
          s("inherits")(d, ue);
          var de = le.errorOrDestroy, he = ["error", "close", "destroy", "pause", "resume"];
          Object.defineProperty(d.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._readableState !== void 0 && this._readableState.destroyed;
          }, set: function(W) {
            this._readableState && (this._readableState.destroyed = W);
          } }), d.prototype.destroy = le.destroy, d.prototype._undestroy = le.undestroy, d.prototype._destroy = function(W, y) {
            y(W);
          }, d.prototype.push = function(W, y) {
            var T, B = this._readableState;
            return B.objectMode ? T = !0 : typeof W == "string" && (y = y || B.defaultEncoding, y !== B.encoding && (W = q.from(W, y), y = ""), T = !0), p(this, W, y, !1, T);
          }, d.prototype.unshift = function(W) {
            return p(this, W, null, !0, !1);
          }, d.prototype.isPaused = function() {
            return this._readableState.flowing === !1;
          }, d.prototype.setEncoding = function(W) {
            Z || (Z = s("string_decoder/").StringDecoder);
            var y = new Z(W);
            this._readableState.decoder = y, this._readableState.encoding = this._readableState.decoder.encoding;
            for (var T = this._readableState.buffer.head, B = ""; T !== null; )
              B += y.write(T.data), T = T.next;
            return this._readableState.buffer.clear(), B !== "" && this._readableState.buffer.push(B), this._readableState.length = B.length, this;
          }, d.prototype.read = function(W) {
            N("read", W), W = parseInt(W, 10);
            var y = this._readableState, T = W;
            if (W !== 0 && (y.emittedReadable = !1), W === 0 && y.needReadable && ((y.highWaterMark === 0 ? 0 < y.length : y.length >= y.highWaterMark) || y.ended))
              return N("read: emitReadable", y.length, y.ended), y.length === 0 && y.ended ? z(this) : k(this), null;
            if (W = C(W, y), W === 0 && y.ended)
              return y.length === 0 && z(this), null;
            var B = y.needReadable;
            N("need readable", B), (y.length === 0 || y.length - W < y.highWaterMark) && (B = !0, N("length less than watermark", B)), y.ended || y.reading ? (B = !1, N("reading or ended", B)) : B && (N("do read"), y.reading = !0, y.sync = !0, y.length === 0 && (y.needReadable = !0), this._read(y.highWaterMark), y.sync = !1, !y.reading && (W = C(T, y)));
            var X;
            return X = 0 < W ? I(W, y) : null, X === null ? (y.needReadable = y.length <= y.highWaterMark, W = 0) : (y.length -= W, y.awaitDrain = 0), y.length === 0 && (!y.ended && (y.needReadable = !0), T !== W && y.ended && z(this)), X !== null && this.emit("data", X), X;
          }, d.prototype._read = function() {
            de(this, new ae("_read()"));
          }, d.prototype.pipe = function(W, y) {
            function T(Tt, Oe) {
              N("onunpipe"), Tt === dt && Oe && Oe.hasUnpiped === !1 && (Oe.hasUnpiped = !0, X());
            }
            function B() {
              N("onend"), W.end();
            }
            function X() {
              N("cleanup"), W.removeListener("close", Ne), W.removeListener("finish", qe), W.removeListener("drain", Yt), W.removeListener("error", ce), W.removeListener("unpipe", T), dt.removeListener("end", B), dt.removeListener("end", mt), dt.removeListener("data", G), Bn = !0, je.awaitDrain && (!W._writableState || W._writableState.needDrain) && Yt();
            }
            function G(Tt) {
              N("ondata");
              var Oe = W.write(Tt);
              N("dest.write", Oe), Oe === !1 && ((je.pipesCount === 1 && je.pipes === W || 1 < je.pipesCount && K(je.pipes, W) !== -1) && !Bn && (N("false write response, pause", je.awaitDrain), je.awaitDrain++), dt.pause());
            }
            function ce(Tt) {
              N("onerror", Tt), mt(), W.removeListener("error", ce), te(W, "error") === 0 && de(W, Tt);
            }
            function Ne() {
              W.removeListener("finish", qe), mt();
            }
            function qe() {
              N("onfinish"), W.removeListener("close", Ne), mt();
            }
            function mt() {
              N("unpipe"), dt.unpipe(W);
            }
            var dt = this, je = this._readableState;
            switch (je.pipesCount) {
              case 0:
                je.pipes = W;
                break;
              case 1:
                je.pipes = [je.pipes, W];
                break;
              default:
                je.pipes.push(W);
            }
            je.pipesCount += 1, N("pipe count=%d opts=%j", je.pipesCount, y);
            var vt = (!y || y.end !== !1) && W !== l.stdout && W !== l.stderr, zt = vt ? B : mt;
            je.endEmitted ? l.nextTick(zt) : dt.once("end", zt), W.on("unpipe", T);
            var Yt = A(dt);
            W.on("drain", Yt);
            var Bn = !1;
            return dt.on("data", G), f(W, "error", ce), W.once("close", Ne), W.once("finish", qe), W.emit("pipe", dt), je.flowing || (N("pipe resume"), dt.resume()), W;
          }, d.prototype.unpipe = function(W) {
            var y = this._readableState, T = { hasUnpiped: !1 };
            if (y.pipesCount === 0)
              return this;
            if (y.pipesCount === 1)
              return W && W !== y.pipes ? this : (W || (W = y.pipes), y.pipes = null, y.pipesCount = 0, y.flowing = !1, W && W.emit("unpipe", this, T), this);
            if (!W) {
              var B = y.pipes, X = y.pipesCount;
              y.pipes = null, y.pipesCount = 0, y.flowing = !1;
              for (var G = 0; G < X; G++)
                B[G].emit("unpipe", this, { hasUnpiped: !1 });
              return this;
            }
            var ce = K(y.pipes, W);
            return ce === -1 ? this : (y.pipes.splice(ce, 1), y.pipesCount -= 1, y.pipesCount === 1 && (y.pipes = y.pipes[0]), W.emit("unpipe", this, T), this);
          }, d.prototype.on = function(W, y) {
            var T = ue.prototype.on.call(this, W, y), B = this._readableState;
            return W === "data" ? (B.readableListening = 0 < this.listenerCount("readable"), B.flowing !== !1 && this.resume()) : W == "readable" && !B.endEmitted && !B.readableListening && (B.readableListening = B.needReadable = !0, B.flowing = !1, B.emittedReadable = !1, N("on readable", B.length, B.reading), B.length ? k(this) : !B.reading && l.nextTick(R, this)), T;
          }, d.prototype.addListener = d.prototype.on, d.prototype.removeListener = function(W, y) {
            var T = ue.prototype.removeListener.call(this, W, y);
            return W === "readable" && l.nextTick(D, this), T;
          }, d.prototype.removeAllListeners = function(W) {
            var y = ue.prototype.removeAllListeners.apply(this, arguments);
            return (W === "readable" || W === void 0) && l.nextTick(D, this), y;
          }, d.prototype.resume = function() {
            var W = this._readableState;
            return W.flowing || (N("resume"), W.flowing = !W.readableListening, M(this, W)), W.paused = !1, this;
          }, d.prototype.pause = function() {
            return N("call pause flowing=%j", this._readableState.flowing), this._readableState.flowing !== !1 && (N("pause"), this._readableState.flowing = !1, this.emit("pause")), this._readableState.paused = !0, this;
          }, d.prototype.wrap = function(W) {
            var y = this, T = this._readableState, B = !1;
            for (var X in W.on("end", function() {
              if (N("wrapped end"), T.decoder && !T.ended) {
                var ce = T.decoder.end();
                ce && ce.length && y.push(ce);
              }
              y.push(null);
            }), W.on("data", function(ce) {
              if (N("wrapped data"), T.decoder && (ce = T.decoder.write(ce)), !(T.objectMode && ce == null) && (T.objectMode || ce && ce.length)) {
                var Ne = y.push(ce);
                Ne || (B = !0, W.pause());
              }
            }), W)
              this[X] === void 0 && typeof W[X] == "function" && (this[X] = function(ce) {
                return function() {
                  return W[ce].apply(W, arguments);
                };
              }(X));
            for (var G = 0; G < he.length; G++)
              W.on(he[G], this.emit.bind(this, he[G]));
            return this._read = function(ce) {
              N("wrapped _read", ce), B && (B = !1, W.resume());
            }, this;
          }, typeof Symbol == "function" && (d.prototype[Symbol.asyncIterator] = function() {
            return Le === void 0 && (Le = s("./internal/streams/async_iterator")), Le(this);
          }), Object.defineProperty(d.prototype, "readableHighWaterMark", { enumerable: !1, get: function() {
            return this._readableState.highWaterMark;
          } }), Object.defineProperty(d.prototype, "readableBuffer", { enumerable: !1, get: function() {
            return this._readableState && this._readableState.buffer;
          } }), Object.defineProperty(d.prototype, "readableFlowing", { enumerable: !1, get: function() {
            return this._readableState.flowing;
          }, set: function(W) {
            this._readableState && (this._readableState.flowing = W);
          } }), d._fromList = I, Object.defineProperty(d.prototype, "readableLength", { enumerable: !1, get: function() {
            return this._readableState.length;
          } }), typeof Symbol == "function" && (d.from = function(W, y) {
            return Ie === void 0 && (Ie = s("./internal/streams/from")), Ie(d, W, y);
          });
        }).call(this);
      }).call(this, s("_process"), typeof Yr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Yr);
    }, { "../errors": 15, "./_stream_duplex": 16, "./internal/streams/async_iterator": 21, "./internal/streams/buffer_list": 22, "./internal/streams/destroy": 23, "./internal/streams/from": 25, "./internal/streams/state": 27, "./internal/streams/stream": 28, _process: 12, buffer: 3, events: 7, inherits: 10, "string_decoder/": 31, util: 2 }], 19: [function(s, o) {
      function l(m, C) {
        var v = this._transformState;
        v.transforming = !1;
        var k = v.writecb;
        if (k === null)
          return this.emit("error", new d());
        v.writechunk = null, v.writecb = null, C != null && this.push(C), k(m);
        var S = this._readableState;
        S.reading = !1, (S.needReadable || S.length < S.highWaterMark) && this._read(S.highWaterMark);
      }
      function a(m) {
        return this instanceof a ? (_.call(this, m), this._transformState = { afterTransform: l.bind(this), needTransform: !1, transforming: !1, writecb: null, writechunk: null, writeencoding: null }, this._readableState.needReadable = !0, this._readableState.sync = !1, m && (typeof m.transform == "function" && (this._transform = m.transform), typeof m.flush == "function" && (this._flush = m.flush)), void this.on("prefinish", c)) : new a(m);
      }
      function c() {
        var m = this;
        typeof this._flush != "function" || this._readableState.destroyed ? u(this, null, null) : this._flush(function(C, v) {
          u(m, C, v);
        });
      }
      function u(m, C, v) {
        if (C)
          return m.emit("error", C);
        if (v != null && m.push(v), m._writableState.length)
          throw new g();
        if (m._transformState.transforming)
          throw new p();
        return m.push(null);
      }
      o.exports = a;
      var f = s("../errors").codes, h = f.ERR_METHOD_NOT_IMPLEMENTED, d = f.ERR_MULTIPLE_CALLBACK, p = f.ERR_TRANSFORM_ALREADY_TRANSFORMING, g = f.ERR_TRANSFORM_WITH_LENGTH_0, _ = s("./_stream_duplex");
      s("inherits")(a, _), a.prototype.push = function(m, C) {
        return this._transformState.needTransform = !1, _.prototype.push.call(this, m, C);
      }, a.prototype._transform = function(m, C, v) {
        v(new h("_transform()"));
      }, a.prototype._write = function(m, C, v) {
        var k = this._transformState;
        if (k.writecb = v, k.writechunk = m, k.writeencoding = C, !k.transforming) {
          var S = this._readableState;
          (k.needTransform || S.needReadable || S.length < S.highWaterMark) && this._read(S.highWaterMark);
        }
      }, a.prototype._read = function() {
        var m = this._transformState;
        m.writechunk === null || m.transforming ? m.needTransform = !0 : (m.transforming = !0, this._transform(m.writechunk, m.writeencoding, m.afterTransform));
      }, a.prototype._destroy = function(m, C) {
        _.prototype._destroy.call(this, m, function(v) {
          C(v);
        });
      };
    }, { "../errors": 15, "./_stream_duplex": 16, inherits: 10 }], 20: [function(s, o) {
      (function(l, a) {
        (function() {
          function c(ae) {
            var $ = this;
            this.next = null, this.entry = null, this.finish = function() {
              z($, ae);
            };
          }
          function u(ae) {
            return N.from(ae);
          }
          function f(ae) {
            return N.isBuffer(ae) || ae instanceof te;
          }
          function h() {
          }
          function d(ae, $, de) {
            L = L || s("./_stream_duplex"), ae = ae || {}, typeof de != "boolean" && (de = $ instanceof L), this.objectMode = !!ae.objectMode, de && (this.objectMode = this.objectMode || !!ae.writableObjectMode), this.highWaterMark = re(this, ae, "writableHighWaterMark", de), this.finalCalled = !1, this.needDrain = !1, this.ending = !1, this.ended = !1, this.finished = !1, this.destroyed = !1;
            var he = ae.decodeStrings === !1;
            this.decodeStrings = !he, this.defaultEncoding = ae.defaultEncoding || "utf8", this.length = 0, this.writing = !1, this.corked = 0, this.sync = !0, this.bufferProcessing = !1, this.onwrite = function(W) {
              O($, W);
            }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = !1, this.errorEmitted = !1, this.emitClose = ae.emitClose !== !1, this.autoDestroy = !!ae.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new c(this);
          }
          function p(ae) {
            L = L || s("./_stream_duplex");
            var $ = this instanceof L;
            return $ || Ae.call(p, this) ? (this._writableState = new d(ae, this, $), this.writable = !0, ae && (typeof ae.write == "function" && (this._write = ae.write), typeof ae.writev == "function" && (this._writev = ae.writev), typeof ae.destroy == "function" && (this._destroy = ae.destroy), typeof ae.final == "function" && (this._final = ae.final)), void F.call(this)) : new p(ae);
          }
          function g(ae, $) {
            var de = new Ve();
            fe(ae, de), l.nextTick($, de);
          }
          function _(ae, $, de, he) {
            var W;
            return de === null ? W = new De() : typeof de != "string" && !$.objectMode && (W = new Z("chunk", ["string", "Buffer"], de)), !W || (fe(ae, W), l.nextTick(he, W), !1);
          }
          function m(ae, $, de) {
            return ae.objectMode || ae.decodeStrings === !1 || typeof $ != "string" || ($ = N.from($, de)), $;
          }
          function C(ae, $, de, he, W, y) {
            if (!de) {
              var T = m($, he, W);
              he !== T && (de = !0, W = "buffer", he = T);
            }
            var B = $.objectMode ? 1 : he.length;
            $.length += B;
            var X = $.length < $.highWaterMark;
            if (X || ($.needDrain = !0), $.writing || $.corked) {
              var G = $.lastBufferedRequest;
              $.lastBufferedRequest = { chunk: he, encoding: W, isBuf: de, callback: y, next: null }, G ? G.next = $.lastBufferedRequest : $.bufferedRequest = $.lastBufferedRequest, $.bufferedRequestCount += 1;
            } else
              v(ae, $, !1, B, he, W, y);
            return X;
          }
          function v(ae, $, de, he, W, y, T) {
            $.writelen = he, $.writecb = T, $.writing = !0, $.sync = !0, $.destroyed ? $.onwrite(new le("write")) : de ? ae._writev(W, $.onwrite) : ae._write(W, y, $.onwrite), $.sync = !1;
          }
          function k(ae, $, de, he, W) {
            --$.pendingcb, de ? (l.nextTick(W, he), l.nextTick(J, ae, $), ae._writableState.errorEmitted = !0, fe(ae, he)) : (W(he), ae._writableState.errorEmitted = !0, fe(ae, he), J(ae, $));
          }
          function S(ae) {
            ae.writing = !1, ae.writecb = null, ae.length -= ae.writelen, ae.writelen = 0;
          }
          function O(ae, $) {
            var de = ae._writableState, he = de.sync, W = de.writecb;
            if (typeof W != "function")
              throw new Ie();
            if (S(de), $)
              k(ae, de, he, $, W);
            else {
              var y = R(de) || ae.destroyed;
              y || de.corked || de.bufferProcessing || !de.bufferedRequest || D(ae, de), he ? l.nextTick(w, ae, de, y, W) : w(ae, de, y, W);
            }
          }
          function w(ae, $, de, he) {
            de || A(ae, $), $.pendingcb--, he(), J(ae, $);
          }
          function A(ae, $) {
            $.length === 0 && $.needDrain && ($.needDrain = !1, ae.emit("drain"));
          }
          function D(ae, $) {
            $.bufferProcessing = !0;
            var de = $.bufferedRequest;
            if (ae._writev && de && de.next) {
              var he = $.bufferedRequestCount, W = Array(he), y = $.corkedRequestsFree;
              y.entry = de;
              for (var T = 0, B = !0; de; )
                W[T] = de, de.isBuf || (B = !1), de = de.next, T += 1;
              W.allBuffers = B, v(ae, $, !0, $.length, W, "", y.finish), $.pendingcb++, $.lastBufferedRequest = null, y.next ? ($.corkedRequestsFree = y.next, y.next = null) : $.corkedRequestsFree = new c($), $.bufferedRequestCount = 0;
            } else {
              for (; de; ) {
                var X = de.chunk, G = de.encoding, ce = de.callback, Ne = $.objectMode ? 1 : X.length;
                if (v(ae, $, !1, Ne, X, G, ce), de = de.next, $.bufferedRequestCount--, $.writing)
                  break;
              }
              de === null && ($.lastBufferedRequest = null);
            }
            $.bufferedRequest = de, $.bufferProcessing = !1;
          }
          function R(ae) {
            return ae.ending && ae.length === 0 && ae.bufferedRequest === null && !ae.finished && !ae.writing;
          }
          function M(ae, $) {
            ae._final(function(de) {
              $.pendingcb--, de && fe(ae, de), $.prefinished = !0, ae.emit("prefinish"), J(ae, $);
            });
          }
          function H(ae, $) {
            $.prefinished || $.finalCalled || (typeof ae._final != "function" || $.destroyed ? ($.prefinished = !0, ae.emit("prefinish")) : ($.pendingcb++, $.finalCalled = !0, l.nextTick(M, ae, $)));
          }
          function J(ae, $) {
            var de = R($);
            if (de && (H(ae, $), $.pendingcb === 0 && ($.finished = !0, ae.emit("finish"), $.autoDestroy))) {
              var he = ae._readableState;
              (!he || he.autoDestroy && he.endEmitted) && ae.destroy();
            }
            return de;
          }
          function I(ae, $, de) {
            $.ending = !0, J(ae, $), de && ($.finished ? l.nextTick(de) : ae.once("finish", de)), $.ended = !0, ae.writable = !1;
          }
          function z(ae, $, de) {
            var he = ae.entry;
            for (ae.entry = null; he; ) {
              var W = he.callback;
              $.pendingcb--, W(de), he = he.next;
            }
            $.corkedRequestsFree.next = ae;
          }
          o.exports = p;
          var L;
          p.WritableState = d;
          var K = { deprecate: s("util-deprecate") }, F = s("./internal/streams/stream"), N = s("buffer").Buffer, te = a.Uint8Array || function() {
          }, ue = s("./internal/streams/destroy"), q = s("./internal/streams/state"), re = q.getHighWaterMark, ie = s("../errors").codes, Z = ie.ERR_INVALID_ARG_TYPE, Le = ie.ERR_METHOD_NOT_IMPLEMENTED, Ie = ie.ERR_MULTIPLE_CALLBACK, Fe = ie.ERR_STREAM_CANNOT_PIPE, le = ie.ERR_STREAM_DESTROYED, De = ie.ERR_STREAM_NULL_VALUES, Ve = ie.ERR_STREAM_WRITE_AFTER_END, ye = ie.ERR_UNKNOWN_ENCODING, fe = ue.errorOrDestroy;
          s("inherits")(p, F), d.prototype.getBuffer = function() {
            for (var ae = this.bufferedRequest, $ = []; ae; )
              $.push(ae), ae = ae.next;
            return $;
          }, function() {
            try {
              Object.defineProperty(d.prototype, "buffer", { get: K.deprecate(function() {
                return this.getBuffer();
              }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003") });
            } catch {
            }
          }();
          var Ae;
          typeof Symbol == "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] == "function" ? (Ae = Function.prototype[Symbol.hasInstance], Object.defineProperty(p, Symbol.hasInstance, { value: function(ae) {
            return !!Ae.call(this, ae) || this === p && ae && ae._writableState instanceof d;
          } })) : Ae = function(ae) {
            return ae instanceof this;
          }, p.prototype.pipe = function() {
            fe(this, new Fe());
          }, p.prototype.write = function(ae, $, de) {
            var he = this._writableState, W = !1, y = !he.objectMode && f(ae);
            return y && !N.isBuffer(ae) && (ae = u(ae)), typeof $ == "function" && (de = $, $ = null), y ? $ = "buffer" : !$ && ($ = he.defaultEncoding), typeof de != "function" && (de = h), he.ending ? g(this, de) : (y || _(this, he, ae, de)) && (he.pendingcb++, W = C(this, he, y, ae, $, de)), W;
          }, p.prototype.cork = function() {
            this._writableState.corked++;
          }, p.prototype.uncork = function() {
            var ae = this._writableState;
            ae.corked && (ae.corked--, !ae.writing && !ae.corked && !ae.bufferProcessing && ae.bufferedRequest && D(this, ae));
          }, p.prototype.setDefaultEncoding = function(ae) {
            if (typeof ae == "string" && (ae = ae.toLowerCase()), !(-1 < ["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((ae + "").toLowerCase())))
              throw new ye(ae);
            return this._writableState.defaultEncoding = ae, this;
          }, Object.defineProperty(p.prototype, "writableBuffer", { enumerable: !1, get: function() {
            return this._writableState && this._writableState.getBuffer();
          } }), Object.defineProperty(p.prototype, "writableHighWaterMark", { enumerable: !1, get: function() {
            return this._writableState.highWaterMark;
          } }), p.prototype._write = function(ae, $, de) {
            de(new Le("_write()"));
          }, p.prototype._writev = null, p.prototype.end = function(ae, $, de) {
            var he = this._writableState;
            return typeof ae == "function" ? (de = ae, ae = null, $ = null) : typeof $ == "function" && (de = $, $ = null), ae != null && this.write(ae, $), he.corked && (he.corked = 1, this.uncork()), he.ending || I(this, he, de), this;
          }, Object.defineProperty(p.prototype, "writableLength", { enumerable: !1, get: function() {
            return this._writableState.length;
          } }), Object.defineProperty(p.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._writableState !== void 0 && this._writableState.destroyed;
          }, set: function(ae) {
            this._writableState && (this._writableState.destroyed = ae);
          } }), p.prototype.destroy = ue.destroy, p.prototype._undestroy = ue.undestroy, p.prototype._destroy = function(ae, $) {
            $(ae);
          };
        }).call(this);
      }).call(this, s("_process"), typeof Yr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Yr);
    }, { "../errors": 15, "./_stream_duplex": 16, "./internal/streams/destroy": 23, "./internal/streams/state": 27, "./internal/streams/stream": 28, _process: 12, buffer: 3, inherits: 10, "util-deprecate": 32 }], 21: [function(s, o) {
      (function(l) {
        (function() {
          function a(A, D, R) {
            return D in A ? Object.defineProperty(A, D, { value: R, enumerable: !0, configurable: !0, writable: !0 }) : A[D] = R, A;
          }
          function c(A, D) {
            return { value: A, done: D };
          }
          function u(A) {
            var D = A[g];
            if (D !== null) {
              var R = A[S].read();
              R !== null && (A[v] = null, A[g] = null, A[_] = null, D(c(R, !1)));
            }
          }
          function f(A) {
            l.nextTick(u, A);
          }
          function h(A, D) {
            return function(R, M) {
              A.then(function() {
                return D[C] ? void R(c(void 0, !0)) : void D[k](R, M);
              }, M);
            };
          }
          var d, p = s("./end-of-stream"), g = Symbol("lastResolve"), _ = Symbol("lastReject"), m = Symbol("error"), C = Symbol("ended"), v = Symbol("lastPromise"), k = Symbol("handlePromise"), S = Symbol("stream"), O = Object.getPrototypeOf(function() {
          }), w = Object.setPrototypeOf((d = { get stream() {
            return this[S];
          }, next: function() {
            var A = this, D = this[m];
            if (D !== null)
              return Promise.reject(D);
            if (this[C])
              return Promise.resolve(c(void 0, !0));
            if (this[S].destroyed)
              return new Promise(function(J, I) {
                l.nextTick(function() {
                  A[m] ? I(A[m]) : J(c(void 0, !0));
                });
              });
            var R, M = this[v];
            if (M)
              R = new Promise(h(M, this));
            else {
              var H = this[S].read();
              if (H !== null)
                return Promise.resolve(c(H, !1));
              R = new Promise(this[k]);
            }
            return this[v] = R, R;
          } }, a(d, Symbol.asyncIterator, function() {
            return this;
          }), a(d, "return", function() {
            var A = this;
            return new Promise(function(D, R) {
              A[S].destroy(null, function(M) {
                return M ? void R(M) : void D(c(void 0, !0));
              });
            });
          }), d), O);
          o.exports = function(A) {
            var D, R = Object.create(w, (D = {}, a(D, S, { value: A, writable: !0 }), a(D, g, { value: null, writable: !0 }), a(D, _, { value: null, writable: !0 }), a(D, m, { value: null, writable: !0 }), a(D, C, { value: A._readableState.endEmitted, writable: !0 }), a(D, k, { value: function(M, H) {
              var J = R[S].read();
              J ? (R[v] = null, R[g] = null, R[_] = null, M(c(J, !1))) : (R[g] = M, R[_] = H);
            }, writable: !0 }), D));
            return R[v] = null, p(A, function(M) {
              if (M && M.code !== "ERR_STREAM_PREMATURE_CLOSE") {
                var H = R[_];
                return H !== null && (R[v] = null, R[g] = null, R[_] = null, H(M)), void (R[m] = M);
              }
              var J = R[g];
              J !== null && (R[v] = null, R[g] = null, R[_] = null, J(c(void 0, !0))), R[C] = !0;
            }), A.on("readable", f.bind(null, R)), R;
          };
        }).call(this);
      }).call(this, s("_process"));
    }, { "./end-of-stream": 24, _process: 12 }], 22: [function(s, o) {
      function l(v, k) {
        var S = Object.keys(v);
        if (Object.getOwnPropertySymbols) {
          var O = Object.getOwnPropertySymbols(v);
          k && (O = O.filter(function(w) {
            return Object.getOwnPropertyDescriptor(v, w).enumerable;
          })), S.push.apply(S, O);
        }
        return S;
      }
      function a(v) {
        for (var k, S = 1; S < arguments.length; S++)
          k = arguments[S] == null ? {} : arguments[S], S % 2 ? l(Object(k), !0).forEach(function(O) {
            c(v, O, k[O]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(v, Object.getOwnPropertyDescriptors(k)) : l(Object(k)).forEach(function(O) {
            Object.defineProperty(v, O, Object.getOwnPropertyDescriptor(k, O));
          });
        return v;
      }
      function c(v, k, S) {
        return k in v ? Object.defineProperty(v, k, { value: S, enumerable: !0, configurable: !0, writable: !0 }) : v[k] = S, v;
      }
      function u(v, k) {
        if (!(v instanceof k))
          throw new TypeError("Cannot call a class as a function");
      }
      function f(v, k) {
        for (var S, O = 0; O < k.length; O++)
          S = k[O], S.enumerable = S.enumerable || !1, S.configurable = !0, "value" in S && (S.writable = !0), Object.defineProperty(v, S.key, S);
      }
      function h(v, k, S) {
        return k && f(v.prototype, k), S && f(v, S), v;
      }
      function d(v, k, S) {
        g.prototype.copy.call(v, k, S);
      }
      var p = s("buffer"), g = p.Buffer, _ = s("util"), m = _.inspect, C = m && m.custom || "inspect";
      o.exports = function() {
        function v() {
          u(this, v), this.head = null, this.tail = null, this.length = 0;
        }
        return h(v, [{ key: "push", value: function(k) {
          var S = { data: k, next: null };
          0 < this.length ? this.tail.next = S : this.head = S, this.tail = S, ++this.length;
        } }, { key: "unshift", value: function(k) {
          var S = { data: k, next: this.head };
          this.length === 0 && (this.tail = S), this.head = S, ++this.length;
        } }, { key: "shift", value: function() {
          if (this.length !== 0) {
            var k = this.head.data;
            return this.head = this.length === 1 ? this.tail = null : this.head.next, --this.length, k;
          }
        } }, { key: "clear", value: function() {
          this.head = this.tail = null, this.length = 0;
        } }, { key: "join", value: function(k) {
          if (this.length === 0)
            return "";
          for (var S = this.head, O = "" + S.data; S = S.next; )
            O += k + S.data;
          return O;
        } }, { key: "concat", value: function(k) {
          if (this.length === 0)
            return g.alloc(0);
          for (var S = g.allocUnsafe(k >>> 0), O = this.head, w = 0; O; )
            d(O.data, S, w), w += O.data.length, O = O.next;
          return S;
        } }, { key: "consume", value: function(k, S) {
          var O;
          return k < this.head.data.length ? (O = this.head.data.slice(0, k), this.head.data = this.head.data.slice(k)) : k === this.head.data.length ? O = this.shift() : O = S ? this._getString(k) : this._getBuffer(k), O;
        } }, { key: "first", value: function() {
          return this.head.data;
        } }, { key: "_getString", value: function(k) {
          var S = this.head, O = 1, w = S.data;
          for (k -= w.length; S = S.next; ) {
            var A = S.data, D = k > A.length ? A.length : k;
            if (w += D === A.length ? A : A.slice(0, k), k -= D, k === 0) {
              D === A.length ? (++O, this.head = S.next ? S.next : this.tail = null) : (this.head = S, S.data = A.slice(D));
              break;
            }
            ++O;
          }
          return this.length -= O, w;
        } }, { key: "_getBuffer", value: function(k) {
          var S = g.allocUnsafe(k), O = this.head, w = 1;
          for (O.data.copy(S), k -= O.data.length; O = O.next; ) {
            var A = O.data, D = k > A.length ? A.length : k;
            if (A.copy(S, S.length - k, 0, D), k -= D, k === 0) {
              D === A.length ? (++w, this.head = O.next ? O.next : this.tail = null) : (this.head = O, O.data = A.slice(D));
              break;
            }
            ++w;
          }
          return this.length -= w, S;
        } }, { key: C, value: function(k, S) {
          return m(this, a({}, S, { depth: 0, customInspect: !1 }));
        } }]), v;
      }();
    }, { buffer: 3, util: 2 }], 23: [function(s, o) {
      (function(l) {
        (function() {
          function a(f, h) {
            u(f, h), c(f);
          }
          function c(f) {
            f._writableState && !f._writableState.emitClose || f._readableState && !f._readableState.emitClose || f.emit("close");
          }
          function u(f, h) {
            f.emit("error", h);
          }
          o.exports = { destroy: function(f, h) {
            var d = this, p = this._readableState && this._readableState.destroyed, g = this._writableState && this._writableState.destroyed;
            return p || g ? (h ? h(f) : f && (this._writableState ? !this._writableState.errorEmitted && (this._writableState.errorEmitted = !0, l.nextTick(u, this, f)) : l.nextTick(u, this, f)), this) : (this._readableState && (this._readableState.destroyed = !0), this._writableState && (this._writableState.destroyed = !0), this._destroy(f || null, function(_) {
              !h && _ ? d._writableState ? d._writableState.errorEmitted ? l.nextTick(c, d) : (d._writableState.errorEmitted = !0, l.nextTick(a, d, _)) : l.nextTick(a, d, _) : h ? (l.nextTick(c, d), h(_)) : l.nextTick(c, d);
            }), this);
          }, undestroy: function() {
            this._readableState && (this._readableState.destroyed = !1, this._readableState.reading = !1, this._readableState.ended = !1, this._readableState.endEmitted = !1), this._writableState && (this._writableState.destroyed = !1, this._writableState.ended = !1, this._writableState.ending = !1, this._writableState.finalCalled = !1, this._writableState.prefinished = !1, this._writableState.finished = !1, this._writableState.errorEmitted = !1);
          }, errorOrDestroy: function(f, h) {
            var d = f._readableState, p = f._writableState;
            d && d.autoDestroy || p && p.autoDestroy ? f.destroy(h) : f.emit("error", h);
          } };
        }).call(this);
      }).call(this, s("_process"));
    }, { _process: 12 }], 24: [function(s, o) {
      function l(h) {
        var d = !1;
        return function() {
          if (!d) {
            d = !0;
            for (var p = arguments.length, g = Array(p), _ = 0; _ < p; _++)
              g[_] = arguments[_];
            h.apply(this, g);
          }
        };
      }
      function a() {
      }
      function c(h) {
        return h.setHeader && typeof h.abort == "function";
      }
      function u(h, d, p) {
        if (typeof d == "function")
          return u(h, null, d);
        d || (d = {}), p = l(p || a);
        var g = d.readable || d.readable !== !1 && h.readable, _ = d.writable || d.writable !== !1 && h.writable, m = function() {
          h.writable || v();
        }, C = h._writableState && h._writableState.finished, v = function() {
          _ = !1, C = !0, g || p.call(h);
        }, k = h._readableState && h._readableState.endEmitted, S = function() {
          g = !1, k = !0, _ || p.call(h);
        }, O = function(D) {
          p.call(h, D);
        }, w = function() {
          var D;
          return g && !k ? (h._readableState && h._readableState.ended || (D = new f()), p.call(h, D)) : _ && !C ? (h._writableState && h._writableState.ended || (D = new f()), p.call(h, D)) : void 0;
        }, A = function() {
          h.req.on("finish", v);
        };
        return c(h) ? (h.on("complete", v), h.on("abort", w), h.req ? A() : h.on("request", A)) : _ && !h._writableState && (h.on("end", m), h.on("close", m)), h.on("end", S), h.on("finish", v), d.error !== !1 && h.on("error", O), h.on("close", w), function() {
          h.removeListener("complete", v), h.removeListener("abort", w), h.removeListener("request", A), h.req && h.req.removeListener("finish", v), h.removeListener("end", m), h.removeListener("close", m), h.removeListener("finish", v), h.removeListener("end", S), h.removeListener("error", O), h.removeListener("close", w);
        };
      }
      var f = s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;
      o.exports = u;
    }, { "../../../errors": 15 }], 25: [function(s, o) {
      o.exports = function() {
        throw new Error("Readable.from is not available in the browser");
      };
    }, {}], 26: [function(s, o) {
      function l(C) {
        var v = !1;
        return function() {
          v || (v = !0, C.apply(void 0, arguments));
        };
      }
      function a(C) {
        if (C)
          throw C;
      }
      function c(C) {
        return C.setHeader && typeof C.abort == "function";
      }
      function u(C, v, k, S) {
        S = l(S);
        var O = !1;
        C.on("close", function() {
          O = !0;
        }), p === void 0 && (p = s("./end-of-stream")), p(C, { readable: v, writable: k }, function(A) {
          return A ? S(A) : (O = !0, void S());
        });
        var w = !1;
        return function(A) {
          if (!O)
            return w ? void 0 : (w = !0, c(C) ? C.abort() : typeof C.destroy == "function" ? C.destroy() : void S(A || new m("pipe")));
        };
      }
      function f(C) {
        C();
      }
      function h(C, v) {
        return C.pipe(v);
      }
      function d(C) {
        return C.length && typeof C[C.length - 1] == "function" ? C.pop() : a;
      }
      var p, g = s("../../../errors").codes, _ = g.ERR_MISSING_ARGS, m = g.ERR_STREAM_DESTROYED;
      o.exports = function() {
        for (var C = arguments.length, v = Array(C), k = 0; k < C; k++)
          v[k] = arguments[k];
        var S = d(v);
        if (Array.isArray(v[0]) && (v = v[0]), 2 > v.length)
          throw new _("streams");
        var O, w = v.map(function(A, D) {
          var R = D < v.length - 1;
          return u(A, R, 0 < D, function(M) {
            O || (O = M), M && w.forEach(f), R || (w.forEach(f), S(O));
          });
        });
        return v.reduce(h);
      };
    }, { "../../../errors": 15, "./end-of-stream": 24 }], 27: [function(s, o) {
      function l(c, u, f) {
        return c.highWaterMark == null ? u ? c[f] : null : c.highWaterMark;
      }
      var a = s("../../../errors").codes.ERR_INVALID_OPT_VALUE;
      o.exports = { getHighWaterMark: function(c, u, f, h) {
        var d = l(u, h, f);
        if (d != null) {
          if (!(isFinite(d) && n(d) === d) || 0 > d) {
            var p = h ? f : "highWaterMark";
            throw new a(p, d);
          }
          return n(d);
        }
        return c.objectMode ? 16 : 16384;
      } };
    }, { "../../../errors": 15 }], 28: [function(s, o) {
      o.exports = s("events").EventEmitter;
    }, { events: 7 }], 29: [function(s, o, l) {
      l = o.exports = s("./lib/_stream_readable.js"), l.Stream = l, l.Readable = l, l.Writable = s("./lib/_stream_writable.js"), l.Duplex = s("./lib/_stream_duplex.js"), l.Transform = s("./lib/_stream_transform.js"), l.PassThrough = s("./lib/_stream_passthrough.js"), l.finished = s("./lib/internal/streams/end-of-stream.js"), l.pipeline = s("./lib/internal/streams/pipeline.js");
    }, { "./lib/_stream_duplex.js": 16, "./lib/_stream_passthrough.js": 17, "./lib/_stream_readable.js": 18, "./lib/_stream_transform.js": 19, "./lib/_stream_writable.js": 20, "./lib/internal/streams/end-of-stream.js": 24, "./lib/internal/streams/pipeline.js": 26 }], 30: [function(s, o, l) {
      function a(h, d) {
        for (var p in h)
          d[p] = h[p];
      }
      function c(h, d, p) {
        return f(h, d, p);
      }
      /*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
      var u = s("buffer"), f = u.Buffer;
      f.from && f.alloc && f.allocUnsafe && f.allocUnsafeSlow ? o.exports = u : (a(u, l), l.Buffer = c), c.prototype = Object.create(f.prototype), a(f, c), c.from = function(h, d, p) {
        if (typeof h == "number")
          throw new TypeError("Argument must not be a number");
        return f(h, d, p);
      }, c.alloc = function(h, d, p) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        var g = f(h);
        return d === void 0 ? g.fill(0) : typeof p == "string" ? g.fill(d, p) : g.fill(d), g;
      }, c.allocUnsafe = function(h) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        return f(h);
      }, c.allocUnsafeSlow = function(h) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        return u.SlowBuffer(h);
      };
    }, { buffer: 3 }], 31: [function(s, o, l) {
      function a(w) {
        if (!w)
          return "utf8";
        for (var A; ; )
          switch (w) {
            case "utf8":
            case "utf-8":
              return "utf8";
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return "utf16le";
            case "latin1":
            case "binary":
              return "latin1";
            case "base64":
            case "ascii":
            case "hex":
              return w;
            default:
              if (A)
                return;
              w = ("" + w).toLowerCase(), A = !0;
          }
      }
      function c(w) {
        var A = a(w);
        if (typeof A != "string" && (S.isEncoding === O || !O(w)))
          throw new Error("Unknown encoding: " + w);
        return A || w;
      }
      function u(w) {
        this.encoding = c(w);
        var A;
        switch (this.encoding) {
          case "utf16le":
            this.text = g, this.end = _, A = 4;
            break;
          case "utf8":
            this.fillLast = p, A = 4;
            break;
          case "base64":
            this.text = m, this.end = C, A = 3;
            break;
          default:
            return this.write = v, void (this.end = k);
        }
        this.lastNeed = 0, this.lastTotal = 0, this.lastChar = S.allocUnsafe(A);
      }
      function f(w) {
        return 127 >= w ? 0 : w >> 5 == 6 ? 2 : w >> 4 == 14 ? 3 : w >> 3 == 30 ? 4 : w >> 6 == 2 ? -1 : -2;
      }
      function h(w, A, D) {
        var R = A.length - 1;
        if (R < D)
          return 0;
        var M = f(A[R]);
        return 0 <= M ? (0 < M && (w.lastNeed = M - 1), M) : --R < D || M === -2 ? 0 : (M = f(A[R]), 0 <= M ? (0 < M && (w.lastNeed = M - 2), M) : --R < D || M === -2 ? 0 : (M = f(A[R]), 0 <= M ? (0 < M && (M === 2 ? M = 0 : w.lastNeed = M - 3), M) : 0));
      }
      function d(w, A) {
        if ((192 & A[0]) != 128)
          return w.lastNeed = 0, "�";
        if (1 < w.lastNeed && 1 < A.length) {
          if ((192 & A[1]) != 128)
            return w.lastNeed = 1, "�";
          if (2 < w.lastNeed && 2 < A.length && (192 & A[2]) != 128)
            return w.lastNeed = 2, "�";
        }
      }
      function p(w) {
        var A = this.lastTotal - this.lastNeed, D = d(this, w);
        return D === void 0 ? this.lastNeed <= w.length ? (w.copy(this.lastChar, A, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (w.copy(this.lastChar, A, 0, w.length), void (this.lastNeed -= w.length)) : D;
      }
      function g(w, A) {
        if ((w.length - A) % 2 == 0) {
          var D = w.toString("utf16le", A);
          if (D) {
            var R = D.charCodeAt(D.length - 1);
            if (55296 <= R && 56319 >= R)
              return this.lastNeed = 2, this.lastTotal = 4, this.lastChar[0] = w[w.length - 2], this.lastChar[1] = w[w.length - 1], D.slice(0, -1);
          }
          return D;
        }
        return this.lastNeed = 1, this.lastTotal = 2, this.lastChar[0] = w[w.length - 1], w.toString("utf16le", A, w.length - 1);
      }
      function _(w) {
        var A = w && w.length ? this.write(w) : "";
        if (this.lastNeed) {
          var D = this.lastTotal - this.lastNeed;
          return A + this.lastChar.toString("utf16le", 0, D);
        }
        return A;
      }
      function m(w, A) {
        var D = (w.length - A) % 3;
        return D == 0 ? w.toString("base64", A) : (this.lastNeed = 3 - D, this.lastTotal = 3, D == 1 ? this.lastChar[0] = w[w.length - 1] : (this.lastChar[0] = w[w.length - 2], this.lastChar[1] = w[w.length - 1]), w.toString("base64", A, w.length - D));
      }
      function C(w) {
        var A = w && w.length ? this.write(w) : "";
        return this.lastNeed ? A + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : A;
      }
      function v(w) {
        return w.toString(this.encoding);
      }
      function k(w) {
        return w && w.length ? this.write(w) : "";
      }
      var S = s("safe-buffer").Buffer, O = S.isEncoding || function(w) {
        switch (w = "" + w, w && w.toLowerCase()) {
          case "hex":
          case "utf8":
          case "utf-8":
          case "ascii":
          case "binary":
          case "base64":
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
          case "raw":
            return !0;
          default:
            return !1;
        }
      };
      l.StringDecoder = u, u.prototype.write = function(w) {
        if (w.length === 0)
          return "";
        var A, D;
        if (this.lastNeed) {
          if (A = this.fillLast(w), A === void 0)
            return "";
          D = this.lastNeed, this.lastNeed = 0;
        } else
          D = 0;
        return D < w.length ? A ? A + this.text(w, D) : this.text(w, D) : A || "";
      }, u.prototype.end = function(w) {
        var A = w && w.length ? this.write(w) : "";
        return this.lastNeed ? A + "�" : A;
      }, u.prototype.text = function(w, A) {
        var D = h(this, w, A);
        if (!this.lastNeed)
          return w.toString("utf8", A);
        this.lastTotal = D;
        var R = w.length - (D - this.lastNeed);
        return w.copy(this.lastChar, 0, R), w.toString("utf8", A, R);
      }, u.prototype.fillLast = function(w) {
        return this.lastNeed <= w.length ? (w.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (w.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, w.length), void (this.lastNeed -= w.length));
      };
    }, { "safe-buffer": 30 }], 32: [function(s, o) {
      (function(l) {
        (function() {
          function a(c) {
            try {
              if (!l.localStorage)
                return !1;
            } catch {
              return !1;
            }
            var u = l.localStorage[c];
            return u != null && (u + "").toLowerCase() === "true";
          }
          o.exports = function(c, u) {
            function f() {
              if (!h) {
                if (a("throwDeprecation"))
                  throw new Error(u);
                a("traceDeprecation") ? console.trace(u) : console.warn(u), h = !0;
              }
              return c.apply(this, arguments);
            }
            if (a("noDeprecation"))
              return c;
            var h = !1;
            return f;
          };
        }).call(this);
      }).call(this, typeof Yr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Yr);
    }, {}], "/": [function(s, o) {
      function l(C) {
        return C.replace(/a=ice-options:trickle\s\n/g, "");
      }
      function a(C) {
        console.warn(C);
      }
      /*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
      const c = s("debug")("simple-peer"), u = s("get-browser-rtc"), f = s("randombytes"), h = s("readable-stream"), d = s("queue-microtask"), p = s("err-code"), { Buffer: g } = s("buffer"), _ = 65536;
      class m extends h.Duplex {
        constructor(v) {
          if (v = Object.assign({ allowHalfOpen: !1 }, v), super(v), this._id = f(4).toString("hex").slice(0, 7), this._debug("new peer %o", v), this.channelName = v.initiator ? v.channelName || f(20).toString("hex") : null, this.initiator = v.initiator || !1, this.channelConfig = v.channelConfig || m.channelConfig, this.channelNegotiated = this.channelConfig.negotiated, this.config = Object.assign({}, m.config, v.config), this.offerOptions = v.offerOptions || {}, this.answerOptions = v.answerOptions || {}, this.sdpTransform = v.sdpTransform || ((k) => k), this.streams = v.streams || (v.stream ? [v.stream] : []), this.trickle = v.trickle === void 0 || v.trickle, this.allowHalfTrickle = v.allowHalfTrickle !== void 0 && v.allowHalfTrickle, this.iceCompleteTimeout = v.iceCompleteTimeout || 5e3, this.destroyed = !1, this.destroying = !1, this._connected = !1, this.remoteAddress = void 0, this.remoteFamily = void 0, this.remotePort = void 0, this.localAddress = void 0, this.localFamily = void 0, this.localPort = void 0, this._wrtc = v.wrtc && typeof v.wrtc == "object" ? v.wrtc : u(), !this._wrtc)
            throw p(typeof window > "u" ? new Error("No WebRTC support: Specify `opts.wrtc` option in this environment") : new Error("No WebRTC support: Not a supported browser"), "ERR_WEBRTC_SUPPORT");
          this._pcReady = !1, this._channelReady = !1, this._iceComplete = !1, this._iceCompleteTimer = null, this._channel = null, this._pendingCandidates = [], this._isNegotiating = !1, this._firstNegotiation = !0, this._batchedNegotiation = !1, this._queuedNegotiation = !1, this._sendersAwaitingStable = [], this._senderMap = /* @__PURE__ */ new Map(), this._closingInterval = null, this._remoteTracks = [], this._remoteStreams = [], this._chunk = null, this._cb = null, this._interval = null;
          try {
            this._pc = new this._wrtc.RTCPeerConnection(this.config);
          } catch (k) {
            return void this.destroy(p(k, "ERR_PC_CONSTRUCTOR"));
          }
          this._isReactNativeWebrtc = typeof this._pc._peerConnectionId == "number", this._pc.oniceconnectionstatechange = () => {
            this._onIceStateChange();
          }, this._pc.onicegatheringstatechange = () => {
            this._onIceStateChange();
          }, this._pc.onconnectionstatechange = () => {
            this._onConnectionStateChange();
          }, this._pc.onsignalingstatechange = () => {
            this._onSignalingStateChange();
          }, this._pc.onicecandidate = (k) => {
            this._onIceCandidate(k);
          }, typeof this._pc.peerIdentity == "object" && this._pc.peerIdentity.catch((k) => {
            this.destroy(p(k, "ERR_PC_PEER_IDENTITY"));
          }), this.initiator || this.channelNegotiated ? this._setupData({ channel: this._pc.createDataChannel(this.channelName, this.channelConfig) }) : this._pc.ondatachannel = (k) => {
            this._setupData(k);
          }, this.streams && this.streams.forEach((k) => {
            this.addStream(k);
          }), this._pc.ontrack = (k) => {
            this._onTrack(k);
          }, this._debug("initial negotiation"), this._needsNegotiation(), this._onFinishBound = () => {
            this._onFinish();
          }, this.once("finish", this._onFinishBound);
        }
        get bufferSize() {
          return this._channel && this._channel.bufferedAmount || 0;
        }
        get connected() {
          return this._connected && this._channel.readyState === "open";
        }
        address() {
          return { port: this.localPort, family: this.localFamily, address: this.localAddress };
        }
        signal(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot signal after peer is destroyed"), "ERR_DESTROYED");
            if (typeof v == "string")
              try {
                v = JSON.parse(v);
              } catch {
                v = {};
              }
            this._debug("signal()"), v.renegotiate && this.initiator && (this._debug("got request to renegotiate"), this._needsNegotiation()), v.transceiverRequest && this.initiator && (this._debug("got request for transceiver"), this.addTransceiver(v.transceiverRequest.kind, v.transceiverRequest.init)), v.candidate && (this._pc.remoteDescription && this._pc.remoteDescription.type ? this._addIceCandidate(v.candidate) : this._pendingCandidates.push(v.candidate)), v.sdp && this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(v)).then(() => {
              this.destroyed || (this._pendingCandidates.forEach((k) => {
                this._addIceCandidate(k);
              }), this._pendingCandidates = [], this._pc.remoteDescription.type === "offer" && this._createAnswer());
            }).catch((k) => {
              this.destroy(p(k, "ERR_SET_REMOTE_DESCRIPTION"));
            }), v.sdp || v.candidate || v.renegotiate || v.transceiverRequest || this.destroy(p(new Error("signal() called with invalid signal data"), "ERR_SIGNALING"));
          }
        }
        _addIceCandidate(v) {
          const k = new this._wrtc.RTCIceCandidate(v);
          this._pc.addIceCandidate(k).catch((S) => {
            !k.address || k.address.endsWith(".local") ? a("Ignoring unsupported ICE candidate.") : this.destroy(p(S, "ERR_ADD_ICE_CANDIDATE"));
          });
        }
        send(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot send after peer is destroyed"), "ERR_DESTROYED");
            this._channel.send(v);
          }
        }
        addTransceiver(v, k) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot addTransceiver after peer is destroyed"), "ERR_DESTROYED");
            if (this._debug("addTransceiver()"), this.initiator)
              try {
                this._pc.addTransceiver(v, k), this._needsNegotiation();
              } catch (S) {
                this.destroy(p(S, "ERR_ADD_TRANSCEIVER"));
              }
            else
              this.emit("signal", { type: "transceiverRequest", transceiverRequest: { kind: v, init: k } });
          }
        }
        addStream(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot addStream after peer is destroyed"), "ERR_DESTROYED");
            this._debug("addStream()"), v.getTracks().forEach((k) => {
              this.addTrack(k, v);
            });
          }
        }
        addTrack(v, k) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot addTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("addTrack()");
          const S = this._senderMap.get(v) || /* @__PURE__ */ new Map();
          let O = S.get(k);
          if (!O)
            O = this._pc.addTrack(v, k), S.set(k, O), this._senderMap.set(v, S), this._needsNegotiation();
          else
            throw O.removed ? p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."), "ERR_SENDER_REMOVED") : p(new Error("Track has already been added to that stream."), "ERR_SENDER_ALREADY_ADDED");
        }
        replaceTrack(v, k, S) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot replaceTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("replaceTrack()");
          const O = this._senderMap.get(v), w = O ? O.get(S) : null;
          if (!w)
            throw p(new Error("Cannot replace track that was never added."), "ERR_TRACK_NOT_ADDED");
          k && this._senderMap.set(k, O), w.replaceTrack == null ? this.destroy(p(new Error("replaceTrack is not supported in this browser"), "ERR_UNSUPPORTED_REPLACETRACK")) : w.replaceTrack(k);
        }
        removeTrack(v, k) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot removeTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("removeSender()");
          const S = this._senderMap.get(v), O = S ? S.get(k) : null;
          if (!O)
            throw p(new Error("Cannot remove track that was never added."), "ERR_TRACK_NOT_ADDED");
          try {
            O.removed = !0, this._pc.removeTrack(O);
          } catch (w) {
            w.name === "NS_ERROR_UNEXPECTED" ? this._sendersAwaitingStable.push(O) : this.destroy(p(w, "ERR_REMOVE_TRACK"));
          }
          this._needsNegotiation();
        }
        removeStream(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot removeStream after peer is destroyed"), "ERR_DESTROYED");
            this._debug("removeSenders()"), v.getTracks().forEach((k) => {
              this.removeTrack(k, v);
            });
          }
        }
        _needsNegotiation() {
          this._debug("_needsNegotiation"), this._batchedNegotiation || (this._batchedNegotiation = !0, d(() => {
            this._batchedNegotiation = !1, this.initiator || !this._firstNegotiation ? (this._debug("starting batched negotiation"), this.negotiate()) : this._debug("non-initiator initial negotiation request discarded"), this._firstNegotiation = !1;
          }));
        }
        negotiate() {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot negotiate after peer is destroyed"), "ERR_DESTROYED");
            this.initiator ? this._isNegotiating ? (this._queuedNegotiation = !0, this._debug("already negotiating, queueing")) : (this._debug("start negotiation"), setTimeout(() => {
              this._createOffer();
            }, 0)) : this._isNegotiating ? (this._queuedNegotiation = !0, this._debug("already negotiating, queueing")) : (this._debug("requesting negotiation from initiator"), this.emit("signal", { type: "renegotiate", renegotiate: !0 })), this._isNegotiating = !0;
          }
        }
        destroy(v) {
          this._destroy(v, () => {
          });
        }
        _destroy(v, k) {
          this.destroyed || this.destroying || (this.destroying = !0, this._debug("destroying (error: %s)", v && (v.message || v)), d(() => {
            if (this.destroyed = !0, this.destroying = !1, this._debug("destroy (error: %s)", v && (v.message || v)), this.readable = this.writable = !1, this._readableState.ended || this.push(null), this._writableState.finished || this.end(), this._connected = !1, this._pcReady = !1, this._channelReady = !1, this._remoteTracks = null, this._remoteStreams = null, this._senderMap = null, clearInterval(this._closingInterval), this._closingInterval = null, clearInterval(this._interval), this._interval = null, this._chunk = null, this._cb = null, this._onFinishBound && this.removeListener("finish", this._onFinishBound), this._onFinishBound = null, this._channel) {
              try {
                this._channel.close();
              } catch {
              }
              this._channel.onmessage = null, this._channel.onopen = null, this._channel.onclose = null, this._channel.onerror = null;
            }
            if (this._pc) {
              try {
                this._pc.close();
              } catch {
              }
              this._pc.oniceconnectionstatechange = null, this._pc.onicegatheringstatechange = null, this._pc.onsignalingstatechange = null, this._pc.onicecandidate = null, this._pc.ontrack = null, this._pc.ondatachannel = null;
            }
            this._pc = null, this._channel = null, v && this.emit("error", v), this.emit("close"), k();
          }));
        }
        _setupData(v) {
          if (!v.channel)
            return this.destroy(p(new Error("Data channel event is missing `channel` property"), "ERR_DATA_CHANNEL"));
          this._channel = v.channel, this._channel.binaryType = "arraybuffer", typeof this._channel.bufferedAmountLowThreshold == "number" && (this._channel.bufferedAmountLowThreshold = _), this.channelName = this._channel.label, this._channel.onmessage = (S) => {
            this._onChannelMessage(S);
          }, this._channel.onbufferedamountlow = () => {
            this._onChannelBufferedAmountLow();
          }, this._channel.onopen = () => {
            this._onChannelOpen();
          }, this._channel.onclose = () => {
            this._onChannelClose();
          }, this._channel.onerror = (S) => {
            const O = S.error instanceof Error ? S.error : new Error(`Datachannel error: ${S.message} ${S.filename}:${S.lineno}:${S.colno}`);
            this.destroy(p(O, "ERR_DATA_CHANNEL"));
          };
          let k = !1;
          this._closingInterval = setInterval(() => {
            this._channel && this._channel.readyState === "closing" ? (k && this._onChannelClose(), k = !0) : k = !1;
          }, 5e3);
        }
        _read() {
        }
        _write(v, k, S) {
          if (this.destroyed)
            return S(p(new Error("cannot write after peer is destroyed"), "ERR_DATA_CHANNEL"));
          if (this._connected) {
            try {
              this.send(v);
            } catch (O) {
              return this.destroy(p(O, "ERR_DATA_CHANNEL"));
            }
            this._channel.bufferedAmount > _ ? (this._debug("start backpressure: bufferedAmount %d", this._channel.bufferedAmount), this._cb = S) : S(null);
          } else
            this._debug("write before connect"), this._chunk = v, this._cb = S;
        }
        _onFinish() {
          if (!this.destroyed) {
            const v = () => {
              setTimeout(() => this.destroy(), 1e3);
            };
            this._connected ? v() : this.once("connect", v);
          }
        }
        _startIceCompleteTimeout() {
          this.destroyed || this._iceCompleteTimer || (this._debug("started iceComplete timeout"), this._iceCompleteTimer = setTimeout(() => {
            this._iceComplete || (this._iceComplete = !0, this._debug("iceComplete timeout completed"), this.emit("iceTimeout"), this.emit("_iceComplete"));
          }, this.iceCompleteTimeout));
        }
        _createOffer() {
          this.destroyed || this._pc.createOffer(this.offerOptions).then((v) => {
            if (this.destroyed)
              return;
            this.trickle || this.allowHalfTrickle || (v.sdp = l(v.sdp)), v.sdp = this.sdpTransform(v.sdp);
            const k = () => {
              if (!this.destroyed) {
                const S = this._pc.localDescription || v;
                this._debug("signal"), this.emit("signal", { type: S.type, sdp: S.sdp });
              }
            };
            this._pc.setLocalDescription(v).then(() => {
              this._debug("createOffer success"), this.destroyed || (this.trickle || this._iceComplete ? k() : this.once("_iceComplete", k));
            }).catch((S) => {
              this.destroy(p(S, "ERR_SET_LOCAL_DESCRIPTION"));
            });
          }).catch((v) => {
            this.destroy(p(v, "ERR_CREATE_OFFER"));
          });
        }
        _requestMissingTransceivers() {
          this._pc.getTransceivers && this._pc.getTransceivers().forEach((v) => {
            v.mid || !v.sender.track || v.requested || (v.requested = !0, this.addTransceiver(v.sender.track.kind));
          });
        }
        _createAnswer() {
          this.destroyed || this._pc.createAnswer(this.answerOptions).then((v) => {
            if (this.destroyed)
              return;
            this.trickle || this.allowHalfTrickle || (v.sdp = l(v.sdp)), v.sdp = this.sdpTransform(v.sdp);
            const k = () => {
              if (!this.destroyed) {
                const S = this._pc.localDescription || v;
                this._debug("signal"), this.emit("signal", { type: S.type, sdp: S.sdp }), this.initiator || this._requestMissingTransceivers();
              }
            };
            this._pc.setLocalDescription(v).then(() => {
              this.destroyed || (this.trickle || this._iceComplete ? k() : this.once("_iceComplete", k));
            }).catch((S) => {
              this.destroy(p(S, "ERR_SET_LOCAL_DESCRIPTION"));
            });
          }).catch((v) => {
            this.destroy(p(v, "ERR_CREATE_ANSWER"));
          });
        }
        _onConnectionStateChange() {
          this.destroyed || this._pc.connectionState === "failed" && this.destroy(p(new Error("Connection failed."), "ERR_CONNECTION_FAILURE"));
        }
        _onIceStateChange() {
          if (this.destroyed)
            return;
          const v = this._pc.iceConnectionState, k = this._pc.iceGatheringState;
          this._debug("iceStateChange (connection: %s) (gathering: %s)", v, k), this.emit("iceStateChange", v, k), (v === "connected" || v === "completed") && (this._pcReady = !0, this._maybeReady()), v === "failed" && this.destroy(p(new Error("Ice connection failed."), "ERR_ICE_CONNECTION_FAILURE")), v === "closed" && this.destroy(p(new Error("Ice connection closed."), "ERR_ICE_CONNECTION_CLOSED"));
        }
        getStats(v) {
          const k = (S) => (Object.prototype.toString.call(S.values) === "[object Array]" && S.values.forEach((O) => {
            Object.assign(S, O);
          }), S);
          this._pc.getStats.length === 0 || this._isReactNativeWebrtc ? this._pc.getStats().then((S) => {
            const O = [];
            S.forEach((w) => {
              O.push(k(w));
            }), v(null, O);
          }, (S) => v(S)) : 0 < this._pc.getStats.length ? this._pc.getStats((S) => {
            if (this.destroyed)
              return;
            const O = [];
            S.result().forEach((w) => {
              const A = {};
              w.names().forEach((D) => {
                A[D] = w.stat(D);
              }), A.id = w.id, A.type = w.type, A.timestamp = w.timestamp, O.push(k(A));
            }), v(null, O);
          }, (S) => v(S)) : v(null, []);
        }
        _maybeReady() {
          if (this._debug("maybeReady pc %s channel %s", this._pcReady, this._channelReady), this._connected || this._connecting || !this._pcReady || !this._channelReady)
            return;
          this._connecting = !0;
          const v = () => {
            this.destroyed || this.getStats((k, S) => {
              if (this.destroyed)
                return;
              k && (S = []);
              const O = {}, w = {}, A = {};
              let D = !1;
              S.forEach((M) => {
                (M.type === "remotecandidate" || M.type === "remote-candidate") && (O[M.id] = M), (M.type === "localcandidate" || M.type === "local-candidate") && (w[M.id] = M), (M.type === "candidatepair" || M.type === "candidate-pair") && (A[M.id] = M);
              });
              const R = (M) => {
                D = !0;
                let H = w[M.localCandidateId];
                H && (H.ip || H.address) ? (this.localAddress = H.ip || H.address, this.localPort = +H.port) : H && H.ipAddress ? (this.localAddress = H.ipAddress, this.localPort = +H.portNumber) : typeof M.googLocalAddress == "string" && (H = M.googLocalAddress.split(":"), this.localAddress = H[0], this.localPort = +H[1]), this.localAddress && (this.localFamily = this.localAddress.includes(":") ? "IPv6" : "IPv4");
                let J = O[M.remoteCandidateId];
                J && (J.ip || J.address) ? (this.remoteAddress = J.ip || J.address, this.remotePort = +J.port) : J && J.ipAddress ? (this.remoteAddress = J.ipAddress, this.remotePort = +J.portNumber) : typeof M.googRemoteAddress == "string" && (J = M.googRemoteAddress.split(":"), this.remoteAddress = J[0], this.remotePort = +J[1]), this.remoteAddress && (this.remoteFamily = this.remoteAddress.includes(":") ? "IPv6" : "IPv4"), this._debug("connect local: %s:%s remote: %s:%s", this.localAddress, this.localPort, this.remoteAddress, this.remotePort);
              };
              if (S.forEach((M) => {
                M.type === "transport" && M.selectedCandidatePairId && R(A[M.selectedCandidatePairId]), (M.type === "googCandidatePair" && M.googActiveConnection === "true" || (M.type === "candidatepair" || M.type === "candidate-pair") && M.selected) && R(M);
              }), !D && (!Object.keys(A).length || Object.keys(w).length))
                return void setTimeout(v, 100);
              if (this._connecting = !1, this._connected = !0, this._chunk) {
                try {
                  this.send(this._chunk);
                } catch (H) {
                  return this.destroy(p(H, "ERR_DATA_CHANNEL"));
                }
                this._chunk = null, this._debug('sent chunk from "write before connect"');
                const M = this._cb;
                this._cb = null, M(null);
              }
              typeof this._channel.bufferedAmountLowThreshold != "number" && (this._interval = setInterval(() => this._onInterval(), 150), this._interval.unref && this._interval.unref()), this._debug("connect"), this.emit("connect");
            });
          };
          v();
        }
        _onInterval() {
          this._cb && this._channel && !(this._channel.bufferedAmount > _) && this._onChannelBufferedAmountLow();
        }
        _onSignalingStateChange() {
          this.destroyed || (this._pc.signalingState === "stable" && (this._isNegotiating = !1, this._debug("flushing sender queue", this._sendersAwaitingStable), this._sendersAwaitingStable.forEach((v) => {
            this._pc.removeTrack(v), this._queuedNegotiation = !0;
          }), this._sendersAwaitingStable = [], this._queuedNegotiation ? (this._debug("flushing negotiation queue"), this._queuedNegotiation = !1, this._needsNegotiation()) : (this._debug("negotiated"), this.emit("negotiated"))), this._debug("signalingStateChange %s", this._pc.signalingState), this.emit("signalingStateChange", this._pc.signalingState));
        }
        _onIceCandidate(v) {
          this.destroyed || (v.candidate && this.trickle ? this.emit("signal", { type: "candidate", candidate: { candidate: v.candidate.candidate, sdpMLineIndex: v.candidate.sdpMLineIndex, sdpMid: v.candidate.sdpMid } }) : !v.candidate && !this._iceComplete && (this._iceComplete = !0, this.emit("_iceComplete")), v.candidate && this._startIceCompleteTimeout());
        }
        _onChannelMessage(v) {
          if (this.destroyed)
            return;
          let k = v.data;
          k instanceof ArrayBuffer && (k = g.from(k)), this.push(k);
        }
        _onChannelBufferedAmountLow() {
          if (!this.destroyed && this._cb) {
            this._debug("ending backpressure: bufferedAmount %d", this._channel.bufferedAmount);
            const v = this._cb;
            this._cb = null, v(null);
          }
        }
        _onChannelOpen() {
          this._connected || this.destroyed || (this._debug("on channel open"), this._channelReady = !0, this._maybeReady());
        }
        _onChannelClose() {
          this.destroyed || (this._debug("on channel close"), this.destroy());
        }
        _onTrack(v) {
          this.destroyed || v.streams.forEach((k) => {
            this._debug("on track"), this.emit("track", v.track, k), this._remoteTracks.push({ track: v.track, stream: k }), this._remoteStreams.some((S) => S.id === k.id) || (this._remoteStreams.push(k), d(() => {
              this._debug("on stream"), this.emit("stream", k);
            }));
          });
        }
        _debug() {
          const v = [].slice.call(arguments);
          v[0] = "[" + this._id + "] " + v[0], c.apply(null, v);
        }
      }
      m.WEBRTC_SUPPORT = !!u(), m.config = { iceServers: [{ urls: ["stun:stun.l.google.com:19302", "stun:global.stun.twilio.com:3478"] }], sdpSemantics: "unified-plan" }, m.channelConfig = {}, o.exports = m;
    }, { buffer: 3, debug: 4, "err-code": 6, "get-browser-rtc": 8, "queue-microtask": 13, randombytes: 14, "readable-stream": 29 }] }, {}, [])("/");
  });
})(WO);
const Wse = WO.exports, D_ = 0, N_ = 1, qO = 2, JO = (t, e) => {
  ct(t, D_);
  const n = yre(e);
  Dn(t, n);
}, KO = (t, e, n) => {
  ct(t, N_), Dn(t, gre(e, n));
}, qse = (t, e, n) => KO(e, n, ui(t)), GO = (t, e, n) => {
  try {
    hre(e, ui(t), n);
  } catch (i) {
    console.error("Caught error while handling a Yjs update", i);
  }
}, Jse = (t, e) => {
  ct(t, qO), Dn(t, e);
}, Kse = GO, Gse = (t, e, n, i) => {
  const r = Ct(t);
  switch (r) {
    case D_:
      qse(t, e, n);
      break;
    case N_:
      GO(t, n, i);
      break;
    case qO:
      Kse(t, n, i);
      break;
    default:
      throw new Error("Unknown message type");
  }
  return r;
}, Em = 3e4;
class Yse extends ng {
  constructor(e) {
    super(), this.doc = e, this.clientID = e.clientID, this.states = /* @__PURE__ */ new Map(), this.meta = /* @__PURE__ */ new Map(), this._checkInterval = setInterval(() => {
      const n = to();
      this.getLocalState() !== null && Em / 2 <= n - this.meta.get(this.clientID).lastUpdated && this.setLocalState(this.getLocalState());
      const i = [];
      this.meta.forEach((r, s) => {
        s !== this.clientID && Em <= n - r.lastUpdated && this.states.has(s) && i.push(s);
      }), i.length > 0 && w0(this, i, "timeout");
    }, Os(Em / 10)), e.on("destroy", () => {
      this.destroy();
    }), this.setLocalState({});
  }
  destroy() {
    this.emit("destroy", [this]), this.setLocalState(null), super.destroy(), clearInterval(this._checkInterval);
  }
  getLocalState() {
    return this.states.get(this.clientID) || null;
  }
  setLocalState(e) {
    const n = this.clientID, i = this.meta.get(n), r = i === void 0 ? 0 : i.clock + 1, s = this.states.get(n);
    e === null ? this.states.delete(n) : this.states.set(n, e), this.meta.set(n, {
      clock: r,
      lastUpdated: to()
    });
    const o = [], l = [], a = [], c = [];
    e === null ? c.push(n) : s == null ? e != null && o.push(n) : (l.push(n), qc(s, e) || a.push(n)), (o.length > 0 || a.length > 0 || c.length > 0) && this.emit("change", [{ added: o, updated: a, removed: c }, "local"]), this.emit("update", [{ added: o, updated: l, removed: c }, "local"]);
  }
  setLocalStateField(e, n) {
    const i = this.getLocalState();
    i !== null && this.setLocalState({
      ...i,
      [e]: n
    });
  }
  getStates() {
    return this.states;
  }
}
const w0 = (t, e, n) => {
  const i = [];
  for (let r = 0; r < e.length; r++) {
    const s = e[r];
    if (t.states.has(s)) {
      if (t.states.delete(s), s === t.clientID) {
        const o = t.meta.get(s);
        t.meta.set(s, {
          clock: o.clock + 1,
          lastUpdated: to()
        });
      }
      i.push(s);
    }
  }
  i.length > 0 && (t.emit("change", [{ added: [], updated: [], removed: i }, n]), t.emit("update", [{ added: [], updated: [], removed: i }, n]));
}, ep = (t, e, n = t.states) => {
  const i = e.length, r = fi();
  ct(r, i);
  for (let s = 0; s < i; s++) {
    const o = e[s], l = n.get(o) || null, a = t.meta.get(o).clock;
    ct(r, o), ct(r, a), _s(r, JSON.stringify(l));
  }
  return kn(r);
}, Xse = (t, e, n) => {
  const i = js(e), r = to(), s = [], o = [], l = [], a = [], c = Ct(i);
  for (let u = 0; u < c; u++) {
    const f = Ct(i);
    let h = Ct(i);
    const d = JSON.parse(Ks(i)), p = t.meta.get(f), g = t.states.get(f), _ = p === void 0 ? 0 : p.clock;
    (_ < h || _ === h && d === null && t.states.has(f)) && (d === null ? f === t.clientID && t.getLocalState() != null ? h++ : t.states.delete(f) : t.states.set(f, d), t.meta.set(f, {
      clock: h,
      lastUpdated: r
    }), p === void 0 && d !== null ? s.push(f) : p !== void 0 && d === null ? a.push(f) : d !== null && (qc(d, g) || l.push(f), o.push(f)));
  }
  (s.length > 0 || l.length > 0 || a.length > 0) && t.emit("change", [{
    added: s,
    updated: l,
    removed: a
  }, n]), (s.length > 0 || o.length > 0 || a.length > 0) && t.emit("update", [{
    added: s,
    updated: o,
    removed: a
  }, n]);
}, Qse = (t, e) => {
  const n = c0(t).buffer, i = c0(e).buffer;
  return crypto.subtle.importKey(
    "raw",
    n,
    "PBKDF2",
    !1,
    ["deriveKey"]
  ).then(
    (r) => crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: i,
        iterations: 1e5,
        hash: "SHA-256"
      },
      r,
      {
        name: "AES-GCM",
        length: 256
      },
      !0,
      ["encrypt", "decrypt"]
    )
  );
}, YO = (t, e) => {
  if (!e)
    return g_(t);
  const n = crypto.getRandomValues(new Uint8Array(12));
  return crypto.subtle.encrypt(
    {
      name: "AES-GCM",
      iv: n
    },
    e,
    t
  ).then((i) => {
    const r = fi();
    return _s(r, "AES-GCM"), Dn(r, n), Dn(r, new Uint8Array(i)), kn(r);
  });
}, Zse = (t, e) => {
  const n = fi();
  return Xa(n, t), YO(kn(n), e);
}, XO = (t, e) => {
  if (!e)
    return g_(t);
  const n = js(t);
  Ks(n) !== "AES-GCM" && Jie(nl("Unknown encryption algorithm"));
  const r = ui(n), s = ui(n);
  return crypto.subtle.decrypt(
    {
      name: "AES-GCM",
      iv: r
    },
    e,
    s
  ).then((o) => new Uint8Array(o));
}, $se = (t, e) => XO(t, e).then(
  (n) => Ya(js(new Uint8Array(n)))
), Br = tre("y-webrtc"), Ca = 0, QO = 3, ju = 1, L_ = 4, tp = /* @__PURE__ */ new Map(), Sl = /* @__PURE__ */ new Map(), ZO = (t) => {
  let e = !0;
  t.webrtcConns.forEach((n) => {
    n.synced || (e = !1);
  }), (!e && t.synced || e && !t.synced) && (t.synced = e, t.provider.emit("synced", [{ synced: e }]), Br("synced ", nr, t.name, qo, " with all peers"));
}, $O = (t, e, n) => {
  const i = js(e), r = fi(), s = Ct(i);
  if (t === void 0)
    return null;
  const o = t.awareness, l = t.doc;
  let a = !1;
  switch (s) {
    case Ca: {
      ct(r, Ca);
      const c = Gse(i, r, l, t);
      c === N_ && !t.synced && n(), c === D_ && (a = !0);
      break;
    }
    case QO:
      ct(r, ju), Dn(r, ep(o, Array.from(o.getStates().keys()))), a = !0;
      break;
    case ju:
      Xse(o, ui(i), t);
      break;
    case L_: {
      const c = jl(i) === 1, u = Ks(i);
      if (u !== t.peerId && (t.bcConns.has(u) && !c || !t.bcConns.has(u) && c)) {
        const f = [], h = [];
        c ? (t.bcConns.add(u), h.push(u)) : (t.bcConns.delete(u), f.push(u)), t.provider.emit("peers", [{
          added: h,
          removed: f,
          webrtcPeers: Array.from(t.webrtcConns.keys()),
          bcPeers: Array.from(t.bcConns)
        }]), eT(t);
      }
      break;
    }
    default:
      return console.error("Unable to compute message"), r;
  }
  return a ? r : null;
}, eoe = (t, e) => {
  const n = t.room;
  return Br("received message from ", nr, t.remotePeerId, og, " (", n.name, ")", qo, sf), $O(n, e, () => {
    t.synced = !0, Br("synced ", nr, n.name, qo, " with ", nr, t.remotePeerId), ZO(n);
  });
}, Am = (t, e) => {
  Br("send message to ", nr, t.remotePeerId, qo, og, " (", t.room.name, ")", sf);
  try {
    t.peer.send(kn(e));
  } catch {
  }
}, toe = (t, e) => {
  Br("broadcast message in ", nr, t.name, qo), t.webrtcConns.forEach((n) => {
    try {
      n.peer.send(e);
    } catch {
    }
  });
};
class $3 {
  constructor(e, n, i, r) {
    Br("establishing connection to ", nr, i), this.room = r, this.remotePeerId = i, this.closed = !1, this.connected = !1, this.synced = !1, this.peer = new Wse({ initiator: n, ...r.provider.peerOpts }), this.peer.on("signal", (s) => {
      j_(e, r, { to: i, from: r.peerId, type: "signal", signal: s });
    }), this.peer.on("connect", () => {
      Br("connected to ", nr, i), this.connected = !0;
      const o = r.provider.doc, l = r.awareness, a = fi();
      ct(a, Ca), JO(a, o), Am(this, a);
      const c = l.getStates();
      if (c.size > 0) {
        const u = fi();
        ct(u, ju), Dn(u, ep(l, Array.from(c.keys()))), Am(this, u);
      }
    }), this.peer.on("close", () => {
      this.connected = !1, this.closed = !0, r.webrtcConns.has(this.remotePeerId) && (r.webrtcConns.delete(this.remotePeerId), r.provider.emit("peers", [{
        removed: [this.remotePeerId],
        added: [],
        webrtcPeers: Array.from(r.webrtcConns.keys()),
        bcPeers: Array.from(r.bcConns)
      }])), ZO(r), this.peer.destroy(), Br("closed connection to ", nr, i), v0(r);
    }), this.peer.on("error", (s) => {
      Br("Error in connection to ", nr, i, ": ", s), v0(r);
    }), this.peer.on("data", (s) => {
      const o = eoe(this, s);
      o !== null && Am(this, o);
    });
  }
  destroy() {
    this.peer.destroy();
  }
}
const _o = (t, e) => YO(e, t.key).then(
  (n) => t.mux(
    () => Use(t.name, n)
  )
), e4 = (t, e) => {
  t.bcconnected && _o(t, e), toe(t, e);
}, v0 = (t) => {
  tp.forEach((e) => {
    e.connected && (e.send({ type: "subscribe", topics: [t.name] }), t.webrtcConns.size < t.provider.maxConns && j_(e, t, { type: "announce", from: t.peerId }));
  });
}, eT = (t) => {
  if (t.provider.filterBcConns) {
    const e = fi();
    ct(e, L_), Pu(e, 1), _s(e, t.peerId), _o(t, kn(e));
  }
};
class noe {
  constructor(e, n, i, r) {
    this.peerId = rO(), this.doc = e, this.awareness = n.awareness, this.provider = n, this.synced = !1, this.name = i, this.key = r, this.webrtcConns = /* @__PURE__ */ new Map(), this.bcConns = /* @__PURE__ */ new Set(), this.mux = Hse(), this.bcconnected = !1, this._bcSubscriber = (s) => XO(new Uint8Array(s), r).then(
      (o) => this.mux(() => {
        const l = $O(this, o, () => {
        });
        l && _o(this, kn(l));
      })
    ), this._docUpdateHandler = (s, o) => {
      const l = fi();
      ct(l, Ca), Jse(l, s), e4(this, kn(l));
    }, this._awarenessUpdateHandler = ({ added: s, updated: o, removed: l }, a) => {
      const c = s.concat(o).concat(l), u = fi();
      ct(u, ju), Dn(u, ep(this.awareness, c)), e4(this, kn(u));
    }, this._beforeUnloadHandler = () => {
      w0(this.awareness, [e.clientID], "window unload"), Sl.forEach((s) => {
        s.disconnect();
      });
    }, typeof window < "u" ? window.addEventListener("beforeunload", this._beforeUnloadHandler) : typeof process < "u" && process.on("exit", this._beforeUnloadHandler);
  }
  connect() {
    this.doc.on("update", this._docUpdateHandler), this.awareness.on("update", this._awarenessUpdateHandler), v0(this);
    const e = this.name;
    zse(e, this._bcSubscriber), this.bcconnected = !0, eT(this);
    const n = fi();
    ct(n, Ca), JO(n, this.doc), _o(this, kn(n));
    const i = fi();
    ct(i, Ca), KO(i, this.doc), _o(this, kn(i));
    const r = fi();
    ct(r, QO), _o(this, kn(r));
    const s = fi();
    ct(s, ju), Dn(s, ep(this.awareness, [this.doc.clientID])), _o(this, kn(s));
  }
  disconnect() {
    tp.forEach((n) => {
      n.connected && n.send({ type: "unsubscribe", topics: [this.name] });
    }), w0(this.awareness, [this.doc.clientID], "disconnect");
    const e = fi();
    ct(e, L_), Pu(e, 0), _s(e, this.peerId), _o(this, kn(e)), Vse(this.name, this._bcSubscriber), this.bcconnected = !1, this.doc.off("update", this._docUpdateHandler), this.awareness.off("update", this._awarenessUpdateHandler), this.webrtcConns.forEach((n) => n.destroy());
  }
  destroy() {
    this.disconnect(), typeof window < "u" ? window.removeEventListener("beforeunload", this._beforeUnloadHandler) : typeof process < "u" && process.off("exit", this._beforeUnloadHandler);
  }
}
const ioe = (t, e, n, i) => {
  if (Sl.has(n))
    throw nl(`A Yjs Doc connected to room "${n}" already exists!`);
  const r = new noe(t, e, n, i);
  return Sl.set(n, r), r;
}, j_ = (t, e, n) => {
  e.key ? Zse(n, e.key).then((i) => {
    t.send({ type: "publish", topic: e.name, data: tO(i) });
  }) : t.send({ type: "publish", topic: e.name, data: n });
};
class roe extends Bse {
  constructor(e) {
    super(e), this.providers = /* @__PURE__ */ new Set(), this.on("connect", () => {
      Br(`connected (${e})`);
      const n = Array.from(Sl.keys());
      this.send({ type: "subscribe", topics: n }), Sl.forEach(
        (i) => j_(this, i, { type: "announce", from: i.peerId })
      );
    }), this.on("message", (n) => {
      switch (n.type) {
        case "publish": {
          const i = n.topic, r = Sl.get(i);
          if (r == null || typeof i != "string")
            return;
          const s = (o) => {
            const l = r.webrtcConns, a = r.peerId;
            if (o == null || o.from === a || o.to !== void 0 && o.to !== a || r.bcConns.has(o.from))
              return;
            const c = l.has(o.from) ? () => {
            } : () => r.provider.emit("peers", [{
              removed: [],
              added: [o.from],
              webrtcPeers: Array.from(r.webrtcConns.keys()),
              bcPeers: Array.from(r.bcConns)
            }]);
            switch (o.type) {
              case "announce":
                l.size < r.provider.maxConns && (Cr(l, o.from, () => new $3(this, !0, o.from, r)), c());
                break;
              case "signal":
                o.to === a && (Cr(l, o.from, () => new $3(this, !1, o.from, r)).peer.signal(o.signal), c());
                break;
            }
          };
          r.key ? typeof n.data == "string" && $se(nO(n.data), r.key).then(s) : s(n.data);
        }
      }
    }), this.on("disconnect", () => Br(`disconnect (${e})`));
  }
}
class soe extends ng {
  constructor(e, n, {
    signaling: i = ["wss://signaling.yjs.dev", "wss://y-webrtc-signaling-eu.herokuapp.com", "wss://y-webrtc-signaling-us.herokuapp.com"],
    password: r = null,
    awareness: s = new Yse(n),
    maxConns: o = 20 + Os(Wie() * 15),
    filterBcConns: l = !0,
    peerOpts: a = {}
  } = {}) {
    super(), this.roomName = e, this.doc = n, this.filterBcConns = l, this.awareness = s, this.shouldConnect = !1, this.signalingUrls = i, this.signalingConns = [], this.maxConns = o, this.peerOpts = a, this.key = r ? Qse(r, e) : g_(null), this.room = null, this.key.then((c) => {
      this.room = ioe(n, this, e, c), this.shouldConnect ? this.room.connect() : this.room.disconnect();
    }), this.connect(), this.destroy = this.destroy.bind(this), n.on("destroy", this.destroy);
  }
  get connected() {
    return this.room !== null && this.shouldConnect;
  }
  connect() {
    this.shouldConnect = !0, this.signalingUrls.forEach((e) => {
      const n = Cr(tp, e, () => new roe(e));
      this.signalingConns.push(n), n.providers.add(this);
    }), this.room && this.room.connect();
  }
  disconnect() {
    this.shouldConnect = !1, this.signalingConns.forEach((e) => {
      e.providers.delete(this), e.providers.size === 0 && (e.destroy(), tp.delete(e.url));
    }), this.room && this.room.disconnect();
  }
  destroy() {
    this.doc.off("destroy", this.destroy), this.key.then(() => {
      this.room.destroy(), Sl.delete(this.roomName);
    }), super.destroy();
  }
}
function ooe(t) {
  var e, n = new s_(function() {
    e && e(i);
  }), i = Ga(t, n), r = jF(i, function(s) {
    return e = s, function() {
      e = void 0;
    };
  });
  return {
    subscribe: r.subscribe,
    set: function() {
    }
  };
}
const loe = (t) => {
  const e = Nse({ users: {} }), n = ooe(e), i = Ise(e);
  return new soe(t, i), n;
};
const { window: aoe } = np;
function t4(t, e, n) {
  const i = t.slice();
  return i[82] = e[n], i;
}
function n4(t, e, n) {
  const i = t.slice();
  return i[85] = e[n], i;
}
function i4(t, e, n) {
  const i = t.slice();
  return i[88] = e[n], i;
}
function r4(t, e, n) {
  const i = t.slice();
  return i[91] = e[n], i;
}
function s4(t, e, n) {
  const i = t.slice();
  return i[94] = e[n], i;
}
function o4(t, e, n) {
  const i = t.slice();
  return i[97] = e[n], i;
}
function l4(t) {
  let e, n, i, r, s = [], o = /* @__PURE__ */ new Map(), l, a, c, u, f, h, d = t[17] && t[23](), p, g, _, m, C, v, k, S, O, w = t[0].mode && t[23]() && [
    "localhost",
    "grapherx.netlify.app",
    "foresight-org.github.io",
    "foresight.org"
  ].includes(window.location.hostname), A, D, R, M, H, J, I, z, L, K, F, N, te, ue = t[0].mode + "", q, re, ie, Z, Le, Ie, Fe, le, De, Ve, ye, fe, Ae, ae, $, de, he, W, y, T, B, X, G, ce, Ne, qe, mt, dt, je, vt, zt, Yt, Bn, Tt, Oe, si, Jt, Kt, ln, yn, Xn, en, oi, an, An, Di, Mn, ar, _e, Re, lt, be, at, st, Nt, Ft, kt, On, Qn, li = [], Ki = /* @__PURE__ */ new Map(), Zt, Gi, cr;
  r = new $T({
    props: { kind: t[3].theme.grid }
  });
  let bi = t[13];
  const ao = (Te) => Te[97].id;
  for (let Te = 0; Te < bi.length; Te += 1) {
    let Ue = o4(t, bi, Te), It = ao(Ue);
    o.set(It, s[Te] = a4(It, Ue));
  }
  let qn = t[16] && !t[16].edge && t[16].snap && c4(t), Tn = t[7] && f4(t), Rn = t[15] && d4(t), cn = t[4].length > 0 && p4(t), xn = d && g4(t), tn = t[3].jsonupload && y4(t), Pn = t[3].jsondownload && w4(), In = w && v4();
  function Ei(Te, Ue) {
    return Ue[0] & 1 && (Z = null), Z == null && (Z = !!(Te[0].mode && Te[23]())), Z ? goe : poe;
  }
  let gn = Ei(t, [-1, -1, -1, -1]), Ai = gn(t), ee = t[3].exportsvg && k4(), Me = t[3].exportcytoscape && C4(), He = t[3] && S4(t), $e = t[14];
  const ut = (Te) => Te[82][0];
  for (let Te = 0; Te < $e.length; Te += 1) {
    let Ue = t4(t, $e, Te), It = ut(Ue);
    Ki.set(It, li[Te] = M4(It, Ue));
  }
  return {
    c() {
      e = j("div"), n = bt("svg"), i = bt("g"), me(r.$$.fragment);
      for (let Te = 0; Te < s.length; Te += 1)
        s[Te].c();
      l = ot(), qn && qn.c(), a = ot(), Tn && Tn.c(), u = Q(), Rn && Rn.c(), f = Q(), cn && cn.c(), h = Q(), xn && xn.c(), p = Q(), g = j("section"), _ = j("sl-button-group"), m = j("sl-dropdown"), C = j("sl-button"), C.innerHTML = `Menu
					<sl-icon slot="prefix" name="list"></sl-icon>`, v = Q(), k = j("sl-menu"), tn && tn.c(), S = Q(), Pn && Pn.c(), O = Q(), In && In.c(), A = Q(), D = j("sl-divider"), R = Q(), M = j("sl-menu-label"), H = we("Your display name is: "), J = we(t[2]), I = Q(), z = j("sl-menu-item"), z.textContent = "Change display name...", L = Q(), K = j("sl-divider"), F = Q(), N = j("sl-menu-label"), te = we("Currently in "), q = we(ue), re = we(" mode..."), ie = Q(), Ai.c(), Le = Q(), Ie = j("sl-divider"), Fe = Q(), le = j("sl-menu-item"), De = we(`Undo (⌘-Z or ⌃Z)
						`), Ve = j("sl-icon"), fe = Q(), Ae = j("sl-menu-item"), ae = we(`Redo (⇧-⌘-Z or ⇧⌃Z)
						`), $ = j("sl-icon"), he = Q(), W = j("sl-menu-item"), y = we("Clear"), B = Q(), X = j("sl-divider"), G = Q(), ce = j("sl-menu-label"), ce.textContent = "Export as:", Ne = Q(), ee && ee.c(), qe = Q(), Me && Me.c(), mt = Q(), dt = j("sl-divider"), je = Q(), vt = j("sl-menu-label"), vt.textContent = "Switch Theme To", zt = Q(), Yt = j("sl-menu-item"), Bn = we("Classic"), si = Q(), Jt = j("sl-menu-item"), Kt = we("Elegant"), Xn = Q(), en = j("sl-menu-item"), oi = we("Foresight"), Di = Q(), Mn = j("sl-menu-item"), ar = we("Minimal"), lt = Q(), be = j("sl-divider"), at = Q(), st = j("sl-menu-item"), st.textContent = "About...", Nt = Q(), Ft = j("sl-menu-item"), Ft.textContent = "Help...", kt = Q(), He && He.c(), On = Q(), Qn = j("sl-select");
      for (let Te = 0; Te < li.length; Te += 1)
        li[Te].c();
      b(n, "tabindex", "0"), b(n, "xmlns", "http://www.w3.org/2000/svg"), b(n, "viewBox", "0 0 1000 1000"), b(n, "style", c = `background-color: ${t[3].theme.bgfill}`), b(n, "class", "svelte-1x2xcxd"), b(e, "class", "container svelte-1x2xcxd"), ne(C, "slot", "trigger"), ne(C, "caret", ""), ne(z, "value", "changedisplayname"), ne(Ve, "slot", "prefix"), ne(Ve, "name", "arrow-counterclockwise"), ne(le, "value", "undo"), ne(le, "disabled", ye = t[12].current <= 0), ne($, "slot", "prefix"), ne($, "name", "arrow-clockwise"), ne(Ae, "value", "redo"), ne(Ae, "disabled", de = t[12].versions[t[12].current + 1] === void 0), ne(W, "value", "clear"), ne(W, "disabled", T = t[3].items.length == 0), ne(Yt, "type", "checkbox"), ne(Yt, "value", "theme.classic"), ne(Yt, "checked", Tt = t[3].theme.name === "classic"), ne(Yt, "disabled", Oe = t[3].theme.name === "classic"), ne(Jt, "type", "checkbox"), ne(Jt, "value", "theme.elegant"), ne(Jt, "checked", ln = t[3].theme.name === "elegant"), ne(Jt, "disabled", yn = t[3].theme.name === "elegant"), ne(en, "type", "checkbox"), ne(en, "value", "theme.foresight"), ne(en, "checked", an = t[3].theme.name === "foresight"), ne(en, "disabled", An = t[3].theme.name === "foresight"), ne(Mn, "type", "checkbox"), ne(Mn, "value", "theme.minimal"), ne(Mn, "checked", _e = t[3].theme.name === "minimal"), ne(Mn, "disabled", Re = t[3].theme.name === "minimal"), ne(st, "value", "about"), ne(Ft, "value", "help"), ne(Qn, "placeholder", "Highlight by Tag"), ne(Qn, "clearable", ""), ne(Qn, "class", "svelte-1x2xcxd"), b(g, "class", "globalmenu svelte-1x2xcxd");
    },
    m(Te, Ue) {
      U(Te, e, Ue), E(e, n), E(n, i), pe(r, i, null);
      for (let It = 0; It < s.length; It += 1)
        s[It].m(i, null);
      E(i, l), qn && qn.m(i, null), E(i, a), Tn && Tn.m(i, null), t[53](i), t[54](n), E(e, u), Rn && Rn.m(e, null), E(e, f), cn && cn.m(e, null), E(e, h), xn && xn.m(e, null), U(Te, p, Ue), U(Te, g, Ue), E(g, _), E(_, m), E(m, C), E(m, v), E(m, k), tn && tn.m(k, null), E(k, S), Pn && Pn.m(k, null), E(k, O), In && In.m(k, null), E(k, A), E(k, D), E(k, R), E(k, M), E(M, H), E(M, J), E(k, I), E(k, z), E(k, L), E(k, K), E(k, F), E(k, N), E(N, te), E(N, q), E(N, re), E(k, ie), Ai.m(k, null), E(k, Le), E(k, Ie), E(k, Fe), E(k, le), E(le, De), E(le, Ve), E(k, fe), E(k, Ae), E(Ae, ae), E(Ae, $), E(k, he), E(k, W), E(W, y), E(k, B), E(k, X), E(k, G), E(k, ce), E(k, Ne), ee && ee.m(k, null), E(k, qe), Me && Me.m(k, null), E(k, mt), E(k, dt), E(k, je), E(k, vt), E(k, zt), E(k, Yt), E(Yt, Bn), E(k, si), E(k, Jt), E(Jt, Kt), E(k, Xn), E(k, en), E(en, oi), E(k, Di), E(k, Mn), E(Mn, ar), E(k, lt), E(k, be), E(k, at), E(k, st), E(k, Nt), E(k, Ft), E(_, kt), He && He.m(_, null), E(_, On), E(_, Qn);
      for (let It = 0; It < li.length; It += 1)
        li[It].m(Qn, null);
      Zt = !0, Gi || (cr = [
        se(n, "mousedown", t[42]),
        se(n, "mousemove", t[35]),
        se(n, "mouseup", t[41]),
        se(n, "contextmenu", sr(t[38])),
        se(n, "keydown", t[40]),
        se(m, "sl-select", t[47]),
        se(Qn, "sl-change", t[62])
      ], Gi = !0);
    },
    p(Te, Ue) {
      const It = {};
      Ue[0] & 8 && (It.kind = Te[3].theme.grid), r.$set(It), Ue[0] & 1610883096 | Ue[1] & 4359 && (bi = Te[13], Se(), s = Gs(s, Ue, ao, 1, Te, bi, o, i, ip, a4, l, o4), Ee()), Te[16] && !Te[16].edge && Te[16].snap ? qn ? qn.p(Te, Ue) : (qn = c4(Te), qn.c(), qn.m(i, a)) : qn && (qn.d(1), qn = null), Te[7] ? Tn ? Tn.p(Te, Ue) : (Tn = f4(Te), Tn.c(), Tn.m(i, null)) : Tn && (Tn.d(1), Tn = null), (!Zt || Ue[0] & 8 && c !== (c = `background-color: ${Te[3].theme.bgfill}`)) && b(n, "style", c), Te[15] ? Rn ? Rn.p(Te, Ue) : (Rn = d4(Te), Rn.c(), Rn.m(e, f)) : Rn && (Rn.d(1), Rn = null), Te[4].length > 0 ? cn ? (cn.p(Te, Ue), Ue[0] & 16 && P(cn, 1)) : (cn = p4(Te), cn.c(), P(cn, 1), cn.m(e, h)) : cn && (Se(), x(cn, 1, 1, () => {
        cn = null;
      }), Ee()), Ue[0] & 131072 && (d = Te[17] && Te[23]()), d ? xn ? xn.p(Te, Ue) : (xn = g4(Te), xn.c(), xn.m(e, null)) : xn && (xn.d(1), xn = null), Te[3].jsonupload ? tn ? tn.p(Te, Ue) : (tn = y4(Te), tn.c(), tn.m(k, S)) : tn && (tn.d(1), tn = null), Te[3].jsondownload ? Pn || (Pn = w4(), Pn.c(), Pn.m(k, O)) : Pn && (Pn.d(1), Pn = null), Ue[0] & 1 && (w = Te[0].mode && Te[23]() && [
        "localhost",
        "grapherx.netlify.app",
        "foresight-org.github.io",
        "foresight.org"
      ].includes(window.location.hostname)), w ? In || (In = v4(), In.c(), In.m(k, A)) : In && (In.d(1), In = null), (!Zt || Ue[0] & 4) && ze(J, Te[2]), (!Zt || Ue[0] & 1) && ue !== (ue = Te[0].mode + "") && ze(q, ue), gn !== (gn = Ei(Te, Ue)) && (Ai.d(1), Ai = gn(Te), Ai && (Ai.c(), Ai.m(k, Le))), (!Zt || Ue[0] & 4096 && ye !== (ye = Te[12].current <= 0)) && ne(le, "disabled", ye), (!Zt || Ue[0] & 4096 && de !== (de = Te[12].versions[Te[12].current + 1] === void 0)) && ne(Ae, "disabled", de), (!Zt || Ue[0] & 8 && T !== (T = Te[3].items.length == 0)) && ne(W, "disabled", T), Te[3].exportsvg ? ee || (ee = k4(), ee.c(), ee.m(k, qe)) : ee && (ee.d(1), ee = null), Te[3].exportcytoscape ? Me || (Me = C4(), Me.c(), Me.m(k, mt)) : Me && (Me.d(1), Me = null), (!Zt || Ue[0] & 8 && Tt !== (Tt = Te[3].theme.name === "classic")) && ne(Yt, "checked", Tt), (!Zt || Ue[0] & 8 && Oe !== (Oe = Te[3].theme.name === "classic")) && ne(Yt, "disabled", Oe), (!Zt || Ue[0] & 8 && ln !== (ln = Te[3].theme.name === "elegant")) && ne(Jt, "checked", ln), (!Zt || Ue[0] & 8 && yn !== (yn = Te[3].theme.name === "elegant")) && ne(Jt, "disabled", yn), (!Zt || Ue[0] & 8 && an !== (an = Te[3].theme.name === "foresight")) && ne(en, "checked", an), (!Zt || Ue[0] & 8 && An !== (An = Te[3].theme.name === "foresight")) && ne(en, "disabled", An), (!Zt || Ue[0] & 8 && _e !== (_e = Te[3].theme.name === "minimal")) && ne(Mn, "checked", _e), (!Zt || Ue[0] & 8 && Re !== (Re = Te[3].theme.name === "minimal")) && ne(Mn, "disabled", Re), Te[3] ? He ? He.p(Te, Ue) : (He = S4(Te), He.c(), He.m(_, On)) : He && (He.d(1), He = null), Ue[0] & 16384 && ($e = Te[14], li = Gs(li, Ue, ut, 1, Te, $e, Ki, Qn, Bu, M4, null, t4));
    },
    i(Te) {
      if (!Zt) {
        P(r.$$.fragment, Te);
        for (let Ue = 0; Ue < bi.length; Ue += 1)
          P(s[Ue]);
        P(cn), Zt = !0;
      }
    },
    o(Te) {
      x(r.$$.fragment, Te);
      for (let Ue = 0; Ue < s.length; Ue += 1)
        x(s[Ue]);
      x(cn), Zt = !1;
    },
    d(Te) {
      Te && V(e), ge(r);
      for (let Ue = 0; Ue < s.length; Ue += 1)
        s[Ue].d();
      qn && qn.d(), Tn && Tn.d(), t[53](null), t[54](null), Rn && Rn.d(), cn && cn.d(), xn && xn.d(), Te && V(p), Te && V(g), tn && tn.d(), Pn && Pn.d(), In && In.d(), Ai.d(), ee && ee.d(), Me && Me.d(), He && He.d();
      for (let Ue = 0; Ue < li.length; Ue += 1)
        li[Ue].d();
      Gi = !1, ht(cr);
    }
  };
}
function coe(t) {
  let e, n;
  return e = new nR({
    props: {
      item: t[97],
      theme: t[3].theme,
      isSelected: t[4].map(N4).includes(t[97].id)
    }
  }), e.$on("itemMouseDown", t[30]), e.$on("itemMouseUp", t[31]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 8192 && (s.item = i[97]), r[0] & 8 && (s.theme = i[3].theme), r[0] & 8208 && (s.isSelected = i[4].map(N4).includes(i[97].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function uoe(t) {
  let e, n;
  return e = new GT({
    props: {
      item: t[97],
      graph: t[3],
      isSelected: t[4].map(D4).includes(t[97].id)
    }
  }), e.$on("itemMouseDown", t[30]), e.$on("itemMouseUp", t[31]), e.$on("edgeChanged", t[43]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 8192 && (s.item = i[97]), r[0] & 8 && (s.graph = i[3]), r[0] & 8208 && (s.isSelected = i[4].map(D4).includes(i[97].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function foe(t) {
  let e, n;
  return e = new qT({
    props: {
      item: t[97],
      graph: t[3],
      isSelected: t[4].map(I4).includes(t[97].id),
      theme: t[3].theme,
      isHighlighted: t[18].includes(t[97].id),
      isHidden: t[18].length > 0 && !t[18].includes(t[97].id)
    }
  }), e.$on("itemMouseDown", t[30]), e.$on("itemMouseUp", t[31]), e.$on("itemBadgeClick", t[32]), e.$on("itemCollapserClick", t[33]), e.$on("nodeChanged", _oe), e.$on("createnode", t[39]), e.$on("itemcontrolmousedown", t[29]), {
    c() {
      me(e.$$.fragment);
    },
    m(i, r) {
      pe(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 8192 && (s.item = i[97]), r[0] & 8 && (s.graph = i[3]), r[0] & 8208 && (s.isSelected = i[4].map(I4).includes(i[97].id)), r[0] & 8 && (s.theme = i[3].theme), r[0] & 270336 && (s.isHighlighted = i[18].includes(i[97].id)), r[0] & 270336 && (s.isHidden = i[18].length > 0 && !i[18].includes(i[97].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      ge(e, i);
    }
  };
}
function a4(t, e) {
  let n, i, r, s, o;
  const l = [foe, uoe, coe], a = [];
  function c(u, f) {
    return u[97].kind === "node" ? 0 : u[97].kind === "edge" ? 1 : u[97].kind === "note" ? 2 : -1;
  }
  return ~(i = c(e)) && (r = a[i] = l[i](e)), {
    key: t,
    first: null,
    c() {
      n = ot(), r && r.c(), s = ot(), this.first = n;
    },
    m(u, f) {
      U(u, n, f), ~i && a[i].m(u, f), U(u, s, f), o = !0;
    },
    p(u, f) {
      e = u;
      let h = i;
      i = c(e), i === h ? ~i && a[i].p(e, f) : (r && (Se(), x(a[h], 1, 1, () => {
        a[h] = null;
      }), Ee()), ~i ? (r = a[i], r ? r.p(e, f) : (r = a[i] = l[i](e), r.c()), P(r, 1), r.m(s.parentNode, s)) : r = null);
    },
    i(u) {
      o || (P(r), o = !0);
    },
    o(u) {
      x(r), o = !1;
    },
    d(u) {
      u && V(n), ~i && a[i].d(u), u && V(s);
    }
  };
}
function c4(t) {
  let e, n = t[16].snap, i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = u4(s4(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = ot();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s[0] & 65544) {
        n = r[16].snap;
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = s4(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = u4(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      Vt(i, r), r && V(e);
    }
  };
}
function u4(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = bt("rect"), b(e, "x", n = t[94].x - t[94].width / 2), b(e, "y", i = t[94].y - t[94].height / 2), b(e, "width", r = t[94].width), b(e, "height", s = t[94].height), b(e, "fill", "transparent"), b(e, "stroke", o = t[3].theme.edgestroke), b(e, "stroke-width", "2px"), b(e, "stroke-dasharray", "12 8");
    },
    m(l, a) {
      U(l, e, a);
    },
    p(l, a) {
      a[0] & 65536 && n !== (n = l[94].x - l[94].width / 2) && b(e, "x", n), a[0] & 65536 && i !== (i = l[94].y - l[94].height / 2) && b(e, "y", i), a[0] & 65536 && r !== (r = l[94].width) && b(e, "width", r), a[0] & 65536 && s !== (s = l[94].height) && b(e, "height", s), a[0] & 8 && o !== (o = l[3].theme.edgestroke) && b(e, "stroke", o);
    },
    d(l) {
      l && V(e);
    }
  };
}
function f4(t) {
  let e, n = Object.keys(t[21].users).filter(t[52]), i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = h4(r4(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = ot();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s[0] & 2097156) {
        n = Object.keys(r[21].users).filter(r[52]);
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = r4(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = h4(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      Vt(i, r), r && V(e);
    }
  };
}
function h4(t) {
  let e, n, i, r, s = t[91] + "", o, l, a;
  return {
    c() {
      e = bt("rect"), r = bt("text"), o = we(s), b(e, "x", n = t[21].users[t[91]].x), b(e, "y", i = t[21].users[t[91]].y), b(e, "width", 120), b(e, "height", 35), b(e, "rx", 10), b(e, "stroke", "red"), b(e, "stroke-width", "3px"), b(e, "fill", "yellow"), b(r, "x", l = t[21].users[t[91]].x + 5), b(r, "y", a = t[21].users[t[91]].y + 20);
    },
    m(c, u) {
      U(c, e, u), U(c, r, u), E(r, o);
    },
    p(c, u) {
      u[0] & 2097156 && n !== (n = c[21].users[c[91]].x) && b(e, "x", n), u[0] & 2097156 && i !== (i = c[21].users[c[91]].y) && b(e, "y", i), u[0] & 2097156 && s !== (s = c[91] + "") && ze(o, s), u[0] & 2097156 && l !== (l = c[21].users[c[91]].x + 5) && b(r, "x", l), u[0] & 2097156 && a !== (a = c[21].users[c[91]].y + 20) && b(r, "y", a);
    },
    d(c) {
      c && V(e), c && V(r);
    }
  };
}
function d4(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("div"), n = we(`Please add comments only in the unzoomed, unpanned view.
				`), i = j("button"), i.textContent = "Reset Zoom", b(e, "class", "alert svelte-1x2xcxd");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(e, i), r || (s = se(i, "click", t[22]), r = !0);
    },
    p: ve,
    d(o) {
      o && V(e), r = !1, s();
    }
  };
}
function p4(t) {
  let e, n, i;
  return n = new c$({
    props: {
      selectedItem: t[4],
      graph: t[3],
      config: t[0]
    }
  }), n.$on("graphchanged", t[55]), {
    c() {
      e = j("section"), me(n.$$.fragment), b(e, "class", "sidepanel svelte-1x2xcxd");
    },
    m(r, s) {
      U(r, e, s), pe(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 16 && (o.selectedItem = r[4]), s[0] & 8 && (o.graph = r[3]), s[0] & 1 && (o.config = r[0]), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), ge(n);
    }
  };
}
function g4(t) {
  let e, n;
  function i(o, l) {
    return o[4].length == 1 ? doe : hoe;
  }
  let r = i(t), s = r(t);
  return {
    c() {
      e = j("sl-menu"), s.c(), ne(e, "class", "contextmenu svelte-1x2xcxd"), ne(e, "style", n = `left: ${t[17][0]}px; top: ${t[17][1]}px;`);
    },
    m(o, l) {
      U(o, e, l), s.m(e, null);
    },
    p(o, l) {
      r === (r = i(o)) && s ? s.p(o, l) : (s.d(1), s = r(o), s && (s.c(), s.m(e, null))), l[0] & 131072 && n !== (n = `left: ${o[17][0]}px; top: ${o[17][1]}px;`) && ne(e, "style", n);
    },
    d(o) {
      o && V(e), s.d();
    }
  };
}
function hoe(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Create new Node", n = Q(), i = j("sl-menu-item"), i.textContent = "Create new Text Note", r = Q(), s = j("sl-menu-item"), s.textContent = "Clear Graph", o = Q(), l = j("sl-menu-item"), l.textContent = "Center here", ne(e, "value", "createnode"), ne(i, "value", "createnote"), ne(s, "value", "cleargraph"), ne(l, "value", "centergraph");
    },
    m(u, f) {
      U(u, e, f), U(u, n, f), U(u, i, f), U(u, r, f), U(u, s, f), U(u, o, f), U(u, l, f), a || (c = [
        se(e, "click", t[36]),
        se(i, "click", t[37]),
        se(s, "click", t[26]),
        se(l, "click", t[27])
      ], a = !0);
    },
    p: ve,
    d(u) {
      u && V(e), u && V(n), u && V(i), u && V(r), u && V(s), u && V(o), u && V(l), a = !1, ht(c);
    }
  };
}
function doe(t) {
  let e, n, i, r = t[4][0].label + "", s, o, l = ["node", "edge"].includes(t[4][0].kind), a, c, u = t[4][0].kind === "node" && m4(t), f = l && _4();
  return {
    c() {
      u && u.c(), e = Q(), n = j("sl-menu-item"), i = we('Delete "'), s = we(r), o = we('" '), f && f.c(), ne(n, "value", "deleteitem");
    },
    m(h, d) {
      u && u.m(h, d), U(h, e, d), U(h, n, d), E(n, i), E(n, s), E(n, o), f && f.m(n, null), a || (c = se(n, "click", t[59]), a = !0);
    },
    p(h, d) {
      h[4][0].kind === "node" ? u ? u.p(h, d) : (u = m4(h), u.c(), u.m(e.parentNode, e)) : u && (u.d(1), u = null), d[0] & 16 && r !== (r = h[4][0].label + "") && ze(s, r), d[0] & 16 && (l = ["node", "edge"].includes(h[4][0].kind)), l ? f || (f = _4(), f.c(), f.m(n, null)) : f && (f.d(1), f = null);
    },
    d(h) {
      u && u.d(h), h && V(e), h && V(n), f && f.d(), a = !1, c();
    }
  };
}
function m4(t) {
  let e, n, i, r, s, o = t[4][0].label + "", l, a, c, u, f = t[4][0].parent && b4(t);
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Create child node", n = Q(), f && f.c(), i = Q(), r = j("sl-menu-item"), s = we('Delete "'), l = we(o), a = we(`"
							including dependents`), ne(e, "value", "createchildnode"), ne(r, "value", "deleteitemwithdependents");
    },
    m(h, d) {
      U(h, e, d), U(h, n, d), f && f.m(h, d), U(h, i, d), U(h, r, d), E(r, s), E(r, l), E(r, a), c || (u = [
        se(e, "click", t[56]),
        se(r, "click", t[58])
      ], c = !0);
    },
    p(h, d) {
      h[4][0].parent ? f ? f.p(h, d) : (f = b4(h), f.c(), f.m(i.parentNode, i)) : f && (f.d(1), f = null), d[0] & 16 && o !== (o = h[4][0].label + "") && ze(l, o);
    },
    d(h) {
      h && V(e), h && V(n), f && f.d(h), h && V(i), h && V(r), c = !1, ht(u);
    }
  };
}
function b4(t) {
  let e, n, i = t[4][0].label + "", r, s, o = zn(t[4][0].parent, t[3]).label + "", l, a, c, u;
  return {
    c() {
      e = j("sl-menu-item"), n = we('Detach "'), r = we(i), s = we(`" from
								"`), l = we(o), a = we('"'), ne(e, "value", "detach");
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(e, r), E(e, s), E(e, l), E(e, a), c || (u = se(e, "click", t[57]), c = !0);
    },
    p(f, h) {
      h[0] & 16 && i !== (i = f[4][0].label + "") && ze(r, i), h[0] & 24 && o !== (o = zn(f[4][0].parent, f[3]).label + "") && ze(l, o);
    },
    d(f) {
      f && V(e), c = !1, u();
    }
  };
}
function _4(t) {
  let e;
  return {
    c() {
      e = we(`leaving
							orphans`);
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function y4(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = j("sl-menu-item"), n = j("input"), i = Q(), r = j("sl-icon"), b(n, "type", "file"), b(n, "name", "uploader"), b(n, "accept", ".graph"), ne(r, "slot", "prefix"), ne(r, "name", "folder2-open"), ne(e, "value", "openfile");
    },
    m(l, a) {
      U(l, e, a), E(e, n), E(e, i), E(e, r), s || (o = se(n, "change", t[60]), s = !0);
    },
    p: ve,
    d(l) {
      l && V(e), s = !1, o();
    }
  };
}
function w4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.innerHTML = `Save as .graph file...
							<sl-icon slot="prefix" name="download"></sl-icon>`, ne(e, "value", "savefile");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function v4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.innerHTML = `Submit your changes
							<sl-icon slot="prefix" name="upload"></sl-icon>`, ne(e, "value", "submitchanges");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function poe(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Switch to editor mode", ne(e, "value", "switchtoeditormode");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function goe(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Clear your local changes", ne(e, "value", "clearlocalchanges");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function k4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "SVG...", ne(e, "value", "export.svg");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function C4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Cytoscape JSON...", ne(e, "value", "export.cytoscape");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function S4(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s, o = t[20];
  const l = (a) => a[88].id;
  for (let a = 0; a < o.length; a += 1) {
    let c = i4(t, o, a), u = l(c);
    i.set(u, n[a] = E4(u, c));
  }
  return {
    c() {
      e = j("fluent-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      ne(e, "autocomplete", "both"), ne(e, "placeholder", "Jump to node");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      r || (s = se(e, "change", t[61]), r = !0);
    },
    p(a, c) {
      c[0] & 1048576 && (o = a[20], n = Gs(n, c, l, 1, a, o, i, e, Bu, E4, null, i4));
    },
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      r = !1, s();
    }
  };
}
function E4(t, e) {
  let n, i = e[88].label + "", r, s;
  return {
    key: t,
    first: null,
    c() {
      n = j("fluent-option"), r = we(i), ne(n, "value", s = e[88].id), this.first = n;
    },
    m(o, l) {
      U(o, n, l), E(n, r);
    },
    p(o, l) {
      e = o, l[0] & 1048576 && i !== (i = e[88].label + "") && ze(r, i), l[0] & 1048576 && s !== (s = e[88].id) && ne(n, "value", s);
    },
    d(o) {
      o && V(n);
    }
  };
}
function A4(t, e) {
  let n, i = e[85].label + "", r, s;
  return {
    key: t,
    first: null,
    c() {
      n = j("sl-option"), r = we(i), ne(n, "value", s = e[85].value), this.first = n;
    },
    m(o, l) {
      U(o, n, l), E(n, r);
    },
    p(o, l) {
      e = o, l[0] & 16384 && i !== (i = e[85].label + "") && ze(r, i), l[0] & 16384 && s !== (s = e[85].value) && ne(n, "value", s);
    },
    d(o) {
      o && V(n);
    }
  };
}
function M4(t, e) {
  let n, i = e[82][0] + "", r, s, o = [], l = /* @__PURE__ */ new Map(), a, c, u = e[82][1];
  const f = (h) => h[85].value;
  for (let h = 0; h < u.length; h += 1) {
    let d = n4(e, u, h), p = f(d);
    l.set(p, o[h] = A4(p, d));
  }
  return {
    key: t,
    first: null,
    c() {
      n = j("small"), r = we(i), s = Q();
      for (let h = 0; h < o.length; h += 1)
        o[h].c();
      a = Q(), c = j("sl-divider"), this.first = n;
    },
    m(h, d) {
      U(h, n, d), E(n, r), U(h, s, d);
      for (let p = 0; p < o.length; p += 1)
        o[p].m(h, d);
      U(h, a, d), U(h, c, d);
    },
    p(h, d) {
      e = h, d[0] & 16384 && i !== (i = e[82][0] + "") && ze(r, i), d[0] & 16384 && (u = e[82][1], o = Gs(o, d, f, 1, e, u, l, a.parentNode, Bu, A4, a, n4));
    },
    d(h) {
      h && V(n), h && V(s);
      for (let d = 0; d < o.length; d += 1)
        o[d].d(h);
      h && V(a), h && V(c);
    }
  };
}
function O4(t) {
  let e, n = t[3].title + "", i;
  return {
    c() {
      e = j("h2"), i = we(n), Li(e, "margin-top", "0");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 8 && n !== (n = r[3].title + "") && ze(i, n);
    },
    d(r) {
      r && V(e);
    }
  };
}
function T4(t) {
  let e, n = t[3].description + "", i;
  return {
    c() {
      e = j("p"), i = we(n);
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 8 && n !== (n = r[3].description + "") && ze(i, n);
    },
    d(r) {
      r && V(e);
    }
  };
}
function R4(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("p"), n = j("a"), i = j("u"), i.textContent = "Contact here", s = we(` for improvements/feedback
			for this particular graph.`), b(n, "href", r = t[3].contact), b(n, "target", "_blank");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(n, i), E(e, s);
    },
    p(o, l) {
      l[0] & 8 && r !== (r = o[3].contact) && b(n, "href", r);
    },
    d(o) {
      o && V(e);
    }
  };
}
function moe(t) {
  var ae, $, de;
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, _, m, C, v, k, S, O, w, A, D, R, M, H, J, I, z, L, K, F, N, te, ue, q, re, ie, Z, Le, Ie, Fe, le, De, Ve = t[3] && l4(t), ye = ((ae = t[3]) == null ? void 0 : ae.title) && O4(t), fe = (($ = t[3]) == null ? void 0 : $.description) && T4(t), Ae = ((de = t[3]) == null ? void 0 : de.contact) && R4(t);
  return {
    c() {
      Ve && Ve.c(), e = Q(), n = j("sl-dialog"), i = j("form"), r = j("sl-input"), s = Q(), o = j("br"), l = Q(), a = j("sl-button"), a.textContent = "Save", c = Q(), u = j("sl-dialog"), f = j("form"), h = j("sl-input"), d = Q(), p = j("br"), g = Q(), _ = j("sl-input"), m = Q(), C = j("input"), v = Q(), k = j("br"), S = Q(), O = j("sl-textarea"), w = Q(), A = j("br"), D = Q(), R = j("sl-button"), R.textContent = "Send email to Foresight Team", M = Q(), H = j("sl-dialog"), ye && ye.c(), J = Q(), fe && fe.c(), I = Q(), Ae && Ae.c(), z = Q(), L = j("hr"), K = Q(), F = j("p"), F.innerHTML = `The editor app <b>Grapher v230217</b> is a tool to visually create compound graphs and was created by
		<a href="https://github.com/nileshtrivedi" target="_blank">@nileshtrivedi</a>.<br/> 
		<br/> 
		<a href="https://foresight.org/tech-tree/" target="_blank">The Foresight Institute</a>
		is using it for their
		<a href="https://github.com/foresight-org/LongevityTechTree" target="_blank">civilizational (Nanotech, Neurotech, Longevity, SpaceTech and Intelligent Cooperation)
			tech trees
		</a>.`, N = Q(), te = j("p"), te.innerHTML = 'The code for this tool is <a href="https://codeberg.org/nilesh/grapher" target="_blank">available as open-source</a>. Bug reports and PRs can be submitted there.', ue = Q(), q = j("sl-button"), q.textContent = "Close", re = Q(), ie = j("sl-dialog"), Z = j("ul"), Z.innerHTML = `<li><b>To create a new node</b>: Right-click on empty area and select
			&quot;Create New Node&quot;.</li> 
		<li><b>To create an edge</b>: Select source node by left-click, drag
			from one of the control points: ⊕ and release when on top of target
			node.</li> 
		<li><b>To create both a new node and an edge</b>: Select source-node and
			left-click on any of the control points: ⊕.</li> 
		<li><b>To create a child node</b>: Right-click on the parent node and
			choose &quot;Create child node&quot;.</li> 
		<li><b>To make one node child of another</b>: Drag it and drop it on
			parent node.</li> 
		<li><b>To delete node</b>: Right-click on the node and choose &quot;Delete&quot;
			either &quot;including dependents&quot; or &quot;leaving orphans&quot;.</li> 
		<li><b>To detach child node from its parent</b>: Right-click on the
			child node and choose &quot;Detach _ from _&quot;.</li> 
		<li><b>To add a comment on the graph</b>: Right-click on empty area and
			choose &quot;Create New Text Note&quot;.</li>`, Le = Q(), Ie = j("sl-button"), Ie.textContent = "Close", ne(r, "name", "displayname"), ne(r, "label", "Change your display name"), ne(r, "placeholder", "Pick a recognizable name"), ne(r, "required", ""), ne(r, "minlength", 8), ne(r, "maxlength", 20), ne(r, "pattern", "[a-z\\-]+"), ne(r, "help-text", "Only lowercase alphabets and - are allowed"), ne(r, "value", t[2]), ne(a, "type", "submit"), ne(a, "variant", "primary"), ne(n, "open", t[10]), ne(n, "class", "dialog-overview"), ne(h, "name", "sender"), ne(h, "placeholder", "Your email address"), ne(h, "label", "Your email address"), ne(h, "autocomplete", "email"), ne(h, "required", ""), ne(h, "clearable", ""), ne(h, "minlength", 5), ne(h, "type", "email"), ne(_, "name", "treesecret"), ne(_, "placeholder", "Foresight requires a password to submit changes to this tree"), ne(_, "label", "Password"), ne(_, "type", "password"), ne(_, "autocomplete", "current-password"), ne(_, "password-toggle", ""), ne(_, "required", ""), ne(_, "clearable", ""), ne(_, "minlength", 5), b(C, "type", "hidden"), b(C, "name", "treename"), C.value = t[19], ne(O, "name", "message"), ne(O, "label", "Comments"), ne(R, "type", "submit"), ne(R, "variant", "primary"), ne(u, "open", t[11]), ne(u, "class", "dialog-overview"), ne(u, "label", "Submit your changes to the Foresight team"), Li(L, "margin", "40px 0"), ne(q, "slot", "footer"), ne(q, "variant", "primary"), ne(H, "open", t[8]), ne(H, "class", "dialog-overview"), ne(Ie, "slot", "footer"), ne(Ie, "variant", "primary"), ne(ie, "open", t[9]), ne(ie, "label", "Help"), ne(ie, "class", "dialog-overview");
    },
    m(he, W) {
      Ve && Ve.m(he, W), U(he, e, W), U(he, n, W), E(n, i), E(i, r), E(i, s), E(i, o), E(i, l), E(i, a), U(he, c, W), U(he, u, W), E(u, f), E(f, h), E(f, d), E(f, p), E(f, g), E(f, _), E(f, m), E(f, C), E(f, v), E(f, k), E(f, S), E(f, O), E(f, w), E(f, A), E(f, D), E(f, R), U(he, M, W), U(he, H, W), ye && ye.m(H, null), E(H, J), fe && fe.m(H, null), E(H, I), Ae && Ae.m(H, null), E(H, z), E(H, L), E(H, K), E(H, F), E(H, N), E(H, te), E(H, ue), E(H, q), U(he, re, W), U(he, ie, W), E(ie, Z), E(ie, Le), E(ie, Ie), Fe = !0, le || (De = [
        se(aoe, "keydown", t[49]),
        se(i, "submit", sr(t[24])),
        se(n, "sl-hide", t[63]),
        se(n, "sl-show", t[64]),
        se(f, "submit", sr(t[25])),
        se(u, "sl-hide", t[65]),
        se(u, "sl-show", t[66]),
        se(q, "click", t[67]),
        se(H, "sl-hide", t[68]),
        se(H, "sl-show", t[69]),
        se(Ie, "click", t[70]),
        se(ie, "sl-hide", t[71]),
        se(ie, "sl-show", t[72])
      ], le = !0);
    },
    p(he, W) {
      var y, T, B;
      he[3] ? Ve ? (Ve.p(he, W), W[0] & 8 && P(Ve, 1)) : (Ve = l4(he), Ve.c(), P(Ve, 1), Ve.m(e.parentNode, e)) : Ve && (Se(), x(Ve, 1, 1, () => {
        Ve = null;
      }), Ee()), (!Fe || W[0] & 4) && ne(r, "value", he[2]), (!Fe || W[0] & 1024) && ne(n, "open", he[10]), (!Fe || W[0] & 524288) && (C.value = he[19]), (!Fe || W[0] & 2048) && ne(u, "open", he[11]), (y = he[3]) != null && y.title ? ye ? ye.p(he, W) : (ye = O4(he), ye.c(), ye.m(H, J)) : ye && (ye.d(1), ye = null), (T = he[3]) != null && T.description ? fe ? fe.p(he, W) : (fe = T4(he), fe.c(), fe.m(H, I)) : fe && (fe.d(1), fe = null), (B = he[3]) != null && B.contact ? Ae ? Ae.p(he, W) : (Ae = R4(he), Ae.c(), Ae.m(H, z)) : Ae && (Ae.d(1), Ae = null), (!Fe || W[0] & 256) && ne(H, "open", he[8]), (!Fe || W[0] & 512) && ne(ie, "open", he[9]);
    },
    i(he) {
      Fe || (P(Ve), Fe = !0);
    },
    o(he) {
      x(Ve), Fe = !1;
    },
    d(he) {
      Ve && Ve.d(he), he && V(e), he && V(n), he && V(c), he && V(u), he && V(M), he && V(H), ye && ye.d(), fe && fe.d(), Ae && Ae.d(), he && V(re), he && V(ie), le = !1, ht(De);
    }
  };
}
const P4 = 5;
function boe() {
  const t = [
    "adorable",
    "clever",
    "elegant",
    "fierce",
    "jaunty",
    "kind",
    "lively",
    "majestic",
    "nimble",
    "old",
    "pretty",
    "quirky",
    "rugged",
    "strong",
    "tough",
    "unique",
    "witty",
    "youthful",
    "zealous"
  ], e = [
    "cat",
    "dog",
    "elephant",
    "fox",
    "giraffe",
    "horse",
    "iguana",
    "jaguar",
    "koala",
    "lion",
    "monkey",
    "newt",
    "octopus",
    "panda",
    "quokka",
    "raccoon",
    "snake",
    "tiger",
    "urial",
    "vulture",
    "walrus",
    "xantus",
    "yak",
    "zebra"
  ], n = t[Math.floor(Math.random() * t.length)], i = e[Math.floor(Math.random() * e.length)];
  return `${n}-${i}`;
}
function _oe(t) {
}
function yoe(t) {
  if (!t)
    return Object.entries({});
  let n = t.items.filter((i) => ["node", "edge"].includes(i.kind)).map((i) => i.tags).flat().filter((i, r, s) => s.indexOf(i) === r).reduce(
    (i, r) => {
      let s = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[s] = i[s] ?? [], i[s].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return Object.entries(n);
}
function Mm(t, e) {
  let n = document.createElement("a");
  n.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(t)), n.setAttribute("download", e), n.style.display = "none", document.body.appendChild(n), n.click(), document.body.removeChild(n);
}
const I4 = (t) => t.id, D4 = (t) => t.id, N4 = (t) => t.id;
function woe(t, e, n) {
  let i, r, s, o = ve, l = () => (o(), o = oT(f, (_e) => n(21, s = _e)), f);
  t.$$.on_destroy.push(() => o());
  let { graphjsonpath: a } = e, { svgForTextBBox: c } = e, { config: u = { mode: "viewonly" } } = e, f, h = localStorage.getItem("username") || boe(), d = !1, p = !1, g = !1, _ = !1, m, C = { versions: [], current: -1 }, v, k, S = !1, O = {}, w = [], A = null, D = null, R, M, H = [], J;
  function I() {
    R && M && Dr(R).transition().duration(300).call(J.transform, Hd.translate(0, 0).scale(1));
  }
  function z() {
    return u.mode == "editor";
  }
  function L(_e) {
    let Re = new FormData(_e.target).get("displayname").toString(), lt = s.users[h];
    bg(f, s.users[Re] = { x: lt.x, y: lt.y }, s), bg(f, s.users[h] = null, s), n(2, h = Re), n(10, g = !1);
  }
  function K(_e) {
    let Re = new FormData(_e.target);
    console.log("submitting changes...", Re);
    let lt = "/.netlify/functions/handlesubmissions?" + new URLSearchParams({
      sender: Re.get("sender"),
      treename: i,
      treesecret: Re.get("treesecret")
    });
    fetch(lt, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ message: Re.get("message"), graph: m })
    }).then((be) => console.log(be)), n(11, _ = !1);
  }
  or(() => {
    a && fetch(a).then((_e) => _e.json()).then((_e) => {
      if (z()) {
        let Re = localStorage.getItem(a);
        n(3, m = uo(Re ? JSON.parse(Re) : _e, null, c));
      } else
        n(3, m = uo(_e, null, c));
      ue(m);
    }), F();
  });
  function F() {
    window.location !== window.parent.location && n(15, S = !0);
  }
  function N() {
    C.current <= 0 || (n(3, m = structuredClone(C.versions[C.current - 1])), Z(), n(12, C = {
      versions: C.versions,
      current: C.current - 1
    }));
  }
  function te() {
    C.current >= C.versions.length - 1 || (n(3, m = structuredClone(C.versions[C.current + 1])), Z(), n(12, C = {
      versions: C.versions,
      current: C.current + 1
    }));
  }
  function ue(_e) {
    let Re = C.versions.slice(C.versions.length == P4 ? 1 : 0, C.current + 1);
    n(12, C = {
      versions: [...Re, structuredClone(_e)],
      current: Math.min(C.current + 1, P4 - 1)
    });
  }
  function q() {
    n(12, C = { versions: [], current: -1 });
  }
  function re() {
    n(3, m.items = [], m), n(17, D = null), Z(), ue(m);
  }
  function ie(_e) {
    MT(D[0], D[1], m, R, M), n(17, D = null), Z(), ue(m);
  }
  function Z(_e) {
    n(5, R), n(6, M), n(4, w), n(3, m = uo(m, w, c, _e)), z() && localStorage.setItem(a, JSON.stringify(m));
  }
  function Le(_e) {
    n(16, A = {
      x: _e.detail.rawEvent.clientX,
      y: _e.detail.rawEvent.clientY
    }), n(17, D = null);
    let Re = R.createSVGPoint();
    Re.x = A.x, Re.y = A.y;
    let lt = Re.matrixTransform(M.getCTM().inverse()), be = { x: lt.x, y: lt.y };
    n(16, A.edge = TT(_e.detail.source, be, m), A), Z();
  }
  function Ie(_e) {
    var Re;
    ["note", "edge"].includes(_e.detail.source.kind) || ["note", "edge"].includes((Re = w[0]) == null ? void 0 : Re.kind) ? n(4, w = [_e.detail.source]) : _e.detail.rawEvent.ctrlKey || _e.detail.rawEvent.metaKey ? n(4, w = [.../* @__PURE__ */ new Set([...w, _e.detail.source])]) : n(4, w = [_e.detail.source]), n(16, A = {
      x: _e.detail.rawEvent.clientX,
      y: _e.detail.rawEvent.clientY
    }), n(17, D = null);
  }
  function Fe(_e) {
    var lt;
    ["note", "edge"].includes(_e.detail.source.kind) || ["note", "edge"].includes((lt = w[0]) == null ? void 0 : lt.kind) ? n(4, w = [_e.detail.source]) : _e.detail.rawEvent.ctrlKey || _e.detail.rawEvent.metaKey ? n(4, w = [.../* @__PURE__ */ new Set([...w, _e.detail.source])]) : n(4, w = [_e.detail.source]);
    let Re = _e.detail.source;
    if (A.edge && Re.kind === "node")
      n(16, A.edge.toId = Re.id, A), delete A.edge.toOrphan;
    else if (A.edge && Re.kind === "edge")
      la(A.edge, m, !1), ue(m);
    else if ((Re == null ? void 0 : Re.kind) === "node" && !A.hasOwnProperty("edge")) {
      let be = R.createSVGPoint();
      be.x = A.x, be.y = A.y;
      let at = be.matrixTransform(M.getCTM().inverse()), st = PT(at, Re, m);
      st && Re.parent != st.id && !C0(m, st).map((Nt) => Nt.id).includes(Re.id) && z() && (Re.parent = st.id, ue(m)), Re.id && st === void 0 && he();
    }
    n(16, A = null), Z(), ["node", "note"].includes(Re.kind) && f && bg(f, s.users[h] = { ...Re.pos }, s);
  }
  function le(_e) {
    if (!z())
      return;
    let Re = _e.detail.source, be = (m.theme.badges.indexOf(Re.badge) + 1) % m.theme.badges.length;
    Re.badge = m.theme.badges[be], Z();
  }
  function De(_e) {
    let Re = _e.detail.source;
    Re.kind === "node" && (Re.is_collapsed = !Re.is_collapsed, Z());
  }
  function Ve(_e, Re) {
    _e.forEach((lt) => la(lt, m, Re)), ue(m), n(4, w = []), Z(), n(17, D = null);
  }
  function ye(_e) {
    if (O = { x: _e.clientX, y: _e.clientY }, !(!w || !A || !w[0] || !w[0].pos) && _e.buttons == 1 && z()) {
      if (A.edge) {
        let Re = R.createSVGPoint();
        Re.x = A.x + 20 * Math.cos(Math.atan2(A.y, A.x)), Re.y = A.y + 20 * Math.sin(Math.atan2(A.y, A.x)) - 20;
        let lt = Re.matrixTransform(M.getCTM().inverse());
        n(16, A.edge.toOrphan = { pos: { x: lt.x, y: lt.y } }, A);
      } else {
        let Re = R.createSVGPoint();
        Re.x = A.x, Re.y = A.y;
        let lt = Re.matrixTransform(M.getCTM().inverse()), be = R.createSVGPoint();
        be.x = O.x, be.y = O.y;
        let at = be.matrixTransform(M.getCTM().inverse());
        w.forEach((st) => Rm(st, m, at.x - lt.x, at.y - lt.y)), n(
          16,
          A.snap = w.map((st) => {
            var kt, On;
            let Nt = ((kt = m.theme.snapdist) == null ? void 0 : kt.x) || 100, Ft = ((On = m.theme.snapdist) == null ? void 0 : On.y) || 100;
            return {
              x: st.width / 2 + Math.round((st.pos.x - st.width / 2) / Nt) * Nt,
              y: st.height / 2 + Math.round((st.pos.y - st.height / 2) / Ft) * Ft,
              width: st.width,
              height: st.height
            };
          }),
          A
        );
      }
      n(16, A.x = O.x, A), n(16, A.y = O.y, A), Z({ kind: "movingitem", item: w });
    }
  }
  function fe(_e) {
    ST(D[0], D[1], m, R, M), ue(m), Z(), n(17, D = null);
  }
  function Ae(_e) {
    ET(D[0], D[1], m, R, M), Z(), n(17, D = null);
  }
  function ae(_e) {
    m.contextmenu && n(17, D = [_e.clientX, _e.clientY]);
  }
  function $(_e) {
    console.log("handleCreateNode", _e.detail), RT(_e.detail.from, _e.detail.handle, m), ue(m), Z();
  }
  function de(_e) {
    w && (_e.key === "Backspace" || _e.key === "Delete") && (Ve(w, !1), ue(m));
  }
  function he() {
    A != null && A.snap && w.forEach((_e, Re) => {
      Rm(_e, m, A.snap[Re].x - _e.pos.x, A.snap[Re].y - _e.pos.y);
    });
  }
  function W(_e) {
    A != null && A.edge && la(A.edge, m, !1), he(), n(16, A = null), Z();
  }
  function y(_e) {
    n(4, w = []), _e.buttons === 1 && (n(16, A = { x: _e.clientX, y: _e.clientY }), n(17, D = null));
  }
  function T(_e) {
    let Re = _e.detail.source;
    Re && (la(Re, m, !1), ue(m)), Z();
  }
  function B(_e, Re) {
    OT(_e, m, Re, R, M), ue(m), Z(), n(17, D = null);
  }
  function X(_e) {
    CT(_e, m), ue(m), Z(), n(17, D = null);
  }
  function G(_e) {
    n(3, m.theme = LT[_e], m), Z();
  }
  function ce(_e) {
    let Re = m.items.find((lt) => lt.kind === "node" && lt.label === _e.value);
    Dr(R).transition().duration(1500).call(J.transform, Hd.translate(500, 500).scale(1.8).translate(0 - Re.pos.x, 0 - Re.pos.y));
  }
  function Ne(_e) {
    let Re = _e.detail.item.value;
    if (Re.startsWith("theme."))
      G(Re.split(".")[1]);
    else if (Re === "clearlocalchanges")
      localStorage.removeItem(a), fetch(a).then((lt) => lt.json()).then((lt) => {
        n(3, m = uo(lt, null, c)), q(), Z();
      });
    else if (Re === "switchtoeditormode")
      localStorage.getItem(a) != null && n(3, m = uo(JSON.parse(localStorage.getItem(a)), null, c)), n(0, u.mode = "editor", u), l(n(7, f = loe(window.location.hostname + "." + a)));
    else if (Re.startsWith("export.")) {
      let lt = Re.split(".")[1];
      lt === "svg" ? Mm(R.outerHTML, `${i}.svg`) : lt === "cytoscape" && Mm(NT(m), `${i}-cytoscape.json`);
    } else
      Re === "openfile" || (Re === "savefile" ? Mm(DT(m), `${i}.graph`) : Re === "undo" ? N() : Re === "redo" ? te() : Re === "clear" ? re() : Re === "changedisplayname" ? n(10, g = !0) : Re === "submitchanges" ? n(11, _ = !0) : Re === "about" ? n(8, d = !0) : Re === "help" && n(9, p = !0));
  }
  function qe(_e) {
    let Re = _e.target.files[0], lt = new FileReader();
    lt.readAsText(Re), lt.onload = (be) => {
      n(3, m = uo(JSON.parse(be.target.result), null, c)), Z();
    };
  }
  const mt = (_e) => {
    (_e.metaKey || _e.ctrlKey) && _e.which === 90 && (_e.preventDefault(), (_e.shiftKey ? te : N)());
  }, dt = (_e) => s.users[_e] && _e != h;
  function je(_e) {
    yt[_e ? "unshift" : "push"](() => {
      M = _e, n(6, M);
    });
  }
  function vt(_e) {
    yt[_e ? "unshift" : "push"](() => {
      R = _e, n(5, R);
    });
  }
  const zt = (_e) => {
    n(3, m = uo(_e.detail, w, c)), Z();
  }, Yt = (_e) => B(_e, w[0]), Bn = (_e) => X(w[0]), Tt = (_e) => Ve(w, !0), Oe = (_e) => Ve(w, !1), si = (_e) => qe(_e), Jt = (_e) => ce(_e.target), Kt = (_e) => n(18, H = m.items.filter((Re) => Re.kind === "node" && Re.tags.includes(_e.target.value)).map((Re) => Re.id)), ln = (_e) => n(10, g = !1), yn = (_e) => n(10, g = !0), Xn = (_e) => n(11, _ = !1), en = (_e) => n(11, _ = !0), oi = (_e) => n(8, d = !1), an = (_e) => n(8, d = !1), An = (_e) => n(8, d = !0), Di = (_e) => n(9, p = !1), Mn = (_e) => n(9, p = !1), ar = (_e) => n(9, p = !0);
  return t.$$set = (_e) => {
    "graphjsonpath" in _e && n(50, a = _e.graphjsonpath), "svgForTextBBox" in _e && n(1, c = _e.svgForTextBBox), "config" in _e && n(0, u = _e.config);
  }, t.$$.update = () => {
    if (t.$$.dirty[0] & 4 && localStorage.setItem("username", h), t.$$.dirty[1] & 524288 && n(19, i = a.split("/").pop().split("#")[0].split("?")[0].replace(/\.graph/, "")), t.$$.dirty[0] & 8 && (window.graph = m), t.$$.dirty[0] & 8 && n(20, r = m ? m.items.filter((_e) => _e.kind === "node").sort((_e, Re) => _e.label.localeCompare(Re.label)) : []), t.$$.dirty[0] & 24 && n(13, v = IT(m, w)), t.$$.dirty[0] & 8 && n(14, k = yoe(m)), t.$$.dirty[0] & 96 | t.$$.dirty[1] & 1048576 && R && M) {
      n(51, J = Bne().on("zoom", ({ transform: Re }) => {
        Dr(M).attr("transform", Re);
      }));
      let _e = Dr(R);
      _e.call(J).on("wheel.zoom", (Re) => {
        Re.preventDefault();
        const lt = _e.property("__zoom").k || 1;
        if (Re.ctrlKey) {
          const be = lt * Math.pow(2, -Re.deltaY * 0.01);
          J.scaleTo(_e, be, po(Re));
        } else
          J.translateBy(_e, -(Re.deltaX / lt), -(Re.deltaY / lt));
      });
    }
  }, [
    u,
    c,
    h,
    m,
    w,
    R,
    M,
    f,
    d,
    p,
    g,
    _,
    C,
    v,
    k,
    S,
    A,
    D,
    H,
    i,
    r,
    s,
    I,
    z,
    L,
    K,
    re,
    ie,
    Z,
    Le,
    Ie,
    Fe,
    le,
    De,
    Ve,
    ye,
    fe,
    Ae,
    ae,
    $,
    de,
    W,
    y,
    T,
    B,
    X,
    ce,
    Ne,
    qe,
    mt,
    a,
    J,
    dt,
    je,
    vt,
    zt,
    Yt,
    Bn,
    Tt,
    Oe,
    si,
    Jt,
    Kt,
    ln,
    yn,
    Xn,
    en,
    oi,
    an,
    An,
    Di,
    Mn,
    ar
  ];
}
class voe extends Qe {
  constructor(e) {
    super(), Xe(
      this,
      e,
      woe,
      moe,
      xt,
      {
        graphjsonpath: 50,
        svgForTextBBox: 1,
        config: 0
      },
      null,
      [-1, -1, -1, -1]
    );
  }
}
const Moe = new voe({
  target: document.querySelector("#grapheditor"),
  props: {
    graphjsonpath: window.graphjsonpath,
    config: window.overrideConfig || { mode: "viewonly" },
    svgForTextBBox: document.getElementById("textbbox")
  }
});
export {
  Moe as default
};
