function fe() {
}
const dk = (t) => t;
function $o(t, e) {
  for (const n in e)
    t[n] = e[n];
  return t;
}
function mk(t) {
  return t();
}
function a1() {
  return /* @__PURE__ */ Object.create(null);
}
function et(t) {
  t.forEach(mk);
}
function Gn(t) {
  return typeof t == "function";
}
function It(t, e) {
  return t != t ? e == e : t !== e || t && typeof t == "object" || typeof t == "function";
}
let Mf;
function zc(t, e) {
  return Mf || (Mf = document.createElement("a")), Mf.href = e, t === Mf.href;
}
function gt(t, e) {
  return t != t ? e == e : t !== e;
}
function b6(t) {
  return Object.keys(t).length === 0;
}
function An(t, e, n, i) {
  if (t) {
    const r = pk(t, e, n, i);
    return t[0](r);
  }
}
function pk(t, e, n, i) {
  return t[1] && i ? $o(n.ctx.slice(), t[1](i(e))) : n.ctx;
}
function On(t, e, n, i) {
  if (t[2] && i) {
    const r = t[2](i(n));
    if (e.dirty === void 0)
      return r;
    if (typeof r == "object") {
      const o = [], s = Math.max(e.dirty.length, r.length);
      for (let l = 0; l < s; l += 1)
        o[l] = e.dirty[l] | r[l];
      return o;
    }
    return e.dirty | r;
  }
  return e.dirty;
}
function Tn(t, e, n, i, r, o) {
  if (r) {
    const s = pk(e, n, i, o);
    t.p(s, r);
  }
}
function En(t) {
  if (t.ctx.length > 32) {
    const e = [], n = t.ctx.length / 32;
    for (let i = 0; i < n; i++)
      e[i] = -1;
    return e;
  }
  return -1;
}
function _6(t) {
  const e = {};
  for (const n in t)
    e[n] = !0;
  return e;
}
function cn(t) {
  return t ?? "";
}
function Ai(t) {
  return t && Gn(t.destroy) ? t.destroy : fe;
}
const gk = typeof window < "u";
let y6 = gk ? () => window.performance.now() : () => Date.now(), Cp = gk ? (t) => requestAnimationFrame(t) : fe;
const rl = /* @__PURE__ */ new Set();
function bk(t) {
  rl.forEach((e) => {
    e.c(t) || (rl.delete(e), e.f());
  }), rl.size !== 0 && Cp(bk);
}
function w6(t) {
  let e;
  return rl.size === 0 && Cp(bk), {
    promise: new Promise((n) => {
      rl.add(e = { c: t, f: n });
    }),
    abort() {
      rl.delete(e);
    }
  };
}
function y(t, e) {
  t.appendChild(e);
}
function _k(t) {
  if (!t)
    return document;
  const e = t.getRootNode ? t.getRootNode() : t.ownerDocument;
  return e && e.host ? e : t.ownerDocument;
}
function v6(t) {
  const e = T("style");
  return k6(_k(t), e), e.sheet;
}
function k6(t, e) {
  return y(t.head || t, e), e.sheet;
}
function B(t, e, n) {
  t.insertBefore(e, n || null);
}
function j(t) {
  t.parentNode && t.parentNode.removeChild(t);
}
function zt(t, e) {
  for (let n = 0; n < t.length; n += 1)
    t[n] && t[n].d(e);
}
function T(t) {
  return document.createElement(t);
}
function ut(t) {
  return document.createElementNS("http://www.w3.org/2000/svg", t);
}
function le(t) {
  return document.createTextNode(t);
}
function q() {
  return le(" ");
}
function Ze() {
  return le("");
}
function X(t, e, n, i) {
  return t.addEventListener(e, n, i), () => t.removeEventListener(e, n, i);
}
function pr(t) {
  return function(e) {
    return e.preventDefault(), t.call(this, e);
  };
}
function De(t) {
  return function(e) {
    return e.stopPropagation(), t.call(this, e);
  };
}
function p(t, e, n) {
  n == null ? t.removeAttribute(e) : t.getAttribute(e) !== n && t.setAttribute(e, n);
}
function f1(t, e) {
  const n = Object.getOwnPropertyDescriptors(t.__proto__);
  for (const i in e)
    e[i] == null ? t.removeAttribute(i) : i === "style" ? t.style.cssText = e[i] : i === "__value" ? t.value = t[i] = e[i] : n[i] && n[i].set ? t[i] = e[i] : p(t, i, e[i]);
}
function Vc(t, e) {
  for (const n in e)
    p(t, n, e[n]);
}
function $(t, e, n) {
  e in t ? t[e] = typeof t[e] == "boolean" && n === "" ? !0 : n : p(t, e, n);
}
function C6(t) {
  return Array.from(t.childNodes);
}
function Te(t, e) {
  e = "" + e, t.wholeText !== e && (t.data = e);
}
function Vo(t, e) {
  t.value = e ?? "";
}
function mi(t, e, n, i) {
  n === null ? t.style.removeProperty(e) : t.style.setProperty(e, n, i ? "important" : "");
}
function de(t, e, n) {
  t.classList[n ? "add" : "remove"](e);
}
function yk(t, e, { bubbles: n = !1, cancelable: i = !1 } = {}) {
  const r = document.createEvent("CustomEvent");
  return r.initCustomEvent(t, n, i, e), r;
}
function Ur(t, e) {
  return new t(e);
}
const Fc = /* @__PURE__ */ new Map();
let Hc = 0;
function S6(t) {
  let e = 5381, n = t.length;
  for (; n--; )
    e = (e << 5) - e ^ t.charCodeAt(n);
  return e >>> 0;
}
function M6(t, e) {
  const n = { stylesheet: v6(e), rules: {} };
  return Fc.set(t, n), n;
}
function c1(t, e, n, i, r, o, s, l = 0) {
  const a = 16.666 / i;
  let f = `{
`;
  for (let _ = 0; _ <= 1; _ += a) {
    const b = e + (n - e) * o(_);
    f += _ * 100 + `%{${s(b, 1 - b)}}
`;
  }
  const c = f + `100% {${s(n, 1 - n)}}
}`, u = `__svelte_${S6(c)}_${l}`, h = _k(t), { stylesheet: d, rules: m } = Fc.get(h) || M6(h, t);
  m[u] || (m[u] = !0, d.insertRule(`@keyframes ${u} ${c}`, d.cssRules.length));
  const g = t.style.animation || "";
  return t.style.animation = `${g ? `${g}, ` : ""}${u} ${i}ms linear ${r}ms 1 both`, Hc += 1, u;
}
function A6(t, e) {
  const n = (t.style.animation || "").split(", "), i = n.filter(
    e ? (o) => o.indexOf(e) < 0 : (o) => o.indexOf("__svelte") === -1
  ), r = n.length - i.length;
  r && (t.style.animation = i.join(", "), Hc -= r, Hc || O6());
}
function O6() {
  Cp(() => {
    Hc || (Fc.forEach((t) => {
      const { ownerNode: e } = t.stylesheet;
      e && j(e);
    }), Fc.clear());
  });
}
let Sa;
function da(t) {
  Sa = t;
}
function xl() {
  if (!Sa)
    throw new Error("Function called outside component initialization");
  return Sa;
}
function T6(t) {
  xl().$$.before_update.push(t);
}
function zi(t) {
  xl().$$.on_mount.push(t);
}
function qr(t) {
  xl().$$.on_destroy.push(t);
}
function Ls() {
  const t = xl();
  return (e, n, { cancelable: i = !1 } = {}) => {
    const r = t.$$.callbacks[e];
    if (r) {
      const o = yk(e, n, { cancelable: i });
      return r.slice().forEach((s) => {
        s.call(t, o);
      }), !o.defaultPrevented;
    }
    return !0;
  };
}
function wk(t, e) {
  return xl().$$.context.set(t, e), e;
}
function Xn(t) {
  return xl().$$.context.get(t);
}
function jt(t, e) {
  const n = t.$$.callbacks[e.type];
  n && n.slice().forEach((i) => i.call(this, e));
}
const oa = [], mt = [], bc = [], Kd = [], vk = Promise.resolve();
let Gd = !1;
function kk() {
  Gd || (Gd = !0, vk.then(Ck));
}
function Ni() {
  return kk(), vk;
}
function ml(t) {
  bc.push(t);
}
function sr(t) {
  Kd.push(t);
}
const Xh = /* @__PURE__ */ new Set();
let Af = 0;
function Ck() {
  const t = Sa;
  do {
    for (; Af < oa.length; ) {
      const e = oa[Af];
      Af++, da(e), E6(e.$$);
    }
    for (da(null), oa.length = 0, Af = 0; mt.length; )
      mt.pop()();
    for (let e = 0; e < bc.length; e += 1) {
      const n = bc[e];
      Xh.has(n) || (Xh.add(n), n());
    }
    bc.length = 0;
  } while (oa.length);
  for (; Kd.length; )
    Kd.pop()();
  Gd = !1, Xh.clear(), da(t);
}
function E6(t) {
  if (t.fragment !== null) {
    t.update(), et(t.before_update);
    const e = t.dirty;
    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, e), t.after_update.forEach(ml);
  }
}
let Xl;
function P6() {
  return Xl || (Xl = Promise.resolve(), Xl.then(() => {
    Xl = null;
  })), Xl;
}
function Qh(t, e, n) {
  t.dispatchEvent(yk(`${e ? "intro" : "outro"}${n}`));
}
const _c = /* @__PURE__ */ new Set();
let ro;
function me() {
  ro = {
    r: 0,
    c: [],
    p: ro
  };
}
function pe() {
  ro.r || et(ro.c), ro = ro.p;
}
function C(t, e) {
  t && t.i && (_c.delete(t), t.i(e));
}
function E(t, e, n, i) {
  if (t && t.o) {
    if (_c.has(t))
      return;
    _c.add(t), ro.c.push(() => {
      _c.delete(t), i && (n && t.d(1), i());
    }), t.o(e);
  } else
    i && i();
}
const R6 = { duration: 0 };
function Of(t, e, n, i) {
  const r = { direction: "both" };
  let o = e(t, n, r), s = i ? 0 : 1, l = null, a = null, f = null;
  function c() {
    f && A6(t, f);
  }
  function u(d, m) {
    const g = d.b - s;
    return m *= Math.abs(g), {
      a: s,
      b: d.b,
      d: g,
      duration: m,
      start: d.start,
      end: d.start + m,
      group: d.group
    };
  }
  function h(d) {
    const { delay: m = 0, duration: g = 300, easing: _ = dk, tick: b = fe, css: w } = o || R6, v = {
      start: y6() + m,
      b: d
    };
    d || (v.group = ro, ro.r += 1), l || a ? a = v : (w && (c(), f = c1(t, s, d, g, m, _, w)), d && b(0, 1), l = u(v, g), ml(() => Qh(t, d, "start")), w6((M) => {
      if (a && M > a.start && (l = u(a, g), a = null, Qh(t, l.b, "start"), w && (c(), f = c1(t, s, l.b, l.duration, 0, _, o.css))), l) {
        if (M >= l.end)
          b(s = l.b, 1 - s), Qh(t, l.b, "end"), a || (l.b ? c() : --l.group.r || et(l.group.c)), l = null;
        else if (M >= l.start) {
          const S = M - l.start;
          s = l.a + l.d * _(S / l.duration), b(s, 1 - s);
        }
      }
      return !!(l || a);
    }));
  }
  return {
    run(d) {
      Gn(o) ? P6().then(() => {
        o = o(r), h(d);
      }) : h(d);
    },
    end() {
      c(), l = a = null;
    }
  };
}
const Gu = typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : global;
function of(t, e) {
  t.d(1), e.delete(t.key);
}
function Xu(t, e) {
  E(t, 1, 1, () => {
    e.delete(t.key);
  });
}
function fo(t, e, n, i, r, o, s, l, a, f, c, u) {
  let h = t.length, d = o.length, m = h;
  const g = {};
  for (; m--; )
    g[t[m].key] = m;
  const _ = [], b = /* @__PURE__ */ new Map(), w = /* @__PURE__ */ new Map();
  for (m = d; m--; ) {
    const R = u(r, o, m), k = n(R);
    let I = s.get(k);
    I ? i && I.p(R, e) : (I = f(k, R), I.c()), b.set(k, _[m] = I), k in g && w.set(k, Math.abs(m - g[k]));
  }
  const v = /* @__PURE__ */ new Set(), M = /* @__PURE__ */ new Set();
  function S(R) {
    C(R, 1), R.m(l, c), s.set(R.key, R), c = R.first, d--;
  }
  for (; h && d; ) {
    const R = _[d - 1], k = t[h - 1], I = R.key, L = k.key;
    R === k ? (c = R.first, h--, d--) : b.has(L) ? !s.has(I) || v.has(I) ? S(R) : M.has(L) ? h-- : w.get(I) > w.get(L) ? (M.add(I), S(R)) : (v.add(L), h--) : (a(k, s), h--);
  }
  for (; h--; ) {
    const R = t[h];
    b.has(R.key) || a(R, s);
  }
  for (; d; )
    S(_[d - 1]);
  return _;
}
function xs(t, e) {
  const n = {}, i = {}, r = { $$scope: 1 };
  let o = t.length;
  for (; o--; ) {
    const s = t[o], l = e[o];
    if (l) {
      for (const a in s)
        a in l || (i[a] = 1);
      for (const a in l)
        r[a] || (n[a] = l[a], r[a] = 1);
      t[o] = l;
    } else
      for (const a in s)
        r[a] = 1;
  }
  for (const s in i)
    s in n || (n[s] = void 0);
  return n;
}
function Qu(t) {
  return typeof t == "object" && t !== null ? t : {};
}
function lr(t, e, n, i) {
  const r = t.$$.props[e];
  r !== void 0 && (t.$$.bound[r] = n, i === void 0 && n(t.$$.ctx[r]));
}
function se(t) {
  t && t.c();
}
function re(t, e, n, i) {
  const { fragment: r, after_update: o } = t.$$;
  r && r.m(e, n), i || ml(() => {
    const s = t.$$.on_mount.map(mk).filter(Gn);
    t.$$.on_destroy ? t.$$.on_destroy.push(...s) : et(s), t.$$.on_mount = [];
  }), o.forEach(ml);
}
function oe(t, e) {
  const n = t.$$;
  n.fragment !== null && (et(n.on_destroy), n.fragment && n.fragment.d(e), n.on_destroy = n.fragment = null, n.ctx = []);
}
function I6(t, e) {
  t.$$.dirty[0] === -1 && (oa.push(t), kk(), t.$$.dirty.fill(0)), t.$$.dirty[e / 31 | 0] |= 1 << e % 31;
}
function je(t, e, n, i, r, o, s, l = [-1]) {
  const a = Sa;
  da(t);
  const f = t.$$ = {
    fragment: null,
    ctx: [],
    props: o,
    update: fe,
    not_equal: r,
    bound: a1(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (a ? a.$$.context : [])),
    callbacks: a1(),
    dirty: l,
    skip_bound: !1,
    root: e.target || a.$$.root
  };
  s && s(f.root);
  let c = !1;
  if (f.ctx = n ? n(t, e.props || {}, (u, h, ...d) => {
    const m = d.length ? d[0] : h;
    return f.ctx && r(f.ctx[u], f.ctx[u] = m) && (!f.skip_bound && f.bound[u] && f.bound[u](m), c && I6(t, u)), h;
  }) : [], f.update(), c = !0, et(f.before_update), f.fragment = i ? i(f.ctx) : !1, e.target) {
    if (e.hydrate) {
      const u = C6(e.target);
      f.fragment && f.fragment.l(u), u.forEach(j);
    } else
      f.fragment && f.fragment.c();
    e.intro && C(t.$$.fragment), re(t, e.target, e.anchor, e.customElement), Ck();
  }
  da(a);
}
class Be {
  $destroy() {
    oe(this, 1), this.$destroy = fe;
  }
  $on(e, n) {
    if (!Gn(n))
      return fe;
    const i = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return i.push(n), () => {
      const r = i.indexOf(n);
      r !== -1 && i.splice(r, 1);
    };
  }
  $set(e) {
    this.$$set && !b6(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);
  }
}
function Mn(t, e) {
  return e && t && e.items.find((n) => n.id === t);
}
function N6(t, e) {
  return t.items.filter((n) => n.kind === "node").forEach((n) => {
    n.children = [], (!n.pos || !n.pos.hasOwnProperty("x") || !n.pos.hasOwnProperty("y")) && (console.error(`Got null position for ${n.label}`), n.pos = { x: Math.random() * 600, y: Math.random() * 600 }), n.notes = n.notes ?? "", n.hasOwnProperty("parent") || (n.parent = null);
  }), t.items.filter((n) => n.kind === "note").forEach((n) => {
    n.children = [];
  }), t.items.forEach((n) => {
    if (n.parent) {
      let i = Mn(n.parent, t);
      if (!i) {
        delete n.parent;
        return;
      }
      i.children = [...i.children || [], n.id];
    }
  }), t;
}
function D6(t, e) {
  let n = Mn(t.parent, e);
  return n && (t.parent = n.parent), e;
}
function Xd(t, e, n, i) {
  t.pos.x += n, t.pos.y += i, (t.children || []).forEach((r) => {
    let o = Mn(r, e);
    Xd(o, e, n, i);
  });
}
function Qd(t, e, n, i) {
  var v;
  if ((t.children || []).forEach((M) => {
    let S = Mn(M, e);
    Qd(S, e, n, i);
  }), i && i.kind === "movingitem" && !i.item.map((M) => Wc(e, M)).flat().includes(t))
    return;
  let r = t.nodenotesfontsize || e.theme.nodenotesfontsize || 16, o = Math.min(300, t.notes ? t.notes.length * (r - 6) : 0), s = t.notes ? (Math.ceil(t.notes.length * (r - 6) / o) + t.notes.split(/\r\n|\r|\n/).length) * (r + 4) : 0;
  t.noteswidth = o, t.notesheight = s;
  let l = t.has_dynamic_notes ? 140 : 0, a = t.children.length > 0 || ((v = t.notes) == null ? void 0 : v.length) > 0 ? "700" : "300", f = t.nodelabelfontsize || e.theme.nodelabelfontsize || 16, c = L6(n, t.label, e.theme.font, f, a);
  t.labelwidth = c.width + 60, t.labelheight = c.height;
  let u = Math.max(t.labelwidth / 2, o / 2), h = Math.max(...t.children.map((M) => {
    let S = Mn(M, e);
    return S.pos.x + S.width / 2 + 15;
  }), t.pos.x) - t.pos.x, d = t.pos.x - Math.min(...t.children.map((M) => {
    let S = Mn(M, e);
    return S.pos.x - S.width / 2 - 15;
  }), t.pos.x);
  t.is_collapsed ? t.width = 2 * u + 20 : t.width = 2 * Math.max(u, h, d) + 20;
  let m = t.labelheight / 2 + s / 2 + l / 2, g = t.children.map((M) => {
    let S = Mn(M, e);
    return S.pos.y + S.height / 2 + 20;
  }), _ = Math.max(...g, t.pos.y) - t.pos.y, b = t.children.map((M) => {
    let S = Mn(M, e);
    return S.pos.y - S.height / 2 - 20 - 30 - s - l;
  }), w = t.pos.y - Math.min(...b, t.pos.y);
  t.is_collapsed ? t.height = 2 * m + 20 : t.height = 2 * Math.max(m, w, _) + 20;
}
function Sk(t, e, n, i) {
  t.level = i && i.id === t.id ? 500 + n : n, t.children.forEach((r) => Sk(Mn(r, e), e, t.level + 2, i));
}
function Co(t, e, n, i) {
  return t ? (N6(t), t.items.filter((r) => r.kind === "node" && !r.parent).forEach((r) => {
    Qd(r, t, n, i), Sk(r, t, 0, e);
  }), t.items.filter((r) => r.kind === "note").forEach((r) => {
    Qd(r, t, n, i);
  }), t.items.filter((r) => r.kind === "edge").forEach((r) => {
    r.level = Math.min(
      r.fromId ? Mn(r.fromId, t).level : 20,
      r.toId ? Mn(r.toId, t).level : 20
    ) - 1;
  }), t) : null;
}
function $s(t, e, n) {
  t.kind === "edge" || t.kind === "note" ? e.items = e.items.filter((i) => i != t) : t.kind === "node" && (n ? (e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    $s(i, e, !1);
  }), e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    $s(i, e, !0);
  }), e.items = e.items.filter((i) => i != t)) : (e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    t.parent ? i.parent = t.parent : delete i.parent;
  }), e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    i.fromId === t.id && (t.parent ? i.fromId = t.parent : (delete i.fromId, i.fromOrphan = { pos: { x: t.pos.x, y: t.pos.y } })), i.toId === t.id && (t.parent ? i.toId = t.parent : (delete i.toId, i.toOrphan = { pos: { x: t.pos.x, y: t.pos.y } }));
  }), e.items = e.items.filter((i) => i != t)));
}
function j6(t, e, n, i, r) {
  let o = pl(n);
  n.items.push({
    id: o,
    kind: "node",
    label: `New node ${o}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Ma(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function B6(t, e, n, i, r) {
  let o = pl(n);
  n.items.push({
    id: o,
    kind: "note",
    label: "Add your notes here",
    notes: "some extra content",
    pos: Ma(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function Ma(t, e, n, i) {
  const r = t.createSVGPoint();
  r.x = e, r.y = n;
  let o = r.matrixTransform(i.getCTM().inverse());
  return { x: o.x, y: o.y };
}
function L6(t, e, n, i, r) {
  let o = "http://www.w3.org/2000/svg";
  var s = document.createElementNS(o, "text");
  s.setAttribute("font-family", n), s.setAttribute("font-size", i), s.setAttribute("font-weight", r), s.setAttributeNS(o, "x", 200), s.setAttributeNS(o, "y", 300), s.textContent = e, t.appendChild(s);
  var l = s.getBBox();
  return s.parentNode.removeChild(s), l;
}
function pl(t) {
  return Math.max(...t.items.map((e) => e.id), 0) + 1;
}
function x6(t, e, n, i, r) {
  let o = Ma(i, t, e, r), s = Ma(i, window.innerWidth, window.innerHeight, r);
  n.items.forEach((l) => {
    l.pos && (l.pos.x -= Math.round(o.x - s.x / 2), l.pos.y -= Math.round(o.y - s.y / 2));
  });
}
function z6(t, e, n, i, r) {
  let o = pl(e);
  e.items.push({
    id: o,
    kind: "node",
    label: `New node ${o}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Ma(i, t.clientX, t.clientY, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    parent: n.id
  });
}
function V6(t, e, n) {
  let i = {
    id: pl(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toOrphan: { pos: { x: e.x, y: e.y } },
    directed: !0,
    weight: 5
  };
  return n.items.push(i), i;
}
function F6(t, e, n) {
  console.log("createGraphNodeEdge");
  let i = pl(n);
  n.items.push({
    id: i,
    kind: "node",
    label: `New node ${i}`,
    desc: "",
    link: "",
    tags: [],
    parent: t.parent,
    children: [],
    pos: {
      x: t.pos.x + (100 + t.width / 2 + Math.random() * 100) * (Math.floor(e / 10) - 2),
      y: t.pos.y + (100 + t.height / 2 + Math.random() * 100) * (e % 10 - 2)
    },
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    fill: t.fill,
    stroke: t.stroke
  }), n.items.push({
    id: pl(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toId: i,
    directed: !0,
    weight: 5
  });
}
function H6(t, e, n) {
  return n.items.filter((r) => r.kind === "node").filter((r) => r.id != e.id).filter((r) => t.x > r.pos.x - r.width / 2 && t.x < r.pos.x + r.width / 2 && t.y > r.pos.y - r.height / 2 && t.y < r.pos.y + r.height / 2).sort((r, o) => o.level - r.level)[0];
}
function Mk(t, e, n) {
  return e.kind !== "node" ? [] : t.items.filter((o) => o.kind === "edge" && o.toId === e.id).map((o) => {
    let s = Mn(o.fromId, t);
    return { node: s, parents: n == 2 ? [] : Mk(t, s, n + 1) };
  });
}
function Wc(t, e) {
  if (e == null)
    return [];
  if (e.kind !== "node")
    return [];
  if (e.parent == null)
    return [];
  let n = Mn(e.parent, t);
  return [...Wc(t, n), n];
}
function gl(t, e) {
  if (t.kind === "edge")
    return gl(Mn(t.fromId, e), e) && gl(Mn(t.toId, e), e);
  if (t.kind === "note")
    return !1;
  let n = t.parent;
  for (; n; ) {
    let i = Mn(n, e);
    if (!i)
      return console.error(
        `item ${t.label}'s parent ${n} is missing`
      ), !1;
    if (i.is_collapsed)
      return i;
    n = i.parent;
  }
  return !1;
}
function W6(t, e) {
  if (!t)
    return [];
  let n = e[e.length - 1];
  return (n == null ? void 0 : n.kind) === "edge" ? [
    ...t.items.sort((i, r) => i.level - r.level).filter((i) => i.id !== n.id).filter((i) => !gl(i, t)),
    ...t.items.filter((i) => i.id === n.id)
  ] : t.items.sort((i, r) => i.level - r.level).filter((i) => !gl(i, t));
}
function U6(t) {
  let e = {};
  return e.items = t.items.map((n) => {
    if (n.kind === "node")
      return {
        id: n.id,
        kind: "node",
        label: n.label,
        notes: n.notes,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        has_dynamic_notes: n.has_dynamic_notes || !1,
        labelcolor: n.labelcolor,
        is_collapsed: n.is_collapsed || !1,
        parent: n.parent,
        pos: n.pos,
        fill: n.fill,
        stroke: n.stroke,
        badge: n.badge,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
    if (n.kind === "edge")
      return {
        id: n.id,
        kind: "edge",
        label: n.label,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        stroke: n.stroke,
        strokeType: n.strokeType,
        directed: n.directed,
        weight: n.weight,
        fromId: n.fromId,
        toId: n.toId,
        shape: n.shape,
        fromOrphan: n.fromOrphan,
        toOrphan: n.toOrphan
      };
    if (n.kind === "note")
      return {
        id: n.id,
        kind: n.kind,
        pos: n.pos,
        label: n.label,
        notes: n.notes,
        labelcolor: n.labelcolor,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
  }).sort((n, i) => n.kind === i.kind ? (n.parent || 0) - (i.parent || 0) : n.kind.localeCompare(i.kind)), e.grid = t.grid, e.theme = t.theme, e.jsondownload = t.jsondownload, e.jsonupload = t.jsonupload, e.contextmenu = t.contextmenu, e.customjson = t.customjson, e.exportcytoscape = t.exportcytoscape, e.exportsvg = t.exportsvg, e.title = t.title || "", e.description = t.description || "", e.contact = t.contact || "", JSON.stringify(e, null, 2);
}
function q6(t) {
  let e = {};
  return e.elements = t.items.filter((n) => n.kind === "node" || n.fromId && n.toId).map((n) => {
    if (n.kind === "node")
      return {
        group: "nodes",
        data: {
          id: n.id,
          parent: n.parent
        },
        position: { x: n.pos.x, y: n.pos.y }
      };
    if (n.kind === "edge")
      return {
        group: "edges",
        data: {
          id: n.id,
          source: n.fromId,
          target: n.toId
        }
      };
  }), JSON.stringify(e, null, 2);
}
const J6 = {
  elegant: {
    name: "elegant",
    bgfill: "#334155",
    grid: "cartesian",
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#bae6fd",
    nodelabelstroke: "#334155",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 2,
    nodeBackgroundImageURL: null,
    edgestroke: "red",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "Dosis",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  foresight: {
    name: "foresight",
    bgfill: "#1c170b",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#7b9ecb",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#ccc",
    edgeshape: "ortho",
    edgestroketype: "solid",
    font: "Roboto Condensed",
    badges: ["✅", "❌", "⚡", "👎", "👍", "https://cdn.discordapp.com/attachments/987690735639875584/997881951534981203/hexbadge.png"]
  },
  minimal: {
    name: "minimal",
    bgfill: "#e5e7eb",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "#1f2937",
    highlightColor: "red",
    nodefill: "white",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 15,
    nodeBackgroundImageURL: null,
    edgestroke: "#1f2937",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "PT Mono",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  },
  classic: {
    name: "classic",
    bgfill: "#f3f3f3",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    font: "Balsamiq Sans",
    nodefill: "#fbe6a3",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#4277dd",
    edgeshape: "curved",
    edgestroketype: "solid",
    badges: ["✅", "❌", "⚡", "👎", "👍"]
  }
};
function K6(t) {
  let e, n, i, r;
  return {
    c() {
      e = ut("path"), p(e, "d", n = `M ${t[1] - t[3]},${t[2] - t[3]} l ${2 * t[3]},${2 * t[3]} M ${t[1] + t[3]},${t[2] - t[3]} l ${-2 * t[3]},${2 * t[3]}`), p(e, "data-handle", t[4]), p(e, "class", "svelte-qkserr");
    },
    m(o, s) {
      B(o, e, s), i || (r = [
        X(e, "click", t[8]),
        X(e, "mousedown", De(t[9]))
      ], i = !0);
    },
    p(o, s) {
      s & 14 && n !== (n = `M ${o[1] - o[3]},${o[2] - o[3]} l ${2 * o[3]},${2 * o[3]} M ${o[1] + o[3]},${o[2] - o[3]} l ${-2 * o[3]},${2 * o[3]}`) && p(e, "d", n), s & 16 && p(e, "data-handle", o[4]);
    },
    d(o) {
      o && j(e), i = !1, et(r);
    }
  };
}
function G6(t) {
  let e, n, i, r;
  return {
    c() {
      e = ut("path"), p(e, "d", n = `M ${t[1]},${t[2] - t[3]} v ${2 * t[3]} M ${t[1] - t[3]},${t[2]} h ${2 * t[3]}`), p(e, "data-handle", t[4]), p(e, "class", "svelte-qkserr");
    },
    m(o, s) {
      B(o, e, s), i || (r = [
        X(e, "click", t[6]),
        X(e, "mousedown", De(t[7]))
      ], i = !0);
    },
    p(o, s) {
      s & 14 && n !== (n = `M ${o[1]},${o[2] - o[3]} v ${2 * o[3]} M ${o[1] - o[3]},${o[2]} h ${2 * o[3]}`) && p(e, "d", n), s & 16 && p(e, "data-handle", o[4]);
    },
    d(o) {
      o && j(e), i = !1, et(r);
    }
  };
}
function X6(t) {
  let e, n, i, r, o;
  function s(f, c) {
    if (f[0] === "plus")
      return G6;
    if (f[0] === "cross")
      return K6;
  }
  let l = s(t), a = l && l(t);
  return {
    c() {
      e = ut("g"), n = ut("circle"), a && a.c(), p(n, "cx", t[1]), p(n, "cy", t[2]), p(n, "r", i = t[3] + 2), p(n, "title", t[5]), p(n, "data-handle", t[4]), p(n, "class", "svelte-qkserr"), p(e, "class", "svelte-qkserr");
    },
    m(f, c) {
      B(f, e, c), y(e, n), a && a.m(e, null), r || (o = [
        X(n, "click", t[10]),
        X(n, "mousedown", De(t[11]))
      ], r = !0);
    },
    p(f, [c]) {
      c & 2 && p(n, "cx", f[1]), c & 4 && p(n, "cy", f[2]), c & 8 && i !== (i = f[3] + 2) && p(n, "r", i), c & 32 && p(n, "title", f[5]), c & 16 && p(n, "data-handle", f[4]), l === (l = s(f)) && a ? a.p(f, c) : (a && a.d(1), a = l && l(f), a && (a.c(), a.m(e, null)));
    },
    i: fe,
    o: fe,
    d(f) {
      f && j(e), a && a.d(), r = !1, et(o);
    }
  };
}
function Q6(t, e, n) {
  let { kind: i = "plus" } = e, { x: r } = e, { y: o } = e, { size: s = 4 } = e, { data: l } = e, { title: a } = e;
  function f(g) {
    jt.call(this, t, g);
  }
  function c(g) {
    jt.call(this, t, g);
  }
  function u(g) {
    jt.call(this, t, g);
  }
  function h(g) {
    jt.call(this, t, g);
  }
  function d(g) {
    jt.call(this, t, g);
  }
  function m(g) {
    jt.call(this, t, g);
  }
  return t.$$set = (g) => {
    "kind" in g && n(0, i = g.kind), "x" in g && n(1, r = g.x), "y" in g && n(2, o = g.y), "size" in g && n(3, s = g.size), "data" in g && n(4, l = g.data), "title" in g && n(5, a = g.title);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m
  ];
}
class Sp extends Be {
  constructor(e) {
    super(), je(this, e, Q6, X6, It, {
      kind: 0,
      x: 1,
      y: 2,
      size: 3,
      data: 4,
      title: 5
    });
  }
}
function u1(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function h1(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = ut("image"), p(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), p(e, "height", i = t[1].height), p(e, "width", r = t[1].width), p(e, "preserveAspectRatio", "none"), p(e, "x", o = t[1].pos.x - t[1].width / 2), p(e, "y", s = t[1].pos.y - t[1].height / 2);
    },
    m(f, c) {
      B(f, e, c), l || (a = [
        X(e, "mousedown", De(t[19])),
        X(e, "mouseup", De(t[20])),
        X(e, "click", De(t[15]))
      ], l = !0);
    },
    p(f, c) {
      c[0] & 3 && n !== (n = f[1].backgroundImageURL || f[0].nodeBackgroundImageURL) && p(e, "href", n), c[0] & 2 && i !== (i = f[1].height) && p(e, "height", i), c[0] & 2 && r !== (r = f[1].width) && p(e, "width", r), c[0] & 2 && o !== (o = f[1].pos.x - f[1].width / 2) && p(e, "x", o), c[0] & 2 && s !== (s = f[1].pos.y - f[1].height / 2) && p(e, "y", s);
    },
    d(f) {
      f && j(e), l = !1, et(a);
    }
  };
}
function d1(t) {
  let e, n, i = t[1].notes + "", r, o, s, l, a, f, c, u, h, d;
  return {
    c() {
      e = ut("foreignObject"), n = T("div"), r = le(i), o = q(), p(n, "class", "foreign-obj-div svelte-1td5oib"), p(e, "x", s = t[1].pos.x - t[1].noteswidth / 2), p(e, "y", l = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), p(e, "font-family", a = t[0].font), p(e, "font-weight", "300"), p(e, "font-size", f = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), p(e, "width", c = t[1].noteswidth), p(e, "height", u = t[1].notesheight);
    },
    m(m, g) {
      B(m, e, g), y(e, n), y(n, r), y(n, o), h || (d = [
        X(e, "mousedown", De(t[23])),
        X(e, "mouseup", De(t[24])),
        X(e, "click", De(t[13]))
      ], h = !0);
    },
    p(m, g) {
      g[0] & 2 && i !== (i = m[1].notes + "") && Te(r, i), g[0] & 2 && s !== (s = m[1].pos.x - m[1].noteswidth / 2) && p(e, "x", s), g[0] & 2 && l !== (l = m[1].pos.y - m[1].height / 2 + m[1].labelheight + 10) && p(e, "y", l), g[0] & 1 && a !== (a = m[0].font) && p(e, "font-family", a), g[0] & 3 && f !== (f = m[1].nodenotesfontsize || m[0].nodenotesfontsize || 16) && p(e, "font-size", f), g[0] & 2 && c !== (c = m[1].noteswidth) && p(e, "width", c), g[0] & 2 && u !== (u = m[1].notesheight) && p(e, "height", u);
    },
    d(m) {
      m && j(e), h = !1, et(d);
    }
  };
}
function m1(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = ut("foreignObject"), n = document.createElementNS("http://www.w3.org/1999/xhtml", "div"), p(n, "xmlns", "http://www.w3.org/1999/xhtml"), p(n, "class", "dynamicnotes-div svelte-1td5oib"), p(e, "x", i = t[1].pos.x - t[1].width / 2), p(e, "y", r = t[1].pos.y - t[1].height / 2 + 30 + t[1].notesheight), p(e, "font-family", o = t[0].font), p(e, "font-weight", "300"), p(e, "font-size", s = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), p(e, "width", l = t[1].width), p(e, "height", 140);
    },
    m(c, u) {
      B(c, e, u), y(e, n), n.innerHTML = t[6], a || (f = [
        X(e, "mousedown", De(t[25])),
        X(e, "mouseup", De(t[26])),
        X(e, "click", De(t[12]))
      ], a = !0);
    },
    p(c, u) {
      u[0] & 64 && (n.innerHTML = c[6]), u[0] & 2 && i !== (i = c[1].pos.x - c[1].width / 2) && p(e, "x", i), u[0] & 2 && r !== (r = c[1].pos.y - c[1].height / 2 + 30 + c[1].notesheight) && p(e, "y", r), u[0] & 1 && o !== (o = c[0].font) && p(e, "font-family", o), u[0] & 3 && s !== (s = c[1].nodenotesfontsize || c[0].nodenotesfontsize || 16) && p(e, "font-size", s), u[0] & 2 && l !== (l = c[1].width) && p(e, "width", l);
    },
    d(c) {
      c && j(e), a = !1, et(f);
    }
  };
}
function p1(t) {
  let e, n, i = [[1, 0], [0, 1], [-1, 0], [0, -1]], r = [];
  for (let s = 0; s < 4; s += 1)
    r[s] = g1(u1(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < 4; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < 4; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 770) {
        i = [[1, 0], [0, 1], [-1, 0], [0, -1]];
        let a;
        for (a = 0; a < 4; a += 1) {
          const f = u1(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = g1(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = 4; a < 4; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < 4; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < 4; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function g1(t) {
  let e, n;
  return e = new Sp({
    props: {
      kind: "plus",
      data: 22 + t[38][1] + 10 * t[38][0],
      x: t[1].pos.x + t[38][0] * t[1].width / 2,
      y: t[1].pos.y + t[38][1] * t[1].height / 2,
      title: "Create new connected node",
      size: 4
    }
  }), e.$on("click", t[8]), e.$on("mousedown", t[9]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.x = i[1].pos.x + i[38][0] * i[1].width / 2), r[0] & 2 && (o.y = i[1].pos.y + i[38][1] * i[1].height / 2), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function b1(t) {
  let e, n;
  function i(s, l) {
    return l[0] & 2 && (n = null), n == null && (n = !!s[1].badge.startsWith("http")), n ? Z6 : Y6;
  }
  let r = i(t, [-1, -1]), o = r(t);
  return {
    c() {
      e = ut("g"), o.c(), p(e, "class", "badge");
    },
    m(s, l) {
      B(s, e, l), o.m(e, null);
    },
    p(s, l) {
      r === (r = i(s, l)) && o ? o.p(s, l) : (o.d(1), o = r(s), o && (o.c(), o.m(e, null)));
    },
    d(s) {
      s && j(e), o.d();
    }
  };
}
function Y6(t) {
  let e, n, i, r, o = t[1].badge + "", s, l, a, f, c;
  return {
    c() {
      e = ut("circle"), r = ut("text"), s = le(o), p(e, "cx", n = t[1].pos.x - t[1].width / 2), p(e, "cy", i = t[1].pos.y - t[1].height / 2), p(e, "r", 10), p(e, "fill", "white"), p(e, "stroke", "orange"), p(r, "x", l = t[1].pos.x - t[1].width / 2 - 7), p(r, "y", a = t[1].pos.y - t[1].height / 2 + 6), p(r, "stroke", "white"), p(r, "fill", "white"), p(r, "class", "svelte-1td5oib");
    },
    m(u, h) {
      B(u, e, h), B(u, r, h), y(r, s), f || (c = [
        X(e, "mousedown", De(t[30])),
        X(e, "mouseup", De(t[31])),
        X(e, "click", De(t[32])),
        X(r, "mousedown", De(t[33])),
        X(r, "mouseup", De(t[34])),
        X(r, "click", De(t[35]))
      ], f = !0);
    },
    p(u, h) {
      h[0] & 2 && n !== (n = u[1].pos.x - u[1].width / 2) && p(e, "cx", n), h[0] & 2 && i !== (i = u[1].pos.y - u[1].height / 2) && p(e, "cy", i), h[0] & 2 && o !== (o = u[1].badge + "") && Te(s, o), h[0] & 2 && l !== (l = u[1].pos.x - u[1].width / 2 - 7) && p(r, "x", l), h[0] & 2 && a !== (a = u[1].pos.y - u[1].height / 2 + 6) && p(r, "y", a);
    },
    d(u) {
      u && j(e), u && j(r), f = !1, et(c);
    }
  };
}
function Z6(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = ut("image"), p(e, "x", n = t[1].pos.x - t[1].width / 2 - 10), p(e, "y", i = t[1].pos.y - t[1].height / 2 - 10), p(e, "width", 30), p(e, "height", 28), p(e, "href", r = t[1].badge);
    },
    m(l, a) {
      B(l, e, a), o || (s = [
        X(e, "mousedown", De(t[27])),
        X(e, "mouseup", De(t[28])),
        X(e, "click", De(t[29]))
      ], o = !0);
    },
    p(l, a) {
      a[0] & 2 && n !== (n = l[1].pos.x - l[1].width / 2 - 10) && p(e, "x", n), a[0] & 2 && i !== (i = l[1].pos.y - l[1].height / 2 - 10) && p(e, "y", i), a[0] & 2 && r !== (r = l[1].badge) && p(e, "href", r);
    },
    d(l) {
      l && j(e), o = !1, et(s);
    }
  };
}
function _1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d;
  return {
    c() {
      e = ut("polygon"), s = ut("line"), p(e, "points", n = [
        [
          t[1].pos.x + t[1].width / 2 - 24,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 + 24
        ].join(",")
      ].join(" ")), p(e, "fill", i = t[5] ? "transparent" : t[1].is_collapsed ? t[1].fill || t[0].nodefill : t[0].bgfill), p(e, "stroke", r = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), p(e, "stroke-width", o = t[3] || t[4] ? "2px" : "1px"), p(e, "class", "svelte-1td5oib"), p(s, "x1", l = t[1].pos.x + t[1].width / 2 - 27), p(s, "y1", a = t[1].pos.y - t[1].height / 2), p(s, "x2", f = t[1].pos.x + t[1].width / 2), p(s, "y2", c = t[1].pos.y - t[1].height / 2 + 27), p(s, "stroke", u = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), p(s, "stroke-width", "3px");
    },
    m(m, g) {
      B(m, e, g), B(m, s, g), h || (d = [
        X(e, "mousedown", De(t[10])),
        X(e, "mouseup", De(t[11])),
        X(e, "click", De(t[36]))
      ], h = !0);
    },
    p(m, g) {
      g[0] & 2 && n !== (n = [
        [
          m[1].pos.x + m[1].width / 2 - 24,
          m[1].pos.y - m[1].height / 2 - 4
        ].join(","),
        [
          m[1].pos.x + m[1].width / 2 + 4,
          m[1].pos.y - m[1].height / 2 - 4
        ].join(","),
        [
          m[1].pos.x + m[1].width / 2 + 4,
          m[1].pos.y - m[1].height / 2 + 24
        ].join(",")
      ].join(" ")) && p(e, "points", n), g[0] & 35 && i !== (i = m[5] ? "transparent" : m[1].is_collapsed ? m[1].fill || m[0].nodefill : m[0].bgfill) && p(e, "fill", i), g[0] & 27 && r !== (r = m[3] ? m[0].selectionColor : m[4] ? m[0].highlightColor : m[1].bordercolor || m[0].nodeborder) && p(e, "stroke", r), g[0] & 24 && o !== (o = m[3] || m[4] ? "2px" : "1px") && p(e, "stroke-width", o), g[0] & 2 && l !== (l = m[1].pos.x + m[1].width / 2 - 27) && p(s, "x1", l), g[0] & 2 && a !== (a = m[1].pos.y - m[1].height / 2) && p(s, "y1", a), g[0] & 2 && f !== (f = m[1].pos.x + m[1].width / 2) && p(s, "x2", f), g[0] & 2 && c !== (c = m[1].pos.y - m[1].height / 2 + 27) && p(s, "y2", c), g[0] & 27 && u !== (u = m[3] ? m[0].selectionColor : m[4] ? m[0].highlightColor : m[1].bordercolor || m[0].nodeborder) && p(s, "stroke", u);
    },
    d(m) {
      m && j(e), m && j(s), h = !1, et(d);
    }
  };
}
function $6(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = y1(t[1]) + "", d, m = t[1].label + "", g, _, b, w, v, M, S, R, k, I, L, V, N, W, U = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && h1(t), O = t[1].notes && d1(t), x = t[1].has_dynamic_notes && m1(t), A = t[3] && !t[2].disableEditing && p1(t), H = t[1].badge && b1(t), D = t[1].kind === "node" && !t[2].disableEditing && t[1].children && t[1].children.length > 0 && _1(t);
  return {
    c() {
      var P;
      e = ut("g"), n = ut("rect"), U && U.c(), u = ut("text"), d = le(h), g = le(m), O && O.c(), R = Ze(), x && x.c(), k = Ze(), A && A.c(), I = Ze(), H && H.c(), L = Ze(), D && D.c(), p(n, "x", i = t[1].pos.x - t[1].width / 2), p(n, "y", r = t[1].pos.y - t[1].height / 2), p(n, "width", o = t[1].width), p(n, "height", s = t[1].height), p(n, "fill", l = t[5] ? "transparent" : t[1].fill || t[0].nodefill), p(n, "fill-opacity", 1), p(n, "stroke", a = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), p(n, "stroke-width", f = t[3] || t[4] ? "2px" : "1px"), p(n, "rx", c = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), p(n, "class", "svelte-1td5oib"), p(u, "x", _ = t[1].pos.x - t[1].width / 2 + 30), p(u, "y", b = t[1].pos.y - t[1].height / 2 + t[1].labelheight), p(u, "font-family", w = t[0].font), p(u, "font-weight", v = ((P = t[1].notes) == null ? void 0 : P.length) > 0 ? "700" : "300"), p(u, "font-size", M = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), p(u, "fill", S = t[1].labelcolor || t[0].nodelabelstroke), p(u, "class", "svelte-1td5oib"), p(e, "class", "svelte-1td5oib");
    },
    m(P, K) {
      B(P, e, K), y(e, n), U && U.m(e, null), y(e, u), y(u, d), y(u, g), O && O.m(e, null), y(e, R), x && x.m(e, null), y(e, k), A && A.m(e, null), y(e, I), H && H.m(e, null), y(e, L), D && D.m(e, null), V = !0, N || (W = [
        X(n, "mousedown", De(t[17])),
        X(n, "mouseup", De(t[18])),
        X(n, "click", De(t[16])),
        X(u, "mousedown", De(t[21])),
        X(u, "mouseup", De(t[22])),
        X(u, "click", De(t[14]))
      ], N = !0);
    },
    p(P, K) {
      var ne;
      (!V || K[0] & 2 && i !== (i = P[1].pos.x - P[1].width / 2)) && p(n, "x", i), (!V || K[0] & 2 && r !== (r = P[1].pos.y - P[1].height / 2)) && p(n, "y", r), (!V || K[0] & 2 && o !== (o = P[1].width)) && p(n, "width", o), (!V || K[0] & 2 && s !== (s = P[1].height)) && p(n, "height", s), (!V || K[0] & 35 && l !== (l = P[5] ? "transparent" : P[1].fill || P[0].nodefill)) && p(n, "fill", l), (!V || K[0] & 27 && a !== (a = P[3] ? P[0].selectionColor : P[4] ? P[0].highlightColor : P[1].bordercolor || P[0].nodeborder)) && p(n, "stroke", a), (!V || K[0] & 24 && f !== (f = P[3] || P[4] ? "2px" : "1px")) && p(n, "stroke-width", f), (!V || K[0] & 1 && c !== (c = P[0].nodeborderradius === 0 ? P[0].nodeborderradius : P[0].nodeborderradius || 5)) && p(n, "rx", c), P[1].backgroundImageURL || P[0].nodeBackgroundImageURL ? U ? U.p(P, K) : (U = h1(P), U.c(), U.m(e, u)) : U && (U.d(1), U = null), (!V || K[0] & 2) && h !== (h = y1(P[1]) + "") && Te(d, h), (!V || K[0] & 2) && m !== (m = P[1].label + "") && Te(g, m), (!V || K[0] & 2 && _ !== (_ = P[1].pos.x - P[1].width / 2 + 30)) && p(u, "x", _), (!V || K[0] & 2 && b !== (b = P[1].pos.y - P[1].height / 2 + P[1].labelheight)) && p(u, "y", b), (!V || K[0] & 1 && w !== (w = P[0].font)) && p(u, "font-family", w), (!V || K[0] & 2 && v !== (v = ((ne = P[1].notes) == null ? void 0 : ne.length) > 0 ? "700" : "300")) && p(u, "font-weight", v), (!V || K[0] & 3 && M !== (M = P[1].nodelabelfontsize || P[0].nodelabelfontsize || 16)) && p(u, "font-size", M), (!V || K[0] & 3 && S !== (S = P[1].labelcolor || P[0].nodelabelstroke)) && p(u, "fill", S), P[1].notes ? O ? O.p(P, K) : (O = d1(P), O.c(), O.m(e, R)) : O && (O.d(1), O = null), P[1].has_dynamic_notes ? x ? x.p(P, K) : (x = m1(P), x.c(), x.m(e, k)) : x && (x.d(1), x = null), P[3] && !P[2].disableEditing ? A ? (A.p(P, K), K[0] & 12 && C(A, 1)) : (A = p1(P), A.c(), C(A, 1), A.m(e, I)) : A && (me(), E(A, 1, 1, () => {
        A = null;
      }), pe()), P[1].badge ? H ? H.p(P, K) : (H = b1(P), H.c(), H.m(e, L)) : H && (H.d(1), H = null), P[1].kind === "node" && !P[2].disableEditing && P[1].children && P[1].children.length > 0 ? D ? D.p(P, K) : (D = _1(P), D.c(), D.m(e, null)) : D && (D.d(1), D = null);
    },
    i(P) {
      V || (C(A), V = !0);
    },
    o(P) {
      E(A), V = !1;
    },
    d(P) {
      P && j(e), U && U.d(), O && O.d(), x && x.d(), A && A.d(), H && H.d(), D && D.d(), N = !1, et(W);
    }
  };
}
function y1(t) {
  return t.tags.includes("goal") ? "GOAL: " : t.tags.includes("project") ? "PROJECT: " : "MISC: ";
}
function e8(t) {
  let n = Array.from(t).reduce(
    (i, r) => {
      let o = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[o] = i[o] ?? [], i[o].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return "<table>" + Object.entries(n).map((i) => `<tr><td>${i[0]}</td><td><div style='display: flex'>` + i[1].map((r) => `<div style='background-color: yellow; padding: 2px 4px; border: thin solid black; margin-right: 4px'>${r.label}</div>`).join("") + "</div></td></tr>").join("") + "</table>";
}
function t8(t, e, n) {
  let i;
  const r = Ls();
  let { theme: o } = e, { item: s } = e, { graph: l } = e, { isSelected: a } = e, { isHighlighted: f } = e, { isHidden: c = !1 } = e;
  function u(G) {
    let Ae = parseInt(G.target.getAttribute("data-handle"));
    r("createnode", { from: s, handle: Ae });
  }
  function h(G) {
    let Ae = parseInt(G.target.getAttribute("data-handle"));
    r("itemcontrolmousedown", { source: s, handle: Ae, rawEvent: G });
  }
  function d(G, Ae, ke) {
    return Ae.tags.forEach((ze) => ke.add(ze)), Ae.children.forEach((ze) => {
      d(G, Mn(ze, G), ke);
    }), ke;
  }
  function m(G) {
    jt.call(this, t, G);
  }
  function g(G) {
    jt.call(this, t, G);
  }
  function _(G) {
    jt.call(this, t, G);
  }
  function b(G) {
    jt.call(this, t, G);
  }
  function w(G) {
    jt.call(this, t, G);
  }
  function v(G) {
    jt.call(this, t, G);
  }
  function M(G) {
    jt.call(this, t, G);
  }
  const S = (G) => r("itemMouseDown", { source: s, rawEvent: G }), R = (G) => r("itemMouseUp", { source: s, rawEvent: G }), k = (G) => r("itemMouseDown", { source: s, rawEvent: G }), I = (G) => r("itemMouseUp", { source: s, rawEvent: G }), L = (G) => r("itemMouseDown", { source: s, rawEvent: G }), V = (G) => r("itemMouseUp", { source: s, rawEvent: G }), N = (G) => r("itemMouseDown", {
    source: s,
    rawEvent: G,
    from: { x: G.clientX, y: G.clientY }
  }), W = (G) => r("itemMouseUp", { source: s, rawEvent: G }), U = (G) => r("itemMouseDown", {
    source: s,
    rawEvent: G,
    from: { x: G.clientX, y: G.clientY }
  }), O = (G) => r("itemMouseUp", { source: s, rawEvent: G }), x = (G) => r("itemMouseDown", { source: s, rawEvent: G }), A = (G) => r("itemMouseUp", { source: s, rawEvent: G }), H = (G) => r("itemBadgeClick", { source: s, rawEvent: G }), D = (G) => r("itemMouseDown", { source: s, rawEvent: G }), P = (G) => r("itemMouseUp", { source: s, rawEvent: G }), K = (G) => r("itemBadgeClick", { source: s, rawEvent: G }), ne = (G) => r("itemMouseDown", { source: s, rawEvent: G }), z = (G) => r("itemMouseUp", { source: s, rawEvent: G }), Z = (G) => r("itemBadgeClick", { source: s, rawEvent: G }), te = (G) => r("itemCollapserClick", { source: s, rawEvent: G });
  return t.$$set = (G) => {
    "theme" in G && n(0, o = G.theme), "item" in G && n(1, s = G.item), "graph" in G && n(2, l = G.graph), "isSelected" in G && n(3, a = G.isSelected), "isHighlighted" in G && n(4, f = G.isHighlighted), "isHidden" in G && n(5, c = G.isHidden);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 6 && n(6, i = e8(d(l, s, /* @__PURE__ */ new Set())));
  }, [
    o,
    s,
    l,
    a,
    f,
    c,
    i,
    r,
    u,
    h,
    m,
    g,
    _,
    b,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    L,
    V,
    N,
    W,
    U,
    O,
    x,
    A,
    H,
    D,
    P,
    K,
    ne,
    z,
    Z,
    te
  ];
}
class n8 extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      t8,
      $6,
      It,
      {
        theme: 0,
        item: 1,
        graph: 2,
        isSelected: 3,
        isHighlighted: 4,
        isHidden: 5
      },
      null,
      [-1, -1]
    );
  }
}
function w1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g = t[0].label.length > 0 && v1(t);
  return {
    c() {
      e = ut("text"), n = ut("textPath"), i = le(`➤
			`), g && g.c(), p(n, "href", r = `#edgepathmain${t[0].id}`), p(n, "startOffset", o = t[0].label.length > 0 ? "20%" : "50%"), p(n, "lengthAdjust", "spacingAndGlyphs"), p(n, "font-family", "Verdana"), p(n, "font-size", "20"), p(n, "start", ""), p(n, "fill", s = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(n, "stroke", l = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(n, "stroke-width", a = t[0].weight || 5), p(n, "style", f = `--hoverColor: ${t[1].theme.selectionColor}`), p(n, "class", "svelte-18y4spp"), p(e, "font-family", c = t[1].theme.font), p(e, "class", "arrowhead svelte-18y4spp"), p(e, "font-size", "20"), p(e, "fill", u = t[0].stroke), p(e, "style", h = `--hoverColor: ${t[1].theme.selectionColor}`);
    },
    m(_, b) {
      B(_, e, b), y(e, n), y(n, i), g && g.m(e, null), d || (m = [
        X(n, "mousedown", De(t[28])),
        X(n, "mouseup", De(t[29])),
        X(n, "click", De(t[15])),
        X(e, "mousedown", De(t[32])),
        X(e, "mouseup", De(t[33])),
        X(e, "click", De(t[13]))
      ], d = !0);
    },
    p(_, b) {
      b[0] & 1 && r !== (r = `#edgepathmain${_[0].id}`) && p(n, "href", r), b[0] & 1 && o !== (o = _[0].label.length > 0 ? "20%" : "50%") && p(n, "startOffset", o), b[0] & 7 && s !== (s = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && p(n, "fill", s), b[0] & 7 && l !== (l = _[2] ? _[1].theme.selectionColor : _[0].stroke || _[1].theme.edgestroke) && p(n, "stroke", l), b[0] & 1 && a !== (a = _[0].weight || 5) && p(n, "stroke-width", a), b[0] & 2 && f !== (f = `--hoverColor: ${_[1].theme.selectionColor}`) && p(n, "style", f), _[0].label.length > 0 ? g ? g.p(_, b) : (g = v1(_), g.c(), g.m(e, null)) : g && (g.d(1), g = null), b[0] & 2 && c !== (c = _[1].theme.font) && p(e, "font-family", c), b[0] & 1 && u !== (u = _[0].stroke) && p(e, "fill", u), b[0] & 2 && h !== (h = `--hoverColor: ${_[1].theme.selectionColor}`) && p(e, "style", h);
    },
    d(_) {
      _ && j(e), g && g.d(), d = !1, et(m);
    }
  };
}
function v1(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = ut("textPath"), n = le(`➤
				`), p(e, "href", i = `#edgepathmain${t[0].id}`), p(e, "startOffset", "80%"), p(e, "lengthAdjust", "spacingAndGlyphs"), p(e, "font-family", "Verdana"), p(e, "font-size", "20"), p(e, "start", ""), p(e, "fill", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(e, "stroke", o = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(e, "stroke-width", s = t[0].weight || 5), p(e, "style", l = `--hoverColor: ${t[1].theme.selectionColor}`), p(e, "class", "svelte-18y4spp");
    },
    m(c, u) {
      B(c, e, u), y(e, n), a || (f = [
        X(e, "mousedown", De(t[30])),
        X(e, "mouseup", De(t[31])),
        X(e, "click", De(t[14]))
      ], a = !0);
    },
    p(c, u) {
      u[0] & 1 && i !== (i = `#edgepathmain${c[0].id}`) && p(e, "href", i), u[0] & 7 && r !== (r = c[2] ? c[1].theme.selectionColor : c[0].stroke || c[1].theme.edgestroke) && p(e, "fill", r), u[0] & 7 && o !== (o = c[2] ? c[1].theme.selectionColor : c[0].stroke || c[1].theme.edgestroke) && p(e, "stroke", o), u[0] & 1 && s !== (s = c[0].weight || 5) && p(e, "stroke-width", s), u[0] & 2 && l !== (l = `--hoverColor: ${c[1].theme.selectionColor}`) && p(e, "style", l);
    },
    d(c) {
      c && j(e), a = !1, et(f);
    }
  };
}
function k1(t) {
  let e, n;
  return e = new Sp({
    props: {
      kind: "cross",
      data: "from",
      x: t[5].x,
      y: t[5].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32 && (o.x = i[5].x), r[0] & 32 && (o.y = i[5].y), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function C1(t) {
  let e, n;
  return e = new Sp({
    props: {
      kind: "cross",
      data: "to",
      x: t[4].x,
      y: t[4].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16 && (o.x = i[4].x), r[0] & 16 && (o.y = i[4].y), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function i8(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g = t[0].label + "", _, b, w, v, M, S, R, k, I, L, V, N, W, U = t[0].directed && w1(t), O = t[2] && t[5] && !t[1].disableEditing && k1(t), x = t[2] && t[4] && !t[1].disableEditing && C1(t);
  return {
    c() {
      e = ut("g"), n = ut("path"), f = ut("path"), d = ut("text"), m = ut("textPath"), _ = le(g), U && U.c(), I = Ze(), O && O.c(), L = Ze(), x && x.c(), p(n, "d", i = t[7](t[1])), p(n, "fill", "none"), p(n, "stroke", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(n, "stroke-width", o = t[0].weight || 5), p(n, "class", "edgePath svelte-18y4spp"), p(n, "id", s = `edgepathmain${t[0].id}`), p(n, "stroke-dasharray", l = S1(t[0].strokeType || t[1].theme.edgestroketype)), p(n, "style", a = `--hoverColor: ${t[1].theme.selectionColor}`), p(f, "d", c = t[7](t[1])), p(f, "fill", "none"), p(f, "stroke", "transparent"), p(f, "stroke-width", u = t[0].weight || 5), p(f, "transform", t[3]), p(f, "id", h = `edgepath${t[0].id}`), p(f, "class", "svelte-18y4spp"), p(m, "href", b = `#edgepath${t[0].id}`), p(m, "startOffset", "40%"), p(m, "lengthAdjust", "spacingAndGlyphs"), p(m, "font-family", "Verdana"), p(m, "font-size", "20"), p(m, "fill", w = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(m, "stroke", v = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), p(m, "style", M = `--hoverColor: ${t[1].theme.selectionColor}`), p(m, "class", "svelte-18y4spp"), p(d, "font-family", S = t[1].theme.font), p(d, "font-size", "20"), p(d, "fill", R = t[0].stroke), p(d, "style", k = `--hoverColor: ${t[1].theme.selectionColor}`), p(d, "class", "svelte-18y4spp"), p(e, "class", "svelte-18y4spp");
    },
    m(A, H) {
      B(A, e, H), y(e, n), y(e, f), y(e, d), y(d, m), y(m, _), U && U.m(e, null), y(e, I), O && O.m(e, null), y(e, L), x && x.m(e, null), V = !0, N || (W = [
        X(n, "mousedown", De(t[20])),
        X(n, "mouseup", De(t[21])),
        X(n, "click", De(t[19])),
        X(f, "mousedown", De(t[22])),
        X(f, "mouseup", De(t[23])),
        X(f, "click", De(t[18])),
        X(m, "mousedown", De(t[24])),
        X(m, "mouseup", De(t[25])),
        X(m, "click", De(t[17])),
        X(d, "mousedown", De(t[26])),
        X(d, "mouseup", De(t[27])),
        X(d, "click", De(t[16]))
      ], N = !0);
    },
    p(A, H) {
      (!V || H[0] & 2 && i !== (i = A[7](A[1]))) && p(n, "d", i), (!V || H[0] & 7 && r !== (r = A[2] ? A[1].theme.selectionColor : A[0].stroke || A[1].theme.edgestroke)) && p(n, "stroke", r), (!V || H[0] & 1 && o !== (o = A[0].weight || 5)) && p(n, "stroke-width", o), (!V || H[0] & 1 && s !== (s = `edgepathmain${A[0].id}`)) && p(n, "id", s), (!V || H[0] & 3 && l !== (l = S1(A[0].strokeType || A[1].theme.edgestroketype))) && p(n, "stroke-dasharray", l), (!V || H[0] & 2 && a !== (a = `--hoverColor: ${A[1].theme.selectionColor}`)) && p(n, "style", a), (!V || H[0] & 2 && c !== (c = A[7](A[1]))) && p(f, "d", c), (!V || H[0] & 1 && u !== (u = A[0].weight || 5)) && p(f, "stroke-width", u), (!V || H[0] & 8) && p(f, "transform", A[3]), (!V || H[0] & 1 && h !== (h = `edgepath${A[0].id}`)) && p(f, "id", h), (!V || H[0] & 1) && g !== (g = A[0].label + "") && Te(_, g), (!V || H[0] & 1 && b !== (b = `#edgepath${A[0].id}`)) && p(m, "href", b), (!V || H[0] & 7 && w !== (w = A[2] ? A[1].theme.selectionColor : A[0].stroke || A[1].theme.edgestroke)) && p(m, "fill", w), (!V || H[0] & 7 && v !== (v = A[2] ? A[1].theme.selectionColor : A[0].stroke || A[1].theme.edgestroke)) && p(m, "stroke", v), (!V || H[0] & 2 && M !== (M = `--hoverColor: ${A[1].theme.selectionColor}`)) && p(m, "style", M), (!V || H[0] & 2 && S !== (S = A[1].theme.font)) && p(d, "font-family", S), (!V || H[0] & 1 && R !== (R = A[0].stroke)) && p(d, "fill", R), (!V || H[0] & 2 && k !== (k = `--hoverColor: ${A[1].theme.selectionColor}`)) && p(d, "style", k), A[0].directed ? U ? U.p(A, H) : (U = w1(A), U.c(), U.m(e, I)) : U && (U.d(1), U = null), A[2] && A[5] && !A[1].disableEditing ? O ? (O.p(A, H), H[0] & 38 && C(O, 1)) : (O = k1(A), O.c(), C(O, 1), O.m(e, L)) : O && (me(), E(O, 1, 1, () => {
        O = null;
      }), pe()), A[2] && A[4] && !A[1].disableEditing ? x ? (x.p(A, H), H[0] & 22 && C(x, 1)) : (x = C1(A), x.c(), C(x, 1), x.m(e, null)) : x && (me(), E(x, 1, 1, () => {
        x = null;
      }), pe());
    },
    i(A) {
      V || (C(O), C(x), V = !0);
    },
    o(A) {
      E(O), E(x), V = !1;
    },
    d(A) {
      A && j(e), U && U.d(), O && O.d(), x && x.d(), N = !1, et(W);
    }
  };
}
function S1(t) {
  return t === "dashed" ? "8,5" : t === "dotted" ? "5,5" : !1;
}
function r8(t, e, n) {
  let i, r, o, s, l, a, f;
  const c = Ls();
  let { item: u } = e, { graph: h } = e, { isSelected: d } = e;
  function m(z) {
    let Z = u.shape || z.theme.edgeshape;
    if (Z === "straight")
      return `M ${l.x},${l.y} L ${a.x},${a.y}`;
    if (Z === "curved") {
      let te = {
        x: o.pos.x + 30,
        y: o.pos.y + 30
      }, G = {
        x: s.pos.x - 30,
        y: s.pos.y - 30
      };
      return [
        `M ${l.x},${l.y}`,
        "C",
        `${te.x},${te.y}`,
        `${G.x},${G.y}`,
        `${a.x},${a.y}`
      ].join(" ");
    } else if (Z === "ortho")
      return `M ${l.x},${l.y} h ${(a.x - l.x) / 2} v ${a.y - l.y} L ${a.x},${a.y}`;
  }
  function g(z) {
    z.target.getAttribute("data-handle"), c("edgeChanged", { source: u });
  }
  function _(z, Z) {
    let te = (z.pos.x + Z.pos.x) / 2, G = (z.pos.y + Z.pos.y) / 2, Ae = Math.atan2(Z.pos.y - z.pos.y, Z.pos.x - z.pos.x) * 180 / Math.PI;
    return Ae < -90 || Ae > 90 ? `translate(0, -6) rotate(180, ${te}, ${G})` : "translate(0, -6) rotate(0)";
  }
  function b(z) {
    jt.call(this, t, z);
  }
  function w(z) {
    jt.call(this, t, z);
  }
  function v(z) {
    jt.call(this, t, z);
  }
  function M(z) {
    jt.call(this, t, z);
  }
  function S(z) {
    jt.call(this, t, z);
  }
  function R(z) {
    jt.call(this, t, z);
  }
  function k(z) {
    jt.call(this, t, z);
  }
  const I = (z) => c("itemMouseDown", { source: u, rawEvent: z }), L = (z) => c("itemMouseUp", { source: u, rawEvent: z }), V = (z) => c("itemMouseDown", { source: u, rawEvent: z }), N = (z) => c("itemMouseUp", { source: u, rawEvent: z }), W = (z) => c("itemMouseDown", { source: u, rawEvent: z }), U = (z) => c("itemMouseUp", { source: u, rawEvent: z }), O = (z) => c("itemMouseDown", { source: u, rawEvent: z }), x = (z) => c("itemMouseUp", { source: u, rawEvent: z }), A = (z) => c("itemMouseDown", { source: u, rawEvent: z }), H = (z) => c("itemMouseUp", { source: u, rawEvent: z }), D = (z) => c("itemMouseDown", { source: u, rawEvent: z }), P = (z) => c("itemMouseUp", { source: u, rawEvent: z }), K = (z) => c("itemMouseDown", { source: u, rawEvent: z }), ne = (z) => c("itemMouseUp", { source: u, rawEvent: z });
  return t.$$set = (z) => {
    "item" in z && n(0, u = z.item), "graph" in z && n(1, h = z.graph), "isSelected" in z && n(2, d = z.isSelected);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(12, i = u.fromOrphan || Mn(u.fromId, h)), t.$$.dirty[0] & 3 && n(11, r = u.toOrphan || Mn(u.toId, h)), t.$$.dirty[0] & 4098 && n(10, o = gl(i, h) || i), t.$$.dirty[0] & 2050 && n(9, s = gl(r, h) || r), t.$$.dirty[0] & 1024 && n(5, l = o && { x: o.pos.x, y: o.pos.y }), t.$$.dirty[0] & 512 && n(4, a = s && { x: s.pos.x, y: s.pos.y }), t.$$.dirty[0] & 1536 && n(3, f = o && s && _(o, s));
  }, [
    u,
    h,
    d,
    f,
    a,
    l,
    c,
    m,
    g,
    s,
    o,
    r,
    i,
    b,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    L,
    V,
    N,
    W,
    U,
    O,
    x,
    A,
    H,
    D,
    P,
    K,
    ne
  ];
}
class o8 extends Be {
  constructor(e) {
    super(), je(this, e, r8, i8, It, { item: 0, graph: 1, isSelected: 2 }, null, [-1, -1]);
  }
}
function M1(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function A1(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function O1(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function s8(t) {
  let e, n, i = t[1], r = [];
  for (let l = 0; l < i.length; l += 1)
    r[l] = T1(A1(t, i, l));
  let o = t[2], s = [];
  for (let l = 0; l < o.length; l += 1)
    s[l] = E1(M1(t, o, l));
  return {
    c() {
      for (let l = 0; l < r.length; l += 1)
        r[l].c();
      e = q();
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      n = Ze();
    },
    m(l, a) {
      for (let f = 0; f < r.length; f += 1)
        r[f].m(l, a);
      B(l, e, a);
      for (let f = 0; f < s.length; f += 1)
        s[f].m(l, a);
      B(l, n, a);
    },
    p(l, a) {
      if (a & 2) {
        i = l[1];
        let f;
        for (f = 0; f < i.length; f += 1) {
          const c = A1(l, i, f);
          r[f] ? r[f].p(c, a) : (r[f] = T1(c), r[f].c(), r[f].m(e.parentNode, e));
        }
        for (; f < r.length; f += 1)
          r[f].d(1);
        r.length = i.length;
      }
      if (a & 4) {
        o = l[2];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const c = M1(l, o, f);
          s[f] ? s[f].p(c, a) : (s[f] = E1(c), s[f].c(), s[f].m(n.parentNode, n));
        }
        for (; f < s.length; f += 1)
          s[f].d(1);
        s.length = o.length;
      }
    },
    d(l) {
      zt(r, l), l && j(e), zt(s, l), l && j(n);
    }
  };
}
function l8(t) {
  let e, n = t[1], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = P1(O1(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = Ze();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, o) {
      if (o & 2) {
        n = r[1];
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = O1(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = P1(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      zt(i, r), r && j(e);
    }
  };
}
function T1(t) {
  let e;
  return {
    c() {
      e = ut("circle"), p(e, "r", 100 + t[3]), p(e, "stroke", "black"), p(e, "fill", "none"), p(e, "opacity", "0.6");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function E1(t) {
  let e;
  return {
    c() {
      e = ut("line"), p(e, "x1", -5e3 * Math.cos(t[6])), p(e, "y1", -5e3 * Math.sin(t[6])), p(e, "x2", 5e3 * Math.cos(t[6])), p(e, "y2", 5e3 * Math.sin(t[6])), p(e, "class", "svelte-19wjlzj");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function P1(t) {
  let e, n, i;
  return {
    c() {
      e = ut("line"), n = q(), i = ut("line"), p(e, "x1", "0"), p(e, "y1", 0 + t[3]), p(e, "x2", 5e3), p(e, "y2", 0 + t[3]), p(e, "class", "svelte-19wjlzj"), p(i, "x1", 0 + t[3]), p(i, "y1", "0"), p(i, "x2", 0 + t[3]), p(i, "y2", "5000"), p(i, "class", "svelte-19wjlzj");
    },
    m(r, o) {
      B(r, e, o), B(r, n, o), B(r, i, o);
    },
    p: fe,
    d(r) {
      r && j(e), r && j(n), r && j(i);
    }
  };
}
function a8(t) {
  let e;
  function n(o, s) {
    if (o[0] === "cartesian")
      return l8;
    if (o[0] === "polar")
      return s8;
  }
  let i = n(t), r = i && i(t);
  return {
    c() {
      r && r.c(), e = Ze();
    },
    m(o, s) {
      r && r.m(o, s), B(o, e, s);
    },
    p(o, [s]) {
      i === (i = n(o)) && r ? r.p(o, s) : (r && r.d(1), r = i && i(o), r && (r.c(), r.m(e.parentNode, e)));
    },
    i: fe,
    o: fe,
    d(o) {
      r && r.d(o), o && j(e);
    }
  };
}
function f8(t, e, n) {
  let i = [...Array(50).keys()].map((s) => s * 100), r = [0, 30, 60, 90, 120, 150].map((s) => s * Math.PI / 180), { kind: o } = e;
  return t.$$set = (s) => {
    "kind" in s && n(0, o = s.kind);
  }, [o, i, r];
}
class c8 extends Be {
  constructor(e) {
    super(), je(this, e, f8, a8, It, { kind: 0 });
  }
}
function R1(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = ut("image"), p(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), p(e, "height", i = t[1].height), p(e, "width", r = t[1].width), p(e, "preserveAspectRatio", "none"), p(e, "x", o = t[1].pos.x - t[1].width / 2), p(e, "y", s = t[1].pos.y - t[1].height / 2);
    },
    m(f, c) {
      B(f, e, c), l || (a = [
        X(e, "mousedown", De(t[10])),
        X(e, "mouseup", De(t[11])),
        X(e, "click", De(t[6]))
      ], l = !0);
    },
    p(f, c) {
      c & 3 && n !== (n = f[1].backgroundImageURL || f[0].nodeBackgroundImageURL) && p(e, "href", n), c & 2 && i !== (i = f[1].height) && p(e, "height", i), c & 2 && r !== (r = f[1].width) && p(e, "width", r), c & 2 && o !== (o = f[1].pos.x - f[1].width / 2) && p(e, "x", o), c & 2 && s !== (s = f[1].pos.y - f[1].height / 2) && p(e, "y", s);
    },
    d(f) {
      f && j(e), l = !1, et(a);
    }
  };
}
function I1(t) {
  let e, n, i = t[1].notes + "", r, o, s, l, a, f, c, u, h;
  return {
    c() {
      e = ut("foreignObject"), n = T("div"), r = le(i), p(n, "class", "foreign-obj-div svelte-3cf8cd"), p(e, "x", o = t[1].pos.x - t[1].noteswidth / 2), p(e, "y", s = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), p(e, "font-family", l = t[0].font), p(e, "font-weight", "300"), p(e, "font-size", a = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), p(e, "width", f = t[1].noteswidth), p(e, "height", c = t[1].notesheight);
    },
    m(d, m) {
      B(d, e, m), y(e, n), y(n, r), u || (h = [
        X(e, "mousedown", De(t[14])),
        X(e, "mouseup", De(t[15])),
        X(e, "click", De(t[4]))
      ], u = !0);
    },
    p(d, m) {
      m & 2 && i !== (i = d[1].notes + "") && Te(r, i), m & 2 && o !== (o = d[1].pos.x - d[1].noteswidth / 2) && p(e, "x", o), m & 2 && s !== (s = d[1].pos.y - d[1].height / 2 + d[1].labelheight + 10) && p(e, "y", s), m & 1 && l !== (l = d[0].font) && p(e, "font-family", l), m & 3 && a !== (a = d[1].nodenotesfontsize || d[0].nodenotesfontsize || 16) && p(e, "font-size", a), m & 2 && f !== (f = d[1].noteswidth) && p(e, "width", f), m & 2 && c !== (c = d[1].notesheight) && p(e, "height", c);
    },
    d(d) {
      d && j(e), u = !1, et(h);
    }
  };
}
function u8(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = t[1].label + "", d, m, g, _, b, w, v, M, S, R = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && R1(t), k = t[1].notes && I1(t);
  return {
    c() {
      var I;
      e = ut("g"), n = ut("rect"), R && R.c(), u = ut("text"), d = le(h), k && k.c(), p(n, "x", i = t[1].pos.x - t[1].width / 2), p(n, "y", r = t[1].pos.y - t[1].height / 2), p(n, "width", o = t[1].width), p(n, "height", s = t[1].height), p(n, "fill", l = t[1].fill || t[0].nodefill), p(n, "fill-opacity", 1), p(n, "stroke", a = t[2] ? t[0].selectionColor : t[1].bordercolor || t[0].nodeborder), p(n, "stroke-width", f = t[2] ? "6px" : "3px"), p(n, "rx", c = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), p(n, "class", "svelte-3cf8cd"), p(u, "x", m = t[1].pos.x - t[1].width / 2 + 30), p(u, "y", g = t[1].pos.y - t[1].height / 2 + 20), p(u, "font-family", _ = t[0].font), p(u, "font-weight", b = ((I = t[1].notes) == null ? void 0 : I.length) > 0 ? "700" : "300"), p(u, "font-size", w = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), p(u, "fill", v = t[1].labelcolor || t[0].nodelabelstroke), p(u, "class", "svelte-3cf8cd"), p(e, "class", "svelte-3cf8cd");
    },
    m(I, L) {
      B(I, e, L), y(e, n), R && R.m(e, null), y(e, u), y(u, d), k && k.m(e, null), M || (S = [
        X(n, "mousedown", De(t[8])),
        X(n, "mouseup", De(t[9])),
        X(n, "click", De(t[7])),
        X(u, "mousedown", De(t[12])),
        X(u, "mouseup", De(t[13])),
        X(u, "click", De(t[5]))
      ], M = !0);
    },
    p(I, [L]) {
      var V;
      L & 2 && i !== (i = I[1].pos.x - I[1].width / 2) && p(n, "x", i), L & 2 && r !== (r = I[1].pos.y - I[1].height / 2) && p(n, "y", r), L & 2 && o !== (o = I[1].width) && p(n, "width", o), L & 2 && s !== (s = I[1].height) && p(n, "height", s), L & 3 && l !== (l = I[1].fill || I[0].nodefill) && p(n, "fill", l), L & 7 && a !== (a = I[2] ? I[0].selectionColor : I[1].bordercolor || I[0].nodeborder) && p(n, "stroke", a), L & 4 && f !== (f = I[2] ? "6px" : "3px") && p(n, "stroke-width", f), L & 1 && c !== (c = I[0].nodeborderradius === 0 ? I[0].nodeborderradius : I[0].nodeborderradius || 5) && p(n, "rx", c), I[1].backgroundImageURL || I[0].nodeBackgroundImageURL ? R ? R.p(I, L) : (R = R1(I), R.c(), R.m(e, u)) : R && (R.d(1), R = null), L & 2 && h !== (h = I[1].label + "") && Te(d, h), L & 2 && m !== (m = I[1].pos.x - I[1].width / 2 + 30) && p(u, "x", m), L & 2 && g !== (g = I[1].pos.y - I[1].height / 2 + 20) && p(u, "y", g), L & 1 && _ !== (_ = I[0].font) && p(u, "font-family", _), L & 2 && b !== (b = ((V = I[1].notes) == null ? void 0 : V.length) > 0 ? "700" : "300") && p(u, "font-weight", b), L & 3 && w !== (w = I[1].nodelabelfontsize || I[0].nodelabelfontsize || 16) && p(u, "font-size", w), L & 3 && v !== (v = I[1].labelcolor || I[0].nodelabelstroke) && p(u, "fill", v), I[1].notes ? k ? k.p(I, L) : (k = I1(I), k.c(), k.m(e, null)) : k && (k.d(1), k = null);
    },
    i: fe,
    o: fe,
    d(I) {
      I && j(e), R && R.d(), k && k.d(), M = !1, et(S);
    }
  };
}
function h8(t, e, n) {
  const i = Ls();
  let { theme: r } = e, { item: o } = e, { isSelected: s } = e;
  function l(v) {
    jt.call(this, t, v);
  }
  function a(v) {
    jt.call(this, t, v);
  }
  function f(v) {
    jt.call(this, t, v);
  }
  function c(v) {
    jt.call(this, t, v);
  }
  const u = (v) => i("itemMouseDown", { source: o, rawEvent: v }), h = (v) => i("itemMouseUp", { source: o, rawEvent: v }), d = (v) => i("itemMouseDown", { source: o, rawEvent: v }), m = (v) => i("itemMouseUp", { source: o, rawEvent: v }), g = (v) => i("itemMouseDown", { source: o, rawEvent: v }), _ = (v) => i("itemMouseUp", { source: o, rawEvent: v }), b = (v) => i("itemMouseDown", {
    source: o,
    rawEvent: v,
    from: { x: v.clientX, y: v.clientY }
  }), w = (v) => i("itemMouseUp", { source: o, rawEvent: v });
  return t.$$set = (v) => {
    "theme" in v && n(0, r = v.theme), "item" in v && n(1, o = v.item), "isSelected" in v && n(2, s = v.isSelected);
  }, [
    r,
    o,
    s,
    i,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w
  ];
}
class d8 extends Be {
  constructor(e) {
    super(), je(this, e, h8, u8, It, { theme: 0, item: 1, isSelected: 2 });
  }
}
function Qn(t, e = !!p8("debug")) {
  if (e) {
    const n = g8(t);
    return function(...r) {
      console.log(`%c${t}`, `color:${n}`, ...r);
    };
  } else
    return m8;
}
function m8() {
}
function p8(t) {
  try {
    if (typeof window < "u" && typeof window.localStorage < "u")
      return window.localStorage[t];
  } catch {
  }
}
function g8(t) {
  let e = 0;
  for (let n = 0; n < t.length; n++)
    e = (e << 5) - e + t.charCodeAt(n), e |= 0;
  return N1[Math.abs(e) % N1.length];
}
const N1 = [
  "#0000CC",
  "#0099FF",
  "#009400",
  "#8dd200",
  "#CCCC00",
  "#CC9933",
  "#ae04e7",
  "#ff35d7",
  "#FF3333",
  "#FF6600",
  "#FF9933",
  "#FFCC33"
];
function b8(t, { delay: e = 0, duration: n = 400, easing: i = dk } = {}) {
  const r = +getComputedStyle(t).opacity;
  return {
    delay: e,
    duration: n,
    easing: i,
    css: (o) => `opacity: ${o * r}`
  };
}
const { window: _8 } = Gu;
function D1(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w = t[1].closeButton && j1(t);
  var v = t[2];
  function M(S) {
    return {};
  }
  return v && (s = Ur(v, M())), {
    c() {
      e = T("div"), n = T("div"), i = T("div"), w && w.c(), r = q(), o = T("div"), s && se(s.$$.fragment), p(o, "class", l = cn(t[1].classContent) + " svelte-n7cvum"), p(o, "style", t[9]), de(o, "content", !t[0]), p(i, "class", a = cn(t[1].classWindow) + " svelte-n7cvum"), p(i, "role", "dialog"), p(i, "aria-modal", "true"), p(i, "aria-label", f = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null), p(i, "aria-labelledby", c = t[1].ariaLabelledBy || null), p(i, "style", t[8]), de(i, "window", !t[0]), p(n, "class", h = cn(t[1].classWindowWrap) + " svelte-n7cvum"), p(n, "style", t[7]), de(n, "wrap", !t[0]), p(e, "class", d = cn(t[1].classBg) + " svelte-n7cvum"), p(e, "style", t[6]), de(e, "bg", !t[0]);
    },
    m(S, R) {
      B(S, e, R), y(e, n), y(n, i), w && w.m(i, null), y(i, r), y(i, o), s && re(s, o, null), t[49](i), t[50](n), t[51](e), g = !0, _ || (b = [
        X(i, "introstart", function() {
          Gn(t[13]) && t[13].apply(this, arguments);
        }),
        X(i, "outrostart", function() {
          Gn(t[14]) && t[14].apply(this, arguments);
        }),
        X(i, "introend", function() {
          Gn(t[15]) && t[15].apply(this, arguments);
        }),
        X(i, "outroend", function() {
          Gn(t[16]) && t[16].apply(this, arguments);
        }),
        X(e, "mousedown", t[20]),
        X(e, "mouseup", t[21])
      ], _ = !0);
    },
    p(S, R) {
      if (t = S, t[1].closeButton ? w ? (w.p(t, R), R[0] & 2 && C(w, 1)) : (w = j1(t), w.c(), C(w, 1), w.m(i, r)) : w && (me(), E(w, 1, 1, () => {
        w = null;
      }), pe()), v !== (v = t[2])) {
        if (s) {
          me();
          const k = s;
          E(k.$$.fragment, 1, 0, () => {
            oe(k, 1);
          }), pe();
        }
        v ? (s = Ur(v, M()), se(s.$$.fragment), C(s.$$.fragment, 1), re(s, o, null)) : s = null;
      }
      (!g || R[0] & 2 && l !== (l = cn(t[1].classContent) + " svelte-n7cvum")) && p(o, "class", l), (!g || R[0] & 512) && p(o, "style", t[9]), (!g || R[0] & 3) && de(o, "content", !t[0]), (!g || R[0] & 2 && a !== (a = cn(t[1].classWindow) + " svelte-n7cvum")) && p(i, "class", a), (!g || R[0] & 2 && f !== (f = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null)) && p(i, "aria-label", f), (!g || R[0] & 2 && c !== (c = t[1].ariaLabelledBy || null)) && p(i, "aria-labelledby", c), (!g || R[0] & 256) && p(i, "style", t[8]), (!g || R[0] & 3) && de(i, "window", !t[0]), (!g || R[0] & 2 && h !== (h = cn(t[1].classWindowWrap) + " svelte-n7cvum")) && p(n, "class", h), (!g || R[0] & 128) && p(n, "style", t[7]), (!g || R[0] & 3) && de(n, "wrap", !t[0]), (!g || R[0] & 2 && d !== (d = cn(t[1].classBg) + " svelte-n7cvum")) && p(e, "class", d), (!g || R[0] & 64) && p(e, "style", t[6]), (!g || R[0] & 3) && de(e, "bg", !t[0]);
    },
    i(S) {
      g || (C(w), s && C(s.$$.fragment, S), ml(() => {
        u || (u = Of(i, t[12], t[1].transitionWindowProps, !0)), u.run(1);
      }), ml(() => {
        m || (m = Of(e, t[11], t[1].transitionBgProps, !0)), m.run(1);
      }), g = !0);
    },
    o(S) {
      E(w), s && E(s.$$.fragment, S), u || (u = Of(i, t[12], t[1].transitionWindowProps, !1)), u.run(0), m || (m = Of(e, t[11], t[1].transitionBgProps, !1)), m.run(0), g = !1;
    },
    d(S) {
      S && j(e), w && w.d(), s && oe(s), t[49](null), S && u && u.end(), t[50](null), t[51](null), S && m && m.end(), _ = !1, et(b);
    }
  };
}
function j1(t) {
  let e, n, i, r, o;
  const s = [w8, y8], l = [];
  function a(f, c) {
    return c[0] & 2 && (e = null), e == null && (e = !!f[17](f[1].closeButton)), e ? 0 : 1;
  }
  return n = a(t, [-1, -1, -1]), i = l[n] = s[n](t), {
    c() {
      i.c(), r = Ze();
    },
    m(f, c) {
      l[n].m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      let u = n;
      n = a(f, c), n === u ? l[n].p(f, c) : (me(), E(l[u], 1, 1, () => {
        l[u] = null;
      }), pe(), i = l[n], i ? i.p(f, c) : (i = l[n] = s[n](f), i.c()), C(i, 1), i.m(r.parentNode, r));
    },
    i(f) {
      o || (C(i), o = !0);
    },
    o(f) {
      E(i), o = !1;
    },
    d(f) {
      l[n].d(f), f && j(r);
    }
  };
}
function y8(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("button"), p(e, "class", n = cn(t[1].classCloseButton) + " svelte-n7cvum"), p(e, "aria-label", "Close modal"), p(e, "style", t[10]), p(e, "type", "button"), de(e, "close", !t[0]);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "click", t[18]), i = !0);
    },
    p(o, s) {
      s[0] & 2 && n !== (n = cn(o[1].classCloseButton) + " svelte-n7cvum") && p(e, "class", n), s[0] & 1024 && p(e, "style", o[10]), s[0] & 3 && de(e, "close", !o[0]);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function w8(t) {
  let e, n, i;
  var r = t[1].closeButton;
  function o(s) {
    return { props: { onClose: s[18] } };
  }
  return r && (e = Ur(r, o(t))), {
    c() {
      e && se(e.$$.fragment), n = Ze();
    },
    m(s, l) {
      e && re(e, s, l), B(s, n, l), i = !0;
    },
    p(s, l) {
      if (r !== (r = s[1].closeButton)) {
        if (e) {
          me();
          const a = e;
          E(a.$$.fragment, 1, 0, () => {
            oe(a, 1);
          }), pe();
        }
        r ? (e = Ur(r, o(s)), se(e.$$.fragment), C(e.$$.fragment, 1), re(e, n.parentNode, n)) : e = null;
      }
    },
    i(s) {
      i || (e && C(e.$$.fragment, s), i = !0);
    },
    o(s) {
      e && E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(n), e && oe(e, s);
    }
  };
}
function v8(t) {
  let e, n, i, r, o = t[2] && D1(t);
  const s = t[48].default, l = An(s, t, t[47], null);
  return {
    c() {
      o && o.c(), e = q(), l && l.c();
    },
    m(a, f) {
      o && o.m(a, f), B(a, e, f), l && l.m(a, f), n = !0, i || (r = X(_8, "keydown", t[19]), i = !0);
    },
    p(a, f) {
      a[2] ? o ? (o.p(a, f), f[0] & 4 && C(o, 1)) : (o = D1(a), o.c(), C(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), pe()), l && l.p && (!n || f[1] & 65536) && Tn(
        l,
        s,
        a,
        a[47],
        n ? On(s, a[47], f, null) : En(a[47]),
        null
      );
    },
    i(a) {
      n || (C(o), C(l, a), n = !0);
    },
    o(a) {
      E(o), E(l, a), n = !1;
    },
    d(a) {
      o && o.d(a), a && j(e), l && l.d(a), i = !1, r();
    }
  };
}
function Ak(t, e = {}) {
  return function(i) {
    return new t({
      ...i,
      props: { ...e, ...i.props }
    });
  };
}
function k8(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const o = Ls(), s = wk, l = (Q) => Q.tabIndex >= 0 && !Q.hidden && !Q.disabled && Q.style.display !== "none" && Q.type !== "hidden" && Boolean(Q.offsetWidth || Q.offsetHeight || Q.getClientRects().length);
  let { isTabbable: a = l } = e, { show: f = null } = e, { key: c = "simple-modal" } = e, { ariaLabel: u = null } = e, { ariaLabelledBy: h = null } = e, { closeButton: d = !0 } = e, { closeOnEsc: m = !0 } = e, { closeOnOuterClick: g = !0 } = e, { styleBg: _ = {} } = e, { styleWindowWrap: b = {} } = e, { styleWindow: w = {} } = e, { styleContent: v = {} } = e, { styleCloseButton: M = {} } = e, { classBg: S = null } = e, { classWindowWrap: R = null } = e, { classWindow: k = null } = e, { classContent: I = null } = e, { classCloseButton: L = null } = e, { unstyled: V = !1 } = e, { setContext: N = s } = e, { transitionBg: W = b8 } = e, { transitionBgProps: U = { duration: 250 } } = e, { transitionWindow: O = W } = e, { transitionWindowProps: x = U } = e, { disableFocusTrap: A = !1 } = e;
  const H = {
    ariaLabel: u,
    ariaLabelledBy: h,
    closeButton: d,
    closeOnEsc: m,
    closeOnOuterClick: g,
    styleBg: _,
    styleWindowWrap: b,
    styleWindow: w,
    styleContent: v,
    styleCloseButton: M,
    classBg: S,
    classWindowWrap: R,
    classWindow: k,
    classContent: I,
    classCloseButton: L,
    transitionBg: W,
    transitionBgProps: U,
    transitionWindow: O,
    transitionWindowProps: x,
    disableFocusTrap: A,
    isTabbable: a,
    unstyled: V
  };
  let D = { ...H }, P = null, K, ne, z, Z, te, G, Ae, ke, ze, ee, we, tt, ge, ie, ve;
  const Xe = (Q) => Q.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(), he = (Q) => Q ? Object.keys(Q).reduce((ye, at) => `${ye}; ${Xe(at)}: ${Q[at]}`, "") : "", Ve = (Q) => !!(Q && Q.constructor && Q.call && Q.apply), Ie = () => {
    n(6, te = he(Object.assign(
      {},
      {
        width: window.innerWidth,
        height: window.innerHeight
      },
      D.styleBg
    ))), n(7, G = he(D.styleWindowWrap)), n(8, Ae = he(D.styleWindow)), n(9, ke = he(D.styleContent)), n(10, ze = he(D.styleCloseButton)), n(11, ee = D.transitionBg), n(12, we = D.transitionWindow);
  }, qe = () => {
  };
  let ct = qe, yt = qe, Fe = qe, Oe = qe;
  const ae = (Q, ye = {}, at = {}, pt = {}) => {
    n(2, P = Ak(Q, ye)), n(1, D = { ...H, ...at }), Ie(), Yn(), n(13, ct = (Wt) => {
      pt.onOpen && pt.onOpen(Wt), o("open"), o("opening");
    }), n(14, yt = (Wt) => {
      pt.onClose && pt.onClose(Wt), o("close"), o("closing");
    }), n(15, Fe = (Wt) => {
      pt.onOpened && pt.onOpened(Wt), o("opened");
    }), n(16, Oe = (Wt) => {
      pt.onClosed && pt.onClosed(Wt), o("closed");
    });
  }, xe = (Q = {}) => {
    P && (n(14, yt = Q.onClose || yt), n(16, Oe = Q.onClosed || Oe), n(2, P = null), nt());
  }, ht = (Q) => {
    if (D.closeOnEsc && P && Q.key === "Escape" && (Q.preventDefault(), xe()), P && Q.key === "Tab" && !D.disableFocusTrap) {
      const ye = z.querySelectorAll("*"), at = Array.from(ye).filter(D.isTabbable).sort((Wt, Ot) => Wt.tabIndex - Ot.tabIndex);
      let pt = at.indexOf(document.activeElement);
      pt === -1 && Q.shiftKey && (pt = 0), pt += at.length + (Q.shiftKey ? -1 : 1), pt %= at.length, at[pt].focus(), Q.preventDefault();
    }
  }, ft = (Q) => {
    D.closeOnOuterClick && (Q.target === K || Q.target === ne) && (ve = Q.target);
  }, _n = (Q) => {
    D.closeOnOuterClick && Q.target === ve && (Q.preventDefault(), xe());
  }, Yn = () => {
    Z = window.scrollY, tt = document.body.style.position, ge = document.body.style.overflow, ie = document.body.style.width, document.body.style.position = "fixed", document.body.style.top = `-${Z}px`, document.body.style.overflow = "hidden", document.body.style.width = "100%";
  }, nt = () => {
    document.body.style.position = tt || "", document.body.style.top = "", document.body.style.overflow = ge || "", document.body.style.width = ie || "", window.scrollTo(0, Z);
  };
  N(c, { open: ae, close: xe });
  let Dt = !1;
  qr(() => {
    Dt && xe();
  }), zi(() => {
    n(46, Dt = !0);
  });
  function yi(Q) {
    mt[Q ? "unshift" : "push"](() => {
      z = Q, n(5, z);
    });
  }
  function Zn(Q) {
    mt[Q ? "unshift" : "push"](() => {
      ne = Q, n(4, ne);
    });
  }
  function Vt(Q) {
    mt[Q ? "unshift" : "push"](() => {
      K = Q, n(3, K);
    });
  }
  return t.$$set = (Q) => {
    "isTabbable" in Q && n(22, a = Q.isTabbable), "show" in Q && n(23, f = Q.show), "key" in Q && n(24, c = Q.key), "ariaLabel" in Q && n(25, u = Q.ariaLabel), "ariaLabelledBy" in Q && n(26, h = Q.ariaLabelledBy), "closeButton" in Q && n(27, d = Q.closeButton), "closeOnEsc" in Q && n(28, m = Q.closeOnEsc), "closeOnOuterClick" in Q && n(29, g = Q.closeOnOuterClick), "styleBg" in Q && n(30, _ = Q.styleBg), "styleWindowWrap" in Q && n(31, b = Q.styleWindowWrap), "styleWindow" in Q && n(32, w = Q.styleWindow), "styleContent" in Q && n(33, v = Q.styleContent), "styleCloseButton" in Q && n(34, M = Q.styleCloseButton), "classBg" in Q && n(35, S = Q.classBg), "classWindowWrap" in Q && n(36, R = Q.classWindowWrap), "classWindow" in Q && n(37, k = Q.classWindow), "classContent" in Q && n(38, I = Q.classContent), "classCloseButton" in Q && n(39, L = Q.classCloseButton), "unstyled" in Q && n(0, V = Q.unstyled), "setContext" in Q && n(40, N = Q.setContext), "transitionBg" in Q && n(41, W = Q.transitionBg), "transitionBgProps" in Q && n(42, U = Q.transitionBgProps), "transitionWindow" in Q && n(43, O = Q.transitionWindow), "transitionWindowProps" in Q && n(44, x = Q.transitionWindowProps), "disableFocusTrap" in Q && n(45, A = Q.disableFocusTrap), "$$scope" in Q && n(47, r = Q.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8388608 | t.$$.dirty[1] & 32768 && Dt && (Ve(f) ? ae(f) : xe());
  }, [
    V,
    D,
    P,
    K,
    ne,
    z,
    te,
    G,
    Ae,
    ke,
    ze,
    ee,
    we,
    ct,
    yt,
    Fe,
    Oe,
    Ve,
    xe,
    ht,
    ft,
    _n,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    L,
    N,
    W,
    U,
    O,
    x,
    A,
    Dt,
    r,
    i,
    yi,
    Zn,
    Vt
  ];
}
class Ok extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      k8,
      v8,
      It,
      {
        isTabbable: 22,
        show: 23,
        key: 24,
        ariaLabel: 25,
        ariaLabelledBy: 26,
        closeButton: 27,
        closeOnEsc: 28,
        closeOnOuterClick: 29,
        styleBg: 30,
        styleWindowWrap: 31,
        styleWindow: 32,
        styleContent: 33,
        styleCloseButton: 34,
        classBg: 35,
        classWindowWrap: 36,
        classWindow: 37,
        classContent: 38,
        classCloseButton: 39,
        unstyled: 0,
        setContext: 40,
        transitionBg: 41,
        transitionBgProps: 42,
        transitionWindow: 43,
        transitionWindowProps: 44,
        disableFocusTrap: 45
      },
      null,
      [-1, -1, -1]
    );
  }
}
var ni;
(function(t) {
  t.text = "text", t.tree = "tree", t.table = "table";
})(ni || (ni = {}));
var Ht;
(function(t) {
  t.after = "after", t.inside = "inside", t.key = "key", t.value = "value", t.multi = "multi";
})(Ht || (Ht = {}));
var ar;
(function(t) {
  t.after = "after", t.key = "key", t.value = "value", t.inside = "inside";
})(ar || (ar = {}));
var Fo;
(function(t) {
  t.info = "info", t.warning = "warning", t.error = "error";
})(Fo || (Fo = {}));
var dr;
(function(t) {
  t.key = "key", t.value = "value";
})(dr || (dr = {}));
var Ji;
(function(t) {
  t.asc = "asc", t.desc = "desc";
})(Ji || (Ji = {}));
const Yd = 300, Tk = 300, B1 = 300, C8 = 300, L1 = 50, S8 = 200, M8 = 400, A8 = 1200, Zd = 1e3, Aa = 100, el = 100, Uc = 2e4, x1 = 50, z1 = 50, Os = [{ start: 0, end: Aa }], O8 = 100 * 1024 * 1024, T8 = 1024 * 1024, $d = 10 * 1024 * 1024, Ek = 10 * 1024, Ts = {
  closeButton: !1,
  classBg: "jse-modal-bg",
  classWindow: "jse-modal-window",
  classWindowWrap: "jse-modal-window-wrap",
  classContent: "jse-modal-content"
}, E8 = {
  ...Ts,
  classWindow: "jse-modal-window jse-modal-window-sort"
}, P8 = {
  ...Ts,
  classWindow: "jse-modal-window jse-modal-window-transform"
}, V1 = {
  ...Ts,
  classWindow: "jse-modal-window jse-modal-window-jsoneditor"
}, Mp = "Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value", Ap = "Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)", co = "hover-insert-inside", Oa = "hover-insert-after", em = "hover-collection", Yh = "valid", F1 = "repairable", R8 = "invalid", oo = (40 + 2) * 8, so = 260, ks = {
  NO: "NO",
  SELF: "SELF",
  NEXT_INSIDE: "NEXT_INSIDE"
}, I8 = {
  [Ji.asc]: "ascending",
  [Ji.desc]: "descending"
};
let H1 = 0;
function ma() {
  return H1++, H1;
}
function Ho(t) {
  return Ho = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Ho(t);
}
function xt(t) {
  return Array.isArray(t);
}
function bn(t) {
  return t !== null && Ho(t) === "object" && t.constructor === Object;
}
function Pk(t) {
  return t && Ho(t) === "object" ? t.op === "add" : !1;
}
function Rk(t) {
  return t && Ho(t) === "object" ? t.op === "remove" : !1;
}
function Op(t) {
  return t && Ho(t) === "object" ? t.op === "replace" : !1;
}
function tm(t) {
  return t && Ho(t) === "object" ? t.op === "copy" : !1;
}
function bl(t) {
  return t && Ho(t) === "object" ? t.op === "move" : !1;
}
function nm(t) {
  return nm = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, nm(t);
}
function N8(t, e) {
  return JSON.stringify(t) === JSON.stringify(e);
}
function D8(t, e) {
  return t === e;
}
function Ik(t) {
  return t.slice(0, t.length - 1);
}
function j8(t) {
  return t[t.length - 1];
}
function B8(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : D8;
  if (t.length < e.length)
    return !1;
  for (var i = 0; i < e.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function Nk(t) {
  return nm(t) === "object" && t !== null;
}
function W1(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(t);
    e && (i = i.filter(function(r) {
      return Object.getOwnPropertyDescriptor(t, r).enumerable;
    })), n.push.apply(n, i);
  }
  return n;
}
function L8(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? W1(Object(n), !0).forEach(function(i) {
      x8(t, i, n[i]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : W1(Object(n)).forEach(function(i) {
      Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(n, i));
    });
  }
  return t;
}
function x8(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
function Tp(t) {
  if (xt(t)) {
    var e = t.slice();
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      e[i] = t[i];
    }), e;
  } else if (bn(t)) {
    var n = L8({}, t);
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      n[i] = t[i];
    }), n;
  } else
    return t;
}
function Ep(t, e, n) {
  if (t[e] === n)
    return t;
  var i = Tp(t);
  return i[e] = n, i;
}
function Le(t, e) {
  for (var n = t, i = 0; i < e.length; )
    bn(n) ? n = n[e[i]] : xt(n) ? n = n[parseInt(e[i])] : n = void 0, i++;
  return n;
}
function or(t, e, n) {
  var i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
  if (e.length === 0)
    return n;
  var r = e[0], o = or(t ? t[r] : void 0, e.slice(1), n, i);
  if (bn(t) || xt(t))
    return Ep(t, r, o);
  if (i) {
    var s = z8.test(r) ? [] : {};
    return s[r] = o, s;
  } else
    throw new Error("Path does not exist");
}
var z8 = /^\d+$/;
function Dk(t, e, n) {
  if (e.length === 0)
    return n(t);
  if (!Nk(t))
    throw new Error("Path doesn't exist");
  var i = e[0], r = Dk(t[i], e.slice(1), n);
  return Ep(t, i, r);
}
function Pp(t, e) {
  if (e.length === 0)
    return t;
  if (!Nk(t))
    throw new Error("Path does not exist");
  if (e.length === 1) {
    var n = e[0];
    if (n in t) {
      var i = Tp(t);
      return xt(i) && i.splice(parseInt(n), 1), bn(i) && delete i[n], i;
    } else
      return t;
  }
  var r = e[0], o = Pp(t[r], e.slice(1));
  return Ep(t, r, o);
}
function Rp(t, e, n) {
  var i = e.slice(0, e.length - 1), r = e[e.length - 1];
  return Dk(t, i, function(o) {
    if (!Array.isArray(o))
      throw new TypeError("Array expected at path " + JSON.stringify(i));
    var s = Tp(o);
    return s.splice(parseInt(r), 0, n), s;
  });
}
function Ki(t, e) {
  return t === void 0 ? !1 : e.length === 0 ? !0 : t === null ? !1 : Ki(t[e[0]], e.slice(1));
}
function gr(t) {
  var e = t.split("/");
  return e.shift(), e.map(function(n) {
    return n.replace(/~1/g, "/").replace(/~0/g, "~");
  });
}
function Se(t) {
  return t.map(jk).join("");
}
function jk(t) {
  return "/" + String(t).replace(/~/g, "~0").replace(/\//g, "~1");
}
function im(t, e) {
  return t + jk(e);
}
function _l(t, e) {
  return t.startsWith(e) && (t.length === e.length || t[e.length] === "/");
}
function mr(t, e, n) {
  for (var i = t, r = 0; r < e.length; r++) {
    K8(e[r]);
    var o = e[r];
    if (n && n.before) {
      var s = n.before(i, o);
      if (s !== void 0) {
        if (s.document !== void 0 && (i = s.document), s.json !== void 0)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
        s.operation !== void 0 && (o = s.operation);
      }
    }
    var l = i, a = Br(i, o.path);
    if (o.op === "add")
      i = H8(i, a, o.value);
    else if (o.op === "remove")
      i = F8(i, a);
    else if (o.op === "replace")
      i = V8(i, a, o.value);
    else if (o.op === "copy")
      i = W8(i, a, rm(o.from));
    else if (o.op === "move")
      i = U8(i, a, rm(o.from));
    else if (o.op === "test")
      q8(i, a, o.value);
    else
      throw new Error("Unknown JSONPatch operation " + JSON.stringify(o));
    if (n && n.after) {
      var f = n.after(i, o, l);
      f !== void 0 && (i = f);
    }
  }
  return i;
}
function V8(t, e, n) {
  return or(t, e, n);
}
function F8(t, e) {
  return Pp(t, e);
}
function H8(t, e, n) {
  return sf(t, e) ? Rp(t, e, n) : or(t, e, n);
}
function W8(t, e, n) {
  var i = Le(t, n);
  if (sf(t, e))
    return Rp(t, e, i);
  var r = Le(t, n);
  return or(t, e, r);
}
function U8(t, e, n) {
  var i = Le(t, n), r = Pp(t, n);
  return sf(r, e) ? Rp(r, e, i) : or(r, e, i);
}
function q8(t, e, n) {
  if (n === void 0)
    throw new Error('Test failed: no value provided (path: "'.concat(Se(e), '")'));
  if (!Ki(t, e))
    throw new Error('Test failed: path not found (path: "'.concat(Se(e), '")'));
  var i = Le(t, e);
  if (!N8(i, n))
    throw new Error('Test failed, value differs (path: "'.concat(Se(e), '")'));
}
function sf(t, e) {
  if (e.length === 0)
    return !1;
  var n = Le(t, Ik(e));
  return Array.isArray(n);
}
function J8(t, e) {
  if (j8(e) !== "-")
    return e;
  var n = Ik(e), i = Le(t, n);
  return n.concat(i.length);
}
function K8(t) {
  var e = ["add", "remove", "replace", "copy", "move", "test"];
  if (!e.includes(t.op))
    throw new Error("Unknown JSONPatch op " + JSON.stringify(t.op));
  if (typeof t.path != "string")
    throw new Error('Required property "path" missing or not a string in operation ' + JSON.stringify(t));
  if ((t.op === "copy" || t.op === "move") && typeof t.from != "string")
    throw new Error('Required property "from" missing or not a string in operation ' + JSON.stringify(t));
}
function Br(t, e) {
  return J8(t, gr(e));
}
function rm(t) {
  return gr(t);
}
function G8(t) {
  return Z8(t) || Y8(t) || Q8(t) || X8();
}
function X8() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function Q8(t, e) {
  if (t) {
    if (typeof t == "string")
      return om(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    if (n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set")
      return Array.from(t);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
      return om(t, e);
  }
}
function Y8(t) {
  if (typeof Symbol < "u" && t[Symbol.iterator] != null || t["@@iterator"] != null)
    return Array.from(t);
}
function Z8(t) {
  if (Array.isArray(t))
    return om(t);
}
function om(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, i = new Array(e); n < e; n++)
    i[n] = t[n];
  return i;
}
function Bk(t, e, n) {
  var i = [];
  return mr(t, e, {
    before: function(o, s) {
      var l, a = Br(o, s.path);
      if (s.op === "add")
        l = zk(o, a);
      else if (s.op === "remove")
        l = xk(o, a);
      else if (s.op === "replace")
        l = Lk(o, a);
      else if (s.op === "copy")
        l = $8(o, a);
      else if (s.op === "move")
        l = eM(o, a, rm(s.from));
      else if (s.op === "test")
        l = [];
      else
        throw new Error("Unknown JSONPatch operation " + JSON.stringify(s));
      var f;
      if (n && n.before) {
        var c = n.before(o, s, l);
        if (c && c.revertOperations && (l = c.revertOperations), c && c.document && (f = c.document), c && c.json)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
      }
      if (i = l.concat(i), f !== void 0)
        return {
          document: f
        };
    }
  }), i;
}
function Lk(t, e) {
  return [{
    op: "replace",
    path: Se(e),
    value: Le(t, e)
  }];
}
function xk(t, e) {
  return [{
    op: "add",
    path: Se(e),
    value: Le(t, e)
  }];
}
function zk(t, e) {
  return sf(t, e) || !Ki(t, e) ? [{
    op: "remove",
    path: Se(e)
  }] : Lk(t, e);
}
function $8(t, e) {
  return zk(t, e);
}
function eM(t, e, n) {
  if (e.length < n.length && B8(n, e))
    return [{
      op: "replace",
      path: Se(e),
      value: t
    }];
  var i = {
    op: "move",
    from: Se(e),
    path: Se(n)
  };
  return !sf(t, e) && Ki(t, e) ? [i].concat(G8(xk(t, e))) : [i];
}
var Yu = {}, U1 = {
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	",
  '"': '"',
  "/": "/",
  "\\": "\\"
}, tM = "a".charCodeAt();
Yu.parse = function(t, e, n) {
  var i = {}, r = 0, o = 0, s = 0, l = n && n.bigint && typeof BigInt < "u";
  return {
    data: a("", !0),
    pointers: i
  };
  function a(L, V) {
    f();
    var N;
    v(L, "value");
    var W = g();
    switch (W) {
      case "t":
        m("rue"), N = !0;
        break;
      case "f":
        m("alse"), N = !1;
        break;
      case "n":
        m("ull"), N = null;
        break;
      case '"':
        N = c();
        break;
      case "[":
        N = h(L);
        break;
      case "{":
        N = d(L);
        break;
      default:
        _(), "-0123456789".indexOf(W) >= 0 ? N = u() : R();
    }
    return v(L, "valueEnd"), f(), V && s < t.length && R(), N;
  }
  function f() {
    e:
      for (; s < t.length; ) {
        switch (t[s]) {
          case " ":
            o++;
            break;
          case "	":
            o += 4;
            break;
          case "\r":
            o = 0;
            break;
          case `
`:
            o = 0, r++;
            break;
          default:
            break e;
        }
        s++;
      }
  }
  function c() {
    for (var L = "", V; V = g(), V != '"'; )
      V == "\\" ? (V = g(), V in U1 ? L += U1[V] : V == "u" ? L += b() : k()) : L += V;
    return L;
  }
  function u() {
    var L = "", V = !0;
    t[s] == "-" && (L += g()), L += t[s] == "0" ? g() : w(), t[s] == "." && (L += g() + w(), V = !1), (t[s] == "e" || t[s] == "E") && (L += g(), (t[s] == "+" || t[s] == "-") && (L += g()), L += w(), V = !1);
    var N = +L;
    return l && V && (N > Number.MAX_SAFE_INTEGER || N < Number.MIN_SAFE_INTEGER) ? BigInt(L) : N;
  }
  function h(L) {
    f();
    var V = [], N = 0;
    if (g() == "]")
      return V;
    for (_(); ; ) {
      var W = L + "/" + N;
      V.push(a(W)), f();
      var U = g();
      if (U == "]")
        break;
      U != "," && k(), f(), N++;
    }
    return V;
  }
  function d(L) {
    f();
    var V = {};
    if (g() == "}")
      return V;
    for (_(); ; ) {
      var N = S();
      g() != '"' && k();
      var W = c(), U = L + "/" + sm(W);
      M(U, "key", N), v(U, "keyEnd"), f(), g() != ":" && k(), f(), V[W] = a(U), f();
      var O = g();
      if (O == "}")
        break;
      O != "," && k(), f();
    }
    return V;
  }
  function m(L) {
    for (var V = 0; V < L.length; V++)
      g() !== L[V] && k();
  }
  function g() {
    I();
    var L = t[s];
    return s++, o++, L;
  }
  function _() {
    s--, o--;
  }
  function b() {
    for (var L = 4, V = 0; L--; ) {
      V <<= 4;
      var N = g().toLowerCase();
      N >= "a" && N <= "f" ? V += N.charCodeAt() - tM + 10 : N >= "0" && N <= "9" ? V += +N : k();
    }
    return String.fromCharCode(V);
  }
  function w() {
    for (var L = ""; t[s] >= "0" && t[s] <= "9"; )
      L += g();
    if (L.length)
      return L;
    I(), R();
  }
  function v(L, V) {
    M(L, V, S());
  }
  function M(L, V, N) {
    i[L] = i[L] || {}, i[L][V] = N;
  }
  function S() {
    return {
      line: r,
      column: o,
      pos: s
    };
  }
  function R() {
    throw new SyntaxError("Unexpected token " + t[s] + " in JSON at position " + s);
  }
  function k() {
    _(), R();
  }
  function I() {
    if (s >= t.length)
      throw new SyntaxError("Unexpected end of JSON input");
  }
};
Yu.stringify = function(t, e, n) {
  if (!Tf(t))
    return;
  var i = 0, r, o, s = typeof n == "object" ? n.space : n;
  switch (typeof s) {
    case "number":
      var l = s > 10 ? 10 : s < 0 ? 0 : Math.floor(s);
      s = l && M(l, " "), r = l, o = l;
      break;
    case "string":
      s = s.slice(0, 10), r = 0, o = 0;
      for (var a = 0; a < s.length; a++) {
        var f = s[a];
        switch (f) {
          case " ":
            o++;
            break;
          case "	":
            o += 4;
            break;
          case "\r":
            o = 0;
            break;
          case `
`:
            o = 0, i++;
            break;
          default:
            throw new Error("whitespace characters not allowed in JSON");
        }
        r++;
      }
      break;
    default:
      s = void 0;
  }
  var c = "", u = {}, h = 0, d = 0, m = 0, g = n && n.es6 && typeof Map == "function";
  return _(t, 0, ""), {
    json: c,
    pointers: u
  };
  function _(S, R, k) {
    switch (v(k, "value"), typeof S) {
      case "number":
      case "bigint":
      case "boolean":
        b("" + S);
        break;
      case "string":
        b(Ef(S));
        break;
      case "object":
        S === null ? b("null") : typeof S.toJSON == "function" ? b(Ef(S.toJSON())) : Array.isArray(S) ? I() : g ? S.constructor.BYTES_PER_ELEMENT ? I() : S instanceof Map ? V() : S instanceof Set ? V(!0) : L() : L();
    }
    v(k, "valueEnd");
    function I() {
      if (S.length) {
        b("[");
        for (var N = R + 1, W = 0; W < S.length; W++) {
          W && b(","), w(N);
          var U = Tf(S[W]) ? S[W] : null, O = k + "/" + W;
          _(U, N, O);
        }
        w(R), b("]");
      } else
        b("[]");
    }
    function L() {
      var N = Object.keys(S);
      if (N.length) {
        b("{");
        for (var W = R + 1, U = 0; U < N.length; U++) {
          var O = N[U], x = S[O];
          if (Tf(x)) {
            U && b(",");
            var A = k + "/" + sm(O);
            w(W), v(A, "key"), b(Ef(O)), v(A, "keyEnd"), b(":"), s && b(" "), _(x, W, A);
          }
        }
        w(R), b("}");
      } else
        b("{}");
    }
    function V(N) {
      if (S.size) {
        b("{");
        for (var W = R + 1, U = !0, O = S.entries(), x = O.next(); !x.done; ) {
          var A = x.value, H = A[0], D = N ? !0 : A[1];
          if (Tf(D)) {
            U || b(","), U = !1;
            var P = k + "/" + sm(H);
            w(W), v(P, "key"), b(Ef(H)), v(P, "keyEnd"), b(":"), s && b(" "), _(D, W, P);
          }
          x = O.next();
        }
        w(R), b("}");
      } else
        b("{}");
    }
  }
  function b(S) {
    d += S.length, m += S.length, c += S;
  }
  function w(S) {
    if (s) {
      for (c += `
` + M(S, s), h++, d = 0; S--; )
        i ? (h += i, d = o) : d += o, m += r;
      m += 1;
    }
  }
  function v(S, R) {
    u[S] = u[S] || {}, u[S][R] = {
      line: h,
      column: d,
      pos: m
    };
  }
  function M(S, R) {
    return Array(S + 1).join(R);
  }
};
var nM = ["number", "bigint", "boolean", "string", "object"];
function Tf(t) {
  return nM.indexOf(typeof t) >= 0;
}
var iM = /"|\\/g, rM = /[\b]/g, oM = /\f/g, sM = /\n/g, lM = /\r/g, aM = /\t/g;
function Ef(t) {
  return t = t.replace(iM, "\\$&").replace(oM, "\\f").replace(rM, "\\b").replace(sM, "\\n").replace(lM, "\\r").replace(aM, "\\t"), '"' + t + '"';
}
var fM = /~/g, cM = /\//g;
function sm(t) {
  return t.replace(fM, "~0").replace(cM, "~1");
}
function lm(t) {
  return lm = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, lm(t);
}
function q1(t, e) {
  for (var n = 0; n < e.length; n++) {
    var i = e[n];
    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
  }
}
function uM(t, e, n) {
  return e && q1(t.prototype, e), n && q1(t, n), Object.defineProperty(t, "prototype", { writable: !1 }), t;
}
function hM(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function dM(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Ta(t, e);
}
function mM(t) {
  var e = Vk();
  return function() {
    var i = Ea(t), r;
    if (e) {
      var o = Ea(this).constructor;
      r = Reflect.construct(i, arguments, o);
    } else
      r = i.apply(this, arguments);
    return pM(this, r);
  };
}
function pM(t, e) {
  if (e && (lm(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return gM(t);
}
function gM(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
function am(t) {
  var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return am = function(i) {
    if (i === null || !bM(i))
      return i;
    if (typeof i != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof e < "u") {
      if (e.has(i))
        return e.get(i);
      e.set(i, r);
    }
    function r() {
      return yc(i, arguments, Ea(this).constructor);
    }
    return r.prototype = Object.create(i.prototype, { constructor: { value: r, enumerable: !1, writable: !0, configurable: !0 } }), Ta(r, i);
  }, am(t);
}
function yc(t, e, n) {
  return Vk() ? yc = Reflect.construct.bind() : yc = function(r, o, s) {
    var l = [null];
    l.push.apply(l, o);
    var a = Function.bind.apply(r, l), f = new a();
    return s && Ta(f, s.prototype), f;
  }, yc.apply(null, arguments);
}
function Vk() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function bM(t) {
  return Function.toString.call(t).indexOf("[native code]") !== -1;
}
function Ta(t, e) {
  return Ta = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(i, r) {
    return i.__proto__ = r, i;
  }, Ta(t, e);
}
function Ea(t) {
  return Ea = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(n) {
    return n.__proto__ || Object.getPrototypeOf(n);
  }, Ea(t);
}
var So = /* @__PURE__ */ function(t) {
  dM(n, t);
  var e = mM(n);
  function n(i, r) {
    var o;
    return hM(this, n), o = e.call(this, i + " at position " + r), o.position = r, o;
  }
  return uM(n);
}(/* @__PURE__ */ am(Error)), Pf = 92, Zh = 47, _M = 42, J1 = 123, $h = 125, K1 = 91, ed = 93, yM = 40, wM = 41, vM = 32, Ip = 10, Fk = 9, Hk = 13, kM = 8, CM = 12, wc = 34, G1 = 43, X1 = 45, SM = 39, Np = 48, MM = 49, Dp = 57, Rf = 44, AM = 46, OM = 58, TM = 59, EM = 65, PM = 97, RM = 69, IM = 101, NM = 70, DM = 102, jM = 160, BM = 8192, LM = 8202, xM = 8239, zM = 8287, VM = 12288, FM = 8220, HM = 8221, WM = 8216, UM = 8217, qM = 96, JM = 180;
function If(t) {
  return t >= Np && t < Dp || t >= EM && t <= NM || t >= PM && t <= DM;
}
function Nf(t) {
  return t >= Np && t <= Dp;
}
function KM(t) {
  return t >= MM && t <= Dp;
}
function GM(t) {
  return t >= 32 && t <= 1114111;
}
function XM(t) {
  return QM.test(t) || t && Jc(t.charCodeAt(0));
}
var QM = /^[,:[\]{}()\n]$/;
function Q1(t) {
  return YM.test(t) || t && Jc(t.charCodeAt(0));
}
var YM = /^[[{\w-]$/;
function ZM(t) {
  return t === Ip || t === Hk || t === Fk || t === kM || t === CM;
}
function qc(t) {
  return t === vM || t === Ip || t === Fk || t === Hk;
}
function $M(t) {
  return t === jM || t >= BM && t <= LM || t === xM || t === zM || t === VM;
}
function Jc(t) {
  return Wk(t) || fm(t);
}
function Wk(t) {
  return t === wc || t === FM || t === HM;
}
function fm(t) {
  return t === SM || t === WM || t === UM || t === qM || t === JM;
}
function Ql(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, i = t.lastIndexOf(e);
  return i !== -1 ? t.substring(0, i) + (n ? "" : t.substring(i + 1)) : t;
}
function fs(t, e) {
  var n = t.length;
  if (!qc(t.charCodeAt(n - 1)))
    return t + e;
  for (; qc(t.charCodeAt(n - 1)); )
    n--;
  return t.substring(0, n) + e + t.substring(n);
}
function eA(t, e, n) {
  return t.substring(0, e) + t.substring(e + n);
}
function tA(t) {
  return /[,\n][ \t\r]*$/.test(t);
}
var nA = {
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, iA = {
  '"': '"',
  "\\": "\\",
  "/": "/",
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	"
};
function Lr(t) {
  var e = 0, n = "", i = o();
  i || I();
  var r = f(Rf);
  if (r && s(), Q1(t[e]) && tA(n) ? (r || (n = fs(n, ",")), m()) : r && (n = Ql(n, ",")), e >= t.length)
    return n;
  k();
  function o() {
    s();
    var O = h() || d() || g() || b() || w() || M();
    return s(), O;
  }
  function s() {
    var O = e, x = l();
    do
      x = a(), x && (x = l());
    while (x);
    return e > O;
  }
  function l() {
    for (var O = "", x; (x = qc(t.charCodeAt(e))) || $M(t.charCodeAt(e)); )
      x ? O += t[e] : O += " ", e++;
    return O.length > 0 ? (n += O, !0) : !1;
  }
  function a() {
    if (t.charCodeAt(e) === Zh && t.charCodeAt(e + 1) === _M) {
      for (; e < t.length && !rA(t, e); )
        e++;
      return e += 2, !0;
    }
    if (t.charCodeAt(e) === Zh && t.charCodeAt(e + 1) === Zh) {
      for (; e < t.length && t.charCodeAt(e) !== Ip; )
        e++;
      return !0;
    }
    return !1;
  }
  function f(O) {
    return t.charCodeAt(e) === O ? (n += t[e], e++, !0) : !1;
  }
  function c(O) {
    return t.charCodeAt(e) === O ? (e++, !0) : !1;
  }
  function u() {
    return c(Pf);
  }
  function h() {
    if (t.charCodeAt(e) === J1) {
      n += "{", e++, s();
      for (var O = !0; e < t.length && t.charCodeAt(e) !== $h; ) {
        var x = void 0;
        O ? (x = !0, O = !1) : (x = f(Rf), x || (n = fs(n, ",")), s());
        var A = g() || M();
        if (!A) {
          t.charCodeAt(e) === $h || t.charCodeAt(e) === J1 || t.charCodeAt(e) === ed || t.charCodeAt(e) === K1 || t[e] === void 0 ? n = Ql(n, ",") : L();
          break;
        }
        s();
        var H = f(OM);
        H || (Q1(t[e]) ? n = fs(n, ":") : N());
        var D = o();
        D || (H ? V() : N());
      }
      return t.charCodeAt(e) === $h ? (n += "}", e++) : n = fs(n, "}"), !0;
    }
    return !1;
  }
  function d() {
    if (t.charCodeAt(e) === K1) {
      n += "[", e++, s();
      for (var O = !0; e < t.length && t.charCodeAt(e) !== ed; ) {
        if (O)
          O = !1;
        else {
          var x = f(Rf);
          x || (n = fs(n, ","));
        }
        var A = o();
        if (!A) {
          n = Ql(n, ",");
          break;
        }
      }
      return t.charCodeAt(e) === ed ? (n += "]", e++) : n = fs(n, "]"), !0;
    }
    return !1;
  }
  function m() {
    for (var O = !0, x = !0; x; ) {
      if (O)
        O = !1;
      else {
        var A = f(Rf);
        A || (n = fs(n, ","));
      }
      x = o();
    }
    x || (n = Ql(n, ",")), n = `[
`.concat(n, `
]`);
  }
  function g() {
    var O = t.charCodeAt(e) === Pf;
    if (O && (e++, O = !0), Jc(t.charCodeAt(e))) {
      var x = fm(t.charCodeAt(e)) ? fm : Wk;
      for (t.charCodeAt(e), n += '"', e++; e < t.length && !x(t.charCodeAt(e)); ) {
        if (t.charCodeAt(e) === Pf) {
          var A = t[e + 1], H = iA[A];
          H !== void 0 ? (n += t.slice(e, e + 2), e += 2) : A === "u" ? If(t.charCodeAt(e + 2)) && If(t.charCodeAt(e + 3)) && If(t.charCodeAt(e + 4)) && If(t.charCodeAt(e + 5)) ? (n += t.slice(e, e + 6), e += 6) : W(e) : (n += A, e += 2);
        } else {
          var D = t[e], P = t.charCodeAt(e);
          P === wc && t.charCodeAt(e - 1) !== Pf ? (n += "\\" + D, e++) : ZM(P) ? (n += nA[D], e++) : (GM(P) || R(D), n += D, e++);
        }
        O && u();
      }
      return Jc(t.charCodeAt(e)) ? (t.charCodeAt(e), n += '"', e++) : n += '"', _(), !0;
    }
    return !1;
  }
  function _() {
    var O = !1;
    for (s(); t.charCodeAt(e) === G1; ) {
      O = !0, e++, s(), n = Ql(n, '"', !0);
      var x = n.length;
      g(), n = eA(n, x, 1);
    }
    return O;
  }
  function b() {
    var O = e;
    if (t.charCodeAt(e) === X1 && (e++, S(O)), t.charCodeAt(e) === Np)
      e++;
    else if (KM(t.charCodeAt(e)))
      for (e++; Nf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === AM)
      for (e++, S(O); Nf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === IM || t.charCodeAt(e) === RM)
      for (e++, (t.charCodeAt(e) === X1 || t.charCodeAt(e) === G1) && e++, S(O); Nf(t.charCodeAt(e)); )
        e++;
    return e > O ? (n += t.slice(O, e), !0) : !1;
  }
  function w() {
    return v("true", "true") || v("false", "false") || v("null", "null") || v("True", "true") || v("False", "false") || v("None", "null");
  }
  function v(O, x) {
    return t.slice(e, e + O.length) === O ? (n += x, e += O.length, !0) : !1;
  }
  function M() {
    for (var O = e; e < t.length && !XM(t[e]); )
      e++;
    if (e > O) {
      if (t.charCodeAt(e) === yM)
        return e++, o(), t.charCodeAt(e) === wM && (e++, t.charCodeAt(e) === TM && e++), !0;
      for (; qc(t.charCodeAt(e - 1)) && e > 0; )
        e--;
      var x = t.slice(O, e);
      return n += JSON.stringify(x), !0;
    }
  }
  function S(O) {
    if (!Nf(t.charCodeAt(e))) {
      var x = t.slice(O, e);
      throw new So("Invalid number '".concat(x, "', expecting a digit ").concat(U()), 2);
    }
  }
  function R(O) {
    throw new So("Invalid character " + JSON.stringify(O), e);
  }
  function k() {
    throw new So("Unexpected character " + JSON.stringify(t[e]), e);
  }
  function I() {
    throw new So("Unexpected end of json string", t.length);
  }
  function L() {
    throw new So("Object key expected", e);
  }
  function V() {
    throw new So("Object value expected", e);
  }
  function N() {
    throw new So("Colon expected", e);
  }
  function W(O) {
    for (var x = O + 2; /\w/.test(t[x]); )
      x++;
    var A = t.slice(O, x);
    throw new So('Invalid unicode character "'.concat(A, '"'), e);
  }
  function U() {
    return t[e] ? "but got '".concat(t[e], "'") : "but reached end of input";
  }
}
function rA(t, e) {
  return t[e] === "*" && t[e + 1] === "/";
}
function Nn(t) {
  return parseInt(t, 10);
}
function jp(t) {
  return oA.test(t);
}
const oA = /^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;
function pn(t) {
  return typeof t == "object" && t !== null && t.constructor === Object;
}
function rn(t) {
  return typeof t == "object" && t !== null && (t.constructor === Object || t.constructor === Array);
}
function sA(t) {
  return t === !0 || t === !1;
}
function cm(t) {
  if (typeof t == "number")
    return t > 9466848e5 && isFinite(t) && Math.floor(t) === t && !isNaN(new Date(t).valueOf());
  if (typeof t == "bigint")
    return cm(Number(t));
  try {
    const n = t.valueOf();
    if (n !== t)
      return cm(n);
  } catch {
    return !1;
  }
}
function Uk(t) {
  const e = window.document.createElement("div");
  return e.style.color = t, e.style.color.split(/\s+/).join("").toLowerCase() || null;
}
function lA(t) {
  return typeof t == "string" && !!Uk(t);
}
function Bp(t, e) {
  if (typeof t == "number" || typeof t == "string" || typeof t == "boolean" || typeof t > "u")
    return typeof t;
  if (typeof t == "bigint")
    return "number";
  if (t === null)
    return "null";
  if (Array.isArray(t))
    return "array";
  if (pn(t))
    return "object";
  const n = e.stringify(t);
  return n && jp(n) ? "number" : n === "true" || n === "false" ? "boolean" : n === "null" ? "null" : "unknown";
}
const aA = /^https?:\/\/\S+$/;
function Zu(t) {
  return typeof t == "string" && aA.test(t);
}
function zl(t, e) {
  if (t === "")
    return "";
  const n = t.trim();
  return n === "null" ? null : n === "true" ? !0 : n === "false" ? !1 : jp(n) ? e.parse(n) : t;
}
function fA(t, e) {
  return typeof t == "string" && typeof zl(t, e) != "string";
}
function cA(t) {
  return uA.test(t);
}
const uA = /^-?[0-9]+$/;
var hA = typeof global == "object" && global && global.Object === Object && global;
const qk = hA;
var dA = typeof self == "object" && self && self.Object === Object && self, mA = qk || dA || Function("return this")();
const _r = mA;
var pA = _r.Symbol;
const Qi = pA;
var Jk = Object.prototype, gA = Jk.hasOwnProperty, bA = Jk.toString, Yl = Qi ? Qi.toStringTag : void 0;
function _A(t) {
  var e = gA.call(t, Yl), n = t[Yl];
  try {
    t[Yl] = void 0;
    var i = !0;
  } catch {
  }
  var r = bA.call(t);
  return i && (e ? t[Yl] = n : delete t[Yl]), r;
}
var yA = Object.prototype, wA = yA.toString;
function vA(t) {
  return wA.call(t);
}
var kA = "[object Null]", CA = "[object Undefined]", Y1 = Qi ? Qi.toStringTag : void 0;
function Vl(t) {
  return t == null ? t === void 0 ? CA : kA : Y1 && Y1 in Object(t) ? _A(t) : vA(t);
}
function Wo(t) {
  return t != null && typeof t == "object";
}
var SA = "[object Symbol]";
function Es(t) {
  return typeof t == "symbol" || Wo(t) && Vl(t) == SA;
}
function pa(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = Array(i); ++n < i; )
    r[n] = e(t[n], n, t);
  return r;
}
var MA = Array.isArray;
const ci = MA;
var AA = 1 / 0, Z1 = Qi ? Qi.prototype : void 0, $1 = Z1 ? Z1.toString : void 0;
function Kk(t) {
  if (typeof t == "string")
    return t;
  if (ci(t))
    return pa(t, Kk) + "";
  if (Es(t))
    return $1 ? $1.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -AA ? "-0" : e;
}
var OA = /\s/;
function TA(t) {
  for (var e = t.length; e-- && OA.test(t.charAt(e)); )
    ;
  return e;
}
var EA = /^\s+/;
function PA(t) {
  return t && t.slice(0, TA(t) + 1).replace(EA, "");
}
function br(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var e0 = 0 / 0, RA = /^[-+]0x[0-9a-f]+$/i, IA = /^0b[01]+$/i, NA = /^0o[0-7]+$/i, DA = parseInt;
function um(t) {
  if (typeof t == "number")
    return t;
  if (Es(t))
    return e0;
  if (br(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = br(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = PA(t);
  var n = IA.test(t);
  return n || NA.test(t) ? DA(t.slice(2), n ? 2 : 8) : RA.test(t) ? e0 : +t;
}
var t0 = 1 / 0, jA = 17976931348623157e292;
function vc(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = um(t), t === t0 || t === -t0) {
    var e = t < 0 ? -1 : 1;
    return e * jA;
  }
  return t === t ? t : 0;
}
function BA(t) {
  var e = vc(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
function lf(t) {
  return t;
}
var LA = "[object AsyncFunction]", xA = "[object Function]", zA = "[object GeneratorFunction]", VA = "[object Proxy]";
function Gk(t) {
  if (!br(t))
    return !1;
  var e = Vl(t);
  return e == xA || e == zA || e == LA || e == VA;
}
var FA = _r["__core-js_shared__"];
const td = FA;
var n0 = function() {
  var t = /[^.]+$/.exec(td && td.keys && td.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function HA(t) {
  return !!n0 && n0 in t;
}
var WA = Function.prototype, UA = WA.toString;
function zs(t) {
  if (t != null) {
    try {
      return UA.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var qA = /[\\^$.*+?()[\]{}|]/g, JA = /^\[object .+?Constructor\]$/, KA = Function.prototype, GA = Object.prototype, XA = KA.toString, QA = GA.hasOwnProperty, YA = RegExp(
  "^" + XA.call(QA).replace(qA, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function ZA(t) {
  if (!br(t) || HA(t))
    return !1;
  var e = Gk(t) ? YA : JA;
  return e.test(zs(t));
}
function $A(t, e) {
  return t == null ? void 0 : t[e];
}
function Vs(t, e) {
  var n = $A(t, e);
  return ZA(n) ? n : void 0;
}
var eO = Vs(_r, "WeakMap");
const hm = eO;
var i0 = Object.create, tO = function() {
  function t() {
  }
  return function(e) {
    if (!br(e))
      return {};
    if (i0)
      return i0(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
const nO = tO;
function iO(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
function nn() {
}
function rO(t, e) {
  var n = -1, i = t.length;
  for (e || (e = Array(i)); ++n < i; )
    e[n] = t[n];
  return e;
}
var oO = 800, sO = 16, lO = Date.now;
function aO(t) {
  var e = 0, n = 0;
  return function() {
    var i = lO(), r = sO - (i - n);
    if (n = i, r > 0) {
      if (++e >= oO)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function fO(t) {
  return function() {
    return t;
  };
}
var cO = function() {
  try {
    var t = Vs(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
const Kc = cO;
var uO = Kc ? function(t, e) {
  return Kc(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: fO(e),
    writable: !0
  });
} : lf;
const hO = uO;
var dO = aO(hO);
const mO = dO;
function pO(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var gO = 9007199254740991, bO = /^(?:0|[1-9]\d*)$/;
function Lp(t, e) {
  var n = typeof t;
  return e = e ?? gO, !!e && (n == "number" || n != "symbol" && bO.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function $u(t, e, n) {
  e == "__proto__" && Kc ? Kc(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function eh(t, e) {
  return t === e || t !== t && e !== e;
}
var _O = Object.prototype, yO = _O.hasOwnProperty;
function Xk(t, e, n) {
  var i = t[e];
  (!(yO.call(t, e) && eh(i, n)) || n === void 0 && !(e in t)) && $u(t, e, n);
}
function th(t, e, n, i) {
  var r = !n;
  n || (n = {});
  for (var o = -1, s = e.length; ++o < s; ) {
    var l = e[o], a = i ? i(n[l], t[l], l, n, t) : void 0;
    a === void 0 && (a = t[l]), r ? $u(n, l, a) : Xk(n, l, a);
  }
  return n;
}
var r0 = Math.max;
function wO(t, e, n) {
  return e = r0(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var i = arguments, r = -1, o = r0(i.length - e, 0), s = Array(o); ++r < o; )
      s[r] = i[e + r];
    r = -1;
    for (var l = Array(e + 1); ++r < e; )
      l[r] = i[r];
    return l[e] = n(s), iO(t, this, l);
  };
}
function vO(t, e) {
  return mO(wO(t, e, lf), t + "");
}
var kO = 9007199254740991;
function xp(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= kO;
}
function Fl(t) {
  return t != null && xp(t.length) && !Gk(t);
}
function dm(t, e, n) {
  if (!br(n))
    return !1;
  var i = typeof e;
  return (i == "number" ? Fl(n) && Lp(e, n.length) : i == "string" && e in n) ? eh(n[e], t) : !1;
}
var CO = Object.prototype;
function nh(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || CO;
  return t === n;
}
function Qk(t, e) {
  for (var n = -1, i = Array(t); ++n < t; )
    i[n] = e(n);
  return i;
}
var SO = "[object Arguments]";
function o0(t) {
  return Wo(t) && Vl(t) == SO;
}
var Yk = Object.prototype, MO = Yk.hasOwnProperty, AO = Yk.propertyIsEnumerable, OO = o0(function() {
  return arguments;
}()) ? o0 : function(t) {
  return Wo(t) && MO.call(t, "callee") && !AO.call(t, "callee");
};
const ih = OO;
function TO() {
  return !1;
}
var Zk = typeof exports == "object" && exports && !exports.nodeType && exports, s0 = Zk && typeof module == "object" && module && !module.nodeType && module, EO = s0 && s0.exports === Zk, l0 = EO ? _r.Buffer : void 0, PO = l0 ? l0.isBuffer : void 0, RO = PO || TO;
const Pa = RO;
var IO = "[object Arguments]", NO = "[object Array]", DO = "[object Boolean]", jO = "[object Date]", BO = "[object Error]", LO = "[object Function]", xO = "[object Map]", zO = "[object Number]", VO = "[object Object]", FO = "[object RegExp]", HO = "[object Set]", WO = "[object String]", UO = "[object WeakMap]", qO = "[object ArrayBuffer]", JO = "[object DataView]", KO = "[object Float32Array]", GO = "[object Float64Array]", XO = "[object Int8Array]", QO = "[object Int16Array]", YO = "[object Int32Array]", ZO = "[object Uint8Array]", $O = "[object Uint8ClampedArray]", eT = "[object Uint16Array]", tT = "[object Uint32Array]", en = {};
en[KO] = en[GO] = en[XO] = en[QO] = en[YO] = en[ZO] = en[$O] = en[eT] = en[tT] = !0;
en[IO] = en[NO] = en[qO] = en[DO] = en[JO] = en[jO] = en[BO] = en[LO] = en[xO] = en[zO] = en[VO] = en[FO] = en[HO] = en[WO] = en[UO] = !1;
function nT(t) {
  return Wo(t) && xp(t.length) && !!en[Vl(t)];
}
function rh(t) {
  return function(e) {
    return t(e);
  };
}
var $k = typeof exports == "object" && exports && !exports.nodeType && exports, ga = $k && typeof module == "object" && module && !module.nodeType && module, iT = ga && ga.exports === $k, nd = iT && qk.process, rT = function() {
  try {
    var t = ga && ga.require && ga.require("util").types;
    return t || nd && nd.binding && nd.binding("util");
  } catch {
  }
}();
const yl = rT;
var a0 = yl && yl.isTypedArray, oT = a0 ? rh(a0) : nT;
const zp = oT;
var sT = Object.prototype, lT = sT.hasOwnProperty;
function e3(t, e) {
  var n = ci(t), i = !n && ih(t), r = !n && !i && Pa(t), o = !n && !i && !r && zp(t), s = n || i || r || o, l = s ? Qk(t.length, String) : [], a = l.length;
  for (var f in t)
    (e || lT.call(t, f)) && !(s && (f == "length" || r && (f == "offset" || f == "parent") || o && (f == "buffer" || f == "byteLength" || f == "byteOffset") || Lp(f, a))) && l.push(f);
  return l;
}
function t3(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var aT = t3(Object.keys, Object);
const fT = aT;
var cT = Object.prototype, uT = cT.hasOwnProperty;
function n3(t) {
  if (!nh(t))
    return fT(t);
  var e = [];
  for (var n in Object(t))
    uT.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function Hl(t) {
  return Fl(t) ? e3(t) : n3(t);
}
function hT(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var dT = Object.prototype, mT = dT.hasOwnProperty;
function pT(t) {
  if (!br(t))
    return hT(t);
  var e = nh(t), n = [];
  for (var i in t)
    i == "constructor" && (e || !mT.call(t, i)) || n.push(i);
  return n;
}
function Vp(t) {
  return Fl(t) ? e3(t, !0) : pT(t);
}
var gT = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, bT = /^\w*$/;
function Fp(t, e) {
  if (ci(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Es(t) ? !0 : bT.test(t) || !gT.test(t) || e != null && t in Object(e);
}
var _T = Vs(Object, "create");
const Ra = _T;
function yT() {
  this.__data__ = Ra ? Ra(null) : {}, this.size = 0;
}
function wT(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var vT = "__lodash_hash_undefined__", kT = Object.prototype, CT = kT.hasOwnProperty;
function ST(t) {
  var e = this.__data__;
  if (Ra) {
    var n = e[t];
    return n === vT ? void 0 : n;
  }
  return CT.call(e, t) ? e[t] : void 0;
}
var MT = Object.prototype, AT = MT.hasOwnProperty;
function OT(t) {
  var e = this.__data__;
  return Ra ? e[t] !== void 0 : AT.call(e, t);
}
var TT = "__lodash_hash_undefined__";
function ET(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = Ra && e === void 0 ? TT : e, this;
}
function Ps(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
Ps.prototype.clear = yT;
Ps.prototype.delete = wT;
Ps.prototype.get = ST;
Ps.prototype.has = OT;
Ps.prototype.set = ET;
function PT() {
  this.__data__ = [], this.size = 0;
}
function oh(t, e) {
  for (var n = t.length; n--; )
    if (eh(t[n][0], e))
      return n;
  return -1;
}
var RT = Array.prototype, IT = RT.splice;
function NT(t) {
  var e = this.__data__, n = oh(e, t);
  if (n < 0)
    return !1;
  var i = e.length - 1;
  return n == i ? e.pop() : IT.call(e, n, 1), --this.size, !0;
}
function DT(t) {
  var e = this.__data__, n = oh(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function jT(t) {
  return oh(this.__data__, t) > -1;
}
function BT(t, e) {
  var n = this.__data__, i = oh(n, t);
  return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this;
}
function bo(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
bo.prototype.clear = PT;
bo.prototype.delete = NT;
bo.prototype.get = DT;
bo.prototype.has = jT;
bo.prototype.set = BT;
var LT = Vs(_r, "Map");
const Ia = LT;
function xT() {
  this.size = 0, this.__data__ = {
    hash: new Ps(),
    map: new (Ia || bo)(),
    string: new Ps()
  };
}
function zT(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function sh(t, e) {
  var n = t.__data__;
  return zT(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function VT(t) {
  var e = sh(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function FT(t) {
  return sh(this, t).get(t);
}
function HT(t) {
  return sh(this, t).has(t);
}
function WT(t, e) {
  var n = sh(this, t), i = n.size;
  return n.set(t, e), this.size += n.size == i ? 0 : 1, this;
}
function _o(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
_o.prototype.clear = xT;
_o.prototype.delete = VT;
_o.prototype.get = FT;
_o.prototype.has = HT;
_o.prototype.set = WT;
var UT = "Expected a function";
function lh(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(UT);
  var n = function() {
    var i = arguments, r = e ? e.apply(this, i) : i[0], o = n.cache;
    if (o.has(r))
      return o.get(r);
    var s = t.apply(this, i);
    return n.cache = o.set(r, s) || o, s;
  };
  return n.cache = new (lh.Cache || _o)(), n;
}
lh.Cache = _o;
var qT = 500;
function JT(t) {
  var e = lh(t, function(i) {
    return n.size === qT && n.clear(), i;
  }), n = e.cache;
  return e;
}
var KT = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, GT = /\\(\\)?/g, XT = JT(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(KT, function(n, i, r, o) {
    e.push(r ? o.replace(GT, "$1") : i || n);
  }), e;
});
const QT = XT;
function i3(t) {
  return t == null ? "" : Kk(t);
}
function r3(t, e) {
  return ci(t) ? t : Fp(t, e) ? [t] : QT(i3(t));
}
var YT = 1 / 0;
function ah(t) {
  if (typeof t == "string" || Es(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -YT ? "-0" : e;
}
function Hp(t, e) {
  e = r3(e, t);
  for (var n = 0, i = e.length; t != null && n < i; )
    t = t[ah(e[n++])];
  return n && n == i ? t : void 0;
}
function ZT(t, e, n) {
  var i = t == null ? void 0 : Hp(t, e);
  return i === void 0 ? n : i;
}
function Wp(t, e) {
  for (var n = -1, i = e.length, r = t.length; ++n < i; )
    t[r + n] = e[n];
  return t;
}
var f0 = Qi ? Qi.isConcatSpreadable : void 0;
function $T(t) {
  return ci(t) || ih(t) || !!(f0 && t && t[f0]);
}
function o3(t, e, n, i, r) {
  var o = -1, s = t.length;
  for (n || (n = $T), r || (r = []); ++o < s; ) {
    var l = t[o];
    e > 0 && n(l) ? e > 1 ? o3(l, e - 1, n, i, r) : Wp(r, l) : i || (r[r.length] = l);
  }
  return r;
}
var eE = t3(Object.getPrototypeOf, Object);
const s3 = eE;
function tE(t, e, n) {
  var i = -1, r = t.length;
  e < 0 && (e = -e > r ? 0 : r + e), n = n > r ? r : n, n < 0 && (n += r), r = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var o = Array(r); ++i < r; )
    o[i] = t[i + e];
  return o;
}
function nE() {
  this.__data__ = new bo(), this.size = 0;
}
function iE(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function rE(t) {
  return this.__data__.get(t);
}
function oE(t) {
  return this.__data__.has(t);
}
var sE = 200;
function lE(t, e) {
  var n = this.__data__;
  if (n instanceof bo) {
    var i = n.__data__;
    if (!Ia || i.length < sE - 1)
      return i.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new _o(i);
  }
  return n.set(t, e), this.size = n.size, this;
}
function xr(t) {
  var e = this.__data__ = new bo(t);
  this.size = e.size;
}
xr.prototype.clear = nE;
xr.prototype.delete = iE;
xr.prototype.get = rE;
xr.prototype.has = oE;
xr.prototype.set = lE;
function aE(t, e) {
  return t && th(e, Hl(e), t);
}
function fE(t, e) {
  return t && th(e, Vp(e), t);
}
var l3 = typeof exports == "object" && exports && !exports.nodeType && exports, c0 = l3 && typeof module == "object" && module && !module.nodeType && module, cE = c0 && c0.exports === l3, u0 = cE ? _r.Buffer : void 0, h0 = u0 ? u0.allocUnsafe : void 0;
function uE(t, e) {
  if (e)
    return t.slice();
  var n = t.length, i = h0 ? h0(n) : new t.constructor(n);
  return t.copy(i), i;
}
function hE(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = 0, o = []; ++n < i; ) {
    var s = t[n];
    e(s, n, t) && (o[r++] = s);
  }
  return o;
}
function a3() {
  return [];
}
var dE = Object.prototype, mE = dE.propertyIsEnumerable, d0 = Object.getOwnPropertySymbols, pE = d0 ? function(t) {
  return t == null ? [] : (t = Object(t), hE(d0(t), function(e) {
    return mE.call(t, e);
  }));
} : a3;
const Up = pE;
function gE(t, e) {
  return th(t, Up(t), e);
}
var bE = Object.getOwnPropertySymbols, _E = bE ? function(t) {
  for (var e = []; t; )
    Wp(e, Up(t)), t = s3(t);
  return e;
} : a3;
const f3 = _E;
function yE(t, e) {
  return th(t, f3(t), e);
}
function c3(t, e, n) {
  var i = e(t);
  return ci(t) ? i : Wp(i, n(t));
}
function mm(t) {
  return c3(t, Hl, Up);
}
function wE(t) {
  return c3(t, Vp, f3);
}
var vE = Vs(_r, "DataView");
const pm = vE;
var kE = Vs(_r, "Promise");
const gm = kE;
var CE = Vs(_r, "Set");
const bm = CE;
var m0 = "[object Map]", SE = "[object Object]", p0 = "[object Promise]", g0 = "[object Set]", b0 = "[object WeakMap]", _0 = "[object DataView]", ME = zs(pm), AE = zs(Ia), OE = zs(gm), TE = zs(bm), EE = zs(hm), ds = Vl;
(pm && ds(new pm(new ArrayBuffer(1))) != _0 || Ia && ds(new Ia()) != m0 || gm && ds(gm.resolve()) != p0 || bm && ds(new bm()) != g0 || hm && ds(new hm()) != b0) && (ds = function(t) {
  var e = Vl(t), n = e == SE ? t.constructor : void 0, i = n ? zs(n) : "";
  if (i)
    switch (i) {
      case ME:
        return _0;
      case AE:
        return m0;
      case OE:
        return p0;
      case TE:
        return g0;
      case EE:
        return b0;
    }
  return e;
});
const wl = ds;
var PE = Object.prototype, RE = PE.hasOwnProperty;
function IE(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && RE.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var NE = _r.Uint8Array;
const Gc = NE;
function qp(t) {
  var e = new t.constructor(t.byteLength);
  return new Gc(e).set(new Gc(t)), e;
}
function DE(t, e) {
  var n = e ? qp(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var jE = /\w*$/;
function BE(t) {
  var e = new t.constructor(t.source, jE.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var y0 = Qi ? Qi.prototype : void 0, w0 = y0 ? y0.valueOf : void 0;
function LE(t) {
  return w0 ? Object(w0.call(t)) : {};
}
function xE(t, e) {
  var n = e ? qp(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var zE = "[object Boolean]", VE = "[object Date]", FE = "[object Map]", HE = "[object Number]", WE = "[object RegExp]", UE = "[object Set]", qE = "[object String]", JE = "[object Symbol]", KE = "[object ArrayBuffer]", GE = "[object DataView]", XE = "[object Float32Array]", QE = "[object Float64Array]", YE = "[object Int8Array]", ZE = "[object Int16Array]", $E = "[object Int32Array]", e7 = "[object Uint8Array]", t7 = "[object Uint8ClampedArray]", n7 = "[object Uint16Array]", i7 = "[object Uint32Array]";
function r7(t, e, n) {
  var i = t.constructor;
  switch (e) {
    case KE:
      return qp(t);
    case zE:
    case VE:
      return new i(+t);
    case GE:
      return DE(t, n);
    case XE:
    case QE:
    case YE:
    case ZE:
    case $E:
    case e7:
    case t7:
    case n7:
    case i7:
      return xE(t, n);
    case FE:
      return new i();
    case HE:
    case qE:
      return new i(t);
    case WE:
      return BE(t);
    case UE:
      return new i();
    case JE:
      return LE(t);
  }
}
function o7(t) {
  return typeof t.constructor == "function" && !nh(t) ? nO(s3(t)) : {};
}
var s7 = "[object Map]";
function l7(t) {
  return Wo(t) && wl(t) == s7;
}
var v0 = yl && yl.isMap, a7 = v0 ? rh(v0) : l7;
const f7 = a7;
var c7 = "[object Set]";
function u7(t) {
  return Wo(t) && wl(t) == c7;
}
var k0 = yl && yl.isSet, h7 = k0 ? rh(k0) : u7;
const d7 = h7;
var m7 = 1, p7 = 2, g7 = 4, u3 = "[object Arguments]", b7 = "[object Array]", _7 = "[object Boolean]", y7 = "[object Date]", w7 = "[object Error]", h3 = "[object Function]", v7 = "[object GeneratorFunction]", k7 = "[object Map]", C7 = "[object Number]", d3 = "[object Object]", S7 = "[object RegExp]", M7 = "[object Set]", A7 = "[object String]", O7 = "[object Symbol]", T7 = "[object WeakMap]", E7 = "[object ArrayBuffer]", P7 = "[object DataView]", R7 = "[object Float32Array]", I7 = "[object Float64Array]", N7 = "[object Int8Array]", D7 = "[object Int16Array]", j7 = "[object Int32Array]", B7 = "[object Uint8Array]", L7 = "[object Uint8ClampedArray]", x7 = "[object Uint16Array]", z7 = "[object Uint32Array]", Xt = {};
Xt[u3] = Xt[b7] = Xt[E7] = Xt[P7] = Xt[_7] = Xt[y7] = Xt[R7] = Xt[I7] = Xt[N7] = Xt[D7] = Xt[j7] = Xt[k7] = Xt[C7] = Xt[d3] = Xt[S7] = Xt[M7] = Xt[A7] = Xt[O7] = Xt[B7] = Xt[L7] = Xt[x7] = Xt[z7] = !0;
Xt[w7] = Xt[h3] = Xt[T7] = !1;
function kc(t, e, n, i, r, o) {
  var s, l = e & m7, a = e & p7, f = e & g7;
  if (n && (s = r ? n(t, i, r, o) : n(t)), s !== void 0)
    return s;
  if (!br(t))
    return t;
  var c = ci(t);
  if (c) {
    if (s = IE(t), !l)
      return rO(t, s);
  } else {
    var u = wl(t), h = u == h3 || u == v7;
    if (Pa(t))
      return uE(t, l);
    if (u == d3 || u == u3 || h && !r) {
      if (s = a || h ? {} : o7(t), !l)
        return a ? yE(t, fE(s, t)) : gE(t, aE(s, t));
    } else {
      if (!Xt[u])
        return r ? t : {};
      s = r7(t, u, l);
    }
  }
  o || (o = new xr());
  var d = o.get(t);
  if (d)
    return d;
  o.set(t, s), d7(t) ? t.forEach(function(_) {
    s.add(kc(_, e, n, _, t, o));
  }) : f7(t) && t.forEach(function(_, b) {
    s.set(b, kc(_, e, n, b, t, o));
  });
  var m = f ? a ? wE : mm : a ? Vp : Hl, g = c ? void 0 : m(t);
  return pO(g || t, function(_, b) {
    g && (b = _, _ = t[b]), Xk(s, b, kc(_, e, n, b, t, o));
  }), s;
}
var V7 = 1, F7 = 4;
function H7(t, e) {
  return e = typeof e == "function" ? e : void 0, kc(t, V7 | F7, e);
}
var W7 = "__lodash_hash_undefined__";
function U7(t) {
  return this.__data__.set(t, W7), this;
}
function q7(t) {
  return this.__data__.has(t);
}
function Xc(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new _o(); ++e < n; )
    this.add(t[e]);
}
Xc.prototype.add = Xc.prototype.push = U7;
Xc.prototype.has = q7;
function J7(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function K7(t, e) {
  return t.has(e);
}
var G7 = 1, X7 = 2;
function m3(t, e, n, i, r, o) {
  var s = n & G7, l = t.length, a = e.length;
  if (l != a && !(s && a > l))
    return !1;
  var f = o.get(t), c = o.get(e);
  if (f && c)
    return f == e && c == t;
  var u = -1, h = !0, d = n & X7 ? new Xc() : void 0;
  for (o.set(t, e), o.set(e, t); ++u < l; ) {
    var m = t[u], g = e[u];
    if (i)
      var _ = s ? i(g, m, u, e, t, o) : i(m, g, u, t, e, o);
    if (_ !== void 0) {
      if (_)
        continue;
      h = !1;
      break;
    }
    if (d) {
      if (!J7(e, function(b, w) {
        if (!K7(d, w) && (m === b || r(m, b, n, i, o)))
          return d.push(w);
      })) {
        h = !1;
        break;
      }
    } else if (!(m === g || r(m, g, n, i, o))) {
      h = !1;
      break;
    }
  }
  return o.delete(t), o.delete(e), h;
}
function Q7(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i, r) {
    n[++e] = [r, i];
  }), n;
}
function Y7(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i) {
    n[++e] = i;
  }), n;
}
var Z7 = 1, $7 = 2, eP = "[object Boolean]", tP = "[object Date]", nP = "[object Error]", iP = "[object Map]", rP = "[object Number]", oP = "[object RegExp]", sP = "[object Set]", lP = "[object String]", aP = "[object Symbol]", fP = "[object ArrayBuffer]", cP = "[object DataView]", C0 = Qi ? Qi.prototype : void 0, id = C0 ? C0.valueOf : void 0;
function uP(t, e, n, i, r, o, s) {
  switch (n) {
    case cP:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case fP:
      return !(t.byteLength != e.byteLength || !o(new Gc(t), new Gc(e)));
    case eP:
    case tP:
    case rP:
      return eh(+t, +e);
    case nP:
      return t.name == e.name && t.message == e.message;
    case oP:
    case lP:
      return t == e + "";
    case iP:
      var l = Q7;
    case sP:
      var a = i & Z7;
      if (l || (l = Y7), t.size != e.size && !a)
        return !1;
      var f = s.get(t);
      if (f)
        return f == e;
      i |= $7, s.set(t, e);
      var c = m3(l(t), l(e), i, r, o, s);
      return s.delete(t), c;
    case aP:
      if (id)
        return id.call(t) == id.call(e);
  }
  return !1;
}
var hP = 1, dP = Object.prototype, mP = dP.hasOwnProperty;
function pP(t, e, n, i, r, o) {
  var s = n & hP, l = mm(t), a = l.length, f = mm(e), c = f.length;
  if (a != c && !s)
    return !1;
  for (var u = a; u--; ) {
    var h = l[u];
    if (!(s ? h in e : mP.call(e, h)))
      return !1;
  }
  var d = o.get(t), m = o.get(e);
  if (d && m)
    return d == e && m == t;
  var g = !0;
  o.set(t, e), o.set(e, t);
  for (var _ = s; ++u < a; ) {
    h = l[u];
    var b = t[h], w = e[h];
    if (i)
      var v = s ? i(w, b, h, e, t, o) : i(b, w, h, t, e, o);
    if (!(v === void 0 ? b === w || r(b, w, n, i, o) : v)) {
      g = !1;
      break;
    }
    _ || (_ = h == "constructor");
  }
  if (g && !_) {
    var M = t.constructor, S = e.constructor;
    M != S && "constructor" in t && "constructor" in e && !(typeof M == "function" && M instanceof M && typeof S == "function" && S instanceof S) && (g = !1);
  }
  return o.delete(t), o.delete(e), g;
}
var gP = 1, S0 = "[object Arguments]", M0 = "[object Array]", Df = "[object Object]", bP = Object.prototype, A0 = bP.hasOwnProperty;
function _P(t, e, n, i, r, o) {
  var s = ci(t), l = ci(e), a = s ? M0 : wl(t), f = l ? M0 : wl(e);
  a = a == S0 ? Df : a, f = f == S0 ? Df : f;
  var c = a == Df, u = f == Df, h = a == f;
  if (h && Pa(t)) {
    if (!Pa(e))
      return !1;
    s = !0, c = !1;
  }
  if (h && !c)
    return o || (o = new xr()), s || zp(t) ? m3(t, e, n, i, r, o) : uP(t, e, a, n, i, r, o);
  if (!(n & gP)) {
    var d = c && A0.call(t, "__wrapped__"), m = u && A0.call(e, "__wrapped__");
    if (d || m) {
      var g = d ? t.value() : t, _ = m ? e.value() : e;
      return o || (o = new xr()), r(g, _, n, i, o);
    }
  }
  return h ? (o || (o = new xr()), pP(t, e, n, i, r, o)) : !1;
}
function fh(t, e, n, i, r) {
  return t === e ? !0 : t == null || e == null || !Wo(t) && !Wo(e) ? t !== t && e !== e : _P(t, e, n, i, fh, r);
}
var yP = 1, wP = 2;
function vP(t, e, n, i) {
  var r = n.length, o = r, s = !i;
  if (t == null)
    return !o;
  for (t = Object(t); r--; ) {
    var l = n[r];
    if (s && l[2] ? l[1] !== t[l[0]] : !(l[0] in t))
      return !1;
  }
  for (; ++r < o; ) {
    l = n[r];
    var a = l[0], f = t[a], c = l[1];
    if (s && l[2]) {
      if (f === void 0 && !(a in t))
        return !1;
    } else {
      var u = new xr();
      if (i)
        var h = i(f, c, a, t, e, u);
      if (!(h === void 0 ? fh(c, f, yP | wP, i, u) : h))
        return !1;
    }
  }
  return !0;
}
function p3(t) {
  return t === t && !br(t);
}
function kP(t) {
  for (var e = Hl(t), n = e.length; n--; ) {
    var i = e[n], r = t[i];
    e[n] = [i, r, p3(r)];
  }
  return e;
}
function g3(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function CP(t) {
  var e = kP(t);
  return e.length == 1 && e[0][2] ? g3(e[0][0], e[0][1]) : function(n) {
    return n === t || vP(n, t, e);
  };
}
function SP(t, e) {
  return t != null && e in Object(t);
}
function MP(t, e, n) {
  e = r3(e, t);
  for (var i = -1, r = e.length, o = !1; ++i < r; ) {
    var s = ah(e[i]);
    if (!(o = t != null && n(t, s)))
      break;
    t = t[s];
  }
  return o || ++i != r ? o : (r = t == null ? 0 : t.length, !!r && xp(r) && Lp(s, r) && (ci(t) || ih(t)));
}
function AP(t, e) {
  return t != null && MP(t, e, SP);
}
var OP = 1, TP = 2;
function EP(t, e) {
  return Fp(t) && p3(e) ? g3(ah(t), e) : function(n) {
    var i = ZT(n, t);
    return i === void 0 && i === e ? AP(n, t) : fh(e, i, OP | TP);
  };
}
function PP(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function RP(t) {
  return function(e) {
    return Hp(e, t);
  };
}
function IP(t) {
  return Fp(t) ? PP(ah(t)) : RP(t);
}
function af(t) {
  return typeof t == "function" ? t : t == null ? lf : typeof t == "object" ? ci(t) ? EP(t[0], t[1]) : CP(t) : IP(t);
}
function NP(t, e, n, i) {
  for (var r = -1, o = t == null ? 0 : t.length; ++r < o; ) {
    var s = t[r];
    e(i, s, n(s), t);
  }
  return i;
}
function b3(t) {
  return function(e, n, i) {
    for (var r = -1, o = Object(e), s = i(e), l = s.length; l--; ) {
      var a = s[t ? l : ++r];
      if (n(o[a], a, o) === !1)
        break;
    }
    return e;
  };
}
var DP = b3();
const jP = DP;
function _3(t, e) {
  return t && jP(t, e, Hl);
}
function y3(t, e) {
  return function(n, i) {
    if (n == null)
      return n;
    if (!Fl(n))
      return t(n, i);
    for (var r = n.length, o = e ? r : -1, s = Object(n); (e ? o-- : ++o < r) && i(s[o], o, s) !== !1; )
      ;
    return n;
  };
}
var BP = y3(_3);
const w3 = BP;
function LP(t, e, n, i) {
  return w3(t, function(r, o, s) {
    e(i, r, n(r), s);
  }), i;
}
function v3(t, e) {
  return function(n, i) {
    var r = ci(n) ? NP : LP, o = e ? e() : {};
    return r(n, t, af(i), o);
  };
}
var xP = function() {
  return _r.Date.now();
};
const rd = xP;
var zP = "Expected a function", VP = Math.max, FP = Math.min;
function ch(t, e, n) {
  var i, r, o, s, l, a, f = 0, c = !1, u = !1, h = !0;
  if (typeof t != "function")
    throw new TypeError(zP);
  e = um(e) || 0, br(n) && (c = !!n.leading, u = "maxWait" in n, o = u ? VP(um(n.maxWait) || 0, e) : o, h = "trailing" in n ? !!n.trailing : h);
  function d(R) {
    var k = i, I = r;
    return i = r = void 0, f = R, s = t.apply(I, k), s;
  }
  function m(R) {
    return f = R, l = setTimeout(b, e), c ? d(R) : s;
  }
  function g(R) {
    var k = R - a, I = R - f, L = e - k;
    return u ? FP(L, o - I) : L;
  }
  function _(R) {
    var k = R - a, I = R - f;
    return a === void 0 || k >= e || k < 0 || u && I >= o;
  }
  function b() {
    var R = rd();
    if (_(R))
      return w(R);
    l = setTimeout(b, g(R));
  }
  function w(R) {
    return l = void 0, h && i ? d(R) : (i = r = void 0, s);
  }
  function v() {
    l !== void 0 && clearTimeout(l), f = 0, i = a = r = l = void 0;
  }
  function M() {
    return l === void 0 ? s : w(rd());
  }
  function S() {
    var R = rd(), k = _(R);
    if (i = arguments, r = this, a = R, k) {
      if (l === void 0)
        return m(a);
      if (u)
        return clearTimeout(l), l = setTimeout(b, e), d(a);
    }
    return l === void 0 && (l = setTimeout(b, e)), s;
  }
  return S.cancel = v, S.flush = M, S;
}
function $e(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
function k3(t) {
  return typeof t == "function" ? t : lf;
}
function HP(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var WP = b3(!0);
const UP = WP;
function qP(t, e) {
  return t && UP(t, e, Hl);
}
var JP = y3(qP, !0);
const KP = JP;
function GP(t, e) {
  var n = ci(t) ? HP : KP;
  return n(t, k3(e));
}
function bi(t) {
  return t && t.length ? t[0] : void 0;
}
function C3(t, e) {
  var n = -1, i = Fl(t) ? Array(t.length) : [];
  return w3(t, function(r, o, s) {
    i[++n] = e(r, o, s);
  }), i;
}
function XP(t, e) {
  var n = ci(t) ? pa : C3;
  return n(t, af(e));
}
var QP = Object.prototype, YP = QP.hasOwnProperty, ZP = v3(function(t, e, n) {
  YP.call(t, n) ? t[n].push(e) : $u(t, n, [e]);
});
const uh = ZP;
function kt(t) {
  var e = t == null ? 0 : t.length;
  return e ? tE(t, 0, -1) : [];
}
var $P = "[object Map]", e9 = "[object Set]", t9 = Object.prototype, n9 = t9.hasOwnProperty;
function At(t) {
  if (t == null)
    return !0;
  if (Fl(t) && (ci(t) || typeof t == "string" || typeof t.splice == "function" || Pa(t) || zp(t) || ih(t)))
    return !t.length;
  var e = wl(t);
  if (e == $P || e == e9)
    return !t.size;
  if (nh(t))
    return !n3(t).length;
  for (var n in t)
    if (n9.call(t, n))
      return !1;
  return !0;
}
function St(t, e) {
  return fh(t, e);
}
function i9(t, e) {
  return t < e;
}
function r9(t, e) {
  var n = {};
  return e = af(e), _3(t, function(i, r, o) {
    $u(n, r, e(i, r, o));
  }), n;
}
function o9(t, e, n) {
  for (var i = -1, r = t.length; ++i < r; ) {
    var o = t[i], s = e(o);
    if (s != null && (l === void 0 ? s === s && !Es(s) : n(s, l)))
      var l = s, a = o;
  }
  return a;
}
function jf(t, e) {
  return t && t.length ? o9(t, af(e), i9) : void 0;
}
function s9(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function l9(t, e) {
  if (t !== e) {
    var n = t !== void 0, i = t === null, r = t === t, o = Es(t), s = e !== void 0, l = e === null, a = e === e, f = Es(e);
    if (!l && !f && !o && t > e || o && s && a && !l && !f || i && s && a || !n && a || !r)
      return 1;
    if (!i && !o && !f && t < e || f && n && r && !i && !o || l && n && r || !s && r || !a)
      return -1;
  }
  return 0;
}
function a9(t, e, n) {
  for (var i = -1, r = t.criteria, o = e.criteria, s = r.length, l = n.length; ++i < s; ) {
    var a = l9(r[i], o[i]);
    if (a) {
      if (i >= l)
        return a;
      var f = n[i];
      return a * (f == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function f9(t, e, n) {
  e.length ? e = pa(e, function(o) {
    return ci(o) ? function(s) {
      return Hp(s, o.length === 1 ? o[0] : o);
    } : o;
  }) : e = [lf];
  var i = -1;
  e = pa(e, rh(af));
  var r = C3(t, function(o, s, l) {
    var a = pa(e, function(f) {
      return f(o);
    });
    return { criteria: a, index: ++i, value: o };
  });
  return s9(r, function(o, s) {
    return a9(o, s, n);
  });
}
var c9 = v3(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
const u9 = c9;
var h9 = Math.ceil, d9 = Math.max;
function m9(t, e, n, i) {
  for (var r = -1, o = d9(h9((e - t) / (n || 1)), 0), s = Array(o); o--; )
    s[i ? o : ++r] = t, t += n;
  return s;
}
function p9(t) {
  return function(e, n, i) {
    return i && typeof i != "number" && dm(e, n, i) && (n = i = void 0), e = vc(e), n === void 0 ? (n = e, e = 0) : n = vc(n), i = i === void 0 ? e < n ? 1 : -1 : vc(i), m9(e, n, i, t);
  };
}
var g9 = p9();
const b9 = g9;
var _9 = vO(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && dm(t, e[0], e[1]) ? e = [] : n > 2 && dm(e[0], e[1], e[2]) && (e = [e[0]]), f9(t, o3(e, 1), []);
});
const y9 = _9;
var w9 = "Expected a function";
function v9(t, e, n) {
  var i = !0, r = !0;
  if (typeof t != "function")
    throw new TypeError(w9);
  return br(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), ch(t, e, {
    leading: i,
    maxWait: e,
    trailing: r
  });
}
var k9 = 9007199254740991, od = 4294967295, C9 = Math.min;
function O0(t, e) {
  if (t = BA(t), t < 1 || t > k9)
    return [];
  var n = od, i = C9(t, od);
  e = k3(e), t -= od;
  for (var r = Qk(i, e); ++n < t; )
    e(n);
  return r;
}
var S9 = 0;
function vl(t) {
  var e = ++S9;
  return i3(t) + e;
}
const M9 = 1e4, A9 = [];
function _m(t, e = !1) {
  const n = {};
  if (!Array.isArray(t))
    throw new TypeError("Array expected");
  function i(s, l) {
    (!Array.isArray(s) && !pn(s) || e && l.length > 0) && (n[Se(l)] = !0), pn(s) && Object.keys(s).forEach((f) => {
      i(s[f], l.concat(f));
    });
  }
  const r = Math.min(t.length, M9);
  for (let s = 0; s < r; s++) {
    const l = t[s];
    i(l, A9);
  }
  return Object.keys(n).sort().map(gr);
}
function S3(t, e, n) {
  if (!(e <= t))
    for (let i = t; i < e; i++)
      n(i);
}
function Qc(t, e) {
  return t.length > e ? t.slice(0, e) : t;
}
function T0(t) {
  return {
    ...t
  };
}
function E0(t) {
  return Object.values(t);
}
function P0(t, e, n, i) {
  const r = t.slice(0), o = r.splice(e, n);
  return r.splice.apply(r, [e + i, 0, ...o]), r;
}
function Jp(t, e) {
  try {
    return e.parse(t);
  } catch {
    return e.parse(Lr(t));
  }
}
function M3(t, e) {
  try {
    return Jp(t, e);
  } catch {
    return;
  }
}
function hh(t, e) {
  t = t.replace(O3, "");
  try {
    return e(t);
  } catch {
  }
  try {
    return e("[" + t + "]");
  } catch {
  }
  try {
    return e("{" + t + "}");
  } catch {
  }
  throw new Error("Failed to parse partial JSON");
}
function A3(t) {
  t = t.replace(O3, "");
  try {
    return Lr(t);
  } catch {
  }
  try {
    const e = Lr("[" + t + "]");
    return e.substring(1, e.length - 1);
  } catch {
  }
  try {
    const e = Lr("{" + t + "}");
    return e.substring(1, e.length - 1);
  } catch {
  }
  throw new Error("Failed to repair partial JSON");
}
const O3 = /,\s*$/;
function dh(t, e) {
  const n = I0.exec(e);
  if (n) {
    const i = Nn(n[2]), r = T9(t, `
`, 0, i), o = t.lastIndexOf(`
`, i), s = i - o - 1;
    return {
      position: i,
      line: r,
      column: s,
      message: e.replace(I0, () => `line ${r + 1} column ${s + 1}`)
    };
  } else {
    const i = N9.exec(e), r = i ? Nn(i[1]) : null, o = r !== null ? r - 1 : null, s = D9.exec(e), l = s ? Nn(s[1]) : null, a = l !== null ? l - 1 : null;
    return {
      position: o !== null && a !== null ? O9(t, o, a) : null,
      line: o,
      column: a,
      message: e.replace(/^JSON.parse: /, "").replace(/ of the JSON data$/, "")
    };
  }
}
function O9(t, e, n) {
  let i = t.indexOf(`
`), r = 1;
  for (; r < e && i !== -1; )
    i = t.indexOf(`
`, i + 1), r++;
  return i !== -1 ? i + n + 1 : null;
}
function T9(t, e, n = 0, i = t.length) {
  let r = 0;
  for (let o = n; o < i; o++)
    t.charAt(o) === e && r++;
  return r;
}
function E9(t, e) {
  try {
    const n = Yu.parse(t), i = Se(e), r = n.pointers[i];
    if (r)
      return {
        path: e,
        line: r.key ? r.key.line : r.value ? r.value.line : 0,
        column: r.key ? r.key.column : r.value ? r.value.column : 0,
        from: r.key ? r.key.pos : r.value ? r.value.pos : 0,
        to: r.keyEnd ? r.keyEnd.pos : r.valueEnd ? r.valueEnd.pos : 0
      };
  } catch (n) {
    console.error(n);
  }
  return null;
}
function P9(t, e, n) {
  if (e === "array") {
    if (Array.isArray(t))
      return t;
    if (pn(t))
      return E0(t);
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (Array.isArray(i))
          return i;
        if (pn(i))
          return E0(i);
      } catch {
        return [t];
      }
    return [t];
  }
  if (e === "object") {
    if (Array.isArray(t))
      return T0(t);
    if (pn(t))
      return t;
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (pn(i))
          return i;
        if (Array.isArray(i))
          return T0(i);
      } catch {
        return { value: t };
      }
    return { value: t };
  }
  if (e === "value")
    return rn(t) ? n.stringify(t) : t;
  throw new Error(`Cannot convert ${Bp(t, n)} to ${e}`);
}
function sd(t) {
  return pn(t) ? t.json !== void 0 ? t.text !== void 0 ? 'Content must contain either a property "json" or a property "text" but not both' : null : t.text === void 0 ? 'Content must contain either a property "json" or a property "text"' : typeof t.text != "string" ? 'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?' : null : "Content must be an object";
}
function kl(t) {
  return pn(t) && typeof t.text == "string";
}
function Kp(t) {
  return pn(t) && typeof t.json < "u" && !kl(t);
}
function R9(t, e = void 0, n = JSON) {
  return kl(t) ? t : { text: n.stringify(t.json, null, e) };
}
function R0(t, e = JSON) {
  return Kp(t) ? t : { json: e.parse(t.text) };
}
function Yc(t, e, n) {
  return R9(t, e, n).text;
}
function T3(t, e) {
  return I9(t, e) > e;
}
function I9(t, e = 1 / 0) {
  if (kl(t))
    return t.text.length;
  const n = t.json;
  let i = 0;
  function r(o) {
    if (Array.isArray(o)) {
      if (i += 2 + (o.length - 1), i > e)
        return i;
      for (let s = 0; s < o.length; s++) {
        const l = o[s];
        if (r(l), i > e)
          return i;
      }
    } else if (pn(o)) {
      const s = Object.keys(o);
      i += 2 + s.length + (s.length - 1);
      for (let l = 0; l < s.length; l++) {
        const a = s[l], f = o[a];
        i += a.length + 2, r(f);
      }
    } else
      typeof o == "string" ? i += o.length + 2 : i += String(o).length;
  }
  return r(n), i;
}
const I0 = /(position|char) (\d+)/, N9 = /line (\d+)/, D9 = /column (\d+)/;
function j9(t, e) {
  return t.parse === e.parse && t.stringify === e.stringify;
}
function Gp({ escapeControlCharacters: t, escapeUnicodeCharacters: e }) {
  return t ? e ? B9 : L9 : e ? x9 : z9;
}
const B9 = {
  escapeValue: (t) => E3(I3(String(t))),
  unescapeValue: (t) => N3(P3(t))
}, L9 = {
  escapeValue: (t) => I3(String(t)),
  unescapeValue: (t) => N3(t)
}, x9 = {
  escapeValue: (t) => E3(String(t)),
  unescapeValue: (t) => P3(t)
}, z9 = {
  escapeValue: (t) => String(t),
  unescapeValue: (t) => t
};
function E3(t) {
  return t.replace(/[^\x20-\x7F]/g, (e) => {
    var n;
    return e === "\b" || e === "\f" || e === `
` || e === "\r" || e === "	" ? e : "\\u" + ("000" + ((n = e.codePointAt(0)) == null ? void 0 : n.toString(16))).slice(-4);
  });
}
function P3(t) {
  return t.replace(/\\u[a-fA-F0-9]{4}/g, (e) => {
    try {
      const n = JSON.parse('"' + e + '"');
      return R3[n] || n;
    } catch {
      return e;
    }
  });
}
const R3 = {
  '"': '\\"',
  "\\": "\\\\",
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, V9 = {
  '\\"': '"',
  "\\\\": "\\",
  "\\/": "/",
  "\\b": "\b",
  "\\f": "\f",
  "\\n": `
`,
  "\\r": "\r",
  "\\t": "	"
};
function I3(t) {
  return t.replace(/["\b\f\n\r\t\\]/g, (e) => R3[e] || e);
}
function N3(t) {
  return t.replace(/\\["bfnrt\\]/g, (e) => V9[e] || e);
}
function Rs(t) {
  return typeof t != "string" ? String(t) : t.endsWith(`
`) ? t + `
` : t;
}
function F9(t) {
  return t.replace(/\n$/, "");
}
function D3(t, e) {
  return ff(t, (n) => n.nodeName.toUpperCase() === e.toUpperCase());
}
function bs(t, e, n) {
  return ff(t, (i) => W9(i, e, n));
}
function H9(t) {
  return t.nodeName === "DIV" && t.contentEditable === "true";
}
function W9(t, e, n) {
  return typeof t.getAttribute == "function" && t.getAttribute(e) === n;
}
function ff(t, e) {
  return !!Xp(t, e);
}
function Xp(t, e) {
  let n = t;
  for (; n && !e(n); )
    n = n.parentNode;
  return n || void 0;
}
function j3(t) {
  if (t.firstChild == null) {
    t.focus();
    return;
  }
  const e = document.createRange(), n = window.getSelection();
  e.setStart(t, 1), e.collapse(!0), n == null || n.removeAllRanges(), n == null || n.addRange(e);
}
function Zc(t, e, n) {
  const i = Wl(t).document.activeElement;
  i.isContentEditable && (i.textContent = n ? e : i.textContent + e, j3(i));
}
function Wl(t) {
  return t && t.ownerDocument && t.ownerDocument.defaultView;
}
function $c(t) {
  const e = Wl(t);
  return ff(e.document.activeElement, (n) => n === t);
}
function B3(t, e) {
  return Xp(t, (n) => n.nodeName === e);
}
function ld(t) {
  return bs(t, "data-type", "selectable-key") ? Ht.key : bs(t, "data-type", "selectable-value") ? Ht.value : bs(t, "data-type", "insert-selection-area-inside") ? Ht.inside : bs(t, "data-type", "insert-selection-area-after") ? Ht.after : Ht.multi;
}
function Cl(t) {
  return encodeURIComponent(Se(t));
}
function U9(t) {
  return gr(decodeURIComponent(t));
}
function L3(t) {
  const e = Xp(t, (n) => n != null && n.hasAttribute ? n.hasAttribute("data-path") : !1);
  return e ? U9(e.getAttribute("data-path")) : null;
}
function q9({ allElements: t, currentElement: e, direction: n, hasPrio: i = () => !0, margin: r = 10 }) {
  const o = XP(t.filter(l), a), s = a(e);
  function l(b) {
    const w = b.getBoundingClientRect();
    return w.width > 0 && w.height > 0;
  }
  function a(b) {
    const w = b.getBoundingClientRect();
    return {
      x: w.left + w.width / 2,
      y: w.top + w.height / 2,
      rect: w,
      element: b
    };
  }
  const f = (b, w) => Math.abs(b.y - w.y) < r, c = (b, w) => b.rect.left + r < w.rect.left, u = (b, w) => b.rect.right > w.rect.right + r, h = (b, w) => b.y + r < w.y, d = (b, w) => b.y > w.y + r;
  function m(b, w, v = 1) {
    const M = b.x - w.x, S = (b.y - w.y) * v;
    return Math.sqrt(M * M + S * S);
  }
  const g = (b) => m(b, s), _ = (b) => m(b, s, 10);
  if (n === "Left" || n === "Right") {
    const b = n === "Left" ? o.filter((M) => c(M, s)) : o.filter((M) => u(M, s)), w = b.filter((M) => f(M, s)), v = jf(w, g) || jf(b, _);
    return v == null ? void 0 : v.element;
  }
  if (n === "Up" || n === "Down") {
    const b = n === "Up" ? o.filter((M) => h(M, s)) : o.filter((M) => d(M, s)), w = b.filter((M) => i(M.element)), v = jf(w, g) || jf(b, g);
    return v == null ? void 0 : v.element;
  }
}
const x3 = typeof navigator < "u" ? navigator.platform.toUpperCase().indexOf("MAC") >= 0 : !1;
function J9(t) {
  return G9[t] || "";
}
function es(t) {
  const e = [];
  t.ctrlKey && e.push("Ctrl"), t.metaKey && e.push("Command"), t.altKey && e.push(x3 ? "Option" : "Alt"), t.shiftKey && e.push("Shift");
  const n = J9(t.which);
  return K9[n] || e.push(n), e.join("+");
}
const K9 = {
  Ctrl: !0,
  Command: !0,
  Alt: !0,
  Option: !0,
  Shift: !0
}, G9 = {
  8: "Backspace",
  9: "Tab",
  13: "Enter",
  16: "Shift",
  17: "Ctrl",
  18: "Alt",
  19: "Pause_Break",
  20: "Caps_Lock",
  27: "Escape",
  33: "Page_Up",
  34: "Page_Down",
  35: "End",
  36: "Home",
  37: "Left",
  38: "Up",
  39: "Right",
  40: "Down",
  45: "Insert",
  46: "Delete",
  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",
  65: "A",
  66: "B",
  67: "C",
  68: "D",
  69: "E",
  70: "F",
  71: "G",
  72: "H",
  73: "I",
  74: "J",
  75: "K",
  76: "L",
  77: "M",
  78: "N",
  79: "O",
  80: "P",
  81: "Q",
  82: "R",
  83: "S",
  84: "T",
  85: "U",
  86: "V",
  87: "W",
  88: "X",
  89: "Y",
  90: "Z",
  91: "Left_Window_Key",
  92: "Right_Window_Key",
  93: "Select_Key",
  96: "Numpad_0",
  97: "Numpad_1",
  98: "Numpad_2",
  99: "Numpad_3",
  100: "Numpad_4",
  101: "Numpad_5",
  102: "Numpad_6",
  103: "Numpad_7",
  104: "Numpad_8",
  105: "Numpad_9",
  106: "Numpad_*",
  107: "Numpad_+",
  109: "Numpad_-",
  110: "Numpad_.",
  111: "Numpad_/",
  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",
  144: "Num_Lock",
  145: "Scroll_Lock",
  186: ";",
  59: ";",
  187: "=",
  61: "=",
  188: ",",
  189: "-",
  173: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
};
const { window: ad } = Gu;
function N0(t) {
  let e, n, i, r, o, s;
  const l = [t[0].props];
  var a = t[0].component;
  function f(c) {
    let u = {};
    for (let h = 0; h < l.length; h += 1)
      u = $o(u, l[h]);
    return { props: u };
  }
  return a && (r = Ur(a, f())), {
    c() {
      e = T("div"), n = T("input"), i = q(), r && se(r.$$.fragment), p(n, "type", "text"), n.readOnly = !0, p(n, "tabindex", "-1"), p(n, "class", "jse-hidden-input svelte-1r8q3m8"), p(e, "class", "jse-absolute-popup-content svelte-1r8q3m8"), p(e, "style", o = D0(t[1], t[0].options));
    },
    m(c, u) {
      B(c, e, u), y(e, n), t[7](n), y(e, i), r && re(r, e, null), s = !0;
    },
    p(c, u) {
      const h = u & 1 ? xs(l, [Qu(c[0].props)]) : {};
      if (a !== (a = c[0].component)) {
        if (r) {
          me();
          const d = r;
          E(d.$$.fragment, 1, 0, () => {
            oe(d, 1);
          }), pe();
        }
        a ? (r = Ur(a, f()), se(r.$$.fragment), C(r.$$.fragment, 1), re(r, e, null)) : r = null;
      } else
        a && r.$set(h);
      (!s || u & 3 && o !== (o = D0(c[1], c[0].options))) && p(e, "style", o);
    },
    i(c) {
      s || (r && C(r.$$.fragment, c), s = !0);
    },
    o(c) {
      r && E(r.$$.fragment, c), s = !1;
    },
    d(c) {
      c && j(e), t[7](null), r && oe(r);
    }
  };
}
function X9(t) {
  let e, n, i, r, o = t[1] && N0(t);
  return {
    c() {
      e = T("div"), o && o.c(), p(e, "class", "jse-absolute-popup svelte-1r8q3m8");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), t[8](e), n = !0, i || (r = [
        X(ad, "mousedown", t[3], !0),
        X(ad, "keydown", t[4], !0),
        X(ad, "wheel", t[5], !0),
        X(e, "mousedown", Q9),
        X(e, "keydown", t[4])
      ], i = !0);
    },
    p(s, [l]) {
      s[1] ? o ? (o.p(s, l), l & 2 && C(o, 1)) : (o = N0(s), o.c(), C(o, 1), o.m(e, null)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), pe());
    },
    i(s) {
      n || (C(o), n = !0);
    },
    o(s) {
      E(o), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(), t[8](null), i = !1, et(r);
    }
  };
}
function Q9(t) {
  t.stopPropagation();
}
function D0(t, e) {
  function n() {
    if (e.anchor) {
      const { anchor: c, width: u = 0, height: h = 0, offsetTop: d = 0, offsetLeft: m = 0, position: g } = e, { left: _, top: b, bottom: w, right: v } = c.getBoundingClientRect(), M = g === "top" || b + h > window.innerHeight && b > h, S = g === "left" || _ + u > window.innerWidth && _ > u;
      return {
        left: S ? v - m : _ + m,
        top: M ? b - d : w + d,
        positionAbove: M,
        positionLeft: S
      };
    } else if (typeof e.left == "number" && typeof e.top == "number") {
      const { left: c, top: u, width: h = 0, height: d = 0 } = e, m = u + d > window.innerHeight && u > d, g = c + h > window.innerWidth && c > h;
      return { left: c, top: u, positionAbove: m, positionLeft: g };
    } else
      throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"');
  }
  const i = t.getBoundingClientRect(), { left: r, top: o, positionAbove: s, positionLeft: l } = n(), a = s ? `bottom: ${i.top - o}px;` : `top: ${o - i.top}px;`, f = l ? `right: ${i.left - r}px;` : `left: ${r - i.left}px;`;
  return a + f;
}
function Y9(t, e, n) {
  let { popup: i } = e, { closeAbsolutePopup: r } = e, o, s;
  zi(u);
  function l(m) {
    i.options && i.options.closeOnOuterClick && !ff(m.target, (g) => g === o) && r(i.id);
  }
  function a(m) {
    l(m);
  }
  function f(m) {
    es(m) === "Escape" && r(i.id);
  }
  function c(m) {
    l(m);
  }
  function u() {
    s && s.focus();
  }
  function h(m) {
    mt[m ? "unshift" : "push"](() => {
      s = m, n(2, s);
    });
  }
  function d(m) {
    mt[m ? "unshift" : "push"](() => {
      o = m, n(1, o);
    });
  }
  return t.$$set = (m) => {
    "popup" in m && n(0, i = m.popup), "closeAbsolutePopup" in m && n(6, r = m.closeAbsolutePopup);
  }, [
    i,
    o,
    s,
    a,
    f,
    c,
    r,
    h,
    d
  ];
}
class Z9 extends Be {
  constructor(e) {
    super(), je(this, e, Y9, X9, It, { popup: 0, closeAbsolutePopup: 6 });
  }
}
const $9 = Z9;
function j0(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function B0(t) {
  let e, n;
  return e = new $9({
    props: {
      popup: t[6],
      closeAbsolutePopup: t[1]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.popup = i[6]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function eR(t) {
  let e, n, i = t[0], r = [];
  for (let a = 0; a < i.length; a += 1)
    r[a] = B0(j0(t, i, a));
  const o = (a) => E(r[a], 1, 1, () => {
    r[a] = null;
  }), s = t[3].default, l = An(s, t, t[2], null);
  return {
    c() {
      for (let a = 0; a < r.length; a += 1)
        r[a].c();
      e = q(), l && l.c();
    },
    m(a, f) {
      for (let c = 0; c < r.length; c += 1)
        r[c].m(a, f);
      B(a, e, f), l && l.m(a, f), n = !0;
    },
    p(a, [f]) {
      if (f & 3) {
        i = a[0];
        let c;
        for (c = 0; c < i.length; c += 1) {
          const u = j0(a, i, c);
          r[c] ? (r[c].p(u, f), C(r[c], 1)) : (r[c] = B0(u), r[c].c(), C(r[c], 1), r[c].m(e.parentNode, e));
        }
        for (me(), c = i.length; c < r.length; c += 1)
          o(c);
        pe();
      }
      l && l.p && (!n || f & 4) && Tn(
        l,
        s,
        a,
        a[2],
        n ? On(s, a[2], f, null) : En(a[2]),
        null
      );
    },
    i(a) {
      if (!n) {
        for (let f = 0; f < i.length; f += 1)
          C(r[f]);
        C(l, a), n = !0;
      }
    },
    o(a) {
      r = r.filter(Boolean);
      for (let f = 0; f < r.length; f += 1)
        E(r[f]);
      E(l, a), n = !1;
    },
    d(a) {
      zt(r, a), a && j(e), l && l.d(a);
    }
  };
}
function tR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const o = Qn("jsoneditor:AbsolutePopup");
  let s = [];
  function l(f, c, u) {
    o("open...", c, u);
    const h = {
      id: ma(),
      component: f,
      props: c || {},
      options: u || {}
    };
    return n(0, s = [...s, h]), h.id;
  }
  function a(f) {
    const c = s.findIndex((u) => u.id === f);
    if (c !== -1) {
      const u = s[c];
      u.options.onClose && u.options.onClose(), n(0, s = s.filter((h) => h.id !== f));
    }
  }
  return wk("absolute-popup", { openAbsolutePopup: l, closeAbsolutePopup: a }), t.$$set = (f) => {
    "$$scope" in f && n(2, r = f.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && o("popups", s);
  }, [s, a, r, i];
}
class nR extends Be {
  constructor(e) {
    super(), je(this, e, tR, eR, gt, {});
  }
}
const z3 = nR;
function Oi(t) {
  return "$" + t.map(iR).join("");
}
function iR(t) {
  if (F3.test(t))
    return "[" + t + "]";
  if (V3.test(t))
    return "." + t;
  {
    const e = JSON.stringify(t);
    return "['" + e.substring(1, e.length - 1).replace(/\\"/g, '"') + "']";
  }
}
function Yi(t) {
  return t.replace(/^\$/, "").replace(/^\./, "");
}
function rR(t) {
  return t.startsWith("$") ? t : !t.startsWith("[") && !t.startsWith(".") ? "$." + t : "$" + t;
}
function oR(t) {
  let e = rR(t.trim()).substring(1);
  const n = [];
  for (; e.length > 0; ) {
    const i = e.match(fR);
    if (!i)
      throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${t.length - e.length}`);
    n.push(i[1] || i[2] || i[3]), e = e.substring(i[0].length);
  }
  return n;
}
const sR = "^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)", lR = "^\\[([0-9]+)]", aR = "^\\['(.*)']", fR = new RegExp([sR, lR, aR].join("|"));
function Gs(t) {
  return {
    value: t,
    label: At(t) ? "(whole item)" : Yi(Oi(t))
  };
}
function cs(t) {
  return t.map((e) => F3.test(e) ? `?.[${e}]` : V3.test(e) ? `?.${e}` : `?.[${JSON.stringify(e)}]`).join("");
}
const V3 = /^[a-zA-Z$_][a-zA-Z$_\d]*$/, F3 = /^\d+$/;
function cR() {
  return lh((t) => t, Oi);
}
function cf(t, e) {
  const n = new Set(e), i = t.replace(/ \(copy( \d+)?\)$/, "");
  let r = t, o = 1;
  for (; n.has(r); ) {
    const s = "copy" + (o > 1 ? " " + o : "");
    r = `${i} (${s})`, o++;
  }
  return r;
}
function Jr(t, e) {
  const n = "...", i = e - n.length;
  return t.length > e ? t.substring(0, i) + n : t;
}
function uR(t) {
  if (t === "")
    return "";
  const e = t.toLowerCase();
  if (e === "null")
    return null;
  if (e === "true")
    return !0;
  if (e === "false")
    return !1;
  if (e === "undefined")
    return;
  const n = Number(t), i = parseFloat(t);
  return !isNaN(n) && !isNaN(i) ? n : t;
}
const hR = `
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`, dR = {
  id: "javascript",
  name: "JavaScript",
  description: hR,
  createQuery: mR,
  executeQuery: pR
};
function mR(t, e) {
  const { filter: n, sort: i, projection: r } = e, o = [];
  if (n && n.path && n.relation && n.value) {
    const s = `item => item${cs(n.path)}`, l = uR(n.value), a = typeof l == "string" ? `'${n.value}'` : cA(n.value) && !Number.isSafeInteger(l) ? `${n.value}n` : n.value;
    o.push(`  data = data.filter(${s} ${n.relation} ${a})
`);
  }
  if (i && i.path && i.direction && (i.direction === "desc" ? o.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${cs(i.path)}
    const valueB = b${cs(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`) : o.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${cs(i.path)}
    const valueB = b${cs(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)), r && r.paths)
    if (r.paths.length > 1) {
      const s = r.paths.map((l) => {
        const a = l[l.length - 1] || "item", f = `item${cs(l)}`;
        return `    ${JSON.stringify(a)}: ${f}`;
      });
      o.push(`  data = data.map(item => ({
${s.join(`,
`)}})
  )
`);
    } else {
      const s = `item${cs(r.paths[0])}`;
      o.push(`  data = data.map(item => ${s})
`);
    }
  return o.push(`  return data
`), `function query (data) {
${o.join("")}}`;
}
function pR(t, e) {
  const i = new Function(`"use strict";

` + e + `

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(t);
  return i !== void 0 ? i : null;
}
var gR = {
  prefix: "far",
  iconName: "lightbulb",
  icon: [384, 512, [128161], "f0eb", "M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]
}, bR = {
  prefix: "far",
  iconName: "square-check",
  icon: [448, 512, [9745, 9989, 61510, "check-square"], "f14a", "M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]
}, Na = bR, Da = {
  prefix: "far",
  iconName: "square",
  icon: [448, 512, [9632, 9723, 9724, 61590], "f0c8", "M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]
}, _R = {
  prefix: "far",
  iconName: "clock",
  icon: [512, 512, [128339, "clock-four"], "f017", "M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]
};
function yR(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = $o(i, n[r]);
  return {
    c() {
      e = ut("path"), Vc(e, i);
    },
    m(r, o) {
      B(r, e, o);
    },
    p(r, [o]) {
      Vc(e, i = xs(n, [o & 1 && r[0]]));
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function wR(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class vR extends Be {
  constructor(e) {
    super(), je(this, e, wR, yR, It, { data: 0 });
  }
}
function kR(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = $o(i, n[r]);
  return {
    c() {
      e = ut("polygon"), Vc(e, i);
    },
    m(r, o) {
      B(r, e, o);
    },
    p(r, [o]) {
      Vc(e, i = xs(n, [o & 1 && r[0]]));
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function CR(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class SR extends Be {
  constructor(e) {
    super(), je(this, e, CR, kR, It, { data: 0 });
  }
}
function MR(t) {
  let e;
  return {
    c() {
      e = ut("g");
    },
    m(n, i) {
      B(n, e, i), e.innerHTML = t[0];
    },
    p(n, [i]) {
      i & 1 && (e.innerHTML = n[0]);
    },
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function AR(t, e, n) {
  let i = 870711;
  function r() {
    return i += 1, `fa-${i.toString(16)}`;
  }
  let o, { data: s } = e;
  function l(a) {
    if (!a || !a.raw)
      return null;
    let f = a.raw;
    const c = {};
    return f = f.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g, (u, h) => {
      const d = r();
      return c[h] = d, ` id="${d}"`;
    }), f = f.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g, (u, h, d, m) => {
      const g = h || m;
      return !g || !c[g] ? u : `#${c[g]}`;
    }), f;
  }
  return t.$$set = (a) => {
    "data" in a && n(1, s = a.data);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(0, o = l(s));
  }, [o, s];
}
class OR extends Be {
  constructor(e) {
    super(), je(this, e, AR, MR, It, { data: 1 });
  }
}
function TR(t) {
  let e, n, i, r;
  const o = t[13].default, s = An(o, t, t[12], null);
  return {
    c() {
      e = ut("svg"), s && s.c(), p(e, "version", "1.1"), p(e, "class", n = "fa-icon " + t[0] + " svelte-1dof0an"), p(e, "x", t[8]), p(e, "y", t[9]), p(e, "width", t[1]), p(e, "height", t[2]), p(e, "aria-label", t[11]), p(e, "role", i = t[11] ? "img" : "presentation"), p(e, "viewBox", t[3]), p(e, "style", t[10]), de(e, "fa-spin", t[4]), de(e, "fa-pulse", t[6]), de(e, "fa-inverse", t[5]), de(e, "fa-flip-horizontal", t[7] === "horizontal"), de(e, "fa-flip-vertical", t[7] === "vertical");
    },
    m(l, a) {
      B(l, e, a), s && s.m(e, null), r = !0;
    },
    p(l, [a]) {
      s && s.p && (!r || a & 4096) && Tn(
        s,
        o,
        l,
        l[12],
        r ? On(o, l[12], a, null) : En(l[12]),
        null
      ), (!r || a & 1 && n !== (n = "fa-icon " + l[0] + " svelte-1dof0an")) && p(e, "class", n), (!r || a & 256) && p(e, "x", l[8]), (!r || a & 512) && p(e, "y", l[9]), (!r || a & 2) && p(e, "width", l[1]), (!r || a & 4) && p(e, "height", l[2]), (!r || a & 2048) && p(e, "aria-label", l[11]), (!r || a & 2048 && i !== (i = l[11] ? "img" : "presentation")) && p(e, "role", i), (!r || a & 8) && p(e, "viewBox", l[3]), (!r || a & 1024) && p(e, "style", l[10]), (!r || a & 17) && de(e, "fa-spin", l[4]), (!r || a & 65) && de(e, "fa-pulse", l[6]), (!r || a & 33) && de(e, "fa-inverse", l[5]), (!r || a & 129) && de(e, "fa-flip-horizontal", l[7] === "horizontal"), (!r || a & 129) && de(e, "fa-flip-vertical", l[7] === "vertical");
    },
    i(l) {
      r || (C(s, l), r = !0);
    },
    o(l) {
      E(s, l), r = !1;
    },
    d(l) {
      l && j(e), s && s.d(l);
    }
  };
}
function ER(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: o } = e, { width: s } = e, { height: l } = e, { box: a } = e, { spin: f = !1 } = e, { inverse: c = !1 } = e, { pulse: u = !1 } = e, { flip: h = null } = e, { x: d = void 0 } = e, { y: m = void 0 } = e, { style: g = void 0 } = e, { label: _ = void 0 } = e;
  return t.$$set = (b) => {
    "class" in b && n(0, o = b.class), "width" in b && n(1, s = b.width), "height" in b && n(2, l = b.height), "box" in b && n(3, a = b.box), "spin" in b && n(4, f = b.spin), "inverse" in b && n(5, c = b.inverse), "pulse" in b && n(6, u = b.pulse), "flip" in b && n(7, h = b.flip), "x" in b && n(8, d = b.x), "y" in b && n(9, m = b.y), "style" in b && n(10, g = b.style), "label" in b && n(11, _ = b.label), "$$scope" in b && n(12, r = b.$$scope);
  }, [
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    r,
    i
  ];
}
class PR extends Be {
  constructor(e) {
    super(), je(this, e, ER, TR, It, {
      class: 0,
      width: 1,
      height: 2,
      box: 3,
      spin: 4,
      inverse: 5,
      pulse: 6,
      flip: 7,
      x: 8,
      y: 9,
      style: 10,
      label: 11
    });
  }
}
function L0(t, e, n) {
  const i = t.slice();
  return i[24] = e[n], i;
}
function x0(t, e, n) {
  const i = t.slice();
  return i[27] = e[n], i;
}
function z0(t) {
  let e, n, i, r, o = t[6].paths && V0(t), s = t[6].polygons && H0(t), l = t[6].raw && U0(t);
  return {
    c() {
      o && o.c(), e = q(), s && s.c(), n = q(), l && l.c(), i = Ze();
    },
    m(a, f) {
      o && o.m(a, f), B(a, e, f), s && s.m(a, f), B(a, n, f), l && l.m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      a[6].paths ? o ? (o.p(a, f), f & 64 && C(o, 1)) : (o = V0(a), o.c(), C(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), pe()), a[6].polygons ? s ? (s.p(a, f), f & 64 && C(s, 1)) : (s = H0(a), s.c(), C(s, 1), s.m(n.parentNode, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), pe()), a[6].raw ? l ? (l.p(a, f), f & 64 && C(l, 1)) : (l = U0(a), l.c(), C(l, 1), l.m(i.parentNode, i)) : l && (me(), E(l, 1, 1, () => {
        l = null;
      }), pe());
    },
    i(a) {
      r || (C(o), C(s), C(l), r = !0);
    },
    o(a) {
      E(o), E(s), E(l), r = !1;
    },
    d(a) {
      o && o.d(a), a && j(e), s && s.d(a), a && j(n), l && l.d(a), a && j(i);
    }
  };
}
function V0(t) {
  let e, n, i = t[6].paths, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = F0(x0(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l & 64) {
        i = s[6].paths;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = x0(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = F0(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function F0(t) {
  let e, n;
  return e = new vR({ props: { data: t[27] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.data = i[27]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function H0(t) {
  let e, n, i = t[6].polygons, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = W0(L0(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l & 64) {
        i = s[6].polygons;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = L0(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = W0(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function W0(t) {
  let e, n;
  return e = new SR({ props: { data: t[24] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.data = i[24]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function U0(t) {
  let e, n, i;
  function r(s) {
    t[15](s);
  }
  let o = {};
  return t[6] !== void 0 && (o.data = t[6]), e = new OR({ props: o }), mt.push(() => lr(e, "data", r, t[6])), {
    c() {
      se(e.$$.fragment);
    },
    m(s, l) {
      re(e, s, l), i = !0;
    },
    p(s, l) {
      const a = {};
      !n && l & 64 && (n = !0, a.data = s[6], sr(() => n = !1)), e.$set(a);
    },
    i(s) {
      i || (C(e.$$.fragment, s), i = !0);
    },
    o(s) {
      E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      oe(e, s);
    }
  };
}
function RR(t) {
  let e, n, i = t[6] && z0(t);
  return {
    c() {
      i && i.c(), e = Ze();
    },
    m(r, o) {
      i && i.m(r, o), B(r, e, o), n = !0;
    },
    p(r, o) {
      r[6] ? i ? (i.p(r, o), o & 64 && C(i, 1)) : (i = z0(r), i.c(), C(i, 1), i.m(e.parentNode, e)) : i && (me(), E(i, 1, 1, () => {
        i = null;
      }), pe());
    },
    i(r) {
      n || (C(i), n = !0);
    },
    o(r) {
      E(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && j(e);
    }
  };
}
function IR(t) {
  let e;
  const n = t[14].default, i = An(n, t, t[16], null), r = i || RR(t);
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i ? i.p && (!e || s & 65536) && Tn(
        i,
        n,
        o,
        o[16],
        e ? On(n, o[16], s, null) : En(o[16]),
        null
      ) : r && r.p && (!e || s & 64) && r.p(o, e ? s : -1);
    },
    i(o) {
      e || (C(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function NR(t) {
  let e, n;
  return e = new PR({
    props: {
      label: t[5],
      width: t[7],
      height: t[8],
      box: t[10],
      style: t[9],
      spin: t[1],
      flip: t[4],
      inverse: t[2],
      pulse: t[3],
      class: t[0],
      $$slots: { default: [IR] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 32 && (o.label = i[5]), r & 128 && (o.width = i[7]), r & 256 && (o.height = i[8]), r & 1024 && (o.box = i[10]), r & 512 && (o.style = i[9]), r & 2 && (o.spin = i[1]), r & 16 && (o.flip = i[4]), r & 4 && (o.inverse = i[2]), r & 8 && (o.pulse = i[3]), r & 1 && (o.class = i[0]), r & 65600 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
let q0 = 1;
function DR(t) {
  if ("iconName" in t && "icon" in t) {
    let e = {}, n = t.icon, i = t.iconName, r = n[0], o = n[1], s = n[4], l = { width: r, height: o, paths: [{ d: s }] };
    return e[i] = l, e;
  }
  return t;
}
function jR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: o = "" } = e, { data: s } = e, { scale: l = 1 } = e, { spin: a = !1 } = e, { inverse: f = !1 } = e, { pulse: c = !1 } = e, { flip: u = null } = e, { label: h = null } = e, d = null, { style: m = null } = e, g, _, b, w;
  function v() {
    if (typeof s > "u")
      return;
    const N = DR(s), [W] = Object.keys(N), U = N[W];
    U.paths || (U.paths = []), U.d && U.paths.push({ d: U.d }), U.polygons || (U.polygons = []), U.points && U.polygons.push({ points: U.points }), n(6, d = U);
  }
  function M() {
    let N = 1;
    return typeof l < "u" && (N = Number(l)), isNaN(N) || N <= 0 ? (console.warn('Invalid prop: prop "scale" should be a number over 0.'), q0) : N * q0;
  }
  function S() {
    return d ? `0 0 ${d.width} ${d.height}` : `0 0 ${g} ${_}`;
  }
  function R() {
    return d ? Math.max(d.width, d.height) / 16 : 1;
  }
  function k() {
    return d ? d.width / R() * M() : 0;
  }
  function I() {
    return d ? d.height / R() * M() : 0;
  }
  function L() {
    let N = "";
    m !== null && (N += m);
    let W = M();
    return W === 1 ? N.length === 0 ? void 0 : N : (N !== "" && !N.endsWith(";") && (N += "; "), `${N}font-size: ${W}em`);
  }
  function V(N) {
    d = N, n(6, d);
  }
  return t.$$set = (N) => {
    "class" in N && n(0, o = N.class), "data" in N && n(11, s = N.data), "scale" in N && n(12, l = N.scale), "spin" in N && n(1, a = N.spin), "inverse" in N && n(2, f = N.inverse), "pulse" in N && n(3, c = N.pulse), "flip" in N && n(4, u = N.flip), "label" in N && n(5, h = N.label), "style" in N && n(13, m = N.style), "$$scope" in N && n(16, r = N.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 14336 && (v(), n(7, g = k()), n(8, _ = I()), n(9, b = L()), n(10, w = S()));
  }, [
    o,
    a,
    f,
    c,
    u,
    h,
    d,
    g,
    _,
    b,
    w,
    s,
    l,
    m,
    i,
    V,
    r
  ];
}
class Ct extends Be {
  constructor(e) {
    super(), je(this, e, jR, NR, It, {
      class: 0,
      data: 11,
      scale: 12,
      spin: 1,
      inverse: 2,
      pulse: 3,
      flip: 4,
      label: 5,
      style: 13
    });
  }
}
function BR(t) {
  let e, n, i, r, o, s;
  return n = new Ct({
    props: {
      data: t[0] === !0 ? Na : Da
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-boolean-toggle svelte-1vj58yv"), p(e, "title", i = t[1] ? `Boolean value ${t[0]}` : "Click to toggle this boolean value"), de(e, "jse-readonly", t[1]);
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), r = !0, o || (s = X(e, "mousedown", t[2]), o = !0);
    },
    p(l, [a]) {
      const f = {};
      a & 1 && (f.data = l[0] === !0 ? Na : Da), n.$set(f), (!r || a & 3 && i !== (i = l[1] ? `Boolean value ${l[0]}` : "Click to toggle this boolean value")) && p(e, "title", i), (!r || a & 2) && de(e, "jse-readonly", l[1]);
    },
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n), o = !1, s();
    }
  };
}
function LR(t, e, n) {
  let { path: i } = e, { value: r } = e, { readOnly: o } = e, { onPatch: s } = e, { focus: l } = e;
  function a(f) {
    f.stopPropagation(), !o && (s([
      {
        op: "replace",
        path: Se(i),
        value: !r
      }
    ]), setTimeout(l));
  }
  return t.$$set = (f) => {
    "path" in f && n(3, i = f.path), "value" in f && n(0, r = f.value), "readOnly" in f && n(1, o = f.readOnly), "onPatch" in f && n(4, s = f.onPatch), "focus" in f && n(5, l = f.focus);
  }, [r, o, a, i, s, l];
}
class xR extends Be {
  constructor(e) {
    super(), je(this, e, LR, BR, gt, {
      path: 3,
      value: 0,
      readOnly: 1,
      onPatch: 4,
      focus: 5
    });
  }
}
const zR = xR;
function VR(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-color-picker-popup svelte-1gn8yt9");
    },
    m(n, i) {
      B(n, e, i), t[4](e);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e), t[4](null);
    }
  };
}
function FR(t, e, n) {
  let { color: i } = e, { onChange: r } = e, { showOnTop: o } = e, s, l;
  zi(async () => {
    const f = (await import("./vanilla-picker-b99e900d.js")).default;
    l = new f({
      parent: s,
      color: i,
      popup: o ? "top" : "bottom",
      onDone(c) {
        const h = c.rgba[3] === 1 ? c.hex.substring(0, 7) : c.hex;
        r(h);
      }
    }), l.show();
  }), qr(() => {
    l && l.destroy();
  });
  function a(f) {
    mt[f ? "unshift" : "push"](() => {
      s = f, n(0, s);
    });
  }
  return t.$$set = (f) => {
    "color" in f && n(1, i = f.color), "onChange" in f && n(2, r = f.onChange), "showOnTop" in f && n(3, o = f.showOnTop);
  }, [s, i, r, o, a];
}
class HR extends Be {
  constructor(e) {
    super(), je(this, e, FR, VR, It, { color: 1, onChange: 2, showOnTop: 3 });
  }
}
const WR = HR;
function UR(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("button"), p(e, "type", "button"), p(e, "class", "jse-color-picker-button svelte-1nv0s05"), mi(e, "background", t[2]), p(e, "title", n = t[1] ? `Color ${t[0]}` : "Click to open a color picker"), de(e, "jse-readonly", t[1]);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "click", t[3]), i = !0);
    },
    p(o, [s]) {
      s & 4 && mi(e, "background", o[2]), s & 3 && n !== (n = o[1] ? `Color ${o[0]}` : "Click to open a color picker") && p(e, "title", n), s & 2 && de(e, "jse-readonly", o[1]);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function qR(t, e, n) {
  let i;
  const { openAbsolutePopup: r } = Xn("absolute-popup");
  let { path: o } = e, { value: s } = e, { readOnly: l } = e, { onPatch: a } = e, { focus: f } = e;
  function c(d) {
    a([
      {
        op: "replace",
        path: Se(o),
        value: d
      }
    ]), u();
  }
  function u() {
    f();
  }
  function h(d) {
    if (l)
      return;
    const m = 300, g = d.target.getBoundingClientRect().top, b = Wl(d.target).innerHeight - g < m && g > m;
    r(WR, { color: s, onChange: c, showOnTop: b }, {
      anchor: d.target,
      closeOnOuterClick: !0,
      onClose: u,
      offsetTop: 18,
      offsetLeft: -8,
      height: m
    });
  }
  return t.$$set = (d) => {
    "path" in d && n(4, o = d.path), "value" in d && n(0, s = d.value), "readOnly" in d && n(1, l = d.readOnly), "onPatch" in d && n(5, a = d.onPatch), "focus" in d && n(6, f = d.focus);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = Uk(s));
  }, [s, l, i, h, o, a, f];
}
class JR extends Be {
  constructor(e) {
    super(), je(this, e, qR, UR, gt, {
      path: 4,
      value: 0,
      readOnly: 1,
      onPatch: 5,
      focus: 6
    });
  }
}
const KR = JR;
function GR(t, e) {
  const n = {
    start: t,
    end: Math.min(ym(t), e)
  }, i = Math.max(eu((t + e) / 2), t), r = {
    start: i,
    end: Math.min(ym(i), e)
  }, o = eu(e), s = o === e ? o - Aa : o, l = {
    start: Math.max(s, t),
    end: e
  }, a = [n], f = r.start >= n.end && r.end <= l.start;
  return f && a.push(r), l.start >= (f ? r.end : n.end) && a.push(l), a;
}
function H3(t) {
  const e = y9(t, (i) => i.start), n = [e[0]];
  for (let i = 0; i < e.length; i++) {
    const r = n.length - 1, o = n[r], s = e[i];
    s.start <= o.end ? n[r] = {
      start: Math.min(o.start, s.start),
      end: Math.max(o.end, s.end)
    } : n.push(s);
  }
  return n;
}
function XR(t, e) {
  return t.some((n) => e >= n.start && e < n.end);
}
function ym(t) {
  return eu(t) + Aa;
}
function eu(t) {
  return Math.floor(t / Aa) * Aa;
}
function tu(t) {
  let e = {
    expandedMap: {},
    enforceStringMap: {},
    visibleSectionsMap: {},
    selection: void 0,
    sortedColumn: void 0
  };
  return t != null && t.select && (e = {
    ...e,
    selection: t.select(t.json, e)
  }), t != null && t.expand && (e = Hi(t.json, e, [], t.expand)), e;
}
function mh(t, e) {
  return t.visibleSectionsMap[e] || Os;
}
function Qp(t, e, n) {
  e.forEach(({ start: i, end: r }) => {
    S3(i, Math.min(t.length, r), n);
  });
}
function wm(t, e, n) {
  const i = { ...e.expandedMap }, r = { ...e.visibleSectionsMap };
  for (let o = 0; o <= n.length; o++) {
    const s = n.slice(0, o), l = Se(s), a = Le(t, s);
    if (rn(a) && (i[l] = !0), Array.isArray(a) && o < n.length) {
      const f = r[l] || Os, c = Nn(n[o]);
      if (!XR(f, c)) {
        const u = eu(c), h = ym(u), d = { start: u, end: h };
        r[l] = H3(f.concat(d));
      }
    }
  }
  return {
    ...e,
    expandedMap: i,
    visibleSectionsMap: r
  };
}
function Hi(t, e, n, i) {
  const r = { ...e.expandedMap };
  function o(l) {
    const a = s.length;
    if (Array.isArray(l)) {
      if (i(s)) {
        const f = Se(s);
        if (r[f] = !0, l.length > 0) {
          const c = mh(e, f);
          Qp(l, c, (u) => {
            s[a] = String(u), o(l[u]);
          }), s.pop();
        }
      }
    } else if (pn(l) && i(s)) {
      r[Se(s)] = !0;
      const f = Object.keys(l);
      if (f.length > 0) {
        for (const c of f)
          s[a] = c, o(l[c]);
        s.pop();
      }
    }
  }
  const s = n.slice();
  return o(Le(t, n)), {
    ...e,
    expandedMap: r
  };
}
function QR(t, e) {
  return {
    ...t,
    expandedMap: {
      ...t.expandedMap,
      [Se(e)]: !0
    }
  };
}
function W3(t, e) {
  const n = ol(t.expandedMap, e), i = ol(t.enforceStringMap, e), r = ol(t.visibleSectionsMap, e);
  return {
    ...t,
    expandedMap: n,
    enforceStringMap: i,
    visibleSectionsMap: r
  };
}
function U3(t, e, n) {
  if (n) {
    const i = { ...t.enforceStringMap };
    return i[e] = n, {
      ...t,
      enforceStringMap: i
    };
  } else if (typeof t.enforceStringMap[e] == "boolean") {
    const i = { ...t.enforceStringMap };
    return delete i[e], {
      ...t,
      enforceStringMap: i
    };
  } else
    return t;
}
function YR(t, e, n, i) {
  return {
    ...e,
    visibleSectionsMap: {
      ...e.visibleSectionsMap,
      [n]: H3(mh(e, n).concat(i))
    }
  };
}
function q3(t, e, n) {
  const i = mr(t, n), r = n.reduce((o, s) => Pk(s) ? J3(i, o, s) : Rk(s) ? K3(i, o, s) : Op(s) ? ZR(i, o, s) : tm(s) || bl(s) ? $R(i, o, s) : o, e);
  return {
    json: i,
    documentState: r
  };
}
function J3(t, e, n) {
  const i = Br(t, n.path), r = kt(i), o = Se(r), s = Le(t, r);
  if (xt(s)) {
    const l = Nn($e(i)), a = sl(e.expandedMap, r, l, 1), f = sl(e.enforceStringMap, r, l, 1);
    let c = sl(e.visibleSectionsMap, r, l, 1);
    return c = G3(c, o, (u) => X3(u, l, 1)), {
      ...e,
      expandedMap: a,
      enforceStringMap: f,
      visibleSectionsMap: c
    };
  }
  return e;
}
function K3(t, e, n) {
  const i = Br(t, n.path), r = kt(i), o = Se(r), s = Le(t, r);
  let { expandedMap: l, enforceStringMap: a, visibleSectionsMap: f } = e;
  if (l = ol(l, i), a = ol(a, i), f = ol(f, i), xt(s)) {
    const c = Nn($e(i));
    l = sl(l, r, c, -1), a = sl(a, r, c, -1), f = sl(f, r, c, -1), f = G3(f, o, (u) => X3(u, c, -1));
  }
  return {
    ...e,
    expandedMap: l,
    enforceStringMap: a,
    visibleSectionsMap: f
  };
}
function ZR(t, e, n) {
  const i = n.path, r = hd(t, e.expandedMap), o = hd(t, e.enforceStringMap), s = hd(t, e.visibleSectionsMap);
  return !bn(n.value) && !xt(n.value) && delete r[i], xt(n.value) || delete s[i], (bn(n.value) || xt(n.value)) && delete o[i], {
    ...e,
    expandedMap: r,
    enforceStringMap: o,
    visibleSectionsMap: s
  };
}
function $R(t, e, n) {
  if (bl(n) && n.from === n.path)
    return e;
  const i = (u) => n.path + u.substring(n.from.length), r = ud(fd(e.expandedMap, n.from), i), o = ud(fd(e.enforceStringMap, n.from), i), s = ud(fd(e.visibleSectionsMap, n.from), i);
  let l = e;
  bl(n) && (l = K3(t, l, {
    op: "remove",
    path: n.from
  })), l = J3(t, l, {
    op: "add",
    path: n.path,
    value: null
  });
  const a = cd(l.expandedMap, r), f = cd(l.enforceStringMap, o), c = cd(l.visibleSectionsMap, s);
  return {
    ...e,
    expandedMap: a,
    enforceStringMap: f,
    visibleSectionsMap: c
  };
}
function ol(t, e) {
  const n = {}, i = Se(e);
  return Object.keys(t).forEach((r) => {
    _l(r, i) || (n[r] = t[r]);
  }), n;
}
function fd(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    _l(i, e) && (n[i] = t[i]);
  }), n;
}
function cd(t, e) {
  return { ...t, ...e };
}
function ud(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    const r = e(i);
    n[r] = t[i];
  }), n;
}
function sl(t, e, n, i) {
  const r = e.length, o = Se(e), s = [];
  for (const a of Object.keys(t))
    if (_l(a, o)) {
      const f = gr(a), c = Nn(f[r]);
      c >= n && (f[r] = String(c + i), s.push({
        oldPointer: a,
        newPointer: Se(f),
        value: t[a]
      }));
    }
  if (s.length === 0)
    return t;
  const l = { ...t };
  return s.forEach((a) => {
    delete l[a.oldPointer];
  }), s.forEach((a) => {
    l[a.newPointer] = a.value;
  }), l;
}
function hd(t, e) {
  const n = {};
  return Object.keys(e).filter((i) => Ki(t, Br(t, i))).forEach((i) => {
    n[i] = e[i];
  }), n;
}
function G3(t, e, n) {
  const i = t[e];
  if (e in t) {
    const r = n(i);
    if (!St(i, r)) {
      const o = { ...t };
      return r === void 0 ? delete o[e] : o[e] = r, o;
    }
  }
  return t;
}
function X3(t, e, n) {
  return t.map((i) => ({
    start: i.start > e ? i.start + n : i.start,
    end: i.end >= e ? i.end + n : i.end
  }));
}
function uo(t, e, n, i) {
  const r = e ? e[n] : void 0;
  return typeof r == "boolean" ? r : fA(t, i);
}
function uf(t, e, n = !1) {
  const i = t.indexOf(e);
  return i !== -1 ? n ? t.slice(i) : t.slice(i + 1) : [];
}
function Yp(t, e) {
  const n = [];
  function i(r, o) {
    n.push(o);
    const s = Se(o);
    if (r && e.expandedMap[s] === !0) {
      if (xt(r)) {
        const l = mh(e, s);
        Qp(r, l, (a) => {
          i(r[a], o.concat(String(a)));
        });
      }
      bn(r) && Object.keys(r).forEach((l) => {
        i(r[l], o.concat(l));
      });
    }
  }
  return i(t, []), n;
}
function Q3(t, e, n = !0) {
  const i = [];
  function r(o, s) {
    i.push({ path: s, type: ar.value });
    const l = Se(s);
    if (o && e.expandedMap[l] === !0) {
      if (n && i.push({ path: s, type: ar.inside }), xt(o)) {
        const a = mh(e, l);
        Qp(o, a, (f) => {
          const c = s.concat(String(f));
          r(o[f], c), n && i.push({ path: c, type: ar.after });
        });
      }
      bn(o) && Object.keys(o).forEach((f) => {
        const c = s.concat(f);
        i.push({ path: c, type: ar.key }), r(o[f], c), n && i.push({ path: c, type: ar.after });
      });
    }
  }
  return r(t, []), i;
}
function eI(t, e, n) {
  const i = Yp(t, e), r = i.map(Se), o = Se(n), s = r.indexOf(o);
  return s !== -1 && s > 0 ? i[s - 1] : null;
}
function vm(t, e, n) {
  const i = Yp(t, e), o = i.map(Se).indexOf(Se(n));
  return o !== -1 && o < i.length - 1 ? i[o + 1] : null;
}
function Eo(t, e, n) {
  const i = Le(t, n), o = !T3({ json: i }, Ek) ? ja : Nr;
  return Hi(t, e, n, o);
}
function Nr(t) {
  return t.length === 0 ? !0 : t.length === 1 && t[0] === "0";
}
function ja() {
  return !0;
}
function tI(t) {
  return T3({ json: t }, Ek) ? Nr : ja;
}
function ur(t) {
  return t && t.type === Ht.after || !1;
}
function Dn(t) {
  return t && t.type === Ht.inside || !1;
}
function kn(t) {
  return t && t.type === Ht.key || !1;
}
function vt(t) {
  return t && t.type === Ht.value || !1;
}
function Pt(t) {
  return t && t.type === Ht.multi || !1;
}
function nI(t, e, n) {
  if (St(e, n))
    return [e];
  {
    const i = aI(e, n);
    if (e.length === i.length || n.length === i.length)
      return [i];
    const r = e[i.length], o = n[i.length], s = Le(t, i);
    if (bn(s)) {
      const l = Object.keys(s), a = l.indexOf(r), f = l.indexOf(o);
      if (a !== -1 && f !== -1) {
        const c = Math.min(a, f), u = Math.max(a, f), h = [];
        for (let d = c; d <= u; d++)
          h.push(i.concat(l[d]));
        return h;
      }
    }
    if (xt(s)) {
      const l = Math.min(Nn(r), Nn(o)), a = Math.max(Nn(r), Nn(o)), f = [];
      for (let c = l; c <= a; c++)
        f.push(i.concat(String(c)));
      return f;
    }
  }
  throw new Error("Failed to create selection");
}
function Y3(t) {
  return Dn(t) ? t.focusPath : kt(t.focusPath);
}
function Sl(t) {
  return Pt(t) ? bi(t.paths) : t.focusPath;
}
function ph(t) {
  return Pt(t) ? $e(t.paths) : t.focusPath;
}
function iI(t, e) {
  return Al(t.focusPath, e) && (t.focusPath.length > e.length || Dn(t));
}
function Z3(t, e, n) {
  if (!t)
    return !1;
  const i = e.slice(0);
  if (Pt(t))
    for (; i.length > 0; ) {
      if (t.pointersMap[Se(i)] === !0)
        return !0;
      i.pop();
    }
  return kn(t) ? n === Ht.key && St(t.focusPath, e) : !!(vt(t) && (n === Ht.value && St(t.focusPath, e) || Al(e, t.focusPath) && e.length > t.focusPath.length && (n === Ht.key || n === Ht.value || n === Ht.multi)));
}
function J0(t, e, n = !1, i = !1) {
  const r = e.selection, o = !i && Pt(r) ? bi(r.paths) : r.focusPath, s = eI(t, e, o);
  if (s === null)
    return null;
  const l = s, a = s;
  if (n)
    return ur(r) || Dn(r) ? vn(t, r.anchorPath, r.anchorPath) : vn(t, r.anchorPath, a);
  if (kn(r)) {
    const f = kt(s), c = Le(t, f);
    return Array.isArray(c) || At(s) ? Et(s, !1) : Gi(s, !1);
  }
  return vt(r) ? Et(s, !1) : ur(r) || Dn(r) ? vn(t, o, o) : vn(t, l, a);
}
function rI(t, e, n = !1, i = !1) {
  const r = e.selection, o = !i && Pt(r) ? $e(r.paths) : r.focusPath, s = vm(t, e, o), l = s, a = s;
  if (s === null)
    return null;
  if (n) {
    const f = rn(Le(t, o)) ? W3(e, o) : e, c = vm(t, f, o);
    return c === null ? null : ur(r) ? vn(t, c, c) : Dn(r) ? vn(t, l, a) : vn(t, r.anchorPath, c);
  }
  if (kn(r)) {
    const f = kt(s), c = Le(t, f);
    return Array.isArray(c) ? Et(a, !1) : Gi(a, !1);
  }
  return vt(r) ? Et(a, !1) : Dn(r) ? vn(t, l, a) : vn(t, s, s);
}
function oI(t, e, n) {
  const i = kt(n), r = [$e(n)], o = vm(Le(t, i), e, r);
  return o ? Et(i.concat(o), !1) : mo(n);
}
function $3(t, e, n) {
  const i = e.selection, r = Q3(t, e, n), o = r.findIndex((s) => St(s.path, i.focusPath) && String(s.type) === String(i.type));
  return {
    caret: o !== -1 ? r[o] : null,
    previous: o !== -1 && o > 0 ? r[o - 1] : null,
    next: o !== -1 && o < r.length - 1 ? r[o + 1] : null
  };
}
function sI(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: o, previous: s } = $3(t, e, i);
  if (n)
    return Pt(r) ? null : vn(t, r.anchorPath, r.focusPath);
  if (o && s)
    return Zp(s);
  const l = kt(r.focusPath), a = Le(t, l);
  return vt(r) && Array.isArray(a) ? vn(t, r.focusPath, r.focusPath) : Pt(r) && !Array.isArray(a) ? Gi(r.focusPath, !1) : null;
}
function lI(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: o, next: s } = $3(t, e, i);
  return n ? Pt(r) ? null : vn(t, r.anchorPath, r.focusPath) : o && s ? Zp(s) : Pt(r) ? Et(r.focusPath, !1) : null;
}
function Xs(t, e) {
  const n = Yp(t, e);
  let i = 0;
  for (; i < n.length - 1 && n[i + 1].length > n[i].length; )
    i++;
  const r = n[i];
  return r.length === 0 || Array.isArray(Le(t, kt(r))) ? Et(r, !1) : Gi(r, !1);
}
function Ml(t, e) {
  if (e.length === 1) {
    const i = bi(e);
    if (i.op === "replace" || i.op === "move") {
      const r = Br(t, i.path);
      return Et(r, !1);
    }
  }
  if (!At(e) && e.every((i) => i.op === "move")) {
    const i = bi(e), r = e.slice(1);
    if ((tm(i) || bl(i)) && i.from !== i.path && r.every((o) => (tm(o) || bl(o)) && o.from === o.path)) {
      const o = Br(t, i.path);
      return Gi(o, !1);
    }
  }
  const n = e.filter((i) => i.op !== "test" && i.op !== "remove" && (i.op !== "move" || i.from !== i.path) && typeof i.path == "string").map((i) => Br(t, i.path));
  return At(n) ? null : {
    type: Ht.multi,
    paths: n,
    anchorPath: bi(n),
    focusPath: $e(n),
    pointersMap: eC(n)
  };
}
function eC(t) {
  const e = {};
  return t.forEach((n) => {
    e[Se(n)] = !0;
  }), e;
}
function gh(t) {
  return {
    [Se(t)]: !0
  };
}
function aI(t, e) {
  let n = 0;
  for (; n < t.length && n < e.length && t[n] === e[n]; )
    n++;
  return t.slice(0, n);
}
function Ba(t) {
  return t && (kn(t) || vt(t) || Pt(t) && t.paths.length === 1);
}
function K0(t, e) {
  return Ba(e) && rn(Le(t, e.focusPath)) ? e.focusPath : kt(e.focusPath);
}
function Al(t, e) {
  if (t.length < e.length)
    return !1;
  for (let n = 0; n < e.length; n++)
    if (t[n] !== e[n])
      return !1;
  return !0;
}
function li(t) {
  const e = t.selection;
  return (kn(e) || vt(e)) && e.edit ? {
    ...t,
    selection: {
      ...e,
      edit: !1
    }
  } : t;
}
function Gi(t, e) {
  return {
    type: Ht.key,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t),
    edit: e
  };
}
function Et(t, e) {
  return {
    type: Ht.value,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t),
    edit: e
  };
}
function ho(t) {
  return {
    type: Ht.inside,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t)
  };
}
function mo(t) {
  return {
    type: Ht.after,
    anchorPath: t,
    focusPath: t,
    pointersMap: gh(t)
  };
}
function vn(t, e, n) {
  const i = nI(t, e, n), r = Al(n, $e(i)) || Al(e, bi(i));
  return {
    type: Ht.multi,
    anchorPath: r ? bi(i) : $e(i),
    focusPath: r ? $e(i) : bi(i),
    paths: i,
    pointersMap: eC(i)
  };
}
function tC(t, e, n, i) {
  if (kn(e))
    return String($e(e.focusPath));
  if (vt(e)) {
    const r = Le(t, e.focusPath);
    return typeof r == "string" ? r : i.stringify(r, null, n);
  }
  if (Pt(e)) {
    if (At(e.focusPath))
      return i.stringify(t, null, n);
    const r = Y3(e), o = Le(t, r);
    if (Array.isArray(o))
      if (e.paths.length === 1) {
        const s = Le(t, bi(e.paths));
        return i.stringify(s, null, n);
      } else
        return e.paths.map((s) => {
          const l = Le(t, s);
          return `${i.stringify(l, null, n)},`;
        }).join(`
`);
    else
      return e.paths.map((s) => {
        const l = $e(s), a = Le(t, s);
        return `${i.stringify(l)}: ${i.stringify(a, null, n)},`;
      }).join(`
`);
  }
  return null;
}
function nC(t) {
  return Pt(t) ? t.paths : [t.focusPath];
}
function Uo(t) {
  return (kn(t) || vt(t)) && t.edit;
}
function fI(t, e, n = !0) {
  return e === void 0 && !n ? t : {
    ...t,
    selection: e
  };
}
function cI() {
  return Et([], !1);
}
function iC(t) {
  return Pt(t) || kn(t) || vt(t);
}
function Cs(t) {
  if (!t)
    return !1;
  if (kn(t) || vt(t) || Pt(t) && t.paths.length === 1)
    return !0;
}
function Zp(t) {
  switch (t.type) {
    case ar.key:
      return Gi(t.path, !1);
    case ar.value:
      return Et(t.path, !1);
    case ar.after:
      return mo(t.path);
    case ar.inside:
      return ho(t.path);
  }
}
function G0(t, e, n) {
  switch (e) {
    case Ht.key:
      return Gi(n, !1);
    case Ht.value:
      return Et(n, !1);
    case Ht.after:
      return mo(n);
    case Ht.inside:
      return ho(n);
    case Ht.multi:
      return vn(t, n, n);
  }
}
function X0(t, e) {
  if (t)
    return Object.keys(t.pointersMap).some((n) => _l(n, e) || _l(e, n)) ? t : void 0;
}
function Kr(...t) {
  const e = [];
  for (const n of t)
    if (typeof n == "string" && e.push(n), n && typeof n == "object")
      for (const i in n)
        Object.hasOwnProperty.call(n, i) && n[i] && e.push(i);
  return e.join(" ");
}
function km(t, e) {
  const n = Bp(t, e);
  return Kr("jse-value", "jse-" + n, {
    "jse-url": Zu(t),
    "jse-empty": typeof t == "string" && t.length === 0
  });
}
function uI(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("div"), p(e, "class", n = cn(Kr("jse-editable-div", t[2], { "jse-short-text": t[0] })) + " svelte-rw77oa"), p(e, "contenteditable", "true"), p(e, "spellcheck", "false");
    },
    m(o, s) {
      B(o, e, s), t[13](e), i || (r = [
        X(e, "input", t[3]),
        X(e, "keydown", t[4]),
        X(e, "paste", t[5]),
        X(e, "blur", t[6])
      ], i = !0);
    },
    p(o, [s]) {
      s & 5 && n !== (n = cn(Kr("jse-editable-div", o[2], { "jse-short-text": o[0] })) + " svelte-rw77oa") && p(e, "class", n);
    },
    i: fe,
    o: fe,
    d(o) {
      o && j(e), t[13](null), i = !1, et(r);
    }
  };
}
function hI(t, e, n) {
  const i = Qn("jsoneditor:EditableDiv");
  let { value: r } = e, { shortText: o = !1 } = e, { onChange: s } = e, { onCancel: l } = e, { onFind: a } = e, { onPaste: f = nn } = e, { onValueClass: c = () => "" } = e, u, h = c(r), d = !1;
  zi(() => {
    i("onMount", { value: r }), g(r), setTimeout(() => j3(u));
  }), qr(() => {
    const S = m();
    i("onDestroy", { closed: d, value: r, newValue: S }), !d && S !== r && s(S, ks.NO);
  });
  function m() {
    return F9(u.innerText);
  }
  function g(S) {
    n(1, u.innerText = Rs(S), u);
  }
  function _() {
    const S = m();
    S === "" && g(""), n(2, h = c(S));
  }
  function b(S) {
    S.stopPropagation();
    const R = es(S).replace(/^Command\+/, "Ctrl+");
    if (R === "Escape" && (d = !0, l()), R === "Enter" || R === "Tab") {
      d = !0;
      const k = m();
      s(k, ks.NEXT_INSIDE);
    }
    R === "Ctrl+F" && (S.preventDefault(), a(!1)), R === "Ctrl+H" && (S.preventDefault(), a(!0));
  }
  function w(S) {
    if (!f)
      return;
    const R = S.clipboardData.getData("text/plain");
    f(R);
  }
  function v() {
    const S = document.hasFocus(), R = m();
    i("handleBlur", { hasFocus: S, closed: d, value: r, newValue: R }), document.hasFocus() && !d && (d = !0, R !== r ? s(R, ks.SELF) : l());
  }
  function M(S) {
    mt[S ? "unshift" : "push"](() => {
      u = S, n(1, u);
    });
  }
  return t.$$set = (S) => {
    "value" in S && n(7, r = S.value), "shortText" in S && n(0, o = S.shortText), "onChange" in S && n(8, s = S.onChange), "onCancel" in S && n(9, l = S.onCancel), "onFind" in S && n(10, a = S.onFind), "onPaste" in S && n(11, f = S.onPaste), "onValueClass" in S && n(12, c = S.onValueClass);
  }, [
    o,
    u,
    h,
    _,
    b,
    w,
    v,
    r,
    s,
    l,
    a,
    f,
    c,
    M
  ];
}
class dI extends Be {
  constructor(e) {
    super(), je(this, e, hI, uI, gt, {
      value: 7,
      shortText: 0,
      onChange: 8,
      onCancel: 9,
      onFind: 10,
      onPaste: 11,
      onValueClass: 12
    });
  }
}
const rC = dI;
function mI(t) {
  let e, n;
  return e = new rC({
    props: {
      value: t[1].escapeValue(t[0]),
      onChange: t[3],
      onCancel: t[4],
      onPaste: t[5],
      onFind: t[2],
      onValueClass: t[6]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 3 && (o.value = i[1].escapeValue(i[0])), r & 4 && (o.onFind = i[2]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function pI(t, e, n) {
  let { path: i } = e, { value: r } = e, { parser: o } = e, { normalization: s } = e, { enforceString: l } = e, { onPatch: a } = e, { onPasteJson: f } = e, { onSelect: c } = e, { onFind: u } = e, { focus: h } = e, { findNextInside: d } = e;
  function m(v) {
    return l ? v : zl(v, o);
  }
  function g(v, M) {
    a(
      [
        {
          op: "replace",
          path: Se(i),
          value: m(s.unescapeValue(v))
        }
      ],
      (S, R) => {
        if (!St(i, R.selection.focusPath))
          return;
        const k = M === ks.NEXT_INSIDE ? d(i) : Et(i, !1);
        return { state: { ...R, selection: k } };
      }
    ), M !== ks.SELF && h();
  }
  function _() {
    c(Et(i, !1)), h();
  }
  function b(v) {
    try {
      const M = o.parse(v);
      rn(M) && f({ path: i, contents: M });
    } catch {
    }
  }
  function w(v) {
    return km(m(s.unescapeValue(v)), o);
  }
  return t.$$set = (v) => {
    "path" in v && n(7, i = v.path), "value" in v && n(0, r = v.value), "parser" in v && n(8, o = v.parser), "normalization" in v && n(1, s = v.normalization), "enforceString" in v && n(9, l = v.enforceString), "onPatch" in v && n(10, a = v.onPatch), "onPasteJson" in v && n(11, f = v.onPasteJson), "onSelect" in v && n(12, c = v.onSelect), "onFind" in v && n(2, u = v.onFind), "focus" in v && n(13, h = v.focus), "findNextInside" in v && n(14, d = v.findNextInside);
  }, [
    r,
    s,
    u,
    g,
    _,
    b,
    w,
    i,
    o,
    l,
    a,
    f,
    c,
    h,
    d
  ];
}
class gI extends Be {
  constructor(e) {
    super(), je(this, e, pI, mI, gt, {
      path: 7,
      value: 0,
      parser: 8,
      normalization: 1,
      enforceString: 9,
      onPatch: 10,
      onPasteJson: 11,
      onSelect: 12,
      onFind: 2,
      focus: 13,
      findNextInside: 14
    });
  }
}
const bI = gI;
function Bf(t, e, n) {
  const i = kt(e), r = Le(t, i);
  if (xt(r)) {
    const o = Nn($e(e));
    return n.map((s, l) => ({
      op: "add",
      path: Se(i.concat(String(o + l))),
      value: s.value
    }));
  } else if (bn(r)) {
    const o = $e(e), s = Object.keys(r), l = uf(s, o, !0);
    return [
      ...n.map((a) => {
        const f = cf(a.key, s);
        return {
          op: "add",
          path: Se(i.concat(f)),
          value: a.value
        };
      }),
      ...l.map((a) => Is(i, a))
    ];
  } else
    throw new Error("Cannot create insert operations: parent must be an Object or Array");
}
function Q0(t, e, n) {
  const i = Le(t, e);
  if (Array.isArray(i)) {
    const r = i.length;
    return n.map((o, s) => ({
      op: "add",
      path: Se(e.concat(String(r + s))),
      value: o.value
    }));
  } else
    return n.map((r) => {
      const o = cf(r.key, Object.keys(i));
      return {
        op: "add",
        path: Se(e.concat(o)),
        value: r.value
      };
    });
}
function hf(t, e, n, i) {
  const r = e.filter((l) => l !== n), o = cf(i, r), s = uf(e, n, !1);
  return [
    {
      op: "move",
      from: Se(t.concat(n)),
      path: Se(t.concat(o))
    },
    ...s.map((l) => Is(t, l))
  ];
}
function _I(t, e, n) {
  const i = bi(e), r = kt(i), o = Le(t, r);
  if (xt(o)) {
    const s = bi(e), l = s ? Nn($e(s)) : 0;
    return [
      ...Cm(e),
      ...n.map((a, f) => ({
        op: "add",
        path: Se(r.concat(String(f + l))),
        value: a.value
      }))
    ];
  } else if (bn(o)) {
    const s = $e(e), l = kt(s), a = $e(s), f = Object.keys(o), c = uf(f, a, !1), u = new Set(e.map((d) => $e(d))), h = f.filter((d) => !u.has(d));
    return [
      ...Cm(e),
      ...n.map((d) => {
        const m = cf(d.key, h);
        return {
          op: "add",
          path: Se(l.concat(m)),
          value: d.value
        };
      }),
      ...c.map((d) => Is(l, d))
    ];
  } else
    throw new Error("Cannot create replace operations: parent must be an Object or Array");
}
function yI(t, e) {
  const n = $e(e);
  if (At(n))
    throw new Error("Cannot duplicate root object");
  const i = kt(n), r = $e(n), o = Le(t, i);
  if (xt(o)) {
    const s = $e(e), l = s ? Nn($e(s)) + 1 : 0;
    return [
      ...e.map((a, f) => ({
        op: "copy",
        from: Se(a),
        path: Se(i.concat(String(f + l)))
      }))
    ];
  } else if (bn(o)) {
    const s = Object.keys(o), l = uf(s, r, !1);
    return [
      ...e.map((a) => {
        const f = $e(a), c = cf(f, s);
        return {
          op: "copy",
          from: Se(a),
          path: Se(i.concat(c))
        };
      }),
      ...l.map((a) => Is(i, a))
    ];
  } else
    throw new Error("Cannot create duplicate operations: parent must be an Object or Array");
}
function wI(t, e) {
  if (vt(e))
    return [
      {
        op: "move",
        from: Se(e.focusPath),
        path: ""
      }
    ];
  if (Pt(e)) {
    const n = kt(e.focusPath), i = Le(t, n);
    if (xt(i))
      return [
        {
          op: "replace",
          path: "",
          value: e.paths.map((o) => {
            const s = Nn($e(o));
            return i[s];
          })
        }
      ];
    if (bn(i)) {
      const r = {};
      return e.paths.forEach((o) => {
        const s = String($e(o));
        r[s] = i[s];
      }), [
        {
          op: "replace",
          path: "",
          value: r
        }
      ];
    }
  } else
    throw new Error("Cannot create extract operations: parent must be an Object or Array");
  throw new Error("Cannot extract: unsupported type of selection " + JSON.stringify(e));
}
function oC(t, e, n, i) {
  if (kn(e)) {
    const r = M3(n, i), o = kt(e.focusPath), s = Le(t, o), l = Object.keys(s), a = $e(e.focusPath);
    return hf(o, l, a, typeof r == "string" ? r : n);
  }
  if (vt(e) || Pt(e) && At(e.focusPath))
    try {
      return [
        {
          op: "replace",
          path: Se(e.focusPath),
          value: hh(n, (r) => Jp(r, i))
        }
      ];
    } catch {
      return [
        {
          op: "replace",
          path: Se(e.focusPath),
          value: n
        }
      ];
    }
  if (Pt(e)) {
    const r = dd(n, i);
    return _I(t, e.paths, r);
  }
  if (ur(e)) {
    const r = dd(n, i), o = e.focusPath, s = kt(o), l = Le(t, s);
    if (xt(l)) {
      const a = Nn($e(o)), f = s.concat(String(a + 1));
      return Bf(t, f, r);
    } else if (bn(l)) {
      const a = String($e(o)), f = Object.keys(l);
      if (At(f) || $e(f) === a)
        return Q0(t, s, r);
      {
        const c = f.indexOf(a), u = f[c + 1], h = s.concat(u);
        return Bf(t, h, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  if (Dn(e)) {
    const r = dd(n, i), o = e.focusPath, s = Le(t, o);
    if (xt(s)) {
      const l = o.concat("0");
      return Bf(t, l, r);
    } else if (bn(s)) {
      const l = Object.keys(s);
      if (At(l))
        return Q0(t, o, r);
      {
        const a = bi(l), f = o.concat(a);
        return Bf(t, f, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  throw new Error("Cannot insert: unsupported type of selection " + JSON.stringify(e));
}
function vI(t, e, n) {
  const i = n.beforePath, r = n.append, o = kt(e.focusPath), s = Le(t, o);
  if (!r && !(i && Al(i, o) && i.length > o.length))
    return [];
  const l = Sl(e), a = ph(e), f = $e(l), c = $e(a), u = i ? i[o.length] : void 0;
  if (bn(s)) {
    const h = Object.keys(s), d = h.indexOf(f), m = h.indexOf(c), g = r ? h.length : h.indexOf(u);
    if (d !== -1 && m !== -1 && g !== -1)
      return g > d ? [...h.slice(d, m + 1), ...h.slice(g, h.length)].map((_) => Is(o, _)) : [...h.slice(g, d), ...h.slice(m + 1, h.length)].map((_) => Is(o, _));
  } else if (xt(s)) {
    const h = Nn(f), d = Nn(c), m = u !== void 0 ? Nn(u) : s.length, g = d - h + 1;
    return m < h ? O0(g, (_) => ({
      op: "move",
      from: Se(o.concat(String(h + _))),
      path: Se(o.concat(String(m + _)))
    })) : O0(g, () => ({
      op: "move",
      from: Se(o.concat(String(h))),
      path: Se(o.concat(String(m)))
    }));
  } else
    throw new Error("Cannot create move operations: parent must be an Object or Array");
}
function kI(t, e, n) {
  if (n === "object")
    return {};
  if (n === "array")
    return [];
  if (n === "structure") {
    const i = Y3(e), r = Le(t, i);
    if (Array.isArray(r) && !At(r)) {
      const o = bi(r);
      return rn(o) ? H7(o, (s) => Array.isArray(s) ? [] : pn(s) ? void 0 : "") : "";
    }
  }
  return "";
}
function Cm(t) {
  return t.map((e) => ({
    op: "remove",
    path: Se(e)
  })).reverse();
}
function Is(t, e) {
  return {
    op: "move",
    from: Se(t.concat(e)),
    path: Se(t.concat(e))
  };
}
function dd(t, e) {
  const n = /^\s*{/.test(t), i = /^\s*\[/.test(t), r = M3(t, e), o = r !== void 0 ? r : hh(t, (s) => Jp(s, e));
  return n && pn(o) || i && Array.isArray(o) ? [{ key: "New item", value: o }] : Array.isArray(o) ? o.map((s, l) => ({ key: "New item " + l, value: s })) : pn(o) ? Object.keys(o).map((s) => ({ key: s, value: o[s] })) : [{ key: "New item", value: o }];
}
function sC(t, e) {
  if (kn(e)) {
    const n = kt(e.focusPath), i = Le(t, n), r = Object.keys(i), o = $e(e.focusPath), l = hf(n, r, o, ""), a = Ml(t, l);
    return { operations: l, newSelection: a };
  }
  if (vt(e))
    return { operations: [
      {
        op: "replace",
        path: Se(e.focusPath),
        value: ""
      }
    ], newSelection: e };
  if (Pt(e)) {
    const n = Cm(e.paths), i = $e(e.paths);
    if (At(i)) {
      const s = [{ op: "replace", path: "", value: "" }], l = Et([], !1);
      return { operations: s, newSelection: l };
    }
    const r = kt(i), o = Le(t, r);
    if (xt(o)) {
      const s = bi(e.paths), l = Nn($e(s)), a = l === 0 ? ho(r) : mo(r.concat(String(l - 1)));
      return { operations: n, newSelection: a };
    } else if (bn(o)) {
      const s = Object.keys(o), l = bi(e.paths), a = $e(l), f = s.indexOf(a), c = s[f - 1], u = f === 0 ? ho(r) : mo(r.concat(c));
      return { operations: n, newSelection: u };
    } else
      throw new Error("Cannot create remove operations: parent must be an Object or Array");
  }
  throw new Error("Cannot remove: unsupported type of selection " + JSON.stringify(e));
}
function lC(t, e) {
  return Bk(t, e, {
    before: (n, i, r) => {
      if (Rk(i)) {
        const o = gr(i.path);
        return {
          revertOperations: [...r, ...Y0(n, o)]
        };
      }
      if (bl(i)) {
        const o = gr(i.from);
        return {
          revertOperations: [...r, ...Y0(n, o)]
        };
      }
      return { revertOperations: r };
    }
  });
}
function Y0(t, e) {
  const n = kt(e), i = $e(e), r = Le(t, n);
  if (bn(r)) {
    const o = Object.keys(r);
    return uf(o, i, !1).map((l) => Is(n, l));
  }
  return [];
}
function CI(t, e) {
  return t.flatMap((n) => {
    if (Op(n)) {
      const i = gr(n.path);
      if (i.length > 0) {
        const r = [n];
        let o = kt(i);
        for (; o.length > 0 && !Ki(e, o); )
          r.unshift({
            op: "add",
            path: Se(o),
            value: {}
          }), o = kt(o);
        return r;
      }
    }
    return n;
  });
}
function SI(t, e, n) {
  const i = n != null && n.activeItem ? eb(n.activeItem) : void 0, r = e.findIndex((a) => St(i, eb(a))), o = r !== -1 ? r : (n == null ? void 0 : n.activeIndex) < e.length ? n == null ? void 0 : n.activeIndex : e.length > 0 ? 0 : -1, s = e.map((a, f) => ({ ...a, active: f === o })), l = s[o];
  return {
    items: s,
    itemsMap: uh(s, (a) => Se(a.path)),
    activeItem: l,
    activeIndex: o
  };
}
function MI(t) {
  const e = t.activeIndex < t.items.length - 1 ? t.activeIndex + 1 : t.items.length > 0 ? 0 : -1, n = t.items[e], i = t.items.map((r, o) => ({ ...r, active: o === e }));
  return {
    ...t,
    items: i,
    itemsMap: uh(i, (r) => Se(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function AI(t) {
  const e = t.activeIndex > 0 ? t.activeIndex - 1 : t.items.length - 1, n = t.items[e], i = t.items.map((r, o) => ({ ...r, active: o === e }));
  return {
    ...t,
    items: i,
    itemsMap: uh(i, (r) => Se(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function aC(t, e, n, i = 1 / 0) {
  const r = [], o = [];
  function s(a) {
    r.length < i && r.push(a);
  }
  function l(a, f) {
    if (xt(f)) {
      const c = o.length;
      o.push("0");
      for (let u = 0; u < f.length; u++)
        if (o[c] = String(u), l(a, f[u]), r.length >= i)
          return;
      o.pop();
    } else if (bn(f)) {
      const c = Object.keys(f), u = o.length;
      o.push("");
      for (const h of c)
        if (o[u] = h, Z0(h, a, o, dr.key, s), l(a, f[h]), r.length >= i)
          return;
      o.pop();
    } else
      Z0(String(f), a, o, dr.value, s);
  }
  if (typeof t == "string" && t !== "") {
    const a = t.toLowerCase();
    l(a, e);
  }
  return r;
}
function Z0(t, e, n, i, r) {
  const o = t.toLowerCase();
  let s = 0, l = -1, a = -1;
  do
    a = o.indexOf(e, l), a !== -1 && (l = a + e.length, r({
      path: n.slice(0),
      field: i,
      fieldIndex: s,
      start: a,
      end: l
    }), s++);
  while (a !== -1);
}
function Sm(t, e, n, i) {
  return t.substring(0, n) + e + t.substring(i);
}
function $0(t, e, n) {
  let i = t;
  return GP(n, (r) => {
    i = Sm(i, e, r.start, r.end);
  }), i;
}
function OI(t, e, n, i, r) {
  const { field: o, path: s, start: l, end: a } = i;
  if (o === dr.key) {
    const f = kt(s), c = Le(t, f), u = $e(s), h = Object.keys(c), d = Sm(u, n, l, a), m = hf(f, h, u, d);
    return {
      newSelection: Ml(t, m),
      operations: m
    };
  } else if (o === dr.value) {
    const f = Le(t, s);
    if (f === void 0)
      throw new Error(`Cannot replace: path not found ${Se(s)}`);
    const c = typeof f == "string" ? f : String(f), u = Se(s), h = uo(f, e.enforceStringMap, u, r), d = Sm(c, n, l, a), m = [
      {
        op: "replace",
        path: Se(s),
        value: h ? d : zl(d, r)
      }
    ];
    return {
      newSelection: Ml(t, m),
      operations: m
    };
  } else
    throw new Error(`Cannot replace: unknown type of search result field ${o}`);
}
function TI(t, e, n, i, r) {
  const o = aC(n, t, e, 1 / 0), s = [];
  for (let f = 0; f < o.length; f++) {
    const c = o[f - 1], u = o[f];
    f === 0 || u.field !== c.field || !St(u.path, c.path) ? s.push({
      path: u.path,
      field: u.field,
      items: [u]
    }) : $e(s).items.push(u);
  }
  s.sort((f, c) => f.field !== c.field ? f.field === dr.key ? 1 : -1 : c.path.length - f.path.length);
  let l = [], a;
  return s.forEach((f) => {
    const { field: c, path: u, items: h } = f;
    if (c === dr.key) {
      const d = kt(u), m = Le(t, d), g = $e(u), _ = Object.keys(m), b = $0(g, i, h), w = hf(d, _, g, b);
      l = l.concat(w), a = Ml(t, w);
    } else if (c === dr.value) {
      const d = Le(t, u);
      if (d === void 0)
        throw new Error(`Cannot replace: path not found ${Se(u)}`);
      const m = typeof d == "string" ? d : String(d), g = Se(u), _ = uo(d, e.enforceStringMap, g, r), b = $0(m, i, h), w = [
        {
          op: "replace",
          path: Se(u),
          value: _ ? b : zl(b, r)
        }
      ];
      l = l.concat(w), a = Ml(t, w);
    } else
      throw new Error(`Cannot replace: unknown type of search result field ${c}`);
  }), {
    operations: l,
    newSelection: a
  };
}
function EI(t, e) {
  const n = [];
  let i = 0;
  for (const o of e) {
    const s = t.slice(i, o.start);
    s !== "" && n.push({
      type: "normal",
      text: s,
      active: !1
    });
    const l = t.slice(o.start, o.end);
    n.push({
      type: "highlight",
      text: l,
      active: o.active
    }), i = o.end;
  }
  const r = $e(e);
  return r.end < t.length && n.push({
    type: "normal",
    text: t.slice(r.end),
    active: !1
  }), n;
}
function eb(t) {
  return t.path.concat(t.field, String(t.fieldIndex));
}
function PI(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === dr.key);
  if (!(!n || n.length === 0))
    return n;
}
function tb(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === dr.value);
  if (!(!n || n.length === 0))
    return n;
}
function nb(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function RI(t) {
  let e, n = Rs(t[3].text) + "", i;
  return {
    c() {
      e = T("span"), i = le(n), p(e, "class", "jse-highlight svelte-s6kbew"), de(e, "jse-active", t[3].active);
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, o) {
      o & 1 && n !== (n = Rs(r[3].text) + "") && Te(i, n), o & 1 && de(e, "jse-active", r[3].active);
    },
    d(r) {
      r && j(e);
    }
  };
}
function II(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function ib(t) {
  let e;
  function n(o, s) {
    return o[3].type === "normal" ? II : RI;
  }
  let i = n(t), r = i(t);
  return {
    c() {
      r.c(), e = Ze();
    },
    m(o, s) {
      r.m(o, s), B(o, e, s);
    },
    p(o, s) {
      i === (i = n(o)) && r ? r.p(o, s) : (r.d(1), r = i(o), r && (r.c(), r.m(e.parentNode, e)));
    },
    d(o) {
      r.d(o), o && j(e);
    }
  };
}
function NI(t) {
  let e, n = t[0], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = ib(nb(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = Ze();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, [o]) {
      if (o & 1) {
        n = r[0];
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = nb(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = ib(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    i: fe,
    o: fe,
    d(r) {
      zt(i, r), r && j(e);
    }
  };
}
function DI(t, e, n) {
  let i, { text: r } = e, { searchResultItems: o } = e;
  return t.$$set = (s) => {
    "text" in s && n(1, r = s.text), "searchResultItems" in s && n(2, o = s.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 6 && n(0, i = EI(String(r), o));
  }, [i, r, o];
}
class jI extends Be {
  constructor(e) {
    super(), je(this, e, DI, NI, It, { text: 1, searchResultItems: 2 });
  }
}
const fC = jI;
function BI(t) {
  let e = Rs(t[1].escapeValue(t[0])) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 3 && e !== (e = Rs(i[1].escapeValue(i[0])) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function LI(t) {
  let e, n;
  return e = new fC({
    props: {
      text: t[1].escapeValue(t[0]),
      searchResultItems: t[3]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 3 && (o.text = i[1].escapeValue(i[0])), r & 8 && (o.searchResultItems = i[3]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function xI(t) {
  let e, n, i, r, o, s, l, a;
  const f = [LI, BI], c = [];
  function u(h, d) {
    return h[3] ? 0 : 1;
  }
  return n = u(t), i = c[n] = f[n](t), {
    c() {
      e = T("div"), i.c(), p(e, "data-type", "selectable-value"), p(e, "class", r = cn(km(t[0], t[2])) + " svelte-6ci2p7"), p(e, "title", o = t[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null);
    },
    m(h, d) {
      B(h, e, d), c[n].m(e, null), s = !0, l || (a = [
        X(e, "click", t[5]),
        X(e, "dblclick", t[6])
      ], l = !0);
    },
    p(h, [d]) {
      let m = n;
      n = u(h), n === m ? c[n].p(h, d) : (me(), E(c[m], 1, 1, () => {
        c[m] = null;
      }), pe(), i = c[n], i ? i.p(h, d) : (i = c[n] = f[n](h), i.c()), C(i, 1), i.m(e, null)), (!s || d & 5 && r !== (r = cn(km(h[0], h[2])) + " svelte-6ci2p7")) && p(e, "class", r), (!s || d & 16 && o !== (o = h[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null)) && p(e, "title", o);
    },
    i(h) {
      s || (C(i), s = !0);
    },
    o(h) {
      E(i), s = !1;
    },
    d(h) {
      h && j(e), c[n].d(), l = !1, et(a);
    }
  };
}
function zI(t, e, n) {
  let i, { path: r } = e, { value: o } = e, { readOnly: s } = e, { normalization: l } = e, { parser: a } = e, { onSelect: f } = e, { searchResultItems: c } = e;
  function u(d) {
    typeof o == "string" && i && d.ctrlKey && (d.preventDefault(), d.stopPropagation(), window.open(o, "_blank"));
  }
  function h(d) {
    s || (d.preventDefault(), f(Et(r, !0)));
  }
  return t.$$set = (d) => {
    "path" in d && n(7, r = d.path), "value" in d && n(0, o = d.value), "readOnly" in d && n(8, s = d.readOnly), "normalization" in d && n(1, l = d.normalization), "parser" in d && n(2, a = d.parser), "onSelect" in d && n(9, f = d.onSelect), "searchResultItems" in d && n(3, c = d.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = Zu(o));
  }, [
    o,
    l,
    a,
    c,
    i,
    u,
    h,
    r,
    s,
    f
  ];
}
class VI extends Be {
  constructor(e) {
    super(), je(this, e, zI, xI, gt, {
      path: 7,
      value: 0,
      readOnly: 8,
      normalization: 1,
      parser: 2,
      onSelect: 9,
      searchResultItems: 3
    });
  }
}
const FI = VI;
function HI(t) {
  let e, n;
  return {
    c() {
      e = T("div"), n = le(t[0]), p(e, "class", "jse-tooltip svelte-r4omvg");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p(i, [r]) {
      r & 1 && Te(n, i[0]);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
function WI(t, e, n) {
  let { text: i } = e;
  return t.$$set = (r) => {
    "text" in r && n(0, i = r.text);
  }, [i];
}
class UI extends Be {
  constructor(e) {
    super(), je(this, e, WI, HI, It, { text: 0 });
  }
}
const qI = UI;
function $p(t, { text: e, openAbsolutePopup: n, closeAbsolutePopup: i }) {
  let r;
  function o() {
    r = n(qI, {
      text: e
    }, {
      position: "top",
      width: 10 * e.length,
      offsetTop: 3,
      anchor: t,
      closeOnOuterClick: !0
    });
  }
  function s() {
    i(r);
  }
  return t.addEventListener("mouseenter", o), t.addEventListener("mouseleave", s), {
    destroy() {
      t.removeEventListener("mouseenter", o), t.removeEventListener("mouseleave", s);
    }
  };
}
function JI(t) {
  let e, n, i, r, o, s;
  return n = new Ct({ props: { data: _R } }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-timestamp svelte-1w5pf7");
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), r = !0, o || (s = Ai(i = $p.call(null, e, {
        text: t[0],
        ...t[1]
      })), o = !0);
    },
    p(l, [a]) {
      i && Gn(i.update) && a & 1 && i.update.call(null, {
        text: l[0],
        ...l[1]
      });
    },
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n), o = !1, s();
    }
  };
}
function KI(t, e, n) {
  let i;
  const r = Xn("absolute-popup");
  let { value: o } = e;
  return t.$$set = (s) => {
    "value" in s && n(2, o = s.value);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(0, i = `Time: ${new Date(o).toString()}`);
  }, [i, r, o];
}
class GI extends Be {
  constructor(e) {
    super(), je(this, e, KI, JI, gt, { value: 2 });
  }
}
const XI = GI;
function QI({ path: t, value: e, readOnly: n, enforceString: i, searchResultItems: r, isEditing: o, parser: s, normalization: l, onPatch: a, onPasteJson: f, onSelect: c, onFind: u, findNextInside: h, focus: d }) {
  const m = [];
  return !o && sA(e) && m.push({
    component: zR,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), !o && lA(e) && m.push({
    component: KR,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), o && m.push({
    component: bI,
    props: {
      path: t,
      value: e,
      enforceString: i,
      parser: s,
      normalization: l,
      onPatch: a,
      onPasteJson: f,
      onSelect: c,
      onFind: u,
      findNextInside: h,
      focus: d
    }
  }), o || m.push({
    component: FI,
    props: { path: t, value: e, readOnly: n, parser: s, normalization: l, searchResultItems: r, onSelect: c }
  }), !o && cm(e) && m.push({
    component: XI,
    props: { value: e }
  }), m;
}
var Ro = {
  prefix: "fas",
  iconName: "caret-right",
  icon: [256, 512, [], "f0da", "M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]
}, cC = {
  prefix: "fas",
  iconName: "paste",
  icon: [512, 512, ["file-clipboard"], "f0ea", "M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]
}, YI = {
  prefix: "fas",
  iconName: "circle-notch",
  icon: [512, 512, [], "f1ce", "M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]
}, ZI = {
  prefix: "fas",
  iconName: "scissors",
  icon: [512, 512, [9984, 9986, 9988, "cut"], "f0c4", "M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM160 112c0 26.5-21.5 48-48 48s-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48zM112 448c-26.5 0-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48z"]
}, ll = ZI, $I = {
  prefix: "fas",
  iconName: "square-caret-down",
  icon: [448, 512, ["caret-square-down"], "f150", "M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]
}, eN = $I, tN = {
  prefix: "fas",
  iconName: "caret-left",
  icon: [256, 512, [], "f0d9", "M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]
}, nN = {
  prefix: "fas",
  iconName: "pen-to-square",
  icon: [512, 512, ["edit"], "f044", "M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]
}, rb = nN, iN = {
  prefix: "fas",
  iconName: "chevron-up",
  icon: [512, 512, [], "f077", "M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]
}, uC = {
  prefix: "fas",
  iconName: "angle-right",
  icon: [320, 512, [8250], "f105", "M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]
}, rN = {
  prefix: "fas",
  iconName: "square-caret-up",
  icon: [448, 512, ["caret-square-up"], "f151", "M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]
}, oN = rN, ob = {
  prefix: "fas",
  iconName: "caret-up",
  icon: [320, 512, [], "f0d8", "M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]
}, bh = {
  prefix: "fas",
  iconName: "filter",
  icon: [512, 512, [], "f0b0", "M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]
}, qo = {
  prefix: "fas",
  iconName: "code",
  icon: [640, 512, [], "f121", "M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]
}, _h = {
  prefix: "fas",
  iconName: "wrench",
  icon: [512, 512, [128295], "f0ad", "M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 456c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"]
}, ba = {
  prefix: "fas",
  iconName: "pen",
  icon: [512, 512, [128394], "f304", "M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]
}, sN = {
  prefix: "fas",
  iconName: "arrow-rotate-right",
  icon: [512, 512, [8635, "arrow-right-rotate", "arrow-rotate-forward", "redo"], "f01e", "M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]
}, eg = sN, lN = {
  prefix: "fas",
  iconName: "arrow-rotate-left",
  icon: [512, 512, [8634, "arrow-left-rotate", "arrow-rotate-back", "arrow-rotate-backward", "undo"], "f0e2", "M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]
}, tg = lN, aN = {
  prefix: "fas",
  iconName: "crop-simple",
  icon: [512, 512, ["crop-alt"], "f565", "M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]
}, fN = aN, cN = {
  prefix: "fas",
  iconName: "gear",
  icon: [512, 512, [9881, "cog"], "f013", "M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"]
}, uN = cN, Ui = {
  prefix: "fas",
  iconName: "caret-down",
  icon: [320, 512, [], "f0d7", "M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]
}, hN = {
  prefix: "fas",
  iconName: "ellipsis-vertical",
  icon: [128, 512, ["ellipsis-v"], "f142", "M64 360c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zm0-160c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zM120 96c0 30.9-25.1 56-56 56S8 126.9 8 96S33.1 40 64 40s56 25.1 56 56z"]
}, hC = hN, Lf = {
  prefix: "fas",
  iconName: "arrow-right-arrow-left",
  icon: [448, 512, [8644, "exchange"], "f0ec", "M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]
}, dN = {
  prefix: "fas",
  iconName: "arrow-down-short-wide",
  icon: [576, 512, ["sort-amount-desc", "sort-amount-down-alt"], "f884", "M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]
}, yh = dN, mN = {
  prefix: "fas",
  iconName: "angle-down",
  icon: [448, 512, [8964], "f107", "M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, pN = {
  prefix: "fas",
  iconName: "arrow-down",
  icon: [384, 512, [8595], "f063", "M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, gN = {
  prefix: "fas",
  iconName: "magnifying-glass",
  icon: [512, 512, [128269, "search"], "f002", "M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"]
}, ng = gN, bN = {
  prefix: "fas",
  iconName: "chevron-down",
  icon: [512, 512, [], "f078", "M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]
}, Lo = {
  prefix: "fas",
  iconName: "copy",
  icon: [512, 512, [], "f0c5", "M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]
}, xf = {
  prefix: "fas",
  iconName: "plus",
  icon: [448, 512, [10133, 61543, "add"], "2b", "M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]
}, dC = {
  prefix: "fas",
  iconName: "xmark",
  icon: [320, 512, [128473, 10005, 10006, 10060, 215, "close", "multiply", "remove", "times"], "f00d", "M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]
}, sb = dC, Ul = dC, _N = {
  prefix: "fas",
  iconName: "clone",
  icon: [512, 512, [], "f24d", "M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]
}, La = {
  prefix: "fas",
  iconName: "check",
  icon: [512, 512, [10003, 10004], "f00c", "M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]
}, yN = {
  prefix: "fas",
  iconName: "triangle-exclamation",
  icon: [512, 512, [9888, "exclamation-triangle", "warning"], "f071", "M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"]
}, Fs = yN;
const ir = {};
function df(t) {
  return t.split("-")[0];
}
function ig(t) {
  return t.split("-")[1];
}
function wh(t) {
  return ["top", "bottom"].includes(df(t)) ? "x" : "y";
}
function mC(t) {
  return t === "y" ? "height" : "width";
}
function lb(t, e, n) {
  let {
    reference: i,
    floating: r
  } = t;
  const o = i.x + i.width / 2 - r.width / 2, s = i.y + i.height / 2 - r.height / 2, l = wh(e), a = mC(l), f = i[a] / 2 - r[a] / 2, c = df(e), u = l === "x";
  let h;
  switch (c) {
    case "top":
      h = {
        x: o,
        y: i.y - r.height
      };
      break;
    case "bottom":
      h = {
        x: o,
        y: i.y + i.height
      };
      break;
    case "right":
      h = {
        x: i.x + i.width,
        y: s
      };
      break;
    case "left":
      h = {
        x: i.x - r.width,
        y: s
      };
      break;
    default:
      h = {
        x: i.x,
        y: i.y
      };
  }
  switch (ig(e)) {
    case "start":
      h[l] -= f * (n && u ? -1 : 1);
      break;
    case "end":
      h[l] += f * (n && u ? -1 : 1);
      break;
  }
  return h;
}
const wN = async (t, e, n) => {
  const {
    placement: i = "bottom",
    strategy: r = "absolute",
    middleware: o = [],
    platform: s
  } = n, l = o.filter(Boolean), a = await (s.isRTL == null ? void 0 : s.isRTL(e));
  if (process.env.NODE_ENV !== "production") {
    if (s == null && console.error(["Floating UI: `platform` property was not passed to config. If you", "want to use Floating UI on the web, install @floating-ui/dom", "instead of the /core package. Otherwise, you can create your own", "`platform`: https://floating-ui.com/docs/platform"].join(" ")), l.filter((g) => {
      let {
        name: _
      } = g;
      return _ === "autoPlacement" || _ === "flip";
    }).length > 1)
      throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware", "detected. This will lead to an infinite loop. Ensure only one of", "either has been passed to the `middleware` array."].join(" "));
    (!t || !e) && console.error(["Floating UI: The reference and/or floating element was not defined", "when `computePosition()` was called. Ensure that both elements have", "been created and can be measured."].join(" "));
  }
  let f = await s.getElementRects({
    reference: t,
    floating: e,
    strategy: r
  }), {
    x: c,
    y: u
  } = lb(f, i, a), h = i, d = {}, m = 0;
  for (let g = 0; g < l.length; g++) {
    const {
      name: _,
      fn: b
    } = l[g], {
      x: w,
      y: v,
      data: M,
      reset: S
    } = await b({
      x: c,
      y: u,
      initialPlacement: i,
      placement: h,
      strategy: r,
      middlewareData: d,
      rects: f,
      platform: s,
      elements: {
        reference: t,
        floating: e
      }
    });
    if (c = w ?? c, u = v ?? u, d = {
      ...d,
      [_]: {
        ...d[_],
        ...M
      }
    }, process.env.NODE_ENV !== "production" && m > 50 && console.warn(["Floating UI: The middleware lifecycle appears to be running in an", "infinite loop. This is usually caused by a `reset` continually", "being returned without a break condition."].join(" ")), S && m <= 50) {
      m++, typeof S == "object" && (S.placement && (h = S.placement), S.rects && (f = S.rects === !0 ? await s.getElementRects({
        reference: t,
        floating: e,
        strategy: r
      }) : S.rects), {
        x: c,
        y: u
      } = lb(f, h, a)), g = -1;
      continue;
    }
  }
  return {
    x: c,
    y: u,
    placement: h,
    strategy: r,
    middlewareData: d
  };
};
function vN(t) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...t
  };
}
function kN(t) {
  return typeof t != "number" ? vN(t) : {
    top: t,
    right: t,
    bottom: t,
    left: t
  };
}
function nu(t) {
  return {
    ...t,
    top: t.y,
    left: t.x,
    right: t.x + t.width,
    bottom: t.y + t.height
  };
}
async function pC(t, e) {
  var n;
  e === void 0 && (e = {});
  const {
    x: i,
    y: r,
    platform: o,
    rects: s,
    elements: l,
    strategy: a
  } = t, {
    boundary: f = "clippingAncestors",
    rootBoundary: c = "viewport",
    elementContext: u = "floating",
    altBoundary: h = !1,
    padding: d = 0
  } = e, m = kN(d), _ = l[h ? u === "floating" ? "reference" : "floating" : u], b = nu(await o.getClippingRect({
    element: (n = await (o.isElement == null ? void 0 : o.isElement(_))) == null || n ? _ : _.contextElement || await (o.getDocumentElement == null ? void 0 : o.getDocumentElement(l.floating)),
    boundary: f,
    rootBoundary: c,
    strategy: a
  })), w = u === "floating" ? {
    ...s.floating,
    x: i,
    y: r
  } : s.reference, v = await (o.getOffsetParent == null ? void 0 : o.getOffsetParent(l.floating)), M = await (o.isElement == null ? void 0 : o.isElement(v)) ? await (o.getScale == null ? void 0 : o.getScale(v)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, S = nu(o.convertOffsetParentRelativeRectToViewportRelativeRect ? await o.convertOffsetParentRelativeRectToViewportRelativeRect({
    rect: w,
    offsetParent: v,
    strategy: a
  }) : w);
  return process.env.NODE_ENV, {
    top: (b.top - S.top + m.top) / M.y,
    bottom: (S.bottom - b.bottom + m.bottom) / M.y,
    left: (b.left - S.left + m.left) / M.x,
    right: (S.right - b.right + m.right) / M.x
  };
}
const CN = Math.min, SN = Math.max;
function ab(t, e, n) {
  return SN(t, CN(e, n));
}
const MN = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function iu(t) {
  return t.replace(/left|right|bottom|top/g, (e) => MN[e]);
}
function AN(t, e, n) {
  n === void 0 && (n = !1);
  const i = ig(t), r = wh(t), o = mC(r);
  let s = r === "x" ? i === (n ? "end" : "start") ? "right" : "left" : i === "start" ? "bottom" : "top";
  return e.reference[o] > e.floating[o] && (s = iu(s)), {
    main: s,
    cross: iu(s)
  };
}
const ON = {
  start: "end",
  end: "start"
};
function fb(t) {
  return t.replace(/start|end/g, (e) => ON[e]);
}
function TN(t) {
  const e = iu(t);
  return [fb(t), e, fb(e)];
}
const EN = function(t) {
  return t === void 0 && (t = {}), {
    name: "flip",
    options: t,
    async fn(e) {
      var n;
      const {
        placement: i,
        middlewareData: r,
        rects: o,
        initialPlacement: s,
        platform: l,
        elements: a
      } = e, {
        mainAxis: f = !0,
        crossAxis: c = !0,
        fallbackPlacements: u,
        fallbackStrategy: h = "bestFit",
        flipAlignment: d = !0,
        ...m
      } = t, g = df(i), b = u || (g === s || !d ? [iu(s)] : TN(s)), w = [s, ...b], v = await pC(e, m), M = [];
      let S = ((n = r.flip) == null ? void 0 : n.overflows) || [];
      if (f && M.push(v[g]), c) {
        const {
          main: L,
          cross: V
        } = AN(i, o, await (l.isRTL == null ? void 0 : l.isRTL(a.floating)));
        M.push(v[L], v[V]);
      }
      if (S = [...S, {
        placement: i,
        overflows: M
      }], !M.every((L) => L <= 0)) {
        var R, k;
        const L = ((R = (k = r.flip) == null ? void 0 : k.index) != null ? R : 0) + 1, V = w[L];
        if (V)
          return {
            data: {
              index: L,
              overflows: S
            },
            reset: {
              placement: V
            }
          };
        let N = "bottom";
        switch (h) {
          case "bestFit": {
            var I;
            const W = (I = S.map((U) => [U, U.overflows.filter((O) => O > 0).reduce((O, x) => O + x, 0)]).sort((U, O) => U[1] - O[1])[0]) == null ? void 0 : I[0].placement;
            W && (N = W);
            break;
          }
          case "initialPlacement":
            N = s;
            break;
        }
        if (i !== N)
          return {
            reset: {
              placement: N
            }
          };
      }
      return {};
    }
  };
};
async function PN(t, e) {
  const {
    placement: n,
    platform: i,
    elements: r
  } = t, o = await (i.isRTL == null ? void 0 : i.isRTL(r.floating)), s = df(n), l = ig(n), a = wh(n) === "x", f = ["left", "top"].includes(s) ? -1 : 1, c = o && a ? -1 : 1, u = typeof e == "function" ? e(t) : e;
  let {
    mainAxis: h,
    crossAxis: d,
    alignmentAxis: m
  } = typeof u == "number" ? {
    mainAxis: u,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...u
  };
  return l && typeof m == "number" && (d = l === "end" ? m * -1 : m), a ? {
    x: d * c,
    y: h * f
  } : {
    x: h * f,
    y: d * c
  };
}
const RN = function(t) {
  return t === void 0 && (t = 0), {
    name: "offset",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i
      } = e, r = await PN(e, t);
      return {
        x: n + r.x,
        y: i + r.y,
        data: r
      };
    }
  };
};
function IN(t) {
  return t === "x" ? "y" : "x";
}
const NN = function(t) {
  return t === void 0 && (t = {}), {
    name: "shift",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i,
        placement: r
      } = e, {
        mainAxis: o = !0,
        crossAxis: s = !1,
        limiter: l = {
          fn: (_) => {
            let {
              x: b,
              y: w
            } = _;
            return {
              x: b,
              y: w
            };
          }
        },
        ...a
      } = t, f = {
        x: n,
        y: i
      }, c = await pC(e, a), u = wh(df(r)), h = IN(u);
      let d = f[u], m = f[h];
      if (o) {
        const _ = u === "y" ? "top" : "left", b = u === "y" ? "bottom" : "right", w = d + c[_], v = d - c[b];
        d = ab(w, d, v);
      }
      if (s) {
        const _ = h === "y" ? "top" : "left", b = h === "y" ? "bottom" : "right", w = m + c[_], v = m - c[b];
        m = ab(w, m, v);
      }
      const g = l.fn({
        ...e,
        [u]: d,
        [h]: m
      });
      return {
        ...g,
        data: {
          x: g.x - n,
          y: g.y - i
        }
      };
    }
  };
};
function yo(t) {
  var e;
  return ((e = t.ownerDocument) == null ? void 0 : e.defaultView) || window;
}
function Gr(t) {
  return yo(t).getComputedStyle(t);
}
function Jo(t) {
  return bC(t) ? (t.nodeName || "").toLowerCase() : "";
}
let zf;
function gC() {
  if (zf)
    return zf;
  const t = navigator.userAgentData;
  return t && Array.isArray(t.brands) ? (zf = t.brands.map((e) => e.brand + "/" + e.version).join(" "), zf) : navigator.userAgent;
}
function Xr(t) {
  return t instanceof yo(t).HTMLElement;
}
function Xi(t) {
  return t instanceof yo(t).Element;
}
function bC(t) {
  return t instanceof yo(t).Node;
}
function cb(t) {
  if (typeof ShadowRoot > "u")
    return !1;
  const e = yo(t).ShadowRoot;
  return t instanceof e || t instanceof ShadowRoot;
}
function vh(t) {
  const {
    overflow: e,
    overflowX: n,
    overflowY: i,
    display: r
  } = Gr(t);
  return /auto|scroll|overlay|hidden/.test(e + i + n) && !["inline", "contents"].includes(r);
}
function DN(t) {
  return ["table", "td", "th"].includes(Jo(t));
}
function rg(t) {
  const e = /firefox/i.test(gC()), n = Gr(t), i = n.backdropFilter || n.WebkitBackdropFilter;
  return n.transform !== "none" || n.perspective !== "none" || (i ? i !== "none" : !1) || e && n.willChange === "filter" || e && (n.filter ? n.filter !== "none" : !1) || ["transform", "perspective"].some((r) => n.willChange.includes(r)) || ["paint", "layout", "strict", "content"].some(
    (r) => {
      const o = n.contain;
      return o != null ? o.includes(r) : !1;
    }
  );
}
function _C() {
  return !/^((?!chrome|android).)*safari/i.test(gC());
}
function og(t) {
  return ["html", "body", "#document"].includes(Jo(t));
}
const ub = Math.min, _a = Math.max, hb = Math.round, Mm = {
  x: 1,
  y: 1
};
function xa(t) {
  const e = !Xi(t) && t.contextElement ? t.contextElement : Xi(t) ? t : null;
  if (!e)
    return Mm;
  const n = e.getBoundingClientRect(), i = Gr(e);
  if (i.boxSizing !== "border-box")
    return Xr(e) ? {
      x: e.offsetWidth > 0 && hb(n.width) / e.offsetWidth || 1,
      y: e.offsetHeight > 0 && hb(n.height) / e.offsetHeight || 1
    } : Mm;
  let r = n.width / parseFloat(i.width), o = n.height / parseFloat(i.height);
  return (!r || !Number.isFinite(r)) && (r = 1), (!o || !Number.isFinite(o)) && (o = 1), {
    x: r,
    y: o
  };
}
function Ko(t, e, n, i) {
  var r, o, s, l;
  e === void 0 && (e = !1), n === void 0 && (n = !1);
  const a = t.getBoundingClientRect();
  let f = Mm;
  e && (i ? Xi(i) && (f = xa(i)) : f = xa(t));
  const c = Xi(t) ? yo(t) : window, u = !_C() && n, h = (a.left + (u && (r = (o = c.visualViewport) == null ? void 0 : o.offsetLeft) != null ? r : 0)) / f.x, d = (a.top + (u && (s = (l = c.visualViewport) == null ? void 0 : l.offsetTop) != null ? s : 0)) / f.y, m = a.width / f.x, g = a.height / f.y;
  return {
    width: m,
    height: g,
    top: d,
    right: h + m,
    bottom: d + g,
    left: h,
    x: h,
    y: d
  };
}
function ts(t) {
  return ((bC(t) ? t.ownerDocument : t.document) || window.document).documentElement;
}
function kh(t) {
  return Xi(t) ? {
    scrollLeft: t.scrollLeft,
    scrollTop: t.scrollTop
  } : {
    scrollLeft: t.pageXOffset,
    scrollTop: t.pageYOffset
  };
}
function yC(t) {
  return Ko(ts(t)).left + kh(t).scrollLeft;
}
function jN(t, e, n) {
  const i = Xr(e), r = ts(e), o = Ko(t, !0, n === "fixed", e);
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = {
    x: 0,
    y: 0
  };
  if (i || !i && n !== "fixed")
    if ((Jo(e) !== "body" || vh(r)) && (s = kh(e)), Xr(e)) {
      const a = Ko(e, !0);
      l.x = a.x + e.clientLeft, l.y = a.y + e.clientTop;
    } else
      r && (l.x = yC(r));
  return {
    x: o.left + s.scrollLeft - l.x,
    y: o.top + s.scrollTop - l.y,
    width: o.width,
    height: o.height
  };
}
function za(t) {
  if (Jo(t) === "html")
    return t;
  const e = t.assignedSlot || t.parentNode || (cb(t) ? t.host : null) || ts(t);
  return cb(e) ? e.host : e;
}
function db(t) {
  return !Xr(t) || Gr(t).position === "fixed" ? null : t.offsetParent;
}
function BN(t) {
  let e = za(t);
  for (; Xr(e) && !og(e); ) {
    if (rg(e))
      return e;
    e = za(e);
  }
  return null;
}
function mb(t) {
  const e = yo(t);
  let n = db(t);
  for (; n && DN(n) && Gr(n).position === "static"; )
    n = db(n);
  return n && (Jo(n) === "html" || Jo(n) === "body" && Gr(n).position === "static" && !rg(n)) ? e : n || BN(t) || e;
}
function LN(t) {
  if (Xr(t))
    return {
      width: t.offsetWidth,
      height: t.offsetHeight
    };
  const e = Ko(t);
  return {
    width: e.width,
    height: e.height
  };
}
function xN(t) {
  let {
    rect: e,
    offsetParent: n,
    strategy: i
  } = t;
  const r = Xr(n), o = ts(n);
  if (n === o)
    return e;
  let s = {
    scrollLeft: 0,
    scrollTop: 0
  }, l = {
    x: 1,
    y: 1
  };
  const a = {
    x: 0,
    y: 0
  };
  if ((r || !r && i !== "fixed") && ((Jo(n) !== "body" || vh(o)) && (s = kh(n)), Xr(n))) {
    const f = Ko(n);
    l = xa(n), a.x = f.x + n.clientLeft, a.y = f.y + n.clientTop;
  }
  return {
    width: e.width * l.x,
    height: e.height * l.y,
    x: e.x * l.x - s.scrollLeft * l.x + a.x,
    y: e.y * l.y - s.scrollTop * l.y + a.y
  };
}
function zN(t, e) {
  const n = yo(t), i = ts(t), r = n.visualViewport;
  let o = i.clientWidth, s = i.clientHeight, l = 0, a = 0;
  if (r) {
    o = r.width, s = r.height;
    const f = _C();
    (f || !f && e === "fixed") && (l = r.offsetLeft, a = r.offsetTop);
  }
  return {
    width: o,
    height: s,
    x: l,
    y: a
  };
}
function VN(t) {
  var e;
  const n = ts(t), i = kh(t), r = (e = t.ownerDocument) == null ? void 0 : e.body, o = _a(n.scrollWidth, n.clientWidth, r ? r.scrollWidth : 0, r ? r.clientWidth : 0), s = _a(n.scrollHeight, n.clientHeight, r ? r.scrollHeight : 0, r ? r.clientHeight : 0);
  let l = -i.scrollLeft + yC(t);
  const a = -i.scrollTop;
  return Gr(r || n).direction === "rtl" && (l += _a(n.clientWidth, r ? r.clientWidth : 0) - o), {
    width: o,
    height: s,
    x: l,
    y: a
  };
}
function wC(t) {
  const e = za(t);
  return og(e) ? t.ownerDocument.body : Xr(e) && vh(e) ? e : wC(e);
}
function ya(t, e) {
  var n;
  e === void 0 && (e = []);
  const i = wC(t), r = i === ((n = t.ownerDocument) == null ? void 0 : n.body), o = yo(i);
  return r ? e.concat(o, o.visualViewport || [], vh(i) ? i : []) : e.concat(i, ya(i));
}
function FN(t, e) {
  const n = Ko(t, !0, e === "fixed"), i = n.top + t.clientTop, r = n.left + t.clientLeft, o = Xr(t) ? xa(t) : {
    x: 1,
    y: 1
  }, s = t.clientWidth * o.x, l = t.clientHeight * o.y, a = r * o.x, f = i * o.y;
  return {
    top: f,
    left: a,
    right: a + s,
    bottom: f + l,
    x: a,
    y: f,
    width: s,
    height: l
  };
}
function pb(t, e, n) {
  return e === "viewport" ? nu(zN(t, n)) : Xi(e) ? FN(e, n) : nu(VN(ts(t)));
}
function HN(t, e) {
  const n = e.get(t);
  if (n)
    return n;
  let i = ya(t).filter((l) => Xi(l) && Jo(l) !== "body"), r = null;
  const o = Gr(t).position === "fixed";
  let s = o ? za(t) : t;
  for (; Xi(s) && !og(s); ) {
    const l = Gr(s), a = rg(s);
    (o ? !a && !r : !a && l.position === "static" && !!r && ["absolute", "fixed"].includes(r.position)) ? i = i.filter((c) => c !== s) : r = l, s = za(s);
  }
  return e.set(t, i), i;
}
function WN(t) {
  let {
    element: e,
    boundary: n,
    rootBoundary: i,
    strategy: r
  } = t;
  const s = [...n === "clippingAncestors" ? HN(e, this._c) : [].concat(n), i], l = s[0], a = s.reduce((f, c) => {
    const u = pb(e, c, r);
    return f.top = _a(u.top, f.top), f.right = ub(u.right, f.right), f.bottom = ub(u.bottom, f.bottom), f.left = _a(u.left, f.left), f;
  }, pb(e, l, r));
  return {
    width: a.right - a.left,
    height: a.bottom - a.top,
    x: a.left,
    y: a.top
  };
}
const UN = {
  getClippingRect: WN,
  convertOffsetParentRelativeRectToViewportRelativeRect: xN,
  isElement: Xi,
  getDimensions: LN,
  getOffsetParent: mb,
  getDocumentElement: ts,
  getScale: xa,
  async getElementRects(t) {
    let {
      reference: e,
      floating: n,
      strategy: i
    } = t;
    const r = this.getOffsetParent || mb, o = this.getDimensions;
    return {
      reference: jN(e, await r(n), i),
      floating: {
        x: 0,
        y: 0,
        ...await o(n)
      }
    };
  },
  getClientRects: (t) => Array.from(t.getClientRects()),
  isRTL: (t) => Gr(t).direction === "rtl"
};
function qN(t, e, n, i) {
  i === void 0 && (i = {});
  const {
    ancestorScroll: r = !0,
    ancestorResize: o = !0,
    elementResize: s = !0,
    animationFrame: l = !1
  } = i, a = r && !l, f = a || o ? [...Xi(t) ? ya(t) : t.contextElement ? ya(t.contextElement) : [], ...ya(e)] : [];
  f.forEach((m) => {
    a && m.addEventListener("scroll", n, {
      passive: !0
    }), o && m.addEventListener("resize", n);
  });
  let c = null;
  if (s) {
    let m = !0;
    c = new ResizeObserver(() => {
      m || n(), m = !1;
    }), Xi(t) && !l && c.observe(t), !Xi(t) && t.contextElement && !l && c.observe(t.contextElement), c.observe(e);
  }
  let u, h = l ? Ko(t) : null;
  l && d();
  function d() {
    const m = Ko(t);
    h && (m.x !== h.x || m.y !== h.y || m.width !== h.width || m.height !== h.height) && n(), h = m, u = requestAnimationFrame(d);
  }
  return n(), () => {
    var m;
    f.forEach((g) => {
      a && g.removeEventListener("scroll", n), o && g.removeEventListener("resize", n);
    }), (m = c) == null || m.disconnect(), c = null, l && cancelAnimationFrame(u);
  };
}
const JN = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = {
    platform: UN,
    ...n
  }, o = {
    ...r.platform,
    _c: i
  };
  return wN(t, e, {
    ...r,
    platform: o
  });
};
function KN(t) {
  let e, n;
  const i = {
    autoUpdate: !0
  };
  let r = t;
  const o = (f) => ({ ...i, ...t || {}, ...f || {} }), s = (f) => {
    e && n && (r = o(f), JN(e, n, r).then((c) => {
      Object.assign(n.style, {
        position: c.strategy,
        left: `${c.x}px`,
        top: `${c.y}px`
      }), r != null && r.onComputed && r.onComputed(c);
    }));
  };
  return [
    (f) => {
      e = f, s();
    },
    (f, c) => {
      let u;
      n = f, r = o(c), setTimeout(() => s(c), 0), s(c);
      const h = () => {
        u && (u(), u = void 0);
      }, d = ({ autoUpdate: m } = r || {}) => {
        if (h(), m !== !1)
          return qN(e, n, () => s(r), m === !0 ? {} : m);
      };
      return u = d(), {
        update(m) {
          s(m), u = d(m);
        },
        destroy() {
          h();
        }
      };
    },
    s
  ];
}
function GN({
  loadOptions: t,
  filterText: e,
  items: n,
  multiple: i,
  value: r,
  itemId: o,
  groupBy: s,
  filterSelectedItems: l,
  itemFilter: a,
  convertStringItemsToObjects: f,
  filterGroupedItems: c,
  label: u
}) {
  if (n && t)
    return n;
  if (!n)
    return [];
  n && n.length > 0 && typeof n[0] != "object" && (n = f(n));
  let h = n.filter((d) => {
    let m = a(d[u], e, d);
    return m && i && (r != null && r.length) && (m = !r.some((g) => l ? g[o] === d[o] : !1)), m;
  });
  return s && (h = c(h)), h;
}
async function XN({ dispatch: t, loadOptions: e, convertStringItemsToObjects: n, filterText: i }) {
  let r = await e(i).catch((o) => {
    console.warn("svelte-select loadOptions error :>> ", o), t("error", { type: "loadOptions", details: o });
  });
  if (r && !r.cancelled)
    return r ? (r && r.length > 0 && typeof r[0] != "object" && (r = n(r)), t("loaded", { items: r })) : r = [], {
      filteredItems: r,
      loading: !1,
      focused: !0,
      listOpen: !0
    };
}
function QN(t) {
  let e, n;
  return {
    c() {
      e = ut("svg"), n = ut("path"), p(n, "fill", "currentColor"), p(n, "d", `M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`), p(e, "width", "100%"), p(e, "height", "100%"), p(e, "viewBox", "0 0 20 20"), p(e, "focusable", "false"), p(e, "aria-hidden", "true"), p(e, "class", "svelte-qbd276");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class YN extends Be {
  constructor(e) {
    super(), je(this, e, null, QN, It, {});
  }
}
function ZN(t) {
  let e, n;
  return {
    c() {
      e = ut("svg"), n = ut("path"), p(n, "fill", "currentColor"), p(n, "d", `M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`), p(e, "width", "100%"), p(e, "height", "100%"), p(e, "viewBox", "-2 -2 50 50"), p(e, "focusable", "false"), p(e, "aria-hidden", "true"), p(e, "role", "presentation"), p(e, "class", "svelte-whdbu1");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class ru extends Be {
  constructor(e) {
    super(), je(this, e, null, ZN, It, {});
  }
}
function $N(t) {
  let e, n;
  return {
    c() {
      e = ut("svg"), n = ut("circle"), p(n, "class", "circle_path svelte-1p3nqvd"), p(n, "cx", "50"), p(n, "cy", "50"), p(n, "r", "20"), p(n, "fill", "none"), p(n, "stroke", "currentColor"), p(n, "stroke-width", "5"), p(n, "stroke-miterlimit", "10"), p(e, "class", "loading svelte-1p3nqvd"), p(e, "viewBox", "25 25 50 50");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p: fe,
    i: fe,
    o: fe,
    d(i) {
      i && j(e);
    }
  };
}
class eD extends Be {
  constructor(e) {
    super(), je(this, e, null, $N, It, {});
  }
}
const tD = (t) => ({ value: t[0] & 8 }), gb = (t) => ({ value: t[3] }), nD = (t) => ({ listOpen: t[0] & 64 }), bb = (t) => ({ listOpen: t[6] }), iD = (t) => ({}), _b = (t) => ({}), rD = (t) => ({}), yb = (t) => ({}), oD = (t) => ({ selection: t[0] & 8 }), wb = (t) => ({ selection: t[3] });
function vb(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const sD = (t) => ({}), kb = (t) => ({}), lD = (t) => ({ selection: t[0] & 8 }), Cb = (t) => ({
  selection: t[127],
  index: t[129]
}), aD = (t) => ({}), Sb = (t) => ({}), fD = (t) => ({}), Mb = (t) => ({});
function Ab(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const cD = (t) => ({
  item: t[0] & 16777216
}), Ob = (t) => ({
  item: t[127],
  index: t[129]
}), uD = (t) => ({
  filteredItems: t[0] & 16777216
}), Tb = (t) => ({ filteredItems: t[24] });
function Eb(t) {
  let e, n, i, r, o, s;
  const l = [mD, dD, hD], a = [];
  function f(c, u) {
    return c[50].list ? 0 : c[24].length > 0 ? 1 : c[19] ? -1 : 2;
  }
  return ~(n = f(t)) && (i = a[n] = l[n](t)), {
    c() {
      e = T("div"), i && i.c(), p(e, "class", "svelte-select-list svelte-18e845"), de(e, "prefloat", t[28]);
    },
    m(c, u) {
      B(c, e, u), ~n && a[n].m(e, null), t[91](e), r = !0, o || (s = [
        Ai(t[49].call(null, e)),
        X(e, "scroll", t[41]),
        X(e, "pointerdown", De(pr(t[85]))),
        X(e, "pointerup", De(pr(t[86])))
      ], o = !0);
    },
    p(c, u) {
      let h = n;
      n = f(c), n === h ? ~n && a[n].p(c, u) : (i && (me(), E(a[h], 1, 1, () => {
        a[h] = null;
      }), pe()), ~n ? (i = a[n], i ? i.p(c, u) : (i = a[n] = l[n](c), i.c()), C(i, 1), i.m(e, null)) : i = null), (!r || u[0] & 268435456) && de(e, "prefloat", c[28]);
    },
    i(c) {
      r || (C(i), r = !0);
    },
    o(c) {
      E(i), r = !1;
    },
    d(c) {
      c && j(e), ~n && a[n].d(), t[91](null), o = !1, et(s);
    }
  };
}
function hD(t) {
  let e;
  const n = t[80].empty, i = An(n, t, t[79], Mb), r = i || pD();
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i && i.p && (!e || s[2] & 131072) && Tn(
        i,
        n,
        o,
        o[79],
        e ? On(n, o[79], s, fD) : En(o[79]),
        Mb
      );
    },
    i(o) {
      e || (C(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function dD(t) {
  let e, n, i = t[24], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Pb(Ab(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 1627402376 | l[1] & 28672 | l[2] & 131072) {
        i = s[24];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = Ab(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = Pb(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function mD(t) {
  let e;
  const n = t[80].list, i = An(n, t, t[79], Tb);
  return {
    c() {
      i && i.c();
    },
    m(r, o) {
      i && i.m(r, o), e = !0;
    },
    p(r, o) {
      i && i.p && (!e || o[0] & 16777216 | o[2] & 131072) && Tn(
        i,
        n,
        r,
        r[79],
        e ? On(n, r[79], o, uD) : En(r[79]),
        Tb
      );
    },
    i(r) {
      e || (C(i, r), e = !0);
    },
    o(r) {
      E(i, r), e = !1;
    },
    d(r) {
      i && i.d(r);
    }
  };
}
function pD(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = "No options", p(e, "class", "empty svelte-18e845");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function gD(t) {
  var i;
  let e = ((i = t[127]) == null ? void 0 : i[t[12]]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(r, o) {
      B(r, n, o);
    },
    p(r, o) {
      var s;
      o[0] & 16781312 && e !== (e = ((s = r[127]) == null ? void 0 : s[r[12]]) + "") && Te(n, e);
    },
    d(r) {
      r && j(n);
    }
  };
}
function Pb(t) {
  let e, n, i, r, o, s, l, a;
  const f = t[80].item, c = An(f, t, t[79], Ob), u = c || gD(t);
  function h() {
    return t[88](t[129]);
  }
  function d() {
    return t[89](t[129]);
  }
  function m() {
    return t[90](t[127], t[129]);
  }
  return {
    c() {
      var g;
      e = T("div"), n = T("div"), u && u.c(), o = q(), p(n, "class", "item svelte-18e845"), de(n, "list-group-title", t[127].groupHeader), de(n, "active", t[45](t[127], t[3], t[13])), de(n, "first", OD(t[129])), de(n, "hover", t[7] === t[129]), de(n, "group-item", t[127].groupItem), de(n, "not-selectable", ((g = t[127]) == null ? void 0 : g.selectable) === !1), p(e, "class", "list-item svelte-18e845"), p(e, "tabindex", "-1");
    },
    m(g, _) {
      B(g, e, _), y(e, n), u && u.m(n, null), y(e, o), s = !0, l || (a = [
        Ai(i = t[46].call(null, n, {
          scroll: t[45](t[127], t[3], t[13]),
          listDom: t[30]
        })),
        Ai(r = t[47].call(null, n, {
          scroll: t[29] === t[129],
          listDom: t[30]
        })),
        X(e, "mouseover", h),
        X(e, "focus", d),
        X(e, "click", De(m)),
        X(e, "keydown", De(pr(t[87])))
      ], l = !0);
    },
    p(g, _) {
      var b;
      t = g, c ? c.p && (!s || _[0] & 16777216 | _[2] & 131072) && Tn(
        c,
        f,
        t,
        t[79],
        s ? On(f, t[79], _, cD) : En(t[79]),
        Ob
      ) : u && u.p && (!s || _[0] & 16781312) && u.p(t, s ? _ : [-1, -1, -1, -1, -1]), i && Gn(i.update) && _[0] & 1090527240 && i.update.call(null, {
        scroll: t[45](t[127], t[3], t[13]),
        listDom: t[30]
      }), r && Gn(r.update) && _[0] & 1610612736 && r.update.call(null, {
        scroll: t[29] === t[129],
        listDom: t[30]
      }), (!s || _[0] & 16777216) && de(n, "list-group-title", t[127].groupHeader), (!s || _[0] & 16785416 | _[1] & 16384) && de(n, "active", t[45](t[127], t[3], t[13])), (!s || _[0] & 128) && de(n, "hover", t[7] === t[129]), (!s || _[0] & 16777216) && de(n, "group-item", t[127].groupItem), (!s || _[0] & 16777216) && de(n, "not-selectable", ((b = t[127]) == null ? void 0 : b.selectable) === !1);
    },
    i(g) {
      s || (C(u, g), s = !0);
    },
    o(g) {
      E(u, g), s = !1;
    },
    d(g) {
      g && j(e), u && u.d(g), l = !1, et(a);
    }
  };
}
function Rb(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = T("span"), n = le(t[32]), i = q(), r = T("span"), o = le(t[31]), p(e, "id", "aria-selection"), p(e, "class", "svelte-18e845"), p(r, "id", "aria-context"), p(r, "class", "svelte-18e845");
    },
    m(s, l) {
      B(s, e, l), y(e, n), B(s, i, l), B(s, r, l), y(r, o);
    },
    p(s, l) {
      l[1] & 2 && Te(n, s[32]), l[1] & 1 && Te(o, s[31]);
    },
    d(s) {
      s && j(e), s && j(i), s && j(r);
    }
  };
}
function Ib(t) {
  let e, n, i, r;
  const o = [_D, bD], s = [];
  function l(a, f) {
    return a[9] ? 0 : 1;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = Ze();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), pe(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), C(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (C(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function bD(t) {
  let e, n;
  const i = t[80].selection, r = An(i, t, t[79], wb), o = r || yD(t);
  return {
    c() {
      e = T("div"), o && o.c(), p(e, "class", "selected-item svelte-18e845"), de(e, "hide-selected-item", t[35]);
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r ? r.p && (!n || l[0] & 8 | l[2] & 131072) && Tn(
        r,
        i,
        s,
        s[79],
        n ? On(i, s[79], l, oD) : En(s[79]),
        wb
      ) : o && o.p && (!n || l[0] & 4104) && o.p(s, n ? l : [-1, -1, -1, -1, -1]), (!n || l[1] & 16) && de(e, "hide-selected-item", s[35]);
    },
    i(s) {
      n || (C(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function _D(t) {
  let e, n, i = t[3], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Db(vb(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, l) {
      if (l[0] & 67116040 | l[1] & 32 | l[2] & 131072) {
        i = s[3];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = vb(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = Db(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function yD(t) {
  let e = t[3][t[12]] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[3][i[12]] + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function wD(t) {
  let e = t[127][t[12]] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[127][i[12]] + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function Nb(t) {
  let e, n, i, r;
  const o = t[80]["multi-clear-icon"], s = An(o, t, t[79], kb), l = s || vD();
  function a() {
    return t[92](t[129]);
  }
  return {
    c() {
      e = T("div"), l && l.c(), p(e, "class", "multi-item-clear svelte-18e845");
    },
    m(f, c) {
      B(f, e, c), l && l.m(e, null), n = !0, i || (r = [
        X(e, "pointerdown", De(pr(t[83]))),
        X(e, "click", a),
        X(e, "keydown", De(pr(t[84])))
      ], i = !0);
    },
    p(f, c) {
      t = f, s && s.p && (!n || c[2] & 131072) && Tn(
        s,
        o,
        t,
        t[79],
        n ? On(o, t[79], c, sD) : En(t[79]),
        kb
      );
    },
    i(f) {
      n || (C(l, f), n = !0);
    },
    o(f) {
      E(l, f), n = !1;
    },
    d(f) {
      f && j(e), l && l.d(f), i = !1, et(r);
    }
  };
}
function vD(t) {
  let e, n;
  return e = new ru({}), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Db(t) {
  let e, n, i, r, o, s, l;
  const a = t[80].selection, f = An(a, t, t[79], Cb), c = f || wD(t);
  let u = !t[11] && !t[10] && ru && Nb(t);
  function h() {
    return t[93](t[129]);
  }
  return {
    c() {
      e = T("div"), n = T("span"), c && c.c(), i = q(), u && u.c(), r = q(), p(n, "class", "multi-item-text svelte-18e845"), p(e, "class", "multi-item svelte-18e845"), de(e, "active", t[26] === t[129]), de(e, "disabled", t[11]);
    },
    m(d, m) {
      B(d, e, m), y(e, n), c && c.m(n, null), y(e, i), u && u.m(e, null), y(e, r), o = !0, s || (l = [
        X(e, "click", pr(h)),
        X(e, "keydown", De(pr(t[82])))
      ], s = !0);
    },
    p(d, m) {
      t = d, f ? f.p && (!o || m[0] & 8 | m[2] & 131072) && Tn(
        f,
        a,
        t,
        t[79],
        o ? On(a, t[79], m, lD) : En(t[79]),
        Cb
      ) : c && c.p && (!o || m[0] & 4104) && c.p(t, o ? m : [-1, -1, -1, -1, -1]), !t[11] && !t[10] && ru ? u ? (u.p(t, m), m[0] & 3072 && C(u, 1)) : (u = Nb(t), u.c(), C(u, 1), u.m(e, r)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), (!o || m[0] & 67108864) && de(e, "active", t[26] === t[129]), (!o || m[0] & 2048) && de(e, "disabled", t[11]);
    },
    i(d) {
      o || (C(c, d), C(u), o = !0);
    },
    o(d) {
      E(c, d), E(u), o = !1;
    },
    d(d) {
      d && j(e), c && c.d(d), u && u.d(), s = !1, et(l);
    }
  };
}
function jb(t) {
  let e, n;
  const i = t[80]["loading-icon"], r = An(i, t, t[79], yb), o = r || kD();
  return {
    c() {
      e = T("div"), o && o.c(), p(e, "class", "icon loading svelte-18e845"), p(e, "aria-hidden", "true");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r && r.p && (!n || l[2] & 131072) && Tn(
        r,
        i,
        s,
        s[79],
        n ? On(i, s[79], l, rD) : En(s[79]),
        yb
      );
    },
    i(s) {
      n || (C(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function kD(t) {
  let e, n;
  return e = new eD({}), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Bb(t) {
  let e, n, i, r;
  const o = t[80]["clear-icon"], s = An(o, t, t[79], _b), l = s || CD();
  return {
    c() {
      e = T("button"), l && l.c(), p(e, "class", "icon clear-select svelte-18e845"), p(e, "tabindex", "0");
    },
    m(a, f) {
      B(a, e, f), l && l.m(e, null), n = !0, i || (r = [
        X(e, "click", De(pr(t[22]))),
        X(e, "pointerdown", De(pr(t[81])))
      ], i = !0);
    },
    p(a, f) {
      s && s.p && (!n || f[2] & 131072) && Tn(
        s,
        o,
        a,
        a[79],
        n ? On(o, a[79], f, iD) : En(a[79]),
        _b
      );
    },
    i(a) {
      n || (C(l, a), n = !0);
    },
    o(a) {
      E(l, a), n = !1;
    },
    d(a) {
      a && j(e), l && l.d(a), i = !1, et(r);
    }
  };
}
function CD(t) {
  let e, n;
  return e = new ru({}), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Lb(t) {
  let e, n;
  const i = t[80]["chevron-icon"], r = An(i, t, t[79], bb), o = r || SD();
  return {
    c() {
      e = T("div"), o && o.c(), p(e, "class", "icon chevron svelte-18e845"), p(e, "aria-hidden", "true");
    },
    m(s, l) {
      B(s, e, l), o && o.m(e, null), n = !0;
    },
    p(s, l) {
      r && r.p && (!n || l[0] & 64 | l[2] & 131072) && Tn(
        r,
        i,
        s,
        s[79],
        n ? On(i, s[79], l, nD) : En(s[79]),
        bb
      );
    },
    i(s) {
      n || (C(o, s), n = !0);
    },
    o(s) {
      E(o, s), n = !1;
    },
    d(s) {
      s && j(e), o && o.d(s);
    }
  };
}
function SD(t) {
  let e, n;
  return e = new YN({}), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function xb(t) {
  let e;
  const n = t[80].required, i = An(n, t, t[79], gb), r = i || MD();
  return {
    c() {
      r && r.c();
    },
    m(o, s) {
      r && r.m(o, s), e = !0;
    },
    p(o, s) {
      i && i.p && (!e || s[0] & 8 | s[2] & 131072) && Tn(
        i,
        n,
        o,
        o[79],
        e ? On(n, o[79], s, tD) : En(o[79]),
        gb
      );
    },
    i(o) {
      e || (C(r, o), e = !0);
    },
    o(o) {
      E(r, o), e = !1;
    },
    d(o) {
      r && r.d(o);
    }
  };
}
function MD(t) {
  let e;
  return {
    c() {
      e = T("select"), p(e, "class", "required svelte-18e845"), e.required = !0;
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function AD(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k = t[6] && Eb(t), I = t[2] && Rb(t);
  const L = t[80].prepend, V = An(L, t, t[79], Sb);
  let N = t[25] && Ib(t), W = [
    {
      readOnly: c = !t[17]
    },
    t[27],
    { placeholder: t[33] },
    { style: t[18] },
    { disabled: t[11] }
  ], U = {};
  for (let D = 0; D < W.length; D += 1)
    U = $o(U, W[D]);
  let O = t[5] && jb(t), x = t[34] && Bb(t), A = t[20] && Lb(t), H = t[16] && (!t[3] || t[3].length === 0) && xb(t);
  return {
    c() {
      e = T("div"), k && k.c(), n = q(), i = T("span"), I && I.c(), r = q(), o = T("div"), V && V.c(), s = q(), l = T("div"), N && N.c(), a = q(), f = T("input"), u = q(), h = T("div"), O && O.c(), d = q(), x && x.c(), m = q(), A && A.c(), g = q(), _ = T("input"), w = q(), H && H.c(), p(i, "aria-live", "polite"), p(i, "aria-atomic", "false"), p(i, "aria-relevant", "additions text"), p(i, "class", "a11y-text svelte-18e845"), p(o, "class", "prepend svelte-18e845"), f1(f, U), de(f, "svelte-18e845", !0), p(l, "class", "value-container svelte-18e845"), p(h, "class", "indicators svelte-18e845"), p(_, "name", t[8]), p(_, "type", "hidden"), _.value = b = t[3] ? JSON.stringify(t[3]) : null, p(_, "class", "svelte-18e845"), p(e, "class", v = "svelte-select " + t[21] + " svelte-18e845"), p(e, "style", t[14]), de(e, "multi", t[9]), de(e, "disabled", t[11]), de(e, "focused", t[2]), de(e, "list-open", t[6]), de(e, "show-chevron", t[20]), de(e, "error", t[15]);
    },
    m(D, P) {
      B(D, e, P), k && k.m(e, null), y(e, n), y(e, i), I && I.m(i, null), y(e, r), y(e, o), V && V.m(o, null), y(e, s), y(e, l), N && N.m(l, null), y(l, a), y(l, f), f.autofocus && f.focus(), t[94](f), Vo(f, t[4]), y(e, u), y(e, h), O && O.m(h, null), y(h, d), x && x.m(h, null), y(h, m), A && A.m(h, null), y(e, g), y(e, _), y(e, w), H && H.m(e, null), t[96](e), M = !0, S || (R = [
        X(window, "click", t[42]),
        X(window, "keydown", t[37]),
        X(f, "keydown", t[37]),
        X(f, "blur", t[39]),
        X(f, "focus", t[38]),
        X(f, "input", t[95]),
        X(e, "pointerup", pr(t[40])),
        Ai(t[48].call(null, e))
      ], S = !0);
    },
    p(D, P) {
      D[6] ? k ? (k.p(D, P), P[0] & 64 && C(k, 1)) : (k = Eb(D), k.c(), C(k, 1), k.m(e, n)) : k && (me(), E(k, 1, 1, () => {
        k = null;
      }), pe()), D[2] ? I ? I.p(D, P) : (I = Rb(D), I.c(), I.m(i, null)) : I && (I.d(1), I = null), V && V.p && (!M || P[2] & 131072) && Tn(
        V,
        L,
        D,
        D[79],
        M ? On(L, D[79], P, aD) : En(D[79]),
        Sb
      ), D[25] ? N ? (N.p(D, P), P[0] & 33554432 && C(N, 1)) : (N = Ib(D), N.c(), C(N, 1), N.m(l, a)) : N && (me(), E(N, 1, 1, () => {
        N = null;
      }), pe()), f1(f, U = xs(W, [
        (!M || P[0] & 131072 && c !== (c = !D[17])) && { readOnly: c },
        P[0] & 134217728 && D[27],
        (!M || P[1] & 4) && { placeholder: D[33] },
        (!M || P[0] & 262144) && { style: D[18] },
        (!M || P[0] & 2048) && { disabled: D[11] }
      ])), P[0] & 16 && f.value !== D[4] && Vo(f, D[4]), de(f, "svelte-18e845", !0), D[5] ? O ? (O.p(D, P), P[0] & 32 && C(O, 1)) : (O = jb(D), O.c(), C(O, 1), O.m(h, d)) : O && (me(), E(O, 1, 1, () => {
        O = null;
      }), pe()), D[34] ? x ? (x.p(D, P), P[1] & 8 && C(x, 1)) : (x = Bb(D), x.c(), C(x, 1), x.m(h, m)) : x && (me(), E(x, 1, 1, () => {
        x = null;
      }), pe()), D[20] ? A ? (A.p(D, P), P[0] & 1048576 && C(A, 1)) : (A = Lb(D), A.c(), C(A, 1), A.m(h, null)) : A && (me(), E(A, 1, 1, () => {
        A = null;
      }), pe()), (!M || P[0] & 256) && p(_, "name", D[8]), (!M || P[0] & 8 && b !== (b = D[3] ? JSON.stringify(D[3]) : null)) && (_.value = b), D[16] && (!D[3] || D[3].length === 0) ? H ? (H.p(D, P), P[0] & 65544 && C(H, 1)) : (H = xb(D), H.c(), C(H, 1), H.m(e, null)) : H && (me(), E(H, 1, 1, () => {
        H = null;
      }), pe()), (!M || P[0] & 2097152 && v !== (v = "svelte-select " + D[21] + " svelte-18e845")) && p(e, "class", v), (!M || P[0] & 16384) && p(e, "style", D[14]), (!M || P[0] & 2097664) && de(e, "multi", D[9]), (!M || P[0] & 2099200) && de(e, "disabled", D[11]), (!M || P[0] & 2097156) && de(e, "focused", D[2]), (!M || P[0] & 2097216) && de(e, "list-open", D[6]), (!M || P[0] & 3145728) && de(e, "show-chevron", D[20]), (!M || P[0] & 2129920) && de(e, "error", D[15]);
    },
    i(D) {
      M || (C(k), C(V, D), C(N), C(O), C(x), C(A), C(H), M = !0);
    },
    o(D) {
      E(k), E(V, D), E(N), E(O), E(x), E(A), E(H), M = !1;
    },
    d(D) {
      D && j(e), k && k.d(), I && I.d(), V && V.d(D), N && N.d(), t[94](null), O && O.d(), x && x.d(), A && A.d(), H && H.d(), t[96](null), S = !1, et(R);
    }
  };
}
function zb(t) {
  return t.map((e, n) => ({ index: n, value: e, label: `${e}` }));
}
function OD(t) {
  return t === 0;
}
function TD(t) {
  return t.groupHeader && t.selectable || t.selectable || !t.hasOwnProperty("selectable");
}
function ED(t, e, n) {
  let i, r, o, s, l, a, f, c, u, { $$slots: h = {}, $$scope: d } = e;
  const m = _6(h), g = Ls();
  let { justValue: _ = null } = e, { filter: b = GN } = e, { getItems: w = XN } = e, { id: v = null } = e, { name: M = null } = e, { container: S = void 0 } = e, { input: R = void 0 } = e, { multiple: k = !1 } = e, { multiFullItemClearable: I = !1 } = e, { disabled: L = !1 } = e, { focused: V = !1 } = e, { value: N = null } = e, { filterText: W = "" } = e, { placeholder: U = "Please select" } = e, { placeholderAlwaysShow: O = !1 } = e, { items: x = null } = e, { label: A = "label" } = e, { itemFilter: H = (Y, Pe) => `${Y}`.toLowerCase().includes(Pe.toLowerCase()) } = e, { groupBy: D = void 0 } = e, { groupFilter: P = (Y) => Y } = e, { groupHeaderSelectable: K = !1 } = e, { itemId: ne = "value" } = e, { loadOptions: z = void 0 } = e, { containerStyles: Z = "" } = e, { hasError: te = !1 } = e, { filterSelectedItems: G = !0 } = e, { required: Ae = !1 } = e, { createGroupHeaderItem: ke = (Y, Pe) => ({ value: Y, [A]: Y }) } = e;
  const ze = () => f;
  let { searchable: ee = !0 } = e, { inputStyles: we = "" } = e, { clearable: tt = !0 } = e, { loading: ge = !1 } = e, { listOpen: ie = !1 } = e, ve, { debounce: Xe = (Y, Pe = 1) => {
    clearTimeout(ve), ve = setTimeout(Y, Pe);
  } } = e, { debounceWait: he = 300 } = e, { hideEmptyState: Ve = !1 } = e, { inputAttributes: Ie = {} } = e, { listAutoWidth: qe = !0 } = e, { showChevron: ct = !1 } = e, { listOffset: yt = 5 } = e, { hoverItemIndex: Fe = 0 } = e, { floatingConfig: Oe = {} } = e, { class: ae = "" } = e, xe, ht, ft, _n;
  function Yn() {
    if (typeof N == "string") {
      let Y = x.find((Pe) => Pe[ne] === N);
      n(3, N = Y || { [ne]: N, label: N });
    } else
      k && Array.isArray(N) && N.length > 0 && n(3, N = N.map((Y) => typeof Y == "string" ? { value: Y, label: Y } : Y));
  }
  let nt;
  function sn() {
    n(27, nt = Object.assign(
      {
        autocapitalize: "none",
        autocomplete: "off",
        autocorrect: "off",
        spellcheck: !1,
        tabindex: 0,
        type: "text",
        "aria-autocomplete": "list"
      },
      Ie
    )), v && n(27, nt.id = v, nt), ee || n(27, nt.readonly = !0, nt);
  }
  function Dt(Y) {
    const Pe = [], fn = {};
    Y.forEach((ko) => {
      const nr = D(ko);
      Pe.includes(nr) || (Pe.push(nr), fn[nr] = [], nr && fn[nr].push(Object.assign(ke(nr, ko), {
        id: nr,
        groupHeader: !0,
        selectable: K
      }))), fn[nr].push(Object.assign({ groupItem: !!nr }, ko));
    });
    const tr = [];
    return P(Pe).forEach((ko) => {
      fn[ko] && tr.push(...fn[ko]);
    }), tr;
  }
  function yi() {
    if (k) {
      JSON.stringify(N) !== JSON.stringify(ht) && yn() && g("input", N);
      return;
    }
    (!ht || JSON.stringify(N[ne]) !== JSON.stringify(ht[ne])) && g("input", N);
  }
  function Zn() {
    N && (Array.isArray(N) ? n(3, N = [...N]) : n(3, N = [N]));
  }
  function Vt() {
    N && n(3, N = null);
  }
  function Q() {
    const Y = f.findIndex((Pe) => Pe[ne] === N[ne]);
    at(Y, !0);
  }
  function ye(Y) {
    g("hoverItem", Y);
  }
  function at(Y = 0, Pe) {
    n(7, Fe = Y), !Pe && D && f[Fe] && !f[Fe].selectable && $t(1);
  }
  function pt() {
    !z && W.length === 0 || (z ? Xe(
      async function() {
        n(5, ge = !0);
        let Y = await w({
          dispatch: g,
          loadOptions: z,
          convertStringItemsToObjects: zb,
          filterText: W
        });
        Y ? (n(5, ge = Y.loading), n(6, ie = ie ? Y.listOpen : W.length > 0), n(2, V = ie && Y.focused), n(51, x = D ? Dt(Y.filteredItems) : Y.filteredItems)) : (n(5, ge = !1), n(2, V = !0), n(6, ie = !0));
      },
      he
    ) : (n(6, ie = !0), k && n(26, xe = void 0)));
  }
  function Wt(Y) {
    ie && g("filter", Y);
  }
  T6(async () => {
    n(76, ht = N), n(77, ft = W), n(78, _n = k);
  });
  function Ot() {
    return k ? N ? N.map((Y) => Y[ne]) : null : N && N[ne];
  }
  function yn() {
    let Y = !0;
    if (N) {
      const Pe = [], fn = [];
      N.forEach((tr) => {
        Pe.includes(tr[ne]) ? Y = !1 : (Pe.push(tr[ne]), fn.push(tr));
      }), Y || n(3, N = fn);
    }
    return Y;
  }
  function Pn(Y) {
    let Pe = Y ? Y[ne] : N[ne];
    return x.find((fn) => fn[ne] === Pe);
  }
  function Cn(Y) {
    !Y || Y.length === 0 || Y.some((Pe) => typeof Pe != "object") || !N || (k ? N.some((Pe) => !Pe || !Pe[ne]) : !N[ne]) || (Array.isArray(N) ? n(3, N = N.map((Pe) => Pn(Pe) || Pe)) : n(3, N = Pn() || N));
  }
  async function ln(Y) {
    const Pe = N[Y];
    N.length === 1 ? n(3, N = void 0) : n(3, N = N.filter((fn) => fn !== Pe)), g("clear", Pe);
  }
  function Rn(Y) {
    if (V)
      switch (Y.stopPropagation(), Y.key) {
        case "Escape":
          Y.preventDefault(), Nt();
          break;
        case "Enter":
          if (Y.preventDefault(), ie) {
            if (f.length === 0)
              break;
            const Pe = f[Fe];
            if (N && !k && N[ne] === Pe[ne]) {
              Nt();
              break;
            } else
              er(f[Fe]);
          }
          break;
        case "ArrowDown":
          Y.preventDefault(), ie ? $t(1) : (n(6, ie = !0), n(26, xe = void 0));
          break;
        case "ArrowUp":
          Y.preventDefault(), ie ? $t(-1) : (n(6, ie = !0), n(26, xe = void 0));
          break;
        case "Tab":
          if (ie && V) {
            if (f.length === 0 || N && N[ne] === f[Fe][ne])
              return Nt();
            Y.preventDefault(), er(f[Fe]), Nt();
          }
          break;
        case "Backspace":
          if (!k || W.length > 0)
            return;
          if (k && N && N.length > 0) {
            if (ln(xe !== void 0 ? xe : N.length - 1), xe === 0 || xe === void 0)
              break;
            n(26, xe = N.length > xe ? xe - 1 : void 0);
          }
          break;
        case "ArrowLeft":
          if (!N || !k || W.length > 0)
            return;
          xe === void 0 ? n(26, xe = N.length - 1) : N.length > xe && xe !== 0 && n(26, xe -= 1);
          break;
        case "ArrowRight":
          if (!N || !k || W.length > 0 || xe === void 0)
            return;
          xe === N.length - 1 ? n(26, xe = void 0) : xe < N.length - 1 && n(26, xe += 1);
          break;
      }
  }
  function Ei(Y) {
    Y && g("focus", Y), R.focus(), n(2, V = !0);
  }
  async function wi(Y) {
    an || (ie || V) && (g("blur", Y), Nt(), n(2, V = !1), n(26, xe = void 0), R.blur());
  }
  function si() {
    L || (n(6, ie = !ie), ie && !V && Ei());
  }
  function Ln() {
    n(3, N = void 0), Nt(), g("clear", N), Ei();
  }
  zi(() => {
    ie && n(2, V = !0), V && R && R.focus();
  });
  function Pi(Y) {
    if (Y) {
      n(4, W = "");
      const Pe = Object.assign({}, Y);
      (!Pe.groupHeader || Pe.selectable) && (k ? n(3, N = N ? N.concat([Pe]) : [Pe]) : n(3, N = Pe), n(3, N), setTimeout(() => {
        Nt(), n(26, xe = void 0), g("change", N);
      }));
    }
  }
  function Nt() {
    n(4, W = ""), n(6, ie = !1);
  }
  let { ariaValues: ce = (Y) => `Option ${Y}, selected.` } = e, { ariaListOpen: st = (Y, Pe) => `You are currently focused on option ${Y}. There are ${Pe} results available.` } = e, { ariaFocused: bt = () => "Select is focused, type to refine list, press down to open the menu." } = e;
  function Ft(Y) {
    let Pe;
    return Y && N.length > 0 ? Pe = N.map((fn) => fn[A]).join(", ") : Pe = N[A], ce(Pe);
  }
  function wt() {
    if (!f || f.length === 0)
      return "";
    let Y = f[Fe];
    if (ie && Y) {
      let Pe = f ? f.length : 0;
      return st(Y[A], Pe);
    } else
      return bt();
  }
  let it = null, Rt;
  function Zt() {
    clearTimeout(Rt), Rt = setTimeout(
      () => {
        an = !1;
      },
      100
    );
  }
  function hn(Y) {
    S && !S.contains(Y.target) && !(it != null && it.contains(Y.target)) && wi();
  }
  qr(() => {
    it == null || it.remove();
  });
  let an = !1;
  function er(Y) {
    Y.isCreator || Y.selectable === !1 || Pi(Y);
  }
  function vi(Y) {
    an || n(7, Fe = Y);
  }
  function Jn(Y) {
    const { item: Pe, i: fn } = Y;
    if ((Pe == null ? void 0 : Pe.selectable) !== !1) {
      if (N && !k && N[ne] === Pe[ne])
        return Nt();
      TD(Pe) && (n(7, Fe = fn), er(Pe));
    }
  }
  function $t(Y) {
    if (f.filter((tr) => !Object.hasOwn(tr, "selectable") || tr.selectable === !0).length === 0)
      return n(7, Fe = 0);
    Y > 0 && Fe === f.length - 1 ? n(7, Fe = 0) : Y < 0 && Fe === 0 ? n(7, Fe = f.length - 1) : n(7, Fe = Fe + Y);
    const fn = f[Fe];
    if (fn && fn.selectable === !1) {
      (Y === 1 || Y === -1) && $t(Y);
      return;
    }
  }
  function xn(Y, Pe, fn) {
    if (!k)
      return Pe && Pe[fn] === Y[fn];
  }
  const In = Cr, Fi = Cr;
  function Cr(Y) {
    return {
      update(Pe) {
        Pe.scroll && (Zt(), Y.scrollIntoView({
          behavior: "auto",
          block: "nearest",
          inline: "start"
        }));
      }
    };
  }
  function Ce() {
    const { width: Y } = S.getBoundingClientRect();
    n(23, it.style.width = qe ? Y + "px" : "auto", it);
  }
  let Ue = {
    strategy: "absolute",
    placement: "bottom-start",
    middleware: [RN(yt), EN(), NN()],
    autoUpdate: !1
  };
  const [Ut, wo, vo] = KN(Ue);
  let Ri = !0;
  function zn(Y, Pe) {
    if (!Y || !Pe)
      return n(28, Ri = !0);
    setTimeout(
      () => {
        n(28, Ri = !1);
      },
      0
    );
  }
  function ls(Y) {
    jt.call(this, t, Y);
  }
  function J(Y) {
    jt.call(this, t, Y);
  }
  function be(Y) {
    jt.call(this, t, Y);
  }
  function We(Y) {
    jt.call(this, t, Y);
  }
  function Je(Y) {
    jt.call(this, t, Y);
  }
  function lt(Y) {
    jt.call(this, t, Y);
  }
  function Kt(Y) {
    jt.call(this, t, Y);
  }
  const wn = (Y) => vi(Y), Vn = (Y) => vi(Y), qt = (Y, Pe) => Jn({ item: Y, i: Pe });
  function $n(Y) {
    mt[Y ? "unshift" : "push"](() => {
      it = Y, n(23, it);
    });
  }
  const ki = (Y) => ln(Y), Ws = (Y) => I ? ln(Y) : {};
  function Us(Y) {
    mt[Y ? "unshift" : "push"](() => {
      R = Y, n(1, R);
    });
  }
  function Kh() {
    W = this.value, n(4, W);
  }
  function Gh(Y) {
    mt[Y ? "unshift" : "push"](() => {
      S = Y, n(0, S);
    });
  }
  return t.$$set = (Y) => {
    "justValue" in Y && n(52, _ = Y.justValue), "filter" in Y && n(53, b = Y.filter), "getItems" in Y && n(54, w = Y.getItems), "id" in Y && n(55, v = Y.id), "name" in Y && n(8, M = Y.name), "container" in Y && n(0, S = Y.container), "input" in Y && n(1, R = Y.input), "multiple" in Y && n(9, k = Y.multiple), "multiFullItemClearable" in Y && n(10, I = Y.multiFullItemClearable), "disabled" in Y && n(11, L = Y.disabled), "focused" in Y && n(2, V = Y.focused), "value" in Y && n(3, N = Y.value), "filterText" in Y && n(4, W = Y.filterText), "placeholder" in Y && n(56, U = Y.placeholder), "placeholderAlwaysShow" in Y && n(57, O = Y.placeholderAlwaysShow), "items" in Y && n(51, x = Y.items), "label" in Y && n(12, A = Y.label), "itemFilter" in Y && n(58, H = Y.itemFilter), "groupBy" in Y && n(59, D = Y.groupBy), "groupFilter" in Y && n(60, P = Y.groupFilter), "groupHeaderSelectable" in Y && n(61, K = Y.groupHeaderSelectable), "itemId" in Y && n(13, ne = Y.itemId), "loadOptions" in Y && n(62, z = Y.loadOptions), "containerStyles" in Y && n(14, Z = Y.containerStyles), "hasError" in Y && n(15, te = Y.hasError), "filterSelectedItems" in Y && n(63, G = Y.filterSelectedItems), "required" in Y && n(16, Ae = Y.required), "createGroupHeaderItem" in Y && n(64, ke = Y.createGroupHeaderItem), "searchable" in Y && n(17, ee = Y.searchable), "inputStyles" in Y && n(18, we = Y.inputStyles), "clearable" in Y && n(66, tt = Y.clearable), "loading" in Y && n(5, ge = Y.loading), "listOpen" in Y && n(6, ie = Y.listOpen), "debounce" in Y && n(67, Xe = Y.debounce), "debounceWait" in Y && n(68, he = Y.debounceWait), "hideEmptyState" in Y && n(19, Ve = Y.hideEmptyState), "inputAttributes" in Y && n(69, Ie = Y.inputAttributes), "listAutoWidth" in Y && n(70, qe = Y.listAutoWidth), "showChevron" in Y && n(20, ct = Y.showChevron), "listOffset" in Y && n(71, yt = Y.listOffset), "hoverItemIndex" in Y && n(7, Fe = Y.hoverItemIndex), "floatingConfig" in Y && n(72, Oe = Y.floatingConfig), "class" in Y && n(21, ae = Y.class), "ariaValues" in Y && n(73, ce = Y.ariaValues), "ariaListOpen" in Y && n(74, st = Y.ariaListOpen), "ariaFocused" in Y && n(75, bt = Y.ariaFocused), "$$scope" in Y && n(79, d = Y.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 | t.$$.dirty[1] & 1048576 && N && Yn(), t.$$.dirty[0] & 131072 | t.$$.dirty[2] & 128 && (Ie || !ee) && sn(), t.$$.dirty[0] & 512 && k && Zn(), t.$$.dirty[0] & 512 | t.$$.dirty[2] & 65536 && _n && !k && Vt(), t.$$.dirty[0] & 520 && k && N && N.length > 1 && yn(), t.$$.dirty[0] & 8 && N && yi(), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !N && k && ht && g("input", N), t.$$.dirty[0] & 6 && !V && R && Nt(), t.$$.dirty[0] & 16 | t.$$.dirty[2] & 32768 && W !== ft && pt(), t.$$.dirty[0] & 12824 | t.$$.dirty[1] & 407896064 | t.$$.dirty[2] & 3 && n(24, f = b({
      loadOptions: z,
      filterText: W,
      items: x,
      multiple: k,
      value: N,
      itemId: ne,
      groupBy: D,
      label: A,
      filterSelectedItems: G,
      itemFilter: H,
      convertStringItemsToObjects: zb,
      filterGroupedItems: Dt
    })), t.$$.dirty[0] & 16777800 && !k && ie && N && f && Q(), t.$$.dirty[0] & 576 && ie && k && n(7, Fe = 0), t.$$.dirty[0] & 128 && ye(Fe), t.$$.dirty[0] & 520 && n(25, i = k ? N && N.length > 0 : N), t.$$.dirty[0] & 33554448 && n(35, r = i && W.length > 0), t.$$.dirty[0] & 33556512 | t.$$.dirty[2] & 16 && n(34, o = i && tt && !L && !ge), t.$$.dirty[0] & 520 | t.$$.dirty[1] & 100663296 && n(33, s = O && k ? U : N ? "" : U), t.$$.dirty[0] & 520 && n(32, l = N ? Ft(k) : ""), t.$$.dirty[0] & 16777412 && n(31, a = wt()), t.$$.dirty[1] & 1048576 && Cn(x), t.$$.dirty[0] & 8712 && n(52, _ = Ot()), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !k && ht && !N && g("input", N), t.$$.dirty[0] & 16777800 && ie && f && !k && !N && at(), t.$$.dirty[0] & 16777216 && Wt(f), t.$$.dirty[2] & 1024 && Oe && vo(Object.assign(Ue, Oe)), t.$$.dirty[0] & 8388608 && n(30, c = !!it), t.$$.dirty[0] & 8388672 && zn(it, ie), t.$$.dirty[0] & 8388673 && ie && S && it && Ce(), t.$$.dirty[0] & 128 && n(29, u = Fe);
  }, [
    S,
    R,
    V,
    N,
    W,
    ge,
    ie,
    Fe,
    M,
    k,
    I,
    L,
    A,
    ne,
    Z,
    te,
    Ae,
    ee,
    we,
    Ve,
    ct,
    ae,
    Ln,
    it,
    f,
    i,
    xe,
    nt,
    Ri,
    u,
    c,
    a,
    l,
    s,
    o,
    r,
    ln,
    Rn,
    Ei,
    wi,
    si,
    Zt,
    hn,
    vi,
    Jn,
    xn,
    In,
    Fi,
    Ut,
    wo,
    m,
    x,
    _,
    b,
    w,
    v,
    U,
    O,
    H,
    D,
    P,
    K,
    z,
    G,
    ke,
    ze,
    tt,
    Xe,
    he,
    Ie,
    qe,
    yt,
    Oe,
    ce,
    st,
    bt,
    ht,
    ft,
    _n,
    d,
    h,
    ls,
    J,
    be,
    We,
    Je,
    lt,
    Kt,
    wn,
    Vn,
    qt,
    $n,
    ki,
    Ws,
    Us,
    Kh,
    Gh
  ];
}
class ms extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      ED,
      AD,
      It,
      {
        justValue: 52,
        filter: 53,
        getItems: 54,
        id: 55,
        name: 8,
        container: 0,
        input: 1,
        multiple: 9,
        multiFullItemClearable: 10,
        disabled: 11,
        focused: 2,
        value: 3,
        filterText: 4,
        placeholder: 56,
        placeholderAlwaysShow: 57,
        items: 51,
        label: 12,
        itemFilter: 58,
        groupBy: 59,
        groupFilter: 60,
        groupHeaderSelectable: 61,
        itemId: 13,
        loadOptions: 62,
        containerStyles: 14,
        hasError: 15,
        filterSelectedItems: 63,
        required: 16,
        createGroupHeaderItem: 64,
        getFilteredItems: 65,
        searchable: 17,
        inputStyles: 18,
        clearable: 66,
        loading: 5,
        listOpen: 6,
        debounce: 67,
        debounceWait: 68,
        hideEmptyState: 19,
        inputAttributes: 69,
        listAutoWidth: 70,
        showChevron: 20,
        listOffset: 71,
        hoverItemIndex: 7,
        floatingConfig: 72,
        class: 21,
        handleClear: 22,
        ariaValues: 73,
        ariaListOpen: 74,
        ariaFocused: 75
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get getFilteredItems() {
    return this.$$.ctx[65];
  }
  get handleClear() {
    return this.$$.ctx[22];
  }
}
function PD(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O, x, A, H, D, P;
  function K(we) {
    t[16](we);
  }
  let ne = {
    class: "jse-filter-path",
    showChevron: !0,
    items: t[6]
  };
  t[0] !== void 0 && (ne.value = t[0]), l = new ms({ props: ne }), mt.push(() => lr(l, "value", K, t[0]));
  function z(we) {
    t[17](we);
  }
  let Z = {
    class: "jse-filter-relation",
    showChevron: !0,
    items: t[8]
  };
  t[1] !== void 0 && (Z.value = t[1]), c = new ms({ props: Z }), mt.push(() => lr(c, "value", z, t[1]));
  function te(we) {
    t[19](we);
  }
  let G = {
    class: "jse-sort-path",
    showChevron: !0,
    items: t[6]
  };
  t[3] !== void 0 && (G.value = t[3]), M = new ms({ props: G }), mt.push(() => lr(M, "value", te, t[3]));
  function Ae(we) {
    t[20](we);
  }
  let ke = {
    class: "jse-sort-direction",
    showChevron: !0,
    items: t[9]
  };
  t[4] !== void 0 && (ke.value = t[4]), k = new ms({ props: ke }), mt.push(() => lr(k, "value", Ae, t[4]));
  function ze(we) {
    t[21](we);
  }
  let ee = {
    class: "jse-projection-paths",
    multiple: !0,
    showChevron: !0,
    items: t[7]
  };
  return t[5] !== void 0 && (ee.value = t[5]), x = new ms({ props: ee }), mt.push(() => lr(x, "value", ze, t[5])), {
    c() {
      e = T("table"), n = T("tr"), i = T("th"), i.textContent = "Filter", r = q(), o = T("td"), s = T("div"), se(l.$$.fragment), f = q(), se(c.$$.fragment), h = q(), d = T("input"), m = q(), g = T("tr"), _ = T("th"), _.textContent = "Sort", b = q(), w = T("td"), v = T("div"), se(M.$$.fragment), R = q(), se(k.$$.fragment), L = q(), V = T("tr"), N = T("th"), N.textContent = "Pick", W = q(), U = T("td"), O = T("div"), se(x.$$.fragment), p(i, "class", "svelte-1vxsn9f"), p(d, "class", "jse-filter-value svelte-1vxsn9f"), p(s, "class", "jse-horizontal svelte-1vxsn9f"), p(_, "class", "svelte-1vxsn9f"), p(v, "class", "jse-horizontal svelte-1vxsn9f"), p(N, "class", "svelte-1vxsn9f"), p(O, "class", "jse-horizontal svelte-1vxsn9f"), p(e, "class", "jse-transform-wizard svelte-1vxsn9f");
    },
    m(we, tt) {
      B(we, e, tt), y(e, n), y(n, i), y(n, r), y(n, o), y(o, s), re(l, s, null), y(s, f), re(c, s, null), y(s, h), y(s, d), Vo(d, t[2]), y(e, m), y(e, g), y(g, _), y(g, b), y(g, w), y(w, v), re(M, v, null), y(v, R), re(k, v, null), y(e, L), y(e, V), y(V, N), y(V, W), y(V, U), y(U, O), re(x, O, null), H = !0, D || (P = X(d, "input", t[18]), D = !0);
    },
    p(we, [tt]) {
      const ge = {};
      tt & 64 && (ge.items = we[6]), !a && tt & 1 && (a = !0, ge.value = we[0], sr(() => a = !1)), l.$set(ge);
      const ie = {};
      !u && tt & 2 && (u = !0, ie.value = we[1], sr(() => u = !1)), c.$set(ie), tt & 4 && d.value !== we[2] && Vo(d, we[2]);
      const ve = {};
      tt & 64 && (ve.items = we[6]), !S && tt & 8 && (S = !0, ve.value = we[3], sr(() => S = !1)), M.$set(ve);
      const Xe = {};
      !I && tt & 16 && (I = !0, Xe.value = we[4], sr(() => I = !1)), k.$set(Xe);
      const he = {};
      tt & 128 && (he.items = we[7]), !A && tt & 32 && (A = !0, he.value = we[5], sr(() => A = !1)), x.$set(he);
    },
    i(we) {
      H || (C(l.$$.fragment, we), C(c.$$.fragment, we), C(M.$$.fragment, we), C(k.$$.fragment, we), C(x.$$.fragment, we), H = !0);
    },
    o(we) {
      E(l.$$.fragment, we), E(c.$$.fragment, we), E(M.$$.fragment, we), E(k.$$.fragment, we), E(x.$$.fragment, we), H = !1;
    },
    d(we) {
      we && j(e), oe(l), oe(c), oe(M), oe(k), oe(x), D = !1, P();
    }
  };
}
function RD(t, e, n) {
  var A, H, D, P, K, ne;
  let i, r, o, s, l;
  const a = Qn("jsoneditor:TransformWizard");
  let { json: f } = e, { queryOptions: c = {} } = e, { onChange: u } = e;
  const h = ["==", "!=", "<", "<=", ">", ">="].map((z) => ({ value: z, label: z })), d = [{ value: "asc", label: "ascending" }, { value: "desc", label: "descending" }];
  let m = (A = c == null ? void 0 : c.filter) != null && A.path ? Gs(c.filter.path) : null, g = (H = c == null ? void 0 : c.filter) != null && H.relation ? h.find((z) => z.value === c.filter.relation) : null, _ = ((D = c == null ? void 0 : c.filter) == null ? void 0 : D.value) || "", b = (P = c == null ? void 0 : c.sort) != null && P.path ? Gs(c.sort.path) : null, w = (K = c == null ? void 0 : c.sort) != null && K.direction ? d.find((z) => z.value === c.sort.direction) : null, v = (ne = c == null ? void 0 : c.projection) != null && ne.paths ? c.projection.paths.map(Gs) : null;
  function M(z) {
    var Z;
    St((Z = c == null ? void 0 : c.filter) == null ? void 0 : Z.path, z) || (a("changeFilterPath", z), n(10, c = or(c, ["filter", "path"], z, !0)), u(c));
  }
  function S(z) {
    var Z;
    St((Z = c == null ? void 0 : c.filter) == null ? void 0 : Z.relation, z) || (a("changeFilterRelation", z), n(10, c = or(c, ["filter", "relation"], z, !0)), u(c));
  }
  function R(z) {
    var Z;
    St((Z = c == null ? void 0 : c.filter) == null ? void 0 : Z.value, z) || (a("changeFilterValue", z), n(10, c = or(c, ["filter", "value"], z, !0)), u(c));
  }
  function k(z) {
    var Z;
    St((Z = c == null ? void 0 : c.sort) == null ? void 0 : Z.path, z) || (a("changeSortPath", z), n(10, c = or(c, ["sort", "path"], z, !0)), u(c));
  }
  function I(z) {
    var Z;
    St((Z = c == null ? void 0 : c.sort) == null ? void 0 : Z.direction, z) || (a("changeSortDirection", z), n(10, c = or(c, ["sort", "direction"], z, !0)), u(c));
  }
  function L(z) {
    var Z;
    St((Z = c == null ? void 0 : c.projection) == null ? void 0 : Z.paths, z) || (a("changeProjectionPaths", z), n(10, c = or(c, ["projection", "paths"], z, !0)), u(c));
  }
  function V(z) {
    m = z, n(0, m);
  }
  function N(z) {
    g = z, n(1, g);
  }
  function W() {
    _ = this.value, n(2, _);
  }
  function U(z) {
    b = z, n(3, b);
  }
  function O(z) {
    w = z, n(4, w);
  }
  function x(z) {
    v = z, n(5, v);
  }
  return t.$$set = (z) => {
    "json" in z && n(11, f = z.json), "queryOptions" in z && n(10, c = z.queryOptions), "onChange" in z && n(12, u = z.onChange);
  }, t.$$.update = () => {
    var z;
    t.$$.dirty & 2048 && n(15, i = Array.isArray(f)), t.$$.dirty & 34816 && n(14, r = i ? _m(f) : []), t.$$.dirty & 34816 && n(13, o = i ? _m(f, !0) : []), t.$$.dirty & 16384 && n(6, s = r.map(Gs)), t.$$.dirty & 8192 && n(7, l = o ? o.map(Gs) : []), t.$$.dirty & 1088 && (z = c == null ? void 0 : c.filter) != null && z.path && s.find((Z) => {
      var te;
      return St(Z.value, (te = c == null ? void 0 : c.filter) == null ? void 0 : te.path);
    }), t.$$.dirty & 1 && M((m == null ? void 0 : m.value) || null), t.$$.dirty & 2 && S((g == null ? void 0 : g.value) || null), t.$$.dirty & 4 && R(_ || null), t.$$.dirty & 8 && k((b == null ? void 0 : b.value) || null), t.$$.dirty & 16 && I((w == null ? void 0 : w.value) || null), t.$$.dirty & 32 && L(v ? v.map((Z) => Z.value) : null);
  }, [
    m,
    g,
    _,
    b,
    w,
    v,
    s,
    l,
    h,
    d,
    c,
    f,
    u,
    o,
    r,
    i,
    V,
    N,
    W,
    U,
    O,
    x
  ];
}
class ID extends Be {
  constructor(e) {
    super(), je(this, e, RD, PD, gt, { json: 11, queryOptions: 10, onChange: 12 });
  }
}
const ND = ID;
function Vb(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function DD(t) {
  let e, n;
  return e = new Ct({ props: { data: Da } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function jD(t) {
  let e, n;
  return e = new Ct({ props: { data: Na } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Fb(t) {
  let e, n, i, r, o = t[5].name + "", s, l, a, f, c, u;
  const h = [jD, DD], d = [];
  function m(_, b) {
    return _[5].id === _[0] ? 0 : 1;
  }
  n = m(t), i = d[n] = h[n](t);
  function g() {
    return t[4](t[5]);
  }
  return {
    c() {
      e = T("button"), i.c(), r = q(), s = le(o), l = q(), p(e, "type", "button"), p(e, "class", "jse-query-language svelte-19cxesy"), p(e, "title", a = `Select ${t[5].name} as query language`), de(e, "selected", t[5].id === t[0]);
    },
    m(_, b) {
      B(_, e, b), d[n].m(e, null), y(e, r), y(e, s), y(e, l), f = !0, c || (u = X(e, "click", g), c = !0);
    },
    p(_, b) {
      t = _;
      let w = n;
      n = m(t), n === w ? d[n].p(t, b) : (me(), E(d[w], 1, 1, () => {
        d[w] = null;
      }), pe(), i = d[n], i ? i.p(t, b) : (i = d[n] = h[n](t), i.c()), C(i, 1), i.m(e, r)), (!f || b & 2) && o !== (o = t[5].name + "") && Te(s, o), (!f || b & 2 && a !== (a = `Select ${t[5].name} as query language`)) && p(e, "title", a), (!f || b & 3) && de(e, "selected", t[5].id === t[0]);
    },
    i(_) {
      f || (C(i), f = !0);
    },
    o(_) {
      E(i), f = !1;
    },
    d(_) {
      _ && j(e), d[n].d(), c = !1, u();
    }
  };
}
function BD(t) {
  let e, n, i, r = t[1], o = [];
  for (let l = 0; l < r.length; l += 1)
    o[l] = Fb(Vb(t, r, l));
  const s = (l) => E(o[l], 1, 1, () => {
    o[l] = null;
  });
  return {
    c() {
      e = T("div"), n = T("div");
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      p(n, "class", "jse-select-query-language-container svelte-19cxesy"), p(e, "class", "jse-select-query-language svelte-19cxesy");
    },
    m(l, a) {
      B(l, e, a), y(e, n);
      for (let f = 0; f < o.length; f += 1)
        o[f].m(n, null);
      i = !0;
    },
    p(l, [a]) {
      if (a & 7) {
        r = l[1];
        let f;
        for (f = 0; f < r.length; f += 1) {
          const c = Vb(l, r, f);
          o[f] ? (o[f].p(c, a), C(o[f], 1)) : (o[f] = Fb(c), o[f].c(), C(o[f], 1), o[f].m(n, null));
        }
        for (me(), f = r.length; f < o.length; f += 1)
          s(f);
        pe();
      }
    },
    i(l) {
      if (!i) {
        for (let a = 0; a < r.length; a += 1)
          C(o[a]);
        i = !0;
      }
    },
    o(l) {
      o = o.filter(Boolean);
      for (let a = 0; a < o.length; a += 1)
        E(o[a]);
      i = !1;
    },
    d(l) {
      l && j(e), zt(o, l);
    }
  };
}
function LD(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: o } = e;
  function s(a) {
    n(0, r = a), o(a);
  }
  const l = (a) => s(a.id);
  return t.$$set = (a) => {
    "queryLanguages" in a && n(1, i = a.queryLanguages), "queryLanguageId" in a && n(0, r = a.queryLanguageId), "onChangeQueryLanguage" in a && n(3, o = a.onChangeQueryLanguage);
  }, [
    r,
    i,
    s,
    o,
    l
  ];
}
class xD extends Be {
  constructor(e) {
    super(), je(this, e, LD, BD, It, {
      queryLanguages: 1,
      queryLanguageId: 0,
      onChangeQueryLanguage: 3
    });
  }
}
const zD = xD;
function Hb(t) {
  let e, n, i, r, o;
  return n = new Ct({ props: { data: uN } }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-config svelte-d01h2s"), p(e, "title", "Select a query language");
    },
    m(s, l) {
      B(s, e, l), re(n, e, null), t[6](e), i = !0, r || (o = X(e, "click", t[3]), r = !0);
    },
    p: fe,
    i(s) {
      i || (C(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), oe(n), t[6](null), r = !1, o();
    }
  };
}
function VD(t) {
  let e, n, i, r, o, s, l, a, f, c = t[0].length > 1 && Hb(t);
  return s = new Ct({ props: { data: Ul } }), {
    c() {
      e = T("div"), n = T("div"), n.textContent = "Transform", i = q(), c && c.c(), r = q(), o = T("button"), se(s.$$.fragment), p(n, "class", "jse-title svelte-d01h2s"), p(o, "type", "button"), p(o, "class", "jse-close svelte-d01h2s"), p(e, "class", "jse-header svelte-d01h2s");
    },
    m(u, h) {
      B(u, e, h), y(e, n), y(e, i), c && c.m(e, null), y(e, r), y(e, o), re(s, o, null), l = !0, a || (f = X(o, "click", t[2]), a = !0);
    },
    p(u, [h]) {
      u[0].length > 1 ? c ? (c.p(u, h), h & 1 && C(c, 1)) : (c = Hb(u), c.c(), C(c, 1), c.m(e, r)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), pe());
    },
    i(u) {
      l || (C(c), C(s.$$.fragment, u), l = !0);
    },
    o(u) {
      E(c), E(s.$$.fragment, u), l = !1;
    },
    d(u) {
      u && j(e), c && c.d(), oe(s), a = !1, f();
    }
  };
}
function FD(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: o } = e, s, l;
  const { close: a } = Xn("simple-modal"), { openAbsolutePopup: f, closeAbsolutePopup: c } = Xn("absolute-popup");
  function u() {
    l = f(zD, {
      queryLanguages: i,
      queryLanguageId: r,
      onChangeQueryLanguage: (m) => {
        c(l), o(m);
      }
    }, {
      position: "bottom",
      offsetTop: -2,
      offsetLeft: 0,
      anchor: s,
      closeOnOuterClick: !0
    });
  }
  function h(d) {
    mt[d ? "unshift" : "push"](() => {
      s = d, n(1, s);
    });
  }
  return t.$$set = (d) => {
    "queryLanguages" in d && n(0, i = d.queryLanguages), "queryLanguageId" in d && n(4, r = d.queryLanguageId), "onChangeQueryLanguage" in d && n(5, o = d.onChangeQueryLanguage);
  }, [
    i,
    s,
    a,
    u,
    r,
    o,
    h
  ];
}
class HD extends Be {
  constructor(e) {
    super(), je(this, e, FD, VD, gt, {
      queryLanguages: 0,
      queryLanguageId: 4,
      onChangeQueryLanguage: 5
    });
  }
}
const WD = HD, md = Qn("jsoneditor:AutoScrollHandler");
function UD(t) {
  md("createAutoScrollHandler", t);
  let e, n;
  function i(f) {
    return f < 20 ? S8 : f < 50 ? M8 : A8;
  }
  function r() {
    if (t) {
      const f = e * (L1 / 1e3);
      t.scrollTop += f;
    }
  }
  function o(f) {
    (!n || f !== e) && (s(), md("startAutoScroll", f), e = f, n = setInterval(r, L1));
  }
  function s() {
    n && (md("stopAutoScroll"), clearInterval(n), n = void 0, e = void 0);
  }
  function l(f) {
    if (t) {
      const c = f.clientY, { top: u, bottom: h } = t.getBoundingClientRect();
      if (c < u) {
        const d = i(u - c);
        o(-d);
      } else if (c > h) {
        const d = i(c - h);
        o(d);
      } else
        s();
    }
  }
  function a() {
    s();
  }
  return {
    onDrag: l,
    onDragEnd: a
  };
}
const qD = (t, e, n, i) => (t /= i / 2, t < 1 ? n / 2 * t * t + e : (t--, -n / 2 * (t * (t - 2) - 1) + e)), vC = () => {
  let t, e, n, i, r, o, s, l, a, f, c, u, h, d;
  function m() {
    return t.scrollY || t.pageYOffset || t.scrollTop;
  }
  function g(M) {
    const S = M.getBoundingClientRect().top, R = t.getBoundingClientRect ? t.getBoundingClientRect().top : 0;
    return S - R + n;
  }
  function _(M) {
    t.scrollTo ? t.scrollTo(t.scrollLeft, M) : t.scrollTop = M;
  }
  function b(M) {
    f || (f = M), c = M - f, u = o(c, n, l, a), _(u), d = !0, c < a ? requestAnimationFrame(b) : w();
  }
  function w() {
    _(n + l), e && s && (e.setAttribute("tabindex", "-1"), e.focus()), typeof h == "function" && h(), f = !1, d = !1;
  }
  function v(M, S = {}) {
    switch (a = S.duration || 1e3, r = S.offset || 0, h = S.callback, o = S.easing || qD, s = S.a11y || !1, typeof S.container) {
      case "object":
        t = S.container;
        break;
      case "string":
        t = document.querySelector(S.container);
        break;
      default:
        t = window;
    }
    switch (n = m(), typeof M) {
      case "number":
        e = void 0, s = !1, i = n + M;
        break;
      case "object":
        e = M, i = g(e);
        break;
      case "string":
        e = document.querySelector(M), i = g(e);
        break;
    }
    switch (l = i - n + r, typeof S.duration) {
      case "number":
        a = S.duration;
        break;
      case "function":
        a = S.duration(l);
        break;
    }
    d ? f = !1 : requestAnimationFrame(b);
  }
  return v;
}, JD = 1e3, Vf = Qn("jsoneditor:History");
function kC(t = {}) {
  const e = t.maxItems || JD;
  let n = [], i = 0;
  function r() {
    return i < n.length;
  }
  function o() {
    return i > 0;
  }
  function s() {
    return {
      canUndo: r(),
      canRedo: o(),
      length: n.length
    };
  }
  function l() {
    t.onChange && t.onChange(s());
  }
  function a(h) {
    Vf("add", h), n = [h].concat(n.slice(i)).slice(0, e), i = 0, l();
  }
  function f() {
    Vf("clear"), n = [], i = 0, l();
  }
  function c() {
    if (r()) {
      const h = n[i];
      return i += 1, Vf("undo", h), l(), h;
    }
  }
  function u() {
    if (o())
      return i -= 1, Vf("redo", n[i]), l(), n[i];
  }
  return {
    add: a,
    clear: f,
    getState: s,
    undo: c,
    redo: u
  };
}
function tl(t, e) {
  const n = Date.now(), i = t(), r = Date.now();
  return e(r - n), i;
}
const Qs = Qn("validation");
function KD(t) {
  const e = {};
  return t.forEach((n) => {
    e[Se(n.path)] = n;
  }), t.forEach((n) => {
    let i = n.path;
    for (; i.length > 0; ) {
      i = kt(i);
      const r = Se(i);
      r in e || (e[r] = {
        isChildError: !0,
        path: i,
        message: "Contains invalid data"
      });
    }
  }), e;
}
function CC(t, e, n, i) {
  if (Qs("validateJSON"), !e)
    return [];
  if (n !== i) {
    const r = i.parse(n.stringify(t));
    return e(r);
  } else
    return e(t);
}
function GD(t, e, n, i) {
  if (Qs("validateText"), t.length > O8)
    return {
      validationErrors: [{
        path: [],
        message: "Validation turned off: the document is too large",
        severity: Fo.info
      }]
    };
  if (t.length === 0)
    return {
      validationErrors: []
    };
  try {
    const r = tl(() => n.parse(t), (l) => Qs(`validate: parsed json in ${l} ms`));
    if (!e)
      return {
        validationErrors: []
      };
    const o = n === i ? r : tl(() => i.parse(t), (l) => Qs(`validate: parsed json with the validationParser in ${l} ms`));
    return { validationErrors: tl(() => e(o), (l) => Qs(`validate: validated json in ${l} ms`)) };
  } catch (r) {
    const o = tl(() => XD(t, n), (l) => Qs(`validate: checked whether repairable in ${l} ms`));
    return {
      parseError: dh(t, r.message || r.toString()),
      isRepairable: o
    };
  }
}
function XD(t, e) {
  if (t.length > T8)
    return !1;
  try {
    return e.parse(Lr(t)), !0;
  } catch {
    return !1;
  }
}
const Ff = Qn("jsoneditor:FocusTracker");
function sg({ onMount: t, onDestroy: e, getWindow: n, hasFocus: i, onFocus: r, onBlur: o }) {
  let s, l = !1;
  function a() {
    const c = i();
    c && (clearTimeout(s), l || (Ff("focus"), r(), l = c));
  }
  function f() {
    l && (clearTimeout(s), s = setTimeout(() => {
      Ff("blur"), l = !1, o();
    }));
  }
  t(() => {
    Ff("mount FocusTracker");
    const c = n();
    c && (c.addEventListener("focusin", a, !0), c.addEventListener("focusout", f, !0));
  }), e(() => {
    Ff("destroy FocusTracker");
    const c = n();
    c && (c.removeEventListener("focusin", a, !0), c.removeEventListener("focusout", f, !0));
  });
}
function Wb(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function Ub(t) {
  let e, n;
  return e = new Ct({ props: { data: t[1] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 2 && (o.data = i[1]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function qb(t) {
  let e, n;
  return e = new Ct({ props: { data: t[8].icon } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.data = i[8].icon), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Jb(t) {
  let e, n, i = t[8].text + "", r, o, s, l, a, f, c, u = t[8].icon && qb(t);
  function h() {
    return t[6](t[8]);
  }
  function d() {
    return t[7](t[8]);
  }
  return {
    c() {
      e = T("button"), u && u.c(), n = q(), r = le(i), o = q(), p(e, "type", "button"), p(e, "class", "jse-button jse-action jse-primary svelte-kvi5ls"), p(e, "title", s = t[8].title), e.disabled = l = t[8].disabled;
    },
    m(m, g) {
      B(m, e, g), u && u.m(e, null), y(e, n), y(e, r), y(e, o), a = !0, f || (c = [
        X(e, "click", h),
        X(e, "mousedown", d)
      ], f = !0);
    },
    p(m, g) {
      t = m, t[8].icon ? u ? (u.p(t, g), g & 8 && C(u, 1)) : (u = qb(t), u.c(), C(u, 1), u.m(e, n)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), (!a || g & 8) && i !== (i = t[8].text + "") && Te(r, i), (!a || g & 8 && s !== (s = t[8].title)) && p(e, "title", s), (!a || g & 8 && l !== (l = t[8].disabled)) && (e.disabled = l);
    },
    i(m) {
      a || (C(u), a = !0);
    },
    o(m) {
      E(u), a = !1;
    },
    d(m) {
      m && j(e), u && u.d(), f = !1, et(c);
    }
  };
}
function QD(t) {
  let e, n, i, r, o, s, l, a, f, c, u = t[1] && Ub(t), h = t[3], d = [];
  for (let g = 0; g < h.length; g += 1)
    d[g] = Jb(Wb(t, h, g));
  const m = (g) => E(d[g], 1, 1, () => {
    d[g] = null;
  });
  return {
    c() {
      e = T("div"), n = T("div"), u && u.c(), i = q(), r = le(t[2]), o = q(), s = T("div");
      for (let g = 0; g < d.length; g += 1)
        d[g].c();
      p(n, "class", "jse-text svelte-kvi5ls"), de(n, "jse-clickable", !!t[4]), p(s, "class", "jse-actions svelte-kvi5ls"), p(e, "class", l = "jse-message jse-" + t[0] + " svelte-kvi5ls");
    },
    m(g, _) {
      B(g, e, _), y(e, n), u && u.m(n, null), y(n, i), y(n, r), y(e, o), y(e, s);
      for (let b = 0; b < d.length; b += 1)
        d[b].m(s, null);
      a = !0, f || (c = X(n, "click", t[5]), f = !0);
    },
    p(g, [_]) {
      if (g[1] ? u ? (u.p(g, _), _ & 2 && C(u, 1)) : (u = Ub(g), u.c(), C(u, 1), u.m(n, i)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), (!a || _ & 4) && Te(r, g[2]), (!a || _ & 16) && de(n, "jse-clickable", !!g[4]), _ & 8) {
        h = g[3];
        let b;
        for (b = 0; b < h.length; b += 1) {
          const w = Wb(g, h, b);
          d[b] ? (d[b].p(w, _), C(d[b], 1)) : (d[b] = Jb(w), d[b].c(), C(d[b], 1), d[b].m(s, null));
        }
        for (me(), b = h.length; b < d.length; b += 1)
          m(b);
        pe();
      }
      (!a || _ & 1 && l !== (l = "jse-message jse-" + g[0] + " svelte-kvi5ls")) && p(e, "class", l);
    },
    i(g) {
      if (!a) {
        C(u);
        for (let _ = 0; _ < h.length; _ += 1)
          C(d[_]);
        a = !0;
      }
    },
    o(g) {
      E(u), d = d.filter(Boolean);
      for (let _ = 0; _ < d.length; _ += 1)
        E(d[_]);
      a = !1;
    },
    d(g) {
      g && j(e), u && u.d(), zt(d, g), f = !1, c();
    }
  };
}
function YD(t, e, n) {
  let { type: i = "success" } = e, { icon: r = void 0 } = e, { message: o = void 0 } = e, { actions: s = [] } = e, { onClick: l = void 0 } = e;
  function a() {
    l && l();
  }
  const f = (u) => {
    u.onClick && u.onClick();
  }, c = (u) => {
    u.onMouseDown && u.onMouseDown();
  };
  return t.$$set = (u) => {
    "type" in u && n(0, i = u.type), "icon" in u && n(1, r = u.icon), "message" in u && n(2, o = u.message), "actions" in u && n(3, s = u.actions), "onClick" in u && n(4, l = u.onClick);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c
  ];
}
class ZD extends Be {
  constructor(e) {
    super(), je(this, e, YD, QD, gt, {
      type: 0,
      icon: 1,
      message: 2,
      actions: 3,
      onClick: 4
    });
  }
}
const Zr = ZD;
function Kb(t, e, n) {
  const i = t.slice();
  return i[7] = e[n], i[9] = n, i;
}
function Gb(t) {
  let e, n, i, r;
  const o = [ej, $D], s = [];
  function l(a, f) {
    return a[2] || a[3] === 1 ? 0 : 1;
  }
  return n = l(t), i = s[n] = o[n](t), {
    c() {
      e = T("div"), i.c(), p(e, "class", "jse-validation-errors-overview svelte-1oe8e8r");
    },
    m(a, f) {
      B(a, e, f), s[n].m(e, null), r = !0;
    },
    p(a, f) {
      let c = n;
      n = l(a), n === c ? s[n].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), pe(), i = s[n], i ? i.p(a, f) : (i = s[n] = o[n](a), i.c()), C(i, 1), i.m(e, null));
    },
    i(a) {
      r || (C(i), r = !0);
    },
    o(a) {
      E(i), r = !1;
    },
    d(a) {
      a && j(e), s[n].d();
    }
  };
}
function $D(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m;
  return o = new Ct({ props: { data: Fs } }), u = new Ct({ props: { data: uC } }), {
    c() {
      e = T("table"), n = T("tbody"), i = T("tr"), r = T("td"), se(o.$$.fragment), s = q(), l = T("td"), a = le(t[3]), f = le(` validation errors
              `), c = T("div"), se(u.$$.fragment), p(r, "class", "jse-validation-error-icon svelte-1oe8e8r"), p(c, "class", "jse-validation-errors-expand svelte-1oe8e8r"), p(l, "class", "svelte-1oe8e8r"), p(i, "class", "jse-validation-error svelte-1oe8e8r"), p(e, "class", "svelte-1oe8e8r");
    },
    m(g, _) {
      B(g, e, _), y(e, n), y(n, i), y(i, r), re(o, r, null), y(i, s), y(i, l), y(l, a), y(l, f), y(l, c), re(u, c, null), h = !0, d || (m = X(i, "click", t[5]), d = !0);
    },
    p(g, _) {
      (!h || _ & 8) && Te(a, g[3]);
    },
    i(g) {
      h || (C(o.$$.fragment, g), C(u.$$.fragment, g), h = !0);
    },
    o(g) {
      E(o.$$.fragment, g), E(u.$$.fragment, g), h = !1;
    },
    d(g) {
      g && j(e), oe(o), oe(u), d = !1, m();
    }
  };
}
function ej(t) {
  let e, n, i, r, o = Qc(t[0], el), s = [];
  for (let f = 0; f < o.length; f += 1)
    s[f] = Qb(Kb(t, o, f));
  const l = (f) => E(s[f], 1, 1, () => {
    s[f] = null;
  });
  let a = t[3] > el && Yb(t);
  return {
    c() {
      e = T("table"), n = T("tbody");
      for (let f = 0; f < s.length; f += 1)
        s[f].c();
      i = q(), a && a.c(), p(e, "class", "svelte-1oe8e8r");
    },
    m(f, c) {
      B(f, e, c), y(e, n);
      for (let u = 0; u < s.length; u += 1)
        s[u].m(n, null);
      y(n, i), a && a.m(n, null), r = !0;
    },
    p(f, c) {
      if (c & 19) {
        o = Qc(f[0], el);
        let u;
        for (u = 0; u < o.length; u += 1) {
          const h = Kb(f, o, u);
          s[u] ? (s[u].p(h, c), C(s[u], 1)) : (s[u] = Qb(h), s[u].c(), C(s[u], 1), s[u].m(n, i));
        }
        for (me(), u = o.length; u < s.length; u += 1)
          l(u);
        pe();
      }
      f[3] > el ? a ? a.p(f, c) : (a = Yb(f), a.c(), a.m(n, null)) : a && (a.d(1), a = null);
    },
    i(f) {
      if (!r) {
        for (let c = 0; c < o.length; c += 1)
          C(s[c]);
        r = !0;
      }
    },
    o(f) {
      s = s.filter(Boolean);
      for (let c = 0; c < s.length; c += 1)
        E(s[c]);
      r = !1;
    },
    d(f) {
      f && j(e), zt(s, f), a && a.d();
    }
  };
}
function Xb(t) {
  let e, n, i, r, o;
  return n = new Ct({ props: { data: mN } }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-validation-errors-collapse svelte-1oe8e8r"), p(e, "title", "Collapse validation errors");
    },
    m(s, l) {
      B(s, e, l), re(n, e, null), i = !0, r || (o = X(e, "click", De(t[4])), r = !0);
    },
    p: fe,
    i(s) {
      i || (C(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), oe(n), r = !1, o();
    }
  };
}
function Qb(t) {
  let e, n, i, r, o, s = Yi(Oi(t[7].path)) + "", l, a, f, c = t[7].message + "", u, h, d, m, g, _;
  i = new Ct({ props: { data: Fs } });
  let b = t[9] === 0 && t[0].length > 1 && Xb(t);
  function w() {
    return t[6](t[7]);
  }
  return {
    c() {
      e = T("tr"), n = T("td"), se(i.$$.fragment), r = q(), o = T("td"), l = le(s), a = q(), f = T("td"), u = le(c), h = q(), d = T("td"), b && b.c(), p(n, "class", "jse-validation-error-icon svelte-1oe8e8r"), p(o, "class", "svelte-1oe8e8r"), p(f, "class", "svelte-1oe8e8r"), p(d, "class", "jse-validation-error-action svelte-1oe8e8r"), p(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(v, M) {
      B(v, e, M), y(e, n), re(i, n, null), y(e, r), y(e, o), y(o, l), y(e, a), y(e, f), y(f, u), y(e, h), y(e, d), b && b.m(d, null), m = !0, g || (_ = X(e, "click", w), g = !0);
    },
    p(v, M) {
      t = v, (!m || M & 1) && s !== (s = Yi(Oi(t[7].path)) + "") && Te(l, s), (!m || M & 1) && c !== (c = t[7].message + "") && Te(u, c), t[9] === 0 && t[0].length > 1 ? b ? (b.p(t, M), M & 1 && C(b, 1)) : (b = Xb(t), b.c(), C(b, 1), b.m(d, null)) : b && (me(), E(b, 1, 1, () => {
        b = null;
      }), pe());
    },
    i(v) {
      m || (C(i.$$.fragment, v), C(b), m = !0);
    },
    o(v) {
      E(i.$$.fragment, v), E(b), m = !1;
    },
    d(v) {
      v && j(e), oe(i), b && b.d(), g = !1, _();
    }
  };
}
function Yb(t) {
  let e, n, i, r, o, s, l, a = t[3] - el + "", f, c, u, h;
  return {
    c() {
      e = T("tr"), n = T("td"), i = q(), r = T("td"), o = q(), s = T("td"), l = le("(and "), f = le(a), c = le(" more errors)"), u = q(), h = T("td"), p(n, "class", "svelte-1oe8e8r"), p(r, "class", "svelte-1oe8e8r"), p(s, "class", "svelte-1oe8e8r"), p(h, "class", "svelte-1oe8e8r"), p(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(d, m) {
      B(d, e, m), y(e, n), y(e, i), y(e, r), y(e, o), y(e, s), y(s, l), y(s, f), y(s, c), y(e, u), y(e, h);
    },
    p(d, m) {
      m & 8 && a !== (a = d[3] - el + "") && Te(f, a);
    },
    d(d) {
      d && j(e);
    }
  };
}
function tj(t) {
  let e = !At(t[0]), n, i, r = e && Gb(t);
  return {
    c() {
      r && r.c(), n = Ze();
    },
    m(o, s) {
      r && r.m(o, s), B(o, n, s), i = !0;
    },
    p(o, [s]) {
      s & 1 && (e = !At(o[0])), e ? r ? (r.p(o, s), s & 1 && C(r, 1)) : (r = Gb(o), r.c(), C(r, 1), r.m(n.parentNode, n)) : r && (me(), E(r, 1, 1, () => {
        r = null;
      }), pe());
    },
    i(o) {
      i || (C(r), i = !0);
    },
    o(o) {
      E(r), i = !1;
    },
    d(o) {
      r && r.d(o), o && j(n);
    }
  };
}
function nj(t, e, n) {
  let i, { validationErrors: r } = e, { selectError: o } = e, s = !0;
  function l() {
    n(2, s = !1);
  }
  function a() {
    n(2, s = !0);
  }
  const f = (c) => {
    setTimeout(() => o(c));
  };
  return t.$$set = (c) => {
    "validationErrors" in c && n(0, r = c.validationErrors), "selectError" in c && n(1, o = c.selectError);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(3, i = r.length);
  }, [
    r,
    o,
    s,
    i,
    l,
    a,
    f
  ];
}
class ij extends Be {
  constructor(e) {
    super(), je(this, e, nj, tj, gt, { validationErrors: 0, selectError: 1 });
  }
}
const lg = ij;
function rj(t) {
  let e, n, i, r, o, s, l, a, f;
  return s = new Ct({ props: { data: Ul } }), {
    c() {
      e = T("div"), n = T("div"), i = le(t[0]), r = q(), o = T("button"), se(s.$$.fragment), p(n, "class", "jse-title svelte-d01h2s"), p(o, "type", "button"), p(o, "class", "jse-close svelte-d01h2s"), p(e, "class", "jse-header svelte-d01h2s");
    },
    m(c, u) {
      B(c, e, u), y(e, n), y(n, i), y(e, r), y(e, o), re(s, o, null), l = !0, a || (f = X(o, "click", t[3]), a = !0);
    },
    p(c, [u]) {
      (!l || u & 1) && Te(i, c[0]);
    },
    i(c) {
      l || (C(s.$$.fragment, c), l = !0);
    },
    o(c) {
      E(s.$$.fragment, c), l = !1;
    },
    d(c) {
      c && j(e), oe(s), a = !1, f();
    }
  };
}
function oj(t, e, n) {
  let { title: i = "Modal" } = e, { onClose: r = void 0 } = e;
  const { close: o } = Xn("simple-modal"), s = () => {
    r ? r() : o();
  };
  return t.$$set = (l) => {
    "title" in l && n(0, i = l.title), "onClose" in l && n(1, r = l.onClose);
  }, [i, r, o, s];
}
class sj extends Be {
  constructor(e) {
    super(), je(this, e, oj, rj, gt, { title: 0, onClose: 1 });
  }
}
const ag = sj;
function lj(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I;
  return n = new ag({ props: { title: "Copying and pasting" } }), {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), r = T("div"), o = T("div"), o.textContent = "These actions are unavailable via the menu. Please use:", s = q(), l = T("div"), a = T("div"), f = T("div"), f.textContent = `${t[1]}+C`, c = le(`
        for copy`), u = q(), h = T("div"), d = T("div"), d.textContent = `${t[1]}+X`, m = le(`
        for cut`), g = q(), _ = T("div"), b = T("div"), b.textContent = `${t[1]}+V`, w = le(`
        for paste`), v = q(), M = T("div"), S = T("button"), S.textContent = "Close", p(f, "class", "jse-key svelte-1olothd"), p(a, "class", "jse-shortcut"), p(d, "class", "jse-key svelte-1olothd"), p(h, "class", "jse-shortcut"), p(b, "class", "jse-key svelte-1olothd"), p(_, "class", "jse-shortcut"), p(l, "class", "jse-shortcuts svelte-1olothd"), p(S, "type", "button"), p(S, "class", "jse-primary svelte-1olothd"), p(M, "class", "jse-actions svelte-1olothd"), p(r, "class", "jse-modal-contents svelte-1olothd"), p(e, "class", "jse-modal jse-copy-paste svelte-1olothd");
    },
    m(L, V) {
      B(L, e, V), re(n, e, null), y(e, i), y(e, r), y(r, o), y(r, s), y(r, l), y(l, a), y(a, f), y(a, c), y(l, u), y(l, h), y(h, d), y(h, m), y(l, g), y(l, _), y(_, b), y(_, w), y(r, v), y(r, M), y(M, S), R = !0, k || (I = X(S, "click", t[0]), k = !0);
    },
    p: fe,
    i(L) {
      R || (C(n.$$.fragment, L), R = !0);
    },
    o(L) {
      E(n.$$.fragment, L), R = !1;
    },
    d(L) {
      L && j(e), oe(n), k = !1, I();
    }
  };
}
function aj(t) {
  const { close: e } = Xn("simple-modal");
  return [e, x3 ? "⌘" : "Ctrl"];
}
class fj extends Be {
  constructor(e) {
    super(), je(this, e, aj, lj, gt, {});
  }
}
const SC = fj;
function cj(t) {
  return MC(t);
}
function MC(t) {
  return t && (t.type === "space" || t.space === !0);
}
function Ch(t) {
  return t && (t.type === "separator" || t.separator === !0);
}
function uj(t) {
  return t && t.type === "label" && typeof t.text == "string";
}
function mf(t) {
  return t && typeof t.onClick == "function";
}
function fg(t) {
  return t && t.type === "dropdown-button" && mf(t.main) && Array.isArray(t.items);
}
function hj(t) {
  return t && t.type === "row" && Array.isArray(t.items);
}
function dj(t) {
  return t && t.type === "column" && Array.isArray(t.items);
}
function Zb(t) {
  return typeof t.parseError == "object" && t.parseError !== null;
}
function mj(t) {
  return Array.isArray(t.validationErrors);
}
const pj = (t) => ({}), $b = (t) => ({});
function e2(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
const gj = (t) => ({}), t2 = (t) => ({});
function bj(t) {
  let e = o2(t[3]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = o2(i[3]) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function _j(t) {
  let e, n, i, r, o, s, l, a, f = t[3].icon && n2(t), c = t[3].text && i2(t);
  return {
    c() {
      e = T("button"), f && f.c(), n = q(), c && c.c(), p(e, "type", "button"), p(e, "class", i = "jse-button " + t[3].className + " svelte-497ud4"), p(e, "title", r = t[3].title), e.disabled = o = t[3].disabled || !1;
    },
    m(u, h) {
      B(u, e, h), f && f.m(e, null), y(e, n), c && c.m(e, null), s = !0, l || (a = X(e, "click", function() {
        Gn(t[3].onClick) && t[3].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(u, h) {
      t = u, t[3].icon ? f ? (f.p(t, h), h & 1 && C(f, 1)) : (f = n2(t), f.c(), C(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe()), t[3].text ? c ? c.p(t, h) : (c = i2(t), c.c(), c.m(e, null)) : c && (c.d(1), c = null), (!s || h & 1 && i !== (i = "jse-button " + t[3].className + " svelte-497ud4")) && p(e, "class", i), (!s || h & 1 && r !== (r = t[3].title)) && p(e, "title", r), (!s || h & 1 && o !== (o = t[3].disabled || !1)) && (e.disabled = o);
    },
    i(u) {
      s || (C(f), s = !0);
    },
    o(u) {
      E(f), s = !1;
    },
    d(u) {
      u && j(e), f && f.d(), c && c.d(), l = !1, a();
    }
  };
}
function yj(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-space svelte-497ud4");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function wj(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-separator svelte-497ud4");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function n2(t) {
  let e, n;
  return e = new Ct({ props: { data: t[3].icon } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[3].icon), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function i2(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function r2(t) {
  let e, n, i, r, o, s, l;
  const a = [wj, yj, _j, bj], f = [];
  function c(u, h) {
    return h & 1 && (e = null), h & 1 && (n = null), h & 1 && (i = null), e == null && (e = !!Ch(u[3])), e ? 0 : (n == null && (n = !!MC(u[3])), n ? 1 : (i == null && (i = !!mf(u[3])), i ? 2 : 3));
  }
  return r = c(t, -1), o = f[r] = a[r](t), {
    c() {
      o.c(), s = Ze();
    },
    m(u, h) {
      f[r].m(u, h), B(u, s, h), l = !0;
    },
    p(u, h) {
      let d = r;
      r = c(u, h), r === d ? f[r].p(u, h) : (me(), E(f[d], 1, 1, () => {
        f[d] = null;
      }), pe(), o = f[r], o ? o.p(u, h) : (o = f[r] = a[r](u), o.c()), C(o, 1), o.m(s.parentNode, s));
    },
    i(u) {
      l || (C(o), l = !0);
    },
    o(u) {
      E(o), l = !1;
    },
    d(u) {
      f[r].d(u), u && j(s);
    }
  };
}
function vj(t) {
  let e, n, i, r;
  const o = t[2].left, s = An(o, t, t[1], t2);
  let l = t[0], a = [];
  for (let h = 0; h < l.length; h += 1)
    a[h] = r2(e2(t, l, h));
  const f = (h) => E(a[h], 1, 1, () => {
    a[h] = null;
  }), c = t[2].right, u = An(c, t, t[1], $b);
  return {
    c() {
      e = T("div"), s && s.c(), n = q();
      for (let h = 0; h < a.length; h += 1)
        a[h].c();
      i = q(), u && u.c(), p(e, "class", "jse-menu svelte-497ud4");
    },
    m(h, d) {
      B(h, e, d), s && s.m(e, null), y(e, n);
      for (let m = 0; m < a.length; m += 1)
        a[m].m(e, null);
      y(e, i), u && u.m(e, null), r = !0;
    },
    p(h, [d]) {
      if (s && s.p && (!r || d & 2) && Tn(
        s,
        o,
        h,
        h[1],
        r ? On(o, h[1], d, gj) : En(h[1]),
        t2
      ), d & 1) {
        l = h[0];
        let m;
        for (m = 0; m < l.length; m += 1) {
          const g = e2(h, l, m);
          a[m] ? (a[m].p(g, d), C(a[m], 1)) : (a[m] = r2(g), a[m].c(), C(a[m], 1), a[m].m(e, i));
        }
        for (me(), m = l.length; m < a.length; m += 1)
          f(m);
        pe();
      }
      u && u.p && (!r || d & 2) && Tn(
        u,
        c,
        h,
        h[1],
        r ? On(c, h[1], d, pj) : En(h[1]),
        $b
      );
    },
    i(h) {
      if (!r) {
        C(s, h);
        for (let d = 0; d < l.length; d += 1)
          C(a[d]);
        C(u, h), r = !0;
      }
    },
    o(h) {
      E(s, h), a = a.filter(Boolean);
      for (let d = 0; d < a.length; d += 1)
        E(a[d]);
      E(u, h), r = !1;
    },
    d(h) {
      h && j(e), s && s.d(h), zt(a, h), u && u.d(h);
    }
  };
}
function o2(t) {
  return console.error("Unknown type of menu item", t), "???";
}
function kj(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { items: o = [] } = e;
  return t.$$set = (s) => {
    "items" in s && n(0, o = s.items), "$$scope" in s && n(1, r = s.$$scope);
  }, [o, r, i];
}
class Cj extends Be {
  constructor(e) {
    super(), je(this, e, kj, vj, gt, { items: 0 });
  }
}
const Sh = Cj;
function Sj(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = "Repair invalid JSON, then click apply", p(e, "slot", "left"), p(e, "class", "jse-info svelte-gz09vf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Mj(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "success",
      message: "JSON is valid now and can be parsed.",
      actions: t[6]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 64 && (o.actions = i[6]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Aj(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "error",
      icon: Fs,
      message: `Cannot parse JSON: ${t[2].message}`,
      actions: t[7]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 4 && (o.message = `Cannot parse JSON: ${i[2].message}`), r & 128 && (o.actions = i[7]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Oj(t) {
  let e, n, i, r, o, s, l, a, f, c;
  n = new Sh({
    props: {
      items: t[5],
      $$slots: { left: [Sj] },
      $$scope: { ctx: t }
    }
  });
  const u = [Aj, Mj], h = [];
  function d(m, g) {
    return m[2] ? 0 : 1;
  }
  return r = d(t), o = h[r] = u[r](t), {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), o.c(), s = q(), l = T("textarea"), l.value = t[0], l.readOnly = t[1], p(l, "class", "jse-json-text svelte-gz09vf"), p(l, "autocomplete", "off"), p(l, "autocapitalize", "off"), p(l, "spellcheck", "false"), p(e, "class", "jse-json-repair-component svelte-gz09vf");
    },
    m(m, g) {
      B(m, e, g), re(n, e, null), y(e, i), h[r].m(e, null), y(e, s), y(e, l), t[17](l), t[18](e), a = !0, f || (c = X(l, "input", t[8]), f = !0);
    },
    p(m, [g]) {
      const _ = {};
      g & 32 && (_.items = m[5]), g & 33554432 && (_.$$scope = { dirty: g, ctx: m }), n.$set(_);
      let b = r;
      r = d(m), r === b ? h[r].p(m, g) : (me(), E(h[b], 1, 1, () => {
        h[b] = null;
      }), pe(), o = h[r], o ? o.p(m, g) : (o = h[r] = u[r](m), o.c()), C(o, 1), o.m(e, s)), (!a || g & 1) && (l.value = m[0]), (!a || g & 2) && (l.readOnly = m[1]);
    },
    i(m) {
      a || (C(n.$$.fragment, m), C(o), a = !0);
    },
    o(m) {
      E(n.$$.fragment, m), E(o), a = !1;
    },
    d(m) {
      m && j(e), oe(n), h[r].d(), t[17](null), t[18](null), f = !1, c();
    }
  };
}
function Tj(t, e, n) {
  let i, r, o, s, l, a, { text: f = "" } = e, { readOnly: c = !1 } = e, { onParse: u } = e, { onRepair: h } = e, { onChange: d = null } = e, { onApply: m } = e, { onCancel: g } = e;
  const _ = Qn("jsoneditor:JSONRepair");
  let b, w;
  function v(W) {
    try {
      return u(W), null;
    } catch (U) {
      return dh(W, U.message);
    }
  }
  function M(W) {
    try {
      return h(W), !0;
    } catch {
      return !1;
    }
  }
  function S() {
    w && i && i.position != null && (w.setSelectionRange(i.position, i.position), setTimeout(() => {
      w.focus();
    }));
  }
  function R(W) {
    _("handleChange");
    const U = W.target.value;
    f !== U && (n(0, f = U), d && d(f));
  }
  function k() {
    m(f);
  }
  function I() {
    try {
      n(0, f = h(f)), d && d(f);
    } catch {
    }
  }
  let L;
  function V(W) {
    mt[W ? "unshift" : "push"](() => {
      w = W, n(4, w);
    });
  }
  function N(W) {
    mt[W ? "unshift" : "push"](() => {
      b = W, n(3, b);
    });
  }
  return t.$$set = (W) => {
    "text" in W && n(0, f = W.text), "readOnly" in W && n(1, c = W.readOnly), "onParse" in W && n(9, u = W.onParse), "onRepair" in W && n(10, h = W.onRepair), "onChange" in W && n(11, d = W.onChange), "onApply" in W && n(12, m = W.onApply), "onCancel" in W && n(13, g = W.onCancel);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = v(f)), t.$$.dirty & 1 && n(16, r = M(f)), t.$$.dirty & 4 && _("error", i), t.$$.dirty & 8192 && n(5, L = [
      { type: "space" },
      {
        type: "button",
        icon: Ul,
        title: "Cancel repair",
        className: "jse-cancel",
        onClick: g
      }
    ]), t.$$.dirty & 114688 && n(7, l = r ? [o, s] : [o]), t.$$.dirty & 2 && n(6, a = [
      {
        icon: La,
        text: "Apply",
        title: "Apply fixed JSON",
        disabled: c,
        onClick: k
      }
    ]);
  }, n(14, o = {
    icon: pN,
    text: "Show me",
    title: "Scroll to the error location",
    onClick: S
  }), n(15, s = {
    icon: _h,
    text: "Auto repair",
    title: "Automatically repair JSON",
    onClick: I
  }), [
    f,
    c,
    i,
    b,
    w,
    L,
    a,
    l,
    R,
    u,
    h,
    d,
    m,
    g,
    o,
    s,
    r,
    V,
    N
  ];
}
class Ej extends Be {
  constructor(e) {
    super(), je(this, e, Tj, Oj, gt, {
      text: 0,
      readOnly: 1,
      onParse: 9,
      onRepair: 10,
      onChange: 11,
      onApply: 12,
      onCancel: 13
    });
  }
}
const Pj = Ej;
function Rj(t) {
  let e, n, i, r;
  function o(l) {
    t[6](l);
  }
  let s = {
    onParse: t[1],
    onRepair: t[2],
    onApply: t[3],
    onCancel: t[4]
  };
  return t[0] !== void 0 && (s.text = t[0]), n = new Pj({ props: s }), mt.push(() => lr(n, "text", o, t[0])), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-modal jse-repair svelte-1ffm3pm");
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), r = !0;
    },
    p(l, [a]) {
      const f = {};
      a & 2 && (f.onParse = l[1]), a & 4 && (f.onRepair = l[2]), !i && a & 1 && (i = !0, f.text = l[0], sr(() => i = !1)), n.$set(f);
    },
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n);
    }
  };
}
function Ij(t, e, n) {
  let { text: i } = e, { onParse: r } = e, { onRepair: o } = e, { onApply: s } = e;
  const { close: l } = Xn("simple-modal");
  function a(u) {
    l(), s(u);
  }
  function f() {
    l();
  }
  function c(u) {
    i = u, n(0, i);
  }
  return t.$$set = (u) => {
    "text" in u && n(0, i = u.text), "onParse" in u && n(1, r = u.onParse), "onRepair" in u && n(2, o = u.onRepair), "onApply" in u && n(5, s = u.onApply);
  }, [
    i,
    r,
    o,
    a,
    f,
    s,
    c
  ];
}
class Nj extends Be {
  constructor(e) {
    super(), je(this, e, Ij, Rj, gt, {
      text: 0,
      onParse: 1,
      onRepair: 2,
      onApply: 5
    });
  }
}
const AC = Nj;
function s2(t) {
  let e, n;
  return e = new Ct({ props: { data: t[0].icon } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[0].icon), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function l2(t) {
  let e = t[0].text + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[0].text + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function Dj(t) {
  let e, n, i, r, o, s, l, a, f = t[0].icon && s2(t), c = t[0].text && l2(t);
  return {
    c() {
      e = T("button"), f && f.c(), n = q(), c && c.c(), p(e, "type", "button"), p(e, "class", i = cn(Kr("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8"), p(e, "title", r = t[0].title), e.disabled = o = t[0].disabled || !1;
    },
    m(u, h) {
      B(u, e, h), f && f.m(e, null), y(e, n), c && c.m(e, null), s = !0, l || (a = X(e, "click", function() {
        Gn(t[0].onClick) && t[0].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(u, [h]) {
      t = u, t[0].icon ? f ? (f.p(t, h), h & 1 && C(f, 1)) : (f = s2(t), f.c(), C(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe()), t[0].text ? c ? c.p(t, h) : (c = l2(t), c.c(), c.m(e, null)) : c && (c.d(1), c = null), (!s || h & 3 && i !== (i = cn(Kr("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8")) && p(e, "class", i), (!s || h & 1 && r !== (r = t[0].title)) && p(e, "title", r), (!s || h & 1 && o !== (o = t[0].disabled || !1)) && (e.disabled = o);
    },
    i(u) {
      s || (C(f), s = !0);
    },
    o(u) {
      E(f), s = !1;
    },
    d(u) {
      u && j(e), f && f.d(), c && c.d(), l = !1, a();
    }
  };
}
function jj(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (o) => {
    "item" in o && n(0, i = o.item), "className" in o && n(1, r = o.className);
  }, [i, r];
}
class Bj extends Be {
  constructor(e) {
    super(), je(this, e, jj, Dj, It, { item: 0, className: 1 });
  }
}
const cg = Bj;
function a2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
const Lj = (t) => ({}), f2 = (t) => ({});
function c2(t) {
  let e, n;
  return e = new Ct({ props: { data: t[11].icon } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[11].icon), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function u2(t) {
  let e, n, i, r = t[11].text + "", o, s, l, a, f, c, u, h, d = t[11].icon && c2(t);
  function m() {
    return t[9](t[11]);
  }
  return {
    c() {
      e = T("li"), n = T("button"), d && d.c(), i = q(), o = le(r), f = q(), p(n, "type", "button"), p(n, "title", s = t[11].title), n.disabled = l = t[11].disabled, p(n, "class", a = cn(t[11].className) + " svelte-12ophpi"), p(e, "class", "svelte-12ophpi");
    },
    m(g, _) {
      B(g, e, _), y(e, n), d && d.m(n, null), y(n, i), y(n, o), y(e, f), c = !0, u || (h = X(n, "click", m), u = !0);
    },
    p(g, _) {
      t = g, t[11].icon ? d ? (d.p(t, _), _ & 1 && C(d, 1)) : (d = c2(t), d.c(), C(d, 1), d.m(n, i)) : d && (me(), E(d, 1, 1, () => {
        d = null;
      }), pe()), (!c || _ & 1) && r !== (r = t[11].text + "") && Te(o, r), (!c || _ & 1 && s !== (s = t[11].title)) && p(n, "title", s), (!c || _ & 1 && l !== (l = t[11].disabled)) && (n.disabled = l), (!c || _ & 1 && a !== (a = cn(t[11].className) + " svelte-12ophpi")) && p(n, "class", a);
    },
    i(g) {
      c || (C(d), c = !0);
    },
    o(g) {
      E(d), c = !1;
    },
    d(g) {
      g && j(e), d && d.d(), u = !1, h();
    }
  };
}
function xj(t) {
  let e, n, i, r, o, s, l, a, f, c;
  const u = t[8].defaultItem, h = An(u, t, t[7], f2);
  r = new Ct({ props: { data: Ui } });
  let d = t[0], m = [];
  for (let _ = 0; _ < d.length; _ += 1)
    m[_] = u2(a2(t, d, _));
  const g = (_) => E(m[_], 1, 1, () => {
    m[_] = null;
  });
  return {
    c() {
      e = T("div"), h && h.c(), n = q(), i = T("button"), se(r.$$.fragment), o = q(), s = T("div"), l = T("ul");
      for (let _ = 0; _ < m.length; _ += 1)
        m[_].c();
      p(i, "type", "button"), p(i, "class", "jse-open-dropdown svelte-12ophpi"), p(i, "data-type", "jse-open-dropdown"), i.disabled = t[4], de(i, "jse-visible", t[3]), p(l, "class", "svelte-12ophpi"), p(s, "class", "jse-dropdown-items svelte-12ophpi"), mi(s, "width", t[2]), de(s, "jse-visible", t[3]), p(e, "class", "jse-dropdown-button svelte-12ophpi"), p(e, "title", t[1]);
    },
    m(_, b) {
      B(_, e, b), h && h.m(e, null), y(e, n), y(e, i), re(r, i, null), y(e, o), y(e, s), y(s, l);
      for (let w = 0; w < m.length; w += 1)
        m[w].m(l, null);
      a = !0, f || (c = [
        X(i, "click", t[5]),
        X(e, "click", t[6])
      ], f = !0);
    },
    p(_, [b]) {
      if (h && h.p && (!a || b & 128) && Tn(
        h,
        u,
        _,
        _[7],
        a ? On(u, _[7], b, Lj) : En(_[7]),
        f2
      ), (!a || b & 16) && (i.disabled = _[4]), (!a || b & 8) && de(i, "jse-visible", _[3]), b & 1) {
        d = _[0];
        let w;
        for (w = 0; w < d.length; w += 1) {
          const v = a2(_, d, w);
          m[w] ? (m[w].p(v, b), C(m[w], 1)) : (m[w] = u2(v), m[w].c(), C(m[w], 1), m[w].m(l, null));
        }
        for (me(), w = d.length; w < m.length; w += 1)
          g(w);
        pe();
      }
      (!a || b & 4) && mi(s, "width", _[2]), (!a || b & 8) && de(s, "jse-visible", _[3]), (!a || b & 2) && p(e, "title", _[1]);
    },
    i(_) {
      if (!a) {
        C(h, _), C(r.$$.fragment, _);
        for (let b = 0; b < d.length; b += 1)
          C(m[b]);
        a = !0;
      }
    },
    o(_) {
      E(h, _), E(r.$$.fragment, _), m = m.filter(Boolean);
      for (let b = 0; b < m.length; b += 1)
        E(m[b]);
      a = !1;
    },
    d(_) {
      _ && j(e), h && h.d(_), oe(r), zt(m, _), f = !1, et(c);
    }
  };
}
function zj(t, e, n) {
  let i, { $$slots: r = {}, $$scope: o } = e, { items: s = [] } = e, { title: l = void 0 } = e, { width: a = "120px" } = e, f = !1;
  function c() {
    const m = f;
    setTimeout(() => n(3, f = !m));
  }
  function u() {
    n(3, f = !1);
  }
  function h(m) {
    es(m) === "Escape" && (m.preventDefault(), n(3, f = !1));
  }
  zi(() => {
    document.addEventListener("click", u), document.addEventListener("keydown", h);
  }), qr(() => {
    document.removeEventListener("click", u), document.removeEventListener("keydown", h);
  });
  const d = (m) => m.onClick();
  return t.$$set = (m) => {
    "items" in m && n(0, s = m.items), "title" in m && n(1, l = m.title), "width" in m && n(2, a = m.width), "$$scope" in m && n(7, o = m.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = s.every((m) => m.disabled === !0));
  }, [
    s,
    l,
    a,
    f,
    i,
    c,
    u,
    o,
    r,
    d
  ];
}
class Vj extends Be {
  constructor(e) {
    super(), je(this, e, zj, xj, gt, { items: 0, title: 1, width: 2 });
  }
}
const Fj = Vj;
function h2(t) {
  let e, n;
  return e = new Ct({
    props: { data: t[0].main.icon }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.data = i[0].main.icon), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Hj(t) {
  let e, n, i = t[0].main.text + "", r, o, s, l, a, f, c, u = t[0].main.icon && h2(t);
  return {
    c() {
      e = T("button"), u && u.c(), n = q(), r = le(i), p(e, "class", o = cn(Kr("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8"), p(e, "type", "button"), p(e, "slot", "defaultItem"), p(e, "title", s = t[0].main.title), e.disabled = l = t[0].main.disabled || !1;
    },
    m(h, d) {
      B(h, e, d), u && u.m(e, null), y(e, n), y(e, r), a = !0, f || (c = X(e, "click", function() {
        Gn(t[0].main.onClick) && t[0].main.onClick.apply(this, arguments);
      }), f = !0);
    },
    p(h, d) {
      t = h, t[0].main.icon ? u ? (u.p(t, d), d & 1 && C(u, 1)) : (u = h2(t), u.c(), C(u, 1), u.m(e, n)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), (!a || d & 1) && i !== (i = t[0].main.text + "") && Te(r, i), (!a || d & 3 && o !== (o = cn(Kr("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8")) && p(e, "class", o), (!a || d & 1 && s !== (s = t[0].main.title)) && p(e, "title", s), (!a || d & 1 && l !== (l = t[0].main.disabled || !1)) && (e.disabled = l);
    },
    i(h) {
      a || (C(u), a = !0);
    },
    o(h) {
      E(u), a = !1;
    },
    d(h) {
      h && j(e), u && u.d(), f = !1, c();
    }
  };
}
function Wj(t) {
  let e, n;
  return e = new Fj({
    props: {
      width: t[0].width,
      items: t[0].items,
      $$slots: { defaultItem: [Hj] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.width = i[0].width), r & 1 && (o.items = i[0].items), r & 7 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Uj(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (o) => {
    "item" in o && n(0, i = o.item), "className" in o && n(1, r = o.className);
  }, [i, r];
}
class qj extends Be {
  constructor(e) {
    super(), je(this, e, Uj, Wj, It, { item: 0, className: 1 });
  }
}
const ug = qj;
function d2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function m2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function p2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
function Jj(t) {
  let e = Ol(t[5]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ol(i[5]) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function Kj(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Gj(t) {
  let e, n, i = t[5].items, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = b2(m2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      e = T("div");
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      p(e, "class", "jse-row svelte-1nininf");
    },
    m(s, l) {
      B(s, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(s, l) {
      if (l & 1) {
        i = s[5].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = m2(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = b2(f), r[a].c(), C(r[a], 1), r[a].m(e, null));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      s && j(e), zt(r, s);
    }
  };
}
function Xj(t) {
  let e, n;
  return e = new ug({ props: { item: t[5] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[5]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Qj(t) {
  let e, n;
  return e = new cg({ props: { item: t[5] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[5]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Yj(t) {
  let e = Ol(t[8]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ol(i[8]) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function Zj(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function $j(t) {
  let e, n, i = t[8].items, r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = g2(p2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      e = T("div");
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      p(e, "class", "jse-column svelte-1nininf");
    },
    m(s, l) {
      B(s, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(s, l) {
      if (l & 1) {
        i = s[8].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = p2(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = g2(f), r[a].c(), C(r[a], 1), r[a].m(e, null));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      s && j(e), zt(r, s);
    }
  };
}
function eB(t) {
  let e, n;
  return e = new ug({ props: { item: t[8] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[8]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function tB(t) {
  let e, n;
  return e = new cg({ props: { item: t[8] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[8]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function nB(t) {
  let e = Ol(t[11]) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ol(i[11]) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function iB(t) {
  let e, n = t[11].text + "", i;
  return {
    c() {
      e = T("div"), i = le(n), p(e, "class", "jse-label svelte-1nininf");
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, o) {
      o & 1 && n !== (n = r[11].text + "") && Te(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function rB(t) {
  let e;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function oB(t) {
  let e, n;
  return e = new ug({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[11]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function sB(t) {
  let e, n;
  return e = new cg({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 1 && (o.item = i[11]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function g2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    sB,
    oB,
    rB,
    iB,
    nB
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!mf(h[11])), e ? 0 : (n == null && (n = !!fg(h[11])), n ? 1 : (i == null && (i = !!Ch(h[11])), i ? 2 : (r == null && (r = !!uj(h[11])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = Ze();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let m = o;
      o = u(h, d), o === m ? c[o].p(h, d) : (me(), E(c[m], 1, 1, () => {
        c[m] = null;
      }), pe(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), C(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (C(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function b2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    tB,
    eB,
    $j,
    Zj,
    Yj
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!mf(h[8])), e ? 0 : (n == null && (n = !!fg(h[8])), n ? 1 : (i == null && (i = !!dj(h[8])), i ? 2 : (r == null && (r = !!Ch(h[8])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = Ze();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let m = o;
      o = u(h, d), o === m ? c[o].p(h, d) : (me(), E(c[m], 1, 1, () => {
        c[m] = null;
      }), pe(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), C(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (C(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function _2(t) {
  let e, n, i, r, o, s, l, a;
  const f = [
    Qj,
    Xj,
    Gj,
    Kj,
    Jj
  ], c = [];
  function u(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!mf(h[5])), e ? 0 : (n == null && (n = !!fg(h[5])), n ? 1 : (i == null && (i = !!hj(h[5])), i ? 2 : (r == null && (r = !!Ch(h[5])), r ? 3 : 4)));
  }
  return o = u(t, -1), s = c[o] = f[o](t), {
    c() {
      s.c(), l = Ze();
    },
    m(h, d) {
      c[o].m(h, d), B(h, l, d), a = !0;
    },
    p(h, d) {
      let m = o;
      o = u(h, d), o === m ? c[o].p(h, d) : (me(), E(c[m], 1, 1, () => {
        c[m] = null;
      }), pe(), s = c[o], s ? s.p(h, d) : (s = c[o] = f[o](h), s.c()), C(s, 1), s.m(l.parentNode, l));
    },
    i(h) {
      a || (C(s), a = !0);
    },
    o(h) {
      E(s), a = !1;
    },
    d(h) {
      c[o].d(h), h && j(l);
    }
  };
}
function y2(t) {
  let e, n, i, r, o, s, l, a;
  return r = new Ct({ props: { data: gR } }), {
    c() {
      e = T("div"), n = T("div"), i = T("div"), se(r.$$.fragment), o = q(), s = T("div"), l = le(t[1]), p(i, "class", "jse-tip-icon svelte-1nininf"), p(s, "class", "jse-tip-text"), p(n, "class", "jse-tip svelte-1nininf"), p(e, "class", "jse-row svelte-1nininf");
    },
    m(f, c) {
      B(f, e, c), y(e, n), y(n, i), re(r, i, null), y(n, o), y(n, s), y(s, l), a = !0;
    },
    p(f, c) {
      (!a || c & 2) && Te(l, f[1]);
    },
    i(f) {
      a || (C(r.$$.fragment, f), a = !0);
    },
    o(f) {
      E(r.$$.fragment, f), a = !1;
    },
    d(f) {
      f && j(e), oe(r);
    }
  };
}
function lB(t) {
  let e, n, i, r, o, s = t[0], l = [];
  for (let c = 0; c < s.length; c += 1)
    l[c] = _2(d2(t, s, c));
  const a = (c) => E(l[c], 1, 1, () => {
    l[c] = null;
  });
  let f = t[1] && y2(t);
  return {
    c() {
      e = T("div");
      for (let c = 0; c < l.length; c += 1)
        l[c].c();
      n = q(), f && f.c(), p(e, "class", "jse-contextmenu svelte-1nininf");
    },
    m(c, u) {
      B(c, e, u);
      for (let h = 0; h < l.length; h += 1)
        l[h].m(e, null);
      y(e, n), f && f.m(e, null), t[4](e), i = !0, r || (o = X(e, "keydown", t[3]), r = !0);
    },
    p(c, [u]) {
      if (u & 1) {
        s = c[0];
        let h;
        for (h = 0; h < s.length; h += 1) {
          const d = d2(c, s, h);
          l[h] ? (l[h].p(d, u), C(l[h], 1)) : (l[h] = _2(d), l[h].c(), C(l[h], 1), l[h].m(e, n));
        }
        for (me(), h = s.length; h < l.length; h += 1)
          a(h);
        pe();
      }
      c[1] ? f ? (f.p(c, u), u & 2 && C(f, 1)) : (f = y2(c), f.c(), C(f, 1), f.m(e, null)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe());
    },
    i(c) {
      if (!i) {
        for (let u = 0; u < s.length; u += 1)
          C(l[u]);
        C(f), i = !0;
      }
    },
    o(c) {
      l = l.filter(Boolean);
      for (let u = 0; u < l.length; u += 1)
        E(l[u]);
      E(f), i = !1;
    },
    d(c) {
      c && j(e), zt(l, c), f && f.d(), t[4](null), r = !1, o();
    }
  };
}
function Ol(t) {
  return console.error("Unknown type of context menu item", t), "???";
}
function aB(t, e, n) {
  let { items: i } = e, { tip: r } = e, o;
  zi(() => {
    setTimeout(() => {
      const a = [...o.querySelectorAll("button")].find((f) => !f.disabled);
      a && a.focus();
    });
  });
  function s(a) {
    const f = es(a).replace(/^Command\+/, "Ctrl+");
    if (f === "Up" || f === "Down" || f === "Left" || f === "Right") {
      a.preventDefault();
      const c = Array.from(o.querySelectorAll("button:not([disabled])")), u = q9({
        allElements: c,
        currentElement: a.target,
        direction: f,
        hasPrio: (h) => h.getAttribute("data-type") !== "jse-open-dropdown"
      });
      u && u.focus();
    }
  }
  function l(a) {
    mt[a ? "unshift" : "push"](() => {
      o = a, n(2, o);
    });
  }
  return t.$$set = (a) => {
    "items" in a && n(0, i = a.items), "tip" in a && n(1, r = a.tip);
  }, [i, r, o, s, l];
}
class fB extends Be {
  constructor(e) {
    super(), je(this, e, aB, lB, gt, { items: 0, tip: 1 });
  }
}
const OC = fB;
function cB(t) {
  let e, n;
  return e = new OC({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.items = i[1]), r[0] & 1 && (o.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function uB(t, e, n) {
  let i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, { json: R } = e, { documentState: k } = e, { parser: I } = e, { showTip: L } = e, { onCloseContextMenu: V } = e, { onEditKey: N } = e, { onEditValue: W } = e, { onToggleEnforceString: U } = e, { onCut: O } = e, { onCopy: x } = e, { onPaste: A } = e, { onRemove: H } = e, { onDuplicate: D } = e, { onExtract: P } = e, { onInsertBefore: K } = e, { onInsert: ne } = e, { onConvert: z } = e, { onInsertAfter: Z } = e, { onSort: te } = e, { onTransform: G } = e;
  function Ae() {
    V(), N();
  }
  function ke() {
    V(), W();
  }
  function ze() {
    V(), U();
  }
  function ee() {
    V(), O(!0);
  }
  function we() {
    V(), O(!1);
  }
  function tt() {
    V(), x(!0);
  }
  function ge() {
    V(), x(!1);
  }
  function ie() {
    V(), A();
  }
  function ve() {
    V(), H();
  }
  function Xe() {
    V(), D();
  }
  function he() {
    V(), P();
  }
  function Ve(Oe) {
    V(), f ? z(Oe) : ne(Oe);
  }
  function Ie() {
    V(), te();
  }
  function qe() {
    V(), G();
  }
  function ct() {
    V(), K();
  }
  function yt() {
    V(), Z();
  }
  let Fe;
  return t.$$set = (Oe) => {
    "json" in Oe && n(2, R = Oe.json), "documentState" in Oe && n(3, k = Oe.documentState), "parser" in Oe && n(4, I = Oe.parser), "showTip" in Oe && n(0, L = Oe.showTip), "onCloseContextMenu" in Oe && n(5, V = Oe.onCloseContextMenu), "onEditKey" in Oe && n(6, N = Oe.onEditKey), "onEditValue" in Oe && n(7, W = Oe.onEditValue), "onToggleEnforceString" in Oe && n(8, U = Oe.onToggleEnforceString), "onCut" in Oe && n(9, O = Oe.onCut), "onCopy" in Oe && n(10, x = Oe.onCopy), "onPaste" in Oe && n(11, A = Oe.onPaste), "onRemove" in Oe && n(12, H = Oe.onRemove), "onDuplicate" in Oe && n(13, D = Oe.onDuplicate), "onExtract" in Oe && n(14, P = Oe.onExtract), "onInsertBefore" in Oe && n(15, K = Oe.onInsertBefore), "onInsert" in Oe && n(16, ne = Oe.onInsert), "onConvert" in Oe && n(17, z = Oe.onConvert), "onInsertAfter" in Oe && n(18, Z = Oe.onInsertAfter), "onSort" in Oe && n(19, te = Oe.onSort), "onTransform" in Oe && n(20, G = Oe.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(37, i = k.selection), t.$$.dirty[0] & 4 && n(39, r = R !== void 0), t.$$.dirty[1] & 64 && n(31, o = i != null), t.$$.dirty[1] & 65 && n(21, s = o && At(i.focusPath)), t.$$.dirty[0] & 4 | t.$$.dirty[1] & 65 && n(38, l = o ? Le(R, i.focusPath) : void 0), t.$$.dirty[1] & 128 && n(35, a = Array.isArray(l) ? "Edit array" : pn(l) ? "Edit object" : "Edit value"), t.$$.dirty[1] & 320 && n(22, f = r && (Pt(i) || kn(i) || vt(i))), t.$$.dirty[0] & 6291456 | t.$$.dirty[1] & 256 && n(30, c = r && f && !s), t.$$.dirty[0] & 2097152 | t.$$.dirty[1] & 320 && n(29, u = r && i != null && (Pt(i) || vt(i)) && !s), t.$$.dirty[0] & 2097156 | t.$$.dirty[1] & 320 && n(36, h = r && i != null && Ba(i) && !s && !Array.isArray(Le(R, kt(i.focusPath)))), t.$$.dirty[1] & 320 && n(34, d = r && i != null && Ba(i)), t.$$.dirty[1] & 136 && n(32, m = d && !rn(l)), t.$$.dirty[0] & 4194304 && n(25, g = f), t.$$.dirty[0] & 33554432 && n(24, _ = g ? "Convert to:" : "Insert:"), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 1 && n(28, b = g ? !1 : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(27, w = g ? Cs(i) && !pn(l) : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(26, v = g ? Cs(i) && !Array.isArray(l) : o), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(23, M = g ? Cs(i) && rn(l) : o), t.$$.dirty[0] & 24 | t.$$.dirty[1] & 192 && n(33, S = i != null ? uo(l, k.enforceStringMap, Se(i.focusPath), I) : !1), t.$$.dirty[0] & 2145386496 | t.$$.dirty[1] & 63 && n(1, Fe = [
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: Ae,
            icon: ba,
            text: "Edit key",
            title: "Edit the key (Double-click on the key)",
            disabled: !h
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: ke,
              icon: ba,
              text: a,
              title: "Edit the value (Double-click on the value)",
              disabled: !d
            },
            width: "11em",
            items: [
              {
                type: "button",
                icon: ba,
                text: a,
                title: "Edit the value (Double-click on the value)",
                onClick: ke,
                disabled: !d
              },
              {
                type: "button",
                icon: S ? Na : Da,
                text: "Enforce string",
                title: "Enforce keeping the value as string when it contains a numeric value",
                onClick: ze,
                disabled: !m
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: ee,
              icon: ll,
              text: "Cut",
              title: "Cut selected contents, formatted with indentation (Ctrl+X)",
              disabled: !f
            },
            width: "10em",
            items: [
              {
                type: "button",
                icon: ll,
                text: "Cut formatted",
                title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                onClick: ee,
                disabled: !f
              },
              {
                type: "button",
                icon: ll,
                text: "Cut compacted",
                title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                onClick: we,
                disabled: !f
              }
            ]
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: tt,
              icon: Lo,
              text: "Copy",
              title: "Copy selected contents, formatted with indentation (Ctrl+C)",
              disabled: !f
            },
            width: "12em",
            items: [
              {
                type: "button",
                icon: Lo,
                text: "Copy formatted",
                title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                onClick: tt,
                disabled: !f
              },
              {
                type: "button",
                icon: Lo,
                text: "Copy compacted",
                title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                onClick: ge,
                disabled: !f
              }
            ]
          },
          {
            type: "button",
            onClick: ie,
            icon: cC,
            text: "Paste",
            title: "Paste clipboard contents (Ctrl+V)",
            disabled: !o
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "button",
                onClick: ve,
                icon: Ul,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !f
              },
              {
                type: "button",
                onClick: Xe,
                icon: _N,
                text: "Duplicate",
                title: "Duplicate selected contents (Ctrl+D)",
                disabled: !c
              },
              {
                type: "button",
                onClick: he,
                icon: fN,
                text: "Extract",
                title: "Extract selected contents",
                disabled: !u
              },
              {
                type: "button",
                onClick: Ie,
                icon: yh,
                text: "Sort",
                title: "Sort array or object contents",
                disabled: !f
              },
              {
                type: "button",
                onClick: qe,
                icon: bh,
                text: "Transform",
                title: "Transform array or object contents (filter, sort, project)",
                disabled: !f
              }
            ]
          },
          {
            type: "column",
            items: [
              { type: "label", text: _ },
              {
                type: "button",
                onClick: () => Ve("structure"),
                icon: g ? Lf : xf,
                text: "Structure",
                title: _ + " structure",
                disabled: !b
              },
              {
                type: "button",
                onClick: () => Ve("object"),
                icon: g ? Lf : xf,
                text: "Object",
                title: _ + " structure",
                disabled: !w
              },
              {
                type: "button",
                onClick: () => Ve("array"),
                icon: g ? Lf : xf,
                text: "Array",
                title: _ + " array",
                disabled: !v
              },
              {
                type: "button",
                onClick: () => Ve("value"),
                icon: g ? Lf : xf,
                text: "Value",
                title: _ + " value",
                disabled: !M
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: ct,
            icon: oN,
            text: "Insert before",
            title: "Select area before current entry to insert or paste contents",
            disabled: !f || s
          },
          {
            type: "button",
            onClick: yt,
            icon: eN,
            text: "Insert after",
            title: "Select area after current entry to insert or paste contents",
            disabled: !f || s
          }
        ]
      }
    ]);
  }, [
    L,
    Fe,
    R,
    k,
    I,
    V,
    N,
    W,
    U,
    O,
    x,
    A,
    H,
    D,
    P,
    K,
    ne,
    z,
    Z,
    te,
    G,
    s,
    f,
    M,
    _,
    g,
    v,
    w,
    b,
    u,
    c,
    o,
    m,
    S,
    d,
    a,
    h,
    i,
    l,
    r
  ];
}
class hB extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      uB,
      cB,
      gt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditKey: 6,
        onEditValue: 7,
        onToggleEnforceString: 8,
        onCut: 9,
        onCopy: 10,
        onPaste: 11,
        onRemove: 12,
        onDuplicate: 13,
        onExtract: 14,
        onInsertBefore: 15,
        onInsert: 16,
        onConvert: 17,
        onInsertAfter: 18,
        onSort: 19,
        onTransform: 20
      },
      null,
      [-1, -1]
    );
  }
}
const dB = hB;
function w2(t, e, n) {
  const i = t.slice();
  return i[13] = e[n], i;
}
function v2(t) {
  let e, n, i = t[13].start + "", r, o, s = t[13].end + "", l, a, f, c;
  function u() {
    return t[12](t[13]);
  }
  return {
    c() {
      e = T("button"), n = le("show "), r = le(i), o = le("-"), l = le(s), a = q(), p(e, "type", "button"), p(e, "class", "jse-expand-items svelte-1knbf5w");
    },
    m(h, d) {
      B(h, e, d), y(e, n), y(e, r), y(e, o), y(e, l), y(e, a), f || (c = X(e, "click", u), f = !0);
    },
    p(h, d) {
      t = h, d & 16 && i !== (i = t[13].start + "") && Te(r, i), d & 16 && s !== (s = t[13].end + "") && Te(l, s);
    },
    d(h) {
      h && j(e), f = !1, c();
    }
  };
}
function mB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = t[4], d = [];
  for (let m = 0; m < h.length; m += 1)
    d[m] = v2(w2(t, h, m));
  return {
    c() {
      e = T("div"), n = T("div"), i = T("div"), r = le("Items "), o = le(t[3]), s = le("-"), l = le(t[2]), a = q();
      for (let m = 0; m < d.length; m += 1)
        d[m].c();
      p(i, "class", "jse-text svelte-1knbf5w"), p(e, "class", "jse-collapsed-items svelte-1knbf5w"), p(e, "style", f = k2(t[0].length + 2)), de(e, "jse-selected", t[5]);
    },
    m(m, g) {
      B(m, e, g), y(e, n), y(n, i), y(i, r), y(i, o), y(i, s), y(i, l), y(n, a);
      for (let _ = 0; _ < d.length; _ += 1)
        d[_].m(n, null);
      c || (u = X(e, "mousemove", pB), c = !0);
    },
    p(m, [g]) {
      if (g & 8 && Te(o, m[3]), g & 4 && Te(l, m[2]), g & 19) {
        h = m[4];
        let _;
        for (_ = 0; _ < h.length; _ += 1) {
          const b = w2(m, h, _);
          d[_] ? d[_].p(b, g) : (d[_] = v2(b), d[_].c(), d[_].m(n, null));
        }
        for (; _ < d.length; _ += 1)
          d[_].d(1);
        d.length = h.length;
      }
      g & 1 && f !== (f = k2(m[0].length + 2)) && p(e, "style", f), g & 32 && de(e, "jse-selected", m[5]);
    },
    i: fe,
    o: fe,
    d(m) {
      m && j(e), zt(d, m), c = !1, u();
    }
  };
}
function k2(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function pB(t) {
  t.stopPropagation();
}
function gB(t, e, n) {
  let i, r, o, s, l, { visibleSections: a } = e, { sectionIndex: f } = e, { total: c } = e, { path: u } = e, { pointer: h } = e, { selection: d } = e, { onExpandSection: m } = e;
  const g = (_) => m(u, _);
  return t.$$set = (_) => {
    "visibleSections" in _ && n(6, a = _.visibleSections), "sectionIndex" in _ && n(7, f = _.sectionIndex), "total" in _ && n(8, c = _.total), "path" in _ && n(0, u = _.path), "pointer" in _ && n(9, h = _.pointer), "selection" in _ && n(10, d = _.selection), "onExpandSection" in _ && n(1, m = _.onExpandSection);
  }, t.$$.update = () => {
    t.$$.dirty & 192 && n(11, i = a[f]), t.$$.dirty & 2048 && n(3, r = i.end), t.$$.dirty & 448 && n(2, o = a[f + 1] ? a[f + 1].start : c), t.$$.dirty & 1544 && n(5, s = Pt(d) ? d.pointersMap[im(h, r)] === !0 : !1), t.$$.dirty & 12 && n(4, l = GR(r, o));
  }, [
    u,
    m,
    o,
    r,
    l,
    s,
    a,
    f,
    c,
    h,
    d,
    i,
    g
  ];
}
class bB extends Be {
  constructor(e) {
    super(), je(this, e, gB, mB, gt, {
      visibleSections: 6,
      sectionIndex: 7,
      total: 8,
      path: 0,
      pointer: 9,
      selection: 10,
      onExpandSection: 1
    });
  }
}
const _B = bB;
function yB(t) {
  let e, n, i, r, o;
  return n = new Ct({ props: { data: Ui } }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-context-menu-pointer svelte-1yzl4st"), p(e, "title", Ap), de(e, "jse-selected", t[0]);
    },
    m(s, l) {
      B(s, e, l), re(n, e, null), i = !0, r || (o = X(e, "click", t[1]), r = !0);
    },
    p(s, [l]) {
      (!i || l & 1) && de(e, "jse-selected", s[0]);
    },
    i(s) {
      i || (C(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), oe(n), r = !1, o();
    }
  };
}
function wB(t, e, n) {
  let { selected: i } = e, { onContextMenu: r } = e;
  function o(s) {
    let l = s.target;
    for (; l && l.nodeName !== "BUTTON"; )
      l = l.parentNode;
    l && r({
      anchor: l,
      left: 0,
      top: 0,
      width: so,
      height: oo,
      offsetTop: 2,
      offsetLeft: 0,
      showTip: !0
    });
  }
  return t.$$set = (s) => {
    "selected" in s && n(0, i = s.selected), "onContextMenu" in s && n(2, r = s.onContextMenu);
  }, [i, o, r];
}
class vB extends Be {
  constructor(e) {
    super(), je(this, e, wB, yB, gt, { selected: 0, onContextMenu: 2 });
  }
}
const ns = vB;
function kB(t) {
  let e, n, i, r, o, s, l;
  const a = [MB, SB], f = [];
  function c(u, h) {
    return u[1] ? 0 : 1;
  }
  return n = c(t), i = f[n] = a[n](t), {
    c() {
      e = T("div"), i.c(), p(e, "data-type", "selectable-key"), p(e, "class", r = cn(t[6](t[0])) + " svelte-566egb");
    },
    m(u, h) {
      B(u, e, h), f[n].m(e, null), o = !0, s || (l = X(e, "dblclick", t[5]), s = !0);
    },
    p(u, h) {
      let d = n;
      n = c(u), n === d ? f[n].p(u, h) : (me(), E(f[d], 1, 1, () => {
        f[d] = null;
      }), pe(), i = f[n], i ? i.p(u, h) : (i = f[n] = a[n](u), i.c()), C(i, 1), i.m(e, null)), (!o || h & 1 && r !== (r = cn(u[6](u[0])) + " svelte-566egb")) && p(e, "class", r);
    },
    i(u) {
      o || (C(i), o = !0);
    },
    o(u) {
      E(i), o = !1;
    },
    d(u) {
      u && j(e), f[n].d(), s = !1, l();
    }
  };
}
function CB(t) {
  let e, n;
  return e = new rC({
    props: {
      value: t[2].normalization.escapeValue(t[0]),
      shortText: !0,
      onChange: t[7],
      onCancel: t[8],
      onFind: t[2].onFind
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 5 && (o.value = i[2].normalization.escapeValue(i[0])), r & 4 && (o.onFind = i[2].onFind), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function SB(t) {
  let e = Rs(t[2].normalization.escapeValue(t[0])) + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r & 5 && e !== (e = Rs(i[2].normalization.escapeValue(i[0])) + "") && Te(n, e);
    },
    i: fe,
    o: fe,
    d(i) {
      i && j(n);
    }
  };
}
function MB(t) {
  let e, n;
  return e = new fC({
    props: {
      text: t[2].normalization.escapeValue(t[0]),
      searchResultItems: t[1]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 5 && (o.text = i[2].normalization.escapeValue(i[0])), r & 2 && (o.searchResultItems = i[1]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function C2(t) {
  let e, n;
  return e = new ns({
    props: {
      selected: !0,
      onContextMenu: t[2].onContextMenu
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 4 && (o.onContextMenu = i[2].onContextMenu), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function AB(t) {
  let e, n, i, r, o;
  const s = [CB, kB], l = [];
  function a(c, u) {
    return c[4] ? 0 : 1;
  }
  e = a(t), n = l[e] = s[e](t);
  let f = !t[2].readOnly && t[3] && !t[4] && C2(t);
  return {
    c() {
      n.c(), i = q(), f && f.c(), r = Ze();
    },
    m(c, u) {
      l[e].m(c, u), B(c, i, u), f && f.m(c, u), B(c, r, u), o = !0;
    },
    p(c, [u]) {
      let h = e;
      e = a(c), e === h ? l[e].p(c, u) : (me(), E(l[h], 1, 1, () => {
        l[h] = null;
      }), pe(), n = l[e], n ? n.p(c, u) : (n = l[e] = s[e](c), n.c()), C(n, 1), n.m(i.parentNode, i)), !c[2].readOnly && c[3] && !c[4] ? f ? (f.p(c, u), u & 28 && C(f, 1)) : (f = C2(c), f.c(), C(f, 1), f.m(r.parentNode, r)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe());
    },
    i(c) {
      o || (C(n), C(f), o = !0);
    },
    o(c) {
      E(n), E(f), o = !1;
    },
    d(c) {
      l[e].d(c), c && j(i), f && f.d(c), c && j(r);
    }
  };
}
function OB(t, e, n) {
  let i, r, { path: o } = e, { pointer: s } = e, { key: l } = e, { selection: a } = e, { searchResultItems: f } = e, { onUpdateKey: c } = e, { context: u } = e;
  function h(_) {
    !r && !u.readOnly && (_.preventDefault(), u.onSelect(Gi(o, !0)));
  }
  function d(_) {
    return Kr("jse-key", { "jse-empty": _ === "" });
  }
  function m(_, b) {
    const w = c(l, u.normalization.unescapeValue(_)), v = kt(o).concat(w);
    u.onSelect(b === ks.NEXT_INSIDE ? Et(v, !1) : Gi(v, !1)), b !== ks.SELF && u.focus();
  }
  function g() {
    u.onSelect(Gi(o, !1)), u.focus();
  }
  return t.$$set = (_) => {
    "path" in _ && n(9, o = _.path), "pointer" in _ && n(10, s = _.pointer), "key" in _ && n(0, l = _.key), "selection" in _ && n(11, a = _.selection), "searchResultItems" in _ && n(1, f = _.searchResultItems), "onUpdateKey" in _ && n(12, c = _.onUpdateKey), "context" in _ && n(2, u = _.context);
  }, t.$$.update = () => {
    t.$$.dirty & 3072 && n(3, i = a ? a.pointersMap[s] === !0 && kn(a) : void 0), t.$$.dirty & 2056 && n(4, r = i && Uo(a));
  }, [
    l,
    f,
    u,
    i,
    r,
    h,
    d,
    m,
    g,
    o,
    s,
    a,
    c
  ];
}
class TB extends Be {
  constructor(e) {
    super(), je(this, e, OB, AB, gt, {
      path: 9,
      pointer: 10,
      key: 0,
      selection: 11,
      searchResultItems: 1,
      onUpdateKey: 12,
      context: 2
    });
  }
}
const EB = TB;
function S2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function M2(t) {
  let e, n, i;
  const r = [t[8].props];
  var o = t[8].component;
  function s(l) {
    let a = {};
    for (let f = 0; f < r.length; f += 1)
      a = $o(a, r[f]);
    return { props: a };
  }
  return o && (e = Ur(o, s())), {
    c() {
      e && se(e.$$.fragment), n = Ze();
    },
    m(l, a) {
      e && re(e, l, a), B(l, n, a), i = !0;
    },
    p(l, a) {
      const f = a & 1 ? xs(r, [Qu(l[8].props)]) : {};
      if (o !== (o = l[8].component)) {
        if (e) {
          me();
          const c = e;
          E(c.$$.fragment, 1, 0, () => {
            oe(c, 1);
          }), pe();
        }
        o ? (e = Ur(o, s()), se(e.$$.fragment), C(e.$$.fragment, 1), re(e, n.parentNode, n)) : e = null;
      } else
        o && e.$set(f);
    },
    i(l) {
      i || (e && C(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && E(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && j(n), e && oe(e, l);
    }
  };
}
function PB(t) {
  let e, n, i = t[0], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = M2(S2(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, [l]) {
      if (l & 1) {
        i = s[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = S2(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = M2(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function RB(t, e, n) {
  let i, r, { path: o } = e, { value: s } = e, { context: l } = e, { enforceString: a } = e, { selection: f } = e, { searchResultItems: c } = e;
  return t.$$set = (u) => {
    "path" in u && n(1, o = u.path), "value" in u && n(2, s = u.value), "context" in u && n(3, l = u.context), "enforceString" in u && n(4, a = u.enforceString), "selection" in u && n(5, f = u.selection), "searchResultItems" in u && n(6, c = u.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && vt(f) && Uo(f)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: o,
      value: s,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: f,
      searchResultItems: c,
      onPatch: l.onPatch,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    i
  ];
}
let IB = class extends Be {
  constructor(e) {
    super(), je(this, e, RB, PB, gt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
};
const NB = IB, Kn = {
  selecting: !1,
  selectionAnchor: null,
  selectionAnchorType: null,
  selectionFocus: null,
  dragging: !1
};
function pd({ json: t, documentState: e, deltaY: n, items: i }) {
  const r = e.selection, o = n < 0 ? DB({ json: t, selection: r, deltaY: n, items: i }) : jB({ json: t, selection: r, deltaY: n, items: i });
  if (!o || o.offset === 0)
    return {
      operations: void 0,
      updatedSelection: void 0,
      offset: 0
    };
  const s = vI(t, e.selection, o), l = kt(Sl(r)), a = Le(t, l);
  if (Array.isArray(a)) {
    const f = BB({
      items: i,
      json: t,
      selection: r,
      offset: o.offset
    });
    return {
      operations: s,
      updatedSelection: f,
      offset: o.offset
    };
  } else
    return {
      operations: s,
      updatedSelection: void 0,
      offset: o.offset
    };
}
function DB({ items: t, selection: e, deltaY: n }) {
  const i = Sl(e), r = t.findIndex((c) => St(c.path, i)), o = () => {
    var c;
    return (c = t[s - 1]) == null ? void 0 : c.height;
  };
  let s = r, l = 0;
  for (; o() !== void 0 && Math.abs(n) > l + o() / 2; )
    l += o(), s -= 1;
  const a = t[s].path, f = s - r;
  return s !== r && t[s] !== void 0 ? { beforePath: a, offset: f } : void 0;
}
function jB({ json: t, items: e, selection: n, deltaY: i }) {
  var g;
  const r = ph(n), o = e.findIndex((_) => St(_.path, r));
  let s = 0, l = o;
  const a = () => {
    var _;
    return (_ = e[l + 1]) == null ? void 0 : _.height;
  };
  for (; a() !== void 0 && Math.abs(i) > s + a() / 2; )
    s += a(), l += 1;
  const f = kt(r), c = Le(t, f), h = Array.isArray(c) ? l : l + 1, d = (g = e[h]) == null ? void 0 : g.path, m = l - o;
  return d ? { beforePath: d, offset: m } : { append: !0, offset: m };
}
function BB({ items: t, json: e, selection: n, offset: i }) {
  var c, u;
  const r = Sl(n), o = ph(n), s = t.findIndex((h) => St(h.path, r)), l = t.findIndex((h) => St(h.path, o)), a = (c = t[s + i]) == null ? void 0 : c.path, f = (u = t[l + i]) == null ? void 0 : u.path;
  return vn(e, a, f);
}
function LB(t, e) {
  if (!t)
    return;
  const n = {};
  for (const i of Object.keys(t))
    e(i, t[i]) && (n[i] = t[i]);
  return Object.keys(n).length > 0 ? n : void 0;
}
function Mr(t, e) {
  return LB(t, (n) => _l(n, e));
}
function xB(t) {
  let e, n, i, r, o, s;
  return n = new Ct({ props: { data: Fs } }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-validation-error svelte-pz3g1j");
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), r = !0, o || (s = [
        X(e, "click", function() {
          Gn(t[0]) && t[0].apply(this, arguments);
        }),
        Ai(i = $p.call(null, e, {
          text: t[1],
          ...t[2]
        }))
      ], o = !0);
    },
    p(l, [a]) {
      t = l, i && Gn(i.update) && a & 2 && i.update.call(null, {
        text: t[1],
        ...t[2]
      });
    },
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n), o = !1, et(s);
    }
  };
}
function zB(t, e, n) {
  let i;
  const r = Xn("absolute-popup");
  let { validationError: o } = e, { onExpand: s } = e;
  return t.$$set = (l) => {
    "validationError" in l && n(3, o = l.validationError), "onExpand" in l && n(0, s = l.onExpand);
  }, t.$$.update = () => {
    t.$$.dirty & 8 && n(1, i = o.isChildError ? "Contains invalid data" : o.message);
  }, [s, i, r, o];
}
class VB extends Be {
  constructor(e) {
    super(), je(this, e, zB, xB, It, { validationError: 3, onExpand: 0 });
  }
}
const ql = VB;
const FB = (t) => ({}), A2 = (t) => ({});
function O2(t, e, n) {
  const i = t.slice();
  return i[53] = e[n], i;
}
const HB = (t) => ({}), T2 = (t) => ({});
function E2(t, e, n) {
  const i = t.slice();
  return i[47] = e[n], i[49] = n, i;
}
function P2(t, e, n) {
  const i = t.slice();
  return i[50] = e[n], i;
}
const WB = (t) => ({}), R2 = (t) => ({});
function UB(t) {
  let e, n, i, r, o, s, l = !t[8].readOnly && t[16] && t[7] && (vt(t[7]) || Pt(t[7])) && !t[7].edit && St(t[7].focusPath, t[1]), a, f, c;
  const u = t[34].identifier, h = An(u, t, t[35], A2);
  let d = !t[17] && I2();
  o = new NB({
    props: {
      path: t[1],
      value: t[0],
      enforceString: t[13],
      selection: t[16] ? t[7] : void 0,
      searchResultItems: tb(t[6], t[9]),
      context: t[8]
    }
  });
  let m = l && N2(t), g = t[15] && D2(t), _ = !t[17] && j2(t);
  return {
    c() {
      e = T("div"), n = T("div"), h && h.c(), i = q(), d && d.c(), r = q(), se(o.$$.fragment), s = q(), m && m.c(), a = q(), g && g.c(), f = q(), _ && _.c(), p(n, "class", "jse-contents svelte-lts9i5"), p(e, "class", "jse-contents-outer svelte-lts9i5"), p(e, "style", t[18]);
    },
    m(b, w) {
      B(b, e, w), y(e, n), h && h.m(n, null), y(n, i), d && d.m(n, null), y(n, r), re(o, n, null), y(n, s), m && m.m(n, null), y(e, a), g && g.m(e, null), y(e, f), _ && _.m(e, null), c = !0;
    },
    p(b, w) {
      h && h.p && (!c || w[1] & 16) && Tn(
        h,
        u,
        b,
        b[35],
        c ? On(u, b[35], w, FB) : En(b[35]),
        A2
      ), b[17] ? d && (d.d(1), d = null) : d || (d = I2(), d.c(), d.m(n, r));
      const v = {};
      w[0] & 2 && (v.path = b[1]), w[0] & 1 && (v.value = b[0]), w[0] & 8192 && (v.enforceString = b[13]), w[0] & 65664 && (v.selection = b[16] ? b[7] : void 0), w[0] & 576 && (v.searchResultItems = tb(b[6], b[9])), w[0] & 256 && (v.context = b[8]), o.$set(v), w[0] & 65922 && (l = !b[8].readOnly && b[16] && b[7] && (vt(b[7]) || Pt(b[7])) && !b[7].edit && St(b[7].focusPath, b[1])), l ? m ? (m.p(b, w), w[0] & 65922 && C(m, 1)) : (m = N2(b), m.c(), C(m, 1), m.m(n, null)) : m && (me(), E(m, 1, 1, () => {
        m = null;
      }), pe()), b[15] ? g ? (g.p(b, w), w[0] & 32768 && C(g, 1)) : (g = D2(b), g.c(), C(g, 1), g.m(e, f)) : g && (me(), E(g, 1, 1, () => {
        g = null;
      }), pe()), b[17] ? _ && (_.d(1), _ = null) : _ ? _.p(b, w) : (_ = j2(b), _.c(), _.m(e, null)), (!c || w[0] & 262144) && p(e, "style", b[18]);
    },
    i(b) {
      c || (C(h, b), C(o.$$.fragment, b), C(m), C(g), c = !0);
    },
    o(b) {
      E(h, b), E(o.$$.fragment, b), E(m), E(g), c = !1;
    },
    d(b) {
      b && j(e), h && h.d(b), d && d.d(), oe(o), m && m.d(), g && g.d(), _ && _.d();
    }
  };
}
function qB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = !t[8].readOnly && t[16] && t[7] && (vt(t[7]) || Pt(t[7])) && !t[7].edit && St(t[7].focusPath, t[1]), d, m, g, _, b, w, v;
  const M = [GB, KB], S = [];
  function R(P, K) {
    return P[12] ? 0 : 1;
  }
  r = R(t), o = S[r] = M[r](t);
  const k = t[34].identifier, I = An(k, t, t[35], T2);
  let L = !t[17] && B2();
  function V(P, K) {
    return P[12] ? QB : XB;
  }
  let N = V(t), W = N(t), U = h && L2(t), O = t[15] && (!t[12] || !t[15].isChildError) && x2(t);
  function x(P, K) {
    if (P[12])
      return ZB;
    if (!P[17])
      return YB;
  }
  let A = x(t), H = A && A(t), D = t[12] && z2(t);
  return {
    c() {
      e = T("div"), n = T("div"), i = T("button"), o.c(), s = q(), I && I.c(), l = q(), L && L.c(), a = q(), f = T("div"), c = T("div"), W.c(), u = q(), U && U.c(), d = q(), O && O.c(), m = q(), H && H.c(), g = q(), D && D.c(), _ = Ze(), p(i, "type", "button"), p(i, "class", "jse-expand svelte-lts9i5"), p(i, "title", "Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"), p(c, "class", "jse-meta-inner svelte-lts9i5"), p(f, "class", "jse-meta svelte-lts9i5"), p(f, "data-type", "selectable-value"), p(n, "class", "jse-header svelte-lts9i5"), p(e, "class", "jse-header-outer svelte-lts9i5"), p(e, "style", t[18]);
    },
    m(P, K) {
      B(P, e, K), y(e, n), y(n, i), S[r].m(i, null), y(n, s), I && I.m(n, null), y(n, l), L && L.m(n, null), y(n, a), y(n, f), y(f, c), W.m(c, null), y(n, u), U && U.m(n, null), y(e, d), O && O.m(e, null), y(e, m), H && H.m(e, null), B(P, g, K), D && D.m(P, K), B(P, _, K), b = !0, w || (v = X(i, "click", t[21]), w = !0);
    },
    p(P, K) {
      let ne = r;
      r = R(P), r === ne ? S[r].p(P, K) : (me(), E(S[ne], 1, 1, () => {
        S[ne] = null;
      }), pe(), o = S[r], o ? o.p(P, K) : (o = S[r] = M[r](P), o.c()), C(o, 1), o.m(i, null)), I && I.p && (!b || K[1] & 16) && Tn(
        I,
        k,
        P,
        P[35],
        b ? On(k, P[35], K, HB) : En(P[35]),
        T2
      ), P[17] ? L && (L.d(1), L = null) : L || (L = B2(), L.c(), L.m(n, a)), N === (N = V(P)) && W ? W.p(P, K) : (W.d(1), W = N(P), W && (W.c(), W.m(c, null))), K[0] & 65922 && (h = !P[8].readOnly && P[16] && P[7] && (vt(P[7]) || Pt(P[7])) && !P[7].edit && St(P[7].focusPath, P[1])), h ? U ? (U.p(P, K), K[0] & 65922 && C(U, 1)) : (U = L2(P), U.c(), C(U, 1), U.m(n, null)) : U && (me(), E(U, 1, 1, () => {
        U = null;
      }), pe()), P[15] && (!P[12] || !P[15].isChildError) ? O ? (O.p(P, K), K[0] & 36864 && C(O, 1)) : (O = x2(P), O.c(), C(O, 1), O.m(e, m)) : O && (me(), E(O, 1, 1, () => {
        O = null;
      }), pe()), A === (A = x(P)) && H ? H.p(P, K) : (H && H.d(1), H = A && A(P), H && (H.c(), H.m(e, null))), (!b || K[0] & 262144) && p(e, "style", P[18]), P[12] ? D ? (D.p(P, K), K[0] & 4096 && C(D, 1)) : (D = z2(P), D.c(), C(D, 1), D.m(_.parentNode, _)) : D && (me(), E(D, 1, 1, () => {
        D = null;
      }), pe());
    },
    i(P) {
      b || (C(o), C(I, P), C(U), C(O), C(D), b = !0);
    },
    o(P) {
      E(o), E(I, P), E(U), E(O), E(D), b = !1;
    },
    d(P) {
      P && j(e), S[r].d(), I && I.d(P), L && L.d(), W.d(), U && U.d(), O && O.d(), H && H.d(), P && j(g), D && D.d(P), P && j(_), w = !1, v();
    }
  };
}
function JB(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h = !t[8].readOnly && t[16] && t[7] && (vt(t[7]) || Pt(t[7])) && !t[7].edit && St(t[7].focusPath, t[1]), d, m, g, _, b, w, v;
  const M = [tL, eL], S = [];
  function R(P, K) {
    return P[12] ? 0 : 1;
  }
  r = R(t), o = S[r] = M[r](t);
  const k = t[34].identifier, I = An(k, t, t[35], R2);
  let L = !t[17] && W2();
  function V(P, K) {
    return P[12] ? iL : nL;
  }
  let N = V(t), W = N(t), U = h && U2(t), O = t[15] && (!t[12] || !t[15].isChildError) && q2(t);
  function x(P, K) {
    return P[12] ? oL : rL;
  }
  let A = x(t), H = A(t), D = t[12] && J2(t);
  return {
    c() {
      e = T("div"), n = T("div"), i = T("button"), o.c(), s = q(), I && I.c(), l = q(), L && L.c(), a = q(), f = T("div"), c = T("div"), W.c(), u = q(), U && U.c(), d = q(), O && O.c(), m = q(), H.c(), g = q(), D && D.c(), _ = Ze(), p(i, "type", "button"), p(i, "class", "jse-expand svelte-lts9i5"), p(i, "title", "Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"), p(c, "class", "jse-meta-inner svelte-lts9i5"), p(c, "data-type", "selectable-value"), p(f, "class", "jse-meta svelte-lts9i5"), p(n, "class", "jse-header svelte-lts9i5"), p(e, "class", "jse-header-outer svelte-lts9i5"), p(e, "style", t[18]);
    },
    m(P, K) {
      B(P, e, K), y(e, n), y(n, i), S[r].m(i, null), y(n, s), I && I.m(n, null), y(n, l), L && L.m(n, null), y(n, a), y(n, f), y(f, c), W.m(c, null), y(n, u), U && U.m(n, null), y(e, d), O && O.m(e, null), y(e, m), H.m(e, null), B(P, g, K), D && D.m(P, K), B(P, _, K), b = !0, w || (v = X(i, "click", t[21]), w = !0);
    },
    p(P, K) {
      let ne = r;
      r = R(P), r === ne ? S[r].p(P, K) : (me(), E(S[ne], 1, 1, () => {
        S[ne] = null;
      }), pe(), o = S[r], o ? o.p(P, K) : (o = S[r] = M[r](P), o.c()), C(o, 1), o.m(i, null)), I && I.p && (!b || K[1] & 16) && Tn(
        I,
        k,
        P,
        P[35],
        b ? On(k, P[35], K, WB) : En(P[35]),
        R2
      ), P[17] ? L && (L.d(1), L = null) : L || (L = W2(), L.c(), L.m(n, a)), N === (N = V(P)) && W ? W.p(P, K) : (W.d(1), W = N(P), W && (W.c(), W.m(c, null))), K[0] & 65922 && (h = !P[8].readOnly && P[16] && P[7] && (vt(P[7]) || Pt(P[7])) && !P[7].edit && St(P[7].focusPath, P[1])), h ? U ? (U.p(P, K), K[0] & 65922 && C(U, 1)) : (U = U2(P), U.c(), C(U, 1), U.m(n, null)) : U && (me(), E(U, 1, 1, () => {
        U = null;
      }), pe()), P[15] && (!P[12] || !P[15].isChildError) ? O ? (O.p(P, K), K[0] & 36864 && C(O, 1)) : (O = q2(P), O.c(), C(O, 1), O.m(e, m)) : O && (me(), E(O, 1, 1, () => {
        O = null;
      }), pe()), A === (A = x(P)) && H ? H.p(P, K) : (H.d(1), H = A(P), H && (H.c(), H.m(e, null))), (!b || K[0] & 262144) && p(e, "style", P[18]), P[12] ? D ? (D.p(P, K), K[0] & 4096 && C(D, 1)) : (D = J2(P), D.c(), C(D, 1), D.m(_.parentNode, _)) : D && (me(), E(D, 1, 1, () => {
        D = null;
      }), pe());
    },
    i(P) {
      b || (C(o), C(I, P), C(U), C(O), C(D), b = !0);
    },
    o(P) {
      E(o), E(I, P), E(U), E(O), E(D), b = !1;
    },
    d(P) {
      P && j(e), S[r].d(), I && I.d(P), L && L.d(), W.d(), U && U.d(), O && O.d(), H.d(), P && j(g), D && D.d(P), P && j(_), w = !1, v();
    }
  };
}
function I2(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = ":", p(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function N2(t) {
  let e, n, i;
  return n = new ns({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function D2(t) {
  let e, n;
  return e = new ql({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function j2(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function KB(t) {
  let e, n;
  return e = new Ct({ props: { data: Ro } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function GB(t) {
  let e, n;
  return e = new Ct({ props: { data: Ui } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function B2(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = ":", p(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function XB(t) {
  let e, n, i, r = Object.keys(t[0]).length + "", o, s, l = Object.keys(t[0]).length === 1 ? "prop" : "props", a, f, c, u, h;
  return {
    c() {
      e = T("div"), e.textContent = "{", n = q(), i = T("button"), o = le(r), s = q(), a = le(l), f = q(), c = T("div"), c.textContent = "}", p(e, "class", "jse-bracket svelte-lts9i5"), p(i, "type", "button"), p(i, "class", "jse-tag svelte-lts9i5"), p(c, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, m) {
      B(d, e, m), B(d, n, m), B(d, i, m), y(i, o), y(i, s), y(i, a), B(d, f, m), B(d, c, m), u || (h = X(i, "click", t[22]), u = !0);
    },
    p(d, m) {
      m[0] & 1 && r !== (r = Object.keys(d[0]).length + "") && Te(o, r), m[0] & 1 && l !== (l = Object.keys(d[0]).length === 1 ? "prop" : "props") && Te(a, l);
    },
    d(d) {
      d && j(e), d && j(n), d && j(i), d && j(f), d && j(c), u = !1, h();
    }
  };
}
function QB(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = "{", p(e, "class", "jse-bracket jse-expanded svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function L2(t) {
  let e, n, i;
  return n = new ns({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function x2(t) {
  let e, n;
  return e = new ql({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function YB(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function ZB(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), p(e, "data-type", "insert-selection-area-inside");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[29]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function z2(t) {
  let e, n = !t[8].readOnly && (t[10] === co || t[16] && Dn(t[7])), i, r, o, s, l, a, f = n && V2(t), c = t[19](t[1], t[0], t[2], t[3], t[4], t[5], t[6], t[7], t[11]), u = [];
  for (let m = 0; m < c.length; m += 1)
    u[m] = F2(O2(t, c, m));
  const h = (m) => E(u[m], 1, 1, () => {
    u[m] = null;
  });
  let d = !t[17] && H2(t);
  return {
    c() {
      e = T("div"), f && f.c(), i = q();
      for (let m = 0; m < u.length; m += 1)
        u[m].c();
      r = q(), o = T("div"), s = T("div"), s.innerHTML = '<div class="jse-bracket svelte-lts9i5">}</div>', l = q(), d && d.c(), p(e, "class", "jse-props svelte-lts9i5"), p(s, "data-type", "selectable-value"), p(s, "class", "jse-footer svelte-lts9i5"), p(o, "class", "jse-footer-outer svelte-lts9i5"), p(o, "style", t[18]);
    },
    m(m, g) {
      B(m, e, g), f && f.m(e, null), y(e, i);
      for (let _ = 0; _ < u.length; _ += 1)
        u[_].m(e, null);
      B(m, r, g), B(m, o, g), y(o, s), y(o, l), d && d.m(o, null), a = !0;
    },
    p(m, g) {
      if (g[0] & 66944 && (n = !m[8].readOnly && (m[10] === co || m[16] && Dn(m[7]))), n ? f ? (f.p(m, g), g[0] & 66944 && C(f, 1)) : (f = V2(m), f.c(), C(f, 1), f.m(e, i)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe()), g[0] & 76024319) {
        c = m[19](m[1], m[0], m[2], m[3], m[4], m[5], m[6], m[7], m[11]);
        let _;
        for (_ = 0; _ < c.length; _ += 1) {
          const b = O2(m, c, _);
          u[_] ? (u[_].p(b, g), C(u[_], 1)) : (u[_] = F2(b), u[_].c(), C(u[_], 1), u[_].m(e, null));
        }
        for (me(), _ = c.length; _ < u.length; _ += 1)
          h(_);
        pe();
      }
      m[17] ? d && (d.d(1), d = null) : d ? d.p(m, g) : (d = H2(m), d.c(), d.m(o, null)), (!a || g[0] & 262144) && p(o, "style", m[18]);
    },
    i(m) {
      if (!a) {
        C(f);
        for (let g = 0; g < c.length; g += 1)
          C(u[g]);
        a = !0;
      }
    },
    o(m) {
      E(f), u = u.filter(Boolean);
      for (let g = 0; g < u.length; g += 1)
        E(u[g]);
      a = !1;
    },
    d(m) {
      m && j(e), f && f.d(), zt(u, m), m && j(r), m && j(o), d && d.d();
    }
  };
}
function V2(t) {
  let e, n, i, r;
  return n = new ns({
    props: {
      selected: t[16] && Dn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), p(e, "data-type", "insert-selection-area-inside"), p(e, "style", i = Va(t[1].length + 1)), p(e, "title", Mp), de(e, "jse-hovered", t[10] === co), de(e, "jse-selected", t[16] && Dn(t[7]));
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 65664 && (l.selected = o[16] && Dn(o[7])), n.$set(l), (!r || s[0] & 2 && i !== (i = Va(o[1].length + 1))) && p(e, "style", i), (!r || s[0] & 1024) && de(e, "jse-hovered", o[10] === co), (!r || s[0] & 65664) && de(e, "jse-selected", o[16] && Dn(o[7]));
    },
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function $B(t) {
  let e, n, i, r;
  return n = new EB({
    props: {
      path: t[53].path,
      pointer: t[53].pointer,
      key: t[53].key,
      selection: t[53].selection,
      searchResultItems: t[53].keySearchResultItemsMap,
      context: t[8],
      onUpdateKey: t[23]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), p(e, "slot", "identifier"), p(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), y(e, i), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 2303 && (l.path = o[53].path), s[0] & 2303 && (l.pointer = o[53].pointer), s[0] & 2303 && (l.key = o[53].key), s[0] & 2303 && (l.selection = o[53].selection), s[0] & 2303 && (l.searchResultItems = o[53].keySearchResultItemsMap), s[0] & 256 && (l.context = o[8]), n.$set(l);
    },
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function F2(t) {
  let e, n;
  return e = new hg({
    props: {
      value: t[53].value,
      path: t[53].path,
      expandedMap: t[53].expandedMap,
      enforceStringMap: t[53].enforceStringMap,
      visibleSectionsMap: t[53].visibleSectionsMap,
      validationErrorsMap: t[53].validationErrorsMap,
      searchResultItemsMap: t[53].valueSearchResultItemsMap,
      selection: t[53].selection,
      context: t[8],
      onDragSelectionStart: t[26],
      $$slots: { identifier: [$B] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2303 && (o.value = i[53].value), r[0] & 2303 && (o.path = i[53].path), r[0] & 2303 && (o.expandedMap = i[53].expandedMap), r[0] & 2303 && (o.enforceStringMap = i[53].enforceStringMap), r[0] & 2303 && (o.visibleSectionsMap = i[53].visibleSectionsMap), r[0] & 2303 && (o.validationErrorsMap = i[53].validationErrorsMap), r[0] & 2303 && (o.searchResultItemsMap = i[53].valueSearchResultItemsMap), r[0] & 2303 && (o.selection = i[53].selection), r[0] & 256 && (o.context = i[8]), r[0] & 2559 | r[1] & 16 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function H2(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function eL(t) {
  let e, n;
  return e = new Ct({ props: { data: Ro } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function tL(t) {
  let e, n;
  return e = new Ct({ props: { data: Ui } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function W2(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = ":", p(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function nL(t) {
  let e, n, i, r = t[0].length + "", o, s, l = t[0].length === 1 ? "item" : "items", a, f, c, u, h;
  return {
    c() {
      e = T("div"), e.textContent = "[", n = q(), i = T("button"), o = le(r), s = q(), a = le(l), f = q(), c = T("div"), c.textContent = "]", p(e, "class", "jse-bracket svelte-lts9i5"), p(i, "type", "button"), p(i, "class", "jse-tag svelte-lts9i5"), p(c, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, m) {
      B(d, e, m), B(d, n, m), B(d, i, m), y(i, o), y(i, s), y(i, a), B(d, f, m), B(d, c, m), u || (h = X(i, "click", t[22]), u = !0);
    },
    p(d, m) {
      m[0] & 1 && r !== (r = d[0].length + "") && Te(o, r), m[0] & 1 && l !== (l = d[0].length === 1 ? "item" : "items") && Te(a, l);
    },
    d(d) {
      d && j(e), d && j(n), d && j(i), d && j(f), d && j(c), u = !1, h();
    }
  };
}
function iL(t) {
  let e, n, i, r = t[0].length + "", o, s, l = t[0].length === 1 ? "item" : "items", a, f;
  return {
    c() {
      e = T("div"), e.textContent = "[", n = q(), i = T("span"), o = le(r), s = q(), a = le(l), f = le(`
               `), p(e, "class", "jse-bracket svelte-lts9i5"), p(i, "class", "jse-tag jse-expanded svelte-lts9i5");
    },
    m(c, u) {
      B(c, e, u), B(c, n, u), B(c, i, u), y(i, o), y(i, s), y(i, a), B(c, f, u);
    },
    p(c, u) {
      u[0] & 1 && r !== (r = c[0].length + "") && Te(o, r), u[0] & 1 && l !== (l = c[0].length === 1 ? "item" : "items") && Te(a, l);
    },
    d(c) {
      c && j(e), c && j(n), c && j(i), c && j(f);
    }
  };
}
function U2(t) {
  let e, n, i;
  return n = new ns({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 256 && (s.onContextMenu = r[8].onContextMenu), n.$set(s);
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function q2(t) {
  let e, n;
  return e = new ql({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 32768 && (o.validationError = i[15]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function rL(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function oL(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), p(e, "data-type", "insert-selection-area-inside");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[29]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function J2(t) {
  let e, n = !t[8].readOnly && (t[10] === co || t[16] && Dn(t[7])), i, r = [], o = /* @__PURE__ */ new Map(), s, l, a, f, c, u = n && K2(t), h = t[14] || Os;
  const d = (g) => g[49];
  for (let g = 0; g < h.length; g += 1) {
    let _ = E2(t, h, g), b = d(_);
    o.set(b, r[g] = Q2(b, _));
  }
  let m = !t[17] && Y2(t);
  return {
    c() {
      e = T("div"), u && u.c(), i = q();
      for (let g = 0; g < r.length; g += 1)
        r[g].c();
      s = q(), l = T("div"), a = T("div"), a.innerHTML = '<span class="jse-bracket svelte-lts9i5">]</span>', f = q(), m && m.c(), p(e, "class", "jse-items svelte-lts9i5"), p(a, "data-type", "selectable-value"), p(a, "class", "jse-footer svelte-lts9i5"), p(l, "class", "jse-footer-outer svelte-lts9i5"), p(l, "style", t[18]);
    },
    m(g, _) {
      B(g, e, _), u && u.m(e, null), y(e, i);
      for (let b = 0; b < r.length; b += 1)
        r[b].m(e, null);
      B(g, s, _), B(g, l, _), y(l, a), y(l, f), m && m.m(l, null), c = !0;
    },
    p(g, _) {
      _[0] & 66944 && (n = !g[8].readOnly && (g[10] === co || g[16] && Dn(g[7]))), n ? u ? (u.p(g, _), _[0] & 66944 && C(u, 1)) : (u = K2(g), u.c(), C(u, 1), u.m(e, i)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), _[0] & 68176895 && (h = g[14] || Os, me(), r = fo(r, _, d, 1, g, h, o, e, Xu, Q2, null, E2), pe()), g[17] ? m && (m.d(1), m = null) : m ? m.p(g, _) : (m = Y2(g), m.c(), m.m(l, null)), (!c || _[0] & 262144) && p(l, "style", g[18]);
    },
    i(g) {
      if (!c) {
        C(u);
        for (let _ = 0; _ < h.length; _ += 1)
          C(r[_]);
        c = !0;
      }
    },
    o(g) {
      E(u);
      for (let _ = 0; _ < r.length; _ += 1)
        E(r[_]);
      c = !1;
    },
    d(g) {
      g && j(e), u && u.d();
      for (let _ = 0; _ < r.length; _ += 1)
        r[_].d();
      g && j(s), g && j(l), m && m.d();
    }
  };
}
function K2(t) {
  let e, n, i, r;
  return n = new ns({
    props: {
      selected: t[16] && Dn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), p(e, "data-type", "insert-selection-area-inside"), p(e, "style", i = Va(t[1].length + 1)), p(e, "title", Mp), de(e, "jse-hovered", t[10] === co), de(e, "jse-selected", t[16] && Dn(t[7]));
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 65664 && (l.selected = o[16] && Dn(o[7])), n.$set(l), (!r || s[0] & 2 && i !== (i = Va(o[1].length + 1))) && p(e, "style", i), (!r || s[0] & 1024) && de(e, "jse-hovered", o[10] === co), (!r || s[0] & 65664) && de(e, "jse-selected", o[16] && Dn(o[7]));
    },
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function sL(t) {
  let e, n, i = t[50].index + "", r;
  return {
    c() {
      e = T("div"), n = T("div"), r = le(i), p(n, "class", "jse-index svelte-lts9i5"), p(e, "slot", "identifier"), p(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(o, s) {
      B(o, e, s), y(e, n), y(n, r);
    },
    p(o, s) {
      s[0] & 18687 && i !== (i = o[50].index + "") && Te(r, i);
    },
    d(o) {
      o && j(e);
    }
  };
}
function G2(t, e) {
  let n, i, r;
  return i = new hg({
    props: {
      value: e[50].value,
      path: e[50].path,
      expandedMap: e[50].expandedMap,
      enforceStringMap: e[50].enforceStringMap,
      visibleSectionsMap: e[50].visibleSectionsMap,
      validationErrorsMap: e[50].validationErrorsMap,
      searchResultItemsMap: e[50].searchResultItemsMap,
      selection: e[50].selection,
      context: e[8],
      onDragSelectionStart: e[26],
      $$slots: { identifier: [sL] },
      $$scope: { ctx: e }
    }
  }), {
    key: t,
    first: null,
    c() {
      n = Ze(), se(i.$$.fragment), this.first = n;
    },
    m(o, s) {
      B(o, n, s), re(i, o, s), r = !0;
    },
    p(o, s) {
      e = o;
      const l = {};
      s[0] & 18687 && (l.value = e[50].value), s[0] & 18687 && (l.path = e[50].path), s[0] & 18687 && (l.expandedMap = e[50].expandedMap), s[0] & 18687 && (l.enforceStringMap = e[50].enforceStringMap), s[0] & 18687 && (l.visibleSectionsMap = e[50].visibleSectionsMap), s[0] & 18687 && (l.validationErrorsMap = e[50].validationErrorsMap), s[0] & 18687 && (l.searchResultItemsMap = e[50].searchResultItemsMap), s[0] & 18687 && (l.selection = e[50].selection), s[0] & 256 && (l.context = e[8]), s[0] & 18687 | s[1] & 16 && (l.$$scope = { dirty: s, ctx: e }), i.$set(l);
    },
    i(o) {
      r || (C(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(n), oe(i, o);
    }
  };
}
function X2(t) {
  let e, n;
  return e = new _B({
    props: {
      visibleSections: t[14] || Os,
      sectionIndex: t[49],
      total: t[0].length,
      path: t[1],
      pointer: t[9],
      onExpandSection: t[8].onExpandSection,
      selection: t[7]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16384 && (o.visibleSections = i[14] || Os), r[0] & 16384 && (o.sectionIndex = i[49]), r[0] & 1 && (o.total = i[0].length), r[0] & 2 && (o.path = i[1]), r[0] & 512 && (o.pointer = i[9]), r[0] & 256 && (o.onExpandSection = i[8].onExpandSection), r[0] & 128 && (o.selection = i[7]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Q2(t, e) {
  let n, i = [], r = /* @__PURE__ */ new Map(), o, s, l, a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]);
  const f = (u) => u[50].index;
  for (let u = 0; u < a.length; u += 1) {
    let h = P2(e, a, u), d = f(h);
    r.set(d, i[u] = G2(d, h));
  }
  let c = e[47].end < e[0].length && X2(e);
  return {
    key: t,
    first: null,
    c() {
      n = Ze();
      for (let u = 0; u < i.length; u += 1)
        i[u].c();
      o = q(), c && c.c(), s = Ze(), this.first = n;
    },
    m(u, h) {
      B(u, n, h);
      for (let d = 0; d < i.length; d += 1)
        i[d].m(u, h);
      B(u, o, h), c && c.m(u, h), B(u, s, h), l = !0;
    },
    p(u, h) {
      e = u, h[0] & 68176383 && (a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]), me(), i = fo(i, h, f, 1, e, a, r, o.parentNode, Xu, G2, o, P2), pe()), e[47].end < e[0].length ? c ? (c.p(e, h), h[0] & 16385 && C(c, 1)) : (c = X2(e), c.c(), C(c, 1), c.m(s.parentNode, s)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), pe());
    },
    i(u) {
      if (!l) {
        for (let h = 0; h < a.length; h += 1)
          C(i[h]);
        C(c), l = !0;
      }
    },
    o(u) {
      for (let h = 0; h < i.length; h += 1)
        E(i[h]);
      E(c), l = !1;
    },
    d(u) {
      u && j(n);
      for (let h = 0; h < i.length; h += 1)
        i[h].d(u);
      u && j(o), c && c.d(u), u && j(s);
    }
  };
}
function Y2(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), p(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[30]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function Z2(t) {
  let e, n, i;
  return n = new ns({
    props: {
      selected: t[16] && ur(t[7]),
      onContextMenu: t[32]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-insert-area jse-after svelte-lts9i5"), p(e, "data-type", "insert-selection-area-after"), p(e, "style", t[18]), p(e, "title", Mp), de(e, "jse-hovered", t[10] === Oa), de(e, "jse-selected", t[16] && ur(t[7]));
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 65664 && (s.selected = r[16] && ur(r[7])), n.$set(s), (!i || o[0] & 262144) && p(e, "style", r[18]), (!i || o[0] & 1024) && de(e, "jse-hovered", r[10] === Oa), (!i || o[0] & 65664) && de(e, "jse-selected", r[16] && ur(r[7]));
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function lL(t) {
  let e, n, i, r, o, s, l = !t[8].readOnly && (t[10] === Oa || t[16] && ur(t[7])), a, f, c, u, h;
  const d = [JB, qB, UB], m = [];
  function g(b, w) {
    return w[0] & 1 && (n = null), w[0] & 1 && (i = null), n == null && (n = !!Array.isArray(b[0])), n ? 0 : (i == null && (i = !!pn(b[0])), i ? 1 : 2);
  }
  r = g(t, [-1, -1]), o = m[r] = d[r](t);
  let _ = l && Z2(t);
  return {
    c() {
      e = T("div"), o.c(), s = q(), _ && _.c(), p(e, "class", a = cn(Kr("jse-json-node", { "jse-expanded": t[12] }, t[8].onClassName(t[1], t[0]))) + " svelte-lts9i5"), p(e, "data-path", f = Cl(t[1])), de(e, "jse-root", t[17]), de(e, "jse-selected", t[16] && Pt(t[7])), de(e, "jse-selected-key", t[16] && kn(t[7])), de(e, "jse-selected-value", t[16] && vt(t[7])), de(e, "jse-readonly", t[8].readOnly), de(e, "jse-hovered", t[10] === em);
    },
    m(b, w) {
      B(b, e, w), m[r].m(e, null), y(e, s), _ && _.m(e, null), c = !0, u || (h = [
        X(e, "mousedown", t[24]),
        X(e, "mousemove", t[25]),
        X(e, "mouseover", t[27]),
        X(e, "mouseout", t[28]),
        X(e, "focus", void 0),
        X(e, "blur", void 0)
      ], u = !0);
    },
    p(b, w) {
      let v = r;
      r = g(b, w), r === v ? m[r].p(b, w) : (me(), E(m[v], 1, 1, () => {
        m[v] = null;
      }), pe(), o = m[r], o ? o.p(b, w) : (o = m[r] = d[r](b), o.c()), C(o, 1), o.m(e, s)), w[0] & 66944 && (l = !b[8].readOnly && (b[10] === Oa || b[16] && ur(b[7]))), l ? _ ? (_.p(b, w), w[0] & 66944 && C(_, 1)) : (_ = Z2(b), _.c(), C(_, 1), _.m(e, null)) : _ && (me(), E(_, 1, 1, () => {
        _ = null;
      }), pe()), (!c || w[0] & 4355 && a !== (a = cn(Kr("jse-json-node", { "jse-expanded": b[12] }, b[8].onClassName(b[1], b[0]))) + " svelte-lts9i5")) && p(e, "class", a), (!c || w[0] & 2 && f !== (f = Cl(b[1]))) && p(e, "data-path", f), (!c || w[0] & 135427) && de(e, "jse-root", b[17]), (!c || w[0] & 70019) && de(e, "jse-selected", b[16] && Pt(b[7])), (!c || w[0] & 70019) && de(e, "jse-selected-key", b[16] && kn(b[7])), (!c || w[0] & 70019) && de(e, "jse-selected-value", b[16] && vt(b[7])), (!c || w[0] & 4355) && de(e, "jse-readonly", b[8].readOnly), (!c || w[0] & 5379) && de(e, "jse-hovered", b[10] === em);
    },
    i(b) {
      c || (C(o), C(_), c = !0);
    },
    o(b) {
      E(o), E(_), c = !1;
    },
    d(b) {
      b && j(e), m[r].d(), _ && _.d(), u = !1, et(h);
    }
  };
}
function Va(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function aL(t, e, n) {
  let i, r, { $$slots: o = {}, $$scope: s } = e, { value: l } = e, { path: a } = e, { expandedMap: f } = e, { enforceStringMap: c } = e, { visibleSectionsMap: u } = e, { validationErrorsMap: h } = e, { searchResultItemsMap: d } = e, { selection: m } = e, { context: g } = e, { onDragSelectionStart: _ } = e;
  const b = Qn("jsoneditor:JSONNode");
  let w, v, M;
  const S = cR();
  let R, k, I, L, V, N;
  function W(ie, ve, Xe, he, Ve, Ie, qe, ct, yt) {
    let Fe = Object.keys(ve).map((Oe) => {
      const ae = im(R, Oe);
      return {
        key: Oe,
        value: ve[Oe],
        path: S(ie.concat(Oe)),
        pointer: ae,
        expandedMap: Mr(Xe, ae),
        enforceStringMap: Mr(he, ae),
        visibleSectionsMap: Mr(Ve, ae),
        validationErrorsMap: Mr(Ie, ae),
        keySearchResultItemsMap: PI(qe, ae),
        valueSearchResultItemsMap: Mr(qe, ae),
        selection: X0(ct, ae)
      };
    });
    return yt && yt.offset !== 0 && (Fe = P0(Fe, yt.selectionStartIndex, yt.selectionItemsCount, yt.offset)), Fe;
  }
  function U(ie, ve, Xe, he, Ve, Ie, qe, ct, yt, Fe) {
    const Oe = Xe.start, ae = Math.min(Xe.end, ve.length);
    let xe = [];
    for (let ht = Oe; ht < ae; ht++) {
      const ft = im(R, ht);
      xe.push({
        index: ht,
        value: ve[ht],
        path: S(ie.concat(String(ht))),
        pointer: ft,
        expandedMap: Mr(he, ft),
        enforceStringMap: Mr(Ve, ft),
        visibleSectionsMap: Mr(Ie, ft),
        validationErrorsMap: Mr(qe, ft),
        searchResultItemsMap: Mr(ct, ft),
        selection: X0(yt, ft)
      });
    }
    if (Fe && Fe.offset !== 0) {
      const ht = xe.map((ft) => ft.index);
      xe = P0(xe, Fe.selectionStartIndex, Fe.selectionItemsCount, Fe.offset);
      for (let ft = 0; ft < xe.length; ft++)
        xe[ft].index = ht[ft];
    }
    return xe;
  }
  function O(ie) {
    ie.stopPropagation();
    const ve = ie.ctrlKey;
    g.onExpand(a, !k, ve);
  }
  function x(ie) {
    ie.stopPropagation(), g.onExpand(a, !0);
  }
  function A(ie, ve) {
    const Xe = hf(a, Object.keys(l), ie, ve);
    return g.onPatch(Xe), $e(gr(Xe[0].path));
  }
  function H(ie) {
    if (H9(ie.target) || ie.which === 1 && D3(ie.target, "BUTTON"))
      return;
    ie.stopPropagation(), ie.preventDefault(), document.addEventListener("mousemove", P, !0), document.addEventListener("mouseup", K);
    const ve = ld(ie.target), Xe = g.getJson(), he = g.getDocumentState();
    if (Z3(m, a, ve)) {
      ie.button === 0 && _(ie);
      return;
    }
    if (Kn.selecting = !0, Kn.selectionAnchor = a, Kn.selectionAnchorType = ve, Kn.selectionFocus = a, ie.shiftKey)
      m && g.onSelect(vn(Xe, m.anchorPath, a));
    else if (ve === Ht.multi)
      if (i && ie.target.hasAttribute("data-path")) {
        const Ve = $e(Q3(l, he));
        g.onSelect(Zp(Ve));
      } else
        g.onSelect(vn(Xe, a, a));
    else
      g.onSelect(G0(Xe, ve, a));
    g.focus();
  }
  function D(ie) {
    if (Kn.selecting) {
      ie.preventDefault(), ie.stopPropagation(), Kn.selectionFocus == null && window.getSelection && window.getSelection().empty();
      const ve = ld(ie.target);
      if (!St(a, Kn.selectionFocus) || ve !== Kn.selectionAnchorType) {
        Kn.selectionFocus = a, Kn.selectionAnchorType = ve;
        const Xe = g.getJson();
        g.onSelect(vn(Xe, Kn.selectionAnchor, Kn.selectionFocus));
      }
    }
  }
  function P(ie) {
    g.onDrag(ie);
  }
  function K(ie) {
    Kn.selecting && (Kn.selecting = !1, ie.stopPropagation()), g.onDragEnd(), document.removeEventListener("mousemove", P, !0), document.removeEventListener("mouseup", K);
  }
  function ne() {
    var ie, ve;
    return ((ve = (ie = g.findElement([])) == null ? void 0 : ie.getBoundingClientRect()) == null ? void 0 : ve.top) || 0;
  }
  function z(ie, ve) {
    const he = ne() - ie.initialContentTop;
    return ve.clientY - ie.initialClientY - he;
  }
  function Z(ie) {
    if (g.readOnly)
      return;
    const ve = kt(m.focusPath);
    if (!St(a, ve)) {
      _(ie);
      return;
    }
    const Xe = Ae(m, L || Os);
    if (b("dragSelectionStart", { selection: m, items: Xe }), !Xe) {
      b("Cannot drag the current selection (probably spread over multiple sections)");
      return;
    }
    const he = Sl(m), Ve = Xe.findIndex((yt) => St(yt.path, he)), Ie = g.getJson(), qe = g.getDocumentState(), { offset: ct } = pd({ json: Ie, documentState: qe, deltaY: 0, items: Xe });
    n(11, M = {
      initialTarget: ie.target,
      initialClientY: ie.clientY,
      initialContentTop: ne(),
      selectionStartIndex: Ve,
      selectionItemsCount: nC(m).length,
      items: Xe,
      offset: ct,
      didMoveItems: !1
    }), Kn.dragging = !0, document.addEventListener("mousemove", te, !0), document.addEventListener("mouseup", G);
  }
  function te(ie) {
    if (M) {
      const ve = g.getJson(), Xe = g.getDocumentState(), he = z(M, ie), { offset: Ve } = pd({
        json: ve,
        documentState: Xe,
        deltaY: he,
        items: M.items
      });
      Ve !== M.offset && (b("drag selection", Ve, he), n(11, M = { ...M, offset: Ve, didMoveItems: !0 }));
    }
  }
  function G(ie) {
    if (M) {
      const ve = g.getJson(), Xe = g.getDocumentState(), he = z(M, ie), { operations: Ve, updatedSelection: Ie } = pd({
        json: ve,
        documentState: Xe,
        deltaY: he,
        items: M.items
      });
      if (Ve)
        g.onPatch(Ve, (qe, ct) => ({
          state: {
            ...ct,
            selection: Ie || m
          }
        }));
      else if (ie.target === M.initialTarget && !M.didMoveItems) {
        const qe = ld(ie.target), ct = L3(ie.target);
        ct && g.onSelect(G0(ve, qe, ct));
      }
      n(11, M = void 0), Kn.dragging = !1, document.removeEventListener("mousemove", te, !0), document.removeEventListener("mouseup", G);
    }
  }
  function Ae(ie, ve) {
    const Xe = [];
    function he(Ve) {
      const Ie = a.concat(Ve), qe = g.findElement(Ie);
      qe != null && Xe.push({
        path: Ie,
        height: qe.clientHeight
      });
    }
    if (Array.isArray(l)) {
      const Ve = Sl(ie), Ie = ph(ie), qe = $e(Ve), ct = $e(Ie), yt = ve.find((ae) => qe >= ae.start && ct <= ae.end);
      if (!yt)
        return null;
      const { start: Fe, end: Oe } = yt;
      S3(Fe, Math.min(l.length, Oe), (ae) => he(String(ae)));
    } else
      Object.keys(l).forEach(he);
    return Xe;
  }
  function ke(ie) {
    Kn.selecting || Kn.dragging || (ie.stopPropagation(), bs(ie.target, "data-type", "selectable-value") ? n(10, w = em) : bs(ie.target, "data-type", "insert-selection-area-inside") ? n(10, w = co) : bs(ie.target, "data-type", "insert-selection-area-after") && n(10, w = Oa), clearTimeout(v));
  }
  function ze(ie) {
    ie.stopPropagation(), v = setTimeout(() => n(10, w = void 0));
  }
  function ee(ie) {
    ie.shiftKey || (ie.stopPropagation(), ie.preventDefault(), g.onSelect(ho(a)));
  }
  function we(ie) {
    ie.shiftKey || (ie.stopPropagation(), ie.preventDefault(), g.onSelect(mo(a)));
  }
  function tt(ie) {
    g.onSelect(ho(a)), g.onContextMenu(ie);
  }
  function ge(ie) {
    g.onSelect(mo(a)), g.onContextMenu(ie);
  }
  return t.$$set = (ie) => {
    "value" in ie && n(0, l = ie.value), "path" in ie && n(1, a = ie.path), "expandedMap" in ie && n(2, f = ie.expandedMap), "enforceStringMap" in ie && n(3, c = ie.enforceStringMap), "visibleSectionsMap" in ie && n(4, u = ie.visibleSectionsMap), "validationErrorsMap" in ie && n(5, h = ie.validationErrorsMap), "searchResultItemsMap" in ie && n(6, d = ie.searchResultItemsMap), "selection" in ie && n(7, m = ie.selection), "context" in ie && n(8, g = ie.context), "onDragSelectionStart" in ie && n(33, _ = ie.onDragSelectionStart), "$$scope" in ie && n(35, s = ie.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 2 && n(9, R = Se(a)), t.$$.dirty[0] & 516 && n(12, k = f ? f[R] === !0 : !1), t.$$.dirty[0] & 777 && n(13, I = uo(l, c, R, g.parser)), t.$$.dirty[0] & 528 && n(14, L = u ? u[R] : void 0), t.$$.dirty[0] & 544 && n(15, V = h ? h[R] : void 0), t.$$.dirty[0] & 640 && n(16, N = m ? m.pointersMap[R] === !0 : !1), t.$$.dirty[0] & 2 && n(17, i = a.length === 0), t.$$.dirty[0] & 2 && n(18, r = Va(a.length));
  }, [
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    R,
    w,
    M,
    k,
    I,
    L,
    V,
    N,
    i,
    r,
    W,
    U,
    O,
    x,
    A,
    H,
    D,
    Z,
    ke,
    ze,
    ee,
    we,
    tt,
    ge,
    _,
    o,
    s
  ];
}
class hg extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      aL,
      lL,
      gt,
      {
        value: 0,
        path: 1,
        expandedMap: 2,
        enforceStringMap: 3,
        visibleSectionsMap: 4,
        validationErrorsMap: 5,
        searchResultItemsMap: 6,
        selection: 7,
        context: 8,
        onDragSelectionStart: 33
      },
      null,
      [-1, -1]
    );
  }
}
const fL = hg, cL = {
  prefix: "fas",
  iconName: "jsoneditor-expand",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"
  ]
}, uL = {
  prefix: "fas",
  iconName: "jsoneditor-collapse",
  icon: [
    512,
    512,
    [],
    null,
    "m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"
  ]
}, hL = {
  prefix: "fas",
  iconName: "jsoneditor-format",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"
  ]
}, dL = {
  prefix: "fas",
  iconName: "jsoneditor-compact",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"
  ]
};
function mL(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function pL(t, e, n) {
  let i, r, o, { json: s } = e, { selection: l } = e, { readOnly: a } = e, { showSearch: f = !1 } = e, { historyState: c } = e, { onExpandAll: u } = e, { onCollapseAll: h } = e, { onUndo: d } = e, { onRedo: m } = e, { onSort: g } = e, { onTransform: _ } = e, { onContextMenu: b } = e, { onCopy: w } = e, { onRenderMenu: v } = e;
  function M() {
    n(1, f = !f);
  }
  let S, R, k, I;
  return t.$$set = (L) => {
    "json" in L && n(2, s = L.json), "selection" in L && n(3, l = L.selection), "readOnly" in L && n(4, a = L.readOnly), "showSearch" in L && n(1, f = L.showSearch), "historyState" in L && n(5, c = L.historyState), "onExpandAll" in L && n(6, u = L.onExpandAll), "onCollapseAll" in L && n(7, h = L.onCollapseAll), "onUndo" in L && n(8, d = L.onUndo), "onRedo" in L && n(9, m = L.onRedo), "onSort" in L && n(10, g = L.onSort), "onTransform" in L && n(11, _ = L.onTransform), "onContextMenu" in L && n(12, b = L.onContextMenu), "onCopy" in L && n(13, w = L.onCopy), "onRenderMenu" in L && n(14, v = L.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(20, i = s !== void 0), t.$$.dirty & 8, t.$$.dirty & 1048584 && n(19, r = i && (Pt(l) || kn(l) || vt(l))), t.$$.dirty & 68 && n(15, S = {
      type: "button",
      icon: cL,
      title: "Expand all",
      className: "jse-expand-all",
      onClick: u,
      disabled: !rn(s)
    }), t.$$.dirty & 132 && n(16, R = {
      type: "button",
      icon: uL,
      title: "Collapse all",
      className: "jse-collapse-all",
      onClick: h,
      disabled: !rn(s)
    }), t.$$.dirty & 4 && n(17, k = {
      type: "button",
      icon: ng,
      title: "Search (Ctrl+F)",
      className: "jse-search",
      onClick: M,
      disabled: s === void 0
    }), t.$$.dirty & 769844 && n(18, I = a ? [
      S,
      R,
      { type: "separator" },
      {
        type: "button",
        icon: Lo,
        title: "Copy (Ctrl+C)",
        className: "jse-copy",
        onClick: w,
        disabled: !r
      },
      { type: "separator" },
      k,
      { type: "space" }
    ] : [
      S,
      R,
      { type: "separator" },
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: g,
        disabled: a || s === void 0
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: _,
        disabled: a || s === void 0
      },
      k,
      {
        type: "button",
        icon: hC,
        title: Ap,
        className: "jse-contextmenu",
        onClick: b
      },
      { type: "separator" },
      {
        type: "button",
        icon: tg,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: d,
        disabled: !c.canUndo
      },
      {
        type: "button",
        icon: eg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: m,
        disabled: !c.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 278528 && n(0, o = v("tree", I) || I);
  }, [
    o,
    f,
    s,
    l,
    a,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    S,
    R,
    k,
    I,
    r,
    i
  ];
}
class gL extends Be {
  constructor(e) {
    super(), je(this, e, pL, mL, gt, {
      json: 2,
      selection: 3,
      readOnly: 4,
      showSearch: 1,
      historyState: 5,
      onExpandAll: 6,
      onCollapseAll: 7,
      onUndo: 8,
      onRedo: 9,
      onSort: 10,
      onTransform: 11,
      onContextMenu: 12,
      onCopy: 13,
      onRenderMenu: 14
    });
  }
}
const bL = gL;
function $2(t) {
  let e;
  return {
    c() {
      e = T("ul"), e.innerHTML = `<li class="svelte-1q2qkk2">Click inside the editor</li> 
        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> 
        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> 
        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>`, p(e, "class", "svelte-1q2qkk2");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function _L(t) {
  let e, n, i, r, o, s, l, a = !t[0] && $2();
  return {
    c() {
      e = T("div"), n = T("div"), i = q(), r = T("div"), o = le(`Empty document
    `), a && a.c(), s = q(), l = T("div"), p(n, "class", "jse-space jse-before svelte-1q2qkk2"), p(r, "class", "jse-contents svelte-1q2qkk2"), p(l, "class", "jse-space jse-after svelte-1q2qkk2"), p(e, "class", "jse-welcome svelte-1q2qkk2");
    },
    m(f, c) {
      B(f, e, c), y(e, n), y(e, i), y(e, r), y(r, o), a && a.m(r, null), y(e, s), y(e, l);
    },
    p(f, [c]) {
      f[0] ? a && (a.d(1), a = null) : a || (a = $2(), a.c(), a.m(r, null));
    },
    i: fe,
    o: fe,
    d(f) {
      f && j(e), a && a.d();
    }
  };
}
function yL(t, e, n) {
  let { readOnly: i } = e;
  return t.$$set = (r) => {
    "readOnly" in r && n(0, i = r.readOnly);
  }, [i];
}
class wL extends Be {
  constructor(e) {
    super(), je(this, e, yL, _L, gt, { readOnly: 0 });
  }
}
const vL = wL;
var TC = { exports: {} };
/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */
var e_ = function(t, e) {
  var n, i, r = 1, o = 0, s = 0, l = String.alphabet;
  function a(f, c, u) {
    if (u) {
      for (n = c; u = a(f, n), u < 76 && u > 65; )
        ++n;
      return +f.slice(c - 1, n);
    }
    return u = l && l.indexOf(f.charAt(c)), u > -1 ? u + 76 : (u = f.charCodeAt(c) || 0, u < 45 || u > 127 ? u : u < 46 ? 65 : u < 48 ? u - 1 : u < 58 ? u + 18 : u < 65 ? u - 11 : u < 91 ? u + 11 : u < 97 ? u - 37 : u < 123 ? u + 5 : u - 63);
  }
  if ((t += "") != (e += "")) {
    for (; r; )
      if (i = a(t, o++), r = a(e, s++), i < 76 && r < 76 && i > 66 && r > 66 && (i = a(t, o, o), r = a(e, s, o = n), s = n), i != r)
        return i < r ? -1 : 1;
  }
  return 0;
};
try {
  TC.exports = e_;
} catch {
  String.naturalCompare = e_;
}
function dg(t, e) {
  const n = typeof t == "string" ? t.toLowerCase() : t, i = typeof e == "string" ? e.toLowerCase() : e;
  return TC.exports(n, i);
}
function EC(t, e = [], n = [], i = 1) {
  if (xt(Le(t, e))) {
    if (n === void 0)
      throw new Error("Cannot sort: no property selected by which to sort the array");
    return CL(t, e, n, i);
  }
  if (pn(t))
    return kL(t, e, i);
  throw new Error("Cannot sort: no array or object");
}
function kL(t, e = [], n = 1) {
  const i = Le(t, e), o = Object.keys(i).slice();
  o.sort((l, a) => n * dg(l, a));
  const s = [];
  for (let l = 0; l < o.length; l++) {
    const a = o[l], f = Se(e.concat(a));
    s.push({
      op: "move",
      from: f,
      path: f
    });
  }
  return s;
}
function CL(t, e = [], n = [], i = 1) {
  const r = SL(n, i), o = Le(t, e);
  return [
    {
      op: "replace",
      path: Se(e),
      value: o.slice(0).sort(r)
    }
  ];
}
function SL(t, e) {
  return function(i, r) {
    const o = Le(i, t), s = Le(r, t);
    return o === void 0 ? e : s === void 0 ? -e : typeof o != "string" && typeof s != "string" ? o > s ? e : o < s ? -e : 0 : e * dg(o, s);
  };
}
function t_(t, e, n) {
  const i = t.slice();
  return i[4] = e[n], i;
}
function n_(t, e) {
  let n, i = Jr(e[4].toString(), r_) + "", r, o, s, l;
  function a() {
    return e[3](e[4]);
  }
  return {
    key: t,
    first: null,
    c() {
      n = T("button"), r = le(i), p(n, "type", "button"), p(n, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), p(n, "title", o = e[4].toString()), de(n, "jse-selected", e[4] === e[1]), this.first = n;
    },
    m(f, c) {
      B(f, n, c), y(n, r), s || (l = X(n, "click", De(a)), s = !0);
    },
    p(f, c) {
      e = f, c & 1 && i !== (i = Jr(e[4].toString(), r_) + "") && Te(r, i), c & 1 && o !== (o = e[4].toString()) && p(n, "title", o), c & 3 && de(n, "jse-selected", e[4] === e[1]);
    },
    d(f) {
      f && j(n), s = !1, l();
    }
  };
}
function i_(t) {
  let e, n;
  return {
    c() {
      e = T("button"), n = le("..."), p(e, "type", "button"), p(e, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), p(e, "title", "Limited to " + sa + " items");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p: fe,
    d(i) {
      i && j(e);
    }
  };
}
function ML(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, o = Qc(t[0], sa);
  const s = (a) => a[4];
  for (let a = 0; a < o.length; a += 1) {
    let f = t_(t, o, a), c = s(f);
    i.set(c, n[a] = n_(c, f));
  }
  let l = t[0].length > sa && i_();
  return {
    c() {
      e = T("div");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      r = q(), l && l.c(), p(e, "class", "jse-navigation-bar-dropdown svelte-6hb2gf");
    },
    m(a, f) {
      B(a, e, f);
      for (let c = 0; c < n.length; c += 1)
        n[c].m(e, null);
      y(e, r), l && l.m(e, null);
    },
    p(a, [f]) {
      f & 7 && (o = Qc(a[0], sa), n = fo(n, f, s, 1, a, o, i, e, of, n_, r, t_)), a[0].length > sa ? l ? l.p(a, f) : (l = i_(), l.c(), l.m(e, null)) : l && (l.d(1), l = null);
    },
    i: fe,
    o: fe,
    d(a) {
      a && j(e);
      for (let f = 0; f < n.length; f += 1)
        n[f].d();
      l && l.d();
    }
  };
}
const sa = 100, r_ = 30;
function AL(t, e, n) {
  let { items: i } = e, { selectedItem: r } = e, { onSelect: o } = e;
  const s = (l) => o(l);
  return t.$$set = (l) => {
    "items" in l && n(0, i = l.items), "selectedItem" in l && n(1, r = l.selectedItem), "onSelect" in l && n(2, o = l.onSelect);
  }, [i, r, o, s];
}
class OL extends Be {
  constructor(e) {
    super(), je(this, e, AL, ML, gt, { items: 0, selectedItem: 1, onSelect: 2 });
  }
}
const TL = OL;
function o_(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("button"), n = le(t[2]), p(e, "type", "button"), p(e, "class", "jse-navigation-bar-button svelte-1r1k9th");
    },
    m(o, s) {
      B(o, e, s), y(e, n), i || (r = X(e, "click", t[9]), i = !0);
    },
    p(o, s) {
      s & 4 && Te(n, o[2]);
    },
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function EL(t) {
  let e, n, i, r, o, s, l;
  i = new Ct({ props: { data: uC } });
  let a = t[2] !== void 0 && o_(t);
  return {
    c() {
      e = T("div"), n = T("button"), se(i.$$.fragment), r = q(), a && a.c(), p(n, "type", "button"), p(n, "class", "jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"), de(n, "jse-open", t[1]), p(e, "class", "jse-navigation-bar-item svelte-1r1k9th");
    },
    m(f, c) {
      B(f, e, c), y(e, n), re(i, n, null), y(e, r), a && a.m(e, null), t[10](e), o = !0, s || (l = X(n, "click", t[4]), s = !0);
    },
    p(f, [c]) {
      (!o || c & 2) && de(n, "jse-open", f[1]), f[2] !== void 0 ? a ? a.p(f, c) : (a = o_(f), a.c(), a.m(e, null)) : a && (a.d(1), a = null);
    },
    i(f) {
      o || (C(i.$$.fragment, f), o = !0);
    },
    o(f) {
      E(i.$$.fragment, f), o = !1;
    },
    d(f) {
      f && j(e), oe(i), a && a.d(), t[10](null), s = !1, l();
    }
  };
}
function PL(t, e, n) {
  let i, r;
  const { openAbsolutePopup: o, closeAbsolutePopup: s } = Xn("absolute-popup");
  let { path: l } = e, { index: a } = e, { onSelect: f } = e, { getItems: c } = e, u, h = !1, d;
  function m(w) {
    s(d), f(i.concat(w));
  }
  function g() {
    if (u) {
      n(1, h = !0);
      const w = {
        items: c(i),
        selectedItem: r,
        onSelect: m
      };
      d = o(TL, w, {
        anchor: u,
        closeOnOuterClick: !0,
        onClose: () => {
          n(1, h = !1);
        }
      });
    }
  }
  const _ = () => m(r);
  function b(w) {
    mt[w ? "unshift" : "push"](() => {
      u = w, n(0, u);
    });
  }
  return t.$$set = (w) => {
    "path" in w && n(5, l = w.path), "index" in w && n(6, a = w.index), "onSelect" in w && n(7, f = w.onSelect), "getItems" in w && n(8, c = w.getItems);
  }, t.$$.update = () => {
    t.$$.dirty & 96 && (i = l.slice(0, a)), t.$$.dirty & 96 && n(2, r = l[a]);
  }, [
    u,
    h,
    r,
    m,
    g,
    l,
    a,
    f,
    c,
    _,
    b
  ];
}
class RL extends Be {
  constructor(e) {
    super(), je(this, e, PL, EL, gt, {
      path: 5,
      index: 6,
      onSelect: 7,
      getItems: 8
    });
  }
}
const PC = RL;
function mg(t) {
  var e;
  if (navigator.clipboard)
    return navigator.clipboard.writeText(t);
  if ((e = document.queryCommandSupported) != null && e.call(document, "copy")) {
    const n = document.createElement("textarea");
    n.value = t, n.style.position = "fixed", n.style.opacity = "0", document.body.appendChild(n), n.select();
    try {
      document.execCommand("copy");
    } catch (i) {
      console.error(i);
    } finally {
      document.body.removeChild(n);
    }
  } else
    console.error("Copy failed.");
}
function s_(t) {
  let e, n, i, r, o, s;
  return n = new Ct({ props: { data: Fs } }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-navigation-bar-validation-error svelte-g0evpe");
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), r = !0, o || (s = Ai(i = $p.call(null, e, {
        text: t[3],
        ...t[4]
      })), o = !0);
    },
    p(l, a) {
      i && Gn(i.update) && a & 8 && i.update.call(null, {
        text: l[3],
        ...l[4]
      });
    },
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n), o = !1, s();
    }
  };
}
function l_(t) {
  let e;
  return {
    c() {
      e = T("div"), e.textContent = "Copied!", p(e, "class", "jse-copied-text svelte-g0evpe");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function IL(t) {
  let e, n, i, r, o, s, l, a, f, c, u = t[3] && s_(t), h = t[2] && l_();
  return l = new Ct({ props: { data: Lo } }), {
    c() {
      e = T("div"), n = T("input"), i = q(), u && u.c(), r = q(), h && h.c(), o = q(), s = T("button"), se(l.$$.fragment), p(n, "type", "text"), p(n, "class", "jse-navigation-bar-text svelte-g0evpe"), n.value = t[0], p(s, "type", "button"), p(s, "class", "jse-navigation-bar-copy svelte-g0evpe"), p(s, "title", "Copy selected path to the clipboard"), de(s, "copied", t[2]), p(e, "class", "jse-navigation-bar-path-editor svelte-g0evpe"), de(e, "error", t[3]);
    },
    m(d, m) {
      B(d, e, m), y(e, n), t[15](n), y(e, i), u && u.m(e, null), y(e, r), h && h.m(e, null), y(e, o), y(e, s), re(l, s, null), a = !0, f || (c = [
        X(n, "keydown", De(t[6])),
        X(n, "input", t[5]),
        X(s, "click", t[7])
      ], f = !0);
    },
    p(d, [m]) {
      (!a || m & 1 && n.value !== d[0]) && (n.value = d[0]), d[3] ? u ? (u.p(d, m), m & 8 && C(u, 1)) : (u = s_(d), u.c(), C(u, 1), u.m(e, r)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), d[2] ? h || (h = l_(), h.c(), h.m(e, o)) : h && (h.d(1), h = null), (!a || m & 4) && de(s, "copied", d[2]), (!a || m & 8) && de(e, "error", d[3]);
    },
    i(d) {
      a || (C(u), C(l.$$.fragment, d), a = !0);
    },
    o(d) {
      E(u), E(l.$$.fragment, d), a = !1;
    },
    d(d) {
      d && j(e), t[15](null), u && u.d(), h && h.d(), oe(l), f = !1, et(c);
    }
  };
}
const NL = 1e3;
function DL(t, e, n) {
  let i;
  const r = Xn("absolute-popup");
  let { path: o } = e, { pathParser: s } = e, { onChange: l } = e, { onClose: a } = e, { onError: f } = e, { pathExists: c } = e, u, h, d = !1, m, g = !1;
  zi(() => {
    _();
  }), qr(() => {
    clearTimeout(m);
  });
  function _() {
    u.focus();
  }
  function b(k) {
    try {
      const I = s.parse(k);
      return w(I), { path: I, error: void 0 };
    } catch (I) {
      return { path: void 0, error: I };
    }
  }
  function w(k) {
    if (!c(k))
      throw new Error("Path does not exist in current document");
  }
  function v(k) {
    n(0, h = k.currentTarget.value);
  }
  function M(k) {
    const I = es(k);
    if (I === "Escape" && a(), I === "Enter") {
      n(14, d = !0);
      const L = b(h);
      L.path !== void 0 ? l(L.path) : f(L.error);
    }
  }
  function S() {
    mg(h), n(2, g = !0), m = setTimeout(() => n(2, g = !1), NL), _();
  }
  function R(k) {
    mt[k ? "unshift" : "push"](() => {
      u = k, n(1, u);
    });
  }
  return t.$$set = (k) => {
    "path" in k && n(8, o = k.path), "pathParser" in k && n(9, s = k.pathParser), "onChange" in k && n(10, l = k.onChange), "onClose" in k && n(11, a = k.onClose), "onError" in k && n(12, f = k.onError), "pathExists" in k && n(13, c = k.pathExists);
  }, t.$$.update = () => {
    t.$$.dirty & 768 && n(0, h = s.stringify(o)), t.$$.dirty & 16385 && n(3, i = d ? b(h).error : void 0);
  }, [
    h,
    u,
    g,
    i,
    r,
    v,
    M,
    S,
    o,
    s,
    l,
    a,
    f,
    c,
    d,
    R
  ];
}
class jL extends Be {
  constructor(e) {
    super(), je(this, e, DL, IL, It, {
      path: 8,
      pathParser: 9,
      onChange: 10,
      onClose: 11,
      onError: 12,
      pathExists: 13
    });
  }
}
const BL = jL;
function a_(t, e, n) {
  const i = t.slice();
  return i[20] = e[n], i[22] = n, i;
}
function LL(t) {
  let e, n;
  return e = new BL({
    props: {
      path: t[3],
      onClose: t[12],
      onChange: t[13],
      onError: t[1],
      pathExists: t[9],
      pathParser: t[2]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.path = i[3]), r & 2 && (o.onError = i[1]), r & 4 && (o.pathParser = i[2]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function xL(t) {
  let e = [], n = /* @__PURE__ */ new Map(), i, r, o, s = t[3];
  const l = (f) => f[22];
  for (let f = 0; f < s.length; f += 1) {
    let c = a_(t, s, f), u = l(c);
    n.set(u, e[f] = f_(u, c));
  }
  let a = t[7] && c_(t);
  return {
    c() {
      for (let f = 0; f < e.length; f += 1)
        e[f].c();
      i = q(), a && a.c(), r = Ze();
    },
    m(f, c) {
      for (let u = 0; u < e.length; u += 1)
        e[u].m(f, c);
      B(f, i, c), a && a.m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      c & 1288 && (s = f[3], me(), e = fo(e, c, l, 1, f, s, n, i.parentNode, Xu, f_, i, a_), pe()), f[7] ? a ? (a.p(f, c), c & 128 && C(a, 1)) : (a = c_(f), a.c(), C(a, 1), a.m(r.parentNode, r)) : a && (me(), E(a, 1, 1, () => {
        a = null;
      }), pe());
    },
    i(f) {
      if (!o) {
        for (let c = 0; c < s.length; c += 1)
          C(e[c]);
        C(a), o = !0;
      }
    },
    o(f) {
      for (let c = 0; c < e.length; c += 1)
        E(e[c]);
      E(a), o = !1;
    },
    d(f) {
      for (let c = 0; c < e.length; c += 1)
        e[c].d(f);
      f && j(i), a && a.d(f), f && j(r);
    }
  };
}
function f_(t, e) {
  let n, i, r;
  return i = new PC({
    props: {
      getItems: e[8],
      path: e[3],
      index: e[22],
      onSelect: e[10]
    }
  }), {
    key: t,
    first: null,
    c() {
      n = Ze(), se(i.$$.fragment), this.first = n;
    },
    m(o, s) {
      B(o, n, s), re(i, o, s), r = !0;
    },
    p(o, s) {
      e = o;
      const l = {};
      s & 8 && (l.path = e[3]), s & 8 && (l.index = e[22]), i.$set(l);
    },
    i(o) {
      r || (C(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(n), oe(i, o);
    }
  };
}
function c_(t) {
  let e, n;
  return e = new PC({
    props: {
      getItems: t[8],
      path: t[3],
      index: void 0,
      onSelect: t[10]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r & 8 && (o.path = i[3]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function zL(t) {
  let e, n, i, r, o, s, l = !rn(t[0]) && !t[6] ? "Navigation bar" : " ", a, f, c, u, h, d, m;
  const g = [xL, LL], _ = [];
  function b(w, v) {
    return w[6] ? 1 : 0;
  }
  return n = b(t), i = _[n] = g[n](t), c = new Ct({
    props: {
      data: t[6] ? sb : rb
    }
  }), {
    c() {
      e = T("div"), i.c(), r = q(), o = T("button"), s = T("span"), a = le(l), f = q(), se(c.$$.fragment), p(s, "class", "jse-navigation-bar-space svelte-15r3ahw"), p(o, "type", "button"), p(o, "class", "jse-navigation-bar-edit svelte-15r3ahw"), p(o, "title", u = t[6] ? "Cancel editing the selected path" : "Edit the selected path"), de(o, "flex", !t[6]), de(o, "editing", t[6]), p(e, "class", "jse-navigation-bar svelte-15r3ahw");
    },
    m(w, v) {
      B(w, e, v), _[n].m(e, null), y(e, r), y(e, o), y(o, s), y(s, a), y(o, f), re(c, o, null), t[16](o), t[17](e), h = !0, d || (m = X(o, "click", t[11]), d = !0);
    },
    p(w, [v]) {
      let M = n;
      n = b(w), n === M ? _[n].p(w, v) : (me(), E(_[M], 1, 1, () => {
        _[M] = null;
      }), pe(), i = _[n], i ? i.p(w, v) : (i = _[n] = g[n](w), i.c()), C(i, 1), i.m(e, r)), (!h || v & 65) && l !== (l = !rn(w[0]) && !w[6] ? "Navigation bar" : " ") && Te(a, l);
      const S = {};
      v & 64 && (S.data = w[6] ? sb : rb), c.$set(S), (!h || v & 64 && u !== (u = w[6] ? "Cancel editing the selected path" : "Edit the selected path")) && p(o, "title", u), (!h || v & 64) && de(o, "flex", !w[6]), (!h || v & 64) && de(o, "editing", w[6]);
    },
    i(w) {
      h || (C(i), C(c.$$.fragment, w), h = !0);
    },
    o(w) {
      E(i), E(c.$$.fragment, w), h = !1;
    },
    d(w) {
      w && j(e), _[n].d(), oe(c), t[16](null), t[17](null), d = !1, m();
    }
  };
}
function VL(t, e, n) {
  let i, r;
  const o = Qn("jsoneditor:NavigationBar");
  let { json: s } = e, { documentState: l } = e, { onSelect: a } = e, { onError: f } = e, { pathParser: c } = e, u, h, d = !1;
  function m(k) {
    setTimeout(() => {
      if (u && u.scrollTo) {
        const I = u.scrollWidth - u.clientWidth;
        I > 0 && (o("scrollTo ", I), u.scrollTo({ left: I, behavior: "smooth" }));
      }
    });
  }
  function g(k) {
    o("get items for path", k);
    const I = Le(s, k);
    if (Array.isArray(I))
      return b9(0, I.length).map(String);
    if (pn(I)) {
      const V = Object.keys(I).slice(0);
      return V.sort(dg), V;
    } else
      return [];
  }
  function _(k) {
    return Ki(s, k);
  }
  function b(k) {
    o("select path", JSON.stringify(k)), a(vn(s, k, k));
  }
  function w() {
    n(6, d = !d);
  }
  function v() {
    n(6, d = !1);
  }
  function M(k) {
    v(), b(k);
  }
  function S(k) {
    mt[k ? "unshift" : "push"](() => {
      h = k, n(5, h);
    });
  }
  function R(k) {
    mt[k ? "unshift" : "push"](() => {
      u = k, n(4, u);
    });
  }
  return t.$$set = (k) => {
    "json" in k && n(0, s = k.json), "documentState" in k && n(14, l = k.documentState), "onSelect" in k && n(15, a = k.onSelect), "onError" in k && n(1, f = k.onError), "pathParser" in k && n(2, c = k.pathParser);
  }, t.$$.update = () => {
    t.$$.dirty & 16384 && n(3, i = l.selection ? l.selection.focusPath : []), t.$$.dirty & 9 && n(7, r = rn(Le(s, i))), t.$$.dirty & 8 && m();
  }, [
    s,
    f,
    c,
    i,
    u,
    h,
    d,
    r,
    g,
    _,
    b,
    w,
    v,
    M,
    l,
    a,
    S,
    R
  ];
}
class FL extends Be {
  constructor(e) {
    super(), je(this, e, VL, zL, gt, {
      json: 0,
      documentState: 14,
      onSelect: 15,
      onError: 1,
      pathParser: 2
    });
  }
}
const HL = FL;
function u_(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m = t[3] !== -1 ? `${t[3] + 1}/` : "", g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O = !t[4] && h_(t);
  const x = [UL, WL], A = [];
  function H(P, K) {
    return P[2] ? 0 : 1;
  }
  l = H(t), a = A[l] = x[l](t), v = new Ct({ props: { data: bN } }), R = new Ct({ props: { data: iN } }), L = new Ct({ props: { data: Ul } });
  let D = t[0] && !t[4] && d_(t);
  return {
    c() {
      e = T("div"), n = T("form"), O && O.c(), i = q(), r = T("div"), o = T("div"), s = T("div"), a.c(), f = q(), c = T("label"), u = T("input"), h = q(), d = T("div"), g = le(m), _ = le(t[10]), b = q(), w = T("button"), se(v.$$.fragment), M = q(), S = T("button"), se(R.$$.fragment), k = q(), I = T("button"), se(L.$$.fragment), V = q(), D && D.c(), p(s, "class", "jse-search-icon svelte-18vllqh"), p(u, "class", "jse-search-input svelte-18vllqh"), p(u, "title", "Enter text to search"), p(u, "type", "text"), p(u, "placeholder", "Find"), p(c, "class", "jse-search-input-label svelte-18vllqh"), p(c, "about", "jse-search input"), p(d, "class", "jse-search-count svelte-18vllqh"), de(d, "jse-visible", t[8] !== ""), p(w, "type", "button"), p(w, "class", "jse-search-next svelte-18vllqh"), p(w, "title", "Go to next search result (Enter)"), p(S, "type", "button"), p(S, "class", "jse-search-previous svelte-18vllqh"), p(S, "title", "Go to previous search result (Shift+Enter)"), p(I, "type", "button"), p(I, "class", "jse-search-clear svelte-18vllqh"), p(I, "title", "Close search box (Esc)"), p(o, "class", "jse-search-section svelte-18vllqh"), p(r, "class", "jse-search-contents svelte-18vllqh"), p(n, "class", "jse-search-form svelte-18vllqh"), p(e, "class", "jse-search-box svelte-18vllqh");
    },
    m(P, K) {
      B(P, e, K), y(e, n), O && O.m(n, null), y(n, i), y(n, r), y(r, o), y(o, s), A[l].m(s, null), y(o, f), y(o, c), y(c, u), Vo(u, t[8]), y(o, h), y(o, d), y(d, g), y(d, _), y(o, b), y(o, w), re(v, w, null), y(o, M), y(o, S), re(R, S, null), y(o, k), y(o, I), re(L, I, null), y(r, V), D && D.m(r, null), N = !0, W || (U = [
        X(u, "input", t[21]),
        Ai(JL.call(null, u)),
        X(w, "click", t[22]),
        X(S, "click", t[23]),
        X(I, "click", t[24]),
        X(n, "submit", t[12]),
        X(n, "keydown", t[13])
      ], W = !0);
    },
    p(P, K) {
      P[4] ? O && (me(), E(O, 1, 1, () => {
        O = null;
      }), pe()) : O ? (O.p(P, K), K & 16 && C(O, 1)) : (O = h_(P), O.c(), C(O, 1), O.m(n, i));
      let ne = l;
      l = H(P), l === ne ? A[l].p(P, K) : (me(), E(A[ne], 1, 1, () => {
        A[ne] = null;
      }), pe(), a = A[l], a ? a.p(P, K) : (a = A[l] = x[l](P), a.c()), C(a, 1), a.m(s, null)), K & 256 && u.value !== P[8] && Vo(u, P[8]), (!N || K & 8) && m !== (m = P[3] !== -1 ? `${P[3] + 1}/` : "") && Te(g, m), (!N || K & 1024) && Te(_, P[10]), (!N || K & 256) && de(d, "jse-visible", P[8] !== ""), P[0] && !P[4] ? D ? D.p(P, K) : (D = d_(P), D.c(), D.m(r, null)) : D && (D.d(1), D = null);
    },
    i(P) {
      N || (C(O), C(a), C(v.$$.fragment, P), C(R.$$.fragment, P), C(L.$$.fragment, P), N = !0);
    },
    o(P) {
      E(O), E(a), E(v.$$.fragment, P), E(R.$$.fragment, P), E(L.$$.fragment, P), N = !1;
    },
    d(P) {
      P && j(e), O && O.d(), A[l].d(), oe(v), oe(R), oe(L), D && D.d(), W = !1, et(U);
    }
  };
}
function h_(t) {
  let e, n, i, r, o;
  return n = new Ct({
    props: {
      data: t[0] ? Ui : Ro
    }
  }), {
    c() {
      e = T("button"), se(n.$$.fragment), p(e, "type", "button"), p(e, "class", "jse-replace-toggle svelte-18vllqh"), p(e, "title", "Toggle visibility of replace options (Ctrl+H)");
    },
    m(s, l) {
      B(s, e, l), re(n, e, null), i = !0, r || (o = X(e, "click", t[11]), r = !0);
    },
    p(s, l) {
      const a = {};
      l & 1 && (a.data = s[0] ? Ui : Ro), n.$set(a);
    },
    i(s) {
      i || (C(n.$$.fragment, s), i = !0);
    },
    o(s) {
      E(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && j(e), oe(n), r = !1, o();
    }
  };
}
function WL(t) {
  let e, n;
  return e = new Ct({ props: { data: ng } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function UL(t) {
  let e, n;
  return e = new Ct({
    props: { data: YI, spin: !0 }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p: fe,
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function d_(t) {
  let e, n, i, r, o, s, l, a;
  return {
    c() {
      e = T("div"), n = T("input"), i = q(), r = T("button"), r.textContent = "Replace", o = q(), s = T("button"), s.textContent = "All", p(n, "class", "jse-replace-input svelte-18vllqh"), p(n, "title", "Enter replacement text"), p(n, "type", "text"), p(n, "placeholder", "Replace"), p(r, "type", "button"), p(r, "title", "Replace current occurrence (Ctrl+Enter)"), p(r, "class", "svelte-18vllqh"), p(s, "type", "button"), p(s, "title", "Replace all occurrences"), p(s, "class", "svelte-18vllqh"), p(e, "class", "jse-replace-section svelte-18vllqh");
    },
    m(f, c) {
      B(f, e, c), y(e, n), Vo(n, t[9]), y(e, i), y(e, r), y(e, o), y(e, s), l || (a = [
        X(n, "input", t[25]),
        X(r, "click", t[14]),
        X(s, "click", t[15])
      ], l = !0);
    },
    p(f, c) {
      c & 512 && n.value !== f[9] && Vo(n, f[9]);
    },
    d(f) {
      f && j(e), l = !1, et(a);
    }
  };
}
function qL(t) {
  let e, n, i = t[1] && u_(t);
  return {
    c() {
      i && i.c(), e = Ze();
    },
    m(r, o) {
      i && i.m(r, o), B(r, e, o), n = !0;
    },
    p(r, [o]) {
      r[1] ? i ? (i.p(r, o), o & 2 && C(i, 1)) : (i = u_(r), i.c(), C(i, 1), i.m(e.parentNode, e)) : i && (me(), E(i, 1, 1, () => {
        i = null;
      }), pe());
    },
    i(r) {
      n || (C(i), n = !0);
    },
    o(r) {
      E(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && j(e);
    }
  };
}
function JL(t) {
  t.select();
}
function KL(t, e, n) {
  let i, r, { show: o = !1 } = e, { searching: s } = e, { resultCount: l = 0 } = e, { activeIndex: a = 0 } = e, { showReplace: f = !1 } = e, { readOnly: c = !1 } = e, { onChange: u = nn } = e, { onPrevious: h = nn } = e, { onNext: d = nn } = e, { onReplace: m = nn } = e, { onReplaceAll: g = nn } = e, { onClose: _ = nn } = e, b = "", w = "", v = "";
  function M() {
    b !== "" && u(b);
  }
  function S() {
    n(0, f = !f && !c);
  }
  function R(x) {
    x.preventDefault(), b !== w ? (w = b, r.cancel(), u(b)) : d();
  }
  function k(x) {
    x.stopPropagation();
    const A = es(x);
    A === "Enter" && (x.preventDefault(), d()), A === "Shift+Enter" && (x.preventDefault(), h()), (A === "Ctrl+Enter" || A === "Command+Enter") && (x.preventDefault(), f ? I() : d()), A === "Ctrl+H" && (x.preventDefault(), S()), A === "Escape" && (x.preventDefault(), _());
  }
  function I() {
    c || m(b, v);
  }
  function L() {
    c || g(b, v);
  }
  function V() {
    b = this.value, n(8, b);
  }
  const N = () => d(), W = () => h(), U = () => _();
  function O() {
    v = this.value, n(9, v);
  }
  return t.$$set = (x) => {
    "show" in x && n(1, o = x.show), "searching" in x && n(2, s = x.searching), "resultCount" in x && n(16, l = x.resultCount), "activeIndex" in x && n(3, a = x.activeIndex), "showReplace" in x && n(0, f = x.showReplace), "readOnly" in x && n(4, c = x.readOnly), "onChange" in x && n(17, u = x.onChange), "onPrevious" in x && n(5, h = x.onPrevious), "onNext" in x && n(6, d = x.onNext), "onReplace" in x && n(18, m = x.onReplace), "onReplaceAll" in x && n(19, g = x.onReplaceAll), "onClose" in x && n(7, _ = x.onClose);
  }, t.$$.update = () => {
    t.$$.dirty & 65536 && n(10, i = l >= Zd ? `${Zd - 1}+` : String(l)), t.$$.dirty & 131072 && n(20, r = ch(u, Tk)), t.$$.dirty & 1048832 && r(b), t.$$.dirty & 2 && o && M();
  }, [
    f,
    o,
    s,
    a,
    c,
    h,
    d,
    _,
    b,
    v,
    i,
    S,
    R,
    k,
    I,
    L,
    l,
    u,
    m,
    g,
    r,
    V,
    N,
    W,
    U,
    O
  ];
}
class GL extends Be {
  constructor(e) {
    super(), je(this, e, KL, qL, gt, {
      show: 1,
      searching: 2,
      resultCount: 16,
      activeIndex: 3,
      showReplace: 0,
      readOnly: 4,
      onChange: 17,
      onPrevious: 5,
      onNext: 6,
      onReplace: 18,
      onReplaceAll: 19,
      onClose: 7
    });
  }
}
const XL = GL;
var m_ = Number.isNaN || function(e) {
  return typeof e == "number" && e !== e;
};
function QL(t, e) {
  return !!(t === e || m_(t) && m_(e));
}
function YL(t, e) {
  if (t.length !== e.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!QL(t[n], e[n]))
      return !1;
  return !0;
}
function pf(t, e) {
  e === void 0 && (e = YL);
  var n = null;
  function i() {
    for (var r = [], o = 0; o < arguments.length; o++)
      r[o] = arguments[o];
    if (n && n.lastThis === this && e(r, n.lastArgs))
      return n.lastResult;
    var s = t.apply(this, r);
    return n = {
      lastResult: s,
      lastArgs: r,
      lastThis: this
    }, s;
  }
  return i.clear = function() {
    n = null;
  }, i;
}
const zr = Qn("jsoneditor:actions");
async function RC({ json: t, documentState: e, indentation: n, readOnly: i, parser: r, onPatch: o }) {
  if (i || !iC(e.selection))
    return;
  const s = tC(t, e.selection, n, r);
  if (s == null)
    return;
  zr("cut", { selection: e.selection, clipboard: s, indentation: n }), await mg(s);
  const { operations: l, newSelection: a } = sC(t, e.selection);
  o(l, (f, c) => ({
    state: {
      ...c,
      selection: a
    }
  }));
}
async function IC({ json: t, documentState: e, indentation: n, parser: i }) {
  const r = tC(t, e.selection, n, i);
  r != null && (zr("copy", { clipboard: r, indentation: n }), await mg(r));
}
function NC({ clipboardText: t, json: e, documentState: n, readOnly: i, parser: r, onPatch: o, onChangeText: s, openRepairModal: l }) {
  if (i)
    return;
  function a(f) {
    if (e !== void 0) {
      const c = n.selection || vn(e || {}, [], []), u = oC(e, c, f, r);
      zr("paste", { pastedText: f, operations: u, selection: c }), o(u, (h, d) => {
        let m = d;
        return u.filter((g) => (Pk(g) || Op(g)) && rn(g.value)).forEach((g) => {
          const _ = Br(e, g.path);
          m = Eo(h, m, _);
        }), {
          state: m
        };
      });
    } else
      zr("paste text", { pastedText: f }), s(t, (c, u) => {
        if (c)
          return {
            state: Eo(c, u, [])
          };
      });
  }
  try {
    a(t);
  } catch {
    l(t, (c) => {
      zr("repaired pasted text: ", c), a(c);
    });
  }
}
function DC({ json: t, text: e, documentState: n, keepSelection: i, readOnly: r, onChange: o, onPatch: s }) {
  if (r || !n.selection)
    return;
  const l = kn(n.selection) || vt(n.selection) ? vn(t, n.selection.anchorPath, n.selection.focusPath) : n.selection;
  if (At(n.selection.focusPath))
    zr("remove root", { selection: n.selection }), o({ text: "", json: void 0 }, { text: e, json: t }, {
      contentErrors: { validationErrors: [] },
      patchResult: null
    });
  else {
    const { operations: a, newSelection: f } = sC(t, l);
    zr("remove", { operations: a, selection: n.selection, newSelection: f }), s(a, (c, u) => ({
      state: {
        ...u,
        selection: i ? n.selection : f
      }
    }));
  }
}
function ou({ insertType: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: o, parser: s, onPatch: l, onReplaceJson: a }) {
  if (o || !r.selection)
    return;
  const f = kI(i, r.selection, t);
  if (i !== void 0) {
    const c = s.stringify(f), u = oC(i, r.selection, c, s);
    zr("onInsert", { insertType: t, operations: u, newValue: f, data: c });
    const h = $e(u.filter((d) => d.op === "add" || d.op === "replace"));
    l(u, (d, m) => {
      if (h) {
        const g = Br(d, h.path);
        if (rn(f))
          return {
            state: {
              ...Hi(d, m, g, ja),
              selection: e ? ho(g) : m.selection
            }
          };
        if (f === "") {
          const _ = At(g) ? null : Le(d, kt(g));
          return {
            state: wm(d, {
              ...r,
              selection: pn(_) ? Gi(g, !0) : Et(g, !0)
            }, g)
          };
        }
        return;
      }
    }), zr("after patch"), h && f === "" && su(() => Zc(n, "", !0));
  } else {
    zr("onInsert", { insertType: t, newValue: f });
    const c = [];
    a(f, (u, h) => ({
      state: {
        ...Eo(u, h, c),
        selection: ho(c)
      }
    }));
  }
}
async function jC({ char: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: o, parser: s, onPatch: l, onReplaceJson: a, onSelect: f }) {
  if (!(o || !r.selection)) {
    if (kn(r.selection)) {
      const c = !r.selection.edit;
      f({ ...r.selection, edit: !0 }), su(() => Zc(n, t, c));
      return;
    }
    if (t === "{")
      ou({
        insertType: "object",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
    else if (t === "[")
      ou({
        insertType: "array",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
    else if (vt(r.selection)) {
      if (!rn(Le(i, r.selection.focusPath))) {
        const c = !r.selection.edit;
        f({ ...r.selection, edit: !0 }), su(() => Zc(n, t, c));
      }
    } else
      await ZL({
        char: t,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: o,
        parser: s,
        onPatch: l,
        onReplaceJson: a
      });
  }
}
async function ZL({ char: t, refJsonEditor: e, json: n, documentState: i, readOnly: r, parser: o, onPatch: s, onReplaceJson: l }) {
  if (r || !i.selection)
    return;
  ou({
    insertType: "value",
    selectInside: !1,
    refJsonEditor: e,
    json: n,
    documentState: i,
    readOnly: r,
    parser: o,
    onPatch: s,
    onReplaceJson: l
  });
  const a = !Uo(i.selection);
  su(() => Zc(e, t, a));
}
function su(t) {
  setTimeout(() => setTimeout(t));
}
function $L(t) {
  let e, n = Jr(
    Yc(
      {
        text: t[0],
        json: t[1]
      },
      t[2],
      t[3]
    ),
    Uc
  ) + "", i;
  return {
    c() {
      e = T("div"), i = le(n), p(e, "class", "jse-json-preview svelte-1ch6ow4");
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, [o]) {
      o & 15 && n !== (n = Jr(
        Yc(
          {
            text: r[0],
            json: r[1]
          },
          r[2],
          r[3]
        ),
        Uc
      ) + "") && Te(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function ex(t, e, n) {
  let { text: i } = e, { json: r } = e, { indentation: o } = e, { parser: s } = e;
  return t.$$set = (l) => {
    "text" in l && n(0, i = l.text), "json" in l && n(1, r = l.json), "indentation" in l && n(2, o = l.indentation), "parser" in l && n(3, s = l.parser);
  }, [i, r, o, s];
}
class tx extends Be {
  constructor(e) {
    super(), je(this, e, ex, $L, It, {
      text: 0,
      json: 1,
      indentation: 2,
      parser: 3
    });
  }
}
const BC = tx;
const { window: nx } = Gu;
function p_(t) {
  let e, n, i;
  function r(s) {
    t[75](s);
  }
  let o = {
    json: t[10],
    selection: t[16].selection,
    readOnly: t[0],
    historyState: t[22],
    onExpandAll: t[39],
    onCollapseAll: t[40],
    onUndo: t[35],
    onRedo: t[36],
    onSort: t[37],
    onTransform: t[38],
    onContextMenu: t[44],
    onCopy: t[33],
    onRenderMenu: t[7]
  };
  return t[19] !== void 0 && (o.showSearch = t[19]), e = new bL({ props: o }), mt.push(() => lr(e, "showSearch", r, t[19])), {
    c() {
      se(e.$$.fragment);
    },
    m(s, l) {
      re(e, s, l), i = !0;
    },
    p(s, l) {
      const a = {};
      l[0] & 1024 && (a.json = s[10]), l[0] & 65536 && (a.selection = s[16].selection), l[0] & 1 && (a.readOnly = s[0]), l[0] & 4194304 && (a.historyState = s[22]), l[0] & 128 && (a.onRenderMenu = s[7]), !n && l[0] & 524288 && (n = !0, a.showSearch = s[19], sr(() => n = !1)), e.$set(a);
    },
    i(s) {
      i || (C(e.$$.fragment, s), i = !0);
    },
    o(s) {
      E(e.$$.fragment, s), i = !1;
    },
    d(s) {
      oe(e, s);
    }
  };
}
function g_(t) {
  let e, n;
  return e = new HL({
    props: {
      json: t[10],
      documentState: t[16],
      onSelect: t[48],
      onError: t[6],
      pathParser: t[4]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1024 && (o.json = i[10]), r[0] & 65536 && (o.documentState = i[16]), r[0] & 64 && (o.onError = i[6]), r[0] & 16 && (o.pathParser = i[4]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function ix(t) {
  let e;
  return {
    c() {
      e = T("div"), e.innerHTML = `<div class="jse-loading-space svelte-qojdc1"></div> 
      <div class="jse-loading svelte-qojdc1">loading...</div>`, p(e, "class", "jse-contents svelte-qojdc1");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function rx(t) {
  let e, n, i, r, o, s, l, a, f;
  const c = [sx, ox], u = [];
  function h(d, m) {
    return d[10] === void 0 ? 0 : 1;
  }
  return r = h(t), o = u[r] = c[r](t), {
    c() {
      e = T("label"), n = T("input"), i = q(), o.c(), s = Ze(), p(n, "type", "text"), n.readOnly = "readonly", p(n, "tabindex", "-1"), p(n, "class", "jse-hidden-input svelte-qojdc1"), p(e, "class", "jse-hidden-input-label svelte-qojdc1");
    },
    m(d, m) {
      B(d, e, m), y(e, n), t[76](n), B(d, i, m), u[r].m(d, m), B(d, s, m), l = !0, a || (f = X(n, "paste", t[34]), a = !0);
    },
    p(d, m) {
      let g = r;
      r = h(d), r === g ? u[r].p(d, m) : (me(), E(u[g], 1, 1, () => {
        u[g] = null;
      }), pe(), o = u[r], o ? o.p(d, m) : (o = u[r] = c[r](d), o.c()), C(o, 1), o.m(s.parentNode, s));
    },
    i(d) {
      l || (C(o), l = !0);
    },
    o(d) {
      E(o), l = !1;
    },
    d(d) {
      d && j(e), t[76](null), d && j(i), u[r].d(d), d && j(s), a = !1, f();
    }
  };
}
function ox(t) {
  var d, m, g, _;
  let e, n, i, r, o, s, l, a, f, c;
  n = new XL({
    props: {
      show: t[19],
      resultCount: ((m = (d = t[17]) == null ? void 0 : d.items) == null ? void 0 : m.length) || 0,
      activeIndex: ((g = t[17]) == null ? void 0 : g.activeIndex) || 0,
      showReplace: t[20],
      searching: t[21],
      readOnly: t[0],
      onChange: t[26],
      onNext: t[27],
      onPrevious: t[28],
      onReplace: t[29],
      onReplaceAll: t[30],
      onClose: t[31]
    }
  }), o = new fL({
    props: {
      value: t[10],
      path: [],
      expandedMap: t[16].expandedMap,
      enforceStringMap: t[16].enforceStringMap,
      visibleSectionsMap: t[16].visibleSectionsMap,
      validationErrorsMap: t[24],
      searchResultItemsMap: (_ = t[17]) == null ? void 0 : _.itemsMap,
      selection: t[16].selection,
      context: t[13],
      onDragSelectionStart: nn
    }
  });
  let u = t[18] && b_(t), h = t[23] && __(t);
  return f = new lg({
    props: {
      validationErrors: t[12],
      selectError: t[32]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), r = T("div"), se(o.$$.fragment), s = q(), u && u.c(), l = q(), h && h.c(), a = q(), se(f.$$.fragment), p(e, "class", "jse-search-box-container svelte-qojdc1"), p(r, "class", "jse-contents svelte-qojdc1"), p(r, "data-jsoneditor-scrollable-contents", !0);
    },
    m(b, w) {
      B(b, e, w), re(n, e, null), B(b, i, w), B(b, r, w), re(o, r, null), t[77](r), B(b, s, w), u && u.m(b, w), B(b, l, w), h && h.m(b, w), B(b, a, w), re(f, b, w), c = !0;
    },
    p(b, w) {
      var R, k, I, L;
      const v = {};
      w[0] & 524288 && (v.show = b[19]), w[0] & 131072 && (v.resultCount = ((k = (R = b[17]) == null ? void 0 : R.items) == null ? void 0 : k.length) || 0), w[0] & 131072 && (v.activeIndex = ((I = b[17]) == null ? void 0 : I.activeIndex) || 0), w[0] & 1048576 && (v.showReplace = b[20]), w[0] & 2097152 && (v.searching = b[21]), w[0] & 1 && (v.readOnly = b[0]), n.$set(v);
      const M = {};
      w[0] & 1024 && (M.value = b[10]), w[0] & 65536 && (M.expandedMap = b[16].expandedMap), w[0] & 65536 && (M.enforceStringMap = b[16].enforceStringMap), w[0] & 65536 && (M.visibleSectionsMap = b[16].visibleSectionsMap), w[0] & 16777216 && (M.validationErrorsMap = b[24]), w[0] & 131072 && (M.searchResultItemsMap = (L = b[17]) == null ? void 0 : L.itemsMap), w[0] & 65536 && (M.selection = b[16].selection), w[0] & 8192 && (M.context = b[13]), o.$set(M), b[18] ? u ? (u.p(b, w), w[0] & 262144 && C(u, 1)) : (u = b_(b), u.c(), C(u, 1), u.m(l.parentNode, l)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), b[23] ? h ? (h.p(b, w), w[0] & 8388608 && C(h, 1)) : (h = __(b), h.c(), C(h, 1), h.m(a.parentNode, a)) : h && (me(), E(h, 1, 1, () => {
        h = null;
      }), pe());
      const S = {};
      w[0] & 4096 && (S.validationErrors = b[12]), f.$set(S);
    },
    i(b) {
      c || (C(n.$$.fragment, b), C(o.$$.fragment, b), C(u), C(h), C(f.$$.fragment, b), c = !0);
    },
    o(b) {
      E(n.$$.fragment, b), E(o.$$.fragment, b), E(u), E(h), E(f.$$.fragment, b), c = !1;
    },
    d(b) {
      b && j(e), oe(n), b && j(i), b && j(r), oe(o), t[77](null), b && j(s), u && u.d(b), b && j(l), h && h.d(b), b && j(a), oe(f, b);
    }
  };
}
function sx(t) {
  let e, n, i, r;
  const o = [ax, lx], s = [];
  function l(a, f) {
    return a[11] === "" || a[11] === void 0 ? 0 : 1;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = Ze();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), pe(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), C(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (C(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function b_(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[18].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: _h,
          text: "Paste as JSON instead",
          onMouseDown: t[45]
        },
        {
          text: "Leave as is",
          onClick: t[46]
        }
      ]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 262144 && (o.message = `You pasted a JSON ${Array.isArray(i[18].contents) ? "array" : "object"} as text`), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function __(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: La,
          text: "Ok",
          onClick: t[8]
        },
        {
          icon: qo,
          text: "Repair manually instead",
          onClick: t[47]
        }
      ]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.actions = i[0] ? [] : [
        {
          icon: La,
          text: "Ok",
          onClick: i[8]
        },
        {
          icon: qo,
          text: "Repair manually instead",
          onClick: i[47]
        }
      ]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function lx(t) {
  let e, n, i, r;
  return e = new Zr({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: qo,
          text: "Repair manually",
          onClick: t[47]
        }
      ]
    }
  }), i = new BC({
    props: {
      text: t[11],
      json: t[10],
      indentation: t[5],
      parser: t[3]
    }
  }), {
    c() {
      se(e.$$.fragment), n = q(), se(i.$$.fragment);
    },
    m(o, s) {
      re(e, o, s), B(o, n, s), re(i, o, s), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 1 && (l.actions = o[0] ? [] : [
        {
          icon: qo,
          text: "Repair manually",
          onClick: o[47]
        }
      ]), e.$set(l);
      const a = {};
      s[0] & 2048 && (a.text = o[11]), s[0] & 1024 && (a.json = o[10]), s[0] & 32 && (a.indentation = o[5]), s[0] & 8 && (a.parser = o[3]), i.$set(a);
    },
    i(o) {
      r || (C(e.$$.fragment, o), C(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(e.$$.fragment, o), E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      oe(e, o), o && j(n), oe(i, o);
    }
  };
}
function ax(t) {
  let e, n;
  return e = new vL({ props: { readOnly: t[0] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.readOnly = i[0]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function fx(t) {
  let e, n, i, r, o, s, l, a, f = t[1] && p_(t), c = t[2] && g_(t);
  const u = [rx, ix], h = [];
  function d(m, g) {
    return m[25] ? 1 : 0;
  }
  return r = d(t), o = h[r] = u[r](t), {
    c() {
      e = T("div"), f && f.c(), n = q(), c && c.c(), i = q(), o.c(), p(e, "class", "jse-tree-mode svelte-qojdc1"), de(e, "no-main-menu", !t[1]);
    },
    m(m, g) {
      B(m, e, g), f && f.m(e, null), y(e, n), c && c.m(e, null), y(e, i), h[r].m(e, null), t[78](e), s = !0, l || (a = [
        X(nx, "mousedown", t[49]),
        X(e, "keydown", t[41]),
        X(e, "mousedown", t[42]),
        X(e, "contextmenu", t[43])
      ], l = !0);
    },
    p(m, g) {
      m[1] ? f ? (f.p(m, g), g[0] & 2 && C(f, 1)) : (f = p_(m), f.c(), C(f, 1), f.m(e, n)) : f && (me(), E(f, 1, 1, () => {
        f = null;
      }), pe()), m[2] ? c ? (c.p(m, g), g[0] & 4 && C(c, 1)) : (c = g_(m), c.c(), C(c, 1), c.m(e, i)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), pe()), o.p(m, g), (!s || g[0] & 2) && de(e, "no-main-menu", !m[1]);
    },
    i(m) {
      s || (C(f), C(c), C(o), s = !0);
    },
    o(m) {
      E(f), E(c), E(o), s = !1;
    },
    d(m) {
      m && j(e), f && f.d(), c && c.d(), h[r].d(), t[78](null), l = !1, et(a);
    }
  };
}
function cx(t, e, n) {
  let i;
  const r = Qn("jsoneditor:TreeMode"), o = typeof window > "u";
  r("isSSR:", o);
  const { open: s } = Xn("simple-modal"), l = vl(), a = vl(), { openAbsolutePopup: f, closeAbsolutePopup: c } = Xn("absolute-popup");
  let u, h, d, m = !1;
  const g = vC();
  let { readOnly: _ } = e, { externalContent: b } = e, { mainMenuBar: w } = e, { navigationBar: v } = e, { escapeControlCharacters: M } = e, { escapeUnicodeCharacters: S } = e, { parser: R } = e, { parseMemoizeOne: k } = e, { validator: I } = e, { validationParser: L } = e, { pathParser: V } = e, { indentation: N } = e, { onError: W } = e, { onChange: U } = e, { onChangeMode: O } = e, { onRenderValue: x } = e, { onRenderMenu: A } = e, { onClassName: H } = e, { onFocus: D } = e, { onBlur: P } = e, { onSortModal: K } = e, { onTransformModal: ne } = e, { onJSONEditorModal: z } = e, Z = !1;
  sg({
    onMount: zi,
    onDestroy: qr,
    getWindow: () => Wl(d),
    hasFocus: () => Z && document.hasFocus() || $c(d),
    onFocus: () => {
      m = !0, D && D();
    },
    onBlur: () => {
      m = !1, P && P();
    }
  });
  let te, G, Ae;
  function ke(F) {
    r("updateSelection", F);
    const ue = typeof F == "function" ? F(ee.selection) : F;
    St(ue, ee.selection) || n(16, ee = {
      ...ee,
      selection: ue
    });
  }
  let ze = !1, ee = tu(), we, tt, ge, ie = !1, ve = !1, Xe = !1, he = "";
  async function Ve(F) {
    r("search text updated", F), n(74, he = F), await Ni(), await Oe();
  }
  async function Ie() {
    n(17, we = we ? MI(we) : void 0), await Oe();
  }
  async function qe() {
    n(17, we = we ? AI(we) : void 0), await Oe();
  }
  async function ct(F, ue) {
    const Ee = we == null ? void 0 : we.activeItem;
    if (r("handleReplace", { replacementText: ue, activeItem: Ee }), !Ee)
      return;
    const { operations: dt, newSelection: Ne } = OI(te, ee, ue, Ee, R);
    zn(dt, (Jt, Fn) => ({
      state: { ...Fn, selection: Ne }
    })), await Ni(), await Oe();
  }
  async function yt(F, ue) {
    r("handleReplaceAll", { text: F, replacementText: ue });
    const { operations: Ee, newSelection: dt } = TI(te, ee, F, ue, R);
    zn(Ee, (Ne, Jt) => ({
      state: { ...Jt, selection: dt }
    })), await Ni(), await Oe();
  }
  function Fe() {
    n(19, ie = !1), n(20, ve = !1), Ve(""), Pe();
  }
  async function Oe() {
    const F = we == null ? void 0 : we.activeItem;
    if (r("focusActiveSearchResult", we), F) {
      const ue = F.path;
      n(16, ee = {
        ...wm(te, ee, ue),
        selection: void 0
      }), await Ni(), await Ut(ue);
    }
  }
  function ae(F, ue) {
    if (F === "") {
      r("clearing search result"), we !== void 0 && n(17, we = void 0);
      return;
    }
    n(21, Xe = !0), setTimeout(() => {
      r("searching...", F);
      const Ee = aC(F, ue, ee, Zd);
      n(17, we = SI(ue, Ee, we)), n(21, Xe = !1);
    });
  }
  function xe(F) {
    r("select validation error", F), ke(Et(F.path, !1)), Ut(F.path);
  }
  const ht = kC({
    onChange: (F) => {
      n(22, ft = F);
    }
  });
  let ft = ht.getState();
  function _n(F = ja) {
    r("expand");
    const ue = {
      ...ee,
      expandedMap: {},
      visibleSectionsMap: {}
    };
    n(16, ee = Hi(te, ue, [], F));
  }
  const Yn = v9(ae, C8);
  let nt = !1, sn = [], Dt;
  const yi = pf(CC);
  function Zn(F, ue, Ee, dt) {
    tl(
      () => {
        let Ne;
        try {
          Ne = yi(F, ue, Ee, dt);
        } catch (Jt) {
          Ne = [
            {
              path: [],
              message: "Failed to validate: " + Jt.message,
              severity: Fo.warning
            }
          ];
        }
        St(Ne, sn) || (r("validationErrors changed:", Ne), n(12, sn = Ne));
      },
      (Ne) => r(`validationErrors updated in ${Ne} ms`)
    );
  }
  function Vt() {
    return r("validate"), Ae ? {
      parseError: Ae,
      isRepairable: !1
    } : (Zn(te, I, R, L), { validationErrors: sn });
  }
  function Q() {
    return te;
  }
  function ye() {
    return ee;
  }
  function at(F) {
    F.json !== void 0 && pt(F.json), F.text !== void 0 && Wt(F.text);
  }
  function pt(F) {
    if (F === void 0)
      return;
    const ue = !St(te, F);
    if (r("update external json", {
      isChanged: ue,
      currentlyText: te === void 0
    }), !ue)
      return;
    const Ee = { json: te, text: G }, dt = ee, Ne = te, Jt = G, Fn = nt;
    n(10, te = F), Ot(te), n(11, G = void 0), n(23, nt = !1), yn(te), Pn({
      previousJson: Ne,
      previousState: dt,
      previousText: Jt,
      previousTextIsRepaired: Fn
    }), Ri(Ee, null);
  }
  function Wt(F) {
    if (F === void 0 || b.json !== void 0)
      return;
    const ue = F !== G;
    if (r("update external text", { isChanged: ue }), !ue)
      return;
    const Ee = { json: te, text: G }, dt = te, Ne = ee, Jt = G, Fn = nt;
    try {
      n(10, te = k(F)), Ot(te), n(11, G = F), n(23, nt = !1), Ae = void 0;
    } catch (dn) {
      try {
        n(10, te = k(Lr(F))), Ot(te), n(11, G = F), n(23, nt = !0), Ae = void 0, yn(te);
      } catch {
        n(10, te = void 0), n(11, G = b.text), n(23, nt = !1), Ae = dh(G, dn.message || dn.toString());
      }
    }
    yn(te), Pn({
      previousJson: dt,
      previousState: Ne,
      previousText: Jt,
      previousTextIsRepaired: Fn
    }), Ri(Ee, null);
  }
  function Ot(F) {
    ze || (ze = !0, n(16, ee = Hi(F, ee, [], tI(F))));
  }
  function yn(F) {
    ee.selection !== void 0 && (ee.selection && Ki(F, ee.selection.anchorPath) && Ki(F, ee.selection.focusPath) || (r("clearing selection: path does not exist anymore", ee.selection), n(16, ee = {
      ...ee,
      selection: Xs(F, ee)
    })));
  }
  function Pn({ previousJson: F, previousState: ue, previousText: Ee, previousTextIsRepaired: dt }) {
    F === void 0 && Ee === void 0 || (te !== void 0 ? F !== void 0 ? ht.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: F
          }
        ],
        state: li(ue),
        json: void 0,
        text: Ee,
        textIsRepaired: dt
      },
      redo: {
        patch: [{ op: "replace", path: "", value: te }],
        state: li(ee),
        json: void 0,
        text: G,
        textIsRepaired: nt
      }
    }) : ht.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: Ee,
        state: li(ue),
        textIsRepaired: dt
      },
      redo: {
        patch: void 0,
        json: te,
        state: li(ee),
        text: G,
        textIsRepaired: nt
      }
    }) : F !== void 0 && ht.add({
      undo: {
        patch: void 0,
        json: F,
        state: li(ue),
        text: Ee,
        textIsRepaired: dt
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: G,
        textIsRepaired: nt,
        state: li(ee)
      }
    }));
  }
  function Cn() {
    r("createDefaultSelection"), n(16, ee = {
      ...ee,
      selection: vn(te || {}, [], [])
    });
  }
  function ln(F, ue) {
    if (r("patch", F, ue), te === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const Ee = { json: te, text: G }, dt = te, Ne = ee, Jt = G, Fn = nt, Sr = lC(te, F), dn = q3(te, ee, F), as = Ml(te, F), o1 = fI(dn.documentState, as, !1);
    r("patch updatedSelection", as);
    const qs = typeof ue == "function" ? ue(dn.json, o1) : void 0;
    n(10, te = qs && qs.json !== void 0 ? qs.json : dn.json);
    const s1 = qs && qs.state !== void 0 ? qs.state : o1;
    n(16, ee = s1), n(11, G = void 0), n(23, nt = !1), n(18, ge = void 0), yn(te), ht.add({
      undo: {
        patch: Sr,
        json: void 0,
        text: Jt,
        state: li(Ne),
        textIsRepaired: Fn
      },
      redo: {
        patch: F,
        json: void 0,
        state: li(s1),
        text: G,
        textIsRepaired: nt
      }
    });
    const l1 = {
      json: te,
      previousJson: dt,
      undo: Sr,
      redo: F
    };
    return Ri(Ee, l1), l1;
  }
  function Rn() {
    _ || !ee.selection || ke(Gi(ee.selection.focusPath, !0));
  }
  function Ei() {
    if (_ || !ee.selection)
      return;
    const F = ee.selection.focusPath, ue = Le(te, F);
    rn(ue) ? Ue(F, ue) : ke(Et(F, !0));
  }
  function wi() {
    if (_ || !vt(ee.selection))
      return;
    const F = ee.selection.focusPath, ue = Se(F), Ee = Le(te, F), dt = !uo(Ee, ee.enforceStringMap, ue, R), Ne = dt ? String(Ee) : zl(String(Ee), R);
    r("handleToggleEnforceString", { enforceString: dt, value: Ee, updatedValue: Ne }), zn(
      [
        {
          op: "replace",
          path: ue,
          value: Ne
        }
      ],
      (Jt, Fn) => ({
        state: U3(Fn, ue, dt)
      })
    );
  }
  function si() {
    return nt && te !== void 0 && ls(te), { json: te, text: G };
  }
  async function Ln(F = !0) {
    await RC({
      json: te,
      documentState: ee,
      indentation: F ? N : void 0,
      readOnly: _,
      parser: R,
      onPatch: zn
    });
  }
  async function Pi(F = !0) {
    await IC({
      json: te,
      documentState: ee,
      indentation: F ? N : void 0,
      parser: R
    });
  }
  function Nt(F) {
    F.preventDefault();
    const ue = F.clipboardData.getData("text/plain");
    NC({
      clipboardText: ue,
      json: te,
      documentState: ee,
      readOnly: _,
      parser: R,
      onPatch: zn,
      onChangeText: J,
      openRepairModal: st
    });
  }
  function ce() {
    s(
      SC,
      {},
      {
        ...Ts,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Pe() }
    );
  }
  function st(F, ue) {
    s(
      AC,
      {
        text: F,
        onParse: hh,
        onRepair: A3,
        onApply: ue
      },
      {
        ...Ts,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Pe() }
    );
  }
  function bt() {
    DC({
      json: te,
      text: G,
      documentState: ee,
      keepSelection: !1,
      readOnly: _,
      onChange: U,
      onPatch: zn
    });
  }
  function Ft() {
    if (_ || !iC(ee.selection) || At(ee.selection.focusPath))
      return;
    r("duplicate", { selection: ee.selection });
    const F = yI(te, nC(ee.selection));
    zn(F);
  }
  function wt() {
    if (_ || !ee.selection || !Pt(ee.selection) && !vt(ee.selection) || At(ee.selection.focusPath))
      return;
    r("extract", { selection: ee.selection });
    const F = wI(te, ee.selection);
    zn(F, (ue, Ee) => {
      if (rn(ue))
        return {
          state: Eo(ue, Ee, [])
        };
    });
  }
  function it(F) {
    ou({
      insertType: F,
      selectInside: !0,
      refJsonEditor: d,
      json: te,
      documentState: ee,
      readOnly: _,
      parser: R,
      onPatch: zn,
      onReplaceJson: ls
    });
  }
  function Rt(F) {
    kn(ee.selection) && ke(Et(ee.selection.focusPath, !1)), it(F);
  }
  function Zt(F) {
    if (!(_ || !ee.selection)) {
      if (!Cs(ee.selection)) {
        W(new Error(`Cannot convert current selection to ${F}`));
        return;
      }
      try {
        const ue = ee.selection.anchorPath, Ee = Le(te, ue), dt = P9(Ee, F, R);
        if (dt === Ee)
          return;
        const Ne = [
          {
            op: "replace",
            path: Se(ue),
            value: dt
          }
        ];
        r("handleConvert", {
          selection: ee.selection,
          path: ue,
          type: F,
          operations: Ne
        }), zn(Ne, (Jt, Fn) => ({
          state: Eo(Jt, Fn, ee.selection.focusPath)
        }));
      } catch (ue) {
        W(ue);
      }
    }
  }
  function hn() {
    const F = J0(te, ee, !1), ue = kt(ee.selection.focusPath);
    !At(F.focusPath) && St(ue, kt(F.focusPath)) ? ke(mo(F.focusPath)) : ke(ho(ue)), r("insert before", {
      selection: ee.selection,
      selectionBefore: F,
      parentPath: ue
    }), Ni().then(ki);
  }
  function an() {
    const F = Pt(ee.selection) ? $e(ee.selection.paths) : ee.selection.focusPath;
    r("insert after", F), ke(mo(F)), Ni().then(ki);
  }
  async function er(F) {
    await jC({
      char: F,
      selectInside: !0,
      refJsonEditor: d,
      json: te,
      documentState: ee,
      readOnly: _,
      parser: R,
      onPatch: zn,
      onReplaceJson: ls,
      onSelect: ke
    });
  }
  function vi() {
    if (_ || !ht.getState().canUndo)
      return;
    const F = ht.undo();
    if (!F)
      return;
    const ue = { json: te, text: G };
    n(10, te = F.undo.patch ? mr(te, F.undo.patch) : F.undo.json), n(16, ee = F.undo.state), n(11, G = F.undo.text), n(23, nt = F.undo.textIsRepaired), r("undo", { item: F, json: te, documentState: ee });
    const Ee = {
      json: te,
      previousJson: ue.json,
      redo: F.undo.patch,
      undo: F.redo.patch
    };
    Ri(ue, Ee), Pe(), ee.selection && Ut(ee.selection.focusPath, !1);
  }
  function Jn() {
    if (_ || !ht.getState().canRedo)
      return;
    const F = ht.redo();
    if (!F)
      return;
    const ue = { json: te, text: G };
    n(10, te = F.redo.patch ? mr(te, F.redo.patch) : F.redo.json), n(16, ee = F.redo.state), n(11, G = F.redo.text), n(23, nt = F.redo.textIsRepaired), r("redo", { item: F, json: te, documentState: ee });
    const Ee = {
      json: te,
      previousJson: ue.json,
      redo: F.redo.patch,
      undo: F.undo.patch
    };
    Ri(ue, Ee), Pe(), ee.selection && Ut(ee.selection.focusPath, !1);
  }
  function $t(F) {
    _ || (Z = !0, K({
      id: l,
      json: te,
      rootPath: F,
      onSort: async ({ operations: ue }) => {
        r("onSort", F, ue), zn(ue, (Ee, dt) => ({
          state: {
            ...Eo(Ee, dt, F),
            selection: Et(F, !1)
          }
        }));
      },
      onClose: () => {
        Z = !1, Pe();
      }
    }));
  }
  function xn() {
    if (!ee.selection)
      return;
    const F = K0(te, ee.selection);
    $t(F);
  }
  function In() {
    $t([]);
  }
  function Fi({ id: F, rootPath: ue, onTransform: Ee, onClose: dt }) {
    Z = !0, ne({
      id: F || a,
      json: te,
      rootPath: ue,
      onTransform: Ee ? (Ne) => {
        Ee({
          operations: Ne,
          json: te,
          transformedJson: mr(te, Ne)
        });
      } : (Ne) => {
        r("onTransform", ue, Ne), zn(Ne, (Jt, Fn) => ({
          state: {
            ...Eo(Jt, Fn, ue),
            selection: Et(ue, !1)
          }
        }));
      },
      onClose: () => {
        Z = !1, Pe(), dt && dt();
      }
    });
  }
  function Cr() {
    if (!ee.selection)
      return;
    const F = K0(te, ee.selection);
    Fi({ rootPath: F });
  }
  function Ce() {
    Fi({ rootPath: [] });
  }
  function Ue(F, ue) {
    r("openJSONEditorModal", { path: F, value: ue }), Z = !0, z({
      content: { json: ue },
      path: F,
      onPatch: Sf.onPatch,
      onClose: () => {
        Z = !1, Pe();
      }
    });
  }
  async function Ut(F, ue = !0) {
    n(16, ee = wm(te, ee, kt(F))), await Ni();
    const Ee = wo(F);
    if (Ee) {
      r("scrollTo", { path: F, elem: Ee, refContents: u });
      const dt = u.getBoundingClientRect(), Ne = Ee.getBoundingClientRect();
      if (!ue && Ne.bottom > dt.top && Ne.top < dt.bottom)
        return;
      const Jt = -(dt.height / 4);
      g(Ee, {
        container: u,
        offset: Jt,
        duration: Yd
      });
    }
  }
  function wo(F) {
    return u ? u.querySelector(`div[data-path="${Cl(F)}"]`) : null;
  }
  function vo(F) {
    const ue = wo(F);
    if (!ue || !u)
      return;
    const Ee = u.getBoundingClientRect(), dt = ue.getBoundingClientRect(), Ne = 20, Jt = rn(Le(te, F)) ? Ne : dt.height;
    dt.top < Ee.top + Ne ? g(ue, {
      container: u,
      offset: -Ne,
      duration: 0
    }) : dt.top + Jt > Ee.bottom - Ne && g(ue, {
      container: u,
      offset: -(Ee.height - Jt - Ne),
      duration: 0
    });
  }
  function Ri(F, ue) {
    F.json === void 0 && (F == null ? void 0 : F.text) === void 0 || (G !== void 0 ? U({ text: G, json: void 0 }, F, { contentErrors: Vt(), patchResult: ue }) : te !== void 0 && U({ text: void 0, json: te }, F, { contentErrors: Vt(), patchResult: ue }));
  }
  function zn(F, ue) {
    if (!_)
      return r("handlePatch", F, ue), ln(F, ue);
  }
  function ls(F, ue) {
    const Ee = ee, dt = te, Ne = G, Jt = { json: te, text: G }, Fn = nt, Sr = Hi(te, ee, [], Nr), dn = typeof ue == "function" ? ue(F, Sr) : void 0;
    n(10, te = dn && dn.json !== void 0 ? dn.json : F), n(16, ee = dn && dn.state !== void 0 ? dn.state : Sr), n(11, G = void 0), n(23, nt = !1), yn(te), Pn({
      previousJson: dt,
      previousState: Ee,
      previousText: Ne,
      previousTextIsRepaired: Fn
    }), Ri(Jt, null);
  }
  function J(F, ue) {
    r("handleChangeText");
    const Ee = ee, dt = te, Ne = G, Jt = { json: te, text: G }, Fn = nt;
    try {
      n(10, te = k(F)), n(16, ee = Hi(te, ee, [], Nr)), n(11, G = void 0), n(23, nt = !1);
    } catch {
      try {
        n(10, te = k(Lr(F))), n(16, ee = Hi(te, ee, [], Nr)), n(11, G = F), n(23, nt = !0);
      } catch {
        n(10, te = void 0), n(16, ee = tu({ json: te, expand: Nr })), n(11, G = F), n(23, nt = !1);
      }
    }
    if (typeof ue == "function") {
      const dn = ue(te, ee);
      n(10, te = dn && dn.json ? dn.json : te), n(16, ee = dn && dn.state ? dn.state : ee);
    }
    yn(te), Pn({
      previousJson: dt,
      previousState: Ee,
      previousText: Ne,
      previousTextIsRepaired: Fn
    }), Ri(Jt, null);
  }
  function be(F, ue, Ee = !1) {
    r("expand", { path: F, expanded: ue, recursive: Ee }), ue ? Ee ? n(16, ee = Hi(te, ee, F, ja)) : n(16, ee = QR(ee, F)) : n(16, ee = W3(ee, F)), ee.selection && !ue && iI(ee.selection, F) && ke(void 0), setTimeout(() => {
      $c(d) || Pe();
    });
  }
  function We() {
    be([], !0, !0);
  }
  function Je() {
    be([], !1, !0);
  }
  function lt(F) {
    r("openFind", { findAndReplace: F }), n(19, ie = !1), n(20, ve = !1), Ni().then(() => {
      n(19, ie = !0), n(20, ve = F);
    });
  }
  function Kt(F, ue) {
    r("handleExpandSection", F, ue);
    const Ee = Se(F);
    n(16, ee = YR(te, ee, Ee, ue));
  }
  function wn(F) {
    r("pasted json as text", F), n(18, ge = F);
  }
  function Vn(F) {
    const ue = es(F).replace(/^Command\+/, "Ctrl+"), Ee = F.shiftKey;
    if (r("keydown", { combo: ue, key: F.key }), ue === "Ctrl+X" && (F.preventDefault(), Ln(!0)), ue === "Ctrl+Shift+X" && (F.preventDefault(), Ln(!1)), ue === "Ctrl+C" && (F.preventDefault(), Pi(!0)), ue === "Ctrl+Shift+C" && (F.preventDefault(), Pi(!1)), ue === "Ctrl+D" && (F.preventDefault(), Ft()), (ue === "Delete" || ue === "Backspace") && (F.preventDefault(), bt()), ue === "Insert" && (F.preventDefault(), it("structure")), ue === "Ctrl+A" && (F.preventDefault(), ke(cI())), ue === "Ctrl+Q" && ki(F), ue === "Up" || ue === "Shift+Up") {
      F.preventDefault();
      const Ne = ee.selection ? J0(te, ee, Ee, !0) || ee.selection : Xs(te, ee);
      ke(Ne), vo(Ne.focusPath);
    }
    if (ue === "Down" || ue === "Shift+Down") {
      F.preventDefault();
      const Ne = ee.selection ? rI(te, ee, Ee, !0) || ee.selection : Xs(te, ee);
      ke(Ne), vo(Ne.focusPath);
    }
    if (ue === "Left" || ue === "Shift+Left") {
      F.preventDefault();
      const Ne = ee.selection ? sI(te, ee, Ee, !_) || ee.selection : Xs(te, ee);
      ke(Ne), vo(Ne.focusPath);
    }
    if (ue === "Right" || ue === "Shift+Right") {
      F.preventDefault();
      const Ne = ee.selection ? lI(te, ee, Ee, !_) || ee.selection : Xs(te, ee);
      ke(Ne), vo(Ne.focusPath);
    }
    if (ue === "Enter" && ee.selection) {
      if (!_ && Pt(ee.selection) && ee.selection.paths.length === 1) {
        const Ne = ee.selection.focusPath, Jt = Le(te, kt(Ne));
        Array.isArray(Jt) && ke(Et(Ne, !1));
      }
      if (!_ && kn(ee.selection) && (F.preventDefault(), ke({ ...ee.selection, edit: !0 })), vt(ee.selection)) {
        F.preventDefault();
        const Ne = Le(te, ee.selection.focusPath);
        rn(Ne) ? be(ee.selection.focusPath, !0) : _ || ke({ ...ee.selection, edit: !0 });
      }
    }
    if (ue.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && ee.selection) {
      F.preventDefault(), er(F.key);
      return;
    }
    if (ue === "Enter" && (ur(ee.selection) || Dn(ee.selection))) {
      F.preventDefault(), er("");
      return;
    }
    if (ue === "Ctrl+Enter" && vt(ee.selection)) {
      const Ne = Le(te, ee.selection.focusPath);
      Zu(Ne) && window.open(String(Ne), "_blank");
    }
    if (ue === "Escape" && ee.selection && (F.preventDefault(), ke(void 0)), ue === "Ctrl+F" && (F.preventDefault(), lt(!1)), ue === "Ctrl+H" && (F.preventDefault(), lt(!0)), ue === "Ctrl+Z") {
      F.preventDefault();
      const Ne = document.activeElement;
      Ne && Ne.blur && Ne.focus ? (Ne.blur(), setTimeout(() => {
        vi(), setTimeout(() => Ne.select());
      })) : vi();
    }
    if (ue === "Ctrl+Shift+Z") {
      F.preventDefault();
      const Ne = document.activeElement;
      Ne && Ne.blur && Ne.focus ? (Ne.blur(), setTimeout(() => {
        Jn(), setTimeout(() => Ne.select());
      })) : Jn();
    }
  }
  function qt(F) {
    r("handleMouseDown", F), setTimeout(() => {
      setTimeout(() => {
        !m && !D3(F.target, "BUTTON") && (Pe(), !ee.selection && te === void 0 && (G === "" || G === void 0) && Cn());
      });
    });
  }
  function $n({ anchor: F, left: ue, top: Ee, width: dt, height: Ne, offsetTop: Jt, offsetLeft: Fn, showTip: Sr }) {
    const dn = {
      json: te,
      documentState: ee,
      parser: R,
      showTip: Sr,
      onEditKey: Rn,
      onEditValue: Ei,
      onToggleEnforceString: wi,
      onCut: Ln,
      onCopy: Pi,
      onPaste: ce,
      onRemove: bt,
      onDuplicate: Ft,
      onExtract: wt,
      onInsertBefore: hn,
      onInsert: Rt,
      onConvert: Zt,
      onInsertAfter: an,
      onSort: xn,
      onTransform: Cr,
      onCloseContextMenu() {
        c(as), Pe();
      }
    };
    Z = !0;
    const as = f(dB, dn, {
      left: ue,
      top: Ee,
      offsetTop: Jt,
      offsetLeft: Fn,
      width: dt,
      height: Ne,
      anchor: F,
      closeOnOuterClick: !0,
      onClose: () => {
        Z = !1, Pe();
      }
    });
  }
  function ki(F) {
    if (!(_ || Uo(ee.selection))) {
      if (F && (F.stopPropagation(), F.preventDefault()), F && F.type === "contextmenu" && F.target !== h)
        $n({
          left: F.clientX,
          top: F.clientY,
          width: so,
          height: oo,
          showTip: !1
        });
      else {
        const ue = u == null ? void 0 : u.querySelector(".jse-context-menu-pointer.jse-selected");
        if (ue)
          $n({
            anchor: ue,
            offsetTop: 2,
            width: so,
            height: oo,
            showTip: !1
          });
        else {
          const Ee = u == null ? void 0 : u.getBoundingClientRect();
          Ee && $n({
            top: Ee.top + 2,
            left: Ee.left + 2,
            width: so,
            height: oo,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function Ws(F) {
    _ || $n({
      anchor: B3(F.target, "BUTTON"),
      offsetTop: 0,
      width: so,
      height: oo,
      showTip: !0
    });
  }
  async function Us() {
    r("apply pasted json", ge);
    const { path: F, contents: ue } = ge;
    ke(Et(F, !1)), await Ni();
    const Ee = [
      {
        op: "replace",
        path: Se(F),
        value: ue
      }
    ];
    zn(Ee, (dt, Ne) => ({
      state: Eo(dt, Ne, F)
    }));
  }
  function Kh() {
    r("clear pasted json"), n(18, ge = void 0);
  }
  function Gh() {
    O(ni.text);
  }
  function Y(F) {
    ke(F), Pe(), Ut(F.focusPath);
  }
  function Pe() {
    r("focus"), h && (h.focus(), h.select());
  }
  function fn(F) {
    !ff(F.target, (Ee) => Ee === d) && Uo(ee.selection) && (r("click outside the editor, stop edit mode"), ke((Ee) => kn(Ee) ? { ...Ee, edit: !1 } : vt(Ee) ? { ...Ee, edit: !1 } : Ee), m && h && (h.focus(), h.blur()), Ni().then(() => {
      setTimeout(() => {
        h && h.blur();
      });
    }));
  }
  function tr(F) {
    return oI(te, ee, F);
  }
  function ko(F) {
    i && i.onDrag(F);
  }
  function nr() {
    i && i.onDragEnd();
  }
  let Sf;
  function d6(F) {
    ie = F, n(19, ie);
  }
  function m6(F) {
    mt[F ? "unshift" : "push"](() => {
      h = F, n(14, h);
    });
  }
  function p6(F) {
    mt[F ? "unshift" : "push"](() => {
      u = F, n(9, u);
    });
  }
  function g6(F) {
    mt[F ? "unshift" : "push"](() => {
      d = F, n(15, d);
    });
  }
  return t.$$set = (F) => {
    "readOnly" in F && n(0, _ = F.readOnly), "externalContent" in F && n(50, b = F.externalContent), "mainMenuBar" in F && n(1, w = F.mainMenuBar), "navigationBar" in F && n(2, v = F.navigationBar), "escapeControlCharacters" in F && n(51, M = F.escapeControlCharacters), "escapeUnicodeCharacters" in F && n(52, S = F.escapeUnicodeCharacters), "parser" in F && n(3, R = F.parser), "parseMemoizeOne" in F && n(53, k = F.parseMemoizeOne), "validator" in F && n(54, I = F.validator), "validationParser" in F && n(55, L = F.validationParser), "pathParser" in F && n(4, V = F.pathParser), "indentation" in F && n(5, N = F.indentation), "onError" in F && n(6, W = F.onError), "onChange" in F && n(56, U = F.onChange), "onChangeMode" in F && n(57, O = F.onChangeMode), "onRenderValue" in F && n(58, x = F.onRenderValue), "onRenderMenu" in F && n(7, A = F.onRenderMenu), "onClassName" in F && n(59, H = F.onClassName), "onFocus" in F && n(60, D = F.onFocus), "onBlur" in F && n(61, P = F.onBlur), "onSortModal" in F && n(62, K = F.onSortModal), "onTransformModal" in F && n(63, ne = F.onTransformModal), "onJSONEditorModal" in F && n(64, z = F.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 3145728 && n(73, tt = Gp({
      escapeControlCharacters: M,
      escapeUnicodeCharacters: S
    })), t.$$.dirty[1] & 524288 && at(b), t.$$.dirty[0] & 1024 | t.$$.dirty[2] & 4096 && Yn(he, te), t.$$.dirty[0] & 3072, t.$$.dirty[0] & 1032 | t.$$.dirty[1] & 25165824 && Zn(te, I, R, L), t.$$.dirty[0] & 4096 && n(24, Dt = KD(sn)), t.$$.dirty[0] & 512 && (i = u ? UD(u) : void 0), t.$$.dirty[0] & 9 | t.$$.dirty[1] & 402653184 | t.$$.dirty[2] & 2048 && n(13, Sf = {
      readOnly: _,
      parser: R,
      normalization: tt,
      getJson: Q,
      getDocumentState: ye,
      findElement: wo,
      findNextInside: tr,
      focus: Pe,
      onPatch: zn,
      onInsert: it,
      onExpand: be,
      onSelect: ke,
      onFind: lt,
      onExpandSection: Kt,
      onPasteJson: wn,
      onRenderValue: x,
      onContextMenu: $n,
      onClassName: H || (() => {
      }),
      onDrag: ko,
      onDragEnd: nr
    }), t.$$.dirty[0] & 8192 && r("context changed", Sf);
  }, [
    _,
    w,
    v,
    R,
    V,
    N,
    W,
    A,
    si,
    u,
    te,
    G,
    sn,
    Sf,
    h,
    d,
    ee,
    we,
    ge,
    ie,
    ve,
    Xe,
    ft,
    nt,
    Dt,
    o,
    Ve,
    Ie,
    qe,
    ct,
    yt,
    Fe,
    xe,
    Pi,
    Nt,
    vi,
    Jn,
    In,
    Ce,
    We,
    Je,
    Vn,
    qt,
    ki,
    Ws,
    Us,
    Kh,
    Gh,
    Y,
    fn,
    b,
    M,
    S,
    k,
    I,
    L,
    U,
    O,
    x,
    H,
    D,
    P,
    K,
    ne,
    z,
    _n,
    Vt,
    Q,
    ln,
    Fi,
    Ut,
    wo,
    Pe,
    tt,
    he,
    d6,
    m6,
    p6,
    g6
  ];
}
class ux extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      cx,
      fx,
      gt,
      {
        readOnly: 0,
        externalContent: 50,
        mainMenuBar: 1,
        navigationBar: 2,
        escapeControlCharacters: 51,
        escapeUnicodeCharacters: 52,
        parser: 3,
        parseMemoizeOne: 53,
        validator: 54,
        validationParser: 55,
        pathParser: 4,
        indentation: 5,
        onError: 6,
        onChange: 56,
        onChangeMode: 57,
        onRenderValue: 58,
        onRenderMenu: 7,
        onClassName: 59,
        onFocus: 60,
        onBlur: 61,
        onSortModal: 62,
        onTransformModal: 63,
        onJSONEditorModal: 64,
        expand: 65,
        validate: 66,
        getJson: 67,
        patch: 68,
        acceptAutoRepair: 8,
        openTransformModal: 69,
        scrollTo: 70,
        findElement: 71,
        focus: 72
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get expand() {
    return this.$$.ctx[65];
  }
  get validate() {
    return this.$$.ctx[66];
  }
  get getJson() {
    return this.$$.ctx[67];
  }
  get patch() {
    return this.$$.ctx[68];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[8];
  }
  get openTransformModal() {
    return this.$$.ctx[69];
  }
  get scrollTo() {
    return this.$$.ctx[70];
  }
  get findElement() {
    return this.$$.ctx[71];
  }
  get focus() {
    return this.$$.ctx[72];
  }
}
const pg = ux;
function y_(t) {
  let e, n, i, r, o;
  const s = [dx, hx], l = [];
  function a(f, c) {
    return c[0] & 16384 && (e = null), e == null && (e = !!Array.isArray(f[14])), e ? 0 : 1;
  }
  return n = a(t, [-1, -1]), i = l[n] = s[n](t), {
    c() {
      i.c(), r = Ze();
    },
    m(f, c) {
      l[n].m(f, c), B(f, r, c), o = !0;
    },
    p(f, c) {
      let u = n;
      n = a(f, c), n === u ? l[n].p(f, c) : (me(), E(l[u], 1, 1, () => {
        l[u] = null;
      }), pe(), i = l[n], i ? i.p(f, c) : (i = l[n] = s[n](f), i.c()), C(i, 1), i.m(r.parentNode, r));
    },
    i(f) {
      o || (C(i), o = !0);
    },
    o(f) {
      E(i), o = !1;
    },
    d(f) {
      l[n].d(f), f && j(r);
    }
  };
}
function hx(t) {
  let e;
  return {
    c() {
      e = le("(Only available for arrays, not for objects)");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function dx(t) {
  let e, n;
  return e = new ND({
    props: {
      queryOptions: t[12],
      json: t[14],
      onChange: t[21]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 4096 && (o.queryOptions = i[12]), r[0] & 16384 && (o.json = i[14]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function w_(t) {
  let e, n;
  return e = new pg({
    props: {
      externalContent: t[19],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: nn,
      onError: console.error,
      onChange: nn,
      onChangeMode: nn,
      onFocus: nn,
      onBlur: nn,
      onSortModal: nn,
      onTransformModal: nn,
      onJSONEditorModal: nn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 524288 && (o.externalContent = i[19]), r[0] & 4 && (o.indentation = i[2]), r[0] & 8 && (o.escapeControlCharacters = i[3]), r[0] & 16 && (o.escapeUnicodeCharacters = i[4]), r[0] & 32 && (o.parser = i[5]), r[0] & 64 && (o.parseMemoizeOne = i[6]), r[0] & 1024 && (o.onRenderValue = i[10]), r[0] & 2048 && (o.onClassName = i[11]), r[0] & 128 && (o.validationParser = i[7]), r[0] & 256 && (o.pathParser = i[8]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function mx(t) {
  let e, n = t[17].toString() + "", i;
  return {
    c() {
      e = T("div"), i = le(n), p(e, "class", "jse-preview jse-error svelte-107mggt");
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, o) {
      o[0] & 131072 && n !== (n = r[17].toString() + "") && Te(i, n);
    },
    i: fe,
    o: fe,
    d(r) {
      r && j(e);
    }
  };
}
function px(t) {
  let e, n;
  return e = new pg({
    props: {
      externalContent: t[18],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: nn,
      onError: console.error,
      onChange: nn,
      onChangeMode: nn,
      onFocus: nn,
      onBlur: nn,
      onSortModal: nn,
      onTransformModal: nn,
      onJSONEditorModal: nn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 262144 && (o.externalContent = i[18]), r[0] & 4 && (o.indentation = i[2]), r[0] & 8 && (o.escapeControlCharacters = i[3]), r[0] & 16 && (o.escapeUnicodeCharacters = i[4]), r[0] & 32 && (o.parser = i[5]), r[0] & 64 && (o.parseMemoizeOne = i[6]), r[0] & 1024 && (o.onRenderValue = i[10]), r[0] & 2048 && (o.onClassName = i[11]), r[0] & 128 && (o.validationParser = i[7]), r[0] & 256 && (o.pathParser = i[8]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function gx(t) {
  let e, n, i, r, o, s, l, a, f = t[20](t[0]).description + "", c, u, h, d, m, g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O, x, A, H, D, P, K, ne, z, Z, te, G, Ae, ke, ze, ee, we, tt, ge;
  e = new WD({
    props: {
      queryLanguages: t[9],
      queryLanguageId: t[0],
      onChangeQueryLanguage: t[26]
    }
  }), v = new Ct({
    props: {
      data: t[15] ? Ui : Ro
    }
  });
  let ie = t[15] && y_(t);
  A = new Ct({
    props: {
      data: t[16] ? Ui : Ro
    }
  });
  let ve = t[16] && w_(t);
  const Xe = [px, mx], he = [];
  function Ve(Ie, qe) {
    return Ie[17] ? 1 : 0;
  }
  return Z = Ve(t), te = he[Z] = Xe[Z](t), {
    c() {
      se(e.$$.fragment), n = q(), i = T("div"), r = T("div"), o = T("div"), s = T("div"), s.innerHTML = '<div class="jse-label-inner svelte-107mggt">Language</div>', l = q(), a = T("div"), c = q(), u = T("div"), u.innerHTML = '<div class="jse-label-inner svelte-107mggt">Path</div>', h = q(), d = T("input"), g = q(), _ = T("div"), b = T("div"), w = T("button"), se(v.$$.fragment), M = le(`
                Wizard`), S = q(), ie && ie.c(), R = q(), k = T("div"), k.innerHTML = '<div class="jse-label-inner svelte-107mggt">Query</div>', I = q(), L = T("textarea"), V = q(), N = T("div"), W = T("div"), U = T("div"), O = T("div"), x = T("button"), se(A.$$.fragment), H = le(`
                  Original`), D = q(), ve && ve.c(), P = q(), K = T("div"), ne = T("div"), ne.innerHTML = '<div class="jse-label-inner svelte-107mggt">Preview</div>', z = q(), te.c(), G = q(), Ae = T("div"), ke = T("button"), ze = le("Transform"), p(s, "class", "jse-label svelte-107mggt"), p(a, "class", "jse-description svelte-107mggt"), p(u, "class", "jse-label svelte-107mggt"), p(d, "class", "jse-path svelte-107mggt"), p(d, "type", "text"), d.readOnly = !0, p(d, "title", "Selected path"), d.value = m = At(t[1]) ? "(whole document)" : Yi(Oi(t[1])), p(w, "type", "button"), p(w, "class", "svelte-107mggt"), p(b, "class", "jse-label-inner svelte-107mggt"), p(_, "class", "jse-label svelte-107mggt"), p(k, "class", "jse-label svelte-107mggt"), p(L, "class", "jse-query svelte-107mggt"), p(L, "spellcheck", "false"), L.value = t[13], p(o, "class", "jse-query-contents svelte-107mggt"), p(x, "type", "button"), p(x, "class", "svelte-107mggt"), p(O, "class", "jse-label-inner svelte-107mggt"), p(U, "class", "jse-label svelte-107mggt"), p(W, "class", "jse-original-data svelte-107mggt"), de(W, "jse-hide", !t[16]), p(ne, "class", "jse-label svelte-107mggt"), p(K, "class", "jse-preview-data svelte-107mggt"), p(N, "class", "jse-data-contents svelte-107mggt"), de(N, "jse-hide-original-data", !t[16]), p(r, "class", "jse-main-contents svelte-107mggt"), p(ke, "type", "button"), p(ke, "class", "jse-primary svelte-107mggt"), ke.disabled = ee = !!t[17], p(Ae, "class", "jse-actions svelte-107mggt"), p(i, "class", "jse-modal-contents svelte-107mggt");
    },
    m(Ie, qe) {
      re(e, Ie, qe), B(Ie, n, qe), B(Ie, i, qe), y(i, r), y(r, o), y(o, s), y(o, l), y(o, a), a.innerHTML = f, y(o, c), y(o, u), y(o, h), y(o, d), y(o, g), y(o, _), y(_, b), y(b, w), re(v, w, null), y(w, M), y(o, S), ie && ie.m(o, null), y(o, R), y(o, k), y(o, I), y(o, L), y(r, V), y(r, N), y(N, W), y(W, U), y(U, O), y(O, x), re(A, x, null), y(x, H), y(W, D), ve && ve.m(W, null), y(N, P), y(N, K), y(K, ne), y(K, z), he[Z].m(K, null), y(i, G), y(i, Ae), y(Ae, ke), y(ke, ze), we = !0, tt || (ge = [
        X(w, "click", t[24]),
        X(L, "input", t[22]),
        X(x, "click", t[25]),
        X(ke, "click", t[23]),
        Ai(_x.call(null, ke))
      ], tt = !0);
    },
    p(Ie, qe) {
      const ct = {};
      qe[0] & 512 && (ct.queryLanguages = Ie[9]), qe[0] & 1 && (ct.queryLanguageId = Ie[0]), e.$set(ct), (!we || qe[0] & 1) && f !== (f = Ie[20](Ie[0]).description + "") && (a.innerHTML = f), (!we || qe[0] & 2 && m !== (m = At(Ie[1]) ? "(whole document)" : Yi(Oi(Ie[1]))) && d.value !== m) && (d.value = m);
      const yt = {};
      qe[0] & 32768 && (yt.data = Ie[15] ? Ui : Ro), v.$set(yt), Ie[15] ? ie ? (ie.p(Ie, qe), qe[0] & 32768 && C(ie, 1)) : (ie = y_(Ie), ie.c(), C(ie, 1), ie.m(o, R)) : ie && (me(), E(ie, 1, 1, () => {
        ie = null;
      }), pe()), (!we || qe[0] & 8192) && (L.value = Ie[13]);
      const Fe = {};
      qe[0] & 65536 && (Fe.data = Ie[16] ? Ui : Ro), A.$set(Fe), Ie[16] ? ve ? (ve.p(Ie, qe), qe[0] & 65536 && C(ve, 1)) : (ve = w_(Ie), ve.c(), C(ve, 1), ve.m(W, null)) : ve && (me(), E(ve, 1, 1, () => {
        ve = null;
      }), pe()), (!we || qe[0] & 65536) && de(W, "jse-hide", !Ie[16]);
      let Oe = Z;
      Z = Ve(Ie), Z === Oe ? he[Z].p(Ie, qe) : (me(), E(he[Oe], 1, 1, () => {
        he[Oe] = null;
      }), pe(), te = he[Z], te ? te.p(Ie, qe) : (te = he[Z] = Xe[Z](Ie), te.c()), C(te, 1), te.m(K, null)), (!we || qe[0] & 65536) && de(N, "jse-hide-original-data", !Ie[16]), (!we || qe[0] & 131072 && ee !== (ee = !!Ie[17])) && (ke.disabled = ee);
    },
    i(Ie) {
      we || (C(e.$$.fragment, Ie), C(v.$$.fragment, Ie), C(ie), C(A.$$.fragment, Ie), C(ve), C(te), we = !0);
    },
    o(Ie) {
      E(e.$$.fragment, Ie), E(v.$$.fragment, Ie), E(ie), E(A.$$.fragment, Ie), E(ve), E(te), we = !1;
    },
    d(Ie) {
      oe(e, Ie), Ie && j(n), Ie && j(i), oe(v), ie && ie.d(), oe(A), ve && ve.d(), he[Z].d(), tt = !1, et(ge);
    }
  };
}
function bx(t) {
  let e, n, i;
  return n = new z3({
    props: {
      $$slots: { default: [gx] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-modal jse-transform svelte-107mggt");
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1048575 | o[1] & 256 && (s.$$scope = { dirty: o, ctx: r }), n.$set(s);
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function _x(t) {
  t.focus();
}
function yx(t, e, n) {
  let i, r;
  const o = Qn("jsoneditor:TransformModal");
  let { id: s = "transform-modal-" + ma() } = e, { json: l } = e, { rootPath: a = [] } = e, { indentation: f } = e, { escapeControlCharacters: c } = e, { escapeUnicodeCharacters: u } = e, { parser: h } = e, { parseMemoizeOne: d } = e, { validationParser: m } = e, { pathParser: g } = e, { queryLanguages: _ } = e, { queryLanguageId: b } = e, { onChangeQueryLanguage: w } = e, { onRenderValue: v } = e, { onClassName: M } = e, { onTransform: S } = e;
  const { close: R } = Xn("simple-modal"), k = `${s}:${Se(a)}`, I = ir[k] || {};
  let L = ir.showWizard !== !1, V = ir.showOriginal !== !1, N = I.queryOptions || {}, W = b === I.queryLanguageId && I.query ? I.query : A(b).createQuery(l, I.queryOptions || {}), U = I.isManual || !1, O, x = { text: "" };
  function A(G) {
    return _.find((Ae) => Ae.id === G) || _[0];
  }
  function H(G) {
    n(12, N = G), n(13, W = A(b).createQuery(l, G)), n(32, U = !1), o("updateQueryByWizard", { queryOptions: N, query: W, isManual: U });
  }
  function D(G) {
    n(13, W = G.target.value), n(32, U = !0), o("handleChangeQuery", { query: W, isManual: U });
  }
  function P(G, Ae) {
    try {
      o("previewTransform", { query: Ae });
      const ke = A(b).executeQuery(G, Ae);
      n(18, x = { json: ke }), n(17, O = void 0);
    } catch (ke) {
      n(18, x = { text: "" }), n(17, O = ke);
    }
  }
  const K = ch(P, Tk);
  function ne() {
    try {
      o("handleTransform", { query: W });
      const G = A(b).executeQuery(i, W);
      S([
        {
          op: "replace",
          path: Se(a),
          value: G
        }
      ]), R();
    } catch (G) {
      console.error(G), n(18, x = { text: "" }), n(17, O = G.toString());
    }
  }
  function z() {
    n(15, L = !L), n(31, ir.showWizard = L, ir);
  }
  function Z() {
    n(16, V = !V), n(31, ir.showOriginal = V, ir);
  }
  function te(G) {
    o("handleChangeQueryLanguage", G), n(0, b = G), w(G);
    const Ae = A(b);
    n(13, W = Ae.createQuery(l, N)), n(32, U = !1);
  }
  return t.$$set = (G) => {
    "id" in G && n(27, s = G.id), "json" in G && n(28, l = G.json), "rootPath" in G && n(1, a = G.rootPath), "indentation" in G && n(2, f = G.indentation), "escapeControlCharacters" in G && n(3, c = G.escapeControlCharacters), "escapeUnicodeCharacters" in G && n(4, u = G.escapeUnicodeCharacters), "parser" in G && n(5, h = G.parser), "parseMemoizeOne" in G && n(6, d = G.parseMemoizeOne), "validationParser" in G && n(7, m = G.validationParser), "pathParser" in G && n(8, g = G.pathParser), "queryLanguages" in G && n(9, _ = G.queryLanguages), "queryLanguageId" in G && n(0, b = G.queryLanguageId), "onChangeQueryLanguage" in G && n(29, w = G.onChangeQueryLanguage), "onRenderValue" in G && n(10, v = G.onRenderValue), "onClassName" in G && n(11, M = G.onClassName), "onTransform" in G && n(30, S = G.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 268435458 && n(14, i = Le(l, a)), t.$$.dirty[0] & 16384 && n(19, r = { json: i }), t.$$.dirty[0] & 24576 && K(i, W), t.$$.dirty[0] & 12289 | t.$$.dirty[1] & 3 && (n(
      31,
      ir[k] = {
        queryOptions: N,
        query: W,
        queryLanguageId: b,
        isManual: U
      },
      ir
    ), o("store state in memory", k, ir[k]));
  }, [
    b,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    v,
    M,
    N,
    W,
    i,
    L,
    V,
    O,
    x,
    r,
    A,
    H,
    D,
    ne,
    z,
    Z,
    te,
    s,
    l,
    w,
    S,
    ir,
    U
  ];
}
class wx extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      yx,
      bx,
      gt,
      {
        id: 27,
        json: 28,
        rootPath: 1,
        indentation: 2,
        escapeControlCharacters: 3,
        escapeUnicodeCharacters: 4,
        parser: 5,
        parseMemoizeOne: 6,
        validationParser: 7,
        pathParser: 8,
        queryLanguages: 9,
        queryLanguageId: 0,
        onChangeQueryLanguage: 29,
        onRenderValue: 10,
        onClassName: 11,
        onTransform: 30
      },
      null,
      [-1, -1]
    );
  }
}
const vx = wx, Mo = {};
function v_(t) {
  let e, n, i, r, o, s, l;
  function a(c) {
    t[13](c);
  }
  let f = {
    showChevron: !0,
    items: t[3]
  };
  return t[1] !== void 0 && (f.value = t[1]), o = new ms({ props: f }), mt.push(() => lr(o, "value", a, t[1])), {
    c() {
      e = T("tr"), n = T("th"), n.textContent = "Property", i = q(), r = T("td"), se(o.$$.fragment), p(n, "class", "svelte-1y818v2"), p(r, "class", "svelte-1y818v2");
    },
    m(c, u) {
      B(c, e, u), y(e, n), y(e, i), y(e, r), re(o, r, null), l = !0;
    },
    p(c, u) {
      const h = {};
      u & 8 && (h.items = c[3]), !s && u & 2 && (s = !0, h.value = c[1], sr(() => s = !1)), o.$set(h);
    },
    i(c) {
      l || (C(o.$$.fragment, c), l = !0);
    },
    o(c) {
      E(o.$$.fragment, c), l = !1;
    },
    d(c) {
      c && j(e), oe(o);
    }
  };
}
function k_(t) {
  let e, n;
  return {
    c() {
      e = T("div"), n = le(t[5]), p(e, "class", "jse-error svelte-1y818v2");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p(i, r) {
      r & 32 && Te(n, i[5]);
    },
    d(i) {
      i && j(e);
    }
  };
}
function kx(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O, x, A;
  n = new ag({
    props: {
      title: t[4] ? "Sort array items" : "Sort object keys"
    }
  });
  let H = t[4] && (t[3].length > 1 || t[1] === void 0) && v_(t);
  function D(ne) {
    t[14](ne);
  }
  let P = {
    showChevron: !0,
    clearable: !1,
    items: t[6]
  };
  t[2] !== void 0 && (P.value = t[2]), S = new ms({ props: P }), mt.push(() => lr(S, "value", D, t[2]));
  let K = t[5] && k_(t);
  return {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), r = T("div"), o = T("table"), s = T("colgroup"), s.innerHTML = `<col width="25%"/> 
        <col width="75%"/>`, l = q(), a = T("tbody"), f = T("tr"), c = T("th"), c.textContent = "Path", u = q(), h = T("td"), d = T("input"), g = q(), H && H.c(), _ = q(), b = T("tr"), w = T("th"), w.textContent = "Direction", v = q(), M = T("td"), se(S.$$.fragment), k = q(), I = T("div"), K && K.c(), L = q(), V = T("div"), N = T("button"), W = le("Sort"), p(c, "class", "svelte-1y818v2"), p(d, "class", "jse-path svelte-1y818v2"), p(d, "type", "text"), d.readOnly = !0, p(d, "title", "Selected path"), d.value = m = At(t[0]) ? "(whole document)" : Yi(Oi(t[0])), p(h, "class", "svelte-1y818v2"), p(w, "class", "svelte-1y818v2"), p(M, "class", "svelte-1y818v2"), p(o, "class", "svelte-1y818v2"), p(I, "class", "jse-space svelte-1y818v2"), p(N, "type", "button"), p(N, "class", "jse-primary svelte-1y818v2"), N.disabled = U = t[4] ? !t[1] : !1, p(V, "class", "jse-actions svelte-1y818v2"), p(r, "class", "jse-modal-contents svelte-1y818v2"), p(e, "class", "jse-modal jse-sort svelte-1y818v2");
    },
    m(ne, z) {
      B(ne, e, z), re(n, e, null), y(e, i), y(e, r), y(r, o), y(o, s), y(o, l), y(o, a), y(a, f), y(f, c), y(f, u), y(f, h), y(h, d), y(a, g), H && H.m(a, null), y(a, _), y(a, b), y(b, w), y(b, v), y(b, M), re(S, M, null), y(r, k), y(r, I), K && K.m(I, null), y(r, L), y(r, V), y(V, N), y(N, W), O = !0, x || (A = [
        X(N, "click", t[7]),
        Ai(Cx.call(null, N))
      ], x = !0);
    },
    p(ne, [z]) {
      const Z = {};
      z & 16 && (Z.title = ne[4] ? "Sort array items" : "Sort object keys"), n.$set(Z), (!O || z & 1 && m !== (m = At(ne[0]) ? "(whole document)" : Yi(Oi(ne[0]))) && d.value !== m) && (d.value = m), ne[4] && (ne[3].length > 1 || ne[1] === void 0) ? H ? (H.p(ne, z), z & 26 && C(H, 1)) : (H = v_(ne), H.c(), C(H, 1), H.m(a, _)) : H && (me(), E(H, 1, 1, () => {
        H = null;
      }), pe());
      const te = {};
      !R && z & 4 && (R = !0, te.value = ne[2], sr(() => R = !1)), S.$set(te), ne[5] ? K ? K.p(ne, z) : (K = k_(ne), K.c(), K.m(I, null)) : K && (K.d(1), K = null), (!O || z & 18 && U !== (U = ne[4] ? !ne[1] : !1)) && (N.disabled = U);
    },
    i(ne) {
      O || (C(n.$$.fragment, ne), C(H), C(S.$$.fragment, ne), O = !0);
    },
    o(ne) {
      E(n.$$.fragment, ne), E(H), E(S.$$.fragment, ne), O = !1;
    },
    d(ne) {
      ne && j(e), oe(n), H && H.d(), oe(S), K && K.d(), x = !1, et(A);
    }
  };
}
function Cx(t) {
  t.focus();
}
function Sx(t, e, n) {
  let i, r, o;
  const s = Qn("jsoneditor:SortModal");
  let { id: l } = e, { json: a } = e, { rootPath: f } = e, { onSort: c } = e;
  const { close: u } = Xn("simple-modal"), h = `${l}:${Se(f)}`, d = Le(a, f), m = { value: 1, label: "ascending" }, _ = [m, { value: -1, label: "descending" }];
  let b = Mo[h] && Mo[h].selectedProperty || void 0, w = Mo[h] && Mo[h].selectedDirection || m, v;
  function M() {
    try {
      n(5, v = void 0);
      const k = b == null ? void 0 : b.value, I = w == null ? void 0 : w.value, L = EC(a, f, k, I);
      c({
        operations: L,
        rootPath: f,
        itemPath: k,
        direction: I
      }), u();
    } catch (k) {
      n(5, v = k.toString());
    }
  }
  function S(k) {
    b = k, n(1, b), n(3, o), n(12, r), n(4, i);
  }
  function R(k) {
    w = k, n(2, w);
  }
  return t.$$set = (k) => {
    "id" in k && n(8, l = k.id), "json" in k && n(9, a = k.json), "rootPath" in k && n(0, f = k.rootPath), "onSort" in k && n(10, c = k.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 16 && n(12, r = i ? _m(d) : void 0), t.$$.dirty & 4096 && n(3, o = r ? r.map(Gs) : void 0), t.$$.dirty & 10 && b === void 0 && o && o.length === 1 && n(1, b = o[0]), t.$$.dirty & 2054 && (n(11, Mo[h] = { selectedProperty: b, selectedDirection: w }, Mo), s("store state in memory", h, Mo[h]));
  }, n(4, i = Array.isArray(d)), [
    f,
    b,
    w,
    o,
    i,
    v,
    _,
    M,
    l,
    a,
    c,
    Mo,
    r,
    S,
    R
  ];
}
class Mx extends Be {
  constructor(e) {
    super(), je(this, e, Sx, kx, gt, { id: 8, json: 9, rootPath: 0, onSort: 10 });
  }
}
const Ax = Mx;
function Rr() {
}
function Hf(t, e = 1e3) {
  if (t < 0.9 * e)
    return t.toFixed() + " B";
  const n = t / e;
  if (n < 0.9 * e)
    return n.toFixed(1) + " KB";
  const i = n / e;
  if (i < 0.9 * e)
    return i.toFixed(1) + " MB";
  const r = i / e;
  return r < 0.9 * e ? r.toFixed(1) + " GB" : (r / e).toFixed(1) + " TB";
}
function Ox(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Tx(t, e, n) {
  let i, { readOnly: r = !1 } = e, { onFormat: o } = e, { onCompact: s } = e, { onSort: l } = e, { onTransform: a } = e, { onToggleSearch: f } = e, { onUndo: c } = e, { onRedo: u } = e, { canUndo: h } = e, { canRedo: d } = e, { canFormat: m } = e, { canCompact: g } = e, { canSort: _ } = e, { canTransform: b } = e, { onRenderMenu: w = nn } = e, v;
  return t.$$set = (M) => {
    "readOnly" in M && n(1, r = M.readOnly), "onFormat" in M && n(2, o = M.onFormat), "onCompact" in M && n(3, s = M.onCompact), "onSort" in M && n(4, l = M.onSort), "onTransform" in M && n(5, a = M.onTransform), "onToggleSearch" in M && n(6, f = M.onToggleSearch), "onUndo" in M && n(7, c = M.onUndo), "onRedo" in M && n(8, u = M.onRedo), "canUndo" in M && n(9, h = M.canUndo), "canRedo" in M && n(10, d = M.canRedo), "canFormat" in M && n(11, m = M.canFormat), "canCompact" in M && n(12, g = M.canCompact), "canSort" in M && n(13, _ = M.canSort), "canTransform" in M && n(14, b = M.canTransform), "onRenderMenu" in M && n(15, w = M.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 32766 && n(16, v = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: hL,
        title: "Format JSON: add proper indentation and new lines (Ctrl+I)",
        className: "jse-format",
        onClick: o,
        disabled: r || !m
      },
      {
        type: "button",
        icon: dL,
        title: "Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",
        className: "jse-compact",
        onClick: s,
        disabled: r || !g
      },
      { type: "separator" },
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: l,
        disabled: r || !_
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: a,
        disabled: r || !b
      },
      {
        type: "button",
        icon: ng,
        title: "Search (Ctrl+F)",
        className: "jse-search",
        onClick: f
      },
      { type: "separator" },
      {
        type: "button",
        icon: tg,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: c,
        disabled: !h
      },
      {
        type: "button",
        icon: eg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: u,
        disabled: !d
      },
      { type: "space" }
    ]), t.$$.dirty & 98304 && n(0, i = w("text", v) || v);
  }, [
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v
  ];
}
class Ex extends Be {
  constructor(e) {
    super(), je(this, e, Tx, Ox, gt, {
      readOnly: 1,
      onFormat: 2,
      onCompact: 3,
      onSort: 4,
      onTransform: 5,
      onToggleSearch: 6,
      onUndo: 7,
      onRedo: 8,
      canUndo: 9,
      canRedo: 10,
      canFormat: 11,
      canCompact: 12,
      canSort: 13,
      canTransform: 14,
      onRenderMenu: 15
    });
  }
}
const Px = Ex;
class Bt {
  constructor() {
  }
  lineAt(e) {
    if (e < 0 || e > this.length)
      throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);
    return this.lineInner(e, !1, 1, 0);
  }
  line(e) {
    if (e < 1 || e > this.lines)
      throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);
    return this.lineInner(e, !0, 1, 0);
  }
  replace(e, n, i) {
    let r = [];
    return this.decompose(0, e, r, 2), i.length && i.decompose(0, i.length, r, 3), this.decompose(n, this.length, r, 1), Ir.from(r, this.length - (n - e) + i.length);
  }
  append(e) {
    return this.replace(this.length, this.length, e);
  }
  slice(e, n = this.length) {
    let i = [];
    return this.decompose(e, n, i, 0), Ir.from(i, n - e);
  }
  eq(e) {
    if (e == this)
      return !0;
    if (e.length != this.length || e.lines != this.lines)
      return !1;
    let n = this.scanIdentical(e, 1), i = this.length - this.scanIdentical(e, -1), r = new wa(this), o = new wa(e);
    for (let s = n, l = n; ; ) {
      if (r.next(s), o.next(s), s = 0, r.lineBreak != o.lineBreak || r.done != o.done || r.value != o.value)
        return !1;
      if (l += r.value.length, r.done || l >= i)
        return !0;
    }
  }
  iter(e = 1) {
    return new wa(this, e);
  }
  iterRange(e, n = this.length) {
    return new LC(this, e, n);
  }
  iterLines(e, n) {
    let i;
    if (e == null)
      i = this.iter();
    else {
      n == null && (n = this.lines + 1);
      let r = this.line(e).from;
      i = this.iterRange(r, Math.max(r, n == this.lines + 1 ? this.length : n <= 1 ? 0 : this.line(n - 1).to));
    }
    return new xC(i);
  }
  toString() {
    return this.sliceString(0);
  }
  toJSON() {
    let e = [];
    return this.flatten(e), e;
  }
  static of(e) {
    if (e.length == 0)
      throw new RangeError("A document must have at least one line");
    return e.length == 1 && !e[0] ? Bt.empty : e.length <= 32 ? new Sn(e) : Ir.from(Sn.split(e, []));
  }
}
class Sn extends Bt {
  constructor(e, n = Rx(e)) {
    super(), this.text = e, this.length = n;
  }
  get lines() {
    return this.text.length;
  }
  get children() {
    return null;
  }
  lineInner(e, n, i, r) {
    for (let o = 0; ; o++) {
      let s = this.text[o], l = r + s.length;
      if ((n ? i : l) >= e)
        return new Ix(r, l, i, s);
      r = l + 1, i++;
    }
  }
  decompose(e, n, i, r) {
    let o = e <= 0 && n >= this.length ? this : new Sn(C_(this.text, e, n), Math.min(n, this.length) - Math.max(0, e));
    if (r & 1) {
      let s = i.pop(), l = Cc(o.text, s.text.slice(), 0, o.length);
      if (l.length <= 32)
        i.push(new Sn(l, s.length + o.length));
      else {
        let a = l.length >> 1;
        i.push(new Sn(l.slice(0, a)), new Sn(l.slice(a)));
      }
    } else
      i.push(o);
  }
  replace(e, n, i) {
    if (!(i instanceof Sn))
      return super.replace(e, n, i);
    let r = Cc(this.text, Cc(i.text, C_(this.text, 0, e)), n), o = this.length + i.length - (n - e);
    return r.length <= 32 ? new Sn(r, o) : Ir.from(Sn.split(r, []), o);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let o = 0, s = 0; o <= n && s < this.text.length; s++) {
      let l = this.text[s], a = o + l.length;
      o > e && s && (r += i), e < a && n > o && (r += l.slice(Math.max(0, e - o), n - o)), o = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.text)
      e.push(n);
  }
  scanIdentical() {
    return 0;
  }
  static split(e, n) {
    let i = [], r = -1;
    for (let o of e)
      i.push(o), r += o.length + 1, i.length == 32 && (n.push(new Sn(i, r)), i = [], r = -1);
    return r > -1 && n.push(new Sn(i, r)), n;
  }
}
class Ir extends Bt {
  constructor(e, n) {
    super(), this.children = e, this.length = n, this.lines = 0;
    for (let i of e)
      this.lines += i.lines;
  }
  lineInner(e, n, i, r) {
    for (let o = 0; ; o++) {
      let s = this.children[o], l = r + s.length, a = i + s.lines - 1;
      if ((n ? a : l) >= e)
        return s.lineInner(e, n, i, r);
      r = l + 1, i = a + 1;
    }
  }
  decompose(e, n, i, r) {
    for (let o = 0, s = 0; s <= n && o < this.children.length; o++) {
      let l = this.children[o], a = s + l.length;
      if (e <= a && n >= s) {
        let f = r & ((s <= e ? 1 : 0) | (a >= n ? 2 : 0));
        s >= e && a <= n && !f ? i.push(l) : l.decompose(e - s, n - s, i, f);
      }
      s = a + 1;
    }
  }
  replace(e, n, i) {
    if (i.lines < this.lines)
      for (let r = 0, o = 0; r < this.children.length; r++) {
        let s = this.children[r], l = o + s.length;
        if (e >= o && n <= l) {
          let a = s.replace(e - o, n - o, i), f = this.lines - s.lines + a.lines;
          if (a.lines < f >> 5 - 1 && a.lines > f >> 5 + 1) {
            let c = this.children.slice();
            return c[r] = a, new Ir(c, this.length - (n - e) + i.length);
          }
          return super.replace(o, l, a);
        }
        o = l + 1;
      }
    return super.replace(e, n, i);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let o = 0, s = 0; o < this.children.length && s <= n; o++) {
      let l = this.children[o], a = s + l.length;
      s > e && o && (r += i), e < a && n > s && (r += l.sliceString(e - s, n - s, i)), s = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.children)
      n.flatten(e);
  }
  scanIdentical(e, n) {
    if (!(e instanceof Ir))
      return 0;
    let i = 0, [r, o, s, l] = n > 0 ? [0, 0, this.children.length, e.children.length] : [this.children.length - 1, e.children.length - 1, -1, -1];
    for (; ; r += n, o += n) {
      if (r == s || o == l)
        return i;
      let a = this.children[r], f = e.children[o];
      if (a != f)
        return i + a.scanIdentical(f, n);
      i += a.length + 1;
    }
  }
  static from(e, n = e.reduce((i, r) => i + r.length + 1, -1)) {
    let i = 0;
    for (let d of e)
      i += d.lines;
    if (i < 32) {
      let d = [];
      for (let m of e)
        m.flatten(d);
      return new Sn(d, n);
    }
    let r = Math.max(32, i >> 5), o = r << 1, s = r >> 1, l = [], a = 0, f = -1, c = [];
    function u(d) {
      let m;
      if (d.lines > o && d instanceof Ir)
        for (let g of d.children)
          u(g);
      else
        d.lines > s && (a > s || !a) ? (h(), l.push(d)) : d instanceof Sn && a && (m = c[c.length - 1]) instanceof Sn && d.lines + m.lines <= 32 ? (a += d.lines, f += d.length + 1, c[c.length - 1] = new Sn(m.text.concat(d.text), m.length + 1 + d.length)) : (a + d.lines > r && h(), a += d.lines, f += d.length + 1, c.push(d));
    }
    function h() {
      a != 0 && (l.push(c.length == 1 ? c[0] : Ir.from(c, f)), f = -1, a = c.length = 0);
    }
    for (let d of e)
      u(d);
    return h(), l.length == 1 ? l[0] : new Ir(l, n);
  }
}
Bt.empty = /* @__PURE__ */ new Sn([""], 0);
function Rx(t) {
  let e = -1;
  for (let n of t)
    e += n.length + 1;
  return e;
}
function Cc(t, e, n = 0, i = 1e9) {
  for (let r = 0, o = 0, s = !0; o < t.length && r <= i; o++) {
    let l = t[o], a = r + l.length;
    a >= n && (a > i && (l = l.slice(0, i - r)), r < n && (l = l.slice(n - r)), s ? (e[e.length - 1] += l, s = !1) : e.push(l)), r = a + 1;
  }
  return e;
}
function C_(t, e, n) {
  return Cc(t, [""], e, n);
}
class wa {
  constructor(e, n = 1) {
    this.dir = n, this.done = !1, this.lineBreak = !1, this.value = "", this.nodes = [e], this.offsets = [n > 0 ? 1 : (e instanceof Sn ? e.text.length : e.children.length) << 1];
  }
  nextInner(e, n) {
    for (this.done = this.lineBreak = !1; ; ) {
      let i = this.nodes.length - 1, r = this.nodes[i], o = this.offsets[i], s = o >> 1, l = r instanceof Sn ? r.text.length : r.children.length;
      if (s == (n > 0 ? l : 0)) {
        if (i == 0)
          return this.done = !0, this.value = "", this;
        n > 0 && this.offsets[i - 1]++, this.nodes.pop(), this.offsets.pop();
      } else if ((o & 1) == (n > 0 ? 0 : 1)) {
        if (this.offsets[i] += n, e == 0)
          return this.lineBreak = !0, this.value = `
`, this;
        e--;
      } else if (r instanceof Sn) {
        let a = r.text[s + (n < 0 ? -1 : 0)];
        if (this.offsets[i] += n, a.length > Math.max(0, e))
          return this.value = e == 0 ? a : n > 0 ? a.slice(e) : a.slice(0, a.length - e), this;
        e -= a.length;
      } else {
        let a = r.children[s + (n < 0 ? -1 : 0)];
        e > a.length ? (e -= a.length, this.offsets[i] += n) : (n < 0 && this.offsets[i]--, this.nodes.push(a), this.offsets.push(n > 0 ? 1 : (a instanceof Sn ? a.text.length : a.children.length) << 1));
      }
    }
  }
  next(e = 0) {
    return e < 0 && (this.nextInner(-e, -this.dir), e = this.value.length), this.nextInner(e, this.dir);
  }
}
class LC {
  constructor(e, n, i) {
    this.value = "", this.done = !1, this.cursor = new wa(e, n > i ? -1 : 1), this.pos = n > i ? e.length : 0, this.from = Math.min(n, i), this.to = Math.max(n, i);
  }
  nextInner(e, n) {
    if (n < 0 ? this.pos <= this.from : this.pos >= this.to)
      return this.value = "", this.done = !0, this;
    e += Math.max(0, n < 0 ? this.pos - this.to : this.from - this.pos);
    let i = n < 0 ? this.pos - this.from : this.to - this.pos;
    e > i && (e = i), i -= e;
    let { value: r } = this.cursor.next(e);
    return this.pos += (r.length + e) * n, this.value = r.length <= i ? r : n < 0 ? r.slice(r.length - i) : r.slice(0, i), this.done = !this.value, this;
  }
  next(e = 0) {
    return e < 0 ? e = Math.max(e, this.from - this.pos) : e > 0 && (e = Math.min(e, this.to - this.pos)), this.nextInner(e, this.cursor.dir);
  }
  get lineBreak() {
    return this.cursor.lineBreak && this.value != "";
  }
}
class xC {
  constructor(e) {
    this.inner = e, this.afterBreak = !0, this.value = "", this.done = !1;
  }
  next(e = 0) {
    let { done: n, lineBreak: i, value: r } = this.inner.next(e);
    return n ? (this.done = !0, this.value = "") : i ? this.afterBreak ? this.value = "" : (this.afterBreak = !0, this.next()) : (this.value = r, this.afterBreak = !1), this;
  }
  get lineBreak() {
    return !1;
  }
}
typeof Symbol < "u" && (Bt.prototype[Symbol.iterator] = function() {
  return this.iter();
}, wa.prototype[Symbol.iterator] = LC.prototype[Symbol.iterator] = xC.prototype[Symbol.iterator] = function() {
  return this;
});
class Ix {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.number = i, this.text = r;
  }
  get length() {
    return this.to - this.from;
  }
}
let al = /* @__PURE__ */ "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t) => t ? parseInt(t, 36) : 1);
for (let t = 1; t < al.length; t++)
  al[t] += al[t - 1];
function Nx(t) {
  for (let e = 1; e < al.length; e += 2)
    if (al[e] > t)
      return al[e - 1] <= t;
  return !1;
}
function S_(t) {
  return t >= 127462 && t <= 127487;
}
const M_ = 8205;
function pi(t, e, n = !0, i = !0) {
  return (n ? zC : Dx)(t, e, i);
}
function zC(t, e, n) {
  if (e == t.length)
    return e;
  e && VC(t.charCodeAt(e)) && FC(t.charCodeAt(e - 1)) && e--;
  let i = ii(t, e);
  for (e += ji(i); e < t.length; ) {
    let r = ii(t, e);
    if (i == M_ || r == M_ || n && Nx(r))
      e += ji(r), i = r;
    else if (S_(r)) {
      let o = 0, s = e - 2;
      for (; s >= 0 && S_(ii(t, s)); )
        o++, s -= 2;
      if (o % 2 == 0)
        break;
      e += 2;
    } else
      break;
  }
  return e;
}
function Dx(t, e, n) {
  for (; e > 0; ) {
    let i = zC(t, e - 2, n);
    if (i < e)
      return i;
    e--;
  }
  return 0;
}
function VC(t) {
  return t >= 56320 && t < 57344;
}
function FC(t) {
  return t >= 55296 && t < 56320;
}
function ii(t, e) {
  let n = t.charCodeAt(e);
  if (!FC(n) || e + 1 == t.length)
    return n;
  let i = t.charCodeAt(e + 1);
  return VC(i) ? (n - 55296 << 10) + (i - 56320) + 65536 : n;
}
function gg(t) {
  return t <= 65535 ? String.fromCharCode(t) : (t -= 65536, String.fromCharCode((t >> 10) + 55296, (t & 1023) + 56320));
}
function ji(t) {
  return t < 65536 ? 1 : 2;
}
const Am = /\r\n?|\n/;
var di = /* @__PURE__ */ function(t) {
  return t[t.Simple = 0] = "Simple", t[t.TrackDel = 1] = "TrackDel", t[t.TrackBefore = 2] = "TrackBefore", t[t.TrackAfter = 3] = "TrackAfter", t;
}(di || (di = {}));
class Vr {
  constructor(e) {
    this.sections = e;
  }
  get length() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2)
      e += this.sections[n];
    return e;
  }
  get newLength() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n + 1];
      e += i < 0 ? this.sections[n] : i;
    }
    return e;
  }
  get empty() {
    return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
  }
  iterGaps(e) {
    for (let n = 0, i = 0, r = 0; n < this.sections.length; ) {
      let o = this.sections[n++], s = this.sections[n++];
      s < 0 ? (e(i, r, o), r += o) : r += s, i += o;
    }
  }
  iterChangedRanges(e, n = !1) {
    Om(this, e, n);
  }
  get invertedDesc() {
    let e = [];
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      r < 0 ? e.push(i, r) : e.push(r, i);
    }
    return new Vr(e);
  }
  composeDesc(e) {
    return this.empty ? e : e.empty ? this : HC(this, e);
  }
  mapDesc(e, n = !1) {
    return e.empty ? this : Tm(this, e, n);
  }
  mapPos(e, n = -1, i = di.Simple) {
    let r = 0, o = 0;
    for (let s = 0; s < this.sections.length; ) {
      let l = this.sections[s++], a = this.sections[s++], f = r + l;
      if (a < 0) {
        if (f > e)
          return o + (e - r);
        o += l;
      } else {
        if (i != di.Simple && f >= e && (i == di.TrackDel && r < e && f > e || i == di.TrackBefore && r < e || i == di.TrackAfter && f > e))
          return null;
        if (f > e || f == e && n < 0 && !l)
          return e == r || n < 0 ? o : o + a;
        o += a;
      }
      r = f;
    }
    if (e > r)
      throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);
    return o;
  }
  touchesRange(e, n = e) {
    for (let i = 0, r = 0; i < this.sections.length && r <= n; ) {
      let o = this.sections[i++], s = this.sections[i++], l = r + o;
      if (s >= 0 && r <= n && l >= e)
        return r < e && l > n ? "cover" : !0;
      r = l;
    }
    return !1;
  }
  toString() {
    let e = "";
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      e += (e ? " " : "") + i + (r >= 0 ? ":" + r : "");
    }
    return e;
  }
  toJSON() {
    return this.sections;
  }
  static fromJSON(e) {
    if (!Array.isArray(e) || e.length % 2 || e.some((n) => typeof n != "number"))
      throw new RangeError("Invalid JSON representation of ChangeDesc");
    return new Vr(e);
  }
  static create(e) {
    return new Vr(e);
  }
}
class Hn extends Vr {
  constructor(e, n) {
    super(e), this.inserted = n;
  }
  apply(e) {
    if (this.length != e.length)
      throw new RangeError("Applying change set to a document with the wrong length");
    return Om(this, (n, i, r, o, s) => e = e.replace(r, r + (i - n), s), !1), e;
  }
  mapDesc(e, n = !1) {
    return Tm(this, e, n, !0);
  }
  invert(e) {
    let n = this.sections.slice(), i = [];
    for (let r = 0, o = 0; r < n.length; r += 2) {
      let s = n[r], l = n[r + 1];
      if (l >= 0) {
        n[r] = l, n[r + 1] = s;
        let a = r >> 1;
        for (; i.length < a; )
          i.push(Bt.empty);
        i.push(s ? e.slice(o, o + s) : Bt.empty);
      }
      o += s;
    }
    return new Hn(n, i);
  }
  compose(e) {
    return this.empty ? e : e.empty ? this : HC(this, e, !0);
  }
  map(e, n = !1) {
    return e.empty ? this : Tm(this, e, n, !0);
  }
  iterChanges(e, n = !1) {
    Om(this, e, n);
  }
  get desc() {
    return Vr.create(this.sections);
  }
  filter(e) {
    let n = [], i = [], r = [], o = new Fa(this);
    e:
      for (let s = 0, l = 0; ; ) {
        let a = s == e.length ? 1e9 : e[s++];
        for (; l < a || l == a && o.len == 0; ) {
          if (o.done)
            break e;
          let c = Math.min(o.len, a - l);
          ai(r, c, -1);
          let u = o.ins == -1 ? -1 : o.off == 0 ? o.ins : 0;
          ai(n, c, u), u > 0 && Io(i, n, o.text), o.forward(c), l += c;
        }
        let f = e[s++];
        for (; l < f; ) {
          if (o.done)
            break e;
          let c = Math.min(o.len, f - l);
          ai(n, c, -1), ai(r, c, o.ins == -1 ? -1 : o.off == 0 ? o.ins : 0), o.forward(c), l += c;
        }
      }
    return {
      changes: new Hn(n, i),
      filtered: Vr.create(r)
    };
  }
  toJSON() {
    let e = [];
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n], r = this.sections[n + 1];
      r < 0 ? e.push(i) : r == 0 ? e.push([i]) : e.push([i].concat(this.inserted[n >> 1].toJSON()));
    }
    return e;
  }
  static of(e, n, i) {
    let r = [], o = [], s = 0, l = null;
    function a(c = !1) {
      if (!c && !r.length)
        return;
      s < n && ai(r, n - s, -1);
      let u = new Hn(r, o);
      l = l ? l.compose(u.map(l)) : u, r = [], o = [], s = 0;
    }
    function f(c) {
      if (Array.isArray(c))
        for (let u of c)
          f(u);
      else if (c instanceof Hn) {
        if (c.length != n)
          throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);
        a(), l = l ? l.compose(c.map(l)) : c;
      } else {
        let { from: u, to: h = u, insert: d } = c;
        if (u > h || u < 0 || h > n)
          throw new RangeError(`Invalid change range ${u} to ${h} (in doc of length ${n})`);
        let m = d ? typeof d == "string" ? Bt.of(d.split(i || Am)) : d : Bt.empty, g = m.length;
        if (u == h && g == 0)
          return;
        u < s && a(), u > s && ai(r, u - s, -1), ai(r, h - u, g), Io(o, r, m), s = h;
      }
    }
    return f(e), a(!l), l;
  }
  static empty(e) {
    return new Hn(e ? [e, -1] : [], []);
  }
  static fromJSON(e) {
    if (!Array.isArray(e))
      throw new RangeError("Invalid JSON representation of ChangeSet");
    let n = [], i = [];
    for (let r = 0; r < e.length; r++) {
      let o = e[r];
      if (typeof o == "number")
        n.push(o, -1);
      else {
        if (!Array.isArray(o) || typeof o[0] != "number" || o.some((s, l) => l && typeof s != "string"))
          throw new RangeError("Invalid JSON representation of ChangeSet");
        if (o.length == 1)
          n.push(o[0], 0);
        else {
          for (; i.length < r; )
            i.push(Bt.empty);
          i[r] = Bt.of(o.slice(1)), n.push(o[0], i[r].length);
        }
      }
    }
    return new Hn(n, i);
  }
  static createSet(e, n) {
    return new Hn(e, n);
  }
}
function ai(t, e, n, i = !1) {
  if (e == 0 && n <= 0)
    return;
  let r = t.length - 2;
  r >= 0 && n <= 0 && n == t[r + 1] ? t[r] += e : e == 0 && t[r] == 0 ? t[r + 1] += n : i ? (t[r] += e, t[r + 1] += n) : t.push(e, n);
}
function Io(t, e, n) {
  if (n.length == 0)
    return;
  let i = e.length - 2 >> 1;
  if (i < t.length)
    t[t.length - 1] = t[t.length - 1].append(n);
  else {
    for (; t.length < i; )
      t.push(Bt.empty);
    t.push(n);
  }
}
function Om(t, e, n) {
  let i = t.inserted;
  for (let r = 0, o = 0, s = 0; s < t.sections.length; ) {
    let l = t.sections[s++], a = t.sections[s++];
    if (a < 0)
      r += l, o += l;
    else {
      let f = r, c = o, u = Bt.empty;
      for (; f += l, c += a, a && i && (u = u.append(i[s - 2 >> 1])), !(n || s == t.sections.length || t.sections[s + 1] < 0); )
        l = t.sections[s++], a = t.sections[s++];
      e(r, f, o, c, u), r = f, o = c;
    }
  }
}
function Tm(t, e, n, i = !1) {
  let r = [], o = i ? [] : null, s = new Fa(t), l = new Fa(e);
  for (let a = -1; ; )
    if (s.ins == -1 && l.ins == -1) {
      let f = Math.min(s.len, l.len);
      ai(r, f, -1), s.forward(f), l.forward(f);
    } else if (l.ins >= 0 && (s.ins < 0 || a == s.i || s.off == 0 && (l.len < s.len || l.len == s.len && !n))) {
      let f = l.len;
      for (ai(r, l.ins, -1); f; ) {
        let c = Math.min(s.len, f);
        s.ins >= 0 && a < s.i && s.len <= c && (ai(r, 0, s.ins), o && Io(o, r, s.text), a = s.i), s.forward(c), f -= c;
      }
      l.next();
    } else if (s.ins >= 0) {
      let f = 0, c = s.len;
      for (; c; )
        if (l.ins == -1) {
          let u = Math.min(c, l.len);
          f += u, c -= u, l.forward(u);
        } else if (l.ins == 0 && l.len < c)
          c -= l.len, l.next();
        else
          break;
      ai(r, f, a < s.i ? s.ins : 0), o && a < s.i && Io(o, r, s.text), a = s.i, s.forward(s.len - c);
    } else {
      if (s.done && l.done)
        return o ? Hn.createSet(r, o) : Vr.create(r);
      throw new Error("Mismatched change set lengths");
    }
}
function HC(t, e, n = !1) {
  let i = [], r = n ? [] : null, o = new Fa(t), s = new Fa(e);
  for (let l = !1; ; ) {
    if (o.done && s.done)
      return r ? Hn.createSet(i, r) : Vr.create(i);
    if (o.ins == 0)
      ai(i, o.len, 0, l), o.next();
    else if (s.len == 0 && !s.done)
      ai(i, 0, s.ins, l), r && Io(r, i, s.text), s.next();
    else {
      if (o.done || s.done)
        throw new Error("Mismatched change set lengths");
      {
        let a = Math.min(o.len2, s.len), f = i.length;
        if (o.ins == -1) {
          let c = s.ins == -1 ? -1 : s.off ? 0 : s.ins;
          ai(i, a, c, l), r && c && Io(r, i, s.text);
        } else
          s.ins == -1 ? (ai(i, o.off ? 0 : o.len, a, l), r && Io(r, i, o.textBit(a))) : (ai(i, o.off ? 0 : o.len, s.off ? 0 : s.ins, l), r && !s.off && Io(r, i, s.text));
        l = (o.ins > a || s.ins >= 0 && s.len > a) && (l || i.length > f), o.forward2(a), s.forward(a);
      }
    }
  }
}
class Fa {
  constructor(e) {
    this.set = e, this.i = 0, this.next();
  }
  next() {
    let { sections: e } = this.set;
    this.i < e.length ? (this.len = e[this.i++], this.ins = e[this.i++]) : (this.len = 0, this.ins = -2), this.off = 0;
  }
  get done() {
    return this.ins == -2;
  }
  get len2() {
    return this.ins < 0 ? this.len : this.ins;
  }
  get text() {
    let { inserted: e } = this.set, n = this.i - 2 >> 1;
    return n >= e.length ? Bt.empty : e[n];
  }
  textBit(e) {
    let { inserted: n } = this.set, i = this.i - 2 >> 1;
    return i >= n.length && !e ? Bt.empty : n[i].slice(this.off, e == null ? void 0 : this.off + e);
  }
  forward(e) {
    e == this.len ? this.next() : (this.len -= e, this.off += e);
  }
  forward2(e) {
    this.ins == -1 ? this.forward(e) : e == this.ins ? this.next() : (this.ins -= e, this.off += e);
  }
}
class _s {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.flags = i;
  }
  get anchor() {
    return this.flags & 16 ? this.to : this.from;
  }
  get head() {
    return this.flags & 16 ? this.from : this.to;
  }
  get empty() {
    return this.from == this.to;
  }
  get assoc() {
    return this.flags & 4 ? -1 : this.flags & 8 ? 1 : 0;
  }
  get bidiLevel() {
    let e = this.flags & 3;
    return e == 3 ? null : e;
  }
  get goalColumn() {
    let e = this.flags >> 5;
    return e == 33554431 ? void 0 : e;
  }
  map(e, n = -1) {
    let i, r;
    return this.empty ? i = r = e.mapPos(this.from, n) : (i = e.mapPos(this.from, 1), r = e.mapPos(this.to, -1)), i == this.from && r == this.to ? this : new _s(i, r, this.flags);
  }
  extend(e, n = e) {
    if (e <= this.anchor && n >= this.anchor)
      return _e.range(e, n);
    let i = Math.abs(e - this.anchor) > Math.abs(n - this.anchor) ? e : n;
    return _e.range(this.anchor, i);
  }
  eq(e) {
    return this.anchor == e.anchor && this.head == e.head;
  }
  toJSON() {
    return { anchor: this.anchor, head: this.head };
  }
  static fromJSON(e) {
    if (!e || typeof e.anchor != "number" || typeof e.head != "number")
      throw new RangeError("Invalid JSON representation for SelectionRange");
    return _e.range(e.anchor, e.head);
  }
  static create(e, n, i) {
    return new _s(e, n, i);
  }
}
class _e {
  constructor(e, n) {
    this.ranges = e, this.mainIndex = n;
  }
  map(e, n = -1) {
    return e.empty ? this : _e.create(this.ranges.map((i) => i.map(e, n)), this.mainIndex);
  }
  eq(e) {
    if (this.ranges.length != e.ranges.length || this.mainIndex != e.mainIndex)
      return !1;
    for (let n = 0; n < this.ranges.length; n++)
      if (!this.ranges[n].eq(e.ranges[n]))
        return !1;
    return !0;
  }
  get main() {
    return this.ranges[this.mainIndex];
  }
  asSingle() {
    return this.ranges.length == 1 ? this : new _e([this.main], 0);
  }
  addRange(e, n = !0) {
    return _e.create([e].concat(this.ranges), n ? 0 : this.mainIndex + 1);
  }
  replaceRange(e, n = this.mainIndex) {
    let i = this.ranges.slice();
    return i[n] = e, _e.create(i, this.mainIndex);
  }
  toJSON() {
    return { ranges: this.ranges.map((e) => e.toJSON()), main: this.mainIndex };
  }
  static fromJSON(e) {
    if (!e || !Array.isArray(e.ranges) || typeof e.main != "number" || e.main >= e.ranges.length)
      throw new RangeError("Invalid JSON representation for EditorSelection");
    return new _e(e.ranges.map((n) => _s.fromJSON(n)), e.main);
  }
  static single(e, n = e) {
    return new _e([_e.range(e, n)], 0);
  }
  static create(e, n = 0) {
    if (e.length == 0)
      throw new RangeError("A selection needs at least one range");
    for (let i = 0, r = 0; r < e.length; r++) {
      let o = e[r];
      if (o.empty ? o.from <= i : o.from < i)
        return _e.normalized(e.slice(), n);
      i = o.to;
    }
    return new _e(e, n);
  }
  static cursor(e, n = 0, i, r) {
    return _s.create(e, e, (n == 0 ? 0 : n < 0 ? 4 : 8) | (i == null ? 3 : Math.min(2, i)) | (r ?? 33554431) << 5);
  }
  static range(e, n, i) {
    let r = (i ?? 33554431) << 5;
    return n < e ? _s.create(n, e, 16 | r | 8) : _s.create(e, n, r | (n > e ? 4 : 0));
  }
  static normalized(e, n = 0) {
    let i = e[n];
    e.sort((r, o) => r.from - o.from), n = e.indexOf(i);
    for (let r = 1; r < e.length; r++) {
      let o = e[r], s = e[r - 1];
      if (o.empty ? o.from <= s.to : o.from < s.to) {
        let l = s.from, a = Math.max(o.to, s.to);
        r <= n && n--, e.splice(--r, 2, o.anchor > o.head ? _e.range(a, l) : _e.range(l, a));
      }
    }
    return new _e(e, n);
  }
}
function WC(t, e) {
  for (let n of t.ranges)
    if (n.to > e)
      throw new RangeError("Selection points outside of document");
}
let bg = 0;
class Ge {
  constructor(e, n, i, r, o) {
    this.combine = e, this.compareInput = n, this.compare = i, this.isStatic = r, this.id = bg++, this.default = e([]), this.extensions = typeof o == "function" ? o(this) : o;
  }
  static define(e = {}) {
    return new Ge(e.combine || ((n) => n), e.compareInput || ((n, i) => n === i), e.compare || (e.combine ? (n, i) => n === i : _g), !!e.static, e.enables);
  }
  of(e) {
    return new Sc([], this, 0, e);
  }
  compute(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new Sc(e, this, 1, n);
  }
  computeN(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new Sc(e, this, 2, n);
  }
  from(e, n) {
    return n || (n = (i) => i), this.compute([e], (i) => n(i.field(e)));
  }
}
function _g(t, e) {
  return t == e || t.length == e.length && t.every((n, i) => n === e[i]);
}
class Sc {
  constructor(e, n, i, r) {
    this.dependencies = e, this.facet = n, this.type = i, this.value = r, this.id = bg++;
  }
  dynamicSlot(e) {
    var n;
    let i = this.value, r = this.facet.compareInput, o = this.id, s = e[o] >> 1, l = this.type == 2, a = !1, f = !1, c = [];
    for (let u of this.dependencies)
      u == "doc" ? a = !0 : u == "selection" ? f = !0 : ((n = e[u.id]) !== null && n !== void 0 ? n : 1) & 1 || c.push(e[u.id]);
    return {
      create(u) {
        return u.values[s] = i(u), 1;
      },
      update(u, h) {
        if (a && h.docChanged || f && (h.docChanged || h.selection) || Em(u, c)) {
          let d = i(u);
          if (l ? !A_(d, u.values[s], r) : !r(d, u.values[s]))
            return u.values[s] = d, 1;
        }
        return 0;
      },
      reconfigure: (u, h) => {
        let d, m = h.config.address[o];
        if (m != null) {
          let g = au(h, m);
          if (this.dependencies.every((_) => _ instanceof Ge ? h.facet(_) === u.facet(_) : _ instanceof qn ? h.field(_, !1) == u.field(_, !1) : !0) || (l ? A_(d = i(u), g, r) : r(d = i(u), g)))
            return u.values[s] = g, 0;
        } else
          d = i(u);
        return u.values[s] = d, 1;
      }
    };
  }
}
function A_(t, e, n) {
  if (t.length != e.length)
    return !1;
  for (let i = 0; i < t.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function Em(t, e) {
  let n = !1;
  for (let i of e)
    va(t, i) & 1 && (n = !0);
  return n;
}
function jx(t, e, n) {
  let i = n.map((a) => t[a.id]), r = n.map((a) => a.type), o = i.filter((a) => !(a & 1)), s = t[e.id] >> 1;
  function l(a) {
    let f = [];
    for (let c = 0; c < i.length; c++) {
      let u = au(a, i[c]);
      if (r[c] == 2)
        for (let h of u)
          f.push(h);
      else
        f.push(u);
    }
    return e.combine(f);
  }
  return {
    create(a) {
      for (let f of i)
        va(a, f);
      return a.values[s] = l(a), 1;
    },
    update(a, f) {
      if (!Em(a, o))
        return 0;
      let c = l(a);
      return e.compare(c, a.values[s]) ? 0 : (a.values[s] = c, 1);
    },
    reconfigure(a, f) {
      let c = Em(a, i), u = f.config.facets[e.id], h = f.facet(e);
      if (u && !c && _g(n, u))
        return a.values[s] = h, 0;
      let d = l(a);
      return e.compare(d, h) ? (a.values[s] = h, 0) : (a.values[s] = d, 1);
    }
  };
}
const O_ = /* @__PURE__ */ Ge.define({ static: !0 });
class qn {
  constructor(e, n, i, r, o) {
    this.id = e, this.createF = n, this.updateF = i, this.compareF = r, this.spec = o, this.provides = void 0;
  }
  static define(e) {
    let n = new qn(bg++, e.create, e.update, e.compare || ((i, r) => i === r), e);
    return e.provide && (n.provides = e.provide(n)), n;
  }
  create(e) {
    let n = e.facet(O_).find((i) => i.field == this);
    return ((n == null ? void 0 : n.create) || this.createF)(e);
  }
  slot(e) {
    let n = e[this.id] >> 1;
    return {
      create: (i) => (i.values[n] = this.create(i), 1),
      update: (i, r) => {
        let o = i.values[n], s = this.updateF(o, r);
        return this.compareF(o, s) ? 0 : (i.values[n] = s, 1);
      },
      reconfigure: (i, r) => r.config.address[this.id] != null ? (i.values[n] = r.field(this), 0) : (i.values[n] = this.create(i), 1)
    };
  }
  init(e) {
    return [this, O_.of({ field: this, create: e })];
  }
  get extension() {
    return this;
  }
}
const ps = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };
function Zl(t) {
  return (e) => new UC(e, t);
}
const Jl = {
  highest: /* @__PURE__ */ Zl(ps.highest),
  high: /* @__PURE__ */ Zl(ps.high),
  default: /* @__PURE__ */ Zl(ps.default),
  low: /* @__PURE__ */ Zl(ps.low),
  lowest: /* @__PURE__ */ Zl(ps.lowest)
};
class UC {
  constructor(e, n) {
    this.inner = e, this.prec = n;
  }
}
class io {
  of(e) {
    return new Pm(this, e);
  }
  reconfigure(e) {
    return io.reconfigure.of({ compartment: this, extension: e });
  }
  get(e) {
    return e.config.compartments.get(this);
  }
}
class Pm {
  constructor(e, n) {
    this.compartment = e, this.inner = n;
  }
}
class lu {
  constructor(e, n, i, r, o, s) {
    for (this.base = e, this.compartments = n, this.dynamicSlots = i, this.address = r, this.staticValues = o, this.facets = s, this.statusTemplate = []; this.statusTemplate.length < i.length; )
      this.statusTemplate.push(0);
  }
  staticFacet(e) {
    let n = this.address[e.id];
    return n == null ? e.default : this.staticValues[n >> 1];
  }
  static resolve(e, n, i) {
    let r = [], o = /* @__PURE__ */ Object.create(null), s = /* @__PURE__ */ new Map();
    for (let h of Bx(e, n, s))
      h instanceof qn ? r.push(h) : (o[h.facet.id] || (o[h.facet.id] = [])).push(h);
    let l = /* @__PURE__ */ Object.create(null), a = [], f = [];
    for (let h of r)
      l[h.id] = f.length << 1, f.push((d) => h.slot(d));
    let c = i == null ? void 0 : i.config.facets;
    for (let h in o) {
      let d = o[h], m = d[0].facet, g = c && c[h] || [];
      if (d.every((_) => _.type == 0))
        if (l[m.id] = a.length << 1 | 1, _g(g, d))
          a.push(i.facet(m));
        else {
          let _ = m.combine(d.map((b) => b.value));
          a.push(i && m.compare(_, i.facet(m)) ? i.facet(m) : _);
        }
      else {
        for (let _ of d)
          _.type == 0 ? (l[_.id] = a.length << 1 | 1, a.push(_.value)) : (l[_.id] = f.length << 1, f.push((b) => _.dynamicSlot(b)));
        l[m.id] = f.length << 1, f.push((_) => jx(_, m, d));
      }
    }
    let u = f.map((h) => h(l));
    return new lu(e, s, u, l, a, o);
  }
}
function Bx(t, e, n) {
  let i = [[], [], [], [], []], r = /* @__PURE__ */ new Map();
  function o(s, l) {
    let a = r.get(s);
    if (a != null) {
      if (a <= l)
        return;
      let f = i[a].indexOf(s);
      f > -1 && i[a].splice(f, 1), s instanceof Pm && n.delete(s.compartment);
    }
    if (r.set(s, l), Array.isArray(s))
      for (let f of s)
        o(f, l);
    else if (s instanceof Pm) {
      if (n.has(s.compartment))
        throw new RangeError("Duplicate use of compartment in extensions");
      let f = e.get(s.compartment) || s.inner;
      n.set(s.compartment, f), o(f, l);
    } else if (s instanceof UC)
      o(s.inner, s.prec);
    else if (s instanceof qn)
      i[l].push(s), s.provides && o(s.provides, l);
    else if (s instanceof Sc)
      i[l].push(s), s.facet.extensions && o(s.facet.extensions, ps.default);
    else {
      let f = s.extension;
      if (!f)
        throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
      o(f, l);
    }
  }
  return o(t, ps.default), i.reduce((s, l) => s.concat(l));
}
function va(t, e) {
  if (e & 1)
    return 2;
  let n = e >> 1, i = t.status[n];
  if (i == 4)
    throw new Error("Cyclic dependency between fields and/or facets");
  if (i & 2)
    return i;
  t.status[n] = 4;
  let r = t.computeSlot(t, t.config.dynamicSlots[n]);
  return t.status[n] = 2 | r;
}
function au(t, e) {
  return e & 1 ? t.config.staticValues[e >> 1] : t.values[e >> 1];
}
const qC = /* @__PURE__ */ Ge.define(), JC = /* @__PURE__ */ Ge.define({
  combine: (t) => t.some((e) => e),
  static: !0
}), KC = /* @__PURE__ */ Ge.define({
  combine: (t) => t.length ? t[0] : void 0,
  static: !0
}), GC = /* @__PURE__ */ Ge.define(), XC = /* @__PURE__ */ Ge.define(), QC = /* @__PURE__ */ Ge.define(), YC = /* @__PURE__ */ Ge.define({
  combine: (t) => t.length ? t[0] : !1
});
class is {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  static define() {
    return new Lx();
  }
}
class Lx {
  of(e) {
    return new is(this, e);
  }
}
class xx {
  constructor(e) {
    this.map = e;
  }
  of(e) {
    return new _t(this, e);
  }
}
class _t {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  map(e) {
    let n = this.type.map(this.value, e);
    return n === void 0 ? void 0 : n == this.value ? this : new _t(this.type, n);
  }
  is(e) {
    return this.type == e;
  }
  static define(e = {}) {
    return new xx(e.map || ((n) => n));
  }
  static mapEffects(e, n) {
    if (!e.length)
      return e;
    let i = [];
    for (let r of e) {
      let o = r.map(n);
      o && i.push(o);
    }
    return i;
  }
}
_t.reconfigure = /* @__PURE__ */ _t.define();
_t.appendConfig = /* @__PURE__ */ _t.define();
class Wn {
  constructor(e, n, i, r, o, s) {
    this.startState = e, this.changes = n, this.selection = i, this.effects = r, this.annotations = o, this.scrollIntoView = s, this._doc = null, this._state = null, i && WC(i, n.newLength), o.some((l) => l.type == Wn.time) || (this.annotations = o.concat(Wn.time.of(Date.now())));
  }
  static create(e, n, i, r, o, s) {
    return new Wn(e, n, i, r, o, s);
  }
  get newDoc() {
    return this._doc || (this._doc = this.changes.apply(this.startState.doc));
  }
  get newSelection() {
    return this.selection || this.startState.selection.map(this.changes);
  }
  get state() {
    return this._state || this.startState.applyTransaction(this), this._state;
  }
  annotation(e) {
    for (let n of this.annotations)
      if (n.type == e)
        return n.value;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get reconfigured() {
    return this.startState.config != this.state.config;
  }
  isUserEvent(e) {
    let n = this.annotation(Wn.userEvent);
    return !!(n && (n == e || n.length > e.length && n.slice(0, e.length) == e && n[e.length] == "."));
  }
}
Wn.time = /* @__PURE__ */ is.define();
Wn.userEvent = /* @__PURE__ */ is.define();
Wn.addToHistory = /* @__PURE__ */ is.define();
Wn.remote = /* @__PURE__ */ is.define();
function zx(t, e) {
  let n = [];
  for (let i = 0, r = 0; ; ) {
    let o, s;
    if (i < t.length && (r == e.length || e[r] >= t[i]))
      o = t[i++], s = t[i++];
    else if (r < e.length)
      o = e[r++], s = e[r++];
    else
      return n;
    !n.length || n[n.length - 1] < o ? n.push(o, s) : n[n.length - 1] < s && (n[n.length - 1] = s);
  }
}
function ZC(t, e, n) {
  var i;
  let r, o, s;
  return n ? (r = e.changes, o = Hn.empty(e.changes.length), s = t.changes.compose(e.changes)) : (r = e.changes.map(t.changes), o = t.changes.mapDesc(e.changes, !0), s = t.changes.compose(r)), {
    changes: s,
    selection: e.selection ? e.selection.map(o) : (i = t.selection) === null || i === void 0 ? void 0 : i.map(r),
    effects: _t.mapEffects(t.effects, r).concat(_t.mapEffects(e.effects, o)),
    annotations: t.annotations.length ? t.annotations.concat(e.annotations) : e.annotations,
    scrollIntoView: t.scrollIntoView || e.scrollIntoView
  };
}
function Rm(t, e, n) {
  let i = e.selection, r = fl(e.annotations);
  return e.userEvent && (r = r.concat(Wn.userEvent.of(e.userEvent))), {
    changes: e.changes instanceof Hn ? e.changes : Hn.of(e.changes || [], n, t.facet(KC)),
    selection: i && (i instanceof _e ? i : _e.single(i.anchor, i.head)),
    effects: fl(e.effects),
    annotations: r,
    scrollIntoView: !!e.scrollIntoView
  };
}
function $C(t, e, n) {
  let i = Rm(t, e.length ? e[0] : {}, t.doc.length);
  e.length && e[0].filter === !1 && (n = !1);
  for (let o = 1; o < e.length; o++) {
    e[o].filter === !1 && (n = !1);
    let s = !!e[o].sequential;
    i = ZC(i, Rm(t, e[o], s ? i.changes.newLength : t.doc.length), s);
  }
  let r = Wn.create(t, i.changes, i.selection, i.effects, i.annotations, i.scrollIntoView);
  return Fx(n ? Vx(r) : r);
}
function Vx(t) {
  let e = t.startState, n = !0;
  for (let r of e.facet(GC)) {
    let o = r(t);
    if (o === !1) {
      n = !1;
      break;
    }
    Array.isArray(o) && (n = n === !0 ? o : zx(n, o));
  }
  if (n !== !0) {
    let r, o;
    if (n === !1)
      o = t.changes.invertedDesc, r = Hn.empty(e.doc.length);
    else {
      let s = t.changes.filter(n);
      r = s.changes, o = s.filtered.mapDesc(s.changes).invertedDesc;
    }
    t = Wn.create(e, r, t.selection && t.selection.map(o), _t.mapEffects(t.effects, o), t.annotations, t.scrollIntoView);
  }
  let i = e.facet(XC);
  for (let r = i.length - 1; r >= 0; r--) {
    let o = i[r](t);
    o instanceof Wn ? t = o : Array.isArray(o) && o.length == 1 && o[0] instanceof Wn ? t = o[0] : t = $C(e, fl(o), !1);
  }
  return t;
}
function Fx(t) {
  let e = t.startState, n = e.facet(QC), i = t;
  for (let r = n.length - 1; r >= 0; r--) {
    let o = n[r](t);
    o && Object.keys(o).length && (i = ZC(i, Rm(e, o, t.changes.newLength), !0));
  }
  return i == t ? t : Wn.create(e, t.changes, t.selection, i.effects, i.annotations, i.scrollIntoView);
}
const Hx = [];
function fl(t) {
  return t == null ? Hx : Array.isArray(t) ? t : [t];
}
var un = /* @__PURE__ */ function(t) {
  return t[t.Word = 0] = "Word", t[t.Space = 1] = "Space", t[t.Other = 2] = "Other", t;
}(un || (un = {}));
const Wx = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
let Im;
try {
  Im = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
} catch {
}
function Ux(t) {
  if (Im)
    return Im.test(t);
  for (let e = 0; e < t.length; e++) {
    let n = t[e];
    if (/\w/.test(n) || n > "" && (n.toUpperCase() != n.toLowerCase() || Wx.test(n)))
      return !0;
  }
  return !1;
}
function qx(t) {
  return (e) => {
    if (!/\S/.test(e))
      return un.Space;
    if (Ux(e))
      return un.Word;
    for (let n = 0; n < t.length; n++)
      if (e.indexOf(t[n]) > -1)
        return un.Word;
    return un.Other;
  };
}
class Mt {
  constructor(e, n, i, r, o, s) {
    this.config = e, this.doc = n, this.selection = i, this.values = r, this.status = e.statusTemplate.slice(), this.computeSlot = o, s && (s._state = this);
    for (let l = 0; l < this.config.dynamicSlots.length; l++)
      va(this, l << 1);
    this.computeSlot = null;
  }
  field(e, n = !0) {
    let i = this.config.address[e.id];
    if (i == null) {
      if (n)
        throw new RangeError("Field is not present in this state");
      return;
    }
    return va(this, i), au(this, i);
  }
  update(...e) {
    return $C(this, e, !0);
  }
  applyTransaction(e) {
    let n = this.config, { base: i, compartments: r } = n;
    for (let s of e.effects)
      s.is(io.reconfigure) ? (n && (r = /* @__PURE__ */ new Map(), n.compartments.forEach((l, a) => r.set(a, l)), n = null), r.set(s.value.compartment, s.value.extension)) : s.is(_t.reconfigure) ? (n = null, i = s.value) : s.is(_t.appendConfig) && (n = null, i = fl(i).concat(s.value));
    let o;
    n ? o = e.startState.values.slice() : (n = lu.resolve(i, r, this), o = new Mt(n, this.doc, this.selection, n.dynamicSlots.map(() => null), (l, a) => a.reconfigure(l, this), null).values), new Mt(n, e.newDoc, e.newSelection, o, (s, l) => l.update(s, e), e);
  }
  replaceSelection(e) {
    return typeof e == "string" && (e = this.toText(e)), this.changeByRange((n) => ({
      changes: { from: n.from, to: n.to, insert: e },
      range: _e.cursor(n.from + e.length)
    }));
  }
  changeByRange(e) {
    let n = this.selection, i = e(n.ranges[0]), r = this.changes(i.changes), o = [i.range], s = fl(i.effects);
    for (let l = 1; l < n.ranges.length; l++) {
      let a = e(n.ranges[l]), f = this.changes(a.changes), c = f.map(r);
      for (let h = 0; h < l; h++)
        o[h] = o[h].map(c);
      let u = r.mapDesc(f, !0);
      o.push(a.range.map(u)), r = r.compose(c), s = _t.mapEffects(s, c).concat(_t.mapEffects(fl(a.effects), u));
    }
    return {
      changes: r,
      selection: _e.create(o, n.mainIndex),
      effects: s
    };
  }
  changes(e = []) {
    return e instanceof Hn ? e : Hn.of(e, this.doc.length, this.facet(Mt.lineSeparator));
  }
  toText(e) {
    return Bt.of(e.split(this.facet(Mt.lineSeparator) || Am));
  }
  sliceDoc(e = 0, n = this.doc.length) {
    return this.doc.sliceString(e, n, this.lineBreak);
  }
  facet(e) {
    let n = this.config.address[e.id];
    return n == null ? e.default : (va(this, n), au(this, n));
  }
  toJSON(e) {
    let n = {
      doc: this.sliceDoc(),
      selection: this.selection.toJSON()
    };
    if (e)
      for (let i in e) {
        let r = e[i];
        r instanceof qn && this.config.address[r.id] != null && (n[i] = r.spec.toJSON(this.field(e[i]), this));
      }
    return n;
  }
  static fromJSON(e, n = {}, i) {
    if (!e || typeof e.doc != "string")
      throw new RangeError("Invalid JSON representation for EditorState");
    let r = [];
    if (i) {
      for (let o in i)
        if (Object.prototype.hasOwnProperty.call(e, o)) {
          let s = i[o], l = e[o];
          r.push(s.init((a) => s.spec.fromJSON(l, a)));
        }
    }
    return Mt.create({
      doc: e.doc,
      selection: _e.fromJSON(e.selection),
      extensions: n.extensions ? r.concat([n.extensions]) : r
    });
  }
  static create(e = {}) {
    let n = lu.resolve(e.extensions || [], /* @__PURE__ */ new Map()), i = e.doc instanceof Bt ? e.doc : Bt.of((e.doc || "").split(n.staticFacet(Mt.lineSeparator) || Am)), r = e.selection ? e.selection instanceof _e ? e.selection : _e.single(e.selection.anchor, e.selection.head) : _e.single(0);
    return WC(r, i.length), n.staticFacet(JC) || (r = r.asSingle()), new Mt(n, i, r, n.dynamicSlots.map(() => null), (o, s) => s.create(o), null);
  }
  get tabSize() {
    return this.facet(Mt.tabSize);
  }
  get lineBreak() {
    return this.facet(Mt.lineSeparator) || `
`;
  }
  get readOnly() {
    return this.facet(YC);
  }
  phrase(e, ...n) {
    for (let i of this.facet(Mt.phrases))
      if (Object.prototype.hasOwnProperty.call(i, e)) {
        e = i[e];
        break;
      }
    return n.length && (e = e.replace(/\$(\$|\d*)/g, (i, r) => {
      if (r == "$")
        return "$";
      let o = +(r || 1);
      return !o || o > n.length ? i : n[o - 1];
    })), e;
  }
  languageDataAt(e, n, i = -1) {
    let r = [];
    for (let o of this.facet(qC))
      for (let s of o(this, n, i))
        Object.prototype.hasOwnProperty.call(s, e) && r.push(s[e]);
    return r;
  }
  charCategorizer(e) {
    return qx(this.languageDataAt("wordChars", e).join(""));
  }
  wordAt(e) {
    let { text: n, from: i, length: r } = this.doc.lineAt(e), o = this.charCategorizer(e), s = e - i, l = e - i;
    for (; s > 0; ) {
      let a = pi(n, s, !1);
      if (o(n.slice(a, s)) != un.Word)
        break;
      s = a;
    }
    for (; l < r; ) {
      let a = pi(n, l);
      if (o(n.slice(l, a)) != un.Word)
        break;
      l = a;
    }
    return s == l ? null : _e.range(s + i, l + i);
  }
}
Mt.allowMultipleSelections = JC;
Mt.tabSize = /* @__PURE__ */ Ge.define({
  combine: (t) => t.length ? t[0] : 4
});
Mt.lineSeparator = KC;
Mt.readOnly = YC;
Mt.phrases = /* @__PURE__ */ Ge.define({
  compare(t, e) {
    let n = Object.keys(t), i = Object.keys(e);
    return n.length == i.length && n.every((r) => t[r] == e[r]);
  }
});
Mt.languageData = qC;
Mt.changeFilter = GC;
Mt.transactionFilter = XC;
Mt.transactionExtender = QC;
io.reconfigure = /* @__PURE__ */ _t.define();
function yr(t, e, n = {}) {
  let i = {};
  for (let r of t)
    for (let o of Object.keys(r)) {
      let s = r[o], l = i[o];
      if (l === void 0)
        i[o] = s;
      else if (!(l === s || s === void 0))
        if (Object.hasOwnProperty.call(n, o))
          i[o] = n[o](l, s);
        else
          throw new Error("Config merge conflict for field " + o);
    }
  for (let r in e)
    i[r] === void 0 && (i[r] = e[r]);
  return i;
}
class Ns {
  eq(e) {
    return this == e;
  }
  range(e, n = e) {
    return fu.create(e, n, this);
  }
}
Ns.prototype.startSide = Ns.prototype.endSide = 0;
Ns.prototype.point = !1;
Ns.prototype.mapMode = di.TrackDel;
let fu = class {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.value = i;
  }
  static create(e, n, i) {
    return new fu(e, n, i);
  }
};
function Nm(t, e) {
  return t.from - e.from || t.value.startSide - e.value.startSide;
}
class yg {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.value = i, this.maxPoint = r;
  }
  get length() {
    return this.to[this.to.length - 1];
  }
  findIndex(e, n, i, r = 0) {
    let o = i ? this.to : this.from;
    for (let s = r, l = o.length; ; ) {
      if (s == l)
        return s;
      let a = s + l >> 1, f = o[a] - e || (i ? this.value[a].endSide : this.value[a].startSide) - n;
      if (a == s)
        return f >= 0 ? s : l;
      f >= 0 ? l = a : s = a + 1;
    }
  }
  between(e, n, i, r) {
    for (let o = this.findIndex(n, -1e9, !0), s = this.findIndex(i, 1e9, !1, o); o < s; o++)
      if (r(this.from[o] + e, this.to[o] + e, this.value[o]) === !1)
        return !1;
  }
  map(e, n) {
    let i = [], r = [], o = [], s = -1, l = -1;
    for (let a = 0; a < this.value.length; a++) {
      let f = this.value[a], c = this.from[a] + e, u = this.to[a] + e, h, d;
      if (c == u) {
        let m = n.mapPos(c, f.startSide, f.mapMode);
        if (m == null || (h = d = m, f.startSide != f.endSide && (d = n.mapPos(c, f.endSide), d < h)))
          continue;
      } else if (h = n.mapPos(c, f.startSide), d = n.mapPos(u, f.endSide), h > d || h == d && f.startSide > 0 && f.endSide <= 0)
        continue;
      (d - h || f.endSide - f.startSide) < 0 || (s < 0 && (s = h), f.point && (l = Math.max(l, d - h)), i.push(f), r.push(h - s), o.push(d - s));
    }
    return { mapped: i.length ? new yg(r, o, i, l) : null, pos: s };
  }
}
class Lt {
  constructor(e, n, i, r) {
    this.chunkPos = e, this.chunk = n, this.nextLayer = i, this.maxPoint = r;
  }
  static create(e, n, i, r) {
    return new Lt(e, n, i, r);
  }
  get length() {
    let e = this.chunk.length - 1;
    return e < 0 ? 0 : Math.max(this.chunkEnd(e), this.nextLayer.length);
  }
  get size() {
    if (this.isEmpty)
      return 0;
    let e = this.nextLayer.size;
    for (let n of this.chunk)
      e += n.value.length;
    return e;
  }
  chunkEnd(e) {
    return this.chunkPos[e] + this.chunk[e].length;
  }
  update(e) {
    let { add: n = [], sort: i = !1, filterFrom: r = 0, filterTo: o = this.length } = e, s = e.filter;
    if (n.length == 0 && !s)
      return this;
    if (i && (n = n.slice().sort(Nm)), this.isEmpty)
      return n.length ? Lt.of(n) : this;
    let l = new eS(this, null, -1).goto(0), a = 0, f = [], c = new Go();
    for (; l.value || a < n.length; )
      if (a < n.length && (l.from - n[a].from || l.startSide - n[a].value.startSide) >= 0) {
        let u = n[a++];
        c.addInner(u.from, u.to, u.value) || f.push(u);
      } else
        l.rangeIndex == 1 && l.chunkIndex < this.chunk.length && (a == n.length || this.chunkEnd(l.chunkIndex) < n[a].from) && (!s || r > this.chunkEnd(l.chunkIndex) || o < this.chunkPos[l.chunkIndex]) && c.addChunk(this.chunkPos[l.chunkIndex], this.chunk[l.chunkIndex]) ? l.nextChunk() : ((!s || r > l.to || o < l.from || s(l.from, l.to, l.value)) && (c.addInner(l.from, l.to, l.value) || f.push(fu.create(l.from, l.to, l.value))), l.next());
    return c.finishInner(this.nextLayer.isEmpty && !f.length ? Lt.empty : this.nextLayer.update({ add: f, filter: s, filterFrom: r, filterTo: o }));
  }
  map(e) {
    if (e.empty || this.isEmpty)
      return this;
    let n = [], i = [], r = -1;
    for (let s = 0; s < this.chunk.length; s++) {
      let l = this.chunkPos[s], a = this.chunk[s], f = e.touchesRange(l, l + a.length);
      if (f === !1)
        r = Math.max(r, a.maxPoint), n.push(a), i.push(e.mapPos(l));
      else if (f === !0) {
        let { mapped: c, pos: u } = a.map(l, e);
        c && (r = Math.max(r, c.maxPoint), n.push(c), i.push(u));
      }
    }
    let o = this.nextLayer.map(e);
    return n.length == 0 ? o : new Lt(i, n, o || Lt.empty, r);
  }
  between(e, n, i) {
    if (!this.isEmpty) {
      for (let r = 0; r < this.chunk.length; r++) {
        let o = this.chunkPos[r], s = this.chunk[r];
        if (n >= o && e <= o + s.length && s.between(o, e - o, n - o, i) === !1)
          return;
      }
      this.nextLayer.between(e, n, i);
    }
  }
  iter(e = 0) {
    return Ha.from([this]).goto(e);
  }
  get isEmpty() {
    return this.nextLayer == this;
  }
  static iter(e, n = 0) {
    return Ha.from(e).goto(n);
  }
  static compare(e, n, i, r, o = -1) {
    let s = e.filter((u) => u.maxPoint > 0 || !u.isEmpty && u.maxPoint >= o), l = n.filter((u) => u.maxPoint > 0 || !u.isEmpty && u.maxPoint >= o), a = T_(s, l, i), f = new $l(s, a, o), c = new $l(l, a, o);
    i.iterGaps((u, h, d) => E_(f, u, c, h, d, r)), i.empty && i.length == 0 && E_(f, 0, c, 0, 0, r);
  }
  static eq(e, n, i = 0, r) {
    r == null && (r = 1e9 - 1);
    let o = e.filter((c) => !c.isEmpty && n.indexOf(c) < 0), s = n.filter((c) => !c.isEmpty && e.indexOf(c) < 0);
    if (o.length != s.length)
      return !1;
    if (!o.length)
      return !0;
    let l = T_(o, s), a = new $l(o, l, 0).goto(i), f = new $l(s, l, 0).goto(i);
    for (; ; ) {
      if (a.to != f.to || !Dm(a.active, f.active) || a.point && (!f.point || !a.point.eq(f.point)))
        return !1;
      if (a.to > r)
        return !0;
      a.next(), f.next();
    }
  }
  static spans(e, n, i, r, o = -1) {
    let s = new $l(e, null, o).goto(n), l = n, a = s.openStart;
    for (; ; ) {
      let f = Math.min(s.to, i);
      if (s.point) {
        let c = s.activeForPoint(s.to), u = s.pointFrom < n ? c.length + 1 : Math.min(c.length, a);
        r.point(l, f, s.point, c, u, s.pointRank), a = Math.min(s.openEnd(f), c.length);
      } else
        f > l && (r.span(l, f, s.active, a), a = s.openEnd(f));
      if (s.to > i)
        return a + (s.point && s.to > i ? 1 : 0);
      l = s.to, s.next();
    }
  }
  static of(e, n = !1) {
    let i = new Go();
    for (let r of e instanceof fu ? [e] : n ? Jx(e) : e)
      i.add(r.from, r.to, r.value);
    return i.finish();
  }
}
Lt.empty = /* @__PURE__ */ new Lt([], [], null, -1);
function Jx(t) {
  if (t.length > 1)
    for (let e = t[0], n = 1; n < t.length; n++) {
      let i = t[n];
      if (Nm(e, i) > 0)
        return t.slice().sort(Nm);
      e = i;
    }
  return t;
}
Lt.empty.nextLayer = Lt.empty;
class Go {
  constructor() {
    this.chunks = [], this.chunkPos = [], this.chunkStart = -1, this.last = null, this.lastFrom = -1e9, this.lastTo = -1e9, this.from = [], this.to = [], this.value = [], this.maxPoint = -1, this.setMaxPoint = -1, this.nextLayer = null;
  }
  finishChunk(e) {
    this.chunks.push(new yg(this.from, this.to, this.value, this.maxPoint)), this.chunkPos.push(this.chunkStart), this.chunkStart = -1, this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint), this.maxPoint = -1, e && (this.from = [], this.to = [], this.value = []);
  }
  add(e, n, i) {
    this.addInner(e, n, i) || (this.nextLayer || (this.nextLayer = new Go())).add(e, n, i);
  }
  addInner(e, n, i) {
    let r = e - this.lastTo || i.startSide - this.last.endSide;
    if (r <= 0 && (e - this.lastFrom || i.startSide - this.last.startSide) < 0)
      throw new Error("Ranges must be added sorted by `from` position and `startSide`");
    return r < 0 ? !1 : (this.from.length == 250 && this.finishChunk(!0), this.chunkStart < 0 && (this.chunkStart = e), this.from.push(e - this.chunkStart), this.to.push(n - this.chunkStart), this.last = i, this.lastFrom = e, this.lastTo = n, this.value.push(i), i.point && (this.maxPoint = Math.max(this.maxPoint, n - e)), !0);
  }
  addChunk(e, n) {
    if ((e - this.lastTo || n.value[0].startSide - this.last.endSide) < 0)
      return !1;
    this.from.length && this.finishChunk(!0), this.setMaxPoint = Math.max(this.setMaxPoint, n.maxPoint), this.chunks.push(n), this.chunkPos.push(e);
    let i = n.value.length - 1;
    return this.last = n.value[i], this.lastFrom = n.from[i] + e, this.lastTo = n.to[i] + e, !0;
  }
  finish() {
    return this.finishInner(Lt.empty);
  }
  finishInner(e) {
    if (this.from.length && this.finishChunk(!1), this.chunks.length == 0)
      return e;
    let n = Lt.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(e) : e, this.setMaxPoint);
    return this.from = null, n;
  }
}
function T_(t, e, n) {
  let i = /* @__PURE__ */ new Map();
  for (let o of t)
    for (let s = 0; s < o.chunk.length; s++)
      o.chunk[s].maxPoint <= 0 && i.set(o.chunk[s], o.chunkPos[s]);
  let r = /* @__PURE__ */ new Set();
  for (let o of e)
    for (let s = 0; s < o.chunk.length; s++) {
      let l = i.get(o.chunk[s]);
      l != null && (n ? n.mapPos(l) : l) == o.chunkPos[s] && !(n != null && n.touchesRange(l, l + o.chunk[s].length)) && r.add(o.chunk[s]);
    }
  return r;
}
class eS {
  constructor(e, n, i, r = 0) {
    this.layer = e, this.skip = n, this.minPoint = i, this.rank = r;
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  get endSide() {
    return this.value ? this.value.endSide : 0;
  }
  goto(e, n = -1e9) {
    return this.chunkIndex = this.rangeIndex = 0, this.gotoInner(e, n, !1), this;
  }
  gotoInner(e, n, i) {
    for (; this.chunkIndex < this.layer.chunk.length; ) {
      let r = this.layer.chunk[this.chunkIndex];
      if (!(this.skip && this.skip.has(r) || this.layer.chunkEnd(this.chunkIndex) < e || r.maxPoint < this.minPoint))
        break;
      this.chunkIndex++, i = !1;
    }
    if (this.chunkIndex < this.layer.chunk.length) {
      let r = this.layer.chunk[this.chunkIndex].findIndex(e - this.layer.chunkPos[this.chunkIndex], n, !0);
      (!i || this.rangeIndex < r) && this.setRangeIndex(r);
    }
    this.next();
  }
  forward(e, n) {
    (this.to - e || this.endSide - n) < 0 && this.gotoInner(e, n, !0);
  }
  next() {
    for (; ; )
      if (this.chunkIndex == this.layer.chunk.length) {
        this.from = this.to = 1e9, this.value = null;
        break;
      } else {
        let e = this.layer.chunkPos[this.chunkIndex], n = this.layer.chunk[this.chunkIndex], i = e + n.from[this.rangeIndex];
        if (this.from = i, this.to = e + n.to[this.rangeIndex], this.value = n.value[this.rangeIndex], this.setRangeIndex(this.rangeIndex + 1), this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
          break;
      }
  }
  setRangeIndex(e) {
    if (e == this.layer.chunk[this.chunkIndex].value.length) {
      if (this.chunkIndex++, this.skip)
        for (; this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]); )
          this.chunkIndex++;
      this.rangeIndex = 0;
    } else
      this.rangeIndex = e;
  }
  nextChunk() {
    this.chunkIndex++, this.rangeIndex = 0, this.next();
  }
  compare(e) {
    return this.from - e.from || this.startSide - e.startSide || this.rank - e.rank || this.to - e.to || this.endSide - e.endSide;
  }
}
class Ha {
  constructor(e) {
    this.heap = e;
  }
  static from(e, n = null, i = -1) {
    let r = [];
    for (let o = 0; o < e.length; o++)
      for (let s = e[o]; !s.isEmpty; s = s.nextLayer)
        s.maxPoint >= i && r.push(new eS(s, n, i, o));
    return r.length == 1 ? r[0] : new Ha(r);
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  goto(e, n = -1e9) {
    for (let i of this.heap)
      i.goto(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      gd(this.heap, i);
    return this.next(), this;
  }
  forward(e, n) {
    for (let i of this.heap)
      i.forward(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      gd(this.heap, i);
    (this.to - e || this.value.endSide - n) < 0 && this.next();
  }
  next() {
    if (this.heap.length == 0)
      this.from = this.to = 1e9, this.value = null, this.rank = -1;
    else {
      let e = this.heap[0];
      this.from = e.from, this.to = e.to, this.value = e.value, this.rank = e.rank, e.value && e.next(), gd(this.heap, 0);
    }
  }
}
function gd(t, e) {
  for (let n = t[e]; ; ) {
    let i = (e << 1) + 1;
    if (i >= t.length)
      break;
    let r = t[i];
    if (i + 1 < t.length && r.compare(t[i + 1]) >= 0 && (r = t[i + 1], i++), n.compare(r) < 0)
      break;
    t[i] = n, t[e] = r, e = i;
  }
}
class $l {
  constructor(e, n, i) {
    this.minPoint = i, this.active = [], this.activeTo = [], this.activeRank = [], this.minActive = -1, this.point = null, this.pointFrom = 0, this.pointRank = 0, this.to = -1e9, this.endSide = 0, this.openStart = -1, this.cursor = Ha.from(e, n, i);
  }
  goto(e, n = -1e9) {
    return this.cursor.goto(e, n), this.active.length = this.activeTo.length = this.activeRank.length = 0, this.minActive = -1, this.to = e, this.endSide = n, this.openStart = -1, this.next(), this;
  }
  forward(e, n) {
    for (; this.minActive > -1 && (this.activeTo[this.minActive] - e || this.active[this.minActive].endSide - n) < 0; )
      this.removeActive(this.minActive);
    this.cursor.forward(e, n);
  }
  removeActive(e) {
    Wf(this.active, e), Wf(this.activeTo, e), Wf(this.activeRank, e), this.minActive = P_(this.active, this.activeTo);
  }
  addActive(e) {
    let n = 0, { value: i, to: r, rank: o } = this.cursor;
    for (; n < this.activeRank.length && this.activeRank[n] <= o; )
      n++;
    Uf(this.active, n, i), Uf(this.activeTo, n, r), Uf(this.activeRank, n, o), e && Uf(e, n, this.cursor.from), this.minActive = P_(this.active, this.activeTo);
  }
  next() {
    let e = this.to, n = this.point;
    this.point = null;
    let i = this.openStart < 0 ? [] : null;
    for (; ; ) {
      let r = this.minActive;
      if (r > -1 && (this.activeTo[r] - this.cursor.from || this.active[r].endSide - this.cursor.startSide) < 0) {
        if (this.activeTo[r] > e) {
          this.to = this.activeTo[r], this.endSide = this.active[r].endSide;
          break;
        }
        this.removeActive(r), i && Wf(i, r);
      } else if (this.cursor.value)
        if (this.cursor.from > e) {
          this.to = this.cursor.from, this.endSide = this.cursor.startSide;
          break;
        } else {
          let o = this.cursor.value;
          if (!o.point)
            this.addActive(i), this.cursor.next();
          else if (n && this.cursor.to == this.to && this.cursor.from < this.cursor.to)
            this.cursor.next();
          else {
            this.point = o, this.pointFrom = this.cursor.from, this.pointRank = this.cursor.rank, this.to = this.cursor.to, this.endSide = o.endSide, this.cursor.next(), this.forward(this.to, this.endSide);
            break;
          }
        }
      else {
        this.to = this.endSide = 1e9;
        break;
      }
    }
    if (i) {
      this.openStart = 0;
      for (let r = i.length - 1; r >= 0 && i[r] < e; r--)
        this.openStart++;
    }
  }
  activeForPoint(e) {
    if (!this.active.length)
      return this.active;
    let n = [];
    for (let i = this.active.length - 1; i >= 0 && !(this.activeRank[i] < this.pointRank); i--)
      (this.activeTo[i] > e || this.activeTo[i] == e && this.active[i].endSide >= this.point.endSide) && n.push(this.active[i]);
    return n.reverse();
  }
  openEnd(e) {
    let n = 0;
    for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > e; i--)
      n++;
    return n;
  }
}
function E_(t, e, n, i, r, o) {
  t.goto(e), n.goto(i);
  let s = i + r, l = i, a = i - e;
  for (; ; ) {
    let f = t.to + a - n.to || t.endSide - n.endSide, c = f < 0 ? t.to + a : n.to, u = Math.min(c, s);
    if (t.point || n.point ? t.point && n.point && (t.point == n.point || t.point.eq(n.point)) && Dm(t.activeForPoint(t.to + a), n.activeForPoint(n.to)) || o.comparePoint(l, u, t.point, n.point) : u > l && !Dm(t.active, n.active) && o.compareRange(l, u, t.active, n.active), c > s)
      break;
    l = c, f <= 0 && t.next(), f >= 0 && n.next();
  }
}
function Dm(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (t[n] != e[n] && !t[n].eq(e[n]))
      return !1;
  return !0;
}
function Wf(t, e) {
  for (let n = e, i = t.length - 1; n < i; n++)
    t[n] = t[n + 1];
  t.pop();
}
function Uf(t, e, n) {
  for (let i = t.length - 1; i >= e; i--)
    t[i + 1] = t[i];
  t[e] = n;
}
function P_(t, e) {
  let n = -1, i = 1e9;
  for (let r = 0; r < e.length; r++)
    (e[r] - i || t[r].endSide - t[n].endSide) < 0 && (n = r, i = e[r]);
  return n;
}
function gf(t, e, n = t.length) {
  let i = 0;
  for (let r = 0; r < n; )
    t.charCodeAt(r) == 9 ? (i += e - i % e, r++) : (i++, r = pi(t, r));
  return i;
}
function jm(t, e, n, i) {
  for (let r = 0, o = 0; ; ) {
    if (o >= e)
      return r;
    if (r == t.length)
      break;
    o += t.charCodeAt(r) == 9 ? n - o % n : 1, r = pi(t, r);
  }
  return i === !0 ? -1 : t.length;
}
const Bm = "ͼ", R_ = typeof Symbol > "u" ? "__" + Bm : Symbol.for(Bm), Lm = typeof Symbol > "u" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet"), I_ = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : {};
class Xo {
  constructor(e, n) {
    this.rules = [];
    let { finish: i } = n || {};
    function r(s) {
      return /^@/.test(s) ? [s] : s.split(/,\s*/);
    }
    function o(s, l, a, f) {
      let c = [], u = /^@(\w+)\b/.exec(s[0]), h = u && u[1] == "keyframes";
      if (u && l == null)
        return a.push(s[0] + ";");
      for (let d in l) {
        let m = l[d];
        if (/&/.test(d))
          o(
            d.split(/,\s*/).map((g) => s.map((_) => g.replace(/&/, _))).reduce((g, _) => g.concat(_)),
            m,
            a
          );
        else if (m && typeof m == "object") {
          if (!u)
            throw new RangeError("The value of a property (" + d + ") should be a primitive value.");
          o(r(d), m, c, h);
        } else
          m != null && c.push(d.replace(/_.*/, "").replace(/[A-Z]/g, (g) => "-" + g.toLowerCase()) + ": " + m + ";");
      }
      (c.length || h) && a.push((i && !u && !f ? s.map(i) : s).join(", ") + " {" + c.join(" ") + "}");
    }
    for (let s in e)
      o(r(s), e[s], this.rules);
  }
  getRules() {
    return this.rules.join(`
`);
  }
  static newName() {
    let e = I_[R_] || 1;
    return I_[R_] = e + 1, Bm + e.toString(36);
  }
  static mount(e, n) {
    (e[Lm] || new Kx(e)).mount(Array.isArray(n) ? n : [n]);
  }
}
let qf = null;
class Kx {
  constructor(e) {
    if (!e.head && e.adoptedStyleSheets && typeof CSSStyleSheet < "u") {
      if (qf)
        return e.adoptedStyleSheets = [qf.sheet].concat(e.adoptedStyleSheets), e[Lm] = qf;
      this.sheet = new CSSStyleSheet(), e.adoptedStyleSheets = [this.sheet].concat(e.adoptedStyleSheets), qf = this;
    } else {
      this.styleTag = (e.ownerDocument || e).createElement("style");
      let n = e.head || e;
      n.insertBefore(this.styleTag, n.firstChild);
    }
    this.modules = [], e[Lm] = this;
  }
  mount(e) {
    let n = this.sheet, i = 0, r = 0;
    for (let o = 0; o < e.length; o++) {
      let s = e[o], l = this.modules.indexOf(s);
      if (l < r && l > -1 && (this.modules.splice(l, 1), r--, l = -1), l == -1) {
        if (this.modules.splice(r++, 0, s), n)
          for (let a = 0; a < s.rules.length; a++)
            n.insertRule(s.rules[a], i++);
      } else {
        for (; r < l; )
          i += this.modules[r++].rules.length;
        i += s.rules.length, r++;
      }
    }
    if (!n) {
      let o = "";
      for (let s = 0; s < this.modules.length; s++)
        o += this.modules[s].getRules() + `
`;
      this.styleTag.textContent = o;
    }
  }
}
var Qo = {
  8: "Backspace",
  9: "Tab",
  10: "Enter",
  12: "NumLock",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  44: "PrintScreen",
  45: "Insert",
  46: "Delete",
  59: ";",
  61: "=",
  91: "Meta",
  92: "Meta",
  106: "*",
  107: "+",
  108: ",",
  109: "-",
  110: ".",
  111: "/",
  144: "NumLock",
  145: "ScrollLock",
  160: "Shift",
  161: "Shift",
  162: "Control",
  163: "Control",
  164: "Alt",
  165: "Alt",
  173: "-",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
}, Wa = {
  48: ")",
  49: "!",
  50: "@",
  51: "#",
  52: "$",
  53: "%",
  54: "^",
  55: "&",
  56: "*",
  57: "(",
  59: ":",
  61: "+",
  173: "_",
  186: ":",
  187: "+",
  188: "<",
  189: "_",
  190: ">",
  191: "?",
  192: "~",
  219: "{",
  220: "|",
  221: "}",
  222: '"'
}, N_ = typeof navigator < "u" && /Chrome\/(\d+)/.exec(navigator.userAgent), Gx = typeof navigator < "u" && /Mac/.test(navigator.platform), Xx = typeof navigator < "u" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent), Qx = Gx || N_ && +N_[1] < 57;
for (var ri = 0; ri < 10; ri++)
  Qo[48 + ri] = Qo[96 + ri] = String(ri);
for (var ri = 1; ri <= 24; ri++)
  Qo[ri + 111] = "F" + ri;
for (var ri = 65; ri <= 90; ri++)
  Qo[ri] = String.fromCharCode(ri + 32), Wa[ri] = String.fromCharCode(ri);
for (var bd in Qo)
  Wa.hasOwnProperty(bd) || (Wa[bd] = Qo[bd]);
function Yx(t) {
  var e = Qx && (t.ctrlKey || t.altKey || t.metaKey) || Xx && t.shiftKey && t.key && t.key.length == 1 || t.key == "Unidentified", n = !e && t.key || (t.shiftKey ? Wa : Qo)[t.keyCode] || t.key || "Unidentified";
  return n == "Esc" && (n = "Escape"), n == "Del" && (n = "Delete"), n == "Left" && (n = "ArrowLeft"), n == "Up" && (n = "ArrowUp"), n == "Right" && (n = "ArrowRight"), n == "Down" && (n = "ArrowDown"), n;
}
function cu(t) {
  let e;
  return t.nodeType == 11 ? e = t.getSelection ? t : t.ownerDocument : e = t, e.getSelection();
}
function Tl(t, e) {
  return e ? t == e || t.contains(e.nodeType != 1 ? e.parentNode : e) : !1;
}
function Zx(t) {
  let e = t.activeElement;
  for (; e && e.shadowRoot; )
    e = e.shadowRoot.activeElement;
  return e;
}
function Mc(t, e) {
  if (!e.anchorNode)
    return !1;
  try {
    return Tl(t, e.anchorNode);
  } catch {
    return !1;
  }
}
function Ua(t) {
  return t.nodeType == 3 ? El(t, 0, t.nodeValue.length).getClientRects() : t.nodeType == 1 ? t.getClientRects() : [];
}
function uu(t, e, n, i) {
  return n ? D_(t, e, n, i, -1) || D_(t, e, n, i, 1) : !1;
}
function hu(t) {
  for (var e = 0; ; e++)
    if (t = t.previousSibling, !t)
      return e;
}
function D_(t, e, n, i, r) {
  for (; ; ) {
    if (t == n && e == i)
      return !0;
    if (e == (r < 0 ? 0 : qa(t))) {
      if (t.nodeName == "DIV")
        return !1;
      let o = t.parentNode;
      if (!o || o.nodeType != 1)
        return !1;
      e = hu(t) + (r < 0 ? 0 : 1), t = o;
    } else if (t.nodeType == 1) {
      if (t = t.childNodes[e + (r < 0 ? -1 : 0)], t.nodeType == 1 && t.contentEditable == "false")
        return !1;
      e = r < 0 ? qa(t) : 0;
    } else
      return !1;
  }
}
function qa(t) {
  return t.nodeType == 3 ? t.nodeValue.length : t.childNodes.length;
}
const tS = { left: 0, right: 0, top: 0, bottom: 0 };
function wg(t, e) {
  let n = e ? t.left : t.right;
  return { left: n, right: n, top: t.top, bottom: t.bottom };
}
function $x(t) {
  return {
    left: 0,
    right: t.innerWidth,
    top: 0,
    bottom: t.innerHeight
  };
}
function ez(t, e, n, i, r, o, s, l) {
  let a = t.ownerDocument, f = a.defaultView || window;
  for (let c = t; c; )
    if (c.nodeType == 1) {
      let u, h = c == a.body;
      if (h)
        u = $x(f);
      else {
        if (c.scrollHeight <= c.clientHeight && c.scrollWidth <= c.clientWidth) {
          c = c.assignedSlot || c.parentNode;
          continue;
        }
        let g = c.getBoundingClientRect();
        u = {
          left: g.left,
          right: g.left + c.clientWidth,
          top: g.top,
          bottom: g.top + c.clientHeight
        };
      }
      let d = 0, m = 0;
      if (r == "nearest")
        e.top < u.top ? (m = -(u.top - e.top + s), n > 0 && e.bottom > u.bottom + m && (m = e.bottom - u.bottom + m + s)) : e.bottom > u.bottom && (m = e.bottom - u.bottom + s, n < 0 && e.top - m < u.top && (m = -(u.top + m - e.top + s)));
      else {
        let g = e.bottom - e.top, _ = u.bottom - u.top;
        m = (r == "center" && g <= _ ? e.top + g / 2 - _ / 2 : r == "start" || r == "center" && n < 0 ? e.top - s : e.bottom - _ + s) - u.top;
      }
      if (i == "nearest" ? e.left < u.left ? (d = -(u.left - e.left + o), n > 0 && e.right > u.right + d && (d = e.right - u.right + d + o)) : e.right > u.right && (d = e.right - u.right + o, n < 0 && e.left < u.left + d && (d = -(u.left + d - e.left + o))) : d = (i == "center" ? e.left + (e.right - e.left) / 2 - (u.right - u.left) / 2 : i == "start" == l ? e.left - o : e.right - (u.right - u.left) + o) - u.left, d || m)
        if (h)
          f.scrollBy(d, m);
        else {
          let g = 0, _ = 0;
          if (m) {
            let b = c.scrollTop;
            c.scrollTop += m, _ = c.scrollTop - b;
          }
          if (d) {
            let b = c.scrollLeft;
            c.scrollLeft += d, g = c.scrollLeft - b;
          }
          e = {
            left: e.left - g,
            top: e.top - _,
            right: e.right - g,
            bottom: e.bottom - _
          }, g && Math.abs(g - d) < 1 && (i = "nearest"), _ && Math.abs(_ - m) < 1 && (r = "nearest");
        }
      if (h)
        break;
      c = c.assignedSlot || c.parentNode;
    } else if (c.nodeType == 11)
      c = c.host;
    else
      break;
}
function tz(t) {
  let e = t.ownerDocument;
  for (let n = t.parentNode; n && n != e.body; )
    if (n.nodeType == 1) {
      if (n.scrollHeight > n.clientHeight || n.scrollWidth > n.clientWidth)
        return n;
      n = n.assignedSlot || n.parentNode;
    } else if (n.nodeType == 11)
      n = n.host;
    else
      break;
  return null;
}
class nz {
  constructor() {
    this.anchorNode = null, this.anchorOffset = 0, this.focusNode = null, this.focusOffset = 0;
  }
  eq(e) {
    return this.anchorNode == e.anchorNode && this.anchorOffset == e.anchorOffset && this.focusNode == e.focusNode && this.focusOffset == e.focusOffset;
  }
  setRange(e) {
    this.set(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset);
  }
  set(e, n, i, r) {
    this.anchorNode = e, this.anchorOffset = n, this.focusNode = i, this.focusOffset = r;
  }
}
let Js = null;
function nS(t) {
  if (t.setActive)
    return t.setActive();
  if (Js)
    return t.focus(Js);
  let e = [];
  for (let n = t; n && (e.push(n, n.scrollTop, n.scrollLeft), n != n.ownerDocument); n = n.parentNode)
    ;
  if (t.focus(Js == null ? {
    get preventScroll() {
      return Js = { preventScroll: !0 }, !0;
    }
  } : void 0), !Js) {
    Js = !1;
    for (let n = 0; n < e.length; ) {
      let i = e[n++], r = e[n++], o = e[n++];
      i.scrollTop != r && (i.scrollTop = r), i.scrollLeft != o && (i.scrollLeft = o);
    }
  }
}
let j_;
function El(t, e, n = e) {
  let i = j_ || (j_ = document.createRange());
  return i.setEnd(t, n), i.setStart(t, e), i;
}
function cl(t, e, n) {
  let i = { key: e, code: e, keyCode: n, which: n, cancelable: !0 }, r = new KeyboardEvent("keydown", i);
  r.synthetic = !0, t.dispatchEvent(r);
  let o = new KeyboardEvent("keyup", i);
  return o.synthetic = !0, t.dispatchEvent(o), r.defaultPrevented || o.defaultPrevented;
}
function iz(t) {
  for (; t; ) {
    if (t && (t.nodeType == 9 || t.nodeType == 11 && t.host))
      return t;
    t = t.assignedSlot || t.parentNode;
  }
  return null;
}
function iS(t) {
  for (; t.attributes.length; )
    t.removeAttributeNode(t.attributes[0]);
}
function rz(t, e) {
  let n = e.focusNode, i = e.focusOffset;
  if (!n || e.anchorNode != n || e.anchorOffset != i)
    return !1;
  for (; ; )
    if (i) {
      if (n.nodeType != 1)
        return !1;
      let r = n.childNodes[i - 1];
      r.contentEditable == "false" ? i-- : (n = r, i = qa(n));
    } else {
      if (n == t)
        return !0;
      i = hu(n), n = n.parentNode;
    }
}
class fi {
  constructor(e, n, i = !0) {
    this.node = e, this.offset = n, this.precise = i;
  }
  static before(e, n) {
    return new fi(e.parentNode, hu(e), n);
  }
  static after(e, n) {
    return new fi(e.parentNode, hu(e) + 1, n);
  }
}
const vg = [];
class on {
  constructor() {
    this.parent = null, this.dom = null, this.dirty = 2;
  }
  get editorView() {
    if (!this.parent)
      throw new Error("Accessing view in orphan content view");
    return this.parent.editorView;
  }
  get overrideDOMText() {
    return null;
  }
  get posAtStart() {
    return this.parent ? this.parent.posBefore(this) : 0;
  }
  get posAtEnd() {
    return this.posAtStart + this.length;
  }
  posBefore(e) {
    let n = this.posAtStart;
    for (let i of this.children) {
      if (i == e)
        return n;
      n += i.length + i.breakAfter;
    }
    throw new RangeError("Invalid child in posBefore");
  }
  posAfter(e) {
    return this.posBefore(e) + e.length;
  }
  coordsAt(e, n) {
    return null;
  }
  sync(e) {
    if (this.dirty & 2) {
      let n = this.dom, i = null, r;
      for (let o of this.children) {
        if (o.dirty) {
          if (!o.dom && (r = i ? i.nextSibling : n.firstChild)) {
            let s = on.get(r);
            (!s || !s.parent && s.canReuseDOM(o)) && o.reuseDOM(r);
          }
          o.sync(e), o.dirty = 0;
        }
        if (r = i ? i.nextSibling : n.firstChild, e && !e.written && e.node == n && r != o.dom && (e.written = !0), o.dom.parentNode == n)
          for (; r && r != o.dom; )
            r = B_(r);
        else
          n.insertBefore(o.dom, r);
        i = o.dom;
      }
      for (r = i ? i.nextSibling : n.firstChild, r && e && e.node == n && (e.written = !0); r; )
        r = B_(r);
    } else if (this.dirty & 1)
      for (let n of this.children)
        n.dirty && (n.sync(e), n.dirty = 0);
  }
  reuseDOM(e) {
  }
  localPosFromDOM(e, n) {
    let i;
    if (e == this.dom)
      i = this.dom.childNodes[n];
    else {
      let r = qa(e) == 0 ? 0 : n == 0 ? -1 : 1;
      for (; ; ) {
        let o = e.parentNode;
        if (o == this.dom)
          break;
        r == 0 && o.firstChild != o.lastChild && (e == o.firstChild ? r = -1 : r = 1), e = o;
      }
      r < 0 ? i = e : i = e.nextSibling;
    }
    if (i == this.dom.firstChild)
      return 0;
    for (; i && !on.get(i); )
      i = i.nextSibling;
    if (!i)
      return this.length;
    for (let r = 0, o = 0; ; r++) {
      let s = this.children[r];
      if (s.dom == i)
        return o;
      o += s.length + s.breakAfter;
    }
  }
  domBoundsAround(e, n, i = 0) {
    let r = -1, o = -1, s = -1, l = -1;
    for (let a = 0, f = i, c = i; a < this.children.length; a++) {
      let u = this.children[a], h = f + u.length;
      if (f < e && h > n)
        return u.domBoundsAround(e, n, f);
      if (h >= e && r == -1 && (r = a, o = f), f > n && u.dom.parentNode == this.dom) {
        s = a, l = c;
        break;
      }
      c = h, f = h + u.breakAfter;
    }
    return {
      from: o,
      to: l < 0 ? i + this.length : l,
      startDOM: (r ? this.children[r - 1].dom.nextSibling : null) || this.dom.firstChild,
      endDOM: s < this.children.length && s >= 0 ? this.children[s].dom : null
    };
  }
  markDirty(e = !1) {
    this.dirty |= 2, this.markParentsDirty(e);
  }
  markParentsDirty(e) {
    for (let n = this.parent; n; n = n.parent) {
      if (e && (n.dirty |= 2), n.dirty & 1)
        return;
      n.dirty |= 1, e = !1;
    }
  }
  setParent(e) {
    this.parent != e && (this.parent = e, this.dirty && this.markParentsDirty(!0));
  }
  setDOM(e) {
    this.dom && (this.dom.cmView = null), this.dom = e, e.cmView = this;
  }
  get rootView() {
    for (let e = this; ; ) {
      let n = e.parent;
      if (!n)
        return e;
      e = n;
    }
  }
  replaceChildren(e, n, i = vg) {
    this.markDirty();
    for (let r = e; r < n; r++) {
      let o = this.children[r];
      o.parent == this && o.destroy();
    }
    this.children.splice(e, n - e, ...i);
    for (let r = 0; r < i.length; r++)
      i[r].setParent(this);
  }
  ignoreMutation(e) {
    return !1;
  }
  ignoreEvent(e) {
    return !1;
  }
  childCursor(e = this.length) {
    return new rS(this.children, e, this.children.length);
  }
  childPos(e, n = 1) {
    return this.childCursor().findPos(e, n);
  }
  toString() {
    let e = this.constructor.name.replace("View", "");
    return e + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + (e == "Text" ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");
  }
  static get(e) {
    return e.cmView;
  }
  get isEditable() {
    return !0;
  }
  merge(e, n, i, r, o, s) {
    return !1;
  }
  become(e) {
    return !1;
  }
  canReuseDOM(e) {
    return e.constructor == this.constructor;
  }
  getSide() {
    return 0;
  }
  destroy() {
    this.parent = null;
  }
}
on.prototype.breakAfter = 0;
function B_(t) {
  let e = t.nextSibling;
  return t.parentNode.removeChild(t), e;
}
class rS {
  constructor(e, n, i) {
    this.children = e, this.pos = n, this.i = i, this.off = 0;
  }
  findPos(e, n = 1) {
    for (; ; ) {
      if (e > this.pos || e == this.pos && (n > 0 || this.i == 0 || this.children[this.i - 1].breakAfter))
        return this.off = e - this.pos, this;
      let i = this.children[--this.i];
      this.pos -= i.length + i.breakAfter;
    }
  }
}
function oS(t, e, n, i, r, o, s, l, a) {
  let { children: f } = t, c = f.length ? f[e] : null, u = o.length ? o[o.length - 1] : null, h = u ? u.breakAfter : s;
  if (!(e == i && c && !s && !h && o.length < 2 && c.merge(n, r, o.length ? u : null, n == 0, l, a))) {
    if (i < f.length) {
      let d = f[i];
      d && r < d.length ? (e == i && (d = d.split(r), r = 0), !h && u && d.merge(0, r, u, !0, 0, a) ? o[o.length - 1] = d : (r && d.merge(0, r, null, !1, 0, a), o.push(d))) : d != null && d.breakAfter && (u ? u.breakAfter = 1 : s = 1), i++;
    }
    for (c && (c.breakAfter = s, n > 0 && (!s && o.length && c.merge(n, c.length, o[0], !1, l, 0) ? c.breakAfter = o.shift().breakAfter : (n < c.length || c.children.length && c.children[c.children.length - 1].length == 0) && c.merge(n, c.length, null, !1, l, 0), e++)); e < i && o.length; )
      if (f[i - 1].become(o[o.length - 1]))
        i--, o.pop(), a = o.length ? 0 : l;
      else if (f[e].become(o[0]))
        e++, o.shift(), l = o.length ? 0 : a;
      else
        break;
    !o.length && e && i < f.length && !f[e - 1].breakAfter && f[i].merge(0, 0, f[e - 1], !1, l, a) && e--, (e < i || o.length) && t.replaceChildren(e, i, o);
  }
}
function sS(t, e, n, i, r, o) {
  let s = t.childCursor(), { i: l, off: a } = s.findPos(n, 1), { i: f, off: c } = s.findPos(e, -1), u = e - n;
  for (let h of i)
    u += h.length;
  t.length += u, oS(t, f, c, l, a, i, 0, r, o);
}
let Bi = typeof navigator < "u" ? navigator : { userAgent: "", vendor: "", platform: "" }, xm = typeof document < "u" ? document : { documentElement: { style: {} } };
const zm = /* @__PURE__ */ /Edge\/(\d+)/.exec(Bi.userAgent), lS = /* @__PURE__ */ /MSIE \d/.test(Bi.userAgent), Vm = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bi.userAgent), Mh = !!(lS || Vm || zm), L_ = !Mh && /* @__PURE__ */ /gecko\/(\d+)/i.test(Bi.userAgent), _d = !Mh && /* @__PURE__ */ /Chrome\/(\d+)/.exec(Bi.userAgent), x_ = "webkitFontSmoothing" in xm.documentElement.style, aS = !Mh && /* @__PURE__ */ /Apple Computer/.test(Bi.vendor), z_ = aS && (/* @__PURE__ */ /Mobile\/\w+/.test(Bi.userAgent) || Bi.maxTouchPoints > 2);
var Qe = {
  mac: z_ || /* @__PURE__ */ /Mac/.test(Bi.platform),
  windows: /* @__PURE__ */ /Win/.test(Bi.platform),
  linux: /* @__PURE__ */ /Linux|X11/.test(Bi.platform),
  ie: Mh,
  ie_version: lS ? xm.documentMode || 6 : Vm ? +Vm[1] : zm ? +zm[1] : 0,
  gecko: L_,
  gecko_version: L_ ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec(Bi.userAgent) || [0, 0])[1] : 0,
  chrome: !!_d,
  chrome_version: _d ? +_d[1] : 0,
  ios: z_,
  android: /* @__PURE__ */ /Android\b/.test(Bi.userAgent),
  webkit: x_,
  safari: aS,
  webkit_version: x_ ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,
  tabSize: xm.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
};
const oz = 256;
class Yo extends on {
  constructor(e) {
    super(), this.text = e;
  }
  get length() {
    return this.text.length;
  }
  createDOM(e) {
    this.setDOM(e || document.createTextNode(this.text));
  }
  sync(e) {
    this.dom || this.createDOM(), this.dom.nodeValue != this.text && (e && e.node == this.dom && (e.written = !0), this.dom.nodeValue = this.text);
  }
  reuseDOM(e) {
    e.nodeType == 3 && this.createDOM(e);
  }
  merge(e, n, i) {
    return i && (!(i instanceof Yo) || this.length - (n - e) + i.length > oz) ? !1 : (this.text = this.text.slice(0, e) + (i ? i.text : "") + this.text.slice(n), this.markDirty(), !0);
  }
  split(e) {
    let n = new Yo(this.text.slice(e));
    return this.text = this.text.slice(0, e), this.markDirty(), n;
  }
  localPosFromDOM(e, n) {
    return e == this.dom ? n : n ? this.text.length : 0;
  }
  domAtPos(e) {
    return new fi(this.dom, e);
  }
  domBoundsAround(e, n, i) {
    return { from: i, to: i + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };
  }
  coordsAt(e, n) {
    return Fm(this.dom, e, n);
  }
}
class Qr extends on {
  constructor(e, n = [], i = 0) {
    super(), this.mark = e, this.children = n, this.length = i;
    for (let r of n)
      r.setParent(this);
  }
  setAttrs(e) {
    if (iS(e), this.mark.class && (e.className = this.mark.class), this.mark.attrs)
      for (let n in this.mark.attrs)
        e.setAttribute(n, this.mark.attrs[n]);
    return e;
  }
  reuseDOM(e) {
    e.nodeName == this.mark.tagName.toUpperCase() && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    this.dom ? this.dirty & 4 && this.setAttrs(this.dom) : this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))), super.sync(e);
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof Qr && i.mark.eq(this.mark)) || e && o <= 0 || n < this.length && s <= 0) ? !1 : (sS(this, e, n, i ? i.children : [], o - 1, s - 1), this.markDirty(), !0);
  }
  split(e) {
    let n = [], i = 0, r = -1, o = 0;
    for (let l of this.children) {
      let a = i + l.length;
      a > e && n.push(i < e ? l.split(e - i) : l), r < 0 && i >= e && (r = o), i = a, o++;
    }
    let s = this.length - e;
    return this.length = e, r > -1 && (this.children.length = r, this.markDirty()), new Qr(this.mark, n, s);
  }
  domAtPos(e) {
    return uS(this, e);
  }
  coordsAt(e, n) {
    return dS(this, e, n);
  }
}
function Fm(t, e, n) {
  let i = t.nodeValue.length;
  e > i && (e = i);
  let r = e, o = e, s = 0;
  e == 0 && n < 0 || e == i && n >= 0 ? Qe.chrome || Qe.gecko || (e ? (r--, s = 1) : o < i && (o++, s = -1)) : n < 0 ? r-- : o < i && o++;
  let l = El(t, r, o).getClientRects();
  if (!l.length)
    return tS;
  let a = l[(s ? s < 0 : n >= 0) ? 0 : l.length - 1];
  return Qe.safari && !s && a.width == 0 && (a = Array.prototype.find.call(l, (f) => f.width) || a), s ? wg(a, s < 0) : a || null;
}
class No extends on {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.side = i, this.prevWidget = null;
  }
  static create(e, n, i) {
    return new (e.customView || No)(e, n, i);
  }
  split(e) {
    let n = No.create(this.widget, this.length - e, this.side);
    return this.length -= e, n;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  getSide() {
    return this.side;
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof No) || !this.widget.compare(i.widget) || e > 0 && o <= 0 || n < this.length && s <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  become(e) {
    return e.length == this.length && e instanceof No && e.side == this.side && this.widget.constructor == e.widget.constructor ? (this.widget.eq(e.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  get overrideDOMText() {
    if (this.length == 0)
      return Bt.empty;
    let e = this;
    for (; e.parent; )
      e = e.parent;
    let n = e.editorView, i = n && n.state.doc, r = this.posAtStart;
    return i ? i.slice(r, r + this.length) : Bt.empty;
  }
  domAtPos(e) {
    return e == 0 ? fi.before(this.dom) : fi.after(this.dom, e == this.length);
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e, n) {
    let i = this.dom.getClientRects(), r = null;
    if (!i.length)
      return tS;
    for (let o = e > 0 ? i.length - 1 : 0; r = i[o], !(e > 0 ? o == 0 : o == i.length - 1 || r.top < r.bottom); o += e > 0 ? -1 : 1)
      ;
    return this.length ? r : wg(r, this.side > 0);
  }
  get isEditable() {
    return !1;
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class fS extends No {
  domAtPos(e) {
    let { topView: n, text: i } = this.widget;
    return n ? Hm(e, 0, n, i, (r, o) => r.domAtPos(o), (r) => new fi(i, Math.min(r, i.nodeValue.length))) : new fi(i, Math.min(e, i.nodeValue.length));
  }
  sync() {
    this.setDOM(this.widget.toDOM());
  }
  localPosFromDOM(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? cS(e, n, i, r) : Math.min(n, this.length);
  }
  ignoreMutation() {
    return !1;
  }
  get overrideDOMText() {
    return null;
  }
  coordsAt(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? Hm(e, n, i, r, (o, s, l) => o.coordsAt(s, l), (o, s) => Fm(r, o, s)) : Fm(r, e, n);
  }
  destroy() {
    var e;
    super.destroy(), (e = this.widget.topView) === null || e === void 0 || e.destroy();
  }
  get isEditable() {
    return !0;
  }
  canReuseDOM() {
    return !0;
  }
}
function Hm(t, e, n, i, r, o) {
  if (n instanceof Qr) {
    for (let s = n.dom.firstChild; s; s = s.nextSibling) {
      let l = on.get(s);
      if (!l)
        return o(t, e);
      let a = Tl(s, i), f = l.length + (a ? i.nodeValue.length : 0);
      if (t < f || t == f && l.getSide() <= 0)
        return a ? Hm(t, e, l, i, r, o) : r(l, t, e);
      t -= f;
    }
    return r(n, n.length, -1);
  } else
    return n.dom == i ? o(t, e) : r(n, t, e);
}
function cS(t, e, n, i) {
  if (n instanceof Qr)
    for (let r of n.children) {
      let o = 0, s = Tl(r.dom, i);
      if (Tl(r.dom, t))
        return o + (s ? cS(t, e, r, i) : r.localPosFromDOM(t, e));
      o += s ? i.nodeValue.length : r.length;
    }
  else if (n.dom == i)
    return Math.min(e, i.nodeValue.length);
  return n.localPosFromDOM(t, e);
}
class Pl extends on {
  constructor(e) {
    super(), this.side = e;
  }
  get length() {
    return 0;
  }
  merge() {
    return !1;
  }
  become(e) {
    return e instanceof Pl && e.side == this.side;
  }
  split() {
    return new Pl(this.side);
  }
  sync() {
    if (!this.dom) {
      let e = document.createElement("img");
      e.className = "cm-widgetBuffer", e.setAttribute("aria-hidden", "true"), this.setDOM(e);
    }
  }
  getSide() {
    return this.side;
  }
  domAtPos(e) {
    return fi.before(this.dom);
  }
  localPosFromDOM() {
    return 0;
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e) {
    let n = this.dom.getBoundingClientRect(), i = sz(this, this.side > 0 ? -1 : 1);
    return i && i.top < n.bottom && i.bottom > n.top ? { left: n.left, right: n.right, top: i.top, bottom: i.bottom } : n;
  }
  get overrideDOMText() {
    return Bt.empty;
  }
}
Yo.prototype.children = No.prototype.children = Pl.prototype.children = vg;
function sz(t, e) {
  let n = t.parent, i = n ? n.children.indexOf(t) : -1;
  for (; n && i >= 0; )
    if (e < 0 ? i > 0 : i < n.children.length) {
      let r = n.children[i + e];
      if (r instanceof Yo) {
        let o = r.coordsAt(e < 0 ? r.length : 0, e);
        if (o)
          return o;
      }
      i += e;
    } else if (n instanceof Qr && n.parent)
      i = n.parent.children.indexOf(n) + (e < 0 ? 0 : 1), n = n.parent;
    else {
      let r = n.dom.lastChild;
      if (r && r.nodeName == "BR")
        return r.getClientRects()[0];
      break;
    }
}
function uS(t, e) {
  let n = t.dom, { children: i } = t, r = 0;
  for (let o = 0; r < i.length; r++) {
    let s = i[r], l = o + s.length;
    if (!(l == o && s.getSide() <= 0)) {
      if (e > o && e < l && s.dom.parentNode == n)
        return s.domAtPos(e - o);
      if (e <= o)
        break;
      o = l;
    }
  }
  for (let o = r; o > 0; o--) {
    let s = i[o - 1];
    if (s.dom.parentNode == n)
      return s.domAtPos(s.length);
  }
  for (let o = r; o < i.length; o++) {
    let s = i[o];
    if (s.dom.parentNode == n)
      return s.domAtPos(0);
  }
  return new fi(n, 0);
}
function hS(t, e, n) {
  let i, { children: r } = t;
  n > 0 && e instanceof Qr && r.length && (i = r[r.length - 1]) instanceof Qr && i.mark.eq(e.mark) ? hS(i, e.children[0], n - 1) : (r.push(e), e.setParent(t)), t.length += e.length;
}
function dS(t, e, n) {
  let i = null, r = -1, o = null, s = -1;
  function l(f, c) {
    for (let u = 0, h = 0; u < f.children.length && h <= c; u++) {
      let d = f.children[u], m = h + d.length;
      m >= c && (d.children.length ? l(d, c - h) : !o && (m > c || h == m && d.getSide() > 0) ? (o = d, s = c - h) : (h < c || h == m && d.getSide() < 0) && (i = d, r = c - h)), h = m;
    }
  }
  l(t, e);
  let a = (n < 0 ? i : o) || i || o;
  return a ? a.coordsAt(Math.max(0, a == i ? r : s), n) : lz(t);
}
function lz(t) {
  let e = t.dom.lastChild;
  if (!e)
    return t.dom.getBoundingClientRect();
  let n = Ua(e);
  return n[n.length - 1] || null;
}
function Wm(t, e) {
  for (let n in t)
    n == "class" && e.class ? e.class += " " + t.class : n == "style" && e.style ? e.style += ";" + t.style : e[n] = t[n];
  return e;
}
function kg(t, e) {
  if (t == e)
    return !0;
  if (!t || !e)
    return !1;
  let n = Object.keys(t), i = Object.keys(e);
  if (n.length != i.length)
    return !1;
  for (let r of n)
    if (i.indexOf(r) == -1 || t[r] !== e[r])
      return !1;
  return !0;
}
function Um(t, e, n) {
  let i = null;
  if (e)
    for (let r in e)
      n && r in n || t.removeAttribute(i = r);
  if (n)
    for (let r in n)
      e && e[r] == n[r] || t.setAttribute(i = r, n[r]);
  return !!i;
}
class rs {
  eq(e) {
    return !1;
  }
  updateDOM(e) {
    return !1;
  }
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  get estimatedHeight() {
    return -1;
  }
  ignoreEvent(e) {
    return !0;
  }
  get customView() {
    return null;
  }
  destroy(e) {
  }
}
var Yt = /* @__PURE__ */ function(t) {
  return t[t.Text = 0] = "Text", t[t.WidgetBefore = 1] = "WidgetBefore", t[t.WidgetAfter = 2] = "WidgetAfter", t[t.WidgetRange = 3] = "WidgetRange", t;
}(Yt || (Yt = {}));
class ot extends Ns {
  constructor(e, n, i, r) {
    super(), this.startSide = e, this.endSide = n, this.widget = i, this.spec = r;
  }
  get heightRelevant() {
    return !1;
  }
  static mark(e) {
    return new Ah(e);
  }
  static widget(e) {
    let n = e.side || 0, i = !!e.block;
    return n += i ? n > 0 ? 3e8 : -4e8 : n > 0 ? 1e8 : -1e8, new Ds(e, n, n, i, e.widget || null, !1);
  }
  static replace(e) {
    let n = !!e.block, i, r;
    if (e.isBlockGap)
      i = -5e8, r = 4e8;
    else {
      let { start: o, end: s } = mS(e, n);
      i = (o ? n ? -3e8 : -1 : 5e8) - 1, r = (s ? n ? 2e8 : 1 : -6e8) + 1;
    }
    return new Ds(e, i, r, n, e.widget || null, !0);
  }
  static line(e) {
    return new bf(e);
  }
  static set(e, n = !1) {
    return Lt.of(e, n);
  }
  hasHeight() {
    return this.widget ? this.widget.estimatedHeight > -1 : !1;
  }
}
ot.none = Lt.empty;
class Ah extends ot {
  constructor(e) {
    let { start: n, end: i } = mS(e);
    super(n ? -1 : 5e8, i ? 1 : -6e8, null, e), this.tagName = e.tagName || "span", this.class = e.class || "", this.attrs = e.attributes || null;
  }
  eq(e) {
    return this == e || e instanceof Ah && this.tagName == e.tagName && this.class == e.class && kg(this.attrs, e.attrs);
  }
  range(e, n = e) {
    if (e >= n)
      throw new RangeError("Mark decorations may not be empty");
    return super.range(e, n);
  }
}
Ah.prototype.point = !1;
class bf extends ot {
  constructor(e) {
    super(-2e8, -2e8, null, e);
  }
  eq(e) {
    return e instanceof bf && kg(this.spec.attributes, e.spec.attributes);
  }
  range(e, n = e) {
    if (n != e)
      throw new RangeError("Line decoration ranges must be zero-length");
    return super.range(e, n);
  }
}
bf.prototype.mapMode = di.TrackBefore;
bf.prototype.point = !0;
class Ds extends ot {
  constructor(e, n, i, r, o, s) {
    super(n, i, o, e), this.block = r, this.isReplace = s, this.mapMode = r ? n <= 0 ? di.TrackBefore : di.TrackAfter : di.TrackDel;
  }
  get type() {
    return this.startSide < this.endSide ? Yt.WidgetRange : this.startSide <= 0 ? Yt.WidgetBefore : Yt.WidgetAfter;
  }
  get heightRelevant() {
    return this.block || !!this.widget && this.widget.estimatedHeight >= 5;
  }
  eq(e) {
    return e instanceof Ds && az(this.widget, e.widget) && this.block == e.block && this.startSide == e.startSide && this.endSide == e.endSide;
  }
  range(e, n = e) {
    if (this.isReplace && (e > n || e == n && this.startSide > 0 && this.endSide <= 0))
      throw new RangeError("Invalid range for replacement decoration");
    if (!this.isReplace && n != e)
      throw new RangeError("Widget decorations can only have zero-length ranges");
    return super.range(e, n);
  }
}
Ds.prototype.point = !0;
function mS(t, e = !1) {
  let { inclusiveStart: n, inclusiveEnd: i } = t;
  return n == null && (n = t.inclusive), i == null && (i = t.inclusive), { start: n ?? e, end: i ?? e };
}
function az(t, e) {
  return t == e || !!(t && e && t.compare(e));
}
function qm(t, e, n, i = 0) {
  let r = n.length - 1;
  r >= 0 && n[r] + i >= t ? n[r] = Math.max(n[r], e) : n.push(t, e);
}
class gi extends on {
  constructor() {
    super(...arguments), this.children = [], this.length = 0, this.prevAttrs = void 0, this.attrs = null, this.breakAfter = 0;
  }
  merge(e, n, i, r, o, s) {
    if (i) {
      if (!(i instanceof gi))
        return !1;
      this.dom || i.transferDOM(this);
    }
    return r && this.setDeco(i ? i.attrs : null), sS(this, e, n, i ? i.children : [], o, s), !0;
  }
  split(e) {
    let n = new gi();
    if (n.breakAfter = this.breakAfter, this.length == 0)
      return n;
    let { i, off: r } = this.childPos(e);
    r && (n.append(this.children[i].split(r), 0), this.children[i].merge(r, this.children[i].length, null, !1, 0, 0), i++);
    for (let o = i; o < this.children.length; o++)
      n.append(this.children[o], 0);
    for (; i > 0 && this.children[i - 1].length == 0; )
      this.children[--i].destroy();
    return this.children.length = i, this.markDirty(), this.length = e, n;
  }
  transferDOM(e) {
    this.dom && (this.markDirty(), e.setDOM(this.dom), e.prevAttrs = this.prevAttrs === void 0 ? this.attrs : this.prevAttrs, this.prevAttrs = void 0, this.dom = null);
  }
  setDeco(e) {
    kg(this.attrs, e) || (this.dom && (this.prevAttrs = this.attrs, this.markDirty()), this.attrs = e);
  }
  append(e, n) {
    hS(this, e, n);
  }
  addLineDeco(e) {
    let n = e.spec.attributes, i = e.spec.class;
    n && (this.attrs = Wm(n, this.attrs || {})), i && (this.attrs = Wm({ class: i }, this.attrs || {}));
  }
  domAtPos(e) {
    return uS(this, e);
  }
  reuseDOM(e) {
    e.nodeName == "DIV" && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    var n;
    this.dom ? this.dirty & 4 && (iS(this.dom), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0) : (this.setDOM(document.createElement("div")), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0), this.prevAttrs !== void 0 && (Um(this.dom, this.prevAttrs, this.attrs), this.dom.classList.add("cm-line"), this.prevAttrs = void 0), super.sync(e);
    let i = this.dom.lastChild;
    for (; i && on.get(i) instanceof Qr; )
      i = i.lastChild;
    if (!i || !this.length || i.nodeName != "BR" && ((n = on.get(i)) === null || n === void 0 ? void 0 : n.isEditable) == !1 && (!Qe.ios || !this.children.some((r) => r instanceof Yo))) {
      let r = document.createElement("BR");
      r.cmIgnore = !0, this.dom.appendChild(r);
    }
  }
  measureTextSize() {
    if (this.children.length == 0 || this.length > 20)
      return null;
    let e = 0;
    for (let n of this.children) {
      if (!(n instanceof Yo) || /[^ -~]/.test(n.text))
        return null;
      let i = Ua(n.dom);
      if (i.length != 1)
        return null;
      e += i[0].width;
    }
    return e ? {
      lineHeight: this.dom.getBoundingClientRect().height,
      charWidth: e / this.length
    } : null;
  }
  coordsAt(e, n) {
    return dS(this, e, n);
  }
  become(e) {
    return !1;
  }
  get type() {
    return Yt.Text;
  }
  static find(e, n) {
    for (let i = 0, r = 0; i < e.children.length; i++) {
      let o = e.children[i], s = r + o.length;
      if (s >= n) {
        if (o instanceof gi)
          return o;
        if (s > n)
          break;
      }
      r = s + o.breakAfter;
    }
    return null;
  }
}
class Ss extends on {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.type = i, this.breakAfter = 0, this.prevWidget = null;
  }
  merge(e, n, i, r, o, s) {
    return i && (!(i instanceof Ss) || !this.widget.compare(i.widget) || e > 0 && o <= 0 || n < this.length && s <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  domAtPos(e) {
    return e == 0 ? fi.before(this.dom) : fi.after(this.dom, e == this.length);
  }
  split(e) {
    let n = this.length - e;
    this.length = e;
    let i = new Ss(this.widget, n, this.type);
    return i.breakAfter = this.breakAfter, i;
  }
  get children() {
    return vg;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  get overrideDOMText() {
    return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : Bt.empty;
  }
  domBoundsAround() {
    return null;
  }
  become(e) {
    return e instanceof Ss && e.type == this.type && e.widget.constructor == this.widget.constructor ? (e.widget.eq(this.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, this.length = e.length, this.breakAfter = e.breakAfter, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class Cg {
  constructor(e, n, i, r) {
    this.doc = e, this.pos = n, this.end = i, this.disallowBlockEffectsFor = r, this.content = [], this.curLine = null, this.breakAtStart = 0, this.pendingBuffer = 0, this.bufferMarks = [], this.atCursorPos = !0, this.openStart = -1, this.openEnd = -1, this.text = "", this.textOff = 0, this.cursor = e.iter(), this.skip = n;
  }
  posCovered() {
    if (this.content.length == 0)
      return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;
    let e = this.content[this.content.length - 1];
    return !e.breakAfter && !(e instanceof Ss && e.type == Yt.WidgetBefore);
  }
  getLine() {
    return this.curLine || (this.content.push(this.curLine = new gi()), this.atCursorPos = !0), this.curLine;
  }
  flushBuffer(e = this.bufferMarks) {
    this.pendingBuffer && (this.curLine.append(Jf(new Pl(-1), e), e.length), this.pendingBuffer = 0);
  }
  addBlockWidget(e) {
    this.flushBuffer(), this.curLine = null, this.content.push(e);
  }
  finish(e) {
    this.pendingBuffer && e <= this.bufferMarks.length ? this.flushBuffer() : this.pendingBuffer = 0, this.posCovered() || this.getLine();
  }
  buildText(e, n, i) {
    for (; e > 0; ) {
      if (this.textOff == this.text.length) {
        let { value: o, lineBreak: s, done: l } = this.cursor.next(this.skip);
        if (this.skip = 0, l)
          throw new Error("Ran out of text content when drawing inline views");
        if (s) {
          this.posCovered() || this.getLine(), this.content.length ? this.content[this.content.length - 1].breakAfter = 1 : this.breakAtStart = 1, this.flushBuffer(), this.curLine = null, this.atCursorPos = !0, e--;
          continue;
        } else
          this.text = o, this.textOff = 0;
      }
      let r = Math.min(this.text.length - this.textOff, e, 512);
      this.flushBuffer(n.slice(n.length - i)), this.getLine().append(Jf(new Yo(this.text.slice(this.textOff, this.textOff + r)), n), i), this.atCursorPos = !0, this.textOff += r, e -= r, i = 0;
    }
  }
  span(e, n, i, r) {
    this.buildText(n - e, i, r), this.pos = n, this.openStart < 0 && (this.openStart = r);
  }
  point(e, n, i, r, o, s) {
    if (this.disallowBlockEffectsFor[s] && i instanceof Ds) {
      if (i.block)
        throw new RangeError("Block decorations may not be specified via plugins");
      if (n > this.doc.lineAt(this.pos).to)
        throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
    }
    let l = n - e;
    if (i instanceof Ds)
      if (i.block) {
        let { type: a } = i;
        a == Yt.WidgetAfter && !this.posCovered() && this.getLine(), this.addBlockWidget(new Ss(i.widget || new V_("div"), l, a));
      } else {
        let a = No.create(i.widget || new V_("span"), l, l ? 0 : i.startSide), f = this.atCursorPos && !a.isEditable && o <= r.length && (e < n || i.startSide > 0), c = !a.isEditable && (e < n || o > r.length || i.startSide <= 0), u = this.getLine();
        this.pendingBuffer == 2 && !f && (this.pendingBuffer = 0), this.flushBuffer(r), f && (u.append(Jf(new Pl(1), r), o), o = r.length + Math.max(0, o - r.length)), u.append(Jf(a, r), o), this.atCursorPos = c, this.pendingBuffer = c ? e < n || o > r.length ? 1 : 2 : 0, this.pendingBuffer && (this.bufferMarks = r.slice());
      }
    else
      this.doc.lineAt(this.pos).from == this.pos && this.getLine().addLineDeco(i);
    l && (this.textOff + l <= this.text.length ? this.textOff += l : (this.skip += l - (this.text.length - this.textOff), this.text = "", this.textOff = 0), this.pos = n), this.openStart < 0 && (this.openStart = o);
  }
  static build(e, n, i, r, o) {
    let s = new Cg(e, n, i, o);
    return s.openEnd = Lt.spans(r, n, i, s), s.openStart < 0 && (s.openStart = s.openEnd), s.finish(s.openEnd), s;
  }
}
function Jf(t, e) {
  for (let n of e)
    t = new Qr(n, [t], t.length);
  return t;
}
class V_ extends rs {
  constructor(e) {
    super(), this.tag = e;
  }
  eq(e) {
    return e.tag == this.tag;
  }
  toDOM() {
    return document.createElement(this.tag);
  }
  updateDOM(e) {
    return e.nodeName.toLowerCase() == this.tag;
  }
}
const pS = /* @__PURE__ */ Ge.define(), gS = /* @__PURE__ */ Ge.define(), bS = /* @__PURE__ */ Ge.define(), _S = /* @__PURE__ */ Ge.define(), Jm = /* @__PURE__ */ Ge.define(), yS = /* @__PURE__ */ Ge.define(), wS = /* @__PURE__ */ Ge.define({
  combine: (t) => t.some((e) => e)
}), vS = /* @__PURE__ */ Ge.define({
  combine: (t) => t.some((e) => e)
});
class du {
  constructor(e, n = "nearest", i = "nearest", r = 5, o = 5) {
    this.range = e, this.y = n, this.x = i, this.yMargin = r, this.xMargin = o;
  }
  map(e) {
    return e.empty ? this : new du(this.range.map(e), this.y, this.x, this.yMargin, this.xMargin);
  }
}
const F_ = /* @__PURE__ */ _t.define({ map: (t, e) => t.map(e) });
function xi(t, e, n) {
  let i = t.facet(_S);
  i.length ? i[0](e) : window.onerror ? window.onerror(String(e), n, void 0, void 0, e) : n ? console.error(n + ":", e) : console.error(e);
}
const Oh = /* @__PURE__ */ Ge.define({ combine: (t) => t.length ? t[0] : !0 });
let fz = 0;
const la = /* @__PURE__ */ Ge.define();
class Bn {
  constructor(e, n, i, r) {
    this.id = e, this.create = n, this.domEventHandlers = i, this.extension = r(this);
  }
  static define(e, n) {
    const { eventHandlers: i, provide: r, decorations: o } = n || {};
    return new Bn(fz++, e, i, (s) => {
      let l = [la.of(s)];
      return o && l.push(Ja.of((a) => {
        let f = a.plugin(s);
        return f ? o(f) : ot.none;
      })), r && l.push(r(s)), l;
    });
  }
  static fromClass(e, n) {
    return Bn.define((i) => new e(i), n);
  }
}
class yd {
  constructor(e) {
    this.spec = e, this.mustUpdate = null, this.value = null;
  }
  update(e) {
    if (this.value) {
      if (this.mustUpdate) {
        let n = this.mustUpdate;
        if (this.mustUpdate = null, this.value.update)
          try {
            this.value.update(n);
          } catch (i) {
            if (xi(n.state, i, "CodeMirror plugin crashed"), this.value.destroy)
              try {
                this.value.destroy();
              } catch {
              }
            this.deactivate();
          }
      }
    } else if (this.spec)
      try {
        this.value = this.spec.create(e);
      } catch (n) {
        xi(e.state, n, "CodeMirror plugin crashed"), this.deactivate();
      }
    return this;
  }
  destroy(e) {
    var n;
    if (!((n = this.value) === null || n === void 0) && n.destroy)
      try {
        this.value.destroy();
      } catch (i) {
        xi(e.state, i, "CodeMirror plugin crashed");
      }
  }
  deactivate() {
    this.spec = this.value = null;
  }
}
const kS = /* @__PURE__ */ Ge.define(), Sg = /* @__PURE__ */ Ge.define(), Ja = /* @__PURE__ */ Ge.define(), CS = /* @__PURE__ */ Ge.define(), SS = /* @__PURE__ */ Ge.define(), aa = /* @__PURE__ */ Ge.define();
class Fr {
  constructor(e, n, i, r) {
    this.fromA = e, this.toA = n, this.fromB = i, this.toB = r;
  }
  join(e) {
    return new Fr(Math.min(this.fromA, e.fromA), Math.max(this.toA, e.toA), Math.min(this.fromB, e.fromB), Math.max(this.toB, e.toB));
  }
  addToSet(e) {
    let n = e.length, i = this;
    for (; n > 0; n--) {
      let r = e[n - 1];
      if (!(r.fromA > i.toA)) {
        if (r.toA < i.fromA)
          break;
        i = i.join(r), e.splice(n - 1, 1);
      }
    }
    return e.splice(n, 0, i), e;
  }
  static extendWithRanges(e, n) {
    if (n.length == 0)
      return e;
    let i = [];
    for (let r = 0, o = 0, s = 0, l = 0; ; r++) {
      let a = r == e.length ? null : e[r], f = s - l, c = a ? a.fromB : 1e9;
      for (; o < n.length && n[o] < c; ) {
        let u = n[o], h = n[o + 1], d = Math.max(l, u), m = Math.min(c, h);
        if (d <= m && new Fr(d + f, m + f, d, m).addToSet(i), h > c)
          break;
        o += 2;
      }
      if (!a)
        return i;
      new Fr(a.fromA, a.toA, a.fromB, a.toB).addToSet(i), s = a.toA, l = a.toB;
    }
  }
}
class mu {
  constructor(e, n, i) {
    this.view = e, this.state = n, this.transactions = i, this.flags = 0, this.startState = e.state, this.changes = Hn.empty(this.startState.doc.length);
    for (let s of i)
      this.changes = this.changes.compose(s.changes);
    let r = [];
    this.changes.iterChangedRanges((s, l, a, f) => r.push(new Fr(s, l, a, f))), this.changedRanges = r;
    let o = e.hasFocus;
    o != e.inputState.notifiedFocused && (e.inputState.notifiedFocused = o, this.flags |= 1);
  }
  static create(e, n, i) {
    return new mu(e, n, i);
  }
  get viewportChanged() {
    return (this.flags & 4) > 0;
  }
  get heightChanged() {
    return (this.flags & 2) > 0;
  }
  get geometryChanged() {
    return this.docChanged || (this.flags & 10) > 0;
  }
  get focusChanged() {
    return (this.flags & 1) > 0;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get selectionSet() {
    return this.transactions.some((e) => e.selection);
  }
  get empty() {
    return this.flags == 0 && this.transactions.length == 0;
  }
}
var gn = /* @__PURE__ */ function(t) {
  return t[t.LTR = 0] = "LTR", t[t.RTL = 1] = "RTL", t;
}(gn || (gn = {}));
const Km = gn.LTR, cz = gn.RTL;
function MS(t) {
  let e = [];
  for (let n = 0; n < t.length; n++)
    e.push(1 << +t[n]);
  return e;
}
const uz = /* @__PURE__ */ MS("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"), hz = /* @__PURE__ */ MS("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"), Gm = /* @__PURE__ */ Object.create(null), Ar = [];
for (let t of ["()", "[]", "{}"]) {
  let e = /* @__PURE__ */ t.charCodeAt(0), n = /* @__PURE__ */ t.charCodeAt(1);
  Gm[e] = n, Gm[n] = -e;
}
function dz(t) {
  return t <= 247 ? uz[t] : 1424 <= t && t <= 1524 ? 2 : 1536 <= t && t <= 1785 ? hz[t - 1536] : 1774 <= t && t <= 2220 ? 4 : 8192 <= t && t <= 8203 ? 256 : 64336 <= t && t <= 65023 ? 4 : t == 8204 ? 256 : 1;
}
const mz = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;
class ul {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.level = i;
  }
  get dir() {
    return this.level % 2 ? cz : Km;
  }
  side(e, n) {
    return this.dir == n == e ? this.to : this.from;
  }
  static find(e, n, i, r) {
    let o = -1;
    for (let s = 0; s < e.length; s++) {
      let l = e[s];
      if (l.from <= n && l.to >= n) {
        if (l.level == i)
          return s;
        (o < 0 || (r != 0 ? r < 0 ? l.from < n : l.to > n : e[o].level > l.level)) && (o = s);
      }
    }
    if (o < 0)
      throw new RangeError("Index out of range");
    return o;
  }
}
const mn = [];
function pz(t, e) {
  let n = t.length, i = e == Km ? 1 : 2, r = e == Km ? 2 : 1;
  if (!t || i == 1 && !mz.test(t))
    return AS(n);
  for (let s = 0, l = i, a = i; s < n; s++) {
    let f = dz(t.charCodeAt(s));
    f == 512 ? f = l : f == 8 && a == 4 && (f = 16), mn[s] = f == 4 ? 2 : f, f & 7 && (a = f), l = f;
  }
  for (let s = 0, l = i, a = i; s < n; s++) {
    let f = mn[s];
    if (f == 128)
      s < n - 1 && l == mn[s + 1] && l & 24 ? f = mn[s] = l : mn[s] = 256;
    else if (f == 64) {
      let c = s + 1;
      for (; c < n && mn[c] == 64; )
        c++;
      let u = s && l == 8 || c < n && mn[c] == 8 ? a == 1 ? 1 : 8 : 256;
      for (let h = s; h < c; h++)
        mn[h] = u;
      s = c - 1;
    } else
      f == 8 && a == 1 && (mn[s] = 1);
    l = f, f & 7 && (a = f);
  }
  for (let s = 0, l = 0, a = 0, f, c, u; s < n; s++)
    if (c = Gm[f = t.charCodeAt(s)])
      if (c < 0) {
        for (let h = l - 3; h >= 0; h -= 3)
          if (Ar[h + 1] == -c) {
            let d = Ar[h + 2], m = d & 2 ? i : d & 4 ? d & 1 ? r : i : 0;
            m && (mn[s] = mn[Ar[h]] = m), l = h;
            break;
          }
      } else {
        if (Ar.length == 189)
          break;
        Ar[l++] = s, Ar[l++] = f, Ar[l++] = a;
      }
    else if ((u = mn[s]) == 2 || u == 1) {
      let h = u == i;
      a = h ? 0 : 1;
      for (let d = l - 3; d >= 0; d -= 3) {
        let m = Ar[d + 2];
        if (m & 2)
          break;
        if (h)
          Ar[d + 2] |= 2;
        else {
          if (m & 4)
            break;
          Ar[d + 2] |= 4;
        }
      }
    }
  for (let s = 0; s < n; s++)
    if (mn[s] == 256) {
      let l = s + 1;
      for (; l < n && mn[l] == 256; )
        l++;
      let a = (s ? mn[s - 1] : i) == 1, f = (l < n ? mn[l] : i) == 1, c = a == f ? a ? 1 : 2 : i;
      for (let u = s; u < l; u++)
        mn[u] = c;
      s = l - 1;
    }
  let o = [];
  if (i == 1)
    for (let s = 0; s < n; ) {
      let l = s, a = mn[s++] != 1;
      for (; s < n && a == (mn[s] != 1); )
        s++;
      if (a)
        for (let f = s; f > l; ) {
          let c = f, u = mn[--f] != 2;
          for (; f > l && u == (mn[f - 1] != 2); )
            f--;
          o.push(new ul(f, c, u ? 2 : 1));
        }
      else
        o.push(new ul(l, s, 0));
    }
  else
    for (let s = 0; s < n; ) {
      let l = s, a = mn[s++] == 2;
      for (; s < n && a == (mn[s] == 2); )
        s++;
      o.push(new ul(l, s, a ? 1 : 2));
    }
  return o;
}
function AS(t) {
  return [new ul(0, t, 0)];
}
let OS = "";
function gz(t, e, n, i, r) {
  var o;
  let s = i.head - t.from, l = -1;
  if (s == 0) {
    if (!r || !t.length)
      return null;
    e[0].level != n && (s = e[0].side(!1, n), l = 0);
  } else if (s == t.length) {
    if (r)
      return null;
    let h = e[e.length - 1];
    h.level != n && (s = h.side(!0, n), l = e.length - 1);
  }
  l < 0 && (l = ul.find(e, s, (o = i.bidiLevel) !== null && o !== void 0 ? o : -1, i.assoc));
  let a = e[l];
  s == a.side(r, n) && (a = e[l += r ? 1 : -1], s = a.side(!r, n));
  let f = r == (a.dir == n), c = pi(t.text, s, f);
  if (OS = t.text.slice(Math.min(s, c), Math.max(s, c)), c != a.side(r, n))
    return _e.cursor(c + t.from, f ? -1 : 1, a.level);
  let u = l == (r ? e.length - 1 : 0) ? null : e[l + (r ? 1 : -1)];
  return !u && a.level != n ? _e.cursor(r ? t.to : t.from, r ? -1 : 1, n) : u && u.level < a.level ? _e.cursor(u.side(!r, n) + t.from, r ? 1 : -1, u.level) : _e.cursor(c + t.from, r ? -1 : 1, a.level);
}
const Do = "￿";
class TS {
  constructor(e, n) {
    this.points = e, this.text = "", this.lineSeparator = n.facet(Mt.lineSeparator);
  }
  append(e) {
    this.text += e;
  }
  lineBreak() {
    this.text += Do;
  }
  readRange(e, n) {
    if (!e)
      return this;
    let i = e.parentNode;
    for (let r = e; ; ) {
      this.findPointBefore(i, r), this.readNode(r);
      let o = r.nextSibling;
      if (o == n)
        break;
      let s = on.get(r), l = on.get(o);
      (s && l ? s.breakAfter : (s ? s.breakAfter : H_(r)) || H_(o) && (r.nodeName != "BR" || r.cmIgnore)) && this.lineBreak(), r = o;
    }
    return this.findPointBefore(i, n), this;
  }
  readTextNode(e) {
    let n = e.nodeValue;
    for (let i of this.points)
      i.node == e && (i.pos = this.text.length + Math.min(i.offset, n.length));
    for (let i = 0, r = this.lineSeparator ? null : /\r\n?|\n/g; ; ) {
      let o = -1, s = 1, l;
      if (this.lineSeparator ? (o = n.indexOf(this.lineSeparator, i), s = this.lineSeparator.length) : (l = r.exec(n)) && (o = l.index, s = l[0].length), this.append(n.slice(i, o < 0 ? n.length : o)), o < 0)
        break;
      if (this.lineBreak(), s > 1)
        for (let a of this.points)
          a.node == e && a.pos > this.text.length && (a.pos -= s - 1);
      i = o + s;
    }
  }
  readNode(e) {
    if (e.cmIgnore)
      return;
    let n = on.get(e), i = n && n.overrideDOMText;
    if (i != null) {
      this.findPointInside(e, i.length);
      for (let r = i.iter(); !r.next().done; )
        r.lineBreak ? this.lineBreak() : this.append(r.value);
    } else
      e.nodeType == 3 ? this.readTextNode(e) : e.nodeName == "BR" ? e.nextSibling && this.lineBreak() : e.nodeType == 1 && this.readRange(e.firstChild, null);
  }
  findPointBefore(e, n) {
    for (let i of this.points)
      i.node == e && e.childNodes[i.offset] == n && (i.pos = this.text.length);
  }
  findPointInside(e, n) {
    for (let i of this.points)
      (e.nodeType == 3 ? i.node == e : e.contains(i.node)) && (i.pos = this.text.length + Math.min(n, i.offset));
  }
}
function H_(t) {
  return t.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName);
}
class W_ {
  constructor(e, n) {
    this.node = e, this.offset = n, this.pos = -1;
  }
}
class U_ extends on {
  constructor(e) {
    super(), this.view = e, this.compositionDeco = ot.none, this.decorations = [], this.dynamicDecorationMap = [], this.minWidth = 0, this.minWidthFrom = 0, this.minWidthTo = 0, this.impreciseAnchor = null, this.impreciseHead = null, this.forceSelection = !1, this.lastUpdate = Date.now(), this.setDOM(e.contentDOM), this.children = [new gi()], this.children[0].setParent(this), this.updateDeco(), this.updateInner([new Fr(0, 0, 0, e.state.doc.length)], 0);
  }
  get editorView() {
    return this.view;
  }
  get length() {
    return this.view.state.doc.length;
  }
  update(e) {
    let n = e.changedRanges;
    this.minWidth > 0 && n.length && (n.every(({ fromA: s, toA: l }) => l < this.minWidthFrom || s > this.minWidthTo) ? (this.minWidthFrom = e.changes.mapPos(this.minWidthFrom, 1), this.minWidthTo = e.changes.mapPos(this.minWidthTo, 1)) : this.minWidth = this.minWidthFrom = this.minWidthTo = 0), this.view.inputState.composing < 0 ? this.compositionDeco = ot.none : (e.transactions.length || this.dirty) && (this.compositionDeco = _z(this.view, e.changes)), (Qe.ie || Qe.chrome) && !this.compositionDeco.size && e && e.state.doc.lines != e.startState.doc.lines && (this.forceSelection = !0);
    let i = this.decorations, r = this.updateDeco(), o = kz(i, r, e.changes);
    return n = Fr.extendWithRanges(n, o), this.dirty == 0 && n.length == 0 ? !1 : (this.updateInner(n, e.startState.doc.length), e.transactions.length && (this.lastUpdate = Date.now()), !0);
  }
  updateInner(e, n) {
    this.view.viewState.mustMeasureContent = !0, this.updateChildren(e, n);
    let { observer: i } = this.view;
    i.ignore(() => {
      this.dom.style.height = this.view.viewState.contentHeight + "px", this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
      let o = Qe.chrome || Qe.ios ? { node: i.selectionRange.focusNode, written: !1 } : void 0;
      this.sync(o), this.dirty = 0, o && (o.written || i.selectionRange.focusNode != o.node) && (this.forceSelection = !0), this.dom.style.height = "";
    });
    let r = [];
    if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length)
      for (let o of this.children)
        o instanceof Ss && o.widget instanceof q_ && r.push(o.dom);
    i.updateGaps(r);
  }
  updateChildren(e, n) {
    let i = this.childCursor(n);
    for (let r = e.length - 1; ; r--) {
      let o = r >= 0 ? e[r] : null;
      if (!o)
        break;
      let { fromA: s, toA: l, fromB: a, toB: f } = o, { content: c, breakAtStart: u, openStart: h, openEnd: d } = Cg.build(this.view.state.doc, a, f, this.decorations, this.dynamicDecorationMap), { i: m, off: g } = i.findPos(l, 1), { i: _, off: b } = i.findPos(s, -1);
      oS(this, _, b, m, g, c, u, h, d);
    }
  }
  updateSelection(e = !1, n = !1) {
    if ((e || !this.view.observer.selectionRange.focusNode) && this.view.observer.readSelectionRange(), !(n || this.mayControlSelection()))
      return;
    let i = this.forceSelection;
    this.forceSelection = !1;
    let r = this.view.state.selection.main, o = this.domAtPos(r.anchor), s = r.empty ? o : this.domAtPos(r.head);
    if (Qe.gecko && r.empty && bz(o)) {
      let a = document.createTextNode("");
      this.view.observer.ignore(() => o.node.insertBefore(a, o.node.childNodes[o.offset] || null)), o = s = new fi(a, 0), i = !0;
    }
    let l = this.view.observer.selectionRange;
    (i || !l.focusNode || !uu(o.node, o.offset, l.anchorNode, l.anchorOffset) || !uu(s.node, s.offset, l.focusNode, l.focusOffset)) && (this.view.observer.ignore(() => {
      Qe.android && Qe.chrome && this.dom.contains(l.focusNode) && Cz(l.focusNode, this.dom) && (this.dom.blur(), this.dom.focus({ preventScroll: !0 }));
      let a = cu(this.view.root);
      if (a)
        if (r.empty) {
          if (Qe.gecko) {
            let f = wz(o.node, o.offset);
            if (f && f != 3) {
              let c = PS(o.node, o.offset, f == 1 ? 1 : -1);
              c && (o = new fi(c, f == 1 ? 0 : c.nodeValue.length));
            }
          }
          a.collapse(o.node, o.offset), r.bidiLevel != null && l.cursorBidiLevel != null && (l.cursorBidiLevel = r.bidiLevel);
        } else if (a.extend) {
          a.collapse(o.node, o.offset);
          try {
            a.extend(s.node, s.offset);
          } catch {
          }
        } else {
          let f = document.createRange();
          r.anchor > r.head && ([o, s] = [s, o]), f.setEnd(s.node, s.offset), f.setStart(o.node, o.offset), a.removeAllRanges(), a.addRange(f);
        }
    }), this.view.observer.setSelectionRange(o, s)), this.impreciseAnchor = o.precise ? null : new fi(l.anchorNode, l.anchorOffset), this.impreciseHead = s.precise ? null : new fi(l.focusNode, l.focusOffset);
  }
  enforceCursorAssoc() {
    if (this.compositionDeco.size)
      return;
    let { view: e } = this, n = e.state.selection.main, i = cu(e.root), { anchorNode: r, anchorOffset: o } = e.observer.selectionRange;
    if (!i || !n.empty || !n.assoc || !i.modify)
      return;
    let s = gi.find(this, n.head);
    if (!s)
      return;
    let l = s.posAtStart;
    if (n.head == l || n.head == l + s.length)
      return;
    let a = this.coordsAt(n.head, -1), f = this.coordsAt(n.head, 1);
    if (!a || !f || a.bottom > f.top)
      return;
    let c = this.domAtPos(n.head + n.assoc);
    i.collapse(c.node, c.offset), i.modify("move", n.assoc < 0 ? "forward" : "backward", "lineboundary"), e.observer.readSelectionRange();
    let u = e.observer.selectionRange;
    e.docView.posFromDOM(u.anchorNode, u.anchorOffset) != n.from && i.collapse(r, o);
  }
  mayControlSelection() {
    let e = this.view.root.activeElement;
    return e == this.dom || Mc(this.dom, this.view.observer.selectionRange) && !(e && this.dom.contains(e));
  }
  nearest(e) {
    for (let n = e; n; ) {
      let i = on.get(n);
      if (i && i.rootView == this)
        return i;
      n = n.parentNode;
    }
    return null;
  }
  posFromDOM(e, n) {
    let i = this.nearest(e);
    if (!i)
      throw new RangeError("Trying to find position for a DOM position outside of the document");
    return i.localPosFromDOM(e, n) + i.posAtStart;
  }
  domAtPos(e) {
    let { i: n, off: i } = this.childCursor().findPos(e, -1);
    for (; n < this.children.length - 1; ) {
      let r = this.children[n];
      if (i < r.length || r instanceof gi)
        break;
      n++, i = 0;
    }
    return this.children[n].domAtPos(i);
  }
  coordsAt(e, n) {
    for (let i = this.length, r = this.children.length - 1; ; r--) {
      let o = this.children[r], s = i - o.breakAfter - o.length;
      if (e > s || e == s && o.type != Yt.WidgetBefore && o.type != Yt.WidgetAfter && (!r || n == 2 || this.children[r - 1].breakAfter || this.children[r - 1].type == Yt.WidgetBefore && n > -2))
        return o.coordsAt(e - s, n);
      i = s;
    }
  }
  measureVisibleLineHeights(e) {
    let n = [], { from: i, to: r } = e, o = this.view.contentDOM.clientWidth, s = o > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1, l = -1, a = this.view.textDirection == gn.LTR;
    for (let f = 0, c = 0; c < this.children.length; c++) {
      let u = this.children[c], h = f + u.length;
      if (h > r)
        break;
      if (f >= i) {
        let d = u.dom.getBoundingClientRect();
        if (n.push(d.height), s) {
          let m = u.dom.lastChild, g = m ? Ua(m) : [];
          if (g.length) {
            let _ = g[g.length - 1], b = a ? _.right - d.left : d.right - _.left;
            b > l && (l = b, this.minWidth = o, this.minWidthFrom = f, this.minWidthTo = h);
          }
        }
      }
      f = h + u.breakAfter;
    }
    return n;
  }
  textDirectionAt(e) {
    let { i: n } = this.childPos(e, 1);
    return getComputedStyle(this.children[n].dom).direction == "rtl" ? gn.RTL : gn.LTR;
  }
  measureTextSize() {
    for (let r of this.children)
      if (r instanceof gi) {
        let o = r.measureTextSize();
        if (o)
          return o;
      }
    let e = document.createElement("div"), n, i;
    return e.className = "cm-line", e.style.width = "99999px", e.textContent = "abc def ghi jkl mno pqr stu", this.view.observer.ignore(() => {
      this.dom.appendChild(e);
      let r = Ua(e.firstChild)[0];
      n = e.getBoundingClientRect().height, i = r ? r.width / 27 : 7, e.remove();
    }), { lineHeight: n, charWidth: i };
  }
  childCursor(e = this.length) {
    let n = this.children.length;
    return n && (e -= this.children[--n].length), new rS(this.children, e, n);
  }
  computeBlockGapDeco() {
    let e = [], n = this.view.viewState;
    for (let i = 0, r = 0; ; r++) {
      let o = r == n.viewports.length ? null : n.viewports[r], s = o ? o.from - 1 : this.length;
      if (s > i) {
        let l = n.lineBlockAt(s).bottom - n.lineBlockAt(i).top;
        e.push(ot.replace({
          widget: new q_(l),
          block: !0,
          inclusive: !0,
          isBlockGap: !0
        }).range(i, s));
      }
      if (!o)
        break;
      i = o.to + 1;
    }
    return ot.set(e);
  }
  updateDeco() {
    let e = this.view.state.facet(Ja).map((n, i) => (this.dynamicDecorationMap[i] = typeof n == "function") ? n(this.view) : n);
    for (let n = e.length; n < e.length + 3; n++)
      this.dynamicDecorationMap[n] = !1;
    return this.decorations = [
      ...e,
      this.compositionDeco,
      this.computeBlockGapDeco(),
      this.view.viewState.lineGapDeco
    ];
  }
  scrollIntoView(e) {
    let { range: n } = e, i = this.coordsAt(n.head, n.empty ? n.assoc : n.head > n.anchor ? -1 : 1), r;
    if (!i)
      return;
    !n.empty && (r = this.coordsAt(n.anchor, n.anchor > n.head ? -1 : 1)) && (i = {
      left: Math.min(i.left, r.left),
      top: Math.min(i.top, r.top),
      right: Math.max(i.right, r.right),
      bottom: Math.max(i.bottom, r.bottom)
    });
    let o = 0, s = 0, l = 0, a = 0;
    for (let c of this.view.state.facet(SS).map((u) => u(this.view)))
      if (c) {
        let { left: u, right: h, top: d, bottom: m } = c;
        u != null && (o = Math.max(o, u)), h != null && (s = Math.max(s, h)), d != null && (l = Math.max(l, d)), m != null && (a = Math.max(a, m));
      }
    let f = {
      left: i.left - o,
      top: i.top - l,
      right: i.right + s,
      bottom: i.bottom + a
    };
    ez(this.view.scrollDOM, f, n.head < n.anchor ? -1 : 1, e.x, e.y, e.xMargin, e.yMargin, this.view.textDirection == gn.LTR);
  }
}
function bz(t) {
  return t.node.nodeType == 1 && t.node.firstChild && (t.offset == 0 || t.node.childNodes[t.offset - 1].contentEditable == "false") && (t.offset == t.node.childNodes.length || t.node.childNodes[t.offset].contentEditable == "false");
}
class q_ extends rs {
  constructor(e) {
    super(), this.height = e;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.updateDOM(e), e;
  }
  eq(e) {
    return e.height == this.height;
  }
  updateDOM(e) {
    return e.style.height = this.height + "px", !0;
  }
  get estimatedHeight() {
    return this.height;
  }
}
function ES(t) {
  let e = t.observer.selectionRange, n = e.focusNode && PS(e.focusNode, e.focusOffset, 0);
  if (!n)
    return null;
  let i = t.docView.nearest(n);
  if (!i)
    return null;
  if (i instanceof gi) {
    let r = n;
    for (; r.parentNode != i.dom; )
      r = r.parentNode;
    let o = r.previousSibling;
    for (; o && !on.get(o); )
      o = o.previousSibling;
    let s = o ? on.get(o).posAtEnd : i.posAtStart;
    return { from: s, to: s, node: r, text: n };
  } else {
    for (; ; ) {
      let { parent: o } = i;
      if (!o)
        return null;
      if (o instanceof gi)
        break;
      i = o;
    }
    let r = i.posAtStart;
    return { from: r, to: r + i.length, node: i.dom, text: n };
  }
}
function _z(t, e) {
  let n = ES(t);
  if (!n)
    return ot.none;
  let { from: i, to: r, node: o, text: s } = n, l = e.mapPos(i, 1), a = Math.max(l, e.mapPos(r, -1)), { state: f } = t, c = o.nodeType == 3 ? o.nodeValue : new TS([], f).readRange(o.firstChild, null).text;
  if (a - l < c.length)
    if (f.doc.sliceString(l, Math.min(f.doc.length, l + c.length), Do) == c)
      a = l + c.length;
    else if (f.doc.sliceString(Math.max(0, a - c.length), a, Do) == c)
      l = a - c.length;
    else
      return ot.none;
  else if (f.doc.sliceString(l, a, Do) != c)
    return ot.none;
  let u = on.get(o);
  return u instanceof fS ? u = u.widget.topView : u && (u.parent = null), ot.set(ot.replace({ widget: new yz(o, s, u), inclusive: !0 }).range(l, a));
}
class yz extends rs {
  constructor(e, n, i) {
    super(), this.top = e, this.text = n, this.topView = i;
  }
  eq(e) {
    return this.top == e.top && this.text == e.text;
  }
  toDOM() {
    return this.top;
  }
  ignoreEvent() {
    return !1;
  }
  get customView() {
    return fS;
  }
}
function PS(t, e, n) {
  for (; ; ) {
    if (t.nodeType == 3)
      return t;
    if (t.nodeType == 1 && e > 0 && n <= 0)
      t = t.childNodes[e - 1], e = qa(t);
    else if (t.nodeType == 1 && e < t.childNodes.length && n >= 0)
      t = t.childNodes[e], e = 0;
    else
      return null;
  }
}
function wz(t, e) {
  return t.nodeType != 1 ? 0 : (e && t.childNodes[e - 1].contentEditable == "false" ? 1 : 0) | (e < t.childNodes.length && t.childNodes[e].contentEditable == "false" ? 2 : 0);
}
class vz {
  constructor() {
    this.changes = [];
  }
  compareRange(e, n) {
    qm(e, n, this.changes);
  }
  comparePoint(e, n) {
    qm(e, n, this.changes);
  }
}
function kz(t, e, n) {
  let i = new vz();
  return Lt.compare(t, e, n, i), i.changes;
}
function Cz(t, e) {
  for (let n = t; n && n != e; n = n.assignedSlot || n.parentNode)
    if (n.nodeType == 1 && n.contentEditable == "false")
      return !0;
  return !1;
}
function Sz(t, e, n = 1) {
  let i = t.charCategorizer(e), r = t.doc.lineAt(e), o = e - r.from;
  if (r.length == 0)
    return _e.cursor(e);
  o == 0 ? n = 1 : o == r.length && (n = -1);
  let s = o, l = o;
  n < 0 ? s = pi(r.text, o, !1) : l = pi(r.text, o);
  let a = i(r.text.slice(s, l));
  for (; s > 0; ) {
    let f = pi(r.text, s, !1);
    if (i(r.text.slice(f, s)) != a)
      break;
    s = f;
  }
  for (; l < r.length; ) {
    let f = pi(r.text, l);
    if (i(r.text.slice(l, f)) != a)
      break;
    l = f;
  }
  return _e.range(s + r.from, l + r.from);
}
function Mz(t, e) {
  return e.left > t ? e.left - t : Math.max(0, t - e.right);
}
function Az(t, e) {
  return e.top > t ? e.top - t : Math.max(0, t - e.bottom);
}
function wd(t, e) {
  return t.top < e.bottom - 1 && t.bottom > e.top + 1;
}
function J_(t, e) {
  return e < t.top ? { top: e, left: t.left, right: t.right, bottom: t.bottom } : t;
}
function K_(t, e) {
  return e > t.bottom ? { top: t.top, left: t.left, right: t.right, bottom: e } : t;
}
function Xm(t, e, n) {
  let i, r, o, s, l = !1, a, f, c, u;
  for (let m = t.firstChild; m; m = m.nextSibling) {
    let g = Ua(m);
    for (let _ = 0; _ < g.length; _++) {
      let b = g[_];
      r && wd(r, b) && (b = J_(K_(b, r.bottom), r.top));
      let w = Mz(e, b), v = Az(n, b);
      if (w == 0 && v == 0)
        return m.nodeType == 3 ? G_(m, e, n) : Xm(m, e, n);
      (!i || s > v || s == v && o > w) && (i = m, r = b, o = w, s = v, l = !w || (w > 0 ? _ < g.length - 1 : _ > 0)), w == 0 ? n > b.bottom && (!c || c.bottom < b.bottom) ? (a = m, c = b) : n < b.top && (!u || u.top > b.top) && (f = m, u = b) : c && wd(c, b) ? c = K_(c, b.bottom) : u && wd(u, b) && (u = J_(u, b.top));
    }
  }
  if (c && c.bottom >= n ? (i = a, r = c) : u && u.top <= n && (i = f, r = u), !i)
    return { node: t, offset: 0 };
  let h = Math.max(r.left, Math.min(r.right, e));
  if (i.nodeType == 3)
    return G_(i, h, n);
  if (l && i.contentEditable != "false")
    return Xm(i, h, n);
  let d = Array.prototype.indexOf.call(t.childNodes, i) + (e >= (r.left + r.right) / 2 ? 1 : 0);
  return { node: t, offset: d };
}
function G_(t, e, n) {
  let i = t.nodeValue.length, r = -1, o = 1e9, s = 0;
  for (let l = 0; l < i; l++) {
    let a = El(t, l, l + 1).getClientRects();
    for (let f = 0; f < a.length; f++) {
      let c = a[f];
      if (c.top == c.bottom)
        continue;
      s || (s = e - c.left);
      let u = (c.top > n ? c.top - n : n - c.bottom) - 1;
      if (c.left - 1 <= e && c.right + 1 >= e && u < o) {
        let h = e >= (c.left + c.right) / 2, d = h;
        if ((Qe.chrome || Qe.gecko) && El(t, l).getBoundingClientRect().left == c.right && (d = !h), u <= 0)
          return { node: t, offset: l + (d ? 1 : 0) };
        r = l + (d ? 1 : 0), o = u;
      }
    }
  }
  return { node: t, offset: r > -1 ? r : s > 0 ? t.nodeValue.length : 0 };
}
function RS(t, { x: e, y: n }, i, r = -1) {
  var o;
  let s = t.contentDOM.getBoundingClientRect(), l = s.top + t.viewState.paddingTop, a, { docHeight: f } = t.viewState, c = n - l;
  if (c < 0)
    return 0;
  if (c > f)
    return t.state.doc.length;
  for (let b = t.defaultLineHeight / 2, w = !1; a = t.elementAtHeight(c), a.type != Yt.Text; )
    for (; c = r > 0 ? a.bottom + b : a.top - b, !(c >= 0 && c <= f); ) {
      if (w)
        return i ? null : 0;
      w = !0, r = -r;
    }
  n = l + c;
  let u = a.from;
  if (u < t.viewport.from)
    return t.viewport.from == 0 ? 0 : i ? null : X_(t, s, a, e, n);
  if (u > t.viewport.to)
    return t.viewport.to == t.state.doc.length ? t.state.doc.length : i ? null : X_(t, s, a, e, n);
  let h = t.dom.ownerDocument, d = t.root.elementFromPoint ? t.root : h, m = d.elementFromPoint(e, n);
  m && !t.contentDOM.contains(m) && (m = null), m || (e = Math.max(s.left + 1, Math.min(s.right - 1, e)), m = d.elementFromPoint(e, n), m && !t.contentDOM.contains(m) && (m = null));
  let g, _ = -1;
  if (m && ((o = t.docView.nearest(m)) === null || o === void 0 ? void 0 : o.isEditable) != !1) {
    if (h.caretPositionFromPoint) {
      let b = h.caretPositionFromPoint(e, n);
      b && ({ offsetNode: g, offset: _ } = b);
    } else if (h.caretRangeFromPoint) {
      let b = h.caretRangeFromPoint(e, n);
      b && ({ startContainer: g, startOffset: _ } = b, (!t.contentDOM.contains(g) || Qe.safari && Oz(g, _, e) || Qe.chrome && Tz(g, _, e)) && (g = void 0));
    }
  }
  if (!g || !t.docView.dom.contains(g)) {
    let b = gi.find(t.docView, u);
    if (!b)
      return c > a.top + a.height / 2 ? a.to : a.from;
    ({ node: g, offset: _ } = Xm(b.dom, e, n));
  }
  return t.docView.posFromDOM(g, _);
}
function X_(t, e, n, i, r) {
  let o = Math.round((i - e.left) * t.defaultCharacterWidth);
  if (t.lineWrapping && n.height > t.defaultLineHeight * 1.5) {
    let l = Math.floor((r - n.top) / t.defaultLineHeight);
    o += l * t.viewState.heightOracle.lineLength;
  }
  let s = t.state.sliceDoc(n.from, n.to);
  return n.from + jm(s, o, t.state.tabSize);
}
function Oz(t, e, n) {
  let i;
  if (t.nodeType != 3 || e != (i = t.nodeValue.length))
    return !1;
  for (let r = t.nextSibling; r; r = r.nextSibling)
    if (r.nodeType != 1 || r.nodeName != "BR")
      return !1;
  return El(t, i - 1, i).getBoundingClientRect().left > n;
}
function Tz(t, e, n) {
  if (e != 0)
    return !1;
  for (let r = t; ; ) {
    let o = r.parentNode;
    if (!o || o.nodeType != 1 || o.firstChild != r)
      return !1;
    if (o.classList.contains("cm-line"))
      break;
    r = o;
  }
  let i = t.nodeType == 1 ? t.getBoundingClientRect() : El(t, 0, Math.max(t.nodeValue.length, 1)).getBoundingClientRect();
  return n - i.left > 5;
}
function Ez(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), o = !i || !t.lineWrapping ? null : t.coordsAtPos(e.assoc < 0 && e.head > r.from ? e.head - 1 : e.head);
  if (o) {
    let a = t.dom.getBoundingClientRect(), f = t.textDirectionAt(r.from), c = t.posAtCoords({
      x: n == (f == gn.LTR) ? a.right - 1 : a.left + 1,
      y: (o.top + o.bottom) / 2
    });
    if (c != null)
      return _e.cursor(c, n ? -1 : 1);
  }
  let s = gi.find(t.docView, e.head), l = s ? n ? s.posAtEnd : s.posAtStart : n ? r.to : r.from;
  return _e.cursor(l, n ? -1 : 1);
}
function Q_(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), o = t.bidiSpans(r), s = t.textDirectionAt(r.from);
  for (let l = e, a = null; ; ) {
    let f = gz(r, o, s, l, n), c = OS;
    if (!f) {
      if (r.number == (n ? t.state.doc.lines : 1))
        return l;
      c = `
`, r = t.state.doc.line(r.number + (n ? 1 : -1)), o = t.bidiSpans(r), f = _e.cursor(n ? r.from : r.to);
    }
    if (a) {
      if (!a(c))
        return l;
    } else {
      if (!i)
        return f;
      a = i(c);
    }
    l = f;
  }
}
function Pz(t, e, n) {
  let i = t.state.charCategorizer(e), r = i(n);
  return (o) => {
    let s = i(o);
    return r == un.Space && (r = s), r == s;
  };
}
function Rz(t, e, n, i) {
  let r = e.head, o = n ? 1 : -1;
  if (r == (n ? t.state.doc.length : 0))
    return _e.cursor(r, e.assoc);
  let s = e.goalColumn, l, a = t.contentDOM.getBoundingClientRect(), f = t.coordsAtPos(r), c = t.documentTop;
  if (f)
    s == null && (s = f.left - a.left), l = o < 0 ? f.top : f.bottom;
  else {
    let d = t.viewState.lineBlockAt(r);
    s == null && (s = Math.min(a.right - a.left, t.defaultCharacterWidth * (r - d.from))), l = (o < 0 ? d.top : d.bottom) + c;
  }
  let u = a.left + s, h = i ?? t.defaultLineHeight >> 1;
  for (let d = 0; ; d += 10) {
    let m = l + (h + d) * o, g = RS(t, { x: u, y: m }, !1, o);
    if (m < a.top || m > a.bottom || (o < 0 ? g < r : g > r))
      return _e.cursor(g, e.assoc, void 0, s);
  }
}
function vd(t, e, n) {
  let i = t.state.facet(CS).map((r) => r(t));
  for (; ; ) {
    let r = !1;
    for (let o of i)
      o.between(n.from - 1, n.from + 1, (s, l, a) => {
        n.from > s && n.from < l && (n = e.head > n.from ? _e.cursor(s, 1) : _e.cursor(l, -1), r = !0);
      });
    if (!r)
      return n;
  }
}
class Iz {
  constructor(e) {
    this.lastKeyCode = 0, this.lastKeyTime = 0, this.lastTouchTime = 0, this.lastFocusTime = 0, this.lastScrollTop = 0, this.lastScrollLeft = 0, this.chromeScrollHack = -1, this.pendingIOSKey = void 0, this.lastSelectionOrigin = null, this.lastSelectionTime = 0, this.lastEscPress = 0, this.lastContextMenu = 0, this.scrollHandlers = [], this.registeredEvents = [], this.customHandlers = [], this.composing = -1, this.compositionFirstChange = null, this.compositionEndedAt = 0, this.mouseSelection = null;
    let n = (i, r) => {
      this.ignoreDuringComposition(r) || r.type == "keydown" && this.keydown(e, r) || (this.mustFlushObserver(r) && e.observer.forceFlush(), this.runCustomHandlers(r.type, e, r) ? r.preventDefault() : i(e, r));
    };
    for (let i in Un) {
      let r = Un[i];
      e.contentDOM.addEventListener(i, (o) => {
        Y_(e, o) && n(r, o);
      }, Qm[i]), this.registeredEvents.push(i);
    }
    e.scrollDOM.addEventListener("mousedown", (i) => {
      i.target == e.scrollDOM && n(Un.mousedown, i);
    }), Qe.chrome && Qe.chrome_version == 102 && e.scrollDOM.addEventListener("wheel", () => {
      this.chromeScrollHack < 0 ? e.contentDOM.style.pointerEvents = "none" : window.clearTimeout(this.chromeScrollHack), this.chromeScrollHack = setTimeout(() => {
        this.chromeScrollHack = -1, e.contentDOM.style.pointerEvents = "";
      }, 100);
    }, { passive: !0 }), this.notifiedFocused = e.hasFocus, Qe.safari && e.contentDOM.addEventListener("input", () => null);
  }
  setSelectionOrigin(e) {
    this.lastSelectionOrigin = e, this.lastSelectionTime = Date.now();
  }
  ensureHandlers(e, n) {
    var i;
    let r;
    this.customHandlers = [];
    for (let o of n)
      if (r = (i = o.update(e).spec) === null || i === void 0 ? void 0 : i.domEventHandlers) {
        this.customHandlers.push({ plugin: o.value, handlers: r });
        for (let s in r)
          this.registeredEvents.indexOf(s) < 0 && s != "scroll" && (this.registeredEvents.push(s), e.contentDOM.addEventListener(s, (l) => {
            Y_(e, l) && this.runCustomHandlers(s, e, l) && l.preventDefault();
          }));
      }
  }
  runCustomHandlers(e, n, i) {
    for (let r of this.customHandlers) {
      let o = r.handlers[e];
      if (o)
        try {
          if (o.call(r.plugin, i, n) || i.defaultPrevented)
            return !0;
        } catch (s) {
          xi(n.state, s);
        }
    }
    return !1;
  }
  runScrollHandlers(e, n) {
    this.lastScrollTop = e.scrollDOM.scrollTop, this.lastScrollLeft = e.scrollDOM.scrollLeft;
    for (let i of this.customHandlers) {
      let r = i.handlers.scroll;
      if (r)
        try {
          r.call(i.plugin, n, e);
        } catch (o) {
          xi(e.state, o);
        }
    }
  }
  keydown(e, n) {
    if (this.lastKeyCode = n.keyCode, this.lastKeyTime = Date.now(), n.keyCode == 9 && Date.now() < this.lastEscPress + 2e3)
      return !0;
    if (Qe.android && Qe.chrome && !n.synthetic && (n.keyCode == 13 || n.keyCode == 8))
      return e.observer.delayAndroidKey(n.key, n.keyCode), !0;
    let i;
    return Qe.ios && !n.synthetic && !n.altKey && !n.metaKey && ((i = IS.find((r) => r.keyCode == n.keyCode)) && !n.ctrlKey || Nz.indexOf(n.key) > -1 && n.ctrlKey && !n.shiftKey) ? (this.pendingIOSKey = i || n, setTimeout(() => this.flushIOSKey(e), 250), !0) : !1;
  }
  flushIOSKey(e) {
    let n = this.pendingIOSKey;
    return n ? (this.pendingIOSKey = void 0, cl(e.contentDOM, n.key, n.keyCode)) : !1;
  }
  ignoreDuringComposition(e) {
    return /^key/.test(e.type) ? this.composing > 0 ? !0 : Qe.safari && !Qe.ios && Date.now() - this.compositionEndedAt < 100 ? (this.compositionEndedAt = 0, !0) : !1 : !1;
  }
  mustFlushObserver(e) {
    return e.type == "keydown" && e.keyCode != 229;
  }
  startMouseSelection(e) {
    this.mouseSelection && this.mouseSelection.destroy(), this.mouseSelection = e;
  }
  update(e) {
    this.mouseSelection && this.mouseSelection.update(e), e.transactions.length && (this.lastKeyCode = this.lastSelectionTime = 0);
  }
  destroy() {
    this.mouseSelection && this.mouseSelection.destroy();
  }
}
const IS = [
  { key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" },
  { key: "Enter", keyCode: 13, inputType: "insertParagraph" },
  { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }
], Nz = "dthko", NS = [16, 17, 18, 20, 91, 92, 224, 225];
function Kf(t) {
  return t * 0.7 + 8;
}
class Dz {
  constructor(e, n, i, r) {
    this.view = e, this.style = i, this.mustSelect = r, this.scrollSpeed = { x: 0, y: 0 }, this.scrolling = -1, this.lastEvent = n, this.scrollParent = tz(e.contentDOM);
    let o = e.contentDOM.ownerDocument;
    o.addEventListener("mousemove", this.move = this.move.bind(this)), o.addEventListener("mouseup", this.up = this.up.bind(this)), this.extend = n.shiftKey, this.multiple = e.state.facet(Mt.allowMultipleSelections) && jz(e, n), this.dragMove = Bz(e, n), this.dragging = Lz(e, n) && LS(n) == 1 ? null : !1, this.dragging === !1 && (n.preventDefault(), this.select(n));
  }
  move(e) {
    var n;
    if (e.buttons == 0)
      return this.destroy();
    if (this.dragging !== !1)
      return;
    this.select(this.lastEvent = e);
    let i = 0, r = 0, o = ((n = this.scrollParent) === null || n === void 0 ? void 0 : n.getBoundingClientRect()) || { left: 0, top: 0, right: this.view.win.innerWidth, bottom: this.view.win.innerHeight };
    e.clientX <= o.left ? i = -Kf(o.left - e.clientX) : e.clientX >= o.right && (i = Kf(e.clientX - o.right)), e.clientY <= o.top ? r = -Kf(o.top - e.clientY) : e.clientY >= o.bottom && (r = Kf(e.clientY - o.bottom)), this.setScrollSpeed(i, r);
  }
  up(e) {
    this.dragging == null && this.select(this.lastEvent), this.dragging || e.preventDefault(), this.destroy();
  }
  destroy() {
    this.setScrollSpeed(0, 0);
    let e = this.view.contentDOM.ownerDocument;
    e.removeEventListener("mousemove", this.move), e.removeEventListener("mouseup", this.up), this.view.inputState.mouseSelection = null;
  }
  setScrollSpeed(e, n) {
    this.scrollSpeed = { x: e, y: n }, e || n ? this.scrolling < 0 && (this.scrolling = setInterval(() => this.scroll(), 50)) : this.scrolling > -1 && (clearInterval(this.scrolling), this.scrolling = -1);
  }
  scroll() {
    this.scrollParent ? (this.scrollParent.scrollLeft += this.scrollSpeed.x, this.scrollParent.scrollTop += this.scrollSpeed.y) : this.view.win.scrollBy(this.scrollSpeed.x, this.scrollSpeed.y), this.dragging === !1 && this.select(this.lastEvent);
  }
  select(e) {
    let n = this.style.get(e, this.extend, this.multiple);
    (this.mustSelect || !n.eq(this.view.state.selection) || n.main.assoc != this.view.state.selection.main.assoc) && this.view.dispatch({
      selection: n,
      userEvent: "select.pointer"
    }), this.mustSelect = !1;
  }
  update(e) {
    e.docChanged && this.dragging && (this.dragging = this.dragging.map(e.changes)), this.style.update(e) && setTimeout(() => this.select(this.lastEvent), 20);
  }
}
function jz(t, e) {
  let n = t.state.facet(pS);
  return n.length ? n[0](e) : Qe.mac ? e.metaKey : e.ctrlKey;
}
function Bz(t, e) {
  let n = t.state.facet(gS);
  return n.length ? n[0](e) : Qe.mac ? !e.altKey : !e.ctrlKey;
}
function Lz(t, e) {
  let { main: n } = t.state.selection;
  if (n.empty)
    return !1;
  let i = cu(t.root);
  if (!i || i.rangeCount == 0)
    return !0;
  let r = i.getRangeAt(0).getClientRects();
  for (let o = 0; o < r.length; o++) {
    let s = r[o];
    if (s.left <= e.clientX && s.right >= e.clientX && s.top <= e.clientY && s.bottom >= e.clientY)
      return !0;
  }
  return !1;
}
function Y_(t, e) {
  if (!e.bubbles)
    return !0;
  if (e.defaultPrevented)
    return !1;
  for (let n = e.target, i; n != t.contentDOM; n = n.parentNode)
    if (!n || n.nodeType == 11 || (i = on.get(n)) && i.ignoreEvent(e))
      return !1;
  return !0;
}
const Un = /* @__PURE__ */ Object.create(null), Qm = /* @__PURE__ */ Object.create(null), DS = Qe.ie && Qe.ie_version < 15 || Qe.ios && Qe.webkit_version < 604;
function xz(t) {
  let e = t.dom.parentNode;
  if (!e)
    return;
  let n = e.appendChild(document.createElement("textarea"));
  n.style.cssText = "position: fixed; left: -10000px; top: 10px", n.focus(), setTimeout(() => {
    t.focus(), n.remove(), jS(t, n.value);
  }, 50);
}
function jS(t, e) {
  let { state: n } = t, i, r = 1, o = n.toText(e), s = o.lines == n.selection.ranges.length;
  if (Ym != null && n.selection.ranges.every((a) => a.empty) && Ym == o.toString()) {
    let a = -1;
    i = n.changeByRange((f) => {
      let c = n.doc.lineAt(f.from);
      if (c.from == a)
        return { range: f };
      a = c.from;
      let u = n.toText((s ? o.line(r++).text : e) + n.lineBreak);
      return {
        changes: { from: c.from, insert: u },
        range: _e.cursor(f.from + u.length)
      };
    });
  } else
    s ? i = n.changeByRange((a) => {
      let f = o.line(r++);
      return {
        changes: { from: a.from, to: a.to, insert: f.text },
        range: _e.cursor(a.from + f.length)
      };
    }) : i = n.replaceSelection(o);
  t.dispatch(i, {
    userEvent: "input.paste",
    scrollIntoView: !0
  });
}
Un.keydown = (t, e) => {
  t.inputState.setSelectionOrigin("select"), e.keyCode == 27 ? t.inputState.lastEscPress = Date.now() : NS.indexOf(e.keyCode) < 0 && (t.inputState.lastEscPress = 0);
};
Un.touchstart = (t, e) => {
  t.inputState.lastTouchTime = Date.now(), t.inputState.setSelectionOrigin("select.pointer");
};
Un.touchmove = (t) => {
  t.inputState.setSelectionOrigin("select.pointer");
};
Qm.touchstart = Qm.touchmove = { passive: !0 };
Un.mousedown = (t, e) => {
  if (t.observer.flush(), t.inputState.lastTouchTime > Date.now() - 2e3)
    return;
  let n = null;
  for (let i of t.state.facet(bS))
    if (n = i(t, e), n)
      break;
  if (!n && e.button == 0 && (n = Fz(t, e)), n) {
    let i = t.root.activeElement != t.contentDOM;
    i && t.observer.ignore(() => nS(t.contentDOM)), t.inputState.startMouseSelection(new Dz(t, e, n, i));
  }
};
function Z_(t, e, n, i) {
  if (i == 1)
    return _e.cursor(e, n);
  if (i == 2)
    return Sz(t.state, e, n);
  {
    let r = gi.find(t.docView, e), o = t.state.doc.lineAt(r ? r.posAtEnd : e), s = r ? r.posAtStart : o.from, l = r ? r.posAtEnd : o.to;
    return l < t.state.doc.length && l == o.to && l++, _e.range(s, l);
  }
}
let BS = (t, e) => t >= e.top && t <= e.bottom, $_ = (t, e, n) => BS(e, n) && t >= n.left && t <= n.right;
function zz(t, e, n, i) {
  let r = gi.find(t.docView, e);
  if (!r)
    return 1;
  let o = e - r.posAtStart;
  if (o == 0)
    return 1;
  if (o == r.length)
    return -1;
  let s = r.coordsAt(o, -1);
  if (s && $_(n, i, s))
    return -1;
  let l = r.coordsAt(o, 1);
  return l && $_(n, i, l) ? 1 : s && BS(i, s) ? -1 : 1;
}
function ey(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  return { pos: n, bias: zz(t, n, e.clientX, e.clientY) };
}
const Vz = Qe.ie && Qe.ie_version <= 11;
let ty = null, ny = 0, iy = 0;
function LS(t) {
  if (!Vz)
    return t.detail;
  let e = ty, n = iy;
  return ty = t, iy = Date.now(), ny = !e || n > Date.now() - 400 && Math.abs(e.clientX - t.clientX) < 2 && Math.abs(e.clientY - t.clientY) < 2 ? (ny + 1) % 3 : 1;
}
function Fz(t, e) {
  let n = ey(t, e), i = LS(e), r = t.state.selection;
  return {
    update(o) {
      o.docChanged && (n.pos = o.changes.mapPos(n.pos), r = r.map(o.changes));
    },
    get(o, s, l) {
      let a = ey(t, o), f = Z_(t, a.pos, a.bias, i);
      if (n.pos != a.pos && !s) {
        let c = Z_(t, n.pos, n.bias, i), u = Math.min(c.from, f.from), h = Math.max(c.to, f.to);
        f = u < f.from ? _e.range(u, h) : _e.range(h, u);
      }
      return s ? r.replaceRange(r.main.extend(f.from, f.to)) : l && r.ranges.length > 1 && r.ranges.some((c) => c.eq(f)) ? Hz(r, f) : l ? r.addRange(f) : _e.create([f]);
    }
  };
}
function Hz(t, e) {
  for (let n = 0; ; n++)
    if (t.ranges[n].eq(e))
      return _e.create(t.ranges.slice(0, n).concat(t.ranges.slice(n + 1)), t.mainIndex == n ? 0 : t.mainIndex - (t.mainIndex > n ? 1 : 0));
}
Un.dragstart = (t, e) => {
  let { selection: { main: n } } = t.state, { mouseSelection: i } = t.inputState;
  i && (i.dragging = n), e.dataTransfer && (e.dataTransfer.setData("Text", t.state.sliceDoc(n.from, n.to)), e.dataTransfer.effectAllowed = "copyMove");
};
function ry(t, e, n, i) {
  if (!n)
    return;
  let r = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  e.preventDefault();
  let { mouseSelection: o } = t.inputState, s = i && o && o.dragging && o.dragMove ? { from: o.dragging.from, to: o.dragging.to } : null, l = { from: r, insert: n }, a = t.state.changes(s ? [s, l] : l);
  t.focus(), t.dispatch({
    changes: a,
    selection: { anchor: a.mapPos(r, -1), head: a.mapPos(r, 1) },
    userEvent: s ? "move.drop" : "input.drop"
  });
}
Un.drop = (t, e) => {
  if (!e.dataTransfer)
    return;
  if (t.state.readOnly)
    return e.preventDefault();
  let n = e.dataTransfer.files;
  if (n && n.length) {
    e.preventDefault();
    let i = Array(n.length), r = 0, o = () => {
      ++r == n.length && ry(t, e, i.filter((s) => s != null).join(t.state.lineBreak), !1);
    };
    for (let s = 0; s < n.length; s++) {
      let l = new FileReader();
      l.onerror = o, l.onload = () => {
        /[\x00-\x08\x0e-\x1f]{2}/.test(l.result) || (i[s] = l.result), o();
      }, l.readAsText(n[s]);
    }
  } else
    ry(t, e, e.dataTransfer.getData("Text"), !0);
};
Un.paste = (t, e) => {
  if (t.state.readOnly)
    return e.preventDefault();
  t.observer.flush();
  let n = DS ? null : e.clipboardData;
  n ? (jS(t, n.getData("text/plain")), e.preventDefault()) : xz(t);
};
function Wz(t, e) {
  let n = t.dom.parentNode;
  if (!n)
    return;
  let i = n.appendChild(document.createElement("textarea"));
  i.style.cssText = "position: fixed; left: -10000px; top: 10px", i.value = e, i.focus(), i.selectionEnd = e.length, i.selectionStart = 0, setTimeout(() => {
    i.remove(), t.focus();
  }, 50);
}
function Uz(t) {
  let e = [], n = [], i = !1;
  for (let r of t.selection.ranges)
    r.empty || (e.push(t.sliceDoc(r.from, r.to)), n.push(r));
  if (!e.length) {
    let r = -1;
    for (let { from: o } of t.selection.ranges) {
      let s = t.doc.lineAt(o);
      s.number > r && (e.push(s.text), n.push({ from: s.from, to: Math.min(t.doc.length, s.to + 1) })), r = s.number;
    }
    i = !0;
  }
  return { text: e.join(t.lineBreak), ranges: n, linewise: i };
}
let Ym = null;
Un.copy = Un.cut = (t, e) => {
  let { text: n, ranges: i, linewise: r } = Uz(t.state);
  if (!n && !r)
    return;
  Ym = r ? n : null;
  let o = DS ? null : e.clipboardData;
  o ? (e.preventDefault(), o.clearData(), o.setData("text/plain", n)) : Wz(t, n), e.type == "cut" && !t.state.readOnly && t.dispatch({
    changes: i,
    scrollIntoView: !0,
    userEvent: "delete.cut"
  });
};
function xS(t) {
  setTimeout(() => {
    t.hasFocus != t.inputState.notifiedFocused && t.update([]);
  }, 10);
}
Un.focus = (t) => {
  t.inputState.lastFocusTime = Date.now(), !t.scrollDOM.scrollTop && (t.inputState.lastScrollTop || t.inputState.lastScrollLeft) && (t.scrollDOM.scrollTop = t.inputState.lastScrollTop, t.scrollDOM.scrollLeft = t.inputState.lastScrollLeft), xS(t);
};
Un.blur = (t) => {
  t.observer.clearSelectionRange(), xS(t);
};
Un.compositionstart = Un.compositionupdate = (t) => {
  t.inputState.compositionFirstChange == null && (t.inputState.compositionFirstChange = !0), t.inputState.composing < 0 && (t.inputState.composing = 0);
};
Un.compositionend = (t) => {
  t.inputState.composing = -1, t.inputState.compositionEndedAt = Date.now(), t.inputState.compositionFirstChange = null, Qe.chrome && Qe.android && t.observer.flushSoon(), setTimeout(() => {
    t.inputState.composing < 0 && t.docView.compositionDeco.size && t.update([]);
  }, 50);
};
Un.contextmenu = (t) => {
  t.inputState.lastContextMenu = Date.now();
};
Un.beforeinput = (t, e) => {
  var n;
  let i;
  if (Qe.chrome && Qe.android && (i = IS.find((r) => r.inputType == e.inputType)) && (t.observer.delayAndroidKey(i.key, i.keyCode), i.key == "Backspace" || i.key == "Delete")) {
    let r = ((n = window.visualViewport) === null || n === void 0 ? void 0 : n.height) || 0;
    setTimeout(() => {
      var o;
      (((o = window.visualViewport) === null || o === void 0 ? void 0 : o.height) || 0) > r + 10 && t.hasFocus && (t.contentDOM.blur(), t.focus());
    }, 100);
  }
};
const oy = ["pre-wrap", "normal", "pre-line", "break-spaces"];
class qz {
  constructor(e) {
    this.lineWrapping = e, this.doc = Bt.empty, this.heightSamples = {}, this.lineHeight = 14, this.charWidth = 7, this.lineLength = 30, this.heightChanged = !1;
  }
  heightForGap(e, n) {
    let i = this.doc.lineAt(n).number - this.doc.lineAt(e).number + 1;
    return this.lineWrapping && (i += Math.ceil((n - e - i * this.lineLength * 0.5) / this.lineLength)), this.lineHeight * i;
  }
  heightForLine(e) {
    return this.lineWrapping ? (1 + Math.max(0, Math.ceil((e - this.lineLength) / (this.lineLength - 5)))) * this.lineHeight : this.lineHeight;
  }
  setDoc(e) {
    return this.doc = e, this;
  }
  mustRefreshForWrapping(e) {
    return oy.indexOf(e) > -1 != this.lineWrapping;
  }
  mustRefreshForHeights(e) {
    let n = !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i];
      r < 0 ? i++ : this.heightSamples[Math.floor(r * 10)] || (n = !0, this.heightSamples[Math.floor(r * 10)] = !0);
    }
    return n;
  }
  refresh(e, n, i, r, o) {
    let s = oy.indexOf(e) > -1, l = Math.round(n) != Math.round(this.lineHeight) || this.lineWrapping != s;
    if (this.lineWrapping = s, this.lineHeight = n, this.charWidth = i, this.lineLength = r, l) {
      this.heightSamples = {};
      for (let a = 0; a < o.length; a++) {
        let f = o[a];
        f < 0 ? a++ : this.heightSamples[Math.floor(f * 10)] = !0;
      }
    }
    return l;
  }
}
class Jz {
  constructor(e, n) {
    this.from = e, this.heights = n, this.index = 0;
  }
  get more() {
    return this.index < this.heights.length;
  }
}
class jo {
  constructor(e, n, i, r, o) {
    this.from = e, this.length = n, this.top = i, this.height = r, this.type = o;
  }
  get to() {
    return this.from + this.length;
  }
  get bottom() {
    return this.top + this.height;
  }
  join(e) {
    let n = (Array.isArray(this.type) ? this.type : [this]).concat(Array.isArray(e.type) ? e.type : [e]);
    return new jo(this.from, this.length + e.length, this.top, this.height + e.height, n);
  }
}
var tn = /* @__PURE__ */ function(t) {
  return t[t.ByPos = 0] = "ByPos", t[t.ByHeight = 1] = "ByHeight", t[t.ByPosNoHeight = 2] = "ByPosNoHeight", t;
}(tn || (tn = {}));
const Ac = 1e-3;
class _i {
  constructor(e, n, i = 2) {
    this.length = e, this.height = n, this.flags = i;
  }
  get outdated() {
    return (this.flags & 2) > 0;
  }
  set outdated(e) {
    this.flags = (e ? 2 : 0) | this.flags & -3;
  }
  setHeight(e, n) {
    this.height != n && (Math.abs(this.height - n) > Ac && (e.heightChanged = !0), this.height = n);
  }
  replace(e, n, i) {
    return _i.of(i);
  }
  decomposeLeft(e, n) {
    n.push(this);
  }
  decomposeRight(e, n) {
    n.push(this);
  }
  applyChanges(e, n, i, r) {
    let o = this;
    for (let s = r.length - 1; s >= 0; s--) {
      let { fromA: l, toA: a, fromB: f, toB: c } = r[s], u = o.lineAt(l, tn.ByPosNoHeight, n, 0, 0), h = u.to >= a ? u : o.lineAt(a, tn.ByPosNoHeight, n, 0, 0);
      for (c += h.to - a, a = h.to; s > 0 && u.from <= r[s - 1].toA; )
        l = r[s - 1].fromA, f = r[s - 1].fromB, s--, l < u.from && (u = o.lineAt(l, tn.ByPosNoHeight, n, 0, 0));
      f += u.from - l, l = u.from;
      let d = Mg.build(i, e, f, c);
      o = o.replace(l, a, d);
    }
    return o.updateHeight(i, 0);
  }
  static empty() {
    return new Di(0, 0);
  }
  static of(e) {
    if (e.length == 1)
      return e[0];
    let n = 0, i = e.length, r = 0, o = 0;
    for (; ; )
      if (n == i)
        if (r > o * 2) {
          let l = e[n - 1];
          l.break ? e.splice(--n, 1, l.left, null, l.right) : e.splice(--n, 1, l.left, l.right), i += 1 + l.break, r -= l.size;
        } else if (o > r * 2) {
          let l = e[i];
          l.break ? e.splice(i, 1, l.left, null, l.right) : e.splice(i, 1, l.left, l.right), i += 2 + l.break, o -= l.size;
        } else
          break;
      else if (r < o) {
        let l = e[n++];
        l && (r += l.size);
      } else {
        let l = e[--i];
        l && (o += l.size);
      }
    let s = 0;
    return e[n - 1] == null ? (s = 1, n--) : e[n] == null && (s = 1, i++), new Kz(_i.of(e.slice(0, n)), s, _i.of(e.slice(i)));
  }
}
_i.prototype.size = 1;
class zS extends _i {
  constructor(e, n, i) {
    super(e, n), this.type = i;
  }
  blockAt(e, n, i, r) {
    return new jo(r, this.length, i, this.height, this.type);
  }
  lineAt(e, n, i, r, o) {
    return this.blockAt(0, i, r, o);
  }
  forEachLine(e, n, i, r, o, s) {
    e <= o + this.length && n >= o && s(this.blockAt(0, i, r, o));
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more && this.setHeight(e, r.heights[r.index++]), this.outdated = !1, this;
  }
  toString() {
    return `block(${this.length})`;
  }
}
class Di extends zS {
  constructor(e, n) {
    super(e, n, Yt.Text), this.collapsed = 0, this.widgetHeight = 0;
  }
  replace(e, n, i) {
    let r = i[0];
    return i.length == 1 && (r instanceof Di || r instanceof ei && r.flags & 4) && Math.abs(this.length - r.length) < 10 ? (r instanceof ei ? r = new Di(r.length, this.height) : r.height = this.height, this.outdated || (r.outdated = !1), r) : _i.of(i);
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more ? this.setHeight(e, r.heights[r.index++]) : (i || this.outdated) && this.setHeight(e, Math.max(this.widgetHeight, e.heightForLine(this.length - this.collapsed))), this.outdated = !1, this;
  }
  toString() {
    return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
  }
}
class ei extends _i {
  constructor(e) {
    super(e, 0);
  }
  lines(e, n) {
    let i = e.lineAt(n).number, r = e.lineAt(n + this.length).number;
    return { firstLine: i, lastLine: r, lineHeight: this.height / (r - i + 1) };
  }
  blockAt(e, n, i, r) {
    let { firstLine: o, lastLine: s, lineHeight: l } = this.lines(n, r), a = Math.max(0, Math.min(s - o, Math.floor((e - i) / l))), { from: f, length: c } = n.line(o + a);
    return new jo(f, c, i + l * a, l, Yt.Text);
  }
  lineAt(e, n, i, r, o) {
    if (n == tn.ByHeight)
      return this.blockAt(e, i, r, o);
    if (n == tn.ByPosNoHeight) {
      let { from: u, to: h } = i.lineAt(e);
      return new jo(u, h - u, 0, 0, Yt.Text);
    }
    let { firstLine: s, lineHeight: l } = this.lines(i, o), { from: a, length: f, number: c } = i.lineAt(e);
    return new jo(a, f, r + l * (c - s), l, Yt.Text);
  }
  forEachLine(e, n, i, r, o, s) {
    let { firstLine: l, lineHeight: a } = this.lines(i, o);
    for (let f = Math.max(e, o), c = Math.min(o + this.length, n); f <= c; ) {
      let u = i.lineAt(f);
      f == e && (r += a * (u.number - l)), s(new jo(u.from, u.length, r, a, Yt.Text)), r += a, f = u.to + 1;
    }
  }
  replace(e, n, i) {
    let r = this.length - n;
    if (r > 0) {
      let o = i[i.length - 1];
      o instanceof ei ? i[i.length - 1] = new ei(o.length + r) : i.push(null, new ei(r - 1));
    }
    if (e > 0) {
      let o = i[0];
      o instanceof ei ? i[0] = new ei(e + o.length) : i.unshift(new ei(e - 1), null);
    }
    return _i.of(i);
  }
  decomposeLeft(e, n) {
    n.push(new ei(e - 1), null);
  }
  decomposeRight(e, n) {
    n.push(null, new ei(this.length - e - 1));
  }
  updateHeight(e, n = 0, i = !1, r) {
    let o = n + this.length;
    if (r && r.from <= n + this.length && r.more) {
      let s = [], l = Math.max(n, r.from), a = -1, f = e.heightChanged;
      for (r.from > n && s.push(new ei(r.from - n - 1).updateHeight(e, n)); l <= o && r.more; ) {
        let u = e.doc.lineAt(l).length;
        s.length && s.push(null);
        let h = r.heights[r.index++];
        a == -1 ? a = h : Math.abs(h - a) >= Ac && (a = -2);
        let d = new Di(u, h);
        d.outdated = !1, s.push(d), l += u + 1;
      }
      l <= o && s.push(null, new ei(o - l).updateHeight(e, l));
      let c = _i.of(s);
      return e.heightChanged = f || a < 0 || Math.abs(c.height - this.height) >= Ac || Math.abs(a - this.lines(e.doc, n).lineHeight) >= Ac, c;
    } else
      (i || this.outdated) && (this.setHeight(e, e.heightForGap(n, n + this.length)), this.outdated = !1);
    return this;
  }
  toString() {
    return `gap(${this.length})`;
  }
}
class Kz extends _i {
  constructor(e, n, i) {
    super(e.length + n + i.length, e.height + i.height, n | (e.outdated || i.outdated ? 2 : 0)), this.left = e, this.right = i, this.size = e.size + i.size;
  }
  get break() {
    return this.flags & 1;
  }
  blockAt(e, n, i, r) {
    let o = i + this.left.height;
    return e < o ? this.left.blockAt(e, n, i, r) : this.right.blockAt(e, n, o, r + this.left.length + this.break);
  }
  lineAt(e, n, i, r, o) {
    let s = r + this.left.height, l = o + this.left.length + this.break, a = n == tn.ByHeight ? e < s : e < l, f = a ? this.left.lineAt(e, n, i, r, o) : this.right.lineAt(e, n, i, s, l);
    if (this.break || (a ? f.to < l : f.from > l))
      return f;
    let c = n == tn.ByPosNoHeight ? tn.ByPosNoHeight : tn.ByPos;
    return a ? f.join(this.right.lineAt(l, c, i, s, l)) : this.left.lineAt(l, c, i, r, o).join(f);
  }
  forEachLine(e, n, i, r, o, s) {
    let l = r + this.left.height, a = o + this.left.length + this.break;
    if (this.break)
      e < a && this.left.forEachLine(e, n, i, r, o, s), n >= a && this.right.forEachLine(e, n, i, l, a, s);
    else {
      let f = this.lineAt(a, tn.ByPos, i, r, o);
      e < f.from && this.left.forEachLine(e, f.from - 1, i, r, o, s), f.to >= e && f.from <= n && s(f), n > f.to && this.right.forEachLine(f.to + 1, n, i, l, a, s);
    }
  }
  replace(e, n, i) {
    let r = this.left.length + this.break;
    if (n < r)
      return this.balanced(this.left.replace(e, n, i), this.right);
    if (e > this.left.length)
      return this.balanced(this.left, this.right.replace(e - r, n - r, i));
    let o = [];
    e > 0 && this.decomposeLeft(e, o);
    let s = o.length;
    for (let l of i)
      o.push(l);
    if (e > 0 && sy(o, s - 1), n < this.length) {
      let l = o.length;
      this.decomposeRight(n, o), sy(o, l);
    }
    return _i.of(o);
  }
  decomposeLeft(e, n) {
    let i = this.left.length;
    if (e <= i)
      return this.left.decomposeLeft(e, n);
    n.push(this.left), this.break && (i++, e >= i && n.push(null)), e > i && this.right.decomposeLeft(e - i, n);
  }
  decomposeRight(e, n) {
    let i = this.left.length, r = i + this.break;
    if (e >= r)
      return this.right.decomposeRight(e - r, n);
    e < i && this.left.decomposeRight(e, n), this.break && e < r && n.push(null), n.push(this.right);
  }
  balanced(e, n) {
    return e.size > 2 * n.size || n.size > 2 * e.size ? _i.of(this.break ? [e, null, n] : [e, n]) : (this.left = e, this.right = n, this.height = e.height + n.height, this.outdated = e.outdated || n.outdated, this.size = e.size + n.size, this.length = e.length + this.break + n.length, this);
  }
  updateHeight(e, n = 0, i = !1, r) {
    let { left: o, right: s } = this, l = n + o.length + this.break, a = null;
    return r && r.from <= n + o.length && r.more ? a = o = o.updateHeight(e, n, i, r) : o.updateHeight(e, n, i), r && r.from <= l + s.length && r.more ? a = s = s.updateHeight(e, l, i, r) : s.updateHeight(e, l, i), a ? this.balanced(o, s) : (this.height = this.left.height + this.right.height, this.outdated = !1, this);
  }
  toString() {
    return this.left + (this.break ? " " : "-") + this.right;
  }
}
function sy(t, e) {
  let n, i;
  t[e] == null && (n = t[e - 1]) instanceof ei && (i = t[e + 1]) instanceof ei && t.splice(e - 1, 3, new ei(n.length + 1 + i.length));
}
const Gz = 5;
class Mg {
  constructor(e, n) {
    this.pos = e, this.oracle = n, this.nodes = [], this.lineStart = -1, this.lineEnd = -1, this.covering = null, this.writtenTo = e;
  }
  get isCovered() {
    return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
  }
  span(e, n) {
    if (this.lineStart > -1) {
      let i = Math.min(n, this.lineEnd), r = this.nodes[this.nodes.length - 1];
      r instanceof Di ? r.length += i - this.pos : (i > this.pos || !this.isCovered) && this.nodes.push(new Di(i - this.pos, -1)), this.writtenTo = i, n > i && (this.nodes.push(null), this.writtenTo++, this.lineStart = -1);
    }
    this.pos = n;
  }
  point(e, n, i) {
    if (e < n || i.heightRelevant) {
      let r = i.widget ? i.widget.estimatedHeight : 0;
      r < 0 && (r = this.oracle.lineHeight);
      let o = n - e;
      i.block ? this.addBlock(new zS(o, r, i.type)) : (o || r >= Gz) && this.addLineDeco(r, o);
    } else
      n > e && this.span(e, n);
    this.lineEnd > -1 && this.lineEnd < this.pos && (this.lineEnd = this.oracle.doc.lineAt(this.pos).to);
  }
  enterLine() {
    if (this.lineStart > -1)
      return;
    let { from: e, to: n } = this.oracle.doc.lineAt(this.pos);
    this.lineStart = e, this.lineEnd = n, this.writtenTo < e && ((this.writtenTo < e - 1 || this.nodes[this.nodes.length - 1] == null) && this.nodes.push(this.blankContent(this.writtenTo, e - 1)), this.nodes.push(null)), this.pos > e && this.nodes.push(new Di(this.pos - e, -1)), this.writtenTo = this.pos;
  }
  blankContent(e, n) {
    let i = new ei(n - e);
    return this.oracle.doc.lineAt(e).to == n && (i.flags |= 4), i;
  }
  ensureLine() {
    this.enterLine();
    let e = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
    if (e instanceof Di)
      return e;
    let n = new Di(0, -1);
    return this.nodes.push(n), n;
  }
  addBlock(e) {
    this.enterLine(), e.type == Yt.WidgetAfter && !this.isCovered && this.ensureLine(), this.nodes.push(e), this.writtenTo = this.pos = this.pos + e.length, e.type != Yt.WidgetBefore && (this.covering = e);
  }
  addLineDeco(e, n) {
    let i = this.ensureLine();
    i.length += n, i.collapsed += n, i.widgetHeight = Math.max(i.widgetHeight, e), this.writtenTo = this.pos = this.pos + n;
  }
  finish(e) {
    let n = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
    this.lineStart > -1 && !(n instanceof Di) && !this.isCovered ? this.nodes.push(new Di(0, -1)) : (this.writtenTo < this.pos || n == null) && this.nodes.push(this.blankContent(this.writtenTo, this.pos));
    let i = e;
    for (let r of this.nodes)
      r instanceof Di && r.updateHeight(this.oracle, i), i += r ? r.length : 1;
    return this.nodes;
  }
  static build(e, n, i, r) {
    let o = new Mg(i, e);
    return Lt.spans(n, i, r, o, 0), o.finish(i);
  }
}
function Xz(t, e, n) {
  let i = new Qz();
  return Lt.compare(t, e, n, i, 0), i.changes;
}
class Qz {
  constructor() {
    this.changes = [];
  }
  compareRange() {
  }
  comparePoint(e, n, i, r) {
    (e < n || i && i.heightRelevant || r && r.heightRelevant) && qm(e, n, this.changes, 5);
  }
}
function Yz(t, e) {
  let n = t.getBoundingClientRect(), i = t.ownerDocument, r = i.defaultView || window, o = Math.max(0, n.left), s = Math.min(r.innerWidth, n.right), l = Math.max(0, n.top), a = Math.min(r.innerHeight, n.bottom);
  for (let f = t.parentNode; f && f != i.body; )
    if (f.nodeType == 1) {
      let c = f, u = window.getComputedStyle(c);
      if ((c.scrollHeight > c.clientHeight || c.scrollWidth > c.clientWidth) && u.overflow != "visible") {
        let h = c.getBoundingClientRect();
        o = Math.max(o, h.left), s = Math.min(s, h.right), l = Math.max(l, h.top), a = f == t.parentNode ? h.bottom : Math.min(a, h.bottom);
      }
      f = u.position == "absolute" || u.position == "fixed" ? c.offsetParent : c.parentNode;
    } else if (f.nodeType == 11)
      f = f.host;
    else
      break;
  return {
    left: o - n.left,
    right: Math.max(o, s) - n.left,
    top: l - (n.top + e),
    bottom: Math.max(l, a) - (n.top + e)
  };
}
function Zz(t, e) {
  let n = t.getBoundingClientRect();
  return {
    left: 0,
    right: n.right - n.left,
    top: e,
    bottom: n.bottom - (n.top + e)
  };
}
class kd {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.size = i;
  }
  static same(e, n) {
    if (e.length != n.length)
      return !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i], o = n[i];
      if (r.from != o.from || r.to != o.to || r.size != o.size)
        return !1;
    }
    return !0;
  }
  draw(e) {
    return ot.replace({ widget: new $z(this.size, e) }).range(this.from, this.to);
  }
}
class $z extends rs {
  constructor(e, n) {
    super(), this.size = e, this.vertical = n;
  }
  eq(e) {
    return e.size == this.size && e.vertical == this.vertical;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.vertical ? e.style.height = this.size + "px" : (e.style.width = this.size + "px", e.style.height = "2px", e.style.display = "inline-block"), e;
  }
  get estimatedHeight() {
    return this.vertical ? this.size : -1;
  }
}
class ly {
  constructor(e) {
    this.state = e, this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 }, this.inView = !0, this.paddingTop = 0, this.paddingBottom = 0, this.contentDOMWidth = 0, this.contentDOMHeight = 0, this.editorHeight = 0, this.editorWidth = 0, this.scaler = ay, this.scrollTarget = null, this.printing = !1, this.mustMeasureContent = !0, this.defaultTextDirection = gn.LTR, this.visibleRanges = [], this.mustEnforceCursorAssoc = !1;
    let n = e.facet(Sg).some((i) => typeof i != "function" && i.class == "cm-lineWrapping");
    this.heightOracle = new qz(n), this.stateDeco = e.facet(Ja).filter((i) => typeof i != "function"), this.heightMap = _i.empty().applyChanges(this.stateDeco, Bt.empty, this.heightOracle.setDoc(e.doc), [new Fr(0, 0, 0, e.doc.length)]), this.viewport = this.getViewport(0, null), this.updateViewportLines(), this.updateForViewport(), this.lineGaps = this.ensureLineGaps([]), this.lineGapDeco = ot.set(this.lineGaps.map((i) => i.draw(!1))), this.computeVisibleRanges();
  }
  updateForViewport() {
    let e = [this.viewport], { main: n } = this.state.selection;
    for (let i = 0; i <= 1; i++) {
      let r = i ? n.head : n.anchor;
      if (!e.some(({ from: o, to: s }) => r >= o && r <= s)) {
        let { from: o, to: s } = this.lineBlockAt(r);
        e.push(new Gf(o, s));
      }
    }
    this.viewports = e.sort((i, r) => i.from - r.from), this.scaler = this.heightMap.height <= 7e6 ? ay : new nV(this.heightOracle.doc, this.heightMap, this.viewports);
  }
  updateViewportLines() {
    this.viewportLines = [], this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, (e) => {
      this.viewportLines.push(this.scaler.scale == 1 ? e : fa(e, this.scaler));
    });
  }
  update(e, n = null) {
    this.state = e.state;
    let i = this.stateDeco;
    this.stateDeco = this.state.facet(Ja).filter((f) => typeof f != "function");
    let r = e.changedRanges, o = Fr.extendWithRanges(r, Xz(i, this.stateDeco, e ? e.changes : Hn.empty(this.state.doc.length))), s = this.heightMap.height;
    this.heightMap = this.heightMap.applyChanges(this.stateDeco, e.startState.doc, this.heightOracle.setDoc(this.state.doc), o), this.heightMap.height != s && (e.flags |= 2);
    let l = o.length ? this.mapViewport(this.viewport, e.changes) : this.viewport;
    (n && (n.range.head < l.from || n.range.head > l.to) || !this.viewportIsAppropriate(l)) && (l = this.getViewport(0, n));
    let a = !e.changes.empty || e.flags & 2 || l.from != this.viewport.from || l.to != this.viewport.to;
    this.viewport = l, this.updateForViewport(), a && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, e.changes))), e.flags |= this.computeVisibleRanges(), n && (this.scrollTarget = n), !this.mustEnforceCursorAssoc && e.selectionSet && e.view.lineWrapping && e.state.selection.main.empty && e.state.selection.main.assoc && !e.state.facet(vS) && (this.mustEnforceCursorAssoc = !0);
  }
  measure(e) {
    let n = e.contentDOM, i = window.getComputedStyle(n), r = this.heightOracle, o = i.whiteSpace;
    this.defaultTextDirection = i.direction == "rtl" ? gn.RTL : gn.LTR;
    let s = this.heightOracle.mustRefreshForWrapping(o), l = s || this.mustMeasureContent || this.contentDOMHeight != n.clientHeight;
    this.contentDOMHeight = n.clientHeight, this.mustMeasureContent = !1;
    let a = 0, f = 0, c = parseInt(i.paddingTop) || 0, u = parseInt(i.paddingBottom) || 0;
    (this.paddingTop != c || this.paddingBottom != u) && (this.paddingTop = c, this.paddingBottom = u, a |= 10), this.editorWidth != e.scrollDOM.clientWidth && (r.lineWrapping && (l = !0), this.editorWidth = e.scrollDOM.clientWidth, a |= 8);
    let h = (this.printing ? Zz : Yz)(n, this.paddingTop), d = h.top - this.pixelViewport.top, m = h.bottom - this.pixelViewport.bottom;
    this.pixelViewport = h;
    let g = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
    if (g != this.inView && (this.inView = g, g && (l = !0)), !this.inView && !this.scrollTarget)
      return 0;
    let _ = n.clientWidth;
    if ((this.contentDOMWidth != _ || this.editorHeight != e.scrollDOM.clientHeight) && (this.contentDOMWidth = _, this.editorHeight = e.scrollDOM.clientHeight, a |= 8), l) {
      let w = e.docView.measureVisibleLineHeights(this.viewport);
      if (r.mustRefreshForHeights(w) && (s = !0), s || r.lineWrapping && Math.abs(_ - this.contentDOMWidth) > r.charWidth) {
        let { lineHeight: v, charWidth: M } = e.docView.measureTextSize();
        s = v > 0 && r.refresh(o, v, M, _ / M, w), s && (e.docView.minWidth = 0, a |= 8);
      }
      d > 0 && m > 0 ? f = Math.max(d, m) : d < 0 && m < 0 && (f = Math.min(d, m)), r.heightChanged = !1;
      for (let v of this.viewports) {
        let M = v.from == this.viewport.from ? w : e.docView.measureVisibleLineHeights(v);
        this.heightMap = (s ? _i.empty().applyChanges(this.stateDeco, Bt.empty, this.heightOracle, [new Fr(0, 0, 0, e.state.doc.length)]) : this.heightMap).updateHeight(r, 0, s, new Jz(v.from, M));
      }
      r.heightChanged && (a |= 2);
    }
    let b = !this.viewportIsAppropriate(this.viewport, f) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
    return b && (this.viewport = this.getViewport(f, this.scrollTarget)), this.updateForViewport(), (a & 2 || b) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(s ? [] : this.lineGaps, e)), a |= this.computeVisibleRanges(), this.mustEnforceCursorAssoc && (this.mustEnforceCursorAssoc = !1, e.docView.enforceCursorAssoc()), a;
  }
  get visibleTop() {
    return this.scaler.fromDOM(this.pixelViewport.top);
  }
  get visibleBottom() {
    return this.scaler.fromDOM(this.pixelViewport.bottom);
  }
  getViewport(e, n) {
    let i = 0.5 - Math.max(-0.5, Math.min(0.5, e / 1e3 / 2)), r = this.heightMap, o = this.state.doc, { visibleTop: s, visibleBottom: l } = this, a = new Gf(r.lineAt(s - i * 1e3, tn.ByHeight, o, 0, 0).from, r.lineAt(l + (1 - i) * 1e3, tn.ByHeight, o, 0, 0).to);
    if (n) {
      let { head: f } = n.range;
      if (f < a.from || f > a.to) {
        let c = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top), u = r.lineAt(f, tn.ByPos, o, 0, 0), h;
        n.y == "center" ? h = (u.top + u.bottom) / 2 - c / 2 : n.y == "start" || n.y == "nearest" && f < a.from ? h = u.top : h = u.bottom - c, a = new Gf(r.lineAt(h - 1e3 / 2, tn.ByHeight, o, 0, 0).from, r.lineAt(h + c + 1e3 / 2, tn.ByHeight, o, 0, 0).to);
      }
    }
    return a;
  }
  mapViewport(e, n) {
    let i = n.mapPos(e.from, -1), r = n.mapPos(e.to, 1);
    return new Gf(this.heightMap.lineAt(i, tn.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(r, tn.ByPos, this.state.doc, 0, 0).to);
  }
  viewportIsAppropriate({ from: e, to: n }, i = 0) {
    if (!this.inView)
      return !0;
    let { top: r } = this.heightMap.lineAt(e, tn.ByPos, this.state.doc, 0, 0), { bottom: o } = this.heightMap.lineAt(n, tn.ByPos, this.state.doc, 0, 0), { visibleTop: s, visibleBottom: l } = this;
    return (e == 0 || r <= s - Math.max(10, Math.min(-i, 250))) && (n == this.state.doc.length || o >= l + Math.max(10, Math.min(i, 250))) && r > s - 2 * 1e3 && o < l + 2 * 1e3;
  }
  mapLineGaps(e, n) {
    if (!e.length || n.empty)
      return e;
    let i = [];
    for (let r of e)
      n.touchesRange(r.from, r.to) || i.push(new kd(n.mapPos(r.from), n.mapPos(r.to), r.size));
    return i;
  }
  ensureLineGaps(e, n) {
    let i = this.heightOracle.lineWrapping, r = i ? 1e4 : 2e3, o = r >> 1, s = r << 1;
    if (this.defaultTextDirection != gn.LTR && !i)
      return [];
    let l = [], a = (f, c, u, h) => {
      if (c - f < o)
        return;
      let d = this.state.selection.main, m = [d.from];
      d.empty || m.push(d.to);
      for (let _ of m)
        if (_ > f && _ < c) {
          a(f, _ - 10, u, h), a(_ + 10, c, u, h);
          return;
        }
      let g = tV(e, (_) => _.from >= u.from && _.to <= u.to && Math.abs(_.from - f) < o && Math.abs(_.to - c) < o && !m.some((b) => _.from < b && _.to > b));
      if (!g) {
        if (c < u.to && n && i && n.visibleRanges.some((_) => _.from <= c && _.to >= c)) {
          let _ = n.moveToLineBoundary(_e.cursor(c), !1, !0).head;
          _ > f && (c = _);
        }
        g = new kd(f, c, this.gapSize(u, f, c, h));
      }
      l.push(g);
    };
    for (let f of this.viewportLines) {
      if (f.length < s)
        continue;
      let c = eV(f.from, f.to, this.stateDeco);
      if (c.total < s)
        continue;
      let u = this.scrollTarget ? this.scrollTarget.range.head : null, h, d;
      if (i) {
        let m = r / this.heightOracle.lineLength * this.heightOracle.lineHeight, g, _;
        if (u != null) {
          let b = Qf(c, u), w = ((this.visibleBottom - this.visibleTop) / 2 + m) / f.height;
          g = b - w, _ = b + w;
        } else
          g = (this.visibleTop - f.top - m) / f.height, _ = (this.visibleBottom - f.top + m) / f.height;
        h = Xf(c, g), d = Xf(c, _);
      } else {
        let m = c.total * this.heightOracle.charWidth, g = r * this.heightOracle.charWidth, _, b;
        if (u != null) {
          let w = Qf(c, u), v = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + g) / m;
          _ = w - v, b = w + v;
        } else
          _ = (this.pixelViewport.left - g) / m, b = (this.pixelViewport.right + g) / m;
        h = Xf(c, _), d = Xf(c, b);
      }
      h > f.from && a(f.from, h, f, c), d < f.to && a(d, f.to, f, c);
    }
    return l;
  }
  gapSize(e, n, i, r) {
    let o = Qf(r, i) - Qf(r, n);
    return this.heightOracle.lineWrapping ? e.height * o : r.total * this.heightOracle.charWidth * o;
  }
  updateLineGaps(e) {
    kd.same(e, this.lineGaps) || (this.lineGaps = e, this.lineGapDeco = ot.set(e.map((n) => n.draw(this.heightOracle.lineWrapping))));
  }
  computeVisibleRanges() {
    let e = this.stateDeco;
    this.lineGaps.length && (e = e.concat(this.lineGapDeco));
    let n = [];
    Lt.spans(e, this.viewport.from, this.viewport.to, {
      span(r, o) {
        n.push({ from: r, to: o });
      },
      point() {
      }
    }, 20);
    let i = n.length != this.visibleRanges.length || this.visibleRanges.some((r, o) => r.from != n[o].from || r.to != n[o].to);
    return this.visibleRanges = n, i ? 4 : 0;
  }
  lineBlockAt(e) {
    return e >= this.viewport.from && e <= this.viewport.to && this.viewportLines.find((n) => n.from <= e && n.to >= e) || fa(this.heightMap.lineAt(e, tn.ByPos, this.state.doc, 0, 0), this.scaler);
  }
  lineBlockAtHeight(e) {
    return fa(this.heightMap.lineAt(this.scaler.fromDOM(e), tn.ByHeight, this.state.doc, 0, 0), this.scaler);
  }
  elementAtHeight(e) {
    return fa(this.heightMap.blockAt(this.scaler.fromDOM(e), this.state.doc, 0, 0), this.scaler);
  }
  get docHeight() {
    return this.scaler.toDOM(this.heightMap.height);
  }
  get contentHeight() {
    return this.docHeight + this.paddingTop + this.paddingBottom;
  }
}
class Gf {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
function eV(t, e, n) {
  let i = [], r = t, o = 0;
  return Lt.spans(n, t, e, {
    span() {
    },
    point(s, l) {
      s > r && (i.push({ from: r, to: s }), o += s - r), r = l;
    }
  }, 20), r < e && (i.push({ from: r, to: e }), o += e - r), { total: o, ranges: i };
}
function Xf({ total: t, ranges: e }, n) {
  if (n <= 0)
    return e[0].from;
  if (n >= 1)
    return e[e.length - 1].to;
  let i = Math.floor(t * n);
  for (let r = 0; ; r++) {
    let { from: o, to: s } = e[r], l = s - o;
    if (i <= l)
      return o + i;
    i -= l;
  }
}
function Qf(t, e) {
  let n = 0;
  for (let { from: i, to: r } of t.ranges) {
    if (e <= r) {
      n += e - i;
      break;
    }
    n += r - i;
  }
  return n / t.total;
}
function tV(t, e) {
  for (let n of t)
    if (e(n))
      return n;
}
const ay = {
  toDOM(t) {
    return t;
  },
  fromDOM(t) {
    return t;
  },
  scale: 1
};
class nV {
  constructor(e, n, i) {
    let r = 0, o = 0, s = 0;
    this.viewports = i.map(({ from: l, to: a }) => {
      let f = n.lineAt(l, tn.ByPos, e, 0, 0).top, c = n.lineAt(a, tn.ByPos, e, 0, 0).bottom;
      return r += c - f, { from: l, to: a, top: f, bottom: c, domTop: 0, domBottom: 0 };
    }), this.scale = (7e6 - r) / (n.height - r);
    for (let l of this.viewports)
      l.domTop = s + (l.top - o) * this.scale, s = l.domBottom = l.domTop + (l.bottom - l.top), o = l.bottom;
  }
  toDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let o = n < this.viewports.length ? this.viewports[n] : null;
      if (!o || e < o.top)
        return r + (e - i) * this.scale;
      if (e <= o.bottom)
        return o.domTop + (e - o.top);
      i = o.bottom, r = o.domBottom;
    }
  }
  fromDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let o = n < this.viewports.length ? this.viewports[n] : null;
      if (!o || e < o.domTop)
        return i + (e - r) / this.scale;
      if (e <= o.domBottom)
        return o.top + (e - o.domTop);
      i = o.bottom, r = o.domBottom;
    }
  }
}
function fa(t, e) {
  if (e.scale == 1)
    return t;
  let n = e.toDOM(t.top), i = e.toDOM(t.bottom);
  return new jo(t.from, t.length, n, i - n, Array.isArray(t.type) ? t.type.map((r) => fa(r, e)) : t.type);
}
const Yf = /* @__PURE__ */ Ge.define({ combine: (t) => t.join(" ") }), Zm = /* @__PURE__ */ Ge.define({ combine: (t) => t.indexOf(!0) > -1 }), $m = /* @__PURE__ */ Xo.newName(), VS = /* @__PURE__ */ Xo.newName(), FS = /* @__PURE__ */ Xo.newName(), HS = { "&light": "." + VS, "&dark": "." + FS };
function ep(t, e, n) {
  return new Xo(e, {
    finish(i) {
      return /&/.test(i) ? i.replace(/&\w*/, (r) => {
        if (r == "&")
          return t;
        if (!n || !n[r])
          throw new RangeError(`Unsupported selector: ${r}`);
        return n[r];
      }) : t + " " + i;
    }
  });
}
const iV = /* @__PURE__ */ ep("." + $m, {
  "&.cm-editor": {
    position: "relative !important",
    boxSizing: "border-box",
    "&.cm-focused": {
      outline: "1px dotted #212121"
    },
    display: "flex !important",
    flexDirection: "column"
  },
  ".cm-scroller": {
    display: "flex !important",
    alignItems: "flex-start !important",
    fontFamily: "monospace",
    lineHeight: 1.4,
    height: "100%",
    overflowX: "auto",
    position: "relative",
    zIndex: 0
  },
  ".cm-content": {
    margin: 0,
    flexGrow: 2,
    flexShrink: 0,
    display: "block",
    whiteSpace: "pre",
    wordWrap: "normal",
    boxSizing: "border-box",
    padding: "4px 0",
    outline: "none",
    "&[contenteditable=true]": {
      WebkitUserModify: "read-write-plaintext-only"
    }
  },
  ".cm-lineWrapping": {
    whiteSpace_fallback: "pre-wrap",
    whiteSpace: "break-spaces",
    wordBreak: "break-word",
    overflowWrap: "anywhere",
    flexShrink: 1
  },
  "&light .cm-content": { caretColor: "black" },
  "&dark .cm-content": { caretColor: "white" },
  ".cm-line": {
    display: "block",
    padding: "0 2px 0 6px"
  },
  ".cm-layer": {
    contain: "size style",
    "& > *": {
      position: "absolute"
    }
  },
  "&light .cm-selectionBackground": {
    background: "#d9d9d9"
  },
  "&dark .cm-selectionBackground": {
    background: "#222"
  },
  "&light.cm-focused .cm-selectionBackground": {
    background: "#d7d4f0"
  },
  "&dark.cm-focused .cm-selectionBackground": {
    background: "#233"
  },
  ".cm-cursorLayer": {
    pointerEvents: "none"
  },
  "&.cm-focused .cm-cursorLayer": {
    animation: "steps(1) cm-blink 1.2s infinite"
  },
  "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  ".cm-cursor, .cm-dropCursor": {
    borderLeft: "1.2px solid black",
    marginLeft: "-0.6px",
    pointerEvents: "none"
  },
  ".cm-cursor": {
    display: "none"
  },
  "&dark .cm-cursor": {
    borderLeftColor: "#444"
  },
  "&.cm-focused .cm-cursor": {
    display: "block"
  },
  "&light .cm-activeLine": { backgroundColor: "#cceeff44" },
  "&dark .cm-activeLine": { backgroundColor: "#99eeff33" },
  "&light .cm-specialChar": { color: "red" },
  "&dark .cm-specialChar": { color: "#f78" },
  ".cm-gutters": {
    flexShrink: 0,
    display: "flex",
    height: "100%",
    boxSizing: "border-box",
    left: 0,
    zIndex: 200
  },
  "&light .cm-gutters": {
    backgroundColor: "#f5f5f5",
    color: "#6c6c6c",
    borderRight: "1px solid #ddd"
  },
  "&dark .cm-gutters": {
    backgroundColor: "#333338",
    color: "#ccc"
  },
  ".cm-gutter": {
    display: "flex !important",
    flexDirection: "column",
    flexShrink: 0,
    boxSizing: "border-box",
    minHeight: "100%",
    overflow: "hidden"
  },
  ".cm-gutterElement": {
    boxSizing: "border-box"
  },
  ".cm-lineNumbers .cm-gutterElement": {
    padding: "0 3px 0 5px",
    minWidth: "20px",
    textAlign: "right",
    whiteSpace: "nowrap"
  },
  "&light .cm-activeLineGutter": {
    backgroundColor: "#e2f2ff"
  },
  "&dark .cm-activeLineGutter": {
    backgroundColor: "#222227"
  },
  ".cm-panels": {
    boxSizing: "border-box",
    position: "sticky",
    left: 0,
    right: 0
  },
  "&light .cm-panels": {
    backgroundColor: "#f5f5f5",
    color: "black"
  },
  "&light .cm-panels-top": {
    borderBottom: "1px solid #ddd"
  },
  "&light .cm-panels-bottom": {
    borderTop: "1px solid #ddd"
  },
  "&dark .cm-panels": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tab": {
    display: "inline-block",
    overflow: "hidden",
    verticalAlign: "bottom"
  },
  ".cm-widgetBuffer": {
    verticalAlign: "text-top",
    height: "1em",
    width: 0,
    display: "inline"
  },
  ".cm-placeholder": {
    color: "#888",
    display: "inline-block",
    verticalAlign: "top"
  },
  ".cm-highlightSpace:before": {
    content: "attr(data-display)",
    position: "absolute",
    pointerEvents: "none",
    color: "#888"
  },
  ".cm-highlightTab": {
    backgroundImage: `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,
    backgroundSize: "auto 100%",
    backgroundPosition: "right 90%",
    backgroundRepeat: "no-repeat"
  },
  ".cm-trailingSpace": {
    backgroundColor: "#ff332255"
  },
  ".cm-button": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    padding: ".2em 1em",
    borderRadius: "1px"
  },
  "&light .cm-button": {
    backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
    }
  },
  "&dark .cm-button": {
    backgroundImage: "linear-gradient(#393939, #111)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#111, #333)"
    }
  },
  ".cm-textfield": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    border: "1px solid silver",
    padding: ".2em .5em"
  },
  "&light .cm-textfield": {
    backgroundColor: "white"
  },
  "&dark .cm-textfield": {
    border: "1px solid #555",
    backgroundColor: "inherit"
  }
}, HS);
class rV {
  constructor(e, n, i, r) {
    this.typeOver = r, this.bounds = null, this.text = "";
    let { impreciseHead: o, impreciseAnchor: s } = e.docView;
    if (e.state.readOnly && n > -1)
      this.newSel = null;
    else if (n > -1 && (this.bounds = e.docView.domBoundsAround(n, i, 0))) {
      let l = o || s ? [] : sV(e), a = new TS(l, e.state);
      a.readRange(this.bounds.startDOM, this.bounds.endDOM), this.text = a.text, this.newSel = lV(l, this.bounds.from);
    } else {
      let l = e.observer.selectionRange, a = o && o.node == l.focusNode && o.offset == l.focusOffset || !Tl(e.contentDOM, l.focusNode) ? e.state.selection.main.head : e.docView.posFromDOM(l.focusNode, l.focusOffset), f = s && s.node == l.anchorNode && s.offset == l.anchorOffset || !Tl(e.contentDOM, l.anchorNode) ? e.state.selection.main.anchor : e.docView.posFromDOM(l.anchorNode, l.anchorOffset);
      this.newSel = _e.single(f, a);
    }
  }
}
function WS(t, e) {
  let n, { newSel: i } = e, r = t.state.selection.main;
  if (e.bounds) {
    let { from: o, to: s } = e.bounds, l = r.from, a = null;
    (t.inputState.lastKeyCode === 8 && t.inputState.lastKeyTime > Date.now() - 100 || Qe.android && e.text.length < s - o) && (l = r.to, a = "end");
    let f = oV(t.state.doc.sliceString(o, s, Do), e.text, l - o, a);
    f && (Qe.chrome && t.inputState.lastKeyCode == 13 && f.toB == f.from + 2 && e.text.slice(f.from, f.toB) == Do + Do && f.toB--, n = {
      from: o + f.from,
      to: o + f.toA,
      insert: Bt.of(e.text.slice(f.from, f.toB).split(Do))
    });
  } else
    i && (!t.hasFocus || !t.state.facet(Oh) || i.main.eq(r)) && (i = null);
  if (!n && !i)
    return !1;
  if (!n && e.typeOver && !r.empty && i && i.main.empty ? n = { from: r.from, to: r.to, insert: t.state.doc.slice(r.from, r.to) } : n && n.from >= r.from && n.to <= r.to && (n.from != r.from || n.to != r.to) && r.to - r.from - (n.to - n.from) <= 4 ? n = {
    from: r.from,
    to: r.to,
    insert: t.state.doc.slice(r.from, n.from).append(n.insert).append(t.state.doc.slice(n.to, r.to))
  } : (Qe.mac || Qe.android) && n && n.from == n.to && n.from == r.head - 1 && /^\. ?$/.test(n.insert.toString()) ? (i && n.insert.length == 2 && (i = _e.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: Bt.of([" "]) }) : Qe.chrome && n && n.from == n.to && n.from == r.head && n.insert.toString() == `
 ` && t.lineWrapping && (i && (i = _e.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: Bt.of([" "]) }), n) {
    let o = t.state;
    if (Qe.ios && t.inputState.flushIOSKey(t) || Qe.android && (n.from == r.from && n.to == r.to && n.insert.length == 1 && n.insert.lines == 2 && cl(t.contentDOM, "Enter", 13) || n.from == r.from - 1 && n.to == r.to && n.insert.length == 0 && cl(t.contentDOM, "Backspace", 8) || n.from == r.from && n.to == r.to + 1 && n.insert.length == 0 && cl(t.contentDOM, "Delete", 46)))
      return !0;
    let s = n.insert.toString();
    if (t.state.facet(yS).some((f) => f(t, n.from, n.to, s)))
      return !0;
    t.inputState.composing >= 0 && t.inputState.composing++;
    let l;
    if (n.from >= r.from && n.to <= r.to && n.to - n.from >= (r.to - r.from) / 3 && (!i || i.main.empty && i.main.from == n.from + n.insert.length) && t.inputState.composing < 0) {
      let f = r.from < n.from ? o.sliceDoc(r.from, n.from) : "", c = r.to > n.to ? o.sliceDoc(n.to, r.to) : "";
      l = o.replaceSelection(t.state.toText(f + n.insert.sliceString(0, void 0, t.state.lineBreak) + c));
    } else {
      let f = o.changes(n), c = i && !o.selection.main.eq(i.main) && i.main.to <= f.newLength ? i.main : void 0;
      if (o.selection.ranges.length > 1 && t.inputState.composing >= 0 && n.to <= r.to && n.to >= r.to - 10) {
        let u = t.state.sliceDoc(n.from, n.to), h = ES(t) || t.state.doc.lineAt(r.head), d = r.to - n.to, m = r.to - r.from;
        l = o.changeByRange((g) => {
          if (g.from == r.from && g.to == r.to)
            return { changes: f, range: c || g.map(f) };
          let _ = g.to - d, b = _ - u.length;
          if (g.to - g.from != m || t.state.sliceDoc(b, _) != u || h && g.to >= h.from && g.from <= h.to)
            return { range: g };
          let w = o.changes({ from: b, to: _, insert: n.insert }), v = g.to - r.to;
          return {
            changes: w,
            range: c ? _e.range(Math.max(0, c.anchor + v), Math.max(0, c.head + v)) : g.map(w)
          };
        });
      } else
        l = {
          changes: f,
          selection: c && o.selection.replaceRange(c)
        };
    }
    let a = "input.type";
    return t.composing && (a += ".compose", t.inputState.compositionFirstChange && (a += ".start", t.inputState.compositionFirstChange = !1)), t.dispatch(l, { scrollIntoView: !0, userEvent: a }), !0;
  } else if (i && !i.main.eq(r)) {
    let o = !1, s = "select";
    return t.inputState.lastSelectionTime > Date.now() - 50 && (t.inputState.lastSelectionOrigin == "select" && (o = !0), s = t.inputState.lastSelectionOrigin), t.dispatch({ selection: i, scrollIntoView: o, userEvent: s }), !0;
  } else
    return !1;
}
function oV(t, e, n, i) {
  let r = Math.min(t.length, e.length), o = 0;
  for (; o < r && t.charCodeAt(o) == e.charCodeAt(o); )
    o++;
  if (o == r && t.length == e.length)
    return null;
  let s = t.length, l = e.length;
  for (; s > 0 && l > 0 && t.charCodeAt(s - 1) == e.charCodeAt(l - 1); )
    s--, l--;
  if (i == "end") {
    let a = Math.max(0, o - Math.min(s, l));
    n -= s + a - o;
  }
  if (s < o && t.length < e.length) {
    let a = n <= o && n >= s ? o - n : 0;
    o -= a, l = o + (l - s), s = o;
  } else if (l < o) {
    let a = n <= o && n >= l ? o - n : 0;
    o -= a, s = o + (s - l), l = o;
  }
  return { from: o, toA: s, toB: l };
}
function sV(t) {
  let e = [];
  if (t.root.activeElement != t.contentDOM)
    return e;
  let { anchorNode: n, anchorOffset: i, focusNode: r, focusOffset: o } = t.observer.selectionRange;
  return n && (e.push(new W_(n, i)), (r != n || o != i) && e.push(new W_(r, o))), e;
}
function lV(t, e) {
  if (t.length == 0)
    return null;
  let n = t[0].pos, i = t.length == 2 ? t[1].pos : n;
  return n > -1 && i > -1 ? _e.single(n + e, i + e) : null;
}
const aV = {
  childList: !0,
  characterData: !0,
  subtree: !0,
  attributes: !0,
  characterDataOldValue: !0
}, Cd = Qe.ie && Qe.ie_version <= 11;
class fV {
  constructor(e) {
    this.view = e, this.active = !1, this.selectionRange = new nz(), this.selectionChanged = !1, this.delayedFlush = -1, this.resizeTimeout = -1, this.queue = [], this.delayedAndroidKey = null, this.flushingAndroidKey = -1, this.lastChange = 0, this.scrollTargets = [], this.intersection = null, this.resizeScroll = null, this.resizeContent = null, this.intersecting = !1, this.gapIntersection = null, this.gaps = [], this.parentCheck = -1, this.dom = e.contentDOM, this.observer = new MutationObserver((n) => {
      for (let i of n)
        this.queue.push(i);
      (Qe.ie && Qe.ie_version <= 11 || Qe.ios && e.composing) && n.some((i) => i.type == "childList" && i.removedNodes.length || i.type == "characterData" && i.oldValue.length > i.target.nodeValue.length) ? this.flushSoon() : this.flush();
    }), Cd && (this.onCharData = (n) => {
      this.queue.push({
        target: n.target,
        type: "characterData",
        oldValue: n.prevValue
      }), this.flushSoon();
    }), this.onSelectionChange = this.onSelectionChange.bind(this), this.onResize = this.onResize.bind(this), this.onPrint = this.onPrint.bind(this), this.onScroll = this.onScroll.bind(this), typeof ResizeObserver == "function" && (this.resizeScroll = new ResizeObserver(() => {
      var n;
      ((n = this.view.docView) === null || n === void 0 ? void 0 : n.lastUpdate) < Date.now() - 75 && this.onResize();
    }), this.resizeScroll.observe(e.scrollDOM), this.resizeContent = new ResizeObserver(() => this.view.requestMeasure()), this.resizeContent.observe(e.contentDOM)), this.addWindowListeners(this.win = e.win), this.start(), typeof IntersectionObserver == "function" && (this.intersection = new IntersectionObserver((n) => {
      this.parentCheck < 0 && (this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3)), n.length > 0 && n[n.length - 1].intersectionRatio > 0 != this.intersecting && (this.intersecting = !this.intersecting, this.intersecting != this.view.inView && this.onScrollChanged(document.createEvent("Event")));
    }, {}), this.intersection.observe(this.dom), this.gapIntersection = new IntersectionObserver((n) => {
      n.length > 0 && n[n.length - 1].intersectionRatio > 0 && this.onScrollChanged(document.createEvent("Event"));
    }, {})), this.listenForScroll(), this.readSelectionRange();
  }
  onScrollChanged(e) {
    this.view.inputState.runScrollHandlers(this.view, e), this.intersecting && this.view.measure();
  }
  onScroll(e) {
    this.intersecting && this.flush(!1), this.onScrollChanged(e);
  }
  onResize() {
    this.resizeTimeout < 0 && (this.resizeTimeout = setTimeout(() => {
      this.resizeTimeout = -1, this.view.requestMeasure();
    }, 50));
  }
  onPrint() {
    this.view.viewState.printing = !0, this.view.measure(), setTimeout(() => {
      this.view.viewState.printing = !1, this.view.requestMeasure();
    }, 500);
  }
  updateGaps(e) {
    if (this.gapIntersection && (e.length != this.gaps.length || this.gaps.some((n, i) => n != e[i]))) {
      this.gapIntersection.disconnect();
      for (let n of e)
        this.gapIntersection.observe(n);
      this.gaps = e;
    }
  }
  onSelectionChange(e) {
    let n = this.selectionChanged;
    if (!this.readSelectionRange() || this.delayedAndroidKey)
      return;
    let { view: i } = this, r = this.selectionRange;
    if (i.state.facet(Oh) ? i.root.activeElement != this.dom : !Mc(i.dom, r))
      return;
    let o = r.anchorNode && i.docView.nearest(r.anchorNode);
    if (o && o.ignoreEvent(e)) {
      n || (this.selectionChanged = !1);
      return;
    }
    (Qe.ie && Qe.ie_version <= 11 || Qe.android && Qe.chrome) && !i.state.selection.main.empty && r.focusNode && uu(r.focusNode, r.focusOffset, r.anchorNode, r.anchorOffset) ? this.flushSoon() : this.flush(!1);
  }
  readSelectionRange() {
    let { view: e } = this, n = Qe.safari && e.root.nodeType == 11 && Zx(this.dom.ownerDocument) == this.dom && cV(this.view) || cu(e.root);
    if (!n || this.selectionRange.eq(n))
      return !1;
    let i = Mc(this.dom, n);
    return i && !this.selectionChanged && e.inputState.lastFocusTime > Date.now() - 200 && e.inputState.lastTouchTime < Date.now() - 300 && rz(this.dom, n) ? (this.view.inputState.lastFocusTime = 0, e.docView.updateSelection(), !1) : (this.selectionRange.setRange(n), i && (this.selectionChanged = !0), !0);
  }
  setSelectionRange(e, n) {
    this.selectionRange.set(e.node, e.offset, n.node, n.offset), this.selectionChanged = !1;
  }
  clearSelectionRange() {
    this.selectionRange.set(null, 0, null, 0);
  }
  listenForScroll() {
    this.parentCheck = -1;
    let e = 0, n = null;
    for (let i = this.dom; i; )
      if (i.nodeType == 1)
        !n && e < this.scrollTargets.length && this.scrollTargets[e] == i ? e++ : n || (n = this.scrollTargets.slice(0, e)), n && n.push(i), i = i.assignedSlot || i.parentNode;
      else if (i.nodeType == 11)
        i = i.host;
      else
        break;
    if (e < this.scrollTargets.length && !n && (n = this.scrollTargets.slice(0, e)), n) {
      for (let i of this.scrollTargets)
        i.removeEventListener("scroll", this.onScroll);
      for (let i of this.scrollTargets = n)
        i.addEventListener("scroll", this.onScroll);
    }
  }
  ignore(e) {
    if (!this.active)
      return e();
    try {
      return this.stop(), e();
    } finally {
      this.start(), this.clear();
    }
  }
  start() {
    this.active || (this.observer.observe(this.dom, aV), Cd && this.dom.addEventListener("DOMCharacterDataModified", this.onCharData), this.active = !0);
  }
  stop() {
    this.active && (this.active = !1, this.observer.disconnect(), Cd && this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData));
  }
  clear() {
    this.processRecords(), this.queue.length = 0, this.selectionChanged = !1;
  }
  delayAndroidKey(e, n) {
    var i;
    if (!this.delayedAndroidKey) {
      let r = () => {
        let o = this.delayedAndroidKey;
        o && (this.clearDelayedAndroidKey(), !this.flush() && o.force && cl(this.dom, o.key, o.keyCode));
      };
      this.flushingAndroidKey = this.view.win.requestAnimationFrame(r);
    }
    (!this.delayedAndroidKey || e == "Enter") && (this.delayedAndroidKey = {
      key: e,
      keyCode: n,
      force: this.lastChange < Date.now() - 50 || !!(!((i = this.delayedAndroidKey) === null || i === void 0) && i.force)
    });
  }
  clearDelayedAndroidKey() {
    this.win.cancelAnimationFrame(this.flushingAndroidKey), this.delayedAndroidKey = null, this.flushingAndroidKey = -1;
  }
  flushSoon() {
    this.delayedFlush < 0 && (this.delayedFlush = this.view.win.requestAnimationFrame(() => {
      this.delayedFlush = -1, this.flush();
    }));
  }
  forceFlush() {
    this.delayedFlush >= 0 && (this.view.win.cancelAnimationFrame(this.delayedFlush), this.delayedFlush = -1), this.flush();
  }
  processRecords() {
    let e = this.queue;
    for (let o of this.observer.takeRecords())
      e.push(o);
    e.length && (this.queue = []);
    let n = -1, i = -1, r = !1;
    for (let o of e) {
      let s = this.readMutation(o);
      s && (s.typeOver && (r = !0), n == -1 ? { from: n, to: i } = s : (n = Math.min(s.from, n), i = Math.max(s.to, i)));
    }
    return { from: n, to: i, typeOver: r };
  }
  readChange() {
    let { from: e, to: n, typeOver: i } = this.processRecords(), r = this.selectionChanged && Mc(this.dom, this.selectionRange);
    return e < 0 && !r ? null : (e > -1 && (this.lastChange = Date.now()), this.view.inputState.lastFocusTime = 0, this.selectionChanged = !1, new rV(this.view, e, n, i));
  }
  flush(e = !0) {
    if (this.delayedFlush >= 0 || this.delayedAndroidKey)
      return !1;
    e && this.readSelectionRange();
    let n = this.readChange();
    if (!n)
      return !1;
    let i = this.view.state, r = WS(this.view, n);
    return this.view.state == i && this.view.update([]), r;
  }
  readMutation(e) {
    let n = this.view.docView.nearest(e.target);
    if (!n || n.ignoreMutation(e))
      return null;
    if (n.markDirty(e.type == "attributes"), e.type == "attributes" && (n.dirty |= 4), e.type == "childList") {
      let i = fy(n, e.previousSibling || e.target.previousSibling, -1), r = fy(n, e.nextSibling || e.target.nextSibling, 1);
      return {
        from: i ? n.posAfter(i) : n.posAtStart,
        to: r ? n.posBefore(r) : n.posAtEnd,
        typeOver: !1
      };
    } else
      return e.type == "characterData" ? { from: n.posAtStart, to: n.posAtEnd, typeOver: e.target.nodeValue == e.oldValue } : null;
  }
  setWindow(e) {
    e != this.win && (this.removeWindowListeners(this.win), this.win = e, this.addWindowListeners(this.win));
  }
  addWindowListeners(e) {
    e.addEventListener("resize", this.onResize), e.addEventListener("beforeprint", this.onPrint), e.addEventListener("scroll", this.onScroll), e.document.addEventListener("selectionchange", this.onSelectionChange);
  }
  removeWindowListeners(e) {
    e.removeEventListener("scroll", this.onScroll), e.removeEventListener("resize", this.onResize), e.removeEventListener("beforeprint", this.onPrint), e.document.removeEventListener("selectionchange", this.onSelectionChange);
  }
  destroy() {
    var e, n, i, r;
    this.stop(), (e = this.intersection) === null || e === void 0 || e.disconnect(), (n = this.gapIntersection) === null || n === void 0 || n.disconnect(), (i = this.resizeScroll) === null || i === void 0 || i.disconnect(), (r = this.resizeContent) === null || r === void 0 || r.disconnect();
    for (let o of this.scrollTargets)
      o.removeEventListener("scroll", this.onScroll);
    this.removeWindowListeners(this.win), clearTimeout(this.parentCheck), clearTimeout(this.resizeTimeout), this.win.cancelAnimationFrame(this.delayedFlush), this.win.cancelAnimationFrame(this.flushingAndroidKey);
  }
}
function fy(t, e, n) {
  for (; e; ) {
    let i = on.get(e);
    if (i && i.parent == t)
      return i;
    let r = e.parentNode;
    e = r != t.dom ? r : n > 0 ? e.nextSibling : e.previousSibling;
  }
  return null;
}
function cV(t) {
  let e = null;
  function n(a) {
    a.preventDefault(), a.stopImmediatePropagation(), e = a.getTargetRanges()[0];
  }
  if (t.contentDOM.addEventListener("beforeinput", n, !0), t.dom.ownerDocument.execCommand("indent"), t.contentDOM.removeEventListener("beforeinput", n, !0), !e)
    return null;
  let i = e.startContainer, r = e.startOffset, o = e.endContainer, s = e.endOffset, l = t.docView.domAtPos(t.state.selection.main.anchor);
  return uu(l.node, l.offset, o, s) && ([i, r, o, s] = [o, s, i, r]), { anchorNode: i, anchorOffset: r, focusNode: o, focusOffset: s };
}
class Ke {
  constructor(e = {}) {
    this.plugins = [], this.pluginMap = /* @__PURE__ */ new Map(), this.editorAttrs = {}, this.contentAttrs = {}, this.bidiCache = [], this.destroyed = !1, this.updateState = 2, this.measureScheduled = -1, this.measureRequests = [], this.contentDOM = document.createElement("div"), this.scrollDOM = document.createElement("div"), this.scrollDOM.tabIndex = -1, this.scrollDOM.className = "cm-scroller", this.scrollDOM.appendChild(this.contentDOM), this.announceDOM = document.createElement("div"), this.announceDOM.style.cssText = "position: fixed; top: -10000px", this.announceDOM.setAttribute("aria-live", "polite"), this.dom = document.createElement("div"), this.dom.appendChild(this.announceDOM), this.dom.appendChild(this.scrollDOM), this._dispatch = e.dispatch || ((n) => this.update([n])), this.dispatch = this.dispatch.bind(this), this._root = e.root || iz(e.parent) || document, this.viewState = new ly(e.state || Mt.create(e)), this.plugins = this.state.facet(la).map((n) => new yd(n));
    for (let n of this.plugins)
      n.update(this);
    this.observer = new fV(this), this.inputState = new Iz(this), this.inputState.ensureHandlers(this, this.plugins), this.docView = new U_(this), this.mountStyles(), this.updateAttrs(), this.updateState = 0, this.requestMeasure(), e.parent && e.parent.appendChild(this.dom);
  }
  get state() {
    return this.viewState.state;
  }
  get viewport() {
    return this.viewState.viewport;
  }
  get visibleRanges() {
    return this.viewState.visibleRanges;
  }
  get inView() {
    return this.viewState.inView;
  }
  get composing() {
    return this.inputState.composing > 0;
  }
  get compositionStarted() {
    return this.inputState.composing >= 0;
  }
  get root() {
    return this._root;
  }
  get win() {
    return this.dom.ownerDocument.defaultView || window;
  }
  dispatch(...e) {
    this._dispatch(e.length == 1 && e[0] instanceof Wn ? e[0] : this.state.update(...e));
  }
  update(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
    let n = !1, i = !1, r, o = this.state;
    for (let f of e) {
      if (f.startState != o)
        throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
      o = f.state;
    }
    if (this.destroyed) {
      this.viewState.state = o;
      return;
    }
    let s = this.observer.delayedAndroidKey, l = null;
    if (s ? (this.observer.clearDelayedAndroidKey(), l = this.observer.readChange(), (l && !this.state.doc.eq(o.doc) || !this.state.selection.eq(o.selection)) && (l = null)) : this.observer.clear(), o.facet(Mt.phrases) != this.state.facet(Mt.phrases))
      return this.setState(o);
    r = mu.create(this, o, e);
    let a = this.viewState.scrollTarget;
    try {
      this.updateState = 2;
      for (let f of e) {
        if (a && (a = a.map(f.changes)), f.scrollIntoView) {
          let { main: c } = f.state.selection;
          a = new du(c.empty ? c : _e.cursor(c.head, c.head > c.anchor ? -1 : 1));
        }
        for (let c of f.effects)
          c.is(F_) && (a = c.value);
      }
      this.viewState.update(r, a), this.bidiCache = pu.update(this.bidiCache, r.changes), r.empty || (this.updatePlugins(r), this.inputState.update(r)), n = this.docView.update(r), this.state.facet(aa) != this.styleModules && this.mountStyles(), i = this.updateAttrs(), this.showAnnouncements(e), this.docView.updateSelection(n, e.some((f) => f.isUserEvent("select.pointer")));
    } finally {
      this.updateState = 0;
    }
    if (r.startState.facet(Yf) != r.state.facet(Yf) && (this.viewState.mustMeasureContent = !0), (n || i || a || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent) && this.requestMeasure(), !r.empty)
      for (let f of this.state.facet(Jm))
        f(r);
    l && !WS(this, l) && s.force && cl(this.contentDOM, s.key, s.keyCode);
  }
  setState(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
    if (this.destroyed) {
      this.viewState.state = e;
      return;
    }
    this.updateState = 2;
    let n = this.hasFocus;
    try {
      for (let i of this.plugins)
        i.destroy(this);
      this.viewState = new ly(e), this.plugins = e.facet(la).map((i) => new yd(i)), this.pluginMap.clear();
      for (let i of this.plugins)
        i.update(this);
      this.docView = new U_(this), this.inputState.ensureHandlers(this, this.plugins), this.mountStyles(), this.updateAttrs(), this.bidiCache = [];
    } finally {
      this.updateState = 0;
    }
    n && this.focus(), this.requestMeasure();
  }
  updatePlugins(e) {
    let n = e.startState.facet(la), i = e.state.facet(la);
    if (n != i) {
      let r = [];
      for (let o of i) {
        let s = n.indexOf(o);
        if (s < 0)
          r.push(new yd(o));
        else {
          let l = this.plugins[s];
          l.mustUpdate = e, r.push(l);
        }
      }
      for (let o of this.plugins)
        o.mustUpdate != e && o.destroy(this);
      this.plugins = r, this.pluginMap.clear(), this.inputState.ensureHandlers(this, this.plugins);
    } else
      for (let r of this.plugins)
        r.mustUpdate = e;
    for (let r = 0; r < this.plugins.length; r++)
      this.plugins[r].update(this);
  }
  measure(e = !0) {
    if (this.destroyed)
      return;
    this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.measureScheduled = 0, e && this.observer.forceFlush();
    let n = null, { scrollHeight: i, scrollTop: r, clientHeight: o } = this.scrollDOM, s = r > i - o - 4 ? i : r;
    try {
      for (let l = 0; ; l++) {
        this.updateState = 1;
        let a = this.viewport, f = this.viewState.lineBlockAtHeight(s), c = this.viewState.measure(this);
        if (!c && !this.measureRequests.length && this.viewState.scrollTarget == null)
          break;
        if (l > 5) {
          console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
          break;
        }
        let u = [];
        c & 4 || ([this.measureRequests, u] = [u, this.measureRequests]);
        let h = u.map((_) => {
          try {
            return _.read(this);
          } catch (b) {
            return xi(this.state, b), cy;
          }
        }), d = mu.create(this, this.state, []), m = !1, g = !1;
        d.flags |= c, n ? n.flags |= c : n = d, this.updateState = 2, d.empty || (this.updatePlugins(d), this.inputState.update(d), this.updateAttrs(), m = this.docView.update(d));
        for (let _ = 0; _ < u.length; _++)
          if (h[_] != cy)
            try {
              let b = u[_];
              b.write && b.write(h[_], this);
            } catch (b) {
              xi(this.state, b);
            }
        if (this.viewState.editorHeight)
          if (this.viewState.scrollTarget)
            this.docView.scrollIntoView(this.viewState.scrollTarget), this.viewState.scrollTarget = null, g = !0;
          else {
            let _ = this.viewState.lineBlockAt(f.from).top - f.top;
            (_ > 1 || _ < -1) && (this.scrollDOM.scrollTop += _, g = !0);
          }
        if (m && this.docView.updateSelection(!0), this.viewport.from == a.from && this.viewport.to == a.to && !g && this.measureRequests.length == 0)
          break;
      }
    } finally {
      this.updateState = 0, this.measureScheduled = -1;
    }
    if (n && !n.empty)
      for (let l of this.state.facet(Jm))
        l(n);
  }
  get themeClasses() {
    return $m + " " + (this.state.facet(Zm) ? FS : VS) + " " + this.state.facet(Yf);
  }
  updateAttrs() {
    let e = uy(this, kS, {
      class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
    }), n = {
      spellcheck: "false",
      autocorrect: "off",
      autocapitalize: "off",
      translate: "no",
      contenteditable: this.state.facet(Oh) ? "true" : "false",
      class: "cm-content",
      style: `${Qe.tabSize}: ${this.state.tabSize}`,
      role: "textbox",
      "aria-multiline": "true"
    };
    this.state.readOnly && (n["aria-readonly"] = "true"), uy(this, Sg, n);
    let i = this.observer.ignore(() => {
      let r = Um(this.contentDOM, this.contentAttrs, n), o = Um(this.dom, this.editorAttrs, e);
      return r || o;
    });
    return this.editorAttrs = e, this.contentAttrs = n, i;
  }
  showAnnouncements(e) {
    let n = !0;
    for (let i of e)
      for (let r of i.effects)
        if (r.is(Ke.announce)) {
          n && (this.announceDOM.textContent = ""), n = !1;
          let o = this.announceDOM.appendChild(document.createElement("div"));
          o.textContent = r.value;
        }
  }
  mountStyles() {
    this.styleModules = this.state.facet(aa), Xo.mount(this.root, this.styleModules.concat(iV).reverse());
  }
  readMeasured() {
    if (this.updateState == 2)
      throw new Error("Reading the editor layout isn't allowed during an update");
    this.updateState == 0 && this.measureScheduled > -1 && this.measure(!1);
  }
  requestMeasure(e) {
    if (this.measureScheduled < 0 && (this.measureScheduled = this.win.requestAnimationFrame(() => this.measure())), e) {
      if (e.key != null) {
        for (let n = 0; n < this.measureRequests.length; n++)
          if (this.measureRequests[n].key === e.key) {
            this.measureRequests[n] = e;
            return;
          }
      }
      this.measureRequests.push(e);
    }
  }
  plugin(e) {
    let n = this.pluginMap.get(e);
    return (n === void 0 || n && n.spec != e) && this.pluginMap.set(e, n = this.plugins.find((i) => i.spec == e) || null), n && n.update(this).value;
  }
  get documentTop() {
    return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
  }
  get documentPadding() {
    return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };
  }
  elementAtHeight(e) {
    return this.readMeasured(), this.viewState.elementAtHeight(e);
  }
  lineBlockAtHeight(e) {
    return this.readMeasured(), this.viewState.lineBlockAtHeight(e);
  }
  get viewportLineBlocks() {
    return this.viewState.viewportLines;
  }
  lineBlockAt(e) {
    return this.viewState.lineBlockAt(e);
  }
  get contentHeight() {
    return this.viewState.contentHeight;
  }
  moveByChar(e, n, i) {
    return vd(this, e, Q_(this, e, n, i));
  }
  moveByGroup(e, n) {
    return vd(this, e, Q_(this, e, n, (i) => Pz(this, e.head, i)));
  }
  moveToLineBoundary(e, n, i = !0) {
    return Ez(this, e, n, i);
  }
  moveVertically(e, n, i) {
    return vd(this, e, Rz(this, e, n, i));
  }
  domAtPos(e) {
    return this.docView.domAtPos(e);
  }
  posAtDOM(e, n = 0) {
    return this.docView.posFromDOM(e, n);
  }
  posAtCoords(e, n = !0) {
    return this.readMeasured(), RS(this, e, n);
  }
  coordsAtPos(e, n = 1) {
    this.readMeasured();
    let i = this.docView.coordsAt(e, n);
    if (!i || i.left == i.right)
      return i;
    let r = this.state.doc.lineAt(e), o = this.bidiSpans(r), s = o[ul.find(o, e - r.from, -1, n)];
    return wg(i, s.dir == gn.LTR == n > 0);
  }
  get defaultCharacterWidth() {
    return this.viewState.heightOracle.charWidth;
  }
  get defaultLineHeight() {
    return this.viewState.heightOracle.lineHeight;
  }
  get textDirection() {
    return this.viewState.defaultTextDirection;
  }
  textDirectionAt(e) {
    return !this.state.facet(wS) || e < this.viewport.from || e > this.viewport.to ? this.textDirection : (this.readMeasured(), this.docView.textDirectionAt(e));
  }
  get lineWrapping() {
    return this.viewState.heightOracle.lineWrapping;
  }
  bidiSpans(e) {
    if (e.length > uV)
      return AS(e.length);
    let n = this.textDirectionAt(e.from);
    for (let r of this.bidiCache)
      if (r.from == e.from && r.dir == n)
        return r.order;
    let i = pz(e.text, n);
    return this.bidiCache.push(new pu(e.from, e.to, n, i)), i;
  }
  get hasFocus() {
    var e;
    return (this.dom.ownerDocument.hasFocus() || Qe.safari && ((e = this.inputState) === null || e === void 0 ? void 0 : e.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;
  }
  focus() {
    this.observer.ignore(() => {
      nS(this.contentDOM), this.docView.updateSelection();
    });
  }
  setRoot(e) {
    this._root != e && (this._root = e, this.observer.setWindow((e.nodeType == 9 ? e : e.ownerDocument).defaultView || window), this.mountStyles());
  }
  destroy() {
    for (let e of this.plugins)
      e.destroy(this);
    this.plugins = [], this.inputState.destroy(), this.dom.remove(), this.observer.destroy(), this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.destroyed = !0;
  }
  static scrollIntoView(e, n = {}) {
    return F_.of(new du(typeof e == "number" ? _e.cursor(e) : e, n.y, n.x, n.yMargin, n.xMargin));
  }
  static domEventHandlers(e) {
    return Bn.define(() => ({}), { eventHandlers: e });
  }
  static theme(e, n) {
    let i = Xo.newName(), r = [Yf.of(i), aa.of(ep(`.${i}`, e))];
    return n && n.dark && r.push(Zm.of(!0)), r;
  }
  static baseTheme(e) {
    return Jl.lowest(aa.of(ep("." + $m, e, HS)));
  }
  static findFromDOM(e) {
    var n;
    let i = e.querySelector(".cm-content"), r = i && on.get(i) || on.get(e);
    return ((n = r == null ? void 0 : r.rootView) === null || n === void 0 ? void 0 : n.view) || null;
  }
}
Ke.styleModule = aa;
Ke.inputHandler = yS;
Ke.perLineTextDirection = wS;
Ke.exceptionSink = _S;
Ke.updateListener = Jm;
Ke.editable = Oh;
Ke.mouseSelectionStyle = bS;
Ke.dragMovesSelection = gS;
Ke.clickAddsSelectionRange = pS;
Ke.decorations = Ja;
Ke.atomicRanges = CS;
Ke.scrollMargins = SS;
Ke.darkTheme = Zm;
Ke.contentAttributes = Sg;
Ke.editorAttributes = kS;
Ke.lineWrapping = /* @__PURE__ */ Ke.contentAttributes.of({ class: "cm-lineWrapping" });
Ke.announce = /* @__PURE__ */ _t.define();
const uV = 4096, cy = {};
class pu {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.dir = i, this.order = r;
  }
  static update(e, n) {
    if (n.empty)
      return e;
    let i = [], r = e.length ? e[e.length - 1].dir : gn.LTR;
    for (let o = Math.max(0, e.length - 10); o < e.length; o++) {
      let s = e[o];
      s.dir == r && !n.touchesRange(s.from, s.to) && i.push(new pu(n.mapPos(s.from, 1), n.mapPos(s.to, -1), s.dir, s.order));
    }
    return i;
  }
}
function uy(t, e, n) {
  for (let i = t.state.facet(e), r = i.length - 1; r >= 0; r--) {
    let o = i[r], s = typeof o == "function" ? o(t) : o;
    s && Wm(s, n);
  }
  return n;
}
const hV = Qe.mac ? "mac" : Qe.windows ? "win" : Qe.linux ? "linux" : "key";
function dV(t, e) {
  const n = t.split(/-(?!$)/);
  let i = n[n.length - 1];
  i == "Space" && (i = " ");
  let r, o, s, l;
  for (let a = 0; a < n.length - 1; ++a) {
    const f = n[a];
    if (/^(cmd|meta|m)$/i.test(f))
      l = !0;
    else if (/^a(lt)?$/i.test(f))
      r = !0;
    else if (/^(c|ctrl|control)$/i.test(f))
      o = !0;
    else if (/^s(hift)?$/i.test(f))
      s = !0;
    else if (/^mod$/i.test(f))
      e == "mac" ? l = !0 : o = !0;
    else
      throw new Error("Unrecognized modifier name: " + f);
  }
  return r && (i = "Alt-" + i), o && (i = "Ctrl-" + i), l && (i = "Meta-" + i), s && (i = "Shift-" + i), i;
}
function Zf(t, e, n) {
  return e.altKey && (t = "Alt-" + t), e.ctrlKey && (t = "Ctrl-" + t), e.metaKey && (t = "Meta-" + t), n !== !1 && e.shiftKey && (t = "Shift-" + t), t;
}
const mV = /* @__PURE__ */ Jl.default(/* @__PURE__ */ Ke.domEventHandlers({
  keydown(t, e) {
    return qS(US(e.state), t, e, "editor");
  }
})), Th = /* @__PURE__ */ Ge.define({ enables: mV }), hy = /* @__PURE__ */ new WeakMap();
function US(t) {
  let e = t.facet(Th), n = hy.get(e);
  return n || hy.set(e, n = bV(e.reduce((i, r) => i.concat(r), []))), n;
}
function pV(t, e, n) {
  return qS(US(t.state), e, t, n);
}
let Po = null;
const gV = 4e3;
function bV(t, e = hV) {
  let n = /* @__PURE__ */ Object.create(null), i = /* @__PURE__ */ Object.create(null), r = (s, l) => {
    let a = i[s];
    if (a == null)
      i[s] = l;
    else if (a != l)
      throw new Error("Key binding " + s + " is used both as a regular binding and as a multi-stroke prefix");
  }, o = (s, l, a, f) => {
    var c, u;
    let h = n[s] || (n[s] = /* @__PURE__ */ Object.create(null)), d = l.split(/ (?!$)/).map((_) => dV(_, e));
    for (let _ = 1; _ < d.length; _++) {
      let b = d.slice(0, _).join(" ");
      r(b, !0), h[b] || (h[b] = {
        preventDefault: !0,
        run: [(w) => {
          let v = Po = { view: w, prefix: b, scope: s };
          return setTimeout(() => {
            Po == v && (Po = null);
          }, gV), !0;
        }]
      });
    }
    let m = d.join(" ");
    r(m, !1);
    let g = h[m] || (h[m] = { preventDefault: !1, run: ((u = (c = h._any) === null || c === void 0 ? void 0 : c.run) === null || u === void 0 ? void 0 : u.slice()) || [] });
    a && g.run.push(a), f && (g.preventDefault = !0);
  };
  for (let s of t) {
    let l = s.scope ? s.scope.split(" ") : ["editor"];
    if (s.any)
      for (let f of l) {
        let c = n[f] || (n[f] = /* @__PURE__ */ Object.create(null));
        c._any || (c._any = { preventDefault: !1, run: [] });
        for (let u in c)
          c[u].run.push(s.any);
      }
    let a = s[e] || s.key;
    if (a)
      for (let f of l)
        o(f, a, s.run, s.preventDefault), s.shift && o(f, "Shift-" + a, s.shift, s.preventDefault);
  }
  return n;
}
function qS(t, e, n, i) {
  let r = Yx(e), o = ii(r, 0), s = ji(o) == r.length && r != " ", l = "", a = !1;
  Po && Po.view == n && Po.scope == i && (l = Po.prefix + " ", (a = NS.indexOf(e.keyCode) < 0) && (Po = null));
  let f = /* @__PURE__ */ new Set(), c = (m) => {
    if (m) {
      for (let g of m.run)
        if (!f.has(g) && (f.add(g), g(n, e)))
          return !0;
      m.preventDefault && (a = !0);
    }
    return !1;
  }, u = t[i], h, d;
  if (u) {
    if (c(u[l + Zf(r, e, !s)]))
      return !0;
    if (s && (e.altKey || e.metaKey || e.ctrlKey) && (h = Qo[e.keyCode]) && h != r) {
      if (c(u[l + Zf(h, e, !0)]))
        return !0;
      if (e.shiftKey && (d = Wa[e.keyCode]) != r && d != h && c(u[l + Zf(d, e, !1)]))
        return !0;
    } else if (s && e.shiftKey && c(u[l + Zf(r, e, !0)]))
      return !0;
    if (c(u._any))
      return !0;
  }
  return a;
}
class _f {
  constructor(e, n, i, r, o) {
    this.className = e, this.left = n, this.top = i, this.width = r, this.height = o;
  }
  draw() {
    let e = document.createElement("div");
    return e.className = this.className, this.adjust(e), e;
  }
  update(e, n) {
    return n.className != this.className ? !1 : (this.adjust(e), !0);
  }
  adjust(e) {
    e.style.left = this.left + "px", e.style.top = this.top + "px", this.width != null && (e.style.width = this.width + "px"), e.style.height = this.height + "px";
  }
  eq(e) {
    return this.left == e.left && this.top == e.top && this.width == e.width && this.height == e.height && this.className == e.className;
  }
  static forRange(e, n, i) {
    if (i.empty) {
      let r = e.coordsAtPos(i.head, i.assoc || 1);
      if (!r)
        return [];
      let o = JS(e);
      return [new _f(n, r.left - o.left, r.top - o.top, null, r.bottom - r.top)];
    } else
      return _V(e, n, i);
  }
}
function JS(t) {
  let e = t.scrollDOM.getBoundingClientRect();
  return { left: (t.textDirection == gn.LTR ? e.left : e.right - t.scrollDOM.clientWidth) - t.scrollDOM.scrollLeft, top: e.top - t.scrollDOM.scrollTop };
}
function dy(t, e, n) {
  let i = _e.cursor(e);
  return {
    from: Math.max(n.from, t.moveToLineBoundary(i, !1, !0).from),
    to: Math.min(n.to, t.moveToLineBoundary(i, !0, !0).from),
    type: Yt.Text
  };
}
function my(t, e) {
  let n = t.lineBlockAt(e);
  if (Array.isArray(n.type)) {
    for (let i of n.type)
      if (i.to > e || i.to == e && (i.to == n.to || i.type == Yt.Text))
        return i;
  }
  return n;
}
function _V(t, e, n) {
  if (n.to <= t.viewport.from || n.from >= t.viewport.to)
    return [];
  let i = Math.max(n.from, t.viewport.from), r = Math.min(n.to, t.viewport.to), o = t.textDirection == gn.LTR, s = t.contentDOM, l = s.getBoundingClientRect(), a = JS(t), f = window.getComputedStyle(s.firstChild), c = l.left + parseInt(f.paddingLeft) + Math.min(0, parseInt(f.textIndent)), u = l.right - parseInt(f.paddingRight), h = my(t, i), d = my(t, r), m = h.type == Yt.Text ? h : null, g = d.type == Yt.Text ? d : null;
  if (t.lineWrapping && (m && (m = dy(t, i, m)), g && (g = dy(t, r, g))), m && g && m.from == g.from)
    return b(w(n.from, n.to, m));
  {
    let M = m ? w(n.from, null, m) : v(h, !1), S = g ? w(null, n.to, g) : v(d, !0), R = [];
    return (m || h).to < (g || d).from - 1 ? R.push(_(c, M.bottom, u, S.top)) : M.bottom < S.top && t.elementAtHeight((M.bottom + S.top) / 2).type == Yt.Text && (M.bottom = S.top = (M.bottom + S.top) / 2), b(M).concat(R).concat(b(S));
  }
  function _(M, S, R, k) {
    return new _f(e, M - a.left, S - a.top - 0.01, R - M, k - S + 0.01);
  }
  function b({ top: M, bottom: S, horizontal: R }) {
    let k = [];
    for (let I = 0; I < R.length; I += 2)
      k.push(_(R[I], M, R[I + 1], S));
    return k;
  }
  function w(M, S, R) {
    let k = 1e9, I = -1e9, L = [];
    function V(U, O, x, A, H) {
      let D = t.coordsAtPos(U, U == R.to ? -2 : 2), P = t.coordsAtPos(x, x == R.from ? 2 : -2);
      k = Math.min(D.top, P.top, k), I = Math.max(D.bottom, P.bottom, I), H == gn.LTR ? L.push(o && O ? c : D.left, o && A ? u : P.right) : L.push(!o && A ? c : P.left, !o && O ? u : D.right);
    }
    let N = M ?? R.from, W = S ?? R.to;
    for (let U of t.visibleRanges)
      if (U.to > N && U.from < W)
        for (let O = Math.max(U.from, N), x = Math.min(U.to, W); ; ) {
          let A = t.state.doc.lineAt(O);
          for (let H of t.bidiSpans(A)) {
            let D = H.from + A.from, P = H.to + A.from;
            if (D >= x)
              break;
            P > O && V(Math.max(D, O), M == null && D <= N, Math.min(P, x), S == null && P >= W, H.dir);
          }
          if (O = A.to + 1, O >= x)
            break;
        }
    return L.length == 0 && V(N, M == null, W, S == null, t.textDirection), { top: k, bottom: I, horizontal: L };
  }
  function v(M, S) {
    let R = l.top + (S ? M.top : M.bottom);
    return { top: R, bottom: R, horizontal: [] };
  }
}
function yV(t, e) {
  return t.constructor == e.constructor && t.eq(e);
}
class wV {
  constructor(e, n) {
    this.view = e, this.layer = n, this.drawn = [], this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) }, this.dom = e.scrollDOM.appendChild(document.createElement("div")), this.dom.classList.add("cm-layer"), n.above && this.dom.classList.add("cm-layer-above"), n.class && this.dom.classList.add(n.class), this.dom.setAttribute("aria-hidden", "true"), this.setOrder(e.state), e.requestMeasure(this.measureReq), n.mount && n.mount(this.dom, e);
  }
  update(e) {
    e.startState.facet(Oc) != e.state.facet(Oc) && this.setOrder(e.state), (this.layer.update(e, this.dom) || e.geometryChanged) && e.view.requestMeasure(this.measureReq);
  }
  setOrder(e) {
    let n = 0, i = e.facet(Oc);
    for (; n < i.length && i[n] != this.layer; )
      n++;
    this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - n);
  }
  measure() {
    return this.layer.markers(this.view);
  }
  draw(e) {
    if (e.length != this.drawn.length || e.some((n, i) => !yV(n, this.drawn[i]))) {
      let n = this.dom.firstChild, i = 0;
      for (let r of e)
        r.update && n && r.constructor && this.drawn[i].constructor && r.update(n, this.drawn[i]) ? (n = n.nextSibling, i++) : this.dom.insertBefore(r.draw(), n);
      for (; n; ) {
        let r = n.nextSibling;
        n.remove(), n = r;
      }
      this.drawn = e;
    }
  }
  destroy() {
    this.layer.destroy && this.layer.destroy(this.dom, this.view), this.dom.remove();
  }
}
const Oc = /* @__PURE__ */ Ge.define();
function KS(t) {
  return [
    Bn.define((e) => new wV(e, t)),
    Oc.of(t)
  ];
}
const GS = !Qe.ios, Ka = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      cursorBlinkRate: 1200,
      drawRangeCursor: !0
    }, {
      cursorBlinkRate: (e, n) => Math.min(e, n),
      drawRangeCursor: (e, n) => e || n
    });
  }
});
function vV(t = {}) {
  return [
    Ka.of(t),
    kV,
    CV,
    SV,
    vS.of(!0)
  ];
}
function XS(t) {
  return t.startState.facet(Ka) != t.startState.facet(Ka);
}
const kV = /* @__PURE__ */ KS({
  above: !0,
  markers(t) {
    let { state: e } = t, n = e.facet(Ka), i = [];
    for (let r of e.selection.ranges) {
      let o = r == e.selection.main;
      if (r.empty ? !o || GS : n.drawRangeCursor) {
        let s = o ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary", l = r.empty ? r : _e.cursor(r.head, r.head > r.anchor ? -1 : 1);
        for (let a of _f.forRange(t, s, l))
          i.push(a);
      }
    }
    return i;
  },
  update(t, e) {
    t.transactions.some((i) => i.scrollIntoView) && (e.style.animationName = e.style.animationName == "cm-blink" ? "cm-blink2" : "cm-blink");
    let n = XS(t);
    return n && py(t.state, e), t.docChanged || t.selectionSet || n;
  },
  mount(t, e) {
    py(e.state, t);
  },
  class: "cm-cursorLayer"
});
function py(t, e) {
  e.style.animationDuration = t.facet(Ka).cursorBlinkRate + "ms";
}
const CV = /* @__PURE__ */ KS({
  above: !1,
  markers(t) {
    return t.state.selection.ranges.map((e) => e.empty ? [] : _f.forRange(t, "cm-selectionBackground", e)).reduce((e, n) => e.concat(n));
  },
  update(t, e) {
    return t.docChanged || t.selectionSet || t.viewportChanged || XS(t);
  },
  class: "cm-selectionLayer"
}), QS = {
  ".cm-line": {
    "& ::selection": { backgroundColor: "transparent !important" },
    "&::selection": { backgroundColor: "transparent !important" }
  }
};
GS && (QS[".cm-line"].caretColor = "transparent !important");
const SV = /* @__PURE__ */ Jl.highest(/* @__PURE__ */ Ke.theme(QS)), YS = /* @__PURE__ */ _t.define({
  map(t, e) {
    return t == null ? null : e.mapPos(t);
  }
}), ca = /* @__PURE__ */ qn.define({
  create() {
    return null;
  },
  update(t, e) {
    return t != null && (t = e.changes.mapPos(t)), e.effects.reduce((n, i) => i.is(YS) ? i.value : n, t);
  }
}), MV = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.cursor = null, this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };
  }
  update(t) {
    var e;
    let n = t.state.field(ca);
    n == null ? this.cursor != null && ((e = this.cursor) === null || e === void 0 || e.remove(), this.cursor = null) : (this.cursor || (this.cursor = this.view.scrollDOM.appendChild(document.createElement("div")), this.cursor.className = "cm-dropCursor"), (t.startState.field(ca) != n || t.docChanged || t.geometryChanged) && this.view.requestMeasure(this.measureReq));
  }
  readPos() {
    let t = this.view.state.field(ca), e = t != null && this.view.coordsAtPos(t);
    if (!e)
      return null;
    let n = this.view.scrollDOM.getBoundingClientRect();
    return {
      left: e.left - n.left + this.view.scrollDOM.scrollLeft,
      top: e.top - n.top + this.view.scrollDOM.scrollTop,
      height: e.bottom - e.top
    };
  }
  drawCursor(t) {
    this.cursor && (t ? (this.cursor.style.left = t.left + "px", this.cursor.style.top = t.top + "px", this.cursor.style.height = t.height + "px") : this.cursor.style.left = "-100000px");
  }
  destroy() {
    this.cursor && this.cursor.remove();
  }
  setDropPos(t) {
    this.view.state.field(ca) != t && this.view.dispatch({ effects: YS.of(t) });
  }
}, {
  eventHandlers: {
    dragover(t) {
      this.setDropPos(this.view.posAtCoords({ x: t.clientX, y: t.clientY }));
    },
    dragleave(t) {
      (t.target == this.view.contentDOM || !this.view.contentDOM.contains(t.relatedTarget)) && this.setDropPos(null);
    },
    dragend() {
      this.setDropPos(null);
    },
    drop() {
      this.setDropPos(null);
    }
  }
});
function AV() {
  return [ca, MV];
}
function gy(t, e, n, i, r) {
  e.lastIndex = 0;
  for (let o = t.iterRange(n, i), s = n, l; !o.next().done; s += o.value.length)
    if (!o.lineBreak)
      for (; l = e.exec(o.value); )
        r(s + l.index, l);
}
function OV(t, e) {
  let n = t.visibleRanges;
  if (n.length == 1 && n[0].from == t.viewport.from && n[0].to == t.viewport.to)
    return n;
  let i = [];
  for (let { from: r, to: o } of n)
    r = Math.max(t.state.doc.lineAt(r).from, r - e), o = Math.min(t.state.doc.lineAt(o).to, o + e), i.length && i[i.length - 1].to >= r ? i[i.length - 1].to = o : i.push({ from: r, to: o });
  return i;
}
class TV {
  constructor(e) {
    const { regexp: n, decoration: i, decorate: r, boundary: o, maxLength: s = 1e3 } = e;
    if (!n.global)
      throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");
    if (this.regexp = n, r)
      this.addMatch = (l, a, f, c) => r(c, f, f + l[0].length, l, a);
    else if (typeof i == "function")
      this.addMatch = (l, a, f, c) => {
        let u = i(l, a, f);
        u && c(f, f + l[0].length, u);
      };
    else if (i)
      this.addMatch = (l, a, f, c) => c(f, f + l[0].length, i);
    else
      throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");
    this.boundary = o, this.maxLength = s;
  }
  createDeco(e) {
    let n = new Go(), i = n.add.bind(n);
    for (let { from: r, to: o } of OV(e, this.maxLength))
      gy(e.state.doc, this.regexp, r, o, (s, l) => this.addMatch(l, e, s, i));
    return n.finish();
  }
  updateDeco(e, n) {
    let i = 1e9, r = -1;
    return e.docChanged && e.changes.iterChanges((o, s, l, a) => {
      a > e.view.viewport.from && l < e.view.viewport.to && (i = Math.min(l, i), r = Math.max(a, r));
    }), e.viewportChanged || r - i > 1e3 ? this.createDeco(e.view) : r > -1 ? this.updateRange(e.view, n.map(e.changes), i, r) : n;
  }
  updateRange(e, n, i, r) {
    for (let o of e.visibleRanges) {
      let s = Math.max(o.from, i), l = Math.min(o.to, r);
      if (l > s) {
        let a = e.state.doc.lineAt(s), f = a.to < l ? e.state.doc.lineAt(l) : a, c = Math.max(o.from, a.from), u = Math.min(o.to, f.to);
        if (this.boundary) {
          for (; s > a.from; s--)
            if (this.boundary.test(a.text[s - 1 - a.from])) {
              c = s;
              break;
            }
          for (; l < f.to; l++)
            if (this.boundary.test(f.text[l - f.from])) {
              u = l;
              break;
            }
        }
        let h = [], d, m = (g, _, b) => h.push(b.range(g, _));
        if (a == f)
          for (this.regexp.lastIndex = c - a.from; (d = this.regexp.exec(a.text)) && d.index < u - a.from; )
            this.addMatch(d, e, d.index + a.from, m);
        else
          gy(e.state.doc, this.regexp, c, u, (g, _) => this.addMatch(_, e, g, m));
        n = n.update({ filterFrom: c, filterTo: u, filter: (g, _) => g < c || _ > u, add: h });
      }
    }
    return n;
  }
}
const tp = /x/.unicode != null ? "gu" : "g", EV = /* @__PURE__ */ new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`, tp), PV = {
  0: "null",
  7: "bell",
  8: "backspace",
  10: "newline",
  11: "vertical tab",
  13: "carriage return",
  27: "escape",
  8203: "zero width space",
  8204: "zero width non-joiner",
  8205: "zero width joiner",
  8206: "left-to-right mark",
  8207: "right-to-left mark",
  8232: "line separator",
  8237: "left-to-right override",
  8238: "right-to-left override",
  8294: "left-to-right isolate",
  8295: "right-to-left isolate",
  8297: "pop directional isolate",
  8233: "paragraph separator",
  65279: "zero width no-break space",
  65532: "object replacement"
};
let Sd = null;
function RV() {
  var t;
  if (Sd == null && typeof document < "u" && document.body) {
    let e = document.body.style;
    Sd = ((t = e.tabSize) !== null && t !== void 0 ? t : e.MozTabSize) != null;
  }
  return Sd || !1;
}
const Tc = /* @__PURE__ */ Ge.define({
  combine(t) {
    let e = yr(t, {
      render: null,
      specialChars: EV,
      addSpecialChars: null
    });
    return (e.replaceTabs = !RV()) && (e.specialChars = new RegExp("	|" + e.specialChars.source, tp)), e.addSpecialChars && (e.specialChars = new RegExp(e.specialChars.source + "|" + e.addSpecialChars.source, tp)), e;
  }
});
function IV(t = {}) {
  return [Tc.of(t), NV()];
}
let by = null;
function NV() {
  return by || (by = Bn.fromClass(class {
    constructor(t) {
      this.view = t, this.decorations = ot.none, this.decorationCache = /* @__PURE__ */ Object.create(null), this.decorator = this.makeDecorator(t.state.facet(Tc)), this.decorations = this.decorator.createDeco(t);
    }
    makeDecorator(t) {
      return new TV({
        regexp: t.specialChars,
        decoration: (e, n, i) => {
          let { doc: r } = n.state, o = ii(e[0], 0);
          if (o == 9) {
            let s = r.lineAt(i), l = n.state.tabSize, a = gf(s.text, l, i - s.from);
            return ot.replace({ widget: new LV((l - a % l) * this.view.defaultCharacterWidth) });
          }
          return this.decorationCache[o] || (this.decorationCache[o] = ot.replace({ widget: new BV(t, o) }));
        },
        boundary: t.replaceTabs ? void 0 : /[^]/
      });
    }
    update(t) {
      let e = t.state.facet(Tc);
      t.startState.facet(Tc) != e ? (this.decorator = this.makeDecorator(e), this.decorations = this.decorator.createDeco(t.view)) : this.decorations = this.decorator.updateDeco(t, this.decorations);
    }
  }, {
    decorations: (t) => t.decorations
  }));
}
const DV = "•";
function jV(t) {
  return t >= 32 ? DV : t == 10 ? "␤" : String.fromCharCode(9216 + t);
}
class BV extends rs {
  constructor(e, n) {
    super(), this.options = e, this.code = n;
  }
  eq(e) {
    return e.code == this.code;
  }
  toDOM(e) {
    let n = jV(this.code), i = e.state.phrase("Control character") + " " + (PV[this.code] || "0x" + this.code.toString(16)), r = this.options.render && this.options.render(this.code, i, n);
    if (r)
      return r;
    let o = document.createElement("span");
    return o.textContent = n, o.title = i, o.setAttribute("aria-label", i), o.className = "cm-specialChar", o;
  }
  ignoreEvent() {
    return !1;
  }
}
class LV extends rs {
  constructor(e) {
    super(), this.width = e;
  }
  eq(e) {
    return e.width == this.width;
  }
  toDOM() {
    let e = document.createElement("span");
    return e.textContent = "	", e.className = "cm-tab", e.style.width = this.width + "px", e;
  }
  ignoreEvent() {
    return !1;
  }
}
function xV() {
  return VV;
}
const zV = /* @__PURE__ */ ot.line({ class: "cm-activeLine" }), VV = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.docChanged || t.selectionSet) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = -1, n = [];
    for (let i of t.state.selection.ranges) {
      let r = t.lineBlockAt(i.head);
      r.from > e && (n.push(zV.range(r.from)), e = r.from);
    }
    return ot.set(n);
  }
}, {
  decorations: (t) => t.decorations
}), np = 2e3;
function FV(t, e, n) {
  let i = Math.min(e.line, n.line), r = Math.max(e.line, n.line), o = [];
  if (e.off > np || n.off > np || e.col < 0 || n.col < 0) {
    let s = Math.min(e.off, n.off), l = Math.max(e.off, n.off);
    for (let a = i; a <= r; a++) {
      let f = t.doc.line(a);
      f.length <= l && o.push(_e.range(f.from + s, f.to + l));
    }
  } else {
    let s = Math.min(e.col, n.col), l = Math.max(e.col, n.col);
    for (let a = i; a <= r; a++) {
      let f = t.doc.line(a), c = jm(f.text, s, t.tabSize, !0);
      if (c < 0)
        o.push(_e.cursor(f.to));
      else {
        let u = jm(f.text, l, t.tabSize);
        o.push(_e.range(f.from + c, f.from + u));
      }
    }
  }
  return o;
}
function HV(t, e) {
  let n = t.coordsAtPos(t.viewport.from);
  return n ? Math.round(Math.abs((n.left - e) / t.defaultCharacterWidth)) : -1;
}
function _y(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1), i = t.state.doc.lineAt(n), r = n - i.from, o = r > np ? -1 : r == i.length ? HV(t, e.clientX) : gf(i.text, t.state.tabSize, n - i.from);
  return { line: i.number, col: o, off: r };
}
function WV(t, e) {
  let n = _y(t, e), i = t.state.selection;
  return n ? {
    update(r) {
      if (r.docChanged) {
        let o = r.changes.mapPos(r.startState.doc.line(n.line).from), s = r.state.doc.lineAt(o);
        n = { line: s.number, col: n.col, off: Math.min(n.off, s.length) }, i = i.map(r.changes);
      }
    },
    get(r, o, s) {
      let l = _y(t, r);
      if (!l)
        return i;
      let a = FV(t.state, n, l);
      return a.length ? s ? _e.create(a.concat(i.ranges)) : _e.create(a) : i;
    }
  } : null;
}
function UV(t) {
  let e = (t == null ? void 0 : t.eventFilter) || ((n) => n.altKey && n.button == 0);
  return Ke.mouseSelectionStyle.of((n, i) => e(i) ? WV(n, i) : null);
}
const qV = {
  Alt: [18, (t) => t.altKey],
  Control: [17, (t) => t.ctrlKey],
  Shift: [16, (t) => t.shiftKey],
  Meta: [91, (t) => t.metaKey]
}, JV = { style: "cursor: crosshair" };
function KV(t = {}) {
  let [e, n] = qV[t.key || "Alt"], i = Bn.fromClass(class {
    constructor(r) {
      this.view = r, this.isDown = !1;
    }
    set(r) {
      this.isDown != r && (this.isDown = r, this.view.update([]));
    }
  }, {
    eventHandlers: {
      keydown(r) {
        this.set(r.keyCode == e || n(r));
      },
      keyup(r) {
        (r.keyCode == e || !n(r)) && this.set(!1);
      },
      mousemove(r) {
        this.set(n(r));
      }
    }
  });
  return [
    i,
    Ke.contentAttributes.of((r) => {
      var o;
      return !((o = r.plugin(i)) === null || o === void 0) && o.isDown ? JV : null;
    })
  ];
}
const $f = "-10000px";
class ZS {
  constructor(e, n, i) {
    this.facet = n, this.createTooltipView = i, this.input = e.state.facet(n), this.tooltips = this.input.filter((r) => r), this.tooltipViews = this.tooltips.map(i);
  }
  update(e) {
    var n;
    let i = e.state.facet(this.facet), r = i.filter((s) => s);
    if (i === this.input) {
      for (let s of this.tooltipViews)
        s.update && s.update(e);
      return !1;
    }
    let o = [];
    for (let s = 0; s < r.length; s++) {
      let l = r[s], a = -1;
      if (l) {
        for (let f = 0; f < this.tooltips.length; f++) {
          let c = this.tooltips[f];
          c && c.create == l.create && (a = f);
        }
        if (a < 0)
          o[s] = this.createTooltipView(l);
        else {
          let f = o[s] = this.tooltipViews[a];
          f.update && f.update(e);
        }
      }
    }
    for (let s of this.tooltipViews)
      o.indexOf(s) < 0 && (s.dom.remove(), (n = s.destroy) === null || n === void 0 || n.call(s));
    return this.input = i, this.tooltips = r, this.tooltipViews = o, !0;
  }
}
function GV(t) {
  let { win: e } = t;
  return { top: 0, left: 0, bottom: e.innerHeight, right: e.innerWidth };
}
const Md = /* @__PURE__ */ Ge.define({
  combine: (t) => {
    var e, n, i;
    return {
      position: Qe.ios ? "absolute" : ((e = t.find((r) => r.position)) === null || e === void 0 ? void 0 : e.position) || "fixed",
      parent: ((n = t.find((r) => r.parent)) === null || n === void 0 ? void 0 : n.parent) || null,
      tooltipSpace: ((i = t.find((r) => r.tooltipSpace)) === null || i === void 0 ? void 0 : i.tooltipSpace) || GV
    };
  }
}), $S = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.inView = !0, this.lastTransaction = 0, this.measureTimeout = -1;
    let e = t.state.facet(Md);
    this.position = e.position, this.parent = e.parent, this.classes = t.themeClasses, this.createContainer(), this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this }, this.manager = new ZS(t, Eh, (n) => this.createTooltip(n)), this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((n) => {
      Date.now() > this.lastTransaction - 50 && n.length > 0 && n[n.length - 1].intersectionRatio < 1 && this.measureSoon();
    }, { threshold: [1] }) : null, this.observeIntersection(), t.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this)), this.maybeMeasure();
  }
  createContainer() {
    this.parent ? (this.container = document.createElement("div"), this.container.style.position = "relative", this.container.className = this.view.themeClasses, this.parent.appendChild(this.container)) : this.container = this.view.dom;
  }
  observeIntersection() {
    if (this.intersectionObserver) {
      this.intersectionObserver.disconnect();
      for (let t of this.manager.tooltipViews)
        this.intersectionObserver.observe(t.dom);
    }
  }
  measureSoon() {
    this.measureTimeout < 0 && (this.measureTimeout = setTimeout(() => {
      this.measureTimeout = -1, this.maybeMeasure();
    }, 50));
  }
  update(t) {
    t.transactions.length && (this.lastTransaction = Date.now());
    let e = this.manager.update(t);
    e && this.observeIntersection();
    let n = e || t.geometryChanged, i = t.state.facet(Md);
    if (i.position != this.position) {
      this.position = i.position;
      for (let r of this.manager.tooltipViews)
        r.dom.style.position = this.position;
      n = !0;
    }
    if (i.parent != this.parent) {
      this.parent && this.container.remove(), this.parent = i.parent, this.createContainer();
      for (let r of this.manager.tooltipViews)
        this.container.appendChild(r.dom);
      n = !0;
    } else
      this.parent && this.view.themeClasses != this.classes && (this.classes = this.container.className = this.view.themeClasses);
    n && this.maybeMeasure();
  }
  createTooltip(t) {
    let e = t.create(this.view);
    if (e.dom.classList.add("cm-tooltip"), t.arrow && !e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
      let n = document.createElement("div");
      n.className = "cm-tooltip-arrow", e.dom.appendChild(n);
    }
    return e.dom.style.position = this.position, e.dom.style.top = $f, this.container.appendChild(e.dom), e.mount && e.mount(this.view), e;
  }
  destroy() {
    var t, e;
    this.view.win.removeEventListener("resize", this.measureSoon);
    for (let n of this.manager.tooltipViews)
      n.dom.remove(), (t = n.destroy) === null || t === void 0 || t.call(n);
    (e = this.intersectionObserver) === null || e === void 0 || e.disconnect(), clearTimeout(this.measureTimeout);
  }
  readMeasure() {
    let t = this.view.dom.getBoundingClientRect();
    return {
      editor: t,
      parent: this.parent ? this.container.getBoundingClientRect() : t,
      pos: this.manager.tooltips.map((e, n) => {
        let i = this.manager.tooltipViews[n];
        return i.getCoords ? i.getCoords(e.pos) : this.view.coordsAtPos(e.pos);
      }),
      size: this.manager.tooltipViews.map(({ dom: e }) => e.getBoundingClientRect()),
      space: this.view.state.facet(Md).tooltipSpace(this.view)
    };
  }
  writeMeasure(t) {
    let { editor: e, space: n } = t, i = [];
    for (let r = 0; r < this.manager.tooltips.length; r++) {
      let o = this.manager.tooltips[r], s = this.manager.tooltipViews[r], { dom: l } = s, a = t.pos[r], f = t.size[r];
      if (!a || a.bottom <= Math.max(e.top, n.top) || a.top >= Math.min(e.bottom, n.bottom) || a.right < Math.max(e.left, n.left) - 0.1 || a.left > Math.min(e.right, n.right) + 0.1) {
        l.style.top = $f;
        continue;
      }
      let c = o.arrow ? s.dom.querySelector(".cm-tooltip-arrow") : null, u = c ? 7 : 0, h = f.right - f.left, d = f.bottom - f.top, m = s.offset || QV, g = this.view.textDirection == gn.LTR, _ = f.width > n.right - n.left ? g ? n.left : n.right - f.width : g ? Math.min(a.left - (c ? 14 : 0) + m.x, n.right - h) : Math.max(n.left, a.left - h + (c ? 14 : 0) - m.x), b = !!o.above;
      !o.strictSide && (b ? a.top - (f.bottom - f.top) - m.y < n.top : a.bottom + (f.bottom - f.top) + m.y > n.bottom) && b == n.bottom - a.bottom > a.top - n.top && (b = !b);
      let w = (b ? a.top - n.top : n.bottom - a.bottom) - u;
      if (w < d && s.resize !== !1) {
        if (w < this.view.defaultLineHeight) {
          l.style.top = $f;
          continue;
        }
        l.style.height = (d = w) + "px";
      } else
        l.style.height && (l.style.height = "");
      let v = b ? a.top - d - u - m.y : a.bottom + u + m.y, M = _ + h;
      if (s.overlap !== !0)
        for (let S of i)
          S.left < M && S.right > _ && S.top < v + d && S.bottom > v && (v = b ? S.top - d - 2 - u : S.bottom + u + 2);
      this.position == "absolute" ? (l.style.top = v - t.parent.top + "px", l.style.left = _ - t.parent.left + "px") : (l.style.top = v + "px", l.style.left = _ + "px"), c && (c.style.left = `${a.left + (g ? m.x : -m.x) - (_ + 14 - 7)}px`), s.overlap !== !0 && i.push({ left: _, top: v, right: M, bottom: v + d }), l.classList.toggle("cm-tooltip-above", b), l.classList.toggle("cm-tooltip-below", !b), s.positioned && s.positioned(t.space);
    }
  }
  maybeMeasure() {
    if (this.manager.tooltips.length && (this.view.inView && this.view.requestMeasure(this.measureReq), this.inView != this.view.inView && (this.inView = this.view.inView, !this.inView)))
      for (let t of this.manager.tooltipViews)
        t.dom.style.top = $f;
  }
}, {
  eventHandlers: {
    scroll() {
      this.maybeMeasure();
    }
  }
}), XV = /* @__PURE__ */ Ke.baseTheme({
  ".cm-tooltip": {
    zIndex: 100,
    boxSizing: "border-box"
  },
  "&light .cm-tooltip": {
    border: "1px solid #bbb",
    backgroundColor: "#f5f5f5"
  },
  "&light .cm-tooltip-section:not(:first-child)": {
    borderTop: "1px solid #bbb"
  },
  "&dark .cm-tooltip": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tooltip-arrow": {
    height: `${7}px`,
    width: `${7 * 2}px`,
    position: "absolute",
    zIndex: -1,
    overflow: "hidden",
    "&:before, &:after": {
      content: "''",
      position: "absolute",
      width: 0,
      height: 0,
      borderLeft: `${7}px solid transparent`,
      borderRight: `${7}px solid transparent`
    },
    ".cm-tooltip-above &": {
      bottom: `-${7}px`,
      "&:before": {
        borderTop: `${7}px solid #bbb`
      },
      "&:after": {
        borderTop: `${7}px solid #f5f5f5`,
        bottom: "1px"
      }
    },
    ".cm-tooltip-below &": {
      top: `-${7}px`,
      "&:before": {
        borderBottom: `${7}px solid #bbb`
      },
      "&:after": {
        borderBottom: `${7}px solid #f5f5f5`,
        top: "1px"
      }
    }
  },
  "&dark .cm-tooltip .cm-tooltip-arrow": {
    "&:before": {
      borderTopColor: "#333338",
      borderBottomColor: "#333338"
    },
    "&:after": {
      borderTopColor: "transparent",
      borderBottomColor: "transparent"
    }
  }
}), QV = { x: 0, y: 0 }, Eh = /* @__PURE__ */ Ge.define({
  enables: [$S, XV]
}), gu = /* @__PURE__ */ Ge.define();
class Ag {
  constructor(e) {
    this.view = e, this.mounted = !1, this.dom = document.createElement("div"), this.dom.classList.add("cm-tooltip-hover"), this.manager = new ZS(e, gu, (n) => this.createHostedView(n));
  }
  static create(e) {
    return new Ag(e);
  }
  createHostedView(e) {
    let n = e.create(this.view);
    return n.dom.classList.add("cm-tooltip-section"), this.dom.appendChild(n.dom), this.mounted && n.mount && n.mount(this.view), n;
  }
  mount(e) {
    for (let n of this.manager.tooltipViews)
      n.mount && n.mount(e);
    this.mounted = !0;
  }
  positioned(e) {
    for (let n of this.manager.tooltipViews)
      n.positioned && n.positioned(e);
  }
  update(e) {
    this.manager.update(e);
  }
}
const YV = /* @__PURE__ */ Eh.compute([gu], (t) => {
  let e = t.facet(gu).filter((n) => n);
  return e.length === 0 ? null : {
    pos: Math.min(...e.map((n) => n.pos)),
    end: Math.max(...e.filter((n) => n.end != null).map((n) => n.end)),
    create: Ag.create,
    above: e[0].above,
    arrow: e.some((n) => n.arrow)
  };
});
class ZV {
  constructor(e, n, i, r, o) {
    this.view = e, this.source = n, this.field = i, this.setHover = r, this.hoverTime = o, this.hoverTimeout = -1, this.restartTimeout = -1, this.pending = null, this.lastMove = { x: 0, y: 0, target: e.dom, time: 0 }, this.checkHover = this.checkHover.bind(this), e.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this)), e.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));
  }
  update() {
    this.pending && (this.pending = null, clearTimeout(this.restartTimeout), this.restartTimeout = setTimeout(() => this.startHover(), 20));
  }
  get active() {
    return this.view.state.field(this.field);
  }
  checkHover() {
    if (this.hoverTimeout = -1, this.active)
      return;
    let e = Date.now() - this.lastMove.time;
    e < this.hoverTime ? this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - e) : this.startHover();
  }
  startHover() {
    clearTimeout(this.restartTimeout);
    let { lastMove: e } = this, n = this.view.contentDOM.contains(e.target) ? this.view.posAtCoords(e) : null;
    if (n == null)
      return;
    let i = this.view.coordsAtPos(n);
    if (i == null || e.y < i.top || e.y > i.bottom || e.x < i.left - this.view.defaultCharacterWidth || e.x > i.right + this.view.defaultCharacterWidth)
      return;
    let r = this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((l) => l.from <= n && l.to >= n), o = r && r.dir == gn.RTL ? -1 : 1, s = this.source(this.view, n, e.x < i.left ? -o : o);
    if (s != null && s.then) {
      let l = this.pending = { pos: n };
      s.then((a) => {
        this.pending == l && (this.pending = null, a && this.view.dispatch({ effects: this.setHover.of(a) }));
      }, (a) => xi(this.view.state, a, "hover tooltip"));
    } else
      s && this.view.dispatch({ effects: this.setHover.of(s) });
  }
  mousemove(e) {
    var n;
    this.lastMove = { x: e.clientX, y: e.clientY, target: e.target, time: Date.now() }, this.hoverTimeout < 0 && (this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime));
    let i = this.active;
    if (i && !yy(this.lastMove.target) || this.pending) {
      let { pos: r } = i || this.pending, o = (n = i == null ? void 0 : i.end) !== null && n !== void 0 ? n : r;
      (r == o ? this.view.posAtCoords(this.lastMove) != r : !$V(this.view, r, o, e.clientX, e.clientY, 6)) && (this.view.dispatch({ effects: this.setHover.of(null) }), this.pending = null);
    }
  }
  mouseleave(e) {
    clearTimeout(this.hoverTimeout), this.hoverTimeout = -1, this.active && !yy(e.relatedTarget) && this.view.dispatch({ effects: this.setHover.of(null) });
  }
  destroy() {
    clearTimeout(this.hoverTimeout), this.view.dom.removeEventListener("mouseleave", this.mouseleave), this.view.dom.removeEventListener("mousemove", this.mousemove);
  }
}
function yy(t) {
  for (let e = t; e; e = e.parentNode)
    if (e.nodeType == 1 && e.classList.contains("cm-tooltip"))
      return !0;
  return !1;
}
function $V(t, e, n, i, r, o) {
  let s = document.createRange(), l = t.domAtPos(e), a = t.domAtPos(n);
  s.setEnd(a.node, a.offset), s.setStart(l.node, l.offset);
  let f = s.getClientRects();
  s.detach();
  for (let c = 0; c < f.length; c++) {
    let u = f[c];
    if (Math.max(u.top - r, r - u.bottom, u.left - i, i - u.right) <= o)
      return !0;
  }
  return !1;
}
function eF(t, e = {}) {
  let n = _t.define(), i = qn.define({
    create() {
      return null;
    },
    update(r, o) {
      if (r && (e.hideOnChange && (o.docChanged || o.selection) || e.hideOn && e.hideOn(o, r)))
        return null;
      if (r && o.docChanged) {
        let s = o.changes.mapPos(r.pos, -1, di.TrackDel);
        if (s == null)
          return null;
        let l = Object.assign(/* @__PURE__ */ Object.create(null), r);
        l.pos = s, r.end != null && (l.end = o.changes.mapPos(r.end)), r = l;
      }
      for (let s of o.effects)
        s.is(n) && (r = s.value), s.is(nF) && (r = null);
      return r;
    },
    provide: (r) => gu.from(r)
  });
  return [
    i,
    Bn.define((r) => new ZV(r, t, i, n, e.hoverTime || 300)),
    YV
  ];
}
function tF(t, e) {
  let n = t.plugin($S);
  if (!n)
    return null;
  let i = n.manager.tooltips.indexOf(e);
  return i < 0 ? null : n.manager.tooltipViews[i];
}
const nF = /* @__PURE__ */ _t.define(), wy = /* @__PURE__ */ Ge.define({
  combine(t) {
    let e, n;
    for (let i of t)
      e = e || i.topContainer, n = n || i.bottomContainer;
    return { topContainer: e, bottomContainer: n };
  }
});
function Ga(t, e) {
  let n = t.plugin(e4), i = n ? n.specs.indexOf(e) : -1;
  return i > -1 ? n.panels[i] : null;
}
const e4 = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.input = t.state.facet(Xa), this.specs = this.input.filter((n) => n), this.panels = this.specs.map((n) => n(t));
    let e = t.state.facet(wy);
    this.top = new ec(t, !0, e.topContainer), this.bottom = new ec(t, !1, e.bottomContainer), this.top.sync(this.panels.filter((n) => n.top)), this.bottom.sync(this.panels.filter((n) => !n.top));
    for (let n of this.panels)
      n.dom.classList.add("cm-panel"), n.mount && n.mount();
  }
  update(t) {
    let e = t.state.facet(wy);
    this.top.container != e.topContainer && (this.top.sync([]), this.top = new ec(t.view, !0, e.topContainer)), this.bottom.container != e.bottomContainer && (this.bottom.sync([]), this.bottom = new ec(t.view, !1, e.bottomContainer)), this.top.syncClasses(), this.bottom.syncClasses();
    let n = t.state.facet(Xa);
    if (n != this.input) {
      let i = n.filter((a) => a), r = [], o = [], s = [], l = [];
      for (let a of i) {
        let f = this.specs.indexOf(a), c;
        f < 0 ? (c = a(t.view), l.push(c)) : (c = this.panels[f], c.update && c.update(t)), r.push(c), (c.top ? o : s).push(c);
      }
      this.specs = i, this.panels = r, this.top.sync(o), this.bottom.sync(s);
      for (let a of l)
        a.dom.classList.add("cm-panel"), a.mount && a.mount();
    } else
      for (let i of this.panels)
        i.update && i.update(t);
  }
  destroy() {
    this.top.sync([]), this.bottom.sync([]);
  }
}, {
  provide: (t) => Ke.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return n && { top: n.top.scrollMargin(), bottom: n.bottom.scrollMargin() };
  })
});
class ec {
  constructor(e, n, i) {
    this.view = e, this.top = n, this.container = i, this.dom = void 0, this.classes = "", this.panels = [], this.syncClasses();
  }
  sync(e) {
    for (let n of this.panels)
      n.destroy && e.indexOf(n) < 0 && n.destroy();
    this.panels = e, this.syncDOM();
  }
  syncDOM() {
    if (this.panels.length == 0) {
      this.dom && (this.dom.remove(), this.dom = void 0);
      return;
    }
    if (!this.dom) {
      this.dom = document.createElement("div"), this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom", this.dom.style[this.top ? "top" : "bottom"] = "0";
      let n = this.container || this.view.dom;
      n.insertBefore(this.dom, this.top ? n.firstChild : null);
    }
    let e = this.dom.firstChild;
    for (let n of this.panels)
      if (n.dom.parentNode == this.dom) {
        for (; e != n.dom; )
          e = vy(e);
        e = e.nextSibling;
      } else
        this.dom.insertBefore(n.dom, e);
    for (; e; )
      e = vy(e);
  }
  scrollMargin() {
    return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);
  }
  syncClasses() {
    if (!(!this.container || this.classes == this.view.themeClasses)) {
      for (let e of this.classes.split(" "))
        e && this.container.classList.remove(e);
      for (let e of (this.classes = this.view.themeClasses).split(" "))
        e && this.container.classList.add(e);
    }
  }
}
function vy(t) {
  let e = t.nextSibling;
  return t.remove(), e;
}
const Xa = /* @__PURE__ */ Ge.define({
  enables: e4
});
class Yr extends Ns {
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  eq(e) {
    return !1;
  }
  destroy(e) {
  }
}
Yr.prototype.elementClass = "";
Yr.prototype.toDOM = void 0;
Yr.prototype.mapMode = di.TrackBefore;
Yr.prototype.startSide = Yr.prototype.endSide = -1;
Yr.prototype.point = !0;
const Ec = /* @__PURE__ */ Ge.define(), iF = {
  class: "",
  renderEmptyElements: !1,
  elementStyle: "",
  markers: () => Lt.empty,
  lineMarker: () => null,
  lineMarkerChange: null,
  initialSpacer: null,
  updateSpacer: null,
  domEventHandlers: {}
}, ka = /* @__PURE__ */ Ge.define();
function t4(t) {
  return [n4(), ka.of(Object.assign(Object.assign({}, iF), t))];
}
const ip = /* @__PURE__ */ Ge.define({
  combine: (t) => t.some((e) => e)
});
function n4(t) {
  let e = [
    rF
  ];
  return t && t.fixed === !1 && e.push(ip.of(!0)), e;
}
const rF = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.prevViewport = t.viewport, this.dom = document.createElement("div"), this.dom.className = "cm-gutters", this.dom.setAttribute("aria-hidden", "true"), this.dom.style.minHeight = this.view.contentHeight + "px", this.gutters = t.state.facet(ka).map((e) => new Cy(t, e));
    for (let e of this.gutters)
      this.dom.appendChild(e.dom);
    this.fixed = !t.state.facet(ip), this.fixed && (this.dom.style.position = "sticky"), this.syncGutters(!1), t.scrollDOM.insertBefore(this.dom, t.contentDOM);
  }
  update(t) {
    if (this.updateGutters(t)) {
      let e = this.prevViewport, n = t.view.viewport, i = Math.min(e.to, n.to) - Math.max(e.from, n.from);
      this.syncGutters(i < (n.to - n.from) * 0.8);
    }
    t.geometryChanged && (this.dom.style.minHeight = this.view.contentHeight + "px"), this.view.state.facet(ip) != !this.fixed && (this.fixed = !this.fixed, this.dom.style.position = this.fixed ? "sticky" : ""), this.prevViewport = t.view.viewport;
  }
  syncGutters(t) {
    let e = this.dom.nextSibling;
    t && this.dom.remove();
    let n = Lt.iter(this.view.state.facet(Ec), this.view.viewport.from), i = [], r = this.gutters.map((o) => new oF(o, this.view.viewport, -this.view.documentPadding.top));
    for (let o of this.view.viewportLineBlocks) {
      let s;
      if (Array.isArray(o.type)) {
        for (let l of o.type)
          if (l.type == Yt.Text) {
            s = l;
            break;
          }
      } else
        s = o.type == Yt.Text ? o : void 0;
      if (s) {
        i.length && (i = []), i4(n, i, o.from);
        for (let l of r)
          l.line(this.view, s, i);
      }
    }
    for (let o of r)
      o.finish();
    t && this.view.scrollDOM.insertBefore(this.dom, e);
  }
  updateGutters(t) {
    let e = t.startState.facet(ka), n = t.state.facet(ka), i = t.docChanged || t.heightChanged || t.viewportChanged || !Lt.eq(t.startState.facet(Ec), t.state.facet(Ec), t.view.viewport.from, t.view.viewport.to);
    if (e == n)
      for (let r of this.gutters)
        r.update(t) && (i = !0);
    else {
      i = !0;
      let r = [];
      for (let o of n) {
        let s = e.indexOf(o);
        s < 0 ? r.push(new Cy(this.view, o)) : (this.gutters[s].update(t), r.push(this.gutters[s]));
      }
      for (let o of this.gutters)
        o.dom.remove(), r.indexOf(o) < 0 && o.destroy();
      for (let o of r)
        this.dom.appendChild(o.dom);
      this.gutters = r;
    }
    return i;
  }
  destroy() {
    for (let t of this.gutters)
      t.destroy();
    this.dom.remove();
  }
}, {
  provide: (t) => Ke.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return !n || n.gutters.length == 0 || !n.fixed ? null : e.textDirection == gn.LTR ? { left: n.dom.offsetWidth } : { right: n.dom.offsetWidth };
  })
});
function ky(t) {
  return Array.isArray(t) ? t : [t];
}
function i4(t, e, n) {
  for (; t.value && t.from <= n; )
    t.from == n && e.push(t.value), t.next();
}
class oF {
  constructor(e, n, i) {
    this.gutter = e, this.height = i, this.localMarkers = [], this.i = 0, this.cursor = Lt.iter(e.markers, n.from);
  }
  line(e, n, i) {
    this.localMarkers.length && (this.localMarkers = []), i4(this.cursor, this.localMarkers, n.from);
    let r = i.length ? this.localMarkers.concat(i) : this.localMarkers, o = this.gutter.config.lineMarker(e, n, r);
    o && r.unshift(o);
    let s = this.gutter;
    if (r.length == 0 && !s.config.renderEmptyElements)
      return;
    let l = n.top - this.height;
    if (this.i == s.elements.length) {
      let a = new r4(e, n.height, l, r);
      s.elements.push(a), s.dom.appendChild(a.dom);
    } else
      s.elements[this.i].update(e, n.height, l, r);
    this.height = n.bottom, this.i++;
  }
  finish() {
    let e = this.gutter;
    for (; e.elements.length > this.i; ) {
      let n = e.elements.pop();
      e.dom.removeChild(n.dom), n.destroy();
    }
  }
}
class Cy {
  constructor(e, n) {
    this.view = e, this.config = n, this.elements = [], this.spacer = null, this.dom = document.createElement("div"), this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
    for (let i in n.domEventHandlers)
      this.dom.addEventListener(i, (r) => {
        let o = e.lineBlockAtHeight(r.clientY - e.documentTop);
        n.domEventHandlers[i](e, o, r) && r.preventDefault();
      });
    this.markers = ky(n.markers(e)), n.initialSpacer && (this.spacer = new r4(e, 0, 0, [n.initialSpacer(e)]), this.dom.appendChild(this.spacer.dom), this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none");
  }
  update(e) {
    let n = this.markers;
    if (this.markers = ky(this.config.markers(e.view)), this.spacer && this.config.updateSpacer) {
      let r = this.config.updateSpacer(this.spacer.markers[0], e);
      r != this.spacer.markers[0] && this.spacer.update(e.view, 0, 0, [r]);
    }
    let i = e.view.viewport;
    return !Lt.eq(this.markers, n, i.from, i.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(e) : !1);
  }
  destroy() {
    for (let e of this.elements)
      e.destroy();
  }
}
class r4 {
  constructor(e, n, i, r) {
    this.height = -1, this.above = 0, this.markers = [], this.dom = document.createElement("div"), this.dom.className = "cm-gutterElement", this.update(e, n, i, r);
  }
  update(e, n, i, r) {
    this.height != n && (this.dom.style.height = (this.height = n) + "px"), this.above != i && (this.dom.style.marginTop = (this.above = i) ? i + "px" : ""), sF(this.markers, r) || this.setMarkers(e, r);
  }
  setMarkers(e, n) {
    let i = "cm-gutterElement", r = this.dom.firstChild;
    for (let o = 0, s = 0; ; ) {
      let l = s, a = o < n.length ? n[o++] : null, f = !1;
      if (a) {
        let c = a.elementClass;
        c && (i += " " + c);
        for (let u = s; u < this.markers.length; u++)
          if (this.markers[u].compare(a)) {
            l = u, f = !0;
            break;
          }
      } else
        l = this.markers.length;
      for (; s < l; ) {
        let c = this.markers[s++];
        if (c.toDOM) {
          c.destroy(r);
          let u = r.nextSibling;
          r.remove(), r = u;
        }
      }
      if (!a)
        break;
      a.toDOM && (f ? r = r.nextSibling : this.dom.insertBefore(a.toDOM(e), r)), f && s++;
    }
    this.dom.className = i, this.markers = n;
  }
  destroy() {
    this.setMarkers(null, []);
  }
}
function sF(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (!t[n].compare(e[n]))
      return !1;
  return !0;
}
const lF = /* @__PURE__ */ Ge.define(), nl = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, { formatNumber: String, domEventHandlers: {} }, {
      domEventHandlers(e, n) {
        let i = Object.assign({}, e);
        for (let r in n) {
          let o = i[r], s = n[r];
          i[r] = o ? (l, a, f) => o(l, a, f) || s(l, a, f) : s;
        }
        return i;
      }
    });
  }
});
class Ad extends Yr {
  constructor(e) {
    super(), this.number = e;
  }
  eq(e) {
    return this.number == e.number;
  }
  toDOM() {
    return document.createTextNode(this.number);
  }
}
function Od(t, e) {
  return t.state.facet(nl).formatNumber(e, t.state);
}
const aF = /* @__PURE__ */ ka.compute([nl], (t) => ({
  class: "cm-lineNumbers",
  renderEmptyElements: !1,
  markers(e) {
    return e.state.facet(lF);
  },
  lineMarker(e, n, i) {
    return i.some((r) => r.toDOM) ? null : new Ad(Od(e, e.state.doc.lineAt(n.from).number));
  },
  lineMarkerChange: (e) => e.startState.facet(nl) != e.state.facet(nl),
  initialSpacer(e) {
    return new Ad(Od(e, Sy(e.state.doc.lines)));
  },
  updateSpacer(e, n) {
    let i = Od(n.view, Sy(n.view.state.doc.lines));
    return i == e.number ? e : new Ad(i);
  },
  domEventHandlers: t.facet(nl).domEventHandlers
}));
function fF(t = {}) {
  return [
    nl.of(t),
    n4(),
    aF
  ];
}
function Sy(t) {
  let e = 9;
  for (; e < t; )
    e = e * 10 + 9;
  return e;
}
const cF = /* @__PURE__ */ new class extends Yr {
  constructor() {
    super(...arguments), this.elementClass = "cm-activeLineGutter";
  }
}(), uF = /* @__PURE__ */ Ec.compute(["selection"], (t) => {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.head).from;
    r > n && (n = r, e.push(cF.range(r)));
  }
  return Lt.of(e);
});
function hF() {
  return uF;
}
const o4 = 1024;
let dF = 0;
class Td {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
class Tt {
  constructor(e = {}) {
    this.id = dF++, this.perNode = !!e.perNode, this.deserialize = e.deserialize || (() => {
      throw new Error("This node type doesn't define a deserialize function");
    });
  }
  add(e) {
    if (this.perNode)
      throw new RangeError("Can't add per-node props to node types");
    return typeof e != "function" && (e = Ti.match(e)), (n) => {
      let i = e(n);
      return i === void 0 ? null : [this, i];
    };
  }
}
Tt.closedBy = new Tt({ deserialize: (t) => t.split(" ") });
Tt.openedBy = new Tt({ deserialize: (t) => t.split(" ") });
Tt.group = new Tt({ deserialize: (t) => t.split(" ") });
Tt.contextHash = new Tt({ perNode: !0 });
Tt.lookAhead = new Tt({ perNode: !0 });
Tt.mounted = new Tt({ perNode: !0 });
const mF = /* @__PURE__ */ Object.create(null);
class Ti {
  constructor(e, n, i, r = 0) {
    this.name = e, this.props = n, this.id = i, this.flags = r;
  }
  static define(e) {
    let n = e.props && e.props.length ? /* @__PURE__ */ Object.create(null) : mF, i = (e.top ? 1 : 0) | (e.skipped ? 2 : 0) | (e.error ? 4 : 0) | (e.name == null ? 8 : 0), r = new Ti(e.name || "", n, e.id, i);
    if (e.props) {
      for (let o of e.props)
        if (Array.isArray(o) || (o = o(r)), o) {
          if (o[0].perNode)
            throw new RangeError("Can't store a per-node prop on a node type");
          n[o[0].id] = o[1];
        }
    }
    return r;
  }
  prop(e) {
    return this.props[e.id];
  }
  get isTop() {
    return (this.flags & 1) > 0;
  }
  get isSkipped() {
    return (this.flags & 2) > 0;
  }
  get isError() {
    return (this.flags & 4) > 0;
  }
  get isAnonymous() {
    return (this.flags & 8) > 0;
  }
  is(e) {
    if (typeof e == "string") {
      if (this.name == e)
        return !0;
      let n = this.prop(Tt.group);
      return n ? n.indexOf(e) > -1 : !1;
    }
    return this.id == e;
  }
  static match(e) {
    let n = /* @__PURE__ */ Object.create(null);
    for (let i in e)
      for (let r of i.split(" "))
        n[r] = e[i];
    return (i) => {
      for (let r = i.prop(Tt.group), o = -1; o < (r ? r.length : 0); o++) {
        let s = n[o < 0 ? i.name : r[o]];
        if (s)
          return s;
      }
    };
  }
}
Ti.none = new Ti("", /* @__PURE__ */ Object.create(null), 0, 8);
class Og {
  constructor(e) {
    this.types = e;
    for (let n = 0; n < e.length; n++)
      if (e[n].id != n)
        throw new RangeError("Node type ids should correspond to array positions when creating a node set");
  }
  extend(...e) {
    let n = [];
    for (let i of this.types) {
      let r = null;
      for (let o of e) {
        let s = o(i);
        s && (r || (r = Object.assign({}, i.props)), r[s[0].id] = s[1]);
      }
      n.push(r ? new Ti(i.name, r, i.id, i.flags) : i);
    }
    return new Og(n);
  }
}
const tc = /* @__PURE__ */ new WeakMap(), My = /* @__PURE__ */ new WeakMap();
var oi;
(function(t) {
  t[t.ExcludeBuffers = 1] = "ExcludeBuffers", t[t.IncludeAnonymous = 2] = "IncludeAnonymous", t[t.IgnoreMounts = 4] = "IgnoreMounts", t[t.IgnoreOverlays = 8] = "IgnoreOverlays";
})(oi || (oi = {}));
class jn {
  constructor(e, n, i, r, o) {
    if (this.type = e, this.children = n, this.positions = i, this.length = r, this.props = null, o && o.length) {
      this.props = /* @__PURE__ */ Object.create(null);
      for (let [s, l] of o)
        this.props[typeof s == "number" ? s : s.id] = l;
    }
  }
  toString() {
    let e = this.prop(Tt.mounted);
    if (e && !e.overlay)
      return e.tree.toString();
    let n = "";
    for (let i of this.children) {
      let r = i.toString();
      r && (n && (n += ","), n += r);
    }
    return this.type.name ? (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (n.length ? "(" + n + ")" : "") : n;
  }
  cursor(e = 0) {
    return new yu(this.topNode, e);
  }
  cursorAt(e, n = 0, i = 0) {
    let r = tc.get(this) || this.topNode, o = new yu(r);
    return o.moveTo(e, n), tc.set(this, o._tree), o;
  }
  get topNode() {
    return new ao(this, 0, 0, null);
  }
  resolve(e, n = 0) {
    let i = Rl(tc.get(this) || this.topNode, e, n, !1);
    return tc.set(this, i), i;
  }
  resolveInner(e, n = 0) {
    let i = Rl(My.get(this) || this.topNode, e, n, !0);
    return My.set(this, i), i;
  }
  iterate(e) {
    let { enter: n, leave: i, from: r = 0, to: o = this.length } = e;
    for (let s = this.cursor((e.mode || 0) | oi.IncludeAnonymous); ; ) {
      let l = !1;
      if (s.from <= o && s.to >= r && (s.type.isAnonymous || n(s) !== !1)) {
        if (s.firstChild())
          continue;
        l = !0;
      }
      for (; l && i && !s.type.isAnonymous && i(s), !s.nextSibling(); ) {
        if (!s.parent())
          return;
        l = !0;
      }
    }
  }
  prop(e) {
    return e.perNode ? this.props ? this.props[e.id] : void 0 : this.type.prop(e);
  }
  get propValues() {
    let e = [];
    if (this.props)
      for (let n in this.props)
        e.push([+n, this.props[n]]);
    return e;
  }
  balance(e = {}) {
    return this.children.length <= 8 ? this : Pg(Ti.none, this.children, this.positions, 0, this.children.length, 0, this.length, (n, i, r) => new jn(this.type, n, i, r, this.propValues), e.makeTree || ((n, i, r) => new jn(Ti.none, n, i, r)));
  }
  static build(e) {
    return gF(e);
  }
}
jn.empty = new jn(Ti.none, [], [], 0);
class Tg {
  constructor(e, n) {
    this.buffer = e, this.index = n;
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  get pos() {
    return this.index;
  }
  next() {
    this.index -= 4;
  }
  fork() {
    return new Tg(this.buffer, this.index);
  }
}
class Hs {
  constructor(e, n, i) {
    this.buffer = e, this.length = n, this.set = i;
  }
  get type() {
    return Ti.none;
  }
  toString() {
    let e = [];
    for (let n = 0; n < this.buffer.length; )
      e.push(this.childString(n)), n = this.buffer[n + 3];
    return e.join(",");
  }
  childString(e) {
    let n = this.buffer[e], i = this.buffer[e + 3], r = this.set.types[n], o = r.name;
    if (/\W/.test(o) && !r.isError && (o = JSON.stringify(o)), e += 4, i == e)
      return o;
    let s = [];
    for (; e < i; )
      s.push(this.childString(e)), e = this.buffer[e + 3];
    return o + "(" + s.join(",") + ")";
  }
  findChild(e, n, i, r, o) {
    let { buffer: s } = this, l = -1;
    for (let a = e; a != n && !(s4(o, r, s[a + 1], s[a + 2]) && (l = a, i > 0)); a = s[a + 3])
      ;
    return l;
  }
  slice(e, n, i) {
    let r = this.buffer, o = new Uint16Array(n - e), s = 0;
    for (let l = e, a = 0; l < n; ) {
      o[a++] = r[l++], o[a++] = r[l++] - i;
      let f = o[a++] = r[l++] - i;
      o[a++] = r[l++] - e, s = Math.max(s, f);
    }
    return new Hs(o, s, this.set);
  }
}
function s4(t, e, n, i) {
  switch (t) {
    case -2:
      return n < e;
    case -1:
      return i >= e && n < e;
    case 0:
      return n < e && i > e;
    case 1:
      return n <= e && i > e;
    case 2:
      return i > e;
    case 4:
      return !0;
  }
}
function l4(t, e) {
  let n = t.childBefore(e);
  for (; n; ) {
    let i = n.lastChild;
    if (!i || i.to != n.to)
      break;
    i.type.isError && i.from == i.to ? (t = n, n = i.prevSibling) : n = i;
  }
  return t;
}
function Rl(t, e, n, i) {
  for (var r; t.from == t.to || (n < 1 ? t.from >= e : t.from > e) || (n > -1 ? t.to <= e : t.to < e); ) {
    let s = !i && t instanceof ao && t.index < 0 ? null : t.parent;
    if (!s)
      return t;
    t = s;
  }
  let o = i ? 0 : oi.IgnoreOverlays;
  if (i)
    for (let s = t, l = s.parent; l; s = l, l = s.parent)
      s instanceof ao && s.index < 0 && ((r = l.enter(e, n, o)) === null || r === void 0 ? void 0 : r.from) != s.from && (t = l);
  for (; ; ) {
    let s = t.enter(e, n, o);
    if (!s)
      return t;
    t = s;
  }
}
class ao {
  constructor(e, n, i, r) {
    this._tree = e, this.from = n, this.index = i, this._parent = r;
  }
  get type() {
    return this._tree.type;
  }
  get name() {
    return this._tree.type.name;
  }
  get to() {
    return this.from + this._tree.length;
  }
  nextChild(e, n, i, r, o = 0) {
    for (let s = this; ; ) {
      for (let { children: l, positions: a } = s._tree, f = n > 0 ? l.length : -1; e != f; e += n) {
        let c = l[e], u = a[e] + s.from;
        if (s4(r, i, u, u + c.length)) {
          if (c instanceof Hs) {
            if (o & oi.ExcludeBuffers)
              continue;
            let h = c.findChild(0, c.buffer.length, n, i - u, r);
            if (h > -1)
              return new Bo(new pF(s, c, e, u), null, h);
          } else if (o & oi.IncludeAnonymous || !c.type.isAnonymous || Eg(c)) {
            let h;
            if (!(o & oi.IgnoreMounts) && c.props && (h = c.prop(Tt.mounted)) && !h.overlay)
              return new ao(h.tree, u, e, s);
            let d = new ao(c, u, e, s);
            return o & oi.IncludeAnonymous || !d.type.isAnonymous ? d : d.nextChild(n < 0 ? c.children.length - 1 : 0, n, i, r);
          }
        }
      }
      if (o & oi.IncludeAnonymous || !s.type.isAnonymous || (s.index >= 0 ? e = s.index + n : e = n < 0 ? -1 : s._parent._tree.children.length, s = s._parent, !s))
        return null;
    }
  }
  get firstChild() {
    return this.nextChild(0, 1, 0, 4);
  }
  get lastChild() {
    return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
  }
  childAfter(e) {
    return this.nextChild(0, 1, e, 2);
  }
  childBefore(e) {
    return this.nextChild(this._tree.children.length - 1, -1, e, -2);
  }
  enter(e, n, i = 0) {
    let r;
    if (!(i & oi.IgnoreOverlays) && (r = this._tree.prop(Tt.mounted)) && r.overlay) {
      let o = e - this.from;
      for (let { from: s, to: l } of r.overlay)
        if ((n > 0 ? s <= o : s < o) && (n < 0 ? l >= o : l > o))
          return new ao(r.tree, r.overlay[0].from + this.from, -1, this);
    }
    return this.nextChild(0, 1, e, n, i);
  }
  nextSignificantParent() {
    let e = this;
    for (; e.type.isAnonymous && e._parent; )
      e = e._parent;
    return e;
  }
  get parent() {
    return this._parent ? this._parent.nextSignificantParent() : null;
  }
  get nextSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
  }
  get prevSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
  }
  cursor(e = 0) {
    return new yu(this, e);
  }
  get tree() {
    return this._tree;
  }
  toTree() {
    return this._tree;
  }
  resolve(e, n = 0) {
    return Rl(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Rl(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return l4(this, e);
  }
  getChild(e, n = null, i = null) {
    let r = bu(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return bu(this, e, n, i);
  }
  toString() {
    return this._tree.toString();
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return _u(this, e);
  }
}
function bu(t, e, n, i) {
  let r = t.cursor(), o = [];
  if (!r.firstChild())
    return o;
  if (n != null) {
    for (; !r.type.is(n); )
      if (!r.nextSibling())
        return o;
  }
  for (; ; ) {
    if (i != null && r.type.is(i))
      return o;
    if (r.type.is(e) && o.push(r.node), !r.nextSibling())
      return i == null ? o : [];
  }
}
function _u(t, e, n = e.length - 1) {
  for (let i = t.parent; n >= 0; i = i.parent) {
    if (!i)
      return !1;
    if (!i.type.isAnonymous) {
      if (e[n] && e[n] != i.name)
        return !1;
      n--;
    }
  }
  return !0;
}
class pF {
  constructor(e, n, i, r) {
    this.parent = e, this.buffer = n, this.index = i, this.start = r;
  }
}
class Bo {
  get name() {
    return this.type.name;
  }
  get from() {
    return this.context.start + this.context.buffer.buffer[this.index + 1];
  }
  get to() {
    return this.context.start + this.context.buffer.buffer[this.index + 2];
  }
  constructor(e, n, i) {
    this.context = e, this._parent = n, this.index = i, this.type = e.buffer.set.types[e.buffer.buffer[i]];
  }
  child(e, n, i) {
    let { buffer: r } = this.context, o = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.context.start, i);
    return o < 0 ? null : new Bo(this.context, this, o);
  }
  get firstChild() {
    return this.child(1, 0, 4);
  }
  get lastChild() {
    return this.child(-1, 0, 4);
  }
  childAfter(e) {
    return this.child(1, e, 2);
  }
  childBefore(e) {
    return this.child(-1, e, -2);
  }
  enter(e, n, i = 0) {
    if (i & oi.ExcludeBuffers)
      return null;
    let { buffer: r } = this.context, o = r.findChild(this.index + 4, r.buffer[this.index + 3], n > 0 ? 1 : -1, e - this.context.start, n);
    return o < 0 ? null : new Bo(this.context, this, o);
  }
  get parent() {
    return this._parent || this.context.parent.nextSignificantParent();
  }
  externalSibling(e) {
    return this._parent ? null : this.context.parent.nextChild(this.context.index + e, e, 0, 4);
  }
  get nextSibling() {
    let { buffer: e } = this.context, n = e.buffer[this.index + 3];
    return n < (this._parent ? e.buffer[this._parent.index + 3] : e.buffer.length) ? new Bo(this.context, this._parent, n) : this.externalSibling(1);
  }
  get prevSibling() {
    let { buffer: e } = this.context, n = this._parent ? this._parent.index + 4 : 0;
    return this.index == n ? this.externalSibling(-1) : new Bo(this.context, this._parent, e.findChild(n, this.index, -1, 0, 4));
  }
  cursor(e = 0) {
    return new yu(this, e);
  }
  get tree() {
    return null;
  }
  toTree() {
    let e = [], n = [], { buffer: i } = this.context, r = this.index + 4, o = i.buffer[this.index + 3];
    if (o > r) {
      let s = i.buffer[this.index + 1];
      e.push(i.slice(r, o, s)), n.push(0);
    }
    return new jn(this.type, e, n, this.to - this.from);
  }
  resolve(e, n = 0) {
    return Rl(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Rl(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return l4(this, e);
  }
  toString() {
    return this.context.buffer.childString(this.index);
  }
  getChild(e, n = null, i = null) {
    let r = bu(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return bu(this, e, n, i);
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return _u(this, e);
  }
}
class yu {
  get name() {
    return this.type.name;
  }
  constructor(e, n = 0) {
    if (this.mode = n, this.buffer = null, this.stack = [], this.index = 0, this.bufferNode = null, e instanceof ao)
      this.yieldNode(e);
    else {
      this._tree = e.context.parent, this.buffer = e.context;
      for (let i = e._parent; i; i = i._parent)
        this.stack.unshift(i.index);
      this.bufferNode = e, this.yieldBuf(e.index);
    }
  }
  yieldNode(e) {
    return e ? (this._tree = e, this.type = e.type, this.from = e.from, this.to = e.to, !0) : !1;
  }
  yieldBuf(e, n) {
    this.index = e;
    let { start: i, buffer: r } = this.buffer;
    return this.type = n || r.set.types[r.buffer[e]], this.from = i + r.buffer[e + 1], this.to = i + r.buffer[e + 2], !0;
  }
  yield(e) {
    return e ? e instanceof ao ? (this.buffer = null, this.yieldNode(e)) : (this.buffer = e.context, this.yieldBuf(e.index, e.type)) : !1;
  }
  toString() {
    return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
  }
  enterChild(e, n, i) {
    if (!this.buffer)
      return this.yield(this._tree.nextChild(e < 0 ? this._tree._tree.children.length - 1 : 0, e, n, i, this.mode));
    let { buffer: r } = this.buffer, o = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.buffer.start, i);
    return o < 0 ? !1 : (this.stack.push(this.index), this.yieldBuf(o));
  }
  firstChild() {
    return this.enterChild(1, 0, 4);
  }
  lastChild() {
    return this.enterChild(-1, 0, 4);
  }
  childAfter(e) {
    return this.enterChild(1, e, 2);
  }
  childBefore(e) {
    return this.enterChild(-1, e, -2);
  }
  enter(e, n, i = this.mode) {
    return this.buffer ? i & oi.ExcludeBuffers ? !1 : this.enterChild(1, e, n) : this.yield(this._tree.enter(e, n, i));
  }
  parent() {
    if (!this.buffer)
      return this.yieldNode(this.mode & oi.IncludeAnonymous ? this._tree._parent : this._tree.parent);
    if (this.stack.length)
      return this.yieldBuf(this.stack.pop());
    let e = this.mode & oi.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
    return this.buffer = null, this.yieldNode(e);
  }
  sibling(e) {
    if (!this.buffer)
      return this._tree._parent ? this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + e, e, 0, 4, this.mode)) : !1;
    let { buffer: n } = this.buffer, i = this.stack.length - 1;
    if (e < 0) {
      let r = i < 0 ? 0 : this.stack[i] + 4;
      if (this.index != r)
        return this.yieldBuf(n.findChild(r, this.index, -1, 0, 4));
    } else {
      let r = n.buffer[this.index + 3];
      if (r < (i < 0 ? n.buffer.length : n.buffer[this.stack[i] + 3]))
        return this.yieldBuf(r);
    }
    return i < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + e, e, 0, 4, this.mode)) : !1;
  }
  nextSibling() {
    return this.sibling(1);
  }
  prevSibling() {
    return this.sibling(-1);
  }
  atLastNode(e) {
    let n, i, { buffer: r } = this;
    if (r) {
      if (e > 0) {
        if (this.index < r.buffer.buffer.length)
          return !1;
      } else
        for (let o = 0; o < this.index; o++)
          if (r.buffer.buffer[o + 3] < this.index)
            return !1;
      ({ index: n, parent: i } = r);
    } else
      ({ index: n, _parent: i } = this._tree);
    for (; i; { index: n, _parent: i } = i)
      if (n > -1)
        for (let o = n + e, s = e < 0 ? -1 : i._tree.children.length; o != s; o += e) {
          let l = i._tree.children[o];
          if (this.mode & oi.IncludeAnonymous || l instanceof Hs || !l.type.isAnonymous || Eg(l))
            return !1;
        }
    return !0;
  }
  move(e, n) {
    if (n && this.enterChild(e, 0, 4))
      return !0;
    for (; ; ) {
      if (this.sibling(e))
        return !0;
      if (this.atLastNode(e) || !this.parent())
        return !1;
    }
  }
  next(e = !0) {
    return this.move(1, e);
  }
  prev(e = !0) {
    return this.move(-1, e);
  }
  moveTo(e, n = 0) {
    for (; (this.from == this.to || (n < 1 ? this.from >= e : this.from > e) || (n > -1 ? this.to <= e : this.to < e)) && this.parent(); )
      ;
    for (; this.enterChild(1, e, n); )
      ;
    return this;
  }
  get node() {
    if (!this.buffer)
      return this._tree;
    let e = this.bufferNode, n = null, i = 0;
    if (e && e.context == this.buffer) {
      e:
        for (let r = this.index, o = this.stack.length; o >= 0; ) {
          for (let s = e; s; s = s._parent)
            if (s.index == r) {
              if (r == this.index)
                return s;
              n = s, i = o + 1;
              break e;
            }
          r = this.stack[--o];
        }
    }
    for (let r = i; r < this.stack.length; r++)
      n = new Bo(this.buffer, n, this.stack[r]);
    return this.bufferNode = new Bo(this.buffer, n, this.index);
  }
  get tree() {
    return this.buffer ? null : this._tree._tree;
  }
  iterate(e, n) {
    for (let i = 0; ; ) {
      let r = !1;
      if (this.type.isAnonymous || e(this) !== !1) {
        if (this.firstChild()) {
          i++;
          continue;
        }
        this.type.isAnonymous || (r = !0);
      }
      for (; r && n && n(this), r = this.type.isAnonymous, !this.nextSibling(); ) {
        if (!i)
          return;
        this.parent(), i--, r = !0;
      }
    }
  }
  matchContext(e) {
    if (!this.buffer)
      return _u(this.node, e);
    let { buffer: n } = this.buffer, { types: i } = n.set;
    for (let r = e.length - 1, o = this.stack.length - 1; r >= 0; o--) {
      if (o < 0)
        return _u(this.node, e, r);
      let s = i[n.buffer[this.stack[o]]];
      if (!s.isAnonymous) {
        if (e[r] && e[r] != s.name)
          return !1;
        r--;
      }
    }
    return !0;
  }
}
function Eg(t) {
  return t.children.some((e) => e instanceof Hs || !e.type.isAnonymous || Eg(e));
}
function gF(t) {
  var e;
  let { buffer: n, nodeSet: i, maxBufferLength: r = o4, reused: o = [], minRepeatType: s = i.types.length } = t, l = Array.isArray(n) ? new Tg(n, n.length) : n, a = i.types, f = 0, c = 0;
  function u(M, S, R, k, I) {
    let { id: L, start: V, end: N, size: W } = l, U = c;
    for (; W < 0; )
      if (l.next(), W == -1) {
        let D = o[L];
        R.push(D), k.push(V - M);
        return;
      } else if (W == -3) {
        f = L;
        return;
      } else if (W == -4) {
        c = L;
        return;
      } else
        throw new RangeError(`Unrecognized record size: ${W}`);
    let O = a[L], x, A, H = V - M;
    if (N - V <= r && (A = g(l.pos - S, I))) {
      let D = new Uint16Array(A.size - A.skip), P = l.pos - A.size, K = D.length;
      for (; l.pos > P; )
        K = _(A.start, D, K);
      x = new Hs(D, N - A.start, i), H = A.start - M;
    } else {
      let D = l.pos - W;
      l.next();
      let P = [], K = [], ne = L >= s ? L : -1, z = 0, Z = N;
      for (; l.pos > D; )
        ne >= 0 && l.id == ne && l.size >= 0 ? (l.end <= Z - r && (d(P, K, V, z, l.end, Z, ne, U), z = P.length, Z = l.end), l.next()) : u(V, D, P, K, ne);
      if (ne >= 0 && z > 0 && z < P.length && d(P, K, V, z, V, Z, ne, U), P.reverse(), K.reverse(), ne > -1 && z > 0) {
        let te = h(O);
        x = Pg(O, P, K, 0, P.length, 0, N - V, te, te);
      } else
        x = m(O, P, K, N - V, U - N);
    }
    R.push(x), k.push(H);
  }
  function h(M) {
    return (S, R, k) => {
      let I = 0, L = S.length - 1, V, N;
      if (L >= 0 && (V = S[L]) instanceof jn) {
        if (!L && V.type == M && V.length == k)
          return V;
        (N = V.prop(Tt.lookAhead)) && (I = R[L] + V.length + N);
      }
      return m(M, S, R, k, I);
    };
  }
  function d(M, S, R, k, I, L, V, N) {
    let W = [], U = [];
    for (; M.length > k; )
      W.push(M.pop()), U.push(S.pop() + R - I);
    M.push(m(i.types[V], W, U, L - I, N - L)), S.push(I - R);
  }
  function m(M, S, R, k, I = 0, L) {
    if (f) {
      let V = [Tt.contextHash, f];
      L = L ? [V].concat(L) : [V];
    }
    if (I > 25) {
      let V = [Tt.lookAhead, I];
      L = L ? [V].concat(L) : [V];
    }
    return new jn(M, S, R, k, L);
  }
  function g(M, S) {
    let R = l.fork(), k = 0, I = 0, L = 0, V = R.end - r, N = { size: 0, start: 0, skip: 0 };
    e:
      for (let W = R.pos - M; R.pos > W; ) {
        let U = R.size;
        if (R.id == S && U >= 0) {
          N.size = k, N.start = I, N.skip = L, L += 4, k += 4, R.next();
          continue;
        }
        let O = R.pos - U;
        if (U < 0 || O < W || R.start < V)
          break;
        let x = R.id >= s ? 4 : 0, A = R.start;
        for (R.next(); R.pos > O; ) {
          if (R.size < 0)
            if (R.size == -3)
              x += 4;
            else
              break e;
          else
            R.id >= s && (x += 4);
          R.next();
        }
        I = A, k += U, L += x;
      }
    return (S < 0 || k == M) && (N.size = k, N.start = I, N.skip = L), N.size > 4 ? N : void 0;
  }
  function _(M, S, R) {
    let { id: k, start: I, end: L, size: V } = l;
    if (l.next(), V >= 0 && k < s) {
      let N = R;
      if (V > 4) {
        let W = l.pos - (V - 4);
        for (; l.pos > W; )
          R = _(M, S, R);
      }
      S[--R] = N, S[--R] = L - M, S[--R] = I - M, S[--R] = k;
    } else
      V == -3 ? f = k : V == -4 && (c = k);
    return R;
  }
  let b = [], w = [];
  for (; l.pos > 0; )
    u(t.start || 0, t.bufferStart || 0, b, w, -1);
  let v = (e = t.length) !== null && e !== void 0 ? e : b.length ? w[0] + b[0].length : 0;
  return new jn(a[t.topID], b.reverse(), w.reverse(), v);
}
const Ay = /* @__PURE__ */ new WeakMap();
function Pc(t, e) {
  if (!t.isAnonymous || e instanceof Hs || e.type != t)
    return 1;
  let n = Ay.get(e);
  if (n == null) {
    n = 1;
    for (let i of e.children) {
      if (i.type != t || !(i instanceof jn)) {
        n = 1;
        break;
      }
      n += Pc(t, i);
    }
    Ay.set(e, n);
  }
  return n;
}
function Pg(t, e, n, i, r, o, s, l, a) {
  let f = 0;
  for (let m = i; m < r; m++)
    f += Pc(t, e[m]);
  let c = Math.ceil(f * 1.5 / 8), u = [], h = [];
  function d(m, g, _, b, w) {
    for (let v = _; v < b; ) {
      let M = v, S = g[v], R = Pc(t, m[v]);
      for (v++; v < b; v++) {
        let k = Pc(t, m[v]);
        if (R + k >= c)
          break;
        R += k;
      }
      if (v == M + 1) {
        if (R > c) {
          let k = m[M];
          d(k.children, k.positions, 0, k.children.length, g[M] + w);
          continue;
        }
        u.push(m[M]);
      } else {
        let k = g[v - 1] + m[v - 1].length - S;
        u.push(Pg(t, m, g, M, v, S, k, null, a));
      }
      h.push(S + w - o);
    }
  }
  return d(e, n, i, r, 0), (l || a)(u, h, s);
}
class Ms {
  constructor(e, n, i, r, o = !1, s = !1) {
    this.from = e, this.to = n, this.tree = i, this.offset = r, this.open = (o ? 1 : 0) | (s ? 2 : 0);
  }
  get openStart() {
    return (this.open & 1) > 0;
  }
  get openEnd() {
    return (this.open & 2) > 0;
  }
  static addTree(e, n = [], i = !1) {
    let r = [new Ms(0, e.length, e, 0, !1, i)];
    for (let o of n)
      o.to > e.length && r.push(o);
    return r;
  }
  static applyChanges(e, n, i = 128) {
    if (!n.length)
      return e;
    let r = [], o = 1, s = e.length ? e[0] : null;
    for (let l = 0, a = 0, f = 0; ; l++) {
      let c = l < n.length ? n[l] : null, u = c ? c.fromA : 1e9;
      if (u - a >= i)
        for (; s && s.from < u; ) {
          let h = s;
          if (a >= h.from || u <= h.to || f) {
            let d = Math.max(h.from, a) - f, m = Math.min(h.to, u) - f;
            h = d >= m ? null : new Ms(d, m, h.tree, h.offset + f, l > 0, !!c);
          }
          if (h && r.push(h), s.to > u)
            break;
          s = o < e.length ? e[o++] : null;
        }
      if (!c)
        break;
      a = c.toA, f = c.toA - c.toB;
    }
    return r;
  }
}
let a4 = class {
  startParse(e, n, i) {
    return typeof e == "string" && (e = new bF(e)), i = i ? i.length ? i.map((r) => new Td(r.from, r.to)) : [new Td(0, 0)] : [new Td(0, e.length)], this.createParse(e, n || [], i);
  }
  parse(e, n, i) {
    let r = this.startParse(e, n, i);
    for (; ; ) {
      let o = r.advance();
      if (o)
        return o;
    }
  }
};
class bF {
  constructor(e) {
    this.string = e;
  }
  get length() {
    return this.string.length;
  }
  chunk(e) {
    return this.string.slice(e);
  }
  get lineChunks() {
    return !1;
  }
  read(e, n) {
    return this.string.slice(e, n);
  }
}
new Tt({ perNode: !0 });
let _F = 0;
class Pr {
  constructor(e, n, i) {
    this.set = e, this.base = n, this.modified = i, this.id = _F++;
  }
  static define(e) {
    if (e != null && e.base)
      throw new Error("Can not derive from a modified tag");
    let n = new Pr([], null, []);
    if (n.set.push(n), e)
      for (let i of e.set)
        n.set.push(i);
    return n;
  }
  static defineModifier() {
    let e = new wu();
    return (n) => n.modified.indexOf(e) > -1 ? n : wu.get(n.base || n, n.modified.concat(e).sort((i, r) => i.id - r.id));
  }
}
let yF = 0;
class wu {
  constructor() {
    this.instances = [], this.id = yF++;
  }
  static get(e, n) {
    if (!n.length)
      return e;
    let i = n[0].instances.find((l) => l.base == e && wF(n, l.modified));
    if (i)
      return i;
    let r = [], o = new Pr(r, e, n);
    for (let l of n)
      l.instances.push(o);
    let s = vF(n);
    for (let l of e.set)
      if (!l.modified.length)
        for (let a of s)
          r.push(wu.get(l, a));
    return o;
  }
}
function wF(t, e) {
  return t.length == e.length && t.every((n, i) => n == e[i]);
}
function vF(t) {
  let e = [[]];
  for (let n = 0; n < t.length; n++)
    for (let i = 0, r = e.length; i < r; i++)
      e.push(e[i].concat(t[n]));
  return e.sort((n, i) => i.length - n.length);
}
function f4(t) {
  let e = /* @__PURE__ */ Object.create(null);
  for (let n in t) {
    let i = t[n];
    Array.isArray(i) || (i = [i]);
    for (let r of n.split(" "))
      if (r) {
        let o = [], s = 2, l = r;
        for (let u = 0; ; ) {
          if (l == "..." && u > 0 && u + 3 == r.length) {
            s = 1;
            break;
          }
          let h = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);
          if (!h)
            throw new RangeError("Invalid path: " + r);
          if (o.push(h[0] == "*" ? "" : h[0][0] == '"' ? JSON.parse(h[0]) : h[0]), u += h[0].length, u == r.length)
            break;
          let d = r[u++];
          if (u == r.length && d == "!") {
            s = 0;
            break;
          }
          if (d != "/")
            throw new RangeError("Invalid path: " + r);
          l = r.slice(u);
        }
        let a = o.length - 1, f = o[a];
        if (!f)
          throw new RangeError("Invalid path: " + r);
        let c = new vu(i, s, a > 0 ? o.slice(0, a) : null);
        e[f] = c.sort(e[f]);
      }
  }
  return c4.add(e);
}
const c4 = new Tt();
class vu {
  constructor(e, n, i, r) {
    this.tags = e, this.mode = n, this.context = i, this.next = r;
  }
  get opaque() {
    return this.mode == 0;
  }
  get inherit() {
    return this.mode == 1;
  }
  sort(e) {
    return !e || e.depth < this.depth ? (this.next = e, this) : (e.next = this.sort(e.next), e);
  }
  get depth() {
    return this.context ? this.context.length : 0;
  }
}
vu.empty = new vu([], 2, null);
function u4(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let o of t)
    if (!Array.isArray(o.tag))
      n[o.tag.id] = o.class;
    else
      for (let s of o.tag)
        n[s.id] = o.class;
  let { scope: i, all: r = null } = e || {};
  return {
    style: (o) => {
      let s = r;
      for (let l of o)
        for (let a of l.set) {
          let f = n[a.id];
          if (f) {
            s = s ? s + " " + f : f;
            break;
          }
        }
      return s;
    },
    scope: i
  };
}
function kF(t, e) {
  let n = null;
  for (let i of t) {
    let r = i.style(e);
    r && (n = n ? n + " " + r : r);
  }
  return n;
}
function CF(t, e, n, i = 0, r = t.length) {
  let o = new SF(i, Array.isArray(e) ? e : [e], n);
  o.highlightRange(t.cursor(), i, r, "", o.highlighters), o.flush(r);
}
class SF {
  constructor(e, n, i) {
    this.at = e, this.highlighters = n, this.span = i, this.class = "";
  }
  startSpan(e, n) {
    n != this.class && (this.flush(e), e > this.at && (this.at = e), this.class = n);
  }
  flush(e) {
    e > this.at && this.class && this.span(this.at, e, this.class);
  }
  highlightRange(e, n, i, r, o) {
    let { type: s, from: l, to: a } = e;
    if (l >= i || a <= n)
      return;
    s.isTop && (o = this.highlighters.filter((d) => !d.scope || d.scope(s)));
    let f = r, c = MF(e) || vu.empty, u = kF(o, c.tags);
    if (u && (f && (f += " "), f += u, c.mode == 1 && (r += (r ? " " : "") + u)), this.startSpan(e.from, f), c.opaque)
      return;
    let h = e.tree && e.tree.prop(Tt.mounted);
    if (h && h.overlay) {
      let d = e.node.enter(h.overlay[0].from + l, 1), m = this.highlighters.filter((_) => !_.scope || _.scope(h.tree.type)), g = e.firstChild();
      for (let _ = 0, b = l; ; _++) {
        let w = _ < h.overlay.length ? h.overlay[_] : null, v = w ? w.from + l : a, M = Math.max(n, b), S = Math.min(i, v);
        if (M < S && g)
          for (; e.from < S && (this.highlightRange(e, M, S, r, o), this.startSpan(Math.min(S, e.to), f), !(e.to >= v || !e.nextSibling())); )
            ;
        if (!w || v > i)
          break;
        b = w.to + l, b > n && (this.highlightRange(d.cursor(), Math.max(n, w.from + l), Math.min(i, b), r, m), this.startSpan(b, f));
      }
      g && e.parent();
    } else if (e.firstChild()) {
      do
        if (!(e.to <= n)) {
          if (e.from >= i)
            break;
          this.highlightRange(e, n, i, r, o), this.startSpan(Math.min(i, e.to), f);
        }
      while (e.nextSibling());
      e.parent();
    }
  }
}
function MF(t) {
  let e = t.type.prop(c4);
  for (; e && e.context && !t.matchContext(e.context); )
    e = e.next;
  return e || null;
}
const Re = Pr.define, nc = Re(), Ao = Re(), Oy = Re(Ao), Ty = Re(Ao), Oo = Re(), ic = Re(Oo), Ed = Re(Oo), Er = Re(), us = Re(Er), Or = Re(), Tr = Re(), rp = Re(), ea = Re(rp), rc = Re(), Me = {
  comment: nc,
  lineComment: Re(nc),
  blockComment: Re(nc),
  docComment: Re(nc),
  name: Ao,
  variableName: Re(Ao),
  typeName: Oy,
  tagName: Re(Oy),
  propertyName: Ty,
  attributeName: Re(Ty),
  className: Re(Ao),
  labelName: Re(Ao),
  namespace: Re(Ao),
  macroName: Re(Ao),
  literal: Oo,
  string: ic,
  docString: Re(ic),
  character: Re(ic),
  attributeValue: Re(ic),
  number: Ed,
  integer: Re(Ed),
  float: Re(Ed),
  bool: Re(Oo),
  regexp: Re(Oo),
  escape: Re(Oo),
  color: Re(Oo),
  url: Re(Oo),
  keyword: Or,
  self: Re(Or),
  null: Re(Or),
  atom: Re(Or),
  unit: Re(Or),
  modifier: Re(Or),
  operatorKeyword: Re(Or),
  controlKeyword: Re(Or),
  definitionKeyword: Re(Or),
  moduleKeyword: Re(Or),
  operator: Tr,
  derefOperator: Re(Tr),
  arithmeticOperator: Re(Tr),
  logicOperator: Re(Tr),
  bitwiseOperator: Re(Tr),
  compareOperator: Re(Tr),
  updateOperator: Re(Tr),
  definitionOperator: Re(Tr),
  typeOperator: Re(Tr),
  controlOperator: Re(Tr),
  punctuation: rp,
  separator: Re(rp),
  bracket: ea,
  angleBracket: Re(ea),
  squareBracket: Re(ea),
  paren: Re(ea),
  brace: Re(ea),
  content: Er,
  heading: us,
  heading1: Re(us),
  heading2: Re(us),
  heading3: Re(us),
  heading4: Re(us),
  heading5: Re(us),
  heading6: Re(us),
  contentSeparator: Re(Er),
  list: Re(Er),
  quote: Re(Er),
  emphasis: Re(Er),
  strong: Re(Er),
  link: Re(Er),
  monospace: Re(Er),
  strikethrough: Re(Er),
  inserted: Re(),
  deleted: Re(),
  changed: Re(),
  invalid: Re(),
  meta: rc,
  documentMeta: Re(rc),
  annotation: Re(rc),
  processingInstruction: Re(rc),
  definition: Pr.defineModifier(),
  constant: Pr.defineModifier(),
  function: Pr.defineModifier(),
  standard: Pr.defineModifier(),
  local: Pr.defineModifier(),
  special: Pr.defineModifier()
};
u4([
  { tag: Me.link, class: "tok-link" },
  { tag: Me.heading, class: "tok-heading" },
  { tag: Me.emphasis, class: "tok-emphasis" },
  { tag: Me.strong, class: "tok-strong" },
  { tag: Me.keyword, class: "tok-keyword" },
  { tag: Me.atom, class: "tok-atom" },
  { tag: Me.bool, class: "tok-bool" },
  { tag: Me.url, class: "tok-url" },
  { tag: Me.labelName, class: "tok-labelName" },
  { tag: Me.inserted, class: "tok-inserted" },
  { tag: Me.deleted, class: "tok-deleted" },
  { tag: Me.literal, class: "tok-literal" },
  { tag: Me.string, class: "tok-string" },
  { tag: Me.number, class: "tok-number" },
  { tag: [Me.regexp, Me.escape, Me.special(Me.string)], class: "tok-string2" },
  { tag: Me.variableName, class: "tok-variableName" },
  { tag: Me.local(Me.variableName), class: "tok-variableName tok-local" },
  { tag: Me.definition(Me.variableName), class: "tok-variableName tok-definition" },
  { tag: Me.special(Me.variableName), class: "tok-variableName2" },
  { tag: Me.definition(Me.propertyName), class: "tok-propertyName tok-definition" },
  { tag: Me.typeName, class: "tok-typeName" },
  { tag: Me.namespace, class: "tok-namespace" },
  { tag: Me.className, class: "tok-className" },
  { tag: Me.macroName, class: "tok-macroName" },
  { tag: Me.propertyName, class: "tok-propertyName" },
  { tag: Me.operator, class: "tok-operator" },
  { tag: Me.comment, class: "tok-comment" },
  { tag: Me.meta, class: "tok-meta" },
  { tag: Me.invalid, class: "tok-invalid" },
  { tag: Me.punctuation, class: "tok-punctuation" }
]);
var Pd;
const Qa = /* @__PURE__ */ new Tt();
function AF(t) {
  return Ge.define({
    combine: t ? (e) => e.concat(t) : void 0
  });
}
class hr {
  constructor(e, n, i = [], r = "") {
    this.data = e, this.name = r, Mt.prototype.hasOwnProperty("tree") || Object.defineProperty(Mt.prototype, "tree", { get() {
      return ui(this);
    } }), this.parser = n, this.extension = [
      Zo.of(this),
      Mt.languageData.of((o, s, l) => o.facet(Ey(o, s, l)))
    ].concat(i);
  }
  isActiveAt(e, n, i = -1) {
    return Ey(e, n, i) == this.data;
  }
  findRegions(e) {
    let n = e.facet(Zo);
    if ((n == null ? void 0 : n.data) == this.data)
      return [{ from: 0, to: e.doc.length }];
    if (!n || !n.allowsNesting)
      return [];
    let i = [], r = (o, s) => {
      if (o.prop(Qa) == this.data) {
        i.push({ from: s, to: s + o.length });
        return;
      }
      let l = o.prop(Tt.mounted);
      if (l) {
        if (l.tree.prop(Qa) == this.data) {
          if (l.overlay)
            for (let a of l.overlay)
              i.push({ from: a.from + s, to: a.to + s });
          else
            i.push({ from: s, to: s + o.length });
          return;
        } else if (l.overlay) {
          let a = i.length;
          if (r(l.tree, l.overlay[0].from + s), i.length > a)
            return;
        }
      }
      for (let a = 0; a < o.children.length; a++) {
        let f = o.children[a];
        f instanceof jn && r(f, o.positions[a] + s);
      }
    };
    return r(ui(e), 0), i;
  }
  get allowsNesting() {
    return !0;
  }
}
hr.setState = /* @__PURE__ */ _t.define();
function Ey(t, e, n) {
  let i = t.facet(Zo);
  if (!i)
    return null;
  let r = i.data;
  if (i.allowsNesting)
    for (let o = ui(t).topNode; o; o = o.enter(e, n, oi.ExcludeBuffers))
      r = o.type.prop(Qa) || r;
  return r;
}
class ku extends hr {
  constructor(e, n, i) {
    super(e, n, [], i), this.parser = n;
  }
  static define(e) {
    let n = AF(e.languageData);
    return new ku(n, e.parser.configure({
      props: [Qa.add((i) => i.isTop ? n : void 0)]
    }), e.name);
  }
  configure(e, n) {
    return new ku(this.data, this.parser.configure(e), n || this.name);
  }
  get allowsNesting() {
    return this.parser.hasWrappers();
  }
}
function ui(t) {
  let e = t.field(hr.state, !1);
  return e ? e.tree : jn.empty;
}
class OF {
  constructor(e, n = e.length) {
    this.doc = e, this.length = n, this.cursorPos = 0, this.string = "", this.cursor = e.iter();
  }
  syncTo(e) {
    return this.string = this.cursor.next(e - this.cursorPos).value, this.cursorPos = e + this.string.length, this.cursorPos - this.string.length;
  }
  chunk(e) {
    return this.syncTo(e), this.string;
  }
  get lineChunks() {
    return !0;
  }
  read(e, n) {
    let i = this.cursorPos - this.string.length;
    return e < i || n >= this.cursorPos ? this.doc.sliceString(e, n) : this.string.slice(e - i, n - i);
  }
}
let ta = null;
class Cu {
  constructor(e, n, i = [], r, o, s, l, a) {
    this.parser = e, this.state = n, this.fragments = i, this.tree = r, this.treeLen = o, this.viewport = s, this.skipped = l, this.scheduleOn = a, this.parse = null, this.tempSkipped = [];
  }
  static create(e, n, i) {
    return new Cu(e, n, [], jn.empty, 0, i, [], null);
  }
  startParse() {
    return this.parser.startParse(new OF(this.state.doc), this.fragments);
  }
  work(e, n) {
    return n != null && n >= this.state.doc.length && (n = void 0), this.tree != jn.empty && this.isDone(n ?? this.state.doc.length) ? (this.takeTree(), !0) : this.withContext(() => {
      var i;
      if (typeof e == "number") {
        let r = Date.now() + e;
        e = () => Date.now() > r;
      }
      for (this.parse || (this.parse = this.startParse()), n != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > n) && n < this.state.doc.length && this.parse.stopAt(n); ; ) {
        let r = this.parse.advance();
        if (r)
          if (this.fragments = this.withoutTempSkipped(Ms.addTree(r, this.fragments, this.parse.stoppedAt != null)), this.treeLen = (i = this.parse.stoppedAt) !== null && i !== void 0 ? i : this.state.doc.length, this.tree = r, this.parse = null, this.treeLen < (n ?? this.state.doc.length))
            this.parse = this.startParse();
          else
            return !0;
        if (e())
          return !1;
      }
    });
  }
  takeTree() {
    let e, n;
    this.parse && (e = this.parse.parsedPos) >= this.treeLen && ((this.parse.stoppedAt == null || this.parse.stoppedAt > e) && this.parse.stopAt(e), this.withContext(() => {
      for (; !(n = this.parse.advance()); )
        ;
    }), this.treeLen = e, this.tree = n, this.fragments = this.withoutTempSkipped(Ms.addTree(this.tree, this.fragments, !0)), this.parse = null);
  }
  withContext(e) {
    let n = ta;
    ta = this;
    try {
      return e();
    } finally {
      ta = n;
    }
  }
  withoutTempSkipped(e) {
    for (let n; n = this.tempSkipped.pop(); )
      e = Py(e, n.from, n.to);
    return e;
  }
  changes(e, n) {
    let { fragments: i, tree: r, treeLen: o, viewport: s, skipped: l } = this;
    if (this.takeTree(), !e.empty) {
      let a = [];
      if (e.iterChangedRanges((f, c, u, h) => a.push({ fromA: f, toA: c, fromB: u, toB: h })), i = Ms.applyChanges(i, a), r = jn.empty, o = 0, s = { from: e.mapPos(s.from, -1), to: e.mapPos(s.to, 1) }, this.skipped.length) {
        l = [];
        for (let f of this.skipped) {
          let c = e.mapPos(f.from, 1), u = e.mapPos(f.to, -1);
          c < u && l.push({ from: c, to: u });
        }
      }
    }
    return new Cu(this.parser, n, i, r, o, s, l, this.scheduleOn);
  }
  updateViewport(e) {
    if (this.viewport.from == e.from && this.viewport.to == e.to)
      return !1;
    this.viewport = e;
    let n = this.skipped.length;
    for (let i = 0; i < this.skipped.length; i++) {
      let { from: r, to: o } = this.skipped[i];
      r < e.to && o > e.from && (this.fragments = Py(this.fragments, r, o), this.skipped.splice(i--, 1));
    }
    return this.skipped.length >= n ? !1 : (this.reset(), !0);
  }
  reset() {
    this.parse && (this.takeTree(), this.parse = null);
  }
  skipUntilInView(e, n) {
    this.skipped.push({ from: e, to: n });
  }
  static getSkippingParser(e) {
    return new class extends a4 {
      createParse(n, i, r) {
        let o = r[0].from, s = r[r.length - 1].to;
        return {
          parsedPos: o,
          advance() {
            let a = ta;
            if (a) {
              for (let f of r)
                a.tempSkipped.push(f);
              e && (a.scheduleOn = a.scheduleOn ? Promise.all([a.scheduleOn, e]) : e);
            }
            return this.parsedPos = s, new jn(Ti.none, [], [], s - o);
          },
          stoppedAt: null,
          stopAt() {
          }
        };
      }
    }();
  }
  isDone(e) {
    e = Math.min(e, this.state.doc.length);
    let n = this.fragments;
    return this.treeLen >= e && n.length && n[0].from == 0 && n[0].to >= e;
  }
  static get() {
    return ta;
  }
}
function Py(t, e, n) {
  return Ms.applyChanges(t, [{ fromA: e, toA: n, fromB: e, toB: n }]);
}
class Il {
  constructor(e) {
    this.context = e, this.tree = e.tree;
  }
  apply(e) {
    if (!e.docChanged && this.tree == this.context.tree)
      return this;
    let n = this.context.changes(e.changes, e.state), i = this.context.treeLen == e.startState.doc.length ? void 0 : Math.max(e.changes.mapPos(this.context.treeLen), n.viewport.to);
    return n.work(20, i) || n.takeTree(), new Il(n);
  }
  static init(e) {
    let n = Math.min(3e3, e.doc.length), i = Cu.create(e.facet(Zo).parser, e, { from: 0, to: n });
    return i.work(20, n) || i.takeTree(), new Il(i);
  }
}
hr.state = /* @__PURE__ */ qn.define({
  create: Il.init,
  update(t, e) {
    for (let n of e.effects)
      if (n.is(hr.setState))
        return n.value;
    return e.startState.facet(Zo) != e.state.facet(Zo) ? Il.init(e.state) : t.apply(e);
  }
});
let h4 = (t) => {
  let e = setTimeout(() => t(), 500);
  return () => clearTimeout(e);
};
typeof requestIdleCallback < "u" && (h4 = (t) => {
  let e = -1, n = setTimeout(() => {
    e = requestIdleCallback(t, { timeout: 500 - 100 });
  }, 100);
  return () => e < 0 ? clearTimeout(n) : cancelIdleCallback(e);
});
const Rd = typeof navigator < "u" && (!((Pd = navigator.scheduling) === null || Pd === void 0) && Pd.isInputPending) ? () => navigator.scheduling.isInputPending() : null, TF = /* @__PURE__ */ Bn.fromClass(class {
  constructor(e) {
    this.view = e, this.working = null, this.workScheduled = 0, this.chunkEnd = -1, this.chunkBudget = -1, this.work = this.work.bind(this), this.scheduleWork();
  }
  update(e) {
    let n = this.view.state.field(hr.state).context;
    (n.updateViewport(e.view.viewport) || this.view.viewport.to > n.treeLen) && this.scheduleWork(), e.docChanged && (this.view.hasFocus && (this.chunkBudget += 50), this.scheduleWork()), this.checkAsyncSchedule(n);
  }
  scheduleWork() {
    if (this.working)
      return;
    let { state: e } = this.view, n = e.field(hr.state);
    (n.tree != n.context.tree || !n.context.isDone(e.doc.length)) && (this.working = h4(this.work));
  }
  work(e) {
    this.working = null;
    let n = Date.now();
    if (this.chunkEnd < n && (this.chunkEnd < 0 || this.view.hasFocus) && (this.chunkEnd = n + 3e4, this.chunkBudget = 3e3), this.chunkBudget <= 0)
      return;
    let { state: i, viewport: { to: r } } = this.view, o = i.field(hr.state);
    if (o.tree == o.context.tree && o.context.isDone(r + 1e5))
      return;
    let s = Date.now() + Math.min(this.chunkBudget, 100, e && !Rd ? Math.max(25, e.timeRemaining() - 5) : 1e9), l = o.context.treeLen < r && i.doc.length > r + 1e3, a = o.context.work(() => Rd && Rd() || Date.now() > s, r + (l ? 0 : 1e5));
    this.chunkBudget -= Date.now() - n, (a || this.chunkBudget <= 0) && (o.context.takeTree(), this.view.dispatch({ effects: hr.setState.of(new Il(o.context)) })), this.chunkBudget > 0 && !(a && !l) && this.scheduleWork(), this.checkAsyncSchedule(o.context);
  }
  checkAsyncSchedule(e) {
    e.scheduleOn && (this.workScheduled++, e.scheduleOn.then(() => this.scheduleWork()).catch((n) => xi(this.view.state, n)).then(() => this.workScheduled--), e.scheduleOn = null);
  }
  destroy() {
    this.working && this.working();
  }
  isWorking() {
    return !!(this.working || this.workScheduled > 0);
  }
}, {
  eventHandlers: { focus() {
    this.scheduleWork();
  } }
}), Zo = /* @__PURE__ */ Ge.define({
  combine(t) {
    return t.length ? t[0] : null;
  },
  enables: (t) => [
    hr.state,
    TF,
    Ke.contentAttributes.compute([t], (e) => {
      let n = e.facet(t);
      return n && n.name ? { "data-language": n.name } : {};
    })
  ]
});
class EF {
  constructor(e, n = []) {
    this.language = e, this.support = n, this.extension = [e, n];
  }
}
const PF = /* @__PURE__ */ Ge.define(), Ph = /* @__PURE__ */ Ge.define({
  combine: (t) => {
    if (!t.length)
      return "  ";
    if (!/^(?: +|\t+)$/.test(t[0]))
      throw new Error("Invalid indent unit: " + JSON.stringify(t[0]));
    return t[0];
  }
});
function Su(t) {
  let e = t.facet(Ph);
  return e.charCodeAt(0) == 9 ? t.tabSize * e.length : e.length;
}
function Ya(t, e) {
  let n = "", i = t.tabSize;
  if (t.facet(Ph).charCodeAt(0) == 9)
    for (; e >= i; )
      n += "	", e -= i;
  for (let r = 0; r < e; r++)
    n += " ";
  return n;
}
function Rg(t, e) {
  t instanceof Mt && (t = new Rh(t));
  for (let i of t.state.facet(PF)) {
    let r = i(t, e);
    if (r !== void 0)
      return r;
  }
  let n = ui(t.state);
  return n ? RF(t, n, e) : null;
}
class Rh {
  constructor(e, n = {}) {
    this.state = e, this.options = n, this.unit = Su(e);
  }
  lineAt(e, n = 1) {
    let i = this.state.doc.lineAt(e), { simulateBreak: r, simulateDoubleBreak: o } = this.options;
    return r != null && r >= i.from && r <= i.to ? o && r == e ? { text: "", from: e } : (n < 0 ? r < e : r <= e) ? { text: i.text.slice(r - i.from), from: r } : { text: i.text.slice(0, r - i.from), from: i.from } : i;
  }
  textAfterPos(e, n = 1) {
    if (this.options.simulateDoubleBreak && e == this.options.simulateBreak)
      return "";
    let { text: i, from: r } = this.lineAt(e, n);
    return i.slice(e - r, Math.min(i.length, e + 100 - r));
  }
  column(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), o = this.countColumn(i, e - r), s = this.options.overrideIndentation ? this.options.overrideIndentation(r) : -1;
    return s > -1 && (o += s - this.countColumn(i, i.search(/\S|$/))), o;
  }
  countColumn(e, n = e.length) {
    return gf(e, this.state.tabSize, n);
  }
  lineIndent(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), o = this.options.overrideIndentation;
    if (o) {
      let s = o(r);
      if (s > -1)
        return s;
    }
    return this.countColumn(i, i.search(/\S|$/));
  }
  get simulatedBreak() {
    return this.options.simulateBreak || null;
  }
}
const d4 = /* @__PURE__ */ new Tt();
function RF(t, e, n) {
  return m4(e.resolveInner(n).enterUnfinishedNodesBefore(n), n, t);
}
function IF(t) {
  return t.pos == t.options.simulateBreak && t.options.simulateDoubleBreak;
}
function NF(t) {
  let e = t.type.prop(d4);
  if (e)
    return e;
  let n = t.firstChild, i;
  if (n && (i = n.type.prop(Tt.closedBy))) {
    let r = t.lastChild, o = r && i.indexOf(r.name) > -1;
    return (s) => LF(s, !0, 1, void 0, o && !IF(s) ? r.from : void 0);
  }
  return t.parent == null ? DF : null;
}
function m4(t, e, n) {
  for (; t; t = t.parent) {
    let i = NF(t);
    if (i)
      return i(Ig.create(n, e, t));
  }
  return null;
}
function DF() {
  return 0;
}
class Ig extends Rh {
  constructor(e, n, i) {
    super(e.state, e.options), this.base = e, this.pos = n, this.node = i;
  }
  static create(e, n, i) {
    return new Ig(e, n, i);
  }
  get textAfter() {
    return this.textAfterPos(this.pos);
  }
  get baseIndent() {
    let e = this.state.doc.lineAt(this.node.from);
    for (; ; ) {
      let n = this.node.resolve(e.from);
      for (; n.parent && n.parent.from == n.from; )
        n = n.parent;
      if (jF(n, this.node))
        break;
      e = this.state.doc.lineAt(n.from);
    }
    return this.lineIndent(e.from);
  }
  continue() {
    let e = this.node.parent;
    return e ? m4(e, this.pos, this.base) : 0;
  }
}
function jF(t, e) {
  for (let n = e; n; n = n.parent)
    if (t == n)
      return !0;
  return !1;
}
function BF(t) {
  let e = t.node, n = e.childAfter(e.from), i = e.lastChild;
  if (!n)
    return null;
  let r = t.options.simulateBreak, o = t.state.doc.lineAt(n.from), s = r == null || r <= o.from ? o.to : Math.min(o.to, r);
  for (let l = n.to; ; ) {
    let a = e.childAfter(l);
    if (!a || a == i)
      return null;
    if (!a.type.isSkipped)
      return a.from < s ? n : null;
    l = a.to;
  }
}
function LF(t, e, n, i, r) {
  let o = t.textAfter, s = o.match(/^\s*/)[0].length, l = i && o.slice(s, s + i.length) == i || r == t.pos + s, a = e ? BF(t) : null;
  return a ? l ? t.column(a.from) : t.column(a.to) : t.baseIndent + (l ? 0 : t.unit * n);
}
function Ry({ except: t, units: e = 1 } = {}) {
  return (n) => {
    let i = t && t.test(n.textAfter);
    return n.baseIndent + (i ? 0 : e * n.unit);
  };
}
const xF = 200;
function zF() {
  return Mt.transactionFilter.of((t) => {
    if (!t.docChanged || !t.isUserEvent("input.type") && !t.isUserEvent("input.complete"))
      return t;
    let e = t.startState.languageDataAt("indentOnInput", t.startState.selection.main.head);
    if (!e.length)
      return t;
    let n = t.newDoc, { head: i } = t.newSelection.main, r = n.lineAt(i);
    if (i > r.from + xF)
      return t;
    let o = n.sliceString(r.from, i);
    if (!e.some((f) => f.test(o)))
      return t;
    let { state: s } = t, l = -1, a = [];
    for (let { head: f } of s.selection.ranges) {
      let c = s.doc.lineAt(f);
      if (c.from == l)
        continue;
      l = c.from;
      let u = Rg(s, c.from);
      if (u == null)
        continue;
      let h = /^\s*/.exec(c.text)[0], d = Ya(s, u);
      h != d && a.push({ from: c.from, to: c.from + h.length, insert: d });
    }
    return a.length ? [t, { changes: a, sequential: !0 }] : t;
  });
}
const VF = /* @__PURE__ */ Ge.define(), p4 = /* @__PURE__ */ new Tt();
function FF(t) {
  let e = t.firstChild, n = t.lastChild;
  return e && e.to < n.from ? { from: e.to, to: n.type.isError ? t.to : n.from } : null;
}
function HF(t, e, n) {
  let i = ui(t);
  if (i.length < n)
    return null;
  let r = i.resolveInner(n, 1), o = null;
  for (let s = r; s; s = s.parent) {
    if (s.to <= n || s.from > n)
      continue;
    if (o && s.from < e)
      break;
    let l = s.type.prop(p4);
    if (l && (s.to < i.length - 50 || i.length == t.doc.length || !WF(s))) {
      let a = l(s, t);
      a && a.from <= n && a.from >= e && a.to > n && (o = a);
    }
  }
  return o;
}
function WF(t) {
  let e = t.lastChild;
  return e && e.to == t.to && e.type.isError;
}
function Mu(t, e, n) {
  for (let i of t.facet(VF)) {
    let r = i(t, e, n);
    if (r)
      return r;
  }
  return HF(t, e, n);
}
function g4(t, e) {
  let n = e.mapPos(t.from, 1), i = e.mapPos(t.to, -1);
  return n >= i ? void 0 : { from: n, to: i };
}
const Ih = /* @__PURE__ */ _t.define({ map: g4 }), yf = /* @__PURE__ */ _t.define({ map: g4 });
function b4(t) {
  let e = [];
  for (let { head: n } of t.state.selection.ranges)
    e.some((i) => i.from <= n && i.to >= n) || e.push(t.lineBlockAt(n));
  return e;
}
const js = /* @__PURE__ */ qn.define({
  create() {
    return ot.none;
  },
  update(t, e) {
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(Ih) && !UF(t, n.value.from, n.value.to) ? t = t.update({ add: [Iy.range(n.value.from, n.value.to)] }) : n.is(yf) && (t = t.update({
        filter: (i, r) => n.value.from != i || n.value.to != r,
        filterFrom: n.value.from,
        filterTo: n.value.to
      }));
    if (e.selection) {
      let n = !1, { head: i } = e.selection.main;
      t.between(i, i, (r, o) => {
        r < i && o > i && (n = !0);
      }), n && (t = t.update({
        filterFrom: i,
        filterTo: i,
        filter: (r, o) => o <= i || r >= i
      }));
    }
    return t;
  },
  provide: (t) => Ke.decorations.from(t),
  toJSON(t, e) {
    let n = [];
    return t.between(0, e.doc.length, (i, r) => {
      n.push(i, r);
    }), n;
  },
  fromJSON(t) {
    if (!Array.isArray(t) || t.length % 2)
      throw new RangeError("Invalid JSON for fold state");
    let e = [];
    for (let n = 0; n < t.length; ) {
      let i = t[n++], r = t[n++];
      if (typeof i != "number" || typeof r != "number")
        throw new RangeError("Invalid JSON for fold state");
      e.push(Iy.range(i, r));
    }
    return ot.set(e, !0);
  }
});
function Au(t, e, n) {
  var i;
  let r = null;
  return (i = t.field(js, !1)) === null || i === void 0 || i.between(e, n, (o, s) => {
    (!r || r.from > o) && (r = { from: o, to: s });
  }), r;
}
function UF(t, e, n) {
  let i = !1;
  return t.between(e, e, (r, o) => {
    r == e && o == n && (i = !0);
  }), i;
}
function _4(t, e) {
  return t.field(js, !1) ? e : e.concat(_t.appendConfig.of(v4()));
}
const qF = (t) => {
  for (let e of b4(t)) {
    let n = Mu(t.state, e.from, e.to);
    if (n)
      return t.dispatch({ effects: _4(t.state, [Ih.of(n), y4(t, n)]) }), !0;
  }
  return !1;
}, JF = (t) => {
  if (!t.state.field(js, !1))
    return !1;
  let e = [];
  for (let n of b4(t)) {
    let i = Au(t.state, n.from, n.to);
    i && e.push(yf.of(i), y4(t, i, !1));
  }
  return e.length && t.dispatch({ effects: e }), e.length > 0;
};
function y4(t, e, n = !0) {
  let i = t.state.doc.lineAt(e.from).number, r = t.state.doc.lineAt(e.to).number;
  return Ke.announce.of(`${t.state.phrase(n ? "Folded lines" : "Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`);
}
const KF = (t) => {
  let { state: e } = t, n = [];
  for (let i = 0; i < e.doc.length; ) {
    let r = t.lineBlockAt(i), o = Mu(e, r.from, r.to);
    o && n.push(Ih.of(o)), i = (o ? t.lineBlockAt(o.to) : r).to + 1;
  }
  return n.length && t.dispatch({ effects: _4(t.state, n) }), !!n.length;
}, GF = (t) => {
  let e = t.state.field(js, !1);
  if (!e || !e.size)
    return !1;
  let n = [];
  return e.between(0, t.state.doc.length, (i, r) => {
    n.push(yf.of({ from: i, to: r }));
  }), t.dispatch({ effects: n }), !0;
}, XF = [
  { key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: qF },
  { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: JF },
  { key: "Ctrl-Alt-[", run: KF },
  { key: "Ctrl-Alt-]", run: GF }
], QF = {
  placeholderDOM: null,
  placeholderText: "…"
}, w4 = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, QF);
  }
});
function v4(t) {
  let e = [js, $F];
  return t && e.push(w4.of(t)), e;
}
const Iy = /* @__PURE__ */ ot.replace({ widget: /* @__PURE__ */ new class extends rs {
  toDOM(t) {
    let { state: e } = t, n = e.facet(w4), i = (o) => {
      let s = t.lineBlockAt(t.posAtDOM(o.target)), l = Au(t.state, s.from, s.to);
      l && t.dispatch({ effects: yf.of(l) }), o.preventDefault();
    };
    if (n.placeholderDOM)
      return n.placeholderDOM(t, i);
    let r = document.createElement("span");
    return r.textContent = n.placeholderText, r.setAttribute("aria-label", e.phrase("folded code")), r.title = e.phrase("unfold"), r.className = "cm-foldPlaceholder", r.onclick = i, r;
  }
}() }), YF = {
  openText: "⌄",
  closedText: "›",
  markerDOM: null,
  domEventHandlers: {},
  foldingChanged: () => !1
};
class Id extends Yr {
  constructor(e, n) {
    super(), this.config = e, this.open = n;
  }
  eq(e) {
    return this.config == e.config && this.open == e.open;
  }
  toDOM(e) {
    if (this.config.markerDOM)
      return this.config.markerDOM(this.open);
    let n = document.createElement("span");
    return n.textContent = this.open ? this.config.openText : this.config.closedText, n.title = e.state.phrase(this.open ? "Fold line" : "Unfold line"), n;
  }
}
function ZF(t = {}) {
  let e = Object.assign(Object.assign({}, YF), t), n = new Id(e, !0), i = new Id(e, !1), r = Bn.fromClass(class {
    constructor(s) {
      this.from = s.viewport.from, this.markers = this.buildMarkers(s);
    }
    update(s) {
      (s.docChanged || s.viewportChanged || s.startState.facet(Zo) != s.state.facet(Zo) || s.startState.field(js, !1) != s.state.field(js, !1) || ui(s.startState) != ui(s.state) || e.foldingChanged(s)) && (this.markers = this.buildMarkers(s.view));
    }
    buildMarkers(s) {
      let l = new Go();
      for (let a of s.viewportLineBlocks) {
        let f = Au(s.state, a.from, a.to) ? i : Mu(s.state, a.from, a.to) ? n : null;
        f && l.add(a.from, a.from, f);
      }
      return l.finish();
    }
  }), { domEventHandlers: o } = e;
  return [
    r,
    t4({
      class: "cm-foldGutter",
      markers(s) {
        var l;
        return ((l = s.plugin(r)) === null || l === void 0 ? void 0 : l.markers) || Lt.empty;
      },
      initialSpacer() {
        return new Id(e, !1);
      },
      domEventHandlers: Object.assign(Object.assign({}, o), { click: (s, l, a) => {
        if (o.click && o.click(s, l, a))
          return !0;
        let f = Au(s.state, l.from, l.to);
        if (f)
          return s.dispatch({ effects: yf.of(f) }), !0;
        let c = Mu(s.state, l.from, l.to);
        return c ? (s.dispatch({ effects: Ih.of(c) }), !0) : !1;
      } })
    }),
    v4()
  ];
}
const $F = /* @__PURE__ */ Ke.baseTheme({
  ".cm-foldPlaceholder": {
    backgroundColor: "#eee",
    border: "1px solid #ddd",
    color: "#888",
    borderRadius: ".2em",
    margin: "0 1px",
    padding: "0 1px",
    cursor: "pointer"
  },
  ".cm-foldGutter span": {
    padding: "0 1px",
    cursor: "pointer"
  }
});
class wf {
  constructor(e, n) {
    this.specs = e;
    let i;
    function r(l) {
      let a = Xo.newName();
      return (i || (i = /* @__PURE__ */ Object.create(null)))["." + a] = l, a;
    }
    const o = typeof n.all == "string" ? n.all : n.all ? r(n.all) : void 0, s = n.scope;
    this.scope = s instanceof hr ? (l) => l.prop(Qa) == s.data : s ? (l) => l == s : void 0, this.style = u4(e.map((l) => ({
      tag: l.tag,
      class: l.class || r(Object.assign({}, l, { tag: null }))
    })), {
      all: o
    }).style, this.module = i ? new Xo(i) : null, this.themeType = n.themeType;
  }
  static define(e, n) {
    return new wf(e, n || {});
  }
}
const op = /* @__PURE__ */ Ge.define(), k4 = /* @__PURE__ */ Ge.define({
  combine(t) {
    return t.length ? [t[0]] : null;
  }
});
function Nd(t) {
  let e = t.facet(op);
  return e.length ? e : t.facet(k4);
}
function C4(t, e) {
  let n = [tH], i;
  return t instanceof wf && (t.module && n.push(Ke.styleModule.of(t.module)), i = t.themeType), e != null && e.fallback ? n.push(k4.of(t)) : i ? n.push(op.computeN([Ke.darkTheme], (r) => r.facet(Ke.darkTheme) == (i == "dark") ? [t] : [])) : n.push(op.of(t)), n;
}
class eH {
  constructor(e) {
    this.markCache = /* @__PURE__ */ Object.create(null), this.tree = ui(e.state), this.decorations = this.buildDeco(e, Nd(e.state));
  }
  update(e) {
    let n = ui(e.state), i = Nd(e.state), r = i != Nd(e.startState);
    n.length < e.view.viewport.to && !r && n.type == this.tree.type ? this.decorations = this.decorations.map(e.changes) : (n != this.tree || e.viewportChanged || r) && (this.tree = n, this.decorations = this.buildDeco(e.view, i));
  }
  buildDeco(e, n) {
    if (!n || !this.tree.length)
      return ot.none;
    let i = new Go();
    for (let { from: r, to: o } of e.visibleRanges)
      CF(this.tree, n, (s, l, a) => {
        i.add(s, l, this.markCache[a] || (this.markCache[a] = ot.mark({ class: a })));
      }, r, o);
    return i.finish();
  }
}
const tH = /* @__PURE__ */ Jl.high(/* @__PURE__ */ Bn.fromClass(eH, {
  decorations: (t) => t.decorations
})), nH = /* @__PURE__ */ wf.define([
  {
    tag: Me.meta,
    color: "#404740"
  },
  {
    tag: Me.link,
    textDecoration: "underline"
  },
  {
    tag: Me.heading,
    textDecoration: "underline",
    fontWeight: "bold"
  },
  {
    tag: Me.emphasis,
    fontStyle: "italic"
  },
  {
    tag: Me.strong,
    fontWeight: "bold"
  },
  {
    tag: Me.strikethrough,
    textDecoration: "line-through"
  },
  {
    tag: Me.keyword,
    color: "#708"
  },
  {
    tag: [Me.atom, Me.bool, Me.url, Me.contentSeparator, Me.labelName],
    color: "#219"
  },
  {
    tag: [Me.literal, Me.inserted],
    color: "#164"
  },
  {
    tag: [Me.string, Me.deleted],
    color: "#a11"
  },
  {
    tag: [Me.regexp, Me.escape, /* @__PURE__ */ Me.special(Me.string)],
    color: "#e40"
  },
  {
    tag: /* @__PURE__ */ Me.definition(Me.variableName),
    color: "#00f"
  },
  {
    tag: /* @__PURE__ */ Me.local(Me.variableName),
    color: "#30a"
  },
  {
    tag: [Me.typeName, Me.namespace],
    color: "#085"
  },
  {
    tag: Me.className,
    color: "#167"
  },
  {
    tag: [/* @__PURE__ */ Me.special(Me.variableName), Me.macroName],
    color: "#256"
  },
  {
    tag: /* @__PURE__ */ Me.definition(Me.propertyName),
    color: "#00c"
  },
  {
    tag: Me.comment,
    color: "#940"
  },
  {
    tag: Me.invalid,
    color: "#f00"
  }
]), iH = /* @__PURE__ */ Ke.baseTheme({
  "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" },
  "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" }
}), S4 = 1e4, M4 = "()[]{}", A4 = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      afterCursor: !0,
      brackets: M4,
      maxScanDistance: S4,
      renderMatch: sH
    });
  }
}), rH = /* @__PURE__ */ ot.mark({ class: "cm-matchingBracket" }), oH = /* @__PURE__ */ ot.mark({ class: "cm-nonmatchingBracket" });
function sH(t) {
  let e = [], n = t.matched ? rH : oH;
  return e.push(n.range(t.start.from, t.start.to)), t.end && e.push(n.range(t.end.from, t.end.to)), e;
}
const lH = /* @__PURE__ */ qn.define({
  create() {
    return ot.none;
  },
  update(t, e) {
    if (!e.docChanged && !e.selection)
      return t;
    let n = [], i = e.state.facet(A4);
    for (let r of e.state.selection.ranges) {
      if (!r.empty)
        continue;
      let o = Dr(e.state, r.head, -1, i) || r.head > 0 && Dr(e.state, r.head - 1, 1, i) || i.afterCursor && (Dr(e.state, r.head, 1, i) || r.head < e.state.doc.length && Dr(e.state, r.head + 1, -1, i));
      o && (n = n.concat(i.renderMatch(o, e.state)));
    }
    return ot.set(n, !0);
  },
  provide: (t) => Ke.decorations.from(t)
}), aH = [
  lH,
  iH
];
function fH(t = {}) {
  return [A4.of(t), aH];
}
function sp(t, e, n) {
  let i = t.prop(e < 0 ? Tt.openedBy : Tt.closedBy);
  if (i)
    return i;
  if (t.name.length == 1) {
    let r = n.indexOf(t.name);
    if (r > -1 && r % 2 == (e < 0 ? 1 : 0))
      return [n[r + e]];
  }
  return null;
}
function Dr(t, e, n, i = {}) {
  let r = i.maxScanDistance || S4, o = i.brackets || M4, s = ui(t), l = s.resolveInner(e, n);
  for (let a = l; a; a = a.parent) {
    let f = sp(a.type, n, o);
    if (f && a.from < a.to)
      return cH(t, e, n, a, f, o);
  }
  return uH(t, e, n, s, l.type, r, o);
}
function cH(t, e, n, i, r, o) {
  let s = i.parent, l = { from: i.from, to: i.to }, a = 0, f = s == null ? void 0 : s.cursor();
  if (f && (n < 0 ? f.childBefore(i.from) : f.childAfter(i.to)))
    do
      if (n < 0 ? f.to <= i.from : f.from >= i.to) {
        if (a == 0 && r.indexOf(f.type.name) > -1 && f.from < f.to)
          return { start: l, end: { from: f.from, to: f.to }, matched: !0 };
        if (sp(f.type, n, o))
          a++;
        else if (sp(f.type, -n, o)) {
          if (a == 0)
            return {
              start: l,
              end: f.from == f.to ? void 0 : { from: f.from, to: f.to },
              matched: !1
            };
          a--;
        }
      }
    while (n < 0 ? f.prevSibling() : f.nextSibling());
  return { start: l, matched: !1 };
}
function uH(t, e, n, i, r, o, s) {
  let l = n < 0 ? t.sliceDoc(e - 1, e) : t.sliceDoc(e, e + 1), a = s.indexOf(l);
  if (a < 0 || a % 2 == 0 != n > 0)
    return null;
  let f = { from: n < 0 ? e - 1 : e, to: n > 0 ? e + 1 : e }, c = t.doc.iterRange(e, n > 0 ? t.doc.length : 0), u = 0;
  for (let h = 0; !c.next().done && h <= o; ) {
    let d = c.value;
    n < 0 && (h += d.length);
    let m = e + h * n;
    for (let g = n > 0 ? 0 : d.length - 1, _ = n > 0 ? d.length : -1; g != _; g += n) {
      let b = s.indexOf(d[g]);
      if (!(b < 0 || i.resolveInner(m + g, 1).type != r))
        if (b % 2 == 0 == n > 0)
          u++;
        else {
          if (u == 1)
            return { start: f, end: { from: m + g, to: m + g + 1 }, matched: b >> 1 == a >> 1 };
          u--;
        }
    }
    n > 0 && (h += d.length);
  }
  return c.done ? { start: f, matched: !1 } : null;
}
const hH = /* @__PURE__ */ Object.create(null), Ny = [Ti.none], Dy = [], dH = /* @__PURE__ */ Object.create(null);
for (let [t, e] of [
  ["variable", "variableName"],
  ["variable-2", "variableName.special"],
  ["string-2", "string.special"],
  ["def", "variableName.definition"],
  ["tag", "tagName"],
  ["attribute", "attributeName"],
  ["type", "typeName"],
  ["builtin", "variableName.standard"],
  ["qualifier", "modifier"],
  ["error", "invalid"],
  ["header", "heading"],
  ["property", "propertyName"]
])
  dH[t] = /* @__PURE__ */ mH(hH, e);
function Dd(t, e) {
  Dy.indexOf(t) > -1 || (Dy.push(t), console.warn(e));
}
function mH(t, e) {
  let n = null;
  for (let o of e.split(".")) {
    let s = t[o] || Me[o];
    s ? typeof s == "function" ? n ? n = s(n) : Dd(o, `Modifier ${o} used at start of tag`) : n ? Dd(o, `Tag ${o} used as modifier`) : n = s : Dd(o, `Unknown highlighting tag ${o}`);
  }
  if (!n)
    return 0;
  let i = e.replace(/ /g, "_"), r = Ti.define({
    id: Ny.length,
    name: i,
    props: [f4({ [i]: n })]
  });
  return Ny.push(r), r.id;
}
const pH = (t) => {
  let e = Dg(t.state);
  return e.line ? gH(t) : e.block ? _H(t) : !1;
};
function Ng(t, e) {
  return ({ state: n, dispatch: i }) => {
    if (n.readOnly)
      return !1;
    let r = t(e, n);
    return r ? (i(n.update(r)), !0) : !1;
  };
}
const gH = /* @__PURE__ */ Ng(vH, 0), bH = /* @__PURE__ */ Ng(O4, 0), _H = /* @__PURE__ */ Ng((t, e) => O4(t, e, wH(e)), 0);
function Dg(t, e = t.selection.main.head) {
  let n = t.languageDataAt("commentTokens", e);
  return n.length ? n[0] : {};
}
const na = 50;
function yH(t, { open: e, close: n }, i, r) {
  let o = t.sliceDoc(i - na, i), s = t.sliceDoc(r, r + na), l = /\s*$/.exec(o)[0].length, a = /^\s*/.exec(s)[0].length, f = o.length - l;
  if (o.slice(f - e.length, f) == e && s.slice(a, a + n.length) == n)
    return {
      open: { pos: i - l, margin: l && 1 },
      close: { pos: r + a, margin: a && 1 }
    };
  let c, u;
  r - i <= 2 * na ? c = u = t.sliceDoc(i, r) : (c = t.sliceDoc(i, i + na), u = t.sliceDoc(r - na, r));
  let h = /^\s*/.exec(c)[0].length, d = /\s*$/.exec(u)[0].length, m = u.length - d - n.length;
  return c.slice(h, h + e.length) == e && u.slice(m, m + n.length) == n ? {
    open: {
      pos: i + h + e.length,
      margin: /\s/.test(c.charAt(h + e.length)) ? 1 : 0
    },
    close: {
      pos: r - d - n.length,
      margin: /\s/.test(u.charAt(m - 1)) ? 1 : 0
    }
  } : null;
}
function wH(t) {
  let e = [];
  for (let n of t.selection.ranges) {
    let i = t.doc.lineAt(n.from), r = n.to <= i.to ? i : t.doc.lineAt(n.to), o = e.length - 1;
    o >= 0 && e[o].to > i.from ? e[o].to = r.to : e.push({ from: i.from, to: r.to });
  }
  return e;
}
function O4(t, e, n = e.selection.ranges) {
  let i = n.map((o) => Dg(e, o.from).block);
  if (!i.every((o) => o))
    return null;
  let r = n.map((o, s) => yH(e, i[s], o.from, o.to));
  if (t != 2 && !r.every((o) => o))
    return { changes: e.changes(n.map((o, s) => r[s] ? [] : [{ from: o.from, insert: i[s].open + " " }, { from: o.to, insert: " " + i[s].close }])) };
  if (t != 1 && r.some((o) => o)) {
    let o = [];
    for (let s = 0, l; s < r.length; s++)
      if (l = r[s]) {
        let a = i[s], { open: f, close: c } = l;
        o.push({ from: f.pos - a.open.length, to: f.pos + f.margin }, { from: c.pos - c.margin, to: c.pos + a.close.length });
      }
    return { changes: o };
  }
  return null;
}
function vH(t, e, n = e.selection.ranges) {
  let i = [], r = -1;
  for (let { from: o, to: s } of n) {
    let l = i.length, a = 1e9;
    for (let f = o; f <= s; ) {
      let c = e.doc.lineAt(f);
      if (c.from > r && (o == s || s > c.from)) {
        r = c.from;
        let u = Dg(e, f).line;
        if (!u)
          continue;
        let h = /^\s*/.exec(c.text)[0].length, d = h == c.length, m = c.text.slice(h, h + u.length) == u ? h : -1;
        h < c.text.length && h < a && (a = h), i.push({ line: c, comment: m, token: u, indent: h, empty: d, single: !1 });
      }
      f = c.to + 1;
    }
    if (a < 1e9)
      for (let f = l; f < i.length; f++)
        i[f].indent < i[f].line.text.length && (i[f].indent = a);
    i.length == l + 1 && (i[l].single = !0);
  }
  if (t != 2 && i.some((o) => o.comment < 0 && (!o.empty || o.single))) {
    let o = [];
    for (let { line: l, token: a, indent: f, empty: c, single: u } of i)
      (u || !c) && o.push({ from: l.from + f, insert: a + " " });
    let s = e.changes(o);
    return { changes: s, selection: e.selection.map(s, 1) };
  } else if (t != 1 && i.some((o) => o.comment >= 0)) {
    let o = [];
    for (let { line: s, comment: l, token: a } of i)
      if (l >= 0) {
        let f = s.from + l, c = f + a.length;
        s.text[c - s.from] == " " && c++, o.push({ from: f, to: c });
      }
    return { changes: o };
  }
  return null;
}
const lp = /* @__PURE__ */ is.define(), kH = /* @__PURE__ */ is.define(), CH = /* @__PURE__ */ Ge.define(), T4 = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      minDepth: 100,
      newGroupDelay: 500
    }, { minDepth: Math.max, newGroupDelay: Math.min });
  }
});
function SH(t) {
  let e = 0;
  return t.iterChangedRanges((n, i) => e = i), e;
}
const jg = /* @__PURE__ */ qn.define({
  create() {
    return jr.empty;
  },
  update(t, e) {
    let n = e.state.facet(T4), i = e.annotation(lp);
    if (i) {
      let a = e.docChanged ? _e.single(SH(e.changes)) : void 0, f = Si.fromTransaction(e, a), c = i.side, u = c == 0 ? t.undone : t.done;
      return f ? u = Tu(u, u.length, n.minDepth, f) : u = R4(u, e.startState.selection), new jr(c == 0 ? i.rest : u, c == 0 ? u : i.rest);
    }
    let r = e.annotation(kH);
    if ((r == "full" || r == "before") && (t = t.isolate()), e.annotation(Wn.addToHistory) === !1)
      return e.changes.empty ? t : t.addMapping(e.changes.desc);
    let o = Si.fromTransaction(e), s = e.annotation(Wn.time), l = e.annotation(Wn.userEvent);
    return o ? t = t.addChanges(o, s, l, n.newGroupDelay, n.minDepth) : e.selection && (t = t.addSelection(e.startState.selection, s, l, n.newGroupDelay)), (r == "full" || r == "after") && (t = t.isolate()), t;
  },
  toJSON(t) {
    return { done: t.done.map((e) => e.toJSON()), undone: t.undone.map((e) => e.toJSON()) };
  },
  fromJSON(t) {
    return new jr(t.done.map(Si.fromJSON), t.undone.map(Si.fromJSON));
  }
});
function MH(t = {}) {
  return [
    jg,
    T4.of(t),
    Ke.domEventHandlers({
      beforeinput(e, n) {
        let i = e.inputType == "historyUndo" ? Bg : e.inputType == "historyRedo" ? Ou : null;
        return i ? (e.preventDefault(), i(n)) : !1;
      }
    })
  ];
}
function Nh(t, e) {
  return function({ state: n, dispatch: i }) {
    if (!e && n.readOnly)
      return !1;
    let r = n.field(jg, !1);
    if (!r)
      return !1;
    let o = r.pop(t, n, e);
    return o ? (i(o), !0) : !1;
  };
}
const Bg = /* @__PURE__ */ Nh(0, !1), Ou = /* @__PURE__ */ Nh(1, !1), AH = /* @__PURE__ */ Nh(0, !0), OH = /* @__PURE__ */ Nh(1, !0);
function E4(t) {
  return function(e) {
    let n = e.field(jg, !1);
    if (!n)
      return 0;
    let i = t == 0 ? n.done : n.undone;
    return i.length - (i.length && !i[0].changes ? 1 : 0);
  };
}
const TH = /* @__PURE__ */ E4(0), EH = /* @__PURE__ */ E4(1);
class Si {
  constructor(e, n, i, r, o) {
    this.changes = e, this.effects = n, this.mapped = i, this.startSelection = r, this.selectionsAfter = o;
  }
  setSelAfter(e) {
    return new Si(this.changes, this.effects, this.mapped, this.startSelection, e);
  }
  toJSON() {
    var e, n, i;
    return {
      changes: (e = this.changes) === null || e === void 0 ? void 0 : e.toJSON(),
      mapped: (n = this.mapped) === null || n === void 0 ? void 0 : n.toJSON(),
      startSelection: (i = this.startSelection) === null || i === void 0 ? void 0 : i.toJSON(),
      selectionsAfter: this.selectionsAfter.map((r) => r.toJSON())
    };
  }
  static fromJSON(e) {
    return new Si(e.changes && Hn.fromJSON(e.changes), [], e.mapped && Vr.fromJSON(e.mapped), e.startSelection && _e.fromJSON(e.startSelection), e.selectionsAfter.map(_e.fromJSON));
  }
  static fromTransaction(e, n) {
    let i = qi;
    for (let r of e.startState.facet(CH)) {
      let o = r(e);
      o.length && (i = i.concat(o));
    }
    return !i.length && e.changes.empty ? null : new Si(e.changes.invert(e.startState.doc), i, void 0, n || e.startState.selection, qi);
  }
  static selection(e) {
    return new Si(void 0, qi, void 0, void 0, e);
  }
}
function Tu(t, e, n, i) {
  let r = e + 1 > n + 20 ? e - n - 1 : 0, o = t.slice(r, e);
  return o.push(i), o;
}
function PH(t, e) {
  let n = [], i = !1;
  return t.iterChangedRanges((r, o) => n.push(r, o)), e.iterChangedRanges((r, o, s, l) => {
    for (let a = 0; a < n.length; ) {
      let f = n[a++], c = n[a++];
      l >= f && s <= c && (i = !0);
    }
  }), i;
}
function RH(t, e) {
  return t.ranges.length == e.ranges.length && t.ranges.filter((n, i) => n.empty != e.ranges[i].empty).length === 0;
}
function P4(t, e) {
  return t.length ? e.length ? t.concat(e) : t : e;
}
const qi = [], IH = 200;
function R4(t, e) {
  if (t.length) {
    let n = t[t.length - 1], i = n.selectionsAfter.slice(Math.max(0, n.selectionsAfter.length - IH));
    return i.length && i[i.length - 1].eq(e) ? t : (i.push(e), Tu(t, t.length - 1, 1e9, n.setSelAfter(i)));
  } else
    return [Si.selection([e])];
}
function NH(t) {
  let e = t[t.length - 1], n = t.slice();
  return n[t.length - 1] = e.setSelAfter(e.selectionsAfter.slice(0, e.selectionsAfter.length - 1)), n;
}
function jd(t, e) {
  if (!t.length)
    return t;
  let n = t.length, i = qi;
  for (; n; ) {
    let r = DH(t[n - 1], e, i);
    if (r.changes && !r.changes.empty || r.effects.length) {
      let o = t.slice(0, n);
      return o[n - 1] = r, o;
    } else
      e = r.mapped, n--, i = r.selectionsAfter;
  }
  return i.length ? [Si.selection(i)] : qi;
}
function DH(t, e, n) {
  let i = P4(t.selectionsAfter.length ? t.selectionsAfter.map((l) => l.map(e)) : qi, n);
  if (!t.changes)
    return Si.selection(i);
  let r = t.changes.map(e), o = e.mapDesc(t.changes, !0), s = t.mapped ? t.mapped.composeDesc(o) : o;
  return new Si(r, _t.mapEffects(t.effects, e), s, t.startSelection.map(o), i);
}
const jH = /^(input\.type|delete)($|\.)/;
class jr {
  constructor(e, n, i = 0, r = void 0) {
    this.done = e, this.undone = n, this.prevTime = i, this.prevUserEvent = r;
  }
  isolate() {
    return this.prevTime ? new jr(this.done, this.undone) : this;
  }
  addChanges(e, n, i, r, o) {
    let s = this.done, l = s[s.length - 1];
    return l && l.changes && !l.changes.empty && e.changes && (!i || jH.test(i)) && (!l.selectionsAfter.length && n - this.prevTime < r && PH(l.changes, e.changes) || i == "input.type.compose") ? s = Tu(s, s.length - 1, o, new Si(e.changes.compose(l.changes), P4(e.effects, l.effects), l.mapped, l.startSelection, qi)) : s = Tu(s, s.length, o, e), new jr(s, qi, n, i);
  }
  addSelection(e, n, i, r) {
    let o = this.done.length ? this.done[this.done.length - 1].selectionsAfter : qi;
    return o.length > 0 && n - this.prevTime < r && i == this.prevUserEvent && i && /^select($|\.)/.test(i) && RH(o[o.length - 1], e) ? this : new jr(R4(this.done, e), this.undone, n, i);
  }
  addMapping(e) {
    return new jr(jd(this.done, e), jd(this.undone, e), this.prevTime, this.prevUserEvent);
  }
  pop(e, n, i) {
    let r = e == 0 ? this.done : this.undone;
    if (r.length == 0)
      return null;
    let o = r[r.length - 1];
    if (i && o.selectionsAfter.length)
      return n.update({
        selection: o.selectionsAfter[o.selectionsAfter.length - 1],
        annotations: lp.of({ side: e, rest: NH(r) }),
        userEvent: e == 0 ? "select.undo" : "select.redo",
        scrollIntoView: !0
      });
    if (o.changes) {
      let s = r.length == 1 ? qi : r.slice(0, r.length - 1);
      return o.mapped && (s = jd(s, o.mapped)), n.update({
        changes: o.changes,
        selection: o.startSelection,
        effects: o.effects,
        annotations: lp.of({ side: e, rest: s }),
        filter: !1,
        userEvent: e == 0 ? "undo" : "redo",
        scrollIntoView: !0
      });
    } else
      return null;
  }
}
jr.empty = /* @__PURE__ */ new jr(qi, qi);
const BH = [
  { key: "Mod-z", run: Bg, preventDefault: !0 },
  { key: "Mod-y", mac: "Mod-Shift-z", run: Ou, preventDefault: !0 },
  { linux: "Ctrl-Shift-z", run: Ou, preventDefault: !0 },
  { key: "Mod-u", run: AH, preventDefault: !0 },
  { key: "Alt-u", mac: "Mod-Shift-u", run: OH, preventDefault: !0 }
];
function Kl(t, e) {
  return _e.create(t.ranges.map(e), t.mainIndex);
}
function $r(t, e) {
  return t.update({ selection: e, scrollIntoView: !0, userEvent: "select" });
}
function wr({ state: t, dispatch: e }, n) {
  let i = Kl(t.selection, n);
  return i.eq(t.selection) ? !1 : (e($r(t, i)), !0);
}
function Dh(t, e) {
  return _e.cursor(e ? t.to : t.from);
}
function I4(t, e) {
  return wr(t, (n) => n.empty ? t.moveByChar(n, e) : Dh(n, e));
}
function hi(t) {
  return t.textDirectionAt(t.state.selection.main.head) == gn.LTR;
}
const N4 = (t) => I4(t, !hi(t)), D4 = (t) => I4(t, hi(t));
function j4(t, e) {
  return wr(t, (n) => n.empty ? t.moveByGroup(n, e) : Dh(n, e));
}
const LH = (t) => j4(t, !hi(t)), xH = (t) => j4(t, hi(t));
function zH(t, e, n) {
  if (e.type.prop(n))
    return !0;
  let i = e.to - e.from;
  return i && (i > 2 || /[^\s,.;:]/.test(t.sliceDoc(e.from, e.to))) || e.firstChild;
}
function jh(t, e, n) {
  let i = ui(t).resolveInner(e.head), r = n ? Tt.closedBy : Tt.openedBy;
  for (let a = e.head; ; ) {
    let f = n ? i.childAfter(a) : i.childBefore(a);
    if (!f)
      break;
    zH(t, f, r) ? i = f : a = n ? f.to : f.from;
  }
  let o = i.type.prop(r), s, l;
  return o && (s = n ? Dr(t, i.from, 1) : Dr(t, i.to, -1)) && s.matched ? l = n ? s.end.to : s.end.from : l = n ? i.to : i.from, _e.cursor(l, n ? -1 : 1);
}
const VH = (t) => wr(t, (e) => jh(t.state, e, !hi(t))), FH = (t) => wr(t, (e) => jh(t.state, e, hi(t)));
function B4(t, e) {
  return wr(t, (n) => {
    if (!n.empty)
      return Dh(n, e);
    let i = t.moveVertically(n, e);
    return i.head != n.head ? i : t.moveToLineBoundary(n, e);
  });
}
const L4 = (t) => B4(t, !1), x4 = (t) => B4(t, !0);
function z4(t) {
  return Math.max(t.defaultLineHeight, Math.min(t.dom.clientHeight, innerHeight) - 5);
}
function V4(t, e) {
  let { state: n } = t, i = Kl(n.selection, (l) => l.empty ? t.moveVertically(l, e, z4(t)) : Dh(l, e));
  if (i.eq(n.selection))
    return !1;
  let r = t.coordsAtPos(n.selection.main.head), o = t.scrollDOM.getBoundingClientRect(), s;
  return r && r.top > o.top && r.bottom < o.bottom && r.top - o.top <= t.scrollDOM.scrollHeight - t.scrollDOM.scrollTop - t.scrollDOM.clientHeight && (s = Ke.scrollIntoView(i.main.head, { y: "start", yMargin: r.top - o.top })), t.dispatch($r(n, i), { effects: s }), !0;
}
const jy = (t) => V4(t, !1), ap = (t) => V4(t, !0);
function os(t, e, n) {
  let i = t.lineBlockAt(e.head), r = t.moveToLineBoundary(e, n);
  if (r.head == e.head && r.head != (n ? i.to : i.from) && (r = t.moveToLineBoundary(e, n, !1)), !n && r.head == i.from && i.length) {
    let o = /^\s*/.exec(t.state.sliceDoc(i.from, Math.min(i.from + 100, i.to)))[0].length;
    o && e.head != i.from + o && (r = _e.cursor(i.from + o));
  }
  return r;
}
const HH = (t) => wr(t, (e) => os(t, e, !0)), WH = (t) => wr(t, (e) => os(t, e, !1)), UH = (t) => wr(t, (e) => os(t, e, !hi(t))), qH = (t) => wr(t, (e) => os(t, e, hi(t))), JH = (t) => wr(t, (e) => _e.cursor(t.lineBlockAt(e.head).from, 1)), KH = (t) => wr(t, (e) => _e.cursor(t.lineBlockAt(e.head).to, -1));
function GH(t, e, n) {
  let i = !1, r = Kl(t.selection, (o) => {
    let s = Dr(t, o.head, -1) || Dr(t, o.head, 1) || o.head > 0 && Dr(t, o.head - 1, 1) || o.head < t.doc.length && Dr(t, o.head + 1, -1);
    if (!s || !s.end)
      return o;
    i = !0;
    let l = s.start.from == o.head ? s.end.to : s.end.from;
    return n ? _e.range(o.anchor, l) : _e.cursor(l);
  });
  return i ? (e($r(t, r)), !0) : !1;
}
const XH = ({ state: t, dispatch: e }) => GH(t, e, !1);
function $i(t, e) {
  let n = Kl(t.state.selection, (i) => {
    let r = e(i);
    return _e.range(i.anchor, r.head, r.goalColumn);
  });
  return n.eq(t.state.selection) ? !1 : (t.dispatch($r(t.state, n)), !0);
}
function F4(t, e) {
  return $i(t, (n) => t.moveByChar(n, e));
}
const H4 = (t) => F4(t, !hi(t)), W4 = (t) => F4(t, hi(t));
function U4(t, e) {
  return $i(t, (n) => t.moveByGroup(n, e));
}
const QH = (t) => U4(t, !hi(t)), YH = (t) => U4(t, hi(t)), ZH = (t) => $i(t, (e) => jh(t.state, e, !hi(t))), $H = (t) => $i(t, (e) => jh(t.state, e, hi(t)));
function q4(t, e) {
  return $i(t, (n) => t.moveVertically(n, e));
}
const J4 = (t) => q4(t, !1), K4 = (t) => q4(t, !0);
function G4(t, e) {
  return $i(t, (n) => t.moveVertically(n, e, z4(t)));
}
const By = (t) => G4(t, !1), Ly = (t) => G4(t, !0), eW = (t) => $i(t, (e) => os(t, e, !0)), tW = (t) => $i(t, (e) => os(t, e, !1)), nW = (t) => $i(t, (e) => os(t, e, !hi(t))), iW = (t) => $i(t, (e) => os(t, e, hi(t))), rW = (t) => $i(t, (e) => _e.cursor(t.lineBlockAt(e.head).from)), oW = (t) => $i(t, (e) => _e.cursor(t.lineBlockAt(e.head).to)), xy = ({ state: t, dispatch: e }) => (e($r(t, { anchor: 0 })), !0), zy = ({ state: t, dispatch: e }) => (e($r(t, { anchor: t.doc.length })), !0), Vy = ({ state: t, dispatch: e }) => (e($r(t, { anchor: t.selection.main.anchor, head: 0 })), !0), Fy = ({ state: t, dispatch: e }) => (e($r(t, { anchor: t.selection.main.anchor, head: t.doc.length })), !0), sW = ({ state: t, dispatch: e }) => (e(t.update({ selection: { anchor: 0, head: t.doc.length }, userEvent: "select" })), !0), lW = ({ state: t, dispatch: e }) => {
  let n = Lh(t).map(({ from: i, to: r }) => _e.range(i, Math.min(r + 1, t.doc.length)));
  return e(t.update({ selection: _e.create(n), userEvent: "select" })), !0;
}, aW = ({ state: t, dispatch: e }) => {
  let n = Kl(t.selection, (i) => {
    var r;
    let o = ui(t).resolveInner(i.head, 1);
    for (; !(o.from < i.from && o.to >= i.to || o.to > i.to && o.from <= i.from || !(!((r = o.parent) === null || r === void 0) && r.parent)); )
      o = o.parent;
    return _e.range(o.to, o.from);
  });
  return e($r(t, n)), !0;
}, fW = ({ state: t, dispatch: e }) => {
  let n = t.selection, i = null;
  return n.ranges.length > 1 ? i = _e.create([n.main]) : n.main.empty || (i = _e.create([_e.cursor(n.main.head)])), i ? (e($r(t, i)), !0) : !1;
};
function Bh(t, e) {
  if (t.state.readOnly)
    return !1;
  let n = "delete.selection", { state: i } = t, r = i.changeByRange((o) => {
    let { from: s, to: l } = o;
    if (s == l) {
      let a = e(s);
      a < s ? (n = "delete.backward", a = oc(t, a, !1)) : a > s && (n = "delete.forward", a = oc(t, a, !0)), s = Math.min(s, a), l = Math.max(l, a);
    } else
      s = oc(t, s, !1), l = oc(t, l, !0);
    return s == l ? { range: o } : { changes: { from: s, to: l }, range: _e.cursor(s) };
  });
  return r.changes.empty ? !1 : (t.dispatch(i.update(r, {
    scrollIntoView: !0,
    userEvent: n,
    effects: n == "delete.selection" ? Ke.announce.of(i.phrase("Selection deleted")) : void 0
  })), !0);
}
function oc(t, e, n) {
  if (t instanceof Ke)
    for (let i of t.state.facet(Ke.atomicRanges).map((r) => r(t)))
      i.between(e, e, (r, o) => {
        r < e && o > e && (e = n ? o : r);
      });
  return e;
}
const X4 = (t, e) => Bh(t, (n) => {
  let { state: i } = t, r = i.doc.lineAt(n), o, s;
  if (!e && n > r.from && n < r.from + 200 && !/[^ \t]/.test(o = r.text.slice(0, n - r.from))) {
    if (o[o.length - 1] == "	")
      return n - 1;
    let l = gf(o, i.tabSize), a = l % Su(i) || Su(i);
    for (let f = 0; f < a && o[o.length - 1 - f] == " "; f++)
      n--;
    s = n;
  } else
    s = pi(r.text, n - r.from, e, e) + r.from, s == n && r.number != (e ? i.doc.lines : 1) && (s += e ? 1 : -1);
  return s;
}), fp = (t) => X4(t, !1), Q4 = (t) => X4(t, !0), Y4 = (t, e) => Bh(t, (n) => {
  let i = n, { state: r } = t, o = r.doc.lineAt(i), s = r.charCategorizer(i);
  for (let l = null; ; ) {
    if (i == (e ? o.to : o.from)) {
      i == n && o.number != (e ? r.doc.lines : 1) && (i += e ? 1 : -1);
      break;
    }
    let a = pi(o.text, i - o.from, e) + o.from, f = o.text.slice(Math.min(i, a) - o.from, Math.max(i, a) - o.from), c = s(f);
    if (l != null && c != l)
      break;
    (f != " " || i != n) && (l = c), i = a;
  }
  return i;
}), Z4 = (t) => Y4(t, !1), cW = (t) => Y4(t, !0), $4 = (t) => Bh(t, (e) => {
  let n = t.lineBlockAt(e).to;
  return e < n ? n : Math.min(t.state.doc.length, e + 1);
}), uW = (t) => Bh(t, (e) => {
  let n = t.lineBlockAt(e).from;
  return e > n ? n : Math.max(0, e - 1);
}), hW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => ({
    changes: { from: i.from, to: i.to, insert: Bt.of(["", ""]) },
    range: _e.cursor(i.from)
  }));
  return e(t.update(n, { scrollIntoView: !0, userEvent: "input" })), !0;
}, dW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => {
    if (!i.empty || i.from == 0 || i.from == t.doc.length)
      return { range: i };
    let r = i.from, o = t.doc.lineAt(r), s = r == o.from ? r - 1 : pi(o.text, r - o.from, !1) + o.from, l = r == o.to ? r + 1 : pi(o.text, r - o.from, !0) + o.from;
    return {
      changes: { from: s, to: l, insert: t.doc.slice(r, l).append(t.doc.slice(s, r)) },
      range: _e.cursor(l)
    };
  });
  return n.changes.empty ? !1 : (e(t.update(n, { scrollIntoView: !0, userEvent: "move.character" })), !0);
};
function Lh(t) {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.from), o = t.doc.lineAt(i.to);
    if (!i.empty && i.to == o.from && (o = t.doc.lineAt(i.to - 1)), n >= r.number) {
      let s = e[e.length - 1];
      s.to = o.to, s.ranges.push(i);
    } else
      e.push({ from: r.from, to: o.to, ranges: [i] });
    n = o.number + 1;
  }
  return e;
}
function e5(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [], r = [];
  for (let o of Lh(t)) {
    if (n ? o.to == t.doc.length : o.from == 0)
      continue;
    let s = t.doc.lineAt(n ? o.to + 1 : o.from - 1), l = s.length + 1;
    if (n) {
      i.push({ from: o.to, to: s.to }, { from: o.from, insert: s.text + t.lineBreak });
      for (let a of o.ranges)
        r.push(_e.range(Math.min(t.doc.length, a.anchor + l), Math.min(t.doc.length, a.head + l)));
    } else {
      i.push({ from: s.from, to: o.from }, { from: o.to, insert: t.lineBreak + s.text });
      for (let a of o.ranges)
        r.push(_e.range(a.anchor - l, a.head - l));
    }
  }
  return i.length ? (e(t.update({
    changes: i,
    scrollIntoView: !0,
    selection: _e.create(r, t.selection.mainIndex),
    userEvent: "move.line"
  })), !0) : !1;
}
const mW = ({ state: t, dispatch: e }) => e5(t, e, !1), pW = ({ state: t, dispatch: e }) => e5(t, e, !0);
function t5(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [];
  for (let r of Lh(t))
    n ? i.push({ from: r.from, insert: t.doc.slice(r.from, r.to) + t.lineBreak }) : i.push({ from: r.to, insert: t.lineBreak + t.doc.slice(r.from, r.to) });
  return e(t.update({ changes: i, scrollIntoView: !0, userEvent: "input.copyline" })), !0;
}
const gW = ({ state: t, dispatch: e }) => t5(t, e, !1), bW = ({ state: t, dispatch: e }) => t5(t, e, !0), _W = (t) => {
  if (t.state.readOnly)
    return !1;
  let { state: e } = t, n = e.changes(Lh(e).map(({ from: r, to: o }) => (r > 0 ? r-- : o < e.doc.length && o++, { from: r, to: o }))), i = Kl(e.selection, (r) => t.moveVertically(r, !0)).map(n);
  return t.dispatch({ changes: n, selection: i, scrollIntoView: !0, userEvent: "delete.line" }), !0;
};
function yW(t, e) {
  if (/\(\)|\[\]|\{\}/.test(t.sliceDoc(e - 1, e + 1)))
    return { from: e, to: e };
  let n = ui(t).resolveInner(e), i = n.childBefore(e), r = n.childAfter(e), o;
  return i && r && i.to <= e && r.from >= e && (o = i.type.prop(Tt.closedBy)) && o.indexOf(r.name) > -1 && t.doc.lineAt(i.to).from == t.doc.lineAt(r.from).from ? { from: i.to, to: r.from } : null;
}
const wW = /* @__PURE__ */ n5(!1), vW = /* @__PURE__ */ n5(!0);
function n5(t) {
  return ({ state: e, dispatch: n }) => {
    if (e.readOnly)
      return !1;
    let i = e.changeByRange((r) => {
      let { from: o, to: s } = r, l = e.doc.lineAt(o), a = !t && o == s && yW(e, o);
      t && (o = s = (s <= l.to ? l : e.doc.lineAt(s)).to);
      let f = new Rh(e, { simulateBreak: o, simulateDoubleBreak: !!a }), c = Rg(f, o);
      for (c == null && (c = /^\s*/.exec(e.doc.lineAt(o).text)[0].length); s < l.to && /\s/.test(l.text[s - l.from]); )
        s++;
      a ? { from: o, to: s } = a : o > l.from && o < l.from + 100 && !/\S/.test(l.text.slice(0, o)) && (o = l.from);
      let u = ["", Ya(e, c)];
      return a && u.push(Ya(e, f.lineIndent(l.from, -1))), {
        changes: { from: o, to: s, insert: Bt.of(u) },
        range: _e.cursor(o + 1 + u[1].length)
      };
    });
    return n(e.update(i, { scrollIntoView: !0, userEvent: "input" })), !0;
  };
}
function Lg(t, e) {
  let n = -1;
  return t.changeByRange((i) => {
    let r = [];
    for (let s = i.from; s <= i.to; ) {
      let l = t.doc.lineAt(s);
      l.number > n && (i.empty || i.to > l.from) && (e(l, r, i), n = l.number), s = l.to + 1;
    }
    let o = t.changes(r);
    return {
      changes: r,
      range: _e.range(o.mapPos(i.anchor, 1), o.mapPos(i.head, 1))
    };
  });
}
const kW = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = /* @__PURE__ */ Object.create(null), i = new Rh(t, { overrideIndentation: (o) => {
    let s = n[o];
    return s ?? -1;
  } }), r = Lg(t, (o, s, l) => {
    let a = Rg(i, o.from);
    if (a == null)
      return;
    /\S/.test(o.text) || (a = 0);
    let f = /^\s*/.exec(o.text)[0], c = Ya(t, a);
    (f != c || l.from < o.from + f.length) && (n[o.from] = a, s.push({ from: o.from, to: o.from + f.length, insert: c }));
  });
  return r.changes.empty || e(t.update(r, { userEvent: "indent" })), !0;
}, i5 = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Lg(t, (n, i) => {
  i.push({ from: n.from, insert: t.facet(Ph) });
}), { userEvent: "input.indent" })), !0), r5 = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Lg(t, (n, i) => {
  let r = /^\s*/.exec(n.text)[0];
  if (!r)
    return;
  let o = gf(r, t.tabSize), s = 0, l = Ya(t, Math.max(0, o - Su(t)));
  for (; s < r.length && s < l.length && r.charCodeAt(s) == l.charCodeAt(s); )
    s++;
  i.push({ from: n.from + s, to: n.from + r.length, insert: l.slice(s) });
}), { userEvent: "delete.dedent" })), !0), CW = [
  { key: "Ctrl-b", run: N4, shift: H4, preventDefault: !0 },
  { key: "Ctrl-f", run: D4, shift: W4 },
  { key: "Ctrl-p", run: L4, shift: J4 },
  { key: "Ctrl-n", run: x4, shift: K4 },
  { key: "Ctrl-a", run: JH, shift: rW },
  { key: "Ctrl-e", run: KH, shift: oW },
  { key: "Ctrl-d", run: Q4 },
  { key: "Ctrl-h", run: fp },
  { key: "Ctrl-k", run: $4 },
  { key: "Ctrl-Alt-h", run: Z4 },
  { key: "Ctrl-o", run: hW },
  { key: "Ctrl-t", run: dW },
  { key: "Ctrl-v", run: ap }
], SW = /* @__PURE__ */ [
  { key: "ArrowLeft", run: N4, shift: H4, preventDefault: !0 },
  { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: LH, shift: QH, preventDefault: !0 },
  { mac: "Cmd-ArrowLeft", run: UH, shift: nW, preventDefault: !0 },
  { key: "ArrowRight", run: D4, shift: W4, preventDefault: !0 },
  { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: xH, shift: YH, preventDefault: !0 },
  { mac: "Cmd-ArrowRight", run: qH, shift: iW, preventDefault: !0 },
  { key: "ArrowUp", run: L4, shift: J4, preventDefault: !0 },
  { mac: "Cmd-ArrowUp", run: xy, shift: Vy },
  { mac: "Ctrl-ArrowUp", run: jy, shift: By },
  { key: "ArrowDown", run: x4, shift: K4, preventDefault: !0 },
  { mac: "Cmd-ArrowDown", run: zy, shift: Fy },
  { mac: "Ctrl-ArrowDown", run: ap, shift: Ly },
  { key: "PageUp", run: jy, shift: By },
  { key: "PageDown", run: ap, shift: Ly },
  { key: "Home", run: WH, shift: tW, preventDefault: !0 },
  { key: "Mod-Home", run: xy, shift: Vy },
  { key: "End", run: HH, shift: eW, preventDefault: !0 },
  { key: "Mod-End", run: zy, shift: Fy },
  { key: "Enter", run: wW },
  { key: "Mod-a", run: sW },
  { key: "Backspace", run: fp, shift: fp },
  { key: "Delete", run: Q4 },
  { key: "Mod-Backspace", mac: "Alt-Backspace", run: Z4 },
  { key: "Mod-Delete", mac: "Alt-Delete", run: cW },
  { mac: "Mod-Backspace", run: uW },
  { mac: "Mod-Delete", run: $4 }
].concat(/* @__PURE__ */ CW.map((t) => ({ mac: t.key, run: t.run, shift: t.shift }))), MW = /* @__PURE__ */ [
  { key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: VH, shift: ZH },
  { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: FH, shift: $H },
  { key: "Alt-ArrowUp", run: mW },
  { key: "Shift-Alt-ArrowUp", run: gW },
  { key: "Alt-ArrowDown", run: pW },
  { key: "Shift-Alt-ArrowDown", run: bW },
  { key: "Escape", run: fW },
  { key: "Mod-Enter", run: vW },
  { key: "Alt-l", mac: "Ctrl-l", run: lW },
  { key: "Mod-i", run: aW, preventDefault: !0 },
  { key: "Mod-[", run: r5 },
  { key: "Mod-]", run: i5 },
  { key: "Mod-Alt-\\", run: kW },
  { key: "Shift-Mod-k", run: _W },
  { key: "Shift-Mod-\\", run: XH },
  { key: "Mod-/", run: pH },
  { key: "Alt-A", run: bH }
].concat(SW), AW = { key: "Tab", run: i5, shift: r5 };
function Qt() {
  var t = arguments[0];
  typeof t == "string" && (t = document.createElement(t));
  var e = 1, n = arguments[1];
  if (n && typeof n == "object" && n.nodeType == null && !Array.isArray(n)) {
    for (var i in n)
      if (Object.prototype.hasOwnProperty.call(n, i)) {
        var r = n[i];
        typeof r == "string" ? t.setAttribute(i, r) : r != null && (t[i] = r);
      }
    e++;
  }
  for (; e < arguments.length; e++)
    o5(t, arguments[e]);
  return t;
}
function o5(t, e) {
  if (typeof e == "string")
    t.appendChild(document.createTextNode(e));
  else if (e != null)
    if (e.nodeType != null)
      t.appendChild(e);
    else if (Array.isArray(e))
      for (var n = 0; n < e.length; n++)
        o5(t, e[n]);
    else
      throw new RangeError("Unsupported child node: " + e);
}
const Hy = typeof String.prototype.normalize == "function" ? (t) => t.normalize("NFKD") : (t) => t;
class Nl {
  constructor(e, n, i = 0, r = e.length, o, s) {
    this.test = s, this.value = { from: 0, to: 0 }, this.done = !1, this.matches = [], this.buffer = "", this.bufferPos = 0, this.iter = e.iterRange(i, r), this.bufferStart = i, this.normalize = o ? (l) => o(Hy(l)) : Hy, this.query = this.normalize(n);
  }
  peek() {
    if (this.bufferPos == this.buffer.length) {
      if (this.bufferStart += this.buffer.length, this.iter.next(), this.iter.done)
        return -1;
      this.bufferPos = 0, this.buffer = this.iter.value;
    }
    return ii(this.buffer, this.bufferPos);
  }
  next() {
    for (; this.matches.length; )
      this.matches.pop();
    return this.nextOverlapping();
  }
  nextOverlapping() {
    for (; ; ) {
      let e = this.peek();
      if (e < 0)
        return this.done = !0, this;
      let n = gg(e), i = this.bufferStart + this.bufferPos;
      this.bufferPos += ji(e);
      let r = this.normalize(n);
      for (let o = 0, s = i; ; o++) {
        let l = r.charCodeAt(o), a = this.match(l, s);
        if (a)
          return this.value = a, this;
        if (o == r.length - 1)
          break;
        s == i && o < n.length && n.charCodeAt(o) == l && s++;
      }
    }
  }
  match(e, n) {
    let i = null;
    for (let r = 0; r < this.matches.length; r += 2) {
      let o = this.matches[r], s = !1;
      this.query.charCodeAt(o) == e && (o == this.query.length - 1 ? i = { from: this.matches[r + 1], to: n + 1 } : (this.matches[r]++, s = !0)), s || (this.matches.splice(r, 2), r -= 2);
    }
    return this.query.charCodeAt(0) == e && (this.query.length == 1 ? i = { from: n, to: n + 1 } : this.matches.push(1, n)), i && this.test && !this.test(i.from, i.to, this.buffer, this.bufferPos) && (i = null), i;
  }
}
typeof Symbol < "u" && (Nl.prototype[Symbol.iterator] = function() {
  return this;
});
const s5 = { from: -1, to: -1, match: /* @__PURE__ */ /.*/.exec("") }, xg = "gm" + (/x/.unicode == null ? "" : "u");
class l5 {
  constructor(e, n, i, r = 0, o = e.length) {
    if (this.text = e, this.to = o, this.curLine = "", this.done = !1, this.value = s5, /\\[sWDnr]|\n|\r|\[\^/.test(n))
      return new a5(e, n, i, r, o);
    this.re = new RegExp(n, xg + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.iter = e.iter();
    let s = e.lineAt(r);
    this.curLineStart = s.from, this.matchPos = Eu(e, r), this.getLine(this.curLineStart);
  }
  getLine(e) {
    this.iter.next(e), this.iter.lineBreak ? this.curLine = "" : (this.curLine = this.iter.value, this.curLineStart + this.curLine.length > this.to && (this.curLine = this.curLine.slice(0, this.to - this.curLineStart)), this.iter.next());
  }
  nextLine() {
    this.curLineStart = this.curLineStart + this.curLine.length + 1, this.curLineStart > this.to ? this.curLine = "" : this.getLine(0);
  }
  next() {
    for (let e = this.matchPos - this.curLineStart; ; ) {
      this.re.lastIndex = e;
      let n = this.matchPos <= this.to && this.re.exec(this.curLine);
      if (n) {
        let i = this.curLineStart + n.index, r = i + n[0].length;
        if (this.matchPos = Eu(this.text, r + (i == r ? 1 : 0)), i == this.curLineStart + this.curLine.length && this.nextLine(), (i < r || i > this.value.to) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this;
        e = this.matchPos - this.curLineStart;
      } else if (this.curLineStart + this.curLine.length < this.to)
        this.nextLine(), e = 0;
      else
        return this.done = !0, this;
    }
  }
}
const Bd = /* @__PURE__ */ new WeakMap();
class hl {
  constructor(e, n) {
    this.from = e, this.text = n;
  }
  get to() {
    return this.from + this.text.length;
  }
  static get(e, n, i) {
    let r = Bd.get(e);
    if (!r || r.from >= i || r.to <= n) {
      let l = new hl(n, e.sliceString(n, i));
      return Bd.set(e, l), l;
    }
    if (r.from == n && r.to == i)
      return r;
    let { text: o, from: s } = r;
    return s > n && (o = e.sliceString(n, s) + o, s = n), r.to < i && (o += e.sliceString(r.to, i)), Bd.set(e, new hl(s, o)), new hl(n, o.slice(n - s, i - s));
  }
}
class a5 {
  constructor(e, n, i, r, o) {
    this.text = e, this.to = o, this.done = !1, this.value = s5, this.matchPos = Eu(e, r), this.re = new RegExp(n, xg + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.flat = hl.get(e, r, this.chunkEnd(r + 5e3));
  }
  chunkEnd(e) {
    return e >= this.to ? this.to : this.text.lineAt(e).to;
  }
  next() {
    for (; ; ) {
      let e = this.re.lastIndex = this.matchPos - this.flat.from, n = this.re.exec(this.flat.text);
      if (n && !n[0] && n.index == e && (this.re.lastIndex = e + 1, n = this.re.exec(this.flat.text)), n) {
        let i = this.flat.from + n.index, r = i + n[0].length;
        if ((this.flat.to >= this.to || n.index + n[0].length <= this.flat.text.length - 10) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this.matchPos = Eu(this.text, r + (i == r ? 1 : 0)), this;
      }
      if (this.flat.to == this.to)
        return this.done = !0, this;
      this.flat = hl.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));
    }
  }
}
typeof Symbol < "u" && (l5.prototype[Symbol.iterator] = a5.prototype[Symbol.iterator] = function() {
  return this;
});
function OW(t) {
  try {
    return new RegExp(t, xg), !0;
  } catch {
    return !1;
  }
}
function Eu(t, e) {
  if (e >= t.length)
    return e;
  let n = t.lineAt(e), i;
  for (; e < n.to && (i = n.text.charCodeAt(e - n.from)) >= 56320 && i < 57344; )
    e++;
  return e;
}
function cp(t) {
  let e = Qt("input", { class: "cm-textfield", name: "line" }), n = Qt("form", {
    class: "cm-gotoLine",
    onkeydown: (r) => {
      r.keyCode == 27 ? (r.preventDefault(), t.dispatch({ effects: Pu.of(!1) }), t.focus()) : r.keyCode == 13 && (r.preventDefault(), i());
    },
    onsubmit: (r) => {
      r.preventDefault(), i();
    }
  }, Qt("label", t.state.phrase("Go to line"), ": ", e), " ", Qt("button", { class: "cm-button", type: "submit" }, t.state.phrase("go")));
  function i() {
    let r = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);
    if (!r)
      return;
    let { state: o } = t, s = o.doc.lineAt(o.selection.main.head), [, l, a, f, c] = r, u = f ? +f.slice(1) : 0, h = a ? +a : s.number;
    if (a && c) {
      let m = h / 100;
      l && (m = m * (l == "-" ? -1 : 1) + s.number / o.doc.lines), h = Math.round(o.doc.lines * m);
    } else
      a && l && (h = h * (l == "-" ? -1 : 1) + s.number);
    let d = o.doc.line(Math.max(1, Math.min(o.doc.lines, h)));
    t.dispatch({
      effects: Pu.of(!1),
      selection: _e.cursor(d.from + Math.max(0, Math.min(u, d.length))),
      scrollIntoView: !0
    }), t.focus();
  }
  return { dom: n };
}
const Pu = /* @__PURE__ */ _t.define(), Wy = /* @__PURE__ */ qn.define({
  create() {
    return !0;
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Pu) && (t = n.value);
    return t;
  },
  provide: (t) => Xa.from(t, (e) => e ? cp : null)
}), TW = (t) => {
  let e = Ga(t, cp);
  if (!e) {
    let n = [Pu.of(!0)];
    t.state.field(Wy, !1) == null && n.push(_t.appendConfig.of([Wy, EW])), t.dispatch({ effects: n }), e = Ga(t, cp);
  }
  return e && e.dom.querySelector("input").focus(), !0;
}, EW = /* @__PURE__ */ Ke.baseTheme({
  ".cm-panel.cm-gotoLine": {
    padding: "2px 6px 4px",
    "& label": { fontSize: "80%" }
  }
}), PW = {
  highlightWordAroundCursor: !1,
  minSelectionLength: 1,
  maxMatches: 100,
  wholeWords: !1
}, f5 = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, PW, {
      highlightWordAroundCursor: (e, n) => e || n,
      minSelectionLength: Math.min,
      maxMatches: Math.min
    });
  }
});
function RW(t) {
  let e = [BW, jW];
  return t && e.push(f5.of(t)), e;
}
const IW = /* @__PURE__ */ ot.mark({ class: "cm-selectionMatch" }), NW = /* @__PURE__ */ ot.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });
function Uy(t, e, n, i) {
  return (n == 0 || t(e.sliceDoc(n - 1, n)) != un.Word) && (i == e.doc.length || t(e.sliceDoc(i, i + 1)) != un.Word);
}
function DW(t, e, n, i) {
  return t(e.sliceDoc(n, n + 1)) == un.Word && t(e.sliceDoc(i - 1, i)) == un.Word;
}
const jW = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.selectionSet || t.docChanged || t.viewportChanged) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = t.state.facet(f5), { state: n } = t, i = n.selection;
    if (i.ranges.length > 1)
      return ot.none;
    let r = i.main, o, s = null;
    if (r.empty) {
      if (!e.highlightWordAroundCursor)
        return ot.none;
      let a = n.wordAt(r.head);
      if (!a)
        return ot.none;
      s = n.charCategorizer(r.head), o = n.sliceDoc(a.from, a.to);
    } else {
      let a = r.to - r.from;
      if (a < e.minSelectionLength || a > 200)
        return ot.none;
      if (e.wholeWords) {
        if (o = n.sliceDoc(r.from, r.to), s = n.charCategorizer(r.head), !(Uy(s, n, r.from, r.to) && DW(s, n, r.from, r.to)))
          return ot.none;
      } else if (o = n.sliceDoc(r.from, r.to).trim(), !o)
        return ot.none;
    }
    let l = [];
    for (let a of t.visibleRanges) {
      let f = new Nl(n.doc, o, a.from, a.to);
      for (; !f.next().done; ) {
        let { from: c, to: u } = f.value;
        if ((!s || Uy(s, n, c, u)) && (r.empty && c <= r.from && u >= r.to ? l.push(NW.range(c, u)) : (c >= r.to || u <= r.from) && l.push(IW.range(c, u)), l.length > e.maxMatches))
          return ot.none;
      }
    }
    return ot.set(l);
  }
}, {
  decorations: (t) => t.decorations
}), BW = /* @__PURE__ */ Ke.baseTheme({
  ".cm-selectionMatch": { backgroundColor: "#99ff7780" },
  ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" }
}), LW = ({ state: t, dispatch: e }) => {
  let { selection: n } = t, i = _e.create(n.ranges.map((r) => t.wordAt(r.head) || _e.cursor(r.head)), n.mainIndex);
  return i.eq(n) ? !1 : (e(t.update({ selection: i })), !0);
};
function xW(t, e) {
  let { main: n, ranges: i } = t.selection, r = t.wordAt(n.head), o = r && r.from == n.from && r.to == n.to;
  for (let s = !1, l = new Nl(t.doc, e, i[i.length - 1].to); ; )
    if (l.next(), l.done) {
      if (s)
        return null;
      l = new Nl(t.doc, e, 0, Math.max(0, i[i.length - 1].from - 1)), s = !0;
    } else {
      if (s && i.some((a) => a.from == l.value.from))
        continue;
      if (o) {
        let a = t.wordAt(l.value.from);
        if (!a || a.from != l.value.from || a.to != l.value.to)
          continue;
      }
      return l.value;
    }
}
const zW = ({ state: t, dispatch: e }) => {
  let { ranges: n } = t.selection;
  if (n.some((o) => o.from === o.to))
    return LW({ state: t, dispatch: e });
  let i = t.sliceDoc(n[0].from, n[0].to);
  if (t.selection.ranges.some((o) => t.sliceDoc(o.from, o.to) != i))
    return !1;
  let r = xW(t, i);
  return r ? (e(t.update({
    selection: t.selection.addRange(_e.range(r.from, r.to), !1),
    effects: Ke.scrollIntoView(r.to)
  })), !0) : !1;
}, xh = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      top: !1,
      caseSensitive: !1,
      literal: !1,
      wholeWord: !1,
      createPanel: (e) => new ZW(e)
    });
  }
});
function VW(t) {
  return t ? [xh.of(t), hp] : hp;
}
class c5 {
  constructor(e) {
    this.search = e.search, this.caseSensitive = !!e.caseSensitive, this.literal = !!e.literal, this.regexp = !!e.regexp, this.replace = e.replace || "", this.valid = !!this.search && (!this.regexp || OW(this.search)), this.unquoted = this.unquote(this.search), this.wholeWord = !!e.wholeWord;
  }
  unquote(e) {
    return this.literal ? e : e.replace(/\\([nrt\\])/g, (n, i) => i == "n" ? `
` : i == "r" ? "\r" : i == "t" ? "	" : "\\");
  }
  eq(e) {
    return this.search == e.search && this.replace == e.replace && this.caseSensitive == e.caseSensitive && this.regexp == e.regexp && this.wholeWord == e.wholeWord;
  }
  create() {
    return this.regexp ? new UW(this) : new HW(this);
  }
  getCursor(e, n = 0, i) {
    let r = e.doc ? e : Mt.create({ doc: e });
    return i == null && (i = r.doc.length), this.regexp ? Zs(this, r, n, i) : Ys(this, r, n, i);
  }
}
class u5 {
  constructor(e) {
    this.spec = e;
  }
}
function Ys(t, e, n, i) {
  return new Nl(e.doc, t.unquoted, n, i, t.caseSensitive ? void 0 : (r) => r.toLowerCase(), t.wholeWord ? FW(e.doc, e.charCategorizer(e.selection.main.head)) : void 0);
}
function FW(t, e) {
  return (n, i, r, o) => ((o > n || o + r.length < i) && (o = Math.max(0, n - 2), r = t.sliceString(o, Math.min(t.length, i + 2))), (e(Ru(r, n - o)) != un.Word || e(Iu(r, n - o)) != un.Word) && (e(Iu(r, i - o)) != un.Word || e(Ru(r, i - o)) != un.Word));
}
class HW extends u5 {
  constructor(e) {
    super(e);
  }
  nextMatch(e, n, i) {
    let r = Ys(this.spec, e, i, e.doc.length).nextOverlapping();
    return r.done && (r = Ys(this.spec, e, 0, n).nextOverlapping()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = i; ; ) {
      let o = Math.max(n, r - 1e4 - this.spec.unquoted.length), s = Ys(this.spec, e, o, r), l = null;
      for (; !s.nextOverlapping().done; )
        l = s.value;
      if (l)
        return l;
      if (o == n)
        return null;
      r -= 1e4;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace);
  }
  matchAll(e, n) {
    let i = Ys(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let o = Ys(this.spec, e, Math.max(0, n - this.spec.unquoted.length), Math.min(i + this.spec.unquoted.length, e.doc.length));
    for (; !o.next().done; )
      r(o.value.from, o.value.to);
  }
}
function Zs(t, e, n, i) {
  return new l5(e.doc, t.search, {
    ignoreCase: !t.caseSensitive,
    test: t.wholeWord ? WW(e.charCategorizer(e.selection.main.head)) : void 0
  }, n, i);
}
function Ru(t, e) {
  return t.slice(pi(t, e, !1), e);
}
function Iu(t, e) {
  return t.slice(e, pi(t, e));
}
function WW(t) {
  return (e, n, i) => !i[0].length || (t(Ru(i.input, i.index)) != un.Word || t(Iu(i.input, i.index)) != un.Word) && (t(Iu(i.input, i.index + i[0].length)) != un.Word || t(Ru(i.input, i.index + i[0].length)) != un.Word);
}
class UW extends u5 {
  nextMatch(e, n, i) {
    let r = Zs(this.spec, e, i, e.doc.length).next();
    return r.done && (r = Zs(this.spec, e, 0, n).next()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = 1; ; r++) {
      let o = Math.max(n, i - r * 1e4), s = Zs(this.spec, e, o, i), l = null;
      for (; !s.next().done; )
        l = s.value;
      if (l && (o == n || l.from > o + 10))
        return l;
      if (o == n)
        return null;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g, (n, i) => i == "$" ? "$" : i == "&" ? e.match[0] : i != "0" && +i < e.match.length ? e.match[i] : n));
  }
  matchAll(e, n) {
    let i = Zs(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let o = Zs(this.spec, e, Math.max(0, n - 250), Math.min(i + 250, e.doc.length));
    for (; !o.next().done; )
      r(o.value.from, o.value.to);
  }
}
const Za = /* @__PURE__ */ _t.define(), zg = /* @__PURE__ */ _t.define(), xo = /* @__PURE__ */ qn.define({
  create(t) {
    return new Ld(up(t).create(), null);
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Za) ? t = new Ld(n.value.create(), t.panel) : n.is(zg) && (t = new Ld(t.query, n.value ? Vg : null));
    return t;
  },
  provide: (t) => Xa.from(t, (e) => e.panel)
});
class Ld {
  constructor(e, n) {
    this.query = e, this.panel = n;
  }
}
const qW = /* @__PURE__ */ ot.mark({ class: "cm-searchMatch" }), JW = /* @__PURE__ */ ot.mark({ class: "cm-searchMatch cm-searchMatch-selected" }), KW = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.decorations = this.highlight(t.state.field(xo));
  }
  update(t) {
    let e = t.state.field(xo);
    (e != t.startState.field(xo) || t.docChanged || t.selectionSet || t.viewportChanged) && (this.decorations = this.highlight(e));
  }
  highlight({ query: t, panel: e }) {
    if (!e || !t.spec.valid)
      return ot.none;
    let { view: n } = this, i = new Go();
    for (let r = 0, o = n.visibleRanges, s = o.length; r < s; r++) {
      let { from: l, to: a } = o[r];
      for (; r < s - 1 && a > o[r + 1].from - 2 * 250; )
        a = o[++r].to;
      t.highlight(n.state, l, a, (f, c) => {
        let u = n.state.selection.ranges.some((h) => h.from == f && h.to == c);
        i.add(f, c, u ? JW : qW);
      });
    }
    return i.finish();
  }
}, {
  decorations: (t) => t.decorations
});
function vf(t) {
  return (e) => {
    let n = e.state.field(xo, !1);
    return n && n.query.spec.valid ? t(e, n) : Fg(e);
  };
}
const Nu = /* @__PURE__ */ vf((t, { query: e }) => {
  let { to: n } = t.state.selection.main, i = e.nextMatch(t.state, n, n);
  return i ? (t.dispatch({
    selection: { anchor: i.from, head: i.to },
    scrollIntoView: !0,
    effects: Wg(t, i),
    userEvent: "select.search"
  }), !0) : !1;
}), Du = /* @__PURE__ */ vf((t, { query: e }) => {
  let { state: n } = t, { from: i } = n.selection.main, r = e.prevMatch(n, i, i);
  return r ? (t.dispatch({
    selection: { anchor: r.from, head: r.to },
    scrollIntoView: !0,
    effects: Wg(t, r),
    userEvent: "select.search"
  }), !0) : !1;
}), GW = /* @__PURE__ */ vf((t, { query: e }) => {
  let n = e.matchAll(t.state, 1e3);
  return !n || !n.length ? !1 : (t.dispatch({
    selection: _e.create(n.map((i) => _e.range(i.from, i.to))),
    userEvent: "select.search.matches"
  }), !0);
}), XW = ({ state: t, dispatch: e }) => {
  let n = t.selection;
  if (n.ranges.length > 1 || n.main.empty)
    return !1;
  let { from: i, to: r } = n.main, o = [], s = 0;
  for (let l = new Nl(t.doc, t.sliceDoc(i, r)); !l.next().done; ) {
    if (o.length > 1e3)
      return !1;
    l.value.from == i && (s = o.length), o.push(_e.range(l.value.from, l.value.to));
  }
  return e(t.update({
    selection: _e.create(o, s),
    userEvent: "select.search.matches"
  })), !0;
}, qy = /* @__PURE__ */ vf((t, { query: e }) => {
  let { state: n } = t, { from: i, to: r } = n.selection.main;
  if (n.readOnly)
    return !1;
  let o = e.nextMatch(n, i, i);
  if (!o)
    return !1;
  let s = [], l, a, f = [];
  if (o.from == i && o.to == r && (a = n.toText(e.getReplacement(o)), s.push({ from: o.from, to: o.to, insert: a }), o = e.nextMatch(n, o.from, o.to), f.push(Ke.announce.of(n.phrase("replaced match on line $", n.doc.lineAt(i).number) + "."))), o) {
    let c = s.length == 0 || s[0].from >= o.to ? 0 : o.to - o.from - a.length;
    l = { anchor: o.from - c, head: o.to - c }, f.push(Wg(t, o));
  }
  return t.dispatch({
    changes: s,
    selection: l,
    scrollIntoView: !!l,
    effects: f,
    userEvent: "input.replace"
  }), !0;
}), QW = /* @__PURE__ */ vf((t, { query: e }) => {
  if (t.state.readOnly)
    return !1;
  let n = e.matchAll(t.state, 1e9).map((r) => {
    let { from: o, to: s } = r;
    return { from: o, to: s, insert: e.getReplacement(r) };
  });
  if (!n.length)
    return !1;
  let i = t.state.phrase("replaced $ matches", n.length) + ".";
  return t.dispatch({
    changes: n,
    effects: Ke.announce.of(i),
    userEvent: "input.replace.all"
  }), !0;
});
function Vg(t) {
  return t.state.facet(xh).createPanel(t);
}
function up(t, e) {
  var n, i, r, o;
  let s = t.selection.main, l = s.empty || s.to > s.from + 100 ? "" : t.sliceDoc(s.from, s.to);
  if (e && !l)
    return e;
  let a = t.facet(xh);
  return new c5({
    search: ((n = e == null ? void 0 : e.literal) !== null && n !== void 0 ? n : a.literal) ? l : l.replace(/\n/g, "\\n"),
    caseSensitive: (i = e == null ? void 0 : e.caseSensitive) !== null && i !== void 0 ? i : a.caseSensitive,
    literal: (r = e == null ? void 0 : e.literal) !== null && r !== void 0 ? r : a.literal,
    wholeWord: (o = e == null ? void 0 : e.wholeWord) !== null && o !== void 0 ? o : a.wholeWord
  });
}
const Fg = (t) => {
  let e = t.state.field(xo, !1);
  if (e && e.panel) {
    let n = Ga(t, Vg);
    if (!n)
      return !1;
    let i = n.dom.querySelector("[main-field]");
    if (i && i != t.root.activeElement) {
      let r = up(t.state, e.query.spec);
      r.valid && t.dispatch({ effects: Za.of(r) }), i.focus(), i.select();
    }
  } else
    t.dispatch({ effects: [
      zg.of(!0),
      e ? Za.of(up(t.state, e.query.spec)) : _t.appendConfig.of(hp)
    ] });
  return !0;
}, Hg = (t) => {
  let e = t.state.field(xo, !1);
  if (!e || !e.panel)
    return !1;
  let n = Ga(t, Vg);
  return n && n.dom.contains(t.root.activeElement) && t.focus(), t.dispatch({ effects: zg.of(!1) }), !0;
}, YW = [
  { key: "Mod-f", run: Fg, scope: "editor search-panel" },
  { key: "F3", run: Nu, shift: Du, scope: "editor search-panel", preventDefault: !0 },
  { key: "Mod-g", run: Nu, shift: Du, scope: "editor search-panel", preventDefault: !0 },
  { key: "Escape", run: Hg, scope: "editor search-panel" },
  { key: "Mod-Shift-l", run: XW },
  { key: "Alt-g", run: TW },
  { key: "Mod-d", run: zW, preventDefault: !0 }
];
class ZW {
  constructor(e) {
    this.view = e;
    let n = this.query = e.state.field(xo).query.spec;
    this.commit = this.commit.bind(this), this.searchField = Qt("input", {
      value: n.search,
      placeholder: Ii(e, "Find"),
      "aria-label": Ii(e, "Find"),
      class: "cm-textfield",
      name: "search",
      form: "",
      "main-field": "true",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.replaceField = Qt("input", {
      value: n.replace,
      placeholder: Ii(e, "Replace"),
      "aria-label": Ii(e, "Replace"),
      class: "cm-textfield",
      name: "replace",
      form: "",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.caseField = Qt("input", {
      type: "checkbox",
      name: "case",
      form: "",
      checked: n.caseSensitive,
      onchange: this.commit
    }), this.reField = Qt("input", {
      type: "checkbox",
      name: "re",
      form: "",
      checked: n.regexp,
      onchange: this.commit
    }), this.wordField = Qt("input", {
      type: "checkbox",
      name: "word",
      form: "",
      checked: n.wholeWord,
      onchange: this.commit
    });
    function i(r, o, s) {
      return Qt("button", { class: "cm-button", name: r, onclick: o, type: "button" }, s);
    }
    this.dom = Qt("div", { onkeydown: (r) => this.keydown(r), class: "cm-search" }, [
      this.searchField,
      i("next", () => Nu(e), [Ii(e, "next")]),
      i("prev", () => Du(e), [Ii(e, "previous")]),
      i("select", () => GW(e), [Ii(e, "all")]),
      Qt("label", null, [this.caseField, Ii(e, "match case")]),
      Qt("label", null, [this.reField, Ii(e, "regexp")]),
      Qt("label", null, [this.wordField, Ii(e, "by word")]),
      ...e.state.readOnly ? [] : [
        Qt("br"),
        this.replaceField,
        i("replace", () => qy(e), [Ii(e, "replace")]),
        i("replaceAll", () => QW(e), [Ii(e, "replace all")])
      ],
      Qt("button", {
        name: "close",
        onclick: () => Hg(e),
        "aria-label": Ii(e, "close"),
        type: "button"
      }, ["×"])
    ]);
  }
  commit() {
    let e = new c5({
      search: this.searchField.value,
      caseSensitive: this.caseField.checked,
      regexp: this.reField.checked,
      wholeWord: this.wordField.checked,
      replace: this.replaceField.value
    });
    e.eq(this.query) || (this.query = e, this.view.dispatch({ effects: Za.of(e) }));
  }
  keydown(e) {
    pV(this.view, e, "search-panel") ? e.preventDefault() : e.keyCode == 13 && e.target == this.searchField ? (e.preventDefault(), (e.shiftKey ? Du : Nu)(this.view)) : e.keyCode == 13 && e.target == this.replaceField && (e.preventDefault(), qy(this.view));
  }
  update(e) {
    for (let n of e.transactions)
      for (let i of n.effects)
        i.is(Za) && !i.value.eq(this.query) && this.setQuery(i.value);
  }
  setQuery(e) {
    this.query = e, this.searchField.value = e.search, this.replaceField.value = e.replace, this.caseField.checked = e.caseSensitive, this.reField.checked = e.regexp, this.wordField.checked = e.wholeWord;
  }
  mount() {
    this.searchField.select();
  }
  get pos() {
    return 80;
  }
  get top() {
    return this.view.state.facet(xh).top;
  }
}
function Ii(t, e) {
  return t.state.phrase(e);
}
const sc = 30, lc = /[\s\.,:;?!]/;
function Wg(t, { from: e, to: n }) {
  let i = t.state.doc.lineAt(e), r = t.state.doc.lineAt(n).to, o = Math.max(i.from, e - sc), s = Math.min(r, n + sc), l = t.state.sliceDoc(o, s);
  if (o != i.from) {
    for (let a = 0; a < sc; a++)
      if (!lc.test(l[a + 1]) && lc.test(l[a])) {
        l = l.slice(a);
        break;
      }
  }
  if (s != r) {
    for (let a = l.length - 1; a > l.length - sc; a--)
      if (!lc.test(l[a - 1]) && lc.test(l[a])) {
        l = l.slice(0, a);
        break;
      }
  }
  return Ke.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`);
}
const $W = /* @__PURE__ */ Ke.baseTheme({
  ".cm-panel.cm-search": {
    padding: "2px 6px 4px",
    position: "relative",
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    },
    "& input, & button, & label": {
      margin: ".2em .6em .2em 0"
    },
    "& input[type=checkbox]": {
      marginRight: ".2em"
    },
    "& label": {
      fontSize: "80%",
      whiteSpace: "pre"
    }
  },
  "&light .cm-searchMatch": { backgroundColor: "#ffff0054" },
  "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" },
  "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" },
  "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" }
}), hp = [
  xo,
  /* @__PURE__ */ Jl.lowest(KW),
  $W
];
class h5 {
  constructor(e, n, i) {
    this.state = e, this.pos = n, this.explicit = i, this.abortListeners = [];
  }
  tokenBefore(e) {
    let n = ui(this.state).resolveInner(this.pos, -1);
    for (; n && e.indexOf(n.name) < 0; )
      n = n.parent;
    return n ? {
      from: n.from,
      to: this.pos,
      text: this.state.sliceDoc(n.from, this.pos),
      type: n.type
    } : null;
  }
  matchBefore(e) {
    let n = this.state.doc.lineAt(this.pos), i = Math.max(n.from, this.pos - 250), r = n.text.slice(i - n.from, this.pos - n.from), o = r.search(d5(e, !1));
    return o < 0 ? null : { from: i + o, to: this.pos, text: r.slice(o) };
  }
  get aborted() {
    return this.abortListeners == null;
  }
  addEventListener(e, n) {
    e == "abort" && this.abortListeners && this.abortListeners.push(n);
  }
}
function Jy(t) {
  let e = Object.keys(t).join(""), n = /\w/.test(e);
  return n && (e = e.replace(/\w/g, "")), `[${n ? "\\w" : ""}${e.replace(/[^\w\s]/g, "\\$&")}]`;
}
function eU(t) {
  let e = /* @__PURE__ */ Object.create(null), n = /* @__PURE__ */ Object.create(null);
  for (let { label: r } of t) {
    e[r[0]] = !0;
    for (let o = 1; o < r.length; o++)
      n[r[o]] = !0;
  }
  let i = Jy(e) + Jy(n) + "*$";
  return [new RegExp("^" + i), new RegExp(i)];
}
function tU(t) {
  let e = t.map((r) => typeof r == "string" ? { label: r } : r), [n, i] = e.every((r) => /^\w+$/.test(r.label)) ? [/\w*$/, /\w+$/] : eU(e);
  return (r) => {
    let o = r.matchBefore(i);
    return o || r.explicit ? { from: o ? o.from : r.pos, options: e, validFor: n } : null;
  };
}
class Ky {
  constructor(e, n, i) {
    this.completion = e, this.source = n, this.match = i;
  }
}
function zo(t) {
  return t.selection.main.head;
}
function d5(t, e) {
  var n;
  let { source: i } = t, r = e && i[0] != "^", o = i[i.length - 1] != "$";
  return !r && !o ? t : new RegExp(`${r ? "^" : ""}(?:${i})${o ? "$" : ""}`, (n = t.flags) !== null && n !== void 0 ? n : t.ignoreCase ? "i" : "");
}
const nU = /* @__PURE__ */ is.define();
function iU(t, e, n, i) {
  return Object.assign(Object.assign({}, t.changeByRange((r) => {
    if (r == t.selection.main)
      return {
        changes: { from: n, to: i, insert: e },
        range: _e.cursor(n + e.length)
      };
    let o = i - n;
    return !r.empty || o && t.sliceDoc(r.from - o, r.from) != t.sliceDoc(n, i) ? { range: r } : {
      changes: { from: r.from - o, to: r.from, insert: e },
      range: _e.cursor(r.from - o + e.length)
    };
  })), { userEvent: "input.complete" });
}
function m5(t, e) {
  const n = e.completion.apply || e.completion.label;
  let i = e.source;
  typeof n == "string" ? t.dispatch(Object.assign(Object.assign({}, iU(t.state, n, i.from, i.to)), { annotations: nU.of(e.completion) })) : n(t, e.completion, i.from, i.to);
}
const Gy = /* @__PURE__ */ new WeakMap();
function rU(t) {
  if (!Array.isArray(t))
    return t;
  let e = Gy.get(t);
  return e || Gy.set(t, e = tU(t)), e;
}
class oU {
  constructor(e) {
    this.pattern = e, this.chars = [], this.folded = [], this.any = [], this.precise = [], this.byWord = [];
    for (let n = 0; n < e.length; ) {
      let i = ii(e, n), r = ji(i);
      this.chars.push(i);
      let o = e.slice(n, n + r), s = o.toUpperCase();
      this.folded.push(ii(s == o ? o.toLowerCase() : s, 0)), n += r;
    }
    this.astral = e.length != this.chars.length;
  }
  match(e) {
    if (this.pattern.length == 0)
      return [0];
    if (e.length < this.pattern.length)
      return null;
    let { chars: n, folded: i, any: r, precise: o, byWord: s } = this;
    if (n.length == 1) {
      let w = ii(e, 0);
      return w == n[0] ? [0, 0, ji(w)] : w == i[0] ? [-200, 0, ji(w)] : null;
    }
    let l = e.indexOf(this.pattern);
    if (l == 0)
      return [0, 0, this.pattern.length];
    let a = n.length, f = 0;
    if (l < 0) {
      for (let w = 0, v = Math.min(e.length, 200); w < v && f < a; ) {
        let M = ii(e, w);
        (M == n[f] || M == i[f]) && (r[f++] = w), w += ji(M);
      }
      if (f < a)
        return null;
    }
    let c = 0, u = 0, h = !1, d = 0, m = -1, g = -1, _ = /[a-z]/.test(e), b = !0;
    for (let w = 0, v = Math.min(e.length, 200), M = 0; w < v && u < a; ) {
      let S = ii(e, w);
      l < 0 && (c < a && S == n[c] && (o[c++] = w), d < a && (S == n[d] || S == i[d] ? (d == 0 && (m = w), g = w + 1, d++) : d = 0));
      let R, k = S < 255 ? S >= 48 && S <= 57 || S >= 97 && S <= 122 ? 2 : S >= 65 && S <= 90 ? 1 : 0 : (R = gg(S)) != R.toLowerCase() ? 1 : R != R.toUpperCase() ? 2 : 0;
      (!w || k == 1 && _ || M == 0 && k != 0) && (n[u] == S || i[u] == S && (h = !0) ? s[u++] = w : s.length && (b = !1)), M = k, w += ji(S);
    }
    return u == a && s[0] == 0 && b ? this.result(-100 + (h ? -200 : 0), s, e) : d == a && m == 0 ? [-200 - e.length, 0, g] : l > -1 ? [-700 - e.length, l, l + this.pattern.length] : d == a ? [-200 + -700 - e.length, m, g] : u == a ? this.result(-100 + (h ? -200 : 0) + -700 + (b ? 0 : -1100), s, e) : n.length == 2 ? null : this.result((r[0] ? -700 : 0) + -200 + -1100, r, e);
  }
  result(e, n, i) {
    let r = [e - i.length], o = 1;
    for (let s of n) {
      let l = s + (this.astral ? ji(ii(i, s)) : 1);
      o > 1 && r[o - 1] == s ? r[o - 1] = l : (r[o++] = s, r[o++] = l);
    }
    return r;
  }
}
const Zi = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      activateOnTyping: !0,
      selectOnOpen: !0,
      override: null,
      closeOnBlur: !0,
      maxRenderedOptions: 100,
      defaultKeymap: !0,
      tooltipClass: () => "",
      optionClass: () => "",
      aboveCursor: !1,
      icons: !0,
      addToOptions: [],
      compareCompletions: (e, n) => e.label.localeCompare(n.label),
      interactionDelay: 75
    }, {
      defaultKeymap: (e, n) => e && n,
      closeOnBlur: (e, n) => e && n,
      icons: (e, n) => e && n,
      tooltipClass: (e, n) => (i) => Xy(e(i), n(i)),
      optionClass: (e, n) => (i) => Xy(e(i), n(i)),
      addToOptions: (e, n) => e.concat(n)
    });
  }
});
function Xy(t, e) {
  return t ? e ? t + " " + e : t : e;
}
function sU(t) {
  let e = t.addToOptions.slice();
  return t.icons && e.push({
    render(n) {
      let i = document.createElement("div");
      return i.classList.add("cm-completionIcon"), n.type && i.classList.add(...n.type.split(/\s+/g).map((r) => "cm-completionIcon-" + r)), i.setAttribute("aria-hidden", "true"), i;
    },
    position: 20
  }), e.push({
    render(n, i, r) {
      let o = document.createElement("span");
      o.className = "cm-completionLabel";
      let { label: s } = n, l = 0;
      for (let a = 1; a < r.length; ) {
        let f = r[a++], c = r[a++];
        f > l && o.appendChild(document.createTextNode(s.slice(l, f)));
        let u = o.appendChild(document.createElement("span"));
        u.appendChild(document.createTextNode(s.slice(f, c))), u.className = "cm-completionMatchedText", l = c;
      }
      return l < s.length && o.appendChild(document.createTextNode(s.slice(l))), o;
    },
    position: 50
  }, {
    render(n) {
      if (!n.detail)
        return null;
      let i = document.createElement("span");
      return i.className = "cm-completionDetail", i.textContent = n.detail, i;
    },
    position: 80
  }), e.sort((n, i) => n.position - i.position).map((n) => n.render);
}
function Qy(t, e, n) {
  if (t <= n)
    return { from: 0, to: t };
  if (e < 0 && (e = 0), e <= t >> 1) {
    let r = Math.floor(e / n);
    return { from: r * n, to: (r + 1) * n };
  }
  let i = Math.floor((t - e) / n);
  return { from: t - (i + 1) * n, to: t - i * n };
}
class lU {
  constructor(e, n) {
    this.view = e, this.stateField = n, this.info = null, this.placeInfo = {
      read: () => this.measureInfo(),
      write: (l) => this.positionInfo(l),
      key: this
    }, this.space = null, this.currentClass = "";
    let i = e.state.field(n), { options: r, selected: o } = i.open, s = e.state.facet(Zi);
    this.optionContent = sU(s), this.optionClass = s.optionClass, this.tooltipClass = s.tooltipClass, this.range = Qy(r.length, o, s.maxRenderedOptions), this.dom = document.createElement("div"), this.dom.className = "cm-tooltip-autocomplete", this.updateTooltipClass(e.state), this.dom.addEventListener("mousedown", (l) => {
      for (let a = l.target, f; a && a != this.dom; a = a.parentNode)
        if (a.nodeName == "LI" && (f = /-(\d+)$/.exec(a.id)) && +f[1] < r.length) {
          m5(e, r[+f[1]]), l.preventDefault();
          return;
        }
    }), this.list = this.dom.appendChild(this.createListBox(r, i.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    });
  }
  mount() {
    this.updateSel();
  }
  update(e) {
    var n, i, r;
    let o = e.state.field(this.stateField), s = e.startState.field(this.stateField);
    this.updateTooltipClass(e.state), o != s && (this.updateSel(), ((n = o.open) === null || n === void 0 ? void 0 : n.disabled) != ((i = s.open) === null || i === void 0 ? void 0 : i.disabled) && this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!(!((r = o.open) === null || r === void 0) && r.disabled)));
  }
  updateTooltipClass(e) {
    let n = this.tooltipClass(e);
    if (n != this.currentClass) {
      for (let i of this.currentClass.split(" "))
        i && this.dom.classList.remove(i);
      for (let i of n.split(" "))
        i && this.dom.classList.add(i);
      this.currentClass = n;
    }
  }
  positioned(e) {
    this.space = e, this.info && this.view.requestMeasure(this.placeInfo);
  }
  updateSel() {
    let e = this.view.state.field(this.stateField), n = e.open;
    if ((n.selected > -1 && n.selected < this.range.from || n.selected >= this.range.to) && (this.range = Qy(n.options.length, n.selected, this.view.state.facet(Zi).maxRenderedOptions), this.list.remove(), this.list = this.dom.appendChild(this.createListBox(n.options, e.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    })), this.updateSelectedOption(n.selected)) {
      this.info && (this.info.remove(), this.info = null);
      let { completion: i } = n.options[n.selected], { info: r } = i;
      if (!r)
        return;
      let o = typeof r == "string" ? document.createTextNode(r) : r(i);
      if (!o)
        return;
      "then" in o ? o.then((s) => {
        s && this.view.state.field(this.stateField, !1) == e && this.addInfoPane(s);
      }).catch((s) => xi(this.view.state, s, "completion info")) : this.addInfoPane(o);
    }
  }
  addInfoPane(e) {
    let n = this.info = document.createElement("div");
    n.className = "cm-tooltip cm-completionInfo", n.appendChild(e), this.dom.appendChild(n), this.view.requestMeasure(this.placeInfo);
  }
  updateSelectedOption(e) {
    let n = null;
    for (let i = this.list.firstChild, r = this.range.from; i; i = i.nextSibling, r++)
      r == e ? i.hasAttribute("aria-selected") || (i.setAttribute("aria-selected", "true"), n = i) : i.hasAttribute("aria-selected") && i.removeAttribute("aria-selected");
    return n && fU(this.list, n), n;
  }
  measureInfo() {
    let e = this.dom.querySelector("[aria-selected]");
    if (!e || !this.info)
      return null;
    let n = this.dom.getBoundingClientRect(), i = this.info.getBoundingClientRect(), r = e.getBoundingClientRect(), o = this.space;
    if (!o) {
      let m = this.dom.ownerDocument.defaultView || window;
      o = { left: 0, top: 0, right: m.innerWidth, bottom: m.innerHeight };
    }
    if (r.top > Math.min(o.bottom, n.bottom) - 10 || r.bottom < Math.max(o.top, n.top) + 10)
      return null;
    let s = this.view.textDirection == gn.RTL, l = s, a = !1, f, c = "", u = "", h = n.left - o.left, d = o.right - n.right;
    if (l && h < Math.min(i.width, d) ? l = !1 : !l && d < Math.min(i.width, h) && (l = !0), i.width <= (l ? h : d))
      c = Math.max(o.top, Math.min(r.top, o.bottom - i.height)) - n.top + "px", f = Math.min(400, l ? h : d) + "px";
    else {
      a = !0, f = Math.min(400, (s ? n.right : o.right - n.left) - 30) + "px";
      let m = o.bottom - n.bottom;
      m >= i.height || m > n.top ? c = r.bottom - n.top + "px" : u = n.bottom - r.top + "px";
    }
    return {
      top: c,
      bottom: u,
      maxWidth: f,
      class: a ? s ? "left-narrow" : "right-narrow" : l ? "left" : "right"
    };
  }
  positionInfo(e) {
    this.info && (e ? (this.info.style.top = e.top, this.info.style.bottom = e.bottom, this.info.style.maxWidth = e.maxWidth, this.info.className = "cm-tooltip cm-completionInfo cm-completionInfo-" + e.class) : this.info.style.top = "-1e6px");
  }
  createListBox(e, n, i) {
    const r = document.createElement("ul");
    r.id = n, r.setAttribute("role", "listbox"), r.setAttribute("aria-expanded", "true"), r.setAttribute("aria-label", this.view.state.phrase("Completions"));
    for (let o = i.from; o < i.to; o++) {
      let { completion: s, match: l } = e[o];
      const a = r.appendChild(document.createElement("li"));
      a.id = n + "-" + o, a.setAttribute("role", "option");
      let f = this.optionClass(s);
      f && (a.className = f);
      for (let c of this.optionContent) {
        let u = c(s, this.view.state, l);
        u && a.appendChild(u);
      }
    }
    return i.from && r.classList.add("cm-completionListIncompleteTop"), i.to < e.length && r.classList.add("cm-completionListIncompleteBottom"), r;
  }
}
function aU(t) {
  return (e) => new lU(e, t);
}
function fU(t, e) {
  let n = t.getBoundingClientRect(), i = e.getBoundingClientRect();
  i.top < n.top ? t.scrollTop -= n.top - i.top : i.bottom > n.bottom && (t.scrollTop += i.bottom - n.bottom);
}
function Yy(t) {
  return (t.boost || 0) * 100 + (t.apply ? 10 : 0) + (t.info ? 5 : 0) + (t.type ? 1 : 0);
}
function cU(t, e) {
  let n = [], i = 0;
  for (let l of t)
    if (l.hasResult())
      if (l.result.filter === !1) {
        let a = l.result.getMatch;
        for (let f of l.result.options) {
          let c = [1e9 - i++];
          if (a)
            for (let u of a(f))
              c.push(u);
          n.push(new Ky(f, l, c));
        }
      } else {
        let a = new oU(e.sliceDoc(l.from, l.to)), f;
        for (let c of l.result.options)
          (f = a.match(c.label)) && (c.boost != null && (f[0] += c.boost), n.push(new Ky(c, l, f)));
      }
  let r = [], o = null, s = e.facet(Zi).compareCompletions;
  for (let l of n.sort((a, f) => f.match[0] - a.match[0] || s(a.completion, f.completion)))
    !o || o.label != l.completion.label || o.detail != l.completion.detail || o.type != null && l.completion.type != null && o.type != l.completion.type || o.apply != l.completion.apply ? r.push(l) : Yy(l.completion) > Yy(o) && (r[r.length - 1] = l), o = l.completion;
  return r;
}
class il {
  constructor(e, n, i, r, o, s) {
    this.options = e, this.attrs = n, this.tooltip = i, this.timestamp = r, this.selected = o, this.disabled = s;
  }
  setSelected(e, n) {
    return e == this.selected || e >= this.options.length ? this : new il(this.options, Zy(n, e), this.tooltip, this.timestamp, e, this.disabled);
  }
  static build(e, n, i, r, o) {
    let s = cU(e, n);
    if (!s.length)
      return r && e.some((a) => a.state == 1) ? new il(r.options, r.attrs, r.tooltip, r.timestamp, r.selected, !0) : null;
    let l = n.facet(Zi).selectOnOpen ? 0 : -1;
    if (r && r.selected != l && r.selected != -1) {
      let a = r.options[r.selected].completion;
      for (let f = 0; f < s.length; f++)
        if (s[f].completion == a) {
          l = f;
          break;
        }
    }
    return new il(s, Zy(i, l), {
      pos: e.reduce((a, f) => f.hasResult() ? Math.min(a, f.from) : a, 1e8),
      create: aU(Wi),
      above: o.aboveCursor
    }, r ? r.timestamp : Date.now(), l, !1);
  }
  map(e) {
    return new il(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: e.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);
  }
}
class ju {
  constructor(e, n, i) {
    this.active = e, this.id = n, this.open = i;
  }
  static start() {
    return new ju(dU, "cm-ac-" + Math.floor(Math.random() * 2e6).toString(36), null);
  }
  update(e) {
    let { state: n } = e, i = n.facet(Zi), o = (i.override || n.languageDataAt("autocomplete", zo(n)).map(rU)).map((l) => (this.active.find((f) => f.source == l) || new Ci(l, this.active.some((f) => f.state != 0) ? 1 : 0)).update(e, i));
    o.length == this.active.length && o.every((l, a) => l == this.active[a]) && (o = this.active);
    let s = this.open;
    s && e.docChanged && (s = s.map(e.changes)), e.selection || o.some((l) => l.hasResult() && e.changes.touchesRange(l.from, l.to)) || !uU(o, this.active) ? s = il.build(o, n, this.id, s, i) : s && s.disabled && !o.some((l) => l.state == 1) && (s = null), !s && o.every((l) => l.state != 1) && o.some((l) => l.hasResult()) && (o = o.map((l) => l.hasResult() ? new Ci(l.source, 0) : l));
    for (let l of e.effects)
      l.is(g5) && (s = s && s.setSelected(l.value, this.id));
    return o == this.active && s == this.open ? this : new ju(o, this.id, s);
  }
  get tooltip() {
    return this.open ? this.open.tooltip : null;
  }
  get attrs() {
    return this.open ? this.open.attrs : hU;
  }
}
function uU(t, e) {
  if (t == e)
    return !0;
  for (let n = 0, i = 0; ; ) {
    for (; n < t.length && !t[n].hasResult; )
      n++;
    for (; i < e.length && !e[i].hasResult; )
      i++;
    let r = n == t.length, o = i == e.length;
    if (r || o)
      return r == o;
    if (t[n++].result != e[i++].result)
      return !1;
  }
}
const hU = {
  "aria-autocomplete": "list"
};
function Zy(t, e) {
  let n = {
    "aria-autocomplete": "list",
    "aria-haspopup": "listbox",
    "aria-controls": t
  };
  return e > -1 && (n["aria-activedescendant"] = t + "-" + e), n;
}
const dU = [];
function dp(t) {
  return t.isUserEvent("input.type") ? "input" : t.isUserEvent("delete.backward") ? "delete" : null;
}
class Ci {
  constructor(e, n, i = -1) {
    this.source = e, this.state = n, this.explicitPos = i;
  }
  hasResult() {
    return !1;
  }
  update(e, n) {
    let i = dp(e), r = this;
    i ? r = r.handleUserEvent(e, i, n) : e.docChanged ? r = r.handleChange(e) : e.selection && r.state != 0 && (r = new Ci(r.source, 0));
    for (let o of e.effects)
      if (o.is(Ug))
        r = new Ci(r.source, 1, o.value ? zo(e.state) : -1);
      else if (o.is(Bu))
        r = new Ci(r.source, 0);
      else if (o.is(p5))
        for (let s of o.value)
          s.source == r.source && (r = s);
    return r;
  }
  handleUserEvent(e, n, i) {
    return n == "delete" || !i.activateOnTyping ? this.map(e.changes) : new Ci(this.source, 1);
  }
  handleChange(e) {
    return e.changes.touchesRange(zo(e.startState)) ? new Ci(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty || this.explicitPos < 0 ? this : new Ci(this.source, this.state, e.mapPos(this.explicitPos));
  }
}
class Ca extends Ci {
  constructor(e, n, i, r, o) {
    super(e, 2, n), this.result = i, this.from = r, this.to = o;
  }
  hasResult() {
    return !0;
  }
  handleUserEvent(e, n, i) {
    var r;
    let o = e.changes.mapPos(this.from), s = e.changes.mapPos(this.to, 1), l = zo(e.state);
    if ((this.explicitPos < 0 ? l <= o : l < this.from) || l > s || n == "delete" && zo(e.startState) == this.from)
      return new Ci(this.source, n == "input" && i.activateOnTyping ? 1 : 0);
    let a = this.explicitPos < 0 ? -1 : e.changes.mapPos(this.explicitPos), f;
    return mU(this.result.validFor, e.state, o, s) ? new Ca(this.source, a, this.result, o, s) : this.result.update && (f = this.result.update(this.result, o, s, new h5(e.state, l, a >= 0))) ? new Ca(this.source, a, f, f.from, (r = f.to) !== null && r !== void 0 ? r : zo(e.state)) : new Ci(this.source, 1, a);
  }
  handleChange(e) {
    return e.changes.touchesRange(this.from, this.to) ? new Ci(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty ? this : new Ca(this.source, this.explicitPos < 0 ? -1 : e.mapPos(this.explicitPos), this.result, e.mapPos(this.from), e.mapPos(this.to, 1));
  }
}
function mU(t, e, n, i) {
  if (!t)
    return !1;
  let r = e.sliceDoc(n, i);
  return typeof t == "function" ? t(r, n, i, e) : d5(t, !0).test(r);
}
const Ug = /* @__PURE__ */ _t.define(), Bu = /* @__PURE__ */ _t.define(), p5 = /* @__PURE__ */ _t.define({
  map(t, e) {
    return t.map((n) => n.map(e));
  }
}), g5 = /* @__PURE__ */ _t.define(), Wi = /* @__PURE__ */ qn.define({
  create() {
    return ju.start();
  },
  update(t, e) {
    return t.update(e);
  },
  provide: (t) => [
    Eh.from(t, (e) => e.tooltip),
    Ke.contentAttributes.from(t, (e) => e.attrs)
  ]
});
function ac(t, e = "option") {
  return (n) => {
    let i = n.state.field(Wi, !1);
    if (!i || !i.open || i.open.disabled || Date.now() - i.open.timestamp < n.state.facet(Zi).interactionDelay)
      return !1;
    let r = 1, o;
    e == "page" && (o = tF(n, i.open.tooltip)) && (r = Math.max(2, Math.floor(o.dom.offsetHeight / o.dom.querySelector("li").offsetHeight) - 1));
    let { length: s } = i.open.options, l = i.open.selected > -1 ? i.open.selected + r * (t ? 1 : -1) : t ? 0 : s - 1;
    return l < 0 ? l = e == "page" ? 0 : s - 1 : l >= s && (l = e == "page" ? s - 1 : 0), n.dispatch({ effects: g5.of(l) }), !0;
  };
}
const pU = (t) => {
  let e = t.state.field(Wi, !1);
  return t.state.readOnly || !e || !e.open || e.open.selected < 0 || Date.now() - e.open.timestamp < t.state.facet(Zi).interactionDelay ? !1 : (e.open.disabled || m5(t, e.open.options[e.open.selected]), !0);
}, gU = (t) => t.state.field(Wi, !1) ? (t.dispatch({ effects: Ug.of(!0) }), !0) : !1, bU = (t) => {
  let e = t.state.field(Wi, !1);
  return !e || !e.active.some((n) => n.state != 0) ? !1 : (t.dispatch({ effects: Bu.of(null) }), !0);
};
class _U {
  constructor(e, n) {
    this.active = e, this.context = n, this.time = Date.now(), this.updates = [], this.done = void 0;
  }
}
const $y = 50, yU = 50, wU = 1e3, vU = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.debounceUpdate = -1, this.running = [], this.debounceAccept = -1, this.composing = 0;
    for (let e of t.state.field(Wi).active)
      e.state == 1 && this.startQuery(e);
  }
  update(t) {
    let e = t.state.field(Wi);
    if (!t.selectionSet && !t.docChanged && t.startState.field(Wi) == e)
      return;
    let n = t.transactions.some((i) => (i.selection || i.docChanged) && !dp(i));
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (n || r.updates.length + t.transactions.length > yU && Date.now() - r.time > wU) {
        for (let o of r.context.abortListeners)
          try {
            o();
          } catch (s) {
            xi(this.view.state, s);
          }
        r.context.abortListeners = null, this.running.splice(i--, 1);
      } else
        r.updates.push(...t.transactions);
    }
    if (this.debounceUpdate > -1 && clearTimeout(this.debounceUpdate), this.debounceUpdate = e.active.some((i) => i.state == 1 && !this.running.some((r) => r.active.source == i.source)) ? setTimeout(() => this.startUpdate(), $y) : -1, this.composing != 0)
      for (let i of t.transactions)
        dp(i) == "input" ? this.composing = 2 : this.composing == 2 && i.selection && (this.composing = 3);
  }
  startUpdate() {
    this.debounceUpdate = -1;
    let { state: t } = this.view, e = t.field(Wi);
    for (let n of e.active)
      n.state == 1 && !this.running.some((i) => i.active.source == n.source) && this.startQuery(n);
  }
  startQuery(t) {
    let { state: e } = this.view, n = zo(e), i = new h5(e, n, t.explicitPos == n), r = new _U(t, i);
    this.running.push(r), Promise.resolve(t.source(i)).then((o) => {
      r.context.aborted || (r.done = o || null, this.scheduleAccept());
    }, (o) => {
      this.view.dispatch({ effects: Bu.of(null) }), xi(this.view.state, o);
    });
  }
  scheduleAccept() {
    this.running.every((t) => t.done !== void 0) ? this.accept() : this.debounceAccept < 0 && (this.debounceAccept = setTimeout(() => this.accept(), $y));
  }
  accept() {
    var t;
    this.debounceAccept > -1 && clearTimeout(this.debounceAccept), this.debounceAccept = -1;
    let e = [], n = this.view.state.facet(Zi);
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (r.done === void 0)
        continue;
      if (this.running.splice(i--, 1), r.done) {
        let s = new Ca(r.active.source, r.active.explicitPos, r.done, r.done.from, (t = r.done.to) !== null && t !== void 0 ? t : zo(r.updates.length ? r.updates[0].startState : this.view.state));
        for (let l of r.updates)
          s = s.update(l, n);
        if (s.hasResult()) {
          e.push(s);
          continue;
        }
      }
      let o = this.view.state.field(Wi).active.find((s) => s.source == r.active.source);
      if (o && o.state == 1)
        if (r.done == null) {
          let s = new Ci(r.active.source, 0);
          for (let l of r.updates)
            s = s.update(l, n);
          s.state != 1 && e.push(s);
        } else
          this.startQuery(o);
    }
    e.length && this.view.dispatch({ effects: p5.of(e) });
  }
}, {
  eventHandlers: {
    blur() {
      let t = this.view.state.field(Wi, !1);
      t && t.tooltip && this.view.state.facet(Zi).closeOnBlur && this.view.dispatch({ effects: Bu.of(null) });
    },
    compositionstart() {
      this.composing = 1;
    },
    compositionend() {
      this.composing == 3 && setTimeout(() => this.view.dispatch({ effects: Ug.of(!1) }), 20), this.composing = 0;
    }
  }
}), kU = /* @__PURE__ */ Ke.baseTheme({
  ".cm-tooltip.cm-tooltip-autocomplete": {
    "& > ul": {
      fontFamily: "monospace",
      whiteSpace: "nowrap",
      overflow: "hidden auto",
      maxWidth_fallback: "700px",
      maxWidth: "min(700px, 95vw)",
      minWidth: "250px",
      maxHeight: "10em",
      height: "100%",
      listStyle: "none",
      margin: 0,
      padding: 0,
      "& > li": {
        overflowX: "hidden",
        textOverflow: "ellipsis",
        cursor: "pointer",
        padding: "1px 3px",
        lineHeight: 1.2
      }
    }
  },
  "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#17c",
    color: "white"
  },
  "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#777"
  },
  "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#347",
    color: "white"
  },
  "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#444"
  },
  ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
    content: '"···"',
    opacity: 0.5,
    display: "block",
    textAlign: "center"
  },
  ".cm-tooltip.cm-completionInfo": {
    position: "absolute",
    padding: "3px 9px",
    width: "max-content",
    maxWidth: `${400}px`,
    boxSizing: "border-box"
  },
  ".cm-completionInfo.cm-completionInfo-left": { right: "100%" },
  ".cm-completionInfo.cm-completionInfo-right": { left: "100%" },
  ".cm-completionInfo.cm-completionInfo-left-narrow": { right: `${30}px` },
  ".cm-completionInfo.cm-completionInfo-right-narrow": { left: `${30}px` },
  "&light .cm-snippetField": { backgroundColor: "#00000022" },
  "&dark .cm-snippetField": { backgroundColor: "#ffffff22" },
  ".cm-snippetFieldPosition": {
    verticalAlign: "text-top",
    width: 0,
    height: "1.15em",
    display: "inline-block",
    margin: "0 -0.7px -.7em",
    borderLeft: "1.4px dotted #888"
  },
  ".cm-completionMatchedText": {
    textDecoration: "underline"
  },
  ".cm-completionDetail": {
    marginLeft: "0.5em",
    fontStyle: "italic"
  },
  ".cm-completionIcon": {
    fontSize: "90%",
    width: ".8em",
    display: "inline-block",
    textAlign: "center",
    paddingRight: ".6em",
    opacity: "0.6",
    boxSizing: "content-box"
  },
  ".cm-completionIcon-function, .cm-completionIcon-method": {
    "&:after": { content: "'ƒ'" }
  },
  ".cm-completionIcon-class": {
    "&:after": { content: "'○'" }
  },
  ".cm-completionIcon-interface": {
    "&:after": { content: "'◌'" }
  },
  ".cm-completionIcon-variable": {
    "&:after": { content: "'𝑥'" }
  },
  ".cm-completionIcon-constant": {
    "&:after": { content: "'𝐶'" }
  },
  ".cm-completionIcon-type": {
    "&:after": { content: "'𝑡'" }
  },
  ".cm-completionIcon-enum": {
    "&:after": { content: "'∪'" }
  },
  ".cm-completionIcon-property": {
    "&:after": { content: "'□'" }
  },
  ".cm-completionIcon-keyword": {
    "&:after": { content: "'🔑︎'" }
  },
  ".cm-completionIcon-namespace": {
    "&:after": { content: "'▢'" }
  },
  ".cm-completionIcon-text": {
    "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" }
  }
}), $a = {
  brackets: ["(", "[", "{", "'", '"'],
  before: ")]}:;>",
  stringPrefixes: []
}, ys = /* @__PURE__ */ _t.define({
  map(t, e) {
    let n = e.mapPos(t, -1, di.TrackAfter);
    return n ?? void 0;
  }
}), qg = /* @__PURE__ */ _t.define({
  map(t, e) {
    return e.mapPos(t);
  }
}), Jg = /* @__PURE__ */ new class extends Ns {
}();
Jg.startSide = 1;
Jg.endSide = -1;
const b5 = /* @__PURE__ */ qn.define({
  create() {
    return Lt.empty;
  },
  update(t, e) {
    if (e.selection) {
      let n = e.state.doc.lineAt(e.selection.main.head).from, i = e.startState.doc.lineAt(e.startState.selection.main.head).from;
      n != e.changes.mapPos(i, -1) && (t = Lt.empty);
    }
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(ys) ? t = t.update({ add: [Jg.range(n.value, n.value + 1)] }) : n.is(qg) && (t = t.update({ filter: (i) => i != n.value }));
    return t;
  }
});
function CU() {
  return [MU, b5];
}
const xd = "()[]{}<>";
function _5(t) {
  for (let e = 0; e < xd.length; e += 2)
    if (xd.charCodeAt(e) == t)
      return xd.charAt(e + 1);
  return gg(t < 128 ? t : t + 1);
}
function y5(t, e) {
  return t.languageDataAt("closeBrackets", e)[0] || $a;
}
const SU = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent), MU = /* @__PURE__ */ Ke.inputHandler.of((t, e, n, i) => {
  if ((SU ? t.composing : t.compositionStarted) || t.state.readOnly)
    return !1;
  let r = t.state.selection.main;
  if (i.length > 2 || i.length == 2 && ji(ii(i, 0)) == 1 || e != r.from || n != r.to)
    return !1;
  let o = TU(t.state, i);
  return o ? (t.dispatch(o), !0) : !1;
}), AU = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let i = y5(t, t.selection.main.head).brackets || $a.brackets, r = null, o = t.changeByRange((s) => {
    if (s.empty) {
      let l = EU(t.doc, s.head);
      for (let a of i)
        if (a == l && zh(t.doc, s.head) == _5(ii(a, 0)))
          return {
            changes: { from: s.head - a.length, to: s.head + a.length },
            range: _e.cursor(s.head - a.length)
          };
    }
    return { range: r = s };
  });
  return r || e(t.update(o, { scrollIntoView: !0, userEvent: "delete.backward" })), !r;
}, OU = [
  { key: "Backspace", run: AU }
];
function TU(t, e) {
  let n = y5(t, t.selection.main.head), i = n.brackets || $a.brackets;
  for (let r of i) {
    let o = _5(ii(r, 0));
    if (e == r)
      return o == r ? IU(t, r, i.indexOf(r + r + r) > -1, n) : PU(t, r, o, n.before || $a.before);
    if (e == o && w5(t, t.selection.main.from))
      return RU(t, r, o);
  }
  return null;
}
function w5(t, e) {
  let n = !1;
  return t.field(b5).between(0, t.doc.length, (i) => {
    i == e && (n = !0);
  }), n;
}
function zh(t, e) {
  let n = t.sliceString(e, e + 2);
  return n.slice(0, ji(ii(n, 0)));
}
function EU(t, e) {
  let n = t.sliceString(e - 2, e);
  return ji(ii(n, 0)) == n.length ? n : n.slice(1);
}
function PU(t, e, n, i) {
  let r = null, o = t.changeByRange((s) => {
    if (!s.empty)
      return {
        changes: [{ insert: e, from: s.from }, { insert: n, from: s.to }],
        effects: ys.of(s.to + e.length),
        range: _e.range(s.anchor + e.length, s.head + e.length)
      };
    let l = zh(t.doc, s.head);
    return !l || /\s/.test(l) || i.indexOf(l) > -1 ? {
      changes: { insert: e + n, from: s.head },
      effects: ys.of(s.head + e.length),
      range: _e.cursor(s.head + e.length)
    } : { range: r = s };
  });
  return r ? null : t.update(o, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function RU(t, e, n) {
  let i = null, r = t.selection.ranges.map((o) => o.empty && zh(t.doc, o.head) == n ? _e.cursor(o.head + n.length) : i = o);
  return i ? null : t.update({
    selection: _e.create(r, t.selection.mainIndex),
    scrollIntoView: !0,
    effects: t.selection.ranges.map(({ from: o }) => qg.of(o))
  });
}
function IU(t, e, n, i) {
  let r = i.stringPrefixes || $a.stringPrefixes, o = null, s = t.changeByRange((l) => {
    if (!l.empty)
      return {
        changes: [{ insert: e, from: l.from }, { insert: e, from: l.to }],
        effects: ys.of(l.to + e.length),
        range: _e.range(l.anchor + e.length, l.head + e.length)
      };
    let a = l.head, f = zh(t.doc, a), c;
    if (f == e) {
      if (ew(t, a))
        return {
          changes: { insert: e + e, from: a },
          effects: ys.of(a + e.length),
          range: _e.cursor(a + e.length)
        };
      if (w5(t, a)) {
        let u = n && t.sliceDoc(a, a + e.length * 3) == e + e + e;
        return {
          range: _e.cursor(a + e.length * (u ? 3 : 1)),
          effects: qg.of(a)
        };
      }
    } else {
      if (n && t.sliceDoc(a - 2 * e.length, a) == e + e && (c = tw(t, a - 2 * e.length, r)) > -1 && ew(t, c))
        return {
          changes: { insert: e + e + e + e, from: a },
          effects: ys.of(a + e.length),
          range: _e.cursor(a + e.length)
        };
      if (t.charCategorizer(a)(f) != un.Word && tw(t, a, r) > -1 && !NU(t, a, e, r))
        return {
          changes: { insert: e + e, from: a },
          effects: ys.of(a + e.length),
          range: _e.cursor(a + e.length)
        };
    }
    return { range: o = l };
  });
  return o ? null : t.update(s, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function ew(t, e) {
  let n = ui(t).resolveInner(e + 1);
  return n.parent && n.from == e;
}
function NU(t, e, n, i) {
  let r = ui(t).resolveInner(e, -1), o = i.reduce((s, l) => Math.max(s, l.length), 0);
  for (let s = 0; s < 5; s++) {
    let l = t.sliceDoc(r.from, Math.min(r.to, r.from + n.length + o)), a = l.indexOf(n);
    if (!a || a > -1 && i.indexOf(l.slice(0, a)) > -1) {
      let c = r.firstChild;
      for (; c && c.from == r.from && c.to - c.from > n.length + a; ) {
        if (t.sliceDoc(c.to - n.length, c.to) == n)
          return !1;
        c = c.firstChild;
      }
      return !0;
    }
    let f = r.to == e && r.parent;
    if (!f)
      break;
    r = f;
  }
  return !1;
}
function tw(t, e, n) {
  let i = t.charCategorizer(e);
  if (i(t.sliceDoc(e - 1, e)) != un.Word)
    return e;
  for (let r of n) {
    let o = e - r.length;
    if (t.sliceDoc(o, e) == r && i(t.sliceDoc(o - 1, o)) != un.Word)
      return o;
  }
  return -1;
}
function DU(t = {}) {
  return [
    Wi,
    Zi.of(t),
    vU,
    jU,
    kU
  ];
}
const v5 = [
  { key: "Ctrl-Space", run: gU },
  { key: "Escape", run: bU },
  { key: "ArrowDown", run: /* @__PURE__ */ ac(!0) },
  { key: "ArrowUp", run: /* @__PURE__ */ ac(!1) },
  { key: "PageDown", run: /* @__PURE__ */ ac(!0, "page") },
  { key: "PageUp", run: /* @__PURE__ */ ac(!1, "page") },
  { key: "Enter", run: pU }
], jU = /* @__PURE__ */ Jl.highest(/* @__PURE__ */ Th.computeN([Zi], (t) => t.facet(Zi).defaultKeymap ? [v5] : []));
class BU {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.diagnostic = i;
  }
}
class gs {
  constructor(e, n, i) {
    this.diagnostics = e, this.panel = n, this.selected = i;
  }
  static init(e, n, i) {
    let r = e, o = i.facet(ws).markerFilter;
    o && (r = o(r));
    let s = ot.set(r.map((l) => l.from == l.to || l.from == l.to - 1 && i.doc.lineAt(l.from).to == l.from ? ot.widget({
      widget: new qU(l),
      diagnostic: l
    }).range(l.from) : ot.mark({
      attributes: { class: "cm-lintRange cm-lintRange-" + l.severity },
      diagnostic: l
    }).range(l.from, l.to)), !0);
    return new gs(s, n, Dl(s));
  }
}
function Dl(t, e = null, n = 0) {
  let i = null;
  return t.between(n, 1e9, (r, o, { spec: s }) => {
    if (!(e && s.diagnostic != e))
      return i = new BU(r, o, s.diagnostic), !1;
  }), i;
}
function k5(t, e) {
  return !!(t.effects.some((n) => n.is(Vh)) || t.changes.touchesRange(e.pos));
}
function C5(t, e) {
  return t.field(Li, !1) ? e : e.concat(_t.appendConfig.of([
    Li,
    Ke.decorations.compute([Li], (n) => {
      let { selected: i, panel: r } = n.field(Li);
      return !i || !r || i.from == i.to ? ot.none : ot.set([
        xU.range(i.from, i.to)
      ]);
    }),
    eF(zU, { hideOn: k5 }),
    JU
  ]));
}
function LU(t, e) {
  return {
    effects: C5(t, [Vh.of(e)])
  };
}
const Vh = /* @__PURE__ */ _t.define(), Kg = /* @__PURE__ */ _t.define(), S5 = /* @__PURE__ */ _t.define(), Li = /* @__PURE__ */ qn.define({
  create() {
    return new gs(ot.none, null, null);
  },
  update(t, e) {
    if (e.docChanged) {
      let n = t.diagnostics.map(e.changes), i = null;
      if (t.selected) {
        let r = e.changes.mapPos(t.selected.from, 1);
        i = Dl(n, t.selected.diagnostic, r) || Dl(n, null, r);
      }
      t = new gs(n, t.panel, i);
    }
    for (let n of e.effects)
      n.is(Vh) ? t = gs.init(n.value, t.panel, e.state) : n.is(Kg) ? t = new gs(t.diagnostics, n.value ? Fh.open : null, t.selected) : n.is(S5) && (t = new gs(t.diagnostics, t.panel, n.value));
    return t;
  },
  provide: (t) => [
    Xa.from(t, (e) => e.panel),
    Ke.decorations.from(t, (e) => e.diagnostics)
  ]
}), xU = /* @__PURE__ */ ot.mark({ class: "cm-lintRange cm-lintRange-active" });
function zU(t, e, n) {
  let { diagnostics: i } = t.state.field(Li), r = [], o = 2e8, s = 0;
  i.between(e - (n < 0 ? 1 : 0), e + (n > 0 ? 1 : 0), (a, f, { spec: c }) => {
    e >= a && e <= f && (a == f || (e > a || n > 0) && (e < f || n < 0)) && (r.push(c.diagnostic), o = Math.min(a, o), s = Math.max(f, s));
  });
  let l = t.state.facet(ws).tooltipFilter;
  return l && (r = l(r)), r.length ? {
    pos: o,
    end: s,
    above: t.state.doc.lineAt(o).to < s,
    create() {
      return { dom: M5(t, r) };
    }
  } : null;
}
function M5(t, e) {
  return Qt("ul", { class: "cm-tooltip-lint" }, e.map((n) => O5(t, n, !1)));
}
const VU = (t) => {
  let e = t.state.field(Li, !1);
  (!e || !e.panel) && t.dispatch({ effects: C5(t.state, [Kg.of(!0)]) });
  let n = Ga(t, Fh.open);
  return n && n.dom.querySelector(".cm-panel-lint ul").focus(), !0;
}, nw = (t) => {
  let e = t.state.field(Li, !1);
  return !e || !e.panel ? !1 : (t.dispatch({ effects: Kg.of(!1) }), !0);
}, FU = (t) => {
  let e = t.state.field(Li, !1);
  if (!e)
    return !1;
  let n = t.state.selection.main, i = e.diagnostics.iter(n.to + 1);
  return !i.value && (i = e.diagnostics.iter(0), !i.value || i.from == n.from && i.to == n.to) ? !1 : (t.dispatch({ selection: { anchor: i.from, head: i.to }, scrollIntoView: !0 }), !0);
}, HU = [
  { key: "Mod-Shift-m", run: VU, preventDefault: !0 },
  { key: "F8", run: FU }
], WU = /* @__PURE__ */ Bn.fromClass(class {
  constructor(t) {
    this.view = t, this.timeout = -1, this.set = !0;
    let { delay: e } = t.state.facet(ws);
    this.lintTime = Date.now() + e, this.run = this.run.bind(this), this.timeout = setTimeout(this.run, e);
  }
  run() {
    let t = Date.now();
    if (t < this.lintTime - 10)
      setTimeout(this.run, this.lintTime - t);
    else {
      this.set = !1;
      let { state: e } = this.view, { sources: n } = e.facet(ws);
      Promise.all(n.map((i) => Promise.resolve(i(this.view)))).then((i) => {
        let r = i.reduce((o, s) => o.concat(s));
        this.view.state.doc == e.doc && this.view.dispatch(LU(this.view.state, r));
      }, (i) => {
        xi(this.view.state, i);
      });
    }
  }
  update(t) {
    let e = t.state.facet(ws);
    (t.docChanged || e != t.startState.facet(ws)) && (this.lintTime = Date.now() + e.delay, this.set || (this.set = !0, this.timeout = setTimeout(this.run, e.delay)));
  }
  force() {
    this.set && (this.lintTime = Date.now(), this.run());
  }
  destroy() {
    clearTimeout(this.timeout);
  }
}), ws = /* @__PURE__ */ Ge.define({
  combine(t) {
    return Object.assign({ sources: t.map((e) => e.source) }, yr(t.map((e) => e.config), {
      delay: 750,
      markerFilter: null,
      tooltipFilter: null
    }));
  },
  enables: WU
});
function UU(t, e = {}) {
  return ws.of({ source: t, config: e });
}
function A5(t) {
  let e = [];
  if (t)
    e:
      for (let { name: n } of t) {
        for (let i = 0; i < n.length; i++) {
          let r = n[i];
          if (/[a-zA-Z]/.test(r) && !e.some((o) => o.toLowerCase() == r.toLowerCase())) {
            e.push(r);
            continue e;
          }
        }
        e.push("");
      }
  return e;
}
function O5(t, e, n) {
  var i;
  let r = n ? A5(e.actions) : [];
  return Qt("li", { class: "cm-diagnostic cm-diagnostic-" + e.severity }, Qt("span", { class: "cm-diagnosticText" }, e.renderMessage ? e.renderMessage() : e.message), (i = e.actions) === null || i === void 0 ? void 0 : i.map((o, s) => {
    let l = (u) => {
      u.preventDefault();
      let h = Dl(t.state.field(Li).diagnostics, e);
      h && o.apply(t, h.from, h.to);
    }, { name: a } = o, f = r[s] ? a.indexOf(r[s]) : -1, c = f < 0 ? a : [
      a.slice(0, f),
      Qt("u", a.slice(f, f + 1)),
      a.slice(f + 1)
    ];
    return Qt("button", {
      type: "button",
      class: "cm-diagnosticAction",
      onclick: l,
      onmousedown: l,
      "aria-label": ` Action: ${a}${f < 0 ? "" : ` (access key "${r[s]})"`}.`
    }, c);
  }), e.source && Qt("div", { class: "cm-diagnosticSource" }, e.source));
}
class qU extends rs {
  constructor(e) {
    super(), this.diagnostic = e;
  }
  eq(e) {
    return e.diagnostic == this.diagnostic;
  }
  toDOM() {
    return Qt("span", { class: "cm-lintPoint cm-lintPoint-" + this.diagnostic.severity });
  }
}
class iw {
  constructor(e, n) {
    this.diagnostic = n, this.id = "item_" + Math.floor(Math.random() * 4294967295).toString(16), this.dom = O5(e, n, !0), this.dom.id = this.id, this.dom.setAttribute("role", "option");
  }
}
class Fh {
  constructor(e) {
    this.view = e, this.items = [];
    let n = (r) => {
      if (r.keyCode == 27)
        nw(this.view), this.view.focus();
      else if (r.keyCode == 38 || r.keyCode == 33)
        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);
      else if (r.keyCode == 40 || r.keyCode == 34)
        this.moveSelection((this.selectedIndex + 1) % this.items.length);
      else if (r.keyCode == 36)
        this.moveSelection(0);
      else if (r.keyCode == 35)
        this.moveSelection(this.items.length - 1);
      else if (r.keyCode == 13)
        this.view.focus();
      else if (r.keyCode >= 65 && r.keyCode <= 90 && this.selectedIndex >= 0) {
        let { diagnostic: o } = this.items[this.selectedIndex], s = A5(o.actions);
        for (let l = 0; l < s.length; l++)
          if (s[l].toUpperCase().charCodeAt(0) == r.keyCode) {
            let a = Dl(this.view.state.field(Li).diagnostics, o);
            a && o.actions[l].apply(e, a.from, a.to);
          }
      } else
        return;
      r.preventDefault();
    }, i = (r) => {
      for (let o = 0; o < this.items.length; o++)
        this.items[o].dom.contains(r.target) && this.moveSelection(o);
    };
    this.list = Qt("ul", {
      tabIndex: 0,
      role: "listbox",
      "aria-label": this.view.state.phrase("Diagnostics"),
      onkeydown: n,
      onclick: i
    }), this.dom = Qt("div", { class: "cm-panel-lint" }, this.list, Qt("button", {
      type: "button",
      name: "close",
      "aria-label": this.view.state.phrase("close"),
      onclick: () => nw(this.view)
    }, "×")), this.update();
  }
  get selectedIndex() {
    let e = this.view.state.field(Li).selected;
    if (!e)
      return -1;
    for (let n = 0; n < this.items.length; n++)
      if (this.items[n].diagnostic == e.diagnostic)
        return n;
    return -1;
  }
  update() {
    let { diagnostics: e, selected: n } = this.view.state.field(Li), i = 0, r = !1, o = null;
    for (e.between(0, this.view.state.doc.length, (s, l, { spec: a }) => {
      let f = -1, c;
      for (let u = i; u < this.items.length; u++)
        if (this.items[u].diagnostic == a.diagnostic) {
          f = u;
          break;
        }
      f < 0 ? (c = new iw(this.view, a.diagnostic), this.items.splice(i, 0, c), r = !0) : (c = this.items[f], f > i && (this.items.splice(i, f - i), r = !0)), n && c.diagnostic == n.diagnostic ? c.dom.hasAttribute("aria-selected") || (c.dom.setAttribute("aria-selected", "true"), o = c) : c.dom.hasAttribute("aria-selected") && c.dom.removeAttribute("aria-selected"), i++;
    }); i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0); )
      r = !0, this.items.pop();
    this.items.length == 0 && (this.items.push(new iw(this.view, {
      from: -1,
      to: -1,
      severity: "info",
      message: this.view.state.phrase("No diagnostics")
    })), r = !0), o ? (this.list.setAttribute("aria-activedescendant", o.id), this.view.requestMeasure({
      key: this,
      read: () => ({ sel: o.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),
      write: ({ sel: s, panel: l }) => {
        s.top < l.top ? this.list.scrollTop -= l.top - s.top : s.bottom > l.bottom && (this.list.scrollTop += s.bottom - l.bottom);
      }
    })) : this.selectedIndex < 0 && this.list.removeAttribute("aria-activedescendant"), r && this.sync();
  }
  sync() {
    let e = this.list.firstChild;
    function n() {
      let i = e;
      e = i.nextSibling, i.remove();
    }
    for (let i of this.items)
      if (i.dom.parentNode == this.list) {
        for (; e != i.dom; )
          n();
        e = i.dom.nextSibling;
      } else
        this.list.insertBefore(i.dom, e);
    for (; e; )
      n();
  }
  moveSelection(e) {
    if (this.selectedIndex < 0)
      return;
    let n = this.view.state.field(Li), i = Dl(n.diagnostics, this.items[e].diagnostic);
    i && this.view.dispatch({
      selection: { anchor: i.from, head: i.to },
      scrollIntoView: !0,
      effects: S5.of(i)
    });
  }
  static open(e) {
    return new Fh(e);
  }
}
function Rc(t, e = 'viewBox="0 0 40 40"') {
  return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`;
}
function zd(t) {
  return Rc(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`, 'width="6" height="3"');
}
const JU = /* @__PURE__ */ Ke.baseTheme({
  ".cm-diagnostic": {
    padding: "3px 6px 3px 8px",
    marginLeft: "-1px",
    display: "block",
    whiteSpace: "pre-wrap"
  },
  ".cm-diagnostic-error": { borderLeft: "5px solid #d11" },
  ".cm-diagnostic-warning": { borderLeft: "5px solid orange" },
  ".cm-diagnostic-info": { borderLeft: "5px solid #999" },
  ".cm-diagnosticAction": {
    font: "inherit",
    border: "none",
    padding: "2px 4px",
    backgroundColor: "#444",
    color: "white",
    borderRadius: "3px",
    marginLeft: "8px"
  },
  ".cm-diagnosticSource": {
    fontSize: "70%",
    opacity: 0.7
  },
  ".cm-lintRange": {
    backgroundPosition: "left bottom",
    backgroundRepeat: "repeat-x",
    paddingBottom: "0.7px"
  },
  ".cm-lintRange-error": { backgroundImage: /* @__PURE__ */ zd("#d11") },
  ".cm-lintRange-warning": { backgroundImage: /* @__PURE__ */ zd("orange") },
  ".cm-lintRange-info": { backgroundImage: /* @__PURE__ */ zd("#999") },
  ".cm-lintRange-active": { backgroundColor: "#ffdd9980" },
  ".cm-tooltip-lint": {
    padding: 0,
    margin: 0
  },
  ".cm-lintPoint": {
    position: "relative",
    "&:after": {
      content: '""',
      position: "absolute",
      bottom: 0,
      left: "-2px",
      borderLeft: "3px solid transparent",
      borderRight: "3px solid transparent",
      borderBottom: "4px solid #d11"
    }
  },
  ".cm-lintPoint-warning": {
    "&:after": { borderBottomColor: "orange" }
  },
  ".cm-lintPoint-info": {
    "&:after": { borderBottomColor: "#999" }
  },
  ".cm-panel.cm-panel-lint": {
    position: "relative",
    "& ul": {
      maxHeight: "100px",
      overflowY: "auto",
      "& [aria-selected]": {
        backgroundColor: "#ddd",
        "& u": { textDecoration: "underline" }
      },
      "&:focus [aria-selected]": {
        background_fallback: "#bdf",
        backgroundColor: "Highlight",
        color_fallback: "white",
        color: "HighlightText"
      },
      "& u": { textDecoration: "none" },
      padding: 0,
      margin: 0
    },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "2px",
      background: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    }
  }
});
class KU extends Yr {
  constructor(e) {
    super(), this.diagnostics = e, this.severity = e.reduce((n, i) => {
      let r = i.severity;
      return r == "error" || r == "warning" && n == "info" ? r : n;
    }, "info");
  }
  toDOM(e) {
    let n = document.createElement("div");
    n.className = "cm-lint-marker cm-lint-marker-" + this.severity;
    let i = this.diagnostics, r = e.state.facet(Hh).tooltipFilter;
    return r && (i = r(i)), i.length && (n.onmouseover = () => XU(e, n, i)), n;
  }
}
function GU(t, e) {
  let n = (i) => {
    let r = e.getBoundingClientRect();
    if (!(i.clientX > r.left - 10 && i.clientX < r.right + 10 && i.clientY > r.top - 10 && i.clientY < r.bottom + 10)) {
      for (let o = i.target; o; o = o.parentNode)
        if (o.nodeType == 1 && o.classList.contains("cm-tooltip-lint"))
          return;
      window.removeEventListener("mousemove", n), t.state.field(E5) && t.dispatch({ effects: Gg.of(null) });
    }
  };
  window.addEventListener("mousemove", n);
}
function XU(t, e, n) {
  function i() {
    let s = t.elementAtHeight(e.getBoundingClientRect().top + 5 - t.documentTop);
    t.coordsAtPos(s.from) && t.dispatch({ effects: Gg.of({
      pos: s.from,
      above: !1,
      create() {
        return {
          dom: M5(t, n),
          getCoords: () => e.getBoundingClientRect()
        };
      }
    }) }), e.onmouseout = e.onmousemove = null, GU(t, e);
  }
  let { hoverTime: r } = t.state.facet(Hh), o = setTimeout(i, r);
  e.onmouseout = () => {
    clearTimeout(o), e.onmouseout = e.onmousemove = null;
  }, e.onmousemove = () => {
    clearTimeout(o), o = setTimeout(i, r);
  };
}
function QU(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let r of e) {
    let o = t.lineAt(r.from);
    (n[o.from] || (n[o.from] = [])).push(r);
  }
  let i = [];
  for (let r in n)
    i.push(new KU(n[r]).range(+r));
  return Lt.of(i, !0);
}
const YU = /* @__PURE__ */ t4({
  class: "cm-gutter-lint",
  markers: (t) => t.state.field(T5)
}), T5 = /* @__PURE__ */ qn.define({
  create() {
    return Lt.empty;
  },
  update(t, e) {
    t = t.map(e.changes);
    let n = e.state.facet(Hh).markerFilter;
    for (let i of e.effects)
      if (i.is(Vh)) {
        let r = i.value;
        n && (r = n(r || [])), t = QU(e.state.doc, r.slice(0));
      }
    return t;
  }
}), Gg = /* @__PURE__ */ _t.define(), E5 = /* @__PURE__ */ qn.define({
  create() {
    return null;
  },
  update(t, e) {
    return t && e.docChanged && (t = k5(e, t) ? null : Object.assign(Object.assign({}, t), { pos: e.changes.mapPos(t.pos) })), e.effects.reduce((n, i) => i.is(Gg) ? i.value : n, t);
  },
  provide: (t) => Eh.from(t)
}), ZU = /* @__PURE__ */ Ke.baseTheme({
  ".cm-gutter-lint": {
    width: "1.4em",
    "& .cm-gutterElement": {
      padding: ".2em"
    }
  },
  ".cm-lint-marker": {
    width: "1em",
    height: "1em"
  },
  ".cm-lint-marker-info": {
    content: /* @__PURE__ */ Rc('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')
  },
  ".cm-lint-marker-warning": {
    content: /* @__PURE__ */ Rc('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')
  },
  ".cm-lint-marker-error": {
    content: /* @__PURE__ */ Rc('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')
  }
}), Hh = /* @__PURE__ */ Ge.define({
  combine(t) {
    return yr(t, {
      hoverTime: 300,
      markerFilter: null,
      tooltipFilter: null
    });
  }
});
function $U(t = {}) {
  return [Hh.of(t), T5, YU, ZU, E5];
}
const eq = /* @__PURE__ */ (() => [
  fF(),
  hF(),
  IV(),
  MH(),
  ZF(),
  vV(),
  AV(),
  Mt.allowMultipleSelections.of(!0),
  zF(),
  C4(nH, { fallback: !0 }),
  fH(),
  CU(),
  DU(),
  UV(),
  KV(),
  xV(),
  RW(),
  Th.of([
    ...OU,
    ...MW,
    ...YW,
    ...BH,
    ...XF,
    ...v5,
    ...HU
  ])
])();
class Lu {
  constructor(e, n, i, r, o, s, l, a, f, c = 0, u) {
    this.p = e, this.stack = n, this.state = i, this.reducePos = r, this.pos = o, this.score = s, this.buffer = l, this.bufferBase = a, this.curContext = f, this.lookAhead = c, this.parent = u;
  }
  toString() {
    return `[${this.stack.filter((e, n) => n % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
  }
  static start(e, n, i = 0) {
    let r = e.parser.context;
    return new Lu(e, [], n, i, i, 0, [], 0, r ? new rw(r, r.start) : null, 0, null);
  }
  get context() {
    return this.curContext ? this.curContext.context : null;
  }
  pushState(e, n) {
    this.stack.push(this.state, n, this.bufferBase + this.buffer.length), this.state = e;
  }
  reduce(e) {
    let n = e >> 19, i = e & 65535, { parser: r } = this.p, o = r.dynamicPrecedence(i);
    if (o && (this.score += o), n == 0) {
      this.pushState(r.getGoto(this.state, i, !0), this.reducePos), i < r.minRepeatTerm && this.storeNode(i, this.reducePos, this.reducePos, 4, !0), this.reduceContext(i, this.reducePos);
      return;
    }
    let s = this.stack.length - (n - 1) * 3 - (e & 262144 ? 6 : 0), l = this.stack[s - 2], a = this.stack[s - 1], f = this.bufferBase + this.buffer.length - a;
    if (i < r.minRepeatTerm || e & 131072) {
      let c = r.stateFlag(this.state, 1) ? this.pos : this.reducePos;
      this.storeNode(i, l, c, f + 4, !0);
    }
    if (e & 262144)
      this.state = this.stack[s];
    else {
      let c = this.stack[s - 3];
      this.state = r.getGoto(c, i, !0);
    }
    for (; this.stack.length > s; )
      this.stack.pop();
    this.reduceContext(i, l);
  }
  storeNode(e, n, i, r = 4, o = !1) {
    if (e == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
      let s = this, l = this.buffer.length;
      if (l == 0 && s.parent && (l = s.bufferBase - s.parent.bufferBase, s = s.parent), l > 0 && s.buffer[l - 4] == 0 && s.buffer[l - 1] > -1) {
        if (n == i)
          return;
        if (s.buffer[l - 2] >= n) {
          s.buffer[l - 2] = i;
          return;
        }
      }
    }
    if (!o || this.pos == i)
      this.buffer.push(e, n, i, r);
    else {
      let s = this.buffer.length;
      if (s > 0 && this.buffer[s - 4] != 0)
        for (; s > 0 && this.buffer[s - 2] > i; )
          this.buffer[s] = this.buffer[s - 4], this.buffer[s + 1] = this.buffer[s - 3], this.buffer[s + 2] = this.buffer[s - 2], this.buffer[s + 3] = this.buffer[s - 1], s -= 4, r > 4 && (r -= 4);
      this.buffer[s] = e, this.buffer[s + 1] = n, this.buffer[s + 2] = i, this.buffer[s + 3] = r;
    }
  }
  shift(e, n, i) {
    let r = this.pos;
    if (e & 131072)
      this.pushState(e & 65535, this.pos);
    else if (e & 262144)
      this.pos = i, this.shiftContext(n, r), n <= this.p.parser.maxNode && this.buffer.push(n, r, i, 4);
    else {
      let o = e, { parser: s } = this.p;
      (i > this.pos || n <= s.maxNode) && (this.pos = i, s.stateFlag(o, 1) || (this.reducePos = i)), this.pushState(o, r), this.shiftContext(n, r), n <= s.maxNode && this.buffer.push(n, r, i, 4);
    }
  }
  apply(e, n, i) {
    e & 65536 ? this.reduce(e) : this.shift(e, n, i);
  }
  useNode(e, n) {
    let i = this.p.reused.length - 1;
    (i < 0 || this.p.reused[i] != e) && (this.p.reused.push(e), i++);
    let r = this.pos;
    this.reducePos = this.pos = r + e.length, this.pushState(n, r), this.buffer.push(i, r, this.reducePos, -1), this.curContext && this.updateContext(this.curContext.tracker.reuse(this.curContext.context, e, this, this.p.stream.reset(this.pos - e.length)));
  }
  split() {
    let e = this, n = e.buffer.length;
    for (; n > 0 && e.buffer[n - 2] > e.reducePos; )
      n -= 4;
    let i = e.buffer.slice(n), r = e.bufferBase + n;
    for (; e && r == e.bufferBase; )
      e = e.parent;
    return new Lu(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, i, r, this.curContext, this.lookAhead, e);
  }
  recoverByDelete(e, n) {
    let i = e <= this.p.parser.maxNode;
    i && this.storeNode(e, this.pos, n, 4), this.storeNode(0, this.pos, n, i ? 8 : 4), this.pos = this.reducePos = n, this.score -= 190;
  }
  canShift(e) {
    for (let n = new tq(this); ; ) {
      let i = this.p.parser.stateSlot(n.state, 4) || this.p.parser.hasAction(n.state, e);
      if (i == 0)
        return !1;
      if (!(i & 65536))
        return !0;
      n.reduce(i);
    }
  }
  recoverByInsert(e) {
    if (this.stack.length >= 300)
      return [];
    let n = this.p.parser.nextStates(this.state);
    if (n.length > 4 << 1 || this.stack.length >= 120) {
      let r = [];
      for (let o = 0, s; o < n.length; o += 2)
        (s = n[o + 1]) != this.state && this.p.parser.hasAction(s, e) && r.push(n[o], s);
      if (this.stack.length < 120)
        for (let o = 0; r.length < 4 << 1 && o < n.length; o += 2) {
          let s = n[o + 1];
          r.some((l, a) => a & 1 && l == s) || r.push(n[o], s);
        }
      n = r;
    }
    let i = [];
    for (let r = 0; r < n.length && i.length < 4; r += 2) {
      let o = n[r + 1];
      if (o == this.state)
        continue;
      let s = this.split();
      s.pushState(o, this.pos), s.storeNode(0, s.pos, s.pos, 4, !0), s.shiftContext(n[r], this.pos), s.score -= 200, i.push(s);
    }
    return i;
  }
  forceReduce() {
    let e = this.p.parser.stateSlot(this.state, 5);
    if (!(e & 65536))
      return !1;
    let { parser: n } = this.p;
    if (!n.validAction(this.state, e)) {
      let i = e >> 19, r = e & 65535, o = this.stack.length - i * 3;
      if (o < 0 || n.getGoto(this.stack[o], r, !1) < 0)
        return !1;
      this.storeNode(0, this.reducePos, this.reducePos, 4, !0), this.score -= 100;
    }
    return this.reducePos = this.pos, this.reduce(e), !0;
  }
  forceAll() {
    for (; !this.p.parser.stateFlag(this.state, 2); )
      if (!this.forceReduce()) {
        this.storeNode(0, this.pos, this.pos, 4, !0);
        break;
      }
    return this;
  }
  get deadEnd() {
    if (this.stack.length != 3)
      return !1;
    let { parser: e } = this.p;
    return e.data[e.stateSlot(this.state, 1)] == 65535 && !e.stateSlot(this.state, 4);
  }
  restart() {
    this.state = this.stack[0], this.stack.length = 0;
  }
  sameState(e) {
    if (this.state != e.state || this.stack.length != e.stack.length)
      return !1;
    for (let n = 0; n < this.stack.length; n += 3)
      if (this.stack[n] != e.stack[n])
        return !1;
    return !0;
  }
  get parser() {
    return this.p.parser;
  }
  dialectEnabled(e) {
    return this.p.parser.dialect.flags[e];
  }
  shiftContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.shift(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  reduceContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.reduce(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  emitContext() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -3) && this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);
  }
  emitLookAhead() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -4) && this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);
  }
  updateContext(e) {
    if (e != this.curContext.context) {
      let n = new rw(this.curContext.tracker, e);
      n.hash != this.curContext.hash && this.emitContext(), this.curContext = n;
    }
  }
  setLookAhead(e) {
    e > this.lookAhead && (this.emitLookAhead(), this.lookAhead = e);
  }
  close() {
    this.curContext && this.curContext.tracker.strict && this.emitContext(), this.lookAhead > 0 && this.emitLookAhead();
  }
}
class rw {
  constructor(e, n) {
    this.tracker = e, this.context = n, this.hash = e.strict ? e.hash(n) : 0;
  }
}
var ow;
(function(t) {
  t[t.Insert = 200] = "Insert", t[t.Delete = 190] = "Delete", t[t.Reduce = 100] = "Reduce", t[t.MaxNext = 4] = "MaxNext", t[t.MaxInsertStackDepth = 300] = "MaxInsertStackDepth", t[t.DampenInsertStackDepth = 120] = "DampenInsertStackDepth";
})(ow || (ow = {}));
class tq {
  constructor(e) {
    this.start = e, this.state = e.state, this.stack = e.stack, this.base = this.stack.length;
  }
  reduce(e) {
    let n = e & 65535, i = e >> 19;
    i == 0 ? (this.stack == this.start.stack && (this.stack = this.stack.slice()), this.stack.push(this.state, 0, 0), this.base += 3) : this.base -= (i - 1) * 3;
    let r = this.start.p.parser.getGoto(this.stack[this.base - 3], n, !0);
    this.state = r;
  }
}
class xu {
  constructor(e, n, i) {
    this.stack = e, this.pos = n, this.index = i, this.buffer = e.buffer, this.index == 0 && this.maybeNext();
  }
  static create(e, n = e.bufferBase + e.buffer.length) {
    return new xu(e, n, n - e.bufferBase);
  }
  maybeNext() {
    let e = this.stack.parent;
    e != null && (this.index = this.stack.bufferBase - e.bufferBase, this.stack = e, this.buffer = e.buffer);
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  next() {
    this.index -= 4, this.pos -= 4, this.index == 0 && this.maybeNext();
  }
  fork() {
    return new xu(this.stack, this.pos, this.index);
  }
}
class Ic {
  constructor() {
    this.start = -1, this.value = -1, this.end = -1, this.extended = -1, this.lookAhead = 0, this.mask = 0, this.context = 0;
  }
}
const sw = new Ic();
class nq {
  constructor(e, n) {
    this.input = e, this.ranges = n, this.chunk = "", this.chunkOff = 0, this.chunk2 = "", this.chunk2Pos = 0, this.next = -1, this.token = sw, this.rangeIndex = 0, this.pos = this.chunkPos = n[0].from, this.range = n[0], this.end = n[n.length - 1].to, this.readNext();
  }
  resolveOffset(e, n) {
    let i = this.range, r = this.rangeIndex, o = this.pos + e;
    for (; o < i.from; ) {
      if (!r)
        return null;
      let s = this.ranges[--r];
      o -= i.from - s.to, i = s;
    }
    for (; n < 0 ? o > i.to : o >= i.to; ) {
      if (r == this.ranges.length - 1)
        return null;
      let s = this.ranges[++r];
      o += s.from - i.to, i = s;
    }
    return o;
  }
  clipPos(e) {
    if (e >= this.range.from && e < this.range.to)
      return e;
    for (let n of this.ranges)
      if (n.to > e)
        return Math.max(e, n.from);
    return this.end;
  }
  peek(e) {
    let n = this.chunkOff + e, i, r;
    if (n >= 0 && n < this.chunk.length)
      i = this.pos + e, r = this.chunk.charCodeAt(n);
    else {
      let o = this.resolveOffset(e, 1);
      if (o == null)
        return -1;
      if (i = o, i >= this.chunk2Pos && i < this.chunk2Pos + this.chunk2.length)
        r = this.chunk2.charCodeAt(i - this.chunk2Pos);
      else {
        let s = this.rangeIndex, l = this.range;
        for (; l.to <= i; )
          l = this.ranges[++s];
        this.chunk2 = this.input.chunk(this.chunk2Pos = i), i + this.chunk2.length > l.to && (this.chunk2 = this.chunk2.slice(0, l.to - i)), r = this.chunk2.charCodeAt(0);
      }
    }
    return i >= this.token.lookAhead && (this.token.lookAhead = i + 1), r;
  }
  acceptToken(e, n = 0) {
    let i = n ? this.resolveOffset(n, -1) : this.pos;
    if (i == null || i < this.token.start)
      throw new RangeError("Token end out of bounds");
    this.token.value = e, this.token.end = i;
  }
  getChunk() {
    if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
      let { chunk: e, chunkPos: n } = this;
      this.chunk = this.chunk2, this.chunkPos = this.chunk2Pos, this.chunk2 = e, this.chunk2Pos = n, this.chunkOff = this.pos - this.chunkPos;
    } else {
      this.chunk2 = this.chunk, this.chunk2Pos = this.chunkPos;
      let e = this.input.chunk(this.pos), n = this.pos + e.length;
      this.chunk = n > this.range.to ? e.slice(0, this.range.to - this.pos) : e, this.chunkPos = this.pos, this.chunkOff = 0;
    }
  }
  readNext() {
    return this.chunkOff >= this.chunk.length && (this.getChunk(), this.chunkOff == this.chunk.length) ? this.next = -1 : this.next = this.chunk.charCodeAt(this.chunkOff);
  }
  advance(e = 1) {
    for (this.chunkOff += e; this.pos + e >= this.range.to; ) {
      if (this.rangeIndex == this.ranges.length - 1)
        return this.setDone();
      e -= this.range.to - this.pos, this.range = this.ranges[++this.rangeIndex], this.pos = this.range.from;
    }
    return this.pos += e, this.pos >= this.token.lookAhead && (this.token.lookAhead = this.pos + 1), this.readNext();
  }
  setDone() {
    return this.pos = this.chunkPos = this.end, this.range = this.ranges[this.rangeIndex = this.ranges.length - 1], this.chunk = "", this.next = -1;
  }
  reset(e, n) {
    if (n ? (this.token = n, n.start = e, n.lookAhead = e + 1, n.value = n.extended = -1) : this.token = sw, this.pos != e) {
      if (this.pos = e, e == this.end)
        return this.setDone(), this;
      for (; e < this.range.from; )
        this.range = this.ranges[--this.rangeIndex];
      for (; e >= this.range.to; )
        this.range = this.ranges[++this.rangeIndex];
      e >= this.chunkPos && e < this.chunkPos + this.chunk.length ? this.chunkOff = e - this.chunkPos : (this.chunk = "", this.chunkOff = 0), this.readNext();
    }
    return this;
  }
  read(e, n) {
    if (e >= this.chunkPos && n <= this.chunkPos + this.chunk.length)
      return this.chunk.slice(e - this.chunkPos, n - this.chunkPos);
    if (e >= this.chunk2Pos && n <= this.chunk2Pos + this.chunk2.length)
      return this.chunk2.slice(e - this.chunk2Pos, n - this.chunk2Pos);
    if (e >= this.range.from && n <= this.range.to)
      return this.input.read(e, n);
    let i = "";
    for (let r of this.ranges) {
      if (r.from >= n)
        break;
      r.to > e && (i += this.input.read(Math.max(r.from, e), Math.min(r.to, n)));
    }
    return i;
  }
}
class Nc {
  constructor(e, n) {
    this.data = e, this.id = n;
  }
  token(e, n) {
    iq(this.data, e, n, this.id);
  }
}
Nc.prototype.contextual = Nc.prototype.fallback = Nc.prototype.extend = !1;
function iq(t, e, n, i) {
  let r = 0, o = 1 << i, { parser: s } = n.p, { dialect: l } = s;
  e:
    for (; o & t[r]; ) {
      let a = t[r + 1];
      for (let h = r + 3; h < a; h += 2)
        if ((t[h + 1] & o) > 0) {
          let d = t[h];
          if (l.allows(d) && (e.token.value == -1 || e.token.value == d || s.overrides(d, e.token.value))) {
            e.acceptToken(d);
            break;
          }
        }
      let f = e.next, c = 0, u = t[r + 2];
      if (e.next < 0 && u > c && t[a + u * 3 - 3] == 65535 && t[a + u * 3 - 3] == 65535) {
        r = t[a + u * 3 - 1];
        continue e;
      }
      for (; c < u; ) {
        let h = c + u >> 1, d = a + h + (h << 1), m = t[d], g = t[d + 1] || 65536;
        if (f < m)
          u = h;
        else if (f >= g)
          c = h + 1;
        else {
          r = t[d + 2], e.advance();
          continue e;
        }
      }
      break;
    }
}
function fc(t, e = Uint16Array) {
  if (typeof t != "string")
    return t;
  let n = null;
  for (let i = 0, r = 0; i < t.length; ) {
    let o = 0;
    for (; ; ) {
      let s = t.charCodeAt(i++), l = !1;
      if (s == 126) {
        o = 65535;
        break;
      }
      s >= 92 && s--, s >= 34 && s--;
      let a = s - 32;
      if (a >= 46 && (a -= 46, l = !0), o += a, l)
        break;
      o *= 46;
    }
    n ? n[r++] = o : n = new e(o);
  }
  return n;
}
const rr = typeof process < "u" && process.env && /\bparse\b/.test(process.env.LOG);
let Vd = null;
var lw;
(function(t) {
  t[t.Margin = 25] = "Margin";
})(lw || (lw = {}));
function aw(t, e, n) {
  let i = t.cursor(oi.IncludeAnonymous);
  for (i.moveTo(e); ; )
    if (!(n < 0 ? i.childBefore(e) : i.childAfter(e)))
      for (; ; ) {
        if ((n < 0 ? i.to < e : i.from > e) && !i.type.isError)
          return n < 0 ? Math.max(0, Math.min(i.to - 1, e - 25)) : Math.min(t.length, Math.max(i.from + 1, e + 25));
        if (n < 0 ? i.prevSibling() : i.nextSibling())
          break;
        if (!i.parent())
          return n < 0 ? 0 : t.length;
      }
}
class rq {
  constructor(e, n) {
    this.fragments = e, this.nodeSet = n, this.i = 0, this.fragment = null, this.safeFrom = -1, this.safeTo = -1, this.trees = [], this.start = [], this.index = [], this.nextFragment();
  }
  nextFragment() {
    let e = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
    if (e) {
      for (this.safeFrom = e.openStart ? aw(e.tree, e.from + e.offset, 1) - e.offset : e.from, this.safeTo = e.openEnd ? aw(e.tree, e.to + e.offset, -1) - e.offset : e.to; this.trees.length; )
        this.trees.pop(), this.start.pop(), this.index.pop();
      this.trees.push(e.tree), this.start.push(-e.offset), this.index.push(0), this.nextStart = this.safeFrom;
    } else
      this.nextStart = 1e9;
  }
  nodeAt(e) {
    if (e < this.nextStart)
      return null;
    for (; this.fragment && this.safeTo <= e; )
      this.nextFragment();
    if (!this.fragment)
      return null;
    for (; ; ) {
      let n = this.trees.length - 1;
      if (n < 0)
        return this.nextFragment(), null;
      let i = this.trees[n], r = this.index[n];
      if (r == i.children.length) {
        this.trees.pop(), this.start.pop(), this.index.pop();
        continue;
      }
      let o = i.children[r], s = this.start[n] + i.positions[r];
      if (s > e)
        return this.nextStart = s, null;
      if (o instanceof jn) {
        if (s == e) {
          if (s < this.safeFrom)
            return null;
          let l = s + o.length;
          if (l <= this.safeTo) {
            let a = o.prop(Tt.lookAhead);
            if (!a || l + a < this.fragment.to)
              return o;
          }
        }
        this.index[n]++, s + o.length >= Math.max(this.safeFrom, e) && (this.trees.push(o), this.start.push(s), this.index.push(0));
      } else
        this.index[n]++, this.nextStart = s + o.length;
    }
  }
}
class oq {
  constructor(e, n) {
    this.stream = n, this.tokens = [], this.mainToken = null, this.actions = [], this.tokens = e.tokenizers.map((i) => new Ic());
  }
  getActions(e) {
    let n = 0, i = null, { parser: r } = e.p, { tokenizers: o } = r, s = r.stateSlot(e.state, 3), l = e.curContext ? e.curContext.hash : 0, a = 0;
    for (let f = 0; f < o.length; f++) {
      if (!(1 << f & s))
        continue;
      let c = o[f], u = this.tokens[f];
      if (!(i && !c.fallback) && ((c.contextual || u.start != e.pos || u.mask != s || u.context != l) && (this.updateCachedToken(u, c, e), u.mask = s, u.context = l), u.lookAhead > u.end + 25 && (a = Math.max(u.lookAhead, a)), u.value != 0)) {
        let h = n;
        if (u.extended > -1 && (n = this.addActions(e, u.extended, u.end, n)), n = this.addActions(e, u.value, u.end, n), !c.extend && (i = u, n > h))
          break;
      }
    }
    for (; this.actions.length > n; )
      this.actions.pop();
    return a && e.setLookAhead(a), !i && e.pos == this.stream.end && (i = new Ic(), i.value = e.p.parser.eofTerm, i.start = i.end = e.pos, n = this.addActions(e, i.value, i.end, n)), this.mainToken = i, this.actions;
  }
  getMainToken(e) {
    if (this.mainToken)
      return this.mainToken;
    let n = new Ic(), { pos: i, p: r } = e;
    return n.start = i, n.end = Math.min(i + 1, r.stream.end), n.value = i == r.stream.end ? r.parser.eofTerm : 0, n;
  }
  updateCachedToken(e, n, i) {
    let r = this.stream.clipPos(i.pos);
    if (n.token(this.stream.reset(r, e), i), e.value > -1) {
      let { parser: o } = i.p;
      for (let s = 0; s < o.specialized.length; s++)
        if (o.specialized[s] == e.value) {
          let l = o.specializers[s](this.stream.read(e.start, e.end), i);
          if (l >= 0 && i.p.parser.dialect.allows(l >> 1)) {
            l & 1 ? e.extended = l >> 1 : e.value = l >> 1;
            break;
          }
        }
    } else
      e.value = 0, e.end = this.stream.clipPos(r + 1);
  }
  putAction(e, n, i, r) {
    for (let o = 0; o < r; o += 3)
      if (this.actions[o] == e)
        return r;
    return this.actions[r++] = e, this.actions[r++] = n, this.actions[r++] = i, r;
  }
  addActions(e, n, i, r) {
    let { state: o } = e, { parser: s } = e.p, { data: l } = s;
    for (let a = 0; a < 2; a++)
      for (let f = s.stateSlot(o, a ? 2 : 1); ; f += 3) {
        if (l[f] == 65535)
          if (l[f + 1] == 1)
            f = no(l, f + 2);
          else {
            r == 0 && l[f + 1] == 2 && (r = this.putAction(no(l, f + 2), n, i, r));
            break;
          }
        l[f] == n && (r = this.putAction(no(l, f + 1), n, i, r));
      }
    return r;
  }
}
var fw;
(function(t) {
  t[t.Distance = 5] = "Distance", t[t.MaxRemainingPerStep = 3] = "MaxRemainingPerStep", t[t.MinBufferLengthPrune = 500] = "MinBufferLengthPrune", t[t.ForceReduceLimit = 10] = "ForceReduceLimit", t[t.CutDepth = 15e3] = "CutDepth", t[t.CutTo = 9e3] = "CutTo";
})(fw || (fw = {}));
class sq {
  constructor(e, n, i, r) {
    this.parser = e, this.input = n, this.ranges = r, this.recovering = 0, this.nextStackID = 9812, this.minStackPos = 0, this.reused = [], this.stoppedAt = null, this.stream = new nq(n, r), this.tokens = new oq(e, this.stream), this.topTerm = e.top[1];
    let { from: o } = r[0];
    this.stacks = [Lu.start(this, e.top[0], o)], this.fragments = i.length && this.stream.end - o > e.bufferLength * 4 ? new rq(i, e.nodeSet) : null;
  }
  get parsedPos() {
    return this.minStackPos;
  }
  advance() {
    let e = this.stacks, n = this.minStackPos, i = this.stacks = [], r, o;
    for (let s = 0; s < e.length; s++) {
      let l = e[s];
      for (; ; ) {
        if (this.tokens.mainToken = null, l.pos > n)
          i.push(l);
        else {
          if (this.advanceStack(l, i, e))
            continue;
          {
            r || (r = [], o = []), r.push(l);
            let a = this.tokens.getMainToken(l);
            o.push(a.value, a.end);
          }
        }
        break;
      }
    }
    if (!i.length) {
      let s = r && aq(r);
      if (s)
        return this.stackToTree(s);
      if (this.parser.strict)
        throw rr && r && console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none")), new SyntaxError("No parse at " + n);
      this.recovering || (this.recovering = 5);
    }
    if (this.recovering && r) {
      let s = this.stoppedAt != null && r[0].pos > this.stoppedAt ? r[0] : this.runRecovery(r, o, i);
      if (s)
        return this.stackToTree(s.forceAll());
    }
    if (this.recovering) {
      let s = this.recovering == 1 ? 1 : this.recovering * 3;
      if (i.length > s)
        for (i.sort((l, a) => a.score - l.score); i.length > s; )
          i.pop();
      i.some((l) => l.reducePos > n) && this.recovering--;
    } else if (i.length > 1) {
      e:
        for (let s = 0; s < i.length - 1; s++) {
          let l = i[s];
          for (let a = s + 1; a < i.length; a++) {
            let f = i[a];
            if (l.sameState(f) || l.buffer.length > 500 && f.buffer.length > 500)
              if ((l.score - f.score || l.buffer.length - f.buffer.length) > 0)
                i.splice(a--, 1);
              else {
                i.splice(s--, 1);
                continue e;
              }
          }
        }
    }
    this.minStackPos = i[0].pos;
    for (let s = 1; s < i.length; s++)
      i[s].pos < this.minStackPos && (this.minStackPos = i[s].pos);
    return null;
  }
  stopAt(e) {
    if (this.stoppedAt != null && this.stoppedAt < e)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = e;
  }
  advanceStack(e, n, i) {
    let r = e.pos, { parser: o } = this, s = rr ? this.stackID(e) + " -> " : "";
    if (this.stoppedAt != null && r > this.stoppedAt)
      return e.forceReduce() ? e : null;
    if (this.fragments) {
      let f = e.curContext && e.curContext.tracker.strict, c = f ? e.curContext.hash : 0;
      for (let u = this.fragments.nodeAt(r); u; ) {
        let h = this.parser.nodeSet.types[u.type.id] == u.type ? o.getGoto(e.state, u.type.id) : -1;
        if (h > -1 && u.length && (!f || (u.prop(Tt.contextHash) || 0) == c))
          return e.useNode(u, h), rr && console.log(s + this.stackID(e) + ` (via reuse of ${o.getName(u.type.id)})`), !0;
        if (!(u instanceof jn) || u.children.length == 0 || u.positions[0] > 0)
          break;
        let d = u.children[0];
        if (d instanceof jn && u.positions[0] == 0)
          u = d;
        else
          break;
      }
    }
    let l = o.stateSlot(e.state, 4);
    if (l > 0)
      return e.reduce(l), rr && console.log(s + this.stackID(e) + ` (via always-reduce ${o.getName(l & 65535)})`), !0;
    if (e.stack.length >= 15e3)
      for (; e.stack.length > 9e3 && e.forceReduce(); )
        ;
    let a = this.tokens.getActions(e);
    for (let f = 0; f < a.length; ) {
      let c = a[f++], u = a[f++], h = a[f++], d = f == a.length || !i, m = d ? e : e.split();
      if (m.apply(c, u, h), rr && console.log(s + this.stackID(m) + ` (via ${c & 65536 ? `reduce of ${o.getName(c & 65535)}` : "shift"} for ${o.getName(u)} @ ${r}${m == e ? "" : ", split"})`), d)
        return !0;
      m.pos > r ? n.push(m) : i.push(m);
    }
    return !1;
  }
  advanceFully(e, n) {
    let i = e.pos;
    for (; ; ) {
      if (!this.advanceStack(e, null, null))
        return !1;
      if (e.pos > i)
        return cw(e, n), !0;
    }
  }
  runRecovery(e, n, i) {
    let r = null, o = !1;
    for (let s = 0; s < e.length; s++) {
      let l = e[s], a = n[s << 1], f = n[(s << 1) + 1], c = rr ? this.stackID(l) + " -> " : "";
      if (l.deadEnd && (o || (o = !0, l.restart(), rr && console.log(c + this.stackID(l) + " (restarted)"), this.advanceFully(l, i))))
        continue;
      let u = l.split(), h = c;
      for (let d = 0; u.forceReduce() && d < 10 && (rr && console.log(h + this.stackID(u) + " (via force-reduce)"), !this.advanceFully(u, i)); d++)
        rr && (h = this.stackID(u) + " -> ");
      for (let d of l.recoverByInsert(a))
        rr && console.log(c + this.stackID(d) + " (via recover-insert)"), this.advanceFully(d, i);
      this.stream.end > l.pos ? (f == l.pos && (f++, a = 0), l.recoverByDelete(a, f), rr && console.log(c + this.stackID(l) + ` (via recover-delete ${this.parser.getName(a)})`), cw(l, i)) : (!r || r.score < l.score) && (r = l);
    }
    return r;
  }
  stackToTree(e) {
    return e.close(), jn.build({
      buffer: xu.create(e),
      nodeSet: this.parser.nodeSet,
      topID: this.topTerm,
      maxBufferLength: this.parser.bufferLength,
      reused: this.reused,
      start: this.ranges[0].from,
      length: e.pos - this.ranges[0].from,
      minRepeatType: this.parser.minRepeatTerm
    });
  }
  stackID(e) {
    let n = (Vd || (Vd = /* @__PURE__ */ new WeakMap())).get(e);
    return n || Vd.set(e, n = String.fromCodePoint(this.nextStackID++)), n + e;
  }
}
function cw(t, e) {
  for (let n = 0; n < e.length; n++) {
    let i = e[n];
    if (i.pos == t.pos && i.sameState(t)) {
      e[n].score < t.score && (e[n] = t);
      return;
    }
  }
  e.push(t);
}
class lq {
  constructor(e, n, i) {
    this.source = e, this.flags = n, this.disabled = i;
  }
  allows(e) {
    return !this.disabled || this.disabled[e] == 0;
  }
}
class zu extends a4 {
  constructor(e) {
    if (super(), this.wrappers = [], e.version != 14)
      throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);
    let n = e.nodeNames.split(" ");
    this.minRepeatTerm = n.length;
    for (let l = 0; l < e.repeatNodeCount; l++)
      n.push("");
    let i = Object.keys(e.topRules).map((l) => e.topRules[l][1]), r = [];
    for (let l = 0; l < n.length; l++)
      r.push([]);
    function o(l, a, f) {
      r[l].push([a, a.deserialize(String(f))]);
    }
    if (e.nodeProps)
      for (let l of e.nodeProps) {
        let a = l[0];
        typeof a == "string" && (a = Tt[a]);
        for (let f = 1; f < l.length; ) {
          let c = l[f++];
          if (c >= 0)
            o(c, a, l[f++]);
          else {
            let u = l[f + -c];
            for (let h = -c; h > 0; h--)
              o(l[f++], a, u);
            f++;
          }
        }
      }
    this.nodeSet = new Og(n.map((l, a) => Ti.define({
      name: a >= this.minRepeatTerm ? void 0 : l,
      id: a,
      props: r[a],
      top: i.indexOf(a) > -1,
      error: a == 0,
      skipped: e.skippedNodes && e.skippedNodes.indexOf(a) > -1
    }))), e.propSources && (this.nodeSet = this.nodeSet.extend(...e.propSources)), this.strict = !1, this.bufferLength = o4;
    let s = fc(e.tokenData);
    this.context = e.context, this.specializerSpecs = e.specialized || [], this.specialized = new Uint16Array(this.specializerSpecs.length);
    for (let l = 0; l < this.specializerSpecs.length; l++)
      this.specialized[l] = this.specializerSpecs[l].term;
    this.specializers = this.specializerSpecs.map(hw), this.states = fc(e.states, Uint32Array), this.data = fc(e.stateData), this.goto = fc(e.goto), this.maxTerm = e.maxTerm, this.tokenizers = e.tokenizers.map((l) => typeof l == "number" ? new Nc(s, l) : l), this.topRules = e.topRules, this.dialects = e.dialects || {}, this.dynamicPrecedences = e.dynamicPrecedences || null, this.tokenPrecTable = e.tokenPrec, this.termNames = e.termNames || null, this.maxNode = this.nodeSet.types.length - 1, this.dialect = this.parseDialect(), this.top = this.topRules[Object.keys(this.topRules)[0]];
  }
  createParse(e, n, i) {
    let r = new sq(this, e, n, i);
    for (let o of this.wrappers)
      r = o(r, e, n, i);
    return r;
  }
  getGoto(e, n, i = !1) {
    let r = this.goto;
    if (n >= r[0])
      return -1;
    for (let o = r[n + 1]; ; ) {
      let s = r[o++], l = s & 1, a = r[o++];
      if (l && i)
        return a;
      for (let f = o + (s >> 1); o < f; o++)
        if (r[o] == e)
          return a;
      if (l)
        return -1;
    }
  }
  hasAction(e, n) {
    let i = this.data;
    for (let r = 0; r < 2; r++)
      for (let o = this.stateSlot(e, r ? 2 : 1), s; ; o += 3) {
        if ((s = i[o]) == 65535)
          if (i[o + 1] == 1)
            s = i[o = no(i, o + 2)];
          else {
            if (i[o + 1] == 2)
              return no(i, o + 2);
            break;
          }
        if (s == n || s == 0)
          return no(i, o + 1);
      }
    return 0;
  }
  stateSlot(e, n) {
    return this.states[e * 6 + n];
  }
  stateFlag(e, n) {
    return (this.stateSlot(e, 0) & n) > 0;
  }
  validAction(e, n) {
    if (n == this.stateSlot(e, 4))
      return !0;
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = no(this.data, i + 2);
        else
          return !1;
      if (n == no(this.data, i + 1))
        return !0;
    }
  }
  nextStates(e) {
    let n = [];
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = no(this.data, i + 2);
        else
          break;
      if (!(this.data[i + 2] & 1)) {
        let r = this.data[i + 1];
        n.some((o, s) => s & 1 && o == r) || n.push(this.data[i], r);
      }
    }
    return n;
  }
  overrides(e, n) {
    let i = uw(this.data, this.tokenPrecTable, n);
    return i < 0 || uw(this.data, this.tokenPrecTable, e) < i;
  }
  configure(e) {
    let n = Object.assign(Object.create(zu.prototype), this);
    if (e.props && (n.nodeSet = this.nodeSet.extend(...e.props)), e.top) {
      let i = this.topRules[e.top];
      if (!i)
        throw new RangeError(`Invalid top rule name ${e.top}`);
      n.top = i;
    }
    return e.tokenizers && (n.tokenizers = this.tokenizers.map((i) => {
      let r = e.tokenizers.find((o) => o.from == i);
      return r ? r.to : i;
    })), e.specializers && (n.specializers = this.specializers.slice(), n.specializerSpecs = this.specializerSpecs.map((i, r) => {
      let o = e.specializers.find((l) => l.from == i.external);
      if (!o)
        return i;
      let s = Object.assign(Object.assign({}, i), { external: o.to });
      return n.specializers[r] = hw(s), s;
    })), e.contextTracker && (n.context = e.contextTracker), e.dialect && (n.dialect = this.parseDialect(e.dialect)), e.strict != null && (n.strict = e.strict), e.wrap && (n.wrappers = n.wrappers.concat(e.wrap)), e.bufferLength != null && (n.bufferLength = e.bufferLength), n;
  }
  hasWrappers() {
    return this.wrappers.length > 0;
  }
  getName(e) {
    return this.termNames ? this.termNames[e] : String(e <= this.maxNode && this.nodeSet.types[e].name || e);
  }
  get eofTerm() {
    return this.maxNode + 1;
  }
  get topNode() {
    return this.nodeSet.types[this.top[1]];
  }
  dynamicPrecedence(e) {
    let n = this.dynamicPrecedences;
    return n == null ? 0 : n[e] || 0;
  }
  parseDialect(e) {
    let n = Object.keys(this.dialects), i = n.map(() => !1);
    if (e)
      for (let o of e.split(" ")) {
        let s = n.indexOf(o);
        s >= 0 && (i[s] = !0);
      }
    let r = null;
    for (let o = 0; o < n.length; o++)
      if (!i[o])
        for (let s = this.dialects[n[o]], l; (l = this.data[s++]) != 65535; )
          (r || (r = new Uint8Array(this.maxTerm + 1)))[l] = 1;
    return new lq(e, i, r);
  }
  static deserialize(e) {
    return new zu(e);
  }
}
function no(t, e) {
  return t[e] | t[e + 1] << 16;
}
function uw(t, e, n) {
  for (let i = e, r; (r = t[i]) != 65535; i++)
    if (r == n)
      return i - e;
  return -1;
}
function aq(t) {
  let e = null;
  for (let n of t) {
    let i = n.p.stoppedAt;
    (n.pos == n.p.stream.end || i != null && n.pos > i) && n.p.parser.stateFlag(n.state, 2) && (!e || e.score < n.score) && (e = n);
  }
  return e;
}
function hw(t) {
  if (t.external) {
    let e = t.extend ? 1 : 0;
    return (n, i) => t.external(n, i) << 1 | e;
  }
  return t.get;
}
const fq = f4({
  String: Me.string,
  Number: Me.number,
  "True False": Me.bool,
  PropertyName: Me.propertyName,
  Null: Me.null,
  ",": Me.separator,
  "[ ]": Me.squareBracket,
  "{ }": Me.brace
}), cq = zu.deserialize({
  version: 14,
  states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",
  stateData: "#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",
  goto: "!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
  nodeNames: "⚠ JsonText True False Null Number String } { Object Property PropertyName ] [ Array",
  maxTerm: 25,
  nodeProps: [
    ["openedBy", 7, "{", 12, "["],
    ["closedBy", 8, "}", 13, "]"]
  ],
  propSources: [fq],
  skippedNodes: [0],
  repeatNodeCount: 2,
  tokenData: "(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",
  tokenizers: [0],
  topRules: { JsonText: [0, 1] },
  tokenPrec: 0
}), uq = /* @__PURE__ */ ku.define({
  name: "json",
  parser: /* @__PURE__ */ cq.configure({
    props: [
      /* @__PURE__ */ d4.add({
        Object: /* @__PURE__ */ Ry({ except: /^\s*\}/ }),
        Array: /* @__PURE__ */ Ry({ except: /^\s*\]/ })
      }),
      /* @__PURE__ */ p4.add({
        "Object Array": FF
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["[", "{", '"'] },
    indentOnInput: /^\s*[\}\]]$/
  }
});
function hq() {
  return new EF(uq);
}
function dw(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), n = le("Line: "), i = le(t[0]), p(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, o) {
      B(r, e, o), y(e, n), y(e, i);
    },
    p(r, o) {
      o & 1 && Te(i, r[0]);
    },
    d(r) {
      r && j(e);
    }
  };
}
function mw(t) {
  let e, n, i;
  return {
    c() {
      e = T("div"), n = le("Column: "), i = le(t[1]), p(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, o) {
      B(r, e, o), y(e, n), y(e, i);
    },
    p(r, o) {
      o & 2 && Te(i, r[1]);
    },
    d(r) {
      r && j(e);
    }
  };
}
function pw(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("div"), n = le("Selection: "), i = le(t[2]), r = le(" characters"), p(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(o, s) {
      B(o, e, s), y(e, n), y(e, i), y(e, r);
    },
    p(o, s) {
      s & 4 && Te(i, o[2]);
    },
    d(o) {
      o && j(e);
    }
  };
}
function dq(t) {
  let e, n, i, r = t[0] !== void 0 && dw(t), o = t[1] !== void 0 && mw(t), s = t[2] !== void 0 && t[2] > 0 && pw(t);
  return {
    c() {
      e = T("div"), r && r.c(), n = q(), o && o.c(), i = q(), s && s.c(), p(e, "class", "jse-status-bar svelte-1oo7hnc");
    },
    m(l, a) {
      B(l, e, a), r && r.m(e, null), y(e, n), o && o.m(e, null), y(e, i), s && s.m(e, null);
    },
    p(l, [a]) {
      l[0] !== void 0 ? r ? r.p(l, a) : (r = dw(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), l[1] !== void 0 ? o ? o.p(l, a) : (o = mw(l), o.c(), o.m(e, i)) : o && (o.d(1), o = null), l[2] !== void 0 && l[2] > 0 ? s ? s.p(l, a) : (s = pw(l), s.c(), s.m(e, null)) : s && (s.d(1), s = null);
    },
    i: fe,
    o: fe,
    d(l) {
      l && j(e), r && r.d(), o && o.d(), s && s.d();
    }
  };
}
function mq(t, e, n) {
  let { editorState: i } = e, r, o, s, l, a;
  return t.$$set = (f) => {
    "editorState" in f && n(3, i = f.editorState);
  }, t.$$.update = () => {
    var f, c, u, h, d;
    t.$$.dirty & 8 && n(4, r = (c = (f = i == null ? void 0 : i.selection) == null ? void 0 : f.main) == null ? void 0 : c.head), t.$$.dirty & 24 && n(5, o = (u = i == null ? void 0 : i.doc) == null ? void 0 : u.lineAt(r)), t.$$.dirty & 32 && n(0, s = o ? o.number : void 0), t.$$.dirty & 48 && n(1, l = o ? r - o.from + 1 : void 0), t.$$.dirty & 8 && n(2, a = (d = (h = i == null ? void 0 : i.selection) == null ? void 0 : h.ranges) == null ? void 0 : d.reduce(
      (m, g) => m + g.to - g.from,
      0
    ));
  }, [s, l, a, i, r, o];
}
class pq extends Be {
  constructor(e) {
    super(), je(this, e, mq, dq, It, { editorState: 3 });
  }
}
const gq = pq, Xg = wf.define([
  { tag: Me.propertyName, color: "var(--jse-key-color)" },
  { tag: Me.number, color: "var(--jse-value-color-number)" },
  { tag: Me.bool, color: "var(--jse-value-color-boolean)" },
  { tag: Me.string, color: "var(--jse-value-color-string)" },
  { tag: Me.keyword, color: "var(--jse-value-color-null)" }
]), bq = C4(Xg), _q = Xg.style;
Xg.style = (t) => _q(t || []);
function yq(t) {
  const e = t.slice(), n = e[27](e[9], e[7]);
  return e[86] = n, e;
}
function Fd(t) {
  const e = t.slice(), n = e[9].length === 0;
  return e[87] = n, e;
}
function gw(t) {
  let e, n;
  return e = new Px({
    props: {
      readOnly: t[0],
      onFormat: t[15],
      onCompact: t[16],
      onSort: t[17],
      onTransform: t[18],
      onToggleSearch: t[19],
      onUndo: t[20],
      onRedo: t[21],
      canFormat: !t[87],
      canCompact: !t[87],
      canSort: !t[87],
      canTransform: !t[87],
      canUndo: t[10],
      canRedo: t[11],
      onRenderMenu: t[3]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.readOnly = i[0]), r[0] & 512 && (o.canFormat = !i[87]), r[0] & 512 && (o.canCompact = !i[87]), r[0] & 512 && (o.canSort = !i[87]), r[0] & 512 && (o.canTransform = !i[87]), r[0] & 1024 && (o.canUndo = i[10]), r[0] & 2048 && (o.canRedo = i[11]), r[0] & 8 && (o.onRenderMenu = i[3]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function wq(t) {
  let e;
  return {
    c() {
      e = T("div"), e.innerHTML = `<div class="jse-loading-space svelte-1yqirn0"></div> 
      <div class="jse-loading svelte-1yqirn0">loading...</div>`, p(e, "class", "jse-contents svelte-1yqirn0");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function vq(t) {
  let e, n, i, r, o, s = t[86] && bw(t), l = !t[86] && _w(t);
  return {
    c() {
      e = T("div"), n = q(), s && s.c(), i = q(), l && l.c(), r = Ze(), p(e, "class", "jse-contents svelte-1yqirn0"), de(e, "jse-hidden", t[86]);
    },
    m(a, f) {
      B(a, e, f), t[49](e), B(a, n, f), s && s.m(a, f), B(a, i, f), l && l.m(a, f), B(a, r, f), o = !0;
    },
    p(a, f) {
      (!o || f[0] & 134218368) && de(e, "jse-hidden", a[86]), a[86] ? s ? (s.p(a, f), f[0] & 640 && C(s, 1)) : (s = bw(a), s.c(), C(s, 1), s.m(i.parentNode, i)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), pe()), a[86] ? l && (me(), E(l, 1, 1, () => {
        l = null;
      }), pe()) : l ? (l.p(a, f), f[0] & 640 && C(l, 1)) : (l = _w(a), l.c(), C(l, 1), l.m(r.parentNode, r));
    },
    i(a) {
      o || (C(s), C(l), o = !0);
    },
    o(a) {
      E(s), E(l), o = !1;
    },
    d(a) {
      a && j(e), t[49](null), a && j(n), s && s.d(a), a && j(i), l && l.d(a), a && j(r);
    }
  };
}
function bw(t) {
  let e, n, i, r = Jr(t[9] || "", Uc) + "", o, s;
  return e = new Zr({
    props: {
      icon: Fs,
      type: "error",
      message: `The JSON document is larger than ${Hf($d, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Hf(t[9].length, 1024)}.`,
      actions: [
        {
          text: "Open anyway",
          title: "Open the document in text mode. This may freeze or crash your browser.",
          onClick: t[22]
        },
        {
          text: "Open in tree mode",
          title: "Open the document in tree mode. Tree mode can handle large documents.",
          onClick: t[23]
        },
        {
          text: "Cancel",
          title: "Cancel opening this large document.",
          onClick: t[24]
        }
      ]
    }
  }), {
    c() {
      se(e.$$.fragment), n = q(), i = T("div"), o = le(r), p(i, "class", "jse-contents jse-preview svelte-1yqirn0");
    },
    m(l, a) {
      re(e, l, a), B(l, n, a), B(l, i, a), y(i, o), s = !0;
    },
    p(l, a) {
      const f = {};
      a[0] & 512 && (f.message = `The JSON document is larger than ${Hf($d, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Hf(l[9].length, 1024)}.`), e.$set(f), (!s || a[0] & 512) && r !== (r = Jr(l[9] || "", Uc) + "") && Te(o, r);
    },
    i(l) {
      s || (C(e.$$.fragment, l), s = !0);
    },
    o(l) {
      E(e.$$.fragment, l), s = !1;
    },
    d(l) {
      oe(e, l), l && j(n), l && j(i);
    }
  };
}
function _w(t) {
  let e, n, i, r, o = t[2] && yw(t), s = t[12] && ww(t);
  return i = new lg({
    props: {
      validationErrors: t[8],
      selectError: t[25]
    }
  }), {
    c() {
      o && o.c(), e = q(), s && s.c(), n = q(), se(i.$$.fragment);
    },
    m(l, a) {
      o && o.m(l, a), B(l, e, a), s && s.m(l, a), B(l, n, a), re(i, l, a), r = !0;
    },
    p(l, a) {
      l[2] ? o ? (o.p(l, a), a[0] & 4 && C(o, 1)) : (o = yw(l), o.c(), C(o, 1), o.m(e.parentNode, e)) : o && (me(), E(o, 1, 1, () => {
        o = null;
      }), pe()), l[12] ? s ? (s.p(l, a), a[0] & 4096 && C(s, 1)) : (s = ww(l), s.c(), C(s, 1), s.m(n.parentNode, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), pe());
      const f = {};
      a[0] & 256 && (f.validationErrors = l[8]), i.$set(f);
    },
    i(l) {
      r || (C(o), C(s), C(i.$$.fragment, l), r = !0);
    },
    o(l) {
      E(o), E(s), E(i.$$.fragment, l), r = !1;
    },
    d(l) {
      o && o.d(l), l && j(e), s && s.d(l), l && j(n), oe(i, l);
    }
  };
}
function yw(t) {
  let e, n;
  return e = new gq({
    props: { editorState: t[6] }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 64 && (o.editorState = i[6]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function ww(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "error",
      icon: Fs,
      message: t[12].message,
      actions: t[13],
      onClick: t[50]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 4096 && (o.message = i[12].message), r[0] & 8192 && (o.actions = i[13]), r[0] & 4096 && (o.onClick = i[50]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function kq(t) {
  let e, n, i, r, o, s = t[1] && gw(Fd(t));
  const l = [vq, wq], a = [];
  function f(u, h) {
    return u[14] ? 1 : 0;
  }
  function c(u, h) {
    return h === 0 ? yq(u) : u;
  }
  return i = f(t), r = a[i] = l[i](c(t, i)), {
    c() {
      e = T("div"), s && s.c(), n = q(), r.c(), p(e, "class", "jse-text-mode svelte-1yqirn0"), de(e, "no-main-menu", !t[1]);
    },
    m(u, h) {
      B(u, e, h), s && s.m(e, null), y(e, n), a[i].m(e, null), t[51](e), o = !0;
    },
    p(u, h) {
      u[1] ? s ? (s.p(Fd(u), h), h[0] & 2 && C(s, 1)) : (s = gw(Fd(u)), s.c(), C(s, 1), s.m(e, n)) : s && (me(), E(s, 1, 1, () => {
        s = null;
      }), pe()), r.p(c(u, i), h), (!o || h[0] & 2) && de(e, "no-main-menu", !u[1]);
    },
    i(u) {
      o || (C(s), C(r), o = !0);
    },
    o(u) {
      E(s), E(r), o = !1;
    },
    d(u) {
      u && j(e), s && s.d(), a[i].d(), t[51](null);
    }
  };
}
function vw(t) {
  return {
    from: t.from,
    to: t.to,
    message: t.message,
    actions: t.actions,
    severity: t.severity,
    source: void 0
  };
}
function Cq(t, e, n) {
  let i, r, { readOnly: o } = e, { mainMenuBar: s } = e, { statusBar: l } = e, { externalContent: a } = e, { indentation: f } = e, { tabSize: c } = e, { escapeUnicodeCharacters: u } = e, { parser: h } = e, { validator: d } = e, { validationParser: m } = e, { onChange: g } = e, { onChangeMode: _ } = e, { onError: b } = e, { onFocus: w } = e, { onBlur: v } = e, { onRenderMenu: M } = e, { onSortModal: S } = e, { onTransformModal: R } = e;
  const k = Qn("jsoneditor:TextMode"), I = {
    key: "Mod-i",
    run: tt,
    shift: ge,
    preventDefault: !0
  }, L = typeof window > "u";
  k("isSSR:", L);
  let V, N, W, U, O = !1, x = [];
  const A = new io(), H = new io(), D = new io(), P = new io(), K = new io();
  let ne = a, z = Yc(ne, f, h), Z = u;
  zi(async () => {
    if (!L)
      try {
        N = _n({
          target: V,
          initialText: Cn(z, O) ? "" : i.escapeValue(z),
          readOnly: o,
          indentation: f
        }), ze();
      } catch (ce) {
        console.error(ce);
      }
  }), qr(() => {
    N && (k("Destroy CodeMirror editor"), N.destroy());
  });
  let te = !1, G = !1;
  const Ae = vl(), ke = vl();
  function ze() {
    N && (k("focus"), N.focus());
  }
  let ee = !1;
  sg({
    onMount: zi,
    onDestroy: qr,
    getWindow: () => Wl(W),
    hasFocus: () => ee && document.hasFocus() || $c(W),
    onFocus: w,
    onBlur: v
  });
  function we(ce) {
    k("patch", ce);
    const st = h.parse(z), bt = mr(st, ce), Ft = Bk(st, ce);
    return Dt({
      text: h.stringify(bt, null, f)
    }), {
      json: bt,
      previousJson: st,
      undo: Ft,
      redo: ce
    };
  }
  function tt() {
    if (k("format"), !o)
      try {
        const ce = h.parse(z);
        Dt({
          text: h.stringify(ce, null, f)
        });
      } catch (ce) {
        b(ce);
      }
  }
  function ge() {
    if (k("compact"), !o)
      try {
        const ce = h.parse(z);
        Dt({ text: h.stringify(ce) });
      } catch (ce) {
        b(ce);
      }
  }
  function ie() {
    if (k("repair"), !o)
      try {
        Dt({ text: Lr(z) }), n(48, ln = Yh), n(12, Rn = void 0);
      } catch (ce) {
        b(ce);
      }
  }
  function ve() {
    if (!o)
      try {
        const ce = h.parse(z);
        ee = !0, S({
          id: Ae,
          json: ce,
          rootPath: [],
          onSort: async ({ operations: st }) => {
            k("onSort", st), we(st);
          },
          onClose: () => {
            ee = !1, ze();
          }
        });
      } catch (ce) {
        b(ce);
      }
  }
  function Xe({ id: ce, rootPath: st, onTransform: bt, onClose: Ft }) {
    try {
      const wt = h.parse(z);
      ee = !0, R({
        id: ce || ke,
        json: wt,
        rootPath: st,
        onTransform: bt ? (it) => {
          bt({
            operations: it,
            json: wt,
            transformedJson: mr(wt, it)
          });
        } : (it) => {
          k("onTransform", it), we(it);
        },
        onClose: () => {
          ee = !1, ze(), Ft && Ft();
        }
      });
    } catch (wt) {
      b(wt);
    }
  }
  function he() {
    o || Xe({ rootPath: [] });
  }
  function Ve() {
    N && (V && V.querySelector(".cm-search") ? Hg(N) : Fg(N));
  }
  function Ie() {
    o || N && (Bg(N), ze());
  }
  function qe() {
    o || N && (Ou(N), ze());
  }
  function ct() {
    n(7, O = !0), Dt(a, !0);
  }
  function yt() {
    _(ni.tree);
  }
  function Fe() {
    Vt();
  }
  function Oe(ce) {
    k("select validation error", ce);
    const st = nt(ce);
    xe(st.from, st.to), ze();
  }
  function ae(ce) {
    k("select parse error", ce);
    const st = sn(ce, !1);
    xe(st.from, st.to), ze();
  }
  function xe(ce, st) {
    k("setSelection", { anchor: ce, head: st }), N && N.dispatch(N.state.update({
      selection: { anchor: ce, head: st },
      scrollIntoView: !0
    }));
  }
  function ht(ce, st) {
    if (st.state.selection.ranges.length === 1) {
      const bt = st.state.selection.ranges[0], Ft = z.slice(bt.from, bt.to);
      if (Ft === "{" || Ft === "[") {
        const wt = Yu.parse(z), it = Object.keys(wt.pointers).find((Zt) => {
          var an;
          return ((an = wt.pointers[Zt].value) == null ? void 0 : an.pos) === bt.from;
        }), Rt = wt.pointers[it];
        if (it && Rt && Rt.value && Rt.valueEnd) {
          k("pointer found, selecting inner contents of path:", it, Rt);
          const Zt = Rt.value.pos + 1, hn = Rt.valueEnd.pos - 1;
          xe(Zt, hn);
        }
      }
    }
  }
  function ft() {
    return UU(Ei, { delay: B1 });
  }
  function _n({ target: ce, initialText: st, readOnly: bt, indentation: Ft }) {
    k("Create CodeMirror editor", { readOnly: bt, indentation: Ft });
    const wt = Mt.create({
      doc: st,
      extensions: [
        Th.of([AW, I]),
        A.of(ft()),
        $U(),
        eq,
        bq,
        Ke.domEventHandlers({ dblclick: ht }),
        Ke.updateListener.of((it) => {
          n(6, U = it.state), it.docChanged && yn();
        }),
        hq(),
        VW({ top: !0 }),
        D.of(Mt.readOnly.of(bt)),
        H.of(Ke.editable.of(!bt)),
        K.of(Mt.tabSize.of(c)),
        P.of(Wt(Ft)),
        Ke.lineWrapping
      ]
    });
    return N = new Ke({ state: wt, parent: ce }), N;
  }
  function Yn() {
    return N ? i.unescapeValue(N.state.doc.toString()) : "";
  }
  function nt(ce) {
    const { path: st, message: bt } = ce, { line: Ft, column: wt, from: it, to: Rt } = E9(i.escapeValue(z), st);
    return {
      path: st,
      line: Ft,
      column: wt,
      from: it,
      to: Rt,
      message: bt,
      severity: Fo.warning,
      actions: []
    };
  }
  function sn(ce, st) {
    const { line: bt, column: Ft, position: wt, message: it } = ce;
    return {
      path: null,
      line: bt,
      column: Ft,
      from: wt || 0,
      to: wt || 0,
      severity: Fo.error,
      message: it,
      actions: st && !o ? [
        {
          name: "Auto repair",
          apply: () => ie()
        }
      ] : null
    };
  }
  function Dt(ce, st = !1) {
    const bt = Yc(ce, f, h), Ft = !St(ce, ne), wt = ne;
    ne = ce, n(9, z = bt), k("setCodeMirrorContent", { isChanged: Ft, forceUpdate: st }), !(!N || !Ft && !st) && (Cn(z, O) || N.dispatch({
      changes: {
        from: 0,
        to: N.state.doc.length,
        insert: i.escapeValue(z)
      }
    }), Ot(), Ft && Pn(ne, wt));
  }
  function yi() {
    k("refresh");
    const ce = N.state.doc.length;
    N.dispatch({
      changes: { from: ce, to: ce, insert: " " }
    }), N.dispatch({
      changes: { from: ce, to: ce + 1, insert: "" }
    });
  }
  function Zn() {
    k("forceUpdateText", { escapeUnicodeCharacters: u }), N && N.dispatch({
      changes: {
        from: 0,
        to: N.state.doc.length,
        insert: i.escapeValue(z)
      }
    });
  }
  function Vt() {
    if (!N)
      return;
    const ce = Yn(), st = ce !== z;
    if (k("onChangeCodeMirrorValue", { isChanged: st }), !st)
      return;
    const bt = ne;
    n(9, z = ce), ne = { text: z }, Ot(), Pn(ne, bt);
  }
  function Q(ce) {
    k("updateLinter", ce), N && N.dispatch({
      effects: A.reconfigure(ft())
    });
  }
  function ye(ce) {
    N && (k("updateIndentation", ce), N.dispatch({
      effects: P.reconfigure(Wt(ce))
    }));
  }
  function at(ce) {
    N && (k("updateTabSize", ce), N.dispatch({
      effects: K.reconfigure(Mt.tabSize.of(ce))
    }));
  }
  function pt(ce) {
    N && (k("updateReadOnly", ce), N.dispatch({
      effects: [
        D.reconfigure(Mt.readOnly.of(ce)),
        H.reconfigure(Ke.editable.of(!ce))
      ]
    }));
  }
  function Wt(ce) {
    return Ph.of(typeof ce == "number" ? " ".repeat(ce) : ce);
  }
  function Ot() {
    n(10, te = TH(N.state) > 0), n(11, G = EH(N.state) > 0), k({ canUndo: te, canRedo: G });
  }
  const yn = ch(Vt, B1);
  function Pn(ce, st) {
    g && g(ce, st, {
      contentErrors: wi(),
      patchResult: null
    });
  }
  function Cn(ce, st) {
    return ce && ce.length > $d && !st;
  }
  let ln = Yh, Rn = null;
  function Ei() {
    if (Cn(z, O))
      return [];
    const ce = wi();
    if (Zb(ce)) {
      const { parseError: st, isRepairable: bt } = ce;
      return [vw(sn(st, bt))];
    }
    return mj(ce) ? ce.validationErrors.map(nt).map(vw) : [];
  }
  function wi() {
    k("validate:start"), yn.flush();
    const ce = si(i.escapeValue(z), d, h, m);
    return Zb(ce) ? (n(48, ln = ce.isRepairable ? F1 : R8), n(12, Rn = ce.parseError), n(8, x = [])) : (n(48, ln = Yh), n(12, Rn = null), n(8, x = ce.validationErrors)), k("validate:end"), ce;
  }
  const si = pf(GD);
  function Ln(ce) {
    mt[ce ? "unshift" : "push"](() => {
      V = ce, n(4, V);
    });
  }
  const Pi = () => ae(Rn);
  function Nt(ce) {
    mt[ce ? "unshift" : "push"](() => {
      W = ce, n(5, W);
    });
  }
  return t.$$set = (ce) => {
    "readOnly" in ce && n(0, o = ce.readOnly), "mainMenuBar" in ce && n(1, s = ce.mainMenuBar), "statusBar" in ce && n(2, l = ce.statusBar), "externalContent" in ce && n(28, a = ce.externalContent), "indentation" in ce && n(29, f = ce.indentation), "tabSize" in ce && n(30, c = ce.tabSize), "escapeUnicodeCharacters" in ce && n(31, u = ce.escapeUnicodeCharacters), "parser" in ce && n(32, h = ce.parser), "validator" in ce && n(33, d = ce.validator), "validationParser" in ce && n(34, m = ce.validationParser), "onChange" in ce && n(35, g = ce.onChange), "onChangeMode" in ce && n(36, _ = ce.onChangeMode), "onError" in ce && n(37, b = ce.onError), "onFocus" in ce && n(38, w = ce.onFocus), "onBlur" in ce && n(39, v = ce.onBlur), "onRenderMenu" in ce && n(3, M = ce.onRenderMenu), "onSortModal" in ce && n(40, S = ce.onSortModal), "onTransformModal" in ce && n(41, R = ce.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 1 && (i = Gp({
      escapeControlCharacters: !1,
      escapeUnicodeCharacters: u
    })), t.$$.dirty[0] & 268435456 && Dt(a), t.$$.dirty[1] & 4 && Q(d), t.$$.dirty[0] & 536870912 && ye(f), t.$$.dirty[0] & 1073741824 && at(c), t.$$.dirty[0] & 1 && pt(o), t.$$.dirty[1] & 65537 && Z !== u && (n(47, Z = u), Zn()), t.$$.dirty[0] & 1 | t.$$.dirty[1] & 131072 && n(13, r = ln === F1 && !o ? [
      {
        icon: _h,
        text: "Auto repair",
        title: "Automatically repair JSON",
        onClick: ie
      }
    ] : []);
  }, [
    o,
    s,
    l,
    M,
    V,
    W,
    U,
    O,
    x,
    z,
    te,
    G,
    Rn,
    r,
    L,
    tt,
    ge,
    ve,
    he,
    Ve,
    Ie,
    qe,
    ct,
    yt,
    Fe,
    Oe,
    ae,
    Cn,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    S,
    R,
    ze,
    we,
    Xe,
    yi,
    wi,
    Z,
    ln,
    Ln,
    Pi,
    Nt
  ];
}
class Sq extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      Cq,
      kq,
      gt,
      {
        readOnly: 0,
        mainMenuBar: 1,
        statusBar: 2,
        externalContent: 28,
        indentation: 29,
        tabSize: 30,
        escapeUnicodeCharacters: 31,
        parser: 32,
        validator: 33,
        validationParser: 34,
        onChange: 35,
        onChangeMode: 36,
        onError: 37,
        onFocus: 38,
        onBlur: 39,
        onRenderMenu: 3,
        onSortModal: 40,
        onTransformModal: 41,
        focus: 42,
        patch: 43,
        openTransformModal: 44,
        refresh: 45,
        validate: 46
      },
      null,
      [-1, -1, -1]
    );
  }
  get focus() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get openTransformModal() {
    return this.$$.ctx[44];
  }
  get refresh() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
}
const Mq = Sq;
function Aq(t) {
  let e, n;
  return e = new Sh({ props: { items: t[0] } }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, [r]) {
      const o = {};
      r & 1 && (o.items = i[0]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Oq(t, e, n) {
  let { json: i } = e, { readOnly: r } = e, { historyState: o } = e, { onSort: s } = e, { onTransform: l } = e, { onContextMenu: a } = e, { onUndo: f } = e, { onRedo: c } = e, { onRenderMenu: u } = e, h, d;
  return t.$$set = (m) => {
    "json" in m && n(1, i = m.json), "readOnly" in m && n(2, r = m.readOnly), "historyState" in m && n(3, o = m.historyState), "onSort" in m && n(4, s = m.onSort), "onTransform" in m && n(5, l = m.onTransform), "onContextMenu" in m && n(6, a = m.onContextMenu), "onUndo" in m && n(7, f = m.onUndo), "onRedo" in m && n(8, c = m.onRedo), "onRenderMenu" in m && n(9, u = m.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 510 && n(10, h = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: yh,
        title: "Sort",
        className: "jse-sort",
        onClick: s,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: bh,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: l,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: hC,
        title: Ap,
        className: "jse-contextmenu",
        onClick: a
      },
      { type: "separator" },
      {
        type: "button",
        icon: tg,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: f,
        disabled: !o.canUndo
      },
      {
        type: "button",
        icon: eg,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: c,
        disabled: !o.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 1536 && n(0, d = u("table", h) || h);
  }, [
    d,
    i,
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h
  ];
}
class Tq extends Be {
  constructor(e) {
    super(), je(this, e, Oq, Aq, gt, {
      json: 1,
      readOnly: 2,
      historyState: 3,
      onSort: 4,
      onTransform: 5,
      onContextMenu: 6,
      onUndo: 7,
      onRedo: 8,
      onRenderMenu: 9
    });
  }
}
const Eq = Tq;
function Pq(t, e, n = Math.min(xt(t) ? t.length : 0, 100)) {
  const i = /* @__PURE__ */ new Set();
  for (let r = 0; r < n; r++)
    (e ? Iq(t[r]) : Rq(t[r])).forEach((s) => i.add(Se(s)));
  return Array.from(i).map(gr);
}
function Rq(t) {
  return bn(t) ? Object.keys(t).map((e) => [e]) : [[]];
}
function Iq(t) {
  const e = [];
  function n(i, r) {
    bn(i) ? Object.keys(i).forEach((o) => {
      n(i[o], r.concat(o));
    }) : e.push(r);
  }
  return n(t, []), e;
}
function Nq(t, e, n, i, r, o = 80) {
  const s = xt(n) ? n.length : 0, l = Dq(i, r), a = t - o, f = e + 2 * o, c = (b) => i[b] || r;
  let u = 0, h = 0;
  for (; h < a && u < s; )
    h += c(u), u++;
  u > 0 && (u--, h -= c(u));
  let d = u, m = 0;
  for (; m < f && d < s; )
    m += c(d), d++;
  let g = 0;
  for (let b = d; b < s; b++)
    g += c(b);
  const _ = xt(n) ? n.slice(u, d) : [];
  return {
    startIndex: u,
    endIndex: d,
    startHeight: h,
    endHeight: g,
    averageItemHeight: l,
    visibleHeight: m,
    visibleItems: _
  };
}
function Hd(t, e, n, i) {
  const { rowIndex: r } = ss(t, e);
  let o = 0;
  for (let s = 0; s < r; s++)
    o += n[s] || i;
  return o;
}
function Dq(t, e) {
  const n = Object.values(t);
  if (At(n))
    return e;
  const i = (o, s) => o + s;
  return n.reduce(i) / n.length;
}
function jq(t, e) {
  const { rowIndex: n, columnIndex: i } = ss(e.focusPath, t);
  if (n > 0) {
    const r = { rowIndex: n - 1, columnIndex: i }, o = Wh(r, t);
    return Et(o, !1);
  }
  return e;
}
function Bq(t, e, n) {
  const { rowIndex: i, columnIndex: r } = ss(n.focusPath, e);
  if (i < t.length - 1) {
    const o = { rowIndex: i + 1, columnIndex: r }, s = Wh(o, e);
    return Et(s, !1);
  }
  return n;
}
function Lq(t, e) {
  const { rowIndex: n, columnIndex: i } = ss(e.focusPath, t);
  if (i > 0) {
    const r = { rowIndex: n, columnIndex: i - 1 }, o = Wh(r, t);
    return Et(o, !1);
  }
  return e;
}
function xq(t, e) {
  const { rowIndex: n, columnIndex: i } = ss(e.focusPath, t);
  if (i < t.length - 1) {
    const r = { rowIndex: n, columnIndex: i + 1 }, o = Wh(r, t);
    return Et(o, !1);
  }
  return e;
}
function ss(t, e) {
  const [n, ...i] = t, r = parseInt(n, 10);
  return {
    rowIndex: isNaN(r) ? -1 : r,
    columnIndex: e.findIndex((o) => Al(i, o))
  };
}
function Wh(t, e) {
  const { rowIndex: n, columnIndex: i } = t;
  return [String(n), ...e[i]];
}
function zq(t, e) {
  const [n, i] = u9(t, (s) => jp(s.path[0])), r = uh(n, Vq), o = r9(r, (s) => {
    const l = {
      row: [],
      columns: {}
    };
    return s.forEach((a) => {
      const f = Fq(a, e);
      f !== -1 ? (l.columns[f] === void 0 && (l.columns[f] = []), l.columns[f].push(a)) : l.row.push(a);
    }), l;
  });
  return {
    root: i,
    rows: o
  };
}
function jl(t, e) {
  if (!(!e || e.length === 0))
    return e.length === 1 ? e[0] : {
      path: t,
      message: "Multiple validation issues: " + e.map((n) => Yi(Oi(n.path)) + " " + n.message).join(", "),
      severity: Fo.warning
    };
}
function Vq(t) {
  return parseInt(t.path[0], 10);
}
function Fq(t, e) {
  const n = ss(t.path, e);
  return n.columnIndex !== -1 ? n.columnIndex : -1;
}
function Hq(t, e, n) {
  return e.some((r) => Wq(t.sortedColumn, r, n)) ? {
    ...t,
    sortedColumn: void 0
  } : t;
}
function Wq(t, e, n) {
  if (!t)
    return !1;
  if (e.op === "replace") {
    const i = gr(e.path), { rowIndex: r, columnIndex: o } = ss(i, n), s = n.findIndex((l) => St(l, t.path));
    if (r !== -1 && o !== -1 && o !== s)
      return !1;
  }
  return !0;
}
function Uq(t, e = 2) {
  const n = [];
  function i(r, o) {
    bn(r) && o.length < e && Object.keys(r).forEach((s) => {
      i(r[s], o.concat(s));
    }), xt(r) && n.push(o);
  }
  return i(t, []), n;
}
function kw(t, e, n) {
  const i = t.slice();
  return i[9] = e[n], i;
}
function Cw(t) {
  let e, n, i;
  const r = [t[9].props];
  var o = t[9].component;
  function s(l) {
    let a = {};
    for (let f = 0; f < r.length; f += 1)
      a = $o(a, r[f]);
    return { props: a };
  }
  return o && (e = Ur(o, s())), {
    c() {
      e && se(e.$$.fragment), n = Ze();
    },
    m(l, a) {
      e && re(e, l, a), B(l, n, a), i = !0;
    },
    p(l, a) {
      const f = a & 1 ? xs(r, [Qu(l[9].props)]) : {};
      if (o !== (o = l[9].component)) {
        if (e) {
          me();
          const c = e;
          E(c.$$.fragment, 1, 0, () => {
            oe(c, 1);
          }), pe();
        }
        o ? (e = Ur(o, s()), se(e.$$.fragment), C(e.$$.fragment, 1), re(e, n.parentNode, n)) : e = null;
      } else
        o && e.$set(f);
    },
    i(l) {
      i || (e && C(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && E(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && j(n), e && oe(e, l);
    }
  };
}
function qq(t) {
  let e, n, i = t[0], r = [];
  for (let s = 0; s < i.length; s += 1)
    r[s] = Cw(kw(t, i, s));
  const o = (s) => E(r[s], 1, 1, () => {
    r[s] = null;
  });
  return {
    c() {
      for (let s = 0; s < r.length; s += 1)
        r[s].c();
      e = Ze();
    },
    m(s, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(s, l);
      B(s, e, l), n = !0;
    },
    p(s, [l]) {
      if (l & 1) {
        i = s[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const f = kw(s, i, a);
          r[a] ? (r[a].p(f, l), C(r[a], 1)) : (r[a] = Cw(f), r[a].c(), C(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (me(), a = i.length; a < r.length; a += 1)
          o(a);
        pe();
      }
    },
    i(s) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          C(r[l]);
        n = !0;
      }
    },
    o(s) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        E(r[l]);
      n = !1;
    },
    d(s) {
      zt(r, s), s && j(e);
    }
  };
}
function Jq(t, e, n) {
  let i, r, { path: o } = e, { value: s } = e, { context: l } = e, { enforceString: a } = e, { selection: f } = e, { searchResultItems: c } = e;
  function u(h, d) {
    return l.onPatch(CI(h, l.getJson()), d);
  }
  return t.$$set = (h) => {
    "path" in h && n(1, o = h.path), "value" in h && n(2, s = h.value), "context" in h && n(3, l = h.context), "enforceString" in h && n(4, a = h.enforceString), "selection" in h && n(5, f = h.selection), "searchResultItems" in h && n(6, c = h.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && vt(f) && Uo(f)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: o,
      value: s,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: f,
      searchResultItems: c,
      onPatch: u,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    i
  ];
}
class Kq extends Be {
  constructor(e) {
    super(), je(this, e, Jq, qq, gt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
}
const Gq = Kq;
function Xq(t) {
  let e, n = Jr(t[2].stringify(t[1]), x1) + "", i, r, o;
  return {
    c() {
      e = T("button"), i = le(n), p(e, "type", "button"), p(e, "class", "jse-inline-value svelte-l28mqd"), de(e, "jse-selected", t[3]);
    },
    m(s, l) {
      B(s, e, l), y(e, i), r || (o = X(e, "dblclick", t[6]), r = !0);
    },
    p(s, [l]) {
      l & 6 && n !== (n = Jr(s[2].stringify(s[1]), x1) + "") && Te(i, n), l & 8 && de(e, "jse-selected", s[3]);
    },
    i: fe,
    o: fe,
    d(s) {
      s && j(e), r = !1, o();
    }
  };
}
function Qq(t, e, n) {
  let i, { path: r } = e, { value: o } = e, { parser: s } = e, { isSelected: l } = e, { onEdit: a } = e;
  const f = () => a(r);
  return t.$$set = (c) => {
    "path" in c && n(0, r = c.path), "value" in c && n(1, o = c.value), "parser" in c && n(2, s = c.parser), "isSelected" in c && n(3, l = c.isSelected), "onEdit" in c && n(4, a = c.onEdit);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(5, i = xt(o) ? o.length : Object.keys(o).length), t.$$.dirty & 34;
  }, [r, o, s, l, a, i, f];
}
class Yq extends Be {
  constructor(e) {
    super(), je(this, e, Qq, Xq, It, {
      path: 0,
      value: 1,
      parser: 2,
      isSelected: 3,
      onEdit: 4
    });
  }
}
const Zq = Yq;
function Sw(t) {
  let e, n, i, r;
  return n = new Ct({
    props: {
      data: t[1] === Ji.asc ? Ui : ob
    }
  }), {
    c() {
      e = T("span"), se(n.$$.fragment), p(e, "class", "jse-column-sort-icon svelte-h4fort"), p(e, "title", i = `Currently sorted in ${t[2]} order`);
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), r = !0;
    },
    p(o, s) {
      const l = {};
      s & 2 && (l.data = o[1] === Ji.asc ? Ui : ob), n.$set(l), (!r || s & 4 && i !== (i = `Currently sorted in ${o[2]} order`)) && p(e, "title", i);
    },
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function $q(t) {
  let e, n, i = Jr(t[3], z1) + "", r, o, s, l, a, f, c = t[1] !== void 0 && Sw(t);
  return {
    c() {
      e = T("button"), n = T("span"), r = le(i), o = q(), c && c.c(), p(n, "class", "jse-column-name"), p(e, "type", "button"), p(e, "class", "jse-column-header svelte-h4fort"), p(e, "title", s = t[0] ? t[3] : t[3] + " (Click to sort the data by this column)"), de(e, "jse-readonly", t[0]);
    },
    m(u, h) {
      B(u, e, h), y(e, n), y(n, r), y(e, o), c && c.m(e, null), l = !0, a || (f = X(e, "click", t[4]), a = !0);
    },
    p(u, [h]) {
      (!l || h & 8) && i !== (i = Jr(u[3], z1) + "") && Te(r, i), u[1] !== void 0 ? c ? (c.p(u, h), h & 2 && C(c, 1)) : (c = Sw(u), c.c(), C(c, 1), c.m(e, null)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), pe()), (!l || h & 9 && s !== (s = u[0] ? u[3] : u[3] + " (Click to sort the data by this column)")) && p(e, "title", s), (!l || h & 1) && de(e, "jse-readonly", u[0]);
    },
    i(u) {
      l || (C(c), l = !0);
    },
    o(u) {
      E(c), l = !1;
    },
    d(u) {
      u && j(e), c && c.d(), a = !1, f();
    }
  };
}
function eJ(t, e, n) {
  let i, r, o, { path: s } = e, { sortedColumn: l } = e, { readOnly: a } = e, { onSort: f } = e;
  function c() {
    a || f({
      path: s,
      sortDirection: r === Ji.asc ? Ji.desc : Ji.asc
    });
  }
  return t.$$set = (u) => {
    "path" in u && n(5, s = u.path), "sortedColumn" in u && n(6, l = u.sortedColumn), "readOnly" in u && n(0, a = u.readOnly), "onSort" in u && n(7, f = u.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 32 && n(3, i = At(s) ? "values" : Yi(Oi(s))), t.$$.dirty & 96 && n(1, r = St(s, l == null ? void 0 : l.path) ? l.sortDirection : void 0), t.$$.dirty & 2 && n(2, o = I8[r]);
  }, [
    a,
    r,
    o,
    i,
    c,
    s,
    l,
    f
  ];
}
class tJ extends Be {
  constructor(e) {
    super(), je(this, e, eJ, $q, It, {
      path: 5,
      sortedColumn: 6,
      readOnly: 0,
      onSort: 7
    });
  }
}
const nJ = tJ;
let cc, uc;
function P5(t, e) {
  return cc || (uc = /* @__PURE__ */ new WeakMap(), cc = new ResizeObserver((n) => {
    for (const i of n) {
      const r = uc.get(i.target);
      r && r(i.target);
    }
  })), uc.set(t, e), cc.observe(t), {
    destroy: () => {
      uc.delete(t), cc.unobserve(t);
    }
  };
}
function iJ(t) {
  let e, n;
  return e = new OC({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2 && (o.items = i[1]), r[0] & 1 && (o.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function rJ(t, e, n) {
  let i, r, o, s, l, a, f, c, u, h, d, { json: m } = e, { documentState: g } = e, { parser: _ } = e, { showTip: b } = e, { onCloseContextMenu: w } = e, { onEditValue: v } = e, { onToggleEnforceString: M } = e, { onCut: S } = e, { onCopy: R } = e, { onPaste: k } = e, { onRemove: I } = e;
  function L() {
    w(), v();
  }
  function V() {
    w(), M();
  }
  function N() {
    w(), S(!0);
  }
  function W() {
    w(), S(!1);
  }
  function U() {
    w(), R(!0);
  }
  function O() {
    w(), R(!1);
  }
  function x() {
    w(), k();
  }
  function A() {
    w(), I();
  }
  let H;
  return t.$$set = (D) => {
    "json" in D && n(2, m = D.json), "documentState" in D && n(3, g = D.documentState), "parser" in D && n(4, _ = D.parser), "showTip" in D && n(0, b = D.showTip), "onCloseContextMenu" in D && n(5, w = D.onCloseContextMenu), "onEditValue" in D && n(6, v = D.onEditValue), "onToggleEnforceString" in D && n(7, M = D.onToggleEnforceString), "onCut" in D && n(8, S = D.onCut), "onCopy" in D && n(9, R = D.onCopy), "onPaste" in D && n(10, k = D.onPaste), "onRemove" in D && n(11, I = D.onRemove);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(18, i = g.selection), t.$$.dirty[0] & 4 && n(21, r = m !== void 0), t.$$.dirty[0] & 262144 && n(13, o = i != null), t.$$.dirty[0] & 270336 && n(22, s = o && At(i.focusPath)), t.$$.dirty[0] & 270340 && n(19, l = o ? Le(m, i.focusPath) : void 0), t.$$.dirty[0] & 524288 && n(17, a = Array.isArray(l) ? "Edit array" : pn(l) ? "Edit object" : "Edit value"), t.$$.dirty[0] & 2359296 && n(12, f = r && (Pt(i) || kn(i) || vt(i))), t.$$.dirty[0] & 6295552, t.$$.dirty[0] & 6553600 && r && i != null && (Pt(i) || vt(i)), t.$$.dirty[0] & 6553604 && r && i != null && Ba(i) && !s && Array.isArray(Le(m, kt(i.focusPath))), t.$$.dirty[0] & 2359296 && n(16, c = r && i != null && Ba(i)), t.$$.dirty[0] & 589824 && n(14, u = c && !rn(l)), t.$$.dirty[0] & 4096 && n(20, h = f), t.$$.dirty[0] & 1048576, t.$$.dirty[0] & 1056768, t.$$.dirty[0] & 1843200 && h && Cs(i) && pn(l), t.$$.dirty[0] & 1843200 && h && Cs(i) && Array.isArray(l), t.$$.dirty[0] & 1843200 && h && Cs(i) && rn(l), t.$$.dirty[0] & 786456 && n(15, d = i != null ? uo(l, g.enforceStringMap, Se(i.focusPath), _) : !1), t.$$.dirty[0] & 258048 && n(1, H = [
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: L,
                  icon: ba,
                  text: a,
                  title: "Edit the value (Double-click on the value)",
                  disabled: !c
                },
                width: "11em",
                items: [
                  {
                    type: "button",
                    icon: ba,
                    text: a,
                    title: "Edit the value (Double-click on the value)",
                    onClick: L,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: d ? Na : Da,
                    text: "Enforce string",
                    title: "Enforce keeping the value as string when it contains a numeric value",
                    onClick: V,
                    disabled: !u
                  }
                ]
              },
              { type: "separator" },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: N,
                  icon: ll,
                  text: "Cut",
                  title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                  disabled: !f
                },
                width: "10em",
                items: [
                  {
                    type: "button",
                    icon: ll,
                    text: "Cut formatted",
                    title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                    onClick: N,
                    disabled: !f
                  },
                  {
                    type: "button",
                    icon: ll,
                    text: "Cut compacted",
                    title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                    onClick: W,
                    disabled: !f
                  }
                ]
              },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: U,
                  icon: Lo,
                  text: "Copy",
                  title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                  disabled: !f
                },
                width: "12em",
                items: [
                  {
                    type: "button",
                    icon: Lo,
                    text: "Copy formatted",
                    title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                    onClick: U,
                    disabled: !f
                  },
                  {
                    type: "button",
                    icon: Lo,
                    text: "Copy compacted",
                    title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                    onClick: O,
                    disabled: !f
                  }
                ]
              },
              {
                type: "button",
                onClick: x,
                icon: cC,
                text: "Paste",
                title: "Paste clipboard contents (Ctrl+V)",
                disabled: !o
              },
              { type: "separator" },
              {
                type: "button",
                onClick: A,
                icon: Ul,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !f
              }
            ]
          }
        ]
      }
    ]);
  }, [
    b,
    H,
    m,
    g,
    _,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    f,
    o,
    u,
    d,
    c,
    a,
    i,
    l,
    h,
    r,
    s
  ];
}
class oJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      rJ,
      iJ,
      gt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditValue: 6,
        onToggleEnforceString: 7,
        onCut: 8,
        onCopy: 9,
        onPaste: 10,
        onRemove: 11
      },
      null,
      [-1, -1]
    );
  }
}
const sJ = oJ;
function Mw(t, e, n) {
  const i = t.slice();
  i[12] = e[n];
  const r = Le(i[0], i[12]).length;
  return i[13] = r, i;
}
function lJ(t) {
  let e, n;
  return {
    c() {
      e = le(t[5]), n = le(" cannot be opened in table mode. You can open the document in tree mode instead.");
    },
    m(i, r) {
      B(i, e, r), B(i, n, r);
    },
    p(i, r) {
      r & 32 && Te(e, i[5]);
    },
    d(i) {
      i && j(e), i && j(n);
    }
  };
}
function aJ(t) {
  let e;
  return {
    c() {
      e = le(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`);
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function Aw(t) {
  let e, n, i, r = Yi(Oi(t[12])) + "", o, s, l, a, f = t[13] + "", c, u, h = t[13] !== 1 ? "items" : "item", d, m, g, _;
  function b() {
    return t[10](t[12]);
  }
  return {
    c() {
      e = T("button"), n = le(t[6]), i = le(' "'), o = le(r), s = le(`"
        `), l = T("span"), a = le("("), c = le(f), u = q(), d = le(h), m = le(")"), p(l, "class", "jse-nested-array-count svelte-1te5h1h"), p(e, "type", "button"), p(e, "class", "jse-nested-array-action svelte-1te5h1h");
    },
    m(w, v) {
      B(w, e, v), y(e, n), y(e, i), y(e, o), y(e, s), y(e, l), y(l, a), y(l, c), y(l, u), y(l, d), y(l, m), g || (_ = X(e, "click", b), g = !0);
    },
    p(w, v) {
      t = w, v & 64 && Te(n, t[6]), v & 8 && r !== (r = Yi(Oi(t[12])) + "") && Te(o, r), v & 9 && f !== (f = t[13] + "") && Te(c, f), v & 9 && h !== (h = t[13] !== 1 ? "items" : "item") && Te(d, h);
    },
    d(w) {
      w && j(e), g = !1, _();
    }
  };
}
function fJ(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b;
  function w(k, I) {
    return k[4] ? aJ : lJ;
  }
  let v = w(t), M = v(t), S = t[3], R = [];
  for (let k = 0; k < S.length; k += 1)
    R[k] = Aw(Mw(t, S, k));
  return {
    c() {
      e = T("div"), n = T("div"), i = q(), r = T("div"), o = T("div"), s = le(t[5]), l = q(), a = T("div"), M.c(), f = q();
      for (let k = 0; k < R.length; k += 1)
        R[k].c();
      c = q(), u = T("button"), h = le(t[6]), d = le(" in tree mode"), m = q(), g = T("div"), p(n, "class", "jse-space jse-before svelte-1te5h1h"), p(o, "class", "jse-nested-arrays-title"), p(a, "class", "jse-nested-arrays-info svelte-1te5h1h"), p(u, "type", "button"), p(u, "class", "jse-nested-array-action svelte-1te5h1h"), p(r, "class", "jse-nested-arrays svelte-1te5h1h"), p(g, "class", "jse-space jse-after svelte-1te5h1h"), p(e, "class", "jse-table-mode-welcome svelte-1te5h1h");
    },
    m(k, I) {
      B(k, e, I), y(e, n), y(e, i), y(e, r), y(r, o), y(o, s), y(r, l), y(r, a), M.m(a, null), y(r, f);
      for (let L = 0; L < R.length; L += 1)
        R[L].m(r, null);
      y(r, c), y(r, u), y(u, h), y(u, d), y(e, m), y(e, g), _ || (b = X(u, "click", t[11]), _ = !0);
    },
    p(k, [I]) {
      if (I & 32 && Te(s, k[5]), v === (v = w(k)) && M ? M.p(k, I) : (M.d(1), M = v(k), M && (M.c(), M.m(a, null))), I & 75) {
        S = k[3];
        let L;
        for (L = 0; L < S.length; L += 1) {
          const V = Mw(k, S, L);
          R[L] ? R[L].p(V, I) : (R[L] = Aw(V), R[L].c(), R[L].m(r, c));
        }
        for (; L < R.length; L += 1)
          R[L].d(1);
        R.length = S.length;
      }
      I & 64 && Te(h, k[6]);
    },
    i: fe,
    o: fe,
    d(k) {
      k && j(e), M.d(), zt(R, k), _ = !1, b();
    }
  };
}
function cJ(t, e, n) {
  let i, r, o, { text: s } = e, { json: l } = e, { readOnly: a } = e, { parser: f } = e, { openJSONEditorModal: c } = e, { onChangeMode: u } = e, h;
  const d = (g) => c(g), m = () => u(ni.tree);
  return t.$$set = (g) => {
    "text" in g && n(7, s = g.text), "json" in g && n(0, l = g.json), "readOnly" in g && n(8, a = g.readOnly), "parser" in g && n(9, f = g.parser), "openJSONEditorModal" in g && n(1, c = g.openJSONEditorModal), "onChangeMode" in g && n(2, u = g.onChangeMode);
  }, t.$$.update = () => {
    t.$$.dirty & 256 && n(6, i = a ? "View" : "Edit"), t.$$.dirty & 1 && n(3, h = l ? Uq(l).slice(0, 99).filter((g) => g.length > 0) : []), t.$$.dirty & 8 && n(4, r = !At(h)), t.$$.dirty & 657 && n(5, o = r ? "Object with nested arrays" : l === void 0 && (s === "" || s === void 0) ? "An empty document" : bn(l) ? "An object" : xt(l) ? "An empty array" : `A ${Bp(l, f)}`);
  }, [
    l,
    c,
    u,
    h,
    r,
    o,
    i,
    s,
    a,
    f,
    d,
    m
  ];
}
class uJ extends Be {
  constructor(e) {
    super(), je(this, e, cJ, fJ, It, {
      text: 7,
      json: 0,
      readOnly: 8,
      parser: 9,
      openJSONEditorModal: 1,
      onChangeMode: 2
    });
  }
}
const hJ = uJ;
function Ow(t, e, n) {
  const i = t.slice();
  i[112] = e[n], i[116] = n;
  const r = i[21].startIndex + i[116];
  i[113] = r;
  const o = i[20].rows[i[113]];
  return i[114] = o, i;
}
function Tw(t, e, n) {
  var a;
  const i = t.slice();
  i[117] = e[n], i[123] = n;
  const r = [String(i[113])].concat(i[117]);
  i[118] = r;
  const o = Le(i[112], i[117]);
  i[119] = o;
  const s = i[44](i[118], i[9].selection);
  i[120] = s;
  const l = (a = i[114]) == null ? void 0 : a.columns[i[123]];
  return i[121] = l, i;
}
function Ew(t, e, n) {
  const i = t.slice();
  return i[117] = e[n], i;
}
function Pw(t) {
  let e, n;
  return e = new Eq({
    props: {
      json: t[7],
      readOnly: t[0],
      historyState: t[18],
      onSort: t[38],
      onTransform: t[39],
      onUndo: t[40],
      onRedo: t[41],
      onContextMenu: t[30],
      onRenderMenu: t[5]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 128 && (o.json = i[7]), r[0] & 1 && (o.readOnly = i[0]), r[0] & 262144 && (o.historyState = i[18]), r[0] & 32 && (o.onRenderMenu = i[5]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function dJ(t) {
  let e;
  return {
    c() {
      e = T("div"), e.innerHTML = `<div class="jse-loading-space svelte-hs49xj"></div> 
      <div class="jse-loading svelte-hs49xj">loading...</div>`, p(e, "class", "jse-contents jse-contents-loading svelte-hs49xj");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    i: fe,
    o: fe,
    d(n) {
      n && j(e);
    }
  };
}
function mJ(t) {
  let e, n, i, r, o, s, l, a, f;
  const c = [bJ, gJ, pJ], u = [];
  function h(d, m) {
    return d[22] ? 0 : d[15] && d[14] !== void 0 && d[14] !== "" ? 1 : 2;
  }
  return r = h(t), o = u[r] = c[r](t), {
    c() {
      e = T("label"), n = T("input"), i = q(), o.c(), s = Ze(), p(n, "type", "text"), n.readOnly = "readonly", p(n, "tabindex", "-1"), p(n, "class", "jse-hidden-input svelte-hs49xj"), p(e, "class", "jse-hidden-input-label svelte-hs49xj");
    },
    m(d, m) {
      B(d, e, m), y(e, n), t[69](n), B(d, i, m), u[r].m(d, m), B(d, s, m), l = !0, a || (f = X(n, "paste", t[35]), a = !0);
    },
    p(d, m) {
      let g = r;
      r = h(d), r === g ? u[r].p(d, m) : (me(), E(u[g], 1, 1, () => {
        u[g] = null;
      }), pe(), o = u[r], o ? o.p(d, m) : (o = u[r] = c[r](d), o.c()), C(o, 1), o.m(s.parentNode, s));
    },
    i(d) {
      l || (C(o), l = !0);
    },
    o(d) {
      E(o), l = !1;
    },
    d(d) {
      d && j(e), t[69](null), d && j(i), u[r].d(d), d && j(s), a = !1, f();
    }
  };
}
function pJ(t) {
  let e, n;
  return e = new hJ({
    props: {
      text: t[14],
      json: t[7],
      readOnly: t[0],
      parser: t[2],
      openJSONEditorModal: t[37],
      onChangeMode: t[4]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 16384 && (o.text = i[14]), r[0] & 128 && (o.json = i[7]), r[0] & 1 && (o.readOnly = i[0]), r[0] & 4 && (o.parser = i[2]), r[0] & 16 && (o.onChangeMode = i[4]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function gJ(t) {
  let e, n, i, r;
  return e = new Zr({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: qo,
          text: "Repair manually",
          onClick: t[33]
        }
      ]
    }
  }), i = new BC({
    props: {
      text: t[14] || "",
      json: t[7],
      indentation: t[3],
      parser: t[2]
    }
  }), {
    c() {
      se(e.$$.fragment), n = q(), se(i.$$.fragment);
    },
    m(o, s) {
      re(e, o, s), B(o, n, s), re(i, o, s), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 1 && (l.actions = o[0] ? [] : [
        {
          icon: qo,
          text: "Repair manually",
          onClick: o[33]
        }
      ]), e.$set(l);
      const a = {};
      s[0] & 16384 && (a.text = o[14] || ""), s[0] & 128 && (a.json = o[7]), s[0] & 8 && (a.indentation = o[3]), s[0] & 4 && (a.parser = o[2]), i.$set(a);
    },
    i(o) {
      r || (C(e.$$.fragment, o), C(i.$$.fragment, o), r = !0);
    },
    o(o) {
      E(e.$$.fragment, o), E(i.$$.fragment, o), r = !1;
    },
    d(o) {
      oe(e, o), o && j(n), oe(i, o);
    }
  };
}
function bJ(t) {
  var H;
  let e, n, i, r, o, s = !At((H = t[20]) == null ? void 0 : H.root), l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I = s && Rw(t), L = t[8], V = [];
  for (let D = 0; D < L.length; D += 1)
    V[D] = Iw(Ew(t, L, D));
  const N = (D) => E(V[D], 1, 1, () => {
    V[D] = null;
  });
  let W = t[21].visibleItems, U = [];
  for (let D = 0; D < W.length; D += 1)
    U[D] = xw(Ow(t, W, D));
  const O = (D) => E(U[D], 1, 1, () => {
    U[D] = null;
  });
  let x = t[16] && zw(t), A = t[17] && Vw(t);
  return M = new lg({
    props: {
      validationErrors: t[10],
      selectError: t[36]
    }
  }), {
    c() {
      e = T("div"), n = T("table"), i = T("tbody"), r = T("tr"), o = T("th"), I && I.c(), l = q();
      for (let D = 0; D < V.length; D += 1)
        V[D].c();
      a = q(), f = T("tr"), c = T("td"), h = q();
      for (let D = 0; D < U.length; D += 1)
        U[D].c();
      d = q(), m = T("tr"), g = T("td"), b = q(), x && x.c(), w = q(), A && A.c(), v = q(), se(M.$$.fragment), p(o, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj"), p(r, "class", "jse-table-row jse-table-row-header svelte-hs49xj"), p(c, "colspan", u = t[8].length), p(c, "class", "svelte-hs49xj"), mi(c, "height", t[21].startHeight + "px"), p(f, "class", "jse-table-invisible-start-section"), p(g, "colspan", _ = t[8].length), p(g, "class", "svelte-hs49xj"), mi(g, "height", t[21].endHeight + "px"), p(m, "class", "jse-table-invisible-end-section"), p(n, "class", "jse-table-main svelte-hs49xj"), p(n, "cellpadding", "0"), p(n, "cellspacing", "0"), p(e, "class", "jse-contents svelte-hs49xj");
    },
    m(D, P) {
      B(D, e, P), y(e, n), y(n, i), y(i, r), y(r, o), I && I.m(o, null), y(r, l);
      for (let K = 0; K < V.length; K += 1)
        V[K].m(r, null);
      y(i, a), y(i, f), y(f, c), y(i, h);
      for (let K = 0; K < U.length; K += 1)
        U[K].m(i, null);
      y(i, d), y(i, m), y(m, g), t[71](e), B(D, b, P), x && x.m(D, P), B(D, w, P), A && A.m(D, P), B(D, v, P), re(M, D, P), S = !0, R || (k = [
        Ai(P5.call(null, e, t[42])),
        X(e, "scroll", t[26])
      ], R = !0);
    },
    p(D, P) {
      var ne;
      if (P[0] & 1048576 && (s = !At((ne = D[20]) == null ? void 0 : ne.root)), s ? I ? (I.p(D, P), P[0] & 1048576 && C(I, 1)) : (I = Rw(D), I.c(), C(I, 1), I.m(o, null)) : I && (me(), E(I, 1, 1, () => {
        I = null;
      }), pe()), P[0] & 33555201) {
        L = D[8];
        let z;
        for (z = 0; z < L.length; z += 1) {
          const Z = Ew(D, L, z);
          V[z] ? (V[z].p(Z, P), C(V[z], 1)) : (V[z] = Iw(Z), V[z].c(), C(V[z], 1), V[z].m(r, null));
        }
        for (me(), z = L.length; z < V.length; z += 1)
          N(z);
        pe();
      }
      if ((!S || P[0] & 256 && u !== (u = D[8].length)) && p(c, "colspan", u), P[0] & 2097152 && mi(c, "height", D[21].startHeight + "px"), P[0] & 288883461 | P[1] & 12352) {
        W = D[21].visibleItems;
        let z;
        for (z = 0; z < W.length; z += 1) {
          const Z = Ow(D, W, z);
          U[z] ? (U[z].p(Z, P), C(U[z], 1)) : (U[z] = xw(Z), U[z].c(), C(U[z], 1), U[z].m(i, d));
        }
        for (me(), z = W.length; z < U.length; z += 1)
          O(z);
        pe();
      }
      (!S || P[0] & 256 && _ !== (_ = D[8].length)) && p(g, "colspan", _), P[0] & 2097152 && mi(g, "height", D[21].endHeight + "px"), D[16] ? x ? (x.p(D, P), P[0] & 65536 && C(x, 1)) : (x = zw(D), x.c(), C(x, 1), x.m(w.parentNode, w)) : x && (me(), E(x, 1, 1, () => {
        x = null;
      }), pe()), D[17] ? A ? (A.p(D, P), P[0] & 131072 && C(A, 1)) : (A = Vw(D), A.c(), C(A, 1), A.m(v.parentNode, v)) : A && (me(), E(A, 1, 1, () => {
        A = null;
      }), pe());
      const K = {};
      P[0] & 1024 && (K.validationErrors = D[10]), M.$set(K);
    },
    i(D) {
      if (!S) {
        C(I);
        for (let P = 0; P < L.length; P += 1)
          C(V[P]);
        for (let P = 0; P < W.length; P += 1)
          C(U[P]);
        C(x), C(A), C(M.$$.fragment, D), S = !0;
      }
    },
    o(D) {
      E(I), V = V.filter(Boolean);
      for (let P = 0; P < V.length; P += 1)
        E(V[P]);
      U = U.filter(Boolean);
      for (let P = 0; P < U.length; P += 1)
        E(U[P]);
      E(x), E(A), E(M.$$.fragment, D), S = !1;
    },
    d(D) {
      D && j(e), I && I.d(), zt(V, D), zt(U, D), t[71](null), D && j(b), x && x.d(D), D && j(w), A && A.d(D), D && j(v), oe(M, D), R = !1, et(k);
    }
  };
}
function Rw(t) {
  var r;
  let e, n, i;
  return n = new ql({
    props: {
      validationError: jl([], (r = t[20]) == null ? void 0 : r.root),
      onExpand: Rr
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), p(e, "class", "jse-table-root-error svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), i = !0;
    },
    p(o, s) {
      var a;
      const l = {};
      s[0] & 1048576 && (l.validationError = jl([], (a = o[20]) == null ? void 0 : a.root)), n.$set(l);
    },
    i(o) {
      i || (C(n.$$.fragment, o), i = !0);
    },
    o(o) {
      E(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function Iw(t) {
  let e, n, i, r;
  return n = new nJ({
    props: {
      path: t[117],
      sortedColumn: t[9].sortedColumn,
      readOnly: t[0],
      onSort: t[25]
    }
  }), {
    c() {
      e = T("th"), se(n.$$.fragment), i = q(), p(e, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), y(e, i), r = !0;
    },
    p(o, s) {
      const l = {};
      s[0] & 256 && (l.path = o[117]), s[0] & 512 && (l.sortedColumn = o[9].sortedColumn), s[0] & 1 && (l.readOnly = o[0]), n.$set(l);
    },
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n);
    }
  };
}
function Nw(t) {
  let e, n;
  return e = new ql({
    props: {
      validationError: jl([String(t[113])], t[114].row),
      onExpand: Rr
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 3145728 && (o.validationError = jl([String(i[113])], i[114].row)), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Dw(t) {
  var h;
  let e, n = t[113] + 1 + "", i, r, o = !At((h = t[114]) == null ? void 0 : h.row), s, l, a, f, c = o && Nw(t);
  function u(...d) {
    return t[70](t[113], ...d);
  }
  return {
    c() {
      e = T("th"), i = le(n), r = q(), c && c.c(), p(e, "class", "jse-table-cell jse-table-cell-gutter svelte-hs49xj");
    },
    m(d, m) {
      B(d, e, m), y(e, i), y(e, r), c && c.m(e, null), l = !0, a || (f = Ai(s = P5.call(null, e, u)), a = !0);
    },
    p(d, m) {
      var g;
      t = d, (!l || m[0] & 2097152) && n !== (n = t[113] + 1 + "") && Te(i, n), m[0] & 3145728 && (o = !At((g = t[114]) == null ? void 0 : g.row)), o ? c ? (c.p(t, m), m[0] & 3145728 && C(c, 1)) : (c = Nw(t), c.c(), C(c, 1), c.m(e, null)) : c && (me(), E(c, 1, 1, () => {
        c = null;
      }), pe()), s && Gn(s.update) && m[0] & 2097152 && s.update.call(null, u);
    },
    i(d) {
      l || (C(c), l = !0);
    },
    o(d) {
      E(c), l = !1;
    },
    d(d) {
      d && j(e), c && c.d(), a = !1, f();
    }
  };
}
function _J(t) {
  let e, n;
  return e = new Gq({
    props: {
      path: t[118],
      value: t[119] !== void 0 ? t[119] : "",
      enforceString: uo(t[119], t[9].enforceStringMap, Se(t[118]), t[19].parser),
      selection: t[120] ? t[9].selection : void 0,
      searchResultItems: t[24],
      context: t[19]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2097408 && (o.path = i[118]), r[0] & 2097408 && (o.value = i[119] !== void 0 ? i[119] : ""), r[0] & 2622208 && (o.enforceString = uo(i[119], i[9].enforceStringMap, Se(i[118]), i[19].parser)), r[0] & 2097920 && (o.selection = i[120] ? i[9].selection : void 0), r[0] & 524288 && (o.context = i[19]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function yJ(t) {
  let e, n;
  return e = new Zq({
    props: {
      path: t[118],
      value: t[119],
      parser: t[2],
      isSelected: t[120],
      onEdit: t[37]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 2097408 && (o.path = i[118]), r[0] & 2097408 && (o.value = i[119]), r[0] & 4 && (o.parser = i[2]), r[0] & 2097920 && (o.isSelected = i[120]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function jw(t) {
  let e, n, i, r;
  return n = new ns({
    props: {
      selected: !0,
      onContextMenu: t[28]
    }
  }), {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), p(e, "class", "jse-context-menu-anchor svelte-hs49xj");
    },
    m(o, s) {
      B(o, e, s), re(n, e, null), B(o, i, s), r = !0;
    },
    p: fe,
    i(o) {
      r || (C(n.$$.fragment, o), r = !0);
    },
    o(o) {
      E(n.$$.fragment, o), r = !1;
    },
    d(o) {
      o && j(e), oe(n), o && j(i);
    }
  };
}
function Bw(t) {
  let e, n;
  return e = new ql({
    props: {
      validationError: jl(t[118], t[121]),
      onExpand: Rr
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 3145984 && (o.validationError = jl(i[118], i[121])), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Lw(t) {
  let e, n, i, r, o, s, l = !At(t[121]), a, f;
  const c = [yJ, _J], u = [];
  function h(g, _) {
    return _[0] & 2097408 && (n = null), n == null && (n = !!rn(g[119])), n ? 0 : 1;
  }
  i = h(t, [-1, -1, -1, -1, -1]), r = u[i] = c[i](t);
  let d = !t[0] && t[120] && !t[9].selection.edit && jw(t), m = l && Bw(t);
  return {
    c() {
      e = T("td"), r.c(), o = Ze(), d && d.c(), s = Ze(), m && m.c(), p(e, "class", "jse-table-cell svelte-hs49xj"), p(e, "data-path", a = Cl(t[118])), de(e, "jse-selected-value", t[120] && vt(t[9].selection));
    },
    m(g, _) {
      B(g, e, _), u[i].m(e, null), y(e, o), d && d.m(e, null), y(e, s), m && m.m(e, null), f = !0;
    },
    p(g, _) {
      let b = i;
      i = h(g, _), i === b ? u[i].p(g, _) : (me(), E(u[b], 1, 1, () => {
        u[b] = null;
      }), pe(), r = u[i], r ? r.p(g, _) : (r = u[i] = c[i](g), r.c()), C(r, 1), r.m(e, o)), !g[0] && g[120] && !g[9].selection.edit ? d ? (d.p(g, _), _[0] & 2097921 && C(d, 1)) : (d = jw(g), d.c(), C(d, 1), d.m(e, s)) : d && (me(), E(d, 1, 1, () => {
        d = null;
      }), pe()), _[0] & 3145728 && (l = !At(g[121])), l ? m ? (m.p(g, _), _[0] & 3145728 && C(m, 1)) : (m = Bw(g), m.c(), C(m, 1), m.m(e, null)) : m && (me(), E(m, 1, 1, () => {
        m = null;
      }), pe()), (!f || _[0] & 2097408 && a !== (a = Cl(g[118]))) && p(e, "data-path", a), (!f || _[0] & 2097920 | _[1] & 8192) && de(e, "jse-selected-value", g[120] && vt(g[9].selection));
    },
    i(g) {
      f || (C(r), C(d), C(m), f = !0);
    },
    o(g) {
      E(r), E(d), E(m), f = !1;
    },
    d(g) {
      g && j(e), u[i].d(), d && d.d(), m && m.d();
    }
  };
}
function xw(t) {
  let e, n = t[113], i, r, o = Dw(t), s = t[8], l = [];
  for (let f = 0; f < s.length; f += 1)
    l[f] = Lw(Tw(t, s, f));
  const a = (f) => E(l[f], 1, 1, () => {
    l[f] = null;
  });
  return {
    c() {
      e = T("tr"), o.c(), i = q();
      for (let f = 0; f < l.length; f += 1)
        l[f].c();
      p(e, "class", "jse-table-row svelte-hs49xj");
    },
    m(f, c) {
      B(f, e, c), o.m(e, null), y(e, i);
      for (let u = 0; u < l.length; u += 1)
        l[u].m(e, null);
      r = !0;
    },
    p(f, c) {
      if (c[0] & 2097152 && gt(n, n = f[113]) ? (me(), E(o, 1, 1, fe), pe(), o = Dw(f), o.c(), C(o, 1), o.m(e, i)) : o.p(f, c), c[0] & 288883461 | c[1] & 8256) {
        s = f[8];
        let u;
        for (u = 0; u < s.length; u += 1) {
          const h = Tw(f, s, u);
          l[u] ? (l[u].p(h, c), C(l[u], 1)) : (l[u] = Lw(h), l[u].c(), C(l[u], 1), l[u].m(e, null));
        }
        for (me(), u = s.length; u < l.length; u += 1)
          a(u);
        pe();
      }
    },
    i(f) {
      if (!r) {
        C(o);
        for (let c = 0; c < s.length; c += 1)
          C(l[c]);
        r = !0;
      }
    },
    o(f) {
      E(o), l = l.filter(Boolean);
      for (let c = 0; c < l.length; c += 1)
        E(l[c]);
      r = !1;
    },
    d(f) {
      f && j(e), o.d(f), zt(l, f);
    }
  };
}
function zw(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[16].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: _h,
          text: "Paste as JSON instead",
          onMouseDown: t[31]
        },
        {
          text: "Leave as is",
          onClick: t[32]
        }
      ]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 65536 && (o.message = `You pasted a JSON ${Array.isArray(i[16].contents) ? "array" : "object"} as text`), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Vw(t) {
  let e, n;
  return e = new Zr({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: La,
          text: "Ok",
          onClick: t[6]
        },
        {
          icon: qo,
          text: "Repair manually instead",
          onClick: t[33]
        }
      ]
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.actions = i[0] ? [] : [
        {
          icon: La,
          text: "Ok",
          onClick: i[6]
        },
        {
          icon: qo,
          text: "Repair manually instead",
          onClick: i[33]
        }
      ]), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function wJ(t) {
  let e, n, i, r, o, s, l, a = t[1] && Pw(t);
  const f = [mJ, dJ], c = [];
  function u(h, d) {
    return h[23] ? 1 : 0;
  }
  return i = u(t), r = c[i] = f[i](t), {
    c() {
      e = T("div"), a && a.c(), n = q(), r.c(), p(e, "class", "jse-table-mode svelte-hs49xj"), de(e, "no-main-menu", !t[1]);
    },
    m(h, d) {
      B(h, e, d), a && a.m(e, null), y(e, n), c[i].m(e, null), t[72](e), o = !0, s || (l = [
        X(e, "mousedown", t[27]),
        X(e, "keydown", t[34]),
        X(e, "contextmenu", t[29])
      ], s = !0);
    },
    p(h, d) {
      h[1] ? a ? (a.p(h, d), d[0] & 2 && C(a, 1)) : (a = Pw(h), a.c(), C(a, 1), a.m(e, n)) : a && (me(), E(a, 1, 1, () => {
        a = null;
      }), pe()), r.p(h, d), (!o || d[0] & 2) && de(e, "no-main-menu", !h[1]);
    },
    i(h) {
      o || (C(a), C(r), o = !0);
    },
    o(h) {
      E(a), E(r), o = !1;
    },
    d(h) {
      h && j(e), a && a.d(), c[i].d(), t[72](null), s = !1, et(l);
    }
  };
}
let Ks = 18;
function vJ(t, e, n) {
  let i, r, o;
  const s = Qn("jsoneditor:TableMode"), { open: l } = Xn("simple-modal"), { openAbsolutePopup: a, closeAbsolutePopup: f } = Xn("absolute-popup"), c = vC(), u = vl(), h = vl(), d = typeof window > "u";
  s("isSSR:", d);
  let { readOnly: m } = e, { externalContent: g } = e, { mainMenuBar: _ } = e, { escapeControlCharacters: b } = e, { escapeUnicodeCharacters: w } = e, { flattenColumns: v } = e, { parser: M } = e, { parseMemoizeOne: S } = e, { validator: R } = e, { validationParser: k } = e, { indentation: I } = e, { onChange: L } = e, { onChangeMode: V } = e, { onRenderValue: N } = e, { onRenderMenu: W } = e, { onFocus: U } = e, { onBlur: O } = e, { onSortModal: x } = e, { onTransformModal: A } = e, { onJSONEditorModal: H } = e, D, P, K, ne;
  sg({
    onMount: zi,
    onDestroy: qr,
    getWindow: () => Wl(P),
    hasFocus: () => ke && document.hasFocus() || $c(P),
    onFocus: () => {
      ze = !0, U && U();
    },
    onBlur: () => {
      ze = !1, O && O();
    }
  });
  let z, Z, te, G, Ae, ke = !1, ze = !1, ee = {}, we = 600, tt = 0;
  function ge(J) {
    K && K.scrollTo({
      top: K.scrollTop,
      left: K.scrollLeft
    });
  }
  function ie() {
    he.sortedColumn && n(9, he = {
      ...he,
      sortedColumn: void 0
    });
  }
  function ve(J) {
    s("updateSelection", J);
    const be = typeof J == "function" ? J(he.selection) : J;
    St(be, he.selection) || n(9, he = {
      ...he,
      selection: be
    });
  }
  function Xe(J) {
    he.selection !== void 0 && (he.selection && Ki(J, he.selection.anchorPath) && Ki(J, he.selection.focusPath) || (s("clearing selection: path does not exist anymore", he.selection), n(9, he = {
      ...he,
      selection: Xs(J, he)
    })));
  }
  let he = tu(), Ve = !1;
  const Ie = void 0;
  function qe(J) {
    if (m)
      return;
    s("onSortByHeader", J);
    const be = [], We = J.sortDirection === Ji.desc ? -1 : 1, Je = EC(z, be, J.path, We);
    nt(Je, (lt, Kt) => ({
      state: {
        ...Kt,
        sortedColumn: J
      }
    }));
  }
  const ct = kC({
    onChange: (J) => {
      n(18, yt = J);
    }
  });
  let yt = ct.getState(), Fe;
  function Oe(J) {
    const be = { json: z }, We = kl(J) ? J.text !== Z : !St(be.json, J.json);
    if (s("update external content", { isChanged: We }), !We)
      return;
    const Je = { json: z, text: Z }, lt = z, Kt = he, wn = Z, Vn = Ve;
    if (kl(J))
      try {
        n(7, z = S(J.text)), n(14, Z = J.text), n(17, Ve = !1), n(15, te = void 0);
      } catch ($n) {
        try {
          n(7, z = S(Lr(J.text))), n(14, Z = J.text), n(17, Ve = !0), n(15, te = void 0);
        } catch {
          n(7, z = void 0), n(14, Z = g.text), n(17, Ve = !1), n(15, te = dh(Z, $n.message || $n.toString()));
        }
      }
    else
      n(7, z = J.json), n(14, Z = void 0), n(17, Ve = !1), n(15, te = void 0);
    Xe(z), ie(), ae({
      previousJson: lt,
      previousState: Kt,
      previousText: wn,
      previousTextIsRepaired: Vn
    }), sn(Je, null);
  }
  function ae({ previousJson: J, previousState: be, previousText: We, previousTextIsRepaired: Je }) {
    J === void 0 && We === void 0 || (z !== void 0 ? J !== void 0 ? ct.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: J
          }
        ],
        state: li(be),
        json: void 0,
        text: We,
        textIsRepaired: Je
      },
      redo: {
        patch: [{ op: "replace", path: "", value: z }],
        state: li(he),
        json: void 0,
        text: Z,
        textIsRepaired: Ve
      }
    }) : ct.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: We,
        state: li(be),
        textIsRepaired: Je
      },
      redo: {
        patch: void 0,
        json: z,
        state: li(he),
        text: Z,
        textIsRepaired: Ve
      }
    }) : J !== void 0 && ct.add({
      undo: {
        patch: void 0,
        json: J,
        state: li(be),
        text: We,
        textIsRepaired: Je
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: Z,
        textIsRepaired: Ve,
        state: li(he)
      }
    }));
  }
  let xe = [];
  const ht = pf(CC);
  function ft(J, be, We, Je) {
    tl(
      () => {
        let lt;
        try {
          lt = ht(J, be, We, Je);
        } catch (Kt) {
          lt = [
            {
              path: [],
              message: "Failed to validate: " + Kt.message,
              severity: Fo.warning
            }
          ];
        }
        St(lt, xe) || (s("validationErrors changed:", lt), n(10, xe = lt));
      },
      (lt) => s(`validationErrors updated in ${lt} ms`)
    );
  }
  function _n() {
    return s("validate"), te ? {
      parseError: te,
      isRepairable: !1
    } : (ft(z, R, M, k), { validationErrors: xe });
  }
  function Yn(J, be) {
    if (s("patch", J, be), z === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const We = { json: z }, Je = z, lt = he, Kt = Ve, wn = lC(z, J), qt = q3(z, he, J).json, $n = Hq(he, J, Ae), ki = typeof be == "function" ? be(qt, $n) : void 0;
    n(7, z = ki && ki.json !== void 0 ? ki.json : qt);
    const Ws = ki && ki.state !== void 0 ? ki.state : $n;
    n(9, he = Ws), n(14, Z = void 0), n(17, Ve = !1), n(16, G = void 0), ct.add({
      undo: {
        patch: wn,
        json: void 0,
        text: void 0,
        state: li(lt),
        textIsRepaired: Kt
      },
      redo: {
        patch: J,
        json: void 0,
        state: li(Ws),
        text: void 0,
        textIsRepaired: Ve
      }
    });
    const Us = {
      json: z,
      previousJson: Je,
      undo: wn,
      redo: J
    };
    return sn(We, Us), Us;
  }
  function nt(J, be) {
    if (!m)
      return Yn(J, be);
  }
  function sn(J, be) {
    J.json === void 0 && (J == null ? void 0 : J.text) === void 0 || (Z !== void 0 ? L({ text: Z, json: void 0 }, J, { contentErrors: _n(), patchResult: be }) : z !== void 0 && L({ text: void 0, json: z }, J, { contentErrors: _n(), patchResult: be }));
  }
  function Dt(J) {
    s("handleFind", J);
  }
  function yi(J) {
    s("pasted json as text", J), n(16, G = J);
  }
  function Zn(J) {
    const be = parseInt(J[0]), We = [String(be + 1), ...J.slice(1)];
    return Ki(z, We) ? Et(We, !1) : Et(J, !1);
  }
  function Vt() {
    ne && (ne.focus(), ne.select());
  }
  function Q(J) {
    n(68, tt = J.target.scrollTop);
  }
  function ye(J) {
    const be = J != null && J.target ? L3(J.target) : void 0;
    if (be) {
      if (Uo(he.selection) && Z3(he.selection, be, Ht.value))
        return;
      ve(Et(be, !1)), Vt(), J.preventDefault();
    }
  }
  function at() {
    if (xt(z) && !At(z) && !At(Ae)) {
      const J = ["0", ...Ae[0]];
      return Et(J, !1);
    } else
      return;
  }
  function pt() {
    he.selection || ve(at());
  }
  function Wt() {
    if (Ve && z !== void 0) {
      const J = he, be = z, We = Z, Je = { json: z, text: Z }, lt = Ve;
      n(14, Z = void 0), n(17, Ve = !1), Xe(z), ae({
        previousJson: be,
        previousState: J,
        previousText: We,
        previousTextIsRepaired: lt
      }), sn(Je, null);
    }
    return { json: z, text: Z };
  }
  function Ot(J, be = !0) {
    const We = Hd(J, Ae, ee, Ks), Je = We - tt, lt = ln(J);
    s("scrollTo", { path: J, top: We, scrollTop: tt, elem: lt });
    const Kt = K.getBoundingClientRect();
    if (lt && !be) {
      const Vn = lt.getBoundingClientRect();
      if (Vn.bottom > Kt.top && Vn.top < Kt.bottom)
        return;
    }
    const wn = -(Kt.height / 4);
    lt ? c(lt, {
      container: K,
      offset: wn,
      duration: Yd,
      callback: () => {
        Pn(J);
      }
    }) : c(Je, {
      container: K,
      offset: wn,
      duration: Yd,
      callback: () => {
        Ni().then(() => {
          Hd(J, Ae, ee, Ks) !== We ? Ot(J, be) : Pn(J);
        });
      }
    });
  }
  function yn(J) {
    const { rowIndex: be } = ss(J, Ae), We = Hd(J, Ae, ee, Ks), Je = We + (ee[be] || Ks), lt = Ks, Kt = K.getBoundingClientRect(), wn = tt, Vn = tt + Kt.height - lt;
    if (Je > Vn) {
      const qt = Je - Vn;
      n(12, K.scrollTop += qt, K);
    }
    if (We < wn) {
      const qt = wn - We;
      n(12, K.scrollTop -= qt, K);
    }
  }
  function Pn(J) {
    const be = ln(J);
    if (be) {
      const We = K.getBoundingClientRect(), Je = be.getBoundingClientRect();
      if (Je.right > We.right) {
        const lt = Je.right - We.right;
        n(12, K.scrollLeft += lt, K);
      }
      if (Je.left < We.left) {
        const lt = We.left - Je.left;
        n(12, K.scrollLeft -= lt, K);
      }
    }
  }
  function Cn(J) {
    yn(J), Pn(J);
  }
  function ln(J) {
    return K ? K.querySelector(`td[data-path="${Cl(J)}"]`) : null;
  }
  function Rn({ anchor: J, left: be, top: We, width: Je, height: lt, offsetTop: Kt, offsetLeft: wn, showTip: Vn }) {
    const qt = {
      json: z,
      documentState: he,
      parser: M,
      showTip: Vn,
      onEditValue: si,
      onToggleEnforceString: Ln,
      onCut: bt,
      onCopy: Ft,
      onPaste: Nt,
      onRemove: wt,
      onCloseContextMenu() {
        f($n), Vt();
      }
    };
    ke = !0;
    const $n = a(sJ, qt, {
      left: be,
      top: We,
      offsetTop: Kt,
      offsetLeft: wn,
      width: Je,
      height: lt,
      anchor: J,
      closeOnOuterClick: !0,
      onClose: () => {
        ke = !1, Vt();
      }
    });
  }
  function Ei(J) {
    if (!(m || Uo(he.selection))) {
      if (J && (J.stopPropagation(), J.preventDefault()), J && J.type === "contextmenu" && J.target !== ne)
        Rn({
          left: J.clientX,
          top: J.clientY,
          width: so,
          height: oo,
          showTip: !1
        });
      else {
        const be = K == null ? void 0 : K.querySelector(".jse-table-cell.jse-selected-value");
        if (be)
          Rn({
            anchor: be,
            offsetTop: 2,
            width: so,
            height: oo,
            showTip: !1
          });
        else {
          const We = K == null ? void 0 : K.getBoundingClientRect();
          We && Rn({
            top: We.top + 2,
            left: We.left + 2,
            width: so,
            height: oo,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function wi(J) {
    m || Rn({
      anchor: B3(J.target, "BUTTON"),
      offsetTop: 0,
      width: so,
      height: oo,
      showTip: !0
    });
  }
  function si() {
    if (m || !he.selection)
      return;
    const J = he.selection.focusPath, be = Le(z, J);
    rn(be) ? $t(J) : ve(Et(J, !0));
  }
  function Ln() {
    if (m || !vt(he.selection))
      return;
    const J = he.selection.focusPath, be = Se(J), We = Le(z, J), Je = !uo(We, he.enforceStringMap, be, M), lt = Je ? String(We) : zl(String(We), M);
    s("handleToggleEnforceString", { enforceString: Je, value: We, updatedValue: lt }), nt(
      [
        {
          op: "replace",
          path: be,
          value: lt
        }
      ],
      (Kt, wn) => ({
        state: U3(wn, be, Je)
      })
    );
  }
  async function Pi() {
    s("apply pasted json", G);
    const { path: J, contents: be } = G;
    ve(Et(J, !1)), await Ni();
    const We = [
      {
        op: "replace",
        path: Se(J),
        value: be
      }
    ];
    nt(We);
  }
  function Nt() {
    l(
      SC,
      {},
      {
        ...Ts,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Vt() }
    );
  }
  function ce() {
    s("clear pasted json"), n(16, G = void 0);
  }
  function st() {
    V(ni.text);
  }
  async function bt(J) {
    await RC({
      json: z,
      documentState: he,
      indentation: J ? I : void 0,
      readOnly: m,
      parser: M,
      onPatch: nt
    });
  }
  async function Ft(J = !0) {
    await IC({
      json: z,
      documentState: he,
      indentation: J ? I : void 0,
      parser: M
    });
  }
  function wt() {
    DC({
      json: z,
      text: Z,
      documentState: he,
      keepSelection: !0,
      readOnly: m,
      onChange: L,
      onPatch: nt
    });
  }
  async function it(J) {
    await jC({
      char: J,
      selectInside: !1,
      refJsonEditor: P,
      json: z,
      documentState: he,
      readOnly: m,
      parser: M,
      onPatch: nt,
      onReplaceJson: hn,
      onSelect: ve
    });
  }
  function Rt(J) {
    const be = es(J).replace(/^Command\+/, "Ctrl+");
    if (s("keydown", { combo: be, key: J.key }), be === "Ctrl+X" && (J.preventDefault(), bt(!0)), be === "Ctrl+Shift+X" && (J.preventDefault(), bt(!1)), be === "Ctrl+C" && (J.preventDefault(), Ft(!0)), be === "Ctrl+Shift+C" && (J.preventDefault(), Ft(!1)), be === "Ctrl+D" && J.preventDefault(), (be === "Delete" || be === "Backspace") && (J.preventDefault(), wt()), be === "Insert" && J.preventDefault(), be === "Ctrl+A" && J.preventDefault(), be === "Ctrl+Q" && Ei(J), be === "Left" && (J.preventDefault(), pt(), he.selection)) {
      const Je = Lq(Ae, he.selection);
      ve(Je), Cn(Je.focusPath);
    }
    if (be === "Right" && (J.preventDefault(), pt(), he.selection)) {
      const Je = xq(Ae, he.selection);
      ve(Je), Cn(Je.focusPath);
    }
    if (be === "Up" && (J.preventDefault(), pt(), he.selection)) {
      const Je = jq(Ae, he.selection);
      ve(Je), Cn(Je.focusPath);
    }
    if (be === "Down" && (J.preventDefault(), pt(), he.selection)) {
      const Je = Bq(z, Ae, he.selection);
      ve(Je), Cn(Je.focusPath);
    }
    if (be === "Enter" && he.selection && vt(he.selection)) {
      J.preventDefault();
      const Je = he.selection.focusPath, lt = Le(z, Je);
      rn(lt) ? $t(Je) : m || ve({ ...he.selection, edit: !0 });
    }
    if (be.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && he.selection) {
      J.preventDefault(), it(J.key);
      return;
    }
    if (be === "Ctrl+Enter" && vt(he.selection)) {
      const Je = Le(z, he.selection.focusPath);
      Zu(Je) && window.open(String(Je), "_blank");
    }
    be === "Escape" && he.selection && (J.preventDefault(), ve(void 0)), be === "Ctrl+F" && J.preventDefault(), be === "Ctrl+H" && J.preventDefault(), be === "Ctrl+Z" && (J.preventDefault(), Cr()), be === "Ctrl+Shift+Z" && (J.preventDefault(), Ce());
  }
  function Zt(J) {
    J.preventDefault();
    const be = J.clipboardData.getData("text/plain");
    NC({
      clipboardText: be,
      json: z,
      documentState: he,
      readOnly: m,
      parser: M,
      onPatch: nt,
      onChangeText: an,
      openRepairModal: xn
    });
  }
  function hn(J, be) {
    const We = he, Je = z, lt = Z, Kt = { json: z, text: Z }, wn = Ve, Vn = Hi(z, he, [], Nr), qt = typeof be == "function" ? be(J, Vn) : void 0;
    n(7, z = qt && qt.json !== void 0 ? qt.json : J), n(9, he = qt && qt.state !== void 0 ? qt.state : Vn), n(14, Z = void 0), n(17, Ve = !1), Xe(z), ae({
      previousJson: Je,
      previousState: We,
      previousText: lt,
      previousTextIsRepaired: wn
    }), sn(Kt, null);
  }
  function an(J, be) {
    s("handleChangeText");
    const We = he, Je = z, lt = Z, Kt = { json: z, text: Z }, wn = Ve;
    try {
      n(7, z = S(J)), n(9, he = Hi(z, he, [], Nr)), n(14, Z = void 0), n(17, Ve = !1);
    } catch {
      try {
        n(7, z = S(Lr(J))), n(9, he = Hi(z, he, [], Nr)), n(14, Z = J), n(17, Ve = !0);
      } catch {
        n(7, z = void 0), n(9, he = tu({ json: z, expand: Nr })), n(14, Z = J), n(17, Ve = !1);
      }
    }
    if (typeof be == "function") {
      const qt = be(z, he);
      n(7, z = qt && qt.json ? qt.json : z), n(9, he = qt && qt.state ? qt.state : he);
    }
    Xe(z), ae({
      previousJson: Je,
      previousState: We,
      previousText: lt,
      previousTextIsRepaired: wn
    }), sn(Kt, null);
  }
  function er(J) {
    s("select validation error", J), ve(Et(J.path, !1)), Ot(J.path);
  }
  function vi(J) {
    m || (ke = !0, x({
      id: u,
      json: z,
      rootPath: J,
      onSort: async ({ operations: be, itemPath: We, direction: Je }) => {
        s("onSort", be, J, We, Je), nt(be, (lt, Kt) => ({
          state: {
            ...Kt,
            sortedColumn: {
              path: We,
              sortDirection: Je === -1 ? Ji.desc : Ji.asc
            }
          }
        }));
      },
      onClose: () => {
        ke = !1, Vt();
      }
    }));
  }
  function Jn({ id: J, rootPath: be, onTransform: We, onClose: Je }) {
    ke = !0, A({
      id: J || h,
      json: z,
      rootPath: be,
      onTransform: We ? (lt) => {
        We({
          operations: lt,
          json: z,
          transformedJson: mr(z, lt)
        });
      } : (lt) => {
        s("onTransform", be, lt), nt(lt);
      },
      onClose: () => {
        ke = !1, Vt(), Je && Je();
      }
    });
  }
  function $t(J) {
    s("openJSONEditorModal", { path: J }), ke = !0, H({
      content: { json: Le(z, J) },
      path: J,
      onPatch: Fe.onPatch,
      onClose: () => {
        ke = !1, Vt();
      }
    });
  }
  function xn(J, be) {
    l(
      AC,
      {
        text: J,
        onParse: hh,
        onRepair: A3,
        onApply: be
      },
      {
        ...Ts,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Vt() }
    );
  }
  function In() {
    vi([]);
  }
  function Fi() {
    Jn({ rootPath: [] });
  }
  function Cr() {
    if (m || !ct.getState().canUndo)
      return;
    const J = ct.undo();
    if (!J)
      return;
    const be = { json: z, text: Z };
    n(7, z = J.undo.patch ? mr(z, J.undo.patch) : J.undo.json), n(9, he = J.undo.state), n(14, Z = J.undo.text), n(17, Ve = J.undo.textIsRepaired), s("undo", { item: J, json: z });
    const We = {
      json: z,
      previousJson: be.json,
      redo: J.undo.patch,
      undo: J.redo.patch
    };
    sn(be, We), Vt(), he.selection && Ot(he.selection.focusPath, !1);
  }
  function Ce() {
    if (m || !ct.getState().canRedo)
      return;
    const J = ct.redo();
    if (!J)
      return;
    const be = { json: z, text: Z };
    n(7, z = J.redo.patch ? mr(z, J.redo.patch) : J.redo.json), n(9, he = J.redo.state), n(14, Z = J.redo.text), n(17, Ve = J.redo.textIsRepaired), s("redo", { item: J, json: z });
    const We = {
      json: z,
      previousJson: be.json,
      redo: J.redo.patch,
      undo: J.undo.patch
    };
    sn(be, We), Vt(), he.selection && Ot(he.selection.focusPath, !1);
  }
  function Ue(J) {
    n(67, we = J.getBoundingClientRect().height);
  }
  function Ut(J, be) {
    n(66, ee[be] = J.getBoundingClientRect().height, ee);
  }
  function wo(J, be) {
    return be ? be.pointersMap[Se(J)] === !0 : !1;
  }
  function vo(J) {
    mt[J ? "unshift" : "push"](() => {
      ne = J, n(13, ne);
    });
  }
  const Ri = (J, be) => Ut(be, J);
  function zn(J) {
    mt[J ? "unshift" : "push"](() => {
      K = J, n(12, K);
    });
  }
  function ls(J) {
    mt[J ? "unshift" : "push"](() => {
      P = J, n(11, P);
    });
  }
  return t.$$set = (J) => {
    "readOnly" in J && n(0, m = J.readOnly), "externalContent" in J && n(45, g = J.externalContent), "mainMenuBar" in J && n(1, _ = J.mainMenuBar), "escapeControlCharacters" in J && n(46, b = J.escapeControlCharacters), "escapeUnicodeCharacters" in J && n(47, w = J.escapeUnicodeCharacters), "flattenColumns" in J && n(48, v = J.flattenColumns), "parser" in J && n(2, M = J.parser), "parseMemoizeOne" in J && n(49, S = J.parseMemoizeOne), "validator" in J && n(50, R = J.validator), "validationParser" in J && n(51, k = J.validationParser), "indentation" in J && n(3, I = J.indentation), "onChange" in J && n(52, L = J.onChange), "onChangeMode" in J && n(4, V = J.onChangeMode), "onRenderValue" in J && n(53, N = J.onRenderValue), "onRenderMenu" in J && n(5, W = J.onRenderMenu), "onFocus" in J && n(54, U = J.onFocus), "onBlur" in J && n(55, O = J.onBlur), "onSortModal" in J && n(56, x = J.onSortModal), "onTransformModal" in J && n(57, A = J.onTransformModal), "onJSONEditorModal" in J && n(58, H = J.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 98304 && n(65, D = Gp({
      escapeControlCharacters: b,
      escapeUnicodeCharacters: w
    })), t.$$.dirty[1] & 16384 && Oe(g), t.$$.dirty[0] & 128 | t.$$.dirty[1] & 131072 && n(8, Ae = xt(z) ? Pq(z, v) : []), t.$$.dirty[0] & 384 && n(22, i = z && !At(Ae)), t.$$.dirty[0] & 128 | t.$$.dirty[2] & 112 && n(21, r = Nq(tt, we, z, ee, Ks)), t.$$.dirty[0] & 128 && ge(), t.$$.dirty[0] & 645 | t.$$.dirty[1] & 4194304 | t.$$.dirty[2] & 8 && n(19, Fe = {
      readOnly: m,
      parser: M,
      normalization: D,
      getJson: () => z,
      getDocumentState: () => he,
      findElement: ln,
      findNextInside: Zn,
      focus: Vt,
      onPatch: nt,
      onSelect: ve,
      onFind: Dt,
      onPasteJson: yi,
      onRenderValue: N
    }), t.$$.dirty[0] & 132 | t.$$.dirty[1] & 1572864 && ft(z, R, M, k), t.$$.dirty[0] & 1280 && n(20, o = zq(xe, Ae));
  }, [
    m,
    _,
    M,
    I,
    V,
    W,
    Wt,
    z,
    Ae,
    he,
    xe,
    P,
    K,
    ne,
    Z,
    te,
    G,
    Ve,
    yt,
    Fe,
    o,
    r,
    i,
    d,
    Ie,
    qe,
    Q,
    ye,
    Rn,
    Ei,
    wi,
    Pi,
    ce,
    st,
    Rt,
    Zt,
    er,
    $t,
    In,
    Fi,
    Cr,
    Ce,
    Ue,
    Ut,
    wo,
    g,
    b,
    w,
    v,
    S,
    R,
    k,
    L,
    N,
    U,
    O,
    x,
    A,
    H,
    _n,
    Yn,
    Vt,
    Ot,
    ln,
    Jn,
    D,
    ee,
    we,
    tt,
    vo,
    Ri,
    zn,
    ls
  ];
}
class kJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      vJ,
      wJ,
      gt,
      {
        readOnly: 0,
        externalContent: 45,
        mainMenuBar: 1,
        escapeControlCharacters: 46,
        escapeUnicodeCharacters: 47,
        flattenColumns: 48,
        parser: 2,
        parseMemoizeOne: 49,
        validator: 50,
        validationParser: 51,
        indentation: 3,
        onChange: 52,
        onChangeMode: 4,
        onRenderValue: 53,
        onRenderMenu: 5,
        onFocus: 54,
        onBlur: 55,
        onSortModal: 56,
        onTransformModal: 57,
        onJSONEditorModal: 58,
        validate: 59,
        patch: 60,
        focus: 61,
        acceptAutoRepair: 6,
        scrollTo: 62,
        findElement: 63,
        openTransformModal: 64
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get validate() {
    return this.$$.ctx[59];
  }
  get patch() {
    return this.$$.ctx[60];
  }
  get focus() {
    return this.$$.ctx[61];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[6];
  }
  get scrollTo() {
    return this.$$.ctx[62];
  }
  get findElement() {
    return this.$$.ctx[63];
  }
  get openTransformModal() {
    return this.$$.ctx[64];
  }
}
const CJ = kJ;
function SJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    pathParser: t[15],
    onError: t[20],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onClassName: t[18],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new pg({ props: i }), t[43](e), {
    c() {
      se(e.$$.fragment);
    },
    m(r, o) {
      re(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 4 && (s.indentation = r[2]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 64 && (s.navigationBar = r[6]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 2048 && (s.parser = r[11]), o[0] & 4096 && (s.parseMemoizeOne = r[12]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 32768 && (s.pathParser = r[15]), o[0] & 1048576 && (s.onError = r[20]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 131072 && (s.onRenderValue = r[17]), o[0] & 262144 && (s.onClassName = r[18]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), o[0] & 33554432 && (s.onJSONEditorModal = r[25]), e.$set(s);
    },
    i(r) {
      n || (C(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[43](null), oe(e, r);
    }
  };
}
function MJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    mainMenuBar: t[5],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    indentation: t[2],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new CJ({ props: i }), t[42](e), {
    c() {
      se(e.$$.fragment);
    },
    m(r, o) {
      re(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 1024 && (s.flattenColumns = r[10]), o[0] & 2048 && (s.parser = r[11]), o[0] & 4096 && (s.parseMemoizeOne = r[12]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 4 && (s.indentation = r[2]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 131072 && (s.onRenderValue = r[17]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), o[0] & 33554432 && (s.onJSONEditorModal = r[25]), e.$set(s);
    },
    i(r) {
      n || (C(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[42](null), oe(e, r);
    }
  };
}
function AJ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    tabSize: t[3],
    mainMenuBar: t[5],
    statusBar: t[7],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    validator: t[13],
    validationParser: t[14],
    onChange: t[16],
    onChangeMode: t[19],
    onError: t[20],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24]
  };
  return e = new Mq({ props: i }), t[41](e), {
    c() {
      se(e.$$.fragment);
    },
    m(r, o) {
      re(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 1 && (s.externalContent = r[0]), o[0] & 2 && (s.readOnly = r[1]), o[0] & 4 && (s.indentation = r[2]), o[0] & 8 && (s.tabSize = r[3]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 128 && (s.statusBar = r[7]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 2048 && (s.parser = r[11]), o[0] & 8192 && (s.validator = r[13]), o[0] & 16384 && (s.validationParser = r[14]), o[0] & 65536 && (s.onChange = r[16]), o[0] & 524288 && (s.onChangeMode = r[19]), o[0] & 1048576 && (s.onError = r[20]), o[0] & 2097152 && (s.onFocus = r[21]), o[0] & 4194304 && (s.onBlur = r[22]), o[0] & 536870912 && (s.onRenderMenu = r[29]), o[0] & 8388608 && (s.onSortModal = r[23]), o[0] & 16777216 && (s.onTransformModal = r[24]), e.$set(s);
    },
    i(r) {
      n || (C(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[41](null), oe(e, r);
    }
  };
}
function OJ(t) {
  let e, n, i, r;
  const o = [AJ, MJ, SJ], s = [];
  function l(a, f) {
    return a[4] === ni.text || a[4] === "code" ? 0 : a[4] === ni.table ? 1 : 2;
  }
  return e = l(t), n = s[e] = o[e](t), {
    c() {
      n.c(), i = Ze();
    },
    m(a, f) {
      s[e].m(a, f), B(a, i, f), r = !0;
    },
    p(a, f) {
      let c = e;
      e = l(a), e === c ? s[e].p(a, f) : (me(), E(s[c], 1, 1, () => {
        s[c] = null;
      }), pe(), n = s[e], n ? n.p(a, f) : (n = s[e] = o[e](a), n.c()), C(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (C(n), r = !0);
    },
    o(a) {
      E(n), r = !1;
    },
    d(a) {
      s[e].d(a), a && j(i);
    }
  };
}
function TJ(t, e, n) {
  let i, { content: r } = e, { readOnly: o } = e, { indentation: s } = e, { tabSize: l } = e, { mode: a } = e, { mainMenuBar: f } = e, { navigationBar: c } = e, { statusBar: u } = e, { escapeControlCharacters: h } = e, { escapeUnicodeCharacters: d } = e, { flattenColumns: m } = e, { parser: g } = e, { parseMemoizeOne: _ } = e, { validator: b } = e, { validationParser: w } = e, { pathParser: v } = e, { onChange: M } = e, { onRenderValue: S } = e, { onClassName: R } = e, { onRenderMenu: k } = e, { onChangeMode: I } = e, { onError: L } = e, { onFocus: V } = e, { onBlur: N } = e, { onSortModal: W } = e, { onTransformModal: U } = e, { onJSONEditorModal: O } = e, x, A, H, D;
  const P = { separator: !0 };
  function K(ge) {
    if (x)
      return x.patch(ge);
    if (A)
      return A.patch(ge);
    if (H)
      return H.patch(ge);
  }
  function ne(ge) {
    if (x)
      return x.expand(ge);
    throw new Error(`Method expand is not available in mode "${a}"`);
  }
  function z(ge) {
    if (H)
      H.openTransformModal(ge);
    else if (x)
      x.openTransformModal(ge);
    else if (A)
      A.openTransformModal(ge);
    else
      throw new Error(`Method transform is not available in mode "${a}"`);
  }
  function Z() {
    if (H)
      return H.validate();
    if (x)
      return x.validate();
    if (A)
      return A.validate();
    throw new Error(`Method validate is not available in mode "${a}"`);
  }
  function te() {
    return x ? x.acceptAutoRepair() : r;
  }
  function G(ge) {
    if (x)
      return x.scrollTo(ge);
    throw new Error(`Method scrollTo is not available in mode "${a}"`);
  }
  function Ae(ge) {
    if (x)
      return x.findElement(ge);
    if (A)
      return A.findElement(ge);
    throw new Error(`Method findElement is not available in mode "${a}"`);
  }
  function ke() {
    H ? H.focus() : x ? x.focus() : A && A.focus();
  }
  function ze() {
    H && H.refresh();
  }
  function ee(ge) {
    mt[ge ? "unshift" : "push"](() => {
      H = ge, n(28, H);
    });
  }
  function we(ge) {
    mt[ge ? "unshift" : "push"](() => {
      A = ge, n(27, A);
    });
  }
  function tt(ge) {
    mt[ge ? "unshift" : "push"](() => {
      x = ge, n(26, x);
    });
  }
  return t.$$set = (ge) => {
    "content" in ge && n(0, r = ge.content), "readOnly" in ge && n(1, o = ge.readOnly), "indentation" in ge && n(2, s = ge.indentation), "tabSize" in ge && n(3, l = ge.tabSize), "mode" in ge && n(4, a = ge.mode), "mainMenuBar" in ge && n(5, f = ge.mainMenuBar), "navigationBar" in ge && n(6, c = ge.navigationBar), "statusBar" in ge && n(7, u = ge.statusBar), "escapeControlCharacters" in ge && n(8, h = ge.escapeControlCharacters), "escapeUnicodeCharacters" in ge && n(9, d = ge.escapeUnicodeCharacters), "flattenColumns" in ge && n(10, m = ge.flattenColumns), "parser" in ge && n(11, g = ge.parser), "parseMemoizeOne" in ge && n(12, _ = ge.parseMemoizeOne), "validator" in ge && n(13, b = ge.validator), "validationParser" in ge && n(14, w = ge.validationParser), "pathParser" in ge && n(15, v = ge.pathParser), "onChange" in ge && n(16, M = ge.onChange), "onRenderValue" in ge && n(17, S = ge.onRenderValue), "onClassName" in ge && n(18, R = ge.onClassName), "onRenderMenu" in ge && n(30, k = ge.onRenderMenu), "onChangeMode" in ge && n(19, I = ge.onChangeMode), "onError" in ge && n(20, L = ge.onError), "onFocus" in ge && n(21, V = ge.onFocus), "onBlur" in ge && n(22, N = ge.onBlur), "onSortModal" in ge && n(23, W = ge.onSortModal), "onTransformModal" in ge && n(24, U = ge.onTransformModal), "onJSONEditorModal" in ge && n(25, O = ge.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 524304 && n(40, D = [
      {
        type: "button",
        text: "text",
        title: `Switch to text mode (current mode: ${a})`,
        className: "jse-group-button jse-first" + (a === ni.text || a === "code" ? " jse-selected" : ""),
        onClick: () => I(ni.text)
      },
      {
        type: "button",
        text: "tree",
        title: `Switch to tree mode (current mode: ${a})`,
        className: "jse-group-button " + (a === ni.tree ? " jse-selected" : ""),
        onClick: () => I(ni.tree)
      },
      {
        type: "button",
        text: "table",
        title: `Switch to table mode (current mode: ${a})`,
        className: "jse-group-button jse-last" + (a === ni.table ? " jse-selected" : ""),
        onClick: () => I(ni.table)
      }
    ]), t.$$.dirty[0] & 1073741824 | t.$$.dirty[1] & 512 && n(29, i = (ge, ie) => {
      const ve = cj(ie[0]) ? D.concat(ie) : D.concat(P, ie);
      return k(ge, ve) || ve;
    });
  }, [
    r,
    o,
    s,
    l,
    a,
    f,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    M,
    S,
    R,
    I,
    L,
    V,
    N,
    W,
    U,
    O,
    x,
    A,
    H,
    i,
    k,
    K,
    ne,
    z,
    Z,
    te,
    G,
    Ae,
    ke,
    ze,
    D,
    ee,
    we,
    tt
  ];
}
class EJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      TJ,
      OJ,
      It,
      {
        content: 0,
        readOnly: 1,
        indentation: 2,
        tabSize: 3,
        mode: 4,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        parseMemoizeOne: 12,
        validator: 13,
        validationParser: 14,
        pathParser: 15,
        onChange: 16,
        onRenderValue: 17,
        onClassName: 18,
        onRenderMenu: 30,
        onChangeMode: 19,
        onError: 20,
        onFocus: 21,
        onBlur: 22,
        onSortModal: 23,
        onTransformModal: 24,
        onJSONEditorModal: 25,
        patch: 31,
        expand: 32,
        transform: 33,
        validate: 34,
        acceptAutoRepair: 35,
        scrollTo: 36,
        findElement: 37,
        focus: 38,
        refresh: 39
      },
      null,
      [-1, -1]
    );
  }
  get patch() {
    return this.$$.ctx[31];
  }
  get expand() {
    return this.$$.ctx[32];
  }
  get transform() {
    return this.$$.ctx[33];
  }
  get validate() {
    return this.$$.ctx[34];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[35];
  }
  get scrollTo() {
    return this.$$.ctx[36];
  }
  get findElement() {
    return this.$$.ctx[37];
  }
  get focus() {
    return this.$$.ctx[38];
  }
  get refresh() {
    return this.$$.ctx[39];
  }
}
const R5 = EJ;
function Fw(t) {
  let e, n;
  return {
    c() {
      e = T("div"), n = le(t[19]), p(e, "class", "jse-error svelte-1hibiw3");
    },
    m(i, r) {
      B(i, e, r), y(e, n);
    },
    p(i, r) {
      r[0] & 524288 && Te(n, i[19]);
    },
    d(i) {
      i && j(e);
    }
  };
}
function Hw(t) {
  let e, n, i, r, o, s;
  return n = new Ct({ props: { data: tN } }), {
    c() {
      e = T("button"), se(n.$$.fragment), i = le(" Back"), p(e, "type", "button"), p(e, "class", "jse-secondary svelte-1hibiw3");
    },
    m(l, a) {
      B(l, e, a), re(n, e, null), y(e, i), r = !0, o || (s = X(e, "click", t[23]), o = !0);
    },
    p: fe,
    i(l) {
      r || (C(n.$$.fragment, l), r = !0);
    },
    o(l) {
      E(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && j(e), oe(n), o = !1, s();
    }
  };
}
function PJ(t) {
  let e, n, i;
  return {
    c() {
      e = T("button"), e.textContent = "Close", p(e, "type", "button"), p(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, o) {
      B(r, e, o), n || (i = [
        X(e, "click", t[23]),
        Ai(I5.call(null, e))
      ], n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, et(i);
    }
  };
}
function RJ(t) {
  let e, n, i;
  return {
    c() {
      e = T("button"), e.textContent = "Apply", p(e, "type", "button"), p(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, o) {
      B(r, e, o), n || (i = [
        X(e, "click", t[22]),
        Ai(I5.call(null, e))
      ], n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, et(i);
    }
  };
}
function IJ(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b;
  n = new ag({
    props: {
      title: "Edit nested content " + (t[18].length > 1 ? ` (${t[18].length})` : ""),
      onClose: t[23]
    }
  }), h = new R5({
    props: {
      mode: $e(t[18]).mode,
      content: $e(t[18]).content,
      readOnly: t[0],
      indentation: t[1],
      tabSize: t[2],
      statusBar: t[5],
      mainMenuBar: t[3],
      navigationBar: t[4],
      escapeControlCharacters: t[6],
      escapeUnicodeCharacters: t[7],
      flattenColumns: t[8],
      parser: t[9],
      parseMemoizeOne: t[20],
      validator: t[10],
      validationParser: t[11],
      pathParser: t[12],
      onError: t[26],
      onChange: t[24],
      onChangeMode: t[25],
      onRenderValue: t[13],
      onClassName: t[14],
      onFocus: Rr,
      onBlur: Rr,
      onRenderMenu: t[15],
      onSortModal: t[16],
      onTransformModal: t[17],
      onJSONEditorModal: t[27]
    }
  });
  let w = t[19] && Fw(t), v = t[18].length > 1 && Hw(t);
  function M(k, I) {
    return k[0] ? PJ : RJ;
  }
  let S = M(t), R = S(t);
  return {
    c() {
      e = T("div"), se(n.$$.fragment), i = q(), r = T("div"), o = T("div"), o.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Path</div>', s = q(), l = T("input"), a = q(), f = T("div"), f.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Contents</div>', c = q(), u = T("div"), se(h.$$.fragment), d = q(), m = T("div"), w && w.c(), g = q(), v && v.c(), _ = q(), R.c(), p(o, "class", "jse-label svelte-1hibiw3"), p(l, "class", "jse-path svelte-1hibiw3"), p(l, "type", "text"), l.readOnly = !0, p(l, "title", "Selected path"), l.value = t[21], p(f, "class", "jse-label svelte-1hibiw3"), p(u, "class", "jse-modal-inline-editor svelte-1hibiw3"), p(m, "class", "jse-actions svelte-1hibiw3"), p(r, "class", "jse-modal-contents svelte-1hibiw3"), p(e, "class", "jse-modal jse-jsoneditor-modal svelte-1hibiw3");
    },
    m(k, I) {
      B(k, e, I), re(n, e, null), y(e, i), y(e, r), y(r, o), y(r, s), y(r, l), y(r, a), y(r, f), y(r, c), y(r, u), re(h, u, null), y(r, d), y(r, m), w && w.m(m, null), y(m, g), v && v.m(m, null), y(m, _), R.m(m, null), b = !0;
    },
    p(k, I) {
      const L = {};
      I[0] & 262144 && (L.title = "Edit nested content " + (k[18].length > 1 ? ` (${k[18].length})` : "")), n.$set(L), (!b || I[0] & 2097152 && l.value !== k[21]) && (l.value = k[21]);
      const V = {};
      I[0] & 262144 && (V.mode = $e(k[18]).mode), I[0] & 262144 && (V.content = $e(k[18]).content), I[0] & 1 && (V.readOnly = k[0]), I[0] & 2 && (V.indentation = k[1]), I[0] & 4 && (V.tabSize = k[2]), I[0] & 32 && (V.statusBar = k[5]), I[0] & 8 && (V.mainMenuBar = k[3]), I[0] & 16 && (V.navigationBar = k[4]), I[0] & 64 && (V.escapeControlCharacters = k[6]), I[0] & 128 && (V.escapeUnicodeCharacters = k[7]), I[0] & 256 && (V.flattenColumns = k[8]), I[0] & 512 && (V.parser = k[9]), I[0] & 1048576 && (V.parseMemoizeOne = k[20]), I[0] & 1024 && (V.validator = k[10]), I[0] & 2048 && (V.validationParser = k[11]), I[0] & 4096 && (V.pathParser = k[12]), I[0] & 8192 && (V.onRenderValue = k[13]), I[0] & 16384 && (V.onClassName = k[14]), I[0] & 32768 && (V.onRenderMenu = k[15]), I[0] & 65536 && (V.onSortModal = k[16]), I[0] & 131072 && (V.onTransformModal = k[17]), h.$set(V), k[19] ? w ? w.p(k, I) : (w = Fw(k), w.c(), w.m(m, g)) : w && (w.d(1), w = null), k[18].length > 1 ? v ? (v.p(k, I), I[0] & 262144 && C(v, 1)) : (v = Hw(k), v.c(), C(v, 1), v.m(m, _)) : v && (me(), E(v, 1, 1, () => {
        v = null;
      }), pe()), S === (S = M(k)) && R ? R.p(k, I) : (R.d(1), R = S(k), R && (R.c(), R.m(m, null)));
    },
    i(k) {
      b || (C(n.$$.fragment, k), C(h.$$.fragment, k), C(v), b = !0);
    },
    o(k) {
      E(n.$$.fragment, k), E(h.$$.fragment, k), E(v), b = !1;
    },
    d(k) {
      k && j(e), oe(n), oe(h), w && w.d(), v && v.d(), R.d();
    }
  };
}
function I5(t) {
  t.focus();
}
function NJ(t, e, n) {
  let i, r, o;
  const s = Qn("jsoneditor:JSONEditorModal");
  let { content: l } = e, { path: a } = e, { onPatch: f } = e, { readOnly: c } = e, { indentation: u } = e, { tabSize: h } = e, { mainMenuBar: d } = e, { navigationBar: m } = e, { statusBar: g } = e, { escapeControlCharacters: _ } = e, { escapeUnicodeCharacters: b } = e, { flattenColumns: w } = e, { parser: v } = e, { validator: M } = e, { validationParser: S } = e, { pathParser: R } = e, { onRenderValue: k } = e, { onClassName: I } = e, { onRenderMenu: L } = e, { onSortModal: V } = e, { onTransformModal: N } = e;
  const { close: W } = Xn("simple-modal");
  let O = [{
    mode: A(l),
    content: l,
    relativePath: a
  }], x;
  function A(Z) {
    return Kp(Z) && xt(Z.json) ? ni.table : ni.tree;
  }
  function H() {
    if (s("handleApply"), !c)
      try {
        n(19, x = void 0);
        const Z = [
          {
            op: "replace",
            path: Se($e(O).relativePath),
            value: R0($e(O).content, v).json
          }
        ];
        if (O.length > 1) {
          const te = O[O.length - 2].content, G = R0(te, v).json, Ae = {
            json: mr(G, Z)
          };
          n(18, O = kt(O)), P(Ae);
        } else
          f(Z), W();
      } catch (Z) {
        n(19, x = Z.toString());
      }
  }
  function D() {
    s("handleClose"), O.length > 1 ? (n(18, O = kt(O)), n(19, x = void 0)) : W();
  }
  function P(Z) {
    s("handleChange", Z);
    const te = { ...$e(O), content: Z };
    n(18, O = [...kt(O), te]);
  }
  function K(Z) {
    s("handleChangeMode", Z);
    const te = { ...$e(O), mode: Z };
    n(18, O = [...kt(O), te]);
  }
  function ne(Z) {
    n(19, x = Z.toString()), console.error(Z);
  }
  function z({ content: Z, path: te }) {
    s("handleJSONEditorModal", { content: Z, path: te });
    const G = {
      mode: A(Z),
      content: Z,
      relativePath: te
    };
    n(18, O = [...O, G]);
  }
  return t.$$set = (Z) => {
    "content" in Z && n(28, l = Z.content), "path" in Z && n(29, a = Z.path), "onPatch" in Z && n(30, f = Z.onPatch), "readOnly" in Z && n(0, c = Z.readOnly), "indentation" in Z && n(1, u = Z.indentation), "tabSize" in Z && n(2, h = Z.tabSize), "mainMenuBar" in Z && n(3, d = Z.mainMenuBar), "navigationBar" in Z && n(4, m = Z.navigationBar), "statusBar" in Z && n(5, g = Z.statusBar), "escapeControlCharacters" in Z && n(6, _ = Z.escapeControlCharacters), "escapeUnicodeCharacters" in Z && n(7, b = Z.escapeUnicodeCharacters), "flattenColumns" in Z && n(8, w = Z.flattenColumns), "parser" in Z && n(9, v = Z.parser), "validator" in Z && n(10, M = Z.validator), "validationParser" in Z && n(11, S = Z.validationParser), "pathParser" in Z && n(12, R = Z.pathParser), "onRenderValue" in Z && n(13, k = Z.onRenderValue), "onClassName" in Z && n(14, I = Z.onClassName), "onRenderMenu" in Z && n(15, L = Z.onRenderMenu), "onSortModal" in Z && n(16, V = Z.onSortModal), "onTransformModal" in Z && n(17, N = Z.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 262144 && n(31, i = O.flatMap((Z) => Z.relativePath)), t.$$.dirty[1] & 1 && n(21, r = At(i) ? "(whole document)" : Yi(Oi(i))), t.$$.dirty[0] & 512 && n(20, o = pf(v.parse));
  }, [
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    L,
    V,
    N,
    O,
    x,
    o,
    r,
    H,
    D,
    P,
    K,
    ne,
    z,
    l,
    a,
    f,
    i
  ];
}
class DJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      NJ,
      IJ,
      gt,
      {
        content: 28,
        path: 29,
        onPatch: 30,
        readOnly: 0,
        indentation: 1,
        tabSize: 2,
        mainMenuBar: 3,
        navigationBar: 4,
        statusBar: 5,
        escapeControlCharacters: 6,
        escapeUnicodeCharacters: 7,
        flattenColumns: 8,
        parser: 9,
        validator: 10,
        validationParser: 11,
        pathParser: 12,
        onRenderValue: 13,
        onClassName: 14,
        onRenderMenu: 15,
        onSortModal: 16,
        onTransformModal: 17
      },
      null,
      [-1, -1]
    );
  }
}
const jJ = DJ;
function BJ(t, e, n) {
  const i = Xn("simple-modal"), r = i.open, o = i.close;
  return [r, o];
}
class LJ extends Be {
  constructor(e) {
    super(), je(this, e, BJ, null, gt, { open: 0, close: 1 });
  }
  get open() {
    return this.$$.ctx[0];
  }
  get close() {
    return this.$$.ctx[1];
  }
}
const xJ = LJ;
function Ww(t) {
  let e, n, i = {
    mode: t[1],
    content: t[0],
    readOnly: t[2],
    indentation: t[3],
    tabSize: t[4],
    statusBar: t[7],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[24],
    validator: t[12],
    validationParser: t[13],
    pathParser: t[14],
    onError: t[18],
    onChange: t[25],
    onChangeMode: t[28],
    onRenderValue: t[15],
    onClassName: t[16],
    onFocus: t[26],
    onBlur: t[27],
    onRenderMenu: t[17],
    onSortModal: t[30],
    onTransformModal: t[29],
    onJSONEditorModal: t[31]
  };
  return e = new R5({ props: i }), t[56](e), {
    c() {
      se(e.$$.fragment);
    },
    m(r, o) {
      re(e, r, o), n = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 2 && (s.mode = r[1]), o[0] & 1 && (s.content = r[0]), o[0] & 4 && (s.readOnly = r[2]), o[0] & 8 && (s.indentation = r[3]), o[0] & 16 && (s.tabSize = r[4]), o[0] & 128 && (s.statusBar = r[7]), o[0] & 32 && (s.mainMenuBar = r[5]), o[0] & 64 && (s.navigationBar = r[6]), o[0] & 256 && (s.escapeControlCharacters = r[8]), o[0] & 512 && (s.escapeUnicodeCharacters = r[9]), o[0] & 1024 && (s.flattenColumns = r[10]), o[0] & 2048 && (s.parser = r[11]), o[0] & 16777216 && (s.parseMemoizeOne = r[24]), o[0] & 4096 && (s.validator = r[12]), o[0] & 8192 && (s.validationParser = r[13]), o[0] & 16384 && (s.pathParser = r[14]), o[0] & 262144 && (s.onError = r[18]), o[0] & 32768 && (s.onRenderValue = r[15]), o[0] & 65536 && (s.onClassName = r[16]), o[0] & 131072 && (s.onRenderMenu = r[17]), e.$set(s);
    },
    i(r) {
      n || (C(e.$$.fragment, r), n = !0);
    },
    o(r) {
      E(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[56](null), oe(e, r);
    }
  };
}
function zJ(t) {
  let e, n, i, r, o = t[19], s;
  function l(c) {
    t[55](c);
  }
  let a = {};
  t[22] !== void 0 && (a.open = t[22]), e = new xJ({ props: a }), mt.push(() => lr(e, "open", l, t[22]));
  let f = Ww(t);
  return {
    c() {
      se(e.$$.fragment), i = q(), r = T("div"), f.c(), p(r, "class", "jse-main svelte-16j5kem"), de(r, "jse-focus", t[20]);
    },
    m(c, u) {
      re(e, c, u), B(c, i, u), B(c, r, u), f.m(r, null), s = !0;
    },
    p(c, u) {
      const h = {};
      !n && u[0] & 4194304 && (n = !0, h.open = c[22], sr(() => n = !1)), e.$set(h), u[0] & 524288 && gt(o, o = c[19]) ? (me(), E(f, 1, 1, fe), pe(), f = Ww(c), f.c(), C(f, 1), f.m(r, null)) : f.p(c, u), (!s || u[0] & 1048576) && de(r, "jse-focus", c[20]);
    },
    i(c) {
      s || (C(e.$$.fragment, c), C(f), s = !0);
    },
    o(c) {
      E(e.$$.fragment, c), E(f), s = !1;
    },
    d(c) {
      oe(e, c), c && j(i), c && j(r), f.d(c);
    }
  };
}
function VJ(t) {
  let e, n;
  return e = new Ok({
    props: {
      $$slots: { default: [zJ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 25165823 | r[1] & 268435456 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function FJ(t) {
  var o;
  let e, n;
  const i = [
    {
      show: (o = t[23]) == null ? void 0 : o.component
    },
    V1
  ];
  let r = {
    $$slots: { default: [VJ] },
    $$scope: { ctx: t }
  };
  for (let s = 0; s < i.length; s += 1)
    r = $o(r, i[s]);
  return e = new Ok({ props: r }), e.$on("close", t[32]), {
    c() {
      se(e.$$.fragment);
    },
    m(s, l) {
      re(e, s, l), n = !0;
    },
    p(s, l) {
      var f;
      const a = l[0] & 8388608 ? xs(i, [
        l[0] & 8388608 && {
          show: (f = s[23]) == null ? void 0 : f.component
        },
        l & 0 && Qu(V1)
      ]) : {};
      l[0] & 25165823 | l[1] & 268435456 && (a.$$scope = { dirty: l, ctx: s }), e.$set(a);
    },
    i(s) {
      n || (C(e.$$.fragment, s), n = !0);
    },
    o(s) {
      E(e.$$.fragment, s), n = !1;
    },
    d(s) {
      oe(e, s);
    }
  };
}
function HJ(t) {
  let e, n;
  return e = new z3({
    props: {
      $$slots: { default: [FJ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 33554431 | r[1] & 268435456 && (o.$$scope = { dirty: r, ctx: i }), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function N5(t) {
  this.$set(t);
}
function D5() {
  this.$destroy();
}
function WJ(t, e, n) {
  let i;
  const r = Qn("jsoneditor:Main");
  let { content: o = { text: "" } } = e, { readOnly: s = !1 } = e, { indentation: l = 2 } = e, { tabSize: a = 4 } = e, { mode: f = ni.tree } = e, { mainMenuBar: c = !0 } = e, { navigationBar: u = !0 } = e, { statusBar: h = !0 } = e, { escapeControlCharacters: d = !1 } = e, { escapeUnicodeCharacters: m = !1 } = e, { flattenColumns: g = !0 } = e, { parser: _ = JSON } = e, { validator: b = null } = e, { validationParser: w = JSON } = e, { pathParser: v = {
    parse: oR,
    stringify: Oi
  } } = e, { queryLanguages: M = [dR] } = e, { queryLanguageId: S = M[0].id } = e, { onChangeQueryLanguage: R = Rr } = e, { onChange: k = null } = e, { onRenderValue: I = QI } = e, { onClassName: L = () => {
  } } = e, { onRenderMenu: V = Rr } = e, { onChangeMode: N = Rr } = e, { onError: W = (ae) => {
    console.error(ae), alert(ae.toString());
  } } = e, { onFocus: U = Rr } = e, { onBlur: O = Rr } = e, x = ma(), A = !1, H, D, P = null, K = _;
  function ne() {
    return o;
  }
  function z(ae) {
    r("set");
    const xe = sd(ae);
    if (xe)
      throw new Error(xe);
    n(19, x = ma()), n(0, o = ae);
  }
  function Z(ae) {
    r("update");
    const xe = sd(ae);
    if (xe)
      throw new Error(xe);
    n(0, o = ae);
  }
  function te(ae) {
    if (kl(o))
      try {
        n(0, o = {
          json: _.parse(o.text),
          text: void 0
        });
      } catch {
        throw new Error("Cannot apply patch: current document contains invalid JSON");
      }
    return H.patch(ae);
  }
  function G(ae) {
    H.expand(ae);
  }
  function Ae(ae) {
    H.transform(ae);
  }
  function ke() {
    return H.validate();
  }
  function ze() {
    return H.acceptAutoRepair();
  }
  function ee(ae) {
    return H.scrollTo(ae);
  }
  function we(ae) {
    return H.findElement(ae);
  }
  function tt() {
    H.focus();
  }
  function ge() {
    H.refresh();
  }
  function ie(ae, xe, ht) {
    n(0, o = ae), k && k(ae, xe, ht);
  }
  function ve() {
    n(20, A = !0), U && U();
  }
  function Xe() {
    n(20, A = !1), O && O();
  }
  async function he(ae) {
    f !== ae && (n(1, f = ae), await Ni(), tt(), N(ae));
  }
  function Ve(ae) {
    r("handleChangeQueryLanguage", ae), n(33, S = ae), R(ae);
  }
  function Ie({ id: ae, json: xe, rootPath: ht, onTransform: ft, onClose: _n }) {
    s || D(
      vx,
      {
        id: ae,
        json: xe,
        rootPath: ht,
        indentation: l,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: m,
        parser: _,
        parseMemoizeOne: i,
        validationParser: w,
        pathParser: v,
        queryLanguages: M,
        queryLanguageId: S,
        onChangeQueryLanguage: Ve,
        onRenderValue: I,
        onClassName: L,
        onTransform: ft
      },
      P8,
      { onClose: _n }
    );
  }
  function qe({ id: ae, json: xe, rootPath: ht, onSort: ft, onClose: _n }) {
    s || D(Ax, { id: ae, json: xe, rootPath: ht, onSort: ft }, E8, { onClose: _n });
  }
  function ct({ content: ae, path: xe, onPatch: ht, onClose: ft }) {
    r("onJSONEditorModal", { content: ae, path: xe }), n(23, P = {
      component: Ak(jJ, {
        content: ae,
        path: xe,
        onPatch: ht,
        readOnly: s,
        indentation: l,
        tabSize: a,
        mainMenuBar: c,
        navigationBar: u,
        statusBar: h,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: m,
        flattenColumns: g,
        parser: _,
        validator: void 0,
        validationParser: w,
        pathParser: v,
        onRenderValue: I,
        onClassName: L,
        onRenderMenu: V,
        onSortModal: qe,
        onTransformModal: Ie
      }),
      callbacks: { onClose: ft }
    });
  }
  function yt() {
    var ae;
    (ae = P == null ? void 0 : P.callbacks) == null || ae.onClose(), n(23, P = null);
  }
  function Fe(ae) {
    D = ae, n(22, D);
  }
  function Oe(ae) {
    mt[ae ? "unshift" : "push"](() => {
      H = ae, n(21, H);
    });
  }
  return t.$$set = (ae) => {
    "content" in ae && n(0, o = ae.content), "readOnly" in ae && n(2, s = ae.readOnly), "indentation" in ae && n(3, l = ae.indentation), "tabSize" in ae && n(4, a = ae.tabSize), "mode" in ae && n(1, f = ae.mode), "mainMenuBar" in ae && n(5, c = ae.mainMenuBar), "navigationBar" in ae && n(6, u = ae.navigationBar), "statusBar" in ae && n(7, h = ae.statusBar), "escapeControlCharacters" in ae && n(8, d = ae.escapeControlCharacters), "escapeUnicodeCharacters" in ae && n(9, m = ae.escapeUnicodeCharacters), "flattenColumns" in ae && n(10, g = ae.flattenColumns), "parser" in ae && n(11, _ = ae.parser), "validator" in ae && n(12, b = ae.validator), "validationParser" in ae && n(13, w = ae.validationParser), "pathParser" in ae && n(14, v = ae.pathParser), "queryLanguages" in ae && n(34, M = ae.queryLanguages), "queryLanguageId" in ae && n(33, S = ae.queryLanguageId), "onChangeQueryLanguage" in ae && n(35, R = ae.onChangeQueryLanguage), "onChange" in ae && n(36, k = ae.onChange), "onRenderValue" in ae && n(15, I = ae.onRenderValue), "onClassName" in ae && n(16, L = ae.onClassName), "onRenderMenu" in ae && n(17, V = ae.onRenderMenu), "onChangeMode" in ae && n(37, N = ae.onChangeMode), "onError" in ae && n(18, W = ae.onError), "onFocus" in ae && n(38, U = ae.onFocus), "onBlur" in ae && n(39, O = ae.onBlur);
  }, t.$$.update = () => {
    if (t.$$.dirty[0] & 2049 | t.$$.dirty[1] & 8388608 && (j9(_, K) || (r("parser changed, recreate editor"), Kp(o) && n(0, o = {
      json: _.parse(K.stringify(o.json))
    }), n(54, K = _), n(19, x = ma()))), t.$$.dirty[0] & 1) {
      const ae = sd(o);
      ae && console.error("Error: " + ae);
    }
    t.$$.dirty[0] & 2048 && n(24, i = pf(_.parse)), t.$$.dirty[0] & 2 && (r("mode changed to", f), f === "code" && console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'));
  }, [
    o,
    f,
    s,
    l,
    a,
    c,
    u,
    h,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    I,
    L,
    V,
    W,
    x,
    A,
    H,
    D,
    P,
    i,
    ie,
    ve,
    Xe,
    he,
    Ie,
    qe,
    ct,
    yt,
    S,
    M,
    R,
    k,
    N,
    U,
    O,
    ne,
    z,
    Z,
    te,
    G,
    Ae,
    ke,
    ze,
    ee,
    we,
    tt,
    ge,
    N5,
    D5,
    K,
    Fe,
    Oe
  ];
}
class UJ extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      WJ,
      HJ,
      gt,
      {
        content: 0,
        readOnly: 2,
        indentation: 3,
        tabSize: 4,
        mode: 1,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        validator: 12,
        validationParser: 13,
        pathParser: 14,
        queryLanguages: 34,
        queryLanguageId: 33,
        onChangeQueryLanguage: 35,
        onChange: 36,
        onRenderValue: 15,
        onClassName: 16,
        onRenderMenu: 17,
        onChangeMode: 37,
        onError: 18,
        onFocus: 38,
        onBlur: 39,
        get: 40,
        set: 41,
        update: 42,
        patch: 43,
        expand: 44,
        transform: 45,
        validate: 46,
        acceptAutoRepair: 47,
        scrollTo: 48,
        findElement: 49,
        focus: 50,
        refresh: 51,
        updateProps: 52,
        destroy: 53
      },
      null,
      [-1, -1]
    );
  }
  get get() {
    return this.$$.ctx[40];
  }
  get set() {
    return this.$$.ctx[41];
  }
  get update() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get expand() {
    return this.$$.ctx[44];
  }
  get transform() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[47];
  }
  get scrollTo() {
    return this.$$.ctx[48];
  }
  get findElement() {
    return this.$$.ctx[49];
  }
  get focus() {
    return this.$$.ctx[50];
  }
  get refresh() {
    return this.$$.ctx[51];
  }
  get updateProps() {
    return N5;
  }
  get destroy() {
    return D5;
  }
}
const qJ = UJ;
function j5() {
  return {
    async: !1,
    baseUrl: null,
    breaks: !1,
    extensions: null,
    gfm: !0,
    headerIds: !0,
    headerPrefix: "",
    highlight: null,
    langPrefix: "language-",
    mangle: !0,
    pedantic: !1,
    renderer: null,
    sanitize: !1,
    sanitizer: null,
    silent: !1,
    smartypants: !1,
    tokenizer: null,
    walkTokens: null,
    xhtml: !1
  };
}
let Gl = j5();
function JJ(t) {
  Gl = t;
}
const B5 = /[&<>"']/, KJ = new RegExp(B5.source, "g"), L5 = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/, GJ = new RegExp(L5.source, "g"), XJ = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, Uw = (t) => XJ[t];
function ti(t, e) {
  if (e) {
    if (B5.test(t))
      return t.replace(KJ, Uw);
  } else if (L5.test(t))
    return t.replace(GJ, Uw);
  return t;
}
const QJ = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function x5(t) {
  return t.replace(QJ, (e, n) => (n = n.toLowerCase(), n === "colon" ? ":" : n.charAt(0) === "#" ? n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1)) : ""));
}
const YJ = /(^|[^\[])\^/g;
function Gt(t, e) {
  t = typeof t == "string" ? t : t.source, e = e || "";
  const n = {
    replace: (i, r) => (r = r.source || r, r = r.replace(YJ, "$1"), t = t.replace(i, r), n),
    getRegex: () => new RegExp(t, e)
  };
  return n;
}
const ZJ = /[^\w:]/g, $J = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function qw(t, e, n) {
  if (t) {
    let i;
    try {
      i = decodeURIComponent(x5(n)).replace(ZJ, "").toLowerCase();
    } catch {
      return null;
    }
    if (i.indexOf("javascript:") === 0 || i.indexOf("vbscript:") === 0 || i.indexOf("data:") === 0)
      return null;
  }
  e && !$J.test(n) && (n = iK(e, n));
  try {
    n = encodeURI(n).replace(/%25/g, "%");
  } catch {
    return null;
  }
  return n;
}
const hc = {}, eK = /^[^:]+:\/*[^/]*$/, tK = /^([^:]+:)[\s\S]*$/, nK = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function iK(t, e) {
  hc[" " + t] || (eK.test(t) ? hc[" " + t] = t + "/" : hc[" " + t] = Dc(t, "/", !0)), t = hc[" " + t];
  const n = t.indexOf(":") === -1;
  return e.substring(0, 2) === "//" ? n ? e : t.replace(tK, "$1") + e : e.charAt(0) === "/" ? n ? e : t.replace(nK, "$1") + e : t + e;
}
const Vu = { exec: function() {
} };
function vr(t) {
  let e = 1, n, i;
  for (; e < arguments.length; e++) {
    n = arguments[e];
    for (i in n)
      Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
  }
  return t;
}
function Jw(t, e) {
  const n = t.replace(/\|/g, (o, s, l) => {
    let a = !1, f = s;
    for (; --f >= 0 && l[f] === "\\"; )
      a = !a;
    return a ? "|" : " |";
  }), i = n.split(/ \|/);
  let r = 0;
  if (i[0].trim() || i.shift(), i.length > 0 && !i[i.length - 1].trim() && i.pop(), i.length > e)
    i.splice(e);
  else
    for (; i.length < e; )
      i.push("");
  for (; r < i.length; r++)
    i[r] = i[r].trim().replace(/\\\|/g, "|");
  return i;
}
function Dc(t, e, n) {
  const i = t.length;
  if (i === 0)
    return "";
  let r = 0;
  for (; r < i; ) {
    const o = t.charAt(i - r - 1);
    if (o === e && !n)
      r++;
    else if (o !== e && n)
      r++;
    else
      break;
  }
  return t.slice(0, i - r);
}
function rK(t, e) {
  if (t.indexOf(e[1]) === -1)
    return -1;
  const n = t.length;
  let i = 0, r = 0;
  for (; r < n; r++)
    if (t[r] === "\\")
      r++;
    else if (t[r] === e[0])
      i++;
    else if (t[r] === e[1] && (i--, i < 0))
      return r;
  return -1;
}
function z5(t) {
  t && t.sanitize && !t.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
}
function Kw(t, e) {
  if (e < 1)
    return "";
  let n = "";
  for (; e > 1; )
    e & 1 && (n += t), e >>= 1, t += t;
  return n + t;
}
function Gw(t, e, n, i) {
  const r = e.href, o = e.title ? ti(e.title) : null, s = t[1].replace(/\\([\[\]])/g, "$1");
  if (t[0].charAt(0) !== "!") {
    i.state.inLink = !0;
    const l = {
      type: "link",
      raw: n,
      href: r,
      title: o,
      text: s,
      tokens: i.inlineTokens(s)
    };
    return i.state.inLink = !1, l;
  }
  return {
    type: "image",
    raw: n,
    href: r,
    title: o,
    text: ti(s)
  };
}
function oK(t, e) {
  const n = t.match(/^(\s+)(?:```)/);
  if (n === null)
    return e;
  const i = n[1];
  return e.split(`
`).map((r) => {
    const o = r.match(/^\s+/);
    if (o === null)
      return r;
    const [s] = o;
    return s.length >= i.length ? r.slice(i.length) : r;
  }).join(`
`);
}
class Qg {
  constructor(e) {
    this.options = e || Gl;
  }
  space(e) {
    const n = this.rules.block.newline.exec(e);
    if (n && n[0].length > 0)
      return {
        type: "space",
        raw: n[0]
      };
  }
  code(e) {
    const n = this.rules.block.code.exec(e);
    if (n) {
      const i = n[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: n[0],
        codeBlockStyle: "indented",
        text: this.options.pedantic ? i : Dc(i, `
`)
      };
    }
  }
  fences(e) {
    const n = this.rules.block.fences.exec(e);
    if (n) {
      const i = n[0], r = oK(i, n[3] || "");
      return {
        type: "code",
        raw: i,
        lang: n[2] ? n[2].trim().replace(this.rules.inline._escapes, "$1") : n[2],
        text: r
      };
    }
  }
  heading(e) {
    const n = this.rules.block.heading.exec(e);
    if (n) {
      let i = n[2].trim();
      if (/#$/.test(i)) {
        const r = Dc(i, "#");
        (this.options.pedantic || !r || / $/.test(r)) && (i = r.trim());
      }
      return {
        type: "heading",
        raw: n[0],
        depth: n[1].length,
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  hr(e) {
    const n = this.rules.block.hr.exec(e);
    if (n)
      return {
        type: "hr",
        raw: n[0]
      };
  }
  blockquote(e) {
    const n = this.rules.block.blockquote.exec(e);
    if (n) {
      const i = n[0].replace(/^ *>[ \t]?/gm, ""), r = this.lexer.state.top;
      this.lexer.state.top = !0;
      const o = this.lexer.blockTokens(i);
      return this.lexer.state.top = r, {
        type: "blockquote",
        raw: n[0],
        tokens: o,
        text: i
      };
    }
  }
  list(e) {
    let n = this.rules.block.list.exec(e);
    if (n) {
      let i, r, o, s, l, a, f, c, u, h, d, m, g = n[1].trim();
      const _ = g.length > 1, b = {
        type: "list",
        raw: "",
        ordered: _,
        start: _ ? +g.slice(0, -1) : "",
        loose: !1,
        items: []
      };
      g = _ ? `\\d{1,9}\\${g.slice(-1)}` : `\\${g}`, this.options.pedantic && (g = _ ? g : "[*+-]");
      const w = new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      for (; e && (m = !1, !(!(n = w.exec(e)) || this.rules.block.hr.test(e))); ) {
        if (i = n[0], e = e.substring(i.length), c = n[2].split(`
`, 1)[0], u = e.split(`
`, 1)[0], this.options.pedantic ? (s = 2, d = c.trimLeft()) : (s = n[2].search(/[^ ]/), s = s > 4 ? 1 : s, d = c.slice(s), s += n[1].length), a = !1, !c && /^ *$/.test(u) && (i += u + `
`, e = e.substring(u.length + 1), m = !0), !m) {
          const M = new RegExp(`^ {0,${Math.min(3, s - 1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`), S = new RegExp(`^ {0,${Math.min(3, s - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`), R = new RegExp(`^ {0,${Math.min(3, s - 1)}}(?:\`\`\`|~~~)`), k = new RegExp(`^ {0,${Math.min(3, s - 1)}}#`);
          for (; e && (h = e.split(`
`, 1)[0], c = h, this.options.pedantic && (c = c.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ")), !(R.test(c) || k.test(c) || M.test(c) || S.test(e))); ) {
            if (c.search(/[^ ]/) >= s || !c.trim())
              d += `
` + c.slice(s);
            else if (!a)
              d += `
` + c;
            else
              break;
            !a && !c.trim() && (a = !0), i += h + `
`, e = e.substring(h.length + 1);
          }
        }
        b.loose || (f ? b.loose = !0 : /\n *\n *$/.test(i) && (f = !0)), this.options.gfm && (r = /^\[[ xX]\] /.exec(d), r && (o = r[0] !== "[ ] ", d = d.replace(/^\[[ xX]\] +/, ""))), b.items.push({
          type: "list_item",
          raw: i,
          task: !!r,
          checked: o,
          loose: !1,
          text: d
        }), b.raw += i;
      }
      b.items[b.items.length - 1].raw = i.trimRight(), b.items[b.items.length - 1].text = d.trimRight(), b.raw = b.raw.trimRight();
      const v = b.items.length;
      for (l = 0; l < v; l++)
        if (this.lexer.state.top = !1, b.items[l].tokens = this.lexer.blockTokens(b.items[l].text, []), !b.loose) {
          const M = b.items[l].tokens.filter((R) => R.type === "space"), S = M.length > 0 && M.some((R) => /\n.*\n/.test(R.raw));
          b.loose = S;
        }
      if (b.loose)
        for (l = 0; l < v; l++)
          b.items[l].loose = !0;
      return b;
    }
  }
  html(e) {
    const n = this.rules.block.html.exec(e);
    if (n) {
      const i = {
        type: "html",
        raw: n[0],
        pre: !this.options.sanitizer && (n[1] === "pre" || n[1] === "script" || n[1] === "style"),
        text: n[0]
      };
      if (this.options.sanitize) {
        const r = this.options.sanitizer ? this.options.sanitizer(n[0]) : ti(n[0]);
        i.type = "paragraph", i.text = r, i.tokens = this.lexer.inline(r);
      }
      return i;
    }
  }
  def(e) {
    const n = this.rules.block.def.exec(e);
    if (n) {
      const i = n[1].toLowerCase().replace(/\s+/g, " "), r = n[2] ? n[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "", o = n[3] ? n[3].substring(1, n[3].length - 1).replace(this.rules.inline._escapes, "$1") : n[3];
      return {
        type: "def",
        tag: i,
        raw: n[0],
        href: r,
        title: o
      };
    }
  }
  table(e) {
    const n = this.rules.block.table.exec(e);
    if (n) {
      const i = {
        type: "table",
        header: Jw(n[1]).map((r) => ({ text: r })),
        align: n[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: n[3] && n[3].trim() ? n[3].replace(/\n[ \t]*$/, "").split(`
`) : []
      };
      if (i.header.length === i.align.length) {
        i.raw = n[0];
        let r = i.align.length, o, s, l, a;
        for (o = 0; o < r; o++)
          /^ *-+: *$/.test(i.align[o]) ? i.align[o] = "right" : /^ *:-+: *$/.test(i.align[o]) ? i.align[o] = "center" : /^ *:-+ *$/.test(i.align[o]) ? i.align[o] = "left" : i.align[o] = null;
        for (r = i.rows.length, o = 0; o < r; o++)
          i.rows[o] = Jw(i.rows[o], i.header.length).map((f) => ({ text: f }));
        for (r = i.header.length, s = 0; s < r; s++)
          i.header[s].tokens = this.lexer.inline(i.header[s].text);
        for (r = i.rows.length, s = 0; s < r; s++)
          for (a = i.rows[s], l = 0; l < a.length; l++)
            a[l].tokens = this.lexer.inline(a[l].text);
        return i;
      }
    }
  }
  lheading(e) {
    const n = this.rules.block.lheading.exec(e);
    if (n)
      return {
        type: "heading",
        raw: n[0],
        depth: n[2].charAt(0) === "=" ? 1 : 2,
        text: n[1],
        tokens: this.lexer.inline(n[1])
      };
  }
  paragraph(e) {
    const n = this.rules.block.paragraph.exec(e);
    if (n) {
      const i = n[1].charAt(n[1].length - 1) === `
` ? n[1].slice(0, -1) : n[1];
      return {
        type: "paragraph",
        raw: n[0],
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  text(e) {
    const n = this.rules.block.text.exec(e);
    if (n)
      return {
        type: "text",
        raw: n[0],
        text: n[0],
        tokens: this.lexer.inline(n[0])
      };
  }
  escape(e) {
    const n = this.rules.inline.escape.exec(e);
    if (n)
      return {
        type: "escape",
        raw: n[0],
        text: ti(n[1])
      };
  }
  tag(e) {
    const n = this.rules.inline.tag.exec(e);
    if (n)
      return !this.lexer.state.inLink && /^<a /i.test(n[0]) ? this.lexer.state.inLink = !0 : this.lexer.state.inLink && /^<\/a>/i.test(n[0]) && (this.lexer.state.inLink = !1), !this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(n[0]) ? this.lexer.state.inRawBlock = !0 : this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0]) && (this.lexer.state.inRawBlock = !1), {
        type: this.options.sanitize ? "text" : "html",
        raw: n[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(n[0]) : ti(n[0]) : n[0]
      };
  }
  link(e) {
    const n = this.rules.inline.link.exec(e);
    if (n) {
      const i = n[2].trim();
      if (!this.options.pedantic && /^</.test(i)) {
        if (!/>$/.test(i))
          return;
        const s = Dc(i.slice(0, -1), "\\");
        if ((i.length - s.length) % 2 === 0)
          return;
      } else {
        const s = rK(n[2], "()");
        if (s > -1) {
          const a = (n[0].indexOf("!") === 0 ? 5 : 4) + n[1].length + s;
          n[2] = n[2].substring(0, s), n[0] = n[0].substring(0, a).trim(), n[3] = "";
        }
      }
      let r = n[2], o = "";
      if (this.options.pedantic) {
        const s = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);
        s && (r = s[1], o = s[3]);
      } else
        o = n[3] ? n[3].slice(1, -1) : "";
      return r = r.trim(), /^</.test(r) && (this.options.pedantic && !/>$/.test(i) ? r = r.slice(1) : r = r.slice(1, -1)), Gw(n, {
        href: r && r.replace(this.rules.inline._escapes, "$1"),
        title: o && o.replace(this.rules.inline._escapes, "$1")
      }, n[0], this.lexer);
    }
  }
  reflink(e, n) {
    let i;
    if ((i = this.rules.inline.reflink.exec(e)) || (i = this.rules.inline.nolink.exec(e))) {
      let r = (i[2] || i[1]).replace(/\s+/g, " ");
      if (r = n[r.toLowerCase()], !r) {
        const o = i[0].charAt(0);
        return {
          type: "text",
          raw: o,
          text: o
        };
      }
      return Gw(i, r, i[0], this.lexer);
    }
  }
  emStrong(e, n, i = "") {
    let r = this.rules.inline.emStrong.lDelim.exec(e);
    if (!r || r[3] && i.match(/[\p{L}\p{N}]/u))
      return;
    const o = r[1] || r[2] || "";
    if (!o || o && (i === "" || this.rules.inline.punctuation.exec(i))) {
      const s = r[0].length - 1;
      let l, a, f = s, c = 0;
      const u = r[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      for (u.lastIndex = 0, n = n.slice(-1 * e.length + s); (r = u.exec(n)) != null; ) {
        if (l = r[1] || r[2] || r[3] || r[4] || r[5] || r[6], !l)
          continue;
        if (a = l.length, r[3] || r[4]) {
          f += a;
          continue;
        } else if ((r[5] || r[6]) && s % 3 && !((s + a) % 3)) {
          c += a;
          continue;
        }
        if (f -= a, f > 0)
          continue;
        a = Math.min(a, a + f + c);
        const h = e.slice(0, s + r.index + (r[0].length - l.length) + a);
        if (Math.min(s, a) % 2) {
          const m = h.slice(1, -1);
          return {
            type: "em",
            raw: h,
            text: m,
            tokens: this.lexer.inlineTokens(m)
          };
        }
        const d = h.slice(2, -2);
        return {
          type: "strong",
          raw: h,
          text: d,
          tokens: this.lexer.inlineTokens(d)
        };
      }
    }
  }
  codespan(e) {
    const n = this.rules.inline.code.exec(e);
    if (n) {
      let i = n[2].replace(/\n/g, " ");
      const r = /[^ ]/.test(i), o = /^ /.test(i) && / $/.test(i);
      return r && o && (i = i.substring(1, i.length - 1)), i = ti(i, !0), {
        type: "codespan",
        raw: n[0],
        text: i
      };
    }
  }
  br(e) {
    const n = this.rules.inline.br.exec(e);
    if (n)
      return {
        type: "br",
        raw: n[0]
      };
  }
  del(e) {
    const n = this.rules.inline.del.exec(e);
    if (n)
      return {
        type: "del",
        raw: n[0],
        text: n[2],
        tokens: this.lexer.inlineTokens(n[2])
      };
  }
  autolink(e, n) {
    const i = this.rules.inline.autolink.exec(e);
    if (i) {
      let r, o;
      return i[2] === "@" ? (r = ti(this.options.mangle ? n(i[1]) : i[1]), o = "mailto:" + r) : (r = ti(i[1]), o = r), {
        type: "link",
        raw: i[0],
        text: r,
        href: o,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  url(e, n) {
    let i;
    if (i = this.rules.inline.url.exec(e)) {
      let r, o;
      if (i[2] === "@")
        r = ti(this.options.mangle ? n(i[0]) : i[0]), o = "mailto:" + r;
      else {
        let s;
        do
          s = i[0], i[0] = this.rules.inline._backpedal.exec(i[0])[0];
        while (s !== i[0]);
        r = ti(i[0]), i[1] === "www." ? o = "http://" + i[0] : o = i[0];
      }
      return {
        type: "link",
        raw: i[0],
        text: r,
        href: o,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  inlineText(e, n) {
    const i = this.rules.inline.text.exec(e);
    if (i) {
      let r;
      return this.lexer.state.inRawBlock ? r = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : ti(i[0]) : i[0] : r = ti(this.options.smartypants ? n(i[0]) : i[0]), {
        type: "text",
        raw: i[0],
        text: r
      };
    }
  }
}
const rt = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: Vu,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
rt._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
rt._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
rt.def = Gt(rt.def).replace("label", rt._label).replace("title", rt._title).getRegex();
rt.bullet = /(?:[*+-]|\d{1,9}[.)])/;
rt.listItemStart = Gt(/^( *)(bull) */).replace("bull", rt.bullet).getRegex();
rt.list = Gt(rt.list).replace(/bull/g, rt.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + rt.def.source + ")").getRegex();
rt._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
rt._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
rt.html = Gt(rt.html, "i").replace("comment", rt._comment).replace("tag", rt._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
rt.paragraph = Gt(rt._paragraph).replace("hr", rt.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", rt._tag).getRegex();
rt.blockquote = Gt(rt.blockquote).replace("paragraph", rt.paragraph).getRegex();
rt.normal = vr({}, rt);
rt.gfm = vr({}, rt.normal, {
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
});
rt.gfm.table = Gt(rt.gfm.table).replace("hr", rt.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", rt._tag).getRegex();
rt.gfm.paragraph = Gt(rt._paragraph).replace("hr", rt.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", rt.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", rt._tag).getRegex();
rt.pedantic = vr({}, rt.normal, {
  html: Gt(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", rt._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: Vu,
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: Gt(rt.normal._paragraph).replace("hr", rt.hr).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", rt.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
});
const He = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: Vu,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: Vu,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
He._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
He.punctuation = Gt(He.punctuation).replace(/punctuation/g, He._punctuation).getRegex();
He.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
He.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
He._comment = Gt(rt._comment).replace("(?:-->|$)", "-->").getRegex();
He.emStrong.lDelim = Gt(He.emStrong.lDelim).replace(/punct/g, He._punctuation).getRegex();
He.emStrong.rDelimAst = Gt(He.emStrong.rDelimAst, "g").replace(/punct/g, He._punctuation).getRegex();
He.emStrong.rDelimUnd = Gt(He.emStrong.rDelimUnd, "g").replace(/punct/g, He._punctuation).getRegex();
He._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
He._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
He._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
He.autolink = Gt(He.autolink).replace("scheme", He._scheme).replace("email", He._email).getRegex();
He._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
He.tag = Gt(He.tag).replace("comment", He._comment).replace("attribute", He._attribute).getRegex();
He._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
He._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
He._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
He.link = Gt(He.link).replace("label", He._label).replace("href", He._href).replace("title", He._title).getRegex();
He.reflink = Gt(He.reflink).replace("label", He._label).replace("ref", rt._label).getRegex();
He.nolink = Gt(He.nolink).replace("ref", rt._label).getRegex();
He.reflinkSearch = Gt(He.reflinkSearch, "g").replace("reflink", He.reflink).replace("nolink", He.nolink).getRegex();
He.normal = vr({}, He);
He.pedantic = vr({}, He.normal, {
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: Gt(/^!?\[(label)\]\((.*?)\)/).replace("label", He._label).getRegex(),
  reflink: Gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", He._label).getRegex()
});
He.gfm = vr({}, He.normal, {
  escape: Gt(He.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
});
He.gfm.url = Gt(He.gfm.url, "i").replace("email", He.gfm._extended_email).getRegex();
He.breaks = vr({}, He.gfm, {
  br: Gt(He.br).replace("{2,}", "*").getRegex(),
  text: Gt(He.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
});
function sK(t) {
  return t.replace(/---/g, "—").replace(/--/g, "–").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1‘").replace(/'/g, "’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1“").replace(/"/g, "”").replace(/\.{3}/g, "…");
}
function Xw(t) {
  let e = "", n, i;
  const r = t.length;
  for (n = 0; n < r; n++)
    i = t.charCodeAt(n), Math.random() > 0.5 && (i = "x" + i.toString(16)), e += "&#" + i + ";";
  return e;
}
class po {
  constructor(e) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = e || Gl, this.options.tokenizer = this.options.tokenizer || new Qg(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = {
      inLink: !1,
      inRawBlock: !1,
      top: !0
    };
    const n = {
      block: rt.normal,
      inline: He.normal
    };
    this.options.pedantic ? (n.block = rt.pedantic, n.inline = He.pedantic) : this.options.gfm && (n.block = rt.gfm, this.options.breaks ? n.inline = He.breaks : n.inline = He.gfm), this.tokenizer.rules = n;
  }
  static get rules() {
    return {
      block: rt,
      inline: He
    };
  }
  static lex(e, n) {
    return new po(n).lex(e);
  }
  static lexInline(e, n) {
    return new po(n).inlineTokens(e);
  }
  lex(e) {
    e = e.replace(/\r\n|\r/g, `
`), this.blockTokens(e, this.tokens);
    let n;
    for (; n = this.inlineQueue.shift(); )
      this.inlineTokens(n.src, n.tokens);
    return this.tokens;
  }
  blockTokens(e, n = []) {
    this.options.pedantic ? e = e.replace(/\t/g, "    ").replace(/^ +$/gm, "") : e = e.replace(/^( *)(\t+)/gm, (l, a, f) => a + "    ".repeat(f.length));
    let i, r, o, s;
    for (; e; )
      if (!(this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((l) => (i = l.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.space(e)) {
          e = e.substring(i.raw.length), i.raw.length === 1 && n.length > 0 ? n[n.length - 1].raw += `
` : n.push(i);
          continue;
        }
        if (i = this.tokenizer.code(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.fences(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.heading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.hr(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.blockquote(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.list(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.html(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.def(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.raw, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : this.tokens.links[i.tag] || (this.tokens.links[i.tag] = {
            href: i.href,
            title: i.title
          });
          continue;
        }
        if (i = this.tokenizer.table(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.lheading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (o = e, this.options.extensions && this.options.extensions.startBlock) {
          let l = 1 / 0;
          const a = e.slice(1);
          let f;
          this.options.extensions.startBlock.forEach(function(c) {
            f = c.call({ lexer: this }, a), typeof f == "number" && f >= 0 && (l = Math.min(l, f));
          }), l < 1 / 0 && l >= 0 && (o = e.substring(0, l + 1));
        }
        if (this.state.top && (i = this.tokenizer.paragraph(o))) {
          r = n[n.length - 1], s && r.type === "paragraph" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i), s = o.length !== e.length, e = e.substring(i.raw.length);
          continue;
        }
        if (i = this.tokenizer.text(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && r.type === "text" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (e) {
          const l = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(l);
            break;
          } else
            throw new Error(l);
        }
      }
    return this.state.top = !0, n;
  }
  inline(e, n = []) {
    return this.inlineQueue.push({ src: e, tokens: n }), n;
  }
  inlineTokens(e, n = []) {
    let i, r, o, s = e, l, a, f;
    if (this.tokens.links) {
      const c = Object.keys(this.tokens.links);
      if (c.length > 0)
        for (; (l = this.tokenizer.rules.inline.reflinkSearch.exec(s)) != null; )
          c.includes(l[0].slice(l[0].lastIndexOf("[") + 1, -1)) && (s = s.slice(0, l.index) + "[" + Kw("a", l[0].length - 2) + "]" + s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (l = this.tokenizer.rules.inline.blockSkip.exec(s)) != null; )
      s = s.slice(0, l.index) + "[" + Kw("a", l[0].length - 2) + "]" + s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    for (; (l = this.tokenizer.rules.inline.escapedEmSt.exec(s)) != null; )
      s = s.slice(0, l.index + l[0].length - 2) + "++" + s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex), this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    for (; e; )
      if (a || (f = ""), a = !1, !(this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((c) => (i = c.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.escape(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.tag(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.link(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.reflink(e, this.tokens.links)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.emStrong(e, s, f)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.codespan(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.br(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.del(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.autolink(e, Xw)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (!this.state.inLink && (i = this.tokenizer.url(e, Xw))) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (o = e, this.options.extensions && this.options.extensions.startInline) {
          let c = 1 / 0;
          const u = e.slice(1);
          let h;
          this.options.extensions.startInline.forEach(function(d) {
            h = d.call({ lexer: this }, u), typeof h == "number" && h >= 0 && (c = Math.min(c, h));
          }), c < 1 / 0 && c >= 0 && (o = e.substring(0, c + 1));
        }
        if (i = this.tokenizer.inlineText(o, sK)) {
          e = e.substring(i.raw.length), i.raw.slice(-1) !== "_" && (f = i.raw.slice(-1)), a = !0, r = n[n.length - 1], r && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (e) {
          const c = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(c);
            break;
          } else
            throw new Error(c);
        }
      }
    return n;
  }
}
class Yg {
  constructor(e) {
    this.options = e || Gl;
  }
  code(e, n, i) {
    const r = (n || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const o = this.options.highlight(e, r);
      o != null && o !== e && (i = !0, e = o);
    }
    return e = e.replace(/\n$/, "") + `
`, r ? '<pre><code class="' + this.options.langPrefix + ti(r) + '">' + (i ? e : ti(e, !0)) + `</code></pre>
` : "<pre><code>" + (i ? e : ti(e, !0)) + `</code></pre>
`;
  }
  blockquote(e) {
    return `<blockquote>
${e}</blockquote>
`;
  }
  html(e) {
    return e;
  }
  heading(e, n, i, r) {
    if (this.options.headerIds) {
      const o = this.options.headerPrefix + r.slug(i);
      return `<h${n} id="${o}">${e}</h${n}>
`;
    }
    return `<h${n}>${e}</h${n}>
`;
  }
  hr() {
    return this.options.xhtml ? `<hr/>
` : `<hr>
`;
  }
  list(e, n, i) {
    const r = n ? "ol" : "ul", o = n && i !== 1 ? ' start="' + i + '"' : "";
    return "<" + r + o + `>
` + e + "</" + r + `>
`;
  }
  listitem(e) {
    return `<li>${e}</li>
`;
  }
  checkbox(e) {
    return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  paragraph(e) {
    return `<p>${e}</p>
`;
  }
  table(e, n) {
    return n && (n = `<tbody>${n}</tbody>`), `<table>
<thead>
` + e + `</thead>
` + n + `</table>
`;
  }
  tablerow(e) {
    return `<tr>
${e}</tr>
`;
  }
  tablecell(e, n) {
    const i = n.header ? "th" : "td";
    return (n.align ? `<${i} align="${n.align}">` : `<${i}>`) + e + `</${i}>
`;
  }
  strong(e) {
    return `<strong>${e}</strong>`;
  }
  em(e) {
    return `<em>${e}</em>`;
  }
  codespan(e) {
    return `<code>${e}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  del(e) {
    return `<del>${e}</del>`;
  }
  link(e, n, i) {
    if (e = qw(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = '<a href="' + e + '"';
    return n && (r += ' title="' + n + '"'), r += ">" + i + "</a>", r;
  }
  image(e, n, i) {
    if (e = qw(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = `<img src="${e}" alt="${i}"`;
    return n && (r += ` title="${n}"`), r += this.options.xhtml ? "/>" : ">", r;
  }
  text(e) {
    return e;
  }
}
class V5 {
  strong(e) {
    return e;
  }
  em(e) {
    return e;
  }
  codespan(e) {
    return e;
  }
  del(e) {
    return e;
  }
  html(e) {
    return e;
  }
  text(e) {
    return e;
  }
  link(e, n, i) {
    return "" + i;
  }
  image(e, n, i) {
    return "" + i;
  }
  br() {
    return "";
  }
}
class F5 {
  constructor() {
    this.seen = {};
  }
  serialize(e) {
    return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  getNextSafeSlug(e, n) {
    let i = e, r = 0;
    if (this.seen.hasOwnProperty(i)) {
      r = this.seen[e];
      do
        r++, i = e + "-" + r;
      while (this.seen.hasOwnProperty(i));
    }
    return n || (this.seen[e] = r, this.seen[i] = 0), i;
  }
  slug(e, n = {}) {
    const i = this.serialize(e);
    return this.getNextSafeSlug(i, n.dryrun);
  }
}
class Hr {
  constructor(e) {
    this.options = e || Gl, this.options.renderer = this.options.renderer || new Yg(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new V5(), this.slugger = new F5();
  }
  static parse(e, n) {
    return new Hr(n).parse(e);
  }
  static parseInline(e, n) {
    return new Hr(n).parseInline(e);
  }
  parse(e, n = !0) {
    let i = "", r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R;
    const k = e.length;
    for (r = 0; r < k; r++) {
      if (d = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[d.type] && (R = this.options.extensions.renderers[d.type].call({ parser: this }, d), R !== !1 || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(d.type))) {
        i += R || "";
        continue;
      }
      switch (d.type) {
        case "space":
          continue;
        case "hr": {
          i += this.renderer.hr();
          continue;
        }
        case "heading": {
          i += this.renderer.heading(
            this.parseInline(d.tokens),
            d.depth,
            x5(this.parseInline(d.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          i += this.renderer.code(
            d.text,
            d.lang,
            d.escaped
          );
          continue;
        }
        case "table": {
          for (u = "", c = "", l = d.header.length, o = 0; o < l; o++)
            c += this.renderer.tablecell(
              this.parseInline(d.header[o].tokens),
              { header: !0, align: d.align[o] }
            );
          for (u += this.renderer.tablerow(c), h = "", l = d.rows.length, o = 0; o < l; o++) {
            for (f = d.rows[o], c = "", a = f.length, s = 0; s < a; s++)
              c += this.renderer.tablecell(
                this.parseInline(f[s].tokens),
                { header: !1, align: d.align[s] }
              );
            h += this.renderer.tablerow(c);
          }
          i += this.renderer.table(u, h);
          continue;
        }
        case "blockquote": {
          h = this.parse(d.tokens), i += this.renderer.blockquote(h);
          continue;
        }
        case "list": {
          for (m = d.ordered, g = d.start, _ = d.loose, l = d.items.length, h = "", o = 0; o < l; o++)
            w = d.items[o], v = w.checked, M = w.task, b = "", w.task && (S = this.renderer.checkbox(v), _ ? w.tokens.length > 0 && w.tokens[0].type === "paragraph" ? (w.tokens[0].text = S + " " + w.tokens[0].text, w.tokens[0].tokens && w.tokens[0].tokens.length > 0 && w.tokens[0].tokens[0].type === "text" && (w.tokens[0].tokens[0].text = S + " " + w.tokens[0].tokens[0].text)) : w.tokens.unshift({
              type: "text",
              text: S
            }) : b += S), b += this.parse(w.tokens, _), h += this.renderer.listitem(b, M, v);
          i += this.renderer.list(h, m, g);
          continue;
        }
        case "html": {
          i += this.renderer.html(d.text);
          continue;
        }
        case "paragraph": {
          i += this.renderer.paragraph(this.parseInline(d.tokens));
          continue;
        }
        case "text": {
          for (h = d.tokens ? this.parseInline(d.tokens) : d.text; r + 1 < k && e[r + 1].type === "text"; )
            d = e[++r], h += `
` + (d.tokens ? this.parseInline(d.tokens) : d.text);
          i += n ? this.renderer.paragraph(h) : h;
          continue;
        }
        default: {
          const I = 'Token with "' + d.type + '" type was not found.';
          if (this.options.silent) {
            console.error(I);
            return;
          } else
            throw new Error(I);
        }
      }
    }
    return i;
  }
  parseInline(e, n) {
    n = n || this.renderer;
    let i = "", r, o, s;
    const l = e.length;
    for (r = 0; r < l; r++) {
      if (o = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[o.type] && (s = this.options.extensions.renderers[o.type].call({ parser: this }, o), s !== !1 || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(o.type))) {
        i += s || "";
        continue;
      }
      switch (o.type) {
        case "escape": {
          i += n.text(o.text);
          break;
        }
        case "html": {
          i += n.html(o.text);
          break;
        }
        case "link": {
          i += n.link(o.href, o.title, this.parseInline(o.tokens, n));
          break;
        }
        case "image": {
          i += n.image(o.href, o.title, o.text);
          break;
        }
        case "strong": {
          i += n.strong(this.parseInline(o.tokens, n));
          break;
        }
        case "em": {
          i += n.em(this.parseInline(o.tokens, n));
          break;
        }
        case "codespan": {
          i += n.codespan(o.text);
          break;
        }
        case "br": {
          i += n.br();
          break;
        }
        case "del": {
          i += n.del(this.parseInline(o.tokens, n));
          break;
        }
        case "text": {
          i += n.text(o.text);
          break;
        }
        default: {
          const a = 'Token with "' + o.type + '" type was not found.';
          if (this.options.silent) {
            console.error(a);
            return;
          } else
            throw new Error(a);
        }
      }
    }
    return i;
  }
}
function Ye(t, e, n) {
  if (typeof t > "u" || t === null)
    throw new Error("marked(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  if (typeof e == "function" && (n = e, e = null), e = vr({}, Ye.defaults, e || {}), z5(e), n) {
    const r = e.highlight;
    let o;
    try {
      o = po.lex(t, e);
    } catch (a) {
      return n(a);
    }
    const s = function(a) {
      let f;
      if (!a)
        try {
          e.walkTokens && Ye.walkTokens(o, e.walkTokens), f = Hr.parse(o, e);
        } catch (c) {
          a = c;
        }
      return e.highlight = r, a ? n(a) : n(null, f);
    };
    if (!r || r.length < 3 || (delete e.highlight, !o.length))
      return s();
    let l = 0;
    Ye.walkTokens(o, function(a) {
      a.type === "code" && (l++, setTimeout(() => {
        r(a.text, a.lang, function(f, c) {
          if (f)
            return s(f);
          c != null && c !== a.text && (a.text = c, a.escaped = !0), l--, l === 0 && s();
        });
      }, 0));
    }), l === 0 && s();
    return;
  }
  function i(r) {
    if (r.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + ti(r.message + "", !0) + "</pre>";
    throw r;
  }
  try {
    const r = po.lex(t, e);
    if (e.walkTokens) {
      if (e.async)
        return Promise.all(Ye.walkTokens(r, e.walkTokens)).then(() => Hr.parse(r, e)).catch(i);
      Ye.walkTokens(r, e.walkTokens);
    }
    return Hr.parse(r, e);
  } catch (r) {
    i(r);
  }
}
Ye.options = Ye.setOptions = function(t) {
  return vr(Ye.defaults, t), JJ(Ye.defaults), Ye;
};
Ye.getDefaults = j5;
Ye.defaults = Gl;
Ye.use = function(...t) {
  const e = Ye.defaults.extensions || { renderers: {}, childTokens: {} };
  t.forEach((n) => {
    const i = vr({}, n);
    if (i.async = Ye.defaults.async || i.async, n.extensions && (n.extensions.forEach((r) => {
      if (!r.name)
        throw new Error("extension name required");
      if (r.renderer) {
        const o = e.renderers[r.name];
        o ? e.renderers[r.name] = function(...s) {
          let l = r.renderer.apply(this, s);
          return l === !1 && (l = o.apply(this, s)), l;
        } : e.renderers[r.name] = r.renderer;
      }
      if (r.tokenizer) {
        if (!r.level || r.level !== "block" && r.level !== "inline")
          throw new Error("extension level must be 'block' or 'inline'");
        e[r.level] ? e[r.level].unshift(r.tokenizer) : e[r.level] = [r.tokenizer], r.start && (r.level === "block" ? e.startBlock ? e.startBlock.push(r.start) : e.startBlock = [r.start] : r.level === "inline" && (e.startInline ? e.startInline.push(r.start) : e.startInline = [r.start]));
      }
      r.childTokens && (e.childTokens[r.name] = r.childTokens);
    }), i.extensions = e), n.renderer) {
      const r = Ye.defaults.renderer || new Yg();
      for (const o in n.renderer) {
        const s = r[o];
        r[o] = (...l) => {
          let a = n.renderer[o].apply(r, l);
          return a === !1 && (a = s.apply(r, l)), a;
        };
      }
      i.renderer = r;
    }
    if (n.tokenizer) {
      const r = Ye.defaults.tokenizer || new Qg();
      for (const o in n.tokenizer) {
        const s = r[o];
        r[o] = (...l) => {
          let a = n.tokenizer[o].apply(r, l);
          return a === !1 && (a = s.apply(r, l)), a;
        };
      }
      i.tokenizer = r;
    }
    if (n.walkTokens) {
      const r = Ye.defaults.walkTokens;
      i.walkTokens = function(o) {
        let s = [];
        return s.push(n.walkTokens.call(this, o)), r && (s = s.concat(r.call(this, o))), s;
      };
    }
    Ye.setOptions(i);
  });
};
Ye.walkTokens = function(t, e) {
  let n = [];
  for (const i of t)
    switch (n = n.concat(e.call(Ye, i)), i.type) {
      case "table": {
        for (const r of i.header)
          n = n.concat(Ye.walkTokens(r.tokens, e));
        for (const r of i.rows)
          for (const o of r)
            n = n.concat(Ye.walkTokens(o.tokens, e));
        break;
      }
      case "list": {
        n = n.concat(Ye.walkTokens(i.items, e));
        break;
      }
      default:
        Ye.defaults.extensions && Ye.defaults.extensions.childTokens && Ye.defaults.extensions.childTokens[i.type] ? Ye.defaults.extensions.childTokens[i.type].forEach(function(r) {
          n = n.concat(Ye.walkTokens(i[r], e));
        }) : i.tokens && (n = n.concat(Ye.walkTokens(i.tokens, e)));
    }
  return n;
};
Ye.parseInline = function(t, e) {
  if (typeof t > "u" || t === null)
    throw new Error("marked.parseInline(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  e = vr({}, Ye.defaults, e || {}), z5(e);
  try {
    const n = po.lexInline(t, e);
    return e.walkTokens && Ye.walkTokens(n, e.walkTokens), Hr.parseInline(n, e);
  } catch (n) {
    if (n.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + ti(n.message + "", !0) + "</pre>";
    throw n;
  }
};
Ye.Parser = Hr;
Ye.parser = Hr.parse;
Ye.Renderer = Yg;
Ye.TextRenderer = V5;
Ye.Lexer = po;
Ye.lexer = po.lex;
Ye.Tokenizer = Qg;
Ye.Slugger = F5;
Ye.parse = Ye;
Ye.options;
Ye.setOptions;
Ye.use;
Ye.walkTokens;
Ye.parseInline;
Hr.parse;
po.lex;
function Qw(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function Yw(t, e) {
  let n, i, r;
  return {
    key: t,
    first: null,
    c() {
      n = T("calcite-combobox-item"), $(n, "selected", ""), $(n, "value", i = e[3]), $(n, "text-label", r = e[3]), this.first = n;
    },
    m(o, s) {
      B(o, n, s);
    },
    p(o, s) {
      e = o, s & 1 && i !== (i = e[3]) && $(n, "value", i), s & 1 && r !== (r = e[3]) && $(n, "text-label", r);
    },
    d(o) {
      o && j(n);
    }
  };
}
function lK(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, o, s = t[0];
  const l = (a) => a[3];
  for (let a = 0; a < s.length; a += 1) {
    let f = Qw(t, s, a), c = l(f);
    i.set(c, n[a] = Yw(c, f));
  }
  return {
    c() {
      e = T("calcite-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      $(e, "label", "Tags"), $(e, "allow-custom-values", ""), $(e, "placeholder", "Add/remove tags using Tab/Backspace key");
    },
    m(a, f) {
      B(a, e, f);
      for (let c = 0; c < n.length; c += 1)
        n[c].m(e, null);
      r || (o = X(e, "calciteComboboxChange", t[1]), r = !0);
    },
    p(a, [f]) {
      f & 1 && (s = a[0], n = fo(n, f, l, 1, a, s, i, e, of, Yw, null, Qw));
    },
    i: fe,
    o: fe,
    d(a) {
      a && j(e);
      for (let f = 0; f < n.length; f += 1)
        n[f].d();
      r = !1, o();
    }
  };
}
function aK(t, e, n) {
  const i = Ls();
  let { tags: r = [] } = e;
  function o(s) {
    console.log("comboboxchanged", typeof s.target.value, s.target.value);
    let l;
    typeof s.target.value == "string" ? l = s.target.value === "" ? [] : [s.target.value] : s.target.value ? l = s.target.value : l = [], i("tagschanged", { value: l });
  }
  return t.$$set = (s) => {
    "tags" in s && n(0, r = s.tags);
  }, [r, o];
}
class fK extends Be {
  constructor(e) {
    super(), je(this, e, aK, lK, It, { tags: 0 });
  }
}
function Zw(t, e, n) {
  const i = t.slice();
  return i[29] = e[n], i;
}
function $w(t, e, n) {
  const i = t.slice();
  return i[32] = e[n], i;
}
function ev(t, e, n) {
  const i = t.slice();
  return i[35] = e[n], i;
}
function tv(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function cK(t) {
  let e;
  return {
    c() {
      e = T("h1"), e.textContent = "Multiple nodes", p(e, "class", "svelte-1vvthkw");
    },
    m(n, i) {
      B(n, e, i);
    },
    p: fe,
    d(n) {
      n && j(e);
    }
  };
}
function uK(t) {
  var u;
  let e, n = t[0][0].label + "", i, r, o = !1, s, l = ["node", "edge"].includes((u = t[0][0]) == null ? void 0 : u.kind), a, f = o && nv(t), c = l && iv(t);
  return {
    c() {
      e = T("h1"), i = le(n), r = q(), f && f.c(), s = q(), c && c.c(), a = Ze(), p(e, "class", "svelte-1vvthkw");
    },
    m(h, d) {
      B(h, e, d), y(e, i), y(e, r), f && f.m(e, null), B(h, s, d), c && c.m(h, d), B(h, a, d);
    },
    p(h, d) {
      var m;
      d[0] & 1 && n !== (n = h[0][0].label + "") && Te(i, n), d[0] & 1 && (o = !1), o ? f ? f.p(h, d) : (f = nv(h), f.c(), f.m(e, null)) : f && (f.d(1), f = null), d[0] & 1 && (l = ["node", "edge"].includes((m = h[0][0]) == null ? void 0 : m.kind)), l ? c ? c.p(h, d) : (c = iv(h), c.c(), c.m(a.parentNode, a)) : c && (c.d(1), c = null);
    },
    d(h) {
      h && j(e), f && f.d(), h && j(s), c && c.d(h), h && j(a);
    }
  };
}
function nv(t) {
  let e, n, i;
  return {
    c() {
      e = T("sl-button"), e.innerHTML = '<sl-icon name="gear" label="Settings"></sl-icon>', $(e, "variant", "default"), $(e, "size", "small"), $(e, "circle", "");
    },
    m(r, o) {
      B(r, e, o), n || (i = X(e, "click", t[10]), n = !0);
    },
    p: fe,
    d(r) {
      r && j(e), n = !1, i();
    }
  };
}
function iv(t) {
  let e, n = Ye(t[0][0].desc) + "";
  return {
    c() {
      e = T("p"), p(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 1 && n !== (n = Ye(i[0][0].desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function rv(t) {
  let e, n, i, r, o, s, l, a, f, c = (t[0][0].kind === "node" || t[0][0].kind === "note") && ov(t), u = t[0][0].kind !== "note" && sv(t), h = t[0][0].kind === "node" && av(t);
  return {
    c() {
      e = T("div"), n = T("sl-input"), r = q(), c && c.c(), o = q(), u && u.c(), s = q(), h && h.c(), $(n, "label", "Label"), $(n, "type", "text"), $(n, "size", "small"), $(n, "value", i = t[0][0].label), p(e, "class", "node-panel svelte-1vvthkw");
    },
    m(d, m) {
      B(d, e, m), y(e, n), y(e, r), c && c.m(e, null), y(e, o), u && u.m(e, null), y(e, s), h && h.m(e, null), l = !0, a || (f = X(n, "sl-change", t[11]), a = !0);
    },
    p(d, m) {
      (!l || m[0] & 1 && i !== (i = d[0][0].label)) && $(n, "value", i), d[0][0].kind === "node" || d[0][0].kind === "note" ? c ? c.p(d, m) : (c = ov(d), c.c(), c.m(e, o)) : c && (c.d(1), c = null), d[0][0].kind !== "note" ? u ? (u.p(d, m), m[0] & 1 && C(u, 1)) : (u = sv(d), u.c(), C(u, 1), u.m(e, s)) : u && (me(), E(u, 1, 1, () => {
        u = null;
      }), pe()), d[0][0].kind === "node" ? h ? h.p(d, m) : (h = av(d), h.c(), h.m(e, null)) : h && (h.d(1), h = null);
    },
    i(d) {
      l || (C(u), l = !0);
    },
    o(d) {
      E(u), l = !1;
    },
    d(d) {
      d && j(e), c && c.d(), u && u.d(), h && h.d(), a = !1, f();
    }
  };
}
function ov(t) {
  let e, n, i, r;
  return {
    c() {
      e = T("sl-textarea"), $(e, "label", "Notes"), $(e, "placeholder", "Notes (these will be shown in the graph)..."), $(e, "size", "small"), $(e, "value", n = t[0][0].notes);
    },
    m(o, s) {
      B(o, e, s), i || (r = X(e, "sl-change", t[12]), i = !0);
    },
    p(o, s) {
      s[0] & 1 && n !== (n = o[0][0].notes) && $(e, "value", n);
    },
    d(o) {
      o && j(e), i = !1, r();
    }
  };
}
function sv(t) {
  let e, n, i, r, o = t[0][0], s, l, a, f, c = lv(t);
  return {
    c() {
      e = T("sl-textarea"), n = T("p"), n.innerHTML = '<a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Learn about MarkDown</a>', r = q(), c.c(), s = Ze(), p(n, "slot", "help-text"), $(e, "label", "Description"), $(e, "placeholder", "Description in markdown..."), $(e, "size", "small"), $(e, "value", i = t[0][0].desc);
    },
    m(u, h) {
      B(u, e, h), y(e, n), B(u, r, h), c.m(u, h), B(u, s, h), l = !0, a || (f = X(e, "sl-change", t[13]), a = !0);
    },
    p(u, h) {
      (!l || h[0] & 1 && i !== (i = u[0][0].desc)) && $(e, "value", i), h[0] & 1 && It(o, o = u[0][0]) ? (me(), E(c, 1, 1, fe), pe(), c = lv(u), c.c(), C(c, 1), c.m(s.parentNode, s)) : c.p(u, h);
    },
    i(u) {
      l || (C(c), l = !0);
    },
    o(u) {
      E(c), l = !1;
    },
    d(u) {
      u && j(e), u && j(r), u && j(s), c.d(u), a = !1, f();
    }
  };
}
function lv(t) {
  let e, n;
  return e = new fK({
    props: { tags: t[0][0].tags }
  }), e.$on("tagschanged", t[14]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 1 && (o.tags = i[0][0].tags), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function av(t) {
  var c;
  let e, n = (c = t[0][0].badge) == null ? void 0 : c.startsWith("http"), i, r, o, s, l = n && fv(t), a = t[1].theme.badges, f = [];
  for (let u = 0; u < a.length; u += 1)
    f[u] = cv(tv(t, a, u));
  return {
    c() {
      e = T("sl-select"), l && l.c(), i = q();
      for (let u = 0; u < f.length; u += 1)
        f[u].c();
      $(e, "label", "Badge"), $(e, "clearable", ""), $(e, "value", r = t[0][0].badge || ""), $(e, "placeholder", "Select badge");
    },
    m(u, h) {
      B(u, e, h), l && l.m(e, null), y(e, i);
      for (let d = 0; d < f.length; d += 1)
        f[d].m(e, null);
      o || (s = X(e, "sl-change", t[15]), o = !0);
    },
    p(u, h) {
      var d;
      if (h[0] & 1 && (n = (d = u[0][0].badge) == null ? void 0 : d.startsWith("http")), n ? l ? l.p(u, h) : (l = fv(u), l.c(), l.m(e, i)) : l && (l.d(1), l = null), h[0] & 3) {
        a = u[1].theme.badges;
        let m;
        for (m = 0; m < a.length; m += 1) {
          const g = tv(u, a, m);
          f[m] ? f[m].p(g, h) : (f[m] = cv(g), f[m].c(), f[m].m(e, null));
        }
        for (; m < f.length; m += 1)
          f[m].d(1);
        f.length = a.length;
      }
      h[0] & 1 && r !== (r = u[0][0].badge || "") && $(e, "value", r);
    },
    d(u) {
      u && j(e), l && l.d(), zt(f, u), o = !1, s();
    }
  };
}
function fv(t) {
  let e, n;
  return {
    c() {
      e = T("img"), p(e, "width", "30"), p(e, "height", "28"), p(e, "alt", "badge"), zc(e.src, n = t[0][0].badge) || p(e, "src", n), p(e, "slot", "prefix");
    },
    m(i, r) {
      B(i, e, r);
    },
    p(i, r) {
      r[0] & 1 && !zc(e.src, n = i[0][0].badge) && p(e, "src", n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function hK(t) {
  let e = t[38] + "", n;
  return {
    c() {
      n = le(e);
    },
    m(i, r) {
      B(i, n, r);
    },
    p(i, r) {
      r[0] & 2 && e !== (e = i[38] + "") && Te(n, e);
    },
    d(i) {
      i && j(n);
    }
  };
}
function dK(t) {
  let e, n;
  return {
    c() {
      e = T("img"), p(e, "width", "30"), p(e, "height", "28"), p(e, "alt", "badge"), zc(e.src, n = t[38]) || p(e, "src", n), p(e, "class", "http-badge svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r);
    },
    p(i, r) {
      r[0] & 2 && !zc(e.src, n = i[38]) && p(e, "src", n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function cv(t) {
  let e, n, i, r, o;
  function s(f, c) {
    return c[0] & 2 && (n = null), n == null && (n = !!f[38].startsWith("http")), n ? dK : hK;
  }
  let l = s(t, [-1, -1]), a = l(t);
  return {
    c() {
      e = T("sl-option"), a.c(), i = q(), $(e, "value", r = t[38]), $(e, "selected", o = t[0][0].badge === t[38]);
    },
    m(f, c) {
      B(f, e, c), a.m(e, null), y(e, i);
    },
    p(f, c) {
      l === (l = s(f, c)) && a ? a.p(f, c) : (a.d(1), a = l(f), a && (a.c(), a.m(e, i))), c[0] & 2 && r !== (r = f[38]) && $(e, "value", r), c[0] & 3 && o !== (o = f[0][0].badge === f[38]) && $(e, "selected", o);
    },
    d(f) {
      f && j(e), a.d();
    }
  };
}
function mK(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O, x, A, H, D, P, K, ne, z, Z, te, G, Ae, ke;
  return {
    c() {
      e = T("div"), n = T("sl-checkbox"), i = le("Directed"), o = q(), s = T("div"), l = T("sl-color-picker"), f = q(), c = T("span"), c.textContent = "Stroke", u = q(), h = T("sl-input"), m = q(), g = T("sl-select"), _ = T("sl-option"), b = le("straight"), v = q(), M = T("sl-option"), S = le("curved"), k = q(), I = T("sl-option"), L = le("ortho"), W = q(), U = T("sl-select"), O = T("sl-option"), x = le("solid"), H = q(), D = T("sl-option"), P = le("dashed"), ne = q(), z = T("sl-option"), Z = le("dotted"), mi(n, "width", "100%"), $(n, "checked", r = t[0][0].directed), $(l, "format", "hex"), $(l, "size", "small"), $(l, "value", a = t[0][0].stroke), $(l, "label", "Select stroke color"), $(l, "opacity", ""), $(l, "swatches", t[6]), p(c, "class", "title svelte-1vvthkw"), p(s, "class", "edge-stroke svelte-1vvthkw"), $(h, "label", "Weight"), $(h, "type", "number"), $(h, "value", d = t[0][0].weight), $(_, "value", "straight"), $(_, "selected", w = t[0][0].shape === "straight"), $(M, "value", "curved"), $(M, "selected", R = t[0][0].shape === "curved"), $(I, "value", "ortho"), $(I, "selected", V = t[0][0].shape === "ortho"), $(g, "label", "Shape"), $(g, "value", N = t[0][0].shape), $(g, "placeholder", "Select shape"), $(O, "value", "solid"), $(O, "selected", A = t[0][0].strokeType === "solid"), $(D, "value", "dashed"), $(D, "selected", K = t[0][0].strokeType === "dashed"), $(z, "value", "dotted"), $(z, "selected", te = t[0][0].strokeType === "dotted"), $(U, "label", "StrokeType"), $(U, "value", G = t[0][0].strokeType), $(U, "placeholder", "Select strokeType"), p(e, "class", "edge-panel svelte-1vvthkw");
    },
    m(ze, ee) {
      B(ze, e, ee), y(e, n), y(n, i), y(e, o), y(e, s), y(s, l), y(s, f), y(s, c), y(e, u), y(e, h), y(e, m), y(e, g), y(g, _), y(_, b), y(g, v), y(g, M), y(M, S), y(g, k), y(g, I), y(I, L), y(e, W), y(e, U), y(U, O), y(O, x), y(U, H), y(U, D), y(D, P), y(U, ne), y(U, z), y(z, Z), Ae || (ke = [
        X(n, "sl-change", t[22]),
        X(l, "sl-change", t[23]),
        X(h, "sl-change", t[24]),
        X(g, "sl-change", t[25]),
        X(U, "sl-change", t[26])
      ], Ae = !0);
    },
    p(ze, ee) {
      ee[0] & 1 && r !== (r = ze[0][0].directed) && $(n, "checked", r), ee[0] & 1 && a !== (a = ze[0][0].stroke) && $(l, "value", a), ee[0] & 1 && d !== (d = ze[0][0].weight) && $(h, "value", d), ee[0] & 1 && w !== (w = ze[0][0].shape === "straight") && $(_, "selected", w), ee[0] & 1 && R !== (R = ze[0][0].shape === "curved") && $(M, "selected", R), ee[0] & 1 && V !== (V = ze[0][0].shape === "ortho") && $(I, "selected", V), ee[0] & 1 && N !== (N = ze[0][0].shape) && $(g, "value", N), ee[0] & 1 && A !== (A = ze[0][0].strokeType === "solid") && $(O, "selected", A), ee[0] & 1 && K !== (K = ze[0][0].strokeType === "dashed") && $(D, "selected", K), ee[0] & 1 && te !== (te = ze[0][0].strokeType === "dotted") && $(z, "selected", te), ee[0] & 1 && G !== (G = ze[0][0].strokeType) && $(U, "value", G);
    },
    d(ze) {
      ze && j(e), Ae = !1, et(ke);
    }
  };
}
function pK(t) {
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S, R, k, I, L, V, N, W, U, O, x;
  return {
    c() {
      e = T("div"), n = T("div"), i = T("sl-color-picker"), o = q(), s = T("span"), s.textContent = "Fill", l = q(), a = T("div"), f = T("sl-color-picker"), u = q(), h = T("span"), h.textContent = "Border", d = q(), m = T("div"), g = T("sl-color-picker"), b = q(), w = T("span"), w.textContent = "Label", v = q(), M = T("div"), S = T("sl-input"), k = q(), I = T("div"), L = T("sl-input"), N = q(), W = T("sl-input"), $(i, "format", "hex"), $(i, "size", "small"), $(i, "value", r = t[0][0].fill), $(i, "label", "Select fill color"), $(i, "opacity", ""), $(i, "swatches", t[6]), p(s, "class", "svelte-1vvthkw"), p(n, "class", "node-color svelte-1vvthkw"), $(f, "format", "hex"), $(f, "size", "small"), $(f, "value", c = t[0][0].bordercolor), $(f, "label", "Select border color"), $(f, "opacity", ""), $(f, "swatches", t[6]), p(h, "class", "svelte-1vvthkw"), p(a, "class", "node-color svelte-1vvthkw"), $(g, "format", "hex"), $(g, "size", "small"), $(g, "value", _ = t[0][0].labelcolor), $(g, "label", "Select label color"), $(g, "opacity", ""), $(g, "swatches", t[6]), p(w, "class", "svelte-1vvthkw"), p(m, "class", "node-color svelte-1vvthkw"), p(e, "class", "node-colors svelte-1vvthkw"), $(S, "label", "URL of Background Image"), $(S, "type", "url"), $(S, "size", "small"), mi(S, "width", "100%"), $(S, "value", R = t[0][0].backgroundImageURL || ""), p(M, "class", "node-colors svelte-1vvthkw"), $(L, "label", "Label Font Size"), $(L, "type", "number"), $(L, "size", "small"), $(L, "placeholder", "16"), mi(L, "width", "40%"), $(L, "min", "12"), $(L, "max", "64"), $(L, "step", "1"), $(L, "value", V = t[0][0].nodelabelfontsize || t[1].theme.nodelabelfontsize || 16), $(W, "label", "Notes Font Size"), $(W, "type", "number"), $(W, "size", "small"), $(W, "placeholder", "16"), mi(W, "width", "40%"), $(W, "min", "12"), $(W, "max", "48"), $(W, "step", "1"), $(W, "value", U = t[0][0].nodenotesfontsize || t[1].theme.nodenotesfontsize || 16), p(I, "class", "node-colors svelte-1vvthkw");
    },
    m(A, H) {
      B(A, e, H), y(e, n), y(n, i), y(n, o), y(n, s), y(e, l), y(e, a), y(a, f), y(a, u), y(a, h), y(e, d), y(e, m), y(m, g), y(m, b), y(m, w), B(A, v, H), B(A, M, H), y(M, S), B(A, k, H), B(A, I, H), y(I, L), y(I, N), y(I, W), O || (x = [
        X(i, "sl-change", t[16]),
        X(f, "sl-change", t[17]),
        X(g, "sl-change", t[18]),
        X(S, "input", t[19]),
        X(L, "input", t[20]),
        X(W, "input", t[21])
      ], O = !0);
    },
    p(A, H) {
      H[0] & 1 && r !== (r = A[0][0].fill) && $(i, "value", r), H[0] & 1 && c !== (c = A[0][0].bordercolor) && $(f, "value", c), H[0] & 1 && _ !== (_ = A[0][0].labelcolor) && $(g, "value", _), H[0] & 1 && R !== (R = A[0][0].backgroundImageURL || "") && $(S, "value", R), H[0] & 3 && V !== (V = A[0][0].nodelabelfontsize || A[1].theme.nodelabelfontsize || 16) && $(L, "value", V), H[0] & 3 && U !== (U = A[0][0].nodenotesfontsize || A[1].theme.nodenotesfontsize || 16) && $(W, "value", U);
    },
    d(A) {
      A && j(e), A && j(v), A && j(M), A && j(k), A && j(I), O = !1, et(x);
    }
  };
}
function uv(t) {
  let e, n, i, r, o;
  return r = new qJ({
    props: {
      content: {
        json: t[0][0].custom || {}
      },
      onChange: t[8]
    }
  }), {
    c() {
      e = T("div"), n = T("span"), n.innerHTML = "<strong>custom</strong>", i = q(), se(r.$$.fragment), p(e, "class", "row");
    },
    m(s, l) {
      B(s, e, l), y(e, n), y(e, i), re(r, e, null), o = !0;
    },
    p(s, l) {
      const a = {};
      l[0] & 1 && (a.content = {
        json: s[0][0].custom || {}
      }), r.$set(a);
    },
    i(s) {
      o || (C(r.$$.fragment, s), o = !0);
    },
    o(s) {
      E(r.$$.fragment, s), o = !1;
    },
    d(s) {
      s && j(e), oe(r);
    }
  };
}
function hv(t) {
  let e, n, i = Ye(t[0][0].desc) + "", r, o, s, l, a, f, c = t[3], u = [];
  for (let h = 0; h < c.length; h += 1)
    u[h] = _v(Zw(t, c, h));
  return {
    c() {
      e = T("sl-dialog"), n = T("p"), r = q();
      for (let h = 0; h < u.length; h += 1)
        u[h].c();
      o = q(), s = T("sl-button"), s.textContent = "Close", p(n, "class", "itemdesc svelte-1vvthkw"), $(s, "slot", "footer"), $(s, "variant", "primary"), $(e, "label", l = "Literature Review for " + t[0][0].label), mi(e, "--width", "50vw"), $(e, "open", t[2]);
    },
    m(h, d) {
      B(h, e, d), y(e, n), n.innerHTML = i, y(e, r);
      for (let m = 0; m < u.length; m += 1)
        u[m].m(e, null);
      y(e, o), y(e, s), a || (f = [
        X(s, "click", t[27]),
        X(e, "sl-hide", t[28])
      ], a = !0);
    },
    p(h, d) {
      if (d[0] & 1 && i !== (i = Ye(h[0][0].desc) + "") && (n.innerHTML = i), d[0] & 8) {
        c = h[3];
        let m;
        for (m = 0; m < c.length; m += 1) {
          const g = Zw(h, c, m);
          u[m] ? u[m].p(g, d) : (u[m] = _v(g), u[m].c(), u[m].m(e, o));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = c.length;
      }
      d[0] & 1 && l !== (l = "Literature Review for " + h[0][0].label) && $(e, "label", l), d[0] & 4 && $(e, "open", h[2]);
    },
    d(h) {
      h && j(e), zt(u, h), a = !1, et(f);
    }
  };
}
function dv(t) {
  let e, n = Ye(t[29].node.desc) + "";
  return {
    c() {
      e = T("p"), p(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = Ye(i[29].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function mv(t) {
  let e, n = Ye(t[32].node.desc) + "";
  return {
    c() {
      e = T("p"), p(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = Ye(i[32].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function pv(t) {
  let e, n = Ye(t[35].node.desc) + "";
  return {
    c() {
      e = T("p"), p(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      B(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = Ye(i[35].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && j(e);
    }
  };
}
function gv(t) {
  let e, n, i = t[35].node.desc && pv(t);
  return {
    c() {
      e = T("sl-details"), i && i.c(), $(e, "summary", n = t[32].node.label);
    },
    m(r, o) {
      B(r, e, o), i && i.m(e, null);
    },
    p(r, o) {
      r[35].node.desc ? i ? i.p(r, o) : (i = pv(r), i.c(), i.m(e, null)) : i && (i.d(1), i = null), o[0] & 8 && n !== (n = r[32].node.label) && $(e, "summary", n);
    },
    d(r) {
      r && j(e), i && i.d();
    }
  };
}
function bv(t) {
  let e, n, i, r = t[32].node.desc && mv(t), o = t[32].parents, s = [];
  for (let l = 0; l < o.length; l += 1)
    s[l] = gv(ev(t, o, l));
  return {
    c() {
      e = T("sl-details"), r && r.c(), n = q();
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      $(e, "summary", i = t[32].node.label);
    },
    m(l, a) {
      B(l, e, a), r && r.m(e, null), y(e, n);
      for (let f = 0; f < s.length; f += 1)
        s[f].m(e, null);
    },
    p(l, a) {
      if (l[32].node.desc ? r ? r.p(l, a) : (r = mv(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), a[0] & 8) {
        o = l[32].parents;
        let f;
        for (f = 0; f < o.length; f += 1) {
          const c = ev(l, o, f);
          s[f] ? s[f].p(c, a) : (s[f] = gv(c), s[f].c(), s[f].m(e, null));
        }
        for (; f < s.length; f += 1)
          s[f].d(1);
        s.length = o.length;
      }
      a[0] & 8 && i !== (i = l[32].node.label) && $(e, "summary", i);
    },
    d(l) {
      l && j(e), r && r.d(), zt(s, l);
    }
  };
}
function _v(t) {
  let e, n, i, r, o = t[29].node.desc && dv(t), s = t[29].parents, l = [];
  for (let a = 0; a < s.length; a += 1)
    l[a] = bv($w(t, s, a));
  return {
    c() {
      e = T("div"), n = T("sl-details"), o && o.c(), i = q();
      for (let a = 0; a < l.length; a += 1)
        l[a].c();
      $(n, "summary", r = t[29].node.label), $(n, "open", ""), p(e, "class", "details-group-example");
    },
    m(a, f) {
      B(a, e, f), y(e, n), o && o.m(n, null), y(n, i);
      for (let c = 0; c < l.length; c += 1)
        l[c].m(n, null);
    },
    p(a, f) {
      if (a[29].node.desc ? o ? o.p(a, f) : (o = dv(a), o.c(), o.m(n, i)) : o && (o.d(1), o = null), f[0] & 8) {
        s = a[29].parents;
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = $w(a, s, c);
          l[c] ? l[c].p(u, f) : (l[c] = bv(u), l[c].c(), l[c].m(n, null));
        }
        for (; c < l.length; c += 1)
          l[c].d(1);
        l.length = s.length;
      }
      f[0] & 8 && r !== (r = a[29].node.label) && $(n, "summary", r);
    },
    d(a) {
      a && j(e), o && o.d(), zt(l, a);
    }
  };
}
function gK(t) {
  var R;
  let e, n, i = t[0].length == 1 && t[4](), r, o, s, l, a = t[1].customjson && t[0].length == 1 && (t[0][0].kind === "node" || t[0][0].kind === "edge") && t[4](), f, c = t[0].length == 1 && ["node"].includes((R = t[0][0]) == null ? void 0 : R.kind), u, h;
  function d(k, I) {
    var L;
    return I[0] & 1 && (e = null), e == null && (e = !!(k[0].length == 1 && ["node", "edge", "note"].includes((L = k[0][0]) == null ? void 0 : L.kind))), e ? uK : cK;
  }
  let m = d(t, [-1, -1]), g = m(t), _ = i && rv(t);
  function b(k, I) {
    if (I[0] & 1 && (o = null), I[0] & 1 && (s = null), o == null && (o = !!(k[0][0].kind !== "edge" && k[4]())), o)
      return pK;
    if (s == null && (s = !!(k[0][0].kind === "edge" && k[4]())), s)
      return mK;
  }
  let w = b(t, [-1, -1]), v = w && w(t), M = a && uv(t), S = c && hv(t);
  return {
    c() {
      g.c(), n = q(), _ && _.c(), r = q(), v && v.c(), l = q(), M && M.c(), f = q(), S && S.c(), u = Ze();
    },
    m(k, I) {
      g.m(k, I), B(k, n, I), _ && _.m(k, I), B(k, r, I), v && v.m(k, I), B(k, l, I), M && M.m(k, I), B(k, f, I), S && S.m(k, I), B(k, u, I), h = !0;
    },
    p(k, I) {
      var L;
      m === (m = d(k, I)) && g ? g.p(k, I) : (g.d(1), g = m(k), g && (g.c(), g.m(n.parentNode, n))), I[0] & 1 && (i = k[0].length == 1 && k[4]()), i ? _ ? (_.p(k, I), I[0] & 1 && C(_, 1)) : (_ = rv(k), _.c(), C(_, 1), _.m(r.parentNode, r)) : _ && (me(), E(_, 1, 1, () => {
        _ = null;
      }), pe()), w === (w = b(k, I)) && v ? v.p(k, I) : (v && v.d(1), v = w && w(k), v && (v.c(), v.m(l.parentNode, l))), I[0] & 3 && (a = k[1].customjson && k[0].length == 1 && (k[0][0].kind === "node" || k[0][0].kind === "edge") && k[4]()), a ? M ? (M.p(k, I), I[0] & 3 && C(M, 1)) : (M = uv(k), M.c(), C(M, 1), M.m(f.parentNode, f)) : M && (me(), E(M, 1, 1, () => {
        M = null;
      }), pe()), I[0] & 1 && (c = k[0].length == 1 && ["node"].includes((L = k[0][0]) == null ? void 0 : L.kind)), c ? S ? S.p(k, I) : (S = hv(k), S.c(), S.m(u.parentNode, u)) : S && (S.d(1), S = null);
    },
    i(k) {
      h || (C(_), C(M), h = !0);
    },
    o(k) {
      E(_), E(M), h = !1;
    },
    d(k) {
      g.d(k), k && j(n), _ && _.d(k), k && j(r), v && v.d(k), k && j(l), M && M.d(k), k && j(f), S && S.d(k), k && j(u);
    }
  };
}
function bK(t, e, n) {
  let i, { selectedItem: r } = e, { graph: o } = e, { config: s = { mode: "viewonly" } } = e, l = !1;
  function a() {
    return s.mode == "editor";
  }
  const f = Ls(), c = [
    "#d0021bff",
    "#f5a623ff",
    "#bbae0eff",
    "#8b572aff",
    "#7ed321ff",
    "#417505ff",
    "#b00b0bff",
    "#9013feff",
    "#4a90e2ff",
    "#16b591ff",
    "#b8e986ff",
    "#000000ff",
    "#444444ff",
    "#888888ff",
    "#ccccccff",
    "#ffffffff"
  ];
  function u(A, H) {
    H.split("_")[0] == "text" || H.split("_")[0] == "color" || H.split("_")[0] == "url" ? r.forEach((D) => D[H.split("_")[1]] = A.target.value) : H.split("_")[0] == "number" ? r.forEach((D) => D[H.split("_")[1]] = A.target.value === "" ? null : JSON.parse(A.target.value)) : H.split("_")[0] == "checkbox" ? r.forEach((D) => D[H.split("_")[1]] = A.target.checked) : r.forEach((D) => D[H.split("_")[1]] = JSON.parse(A.target.value)), f("graphchanged", o);
  }
  function h(A, H, D) {
    n(0, r[0].custom = A.json, r), f("graphchanged", o);
  }
  const d = (A) => n(2, l = !0), m = (A) => u(A, "text_label"), g = (A) => u(A, "text_notes"), _ = (A) => u(A, "text_desc"), b = (A) => {
    n(0, r[0].tags = A.detail.value, r), f("graphchanged", o);
  }, w = (A) => u(A, "text_badge"), v = (A) => u(A, "color_fill"), M = (A) => u(A, "color_bordercolor"), S = (A) => u(A, "color_labelcolor"), R = (A) => u(A, "url_backgroundImageURL"), k = (A) => u(A, "number_nodelabelfontsize"), I = (A) => u(A, "number_nodenotesfontsize"), L = (A) => u(A, "checkbox_directed"), V = (A) => u(A, "color_stroke"), N = (A) => u(A, "number_weight"), W = (A) => u(A, "text_shape"), U = (A) => u(A, "text_strokeType"), O = (A) => n(2, l = !1), x = (A) => n(2, l = !1);
  return t.$$set = (A) => {
    "selectedItem" in A && n(0, r = A.selectedItem), "graph" in A && n(1, o = A.graph), "config" in A && n(9, s = A.config);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(3, i = Mk(o, r[0], 0));
  }, [
    r,
    o,
    l,
    i,
    a,
    f,
    c,
    u,
    h,
    s,
    d,
    m,
    g,
    _,
    b,
    w,
    v,
    M,
    S,
    R,
    k,
    I,
    L,
    V,
    N,
    W,
    U,
    O,
    x
  ];
}
class _K extends Be {
  constructor(e) {
    super(), je(this, e, bK, gK, It, { selectedItem: 0, graph: 1, config: 9 }, null, [-1, -1]);
  }
}
var yK = { value: () => {
} };
function Zg() {
  for (var t = 0, e = arguments.length, n = {}, i; t < e; ++t) {
    if (!(i = arguments[t] + "") || i in n || /[\s.]/.test(i))
      throw new Error("illegal type: " + i);
    n[i] = [];
  }
  return new jc(n);
}
function jc(t) {
  this._ = t;
}
function wK(t, e) {
  return t.trim().split(/^|\s+/).map(function(n) {
    var i = "", r = n.indexOf(".");
    if (r >= 0 && (i = n.slice(r + 1), n = n.slice(0, r)), n && !e.hasOwnProperty(n))
      throw new Error("unknown type: " + n);
    return { type: n, name: i };
  });
}
jc.prototype = Zg.prototype = {
  constructor: jc,
  on: function(t, e) {
    var n = this._, i = wK(t + "", n), r, o = -1, s = i.length;
    if (arguments.length < 2) {
      for (; ++o < s; )
        if ((r = (t = i[o]).type) && (r = vK(n[r], t.name)))
          return r;
      return;
    }
    if (e != null && typeof e != "function")
      throw new Error("invalid callback: " + e);
    for (; ++o < s; )
      if (r = (t = i[o]).type)
        n[r] = yv(n[r], t.name, e);
      else if (e == null)
        for (r in n)
          n[r] = yv(n[r], t.name, null);
    return this;
  },
  copy: function() {
    var t = {}, e = this._;
    for (var n in e)
      t[n] = e[n].slice();
    return new jc(t);
  },
  call: function(t, e) {
    if ((r = arguments.length - 2) > 0)
      for (var n = new Array(r), i = 0, r, o; i < r; ++i)
        n[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (o = this._[t], i = 0, r = o.length; i < r; ++i)
      o[i].value.apply(e, n);
  },
  apply: function(t, e, n) {
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (var i = this._[t], r = 0, o = i.length; r < o; ++r)
      i[r].value.apply(e, n);
  }
};
function vK(t, e) {
  for (var n = 0, i = t.length, r; n < i; ++n)
    if ((r = t[n]).name === e)
      return r.value;
}
function yv(t, e, n) {
  for (var i = 0, r = t.length; i < r; ++i)
    if (t[i].name === e) {
      t[i] = yK, t = t.slice(0, i).concat(t.slice(i + 1));
      break;
    }
  return n != null && t.push({ name: e, value: n }), t;
}
var mp = "http://www.w3.org/1999/xhtml";
const wv = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: mp,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function Uh(t) {
  var e = t += "", n = e.indexOf(":");
  return n >= 0 && (e = t.slice(0, n)) !== "xmlns" && (t = t.slice(n + 1)), wv.hasOwnProperty(e) ? { space: wv[e], local: t } : t;
}
function kK(t) {
  return function() {
    var e = this.ownerDocument, n = this.namespaceURI;
    return n === mp && e.documentElement.namespaceURI === mp ? e.createElement(t) : e.createElementNS(n, t);
  };
}
function CK(t) {
  return function() {
    return this.ownerDocument.createElementNS(t.space, t.local);
  };
}
function H5(t) {
  var e = Uh(t);
  return (e.local ? CK : kK)(e);
}
function SK() {
}
function $g(t) {
  return t == null ? SK : function() {
    return this.querySelector(t);
  };
}
function MK(t) {
  typeof t != "function" && (t = $g(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = new Array(s), a, f, c = 0; c < s; ++c)
      (a = o[c]) && (f = t.call(a, a.__data__, c, o)) && ("__data__" in a && (f.__data__ = a.__data__), l[c] = f);
  return new Vi(i, this._parents);
}
function AK(t) {
  return t == null ? [] : Array.isArray(t) ? t : Array.from(t);
}
function OK() {
  return [];
}
function W5(t) {
  return t == null ? OK : function() {
    return this.querySelectorAll(t);
  };
}
function TK(t) {
  return function() {
    return AK(t.apply(this, arguments));
  };
}
function EK(t) {
  typeof t == "function" ? t = TK(t) : t = W5(t);
  for (var e = this._groups, n = e.length, i = [], r = [], o = 0; o < n; ++o)
    for (var s = e[o], l = s.length, a, f = 0; f < l; ++f)
      (a = s[f]) && (i.push(t.call(a, a.__data__, f, s)), r.push(a));
  return new Vi(i, r);
}
function U5(t) {
  return function() {
    return this.matches(t);
  };
}
function q5(t) {
  return function(e) {
    return e.matches(t);
  };
}
var PK = Array.prototype.find;
function RK(t) {
  return function() {
    return PK.call(this.children, t);
  };
}
function IK() {
  return this.firstElementChild;
}
function NK(t) {
  return this.select(t == null ? IK : RK(typeof t == "function" ? t : q5(t)));
}
var DK = Array.prototype.filter;
function jK() {
  return Array.from(this.children);
}
function BK(t) {
  return function() {
    return DK.call(this.children, t);
  };
}
function LK(t) {
  return this.selectAll(t == null ? jK : BK(typeof t == "function" ? t : q5(t)));
}
function xK(t) {
  typeof t != "function" && (t = U5(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = [], a, f = 0; f < s; ++f)
      (a = o[f]) && t.call(a, a.__data__, f, o) && l.push(a);
  return new Vi(i, this._parents);
}
function J5(t) {
  return new Array(t.length);
}
function zK() {
  return new Vi(this._enter || this._groups.map(J5), this._parents);
}
function Fu(t, e) {
  this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e;
}
Fu.prototype = {
  constructor: Fu,
  appendChild: function(t) {
    return this._parent.insertBefore(t, this._next);
  },
  insertBefore: function(t, e) {
    return this._parent.insertBefore(t, e);
  },
  querySelector: function(t) {
    return this._parent.querySelector(t);
  },
  querySelectorAll: function(t) {
    return this._parent.querySelectorAll(t);
  }
};
function VK(t) {
  return function() {
    return t;
  };
}
function FK(t, e, n, i, r, o) {
  for (var s = 0, l, a = e.length, f = o.length; s < f; ++s)
    (l = e[s]) ? (l.__data__ = o[s], i[s] = l) : n[s] = new Fu(t, o[s]);
  for (; s < a; ++s)
    (l = e[s]) && (r[s] = l);
}
function HK(t, e, n, i, r, o, s) {
  var l, a, f = /* @__PURE__ */ new Map(), c = e.length, u = o.length, h = new Array(c), d;
  for (l = 0; l < c; ++l)
    (a = e[l]) && (h[l] = d = s.call(a, a.__data__, l, e) + "", f.has(d) ? r[l] = a : f.set(d, a));
  for (l = 0; l < u; ++l)
    d = s.call(t, o[l], l, o) + "", (a = f.get(d)) ? (i[l] = a, a.__data__ = o[l], f.delete(d)) : n[l] = new Fu(t, o[l]);
  for (l = 0; l < c; ++l)
    (a = e[l]) && f.get(h[l]) === a && (r[l] = a);
}
function WK(t) {
  return t.__data__;
}
function UK(t, e) {
  if (!arguments.length)
    return Array.from(this, WK);
  var n = e ? HK : FK, i = this._parents, r = this._groups;
  typeof t != "function" && (t = VK(t));
  for (var o = r.length, s = new Array(o), l = new Array(o), a = new Array(o), f = 0; f < o; ++f) {
    var c = i[f], u = r[f], h = u.length, d = qK(t.call(c, c && c.__data__, f, i)), m = d.length, g = l[f] = new Array(m), _ = s[f] = new Array(m), b = a[f] = new Array(h);
    n(c, u, g, _, b, d, e);
    for (var w = 0, v = 0, M, S; w < m; ++w)
      if (M = g[w]) {
        for (w >= v && (v = w + 1); !(S = _[v]) && ++v < m; )
          ;
        M._next = S || null;
      }
  }
  return s = new Vi(s, i), s._enter = l, s._exit = a, s;
}
function qK(t) {
  return typeof t == "object" && "length" in t ? t : Array.from(t);
}
function JK() {
  return new Vi(this._exit || this._groups.map(J5), this._parents);
}
function KK(t, e, n) {
  var i = this.enter(), r = this, o = this.exit();
  return typeof t == "function" ? (i = t(i), i && (i = i.selection())) : i = i.append(t + ""), e != null && (r = e(r), r && (r = r.selection())), n == null ? o.remove() : n(o), i && r ? i.merge(r).order() : r;
}
function GK(t) {
  for (var e = t.selection ? t.selection() : t, n = this._groups, i = e._groups, r = n.length, o = i.length, s = Math.min(r, o), l = new Array(r), a = 0; a < s; ++a)
    for (var f = n[a], c = i[a], u = f.length, h = l[a] = new Array(u), d, m = 0; m < u; ++m)
      (d = f[m] || c[m]) && (h[m] = d);
  for (; a < r; ++a)
    l[a] = n[a];
  return new Vi(l, this._parents);
}
function XK() {
  for (var t = this._groups, e = -1, n = t.length; ++e < n; )
    for (var i = t[e], r = i.length - 1, o = i[r], s; --r >= 0; )
      (s = i[r]) && (o && s.compareDocumentPosition(o) ^ 4 && o.parentNode.insertBefore(s, o), o = s);
  return this;
}
function QK(t) {
  t || (t = YK);
  function e(u, h) {
    return u && h ? t(u.__data__, h.__data__) : !u - !h;
  }
  for (var n = this._groups, i = n.length, r = new Array(i), o = 0; o < i; ++o) {
    for (var s = n[o], l = s.length, a = r[o] = new Array(l), f, c = 0; c < l; ++c)
      (f = s[c]) && (a[c] = f);
    a.sort(e);
  }
  return new Vi(r, this._parents).order();
}
function YK(t, e) {
  return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function ZK() {
  var t = arguments[0];
  return arguments[0] = this, t.apply(null, arguments), this;
}
function $K() {
  return Array.from(this);
}
function eG() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, o = i.length; r < o; ++r) {
      var s = i[r];
      if (s)
        return s;
    }
  return null;
}
function tG() {
  let t = 0;
  for (const e of this)
    ++t;
  return t;
}
function nG() {
  return !this.node();
}
function iG(t) {
  for (var e = this._groups, n = 0, i = e.length; n < i; ++n)
    for (var r = e[n], o = 0, s = r.length, l; o < s; ++o)
      (l = r[o]) && t.call(l, l.__data__, o, r);
  return this;
}
function rG(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function oG(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function sG(t, e) {
  return function() {
    this.setAttribute(t, e);
  };
}
function lG(t, e) {
  return function() {
    this.setAttributeNS(t.space, t.local, e);
  };
}
function aG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttribute(t) : this.setAttribute(t, n);
  };
}
function fG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n);
  };
}
function cG(t, e) {
  var n = Uh(t);
  if (arguments.length < 2) {
    var i = this.node();
    return n.local ? i.getAttributeNS(n.space, n.local) : i.getAttribute(n);
  }
  return this.each((e == null ? n.local ? oG : rG : typeof e == "function" ? n.local ? fG : aG : n.local ? lG : sG)(n, e));
}
function K5(t) {
  return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView;
}
function uG(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function hG(t, e, n) {
  return function() {
    this.style.setProperty(t, e, n);
  };
}
function dG(t, e, n) {
  return function() {
    var i = e.apply(this, arguments);
    i == null ? this.style.removeProperty(t) : this.style.setProperty(t, i, n);
  };
}
function mG(t, e, n) {
  return arguments.length > 1 ? this.each((e == null ? uG : typeof e == "function" ? dG : hG)(t, e, n ?? "")) : Bl(this.node(), t);
}
function Bl(t, e) {
  return t.style.getPropertyValue(e) || K5(t).getComputedStyle(t, null).getPropertyValue(e);
}
function pG(t) {
  return function() {
    delete this[t];
  };
}
function gG(t, e) {
  return function() {
    this[t] = e;
  };
}
function bG(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? delete this[t] : this[t] = n;
  };
}
function _G(t, e) {
  return arguments.length > 1 ? this.each((e == null ? pG : typeof e == "function" ? bG : gG)(t, e)) : this.node()[t];
}
function G5(t) {
  return t.trim().split(/^|\s+/);
}
function e1(t) {
  return t.classList || new X5(t);
}
function X5(t) {
  this._node = t, this._names = G5(t.getAttribute("class") || "");
}
X5.prototype = {
  add: function(t) {
    var e = this._names.indexOf(t);
    e < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t) {
    var e = this._names.indexOf(t);
    e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t) {
    return this._names.indexOf(t) >= 0;
  }
};
function Q5(t, e) {
  for (var n = e1(t), i = -1, r = e.length; ++i < r; )
    n.add(e[i]);
}
function Y5(t, e) {
  for (var n = e1(t), i = -1, r = e.length; ++i < r; )
    n.remove(e[i]);
}
function yG(t) {
  return function() {
    Q5(this, t);
  };
}
function wG(t) {
  return function() {
    Y5(this, t);
  };
}
function vG(t, e) {
  return function() {
    (e.apply(this, arguments) ? Q5 : Y5)(this, t);
  };
}
function kG(t, e) {
  var n = G5(t + "");
  if (arguments.length < 2) {
    for (var i = e1(this.node()), r = -1, o = n.length; ++r < o; )
      if (!i.contains(n[r]))
        return !1;
    return !0;
  }
  return this.each((typeof e == "function" ? vG : e ? yG : wG)(n, e));
}
function CG() {
  this.textContent = "";
}
function SG(t) {
  return function() {
    this.textContent = t;
  };
}
function MG(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.textContent = e ?? "";
  };
}
function AG(t) {
  return arguments.length ? this.each(t == null ? CG : (typeof t == "function" ? MG : SG)(t)) : this.node().textContent;
}
function OG() {
  this.innerHTML = "";
}
function TG(t) {
  return function() {
    this.innerHTML = t;
  };
}
function EG(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.innerHTML = e ?? "";
  };
}
function PG(t) {
  return arguments.length ? this.each(t == null ? OG : (typeof t == "function" ? EG : TG)(t)) : this.node().innerHTML;
}
function RG() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function IG() {
  return this.each(RG);
}
function NG() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function DG() {
  return this.each(NG);
}
function jG(t) {
  var e = typeof t == "function" ? t : H5(t);
  return this.select(function() {
    return this.appendChild(e.apply(this, arguments));
  });
}
function BG() {
  return null;
}
function LG(t, e) {
  var n = typeof t == "function" ? t : H5(t), i = e == null ? BG : typeof e == "function" ? e : $g(e);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), i.apply(this, arguments) || null);
  });
}
function xG() {
  var t = this.parentNode;
  t && t.removeChild(this);
}
function zG() {
  return this.each(xG);
}
function VG() {
  var t = this.cloneNode(!1), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function FG() {
  var t = this.cloneNode(!0), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function HG(t) {
  return this.select(t ? FG : VG);
}
function WG(t) {
  return arguments.length ? this.property("__data__", t) : this.node().__data__;
}
function UG(t) {
  return function(e) {
    t.call(this, e, this.__data__);
  };
}
function qG(t) {
  return t.trim().split(/^|\s+/).map(function(e) {
    var n = "", i = e.indexOf(".");
    return i >= 0 && (n = e.slice(i + 1), e = e.slice(0, i)), { type: e, name: n };
  });
}
function JG(t) {
  return function() {
    var e = this.__on;
    if (e) {
      for (var n = 0, i = -1, r = e.length, o; n < r; ++n)
        o = e[n], (!t.type || o.type === t.type) && o.name === t.name ? this.removeEventListener(o.type, o.listener, o.options) : e[++i] = o;
      ++i ? e.length = i : delete this.__on;
    }
  };
}
function KG(t, e, n) {
  return function() {
    var i = this.__on, r, o = UG(e);
    if (i) {
      for (var s = 0, l = i.length; s < l; ++s)
        if ((r = i[s]).type === t.type && r.name === t.name) {
          this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = o, r.options = n), r.value = e;
          return;
        }
    }
    this.addEventListener(t.type, o, n), r = { type: t.type, name: t.name, value: e, listener: o, options: n }, i ? i.push(r) : this.__on = [r];
  };
}
function GG(t, e, n) {
  var i = qG(t + ""), r, o = i.length, s;
  if (arguments.length < 2) {
    var l = this.node().__on;
    if (l) {
      for (var a = 0, f = l.length, c; a < f; ++a)
        for (r = 0, c = l[a]; r < o; ++r)
          if ((s = i[r]).type === c.type && s.name === c.name)
            return c.value;
    }
    return;
  }
  for (l = e ? KG : JG, r = 0; r < o; ++r)
    this.each(l(i[r], e, n));
  return this;
}
function Z5(t, e, n) {
  var i = K5(t), r = i.CustomEvent;
  typeof r == "function" ? r = new r(e, n) : (r = i.document.createEvent("Event"), n ? (r.initEvent(e, n.bubbles, n.cancelable), r.detail = n.detail) : r.initEvent(e, !1, !1)), t.dispatchEvent(r);
}
function XG(t, e) {
  return function() {
    return Z5(this, t, e);
  };
}
function QG(t, e) {
  return function() {
    return Z5(this, t, e.apply(this, arguments));
  };
}
function YG(t, e) {
  return this.each((typeof e == "function" ? QG : XG)(t, e));
}
function* ZG() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, o = i.length, s; r < o; ++r)
      (s = i[r]) && (yield s);
}
var $5 = [null];
function Vi(t, e) {
  this._groups = t, this._parents = e;
}
function kf() {
  return new Vi([[document.documentElement]], $5);
}
function $G() {
  return this;
}
Vi.prototype = kf.prototype = {
  constructor: Vi,
  select: MK,
  selectAll: EK,
  selectChild: NK,
  selectChildren: LK,
  filter: xK,
  data: UK,
  enter: zK,
  exit: JK,
  join: KK,
  merge: GK,
  selection: $G,
  order: XK,
  sort: QK,
  call: ZK,
  nodes: $K,
  node: eG,
  size: tG,
  empty: nG,
  each: iG,
  attr: cG,
  style: mG,
  property: _G,
  classed: kG,
  text: AG,
  html: PG,
  raise: IG,
  lower: DG,
  append: jG,
  insert: LG,
  remove: zG,
  clone: HG,
  datum: WG,
  on: GG,
  dispatch: YG,
  [Symbol.iterator]: ZG
};
function fr(t) {
  return typeof t == "string" ? new Vi([[document.querySelector(t)]], [document.documentElement]) : new Vi([[t]], $5);
}
function eX(t) {
  let e;
  for (; e = t.sourceEvent; )
    t = e;
  return t;
}
function hs(t, e) {
  if (t = eX(t), e === void 0 && (e = t.currentTarget), e) {
    var n = e.ownerSVGElement || e;
    if (n.createSVGPoint) {
      var i = n.createSVGPoint();
      return i.x = t.clientX, i.y = t.clientY, i = i.matrixTransform(e.getScreenCTM().inverse()), [i.x, i.y];
    }
    if (e.getBoundingClientRect) {
      var r = e.getBoundingClientRect();
      return [t.clientX - r.left - e.clientLeft, t.clientY - r.top - e.clientTop];
    }
  }
  return [t.pageX, t.pageY];
}
const pp = { capture: !0, passive: !1 };
function gp(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function tX(t) {
  var e = t.document.documentElement, n = fr(t).on("dragstart.drag", gp, pp);
  "onselectstart" in e ? n.on("selectstart.drag", gp, pp) : (e.__noselect = e.style.MozUserSelect, e.style.MozUserSelect = "none");
}
function nX(t, e) {
  var n = t.document.documentElement, i = fr(t).on("dragstart.drag", null);
  e && (i.on("click.drag", gp, pp), setTimeout(function() {
    i.on("click.drag", null);
  }, 0)), "onselectstart" in n ? i.on("selectstart.drag", null) : (n.style.MozUserSelect = n.__noselect, delete n.__noselect);
}
function t1(t, e, n) {
  t.prototype = e.prototype = n, n.constructor = t;
}
function e6(t, e) {
  var n = Object.create(t.prototype);
  for (var i in e)
    n[i] = e[i];
  return n;
}
function Cf() {
}
var ef = 0.7, Hu = 1 / ef, dl = "\\s*([+-]?\\d+)\\s*", tf = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", Wr = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", iX = /^#([0-9a-f]{3,8})$/, rX = new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`), oX = new RegExp(`^rgb\\(${Wr},${Wr},${Wr}\\)$`), sX = new RegExp(`^rgba\\(${dl},${dl},${dl},${tf}\\)$`), lX = new RegExp(`^rgba\\(${Wr},${Wr},${Wr},${tf}\\)$`), aX = new RegExp(`^hsl\\(${tf},${Wr},${Wr}\\)$`), fX = new RegExp(`^hsla\\(${tf},${Wr},${Wr},${tf}\\)$`), vv = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
t1(Cf, nf, {
  copy(t) {
    return Object.assign(new this.constructor(), this, t);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: kv,
  formatHex: kv,
  formatHex8: cX,
  formatHsl: uX,
  formatRgb: Cv,
  toString: Cv
});
function kv() {
  return this.rgb().formatHex();
}
function cX() {
  return this.rgb().formatHex8();
}
function uX() {
  return t6(this).formatHsl();
}
function Cv() {
  return this.rgb().formatRgb();
}
function nf(t) {
  var e, n;
  return t = (t + "").trim().toLowerCase(), (e = iX.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), n === 6 ? Sv(e) : n === 3 ? new Mi(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, (e & 15) << 4 | e & 15, 1) : n === 8 ? dc(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (e & 255) / 255) : n === 4 ? dc(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, ((e & 15) << 4 | e & 15) / 255) : null) : (e = rX.exec(t)) ? new Mi(e[1], e[2], e[3], 1) : (e = oX.exec(t)) ? new Mi(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, 1) : (e = sX.exec(t)) ? dc(e[1], e[2], e[3], e[4]) : (e = lX.exec(t)) ? dc(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, e[4]) : (e = aX.exec(t)) ? Ov(e[1], e[2] / 100, e[3] / 100, 1) : (e = fX.exec(t)) ? Ov(e[1], e[2] / 100, e[3] / 100, e[4]) : vv.hasOwnProperty(t) ? Sv(vv[t]) : t === "transparent" ? new Mi(NaN, NaN, NaN, 0) : null;
}
function Sv(t) {
  return new Mi(t >> 16 & 255, t >> 8 & 255, t & 255, 1);
}
function dc(t, e, n, i) {
  return i <= 0 && (t = e = n = NaN), new Mi(t, e, n, i);
}
function hX(t) {
  return t instanceof Cf || (t = nf(t)), t ? (t = t.rgb(), new Mi(t.r, t.g, t.b, t.opacity)) : new Mi();
}
function bp(t, e, n, i) {
  return arguments.length === 1 ? hX(t) : new Mi(t, e, n, i ?? 1);
}
function Mi(t, e, n, i) {
  this.r = +t, this.g = +e, this.b = +n, this.opacity = +i;
}
t1(Mi, bp, e6(Cf, {
  brighter(t) {
    return t = t == null ? Hu : Math.pow(Hu, t), new Mi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? ef : Math.pow(ef, t), new Mi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Mi(As(this.r), As(this.g), As(this.b), Wu(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: Mv,
  formatHex: Mv,
  formatHex8: dX,
  formatRgb: Av,
  toString: Av
}));
function Mv() {
  return `#${vs(this.r)}${vs(this.g)}${vs(this.b)}`;
}
function dX() {
  return `#${vs(this.r)}${vs(this.g)}${vs(this.b)}${vs((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function Av() {
  const t = Wu(this.opacity);
  return `${t === 1 ? "rgb(" : "rgba("}${As(this.r)}, ${As(this.g)}, ${As(this.b)}${t === 1 ? ")" : `, ${t})`}`;
}
function Wu(t) {
  return isNaN(t) ? 1 : Math.max(0, Math.min(1, t));
}
function As(t) {
  return Math.max(0, Math.min(255, Math.round(t) || 0));
}
function vs(t) {
  return t = As(t), (t < 16 ? "0" : "") + t.toString(16);
}
function Ov(t, e, n, i) {
  return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new cr(t, e, n, i);
}
function t6(t) {
  if (t instanceof cr)
    return new cr(t.h, t.s, t.l, t.opacity);
  if (t instanceof Cf || (t = nf(t)), !t)
    return new cr();
  if (t instanceof cr)
    return t;
  t = t.rgb();
  var e = t.r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), o = Math.max(e, n, i), s = NaN, l = o - r, a = (o + r) / 2;
  return l ? (e === o ? s = (n - i) / l + (n < i) * 6 : n === o ? s = (i - e) / l + 2 : s = (e - n) / l + 4, l /= a < 0.5 ? o + r : 2 - o - r, s *= 60) : l = a > 0 && a < 1 ? 0 : s, new cr(s, l, a, t.opacity);
}
function mX(t, e, n, i) {
  return arguments.length === 1 ? t6(t) : new cr(t, e, n, i ?? 1);
}
function cr(t, e, n, i) {
  this.h = +t, this.s = +e, this.l = +n, this.opacity = +i;
}
t1(cr, mX, e6(Cf, {
  brighter(t) {
    return t = t == null ? Hu : Math.pow(Hu, t), new cr(this.h, this.s, this.l * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? ef : Math.pow(ef, t), new cr(this.h, this.s, this.l * t, this.opacity);
  },
  rgb() {
    var t = this.h % 360 + (this.h < 0) * 360, e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < 0.5 ? n : 1 - n) * e, r = 2 * n - i;
    return new Mi(
      Wd(t >= 240 ? t - 240 : t + 120, r, i),
      Wd(t, r, i),
      Wd(t < 120 ? t + 240 : t - 120, r, i),
      this.opacity
    );
  },
  clamp() {
    return new cr(Tv(this.h), mc(this.s), mc(this.l), Wu(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t = Wu(this.opacity);
    return `${t === 1 ? "hsl(" : "hsla("}${Tv(this.h)}, ${mc(this.s) * 100}%, ${mc(this.l) * 100}%${t === 1 ? ")" : `, ${t})`}`;
  }
}));
function Tv(t) {
  return t = (t || 0) % 360, t < 0 ? t + 360 : t;
}
function mc(t) {
  return Math.max(0, Math.min(1, t || 0));
}
function Wd(t, e, n) {
  return (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) * 255;
}
const n6 = (t) => () => t;
function pX(t, e) {
  return function(n) {
    return t + n * e;
  };
}
function gX(t, e, n) {
  return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function(i) {
    return Math.pow(t + i * e, n);
  };
}
function bX(t) {
  return (t = +t) == 1 ? i6 : function(e, n) {
    return n - e ? gX(e, n, t) : n6(isNaN(e) ? n : e);
  };
}
function i6(t, e) {
  var n = e - t;
  return n ? pX(t, n) : n6(isNaN(t) ? e : t);
}
const Ev = function t(e) {
  var n = bX(e);
  function i(r, o) {
    var s = n((r = bp(r)).r, (o = bp(o)).r), l = n(r.g, o.g), a = n(r.b, o.b), f = i6(r.opacity, o.opacity);
    return function(c) {
      return r.r = s(c), r.g = l(c), r.b = a(c), r.opacity = f(c), r + "";
    };
  }
  return i.gamma = t, i;
}(1);
function To(t, e) {
  return t = +t, e = +e, function(n) {
    return t * (1 - n) + e * n;
  };
}
var _p = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Ud = new RegExp(_p.source, "g");
function _X(t) {
  return function() {
    return t;
  };
}
function yX(t) {
  return function(e) {
    return t(e) + "";
  };
}
function wX(t, e) {
  var n = _p.lastIndex = Ud.lastIndex = 0, i, r, o, s = -1, l = [], a = [];
  for (t = t + "", e = e + ""; (i = _p.exec(t)) && (r = Ud.exec(e)); )
    (o = r.index) > n && (o = e.slice(n, o), l[s] ? l[s] += o : l[++s] = o), (i = i[0]) === (r = r[0]) ? l[s] ? l[s] += r : l[++s] = r : (l[++s] = null, a.push({ i: s, x: To(i, r) })), n = Ud.lastIndex;
  return n < e.length && (o = e.slice(n), l[s] ? l[s] += o : l[++s] = o), l.length < 2 ? a[0] ? yX(a[0].x) : _X(e) : (e = a.length, function(f) {
    for (var c = 0, u; c < e; ++c)
      l[(u = a[c]).i] = u.x(f);
    return l.join("");
  });
}
var Pv = 180 / Math.PI, yp = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function r6(t, e, n, i, r, o) {
  var s, l, a;
  return (s = Math.sqrt(t * t + e * e)) && (t /= s, e /= s), (a = t * n + e * i) && (n -= t * a, i -= e * a), (l = Math.sqrt(n * n + i * i)) && (n /= l, i /= l, a /= l), t * i < e * n && (t = -t, e = -e, a = -a, s = -s), {
    translateX: r,
    translateY: o,
    rotate: Math.atan2(e, t) * Pv,
    skewX: Math.atan(a) * Pv,
    scaleX: s,
    scaleY: l
  };
}
var pc;
function vX(t) {
  const e = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t + "");
  return e.isIdentity ? yp : r6(e.a, e.b, e.c, e.d, e.e, e.f);
}
function kX(t) {
  return t == null || (pc || (pc = document.createElementNS("http://www.w3.org/2000/svg", "g")), pc.setAttribute("transform", t), !(t = pc.transform.baseVal.consolidate())) ? yp : (t = t.matrix, r6(t.a, t.b, t.c, t.d, t.e, t.f));
}
function o6(t, e, n, i) {
  function r(f) {
    return f.length ? f.pop() + " " : "";
  }
  function o(f, c, u, h, d, m) {
    if (f !== u || c !== h) {
      var g = d.push("translate(", null, e, null, n);
      m.push({ i: g - 4, x: To(f, u) }, { i: g - 2, x: To(c, h) });
    } else
      (u || h) && d.push("translate(" + u + e + h + n);
  }
  function s(f, c, u, h) {
    f !== c ? (f - c > 180 ? c += 360 : c - f > 180 && (f += 360), h.push({ i: u.push(r(u) + "rotate(", null, i) - 2, x: To(f, c) })) : c && u.push(r(u) + "rotate(" + c + i);
  }
  function l(f, c, u, h) {
    f !== c ? h.push({ i: u.push(r(u) + "skewX(", null, i) - 2, x: To(f, c) }) : c && u.push(r(u) + "skewX(" + c + i);
  }
  function a(f, c, u, h, d, m) {
    if (f !== u || c !== h) {
      var g = d.push(r(d) + "scale(", null, ",", null, ")");
      m.push({ i: g - 4, x: To(f, u) }, { i: g - 2, x: To(c, h) });
    } else
      (u !== 1 || h !== 1) && d.push(r(d) + "scale(" + u + "," + h + ")");
  }
  return function(f, c) {
    var u = [], h = [];
    return f = t(f), c = t(c), o(f.translateX, f.translateY, c.translateX, c.translateY, u, h), s(f.rotate, c.rotate, u, h), l(f.skewX, c.skewX, u, h), a(f.scaleX, f.scaleY, c.scaleX, c.scaleY, u, h), f = c = null, function(d) {
      for (var m = -1, g = h.length, _; ++m < g; )
        u[(_ = h[m]).i] = _.x(d);
      return u.join("");
    };
  };
}
var CX = o6(vX, "px, ", "px)", "deg)"), SX = o6(kX, ", ", ")", ")"), MX = 1e-12;
function Rv(t) {
  return ((t = Math.exp(t)) + 1 / t) / 2;
}
function AX(t) {
  return ((t = Math.exp(t)) - 1 / t) / 2;
}
function OX(t) {
  return ((t = Math.exp(2 * t)) - 1) / (t + 1);
}
const TX = function t(e, n, i) {
  function r(o, s) {
    var l = o[0], a = o[1], f = o[2], c = s[0], u = s[1], h = s[2], d = c - l, m = u - a, g = d * d + m * m, _, b;
    if (g < MX)
      b = Math.log(h / f) / e, _ = function(k) {
        return [
          l + k * d,
          a + k * m,
          f * Math.exp(e * k * b)
        ];
      };
    else {
      var w = Math.sqrt(g), v = (h * h - f * f + i * g) / (2 * f * n * w), M = (h * h - f * f - i * g) / (2 * h * n * w), S = Math.log(Math.sqrt(v * v + 1) - v), R = Math.log(Math.sqrt(M * M + 1) - M);
      b = (R - S) / e, _ = function(k) {
        var I = k * b, L = Rv(S), V = f / (n * w) * (L * OX(e * I + S) - AX(S));
        return [
          l + V * d,
          a + V * m,
          f * L / Rv(e * I + S)
        ];
      };
    }
    return _.duration = b * 1e3 * e / Math.SQRT2, _;
  }
  return r.rho = function(o) {
    var s = Math.max(1e-3, +o), l = s * s, a = l * l;
    return t(s, l, a);
  }, r;
}(Math.SQRT2, 2, 4);
var Ll = 0, ua = 0, ia = 0, s6 = 1e3, Uu, ha, qu = 0, Bs = 0, qh = 0, rf = typeof performance == "object" && performance.now ? performance : Date, l6 = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t) {
  setTimeout(t, 17);
};
function n1() {
  return Bs || (l6(EX), Bs = rf.now() + qh);
}
function EX() {
  Bs = 0;
}
function Ju() {
  this._call = this._time = this._next = null;
}
Ju.prototype = a6.prototype = {
  constructor: Ju,
  restart: function(t, e, n) {
    if (typeof t != "function")
      throw new TypeError("callback is not a function");
    n = (n == null ? n1() : +n) + (e == null ? 0 : +e), !this._next && ha !== this && (ha ? ha._next = this : Uu = this, ha = this), this._call = t, this._time = n, wp();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, wp());
  }
};
function a6(t, e, n) {
  var i = new Ju();
  return i.restart(t, e, n), i;
}
function PX() {
  n1(), ++Ll;
  for (var t = Uu, e; t; )
    (e = Bs - t._time) >= 0 && t._call.call(void 0, e), t = t._next;
  --Ll;
}
function Iv() {
  Bs = (qu = rf.now()) + qh, Ll = ua = 0;
  try {
    PX();
  } finally {
    Ll = 0, IX(), Bs = 0;
  }
}
function RX() {
  var t = rf.now(), e = t - qu;
  e > s6 && (qh -= e, qu = t);
}
function IX() {
  for (var t, e = Uu, n, i = 1 / 0; e; )
    e._call ? (i > e._time && (i = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : Uu = n);
  ha = t, wp(i);
}
function wp(t) {
  if (!Ll) {
    ua && (ua = clearTimeout(ua));
    var e = t - Bs;
    e > 24 ? (t < 1 / 0 && (ua = setTimeout(Iv, t - rf.now() - qh)), ia && (ia = clearInterval(ia))) : (ia || (qu = rf.now(), ia = setInterval(RX, s6)), Ll = 1, l6(Iv));
  }
}
function Nv(t, e, n) {
  var i = new Ju();
  return e = e == null ? 0 : +e, i.restart((r) => {
    i.stop(), t(r + e);
  }, e, n), i;
}
var NX = Zg("start", "end", "cancel", "interrupt"), DX = [], f6 = 0, Dv = 1, vp = 2, Bc = 3, jv = 4, kp = 5, Lc = 6;
function Jh(t, e, n, i, r, o) {
  var s = t.__transition;
  if (!s)
    t.__transition = {};
  else if (n in s)
    return;
  jX(t, n, {
    name: e,
    index: i,
    group: r,
    on: NX,
    tween: DX,
    time: o.time,
    delay: o.delay,
    duration: o.duration,
    ease: o.ease,
    timer: null,
    state: f6
  });
}
function i1(t, e) {
  var n = kr(t, e);
  if (n.state > f6)
    throw new Error("too late; already scheduled");
  return n;
}
function eo(t, e) {
  var n = kr(t, e);
  if (n.state > Bc)
    throw new Error("too late; already running");
  return n;
}
function kr(t, e) {
  var n = t.__transition;
  if (!n || !(n = n[e]))
    throw new Error("transition not found");
  return n;
}
function jX(t, e, n) {
  var i = t.__transition, r;
  i[e] = n, n.timer = a6(o, 0, n.time);
  function o(f) {
    n.state = Dv, n.timer.restart(s, n.delay, n.time), n.delay <= f && s(f - n.delay);
  }
  function s(f) {
    var c, u, h, d;
    if (n.state !== Dv)
      return a();
    for (c in i)
      if (d = i[c], d.name === n.name) {
        if (d.state === Bc)
          return Nv(s);
        d.state === jv ? (d.state = Lc, d.timer.stop(), d.on.call("interrupt", t, t.__data__, d.index, d.group), delete i[c]) : +c < e && (d.state = Lc, d.timer.stop(), d.on.call("cancel", t, t.__data__, d.index, d.group), delete i[c]);
      }
    if (Nv(function() {
      n.state === Bc && (n.state = jv, n.timer.restart(l, n.delay, n.time), l(f));
    }), n.state = vp, n.on.call("start", t, t.__data__, n.index, n.group), n.state === vp) {
      for (n.state = Bc, r = new Array(h = n.tween.length), c = 0, u = -1; c < h; ++c)
        (d = n.tween[c].value.call(t, t.__data__, n.index, n.group)) && (r[++u] = d);
      r.length = u + 1;
    }
  }
  function l(f) {
    for (var c = f < n.duration ? n.ease.call(null, f / n.duration) : (n.timer.restart(a), n.state = kp, 1), u = -1, h = r.length; ++u < h; )
      r[u].call(t, c);
    n.state === kp && (n.on.call("end", t, t.__data__, n.index, n.group), a());
  }
  function a() {
    n.state = Lc, n.timer.stop(), delete i[e];
    for (var f in i)
      return;
    delete t.__transition;
  }
}
function xc(t, e) {
  var n = t.__transition, i, r, o = !0, s;
  if (n) {
    e = e == null ? null : e + "";
    for (s in n) {
      if ((i = n[s]).name !== e) {
        o = !1;
        continue;
      }
      r = i.state > vp && i.state < kp, i.state = Lc, i.timer.stop(), i.on.call(r ? "interrupt" : "cancel", t, t.__data__, i.index, i.group), delete n[s];
    }
    o && delete t.__transition;
  }
}
function BX(t) {
  return this.each(function() {
    xc(this, t);
  });
}
function LX(t, e) {
  var n, i;
  return function() {
    var r = eo(this, t), o = r.tween;
    if (o !== n) {
      i = n = o;
      for (var s = 0, l = i.length; s < l; ++s)
        if (i[s].name === e) {
          i = i.slice(), i.splice(s, 1);
          break;
        }
    }
    r.tween = i;
  };
}
function xX(t, e, n) {
  var i, r;
  if (typeof n != "function")
    throw new Error();
  return function() {
    var o = eo(this, t), s = o.tween;
    if (s !== i) {
      r = (i = s).slice();
      for (var l = { name: e, value: n }, a = 0, f = r.length; a < f; ++a)
        if (r[a].name === e) {
          r[a] = l;
          break;
        }
      a === f && r.push(l);
    }
    o.tween = r;
  };
}
function zX(t, e) {
  var n = this._id;
  if (t += "", arguments.length < 2) {
    for (var i = kr(this.node(), n).tween, r = 0, o = i.length, s; r < o; ++r)
      if ((s = i[r]).name === t)
        return s.value;
    return null;
  }
  return this.each((e == null ? LX : xX)(n, t, e));
}
function r1(t, e, n) {
  var i = t._id;
  return t.each(function() {
    var r = eo(this, i);
    (r.value || (r.value = {}))[e] = n.apply(this, arguments);
  }), function(r) {
    return kr(r, i).value[e];
  };
}
function c6(t, e) {
  var n;
  return (typeof e == "number" ? To : e instanceof nf ? Ev : (n = nf(e)) ? (e = n, Ev) : wX)(t, e);
}
function VX(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function FX(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function HX(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = this.getAttribute(t);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function WX(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = this.getAttributeNS(t.space, t.local);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function UX(t, e, n) {
  var i, r, o;
  return function() {
    var s, l = n(this), a;
    return l == null ? void this.removeAttribute(t) : (s = this.getAttribute(t), a = l + "", s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l)));
  };
}
function qX(t, e, n) {
  var i, r, o;
  return function() {
    var s, l = n(this), a;
    return l == null ? void this.removeAttributeNS(t.space, t.local) : (s = this.getAttributeNS(t.space, t.local), a = l + "", s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l)));
  };
}
function JX(t, e) {
  var n = Uh(t), i = n === "transform" ? SX : c6;
  return this.attrTween(t, typeof e == "function" ? (n.local ? qX : UX)(n, i, r1(this, "attr." + t, e)) : e == null ? (n.local ? FX : VX)(n) : (n.local ? WX : HX)(n, i, e));
}
function KX(t, e) {
  return function(n) {
    this.setAttribute(t, e.call(this, n));
  };
}
function GX(t, e) {
  return function(n) {
    this.setAttributeNS(t.space, t.local, e.call(this, n));
  };
}
function XX(t, e) {
  var n, i;
  function r() {
    var o = e.apply(this, arguments);
    return o !== i && (n = (i = o) && GX(t, o)), n;
  }
  return r._value = e, r;
}
function QX(t, e) {
  var n, i;
  function r() {
    var o = e.apply(this, arguments);
    return o !== i && (n = (i = o) && KX(t, o)), n;
  }
  return r._value = e, r;
}
function YX(t, e) {
  var n = "attr." + t;
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (e == null)
    return this.tween(n, null);
  if (typeof e != "function")
    throw new Error();
  var i = Uh(t);
  return this.tween(n, (i.local ? XX : QX)(i, e));
}
function ZX(t, e) {
  return function() {
    i1(this, t).delay = +e.apply(this, arguments);
  };
}
function $X(t, e) {
  return e = +e, function() {
    i1(this, t).delay = e;
  };
}
function eQ(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? ZX : $X)(e, t)) : kr(this.node(), e).delay;
}
function tQ(t, e) {
  return function() {
    eo(this, t).duration = +e.apply(this, arguments);
  };
}
function nQ(t, e) {
  return e = +e, function() {
    eo(this, t).duration = e;
  };
}
function iQ(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? tQ : nQ)(e, t)) : kr(this.node(), e).duration;
}
function rQ(t, e) {
  if (typeof e != "function")
    throw new Error();
  return function() {
    eo(this, t).ease = e;
  };
}
function oQ(t) {
  var e = this._id;
  return arguments.length ? this.each(rQ(e, t)) : kr(this.node(), e).ease;
}
function sQ(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    if (typeof n != "function")
      throw new Error();
    eo(this, t).ease = n;
  };
}
function lQ(t) {
  if (typeof t != "function")
    throw new Error();
  return this.each(sQ(this._id, t));
}
function aQ(t) {
  typeof t != "function" && (t = U5(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var o = e[r], s = o.length, l = i[r] = [], a, f = 0; f < s; ++f)
      (a = o[f]) && t.call(a, a.__data__, f, o) && l.push(a);
  return new go(i, this._parents, this._name, this._id);
}
function fQ(t) {
  if (t._id !== this._id)
    throw new Error();
  for (var e = this._groups, n = t._groups, i = e.length, r = n.length, o = Math.min(i, r), s = new Array(i), l = 0; l < o; ++l)
    for (var a = e[l], f = n[l], c = a.length, u = s[l] = new Array(c), h, d = 0; d < c; ++d)
      (h = a[d] || f[d]) && (u[d] = h);
  for (; l < i; ++l)
    s[l] = e[l];
  return new go(s, this._parents, this._name, this._id);
}
function cQ(t) {
  return (t + "").trim().split(/^|\s+/).every(function(e) {
    var n = e.indexOf(".");
    return n >= 0 && (e = e.slice(0, n)), !e || e === "start";
  });
}
function uQ(t, e, n) {
  var i, r, o = cQ(e) ? i1 : eo;
  return function() {
    var s = o(this, t), l = s.on;
    l !== i && (r = (i = l).copy()).on(e, n), s.on = r;
  };
}
function hQ(t, e) {
  var n = this._id;
  return arguments.length < 2 ? kr(this.node(), n).on.on(t) : this.each(uQ(n, t, e));
}
function dQ(t) {
  return function() {
    var e = this.parentNode;
    for (var n in this.__transition)
      if (+n !== t)
        return;
    e && e.removeChild(this);
  };
}
function mQ() {
  return this.on("end.remove", dQ(this._id));
}
function pQ(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = $g(t));
  for (var i = this._groups, r = i.length, o = new Array(r), s = 0; s < r; ++s)
    for (var l = i[s], a = l.length, f = o[s] = new Array(a), c, u, h = 0; h < a; ++h)
      (c = l[h]) && (u = t.call(c, c.__data__, h, l)) && ("__data__" in c && (u.__data__ = c.__data__), f[h] = u, Jh(f[h], e, n, h, f, kr(c, n)));
  return new go(o, this._parents, e, n);
}
function gQ(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = W5(t));
  for (var i = this._groups, r = i.length, o = [], s = [], l = 0; l < r; ++l)
    for (var a = i[l], f = a.length, c, u = 0; u < f; ++u)
      if (c = a[u]) {
        for (var h = t.call(c, c.__data__, u, a), d, m = kr(c, n), g = 0, _ = h.length; g < _; ++g)
          (d = h[g]) && Jh(d, e, n, g, h, m);
        o.push(h), s.push(c);
      }
  return new go(o, s, e, n);
}
var bQ = kf.prototype.constructor;
function _Q() {
  return new bQ(this._groups, this._parents);
}
function yQ(t, e) {
  var n, i, r;
  return function() {
    var o = Bl(this, t), s = (this.style.removeProperty(t), Bl(this, t));
    return o === s ? null : o === n && s === i ? r : r = e(n = o, i = s);
  };
}
function u6(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function wQ(t, e, n) {
  var i, r = n + "", o;
  return function() {
    var s = Bl(this, t);
    return s === r ? null : s === i ? o : o = e(i = s, n);
  };
}
function vQ(t, e, n) {
  var i, r, o;
  return function() {
    var s = Bl(this, t), l = n(this), a = l + "";
    return l == null && (a = l = (this.style.removeProperty(t), Bl(this, t))), s === a ? null : s === i && a === r ? o : (r = a, o = e(i = s, l));
  };
}
function kQ(t, e) {
  var n, i, r, o = "style." + e, s = "end." + o, l;
  return function() {
    var a = eo(this, t), f = a.on, c = a.value[o] == null ? l || (l = u6(e)) : void 0;
    (f !== n || r !== c) && (i = (n = f).copy()).on(s, r = c), a.on = i;
  };
}
function CQ(t, e, n) {
  var i = (t += "") == "transform" ? CX : c6;
  return e == null ? this.styleTween(t, yQ(t, i)).on("end.style." + t, u6(t)) : typeof e == "function" ? this.styleTween(t, vQ(t, i, r1(this, "style." + t, e))).each(kQ(this._id, t)) : this.styleTween(t, wQ(t, i, e), n).on("end.style." + t, null);
}
function SQ(t, e, n) {
  return function(i) {
    this.style.setProperty(t, e.call(this, i), n);
  };
}
function MQ(t, e, n) {
  var i, r;
  function o() {
    var s = e.apply(this, arguments);
    return s !== r && (i = (r = s) && SQ(t, s, n)), i;
  }
  return o._value = e, o;
}
function AQ(t, e, n) {
  var i = "style." + (t += "");
  if (arguments.length < 2)
    return (i = this.tween(i)) && i._value;
  if (e == null)
    return this.tween(i, null);
  if (typeof e != "function")
    throw new Error();
  return this.tween(i, MQ(t, e, n ?? ""));
}
function OQ(t) {
  return function() {
    this.textContent = t;
  };
}
function TQ(t) {
  return function() {
    var e = t(this);
    this.textContent = e ?? "";
  };
}
function EQ(t) {
  return this.tween("text", typeof t == "function" ? TQ(r1(this, "text", t)) : OQ(t == null ? "" : t + ""));
}
function PQ(t) {
  return function(e) {
    this.textContent = t.call(this, e);
  };
}
function RQ(t) {
  var e, n;
  function i() {
    var r = t.apply(this, arguments);
    return r !== n && (e = (n = r) && PQ(r)), e;
  }
  return i._value = t, i;
}
function IQ(t) {
  var e = "text";
  if (arguments.length < 1)
    return (e = this.tween(e)) && e._value;
  if (t == null)
    return this.tween(e, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(e, RQ(t));
}
function NQ() {
  for (var t = this._name, e = this._id, n = h6(), i = this._groups, r = i.length, o = 0; o < r; ++o)
    for (var s = i[o], l = s.length, a, f = 0; f < l; ++f)
      if (a = s[f]) {
        var c = kr(a, e);
        Jh(a, t, n, f, s, {
          time: c.time + c.delay + c.duration,
          delay: 0,
          duration: c.duration,
          ease: c.ease
        });
      }
  return new go(i, this._parents, t, n);
}
function DQ() {
  var t, e, n = this, i = n._id, r = n.size();
  return new Promise(function(o, s) {
    var l = { value: s }, a = { value: function() {
      --r === 0 && o();
    } };
    n.each(function() {
      var f = eo(this, i), c = f.on;
      c !== t && (e = (t = c).copy(), e._.cancel.push(l), e._.interrupt.push(l), e._.end.push(a)), f.on = e;
    }), r === 0 && o();
  });
}
var jQ = 0;
function go(t, e, n, i) {
  this._groups = t, this._parents = e, this._name = n, this._id = i;
}
function h6() {
  return ++jQ;
}
var to = kf.prototype;
go.prototype = {
  constructor: go,
  select: pQ,
  selectAll: gQ,
  selectChild: to.selectChild,
  selectChildren: to.selectChildren,
  filter: aQ,
  merge: fQ,
  selection: _Q,
  transition: NQ,
  call: to.call,
  nodes: to.nodes,
  node: to.node,
  size: to.size,
  empty: to.empty,
  each: to.each,
  on: hQ,
  attr: JX,
  attrTween: YX,
  style: CQ,
  styleTween: AQ,
  text: EQ,
  textTween: IQ,
  remove: mQ,
  tween: zX,
  delay: eQ,
  duration: iQ,
  ease: oQ,
  easeVarying: lQ,
  end: DQ,
  [Symbol.iterator]: to[Symbol.iterator]
};
function BQ(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}
var LQ = {
  time: null,
  delay: 0,
  duration: 250,
  ease: BQ
};
function xQ(t, e) {
  for (var n; !(n = t.__transition) || !(n = n[e]); )
    if (!(t = t.parentNode))
      throw new Error(`transition ${e} not found`);
  return n;
}
function zQ(t) {
  var e, n;
  t instanceof go ? (e = t._id, t = t._name) : (e = h6(), (n = LQ).time = n1(), t = t == null ? null : t + "");
  for (var i = this._groups, r = i.length, o = 0; o < r; ++o)
    for (var s = i[o], l = s.length, a, f = 0; f < l; ++f)
      (a = s[f]) && Jh(a, t, e, f, s, n || xQ(a, e));
  return new go(i, this._parents, t, e);
}
kf.prototype.interrupt = BX;
kf.prototype.transition = zQ;
const gc = (t) => () => t;
function VQ(t, {
  sourceEvent: e,
  target: n,
  transform: i,
  dispatch: r
}) {
  Object.defineProperties(this, {
    type: { value: t, enumerable: !0, configurable: !0 },
    sourceEvent: { value: e, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    transform: { value: i, enumerable: !0, configurable: !0 },
    _: { value: r }
  });
}
function lo(t, e, n) {
  this.k = t, this.x = e, this.y = n;
}
lo.prototype = {
  constructor: lo,
  scale: function(t) {
    return t === 1 ? this : new lo(this.k * t, this.x, this.y);
  },
  translate: function(t, e) {
    return t === 0 & e === 0 ? this : new lo(this.k, this.x + this.k * t, this.y + this.k * e);
  },
  apply: function(t) {
    return [t[0] * this.k + this.x, t[1] * this.k + this.y];
  },
  applyX: function(t) {
    return t * this.k + this.x;
  },
  applyY: function(t) {
    return t * this.k + this.y;
  },
  invert: function(t) {
    return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k];
  },
  invertX: function(t) {
    return (t - this.x) / this.k;
  },
  invertY: function(t) {
    return (t - this.y) / this.k;
  },
  rescaleX: function(t) {
    return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t));
  },
  rescaleY: function(t) {
    return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Ku = new lo(1, 0, 0);
lo.prototype;
function qd(t) {
  t.stopImmediatePropagation();
}
function ra(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function FQ(t) {
  return (!t.ctrlKey || t.type === "wheel") && !t.button;
}
function HQ() {
  var t = this;
  return t instanceof SVGElement ? (t = t.ownerSVGElement || t, t.hasAttribute("viewBox") ? (t = t.viewBox.baseVal, [[t.x, t.y], [t.x + t.width, t.y + t.height]]) : [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]]) : [[0, 0], [t.clientWidth, t.clientHeight]];
}
function Bv() {
  return this.__zoom || Ku;
}
function WQ(t) {
  return -t.deltaY * (t.deltaMode === 1 ? 0.05 : t.deltaMode ? 1 : 2e-3) * (t.ctrlKey ? 10 : 1);
}
function UQ() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function qQ(t, e, n) {
  var i = t.invertX(e[0][0]) - n[0][0], r = t.invertX(e[1][0]) - n[1][0], o = t.invertY(e[0][1]) - n[0][1], s = t.invertY(e[1][1]) - n[1][1];
  return t.translate(
    r > i ? (i + r) / 2 : Math.min(0, i) || Math.max(0, r),
    s > o ? (o + s) / 2 : Math.min(0, o) || Math.max(0, s)
  );
}
function JQ() {
  var t = FQ, e = HQ, n = qQ, i = WQ, r = UQ, o = [0, 1 / 0], s = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], l = 250, a = TX, f = Zg("start", "zoom", "end"), c, u, h, d = 500, m = 150, g = 0, _ = 10;
  function b(O) {
    O.property("__zoom", Bv).on("wheel.zoom", I, { passive: !1 }).on("mousedown.zoom", L).on("dblclick.zoom", V).filter(r).on("touchstart.zoom", N).on("touchmove.zoom", W).on("touchend.zoom touchcancel.zoom", U).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  b.transform = function(O, x, A, H) {
    var D = O.selection ? O.selection() : O;
    D.property("__zoom", Bv), O !== D ? S(O, x, A, H) : D.interrupt().each(function() {
      R(this, arguments).event(H).start().zoom(null, typeof x == "function" ? x.apply(this, arguments) : x).end();
    });
  }, b.scaleBy = function(O, x, A, H) {
    b.scaleTo(O, function() {
      var D = this.__zoom.k, P = typeof x == "function" ? x.apply(this, arguments) : x;
      return D * P;
    }, A, H);
  }, b.scaleTo = function(O, x, A, H) {
    b.transform(O, function() {
      var D = e.apply(this, arguments), P = this.__zoom, K = A == null ? M(D) : typeof A == "function" ? A.apply(this, arguments) : A, ne = P.invert(K), z = typeof x == "function" ? x.apply(this, arguments) : x;
      return n(v(w(P, z), K, ne), D, s);
    }, A, H);
  }, b.translateBy = function(O, x, A, H) {
    b.transform(O, function() {
      return n(this.__zoom.translate(
        typeof x == "function" ? x.apply(this, arguments) : x,
        typeof A == "function" ? A.apply(this, arguments) : A
      ), e.apply(this, arguments), s);
    }, null, H);
  }, b.translateTo = function(O, x, A, H, D) {
    b.transform(O, function() {
      var P = e.apply(this, arguments), K = this.__zoom, ne = H == null ? M(P) : typeof H == "function" ? H.apply(this, arguments) : H;
      return n(Ku.translate(ne[0], ne[1]).scale(K.k).translate(
        typeof x == "function" ? -x.apply(this, arguments) : -x,
        typeof A == "function" ? -A.apply(this, arguments) : -A
      ), P, s);
    }, H, D);
  };
  function w(O, x) {
    return x = Math.max(o[0], Math.min(o[1], x)), x === O.k ? O : new lo(x, O.x, O.y);
  }
  function v(O, x, A) {
    var H = x[0] - A[0] * O.k, D = x[1] - A[1] * O.k;
    return H === O.x && D === O.y ? O : new lo(O.k, H, D);
  }
  function M(O) {
    return [(+O[0][0] + +O[1][0]) / 2, (+O[0][1] + +O[1][1]) / 2];
  }
  function S(O, x, A, H) {
    O.on("start.zoom", function() {
      R(this, arguments).event(H).start();
    }).on("interrupt.zoom end.zoom", function() {
      R(this, arguments).event(H).end();
    }).tween("zoom", function() {
      var D = this, P = arguments, K = R(D, P).event(H), ne = e.apply(D, P), z = A == null ? M(ne) : typeof A == "function" ? A.apply(D, P) : A, Z = Math.max(ne[1][0] - ne[0][0], ne[1][1] - ne[0][1]), te = D.__zoom, G = typeof x == "function" ? x.apply(D, P) : x, Ae = a(te.invert(z).concat(Z / te.k), G.invert(z).concat(Z / G.k));
      return function(ke) {
        if (ke === 1)
          ke = G;
        else {
          var ze = Ae(ke), ee = Z / ze[2];
          ke = new lo(ee, z[0] - ze[0] * ee, z[1] - ze[1] * ee);
        }
        K.zoom(null, ke);
      };
    });
  }
  function R(O, x, A) {
    return !A && O.__zooming || new k(O, x);
  }
  function k(O, x) {
    this.that = O, this.args = x, this.active = 0, this.sourceEvent = null, this.extent = e.apply(O, x), this.taps = 0;
  }
  k.prototype = {
    event: function(O) {
      return O && (this.sourceEvent = O), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(O, x) {
      return this.mouse && O !== "mouse" && (this.mouse[1] = x.invert(this.mouse[0])), this.touch0 && O !== "touch" && (this.touch0[1] = x.invert(this.touch0[0])), this.touch1 && O !== "touch" && (this.touch1[1] = x.invert(this.touch1[0])), this.that.__zoom = x, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(O) {
      var x = fr(this.that).datum();
      f.call(
        O,
        this.that,
        new VQ(O, {
          sourceEvent: this.sourceEvent,
          target: b,
          type: O,
          transform: this.that.__zoom,
          dispatch: f
        }),
        x
      );
    }
  };
  function I(O, ...x) {
    if (!t.apply(this, arguments))
      return;
    var A = R(this, x).event(O), H = this.__zoom, D = Math.max(o[0], Math.min(o[1], H.k * Math.pow(2, i.apply(this, arguments)))), P = hs(O);
    if (A.wheel)
      (A.mouse[0][0] !== P[0] || A.mouse[0][1] !== P[1]) && (A.mouse[1] = H.invert(A.mouse[0] = P)), clearTimeout(A.wheel);
    else {
      if (H.k === D)
        return;
      A.mouse = [P, H.invert(P)], xc(this), A.start();
    }
    ra(O), A.wheel = setTimeout(K, m), A.zoom("mouse", n(v(w(H, D), A.mouse[0], A.mouse[1]), A.extent, s));
    function K() {
      A.wheel = null, A.end();
    }
  }
  function L(O, ...x) {
    if (h || !t.apply(this, arguments))
      return;
    var A = O.currentTarget, H = R(this, x, !0).event(O), D = fr(O.view).on("mousemove.zoom", z, !0).on("mouseup.zoom", Z, !0), P = hs(O, A), K = O.clientX, ne = O.clientY;
    tX(O.view), qd(O), H.mouse = [P, this.__zoom.invert(P)], xc(this), H.start();
    function z(te) {
      if (ra(te), !H.moved) {
        var G = te.clientX - K, Ae = te.clientY - ne;
        H.moved = G * G + Ae * Ae > g;
      }
      H.event(te).zoom("mouse", n(v(H.that.__zoom, H.mouse[0] = hs(te, A), H.mouse[1]), H.extent, s));
    }
    function Z(te) {
      D.on("mousemove.zoom mouseup.zoom", null), nX(te.view, H.moved), ra(te), H.event(te).end();
    }
  }
  function V(O, ...x) {
    if (t.apply(this, arguments)) {
      var A = this.__zoom, H = hs(O.changedTouches ? O.changedTouches[0] : O, this), D = A.invert(H), P = A.k * (O.shiftKey ? 0.5 : 2), K = n(v(w(A, P), H, D), e.apply(this, x), s);
      ra(O), l > 0 ? fr(this).transition().duration(l).call(S, K, H, O) : fr(this).call(b.transform, K, H, O);
    }
  }
  function N(O, ...x) {
    if (t.apply(this, arguments)) {
      var A = O.touches, H = A.length, D = R(this, x, O.changedTouches.length === H).event(O), P, K, ne, z;
      for (qd(O), K = 0; K < H; ++K)
        ne = A[K], z = hs(ne, this), z = [z, this.__zoom.invert(z), ne.identifier], D.touch0 ? !D.touch1 && D.touch0[2] !== z[2] && (D.touch1 = z, D.taps = 0) : (D.touch0 = z, P = !0, D.taps = 1 + !!c);
      c && (c = clearTimeout(c)), P && (D.taps < 2 && (u = z[0], c = setTimeout(function() {
        c = null;
      }, d)), xc(this), D.start());
    }
  }
  function W(O, ...x) {
    if (this.__zooming) {
      var A = R(this, x).event(O), H = O.changedTouches, D = H.length, P, K, ne, z;
      for (ra(O), P = 0; P < D; ++P)
        K = H[P], ne = hs(K, this), A.touch0 && A.touch0[2] === K.identifier ? A.touch0[0] = ne : A.touch1 && A.touch1[2] === K.identifier && (A.touch1[0] = ne);
      if (K = A.that.__zoom, A.touch1) {
        var Z = A.touch0[0], te = A.touch0[1], G = A.touch1[0], Ae = A.touch1[1], ke = (ke = G[0] - Z[0]) * ke + (ke = G[1] - Z[1]) * ke, ze = (ze = Ae[0] - te[0]) * ze + (ze = Ae[1] - te[1]) * ze;
        K = w(K, Math.sqrt(ke / ze)), ne = [(Z[0] + G[0]) / 2, (Z[1] + G[1]) / 2], z = [(te[0] + Ae[0]) / 2, (te[1] + Ae[1]) / 2];
      } else if (A.touch0)
        ne = A.touch0[0], z = A.touch0[1];
      else
        return;
      A.zoom("touch", n(v(K, ne, z), A.extent, s));
    }
  }
  function U(O, ...x) {
    if (this.__zooming) {
      var A = R(this, x).event(O), H = O.changedTouches, D = H.length, P, K;
      for (qd(O), h && clearTimeout(h), h = setTimeout(function() {
        h = null;
      }, d), P = 0; P < D; ++P)
        K = H[P], A.touch0 && A.touch0[2] === K.identifier ? delete A.touch0 : A.touch1 && A.touch1[2] === K.identifier && delete A.touch1;
      if (A.touch1 && !A.touch0 && (A.touch0 = A.touch1, delete A.touch1), A.touch0)
        A.touch0[1] = this.__zoom.invert(A.touch0[0]);
      else if (A.end(), A.taps === 2 && (K = hs(K, this), Math.hypot(u[0] - K[0], u[1] - K[1]) < _)) {
        var ne = fr(this).on("dblclick.zoom");
        ne && ne.apply(this, arguments);
      }
    }
  }
  return b.wheelDelta = function(O) {
    return arguments.length ? (i = typeof O == "function" ? O : gc(+O), b) : i;
  }, b.filter = function(O) {
    return arguments.length ? (t = typeof O == "function" ? O : gc(!!O), b) : t;
  }, b.touchable = function(O) {
    return arguments.length ? (r = typeof O == "function" ? O : gc(!!O), b) : r;
  }, b.extent = function(O) {
    return arguments.length ? (e = typeof O == "function" ? O : gc([[+O[0][0], +O[0][1]], [+O[1][0], +O[1][1]]]), b) : e;
  }, b.scaleExtent = function(O) {
    return arguments.length ? (o[0] = +O[0], o[1] = +O[1], b) : [o[0], o[1]];
  }, b.translateExtent = function(O) {
    return arguments.length ? (s[0][0] = +O[0][0], s[1][0] = +O[1][0], s[0][1] = +O[0][1], s[1][1] = +O[1][1], b) : [[s[0][0], s[0][1]], [s[1][0], s[1][1]]];
  }, b.constrain = function(O) {
    return arguments.length ? (n = O, b) : n;
  }, b.duration = function(O) {
    return arguments.length ? (l = +O, b) : l;
  }, b.interpolate = function(O) {
    return arguments.length ? (a = O, b) : a;
  }, b.on = function() {
    var O = f.on.apply(f, arguments);
    return O === f ? b : O;
  }, b.clickDistance = function(O) {
    return arguments.length ? (g = (O = +O) * O, b) : Math.sqrt(g);
  }, b.tapDistance = function(O) {
    return arguments.length ? (_ = +O, b) : _;
  }, b;
}
const { window: KQ } = Gu;
function Lv(t, e, n) {
  const i = t.slice();
  return i[70] = e[n], i;
}
function xv(t, e, n) {
  const i = t.slice();
  return i[73] = e[n], i;
}
function zv(t, e, n) {
  const i = t.slice();
  return i[76] = e[n], i;
}
function Vv(t, e, n) {
  const i = t.slice();
  return i[79] = e[n], i;
}
function Fv(t, e, n) {
  const i = t.slice();
  return i[82] = e[n], i;
}
function Hv(t) {
  let e, n, i, r, o = [], s = /* @__PURE__ */ new Map(), l, a, f, c, u, h = t[13] && t[17](), d, m, g, _, b, w, v, M, S, R, k, I, L, V = t[0].mode + "", N, W, U, O, x, A, H, D, P, K, ne, z, Z, te, G, Ae, ke, ze, ee, we, tt, ge, ie, ve, Xe, he, Ve, Ie, qe, ct, yt, Fe, Oe, ae, xe, ht, ft, _n, Yn, nt, sn, Dt, yi, Zn, Vt, Q, ye, at, pt, Wt, Ot, yn, Pn, Cn, ln, Rn, Ei, wi, si, Ln = [], Pi = /* @__PURE__ */ new Map(), Nt, ce, st;
  r = new c8({
    props: { kind: t[2].theme.grid }
  });
  let bt = t[9];
  const Ft = (Ce) => Ce[82].id;
  for (let Ce = 0; Ce < bt.length; Ce += 1) {
    let Ue = Fv(t, bt, Ce), Ut = Ft(Ue);
    s.set(Ut, o[Ce] = Wv(Ut, Ue));
  }
  let wt = t[12] && !t[12].edge && t[12].snap && Uv(t), it = t[11] && Jv(t), Rt = t[4].length > 0 && Kv(t), Zt = h && Gv(t), hn = t[2].jsonupload && Zv(t), an = t[2].jsondownload && $v();
  function er(Ce, Ue) {
    return Ue[0] & 1 && (O = null), O == null && (O = !!(Ce[0].mode && Ce[17]())), O ? eY : $Q;
  }
  let vi = er(t, [-1, -1, -1]), Jn = vi(t), $t = t[2].exportsvg && ek(), xn = t[2].exportcytoscape && tk(), In = t[2] && nk(t), Fi = t[10];
  const Cr = (Ce) => Ce[70][0];
  for (let Ce = 0; Ce < Fi.length; Ce += 1) {
    let Ue = Lv(t, Fi, Ce), Ut = Cr(Ue);
    Pi.set(Ut, Ln[Ce] = ok(Ut, Ue));
  }
  return {
    c() {
      e = T("div"), n = ut("svg"), i = ut("g"), se(r.$$.fragment);
      for (let Ce = 0; Ce < o.length; Ce += 1)
        o[Ce].c();
      l = Ze(), wt && wt.c(), f = q(), it && it.c(), c = q(), Rt && Rt.c(), u = q(), Zt && Zt.c(), d = q(), m = T("section"), g = T("sl-button-group"), _ = T("sl-dropdown"), b = T("sl-button"), b.innerHTML = `Menu
					<sl-icon slot="prefix" name="list"></sl-icon>`, w = q(), v = T("sl-menu"), hn && hn.c(), M = q(), an && an.c(), S = q(), R = T("sl-divider"), k = q(), I = T("sl-menu-label"), L = le("Currently in "), N = le(V), W = le(" mode..."), U = q(), Jn.c(), x = q(), A = T("sl-divider"), H = q(), D = T("sl-menu-item"), P = le(`Undo (⌘-Z or ⌃Z)
						`), K = T("sl-icon"), z = q(), Z = T("sl-menu-item"), te = le(`Redo (⇧-⌘-Z or ⇧⌃Z)
						`), G = T("sl-icon"), ke = q(), ze = T("sl-menu-item"), ee = le("Clear"), tt = q(), ge = T("sl-divider"), ie = q(), ve = T("sl-menu-label"), ve.textContent = "Export as:", Xe = q(), $t && $t.c(), he = q(), xn && xn.c(), Ve = q(), Ie = T("sl-divider"), qe = q(), ct = T("sl-menu-label"), ct.textContent = "Switch Theme To", yt = q(), Fe = T("sl-menu-item"), Oe = le("Classic"), ht = q(), ft = T("sl-menu-item"), _n = le("Elegant"), sn = q(), Dt = T("sl-menu-item"), yi = le("Foresight"), Q = q(), ye = T("sl-menu-item"), at = le("Minimal"), Ot = q(), yn = T("sl-divider"), Pn = q(), Cn = T("sl-menu-item"), Cn.textContent = "About...", ln = q(), Rn = T("sl-menu-item"), Rn.textContent = "Help...", Ei = q(), In && In.c(), wi = q(), si = T("sl-select");
      for (let Ce = 0; Ce < Ln.length; Ce += 1)
        Ln[Ce].c();
      p(n, "tabindex", "0"), p(n, "xmlns", "http://www.w3.org/2000/svg"), p(n, "viewBox", "0 0 1000 1000"), p(n, "style", a = `background-color: ${t[2].theme.bgfill}`), p(n, "class", "svelte-1x2xcxd"), p(e, "class", "container svelte-1x2xcxd"), $(b, "slot", "trigger"), $(b, "caret", ""), $(K, "slot", "prefix"), $(K, "name", "arrow-counterclockwise"), $(D, "value", "undo"), $(D, "disabled", ne = t[3].current <= 0), $(G, "slot", "prefix"), $(G, "name", "arrow-clockwise"), $(Z, "value", "redo"), $(Z, "disabled", Ae = t[3].versions[t[3].current + 1] === void 0), $(ze, "value", "clear"), $(ze, "disabled", we = t[2].items.length == 0), $(Fe, "type", "checkbox"), $(Fe, "value", "theme.classic"), $(Fe, "checked", ae = t[2].theme.name === "classic"), $(Fe, "disabled", xe = t[2].theme.name === "classic"), $(ft, "type", "checkbox"), $(ft, "value", "theme.elegant"), $(ft, "checked", Yn = t[2].theme.name === "elegant"), $(ft, "disabled", nt = t[2].theme.name === "elegant"), $(Dt, "type", "checkbox"), $(Dt, "value", "theme.foresight"), $(Dt, "checked", Zn = t[2].theme.name === "foresight"), $(Dt, "disabled", Vt = t[2].theme.name === "foresight"), $(ye, "type", "checkbox"), $(ye, "value", "theme.minimal"), $(ye, "checked", pt = t[2].theme.name === "minimal"), $(ye, "disabled", Wt = t[2].theme.name === "minimal"), $(Cn, "value", "about"), $(Rn, "value", "help"), $(si, "placeholder", "Highlight by Tag"), $(si, "clearable", ""), $(si, "class", "svelte-1x2xcxd"), p(m, "class", "globalmenu svelte-1x2xcxd");
    },
    m(Ce, Ue) {
      B(Ce, e, Ue), y(e, n), y(n, i), re(r, i, null);
      for (let Ut = 0; Ut < o.length; Ut += 1)
        o[Ut].m(i, null);
      y(i, l), wt && wt.m(i, null), t[44](i), t[45](n), y(e, f), it && it.m(e, null), y(e, c), Rt && Rt.m(e, null), y(e, u), Zt && Zt.m(e, null), B(Ce, d, Ue), B(Ce, m, Ue), y(m, g), y(g, _), y(_, b), y(_, w), y(_, v), hn && hn.m(v, null), y(v, M), an && an.m(v, null), y(v, S), y(v, R), y(v, k), y(v, I), y(I, L), y(I, N), y(I, W), y(v, U), Jn.m(v, null), y(v, x), y(v, A), y(v, H), y(v, D), y(D, P), y(D, K), y(v, z), y(v, Z), y(Z, te), y(Z, G), y(v, ke), y(v, ze), y(ze, ee), y(v, tt), y(v, ge), y(v, ie), y(v, ve), y(v, Xe), $t && $t.m(v, null), y(v, he), xn && xn.m(v, null), y(v, Ve), y(v, Ie), y(v, qe), y(v, ct), y(v, yt), y(v, Fe), y(Fe, Oe), y(v, ht), y(v, ft), y(ft, _n), y(v, sn), y(v, Dt), y(Dt, yi), y(v, Q), y(v, ye), y(ye, at), y(v, Ot), y(v, yn), y(v, Pn), y(v, Cn), y(v, ln), y(v, Rn), y(g, Ei), In && In.m(g, null), y(g, wi), y(g, si);
      for (let Ut = 0; Ut < Ln.length; Ut += 1)
        Ln[Ut].m(si, null);
      Nt = !0, ce || (st = [
        X(n, "mousedown", t[34]),
        X(n, "mousemove", t[27]),
        X(n, "mouseup", t[33]),
        X(n, "contextmenu", pr(t[30])),
        X(n, "keydown", t[32]),
        X(_, "sl-select", t[39]),
        X(si, "sl-change", t[53])
      ], ce = !0);
    },
    p(Ce, Ue) {
      const Ut = {};
      Ue[0] & 4 && (Ut.kind = Ce[2].theme.grid), r.$set(Ut), Ue[0] & 65028628 | Ue[1] & 17 && (bt = Ce[9], me(), o = fo(o, Ue, Ft, 1, Ce, bt, s, i, Xu, Wv, l, Fv), pe()), Ce[12] && !Ce[12].edge && Ce[12].snap ? wt ? wt.p(Ce, Ue) : (wt = Uv(Ce), wt.c(), wt.m(i, null)) : wt && (wt.d(1), wt = null), (!Nt || Ue[0] & 4 && a !== (a = `background-color: ${Ce[2].theme.bgfill}`)) && p(n, "style", a), Ce[11] ? it ? it.p(Ce, Ue) : (it = Jv(Ce), it.c(), it.m(e, c)) : it && (it.d(1), it = null), Ce[4].length > 0 ? Rt ? (Rt.p(Ce, Ue), Ue[0] & 16 && C(Rt, 1)) : (Rt = Kv(Ce), Rt.c(), C(Rt, 1), Rt.m(e, u)) : Rt && (me(), E(Rt, 1, 1, () => {
        Rt = null;
      }), pe()), Ue[0] & 8192 && (h = Ce[13] && Ce[17]()), h ? Zt ? Zt.p(Ce, Ue) : (Zt = Gv(Ce), Zt.c(), Zt.m(e, null)) : Zt && (Zt.d(1), Zt = null), Ce[2].jsonupload ? hn ? hn.p(Ce, Ue) : (hn = Zv(Ce), hn.c(), hn.m(v, M)) : hn && (hn.d(1), hn = null), Ce[2].jsondownload ? an || (an = $v(), an.c(), an.m(v, S)) : an && (an.d(1), an = null), (!Nt || Ue[0] & 1) && V !== (V = Ce[0].mode + "") && Te(N, V), vi !== (vi = er(Ce, Ue)) && (Jn.d(1), Jn = vi(Ce), Jn && (Jn.c(), Jn.m(v, x))), (!Nt || Ue[0] & 8 && ne !== (ne = Ce[3].current <= 0)) && $(D, "disabled", ne), (!Nt || Ue[0] & 8 && Ae !== (Ae = Ce[3].versions[Ce[3].current + 1] === void 0)) && $(Z, "disabled", Ae), (!Nt || Ue[0] & 4 && we !== (we = Ce[2].items.length == 0)) && $(ze, "disabled", we), Ce[2].exportsvg ? $t || ($t = ek(), $t.c(), $t.m(v, he)) : $t && ($t.d(1), $t = null), Ce[2].exportcytoscape ? xn || (xn = tk(), xn.c(), xn.m(v, Ve)) : xn && (xn.d(1), xn = null), (!Nt || Ue[0] & 4 && ae !== (ae = Ce[2].theme.name === "classic")) && $(Fe, "checked", ae), (!Nt || Ue[0] & 4 && xe !== (xe = Ce[2].theme.name === "classic")) && $(Fe, "disabled", xe), (!Nt || Ue[0] & 4 && Yn !== (Yn = Ce[2].theme.name === "elegant")) && $(ft, "checked", Yn), (!Nt || Ue[0] & 4 && nt !== (nt = Ce[2].theme.name === "elegant")) && $(ft, "disabled", nt), (!Nt || Ue[0] & 4 && Zn !== (Zn = Ce[2].theme.name === "foresight")) && $(Dt, "checked", Zn), (!Nt || Ue[0] & 4 && Vt !== (Vt = Ce[2].theme.name === "foresight")) && $(Dt, "disabled", Vt), (!Nt || Ue[0] & 4 && pt !== (pt = Ce[2].theme.name === "minimal")) && $(ye, "checked", pt), (!Nt || Ue[0] & 4 && Wt !== (Wt = Ce[2].theme.name === "minimal")) && $(ye, "disabled", Wt), Ce[2] ? In ? In.p(Ce, Ue) : (In = nk(Ce), In.c(), In.m(g, wi)) : In && (In.d(1), In = null), Ue[0] & 1024 && (Fi = Ce[10], Ln = fo(Ln, Ue, Cr, 1, Ce, Fi, Pi, si, of, ok, null, Lv));
    },
    i(Ce) {
      if (!Nt) {
        C(r.$$.fragment, Ce);
        for (let Ue = 0; Ue < bt.length; Ue += 1)
          C(o[Ue]);
        C(Rt), Nt = !0;
      }
    },
    o(Ce) {
      E(r.$$.fragment, Ce);
      for (let Ue = 0; Ue < o.length; Ue += 1)
        E(o[Ue]);
      E(Rt), Nt = !1;
    },
    d(Ce) {
      Ce && j(e), oe(r);
      for (let Ue = 0; Ue < o.length; Ue += 1)
        o[Ue].d();
      wt && wt.d(), t[44](null), t[45](null), it && it.d(), Rt && Rt.d(), Zt && Zt.d(), Ce && j(d), Ce && j(m), hn && hn.d(), an && an.d(), Jn.d(), $t && $t.d(), xn && xn.d(), In && In.d();
      for (let Ue = 0; Ue < Ln.length; Ue += 1)
        Ln[Ue].d();
      ce = !1, et(st);
    }
  };
}
function GQ(t) {
  let e, n;
  return e = new d8({
    props: {
      item: t[82],
      theme: t[2].theme,
      isSelected: t[4].map(hk).includes(t[82].id)
    }
  }), e.$on("itemMouseDown", t[22]), e.$on("itemMouseUp", t[23]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 512 && (o.item = i[82]), r[0] & 4 && (o.theme = i[2].theme), r[0] & 528 && (o.isSelected = i[4].map(hk).includes(i[82].id)), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function XQ(t) {
  let e, n;
  return e = new o8({
    props: {
      item: t[82],
      graph: t[2],
      isSelected: t[4].map(uk).includes(t[82].id)
    }
  }), e.$on("itemMouseDown", t[22]), e.$on("itemMouseUp", t[23]), e.$on("edgeChanged", t[35]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 512 && (o.item = i[82]), r[0] & 4 && (o.graph = i[2]), r[0] & 528 && (o.isSelected = i[4].map(uk).includes(i[82].id)), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function QQ(t) {
  let e, n;
  return e = new n8({
    props: {
      item: t[82],
      graph: t[2],
      isSelected: t[4].map(ck).includes(t[82].id),
      theme: t[2].theme,
      isHighlighted: t[14].includes(t[82].id),
      isHidden: t[14].length > 0 && !t[14].includes(t[82].id)
    }
  }), e.$on("itemMouseDown", t[22]), e.$on("itemMouseUp", t[23]), e.$on("itemBadgeClick", t[24]), e.$on("itemCollapserClick", t[25]), e.$on("nodeChanged", nY), e.$on("createnode", t[31]), e.$on("itemcontrolmousedown", t[21]), {
    c() {
      se(e.$$.fragment);
    },
    m(i, r) {
      re(e, i, r), n = !0;
    },
    p(i, r) {
      const o = {};
      r[0] & 512 && (o.item = i[82]), r[0] & 4 && (o.graph = i[2]), r[0] & 528 && (o.isSelected = i[4].map(ck).includes(i[82].id)), r[0] & 4 && (o.theme = i[2].theme), r[0] & 16896 && (o.isHighlighted = i[14].includes(i[82].id)), r[0] & 16896 && (o.isHidden = i[14].length > 0 && !i[14].includes(i[82].id)), e.$set(o);
    },
    i(i) {
      n || (C(e.$$.fragment, i), n = !0);
    },
    o(i) {
      E(e.$$.fragment, i), n = !1;
    },
    d(i) {
      oe(e, i);
    }
  };
}
function Wv(t, e) {
  let n, i, r, o, s;
  const l = [QQ, XQ, GQ], a = [];
  function f(c, u) {
    return c[82].kind === "node" ? 0 : c[82].kind === "edge" ? 1 : c[82].kind === "note" ? 2 : -1;
  }
  return ~(i = f(e)) && (r = a[i] = l[i](e)), {
    key: t,
    first: null,
    c() {
      n = Ze(), r && r.c(), o = Ze(), this.first = n;
    },
    m(c, u) {
      B(c, n, u), ~i && a[i].m(c, u), B(c, o, u), s = !0;
    },
    p(c, u) {
      e = c;
      let h = i;
      i = f(e), i === h ? ~i && a[i].p(e, u) : (r && (me(), E(a[h], 1, 1, () => {
        a[h] = null;
      }), pe()), ~i ? (r = a[i], r ? r.p(e, u) : (r = a[i] = l[i](e), r.c()), C(r, 1), r.m(o.parentNode, o)) : r = null);
    },
    i(c) {
      s || (C(r), s = !0);
    },
    o(c) {
      E(r), s = !1;
    },
    d(c) {
      c && j(n), ~i && a[i].d(c), c && j(o);
    }
  };
}
function Uv(t) {
  let e, n = t[12].snap, i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = qv(Vv(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = Ze();
    },
    m(r, o) {
      for (let s = 0; s < i.length; s += 1)
        i[s].m(r, o);
      B(r, e, o);
    },
    p(r, o) {
      if (o[0] & 4100) {
        n = r[12].snap;
        let s;
        for (s = 0; s < n.length; s += 1) {
          const l = Vv(r, n, s);
          i[s] ? i[s].p(l, o) : (i[s] = qv(l), i[s].c(), i[s].m(e.parentNode, e));
        }
        for (; s < i.length; s += 1)
          i[s].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      zt(i, r), r && j(e);
    }
  };
}
function qv(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = ut("rect"), p(e, "x", n = t[79].x - t[79].width / 2), p(e, "y", i = t[79].y - t[79].height / 2), p(e, "width", r = t[79].width), p(e, "height", o = t[79].height), p(e, "fill", "transparent"), p(e, "stroke", s = t[2].theme.edgestroke), p(e, "stroke-width", "2px"), p(e, "stroke-dasharray", "12 8");
    },
    m(l, a) {
      B(l, e, a);
    },
    p(l, a) {
      a[0] & 4096 && n !== (n = l[79].x - l[79].width / 2) && p(e, "x", n), a[0] & 4096 && i !== (i = l[79].y - l[79].height / 2) && p(e, "y", i), a[0] & 4096 && r !== (r = l[79].width) && p(e, "width", r), a[0] & 4096 && o !== (o = l[79].height) && p(e, "height", o), a[0] & 4 && s !== (s = l[2].theme.edgestroke) && p(e, "stroke", s);
    },
    d(l) {
      l && j(e);
    }
  };
}
function Jv(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = T("div"), n = le(`Please add comments only in the unzoomed, unpanned view.
				`), i = T("button"), i.textContent = "Reset Zoom", p(e, "class", "alert svelte-1x2xcxd");
    },
    m(s, l) {
      B(s, e, l), y(e, n), y(e, i), r || (o = X(i, "click", t[16]), r = !0);
    },
    p: fe,
    d(s) {
      s && j(e), r = !1, o();
    }
  };
}
function Kv(t) {
  let e, n, i;
  return n = new _K({
    props: {
      selectedItem: t[4],
      graph: t[2],
      config: t[0]
    }
  }), n.$on("graphchanged", t[46]), {
    c() {
      e = T("section"), se(n.$$.fragment), p(e, "class", "sidepanel svelte-1x2xcxd");
    },
    m(r, o) {
      B(r, e, o), re(n, e, null), i = !0;
    },
    p(r, o) {
      const s = {};
      o[0] & 16 && (s.selectedItem = r[4]), o[0] & 4 && (s.graph = r[2]), o[0] & 1 && (s.config = r[0]), n.$set(s);
    },
    i(r) {
      i || (C(n.$$.fragment, r), i = !0);
    },
    o(r) {
      E(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && j(e), oe(n);
    }
  };
}
function Gv(t) {
  let e, n;
  function i(s, l) {
    return s[4].length == 1 ? ZQ : YQ;
  }
  let r = i(t), o = r(t);
  return {
    c() {
      e = T("sl-menu"), o.c(), $(e, "class", "contextmenu svelte-1x2xcxd"), $(e, "style", n = `left: ${t[13][0]}px; top: ${t[13][1]}px;`);
    },
    m(s, l) {
      B(s, e, l), o.m(e, null);
    },
    p(s, l) {
      r === (r = i(s)) && o ? o.p(s, l) : (o.d(1), o = r(s), o && (o.c(), o.m(e, null))), l[0] & 8192 && n !== (n = `left: ${s[13][0]}px; top: ${s[13][1]}px;`) && $(e, "style", n);
    },
    d(s) {
      s && j(e), o.d();
    }
  };
}
function YQ(t) {
  let e, n, i, r, o, s, l, a, f;
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "Create new Node", n = q(), i = T("sl-menu-item"), i.textContent = "Create new Text Note", r = q(), o = T("sl-menu-item"), o.textContent = "Clear Graph", s = q(), l = T("sl-menu-item"), l.textContent = "Center here", $(e, "value", "createnode"), $(i, "value", "createnote"), $(o, "value", "cleargraph"), $(l, "value", "centergraph");
    },
    m(c, u) {
      B(c, e, u), B(c, n, u), B(c, i, u), B(c, r, u), B(c, o, u), B(c, s, u), B(c, l, u), a || (f = [
        X(e, "click", t[28]),
        X(i, "click", t[29]),
        X(o, "click", t[18]),
        X(l, "click", t[19])
      ], a = !0);
    },
    p: fe,
    d(c) {
      c && j(e), c && j(n), c && j(i), c && j(r), c && j(o), c && j(s), c && j(l), a = !1, et(f);
    }
  };
}
function ZQ(t) {
  let e, n, i, r = t[4][0].label + "", o, s, l = ["node", "edge"].includes(t[4][0].kind), a, f, c = t[4][0].kind === "node" && Xv(t), u = l && Yv();
  return {
    c() {
      c && c.c(), e = q(), n = T("sl-menu-item"), i = le('Delete "'), o = le(r), s = le('" '), u && u.c(), $(n, "value", "deleteitem");
    },
    m(h, d) {
      c && c.m(h, d), B(h, e, d), B(h, n, d), y(n, i), y(n, o), y(n, s), u && u.m(n, null), a || (f = X(n, "click", t[50]), a = !0);
    },
    p(h, d) {
      h[4][0].kind === "node" ? c ? c.p(h, d) : (c = Xv(h), c.c(), c.m(e.parentNode, e)) : c && (c.d(1), c = null), d[0] & 16 && r !== (r = h[4][0].label + "") && Te(o, r), d[0] & 16 && (l = ["node", "edge"].includes(h[4][0].kind)), l ? u || (u = Yv(), u.c(), u.m(n, null)) : u && (u.d(1), u = null);
    },
    d(h) {
      c && c.d(h), h && j(e), h && j(n), u && u.d(), a = !1, f();
    }
  };
}
function Xv(t) {
  let e, n, i, r, o, s = t[4][0].label + "", l, a, f, c, u = t[4][0].parent && Qv(t);
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "Create child node", n = q(), u && u.c(), i = q(), r = T("sl-menu-item"), o = le('Delete "'), l = le(s), a = le(`"
							including dependents`), $(e, "value", "createchildnode"), $(r, "value", "deleteitemwithdependents");
    },
    m(h, d) {
      B(h, e, d), B(h, n, d), u && u.m(h, d), B(h, i, d), B(h, r, d), y(r, o), y(r, l), y(r, a), f || (c = [
        X(e, "click", t[47]),
        X(r, "click", t[49])
      ], f = !0);
    },
    p(h, d) {
      h[4][0].parent ? u ? u.p(h, d) : (u = Qv(h), u.c(), u.m(i.parentNode, i)) : u && (u.d(1), u = null), d[0] & 16 && s !== (s = h[4][0].label + "") && Te(l, s);
    },
    d(h) {
      h && j(e), h && j(n), u && u.d(h), h && j(i), h && j(r), f = !1, et(c);
    }
  };
}
function Qv(t) {
  let e, n, i = t[4][0].label + "", r, o, s = Mn(t[4][0].parent, t[2]).label + "", l, a, f, c;
  return {
    c() {
      e = T("sl-menu-item"), n = le('Detach "'), r = le(i), o = le(`" from
								"`), l = le(s), a = le('"'), $(e, "value", "detach");
    },
    m(u, h) {
      B(u, e, h), y(e, n), y(e, r), y(e, o), y(e, l), y(e, a), f || (c = X(e, "click", t[48]), f = !0);
    },
    p(u, h) {
      h[0] & 16 && i !== (i = u[4][0].label + "") && Te(r, i), h[0] & 20 && s !== (s = Mn(u[4][0].parent, u[2]).label + "") && Te(l, s);
    },
    d(u) {
      u && j(e), f = !1, c();
    }
  };
}
function Yv(t) {
  let e;
  return {
    c() {
      e = le(`leaving
							orphans`);
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function Zv(t) {
  let e, n, i, r, o, s;
  return {
    c() {
      e = T("sl-menu-item"), n = T("input"), i = q(), r = T("sl-icon"), p(n, "type", "file"), p(n, "name", "uploader"), p(n, "accept", ".graph"), $(r, "slot", "prefix"), $(r, "name", "folder2-open"), $(e, "value", "openfile");
    },
    m(l, a) {
      B(l, e, a), y(e, n), y(e, i), y(e, r), o || (s = X(n, "change", t[51]), o = !0);
    },
    p: fe,
    d(l) {
      l && j(e), o = !1, s();
    }
  };
}
function $v(t) {
  let e;
  return {
    c() {
      e = T("sl-menu-item"), e.innerHTML = `Save as .graph file...
							<sl-icon slot="prefix" name="download"></sl-icon>`, $(e, "value", "savefile");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function $Q(t) {
  let e;
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "Switch to editor mode", $(e, "value", "switchtoeditormode");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function eY(t) {
  let e;
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "Clear your local changes", $(e, "value", "clearlocalchanges");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function ek(t) {
  let e;
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "SVG...", $(e, "value", "export.svg");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function tk(t) {
  let e;
  return {
    c() {
      e = T("sl-menu-item"), e.textContent = "Cytoscape JSON...", $(e, "value", "export.cytoscape");
    },
    m(n, i) {
      B(n, e, i);
    },
    d(n) {
      n && j(e);
    }
  };
}
function nk(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, o, s = t[15];
  const l = (a) => a[76].id;
  for (let a = 0; a < s.length; a += 1) {
    let f = zv(t, s, a), c = l(f);
    i.set(c, n[a] = ik(c, f));
  }
  return {
    c() {
      e = T("fluent-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      $(e, "autocomplete", "both"), $(e, "placeholder", "Jump to node");
    },
    m(a, f) {
      B(a, e, f);
      for (let c = 0; c < n.length; c += 1)
        n[c].m(e, null);
      r || (o = X(e, "change", t[52]), r = !0);
    },
    p(a, f) {
      f[0] & 32768 && (s = a[15], n = fo(n, f, l, 1, a, s, i, e, of, ik, null, zv));
    },
    d(a) {
      a && j(e);
      for (let f = 0; f < n.length; f += 1)
        n[f].d();
      r = !1, o();
    }
  };
}
function ik(t, e) {
  let n, i = e[76].label + "", r, o;
  return {
    key: t,
    first: null,
    c() {
      n = T("fluent-option"), r = le(i), $(n, "value", o = e[76].id), this.first = n;
    },
    m(s, l) {
      B(s, n, l), y(n, r);
    },
    p(s, l) {
      e = s, l[0] & 32768 && i !== (i = e[76].label + "") && Te(r, i), l[0] & 32768 && o !== (o = e[76].id) && $(n, "value", o);
    },
    d(s) {
      s && j(n);
    }
  };
}
function rk(t, e) {
  let n, i = e[73].label + "", r, o;
  return {
    key: t,
    first: null,
    c() {
      n = T("sl-option"), r = le(i), $(n, "value", o = e[73].value), this.first = n;
    },
    m(s, l) {
      B(s, n, l), y(n, r);
    },
    p(s, l) {
      e = s, l[0] & 1024 && i !== (i = e[73].label + "") && Te(r, i), l[0] & 1024 && o !== (o = e[73].value) && $(n, "value", o);
    },
    d(s) {
      s && j(n);
    }
  };
}
function ok(t, e) {
  let n, i = e[70][0] + "", r, o, s = [], l = /* @__PURE__ */ new Map(), a, f, c = e[70][1];
  const u = (h) => h[73].value;
  for (let h = 0; h < c.length; h += 1) {
    let d = xv(e, c, h), m = u(d);
    l.set(m, s[h] = rk(m, d));
  }
  return {
    key: t,
    first: null,
    c() {
      n = T("small"), r = le(i), o = q();
      for (let h = 0; h < s.length; h += 1)
        s[h].c();
      a = q(), f = T("sl-divider"), this.first = n;
    },
    m(h, d) {
      B(h, n, d), y(n, r), B(h, o, d);
      for (let m = 0; m < s.length; m += 1)
        s[m].m(h, d);
      B(h, a, d), B(h, f, d);
    },
    p(h, d) {
      e = h, d[0] & 1024 && i !== (i = e[70][0] + "") && Te(r, i), d[0] & 1024 && (c = e[70][1], s = fo(s, d, u, 1, e, c, l, a.parentNode, of, rk, a, xv));
    },
    d(h) {
      h && j(n), h && j(o);
      for (let d = 0; d < s.length; d += 1)
        s[d].d(h);
      h && j(a), h && j(f);
    }
  };
}
function sk(t) {
  let e, n = t[2].title + "", i;
  return {
    c() {
      e = T("h2"), i = le(n), mi(e, "margin-top", "0");
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, o) {
      o[0] & 4 && n !== (n = r[2].title + "") && Te(i, n);
    },
    d(r) {
      r && j(e);
    }
  };
}
function lk(t) {
  let e, n = t[2].description + "", i;
  return {
    c() {
      e = T("p"), i = le(n);
    },
    m(r, o) {
      B(r, e, o), y(e, i);
    },
    p(r, o) {
      o[0] & 4 && n !== (n = r[2].description + "") && Te(i, n);
    },
    d(r) {
      r && j(e);
    }
  };
}
function ak(t) {
  let e, n, i, r, o;
  return {
    c() {
      e = T("p"), n = T("a"), i = T("u"), i.textContent = "Contact here", o = le(` for improvements/feedback
			for this particular graph.`), p(n, "href", r = t[2].contact), p(n, "target", "_blank");
    },
    m(s, l) {
      B(s, e, l), y(e, n), y(n, i), y(e, o);
    },
    p(s, l) {
      l[0] & 4 && r !== (r = s[2].contact) && p(n, "href", r);
    },
    d(s) {
      s && j(e);
    }
  };
}
function tY(t) {
  var L, V, N;
  let e, n, i, r, o, s, l, a, f, c, u, h, d, m, g, _, b, w, v, M, S = t[2] && Hv(t), R = ((L = t[2]) == null ? void 0 : L.title) && sk(t), k = ((V = t[2]) == null ? void 0 : V.description) && lk(t), I = ((N = t[2]) == null ? void 0 : N.contact) && ak(t);
  return {
    c() {
      S && S.c(), e = q(), n = T("sl-dialog"), R && R.c(), i = q(), k && k.c(), r = q(), I && I.c(), o = q(), s = T("hr"), l = q(), a = T("p"), a.innerHTML = `The editor app <b>Grapher v230203+1</b> was created by
		<a href="https://github.com/nileshtrivedi" target="_blank">@nileshtrivedi</a>
		while being supported by
		<a href="https://foresight.org/tech-tree/" target="_blank">The Foresight Institute</a>
		who is using it for their
		<a href="https://github.com/foresight-org/LongevityTechTree" target="_blank">Nanotech, Neurotech, Healthspan, Space and Intelligent Cooperation
			tech trees</a>.`, f = q(), c = T("p"), c.innerHTML = 'The code for this tool is <a href="https://codeberg.org/nilesh/grapher" target="_blank">available as open-source</a>. Bug reports and PRs can be submitted there.', u = q(), h = T("sl-button"), h.textContent = "Close", d = q(), m = T("sl-dialog"), g = T("ul"), g.innerHTML = `<li><b>To create a new node</b>: Right-click on empty area and select
			&quot;Create New Node&quot;.</li> 
		<li><b>To create an edge</b>: Select source node by left-click, drag
			from one of the control points: ⊕ and release when on top of target
			node.</li> 
		<li><b>To create both a new node and an edge</b>: Select source-node and
			left-click on any of the control points: ⊕.</li> 
		<li><b>To create a child node</b>: Right-click on the parent node and
			choose &quot;Create child node&quot;.</li> 
		<li><b>To make one node child of another</b>: Drag it and drop it on
			parent node.</li> 
		<li><b>To delete node</b>: Right-click on the node and choose &quot;Delete&quot;
			either &quot;including dependents&quot; or &quot;leaving orphans&quot;.</li> 
		<li><b>To detach child node from its parent</b>: Right-click on the
			child node and choose &quot;Detach _ from _&quot;.</li> 
		<li><b>To add a comment on the graph</b>: Right-click on empty area and
			choose &quot;Create New Text Note&quot;.</li>`, _ = q(), b = T("sl-button"), b.textContent = "Close", mi(s, "margin", "40px 0"), $(h, "slot", "footer"), $(h, "variant", "primary"), $(n, "open", t[7]), $(n, "class", "dialog-overview"), $(b, "slot", "footer"), $(b, "variant", "primary"), $(m, "open", t[8]), $(m, "label", "Help"), $(m, "class", "dialog-overview");
    },
    m(W, U) {
      S && S.m(W, U), B(W, e, U), B(W, n, U), R && R.m(n, null), y(n, i), k && k.m(n, null), y(n, r), I && I.m(n, null), y(n, o), y(n, s), y(n, l), y(n, a), y(n, f), y(n, c), y(n, u), y(n, h), B(W, d, U), B(W, m, U), y(m, g), y(m, _), y(m, b), w = !0, v || (M = [
        X(KQ, "keydown", t[41]),
        X(h, "click", t[54]),
        X(n, "sl-hide", t[55]),
        X(n, "sl-show", t[56]),
        X(b, "click", t[57]),
        X(m, "sl-hide", t[58]),
        X(m, "sl-show", t[59])
      ], v = !0);
    },
    p(W, U) {
      var O, x, A;
      W[2] ? S ? (S.p(W, U), U[0] & 4 && C(S, 1)) : (S = Hv(W), S.c(), C(S, 1), S.m(e.parentNode, e)) : S && (me(), E(S, 1, 1, () => {
        S = null;
      }), pe()), (O = W[2]) != null && O.title ? R ? R.p(W, U) : (R = sk(W), R.c(), R.m(n, i)) : R && (R.d(1), R = null), (x = W[2]) != null && x.description ? k ? k.p(W, U) : (k = lk(W), k.c(), k.m(n, r)) : k && (k.d(1), k = null), (A = W[2]) != null && A.contact ? I ? I.p(W, U) : (I = ak(W), I.c(), I.m(n, o)) : I && (I.d(1), I = null), (!w || U[0] & 128) && $(n, "open", W[7]), (!w || U[0] & 256) && $(m, "open", W[8]);
    },
    i(W) {
      w || (C(S), w = !0);
    },
    o(W) {
      E(S), w = !1;
    },
    d(W) {
      S && S.d(W), W && j(e), W && j(n), R && R.d(), k && k.d(), I && I.d(), W && j(d), W && j(m), v = !1, et(M);
    }
  };
}
const fk = 5;
function nY(t) {
}
function iY(t) {
  if (!t)
    return Object.entries({});
  let n = t.items.filter((i) => ["node", "edge"].includes(i.kind)).map((i) => i.tags).flat().filter((i, r, o) => o.indexOf(i) === r).reduce(
    (i, r) => {
      let o = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[o] = i[o] ?? [], i[o].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return Object.entries(n);
}
function Jd(t, e) {
  let n = document.createElement("a");
  n.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(t)), n.setAttribute("download", e), n.style.display = "none", document.body.appendChild(n), n.click(), document.body.removeChild(n);
}
const ck = (t) => t.id, uk = (t) => t.id, hk = (t) => t.id;
function rY(t, e, n) {
  let i, r, { graphjsonpath: o } = e, { svgForTextBBox: s } = e, { config: l = { mode: "viewonly" } } = e, a = !1, f = !1, c, u = { versions: [], current: -1 }, h, d, m = !1, g = {}, _ = [], b = null, w = null, v, M, S = [], R;
  function k() {
    v && M && fr(v).transition().duration(300).call(R.transform, Ku.translate(0, 0).scale(1));
  }
  function I() {
    return l.mode == "editor";
  }
  zi(() => {
    o && fetch(o).then((Q) => Q.json()).then((Q) => {
      if (I()) {
        let ye = localStorage.getItem(o);
        n(2, c = Co(ye ? JSON.parse(ye) : Q, null, s));
      } else
        n(2, c = Co(Q, null, s));
      W(c);
    }), L();
  });
  function L() {
    window.location !== window.parent.location && n(11, m = !0);
  }
  function V() {
    u.current <= 0 || (n(2, c = structuredClone(u.versions[u.current - 1])), A(), n(3, u = {
      versions: u.versions,
      current: u.current - 1
    }));
  }
  function N() {
    u.current >= u.versions.length - 1 || (n(2, c = structuredClone(u.versions[u.current + 1])), A(), n(3, u = {
      versions: u.versions,
      current: u.current + 1
    }));
  }
  function W(Q) {
    let ye = u.versions.slice(u.versions.length == fk ? 1 : 0, u.current + 1);
    n(3, u = {
      versions: [...ye, structuredClone(Q)],
      current: Math.min(u.current + 1, fk - 1)
    });
  }
  function U() {
    n(3, u = { versions: [], current: -1 });
  }
  function O() {
    n(2, c.items = [], c), n(13, w = null), A(), W(c);
  }
  function x(Q) {
    x6(w[0], w[1], c, v, M), n(13, w = null), A(), W(c);
  }
  function A(Q) {
    n(5, v), n(6, M), n(4, _), n(2, c = Co(c, _, s, Q)), I() && localStorage.setItem(o, JSON.stringify(c));
  }
  function H(Q) {
    n(12, b = {
      x: Q.detail.rawEvent.clientX,
      y: Q.detail.rawEvent.clientY
    }), n(13, w = null);
    let ye = v.createSVGPoint();
    ye.x = b.x, ye.y = b.y;
    let at = ye.matrixTransform(M.getCTM().inverse()), pt = { x: at.x, y: at.y };
    n(12, b.edge = V6(Q.detail.source, pt, c), b), A();
  }
  function D(Q) {
    var ye;
    ["note", "edge"].includes(Q.detail.source.kind) || ["note", "edge"].includes((ye = _[0]) == null ? void 0 : ye.kind) ? n(4, _ = [Q.detail.source]) : Q.detail.rawEvent.ctrlKey || Q.detail.rawEvent.metaKey ? n(4, _ = [.../* @__PURE__ */ new Set([..._, Q.detail.source])]) : n(4, _ = [Q.detail.source]), n(12, b = {
      x: Q.detail.rawEvent.clientX,
      y: Q.detail.rawEvent.clientY
    }), n(13, w = null);
  }
  function P(Q) {
    var at;
    ["note", "edge"].includes(Q.detail.source.kind) || ["note", "edge"].includes((at = _[0]) == null ? void 0 : at.kind) ? n(4, _ = [Q.detail.source]) : Q.detail.rawEvent.ctrlKey || Q.detail.rawEvent.metaKey ? n(4, _ = [.../* @__PURE__ */ new Set([..._, Q.detail.source])]) : n(4, _ = [Q.detail.source]);
    let ye = Q.detail.source;
    if (b.edge && ye.kind === "node")
      n(12, b.edge.toId = ye.id, b), delete b.edge.toOrphan;
    else if (b.edge && ye.kind === "edge")
      $s(b.edge, c, !1), W(c);
    else if ((ye == null ? void 0 : ye.kind) === "node" && !b.hasOwnProperty("edge")) {
      let pt = v.createSVGPoint();
      pt.x = b.x, pt.y = b.y;
      let Wt = pt.matrixTransform(M.getCTM().inverse()), Ot = H6(Wt, ye, c);
      Ot && ye.parent != Ot.id && !Wc(c, Ot).map((yn) => yn.id).includes(ye.id) && I() && (ye.parent = Ot.id, W(c)), ye.id && Ot === void 0 && ee();
    }
    n(12, b = null), A();
  }
  function K(Q) {
    if (!I())
      return;
    let ye = Q.detail.source, pt = (c.theme.badges.indexOf(ye.badge) + 1) % c.theme.badges.length;
    ye.badge = c.theme.badges[pt], A();
  }
  function ne(Q) {
    let ye = Q.detail.source;
    ye.kind === "node" && (ye.is_collapsed = !ye.is_collapsed, A());
  }
  function z(Q, ye) {
    Q.forEach((at) => $s(at, c, ye)), W(c), n(4, _ = []), A(), n(13, w = null);
  }
  function Z(Q) {
    if (g = { x: Q.clientX, y: Q.clientY }, !(!_ || !b || !_[0] || !_[0].pos) && Q.buttons == 1 && I()) {
      if (b.edge) {
        let ye = v.createSVGPoint();
        ye.x = b.x + 20 * Math.cos(Math.atan2(b.y, b.x)), ye.y = b.y + 20 * Math.sin(Math.atan2(b.y, b.x)) - 20;
        let at = ye.matrixTransform(M.getCTM().inverse());
        n(12, b.edge.toOrphan = { pos: { x: at.x, y: at.y } }, b);
      } else {
        let ye = v.createSVGPoint();
        ye.x = b.x, ye.y = b.y;
        let at = ye.matrixTransform(M.getCTM().inverse()), pt = v.createSVGPoint();
        pt.x = g.x, pt.y = g.y;
        let Wt = pt.matrixTransform(M.getCTM().inverse());
        _.forEach((Ot) => Xd(Ot, c, Wt.x - at.x, Wt.y - at.y)), n(
          12,
          b.snap = _.map((Ot) => {
            var Cn, ln;
            let yn = ((Cn = c.theme.snapdist) == null ? void 0 : Cn.x) || 100, Pn = ((ln = c.theme.snapdist) == null ? void 0 : ln.y) || 100;
            return {
              x: Ot.width / 2 + Math.round((Ot.pos.x - Ot.width / 2) / yn) * yn,
              y: Ot.height / 2 + Math.round((Ot.pos.y - Ot.height / 2) / Pn) * Pn,
              width: Ot.width,
              height: Ot.height
            };
          }),
          b
        );
      }
      n(12, b.x = g.x, b), n(12, b.y = g.y, b), A({ kind: "movingitem", item: _ });
    }
  }
  function te(Q) {
    j6(w[0], w[1], c, v, M), W(c), A(), n(13, w = null);
  }
  function G(Q) {
    B6(w[0], w[1], c, v, M), A(), n(13, w = null);
  }
  function Ae(Q) {
    c.contextmenu && n(13, w = [Q.clientX, Q.clientY]);
  }
  function ke(Q) {
    console.log("handleCreateNode", Q.detail), F6(Q.detail.from, Q.detail.handle, c), W(c), A();
  }
  function ze(Q) {
    _ && (Q.key === "Backspace" || Q.key === "Delete") && (z(_, !1), W(c));
  }
  function ee() {
    b != null && b.snap && _.forEach((Q, ye) => {
      Xd(Q, c, b.snap[ye].x - Q.pos.x, b.snap[ye].y - Q.pos.y);
    });
  }
  function we(Q) {
    b != null && b.edge && $s(b.edge, c, !1), ee(), n(12, b = null), A();
  }
  function tt(Q) {
    n(4, _ = []), Q.buttons === 1 && (n(12, b = { x: Q.clientX, y: Q.clientY }), n(13, w = null));
  }
  function ge(Q) {
    let ye = Q.detail.source;
    ye && ($s(ye, c, !1), W(c)), A();
  }
  function ie(Q, ye) {
    z6(Q, c, ye, v, M), W(c), A(), n(13, w = null);
  }
  function ve(Q) {
    D6(Q, c), W(c), A(), n(13, w = null);
  }
  function Xe(Q) {
    n(2, c.theme = J6[Q], c), A();
  }
  function he(Q) {
    let ye = c.items.find((at) => at.kind === "node" && at.label === Q.value);
    fr(v).transition().duration(1500).call(R.transform, Ku.translate(500, 500).scale(1.8).translate(0 - ye.pos.x, 0 - ye.pos.y));
  }
  function Ve(Q) {
    let ye = Q.detail.item.value;
    if (ye.startsWith("theme."))
      Xe(ye.split(".")[1]);
    else if (ye === "clearlocalchanges")
      localStorage.removeItem(o), fetch(o).then((at) => at.json()).then((at) => {
        n(2, c = Co(at, null, s)), U(), A();
      });
    else if (ye === "switchtoeditormode")
      localStorage.getItem(o) != null && n(2, c = Co(JSON.parse(localStorage.getItem(o)), null, s)), n(0, l.mode = "editor", l);
    else if (ye.startsWith("export.")) {
      let at = ye.split(".")[1];
      at === "svg" ? Jd(v.outerHTML, `${i}.svg`) : at === "cytoscape" && Jd(q6(c), `${i}-cytoscape.json`);
    } else
      ye === "openfile" || (ye === "savefile" ? Jd(U6(c), `${i}.graph`) : ye === "undo" ? V() : ye === "redo" ? N() : ye === "clear" ? O() : ye === "about" ? n(7, a = !0) : ye === "help" && n(8, f = !0));
  }
  function Ie(Q) {
    let ye = Q.target.files[0], at = new FileReader();
    at.readAsText(ye), at.onload = (pt) => {
      n(2, c = Co(JSON.parse(pt.target.result), null, s)), A();
    };
  }
  const qe = (Q) => {
    (Q.metaKey || Q.ctrlKey) && Q.which === 90 && (Q.preventDefault(), (Q.shiftKey ? N : V)());
  };
  function ct(Q) {
    mt[Q ? "unshift" : "push"](() => {
      M = Q, n(6, M);
    });
  }
  function yt(Q) {
    mt[Q ? "unshift" : "push"](() => {
      v = Q, n(5, v);
    });
  }
  const Fe = (Q) => {
    n(2, c = Co(Q.detail, _, s)), A();
  }, Oe = (Q) => ie(Q, _[0]), ae = (Q) => ve(_[0]), xe = (Q) => z(_, !0), ht = (Q) => z(_, !1), ft = (Q) => Ie(Q), _n = (Q) => he(Q.target), Yn = (Q) => n(14, S = c.items.filter((ye) => ye.kind === "node" && ye.tags.includes(Q.target.value)).map((ye) => ye.id)), nt = (Q) => n(7, a = !1), sn = (Q) => n(7, a = !1), Dt = (Q) => n(7, a = !0), yi = (Q) => n(8, f = !1), Zn = (Q) => n(8, f = !1), Vt = (Q) => n(8, f = !0);
  return t.$$set = (Q) => {
    "graphjsonpath" in Q && n(42, o = Q.graphjsonpath), "svgForTextBBox" in Q && n(1, s = Q.svgForTextBBox), "config" in Q && n(0, l = Q.config);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 2048 && (i = o.split("/").pop().split("#")[0].split("?")[0].replace(/\.graph/, "")), t.$$.dirty[0] & 4 && (window.graph = c), t.$$.dirty[0] & 8 && (window.graphHistory = u), t.$$.dirty[0] & 4 && n(15, r = c ? c.items.filter((Q) => Q.kind === "node").sort((Q, ye) => Q.label.localeCompare(ye.label)) : []), t.$$.dirty[0] & 20 && n(9, h = W6(c, _)), t.$$.dirty[0] & 4 && n(10, d = iY(c)), t.$$.dirty[0] & 96 | t.$$.dirty[1] & 4096 && v && M && (n(43, R = JQ().on("zoom", ({ transform: Q }) => {
      fr(M).attr("transform", Q);
    })), fr(v).call(R));
  }, window.gpa = Wc, [
    l,
    s,
    c,
    u,
    _,
    v,
    M,
    a,
    f,
    h,
    d,
    m,
    b,
    w,
    S,
    r,
    k,
    I,
    O,
    x,
    A,
    H,
    D,
    P,
    K,
    ne,
    z,
    Z,
    te,
    G,
    Ae,
    ke,
    ze,
    we,
    tt,
    ge,
    ie,
    ve,
    he,
    Ve,
    Ie,
    qe,
    o,
    R,
    ct,
    yt,
    Fe,
    Oe,
    ae,
    xe,
    ht,
    ft,
    _n,
    Yn,
    nt,
    sn,
    Dt,
    yi,
    Zn,
    Vt
  ];
}
class oY extends Be {
  constructor(e) {
    super(), je(
      this,
      e,
      rY,
      tY,
      It,
      {
        graphjsonpath: 42,
        svgForTextBBox: 1,
        config: 0
      },
      null,
      [-1, -1, -1]
    );
  }
}
const cY = new oY({
  target: document.querySelector("#grapheditor"),
  props: {
    graphjsonpath: window.graphjsonpath,
    config: window.overrideConfig || { mode: "viewonly" },
    svgForTextBBox: document.getElementById("textbbox")
  }
});
export {
  cY as default
};
