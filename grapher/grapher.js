function ye() {
}
const N4 = (t) => t;
function Ko(t, e) {
  for (const n in e)
    t[n] = e[n];
  return t;
}
function L4(t) {
  return t();
}
function z_() {
  return /* @__PURE__ */ Object.create(null);
}
function ct(t) {
  t.forEach(L4);
}
function hi(t) {
  return typeof t == "function";
}
function Nt(t, e) {
  return t != t ? e == e : t !== e || t && typeof t == "object" || typeof t == "function";
}
let ff;
function jh(t, e) {
  return ff || (ff = document.createElement("a")), ff.href = e, t === ff.href;
}
function yt(t, e) {
  return t != t ? e == e : t !== e;
}
function rT(t) {
  return Object.keys(t).length === 0;
}
function sT(t, ...e) {
  if (t == null)
    return ye;
  const n = t.subscribe(...e);
  return n.unsubscribe ? () => n.unsubscribe() : n;
}
function zn(t, e, n, i) {
  if (t) {
    const r = j4(t, e, n, i);
    return t[0](r);
  }
}
function j4(t, e, n, i) {
  return t[1] && i ? Ko(n.ctx.slice(), t[1](i(e))) : n.ctx;
}
function Vn(t, e, n, i) {
  if (t[2] && i) {
    const r = t[2](i(n));
    if (e.dirty === void 0)
      return r;
    if (typeof r == "object") {
      const s = [], o = Math.max(e.dirty.length, r.length);
      for (let l = 0; l < o; l += 1)
        s[l] = e.dirty[l] | r[l];
      return s;
    }
    return e.dirty | r;
  }
  return e.dirty;
}
function Un(t, e, n, i, r, s) {
  if (r) {
    const o = j4(e, n, i, s);
    t.p(o, r);
  }
}
function Hn(t) {
  if (t.ctx.length > 32) {
    const e = [], n = t.ctx.length / 32;
    for (let i = 0; i < n; i++)
      e[i] = -1;
    return e;
  }
  return -1;
}
function oT(t) {
  const e = {};
  for (const n in t)
    e[n] = !0;
  return e;
}
function mn(t) {
  return t ?? "";
}
function bg(t, e, n) {
  return t.set(n), e;
}
function qi(t) {
  return t && hi(t.destroy) ? t.destroy : ye;
}
const B4 = typeof window < "u";
let lT = B4 ? () => window.performance.now() : () => Date.now(), k0 = B4 ? (t) => requestAnimationFrame(t) : ye;
const ha = /* @__PURE__ */ new Set();
function x4(t) {
  ha.forEach((e) => {
    e.c(t) || (ha.delete(e), e.f());
  }), ha.size !== 0 && k0(x4);
}
function aT(t) {
  let e;
  return ha.size === 0 && k0(x4), {
    promise: new Promise((n) => {
      ha.add(e = { c: t, f: n });
    }),
    abort() {
      ha.delete(e);
    }
  };
}
function E(t, e) {
  t.appendChild(e);
}
function F4(t) {
  if (!t)
    return document;
  const e = t.getRootNode ? t.getRootNode() : t.ownerDocument;
  return e && e.host ? e : t.ownerDocument;
}
function cT(t) {
  const e = j("style");
  return uT(F4(t), e), e.sheet;
}
function uT(t, e) {
  return E(t.head || t, e), e.sheet;
}
function U(t, e, n) {
  t.insertBefore(e, n || null);
}
function V(t) {
  t.parentNode && t.parentNode.removeChild(t);
}
function xt(t, e) {
  for (let n = 0; n < t.length; n += 1)
    t[n] && t[n].d(e);
}
function j(t) {
  return document.createElement(t);
}
function dt(t) {
  return document.createElementNS("http://www.w3.org/2000/svg", t);
}
function _e(t) {
  return document.createTextNode(t);
}
function Z() {
  return _e(" ");
}
function rt() {
  return _e("");
}
function re(t, e, n, i) {
  return t.addEventListener(e, n, i), () => t.removeEventListener(e, n, i);
}
function _r(t) {
  return function(e) {
    return e.preventDefault(), t.call(this, e);
  };
}
function Je(t) {
  return function(e) {
    return e.stopPropagation(), t.call(this, e);
  };
}
function b(t, e, n) {
  n == null ? t.removeAttribute(e) : t.getAttribute(e) !== n && t.setAttribute(e, n);
}
function V_(t, e) {
  const n = Object.getOwnPropertyDescriptors(t.__proto__);
  for (const i in e)
    e[i] == null ? t.removeAttribute(i) : i === "style" ? t.style.cssText = e[i] : i === "__value" ? t.value = t[i] = e[i] : n[i] && n[i].set ? t[i] = e[i] : b(t, i, e[i]);
}
function Bh(t, e) {
  for (const n in e)
    b(t, n, e[n]);
}
function oe(t, e, n) {
  e in t ? t[e] = typeof t[e] == "boolean" && n === "" ? !0 : n : b(t, e, n);
}
function fT(t) {
  return Array.from(t.childNodes);
}
function ze(t, e) {
  e = "" + e, t.wholeText !== e && (t.data = e);
}
function Po(t, e) {
  t.value = e ?? "";
}
function Ni(t, e, n, i) {
  n === null ? t.style.removeProperty(e) : t.style.setProperty(e, n, i ? "important" : "");
}
function Se(t, e, n) {
  t.classList[n ? "add" : "remove"](e);
}
function z4(t, e, { bubbles: n = !1, cancelable: i = !1 } = {}) {
  const r = document.createEvent("CustomEvent");
  return r.initCustomEvent(t, n, i, e), r;
}
function vs(t, e) {
  return new t(e);
}
const xh = /* @__PURE__ */ new Map();
let Fh = 0;
function hT(t) {
  let e = 5381, n = t.length;
  for (; n--; )
    e = (e << 5) - e ^ t.charCodeAt(n);
  return e >>> 0;
}
function dT(t, e) {
  const n = { stylesheet: cT(e), rules: {} };
  return xh.set(t, n), n;
}
function U_(t, e, n, i, r, s, o, l = 0) {
  const a = 16.666 / i;
  let c = `{
`;
  for (let m = 0; m <= 1; m += a) {
    const _ = e + (n - e) * s(m);
    c += m * 100 + `%{${o(_, 1 - _)}}
`;
  }
  const u = c + `100% {${o(n, 1 - n)}}
}`, f = `__svelte_${hT(u)}_${l}`, h = F4(t), { stylesheet: d, rules: p } = xh.get(h) || dT(h, t);
  p[f] || (p[f] = !0, d.insertRule(`@keyframes ${f} ${u}`, d.cssRules.length));
  const g = t.style.animation || "";
  return t.style.animation = `${g ? `${g}, ` : ""}${f} ${i}ms linear ${r}ms 1 both`, Fh += 1, f;
}
function pT(t, e) {
  const n = (t.style.animation || "").split(", "), i = n.filter(
    e ? (s) => s.indexOf(e) < 0 : (s) => s.indexOf("__svelte") === -1
  ), r = n.length - i.length;
  r && (t.style.animation = i.join(", "), Fh -= r, Fh || gT());
}
function gT() {
  k0(() => {
    Fh || (xh.forEach((t) => {
      const { ownerNode: e } = t.stylesheet;
      e && V(e);
    }), xh.clear());
  });
}
let Kc;
function Dc(t) {
  Kc = t;
}
function ec() {
  if (!Kc)
    throw new Error("Function called outside component initialization");
  return Kc;
}
function mT(t) {
  ec().$$.before_update.push(t);
}
function or(t) {
  ec().$$.on_mount.push(t);
}
function ks(t) {
  ec().$$.on_destroy.push(t);
}
function Vl() {
  const t = ec();
  return (e, n, { cancelable: i = !1 } = {}) => {
    const r = t.$$.callbacks[e];
    if (r) {
      const s = z4(e, n, { cancelable: i });
      return r.slice().forEach((o) => {
        o.call(t, s);
      }), !s.defaultPrevented;
    }
    return !0;
  };
}
function V4(t, e) {
  return ec().$$.context.set(t, e), e;
}
function gi(t) {
  return ec().$$.context.get(t);
}
function Ft(t, e) {
  const n = t.$$.callbacks[e.type];
  n && n.slice().forEach((i) => i.call(this, e));
}
const Ec = [], _t = [], ch = [], Om = [], U4 = Promise.resolve();
let Tm = !1;
function H4() {
  Tm || (Tm = !0, U4.then(W4));
}
function Qi() {
  return H4(), U4;
}
function Sa(t) {
  ch.push(t);
}
function Pr(t) {
  Om.push(t);
}
const _g = /* @__PURE__ */ new Set();
let hf = 0;
function W4() {
  const t = Kc;
  do {
    for (; hf < Ec.length; ) {
      const e = Ec[hf];
      hf++, Dc(e), bT(e.$$);
    }
    for (Dc(null), Ec.length = 0, hf = 0; _t.length; )
      _t.pop()();
    for (let e = 0; e < ch.length; e += 1) {
      const n = ch[e];
      _g.has(n) || (_g.add(n), n());
    }
    ch.length = 0;
  } while (Ec.length);
  for (; Om.length; )
    Om.pop()();
  Tm = !1, _g.clear(), Dc(t);
}
function bT(t) {
  if (t.fragment !== null) {
    t.update(), ct(t.before_update);
    const e = t.dirty;
    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, e), t.after_update.forEach(Sa);
  }
}
let dc;
function _T() {
  return dc || (dc = Promise.resolve(), dc.then(() => {
    dc = null;
  })), dc;
}
function yg(t, e, n) {
  t.dispatchEvent(z4(`${e ? "intro" : "outro"}${n}`));
}
const uh = /* @__PURE__ */ new Set();
let Us;
function Ae() {
  Us = {
    r: 0,
    c: [],
    p: Us
  };
}
function Me() {
  Us.r || ct(Us.c), Us = Us.p;
}
function P(t, e) {
  t && t.i && (uh.delete(t), t.i(e));
}
function x(t, e, n, i) {
  if (t && t.o) {
    if (uh.has(t))
      return;
    uh.add(t), Us.c.push(() => {
      uh.delete(t), i && (n && t.d(1), i());
    }), t.o(e);
  } else
    i && i();
}
const yT = { duration: 0 };
function df(t, e, n, i) {
  const r = { direction: "both" };
  let s = e(t, n, r), o = i ? 0 : 1, l = null, a = null, c = null;
  function u() {
    c && pT(t, c);
  }
  function f(d, p) {
    const g = d.b - o;
    return p *= Math.abs(g), {
      a: o,
      b: d.b,
      d: g,
      duration: p,
      start: d.start,
      end: d.start + p,
      group: d.group
    };
  }
  function h(d) {
    const { delay: p = 0, duration: g = 300, easing: m = N4, tick: _ = ye, css: S } = s || yT, v = {
      start: lT() + p,
      b: d
    };
    d || (v.group = Us, Us.r += 1), l || a ? a = v : (S && (u(), c = U_(t, o, d, g, p, m, S)), d && _(0, 1), l = f(v, g), Sa(() => yg(t, d, "start")), aT((k) => {
      if (a && k > a.start && (l = f(a, g), a = null, yg(t, l.b, "start"), S && (u(), c = U_(t, o, l.b, l.duration, 0, m, s.css))), l) {
        if (k >= l.end)
          _(o = l.b, 1 - o), yg(t, l.b, "end"), a || (l.b ? u() : --l.group.r || ct(l.group.c)), l = null;
        else if (k >= l.start) {
          const C = k - l.start;
          o = l.a + l.d * m(C / l.duration), _(o, 1 - o);
        }
      }
      return !!(l || a);
    }));
  }
  return {
    run(d) {
      hi(s) ? _T().then(() => {
        s = s(r), h(d);
      }) : h(d);
    },
    end() {
      u(), l = a = null;
    }
  };
}
const np = typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : global;
function Bu(t, e) {
  t.d(1), e.delete(t.key);
}
function ip(t, e) {
  x(t, 1, 1, () => {
    e.delete(t.key);
  });
}
function Ys(t, e, n, i, r, s, o, l, a, c, u, f) {
  let h = t.length, d = s.length, p = h;
  const g = {};
  for (; p--; )
    g[t[p].key] = p;
  const m = [], _ = /* @__PURE__ */ new Map(), S = /* @__PURE__ */ new Map();
  for (p = d; p--; ) {
    const A = f(r, s, p), w = n(A);
    let M = o.get(w);
    M ? i && M.p(A, e) : (M = c(w, A), M.c()), _.set(w, m[p] = M), w in g && S.set(w, Math.abs(p - g[w]));
  }
  const v = /* @__PURE__ */ new Set(), k = /* @__PURE__ */ new Set();
  function C(A) {
    P(A, 1), A.m(l, u), o.set(A.key, A), u = A.first, d--;
  }
  for (; h && d; ) {
    const A = m[d - 1], w = t[h - 1], M = A.key, N = w.key;
    A === w ? (u = A.first, h--, d--) : _.has(N) ? !o.has(M) || v.has(M) ? C(A) : k.has(N) ? h-- : S.get(M) > S.get(N) ? (k.add(M), C(A)) : (v.add(N), h--) : (a(w, o), h--);
  }
  for (; h--; ) {
    const A = t[h];
    _.has(A.key) || a(A, o);
  }
  for (; d; )
    C(m[d - 1]);
  return m;
}
function Ul(t, e) {
  const n = {}, i = {}, r = { $$scope: 1 };
  let s = t.length;
  for (; s--; ) {
    const o = t[s], l = e[s];
    if (l) {
      for (const a in o)
        a in l || (i[a] = 1);
      for (const a in l)
        r[a] || (n[a] = l[a], r[a] = 1);
      t[s] = l;
    } else
      for (const a in o)
        r[a] = 1;
  }
  for (const o in i)
    o in n || (n[o] = void 0);
  return n;
}
function rp(t) {
  return typeof t == "object" && t !== null ? t : {};
}
function Ir(t, e, n, i) {
  const r = t.$$.props[e];
  r !== void 0 && (t.$$.bound[r] = n, i === void 0 && n(t.$$.ctx[r]));
}
function ge(t) {
  t && t.c();
}
function de(t, e, n, i) {
  const { fragment: r, after_update: s } = t.$$;
  r && r.m(e, n), i || Sa(() => {
    const o = t.$$.on_mount.map(L4).filter(hi);
    t.$$.on_destroy ? t.$$.on_destroy.push(...o) : ct(o), t.$$.on_mount = [];
  }), s.forEach(Sa);
}
function pe(t, e) {
  const n = t.$$;
  n.fragment !== null && (ct(n.on_destroy), n.fragment && n.fragment.d(e), n.on_destroy = n.fragment = null, n.ctx = []);
}
function wT(t, e) {
  t.$$.dirty[0] === -1 && (Ec.push(t), H4(), t.$$.dirty.fill(0)), t.$$.dirty[e / 31 | 0] |= 1 << e % 31;
}
function Ke(t, e, n, i, r, s, o, l = [-1]) {
  const a = Kc;
  Dc(t);
  const c = t.$$ = {
    fragment: null,
    ctx: [],
    props: s,
    update: ye,
    not_equal: r,
    bound: z_(),
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (a ? a.$$.context : [])),
    callbacks: z_(),
    dirty: l,
    skip_bound: !1,
    root: e.target || a.$$.root
  };
  o && o(c.root);
  let u = !1;
  if (c.ctx = n ? n(t, e.props || {}, (f, h, ...d) => {
    const p = d.length ? d[0] : h;
    return c.ctx && r(c.ctx[f], c.ctx[f] = p) && (!c.skip_bound && c.bound[f] && c.bound[f](p), u && wT(t, f)), h;
  }) : [], c.update(), u = !0, ct(c.before_update), c.fragment = i ? i(c.ctx) : !1, e.target) {
    if (e.hydrate) {
      const f = fT(e.target);
      c.fragment && c.fragment.l(f), f.forEach(V);
    } else
      c.fragment && c.fragment.c();
    e.intro && P(t.$$.fragment), de(t, e.target, e.anchor, e.customElement), W4();
  }
  Dc(a);
}
class Ge {
  $destroy() {
    pe(this, 1), this.$destroy = ye;
  }
  $on(e, n) {
    if (!hi(n))
      return ye;
    const i = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return i.push(n), () => {
      const r = i.indexOf(n);
      r !== -1 && i.splice(r, 1);
    };
  }
  $set(e) {
    this.$$set && !rT(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);
  }
}
function Fn(t, e) {
  return e && t && e.items.find((n) => n.id === t);
}
function vT(t, e) {
  return t.items.filter((n) => n.kind === "node").forEach((n) => {
    n.children = [], (!n.pos || !n.pos.hasOwnProperty("x") || !n.pos.hasOwnProperty("y")) && (console.error(`Got null position for ${n.label}`), n.pos = { x: Math.random() * 600, y: Math.random() * 600 }), n.notes = n.notes ?? "", n.hasOwnProperty("parent") || (n.parent = null);
  }), t.items.filter((n) => n.kind === "note").forEach((n) => {
    n.children = [];
  }), t.items.forEach((n) => {
    if (n.parent) {
      let i = Fn(n.parent, t);
      if (!i) {
        delete n.parent;
        return;
      }
      i.children = [...i.children || [], n.id];
    }
  }), t;
}
function kT(t, e) {
  let n = Fn(t.parent, e);
  return n && (t.parent = n.parent), e;
}
function Rm(t, e, n, i) {
  t.pos.x += n, t.pos.y += i, (t.children || []).forEach((r) => {
    let s = Fn(r, e);
    Rm(s, e, n, i);
  });
}
function Pm(t, e, n, i) {
  var v;
  if ((t.children || []).forEach((k) => {
    let C = Fn(k, e);
    Pm(C, e, n, i);
  }), i && i.kind === "movingitem" && !i.item.map((k) => C0(e, k)).flat().includes(t))
    return;
  let r = t.nodenotesfontsize || e.theme.nodenotesfontsize || 16, s = Math.min(300, t.notes ? t.notes.length * (r - 6) : 0), o = t.notes ? (Math.ceil(t.notes.length * (r - 6) / s) + t.notes.split(/\r\n|\r|\n/).length) * (r + 4) : 0;
  t.noteswidth = s, t.notesheight = o;
  let l = t.has_dynamic_notes ? 140 : 0, a = t.children.length > 0 || ((v = t.notes) == null ? void 0 : v.length) > 0 ? "700" : "300", c = t.nodelabelfontsize || e.theme.nodelabelfontsize || 16, u = ET(n, t.label, e.theme.font, c, a);
  t.labelwidth = u.width + 60, t.labelheight = u.height;
  let f = Math.max(t.labelwidth / 2, s / 2), h = Math.max(...t.children.map((k) => {
    let C = Fn(k, e);
    return C.pos.x + C.width / 2 + 15;
  }), t.pos.x) - t.pos.x, d = t.pos.x - Math.min(...t.children.map((k) => {
    let C = Fn(k, e);
    return C.pos.x - C.width / 2 - 15;
  }), t.pos.x);
  t.is_collapsed ? t.width = 2 * f + 20 : t.width = 2 * Math.max(f, h, d) + 20;
  let p = t.labelheight / 2 + o / 2 + l / 2, g = t.children.map((k) => {
    let C = Fn(k, e);
    return C.pos.y + C.height / 2 + 20;
  }), m = Math.max(...g, t.pos.y) - t.pos.y, _ = t.children.map((k) => {
    let C = Fn(k, e);
    return C.pos.y - C.height / 2 - 20 - 30 - o - l;
  }), S = t.pos.y - Math.min(..._, t.pos.y);
  t.is_collapsed ? t.height = 2 * p + 20 : t.height = 2 * Math.max(p, S, m) + 20;
}
function q4(t, e, n, i) {
  t.level = i && i.id === t.id ? 500 + n : n, t.children.forEach((r) => q4(Fn(r, e), e, t.level + 2, i));
}
function uo(t, e, n, i) {
  return t ? (vT(t), t.items.filter((r) => r.kind === "node" && !r.parent).forEach((r) => {
    Pm(r, t, n, i), q4(r, t, 0, e);
  }), t.items.filter((r) => r.kind === "note").forEach((r) => {
    Pm(r, t, n, i);
  }), t.items.filter((r) => r.kind === "edge").forEach((r) => {
    r.level = Math.min(
      r.fromId ? Fn(r.fromId, t).level : 20,
      r.toId ? Fn(r.toId, t).level : 20
    ) - 1;
  }), t) : null;
}
function la(t, e, n) {
  t.kind === "edge" || t.kind === "note" ? e.items = e.items.filter((i) => i != t) : t.kind === "node" && (n ? (e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    la(i, e, !1);
  }), e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    la(i, e, !0);
  }), e.items = e.items.filter((i) => i != t)) : (e.items.filter((i) => i.kind === "node" && i.parent === t.id).forEach((i) => {
    t.parent ? i.parent = t.parent : delete i.parent;
  }), e.items.filter((i) => i.kind === "edge" && [i.fromId, i.toId].includes(t.id)).forEach((i) => {
    i.fromId === t.id && (t.parent ? i.fromId = t.parent : (delete i.fromId, i.fromOrphan = { pos: { x: t.pos.x, y: t.pos.y } })), i.toId === t.id && (t.parent ? i.toId = t.parent : (delete i.toId, i.toOrphan = { pos: { x: t.pos.x, y: t.pos.y } }));
  }), e.items = e.items.filter((i) => i != t)));
}
function CT(t, e, n, i, r) {
  let s = Ea(n);
  n.items.push({
    id: s,
    kind: "node",
    label: `New node ${s}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Gc(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function ST(t, e, n, i, r) {
  let s = Ea(n);
  n.items.push({
    id: s,
    kind: "note",
    label: "Add your notes here",
    notes: "some extra content",
    pos: Gc(i, t, e, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null
  });
}
function Gc(t, e, n, i) {
  const r = t.createSVGPoint();
  r.x = e, r.y = n;
  let s = r.matrixTransform(i.getCTM().inverse());
  return { x: s.x, y: s.y };
}
function ET(t, e, n, i, r) {
  let s = "http://www.w3.org/2000/svg";
  var o = document.createElementNS(s, "text");
  o.setAttribute("font-family", n), o.setAttribute("font-size", i), o.setAttribute("font-weight", r), o.setAttributeNS(s, "x", 200), o.setAttributeNS(s, "y", 300), o.textContent = e, t.appendChild(o);
  var l = o.getBBox();
  return o.parentNode.removeChild(o), l;
}
function Ea(t) {
  return Math.max(...t.items.map((e) => e.id), 0) + 1;
}
function AT(t, e, n, i, r) {
  let s = Gc(i, t, e, r), o = Gc(i, window.innerWidth, window.innerHeight, r);
  n.items.forEach((l) => {
    l.pos && (l.pos.x -= Math.round(s.x - o.x / 2), l.pos.y -= Math.round(s.y - o.y / 2));
  });
}
function MT(t, e, n, i, r) {
  let s = Ea(e);
  e.items.push({
    id: s,
    kind: "node",
    label: `New node ${s}`,
    desc: "",
    link: "",
    tags: [],
    children: [],
    pos: Gc(i, t.clientX, t.clientY, r),
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    parent: n.id
  });
}
function OT(t, e, n) {
  let i = {
    id: Ea(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toOrphan: { pos: { x: e.x, y: e.y } },
    directed: !0,
    weight: 5
  };
  return n.items.push(i), i;
}
function TT(t, e, n) {
  console.log("createGraphNodeEdge");
  let i = Ea(n);
  n.items.push({
    id: i,
    kind: "node",
    label: `New node ${i}`,
    desc: "",
    link: "",
    tags: [],
    parent: t.parent,
    children: [],
    pos: {
      x: t.pos.x + (100 + t.width / 2 + Math.random() * 100) * (Math.floor(e / 10) - 2),
      y: t.pos.y + (100 + t.height / 2 + Math.random() * 100) * (e % 10 - 2)
    },
    nodelabelfontsize: null,
    nodenotesfontsize: null,
    fill: t.fill,
    stroke: t.stroke
  }), n.items.push({
    id: Ea(n),
    kind: "edge",
    label: "",
    desc: "",
    link: "",
    tags: [],
    shape: "straight",
    fromId: t.id,
    toId: i,
    directed: !0,
    weight: 5
  });
}
function RT(t, e, n) {
  return n.items.filter((r) => r.kind === "node").filter((r) => r.id != e.id).filter((r) => t.x > r.pos.x - r.width / 2 && t.x < r.pos.x + r.width / 2 && t.y > r.pos.y - r.height / 2 && t.y < r.pos.y + r.height / 2).sort((r, s) => s.level - r.level)[0];
}
function J4(t, e, n) {
  return e.kind !== "node" ? [] : t.items.filter((s) => s.kind === "edge" && s.toId === e.id).map((s) => {
    let o = Fn(s.fromId, t);
    return { node: o, parents: n == 2 ? [] : J4(t, o, n + 1) };
  });
}
function C0(t, e) {
  if (e == null)
    return [];
  if (e.kind !== "node")
    return [];
  if (e.parent == null)
    return [];
  let n = Fn(e.parent, t);
  return [...C0(t, n), n];
}
function Aa(t, e) {
  if (t.kind === "edge")
    return Aa(Fn(t.fromId, e), e) && Aa(Fn(t.toId, e), e);
  if (t.kind === "note")
    return !1;
  let n = t.parent;
  for (; n; ) {
    let i = Fn(n, e);
    if (!i)
      return console.error(
        `item ${t.label}'s parent ${n} is missing`
      ), !1;
    if (i.is_collapsed)
      return i;
    n = i.parent;
  }
  return !1;
}
function PT(t, e) {
  if (!t)
    return [];
  let n = e[e.length - 1];
  return (n == null ? void 0 : n.kind) === "edge" ? [
    ...t.items.sort((i, r) => i.level - r.level).filter((i) => i.id !== n.id).filter((i) => !Aa(i, t)),
    ...t.items.filter((i) => i.id === n.id)
  ] : t.items.sort((i, r) => i.level - r.level).filter((i) => !Aa(i, t));
}
function IT(t) {
  let e = {};
  return e.items = t.items.map((n) => {
    if (n.kind === "node")
      return {
        id: n.id,
        kind: "node",
        label: n.label,
        notes: n.notes,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        has_dynamic_notes: n.has_dynamic_notes || !1,
        labelcolor: n.labelcolor,
        is_collapsed: n.is_collapsed || !1,
        parent: n.parent,
        pos: n.pos,
        fill: n.fill,
        stroke: n.stroke,
        badge: n.badge,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
    if (n.kind === "edge")
      return {
        id: n.id,
        kind: "edge",
        label: n.label,
        desc: n.desc,
        link: n.link,
        tags: n.tags,
        stroke: n.stroke,
        strokeType: n.strokeType,
        directed: n.directed,
        weight: n.weight,
        fromId: n.fromId,
        toId: n.toId,
        shape: n.shape,
        fromOrphan: n.fromOrphan,
        toOrphan: n.toOrphan
      };
    if (n.kind === "note")
      return {
        id: n.id,
        kind: n.kind,
        pos: n.pos,
        label: n.label,
        notes: n.notes,
        labelcolor: n.labelcolor,
        nodelabelfontsize: n.nodelabelfontsize,
        nodenotesfontsize: n.nodenotesfontsize,
        backgroundImageURL: n.backgroundImageURL || null
      };
  }).sort((n, i) => n.kind === i.kind ? (n.parent || 0) - (i.parent || 0) : n.kind.localeCompare(i.kind)), e.grid = t.grid, e.theme = t.theme, e.jsondownload = t.jsondownload, e.jsonupload = t.jsonupload, e.contextmenu = t.contextmenu, e.customjson = t.customjson, e.exportcytoscape = t.exportcytoscape, e.exportsvg = t.exportsvg, e.title = t.title || "", e.description = t.description || "", e.contact = t.contact || "", JSON.stringify(e, null, 2);
}
function DT(t) {
  let e = {};
  return e.elements = t.items.filter((n) => n.kind === "node" || n.fromId && n.toId).map((n) => {
    if (n.kind === "node")
      return {
        group: "nodes",
        data: {
          id: n.id,
          parent: n.parent
        },
        position: { x: n.pos.x, y: n.pos.y }
      };
    if (n.kind === "edge")
      return {
        group: "edges",
        data: {
          id: n.id,
          source: n.fromId,
          target: n.toId
        }
      };
  }), JSON.stringify(e, null, 2);
}
const NT = {
  elegant: {
    name: "elegant",
    bgfill: "#334155",
    grid: "cartesian",
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#bae6fd",
    nodelabelstroke: "#334155",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 2,
    nodeBackgroundImageURL: null,
    edgestroke: "red",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "Dosis",
    badges: ["âœ…", "âŒ", "âš¡", "ðŸ‘Ž", "ðŸ‘"]
  },
  foresight: {
    name: "foresight",
    bgfill: "#1c170b",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    nodefill: "#7b9ecb",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "white",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#ccc",
    edgeshape: "ortho",
    edgestroketype: "solid",
    font: "Roboto Condensed",
    badges: ["âœ…", "âŒ", "âš¡", "ðŸ‘Ž", "ðŸ‘", "https://cdn.discordapp.com/attachments/987690735639875584/997881951534981203/hexbadge.png"]
  },
  minimal: {
    name: "minimal",
    bgfill: "#e5e7eb",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "#1f2937",
    highlightColor: "red",
    nodefill: "white",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 15,
    nodeBackgroundImageURL: null,
    edgestroke: "#1f2937",
    edgeshape: "curved",
    edgestroketype: "solid",
    font: "PT Mono",
    badges: ["âœ…", "âŒ", "âš¡", "ðŸ‘Ž", "ðŸ‘"]
  },
  classic: {
    name: "classic",
    bgfill: "#f3f3f3",
    grid: !1,
    snapdist: { x: 100, y: 100 },
    selectionColor: "blue",
    highlightColor: "red",
    font: "Balsamiq Sans",
    nodefill: "#fbe6a3",
    nodelabelstroke: "black",
    nodelabelfontsize: 16,
    nodenotesfontsize: 16,
    nodeborder: "black",
    nodeborderradius: 5,
    nodeBackgroundImageURL: null,
    edgestroke: "#4277dd",
    edgeshape: "curved",
    edgestroketype: "solid",
    badges: ["âœ…", "âŒ", "âš¡", "ðŸ‘Ž", "ðŸ‘"]
  }
};
function LT(t) {
  let e, n, i, r;
  return {
    c() {
      e = dt("path"), b(e, "d", n = `M ${t[1] - t[3]},${t[2] - t[3]} l ${2 * t[3]},${2 * t[3]} M ${t[1] + t[3]},${t[2] - t[3]} l ${-2 * t[3]},${2 * t[3]}`), b(e, "data-handle", t[4]), b(e, "class", "svelte-qkserr");
    },
    m(s, o) {
      U(s, e, o), i || (r = [
        re(e, "click", t[8]),
        re(e, "mousedown", Je(t[9]))
      ], i = !0);
    },
    p(s, o) {
      o & 14 && n !== (n = `M ${s[1] - s[3]},${s[2] - s[3]} l ${2 * s[3]},${2 * s[3]} M ${s[1] + s[3]},${s[2] - s[3]} l ${-2 * s[3]},${2 * s[3]}`) && b(e, "d", n), o & 16 && b(e, "data-handle", s[4]);
    },
    d(s) {
      s && V(e), i = !1, ct(r);
    }
  };
}
function jT(t) {
  let e, n, i, r;
  return {
    c() {
      e = dt("path"), b(e, "d", n = `M ${t[1]},${t[2] - t[3]} v ${2 * t[3]} M ${t[1] - t[3]},${t[2]} h ${2 * t[3]}`), b(e, "data-handle", t[4]), b(e, "class", "svelte-qkserr");
    },
    m(s, o) {
      U(s, e, o), i || (r = [
        re(e, "click", t[6]),
        re(e, "mousedown", Je(t[7]))
      ], i = !0);
    },
    p(s, o) {
      o & 14 && n !== (n = `M ${s[1]},${s[2] - s[3]} v ${2 * s[3]} M ${s[1] - s[3]},${s[2]} h ${2 * s[3]}`) && b(e, "d", n), o & 16 && b(e, "data-handle", s[4]);
    },
    d(s) {
      s && V(e), i = !1, ct(r);
    }
  };
}
function BT(t) {
  let e, n, i, r, s;
  function o(c, u) {
    if (c[0] === "plus")
      return jT;
    if (c[0] === "cross")
      return LT;
  }
  let l = o(t), a = l && l(t);
  return {
    c() {
      e = dt("g"), n = dt("circle"), a && a.c(), b(n, "cx", t[1]), b(n, "cy", t[2]), b(n, "r", i = t[3] + 2), b(n, "title", t[5]), b(n, "data-handle", t[4]), b(n, "class", "svelte-qkserr"), b(e, "class", "svelte-qkserr");
    },
    m(c, u) {
      U(c, e, u), E(e, n), a && a.m(e, null), r || (s = [
        re(n, "click", t[10]),
        re(n, "mousedown", Je(t[11]))
      ], r = !0);
    },
    p(c, [u]) {
      u & 2 && b(n, "cx", c[1]), u & 4 && b(n, "cy", c[2]), u & 8 && i !== (i = c[3] + 2) && b(n, "r", i), u & 32 && b(n, "title", c[5]), u & 16 && b(n, "data-handle", c[4]), l === (l = o(c)) && a ? a.p(c, u) : (a && a.d(1), a = l && l(c), a && (a.c(), a.m(e, null)));
    },
    i: ye,
    o: ye,
    d(c) {
      c && V(e), a && a.d(), r = !1, ct(s);
    }
  };
}
function xT(t, e, n) {
  let { kind: i = "plus" } = e, { x: r } = e, { y: s } = e, { size: o = 4 } = e, { data: l } = e, { title: a } = e;
  function c(g) {
    Ft.call(this, t, g);
  }
  function u(g) {
    Ft.call(this, t, g);
  }
  function f(g) {
    Ft.call(this, t, g);
  }
  function h(g) {
    Ft.call(this, t, g);
  }
  function d(g) {
    Ft.call(this, t, g);
  }
  function p(g) {
    Ft.call(this, t, g);
  }
  return t.$$set = (g) => {
    "kind" in g && n(0, i = g.kind), "x" in g && n(1, r = g.x), "y" in g && n(2, s = g.y), "size" in g && n(3, o = g.size), "data" in g && n(4, l = g.data), "title" in g && n(5, a = g.title);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p
  ];
}
class S0 extends Ge {
  constructor(e) {
    super(), Ke(this, e, xT, BT, Nt, {
      kind: 0,
      x: 1,
      y: 2,
      size: 3,
      data: 4,
      title: 5
    });
  }
}
function H_(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function W_(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = dt("image"), b(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), b(e, "height", i = t[1].height), b(e, "width", r = t[1].width), b(e, "preserveAspectRatio", "none"), b(e, "x", s = t[1].pos.x - t[1].width / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2);
    },
    m(c, u) {
      U(c, e, u), l || (a = [
        re(e, "mousedown", Je(t[19])),
        re(e, "mouseup", Je(t[20])),
        re(e, "click", Je(t[15]))
      ], l = !0);
    },
    p(c, u) {
      u[0] & 3 && n !== (n = c[1].backgroundImageURL || c[0].nodeBackgroundImageURL) && b(e, "href", n), u[0] & 2 && i !== (i = c[1].height) && b(e, "height", i), u[0] & 2 && r !== (r = c[1].width) && b(e, "width", r), u[0] & 2 && s !== (s = c[1].pos.x - c[1].width / 2) && b(e, "x", s), u[0] & 2 && o !== (o = c[1].pos.y - c[1].height / 2) && b(e, "y", o);
    },
    d(c) {
      c && V(e), l = !1, ct(a);
    }
  };
}
function q_(t) {
  let e, n, i = t[1].notes + "", r, s, o, l, a, c, u, f, h, d;
  return {
    c() {
      e = dt("foreignObject"), n = j("div"), r = _e(i), s = Z(), b(n, "class", "foreign-obj-div svelte-1td5oib"), b(e, "x", o = t[1].pos.x - t[1].noteswidth / 2), b(e, "y", l = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), b(e, "font-family", a = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", c = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", u = t[1].noteswidth), b(e, "height", f = t[1].notesheight);
    },
    m(p, g) {
      U(p, e, g), E(e, n), E(n, r), E(n, s), h || (d = [
        re(e, "mousedown", Je(t[23])),
        re(e, "mouseup", Je(t[24])),
        re(e, "click", Je(t[13]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && i !== (i = p[1].notes + "") && ze(r, i), g[0] & 2 && o !== (o = p[1].pos.x - p[1].noteswidth / 2) && b(e, "x", o), g[0] & 2 && l !== (l = p[1].pos.y - p[1].height / 2 + p[1].labelheight + 10) && b(e, "y", l), g[0] & 1 && a !== (a = p[0].font) && b(e, "font-family", a), g[0] & 3 && c !== (c = p[1].nodenotesfontsize || p[0].nodenotesfontsize || 16) && b(e, "font-size", c), g[0] & 2 && u !== (u = p[1].noteswidth) && b(e, "width", u), g[0] & 2 && f !== (f = p[1].notesheight) && b(e, "height", f);
    },
    d(p) {
      p && V(e), h = !1, ct(d);
    }
  };
}
function J_(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = dt("foreignObject"), n = document.createElementNS("http://www.w3.org/1999/xhtml", "div"), b(n, "xmlns", "http://www.w3.org/1999/xhtml"), b(n, "class", "dynamicnotes-div svelte-1td5oib"), b(e, "x", i = t[1].pos.x - t[1].width / 2), b(e, "y", r = t[1].pos.y - t[1].height / 2 + 30 + t[1].notesheight), b(e, "font-family", s = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", o = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", l = t[1].width), b(e, "height", 140);
    },
    m(u, f) {
      U(u, e, f), E(e, n), n.innerHTML = t[6], a || (c = [
        re(e, "mousedown", Je(t[25])),
        re(e, "mouseup", Je(t[26])),
        re(e, "click", Je(t[12]))
      ], a = !0);
    },
    p(u, f) {
      f[0] & 64 && (n.innerHTML = u[6]), f[0] & 2 && i !== (i = u[1].pos.x - u[1].width / 2) && b(e, "x", i), f[0] & 2 && r !== (r = u[1].pos.y - u[1].height / 2 + 30 + u[1].notesheight) && b(e, "y", r), f[0] & 1 && s !== (s = u[0].font) && b(e, "font-family", s), f[0] & 3 && o !== (o = u[1].nodenotesfontsize || u[0].nodenotesfontsize || 16) && b(e, "font-size", o), f[0] & 2 && l !== (l = u[1].width) && b(e, "width", l);
    },
    d(u) {
      u && V(e), a = !1, ct(c);
    }
  };
}
function K_(t) {
  let e, n, i = [[1, 0], [0, 1], [-1, 0], [0, -1]], r = [];
  for (let o = 0; o < 4; o += 1)
    r[o] = G_(H_(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < 4; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < 4; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 770) {
        i = [[1, 0], [0, 1], [-1, 0], [0, -1]];
        let a;
        for (a = 0; a < 4; a += 1) {
          const c = H_(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = G_(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = 4; a < 4; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < 4; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < 4; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function G_(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "plus",
      data: 22 + t[38][1] + 10 * t[38][0],
      x: t[1].pos.x + t[38][0] * t[1].width / 2,
      y: t[1].pos.y + t[38][1] * t[1].height / 2,
      title: "Create new connected node",
      size: 4
    }
  }), e.$on("click", t[8]), e.$on("mousedown", t[9]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.x = i[1].pos.x + i[38][0] * i[1].width / 2), r[0] & 2 && (s.y = i[1].pos.y + i[38][1] * i[1].height / 2), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Y_(t) {
  let e, n;
  function i(o, l) {
    return l[0] & 2 && (n = null), n == null && (n = !!o[1].badge.startsWith("http")), n ? zT : FT;
  }
  let r = i(t, [-1, -1]), s = r(t);
  return {
    c() {
      e = dt("g"), s.c(), b(e, "class", "badge");
    },
    m(o, l) {
      U(o, e, l), s.m(e, null);
    },
    p(o, l) {
      r === (r = i(o, l)) && s ? s.p(o, l) : (s.d(1), s = r(o), s && (s.c(), s.m(e, null)));
    },
    d(o) {
      o && V(e), s.d();
    }
  };
}
function FT(t) {
  let e, n, i, r, s = t[1].badge + "", o, l, a, c, u;
  return {
    c() {
      e = dt("circle"), r = dt("text"), o = _e(s), b(e, "cx", n = t[1].pos.x - t[1].width / 2), b(e, "cy", i = t[1].pos.y - t[1].height / 2), b(e, "r", 10), b(e, "fill", "white"), b(e, "stroke", "orange"), b(r, "x", l = t[1].pos.x - t[1].width / 2 - 7), b(r, "y", a = t[1].pos.y - t[1].height / 2 + 6), b(r, "stroke", "white"), b(r, "fill", "white"), b(r, "class", "svelte-1td5oib");
    },
    m(f, h) {
      U(f, e, h), U(f, r, h), E(r, o), c || (u = [
        re(e, "mousedown", Je(t[30])),
        re(e, "mouseup", Je(t[31])),
        re(e, "click", Je(t[32])),
        re(r, "mousedown", Je(t[33])),
        re(r, "mouseup", Je(t[34])),
        re(r, "click", Je(t[35]))
      ], c = !0);
    },
    p(f, h) {
      h[0] & 2 && n !== (n = f[1].pos.x - f[1].width / 2) && b(e, "cx", n), h[0] & 2 && i !== (i = f[1].pos.y - f[1].height / 2) && b(e, "cy", i), h[0] & 2 && s !== (s = f[1].badge + "") && ze(o, s), h[0] & 2 && l !== (l = f[1].pos.x - f[1].width / 2 - 7) && b(r, "x", l), h[0] & 2 && a !== (a = f[1].pos.y - f[1].height / 2 + 6) && b(r, "y", a);
    },
    d(f) {
      f && V(e), f && V(r), c = !1, ct(u);
    }
  };
}
function zT(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = dt("image"), b(e, "x", n = t[1].pos.x - t[1].width / 2 - 10), b(e, "y", i = t[1].pos.y - t[1].height / 2 - 10), b(e, "width", 30), b(e, "height", 28), b(e, "href", r = t[1].badge);
    },
    m(l, a) {
      U(l, e, a), s || (o = [
        re(e, "mousedown", Je(t[27])),
        re(e, "mouseup", Je(t[28])),
        re(e, "click", Je(t[29]))
      ], s = !0);
    },
    p(l, a) {
      a[0] & 2 && n !== (n = l[1].pos.x - l[1].width / 2 - 10) && b(e, "x", n), a[0] & 2 && i !== (i = l[1].pos.y - l[1].height / 2 - 10) && b(e, "y", i), a[0] & 2 && r !== (r = l[1].badge) && b(e, "href", r);
    },
    d(l) {
      l && V(e), s = !1, ct(o);
    }
  };
}
function X_(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d;
  return {
    c() {
      e = dt("polygon"), o = dt("line"), b(e, "points", n = [
        [
          t[1].pos.x + t[1].width / 2 - 24,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 - 4
        ].join(","),
        [
          t[1].pos.x + t[1].width / 2 + 4,
          t[1].pos.y - t[1].height / 2 + 24
        ].join(",")
      ].join(" ")), b(e, "fill", i = t[5] ? "transparent" : t[1].is_collapsed ? t[1].fill || t[0].nodefill : t[0].bgfill), b(e, "stroke", r = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(e, "stroke-width", s = t[3] || t[4] ? "2px" : "1px"), b(e, "class", "svelte-1td5oib"), b(o, "x1", l = t[1].pos.x + t[1].width / 2 - 27), b(o, "y1", a = t[1].pos.y - t[1].height / 2), b(o, "x2", c = t[1].pos.x + t[1].width / 2), b(o, "y2", u = t[1].pos.y - t[1].height / 2 + 27), b(o, "stroke", f = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(o, "stroke-width", "3px");
    },
    m(p, g) {
      U(p, e, g), U(p, o, g), h || (d = [
        re(e, "mousedown", Je(t[10])),
        re(e, "mouseup", Je(t[11])),
        re(e, "click", Je(t[36]))
      ], h = !0);
    },
    p(p, g) {
      g[0] & 2 && n !== (n = [
        [
          p[1].pos.x + p[1].width / 2 - 24,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 - 4
        ].join(","),
        [
          p[1].pos.x + p[1].width / 2 + 4,
          p[1].pos.y - p[1].height / 2 + 24
        ].join(",")
      ].join(" ")) && b(e, "points", n), g[0] & 35 && i !== (i = p[5] ? "transparent" : p[1].is_collapsed ? p[1].fill || p[0].nodefill : p[0].bgfill) && b(e, "fill", i), g[0] & 27 && r !== (r = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && b(e, "stroke", r), g[0] & 24 && s !== (s = p[3] || p[4] ? "2px" : "1px") && b(e, "stroke-width", s), g[0] & 2 && l !== (l = p[1].pos.x + p[1].width / 2 - 27) && b(o, "x1", l), g[0] & 2 && a !== (a = p[1].pos.y - p[1].height / 2) && b(o, "y1", a), g[0] & 2 && c !== (c = p[1].pos.x + p[1].width / 2) && b(o, "x2", c), g[0] & 2 && u !== (u = p[1].pos.y - p[1].height / 2 + 27) && b(o, "y2", u), g[0] & 27 && f !== (f = p[3] ? p[0].selectionColor : p[4] ? p[0].highlightColor : p[1].bordercolor || p[0].nodeborder) && b(o, "stroke", f);
    },
    d(p) {
      p && V(e), p && V(o), h = !1, ct(d);
    }
  };
}
function VT(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = Q_(t[1]) + "", d, p = t[1].label + "", g, m, _, S, v, k, C, A, w, M, N, T, O, W, H = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && W_(t), I = t[1].notes && q_(t), z = t[1].has_dynamic_notes && J_(t), L = t[3] && !t[2].disableEditing && K_(t), K = t[1].badge && Y_(t), F = t[1].kind === "node" && !t[2].disableEditing && t[1].children && t[1].children.length > 0 && X_(t);
  return {
    c() {
      var D;
      e = dt("g"), n = dt("rect"), H && H.c(), f = dt("text"), d = _e(h), g = _e(p), I && I.c(), A = rt(), z && z.c(), w = rt(), L && L.c(), M = rt(), K && K.c(), N = rt(), F && F.c(), b(n, "x", i = t[1].pos.x - t[1].width / 2), b(n, "y", r = t[1].pos.y - t[1].height / 2), b(n, "width", s = t[1].width), b(n, "height", o = t[1].height), b(n, "fill", l = t[5] ? "transparent" : t[1].fill || t[0].nodefill), b(n, "fill-opacity", 1), b(n, "stroke", a = t[3] ? t[0].selectionColor : t[4] ? t[0].highlightColor : t[1].bordercolor || t[0].nodeborder), b(n, "stroke-width", c = t[3] || t[4] ? "2px" : "1px"), b(n, "rx", u = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), b(n, "class", "svelte-1td5oib"), b(f, "x", m = t[1].pos.x - t[1].width / 2 + 30), b(f, "y", _ = t[1].pos.y - t[1].height / 2 + t[1].labelheight), b(f, "font-family", S = t[0].font), b(f, "font-weight", v = ((D = t[1].notes) == null ? void 0 : D.length) > 0 ? "700" : "300"), b(f, "font-size", k = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), b(f, "fill", C = t[1].labelcolor || t[0].nodelabelstroke), b(f, "class", "svelte-1td5oib"), b(e, "class", "svelte-1td5oib");
    },
    m(D, X) {
      U(D, e, X), E(e, n), H && H.m(e, null), E(e, f), E(f, d), E(f, g), I && I.m(e, null), E(e, A), z && z.m(e, null), E(e, w), L && L.m(e, null), E(e, M), K && K.m(e, null), E(e, N), F && F.m(e, null), T = !0, O || (W = [
        re(n, "mousedown", Je(t[17])),
        re(n, "mouseup", Je(t[18])),
        re(n, "click", Je(t[16])),
        re(f, "mousedown", Je(t[21])),
        re(f, "mouseup", Je(t[22])),
        re(f, "click", Je(t[14]))
      ], O = !0);
    },
    p(D, X) {
      var ue;
      (!T || X[0] & 2 && i !== (i = D[1].pos.x - D[1].width / 2)) && b(n, "x", i), (!T || X[0] & 2 && r !== (r = D[1].pos.y - D[1].height / 2)) && b(n, "y", r), (!T || X[0] & 2 && s !== (s = D[1].width)) && b(n, "width", s), (!T || X[0] & 2 && o !== (o = D[1].height)) && b(n, "height", o), (!T || X[0] & 35 && l !== (l = D[5] ? "transparent" : D[1].fill || D[0].nodefill)) && b(n, "fill", l), (!T || X[0] & 27 && a !== (a = D[3] ? D[0].selectionColor : D[4] ? D[0].highlightColor : D[1].bordercolor || D[0].nodeborder)) && b(n, "stroke", a), (!T || X[0] & 24 && c !== (c = D[3] || D[4] ? "2px" : "1px")) && b(n, "stroke-width", c), (!T || X[0] & 1 && u !== (u = D[0].nodeborderradius === 0 ? D[0].nodeborderradius : D[0].nodeborderradius || 5)) && b(n, "rx", u), D[1].backgroundImageURL || D[0].nodeBackgroundImageURL ? H ? H.p(D, X) : (H = W_(D), H.c(), H.m(e, f)) : H && (H.d(1), H = null), (!T || X[0] & 2) && h !== (h = Q_(D[1]) + "") && ze(d, h), (!T || X[0] & 2) && p !== (p = D[1].label + "") && ze(g, p), (!T || X[0] & 2 && m !== (m = D[1].pos.x - D[1].width / 2 + 30)) && b(f, "x", m), (!T || X[0] & 2 && _ !== (_ = D[1].pos.y - D[1].height / 2 + D[1].labelheight)) && b(f, "y", _), (!T || X[0] & 1 && S !== (S = D[0].font)) && b(f, "font-family", S), (!T || X[0] & 2 && v !== (v = ((ue = D[1].notes) == null ? void 0 : ue.length) > 0 ? "700" : "300")) && b(f, "font-weight", v), (!T || X[0] & 3 && k !== (k = D[1].nodelabelfontsize || D[0].nodelabelfontsize || 16)) && b(f, "font-size", k), (!T || X[0] & 3 && C !== (C = D[1].labelcolor || D[0].nodelabelstroke)) && b(f, "fill", C), D[1].notes ? I ? I.p(D, X) : (I = q_(D), I.c(), I.m(e, A)) : I && (I.d(1), I = null), D[1].has_dynamic_notes ? z ? z.p(D, X) : (z = J_(D), z.c(), z.m(e, w)) : z && (z.d(1), z = null), D[3] && !D[2].disableEditing ? L ? (L.p(D, X), X[0] & 12 && P(L, 1)) : (L = K_(D), L.c(), P(L, 1), L.m(e, M)) : L && (Ae(), x(L, 1, 1, () => {
        L = null;
      }), Me()), D[1].badge ? K ? K.p(D, X) : (K = Y_(D), K.c(), K.m(e, N)) : K && (K.d(1), K = null), D[1].kind === "node" && !D[2].disableEditing && D[1].children && D[1].children.length > 0 ? F ? F.p(D, X) : (F = X_(D), F.c(), F.m(e, null)) : F && (F.d(1), F = null);
    },
    i(D) {
      T || (P(L), T = !0);
    },
    o(D) {
      x(L), T = !1;
    },
    d(D) {
      D && V(e), H && H.d(), I && I.d(), z && z.d(), L && L.d(), K && K.d(), F && F.d(), O = !1, ct(W);
    }
  };
}
function Q_(t) {
  return t.tags.includes("goal") ? "GOAL: " : t.tags.includes("project") ? "PROJECT: " : "MISC: ";
}
function UT(t) {
  let n = Array.from(t).reduce(
    (i, r) => {
      let s = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[s] = i[s] ?? [], i[s].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return "<table>" + Object.entries(n).map((i) => `<tr><td>${i[0]}</td><td><div style='display: flex'>` + i[1].map((r) => `<div style='background-color: yellow; padding: 2px 4px; border: thin solid black; margin-right: 4px'>${r.label}</div>`).join("") + "</div></td></tr>").join("") + "</table>";
}
function HT(t, e, n) {
  let i;
  const r = Vl();
  let { theme: s } = e, { item: o } = e, { graph: l } = e, { isSelected: a } = e, { isHighlighted: c } = e, { isHidden: u = !1 } = e;
  function f(ne) {
    let je = parseInt(ne.target.getAttribute("data-handle"));
    r("createnode", { from: o, handle: je });
  }
  function h(ne) {
    let je = parseInt(ne.target.getAttribute("data-handle"));
    r("itemcontrolmousedown", { source: o, handle: je, rawEvent: ne });
  }
  function d(ne, je, Ie) {
    return je.tags.forEach((Xe) => Ie.add(Xe)), je.children.forEach((Xe) => {
      d(ne, Fn(Xe, ne), Ie);
    }), Ie;
  }
  function p(ne) {
    Ft.call(this, t, ne);
  }
  function g(ne) {
    Ft.call(this, t, ne);
  }
  function m(ne) {
    Ft.call(this, t, ne);
  }
  function _(ne) {
    Ft.call(this, t, ne);
  }
  function S(ne) {
    Ft.call(this, t, ne);
  }
  function v(ne) {
    Ft.call(this, t, ne);
  }
  function k(ne) {
    Ft.call(this, t, ne);
  }
  const C = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), A = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), w = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), M = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), N = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), T = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), O = (ne) => r("itemMouseDown", {
    source: o,
    rawEvent: ne,
    from: { x: ne.clientX, y: ne.clientY }
  }), W = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), H = (ne) => r("itemMouseDown", {
    source: o,
    rawEvent: ne,
    from: { x: ne.clientX, y: ne.clientY }
  }), I = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), z = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), L = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), K = (ne) => r("itemBadgeClick", { source: o, rawEvent: ne }), F = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), D = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), X = (ne) => r("itemBadgeClick", { source: o, rawEvent: ne }), ue = (ne) => r("itemMouseDown", { source: o, rawEvent: ne }), q = (ne) => r("itemMouseUp", { source: o, rawEvent: ne }), ee = (ne) => r("itemBadgeClick", { source: o, rawEvent: ne }), ie = (ne) => r("itemCollapserClick", { source: o, rawEvent: ne });
  return t.$$set = (ne) => {
    "theme" in ne && n(0, s = ne.theme), "item" in ne && n(1, o = ne.item), "graph" in ne && n(2, l = ne.graph), "isSelected" in ne && n(3, a = ne.isSelected), "isHighlighted" in ne && n(4, c = ne.isHighlighted), "isHidden" in ne && n(5, u = ne.isHidden);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 6 && n(6, i = UT(d(l, o, /* @__PURE__ */ new Set())));
  }, [
    s,
    o,
    l,
    a,
    c,
    u,
    i,
    r,
    f,
    h,
    p,
    g,
    m,
    _,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    N,
    T,
    O,
    W,
    H,
    I,
    z,
    L,
    K,
    F,
    D,
    X,
    ue,
    q,
    ee,
    ie
  ];
}
class WT extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      HT,
      VT,
      Nt,
      {
        theme: 0,
        item: 1,
        graph: 2,
        isSelected: 3,
        isHighlighted: 4,
        isHidden: 5
      },
      null,
      [-1, -1]
    );
  }
}
function Z_(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g = t[0].label.length > 0 && $_(t);
  return {
    c() {
      e = dt("text"), n = dt("textPath"), i = _e(`âž¤
			`), g && g.c(), b(n, "href", r = `#edgepathmain${t[0].id}`), b(n, "startOffset", s = t[0].label.length > 0 ? "20%" : "50%"), b(n, "lengthAdjust", "spacingAndGlyphs"), b(n, "font-family", "Verdana"), b(n, "font-size", "20"), b(n, "start", ""), b(n, "fill", o = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke", l = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke-width", a = t[0].weight || 5), b(n, "style", c = `--hoverColor: ${t[1].theme.selectionColor}`), b(n, "class", "svelte-18y4spp"), b(e, "font-family", u = t[1].theme.font), b(e, "class", "arrowhead svelte-18y4spp"), b(e, "font-size", "20"), b(e, "fill", f = t[0].stroke), b(e, "style", h = `--hoverColor: ${t[1].theme.selectionColor}`);
    },
    m(m, _) {
      U(m, e, _), E(e, n), E(n, i), g && g.m(e, null), d || (p = [
        re(n, "mousedown", Je(t[28])),
        re(n, "mouseup", Je(t[29])),
        re(n, "click", Je(t[15])),
        re(e, "mousedown", Je(t[32])),
        re(e, "mouseup", Je(t[33])),
        re(e, "click", Je(t[13]))
      ], d = !0);
    },
    p(m, _) {
      _[0] & 1 && r !== (r = `#edgepathmain${m[0].id}`) && b(n, "href", r), _[0] & 1 && s !== (s = m[0].label.length > 0 ? "20%" : "50%") && b(n, "startOffset", s), _[0] & 7 && o !== (o = m[2] ? m[1].theme.selectionColor : m[0].stroke || m[1].theme.edgestroke) && b(n, "fill", o), _[0] & 7 && l !== (l = m[2] ? m[1].theme.selectionColor : m[0].stroke || m[1].theme.edgestroke) && b(n, "stroke", l), _[0] & 1 && a !== (a = m[0].weight || 5) && b(n, "stroke-width", a), _[0] & 2 && c !== (c = `--hoverColor: ${m[1].theme.selectionColor}`) && b(n, "style", c), m[0].label.length > 0 ? g ? g.p(m, _) : (g = $_(m), g.c(), g.m(e, null)) : g && (g.d(1), g = null), _[0] & 2 && u !== (u = m[1].theme.font) && b(e, "font-family", u), _[0] & 1 && f !== (f = m[0].stroke) && b(e, "fill", f), _[0] & 2 && h !== (h = `--hoverColor: ${m[1].theme.selectionColor}`) && b(e, "style", h);
    },
    d(m) {
      m && V(e), g && g.d(), d = !1, ct(p);
    }
  };
}
function $_(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = dt("textPath"), n = _e(`âž¤
				`), b(e, "href", i = `#edgepathmain${t[0].id}`), b(e, "startOffset", "80%"), b(e, "lengthAdjust", "spacingAndGlyphs"), b(e, "font-family", "Verdana"), b(e, "font-size", "20"), b(e, "start", ""), b(e, "fill", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(e, "stroke", s = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(e, "stroke-width", o = t[0].weight || 5), b(e, "style", l = `--hoverColor: ${t[1].theme.selectionColor}`), b(e, "class", "svelte-18y4spp");
    },
    m(u, f) {
      U(u, e, f), E(e, n), a || (c = [
        re(e, "mousedown", Je(t[30])),
        re(e, "mouseup", Je(t[31])),
        re(e, "click", Je(t[14]))
      ], a = !0);
    },
    p(u, f) {
      f[0] & 1 && i !== (i = `#edgepathmain${u[0].id}`) && b(e, "href", i), f[0] & 7 && r !== (r = u[2] ? u[1].theme.selectionColor : u[0].stroke || u[1].theme.edgestroke) && b(e, "fill", r), f[0] & 7 && s !== (s = u[2] ? u[1].theme.selectionColor : u[0].stroke || u[1].theme.edgestroke) && b(e, "stroke", s), f[0] & 1 && o !== (o = u[0].weight || 5) && b(e, "stroke-width", o), f[0] & 2 && l !== (l = `--hoverColor: ${u[1].theme.selectionColor}`) && b(e, "style", l);
    },
    d(u) {
      u && V(e), a = !1, ct(c);
    }
  };
}
function ey(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "cross",
      data: "from",
      x: t[5].x,
      y: t[5].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32 && (s.x = i[5].x), r[0] & 32 && (s.y = i[5].y), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function ty(t) {
  let e, n;
  return e = new S0({
    props: {
      kind: "cross",
      data: "to",
      x: t[4].x,
      y: t[4].y,
      title: "Detach from Node",
      size: 4
    }
  }), e.$on("click", t[8]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16 && (s.x = i[4].x), r[0] & 16 && (s.y = i[4].y), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function qT(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g = t[0].label + "", m, _, S, v, k, C, A, w, M, N, T, O, W, H = t[0].directed && Z_(t), I = t[2] && t[5] && !t[1].disableEditing && ey(t), z = t[2] && t[4] && !t[1].disableEditing && ty(t);
  return {
    c() {
      e = dt("g"), n = dt("path"), c = dt("path"), d = dt("text"), p = dt("textPath"), m = _e(g), H && H.c(), M = rt(), I && I.c(), N = rt(), z && z.c(), b(n, "d", i = t[7](t[1])), b(n, "fill", "none"), b(n, "stroke", r = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(n, "stroke-width", s = t[0].weight || 5), b(n, "class", "edgePath svelte-18y4spp"), b(n, "id", o = `edgepathmain${t[0].id}`), b(n, "stroke-dasharray", l = ny(t[0].strokeType || t[1].theme.edgestroketype)), b(n, "style", a = `--hoverColor: ${t[1].theme.selectionColor}`), b(c, "d", u = t[7](t[1])), b(c, "fill", "none"), b(c, "stroke", "transparent"), b(c, "stroke-width", f = t[0].weight || 5), b(c, "transform", t[3]), b(c, "id", h = `edgepath${t[0].id}`), b(c, "class", "svelte-18y4spp"), b(p, "href", _ = `#edgepath${t[0].id}`), b(p, "startOffset", "40%"), b(p, "lengthAdjust", "spacingAndGlyphs"), b(p, "font-family", "Verdana"), b(p, "font-size", "20"), b(p, "fill", S = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(p, "stroke", v = t[2] ? t[1].theme.selectionColor : t[0].stroke || t[1].theme.edgestroke), b(p, "style", k = `--hoverColor: ${t[1].theme.selectionColor}`), b(p, "class", "svelte-18y4spp"), b(d, "font-family", C = t[1].theme.font), b(d, "font-size", "20"), b(d, "fill", A = t[0].stroke), b(d, "style", w = `--hoverColor: ${t[1].theme.selectionColor}`), b(d, "class", "svelte-18y4spp"), b(e, "class", "svelte-18y4spp");
    },
    m(L, K) {
      U(L, e, K), E(e, n), E(e, c), E(e, d), E(d, p), E(p, m), H && H.m(e, null), E(e, M), I && I.m(e, null), E(e, N), z && z.m(e, null), T = !0, O || (W = [
        re(n, "mousedown", Je(t[20])),
        re(n, "mouseup", Je(t[21])),
        re(n, "click", Je(t[19])),
        re(c, "mousedown", Je(t[22])),
        re(c, "mouseup", Je(t[23])),
        re(c, "click", Je(t[18])),
        re(p, "mousedown", Je(t[24])),
        re(p, "mouseup", Je(t[25])),
        re(p, "click", Je(t[17])),
        re(d, "mousedown", Je(t[26])),
        re(d, "mouseup", Je(t[27])),
        re(d, "click", Je(t[16]))
      ], O = !0);
    },
    p(L, K) {
      (!T || K[0] & 2 && i !== (i = L[7](L[1]))) && b(n, "d", i), (!T || K[0] & 7 && r !== (r = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(n, "stroke", r), (!T || K[0] & 1 && s !== (s = L[0].weight || 5)) && b(n, "stroke-width", s), (!T || K[0] & 1 && o !== (o = `edgepathmain${L[0].id}`)) && b(n, "id", o), (!T || K[0] & 3 && l !== (l = ny(L[0].strokeType || L[1].theme.edgestroketype))) && b(n, "stroke-dasharray", l), (!T || K[0] & 2 && a !== (a = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(n, "style", a), (!T || K[0] & 2 && u !== (u = L[7](L[1]))) && b(c, "d", u), (!T || K[0] & 1 && f !== (f = L[0].weight || 5)) && b(c, "stroke-width", f), (!T || K[0] & 8) && b(c, "transform", L[3]), (!T || K[0] & 1 && h !== (h = `edgepath${L[0].id}`)) && b(c, "id", h), (!T || K[0] & 1) && g !== (g = L[0].label + "") && ze(m, g), (!T || K[0] & 1 && _ !== (_ = `#edgepath${L[0].id}`)) && b(p, "href", _), (!T || K[0] & 7 && S !== (S = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(p, "fill", S), (!T || K[0] & 7 && v !== (v = L[2] ? L[1].theme.selectionColor : L[0].stroke || L[1].theme.edgestroke)) && b(p, "stroke", v), (!T || K[0] & 2 && k !== (k = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(p, "style", k), (!T || K[0] & 2 && C !== (C = L[1].theme.font)) && b(d, "font-family", C), (!T || K[0] & 1 && A !== (A = L[0].stroke)) && b(d, "fill", A), (!T || K[0] & 2 && w !== (w = `--hoverColor: ${L[1].theme.selectionColor}`)) && b(d, "style", w), L[0].directed ? H ? H.p(L, K) : (H = Z_(L), H.c(), H.m(e, M)) : H && (H.d(1), H = null), L[2] && L[5] && !L[1].disableEditing ? I ? (I.p(L, K), K[0] & 38 && P(I, 1)) : (I = ey(L), I.c(), P(I, 1), I.m(e, N)) : I && (Ae(), x(I, 1, 1, () => {
        I = null;
      }), Me()), L[2] && L[4] && !L[1].disableEditing ? z ? (z.p(L, K), K[0] & 22 && P(z, 1)) : (z = ty(L), z.c(), P(z, 1), z.m(e, null)) : z && (Ae(), x(z, 1, 1, () => {
        z = null;
      }), Me());
    },
    i(L) {
      T || (P(I), P(z), T = !0);
    },
    o(L) {
      x(I), x(z), T = !1;
    },
    d(L) {
      L && V(e), H && H.d(), I && I.d(), z && z.d(), O = !1, ct(W);
    }
  };
}
function ny(t) {
  return t === "dashed" ? "8,5" : t === "dotted" ? "5,5" : !1;
}
function JT(t, e, n) {
  let i, r, s, o, l, a, c;
  const u = Vl();
  let { item: f } = e, { graph: h } = e, { isSelected: d } = e;
  function p(q) {
    let ee = f.shape || q.theme.edgeshape;
    if (ee === "straight")
      return `M ${l.x},${l.y} L ${a.x},${a.y}`;
    if (ee === "curved") {
      let ie = {
        x: s.pos.x + 30,
        y: s.pos.y + 30
      }, ne = {
        x: o.pos.x - 30,
        y: o.pos.y - 30
      };
      return [
        `M ${l.x},${l.y}`,
        "C",
        `${ie.x},${ie.y}`,
        `${ne.x},${ne.y}`,
        `${a.x},${a.y}`
      ].join(" ");
    } else if (ee === "ortho")
      return `M ${l.x},${l.y} h ${(a.x - l.x) / 2} v ${a.y - l.y} L ${a.x},${a.y}`;
  }
  function g(q) {
    q.target.getAttribute("data-handle"), u("edgeChanged", { source: f });
  }
  function m(q, ee) {
    let ie = (q.pos.x + ee.pos.x) / 2, ne = (q.pos.y + ee.pos.y) / 2, je = Math.atan2(ee.pos.y - q.pos.y, ee.pos.x - q.pos.x) * 180 / Math.PI;
    return je < -90 || je > 90 ? `translate(0, -6) rotate(180, ${ie}, ${ne})` : "translate(0, -6) rotate(0)";
  }
  function _(q) {
    Ft.call(this, t, q);
  }
  function S(q) {
    Ft.call(this, t, q);
  }
  function v(q) {
    Ft.call(this, t, q);
  }
  function k(q) {
    Ft.call(this, t, q);
  }
  function C(q) {
    Ft.call(this, t, q);
  }
  function A(q) {
    Ft.call(this, t, q);
  }
  function w(q) {
    Ft.call(this, t, q);
  }
  const M = (q) => u("itemMouseDown", { source: f, rawEvent: q }), N = (q) => u("itemMouseUp", { source: f, rawEvent: q }), T = (q) => u("itemMouseDown", { source: f, rawEvent: q }), O = (q) => u("itemMouseUp", { source: f, rawEvent: q }), W = (q) => u("itemMouseDown", { source: f, rawEvent: q }), H = (q) => u("itemMouseUp", { source: f, rawEvent: q }), I = (q) => u("itemMouseDown", { source: f, rawEvent: q }), z = (q) => u("itemMouseUp", { source: f, rawEvent: q }), L = (q) => u("itemMouseDown", { source: f, rawEvent: q }), K = (q) => u("itemMouseUp", { source: f, rawEvent: q }), F = (q) => u("itemMouseDown", { source: f, rawEvent: q }), D = (q) => u("itemMouseUp", { source: f, rawEvent: q }), X = (q) => u("itemMouseDown", { source: f, rawEvent: q }), ue = (q) => u("itemMouseUp", { source: f, rawEvent: q });
  return t.$$set = (q) => {
    "item" in q && n(0, f = q.item), "graph" in q && n(1, h = q.graph), "isSelected" in q && n(2, d = q.isSelected);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(12, i = f.fromOrphan || Fn(f.fromId, h)), t.$$.dirty[0] & 3 && n(11, r = f.toOrphan || Fn(f.toId, h)), t.$$.dirty[0] & 4098 && n(10, s = Aa(i, h) || i), t.$$.dirty[0] & 2050 && n(9, o = Aa(r, h) || r), t.$$.dirty[0] & 1024 && n(5, l = s && { x: s.pos.x, y: s.pos.y }), t.$$.dirty[0] & 512 && n(4, a = o && { x: o.pos.x, y: o.pos.y }), t.$$.dirty[0] & 1536 && n(3, c = s && o && m(s, o));
  }, [
    f,
    h,
    d,
    c,
    a,
    l,
    u,
    p,
    g,
    o,
    s,
    r,
    i,
    _,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    N,
    T,
    O,
    W,
    H,
    I,
    z,
    L,
    K,
    F,
    D,
    X,
    ue
  ];
}
class KT extends Ge {
  constructor(e) {
    super(), Ke(this, e, JT, qT, Nt, { item: 0, graph: 1, isSelected: 2 }, null, [-1, -1]);
  }
}
function iy(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function ry(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function sy(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function GT(t) {
  let e, n, i = t[1], r = [];
  for (let l = 0; l < i.length; l += 1)
    r[l] = oy(ry(t, i, l));
  let s = t[2], o = [];
  for (let l = 0; l < s.length; l += 1)
    o[l] = ly(iy(t, s, l));
  return {
    c() {
      for (let l = 0; l < r.length; l += 1)
        r[l].c();
      e = Z();
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      n = rt();
    },
    m(l, a) {
      for (let c = 0; c < r.length; c += 1)
        r[c].m(l, a);
      U(l, e, a);
      for (let c = 0; c < o.length; c += 1)
        o[c].m(l, a);
      U(l, n, a);
    },
    p(l, a) {
      if (a & 2) {
        i = l[1];
        let c;
        for (c = 0; c < i.length; c += 1) {
          const u = ry(l, i, c);
          r[c] ? r[c].p(u, a) : (r[c] = oy(u), r[c].c(), r[c].m(e.parentNode, e));
        }
        for (; c < r.length; c += 1)
          r[c].d(1);
        r.length = i.length;
      }
      if (a & 4) {
        s = l[2];
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = iy(l, s, c);
          o[c] ? o[c].p(u, a) : (o[c] = ly(u), o[c].c(), o[c].m(n.parentNode, n));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = s.length;
      }
    },
    d(l) {
      xt(r, l), l && V(e), xt(o, l), l && V(n);
    }
  };
}
function YT(t) {
  let e, n = t[1], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = ay(sy(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = rt();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s & 2) {
        n = r[1];
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = sy(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = ay(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      xt(i, r), r && V(e);
    }
  };
}
function oy(t) {
  let e;
  return {
    c() {
      e = dt("circle"), b(e, "r", 100 + t[3]), b(e, "stroke", "black"), b(e, "fill", "none"), b(e, "opacity", "0.6");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function ly(t) {
  let e;
  return {
    c() {
      e = dt("line"), b(e, "x1", -5e3 * Math.cos(t[6])), b(e, "y1", -5e3 * Math.sin(t[6])), b(e, "x2", 5e3 * Math.cos(t[6])), b(e, "y2", 5e3 * Math.sin(t[6])), b(e, "class", "svelte-19wjlzj");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function ay(t) {
  let e, n, i;
  return {
    c() {
      e = dt("line"), n = Z(), i = dt("line"), b(e, "x1", "0"), b(e, "y1", 0 + t[3]), b(e, "x2", 5e3), b(e, "y2", 0 + t[3]), b(e, "class", "svelte-19wjlzj"), b(i, "x1", 0 + t[3]), b(i, "y1", "0"), b(i, "x2", 0 + t[3]), b(i, "y2", "5000"), b(i, "class", "svelte-19wjlzj");
    },
    m(r, s) {
      U(r, e, s), U(r, n, s), U(r, i, s);
    },
    p: ye,
    d(r) {
      r && V(e), r && V(n), r && V(i);
    }
  };
}
function XT(t) {
  let e;
  function n(s, o) {
    if (s[0] === "cartesian")
      return YT;
    if (s[0] === "polar")
      return GT;
  }
  let i = n(t), r = i && i(t);
  return {
    c() {
      r && r.c(), e = rt();
    },
    m(s, o) {
      r && r.m(s, o), U(s, e, o);
    },
    p(s, [o]) {
      i === (i = n(s)) && r ? r.p(s, o) : (r && r.d(1), r = i && i(s), r && (r.c(), r.m(e.parentNode, e)));
    },
    i: ye,
    o: ye,
    d(s) {
      r && r.d(s), s && V(e);
    }
  };
}
function QT(t, e, n) {
  let i = [...Array(50).keys()].map((o) => o * 100), r = [0, 30, 60, 90, 120, 150].map((o) => o * Math.PI / 180), { kind: s } = e;
  return t.$$set = (o) => {
    "kind" in o && n(0, s = o.kind);
  }, [s, i, r];
}
class ZT extends Ge {
  constructor(e) {
    super(), Ke(this, e, QT, XT, Nt, { kind: 0 });
  }
}
function cy(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = dt("image"), b(e, "href", n = t[1].backgroundImageURL || t[0].nodeBackgroundImageURL), b(e, "height", i = t[1].height), b(e, "width", r = t[1].width), b(e, "preserveAspectRatio", "none"), b(e, "x", s = t[1].pos.x - t[1].width / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2);
    },
    m(c, u) {
      U(c, e, u), l || (a = [
        re(e, "mousedown", Je(t[10])),
        re(e, "mouseup", Je(t[11])),
        re(e, "click", Je(t[6]))
      ], l = !0);
    },
    p(c, u) {
      u & 3 && n !== (n = c[1].backgroundImageURL || c[0].nodeBackgroundImageURL) && b(e, "href", n), u & 2 && i !== (i = c[1].height) && b(e, "height", i), u & 2 && r !== (r = c[1].width) && b(e, "width", r), u & 2 && s !== (s = c[1].pos.x - c[1].width / 2) && b(e, "x", s), u & 2 && o !== (o = c[1].pos.y - c[1].height / 2) && b(e, "y", o);
    },
    d(c) {
      c && V(e), l = !1, ct(a);
    }
  };
}
function uy(t) {
  let e, n, i = t[1].notes + "", r, s, o, l, a, c, u, f, h;
  return {
    c() {
      e = dt("foreignObject"), n = j("div"), r = _e(i), b(n, "class", "foreign-obj-div svelte-3cf8cd"), b(e, "x", s = t[1].pos.x - t[1].noteswidth / 2), b(e, "y", o = t[1].pos.y - t[1].height / 2 + t[1].labelheight + 10), b(e, "font-family", l = t[0].font), b(e, "font-weight", "300"), b(e, "font-size", a = t[1].nodenotesfontsize || t[0].nodenotesfontsize || 16), b(e, "width", c = t[1].noteswidth), b(e, "height", u = t[1].notesheight);
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(n, r), f || (h = [
        re(e, "mousedown", Je(t[14])),
        re(e, "mouseup", Je(t[15])),
        re(e, "click", Je(t[4]))
      ], f = !0);
    },
    p(d, p) {
      p & 2 && i !== (i = d[1].notes + "") && ze(r, i), p & 2 && s !== (s = d[1].pos.x - d[1].noteswidth / 2) && b(e, "x", s), p & 2 && o !== (o = d[1].pos.y - d[1].height / 2 + d[1].labelheight + 10) && b(e, "y", o), p & 1 && l !== (l = d[0].font) && b(e, "font-family", l), p & 3 && a !== (a = d[1].nodenotesfontsize || d[0].nodenotesfontsize || 16) && b(e, "font-size", a), p & 2 && c !== (c = d[1].noteswidth) && b(e, "width", c), p & 2 && u !== (u = d[1].notesheight) && b(e, "height", u);
    },
    d(d) {
      d && V(e), f = !1, ct(h);
    }
  };
}
function $T(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = t[1].label + "", d, p, g, m, _, S, v, k, C, A = (t[1].backgroundImageURL || t[0].nodeBackgroundImageURL) && cy(t), w = t[1].notes && uy(t);
  return {
    c() {
      var M;
      e = dt("g"), n = dt("rect"), A && A.c(), f = dt("text"), d = _e(h), w && w.c(), b(n, "x", i = t[1].pos.x - t[1].width / 2), b(n, "y", r = t[1].pos.y - t[1].height / 2), b(n, "width", s = t[1].width), b(n, "height", o = t[1].height), b(n, "fill", l = t[1].fill || t[0].nodefill), b(n, "fill-opacity", 1), b(n, "stroke", a = t[2] ? t[0].selectionColor : t[1].bordercolor || t[0].nodeborder), b(n, "stroke-width", c = t[2] ? "6px" : "3px"), b(n, "rx", u = t[0].nodeborderradius === 0 ? t[0].nodeborderradius : t[0].nodeborderradius || 5), b(n, "class", "svelte-3cf8cd"), b(f, "x", p = t[1].pos.x - t[1].width / 2 + 30), b(f, "y", g = t[1].pos.y - t[1].height / 2 + 20), b(f, "font-family", m = t[0].font), b(f, "font-weight", _ = ((M = t[1].notes) == null ? void 0 : M.length) > 0 ? "700" : "300"), b(f, "font-size", S = t[1].nodelabelfontsize || t[0].nodelabelfontsize || 16), b(f, "fill", v = t[1].labelcolor || t[0].nodelabelstroke), b(f, "class", "svelte-3cf8cd"), b(e, "class", "svelte-3cf8cd");
    },
    m(M, N) {
      U(M, e, N), E(e, n), A && A.m(e, null), E(e, f), E(f, d), w && w.m(e, null), k || (C = [
        re(n, "mousedown", Je(t[8])),
        re(n, "mouseup", Je(t[9])),
        re(n, "click", Je(t[7])),
        re(f, "mousedown", Je(t[12])),
        re(f, "mouseup", Je(t[13])),
        re(f, "click", Je(t[5]))
      ], k = !0);
    },
    p(M, [N]) {
      var T;
      N & 2 && i !== (i = M[1].pos.x - M[1].width / 2) && b(n, "x", i), N & 2 && r !== (r = M[1].pos.y - M[1].height / 2) && b(n, "y", r), N & 2 && s !== (s = M[1].width) && b(n, "width", s), N & 2 && o !== (o = M[1].height) && b(n, "height", o), N & 3 && l !== (l = M[1].fill || M[0].nodefill) && b(n, "fill", l), N & 7 && a !== (a = M[2] ? M[0].selectionColor : M[1].bordercolor || M[0].nodeborder) && b(n, "stroke", a), N & 4 && c !== (c = M[2] ? "6px" : "3px") && b(n, "stroke-width", c), N & 1 && u !== (u = M[0].nodeborderradius === 0 ? M[0].nodeborderradius : M[0].nodeborderradius || 5) && b(n, "rx", u), M[1].backgroundImageURL || M[0].nodeBackgroundImageURL ? A ? A.p(M, N) : (A = cy(M), A.c(), A.m(e, f)) : A && (A.d(1), A = null), N & 2 && h !== (h = M[1].label + "") && ze(d, h), N & 2 && p !== (p = M[1].pos.x - M[1].width / 2 + 30) && b(f, "x", p), N & 2 && g !== (g = M[1].pos.y - M[1].height / 2 + 20) && b(f, "y", g), N & 1 && m !== (m = M[0].font) && b(f, "font-family", m), N & 2 && _ !== (_ = ((T = M[1].notes) == null ? void 0 : T.length) > 0 ? "700" : "300") && b(f, "font-weight", _), N & 3 && S !== (S = M[1].nodelabelfontsize || M[0].nodelabelfontsize || 16) && b(f, "font-size", S), N & 3 && v !== (v = M[1].labelcolor || M[0].nodelabelstroke) && b(f, "fill", v), M[1].notes ? w ? w.p(M, N) : (w = uy(M), w.c(), w.m(e, null)) : w && (w.d(1), w = null);
    },
    i: ye,
    o: ye,
    d(M) {
      M && V(e), A && A.d(), w && w.d(), k = !1, ct(C);
    }
  };
}
function eR(t, e, n) {
  const i = Vl();
  let { theme: r } = e, { item: s } = e, { isSelected: o } = e;
  function l(v) {
    Ft.call(this, t, v);
  }
  function a(v) {
    Ft.call(this, t, v);
  }
  function c(v) {
    Ft.call(this, t, v);
  }
  function u(v) {
    Ft.call(this, t, v);
  }
  const f = (v) => i("itemMouseDown", { source: s, rawEvent: v }), h = (v) => i("itemMouseUp", { source: s, rawEvent: v }), d = (v) => i("itemMouseDown", { source: s, rawEvent: v }), p = (v) => i("itemMouseUp", { source: s, rawEvent: v }), g = (v) => i("itemMouseDown", { source: s, rawEvent: v }), m = (v) => i("itemMouseUp", { source: s, rawEvent: v }), _ = (v) => i("itemMouseDown", {
    source: s,
    rawEvent: v,
    from: { x: v.clientX, y: v.clientY }
  }), S = (v) => i("itemMouseUp", { source: s, rawEvent: v });
  return t.$$set = (v) => {
    "theme" in v && n(0, r = v.theme), "item" in v && n(1, s = v.item), "isSelected" in v && n(2, o = v.isSelected);
  }, [
    r,
    s,
    o,
    i,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S
  ];
}
class tR extends Ge {
  constructor(e) {
    super(), Ke(this, e, eR, $T, Nt, { theme: 0, item: 1, isSelected: 2 });
  }
}
function mi(t, e = !!iR("debug")) {
  if (e) {
    const n = rR(t);
    return function(...r) {
      console.log(`%c${t}`, `color:${n}`, ...r);
    };
  } else
    return nR;
}
function nR() {
}
function iR(t) {
  try {
    if (typeof window < "u" && typeof window.localStorage < "u")
      return window.localStorage[t];
  } catch {
  }
}
function rR(t) {
  let e = 0;
  for (let n = 0; n < t.length; n++)
    e = (e << 5) - e + t.charCodeAt(n), e |= 0;
  return fy[Math.abs(e) % fy.length];
}
const fy = [
  "#0000CC",
  "#0099FF",
  "#009400",
  "#8dd200",
  "#CCCC00",
  "#CC9933",
  "#ae04e7",
  "#ff35d7",
  "#FF3333",
  "#FF6600",
  "#FF9933",
  "#FFCC33"
];
function sR(t, { delay: e = 0, duration: n = 400, easing: i = N4 } = {}) {
  const r = +getComputedStyle(t).opacity;
  return {
    delay: e,
    duration: n,
    easing: i,
    css: (s) => `opacity: ${s * r}`
  };
}
const { window: oR } = np;
function hy(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S = t[1].closeButton && dy(t);
  var v = t[2];
  function k(C) {
    return {};
  }
  return v && (o = vs(v, k())), {
    c() {
      e = j("div"), n = j("div"), i = j("div"), S && S.c(), r = Z(), s = j("div"), o && ge(o.$$.fragment), b(s, "class", l = mn(t[1].classContent) + " svelte-n7cvum"), b(s, "style", t[9]), Se(s, "content", !t[0]), b(i, "class", a = mn(t[1].classWindow) + " svelte-n7cvum"), b(i, "role", "dialog"), b(i, "aria-modal", "true"), b(i, "aria-label", c = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null), b(i, "aria-labelledby", u = t[1].ariaLabelledBy || null), b(i, "style", t[8]), Se(i, "window", !t[0]), b(n, "class", h = mn(t[1].classWindowWrap) + " svelte-n7cvum"), b(n, "style", t[7]), Se(n, "wrap", !t[0]), b(e, "class", d = mn(t[1].classBg) + " svelte-n7cvum"), b(e, "style", t[6]), Se(e, "bg", !t[0]);
    },
    m(C, A) {
      U(C, e, A), E(e, n), E(n, i), S && S.m(i, null), E(i, r), E(i, s), o && de(o, s, null), t[49](i), t[50](n), t[51](e), g = !0, m || (_ = [
        re(i, "introstart", function() {
          hi(t[13]) && t[13].apply(this, arguments);
        }),
        re(i, "outrostart", function() {
          hi(t[14]) && t[14].apply(this, arguments);
        }),
        re(i, "introend", function() {
          hi(t[15]) && t[15].apply(this, arguments);
        }),
        re(i, "outroend", function() {
          hi(t[16]) && t[16].apply(this, arguments);
        }),
        re(e, "mousedown", t[20]),
        re(e, "mouseup", t[21])
      ], m = !0);
    },
    p(C, A) {
      if (t = C, t[1].closeButton ? S ? (S.p(t, A), A[0] & 2 && P(S, 1)) : (S = dy(t), S.c(), P(S, 1), S.m(i, r)) : S && (Ae(), x(S, 1, 1, () => {
        S = null;
      }), Me()), v !== (v = t[2])) {
        if (o) {
          Ae();
          const w = o;
          x(w.$$.fragment, 1, 0, () => {
            pe(w, 1);
          }), Me();
        }
        v ? (o = vs(v, k()), ge(o.$$.fragment), P(o.$$.fragment, 1), de(o, s, null)) : o = null;
      }
      (!g || A[0] & 2 && l !== (l = mn(t[1].classContent) + " svelte-n7cvum")) && b(s, "class", l), (!g || A[0] & 512) && b(s, "style", t[9]), (!g || A[0] & 3) && Se(s, "content", !t[0]), (!g || A[0] & 2 && a !== (a = mn(t[1].classWindow) + " svelte-n7cvum")) && b(i, "class", a), (!g || A[0] & 2 && c !== (c = t[1].ariaLabelledBy ? null : t[1].ariaLabel || null)) && b(i, "aria-label", c), (!g || A[0] & 2 && u !== (u = t[1].ariaLabelledBy || null)) && b(i, "aria-labelledby", u), (!g || A[0] & 256) && b(i, "style", t[8]), (!g || A[0] & 3) && Se(i, "window", !t[0]), (!g || A[0] & 2 && h !== (h = mn(t[1].classWindowWrap) + " svelte-n7cvum")) && b(n, "class", h), (!g || A[0] & 128) && b(n, "style", t[7]), (!g || A[0] & 3) && Se(n, "wrap", !t[0]), (!g || A[0] & 2 && d !== (d = mn(t[1].classBg) + " svelte-n7cvum")) && b(e, "class", d), (!g || A[0] & 64) && b(e, "style", t[6]), (!g || A[0] & 3) && Se(e, "bg", !t[0]);
    },
    i(C) {
      g || (P(S), o && P(o.$$.fragment, C), Sa(() => {
        f || (f = df(i, t[12], t[1].transitionWindowProps, !0)), f.run(1);
      }), Sa(() => {
        p || (p = df(e, t[11], t[1].transitionBgProps, !0)), p.run(1);
      }), g = !0);
    },
    o(C) {
      x(S), o && x(o.$$.fragment, C), f || (f = df(i, t[12], t[1].transitionWindowProps, !1)), f.run(0), p || (p = df(e, t[11], t[1].transitionBgProps, !1)), p.run(0), g = !1;
    },
    d(C) {
      C && V(e), S && S.d(), o && pe(o), t[49](null), C && f && f.end(), t[50](null), t[51](null), C && p && p.end(), m = !1, ct(_);
    }
  };
}
function dy(t) {
  let e, n, i, r, s;
  const o = [aR, lR], l = [];
  function a(c, u) {
    return u[0] & 2 && (e = null), e == null && (e = !!c[17](c[1].closeButton)), e ? 0 : 1;
  }
  return n = a(t, [-1, -1, -1]), i = l[n] = o[n](t), {
    c() {
      i.c(), r = rt();
    },
    m(c, u) {
      l[n].m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      let f = n;
      n = a(c, u), n === f ? l[n].p(c, u) : (Ae(), x(l[f], 1, 1, () => {
        l[f] = null;
      }), Me(), i = l[n], i ? i.p(c, u) : (i = l[n] = o[n](c), i.c()), P(i, 1), i.m(r.parentNode, r));
    },
    i(c) {
      s || (P(i), s = !0);
    },
    o(c) {
      x(i), s = !1;
    },
    d(c) {
      l[n].d(c), c && V(r);
    }
  };
}
function lR(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), b(e, "class", n = mn(t[1].classCloseButton) + " svelte-n7cvum"), b(e, "aria-label", "Close modal"), b(e, "style", t[10]), b(e, "type", "button"), Se(e, "close", !t[0]);
    },
    m(s, o) {
      U(s, e, o), i || (r = re(e, "click", t[18]), i = !0);
    },
    p(s, o) {
      o[0] & 2 && n !== (n = mn(s[1].classCloseButton) + " svelte-n7cvum") && b(e, "class", n), o[0] & 1024 && b(e, "style", s[10]), o[0] & 3 && Se(e, "close", !s[0]);
    },
    i: ye,
    o: ye,
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function aR(t) {
  let e, n, i;
  var r = t[1].closeButton;
  function s(o) {
    return { props: { onClose: o[18] } };
  }
  return r && (e = vs(r, s(t))), {
    c() {
      e && ge(e.$$.fragment), n = rt();
    },
    m(o, l) {
      e && de(e, o, l), U(o, n, l), i = !0;
    },
    p(o, l) {
      if (r !== (r = o[1].closeButton)) {
        if (e) {
          Ae();
          const a = e;
          x(a.$$.fragment, 1, 0, () => {
            pe(a, 1);
          }), Me();
        }
        r ? (e = vs(r, s(o)), ge(e.$$.fragment), P(e.$$.fragment, 1), de(e, n.parentNode, n)) : e = null;
      }
    },
    i(o) {
      i || (e && P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      e && x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(n), e && pe(e, o);
    }
  };
}
function cR(t) {
  let e, n, i, r, s = t[2] && hy(t);
  const o = t[48].default, l = zn(o, t, t[47], null);
  return {
    c() {
      s && s.c(), e = Z(), l && l.c();
    },
    m(a, c) {
      s && s.m(a, c), U(a, e, c), l && l.m(a, c), n = !0, i || (r = re(oR, "keydown", t[19]), i = !0);
    },
    p(a, c) {
      a[2] ? s ? (s.p(a, c), c[0] & 4 && P(s, 1)) : (s = hy(a), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Ae(), x(s, 1, 1, () => {
        s = null;
      }), Me()), l && l.p && (!n || c[1] & 65536) && Un(
        l,
        o,
        a,
        a[47],
        n ? Vn(o, a[47], c, null) : Hn(a[47]),
        null
      );
    },
    i(a) {
      n || (P(s), P(l, a), n = !0);
    },
    o(a) {
      x(s), x(l, a), n = !1;
    },
    d(a) {
      s && s.d(a), a && V(e), l && l.d(a), i = !1, r();
    }
  };
}
function K4(t, e = {}) {
  return function(i) {
    return new t({
      ...i,
      props: { ...e, ...i.props }
    });
  };
}
function uR(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const s = Vl(), o = V4, l = (Ee) => Ee.tabIndex >= 0 && !Ee.hidden && !Ee.disabled && Ee.style.display !== "none" && Ee.type !== "hidden" && Boolean(Ee.offsetWidth || Ee.offsetHeight || Ee.getClientRects().length);
  let { isTabbable: a = l } = e, { show: c = null } = e, { key: u = "simple-modal" } = e, { ariaLabel: f = null } = e, { ariaLabelledBy: h = null } = e, { closeButton: d = !0 } = e, { closeOnEsc: p = !0 } = e, { closeOnOuterClick: g = !0 } = e, { styleBg: m = {} } = e, { styleWindowWrap: _ = {} } = e, { styleWindow: S = {} } = e, { styleContent: v = {} } = e, { styleCloseButton: k = {} } = e, { classBg: C = null } = e, { classWindowWrap: A = null } = e, { classWindow: w = null } = e, { classContent: M = null } = e, { classCloseButton: N = null } = e, { unstyled: T = !1 } = e, { setContext: O = o } = e, { transitionBg: W = sR } = e, { transitionBgProps: H = { duration: 250 } } = e, { transitionWindow: I = W } = e, { transitionWindowProps: z = H } = e, { disableFocusTrap: L = !1 } = e;
  const K = {
    ariaLabel: f,
    ariaLabelledBy: h,
    closeButton: d,
    closeOnEsc: p,
    closeOnOuterClick: g,
    styleBg: m,
    styleWindowWrap: _,
    styleWindow: S,
    styleContent: v,
    styleCloseButton: k,
    classBg: C,
    classWindowWrap: A,
    classWindow: w,
    classContent: M,
    classCloseButton: N,
    transitionBg: W,
    transitionBgProps: H,
    transitionWindow: I,
    transitionWindowProps: z,
    disableFocusTrap: L,
    isTabbable: a,
    unstyled: T
  };
  let F = { ...K }, D = null, X, ue, q, ee, ie, ne, je, Ie, Xe, le, Ne, nt, ke, fe, Pe;
  const ae = (Ee) => Ee.replace(/([a-zA-Z])(?=[A-Z])/g, "$1-").toLowerCase(), $ = (Ee) => Ee ? Object.keys(Ee).reduce((li, an) => `${li}; ${ae(an)}: ${Ee[an]}`, "") : "", he = (Ee) => !!(Ee && Ee.constructor && Ee.call && Ee.apply), Ce = () => {
    n(6, ie = $(Object.assign(
      {},
      {
        width: window.innerWidth,
        height: window.innerHeight
      },
      F.styleBg
    ))), n(7, ne = $(F.styleWindowWrap)), n(8, je = $(F.styleWindow)), n(9, Ie = $(F.styleContent)), n(10, Xe = $(F.styleCloseButton)), n(11, le = F.transitionBg), n(12, Ne = F.transitionWindow);
  }, J = () => {
  };
  let y = J, R = J, B = J, Q = J;
  const G = (Ee, li = {}, an = {}, Bt = {}) => {
    n(2, D = K4(Ee, li)), n(1, F = { ...K, ...an }), Ce(), ot(), n(13, y = (wn) => {
      Bt.onOpen && Bt.onOpen(wn), s("open"), s("opening");
    }), n(14, R = (wn) => {
      Bt.onClose && Bt.onClose(wn), s("close"), s("closing");
    }), n(15, B = (wn) => {
      Bt.onOpened && Bt.onOpened(wn), s("opened");
    }), n(16, Q = (wn) => {
      Bt.onClosed && Bt.onClosed(wn), s("closed");
    });
  }, ce = (Ee = {}) => {
    D && (n(14, R = Ee.onClose || R), n(16, Q = Ee.onClosed || Q), n(2, D = null), Be());
  }, De = (Ee) => {
    if (F.closeOnEsc && D && Ee.key === "Escape" && (Ee.preventDefault(), ce()), D && Ee.key === "Tab" && !F.disableFocusTrap) {
      const li = q.querySelectorAll("*"), an = Array.from(li).filter(F.isTabbable).sort((wn, Kt) => wn.tabIndex - Kt.tabIndex);
      let Bt = an.indexOf(document.activeElement);
      Bt === -1 && Ee.shiftKey && (Bt = 0), Bt += an.length + (Ee.shiftKey ? -1 : 1), Bt %= an.length, an[Bt].focus(), Ee.preventDefault();
    }
  }, We = (Ee) => {
    F.closeOnOuterClick && (Ee.target === X || Ee.target === ue) && (Pe = Ee.target);
  }, pt = (Ee) => {
    F.closeOnOuterClick && Ee.target === Pe && (Ee.preventDefault(), ce());
  }, ot = () => {
    ee = window.scrollY, nt = document.body.style.position, ke = document.body.style.overflow, fe = document.body.style.width, document.body.style.position = "fixed", document.body.style.top = `-${ee}px`, document.body.style.overflow = "hidden", document.body.style.width = "100%";
  }, Be = () => {
    document.body.style.position = nt || "", document.body.style.top = "", document.body.style.overflow = ke || "", document.body.style.width = fe || "", window.scrollTo(0, ee);
  };
  O(u, { open: G, close: ce });
  let jt = !1;
  ks(() => {
    jt && ce();
  }), or(() => {
    n(46, jt = !0);
  });
  function _n(Ee) {
    _t[Ee ? "unshift" : "push"](() => {
      q = Ee, n(5, q);
    });
  }
  function yn(Ee) {
    _t[Ee ? "unshift" : "push"](() => {
      ue = Ee, n(4, ue);
    });
  }
  function Rt(Ee) {
    _t[Ee ? "unshift" : "push"](() => {
      X = Ee, n(3, X);
    });
  }
  return t.$$set = (Ee) => {
    "isTabbable" in Ee && n(22, a = Ee.isTabbable), "show" in Ee && n(23, c = Ee.show), "key" in Ee && n(24, u = Ee.key), "ariaLabel" in Ee && n(25, f = Ee.ariaLabel), "ariaLabelledBy" in Ee && n(26, h = Ee.ariaLabelledBy), "closeButton" in Ee && n(27, d = Ee.closeButton), "closeOnEsc" in Ee && n(28, p = Ee.closeOnEsc), "closeOnOuterClick" in Ee && n(29, g = Ee.closeOnOuterClick), "styleBg" in Ee && n(30, m = Ee.styleBg), "styleWindowWrap" in Ee && n(31, _ = Ee.styleWindowWrap), "styleWindow" in Ee && n(32, S = Ee.styleWindow), "styleContent" in Ee && n(33, v = Ee.styleContent), "styleCloseButton" in Ee && n(34, k = Ee.styleCloseButton), "classBg" in Ee && n(35, C = Ee.classBg), "classWindowWrap" in Ee && n(36, A = Ee.classWindowWrap), "classWindow" in Ee && n(37, w = Ee.classWindow), "classContent" in Ee && n(38, M = Ee.classContent), "classCloseButton" in Ee && n(39, N = Ee.classCloseButton), "unstyled" in Ee && n(0, T = Ee.unstyled), "setContext" in Ee && n(40, O = Ee.setContext), "transitionBg" in Ee && n(41, W = Ee.transitionBg), "transitionBgProps" in Ee && n(42, H = Ee.transitionBgProps), "transitionWindow" in Ee && n(43, I = Ee.transitionWindow), "transitionWindowProps" in Ee && n(44, z = Ee.transitionWindowProps), "disableFocusTrap" in Ee && n(45, L = Ee.disableFocusTrap), "$$scope" in Ee && n(47, r = Ee.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8388608 | t.$$.dirty[1] & 32768 && jt && (he(c) ? G(c) : ce());
  }, [
    T,
    F,
    D,
    X,
    ue,
    q,
    ie,
    ne,
    je,
    Ie,
    Xe,
    le,
    Ne,
    y,
    R,
    B,
    Q,
    he,
    ce,
    De,
    We,
    pt,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    N,
    O,
    W,
    H,
    I,
    z,
    L,
    jt,
    r,
    i,
    _n,
    yn,
    Rt
  ];
}
class G4 extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      uR,
      cR,
      Nt,
      {
        isTabbable: 22,
        show: 23,
        key: 24,
        ariaLabel: 25,
        ariaLabelledBy: 26,
        closeButton: 27,
        closeOnEsc: 28,
        closeOnOuterClick: 29,
        styleBg: 30,
        styleWindowWrap: 31,
        styleWindow: 32,
        styleContent: 33,
        styleCloseButton: 34,
        classBg: 35,
        classWindowWrap: 36,
        classWindow: 37,
        classContent: 38,
        classCloseButton: 39,
        unstyled: 0,
        setContext: 40,
        transitionBg: 41,
        transitionBgProps: 42,
        transitionWindow: 43,
        transitionWindowProps: 44,
        disableFocusTrap: 45
      },
      null,
      [-1, -1, -1]
    );
  }
}
var ki;
(function(t) {
  t.text = "text", t.tree = "tree", t.table = "table";
})(ki || (ki = {}));
var qt;
(function(t) {
  t.after = "after", t.inside = "inside", t.key = "key", t.value = "value", t.multi = "multi";
})(qt || (qt = {}));
var Dr;
(function(t) {
  t.after = "after", t.key = "key", t.value = "value", t.inside = "inside";
})(Dr || (Dr = {}));
var Io;
(function(t) {
  t.info = "info", t.warning = "warning", t.error = "error";
})(Io || (Io = {}));
var Fr;
(function(t) {
  t.key = "key", t.value = "value";
})(Fr || (Fr = {}));
var pr;
(function(t) {
  t.asc = "asc", t.desc = "desc";
})(pr || (pr = {}));
const Im = 300, Y4 = 300, py = 300, fR = 300, gy = 50, hR = 200, dR = 400, pR = 1200, Dm = 1e3, Yc = 100, aa = 100, zh = 2e4, my = 50, by = 50, El = [{ start: 0, end: Yc }], gR = 100 * 1024 * 1024, mR = 1024 * 1024, Nm = 10 * 1024 * 1024, X4 = 10 * 1024, Al = {
  closeButton: !1,
  classBg: "jse-modal-bg",
  classWindow: "jse-modal-window",
  classWindowWrap: "jse-modal-window-wrap",
  classContent: "jse-modal-content"
}, bR = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-sort"
}, _R = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-transform"
}, _y = {
  ...Al,
  classWindow: "jse-modal-window jse-modal-window-jsoneditor"
}, E0 = "Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value", A0 = "Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)", Xs = "hover-insert-inside", Xc = "hover-insert-after", Lm = "hover-collection", wg = "valid", yy = "repairable", yR = "invalid", Hs = (40 + 2) * 8, Ws = 260, bl = {
  NO: "NO",
  SELF: "SELF",
  NEXT_INSIDE: "NEXT_INSIDE"
}, wR = {
  [pr.asc]: "ascending",
  [pr.desc]: "descending"
};
let wy = 0;
function Nc() {
  return wy++, wy;
}
function Do(t) {
  return Do = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Do(t);
}
function Ut(t) {
  return Array.isArray(t);
}
function On(t) {
  return t !== null && Do(t) === "object" && t.constructor === Object;
}
function Q4(t) {
  return t && Do(t) === "object" ? t.op === "add" : !1;
}
function Z4(t) {
  return t && Do(t) === "object" ? t.op === "remove" : !1;
}
function M0(t) {
  return t && Do(t) === "object" ? t.op === "replace" : !1;
}
function jm(t) {
  return t && Do(t) === "object" ? t.op === "copy" : !1;
}
function Ma(t) {
  return t && Do(t) === "object" ? t.op === "move" : !1;
}
function Bm(t) {
  return Bm = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Bm(t);
}
function vR(t, e) {
  return JSON.stringify(t) === JSON.stringify(e);
}
function kR(t, e) {
  return t === e;
}
function $4(t) {
  return t.slice(0, t.length - 1);
}
function CR(t) {
  return t[t.length - 1];
}
function SR(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : kR;
  if (t.length < e.length)
    return !1;
  for (var i = 0; i < e.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function e5(t) {
  return Bm(t) === "object" && t !== null;
}
function vy(t, e) {
  var n = Object.keys(t);
  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(t);
    e && (i = i.filter(function(r) {
      return Object.getOwnPropertyDescriptor(t, r).enumerable;
    })), n.push.apply(n, i);
  }
  return n;
}
function ER(t) {
  for (var e = 1; e < arguments.length; e++) {
    var n = arguments[e] != null ? arguments[e] : {};
    e % 2 ? vy(Object(n), !0).forEach(function(i) {
      AR(t, i, n[i]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n)) : vy(Object(n)).forEach(function(i) {
      Object.defineProperty(t, i, Object.getOwnPropertyDescriptor(n, i));
    });
  }
  return t;
}
function AR(t, e, n) {
  return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t;
}
function O0(t) {
  if (Ut(t)) {
    var e = t.slice();
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      e[i] = t[i];
    }), e;
  } else if (On(t)) {
    var n = ER({}, t);
    return Object.getOwnPropertySymbols(t).forEach(function(i) {
      n[i] = t[i];
    }), n;
  } else
    return t;
}
function T0(t, e, n) {
  if (t[e] === n)
    return t;
  var i = O0(t);
  return i[e] = n, i;
}
function Ye(t, e) {
  for (var n = t, i = 0; i < e.length; )
    On(n) ? n = n[e[i]] : Ut(n) ? n = n[parseInt(e[i])] : n = void 0, i++;
  return n;
}
function Rr(t, e, n) {
  var i = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1;
  if (e.length === 0)
    return n;
  var r = e[0], s = Rr(t ? t[r] : void 0, e.slice(1), n, i);
  if (On(t) || Ut(t))
    return T0(t, r, s);
  if (i) {
    var o = MR.test(r) ? [] : {};
    return o[r] = s, o;
  } else
    throw new Error("Path does not exist");
}
var MR = /^\d+$/;
function t5(t, e, n) {
  if (e.length === 0)
    return n(t);
  if (!e5(t))
    throw new Error("Path doesn't exist");
  var i = e[0], r = t5(t[i], e.slice(1), n);
  return T0(t, i, r);
}
function R0(t, e) {
  if (e.length === 0)
    return t;
  if (!e5(t))
    throw new Error("Path does not exist");
  if (e.length === 1) {
    var n = e[0];
    if (n in t) {
      var i = O0(t);
      return Ut(i) && i.splice(parseInt(n), 1), On(i) && delete i[n], i;
    } else
      return t;
  }
  var r = e[0], s = R0(t[r], e.slice(1));
  return T0(t, r, s);
}
function P0(t, e, n) {
  var i = e.slice(0, e.length - 1), r = e[e.length - 1];
  return t5(t, i, function(s) {
    if (!Array.isArray(s))
      throw new TypeError("Array expected at path " + JSON.stringify(i));
    var o = O0(s);
    return o.splice(parseInt(r), 0, n), o;
  });
}
function gr(t, e) {
  return t === void 0 ? !1 : e.length === 0 ? !0 : t === null ? !1 : gr(t[e[0]], e.slice(1));
}
function Vr(t) {
  var e = t.split("/");
  return e.shift(), e.map(function(n) {
    return n.replace(/~1/g, "/").replace(/~0/g, "~");
  });
}
function xe(t) {
  return t.map(n5).join("");
}
function n5(t) {
  return "/" + String(t).replace(/~/g, "~0").replace(/\//g, "~1");
}
function xm(t, e) {
  return t + n5(e);
}
function Oa(t, e) {
  return t.startsWith(e) && (t.length === e.length || t[e.length] === "/");
}
function zr(t, e, n) {
  for (var i = t, r = 0; r < e.length; r++) {
    LR(e[r]);
    var s = e[r];
    if (n && n.before) {
      var o = n.before(i, s);
      if (o !== void 0) {
        if (o.document !== void 0 && (i = o.document), o.json !== void 0)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
        o.operation !== void 0 && (s = o.operation);
      }
    }
    var l = i, a = cs(i, s.path);
    if (s.op === "add")
      i = RR(i, a, s.value);
    else if (s.op === "remove")
      i = TR(i, a);
    else if (s.op === "replace")
      i = OR(i, a, s.value);
    else if (s.op === "copy")
      i = PR(i, a, Fm(s.from));
    else if (s.op === "move")
      i = IR(i, a, Fm(s.from));
    else if (s.op === "test")
      DR(i, a, s.value);
    else
      throw new Error("Unknown JSONPatch operation " + JSON.stringify(s));
    if (n && n.after) {
      var c = n.after(i, s, l);
      c !== void 0 && (i = c);
    }
  }
  return i;
}
function OR(t, e, n) {
  return Rr(t, e, n);
}
function TR(t, e) {
  return R0(t, e);
}
function RR(t, e, n) {
  return xu(t, e) ? P0(t, e, n) : Rr(t, e, n);
}
function PR(t, e, n) {
  var i = Ye(t, n);
  if (xu(t, e))
    return P0(t, e, i);
  var r = Ye(t, n);
  return Rr(t, e, r);
}
function IR(t, e, n) {
  var i = Ye(t, n), r = R0(t, n);
  return xu(r, e) ? P0(r, e, i) : Rr(r, e, i);
}
function DR(t, e, n) {
  if (n === void 0)
    throw new Error('Test failed: no value provided (path: "'.concat(xe(e), '")'));
  if (!gr(t, e))
    throw new Error('Test failed: path not found (path: "'.concat(xe(e), '")'));
  var i = Ye(t, e);
  if (!vR(i, n))
    throw new Error('Test failed, value differs (path: "'.concat(xe(e), '")'));
}
function xu(t, e) {
  if (e.length === 0)
    return !1;
  var n = Ye(t, $4(e));
  return Array.isArray(n);
}
function NR(t, e) {
  if (CR(e) !== "-")
    return e;
  var n = $4(e), i = Ye(t, n);
  return n.concat(i.length);
}
function LR(t) {
  var e = ["add", "remove", "replace", "copy", "move", "test"];
  if (!e.includes(t.op))
    throw new Error("Unknown JSONPatch op " + JSON.stringify(t.op));
  if (typeof t.path != "string")
    throw new Error('Required property "path" missing or not a string in operation ' + JSON.stringify(t));
  if ((t.op === "copy" || t.op === "move") && typeof t.from != "string")
    throw new Error('Required property "from" missing or not a string in operation ' + JSON.stringify(t));
}
function cs(t, e) {
  return NR(t, Vr(e));
}
function Fm(t) {
  return Vr(t);
}
function jR(t) {
  return zR(t) || FR(t) || xR(t) || BR();
}
function BR() {
  throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`);
}
function xR(t, e) {
  if (t) {
    if (typeof t == "string")
      return zm(t, e);
    var n = Object.prototype.toString.call(t).slice(8, -1);
    if (n === "Object" && t.constructor && (n = t.constructor.name), n === "Map" || n === "Set")
      return Array.from(t);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
      return zm(t, e);
  }
}
function FR(t) {
  if (typeof Symbol < "u" && t[Symbol.iterator] != null || t["@@iterator"] != null)
    return Array.from(t);
}
function zR(t) {
  if (Array.isArray(t))
    return zm(t);
}
function zm(t, e) {
  (e == null || e > t.length) && (e = t.length);
  for (var n = 0, i = new Array(e); n < e; n++)
    i[n] = t[n];
  return i;
}
function i5(t, e, n) {
  var i = [];
  return zr(t, e, {
    before: function(s, o) {
      var l, a = cs(s, o.path);
      if (o.op === "add")
        l = o5(s, a);
      else if (o.op === "remove")
        l = s5(s, a);
      else if (o.op === "replace")
        l = r5(s, a);
      else if (o.op === "copy")
        l = VR(s, a);
      else if (o.op === "move")
        l = UR(s, a, Fm(o.from));
      else if (o.op === "test")
        l = [];
      else
        throw new Error("Unknown JSONPatch operation " + JSON.stringify(o));
      var c;
      if (n && n.before) {
        var u = n.before(s, o, l);
        if (u && u.revertOperations && (l = u.revertOperations), u && u.document && (c = u.document), u && u.json)
          throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');
      }
      if (i = l.concat(i), c !== void 0)
        return {
          document: c
        };
    }
  }), i;
}
function r5(t, e) {
  return [{
    op: "replace",
    path: xe(e),
    value: Ye(t, e)
  }];
}
function s5(t, e) {
  return [{
    op: "add",
    path: xe(e),
    value: Ye(t, e)
  }];
}
function o5(t, e) {
  return xu(t, e) || !gr(t, e) ? [{
    op: "remove",
    path: xe(e)
  }] : r5(t, e);
}
function VR(t, e) {
  return o5(t, e);
}
function UR(t, e, n) {
  if (e.length < n.length && SR(n, e))
    return [{
      op: "replace",
      path: xe(e),
      value: t
    }];
  var i = {
    op: "move",
    from: xe(e),
    path: xe(n)
  };
  return !xu(t, e) && gr(t, e) ? [i].concat(jR(s5(t, e))) : [i];
}
var Xr = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, sp = {}, ky = {
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	",
  '"': '"',
  "/": "/",
  "\\": "\\"
}, HR = "a".charCodeAt();
sp.parse = function(t, e, n) {
  var i = {}, r = 0, s = 0, o = 0, l = n && n.bigint && typeof BigInt < "u";
  return {
    data: a("", !0),
    pointers: i
  };
  function a(N, T) {
    c();
    var O;
    v(N, "value");
    var W = g();
    switch (W) {
      case "t":
        p("rue"), O = !0;
        break;
      case "f":
        p("alse"), O = !1;
        break;
      case "n":
        p("ull"), O = null;
        break;
      case '"':
        O = u();
        break;
      case "[":
        O = h(N);
        break;
      case "{":
        O = d(N);
        break;
      default:
        m(), "-0123456789".indexOf(W) >= 0 ? O = f() : A();
    }
    return v(N, "valueEnd"), c(), T && o < t.length && A(), O;
  }
  function c() {
    e:
      for (; o < t.length; ) {
        switch (t[o]) {
          case " ":
            s++;
            break;
          case "	":
            s += 4;
            break;
          case "\r":
            s = 0;
            break;
          case `
`:
            s = 0, r++;
            break;
          default:
            break e;
        }
        o++;
      }
  }
  function u() {
    for (var N = "", T; T = g(), T != '"'; )
      T == "\\" ? (T = g(), T in ky ? N += ky[T] : T == "u" ? N += _() : w()) : N += T;
    return N;
  }
  function f() {
    var N = "", T = !0;
    t[o] == "-" && (N += g()), N += t[o] == "0" ? g() : S(), t[o] == "." && (N += g() + S(), T = !1), (t[o] == "e" || t[o] == "E") && (N += g(), (t[o] == "+" || t[o] == "-") && (N += g()), N += S(), T = !1);
    var O = +N;
    return l && T && (O > Number.MAX_SAFE_INTEGER || O < Number.MIN_SAFE_INTEGER) ? BigInt(N) : O;
  }
  function h(N) {
    c();
    var T = [], O = 0;
    if (g() == "]")
      return T;
    for (m(); ; ) {
      var W = N + "/" + O;
      T.push(a(W)), c();
      var H = g();
      if (H == "]")
        break;
      H != "," && w(), c(), O++;
    }
    return T;
  }
  function d(N) {
    c();
    var T = {};
    if (g() == "}")
      return T;
    for (m(); ; ) {
      var O = C();
      g() != '"' && w();
      var W = u(), H = N + "/" + Vm(W);
      k(H, "key", O), v(H, "keyEnd"), c(), g() != ":" && w(), c(), T[W] = a(H), c();
      var I = g();
      if (I == "}")
        break;
      I != "," && w(), c();
    }
    return T;
  }
  function p(N) {
    for (var T = 0; T < N.length; T++)
      g() !== N[T] && w();
  }
  function g() {
    M();
    var N = t[o];
    return o++, s++, N;
  }
  function m() {
    o--, s--;
  }
  function _() {
    for (var N = 4, T = 0; N--; ) {
      T <<= 4;
      var O = g().toLowerCase();
      O >= "a" && O <= "f" ? T += O.charCodeAt() - HR + 10 : O >= "0" && O <= "9" ? T += +O : w();
    }
    return String.fromCharCode(T);
  }
  function S() {
    for (var N = ""; t[o] >= "0" && t[o] <= "9"; )
      N += g();
    if (N.length)
      return N;
    M(), A();
  }
  function v(N, T) {
    k(N, T, C());
  }
  function k(N, T, O) {
    i[N] = i[N] || {}, i[N][T] = O;
  }
  function C() {
    return {
      line: r,
      column: s,
      pos: o
    };
  }
  function A() {
    throw new SyntaxError("Unexpected token " + t[o] + " in JSON at position " + o);
  }
  function w() {
    m(), A();
  }
  function M() {
    if (o >= t.length)
      throw new SyntaxError("Unexpected end of JSON input");
  }
};
sp.stringify = function(t, e, n) {
  if (!pf(t))
    return;
  var i = 0, r, s, o = typeof n == "object" ? n.space : n;
  switch (typeof o) {
    case "number":
      var l = o > 10 ? 10 : o < 0 ? 0 : Math.floor(o);
      o = l && k(l, " "), r = l, s = l;
      break;
    case "string":
      o = o.slice(0, 10), r = 0, s = 0;
      for (var a = 0; a < o.length; a++) {
        var c = o[a];
        switch (c) {
          case " ":
            s++;
            break;
          case "	":
            s += 4;
            break;
          case "\r":
            s = 0;
            break;
          case `
`:
            s = 0, i++;
            break;
          default:
            throw new Error("whitespace characters not allowed in JSON");
        }
        r++;
      }
      break;
    default:
      o = void 0;
  }
  var u = "", f = {}, h = 0, d = 0, p = 0, g = n && n.es6 && typeof Map == "function";
  return m(t, 0, ""), {
    json: u,
    pointers: f
  };
  function m(C, A, w) {
    switch (v(w, "value"), typeof C) {
      case "number":
      case "bigint":
      case "boolean":
        _("" + C);
        break;
      case "string":
        _(gf(C));
        break;
      case "object":
        C === null ? _("null") : typeof C.toJSON == "function" ? _(gf(C.toJSON())) : Array.isArray(C) ? M() : g ? C.constructor.BYTES_PER_ELEMENT ? M() : C instanceof Map ? T() : C instanceof Set ? T(!0) : N() : N();
    }
    v(w, "valueEnd");
    function M() {
      if (C.length) {
        _("[");
        for (var O = A + 1, W = 0; W < C.length; W++) {
          W && _(","), S(O);
          var H = pf(C[W]) ? C[W] : null, I = w + "/" + W;
          m(H, O, I);
        }
        S(A), _("]");
      } else
        _("[]");
    }
    function N() {
      var O = Object.keys(C);
      if (O.length) {
        _("{");
        for (var W = A + 1, H = 0; H < O.length; H++) {
          var I = O[H], z = C[I];
          if (pf(z)) {
            H && _(",");
            var L = w + "/" + Vm(I);
            S(W), v(L, "key"), _(gf(I)), v(L, "keyEnd"), _(":"), o && _(" "), m(z, W, L);
          }
        }
        S(A), _("}");
      } else
        _("{}");
    }
    function T(O) {
      if (C.size) {
        _("{");
        for (var W = A + 1, H = !0, I = C.entries(), z = I.next(); !z.done; ) {
          var L = z.value, K = L[0], F = O ? !0 : L[1];
          if (pf(F)) {
            H || _(","), H = !1;
            var D = w + "/" + Vm(K);
            S(W), v(D, "key"), _(gf(K)), v(D, "keyEnd"), _(":"), o && _(" "), m(F, W, D);
          }
          z = I.next();
        }
        S(A), _("}");
      } else
        _("{}");
    }
  }
  function _(C) {
    d += C.length, p += C.length, u += C;
  }
  function S(C) {
    if (o) {
      for (u += `
` + k(C, o), h++, d = 0; C--; )
        i ? (h += i, d = s) : d += s, p += r;
      p += 1;
    }
  }
  function v(C, A) {
    f[C] = f[C] || {}, f[C][A] = {
      line: h,
      column: d,
      pos: p
    };
  }
  function k(C, A) {
    return Array(C + 1).join(A);
  }
};
var WR = ["number", "bigint", "boolean", "string", "object"];
function pf(t) {
  return WR.indexOf(typeof t) >= 0;
}
var qR = /"|\\/g, JR = /[\b]/g, KR = /\f/g, GR = /\n/g, YR = /\r/g, XR = /\t/g;
function gf(t) {
  return t = t.replace(qR, "\\$&").replace(KR, "\\f").replace(JR, "\\b").replace(GR, "\\n").replace(YR, "\\r").replace(XR, "\\t"), '"' + t + '"';
}
var QR = /~/g, ZR = /\//g;
function Vm(t) {
  return t.replace(QR, "~0").replace(ZR, "~1");
}
function Um(t) {
  return Um = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
    return typeof e;
  } : function(e) {
    return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
  }, Um(t);
}
function Cy(t, e) {
  for (var n = 0; n < e.length; n++) {
    var i = e[n];
    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i);
  }
}
function $R(t, e, n) {
  return e && Cy(t.prototype, e), n && Cy(t, n), Object.defineProperty(t, "prototype", { writable: !1 }), t;
}
function eP(t, e) {
  if (!(t instanceof e))
    throw new TypeError("Cannot call a class as a function");
}
function tP(t, e) {
  if (typeof e != "function" && e !== null)
    throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && Qc(t, e);
}
function nP(t) {
  var e = l5();
  return function() {
    var i = Zc(t), r;
    if (e) {
      var s = Zc(this).constructor;
      r = Reflect.construct(i, arguments, s);
    } else
      r = i.apply(this, arguments);
    return iP(this, r);
  };
}
function iP(t, e) {
  if (e && (Um(e) === "object" || typeof e == "function"))
    return e;
  if (e !== void 0)
    throw new TypeError("Derived constructors may only return object or undefined");
  return rP(t);
}
function rP(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
function Hm(t) {
  var e = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
  return Hm = function(i) {
    if (i === null || !sP(i))
      return i;
    if (typeof i != "function")
      throw new TypeError("Super expression must either be null or a function");
    if (typeof e < "u") {
      if (e.has(i))
        return e.get(i);
      e.set(i, r);
    }
    function r() {
      return fh(i, arguments, Zc(this).constructor);
    }
    return r.prototype = Object.create(i.prototype, { constructor: { value: r, enumerable: !1, writable: !0, configurable: !0 } }), Qc(r, i);
  }, Hm(t);
}
function fh(t, e, n) {
  return l5() ? fh = Reflect.construct.bind() : fh = function(r, s, o) {
    var l = [null];
    l.push.apply(l, s);
    var a = Function.bind.apply(r, l), c = new a();
    return o && Qc(c, o.prototype), c;
  }, fh.apply(null, arguments);
}
function l5() {
  if (typeof Reflect > "u" || !Reflect.construct || Reflect.construct.sham)
    return !1;
  if (typeof Proxy == "function")
    return !0;
  try {
    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {
    })), !0;
  } catch {
    return !1;
  }
}
function sP(t) {
  return Function.toString.call(t).indexOf("[native code]") !== -1;
}
function Qc(t, e) {
  return Qc = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(i, r) {
    return i.__proto__ = r, i;
  }, Qc(t, e);
}
function Zc(t) {
  return Zc = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(n) {
    return n.__proto__ || Object.getPrototypeOf(n);
  }, Zc(t);
}
var fo = /* @__PURE__ */ function(t) {
  tP(n, t);
  var e = nP(n);
  function n(i, r) {
    var s;
    return eP(this, n), s = e.call(this, i + " at position " + r), s.position = r, s;
  }
  return $R(n);
}(/* @__PURE__ */ Hm(Error)), mf = 92, vg = 47, oP = 42, Sy = 123, kg = 125, Ey = 91, Cg = 93, lP = 40, aP = 41, cP = 32, I0 = 10, a5 = 9, c5 = 13, uP = 8, fP = 12, hh = 34, Ay = 43, My = 45, hP = 39, D0 = 48, dP = 49, N0 = 57, bf = 44, pP = 46, gP = 58, mP = 59, bP = 65, _P = 97, yP = 69, wP = 101, vP = 70, kP = 102, CP = 160, SP = 8192, EP = 8202, AP = 8239, MP = 8287, OP = 12288, TP = 8220, RP = 8221, PP = 8216, IP = 8217, DP = 96, NP = 180;
function _f(t) {
  return t >= D0 && t < N0 || t >= bP && t <= vP || t >= _P && t <= kP;
}
function yf(t) {
  return t >= D0 && t <= N0;
}
function LP(t) {
  return t >= dP && t <= N0;
}
function jP(t) {
  return t >= 32 && t <= 1114111;
}
function BP(t) {
  return xP.test(t) || t && Uh(t.charCodeAt(0));
}
var xP = /^[,:[\]{}()\n]$/;
function Oy(t) {
  return FP.test(t) || t && Uh(t.charCodeAt(0));
}
var FP = /^[[{\w-]$/;
function zP(t) {
  return t === I0 || t === c5 || t === a5 || t === uP || t === fP;
}
function Vh(t) {
  return t === cP || t === I0 || t === a5 || t === c5;
}
function VP(t) {
  return t === CP || t >= SP && t <= EP || t === AP || t === MP || t === OP;
}
function Uh(t) {
  return u5(t) || Wm(t);
}
function u5(t) {
  return t === hh || t === TP || t === RP;
}
function Wm(t) {
  return t === hP || t === PP || t === IP || t === DP || t === NP;
}
function pc(t, e) {
  var n = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : !1, i = t.lastIndexOf(e);
  return i !== -1 ? t.substring(0, i) + (n ? "" : t.substring(i + 1)) : t;
}
function rl(t, e) {
  var n = t.length;
  if (!Vh(t.charCodeAt(n - 1)))
    return t + e;
  for (; Vh(t.charCodeAt(n - 1)); )
    n--;
  return t.substring(0, n) + e + t.substring(n);
}
function UP(t, e, n) {
  return t.substring(0, e) + t.substring(e + n);
}
function HP(t) {
  return /[,\n][ \t\r]*$/.test(t);
}
var WP = {
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, qP = {
  '"': '"',
  "\\": "\\",
  "/": "/",
  b: "\b",
  f: "\f",
  n: `
`,
  r: "\r",
  t: "	"
};
function us(t) {
  var e = 0, n = "", i = s();
  i || M();
  var r = c(bf);
  if (r && o(), Oy(t[e]) && HP(n) ? (r || (n = rl(n, ",")), p()) : r && (n = pc(n, ",")), e >= t.length)
    return n;
  w();
  function s() {
    o();
    var I = h() || d() || g() || _() || S() || k();
    return o(), I;
  }
  function o() {
    var I = e, z = l();
    do
      z = a(), z && (z = l());
    while (z);
    return e > I;
  }
  function l() {
    for (var I = "", z; (z = Vh(t.charCodeAt(e))) || VP(t.charCodeAt(e)); )
      z ? I += t[e] : I += " ", e++;
    return I.length > 0 ? (n += I, !0) : !1;
  }
  function a() {
    if (t.charCodeAt(e) === vg && t.charCodeAt(e + 1) === oP) {
      for (; e < t.length && !JP(t, e); )
        e++;
      return e += 2, !0;
    }
    if (t.charCodeAt(e) === vg && t.charCodeAt(e + 1) === vg) {
      for (; e < t.length && t.charCodeAt(e) !== I0; )
        e++;
      return !0;
    }
    return !1;
  }
  function c(I) {
    return t.charCodeAt(e) === I ? (n += t[e], e++, !0) : !1;
  }
  function u(I) {
    return t.charCodeAt(e) === I ? (e++, !0) : !1;
  }
  function f() {
    return u(mf);
  }
  function h() {
    if (t.charCodeAt(e) === Sy) {
      n += "{", e++, o();
      for (var I = !0; e < t.length && t.charCodeAt(e) !== kg; ) {
        var z = void 0;
        I ? (z = !0, I = !1) : (z = c(bf), z || (n = rl(n, ",")), o());
        var L = g() || k();
        if (!L) {
          t.charCodeAt(e) === kg || t.charCodeAt(e) === Sy || t.charCodeAt(e) === Cg || t.charCodeAt(e) === Ey || t[e] === void 0 ? n = pc(n, ",") : N();
          break;
        }
        o();
        var K = c(gP);
        K || (Oy(t[e]) ? n = rl(n, ":") : O());
        var F = s();
        F || (K ? T() : O());
      }
      return t.charCodeAt(e) === kg ? (n += "}", e++) : n = rl(n, "}"), !0;
    }
    return !1;
  }
  function d() {
    if (t.charCodeAt(e) === Ey) {
      n += "[", e++, o();
      for (var I = !0; e < t.length && t.charCodeAt(e) !== Cg; ) {
        if (I)
          I = !1;
        else {
          var z = c(bf);
          z || (n = rl(n, ","));
        }
        var L = s();
        if (!L) {
          n = pc(n, ",");
          break;
        }
      }
      return t.charCodeAt(e) === Cg ? (n += "]", e++) : n = rl(n, "]"), !0;
    }
    return !1;
  }
  function p() {
    for (var I = !0, z = !0; z; ) {
      if (I)
        I = !1;
      else {
        var L = c(bf);
        L || (n = rl(n, ","));
      }
      z = s();
    }
    z || (n = pc(n, ",")), n = `[
`.concat(n, `
]`);
  }
  function g() {
    var I = t.charCodeAt(e) === mf;
    if (I && (e++, I = !0), Uh(t.charCodeAt(e))) {
      var z = Wm(t.charCodeAt(e)) ? Wm : u5;
      for (t.charCodeAt(e), n += '"', e++; e < t.length && !z(t.charCodeAt(e)); ) {
        if (t.charCodeAt(e) === mf) {
          var L = t[e + 1], K = qP[L];
          K !== void 0 ? (n += t.slice(e, e + 2), e += 2) : L === "u" ? _f(t.charCodeAt(e + 2)) && _f(t.charCodeAt(e + 3)) && _f(t.charCodeAt(e + 4)) && _f(t.charCodeAt(e + 5)) ? (n += t.slice(e, e + 6), e += 6) : W(e) : (n += L, e += 2);
        } else {
          var F = t[e], D = t.charCodeAt(e);
          D === hh && t.charCodeAt(e - 1) !== mf ? (n += "\\" + F, e++) : zP(D) ? (n += WP[F], e++) : (jP(D) || A(F), n += F, e++);
        }
        I && f();
      }
      return Uh(t.charCodeAt(e)) ? (t.charCodeAt(e), n += '"', e++) : n += '"', m(), !0;
    }
    return !1;
  }
  function m() {
    var I = !1;
    for (o(); t.charCodeAt(e) === Ay; ) {
      I = !0, e++, o(), n = pc(n, '"', !0);
      var z = n.length;
      g(), n = UP(n, z, 1);
    }
    return I;
  }
  function _() {
    var I = e;
    if (t.charCodeAt(e) === My && (e++, C(I)), t.charCodeAt(e) === D0)
      e++;
    else if (LP(t.charCodeAt(e)))
      for (e++; yf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === pP)
      for (e++, C(I); yf(t.charCodeAt(e)); )
        e++;
    if (t.charCodeAt(e) === wP || t.charCodeAt(e) === yP)
      for (e++, (t.charCodeAt(e) === My || t.charCodeAt(e) === Ay) && e++, C(I); yf(t.charCodeAt(e)); )
        e++;
    return e > I ? (n += t.slice(I, e), !0) : !1;
  }
  function S() {
    return v("true", "true") || v("false", "false") || v("null", "null") || v("True", "true") || v("False", "false") || v("None", "null");
  }
  function v(I, z) {
    return t.slice(e, e + I.length) === I ? (n += z, e += I.length, !0) : !1;
  }
  function k() {
    for (var I = e; e < t.length && !BP(t[e]); )
      e++;
    if (e > I) {
      if (t.charCodeAt(e) === lP)
        return e++, s(), t.charCodeAt(e) === aP && (e++, t.charCodeAt(e) === mP && e++), !0;
      for (; Vh(t.charCodeAt(e - 1)) && e > 0; )
        e--;
      var z = t.slice(I, e);
      return n += JSON.stringify(z), !0;
    }
  }
  function C(I) {
    if (!yf(t.charCodeAt(e))) {
      var z = t.slice(I, e);
      throw new fo("Invalid number '".concat(z, "', expecting a digit ").concat(H()), 2);
    }
  }
  function A(I) {
    throw new fo("Invalid character " + JSON.stringify(I), e);
  }
  function w() {
    throw new fo("Unexpected character " + JSON.stringify(t[e]), e);
  }
  function M() {
    throw new fo("Unexpected end of json string", t.length);
  }
  function N() {
    throw new fo("Object key expected", e);
  }
  function T() {
    throw new fo("Object value expected", e);
  }
  function O() {
    throw new fo("Colon expected", e);
  }
  function W(I) {
    for (var z = I + 2; /\w/.test(t[z]); )
      z++;
    var L = t.slice(I, z);
    throw new fo('Invalid unicode character "'.concat(L, '"'), e);
  }
  function H() {
    return t[e] ? "but got '".concat(t[e], "'") : "but reached end of input";
  }
}
function JP(t, e) {
  return t[e] === "*" && t[e + 1] === "/";
}
function Gn(t) {
  return parseInt(t, 10);
}
function L0(t) {
  return KP.test(t);
}
const KP = /^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;
function An(t) {
  return typeof t == "object" && t !== null && t.constructor === Object;
}
function dn(t) {
  return typeof t == "object" && t !== null && (t.constructor === Object || t.constructor === Array);
}
function GP(t) {
  return t === !0 || t === !1;
}
function qm(t) {
  if (typeof t == "number")
    return t > 9466848e5 && isFinite(t) && Math.floor(t) === t && !isNaN(new Date(t).valueOf());
  if (typeof t == "bigint")
    return qm(Number(t));
  try {
    const n = t.valueOf();
    if (n !== t)
      return qm(n);
  } catch {
    return !1;
  }
}
function f5(t) {
  const e = window.document.createElement("div");
  return e.style.color = t, e.style.color.split(/\s+/).join("").toLowerCase() || null;
}
function YP(t) {
  return typeof t == "string" && !!f5(t);
}
function j0(t, e) {
  if (typeof t == "number" || typeof t == "string" || typeof t == "boolean" || typeof t > "u")
    return typeof t;
  if (typeof t == "bigint")
    return "number";
  if (t === null)
    return "null";
  if (Array.isArray(t))
    return "array";
  if (An(t))
    return "object";
  const n = e.stringify(t);
  return n && L0(n) ? "number" : n === "true" || n === "false" ? "boolean" : n === "null" ? "null" : "unknown";
}
const XP = /^https?:\/\/\S+$/;
function op(t) {
  return typeof t == "string" && XP.test(t);
}
function tc(t, e) {
  if (t === "")
    return "";
  const n = t.trim();
  return n === "null" ? null : n === "true" ? !0 : n === "false" ? !1 : L0(n) ? e.parse(n) : t;
}
function QP(t, e) {
  return typeof t == "string" && typeof tc(t, e) != "string";
}
function ZP(t) {
  return $P.test(t);
}
const $P = /^-?[0-9]+$/;
var eI = typeof global == "object" && global && global.Object === Object && global;
const h5 = eI;
var tI = typeof self == "object" && self && self.Object === Object && self, nI = h5 || tI || Function("return this")();
const Wr = nI;
var iI = Wr.Symbol;
const yr = iI;
var d5 = Object.prototype, rI = d5.hasOwnProperty, sI = d5.toString, gc = yr ? yr.toStringTag : void 0;
function oI(t) {
  var e = rI.call(t, gc), n = t[gc];
  try {
    t[gc] = void 0;
    var i = !0;
  } catch {
  }
  var r = sI.call(t);
  return i && (e ? t[gc] = n : delete t[gc]), r;
}
var lI = Object.prototype, aI = lI.toString;
function cI(t) {
  return aI.call(t);
}
var uI = "[object Null]", fI = "[object Undefined]", Ty = yr ? yr.toStringTag : void 0;
function nc(t) {
  return t == null ? t === void 0 ? fI : uI : Ty && Ty in Object(t) ? oI(t) : cI(t);
}
function No(t) {
  return t != null && typeof t == "object";
}
var hI = "[object Symbol]";
function Ml(t) {
  return typeof t == "symbol" || No(t) && nc(t) == hI;
}
function Lc(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = Array(i); ++n < i; )
    r[n] = e(t[n], n, t);
  return r;
}
var dI = Array.isArray;
const Ti = dI;
var pI = 1 / 0, Ry = yr ? yr.prototype : void 0, Py = Ry ? Ry.toString : void 0;
function p5(t) {
  if (typeof t == "string")
    return t;
  if (Ti(t))
    return Lc(t, p5) + "";
  if (Ml(t))
    return Py ? Py.call(t) : "";
  var e = t + "";
  return e == "0" && 1 / t == -pI ? "-0" : e;
}
var gI = /\s/;
function mI(t) {
  for (var e = t.length; e-- && gI.test(t.charAt(e)); )
    ;
  return e;
}
var bI = /^\s+/;
function _I(t) {
  return t && t.slice(0, mI(t) + 1).replace(bI, "");
}
function Ur(t) {
  var e = typeof t;
  return t != null && (e == "object" || e == "function");
}
var Iy = 0 / 0, yI = /^[-+]0x[0-9a-f]+$/i, wI = /^0b[01]+$/i, vI = /^0o[0-7]+$/i, kI = parseInt;
function Jm(t) {
  if (typeof t == "number")
    return t;
  if (Ml(t))
    return Iy;
  if (Ur(t)) {
    var e = typeof t.valueOf == "function" ? t.valueOf() : t;
    t = Ur(e) ? e + "" : e;
  }
  if (typeof t != "string")
    return t === 0 ? t : +t;
  t = _I(t);
  var n = wI.test(t);
  return n || vI.test(t) ? kI(t.slice(2), n ? 2 : 8) : yI.test(t) ? Iy : +t;
}
var Dy = 1 / 0, CI = 17976931348623157e292;
function dh(t) {
  if (!t)
    return t === 0 ? t : 0;
  if (t = Jm(t), t === Dy || t === -Dy) {
    var e = t < 0 ? -1 : 1;
    return e * CI;
  }
  return t === t ? t : 0;
}
function SI(t) {
  var e = dh(t), n = e % 1;
  return e === e ? n ? e - n : e : 0;
}
function Fu(t) {
  return t;
}
var EI = "[object AsyncFunction]", AI = "[object Function]", MI = "[object GeneratorFunction]", OI = "[object Proxy]";
function g5(t) {
  if (!Ur(t))
    return !1;
  var e = nc(t);
  return e == AI || e == MI || e == EI || e == OI;
}
var TI = Wr["__core-js_shared__"];
const Sg = TI;
var Ny = function() {
  var t = /[^.]+$/.exec(Sg && Sg.keys && Sg.keys.IE_PROTO || "");
  return t ? "Symbol(src)_1." + t : "";
}();
function RI(t) {
  return !!Ny && Ny in t;
}
var PI = Function.prototype, II = PI.toString;
function Hl(t) {
  if (t != null) {
    try {
      return II.call(t);
    } catch {
    }
    try {
      return t + "";
    } catch {
    }
  }
  return "";
}
var DI = /[\\^$.*+?()[\]{}|]/g, NI = /^\[object .+?Constructor\]$/, LI = Function.prototype, jI = Object.prototype, BI = LI.toString, xI = jI.hasOwnProperty, FI = RegExp(
  "^" + BI.call(xI).replace(DI, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
);
function zI(t) {
  if (!Ur(t) || RI(t))
    return !1;
  var e = g5(t) ? FI : NI;
  return e.test(Hl(t));
}
function VI(t, e) {
  return t == null ? void 0 : t[e];
}
function Wl(t, e) {
  var n = VI(t, e);
  return zI(n) ? n : void 0;
}
var UI = Wl(Wr, "WeakMap");
const Km = UI;
var Ly = Object.create, HI = function() {
  function t() {
  }
  return function(e) {
    if (!Ur(e))
      return {};
    if (Ly)
      return Ly(e);
    t.prototype = e;
    var n = new t();
    return t.prototype = void 0, n;
  };
}();
const WI = HI;
function qI(t, e, n) {
  switch (n.length) {
    case 0:
      return t.call(e);
    case 1:
      return t.call(e, n[0]);
    case 2:
      return t.call(e, n[0], n[1]);
    case 3:
      return t.call(e, n[0], n[1], n[2]);
  }
  return t.apply(e, n);
}
function hn() {
}
function JI(t, e) {
  var n = -1, i = t.length;
  for (e || (e = Array(i)); ++n < i; )
    e[n] = t[n];
  return e;
}
var KI = 800, GI = 16, YI = Date.now;
function XI(t) {
  var e = 0, n = 0;
  return function() {
    var i = YI(), r = GI - (i - n);
    if (n = i, r > 0) {
      if (++e >= KI)
        return arguments[0];
    } else
      e = 0;
    return t.apply(void 0, arguments);
  };
}
function QI(t) {
  return function() {
    return t;
  };
}
var ZI = function() {
  try {
    var t = Wl(Object, "defineProperty");
    return t({}, "", {}), t;
  } catch {
  }
}();
const Hh = ZI;
var $I = Hh ? function(t, e) {
  return Hh(t, "toString", {
    configurable: !0,
    enumerable: !1,
    value: QI(e),
    writable: !0
  });
} : Fu;
const eD = $I;
var tD = XI(eD);
const nD = tD;
function iD(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var rD = 9007199254740991, sD = /^(?:0|[1-9]\d*)$/;
function B0(t, e) {
  var n = typeof t;
  return e = e ?? rD, !!e && (n == "number" || n != "symbol" && sD.test(t)) && t > -1 && t % 1 == 0 && t < e;
}
function lp(t, e, n) {
  e == "__proto__" && Hh ? Hh(t, e, {
    configurable: !0,
    enumerable: !0,
    value: n,
    writable: !0
  }) : t[e] = n;
}
function ap(t, e) {
  return t === e || t !== t && e !== e;
}
var oD = Object.prototype, lD = oD.hasOwnProperty;
function m5(t, e, n) {
  var i = t[e];
  (!(lD.call(t, e) && ap(i, n)) || n === void 0 && !(e in t)) && lp(t, e, n);
}
function cp(t, e, n, i) {
  var r = !n;
  n || (n = {});
  for (var s = -1, o = e.length; ++s < o; ) {
    var l = e[s], a = i ? i(n[l], t[l], l, n, t) : void 0;
    a === void 0 && (a = t[l]), r ? lp(n, l, a) : m5(n, l, a);
  }
  return n;
}
var jy = Math.max;
function aD(t, e, n) {
  return e = jy(e === void 0 ? t.length - 1 : e, 0), function() {
    for (var i = arguments, r = -1, s = jy(i.length - e, 0), o = Array(s); ++r < s; )
      o[r] = i[e + r];
    r = -1;
    for (var l = Array(e + 1); ++r < e; )
      l[r] = i[r];
    return l[e] = n(o), qI(t, this, l);
  };
}
function cD(t, e) {
  return nD(aD(t, e, Fu), t + "");
}
var uD = 9007199254740991;
function x0(t) {
  return typeof t == "number" && t > -1 && t % 1 == 0 && t <= uD;
}
function ic(t) {
  return t != null && x0(t.length) && !g5(t);
}
function Gm(t, e, n) {
  if (!Ur(n))
    return !1;
  var i = typeof e;
  return (i == "number" ? ic(n) && B0(e, n.length) : i == "string" && e in n) ? ap(n[e], t) : !1;
}
var fD = Object.prototype;
function up(t) {
  var e = t && t.constructor, n = typeof e == "function" && e.prototype || fD;
  return t === n;
}
function b5(t, e) {
  for (var n = -1, i = Array(t); ++n < t; )
    i[n] = e(n);
  return i;
}
var hD = "[object Arguments]";
function By(t) {
  return No(t) && nc(t) == hD;
}
var _5 = Object.prototype, dD = _5.hasOwnProperty, pD = _5.propertyIsEnumerable, gD = By(function() {
  return arguments;
}()) ? By : function(t) {
  return No(t) && dD.call(t, "callee") && !pD.call(t, "callee");
};
const fp = gD;
function mD() {
  return !1;
}
var y5 = typeof exports == "object" && exports && !exports.nodeType && exports, xy = y5 && typeof module == "object" && module && !module.nodeType && module, bD = xy && xy.exports === y5, Fy = bD ? Wr.Buffer : void 0, _D = Fy ? Fy.isBuffer : void 0, yD = _D || mD;
const $c = yD;
var wD = "[object Arguments]", vD = "[object Array]", kD = "[object Boolean]", CD = "[object Date]", SD = "[object Error]", ED = "[object Function]", AD = "[object Map]", MD = "[object Number]", OD = "[object Object]", TD = "[object RegExp]", RD = "[object Set]", PD = "[object String]", ID = "[object WeakMap]", DD = "[object ArrayBuffer]", ND = "[object DataView]", LD = "[object Float32Array]", jD = "[object Float64Array]", BD = "[object Int8Array]", xD = "[object Int16Array]", FD = "[object Int32Array]", zD = "[object Uint8Array]", VD = "[object Uint8ClampedArray]", UD = "[object Uint16Array]", HD = "[object Uint32Array]", un = {};
un[LD] = un[jD] = un[BD] = un[xD] = un[FD] = un[zD] = un[VD] = un[UD] = un[HD] = !0;
un[wD] = un[vD] = un[DD] = un[kD] = un[ND] = un[CD] = un[SD] = un[ED] = un[AD] = un[MD] = un[OD] = un[TD] = un[RD] = un[PD] = un[ID] = !1;
function WD(t) {
  return No(t) && x0(t.length) && !!un[nc(t)];
}
function hp(t) {
  return function(e) {
    return t(e);
  };
}
var w5 = typeof exports == "object" && exports && !exports.nodeType && exports, jc = w5 && typeof module == "object" && module && !module.nodeType && module, qD = jc && jc.exports === w5, Eg = qD && h5.process, JD = function() {
  try {
    var t = jc && jc.require && jc.require("util").types;
    return t || Eg && Eg.binding && Eg.binding("util");
  } catch {
  }
}();
const Ta = JD;
var zy = Ta && Ta.isTypedArray, KD = zy ? hp(zy) : WD;
const F0 = KD;
var GD = Object.prototype, YD = GD.hasOwnProperty;
function v5(t, e) {
  var n = Ti(t), i = !n && fp(t), r = !n && !i && $c(t), s = !n && !i && !r && F0(t), o = n || i || r || s, l = o ? b5(t.length, String) : [], a = l.length;
  for (var c in t)
    (e || YD.call(t, c)) && !(o && (c == "length" || r && (c == "offset" || c == "parent") || s && (c == "buffer" || c == "byteLength" || c == "byteOffset") || B0(c, a))) && l.push(c);
  return l;
}
function k5(t, e) {
  return function(n) {
    return t(e(n));
  };
}
var XD = k5(Object.keys, Object);
const QD = XD;
var ZD = Object.prototype, $D = ZD.hasOwnProperty;
function C5(t) {
  if (!up(t))
    return QD(t);
  var e = [];
  for (var n in Object(t))
    $D.call(t, n) && n != "constructor" && e.push(n);
  return e;
}
function rc(t) {
  return ic(t) ? v5(t) : C5(t);
}
function e7(t) {
  var e = [];
  if (t != null)
    for (var n in Object(t))
      e.push(n);
  return e;
}
var t7 = Object.prototype, n7 = t7.hasOwnProperty;
function i7(t) {
  if (!Ur(t))
    return e7(t);
  var e = up(t), n = [];
  for (var i in t)
    i == "constructor" && (e || !n7.call(t, i)) || n.push(i);
  return n;
}
function z0(t) {
  return ic(t) ? v5(t, !0) : i7(t);
}
var r7 = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, s7 = /^\w*$/;
function V0(t, e) {
  if (Ti(t))
    return !1;
  var n = typeof t;
  return n == "number" || n == "symbol" || n == "boolean" || t == null || Ml(t) ? !0 : s7.test(t) || !r7.test(t) || e != null && t in Object(e);
}
var o7 = Wl(Object, "create");
const eu = o7;
function l7() {
  this.__data__ = eu ? eu(null) : {}, this.size = 0;
}
function a7(t) {
  var e = this.has(t) && delete this.__data__[t];
  return this.size -= e ? 1 : 0, e;
}
var c7 = "__lodash_hash_undefined__", u7 = Object.prototype, f7 = u7.hasOwnProperty;
function h7(t) {
  var e = this.__data__;
  if (eu) {
    var n = e[t];
    return n === c7 ? void 0 : n;
  }
  return f7.call(e, t) ? e[t] : void 0;
}
var d7 = Object.prototype, p7 = d7.hasOwnProperty;
function g7(t) {
  var e = this.__data__;
  return eu ? e[t] !== void 0 : p7.call(e, t);
}
var m7 = "__lodash_hash_undefined__";
function b7(t, e) {
  var n = this.__data__;
  return this.size += this.has(t) ? 0 : 1, n[t] = eu && e === void 0 ? m7 : e, this;
}
function Ol(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
Ol.prototype.clear = l7;
Ol.prototype.delete = a7;
Ol.prototype.get = h7;
Ol.prototype.has = g7;
Ol.prototype.set = b7;
function _7() {
  this.__data__ = [], this.size = 0;
}
function dp(t, e) {
  for (var n = t.length; n--; )
    if (ap(t[n][0], e))
      return n;
  return -1;
}
var y7 = Array.prototype, w7 = y7.splice;
function v7(t) {
  var e = this.__data__, n = dp(e, t);
  if (n < 0)
    return !1;
  var i = e.length - 1;
  return n == i ? e.pop() : w7.call(e, n, 1), --this.size, !0;
}
function k7(t) {
  var e = this.__data__, n = dp(e, t);
  return n < 0 ? void 0 : e[n][1];
}
function C7(t) {
  return dp(this.__data__, t) > -1;
}
function S7(t, e) {
  var n = this.__data__, i = dp(n, t);
  return i < 0 ? (++this.size, n.push([t, e])) : n[i][1] = e, this;
}
function ro(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
ro.prototype.clear = _7;
ro.prototype.delete = v7;
ro.prototype.get = k7;
ro.prototype.has = C7;
ro.prototype.set = S7;
var E7 = Wl(Wr, "Map");
const tu = E7;
function A7() {
  this.size = 0, this.__data__ = {
    hash: new Ol(),
    map: new (tu || ro)(),
    string: new Ol()
  };
}
function M7(t) {
  var e = typeof t;
  return e == "string" || e == "number" || e == "symbol" || e == "boolean" ? t !== "__proto__" : t === null;
}
function pp(t, e) {
  var n = t.__data__;
  return M7(e) ? n[typeof e == "string" ? "string" : "hash"] : n.map;
}
function O7(t) {
  var e = pp(this, t).delete(t);
  return this.size -= e ? 1 : 0, e;
}
function T7(t) {
  return pp(this, t).get(t);
}
function R7(t) {
  return pp(this, t).has(t);
}
function P7(t, e) {
  var n = pp(this, t), i = n.size;
  return n.set(t, e), this.size += n.size == i ? 0 : 1, this;
}
function so(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.clear(); ++e < n; ) {
    var i = t[e];
    this.set(i[0], i[1]);
  }
}
so.prototype.clear = A7;
so.prototype.delete = O7;
so.prototype.get = T7;
so.prototype.has = R7;
so.prototype.set = P7;
var I7 = "Expected a function";
function gp(t, e) {
  if (typeof t != "function" || e != null && typeof e != "function")
    throw new TypeError(I7);
  var n = function() {
    var i = arguments, r = e ? e.apply(this, i) : i[0], s = n.cache;
    if (s.has(r))
      return s.get(r);
    var o = t.apply(this, i);
    return n.cache = s.set(r, o) || s, o;
  };
  return n.cache = new (gp.Cache || so)(), n;
}
gp.Cache = so;
var D7 = 500;
function N7(t) {
  var e = gp(t, function(i) {
    return n.size === D7 && n.clear(), i;
  }), n = e.cache;
  return e;
}
var L7 = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g, j7 = /\\(\\)?/g, B7 = N7(function(t) {
  var e = [];
  return t.charCodeAt(0) === 46 && e.push(""), t.replace(L7, function(n, i, r, s) {
    e.push(r ? s.replace(j7, "$1") : i || n);
  }), e;
});
const x7 = B7;
function S5(t) {
  return t == null ? "" : p5(t);
}
function E5(t, e) {
  return Ti(t) ? t : V0(t, e) ? [t] : x7(S5(t));
}
var F7 = 1 / 0;
function mp(t) {
  if (typeof t == "string" || Ml(t))
    return t;
  var e = t + "";
  return e == "0" && 1 / t == -F7 ? "-0" : e;
}
function U0(t, e) {
  e = E5(e, t);
  for (var n = 0, i = e.length; t != null && n < i; )
    t = t[mp(e[n++])];
  return n && n == i ? t : void 0;
}
function z7(t, e, n) {
  var i = t == null ? void 0 : U0(t, e);
  return i === void 0 ? n : i;
}
function H0(t, e) {
  for (var n = -1, i = e.length, r = t.length; ++n < i; )
    t[r + n] = e[n];
  return t;
}
var Vy = yr ? yr.isConcatSpreadable : void 0;
function V7(t) {
  return Ti(t) || fp(t) || !!(Vy && t && t[Vy]);
}
function A5(t, e, n, i, r) {
  var s = -1, o = t.length;
  for (n || (n = V7), r || (r = []); ++s < o; ) {
    var l = t[s];
    e > 0 && n(l) ? e > 1 ? A5(l, e - 1, n, i, r) : H0(r, l) : i || (r[r.length] = l);
  }
  return r;
}
var U7 = k5(Object.getPrototypeOf, Object);
const M5 = U7;
function H7(t, e, n) {
  var i = -1, r = t.length;
  e < 0 && (e = -e > r ? 0 : r + e), n = n > r ? r : n, n < 0 && (n += r), r = e > n ? 0 : n - e >>> 0, e >>>= 0;
  for (var s = Array(r); ++i < r; )
    s[i] = t[i + e];
  return s;
}
function W7() {
  this.__data__ = new ro(), this.size = 0;
}
function q7(t) {
  var e = this.__data__, n = e.delete(t);
  return this.size = e.size, n;
}
function J7(t) {
  return this.__data__.get(t);
}
function K7(t) {
  return this.__data__.has(t);
}
var G7 = 200;
function Y7(t, e) {
  var n = this.__data__;
  if (n instanceof ro) {
    var i = n.__data__;
    if (!tu || i.length < G7 - 1)
      return i.push([t, e]), this.size = ++n.size, this;
    n = this.__data__ = new so(i);
  }
  return n.set(t, e), this.size = n.size, this;
}
function fs(t) {
  var e = this.__data__ = new ro(t);
  this.size = e.size;
}
fs.prototype.clear = W7;
fs.prototype.delete = q7;
fs.prototype.get = J7;
fs.prototype.has = K7;
fs.prototype.set = Y7;
function X7(t, e) {
  return t && cp(e, rc(e), t);
}
function Q7(t, e) {
  return t && cp(e, z0(e), t);
}
var O5 = typeof exports == "object" && exports && !exports.nodeType && exports, Uy = O5 && typeof module == "object" && module && !module.nodeType && module, Z7 = Uy && Uy.exports === O5, Hy = Z7 ? Wr.Buffer : void 0, Wy = Hy ? Hy.allocUnsafe : void 0;
function $7(t, e) {
  if (e)
    return t.slice();
  var n = t.length, i = Wy ? Wy(n) : new t.constructor(n);
  return t.copy(i), i;
}
function e9(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length, r = 0, s = []; ++n < i; ) {
    var o = t[n];
    e(o, n, t) && (s[r++] = o);
  }
  return s;
}
function T5() {
  return [];
}
var t9 = Object.prototype, n9 = t9.propertyIsEnumerable, qy = Object.getOwnPropertySymbols, i9 = qy ? function(t) {
  return t == null ? [] : (t = Object(t), e9(qy(t), function(e) {
    return n9.call(t, e);
  }));
} : T5;
const W0 = i9;
function r9(t, e) {
  return cp(t, W0(t), e);
}
var s9 = Object.getOwnPropertySymbols, o9 = s9 ? function(t) {
  for (var e = []; t; )
    H0(e, W0(t)), t = M5(t);
  return e;
} : T5;
const R5 = o9;
function l9(t, e) {
  return cp(t, R5(t), e);
}
function P5(t, e, n) {
  var i = e(t);
  return Ti(t) ? i : H0(i, n(t));
}
function Ym(t) {
  return P5(t, rc, W0);
}
function a9(t) {
  return P5(t, z0, R5);
}
var c9 = Wl(Wr, "DataView");
const Xm = c9;
var u9 = Wl(Wr, "Promise");
const Qm = u9;
var f9 = Wl(Wr, "Set");
const Zm = f9;
var Jy = "[object Map]", h9 = "[object Object]", Ky = "[object Promise]", Gy = "[object Set]", Yy = "[object WeakMap]", Xy = "[object DataView]", d9 = Hl(Xm), p9 = Hl(tu), g9 = Hl(Qm), m9 = Hl(Zm), b9 = Hl(Km), al = nc;
(Xm && al(new Xm(new ArrayBuffer(1))) != Xy || tu && al(new tu()) != Jy || Qm && al(Qm.resolve()) != Ky || Zm && al(new Zm()) != Gy || Km && al(new Km()) != Yy) && (al = function(t) {
  var e = nc(t), n = e == h9 ? t.constructor : void 0, i = n ? Hl(n) : "";
  if (i)
    switch (i) {
      case d9:
        return Xy;
      case p9:
        return Jy;
      case g9:
        return Ky;
      case m9:
        return Gy;
      case b9:
        return Yy;
    }
  return e;
});
const Ra = al;
var _9 = Object.prototype, y9 = _9.hasOwnProperty;
function w9(t) {
  var e = t.length, n = new t.constructor(e);
  return e && typeof t[0] == "string" && y9.call(t, "index") && (n.index = t.index, n.input = t.input), n;
}
var v9 = Wr.Uint8Array;
const Wh = v9;
function q0(t) {
  var e = new t.constructor(t.byteLength);
  return new Wh(e).set(new Wh(t)), e;
}
function k9(t, e) {
  var n = e ? q0(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.byteLength);
}
var C9 = /\w*$/;
function S9(t) {
  var e = new t.constructor(t.source, C9.exec(t));
  return e.lastIndex = t.lastIndex, e;
}
var Qy = yr ? yr.prototype : void 0, Zy = Qy ? Qy.valueOf : void 0;
function E9(t) {
  return Zy ? Object(Zy.call(t)) : {};
}
function A9(t, e) {
  var n = e ? q0(t.buffer) : t.buffer;
  return new t.constructor(n, t.byteOffset, t.length);
}
var M9 = "[object Boolean]", O9 = "[object Date]", T9 = "[object Map]", R9 = "[object Number]", P9 = "[object RegExp]", I9 = "[object Set]", D9 = "[object String]", N9 = "[object Symbol]", L9 = "[object ArrayBuffer]", j9 = "[object DataView]", B9 = "[object Float32Array]", x9 = "[object Float64Array]", F9 = "[object Int8Array]", z9 = "[object Int16Array]", V9 = "[object Int32Array]", U9 = "[object Uint8Array]", H9 = "[object Uint8ClampedArray]", W9 = "[object Uint16Array]", q9 = "[object Uint32Array]";
function J9(t, e, n) {
  var i = t.constructor;
  switch (e) {
    case L9:
      return q0(t);
    case M9:
    case O9:
      return new i(+t);
    case j9:
      return k9(t, n);
    case B9:
    case x9:
    case F9:
    case z9:
    case V9:
    case U9:
    case H9:
    case W9:
    case q9:
      return A9(t, n);
    case T9:
      return new i();
    case R9:
    case D9:
      return new i(t);
    case P9:
      return S9(t);
    case I9:
      return new i();
    case N9:
      return E9(t);
  }
}
function K9(t) {
  return typeof t.constructor == "function" && !up(t) ? WI(M5(t)) : {};
}
var G9 = "[object Map]";
function Y9(t) {
  return No(t) && Ra(t) == G9;
}
var $y = Ta && Ta.isMap, X9 = $y ? hp($y) : Y9;
const Q9 = X9;
var Z9 = "[object Set]";
function $9(t) {
  return No(t) && Ra(t) == Z9;
}
var ew = Ta && Ta.isSet, eN = ew ? hp(ew) : $9;
const tN = eN;
var nN = 1, iN = 2, rN = 4, I5 = "[object Arguments]", sN = "[object Array]", oN = "[object Boolean]", lN = "[object Date]", aN = "[object Error]", D5 = "[object Function]", cN = "[object GeneratorFunction]", uN = "[object Map]", fN = "[object Number]", N5 = "[object Object]", hN = "[object RegExp]", dN = "[object Set]", pN = "[object String]", gN = "[object Symbol]", mN = "[object WeakMap]", bN = "[object ArrayBuffer]", _N = "[object DataView]", yN = "[object Float32Array]", wN = "[object Float64Array]", vN = "[object Int8Array]", kN = "[object Int16Array]", CN = "[object Int32Array]", SN = "[object Uint8Array]", EN = "[object Uint8ClampedArray]", AN = "[object Uint16Array]", MN = "[object Uint32Array]", rn = {};
rn[I5] = rn[sN] = rn[bN] = rn[_N] = rn[oN] = rn[lN] = rn[yN] = rn[wN] = rn[vN] = rn[kN] = rn[CN] = rn[uN] = rn[fN] = rn[N5] = rn[hN] = rn[dN] = rn[pN] = rn[gN] = rn[SN] = rn[EN] = rn[AN] = rn[MN] = !0;
rn[aN] = rn[D5] = rn[mN] = !1;
function ph(t, e, n, i, r, s) {
  var o, l = e & nN, a = e & iN, c = e & rN;
  if (n && (o = r ? n(t, i, r, s) : n(t)), o !== void 0)
    return o;
  if (!Ur(t))
    return t;
  var u = Ti(t);
  if (u) {
    if (o = w9(t), !l)
      return JI(t, o);
  } else {
    var f = Ra(t), h = f == D5 || f == cN;
    if ($c(t))
      return $7(t, l);
    if (f == N5 || f == I5 || h && !r) {
      if (o = a || h ? {} : K9(t), !l)
        return a ? l9(t, Q7(o, t)) : r9(t, X7(o, t));
    } else {
      if (!rn[f])
        return r ? t : {};
      o = J9(t, f, l);
    }
  }
  s || (s = new fs());
  var d = s.get(t);
  if (d)
    return d;
  s.set(t, o), tN(t) ? t.forEach(function(m) {
    o.add(ph(m, e, n, m, t, s));
  }) : Q9(t) && t.forEach(function(m, _) {
    o.set(_, ph(m, e, n, _, t, s));
  });
  var p = c ? a ? a9 : Ym : a ? z0 : rc, g = u ? void 0 : p(t);
  return iD(g || t, function(m, _) {
    g && (_ = m, m = t[_]), m5(o, _, ph(m, e, n, _, t, s));
  }), o;
}
var ON = 1, TN = 4;
function RN(t, e) {
  return e = typeof e == "function" ? e : void 0, ph(t, ON | TN, e);
}
var PN = "__lodash_hash_undefined__";
function IN(t) {
  return this.__data__.set(t, PN), this;
}
function DN(t) {
  return this.__data__.has(t);
}
function qh(t) {
  var e = -1, n = t == null ? 0 : t.length;
  for (this.__data__ = new so(); ++e < n; )
    this.add(t[e]);
}
qh.prototype.add = qh.prototype.push = IN;
qh.prototype.has = DN;
function NN(t, e) {
  for (var n = -1, i = t == null ? 0 : t.length; ++n < i; )
    if (e(t[n], n, t))
      return !0;
  return !1;
}
function LN(t, e) {
  return t.has(e);
}
var jN = 1, BN = 2;
function L5(t, e, n, i, r, s) {
  var o = n & jN, l = t.length, a = e.length;
  if (l != a && !(o && a > l))
    return !1;
  var c = s.get(t), u = s.get(e);
  if (c && u)
    return c == e && u == t;
  var f = -1, h = !0, d = n & BN ? new qh() : void 0;
  for (s.set(t, e), s.set(e, t); ++f < l; ) {
    var p = t[f], g = e[f];
    if (i)
      var m = o ? i(g, p, f, e, t, s) : i(p, g, f, t, e, s);
    if (m !== void 0) {
      if (m)
        continue;
      h = !1;
      break;
    }
    if (d) {
      if (!NN(e, function(_, S) {
        if (!LN(d, S) && (p === _ || r(p, _, n, i, s)))
          return d.push(S);
      })) {
        h = !1;
        break;
      }
    } else if (!(p === g || r(p, g, n, i, s))) {
      h = !1;
      break;
    }
  }
  return s.delete(t), s.delete(e), h;
}
function xN(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i, r) {
    n[++e] = [r, i];
  }), n;
}
function FN(t) {
  var e = -1, n = Array(t.size);
  return t.forEach(function(i) {
    n[++e] = i;
  }), n;
}
var zN = 1, VN = 2, UN = "[object Boolean]", HN = "[object Date]", WN = "[object Error]", qN = "[object Map]", JN = "[object Number]", KN = "[object RegExp]", GN = "[object Set]", YN = "[object String]", XN = "[object Symbol]", QN = "[object ArrayBuffer]", ZN = "[object DataView]", tw = yr ? yr.prototype : void 0, Ag = tw ? tw.valueOf : void 0;
function $N(t, e, n, i, r, s, o) {
  switch (n) {
    case ZN:
      if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
        return !1;
      t = t.buffer, e = e.buffer;
    case QN:
      return !(t.byteLength != e.byteLength || !s(new Wh(t), new Wh(e)));
    case UN:
    case HN:
    case JN:
      return ap(+t, +e);
    case WN:
      return t.name == e.name && t.message == e.message;
    case KN:
    case YN:
      return t == e + "";
    case qN:
      var l = xN;
    case GN:
      var a = i & zN;
      if (l || (l = FN), t.size != e.size && !a)
        return !1;
      var c = o.get(t);
      if (c)
        return c == e;
      i |= VN, o.set(t, e);
      var u = L5(l(t), l(e), i, r, s, o);
      return o.delete(t), u;
    case XN:
      if (Ag)
        return Ag.call(t) == Ag.call(e);
  }
  return !1;
}
var eL = 1, tL = Object.prototype, nL = tL.hasOwnProperty;
function iL(t, e, n, i, r, s) {
  var o = n & eL, l = Ym(t), a = l.length, c = Ym(e), u = c.length;
  if (a != u && !o)
    return !1;
  for (var f = a; f--; ) {
    var h = l[f];
    if (!(o ? h in e : nL.call(e, h)))
      return !1;
  }
  var d = s.get(t), p = s.get(e);
  if (d && p)
    return d == e && p == t;
  var g = !0;
  s.set(t, e), s.set(e, t);
  for (var m = o; ++f < a; ) {
    h = l[f];
    var _ = t[h], S = e[h];
    if (i)
      var v = o ? i(S, _, h, e, t, s) : i(_, S, h, t, e, s);
    if (!(v === void 0 ? _ === S || r(_, S, n, i, s) : v)) {
      g = !1;
      break;
    }
    m || (m = h == "constructor");
  }
  if (g && !m) {
    var k = t.constructor, C = e.constructor;
    k != C && "constructor" in t && "constructor" in e && !(typeof k == "function" && k instanceof k && typeof C == "function" && C instanceof C) && (g = !1);
  }
  return s.delete(t), s.delete(e), g;
}
var rL = 1, nw = "[object Arguments]", iw = "[object Array]", wf = "[object Object]", sL = Object.prototype, rw = sL.hasOwnProperty;
function oL(t, e, n, i, r, s) {
  var o = Ti(t), l = Ti(e), a = o ? iw : Ra(t), c = l ? iw : Ra(e);
  a = a == nw ? wf : a, c = c == nw ? wf : c;
  var u = a == wf, f = c == wf, h = a == c;
  if (h && $c(t)) {
    if (!$c(e))
      return !1;
    o = !0, u = !1;
  }
  if (h && !u)
    return s || (s = new fs()), o || F0(t) ? L5(t, e, n, i, r, s) : $N(t, e, a, n, i, r, s);
  if (!(n & rL)) {
    var d = u && rw.call(t, "__wrapped__"), p = f && rw.call(e, "__wrapped__");
    if (d || p) {
      var g = d ? t.value() : t, m = p ? e.value() : e;
      return s || (s = new fs()), r(g, m, n, i, s);
    }
  }
  return h ? (s || (s = new fs()), iL(t, e, n, i, r, s)) : !1;
}
function bp(t, e, n, i, r) {
  return t === e ? !0 : t == null || e == null || !No(t) && !No(e) ? t !== t && e !== e : oL(t, e, n, i, bp, r);
}
var lL = 1, aL = 2;
function cL(t, e, n, i) {
  var r = n.length, s = r, o = !i;
  if (t == null)
    return !s;
  for (t = Object(t); r--; ) {
    var l = n[r];
    if (o && l[2] ? l[1] !== t[l[0]] : !(l[0] in t))
      return !1;
  }
  for (; ++r < s; ) {
    l = n[r];
    var a = l[0], c = t[a], u = l[1];
    if (o && l[2]) {
      if (c === void 0 && !(a in t))
        return !1;
    } else {
      var f = new fs();
      if (i)
        var h = i(c, u, a, t, e, f);
      if (!(h === void 0 ? bp(u, c, lL | aL, i, f) : h))
        return !1;
    }
  }
  return !0;
}
function j5(t) {
  return t === t && !Ur(t);
}
function uL(t) {
  for (var e = rc(t), n = e.length; n--; ) {
    var i = e[n], r = t[i];
    e[n] = [i, r, j5(r)];
  }
  return e;
}
function B5(t, e) {
  return function(n) {
    return n == null ? !1 : n[t] === e && (e !== void 0 || t in Object(n));
  };
}
function fL(t) {
  var e = uL(t);
  return e.length == 1 && e[0][2] ? B5(e[0][0], e[0][1]) : function(n) {
    return n === t || cL(n, t, e);
  };
}
function hL(t, e) {
  return t != null && e in Object(t);
}
function dL(t, e, n) {
  e = E5(e, t);
  for (var i = -1, r = e.length, s = !1; ++i < r; ) {
    var o = mp(e[i]);
    if (!(s = t != null && n(t, o)))
      break;
    t = t[o];
  }
  return s || ++i != r ? s : (r = t == null ? 0 : t.length, !!r && x0(r) && B0(o, r) && (Ti(t) || fp(t)));
}
function pL(t, e) {
  return t != null && dL(t, e, hL);
}
var gL = 1, mL = 2;
function bL(t, e) {
  return V0(t) && j5(e) ? B5(mp(t), e) : function(n) {
    var i = z7(n, t);
    return i === void 0 && i === e ? pL(n, t) : bp(e, i, gL | mL);
  };
}
function _L(t) {
  return function(e) {
    return e == null ? void 0 : e[t];
  };
}
function yL(t) {
  return function(e) {
    return U0(e, t);
  };
}
function wL(t) {
  return V0(t) ? _L(mp(t)) : yL(t);
}
function zu(t) {
  return typeof t == "function" ? t : t == null ? Fu : typeof t == "object" ? Ti(t) ? bL(t[0], t[1]) : fL(t) : wL(t);
}
function vL(t, e, n, i) {
  for (var r = -1, s = t == null ? 0 : t.length; ++r < s; ) {
    var o = t[r];
    e(i, o, n(o), t);
  }
  return i;
}
function x5(t) {
  return function(e, n, i) {
    for (var r = -1, s = Object(e), o = i(e), l = o.length; l--; ) {
      var a = o[t ? l : ++r];
      if (n(s[a], a, s) === !1)
        break;
    }
    return e;
  };
}
var kL = x5();
const CL = kL;
function F5(t, e) {
  return t && CL(t, e, rc);
}
function z5(t, e) {
  return function(n, i) {
    if (n == null)
      return n;
    if (!ic(n))
      return t(n, i);
    for (var r = n.length, s = e ? r : -1, o = Object(n); (e ? s-- : ++s < r) && i(o[s], s, o) !== !1; )
      ;
    return n;
  };
}
var SL = z5(F5);
const V5 = SL;
function EL(t, e, n, i) {
  return V5(t, function(r, s, o) {
    e(i, r, n(r), o);
  }), i;
}
function U5(t, e) {
  return function(n, i) {
    var r = Ti(n) ? vL : EL, s = e ? e() : {};
    return r(n, t, zu(i), s);
  };
}
var AL = function() {
  return Wr.Date.now();
};
const Mg = AL;
var ML = "Expected a function", OL = Math.max, TL = Math.min;
function _p(t, e, n) {
  var i, r, s, o, l, a, c = 0, u = !1, f = !1, h = !0;
  if (typeof t != "function")
    throw new TypeError(ML);
  e = Jm(e) || 0, Ur(n) && (u = !!n.leading, f = "maxWait" in n, s = f ? OL(Jm(n.maxWait) || 0, e) : s, h = "trailing" in n ? !!n.trailing : h);
  function d(A) {
    var w = i, M = r;
    return i = r = void 0, c = A, o = t.apply(M, w), o;
  }
  function p(A) {
    return c = A, l = setTimeout(_, e), u ? d(A) : o;
  }
  function g(A) {
    var w = A - a, M = A - c, N = e - w;
    return f ? TL(N, s - M) : N;
  }
  function m(A) {
    var w = A - a, M = A - c;
    return a === void 0 || w >= e || w < 0 || f && M >= s;
  }
  function _() {
    var A = Mg();
    if (m(A))
      return S(A);
    l = setTimeout(_, g(A));
  }
  function S(A) {
    return l = void 0, h && i ? d(A) : (i = r = void 0, o);
  }
  function v() {
    l !== void 0 && clearTimeout(l), c = 0, i = a = r = l = void 0;
  }
  function k() {
    return l === void 0 ? o : S(Mg());
  }
  function C() {
    var A = Mg(), w = m(A);
    if (i = arguments, r = this, a = A, w) {
      if (l === void 0)
        return p(a);
      if (f)
        return clearTimeout(l), l = setTimeout(_, e), d(a);
    }
    return l === void 0 && (l = setTimeout(_, e)), o;
  }
  return C.cancel = v, C.flush = k, C;
}
function at(t) {
  var e = t == null ? 0 : t.length;
  return e ? t[e - 1] : void 0;
}
function H5(t) {
  return typeof t == "function" ? t : Fu;
}
function RL(t, e) {
  for (var n = t == null ? 0 : t.length; n-- && e(t[n], n, t) !== !1; )
    ;
  return t;
}
var PL = x5(!0);
const IL = PL;
function DL(t, e) {
  return t && IL(t, e, rc);
}
var NL = z5(DL, !0);
const LL = NL;
function jL(t, e) {
  var n = Ti(t) ? RL : LL;
  return n(t, H5(e));
}
function Bi(t) {
  return t && t.length ? t[0] : void 0;
}
function W5(t, e) {
  var n = -1, i = ic(t) ? Array(t.length) : [];
  return V5(t, function(r, s, o) {
    i[++n] = e(r, s, o);
  }), i;
}
function BL(t, e) {
  var n = Ti(t) ? Lc : W5;
  return n(t, zu(e));
}
var xL = Object.prototype, FL = xL.hasOwnProperty, zL = U5(function(t, e, n) {
  FL.call(t, n) ? t[n].push(e) : lp(t, n, [e]);
});
const yp = zL;
function St(t) {
  var e = t == null ? 0 : t.length;
  return e ? H7(t, 0, -1) : [];
}
var VL = "[object Map]", UL = "[object Set]", HL = Object.prototype, WL = HL.hasOwnProperty;
function Ot(t) {
  if (t == null)
    return !0;
  if (ic(t) && (Ti(t) || typeof t == "string" || typeof t.splice == "function" || $c(t) || F0(t) || fp(t)))
    return !t.length;
  var e = Ra(t);
  if (e == VL || e == UL)
    return !t.size;
  if (up(t))
    return !C5(t).length;
  for (var n in t)
    if (WL.call(t, n))
      return !1;
  return !0;
}
function At(t, e) {
  return bp(t, e);
}
function qL(t, e) {
  return t < e;
}
function JL(t, e) {
  var n = {};
  return e = zu(e), F5(t, function(i, r, s) {
    lp(n, r, e(i, r, s));
  }), n;
}
function KL(t, e, n) {
  for (var i = -1, r = t.length; ++i < r; ) {
    var s = t[i], o = e(s);
    if (o != null && (l === void 0 ? o === o && !Ml(o) : n(o, l)))
      var l = o, a = s;
  }
  return a;
}
function vf(t, e) {
  return t && t.length ? KL(t, zu(e), qL) : void 0;
}
function GL(t, e) {
  var n = t.length;
  for (t.sort(e); n--; )
    t[n] = t[n].value;
  return t;
}
function YL(t, e) {
  if (t !== e) {
    var n = t !== void 0, i = t === null, r = t === t, s = Ml(t), o = e !== void 0, l = e === null, a = e === e, c = Ml(e);
    if (!l && !c && !s && t > e || s && o && a && !l && !c || i && o && a || !n && a || !r)
      return 1;
    if (!i && !s && !c && t < e || c && n && r && !i && !s || l && n && r || !o && r || !a)
      return -1;
  }
  return 0;
}
function XL(t, e, n) {
  for (var i = -1, r = t.criteria, s = e.criteria, o = r.length, l = n.length; ++i < o; ) {
    var a = YL(r[i], s[i]);
    if (a) {
      if (i >= l)
        return a;
      var c = n[i];
      return a * (c == "desc" ? -1 : 1);
    }
  }
  return t.index - e.index;
}
function QL(t, e, n) {
  e.length ? e = Lc(e, function(s) {
    return Ti(s) ? function(o) {
      return U0(o, s.length === 1 ? s[0] : s);
    } : s;
  }) : e = [Fu];
  var i = -1;
  e = Lc(e, hp(zu));
  var r = W5(t, function(s, o, l) {
    var a = Lc(e, function(c) {
      return c(s);
    });
    return { criteria: a, index: ++i, value: s };
  });
  return GL(r, function(s, o) {
    return XL(s, o, n);
  });
}
var ZL = U5(function(t, e, n) {
  t[n ? 0 : 1].push(e);
}, function() {
  return [[], []];
});
const $L = ZL;
var ej = Math.ceil, tj = Math.max;
function nj(t, e, n, i) {
  for (var r = -1, s = tj(ej((e - t) / (n || 1)), 0), o = Array(s); s--; )
    o[i ? s : ++r] = t, t += n;
  return o;
}
function ij(t) {
  return function(e, n, i) {
    return i && typeof i != "number" && Gm(e, n, i) && (n = i = void 0), e = dh(e), n === void 0 ? (n = e, e = 0) : n = dh(n), i = i === void 0 ? e < n ? 1 : -1 : dh(i), nj(e, n, i, t);
  };
}
var rj = ij();
const sj = rj;
var oj = cD(function(t, e) {
  if (t == null)
    return [];
  var n = e.length;
  return n > 1 && Gm(t, e[0], e[1]) ? e = [] : n > 2 && Gm(e[0], e[1], e[2]) && (e = [e[0]]), QL(t, A5(e, 1), []);
});
const lj = oj;
var aj = "Expected a function";
function cj(t, e, n) {
  var i = !0, r = !0;
  if (typeof t != "function")
    throw new TypeError(aj);
  return Ur(n) && (i = "leading" in n ? !!n.leading : i, r = "trailing" in n ? !!n.trailing : r), _p(t, e, {
    leading: i,
    maxWait: e,
    trailing: r
  });
}
var uj = 9007199254740991, Og = 4294967295, fj = Math.min;
function sw(t, e) {
  if (t = SI(t), t < 1 || t > uj)
    return [];
  var n = Og, i = fj(t, Og);
  e = H5(e), t -= Og;
  for (var r = b5(i, e); ++n < t; )
    e(n);
  return r;
}
var hj = 0;
function Pa(t) {
  var e = ++hj;
  return S5(t) + e;
}
const dj = 1e4, pj = [];
function $m(t, e = !1) {
  const n = {};
  if (!Array.isArray(t))
    throw new TypeError("Array expected");
  function i(o, l) {
    (!Array.isArray(o) && !An(o) || e && l.length > 0) && (n[xe(l)] = !0), An(o) && Object.keys(o).forEach((c) => {
      i(o[c], l.concat(c));
    });
  }
  const r = Math.min(t.length, dj);
  for (let o = 0; o < r; o++) {
    const l = t[o];
    i(l, pj);
  }
  return Object.keys(n).sort().map(Vr);
}
function q5(t, e, n) {
  if (!(e <= t))
    for (let i = t; i < e; i++)
      n(i);
}
function Jh(t, e) {
  return t.length > e ? t.slice(0, e) : t;
}
function ow(t) {
  return {
    ...t
  };
}
function lw(t) {
  return Object.values(t);
}
function aw(t, e, n, i) {
  const r = t.slice(0), s = r.splice(e, n);
  return r.splice.apply(r, [e + i, 0, ...s]), r;
}
function J0(t, e) {
  try {
    return e.parse(t);
  } catch {
    return e.parse(us(t));
  }
}
function J5(t, e) {
  try {
    return J0(t, e);
  } catch {
    return;
  }
}
function wp(t, e) {
  t = t.replace(G5, "");
  try {
    return e(t);
  } catch {
  }
  try {
    return e("[" + t + "]");
  } catch {
  }
  try {
    return e("{" + t + "}");
  } catch {
  }
  throw new Error("Failed to parse partial JSON");
}
function K5(t) {
  t = t.replace(G5, "");
  try {
    return us(t);
  } catch {
  }
  try {
    const e = us("[" + t + "]");
    return e.substring(1, e.length - 1);
  } catch {
  }
  try {
    const e = us("{" + t + "}");
    return e.substring(1, e.length - 1);
  } catch {
  }
  throw new Error("Failed to repair partial JSON");
}
const G5 = /,\s*$/;
function vp(t, e) {
  const n = uw.exec(e);
  if (n) {
    const i = Gn(n[2]), r = mj(t, `
`, 0, i), s = t.lastIndexOf(`
`, i), o = i - s - 1;
    return {
      position: i,
      line: r,
      column: o,
      message: e.replace(uw, () => `line ${r + 1} column ${o + 1}`)
    };
  } else {
    const i = vj.exec(e), r = i ? Gn(i[1]) : null, s = r !== null ? r - 1 : null, o = kj.exec(e), l = o ? Gn(o[1]) : null, a = l !== null ? l - 1 : null;
    return {
      position: s !== null && a !== null ? gj(t, s, a) : null,
      line: s,
      column: a,
      message: e.replace(/^JSON.parse: /, "").replace(/ of the JSON data$/, "")
    };
  }
}
function gj(t, e, n) {
  let i = t.indexOf(`
`), r = 1;
  for (; r < e && i !== -1; )
    i = t.indexOf(`
`, i + 1), r++;
  return i !== -1 ? i + n + 1 : null;
}
function mj(t, e, n = 0, i = t.length) {
  let r = 0;
  for (let s = n; s < i; s++)
    t.charAt(s) === e && r++;
  return r;
}
function bj(t, e) {
  try {
    const n = sp.parse(t), i = xe(e), r = n.pointers[i];
    if (r)
      return {
        path: e,
        line: r.key ? r.key.line : r.value ? r.value.line : 0,
        column: r.key ? r.key.column : r.value ? r.value.column : 0,
        from: r.key ? r.key.pos : r.value ? r.value.pos : 0,
        to: r.keyEnd ? r.keyEnd.pos : r.valueEnd ? r.valueEnd.pos : 0
      };
  } catch (n) {
    console.error(n);
  }
  return null;
}
function _j(t, e, n) {
  if (e === "array") {
    if (Array.isArray(t))
      return t;
    if (An(t))
      return lw(t);
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (Array.isArray(i))
          return i;
        if (An(i))
          return lw(i);
      } catch {
        return [t];
      }
    return [t];
  }
  if (e === "object") {
    if (Array.isArray(t))
      return ow(t);
    if (An(t))
      return t;
    if (typeof t == "string")
      try {
        const i = n.parse(t);
        if (An(i))
          return i;
        if (Array.isArray(i))
          return ow(i);
      } catch {
        return { value: t };
      }
    return { value: t };
  }
  if (e === "value")
    return dn(t) ? n.stringify(t) : t;
  throw new Error(`Cannot convert ${j0(t, n)} to ${e}`);
}
function Tg(t) {
  return An(t) ? t.json !== void 0 ? t.text !== void 0 ? 'Content must contain either a property "json" or a property "text" but not both' : null : t.text === void 0 ? 'Content must contain either a property "json" or a property "text"' : typeof t.text != "string" ? 'Content "text" property must be a string containing a JSON document. Did you mean to use the "json" property instead?' : null : "Content must be an object";
}
function Ia(t) {
  return An(t) && typeof t.text == "string";
}
function K0(t) {
  return An(t) && typeof t.json < "u" && !Ia(t);
}
function yj(t, e = void 0, n = JSON) {
  return Ia(t) ? t : { text: n.stringify(t.json, null, e) };
}
function cw(t, e = JSON) {
  return K0(t) ? t : { json: e.parse(t.text) };
}
function Kh(t, e, n) {
  return yj(t, e, n).text;
}
function Y5(t, e) {
  return wj(t, e) > e;
}
function wj(t, e = 1 / 0) {
  if (Ia(t))
    return t.text.length;
  const n = t.json;
  let i = 0;
  function r(s) {
    if (Array.isArray(s)) {
      if (i += 2 + (s.length - 1), i > e)
        return i;
      for (let o = 0; o < s.length; o++) {
        const l = s[o];
        if (r(l), i > e)
          return i;
      }
    } else if (An(s)) {
      const o = Object.keys(s);
      i += 2 + o.length + (o.length - 1);
      for (let l = 0; l < o.length; l++) {
        const a = o[l], c = s[a];
        i += a.length + 2, r(c);
      }
    } else
      typeof s == "string" ? i += s.length + 2 : i += String(s).length;
  }
  return r(n), i;
}
const uw = /(position|char) (\d+)/, vj = /line (\d+)/, kj = /column (\d+)/;
function Cj(t, e) {
  return t.parse === e.parse && t.stringify === e.stringify;
}
function G0({ escapeControlCharacters: t, escapeUnicodeCharacters: e }) {
  return t ? e ? Sj : Ej : e ? Aj : Mj;
}
const Sj = {
  escapeValue: (t) => X5($5(String(t))),
  unescapeValue: (t) => e6(Q5(t))
}, Ej = {
  escapeValue: (t) => $5(String(t)),
  unescapeValue: (t) => e6(t)
}, Aj = {
  escapeValue: (t) => X5(String(t)),
  unescapeValue: (t) => Q5(t)
}, Mj = {
  escapeValue: (t) => String(t),
  unescapeValue: (t) => t
};
function X5(t) {
  return t.replace(/[^\x20-\x7F]/g, (e) => {
    var n;
    return e === "\b" || e === "\f" || e === `
` || e === "\r" || e === "	" ? e : "\\u" + ("000" + ((n = e.codePointAt(0)) == null ? void 0 : n.toString(16))).slice(-4);
  });
}
function Q5(t) {
  return t.replace(/\\u[a-fA-F0-9]{4}/g, (e) => {
    try {
      const n = JSON.parse('"' + e + '"');
      return Z5[n] || n;
    } catch {
      return e;
    }
  });
}
const Z5 = {
  '"': '\\"',
  "\\": "\\\\",
  "\b": "\\b",
  "\f": "\\f",
  "\n": "\\n",
  "\r": "\\r",
  "	": "\\t"
}, Oj = {
  '\\"': '"',
  "\\\\": "\\",
  "\\/": "/",
  "\\b": "\b",
  "\\f": "\f",
  "\\n": `
`,
  "\\r": "\r",
  "\\t": "	"
};
function $5(t) {
  return t.replace(/["\b\f\n\r\t\\]/g, (e) => Z5[e] || e);
}
function e6(t) {
  return t.replace(/\\["bfnrt\\]/g, (e) => Oj[e] || e);
}
function Tl(t) {
  return typeof t != "string" ? String(t) : t.endsWith(`
`) ? t + `
` : t;
}
function Tj(t) {
  return t.replace(/\n$/, "");
}
function t6(t, e) {
  return Vu(t, (n) => n.nodeName.toUpperCase() === e.toUpperCase());
}
function hl(t, e, n) {
  return Vu(t, (i) => Pj(i, e, n));
}
function Rj(t) {
  return t.nodeName === "DIV" && t.contentEditable === "true";
}
function Pj(t, e, n) {
  return typeof t.getAttribute == "function" && t.getAttribute(e) === n;
}
function Vu(t, e) {
  return !!Y0(t, e);
}
function Y0(t, e) {
  let n = t;
  for (; n && !e(n); )
    n = n.parentNode;
  return n || void 0;
}
function n6(t) {
  if (t.firstChild == null) {
    t.focus();
    return;
  }
  const e = document.createRange(), n = window.getSelection();
  e.setStart(t, 1), e.collapse(!0), n == null || n.removeAllRanges(), n == null || n.addRange(e);
}
function Gh(t, e, n) {
  const i = sc(t).document.activeElement;
  i.isContentEditable && (i.textContent = n ? e : i.textContent + e, n6(i));
}
function sc(t) {
  return t && t.ownerDocument && t.ownerDocument.defaultView;
}
function Yh(t) {
  const e = sc(t);
  return Vu(e.document.activeElement, (n) => n === t);
}
function i6(t, e) {
  return Y0(t, (n) => n.nodeName === e);
}
function Rg(t) {
  return hl(t, "data-type", "selectable-key") ? qt.key : hl(t, "data-type", "selectable-value") ? qt.value : hl(t, "data-type", "insert-selection-area-inside") ? qt.inside : hl(t, "data-type", "insert-selection-area-after") ? qt.after : qt.multi;
}
function Da(t) {
  return encodeURIComponent(xe(t));
}
function Ij(t) {
  return Vr(decodeURIComponent(t));
}
function r6(t) {
  const e = Y0(t, (n) => n != null && n.hasAttribute ? n.hasAttribute("data-path") : !1);
  return e ? Ij(e.getAttribute("data-path")) : null;
}
function Dj({ allElements: t, currentElement: e, direction: n, hasPrio: i = () => !0, margin: r = 10 }) {
  const s = BL(t.filter(l), a), o = a(e);
  function l(_) {
    const S = _.getBoundingClientRect();
    return S.width > 0 && S.height > 0;
  }
  function a(_) {
    const S = _.getBoundingClientRect();
    return {
      x: S.left + S.width / 2,
      y: S.top + S.height / 2,
      rect: S,
      element: _
    };
  }
  const c = (_, S) => Math.abs(_.y - S.y) < r, u = (_, S) => _.rect.left + r < S.rect.left, f = (_, S) => _.rect.right > S.rect.right + r, h = (_, S) => _.y + r < S.y, d = (_, S) => _.y > S.y + r;
  function p(_, S, v = 1) {
    const k = _.x - S.x, C = (_.y - S.y) * v;
    return Math.sqrt(k * k + C * C);
  }
  const g = (_) => p(_, o), m = (_) => p(_, o, 10);
  if (n === "Left" || n === "Right") {
    const _ = n === "Left" ? s.filter((k) => u(k, o)) : s.filter((k) => f(k, o)), S = _.filter((k) => c(k, o)), v = vf(S, g) || vf(_, m);
    return v == null ? void 0 : v.element;
  }
  if (n === "Up" || n === "Down") {
    const _ = n === "Up" ? s.filter((k) => h(k, o)) : s.filter((k) => d(k, o)), S = _.filter((k) => i(k.element)), v = vf(S, g) || vf(_, g);
    return v == null ? void 0 : v.element;
  }
}
const s6 = typeof navigator < "u" ? navigator.platform.toUpperCase().indexOf("MAC") >= 0 : !1;
function Nj(t) {
  return jj[t] || "";
}
function Go(t) {
  const e = [];
  t.ctrlKey && e.push("Ctrl"), t.metaKey && e.push("Command"), t.altKey && e.push(s6 ? "Option" : "Alt"), t.shiftKey && e.push("Shift");
  const n = Nj(t.which);
  return Lj[n] || e.push(n), e.join("+");
}
const Lj = {
  Ctrl: !0,
  Command: !0,
  Alt: !0,
  Option: !0,
  Shift: !0
}, jj = {
  8: "Backspace",
  9: "Tab",
  13: "Enter",
  16: "Shift",
  17: "Ctrl",
  18: "Alt",
  19: "Pause_Break",
  20: "Caps_Lock",
  27: "Escape",
  33: "Page_Up",
  34: "Page_Down",
  35: "End",
  36: "Home",
  37: "Left",
  38: "Up",
  39: "Right",
  40: "Down",
  45: "Insert",
  46: "Delete",
  48: "0",
  49: "1",
  50: "2",
  51: "3",
  52: "4",
  53: "5",
  54: "6",
  55: "7",
  56: "8",
  57: "9",
  65: "A",
  66: "B",
  67: "C",
  68: "D",
  69: "E",
  70: "F",
  71: "G",
  72: "H",
  73: "I",
  74: "J",
  75: "K",
  76: "L",
  77: "M",
  78: "N",
  79: "O",
  80: "P",
  81: "Q",
  82: "R",
  83: "S",
  84: "T",
  85: "U",
  86: "V",
  87: "W",
  88: "X",
  89: "Y",
  90: "Z",
  91: "Left_Window_Key",
  92: "Right_Window_Key",
  93: "Select_Key",
  96: "Numpad_0",
  97: "Numpad_1",
  98: "Numpad_2",
  99: "Numpad_3",
  100: "Numpad_4",
  101: "Numpad_5",
  102: "Numpad_6",
  103: "Numpad_7",
  104: "Numpad_8",
  105: "Numpad_9",
  106: "Numpad_*",
  107: "Numpad_+",
  109: "Numpad_-",
  110: "Numpad_.",
  111: "Numpad_/",
  112: "F1",
  113: "F2",
  114: "F3",
  115: "F4",
  116: "F5",
  117: "F6",
  118: "F7",
  119: "F8",
  120: "F9",
  121: "F10",
  122: "F11",
  123: "F12",
  144: "Num_Lock",
  145: "Scroll_Lock",
  186: ";",
  59: ";",
  187: "=",
  61: "=",
  188: ",",
  189: "-",
  173: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
};
const { window: Pg } = np;
function fw(t) {
  let e, n, i, r, s, o;
  const l = [t[0].props];
  var a = t[0].component;
  function c(u) {
    let f = {};
    for (let h = 0; h < l.length; h += 1)
      f = Ko(f, l[h]);
    return { props: f };
  }
  return a && (r = vs(a, c())), {
    c() {
      e = j("div"), n = j("input"), i = Z(), r && ge(r.$$.fragment), b(n, "type", "text"), n.readOnly = !0, b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-1r8q3m8"), b(e, "class", "jse-absolute-popup-content svelte-1r8q3m8"), b(e, "style", s = hw(t[1], t[0].options));
    },
    m(u, f) {
      U(u, e, f), E(e, n), t[7](n), E(e, i), r && de(r, e, null), o = !0;
    },
    p(u, f) {
      const h = f & 1 ? Ul(l, [rp(u[0].props)]) : {};
      if (a !== (a = u[0].component)) {
        if (r) {
          Ae();
          const d = r;
          x(d.$$.fragment, 1, 0, () => {
            pe(d, 1);
          }), Me();
        }
        a ? (r = vs(a, c()), ge(r.$$.fragment), P(r.$$.fragment, 1), de(r, e, null)) : r = null;
      } else
        a && r.$set(h);
      (!o || f & 3 && s !== (s = hw(u[1], u[0].options))) && b(e, "style", s);
    },
    i(u) {
      o || (r && P(r.$$.fragment, u), o = !0);
    },
    o(u) {
      r && x(r.$$.fragment, u), o = !1;
    },
    d(u) {
      u && V(e), t[7](null), r && pe(r);
    }
  };
}
function Bj(t) {
  let e, n, i, r, s = t[1] && fw(t);
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "jse-absolute-popup svelte-1r8q3m8");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), t[8](e), n = !0, i || (r = [
        re(Pg, "mousedown", t[3], !0),
        re(Pg, "keydown", t[4], !0),
        re(Pg, "wheel", t[5], !0),
        re(e, "mousedown", xj),
        re(e, "keydown", t[4])
      ], i = !0);
    },
    p(o, [l]) {
      o[1] ? s ? (s.p(o, l), l & 2 && P(s, 1)) : (s = fw(o), s.c(), P(s, 1), s.m(e, null)) : s && (Ae(), x(s, 1, 1, () => {
        s = null;
      }), Me());
    },
    i(o) {
      n || (P(s), n = !0);
    },
    o(o) {
      x(s), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(), t[8](null), i = !1, ct(r);
    }
  };
}
function xj(t) {
  t.stopPropagation();
}
function hw(t, e) {
  function n() {
    if (e.anchor) {
      const { anchor: u, width: f = 0, height: h = 0, offsetTop: d = 0, offsetLeft: p = 0, position: g } = e, { left: m, top: _, bottom: S, right: v } = u.getBoundingClientRect(), k = g === "top" || _ + h > window.innerHeight && _ > h, C = g === "left" || m + f > window.innerWidth && m > f;
      return {
        left: C ? v - p : m + p,
        top: k ? _ - d : S + d,
        positionAbove: k,
        positionLeft: C
      };
    } else if (typeof e.left == "number" && typeof e.top == "number") {
      const { left: u, top: f, width: h = 0, height: d = 0 } = e, p = f + d > window.innerHeight && f > d, g = u + h > window.innerWidth && u > h;
      return { left: u, top: f, positionAbove: p, positionLeft: g };
    } else
      throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"');
  }
  const i = t.getBoundingClientRect(), { left: r, top: s, positionAbove: o, positionLeft: l } = n(), a = o ? `bottom: ${i.top - s}px;` : `top: ${s - i.top}px;`, c = l ? `right: ${i.left - r}px;` : `left: ${r - i.left}px;`;
  return a + c;
}
function Fj(t, e, n) {
  let { popup: i } = e, { closeAbsolutePopup: r } = e, s, o;
  or(f);
  function l(p) {
    i.options && i.options.closeOnOuterClick && !Vu(p.target, (g) => g === s) && r(i.id);
  }
  function a(p) {
    l(p);
  }
  function c(p) {
    Go(p) === "Escape" && r(i.id);
  }
  function u(p) {
    l(p);
  }
  function f() {
    o && o.focus();
  }
  function h(p) {
    _t[p ? "unshift" : "push"](() => {
      o = p, n(2, o);
    });
  }
  function d(p) {
    _t[p ? "unshift" : "push"](() => {
      s = p, n(1, s);
    });
  }
  return t.$$set = (p) => {
    "popup" in p && n(0, i = p.popup), "closeAbsolutePopup" in p && n(6, r = p.closeAbsolutePopup);
  }, [
    i,
    s,
    o,
    a,
    c,
    u,
    r,
    h,
    d
  ];
}
class zj extends Ge {
  constructor(e) {
    super(), Ke(this, e, Fj, Bj, Nt, { popup: 0, closeAbsolutePopup: 6 });
  }
}
const Vj = zj;
function dw(t, e, n) {
  const i = t.slice();
  return i[6] = e[n], i;
}
function pw(t) {
  let e, n;
  return e = new Vj({
    props: {
      popup: t[6],
      closeAbsolutePopup: t[1]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.popup = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Uj(t) {
  let e, n, i = t[0], r = [];
  for (let a = 0; a < i.length; a += 1)
    r[a] = pw(dw(t, i, a));
  const s = (a) => x(r[a], 1, 1, () => {
    r[a] = null;
  }), o = t[3].default, l = zn(o, t, t[2], null);
  return {
    c() {
      for (let a = 0; a < r.length; a += 1)
        r[a].c();
      e = Z(), l && l.c();
    },
    m(a, c) {
      for (let u = 0; u < r.length; u += 1)
        r[u].m(a, c);
      U(a, e, c), l && l.m(a, c), n = !0;
    },
    p(a, [c]) {
      if (c & 3) {
        i = a[0];
        let u;
        for (u = 0; u < i.length; u += 1) {
          const f = dw(a, i, u);
          r[u] ? (r[u].p(f, c), P(r[u], 1)) : (r[u] = pw(f), r[u].c(), P(r[u], 1), r[u].m(e.parentNode, e));
        }
        for (Ae(), u = i.length; u < r.length; u += 1)
          s(u);
        Me();
      }
      l && l.p && (!n || c & 4) && Un(
        l,
        o,
        a,
        a[2],
        n ? Vn(o, a[2], c, null) : Hn(a[2]),
        null
      );
    },
    i(a) {
      if (!n) {
        for (let c = 0; c < i.length; c += 1)
          P(r[c]);
        P(l, a), n = !0;
      }
    },
    o(a) {
      r = r.filter(Boolean);
      for (let c = 0; c < r.length; c += 1)
        x(r[c]);
      x(l, a), n = !1;
    },
    d(a) {
      xt(r, a), a && V(e), l && l.d(a);
    }
  };
}
function Hj(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e;
  const s = mi("jsoneditor:AbsolutePopup");
  let o = [];
  function l(c, u, f) {
    s("open...", u, f);
    const h = {
      id: Nc(),
      component: c,
      props: u || {},
      options: f || {}
    };
    return n(0, o = [...o, h]), h.id;
  }
  function a(c) {
    const u = o.findIndex((f) => f.id === c);
    if (u !== -1) {
      const f = o[u];
      f.options.onClose && f.options.onClose(), n(0, o = o.filter((h) => h.id !== c));
    }
  }
  return V4("absolute-popup", { openAbsolutePopup: l, closeAbsolutePopup: a }), t.$$set = (c) => {
    "$$scope" in c && n(2, r = c.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && s("popups", o);
  }, [o, a, r, i];
}
class Wj extends Ge {
  constructor(e) {
    super(), Ke(this, e, Hj, Uj, yt, {});
  }
}
const o6 = Wj;
function Ji(t) {
  return "$" + t.map(qj).join("");
}
function qj(t) {
  if (a6.test(t))
    return "[" + t + "]";
  if (l6.test(t))
    return "." + t;
  {
    const e = JSON.stringify(t);
    return "['" + e.substring(1, e.length - 1).replace(/\\"/g, '"') + "']";
  }
}
function wr(t) {
  return t.replace(/^\$/, "").replace(/^\./, "");
}
function Jj(t) {
  return t.startsWith("$") ? t : !t.startsWith("[") && !t.startsWith(".") ? "$." + t : "$" + t;
}
function Kj(t) {
  let e = Jj(t.trim()).substring(1);
  const n = [];
  for (; e.length > 0; ) {
    const i = e.match(Qj);
    if (!i)
      throw new SyntaxError(`Cannot parse path: unexpected part "${e}" at position ${t.length - e.length}`);
    n.push(i[1] || i[2] || i[3]), e = e.substring(i[0].length);
  }
  return n;
}
const Gj = "^\\.([A-zA-Z$_][a-zA-Z$_0-9]*)", Yj = "^\\[([0-9]+)]", Xj = "^\\['(.*)']", Qj = new RegExp([Gj, Yj, Xj].join("|"));
function na(t) {
  return {
    value: t,
    label: Ot(t) ? "(whole item)" : wr(Ji(t))
  };
}
function sl(t) {
  return t.map((e) => a6.test(e) ? `?.[${e}]` : l6.test(e) ? `?.${e}` : `?.[${JSON.stringify(e)}]`).join("");
}
const l6 = /^[a-zA-Z$_][a-zA-Z$_\d]*$/, a6 = /^\d+$/;
function Zj() {
  return gp((t) => t, Ji);
}
function Uu(t, e) {
  const n = new Set(e), i = t.replace(/ \(copy( \d+)?\)$/, "");
  let r = t, s = 1;
  for (; n.has(r); ) {
    const o = "copy" + (s > 1 ? " " + s : "");
    r = `${i} (${o})`, s++;
  }
  return r;
}
function Cs(t, e) {
  const n = "...", i = e - n.length;
  return t.length > e ? t.substring(0, i) + n : t;
}
function $j(t) {
  if (t === "")
    return "";
  const e = t.toLowerCase();
  if (e === "null")
    return null;
  if (e === "true")
    return !0;
  if (e === "false")
    return !1;
  if (e === "undefined")
    return;
  const n = Number(t), i = parseFloat(t);
  return !isNaN(n) && !isNaN(i) ? n : t;
}
const eB = `
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`, tB = {
  id: "javascript",
  name: "JavaScript",
  description: eB,
  createQuery: nB,
  executeQuery: iB
};
function nB(t, e) {
  const { filter: n, sort: i, projection: r } = e, s = [];
  if (n && n.path && n.relation && n.value) {
    const o = `item => item${sl(n.path)}`, l = $j(n.value), a = typeof l == "string" ? `'${n.value}'` : ZP(n.value) && !Number.isSafeInteger(l) ? `${n.value}n` : n.value;
    s.push(`  data = data.filter(${o} ${n.relation} ${a})
`);
  }
  if (i && i.path && i.direction && (i.direction === "desc" ? s.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${sl(i.path)}
    const valueB = b${sl(i.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`) : s.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${sl(i.path)}
    const valueB = b${sl(i.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)), r && r.paths)
    if (r.paths.length > 1) {
      const o = r.paths.map((l) => {
        const a = l[l.length - 1] || "item", c = `item${sl(l)}`;
        return `    ${JSON.stringify(a)}: ${c}`;
      });
      s.push(`  data = data.map(item => ({
${o.join(`,
`)}})
  )
`);
    } else {
      const o = `item${sl(r.paths[0])}`;
      s.push(`  data = data.map(item => ${o})
`);
    }
  return s.push(`  return data
`), `function query (data) {
${s.join("")}}`;
}
function iB(t, e) {
  const i = new Function(`"use strict";

` + e + `

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(t);
  return i !== void 0 ? i : null;
}
var rB = {
  prefix: "far",
  iconName: "lightbulb",
  icon: [384, 512, [128161], "f0eb", "M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]
}, sB = {
  prefix: "far",
  iconName: "square-check",
  icon: [448, 512, [9745, 9989, 61510, "check-square"], "f14a", "M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]
}, nu = sB, iu = {
  prefix: "far",
  iconName: "square",
  icon: [448, 512, [9632, 9723, 9724, 61590], "f0c8", "M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]
}, oB = {
  prefix: "far",
  iconName: "clock",
  icon: [512, 512, [128339, "clock-four"], "f017", "M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]
};
function lB(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Ko(i, n[r]);
  return {
    c() {
      e = dt("path"), Bh(e, i);
    },
    m(r, s) {
      U(r, e, s);
    },
    p(r, [s]) {
      Bh(e, i = Ul(n, [s & 1 && r[0]]));
    },
    i: ye,
    o: ye,
    d(r) {
      r && V(e);
    }
  };
}
function aB(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class cB extends Ge {
  constructor(e) {
    super(), Ke(this, e, aB, lB, Nt, { data: 0 });
  }
}
function uB(t) {
  let e, n = [t[0]], i = {};
  for (let r = 0; r < n.length; r += 1)
    i = Ko(i, n[r]);
  return {
    c() {
      e = dt("polygon"), Bh(e, i);
    },
    m(r, s) {
      U(r, e, s);
    },
    p(r, [s]) {
      Bh(e, i = Ul(n, [s & 1 && r[0]]));
    },
    i: ye,
    o: ye,
    d(r) {
      r && V(e);
    }
  };
}
function fB(t, e, n) {
  let { data: i = {} } = e;
  return t.$$set = (r) => {
    "data" in r && n(0, i = r.data);
  }, [i];
}
class hB extends Ge {
  constructor(e) {
    super(), Ke(this, e, fB, uB, Nt, { data: 0 });
  }
}
function dB(t) {
  let e;
  return {
    c() {
      e = dt("g");
    },
    m(n, i) {
      U(n, e, i), e.innerHTML = t[0];
    },
    p(n, [i]) {
      i & 1 && (e.innerHTML = n[0]);
    },
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function pB(t, e, n) {
  let i = 870711;
  function r() {
    return i += 1, `fa-${i.toString(16)}`;
  }
  let s, { data: o } = e;
  function l(a) {
    if (!a || !a.raw)
      return null;
    let c = a.raw;
    const u = {};
    return c = c.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g, (f, h) => {
      const d = r();
      return u[h] = d, ` id="${d}"`;
    }), c = c.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g, (f, h, d, p) => {
      const g = h || p;
      return !g || !u[g] ? f : `#${u[g]}`;
    }), c;
  }
  return t.$$set = (a) => {
    "data" in a && n(1, o = a.data);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(0, s = l(o));
  }, [s, o];
}
class gB extends Ge {
  constructor(e) {
    super(), Ke(this, e, pB, dB, Nt, { data: 1 });
  }
}
function mB(t) {
  let e, n, i, r;
  const s = t[13].default, o = zn(s, t, t[12], null);
  return {
    c() {
      e = dt("svg"), o && o.c(), b(e, "version", "1.1"), b(e, "class", n = "fa-icon " + t[0] + " svelte-1dof0an"), b(e, "x", t[8]), b(e, "y", t[9]), b(e, "width", t[1]), b(e, "height", t[2]), b(e, "aria-label", t[11]), b(e, "role", i = t[11] ? "img" : "presentation"), b(e, "viewBox", t[3]), b(e, "style", t[10]), Se(e, "fa-spin", t[4]), Se(e, "fa-pulse", t[6]), Se(e, "fa-inverse", t[5]), Se(e, "fa-flip-horizontal", t[7] === "horizontal"), Se(e, "fa-flip-vertical", t[7] === "vertical");
    },
    m(l, a) {
      U(l, e, a), o && o.m(e, null), r = !0;
    },
    p(l, [a]) {
      o && o.p && (!r || a & 4096) && Un(
        o,
        s,
        l,
        l[12],
        r ? Vn(s, l[12], a, null) : Hn(l[12]),
        null
      ), (!r || a & 1 && n !== (n = "fa-icon " + l[0] + " svelte-1dof0an")) && b(e, "class", n), (!r || a & 256) && b(e, "x", l[8]), (!r || a & 512) && b(e, "y", l[9]), (!r || a & 2) && b(e, "width", l[1]), (!r || a & 4) && b(e, "height", l[2]), (!r || a & 2048) && b(e, "aria-label", l[11]), (!r || a & 2048 && i !== (i = l[11] ? "img" : "presentation")) && b(e, "role", i), (!r || a & 8) && b(e, "viewBox", l[3]), (!r || a & 1024) && b(e, "style", l[10]), (!r || a & 17) && Se(e, "fa-spin", l[4]), (!r || a & 65) && Se(e, "fa-pulse", l[6]), (!r || a & 33) && Se(e, "fa-inverse", l[5]), (!r || a & 129) && Se(e, "fa-flip-horizontal", l[7] === "horizontal"), (!r || a & 129) && Se(e, "fa-flip-vertical", l[7] === "vertical");
    },
    i(l) {
      r || (P(o, l), r = !0);
    },
    o(l) {
      x(o, l), r = !1;
    },
    d(l) {
      l && V(e), o && o.d(l);
    }
  };
}
function bB(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: s } = e, { width: o } = e, { height: l } = e, { box: a } = e, { spin: c = !1 } = e, { inverse: u = !1 } = e, { pulse: f = !1 } = e, { flip: h = null } = e, { x: d = void 0 } = e, { y: p = void 0 } = e, { style: g = void 0 } = e, { label: m = void 0 } = e;
  return t.$$set = (_) => {
    "class" in _ && n(0, s = _.class), "width" in _ && n(1, o = _.width), "height" in _ && n(2, l = _.height), "box" in _ && n(3, a = _.box), "spin" in _ && n(4, c = _.spin), "inverse" in _ && n(5, u = _.inverse), "pulse" in _ && n(6, f = _.pulse), "flip" in _ && n(7, h = _.flip), "x" in _ && n(8, d = _.x), "y" in _ && n(9, p = _.y), "style" in _ && n(10, g = _.style), "label" in _ && n(11, m = _.label), "$$scope" in _ && n(12, r = _.$$scope);
  }, [
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    r,
    i
  ];
}
class _B extends Ge {
  constructor(e) {
    super(), Ke(this, e, bB, mB, Nt, {
      class: 0,
      width: 1,
      height: 2,
      box: 3,
      spin: 4,
      inverse: 5,
      pulse: 6,
      flip: 7,
      x: 8,
      y: 9,
      style: 10,
      label: 11
    });
  }
}
function gw(t, e, n) {
  const i = t.slice();
  return i[24] = e[n], i;
}
function mw(t, e, n) {
  const i = t.slice();
  return i[27] = e[n], i;
}
function bw(t) {
  let e, n, i, r, s = t[6].paths && _w(t), o = t[6].polygons && ww(t), l = t[6].raw && kw(t);
  return {
    c() {
      s && s.c(), e = Z(), o && o.c(), n = Z(), l && l.c(), i = rt();
    },
    m(a, c) {
      s && s.m(a, c), U(a, e, c), o && o.m(a, c), U(a, n, c), l && l.m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      a[6].paths ? s ? (s.p(a, c), c & 64 && P(s, 1)) : (s = _w(a), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Ae(), x(s, 1, 1, () => {
        s = null;
      }), Me()), a[6].polygons ? o ? (o.p(a, c), c & 64 && P(o, 1)) : (o = ww(a), o.c(), P(o, 1), o.m(n.parentNode, n)) : o && (Ae(), x(o, 1, 1, () => {
        o = null;
      }), Me()), a[6].raw ? l ? (l.p(a, c), c & 64 && P(l, 1)) : (l = kw(a), l.c(), P(l, 1), l.m(i.parentNode, i)) : l && (Ae(), x(l, 1, 1, () => {
        l = null;
      }), Me());
    },
    i(a) {
      r || (P(s), P(o), P(l), r = !0);
    },
    o(a) {
      x(s), x(o), x(l), r = !1;
    },
    d(a) {
      s && s.d(a), a && V(e), o && o.d(a), a && V(n), l && l.d(a), a && V(i);
    }
  };
}
function _w(t) {
  let e, n, i = t[6].paths, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = yw(mw(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l & 64) {
        i = o[6].paths;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = mw(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = yw(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function yw(t) {
  let e, n;
  return e = new cB({ props: { data: t[27] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.data = i[27]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function ww(t) {
  let e, n, i = t[6].polygons, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = vw(gw(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l & 64) {
        i = o[6].polygons;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = gw(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = vw(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function vw(t) {
  let e, n;
  return e = new hB({ props: { data: t[24] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.data = i[24]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function kw(t) {
  let e, n, i;
  function r(o) {
    t[15](o);
  }
  let s = {};
  return t[6] !== void 0 && (s.data = t[6]), e = new gB({ props: s }), _t.push(() => Ir(e, "data", r, t[6])), {
    c() {
      ge(e.$$.fragment);
    },
    m(o, l) {
      de(e, o, l), i = !0;
    },
    p(o, l) {
      const a = {};
      !n && l & 64 && (n = !0, a.data = o[6], Pr(() => n = !1)), e.$set(a);
    },
    i(o) {
      i || (P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      pe(e, o);
    }
  };
}
function yB(t) {
  let e, n, i = t[6] && bw(t);
  return {
    c() {
      i && i.c(), e = rt();
    },
    m(r, s) {
      i && i.m(r, s), U(r, e, s), n = !0;
    },
    p(r, s) {
      r[6] ? i ? (i.p(r, s), s & 64 && P(i, 1)) : (i = bw(r), i.c(), P(i, 1), i.m(e.parentNode, e)) : i && (Ae(), x(i, 1, 1, () => {
        i = null;
      }), Me());
    },
    i(r) {
      n || (P(i), n = !0);
    },
    o(r) {
      x(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && V(e);
    }
  };
}
function wB(t) {
  let e;
  const n = t[14].default, i = zn(n, t, t[16], null), r = i || yB(t);
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i ? i.p && (!e || o & 65536) && Un(
        i,
        n,
        s,
        s[16],
        e ? Vn(n, s[16], o, null) : Hn(s[16]),
        null
      ) : r && r.p && (!e || o & 64) && r.p(s, e ? o : -1);
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function vB(t) {
  let e, n;
  return e = new _B({
    props: {
      label: t[5],
      width: t[7],
      height: t[8],
      box: t[10],
      style: t[9],
      spin: t[1],
      flip: t[4],
      inverse: t[2],
      pulse: t[3],
      class: t[0],
      $$slots: { default: [wB] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 32 && (s.label = i[5]), r & 128 && (s.width = i[7]), r & 256 && (s.height = i[8]), r & 1024 && (s.box = i[10]), r & 512 && (s.style = i[9]), r & 2 && (s.spin = i[1]), r & 16 && (s.flip = i[4]), r & 4 && (s.inverse = i[2]), r & 8 && (s.pulse = i[3]), r & 1 && (s.class = i[0]), r & 65600 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
let Cw = 1;
function kB(t) {
  if ("iconName" in t && "icon" in t) {
    let e = {}, n = t.icon, i = t.iconName, r = n[0], s = n[1], o = n[4], l = { width: r, height: s, paths: [{ d: o }] };
    return e[i] = l, e;
  }
  return t;
}
function CB(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { class: s = "" } = e, { data: o } = e, { scale: l = 1 } = e, { spin: a = !1 } = e, { inverse: c = !1 } = e, { pulse: u = !1 } = e, { flip: f = null } = e, { label: h = null } = e, d = null, { style: p = null } = e, g, m, _, S;
  function v() {
    if (typeof o > "u")
      return;
    const O = kB(o), [W] = Object.keys(O), H = O[W];
    H.paths || (H.paths = []), H.d && H.paths.push({ d: H.d }), H.polygons || (H.polygons = []), H.points && H.polygons.push({ points: H.points }), n(6, d = H);
  }
  function k() {
    let O = 1;
    return typeof l < "u" && (O = Number(l)), isNaN(O) || O <= 0 ? (console.warn('Invalid prop: prop "scale" should be a number over 0.'), Cw) : O * Cw;
  }
  function C() {
    return d ? `0 0 ${d.width} ${d.height}` : `0 0 ${g} ${m}`;
  }
  function A() {
    return d ? Math.max(d.width, d.height) / 16 : 1;
  }
  function w() {
    return d ? d.width / A() * k() : 0;
  }
  function M() {
    return d ? d.height / A() * k() : 0;
  }
  function N() {
    let O = "";
    p !== null && (O += p);
    let W = k();
    return W === 1 ? O.length === 0 ? void 0 : O : (O !== "" && !O.endsWith(";") && (O += "; "), `${O}font-size: ${W}em`);
  }
  function T(O) {
    d = O, n(6, d);
  }
  return t.$$set = (O) => {
    "class" in O && n(0, s = O.class), "data" in O && n(11, o = O.data), "scale" in O && n(12, l = O.scale), "spin" in O && n(1, a = O.spin), "inverse" in O && n(2, c = O.inverse), "pulse" in O && n(3, u = O.pulse), "flip" in O && n(4, f = O.flip), "label" in O && n(5, h = O.label), "style" in O && n(13, p = O.style), "$$scope" in O && n(16, r = O.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 14336 && (v(), n(7, g = w()), n(8, m = M()), n(9, _ = N()), n(10, S = C()));
  }, [
    s,
    a,
    c,
    u,
    f,
    h,
    d,
    g,
    m,
    _,
    S,
    o,
    l,
    p,
    i,
    T,
    r
  ];
}
class Et extends Ge {
  constructor(e) {
    super(), Ke(this, e, CB, vB, Nt, {
      class: 0,
      data: 11,
      scale: 12,
      spin: 1,
      inverse: 2,
      pulse: 3,
      flip: 4,
      label: 5,
      style: 13
    });
  }
}
function SB(t) {
  let e, n, i, r, s, o;
  return n = new Et({
    props: {
      data: t[0] === !0 ? nu : iu
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-boolean-toggle svelte-1vj58yv"), b(e, "title", i = t[1] ? `Boolean value ${t[0]}` : "Click to toggle this boolean value"), Se(e, "jse-readonly", t[1]);
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), r = !0, s || (o = re(e, "mousedown", t[2]), s = !0);
    },
    p(l, [a]) {
      const c = {};
      a & 1 && (c.data = l[0] === !0 ? nu : iu), n.$set(c), (!r || a & 3 && i !== (i = l[1] ? `Boolean value ${l[0]}` : "Click to toggle this boolean value")) && b(e, "title", i), (!r || a & 2) && Se(e, "jse-readonly", l[1]);
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n), s = !1, o();
    }
  };
}
function EB(t, e, n) {
  let { path: i } = e, { value: r } = e, { readOnly: s } = e, { onPatch: o } = e, { focus: l } = e;
  function a(c) {
    c.stopPropagation(), !s && (o([
      {
        op: "replace",
        path: xe(i),
        value: !r
      }
    ]), setTimeout(l));
  }
  return t.$$set = (c) => {
    "path" in c && n(3, i = c.path), "value" in c && n(0, r = c.value), "readOnly" in c && n(1, s = c.readOnly), "onPatch" in c && n(4, o = c.onPatch), "focus" in c && n(5, l = c.focus);
  }, [r, s, a, i, o, l];
}
class AB extends Ge {
  constructor(e) {
    super(), Ke(this, e, EB, SB, yt, {
      path: 3,
      value: 0,
      readOnly: 1,
      onPatch: 4,
      focus: 5
    });
  }
}
const MB = AB;
function OB(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-color-picker-popup svelte-1gn8yt9");
    },
    m(n, i) {
      U(n, e, i), t[4](e);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e), t[4](null);
    }
  };
}
function TB(t, e, n) {
  let { color: i } = e, { onChange: r } = e, { showOnTop: s } = e, o, l;
  or(async () => {
    const c = (await import("./vanilla-picker-b99e900d.js")).default;
    l = new c({
      parent: o,
      color: i,
      popup: s ? "top" : "bottom",
      onDone(u) {
        const h = u.rgba[3] === 1 ? u.hex.substring(0, 7) : u.hex;
        r(h);
      }
    }), l.show();
  }), ks(() => {
    l && l.destroy();
  });
  function a(c) {
    _t[c ? "unshift" : "push"](() => {
      o = c, n(0, o);
    });
  }
  return t.$$set = (c) => {
    "color" in c && n(1, i = c.color), "onChange" in c && n(2, r = c.onChange), "showOnTop" in c && n(3, s = c.showOnTop);
  }, [o, i, r, s, a];
}
class RB extends Ge {
  constructor(e) {
    super(), Ke(this, e, TB, OB, Nt, { color: 1, onChange: 2, showOnTop: 3 });
  }
}
const PB = RB;
function IB(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), b(e, "type", "button"), b(e, "class", "jse-color-picker-button svelte-1nv0s05"), Ni(e, "background", t[2]), b(e, "title", n = t[1] ? `Color ${t[0]}` : "Click to open a color picker"), Se(e, "jse-readonly", t[1]);
    },
    m(s, o) {
      U(s, e, o), i || (r = re(e, "click", t[3]), i = !0);
    },
    p(s, [o]) {
      o & 4 && Ni(e, "background", s[2]), o & 3 && n !== (n = s[1] ? `Color ${s[0]}` : "Click to open a color picker") && b(e, "title", n), o & 2 && Se(e, "jse-readonly", s[1]);
    },
    i: ye,
    o: ye,
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function DB(t, e, n) {
  let i;
  const { openAbsolutePopup: r } = gi("absolute-popup");
  let { path: s } = e, { value: o } = e, { readOnly: l } = e, { onPatch: a } = e, { focus: c } = e;
  function u(d) {
    a([
      {
        op: "replace",
        path: xe(s),
        value: d
      }
    ]), f();
  }
  function f() {
    c();
  }
  function h(d) {
    if (l)
      return;
    const p = 300, g = d.target.getBoundingClientRect().top, _ = sc(d.target).innerHeight - g < p && g > p;
    r(PB, { color: o, onChange: u, showOnTop: _ }, {
      anchor: d.target,
      closeOnOuterClick: !0,
      onClose: f,
      offsetTop: 18,
      offsetLeft: -8,
      height: p
    });
  }
  return t.$$set = (d) => {
    "path" in d && n(4, s = d.path), "value" in d && n(0, o = d.value), "readOnly" in d && n(1, l = d.readOnly), "onPatch" in d && n(5, a = d.onPatch), "focus" in d && n(6, c = d.focus);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = f5(o));
  }, [o, l, i, h, s, a, c];
}
class NB extends Ge {
  constructor(e) {
    super(), Ke(this, e, DB, IB, yt, {
      path: 4,
      value: 0,
      readOnly: 1,
      onPatch: 5,
      focus: 6
    });
  }
}
const LB = NB;
function jB(t, e) {
  const n = {
    start: t,
    end: Math.min(e1(t), e)
  }, i = Math.max(Xh((t + e) / 2), t), r = {
    start: i,
    end: Math.min(e1(i), e)
  }, s = Xh(e), o = s === e ? s - Yc : s, l = {
    start: Math.max(o, t),
    end: e
  }, a = [n], c = r.start >= n.end && r.end <= l.start;
  return c && a.push(r), l.start >= (c ? r.end : n.end) && a.push(l), a;
}
function c6(t) {
  const e = lj(t, (i) => i.start), n = [e[0]];
  for (let i = 0; i < e.length; i++) {
    const r = n.length - 1, s = n[r], o = e[i];
    o.start <= s.end ? n[r] = {
      start: Math.min(s.start, o.start),
      end: Math.max(s.end, o.end)
    } : n.push(o);
  }
  return n;
}
function BB(t, e) {
  return t.some((n) => e >= n.start && e < n.end);
}
function e1(t) {
  return Xh(t) + Yc;
}
function Xh(t) {
  return Math.floor(t / Yc) * Yc;
}
function Qh(t) {
  let e = {
    expandedMap: {},
    enforceStringMap: {},
    visibleSectionsMap: {},
    selection: void 0,
    sortedColumn: void 0
  };
  return t != null && t.select && (e = {
    ...e,
    selection: t.select(t.json, e)
  }), t != null && t.expand && (e = cr(t.json, e, [], t.expand)), e;
}
function kp(t, e) {
  return t.visibleSectionsMap[e] || El;
}
function X0(t, e, n) {
  e.forEach(({ start: i, end: r }) => {
    q5(i, Math.min(t.length, r), n);
  });
}
function t1(t, e, n) {
  const i = { ...e.expandedMap }, r = { ...e.visibleSectionsMap };
  for (let s = 0; s <= n.length; s++) {
    const o = n.slice(0, s), l = xe(o), a = Ye(t, o);
    if (dn(a) && (i[l] = !0), Array.isArray(a) && s < n.length) {
      const c = r[l] || El, u = Gn(n[s]);
      if (!BB(c, u)) {
        const f = Xh(u), h = e1(f), d = { start: f, end: h };
        r[l] = c6(c.concat(d));
      }
    }
  }
  return {
    ...e,
    expandedMap: i,
    visibleSectionsMap: r
  };
}
function cr(t, e, n, i) {
  const r = { ...e.expandedMap };
  function s(l) {
    const a = o.length;
    if (Array.isArray(l)) {
      if (i(o)) {
        const c = xe(o);
        if (r[c] = !0, l.length > 0) {
          const u = kp(e, c);
          X0(l, u, (f) => {
            o[a] = String(f), s(l[f]);
          }), o.pop();
        }
      }
    } else if (An(l) && i(o)) {
      r[xe(o)] = !0;
      const c = Object.keys(l);
      if (c.length > 0) {
        for (const u of c)
          o[a] = u, s(l[u]);
        o.pop();
      }
    }
  }
  const o = n.slice();
  return s(Ye(t, n)), {
    ...e,
    expandedMap: r
  };
}
function xB(t, e) {
  return {
    ...t,
    expandedMap: {
      ...t.expandedMap,
      [xe(e)]: !0
    }
  };
}
function u6(t, e) {
  const n = da(t.expandedMap, e), i = da(t.enforceStringMap, e), r = da(t.visibleSectionsMap, e);
  return {
    ...t,
    expandedMap: n,
    enforceStringMap: i,
    visibleSectionsMap: r
  };
}
function f6(t, e, n) {
  if (n) {
    const i = { ...t.enforceStringMap };
    return i[e] = n, {
      ...t,
      enforceStringMap: i
    };
  } else if (typeof t.enforceStringMap[e] == "boolean") {
    const i = { ...t.enforceStringMap };
    return delete i[e], {
      ...t,
      enforceStringMap: i
    };
  } else
    return t;
}
function FB(t, e, n, i) {
  return {
    ...e,
    visibleSectionsMap: {
      ...e.visibleSectionsMap,
      [n]: c6(kp(e, n).concat(i))
    }
  };
}
function h6(t, e, n) {
  const i = zr(t, n), r = n.reduce((s, o) => Q4(o) ? d6(i, s, o) : Z4(o) ? p6(i, s, o) : M0(o) ? zB(i, s, o) : jm(o) || Ma(o) ? VB(i, s, o) : s, e);
  return {
    json: i,
    documentState: r
  };
}
function d6(t, e, n) {
  const i = cs(t, n.path), r = St(i), s = xe(r), o = Ye(t, r);
  if (Ut(o)) {
    const l = Gn(at(i)), a = pa(e.expandedMap, r, l, 1), c = pa(e.enforceStringMap, r, l, 1);
    let u = pa(e.visibleSectionsMap, r, l, 1);
    return u = g6(u, s, (f) => m6(f, l, 1)), {
      ...e,
      expandedMap: a,
      enforceStringMap: c,
      visibleSectionsMap: u
    };
  }
  return e;
}
function p6(t, e, n) {
  const i = cs(t, n.path), r = St(i), s = xe(r), o = Ye(t, r);
  let { expandedMap: l, enforceStringMap: a, visibleSectionsMap: c } = e;
  if (l = da(l, i), a = da(a, i), c = da(c, i), Ut(o)) {
    const u = Gn(at(i));
    l = pa(l, r, u, -1), a = pa(a, r, u, -1), c = pa(c, r, u, -1), c = g6(c, s, (f) => m6(f, u, -1));
  }
  return {
    ...e,
    expandedMap: l,
    enforceStringMap: a,
    visibleSectionsMap: c
  };
}
function zB(t, e, n) {
  const i = n.path, r = Lg(t, e.expandedMap), s = Lg(t, e.enforceStringMap), o = Lg(t, e.visibleSectionsMap);
  return !On(n.value) && !Ut(n.value) && delete r[i], Ut(n.value) || delete o[i], (On(n.value) || Ut(n.value)) && delete s[i], {
    ...e,
    expandedMap: r,
    enforceStringMap: s,
    visibleSectionsMap: o
  };
}
function VB(t, e, n) {
  if (Ma(n) && n.from === n.path)
    return e;
  const i = (f) => n.path + f.substring(n.from.length), r = Ng(Ig(e.expandedMap, n.from), i), s = Ng(Ig(e.enforceStringMap, n.from), i), o = Ng(Ig(e.visibleSectionsMap, n.from), i);
  let l = e;
  Ma(n) && (l = p6(t, l, {
    op: "remove",
    path: n.from
  })), l = d6(t, l, {
    op: "add",
    path: n.path,
    value: null
  });
  const a = Dg(l.expandedMap, r), c = Dg(l.enforceStringMap, s), u = Dg(l.visibleSectionsMap, o);
  return {
    ...e,
    expandedMap: a,
    enforceStringMap: c,
    visibleSectionsMap: u
  };
}
function da(t, e) {
  const n = {}, i = xe(e);
  return Object.keys(t).forEach((r) => {
    Oa(r, i) || (n[r] = t[r]);
  }), n;
}
function Ig(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    Oa(i, e) && (n[i] = t[i]);
  }), n;
}
function Dg(t, e) {
  return { ...t, ...e };
}
function Ng(t, e) {
  const n = {};
  return Object.keys(t).forEach((i) => {
    const r = e(i);
    n[r] = t[i];
  }), n;
}
function pa(t, e, n, i) {
  const r = e.length, s = xe(e), o = [];
  for (const a of Object.keys(t))
    if (Oa(a, s)) {
      const c = Vr(a), u = Gn(c[r]);
      u >= n && (c[r] = String(u + i), o.push({
        oldPointer: a,
        newPointer: xe(c),
        value: t[a]
      }));
    }
  if (o.length === 0)
    return t;
  const l = { ...t };
  return o.forEach((a) => {
    delete l[a.oldPointer];
  }), o.forEach((a) => {
    l[a.newPointer] = a.value;
  }), l;
}
function Lg(t, e) {
  const n = {};
  return Object.keys(e).filter((i) => gr(t, cs(t, i))).forEach((i) => {
    n[i] = e[i];
  }), n;
}
function g6(t, e, n) {
  const i = t[e];
  if (e in t) {
    const r = n(i);
    if (!At(i, r)) {
      const s = { ...t };
      return r === void 0 ? delete s[e] : s[e] = r, s;
    }
  }
  return t;
}
function m6(t, e, n) {
  return t.map((i) => ({
    start: i.start > e ? i.start + n : i.start,
    end: i.end >= e ? i.end + n : i.end
  }));
}
function Qs(t, e, n, i) {
  const r = e ? e[n] : void 0;
  return typeof r == "boolean" ? r : QP(t, i);
}
function Hu(t, e, n = !1) {
  const i = t.indexOf(e);
  return i !== -1 ? n ? t.slice(i) : t.slice(i + 1) : [];
}
function Q0(t, e) {
  const n = [];
  function i(r, s) {
    n.push(s);
    const o = xe(s);
    if (r && e.expandedMap[o] === !0) {
      if (Ut(r)) {
        const l = kp(e, o);
        X0(r, l, (a) => {
          i(r[a], s.concat(String(a)));
        });
      }
      On(r) && Object.keys(r).forEach((l) => {
        i(r[l], s.concat(l));
      });
    }
  }
  return i(t, []), n;
}
function b6(t, e, n = !0) {
  const i = [];
  function r(s, o) {
    i.push({ path: o, type: Dr.value });
    const l = xe(o);
    if (s && e.expandedMap[l] === !0) {
      if (n && i.push({ path: o, type: Dr.inside }), Ut(s)) {
        const a = kp(e, l);
        X0(s, a, (c) => {
          const u = o.concat(String(c));
          r(s[c], u), n && i.push({ path: u, type: Dr.after });
        });
      }
      On(s) && Object.keys(s).forEach((c) => {
        const u = o.concat(c);
        i.push({ path: u, type: Dr.key }), r(s[c], u), n && i.push({ path: u, type: Dr.after });
      });
    }
  }
  return r(t, []), i;
}
function UB(t, e, n) {
  const i = Q0(t, e), r = i.map(xe), s = xe(n), o = r.indexOf(s);
  return o !== -1 && o > 0 ? i[o - 1] : null;
}
function n1(t, e, n) {
  const i = Q0(t, e), s = i.map(xe).indexOf(xe(n));
  return s !== -1 && s < i.length - 1 ? i[s + 1] : null;
}
function _o(t, e, n) {
  const i = Ye(t, n), s = !Y5({ json: i }, X4) ? ru : os;
  return cr(t, e, n, s);
}
function os(t) {
  return t.length === 0 ? !0 : t.length === 1 && t[0] === "0";
}
function ru() {
  return !0;
}
function HB(t) {
  return Y5({ json: t }, X4) ? os : ru;
}
function jr(t) {
  return t && t.type === qt.after || !1;
}
function Yn(t) {
  return t && t.type === qt.inside || !1;
}
function Nn(t) {
  return t && t.type === qt.key || !1;
}
function Ct(t) {
  return t && t.type === qt.value || !1;
}
function Dt(t) {
  return t && t.type === qt.multi || !1;
}
function WB(t, e, n) {
  if (At(e, n))
    return [e];
  {
    const i = XB(e, n);
    if (e.length === i.length || n.length === i.length)
      return [i];
    const r = e[i.length], s = n[i.length], o = Ye(t, i);
    if (On(o)) {
      const l = Object.keys(o), a = l.indexOf(r), c = l.indexOf(s);
      if (a !== -1 && c !== -1) {
        const u = Math.min(a, c), f = Math.max(a, c), h = [];
        for (let d = u; d <= f; d++)
          h.push(i.concat(l[d]));
        return h;
      }
    }
    if (Ut(o)) {
      const l = Math.min(Gn(r), Gn(s)), a = Math.max(Gn(r), Gn(s)), c = [];
      for (let u = l; u <= a; u++)
        c.push(i.concat(String(u)));
      return c;
    }
  }
  throw new Error("Failed to create selection");
}
function _6(t) {
  return Yn(t) ? t.focusPath : St(t.focusPath);
}
function Na(t) {
  return Dt(t) ? Bi(t.paths) : t.focusPath;
}
function Cp(t) {
  return Dt(t) ? at(t.paths) : t.focusPath;
}
function qB(t, e) {
  return ja(t.focusPath, e) && (t.focusPath.length > e.length || Yn(t));
}
function y6(t, e, n) {
  if (!t)
    return !1;
  const i = e.slice(0);
  if (Dt(t))
    for (; i.length > 0; ) {
      if (t.pointersMap[xe(i)] === !0)
        return !0;
      i.pop();
    }
  return Nn(t) ? n === qt.key && At(t.focusPath, e) : !!(Ct(t) && (n === qt.value && At(t.focusPath, e) || ja(e, t.focusPath) && e.length > t.focusPath.length && (n === qt.key || n === qt.value || n === qt.multi)));
}
function Sw(t, e, n = !1, i = !1) {
  const r = e.selection, s = !i && Dt(r) ? Bi(r.paths) : r.focusPath, o = UB(t, e, s);
  if (o === null)
    return null;
  const l = o, a = o;
  if (n)
    return jr(r) || Yn(r) ? Dn(t, r.anchorPath, r.anchorPath) : Dn(t, r.anchorPath, a);
  if (Nn(r)) {
    const c = St(o), u = Ye(t, c);
    return Array.isArray(u) || Ot(o) ? Pt(o, !1) : mr(o, !1);
  }
  return Ct(r) ? Pt(o, !1) : jr(r) || Yn(r) ? Dn(t, s, s) : Dn(t, l, a);
}
function JB(t, e, n = !1, i = !1) {
  const r = e.selection, s = !i && Dt(r) ? at(r.paths) : r.focusPath, o = n1(t, e, s), l = o, a = o;
  if (o === null)
    return null;
  if (n) {
    const c = dn(Ye(t, s)) ? u6(e, s) : e, u = n1(t, c, s);
    return u === null ? null : jr(r) ? Dn(t, u, u) : Yn(r) ? Dn(t, l, a) : Dn(t, r.anchorPath, u);
  }
  if (Nn(r)) {
    const c = St(o), u = Ye(t, c);
    return Array.isArray(u) ? Pt(a, !1) : mr(a, !1);
  }
  return Ct(r) ? Pt(a, !1) : Yn(r) ? Dn(t, l, a) : Dn(t, o, o);
}
function KB(t, e, n) {
  const i = St(n), r = [at(n)], s = n1(Ye(t, i), e, r);
  return s ? Pt(i.concat(s), !1) : $s(n);
}
function w6(t, e, n) {
  const i = e.selection, r = b6(t, e, n), s = r.findIndex((o) => At(o.path, i.focusPath) && String(o.type) === String(i.type));
  return {
    caret: s !== -1 ? r[s] : null,
    previous: s !== -1 && s > 0 ? r[s - 1] : null,
    next: s !== -1 && s < r.length - 1 ? r[s + 1] : null
  };
}
function GB(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: s, previous: o } = w6(t, e, i);
  if (n)
    return Dt(r) ? null : Dn(t, r.anchorPath, r.focusPath);
  if (s && o)
    return Z0(o);
  const l = St(r.focusPath), a = Ye(t, l);
  return Ct(r) && Array.isArray(a) ? Dn(t, r.focusPath, r.focusPath) : Dt(r) && !Array.isArray(a) ? mr(r.focusPath, !1) : null;
}
function YB(t, e, n = !1, i = !0) {
  const r = e.selection, { caret: s, next: o } = w6(t, e, i);
  return n ? Dt(r) ? null : Dn(t, r.anchorPath, r.focusPath) : s && o ? Z0(o) : Dt(r) ? Pt(r.focusPath, !1) : null;
}
function ia(t, e) {
  const n = Q0(t, e);
  let i = 0;
  for (; i < n.length - 1 && n[i + 1].length > n[i].length; )
    i++;
  const r = n[i];
  return r.length === 0 || Array.isArray(Ye(t, St(r))) ? Pt(r, !1) : mr(r, !1);
}
function La(t, e) {
  if (e.length === 1) {
    const i = Bi(e);
    if (i.op === "replace" || i.op === "move") {
      const r = cs(t, i.path);
      return Pt(r, !1);
    }
  }
  if (!Ot(e) && e.every((i) => i.op === "move")) {
    const i = Bi(e), r = e.slice(1);
    if ((jm(i) || Ma(i)) && i.from !== i.path && r.every((s) => (jm(s) || Ma(s)) && s.from === s.path)) {
      const s = cs(t, i.path);
      return mr(s, !1);
    }
  }
  const n = e.filter((i) => i.op !== "test" && i.op !== "remove" && (i.op !== "move" || i.from !== i.path) && typeof i.path == "string").map((i) => cs(t, i.path));
  return Ot(n) ? null : {
    type: qt.multi,
    paths: n,
    anchorPath: Bi(n),
    focusPath: at(n),
    pointersMap: v6(n)
  };
}
function v6(t) {
  const e = {};
  return t.forEach((n) => {
    e[xe(n)] = !0;
  }), e;
}
function Sp(t) {
  return {
    [xe(t)]: !0
  };
}
function XB(t, e) {
  let n = 0;
  for (; n < t.length && n < e.length && t[n] === e[n]; )
    n++;
  return t.slice(0, n);
}
function su(t) {
  return t && (Nn(t) || Ct(t) || Dt(t) && t.paths.length === 1);
}
function Ew(t, e) {
  return su(e) && dn(Ye(t, e.focusPath)) ? e.focusPath : St(e.focusPath);
}
function ja(t, e) {
  if (t.length < e.length)
    return !1;
  for (let n = 0; n < e.length; n++)
    if (t[n] !== e[n])
      return !1;
  return !0;
}
function Ai(t) {
  const e = t.selection;
  return (Nn(e) || Ct(e)) && e.edit ? {
    ...t,
    selection: {
      ...e,
      edit: !1
    }
  } : t;
}
function mr(t, e) {
  return {
    type: qt.key,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t),
    edit: e
  };
}
function Pt(t, e) {
  return {
    type: qt.value,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t),
    edit: e
  };
}
function Zs(t) {
  return {
    type: qt.inside,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t)
  };
}
function $s(t) {
  return {
    type: qt.after,
    anchorPath: t,
    focusPath: t,
    pointersMap: Sp(t)
  };
}
function Dn(t, e, n) {
  const i = WB(t, e, n), r = ja(n, at(i)) || ja(e, Bi(i));
  return {
    type: qt.multi,
    anchorPath: r ? Bi(i) : at(i),
    focusPath: r ? at(i) : Bi(i),
    paths: i,
    pointersMap: v6(i)
  };
}
function k6(t, e, n, i) {
  if (Nn(e))
    return String(at(e.focusPath));
  if (Ct(e)) {
    const r = Ye(t, e.focusPath);
    return typeof r == "string" ? r : i.stringify(r, null, n);
  }
  if (Dt(e)) {
    if (Ot(e.focusPath))
      return i.stringify(t, null, n);
    const r = _6(e), s = Ye(t, r);
    if (Array.isArray(s))
      if (e.paths.length === 1) {
        const o = Ye(t, Bi(e.paths));
        return i.stringify(o, null, n);
      } else
        return e.paths.map((o) => {
          const l = Ye(t, o);
          return `${i.stringify(l, null, n)},`;
        }).join(`
`);
    else
      return e.paths.map((o) => {
        const l = at(o), a = Ye(t, o);
        return `${i.stringify(l)}: ${i.stringify(a, null, n)},`;
      }).join(`
`);
  }
  return null;
}
function C6(t) {
  return Dt(t) ? t.paths : [t.focusPath];
}
function Lo(t) {
  return (Nn(t) || Ct(t)) && t.edit;
}
function QB(t, e, n = !0) {
  return e === void 0 && !n ? t : {
    ...t,
    selection: e
  };
}
function ZB() {
  return Pt([], !1);
}
function S6(t) {
  return Dt(t) || Nn(t) || Ct(t);
}
function _l(t) {
  if (!t)
    return !1;
  if (Nn(t) || Ct(t) || Dt(t) && t.paths.length === 1)
    return !0;
}
function Z0(t) {
  switch (t.type) {
    case Dr.key:
      return mr(t.path, !1);
    case Dr.value:
      return Pt(t.path, !1);
    case Dr.after:
      return $s(t.path);
    case Dr.inside:
      return Zs(t.path);
  }
}
function Aw(t, e, n) {
  switch (e) {
    case qt.key:
      return mr(n, !1);
    case qt.value:
      return Pt(n, !1);
    case qt.after:
      return $s(n);
    case qt.inside:
      return Zs(n);
    case qt.multi:
      return Dn(t, n, n);
  }
}
function Mw(t, e) {
  if (t)
    return Object.keys(t.pointersMap).some((n) => Oa(n, e) || Oa(e, n)) ? t : void 0;
}
function Ss(...t) {
  const e = [];
  for (const n of t)
    if (typeof n == "string" && e.push(n), n && typeof n == "object")
      for (const i in n)
        Object.hasOwnProperty.call(n, i) && n[i] && e.push(i);
  return e.join(" ");
}
function i1(t, e) {
  const n = j0(t, e);
  return Ss("jse-value", "jse-" + n, {
    "jse-url": op(t),
    "jse-empty": typeof t == "string" && t.length === 0
  });
}
function $B(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("div"), b(e, "class", n = mn(Ss("jse-editable-div", t[2], { "jse-short-text": t[0] })) + " svelte-rw77oa"), b(e, "contenteditable", "true"), b(e, "spellcheck", "false");
    },
    m(s, o) {
      U(s, e, o), t[13](e), i || (r = [
        re(e, "input", t[3]),
        re(e, "keydown", t[4]),
        re(e, "paste", t[5]),
        re(e, "blur", t[6])
      ], i = !0);
    },
    p(s, [o]) {
      o & 5 && n !== (n = mn(Ss("jse-editable-div", s[2], { "jse-short-text": s[0] })) + " svelte-rw77oa") && b(e, "class", n);
    },
    i: ye,
    o: ye,
    d(s) {
      s && V(e), t[13](null), i = !1, ct(r);
    }
  };
}
function ex(t, e, n) {
  const i = mi("jsoneditor:EditableDiv");
  let { value: r } = e, { shortText: s = !1 } = e, { onChange: o } = e, { onCancel: l } = e, { onFind: a } = e, { onPaste: c = hn } = e, { onValueClass: u = () => "" } = e, f, h = u(r), d = !1;
  or(() => {
    i("onMount", { value: r }), g(r), setTimeout(() => n6(f));
  }), ks(() => {
    const C = p();
    i("onDestroy", { closed: d, value: r, newValue: C }), !d && C !== r && o(C, bl.NO);
  });
  function p() {
    return Tj(f.innerText);
  }
  function g(C) {
    n(1, f.innerText = Tl(C), f);
  }
  function m() {
    const C = p();
    C === "" && g(""), n(2, h = u(C));
  }
  function _(C) {
    C.stopPropagation();
    const A = Go(C).replace(/^Command\+/, "Ctrl+");
    if (A === "Escape" && (d = !0, l()), A === "Enter" || A === "Tab") {
      d = !0;
      const w = p();
      o(w, bl.NEXT_INSIDE);
    }
    A === "Ctrl+F" && (C.preventDefault(), a(!1)), A === "Ctrl+H" && (C.preventDefault(), a(!0));
  }
  function S(C) {
    if (!c)
      return;
    const A = C.clipboardData.getData("text/plain");
    c(A);
  }
  function v() {
    const C = document.hasFocus(), A = p();
    i("handleBlur", { hasFocus: C, closed: d, value: r, newValue: A }), document.hasFocus() && !d && (d = !0, A !== r ? o(A, bl.SELF) : l());
  }
  function k(C) {
    _t[C ? "unshift" : "push"](() => {
      f = C, n(1, f);
    });
  }
  return t.$$set = (C) => {
    "value" in C && n(7, r = C.value), "shortText" in C && n(0, s = C.shortText), "onChange" in C && n(8, o = C.onChange), "onCancel" in C && n(9, l = C.onCancel), "onFind" in C && n(10, a = C.onFind), "onPaste" in C && n(11, c = C.onPaste), "onValueClass" in C && n(12, u = C.onValueClass);
  }, [
    s,
    f,
    h,
    m,
    _,
    S,
    v,
    r,
    o,
    l,
    a,
    c,
    u,
    k
  ];
}
class tx extends Ge {
  constructor(e) {
    super(), Ke(this, e, ex, $B, yt, {
      value: 7,
      shortText: 0,
      onChange: 8,
      onCancel: 9,
      onFind: 10,
      onPaste: 11,
      onValueClass: 12
    });
  }
}
const E6 = tx;
function nx(t) {
  let e, n;
  return e = new E6({
    props: {
      value: t[1].escapeValue(t[0]),
      onChange: t[3],
      onCancel: t[4],
      onPaste: t[5],
      onFind: t[2],
      onValueClass: t[6]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 3 && (s.value = i[1].escapeValue(i[0])), r & 4 && (s.onFind = i[2]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function ix(t, e, n) {
  let { path: i } = e, { value: r } = e, { parser: s } = e, { normalization: o } = e, { enforceString: l } = e, { onPatch: a } = e, { onPasteJson: c } = e, { onSelect: u } = e, { onFind: f } = e, { focus: h } = e, { findNextInside: d } = e;
  function p(v) {
    return l ? v : tc(v, s);
  }
  function g(v, k) {
    a(
      [
        {
          op: "replace",
          path: xe(i),
          value: p(o.unescapeValue(v))
        }
      ],
      (C, A) => {
        if (!At(i, A.selection.focusPath))
          return;
        const w = k === bl.NEXT_INSIDE ? d(i) : Pt(i, !1);
        return { state: { ...A, selection: w } };
      }
    ), k !== bl.SELF && h();
  }
  function m() {
    u(Pt(i, !1)), h();
  }
  function _(v) {
    try {
      const k = s.parse(v);
      dn(k) && c({ path: i, contents: k });
    } catch {
    }
  }
  function S(v) {
    return i1(p(o.unescapeValue(v)), s);
  }
  return t.$$set = (v) => {
    "path" in v && n(7, i = v.path), "value" in v && n(0, r = v.value), "parser" in v && n(8, s = v.parser), "normalization" in v && n(1, o = v.normalization), "enforceString" in v && n(9, l = v.enforceString), "onPatch" in v && n(10, a = v.onPatch), "onPasteJson" in v && n(11, c = v.onPasteJson), "onSelect" in v && n(12, u = v.onSelect), "onFind" in v && n(2, f = v.onFind), "focus" in v && n(13, h = v.focus), "findNextInside" in v && n(14, d = v.findNextInside);
  }, [
    r,
    o,
    f,
    g,
    m,
    _,
    S,
    i,
    s,
    l,
    a,
    c,
    u,
    h,
    d
  ];
}
class rx extends Ge {
  constructor(e) {
    super(), Ke(this, e, ix, nx, yt, {
      path: 7,
      value: 0,
      parser: 8,
      normalization: 1,
      enforceString: 9,
      onPatch: 10,
      onPasteJson: 11,
      onSelect: 12,
      onFind: 2,
      focus: 13,
      findNextInside: 14
    });
  }
}
const sx = rx;
function kf(t, e, n) {
  const i = St(e), r = Ye(t, i);
  if (Ut(r)) {
    const s = Gn(at(e));
    return n.map((o, l) => ({
      op: "add",
      path: xe(i.concat(String(s + l))),
      value: o.value
    }));
  } else if (On(r)) {
    const s = at(e), o = Object.keys(r), l = Hu(o, s, !0);
    return [
      ...n.map((a) => {
        const c = Uu(a.key, o);
        return {
          op: "add",
          path: xe(i.concat(c)),
          value: a.value
        };
      }),
      ...l.map((a) => Rl(i, a))
    ];
  } else
    throw new Error("Cannot create insert operations: parent must be an Object or Array");
}
function Ow(t, e, n) {
  const i = Ye(t, e);
  if (Array.isArray(i)) {
    const r = i.length;
    return n.map((s, o) => ({
      op: "add",
      path: xe(e.concat(String(r + o))),
      value: s.value
    }));
  } else
    return n.map((r) => {
      const s = Uu(r.key, Object.keys(i));
      return {
        op: "add",
        path: xe(e.concat(s)),
        value: r.value
      };
    });
}
function Wu(t, e, n, i) {
  const r = e.filter((l) => l !== n), s = Uu(i, r), o = Hu(e, n, !1);
  return [
    {
      op: "move",
      from: xe(t.concat(n)),
      path: xe(t.concat(s))
    },
    ...o.map((l) => Rl(t, l))
  ];
}
function ox(t, e, n) {
  const i = Bi(e), r = St(i), s = Ye(t, r);
  if (Ut(s)) {
    const o = Bi(e), l = o ? Gn(at(o)) : 0;
    return [
      ...r1(e),
      ...n.map((a, c) => ({
        op: "add",
        path: xe(r.concat(String(c + l))),
        value: a.value
      }))
    ];
  } else if (On(s)) {
    const o = at(e), l = St(o), a = at(o), c = Object.keys(s), u = Hu(c, a, !1), f = new Set(e.map((d) => at(d))), h = c.filter((d) => !f.has(d));
    return [
      ...r1(e),
      ...n.map((d) => {
        const p = Uu(d.key, h);
        return {
          op: "add",
          path: xe(l.concat(p)),
          value: d.value
        };
      }),
      ...u.map((d) => Rl(l, d))
    ];
  } else
    throw new Error("Cannot create replace operations: parent must be an Object or Array");
}
function lx(t, e) {
  const n = at(e);
  if (Ot(n))
    throw new Error("Cannot duplicate root object");
  const i = St(n), r = at(n), s = Ye(t, i);
  if (Ut(s)) {
    const o = at(e), l = o ? Gn(at(o)) + 1 : 0;
    return [
      ...e.map((a, c) => ({
        op: "copy",
        from: xe(a),
        path: xe(i.concat(String(c + l)))
      }))
    ];
  } else if (On(s)) {
    const o = Object.keys(s), l = Hu(o, r, !1);
    return [
      ...e.map((a) => {
        const c = at(a), u = Uu(c, o);
        return {
          op: "copy",
          from: xe(a),
          path: xe(i.concat(u))
        };
      }),
      ...l.map((a) => Rl(i, a))
    ];
  } else
    throw new Error("Cannot create duplicate operations: parent must be an Object or Array");
}
function ax(t, e) {
  if (Ct(e))
    return [
      {
        op: "move",
        from: xe(e.focusPath),
        path: ""
      }
    ];
  if (Dt(e)) {
    const n = St(e.focusPath), i = Ye(t, n);
    if (Ut(i))
      return [
        {
          op: "replace",
          path: "",
          value: e.paths.map((s) => {
            const o = Gn(at(s));
            return i[o];
          })
        }
      ];
    if (On(i)) {
      const r = {};
      return e.paths.forEach((s) => {
        const o = String(at(s));
        r[o] = i[o];
      }), [
        {
          op: "replace",
          path: "",
          value: r
        }
      ];
    }
  } else
    throw new Error("Cannot create extract operations: parent must be an Object or Array");
  throw new Error("Cannot extract: unsupported type of selection " + JSON.stringify(e));
}
function A6(t, e, n, i) {
  if (Nn(e)) {
    const r = J5(n, i), s = St(e.focusPath), o = Ye(t, s), l = Object.keys(o), a = at(e.focusPath);
    return Wu(s, l, a, typeof r == "string" ? r : n);
  }
  if (Ct(e) || Dt(e) && Ot(e.focusPath))
    try {
      return [
        {
          op: "replace",
          path: xe(e.focusPath),
          value: wp(n, (r) => J0(r, i))
        }
      ];
    } catch {
      return [
        {
          op: "replace",
          path: xe(e.focusPath),
          value: n
        }
      ];
    }
  if (Dt(e)) {
    const r = jg(n, i);
    return ox(t, e.paths, r);
  }
  if (jr(e)) {
    const r = jg(n, i), s = e.focusPath, o = St(s), l = Ye(t, o);
    if (Ut(l)) {
      const a = Gn(at(s)), c = o.concat(String(a + 1));
      return kf(t, c, r);
    } else if (On(l)) {
      const a = String(at(s)), c = Object.keys(l);
      if (Ot(c) || at(c) === a)
        return Ow(t, o, r);
      {
        const u = c.indexOf(a), f = c[u + 1], h = o.concat(f);
        return kf(t, h, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  if (Yn(e)) {
    const r = jg(n, i), s = e.focusPath, o = Ye(t, s);
    if (Ut(o)) {
      const l = s.concat("0");
      return kf(t, l, r);
    } else if (On(o)) {
      const l = Object.keys(o);
      if (Ot(l))
        return Ow(t, s, r);
      {
        const a = Bi(l), c = s.concat(a);
        return kf(t, c, r);
      }
    } else
      throw new Error("Cannot create insert operations: parent must be an Object or Array");
  }
  throw new Error("Cannot insert: unsupported type of selection " + JSON.stringify(e));
}
function cx(t, e, n) {
  const i = n.beforePath, r = n.append, s = St(e.focusPath), o = Ye(t, s);
  if (!r && !(i && ja(i, s) && i.length > s.length))
    return [];
  const l = Na(e), a = Cp(e), c = at(l), u = at(a), f = i ? i[s.length] : void 0;
  if (On(o)) {
    const h = Object.keys(o), d = h.indexOf(c), p = h.indexOf(u), g = r ? h.length : h.indexOf(f);
    if (d !== -1 && p !== -1 && g !== -1)
      return g > d ? [...h.slice(d, p + 1), ...h.slice(g, h.length)].map((m) => Rl(s, m)) : [...h.slice(g, d), ...h.slice(p + 1, h.length)].map((m) => Rl(s, m));
  } else if (Ut(o)) {
    const h = Gn(c), d = Gn(u), p = f !== void 0 ? Gn(f) : o.length, g = d - h + 1;
    return p < h ? sw(g, (m) => ({
      op: "move",
      from: xe(s.concat(String(h + m))),
      path: xe(s.concat(String(p + m)))
    })) : sw(g, () => ({
      op: "move",
      from: xe(s.concat(String(h))),
      path: xe(s.concat(String(p)))
    }));
  } else
    throw new Error("Cannot create move operations: parent must be an Object or Array");
}
function ux(t, e, n) {
  if (n === "object")
    return {};
  if (n === "array")
    return [];
  if (n === "structure") {
    const i = _6(e), r = Ye(t, i);
    if (Array.isArray(r) && !Ot(r)) {
      const s = Bi(r);
      return dn(s) ? RN(s, (o) => Array.isArray(o) ? [] : An(o) ? void 0 : "") : "";
    }
  }
  return "";
}
function r1(t) {
  return t.map((e) => ({
    op: "remove",
    path: xe(e)
  })).reverse();
}
function Rl(t, e) {
  return {
    op: "move",
    from: xe(t.concat(e)),
    path: xe(t.concat(e))
  };
}
function jg(t, e) {
  const n = /^\s*{/.test(t), i = /^\s*\[/.test(t), r = J5(t, e), s = r !== void 0 ? r : wp(t, (o) => J0(o, e));
  return n && An(s) || i && Array.isArray(s) ? [{ key: "New item", value: s }] : Array.isArray(s) ? s.map((o, l) => ({ key: "New item " + l, value: o })) : An(s) ? Object.keys(s).map((o) => ({ key: o, value: s[o] })) : [{ key: "New item", value: s }];
}
function M6(t, e) {
  if (Nn(e)) {
    const n = St(e.focusPath), i = Ye(t, n), r = Object.keys(i), s = at(e.focusPath), l = Wu(n, r, s, ""), a = La(t, l);
    return { operations: l, newSelection: a };
  }
  if (Ct(e))
    return { operations: [
      {
        op: "replace",
        path: xe(e.focusPath),
        value: ""
      }
    ], newSelection: e };
  if (Dt(e)) {
    const n = r1(e.paths), i = at(e.paths);
    if (Ot(i)) {
      const o = [{ op: "replace", path: "", value: "" }], l = Pt([], !1);
      return { operations: o, newSelection: l };
    }
    const r = St(i), s = Ye(t, r);
    if (Ut(s)) {
      const o = Bi(e.paths), l = Gn(at(o)), a = l === 0 ? Zs(r) : $s(r.concat(String(l - 1)));
      return { operations: n, newSelection: a };
    } else if (On(s)) {
      const o = Object.keys(s), l = Bi(e.paths), a = at(l), c = o.indexOf(a), u = o[c - 1], f = c === 0 ? Zs(r) : $s(r.concat(u));
      return { operations: n, newSelection: f };
    } else
      throw new Error("Cannot create remove operations: parent must be an Object or Array");
  }
  throw new Error("Cannot remove: unsupported type of selection " + JSON.stringify(e));
}
function O6(t, e) {
  return i5(t, e, {
    before: (n, i, r) => {
      if (Z4(i)) {
        const s = Vr(i.path);
        return {
          revertOperations: [...r, ...Tw(n, s)]
        };
      }
      if (Ma(i)) {
        const s = Vr(i.from);
        return {
          revertOperations: [...r, ...Tw(n, s)]
        };
      }
      return { revertOperations: r };
    }
  });
}
function Tw(t, e) {
  const n = St(e), i = at(e), r = Ye(t, n);
  if (On(r)) {
    const s = Object.keys(r);
    return Hu(s, i, !1).map((l) => Rl(n, l));
  }
  return [];
}
function fx(t, e) {
  return t.flatMap((n) => {
    if (M0(n)) {
      const i = Vr(n.path);
      if (i.length > 0) {
        const r = [n];
        let s = St(i);
        for (; s.length > 0 && !gr(e, s); )
          r.unshift({
            op: "add",
            path: xe(s),
            value: {}
          }), s = St(s);
        return r;
      }
    }
    return n;
  });
}
function hx(t, e, n) {
  const i = n != null && n.activeItem ? Iw(n.activeItem) : void 0, r = e.findIndex((a) => At(i, Iw(a))), s = r !== -1 ? r : (n == null ? void 0 : n.activeIndex) < e.length ? n == null ? void 0 : n.activeIndex : e.length > 0 ? 0 : -1, o = e.map((a, c) => ({ ...a, active: c === s })), l = o[s];
  return {
    items: o,
    itemsMap: yp(o, (a) => xe(a.path)),
    activeItem: l,
    activeIndex: s
  };
}
function dx(t) {
  const e = t.activeIndex < t.items.length - 1 ? t.activeIndex + 1 : t.items.length > 0 ? 0 : -1, n = t.items[e], i = t.items.map((r, s) => ({ ...r, active: s === e }));
  return {
    ...t,
    items: i,
    itemsMap: yp(i, (r) => xe(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function px(t) {
  const e = t.activeIndex > 0 ? t.activeIndex - 1 : t.items.length - 1, n = t.items[e], i = t.items.map((r, s) => ({ ...r, active: s === e }));
  return {
    ...t,
    items: i,
    itemsMap: yp(i, (r) => xe(r.path)),
    activeItem: n,
    activeIndex: e
  };
}
function T6(t, e, n, i = 1 / 0) {
  const r = [], s = [];
  function o(a) {
    r.length < i && r.push(a);
  }
  function l(a, c) {
    if (Ut(c)) {
      const u = s.length;
      s.push("0");
      for (let f = 0; f < c.length; f++)
        if (s[u] = String(f), l(a, c[f]), r.length >= i)
          return;
      s.pop();
    } else if (On(c)) {
      const u = Object.keys(c), f = s.length;
      s.push("");
      for (const h of u)
        if (s[f] = h, Rw(h, a, s, Fr.key, o), l(a, c[h]), r.length >= i)
          return;
      s.pop();
    } else
      Rw(String(c), a, s, Fr.value, o);
  }
  if (typeof t == "string" && t !== "") {
    const a = t.toLowerCase();
    l(a, e);
  }
  return r;
}
function Rw(t, e, n, i, r) {
  const s = t.toLowerCase();
  let o = 0, l = -1, a = -1;
  do
    a = s.indexOf(e, l), a !== -1 && (l = a + e.length, r({
      path: n.slice(0),
      field: i,
      fieldIndex: o,
      start: a,
      end: l
    }), o++);
  while (a !== -1);
}
function s1(t, e, n, i) {
  return t.substring(0, n) + e + t.substring(i);
}
function Pw(t, e, n) {
  let i = t;
  return jL(n, (r) => {
    i = s1(i, e, r.start, r.end);
  }), i;
}
function gx(t, e, n, i, r) {
  const { field: s, path: o, start: l, end: a } = i;
  if (s === Fr.key) {
    const c = St(o), u = Ye(t, c), f = at(o), h = Object.keys(u), d = s1(f, n, l, a), p = Wu(c, h, f, d);
    return {
      newSelection: La(t, p),
      operations: p
    };
  } else if (s === Fr.value) {
    const c = Ye(t, o);
    if (c === void 0)
      throw new Error(`Cannot replace: path not found ${xe(o)}`);
    const u = typeof c == "string" ? c : String(c), f = xe(o), h = Qs(c, e.enforceStringMap, f, r), d = s1(u, n, l, a), p = [
      {
        op: "replace",
        path: xe(o),
        value: h ? d : tc(d, r)
      }
    ];
    return {
      newSelection: La(t, p),
      operations: p
    };
  } else
    throw new Error(`Cannot replace: unknown type of search result field ${s}`);
}
function mx(t, e, n, i, r) {
  const s = T6(n, t, e, 1 / 0), o = [];
  for (let c = 0; c < s.length; c++) {
    const u = s[c - 1], f = s[c];
    c === 0 || f.field !== u.field || !At(f.path, u.path) ? o.push({
      path: f.path,
      field: f.field,
      items: [f]
    }) : at(o).items.push(f);
  }
  o.sort((c, u) => c.field !== u.field ? c.field === Fr.key ? 1 : -1 : u.path.length - c.path.length);
  let l = [], a;
  return o.forEach((c) => {
    const { field: u, path: f, items: h } = c;
    if (u === Fr.key) {
      const d = St(f), p = Ye(t, d), g = at(f), m = Object.keys(p), _ = Pw(g, i, h), S = Wu(d, m, g, _);
      l = l.concat(S), a = La(t, S);
    } else if (u === Fr.value) {
      const d = Ye(t, f);
      if (d === void 0)
        throw new Error(`Cannot replace: path not found ${xe(f)}`);
      const p = typeof d == "string" ? d : String(d), g = xe(f), m = Qs(d, e.enforceStringMap, g, r), _ = Pw(p, i, h), S = [
        {
          op: "replace",
          path: xe(f),
          value: m ? _ : tc(_, r)
        }
      ];
      l = l.concat(S), a = La(t, S);
    } else
      throw new Error(`Cannot replace: unknown type of search result field ${u}`);
  }), {
    operations: l,
    newSelection: a
  };
}
function bx(t, e) {
  const n = [];
  let i = 0;
  for (const s of e) {
    const o = t.slice(i, s.start);
    o !== "" && n.push({
      type: "normal",
      text: o,
      active: !1
    });
    const l = t.slice(s.start, s.end);
    n.push({
      type: "highlight",
      text: l,
      active: s.active
    }), i = s.end;
  }
  const r = at(e);
  return r.end < t.length && n.push({
    type: "normal",
    text: t.slice(r.end),
    active: !1
  }), n;
}
function Iw(t) {
  return t.path.concat(t.field, String(t.fieldIndex));
}
function _x(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === Fr.key);
  if (!(!n || n.length === 0))
    return n;
}
function Dw(t, e) {
  var i;
  const n = (i = t == null ? void 0 : t[e]) == null ? void 0 : i.filter((r) => r.field === Fr.value);
  if (!(!n || n.length === 0))
    return n;
}
function Nw(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function yx(t) {
  let e, n = Tl(t[3].text) + "", i;
  return {
    c() {
      e = j("span"), i = _e(n), b(e, "class", "jse-highlight svelte-s6kbew"), Se(e, "jse-active", t[3].active);
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s & 1 && n !== (n = Tl(r[3].text) + "") && ze(i, n), s & 1 && Se(e, "jse-active", r[3].active);
    },
    d(r) {
      r && V(e);
    }
  };
}
function wx(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function Lw(t) {
  let e;
  function n(s, o) {
    return s[3].type === "normal" ? wx : yx;
  }
  let i = n(t), r = i(t);
  return {
    c() {
      r.c(), e = rt();
    },
    m(s, o) {
      r.m(s, o), U(s, e, o);
    },
    p(s, o) {
      i === (i = n(s)) && r ? r.p(s, o) : (r.d(1), r = i(s), r && (r.c(), r.m(e.parentNode, e)));
    },
    d(s) {
      r.d(s), s && V(e);
    }
  };
}
function vx(t) {
  let e, n = t[0], i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = Lw(Nw(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = rt();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, [s]) {
      if (s & 1) {
        n = r[0];
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = Nw(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = Lw(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    i: ye,
    o: ye,
    d(r) {
      xt(i, r), r && V(e);
    }
  };
}
function kx(t, e, n) {
  let i, { text: r } = e, { searchResultItems: s } = e;
  return t.$$set = (o) => {
    "text" in o && n(1, r = o.text), "searchResultItems" in o && n(2, s = o.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 6 && n(0, i = bx(String(r), s));
  }, [i, r, s];
}
class Cx extends Ge {
  constructor(e) {
    super(), Ke(this, e, kx, vx, Nt, { text: 1, searchResultItems: 2 });
  }
}
const R6 = Cx;
function Sx(t) {
  let e = Tl(t[1].escapeValue(t[0])) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 3 && e !== (e = Tl(i[1].escapeValue(i[0])) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function Ex(t) {
  let e, n;
  return e = new R6({
    props: {
      text: t[1].escapeValue(t[0]),
      searchResultItems: t[3]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 3 && (s.text = i[1].escapeValue(i[0])), r & 8 && (s.searchResultItems = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Ax(t) {
  let e, n, i, r, s, o, l, a;
  const c = [Ex, Sx], u = [];
  function f(h, d) {
    return h[3] ? 0 : 1;
  }
  return n = f(t), i = u[n] = c[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "data-type", "selectable-value"), b(e, "class", r = mn(i1(t[0], t[2])) + " svelte-6ci2p7"), b(e, "title", s = t[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null);
    },
    m(h, d) {
      U(h, e, d), u[n].m(e, null), o = !0, l || (a = [
        re(e, "click", t[5]),
        re(e, "dblclick", t[6])
      ], l = !0);
    },
    p(h, [d]) {
      let p = n;
      n = f(h), n === p ? u[n].p(h, d) : (Ae(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Me(), i = u[n], i ? i.p(h, d) : (i = u[n] = c[n](h), i.c()), P(i, 1), i.m(e, null)), (!o || d & 5 && r !== (r = mn(i1(h[0], h[2])) + " svelte-6ci2p7")) && b(e, "class", r), (!o || d & 16 && s !== (s = h[4] ? "Ctrl+Click or Ctrl+Enter to open url in new window" : null)) && b(e, "title", s);
    },
    i(h) {
      o || (P(i), o = !0);
    },
    o(h) {
      x(i), o = !1;
    },
    d(h) {
      h && V(e), u[n].d(), l = !1, ct(a);
    }
  };
}
function Mx(t, e, n) {
  let i, { path: r } = e, { value: s } = e, { readOnly: o } = e, { normalization: l } = e, { parser: a } = e, { onSelect: c } = e, { searchResultItems: u } = e;
  function f(d) {
    typeof s == "string" && i && d.ctrlKey && (d.preventDefault(), d.stopPropagation(), window.open(s, "_blank"));
  }
  function h(d) {
    o || (d.preventDefault(), c(Pt(r, !0)));
  }
  return t.$$set = (d) => {
    "path" in d && n(7, r = d.path), "value" in d && n(0, s = d.value), "readOnly" in d && n(8, o = d.readOnly), "normalization" in d && n(1, l = d.normalization), "parser" in d && n(2, a = d.parser), "onSelect" in d && n(9, c = d.onSelect), "searchResultItems" in d && n(3, u = d.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = op(s));
  }, [
    s,
    l,
    a,
    u,
    i,
    f,
    h,
    r,
    o,
    c
  ];
}
class Ox extends Ge {
  constructor(e) {
    super(), Ke(this, e, Mx, Ax, yt, {
      path: 7,
      value: 0,
      readOnly: 8,
      normalization: 1,
      parser: 2,
      onSelect: 9,
      searchResultItems: 3
    });
  }
}
const Tx = Ox;
function Rx(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = _e(t[0]), b(e, "class", "jse-tooltip svelte-r4omvg");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, [r]) {
      r & 1 && ze(n, i[0]);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(e);
    }
  };
}
function Px(t, e, n) {
  let { text: i } = e;
  return t.$$set = (r) => {
    "text" in r && n(0, i = r.text);
  }, [i];
}
class Ix extends Ge {
  constructor(e) {
    super(), Ke(this, e, Px, Rx, Nt, { text: 0 });
  }
}
const Dx = Ix;
function $0(t, { text: e, openAbsolutePopup: n, closeAbsolutePopup: i }) {
  let r;
  function s() {
    r = n(Dx, {
      text: e
    }, {
      position: "top",
      width: 10 * e.length,
      offsetTop: 3,
      anchor: t,
      closeOnOuterClick: !0
    });
  }
  function o() {
    i(r);
  }
  return t.addEventListener("mouseenter", s), t.addEventListener("mouseleave", o), {
    destroy() {
      t.removeEventListener("mouseenter", s), t.removeEventListener("mouseleave", o);
    }
  };
}
function Nx(t) {
  let e, n, i, r, s, o;
  return n = new Et({ props: { data: oB } }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-timestamp svelte-1w5pf7");
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), r = !0, s || (o = qi(i = $0.call(null, e, {
        text: t[0],
        ...t[1]
      })), s = !0);
    },
    p(l, [a]) {
      i && hi(i.update) && a & 1 && i.update.call(null, {
        text: l[0],
        ...l[1]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n), s = !1, o();
    }
  };
}
function Lx(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { value: s } = e;
  return t.$$set = (o) => {
    "value" in o && n(2, s = o.value);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(0, i = `Time: ${new Date(s).toString()}`);
  }, [i, r, s];
}
class jx extends Ge {
  constructor(e) {
    super(), Ke(this, e, Lx, Nx, yt, { value: 2 });
  }
}
const Bx = jx;
function xx({ path: t, value: e, readOnly: n, enforceString: i, searchResultItems: r, isEditing: s, parser: o, normalization: l, onPatch: a, onPasteJson: c, onSelect: u, onFind: f, findNextInside: h, focus: d }) {
  const p = [];
  return !s && GP(e) && p.push({
    component: MB,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), !s && YP(e) && p.push({
    component: LB,
    props: { path: t, value: e, readOnly: n, onPatch: a, focus: d }
  }), s && p.push({
    component: sx,
    props: {
      path: t,
      value: e,
      enforceString: i,
      parser: o,
      normalization: l,
      onPatch: a,
      onPasteJson: c,
      onSelect: u,
      onFind: f,
      findNextInside: h,
      focus: d
    }
  }), s || p.push({
    component: Tx,
    props: { path: t, value: e, readOnly: n, parser: o, normalization: l, searchResultItems: r, onSelect: u }
  }), !s && qm(e) && p.push({
    component: Bx,
    props: { value: e }
  }), p;
}
var vo = {
  prefix: "fas",
  iconName: "caret-right",
  icon: [256, 512, [], "f0da", "M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z"]
}, P6 = {
  prefix: "fas",
  iconName: "paste",
  icon: [512, 512, ["file-clipboard"], "f0ea", "M160 0c-23.7 0-44.4 12.9-55.4 32H48C21.5 32 0 53.5 0 80V400c0 26.5 21.5 48 48 48H192V176c0-44.2 35.8-80 80-80h48V80c0-26.5-21.5-48-48-48H215.4C204.4 12.9 183.7 0 160 0zM272 128c-26.5 0-48 21.5-48 48V448v16c0 26.5 21.5 48 48 48H464c26.5 0 48-21.5 48-48V256H416c-17.7 0-32-14.3-32-32V128H320 272zM160 40a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm256 88v96h96l-96-96z"]
}, Fx = {
  prefix: "fas",
  iconName: "circle-notch",
  icon: [512, 512, [], "f1ce", "M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z"]
}, zx = {
  prefix: "fas",
  iconName: "scissors",
  icon: [512, 512, [9984, 9986, 9988, "cut"], "f0c4", "M256 192l-39.5-39.5c4.9-12.6 7.5-26.2 7.5-40.5C224 50.1 173.9 0 112 0S0 50.1 0 112s50.1 112 112 112c14.3 0 27.9-2.7 40.5-7.5L192 256l-39.5 39.5c-12.6-4.9-26.2-7.5-40.5-7.5C50.1 288 0 338.1 0 400s50.1 112 112 112s112-50.1 112-112c0-14.3-2.7-27.9-7.5-40.5L499.2 76.8c7.1-7.1 7.1-18.5 0-25.6c-28.3-28.3-74.1-28.3-102.4 0L256 192zm22.6 150.6L396.8 460.8c28.3 28.3 74.1 28.3 102.4 0c7.1-7.1 7.1-18.5 0-25.6L342.6 278.6l-64 64zM160 112c0 26.5-21.5 48-48 48s-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48zM112 448c-26.5 0-48-21.5-48-48s21.5-48 48-48s48 21.5 48 48s-21.5 48-48 48z"]
}, ga = zx, Vx = {
  prefix: "fas",
  iconName: "square-caret-down",
  icon: [448, 512, ["caret-square-down"], "f150", "M384 480c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0zM224 352c-6.7 0-13-2.8-17.6-7.7l-104-112c-6.5-7-8.2-17.2-4.4-25.9s12.5-14.4 22-14.4l208 0c9.5 0 18.2 5.7 22 14.4s2.1 18.9-4.4 25.9l-104 112c-4.5 4.9-10.9 7.7-17.6 7.7z"]
}, Ux = Vx, Hx = {
  prefix: "fas",
  iconName: "caret-left",
  icon: [256, 512, [], "f0d9", "M9.4 278.6c-12.5-12.5-12.5-32.8 0-45.3l128-128c9.2-9.2 22.9-11.9 34.9-6.9s19.8 16.6 19.8 29.6l0 256c0 12.9-7.8 24.6-19.8 29.6s-25.7 2.2-34.9-6.9l-128-128z"]
}, Wx = {
  prefix: "fas",
  iconName: "pen-to-square",
  icon: [512, 512, ["edit"], "f044", "M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.8 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]
}, jw = Wx, qx = {
  prefix: "fas",
  iconName: "chevron-up",
  icon: [512, 512, [], "f077", "M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]
}, I6 = {
  prefix: "fas",
  iconName: "angle-right",
  icon: [320, 512, [8250], "f105", "M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"]
}, Jx = {
  prefix: "fas",
  iconName: "square-caret-up",
  icon: [448, 512, ["caret-square-up"], "f151", "M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM224 160c6.7 0 13 2.8 17.6 7.7l104 112c6.5 7 8.2 17.2 4.4 25.9s-12.5 14.4-22 14.4H120c-9.5 0-18.2-5.7-22-14.4s-2.1-18.9 4.4-25.9l104-112c4.5-4.9 10.9-7.7 17.6-7.7z"]
}, Kx = Jx, Bw = {
  prefix: "fas",
  iconName: "caret-up",
  icon: [320, 512, [], "f0d8", "M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8H288c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]
}, Ep = {
  prefix: "fas",
  iconName: "filter",
  icon: [512, 512, [], "f0b0", "M3.9 54.9C10.5 40.9 24.5 32 40 32H472c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9V448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6V320.9L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]
}, jo = {
  prefix: "fas",
  iconName: "code",
  icon: [640, 512, [], "f121", "M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]
}, Ap = {
  prefix: "fas",
  iconName: "wrench",
  icon: [512, 512, [128295], "f0ad", "M352 320c88.4 0 160-71.6 160-160c0-15.3-2.2-30.1-6.2-44.2c-3.1-10.8-16.4-13.2-24.3-5.3l-76.8 76.8c-3 3-7.1 4.7-11.3 4.7H336c-8.8 0-16-7.2-16-16V118.6c0-4.2 1.7-8.3 4.7-11.3l76.8-76.8c7.9-7.9 5.4-21.2-5.3-24.3C382.1 2.2 367.3 0 352 0C263.6 0 192 71.6 192 160c0 19.1 3.4 37.5 9.5 54.5L19.9 396.1C7.2 408.8 0 426.1 0 444.1C0 481.6 30.4 512 67.9 512c18 0 35.3-7.2 48-19.9L297.5 310.5c17 6.2 35.4 9.5 54.5 9.5zM80 456c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"]
}, Bc = {
  prefix: "fas",
  iconName: "pen",
  icon: [512, 512, [128394], "f304", "M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"]
}, Gx = {
  prefix: "fas",
  iconName: "arrow-rotate-right",
  icon: [512, 512, [8635, "arrow-right-rotate", "arrow-rotate-forward", "redo"], "f01e", "M386.3 160H336c-17.7 0-32 14.3-32 32s14.3 32 32 32H464c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]
}, eb = Gx, Yx = {
  prefix: "fas",
  iconName: "arrow-rotate-left",
  icon: [512, 512, [8634, "arrow-left-rotate", "arrow-rotate-back", "arrow-rotate-backward", "undo"], "f0e2", "M125.7 160H176c17.7 0 32 14.3 32 32s-14.3 32-32 32H48c-17.7 0-32-14.3-32-32V64c0-17.7 14.3-32 32-32s32 14.3 32 32v51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]
}, tb = Yx, Xx = {
  prefix: "fas",
  iconName: "crop-simple",
  icon: [512, 512, ["crop-alt"], "f565", "M128 32c0-17.7-14.3-32-32-32S64 14.3 64 32V64H32C14.3 64 0 78.3 0 96s14.3 32 32 32H64V384c0 35.3 28.7 64 64 64H352V384H128V32zM384 480c0 17.7 14.3 32 32 32s32-14.3 32-32V448h32c17.7 0 32-14.3 32-32s-14.3-32-32-32H448l0-256c0-35.3-28.7-64-64-64L160 64v64l224 0 0 352z"]
}, Qx = Xx, Zx = {
  prefix: "fas",
  iconName: "gear",
  icon: [512, 512, [9881, "cog"], "f013", "M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336c44.2 0 80-35.8 80-80s-35.8-80-80-80s-80 35.8-80 80s35.8 80 80 80z"]
}, $x = Zx, hr = {
  prefix: "fas",
  iconName: "caret-down",
  icon: [320, 512, [], "f0d7", "M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]
}, eF = {
  prefix: "fas",
  iconName: "ellipsis-vertical",
  icon: [128, 512, ["ellipsis-v"], "f142", "M64 360c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zm0-160c30.9 0 56 25.1 56 56s-25.1 56-56 56s-56-25.1-56-56s25.1-56 56-56zM120 96c0 30.9-25.1 56-56 56S8 126.9 8 96S33.1 40 64 40s56 25.1 56 56z"]
}, D6 = eF, Cf = {
  prefix: "fas",
  iconName: "arrow-right-arrow-left",
  icon: [448, 512, [8644, "exchange"], "f0ec", "M438.6 150.6c12.5-12.5 12.5-32.8 0-45.3l-96-96c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 96 32 96C14.3 96 0 110.3 0 128s14.3 32 32 32l306.7 0-41.4 41.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l96-96zm-333.3 352c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 416 416 416c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0 41.4-41.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3l96 96z"]
}, tF = {
  prefix: "fas",
  iconName: "arrow-down-short-wide",
  icon: [576, 512, ["sort-amount-desc", "sort-amount-down-alt"], "f884", "M151.6 469.6C145.5 476.2 137 480 128 480s-17.5-3.8-23.6-10.4l-88-96c-11.9-13-11.1-33.3 2-45.2s33.3-11.1 45.2 2L96 365.7V64c0-17.7 14.3-32 32-32s32 14.3 32 32V365.7l32.4-35.4c11.9-13 32.2-13.9 45.2-2s13.9 32.2 2 45.2l-88 96zM320 32h32c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 128H544c17.7 0 32 14.3 32 32s-14.3 32-32 32H320c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]
}, Mp = tF, nF = {
  prefix: "fas",
  iconName: "angle-down",
  icon: [448, 512, [8964], "f107", "M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, iF = {
  prefix: "fas",
  iconName: "arrow-down",
  icon: [384, 512, [8595], "f063", "M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]
}, rF = {
  prefix: "fas",
  iconName: "magnifying-glass",
  icon: [512, 512, [128269, "search"], "f002", "M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"]
}, nb = rF, sF = {
  prefix: "fas",
  iconName: "chevron-down",
  icon: [512, 512, [], "f078", "M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]
}, Oo = {
  prefix: "fas",
  iconName: "copy",
  icon: [512, 512, [], "f0c5", "M224 0c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224zM64 160c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H288v64H64V224h64V160H64z"]
}, Sf = {
  prefix: "fas",
  iconName: "plus",
  icon: [448, 512, [10133, 61543, "add"], "2b", "M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]
}, N6 = {
  prefix: "fas",
  iconName: "xmark",
  icon: [320, 512, [128473, 10005, 10006, 10060, 215, "close", "multiply", "remove", "times"], "f00d", "M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"]
}, xw = N6, oc = N6, oF = {
  prefix: "fas",
  iconName: "clone",
  icon: [512, 512, [], "f24d", "M0 448c0 35.3 28.7 64 64 64H288c35.3 0 64-28.7 64-64V384H224c-53 0-96-43-96-96V160H64c-35.3 0-64 28.7-64 64V448zm224-96H448c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H224c-35.3 0-64 28.7-64 64V288c0 35.3 28.7 64 64 64z"]
}, ou = {
  prefix: "fas",
  iconName: "check",
  icon: [512, 512, [10003, 10004], "f00c", "M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7 425.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]
}, lF = {
  prefix: "fas",
  iconName: "triangle-exclamation",
  icon: [512, 512, [9888, "exclamation-triangle", "warning"], "f071", "M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"]
}, ql = lF;
const Or = {};
function qu(t) {
  return t.split("-")[0];
}
function ib(t) {
  return t.split("-")[1];
}
function Op(t) {
  return ["top", "bottom"].includes(qu(t)) ? "x" : "y";
}
function L6(t) {
  return t === "y" ? "height" : "width";
}
function Fw(t, e, n) {
  let {
    reference: i,
    floating: r
  } = t;
  const s = i.x + i.width / 2 - r.width / 2, o = i.y + i.height / 2 - r.height / 2, l = Op(e), a = L6(l), c = i[a] / 2 - r[a] / 2, u = qu(e), f = l === "x";
  let h;
  switch (u) {
    case "top":
      h = {
        x: s,
        y: i.y - r.height
      };
      break;
    case "bottom":
      h = {
        x: s,
        y: i.y + i.height
      };
      break;
    case "right":
      h = {
        x: i.x + i.width,
        y: o
      };
      break;
    case "left":
      h = {
        x: i.x - r.width,
        y: o
      };
      break;
    default:
      h = {
        x: i.x,
        y: i.y
      };
  }
  switch (ib(e)) {
    case "start":
      h[l] -= c * (n && f ? -1 : 1);
      break;
    case "end":
      h[l] += c * (n && f ? -1 : 1);
      break;
  }
  return h;
}
const aF = async (t, e, n) => {
  const {
    placement: i = "bottom",
    strategy: r = "absolute",
    middleware: s = [],
    platform: o
  } = n, l = s.filter(Boolean), a = await (o.isRTL == null ? void 0 : o.isRTL(e));
  if (process.env.NODE_ENV !== "production") {
    if (o == null && console.error(["Floating UI: `platform` property was not passed to config. If you", "want to use Floating UI on the web, install @floating-ui/dom", "instead of the /core package. Otherwise, you can create your own", "`platform`: https://floating-ui.com/docs/platform"].join(" ")), l.filter((g) => {
      let {
        name: m
      } = g;
      return m === "autoPlacement" || m === "flip";
    }).length > 1)
      throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware", "detected. This will lead to an infinite loop. Ensure only one of", "either has been passed to the `middleware` array."].join(" "));
    (!t || !e) && console.error(["Floating UI: The reference and/or floating element was not defined", "when `computePosition()` was called. Ensure that both elements have", "been created and can be measured."].join(" "));
  }
  let c = await o.getElementRects({
    reference: t,
    floating: e,
    strategy: r
  }), {
    x: u,
    y: f
  } = Fw(c, i, a), h = i, d = {}, p = 0;
  for (let g = 0; g < l.length; g++) {
    const {
      name: m,
      fn: _
    } = l[g], {
      x: S,
      y: v,
      data: k,
      reset: C
    } = await _({
      x: u,
      y: f,
      initialPlacement: i,
      placement: h,
      strategy: r,
      middlewareData: d,
      rects: c,
      platform: o,
      elements: {
        reference: t,
        floating: e
      }
    });
    if (u = S ?? u, f = v ?? f, d = {
      ...d,
      [m]: {
        ...d[m],
        ...k
      }
    }, process.env.NODE_ENV !== "production" && p > 50 && console.warn(["Floating UI: The middleware lifecycle appears to be running in an", "infinite loop. This is usually caused by a `reset` continually", "being returned without a break condition."].join(" ")), C && p <= 50) {
      p++, typeof C == "object" && (C.placement && (h = C.placement), C.rects && (c = C.rects === !0 ? await o.getElementRects({
        reference: t,
        floating: e,
        strategy: r
      }) : C.rects), {
        x: u,
        y: f
      } = Fw(c, h, a)), g = -1;
      continue;
    }
  }
  return {
    x: u,
    y: f,
    placement: h,
    strategy: r,
    middlewareData: d
  };
};
function cF(t) {
  return {
    top: 0,
    right: 0,
    bottom: 0,
    left: 0,
    ...t
  };
}
function uF(t) {
  return typeof t != "number" ? cF(t) : {
    top: t,
    right: t,
    bottom: t,
    left: t
  };
}
function Zh(t) {
  return {
    ...t,
    top: t.y,
    left: t.x,
    right: t.x + t.width,
    bottom: t.y + t.height
  };
}
async function j6(t, e) {
  var n;
  e === void 0 && (e = {});
  const {
    x: i,
    y: r,
    platform: s,
    rects: o,
    elements: l,
    strategy: a
  } = t, {
    boundary: c = "clippingAncestors",
    rootBoundary: u = "viewport",
    elementContext: f = "floating",
    altBoundary: h = !1,
    padding: d = 0
  } = e, p = uF(d), m = l[h ? f === "floating" ? "reference" : "floating" : f], _ = Zh(await s.getClippingRect({
    element: (n = await (s.isElement == null ? void 0 : s.isElement(m))) == null || n ? m : m.contextElement || await (s.getDocumentElement == null ? void 0 : s.getDocumentElement(l.floating)),
    boundary: c,
    rootBoundary: u,
    strategy: a
  })), S = f === "floating" ? {
    ...o.floating,
    x: i,
    y: r
  } : o.reference, v = await (s.getOffsetParent == null ? void 0 : s.getOffsetParent(l.floating)), k = await (s.isElement == null ? void 0 : s.isElement(v)) ? await (s.getScale == null ? void 0 : s.getScale(v)) || {
    x: 1,
    y: 1
  } : {
    x: 1,
    y: 1
  }, C = Zh(s.convertOffsetParentRelativeRectToViewportRelativeRect ? await s.convertOffsetParentRelativeRectToViewportRelativeRect({
    rect: S,
    offsetParent: v,
    strategy: a
  }) : S);
  return process.env.NODE_ENV, {
    top: (_.top - C.top + p.top) / k.y,
    bottom: (C.bottom - _.bottom + p.bottom) / k.y,
    left: (_.left - C.left + p.left) / k.x,
    right: (C.right - _.right + p.right) / k.x
  };
}
const fF = Math.min, hF = Math.max;
function zw(t, e, n) {
  return hF(t, fF(e, n));
}
const dF = {
  left: "right",
  right: "left",
  bottom: "top",
  top: "bottom"
};
function $h(t) {
  return t.replace(/left|right|bottom|top/g, (e) => dF[e]);
}
function pF(t, e, n) {
  n === void 0 && (n = !1);
  const i = ib(t), r = Op(t), s = L6(r);
  let o = r === "x" ? i === (n ? "end" : "start") ? "right" : "left" : i === "start" ? "bottom" : "top";
  return e.reference[s] > e.floating[s] && (o = $h(o)), {
    main: o,
    cross: $h(o)
  };
}
const gF = {
  start: "end",
  end: "start"
};
function Vw(t) {
  return t.replace(/start|end/g, (e) => gF[e]);
}
function mF(t) {
  const e = $h(t);
  return [Vw(t), e, Vw(e)];
}
const bF = function(t) {
  return t === void 0 && (t = {}), {
    name: "flip",
    options: t,
    async fn(e) {
      var n;
      const {
        placement: i,
        middlewareData: r,
        rects: s,
        initialPlacement: o,
        platform: l,
        elements: a
      } = e, {
        mainAxis: c = !0,
        crossAxis: u = !0,
        fallbackPlacements: f,
        fallbackStrategy: h = "bestFit",
        flipAlignment: d = !0,
        ...p
      } = t, g = qu(i), _ = f || (g === o || !d ? [$h(o)] : mF(o)), S = [o, ..._], v = await j6(e, p), k = [];
      let C = ((n = r.flip) == null ? void 0 : n.overflows) || [];
      if (c && k.push(v[g]), u) {
        const {
          main: N,
          cross: T
        } = pF(i, s, await (l.isRTL == null ? void 0 : l.isRTL(a.floating)));
        k.push(v[N], v[T]);
      }
      if (C = [...C, {
        placement: i,
        overflows: k
      }], !k.every((N) => N <= 0)) {
        var A, w;
        const N = ((A = (w = r.flip) == null ? void 0 : w.index) != null ? A : 0) + 1, T = S[N];
        if (T)
          return {
            data: {
              index: N,
              overflows: C
            },
            reset: {
              placement: T
            }
          };
        let O = "bottom";
        switch (h) {
          case "bestFit": {
            var M;
            const W = (M = C.map((H) => [H, H.overflows.filter((I) => I > 0).reduce((I, z) => I + z, 0)]).sort((H, I) => H[1] - I[1])[0]) == null ? void 0 : M[0].placement;
            W && (O = W);
            break;
          }
          case "initialPlacement":
            O = o;
            break;
        }
        if (i !== O)
          return {
            reset: {
              placement: O
            }
          };
      }
      return {};
    }
  };
};
async function _F(t, e) {
  const {
    placement: n,
    platform: i,
    elements: r
  } = t, s = await (i.isRTL == null ? void 0 : i.isRTL(r.floating)), o = qu(n), l = ib(n), a = Op(n) === "x", c = ["left", "top"].includes(o) ? -1 : 1, u = s && a ? -1 : 1, f = typeof e == "function" ? e(t) : e;
  let {
    mainAxis: h,
    crossAxis: d,
    alignmentAxis: p
  } = typeof f == "number" ? {
    mainAxis: f,
    crossAxis: 0,
    alignmentAxis: null
  } : {
    mainAxis: 0,
    crossAxis: 0,
    alignmentAxis: null,
    ...f
  };
  return l && typeof p == "number" && (d = l === "end" ? p * -1 : p), a ? {
    x: d * u,
    y: h * c
  } : {
    x: h * c,
    y: d * u
  };
}
const yF = function(t) {
  return t === void 0 && (t = 0), {
    name: "offset",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i
      } = e, r = await _F(e, t);
      return {
        x: n + r.x,
        y: i + r.y,
        data: r
      };
    }
  };
};
function wF(t) {
  return t === "x" ? "y" : "x";
}
const vF = function(t) {
  return t === void 0 && (t = {}), {
    name: "shift",
    options: t,
    async fn(e) {
      const {
        x: n,
        y: i,
        placement: r
      } = e, {
        mainAxis: s = !0,
        crossAxis: o = !1,
        limiter: l = {
          fn: (m) => {
            let {
              x: _,
              y: S
            } = m;
            return {
              x: _,
              y: S
            };
          }
        },
        ...a
      } = t, c = {
        x: n,
        y: i
      }, u = await j6(e, a), f = Op(qu(r)), h = wF(f);
      let d = c[f], p = c[h];
      if (s) {
        const m = f === "y" ? "top" : "left", _ = f === "y" ? "bottom" : "right", S = d + u[m], v = d - u[_];
        d = zw(S, d, v);
      }
      if (o) {
        const m = h === "y" ? "top" : "left", _ = h === "y" ? "bottom" : "right", S = p + u[m], v = p - u[_];
        p = zw(S, p, v);
      }
      const g = l.fn({
        ...e,
        [f]: d,
        [h]: p
      });
      return {
        ...g,
        data: {
          x: g.x - n,
          y: g.y - i
        }
      };
    }
  };
};
function oo(t) {
  var e;
  return ((e = t.ownerDocument) == null ? void 0 : e.defaultView) || window;
}
function Es(t) {
  return oo(t).getComputedStyle(t);
}
function Bo(t) {
  return x6(t) ? (t.nodeName || "").toLowerCase() : "";
}
let Ef;
function B6() {
  if (Ef)
    return Ef;
  const t = navigator.userAgentData;
  return t && Array.isArray(t.brands) ? (Ef = t.brands.map((e) => e.brand + "/" + e.version).join(" "), Ef) : navigator.userAgent;
}
function As(t) {
  return t instanceof oo(t).HTMLElement;
}
function br(t) {
  return t instanceof oo(t).Element;
}
function x6(t) {
  return t instanceof oo(t).Node;
}
function Uw(t) {
  if (typeof ShadowRoot > "u")
    return !1;
  const e = oo(t).ShadowRoot;
  return t instanceof e || t instanceof ShadowRoot;
}
function Tp(t) {
  const {
    overflow: e,
    overflowX: n,
    overflowY: i,
    display: r
  } = Es(t);
  return /auto|scroll|overlay|hidden/.test(e + i + n) && !["inline", "contents"].includes(r);
}
function kF(t) {
  return ["table", "td", "th"].includes(Bo(t));
}
function rb(t) {
  const e = /firefox/i.test(B6()), n = Es(t), i = n.backdropFilter || n.WebkitBackdropFilter;
  return n.transform !== "none" || n.perspective !== "none" || (i ? i !== "none" : !1) || e && n.willChange === "filter" || e && (n.filter ? n.filter !== "none" : !1) || ["transform", "perspective"].some((r) => n.willChange.includes(r)) || ["paint", "layout", "strict", "content"].some(
    (r) => {
      const s = n.contain;
      return s != null ? s.includes(r) : !1;
    }
  );
}
function F6() {
  return !/^((?!chrome|android).)*safari/i.test(B6());
}
function sb(t) {
  return ["html", "body", "#document"].includes(Bo(t));
}
const Hw = Math.min, xc = Math.max, Ww = Math.round, o1 = {
  x: 1,
  y: 1
};
function lu(t) {
  const e = !br(t) && t.contextElement ? t.contextElement : br(t) ? t : null;
  if (!e)
    return o1;
  const n = e.getBoundingClientRect(), i = Es(e);
  if (i.boxSizing !== "border-box")
    return As(e) ? {
      x: e.offsetWidth > 0 && Ww(n.width) / e.offsetWidth || 1,
      y: e.offsetHeight > 0 && Ww(n.height) / e.offsetHeight || 1
    } : o1;
  let r = n.width / parseFloat(i.width), s = n.height / parseFloat(i.height);
  return (!r || !Number.isFinite(r)) && (r = 1), (!s || !Number.isFinite(s)) && (s = 1), {
    x: r,
    y: s
  };
}
function xo(t, e, n, i) {
  var r, s, o, l;
  e === void 0 && (e = !1), n === void 0 && (n = !1);
  const a = t.getBoundingClientRect();
  let c = o1;
  e && (i ? br(i) && (c = lu(i)) : c = lu(t));
  const u = br(t) ? oo(t) : window, f = !F6() && n, h = (a.left + (f && (r = (s = u.visualViewport) == null ? void 0 : s.offsetLeft) != null ? r : 0)) / c.x, d = (a.top + (f && (o = (l = u.visualViewport) == null ? void 0 : l.offsetTop) != null ? o : 0)) / c.y, p = a.width / c.x, g = a.height / c.y;
  return {
    width: p,
    height: g,
    top: d,
    right: h + p,
    bottom: d + g,
    left: h,
    x: h,
    y: d
  };
}
function Yo(t) {
  return ((x6(t) ? t.ownerDocument : t.document) || window.document).documentElement;
}
function Rp(t) {
  return br(t) ? {
    scrollLeft: t.scrollLeft,
    scrollTop: t.scrollTop
  } : {
    scrollLeft: t.pageXOffset,
    scrollTop: t.pageYOffset
  };
}
function z6(t) {
  return xo(Yo(t)).left + Rp(t).scrollLeft;
}
function CF(t, e, n) {
  const i = As(e), r = Yo(e), s = xo(t, !0, n === "fixed", e);
  let o = {
    scrollLeft: 0,
    scrollTop: 0
  };
  const l = {
    x: 0,
    y: 0
  };
  if (i || !i && n !== "fixed")
    if ((Bo(e) !== "body" || Tp(r)) && (o = Rp(e)), As(e)) {
      const a = xo(e, !0);
      l.x = a.x + e.clientLeft, l.y = a.y + e.clientTop;
    } else
      r && (l.x = z6(r));
  return {
    x: s.left + o.scrollLeft - l.x,
    y: s.top + o.scrollTop - l.y,
    width: s.width,
    height: s.height
  };
}
function au(t) {
  if (Bo(t) === "html")
    return t;
  const e = t.assignedSlot || t.parentNode || (Uw(t) ? t.host : null) || Yo(t);
  return Uw(e) ? e.host : e;
}
function qw(t) {
  return !As(t) || Es(t).position === "fixed" ? null : t.offsetParent;
}
function SF(t) {
  let e = au(t);
  for (; As(e) && !sb(e); ) {
    if (rb(e))
      return e;
    e = au(e);
  }
  return null;
}
function Jw(t) {
  const e = oo(t);
  let n = qw(t);
  for (; n && kF(n) && Es(n).position === "static"; )
    n = qw(n);
  return n && (Bo(n) === "html" || Bo(n) === "body" && Es(n).position === "static" && !rb(n)) ? e : n || SF(t) || e;
}
function EF(t) {
  if (As(t))
    return {
      width: t.offsetWidth,
      height: t.offsetHeight
    };
  const e = xo(t);
  return {
    width: e.width,
    height: e.height
  };
}
function AF(t) {
  let {
    rect: e,
    offsetParent: n,
    strategy: i
  } = t;
  const r = As(n), s = Yo(n);
  if (n === s)
    return e;
  let o = {
    scrollLeft: 0,
    scrollTop: 0
  }, l = {
    x: 1,
    y: 1
  };
  const a = {
    x: 0,
    y: 0
  };
  if ((r || !r && i !== "fixed") && ((Bo(n) !== "body" || Tp(s)) && (o = Rp(n)), As(n))) {
    const c = xo(n);
    l = lu(n), a.x = c.x + n.clientLeft, a.y = c.y + n.clientTop;
  }
  return {
    width: e.width * l.x,
    height: e.height * l.y,
    x: e.x * l.x - o.scrollLeft * l.x + a.x,
    y: e.y * l.y - o.scrollTop * l.y + a.y
  };
}
function MF(t, e) {
  const n = oo(t), i = Yo(t), r = n.visualViewport;
  let s = i.clientWidth, o = i.clientHeight, l = 0, a = 0;
  if (r) {
    s = r.width, o = r.height;
    const c = F6();
    (c || !c && e === "fixed") && (l = r.offsetLeft, a = r.offsetTop);
  }
  return {
    width: s,
    height: o,
    x: l,
    y: a
  };
}
function OF(t) {
  var e;
  const n = Yo(t), i = Rp(t), r = (e = t.ownerDocument) == null ? void 0 : e.body, s = xc(n.scrollWidth, n.clientWidth, r ? r.scrollWidth : 0, r ? r.clientWidth : 0), o = xc(n.scrollHeight, n.clientHeight, r ? r.scrollHeight : 0, r ? r.clientHeight : 0);
  let l = -i.scrollLeft + z6(t);
  const a = -i.scrollTop;
  return Es(r || n).direction === "rtl" && (l += xc(n.clientWidth, r ? r.clientWidth : 0) - s), {
    width: s,
    height: o,
    x: l,
    y: a
  };
}
function V6(t) {
  const e = au(t);
  return sb(e) ? t.ownerDocument.body : As(e) && Tp(e) ? e : V6(e);
}
function Fc(t, e) {
  var n;
  e === void 0 && (e = []);
  const i = V6(t), r = i === ((n = t.ownerDocument) == null ? void 0 : n.body), s = oo(i);
  return r ? e.concat(s, s.visualViewport || [], Tp(i) ? i : []) : e.concat(i, Fc(i));
}
function TF(t, e) {
  const n = xo(t, !0, e === "fixed"), i = n.top + t.clientTop, r = n.left + t.clientLeft, s = As(t) ? lu(t) : {
    x: 1,
    y: 1
  }, o = t.clientWidth * s.x, l = t.clientHeight * s.y, a = r * s.x, c = i * s.y;
  return {
    top: c,
    left: a,
    right: a + o,
    bottom: c + l,
    x: a,
    y: c,
    width: o,
    height: l
  };
}
function Kw(t, e, n) {
  return e === "viewport" ? Zh(MF(t, n)) : br(e) ? TF(e, n) : Zh(OF(Yo(t)));
}
function RF(t, e) {
  const n = e.get(t);
  if (n)
    return n;
  let i = Fc(t).filter((l) => br(l) && Bo(l) !== "body"), r = null;
  const s = Es(t).position === "fixed";
  let o = s ? au(t) : t;
  for (; br(o) && !sb(o); ) {
    const l = Es(o), a = rb(o);
    (s ? !a && !r : !a && l.position === "static" && !!r && ["absolute", "fixed"].includes(r.position)) ? i = i.filter((u) => u !== o) : r = l, o = au(o);
  }
  return e.set(t, i), i;
}
function PF(t) {
  let {
    element: e,
    boundary: n,
    rootBoundary: i,
    strategy: r
  } = t;
  const o = [...n === "clippingAncestors" ? RF(e, this._c) : [].concat(n), i], l = o[0], a = o.reduce((c, u) => {
    const f = Kw(e, u, r);
    return c.top = xc(f.top, c.top), c.right = Hw(f.right, c.right), c.bottom = Hw(f.bottom, c.bottom), c.left = xc(f.left, c.left), c;
  }, Kw(e, l, r));
  return {
    width: a.right - a.left,
    height: a.bottom - a.top,
    x: a.left,
    y: a.top
  };
}
const IF = {
  getClippingRect: PF,
  convertOffsetParentRelativeRectToViewportRelativeRect: AF,
  isElement: br,
  getDimensions: EF,
  getOffsetParent: Jw,
  getDocumentElement: Yo,
  getScale: lu,
  async getElementRects(t) {
    let {
      reference: e,
      floating: n,
      strategy: i
    } = t;
    const r = this.getOffsetParent || Jw, s = this.getDimensions;
    return {
      reference: CF(e, await r(n), i),
      floating: {
        x: 0,
        y: 0,
        ...await s(n)
      }
    };
  },
  getClientRects: (t) => Array.from(t.getClientRects()),
  isRTL: (t) => Es(t).direction === "rtl"
};
function DF(t, e, n, i) {
  i === void 0 && (i = {});
  const {
    ancestorScroll: r = !0,
    ancestorResize: s = !0,
    elementResize: o = !0,
    animationFrame: l = !1
  } = i, a = r && !l, c = a || s ? [...br(t) ? Fc(t) : t.contextElement ? Fc(t.contextElement) : [], ...Fc(e)] : [];
  c.forEach((p) => {
    a && p.addEventListener("scroll", n, {
      passive: !0
    }), s && p.addEventListener("resize", n);
  });
  let u = null;
  if (o) {
    let p = !0;
    u = new ResizeObserver(() => {
      p || n(), p = !1;
    }), br(t) && !l && u.observe(t), !br(t) && t.contextElement && !l && u.observe(t.contextElement), u.observe(e);
  }
  let f, h = l ? xo(t) : null;
  l && d();
  function d() {
    const p = xo(t);
    h && (p.x !== h.x || p.y !== h.y || p.width !== h.width || p.height !== h.height) && n(), h = p, f = requestAnimationFrame(d);
  }
  return n(), () => {
    var p;
    c.forEach((g) => {
      a && g.removeEventListener("scroll", n), s && g.removeEventListener("resize", n);
    }), (p = u) == null || p.disconnect(), u = null, l && cancelAnimationFrame(f);
  };
}
const NF = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = {
    platform: IF,
    ...n
  }, s = {
    ...r.platform,
    _c: i
  };
  return aF(t, e, {
    ...r,
    platform: s
  });
}, $l = [];
function LF(t, e) {
  return {
    subscribe: jF(t, e).subscribe
  };
}
function jF(t, e = ye) {
  let n;
  const i = /* @__PURE__ */ new Set();
  function r(l) {
    if (Nt(t, l) && (t = l, n)) {
      const a = !$l.length;
      for (const c of i)
        c[1](), $l.push(c, t);
      if (a) {
        for (let c = 0; c < $l.length; c += 2)
          $l[c][0]($l[c + 1]);
        $l.length = 0;
      }
    }
  }
  function s(l) {
    r(l(t));
  }
  function o(l, a = ye) {
    const c = [l, a];
    return i.add(c), i.size === 1 && (n = e(r) || ye), l(t), () => {
      i.delete(c), i.size === 0 && (n(), n = null);
    };
  }
  return { set: r, update: s, subscribe: o };
}
function BF(t) {
  let e, n;
  const i = {
    autoUpdate: !0
  };
  let r = t;
  const s = (c) => ({ ...i, ...t || {}, ...c || {} }), o = (c) => {
    e && n && (r = s(c), NF(e, n, r).then((u) => {
      Object.assign(n.style, {
        position: u.strategy,
        left: `${u.x}px`,
        top: `${u.y}px`
      }), r != null && r.onComputed && r.onComputed(u);
    }));
  };
  return [
    (c) => {
      e = c, o();
    },
    (c, u) => {
      let f;
      n = c, r = s(u), setTimeout(() => o(u), 0), o(u);
      const h = () => {
        f && (f(), f = void 0);
      }, d = ({ autoUpdate: p } = r || {}) => {
        if (h(), p !== !1)
          return DF(e, n, () => o(r), p === !0 ? {} : p);
      };
      return f = d(), {
        update(p) {
          o(p), f = d(p);
        },
        destroy() {
          h();
        }
      };
    },
    o
  ];
}
function xF({
  loadOptions: t,
  filterText: e,
  items: n,
  multiple: i,
  value: r,
  itemId: s,
  groupBy: o,
  filterSelectedItems: l,
  itemFilter: a,
  convertStringItemsToObjects: c,
  filterGroupedItems: u,
  label: f
}) {
  if (n && t)
    return n;
  if (!n)
    return [];
  n && n.length > 0 && typeof n[0] != "object" && (n = c(n));
  let h = n.filter((d) => {
    let p = a(d[f], e, d);
    return p && i && (r != null && r.length) && (p = !r.some((g) => l ? g[s] === d[s] : !1)), p;
  });
  return o && (h = u(h)), h;
}
async function FF({ dispatch: t, loadOptions: e, convertStringItemsToObjects: n, filterText: i }) {
  let r = await e(i).catch((s) => {
    console.warn("svelte-select loadOptions error :>> ", s), t("error", { type: "loadOptions", details: s });
  });
  if (r && !r.cancelled)
    return r ? (r && r.length > 0 && typeof r[0] != "object" && (r = n(r)), t("loaded", { items: r })) : r = [], {
      filteredItems: r,
      loading: !1,
      focused: !0,
      listOpen: !0
    };
}
function zF(t) {
  let e, n;
  return {
    c() {
      e = dt("svg"), n = dt("path"), b(n, "fill", "currentColor"), b(n, "d", `M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`), b(e, "width", "100%"), b(e, "height", "100%"), b(e, "viewBox", "0 0 20 20"), b(e, "focusable", "false"), b(e, "aria-hidden", "true"), b(e, "class", "svelte-qbd276");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ye,
    i: ye,
    o: ye,
    d(i) {
      i && V(e);
    }
  };
}
class VF extends Ge {
  constructor(e) {
    super(), Ke(this, e, null, zF, Nt, {});
  }
}
function UF(t) {
  let e, n;
  return {
    c() {
      e = dt("svg"), n = dt("path"), b(n, "fill", "currentColor"), b(n, "d", `M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`), b(e, "width", "100%"), b(e, "height", "100%"), b(e, "viewBox", "-2 -2 50 50"), b(e, "focusable", "false"), b(e, "aria-hidden", "true"), b(e, "role", "presentation"), b(e, "class", "svelte-whdbu1");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ye,
    i: ye,
    o: ye,
    d(i) {
      i && V(e);
    }
  };
}
class ed extends Ge {
  constructor(e) {
    super(), Ke(this, e, null, UF, Nt, {});
  }
}
function HF(t) {
  let e, n;
  return {
    c() {
      e = dt("svg"), n = dt("circle"), b(n, "class", "circle_path svelte-1p3nqvd"), b(n, "cx", "50"), b(n, "cy", "50"), b(n, "r", "20"), b(n, "fill", "none"), b(n, "stroke", "currentColor"), b(n, "stroke-width", "5"), b(n, "stroke-miterlimit", "10"), b(e, "class", "loading svelte-1p3nqvd"), b(e, "viewBox", "25 25 50 50");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ye,
    i: ye,
    o: ye,
    d(i) {
      i && V(e);
    }
  };
}
class WF extends Ge {
  constructor(e) {
    super(), Ke(this, e, null, HF, Nt, {});
  }
}
const qF = (t) => ({ value: t[0] & 8 }), Gw = (t) => ({ value: t[3] }), JF = (t) => ({ listOpen: t[0] & 64 }), Yw = (t) => ({ listOpen: t[6] }), KF = (t) => ({}), Xw = (t) => ({}), GF = (t) => ({}), Qw = (t) => ({}), YF = (t) => ({ selection: t[0] & 8 }), Zw = (t) => ({ selection: t[3] });
function $w(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const XF = (t) => ({}), e2 = (t) => ({}), QF = (t) => ({ selection: t[0] & 8 }), t2 = (t) => ({
  selection: t[127],
  index: t[129]
}), ZF = (t) => ({}), n2 = (t) => ({}), $F = (t) => ({}), i2 = (t) => ({});
function r2(t, e, n) {
  const i = t.slice();
  return i[127] = e[n], i[129] = n, i;
}
const ez = (t) => ({
  item: t[0] & 16777216
}), s2 = (t) => ({
  item: t[127],
  index: t[129]
}), tz = (t) => ({
  filteredItems: t[0] & 16777216
}), o2 = (t) => ({ filteredItems: t[24] });
function l2(t) {
  let e, n, i, r, s, o;
  const l = [rz, iz, nz], a = [];
  function c(u, f) {
    return u[50].list ? 0 : u[24].length > 0 ? 1 : u[19] ? -1 : 2;
  }
  return ~(n = c(t)) && (i = a[n] = l[n](t)), {
    c() {
      e = j("div"), i && i.c(), b(e, "class", "svelte-select-list svelte-18e845"), Se(e, "prefloat", t[28]);
    },
    m(u, f) {
      U(u, e, f), ~n && a[n].m(e, null), t[91](e), r = !0, s || (o = [
        qi(t[49].call(null, e)),
        re(e, "scroll", t[41]),
        re(e, "pointerdown", Je(_r(t[85]))),
        re(e, "pointerup", Je(_r(t[86])))
      ], s = !0);
    },
    p(u, f) {
      let h = n;
      n = c(u), n === h ? ~n && a[n].p(u, f) : (i && (Ae(), x(a[h], 1, 1, () => {
        a[h] = null;
      }), Me()), ~n ? (i = a[n], i ? i.p(u, f) : (i = a[n] = l[n](u), i.c()), P(i, 1), i.m(e, null)) : i = null), (!r || f[0] & 268435456) && Se(e, "prefloat", u[28]);
    },
    i(u) {
      r || (P(i), r = !0);
    },
    o(u) {
      x(i), r = !1;
    },
    d(u) {
      u && V(e), ~n && a[n].d(), t[91](null), s = !1, ct(o);
    }
  };
}
function nz(t) {
  let e;
  const n = t[80].empty, i = zn(n, t, t[79], i2), r = i || sz();
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i && i.p && (!e || o[2] & 131072) && Un(
        i,
        n,
        s,
        s[79],
        e ? Vn(n, s[79], o, $F) : Hn(s[79]),
        i2
      );
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function iz(t) {
  let e, n, i = t[24], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = a2(r2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 1627402376 | l[1] & 28672 | l[2] & 131072) {
        i = o[24];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = r2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = a2(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function rz(t) {
  let e;
  const n = t[80].list, i = zn(n, t, t[79], o2);
  return {
    c() {
      i && i.c();
    },
    m(r, s) {
      i && i.m(r, s), e = !0;
    },
    p(r, s) {
      i && i.p && (!e || s[0] & 16777216 | s[2] & 131072) && Un(
        i,
        n,
        r,
        r[79],
        e ? Vn(n, r[79], s, tz) : Hn(r[79]),
        o2
      );
    },
    i(r) {
      e || (P(i, r), e = !0);
    },
    o(r) {
      x(i, r), e = !1;
    },
    d(r) {
      i && i.d(r);
    }
  };
}
function sz(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "No options", b(e, "class", "empty svelte-18e845");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function oz(t) {
  var i;
  let e = ((i = t[127]) == null ? void 0 : i[t[12]]) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(r, s) {
      U(r, n, s);
    },
    p(r, s) {
      var o;
      s[0] & 16781312 && e !== (e = ((o = r[127]) == null ? void 0 : o[r[12]]) + "") && ze(n, e);
    },
    d(r) {
      r && V(n);
    }
  };
}
function a2(t) {
  let e, n, i, r, s, o, l, a;
  const c = t[80].item, u = zn(c, t, t[79], s2), f = u || oz(t);
  function h() {
    return t[88](t[129]);
  }
  function d() {
    return t[89](t[129]);
  }
  function p() {
    return t[90](t[127], t[129]);
  }
  return {
    c() {
      var g;
      e = j("div"), n = j("div"), f && f.c(), s = Z(), b(n, "class", "item svelte-18e845"), Se(n, "list-group-title", t[127].groupHeader), Se(n, "active", t[45](t[127], t[3], t[13])), Se(n, "first", bz(t[129])), Se(n, "hover", t[7] === t[129]), Se(n, "group-item", t[127].groupItem), Se(n, "not-selectable", ((g = t[127]) == null ? void 0 : g.selectable) === !1), b(e, "class", "list-item svelte-18e845"), b(e, "tabindex", "-1");
    },
    m(g, m) {
      U(g, e, m), E(e, n), f && f.m(n, null), E(e, s), o = !0, l || (a = [
        qi(i = t[46].call(null, n, {
          scroll: t[45](t[127], t[3], t[13]),
          listDom: t[30]
        })),
        qi(r = t[47].call(null, n, {
          scroll: t[29] === t[129],
          listDom: t[30]
        })),
        re(e, "mouseover", h),
        re(e, "focus", d),
        re(e, "click", Je(p)),
        re(e, "keydown", Je(_r(t[87])))
      ], l = !0);
    },
    p(g, m) {
      var _;
      t = g, u ? u.p && (!o || m[0] & 16777216 | m[2] & 131072) && Un(
        u,
        c,
        t,
        t[79],
        o ? Vn(c, t[79], m, ez) : Hn(t[79]),
        s2
      ) : f && f.p && (!o || m[0] & 16781312) && f.p(t, o ? m : [-1, -1, -1, -1, -1]), i && hi(i.update) && m[0] & 1090527240 && i.update.call(null, {
        scroll: t[45](t[127], t[3], t[13]),
        listDom: t[30]
      }), r && hi(r.update) && m[0] & 1610612736 && r.update.call(null, {
        scroll: t[29] === t[129],
        listDom: t[30]
      }), (!o || m[0] & 16777216) && Se(n, "list-group-title", t[127].groupHeader), (!o || m[0] & 16785416 | m[1] & 16384) && Se(n, "active", t[45](t[127], t[3], t[13])), (!o || m[0] & 128) && Se(n, "hover", t[7] === t[129]), (!o || m[0] & 16777216) && Se(n, "group-item", t[127].groupItem), (!o || m[0] & 16777216) && Se(n, "not-selectable", ((_ = t[127]) == null ? void 0 : _.selectable) === !1);
    },
    i(g) {
      o || (P(f, g), o = !0);
    },
    o(g) {
      x(f, g), o = !1;
    },
    d(g) {
      g && V(e), f && f.d(g), l = !1, ct(a);
    }
  };
}
function c2(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("span"), n = _e(t[32]), i = Z(), r = j("span"), s = _e(t[31]), b(e, "id", "aria-selection"), b(e, "class", "svelte-18e845"), b(r, "id", "aria-context"), b(r, "class", "svelte-18e845");
    },
    m(o, l) {
      U(o, e, l), E(e, n), U(o, i, l), U(o, r, l), E(r, s);
    },
    p(o, l) {
      l[1] & 2 && ze(n, o[32]), l[1] & 1 && ze(s, o[31]);
    },
    d(o) {
      o && V(e), o && V(i), o && V(r);
    }
  };
}
function u2(t) {
  let e, n, i, r;
  const s = [az, lz], o = [];
  function l(a, c) {
    return a[9] ? 0 : 1;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = rt();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Ae(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Me(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function lz(t) {
  let e, n;
  const i = t[80].selection, r = zn(i, t, t[79], Zw), s = r || cz(t);
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "selected-item svelte-18e845"), Se(e, "hide-selected-item", t[35]);
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r ? r.p && (!n || l[0] & 8 | l[2] & 131072) && Un(
        r,
        i,
        o,
        o[79],
        n ? Vn(i, o[79], l, YF) : Hn(o[79]),
        Zw
      ) : s && s.p && (!n || l[0] & 4104) && s.p(o, n ? l : [-1, -1, -1, -1, -1]), (!n || l[1] & 16) && Se(e, "hide-selected-item", o[35]);
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function az(t) {
  let e, n, i = t[3], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = h2($w(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, l) {
      if (l[0] & 67116040 | l[1] & 32 | l[2] & 131072) {
        i = o[3];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = $w(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = h2(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function cz(t) {
  let e = t[3][t[12]] + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[3][i[12]] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function uz(t) {
  let e = t[127][t[12]] + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 4104 && e !== (e = i[127][i[12]] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function f2(t) {
  let e, n, i, r;
  const s = t[80]["multi-clear-icon"], o = zn(s, t, t[79], e2), l = o || fz();
  function a() {
    return t[92](t[129]);
  }
  return {
    c() {
      e = j("div"), l && l.c(), b(e, "class", "multi-item-clear svelte-18e845");
    },
    m(c, u) {
      U(c, e, u), l && l.m(e, null), n = !0, i || (r = [
        re(e, "pointerdown", Je(_r(t[83]))),
        re(e, "click", a),
        re(e, "keydown", Je(_r(t[84])))
      ], i = !0);
    },
    p(c, u) {
      t = c, o && o.p && (!n || u[2] & 131072) && Un(
        o,
        s,
        t,
        t[79],
        n ? Vn(s, t[79], u, XF) : Hn(t[79]),
        e2
      );
    },
    i(c) {
      n || (P(l, c), n = !0);
    },
    o(c) {
      x(l, c), n = !1;
    },
    d(c) {
      c && V(e), l && l.d(c), i = !1, ct(r);
    }
  };
}
function fz(t) {
  let e, n;
  return e = new ed({}), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function h2(t) {
  let e, n, i, r, s, o, l;
  const a = t[80].selection, c = zn(a, t, t[79], t2), u = c || uz(t);
  let f = !t[11] && !t[10] && ed && f2(t);
  function h() {
    return t[93](t[129]);
  }
  return {
    c() {
      e = j("div"), n = j("span"), u && u.c(), i = Z(), f && f.c(), r = Z(), b(n, "class", "multi-item-text svelte-18e845"), b(e, "class", "multi-item svelte-18e845"), Se(e, "active", t[26] === t[129]), Se(e, "disabled", t[11]);
    },
    m(d, p) {
      U(d, e, p), E(e, n), u && u.m(n, null), E(e, i), f && f.m(e, null), E(e, r), s = !0, o || (l = [
        re(e, "click", _r(h)),
        re(e, "keydown", Je(_r(t[82])))
      ], o = !0);
    },
    p(d, p) {
      t = d, c ? c.p && (!s || p[0] & 8 | p[2] & 131072) && Un(
        c,
        a,
        t,
        t[79],
        s ? Vn(a, t[79], p, QF) : Hn(t[79]),
        t2
      ) : u && u.p && (!s || p[0] & 4104) && u.p(t, s ? p : [-1, -1, -1, -1, -1]), !t[11] && !t[10] && ed ? f ? (f.p(t, p), p[0] & 3072 && P(f, 1)) : (f = f2(t), f.c(), P(f, 1), f.m(e, r)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), (!s || p[0] & 67108864) && Se(e, "active", t[26] === t[129]), (!s || p[0] & 2048) && Se(e, "disabled", t[11]);
    },
    i(d) {
      s || (P(u, d), P(f), s = !0);
    },
    o(d) {
      x(u, d), x(f), s = !1;
    },
    d(d) {
      d && V(e), u && u.d(d), f && f.d(), o = !1, ct(l);
    }
  };
}
function d2(t) {
  let e, n;
  const i = t[80]["loading-icon"], r = zn(i, t, t[79], Qw), s = r || hz();
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "icon loading svelte-18e845"), b(e, "aria-hidden", "true");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r && r.p && (!n || l[2] & 131072) && Un(
        r,
        i,
        o,
        o[79],
        n ? Vn(i, o[79], l, GF) : Hn(o[79]),
        Qw
      );
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function hz(t) {
  let e, n;
  return e = new WF({}), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function p2(t) {
  let e, n, i, r;
  const s = t[80]["clear-icon"], o = zn(s, t, t[79], Xw), l = o || dz();
  return {
    c() {
      e = j("button"), l && l.c(), b(e, "class", "icon clear-select svelte-18e845"), b(e, "tabindex", "0");
    },
    m(a, c) {
      U(a, e, c), l && l.m(e, null), n = !0, i || (r = [
        re(e, "click", Je(_r(t[22]))),
        re(e, "pointerdown", Je(_r(t[81])))
      ], i = !0);
    },
    p(a, c) {
      o && o.p && (!n || c[2] & 131072) && Un(
        o,
        s,
        a,
        a[79],
        n ? Vn(s, a[79], c, KF) : Hn(a[79]),
        Xw
      );
    },
    i(a) {
      n || (P(l, a), n = !0);
    },
    o(a) {
      x(l, a), n = !1;
    },
    d(a) {
      a && V(e), l && l.d(a), i = !1, ct(r);
    }
  };
}
function dz(t) {
  let e, n;
  return e = new ed({}), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function g2(t) {
  let e, n;
  const i = t[80]["chevron-icon"], r = zn(i, t, t[79], Yw), s = r || pz();
  return {
    c() {
      e = j("div"), s && s.c(), b(e, "class", "icon chevron svelte-18e845"), b(e, "aria-hidden", "true");
    },
    m(o, l) {
      U(o, e, l), s && s.m(e, null), n = !0;
    },
    p(o, l) {
      r && r.p && (!n || l[0] & 64 | l[2] & 131072) && Un(
        r,
        i,
        o,
        o[79],
        n ? Vn(i, o[79], l, JF) : Hn(o[79]),
        Yw
      );
    },
    i(o) {
      n || (P(s, o), n = !0);
    },
    o(o) {
      x(s, o), n = !1;
    },
    d(o) {
      o && V(e), s && s.d(o);
    }
  };
}
function pz(t) {
  let e, n;
  return e = new VF({}), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function m2(t) {
  let e;
  const n = t[80].required, i = zn(n, t, t[79], Gw), r = i || gz();
  return {
    c() {
      r && r.c();
    },
    m(s, o) {
      r && r.m(s, o), e = !0;
    },
    p(s, o) {
      i && i.p && (!e || o[0] & 8 | o[2] & 131072) && Un(
        i,
        n,
        s,
        s[79],
        e ? Vn(n, s[79], o, qF) : Hn(s[79]),
        Gw
      );
    },
    i(s) {
      e || (P(r, s), e = !0);
    },
    o(s) {
      x(r, s), e = !1;
    },
    d(s) {
      r && r.d(s);
    }
  };
}
function gz(t) {
  let e;
  return {
    c() {
      e = j("select"), b(e, "class", "required svelte-18e845"), e.required = !0;
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function mz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w = t[6] && l2(t), M = t[2] && c2(t);
  const N = t[80].prepend, T = zn(N, t, t[79], n2);
  let O = t[25] && u2(t), W = [
    {
      readOnly: u = !t[17]
    },
    t[27],
    { placeholder: t[33] },
    { style: t[18] },
    { disabled: t[11] }
  ], H = {};
  for (let F = 0; F < W.length; F += 1)
    H = Ko(H, W[F]);
  let I = t[5] && d2(t), z = t[34] && p2(t), L = t[20] && g2(t), K = t[16] && (!t[3] || t[3].length === 0) && m2(t);
  return {
    c() {
      e = j("div"), w && w.c(), n = Z(), i = j("span"), M && M.c(), r = Z(), s = j("div"), T && T.c(), o = Z(), l = j("div"), O && O.c(), a = Z(), c = j("input"), f = Z(), h = j("div"), I && I.c(), d = Z(), z && z.c(), p = Z(), L && L.c(), g = Z(), m = j("input"), S = Z(), K && K.c(), b(i, "aria-live", "polite"), b(i, "aria-atomic", "false"), b(i, "aria-relevant", "additions text"), b(i, "class", "a11y-text svelte-18e845"), b(s, "class", "prepend svelte-18e845"), V_(c, H), Se(c, "svelte-18e845", !0), b(l, "class", "value-container svelte-18e845"), b(h, "class", "indicators svelte-18e845"), b(m, "name", t[8]), b(m, "type", "hidden"), m.value = _ = t[3] ? JSON.stringify(t[3]) : null, b(m, "class", "svelte-18e845"), b(e, "class", v = "svelte-select " + t[21] + " svelte-18e845"), b(e, "style", t[14]), Se(e, "multi", t[9]), Se(e, "disabled", t[11]), Se(e, "focused", t[2]), Se(e, "list-open", t[6]), Se(e, "show-chevron", t[20]), Se(e, "error", t[15]);
    },
    m(F, D) {
      U(F, e, D), w && w.m(e, null), E(e, n), E(e, i), M && M.m(i, null), E(e, r), E(e, s), T && T.m(s, null), E(e, o), E(e, l), O && O.m(l, null), E(l, a), E(l, c), c.autofocus && c.focus(), t[94](c), Po(c, t[4]), E(e, f), E(e, h), I && I.m(h, null), E(h, d), z && z.m(h, null), E(h, p), L && L.m(h, null), E(e, g), E(e, m), E(e, S), K && K.m(e, null), t[96](e), k = !0, C || (A = [
        re(window, "click", t[42]),
        re(window, "keydown", t[37]),
        re(c, "keydown", t[37]),
        re(c, "blur", t[39]),
        re(c, "focus", t[38]),
        re(c, "input", t[95]),
        re(e, "pointerup", _r(t[40])),
        qi(t[48].call(null, e))
      ], C = !0);
    },
    p(F, D) {
      F[6] ? w ? (w.p(F, D), D[0] & 64 && P(w, 1)) : (w = l2(F), w.c(), P(w, 1), w.m(e, n)) : w && (Ae(), x(w, 1, 1, () => {
        w = null;
      }), Me()), F[2] ? M ? M.p(F, D) : (M = c2(F), M.c(), M.m(i, null)) : M && (M.d(1), M = null), T && T.p && (!k || D[2] & 131072) && Un(
        T,
        N,
        F,
        F[79],
        k ? Vn(N, F[79], D, ZF) : Hn(F[79]),
        n2
      ), F[25] ? O ? (O.p(F, D), D[0] & 33554432 && P(O, 1)) : (O = u2(F), O.c(), P(O, 1), O.m(l, a)) : O && (Ae(), x(O, 1, 1, () => {
        O = null;
      }), Me()), V_(c, H = Ul(W, [
        (!k || D[0] & 131072 && u !== (u = !F[17])) && { readOnly: u },
        D[0] & 134217728 && F[27],
        (!k || D[1] & 4) && { placeholder: F[33] },
        (!k || D[0] & 262144) && { style: F[18] },
        (!k || D[0] & 2048) && { disabled: F[11] }
      ])), D[0] & 16 && c.value !== F[4] && Po(c, F[4]), Se(c, "svelte-18e845", !0), F[5] ? I ? (I.p(F, D), D[0] & 32 && P(I, 1)) : (I = d2(F), I.c(), P(I, 1), I.m(h, d)) : I && (Ae(), x(I, 1, 1, () => {
        I = null;
      }), Me()), F[34] ? z ? (z.p(F, D), D[1] & 8 && P(z, 1)) : (z = p2(F), z.c(), P(z, 1), z.m(h, p)) : z && (Ae(), x(z, 1, 1, () => {
        z = null;
      }), Me()), F[20] ? L ? (L.p(F, D), D[0] & 1048576 && P(L, 1)) : (L = g2(F), L.c(), P(L, 1), L.m(h, null)) : L && (Ae(), x(L, 1, 1, () => {
        L = null;
      }), Me()), (!k || D[0] & 256) && b(m, "name", F[8]), (!k || D[0] & 8 && _ !== (_ = F[3] ? JSON.stringify(F[3]) : null)) && (m.value = _), F[16] && (!F[3] || F[3].length === 0) ? K ? (K.p(F, D), D[0] & 65544 && P(K, 1)) : (K = m2(F), K.c(), P(K, 1), K.m(e, null)) : K && (Ae(), x(K, 1, 1, () => {
        K = null;
      }), Me()), (!k || D[0] & 2097152 && v !== (v = "svelte-select " + F[21] + " svelte-18e845")) && b(e, "class", v), (!k || D[0] & 16384) && b(e, "style", F[14]), (!k || D[0] & 2097664) && Se(e, "multi", F[9]), (!k || D[0] & 2099200) && Se(e, "disabled", F[11]), (!k || D[0] & 2097156) && Se(e, "focused", F[2]), (!k || D[0] & 2097216) && Se(e, "list-open", F[6]), (!k || D[0] & 3145728) && Se(e, "show-chevron", F[20]), (!k || D[0] & 2129920) && Se(e, "error", F[15]);
    },
    i(F) {
      k || (P(w), P(T, F), P(O), P(I), P(z), P(L), P(K), k = !0);
    },
    o(F) {
      x(w), x(T, F), x(O), x(I), x(z), x(L), x(K), k = !1;
    },
    d(F) {
      F && V(e), w && w.d(), M && M.d(), T && T.d(F), O && O.d(), t[94](null), I && I.d(), z && z.d(), L && L.d(), K && K.d(), t[96](null), C = !1, ct(A);
    }
  };
}
function b2(t) {
  return t.map((e, n) => ({ index: n, value: e, label: `${e}` }));
}
function bz(t) {
  return t === 0;
}
function _z(t) {
  return t.groupHeader && t.selectable || t.selectable || !t.hasOwnProperty("selectable");
}
function yz(t, e, n) {
  let i, r, s, o, l, a, c, u, f, { $$slots: h = {}, $$scope: d } = e;
  const p = oT(h), g = Vl();
  let { justValue: m = null } = e, { filter: _ = xF } = e, { getItems: S = FF } = e, { id: v = null } = e, { name: k = null } = e, { container: C = void 0 } = e, { input: A = void 0 } = e, { multiple: w = !1 } = e, { multiFullItemClearable: M = !1 } = e, { disabled: N = !1 } = e, { focused: T = !1 } = e, { value: O = null } = e, { filterText: W = "" } = e, { placeholder: H = "Please select" } = e, { placeholderAlwaysShow: I = !1 } = e, { items: z = null } = e, { label: L = "label" } = e, { itemFilter: K = (se, Ue) => `${se}`.toLowerCase().includes(Ue.toLowerCase()) } = e, { groupBy: F = void 0 } = e, { groupFilter: D = (se) => se } = e, { groupHeaderSelectable: X = !1 } = e, { itemId: ue = "value" } = e, { loadOptions: q = void 0 } = e, { containerStyles: ee = "" } = e, { hasError: ie = !1 } = e, { filterSelectedItems: ne = !0 } = e, { required: je = !1 } = e, { createGroupHeaderItem: Ie = (se, Ue) => ({ value: se, [L]: se }) } = e;
  const Xe = () => c;
  let { searchable: le = !0 } = e, { inputStyles: Ne = "" } = e, { clearable: nt = !0 } = e, { loading: ke = !1 } = e, { listOpen: fe = !1 } = e, Pe, { debounce: ae = (se, Ue = 1) => {
    clearTimeout(Pe), Pe = setTimeout(se, Ue);
  } } = e, { debounceWait: $ = 300 } = e, { hideEmptyState: he = !1 } = e, { inputAttributes: Ce = {} } = e, { listAutoWidth: J = !0 } = e, { showChevron: y = !1 } = e, { listOffset: R = 5 } = e, { hoverItemIndex: B = 0 } = e, { floatingConfig: Q = {} } = e, { class: G = "" } = e, ce, De, We, pt;
  function ot() {
    if (typeof O == "string") {
      let se = z.find((Ue) => Ue[ue] === O);
      n(3, O = se || { [ue]: O, label: O });
    } else
      w && Array.isArray(O) && O.length > 0 && n(3, O = O.map((se) => typeof se == "string" ? { value: se, label: se } : se));
  }
  let Be;
  function ht() {
    n(27, Be = Object.assign(
      {
        autocapitalize: "none",
        autocomplete: "off",
        autocorrect: "off",
        spellcheck: !1,
        tabindex: 0,
        type: "text",
        "aria-autocomplete": "list"
      },
      Ce
    )), v && n(27, Be.id = v, Be), le || n(27, Be.readonly = !0, Be);
  }
  function jt(se) {
    const Ue = [], gn = {};
    se.forEach((co) => {
      const Mr = F(co);
      Ue.includes(Mr) || (Ue.push(Mr), gn[Mr] = [], Mr && gn[Mr].push(Object.assign(Ie(Mr, co), {
        id: Mr,
        groupHeader: !0,
        selectable: X
      }))), gn[Mr].push(Object.assign({ groupItem: !!Mr }, co));
    });
    const Ar = [];
    return D(Ue).forEach((co) => {
      gn[co] && Ar.push(...gn[co]);
    }), Ar;
  }
  function _n() {
    if (w) {
      JSON.stringify(O) !== JSON.stringify(De) && Zn() && g("input", O);
      return;
    }
    (!De || JSON.stringify(O[ue]) !== JSON.stringify(De[ue])) && g("input", O);
  }
  function yn() {
    O && (Array.isArray(O) ? n(3, O = [...O]) : n(3, O = [O]));
  }
  function Rt() {
    O && n(3, O = null);
  }
  function Ee() {
    const se = c.findIndex((Ue) => Ue[ue] === O[ue]);
    an(se, !0);
  }
  function li(se) {
    g("hoverItem", se);
  }
  function an(se = 0, Ue) {
    n(7, B = se), !Ue && F && c[B] && !c[B].selectable && tn(1);
  }
  function Bt() {
    !q && W.length === 0 || (q ? ae(
      async function() {
        n(5, ke = !0);
        let se = await S({
          dispatch: g,
          loadOptions: q,
          convertStringItemsToObjects: b2,
          filterText: W
        });
        se ? (n(5, ke = se.loading), n(6, fe = fe ? se.listOpen : W.length > 0), n(2, T = fe && se.focused), n(51, z = F ? jt(se.filteredItems) : se.filteredItems)) : (n(5, ke = !1), n(2, T = !0), n(6, fe = !0));
      },
      $
    ) : (n(6, fe = !0), w && n(26, ce = void 0)));
  }
  function wn(se) {
    fe && g("filter", se);
  }
  mT(async () => {
    n(76, De = O), n(77, We = W), n(78, pt = w);
  });
  function Kt() {
    return w ? O ? O.map((se) => se[ue]) : null : O && O[ue];
  }
  function Zn() {
    let se = !0;
    if (O) {
      const Ue = [], gn = [];
      O.forEach((Ar) => {
        Ue.includes(Ar[ue]) ? se = !1 : (Ue.push(Ar[ue]), gn.push(Ar));
      }), se || n(3, O = gn);
    }
    return se;
  }
  function jn(se) {
    let Ue = se ? se[ue] : O[ue];
    return z.find((gn) => gn[ue] === Ue);
  }
  function Wn(se) {
    !se || se.length === 0 || se.some((Ue) => typeof Ue != "object") || !O || (w ? O.some((Ue) => !Ue || !Ue[ue]) : !O[ue]) || (Array.isArray(O) ? n(3, O = O.map((Ue) => jn(Ue) || Ue)) : n(3, O = jn() || O));
  }
  async function vn(se) {
    const Ue = O[se];
    O.length === 1 ? n(3, O = void 0) : n(3, O = O.filter((gn) => gn !== Ue)), g("clear", Ue);
  }
  function me(se) {
    if (T)
      switch (se.stopPropagation(), se.key) {
        case "Escape":
          se.preventDefault(), kn();
          break;
        case "Enter":
          if (se.preventDefault(), fe) {
            if (c.length === 0)
              break;
            const Ue = c[B];
            if (O && !w && O[ue] === Ue[ue]) {
              kn();
              break;
            } else
              Er(c[B]);
          }
          break;
        case "ArrowDown":
          se.preventDefault(), fe ? tn(1) : (n(6, fe = !0), n(26, ce = void 0));
          break;
        case "ArrowUp":
          se.preventDefault(), fe ? tn(-1) : (n(6, fe = !0), n(26, ce = void 0));
          break;
        case "Tab":
          if (fe && T) {
            if (c.length === 0 || O && O[ue] === c[B][ue])
              return kn();
            se.preventDefault(), Er(c[B]), kn();
          }
          break;
        case "Backspace":
          if (!w || W.length > 0)
            return;
          if (w && O && O.length > 0) {
            if (vn(ce !== void 0 ? ce : O.length - 1), ce === 0 || ce === void 0)
              break;
            n(26, ce = O.length > ce ? ce - 1 : void 0);
          }
          break;
        case "ArrowLeft":
          if (!O || !w || W.length > 0)
            return;
          ce === void 0 ? n(26, ce = O.length - 1) : O.length > ce && ce !== 0 && n(26, ce -= 1);
          break;
        case "ArrowRight":
          if (!O || !w || W.length > 0 || ce === void 0)
            return;
          ce === O.length - 1 ? n(26, ce = void 0) : ce < O.length - 1 && n(26, ce += 1);
          break;
      }
  }
  function Le(se) {
    se && g("focus", se), A.focus(), n(2, T = !0);
  }
  async function gt(se) {
    Fi || (fe || T) && (g("blur", se), kn(), n(2, T = !1), n(26, ce = void 0), A.blur());
  }
  function en() {
    N || (n(6, fe = !fe), fe && !T && Le());
  }
  function bi() {
    n(3, O = void 0), kn(), g("clear", O), Le();
  }
  or(() => {
    fe && n(2, T = !0), T && A && A.focus();
  });
  function Ht(se) {
    if (se) {
      n(4, W = "");
      const Ue = Object.assign({}, se);
      (!Ue.groupHeader || Ue.selectable) && (w ? n(3, O = O ? O.concat([Ue]) : [Ue]) : n(3, O = Ue), n(3, O), setTimeout(() => {
        kn(), n(26, ce = void 0), g("change", O);
      }));
    }
  }
  function kn() {
    n(4, W = ""), n(6, fe = !1);
  }
  let { ariaValues: we = (se) => `Option ${se}, selected.` } = e, { ariaListOpen: lt = (se, Ue) => `You are currently focused on option ${se}. There are ${Ue} results available.` } = e, { ariaFocused: wt = () => "Select is focused, type to refine list, press down to open the menu." } = e;
  function Wt(se) {
    let Ue;
    return se && O.length > 0 ? Ue = O.map((gn) => gn[L]).join(", ") : Ue = O[L], we(Ue);
  }
  function Jt() {
    if (!c || c.length === 0)
      return "";
    let se = c[B];
    if (fe && se) {
      let Ue = c ? c.length : 0;
      return lt(se[L], Ue);
    } else
      return wt();
  }
  let mt = null, cn;
  function Gi() {
    clearTimeout(cn), cn = setTimeout(
      () => {
        Fi = !1;
      },
      100
    );
  }
  function Xt(se) {
    C && !C.contains(se.target) && !(mt != null && mt.contains(se.target)) && gt();
  }
  ks(() => {
    mt == null || mt.remove();
  });
  let Fi = !1;
  function Er(se) {
    se.isCreator || se.selectable === !1 || Ht(se);
  }
  function Ii(se) {
    Fi || n(7, B = se);
  }
  function ar(se) {
    const { item: Ue, i: gn } = se;
    if ((Ue == null ? void 0 : Ue.selectable) !== !1) {
      if (O && !w && O[ue] === Ue[ue])
        return kn();
      _z(Ue) && (n(7, B = gn), Er(Ue));
    }
  }
  function tn(se) {
    if (c.filter((Ar) => !Object.hasOwn(Ar, "selectable") || Ar.selectable === !0).length === 0)
      return n(7, B = 0);
    se > 0 && B === c.length - 1 ? n(7, B = 0) : se < 0 && B === 0 ? n(7, B = c.length - 1) : n(7, B = B + se);
    const gn = c[B];
    if (gn && gn.selectable === !1) {
      (se === 1 || se === -1) && tn(se);
      return;
    }
  }
  function qn(se, Ue, gn) {
    if (!w)
      return Ue && Ue[gn] === se[gn];
  }
  const Jn = Tn, nn = Tn;
  function Tn(se) {
    return {
      update(Ue) {
        Ue.scroll && (Gi(), se.scrollIntoView({
          behavior: "auto",
          block: "nearest",
          inline: "start"
        }));
      }
    };
  }
  function Bn() {
    const { width: se } = C.getBoundingClientRect();
    n(23, mt.style.width = J ? se + "px" : "auto", mt);
  }
  let Kn = {
    strategy: "absolute",
    placement: "bottom-start",
    middleware: [yF(R), bF(), vF()],
    autoUpdate: !1
  };
  const [zi, Yi, _i] = BF(Kn);
  let Qt = !0;
  function Lt(se, Ue) {
    if (!se || !Ue)
      return n(28, Qt = !0);
    setTimeout(
      () => {
        n(28, Qt = !1);
      },
      0
    );
  }
  function Rn(se) {
    Ft.call(this, t, se);
  }
  function te(se) {
    Ft.call(this, t, se);
  }
  function Te(se) {
    Ft.call(this, t, se);
  }
  function be(se) {
    Ft.call(this, t, se);
  }
  function Oe(se) {
    Ft.call(this, t, se);
  }
  function Qe(se) {
    Ft.call(this, t, se);
  }
  function Zt(se) {
    Ft.call(this, t, se);
  }
  const Pn = (se) => Ii(se), $n = (se) => Ii(se), Gt = (se, Ue) => ar({ item: se, i: Ue });
  function yi(se) {
    _t[se ? "unshift" : "push"](() => {
      mt = se, n(23, mt);
    });
  }
  const Vi = (se) => vn(se), Xl = (se) => M ? vn(se) : {};
  function Ql(se) {
    _t[se ? "unshift" : "push"](() => {
      A = se, n(1, A);
    });
  }
  function gg() {
    W = this.value, n(4, W);
  }
  function mg(se) {
    _t[se ? "unshift" : "push"](() => {
      C = se, n(0, C);
    });
  }
  return t.$$set = (se) => {
    "justValue" in se && n(52, m = se.justValue), "filter" in se && n(53, _ = se.filter), "getItems" in se && n(54, S = se.getItems), "id" in se && n(55, v = se.id), "name" in se && n(8, k = se.name), "container" in se && n(0, C = se.container), "input" in se && n(1, A = se.input), "multiple" in se && n(9, w = se.multiple), "multiFullItemClearable" in se && n(10, M = se.multiFullItemClearable), "disabled" in se && n(11, N = se.disabled), "focused" in se && n(2, T = se.focused), "value" in se && n(3, O = se.value), "filterText" in se && n(4, W = se.filterText), "placeholder" in se && n(56, H = se.placeholder), "placeholderAlwaysShow" in se && n(57, I = se.placeholderAlwaysShow), "items" in se && n(51, z = se.items), "label" in se && n(12, L = se.label), "itemFilter" in se && n(58, K = se.itemFilter), "groupBy" in se && n(59, F = se.groupBy), "groupFilter" in se && n(60, D = se.groupFilter), "groupHeaderSelectable" in se && n(61, X = se.groupHeaderSelectable), "itemId" in se && n(13, ue = se.itemId), "loadOptions" in se && n(62, q = se.loadOptions), "containerStyles" in se && n(14, ee = se.containerStyles), "hasError" in se && n(15, ie = se.hasError), "filterSelectedItems" in se && n(63, ne = se.filterSelectedItems), "required" in se && n(16, je = se.required), "createGroupHeaderItem" in se && n(64, Ie = se.createGroupHeaderItem), "searchable" in se && n(17, le = se.searchable), "inputStyles" in se && n(18, Ne = se.inputStyles), "clearable" in se && n(66, nt = se.clearable), "loading" in se && n(5, ke = se.loading), "listOpen" in se && n(6, fe = se.listOpen), "debounce" in se && n(67, ae = se.debounce), "debounceWait" in se && n(68, $ = se.debounceWait), "hideEmptyState" in se && n(19, he = se.hideEmptyState), "inputAttributes" in se && n(69, Ce = se.inputAttributes), "listAutoWidth" in se && n(70, J = se.listAutoWidth), "showChevron" in se && n(20, y = se.showChevron), "listOffset" in se && n(71, R = se.listOffset), "hoverItemIndex" in se && n(7, B = se.hoverItemIndex), "floatingConfig" in se && n(72, Q = se.floatingConfig), "class" in se && n(21, G = se.class), "ariaValues" in se && n(73, we = se.ariaValues), "ariaListOpen" in se && n(74, lt = se.ariaListOpen), "ariaFocused" in se && n(75, wt = se.ariaFocused), "$$scope" in se && n(79, d = se.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 | t.$$.dirty[1] & 1048576 && O && ot(), t.$$.dirty[0] & 131072 | t.$$.dirty[2] & 128 && (Ce || !le) && ht(), t.$$.dirty[0] & 512 && w && yn(), t.$$.dirty[0] & 512 | t.$$.dirty[2] & 65536 && pt && !w && Rt(), t.$$.dirty[0] & 520 && w && O && O.length > 1 && Zn(), t.$$.dirty[0] & 8 && O && _n(), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !O && w && De && g("input", O), t.$$.dirty[0] & 6 && !T && A && kn(), t.$$.dirty[0] & 16 | t.$$.dirty[2] & 32768 && W !== We && Bt(), t.$$.dirty[0] & 12824 | t.$$.dirty[1] & 407896064 | t.$$.dirty[2] & 3 && n(24, c = _({
      loadOptions: q,
      filterText: W,
      items: z,
      multiple: w,
      value: O,
      itemId: ue,
      groupBy: F,
      label: L,
      filterSelectedItems: ne,
      itemFilter: K,
      convertStringItemsToObjects: b2,
      filterGroupedItems: jt
    })), t.$$.dirty[0] & 16777800 && !w && fe && O && c && Ee(), t.$$.dirty[0] & 576 && fe && w && n(7, B = 0), t.$$.dirty[0] & 128 && li(B), t.$$.dirty[0] & 520 && n(25, i = w ? O && O.length > 0 : O), t.$$.dirty[0] & 33554448 && n(35, r = i && W.length > 0), t.$$.dirty[0] & 33556512 | t.$$.dirty[2] & 16 && n(34, s = i && nt && !N && !ke), t.$$.dirty[0] & 520 | t.$$.dirty[1] & 100663296 && n(33, o = I && w ? H : O ? "" : H), t.$$.dirty[0] & 520 && n(32, l = O ? Wt(w) : ""), t.$$.dirty[0] & 16777412 && n(31, a = Jt()), t.$$.dirty[1] & 1048576 && Wn(z), t.$$.dirty[0] & 8712 && n(52, m = Kt()), t.$$.dirty[0] & 520 | t.$$.dirty[2] & 16384 && !w && De && !O && g("input", O), t.$$.dirty[0] & 16777800 && fe && c && !w && !O && an(), t.$$.dirty[0] & 16777216 && wn(c), t.$$.dirty[2] & 1024 && Q && _i(Object.assign(Kn, Q)), t.$$.dirty[0] & 8388608 && n(30, u = !!mt), t.$$.dirty[0] & 8388672 && Lt(mt, fe), t.$$.dirty[0] & 8388673 && fe && C && mt && Bn(), t.$$.dirty[0] & 128 && n(29, f = B);
  }, [
    C,
    A,
    T,
    O,
    W,
    ke,
    fe,
    B,
    k,
    w,
    M,
    N,
    L,
    ue,
    ee,
    ie,
    je,
    le,
    Ne,
    he,
    y,
    G,
    bi,
    mt,
    c,
    i,
    ce,
    Be,
    Qt,
    f,
    u,
    a,
    l,
    o,
    s,
    r,
    vn,
    me,
    Le,
    gt,
    en,
    Gi,
    Xt,
    Ii,
    ar,
    qn,
    Jn,
    nn,
    zi,
    Yi,
    p,
    z,
    m,
    _,
    S,
    v,
    H,
    I,
    K,
    F,
    D,
    X,
    q,
    ne,
    Ie,
    Xe,
    nt,
    ae,
    $,
    Ce,
    J,
    R,
    Q,
    we,
    lt,
    wt,
    De,
    We,
    pt,
    d,
    h,
    Rn,
    te,
    Te,
    be,
    Oe,
    Qe,
    Zt,
    Pn,
    $n,
    Gt,
    yi,
    Vi,
    Xl,
    Ql,
    gg,
    mg
  ];
}
class cl extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      yz,
      mz,
      Nt,
      {
        justValue: 52,
        filter: 53,
        getItems: 54,
        id: 55,
        name: 8,
        container: 0,
        input: 1,
        multiple: 9,
        multiFullItemClearable: 10,
        disabled: 11,
        focused: 2,
        value: 3,
        filterText: 4,
        placeholder: 56,
        placeholderAlwaysShow: 57,
        items: 51,
        label: 12,
        itemFilter: 58,
        groupBy: 59,
        groupFilter: 60,
        groupHeaderSelectable: 61,
        itemId: 13,
        loadOptions: 62,
        containerStyles: 14,
        hasError: 15,
        filterSelectedItems: 63,
        required: 16,
        createGroupHeaderItem: 64,
        getFilteredItems: 65,
        searchable: 17,
        inputStyles: 18,
        clearable: 66,
        loading: 5,
        listOpen: 6,
        debounce: 67,
        debounceWait: 68,
        hideEmptyState: 19,
        inputAttributes: 69,
        listAutoWidth: 70,
        showChevron: 20,
        listOffset: 71,
        hoverItemIndex: 7,
        floatingConfig: 72,
        class: 21,
        handleClear: 22,
        ariaValues: 73,
        ariaListOpen: 74,
        ariaFocused: 75
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get getFilteredItems() {
    return this.$$.ctx[65];
  }
  get handleClear() {
    return this.$$.ctx[22];
  }
}
function wz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z, L, K, F, D;
  function X(Ne) {
    t[16](Ne);
  }
  let ue = {
    class: "jse-filter-path",
    showChevron: !0,
    items: t[6]
  };
  t[0] !== void 0 && (ue.value = t[0]), l = new cl({ props: ue }), _t.push(() => Ir(l, "value", X, t[0]));
  function q(Ne) {
    t[17](Ne);
  }
  let ee = {
    class: "jse-filter-relation",
    showChevron: !0,
    items: t[8]
  };
  t[1] !== void 0 && (ee.value = t[1]), u = new cl({ props: ee }), _t.push(() => Ir(u, "value", q, t[1]));
  function ie(Ne) {
    t[19](Ne);
  }
  let ne = {
    class: "jse-sort-path",
    showChevron: !0,
    items: t[6]
  };
  t[3] !== void 0 && (ne.value = t[3]), k = new cl({ props: ne }), _t.push(() => Ir(k, "value", ie, t[3]));
  function je(Ne) {
    t[20](Ne);
  }
  let Ie = {
    class: "jse-sort-direction",
    showChevron: !0,
    items: t[9]
  };
  t[4] !== void 0 && (Ie.value = t[4]), w = new cl({ props: Ie }), _t.push(() => Ir(w, "value", je, t[4]));
  function Xe(Ne) {
    t[21](Ne);
  }
  let le = {
    class: "jse-projection-paths",
    multiple: !0,
    showChevron: !0,
    items: t[7]
  };
  return t[5] !== void 0 && (le.value = t[5]), z = new cl({ props: le }), _t.push(() => Ir(z, "value", Xe, t[5])), {
    c() {
      e = j("table"), n = j("tr"), i = j("th"), i.textContent = "Filter", r = Z(), s = j("td"), o = j("div"), ge(l.$$.fragment), c = Z(), ge(u.$$.fragment), h = Z(), d = j("input"), p = Z(), g = j("tr"), m = j("th"), m.textContent = "Sort", _ = Z(), S = j("td"), v = j("div"), ge(k.$$.fragment), A = Z(), ge(w.$$.fragment), N = Z(), T = j("tr"), O = j("th"), O.textContent = "Pick", W = Z(), H = j("td"), I = j("div"), ge(z.$$.fragment), b(i, "class", "svelte-1vxsn9f"), b(d, "class", "jse-filter-value svelte-1vxsn9f"), b(o, "class", "jse-horizontal svelte-1vxsn9f"), b(m, "class", "svelte-1vxsn9f"), b(v, "class", "jse-horizontal svelte-1vxsn9f"), b(O, "class", "svelte-1vxsn9f"), b(I, "class", "jse-horizontal svelte-1vxsn9f"), b(e, "class", "jse-transform-wizard svelte-1vxsn9f");
    },
    m(Ne, nt) {
      U(Ne, e, nt), E(e, n), E(n, i), E(n, r), E(n, s), E(s, o), de(l, o, null), E(o, c), de(u, o, null), E(o, h), E(o, d), Po(d, t[2]), E(e, p), E(e, g), E(g, m), E(g, _), E(g, S), E(S, v), de(k, v, null), E(v, A), de(w, v, null), E(e, N), E(e, T), E(T, O), E(T, W), E(T, H), E(H, I), de(z, I, null), K = !0, F || (D = re(d, "input", t[18]), F = !0);
    },
    p(Ne, [nt]) {
      const ke = {};
      nt & 64 && (ke.items = Ne[6]), !a && nt & 1 && (a = !0, ke.value = Ne[0], Pr(() => a = !1)), l.$set(ke);
      const fe = {};
      !f && nt & 2 && (f = !0, fe.value = Ne[1], Pr(() => f = !1)), u.$set(fe), nt & 4 && d.value !== Ne[2] && Po(d, Ne[2]);
      const Pe = {};
      nt & 64 && (Pe.items = Ne[6]), !C && nt & 8 && (C = !0, Pe.value = Ne[3], Pr(() => C = !1)), k.$set(Pe);
      const ae = {};
      !M && nt & 16 && (M = !0, ae.value = Ne[4], Pr(() => M = !1)), w.$set(ae);
      const $ = {};
      nt & 128 && ($.items = Ne[7]), !L && nt & 32 && (L = !0, $.value = Ne[5], Pr(() => L = !1)), z.$set($);
    },
    i(Ne) {
      K || (P(l.$$.fragment, Ne), P(u.$$.fragment, Ne), P(k.$$.fragment, Ne), P(w.$$.fragment, Ne), P(z.$$.fragment, Ne), K = !0);
    },
    o(Ne) {
      x(l.$$.fragment, Ne), x(u.$$.fragment, Ne), x(k.$$.fragment, Ne), x(w.$$.fragment, Ne), x(z.$$.fragment, Ne), K = !1;
    },
    d(Ne) {
      Ne && V(e), pe(l), pe(u), pe(k), pe(w), pe(z), F = !1, D();
    }
  };
}
function vz(t, e, n) {
  var L, K, F, D, X, ue;
  let i, r, s, o, l;
  const a = mi("jsoneditor:TransformWizard");
  let { json: c } = e, { queryOptions: u = {} } = e, { onChange: f } = e;
  const h = ["==", "!=", "<", "<=", ">", ">="].map((q) => ({ value: q, label: q })), d = [{ value: "asc", label: "ascending" }, { value: "desc", label: "descending" }];
  let p = (L = u == null ? void 0 : u.filter) != null && L.path ? na(u.filter.path) : null, g = (K = u == null ? void 0 : u.filter) != null && K.relation ? h.find((q) => q.value === u.filter.relation) : null, m = ((F = u == null ? void 0 : u.filter) == null ? void 0 : F.value) || "", _ = (D = u == null ? void 0 : u.sort) != null && D.path ? na(u.sort.path) : null, S = (X = u == null ? void 0 : u.sort) != null && X.direction ? d.find((q) => q.value === u.sort.direction) : null, v = (ue = u == null ? void 0 : u.projection) != null && ue.paths ? u.projection.paths.map(na) : null;
  function k(q) {
    var ee;
    At((ee = u == null ? void 0 : u.filter) == null ? void 0 : ee.path, q) || (a("changeFilterPath", q), n(10, u = Rr(u, ["filter", "path"], q, !0)), f(u));
  }
  function C(q) {
    var ee;
    At((ee = u == null ? void 0 : u.filter) == null ? void 0 : ee.relation, q) || (a("changeFilterRelation", q), n(10, u = Rr(u, ["filter", "relation"], q, !0)), f(u));
  }
  function A(q) {
    var ee;
    At((ee = u == null ? void 0 : u.filter) == null ? void 0 : ee.value, q) || (a("changeFilterValue", q), n(10, u = Rr(u, ["filter", "value"], q, !0)), f(u));
  }
  function w(q) {
    var ee;
    At((ee = u == null ? void 0 : u.sort) == null ? void 0 : ee.path, q) || (a("changeSortPath", q), n(10, u = Rr(u, ["sort", "path"], q, !0)), f(u));
  }
  function M(q) {
    var ee;
    At((ee = u == null ? void 0 : u.sort) == null ? void 0 : ee.direction, q) || (a("changeSortDirection", q), n(10, u = Rr(u, ["sort", "direction"], q, !0)), f(u));
  }
  function N(q) {
    var ee;
    At((ee = u == null ? void 0 : u.projection) == null ? void 0 : ee.paths, q) || (a("changeProjectionPaths", q), n(10, u = Rr(u, ["projection", "paths"], q, !0)), f(u));
  }
  function T(q) {
    p = q, n(0, p);
  }
  function O(q) {
    g = q, n(1, g);
  }
  function W() {
    m = this.value, n(2, m);
  }
  function H(q) {
    _ = q, n(3, _);
  }
  function I(q) {
    S = q, n(4, S);
  }
  function z(q) {
    v = q, n(5, v);
  }
  return t.$$set = (q) => {
    "json" in q && n(11, c = q.json), "queryOptions" in q && n(10, u = q.queryOptions), "onChange" in q && n(12, f = q.onChange);
  }, t.$$.update = () => {
    var q;
    t.$$.dirty & 2048 && n(15, i = Array.isArray(c)), t.$$.dirty & 34816 && n(14, r = i ? $m(c) : []), t.$$.dirty & 34816 && n(13, s = i ? $m(c, !0) : []), t.$$.dirty & 16384 && n(6, o = r.map(na)), t.$$.dirty & 8192 && n(7, l = s ? s.map(na) : []), t.$$.dirty & 1088 && (q = u == null ? void 0 : u.filter) != null && q.path && o.find((ee) => {
      var ie;
      return At(ee.value, (ie = u == null ? void 0 : u.filter) == null ? void 0 : ie.path);
    }), t.$$.dirty & 1 && k((p == null ? void 0 : p.value) || null), t.$$.dirty & 2 && C((g == null ? void 0 : g.value) || null), t.$$.dirty & 4 && A(m || null), t.$$.dirty & 8 && w((_ == null ? void 0 : _.value) || null), t.$$.dirty & 16 && M((S == null ? void 0 : S.value) || null), t.$$.dirty & 32 && N(v ? v.map((ee) => ee.value) : null);
  }, [
    p,
    g,
    m,
    _,
    S,
    v,
    o,
    l,
    h,
    d,
    u,
    c,
    f,
    s,
    r,
    i,
    T,
    O,
    W,
    H,
    I,
    z
  ];
}
class kz extends Ge {
  constructor(e) {
    super(), Ke(this, e, vz, wz, yt, { json: 11, queryOptions: 10, onChange: 12 });
  }
}
const Cz = kz;
function _2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function Sz(t) {
  let e, n;
  return e = new Et({ props: { data: iu } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Ez(t) {
  let e, n;
  return e = new Et({ props: { data: nu } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function y2(t) {
  let e, n, i, r, s = t[5].name + "", o, l, a, c, u, f;
  const h = [Ez, Sz], d = [];
  function p(m, _) {
    return m[5].id === m[0] ? 0 : 1;
  }
  n = p(t), i = d[n] = h[n](t);
  function g() {
    return t[4](t[5]);
  }
  return {
    c() {
      e = j("button"), i.c(), r = Z(), o = _e(s), l = Z(), b(e, "type", "button"), b(e, "class", "jse-query-language svelte-19cxesy"), b(e, "title", a = `Select ${t[5].name} as query language`), Se(e, "selected", t[5].id === t[0]);
    },
    m(m, _) {
      U(m, e, _), d[n].m(e, null), E(e, r), E(e, o), E(e, l), c = !0, u || (f = re(e, "click", g), u = !0);
    },
    p(m, _) {
      t = m;
      let S = n;
      n = p(t), n === S ? d[n].p(t, _) : (Ae(), x(d[S], 1, 1, () => {
        d[S] = null;
      }), Me(), i = d[n], i ? i.p(t, _) : (i = d[n] = h[n](t), i.c()), P(i, 1), i.m(e, r)), (!c || _ & 2) && s !== (s = t[5].name + "") && ze(o, s), (!c || _ & 2 && a !== (a = `Select ${t[5].name} as query language`)) && b(e, "title", a), (!c || _ & 3) && Se(e, "selected", t[5].id === t[0]);
    },
    i(m) {
      c || (P(i), c = !0);
    },
    o(m) {
      x(i), c = !1;
    },
    d(m) {
      m && V(e), d[n].d(), u = !1, f();
    }
  };
}
function Az(t) {
  let e, n, i, r = t[1], s = [];
  for (let l = 0; l < r.length; l += 1)
    s[l] = y2(_2(t, r, l));
  const o = (l) => x(s[l], 1, 1, () => {
    s[l] = null;
  });
  return {
    c() {
      e = j("div"), n = j("div");
      for (let l = 0; l < s.length; l += 1)
        s[l].c();
      b(n, "class", "jse-select-query-language-container svelte-19cxesy"), b(e, "class", "jse-select-query-language svelte-19cxesy");
    },
    m(l, a) {
      U(l, e, a), E(e, n);
      for (let c = 0; c < s.length; c += 1)
        s[c].m(n, null);
      i = !0;
    },
    p(l, [a]) {
      if (a & 7) {
        r = l[1];
        let c;
        for (c = 0; c < r.length; c += 1) {
          const u = _2(l, r, c);
          s[c] ? (s[c].p(u, a), P(s[c], 1)) : (s[c] = y2(u), s[c].c(), P(s[c], 1), s[c].m(n, null));
        }
        for (Ae(), c = r.length; c < s.length; c += 1)
          o(c);
        Me();
      }
    },
    i(l) {
      if (!i) {
        for (let a = 0; a < r.length; a += 1)
          P(s[a]);
        i = !0;
      }
    },
    o(l) {
      s = s.filter(Boolean);
      for (let a = 0; a < s.length; a += 1)
        x(s[a]);
      i = !1;
    },
    d(l) {
      l && V(e), xt(s, l);
    }
  };
}
function Mz(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: s } = e;
  function o(a) {
    n(0, r = a), s(a);
  }
  const l = (a) => o(a.id);
  return t.$$set = (a) => {
    "queryLanguages" in a && n(1, i = a.queryLanguages), "queryLanguageId" in a && n(0, r = a.queryLanguageId), "onChangeQueryLanguage" in a && n(3, s = a.onChangeQueryLanguage);
  }, [
    r,
    i,
    o,
    s,
    l
  ];
}
class Oz extends Ge {
  constructor(e) {
    super(), Ke(this, e, Mz, Az, Nt, {
      queryLanguages: 1,
      queryLanguageId: 0,
      onChangeQueryLanguage: 3
    });
  }
}
const Tz = Oz;
function w2(t) {
  let e, n, i, r, s;
  return n = new Et({ props: { data: $x } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-config svelte-d01h2s"), b(e, "title", "Select a query language");
    },
    m(o, l) {
      U(o, e, l), de(n, e, null), t[6](e), i = !0, r || (s = re(e, "click", t[3]), r = !0);
    },
    p: ye,
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), pe(n), t[6](null), r = !1, s();
    }
  };
}
function Rz(t) {
  let e, n, i, r, s, o, l, a, c, u = t[0].length > 1 && w2(t);
  return o = new Et({ props: { data: oc } }), {
    c() {
      e = j("div"), n = j("div"), n.textContent = "Transform", i = Z(), u && u.c(), r = Z(), s = j("button"), ge(o.$$.fragment), b(n, "class", "jse-title svelte-d01h2s"), b(s, "type", "button"), b(s, "class", "jse-close svelte-d01h2s"), b(e, "class", "jse-header svelte-d01h2s");
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(e, i), u && u.m(e, null), E(e, r), E(e, s), de(o, s, null), l = !0, a || (c = re(s, "click", t[2]), a = !0);
    },
    p(f, [h]) {
      f[0].length > 1 ? u ? (u.p(f, h), h & 1 && P(u, 1)) : (u = w2(f), u.c(), P(u, 1), u.m(e, r)) : u && (Ae(), x(u, 1, 1, () => {
        u = null;
      }), Me());
    },
    i(f) {
      l || (P(u), P(o.$$.fragment, f), l = !0);
    },
    o(f) {
      x(u), x(o.$$.fragment, f), l = !1;
    },
    d(f) {
      f && V(e), u && u.d(), pe(o), a = !1, c();
    }
  };
}
function Pz(t, e, n) {
  let { queryLanguages: i } = e, { queryLanguageId: r } = e, { onChangeQueryLanguage: s } = e, o, l;
  const { close: a } = gi("simple-modal"), { openAbsolutePopup: c, closeAbsolutePopup: u } = gi("absolute-popup");
  function f() {
    l = c(Tz, {
      queryLanguages: i,
      queryLanguageId: r,
      onChangeQueryLanguage: (p) => {
        u(l), s(p);
      }
    }, {
      position: "bottom",
      offsetTop: -2,
      offsetLeft: 0,
      anchor: o,
      closeOnOuterClick: !0
    });
  }
  function h(d) {
    _t[d ? "unshift" : "push"](() => {
      o = d, n(1, o);
    });
  }
  return t.$$set = (d) => {
    "queryLanguages" in d && n(0, i = d.queryLanguages), "queryLanguageId" in d && n(4, r = d.queryLanguageId), "onChangeQueryLanguage" in d && n(5, s = d.onChangeQueryLanguage);
  }, [
    i,
    o,
    a,
    f,
    r,
    s,
    h
  ];
}
class Iz extends Ge {
  constructor(e) {
    super(), Ke(this, e, Pz, Rz, yt, {
      queryLanguages: 0,
      queryLanguageId: 4,
      onChangeQueryLanguage: 5
    });
  }
}
const Dz = Iz, Bg = mi("jsoneditor:AutoScrollHandler");
function Nz(t) {
  Bg("createAutoScrollHandler", t);
  let e, n;
  function i(c) {
    return c < 20 ? hR : c < 50 ? dR : pR;
  }
  function r() {
    if (t) {
      const c = e * (gy / 1e3);
      t.scrollTop += c;
    }
  }
  function s(c) {
    (!n || c !== e) && (o(), Bg("startAutoScroll", c), e = c, n = setInterval(r, gy));
  }
  function o() {
    n && (Bg("stopAutoScroll"), clearInterval(n), n = void 0, e = void 0);
  }
  function l(c) {
    if (t) {
      const u = c.clientY, { top: f, bottom: h } = t.getBoundingClientRect();
      if (u < f) {
        const d = i(f - u);
        s(-d);
      } else if (u > h) {
        const d = i(u - h);
        s(d);
      } else
        o();
    }
  }
  function a() {
    o();
  }
  return {
    onDrag: l,
    onDragEnd: a
  };
}
const Lz = (t, e, n, i) => (t /= i / 2, t < 1 ? n / 2 * t * t + e : (t--, -n / 2 * (t * (t - 2) - 1) + e)), U6 = () => {
  let t, e, n, i, r, s, o, l, a, c, u, f, h, d;
  function p() {
    return t.scrollY || t.pageYOffset || t.scrollTop;
  }
  function g(k) {
    const C = k.getBoundingClientRect().top, A = t.getBoundingClientRect ? t.getBoundingClientRect().top : 0;
    return C - A + n;
  }
  function m(k) {
    t.scrollTo ? t.scrollTo(t.scrollLeft, k) : t.scrollTop = k;
  }
  function _(k) {
    c || (c = k), u = k - c, f = s(u, n, l, a), m(f), d = !0, u < a ? requestAnimationFrame(_) : S();
  }
  function S() {
    m(n + l), e && o && (e.setAttribute("tabindex", "-1"), e.focus()), typeof h == "function" && h(), c = !1, d = !1;
  }
  function v(k, C = {}) {
    switch (a = C.duration || 1e3, r = C.offset || 0, h = C.callback, s = C.easing || Lz, o = C.a11y || !1, typeof C.container) {
      case "object":
        t = C.container;
        break;
      case "string":
        t = document.querySelector(C.container);
        break;
      default:
        t = window;
    }
    switch (n = p(), typeof k) {
      case "number":
        e = void 0, o = !1, i = n + k;
        break;
      case "object":
        e = k, i = g(e);
        break;
      case "string":
        e = document.querySelector(k), i = g(e);
        break;
    }
    switch (l = i - n + r, typeof C.duration) {
      case "number":
        a = C.duration;
        break;
      case "function":
        a = C.duration(l);
        break;
    }
    d ? c = !1 : requestAnimationFrame(_);
  }
  return v;
}, jz = 1e3, Af = mi("jsoneditor:History");
function H6(t = {}) {
  const e = t.maxItems || jz;
  let n = [], i = 0;
  function r() {
    return i < n.length;
  }
  function s() {
    return i > 0;
  }
  function o() {
    return {
      canUndo: r(),
      canRedo: s(),
      length: n.length
    };
  }
  function l() {
    t.onChange && t.onChange(o());
  }
  function a(h) {
    Af("add", h), n = [h].concat(n.slice(i)).slice(0, e), i = 0, l();
  }
  function c() {
    Af("clear"), n = [], i = 0, l();
  }
  function u() {
    if (r()) {
      const h = n[i];
      return i += 1, Af("undo", h), l(), h;
    }
  }
  function f() {
    if (s())
      return i -= 1, Af("redo", n[i]), l(), n[i];
  }
  return {
    add: a,
    clear: c,
    getState: o,
    undo: u,
    redo: f
  };
}
function ca(t, e) {
  const n = Date.now(), i = t(), r = Date.now();
  return e(r - n), i;
}
const ra = mi("validation");
function Bz(t) {
  const e = {};
  return t.forEach((n) => {
    e[xe(n.path)] = n;
  }), t.forEach((n) => {
    let i = n.path;
    for (; i.length > 0; ) {
      i = St(i);
      const r = xe(i);
      r in e || (e[r] = {
        isChildError: !0,
        path: i,
        message: "Contains invalid data"
      });
    }
  }), e;
}
function W6(t, e, n, i) {
  if (ra("validateJSON"), !e)
    return [];
  if (n !== i) {
    const r = i.parse(n.stringify(t));
    return e(r);
  } else
    return e(t);
}
function xz(t, e, n, i) {
  if (ra("validateText"), t.length > gR)
    return {
      validationErrors: [{
        path: [],
        message: "Validation turned off: the document is too large",
        severity: Io.info
      }]
    };
  if (t.length === 0)
    return {
      validationErrors: []
    };
  try {
    const r = ca(() => n.parse(t), (l) => ra(`validate: parsed json in ${l} ms`));
    if (!e)
      return {
        validationErrors: []
      };
    const s = n === i ? r : ca(() => i.parse(t), (l) => ra(`validate: parsed json with the validationParser in ${l} ms`));
    return { validationErrors: ca(() => e(s), (l) => ra(`validate: validated json in ${l} ms`)) };
  } catch (r) {
    const s = ca(() => Fz(t, n), (l) => ra(`validate: checked whether repairable in ${l} ms`));
    return {
      parseError: vp(t, r.message || r.toString()),
      isRepairable: s
    };
  }
}
function Fz(t, e) {
  if (t.length > mR)
    return !1;
  try {
    return e.parse(us(t)), !0;
  } catch {
    return !1;
  }
}
const Mf = mi("jsoneditor:FocusTracker");
function ob({ onMount: t, onDestroy: e, getWindow: n, hasFocus: i, onFocus: r, onBlur: s }) {
  let o, l = !1;
  function a() {
    const u = i();
    u && (clearTimeout(o), l || (Mf("focus"), r(), l = u));
  }
  function c() {
    l && (clearTimeout(o), o = setTimeout(() => {
      Mf("blur"), l = !1, s();
    }));
  }
  t(() => {
    Mf("mount FocusTracker");
    const u = n();
    u && (u.addEventListener("focusin", a, !0), u.addEventListener("focusout", c, !0));
  }), e(() => {
    Mf("destroy FocusTracker");
    const u = n();
    u && (u.removeEventListener("focusin", a, !0), u.removeEventListener("focusout", c, !0));
  });
}
function v2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function k2(t) {
  let e, n;
  return e = new Et({ props: { data: t[1] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 2 && (s.data = i[1]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function C2(t) {
  let e, n;
  return e = new Et({ props: { data: t[8].icon } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.data = i[8].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function S2(t) {
  let e, n, i = t[8].text + "", r, s, o, l, a, c, u, f = t[8].icon && C2(t);
  function h() {
    return t[6](t[8]);
  }
  function d() {
    return t[7](t[8]);
  }
  return {
    c() {
      e = j("button"), f && f.c(), n = Z(), r = _e(i), s = Z(), b(e, "type", "button"), b(e, "class", "jse-button jse-action jse-primary svelte-kvi5ls"), b(e, "title", o = t[8].title), e.disabled = l = t[8].disabled;
    },
    m(p, g) {
      U(p, e, g), f && f.m(e, null), E(e, n), E(e, r), E(e, s), a = !0, c || (u = [
        re(e, "click", h),
        re(e, "mousedown", d)
      ], c = !0);
    },
    p(p, g) {
      t = p, t[8].icon ? f ? (f.p(t, g), g & 8 && P(f, 1)) : (f = C2(t), f.c(), P(f, 1), f.m(e, n)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), (!a || g & 8) && i !== (i = t[8].text + "") && ze(r, i), (!a || g & 8 && o !== (o = t[8].title)) && b(e, "title", o), (!a || g & 8 && l !== (l = t[8].disabled)) && (e.disabled = l);
    },
    i(p) {
      a || (P(f), a = !0);
    },
    o(p) {
      x(f), a = !1;
    },
    d(p) {
      p && V(e), f && f.d(), c = !1, ct(u);
    }
  };
}
function zz(t) {
  let e, n, i, r, s, o, l, a, c, u, f = t[1] && k2(t), h = t[3], d = [];
  for (let g = 0; g < h.length; g += 1)
    d[g] = S2(v2(t, h, g));
  const p = (g) => x(d[g], 1, 1, () => {
    d[g] = null;
  });
  return {
    c() {
      e = j("div"), n = j("div"), f && f.c(), i = Z(), r = _e(t[2]), s = Z(), o = j("div");
      for (let g = 0; g < d.length; g += 1)
        d[g].c();
      b(n, "class", "jse-text svelte-kvi5ls"), Se(n, "jse-clickable", !!t[4]), b(o, "class", "jse-actions svelte-kvi5ls"), b(e, "class", l = "jse-message jse-" + t[0] + " svelte-kvi5ls");
    },
    m(g, m) {
      U(g, e, m), E(e, n), f && f.m(n, null), E(n, i), E(n, r), E(e, s), E(e, o);
      for (let _ = 0; _ < d.length; _ += 1)
        d[_].m(o, null);
      a = !0, c || (u = re(n, "click", t[5]), c = !0);
    },
    p(g, [m]) {
      if (g[1] ? f ? (f.p(g, m), m & 2 && P(f, 1)) : (f = k2(g), f.c(), P(f, 1), f.m(n, i)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), (!a || m & 4) && ze(r, g[2]), (!a || m & 16) && Se(n, "jse-clickable", !!g[4]), m & 8) {
        h = g[3];
        let _;
        for (_ = 0; _ < h.length; _ += 1) {
          const S = v2(g, h, _);
          d[_] ? (d[_].p(S, m), P(d[_], 1)) : (d[_] = S2(S), d[_].c(), P(d[_], 1), d[_].m(o, null));
        }
        for (Ae(), _ = h.length; _ < d.length; _ += 1)
          p(_);
        Me();
      }
      (!a || m & 1 && l !== (l = "jse-message jse-" + g[0] + " svelte-kvi5ls")) && b(e, "class", l);
    },
    i(g) {
      if (!a) {
        P(f);
        for (let m = 0; m < h.length; m += 1)
          P(d[m]);
        a = !0;
      }
    },
    o(g) {
      x(f), d = d.filter(Boolean);
      for (let m = 0; m < d.length; m += 1)
        x(d[m]);
      a = !1;
    },
    d(g) {
      g && V(e), f && f.d(), xt(d, g), c = !1, u();
    }
  };
}
function Vz(t, e, n) {
  let { type: i = "success" } = e, { icon: r = void 0 } = e, { message: s = void 0 } = e, { actions: o = [] } = e, { onClick: l = void 0 } = e;
  function a() {
    l && l();
  }
  const c = (f) => {
    f.onClick && f.onClick();
  }, u = (f) => {
    f.onMouseDown && f.onMouseDown();
  };
  return t.$$set = (f) => {
    "type" in f && n(0, i = f.type), "icon" in f && n(1, r = f.icon), "message" in f && n(2, s = f.message), "actions" in f && n(3, o = f.actions), "onClick" in f && n(4, l = f.onClick);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u
  ];
}
class Uz extends Ge {
  constructor(e) {
    super(), Ke(this, e, Vz, zz, yt, {
      type: 0,
      icon: 1,
      message: 2,
      actions: 3,
      onClick: 4
    });
  }
}
const Ns = Uz;
function E2(t, e, n) {
  const i = t.slice();
  return i[7] = e[n], i[9] = n, i;
}
function A2(t) {
  let e, n, i, r;
  const s = [Wz, Hz], o = [];
  function l(a, c) {
    return a[2] || a[3] === 1 ? 0 : 1;
  }
  return n = l(t), i = o[n] = s[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "class", "jse-validation-errors-overview svelte-1oe8e8r");
    },
    m(a, c) {
      U(a, e, c), o[n].m(e, null), r = !0;
    },
    p(a, c) {
      let u = n;
      n = l(a), n === u ? o[n].p(a, c) : (Ae(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Me(), i = o[n], i ? i.p(a, c) : (i = o[n] = s[n](a), i.c()), P(i, 1), i.m(e, null));
    },
    i(a) {
      r || (P(i), r = !0);
    },
    o(a) {
      x(i), r = !1;
    },
    d(a) {
      a && V(e), o[n].d();
    }
  };
}
function Hz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p;
  return s = new Et({ props: { data: ql } }), f = new Et({ props: { data: I6 } }), {
    c() {
      e = j("table"), n = j("tbody"), i = j("tr"), r = j("td"), ge(s.$$.fragment), o = Z(), l = j("td"), a = _e(t[3]), c = _e(` validation errors
              `), u = j("div"), ge(f.$$.fragment), b(r, "class", "jse-validation-error-icon svelte-1oe8e8r"), b(u, "class", "jse-validation-errors-expand svelte-1oe8e8r"), b(l, "class", "svelte-1oe8e8r"), b(i, "class", "jse-validation-error svelte-1oe8e8r"), b(e, "class", "svelte-1oe8e8r");
    },
    m(g, m) {
      U(g, e, m), E(e, n), E(n, i), E(i, r), de(s, r, null), E(i, o), E(i, l), E(l, a), E(l, c), E(l, u), de(f, u, null), h = !0, d || (p = re(i, "click", t[5]), d = !0);
    },
    p(g, m) {
      (!h || m & 8) && ze(a, g[3]);
    },
    i(g) {
      h || (P(s.$$.fragment, g), P(f.$$.fragment, g), h = !0);
    },
    o(g) {
      x(s.$$.fragment, g), x(f.$$.fragment, g), h = !1;
    },
    d(g) {
      g && V(e), pe(s), pe(f), d = !1, p();
    }
  };
}
function Wz(t) {
  let e, n, i, r, s = Jh(t[0], aa), o = [];
  for (let c = 0; c < s.length; c += 1)
    o[c] = O2(E2(t, s, c));
  const l = (c) => x(o[c], 1, 1, () => {
    o[c] = null;
  });
  let a = t[3] > aa && T2(t);
  return {
    c() {
      e = j("table"), n = j("tbody");
      for (let c = 0; c < o.length; c += 1)
        o[c].c();
      i = Z(), a && a.c(), b(e, "class", "svelte-1oe8e8r");
    },
    m(c, u) {
      U(c, e, u), E(e, n);
      for (let f = 0; f < o.length; f += 1)
        o[f].m(n, null);
      E(n, i), a && a.m(n, null), r = !0;
    },
    p(c, u) {
      if (u & 19) {
        s = Jh(c[0], aa);
        let f;
        for (f = 0; f < s.length; f += 1) {
          const h = E2(c, s, f);
          o[f] ? (o[f].p(h, u), P(o[f], 1)) : (o[f] = O2(h), o[f].c(), P(o[f], 1), o[f].m(n, i));
        }
        for (Ae(), f = s.length; f < o.length; f += 1)
          l(f);
        Me();
      }
      c[3] > aa ? a ? a.p(c, u) : (a = T2(c), a.c(), a.m(n, null)) : a && (a.d(1), a = null);
    },
    i(c) {
      if (!r) {
        for (let u = 0; u < s.length; u += 1)
          P(o[u]);
        r = !0;
      }
    },
    o(c) {
      o = o.filter(Boolean);
      for (let u = 0; u < o.length; u += 1)
        x(o[u]);
      r = !1;
    },
    d(c) {
      c && V(e), xt(o, c), a && a.d();
    }
  };
}
function M2(t) {
  let e, n, i, r, s;
  return n = new Et({ props: { data: nF } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-validation-errors-collapse svelte-1oe8e8r"), b(e, "title", "Collapse validation errors");
    },
    m(o, l) {
      U(o, e, l), de(n, e, null), i = !0, r || (s = re(e, "click", Je(t[4])), r = !0);
    },
    p: ye,
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), pe(n), r = !1, s();
    }
  };
}
function O2(t) {
  let e, n, i, r, s, o = wr(Ji(t[7].path)) + "", l, a, c, u = t[7].message + "", f, h, d, p, g, m;
  i = new Et({ props: { data: ql } });
  let _ = t[9] === 0 && t[0].length > 1 && M2(t);
  function S() {
    return t[6](t[7]);
  }
  return {
    c() {
      e = j("tr"), n = j("td"), ge(i.$$.fragment), r = Z(), s = j("td"), l = _e(o), a = Z(), c = j("td"), f = _e(u), h = Z(), d = j("td"), _ && _.c(), b(n, "class", "jse-validation-error-icon svelte-1oe8e8r"), b(s, "class", "svelte-1oe8e8r"), b(c, "class", "svelte-1oe8e8r"), b(d, "class", "jse-validation-error-action svelte-1oe8e8r"), b(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(v, k) {
      U(v, e, k), E(e, n), de(i, n, null), E(e, r), E(e, s), E(s, l), E(e, a), E(e, c), E(c, f), E(e, h), E(e, d), _ && _.m(d, null), p = !0, g || (m = re(e, "click", S), g = !0);
    },
    p(v, k) {
      t = v, (!p || k & 1) && o !== (o = wr(Ji(t[7].path)) + "") && ze(l, o), (!p || k & 1) && u !== (u = t[7].message + "") && ze(f, u), t[9] === 0 && t[0].length > 1 ? _ ? (_.p(t, k), k & 1 && P(_, 1)) : (_ = M2(t), _.c(), P(_, 1), _.m(d, null)) : _ && (Ae(), x(_, 1, 1, () => {
        _ = null;
      }), Me());
    },
    i(v) {
      p || (P(i.$$.fragment, v), P(_), p = !0);
    },
    o(v) {
      x(i.$$.fragment, v), x(_), p = !1;
    },
    d(v) {
      v && V(e), pe(i), _ && _.d(), g = !1, m();
    }
  };
}
function T2(t) {
  let e, n, i, r, s, o, l, a = t[3] - aa + "", c, u, f, h;
  return {
    c() {
      e = j("tr"), n = j("td"), i = Z(), r = j("td"), s = Z(), o = j("td"), l = _e("(and "), c = _e(a), u = _e(" more errors)"), f = Z(), h = j("td"), b(n, "class", "svelte-1oe8e8r"), b(r, "class", "svelte-1oe8e8r"), b(o, "class", "svelte-1oe8e8r"), b(h, "class", "svelte-1oe8e8r"), b(e, "class", "jse-validation-error svelte-1oe8e8r");
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(e, i), E(e, r), E(e, s), E(e, o), E(o, l), E(o, c), E(o, u), E(e, f), E(e, h);
    },
    p(d, p) {
      p & 8 && a !== (a = d[3] - aa + "") && ze(c, a);
    },
    d(d) {
      d && V(e);
    }
  };
}
function qz(t) {
  let e = !Ot(t[0]), n, i, r = e && A2(t);
  return {
    c() {
      r && r.c(), n = rt();
    },
    m(s, o) {
      r && r.m(s, o), U(s, n, o), i = !0;
    },
    p(s, [o]) {
      o & 1 && (e = !Ot(s[0])), e ? r ? (r.p(s, o), o & 1 && P(r, 1)) : (r = A2(s), r.c(), P(r, 1), r.m(n.parentNode, n)) : r && (Ae(), x(r, 1, 1, () => {
        r = null;
      }), Me());
    },
    i(s) {
      i || (P(r), i = !0);
    },
    o(s) {
      x(r), i = !1;
    },
    d(s) {
      r && r.d(s), s && V(n);
    }
  };
}
function Jz(t, e, n) {
  let i, { validationErrors: r } = e, { selectError: s } = e, o = !0;
  function l() {
    n(2, o = !1);
  }
  function a() {
    n(2, o = !0);
  }
  const c = (u) => {
    setTimeout(() => s(u));
  };
  return t.$$set = (u) => {
    "validationErrors" in u && n(0, r = u.validationErrors), "selectError" in u && n(1, s = u.selectError);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(3, i = r.length);
  }, [
    r,
    s,
    o,
    i,
    l,
    a,
    c
  ];
}
class Kz extends Ge {
  constructor(e) {
    super(), Ke(this, e, Jz, qz, yt, { validationErrors: 0, selectError: 1 });
  }
}
const lb = Kz;
function Gz(t) {
  let e, n, i, r, s, o, l, a, c;
  return o = new Et({ props: { data: oc } }), {
    c() {
      e = j("div"), n = j("div"), i = _e(t[0]), r = Z(), s = j("button"), ge(o.$$.fragment), b(n, "class", "jse-title svelte-d01h2s"), b(s, "type", "button"), b(s, "class", "jse-close svelte-d01h2s"), b(e, "class", "jse-header svelte-d01h2s");
    },
    m(u, f) {
      U(u, e, f), E(e, n), E(n, i), E(e, r), E(e, s), de(o, s, null), l = !0, a || (c = re(s, "click", t[3]), a = !0);
    },
    p(u, [f]) {
      (!l || f & 1) && ze(i, u[0]);
    },
    i(u) {
      l || (P(o.$$.fragment, u), l = !0);
    },
    o(u) {
      x(o.$$.fragment, u), l = !1;
    },
    d(u) {
      u && V(e), pe(o), a = !1, c();
    }
  };
}
function Yz(t, e, n) {
  let { title: i = "Modal" } = e, { onClose: r = void 0 } = e;
  const { close: s } = gi("simple-modal"), o = () => {
    r ? r() : s();
  };
  return t.$$set = (l) => {
    "title" in l && n(0, i = l.title), "onClose" in l && n(1, r = l.onClose);
  }, [i, r, s, o];
}
class Xz extends Ge {
  constructor(e) {
    super(), Ke(this, e, Yz, Gz, yt, { title: 0, onClose: 1 });
  }
}
const ab = Xz;
function Qz(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M;
  return n = new ab({ props: { title: "Copying and pasting" } }), {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), r = j("div"), s = j("div"), s.textContent = "These actions are unavailable via the menu. Please use:", o = Z(), l = j("div"), a = j("div"), c = j("div"), c.textContent = `${t[1]}+C`, u = _e(`
        for copy`), f = Z(), h = j("div"), d = j("div"), d.textContent = `${t[1]}+X`, p = _e(`
        for cut`), g = Z(), m = j("div"), _ = j("div"), _.textContent = `${t[1]}+V`, S = _e(`
        for paste`), v = Z(), k = j("div"), C = j("button"), C.textContent = "Close", b(c, "class", "jse-key svelte-1olothd"), b(a, "class", "jse-shortcut"), b(d, "class", "jse-key svelte-1olothd"), b(h, "class", "jse-shortcut"), b(_, "class", "jse-key svelte-1olothd"), b(m, "class", "jse-shortcut"), b(l, "class", "jse-shortcuts svelte-1olothd"), b(C, "type", "button"), b(C, "class", "jse-primary svelte-1olothd"), b(k, "class", "jse-actions svelte-1olothd"), b(r, "class", "jse-modal-contents svelte-1olothd"), b(e, "class", "jse-modal jse-copy-paste svelte-1olothd");
    },
    m(N, T) {
      U(N, e, T), de(n, e, null), E(e, i), E(e, r), E(r, s), E(r, o), E(r, l), E(l, a), E(a, c), E(a, u), E(l, f), E(l, h), E(h, d), E(h, p), E(l, g), E(l, m), E(m, _), E(m, S), E(r, v), E(r, k), E(k, C), A = !0, w || (M = re(C, "click", t[0]), w = !0);
    },
    p: ye,
    i(N) {
      A || (P(n.$$.fragment, N), A = !0);
    },
    o(N) {
      x(n.$$.fragment, N), A = !1;
    },
    d(N) {
      N && V(e), pe(n), w = !1, M();
    }
  };
}
function Zz(t) {
  const { close: e } = gi("simple-modal");
  return [e, s6 ? "âŒ˜" : "Ctrl"];
}
class $z extends Ge {
  constructor(e) {
    super(), Ke(this, e, Zz, Qz, yt, {});
  }
}
const q6 = $z;
function eV(t) {
  return J6(t);
}
function J6(t) {
  return t && (t.type === "space" || t.space === !0);
}
function Pp(t) {
  return t && (t.type === "separator" || t.separator === !0);
}
function tV(t) {
  return t && t.type === "label" && typeof t.text == "string";
}
function Ju(t) {
  return t && typeof t.onClick == "function";
}
function cb(t) {
  return t && t.type === "dropdown-button" && Ju(t.main) && Array.isArray(t.items);
}
function nV(t) {
  return t && t.type === "row" && Array.isArray(t.items);
}
function iV(t) {
  return t && t.type === "column" && Array.isArray(t.items);
}
function R2(t) {
  return typeof t.parseError == "object" && t.parseError !== null;
}
function rV(t) {
  return Array.isArray(t.validationErrors);
}
const sV = (t) => ({}), P2 = (t) => ({});
function I2(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
const oV = (t) => ({}), D2 = (t) => ({});
function lV(t) {
  let e = B2(t[3]) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = B2(i[3]) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function aV(t) {
  let e, n, i, r, s, o, l, a, c = t[3].icon && N2(t), u = t[3].text && L2(t);
  return {
    c() {
      e = j("button"), c && c.c(), n = Z(), u && u.c(), b(e, "type", "button"), b(e, "class", i = "jse-button " + t[3].className + " svelte-497ud4"), b(e, "title", r = t[3].title), e.disabled = s = t[3].disabled || !1;
    },
    m(f, h) {
      U(f, e, h), c && c.m(e, null), E(e, n), u && u.m(e, null), o = !0, l || (a = re(e, "click", function() {
        hi(t[3].onClick) && t[3].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(f, h) {
      t = f, t[3].icon ? c ? (c.p(t, h), h & 1 && P(c, 1)) : (c = N2(t), c.c(), P(c, 1), c.m(e, n)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me()), t[3].text ? u ? u.p(t, h) : (u = L2(t), u.c(), u.m(e, null)) : u && (u.d(1), u = null), (!o || h & 1 && i !== (i = "jse-button " + t[3].className + " svelte-497ud4")) && b(e, "class", i), (!o || h & 1 && r !== (r = t[3].title)) && b(e, "title", r), (!o || h & 1 && s !== (s = t[3].disabled || !1)) && (e.disabled = s);
    },
    i(f) {
      o || (P(c), o = !0);
    },
    o(f) {
      x(c), o = !1;
    },
    d(f) {
      f && V(e), c && c.d(), u && u.d(), l = !1, a();
    }
  };
}
function cV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-space svelte-497ud4");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function uV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-497ud4");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function N2(t) {
  let e, n;
  return e = new Et({ props: { data: t[3].icon } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[3].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function L2(t) {
  let e = t[3].text + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[3].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function j2(t) {
  let e, n, i, r, s, o, l;
  const a = [uV, cV, aV, lV], c = [];
  function u(f, h) {
    return h & 1 && (e = null), h & 1 && (n = null), h & 1 && (i = null), e == null && (e = !!Pp(f[3])), e ? 0 : (n == null && (n = !!J6(f[3])), n ? 1 : (i == null && (i = !!Ju(f[3])), i ? 2 : 3));
  }
  return r = u(t, -1), s = c[r] = a[r](t), {
    c() {
      s.c(), o = rt();
    },
    m(f, h) {
      c[r].m(f, h), U(f, o, h), l = !0;
    },
    p(f, h) {
      let d = r;
      r = u(f, h), r === d ? c[r].p(f, h) : (Ae(), x(c[d], 1, 1, () => {
        c[d] = null;
      }), Me(), s = c[r], s ? s.p(f, h) : (s = c[r] = a[r](f), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(f) {
      l || (P(s), l = !0);
    },
    o(f) {
      x(s), l = !1;
    },
    d(f) {
      c[r].d(f), f && V(o);
    }
  };
}
function fV(t) {
  let e, n, i, r;
  const s = t[2].left, o = zn(s, t, t[1], D2);
  let l = t[0], a = [];
  for (let h = 0; h < l.length; h += 1)
    a[h] = j2(I2(t, l, h));
  const c = (h) => x(a[h], 1, 1, () => {
    a[h] = null;
  }), u = t[2].right, f = zn(u, t, t[1], P2);
  return {
    c() {
      e = j("div"), o && o.c(), n = Z();
      for (let h = 0; h < a.length; h += 1)
        a[h].c();
      i = Z(), f && f.c(), b(e, "class", "jse-menu svelte-497ud4");
    },
    m(h, d) {
      U(h, e, d), o && o.m(e, null), E(e, n);
      for (let p = 0; p < a.length; p += 1)
        a[p].m(e, null);
      E(e, i), f && f.m(e, null), r = !0;
    },
    p(h, [d]) {
      if (o && o.p && (!r || d & 2) && Un(
        o,
        s,
        h,
        h[1],
        r ? Vn(s, h[1], d, oV) : Hn(h[1]),
        D2
      ), d & 1) {
        l = h[0];
        let p;
        for (p = 0; p < l.length; p += 1) {
          const g = I2(h, l, p);
          a[p] ? (a[p].p(g, d), P(a[p], 1)) : (a[p] = j2(g), a[p].c(), P(a[p], 1), a[p].m(e, i));
        }
        for (Ae(), p = l.length; p < a.length; p += 1)
          c(p);
        Me();
      }
      f && f.p && (!r || d & 2) && Un(
        f,
        u,
        h,
        h[1],
        r ? Vn(u, h[1], d, sV) : Hn(h[1]),
        P2
      );
    },
    i(h) {
      if (!r) {
        P(o, h);
        for (let d = 0; d < l.length; d += 1)
          P(a[d]);
        P(f, h), r = !0;
      }
    },
    o(h) {
      x(o, h), a = a.filter(Boolean);
      for (let d = 0; d < a.length; d += 1)
        x(a[d]);
      x(f, h), r = !1;
    },
    d(h) {
      h && V(e), o && o.d(h), xt(a, h), f && f.d(h);
    }
  };
}
function B2(t) {
  return console.error("Unknown type of menu item", t), "???";
}
function hV(t, e, n) {
  let { $$slots: i = {}, $$scope: r } = e, { items: s = [] } = e;
  return t.$$set = (o) => {
    "items" in o && n(0, s = o.items), "$$scope" in o && n(1, r = o.$$scope);
  }, [s, r, i];
}
class dV extends Ge {
  constructor(e) {
    super(), Ke(this, e, hV, fV, yt, { items: 0 });
  }
}
const Ip = dV;
function pV(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "Repair invalid JSON, then click apply", b(e, "slot", "left"), b(e, "class", "jse-info svelte-gz09vf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function gV(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "success",
      message: "JSON is valid now and can be parsed.",
      actions: t[6]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 64 && (s.actions = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function mV(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "error",
      icon: ql,
      message: `Cannot parse JSON: ${t[2].message}`,
      actions: t[7]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 4 && (s.message = `Cannot parse JSON: ${i[2].message}`), r & 128 && (s.actions = i[7]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function bV(t) {
  let e, n, i, r, s, o, l, a, c, u;
  n = new Ip({
    props: {
      items: t[5],
      $$slots: { left: [pV] },
      $$scope: { ctx: t }
    }
  });
  const f = [mV, gV], h = [];
  function d(p, g) {
    return p[2] ? 0 : 1;
  }
  return r = d(t), s = h[r] = f[r](t), {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), s.c(), o = Z(), l = j("textarea"), l.value = t[0], l.readOnly = t[1], b(l, "class", "jse-json-text svelte-gz09vf"), b(l, "autocomplete", "off"), b(l, "autocapitalize", "off"), b(l, "spellcheck", "false"), b(e, "class", "jse-json-repair-component svelte-gz09vf");
    },
    m(p, g) {
      U(p, e, g), de(n, e, null), E(e, i), h[r].m(e, null), E(e, o), E(e, l), t[17](l), t[18](e), a = !0, c || (u = re(l, "input", t[8]), c = !0);
    },
    p(p, [g]) {
      const m = {};
      g & 32 && (m.items = p[5]), g & 33554432 && (m.$$scope = { dirty: g, ctx: p }), n.$set(m);
      let _ = r;
      r = d(p), r === _ ? h[r].p(p, g) : (Ae(), x(h[_], 1, 1, () => {
        h[_] = null;
      }), Me(), s = h[r], s ? s.p(p, g) : (s = h[r] = f[r](p), s.c()), P(s, 1), s.m(e, o)), (!a || g & 1) && (l.value = p[0]), (!a || g & 2) && (l.readOnly = p[1]);
    },
    i(p) {
      a || (P(n.$$.fragment, p), P(s), a = !0);
    },
    o(p) {
      x(n.$$.fragment, p), x(s), a = !1;
    },
    d(p) {
      p && V(e), pe(n), h[r].d(), t[17](null), t[18](null), c = !1, u();
    }
  };
}
function _V(t, e, n) {
  let i, r, s, o, l, a, { text: c = "" } = e, { readOnly: u = !1 } = e, { onParse: f } = e, { onRepair: h } = e, { onChange: d = null } = e, { onApply: p } = e, { onCancel: g } = e;
  const m = mi("jsoneditor:JSONRepair");
  let _, S;
  function v(W) {
    try {
      return f(W), null;
    } catch (H) {
      return vp(W, H.message);
    }
  }
  function k(W) {
    try {
      return h(W), !0;
    } catch {
      return !1;
    }
  }
  function C() {
    S && i && i.position != null && (S.setSelectionRange(i.position, i.position), setTimeout(() => {
      S.focus();
    }));
  }
  function A(W) {
    m("handleChange");
    const H = W.target.value;
    c !== H && (n(0, c = H), d && d(c));
  }
  function w() {
    p(c);
  }
  function M() {
    try {
      n(0, c = h(c)), d && d(c);
    } catch {
    }
  }
  let N;
  function T(W) {
    _t[W ? "unshift" : "push"](() => {
      S = W, n(4, S);
    });
  }
  function O(W) {
    _t[W ? "unshift" : "push"](() => {
      _ = W, n(3, _);
    });
  }
  return t.$$set = (W) => {
    "text" in W && n(0, c = W.text), "readOnly" in W && n(1, u = W.readOnly), "onParse" in W && n(9, f = W.onParse), "onRepair" in W && n(10, h = W.onRepair), "onChange" in W && n(11, d = W.onChange), "onApply" in W && n(12, p = W.onApply), "onCancel" in W && n(13, g = W.onCancel);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(2, i = v(c)), t.$$.dirty & 1 && n(16, r = k(c)), t.$$.dirty & 4 && m("error", i), t.$$.dirty & 8192 && n(5, N = [
      { type: "space" },
      {
        type: "button",
        icon: oc,
        title: "Cancel repair",
        className: "jse-cancel",
        onClick: g
      }
    ]), t.$$.dirty & 114688 && n(7, l = r ? [s, o] : [s]), t.$$.dirty & 2 && n(6, a = [
      {
        icon: ou,
        text: "Apply",
        title: "Apply fixed JSON",
        disabled: u,
        onClick: w
      }
    ]);
  }, n(14, s = {
    icon: iF,
    text: "Show me",
    title: "Scroll to the error location",
    onClick: C
  }), n(15, o = {
    icon: Ap,
    text: "Auto repair",
    title: "Automatically repair JSON",
    onClick: M
  }), [
    c,
    u,
    i,
    _,
    S,
    N,
    a,
    l,
    A,
    f,
    h,
    d,
    p,
    g,
    s,
    o,
    r,
    T,
    O
  ];
}
class yV extends Ge {
  constructor(e) {
    super(), Ke(this, e, _V, bV, yt, {
      text: 0,
      readOnly: 1,
      onParse: 9,
      onRepair: 10,
      onChange: 11,
      onApply: 12,
      onCancel: 13
    });
  }
}
const wV = yV;
function vV(t) {
  let e, n, i, r;
  function s(l) {
    t[6](l);
  }
  let o = {
    onParse: t[1],
    onRepair: t[2],
    onApply: t[3],
    onCancel: t[4]
  };
  return t[0] !== void 0 && (o.text = t[0]), n = new wV({ props: o }), _t.push(() => Ir(n, "text", s, t[0])), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-modal jse-repair svelte-1ffm3pm");
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), r = !0;
    },
    p(l, [a]) {
      const c = {};
      a & 2 && (c.onParse = l[1]), a & 4 && (c.onRepair = l[2]), !i && a & 1 && (i = !0, c.text = l[0], Pr(() => i = !1)), n.$set(c);
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n);
    }
  };
}
function kV(t, e, n) {
  let { text: i } = e, { onParse: r } = e, { onRepair: s } = e, { onApply: o } = e;
  const { close: l } = gi("simple-modal");
  function a(f) {
    l(), o(f);
  }
  function c() {
    l();
  }
  function u(f) {
    i = f, n(0, i);
  }
  return t.$$set = (f) => {
    "text" in f && n(0, i = f.text), "onParse" in f && n(1, r = f.onParse), "onRepair" in f && n(2, s = f.onRepair), "onApply" in f && n(5, o = f.onApply);
  }, [
    i,
    r,
    s,
    a,
    c,
    o,
    u
  ];
}
class CV extends Ge {
  constructor(e) {
    super(), Ke(this, e, kV, vV, yt, {
      text: 0,
      onParse: 1,
      onRepair: 2,
      onApply: 5
    });
  }
}
const K6 = CV;
function x2(t) {
  let e, n;
  return e = new Et({ props: { data: t[0].icon } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[0].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function F2(t) {
  let e = t[0].text + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = i[0].text + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function SV(t) {
  let e, n, i, r, s, o, l, a, c = t[0].icon && x2(t), u = t[0].text && F2(t);
  return {
    c() {
      e = j("button"), c && c.c(), n = Z(), u && u.c(), b(e, "type", "button"), b(e, "class", i = mn(Ss("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8"), b(e, "title", r = t[0].title), e.disabled = s = t[0].disabled || !1;
    },
    m(f, h) {
      U(f, e, h), c && c.m(e, null), E(e, n), u && u.m(e, null), o = !0, l || (a = re(e, "click", function() {
        hi(t[0].onClick) && t[0].onClick.apply(this, arguments);
      }), l = !0);
    },
    p(f, [h]) {
      t = f, t[0].icon ? c ? (c.p(t, h), h & 1 && P(c, 1)) : (c = x2(t), c.c(), P(c, 1), c.m(e, n)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me()), t[0].text ? u ? u.p(t, h) : (u = F2(t), u.c(), u.m(e, null)) : u && (u.d(1), u = null), (!o || h & 3 && i !== (i = mn(Ss("jse-context-menu-button", t[1], t[0].className)) + " svelte-1u2b6j8")) && b(e, "class", i), (!o || h & 1 && r !== (r = t[0].title)) && b(e, "title", r), (!o || h & 1 && s !== (s = t[0].disabled || !1)) && (e.disabled = s);
    },
    i(f) {
      o || (P(c), o = !0);
    },
    o(f) {
      x(c), o = !1;
    },
    d(f) {
      f && V(e), c && c.d(), u && u.d(), l = !1, a();
    }
  };
}
function EV(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (s) => {
    "item" in s && n(0, i = s.item), "className" in s && n(1, r = s.className);
  }, [i, r];
}
class AV extends Ge {
  constructor(e) {
    super(), Ke(this, e, EV, SV, Nt, { item: 0, className: 1 });
  }
}
const ub = AV;
function z2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
const MV = (t) => ({}), V2 = (t) => ({});
function U2(t) {
  let e, n;
  return e = new Et({ props: { data: t[11].icon } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[11].icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function H2(t) {
  let e, n, i, r = t[11].text + "", s, o, l, a, c, u, f, h, d = t[11].icon && U2(t);
  function p() {
    return t[9](t[11]);
  }
  return {
    c() {
      e = j("li"), n = j("button"), d && d.c(), i = Z(), s = _e(r), c = Z(), b(n, "type", "button"), b(n, "title", o = t[11].title), n.disabled = l = t[11].disabled, b(n, "class", a = mn(t[11].className) + " svelte-12ophpi"), b(e, "class", "svelte-12ophpi");
    },
    m(g, m) {
      U(g, e, m), E(e, n), d && d.m(n, null), E(n, i), E(n, s), E(e, c), u = !0, f || (h = re(n, "click", p), f = !0);
    },
    p(g, m) {
      t = g, t[11].icon ? d ? (d.p(t, m), m & 1 && P(d, 1)) : (d = U2(t), d.c(), P(d, 1), d.m(n, i)) : d && (Ae(), x(d, 1, 1, () => {
        d = null;
      }), Me()), (!u || m & 1) && r !== (r = t[11].text + "") && ze(s, r), (!u || m & 1 && o !== (o = t[11].title)) && b(n, "title", o), (!u || m & 1 && l !== (l = t[11].disabled)) && (n.disabled = l), (!u || m & 1 && a !== (a = mn(t[11].className) + " svelte-12ophpi")) && b(n, "class", a);
    },
    i(g) {
      u || (P(d), u = !0);
    },
    o(g) {
      x(d), u = !1;
    },
    d(g) {
      g && V(e), d && d.d(), f = !1, h();
    }
  };
}
function OV(t) {
  let e, n, i, r, s, o, l, a, c, u;
  const f = t[8].defaultItem, h = zn(f, t, t[7], V2);
  r = new Et({ props: { data: hr } });
  let d = t[0], p = [];
  for (let m = 0; m < d.length; m += 1)
    p[m] = H2(z2(t, d, m));
  const g = (m) => x(p[m], 1, 1, () => {
    p[m] = null;
  });
  return {
    c() {
      e = j("div"), h && h.c(), n = Z(), i = j("button"), ge(r.$$.fragment), s = Z(), o = j("div"), l = j("ul");
      for (let m = 0; m < p.length; m += 1)
        p[m].c();
      b(i, "type", "button"), b(i, "class", "jse-open-dropdown svelte-12ophpi"), b(i, "data-type", "jse-open-dropdown"), i.disabled = t[4], Se(i, "jse-visible", t[3]), b(l, "class", "svelte-12ophpi"), b(o, "class", "jse-dropdown-items svelte-12ophpi"), Ni(o, "width", t[2]), Se(o, "jse-visible", t[3]), b(e, "class", "jse-dropdown-button svelte-12ophpi"), b(e, "title", t[1]);
    },
    m(m, _) {
      U(m, e, _), h && h.m(e, null), E(e, n), E(e, i), de(r, i, null), E(e, s), E(e, o), E(o, l);
      for (let S = 0; S < p.length; S += 1)
        p[S].m(l, null);
      a = !0, c || (u = [
        re(i, "click", t[5]),
        re(e, "click", t[6])
      ], c = !0);
    },
    p(m, [_]) {
      if (h && h.p && (!a || _ & 128) && Un(
        h,
        f,
        m,
        m[7],
        a ? Vn(f, m[7], _, MV) : Hn(m[7]),
        V2
      ), (!a || _ & 16) && (i.disabled = m[4]), (!a || _ & 8) && Se(i, "jse-visible", m[3]), _ & 1) {
        d = m[0];
        let S;
        for (S = 0; S < d.length; S += 1) {
          const v = z2(m, d, S);
          p[S] ? (p[S].p(v, _), P(p[S], 1)) : (p[S] = H2(v), p[S].c(), P(p[S], 1), p[S].m(l, null));
        }
        for (Ae(), S = d.length; S < p.length; S += 1)
          g(S);
        Me();
      }
      (!a || _ & 4) && Ni(o, "width", m[2]), (!a || _ & 8) && Se(o, "jse-visible", m[3]), (!a || _ & 2) && b(e, "title", m[1]);
    },
    i(m) {
      if (!a) {
        P(h, m), P(r.$$.fragment, m);
        for (let _ = 0; _ < d.length; _ += 1)
          P(p[_]);
        a = !0;
      }
    },
    o(m) {
      x(h, m), x(r.$$.fragment, m), p = p.filter(Boolean);
      for (let _ = 0; _ < p.length; _ += 1)
        x(p[_]);
      a = !1;
    },
    d(m) {
      m && V(e), h && h.d(m), pe(r), xt(p, m), c = !1, ct(u);
    }
  };
}
function TV(t, e, n) {
  let i, { $$slots: r = {}, $$scope: s } = e, { items: o = [] } = e, { title: l = void 0 } = e, { width: a = "120px" } = e, c = !1;
  function u() {
    const p = c;
    setTimeout(() => n(3, c = !p));
  }
  function f() {
    n(3, c = !1);
  }
  function h(p) {
    Go(p) === "Escape" && (p.preventDefault(), n(3, c = !1));
  }
  or(() => {
    document.addEventListener("click", f), document.addEventListener("keydown", h);
  }), ks(() => {
    document.removeEventListener("click", f), document.removeEventListener("keydown", h);
  });
  const d = (p) => p.onClick();
  return t.$$set = (p) => {
    "items" in p && n(0, o = p.items), "title" in p && n(1, l = p.title), "width" in p && n(2, a = p.width), "$$scope" in p && n(7, s = p.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty & 1 && n(4, i = o.every((p) => p.disabled === !0));
  }, [
    o,
    l,
    a,
    c,
    i,
    u,
    f,
    s,
    r,
    d
  ];
}
class RV extends Ge {
  constructor(e) {
    super(), Ke(this, e, TV, OV, yt, { items: 0, title: 1, width: 2 });
  }
}
const PV = RV;
function W2(t) {
  let e, n;
  return e = new Et({
    props: { data: t[0].main.icon }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.data = i[0].main.icon), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function IV(t) {
  let e, n, i = t[0].main.text + "", r, s, o, l, a, c, u, f = t[0].main.icon && W2(t);
  return {
    c() {
      e = j("button"), f && f.c(), n = Z(), r = _e(i), b(e, "class", s = mn(Ss("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8"), b(e, "type", "button"), b(e, "slot", "defaultItem"), b(e, "title", o = t[0].main.title), e.disabled = l = t[0].main.disabled || !1;
    },
    m(h, d) {
      U(h, e, d), f && f.m(e, null), E(e, n), E(e, r), a = !0, c || (u = re(e, "click", function() {
        hi(t[0].main.onClick) && t[0].main.onClick.apply(this, arguments);
      }), c = !0);
    },
    p(h, d) {
      t = h, t[0].main.icon ? f ? (f.p(t, d), d & 1 && P(f, 1)) : (f = W2(t), f.c(), P(f, 1), f.m(e, n)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), (!a || d & 1) && i !== (i = t[0].main.text + "") && ze(r, i), (!a || d & 3 && s !== (s = mn(Ss("jse-context-menu-button", t[1], t[0].main.className)) + " svelte-1u2b6j8")) && b(e, "class", s), (!a || d & 1 && o !== (o = t[0].main.title)) && b(e, "title", o), (!a || d & 1 && l !== (l = t[0].main.disabled || !1)) && (e.disabled = l);
    },
    i(h) {
      a || (P(f), a = !0);
    },
    o(h) {
      x(f), a = !1;
    },
    d(h) {
      h && V(e), f && f.d(), c = !1, u();
    }
  };
}
function DV(t) {
  let e, n;
  return e = new PV({
    props: {
      width: t[0].width,
      items: t[0].items,
      $$slots: { defaultItem: [IV] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.width = i[0].width), r & 1 && (s.items = i[0].items), r & 7 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function NV(t, e, n) {
  let { item: i } = e, { className: r = void 0 } = e;
  return t.$$set = (s) => {
    "item" in s && n(0, i = s.item), "className" in s && n(1, r = s.className);
  }, [i, r];
}
class LV extends Ge {
  constructor(e) {
    super(), Ke(this, e, NV, DV, Nt, { item: 0, className: 1 });
  }
}
const fb = LV;
function q2(t, e, n) {
  const i = t.slice();
  return i[5] = e[n], i;
}
function J2(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function K2(t, e, n) {
  const i = t.slice();
  return i[11] = e[n], i;
}
function jV(t) {
  let e = Ba(t[5]) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[5]) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function BV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function xV(t) {
  let e, n, i = t[5].items, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = Y2(J2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      e = j("div");
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      b(e, "class", "jse-row svelte-1nininf");
    },
    m(o, l) {
      U(o, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(o, l) {
      if (l & 1) {
        i = o[5].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = J2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = Y2(c), r[a].c(), P(r[a], 1), r[a].m(e, null));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      o && V(e), xt(r, o);
    }
  };
}
function FV(t) {
  let e, n;
  return e = new fb({ props: { item: t[5] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function zV(t) {
  let e, n;
  return e = new ub({ props: { item: t[5] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function VV(t) {
  let e = Ba(t[8]) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[8]) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function UV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function HV(t) {
  let e, n, i = t[8].items, r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = G2(K2(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      e = j("div");
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      b(e, "class", "jse-column svelte-1nininf");
    },
    m(o, l) {
      U(o, e, l);
      for (let a = 0; a < r.length; a += 1)
        r[a].m(e, null);
      n = !0;
    },
    p(o, l) {
      if (l & 1) {
        i = o[8].items;
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = K2(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = G2(c), r[a].c(), P(r[a], 1), r[a].m(e, null));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      o && V(e), xt(r, o);
    }
  };
}
function WV(t) {
  let e, n;
  return e = new fb({ props: { item: t[8] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function qV(t) {
  let e, n;
  return e = new ub({ props: { item: t[8] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function JV(t) {
  let e = Ba(t[11]) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 1 && e !== (e = Ba(i[11]) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function KV(t) {
  let e, n = t[11].text + "", i;
  return {
    c() {
      e = j("div"), i = _e(n), b(e, "class", "jse-label svelte-1nininf");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s & 1 && n !== (n = r[11].text + "") && ze(i, n);
    },
    i: ye,
    o: ye,
    d(r) {
      r && V(e);
    }
  };
}
function GV(t) {
  let e;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-separator svelte-1nininf");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function YV(t) {
  let e, n;
  return e = new fb({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[11]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function XV(t) {
  let e, n;
  return e = new ub({
    props: {
      className: "left",
      item: t[11]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 1 && (s.item = i[11]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function G2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    XV,
    YV,
    GV,
    KV,
    JV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[11])), e ? 0 : (n == null && (n = !!cb(h[11])), n ? 1 : (i == null && (i = !!Pp(h[11])), i ? 2 : (r == null && (r = !!tV(h[11])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = rt();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Ae(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Me(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function Y2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    qV,
    WV,
    HV,
    UV,
    VV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[8])), e ? 0 : (n == null && (n = !!cb(h[8])), n ? 1 : (i == null && (i = !!iV(h[8])), i ? 2 : (r == null && (r = !!Pp(h[8])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = rt();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Ae(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Me(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function X2(t) {
  let e, n, i, r, s, o, l, a;
  const c = [
    zV,
    FV,
    xV,
    BV,
    jV
  ], u = [];
  function f(h, d) {
    return d & 1 && (e = null), d & 1 && (n = null), d & 1 && (i = null), d & 1 && (r = null), e == null && (e = !!Ju(h[5])), e ? 0 : (n == null && (n = !!cb(h[5])), n ? 1 : (i == null && (i = !!nV(h[5])), i ? 2 : (r == null && (r = !!Pp(h[5])), r ? 3 : 4)));
  }
  return s = f(t, -1), o = u[s] = c[s](t), {
    c() {
      o.c(), l = rt();
    },
    m(h, d) {
      u[s].m(h, d), U(h, l, d), a = !0;
    },
    p(h, d) {
      let p = s;
      s = f(h, d), s === p ? u[s].p(h, d) : (Ae(), x(u[p], 1, 1, () => {
        u[p] = null;
      }), Me(), o = u[s], o ? o.p(h, d) : (o = u[s] = c[s](h), o.c()), P(o, 1), o.m(l.parentNode, l));
    },
    i(h) {
      a || (P(o), a = !0);
    },
    o(h) {
      x(o), a = !1;
    },
    d(h) {
      u[s].d(h), h && V(l);
    }
  };
}
function Q2(t) {
  let e, n, i, r, s, o, l, a;
  return r = new Et({ props: { data: rB } }), {
    c() {
      e = j("div"), n = j("div"), i = j("div"), ge(r.$$.fragment), s = Z(), o = j("div"), l = _e(t[1]), b(i, "class", "jse-tip-icon svelte-1nininf"), b(o, "class", "jse-tip-text"), b(n, "class", "jse-tip svelte-1nininf"), b(e, "class", "jse-row svelte-1nininf");
    },
    m(c, u) {
      U(c, e, u), E(e, n), E(n, i), de(r, i, null), E(n, s), E(n, o), E(o, l), a = !0;
    },
    p(c, u) {
      (!a || u & 2) && ze(l, c[1]);
    },
    i(c) {
      a || (P(r.$$.fragment, c), a = !0);
    },
    o(c) {
      x(r.$$.fragment, c), a = !1;
    },
    d(c) {
      c && V(e), pe(r);
    }
  };
}
function QV(t) {
  let e, n, i, r, s, o = t[0], l = [];
  for (let u = 0; u < o.length; u += 1)
    l[u] = X2(q2(t, o, u));
  const a = (u) => x(l[u], 1, 1, () => {
    l[u] = null;
  });
  let c = t[1] && Q2(t);
  return {
    c() {
      e = j("div");
      for (let u = 0; u < l.length; u += 1)
        l[u].c();
      n = Z(), c && c.c(), b(e, "class", "jse-contextmenu svelte-1nininf");
    },
    m(u, f) {
      U(u, e, f);
      for (let h = 0; h < l.length; h += 1)
        l[h].m(e, null);
      E(e, n), c && c.m(e, null), t[4](e), i = !0, r || (s = re(e, "keydown", t[3]), r = !0);
    },
    p(u, [f]) {
      if (f & 1) {
        o = u[0];
        let h;
        for (h = 0; h < o.length; h += 1) {
          const d = q2(u, o, h);
          l[h] ? (l[h].p(d, f), P(l[h], 1)) : (l[h] = X2(d), l[h].c(), P(l[h], 1), l[h].m(e, n));
        }
        for (Ae(), h = o.length; h < l.length; h += 1)
          a(h);
        Me();
      }
      u[1] ? c ? (c.p(u, f), f & 2 && P(c, 1)) : (c = Q2(u), c.c(), P(c, 1), c.m(e, null)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me());
    },
    i(u) {
      if (!i) {
        for (let f = 0; f < o.length; f += 1)
          P(l[f]);
        P(c), i = !0;
      }
    },
    o(u) {
      l = l.filter(Boolean);
      for (let f = 0; f < l.length; f += 1)
        x(l[f]);
      x(c), i = !1;
    },
    d(u) {
      u && V(e), xt(l, u), c && c.d(), t[4](null), r = !1, s();
    }
  };
}
function Ba(t) {
  return console.error("Unknown type of context menu item", t), "???";
}
function ZV(t, e, n) {
  let { items: i } = e, { tip: r } = e, s;
  or(() => {
    setTimeout(() => {
      const a = [...s.querySelectorAll("button")].find((c) => !c.disabled);
      a && a.focus();
    });
  });
  function o(a) {
    const c = Go(a).replace(/^Command\+/, "Ctrl+");
    if (c === "Up" || c === "Down" || c === "Left" || c === "Right") {
      a.preventDefault();
      const u = Array.from(s.querySelectorAll("button:not([disabled])")), f = Dj({
        allElements: u,
        currentElement: a.target,
        direction: c,
        hasPrio: (h) => h.getAttribute("data-type") !== "jse-open-dropdown"
      });
      f && f.focus();
    }
  }
  function l(a) {
    _t[a ? "unshift" : "push"](() => {
      s = a, n(2, s);
    });
  }
  return t.$$set = (a) => {
    "items" in a && n(0, i = a.items), "tip" in a && n(1, r = a.tip);
  }, [i, r, s, o, l];
}
class $V extends Ge {
  constructor(e) {
    super(), Ke(this, e, ZV, QV, yt, { items: 0, tip: 1 });
  }
}
const G6 = $V;
function eU(t) {
  let e, n;
  return e = new G6({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.items = i[1]), r[0] & 1 && (s.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function tU(t, e, n) {
  let i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, { json: A } = e, { documentState: w } = e, { parser: M } = e, { showTip: N } = e, { onCloseContextMenu: T } = e, { onEditKey: O } = e, { onEditValue: W } = e, { onToggleEnforceString: H } = e, { onCut: I } = e, { onCopy: z } = e, { onPaste: L } = e, { onRemove: K } = e, { onDuplicate: F } = e, { onExtract: D } = e, { onInsertBefore: X } = e, { onInsert: ue } = e, { onConvert: q } = e, { onInsertAfter: ee } = e, { onSort: ie } = e, { onTransform: ne } = e;
  function je() {
    T(), O();
  }
  function Ie() {
    T(), W();
  }
  function Xe() {
    T(), H();
  }
  function le() {
    T(), I(!0);
  }
  function Ne() {
    T(), I(!1);
  }
  function nt() {
    T(), z(!0);
  }
  function ke() {
    T(), z(!1);
  }
  function fe() {
    T(), L();
  }
  function Pe() {
    T(), K();
  }
  function ae() {
    T(), F();
  }
  function $() {
    T(), D();
  }
  function he(Q) {
    T(), c ? q(Q) : ue(Q);
  }
  function Ce() {
    T(), ie();
  }
  function J() {
    T(), ne();
  }
  function y() {
    T(), X();
  }
  function R() {
    T(), ee();
  }
  let B;
  return t.$$set = (Q) => {
    "json" in Q && n(2, A = Q.json), "documentState" in Q && n(3, w = Q.documentState), "parser" in Q && n(4, M = Q.parser), "showTip" in Q && n(0, N = Q.showTip), "onCloseContextMenu" in Q && n(5, T = Q.onCloseContextMenu), "onEditKey" in Q && n(6, O = Q.onEditKey), "onEditValue" in Q && n(7, W = Q.onEditValue), "onToggleEnforceString" in Q && n(8, H = Q.onToggleEnforceString), "onCut" in Q && n(9, I = Q.onCut), "onCopy" in Q && n(10, z = Q.onCopy), "onPaste" in Q && n(11, L = Q.onPaste), "onRemove" in Q && n(12, K = Q.onRemove), "onDuplicate" in Q && n(13, F = Q.onDuplicate), "onExtract" in Q && n(14, D = Q.onExtract), "onInsertBefore" in Q && n(15, X = Q.onInsertBefore), "onInsert" in Q && n(16, ue = Q.onInsert), "onConvert" in Q && n(17, q = Q.onConvert), "onInsertAfter" in Q && n(18, ee = Q.onInsertAfter), "onSort" in Q && n(19, ie = Q.onSort), "onTransform" in Q && n(20, ne = Q.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(37, i = w.selection), t.$$.dirty[0] & 4 && n(39, r = A !== void 0), t.$$.dirty[1] & 64 && n(31, s = i != null), t.$$.dirty[1] & 65 && n(21, o = s && Ot(i.focusPath)), t.$$.dirty[0] & 4 | t.$$.dirty[1] & 65 && n(38, l = s ? Ye(A, i.focusPath) : void 0), t.$$.dirty[1] & 128 && n(35, a = Array.isArray(l) ? "Edit array" : An(l) ? "Edit object" : "Edit value"), t.$$.dirty[1] & 320 && n(22, c = r && (Dt(i) || Nn(i) || Ct(i))), t.$$.dirty[0] & 6291456 | t.$$.dirty[1] & 256 && n(30, u = r && c && !o), t.$$.dirty[0] & 2097152 | t.$$.dirty[1] & 320 && n(29, f = r && i != null && (Dt(i) || Ct(i)) && !o), t.$$.dirty[0] & 2097156 | t.$$.dirty[1] & 320 && n(36, h = r && i != null && su(i) && !o && !Array.isArray(Ye(A, St(i.focusPath)))), t.$$.dirty[1] & 320 && n(34, d = r && i != null && su(i)), t.$$.dirty[1] & 136 && n(32, p = d && !dn(l)), t.$$.dirty[0] & 4194304 && n(25, g = c), t.$$.dirty[0] & 33554432 && n(24, m = g ? "Convert to:" : "Insert:"), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 1 && n(28, _ = g ? !1 : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(27, S = g ? _l(i) && !An(l) : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(26, v = g ? _l(i) && !Array.isArray(l) : s), t.$$.dirty[0] & 33554432 | t.$$.dirty[1] & 193 && n(23, k = g ? _l(i) && dn(l) : s), t.$$.dirty[0] & 24 | t.$$.dirty[1] & 192 && n(33, C = i != null ? Qs(l, w.enforceStringMap, xe(i.focusPath), M) : !1), t.$$.dirty[0] & 2145386496 | t.$$.dirty[1] & 63 && n(1, B = [
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: je,
            icon: Bc,
            text: "Edit key",
            title: "Edit the key (Double-click on the key)",
            disabled: !h
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: Ie,
              icon: Bc,
              text: a,
              title: "Edit the value (Double-click on the value)",
              disabled: !d
            },
            width: "11em",
            items: [
              {
                type: "button",
                icon: Bc,
                text: a,
                title: "Edit the value (Double-click on the value)",
                onClick: Ie,
                disabled: !d
              },
              {
                type: "button",
                icon: C ? nu : iu,
                text: "Enforce string",
                title: "Enforce keeping the value as string when it contains a numeric value",
                onClick: Xe,
                disabled: !p
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: le,
              icon: ga,
              text: "Cut",
              title: "Cut selected contents, formatted with indentation (Ctrl+X)",
              disabled: !c
            },
            width: "10em",
            items: [
              {
                type: "button",
                icon: ga,
                text: "Cut formatted",
                title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                onClick: le,
                disabled: !c
              },
              {
                type: "button",
                icon: ga,
                text: "Cut compacted",
                title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                onClick: Ne,
                disabled: !c
              }
            ]
          },
          {
            type: "dropdown-button",
            main: {
              type: "button",
              onClick: nt,
              icon: Oo,
              text: "Copy",
              title: "Copy selected contents, formatted with indentation (Ctrl+C)",
              disabled: !c
            },
            width: "12em",
            items: [
              {
                type: "button",
                icon: Oo,
                text: "Copy formatted",
                title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                onClick: nt,
                disabled: !c
              },
              {
                type: "button",
                icon: Oo,
                text: "Copy compacted",
                title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                onClick: ke,
                disabled: !c
              }
            ]
          },
          {
            type: "button",
            onClick: fe,
            icon: P6,
            text: "Paste",
            title: "Paste clipboard contents (Ctrl+V)",
            disabled: !s
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "button",
                onClick: Pe,
                icon: oc,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !c
              },
              {
                type: "button",
                onClick: ae,
                icon: oF,
                text: "Duplicate",
                title: "Duplicate selected contents (Ctrl+D)",
                disabled: !u
              },
              {
                type: "button",
                onClick: $,
                icon: Qx,
                text: "Extract",
                title: "Extract selected contents",
                disabled: !f
              },
              {
                type: "button",
                onClick: Ce,
                icon: Mp,
                text: "Sort",
                title: "Sort array or object contents",
                disabled: !c
              },
              {
                type: "button",
                onClick: J,
                icon: Ep,
                text: "Transform",
                title: "Transform array or object contents (filter, sort, project)",
                disabled: !c
              }
            ]
          },
          {
            type: "column",
            items: [
              { type: "label", text: m },
              {
                type: "button",
                onClick: () => he("structure"),
                icon: g ? Cf : Sf,
                text: "Structure",
                title: m + " structure",
                disabled: !_
              },
              {
                type: "button",
                onClick: () => he("object"),
                icon: g ? Cf : Sf,
                text: "Object",
                title: m + " structure",
                disabled: !S
              },
              {
                type: "button",
                onClick: () => he("array"),
                icon: g ? Cf : Sf,
                text: "Array",
                title: m + " array",
                disabled: !v
              },
              {
                type: "button",
                onClick: () => he("value"),
                icon: g ? Cf : Sf,
                text: "Value",
                title: m + " value",
                disabled: !k
              }
            ]
          }
        ]
      },
      { type: "separator" },
      {
        type: "row",
        items: [
          {
            type: "button",
            onClick: y,
            icon: Kx,
            text: "Insert before",
            title: "Select area before current entry to insert or paste contents",
            disabled: !c || o
          },
          {
            type: "button",
            onClick: R,
            icon: Ux,
            text: "Insert after",
            title: "Select area after current entry to insert or paste contents",
            disabled: !c || o
          }
        ]
      }
    ]);
  }, [
    N,
    B,
    A,
    w,
    M,
    T,
    O,
    W,
    H,
    I,
    z,
    L,
    K,
    F,
    D,
    X,
    ue,
    q,
    ee,
    ie,
    ne,
    o,
    c,
    k,
    m,
    g,
    v,
    S,
    _,
    f,
    u,
    s,
    p,
    C,
    d,
    a,
    h,
    i,
    l,
    r
  ];
}
class nU extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      tU,
      eU,
      yt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditKey: 6,
        onEditValue: 7,
        onToggleEnforceString: 8,
        onCut: 9,
        onCopy: 10,
        onPaste: 11,
        onRemove: 12,
        onDuplicate: 13,
        onExtract: 14,
        onInsertBefore: 15,
        onInsert: 16,
        onConvert: 17,
        onInsertAfter: 18,
        onSort: 19,
        onTransform: 20
      },
      null,
      [-1, -1]
    );
  }
}
const iU = nU;
function Z2(t, e, n) {
  const i = t.slice();
  return i[13] = e[n], i;
}
function $2(t) {
  let e, n, i = t[13].start + "", r, s, o = t[13].end + "", l, a, c, u;
  function f() {
    return t[12](t[13]);
  }
  return {
    c() {
      e = j("button"), n = _e("show "), r = _e(i), s = _e("-"), l = _e(o), a = Z(), b(e, "type", "button"), b(e, "class", "jse-expand-items svelte-1knbf5w");
    },
    m(h, d) {
      U(h, e, d), E(e, n), E(e, r), E(e, s), E(e, l), E(e, a), c || (u = re(e, "click", f), c = !0);
    },
    p(h, d) {
      t = h, d & 16 && i !== (i = t[13].start + "") && ze(r, i), d & 16 && o !== (o = t[13].end + "") && ze(l, o);
    },
    d(h) {
      h && V(e), c = !1, u();
    }
  };
}
function rU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = t[4], d = [];
  for (let p = 0; p < h.length; p += 1)
    d[p] = $2(Z2(t, h, p));
  return {
    c() {
      e = j("div"), n = j("div"), i = j("div"), r = _e("Items "), s = _e(t[3]), o = _e("-"), l = _e(t[2]), a = Z();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      b(i, "class", "jse-text svelte-1knbf5w"), b(e, "class", "jse-collapsed-items svelte-1knbf5w"), b(e, "style", c = ev(t[0].length + 2)), Se(e, "jse-selected", t[5]);
    },
    m(p, g) {
      U(p, e, g), E(e, n), E(n, i), E(i, r), E(i, s), E(i, o), E(i, l), E(n, a);
      for (let m = 0; m < d.length; m += 1)
        d[m].m(n, null);
      u || (f = re(e, "mousemove", sU), u = !0);
    },
    p(p, [g]) {
      if (g & 8 && ze(s, p[3]), g & 4 && ze(l, p[2]), g & 19) {
        h = p[4];
        let m;
        for (m = 0; m < h.length; m += 1) {
          const _ = Z2(p, h, m);
          d[m] ? d[m].p(_, g) : (d[m] = $2(_), d[m].c(), d[m].m(n, null));
        }
        for (; m < d.length; m += 1)
          d[m].d(1);
        d.length = h.length;
      }
      g & 1 && c !== (c = ev(p[0].length + 2)) && b(e, "style", c), g & 32 && Se(e, "jse-selected", p[5]);
    },
    i: ye,
    o: ye,
    d(p) {
      p && V(e), xt(d, p), u = !1, f();
    }
  };
}
function ev(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function sU(t) {
  t.stopPropagation();
}
function oU(t, e, n) {
  let i, r, s, o, l, { visibleSections: a } = e, { sectionIndex: c } = e, { total: u } = e, { path: f } = e, { pointer: h } = e, { selection: d } = e, { onExpandSection: p } = e;
  const g = (m) => p(f, m);
  return t.$$set = (m) => {
    "visibleSections" in m && n(6, a = m.visibleSections), "sectionIndex" in m && n(7, c = m.sectionIndex), "total" in m && n(8, u = m.total), "path" in m && n(0, f = m.path), "pointer" in m && n(9, h = m.pointer), "selection" in m && n(10, d = m.selection), "onExpandSection" in m && n(1, p = m.onExpandSection);
  }, t.$$.update = () => {
    t.$$.dirty & 192 && n(11, i = a[c]), t.$$.dirty & 2048 && n(3, r = i.end), t.$$.dirty & 448 && n(2, s = a[c + 1] ? a[c + 1].start : u), t.$$.dirty & 1544 && n(5, o = Dt(d) ? d.pointersMap[xm(h, r)] === !0 : !1), t.$$.dirty & 12 && n(4, l = jB(r, s));
  }, [
    f,
    p,
    s,
    r,
    l,
    o,
    a,
    c,
    u,
    h,
    d,
    i,
    g
  ];
}
class lU extends Ge {
  constructor(e) {
    super(), Ke(this, e, oU, rU, yt, {
      visibleSections: 6,
      sectionIndex: 7,
      total: 8,
      path: 0,
      pointer: 9,
      selection: 10,
      onExpandSection: 1
    });
  }
}
const aU = lU;
function cU(t) {
  let e, n, i, r, s;
  return n = new Et({ props: { data: hr } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-context-menu-pointer svelte-1yzl4st"), b(e, "title", A0), Se(e, "jse-selected", t[0]);
    },
    m(o, l) {
      U(o, e, l), de(n, e, null), i = !0, r || (s = re(e, "click", t[1]), r = !0);
    },
    p(o, [l]) {
      (!i || l & 1) && Se(e, "jse-selected", o[0]);
    },
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), pe(n), r = !1, s();
    }
  };
}
function uU(t, e, n) {
  let { selected: i } = e, { onContextMenu: r } = e;
  function s(o) {
    let l = o.target;
    for (; l && l.nodeName !== "BUTTON"; )
      l = l.parentNode;
    l && r({
      anchor: l,
      left: 0,
      top: 0,
      width: Ws,
      height: Hs,
      offsetTop: 2,
      offsetLeft: 0,
      showTip: !0
    });
  }
  return t.$$set = (o) => {
    "selected" in o && n(0, i = o.selected), "onContextMenu" in o && n(2, r = o.onContextMenu);
  }, [i, s, r];
}
class fU extends Ge {
  constructor(e) {
    super(), Ke(this, e, uU, cU, yt, { selected: 0, onContextMenu: 2 });
  }
}
const Xo = fU;
function hU(t) {
  let e, n, i, r, s, o, l;
  const a = [gU, pU], c = [];
  function u(f, h) {
    return f[1] ? 0 : 1;
  }
  return n = u(t), i = c[n] = a[n](t), {
    c() {
      e = j("div"), i.c(), b(e, "data-type", "selectable-key"), b(e, "class", r = mn(t[6](t[0])) + " svelte-566egb");
    },
    m(f, h) {
      U(f, e, h), c[n].m(e, null), s = !0, o || (l = re(e, "dblclick", t[5]), o = !0);
    },
    p(f, h) {
      let d = n;
      n = u(f), n === d ? c[n].p(f, h) : (Ae(), x(c[d], 1, 1, () => {
        c[d] = null;
      }), Me(), i = c[n], i ? i.p(f, h) : (i = c[n] = a[n](f), i.c()), P(i, 1), i.m(e, null)), (!s || h & 1 && r !== (r = mn(f[6](f[0])) + " svelte-566egb")) && b(e, "class", r);
    },
    i(f) {
      s || (P(i), s = !0);
    },
    o(f) {
      x(i), s = !1;
    },
    d(f) {
      f && V(e), c[n].d(), o = !1, l();
    }
  };
}
function dU(t) {
  let e, n;
  return e = new E6({
    props: {
      value: t[2].normalization.escapeValue(t[0]),
      shortText: !0,
      onChange: t[7],
      onCancel: t[8],
      onFind: t[2].onFind
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 5 && (s.value = i[2].normalization.escapeValue(i[0])), r & 4 && (s.onFind = i[2].onFind), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function pU(t) {
  let e = Tl(t[2].normalization.escapeValue(t[0])) + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r & 5 && e !== (e = Tl(i[2].normalization.escapeValue(i[0])) + "") && ze(n, e);
    },
    i: ye,
    o: ye,
    d(i) {
      i && V(n);
    }
  };
}
function gU(t) {
  let e, n;
  return e = new R6({
    props: {
      text: t[2].normalization.escapeValue(t[0]),
      searchResultItems: t[1]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 5 && (s.text = i[2].normalization.escapeValue(i[0])), r & 2 && (s.searchResultItems = i[1]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function tv(t) {
  let e, n;
  return e = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[2].onContextMenu
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 4 && (s.onContextMenu = i[2].onContextMenu), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function mU(t) {
  let e, n, i, r, s;
  const o = [dU, hU], l = [];
  function a(u, f) {
    return u[4] ? 0 : 1;
  }
  e = a(t), n = l[e] = o[e](t);
  let c = !t[2].readOnly && t[3] && !t[4] && tv(t);
  return {
    c() {
      n.c(), i = Z(), c && c.c(), r = rt();
    },
    m(u, f) {
      l[e].m(u, f), U(u, i, f), c && c.m(u, f), U(u, r, f), s = !0;
    },
    p(u, [f]) {
      let h = e;
      e = a(u), e === h ? l[e].p(u, f) : (Ae(), x(l[h], 1, 1, () => {
        l[h] = null;
      }), Me(), n = l[e], n ? n.p(u, f) : (n = l[e] = o[e](u), n.c()), P(n, 1), n.m(i.parentNode, i)), !u[2].readOnly && u[3] && !u[4] ? c ? (c.p(u, f), f & 28 && P(c, 1)) : (c = tv(u), c.c(), P(c, 1), c.m(r.parentNode, r)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me());
    },
    i(u) {
      s || (P(n), P(c), s = !0);
    },
    o(u) {
      x(n), x(c), s = !1;
    },
    d(u) {
      l[e].d(u), u && V(i), c && c.d(u), u && V(r);
    }
  };
}
function bU(t, e, n) {
  let i, r, { path: s } = e, { pointer: o } = e, { key: l } = e, { selection: a } = e, { searchResultItems: c } = e, { onUpdateKey: u } = e, { context: f } = e;
  function h(m) {
    !r && !f.readOnly && (m.preventDefault(), f.onSelect(mr(s, !0)));
  }
  function d(m) {
    return Ss("jse-key", { "jse-empty": m === "" });
  }
  function p(m, _) {
    const S = u(l, f.normalization.unescapeValue(m)), v = St(s).concat(S);
    f.onSelect(_ === bl.NEXT_INSIDE ? Pt(v, !1) : mr(v, !1)), _ !== bl.SELF && f.focus();
  }
  function g() {
    f.onSelect(mr(s, !1)), f.focus();
  }
  return t.$$set = (m) => {
    "path" in m && n(9, s = m.path), "pointer" in m && n(10, o = m.pointer), "key" in m && n(0, l = m.key), "selection" in m && n(11, a = m.selection), "searchResultItems" in m && n(1, c = m.searchResultItems), "onUpdateKey" in m && n(12, u = m.onUpdateKey), "context" in m && n(2, f = m.context);
  }, t.$$.update = () => {
    t.$$.dirty & 3072 && n(3, i = a ? a.pointersMap[o] === !0 && Nn(a) : void 0), t.$$.dirty & 2056 && n(4, r = i && Lo(a));
  }, [
    l,
    c,
    f,
    i,
    r,
    h,
    d,
    p,
    g,
    s,
    o,
    a,
    u
  ];
}
class _U extends Ge {
  constructor(e) {
    super(), Ke(this, e, bU, mU, yt, {
      path: 9,
      pointer: 10,
      key: 0,
      selection: 11,
      searchResultItems: 1,
      onUpdateKey: 12,
      context: 2
    });
  }
}
const yU = _U;
function nv(t, e, n) {
  const i = t.slice();
  return i[8] = e[n], i;
}
function iv(t) {
  let e, n, i;
  const r = [t[8].props];
  var s = t[8].component;
  function o(l) {
    let a = {};
    for (let c = 0; c < r.length; c += 1)
      a = Ko(a, r[c]);
    return { props: a };
  }
  return s && (e = vs(s, o())), {
    c() {
      e && ge(e.$$.fragment), n = rt();
    },
    m(l, a) {
      e && de(e, l, a), U(l, n, a), i = !0;
    },
    p(l, a) {
      const c = a & 1 ? Ul(r, [rp(l[8].props)]) : {};
      if (s !== (s = l[8].component)) {
        if (e) {
          Ae();
          const u = e;
          x(u.$$.fragment, 1, 0, () => {
            pe(u, 1);
          }), Me();
        }
        s ? (e = vs(s, o()), ge(e.$$.fragment), P(e.$$.fragment, 1), de(e, n.parentNode, n)) : e = null;
      } else
        s && e.$set(c);
    },
    i(l) {
      i || (e && P(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && x(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && V(n), e && pe(e, l);
    }
  };
}
function wU(t) {
  let e, n, i = t[0], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = iv(nv(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, [l]) {
      if (l & 1) {
        i = o[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = nv(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = iv(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function vU(t, e, n) {
  let i, r, { path: s } = e, { value: o } = e, { context: l } = e, { enforceString: a } = e, { selection: c } = e, { searchResultItems: u } = e;
  return t.$$set = (f) => {
    "path" in f && n(1, s = f.path), "value" in f && n(2, o = f.value), "context" in f && n(3, l = f.context), "enforceString" in f && n(4, a = f.enforceString), "selection" in f && n(5, c = f.selection), "searchResultItems" in f && n(6, u = f.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && Ct(c) && Lo(c)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: s,
      value: o,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: c,
      searchResultItems: u,
      onPatch: l.onPatch,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    i
  ];
}
let kU = class extends Ge {
  constructor(e) {
    super(), Ke(this, e, vU, wU, yt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
};
const CU = kU, ai = {
  selecting: !1,
  selectionAnchor: null,
  selectionAnchorType: null,
  selectionFocus: null,
  dragging: !1
};
function xg({ json: t, documentState: e, deltaY: n, items: i }) {
  const r = e.selection, s = n < 0 ? SU({ json: t, selection: r, deltaY: n, items: i }) : EU({ json: t, selection: r, deltaY: n, items: i });
  if (!s || s.offset === 0)
    return {
      operations: void 0,
      updatedSelection: void 0,
      offset: 0
    };
  const o = cx(t, e.selection, s), l = St(Na(r)), a = Ye(t, l);
  if (Array.isArray(a)) {
    const c = AU({
      items: i,
      json: t,
      selection: r,
      offset: s.offset
    });
    return {
      operations: o,
      updatedSelection: c,
      offset: s.offset
    };
  } else
    return {
      operations: o,
      updatedSelection: void 0,
      offset: s.offset
    };
}
function SU({ items: t, selection: e, deltaY: n }) {
  const i = Na(e), r = t.findIndex((u) => At(u.path, i)), s = () => {
    var u;
    return (u = t[o - 1]) == null ? void 0 : u.height;
  };
  let o = r, l = 0;
  for (; s() !== void 0 && Math.abs(n) > l + s() / 2; )
    l += s(), o -= 1;
  const a = t[o].path, c = o - r;
  return o !== r && t[o] !== void 0 ? { beforePath: a, offset: c } : void 0;
}
function EU({ json: t, items: e, selection: n, deltaY: i }) {
  var g;
  const r = Cp(n), s = e.findIndex((m) => At(m.path, r));
  let o = 0, l = s;
  const a = () => {
    var m;
    return (m = e[l + 1]) == null ? void 0 : m.height;
  };
  for (; a() !== void 0 && Math.abs(i) > o + a() / 2; )
    o += a(), l += 1;
  const c = St(r), u = Ye(t, c), h = Array.isArray(u) ? l : l + 1, d = (g = e[h]) == null ? void 0 : g.path, p = l - s;
  return d ? { beforePath: d, offset: p } : { append: !0, offset: p };
}
function AU({ items: t, json: e, selection: n, offset: i }) {
  var u, f;
  const r = Na(n), s = Cp(n), o = t.findIndex((h) => At(h.path, r)), l = t.findIndex((h) => At(h.path, s)), a = (u = t[o + i]) == null ? void 0 : u.path, c = (f = t[l + i]) == null ? void 0 : f.path;
  return Dn(e, a, c);
}
function MU(t, e) {
  if (!t)
    return;
  const n = {};
  for (const i of Object.keys(t))
    e(i, t[i]) && (n[i] = t[i]);
  return Object.keys(n).length > 0 ? n : void 0;
}
function Qr(t, e) {
  return MU(t, (n) => Oa(n, e));
}
function OU(t) {
  let e, n, i, r, s, o;
  return n = new Et({ props: { data: ql } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-validation-error svelte-pz3g1j");
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), r = !0, s || (o = [
        re(e, "click", function() {
          hi(t[0]) && t[0].apply(this, arguments);
        }),
        qi(i = $0.call(null, e, {
          text: t[1],
          ...t[2]
        }))
      ], s = !0);
    },
    p(l, [a]) {
      t = l, i && hi(i.update) && a & 2 && i.update.call(null, {
        text: t[1],
        ...t[2]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n), s = !1, ct(o);
    }
  };
}
function TU(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { validationError: s } = e, { onExpand: o } = e;
  return t.$$set = (l) => {
    "validationError" in l && n(3, s = l.validationError), "onExpand" in l && n(0, o = l.onExpand);
  }, t.$$.update = () => {
    t.$$.dirty & 8 && n(1, i = s.isChildError ? "Contains invalid data" : s.message);
  }, [o, i, r, s];
}
class RU extends Ge {
  constructor(e) {
    super(), Ke(this, e, TU, OU, Nt, { validationError: 3, onExpand: 0 });
  }
}
const lc = RU;
const PU = (t) => ({}), rv = (t) => ({});
function sv(t, e, n) {
  const i = t.slice();
  return i[53] = e[n], i;
}
const IU = (t) => ({}), ov = (t) => ({});
function lv(t, e, n) {
  const i = t.slice();
  return i[47] = e[n], i[49] = n, i;
}
function av(t, e, n) {
  const i = t.slice();
  return i[50] = e[n], i;
}
const DU = (t) => ({}), cv = (t) => ({});
function NU(t) {
  let e, n, i, r, s, o, l = !t[8].readOnly && t[16] && t[7] && (Ct(t[7]) || Dt(t[7])) && !t[7].edit && At(t[7].focusPath, t[1]), a, c, u;
  const f = t[34].identifier, h = zn(f, t, t[35], rv);
  let d = !t[17] && uv();
  s = new CU({
    props: {
      path: t[1],
      value: t[0],
      enforceString: t[13],
      selection: t[16] ? t[7] : void 0,
      searchResultItems: Dw(t[6], t[9]),
      context: t[8]
    }
  });
  let p = l && fv(t), g = t[15] && hv(t), m = !t[17] && dv(t);
  return {
    c() {
      e = j("div"), n = j("div"), h && h.c(), i = Z(), d && d.c(), r = Z(), ge(s.$$.fragment), o = Z(), p && p.c(), a = Z(), g && g.c(), c = Z(), m && m.c(), b(n, "class", "jse-contents svelte-lts9i5"), b(e, "class", "jse-contents-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(_, S) {
      U(_, e, S), E(e, n), h && h.m(n, null), E(n, i), d && d.m(n, null), E(n, r), de(s, n, null), E(n, o), p && p.m(n, null), E(e, a), g && g.m(e, null), E(e, c), m && m.m(e, null), u = !0;
    },
    p(_, S) {
      h && h.p && (!u || S[1] & 16) && Un(
        h,
        f,
        _,
        _[35],
        u ? Vn(f, _[35], S, PU) : Hn(_[35]),
        rv
      ), _[17] ? d && (d.d(1), d = null) : d || (d = uv(), d.c(), d.m(n, r));
      const v = {};
      S[0] & 2 && (v.path = _[1]), S[0] & 1 && (v.value = _[0]), S[0] & 8192 && (v.enforceString = _[13]), S[0] & 65664 && (v.selection = _[16] ? _[7] : void 0), S[0] & 576 && (v.searchResultItems = Dw(_[6], _[9])), S[0] & 256 && (v.context = _[8]), s.$set(v), S[0] & 65922 && (l = !_[8].readOnly && _[16] && _[7] && (Ct(_[7]) || Dt(_[7])) && !_[7].edit && At(_[7].focusPath, _[1])), l ? p ? (p.p(_, S), S[0] & 65922 && P(p, 1)) : (p = fv(_), p.c(), P(p, 1), p.m(n, null)) : p && (Ae(), x(p, 1, 1, () => {
        p = null;
      }), Me()), _[15] ? g ? (g.p(_, S), S[0] & 32768 && P(g, 1)) : (g = hv(_), g.c(), P(g, 1), g.m(e, c)) : g && (Ae(), x(g, 1, 1, () => {
        g = null;
      }), Me()), _[17] ? m && (m.d(1), m = null) : m ? m.p(_, S) : (m = dv(_), m.c(), m.m(e, null)), (!u || S[0] & 262144) && b(e, "style", _[18]);
    },
    i(_) {
      u || (P(h, _), P(s.$$.fragment, _), P(p), P(g), u = !0);
    },
    o(_) {
      x(h, _), x(s.$$.fragment, _), x(p), x(g), u = !1;
    },
    d(_) {
      _ && V(e), h && h.d(_), d && d.d(), pe(s), p && p.d(), g && g.d(), m && m.d();
    }
  };
}
function LU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = !t[8].readOnly && t[16] && t[7] && (Ct(t[7]) || Dt(t[7])) && !t[7].edit && At(t[7].focusPath, t[1]), d, p, g, m, _, S, v;
  const k = [xU, BU], C = [];
  function A(D, X) {
    return D[12] ? 0 : 1;
  }
  r = A(t), s = C[r] = k[r](t);
  const w = t[34].identifier, M = zn(w, t, t[35], ov);
  let N = !t[17] && pv();
  function T(D, X) {
    return D[12] ? zU : FU;
  }
  let O = T(t), W = O(t), H = h && gv(t), I = t[15] && (!t[12] || !t[15].isChildError) && mv(t);
  function z(D, X) {
    if (D[12])
      return UU;
    if (!D[17])
      return VU;
  }
  let L = z(t), K = L && L(t), F = t[12] && bv(t);
  return {
    c() {
      e = j("div"), n = j("div"), i = j("button"), s.c(), o = Z(), M && M.c(), l = Z(), N && N.c(), a = Z(), c = j("div"), u = j("div"), W.c(), f = Z(), H && H.c(), d = Z(), I && I.c(), p = Z(), K && K.c(), g = Z(), F && F.c(), m = rt(), b(i, "type", "button"), b(i, "class", "jse-expand svelte-lts9i5"), b(i, "title", "Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"), b(u, "class", "jse-meta-inner svelte-lts9i5"), b(c, "class", "jse-meta svelte-lts9i5"), b(c, "data-type", "selectable-value"), b(n, "class", "jse-header svelte-lts9i5"), b(e, "class", "jse-header-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(D, X) {
      U(D, e, X), E(e, n), E(n, i), C[r].m(i, null), E(n, o), M && M.m(n, null), E(n, l), N && N.m(n, null), E(n, a), E(n, c), E(c, u), W.m(u, null), E(n, f), H && H.m(n, null), E(e, d), I && I.m(e, null), E(e, p), K && K.m(e, null), U(D, g, X), F && F.m(D, X), U(D, m, X), _ = !0, S || (v = re(i, "click", t[21]), S = !0);
    },
    p(D, X) {
      let ue = r;
      r = A(D), r === ue ? C[r].p(D, X) : (Ae(), x(C[ue], 1, 1, () => {
        C[ue] = null;
      }), Me(), s = C[r], s ? s.p(D, X) : (s = C[r] = k[r](D), s.c()), P(s, 1), s.m(i, null)), M && M.p && (!_ || X[1] & 16) && Un(
        M,
        w,
        D,
        D[35],
        _ ? Vn(w, D[35], X, IU) : Hn(D[35]),
        ov
      ), D[17] ? N && (N.d(1), N = null) : N || (N = pv(), N.c(), N.m(n, a)), O === (O = T(D)) && W ? W.p(D, X) : (W.d(1), W = O(D), W && (W.c(), W.m(u, null))), X[0] & 65922 && (h = !D[8].readOnly && D[16] && D[7] && (Ct(D[7]) || Dt(D[7])) && !D[7].edit && At(D[7].focusPath, D[1])), h ? H ? (H.p(D, X), X[0] & 65922 && P(H, 1)) : (H = gv(D), H.c(), P(H, 1), H.m(n, null)) : H && (Ae(), x(H, 1, 1, () => {
        H = null;
      }), Me()), D[15] && (!D[12] || !D[15].isChildError) ? I ? (I.p(D, X), X[0] & 36864 && P(I, 1)) : (I = mv(D), I.c(), P(I, 1), I.m(e, p)) : I && (Ae(), x(I, 1, 1, () => {
        I = null;
      }), Me()), L === (L = z(D)) && K ? K.p(D, X) : (K && K.d(1), K = L && L(D), K && (K.c(), K.m(e, null))), (!_ || X[0] & 262144) && b(e, "style", D[18]), D[12] ? F ? (F.p(D, X), X[0] & 4096 && P(F, 1)) : (F = bv(D), F.c(), P(F, 1), F.m(m.parentNode, m)) : F && (Ae(), x(F, 1, 1, () => {
        F = null;
      }), Me());
    },
    i(D) {
      _ || (P(s), P(M, D), P(H), P(I), P(F), _ = !0);
    },
    o(D) {
      x(s), x(M, D), x(H), x(I), x(F), _ = !1;
    },
    d(D) {
      D && V(e), C[r].d(), M && M.d(D), N && N.d(), W.d(), H && H.d(), I && I.d(), K && K.d(), D && V(g), F && F.d(D), D && V(m), S = !1, v();
    }
  };
}
function jU(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h = !t[8].readOnly && t[16] && t[7] && (Ct(t[7]) || Dt(t[7])) && !t[7].edit && At(t[7].focusPath, t[1]), d, p, g, m, _, S, v;
  const k = [qU, WU], C = [];
  function A(D, X) {
    return D[12] ? 0 : 1;
  }
  r = A(t), s = C[r] = k[r](t);
  const w = t[34].identifier, M = zn(w, t, t[35], cv);
  let N = !t[17] && vv();
  function T(D, X) {
    return D[12] ? KU : JU;
  }
  let O = T(t), W = O(t), H = h && kv(t), I = t[15] && (!t[12] || !t[15].isChildError) && Cv(t);
  function z(D, X) {
    return D[12] ? YU : GU;
  }
  let L = z(t), K = L(t), F = t[12] && Sv(t);
  return {
    c() {
      e = j("div"), n = j("div"), i = j("button"), s.c(), o = Z(), M && M.c(), l = Z(), N && N.c(), a = Z(), c = j("div"), u = j("div"), W.c(), f = Z(), H && H.c(), d = Z(), I && I.c(), p = Z(), K.c(), g = Z(), F && F.c(), m = rt(), b(i, "type", "button"), b(i, "class", "jse-expand svelte-lts9i5"), b(i, "title", "Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"), b(u, "class", "jse-meta-inner svelte-lts9i5"), b(u, "data-type", "selectable-value"), b(c, "class", "jse-meta svelte-lts9i5"), b(n, "class", "jse-header svelte-lts9i5"), b(e, "class", "jse-header-outer svelte-lts9i5"), b(e, "style", t[18]);
    },
    m(D, X) {
      U(D, e, X), E(e, n), E(n, i), C[r].m(i, null), E(n, o), M && M.m(n, null), E(n, l), N && N.m(n, null), E(n, a), E(n, c), E(c, u), W.m(u, null), E(n, f), H && H.m(n, null), E(e, d), I && I.m(e, null), E(e, p), K.m(e, null), U(D, g, X), F && F.m(D, X), U(D, m, X), _ = !0, S || (v = re(i, "click", t[21]), S = !0);
    },
    p(D, X) {
      let ue = r;
      r = A(D), r === ue ? C[r].p(D, X) : (Ae(), x(C[ue], 1, 1, () => {
        C[ue] = null;
      }), Me(), s = C[r], s ? s.p(D, X) : (s = C[r] = k[r](D), s.c()), P(s, 1), s.m(i, null)), M && M.p && (!_ || X[1] & 16) && Un(
        M,
        w,
        D,
        D[35],
        _ ? Vn(w, D[35], X, DU) : Hn(D[35]),
        cv
      ), D[17] ? N && (N.d(1), N = null) : N || (N = vv(), N.c(), N.m(n, a)), O === (O = T(D)) && W ? W.p(D, X) : (W.d(1), W = O(D), W && (W.c(), W.m(u, null))), X[0] & 65922 && (h = !D[8].readOnly && D[16] && D[7] && (Ct(D[7]) || Dt(D[7])) && !D[7].edit && At(D[7].focusPath, D[1])), h ? H ? (H.p(D, X), X[0] & 65922 && P(H, 1)) : (H = kv(D), H.c(), P(H, 1), H.m(n, null)) : H && (Ae(), x(H, 1, 1, () => {
        H = null;
      }), Me()), D[15] && (!D[12] || !D[15].isChildError) ? I ? (I.p(D, X), X[0] & 36864 && P(I, 1)) : (I = Cv(D), I.c(), P(I, 1), I.m(e, p)) : I && (Ae(), x(I, 1, 1, () => {
        I = null;
      }), Me()), L === (L = z(D)) && K ? K.p(D, X) : (K.d(1), K = L(D), K && (K.c(), K.m(e, null))), (!_ || X[0] & 262144) && b(e, "style", D[18]), D[12] ? F ? (F.p(D, X), X[0] & 4096 && P(F, 1)) : (F = Sv(D), F.c(), P(F, 1), F.m(m.parentNode, m)) : F && (Ae(), x(F, 1, 1, () => {
        F = null;
      }), Me());
    },
    i(D) {
      _ || (P(s), P(M, D), P(H), P(I), P(F), _ = !0);
    },
    o(D) {
      x(s), x(M, D), x(H), x(I), x(F), _ = !1;
    },
    d(D) {
      D && V(e), C[r].d(), M && M.d(D), N && N.d(), W.d(), H && H.d(), I && I.d(), K.d(), D && V(g), F && F.d(D), D && V(m), S = !1, v();
    }
  };
}
function uv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function fv(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function hv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function dv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[30]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function BU(t) {
  let e, n;
  return e = new Et({ props: { data: vo } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function xU(t) {
  let e, n;
  return e = new Et({ props: { data: hr } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function pv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function FU(t) {
  let e, n, i, r = Object.keys(t[0]).length + "", s, o, l = Object.keys(t[0]).length === 1 ? "prop" : "props", a, c, u, f, h;
  return {
    c() {
      e = j("div"), e.textContent = "{", n = Z(), i = j("button"), s = _e(r), o = Z(), a = _e(l), c = Z(), u = j("div"), u.textContent = "}", b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "type", "button"), b(i, "class", "jse-tag svelte-lts9i5"), b(u, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      U(d, e, p), U(d, n, p), U(d, i, p), E(i, s), E(i, o), E(i, a), U(d, c, p), U(d, u, p), f || (h = re(i, "click", t[22]), f = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = Object.keys(d[0]).length + "") && ze(s, r), p[0] & 1 && l !== (l = Object.keys(d[0]).length === 1 ? "prop" : "props") && ze(a, l);
    },
    d(d) {
      d && V(e), d && V(n), d && V(i), d && V(c), d && V(u), f = !1, h();
    }
  };
}
function zU(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "{", b(e, "class", "jse-bracket jse-expanded svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function gv(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function mv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function VU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[30]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function UU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[29]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function bv(t) {
  let e, n = !t[8].readOnly && (t[10] === Xs || t[16] && Yn(t[7])), i, r, s, o, l, a, c = n && _v(t), u = t[19](t[1], t[0], t[2], t[3], t[4], t[5], t[6], t[7], t[11]), f = [];
  for (let p = 0; p < u.length; p += 1)
    f[p] = yv(sv(t, u, p));
  const h = (p) => x(f[p], 1, 1, () => {
    f[p] = null;
  });
  let d = !t[17] && wv(t);
  return {
    c() {
      e = j("div"), c && c.c(), i = Z();
      for (let p = 0; p < f.length; p += 1)
        f[p].c();
      r = Z(), s = j("div"), o = j("div"), o.innerHTML = '<div class="jse-bracket svelte-lts9i5">}</div>', l = Z(), d && d.c(), b(e, "class", "jse-props svelte-lts9i5"), b(o, "data-type", "selectable-value"), b(o, "class", "jse-footer svelte-lts9i5"), b(s, "class", "jse-footer-outer svelte-lts9i5"), b(s, "style", t[18]);
    },
    m(p, g) {
      U(p, e, g), c && c.m(e, null), E(e, i);
      for (let m = 0; m < f.length; m += 1)
        f[m].m(e, null);
      U(p, r, g), U(p, s, g), E(s, o), E(s, l), d && d.m(s, null), a = !0;
    },
    p(p, g) {
      if (g[0] & 66944 && (n = !p[8].readOnly && (p[10] === Xs || p[16] && Yn(p[7]))), n ? c ? (c.p(p, g), g[0] & 66944 && P(c, 1)) : (c = _v(p), c.c(), P(c, 1), c.m(e, i)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me()), g[0] & 76024319) {
        u = p[19](p[1], p[0], p[2], p[3], p[4], p[5], p[6], p[7], p[11]);
        let m;
        for (m = 0; m < u.length; m += 1) {
          const _ = sv(p, u, m);
          f[m] ? (f[m].p(_, g), P(f[m], 1)) : (f[m] = yv(_), f[m].c(), P(f[m], 1), f[m].m(e, null));
        }
        for (Ae(), m = u.length; m < f.length; m += 1)
          h(m);
        Me();
      }
      p[17] ? d && (d.d(1), d = null) : d ? d.p(p, g) : (d = wv(p), d.c(), d.m(s, null)), (!a || g[0] & 262144) && b(s, "style", p[18]);
    },
    i(p) {
      if (!a) {
        P(c);
        for (let g = 0; g < u.length; g += 1)
          P(f[g]);
        a = !0;
      }
    },
    o(p) {
      x(c), f = f.filter(Boolean);
      for (let g = 0; g < f.length; g += 1)
        x(f[g]);
      a = !1;
    },
    d(p) {
      p && V(e), c && c.d(), xt(f, p), p && V(r), p && V(s), d && d.d();
    }
  };
}
function _v(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: t[16] && Yn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside"), b(e, "style", i = cu(t[1].length + 1)), b(e, "title", E0), Se(e, "jse-hovered", t[10] === Xs), Se(e, "jse-selected", t[16] && Yn(t[7]));
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 65664 && (l.selected = s[16] && Yn(s[7])), n.$set(l), (!r || o[0] & 2 && i !== (i = cu(s[1].length + 1))) && b(e, "style", i), (!r || o[0] & 1024) && Se(e, "jse-hovered", s[10] === Xs), (!r || o[0] & 65664) && Se(e, "jse-selected", s[16] && Yn(s[7]));
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function HU(t) {
  let e, n, i, r;
  return n = new yU({
    props: {
      path: t[53].path,
      pointer: t[53].pointer,
      key: t[53].key,
      selection: t[53].selection,
      searchResultItems: t[53].keySearchResultItemsMap,
      context: t[8],
      onUpdateKey: t[23]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), b(e, "slot", "identifier"), b(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), E(e, i), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 2303 && (l.path = s[53].path), o[0] & 2303 && (l.pointer = s[53].pointer), o[0] & 2303 && (l.key = s[53].key), o[0] & 2303 && (l.selection = s[53].selection), o[0] & 2303 && (l.searchResultItems = s[53].keySearchResultItemsMap), o[0] & 256 && (l.context = s[8]), n.$set(l);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function yv(t) {
  let e, n;
  return e = new hb({
    props: {
      value: t[53].value,
      path: t[53].path,
      expandedMap: t[53].expandedMap,
      enforceStringMap: t[53].enforceStringMap,
      visibleSectionsMap: t[53].visibleSectionsMap,
      validationErrorsMap: t[53].validationErrorsMap,
      searchResultItemsMap: t[53].valueSearchResultItemsMap,
      selection: t[53].selection,
      context: t[8],
      onDragSelectionStart: t[26],
      $$slots: { identifier: [HU] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2303 && (s.value = i[53].value), r[0] & 2303 && (s.path = i[53].path), r[0] & 2303 && (s.expandedMap = i[53].expandedMap), r[0] & 2303 && (s.enforceStringMap = i[53].enforceStringMap), r[0] & 2303 && (s.visibleSectionsMap = i[53].visibleSectionsMap), r[0] & 2303 && (s.validationErrorsMap = i[53].validationErrorsMap), r[0] & 2303 && (s.searchResultItemsMap = i[53].valueSearchResultItemsMap), r[0] & 2303 && (s.selection = i[53].selection), r[0] & 256 && (s.context = i[8]), r[0] & 2559 | r[1] & 16 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function wv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[30]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function WU(t) {
  let e, n;
  return e = new Et({ props: { data: vo } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function qU(t) {
  let e, n;
  return e = new Et({ props: { data: hr } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function vv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = ":", b(e, "class", "jse-separator svelte-lts9i5");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function JU(t) {
  let e, n, i, r = t[0].length + "", s, o, l = t[0].length === 1 ? "item" : "items", a, c, u, f, h;
  return {
    c() {
      e = j("div"), e.textContent = "[", n = Z(), i = j("button"), s = _e(r), o = Z(), a = _e(l), c = Z(), u = j("div"), u.textContent = "]", b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "type", "button"), b(i, "class", "jse-tag svelte-lts9i5"), b(u, "class", "jse-bracket svelte-lts9i5");
    },
    m(d, p) {
      U(d, e, p), U(d, n, p), U(d, i, p), E(i, s), E(i, o), E(i, a), U(d, c, p), U(d, u, p), f || (h = re(i, "click", t[22]), f = !0);
    },
    p(d, p) {
      p[0] & 1 && r !== (r = d[0].length + "") && ze(s, r), p[0] & 1 && l !== (l = d[0].length === 1 ? "item" : "items") && ze(a, l);
    },
    d(d) {
      d && V(e), d && V(n), d && V(i), d && V(c), d && V(u), f = !1, h();
    }
  };
}
function KU(t) {
  let e, n, i, r = t[0].length + "", s, o, l = t[0].length === 1 ? "item" : "items", a, c;
  return {
    c() {
      e = j("div"), e.textContent = "[", n = Z(), i = j("span"), s = _e(r), o = Z(), a = _e(l), c = _e(`
              Â `), b(e, "class", "jse-bracket svelte-lts9i5"), b(i, "class", "jse-tag jse-expanded svelte-lts9i5");
    },
    m(u, f) {
      U(u, e, f), U(u, n, f), U(u, i, f), E(i, s), E(i, o), E(i, a), U(u, c, f);
    },
    p(u, f) {
      f[0] & 1 && r !== (r = u[0].length + "") && ze(s, r), f[0] & 1 && l !== (l = u[0].length === 1 ? "item" : "items") && ze(a, l);
    },
    d(u) {
      u && V(e), u && V(n), u && V(i), u && V(c);
    }
  };
}
function kv(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[8].onContextMenu
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-context-menu-pointer-anchor svelte-lts9i5");
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 256 && (o.onContextMenu = r[8].onContextMenu), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function Cv(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: t[15],
      onExpand: t[22]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 32768 && (s.validationError = i[15]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function GU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[30]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function YU(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[29]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function Sv(t) {
  let e, n = !t[8].readOnly && (t[10] === Xs || t[16] && Yn(t[7])), i, r = [], s = /* @__PURE__ */ new Map(), o, l, a, c, u, f = n && Ev(t), h = t[14] || El;
  const d = (g) => g[49];
  for (let g = 0; g < h.length; g += 1) {
    let m = lv(t, h, g), _ = d(m);
    s.set(_, r[g] = Ov(_, m));
  }
  let p = !t[17] && Tv(t);
  return {
    c() {
      e = j("div"), f && f.c(), i = Z();
      for (let g = 0; g < r.length; g += 1)
        r[g].c();
      o = Z(), l = j("div"), a = j("div"), a.innerHTML = '<span class="jse-bracket svelte-lts9i5">]</span>', c = Z(), p && p.c(), b(e, "class", "jse-items svelte-lts9i5"), b(a, "data-type", "selectable-value"), b(a, "class", "jse-footer svelte-lts9i5"), b(l, "class", "jse-footer-outer svelte-lts9i5"), b(l, "style", t[18]);
    },
    m(g, m) {
      U(g, e, m), f && f.m(e, null), E(e, i);
      for (let _ = 0; _ < r.length; _ += 1)
        r[_].m(e, null);
      U(g, o, m), U(g, l, m), E(l, a), E(l, c), p && p.m(l, null), u = !0;
    },
    p(g, m) {
      m[0] & 66944 && (n = !g[8].readOnly && (g[10] === Xs || g[16] && Yn(g[7]))), n ? f ? (f.p(g, m), m[0] & 66944 && P(f, 1)) : (f = Ev(g), f.c(), P(f, 1), f.m(e, i)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), m[0] & 68176895 && (h = g[14] || El, Ae(), r = Ys(r, m, d, 1, g, h, s, e, ip, Ov, null, lv), Me()), g[17] ? p && (p.d(1), p = null) : p ? p.p(g, m) : (p = Tv(g), p.c(), p.m(l, null)), (!u || m[0] & 262144) && b(l, "style", g[18]);
    },
    i(g) {
      if (!u) {
        P(f);
        for (let m = 0; m < h.length; m += 1)
          P(r[m]);
        u = !0;
      }
    },
    o(g) {
      x(f);
      for (let m = 0; m < r.length; m += 1)
        x(r[m]);
      u = !1;
    },
    d(g) {
      g && V(e), f && f.d();
      for (let m = 0; m < r.length; m += 1)
        r[m].d();
      g && V(o), g && V(l), p && p.d();
    }
  };
}
function Ev(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: t[16] && Yn(t[7]),
      onContextMenu: t[31]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-insert-area jse-inside svelte-lts9i5"), b(e, "data-type", "insert-selection-area-inside"), b(e, "style", i = cu(t[1].length + 1)), b(e, "title", E0), Se(e, "jse-hovered", t[10] === Xs), Se(e, "jse-selected", t[16] && Yn(t[7]));
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 65664 && (l.selected = s[16] && Yn(s[7])), n.$set(l), (!r || o[0] & 2 && i !== (i = cu(s[1].length + 1))) && b(e, "style", i), (!r || o[0] & 1024) && Se(e, "jse-hovered", s[10] === Xs), (!r || o[0] & 65664) && Se(e, "jse-selected", s[16] && Yn(s[7]));
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function XU(t) {
  let e, n, i = t[50].index + "", r;
  return {
    c() {
      e = j("div"), n = j("div"), r = _e(i), b(n, "class", "jse-index svelte-lts9i5"), b(e, "slot", "identifier"), b(e, "class", "jse-identifier svelte-lts9i5");
    },
    m(s, o) {
      U(s, e, o), E(e, n), E(n, r);
    },
    p(s, o) {
      o[0] & 18687 && i !== (i = s[50].index + "") && ze(r, i);
    },
    d(s) {
      s && V(e);
    }
  };
}
function Av(t, e) {
  let n, i, r;
  return i = new hb({
    props: {
      value: e[50].value,
      path: e[50].path,
      expandedMap: e[50].expandedMap,
      enforceStringMap: e[50].enforceStringMap,
      visibleSectionsMap: e[50].visibleSectionsMap,
      validationErrorsMap: e[50].validationErrorsMap,
      searchResultItemsMap: e[50].searchResultItemsMap,
      selection: e[50].selection,
      context: e[8],
      onDragSelectionStart: e[26],
      $$slots: { identifier: [XU] },
      $$scope: { ctx: e }
    }
  }), {
    key: t,
    first: null,
    c() {
      n = rt(), ge(i.$$.fragment), this.first = n;
    },
    m(s, o) {
      U(s, n, o), de(i, s, o), r = !0;
    },
    p(s, o) {
      e = s;
      const l = {};
      o[0] & 18687 && (l.value = e[50].value), o[0] & 18687 && (l.path = e[50].path), o[0] & 18687 && (l.expandedMap = e[50].expandedMap), o[0] & 18687 && (l.enforceStringMap = e[50].enforceStringMap), o[0] & 18687 && (l.visibleSectionsMap = e[50].visibleSectionsMap), o[0] & 18687 && (l.validationErrorsMap = e[50].validationErrorsMap), o[0] & 18687 && (l.searchResultItemsMap = e[50].searchResultItemsMap), o[0] & 18687 && (l.selection = e[50].selection), o[0] & 256 && (l.context = e[8]), o[0] & 18687 | o[1] & 16 && (l.$$scope = { dirty: o, ctx: e }), i.$set(l);
    },
    i(s) {
      r || (P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(n), pe(i, s);
    }
  };
}
function Mv(t) {
  let e, n;
  return e = new aU({
    props: {
      visibleSections: t[14] || El,
      sectionIndex: t[49],
      total: t[0].length,
      path: t[1],
      pointer: t[9],
      onExpandSection: t[8].onExpandSection,
      selection: t[7]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16384 && (s.visibleSections = i[14] || El), r[0] & 16384 && (s.sectionIndex = i[49]), r[0] & 1 && (s.total = i[0].length), r[0] & 2 && (s.path = i[1]), r[0] & 512 && (s.pointer = i[9]), r[0] & 256 && (s.onExpandSection = i[8].onExpandSection), r[0] & 128 && (s.selection = i[7]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Ov(t, e) {
  let n, i = [], r = /* @__PURE__ */ new Map(), s, o, l, a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]);
  const c = (f) => f[50].index;
  for (let f = 0; f < a.length; f += 1) {
    let h = av(e, a, f), d = c(h);
    r.set(d, i[f] = Av(d, h));
  }
  let u = e[47].end < e[0].length && Mv(e);
  return {
    key: t,
    first: null,
    c() {
      n = rt();
      for (let f = 0; f < i.length; f += 1)
        i[f].c();
      s = Z(), u && u.c(), o = rt(), this.first = n;
    },
    m(f, h) {
      U(f, n, h);
      for (let d = 0; d < i.length; d += 1)
        i[d].m(f, h);
      U(f, s, h), u && u.m(f, h), U(f, o, h), l = !0;
    },
    p(f, h) {
      e = f, h[0] & 68176383 && (a = e[20](e[1], e[0], e[47], e[2], e[3], e[4], e[5], e[6], e[7], e[11]), Ae(), i = Ys(i, h, c, 1, e, a, r, s.parentNode, ip, Av, s, av), Me()), e[47].end < e[0].length ? u ? (u.p(e, h), h[0] & 16385 && P(u, 1)) : (u = Mv(e), u.c(), P(u, 1), u.m(o.parentNode, o)) : u && (Ae(), x(u, 1, 1, () => {
        u = null;
      }), Me());
    },
    i(f) {
      if (!l) {
        for (let h = 0; h < a.length; h += 1)
          P(i[h]);
        P(u), l = !0;
      }
    },
    o(f) {
      for (let h = 0; h < i.length; h += 1)
        x(i[h]);
      x(u), l = !1;
    },
    d(f) {
      f && V(n);
      for (let h = 0; h < i.length; h += 1)
        i[h].d(f);
      f && V(s), u && u.d(f), f && V(o);
    }
  };
}
function Tv(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), b(e, "class", "jse-insert-selection-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[30]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function Rv(t) {
  let e, n, i;
  return n = new Xo({
    props: {
      selected: t[16] && jr(t[7]),
      onContextMenu: t[32]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-insert-area jse-after svelte-lts9i5"), b(e, "data-type", "insert-selection-area-after"), b(e, "style", t[18]), b(e, "title", E0), Se(e, "jse-hovered", t[10] === Xc), Se(e, "jse-selected", t[16] && jr(t[7]));
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 65664 && (o.selected = r[16] && jr(r[7])), n.$set(o), (!i || s[0] & 262144) && b(e, "style", r[18]), (!i || s[0] & 1024) && Se(e, "jse-hovered", r[10] === Xc), (!i || s[0] & 65664) && Se(e, "jse-selected", r[16] && jr(r[7]));
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function QU(t) {
  let e, n, i, r, s, o, l = !t[8].readOnly && (t[10] === Xc || t[16] && jr(t[7])), a, c, u, f, h;
  const d = [jU, LU, NU], p = [];
  function g(_, S) {
    return S[0] & 1 && (n = null), S[0] & 1 && (i = null), n == null && (n = !!Array.isArray(_[0])), n ? 0 : (i == null && (i = !!An(_[0])), i ? 1 : 2);
  }
  r = g(t, [-1, -1]), s = p[r] = d[r](t);
  let m = l && Rv(t);
  return {
    c() {
      e = j("div"), s.c(), o = Z(), m && m.c(), b(e, "class", a = mn(Ss("jse-json-node", { "jse-expanded": t[12] }, t[8].onClassName(t[1], t[0]))) + " svelte-lts9i5"), b(e, "data-path", c = Da(t[1])), Se(e, "jse-root", t[17]), Se(e, "jse-selected", t[16] && Dt(t[7])), Se(e, "jse-selected-key", t[16] && Nn(t[7])), Se(e, "jse-selected-value", t[16] && Ct(t[7])), Se(e, "jse-readonly", t[8].readOnly), Se(e, "jse-hovered", t[10] === Lm);
    },
    m(_, S) {
      U(_, e, S), p[r].m(e, null), E(e, o), m && m.m(e, null), u = !0, f || (h = [
        re(e, "mousedown", t[24]),
        re(e, "mousemove", t[25]),
        re(e, "mouseover", t[27]),
        re(e, "mouseout", t[28]),
        re(e, "focus", void 0),
        re(e, "blur", void 0)
      ], f = !0);
    },
    p(_, S) {
      let v = r;
      r = g(_, S), r === v ? p[r].p(_, S) : (Ae(), x(p[v], 1, 1, () => {
        p[v] = null;
      }), Me(), s = p[r], s ? s.p(_, S) : (s = p[r] = d[r](_), s.c()), P(s, 1), s.m(e, o)), S[0] & 66944 && (l = !_[8].readOnly && (_[10] === Xc || _[16] && jr(_[7]))), l ? m ? (m.p(_, S), S[0] & 66944 && P(m, 1)) : (m = Rv(_), m.c(), P(m, 1), m.m(e, null)) : m && (Ae(), x(m, 1, 1, () => {
        m = null;
      }), Me()), (!u || S[0] & 4355 && a !== (a = mn(Ss("jse-json-node", { "jse-expanded": _[12] }, _[8].onClassName(_[1], _[0]))) + " svelte-lts9i5")) && b(e, "class", a), (!u || S[0] & 2 && c !== (c = Da(_[1]))) && b(e, "data-path", c), (!u || S[0] & 135427) && Se(e, "jse-root", _[17]), (!u || S[0] & 70019) && Se(e, "jse-selected", _[16] && Dt(_[7])), (!u || S[0] & 70019) && Se(e, "jse-selected-key", _[16] && Nn(_[7])), (!u || S[0] & 70019) && Se(e, "jse-selected-value", _[16] && Ct(_[7])), (!u || S[0] & 4355) && Se(e, "jse-readonly", _[8].readOnly), (!u || S[0] & 5379) && Se(e, "jse-hovered", _[10] === Lm);
    },
    i(_) {
      u || (P(s), P(m), u = !0);
    },
    o(_) {
      x(s), x(m), u = !1;
    },
    d(_) {
      _ && V(e), p[r].d(), m && m.d(), f = !1, ct(h);
    }
  };
}
function cu(t) {
  return `margin-left: calc(${t} * var(--jse-indent-size))`;
}
function ZU(t, e, n) {
  let i, r, { $$slots: s = {}, $$scope: o } = e, { value: l } = e, { path: a } = e, { expandedMap: c } = e, { enforceStringMap: u } = e, { visibleSectionsMap: f } = e, { validationErrorsMap: h } = e, { searchResultItemsMap: d } = e, { selection: p } = e, { context: g } = e, { onDragSelectionStart: m } = e;
  const _ = mi("jsoneditor:JSONNode");
  let S, v, k;
  const C = Zj();
  let A, w, M, N, T, O;
  function W(fe, Pe, ae, $, he, Ce, J, y, R) {
    let B = Object.keys(Pe).map((Q) => {
      const G = xm(A, Q);
      return {
        key: Q,
        value: Pe[Q],
        path: C(fe.concat(Q)),
        pointer: G,
        expandedMap: Qr(ae, G),
        enforceStringMap: Qr($, G),
        visibleSectionsMap: Qr(he, G),
        validationErrorsMap: Qr(Ce, G),
        keySearchResultItemsMap: _x(J, G),
        valueSearchResultItemsMap: Qr(J, G),
        selection: Mw(y, G)
      };
    });
    return R && R.offset !== 0 && (B = aw(B, R.selectionStartIndex, R.selectionItemsCount, R.offset)), B;
  }
  function H(fe, Pe, ae, $, he, Ce, J, y, R, B) {
    const Q = ae.start, G = Math.min(ae.end, Pe.length);
    let ce = [];
    for (let De = Q; De < G; De++) {
      const We = xm(A, De);
      ce.push({
        index: De,
        value: Pe[De],
        path: C(fe.concat(String(De))),
        pointer: We,
        expandedMap: Qr($, We),
        enforceStringMap: Qr(he, We),
        visibleSectionsMap: Qr(Ce, We),
        validationErrorsMap: Qr(J, We),
        searchResultItemsMap: Qr(y, We),
        selection: Mw(R, We)
      });
    }
    if (B && B.offset !== 0) {
      const De = ce.map((We) => We.index);
      ce = aw(ce, B.selectionStartIndex, B.selectionItemsCount, B.offset);
      for (let We = 0; We < ce.length; We++)
        ce[We].index = De[We];
    }
    return ce;
  }
  function I(fe) {
    fe.stopPropagation();
    const Pe = fe.ctrlKey;
    g.onExpand(a, !w, Pe);
  }
  function z(fe) {
    fe.stopPropagation(), g.onExpand(a, !0);
  }
  function L(fe, Pe) {
    const ae = Wu(a, Object.keys(l), fe, Pe);
    return g.onPatch(ae), at(Vr(ae[0].path));
  }
  function K(fe) {
    if (Rj(fe.target) || fe.which === 1 && t6(fe.target, "BUTTON"))
      return;
    fe.stopPropagation(), fe.preventDefault(), document.addEventListener("mousemove", D, !0), document.addEventListener("mouseup", X);
    const Pe = Rg(fe.target), ae = g.getJson(), $ = g.getDocumentState();
    if (y6(p, a, Pe)) {
      fe.button === 0 && m(fe);
      return;
    }
    if (ai.selecting = !0, ai.selectionAnchor = a, ai.selectionAnchorType = Pe, ai.selectionFocus = a, fe.shiftKey)
      p && g.onSelect(Dn(ae, p.anchorPath, a));
    else if (Pe === qt.multi)
      if (i && fe.target.hasAttribute("data-path")) {
        const he = at(b6(l, $));
        g.onSelect(Z0(he));
      } else
        g.onSelect(Dn(ae, a, a));
    else
      g.onSelect(Aw(ae, Pe, a));
    g.focus();
  }
  function F(fe) {
    if (ai.selecting) {
      fe.preventDefault(), fe.stopPropagation(), ai.selectionFocus == null && window.getSelection && window.getSelection().empty();
      const Pe = Rg(fe.target);
      if (!At(a, ai.selectionFocus) || Pe !== ai.selectionAnchorType) {
        ai.selectionFocus = a, ai.selectionAnchorType = Pe;
        const ae = g.getJson();
        g.onSelect(Dn(ae, ai.selectionAnchor, ai.selectionFocus));
      }
    }
  }
  function D(fe) {
    g.onDrag(fe);
  }
  function X(fe) {
    ai.selecting && (ai.selecting = !1, fe.stopPropagation()), g.onDragEnd(), document.removeEventListener("mousemove", D, !0), document.removeEventListener("mouseup", X);
  }
  function ue() {
    var fe, Pe;
    return ((Pe = (fe = g.findElement([])) == null ? void 0 : fe.getBoundingClientRect()) == null ? void 0 : Pe.top) || 0;
  }
  function q(fe, Pe) {
    const $ = ue() - fe.initialContentTop;
    return Pe.clientY - fe.initialClientY - $;
  }
  function ee(fe) {
    if (g.readOnly)
      return;
    const Pe = St(p.focusPath);
    if (!At(a, Pe)) {
      m(fe);
      return;
    }
    const ae = je(p, N || El);
    if (_("dragSelectionStart", { selection: p, items: ae }), !ae) {
      _("Cannot drag the current selection (probably spread over multiple sections)");
      return;
    }
    const $ = Na(p), he = ae.findIndex((R) => At(R.path, $)), Ce = g.getJson(), J = g.getDocumentState(), { offset: y } = xg({ json: Ce, documentState: J, deltaY: 0, items: ae });
    n(11, k = {
      initialTarget: fe.target,
      initialClientY: fe.clientY,
      initialContentTop: ue(),
      selectionStartIndex: he,
      selectionItemsCount: C6(p).length,
      items: ae,
      offset: y,
      didMoveItems: !1
    }), ai.dragging = !0, document.addEventListener("mousemove", ie, !0), document.addEventListener("mouseup", ne);
  }
  function ie(fe) {
    if (k) {
      const Pe = g.getJson(), ae = g.getDocumentState(), $ = q(k, fe), { offset: he } = xg({
        json: Pe,
        documentState: ae,
        deltaY: $,
        items: k.items
      });
      he !== k.offset && (_("drag selection", he, $), n(11, k = { ...k, offset: he, didMoveItems: !0 }));
    }
  }
  function ne(fe) {
    if (k) {
      const Pe = g.getJson(), ae = g.getDocumentState(), $ = q(k, fe), { operations: he, updatedSelection: Ce } = xg({
        json: Pe,
        documentState: ae,
        deltaY: $,
        items: k.items
      });
      if (he)
        g.onPatch(he, (J, y) => ({
          state: {
            ...y,
            selection: Ce || p
          }
        }));
      else if (fe.target === k.initialTarget && !k.didMoveItems) {
        const J = Rg(fe.target), y = r6(fe.target);
        y && g.onSelect(Aw(Pe, J, y));
      }
      n(11, k = void 0), ai.dragging = !1, document.removeEventListener("mousemove", ie, !0), document.removeEventListener("mouseup", ne);
    }
  }
  function je(fe, Pe) {
    const ae = [];
    function $(he) {
      const Ce = a.concat(he), J = g.findElement(Ce);
      J != null && ae.push({
        path: Ce,
        height: J.clientHeight
      });
    }
    if (Array.isArray(l)) {
      const he = Na(fe), Ce = Cp(fe), J = at(he), y = at(Ce), R = Pe.find((G) => J >= G.start && y <= G.end);
      if (!R)
        return null;
      const { start: B, end: Q } = R;
      q5(B, Math.min(l.length, Q), (G) => $(String(G)));
    } else
      Object.keys(l).forEach($);
    return ae;
  }
  function Ie(fe) {
    ai.selecting || ai.dragging || (fe.stopPropagation(), hl(fe.target, "data-type", "selectable-value") ? n(10, S = Lm) : hl(fe.target, "data-type", "insert-selection-area-inside") ? n(10, S = Xs) : hl(fe.target, "data-type", "insert-selection-area-after") && n(10, S = Xc), clearTimeout(v));
  }
  function Xe(fe) {
    fe.stopPropagation(), v = setTimeout(() => n(10, S = void 0));
  }
  function le(fe) {
    fe.shiftKey || (fe.stopPropagation(), fe.preventDefault(), g.onSelect(Zs(a)));
  }
  function Ne(fe) {
    fe.shiftKey || (fe.stopPropagation(), fe.preventDefault(), g.onSelect($s(a)));
  }
  function nt(fe) {
    g.onSelect(Zs(a)), g.onContextMenu(fe);
  }
  function ke(fe) {
    g.onSelect($s(a)), g.onContextMenu(fe);
  }
  return t.$$set = (fe) => {
    "value" in fe && n(0, l = fe.value), "path" in fe && n(1, a = fe.path), "expandedMap" in fe && n(2, c = fe.expandedMap), "enforceStringMap" in fe && n(3, u = fe.enforceStringMap), "visibleSectionsMap" in fe && n(4, f = fe.visibleSectionsMap), "validationErrorsMap" in fe && n(5, h = fe.validationErrorsMap), "searchResultItemsMap" in fe && n(6, d = fe.searchResultItemsMap), "selection" in fe && n(7, p = fe.selection), "context" in fe && n(8, g = fe.context), "onDragSelectionStart" in fe && n(33, m = fe.onDragSelectionStart), "$$scope" in fe && n(35, o = fe.$$scope);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 2 && n(9, A = xe(a)), t.$$.dirty[0] & 516 && n(12, w = c ? c[A] === !0 : !1), t.$$.dirty[0] & 777 && n(13, M = Qs(l, u, A, g.parser)), t.$$.dirty[0] & 528 && n(14, N = f ? f[A] : void 0), t.$$.dirty[0] & 544 && n(15, T = h ? h[A] : void 0), t.$$.dirty[0] & 640 && n(16, O = p ? p.pointersMap[A] === !0 : !1), t.$$.dirty[0] & 2 && n(17, i = a.length === 0), t.$$.dirty[0] & 2 && n(18, r = cu(a.length));
  }, [
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    A,
    S,
    k,
    w,
    M,
    N,
    T,
    O,
    i,
    r,
    W,
    H,
    I,
    z,
    L,
    K,
    F,
    ee,
    Ie,
    Xe,
    le,
    Ne,
    nt,
    ke,
    m,
    s,
    o
  ];
}
class hb extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      ZU,
      QU,
      yt,
      {
        value: 0,
        path: 1,
        expandedMap: 2,
        enforceStringMap: 3,
        visibleSectionsMap: 4,
        validationErrorsMap: 5,
        searchResultItemsMap: 6,
        selection: 7,
        context: 8,
        onDragSelectionStart: 33
      },
      null,
      [-1, -1]
    );
  }
}
const $U = hb, eH = {
  prefix: "fas",
  iconName: "jsoneditor-expand",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"
  ]
}, tH = {
  prefix: "fas",
  iconName: "jsoneditor-collapse",
  icon: [
    512,
    512,
    [],
    null,
    "m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"
  ]
}, nH = {
  prefix: "fas",
  iconName: "jsoneditor-format",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"
  ]
}, iH = {
  prefix: "fas",
  iconName: "jsoneditor-compact",
  icon: [
    512,
    512,
    [],
    null,
    "M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"
  ]
};
function rH(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function sH(t, e, n) {
  let i, r, s, { json: o } = e, { selection: l } = e, { readOnly: a } = e, { showSearch: c = !1 } = e, { historyState: u } = e, { onExpandAll: f } = e, { onCollapseAll: h } = e, { onUndo: d } = e, { onRedo: p } = e, { onSort: g } = e, { onTransform: m } = e, { onContextMenu: _ } = e, { onCopy: S } = e, { onRenderMenu: v } = e;
  function k() {
    n(1, c = !c);
  }
  let C, A, w, M;
  return t.$$set = (N) => {
    "json" in N && n(2, o = N.json), "selection" in N && n(3, l = N.selection), "readOnly" in N && n(4, a = N.readOnly), "showSearch" in N && n(1, c = N.showSearch), "historyState" in N && n(5, u = N.historyState), "onExpandAll" in N && n(6, f = N.onExpandAll), "onCollapseAll" in N && n(7, h = N.onCollapseAll), "onUndo" in N && n(8, d = N.onUndo), "onRedo" in N && n(9, p = N.onRedo), "onSort" in N && n(10, g = N.onSort), "onTransform" in N && n(11, m = N.onTransform), "onContextMenu" in N && n(12, _ = N.onContextMenu), "onCopy" in N && n(13, S = N.onCopy), "onRenderMenu" in N && n(14, v = N.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 4 && n(20, i = o !== void 0), t.$$.dirty & 8, t.$$.dirty & 1048584 && n(19, r = i && (Dt(l) || Nn(l) || Ct(l))), t.$$.dirty & 68 && n(15, C = {
      type: "button",
      icon: eH,
      title: "Expand all",
      className: "jse-expand-all",
      onClick: f,
      disabled: !dn(o)
    }), t.$$.dirty & 132 && n(16, A = {
      type: "button",
      icon: tH,
      title: "Collapse all",
      className: "jse-collapse-all",
      onClick: h,
      disabled: !dn(o)
    }), t.$$.dirty & 4 && n(17, w = {
      type: "button",
      icon: nb,
      title: "Search (Ctrl+F)",
      className: "jse-search",
      onClick: k,
      disabled: o === void 0
    }), t.$$.dirty & 769844 && n(18, M = a ? [
      C,
      A,
      { type: "separator" },
      {
        type: "button",
        icon: Oo,
        title: "Copy (Ctrl+C)",
        className: "jse-copy",
        onClick: S,
        disabled: !r
      },
      { type: "separator" },
      w,
      { type: "space" }
    ] : [
      C,
      A,
      { type: "separator" },
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: g,
        disabled: a || o === void 0
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: m,
        disabled: a || o === void 0
      },
      w,
      {
        type: "button",
        icon: D6,
        title: A0,
        className: "jse-contextmenu",
        onClick: _
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: d,
        disabled: !u.canUndo
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: p,
        disabled: !u.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 278528 && n(0, s = v("tree", M) || M);
  }, [
    s,
    c,
    o,
    l,
    a,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    C,
    A,
    w,
    M,
    r,
    i
  ];
}
class oH extends Ge {
  constructor(e) {
    super(), Ke(this, e, sH, rH, yt, {
      json: 2,
      selection: 3,
      readOnly: 4,
      showSearch: 1,
      historyState: 5,
      onExpandAll: 6,
      onCollapseAll: 7,
      onUndo: 8,
      onRedo: 9,
      onSort: 10,
      onTransform: 11,
      onContextMenu: 12,
      onCopy: 13,
      onRenderMenu: 14
    });
  }
}
const lH = oH;
function Pv(t) {
  let e;
  return {
    c() {
      e = j("ul"), e.innerHTML = `<li class="svelte-1q2qkk2">Click inside the editor</li> 
        <li class="svelte-1q2qkk2">Paste clipboard data using <span class="jse-bold svelte-1q2qkk2">Ctrl+V</span></li> 
        <li class="svelte-1q2qkk2">Create a new object by typing <span class="jse-bold svelte-1q2qkk2">{</span></li> 
        <li class="svelte-1q2qkk2">Create a new array by typing <span class="jse-bold svelte-1q2qkk2">[</span></li>`, b(e, "class", "svelte-1q2qkk2");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function aH(t) {
  let e, n, i, r, s, o, l, a = !t[0] && Pv();
  return {
    c() {
      e = j("div"), n = j("div"), i = Z(), r = j("div"), s = _e(`Empty document
    `), a && a.c(), o = Z(), l = j("div"), b(n, "class", "jse-space jse-before svelte-1q2qkk2"), b(r, "class", "jse-contents svelte-1q2qkk2"), b(l, "class", "jse-space jse-after svelte-1q2qkk2"), b(e, "class", "jse-welcome svelte-1q2qkk2");
    },
    m(c, u) {
      U(c, e, u), E(e, n), E(e, i), E(e, r), E(r, s), a && a.m(r, null), E(e, o), E(e, l);
    },
    p(c, [u]) {
      c[0] ? a && (a.d(1), a = null) : a || (a = Pv(), a.c(), a.m(r, null));
    },
    i: ye,
    o: ye,
    d(c) {
      c && V(e), a && a.d();
    }
  };
}
function cH(t, e, n) {
  let { readOnly: i } = e;
  return t.$$set = (r) => {
    "readOnly" in r && n(0, i = r.readOnly);
  }, [i];
}
class uH extends Ge {
  constructor(e) {
    super(), Ke(this, e, cH, aH, yt, { readOnly: 0 });
  }
}
const fH = uH;
var Y6 = { exports: {} };
/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */
var Iv = function(t, e) {
  var n, i, r = 1, s = 0, o = 0, l = String.alphabet;
  function a(c, u, f) {
    if (f) {
      for (n = u; f = a(c, n), f < 76 && f > 65; )
        ++n;
      return +c.slice(u - 1, n);
    }
    return f = l && l.indexOf(c.charAt(u)), f > -1 ? f + 76 : (f = c.charCodeAt(u) || 0, f < 45 || f > 127 ? f : f < 46 ? 65 : f < 48 ? f - 1 : f < 58 ? f + 18 : f < 65 ? f - 11 : f < 91 ? f + 11 : f < 97 ? f - 37 : f < 123 ? f + 5 : f - 63);
  }
  if ((t += "") != (e += "")) {
    for (; r; )
      if (i = a(t, s++), r = a(e, o++), i < 76 && r < 76 && i > 66 && r > 66 && (i = a(t, s, s), r = a(e, o, s = n), o = n), i != r)
        return i < r ? -1 : 1;
  }
  return 0;
};
try {
  Y6.exports = Iv;
} catch {
  String.naturalCompare = Iv;
}
function db(t, e) {
  const n = typeof t == "string" ? t.toLowerCase() : t, i = typeof e == "string" ? e.toLowerCase() : e;
  return Y6.exports(n, i);
}
function X6(t, e = [], n = [], i = 1) {
  if (Ut(Ye(t, e))) {
    if (n === void 0)
      throw new Error("Cannot sort: no property selected by which to sort the array");
    return dH(t, e, n, i);
  }
  if (An(t))
    return hH(t, e, i);
  throw new Error("Cannot sort: no array or object");
}
function hH(t, e = [], n = 1) {
  const i = Ye(t, e), s = Object.keys(i).slice();
  s.sort((l, a) => n * db(l, a));
  const o = [];
  for (let l = 0; l < s.length; l++) {
    const a = s[l], c = xe(e.concat(a));
    o.push({
      op: "move",
      from: c,
      path: c
    });
  }
  return o;
}
function dH(t, e = [], n = [], i = 1) {
  const r = pH(n, i), s = Ye(t, e);
  return [
    {
      op: "replace",
      path: xe(e),
      value: s.slice(0).sort(r)
    }
  ];
}
function pH(t, e) {
  return function(i, r) {
    const s = Ye(i, t), o = Ye(r, t);
    return s === void 0 ? e : o === void 0 ? -e : typeof s != "string" && typeof o != "string" ? s > o ? e : s < o ? -e : 0 : e * db(s, o);
  };
}
function Dv(t, e, n) {
  const i = t.slice();
  return i[4] = e[n], i;
}
function Nv(t, e) {
  let n, i = Cs(e[4].toString(), jv) + "", r, s, o, l;
  function a() {
    return e[3](e[4]);
  }
  return {
    key: t,
    first: null,
    c() {
      n = j("button"), r = _e(i), b(n, "type", "button"), b(n, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), b(n, "title", s = e[4].toString()), Se(n, "jse-selected", e[4] === e[1]), this.first = n;
    },
    m(c, u) {
      U(c, n, u), E(n, r), o || (l = re(n, "click", Je(a)), o = !0);
    },
    p(c, u) {
      e = c, u & 1 && i !== (i = Cs(e[4].toString(), jv) + "") && ze(r, i), u & 1 && s !== (s = e[4].toString()) && b(n, "title", s), u & 3 && Se(n, "jse-selected", e[4] === e[1]);
    },
    d(c) {
      c && V(n), o = !1, l();
    }
  };
}
function Lv(t) {
  let e, n;
  return {
    c() {
      e = j("button"), n = _e("..."), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-dropdown-item svelte-6hb2gf"), b(e, "title", "Limited to " + Ac + " items");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p: ye,
    d(i) {
      i && V(e);
    }
  };
}
function gH(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s = Jh(t[0], Ac);
  const o = (a) => a[4];
  for (let a = 0; a < s.length; a += 1) {
    let c = Dv(t, s, a), u = o(c);
    i.set(u, n[a] = Nv(u, c));
  }
  let l = t[0].length > Ac && Lv();
  return {
    c() {
      e = j("div");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      r = Z(), l && l.c(), b(e, "class", "jse-navigation-bar-dropdown svelte-6hb2gf");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      E(e, r), l && l.m(e, null);
    },
    p(a, [c]) {
      c & 7 && (s = Jh(a[0], Ac), n = Ys(n, c, o, 1, a, s, i, e, Bu, Nv, r, Dv)), a[0].length > Ac ? l ? l.p(a, c) : (l = Lv(), l.c(), l.m(e, null)) : l && (l.d(1), l = null);
    },
    i: ye,
    o: ye,
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      l && l.d();
    }
  };
}
const Ac = 100, jv = 30;
function mH(t, e, n) {
  let { items: i } = e, { selectedItem: r } = e, { onSelect: s } = e;
  const o = (l) => s(l);
  return t.$$set = (l) => {
    "items" in l && n(0, i = l.items), "selectedItem" in l && n(1, r = l.selectedItem), "onSelect" in l && n(2, s = l.onSelect);
  }, [i, r, s, o];
}
class bH extends Ge {
  constructor(e) {
    super(), Ke(this, e, mH, gH, yt, { items: 0, selectedItem: 1, onSelect: 2 });
  }
}
const _H = bH;
function Bv(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("button"), n = _e(t[2]), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-button svelte-1r1k9th");
    },
    m(s, o) {
      U(s, e, o), E(e, n), i || (r = re(e, "click", t[9]), i = !0);
    },
    p(s, o) {
      o & 4 && ze(n, s[2]);
    },
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function yH(t) {
  let e, n, i, r, s, o, l;
  i = new Et({ props: { data: I6 } });
  let a = t[2] !== void 0 && Bv(t);
  return {
    c() {
      e = j("div"), n = j("button"), ge(i.$$.fragment), r = Z(), a && a.c(), b(n, "type", "button"), b(n, "class", "jse-navigation-bar-button jse-navigation-bar-arrow svelte-1r1k9th"), Se(n, "jse-open", t[1]), b(e, "class", "jse-navigation-bar-item svelte-1r1k9th");
    },
    m(c, u) {
      U(c, e, u), E(e, n), de(i, n, null), E(e, r), a && a.m(e, null), t[10](e), s = !0, o || (l = re(n, "click", t[4]), o = !0);
    },
    p(c, [u]) {
      (!s || u & 2) && Se(n, "jse-open", c[1]), c[2] !== void 0 ? a ? a.p(c, u) : (a = Bv(c), a.c(), a.m(e, null)) : a && (a.d(1), a = null);
    },
    i(c) {
      s || (P(i.$$.fragment, c), s = !0);
    },
    o(c) {
      x(i.$$.fragment, c), s = !1;
    },
    d(c) {
      c && V(e), pe(i), a && a.d(), t[10](null), o = !1, l();
    }
  };
}
function wH(t, e, n) {
  let i, r;
  const { openAbsolutePopup: s, closeAbsolutePopup: o } = gi("absolute-popup");
  let { path: l } = e, { index: a } = e, { onSelect: c } = e, { getItems: u } = e, f, h = !1, d;
  function p(S) {
    o(d), c(i.concat(S));
  }
  function g() {
    if (f) {
      n(1, h = !0);
      const S = {
        items: u(i),
        selectedItem: r,
        onSelect: p
      };
      d = s(_H, S, {
        anchor: f,
        closeOnOuterClick: !0,
        onClose: () => {
          n(1, h = !1);
        }
      });
    }
  }
  const m = () => p(r);
  function _(S) {
    _t[S ? "unshift" : "push"](() => {
      f = S, n(0, f);
    });
  }
  return t.$$set = (S) => {
    "path" in S && n(5, l = S.path), "index" in S && n(6, a = S.index), "onSelect" in S && n(7, c = S.onSelect), "getItems" in S && n(8, u = S.getItems);
  }, t.$$.update = () => {
    t.$$.dirty & 96 && (i = l.slice(0, a)), t.$$.dirty & 96 && n(2, r = l[a]);
  }, [
    f,
    h,
    r,
    p,
    g,
    l,
    a,
    c,
    u,
    m,
    _
  ];
}
class vH extends Ge {
  constructor(e) {
    super(), Ke(this, e, wH, yH, yt, {
      path: 5,
      index: 6,
      onSelect: 7,
      getItems: 8
    });
  }
}
const Q6 = vH;
function pb(t) {
  var e;
  if (navigator.clipboard)
    return navigator.clipboard.writeText(t);
  if ((e = document.queryCommandSupported) != null && e.call(document, "copy")) {
    const n = document.createElement("textarea");
    n.value = t, n.style.position = "fixed", n.style.opacity = "0", document.body.appendChild(n), n.select();
    try {
      document.execCommand("copy");
    } catch (i) {
      console.error(i);
    } finally {
      document.body.removeChild(n);
    }
  } else
    console.error("Copy failed.");
}
function xv(t) {
  let e, n, i, r, s, o;
  return n = new Et({ props: { data: ql } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-navigation-bar-validation-error svelte-g0evpe");
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), r = !0, s || (o = qi(i = $0.call(null, e, {
        text: t[3],
        ...t[4]
      })), s = !0);
    },
    p(l, a) {
      i && hi(i.update) && a & 8 && i.update.call(null, {
        text: l[3],
        ...l[4]
      });
    },
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n), s = !1, o();
    }
  };
}
function Fv(t) {
  let e;
  return {
    c() {
      e = j("div"), e.textContent = "Copied!", b(e, "class", "jse-copied-text svelte-g0evpe");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function kH(t) {
  let e, n, i, r, s, o, l, a, c, u, f = t[3] && xv(t), h = t[2] && Fv();
  return l = new Et({ props: { data: Oo } }), {
    c() {
      e = j("div"), n = j("input"), i = Z(), f && f.c(), r = Z(), h && h.c(), s = Z(), o = j("button"), ge(l.$$.fragment), b(n, "type", "text"), b(n, "class", "jse-navigation-bar-text svelte-g0evpe"), n.value = t[0], b(o, "type", "button"), b(o, "class", "jse-navigation-bar-copy svelte-g0evpe"), b(o, "title", "Copy selected path to the clipboard"), Se(o, "copied", t[2]), b(e, "class", "jse-navigation-bar-path-editor svelte-g0evpe"), Se(e, "error", t[3]);
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[15](n), E(e, i), f && f.m(e, null), E(e, r), h && h.m(e, null), E(e, s), E(e, o), de(l, o, null), a = !0, c || (u = [
        re(n, "keydown", Je(t[6])),
        re(n, "input", t[5]),
        re(o, "click", t[7])
      ], c = !0);
    },
    p(d, [p]) {
      (!a || p & 1 && n.value !== d[0]) && (n.value = d[0]), d[3] ? f ? (f.p(d, p), p & 8 && P(f, 1)) : (f = xv(d), f.c(), P(f, 1), f.m(e, r)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), d[2] ? h || (h = Fv(), h.c(), h.m(e, s)) : h && (h.d(1), h = null), (!a || p & 4) && Se(o, "copied", d[2]), (!a || p & 8) && Se(e, "error", d[3]);
    },
    i(d) {
      a || (P(f), P(l.$$.fragment, d), a = !0);
    },
    o(d) {
      x(f), x(l.$$.fragment, d), a = !1;
    },
    d(d) {
      d && V(e), t[15](null), f && f.d(), h && h.d(), pe(l), c = !1, ct(u);
    }
  };
}
const CH = 1e3;
function SH(t, e, n) {
  let i;
  const r = gi("absolute-popup");
  let { path: s } = e, { pathParser: o } = e, { onChange: l } = e, { onClose: a } = e, { onError: c } = e, { pathExists: u } = e, f, h, d = !1, p, g = !1;
  or(() => {
    m();
  }), ks(() => {
    clearTimeout(p);
  });
  function m() {
    f.focus();
  }
  function _(w) {
    try {
      const M = o.parse(w);
      return S(M), { path: M, error: void 0 };
    } catch (M) {
      return { path: void 0, error: M };
    }
  }
  function S(w) {
    if (!u(w))
      throw new Error("Path does not exist in current document");
  }
  function v(w) {
    n(0, h = w.currentTarget.value);
  }
  function k(w) {
    const M = Go(w);
    if (M === "Escape" && a(), M === "Enter") {
      n(14, d = !0);
      const N = _(h);
      N.path !== void 0 ? l(N.path) : c(N.error);
    }
  }
  function C() {
    pb(h), n(2, g = !0), p = setTimeout(() => n(2, g = !1), CH), m();
  }
  function A(w) {
    _t[w ? "unshift" : "push"](() => {
      f = w, n(1, f);
    });
  }
  return t.$$set = (w) => {
    "path" in w && n(8, s = w.path), "pathParser" in w && n(9, o = w.pathParser), "onChange" in w && n(10, l = w.onChange), "onClose" in w && n(11, a = w.onClose), "onError" in w && n(12, c = w.onError), "pathExists" in w && n(13, u = w.pathExists);
  }, t.$$.update = () => {
    t.$$.dirty & 768 && n(0, h = o.stringify(s)), t.$$.dirty & 16385 && n(3, i = d ? _(h).error : void 0);
  }, [
    h,
    f,
    g,
    i,
    r,
    v,
    k,
    C,
    s,
    o,
    l,
    a,
    c,
    u,
    d,
    A
  ];
}
class EH extends Ge {
  constructor(e) {
    super(), Ke(this, e, SH, kH, Nt, {
      path: 8,
      pathParser: 9,
      onChange: 10,
      onClose: 11,
      onError: 12,
      pathExists: 13
    });
  }
}
const AH = EH;
function zv(t, e, n) {
  const i = t.slice();
  return i[20] = e[n], i[22] = n, i;
}
function MH(t) {
  let e, n;
  return e = new AH({
    props: {
      path: t[3],
      onClose: t[12],
      onChange: t[13],
      onError: t[1],
      pathExists: t[9],
      pathParser: t[2]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.path = i[3]), r & 2 && (s.onError = i[1]), r & 4 && (s.pathParser = i[2]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function OH(t) {
  let e = [], n = /* @__PURE__ */ new Map(), i, r, s, o = t[3];
  const l = (c) => c[22];
  for (let c = 0; c < o.length; c += 1) {
    let u = zv(t, o, c), f = l(u);
    n.set(f, e[c] = Vv(f, u));
  }
  let a = t[7] && Uv(t);
  return {
    c() {
      for (let c = 0; c < e.length; c += 1)
        e[c].c();
      i = Z(), a && a.c(), r = rt();
    },
    m(c, u) {
      for (let f = 0; f < e.length; f += 1)
        e[f].m(c, u);
      U(c, i, u), a && a.m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      u & 1288 && (o = c[3], Ae(), e = Ys(e, u, l, 1, c, o, n, i.parentNode, ip, Vv, i, zv), Me()), c[7] ? a ? (a.p(c, u), u & 128 && P(a, 1)) : (a = Uv(c), a.c(), P(a, 1), a.m(r.parentNode, r)) : a && (Ae(), x(a, 1, 1, () => {
        a = null;
      }), Me());
    },
    i(c) {
      if (!s) {
        for (let u = 0; u < o.length; u += 1)
          P(e[u]);
        P(a), s = !0;
      }
    },
    o(c) {
      for (let u = 0; u < e.length; u += 1)
        x(e[u]);
      x(a), s = !1;
    },
    d(c) {
      for (let u = 0; u < e.length; u += 1)
        e[u].d(c);
      c && V(i), a && a.d(c), c && V(r);
    }
  };
}
function Vv(t, e) {
  let n, i, r;
  return i = new Q6({
    props: {
      getItems: e[8],
      path: e[3],
      index: e[22],
      onSelect: e[10]
    }
  }), {
    key: t,
    first: null,
    c() {
      n = rt(), ge(i.$$.fragment), this.first = n;
    },
    m(s, o) {
      U(s, n, o), de(i, s, o), r = !0;
    },
    p(s, o) {
      e = s;
      const l = {};
      o & 8 && (l.path = e[3]), o & 8 && (l.index = e[22]), i.$set(l);
    },
    i(s) {
      r || (P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(n), pe(i, s);
    }
  };
}
function Uv(t) {
  let e, n;
  return e = new Q6({
    props: {
      getItems: t[8],
      path: t[3],
      index: void 0,
      onSelect: t[10]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r & 8 && (s.path = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function TH(t) {
  let e, n, i, r, s, o, l = !dn(t[0]) && !t[6] ? "Navigation bar" : "Â ", a, c, u, f, h, d, p;
  const g = [OH, MH], m = [];
  function _(S, v) {
    return S[6] ? 1 : 0;
  }
  return n = _(t), i = m[n] = g[n](t), u = new Et({
    props: {
      data: t[6] ? xw : jw
    }
  }), {
    c() {
      e = j("div"), i.c(), r = Z(), s = j("button"), o = j("span"), a = _e(l), c = Z(), ge(u.$$.fragment), b(o, "class", "jse-navigation-bar-space svelte-15r3ahw"), b(s, "type", "button"), b(s, "class", "jse-navigation-bar-edit svelte-15r3ahw"), b(s, "title", f = t[6] ? "Cancel editing the selected path" : "Edit the selected path"), Se(s, "flex", !t[6]), Se(s, "editing", t[6]), b(e, "class", "jse-navigation-bar svelte-15r3ahw");
    },
    m(S, v) {
      U(S, e, v), m[n].m(e, null), E(e, r), E(e, s), E(s, o), E(o, a), E(s, c), de(u, s, null), t[16](s), t[17](e), h = !0, d || (p = re(s, "click", t[11]), d = !0);
    },
    p(S, [v]) {
      let k = n;
      n = _(S), n === k ? m[n].p(S, v) : (Ae(), x(m[k], 1, 1, () => {
        m[k] = null;
      }), Me(), i = m[n], i ? i.p(S, v) : (i = m[n] = g[n](S), i.c()), P(i, 1), i.m(e, r)), (!h || v & 65) && l !== (l = !dn(S[0]) && !S[6] ? "Navigation bar" : "Â ") && ze(a, l);
      const C = {};
      v & 64 && (C.data = S[6] ? xw : jw), u.$set(C), (!h || v & 64 && f !== (f = S[6] ? "Cancel editing the selected path" : "Edit the selected path")) && b(s, "title", f), (!h || v & 64) && Se(s, "flex", !S[6]), (!h || v & 64) && Se(s, "editing", S[6]);
    },
    i(S) {
      h || (P(i), P(u.$$.fragment, S), h = !0);
    },
    o(S) {
      x(i), x(u.$$.fragment, S), h = !1;
    },
    d(S) {
      S && V(e), m[n].d(), pe(u), t[16](null), t[17](null), d = !1, p();
    }
  };
}
function RH(t, e, n) {
  let i, r;
  const s = mi("jsoneditor:NavigationBar");
  let { json: o } = e, { documentState: l } = e, { onSelect: a } = e, { onError: c } = e, { pathParser: u } = e, f, h, d = !1;
  function p(w) {
    setTimeout(() => {
      if (f && f.scrollTo) {
        const M = f.scrollWidth - f.clientWidth;
        M > 0 && (s("scrollTo ", M), f.scrollTo({ left: M, behavior: "smooth" }));
      }
    });
  }
  function g(w) {
    s("get items for path", w);
    const M = Ye(o, w);
    if (Array.isArray(M))
      return sj(0, M.length).map(String);
    if (An(M)) {
      const T = Object.keys(M).slice(0);
      return T.sort(db), T;
    } else
      return [];
  }
  function m(w) {
    return gr(o, w);
  }
  function _(w) {
    s("select path", JSON.stringify(w)), a(Dn(o, w, w));
  }
  function S() {
    n(6, d = !d);
  }
  function v() {
    n(6, d = !1);
  }
  function k(w) {
    v(), _(w);
  }
  function C(w) {
    _t[w ? "unshift" : "push"](() => {
      h = w, n(5, h);
    });
  }
  function A(w) {
    _t[w ? "unshift" : "push"](() => {
      f = w, n(4, f);
    });
  }
  return t.$$set = (w) => {
    "json" in w && n(0, o = w.json), "documentState" in w && n(14, l = w.documentState), "onSelect" in w && n(15, a = w.onSelect), "onError" in w && n(1, c = w.onError), "pathParser" in w && n(2, u = w.pathParser);
  }, t.$$.update = () => {
    t.$$.dirty & 16384 && n(3, i = l.selection ? l.selection.focusPath : []), t.$$.dirty & 9 && n(7, r = dn(Ye(o, i))), t.$$.dirty & 8 && p();
  }, [
    o,
    c,
    u,
    i,
    f,
    h,
    d,
    r,
    g,
    m,
    _,
    S,
    v,
    k,
    l,
    a,
    C,
    A
  ];
}
class PH extends Ge {
  constructor(e) {
    super(), Ke(this, e, RH, TH, yt, {
      json: 0,
      documentState: 14,
      onSelect: 15,
      onError: 1,
      pathParser: 2
    });
  }
}
const IH = PH;
function Hv(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p = t[3] !== -1 ? `${t[3] + 1}/` : "", g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I = !t[4] && Wv(t);
  const z = [NH, DH], L = [];
  function K(D, X) {
    return D[2] ? 0 : 1;
  }
  l = K(t), a = L[l] = z[l](t), v = new Et({ props: { data: sF } }), A = new Et({ props: { data: qx } }), N = new Et({ props: { data: oc } });
  let F = t[0] && !t[4] && qv(t);
  return {
    c() {
      e = j("div"), n = j("form"), I && I.c(), i = Z(), r = j("div"), s = j("div"), o = j("div"), a.c(), c = Z(), u = j("label"), f = j("input"), h = Z(), d = j("div"), g = _e(p), m = _e(t[10]), _ = Z(), S = j("button"), ge(v.$$.fragment), k = Z(), C = j("button"), ge(A.$$.fragment), w = Z(), M = j("button"), ge(N.$$.fragment), T = Z(), F && F.c(), b(o, "class", "jse-search-icon svelte-18vllqh"), b(f, "class", "jse-search-input svelte-18vllqh"), b(f, "title", "Enter text to search"), b(f, "type", "text"), b(f, "placeholder", "Find"), b(u, "class", "jse-search-input-label svelte-18vllqh"), b(u, "about", "jse-search input"), b(d, "class", "jse-search-count svelte-18vllqh"), Se(d, "jse-visible", t[8] !== ""), b(S, "type", "button"), b(S, "class", "jse-search-next svelte-18vllqh"), b(S, "title", "Go to next search result (Enter)"), b(C, "type", "button"), b(C, "class", "jse-search-previous svelte-18vllqh"), b(C, "title", "Go to previous search result (Shift+Enter)"), b(M, "type", "button"), b(M, "class", "jse-search-clear svelte-18vllqh"), b(M, "title", "Close search box (Esc)"), b(s, "class", "jse-search-section svelte-18vllqh"), b(r, "class", "jse-search-contents svelte-18vllqh"), b(n, "class", "jse-search-form svelte-18vllqh"), b(e, "class", "jse-search-box svelte-18vllqh");
    },
    m(D, X) {
      U(D, e, X), E(e, n), I && I.m(n, null), E(n, i), E(n, r), E(r, s), E(s, o), L[l].m(o, null), E(s, c), E(s, u), E(u, f), Po(f, t[8]), E(s, h), E(s, d), E(d, g), E(d, m), E(s, _), E(s, S), de(v, S, null), E(s, k), E(s, C), de(A, C, null), E(s, w), E(s, M), de(N, M, null), E(r, T), F && F.m(r, null), O = !0, W || (H = [
        re(f, "input", t[21]),
        qi(jH.call(null, f)),
        re(S, "click", t[22]),
        re(C, "click", t[23]),
        re(M, "click", t[24]),
        re(n, "submit", t[12]),
        re(n, "keydown", t[13])
      ], W = !0);
    },
    p(D, X) {
      D[4] ? I && (Ae(), x(I, 1, 1, () => {
        I = null;
      }), Me()) : I ? (I.p(D, X), X & 16 && P(I, 1)) : (I = Wv(D), I.c(), P(I, 1), I.m(n, i));
      let ue = l;
      l = K(D), l === ue ? L[l].p(D, X) : (Ae(), x(L[ue], 1, 1, () => {
        L[ue] = null;
      }), Me(), a = L[l], a ? a.p(D, X) : (a = L[l] = z[l](D), a.c()), P(a, 1), a.m(o, null)), X & 256 && f.value !== D[8] && Po(f, D[8]), (!O || X & 8) && p !== (p = D[3] !== -1 ? `${D[3] + 1}/` : "") && ze(g, p), (!O || X & 1024) && ze(m, D[10]), (!O || X & 256) && Se(d, "jse-visible", D[8] !== ""), D[0] && !D[4] ? F ? F.p(D, X) : (F = qv(D), F.c(), F.m(r, null)) : F && (F.d(1), F = null);
    },
    i(D) {
      O || (P(I), P(a), P(v.$$.fragment, D), P(A.$$.fragment, D), P(N.$$.fragment, D), O = !0);
    },
    o(D) {
      x(I), x(a), x(v.$$.fragment, D), x(A.$$.fragment, D), x(N.$$.fragment, D), O = !1;
    },
    d(D) {
      D && V(e), I && I.d(), L[l].d(), pe(v), pe(A), pe(N), F && F.d(), W = !1, ct(H);
    }
  };
}
function Wv(t) {
  let e, n, i, r, s;
  return n = new Et({
    props: {
      data: t[0] ? hr : vo
    }
  }), {
    c() {
      e = j("button"), ge(n.$$.fragment), b(e, "type", "button"), b(e, "class", "jse-replace-toggle svelte-18vllqh"), b(e, "title", "Toggle visibility of replace options (Ctrl+H)");
    },
    m(o, l) {
      U(o, e, l), de(n, e, null), i = !0, r || (s = re(e, "click", t[11]), r = !0);
    },
    p(o, l) {
      const a = {};
      l & 1 && (a.data = o[0] ? hr : vo), n.$set(a);
    },
    i(o) {
      i || (P(n.$$.fragment, o), i = !0);
    },
    o(o) {
      x(n.$$.fragment, o), i = !1;
    },
    d(o) {
      o && V(e), pe(n), r = !1, s();
    }
  };
}
function DH(t) {
  let e, n;
  return e = new Et({ props: { data: nb } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function NH(t) {
  let e, n;
  return e = new Et({
    props: { data: Fx, spin: !0 }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p: ye,
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function qv(t) {
  let e, n, i, r, s, o, l, a;
  return {
    c() {
      e = j("div"), n = j("input"), i = Z(), r = j("button"), r.textContent = "Replace", s = Z(), o = j("button"), o.textContent = "All", b(n, "class", "jse-replace-input svelte-18vllqh"), b(n, "title", "Enter replacement text"), b(n, "type", "text"), b(n, "placeholder", "Replace"), b(r, "type", "button"), b(r, "title", "Replace current occurrence (Ctrl+Enter)"), b(r, "class", "svelte-18vllqh"), b(o, "type", "button"), b(o, "title", "Replace all occurrences"), b(o, "class", "svelte-18vllqh"), b(e, "class", "jse-replace-section svelte-18vllqh");
    },
    m(c, u) {
      U(c, e, u), E(e, n), Po(n, t[9]), E(e, i), E(e, r), E(e, s), E(e, o), l || (a = [
        re(n, "input", t[25]),
        re(r, "click", t[14]),
        re(o, "click", t[15])
      ], l = !0);
    },
    p(c, u) {
      u & 512 && n.value !== c[9] && Po(n, c[9]);
    },
    d(c) {
      c && V(e), l = !1, ct(a);
    }
  };
}
function LH(t) {
  let e, n, i = t[1] && Hv(t);
  return {
    c() {
      i && i.c(), e = rt();
    },
    m(r, s) {
      i && i.m(r, s), U(r, e, s), n = !0;
    },
    p(r, [s]) {
      r[1] ? i ? (i.p(r, s), s & 2 && P(i, 1)) : (i = Hv(r), i.c(), P(i, 1), i.m(e.parentNode, e)) : i && (Ae(), x(i, 1, 1, () => {
        i = null;
      }), Me());
    },
    i(r) {
      n || (P(i), n = !0);
    },
    o(r) {
      x(i), n = !1;
    },
    d(r) {
      i && i.d(r), r && V(e);
    }
  };
}
function jH(t) {
  t.select();
}
function BH(t, e, n) {
  let i, r, { show: s = !1 } = e, { searching: o } = e, { resultCount: l = 0 } = e, { activeIndex: a = 0 } = e, { showReplace: c = !1 } = e, { readOnly: u = !1 } = e, { onChange: f = hn } = e, { onPrevious: h = hn } = e, { onNext: d = hn } = e, { onReplace: p = hn } = e, { onReplaceAll: g = hn } = e, { onClose: m = hn } = e, _ = "", S = "", v = "";
  function k() {
    _ !== "" && f(_);
  }
  function C() {
    n(0, c = !c && !u);
  }
  function A(z) {
    z.preventDefault(), _ !== S ? (S = _, r.cancel(), f(_)) : d();
  }
  function w(z) {
    z.stopPropagation();
    const L = Go(z);
    L === "Enter" && (z.preventDefault(), d()), L === "Shift+Enter" && (z.preventDefault(), h()), (L === "Ctrl+Enter" || L === "Command+Enter") && (z.preventDefault(), c ? M() : d()), L === "Ctrl+H" && (z.preventDefault(), C()), L === "Escape" && (z.preventDefault(), m());
  }
  function M() {
    u || p(_, v);
  }
  function N() {
    u || g(_, v);
  }
  function T() {
    _ = this.value, n(8, _);
  }
  const O = () => d(), W = () => h(), H = () => m();
  function I() {
    v = this.value, n(9, v);
  }
  return t.$$set = (z) => {
    "show" in z && n(1, s = z.show), "searching" in z && n(2, o = z.searching), "resultCount" in z && n(16, l = z.resultCount), "activeIndex" in z && n(3, a = z.activeIndex), "showReplace" in z && n(0, c = z.showReplace), "readOnly" in z && n(4, u = z.readOnly), "onChange" in z && n(17, f = z.onChange), "onPrevious" in z && n(5, h = z.onPrevious), "onNext" in z && n(6, d = z.onNext), "onReplace" in z && n(18, p = z.onReplace), "onReplaceAll" in z && n(19, g = z.onReplaceAll), "onClose" in z && n(7, m = z.onClose);
  }, t.$$.update = () => {
    t.$$.dirty & 65536 && n(10, i = l >= Dm ? `${Dm - 1}+` : String(l)), t.$$.dirty & 131072 && n(20, r = _p(f, Y4)), t.$$.dirty & 1048832 && r(_), t.$$.dirty & 2 && s && k();
  }, [
    c,
    s,
    o,
    a,
    u,
    h,
    d,
    m,
    _,
    v,
    i,
    C,
    A,
    w,
    M,
    N,
    l,
    f,
    p,
    g,
    r,
    T,
    O,
    W,
    H,
    I
  ];
}
class xH extends Ge {
  constructor(e) {
    super(), Ke(this, e, BH, LH, yt, {
      show: 1,
      searching: 2,
      resultCount: 16,
      activeIndex: 3,
      showReplace: 0,
      readOnly: 4,
      onChange: 17,
      onPrevious: 5,
      onNext: 6,
      onReplace: 18,
      onReplaceAll: 19,
      onClose: 7
    });
  }
}
const FH = xH;
var Jv = Number.isNaN || function(e) {
  return typeof e == "number" && e !== e;
};
function zH(t, e) {
  return !!(t === e || Jv(t) && Jv(e));
}
function VH(t, e) {
  if (t.length !== e.length)
    return !1;
  for (var n = 0; n < t.length; n++)
    if (!zH(t[n], e[n]))
      return !1;
  return !0;
}
function Ku(t, e) {
  e === void 0 && (e = VH);
  var n = null;
  function i() {
    for (var r = [], s = 0; s < arguments.length; s++)
      r[s] = arguments[s];
    if (n && n.lastThis === this && e(r, n.lastArgs))
      return n.lastResult;
    var o = t.apply(this, r);
    return n = {
      lastResult: o,
      lastArgs: r,
      lastThis: this
    }, o;
  }
  return i.clear = function() {
    n = null;
  }, i;
}
const hs = mi("jsoneditor:actions");
async function Z6({ json: t, documentState: e, indentation: n, readOnly: i, parser: r, onPatch: s }) {
  if (i || !S6(e.selection))
    return;
  const o = k6(t, e.selection, n, r);
  if (o == null)
    return;
  hs("cut", { selection: e.selection, clipboard: o, indentation: n }), await pb(o);
  const { operations: l, newSelection: a } = M6(t, e.selection);
  s(l, (c, u) => ({
    state: {
      ...u,
      selection: a
    }
  }));
}
async function $6({ json: t, documentState: e, indentation: n, parser: i }) {
  const r = k6(t, e.selection, n, i);
  r != null && (hs("copy", { clipboard: r, indentation: n }), await pb(r));
}
function e8({ clipboardText: t, json: e, documentState: n, readOnly: i, parser: r, onPatch: s, onChangeText: o, openRepairModal: l }) {
  if (i)
    return;
  function a(c) {
    if (e !== void 0) {
      const u = n.selection || Dn(e || {}, [], []), f = A6(e, u, c, r);
      hs("paste", { pastedText: c, operations: f, selection: u }), s(f, (h, d) => {
        let p = d;
        return f.filter((g) => (Q4(g) || M0(g)) && dn(g.value)).forEach((g) => {
          const m = cs(e, g.path);
          p = _o(h, p, m);
        }), {
          state: p
        };
      });
    } else
      hs("paste text", { pastedText: c }), o(t, (u, f) => {
        if (u)
          return {
            state: _o(u, f, [])
          };
      });
  }
  try {
    a(t);
  } catch {
    l(t, (u) => {
      hs("repaired pasted text: ", u), a(u);
    });
  }
}
function t8({ json: t, text: e, documentState: n, keepSelection: i, readOnly: r, onChange: s, onPatch: o }) {
  if (r || !n.selection)
    return;
  const l = Nn(n.selection) || Ct(n.selection) ? Dn(t, n.selection.anchorPath, n.selection.focusPath) : n.selection;
  if (Ot(n.selection.focusPath))
    hs("remove root", { selection: n.selection }), s({ text: "", json: void 0 }, { text: e, json: t }, {
      contentErrors: { validationErrors: [] },
      patchResult: null
    });
  else {
    const { operations: a, newSelection: c } = M6(t, l);
    hs("remove", { operations: a, selection: n.selection, newSelection: c }), o(a, (u, f) => ({
      state: {
        ...f,
        selection: i ? n.selection : c
      }
    }));
  }
}
function td({ insertType: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: s, parser: o, onPatch: l, onReplaceJson: a }) {
  if (s || !r.selection)
    return;
  const c = ux(i, r.selection, t);
  if (i !== void 0) {
    const u = o.stringify(c), f = A6(i, r.selection, u, o);
    hs("onInsert", { insertType: t, operations: f, newValue: c, data: u });
    const h = at(f.filter((d) => d.op === "add" || d.op === "replace"));
    l(f, (d, p) => {
      if (h) {
        const g = cs(d, h.path);
        if (dn(c))
          return {
            state: {
              ...cr(d, p, g, ru),
              selection: e ? Zs(g) : p.selection
            }
          };
        if (c === "") {
          const m = Ot(g) ? null : Ye(d, St(g));
          return {
            state: t1(d, {
              ...r,
              selection: An(m) ? mr(g, !0) : Pt(g, !0)
            }, g)
          };
        }
        return;
      }
    }), hs("after patch"), h && c === "" && nd(() => Gh(n, "", !0));
  } else {
    hs("onInsert", { insertType: t, newValue: c });
    const u = [];
    a(c, (f, h) => ({
      state: {
        ..._o(f, h, u),
        selection: Zs(u)
      }
    }));
  }
}
async function n8({ char: t, selectInside: e, refJsonEditor: n, json: i, documentState: r, readOnly: s, parser: o, onPatch: l, onReplaceJson: a, onSelect: c }) {
  if (!(s || !r.selection)) {
    if (Nn(r.selection)) {
      const u = !r.selection.edit;
      c({ ...r.selection, edit: !0 }), nd(() => Gh(n, t, u));
      return;
    }
    if (t === "{")
      td({
        insertType: "object",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
    else if (t === "[")
      td({
        insertType: "array",
        selectInside: e,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
    else if (Ct(r.selection)) {
      if (!dn(Ye(i, r.selection.focusPath))) {
        const u = !r.selection.edit;
        c({ ...r.selection, edit: !0 }), nd(() => Gh(n, t, u));
      }
    } else
      await UH({
        char: t,
        refJsonEditor: n,
        json: i,
        documentState: r,
        readOnly: s,
        parser: o,
        onPatch: l,
        onReplaceJson: a
      });
  }
}
async function UH({ char: t, refJsonEditor: e, json: n, documentState: i, readOnly: r, parser: s, onPatch: o, onReplaceJson: l }) {
  if (r || !i.selection)
    return;
  td({
    insertType: "value",
    selectInside: !1,
    refJsonEditor: e,
    json: n,
    documentState: i,
    readOnly: r,
    parser: s,
    onPatch: o,
    onReplaceJson: l
  });
  const a = !Lo(i.selection);
  nd(() => Gh(e, t, a));
}
function nd(t) {
  setTimeout(() => setTimeout(t));
}
function HH(t) {
  let e, n = Cs(
    Kh(
      {
        text: t[0],
        json: t[1]
      },
      t[2],
      t[3]
    ),
    zh
  ) + "", i;
  return {
    c() {
      e = j("div"), i = _e(n), b(e, "class", "jse-json-preview svelte-1ch6ow4");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, [s]) {
      s & 15 && n !== (n = Cs(
        Kh(
          {
            text: r[0],
            json: r[1]
          },
          r[2],
          r[3]
        ),
        zh
      ) + "") && ze(i, n);
    },
    i: ye,
    o: ye,
    d(r) {
      r && V(e);
    }
  };
}
function WH(t, e, n) {
  let { text: i } = e, { json: r } = e, { indentation: s } = e, { parser: o } = e;
  return t.$$set = (l) => {
    "text" in l && n(0, i = l.text), "json" in l && n(1, r = l.json), "indentation" in l && n(2, s = l.indentation), "parser" in l && n(3, o = l.parser);
  }, [i, r, s, o];
}
class qH extends Ge {
  constructor(e) {
    super(), Ke(this, e, WH, HH, Nt, {
      text: 0,
      json: 1,
      indentation: 2,
      parser: 3
    });
  }
}
const i8 = qH;
const { window: JH } = np;
function Kv(t) {
  let e, n, i;
  function r(o) {
    t[75](o);
  }
  let s = {
    json: t[10],
    selection: t[16].selection,
    readOnly: t[0],
    historyState: t[22],
    onExpandAll: t[39],
    onCollapseAll: t[40],
    onUndo: t[35],
    onRedo: t[36],
    onSort: t[37],
    onTransform: t[38],
    onContextMenu: t[44],
    onCopy: t[33],
    onRenderMenu: t[7]
  };
  return t[19] !== void 0 && (s.showSearch = t[19]), e = new lH({ props: s }), _t.push(() => Ir(e, "showSearch", r, t[19])), {
    c() {
      ge(e.$$.fragment);
    },
    m(o, l) {
      de(e, o, l), i = !0;
    },
    p(o, l) {
      const a = {};
      l[0] & 1024 && (a.json = o[10]), l[0] & 65536 && (a.selection = o[16].selection), l[0] & 1 && (a.readOnly = o[0]), l[0] & 4194304 && (a.historyState = o[22]), l[0] & 128 && (a.onRenderMenu = o[7]), !n && l[0] & 524288 && (n = !0, a.showSearch = o[19], Pr(() => n = !1)), e.$set(a);
    },
    i(o) {
      i || (P(e.$$.fragment, o), i = !0);
    },
    o(o) {
      x(e.$$.fragment, o), i = !1;
    },
    d(o) {
      pe(e, o);
    }
  };
}
function Gv(t) {
  let e, n;
  return e = new IH({
    props: {
      json: t[10],
      documentState: t[16],
      onSelect: t[48],
      onError: t[6],
      pathParser: t[4]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1024 && (s.json = i[10]), r[0] & 65536 && (s.documentState = i[16]), r[0] & 64 && (s.onError = i[6]), r[0] & 16 && (s.pathParser = i[4]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function KH(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-qojdc1"></div> 
      <div class="jse-loading svelte-qojdc1">loading...</div>`, b(e, "class", "jse-contents svelte-qojdc1");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function GH(t) {
  let e, n, i, r, s, o, l, a, c;
  const u = [XH, YH], f = [];
  function h(d, p) {
    return d[10] === void 0 ? 0 : 1;
  }
  return r = h(t), s = f[r] = u[r](t), {
    c() {
      e = j("label"), n = j("input"), i = Z(), s.c(), o = rt(), b(n, "type", "text"), n.readOnly = "readonly", b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-qojdc1"), b(e, "class", "jse-hidden-input-label svelte-qojdc1");
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[76](n), U(d, i, p), f[r].m(d, p), U(d, o, p), l = !0, a || (c = re(n, "paste", t[34]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? f[r].p(d, p) : (Ae(), x(f[g], 1, 1, () => {
        f[g] = null;
      }), Me(), s = f[r], s ? s.p(d, p) : (s = f[r] = u[r](d), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(d) {
      l || (P(s), l = !0);
    },
    o(d) {
      x(s), l = !1;
    },
    d(d) {
      d && V(e), t[76](null), d && V(i), f[r].d(d), d && V(o), a = !1, c();
    }
  };
}
function YH(t) {
  var d, p, g, m;
  let e, n, i, r, s, o, l, a, c, u;
  n = new FH({
    props: {
      show: t[19],
      resultCount: ((p = (d = t[17]) == null ? void 0 : d.items) == null ? void 0 : p.length) || 0,
      activeIndex: ((g = t[17]) == null ? void 0 : g.activeIndex) || 0,
      showReplace: t[20],
      searching: t[21],
      readOnly: t[0],
      onChange: t[26],
      onNext: t[27],
      onPrevious: t[28],
      onReplace: t[29],
      onReplaceAll: t[30],
      onClose: t[31]
    }
  }), s = new $U({
    props: {
      value: t[10],
      path: [],
      expandedMap: t[16].expandedMap,
      enforceStringMap: t[16].enforceStringMap,
      visibleSectionsMap: t[16].visibleSectionsMap,
      validationErrorsMap: t[24],
      searchResultItemsMap: (m = t[17]) == null ? void 0 : m.itemsMap,
      selection: t[16].selection,
      context: t[13],
      onDragSelectionStart: hn
    }
  });
  let f = t[18] && Yv(t), h = t[23] && Xv(t);
  return c = new lb({
    props: {
      validationErrors: t[12],
      selectError: t[32]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), r = j("div"), ge(s.$$.fragment), o = Z(), f && f.c(), l = Z(), h && h.c(), a = Z(), ge(c.$$.fragment), b(e, "class", "jse-search-box-container svelte-qojdc1"), b(r, "class", "jse-contents svelte-qojdc1"), b(r, "data-jsoneditor-scrollable-contents", !0);
    },
    m(_, S) {
      U(_, e, S), de(n, e, null), U(_, i, S), U(_, r, S), de(s, r, null), t[77](r), U(_, o, S), f && f.m(_, S), U(_, l, S), h && h.m(_, S), U(_, a, S), de(c, _, S), u = !0;
    },
    p(_, S) {
      var A, w, M, N;
      const v = {};
      S[0] & 524288 && (v.show = _[19]), S[0] & 131072 && (v.resultCount = ((w = (A = _[17]) == null ? void 0 : A.items) == null ? void 0 : w.length) || 0), S[0] & 131072 && (v.activeIndex = ((M = _[17]) == null ? void 0 : M.activeIndex) || 0), S[0] & 1048576 && (v.showReplace = _[20]), S[0] & 2097152 && (v.searching = _[21]), S[0] & 1 && (v.readOnly = _[0]), n.$set(v);
      const k = {};
      S[0] & 1024 && (k.value = _[10]), S[0] & 65536 && (k.expandedMap = _[16].expandedMap), S[0] & 65536 && (k.enforceStringMap = _[16].enforceStringMap), S[0] & 65536 && (k.visibleSectionsMap = _[16].visibleSectionsMap), S[0] & 16777216 && (k.validationErrorsMap = _[24]), S[0] & 131072 && (k.searchResultItemsMap = (N = _[17]) == null ? void 0 : N.itemsMap), S[0] & 65536 && (k.selection = _[16].selection), S[0] & 8192 && (k.context = _[13]), s.$set(k), _[18] ? f ? (f.p(_, S), S[0] & 262144 && P(f, 1)) : (f = Yv(_), f.c(), P(f, 1), f.m(l.parentNode, l)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), _[23] ? h ? (h.p(_, S), S[0] & 8388608 && P(h, 1)) : (h = Xv(_), h.c(), P(h, 1), h.m(a.parentNode, a)) : h && (Ae(), x(h, 1, 1, () => {
        h = null;
      }), Me());
      const C = {};
      S[0] & 4096 && (C.validationErrors = _[12]), c.$set(C);
    },
    i(_) {
      u || (P(n.$$.fragment, _), P(s.$$.fragment, _), P(f), P(h), P(c.$$.fragment, _), u = !0);
    },
    o(_) {
      x(n.$$.fragment, _), x(s.$$.fragment, _), x(f), x(h), x(c.$$.fragment, _), u = !1;
    },
    d(_) {
      _ && V(e), pe(n), _ && V(i), _ && V(r), pe(s), t[77](null), _ && V(o), f && f.d(_), _ && V(l), h && h.d(_), _ && V(a), pe(c, _);
    }
  };
}
function XH(t) {
  let e, n, i, r;
  const s = [ZH, QH], o = [];
  function l(a, c) {
    return a[11] === "" || a[11] === void 0 ? 0 : 1;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = rt();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Ae(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Me(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function Yv(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[18].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: Ap,
          text: "Paste as JSON instead",
          onMouseDown: t[45]
        },
        {
          text: "Leave as is",
          onClick: t[46]
        }
      ]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 262144 && (s.message = `You pasted a JSON ${Array.isArray(i[18].contents) ? "array" : "object"} as text`), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Xv(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: t[8]
        },
        {
          icon: jo,
          text: "Repair manually instead",
          onClick: t[47]
        }
      ]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.actions = i[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: i[8]
        },
        {
          icon: jo,
          text: "Repair manually instead",
          onClick: i[47]
        }
      ]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function QH(t) {
  let e, n, i, r;
  return e = new Ns({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: jo,
          text: "Repair manually",
          onClick: t[47]
        }
      ]
    }
  }), i = new i8({
    props: {
      text: t[11],
      json: t[10],
      indentation: t[5],
      parser: t[3]
    }
  }), {
    c() {
      ge(e.$$.fragment), n = Z(), ge(i.$$.fragment);
    },
    m(s, o) {
      de(e, s, o), U(s, n, o), de(i, s, o), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 1 && (l.actions = s[0] ? [] : [
        {
          icon: jo,
          text: "Repair manually",
          onClick: s[47]
        }
      ]), e.$set(l);
      const a = {};
      o[0] & 2048 && (a.text = s[11]), o[0] & 1024 && (a.json = s[10]), o[0] & 32 && (a.indentation = s[5]), o[0] & 8 && (a.parser = s[3]), i.$set(a);
    },
    i(s) {
      r || (P(e.$$.fragment, s), P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(e.$$.fragment, s), x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      pe(e, s), s && V(n), pe(i, s);
    }
  };
}
function ZH(t) {
  let e, n;
  return e = new fH({ props: { readOnly: t[0] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.readOnly = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function $H(t) {
  let e, n, i, r, s, o, l, a, c = t[1] && Kv(t), u = t[2] && Gv(t);
  const f = [GH, KH], h = [];
  function d(p, g) {
    return p[25] ? 1 : 0;
  }
  return r = d(t), s = h[r] = f[r](t), {
    c() {
      e = j("div"), c && c.c(), n = Z(), u && u.c(), i = Z(), s.c(), b(e, "class", "jse-tree-mode svelte-qojdc1"), Se(e, "no-main-menu", !t[1]);
    },
    m(p, g) {
      U(p, e, g), c && c.m(e, null), E(e, n), u && u.m(e, null), E(e, i), h[r].m(e, null), t[78](e), o = !0, l || (a = [
        re(JH, "mousedown", t[49]),
        re(e, "keydown", t[41]),
        re(e, "mousedown", t[42]),
        re(e, "contextmenu", t[43])
      ], l = !0);
    },
    p(p, g) {
      p[1] ? c ? (c.p(p, g), g[0] & 2 && P(c, 1)) : (c = Kv(p), c.c(), P(c, 1), c.m(e, n)) : c && (Ae(), x(c, 1, 1, () => {
        c = null;
      }), Me()), p[2] ? u ? (u.p(p, g), g[0] & 4 && P(u, 1)) : (u = Gv(p), u.c(), P(u, 1), u.m(e, i)) : u && (Ae(), x(u, 1, 1, () => {
        u = null;
      }), Me()), s.p(p, g), (!o || g[0] & 2) && Se(e, "no-main-menu", !p[1]);
    },
    i(p) {
      o || (P(c), P(u), P(s), o = !0);
    },
    o(p) {
      x(c), x(u), x(s), o = !1;
    },
    d(p) {
      p && V(e), c && c.d(), u && u.d(), h[r].d(), t[78](null), l = !1, ct(a);
    }
  };
}
function eW(t, e, n) {
  let i;
  const r = mi("jsoneditor:TreeMode"), s = typeof window > "u";
  r("isSSR:", s);
  const { open: o } = gi("simple-modal"), l = Pa(), a = Pa(), { openAbsolutePopup: c, closeAbsolutePopup: u } = gi("absolute-popup");
  let f, h, d, p = !1;
  const g = U6();
  let { readOnly: m } = e, { externalContent: _ } = e, { mainMenuBar: S } = e, { navigationBar: v } = e, { escapeControlCharacters: k } = e, { escapeUnicodeCharacters: C } = e, { parser: A } = e, { parseMemoizeOne: w } = e, { validator: M } = e, { validationParser: N } = e, { pathParser: T } = e, { indentation: O } = e, { onError: W } = e, { onChange: H } = e, { onChangeMode: I } = e, { onRenderValue: z } = e, { onRenderMenu: L } = e, { onClassName: K } = e, { onFocus: F } = e, { onBlur: D } = e, { onSortModal: X } = e, { onTransformModal: ue } = e, { onJSONEditorModal: q } = e, ee = !1;
  ob({
    onMount: or,
    onDestroy: ks,
    getWindow: () => sc(d),
    hasFocus: () => ee && document.hasFocus() || Yh(d),
    onFocus: () => {
      p = !0, F && F();
    },
    onBlur: () => {
      p = !1, D && D();
    }
  });
  let ie, ne, je;
  function Ie(Y) {
    r("updateSelection", Y);
    const ve = typeof Y == "function" ? Y(le.selection) : Y;
    At(ve, le.selection) || n(16, le = {
      ...le,
      selection: ve
    });
  }
  let Xe = !1, le = Qh(), Ne, nt, ke, fe = !1, Pe = !1, ae = !1, $ = "";
  async function he(Y) {
    r("search text updated", Y), n(74, $ = Y), await Qi(), await Q();
  }
  async function Ce() {
    n(17, Ne = Ne ? dx(Ne) : void 0), await Q();
  }
  async function J() {
    n(17, Ne = Ne ? px(Ne) : void 0), await Q();
  }
  async function y(Y, ve) {
    const Ve = Ne == null ? void 0 : Ne.activeItem;
    if (r("handleReplace", { replacementText: ve, activeItem: Ve }), !Ve)
      return;
    const { operations: bt, newSelection: qe } = gx(ie, le, ve, Ve, A);
    Lt(bt, (Yt, ei) => ({
      state: { ...ei, selection: qe }
    })), await Qi(), await Q();
  }
  async function R(Y, ve) {
    r("handleReplaceAll", { text: Y, replacementText: ve });
    const { operations: Ve, newSelection: bt } = mx(ie, le, Y, ve, A);
    Lt(Ve, (qe, Yt) => ({
      state: { ...Yt, selection: bt }
    })), await Qi(), await Q();
  }
  function B() {
    n(19, fe = !1), n(20, Pe = !1), he(""), Ue();
  }
  async function Q() {
    const Y = Ne == null ? void 0 : Ne.activeItem;
    if (r("focusActiveSearchResult", Ne), Y) {
      const ve = Y.path;
      n(16, le = {
        ...t1(ie, le, ve),
        selection: void 0
      }), await Qi(), await zi(ve);
    }
  }
  function G(Y, ve) {
    if (Y === "") {
      r("clearing search result"), Ne !== void 0 && n(17, Ne = void 0);
      return;
    }
    n(21, ae = !0), setTimeout(() => {
      r("searching...", Y);
      const Ve = T6(Y, ve, le, Dm);
      n(17, Ne = hx(ve, Ve, Ne)), n(21, ae = !1);
    });
  }
  function ce(Y) {
    r("select validation error", Y), Ie(Pt(Y.path, !1)), zi(Y.path);
  }
  const De = H6({
    onChange: (Y) => {
      n(22, We = Y);
    }
  });
  let We = De.getState();
  function pt(Y = ru) {
    r("expand");
    const ve = {
      ...le,
      expandedMap: {},
      visibleSectionsMap: {}
    };
    n(16, le = cr(ie, ve, [], Y));
  }
  const ot = cj(G, fR);
  let Be = !1, ht = [], jt;
  const _n = Ku(W6);
  function yn(Y, ve, Ve, bt) {
    ca(
      () => {
        let qe;
        try {
          qe = _n(Y, ve, Ve, bt);
        } catch (Yt) {
          qe = [
            {
              path: [],
              message: "Failed to validate: " + Yt.message,
              severity: Io.warning
            }
          ];
        }
        At(qe, ht) || (r("validationErrors changed:", qe), n(12, ht = qe));
      },
      (qe) => r(`validationErrors updated in ${qe} ms`)
    );
  }
  function Rt() {
    return r("validate"), je ? {
      parseError: je,
      isRepairable: !1
    } : (yn(ie, M, A, N), { validationErrors: ht });
  }
  function Ee() {
    return ie;
  }
  function li() {
    return le;
  }
  function an(Y) {
    Y.json !== void 0 && Bt(Y.json), Y.text !== void 0 && wn(Y.text);
  }
  function Bt(Y) {
    if (Y === void 0)
      return;
    const ve = !At(ie, Y);
    if (r("update external json", {
      isChanged: ve,
      currentlyText: ie === void 0
    }), !ve)
      return;
    const Ve = { json: ie, text: ne }, bt = le, qe = ie, Yt = ne, ei = Be;
    n(10, ie = Y), Kt(ie), n(11, ne = void 0), n(23, Be = !1), Zn(ie), jn({
      previousJson: qe,
      previousState: bt,
      previousText: Yt,
      previousTextIsRepaired: ei
    }), Qt(Ve, null);
  }
  function wn(Y) {
    if (Y === void 0 || _.json !== void 0)
      return;
    const ve = Y !== ne;
    if (r("update external text", { isChanged: ve }), !ve)
      return;
    const Ve = { json: ie, text: ne }, bt = ie, qe = le, Yt = ne, ei = Be;
    try {
      n(10, ie = w(Y)), Kt(ie), n(11, ne = Y), n(23, Be = !1), je = void 0;
    } catch (Cn) {
      try {
        n(10, ie = w(us(Y))), Kt(ie), n(11, ne = Y), n(23, Be = !0), je = void 0, Zn(ie);
      } catch {
        n(10, ie = void 0), n(11, ne = _.text), n(23, Be = !1), je = vp(ne, Cn.message || Cn.toString());
      }
    }
    Zn(ie), jn({
      previousJson: bt,
      previousState: qe,
      previousText: Yt,
      previousTextIsRepaired: ei
    }), Qt(Ve, null);
  }
  function Kt(Y) {
    Xe || (Xe = !0, n(16, le = cr(Y, le, [], HB(Y))));
  }
  function Zn(Y) {
    le.selection !== void 0 && (le.selection && gr(Y, le.selection.anchorPath) && gr(Y, le.selection.focusPath) || (r("clearing selection: path does not exist anymore", le.selection), n(16, le = {
      ...le,
      selection: ia(Y, le)
    })));
  }
  function jn({ previousJson: Y, previousState: ve, previousText: Ve, previousTextIsRepaired: bt }) {
    Y === void 0 && Ve === void 0 || (ie !== void 0 ? Y !== void 0 ? De.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: Y
          }
        ],
        state: Ai(ve),
        json: void 0,
        text: Ve,
        textIsRepaired: bt
      },
      redo: {
        patch: [{ op: "replace", path: "", value: ie }],
        state: Ai(le),
        json: void 0,
        text: ne,
        textIsRepaired: Be
      }
    }) : De.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: Ve,
        state: Ai(ve),
        textIsRepaired: bt
      },
      redo: {
        patch: void 0,
        json: ie,
        state: Ai(le),
        text: ne,
        textIsRepaired: Be
      }
    }) : Y !== void 0 && De.add({
      undo: {
        patch: void 0,
        json: Y,
        state: Ai(ve),
        text: Ve,
        textIsRepaired: bt
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: ne,
        textIsRepaired: Be,
        state: Ai(le)
      }
    }));
  }
  function Wn() {
    r("createDefaultSelection"), n(16, le = {
      ...le,
      selection: Dn(ie || {}, [], [])
    });
  }
  function vn(Y, ve) {
    if (r("patch", Y, ve), ie === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const Ve = { json: ie, text: ne }, bt = ie, qe = le, Yt = ne, ei = Be, Yr = O6(ie, Y), Cn = h6(ie, le, Y), il = La(ie, Y), B_ = QB(Cn.documentState, il, !1);
    r("patch updatedSelection", il);
    const Zl = typeof ve == "function" ? ve(Cn.json, B_) : void 0;
    n(10, ie = Zl && Zl.json !== void 0 ? Zl.json : Cn.json);
    const x_ = Zl && Zl.state !== void 0 ? Zl.state : B_;
    n(16, le = x_), n(11, ne = void 0), n(23, Be = !1), n(18, ke = void 0), Zn(ie), De.add({
      undo: {
        patch: Yr,
        json: void 0,
        text: Yt,
        state: Ai(qe),
        textIsRepaired: ei
      },
      redo: {
        patch: Y,
        json: void 0,
        state: Ai(x_),
        text: ne,
        textIsRepaired: Be
      }
    });
    const F_ = {
      json: ie,
      previousJson: bt,
      undo: Yr,
      redo: Y
    };
    return Qt(Ve, F_), F_;
  }
  function me() {
    m || !le.selection || Ie(mr(le.selection.focusPath, !0));
  }
  function Le() {
    if (m || !le.selection)
      return;
    const Y = le.selection.focusPath, ve = Ye(ie, Y);
    dn(ve) ? Kn(Y, ve) : Ie(Pt(Y, !0));
  }
  function gt() {
    if (m || !Ct(le.selection))
      return;
    const Y = le.selection.focusPath, ve = xe(Y), Ve = Ye(ie, Y), bt = !Qs(Ve, le.enforceStringMap, ve, A), qe = bt ? String(Ve) : tc(String(Ve), A);
    r("handleToggleEnforceString", { enforceString: bt, value: Ve, updatedValue: qe }), Lt(
      [
        {
          op: "replace",
          path: ve,
          value: qe
        }
      ],
      (Yt, ei) => ({
        state: f6(ei, ve, bt)
      })
    );
  }
  function en() {
    return Be && ie !== void 0 && Rn(ie), { json: ie, text: ne };
  }
  async function bi(Y = !0) {
    await Z6({
      json: ie,
      documentState: le,
      indentation: Y ? O : void 0,
      readOnly: m,
      parser: A,
      onPatch: Lt
    });
  }
  async function Ht(Y = !0) {
    await $6({
      json: ie,
      documentState: le,
      indentation: Y ? O : void 0,
      parser: A
    });
  }
  function kn(Y) {
    Y.preventDefault();
    const ve = Y.clipboardData.getData("text/plain");
    e8({
      clipboardText: ve,
      json: ie,
      documentState: le,
      readOnly: m,
      parser: A,
      onPatch: Lt,
      onChangeText: te,
      openRepairModal: lt
    });
  }
  function we() {
    o(
      q6,
      {},
      {
        ...Al,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Ue() }
    );
  }
  function lt(Y, ve) {
    o(
      K6,
      {
        text: Y,
        onParse: wp,
        onRepair: K5,
        onApply: ve
      },
      {
        ...Al,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Ue() }
    );
  }
  function wt() {
    t8({
      json: ie,
      text: ne,
      documentState: le,
      keepSelection: !1,
      readOnly: m,
      onChange: H,
      onPatch: Lt
    });
  }
  function Wt() {
    if (m || !S6(le.selection) || Ot(le.selection.focusPath))
      return;
    r("duplicate", { selection: le.selection });
    const Y = lx(ie, C6(le.selection));
    Lt(Y);
  }
  function Jt() {
    if (m || !le.selection || !Dt(le.selection) && !Ct(le.selection) || Ot(le.selection.focusPath))
      return;
    r("extract", { selection: le.selection });
    const Y = ax(ie, le.selection);
    Lt(Y, (ve, Ve) => {
      if (dn(ve))
        return {
          state: _o(ve, Ve, [])
        };
    });
  }
  function mt(Y) {
    td({
      insertType: Y,
      selectInside: !0,
      refJsonEditor: d,
      json: ie,
      documentState: le,
      readOnly: m,
      parser: A,
      onPatch: Lt,
      onReplaceJson: Rn
    });
  }
  function cn(Y) {
    Nn(le.selection) && Ie(Pt(le.selection.focusPath, !1)), mt(Y);
  }
  function Gi(Y) {
    if (!(m || !le.selection)) {
      if (!_l(le.selection)) {
        W(new Error(`Cannot convert current selection to ${Y}`));
        return;
      }
      try {
        const ve = le.selection.anchorPath, Ve = Ye(ie, ve), bt = _j(Ve, Y, A);
        if (bt === Ve)
          return;
        const qe = [
          {
            op: "replace",
            path: xe(ve),
            value: bt
          }
        ];
        r("handleConvert", {
          selection: le.selection,
          path: ve,
          type: Y,
          operations: qe
        }), Lt(qe, (Yt, ei) => ({
          state: _o(Yt, ei, le.selection.focusPath)
        }));
      } catch (ve) {
        W(ve);
      }
    }
  }
  function Xt() {
    const Y = Sw(ie, le, !1), ve = St(le.selection.focusPath);
    !Ot(Y.focusPath) && At(ve, St(Y.focusPath)) ? Ie($s(Y.focusPath)) : Ie(Zs(ve)), r("insert before", {
      selection: le.selection,
      selectionBefore: Y,
      parentPath: ve
    }), Qi().then(Vi);
  }
  function Fi() {
    const Y = Dt(le.selection) ? at(le.selection.paths) : le.selection.focusPath;
    r("insert after", Y), Ie($s(Y)), Qi().then(Vi);
  }
  async function Er(Y) {
    await n8({
      char: Y,
      selectInside: !0,
      refJsonEditor: d,
      json: ie,
      documentState: le,
      readOnly: m,
      parser: A,
      onPatch: Lt,
      onReplaceJson: Rn,
      onSelect: Ie
    });
  }
  function Ii() {
    if (m || !De.getState().canUndo)
      return;
    const Y = De.undo();
    if (!Y)
      return;
    const ve = { json: ie, text: ne };
    n(10, ie = Y.undo.patch ? zr(ie, Y.undo.patch) : Y.undo.json), n(16, le = Y.undo.state), n(11, ne = Y.undo.text), n(23, Be = Y.undo.textIsRepaired), r("undo", { item: Y, json: ie, documentState: le });
    const Ve = {
      json: ie,
      previousJson: ve.json,
      redo: Y.undo.patch,
      undo: Y.redo.patch
    };
    Qt(ve, Ve), Ue(), le.selection && zi(le.selection.focusPath, !1);
  }
  function ar() {
    if (m || !De.getState().canRedo)
      return;
    const Y = De.redo();
    if (!Y)
      return;
    const ve = { json: ie, text: ne };
    n(10, ie = Y.redo.patch ? zr(ie, Y.redo.patch) : Y.redo.json), n(16, le = Y.redo.state), n(11, ne = Y.redo.text), n(23, Be = Y.redo.textIsRepaired), r("redo", { item: Y, json: ie, documentState: le });
    const Ve = {
      json: ie,
      previousJson: ve.json,
      redo: Y.redo.patch,
      undo: Y.undo.patch
    };
    Qt(ve, Ve), Ue(), le.selection && zi(le.selection.focusPath, !1);
  }
  function tn(Y) {
    m || (ee = !0, X({
      id: l,
      json: ie,
      rootPath: Y,
      onSort: async ({ operations: ve }) => {
        r("onSort", Y, ve), Lt(ve, (Ve, bt) => ({
          state: {
            ..._o(Ve, bt, Y),
            selection: Pt(Y, !1)
          }
        }));
      },
      onClose: () => {
        ee = !1, Ue();
      }
    }));
  }
  function qn() {
    if (!le.selection)
      return;
    const Y = Ew(ie, le.selection);
    tn(Y);
  }
  function Jn() {
    tn([]);
  }
  function nn({ id: Y, rootPath: ve, onTransform: Ve, onClose: bt }) {
    ee = !0, ue({
      id: Y || a,
      json: ie,
      rootPath: ve,
      onTransform: Ve ? (qe) => {
        Ve({
          operations: qe,
          json: ie,
          transformedJson: zr(ie, qe)
        });
      } : (qe) => {
        r("onTransform", ve, qe), Lt(qe, (Yt, ei) => ({
          state: {
            ..._o(Yt, ei, ve),
            selection: Pt(ve, !1)
          }
        }));
      },
      onClose: () => {
        ee = !1, Ue(), bt && bt();
      }
    });
  }
  function Tn() {
    if (!le.selection)
      return;
    const Y = Ew(ie, le.selection);
    nn({ rootPath: Y });
  }
  function Bn() {
    nn({ rootPath: [] });
  }
  function Kn(Y, ve) {
    r("openJSONEditorModal", { path: Y, value: ve }), ee = !0, q({
      content: { json: ve },
      path: Y,
      onPatch: uf.onPatch,
      onClose: () => {
        ee = !1, Ue();
      }
    });
  }
  async function zi(Y, ve = !0) {
    n(16, le = t1(ie, le, St(Y))), await Qi();
    const Ve = Yi(Y);
    if (Ve) {
      r("scrollTo", { path: Y, elem: Ve, refContents: f });
      const bt = f.getBoundingClientRect(), qe = Ve.getBoundingClientRect();
      if (!ve && qe.bottom > bt.top && qe.top < bt.bottom)
        return;
      const Yt = -(bt.height / 4);
      g(Ve, {
        container: f,
        offset: Yt,
        duration: Im
      });
    }
  }
  function Yi(Y) {
    return f ? f.querySelector(`div[data-path="${Da(Y)}"]`) : null;
  }
  function _i(Y) {
    const ve = Yi(Y);
    if (!ve || !f)
      return;
    const Ve = f.getBoundingClientRect(), bt = ve.getBoundingClientRect(), qe = 20, Yt = dn(Ye(ie, Y)) ? qe : bt.height;
    bt.top < Ve.top + qe ? g(ve, {
      container: f,
      offset: -qe,
      duration: 0
    }) : bt.top + Yt > Ve.bottom - qe && g(ve, {
      container: f,
      offset: -(Ve.height - Yt - qe),
      duration: 0
    });
  }
  function Qt(Y, ve) {
    Y.json === void 0 && (Y == null ? void 0 : Y.text) === void 0 || (ne !== void 0 ? H({ text: ne, json: void 0 }, Y, { contentErrors: Rt(), patchResult: ve }) : ie !== void 0 && H({ text: void 0, json: ie }, Y, { contentErrors: Rt(), patchResult: ve }));
  }
  function Lt(Y, ve) {
    if (!m)
      return r("handlePatch", Y, ve), vn(Y, ve);
  }
  function Rn(Y, ve) {
    const Ve = le, bt = ie, qe = ne, Yt = { json: ie, text: ne }, ei = Be, Yr = cr(ie, le, [], os), Cn = typeof ve == "function" ? ve(Y, Yr) : void 0;
    n(10, ie = Cn && Cn.json !== void 0 ? Cn.json : Y), n(16, le = Cn && Cn.state !== void 0 ? Cn.state : Yr), n(11, ne = void 0), n(23, Be = !1), Zn(ie), jn({
      previousJson: bt,
      previousState: Ve,
      previousText: qe,
      previousTextIsRepaired: ei
    }), Qt(Yt, null);
  }
  function te(Y, ve) {
    r("handleChangeText");
    const Ve = le, bt = ie, qe = ne, Yt = { json: ie, text: ne }, ei = Be;
    try {
      n(10, ie = w(Y)), n(16, le = cr(ie, le, [], os)), n(11, ne = void 0), n(23, Be = !1);
    } catch {
      try {
        n(10, ie = w(us(Y))), n(16, le = cr(ie, le, [], os)), n(11, ne = Y), n(23, Be = !0);
      } catch {
        n(10, ie = void 0), n(16, le = Qh({ json: ie, expand: os })), n(11, ne = Y), n(23, Be = !1);
      }
    }
    if (typeof ve == "function") {
      const Cn = ve(ie, le);
      n(10, ie = Cn && Cn.json ? Cn.json : ie), n(16, le = Cn && Cn.state ? Cn.state : le);
    }
    Zn(ie), jn({
      previousJson: bt,
      previousState: Ve,
      previousText: qe,
      previousTextIsRepaired: ei
    }), Qt(Yt, null);
  }
  function Te(Y, ve, Ve = !1) {
    r("expand", { path: Y, expanded: ve, recursive: Ve }), ve ? Ve ? n(16, le = cr(ie, le, Y, ru)) : n(16, le = xB(le, Y)) : n(16, le = u6(le, Y)), le.selection && !ve && qB(le.selection, Y) && Ie(void 0), setTimeout(() => {
      Yh(d) || Ue();
    });
  }
  function be() {
    Te([], !0, !0);
  }
  function Oe() {
    Te([], !1, !0);
  }
  function Qe(Y) {
    r("openFind", { findAndReplace: Y }), n(19, fe = !1), n(20, Pe = !1), Qi().then(() => {
      n(19, fe = !0), n(20, Pe = Y);
    });
  }
  function Zt(Y, ve) {
    r("handleExpandSection", Y, ve);
    const Ve = xe(Y);
    n(16, le = FB(ie, le, Ve, ve));
  }
  function Pn(Y) {
    r("pasted json as text", Y), n(18, ke = Y);
  }
  function $n(Y) {
    const ve = Go(Y).replace(/^Command\+/, "Ctrl+"), Ve = Y.shiftKey;
    if (r("keydown", { combo: ve, key: Y.key }), ve === "Ctrl+X" && (Y.preventDefault(), bi(!0)), ve === "Ctrl+Shift+X" && (Y.preventDefault(), bi(!1)), ve === "Ctrl+C" && (Y.preventDefault(), Ht(!0)), ve === "Ctrl+Shift+C" && (Y.preventDefault(), Ht(!1)), ve === "Ctrl+D" && (Y.preventDefault(), Wt()), (ve === "Delete" || ve === "Backspace") && (Y.preventDefault(), wt()), ve === "Insert" && (Y.preventDefault(), mt("structure")), ve === "Ctrl+A" && (Y.preventDefault(), Ie(ZB())), ve === "Ctrl+Q" && Vi(Y), ve === "Up" || ve === "Shift+Up") {
      Y.preventDefault();
      const qe = le.selection ? Sw(ie, le, Ve, !0) || le.selection : ia(ie, le);
      Ie(qe), _i(qe.focusPath);
    }
    if (ve === "Down" || ve === "Shift+Down") {
      Y.preventDefault();
      const qe = le.selection ? JB(ie, le, Ve, !0) || le.selection : ia(ie, le);
      Ie(qe), _i(qe.focusPath);
    }
    if (ve === "Left" || ve === "Shift+Left") {
      Y.preventDefault();
      const qe = le.selection ? GB(ie, le, Ve, !m) || le.selection : ia(ie, le);
      Ie(qe), _i(qe.focusPath);
    }
    if (ve === "Right" || ve === "Shift+Right") {
      Y.preventDefault();
      const qe = le.selection ? YB(ie, le, Ve, !m) || le.selection : ia(ie, le);
      Ie(qe), _i(qe.focusPath);
    }
    if (ve === "Enter" && le.selection) {
      if (!m && Dt(le.selection) && le.selection.paths.length === 1) {
        const qe = le.selection.focusPath, Yt = Ye(ie, St(qe));
        Array.isArray(Yt) && Ie(Pt(qe, !1));
      }
      if (!m && Nn(le.selection) && (Y.preventDefault(), Ie({ ...le.selection, edit: !0 })), Ct(le.selection)) {
        Y.preventDefault();
        const qe = Ye(ie, le.selection.focusPath);
        dn(qe) ? Te(le.selection.focusPath, !0) : m || Ie({ ...le.selection, edit: !0 });
      }
    }
    if (ve.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && le.selection) {
      Y.preventDefault(), Er(Y.key);
      return;
    }
    if (ve === "Enter" && (jr(le.selection) || Yn(le.selection))) {
      Y.preventDefault(), Er("");
      return;
    }
    if (ve === "Ctrl+Enter" && Ct(le.selection)) {
      const qe = Ye(ie, le.selection.focusPath);
      op(qe) && window.open(String(qe), "_blank");
    }
    if (ve === "Escape" && le.selection && (Y.preventDefault(), Ie(void 0)), ve === "Ctrl+F" && (Y.preventDefault(), Qe(!1)), ve === "Ctrl+H" && (Y.preventDefault(), Qe(!0)), ve === "Ctrl+Z") {
      Y.preventDefault();
      const qe = document.activeElement;
      qe && qe.blur && qe.focus ? (qe.blur(), setTimeout(() => {
        Ii(), setTimeout(() => qe.select());
      })) : Ii();
    }
    if (ve === "Ctrl+Shift+Z") {
      Y.preventDefault();
      const qe = document.activeElement;
      qe && qe.blur && qe.focus ? (qe.blur(), setTimeout(() => {
        ar(), setTimeout(() => qe.select());
      })) : ar();
    }
  }
  function Gt(Y) {
    r("handleMouseDown", Y), setTimeout(() => {
      setTimeout(() => {
        !p && !t6(Y.target, "BUTTON") && (Ue(), !le.selection && ie === void 0 && (ne === "" || ne === void 0) && Wn());
      });
    });
  }
  function yi({ anchor: Y, left: ve, top: Ve, width: bt, height: qe, offsetTop: Yt, offsetLeft: ei, showTip: Yr }) {
    const Cn = {
      json: ie,
      documentState: le,
      parser: A,
      showTip: Yr,
      onEditKey: me,
      onEditValue: Le,
      onToggleEnforceString: gt,
      onCut: bi,
      onCopy: Ht,
      onPaste: we,
      onRemove: wt,
      onDuplicate: Wt,
      onExtract: Jt,
      onInsertBefore: Xt,
      onInsert: cn,
      onConvert: Gi,
      onInsertAfter: Fi,
      onSort: qn,
      onTransform: Tn,
      onCloseContextMenu() {
        u(il), Ue();
      }
    };
    ee = !0;
    const il = c(iU, Cn, {
      left: ve,
      top: Ve,
      offsetTop: Yt,
      offsetLeft: ei,
      width: bt,
      height: qe,
      anchor: Y,
      closeOnOuterClick: !0,
      onClose: () => {
        ee = !1, Ue();
      }
    });
  }
  function Vi(Y) {
    if (!(m || Lo(le.selection))) {
      if (Y && (Y.stopPropagation(), Y.preventDefault()), Y && Y.type === "contextmenu" && Y.target !== h)
        yi({
          left: Y.clientX,
          top: Y.clientY,
          width: Ws,
          height: Hs,
          showTip: !1
        });
      else {
        const ve = f == null ? void 0 : f.querySelector(".jse-context-menu-pointer.jse-selected");
        if (ve)
          yi({
            anchor: ve,
            offsetTop: 2,
            width: Ws,
            height: Hs,
            showTip: !1
          });
        else {
          const Ve = f == null ? void 0 : f.getBoundingClientRect();
          Ve && yi({
            top: Ve.top + 2,
            left: Ve.left + 2,
            width: Ws,
            height: Hs,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function Xl(Y) {
    m || yi({
      anchor: i6(Y.target, "BUTTON"),
      offsetTop: 0,
      width: Ws,
      height: Hs,
      showTip: !0
    });
  }
  async function Ql() {
    r("apply pasted json", ke);
    const { path: Y, contents: ve } = ke;
    Ie(Pt(Y, !1)), await Qi();
    const Ve = [
      {
        op: "replace",
        path: xe(Y),
        value: ve
      }
    ];
    Lt(Ve, (bt, qe) => ({
      state: _o(bt, qe, Y)
    }));
  }
  function gg() {
    r("clear pasted json"), n(18, ke = void 0);
  }
  function mg() {
    I(ki.text);
  }
  function se(Y) {
    Ie(Y), Ue(), zi(Y.focusPath);
  }
  function Ue() {
    r("focus"), h && (h.focus(), h.select());
  }
  function gn(Y) {
    !Vu(Y.target, (Ve) => Ve === d) && Lo(le.selection) && (r("click outside the editor, stop edit mode"), Ie((Ve) => Nn(Ve) ? { ...Ve, edit: !1 } : Ct(Ve) ? { ...Ve, edit: !1 } : Ve), p && h && (h.focus(), h.blur()), Qi().then(() => {
      setTimeout(() => {
        h && h.blur();
      });
    }));
  }
  function Ar(Y) {
    return KB(ie, le, Y);
  }
  function co(Y) {
    i && i.onDrag(Y);
  }
  function Mr() {
    i && i.onDragEnd();
  }
  let uf;
  function eT(Y) {
    fe = Y, n(19, fe);
  }
  function tT(Y) {
    _t[Y ? "unshift" : "push"](() => {
      h = Y, n(14, h);
    });
  }
  function nT(Y) {
    _t[Y ? "unshift" : "push"](() => {
      f = Y, n(9, f);
    });
  }
  function iT(Y) {
    _t[Y ? "unshift" : "push"](() => {
      d = Y, n(15, d);
    });
  }
  return t.$$set = (Y) => {
    "readOnly" in Y && n(0, m = Y.readOnly), "externalContent" in Y && n(50, _ = Y.externalContent), "mainMenuBar" in Y && n(1, S = Y.mainMenuBar), "navigationBar" in Y && n(2, v = Y.navigationBar), "escapeControlCharacters" in Y && n(51, k = Y.escapeControlCharacters), "escapeUnicodeCharacters" in Y && n(52, C = Y.escapeUnicodeCharacters), "parser" in Y && n(3, A = Y.parser), "parseMemoizeOne" in Y && n(53, w = Y.parseMemoizeOne), "validator" in Y && n(54, M = Y.validator), "validationParser" in Y && n(55, N = Y.validationParser), "pathParser" in Y && n(4, T = Y.pathParser), "indentation" in Y && n(5, O = Y.indentation), "onError" in Y && n(6, W = Y.onError), "onChange" in Y && n(56, H = Y.onChange), "onChangeMode" in Y && n(57, I = Y.onChangeMode), "onRenderValue" in Y && n(58, z = Y.onRenderValue), "onRenderMenu" in Y && n(7, L = Y.onRenderMenu), "onClassName" in Y && n(59, K = Y.onClassName), "onFocus" in Y && n(60, F = Y.onFocus), "onBlur" in Y && n(61, D = Y.onBlur), "onSortModal" in Y && n(62, X = Y.onSortModal), "onTransformModal" in Y && n(63, ue = Y.onTransformModal), "onJSONEditorModal" in Y && n(64, q = Y.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 3145728 && n(73, nt = G0({
      escapeControlCharacters: k,
      escapeUnicodeCharacters: C
    })), t.$$.dirty[1] & 524288 && an(_), t.$$.dirty[0] & 1024 | t.$$.dirty[2] & 4096 && ot($, ie), t.$$.dirty[0] & 3072, t.$$.dirty[0] & 1032 | t.$$.dirty[1] & 25165824 && yn(ie, M, A, N), t.$$.dirty[0] & 4096 && n(24, jt = Bz(ht)), t.$$.dirty[0] & 512 && (i = f ? Nz(f) : void 0), t.$$.dirty[0] & 9 | t.$$.dirty[1] & 402653184 | t.$$.dirty[2] & 2048 && n(13, uf = {
      readOnly: m,
      parser: A,
      normalization: nt,
      getJson: Ee,
      getDocumentState: li,
      findElement: Yi,
      findNextInside: Ar,
      focus: Ue,
      onPatch: Lt,
      onInsert: mt,
      onExpand: Te,
      onSelect: Ie,
      onFind: Qe,
      onExpandSection: Zt,
      onPasteJson: Pn,
      onRenderValue: z,
      onContextMenu: yi,
      onClassName: K || (() => {
      }),
      onDrag: co,
      onDragEnd: Mr
    }), t.$$.dirty[0] & 8192 && r("context changed", uf);
  }, [
    m,
    S,
    v,
    A,
    T,
    O,
    W,
    L,
    en,
    f,
    ie,
    ne,
    ht,
    uf,
    h,
    d,
    le,
    Ne,
    ke,
    fe,
    Pe,
    ae,
    We,
    Be,
    jt,
    s,
    he,
    Ce,
    J,
    y,
    R,
    B,
    ce,
    Ht,
    kn,
    Ii,
    ar,
    Jn,
    Bn,
    be,
    Oe,
    $n,
    Gt,
    Vi,
    Xl,
    Ql,
    gg,
    mg,
    se,
    gn,
    _,
    k,
    C,
    w,
    M,
    N,
    H,
    I,
    z,
    K,
    F,
    D,
    X,
    ue,
    q,
    pt,
    Rt,
    Ee,
    vn,
    nn,
    zi,
    Yi,
    Ue,
    nt,
    $,
    eT,
    tT,
    nT,
    iT
  ];
}
class tW extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      eW,
      $H,
      yt,
      {
        readOnly: 0,
        externalContent: 50,
        mainMenuBar: 1,
        navigationBar: 2,
        escapeControlCharacters: 51,
        escapeUnicodeCharacters: 52,
        parser: 3,
        parseMemoizeOne: 53,
        validator: 54,
        validationParser: 55,
        pathParser: 4,
        indentation: 5,
        onError: 6,
        onChange: 56,
        onChangeMode: 57,
        onRenderValue: 58,
        onRenderMenu: 7,
        onClassName: 59,
        onFocus: 60,
        onBlur: 61,
        onSortModal: 62,
        onTransformModal: 63,
        onJSONEditorModal: 64,
        expand: 65,
        validate: 66,
        getJson: 67,
        patch: 68,
        acceptAutoRepair: 8,
        openTransformModal: 69,
        scrollTo: 70,
        findElement: 71,
        focus: 72
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get expand() {
    return this.$$.ctx[65];
  }
  get validate() {
    return this.$$.ctx[66];
  }
  get getJson() {
    return this.$$.ctx[67];
  }
  get patch() {
    return this.$$.ctx[68];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[8];
  }
  get openTransformModal() {
    return this.$$.ctx[69];
  }
  get scrollTo() {
    return this.$$.ctx[70];
  }
  get findElement() {
    return this.$$.ctx[71];
  }
  get focus() {
    return this.$$.ctx[72];
  }
}
const gb = tW;
function Qv(t) {
  let e, n, i, r, s;
  const o = [iW, nW], l = [];
  function a(c, u) {
    return u[0] & 16384 && (e = null), e == null && (e = !!Array.isArray(c[14])), e ? 0 : 1;
  }
  return n = a(t, [-1, -1]), i = l[n] = o[n](t), {
    c() {
      i.c(), r = rt();
    },
    m(c, u) {
      l[n].m(c, u), U(c, r, u), s = !0;
    },
    p(c, u) {
      let f = n;
      n = a(c, u), n === f ? l[n].p(c, u) : (Ae(), x(l[f], 1, 1, () => {
        l[f] = null;
      }), Me(), i = l[n], i ? i.p(c, u) : (i = l[n] = o[n](c), i.c()), P(i, 1), i.m(r.parentNode, r));
    },
    i(c) {
      s || (P(i), s = !0);
    },
    o(c) {
      x(i), s = !1;
    },
    d(c) {
      l[n].d(c), c && V(r);
    }
  };
}
function nW(t) {
  let e;
  return {
    c() {
      e = _e("(Only available for arrays, not for objects)");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function iW(t) {
  let e, n;
  return e = new Cz({
    props: {
      queryOptions: t[12],
      json: t[14],
      onChange: t[21]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.queryOptions = i[12]), r[0] & 16384 && (s.json = i[14]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function Zv(t) {
  let e, n;
  return e = new gb({
    props: {
      externalContent: t[19],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: hn,
      onError: console.error,
      onChange: hn,
      onChangeMode: hn,
      onFocus: hn,
      onBlur: hn,
      onSortModal: hn,
      onTransformModal: hn,
      onJSONEditorModal: hn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 524288 && (s.externalContent = i[19]), r[0] & 4 && (s.indentation = i[2]), r[0] & 8 && (s.escapeControlCharacters = i[3]), r[0] & 16 && (s.escapeUnicodeCharacters = i[4]), r[0] & 32 && (s.parser = i[5]), r[0] & 64 && (s.parseMemoizeOne = i[6]), r[0] & 1024 && (s.onRenderValue = i[10]), r[0] & 2048 && (s.onClassName = i[11]), r[0] & 128 && (s.validationParser = i[7]), r[0] & 256 && (s.pathParser = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function rW(t) {
  let e, n = t[17].toString() + "", i;
  return {
    c() {
      e = j("div"), i = _e(n), b(e, "class", "jse-preview jse-error svelte-107mggt");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 131072 && n !== (n = r[17].toString() + "") && ze(i, n);
    },
    i: ye,
    o: ye,
    d(r) {
      r && V(e);
    }
  };
}
function sW(t) {
  let e, n;
  return e = new gb({
    props: {
      externalContent: t[18],
      readOnly: !0,
      mainMenuBar: !1,
      navigationBar: !1,
      indentation: t[2],
      escapeControlCharacters: t[3],
      escapeUnicodeCharacters: t[4],
      parser: t[5],
      parseMemoizeOne: t[6],
      onRenderValue: t[10],
      onRenderMenu: hn,
      onError: console.error,
      onChange: hn,
      onChangeMode: hn,
      onFocus: hn,
      onBlur: hn,
      onSortModal: hn,
      onTransformModal: hn,
      onJSONEditorModal: hn,
      onClassName: t[11],
      validator: null,
      validationParser: t[7],
      pathParser: t[8]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 262144 && (s.externalContent = i[18]), r[0] & 4 && (s.indentation = i[2]), r[0] & 8 && (s.escapeControlCharacters = i[3]), r[0] & 16 && (s.escapeUnicodeCharacters = i[4]), r[0] & 32 && (s.parser = i[5]), r[0] & 64 && (s.parseMemoizeOne = i[6]), r[0] & 1024 && (s.onRenderValue = i[10]), r[0] & 2048 && (s.onClassName = i[11]), r[0] & 128 && (s.validationParser = i[7]), r[0] & 256 && (s.pathParser = i[8]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function oW(t) {
  let e, n, i, r, s, o, l, a, c = t[20](t[0]).description + "", u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z, L, K, F, D, X, ue, q, ee, ie, ne, je, Ie, Xe, le, Ne, nt, ke;
  e = new Dz({
    props: {
      queryLanguages: t[9],
      queryLanguageId: t[0],
      onChangeQueryLanguage: t[26]
    }
  }), v = new Et({
    props: {
      data: t[15] ? hr : vo
    }
  });
  let fe = t[15] && Qv(t);
  L = new Et({
    props: {
      data: t[16] ? hr : vo
    }
  });
  let Pe = t[16] && Zv(t);
  const ae = [sW, rW], $ = [];
  function he(Ce, J) {
    return Ce[17] ? 1 : 0;
  }
  return ee = he(t), ie = $[ee] = ae[ee](t), {
    c() {
      ge(e.$$.fragment), n = Z(), i = j("div"), r = j("div"), s = j("div"), o = j("div"), o.innerHTML = '<div class="jse-label-inner svelte-107mggt">Language</div>', l = Z(), a = j("div"), u = Z(), f = j("div"), f.innerHTML = '<div class="jse-label-inner svelte-107mggt">Path</div>', h = Z(), d = j("input"), g = Z(), m = j("div"), _ = j("div"), S = j("button"), ge(v.$$.fragment), k = _e(`
                Wizard`), C = Z(), fe && fe.c(), A = Z(), w = j("div"), w.innerHTML = '<div class="jse-label-inner svelte-107mggt">Query</div>', M = Z(), N = j("textarea"), T = Z(), O = j("div"), W = j("div"), H = j("div"), I = j("div"), z = j("button"), ge(L.$$.fragment), K = _e(`
                  Original`), F = Z(), Pe && Pe.c(), D = Z(), X = j("div"), ue = j("div"), ue.innerHTML = '<div class="jse-label-inner svelte-107mggt">Preview</div>', q = Z(), ie.c(), ne = Z(), je = j("div"), Ie = j("button"), Xe = _e("Transform"), b(o, "class", "jse-label svelte-107mggt"), b(a, "class", "jse-description svelte-107mggt"), b(f, "class", "jse-label svelte-107mggt"), b(d, "class", "jse-path svelte-107mggt"), b(d, "type", "text"), d.readOnly = !0, b(d, "title", "Selected path"), d.value = p = Ot(t[1]) ? "(whole document)" : wr(Ji(t[1])), b(S, "type", "button"), b(S, "class", "svelte-107mggt"), b(_, "class", "jse-label-inner svelte-107mggt"), b(m, "class", "jse-label svelte-107mggt"), b(w, "class", "jse-label svelte-107mggt"), b(N, "class", "jse-query svelte-107mggt"), b(N, "spellcheck", "false"), N.value = t[13], b(s, "class", "jse-query-contents svelte-107mggt"), b(z, "type", "button"), b(z, "class", "svelte-107mggt"), b(I, "class", "jse-label-inner svelte-107mggt"), b(H, "class", "jse-label svelte-107mggt"), b(W, "class", "jse-original-data svelte-107mggt"), Se(W, "jse-hide", !t[16]), b(ue, "class", "jse-label svelte-107mggt"), b(X, "class", "jse-preview-data svelte-107mggt"), b(O, "class", "jse-data-contents svelte-107mggt"), Se(O, "jse-hide-original-data", !t[16]), b(r, "class", "jse-main-contents svelte-107mggt"), b(Ie, "type", "button"), b(Ie, "class", "jse-primary svelte-107mggt"), Ie.disabled = le = !!t[17], b(je, "class", "jse-actions svelte-107mggt"), b(i, "class", "jse-modal-contents svelte-107mggt");
    },
    m(Ce, J) {
      de(e, Ce, J), U(Ce, n, J), U(Ce, i, J), E(i, r), E(r, s), E(s, o), E(s, l), E(s, a), a.innerHTML = c, E(s, u), E(s, f), E(s, h), E(s, d), E(s, g), E(s, m), E(m, _), E(_, S), de(v, S, null), E(S, k), E(s, C), fe && fe.m(s, null), E(s, A), E(s, w), E(s, M), E(s, N), E(r, T), E(r, O), E(O, W), E(W, H), E(H, I), E(I, z), de(L, z, null), E(z, K), E(W, F), Pe && Pe.m(W, null), E(O, D), E(O, X), E(X, ue), E(X, q), $[ee].m(X, null), E(i, ne), E(i, je), E(je, Ie), E(Ie, Xe), Ne = !0, nt || (ke = [
        re(S, "click", t[24]),
        re(N, "input", t[22]),
        re(z, "click", t[25]),
        re(Ie, "click", t[23]),
        qi(aW.call(null, Ie))
      ], nt = !0);
    },
    p(Ce, J) {
      const y = {};
      J[0] & 512 && (y.queryLanguages = Ce[9]), J[0] & 1 && (y.queryLanguageId = Ce[0]), e.$set(y), (!Ne || J[0] & 1) && c !== (c = Ce[20](Ce[0]).description + "") && (a.innerHTML = c), (!Ne || J[0] & 2 && p !== (p = Ot(Ce[1]) ? "(whole document)" : wr(Ji(Ce[1]))) && d.value !== p) && (d.value = p);
      const R = {};
      J[0] & 32768 && (R.data = Ce[15] ? hr : vo), v.$set(R), Ce[15] ? fe ? (fe.p(Ce, J), J[0] & 32768 && P(fe, 1)) : (fe = Qv(Ce), fe.c(), P(fe, 1), fe.m(s, A)) : fe && (Ae(), x(fe, 1, 1, () => {
        fe = null;
      }), Me()), (!Ne || J[0] & 8192) && (N.value = Ce[13]);
      const B = {};
      J[0] & 65536 && (B.data = Ce[16] ? hr : vo), L.$set(B), Ce[16] ? Pe ? (Pe.p(Ce, J), J[0] & 65536 && P(Pe, 1)) : (Pe = Zv(Ce), Pe.c(), P(Pe, 1), Pe.m(W, null)) : Pe && (Ae(), x(Pe, 1, 1, () => {
        Pe = null;
      }), Me()), (!Ne || J[0] & 65536) && Se(W, "jse-hide", !Ce[16]);
      let Q = ee;
      ee = he(Ce), ee === Q ? $[ee].p(Ce, J) : (Ae(), x($[Q], 1, 1, () => {
        $[Q] = null;
      }), Me(), ie = $[ee], ie ? ie.p(Ce, J) : (ie = $[ee] = ae[ee](Ce), ie.c()), P(ie, 1), ie.m(X, null)), (!Ne || J[0] & 65536) && Se(O, "jse-hide-original-data", !Ce[16]), (!Ne || J[0] & 131072 && le !== (le = !!Ce[17])) && (Ie.disabled = le);
    },
    i(Ce) {
      Ne || (P(e.$$.fragment, Ce), P(v.$$.fragment, Ce), P(fe), P(L.$$.fragment, Ce), P(Pe), P(ie), Ne = !0);
    },
    o(Ce) {
      x(e.$$.fragment, Ce), x(v.$$.fragment, Ce), x(fe), x(L.$$.fragment, Ce), x(Pe), x(ie), Ne = !1;
    },
    d(Ce) {
      pe(e, Ce), Ce && V(n), Ce && V(i), pe(v), fe && fe.d(), pe(L), Pe && Pe.d(), $[ee].d(), nt = !1, ct(ke);
    }
  };
}
function lW(t) {
  let e, n, i;
  return n = new o6({
    props: {
      $$slots: { default: [oW] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-modal jse-transform svelte-107mggt");
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1048575 | s[1] & 256 && (o.$$scope = { dirty: s, ctx: r }), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function aW(t) {
  t.focus();
}
function cW(t, e, n) {
  let i, r;
  const s = mi("jsoneditor:TransformModal");
  let { id: o = "transform-modal-" + Nc() } = e, { json: l } = e, { rootPath: a = [] } = e, { indentation: c } = e, { escapeControlCharacters: u } = e, { escapeUnicodeCharacters: f } = e, { parser: h } = e, { parseMemoizeOne: d } = e, { validationParser: p } = e, { pathParser: g } = e, { queryLanguages: m } = e, { queryLanguageId: _ } = e, { onChangeQueryLanguage: S } = e, { onRenderValue: v } = e, { onClassName: k } = e, { onTransform: C } = e;
  const { close: A } = gi("simple-modal"), w = `${o}:${xe(a)}`, M = Or[w] || {};
  let N = Or.showWizard !== !1, T = Or.showOriginal !== !1, O = M.queryOptions || {}, W = _ === M.queryLanguageId && M.query ? M.query : L(_).createQuery(l, M.queryOptions || {}), H = M.isManual || !1, I, z = { text: "" };
  function L(ne) {
    return m.find((je) => je.id === ne) || m[0];
  }
  function K(ne) {
    n(12, O = ne), n(13, W = L(_).createQuery(l, ne)), n(32, H = !1), s("updateQueryByWizard", { queryOptions: O, query: W, isManual: H });
  }
  function F(ne) {
    n(13, W = ne.target.value), n(32, H = !0), s("handleChangeQuery", { query: W, isManual: H });
  }
  function D(ne, je) {
    try {
      s("previewTransform", { query: je });
      const Ie = L(_).executeQuery(ne, je);
      n(18, z = { json: Ie }), n(17, I = void 0);
    } catch (Ie) {
      n(18, z = { text: "" }), n(17, I = Ie);
    }
  }
  const X = _p(D, Y4);
  function ue() {
    try {
      s("handleTransform", { query: W });
      const ne = L(_).executeQuery(i, W);
      C([
        {
          op: "replace",
          path: xe(a),
          value: ne
        }
      ]), A();
    } catch (ne) {
      console.error(ne), n(18, z = { text: "" }), n(17, I = ne.toString());
    }
  }
  function q() {
    n(15, N = !N), n(31, Or.showWizard = N, Or);
  }
  function ee() {
    n(16, T = !T), n(31, Or.showOriginal = T, Or);
  }
  function ie(ne) {
    s("handleChangeQueryLanguage", ne), n(0, _ = ne), S(ne);
    const je = L(_);
    n(13, W = je.createQuery(l, O)), n(32, H = !1);
  }
  return t.$$set = (ne) => {
    "id" in ne && n(27, o = ne.id), "json" in ne && n(28, l = ne.json), "rootPath" in ne && n(1, a = ne.rootPath), "indentation" in ne && n(2, c = ne.indentation), "escapeControlCharacters" in ne && n(3, u = ne.escapeControlCharacters), "escapeUnicodeCharacters" in ne && n(4, f = ne.escapeUnicodeCharacters), "parser" in ne && n(5, h = ne.parser), "parseMemoizeOne" in ne && n(6, d = ne.parseMemoizeOne), "validationParser" in ne && n(7, p = ne.validationParser), "pathParser" in ne && n(8, g = ne.pathParser), "queryLanguages" in ne && n(9, m = ne.queryLanguages), "queryLanguageId" in ne && n(0, _ = ne.queryLanguageId), "onChangeQueryLanguage" in ne && n(29, S = ne.onChangeQueryLanguage), "onRenderValue" in ne && n(10, v = ne.onRenderValue), "onClassName" in ne && n(11, k = ne.onClassName), "onTransform" in ne && n(30, C = ne.onTransform);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 268435458 && n(14, i = Ye(l, a)), t.$$.dirty[0] & 16384 && n(19, r = { json: i }), t.$$.dirty[0] & 24576 && X(i, W), t.$$.dirty[0] & 12289 | t.$$.dirty[1] & 3 && (n(
      31,
      Or[w] = {
        queryOptions: O,
        query: W,
        queryLanguageId: _,
        isManual: H
      },
      Or
    ), s("store state in memory", w, Or[w]));
  }, [
    _,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    v,
    k,
    O,
    W,
    i,
    N,
    T,
    I,
    z,
    r,
    L,
    K,
    F,
    ue,
    q,
    ee,
    ie,
    o,
    l,
    S,
    C,
    Or,
    H
  ];
}
class uW extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      cW,
      lW,
      yt,
      {
        id: 27,
        json: 28,
        rootPath: 1,
        indentation: 2,
        escapeControlCharacters: 3,
        escapeUnicodeCharacters: 4,
        parser: 5,
        parseMemoizeOne: 6,
        validationParser: 7,
        pathParser: 8,
        queryLanguages: 9,
        queryLanguageId: 0,
        onChangeQueryLanguage: 29,
        onRenderValue: 10,
        onClassName: 11,
        onTransform: 30
      },
      null,
      [-1, -1]
    );
  }
}
const fW = uW, ho = {};
function $v(t) {
  let e, n, i, r, s, o, l;
  function a(u) {
    t[13](u);
  }
  let c = {
    showChevron: !0,
    items: t[3]
  };
  return t[1] !== void 0 && (c.value = t[1]), s = new cl({ props: c }), _t.push(() => Ir(s, "value", a, t[1])), {
    c() {
      e = j("tr"), n = j("th"), n.textContent = "Property", i = Z(), r = j("td"), ge(s.$$.fragment), b(n, "class", "svelte-1y818v2"), b(r, "class", "svelte-1y818v2");
    },
    m(u, f) {
      U(u, e, f), E(e, n), E(e, i), E(e, r), de(s, r, null), l = !0;
    },
    p(u, f) {
      const h = {};
      f & 8 && (h.items = u[3]), !o && f & 2 && (o = !0, h.value = u[1], Pr(() => o = !1)), s.$set(h);
    },
    i(u) {
      l || (P(s.$$.fragment, u), l = !0);
    },
    o(u) {
      x(s.$$.fragment, u), l = !1;
    },
    d(u) {
      u && V(e), pe(s);
    }
  };
}
function ek(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = _e(t[5]), b(e, "class", "jse-error svelte-1y818v2");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, r) {
      r & 32 && ze(n, i[5]);
    },
    d(i) {
      i && V(e);
    }
  };
}
function hW(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z, L;
  n = new ab({
    props: {
      title: t[4] ? "Sort array items" : "Sort object keys"
    }
  });
  let K = t[4] && (t[3].length > 1 || t[1] === void 0) && $v(t);
  function F(ue) {
    t[14](ue);
  }
  let D = {
    showChevron: !0,
    clearable: !1,
    items: t[6]
  };
  t[2] !== void 0 && (D.value = t[2]), C = new cl({ props: D }), _t.push(() => Ir(C, "value", F, t[2]));
  let X = t[5] && ek(t);
  return {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), r = j("div"), s = j("table"), o = j("colgroup"), o.innerHTML = `<col width="25%"/> 
        <col width="75%"/>`, l = Z(), a = j("tbody"), c = j("tr"), u = j("th"), u.textContent = "Path", f = Z(), h = j("td"), d = j("input"), g = Z(), K && K.c(), m = Z(), _ = j("tr"), S = j("th"), S.textContent = "Direction", v = Z(), k = j("td"), ge(C.$$.fragment), w = Z(), M = j("div"), X && X.c(), N = Z(), T = j("div"), O = j("button"), W = _e("Sort"), b(u, "class", "svelte-1y818v2"), b(d, "class", "jse-path svelte-1y818v2"), b(d, "type", "text"), d.readOnly = !0, b(d, "title", "Selected path"), d.value = p = Ot(t[0]) ? "(whole document)" : wr(Ji(t[0])), b(h, "class", "svelte-1y818v2"), b(S, "class", "svelte-1y818v2"), b(k, "class", "svelte-1y818v2"), b(s, "class", "svelte-1y818v2"), b(M, "class", "jse-space svelte-1y818v2"), b(O, "type", "button"), b(O, "class", "jse-primary svelte-1y818v2"), O.disabled = H = t[4] ? !t[1] : !1, b(T, "class", "jse-actions svelte-1y818v2"), b(r, "class", "jse-modal-contents svelte-1y818v2"), b(e, "class", "jse-modal jse-sort svelte-1y818v2");
    },
    m(ue, q) {
      U(ue, e, q), de(n, e, null), E(e, i), E(e, r), E(r, s), E(s, o), E(s, l), E(s, a), E(a, c), E(c, u), E(c, f), E(c, h), E(h, d), E(a, g), K && K.m(a, null), E(a, m), E(a, _), E(_, S), E(_, v), E(_, k), de(C, k, null), E(r, w), E(r, M), X && X.m(M, null), E(r, N), E(r, T), E(T, O), E(O, W), I = !0, z || (L = [
        re(O, "click", t[7]),
        qi(dW.call(null, O))
      ], z = !0);
    },
    p(ue, [q]) {
      const ee = {};
      q & 16 && (ee.title = ue[4] ? "Sort array items" : "Sort object keys"), n.$set(ee), (!I || q & 1 && p !== (p = Ot(ue[0]) ? "(whole document)" : wr(Ji(ue[0]))) && d.value !== p) && (d.value = p), ue[4] && (ue[3].length > 1 || ue[1] === void 0) ? K ? (K.p(ue, q), q & 26 && P(K, 1)) : (K = $v(ue), K.c(), P(K, 1), K.m(a, m)) : K && (Ae(), x(K, 1, 1, () => {
        K = null;
      }), Me());
      const ie = {};
      !A && q & 4 && (A = !0, ie.value = ue[2], Pr(() => A = !1)), C.$set(ie), ue[5] ? X ? X.p(ue, q) : (X = ek(ue), X.c(), X.m(M, null)) : X && (X.d(1), X = null), (!I || q & 18 && H !== (H = ue[4] ? !ue[1] : !1)) && (O.disabled = H);
    },
    i(ue) {
      I || (P(n.$$.fragment, ue), P(K), P(C.$$.fragment, ue), I = !0);
    },
    o(ue) {
      x(n.$$.fragment, ue), x(K), x(C.$$.fragment, ue), I = !1;
    },
    d(ue) {
      ue && V(e), pe(n), K && K.d(), pe(C), X && X.d(), z = !1, ct(L);
    }
  };
}
function dW(t) {
  t.focus();
}
function pW(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:SortModal");
  let { id: l } = e, { json: a } = e, { rootPath: c } = e, { onSort: u } = e;
  const { close: f } = gi("simple-modal"), h = `${l}:${xe(c)}`, d = Ye(a, c), p = { value: 1, label: "ascending" }, m = [p, { value: -1, label: "descending" }];
  let _ = ho[h] && ho[h].selectedProperty || void 0, S = ho[h] && ho[h].selectedDirection || p, v;
  function k() {
    try {
      n(5, v = void 0);
      const w = _ == null ? void 0 : _.value, M = S == null ? void 0 : S.value, N = X6(a, c, w, M);
      u({
        operations: N,
        rootPath: c,
        itemPath: w,
        direction: M
      }), f();
    } catch (w) {
      n(5, v = w.toString());
    }
  }
  function C(w) {
    _ = w, n(1, _), n(3, s), n(12, r), n(4, i);
  }
  function A(w) {
    S = w, n(2, S);
  }
  return t.$$set = (w) => {
    "id" in w && n(8, l = w.id), "json" in w && n(9, a = w.json), "rootPath" in w && n(0, c = w.rootPath), "onSort" in w && n(10, u = w.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 16 && n(12, r = i ? $m(d) : void 0), t.$$.dirty & 4096 && n(3, s = r ? r.map(na) : void 0), t.$$.dirty & 10 && _ === void 0 && s && s.length === 1 && n(1, _ = s[0]), t.$$.dirty & 2054 && (n(11, ho[h] = { selectedProperty: _, selectedDirection: S }, ho), o("store state in memory", h, ho[h]));
  }, n(4, i = Array.isArray(d)), [
    c,
    _,
    S,
    s,
    i,
    v,
    m,
    k,
    l,
    a,
    u,
    ho,
    r,
    C,
    A
  ];
}
class gW extends Ge {
  constructor(e) {
    super(), Ke(this, e, pW, hW, yt, { id: 8, json: 9, rootPath: 0, onSort: 10 });
  }
}
const mW = gW;
function rs() {
}
function Of(t, e = 1e3) {
  if (t < 0.9 * e)
    return t.toFixed() + " B";
  const n = t / e;
  if (n < 0.9 * e)
    return n.toFixed(1) + " KB";
  const i = n / e;
  if (i < 0.9 * e)
    return i.toFixed(1) + " MB";
  const r = i / e;
  return r < 0.9 * e ? r.toFixed(1) + " GB" : (r / e).toFixed(1) + " TB";
}
function bW(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function _W(t, e, n) {
  let i, { readOnly: r = !1 } = e, { onFormat: s } = e, { onCompact: o } = e, { onSort: l } = e, { onTransform: a } = e, { onToggleSearch: c } = e, { onUndo: u } = e, { onRedo: f } = e, { canUndo: h } = e, { canRedo: d } = e, { canFormat: p } = e, { canCompact: g } = e, { canSort: m } = e, { canTransform: _ } = e, { onRenderMenu: S = hn } = e, v;
  return t.$$set = (k) => {
    "readOnly" in k && n(1, r = k.readOnly), "onFormat" in k && n(2, s = k.onFormat), "onCompact" in k && n(3, o = k.onCompact), "onSort" in k && n(4, l = k.onSort), "onTransform" in k && n(5, a = k.onTransform), "onToggleSearch" in k && n(6, c = k.onToggleSearch), "onUndo" in k && n(7, u = k.onUndo), "onRedo" in k && n(8, f = k.onRedo), "canUndo" in k && n(9, h = k.canUndo), "canRedo" in k && n(10, d = k.canRedo), "canFormat" in k && n(11, p = k.canFormat), "canCompact" in k && n(12, g = k.canCompact), "canSort" in k && n(13, m = k.canSort), "canTransform" in k && n(14, _ = k.canTransform), "onRenderMenu" in k && n(15, S = k.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 32766 && n(16, v = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: nH,
        title: "Format JSON: add proper indentation and new lines (Ctrl+I)",
        className: "jse-format",
        onClick: s,
        disabled: r || !p
      },
      {
        type: "button",
        icon: iH,
        title: "Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",
        className: "jse-compact",
        onClick: o,
        disabled: r || !g
      },
      { type: "separator" },
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: l,
        disabled: r || !m
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: a,
        disabled: r || !_
      },
      {
        type: "button",
        icon: nb,
        title: "Search (Ctrl+F)",
        className: "jse-search",
        onClick: c
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: u,
        disabled: !h
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: f,
        disabled: !d
      },
      { type: "space" }
    ]), t.$$.dirty & 98304 && n(0, i = S("text", v) || v);
  }, [
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v
  ];
}
class yW extends Ge {
  constructor(e) {
    super(), Ke(this, e, _W, bW, yt, {
      readOnly: 1,
      onFormat: 2,
      onCompact: 3,
      onSort: 4,
      onTransform: 5,
      onToggleSearch: 6,
      onUndo: 7,
      onRedo: 8,
      canUndo: 9,
      canRedo: 10,
      canFormat: 11,
      canCompact: 12,
      canSort: 13,
      canTransform: 14,
      onRenderMenu: 15
    });
  }
}
const wW = yW;
class zt {
  constructor() {
  }
  lineAt(e) {
    if (e < 0 || e > this.length)
      throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);
    return this.lineInner(e, !1, 1, 0);
  }
  line(e) {
    if (e < 1 || e > this.lines)
      throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);
    return this.lineInner(e, !0, 1, 0);
  }
  replace(e, n, i) {
    let r = [];
    return this.decompose(0, e, r, 2), i.length && i.decompose(0, i.length, r, 3), this.decompose(n, this.length, r, 1), ss.from(r, this.length - (n - e) + i.length);
  }
  append(e) {
    return this.replace(this.length, this.length, e);
  }
  slice(e, n = this.length) {
    let i = [];
    return this.decompose(e, n, i, 0), ss.from(i, n - e);
  }
  eq(e) {
    if (e == this)
      return !0;
    if (e.length != this.length || e.lines != this.lines)
      return !1;
    let n = this.scanIdentical(e, 1), i = this.length - this.scanIdentical(e, -1), r = new zc(this), s = new zc(e);
    for (let o = n, l = n; ; ) {
      if (r.next(o), s.next(o), o = 0, r.lineBreak != s.lineBreak || r.done != s.done || r.value != s.value)
        return !1;
      if (l += r.value.length, r.done || l >= i)
        return !0;
    }
  }
  iter(e = 1) {
    return new zc(this, e);
  }
  iterRange(e, n = this.length) {
    return new r8(this, e, n);
  }
  iterLines(e, n) {
    let i;
    if (e == null)
      i = this.iter();
    else {
      n == null && (n = this.lines + 1);
      let r = this.line(e).from;
      i = this.iterRange(r, Math.max(r, n == this.lines + 1 ? this.length : n <= 1 ? 0 : this.line(n - 1).to));
    }
    return new s8(i);
  }
  toString() {
    return this.sliceString(0);
  }
  toJSON() {
    let e = [];
    return this.flatten(e), e;
  }
  static of(e) {
    if (e.length == 0)
      throw new RangeError("A document must have at least one line");
    return e.length == 1 && !e[0] ? zt.empty : e.length <= 32 ? new xn(e) : ss.from(xn.split(e, []));
  }
}
class xn extends zt {
  constructor(e, n = vW(e)) {
    super(), this.text = e, this.length = n;
  }
  get lines() {
    return this.text.length;
  }
  get children() {
    return null;
  }
  lineInner(e, n, i, r) {
    for (let s = 0; ; s++) {
      let o = this.text[s], l = r + o.length;
      if ((n ? i : l) >= e)
        return new kW(r, l, i, o);
      r = l + 1, i++;
    }
  }
  decompose(e, n, i, r) {
    let s = e <= 0 && n >= this.length ? this : new xn(tk(this.text, e, n), Math.min(n, this.length) - Math.max(0, e));
    if (r & 1) {
      let o = i.pop(), l = gh(s.text, o.text.slice(), 0, s.length);
      if (l.length <= 32)
        i.push(new xn(l, o.length + s.length));
      else {
        let a = l.length >> 1;
        i.push(new xn(l.slice(0, a)), new xn(l.slice(a)));
      }
    } else
      i.push(s);
  }
  replace(e, n, i) {
    if (!(i instanceof xn))
      return super.replace(e, n, i);
    let r = gh(this.text, gh(i.text, tk(this.text, 0, e)), n), s = this.length + i.length - (n - e);
    return r.length <= 32 ? new xn(r, s) : ss.from(xn.split(r, []), s);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let s = 0, o = 0; s <= n && o < this.text.length; o++) {
      let l = this.text[o], a = s + l.length;
      s > e && o && (r += i), e < a && n > s && (r += l.slice(Math.max(0, e - s), n - s)), s = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.text)
      e.push(n);
  }
  scanIdentical() {
    return 0;
  }
  static split(e, n) {
    let i = [], r = -1;
    for (let s of e)
      i.push(s), r += s.length + 1, i.length == 32 && (n.push(new xn(i, r)), i = [], r = -1);
    return r > -1 && n.push(new xn(i, r)), n;
  }
}
class ss extends zt {
  constructor(e, n) {
    super(), this.children = e, this.length = n, this.lines = 0;
    for (let i of e)
      this.lines += i.lines;
  }
  lineInner(e, n, i, r) {
    for (let s = 0; ; s++) {
      let o = this.children[s], l = r + o.length, a = i + o.lines - 1;
      if ((n ? a : l) >= e)
        return o.lineInner(e, n, i, r);
      r = l + 1, i = a + 1;
    }
  }
  decompose(e, n, i, r) {
    for (let s = 0, o = 0; o <= n && s < this.children.length; s++) {
      let l = this.children[s], a = o + l.length;
      if (e <= a && n >= o) {
        let c = r & ((o <= e ? 1 : 0) | (a >= n ? 2 : 0));
        o >= e && a <= n && !c ? i.push(l) : l.decompose(e - o, n - o, i, c);
      }
      o = a + 1;
    }
  }
  replace(e, n, i) {
    if (i.lines < this.lines)
      for (let r = 0, s = 0; r < this.children.length; r++) {
        let o = this.children[r], l = s + o.length;
        if (e >= s && n <= l) {
          let a = o.replace(e - s, n - s, i), c = this.lines - o.lines + a.lines;
          if (a.lines < c >> 5 - 1 && a.lines > c >> 5 + 1) {
            let u = this.children.slice();
            return u[r] = a, new ss(u, this.length - (n - e) + i.length);
          }
          return super.replace(s, l, a);
        }
        s = l + 1;
      }
    return super.replace(e, n, i);
  }
  sliceString(e, n = this.length, i = `
`) {
    let r = "";
    for (let s = 0, o = 0; s < this.children.length && o <= n; s++) {
      let l = this.children[s], a = o + l.length;
      o > e && s && (r += i), e < a && n > o && (r += l.sliceString(e - o, n - o, i)), o = a + 1;
    }
    return r;
  }
  flatten(e) {
    for (let n of this.children)
      n.flatten(e);
  }
  scanIdentical(e, n) {
    if (!(e instanceof ss))
      return 0;
    let i = 0, [r, s, o, l] = n > 0 ? [0, 0, this.children.length, e.children.length] : [this.children.length - 1, e.children.length - 1, -1, -1];
    for (; ; r += n, s += n) {
      if (r == o || s == l)
        return i;
      let a = this.children[r], c = e.children[s];
      if (a != c)
        return i + a.scanIdentical(c, n);
      i += a.length + 1;
    }
  }
  static from(e, n = e.reduce((i, r) => i + r.length + 1, -1)) {
    let i = 0;
    for (let d of e)
      i += d.lines;
    if (i < 32) {
      let d = [];
      for (let p of e)
        p.flatten(d);
      return new xn(d, n);
    }
    let r = Math.max(32, i >> 5), s = r << 1, o = r >> 1, l = [], a = 0, c = -1, u = [];
    function f(d) {
      let p;
      if (d.lines > s && d instanceof ss)
        for (let g of d.children)
          f(g);
      else
        d.lines > o && (a > o || !a) ? (h(), l.push(d)) : d instanceof xn && a && (p = u[u.length - 1]) instanceof xn && d.lines + p.lines <= 32 ? (a += d.lines, c += d.length + 1, u[u.length - 1] = new xn(p.text.concat(d.text), p.length + 1 + d.length)) : (a + d.lines > r && h(), a += d.lines, c += d.length + 1, u.push(d));
    }
    function h() {
      a != 0 && (l.push(u.length == 1 ? u[0] : ss.from(u, c)), c = -1, a = u.length = 0);
    }
    for (let d of e)
      f(d);
    return h(), l.length == 1 ? l[0] : new ss(l, n);
  }
}
zt.empty = /* @__PURE__ */ new xn([""], 0);
function vW(t) {
  let e = -1;
  for (let n of t)
    e += n.length + 1;
  return e;
}
function gh(t, e, n = 0, i = 1e9) {
  for (let r = 0, s = 0, o = !0; s < t.length && r <= i; s++) {
    let l = t[s], a = r + l.length;
    a >= n && (a > i && (l = l.slice(0, i - r)), r < n && (l = l.slice(n - r)), o ? (e[e.length - 1] += l, o = !1) : e.push(l)), r = a + 1;
  }
  return e;
}
function tk(t, e, n) {
  return gh(t, [""], e, n);
}
class zc {
  constructor(e, n = 1) {
    this.dir = n, this.done = !1, this.lineBreak = !1, this.value = "", this.nodes = [e], this.offsets = [n > 0 ? 1 : (e instanceof xn ? e.text.length : e.children.length) << 1];
  }
  nextInner(e, n) {
    for (this.done = this.lineBreak = !1; ; ) {
      let i = this.nodes.length - 1, r = this.nodes[i], s = this.offsets[i], o = s >> 1, l = r instanceof xn ? r.text.length : r.children.length;
      if (o == (n > 0 ? l : 0)) {
        if (i == 0)
          return this.done = !0, this.value = "", this;
        n > 0 && this.offsets[i - 1]++, this.nodes.pop(), this.offsets.pop();
      } else if ((s & 1) == (n > 0 ? 0 : 1)) {
        if (this.offsets[i] += n, e == 0)
          return this.lineBreak = !0, this.value = `
`, this;
        e--;
      } else if (r instanceof xn) {
        let a = r.text[o + (n < 0 ? -1 : 0)];
        if (this.offsets[i] += n, a.length > Math.max(0, e))
          return this.value = e == 0 ? a : n > 0 ? a.slice(e) : a.slice(0, a.length - e), this;
        e -= a.length;
      } else {
        let a = r.children[o + (n < 0 ? -1 : 0)];
        e > a.length ? (e -= a.length, this.offsets[i] += n) : (n < 0 && this.offsets[i]--, this.nodes.push(a), this.offsets.push(n > 0 ? 1 : (a instanceof xn ? a.text.length : a.children.length) << 1));
      }
    }
  }
  next(e = 0) {
    return e < 0 && (this.nextInner(-e, -this.dir), e = this.value.length), this.nextInner(e, this.dir);
  }
}
class r8 {
  constructor(e, n, i) {
    this.value = "", this.done = !1, this.cursor = new zc(e, n > i ? -1 : 1), this.pos = n > i ? e.length : 0, this.from = Math.min(n, i), this.to = Math.max(n, i);
  }
  nextInner(e, n) {
    if (n < 0 ? this.pos <= this.from : this.pos >= this.to)
      return this.value = "", this.done = !0, this;
    e += Math.max(0, n < 0 ? this.pos - this.to : this.from - this.pos);
    let i = n < 0 ? this.pos - this.from : this.to - this.pos;
    e > i && (e = i), i -= e;
    let { value: r } = this.cursor.next(e);
    return this.pos += (r.length + e) * n, this.value = r.length <= i ? r : n < 0 ? r.slice(r.length - i) : r.slice(0, i), this.done = !this.value, this;
  }
  next(e = 0) {
    return e < 0 ? e = Math.max(e, this.from - this.pos) : e > 0 && (e = Math.min(e, this.to - this.pos)), this.nextInner(e, this.cursor.dir);
  }
  get lineBreak() {
    return this.cursor.lineBreak && this.value != "";
  }
}
class s8 {
  constructor(e) {
    this.inner = e, this.afterBreak = !0, this.value = "", this.done = !1;
  }
  next(e = 0) {
    let { done: n, lineBreak: i, value: r } = this.inner.next(e);
    return n ? (this.done = !0, this.value = "") : i ? this.afterBreak ? this.value = "" : (this.afterBreak = !0, this.next()) : (this.value = r, this.afterBreak = !1), this;
  }
  get lineBreak() {
    return !1;
  }
}
typeof Symbol < "u" && (zt.prototype[Symbol.iterator] = function() {
  return this.iter();
}, zc.prototype[Symbol.iterator] = r8.prototype[Symbol.iterator] = s8.prototype[Symbol.iterator] = function() {
  return this;
});
class kW {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.number = i, this.text = r;
  }
  get length() {
    return this.to - this.from;
  }
}
let ma = /* @__PURE__ */ "lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t) => t ? parseInt(t, 36) : 1);
for (let t = 1; t < ma.length; t++)
  ma[t] += ma[t - 1];
function CW(t) {
  for (let e = 1; e < ma.length; e += 2)
    if (ma[e] > t)
      return ma[e - 1] <= t;
  return !1;
}
function nk(t) {
  return t >= 127462 && t <= 127487;
}
const ik = 8205;
function Li(t, e, n = !0, i = !0) {
  return (n ? o8 : SW)(t, e, i);
}
function o8(t, e, n) {
  if (e == t.length)
    return e;
  e && l8(t.charCodeAt(e)) && a8(t.charCodeAt(e - 1)) && e--;
  let i = Ci(t, e);
  for (e += $i(i); e < t.length; ) {
    let r = Ci(t, e);
    if (i == ik || r == ik || n && CW(r))
      e += $i(r), i = r;
    else if (nk(r)) {
      let s = 0, o = e - 2;
      for (; o >= 0 && nk(Ci(t, o)); )
        s++, o -= 2;
      if (s % 2 == 0)
        break;
      e += 2;
    } else
      break;
  }
  return e;
}
function SW(t, e, n) {
  for (; e > 0; ) {
    let i = o8(t, e - 2, n);
    if (i < e)
      return i;
    e--;
  }
  return 0;
}
function l8(t) {
  return t >= 56320 && t < 57344;
}
function a8(t) {
  return t >= 55296 && t < 56320;
}
function Ci(t, e) {
  let n = t.charCodeAt(e);
  if (!a8(n) || e + 1 == t.length)
    return n;
  let i = t.charCodeAt(e + 1);
  return l8(i) ? (n - 55296 << 10) + (i - 56320) + 65536 : n;
}
function mb(t) {
  return t <= 65535 ? String.fromCharCode(t) : (t -= 65536, String.fromCharCode((t >> 10) + 55296, (t & 1023) + 56320));
}
function $i(t) {
  return t < 65536 ? 1 : 2;
}
const l1 = /\r\n?|\n/;
var Di = /* @__PURE__ */ function(t) {
  return t[t.Simple = 0] = "Simple", t[t.TrackDel = 1] = "TrackDel", t[t.TrackBefore = 2] = "TrackBefore", t[t.TrackAfter = 3] = "TrackAfter", t;
}(Di || (Di = {}));
class ds {
  constructor(e) {
    this.sections = e;
  }
  get length() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2)
      e += this.sections[n];
    return e;
  }
  get newLength() {
    let e = 0;
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n + 1];
      e += i < 0 ? this.sections[n] : i;
    }
    return e;
  }
  get empty() {
    return this.sections.length == 0 || this.sections.length == 2 && this.sections[1] < 0;
  }
  iterGaps(e) {
    for (let n = 0, i = 0, r = 0; n < this.sections.length; ) {
      let s = this.sections[n++], o = this.sections[n++];
      o < 0 ? (e(i, r, s), r += s) : r += o, i += s;
    }
  }
  iterChangedRanges(e, n = !1) {
    a1(this, e, n);
  }
  get invertedDesc() {
    let e = [];
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      r < 0 ? e.push(i, r) : e.push(r, i);
    }
    return new ds(e);
  }
  composeDesc(e) {
    return this.empty ? e : e.empty ? this : c8(this, e);
  }
  mapDesc(e, n = !1) {
    return e.empty ? this : c1(this, e, n);
  }
  mapPos(e, n = -1, i = Di.Simple) {
    let r = 0, s = 0;
    for (let o = 0; o < this.sections.length; ) {
      let l = this.sections[o++], a = this.sections[o++], c = r + l;
      if (a < 0) {
        if (c > e)
          return s + (e - r);
        s += l;
      } else {
        if (i != Di.Simple && c >= e && (i == Di.TrackDel && r < e && c > e || i == Di.TrackBefore && r < e || i == Di.TrackAfter && c > e))
          return null;
        if (c > e || c == e && n < 0 && !l)
          return e == r || n < 0 ? s : s + a;
        s += a;
      }
      r = c;
    }
    if (e > r)
      throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);
    return s;
  }
  touchesRange(e, n = e) {
    for (let i = 0, r = 0; i < this.sections.length && r <= n; ) {
      let s = this.sections[i++], o = this.sections[i++], l = r + s;
      if (o >= 0 && r <= n && l >= e)
        return r < e && l > n ? "cover" : !0;
      r = l;
    }
    return !1;
  }
  toString() {
    let e = "";
    for (let n = 0; n < this.sections.length; ) {
      let i = this.sections[n++], r = this.sections[n++];
      e += (e ? " " : "") + i + (r >= 0 ? ":" + r : "");
    }
    return e;
  }
  toJSON() {
    return this.sections;
  }
  static fromJSON(e) {
    if (!Array.isArray(e) || e.length % 2 || e.some((n) => typeof n != "number"))
      throw new RangeError("Invalid JSON representation of ChangeDesc");
    return new ds(e);
  }
  static create(e) {
    return new ds(e);
  }
}
class ti extends ds {
  constructor(e, n) {
    super(e), this.inserted = n;
  }
  apply(e) {
    if (this.length != e.length)
      throw new RangeError("Applying change set to a document with the wrong length");
    return a1(this, (n, i, r, s, o) => e = e.replace(r, r + (i - n), o), !1), e;
  }
  mapDesc(e, n = !1) {
    return c1(this, e, n, !0);
  }
  invert(e) {
    let n = this.sections.slice(), i = [];
    for (let r = 0, s = 0; r < n.length; r += 2) {
      let o = n[r], l = n[r + 1];
      if (l >= 0) {
        n[r] = l, n[r + 1] = o;
        let a = r >> 1;
        for (; i.length < a; )
          i.push(zt.empty);
        i.push(o ? e.slice(s, s + o) : zt.empty);
      }
      s += o;
    }
    return new ti(n, i);
  }
  compose(e) {
    return this.empty ? e : e.empty ? this : c8(this, e, !0);
  }
  map(e, n = !1) {
    return e.empty ? this : c1(this, e, n, !0);
  }
  iterChanges(e, n = !1) {
    a1(this, e, n);
  }
  get desc() {
    return ds.create(this.sections);
  }
  filter(e) {
    let n = [], i = [], r = [], s = new uu(this);
    e:
      for (let o = 0, l = 0; ; ) {
        let a = o == e.length ? 1e9 : e[o++];
        for (; l < a || l == a && s.len == 0; ) {
          if (s.done)
            break e;
          let u = Math.min(s.len, a - l);
          Mi(r, u, -1);
          let f = s.ins == -1 ? -1 : s.off == 0 ? s.ins : 0;
          Mi(n, u, f), f > 0 && ko(i, n, s.text), s.forward(u), l += u;
        }
        let c = e[o++];
        for (; l < c; ) {
          if (s.done)
            break e;
          let u = Math.min(s.len, c - l);
          Mi(n, u, -1), Mi(r, u, s.ins == -1 ? -1 : s.off == 0 ? s.ins : 0), s.forward(u), l += u;
        }
      }
    return {
      changes: new ti(n, i),
      filtered: ds.create(r)
    };
  }
  toJSON() {
    let e = [];
    for (let n = 0; n < this.sections.length; n += 2) {
      let i = this.sections[n], r = this.sections[n + 1];
      r < 0 ? e.push(i) : r == 0 ? e.push([i]) : e.push([i].concat(this.inserted[n >> 1].toJSON()));
    }
    return e;
  }
  static of(e, n, i) {
    let r = [], s = [], o = 0, l = null;
    function a(u = !1) {
      if (!u && !r.length)
        return;
      o < n && Mi(r, n - o, -1);
      let f = new ti(r, s);
      l = l ? l.compose(f.map(l)) : f, r = [], s = [], o = 0;
    }
    function c(u) {
      if (Array.isArray(u))
        for (let f of u)
          c(f);
      else if (u instanceof ti) {
        if (u.length != n)
          throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);
        a(), l = l ? l.compose(u.map(l)) : u;
      } else {
        let { from: f, to: h = f, insert: d } = u;
        if (f > h || f < 0 || h > n)
          throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);
        let p = d ? typeof d == "string" ? zt.of(d.split(i || l1)) : d : zt.empty, g = p.length;
        if (f == h && g == 0)
          return;
        f < o && a(), f > o && Mi(r, f - o, -1), Mi(r, h - f, g), ko(s, r, p), o = h;
      }
    }
    return c(e), a(!l), l;
  }
  static empty(e) {
    return new ti(e ? [e, -1] : [], []);
  }
  static fromJSON(e) {
    if (!Array.isArray(e))
      throw new RangeError("Invalid JSON representation of ChangeSet");
    let n = [], i = [];
    for (let r = 0; r < e.length; r++) {
      let s = e[r];
      if (typeof s == "number")
        n.push(s, -1);
      else {
        if (!Array.isArray(s) || typeof s[0] != "number" || s.some((o, l) => l && typeof o != "string"))
          throw new RangeError("Invalid JSON representation of ChangeSet");
        if (s.length == 1)
          n.push(s[0], 0);
        else {
          for (; i.length < r; )
            i.push(zt.empty);
          i[r] = zt.of(s.slice(1)), n.push(s[0], i[r].length);
        }
      }
    }
    return new ti(n, i);
  }
  static createSet(e, n) {
    return new ti(e, n);
  }
}
function Mi(t, e, n, i = !1) {
  if (e == 0 && n <= 0)
    return;
  let r = t.length - 2;
  r >= 0 && n <= 0 && n == t[r + 1] ? t[r] += e : e == 0 && t[r] == 0 ? t[r + 1] += n : i ? (t[r] += e, t[r + 1] += n) : t.push(e, n);
}
function ko(t, e, n) {
  if (n.length == 0)
    return;
  let i = e.length - 2 >> 1;
  if (i < t.length)
    t[t.length - 1] = t[t.length - 1].append(n);
  else {
    for (; t.length < i; )
      t.push(zt.empty);
    t.push(n);
  }
}
function a1(t, e, n) {
  let i = t.inserted;
  for (let r = 0, s = 0, o = 0; o < t.sections.length; ) {
    let l = t.sections[o++], a = t.sections[o++];
    if (a < 0)
      r += l, s += l;
    else {
      let c = r, u = s, f = zt.empty;
      for (; c += l, u += a, a && i && (f = f.append(i[o - 2 >> 1])), !(n || o == t.sections.length || t.sections[o + 1] < 0); )
        l = t.sections[o++], a = t.sections[o++];
      e(r, c, s, u, f), r = c, s = u;
    }
  }
}
function c1(t, e, n, i = !1) {
  let r = [], s = i ? [] : null, o = new uu(t), l = new uu(e);
  for (let a = -1; ; )
    if (o.ins == -1 && l.ins == -1) {
      let c = Math.min(o.len, l.len);
      Mi(r, c, -1), o.forward(c), l.forward(c);
    } else if (l.ins >= 0 && (o.ins < 0 || a == o.i || o.off == 0 && (l.len < o.len || l.len == o.len && !n))) {
      let c = l.len;
      for (Mi(r, l.ins, -1); c; ) {
        let u = Math.min(o.len, c);
        o.ins >= 0 && a < o.i && o.len <= u && (Mi(r, 0, o.ins), s && ko(s, r, o.text), a = o.i), o.forward(u), c -= u;
      }
      l.next();
    } else if (o.ins >= 0) {
      let c = 0, u = o.len;
      for (; u; )
        if (l.ins == -1) {
          let f = Math.min(u, l.len);
          c += f, u -= f, l.forward(f);
        } else if (l.ins == 0 && l.len < u)
          u -= l.len, l.next();
        else
          break;
      Mi(r, c, a < o.i ? o.ins : 0), s && a < o.i && ko(s, r, o.text), a = o.i, o.forward(o.len - u);
    } else {
      if (o.done && l.done)
        return s ? ti.createSet(r, s) : ds.create(r);
      throw new Error("Mismatched change set lengths");
    }
}
function c8(t, e, n = !1) {
  let i = [], r = n ? [] : null, s = new uu(t), o = new uu(e);
  for (let l = !1; ; ) {
    if (s.done && o.done)
      return r ? ti.createSet(i, r) : ds.create(i);
    if (s.ins == 0)
      Mi(i, s.len, 0, l), s.next();
    else if (o.len == 0 && !o.done)
      Mi(i, 0, o.ins, l), r && ko(r, i, o.text), o.next();
    else {
      if (s.done || o.done)
        throw new Error("Mismatched change set lengths");
      {
        let a = Math.min(s.len2, o.len), c = i.length;
        if (s.ins == -1) {
          let u = o.ins == -1 ? -1 : o.off ? 0 : o.ins;
          Mi(i, a, u, l), r && u && ko(r, i, o.text);
        } else
          o.ins == -1 ? (Mi(i, s.off ? 0 : s.len, a, l), r && ko(r, i, s.textBit(a))) : (Mi(i, s.off ? 0 : s.len, o.off ? 0 : o.ins, l), r && !o.off && ko(r, i, o.text));
        l = (s.ins > a || o.ins >= 0 && o.len > a) && (l || i.length > c), s.forward2(a), o.forward(a);
      }
    }
  }
}
class uu {
  constructor(e) {
    this.set = e, this.i = 0, this.next();
  }
  next() {
    let { sections: e } = this.set;
    this.i < e.length ? (this.len = e[this.i++], this.ins = e[this.i++]) : (this.len = 0, this.ins = -2), this.off = 0;
  }
  get done() {
    return this.ins == -2;
  }
  get len2() {
    return this.ins < 0 ? this.len : this.ins;
  }
  get text() {
    let { inserted: e } = this.set, n = this.i - 2 >> 1;
    return n >= e.length ? zt.empty : e[n];
  }
  textBit(e) {
    let { inserted: n } = this.set, i = this.i - 2 >> 1;
    return i >= n.length && !e ? zt.empty : n[i].slice(this.off, e == null ? void 0 : this.off + e);
  }
  forward(e) {
    e == this.len ? this.next() : (this.len -= e, this.off += e);
  }
  forward2(e) {
    this.ins == -1 ? this.forward(e) : e == this.ins ? this.next() : (this.ins -= e, this.off += e);
  }
}
class dl {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.flags = i;
  }
  get anchor() {
    return this.flags & 16 ? this.to : this.from;
  }
  get head() {
    return this.flags & 16 ? this.from : this.to;
  }
  get empty() {
    return this.from == this.to;
  }
  get assoc() {
    return this.flags & 4 ? -1 : this.flags & 8 ? 1 : 0;
  }
  get bidiLevel() {
    let e = this.flags & 3;
    return e == 3 ? null : e;
  }
  get goalColumn() {
    let e = this.flags >> 5;
    return e == 33554431 ? void 0 : e;
  }
  map(e, n = -1) {
    let i, r;
    return this.empty ? i = r = e.mapPos(this.from, n) : (i = e.mapPos(this.from, 1), r = e.mapPos(this.to, -1)), i == this.from && r == this.to ? this : new dl(i, r, this.flags);
  }
  extend(e, n = e) {
    if (e <= this.anchor && n >= this.anchor)
      return Re.range(e, n);
    let i = Math.abs(e - this.anchor) > Math.abs(n - this.anchor) ? e : n;
    return Re.range(this.anchor, i);
  }
  eq(e) {
    return this.anchor == e.anchor && this.head == e.head;
  }
  toJSON() {
    return { anchor: this.anchor, head: this.head };
  }
  static fromJSON(e) {
    if (!e || typeof e.anchor != "number" || typeof e.head != "number")
      throw new RangeError("Invalid JSON representation for SelectionRange");
    return Re.range(e.anchor, e.head);
  }
  static create(e, n, i) {
    return new dl(e, n, i);
  }
}
class Re {
  constructor(e, n) {
    this.ranges = e, this.mainIndex = n;
  }
  map(e, n = -1) {
    return e.empty ? this : Re.create(this.ranges.map((i) => i.map(e, n)), this.mainIndex);
  }
  eq(e) {
    if (this.ranges.length != e.ranges.length || this.mainIndex != e.mainIndex)
      return !1;
    for (let n = 0; n < this.ranges.length; n++)
      if (!this.ranges[n].eq(e.ranges[n]))
        return !1;
    return !0;
  }
  get main() {
    return this.ranges[this.mainIndex];
  }
  asSingle() {
    return this.ranges.length == 1 ? this : new Re([this.main], 0);
  }
  addRange(e, n = !0) {
    return Re.create([e].concat(this.ranges), n ? 0 : this.mainIndex + 1);
  }
  replaceRange(e, n = this.mainIndex) {
    let i = this.ranges.slice();
    return i[n] = e, Re.create(i, this.mainIndex);
  }
  toJSON() {
    return { ranges: this.ranges.map((e) => e.toJSON()), main: this.mainIndex };
  }
  static fromJSON(e) {
    if (!e || !Array.isArray(e.ranges) || typeof e.main != "number" || e.main >= e.ranges.length)
      throw new RangeError("Invalid JSON representation for EditorSelection");
    return new Re(e.ranges.map((n) => dl.fromJSON(n)), e.main);
  }
  static single(e, n = e) {
    return new Re([Re.range(e, n)], 0);
  }
  static create(e, n = 0) {
    if (e.length == 0)
      throw new RangeError("A selection needs at least one range");
    for (let i = 0, r = 0; r < e.length; r++) {
      let s = e[r];
      if (s.empty ? s.from <= i : s.from < i)
        return Re.normalized(e.slice(), n);
      i = s.to;
    }
    return new Re(e, n);
  }
  static cursor(e, n = 0, i, r) {
    return dl.create(e, e, (n == 0 ? 0 : n < 0 ? 4 : 8) | (i == null ? 3 : Math.min(2, i)) | (r ?? 33554431) << 5);
  }
  static range(e, n, i) {
    let r = (i ?? 33554431) << 5;
    return n < e ? dl.create(n, e, 16 | r | 8) : dl.create(e, n, r | (n > e ? 4 : 0));
  }
  static normalized(e, n = 0) {
    let i = e[n];
    e.sort((r, s) => r.from - s.from), n = e.indexOf(i);
    for (let r = 1; r < e.length; r++) {
      let s = e[r], o = e[r - 1];
      if (s.empty ? s.from <= o.to : s.from < o.to) {
        let l = o.from, a = Math.max(s.to, o.to);
        r <= n && n--, e.splice(--r, 2, s.anchor > s.head ? Re.range(a, l) : Re.range(l, a));
      }
    }
    return new Re(e, n);
  }
}
function u8(t, e) {
  for (let n of t.ranges)
    if (n.to > e)
      throw new RangeError("Selection points outside of document");
}
let bb = 0;
class et {
  constructor(e, n, i, r, s) {
    this.combine = e, this.compareInput = n, this.compare = i, this.isStatic = r, this.id = bb++, this.default = e([]), this.extensions = typeof s == "function" ? s(this) : s;
  }
  static define(e = {}) {
    return new et(e.combine || ((n) => n), e.compareInput || ((n, i) => n === i), e.compare || (e.combine ? (n, i) => n === i : _b), !!e.static, e.enables);
  }
  of(e) {
    return new mh([], this, 0, e);
  }
  compute(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new mh(e, this, 1, n);
  }
  computeN(e, n) {
    if (this.isStatic)
      throw new Error("Can't compute a static facet");
    return new mh(e, this, 2, n);
  }
  from(e, n) {
    return n || (n = (i) => i), this.compute([e], (i) => n(i.field(e)));
  }
}
function _b(t, e) {
  return t == e || t.length == e.length && t.every((n, i) => n === e[i]);
}
class mh {
  constructor(e, n, i, r) {
    this.dependencies = e, this.facet = n, this.type = i, this.value = r, this.id = bb++;
  }
  dynamicSlot(e) {
    var n;
    let i = this.value, r = this.facet.compareInput, s = this.id, o = e[s] >> 1, l = this.type == 2, a = !1, c = !1, u = [];
    for (let f of this.dependencies)
      f == "doc" ? a = !0 : f == "selection" ? c = !0 : ((n = e[f.id]) !== null && n !== void 0 ? n : 1) & 1 || u.push(e[f.id]);
    return {
      create(f) {
        return f.values[o] = i(f), 1;
      },
      update(f, h) {
        if (a && h.docChanged || c && (h.docChanged || h.selection) || u1(f, u)) {
          let d = i(f);
          if (l ? !rk(d, f.values[o], r) : !r(d, f.values[o]))
            return f.values[o] = d, 1;
        }
        return 0;
      },
      reconfigure: (f, h) => {
        let d, p = h.config.address[s];
        if (p != null) {
          let g = rd(h, p);
          if (this.dependencies.every((m) => m instanceof et ? h.facet(m) === f.facet(m) : m instanceof oi ? h.field(m, !1) == f.field(m, !1) : !0) || (l ? rk(d = i(f), g, r) : r(d = i(f), g)))
            return f.values[o] = g, 0;
        } else
          d = i(f);
        return f.values[o] = d, 1;
      }
    };
  }
}
function rk(t, e, n) {
  if (t.length != e.length)
    return !1;
  for (let i = 0; i < t.length; i++)
    if (!n(t[i], e[i]))
      return !1;
  return !0;
}
function u1(t, e) {
  let n = !1;
  for (let i of e)
    Vc(t, i) & 1 && (n = !0);
  return n;
}
function EW(t, e, n) {
  let i = n.map((a) => t[a.id]), r = n.map((a) => a.type), s = i.filter((a) => !(a & 1)), o = t[e.id] >> 1;
  function l(a) {
    let c = [];
    for (let u = 0; u < i.length; u++) {
      let f = rd(a, i[u]);
      if (r[u] == 2)
        for (let h of f)
          c.push(h);
      else
        c.push(f);
    }
    return e.combine(c);
  }
  return {
    create(a) {
      for (let c of i)
        Vc(a, c);
      return a.values[o] = l(a), 1;
    },
    update(a, c) {
      if (!u1(a, s))
        return 0;
      let u = l(a);
      return e.compare(u, a.values[o]) ? 0 : (a.values[o] = u, 1);
    },
    reconfigure(a, c) {
      let u = u1(a, i), f = c.config.facets[e.id], h = c.facet(e);
      if (f && !u && _b(n, f))
        return a.values[o] = h, 0;
      let d = l(a);
      return e.compare(d, h) ? (a.values[o] = h, 0) : (a.values[o] = d, 1);
    }
  };
}
const sk = /* @__PURE__ */ et.define({ static: !0 });
class oi {
  constructor(e, n, i, r, s) {
    this.id = e, this.createF = n, this.updateF = i, this.compareF = r, this.spec = s, this.provides = void 0;
  }
  static define(e) {
    let n = new oi(bb++, e.create, e.update, e.compare || ((i, r) => i === r), e);
    return e.provide && (n.provides = e.provide(n)), n;
  }
  create(e) {
    let n = e.facet(sk).find((i) => i.field == this);
    return ((n == null ? void 0 : n.create) || this.createF)(e);
  }
  slot(e) {
    let n = e[this.id] >> 1;
    return {
      create: (i) => (i.values[n] = this.create(i), 1),
      update: (i, r) => {
        let s = i.values[n], o = this.updateF(s, r);
        return this.compareF(s, o) ? 0 : (i.values[n] = o, 1);
      },
      reconfigure: (i, r) => r.config.address[this.id] != null ? (i.values[n] = r.field(this), 0) : (i.values[n] = this.create(i), 1)
    };
  }
  init(e) {
    return [this, sk.of({ field: this, create: e })];
  }
  get extension() {
    return this;
  }
}
const ul = { lowest: 4, low: 3, default: 2, high: 1, highest: 0 };
function mc(t) {
  return (e) => new f8(e, t);
}
const ac = {
  highest: /* @__PURE__ */ mc(ul.highest),
  high: /* @__PURE__ */ mc(ul.high),
  default: /* @__PURE__ */ mc(ul.default),
  low: /* @__PURE__ */ mc(ul.low),
  lowest: /* @__PURE__ */ mc(ul.lowest)
};
class f8 {
  constructor(e, n) {
    this.inner = e, this.prec = n;
  }
}
class Vs {
  of(e) {
    return new f1(this, e);
  }
  reconfigure(e) {
    return Vs.reconfigure.of({ compartment: this, extension: e });
  }
  get(e) {
    return e.config.compartments.get(this);
  }
}
class f1 {
  constructor(e, n) {
    this.compartment = e, this.inner = n;
  }
}
class id {
  constructor(e, n, i, r, s, o) {
    for (this.base = e, this.compartments = n, this.dynamicSlots = i, this.address = r, this.staticValues = s, this.facets = o, this.statusTemplate = []; this.statusTemplate.length < i.length; )
      this.statusTemplate.push(0);
  }
  staticFacet(e) {
    let n = this.address[e.id];
    return n == null ? e.default : this.staticValues[n >> 1];
  }
  static resolve(e, n, i) {
    let r = [], s = /* @__PURE__ */ Object.create(null), o = /* @__PURE__ */ new Map();
    for (let h of AW(e, n, o))
      h instanceof oi ? r.push(h) : (s[h.facet.id] || (s[h.facet.id] = [])).push(h);
    let l = /* @__PURE__ */ Object.create(null), a = [], c = [];
    for (let h of r)
      l[h.id] = c.length << 1, c.push((d) => h.slot(d));
    let u = i == null ? void 0 : i.config.facets;
    for (let h in s) {
      let d = s[h], p = d[0].facet, g = u && u[h] || [];
      if (d.every((m) => m.type == 0))
        if (l[p.id] = a.length << 1 | 1, _b(g, d))
          a.push(i.facet(p));
        else {
          let m = p.combine(d.map((_) => _.value));
          a.push(i && p.compare(m, i.facet(p)) ? i.facet(p) : m);
        }
      else {
        for (let m of d)
          m.type == 0 ? (l[m.id] = a.length << 1 | 1, a.push(m.value)) : (l[m.id] = c.length << 1, c.push((_) => m.dynamicSlot(_)));
        l[p.id] = c.length << 1, c.push((m) => EW(m, p, d));
      }
    }
    let f = c.map((h) => h(l));
    return new id(e, o, f, l, a, s);
  }
}
function AW(t, e, n) {
  let i = [[], [], [], [], []], r = /* @__PURE__ */ new Map();
  function s(o, l) {
    let a = r.get(o);
    if (a != null) {
      if (a <= l)
        return;
      let c = i[a].indexOf(o);
      c > -1 && i[a].splice(c, 1), o instanceof f1 && n.delete(o.compartment);
    }
    if (r.set(o, l), Array.isArray(o))
      for (let c of o)
        s(c, l);
    else if (o instanceof f1) {
      if (n.has(o.compartment))
        throw new RangeError("Duplicate use of compartment in extensions");
      let c = e.get(o.compartment) || o.inner;
      n.set(o.compartment, c), s(c, l);
    } else if (o instanceof f8)
      s(o.inner, o.prec);
    else if (o instanceof oi)
      i[l].push(o), o.provides && s(o.provides, l);
    else if (o instanceof mh)
      i[l].push(o), o.facet.extensions && s(o.facet.extensions, ul.default);
    else {
      let c = o.extension;
      if (!c)
        throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);
      s(c, l);
    }
  }
  return s(t, ul.default), i.reduce((o, l) => o.concat(l));
}
function Vc(t, e) {
  if (e & 1)
    return 2;
  let n = e >> 1, i = t.status[n];
  if (i == 4)
    throw new Error("Cyclic dependency between fields and/or facets");
  if (i & 2)
    return i;
  t.status[n] = 4;
  let r = t.computeSlot(t, t.config.dynamicSlots[n]);
  return t.status[n] = 2 | r;
}
function rd(t, e) {
  return e & 1 ? t.config.staticValues[e >> 1] : t.values[e >> 1];
}
const h8 = /* @__PURE__ */ et.define(), d8 = /* @__PURE__ */ et.define({
  combine: (t) => t.some((e) => e),
  static: !0
}), p8 = /* @__PURE__ */ et.define({
  combine: (t) => t.length ? t[0] : void 0,
  static: !0
}), g8 = /* @__PURE__ */ et.define(), m8 = /* @__PURE__ */ et.define(), b8 = /* @__PURE__ */ et.define(), _8 = /* @__PURE__ */ et.define({
  combine: (t) => t.length ? t[0] : !1
});
class Qo {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  static define() {
    return new MW();
  }
}
class MW {
  of(e) {
    return new Qo(this, e);
  }
}
class OW {
  constructor(e) {
    this.map = e;
  }
  of(e) {
    return new kt(this, e);
  }
}
class kt {
  constructor(e, n) {
    this.type = e, this.value = n;
  }
  map(e) {
    let n = this.type.map(this.value, e);
    return n === void 0 ? void 0 : n == this.value ? this : new kt(this.type, n);
  }
  is(e) {
    return this.type == e;
  }
  static define(e = {}) {
    return new OW(e.map || ((n) => n));
  }
  static mapEffects(e, n) {
    if (!e.length)
      return e;
    let i = [];
    for (let r of e) {
      let s = r.map(n);
      s && i.push(s);
    }
    return i;
  }
}
kt.reconfigure = /* @__PURE__ */ kt.define();
kt.appendConfig = /* @__PURE__ */ kt.define();
let di = class {
  constructor(e, n, i, r, s, o) {
    this.startState = e, this.changes = n, this.selection = i, this.effects = r, this.annotations = s, this.scrollIntoView = o, this._doc = null, this._state = null, i && u8(i, n.newLength), s.some((l) => l.type == di.time) || (this.annotations = s.concat(di.time.of(Date.now())));
  }
  static create(e, n, i, r, s, o) {
    return new di(e, n, i, r, s, o);
  }
  get newDoc() {
    return this._doc || (this._doc = this.changes.apply(this.startState.doc));
  }
  get newSelection() {
    return this.selection || this.startState.selection.map(this.changes);
  }
  get state() {
    return this._state || this.startState.applyTransaction(this), this._state;
  }
  annotation(e) {
    for (let n of this.annotations)
      if (n.type == e)
        return n.value;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get reconfigured() {
    return this.startState.config != this.state.config;
  }
  isUserEvent(e) {
    let n = this.annotation(di.userEvent);
    return !!(n && (n == e || n.length > e.length && n.slice(0, e.length) == e && n[e.length] == "."));
  }
};
di.time = /* @__PURE__ */ Qo.define();
di.userEvent = /* @__PURE__ */ Qo.define();
di.addToHistory = /* @__PURE__ */ Qo.define();
di.remote = /* @__PURE__ */ Qo.define();
function TW(t, e) {
  let n = [];
  for (let i = 0, r = 0; ; ) {
    let s, o;
    if (i < t.length && (r == e.length || e[r] >= t[i]))
      s = t[i++], o = t[i++];
    else if (r < e.length)
      s = e[r++], o = e[r++];
    else
      return n;
    !n.length || n[n.length - 1] < s ? n.push(s, o) : n[n.length - 1] < o && (n[n.length - 1] = o);
  }
}
function y8(t, e, n) {
  var i;
  let r, s, o;
  return n ? (r = e.changes, s = ti.empty(e.changes.length), o = t.changes.compose(e.changes)) : (r = e.changes.map(t.changes), s = t.changes.mapDesc(e.changes, !0), o = t.changes.compose(r)), {
    changes: o,
    selection: e.selection ? e.selection.map(s) : (i = t.selection) === null || i === void 0 ? void 0 : i.map(r),
    effects: kt.mapEffects(t.effects, r).concat(kt.mapEffects(e.effects, s)),
    annotations: t.annotations.length ? t.annotations.concat(e.annotations) : e.annotations,
    scrollIntoView: t.scrollIntoView || e.scrollIntoView
  };
}
function h1(t, e, n) {
  let i = e.selection, r = ba(e.annotations);
  return e.userEvent && (r = r.concat(di.userEvent.of(e.userEvent))), {
    changes: e.changes instanceof ti ? e.changes : ti.of(e.changes || [], n, t.facet(p8)),
    selection: i && (i instanceof Re ? i : Re.single(i.anchor, i.head)),
    effects: ba(e.effects),
    annotations: r,
    scrollIntoView: !!e.scrollIntoView
  };
}
function w8(t, e, n) {
  let i = h1(t, e.length ? e[0] : {}, t.doc.length);
  e.length && e[0].filter === !1 && (n = !1);
  for (let s = 1; s < e.length; s++) {
    e[s].filter === !1 && (n = !1);
    let o = !!e[s].sequential;
    i = y8(i, h1(t, e[s], o ? i.changes.newLength : t.doc.length), o);
  }
  let r = di.create(t, i.changes, i.selection, i.effects, i.annotations, i.scrollIntoView);
  return PW(n ? RW(r) : r);
}
function RW(t) {
  let e = t.startState, n = !0;
  for (let r of e.facet(g8)) {
    let s = r(t);
    if (s === !1) {
      n = !1;
      break;
    }
    Array.isArray(s) && (n = n === !0 ? s : TW(n, s));
  }
  if (n !== !0) {
    let r, s;
    if (n === !1)
      s = t.changes.invertedDesc, r = ti.empty(e.doc.length);
    else {
      let o = t.changes.filter(n);
      r = o.changes, s = o.filtered.mapDesc(o.changes).invertedDesc;
    }
    t = di.create(e, r, t.selection && t.selection.map(s), kt.mapEffects(t.effects, s), t.annotations, t.scrollIntoView);
  }
  let i = e.facet(m8);
  for (let r = i.length - 1; r >= 0; r--) {
    let s = i[r](t);
    s instanceof di ? t = s : Array.isArray(s) && s.length == 1 && s[0] instanceof di ? t = s[0] : t = w8(e, ba(s), !1);
  }
  return t;
}
function PW(t) {
  let e = t.startState, n = e.facet(b8), i = t;
  for (let r = n.length - 1; r >= 0; r--) {
    let s = n[r](t);
    s && Object.keys(s).length && (i = y8(i, h1(e, s, t.changes.newLength), !0));
  }
  return i == t ? t : di.create(e, t.changes, t.selection, i.effects, i.annotations, i.scrollIntoView);
}
const IW = [];
function ba(t) {
  return t == null ? IW : Array.isArray(t) ? t : [t];
}
var bn = /* @__PURE__ */ function(t) {
  return t[t.Word = 0] = "Word", t[t.Space = 1] = "Space", t[t.Other = 2] = "Other", t;
}(bn || (bn = {}));
const DW = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;
let d1;
try {
  d1 = /* @__PURE__ */ new RegExp("[\\p{Alphabetic}\\p{Number}_]", "u");
} catch {
}
function NW(t) {
  if (d1)
    return d1.test(t);
  for (let e = 0; e < t.length; e++) {
    let n = t[e];
    if (/\w/.test(n) || n > "Â€" && (n.toUpperCase() != n.toLowerCase() || DW.test(n)))
      return !0;
  }
  return !1;
}
function LW(t) {
  return (e) => {
    if (!/\S/.test(e))
      return bn.Space;
    if (NW(e))
      return bn.Word;
    for (let n = 0; n < t.length; n++)
      if (e.indexOf(t[n]) > -1)
        return bn.Word;
    return bn.Other;
  };
}
class Mt {
  constructor(e, n, i, r, s, o) {
    this.config = e, this.doc = n, this.selection = i, this.values = r, this.status = e.statusTemplate.slice(), this.computeSlot = s, o && (o._state = this);
    for (let l = 0; l < this.config.dynamicSlots.length; l++)
      Vc(this, l << 1);
    this.computeSlot = null;
  }
  field(e, n = !0) {
    let i = this.config.address[e.id];
    if (i == null) {
      if (n)
        throw new RangeError("Field is not present in this state");
      return;
    }
    return Vc(this, i), rd(this, i);
  }
  update(...e) {
    return w8(this, e, !0);
  }
  applyTransaction(e) {
    let n = this.config, { base: i, compartments: r } = n;
    for (let o of e.effects)
      o.is(Vs.reconfigure) ? (n && (r = /* @__PURE__ */ new Map(), n.compartments.forEach((l, a) => r.set(a, l)), n = null), r.set(o.value.compartment, o.value.extension)) : o.is(kt.reconfigure) ? (n = null, i = o.value) : o.is(kt.appendConfig) && (n = null, i = ba(i).concat(o.value));
    let s;
    n ? s = e.startState.values.slice() : (n = id.resolve(i, r, this), s = new Mt(n, this.doc, this.selection, n.dynamicSlots.map(() => null), (l, a) => a.reconfigure(l, this), null).values), new Mt(n, e.newDoc, e.newSelection, s, (o, l) => l.update(o, e), e);
  }
  replaceSelection(e) {
    return typeof e == "string" && (e = this.toText(e)), this.changeByRange((n) => ({
      changes: { from: n.from, to: n.to, insert: e },
      range: Re.cursor(n.from + e.length)
    }));
  }
  changeByRange(e) {
    let n = this.selection, i = e(n.ranges[0]), r = this.changes(i.changes), s = [i.range], o = ba(i.effects);
    for (let l = 1; l < n.ranges.length; l++) {
      let a = e(n.ranges[l]), c = this.changes(a.changes), u = c.map(r);
      for (let h = 0; h < l; h++)
        s[h] = s[h].map(u);
      let f = r.mapDesc(c, !0);
      s.push(a.range.map(f)), r = r.compose(u), o = kt.mapEffects(o, u).concat(kt.mapEffects(ba(a.effects), f));
    }
    return {
      changes: r,
      selection: Re.create(s, n.mainIndex),
      effects: o
    };
  }
  changes(e = []) {
    return e instanceof ti ? e : ti.of(e, this.doc.length, this.facet(Mt.lineSeparator));
  }
  toText(e) {
    return zt.of(e.split(this.facet(Mt.lineSeparator) || l1));
  }
  sliceDoc(e = 0, n = this.doc.length) {
    return this.doc.sliceString(e, n, this.lineBreak);
  }
  facet(e) {
    let n = this.config.address[e.id];
    return n == null ? e.default : (Vc(this, n), rd(this, n));
  }
  toJSON(e) {
    let n = {
      doc: this.sliceDoc(),
      selection: this.selection.toJSON()
    };
    if (e)
      for (let i in e) {
        let r = e[i];
        r instanceof oi && this.config.address[r.id] != null && (n[i] = r.spec.toJSON(this.field(e[i]), this));
      }
    return n;
  }
  static fromJSON(e, n = {}, i) {
    if (!e || typeof e.doc != "string")
      throw new RangeError("Invalid JSON representation for EditorState");
    let r = [];
    if (i) {
      for (let s in i)
        if (Object.prototype.hasOwnProperty.call(e, s)) {
          let o = i[s], l = e[s];
          r.push(o.init((a) => o.spec.fromJSON(l, a)));
        }
    }
    return Mt.create({
      doc: e.doc,
      selection: Re.fromJSON(e.selection),
      extensions: n.extensions ? r.concat([n.extensions]) : r
    });
  }
  static create(e = {}) {
    let n = id.resolve(e.extensions || [], /* @__PURE__ */ new Map()), i = e.doc instanceof zt ? e.doc : zt.of((e.doc || "").split(n.staticFacet(Mt.lineSeparator) || l1)), r = e.selection ? e.selection instanceof Re ? e.selection : Re.single(e.selection.anchor, e.selection.head) : Re.single(0);
    return u8(r, i.length), n.staticFacet(d8) || (r = r.asSingle()), new Mt(n, i, r, n.dynamicSlots.map(() => null), (s, o) => o.create(s), null);
  }
  get tabSize() {
    return this.facet(Mt.tabSize);
  }
  get lineBreak() {
    return this.facet(Mt.lineSeparator) || `
`;
  }
  get readOnly() {
    return this.facet(_8);
  }
  phrase(e, ...n) {
    for (let i of this.facet(Mt.phrases))
      if (Object.prototype.hasOwnProperty.call(i, e)) {
        e = i[e];
        break;
      }
    return n.length && (e = e.replace(/\$(\$|\d*)/g, (i, r) => {
      if (r == "$")
        return "$";
      let s = +(r || 1);
      return !s || s > n.length ? i : n[s - 1];
    })), e;
  }
  languageDataAt(e, n, i = -1) {
    let r = [];
    for (let s of this.facet(h8))
      for (let o of s(this, n, i))
        Object.prototype.hasOwnProperty.call(o, e) && r.push(o[e]);
    return r;
  }
  charCategorizer(e) {
    return LW(this.languageDataAt("wordChars", e).join(""));
  }
  wordAt(e) {
    let { text: n, from: i, length: r } = this.doc.lineAt(e), s = this.charCategorizer(e), o = e - i, l = e - i;
    for (; o > 0; ) {
      let a = Li(n, o, !1);
      if (s(n.slice(a, o)) != bn.Word)
        break;
      o = a;
    }
    for (; l < r; ) {
      let a = Li(n, l);
      if (s(n.slice(l, a)) != bn.Word)
        break;
      l = a;
    }
    return o == l ? null : Re.range(o + i, l + i);
  }
}
Mt.allowMultipleSelections = d8;
Mt.tabSize = /* @__PURE__ */ et.define({
  combine: (t) => t.length ? t[0] : 4
});
Mt.lineSeparator = p8;
Mt.readOnly = _8;
Mt.phrases = /* @__PURE__ */ et.define({
  compare(t, e) {
    let n = Object.keys(t), i = Object.keys(e);
    return n.length == i.length && n.every((r) => t[r] == e[r]);
  }
});
Mt.languageData = h8;
Mt.changeFilter = g8;
Mt.transactionFilter = m8;
Mt.transactionExtender = b8;
Vs.reconfigure = /* @__PURE__ */ kt.define();
function qr(t, e, n = {}) {
  let i = {};
  for (let r of t)
    for (let s of Object.keys(r)) {
      let o = r[s], l = i[s];
      if (l === void 0)
        i[s] = o;
      else if (!(l === o || o === void 0))
        if (Object.hasOwnProperty.call(n, s))
          i[s] = n[s](l, o);
        else
          throw new Error("Config merge conflict for field " + s);
    }
  for (let r in e)
    i[r] === void 0 && (i[r] = e[r]);
  return i;
}
class Pl {
  eq(e) {
    return this == e;
  }
  range(e, n = e) {
    return sd.create(e, n, this);
  }
}
Pl.prototype.startSide = Pl.prototype.endSide = 0;
Pl.prototype.point = !1;
Pl.prototype.mapMode = Di.TrackDel;
let sd = class {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.value = i;
  }
  static create(e, n, i) {
    return new sd(e, n, i);
  }
};
function p1(t, e) {
  return t.from - e.from || t.value.startSide - e.value.startSide;
}
class yb {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.value = i, this.maxPoint = r;
  }
  get length() {
    return this.to[this.to.length - 1];
  }
  findIndex(e, n, i, r = 0) {
    let s = i ? this.to : this.from;
    for (let o = r, l = s.length; ; ) {
      if (o == l)
        return o;
      let a = o + l >> 1, c = s[a] - e || (i ? this.value[a].endSide : this.value[a].startSide) - n;
      if (a == o)
        return c >= 0 ? o : l;
      c >= 0 ? l = a : o = a + 1;
    }
  }
  between(e, n, i, r) {
    for (let s = this.findIndex(n, -1e9, !0), o = this.findIndex(i, 1e9, !1, s); s < o; s++)
      if (r(this.from[s] + e, this.to[s] + e, this.value[s]) === !1)
        return !1;
  }
  map(e, n) {
    let i = [], r = [], s = [], o = -1, l = -1;
    for (let a = 0; a < this.value.length; a++) {
      let c = this.value[a], u = this.from[a] + e, f = this.to[a] + e, h, d;
      if (u == f) {
        let p = n.mapPos(u, c.startSide, c.mapMode);
        if (p == null || (h = d = p, c.startSide != c.endSide && (d = n.mapPos(u, c.endSide), d < h)))
          continue;
      } else if (h = n.mapPos(u, c.startSide), d = n.mapPos(f, c.endSide), h > d || h == d && c.startSide > 0 && c.endSide <= 0)
        continue;
      (d - h || c.endSide - c.startSide) < 0 || (o < 0 && (o = h), c.point && (l = Math.max(l, d - h)), i.push(c), r.push(h - o), s.push(d - o));
    }
    return { mapped: i.length ? new yb(r, s, i, l) : null, pos: o };
  }
}
class Vt {
  constructor(e, n, i, r) {
    this.chunkPos = e, this.chunk = n, this.nextLayer = i, this.maxPoint = r;
  }
  static create(e, n, i, r) {
    return new Vt(e, n, i, r);
  }
  get length() {
    let e = this.chunk.length - 1;
    return e < 0 ? 0 : Math.max(this.chunkEnd(e), this.nextLayer.length);
  }
  get size() {
    if (this.isEmpty)
      return 0;
    let e = this.nextLayer.size;
    for (let n of this.chunk)
      e += n.value.length;
    return e;
  }
  chunkEnd(e) {
    return this.chunkPos[e] + this.chunk[e].length;
  }
  update(e) {
    let { add: n = [], sort: i = !1, filterFrom: r = 0, filterTo: s = this.length } = e, o = e.filter;
    if (n.length == 0 && !o)
      return this;
    if (i && (n = n.slice().sort(p1)), this.isEmpty)
      return n.length ? Vt.of(n) : this;
    let l = new v8(this, null, -1).goto(0), a = 0, c = [], u = new Fo();
    for (; l.value || a < n.length; )
      if (a < n.length && (l.from - n[a].from || l.startSide - n[a].value.startSide) >= 0) {
        let f = n[a++];
        u.addInner(f.from, f.to, f.value) || c.push(f);
      } else
        l.rangeIndex == 1 && l.chunkIndex < this.chunk.length && (a == n.length || this.chunkEnd(l.chunkIndex) < n[a].from) && (!o || r > this.chunkEnd(l.chunkIndex) || s < this.chunkPos[l.chunkIndex]) && u.addChunk(this.chunkPos[l.chunkIndex], this.chunk[l.chunkIndex]) ? l.nextChunk() : ((!o || r > l.to || s < l.from || o(l.from, l.to, l.value)) && (u.addInner(l.from, l.to, l.value) || c.push(sd.create(l.from, l.to, l.value))), l.next());
    return u.finishInner(this.nextLayer.isEmpty && !c.length ? Vt.empty : this.nextLayer.update({ add: c, filter: o, filterFrom: r, filterTo: s }));
  }
  map(e) {
    if (e.empty || this.isEmpty)
      return this;
    let n = [], i = [], r = -1;
    for (let o = 0; o < this.chunk.length; o++) {
      let l = this.chunkPos[o], a = this.chunk[o], c = e.touchesRange(l, l + a.length);
      if (c === !1)
        r = Math.max(r, a.maxPoint), n.push(a), i.push(e.mapPos(l));
      else if (c === !0) {
        let { mapped: u, pos: f } = a.map(l, e);
        u && (r = Math.max(r, u.maxPoint), n.push(u), i.push(f));
      }
    }
    let s = this.nextLayer.map(e);
    return n.length == 0 ? s : new Vt(i, n, s || Vt.empty, r);
  }
  between(e, n, i) {
    if (!this.isEmpty) {
      for (let r = 0; r < this.chunk.length; r++) {
        let s = this.chunkPos[r], o = this.chunk[r];
        if (n >= s && e <= s + o.length && o.between(s, e - s, n - s, i) === !1)
          return;
      }
      this.nextLayer.between(e, n, i);
    }
  }
  iter(e = 0) {
    return fu.from([this]).goto(e);
  }
  get isEmpty() {
    return this.nextLayer == this;
  }
  static iter(e, n = 0) {
    return fu.from(e).goto(n);
  }
  static compare(e, n, i, r, s = -1) {
    let o = e.filter((f) => f.maxPoint > 0 || !f.isEmpty && f.maxPoint >= s), l = n.filter((f) => f.maxPoint > 0 || !f.isEmpty && f.maxPoint >= s), a = ok(o, l, i), c = new bc(o, a, s), u = new bc(l, a, s);
    i.iterGaps((f, h, d) => lk(c, f, u, h, d, r)), i.empty && i.length == 0 && lk(c, 0, u, 0, 0, r);
  }
  static eq(e, n, i = 0, r) {
    r == null && (r = 1e9 - 1);
    let s = e.filter((u) => !u.isEmpty && n.indexOf(u) < 0), o = n.filter((u) => !u.isEmpty && e.indexOf(u) < 0);
    if (s.length != o.length)
      return !1;
    if (!s.length)
      return !0;
    let l = ok(s, o), a = new bc(s, l, 0).goto(i), c = new bc(o, l, 0).goto(i);
    for (; ; ) {
      if (a.to != c.to || !g1(a.active, c.active) || a.point && (!c.point || !a.point.eq(c.point)))
        return !1;
      if (a.to > r)
        return !0;
      a.next(), c.next();
    }
  }
  static spans(e, n, i, r, s = -1) {
    let o = new bc(e, null, s).goto(n), l = n, a = o.openStart;
    for (; ; ) {
      let c = Math.min(o.to, i);
      if (o.point) {
        let u = o.activeForPoint(o.to), f = o.pointFrom < n ? u.length + 1 : Math.min(u.length, a);
        r.point(l, c, o.point, u, f, o.pointRank), a = Math.min(o.openEnd(c), u.length);
      } else
        c > l && (r.span(l, c, o.active, a), a = o.openEnd(c));
      if (o.to > i)
        return a + (o.point && o.to > i ? 1 : 0);
      l = o.to, o.next();
    }
  }
  static of(e, n = !1) {
    let i = new Fo();
    for (let r of e instanceof sd ? [e] : n ? jW(e) : e)
      i.add(r.from, r.to, r.value);
    return i.finish();
  }
}
Vt.empty = /* @__PURE__ */ new Vt([], [], null, -1);
function jW(t) {
  if (t.length > 1)
    for (let e = t[0], n = 1; n < t.length; n++) {
      let i = t[n];
      if (p1(e, i) > 0)
        return t.slice().sort(p1);
      e = i;
    }
  return t;
}
Vt.empty.nextLayer = Vt.empty;
class Fo {
  constructor() {
    this.chunks = [], this.chunkPos = [], this.chunkStart = -1, this.last = null, this.lastFrom = -1e9, this.lastTo = -1e9, this.from = [], this.to = [], this.value = [], this.maxPoint = -1, this.setMaxPoint = -1, this.nextLayer = null;
  }
  finishChunk(e) {
    this.chunks.push(new yb(this.from, this.to, this.value, this.maxPoint)), this.chunkPos.push(this.chunkStart), this.chunkStart = -1, this.setMaxPoint = Math.max(this.setMaxPoint, this.maxPoint), this.maxPoint = -1, e && (this.from = [], this.to = [], this.value = []);
  }
  add(e, n, i) {
    this.addInner(e, n, i) || (this.nextLayer || (this.nextLayer = new Fo())).add(e, n, i);
  }
  addInner(e, n, i) {
    let r = e - this.lastTo || i.startSide - this.last.endSide;
    if (r <= 0 && (e - this.lastFrom || i.startSide - this.last.startSide) < 0)
      throw new Error("Ranges must be added sorted by `from` position and `startSide`");
    return r < 0 ? !1 : (this.from.length == 250 && this.finishChunk(!0), this.chunkStart < 0 && (this.chunkStart = e), this.from.push(e - this.chunkStart), this.to.push(n - this.chunkStart), this.last = i, this.lastFrom = e, this.lastTo = n, this.value.push(i), i.point && (this.maxPoint = Math.max(this.maxPoint, n - e)), !0);
  }
  addChunk(e, n) {
    if ((e - this.lastTo || n.value[0].startSide - this.last.endSide) < 0)
      return !1;
    this.from.length && this.finishChunk(!0), this.setMaxPoint = Math.max(this.setMaxPoint, n.maxPoint), this.chunks.push(n), this.chunkPos.push(e);
    let i = n.value.length - 1;
    return this.last = n.value[i], this.lastFrom = n.from[i] + e, this.lastTo = n.to[i] + e, !0;
  }
  finish() {
    return this.finishInner(Vt.empty);
  }
  finishInner(e) {
    if (this.from.length && this.finishChunk(!1), this.chunks.length == 0)
      return e;
    let n = Vt.create(this.chunkPos, this.chunks, this.nextLayer ? this.nextLayer.finishInner(e) : e, this.setMaxPoint);
    return this.from = null, n;
  }
}
function ok(t, e, n) {
  let i = /* @__PURE__ */ new Map();
  for (let s of t)
    for (let o = 0; o < s.chunk.length; o++)
      s.chunk[o].maxPoint <= 0 && i.set(s.chunk[o], s.chunkPos[o]);
  let r = /* @__PURE__ */ new Set();
  for (let s of e)
    for (let o = 0; o < s.chunk.length; o++) {
      let l = i.get(s.chunk[o]);
      l != null && (n ? n.mapPos(l) : l) == s.chunkPos[o] && !(n != null && n.touchesRange(l, l + s.chunk[o].length)) && r.add(s.chunk[o]);
    }
  return r;
}
class v8 {
  constructor(e, n, i, r = 0) {
    this.layer = e, this.skip = n, this.minPoint = i, this.rank = r;
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  get endSide() {
    return this.value ? this.value.endSide : 0;
  }
  goto(e, n = -1e9) {
    return this.chunkIndex = this.rangeIndex = 0, this.gotoInner(e, n, !1), this;
  }
  gotoInner(e, n, i) {
    for (; this.chunkIndex < this.layer.chunk.length; ) {
      let r = this.layer.chunk[this.chunkIndex];
      if (!(this.skip && this.skip.has(r) || this.layer.chunkEnd(this.chunkIndex) < e || r.maxPoint < this.minPoint))
        break;
      this.chunkIndex++, i = !1;
    }
    if (this.chunkIndex < this.layer.chunk.length) {
      let r = this.layer.chunk[this.chunkIndex].findIndex(e - this.layer.chunkPos[this.chunkIndex], n, !0);
      (!i || this.rangeIndex < r) && this.setRangeIndex(r);
    }
    this.next();
  }
  forward(e, n) {
    (this.to - e || this.endSide - n) < 0 && this.gotoInner(e, n, !0);
  }
  next() {
    for (; ; )
      if (this.chunkIndex == this.layer.chunk.length) {
        this.from = this.to = 1e9, this.value = null;
        break;
      } else {
        let e = this.layer.chunkPos[this.chunkIndex], n = this.layer.chunk[this.chunkIndex], i = e + n.from[this.rangeIndex];
        if (this.from = i, this.to = e + n.to[this.rangeIndex], this.value = n.value[this.rangeIndex], this.setRangeIndex(this.rangeIndex + 1), this.minPoint < 0 || this.value.point && this.to - this.from >= this.minPoint)
          break;
      }
  }
  setRangeIndex(e) {
    if (e == this.layer.chunk[this.chunkIndex].value.length) {
      if (this.chunkIndex++, this.skip)
        for (; this.chunkIndex < this.layer.chunk.length && this.skip.has(this.layer.chunk[this.chunkIndex]); )
          this.chunkIndex++;
      this.rangeIndex = 0;
    } else
      this.rangeIndex = e;
  }
  nextChunk() {
    this.chunkIndex++, this.rangeIndex = 0, this.next();
  }
  compare(e) {
    return this.from - e.from || this.startSide - e.startSide || this.rank - e.rank || this.to - e.to || this.endSide - e.endSide;
  }
}
class fu {
  constructor(e) {
    this.heap = e;
  }
  static from(e, n = null, i = -1) {
    let r = [];
    for (let s = 0; s < e.length; s++)
      for (let o = e[s]; !o.isEmpty; o = o.nextLayer)
        o.maxPoint >= i && r.push(new v8(o, n, i, s));
    return r.length == 1 ? r[0] : new fu(r);
  }
  get startSide() {
    return this.value ? this.value.startSide : 0;
  }
  goto(e, n = -1e9) {
    for (let i of this.heap)
      i.goto(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      Fg(this.heap, i);
    return this.next(), this;
  }
  forward(e, n) {
    for (let i of this.heap)
      i.forward(e, n);
    for (let i = this.heap.length >> 1; i >= 0; i--)
      Fg(this.heap, i);
    (this.to - e || this.value.endSide - n) < 0 && this.next();
  }
  next() {
    if (this.heap.length == 0)
      this.from = this.to = 1e9, this.value = null, this.rank = -1;
    else {
      let e = this.heap[0];
      this.from = e.from, this.to = e.to, this.value = e.value, this.rank = e.rank, e.value && e.next(), Fg(this.heap, 0);
    }
  }
}
function Fg(t, e) {
  for (let n = t[e]; ; ) {
    let i = (e << 1) + 1;
    if (i >= t.length)
      break;
    let r = t[i];
    if (i + 1 < t.length && r.compare(t[i + 1]) >= 0 && (r = t[i + 1], i++), n.compare(r) < 0)
      break;
    t[i] = n, t[e] = r, e = i;
  }
}
class bc {
  constructor(e, n, i) {
    this.minPoint = i, this.active = [], this.activeTo = [], this.activeRank = [], this.minActive = -1, this.point = null, this.pointFrom = 0, this.pointRank = 0, this.to = -1e9, this.endSide = 0, this.openStart = -1, this.cursor = fu.from(e, n, i);
  }
  goto(e, n = -1e9) {
    return this.cursor.goto(e, n), this.active.length = this.activeTo.length = this.activeRank.length = 0, this.minActive = -1, this.to = e, this.endSide = n, this.openStart = -1, this.next(), this;
  }
  forward(e, n) {
    for (; this.minActive > -1 && (this.activeTo[this.minActive] - e || this.active[this.minActive].endSide - n) < 0; )
      this.removeActive(this.minActive);
    this.cursor.forward(e, n);
  }
  removeActive(e) {
    Tf(this.active, e), Tf(this.activeTo, e), Tf(this.activeRank, e), this.minActive = ak(this.active, this.activeTo);
  }
  addActive(e) {
    let n = 0, { value: i, to: r, rank: s } = this.cursor;
    for (; n < this.activeRank.length && this.activeRank[n] <= s; )
      n++;
    Rf(this.active, n, i), Rf(this.activeTo, n, r), Rf(this.activeRank, n, s), e && Rf(e, n, this.cursor.from), this.minActive = ak(this.active, this.activeTo);
  }
  next() {
    let e = this.to, n = this.point;
    this.point = null;
    let i = this.openStart < 0 ? [] : null;
    for (; ; ) {
      let r = this.minActive;
      if (r > -1 && (this.activeTo[r] - this.cursor.from || this.active[r].endSide - this.cursor.startSide) < 0) {
        if (this.activeTo[r] > e) {
          this.to = this.activeTo[r], this.endSide = this.active[r].endSide;
          break;
        }
        this.removeActive(r), i && Tf(i, r);
      } else if (this.cursor.value)
        if (this.cursor.from > e) {
          this.to = this.cursor.from, this.endSide = this.cursor.startSide;
          break;
        } else {
          let s = this.cursor.value;
          if (!s.point)
            this.addActive(i), this.cursor.next();
          else if (n && this.cursor.to == this.to && this.cursor.from < this.cursor.to)
            this.cursor.next();
          else {
            this.point = s, this.pointFrom = this.cursor.from, this.pointRank = this.cursor.rank, this.to = this.cursor.to, this.endSide = s.endSide, this.cursor.next(), this.forward(this.to, this.endSide);
            break;
          }
        }
      else {
        this.to = this.endSide = 1e9;
        break;
      }
    }
    if (i) {
      this.openStart = 0;
      for (let r = i.length - 1; r >= 0 && i[r] < e; r--)
        this.openStart++;
    }
  }
  activeForPoint(e) {
    if (!this.active.length)
      return this.active;
    let n = [];
    for (let i = this.active.length - 1; i >= 0 && !(this.activeRank[i] < this.pointRank); i--)
      (this.activeTo[i] > e || this.activeTo[i] == e && this.active[i].endSide >= this.point.endSide) && n.push(this.active[i]);
    return n.reverse();
  }
  openEnd(e) {
    let n = 0;
    for (let i = this.activeTo.length - 1; i >= 0 && this.activeTo[i] > e; i--)
      n++;
    return n;
  }
}
function lk(t, e, n, i, r, s) {
  t.goto(e), n.goto(i);
  let o = i + r, l = i, a = i - e;
  for (; ; ) {
    let c = t.to + a - n.to || t.endSide - n.endSide, u = c < 0 ? t.to + a : n.to, f = Math.min(u, o);
    if (t.point || n.point ? t.point && n.point && (t.point == n.point || t.point.eq(n.point)) && g1(t.activeForPoint(t.to + a), n.activeForPoint(n.to)) || s.comparePoint(l, f, t.point, n.point) : f > l && !g1(t.active, n.active) && s.compareRange(l, f, t.active, n.active), u > o)
      break;
    l = u, c <= 0 && t.next(), c >= 0 && n.next();
  }
}
function g1(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (t[n] != e[n] && !t[n].eq(e[n]))
      return !1;
  return !0;
}
function Tf(t, e) {
  for (let n = e, i = t.length - 1; n < i; n++)
    t[n] = t[n + 1];
  t.pop();
}
function Rf(t, e, n) {
  for (let i = t.length - 1; i >= e; i--)
    t[i + 1] = t[i];
  t[e] = n;
}
function ak(t, e) {
  let n = -1, i = 1e9;
  for (let r = 0; r < e.length; r++)
    (e[r] - i || t[r].endSide - t[n].endSide) < 0 && (n = r, i = e[r]);
  return n;
}
function Gu(t, e, n = t.length) {
  let i = 0;
  for (let r = 0; r < n; )
    t.charCodeAt(r) == 9 ? (i += e - i % e, r++) : (i++, r = Li(t, r));
  return i;
}
function m1(t, e, n, i) {
  for (let r = 0, s = 0; ; ) {
    if (s >= e)
      return r;
    if (r == t.length)
      break;
    s += t.charCodeAt(r) == 9 ? n - s % n : 1, r = Li(t, r);
  }
  return i === !0 ? -1 : t.length;
}
const b1 = "Í¼", ck = typeof Symbol > "u" ? "__" + b1 : Symbol.for(b1), _1 = typeof Symbol > "u" ? "__styleSet" + Math.floor(Math.random() * 1e8) : Symbol("styleSet"), uk = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : {};
class zo {
  constructor(e, n) {
    this.rules = [];
    let { finish: i } = n || {};
    function r(o) {
      return /^@/.test(o) ? [o] : o.split(/,\s*/);
    }
    function s(o, l, a, c) {
      let u = [], f = /^@(\w+)\b/.exec(o[0]), h = f && f[1] == "keyframes";
      if (f && l == null)
        return a.push(o[0] + ";");
      for (let d in l) {
        let p = l[d];
        if (/&/.test(d))
          s(
            d.split(/,\s*/).map((g) => o.map((m) => g.replace(/&/, m))).reduce((g, m) => g.concat(m)),
            p,
            a
          );
        else if (p && typeof p == "object") {
          if (!f)
            throw new RangeError("The value of a property (" + d + ") should be a primitive value.");
          s(r(d), p, u, h);
        } else
          p != null && u.push(d.replace(/_.*/, "").replace(/[A-Z]/g, (g) => "-" + g.toLowerCase()) + ": " + p + ";");
      }
      (u.length || h) && a.push((i && !f && !c ? o.map(i) : o).join(", ") + " {" + u.join(" ") + "}");
    }
    for (let o in e)
      s(r(o), e[o], this.rules);
  }
  getRules() {
    return this.rules.join(`
`);
  }
  static newName() {
    let e = uk[ck] || 1;
    return uk[ck] = e + 1, b1 + e.toString(36);
  }
  static mount(e, n) {
    (e[_1] || new BW(e)).mount(Array.isArray(n) ? n : [n]);
  }
}
let Pf = null;
class BW {
  constructor(e) {
    if (!e.head && e.adoptedStyleSheets && typeof CSSStyleSheet < "u") {
      if (Pf)
        return e.adoptedStyleSheets = [Pf.sheet].concat(e.adoptedStyleSheets), e[_1] = Pf;
      this.sheet = new CSSStyleSheet(), e.adoptedStyleSheets = [this.sheet].concat(e.adoptedStyleSheets), Pf = this;
    } else {
      this.styleTag = (e.ownerDocument || e).createElement("style");
      let n = e.head || e;
      n.insertBefore(this.styleTag, n.firstChild);
    }
    this.modules = [], e[_1] = this;
  }
  mount(e) {
    let n = this.sheet, i = 0, r = 0;
    for (let s = 0; s < e.length; s++) {
      let o = e[s], l = this.modules.indexOf(o);
      if (l < r && l > -1 && (this.modules.splice(l, 1), r--, l = -1), l == -1) {
        if (this.modules.splice(r++, 0, o), n)
          for (let a = 0; a < o.rules.length; a++)
            n.insertRule(o.rules[a], i++);
      } else {
        for (; r < l; )
          i += this.modules[r++].rules.length;
        i += o.rules.length, r++;
      }
    }
    if (!n) {
      let s = "";
      for (let o = 0; o < this.modules.length; o++)
        s += this.modules[o].getRules() + `
`;
      this.styleTag.textContent = s;
    }
  }
}
var Vo = {
  8: "Backspace",
  9: "Tab",
  10: "Enter",
  12: "NumLock",
  13: "Enter",
  16: "Shift",
  17: "Control",
  18: "Alt",
  20: "CapsLock",
  27: "Escape",
  32: " ",
  33: "PageUp",
  34: "PageDown",
  35: "End",
  36: "Home",
  37: "ArrowLeft",
  38: "ArrowUp",
  39: "ArrowRight",
  40: "ArrowDown",
  44: "PrintScreen",
  45: "Insert",
  46: "Delete",
  59: ";",
  61: "=",
  91: "Meta",
  92: "Meta",
  106: "*",
  107: "+",
  108: ",",
  109: "-",
  110: ".",
  111: "/",
  144: "NumLock",
  145: "ScrollLock",
  160: "Shift",
  161: "Shift",
  162: "Control",
  163: "Control",
  164: "Alt",
  165: "Alt",
  173: "-",
  186: ";",
  187: "=",
  188: ",",
  189: "-",
  190: ".",
  191: "/",
  192: "`",
  219: "[",
  220: "\\",
  221: "]",
  222: "'"
}, hu = {
  48: ")",
  49: "!",
  50: "@",
  51: "#",
  52: "$",
  53: "%",
  54: "^",
  55: "&",
  56: "*",
  57: "(",
  59: ":",
  61: "+",
  173: "_",
  186: ":",
  187: "+",
  188: "<",
  189: "_",
  190: ">",
  191: "?",
  192: "~",
  219: "{",
  220: "|",
  221: "}",
  222: '"'
}, fk = typeof navigator < "u" && /Chrome\/(\d+)/.exec(navigator.userAgent), xW = typeof navigator < "u" && /Mac/.test(navigator.platform), FW = typeof navigator < "u" && /MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent), zW = xW || fk && +fk[1] < 57;
for (var Si = 0; Si < 10; Si++)
  Vo[48 + Si] = Vo[96 + Si] = String(Si);
for (var Si = 1; Si <= 24; Si++)
  Vo[Si + 111] = "F" + Si;
for (var Si = 65; Si <= 90; Si++)
  Vo[Si] = String.fromCharCode(Si + 32), hu[Si] = String.fromCharCode(Si);
for (var zg in Vo)
  hu.hasOwnProperty(zg) || (hu[zg] = Vo[zg]);
function VW(t) {
  var e = zW && (t.ctrlKey || t.altKey || t.metaKey) || FW && t.shiftKey && t.key && t.key.length == 1 || t.key == "Unidentified", n = !e && t.key || (t.shiftKey ? hu : Vo)[t.keyCode] || t.key || "Unidentified";
  return n == "Esc" && (n = "Escape"), n == "Del" && (n = "Delete"), n == "Left" && (n = "ArrowLeft"), n == "Up" && (n = "ArrowUp"), n == "Right" && (n = "ArrowRight"), n == "Down" && (n = "ArrowDown"), n;
}
function od(t) {
  let e;
  return t.nodeType == 11 ? e = t.getSelection ? t : t.ownerDocument : e = t, e.getSelection();
}
function xa(t, e) {
  return e ? t == e || t.contains(e.nodeType != 1 ? e.parentNode : e) : !1;
}
function UW(t) {
  let e = t.activeElement;
  for (; e && e.shadowRoot; )
    e = e.shadowRoot.activeElement;
  return e;
}
function bh(t, e) {
  if (!e.anchorNode)
    return !1;
  try {
    return xa(t, e.anchorNode);
  } catch {
    return !1;
  }
}
function du(t) {
  return t.nodeType == 3 ? Fa(t, 0, t.nodeValue.length).getClientRects() : t.nodeType == 1 ? t.getClientRects() : [];
}
function ld(t, e, n, i) {
  return n ? hk(t, e, n, i, -1) || hk(t, e, n, i, 1) : !1;
}
function ad(t) {
  for (var e = 0; ; e++)
    if (t = t.previousSibling, !t)
      return e;
}
function hk(t, e, n, i, r) {
  for (; ; ) {
    if (t == n && e == i)
      return !0;
    if (e == (r < 0 ? 0 : pu(t))) {
      if (t.nodeName == "DIV")
        return !1;
      let s = t.parentNode;
      if (!s || s.nodeType != 1)
        return !1;
      e = ad(t) + (r < 0 ? 0 : 1), t = s;
    } else if (t.nodeType == 1) {
      if (t = t.childNodes[e + (r < 0 ? -1 : 0)], t.nodeType == 1 && t.contentEditable == "false")
        return !1;
      e = r < 0 ? pu(t) : 0;
    } else
      return !1;
  }
}
function pu(t) {
  return t.nodeType == 3 ? t.nodeValue.length : t.childNodes.length;
}
const k8 = { left: 0, right: 0, top: 0, bottom: 0 };
function wb(t, e) {
  let n = e ? t.left : t.right;
  return { left: n, right: n, top: t.top, bottom: t.bottom };
}
function HW(t) {
  return {
    left: 0,
    right: t.innerWidth,
    top: 0,
    bottom: t.innerHeight
  };
}
function WW(t, e, n, i, r, s, o, l) {
  let a = t.ownerDocument, c = a.defaultView || window;
  for (let u = t; u; )
    if (u.nodeType == 1) {
      let f, h = u == a.body;
      if (h)
        f = HW(c);
      else {
        if (u.scrollHeight <= u.clientHeight && u.scrollWidth <= u.clientWidth) {
          u = u.assignedSlot || u.parentNode;
          continue;
        }
        let g = u.getBoundingClientRect();
        f = {
          left: g.left,
          right: g.left + u.clientWidth,
          top: g.top,
          bottom: g.top + u.clientHeight
        };
      }
      let d = 0, p = 0;
      if (r == "nearest")
        e.top < f.top ? (p = -(f.top - e.top + o), n > 0 && e.bottom > f.bottom + p && (p = e.bottom - f.bottom + p + o)) : e.bottom > f.bottom && (p = e.bottom - f.bottom + o, n < 0 && e.top - p < f.top && (p = -(f.top + p - e.top + o)));
      else {
        let g = e.bottom - e.top, m = f.bottom - f.top;
        p = (r == "center" && g <= m ? e.top + g / 2 - m / 2 : r == "start" || r == "center" && n < 0 ? e.top - o : e.bottom - m + o) - f.top;
      }
      if (i == "nearest" ? e.left < f.left ? (d = -(f.left - e.left + s), n > 0 && e.right > f.right + d && (d = e.right - f.right + d + s)) : e.right > f.right && (d = e.right - f.right + s, n < 0 && e.left < f.left + d && (d = -(f.left + d - e.left + s))) : d = (i == "center" ? e.left + (e.right - e.left) / 2 - (f.right - f.left) / 2 : i == "start" == l ? e.left - s : e.right - (f.right - f.left) + s) - f.left, d || p)
        if (h)
          c.scrollBy(d, p);
        else {
          let g = 0, m = 0;
          if (p) {
            let _ = u.scrollTop;
            u.scrollTop += p, m = u.scrollTop - _;
          }
          if (d) {
            let _ = u.scrollLeft;
            u.scrollLeft += d, g = u.scrollLeft - _;
          }
          e = {
            left: e.left - g,
            top: e.top - m,
            right: e.right - g,
            bottom: e.bottom - m
          }, g && Math.abs(g - d) < 1 && (i = "nearest"), m && Math.abs(m - p) < 1 && (r = "nearest");
        }
      if (h)
        break;
      u = u.assignedSlot || u.parentNode;
    } else if (u.nodeType == 11)
      u = u.host;
    else
      break;
}
function qW(t) {
  let e = t.ownerDocument;
  for (let n = t.parentNode; n && n != e.body; )
    if (n.nodeType == 1) {
      if (n.scrollHeight > n.clientHeight || n.scrollWidth > n.clientWidth)
        return n;
      n = n.assignedSlot || n.parentNode;
    } else if (n.nodeType == 11)
      n = n.host;
    else
      break;
  return null;
}
class JW {
  constructor() {
    this.anchorNode = null, this.anchorOffset = 0, this.focusNode = null, this.focusOffset = 0;
  }
  eq(e) {
    return this.anchorNode == e.anchorNode && this.anchorOffset == e.anchorOffset && this.focusNode == e.focusNode && this.focusOffset == e.focusOffset;
  }
  setRange(e) {
    this.set(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset);
  }
  set(e, n, i, r) {
    this.anchorNode = e, this.anchorOffset = n, this.focusNode = i, this.focusOffset = r;
  }
}
let ea = null;
function C8(t) {
  if (t.setActive)
    return t.setActive();
  if (ea)
    return t.focus(ea);
  let e = [];
  for (let n = t; n && (e.push(n, n.scrollTop, n.scrollLeft), n != n.ownerDocument); n = n.parentNode)
    ;
  if (t.focus(ea == null ? {
    get preventScroll() {
      return ea = { preventScroll: !0 }, !0;
    }
  } : void 0), !ea) {
    ea = !1;
    for (let n = 0; n < e.length; ) {
      let i = e[n++], r = e[n++], s = e[n++];
      i.scrollTop != r && (i.scrollTop = r), i.scrollLeft != s && (i.scrollLeft = s);
    }
  }
}
let dk;
function Fa(t, e, n = e) {
  let i = dk || (dk = document.createRange());
  return i.setEnd(t, n), i.setStart(t, e), i;
}
function _a(t, e, n) {
  let i = { key: e, code: e, keyCode: n, which: n, cancelable: !0 }, r = new KeyboardEvent("keydown", i);
  r.synthetic = !0, t.dispatchEvent(r);
  let s = new KeyboardEvent("keyup", i);
  return s.synthetic = !0, t.dispatchEvent(s), r.defaultPrevented || s.defaultPrevented;
}
function KW(t) {
  for (; t; ) {
    if (t && (t.nodeType == 9 || t.nodeType == 11 && t.host))
      return t;
    t = t.assignedSlot || t.parentNode;
  }
  return null;
}
function S8(t) {
  for (; t.attributes.length; )
    t.removeAttributeNode(t.attributes[0]);
}
function GW(t, e) {
  let n = e.focusNode, i = e.focusOffset;
  if (!n || e.anchorNode != n || e.anchorOffset != i)
    return !1;
  for (; ; )
    if (i) {
      if (n.nodeType != 1)
        return !1;
      let r = n.childNodes[i - 1];
      r.contentEditable == "false" ? i-- : (n = r, i = pu(n));
    } else {
      if (n == t)
        return !0;
      i = ad(n), n = n.parentNode;
    }
}
class Oi {
  constructor(e, n, i = !0) {
    this.node = e, this.offset = n, this.precise = i;
  }
  static before(e, n) {
    return new Oi(e.parentNode, ad(e), n);
  }
  static after(e, n) {
    return new Oi(e.parentNode, ad(e) + 1, n);
  }
}
const vb = [];
class pn {
  constructor() {
    this.parent = null, this.dom = null, this.dirty = 2;
  }
  get editorView() {
    if (!this.parent)
      throw new Error("Accessing view in orphan content view");
    return this.parent.editorView;
  }
  get overrideDOMText() {
    return null;
  }
  get posAtStart() {
    return this.parent ? this.parent.posBefore(this) : 0;
  }
  get posAtEnd() {
    return this.posAtStart + this.length;
  }
  posBefore(e) {
    let n = this.posAtStart;
    for (let i of this.children) {
      if (i == e)
        return n;
      n += i.length + i.breakAfter;
    }
    throw new RangeError("Invalid child in posBefore");
  }
  posAfter(e) {
    return this.posBefore(e) + e.length;
  }
  coordsAt(e, n) {
    return null;
  }
  sync(e) {
    if (this.dirty & 2) {
      let n = this.dom, i = null, r;
      for (let s of this.children) {
        if (s.dirty) {
          if (!s.dom && (r = i ? i.nextSibling : n.firstChild)) {
            let o = pn.get(r);
            (!o || !o.parent && o.canReuseDOM(s)) && s.reuseDOM(r);
          }
          s.sync(e), s.dirty = 0;
        }
        if (r = i ? i.nextSibling : n.firstChild, e && !e.written && e.node == n && r != s.dom && (e.written = !0), s.dom.parentNode == n)
          for (; r && r != s.dom; )
            r = pk(r);
        else
          n.insertBefore(s.dom, r);
        i = s.dom;
      }
      for (r = i ? i.nextSibling : n.firstChild, r && e && e.node == n && (e.written = !0); r; )
        r = pk(r);
    } else if (this.dirty & 1)
      for (let n of this.children)
        n.dirty && (n.sync(e), n.dirty = 0);
  }
  reuseDOM(e) {
  }
  localPosFromDOM(e, n) {
    let i;
    if (e == this.dom)
      i = this.dom.childNodes[n];
    else {
      let r = pu(e) == 0 ? 0 : n == 0 ? -1 : 1;
      for (; ; ) {
        let s = e.parentNode;
        if (s == this.dom)
          break;
        r == 0 && s.firstChild != s.lastChild && (e == s.firstChild ? r = -1 : r = 1), e = s;
      }
      r < 0 ? i = e : i = e.nextSibling;
    }
    if (i == this.dom.firstChild)
      return 0;
    for (; i && !pn.get(i); )
      i = i.nextSibling;
    if (!i)
      return this.length;
    for (let r = 0, s = 0; ; r++) {
      let o = this.children[r];
      if (o.dom == i)
        return s;
      s += o.length + o.breakAfter;
    }
  }
  domBoundsAround(e, n, i = 0) {
    let r = -1, s = -1, o = -1, l = -1;
    for (let a = 0, c = i, u = i; a < this.children.length; a++) {
      let f = this.children[a], h = c + f.length;
      if (c < e && h > n)
        return f.domBoundsAround(e, n, c);
      if (h >= e && r == -1 && (r = a, s = c), c > n && f.dom.parentNode == this.dom) {
        o = a, l = u;
        break;
      }
      u = h, c = h + f.breakAfter;
    }
    return {
      from: s,
      to: l < 0 ? i + this.length : l,
      startDOM: (r ? this.children[r - 1].dom.nextSibling : null) || this.dom.firstChild,
      endDOM: o < this.children.length && o >= 0 ? this.children[o].dom : null
    };
  }
  markDirty(e = !1) {
    this.dirty |= 2, this.markParentsDirty(e);
  }
  markParentsDirty(e) {
    for (let n = this.parent; n; n = n.parent) {
      if (e && (n.dirty |= 2), n.dirty & 1)
        return;
      n.dirty |= 1, e = !1;
    }
  }
  setParent(e) {
    this.parent != e && (this.parent = e, this.dirty && this.markParentsDirty(!0));
  }
  setDOM(e) {
    this.dom && (this.dom.cmView = null), this.dom = e, e.cmView = this;
  }
  get rootView() {
    for (let e = this; ; ) {
      let n = e.parent;
      if (!n)
        return e;
      e = n;
    }
  }
  replaceChildren(e, n, i = vb) {
    this.markDirty();
    for (let r = e; r < n; r++) {
      let s = this.children[r];
      s.parent == this && s.destroy();
    }
    this.children.splice(e, n - e, ...i);
    for (let r = 0; r < i.length; r++)
      i[r].setParent(this);
  }
  ignoreMutation(e) {
    return !1;
  }
  ignoreEvent(e) {
    return !1;
  }
  childCursor(e = this.length) {
    return new E8(this.children, e, this.children.length);
  }
  childPos(e, n = 1) {
    return this.childCursor().findPos(e, n);
  }
  toString() {
    let e = this.constructor.name.replace("View", "");
    return e + (this.children.length ? "(" + this.children.join() + ")" : this.length ? "[" + (e == "Text" ? this.text : this.length) + "]" : "") + (this.breakAfter ? "#" : "");
  }
  static get(e) {
    return e.cmView;
  }
  get isEditable() {
    return !0;
  }
  merge(e, n, i, r, s, o) {
    return !1;
  }
  become(e) {
    return !1;
  }
  canReuseDOM(e) {
    return e.constructor == this.constructor;
  }
  getSide() {
    return 0;
  }
  destroy() {
    this.parent = null;
  }
}
pn.prototype.breakAfter = 0;
function pk(t) {
  let e = t.nextSibling;
  return t.parentNode.removeChild(t), e;
}
class E8 {
  constructor(e, n, i) {
    this.children = e, this.pos = n, this.i = i, this.off = 0;
  }
  findPos(e, n = 1) {
    for (; ; ) {
      if (e > this.pos || e == this.pos && (n > 0 || this.i == 0 || this.children[this.i - 1].breakAfter))
        return this.off = e - this.pos, this;
      let i = this.children[--this.i];
      this.pos -= i.length + i.breakAfter;
    }
  }
}
function A8(t, e, n, i, r, s, o, l, a) {
  let { children: c } = t, u = c.length ? c[e] : null, f = s.length ? s[s.length - 1] : null, h = f ? f.breakAfter : o;
  if (!(e == i && u && !o && !h && s.length < 2 && u.merge(n, r, s.length ? f : null, n == 0, l, a))) {
    if (i < c.length) {
      let d = c[i];
      d && r < d.length ? (e == i && (d = d.split(r), r = 0), !h && f && d.merge(0, r, f, !0, 0, a) ? s[s.length - 1] = d : (r && d.merge(0, r, null, !1, 0, a), s.push(d))) : d != null && d.breakAfter && (f ? f.breakAfter = 1 : o = 1), i++;
    }
    for (u && (u.breakAfter = o, n > 0 && (!o && s.length && u.merge(n, u.length, s[0], !1, l, 0) ? u.breakAfter = s.shift().breakAfter : (n < u.length || u.children.length && u.children[u.children.length - 1].length == 0) && u.merge(n, u.length, null, !1, l, 0), e++)); e < i && s.length; )
      if (c[i - 1].become(s[s.length - 1]))
        i--, s.pop(), a = s.length ? 0 : l;
      else if (c[e].become(s[0]))
        e++, s.shift(), l = s.length ? 0 : a;
      else
        break;
    !s.length && e && i < c.length && !c[e - 1].breakAfter && c[i].merge(0, 0, c[e - 1], !1, l, a) && e--, (e < i || s.length) && t.replaceChildren(e, i, s);
  }
}
function M8(t, e, n, i, r, s) {
  let o = t.childCursor(), { i: l, off: a } = o.findPos(n, 1), { i: c, off: u } = o.findPos(e, -1), f = e - n;
  for (let h of i)
    f += h.length;
  t.length += f, A8(t, c, u, l, a, i, 0, r, s);
}
let er = typeof navigator < "u" ? navigator : { userAgent: "", vendor: "", platform: "" }, y1 = typeof document < "u" ? document : { documentElement: { style: {} } };
const w1 = /* @__PURE__ */ /Edge\/(\d+)/.exec(er.userAgent), O8 = /* @__PURE__ */ /MSIE \d/.test(er.userAgent), v1 = /* @__PURE__ */ /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(er.userAgent), Dp = !!(O8 || v1 || w1), gk = !Dp && /* @__PURE__ */ /gecko\/(\d+)/i.test(er.userAgent), Vg = !Dp && /* @__PURE__ */ /Chrome\/(\d+)/.exec(er.userAgent), mk = "webkitFontSmoothing" in y1.documentElement.style, T8 = !Dp && /* @__PURE__ */ /Apple Computer/.test(er.vendor), bk = T8 && (/* @__PURE__ */ /Mobile\/\w+/.test(er.userAgent) || er.maxTouchPoints > 2);
var tt = {
  mac: bk || /* @__PURE__ */ /Mac/.test(er.platform),
  windows: /* @__PURE__ */ /Win/.test(er.platform),
  linux: /* @__PURE__ */ /Linux|X11/.test(er.platform),
  ie: Dp,
  ie_version: O8 ? y1.documentMode || 6 : v1 ? +v1[1] : w1 ? +w1[1] : 0,
  gecko: gk,
  gecko_version: gk ? +(/* @__PURE__ */ /Firefox\/(\d+)/.exec(er.userAgent) || [0, 0])[1] : 0,
  chrome: !!Vg,
  chrome_version: Vg ? +Vg[1] : 0,
  ios: bk,
  android: /* @__PURE__ */ /Android\b/.test(er.userAgent),
  webkit: mk,
  safari: T8,
  webkit_version: mk ? +(/* @__PURE__ */ /\bAppleWebKit\/(\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0,
  tabSize: y1.documentElement.style.tabSize != null ? "tab-size" : "-moz-tab-size"
};
const YW = 256;
class Uo extends pn {
  constructor(e) {
    super(), this.text = e;
  }
  get length() {
    return this.text.length;
  }
  createDOM(e) {
    this.setDOM(e || document.createTextNode(this.text));
  }
  sync(e) {
    this.dom || this.createDOM(), this.dom.nodeValue != this.text && (e && e.node == this.dom && (e.written = !0), this.dom.nodeValue = this.text);
  }
  reuseDOM(e) {
    e.nodeType == 3 && this.createDOM(e);
  }
  merge(e, n, i) {
    return i && (!(i instanceof Uo) || this.length - (n - e) + i.length > YW) ? !1 : (this.text = this.text.slice(0, e) + (i ? i.text : "") + this.text.slice(n), this.markDirty(), !0);
  }
  split(e) {
    let n = new Uo(this.text.slice(e));
    return this.text = this.text.slice(0, e), this.markDirty(), n;
  }
  localPosFromDOM(e, n) {
    return e == this.dom ? n : n ? this.text.length : 0;
  }
  domAtPos(e) {
    return new Oi(this.dom, e);
  }
  domBoundsAround(e, n, i) {
    return { from: i, to: i + this.length, startDOM: this.dom, endDOM: this.dom.nextSibling };
  }
  coordsAt(e, n) {
    return k1(this.dom, e, n);
  }
}
class Ms extends pn {
  constructor(e, n = [], i = 0) {
    super(), this.mark = e, this.children = n, this.length = i;
    for (let r of n)
      r.setParent(this);
  }
  setAttrs(e) {
    if (S8(e), this.mark.class && (e.className = this.mark.class), this.mark.attrs)
      for (let n in this.mark.attrs)
        e.setAttribute(n, this.mark.attrs[n]);
    return e;
  }
  reuseDOM(e) {
    e.nodeName == this.mark.tagName.toUpperCase() && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    this.dom ? this.dirty & 4 && this.setAttrs(this.dom) : this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))), super.sync(e);
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof Ms && i.mark.eq(this.mark)) || e && s <= 0 || n < this.length && o <= 0) ? !1 : (M8(this, e, n, i ? i.children : [], s - 1, o - 1), this.markDirty(), !0);
  }
  split(e) {
    let n = [], i = 0, r = -1, s = 0;
    for (let l of this.children) {
      let a = i + l.length;
      a > e && n.push(i < e ? l.split(e - i) : l), r < 0 && i >= e && (r = s), i = a, s++;
    }
    let o = this.length - e;
    return this.length = e, r > -1 && (this.children.length = r, this.markDirty()), new Ms(this.mark, n, o);
  }
  domAtPos(e) {
    return I8(this, e);
  }
  coordsAt(e, n) {
    return N8(this, e, n);
  }
}
function k1(t, e, n) {
  let i = t.nodeValue.length;
  e > i && (e = i);
  let r = e, s = e, o = 0;
  e == 0 && n < 0 || e == i && n >= 0 ? tt.chrome || tt.gecko || (e ? (r--, o = 1) : s < i && (s++, o = -1)) : n < 0 ? r-- : s < i && s++;
  let l = Fa(t, r, s).getClientRects();
  if (!l.length)
    return k8;
  let a = l[(o ? o < 0 : n >= 0) ? 0 : l.length - 1];
  return tt.safari && !o && a.width == 0 && (a = Array.prototype.find.call(l, (c) => c.width) || a), o ? wb(a, o < 0) : a || null;
}
class Co extends pn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.side = i, this.prevWidget = null;
  }
  static create(e, n, i) {
    return new (e.customView || Co)(e, n, i);
  }
  split(e) {
    let n = Co.create(this.widget, this.length - e, this.side);
    return this.length -= e, n;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  getSide() {
    return this.side;
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof Co) || !this.widget.compare(i.widget) || e > 0 && s <= 0 || n < this.length && o <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  become(e) {
    return e.length == this.length && e instanceof Co && e.side == this.side && this.widget.constructor == e.widget.constructor ? (this.widget.eq(e.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  get overrideDOMText() {
    if (this.length == 0)
      return zt.empty;
    let e = this;
    for (; e.parent; )
      e = e.parent;
    let n = e.editorView, i = n && n.state.doc, r = this.posAtStart;
    return i ? i.slice(r, r + this.length) : zt.empty;
  }
  domAtPos(e) {
    return e == 0 ? Oi.before(this.dom) : Oi.after(this.dom, e == this.length);
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e, n) {
    let i = this.dom.getClientRects(), r = null;
    if (!i.length)
      return k8;
    for (let s = e > 0 ? i.length - 1 : 0; r = i[s], !(e > 0 ? s == 0 : s == i.length - 1 || r.top < r.bottom); s += e > 0 ? -1 : 1)
      ;
    return this.length ? r : wb(r, this.side > 0);
  }
  get isEditable() {
    return !1;
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class R8 extends Co {
  domAtPos(e) {
    let { topView: n, text: i } = this.widget;
    return n ? C1(e, 0, n, i, (r, s) => r.domAtPos(s), (r) => new Oi(i, Math.min(r, i.nodeValue.length))) : new Oi(i, Math.min(e, i.nodeValue.length));
  }
  sync() {
    this.setDOM(this.widget.toDOM());
  }
  localPosFromDOM(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? P8(e, n, i, r) : Math.min(n, this.length);
  }
  ignoreMutation() {
    return !1;
  }
  get overrideDOMText() {
    return null;
  }
  coordsAt(e, n) {
    let { topView: i, text: r } = this.widget;
    return i ? C1(e, n, i, r, (s, o, l) => s.coordsAt(o, l), (s, o) => k1(r, s, o)) : k1(r, e, n);
  }
  destroy() {
    var e;
    super.destroy(), (e = this.widget.topView) === null || e === void 0 || e.destroy();
  }
  get isEditable() {
    return !0;
  }
  canReuseDOM() {
    return !0;
  }
}
function C1(t, e, n, i, r, s) {
  if (n instanceof Ms) {
    for (let o = n.dom.firstChild; o; o = o.nextSibling) {
      let l = pn.get(o);
      if (!l)
        return s(t, e);
      let a = xa(o, i), c = l.length + (a ? i.nodeValue.length : 0);
      if (t < c || t == c && l.getSide() <= 0)
        return a ? C1(t, e, l, i, r, s) : r(l, t, e);
      t -= c;
    }
    return r(n, n.length, -1);
  } else
    return n.dom == i ? s(t, e) : r(n, t, e);
}
function P8(t, e, n, i) {
  if (n instanceof Ms)
    for (let r of n.children) {
      let s = 0, o = xa(r.dom, i);
      if (xa(r.dom, t))
        return s + (o ? P8(t, e, r, i) : r.localPosFromDOM(t, e));
      s += o ? i.nodeValue.length : r.length;
    }
  else if (n.dom == i)
    return Math.min(e, i.nodeValue.length);
  return n.localPosFromDOM(t, e);
}
class za extends pn {
  constructor(e) {
    super(), this.side = e;
  }
  get length() {
    return 0;
  }
  merge() {
    return !1;
  }
  become(e) {
    return e instanceof za && e.side == this.side;
  }
  split() {
    return new za(this.side);
  }
  sync() {
    if (!this.dom) {
      let e = document.createElement("img");
      e.className = "cm-widgetBuffer", e.setAttribute("aria-hidden", "true"), this.setDOM(e);
    }
  }
  getSide() {
    return this.side;
  }
  domAtPos(e) {
    return Oi.before(this.dom);
  }
  localPosFromDOM() {
    return 0;
  }
  domBoundsAround() {
    return null;
  }
  coordsAt(e) {
    let n = this.dom.getBoundingClientRect(), i = XW(this, this.side > 0 ? -1 : 1);
    return i && i.top < n.bottom && i.bottom > n.top ? { left: n.left, right: n.right, top: i.top, bottom: i.bottom } : n;
  }
  get overrideDOMText() {
    return zt.empty;
  }
}
Uo.prototype.children = Co.prototype.children = za.prototype.children = vb;
function XW(t, e) {
  let n = t.parent, i = n ? n.children.indexOf(t) : -1;
  for (; n && i >= 0; )
    if (e < 0 ? i > 0 : i < n.children.length) {
      let r = n.children[i + e];
      if (r instanceof Uo) {
        let s = r.coordsAt(e < 0 ? r.length : 0, e);
        if (s)
          return s;
      }
      i += e;
    } else if (n instanceof Ms && n.parent)
      i = n.parent.children.indexOf(n) + (e < 0 ? 0 : 1), n = n.parent;
    else {
      let r = n.dom.lastChild;
      if (r && r.nodeName == "BR")
        return r.getClientRects()[0];
      break;
    }
}
function I8(t, e) {
  let n = t.dom, { children: i } = t, r = 0;
  for (let s = 0; r < i.length; r++) {
    let o = i[r], l = s + o.length;
    if (!(l == s && o.getSide() <= 0)) {
      if (e > s && e < l && o.dom.parentNode == n)
        return o.domAtPos(e - s);
      if (e <= s)
        break;
      s = l;
    }
  }
  for (let s = r; s > 0; s--) {
    let o = i[s - 1];
    if (o.dom.parentNode == n)
      return o.domAtPos(o.length);
  }
  for (let s = r; s < i.length; s++) {
    let o = i[s];
    if (o.dom.parentNode == n)
      return o.domAtPos(0);
  }
  return new Oi(n, 0);
}
function D8(t, e, n) {
  let i, { children: r } = t;
  n > 0 && e instanceof Ms && r.length && (i = r[r.length - 1]) instanceof Ms && i.mark.eq(e.mark) ? D8(i, e.children[0], n - 1) : (r.push(e), e.setParent(t)), t.length += e.length;
}
function N8(t, e, n) {
  let i = null, r = -1, s = null, o = -1;
  function l(c, u) {
    for (let f = 0, h = 0; f < c.children.length && h <= u; f++) {
      let d = c.children[f], p = h + d.length;
      p >= u && (d.children.length ? l(d, u - h) : !s && (p > u || h == p && d.getSide() > 0) ? (s = d, o = u - h) : (h < u || h == p && d.getSide() < 0) && (i = d, r = u - h)), h = p;
    }
  }
  l(t, e);
  let a = (n < 0 ? i : s) || i || s;
  return a ? a.coordsAt(Math.max(0, a == i ? r : o), n) : QW(t);
}
function QW(t) {
  let e = t.dom.lastChild;
  if (!e)
    return t.dom.getBoundingClientRect();
  let n = du(e);
  return n[n.length - 1] || null;
}
function S1(t, e) {
  for (let n in t)
    n == "class" && e.class ? e.class += " " + t.class : n == "style" && e.style ? e.style += ";" + t.style : e[n] = t[n];
  return e;
}
function kb(t, e) {
  if (t == e)
    return !0;
  if (!t || !e)
    return !1;
  let n = Object.keys(t), i = Object.keys(e);
  if (n.length != i.length)
    return !1;
  for (let r of n)
    if (i.indexOf(r) == -1 || t[r] !== e[r])
      return !1;
  return !0;
}
function E1(t, e, n) {
  let i = null;
  if (e)
    for (let r in e)
      n && r in n || t.removeAttribute(i = r);
  if (n)
    for (let r in n)
      e && e[r] == n[r] || t.setAttribute(i = r, n[r]);
  return !!i;
}
class Zo {
  eq(e) {
    return !1;
  }
  updateDOM(e) {
    return !1;
  }
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  get estimatedHeight() {
    return -1;
  }
  ignoreEvent(e) {
    return !0;
  }
  get customView() {
    return null;
  }
  destroy(e) {
  }
}
var ln = /* @__PURE__ */ function(t) {
  return t[t.Text = 0] = "Text", t[t.WidgetBefore = 1] = "WidgetBefore", t[t.WidgetAfter = 2] = "WidgetAfter", t[t.WidgetRange = 3] = "WidgetRange", t;
}(ln || (ln = {}));
class ft extends Pl {
  constructor(e, n, i, r) {
    super(), this.startSide = e, this.endSide = n, this.widget = i, this.spec = r;
  }
  get heightRelevant() {
    return !1;
  }
  static mark(e) {
    return new Np(e);
  }
  static widget(e) {
    let n = e.side || 0, i = !!e.block;
    return n += i ? n > 0 ? 3e8 : -4e8 : n > 0 ? 1e8 : -1e8, new Il(e, n, n, i, e.widget || null, !1);
  }
  static replace(e) {
    let n = !!e.block, i, r;
    if (e.isBlockGap)
      i = -5e8, r = 4e8;
    else {
      let { start: s, end: o } = L8(e, n);
      i = (s ? n ? -3e8 : -1 : 5e8) - 1, r = (o ? n ? 2e8 : 1 : -6e8) + 1;
    }
    return new Il(e, i, r, n, e.widget || null, !0);
  }
  static line(e) {
    return new Yu(e);
  }
  static set(e, n = !1) {
    return Vt.of(e, n);
  }
  hasHeight() {
    return this.widget ? this.widget.estimatedHeight > -1 : !1;
  }
}
ft.none = Vt.empty;
class Np extends ft {
  constructor(e) {
    let { start: n, end: i } = L8(e);
    super(n ? -1 : 5e8, i ? 1 : -6e8, null, e), this.tagName = e.tagName || "span", this.class = e.class || "", this.attrs = e.attributes || null;
  }
  eq(e) {
    return this == e || e instanceof Np && this.tagName == e.tagName && this.class == e.class && kb(this.attrs, e.attrs);
  }
  range(e, n = e) {
    if (e >= n)
      throw new RangeError("Mark decorations may not be empty");
    return super.range(e, n);
  }
}
Np.prototype.point = !1;
class Yu extends ft {
  constructor(e) {
    super(-2e8, -2e8, null, e);
  }
  eq(e) {
    return e instanceof Yu && kb(this.spec.attributes, e.spec.attributes);
  }
  range(e, n = e) {
    if (n != e)
      throw new RangeError("Line decoration ranges must be zero-length");
    return super.range(e, n);
  }
}
Yu.prototype.mapMode = Di.TrackBefore;
Yu.prototype.point = !0;
class Il extends ft {
  constructor(e, n, i, r, s, o) {
    super(n, i, s, e), this.block = r, this.isReplace = o, this.mapMode = r ? n <= 0 ? Di.TrackBefore : Di.TrackAfter : Di.TrackDel;
  }
  get type() {
    return this.startSide < this.endSide ? ln.WidgetRange : this.startSide <= 0 ? ln.WidgetBefore : ln.WidgetAfter;
  }
  get heightRelevant() {
    return this.block || !!this.widget && this.widget.estimatedHeight >= 5;
  }
  eq(e) {
    return e instanceof Il && ZW(this.widget, e.widget) && this.block == e.block && this.startSide == e.startSide && this.endSide == e.endSide;
  }
  range(e, n = e) {
    if (this.isReplace && (e > n || e == n && this.startSide > 0 && this.endSide <= 0))
      throw new RangeError("Invalid range for replacement decoration");
    if (!this.isReplace && n != e)
      throw new RangeError("Widget decorations can only have zero-length ranges");
    return super.range(e, n);
  }
}
Il.prototype.point = !0;
function L8(t, e = !1) {
  let { inclusiveStart: n, inclusiveEnd: i } = t;
  return n == null && (n = t.inclusive), i == null && (i = t.inclusive), { start: n ?? e, end: i ?? e };
}
function ZW(t, e) {
  return t == e || !!(t && e && t.compare(e));
}
function A1(t, e, n, i = 0) {
  let r = n.length - 1;
  r >= 0 && n[r] + i >= t ? n[r] = Math.max(n[r], e) : n.push(t, e);
}
class ji extends pn {
  constructor() {
    super(...arguments), this.children = [], this.length = 0, this.prevAttrs = void 0, this.attrs = null, this.breakAfter = 0;
  }
  merge(e, n, i, r, s, o) {
    if (i) {
      if (!(i instanceof ji))
        return !1;
      this.dom || i.transferDOM(this);
    }
    return r && this.setDeco(i ? i.attrs : null), M8(this, e, n, i ? i.children : [], s, o), !0;
  }
  split(e) {
    let n = new ji();
    if (n.breakAfter = this.breakAfter, this.length == 0)
      return n;
    let { i, off: r } = this.childPos(e);
    r && (n.append(this.children[i].split(r), 0), this.children[i].merge(r, this.children[i].length, null, !1, 0, 0), i++);
    for (let s = i; s < this.children.length; s++)
      n.append(this.children[s], 0);
    for (; i > 0 && this.children[i - 1].length == 0; )
      this.children[--i].destroy();
    return this.children.length = i, this.markDirty(), this.length = e, n;
  }
  transferDOM(e) {
    this.dom && (this.markDirty(), e.setDOM(this.dom), e.prevAttrs = this.prevAttrs === void 0 ? this.attrs : this.prevAttrs, this.prevAttrs = void 0, this.dom = null);
  }
  setDeco(e) {
    kb(this.attrs, e) || (this.dom && (this.prevAttrs = this.attrs, this.markDirty()), this.attrs = e);
  }
  append(e, n) {
    D8(this, e, n);
  }
  addLineDeco(e) {
    let n = e.spec.attributes, i = e.spec.class;
    n && (this.attrs = S1(n, this.attrs || {})), i && (this.attrs = S1({ class: i }, this.attrs || {}));
  }
  domAtPos(e) {
    return I8(this, e);
  }
  reuseDOM(e) {
    e.nodeName == "DIV" && (this.setDOM(e), this.dirty |= 6);
  }
  sync(e) {
    var n;
    this.dom ? this.dirty & 4 && (S8(this.dom), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0) : (this.setDOM(document.createElement("div")), this.dom.className = "cm-line", this.prevAttrs = this.attrs ? null : void 0), this.prevAttrs !== void 0 && (E1(this.dom, this.prevAttrs, this.attrs), this.dom.classList.add("cm-line"), this.prevAttrs = void 0), super.sync(e);
    let i = this.dom.lastChild;
    for (; i && pn.get(i) instanceof Ms; )
      i = i.lastChild;
    if (!i || !this.length || i.nodeName != "BR" && ((n = pn.get(i)) === null || n === void 0 ? void 0 : n.isEditable) == !1 && (!tt.ios || !this.children.some((r) => r instanceof Uo))) {
      let r = document.createElement("BR");
      r.cmIgnore = !0, this.dom.appendChild(r);
    }
  }
  measureTextSize() {
    if (this.children.length == 0 || this.length > 20)
      return null;
    let e = 0;
    for (let n of this.children) {
      if (!(n instanceof Uo) || /[^ -~]/.test(n.text))
        return null;
      let i = du(n.dom);
      if (i.length != 1)
        return null;
      e += i[0].width;
    }
    return e ? {
      lineHeight: this.dom.getBoundingClientRect().height,
      charWidth: e / this.length
    } : null;
  }
  coordsAt(e, n) {
    return N8(this, e, n);
  }
  become(e) {
    return !1;
  }
  get type() {
    return ln.Text;
  }
  static find(e, n) {
    for (let i = 0, r = 0; i < e.children.length; i++) {
      let s = e.children[i], o = r + s.length;
      if (o >= n) {
        if (s instanceof ji)
          return s;
        if (o > n)
          break;
      }
      r = o + s.breakAfter;
    }
    return null;
  }
}
class yl extends pn {
  constructor(e, n, i) {
    super(), this.widget = e, this.length = n, this.type = i, this.breakAfter = 0, this.prevWidget = null;
  }
  merge(e, n, i, r, s, o) {
    return i && (!(i instanceof yl) || !this.widget.compare(i.widget) || e > 0 && s <= 0 || n < this.length && o <= 0) ? !1 : (this.length = e + (i ? i.length : 0) + (this.length - n), !0);
  }
  domAtPos(e) {
    return e == 0 ? Oi.before(this.dom) : Oi.after(this.dom, e == this.length);
  }
  split(e) {
    let n = this.length - e;
    this.length = e;
    let i = new yl(this.widget, n, this.type);
    return i.breakAfter = this.breakAfter, i;
  }
  get children() {
    return vb;
  }
  sync() {
    (!this.dom || !this.widget.updateDOM(this.dom)) && (this.dom && this.prevWidget && this.prevWidget.destroy(this.dom), this.prevWidget = null, this.setDOM(this.widget.toDOM(this.editorView)), this.dom.contentEditable = "false");
  }
  get overrideDOMText() {
    return this.parent ? this.parent.view.state.doc.slice(this.posAtStart, this.posAtEnd) : zt.empty;
  }
  domBoundsAround() {
    return null;
  }
  become(e) {
    return e instanceof yl && e.type == this.type && e.widget.constructor == this.widget.constructor ? (e.widget.eq(this.widget) || this.markDirty(!0), this.dom && !this.prevWidget && (this.prevWidget = this.widget), this.widget = e.widget, this.length = e.length, this.breakAfter = e.breakAfter, !0) : !1;
  }
  ignoreMutation() {
    return !0;
  }
  ignoreEvent(e) {
    return this.widget.ignoreEvent(e);
  }
  destroy() {
    super.destroy(), this.dom && this.widget.destroy(this.dom);
  }
}
class Cb {
  constructor(e, n, i, r) {
    this.doc = e, this.pos = n, this.end = i, this.disallowBlockEffectsFor = r, this.content = [], this.curLine = null, this.breakAtStart = 0, this.pendingBuffer = 0, this.bufferMarks = [], this.atCursorPos = !0, this.openStart = -1, this.openEnd = -1, this.text = "", this.textOff = 0, this.cursor = e.iter(), this.skip = n;
  }
  posCovered() {
    if (this.content.length == 0)
      return !this.breakAtStart && this.doc.lineAt(this.pos).from != this.pos;
    let e = this.content[this.content.length - 1];
    return !e.breakAfter && !(e instanceof yl && e.type == ln.WidgetBefore);
  }
  getLine() {
    return this.curLine || (this.content.push(this.curLine = new ji()), this.atCursorPos = !0), this.curLine;
  }
  flushBuffer(e = this.bufferMarks) {
    this.pendingBuffer && (this.curLine.append(If(new za(-1), e), e.length), this.pendingBuffer = 0);
  }
  addBlockWidget(e) {
    this.flushBuffer(), this.curLine = null, this.content.push(e);
  }
  finish(e) {
    this.pendingBuffer && e <= this.bufferMarks.length ? this.flushBuffer() : this.pendingBuffer = 0, this.posCovered() || this.getLine();
  }
  buildText(e, n, i) {
    for (; e > 0; ) {
      if (this.textOff == this.text.length) {
        let { value: s, lineBreak: o, done: l } = this.cursor.next(this.skip);
        if (this.skip = 0, l)
          throw new Error("Ran out of text content when drawing inline views");
        if (o) {
          this.posCovered() || this.getLine(), this.content.length ? this.content[this.content.length - 1].breakAfter = 1 : this.breakAtStart = 1, this.flushBuffer(), this.curLine = null, this.atCursorPos = !0, e--;
          continue;
        } else
          this.text = s, this.textOff = 0;
      }
      let r = Math.min(this.text.length - this.textOff, e, 512);
      this.flushBuffer(n.slice(n.length - i)), this.getLine().append(If(new Uo(this.text.slice(this.textOff, this.textOff + r)), n), i), this.atCursorPos = !0, this.textOff += r, e -= r, i = 0;
    }
  }
  span(e, n, i, r) {
    this.buildText(n - e, i, r), this.pos = n, this.openStart < 0 && (this.openStart = r);
  }
  point(e, n, i, r, s, o) {
    if (this.disallowBlockEffectsFor[o] && i instanceof Il) {
      if (i.block)
        throw new RangeError("Block decorations may not be specified via plugins");
      if (n > this.doc.lineAt(this.pos).to)
        throw new RangeError("Decorations that replace line breaks may not be specified via plugins");
    }
    let l = n - e;
    if (i instanceof Il)
      if (i.block) {
        let { type: a } = i;
        a == ln.WidgetAfter && !this.posCovered() && this.getLine(), this.addBlockWidget(new yl(i.widget || new _k("div"), l, a));
      } else {
        let a = Co.create(i.widget || new _k("span"), l, l ? 0 : i.startSide), c = this.atCursorPos && !a.isEditable && s <= r.length && (e < n || i.startSide > 0), u = !a.isEditable && (e < n || s > r.length || i.startSide <= 0), f = this.getLine();
        this.pendingBuffer == 2 && !c && (this.pendingBuffer = 0), this.flushBuffer(r), c && (f.append(If(new za(1), r), s), s = r.length + Math.max(0, s - r.length)), f.append(If(a, r), s), this.atCursorPos = u, this.pendingBuffer = u ? e < n || s > r.length ? 1 : 2 : 0, this.pendingBuffer && (this.bufferMarks = r.slice());
      }
    else
      this.doc.lineAt(this.pos).from == this.pos && this.getLine().addLineDeco(i);
    l && (this.textOff + l <= this.text.length ? this.textOff += l : (this.skip += l - (this.text.length - this.textOff), this.text = "", this.textOff = 0), this.pos = n), this.openStart < 0 && (this.openStart = s);
  }
  static build(e, n, i, r, s) {
    let o = new Cb(e, n, i, s);
    return o.openEnd = Vt.spans(r, n, i, o), o.openStart < 0 && (o.openStart = o.openEnd), o.finish(o.openEnd), o;
  }
}
function If(t, e) {
  for (let n of e)
    t = new Ms(n, [t], t.length);
  return t;
}
class _k extends Zo {
  constructor(e) {
    super(), this.tag = e;
  }
  eq(e) {
    return e.tag == this.tag;
  }
  toDOM() {
    return document.createElement(this.tag);
  }
  updateDOM(e) {
    return e.nodeName.toLowerCase() == this.tag;
  }
}
const j8 = /* @__PURE__ */ et.define(), B8 = /* @__PURE__ */ et.define(), x8 = /* @__PURE__ */ et.define(), F8 = /* @__PURE__ */ et.define(), M1 = /* @__PURE__ */ et.define(), z8 = /* @__PURE__ */ et.define(), V8 = /* @__PURE__ */ et.define({
  combine: (t) => t.some((e) => e)
}), U8 = /* @__PURE__ */ et.define({
  combine: (t) => t.some((e) => e)
});
class cd {
  constructor(e, n = "nearest", i = "nearest", r = 5, s = 5) {
    this.range = e, this.y = n, this.x = i, this.yMargin = r, this.xMargin = s;
  }
  map(e) {
    return e.empty ? this : new cd(this.range.map(e), this.y, this.x, this.yMargin, this.xMargin);
  }
}
const yk = /* @__PURE__ */ kt.define({ map: (t, e) => t.map(e) });
function rr(t, e, n) {
  let i = t.facet(F8);
  i.length ? i[0](e) : window.onerror ? window.onerror(String(e), n, void 0, void 0, e) : n ? console.error(n + ":", e) : console.error(e);
}
const Lp = /* @__PURE__ */ et.define({ combine: (t) => t.length ? t[0] : !0 });
let $W = 0;
const Mc = /* @__PURE__ */ et.define();
class Qn {
  constructor(e, n, i, r) {
    this.id = e, this.create = n, this.domEventHandlers = i, this.extension = r(this);
  }
  static define(e, n) {
    const { eventHandlers: i, provide: r, decorations: s } = n || {};
    return new Qn($W++, e, i, (o) => {
      let l = [Mc.of(o)];
      return s && l.push(gu.of((a) => {
        let c = a.plugin(o);
        return c ? s(c) : ft.none;
      })), r && l.push(r(o)), l;
    });
  }
  static fromClass(e, n) {
    return Qn.define((i) => new e(i), n);
  }
}
class Ug {
  constructor(e) {
    this.spec = e, this.mustUpdate = null, this.value = null;
  }
  update(e) {
    if (this.value) {
      if (this.mustUpdate) {
        let n = this.mustUpdate;
        if (this.mustUpdate = null, this.value.update)
          try {
            this.value.update(n);
          } catch (i) {
            if (rr(n.state, i, "CodeMirror plugin crashed"), this.value.destroy)
              try {
                this.value.destroy();
              } catch {
              }
            this.deactivate();
          }
      }
    } else if (this.spec)
      try {
        this.value = this.spec.create(e);
      } catch (n) {
        rr(e.state, n, "CodeMirror plugin crashed"), this.deactivate();
      }
    return this;
  }
  destroy(e) {
    var n;
    if (!((n = this.value) === null || n === void 0) && n.destroy)
      try {
        this.value.destroy();
      } catch (i) {
        rr(e.state, i, "CodeMirror plugin crashed");
      }
  }
  deactivate() {
    this.spec = this.value = null;
  }
}
const H8 = /* @__PURE__ */ et.define(), Sb = /* @__PURE__ */ et.define(), gu = /* @__PURE__ */ et.define(), W8 = /* @__PURE__ */ et.define(), q8 = /* @__PURE__ */ et.define(), Oc = /* @__PURE__ */ et.define();
class ps {
  constructor(e, n, i, r) {
    this.fromA = e, this.toA = n, this.fromB = i, this.toB = r;
  }
  join(e) {
    return new ps(Math.min(this.fromA, e.fromA), Math.max(this.toA, e.toA), Math.min(this.fromB, e.fromB), Math.max(this.toB, e.toB));
  }
  addToSet(e) {
    let n = e.length, i = this;
    for (; n > 0; n--) {
      let r = e[n - 1];
      if (!(r.fromA > i.toA)) {
        if (r.toA < i.fromA)
          break;
        i = i.join(r), e.splice(n - 1, 1);
      }
    }
    return e.splice(n, 0, i), e;
  }
  static extendWithRanges(e, n) {
    if (n.length == 0)
      return e;
    let i = [];
    for (let r = 0, s = 0, o = 0, l = 0; ; r++) {
      let a = r == e.length ? null : e[r], c = o - l, u = a ? a.fromB : 1e9;
      for (; s < n.length && n[s] < u; ) {
        let f = n[s], h = n[s + 1], d = Math.max(l, f), p = Math.min(u, h);
        if (d <= p && new ps(d + c, p + c, d, p).addToSet(i), h > u)
          break;
        s += 2;
      }
      if (!a)
        return i;
      new ps(a.fromA, a.toA, a.fromB, a.toB).addToSet(i), o = a.toA, l = a.toB;
    }
  }
}
class ud {
  constructor(e, n, i) {
    this.view = e, this.state = n, this.transactions = i, this.flags = 0, this.startState = e.state, this.changes = ti.empty(this.startState.doc.length);
    for (let o of i)
      this.changes = this.changes.compose(o.changes);
    let r = [];
    this.changes.iterChangedRanges((o, l, a, c) => r.push(new ps(o, l, a, c))), this.changedRanges = r;
    let s = e.hasFocus;
    s != e.inputState.notifiedFocused && (e.inputState.notifiedFocused = s, this.flags |= 1);
  }
  static create(e, n, i) {
    return new ud(e, n, i);
  }
  get viewportChanged() {
    return (this.flags & 4) > 0;
  }
  get heightChanged() {
    return (this.flags & 2) > 0;
  }
  get geometryChanged() {
    return this.docChanged || (this.flags & 10) > 0;
  }
  get focusChanged() {
    return (this.flags & 1) > 0;
  }
  get docChanged() {
    return !this.changes.empty;
  }
  get selectionSet() {
    return this.transactions.some((e) => e.selection);
  }
  get empty() {
    return this.flags == 0 && this.transactions.length == 0;
  }
}
var Mn = /* @__PURE__ */ function(t) {
  return t[t.LTR = 0] = "LTR", t[t.RTL = 1] = "RTL", t;
}(Mn || (Mn = {}));
const O1 = Mn.LTR, eq = Mn.RTL;
function J8(t) {
  let e = [];
  for (let n = 0; n < t.length; n++)
    e.push(1 << +t[n]);
  return e;
}
const tq = /* @__PURE__ */ J8("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"), nq = /* @__PURE__ */ J8("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"), T1 = /* @__PURE__ */ Object.create(null), Zr = [];
for (let t of ["()", "[]", "{}"]) {
  let e = /* @__PURE__ */ t.charCodeAt(0), n = /* @__PURE__ */ t.charCodeAt(1);
  T1[e] = n, T1[n] = -e;
}
function iq(t) {
  return t <= 247 ? tq[t] : 1424 <= t && t <= 1524 ? 2 : 1536 <= t && t <= 1785 ? nq[t - 1536] : 1774 <= t && t <= 2220 ? 4 : 8192 <= t && t <= 8203 ? 256 : 64336 <= t && t <= 65023 ? 4 : t == 8204 ? 256 : 1;
}
const rq = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;
class ya {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.level = i;
  }
  get dir() {
    return this.level % 2 ? eq : O1;
  }
  side(e, n) {
    return this.dir == n == e ? this.to : this.from;
  }
  static find(e, n, i, r) {
    let s = -1;
    for (let o = 0; o < e.length; o++) {
      let l = e[o];
      if (l.from <= n && l.to >= n) {
        if (l.level == i)
          return o;
        (s < 0 || (r != 0 ? r < 0 ? l.from < n : l.to > n : e[s].level > l.level)) && (s = o);
      }
    }
    if (s < 0)
      throw new RangeError("Index out of range");
    return s;
  }
}
const Sn = [];
function sq(t, e) {
  let n = t.length, i = e == O1 ? 1 : 2, r = e == O1 ? 2 : 1;
  if (!t || i == 1 && !rq.test(t))
    return K8(n);
  for (let o = 0, l = i, a = i; o < n; o++) {
    let c = iq(t.charCodeAt(o));
    c == 512 ? c = l : c == 8 && a == 4 && (c = 16), Sn[o] = c == 4 ? 2 : c, c & 7 && (a = c), l = c;
  }
  for (let o = 0, l = i, a = i; o < n; o++) {
    let c = Sn[o];
    if (c == 128)
      o < n - 1 && l == Sn[o + 1] && l & 24 ? c = Sn[o] = l : Sn[o] = 256;
    else if (c == 64) {
      let u = o + 1;
      for (; u < n && Sn[u] == 64; )
        u++;
      let f = o && l == 8 || u < n && Sn[u] == 8 ? a == 1 ? 1 : 8 : 256;
      for (let h = o; h < u; h++)
        Sn[h] = f;
      o = u - 1;
    } else
      c == 8 && a == 1 && (Sn[o] = 1);
    l = c, c & 7 && (a = c);
  }
  for (let o = 0, l = 0, a = 0, c, u, f; o < n; o++)
    if (u = T1[c = t.charCodeAt(o)])
      if (u < 0) {
        for (let h = l - 3; h >= 0; h -= 3)
          if (Zr[h + 1] == -u) {
            let d = Zr[h + 2], p = d & 2 ? i : d & 4 ? d & 1 ? r : i : 0;
            p && (Sn[o] = Sn[Zr[h]] = p), l = h;
            break;
          }
      } else {
        if (Zr.length == 189)
          break;
        Zr[l++] = o, Zr[l++] = c, Zr[l++] = a;
      }
    else if ((f = Sn[o]) == 2 || f == 1) {
      let h = f == i;
      a = h ? 0 : 1;
      for (let d = l - 3; d >= 0; d -= 3) {
        let p = Zr[d + 2];
        if (p & 2)
          break;
        if (h)
          Zr[d + 2] |= 2;
        else {
          if (p & 4)
            break;
          Zr[d + 2] |= 4;
        }
      }
    }
  for (let o = 0; o < n; o++)
    if (Sn[o] == 256) {
      let l = o + 1;
      for (; l < n && Sn[l] == 256; )
        l++;
      let a = (o ? Sn[o - 1] : i) == 1, c = (l < n ? Sn[l] : i) == 1, u = a == c ? a ? 1 : 2 : i;
      for (let f = o; f < l; f++)
        Sn[f] = u;
      o = l - 1;
    }
  let s = [];
  if (i == 1)
    for (let o = 0; o < n; ) {
      let l = o, a = Sn[o++] != 1;
      for (; o < n && a == (Sn[o] != 1); )
        o++;
      if (a)
        for (let c = o; c > l; ) {
          let u = c, f = Sn[--c] != 2;
          for (; c > l && f == (Sn[c - 1] != 2); )
            c--;
          s.push(new ya(c, u, f ? 2 : 1));
        }
      else
        s.push(new ya(l, o, 0));
    }
  else
    for (let o = 0; o < n; ) {
      let l = o, a = Sn[o++] == 2;
      for (; o < n && a == (Sn[o] == 2); )
        o++;
      s.push(new ya(l, o, a ? 1 : 2));
    }
  return s;
}
function K8(t) {
  return [new ya(0, t, 0)];
}
let G8 = "";
function oq(t, e, n, i, r) {
  var s;
  let o = i.head - t.from, l = -1;
  if (o == 0) {
    if (!r || !t.length)
      return null;
    e[0].level != n && (o = e[0].side(!1, n), l = 0);
  } else if (o == t.length) {
    if (r)
      return null;
    let h = e[e.length - 1];
    h.level != n && (o = h.side(!0, n), l = e.length - 1);
  }
  l < 0 && (l = ya.find(e, o, (s = i.bidiLevel) !== null && s !== void 0 ? s : -1, i.assoc));
  let a = e[l];
  o == a.side(r, n) && (a = e[l += r ? 1 : -1], o = a.side(!r, n));
  let c = r == (a.dir == n), u = Li(t.text, o, c);
  if (G8 = t.text.slice(Math.min(o, u), Math.max(o, u)), u != a.side(r, n))
    return Re.cursor(u + t.from, c ? -1 : 1, a.level);
  let f = l == (r ? e.length - 1 : 0) ? null : e[l + (r ? 1 : -1)];
  return !f && a.level != n ? Re.cursor(r ? t.to : t.from, r ? -1 : 1, n) : f && f.level < a.level ? Re.cursor(f.side(!r, n) + t.from, r ? 1 : -1, f.level) : Re.cursor(u + t.from, r ? -1 : 1, a.level);
}
const So = "ï¿¿";
class Y8 {
  constructor(e, n) {
    this.points = e, this.text = "", this.lineSeparator = n.facet(Mt.lineSeparator);
  }
  append(e) {
    this.text += e;
  }
  lineBreak() {
    this.text += So;
  }
  readRange(e, n) {
    if (!e)
      return this;
    let i = e.parentNode;
    for (let r = e; ; ) {
      this.findPointBefore(i, r), this.readNode(r);
      let s = r.nextSibling;
      if (s == n)
        break;
      let o = pn.get(r), l = pn.get(s);
      (o && l ? o.breakAfter : (o ? o.breakAfter : wk(r)) || wk(s) && (r.nodeName != "BR" || r.cmIgnore)) && this.lineBreak(), r = s;
    }
    return this.findPointBefore(i, n), this;
  }
  readTextNode(e) {
    let n = e.nodeValue;
    for (let i of this.points)
      i.node == e && (i.pos = this.text.length + Math.min(i.offset, n.length));
    for (let i = 0, r = this.lineSeparator ? null : /\r\n?|\n/g; ; ) {
      let s = -1, o = 1, l;
      if (this.lineSeparator ? (s = n.indexOf(this.lineSeparator, i), o = this.lineSeparator.length) : (l = r.exec(n)) && (s = l.index, o = l[0].length), this.append(n.slice(i, s < 0 ? n.length : s)), s < 0)
        break;
      if (this.lineBreak(), o > 1)
        for (let a of this.points)
          a.node == e && a.pos > this.text.length && (a.pos -= o - 1);
      i = s + o;
    }
  }
  readNode(e) {
    if (e.cmIgnore)
      return;
    let n = pn.get(e), i = n && n.overrideDOMText;
    if (i != null) {
      this.findPointInside(e, i.length);
      for (let r = i.iter(); !r.next().done; )
        r.lineBreak ? this.lineBreak() : this.append(r.value);
    } else
      e.nodeType == 3 ? this.readTextNode(e) : e.nodeName == "BR" ? e.nextSibling && this.lineBreak() : e.nodeType == 1 && this.readRange(e.firstChild, null);
  }
  findPointBefore(e, n) {
    for (let i of this.points)
      i.node == e && e.childNodes[i.offset] == n && (i.pos = this.text.length);
  }
  findPointInside(e, n) {
    for (let i of this.points)
      (e.nodeType == 3 ? i.node == e : e.contains(i.node)) && (i.pos = this.text.length + Math.min(n, i.offset));
  }
}
function wk(t) {
  return t.nodeType == 1 && /^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName);
}
class vk {
  constructor(e, n) {
    this.node = e, this.offset = n, this.pos = -1;
  }
}
class kk extends pn {
  constructor(e) {
    super(), this.view = e, this.compositionDeco = ft.none, this.decorations = [], this.dynamicDecorationMap = [], this.minWidth = 0, this.minWidthFrom = 0, this.minWidthTo = 0, this.impreciseAnchor = null, this.impreciseHead = null, this.forceSelection = !1, this.lastUpdate = Date.now(), this.setDOM(e.contentDOM), this.children = [new ji()], this.children[0].setParent(this), this.updateDeco(), this.updateInner([new ps(0, 0, 0, e.state.doc.length)], 0);
  }
  get editorView() {
    return this.view;
  }
  get length() {
    return this.view.state.doc.length;
  }
  update(e) {
    let n = e.changedRanges;
    this.minWidth > 0 && n.length && (n.every(({ fromA: o, toA: l }) => l < this.minWidthFrom || o > this.minWidthTo) ? (this.minWidthFrom = e.changes.mapPos(this.minWidthFrom, 1), this.minWidthTo = e.changes.mapPos(this.minWidthTo, 1)) : this.minWidth = this.minWidthFrom = this.minWidthTo = 0), this.view.inputState.composing < 0 ? this.compositionDeco = ft.none : (e.transactions.length || this.dirty) && (this.compositionDeco = aq(this.view, e.changes)), (tt.ie || tt.chrome) && !this.compositionDeco.size && e && e.state.doc.lines != e.startState.doc.lines && (this.forceSelection = !0);
    let i = this.decorations, r = this.updateDeco(), s = hq(i, r, e.changes);
    return n = ps.extendWithRanges(n, s), this.dirty == 0 && n.length == 0 ? !1 : (this.updateInner(n, e.startState.doc.length), e.transactions.length && (this.lastUpdate = Date.now()), !0);
  }
  updateInner(e, n) {
    this.view.viewState.mustMeasureContent = !0, this.updateChildren(e, n);
    let { observer: i } = this.view;
    i.ignore(() => {
      this.dom.style.height = this.view.viewState.contentHeight + "px", this.dom.style.flexBasis = this.minWidth ? this.minWidth + "px" : "";
      let s = tt.chrome || tt.ios ? { node: i.selectionRange.focusNode, written: !1 } : void 0;
      this.sync(s), this.dirty = 0, s && (s.written || i.selectionRange.focusNode != s.node) && (this.forceSelection = !0), this.dom.style.height = "";
    });
    let r = [];
    if (this.view.viewport.from || this.view.viewport.to < this.view.state.doc.length)
      for (let s of this.children)
        s instanceof yl && s.widget instanceof Ck && r.push(s.dom);
    i.updateGaps(r);
  }
  updateChildren(e, n) {
    let i = this.childCursor(n);
    for (let r = e.length - 1; ; r--) {
      let s = r >= 0 ? e[r] : null;
      if (!s)
        break;
      let { fromA: o, toA: l, fromB: a, toB: c } = s, { content: u, breakAtStart: f, openStart: h, openEnd: d } = Cb.build(this.view.state.doc, a, c, this.decorations, this.dynamicDecorationMap), { i: p, off: g } = i.findPos(l, 1), { i: m, off: _ } = i.findPos(o, -1);
      A8(this, m, _, p, g, u, f, h, d);
    }
  }
  updateSelection(e = !1, n = !1) {
    if ((e || !this.view.observer.selectionRange.focusNode) && this.view.observer.readSelectionRange(), !(n || this.mayControlSelection()))
      return;
    let i = this.forceSelection;
    this.forceSelection = !1;
    let r = this.view.state.selection.main, s = this.domAtPos(r.anchor), o = r.empty ? s : this.domAtPos(r.head);
    if (tt.gecko && r.empty && lq(s)) {
      let a = document.createTextNode("");
      this.view.observer.ignore(() => s.node.insertBefore(a, s.node.childNodes[s.offset] || null)), s = o = new Oi(a, 0), i = !0;
    }
    let l = this.view.observer.selectionRange;
    (i || !l.focusNode || !ld(s.node, s.offset, l.anchorNode, l.anchorOffset) || !ld(o.node, o.offset, l.focusNode, l.focusOffset)) && (this.view.observer.ignore(() => {
      tt.android && tt.chrome && this.dom.contains(l.focusNode) && dq(l.focusNode, this.dom) && (this.dom.blur(), this.dom.focus({ preventScroll: !0 }));
      let a = od(this.view.root);
      if (a)
        if (r.empty) {
          if (tt.gecko) {
            let c = uq(s.node, s.offset);
            if (c && c != 3) {
              let u = Q8(s.node, s.offset, c == 1 ? 1 : -1);
              u && (s = new Oi(u, c == 1 ? 0 : u.nodeValue.length));
            }
          }
          a.collapse(s.node, s.offset), r.bidiLevel != null && l.cursorBidiLevel != null && (l.cursorBidiLevel = r.bidiLevel);
        } else if (a.extend) {
          a.collapse(s.node, s.offset);
          try {
            a.extend(o.node, o.offset);
          } catch {
          }
        } else {
          let c = document.createRange();
          r.anchor > r.head && ([s, o] = [o, s]), c.setEnd(o.node, o.offset), c.setStart(s.node, s.offset), a.removeAllRanges(), a.addRange(c);
        }
    }), this.view.observer.setSelectionRange(s, o)), this.impreciseAnchor = s.precise ? null : new Oi(l.anchorNode, l.anchorOffset), this.impreciseHead = o.precise ? null : new Oi(l.focusNode, l.focusOffset);
  }
  enforceCursorAssoc() {
    if (this.compositionDeco.size)
      return;
    let { view: e } = this, n = e.state.selection.main, i = od(e.root), { anchorNode: r, anchorOffset: s } = e.observer.selectionRange;
    if (!i || !n.empty || !n.assoc || !i.modify)
      return;
    let o = ji.find(this, n.head);
    if (!o)
      return;
    let l = o.posAtStart;
    if (n.head == l || n.head == l + o.length)
      return;
    let a = this.coordsAt(n.head, -1), c = this.coordsAt(n.head, 1);
    if (!a || !c || a.bottom > c.top)
      return;
    let u = this.domAtPos(n.head + n.assoc);
    i.collapse(u.node, u.offset), i.modify("move", n.assoc < 0 ? "forward" : "backward", "lineboundary"), e.observer.readSelectionRange();
    let f = e.observer.selectionRange;
    e.docView.posFromDOM(f.anchorNode, f.anchorOffset) != n.from && i.collapse(r, s);
  }
  mayControlSelection() {
    let e = this.view.root.activeElement;
    return e == this.dom || bh(this.dom, this.view.observer.selectionRange) && !(e && this.dom.contains(e));
  }
  nearest(e) {
    for (let n = e; n; ) {
      let i = pn.get(n);
      if (i && i.rootView == this)
        return i;
      n = n.parentNode;
    }
    return null;
  }
  posFromDOM(e, n) {
    let i = this.nearest(e);
    if (!i)
      throw new RangeError("Trying to find position for a DOM position outside of the document");
    return i.localPosFromDOM(e, n) + i.posAtStart;
  }
  domAtPos(e) {
    let { i: n, off: i } = this.childCursor().findPos(e, -1);
    for (; n < this.children.length - 1; ) {
      let r = this.children[n];
      if (i < r.length || r instanceof ji)
        break;
      n++, i = 0;
    }
    return this.children[n].domAtPos(i);
  }
  coordsAt(e, n) {
    for (let i = this.length, r = this.children.length - 1; ; r--) {
      let s = this.children[r], o = i - s.breakAfter - s.length;
      if (e > o || e == o && s.type != ln.WidgetBefore && s.type != ln.WidgetAfter && (!r || n == 2 || this.children[r - 1].breakAfter || this.children[r - 1].type == ln.WidgetBefore && n > -2))
        return s.coordsAt(e - o, n);
      i = o;
    }
  }
  measureVisibleLineHeights(e) {
    let n = [], { from: i, to: r } = e, s = this.view.contentDOM.clientWidth, o = s > Math.max(this.view.scrollDOM.clientWidth, this.minWidth) + 1, l = -1, a = this.view.textDirection == Mn.LTR;
    for (let c = 0, u = 0; u < this.children.length; u++) {
      let f = this.children[u], h = c + f.length;
      if (h > r)
        break;
      if (c >= i) {
        let d = f.dom.getBoundingClientRect();
        if (n.push(d.height), o) {
          let p = f.dom.lastChild, g = p ? du(p) : [];
          if (g.length) {
            let m = g[g.length - 1], _ = a ? m.right - d.left : d.right - m.left;
            _ > l && (l = _, this.minWidth = s, this.minWidthFrom = c, this.minWidthTo = h);
          }
        }
      }
      c = h + f.breakAfter;
    }
    return n;
  }
  textDirectionAt(e) {
    let { i: n } = this.childPos(e, 1);
    return getComputedStyle(this.children[n].dom).direction == "rtl" ? Mn.RTL : Mn.LTR;
  }
  measureTextSize() {
    for (let r of this.children)
      if (r instanceof ji) {
        let s = r.measureTextSize();
        if (s)
          return s;
      }
    let e = document.createElement("div"), n, i;
    return e.className = "cm-line", e.style.width = "99999px", e.textContent = "abc def ghi jkl mno pqr stu", this.view.observer.ignore(() => {
      this.dom.appendChild(e);
      let r = du(e.firstChild)[0];
      n = e.getBoundingClientRect().height, i = r ? r.width / 27 : 7, e.remove();
    }), { lineHeight: n, charWidth: i };
  }
  childCursor(e = this.length) {
    let n = this.children.length;
    return n && (e -= this.children[--n].length), new E8(this.children, e, n);
  }
  computeBlockGapDeco() {
    let e = [], n = this.view.viewState;
    for (let i = 0, r = 0; ; r++) {
      let s = r == n.viewports.length ? null : n.viewports[r], o = s ? s.from - 1 : this.length;
      if (o > i) {
        let l = n.lineBlockAt(o).bottom - n.lineBlockAt(i).top;
        e.push(ft.replace({
          widget: new Ck(l),
          block: !0,
          inclusive: !0,
          isBlockGap: !0
        }).range(i, o));
      }
      if (!s)
        break;
      i = s.to + 1;
    }
    return ft.set(e);
  }
  updateDeco() {
    let e = this.view.state.facet(gu).map((n, i) => (this.dynamicDecorationMap[i] = typeof n == "function") ? n(this.view) : n);
    for (let n = e.length; n < e.length + 3; n++)
      this.dynamicDecorationMap[n] = !1;
    return this.decorations = [
      ...e,
      this.compositionDeco,
      this.computeBlockGapDeco(),
      this.view.viewState.lineGapDeco
    ];
  }
  scrollIntoView(e) {
    let { range: n } = e, i = this.coordsAt(n.head, n.empty ? n.assoc : n.head > n.anchor ? -1 : 1), r;
    if (!i)
      return;
    !n.empty && (r = this.coordsAt(n.anchor, n.anchor > n.head ? -1 : 1)) && (i = {
      left: Math.min(i.left, r.left),
      top: Math.min(i.top, r.top),
      right: Math.max(i.right, r.right),
      bottom: Math.max(i.bottom, r.bottom)
    });
    let s = 0, o = 0, l = 0, a = 0;
    for (let u of this.view.state.facet(q8).map((f) => f(this.view)))
      if (u) {
        let { left: f, right: h, top: d, bottom: p } = u;
        f != null && (s = Math.max(s, f)), h != null && (o = Math.max(o, h)), d != null && (l = Math.max(l, d)), p != null && (a = Math.max(a, p));
      }
    let c = {
      left: i.left - s,
      top: i.top - l,
      right: i.right + o,
      bottom: i.bottom + a
    };
    WW(this.view.scrollDOM, c, n.head < n.anchor ? -1 : 1, e.x, e.y, e.xMargin, e.yMargin, this.view.textDirection == Mn.LTR);
  }
}
function lq(t) {
  return t.node.nodeType == 1 && t.node.firstChild && (t.offset == 0 || t.node.childNodes[t.offset - 1].contentEditable == "false") && (t.offset == t.node.childNodes.length || t.node.childNodes[t.offset].contentEditable == "false");
}
class Ck extends Zo {
  constructor(e) {
    super(), this.height = e;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.updateDOM(e), e;
  }
  eq(e) {
    return e.height == this.height;
  }
  updateDOM(e) {
    return e.style.height = this.height + "px", !0;
  }
  get estimatedHeight() {
    return this.height;
  }
}
function X8(t) {
  let e = t.observer.selectionRange, n = e.focusNode && Q8(e.focusNode, e.focusOffset, 0);
  if (!n)
    return null;
  let i = t.docView.nearest(n);
  if (!i)
    return null;
  if (i instanceof ji) {
    let r = n;
    for (; r.parentNode != i.dom; )
      r = r.parentNode;
    let s = r.previousSibling;
    for (; s && !pn.get(s); )
      s = s.previousSibling;
    let o = s ? pn.get(s).posAtEnd : i.posAtStart;
    return { from: o, to: o, node: r, text: n };
  } else {
    for (; ; ) {
      let { parent: s } = i;
      if (!s)
        return null;
      if (s instanceof ji)
        break;
      i = s;
    }
    let r = i.posAtStart;
    return { from: r, to: r + i.length, node: i.dom, text: n };
  }
}
function aq(t, e) {
  let n = X8(t);
  if (!n)
    return ft.none;
  let { from: i, to: r, node: s, text: o } = n, l = e.mapPos(i, 1), a = Math.max(l, e.mapPos(r, -1)), { state: c } = t, u = s.nodeType == 3 ? s.nodeValue : new Y8([], c).readRange(s.firstChild, null).text;
  if (a - l < u.length)
    if (c.doc.sliceString(l, Math.min(c.doc.length, l + u.length), So) == u)
      a = l + u.length;
    else if (c.doc.sliceString(Math.max(0, a - u.length), a, So) == u)
      l = a - u.length;
    else
      return ft.none;
  else if (c.doc.sliceString(l, a, So) != u)
    return ft.none;
  let f = pn.get(s);
  return f instanceof R8 ? f = f.widget.topView : f && (f.parent = null), ft.set(ft.replace({ widget: new cq(s, o, f), inclusive: !0 }).range(l, a));
}
class cq extends Zo {
  constructor(e, n, i) {
    super(), this.top = e, this.text = n, this.topView = i;
  }
  eq(e) {
    return this.top == e.top && this.text == e.text;
  }
  toDOM() {
    return this.top;
  }
  ignoreEvent() {
    return !1;
  }
  get customView() {
    return R8;
  }
}
function Q8(t, e, n) {
  for (; ; ) {
    if (t.nodeType == 3)
      return t;
    if (t.nodeType == 1 && e > 0 && n <= 0)
      t = t.childNodes[e - 1], e = pu(t);
    else if (t.nodeType == 1 && e < t.childNodes.length && n >= 0)
      t = t.childNodes[e], e = 0;
    else
      return null;
  }
}
function uq(t, e) {
  return t.nodeType != 1 ? 0 : (e && t.childNodes[e - 1].contentEditable == "false" ? 1 : 0) | (e < t.childNodes.length && t.childNodes[e].contentEditable == "false" ? 2 : 0);
}
class fq {
  constructor() {
    this.changes = [];
  }
  compareRange(e, n) {
    A1(e, n, this.changes);
  }
  comparePoint(e, n) {
    A1(e, n, this.changes);
  }
}
function hq(t, e, n) {
  let i = new fq();
  return Vt.compare(t, e, n, i), i.changes;
}
function dq(t, e) {
  for (let n = t; n && n != e; n = n.assignedSlot || n.parentNode)
    if (n.nodeType == 1 && n.contentEditable == "false")
      return !0;
  return !1;
}
function pq(t, e, n = 1) {
  let i = t.charCategorizer(e), r = t.doc.lineAt(e), s = e - r.from;
  if (r.length == 0)
    return Re.cursor(e);
  s == 0 ? n = 1 : s == r.length && (n = -1);
  let o = s, l = s;
  n < 0 ? o = Li(r.text, s, !1) : l = Li(r.text, s);
  let a = i(r.text.slice(o, l));
  for (; o > 0; ) {
    let c = Li(r.text, o, !1);
    if (i(r.text.slice(c, o)) != a)
      break;
    o = c;
  }
  for (; l < r.length; ) {
    let c = Li(r.text, l);
    if (i(r.text.slice(l, c)) != a)
      break;
    l = c;
  }
  return Re.range(o + r.from, l + r.from);
}
function gq(t, e) {
  return e.left > t ? e.left - t : Math.max(0, t - e.right);
}
function mq(t, e) {
  return e.top > t ? e.top - t : Math.max(0, t - e.bottom);
}
function Hg(t, e) {
  return t.top < e.bottom - 1 && t.bottom > e.top + 1;
}
function Sk(t, e) {
  return e < t.top ? { top: e, left: t.left, right: t.right, bottom: t.bottom } : t;
}
function Ek(t, e) {
  return e > t.bottom ? { top: t.top, left: t.left, right: t.right, bottom: e } : t;
}
function R1(t, e, n) {
  let i, r, s, o, l = !1, a, c, u, f;
  for (let p = t.firstChild; p; p = p.nextSibling) {
    let g = du(p);
    for (let m = 0; m < g.length; m++) {
      let _ = g[m];
      r && Hg(r, _) && (_ = Sk(Ek(_, r.bottom), r.top));
      let S = gq(e, _), v = mq(n, _);
      if (S == 0 && v == 0)
        return p.nodeType == 3 ? Ak(p, e, n) : R1(p, e, n);
      (!i || o > v || o == v && s > S) && (i = p, r = _, s = S, o = v, l = !S || (S > 0 ? m < g.length - 1 : m > 0)), S == 0 ? n > _.bottom && (!u || u.bottom < _.bottom) ? (a = p, u = _) : n < _.top && (!f || f.top > _.top) && (c = p, f = _) : u && Hg(u, _) ? u = Ek(u, _.bottom) : f && Hg(f, _) && (f = Sk(f, _.top));
    }
  }
  if (u && u.bottom >= n ? (i = a, r = u) : f && f.top <= n && (i = c, r = f), !i)
    return { node: t, offset: 0 };
  let h = Math.max(r.left, Math.min(r.right, e));
  if (i.nodeType == 3)
    return Ak(i, h, n);
  if (l && i.contentEditable != "false")
    return R1(i, h, n);
  let d = Array.prototype.indexOf.call(t.childNodes, i) + (e >= (r.left + r.right) / 2 ? 1 : 0);
  return { node: t, offset: d };
}
function Ak(t, e, n) {
  let i = t.nodeValue.length, r = -1, s = 1e9, o = 0;
  for (let l = 0; l < i; l++) {
    let a = Fa(t, l, l + 1).getClientRects();
    for (let c = 0; c < a.length; c++) {
      let u = a[c];
      if (u.top == u.bottom)
        continue;
      o || (o = e - u.left);
      let f = (u.top > n ? u.top - n : n - u.bottom) - 1;
      if (u.left - 1 <= e && u.right + 1 >= e && f < s) {
        let h = e >= (u.left + u.right) / 2, d = h;
        if ((tt.chrome || tt.gecko) && Fa(t, l).getBoundingClientRect().left == u.right && (d = !h), f <= 0)
          return { node: t, offset: l + (d ? 1 : 0) };
        r = l + (d ? 1 : 0), s = f;
      }
    }
  }
  return { node: t, offset: r > -1 ? r : o > 0 ? t.nodeValue.length : 0 };
}
function Z8(t, { x: e, y: n }, i, r = -1) {
  var s;
  let o = t.contentDOM.getBoundingClientRect(), l = o.top + t.viewState.paddingTop, a, { docHeight: c } = t.viewState, u = n - l;
  if (u < 0)
    return 0;
  if (u > c)
    return t.state.doc.length;
  for (let _ = t.defaultLineHeight / 2, S = !1; a = t.elementAtHeight(u), a.type != ln.Text; )
    for (; u = r > 0 ? a.bottom + _ : a.top - _, !(u >= 0 && u <= c); ) {
      if (S)
        return i ? null : 0;
      S = !0, r = -r;
    }
  n = l + u;
  let f = a.from;
  if (f < t.viewport.from)
    return t.viewport.from == 0 ? 0 : i ? null : Mk(t, o, a, e, n);
  if (f > t.viewport.to)
    return t.viewport.to == t.state.doc.length ? t.state.doc.length : i ? null : Mk(t, o, a, e, n);
  let h = t.dom.ownerDocument, d = t.root.elementFromPoint ? t.root : h, p = d.elementFromPoint(e, n);
  p && !t.contentDOM.contains(p) && (p = null), p || (e = Math.max(o.left + 1, Math.min(o.right - 1, e)), p = d.elementFromPoint(e, n), p && !t.contentDOM.contains(p) && (p = null));
  let g, m = -1;
  if (p && ((s = t.docView.nearest(p)) === null || s === void 0 ? void 0 : s.isEditable) != !1) {
    if (h.caretPositionFromPoint) {
      let _ = h.caretPositionFromPoint(e, n);
      _ && ({ offsetNode: g, offset: m } = _);
    } else if (h.caretRangeFromPoint) {
      let _ = h.caretRangeFromPoint(e, n);
      _ && ({ startContainer: g, startOffset: m } = _, (!t.contentDOM.contains(g) || tt.safari && bq(g, m, e) || tt.chrome && _q(g, m, e)) && (g = void 0));
    }
  }
  if (!g || !t.docView.dom.contains(g)) {
    let _ = ji.find(t.docView, f);
    if (!_)
      return u > a.top + a.height / 2 ? a.to : a.from;
    ({ node: g, offset: m } = R1(_.dom, e, n));
  }
  return t.docView.posFromDOM(g, m);
}
function Mk(t, e, n, i, r) {
  let s = Math.round((i - e.left) * t.defaultCharacterWidth);
  if (t.lineWrapping && n.height > t.defaultLineHeight * 1.5) {
    let l = Math.floor((r - n.top) / t.defaultLineHeight);
    s += l * t.viewState.heightOracle.lineLength;
  }
  let o = t.state.sliceDoc(n.from, n.to);
  return n.from + m1(o, s, t.state.tabSize);
}
function bq(t, e, n) {
  let i;
  if (t.nodeType != 3 || e != (i = t.nodeValue.length))
    return !1;
  for (let r = t.nextSibling; r; r = r.nextSibling)
    if (r.nodeType != 1 || r.nodeName != "BR")
      return !1;
  return Fa(t, i - 1, i).getBoundingClientRect().left > n;
}
function _q(t, e, n) {
  if (e != 0)
    return !1;
  for (let r = t; ; ) {
    let s = r.parentNode;
    if (!s || s.nodeType != 1 || s.firstChild != r)
      return !1;
    if (s.classList.contains("cm-line"))
      break;
    r = s;
  }
  let i = t.nodeType == 1 ? t.getBoundingClientRect() : Fa(t, 0, Math.max(t.nodeValue.length, 1)).getBoundingClientRect();
  return n - i.left > 5;
}
function yq(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), s = !i || !t.lineWrapping ? null : t.coordsAtPos(e.assoc < 0 && e.head > r.from ? e.head - 1 : e.head);
  if (s) {
    let a = t.dom.getBoundingClientRect(), c = t.textDirectionAt(r.from), u = t.posAtCoords({
      x: n == (c == Mn.LTR) ? a.right - 1 : a.left + 1,
      y: (s.top + s.bottom) / 2
    });
    if (u != null)
      return Re.cursor(u, n ? -1 : 1);
  }
  let o = ji.find(t.docView, e.head), l = o ? n ? o.posAtEnd : o.posAtStart : n ? r.to : r.from;
  return Re.cursor(l, n ? -1 : 1);
}
function Ok(t, e, n, i) {
  let r = t.state.doc.lineAt(e.head), s = t.bidiSpans(r), o = t.textDirectionAt(r.from);
  for (let l = e, a = null; ; ) {
    let c = oq(r, s, o, l, n), u = G8;
    if (!c) {
      if (r.number == (n ? t.state.doc.lines : 1))
        return l;
      u = `
`, r = t.state.doc.line(r.number + (n ? 1 : -1)), s = t.bidiSpans(r), c = Re.cursor(n ? r.from : r.to);
    }
    if (a) {
      if (!a(u))
        return l;
    } else {
      if (!i)
        return c;
      a = i(u);
    }
    l = c;
  }
}
function wq(t, e, n) {
  let i = t.state.charCategorizer(e), r = i(n);
  return (s) => {
    let o = i(s);
    return r == bn.Space && (r = o), r == o;
  };
}
function vq(t, e, n, i) {
  let r = e.head, s = n ? 1 : -1;
  if (r == (n ? t.state.doc.length : 0))
    return Re.cursor(r, e.assoc);
  let o = e.goalColumn, l, a = t.contentDOM.getBoundingClientRect(), c = t.coordsAtPos(r), u = t.documentTop;
  if (c)
    o == null && (o = c.left - a.left), l = s < 0 ? c.top : c.bottom;
  else {
    let d = t.viewState.lineBlockAt(r);
    o == null && (o = Math.min(a.right - a.left, t.defaultCharacterWidth * (r - d.from))), l = (s < 0 ? d.top : d.bottom) + u;
  }
  let f = a.left + o, h = i ?? t.defaultLineHeight >> 1;
  for (let d = 0; ; d += 10) {
    let p = l + (h + d) * s, g = Z8(t, { x: f, y: p }, !1, s);
    if (p < a.top || p > a.bottom || (s < 0 ? g < r : g > r))
      return Re.cursor(g, e.assoc, void 0, o);
  }
}
function Wg(t, e, n) {
  let i = t.state.facet(W8).map((r) => r(t));
  for (; ; ) {
    let r = !1;
    for (let s of i)
      s.between(n.from - 1, n.from + 1, (o, l, a) => {
        n.from > o && n.from < l && (n = e.head > n.from ? Re.cursor(o, 1) : Re.cursor(l, -1), r = !0);
      });
    if (!r)
      return n;
  }
}
class kq {
  constructor(e) {
    this.lastKeyCode = 0, this.lastKeyTime = 0, this.lastTouchTime = 0, this.lastFocusTime = 0, this.lastScrollTop = 0, this.lastScrollLeft = 0, this.chromeScrollHack = -1, this.pendingIOSKey = void 0, this.lastSelectionOrigin = null, this.lastSelectionTime = 0, this.lastEscPress = 0, this.lastContextMenu = 0, this.scrollHandlers = [], this.registeredEvents = [], this.customHandlers = [], this.composing = -1, this.compositionFirstChange = null, this.compositionEndedAt = 0, this.mouseSelection = null;
    let n = (i, r) => {
      this.ignoreDuringComposition(r) || r.type == "keydown" && this.keydown(e, r) || (this.mustFlushObserver(r) && e.observer.forceFlush(), this.runCustomHandlers(r.type, e, r) ? r.preventDefault() : i(e, r));
    };
    for (let i in ii) {
      let r = ii[i];
      e.contentDOM.addEventListener(i, (s) => {
        Tk(e, s) && n(r, s);
      }, P1[i]), this.registeredEvents.push(i);
    }
    e.scrollDOM.addEventListener("mousedown", (i) => {
      i.target == e.scrollDOM && n(ii.mousedown, i);
    }), tt.chrome && tt.chrome_version == 102 && e.scrollDOM.addEventListener("wheel", () => {
      this.chromeScrollHack < 0 ? e.contentDOM.style.pointerEvents = "none" : window.clearTimeout(this.chromeScrollHack), this.chromeScrollHack = setTimeout(() => {
        this.chromeScrollHack = -1, e.contentDOM.style.pointerEvents = "";
      }, 100);
    }, { passive: !0 }), this.notifiedFocused = e.hasFocus, tt.safari && e.contentDOM.addEventListener("input", () => null);
  }
  setSelectionOrigin(e) {
    this.lastSelectionOrigin = e, this.lastSelectionTime = Date.now();
  }
  ensureHandlers(e, n) {
    var i;
    let r;
    this.customHandlers = [];
    for (let s of n)
      if (r = (i = s.update(e).spec) === null || i === void 0 ? void 0 : i.domEventHandlers) {
        this.customHandlers.push({ plugin: s.value, handlers: r });
        for (let o in r)
          this.registeredEvents.indexOf(o) < 0 && o != "scroll" && (this.registeredEvents.push(o), e.contentDOM.addEventListener(o, (l) => {
            Tk(e, l) && this.runCustomHandlers(o, e, l) && l.preventDefault();
          }));
      }
  }
  runCustomHandlers(e, n, i) {
    for (let r of this.customHandlers) {
      let s = r.handlers[e];
      if (s)
        try {
          if (s.call(r.plugin, i, n) || i.defaultPrevented)
            return !0;
        } catch (o) {
          rr(n.state, o);
        }
    }
    return !1;
  }
  runScrollHandlers(e, n) {
    this.lastScrollTop = e.scrollDOM.scrollTop, this.lastScrollLeft = e.scrollDOM.scrollLeft;
    for (let i of this.customHandlers) {
      let r = i.handlers.scroll;
      if (r)
        try {
          r.call(i.plugin, n, e);
        } catch (s) {
          rr(e.state, s);
        }
    }
  }
  keydown(e, n) {
    if (this.lastKeyCode = n.keyCode, this.lastKeyTime = Date.now(), n.keyCode == 9 && Date.now() < this.lastEscPress + 2e3)
      return !0;
    if (tt.android && tt.chrome && !n.synthetic && (n.keyCode == 13 || n.keyCode == 8))
      return e.observer.delayAndroidKey(n.key, n.keyCode), !0;
    let i;
    return tt.ios && !n.synthetic && !n.altKey && !n.metaKey && ((i = $8.find((r) => r.keyCode == n.keyCode)) && !n.ctrlKey || Cq.indexOf(n.key) > -1 && n.ctrlKey && !n.shiftKey) ? (this.pendingIOSKey = i || n, setTimeout(() => this.flushIOSKey(e), 250), !0) : !1;
  }
  flushIOSKey(e) {
    let n = this.pendingIOSKey;
    return n ? (this.pendingIOSKey = void 0, _a(e.contentDOM, n.key, n.keyCode)) : !1;
  }
  ignoreDuringComposition(e) {
    return /^key/.test(e.type) ? this.composing > 0 ? !0 : tt.safari && !tt.ios && Date.now() - this.compositionEndedAt < 100 ? (this.compositionEndedAt = 0, !0) : !1 : !1;
  }
  mustFlushObserver(e) {
    return e.type == "keydown" && e.keyCode != 229;
  }
  startMouseSelection(e) {
    this.mouseSelection && this.mouseSelection.destroy(), this.mouseSelection = e;
  }
  update(e) {
    this.mouseSelection && this.mouseSelection.update(e), e.transactions.length && (this.lastKeyCode = this.lastSelectionTime = 0);
  }
  destroy() {
    this.mouseSelection && this.mouseSelection.destroy();
  }
}
const $8 = [
  { key: "Backspace", keyCode: 8, inputType: "deleteContentBackward" },
  { key: "Enter", keyCode: 13, inputType: "insertParagraph" },
  { key: "Delete", keyCode: 46, inputType: "deleteContentForward" }
], Cq = "dthko", eE = [16, 17, 18, 20, 91, 92, 224, 225];
function Df(t) {
  return t * 0.7 + 8;
}
class Sq {
  constructor(e, n, i, r) {
    this.view = e, this.style = i, this.mustSelect = r, this.scrollSpeed = { x: 0, y: 0 }, this.scrolling = -1, this.lastEvent = n, this.scrollParent = qW(e.contentDOM);
    let s = e.contentDOM.ownerDocument;
    s.addEventListener("mousemove", this.move = this.move.bind(this)), s.addEventListener("mouseup", this.up = this.up.bind(this)), this.extend = n.shiftKey, this.multiple = e.state.facet(Mt.allowMultipleSelections) && Eq(e, n), this.dragMove = Aq(e, n), this.dragging = Mq(e, n) && rE(n) == 1 ? null : !1, this.dragging === !1 && (n.preventDefault(), this.select(n));
  }
  move(e) {
    var n;
    if (e.buttons == 0)
      return this.destroy();
    if (this.dragging !== !1)
      return;
    this.select(this.lastEvent = e);
    let i = 0, r = 0, s = ((n = this.scrollParent) === null || n === void 0 ? void 0 : n.getBoundingClientRect()) || { left: 0, top: 0, right: this.view.win.innerWidth, bottom: this.view.win.innerHeight };
    e.clientX <= s.left ? i = -Df(s.left - e.clientX) : e.clientX >= s.right && (i = Df(e.clientX - s.right)), e.clientY <= s.top ? r = -Df(s.top - e.clientY) : e.clientY >= s.bottom && (r = Df(e.clientY - s.bottom)), this.setScrollSpeed(i, r);
  }
  up(e) {
    this.dragging == null && this.select(this.lastEvent), this.dragging || e.preventDefault(), this.destroy();
  }
  destroy() {
    this.setScrollSpeed(0, 0);
    let e = this.view.contentDOM.ownerDocument;
    e.removeEventListener("mousemove", this.move), e.removeEventListener("mouseup", this.up), this.view.inputState.mouseSelection = null;
  }
  setScrollSpeed(e, n) {
    this.scrollSpeed = { x: e, y: n }, e || n ? this.scrolling < 0 && (this.scrolling = setInterval(() => this.scroll(), 50)) : this.scrolling > -1 && (clearInterval(this.scrolling), this.scrolling = -1);
  }
  scroll() {
    this.scrollParent ? (this.scrollParent.scrollLeft += this.scrollSpeed.x, this.scrollParent.scrollTop += this.scrollSpeed.y) : this.view.win.scrollBy(this.scrollSpeed.x, this.scrollSpeed.y), this.dragging === !1 && this.select(this.lastEvent);
  }
  select(e) {
    let n = this.style.get(e, this.extend, this.multiple);
    (this.mustSelect || !n.eq(this.view.state.selection) || n.main.assoc != this.view.state.selection.main.assoc) && this.view.dispatch({
      selection: n,
      userEvent: "select.pointer"
    }), this.mustSelect = !1;
  }
  update(e) {
    e.docChanged && this.dragging && (this.dragging = this.dragging.map(e.changes)), this.style.update(e) && setTimeout(() => this.select(this.lastEvent), 20);
  }
}
function Eq(t, e) {
  let n = t.state.facet(j8);
  return n.length ? n[0](e) : tt.mac ? e.metaKey : e.ctrlKey;
}
function Aq(t, e) {
  let n = t.state.facet(B8);
  return n.length ? n[0](e) : tt.mac ? !e.altKey : !e.ctrlKey;
}
function Mq(t, e) {
  let { main: n } = t.state.selection;
  if (n.empty)
    return !1;
  let i = od(t.root);
  if (!i || i.rangeCount == 0)
    return !0;
  let r = i.getRangeAt(0).getClientRects();
  for (let s = 0; s < r.length; s++) {
    let o = r[s];
    if (o.left <= e.clientX && o.right >= e.clientX && o.top <= e.clientY && o.bottom >= e.clientY)
      return !0;
  }
  return !1;
}
function Tk(t, e) {
  if (!e.bubbles)
    return !0;
  if (e.defaultPrevented)
    return !1;
  for (let n = e.target, i; n != t.contentDOM; n = n.parentNode)
    if (!n || n.nodeType == 11 || (i = pn.get(n)) && i.ignoreEvent(e))
      return !1;
  return !0;
}
const ii = /* @__PURE__ */ Object.create(null), P1 = /* @__PURE__ */ Object.create(null), tE = tt.ie && tt.ie_version < 15 || tt.ios && tt.webkit_version < 604;
function Oq(t) {
  let e = t.dom.parentNode;
  if (!e)
    return;
  let n = e.appendChild(document.createElement("textarea"));
  n.style.cssText = "position: fixed; left: -10000px; top: 10px", n.focus(), setTimeout(() => {
    t.focus(), n.remove(), nE(t, n.value);
  }, 50);
}
function nE(t, e) {
  let { state: n } = t, i, r = 1, s = n.toText(e), o = s.lines == n.selection.ranges.length;
  if (I1 != null && n.selection.ranges.every((a) => a.empty) && I1 == s.toString()) {
    let a = -1;
    i = n.changeByRange((c) => {
      let u = n.doc.lineAt(c.from);
      if (u.from == a)
        return { range: c };
      a = u.from;
      let f = n.toText((o ? s.line(r++).text : e) + n.lineBreak);
      return {
        changes: { from: u.from, insert: f },
        range: Re.cursor(c.from + f.length)
      };
    });
  } else
    o ? i = n.changeByRange((a) => {
      let c = s.line(r++);
      return {
        changes: { from: a.from, to: a.to, insert: c.text },
        range: Re.cursor(a.from + c.length)
      };
    }) : i = n.replaceSelection(s);
  t.dispatch(i, {
    userEvent: "input.paste",
    scrollIntoView: !0
  });
}
ii.keydown = (t, e) => {
  t.inputState.setSelectionOrigin("select"), e.keyCode == 27 ? t.inputState.lastEscPress = Date.now() : eE.indexOf(e.keyCode) < 0 && (t.inputState.lastEscPress = 0);
};
ii.touchstart = (t, e) => {
  t.inputState.lastTouchTime = Date.now(), t.inputState.setSelectionOrigin("select.pointer");
};
ii.touchmove = (t) => {
  t.inputState.setSelectionOrigin("select.pointer");
};
P1.touchstart = P1.touchmove = { passive: !0 };
ii.mousedown = (t, e) => {
  if (t.observer.flush(), t.inputState.lastTouchTime > Date.now() - 2e3)
    return;
  let n = null;
  for (let i of t.state.facet(x8))
    if (n = i(t, e), n)
      break;
  if (!n && e.button == 0 && (n = Pq(t, e)), n) {
    let i = t.root.activeElement != t.contentDOM;
    i && t.observer.ignore(() => C8(t.contentDOM)), t.inputState.startMouseSelection(new Sq(t, e, n, i));
  }
};
function Rk(t, e, n, i) {
  if (i == 1)
    return Re.cursor(e, n);
  if (i == 2)
    return pq(t.state, e, n);
  {
    let r = ji.find(t.docView, e), s = t.state.doc.lineAt(r ? r.posAtEnd : e), o = r ? r.posAtStart : s.from, l = r ? r.posAtEnd : s.to;
    return l < t.state.doc.length && l == s.to && l++, Re.range(o, l);
  }
}
let iE = (t, e) => t >= e.top && t <= e.bottom, Pk = (t, e, n) => iE(e, n) && t >= n.left && t <= n.right;
function Tq(t, e, n, i) {
  let r = ji.find(t.docView, e);
  if (!r)
    return 1;
  let s = e - r.posAtStart;
  if (s == 0)
    return 1;
  if (s == r.length)
    return -1;
  let o = r.coordsAt(s, -1);
  if (o && Pk(n, i, o))
    return -1;
  let l = r.coordsAt(s, 1);
  return l && Pk(n, i, l) ? 1 : o && iE(i, o) ? -1 : 1;
}
function Ik(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  return { pos: n, bias: Tq(t, n, e.clientX, e.clientY) };
}
const Rq = tt.ie && tt.ie_version <= 11;
let Dk = null, Nk = 0, Lk = 0;
function rE(t) {
  if (!Rq)
    return t.detail;
  let e = Dk, n = Lk;
  return Dk = t, Lk = Date.now(), Nk = !e || n > Date.now() - 400 && Math.abs(e.clientX - t.clientX) < 2 && Math.abs(e.clientY - t.clientY) < 2 ? (Nk + 1) % 3 : 1;
}
function Pq(t, e) {
  let n = Ik(t, e), i = rE(e), r = t.state.selection;
  return {
    update(s) {
      s.docChanged && (n.pos = s.changes.mapPos(n.pos), r = r.map(s.changes));
    },
    get(s, o, l) {
      let a = Ik(t, s), c = Rk(t, a.pos, a.bias, i);
      if (n.pos != a.pos && !o) {
        let u = Rk(t, n.pos, n.bias, i), f = Math.min(u.from, c.from), h = Math.max(u.to, c.to);
        c = f < c.from ? Re.range(f, h) : Re.range(h, f);
      }
      return o ? r.replaceRange(r.main.extend(c.from, c.to)) : l && r.ranges.length > 1 && r.ranges.some((u) => u.eq(c)) ? Iq(r, c) : l ? r.addRange(c) : Re.create([c]);
    }
  };
}
function Iq(t, e) {
  for (let n = 0; ; n++)
    if (t.ranges[n].eq(e))
      return Re.create(t.ranges.slice(0, n).concat(t.ranges.slice(n + 1)), t.mainIndex == n ? 0 : t.mainIndex - (t.mainIndex > n ? 1 : 0));
}
ii.dragstart = (t, e) => {
  let { selection: { main: n } } = t.state, { mouseSelection: i } = t.inputState;
  i && (i.dragging = n), e.dataTransfer && (e.dataTransfer.setData("Text", t.state.sliceDoc(n.from, n.to)), e.dataTransfer.effectAllowed = "copyMove");
};
function jk(t, e, n, i) {
  if (!n)
    return;
  let r = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1);
  e.preventDefault();
  let { mouseSelection: s } = t.inputState, o = i && s && s.dragging && s.dragMove ? { from: s.dragging.from, to: s.dragging.to } : null, l = { from: r, insert: n }, a = t.state.changes(o ? [o, l] : l);
  t.focus(), t.dispatch({
    changes: a,
    selection: { anchor: a.mapPos(r, -1), head: a.mapPos(r, 1) },
    userEvent: o ? "move.drop" : "input.drop"
  });
}
ii.drop = (t, e) => {
  if (!e.dataTransfer)
    return;
  if (t.state.readOnly)
    return e.preventDefault();
  let n = e.dataTransfer.files;
  if (n && n.length) {
    e.preventDefault();
    let i = Array(n.length), r = 0, s = () => {
      ++r == n.length && jk(t, e, i.filter((o) => o != null).join(t.state.lineBreak), !1);
    };
    for (let o = 0; o < n.length; o++) {
      let l = new FileReader();
      l.onerror = s, l.onload = () => {
        /[\x00-\x08\x0e-\x1f]{2}/.test(l.result) || (i[o] = l.result), s();
      }, l.readAsText(n[o]);
    }
  } else
    jk(t, e, e.dataTransfer.getData("Text"), !0);
};
ii.paste = (t, e) => {
  if (t.state.readOnly)
    return e.preventDefault();
  t.observer.flush();
  let n = tE ? null : e.clipboardData;
  n ? (nE(t, n.getData("text/plain")), e.preventDefault()) : Oq(t);
};
function Dq(t, e) {
  let n = t.dom.parentNode;
  if (!n)
    return;
  let i = n.appendChild(document.createElement("textarea"));
  i.style.cssText = "position: fixed; left: -10000px; top: 10px", i.value = e, i.focus(), i.selectionEnd = e.length, i.selectionStart = 0, setTimeout(() => {
    i.remove(), t.focus();
  }, 50);
}
function Nq(t) {
  let e = [], n = [], i = !1;
  for (let r of t.selection.ranges)
    r.empty || (e.push(t.sliceDoc(r.from, r.to)), n.push(r));
  if (!e.length) {
    let r = -1;
    for (let { from: s } of t.selection.ranges) {
      let o = t.doc.lineAt(s);
      o.number > r && (e.push(o.text), n.push({ from: o.from, to: Math.min(t.doc.length, o.to + 1) })), r = o.number;
    }
    i = !0;
  }
  return { text: e.join(t.lineBreak), ranges: n, linewise: i };
}
let I1 = null;
ii.copy = ii.cut = (t, e) => {
  let { text: n, ranges: i, linewise: r } = Nq(t.state);
  if (!n && !r)
    return;
  I1 = r ? n : null;
  let s = tE ? null : e.clipboardData;
  s ? (e.preventDefault(), s.clearData(), s.setData("text/plain", n)) : Dq(t, n), e.type == "cut" && !t.state.readOnly && t.dispatch({
    changes: i,
    scrollIntoView: !0,
    userEvent: "delete.cut"
  });
};
function sE(t) {
  setTimeout(() => {
    t.hasFocus != t.inputState.notifiedFocused && t.update([]);
  }, 10);
}
ii.focus = (t) => {
  t.inputState.lastFocusTime = Date.now(), !t.scrollDOM.scrollTop && (t.inputState.lastScrollTop || t.inputState.lastScrollLeft) && (t.scrollDOM.scrollTop = t.inputState.lastScrollTop, t.scrollDOM.scrollLeft = t.inputState.lastScrollLeft), sE(t);
};
ii.blur = (t) => {
  t.observer.clearSelectionRange(), sE(t);
};
ii.compositionstart = ii.compositionupdate = (t) => {
  t.inputState.compositionFirstChange == null && (t.inputState.compositionFirstChange = !0), t.inputState.composing < 0 && (t.inputState.composing = 0);
};
ii.compositionend = (t) => {
  t.inputState.composing = -1, t.inputState.compositionEndedAt = Date.now(), t.inputState.compositionFirstChange = null, tt.chrome && tt.android && t.observer.flushSoon(), setTimeout(() => {
    t.inputState.composing < 0 && t.docView.compositionDeco.size && t.update([]);
  }, 50);
};
ii.contextmenu = (t) => {
  t.inputState.lastContextMenu = Date.now();
};
ii.beforeinput = (t, e) => {
  var n;
  let i;
  if (tt.chrome && tt.android && (i = $8.find((r) => r.inputType == e.inputType)) && (t.observer.delayAndroidKey(i.key, i.keyCode), i.key == "Backspace" || i.key == "Delete")) {
    let r = ((n = window.visualViewport) === null || n === void 0 ? void 0 : n.height) || 0;
    setTimeout(() => {
      var s;
      (((s = window.visualViewport) === null || s === void 0 ? void 0 : s.height) || 0) > r + 10 && t.hasFocus && (t.contentDOM.blur(), t.focus());
    }, 100);
  }
};
const Bk = ["pre-wrap", "normal", "pre-line", "break-spaces"];
class Lq {
  constructor(e) {
    this.lineWrapping = e, this.doc = zt.empty, this.heightSamples = {}, this.lineHeight = 14, this.charWidth = 7, this.lineLength = 30, this.heightChanged = !1;
  }
  heightForGap(e, n) {
    let i = this.doc.lineAt(n).number - this.doc.lineAt(e).number + 1;
    return this.lineWrapping && (i += Math.ceil((n - e - i * this.lineLength * 0.5) / this.lineLength)), this.lineHeight * i;
  }
  heightForLine(e) {
    return this.lineWrapping ? (1 + Math.max(0, Math.ceil((e - this.lineLength) / (this.lineLength - 5)))) * this.lineHeight : this.lineHeight;
  }
  setDoc(e) {
    return this.doc = e, this;
  }
  mustRefreshForWrapping(e) {
    return Bk.indexOf(e) > -1 != this.lineWrapping;
  }
  mustRefreshForHeights(e) {
    let n = !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i];
      r < 0 ? i++ : this.heightSamples[Math.floor(r * 10)] || (n = !0, this.heightSamples[Math.floor(r * 10)] = !0);
    }
    return n;
  }
  refresh(e, n, i, r, s) {
    let o = Bk.indexOf(e) > -1, l = Math.round(n) != Math.round(this.lineHeight) || this.lineWrapping != o;
    if (this.lineWrapping = o, this.lineHeight = n, this.charWidth = i, this.lineLength = r, l) {
      this.heightSamples = {};
      for (let a = 0; a < s.length; a++) {
        let c = s[a];
        c < 0 ? a++ : this.heightSamples[Math.floor(c * 10)] = !0;
      }
    }
    return l;
  }
}
class jq {
  constructor(e, n) {
    this.from = e, this.heights = n, this.index = 0;
  }
  get more() {
    return this.index < this.heights.length;
  }
}
class Eo {
  constructor(e, n, i, r, s) {
    this.from = e, this.length = n, this.top = i, this.height = r, this.type = s;
  }
  get to() {
    return this.from + this.length;
  }
  get bottom() {
    return this.top + this.height;
  }
  join(e) {
    let n = (Array.isArray(this.type) ? this.type : [this]).concat(Array.isArray(e.type) ? e.type : [e]);
    return new Eo(this.from, this.length + e.length, this.top, this.height + e.height, n);
  }
}
var fn = /* @__PURE__ */ function(t) {
  return t[t.ByPos = 0] = "ByPos", t[t.ByHeight = 1] = "ByHeight", t[t.ByPosNoHeight = 2] = "ByPosNoHeight", t;
}(fn || (fn = {}));
const _h = 1e-3;
class xi {
  constructor(e, n, i = 2) {
    this.length = e, this.height = n, this.flags = i;
  }
  get outdated() {
    return (this.flags & 2) > 0;
  }
  set outdated(e) {
    this.flags = (e ? 2 : 0) | this.flags & -3;
  }
  setHeight(e, n) {
    this.height != n && (Math.abs(this.height - n) > _h && (e.heightChanged = !0), this.height = n);
  }
  replace(e, n, i) {
    return xi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(this);
  }
  decomposeRight(e, n) {
    n.push(this);
  }
  applyChanges(e, n, i, r) {
    let s = this;
    for (let o = r.length - 1; o >= 0; o--) {
      let { fromA: l, toA: a, fromB: c, toB: u } = r[o], f = s.lineAt(l, fn.ByPosNoHeight, n, 0, 0), h = f.to >= a ? f : s.lineAt(a, fn.ByPosNoHeight, n, 0, 0);
      for (u += h.to - a, a = h.to; o > 0 && f.from <= r[o - 1].toA; )
        l = r[o - 1].fromA, c = r[o - 1].fromB, o--, l < f.from && (f = s.lineAt(l, fn.ByPosNoHeight, n, 0, 0));
      c += f.from - l, l = f.from;
      let d = Eb.build(i, e, c, u);
      s = s.replace(l, a, d);
    }
    return s.updateHeight(i, 0);
  }
  static empty() {
    return new Zi(0, 0);
  }
  static of(e) {
    if (e.length == 1)
      return e[0];
    let n = 0, i = e.length, r = 0, s = 0;
    for (; ; )
      if (n == i)
        if (r > s * 2) {
          let l = e[n - 1];
          l.break ? e.splice(--n, 1, l.left, null, l.right) : e.splice(--n, 1, l.left, l.right), i += 1 + l.break, r -= l.size;
        } else if (s > r * 2) {
          let l = e[i];
          l.break ? e.splice(i, 1, l.left, null, l.right) : e.splice(i, 1, l.left, l.right), i += 2 + l.break, s -= l.size;
        } else
          break;
      else if (r < s) {
        let l = e[n++];
        l && (r += l.size);
      } else {
        let l = e[--i];
        l && (s += l.size);
      }
    let o = 0;
    return e[n - 1] == null ? (o = 1, n--) : e[n] == null && (o = 1, i++), new Bq(xi.of(e.slice(0, n)), o, xi.of(e.slice(i)));
  }
}
xi.prototype.size = 1;
class oE extends xi {
  constructor(e, n, i) {
    super(e, n), this.type = i;
  }
  blockAt(e, n, i, r) {
    return new Eo(r, this.length, i, this.height, this.type);
  }
  lineAt(e, n, i, r, s) {
    return this.blockAt(0, i, r, s);
  }
  forEachLine(e, n, i, r, s, o) {
    e <= s + this.length && n >= s && o(this.blockAt(0, i, r, s));
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more && this.setHeight(e, r.heights[r.index++]), this.outdated = !1, this;
  }
  toString() {
    return `block(${this.length})`;
  }
}
class Zi extends oE {
  constructor(e, n) {
    super(e, n, ln.Text), this.collapsed = 0, this.widgetHeight = 0;
  }
  replace(e, n, i) {
    let r = i[0];
    return i.length == 1 && (r instanceof Zi || r instanceof wi && r.flags & 4) && Math.abs(this.length - r.length) < 10 ? (r instanceof wi ? r = new Zi(r.length, this.height) : r.height = this.height, this.outdated || (r.outdated = !1), r) : xi.of(i);
  }
  updateHeight(e, n = 0, i = !1, r) {
    return r && r.from <= n && r.more ? this.setHeight(e, r.heights[r.index++]) : (i || this.outdated) && this.setHeight(e, Math.max(this.widgetHeight, e.heightForLine(this.length - this.collapsed))), this.outdated = !1, this;
  }
  toString() {
    return `line(${this.length}${this.collapsed ? -this.collapsed : ""}${this.widgetHeight ? ":" + this.widgetHeight : ""})`;
  }
}
class wi extends xi {
  constructor(e) {
    super(e, 0);
  }
  lines(e, n) {
    let i = e.lineAt(n).number, r = e.lineAt(n + this.length).number;
    return { firstLine: i, lastLine: r, lineHeight: this.height / (r - i + 1) };
  }
  blockAt(e, n, i, r) {
    let { firstLine: s, lastLine: o, lineHeight: l } = this.lines(n, r), a = Math.max(0, Math.min(o - s, Math.floor((e - i) / l))), { from: c, length: u } = n.line(s + a);
    return new Eo(c, u, i + l * a, l, ln.Text);
  }
  lineAt(e, n, i, r, s) {
    if (n == fn.ByHeight)
      return this.blockAt(e, i, r, s);
    if (n == fn.ByPosNoHeight) {
      let { from: f, to: h } = i.lineAt(e);
      return new Eo(f, h - f, 0, 0, ln.Text);
    }
    let { firstLine: o, lineHeight: l } = this.lines(i, s), { from: a, length: c, number: u } = i.lineAt(e);
    return new Eo(a, c, r + l * (u - o), l, ln.Text);
  }
  forEachLine(e, n, i, r, s, o) {
    let { firstLine: l, lineHeight: a } = this.lines(i, s);
    for (let c = Math.max(e, s), u = Math.min(s + this.length, n); c <= u; ) {
      let f = i.lineAt(c);
      c == e && (r += a * (f.number - l)), o(new Eo(f.from, f.length, r, a, ln.Text)), r += a, c = f.to + 1;
    }
  }
  replace(e, n, i) {
    let r = this.length - n;
    if (r > 0) {
      let s = i[i.length - 1];
      s instanceof wi ? i[i.length - 1] = new wi(s.length + r) : i.push(null, new wi(r - 1));
    }
    if (e > 0) {
      let s = i[0];
      s instanceof wi ? i[0] = new wi(e + s.length) : i.unshift(new wi(e - 1), null);
    }
    return xi.of(i);
  }
  decomposeLeft(e, n) {
    n.push(new wi(e - 1), null);
  }
  decomposeRight(e, n) {
    n.push(null, new wi(this.length - e - 1));
  }
  updateHeight(e, n = 0, i = !1, r) {
    let s = n + this.length;
    if (r && r.from <= n + this.length && r.more) {
      let o = [], l = Math.max(n, r.from), a = -1, c = e.heightChanged;
      for (r.from > n && o.push(new wi(r.from - n - 1).updateHeight(e, n)); l <= s && r.more; ) {
        let f = e.doc.lineAt(l).length;
        o.length && o.push(null);
        let h = r.heights[r.index++];
        a == -1 ? a = h : Math.abs(h - a) >= _h && (a = -2);
        let d = new Zi(f, h);
        d.outdated = !1, o.push(d), l += f + 1;
      }
      l <= s && o.push(null, new wi(s - l).updateHeight(e, l));
      let u = xi.of(o);
      return e.heightChanged = c || a < 0 || Math.abs(u.height - this.height) >= _h || Math.abs(a - this.lines(e.doc, n).lineHeight) >= _h, u;
    } else
      (i || this.outdated) && (this.setHeight(e, e.heightForGap(n, n + this.length)), this.outdated = !1);
    return this;
  }
  toString() {
    return `gap(${this.length})`;
  }
}
class Bq extends xi {
  constructor(e, n, i) {
    super(e.length + n + i.length, e.height + i.height, n | (e.outdated || i.outdated ? 2 : 0)), this.left = e, this.right = i, this.size = e.size + i.size;
  }
  get break() {
    return this.flags & 1;
  }
  blockAt(e, n, i, r) {
    let s = i + this.left.height;
    return e < s ? this.left.blockAt(e, n, i, r) : this.right.blockAt(e, n, s, r + this.left.length + this.break);
  }
  lineAt(e, n, i, r, s) {
    let o = r + this.left.height, l = s + this.left.length + this.break, a = n == fn.ByHeight ? e < o : e < l, c = a ? this.left.lineAt(e, n, i, r, s) : this.right.lineAt(e, n, i, o, l);
    if (this.break || (a ? c.to < l : c.from > l))
      return c;
    let u = n == fn.ByPosNoHeight ? fn.ByPosNoHeight : fn.ByPos;
    return a ? c.join(this.right.lineAt(l, u, i, o, l)) : this.left.lineAt(l, u, i, r, s).join(c);
  }
  forEachLine(e, n, i, r, s, o) {
    let l = r + this.left.height, a = s + this.left.length + this.break;
    if (this.break)
      e < a && this.left.forEachLine(e, n, i, r, s, o), n >= a && this.right.forEachLine(e, n, i, l, a, o);
    else {
      let c = this.lineAt(a, fn.ByPos, i, r, s);
      e < c.from && this.left.forEachLine(e, c.from - 1, i, r, s, o), c.to >= e && c.from <= n && o(c), n > c.to && this.right.forEachLine(c.to + 1, n, i, l, a, o);
    }
  }
  replace(e, n, i) {
    let r = this.left.length + this.break;
    if (n < r)
      return this.balanced(this.left.replace(e, n, i), this.right);
    if (e > this.left.length)
      return this.balanced(this.left, this.right.replace(e - r, n - r, i));
    let s = [];
    e > 0 && this.decomposeLeft(e, s);
    let o = s.length;
    for (let l of i)
      s.push(l);
    if (e > 0 && xk(s, o - 1), n < this.length) {
      let l = s.length;
      this.decomposeRight(n, s), xk(s, l);
    }
    return xi.of(s);
  }
  decomposeLeft(e, n) {
    let i = this.left.length;
    if (e <= i)
      return this.left.decomposeLeft(e, n);
    n.push(this.left), this.break && (i++, e >= i && n.push(null)), e > i && this.right.decomposeLeft(e - i, n);
  }
  decomposeRight(e, n) {
    let i = this.left.length, r = i + this.break;
    if (e >= r)
      return this.right.decomposeRight(e - r, n);
    e < i && this.left.decomposeRight(e, n), this.break && e < r && n.push(null), n.push(this.right);
  }
  balanced(e, n) {
    return e.size > 2 * n.size || n.size > 2 * e.size ? xi.of(this.break ? [e, null, n] : [e, n]) : (this.left = e, this.right = n, this.height = e.height + n.height, this.outdated = e.outdated || n.outdated, this.size = e.size + n.size, this.length = e.length + this.break + n.length, this);
  }
  updateHeight(e, n = 0, i = !1, r) {
    let { left: s, right: o } = this, l = n + s.length + this.break, a = null;
    return r && r.from <= n + s.length && r.more ? a = s = s.updateHeight(e, n, i, r) : s.updateHeight(e, n, i), r && r.from <= l + o.length && r.more ? a = o = o.updateHeight(e, l, i, r) : o.updateHeight(e, l, i), a ? this.balanced(s, o) : (this.height = this.left.height + this.right.height, this.outdated = !1, this);
  }
  toString() {
    return this.left + (this.break ? " " : "-") + this.right;
  }
}
function xk(t, e) {
  let n, i;
  t[e] == null && (n = t[e - 1]) instanceof wi && (i = t[e + 1]) instanceof wi && t.splice(e - 1, 3, new wi(n.length + 1 + i.length));
}
const xq = 5;
class Eb {
  constructor(e, n) {
    this.pos = e, this.oracle = n, this.nodes = [], this.lineStart = -1, this.lineEnd = -1, this.covering = null, this.writtenTo = e;
  }
  get isCovered() {
    return this.covering && this.nodes[this.nodes.length - 1] == this.covering;
  }
  span(e, n) {
    if (this.lineStart > -1) {
      let i = Math.min(n, this.lineEnd), r = this.nodes[this.nodes.length - 1];
      r instanceof Zi ? r.length += i - this.pos : (i > this.pos || !this.isCovered) && this.nodes.push(new Zi(i - this.pos, -1)), this.writtenTo = i, n > i && (this.nodes.push(null), this.writtenTo++, this.lineStart = -1);
    }
    this.pos = n;
  }
  point(e, n, i) {
    if (e < n || i.heightRelevant) {
      let r = i.widget ? i.widget.estimatedHeight : 0;
      r < 0 && (r = this.oracle.lineHeight);
      let s = n - e;
      i.block ? this.addBlock(new oE(s, r, i.type)) : (s || r >= xq) && this.addLineDeco(r, s);
    } else
      n > e && this.span(e, n);
    this.lineEnd > -1 && this.lineEnd < this.pos && (this.lineEnd = this.oracle.doc.lineAt(this.pos).to);
  }
  enterLine() {
    if (this.lineStart > -1)
      return;
    let { from: e, to: n } = this.oracle.doc.lineAt(this.pos);
    this.lineStart = e, this.lineEnd = n, this.writtenTo < e && ((this.writtenTo < e - 1 || this.nodes[this.nodes.length - 1] == null) && this.nodes.push(this.blankContent(this.writtenTo, e - 1)), this.nodes.push(null)), this.pos > e && this.nodes.push(new Zi(this.pos - e, -1)), this.writtenTo = this.pos;
  }
  blankContent(e, n) {
    let i = new wi(n - e);
    return this.oracle.doc.lineAt(e).to == n && (i.flags |= 4), i;
  }
  ensureLine() {
    this.enterLine();
    let e = this.nodes.length ? this.nodes[this.nodes.length - 1] : null;
    if (e instanceof Zi)
      return e;
    let n = new Zi(0, -1);
    return this.nodes.push(n), n;
  }
  addBlock(e) {
    this.enterLine(), e.type == ln.WidgetAfter && !this.isCovered && this.ensureLine(), this.nodes.push(e), this.writtenTo = this.pos = this.pos + e.length, e.type != ln.WidgetBefore && (this.covering = e);
  }
  addLineDeco(e, n) {
    let i = this.ensureLine();
    i.length += n, i.collapsed += n, i.widgetHeight = Math.max(i.widgetHeight, e), this.writtenTo = this.pos = this.pos + n;
  }
  finish(e) {
    let n = this.nodes.length == 0 ? null : this.nodes[this.nodes.length - 1];
    this.lineStart > -1 && !(n instanceof Zi) && !this.isCovered ? this.nodes.push(new Zi(0, -1)) : (this.writtenTo < this.pos || n == null) && this.nodes.push(this.blankContent(this.writtenTo, this.pos));
    let i = e;
    for (let r of this.nodes)
      r instanceof Zi && r.updateHeight(this.oracle, i), i += r ? r.length : 1;
    return this.nodes;
  }
  static build(e, n, i, r) {
    let s = new Eb(i, e);
    return Vt.spans(n, i, r, s, 0), s.finish(i);
  }
}
function Fq(t, e, n) {
  let i = new zq();
  return Vt.compare(t, e, n, i, 0), i.changes;
}
class zq {
  constructor() {
    this.changes = [];
  }
  compareRange() {
  }
  comparePoint(e, n, i, r) {
    (e < n || i && i.heightRelevant || r && r.heightRelevant) && A1(e, n, this.changes, 5);
  }
}
function Vq(t, e) {
  let n = t.getBoundingClientRect(), i = t.ownerDocument, r = i.defaultView || window, s = Math.max(0, n.left), o = Math.min(r.innerWidth, n.right), l = Math.max(0, n.top), a = Math.min(r.innerHeight, n.bottom);
  for (let c = t.parentNode; c && c != i.body; )
    if (c.nodeType == 1) {
      let u = c, f = window.getComputedStyle(u);
      if ((u.scrollHeight > u.clientHeight || u.scrollWidth > u.clientWidth) && f.overflow != "visible") {
        let h = u.getBoundingClientRect();
        s = Math.max(s, h.left), o = Math.min(o, h.right), l = Math.max(l, h.top), a = c == t.parentNode ? h.bottom : Math.min(a, h.bottom);
      }
      c = f.position == "absolute" || f.position == "fixed" ? u.offsetParent : u.parentNode;
    } else if (c.nodeType == 11)
      c = c.host;
    else
      break;
  return {
    left: s - n.left,
    right: Math.max(s, o) - n.left,
    top: l - (n.top + e),
    bottom: Math.max(l, a) - (n.top + e)
  };
}
function Uq(t, e) {
  let n = t.getBoundingClientRect();
  return {
    left: 0,
    right: n.right - n.left,
    top: e,
    bottom: n.bottom - (n.top + e)
  };
}
class qg {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.size = i;
  }
  static same(e, n) {
    if (e.length != n.length)
      return !1;
    for (let i = 0; i < e.length; i++) {
      let r = e[i], s = n[i];
      if (r.from != s.from || r.to != s.to || r.size != s.size)
        return !1;
    }
    return !0;
  }
  draw(e) {
    return ft.replace({ widget: new Hq(this.size, e) }).range(this.from, this.to);
  }
}
class Hq extends Zo {
  constructor(e, n) {
    super(), this.size = e, this.vertical = n;
  }
  eq(e) {
    return e.size == this.size && e.vertical == this.vertical;
  }
  toDOM() {
    let e = document.createElement("div");
    return this.vertical ? e.style.height = this.size + "px" : (e.style.width = this.size + "px", e.style.height = "2px", e.style.display = "inline-block"), e;
  }
  get estimatedHeight() {
    return this.vertical ? this.size : -1;
  }
}
class Fk {
  constructor(e) {
    this.state = e, this.pixelViewport = { left: 0, right: window.innerWidth, top: 0, bottom: 0 }, this.inView = !0, this.paddingTop = 0, this.paddingBottom = 0, this.contentDOMWidth = 0, this.contentDOMHeight = 0, this.editorHeight = 0, this.editorWidth = 0, this.scaler = zk, this.scrollTarget = null, this.printing = !1, this.mustMeasureContent = !0, this.defaultTextDirection = Mn.LTR, this.visibleRanges = [], this.mustEnforceCursorAssoc = !1;
    let n = e.facet(Sb).some((i) => typeof i != "function" && i.class == "cm-lineWrapping");
    this.heightOracle = new Lq(n), this.stateDeco = e.facet(gu).filter((i) => typeof i != "function"), this.heightMap = xi.empty().applyChanges(this.stateDeco, zt.empty, this.heightOracle.setDoc(e.doc), [new ps(0, 0, 0, e.doc.length)]), this.viewport = this.getViewport(0, null), this.updateViewportLines(), this.updateForViewport(), this.lineGaps = this.ensureLineGaps([]), this.lineGapDeco = ft.set(this.lineGaps.map((i) => i.draw(!1))), this.computeVisibleRanges();
  }
  updateForViewport() {
    let e = [this.viewport], { main: n } = this.state.selection;
    for (let i = 0; i <= 1; i++) {
      let r = i ? n.head : n.anchor;
      if (!e.some(({ from: s, to: o }) => r >= s && r <= o)) {
        let { from: s, to: o } = this.lineBlockAt(r);
        e.push(new Nf(s, o));
      }
    }
    this.viewports = e.sort((i, r) => i.from - r.from), this.scaler = this.heightMap.height <= 7e6 ? zk : new Jq(this.heightOracle.doc, this.heightMap, this.viewports);
  }
  updateViewportLines() {
    this.viewportLines = [], this.heightMap.forEachLine(this.viewport.from, this.viewport.to, this.state.doc, 0, 0, (e) => {
      this.viewportLines.push(this.scaler.scale == 1 ? e : Tc(e, this.scaler));
    });
  }
  update(e, n = null) {
    this.state = e.state;
    let i = this.stateDeco;
    this.stateDeco = this.state.facet(gu).filter((c) => typeof c != "function");
    let r = e.changedRanges, s = ps.extendWithRanges(r, Fq(i, this.stateDeco, e ? e.changes : ti.empty(this.state.doc.length))), o = this.heightMap.height;
    this.heightMap = this.heightMap.applyChanges(this.stateDeco, e.startState.doc, this.heightOracle.setDoc(this.state.doc), s), this.heightMap.height != o && (e.flags |= 2);
    let l = s.length ? this.mapViewport(this.viewport, e.changes) : this.viewport;
    (n && (n.range.head < l.from || n.range.head > l.to) || !this.viewportIsAppropriate(l)) && (l = this.getViewport(0, n));
    let a = !e.changes.empty || e.flags & 2 || l.from != this.viewport.from || l.to != this.viewport.to;
    this.viewport = l, this.updateForViewport(), a && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps, e.changes))), e.flags |= this.computeVisibleRanges(), n && (this.scrollTarget = n), !this.mustEnforceCursorAssoc && e.selectionSet && e.view.lineWrapping && e.state.selection.main.empty && e.state.selection.main.assoc && !e.state.facet(U8) && (this.mustEnforceCursorAssoc = !0);
  }
  measure(e) {
    let n = e.contentDOM, i = window.getComputedStyle(n), r = this.heightOracle, s = i.whiteSpace;
    this.defaultTextDirection = i.direction == "rtl" ? Mn.RTL : Mn.LTR;
    let o = this.heightOracle.mustRefreshForWrapping(s), l = o || this.mustMeasureContent || this.contentDOMHeight != n.clientHeight;
    this.contentDOMHeight = n.clientHeight, this.mustMeasureContent = !1;
    let a = 0, c = 0, u = parseInt(i.paddingTop) || 0, f = parseInt(i.paddingBottom) || 0;
    (this.paddingTop != u || this.paddingBottom != f) && (this.paddingTop = u, this.paddingBottom = f, a |= 10), this.editorWidth != e.scrollDOM.clientWidth && (r.lineWrapping && (l = !0), this.editorWidth = e.scrollDOM.clientWidth, a |= 8);
    let h = (this.printing ? Uq : Vq)(n, this.paddingTop), d = h.top - this.pixelViewport.top, p = h.bottom - this.pixelViewport.bottom;
    this.pixelViewport = h;
    let g = this.pixelViewport.bottom > this.pixelViewport.top && this.pixelViewport.right > this.pixelViewport.left;
    if (g != this.inView && (this.inView = g, g && (l = !0)), !this.inView && !this.scrollTarget)
      return 0;
    let m = n.clientWidth;
    if ((this.contentDOMWidth != m || this.editorHeight != e.scrollDOM.clientHeight) && (this.contentDOMWidth = m, this.editorHeight = e.scrollDOM.clientHeight, a |= 8), l) {
      let S = e.docView.measureVisibleLineHeights(this.viewport);
      if (r.mustRefreshForHeights(S) && (o = !0), o || r.lineWrapping && Math.abs(m - this.contentDOMWidth) > r.charWidth) {
        let { lineHeight: v, charWidth: k } = e.docView.measureTextSize();
        o = v > 0 && r.refresh(s, v, k, m / k, S), o && (e.docView.minWidth = 0, a |= 8);
      }
      d > 0 && p > 0 ? c = Math.max(d, p) : d < 0 && p < 0 && (c = Math.min(d, p)), r.heightChanged = !1;
      for (let v of this.viewports) {
        let k = v.from == this.viewport.from ? S : e.docView.measureVisibleLineHeights(v);
        this.heightMap = (o ? xi.empty().applyChanges(this.stateDeco, zt.empty, this.heightOracle, [new ps(0, 0, 0, e.state.doc.length)]) : this.heightMap).updateHeight(r, 0, o, new jq(v.from, k));
      }
      r.heightChanged && (a |= 2);
    }
    let _ = !this.viewportIsAppropriate(this.viewport, c) || this.scrollTarget && (this.scrollTarget.range.head < this.viewport.from || this.scrollTarget.range.head > this.viewport.to);
    return _ && (this.viewport = this.getViewport(c, this.scrollTarget)), this.updateForViewport(), (a & 2 || _) && this.updateViewportLines(), (this.lineGaps.length || this.viewport.to - this.viewport.from > 2e3 << 1) && this.updateLineGaps(this.ensureLineGaps(o ? [] : this.lineGaps, e)), a |= this.computeVisibleRanges(), this.mustEnforceCursorAssoc && (this.mustEnforceCursorAssoc = !1, e.docView.enforceCursorAssoc()), a;
  }
  get visibleTop() {
    return this.scaler.fromDOM(this.pixelViewport.top);
  }
  get visibleBottom() {
    return this.scaler.fromDOM(this.pixelViewport.bottom);
  }
  getViewport(e, n) {
    let i = 0.5 - Math.max(-0.5, Math.min(0.5, e / 1e3 / 2)), r = this.heightMap, s = this.state.doc, { visibleTop: o, visibleBottom: l } = this, a = new Nf(r.lineAt(o - i * 1e3, fn.ByHeight, s, 0, 0).from, r.lineAt(l + (1 - i) * 1e3, fn.ByHeight, s, 0, 0).to);
    if (n) {
      let { head: c } = n.range;
      if (c < a.from || c > a.to) {
        let u = Math.min(this.editorHeight, this.pixelViewport.bottom - this.pixelViewport.top), f = r.lineAt(c, fn.ByPos, s, 0, 0), h;
        n.y == "center" ? h = (f.top + f.bottom) / 2 - u / 2 : n.y == "start" || n.y == "nearest" && c < a.from ? h = f.top : h = f.bottom - u, a = new Nf(r.lineAt(h - 1e3 / 2, fn.ByHeight, s, 0, 0).from, r.lineAt(h + u + 1e3 / 2, fn.ByHeight, s, 0, 0).to);
      }
    }
    return a;
  }
  mapViewport(e, n) {
    let i = n.mapPos(e.from, -1), r = n.mapPos(e.to, 1);
    return new Nf(this.heightMap.lineAt(i, fn.ByPos, this.state.doc, 0, 0).from, this.heightMap.lineAt(r, fn.ByPos, this.state.doc, 0, 0).to);
  }
  viewportIsAppropriate({ from: e, to: n }, i = 0) {
    if (!this.inView)
      return !0;
    let { top: r } = this.heightMap.lineAt(e, fn.ByPos, this.state.doc, 0, 0), { bottom: s } = this.heightMap.lineAt(n, fn.ByPos, this.state.doc, 0, 0), { visibleTop: o, visibleBottom: l } = this;
    return (e == 0 || r <= o - Math.max(10, Math.min(-i, 250))) && (n == this.state.doc.length || s >= l + Math.max(10, Math.min(i, 250))) && r > o - 2 * 1e3 && s < l + 2 * 1e3;
  }
  mapLineGaps(e, n) {
    if (!e.length || n.empty)
      return e;
    let i = [];
    for (let r of e)
      n.touchesRange(r.from, r.to) || i.push(new qg(n.mapPos(r.from), n.mapPos(r.to), r.size));
    return i;
  }
  ensureLineGaps(e, n) {
    let i = this.heightOracle.lineWrapping, r = i ? 1e4 : 2e3, s = r >> 1, o = r << 1;
    if (this.defaultTextDirection != Mn.LTR && !i)
      return [];
    let l = [], a = (c, u, f, h) => {
      if (u - c < s)
        return;
      let d = this.state.selection.main, p = [d.from];
      d.empty || p.push(d.to);
      for (let m of p)
        if (m > c && m < u) {
          a(c, m - 10, f, h), a(m + 10, u, f, h);
          return;
        }
      let g = qq(e, (m) => m.from >= f.from && m.to <= f.to && Math.abs(m.from - c) < s && Math.abs(m.to - u) < s && !p.some((_) => m.from < _ && m.to > _));
      if (!g) {
        if (u < f.to && n && i && n.visibleRanges.some((m) => m.from <= u && m.to >= u)) {
          let m = n.moveToLineBoundary(Re.cursor(u), !1, !0).head;
          m > c && (u = m);
        }
        g = new qg(c, u, this.gapSize(f, c, u, h));
      }
      l.push(g);
    };
    for (let c of this.viewportLines) {
      if (c.length < o)
        continue;
      let u = Wq(c.from, c.to, this.stateDeco);
      if (u.total < o)
        continue;
      let f = this.scrollTarget ? this.scrollTarget.range.head : null, h, d;
      if (i) {
        let p = r / this.heightOracle.lineLength * this.heightOracle.lineHeight, g, m;
        if (f != null) {
          let _ = jf(u, f), S = ((this.visibleBottom - this.visibleTop) / 2 + p) / c.height;
          g = _ - S, m = _ + S;
        } else
          g = (this.visibleTop - c.top - p) / c.height, m = (this.visibleBottom - c.top + p) / c.height;
        h = Lf(u, g), d = Lf(u, m);
      } else {
        let p = u.total * this.heightOracle.charWidth, g = r * this.heightOracle.charWidth, m, _;
        if (f != null) {
          let S = jf(u, f), v = ((this.pixelViewport.right - this.pixelViewport.left) / 2 + g) / p;
          m = S - v, _ = S + v;
        } else
          m = (this.pixelViewport.left - g) / p, _ = (this.pixelViewport.right + g) / p;
        h = Lf(u, m), d = Lf(u, _);
      }
      h > c.from && a(c.from, h, c, u), d < c.to && a(d, c.to, c, u);
    }
    return l;
  }
  gapSize(e, n, i, r) {
    let s = jf(r, i) - jf(r, n);
    return this.heightOracle.lineWrapping ? e.height * s : r.total * this.heightOracle.charWidth * s;
  }
  updateLineGaps(e) {
    qg.same(e, this.lineGaps) || (this.lineGaps = e, this.lineGapDeco = ft.set(e.map((n) => n.draw(this.heightOracle.lineWrapping))));
  }
  computeVisibleRanges() {
    let e = this.stateDeco;
    this.lineGaps.length && (e = e.concat(this.lineGapDeco));
    let n = [];
    Vt.spans(e, this.viewport.from, this.viewport.to, {
      span(r, s) {
        n.push({ from: r, to: s });
      },
      point() {
      }
    }, 20);
    let i = n.length != this.visibleRanges.length || this.visibleRanges.some((r, s) => r.from != n[s].from || r.to != n[s].to);
    return this.visibleRanges = n, i ? 4 : 0;
  }
  lineBlockAt(e) {
    return e >= this.viewport.from && e <= this.viewport.to && this.viewportLines.find((n) => n.from <= e && n.to >= e) || Tc(this.heightMap.lineAt(e, fn.ByPos, this.state.doc, 0, 0), this.scaler);
  }
  lineBlockAtHeight(e) {
    return Tc(this.heightMap.lineAt(this.scaler.fromDOM(e), fn.ByHeight, this.state.doc, 0, 0), this.scaler);
  }
  elementAtHeight(e) {
    return Tc(this.heightMap.blockAt(this.scaler.fromDOM(e), this.state.doc, 0, 0), this.scaler);
  }
  get docHeight() {
    return this.scaler.toDOM(this.heightMap.height);
  }
  get contentHeight() {
    return this.docHeight + this.paddingTop + this.paddingBottom;
  }
}
class Nf {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
function Wq(t, e, n) {
  let i = [], r = t, s = 0;
  return Vt.spans(n, t, e, {
    span() {
    },
    point(o, l) {
      o > r && (i.push({ from: r, to: o }), s += o - r), r = l;
    }
  }, 20), r < e && (i.push({ from: r, to: e }), s += e - r), { total: s, ranges: i };
}
function Lf({ total: t, ranges: e }, n) {
  if (n <= 0)
    return e[0].from;
  if (n >= 1)
    return e[e.length - 1].to;
  let i = Math.floor(t * n);
  for (let r = 0; ; r++) {
    let { from: s, to: o } = e[r], l = o - s;
    if (i <= l)
      return s + i;
    i -= l;
  }
}
function jf(t, e) {
  let n = 0;
  for (let { from: i, to: r } of t.ranges) {
    if (e <= r) {
      n += e - i;
      break;
    }
    n += r - i;
  }
  return n / t.total;
}
function qq(t, e) {
  for (let n of t)
    if (e(n))
      return n;
}
const zk = {
  toDOM(t) {
    return t;
  },
  fromDOM(t) {
    return t;
  },
  scale: 1
};
class Jq {
  constructor(e, n, i) {
    let r = 0, s = 0, o = 0;
    this.viewports = i.map(({ from: l, to: a }) => {
      let c = n.lineAt(l, fn.ByPos, e, 0, 0).top, u = n.lineAt(a, fn.ByPos, e, 0, 0).bottom;
      return r += u - c, { from: l, to: a, top: c, bottom: u, domTop: 0, domBottom: 0 };
    }), this.scale = (7e6 - r) / (n.height - r);
    for (let l of this.viewports)
      l.domTop = o + (l.top - s) * this.scale, o = l.domBottom = l.domTop + (l.bottom - l.top), s = l.bottom;
  }
  toDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let s = n < this.viewports.length ? this.viewports[n] : null;
      if (!s || e < s.top)
        return r + (e - i) * this.scale;
      if (e <= s.bottom)
        return s.domTop + (e - s.top);
      i = s.bottom, r = s.domBottom;
    }
  }
  fromDOM(e) {
    for (let n = 0, i = 0, r = 0; ; n++) {
      let s = n < this.viewports.length ? this.viewports[n] : null;
      if (!s || e < s.domTop)
        return i + (e - r) / this.scale;
      if (e <= s.domBottom)
        return s.top + (e - s.domTop);
      i = s.bottom, r = s.domBottom;
    }
  }
}
function Tc(t, e) {
  if (e.scale == 1)
    return t;
  let n = e.toDOM(t.top), i = e.toDOM(t.bottom);
  return new Eo(t.from, t.length, n, i - n, Array.isArray(t.type) ? t.type.map((r) => Tc(r, e)) : t.type);
}
const Bf = /* @__PURE__ */ et.define({ combine: (t) => t.join(" ") }), D1 = /* @__PURE__ */ et.define({ combine: (t) => t.indexOf(!0) > -1 }), N1 = /* @__PURE__ */ zo.newName(), lE = /* @__PURE__ */ zo.newName(), aE = /* @__PURE__ */ zo.newName(), cE = { "&light": "." + lE, "&dark": "." + aE };
function L1(t, e, n) {
  return new zo(e, {
    finish(i) {
      return /&/.test(i) ? i.replace(/&\w*/, (r) => {
        if (r == "&")
          return t;
        if (!n || !n[r])
          throw new RangeError(`Unsupported selector: ${r}`);
        return n[r];
      }) : t + " " + i;
    }
  });
}
const Kq = /* @__PURE__ */ L1("." + N1, {
  "&.cm-editor": {
    position: "relative !important",
    boxSizing: "border-box",
    "&.cm-focused": {
      outline: "1px dotted #212121"
    },
    display: "flex !important",
    flexDirection: "column"
  },
  ".cm-scroller": {
    display: "flex !important",
    alignItems: "flex-start !important",
    fontFamily: "monospace",
    lineHeight: 1.4,
    height: "100%",
    overflowX: "auto",
    position: "relative",
    zIndex: 0
  },
  ".cm-content": {
    margin: 0,
    flexGrow: 2,
    flexShrink: 0,
    display: "block",
    whiteSpace: "pre",
    wordWrap: "normal",
    boxSizing: "border-box",
    padding: "4px 0",
    outline: "none",
    "&[contenteditable=true]": {
      WebkitUserModify: "read-write-plaintext-only"
    }
  },
  ".cm-lineWrapping": {
    whiteSpace_fallback: "pre-wrap",
    whiteSpace: "break-spaces",
    wordBreak: "break-word",
    overflowWrap: "anywhere",
    flexShrink: 1
  },
  "&light .cm-content": { caretColor: "black" },
  "&dark .cm-content": { caretColor: "white" },
  ".cm-line": {
    display: "block",
    padding: "0 2px 0 6px"
  },
  ".cm-layer": {
    contain: "size style",
    "& > *": {
      position: "absolute"
    }
  },
  "&light .cm-selectionBackground": {
    background: "#d9d9d9"
  },
  "&dark .cm-selectionBackground": {
    background: "#222"
  },
  "&light.cm-focused .cm-selectionBackground": {
    background: "#d7d4f0"
  },
  "&dark.cm-focused .cm-selectionBackground": {
    background: "#233"
  },
  ".cm-cursorLayer": {
    pointerEvents: "none"
  },
  "&.cm-focused .cm-cursorLayer": {
    animation: "steps(1) cm-blink 1.2s infinite"
  },
  "@keyframes cm-blink": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  "@keyframes cm-blink2": { "0%": {}, "50%": { opacity: 0 }, "100%": {} },
  ".cm-cursor, .cm-dropCursor": {
    borderLeft: "1.2px solid black",
    marginLeft: "-0.6px",
    pointerEvents: "none"
  },
  ".cm-cursor": {
    display: "none"
  },
  "&dark .cm-cursor": {
    borderLeftColor: "#444"
  },
  "&.cm-focused .cm-cursor": {
    display: "block"
  },
  "&light .cm-activeLine": { backgroundColor: "#cceeff44" },
  "&dark .cm-activeLine": { backgroundColor: "#99eeff33" },
  "&light .cm-specialChar": { color: "red" },
  "&dark .cm-specialChar": { color: "#f78" },
  ".cm-gutters": {
    flexShrink: 0,
    display: "flex",
    height: "100%",
    boxSizing: "border-box",
    left: 0,
    zIndex: 200
  },
  "&light .cm-gutters": {
    backgroundColor: "#f5f5f5",
    color: "#6c6c6c",
    borderRight: "1px solid #ddd"
  },
  "&dark .cm-gutters": {
    backgroundColor: "#333338",
    color: "#ccc"
  },
  ".cm-gutter": {
    display: "flex !important",
    flexDirection: "column",
    flexShrink: 0,
    boxSizing: "border-box",
    minHeight: "100%",
    overflow: "hidden"
  },
  ".cm-gutterElement": {
    boxSizing: "border-box"
  },
  ".cm-lineNumbers .cm-gutterElement": {
    padding: "0 3px 0 5px",
    minWidth: "20px",
    textAlign: "right",
    whiteSpace: "nowrap"
  },
  "&light .cm-activeLineGutter": {
    backgroundColor: "#e2f2ff"
  },
  "&dark .cm-activeLineGutter": {
    backgroundColor: "#222227"
  },
  ".cm-panels": {
    boxSizing: "border-box",
    position: "sticky",
    left: 0,
    right: 0
  },
  "&light .cm-panels": {
    backgroundColor: "#f5f5f5",
    color: "black"
  },
  "&light .cm-panels-top": {
    borderBottom: "1px solid #ddd"
  },
  "&light .cm-panels-bottom": {
    borderTop: "1px solid #ddd"
  },
  "&dark .cm-panels": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tab": {
    display: "inline-block",
    overflow: "hidden",
    verticalAlign: "bottom"
  },
  ".cm-widgetBuffer": {
    verticalAlign: "text-top",
    height: "1em",
    width: 0,
    display: "inline"
  },
  ".cm-placeholder": {
    color: "#888",
    display: "inline-block",
    verticalAlign: "top"
  },
  ".cm-highlightSpace:before": {
    content: "attr(data-display)",
    position: "absolute",
    pointerEvents: "none",
    color: "#888"
  },
  ".cm-highlightTab": {
    backgroundImage: `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,
    backgroundSize: "auto 100%",
    backgroundPosition: "right 90%",
    backgroundRepeat: "no-repeat"
  },
  ".cm-trailingSpace": {
    backgroundColor: "#ff332255"
  },
  ".cm-button": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    padding: ".2em 1em",
    borderRadius: "1px"
  },
  "&light .cm-button": {
    backgroundImage: "linear-gradient(#eff1f5, #d9d9df)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#b4b4b4, #d0d3d6)"
    }
  },
  "&dark .cm-button": {
    backgroundImage: "linear-gradient(#393939, #111)",
    border: "1px solid #888",
    "&:active": {
      backgroundImage: "linear-gradient(#111, #333)"
    }
  },
  ".cm-textfield": {
    verticalAlign: "middle",
    color: "inherit",
    fontSize: "70%",
    border: "1px solid silver",
    padding: ".2em .5em"
  },
  "&light .cm-textfield": {
    backgroundColor: "white"
  },
  "&dark .cm-textfield": {
    border: "1px solid #555",
    backgroundColor: "inherit"
  }
}, cE);
class Gq {
  constructor(e, n, i, r) {
    this.typeOver = r, this.bounds = null, this.text = "";
    let { impreciseHead: s, impreciseAnchor: o } = e.docView;
    if (e.state.readOnly && n > -1)
      this.newSel = null;
    else if (n > -1 && (this.bounds = e.docView.domBoundsAround(n, i, 0))) {
      let l = s || o ? [] : Xq(e), a = new Y8(l, e.state);
      a.readRange(this.bounds.startDOM, this.bounds.endDOM), this.text = a.text, this.newSel = Qq(l, this.bounds.from);
    } else {
      let l = e.observer.selectionRange, a = s && s.node == l.focusNode && s.offset == l.focusOffset || !xa(e.contentDOM, l.focusNode) ? e.state.selection.main.head : e.docView.posFromDOM(l.focusNode, l.focusOffset), c = o && o.node == l.anchorNode && o.offset == l.anchorOffset || !xa(e.contentDOM, l.anchorNode) ? e.state.selection.main.anchor : e.docView.posFromDOM(l.anchorNode, l.anchorOffset);
      this.newSel = Re.single(c, a);
    }
  }
}
function uE(t, e) {
  let n, { newSel: i } = e, r = t.state.selection.main;
  if (e.bounds) {
    let { from: s, to: o } = e.bounds, l = r.from, a = null;
    (t.inputState.lastKeyCode === 8 && t.inputState.lastKeyTime > Date.now() - 100 || tt.android && e.text.length < o - s) && (l = r.to, a = "end");
    let c = Yq(t.state.doc.sliceString(s, o, So), e.text, l - s, a);
    c && (tt.chrome && t.inputState.lastKeyCode == 13 && c.toB == c.from + 2 && e.text.slice(c.from, c.toB) == So + So && c.toB--, n = {
      from: s + c.from,
      to: s + c.toA,
      insert: zt.of(e.text.slice(c.from, c.toB).split(So))
    });
  } else
    i && (!t.hasFocus || !t.state.facet(Lp) || i.main.eq(r)) && (i = null);
  if (!n && !i)
    return !1;
  if (!n && e.typeOver && !r.empty && i && i.main.empty ? n = { from: r.from, to: r.to, insert: t.state.doc.slice(r.from, r.to) } : n && n.from >= r.from && n.to <= r.to && (n.from != r.from || n.to != r.to) && r.to - r.from - (n.to - n.from) <= 4 ? n = {
    from: r.from,
    to: r.to,
    insert: t.state.doc.slice(r.from, n.from).append(n.insert).append(t.state.doc.slice(n.to, r.to))
  } : (tt.mac || tt.android) && n && n.from == n.to && n.from == r.head - 1 && /^\. ?$/.test(n.insert.toString()) ? (i && n.insert.length == 2 && (i = Re.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: zt.of([" "]) }) : tt.chrome && n && n.from == n.to && n.from == r.head && n.insert.toString() == `
 ` && t.lineWrapping && (i && (i = Re.single(i.main.anchor - 1, i.main.head - 1)), n = { from: r.from, to: r.to, insert: zt.of([" "]) }), n) {
    let s = t.state;
    if (tt.ios && t.inputState.flushIOSKey(t) || tt.android && (n.from == r.from && n.to == r.to && n.insert.length == 1 && n.insert.lines == 2 && _a(t.contentDOM, "Enter", 13) || n.from == r.from - 1 && n.to == r.to && n.insert.length == 0 && _a(t.contentDOM, "Backspace", 8) || n.from == r.from && n.to == r.to + 1 && n.insert.length == 0 && _a(t.contentDOM, "Delete", 46)))
      return !0;
    let o = n.insert.toString();
    if (t.state.facet(z8).some((c) => c(t, n.from, n.to, o)))
      return !0;
    t.inputState.composing >= 0 && t.inputState.composing++;
    let l;
    if (n.from >= r.from && n.to <= r.to && n.to - n.from >= (r.to - r.from) / 3 && (!i || i.main.empty && i.main.from == n.from + n.insert.length) && t.inputState.composing < 0) {
      let c = r.from < n.from ? s.sliceDoc(r.from, n.from) : "", u = r.to > n.to ? s.sliceDoc(n.to, r.to) : "";
      l = s.replaceSelection(t.state.toText(c + n.insert.sliceString(0, void 0, t.state.lineBreak) + u));
    } else {
      let c = s.changes(n), u = i && !s.selection.main.eq(i.main) && i.main.to <= c.newLength ? i.main : void 0;
      if (s.selection.ranges.length > 1 && t.inputState.composing >= 0 && n.to <= r.to && n.to >= r.to - 10) {
        let f = t.state.sliceDoc(n.from, n.to), h = X8(t) || t.state.doc.lineAt(r.head), d = r.to - n.to, p = r.to - r.from;
        l = s.changeByRange((g) => {
          if (g.from == r.from && g.to == r.to)
            return { changes: c, range: u || g.map(c) };
          let m = g.to - d, _ = m - f.length;
          if (g.to - g.from != p || t.state.sliceDoc(_, m) != f || h && g.to >= h.from && g.from <= h.to)
            return { range: g };
          let S = s.changes({ from: _, to: m, insert: n.insert }), v = g.to - r.to;
          return {
            changes: S,
            range: u ? Re.range(Math.max(0, u.anchor + v), Math.max(0, u.head + v)) : g.map(S)
          };
        });
      } else
        l = {
          changes: c,
          selection: u && s.selection.replaceRange(u)
        };
    }
    let a = "input.type";
    return t.composing && (a += ".compose", t.inputState.compositionFirstChange && (a += ".start", t.inputState.compositionFirstChange = !1)), t.dispatch(l, { scrollIntoView: !0, userEvent: a }), !0;
  } else if (i && !i.main.eq(r)) {
    let s = !1, o = "select";
    return t.inputState.lastSelectionTime > Date.now() - 50 && (t.inputState.lastSelectionOrigin == "select" && (s = !0), o = t.inputState.lastSelectionOrigin), t.dispatch({ selection: i, scrollIntoView: s, userEvent: o }), !0;
  } else
    return !1;
}
function Yq(t, e, n, i) {
  let r = Math.min(t.length, e.length), s = 0;
  for (; s < r && t.charCodeAt(s) == e.charCodeAt(s); )
    s++;
  if (s == r && t.length == e.length)
    return null;
  let o = t.length, l = e.length;
  for (; o > 0 && l > 0 && t.charCodeAt(o - 1) == e.charCodeAt(l - 1); )
    o--, l--;
  if (i == "end") {
    let a = Math.max(0, s - Math.min(o, l));
    n -= o + a - s;
  }
  if (o < s && t.length < e.length) {
    let a = n <= s && n >= o ? s - n : 0;
    s -= a, l = s + (l - o), o = s;
  } else if (l < s) {
    let a = n <= s && n >= l ? s - n : 0;
    s -= a, o = s + (o - l), l = s;
  }
  return { from: s, toA: o, toB: l };
}
function Xq(t) {
  let e = [];
  if (t.root.activeElement != t.contentDOM)
    return e;
  let { anchorNode: n, anchorOffset: i, focusNode: r, focusOffset: s } = t.observer.selectionRange;
  return n && (e.push(new vk(n, i)), (r != n || s != i) && e.push(new vk(r, s))), e;
}
function Qq(t, e) {
  if (t.length == 0)
    return null;
  let n = t[0].pos, i = t.length == 2 ? t[1].pos : n;
  return n > -1 && i > -1 ? Re.single(n + e, i + e) : null;
}
const Zq = {
  childList: !0,
  characterData: !0,
  subtree: !0,
  attributes: !0,
  characterDataOldValue: !0
}, Jg = tt.ie && tt.ie_version <= 11;
class $q {
  constructor(e) {
    this.view = e, this.active = !1, this.selectionRange = new JW(), this.selectionChanged = !1, this.delayedFlush = -1, this.resizeTimeout = -1, this.queue = [], this.delayedAndroidKey = null, this.flushingAndroidKey = -1, this.lastChange = 0, this.scrollTargets = [], this.intersection = null, this.resizeScroll = null, this.resizeContent = null, this.intersecting = !1, this.gapIntersection = null, this.gaps = [], this.parentCheck = -1, this.dom = e.contentDOM, this.observer = new MutationObserver((n) => {
      for (let i of n)
        this.queue.push(i);
      (tt.ie && tt.ie_version <= 11 || tt.ios && e.composing) && n.some((i) => i.type == "childList" && i.removedNodes.length || i.type == "characterData" && i.oldValue.length > i.target.nodeValue.length) ? this.flushSoon() : this.flush();
    }), Jg && (this.onCharData = (n) => {
      this.queue.push({
        target: n.target,
        type: "characterData",
        oldValue: n.prevValue
      }), this.flushSoon();
    }), this.onSelectionChange = this.onSelectionChange.bind(this), this.onResize = this.onResize.bind(this), this.onPrint = this.onPrint.bind(this), this.onScroll = this.onScroll.bind(this), typeof ResizeObserver == "function" && (this.resizeScroll = new ResizeObserver(() => {
      var n;
      ((n = this.view.docView) === null || n === void 0 ? void 0 : n.lastUpdate) < Date.now() - 75 && this.onResize();
    }), this.resizeScroll.observe(e.scrollDOM), this.resizeContent = new ResizeObserver(() => this.view.requestMeasure()), this.resizeContent.observe(e.contentDOM)), this.addWindowListeners(this.win = e.win), this.start(), typeof IntersectionObserver == "function" && (this.intersection = new IntersectionObserver((n) => {
      this.parentCheck < 0 && (this.parentCheck = setTimeout(this.listenForScroll.bind(this), 1e3)), n.length > 0 && n[n.length - 1].intersectionRatio > 0 != this.intersecting && (this.intersecting = !this.intersecting, this.intersecting != this.view.inView && this.onScrollChanged(document.createEvent("Event")));
    }, {}), this.intersection.observe(this.dom), this.gapIntersection = new IntersectionObserver((n) => {
      n.length > 0 && n[n.length - 1].intersectionRatio > 0 && this.onScrollChanged(document.createEvent("Event"));
    }, {})), this.listenForScroll(), this.readSelectionRange();
  }
  onScrollChanged(e) {
    this.view.inputState.runScrollHandlers(this.view, e), this.intersecting && this.view.measure();
  }
  onScroll(e) {
    this.intersecting && this.flush(!1), this.onScrollChanged(e);
  }
  onResize() {
    this.resizeTimeout < 0 && (this.resizeTimeout = setTimeout(() => {
      this.resizeTimeout = -1, this.view.requestMeasure();
    }, 50));
  }
  onPrint() {
    this.view.viewState.printing = !0, this.view.measure(), setTimeout(() => {
      this.view.viewState.printing = !1, this.view.requestMeasure();
    }, 500);
  }
  updateGaps(e) {
    if (this.gapIntersection && (e.length != this.gaps.length || this.gaps.some((n, i) => n != e[i]))) {
      this.gapIntersection.disconnect();
      for (let n of e)
        this.gapIntersection.observe(n);
      this.gaps = e;
    }
  }
  onSelectionChange(e) {
    let n = this.selectionChanged;
    if (!this.readSelectionRange() || this.delayedAndroidKey)
      return;
    let { view: i } = this, r = this.selectionRange;
    if (i.state.facet(Lp) ? i.root.activeElement != this.dom : !bh(i.dom, r))
      return;
    let s = r.anchorNode && i.docView.nearest(r.anchorNode);
    if (s && s.ignoreEvent(e)) {
      n || (this.selectionChanged = !1);
      return;
    }
    (tt.ie && tt.ie_version <= 11 || tt.android && tt.chrome) && !i.state.selection.main.empty && r.focusNode && ld(r.focusNode, r.focusOffset, r.anchorNode, r.anchorOffset) ? this.flushSoon() : this.flush(!1);
  }
  readSelectionRange() {
    let { view: e } = this, n = tt.safari && e.root.nodeType == 11 && UW(this.dom.ownerDocument) == this.dom && eJ(this.view) || od(e.root);
    if (!n || this.selectionRange.eq(n))
      return !1;
    let i = bh(this.dom, n);
    return i && !this.selectionChanged && e.inputState.lastFocusTime > Date.now() - 200 && e.inputState.lastTouchTime < Date.now() - 300 && GW(this.dom, n) ? (this.view.inputState.lastFocusTime = 0, e.docView.updateSelection(), !1) : (this.selectionRange.setRange(n), i && (this.selectionChanged = !0), !0);
  }
  setSelectionRange(e, n) {
    this.selectionRange.set(e.node, e.offset, n.node, n.offset), this.selectionChanged = !1;
  }
  clearSelectionRange() {
    this.selectionRange.set(null, 0, null, 0);
  }
  listenForScroll() {
    this.parentCheck = -1;
    let e = 0, n = null;
    for (let i = this.dom; i; )
      if (i.nodeType == 1)
        !n && e < this.scrollTargets.length && this.scrollTargets[e] == i ? e++ : n || (n = this.scrollTargets.slice(0, e)), n && n.push(i), i = i.assignedSlot || i.parentNode;
      else if (i.nodeType == 11)
        i = i.host;
      else
        break;
    if (e < this.scrollTargets.length && !n && (n = this.scrollTargets.slice(0, e)), n) {
      for (let i of this.scrollTargets)
        i.removeEventListener("scroll", this.onScroll);
      for (let i of this.scrollTargets = n)
        i.addEventListener("scroll", this.onScroll);
    }
  }
  ignore(e) {
    if (!this.active)
      return e();
    try {
      return this.stop(), e();
    } finally {
      this.start(), this.clear();
    }
  }
  start() {
    this.active || (this.observer.observe(this.dom, Zq), Jg && this.dom.addEventListener("DOMCharacterDataModified", this.onCharData), this.active = !0);
  }
  stop() {
    this.active && (this.active = !1, this.observer.disconnect(), Jg && this.dom.removeEventListener("DOMCharacterDataModified", this.onCharData));
  }
  clear() {
    this.processRecords(), this.queue.length = 0, this.selectionChanged = !1;
  }
  delayAndroidKey(e, n) {
    var i;
    if (!this.delayedAndroidKey) {
      let r = () => {
        let s = this.delayedAndroidKey;
        s && (this.clearDelayedAndroidKey(), !this.flush() && s.force && _a(this.dom, s.key, s.keyCode));
      };
      this.flushingAndroidKey = this.view.win.requestAnimationFrame(r);
    }
    (!this.delayedAndroidKey || e == "Enter") && (this.delayedAndroidKey = {
      key: e,
      keyCode: n,
      force: this.lastChange < Date.now() - 50 || !!(!((i = this.delayedAndroidKey) === null || i === void 0) && i.force)
    });
  }
  clearDelayedAndroidKey() {
    this.win.cancelAnimationFrame(this.flushingAndroidKey), this.delayedAndroidKey = null, this.flushingAndroidKey = -1;
  }
  flushSoon() {
    this.delayedFlush < 0 && (this.delayedFlush = this.view.win.requestAnimationFrame(() => {
      this.delayedFlush = -1, this.flush();
    }));
  }
  forceFlush() {
    this.delayedFlush >= 0 && (this.view.win.cancelAnimationFrame(this.delayedFlush), this.delayedFlush = -1), this.flush();
  }
  processRecords() {
    let e = this.queue;
    for (let s of this.observer.takeRecords())
      e.push(s);
    e.length && (this.queue = []);
    let n = -1, i = -1, r = !1;
    for (let s of e) {
      let o = this.readMutation(s);
      o && (o.typeOver && (r = !0), n == -1 ? { from: n, to: i } = o : (n = Math.min(o.from, n), i = Math.max(o.to, i)));
    }
    return { from: n, to: i, typeOver: r };
  }
  readChange() {
    let { from: e, to: n, typeOver: i } = this.processRecords(), r = this.selectionChanged && bh(this.dom, this.selectionRange);
    return e < 0 && !r ? null : (e > -1 && (this.lastChange = Date.now()), this.view.inputState.lastFocusTime = 0, this.selectionChanged = !1, new Gq(this.view, e, n, i));
  }
  flush(e = !0) {
    if (this.delayedFlush >= 0 || this.delayedAndroidKey)
      return !1;
    e && this.readSelectionRange();
    let n = this.readChange();
    if (!n)
      return !1;
    let i = this.view.state, r = uE(this.view, n);
    return this.view.state == i && this.view.update([]), r;
  }
  readMutation(e) {
    let n = this.view.docView.nearest(e.target);
    if (!n || n.ignoreMutation(e))
      return null;
    if (n.markDirty(e.type == "attributes"), e.type == "attributes" && (n.dirty |= 4), e.type == "childList") {
      let i = Vk(n, e.previousSibling || e.target.previousSibling, -1), r = Vk(n, e.nextSibling || e.target.nextSibling, 1);
      return {
        from: i ? n.posAfter(i) : n.posAtStart,
        to: r ? n.posBefore(r) : n.posAtEnd,
        typeOver: !1
      };
    } else
      return e.type == "characterData" ? { from: n.posAtStart, to: n.posAtEnd, typeOver: e.target.nodeValue == e.oldValue } : null;
  }
  setWindow(e) {
    e != this.win && (this.removeWindowListeners(this.win), this.win = e, this.addWindowListeners(this.win));
  }
  addWindowListeners(e) {
    e.addEventListener("resize", this.onResize), e.addEventListener("beforeprint", this.onPrint), e.addEventListener("scroll", this.onScroll), e.document.addEventListener("selectionchange", this.onSelectionChange);
  }
  removeWindowListeners(e) {
    e.removeEventListener("scroll", this.onScroll), e.removeEventListener("resize", this.onResize), e.removeEventListener("beforeprint", this.onPrint), e.document.removeEventListener("selectionchange", this.onSelectionChange);
  }
  destroy() {
    var e, n, i, r;
    this.stop(), (e = this.intersection) === null || e === void 0 || e.disconnect(), (n = this.gapIntersection) === null || n === void 0 || n.disconnect(), (i = this.resizeScroll) === null || i === void 0 || i.disconnect(), (r = this.resizeContent) === null || r === void 0 || r.disconnect();
    for (let s of this.scrollTargets)
      s.removeEventListener("scroll", this.onScroll);
    this.removeWindowListeners(this.win), clearTimeout(this.parentCheck), clearTimeout(this.resizeTimeout), this.win.cancelAnimationFrame(this.delayedFlush), this.win.cancelAnimationFrame(this.flushingAndroidKey);
  }
}
function Vk(t, e, n) {
  for (; e; ) {
    let i = pn.get(e);
    if (i && i.parent == t)
      return i;
    let r = e.parentNode;
    e = r != t.dom ? r : n > 0 ? e.nextSibling : e.previousSibling;
  }
  return null;
}
function eJ(t) {
  let e = null;
  function n(a) {
    a.preventDefault(), a.stopImmediatePropagation(), e = a.getTargetRanges()[0];
  }
  if (t.contentDOM.addEventListener("beforeinput", n, !0), t.dom.ownerDocument.execCommand("indent"), t.contentDOM.removeEventListener("beforeinput", n, !0), !e)
    return null;
  let i = e.startContainer, r = e.startOffset, s = e.endContainer, o = e.endOffset, l = t.docView.domAtPos(t.state.selection.main.anchor);
  return ld(l.node, l.offset, s, o) && ([i, r, s, o] = [s, o, i, r]), { anchorNode: i, anchorOffset: r, focusNode: s, focusOffset: o };
}
class $e {
  constructor(e = {}) {
    this.plugins = [], this.pluginMap = /* @__PURE__ */ new Map(), this.editorAttrs = {}, this.contentAttrs = {}, this.bidiCache = [], this.destroyed = !1, this.updateState = 2, this.measureScheduled = -1, this.measureRequests = [], this.contentDOM = document.createElement("div"), this.scrollDOM = document.createElement("div"), this.scrollDOM.tabIndex = -1, this.scrollDOM.className = "cm-scroller", this.scrollDOM.appendChild(this.contentDOM), this.announceDOM = document.createElement("div"), this.announceDOM.style.cssText = "position: fixed; top: -10000px", this.announceDOM.setAttribute("aria-live", "polite"), this.dom = document.createElement("div"), this.dom.appendChild(this.announceDOM), this.dom.appendChild(this.scrollDOM), this._dispatch = e.dispatch || ((n) => this.update([n])), this.dispatch = this.dispatch.bind(this), this._root = e.root || KW(e.parent) || document, this.viewState = new Fk(e.state || Mt.create(e)), this.plugins = this.state.facet(Mc).map((n) => new Ug(n));
    for (let n of this.plugins)
      n.update(this);
    this.observer = new $q(this), this.inputState = new kq(this), this.inputState.ensureHandlers(this, this.plugins), this.docView = new kk(this), this.mountStyles(), this.updateAttrs(), this.updateState = 0, this.requestMeasure(), e.parent && e.parent.appendChild(this.dom);
  }
  get state() {
    return this.viewState.state;
  }
  get viewport() {
    return this.viewState.viewport;
  }
  get visibleRanges() {
    return this.viewState.visibleRanges;
  }
  get inView() {
    return this.viewState.inView;
  }
  get composing() {
    return this.inputState.composing > 0;
  }
  get compositionStarted() {
    return this.inputState.composing >= 0;
  }
  get root() {
    return this._root;
  }
  get win() {
    return this.dom.ownerDocument.defaultView || window;
  }
  dispatch(...e) {
    this._dispatch(e.length == 1 && e[0] instanceof di ? e[0] : this.state.update(...e));
  }
  update(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.update are not allowed while an update is in progress");
    let n = !1, i = !1, r, s = this.state;
    for (let c of e) {
      if (c.startState != s)
        throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");
      s = c.state;
    }
    if (this.destroyed) {
      this.viewState.state = s;
      return;
    }
    let o = this.observer.delayedAndroidKey, l = null;
    if (o ? (this.observer.clearDelayedAndroidKey(), l = this.observer.readChange(), (l && !this.state.doc.eq(s.doc) || !this.state.selection.eq(s.selection)) && (l = null)) : this.observer.clear(), s.facet(Mt.phrases) != this.state.facet(Mt.phrases))
      return this.setState(s);
    r = ud.create(this, s, e);
    let a = this.viewState.scrollTarget;
    try {
      this.updateState = 2;
      for (let c of e) {
        if (a && (a = a.map(c.changes)), c.scrollIntoView) {
          let { main: u } = c.state.selection;
          a = new cd(u.empty ? u : Re.cursor(u.head, u.head > u.anchor ? -1 : 1));
        }
        for (let u of c.effects)
          u.is(yk) && (a = u.value);
      }
      this.viewState.update(r, a), this.bidiCache = fd.update(this.bidiCache, r.changes), r.empty || (this.updatePlugins(r), this.inputState.update(r)), n = this.docView.update(r), this.state.facet(Oc) != this.styleModules && this.mountStyles(), i = this.updateAttrs(), this.showAnnouncements(e), this.docView.updateSelection(n, e.some((c) => c.isUserEvent("select.pointer")));
    } finally {
      this.updateState = 0;
    }
    if (r.startState.facet(Bf) != r.state.facet(Bf) && (this.viewState.mustMeasureContent = !0), (n || i || a || this.viewState.mustEnforceCursorAssoc || this.viewState.mustMeasureContent) && this.requestMeasure(), !r.empty)
      for (let c of this.state.facet(M1))
        c(r);
    l && !uE(this, l) && o.force && _a(this.contentDOM, o.key, o.keyCode);
  }
  setState(e) {
    if (this.updateState != 0)
      throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");
    if (this.destroyed) {
      this.viewState.state = e;
      return;
    }
    this.updateState = 2;
    let n = this.hasFocus;
    try {
      for (let i of this.plugins)
        i.destroy(this);
      this.viewState = new Fk(e), this.plugins = e.facet(Mc).map((i) => new Ug(i)), this.pluginMap.clear();
      for (let i of this.plugins)
        i.update(this);
      this.docView = new kk(this), this.inputState.ensureHandlers(this, this.plugins), this.mountStyles(), this.updateAttrs(), this.bidiCache = [];
    } finally {
      this.updateState = 0;
    }
    n && this.focus(), this.requestMeasure();
  }
  updatePlugins(e) {
    let n = e.startState.facet(Mc), i = e.state.facet(Mc);
    if (n != i) {
      let r = [];
      for (let s of i) {
        let o = n.indexOf(s);
        if (o < 0)
          r.push(new Ug(s));
        else {
          let l = this.plugins[o];
          l.mustUpdate = e, r.push(l);
        }
      }
      for (let s of this.plugins)
        s.mustUpdate != e && s.destroy(this);
      this.plugins = r, this.pluginMap.clear(), this.inputState.ensureHandlers(this, this.plugins);
    } else
      for (let r of this.plugins)
        r.mustUpdate = e;
    for (let r = 0; r < this.plugins.length; r++)
      this.plugins[r].update(this);
  }
  measure(e = !0) {
    if (this.destroyed)
      return;
    this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.measureScheduled = 0, e && this.observer.forceFlush();
    let n = null, { scrollHeight: i, scrollTop: r, clientHeight: s } = this.scrollDOM, o = r > i - s - 4 ? i : r;
    try {
      for (let l = 0; ; l++) {
        this.updateState = 1;
        let a = this.viewport, c = this.viewState.lineBlockAtHeight(o), u = this.viewState.measure(this);
        if (!u && !this.measureRequests.length && this.viewState.scrollTarget == null)
          break;
        if (l > 5) {
          console.warn(this.measureRequests.length ? "Measure loop restarted more than 5 times" : "Viewport failed to stabilize");
          break;
        }
        let f = [];
        u & 4 || ([this.measureRequests, f] = [f, this.measureRequests]);
        let h = f.map((m) => {
          try {
            return m.read(this);
          } catch (_) {
            return rr(this.state, _), Uk;
          }
        }), d = ud.create(this, this.state, []), p = !1, g = !1;
        d.flags |= u, n ? n.flags |= u : n = d, this.updateState = 2, d.empty || (this.updatePlugins(d), this.inputState.update(d), this.updateAttrs(), p = this.docView.update(d));
        for (let m = 0; m < f.length; m++)
          if (h[m] != Uk)
            try {
              let _ = f[m];
              _.write && _.write(h[m], this);
            } catch (_) {
              rr(this.state, _);
            }
        if (this.viewState.editorHeight)
          if (this.viewState.scrollTarget)
            this.docView.scrollIntoView(this.viewState.scrollTarget), this.viewState.scrollTarget = null, g = !0;
          else {
            let m = this.viewState.lineBlockAt(c.from).top - c.top;
            (m > 1 || m < -1) && (this.scrollDOM.scrollTop += m, g = !0);
          }
        if (p && this.docView.updateSelection(!0), this.viewport.from == a.from && this.viewport.to == a.to && !g && this.measureRequests.length == 0)
          break;
      }
    } finally {
      this.updateState = 0, this.measureScheduled = -1;
    }
    if (n && !n.empty)
      for (let l of this.state.facet(M1))
        l(n);
  }
  get themeClasses() {
    return N1 + " " + (this.state.facet(D1) ? aE : lE) + " " + this.state.facet(Bf);
  }
  updateAttrs() {
    let e = Hk(this, H8, {
      class: "cm-editor" + (this.hasFocus ? " cm-focused " : " ") + this.themeClasses
    }), n = {
      spellcheck: "false",
      autocorrect: "off",
      autocapitalize: "off",
      translate: "no",
      contenteditable: this.state.facet(Lp) ? "true" : "false",
      class: "cm-content",
      style: `${tt.tabSize}: ${this.state.tabSize}`,
      role: "textbox",
      "aria-multiline": "true"
    };
    this.state.readOnly && (n["aria-readonly"] = "true"), Hk(this, Sb, n);
    let i = this.observer.ignore(() => {
      let r = E1(this.contentDOM, this.contentAttrs, n), s = E1(this.dom, this.editorAttrs, e);
      return r || s;
    });
    return this.editorAttrs = e, this.contentAttrs = n, i;
  }
  showAnnouncements(e) {
    let n = !0;
    for (let i of e)
      for (let r of i.effects)
        if (r.is($e.announce)) {
          n && (this.announceDOM.textContent = ""), n = !1;
          let s = this.announceDOM.appendChild(document.createElement("div"));
          s.textContent = r.value;
        }
  }
  mountStyles() {
    this.styleModules = this.state.facet(Oc), zo.mount(this.root, this.styleModules.concat(Kq).reverse());
  }
  readMeasured() {
    if (this.updateState == 2)
      throw new Error("Reading the editor layout isn't allowed during an update");
    this.updateState == 0 && this.measureScheduled > -1 && this.measure(!1);
  }
  requestMeasure(e) {
    if (this.measureScheduled < 0 && (this.measureScheduled = this.win.requestAnimationFrame(() => this.measure())), e) {
      if (e.key != null) {
        for (let n = 0; n < this.measureRequests.length; n++)
          if (this.measureRequests[n].key === e.key) {
            this.measureRequests[n] = e;
            return;
          }
      }
      this.measureRequests.push(e);
    }
  }
  plugin(e) {
    let n = this.pluginMap.get(e);
    return (n === void 0 || n && n.spec != e) && this.pluginMap.set(e, n = this.plugins.find((i) => i.spec == e) || null), n && n.update(this).value;
  }
  get documentTop() {
    return this.contentDOM.getBoundingClientRect().top + this.viewState.paddingTop;
  }
  get documentPadding() {
    return { top: this.viewState.paddingTop, bottom: this.viewState.paddingBottom };
  }
  elementAtHeight(e) {
    return this.readMeasured(), this.viewState.elementAtHeight(e);
  }
  lineBlockAtHeight(e) {
    return this.readMeasured(), this.viewState.lineBlockAtHeight(e);
  }
  get viewportLineBlocks() {
    return this.viewState.viewportLines;
  }
  lineBlockAt(e) {
    return this.viewState.lineBlockAt(e);
  }
  get contentHeight() {
    return this.viewState.contentHeight;
  }
  moveByChar(e, n, i) {
    return Wg(this, e, Ok(this, e, n, i));
  }
  moveByGroup(e, n) {
    return Wg(this, e, Ok(this, e, n, (i) => wq(this, e.head, i)));
  }
  moveToLineBoundary(e, n, i = !0) {
    return yq(this, e, n, i);
  }
  moveVertically(e, n, i) {
    return Wg(this, e, vq(this, e, n, i));
  }
  domAtPos(e) {
    return this.docView.domAtPos(e);
  }
  posAtDOM(e, n = 0) {
    return this.docView.posFromDOM(e, n);
  }
  posAtCoords(e, n = !0) {
    return this.readMeasured(), Z8(this, e, n);
  }
  coordsAtPos(e, n = 1) {
    this.readMeasured();
    let i = this.docView.coordsAt(e, n);
    if (!i || i.left == i.right)
      return i;
    let r = this.state.doc.lineAt(e), s = this.bidiSpans(r), o = s[ya.find(s, e - r.from, -1, n)];
    return wb(i, o.dir == Mn.LTR == n > 0);
  }
  get defaultCharacterWidth() {
    return this.viewState.heightOracle.charWidth;
  }
  get defaultLineHeight() {
    return this.viewState.heightOracle.lineHeight;
  }
  get textDirection() {
    return this.viewState.defaultTextDirection;
  }
  textDirectionAt(e) {
    return !this.state.facet(V8) || e < this.viewport.from || e > this.viewport.to ? this.textDirection : (this.readMeasured(), this.docView.textDirectionAt(e));
  }
  get lineWrapping() {
    return this.viewState.heightOracle.lineWrapping;
  }
  bidiSpans(e) {
    if (e.length > tJ)
      return K8(e.length);
    let n = this.textDirectionAt(e.from);
    for (let r of this.bidiCache)
      if (r.from == e.from && r.dir == n)
        return r.order;
    let i = sq(e.text, n);
    return this.bidiCache.push(new fd(e.from, e.to, n, i)), i;
  }
  get hasFocus() {
    var e;
    return (this.dom.ownerDocument.hasFocus() || tt.safari && ((e = this.inputState) === null || e === void 0 ? void 0 : e.lastContextMenu) > Date.now() - 3e4) && this.root.activeElement == this.contentDOM;
  }
  focus() {
    this.observer.ignore(() => {
      C8(this.contentDOM), this.docView.updateSelection();
    });
  }
  setRoot(e) {
    this._root != e && (this._root = e, this.observer.setWindow((e.nodeType == 9 ? e : e.ownerDocument).defaultView || window), this.mountStyles());
  }
  destroy() {
    for (let e of this.plugins)
      e.destroy(this);
    this.plugins = [], this.inputState.destroy(), this.dom.remove(), this.observer.destroy(), this.measureScheduled > -1 && cancelAnimationFrame(this.measureScheduled), this.destroyed = !0;
  }
  static scrollIntoView(e, n = {}) {
    return yk.of(new cd(typeof e == "number" ? Re.cursor(e) : e, n.y, n.x, n.yMargin, n.xMargin));
  }
  static domEventHandlers(e) {
    return Qn.define(() => ({}), { eventHandlers: e });
  }
  static theme(e, n) {
    let i = zo.newName(), r = [Bf.of(i), Oc.of(L1(`.${i}`, e))];
    return n && n.dark && r.push(D1.of(!0)), r;
  }
  static baseTheme(e) {
    return ac.lowest(Oc.of(L1("." + N1, e, cE)));
  }
  static findFromDOM(e) {
    var n;
    let i = e.querySelector(".cm-content"), r = i && pn.get(i) || pn.get(e);
    return ((n = r == null ? void 0 : r.rootView) === null || n === void 0 ? void 0 : n.view) || null;
  }
}
$e.styleModule = Oc;
$e.inputHandler = z8;
$e.perLineTextDirection = V8;
$e.exceptionSink = F8;
$e.updateListener = M1;
$e.editable = Lp;
$e.mouseSelectionStyle = x8;
$e.dragMovesSelection = B8;
$e.clickAddsSelectionRange = j8;
$e.decorations = gu;
$e.atomicRanges = W8;
$e.scrollMargins = q8;
$e.darkTheme = D1;
$e.contentAttributes = Sb;
$e.editorAttributes = H8;
$e.lineWrapping = /* @__PURE__ */ $e.contentAttributes.of({ class: "cm-lineWrapping" });
$e.announce = /* @__PURE__ */ kt.define();
const tJ = 4096, Uk = {};
class fd {
  constructor(e, n, i, r) {
    this.from = e, this.to = n, this.dir = i, this.order = r;
  }
  static update(e, n) {
    if (n.empty)
      return e;
    let i = [], r = e.length ? e[e.length - 1].dir : Mn.LTR;
    for (let s = Math.max(0, e.length - 10); s < e.length; s++) {
      let o = e[s];
      o.dir == r && !n.touchesRange(o.from, o.to) && i.push(new fd(n.mapPos(o.from, 1), n.mapPos(o.to, -1), o.dir, o.order));
    }
    return i;
  }
}
function Hk(t, e, n) {
  for (let i = t.state.facet(e), r = i.length - 1; r >= 0; r--) {
    let s = i[r], o = typeof s == "function" ? s(t) : s;
    o && S1(o, n);
  }
  return n;
}
const nJ = tt.mac ? "mac" : tt.windows ? "win" : tt.linux ? "linux" : "key";
function iJ(t, e) {
  const n = t.split(/-(?!$)/);
  let i = n[n.length - 1];
  i == "Space" && (i = " ");
  let r, s, o, l;
  for (let a = 0; a < n.length - 1; ++a) {
    const c = n[a];
    if (/^(cmd|meta|m)$/i.test(c))
      l = !0;
    else if (/^a(lt)?$/i.test(c))
      r = !0;
    else if (/^(c|ctrl|control)$/i.test(c))
      s = !0;
    else if (/^s(hift)?$/i.test(c))
      o = !0;
    else if (/^mod$/i.test(c))
      e == "mac" ? l = !0 : s = !0;
    else
      throw new Error("Unrecognized modifier name: " + c);
  }
  return r && (i = "Alt-" + i), s && (i = "Ctrl-" + i), l && (i = "Meta-" + i), o && (i = "Shift-" + i), i;
}
function xf(t, e, n) {
  return e.altKey && (t = "Alt-" + t), e.ctrlKey && (t = "Ctrl-" + t), e.metaKey && (t = "Meta-" + t), n !== !1 && e.shiftKey && (t = "Shift-" + t), t;
}
const rJ = /* @__PURE__ */ ac.default(/* @__PURE__ */ $e.domEventHandlers({
  keydown(t, e) {
    return hE(fE(e.state), t, e, "editor");
  }
})), jp = /* @__PURE__ */ et.define({ enables: rJ }), Wk = /* @__PURE__ */ new WeakMap();
function fE(t) {
  let e = t.facet(jp), n = Wk.get(e);
  return n || Wk.set(e, n = lJ(e.reduce((i, r) => i.concat(r), []))), n;
}
function sJ(t, e, n) {
  return hE(fE(t.state), e, t, n);
}
let yo = null;
const oJ = 4e3;
function lJ(t, e = nJ) {
  let n = /* @__PURE__ */ Object.create(null), i = /* @__PURE__ */ Object.create(null), r = (o, l) => {
    let a = i[o];
    if (a == null)
      i[o] = l;
    else if (a != l)
      throw new Error("Key binding " + o + " is used both as a regular binding and as a multi-stroke prefix");
  }, s = (o, l, a, c) => {
    var u, f;
    let h = n[o] || (n[o] = /* @__PURE__ */ Object.create(null)), d = l.split(/ (?!$)/).map((m) => iJ(m, e));
    for (let m = 1; m < d.length; m++) {
      let _ = d.slice(0, m).join(" ");
      r(_, !0), h[_] || (h[_] = {
        preventDefault: !0,
        run: [(S) => {
          let v = yo = { view: S, prefix: _, scope: o };
          return setTimeout(() => {
            yo == v && (yo = null);
          }, oJ), !0;
        }]
      });
    }
    let p = d.join(" ");
    r(p, !1);
    let g = h[p] || (h[p] = { preventDefault: !1, run: ((f = (u = h._any) === null || u === void 0 ? void 0 : u.run) === null || f === void 0 ? void 0 : f.slice()) || [] });
    a && g.run.push(a), c && (g.preventDefault = !0);
  };
  for (let o of t) {
    let l = o.scope ? o.scope.split(" ") : ["editor"];
    if (o.any)
      for (let c of l) {
        let u = n[c] || (n[c] = /* @__PURE__ */ Object.create(null));
        u._any || (u._any = { preventDefault: !1, run: [] });
        for (let f in u)
          u[f].run.push(o.any);
      }
    let a = o[e] || o.key;
    if (a)
      for (let c of l)
        s(c, a, o.run, o.preventDefault), o.shift && s(c, "Shift-" + a, o.shift, o.preventDefault);
  }
  return n;
}
function hE(t, e, n, i) {
  let r = VW(e), s = Ci(r, 0), o = $i(s) == r.length && r != " ", l = "", a = !1;
  yo && yo.view == n && yo.scope == i && (l = yo.prefix + " ", (a = eE.indexOf(e.keyCode) < 0) && (yo = null));
  let c = /* @__PURE__ */ new Set(), u = (p) => {
    if (p) {
      for (let g of p.run)
        if (!c.has(g) && (c.add(g), g(n, e)))
          return !0;
      p.preventDefault && (a = !0);
    }
    return !1;
  }, f = t[i], h, d;
  if (f) {
    if (u(f[l + xf(r, e, !o)]))
      return !0;
    if (o && (e.altKey || e.metaKey || e.ctrlKey) && (h = Vo[e.keyCode]) && h != r) {
      if (u(f[l + xf(h, e, !0)]))
        return !0;
      if (e.shiftKey && (d = hu[e.keyCode]) != r && d != h && u(f[l + xf(d, e, !1)]))
        return !0;
    } else if (o && e.shiftKey && u(f[l + xf(r, e, !0)]))
      return !0;
    if (u(f._any))
      return !0;
  }
  return a;
}
class Xu {
  constructor(e, n, i, r, s) {
    this.className = e, this.left = n, this.top = i, this.width = r, this.height = s;
  }
  draw() {
    let e = document.createElement("div");
    return e.className = this.className, this.adjust(e), e;
  }
  update(e, n) {
    return n.className != this.className ? !1 : (this.adjust(e), !0);
  }
  adjust(e) {
    e.style.left = this.left + "px", e.style.top = this.top + "px", this.width != null && (e.style.width = this.width + "px"), e.style.height = this.height + "px";
  }
  eq(e) {
    return this.left == e.left && this.top == e.top && this.width == e.width && this.height == e.height && this.className == e.className;
  }
  static forRange(e, n, i) {
    if (i.empty) {
      let r = e.coordsAtPos(i.head, i.assoc || 1);
      if (!r)
        return [];
      let s = dE(e);
      return [new Xu(n, r.left - s.left, r.top - s.top, null, r.bottom - r.top)];
    } else
      return aJ(e, n, i);
  }
}
function dE(t) {
  let e = t.scrollDOM.getBoundingClientRect();
  return { left: (t.textDirection == Mn.LTR ? e.left : e.right - t.scrollDOM.clientWidth) - t.scrollDOM.scrollLeft, top: e.top - t.scrollDOM.scrollTop };
}
function qk(t, e, n) {
  let i = Re.cursor(e);
  return {
    from: Math.max(n.from, t.moveToLineBoundary(i, !1, !0).from),
    to: Math.min(n.to, t.moveToLineBoundary(i, !0, !0).from),
    type: ln.Text
  };
}
function Jk(t, e) {
  let n = t.lineBlockAt(e);
  if (Array.isArray(n.type)) {
    for (let i of n.type)
      if (i.to > e || i.to == e && (i.to == n.to || i.type == ln.Text))
        return i;
  }
  return n;
}
function aJ(t, e, n) {
  if (n.to <= t.viewport.from || n.from >= t.viewport.to)
    return [];
  let i = Math.max(n.from, t.viewport.from), r = Math.min(n.to, t.viewport.to), s = t.textDirection == Mn.LTR, o = t.contentDOM, l = o.getBoundingClientRect(), a = dE(t), c = window.getComputedStyle(o.firstChild), u = l.left + parseInt(c.paddingLeft) + Math.min(0, parseInt(c.textIndent)), f = l.right - parseInt(c.paddingRight), h = Jk(t, i), d = Jk(t, r), p = h.type == ln.Text ? h : null, g = d.type == ln.Text ? d : null;
  if (t.lineWrapping && (p && (p = qk(t, i, p)), g && (g = qk(t, r, g))), p && g && p.from == g.from)
    return _(S(n.from, n.to, p));
  {
    let k = p ? S(n.from, null, p) : v(h, !1), C = g ? S(null, n.to, g) : v(d, !0), A = [];
    return (p || h).to < (g || d).from - 1 ? A.push(m(u, k.bottom, f, C.top)) : k.bottom < C.top && t.elementAtHeight((k.bottom + C.top) / 2).type == ln.Text && (k.bottom = C.top = (k.bottom + C.top) / 2), _(k).concat(A).concat(_(C));
  }
  function m(k, C, A, w) {
    return new Xu(e, k - a.left, C - a.top - 0.01, A - k, w - C + 0.01);
  }
  function _({ top: k, bottom: C, horizontal: A }) {
    let w = [];
    for (let M = 0; M < A.length; M += 2)
      w.push(m(A[M], k, A[M + 1], C));
    return w;
  }
  function S(k, C, A) {
    let w = 1e9, M = -1e9, N = [];
    function T(H, I, z, L, K) {
      let F = t.coordsAtPos(H, H == A.to ? -2 : 2), D = t.coordsAtPos(z, z == A.from ? 2 : -2);
      w = Math.min(F.top, D.top, w), M = Math.max(F.bottom, D.bottom, M), K == Mn.LTR ? N.push(s && I ? u : F.left, s && L ? f : D.right) : N.push(!s && L ? u : D.left, !s && I ? f : F.right);
    }
    let O = k ?? A.from, W = C ?? A.to;
    for (let H of t.visibleRanges)
      if (H.to > O && H.from < W)
        for (let I = Math.max(H.from, O), z = Math.min(H.to, W); ; ) {
          let L = t.state.doc.lineAt(I);
          for (let K of t.bidiSpans(L)) {
            let F = K.from + L.from, D = K.to + L.from;
            if (F >= z)
              break;
            D > I && T(Math.max(F, I), k == null && F <= O, Math.min(D, z), C == null && D >= W, K.dir);
          }
          if (I = L.to + 1, I >= z)
            break;
        }
    return N.length == 0 && T(O, k == null, W, C == null, t.textDirection), { top: w, bottom: M, horizontal: N };
  }
  function v(k, C) {
    let A = l.top + (C ? k.top : k.bottom);
    return { top: A, bottom: A, horizontal: [] };
  }
}
function cJ(t, e) {
  return t.constructor == e.constructor && t.eq(e);
}
class uJ {
  constructor(e, n) {
    this.view = e, this.layer = n, this.drawn = [], this.measureReq = { read: this.measure.bind(this), write: this.draw.bind(this) }, this.dom = e.scrollDOM.appendChild(document.createElement("div")), this.dom.classList.add("cm-layer"), n.above && this.dom.classList.add("cm-layer-above"), n.class && this.dom.classList.add(n.class), this.dom.setAttribute("aria-hidden", "true"), this.setOrder(e.state), e.requestMeasure(this.measureReq), n.mount && n.mount(this.dom, e);
  }
  update(e) {
    e.startState.facet(yh) != e.state.facet(yh) && this.setOrder(e.state), (this.layer.update(e, this.dom) || e.geometryChanged) && e.view.requestMeasure(this.measureReq);
  }
  setOrder(e) {
    let n = 0, i = e.facet(yh);
    for (; n < i.length && i[n] != this.layer; )
      n++;
    this.dom.style.zIndex = String((this.layer.above ? 150 : -1) - n);
  }
  measure() {
    return this.layer.markers(this.view);
  }
  draw(e) {
    if (e.length != this.drawn.length || e.some((n, i) => !cJ(n, this.drawn[i]))) {
      let n = this.dom.firstChild, i = 0;
      for (let r of e)
        r.update && n && r.constructor && this.drawn[i].constructor && r.update(n, this.drawn[i]) ? (n = n.nextSibling, i++) : this.dom.insertBefore(r.draw(), n);
      for (; n; ) {
        let r = n.nextSibling;
        n.remove(), n = r;
      }
      this.drawn = e;
    }
  }
  destroy() {
    this.layer.destroy && this.layer.destroy(this.dom, this.view), this.dom.remove();
  }
}
const yh = /* @__PURE__ */ et.define();
function pE(t) {
  return [
    Qn.define((e) => new uJ(e, t)),
    yh.of(t)
  ];
}
const gE = !tt.ios, mu = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      cursorBlinkRate: 1200,
      drawRangeCursor: !0
    }, {
      cursorBlinkRate: (e, n) => Math.min(e, n),
      drawRangeCursor: (e, n) => e || n
    });
  }
});
function fJ(t = {}) {
  return [
    mu.of(t),
    hJ,
    dJ,
    pJ,
    U8.of(!0)
  ];
}
function mE(t) {
  return t.startState.facet(mu) != t.startState.facet(mu);
}
const hJ = /* @__PURE__ */ pE({
  above: !0,
  markers(t) {
    let { state: e } = t, n = e.facet(mu), i = [];
    for (let r of e.selection.ranges) {
      let s = r == e.selection.main;
      if (r.empty ? !s || gE : n.drawRangeCursor) {
        let o = s ? "cm-cursor cm-cursor-primary" : "cm-cursor cm-cursor-secondary", l = r.empty ? r : Re.cursor(r.head, r.head > r.anchor ? -1 : 1);
        for (let a of Xu.forRange(t, o, l))
          i.push(a);
      }
    }
    return i;
  },
  update(t, e) {
    t.transactions.some((i) => i.scrollIntoView) && (e.style.animationName = e.style.animationName == "cm-blink" ? "cm-blink2" : "cm-blink");
    let n = mE(t);
    return n && Kk(t.state, e), t.docChanged || t.selectionSet || n;
  },
  mount(t, e) {
    Kk(e.state, t);
  },
  class: "cm-cursorLayer"
});
function Kk(t, e) {
  e.style.animationDuration = t.facet(mu).cursorBlinkRate + "ms";
}
const dJ = /* @__PURE__ */ pE({
  above: !1,
  markers(t) {
    return t.state.selection.ranges.map((e) => e.empty ? [] : Xu.forRange(t, "cm-selectionBackground", e)).reduce((e, n) => e.concat(n));
  },
  update(t, e) {
    return t.docChanged || t.selectionSet || t.viewportChanged || mE(t);
  },
  class: "cm-selectionLayer"
}), bE = {
  ".cm-line": {
    "& ::selection": { backgroundColor: "transparent !important" },
    "&::selection": { backgroundColor: "transparent !important" }
  }
};
gE && (bE[".cm-line"].caretColor = "transparent !important");
const pJ = /* @__PURE__ */ ac.highest(/* @__PURE__ */ $e.theme(bE)), _E = /* @__PURE__ */ kt.define({
  map(t, e) {
    return t == null ? null : e.mapPos(t);
  }
}), Rc = /* @__PURE__ */ oi.define({
  create() {
    return null;
  },
  update(t, e) {
    return t != null && (t = e.changes.mapPos(t)), e.effects.reduce((n, i) => i.is(_E) ? i.value : n, t);
  }
}), gJ = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.cursor = null, this.measureReq = { read: this.readPos.bind(this), write: this.drawCursor.bind(this) };
  }
  update(t) {
    var e;
    let n = t.state.field(Rc);
    n == null ? this.cursor != null && ((e = this.cursor) === null || e === void 0 || e.remove(), this.cursor = null) : (this.cursor || (this.cursor = this.view.scrollDOM.appendChild(document.createElement("div")), this.cursor.className = "cm-dropCursor"), (t.startState.field(Rc) != n || t.docChanged || t.geometryChanged) && this.view.requestMeasure(this.measureReq));
  }
  readPos() {
    let t = this.view.state.field(Rc), e = t != null && this.view.coordsAtPos(t);
    if (!e)
      return null;
    let n = this.view.scrollDOM.getBoundingClientRect();
    return {
      left: e.left - n.left + this.view.scrollDOM.scrollLeft,
      top: e.top - n.top + this.view.scrollDOM.scrollTop,
      height: e.bottom - e.top
    };
  }
  drawCursor(t) {
    this.cursor && (t ? (this.cursor.style.left = t.left + "px", this.cursor.style.top = t.top + "px", this.cursor.style.height = t.height + "px") : this.cursor.style.left = "-100000px");
  }
  destroy() {
    this.cursor && this.cursor.remove();
  }
  setDropPos(t) {
    this.view.state.field(Rc) != t && this.view.dispatch({ effects: _E.of(t) });
  }
}, {
  eventHandlers: {
    dragover(t) {
      this.setDropPos(this.view.posAtCoords({ x: t.clientX, y: t.clientY }));
    },
    dragleave(t) {
      (t.target == this.view.contentDOM || !this.view.contentDOM.contains(t.relatedTarget)) && this.setDropPos(null);
    },
    dragend() {
      this.setDropPos(null);
    },
    drop() {
      this.setDropPos(null);
    }
  }
});
function mJ() {
  return [Rc, gJ];
}
function Gk(t, e, n, i, r) {
  e.lastIndex = 0;
  for (let s = t.iterRange(n, i), o = n, l; !s.next().done; o += s.value.length)
    if (!s.lineBreak)
      for (; l = e.exec(s.value); )
        r(o + l.index, l);
}
function bJ(t, e) {
  let n = t.visibleRanges;
  if (n.length == 1 && n[0].from == t.viewport.from && n[0].to == t.viewport.to)
    return n;
  let i = [];
  for (let { from: r, to: s } of n)
    r = Math.max(t.state.doc.lineAt(r).from, r - e), s = Math.min(t.state.doc.lineAt(s).to, s + e), i.length && i[i.length - 1].to >= r ? i[i.length - 1].to = s : i.push({ from: r, to: s });
  return i;
}
class _J {
  constructor(e) {
    const { regexp: n, decoration: i, decorate: r, boundary: s, maxLength: o = 1e3 } = e;
    if (!n.global)
      throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");
    if (this.regexp = n, r)
      this.addMatch = (l, a, c, u) => r(u, c, c + l[0].length, l, a);
    else if (typeof i == "function")
      this.addMatch = (l, a, c, u) => {
        let f = i(l, a, c);
        f && u(c, c + l[0].length, f);
      };
    else if (i)
      this.addMatch = (l, a, c, u) => u(c, c + l[0].length, i);
    else
      throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");
    this.boundary = s, this.maxLength = o;
  }
  createDeco(e) {
    let n = new Fo(), i = n.add.bind(n);
    for (let { from: r, to: s } of bJ(e, this.maxLength))
      Gk(e.state.doc, this.regexp, r, s, (o, l) => this.addMatch(l, e, o, i));
    return n.finish();
  }
  updateDeco(e, n) {
    let i = 1e9, r = -1;
    return e.docChanged && e.changes.iterChanges((s, o, l, a) => {
      a > e.view.viewport.from && l < e.view.viewport.to && (i = Math.min(l, i), r = Math.max(a, r));
    }), e.viewportChanged || r - i > 1e3 ? this.createDeco(e.view) : r > -1 ? this.updateRange(e.view, n.map(e.changes), i, r) : n;
  }
  updateRange(e, n, i, r) {
    for (let s of e.visibleRanges) {
      let o = Math.max(s.from, i), l = Math.min(s.to, r);
      if (l > o) {
        let a = e.state.doc.lineAt(o), c = a.to < l ? e.state.doc.lineAt(l) : a, u = Math.max(s.from, a.from), f = Math.min(s.to, c.to);
        if (this.boundary) {
          for (; o > a.from; o--)
            if (this.boundary.test(a.text[o - 1 - a.from])) {
              u = o;
              break;
            }
          for (; l < c.to; l++)
            if (this.boundary.test(c.text[l - c.from])) {
              f = l;
              break;
            }
        }
        let h = [], d, p = (g, m, _) => h.push(_.range(g, m));
        if (a == c)
          for (this.regexp.lastIndex = u - a.from; (d = this.regexp.exec(a.text)) && d.index < f - a.from; )
            this.addMatch(d, e, d.index + a.from, p);
        else
          Gk(e.state.doc, this.regexp, u, f, (g, m) => this.addMatch(m, e, g, p));
        n = n.update({ filterFrom: u, filterTo: f, filter: (g, m) => g < u || m > f, add: h });
      }
    }
    return n;
  }
}
const j1 = /x/.unicode != null ? "gu" : "g", yJ = /* @__PURE__ */ new RegExp(`[\0-\b
--ÂŸÂ­Øœâ€‹â€Žâ€\u2028\u2029â€­â€®â¦â§â©\uFEFFï¿¹-ï¿¼]`, j1), wJ = {
  0: "null",
  7: "bell",
  8: "backspace",
  10: "newline",
  11: "vertical tab",
  13: "carriage return",
  27: "escape",
  8203: "zero width space",
  8204: "zero width non-joiner",
  8205: "zero width joiner",
  8206: "left-to-right mark",
  8207: "right-to-left mark",
  8232: "line separator",
  8237: "left-to-right override",
  8238: "right-to-left override",
  8294: "left-to-right isolate",
  8295: "right-to-left isolate",
  8297: "pop directional isolate",
  8233: "paragraph separator",
  65279: "zero width no-break space",
  65532: "object replacement"
};
let Kg = null;
function vJ() {
  var t;
  if (Kg == null && typeof document < "u" && document.body) {
    let e = document.body.style;
    Kg = ((t = e.tabSize) !== null && t !== void 0 ? t : e.MozTabSize) != null;
  }
  return Kg || !1;
}
const wh = /* @__PURE__ */ et.define({
  combine(t) {
    let e = qr(t, {
      render: null,
      specialChars: yJ,
      addSpecialChars: null
    });
    return (e.replaceTabs = !vJ()) && (e.specialChars = new RegExp("	|" + e.specialChars.source, j1)), e.addSpecialChars && (e.specialChars = new RegExp(e.specialChars.source + "|" + e.addSpecialChars.source, j1)), e;
  }
});
function kJ(t = {}) {
  return [wh.of(t), CJ()];
}
let Yk = null;
function CJ() {
  return Yk || (Yk = Qn.fromClass(class {
    constructor(t) {
      this.view = t, this.decorations = ft.none, this.decorationCache = /* @__PURE__ */ Object.create(null), this.decorator = this.makeDecorator(t.state.facet(wh)), this.decorations = this.decorator.createDeco(t);
    }
    makeDecorator(t) {
      return new _J({
        regexp: t.specialChars,
        decoration: (e, n, i) => {
          let { doc: r } = n.state, s = Ci(e[0], 0);
          if (s == 9) {
            let o = r.lineAt(i), l = n.state.tabSize, a = Gu(o.text, l, i - o.from);
            return ft.replace({ widget: new MJ((l - a % l) * this.view.defaultCharacterWidth) });
          }
          return this.decorationCache[s] || (this.decorationCache[s] = ft.replace({ widget: new AJ(t, s) }));
        },
        boundary: t.replaceTabs ? void 0 : /[^]/
      });
    }
    update(t) {
      let e = t.state.facet(wh);
      t.startState.facet(wh) != e ? (this.decorator = this.makeDecorator(e), this.decorations = this.decorator.createDeco(t.view)) : this.decorations = this.decorator.updateDeco(t, this.decorations);
    }
  }, {
    decorations: (t) => t.decorations
  }));
}
const SJ = "â€¢";
function EJ(t) {
  return t >= 32 ? SJ : t == 10 ? "â¤" : String.fromCharCode(9216 + t);
}
class AJ extends Zo {
  constructor(e, n) {
    super(), this.options = e, this.code = n;
  }
  eq(e) {
    return e.code == this.code;
  }
  toDOM(e) {
    let n = EJ(this.code), i = e.state.phrase("Control character") + " " + (wJ[this.code] || "0x" + this.code.toString(16)), r = this.options.render && this.options.render(this.code, i, n);
    if (r)
      return r;
    let s = document.createElement("span");
    return s.textContent = n, s.title = i, s.setAttribute("aria-label", i), s.className = "cm-specialChar", s;
  }
  ignoreEvent() {
    return !1;
  }
}
class MJ extends Zo {
  constructor(e) {
    super(), this.width = e;
  }
  eq(e) {
    return e.width == this.width;
  }
  toDOM() {
    let e = document.createElement("span");
    return e.textContent = "	", e.className = "cm-tab", e.style.width = this.width + "px", e;
  }
  ignoreEvent() {
    return !1;
  }
}
function OJ() {
  return RJ;
}
const TJ = /* @__PURE__ */ ft.line({ class: "cm-activeLine" }), RJ = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.docChanged || t.selectionSet) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = -1, n = [];
    for (let i of t.state.selection.ranges) {
      let r = t.lineBlockAt(i.head);
      r.from > e && (n.push(TJ.range(r.from)), e = r.from);
    }
    return ft.set(n);
  }
}, {
  decorations: (t) => t.decorations
}), B1 = 2e3;
function PJ(t, e, n) {
  let i = Math.min(e.line, n.line), r = Math.max(e.line, n.line), s = [];
  if (e.off > B1 || n.off > B1 || e.col < 0 || n.col < 0) {
    let o = Math.min(e.off, n.off), l = Math.max(e.off, n.off);
    for (let a = i; a <= r; a++) {
      let c = t.doc.line(a);
      c.length <= l && s.push(Re.range(c.from + o, c.to + l));
    }
  } else {
    let o = Math.min(e.col, n.col), l = Math.max(e.col, n.col);
    for (let a = i; a <= r; a++) {
      let c = t.doc.line(a), u = m1(c.text, o, t.tabSize, !0);
      if (u < 0)
        s.push(Re.cursor(c.to));
      else {
        let f = m1(c.text, l, t.tabSize);
        s.push(Re.range(c.from + u, c.from + f));
      }
    }
  }
  return s;
}
function IJ(t, e) {
  let n = t.coordsAtPos(t.viewport.from);
  return n ? Math.round(Math.abs((n.left - e) / t.defaultCharacterWidth)) : -1;
}
function Xk(t, e) {
  let n = t.posAtCoords({ x: e.clientX, y: e.clientY }, !1), i = t.state.doc.lineAt(n), r = n - i.from, s = r > B1 ? -1 : r == i.length ? IJ(t, e.clientX) : Gu(i.text, t.state.tabSize, n - i.from);
  return { line: i.number, col: s, off: r };
}
function DJ(t, e) {
  let n = Xk(t, e), i = t.state.selection;
  return n ? {
    update(r) {
      if (r.docChanged) {
        let s = r.changes.mapPos(r.startState.doc.line(n.line).from), o = r.state.doc.lineAt(s);
        n = { line: o.number, col: n.col, off: Math.min(n.off, o.length) }, i = i.map(r.changes);
      }
    },
    get(r, s, o) {
      let l = Xk(t, r);
      if (!l)
        return i;
      let a = PJ(t.state, n, l);
      return a.length ? o ? Re.create(a.concat(i.ranges)) : Re.create(a) : i;
    }
  } : null;
}
function NJ(t) {
  let e = (t == null ? void 0 : t.eventFilter) || ((n) => n.altKey && n.button == 0);
  return $e.mouseSelectionStyle.of((n, i) => e(i) ? DJ(n, i) : null);
}
const LJ = {
  Alt: [18, (t) => t.altKey],
  Control: [17, (t) => t.ctrlKey],
  Shift: [16, (t) => t.shiftKey],
  Meta: [91, (t) => t.metaKey]
}, jJ = { style: "cursor: crosshair" };
function BJ(t = {}) {
  let [e, n] = LJ[t.key || "Alt"], i = Qn.fromClass(class {
    constructor(r) {
      this.view = r, this.isDown = !1;
    }
    set(r) {
      this.isDown != r && (this.isDown = r, this.view.update([]));
    }
  }, {
    eventHandlers: {
      keydown(r) {
        this.set(r.keyCode == e || n(r));
      },
      keyup(r) {
        (r.keyCode == e || !n(r)) && this.set(!1);
      },
      mousemove(r) {
        this.set(n(r));
      }
    }
  });
  return [
    i,
    $e.contentAttributes.of((r) => {
      var s;
      return !((s = r.plugin(i)) === null || s === void 0) && s.isDown ? jJ : null;
    })
  ];
}
const Ff = "-10000px";
class yE {
  constructor(e, n, i) {
    this.facet = n, this.createTooltipView = i, this.input = e.state.facet(n), this.tooltips = this.input.filter((r) => r), this.tooltipViews = this.tooltips.map(i);
  }
  update(e) {
    var n;
    let i = e.state.facet(this.facet), r = i.filter((o) => o);
    if (i === this.input) {
      for (let o of this.tooltipViews)
        o.update && o.update(e);
      return !1;
    }
    let s = [];
    for (let o = 0; o < r.length; o++) {
      let l = r[o], a = -1;
      if (l) {
        for (let c = 0; c < this.tooltips.length; c++) {
          let u = this.tooltips[c];
          u && u.create == l.create && (a = c);
        }
        if (a < 0)
          s[o] = this.createTooltipView(l);
        else {
          let c = s[o] = this.tooltipViews[a];
          c.update && c.update(e);
        }
      }
    }
    for (let o of this.tooltipViews)
      s.indexOf(o) < 0 && (o.dom.remove(), (n = o.destroy) === null || n === void 0 || n.call(o));
    return this.input = i, this.tooltips = r, this.tooltipViews = s, !0;
  }
}
function xJ(t) {
  let { win: e } = t;
  return { top: 0, left: 0, bottom: e.innerHeight, right: e.innerWidth };
}
const Gg = /* @__PURE__ */ et.define({
  combine: (t) => {
    var e, n, i;
    return {
      position: tt.ios ? "absolute" : ((e = t.find((r) => r.position)) === null || e === void 0 ? void 0 : e.position) || "fixed",
      parent: ((n = t.find((r) => r.parent)) === null || n === void 0 ? void 0 : n.parent) || null,
      tooltipSpace: ((i = t.find((r) => r.tooltipSpace)) === null || i === void 0 ? void 0 : i.tooltipSpace) || xJ
    };
  }
}), wE = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.inView = !0, this.lastTransaction = 0, this.measureTimeout = -1;
    let e = t.state.facet(Gg);
    this.position = e.position, this.parent = e.parent, this.classes = t.themeClasses, this.createContainer(), this.measureReq = { read: this.readMeasure.bind(this), write: this.writeMeasure.bind(this), key: this }, this.manager = new yE(t, Bp, (n) => this.createTooltip(n)), this.intersectionObserver = typeof IntersectionObserver == "function" ? new IntersectionObserver((n) => {
      Date.now() > this.lastTransaction - 50 && n.length > 0 && n[n.length - 1].intersectionRatio < 1 && this.measureSoon();
    }, { threshold: [1] }) : null, this.observeIntersection(), t.win.addEventListener("resize", this.measureSoon = this.measureSoon.bind(this)), this.maybeMeasure();
  }
  createContainer() {
    this.parent ? (this.container = document.createElement("div"), this.container.style.position = "relative", this.container.className = this.view.themeClasses, this.parent.appendChild(this.container)) : this.container = this.view.dom;
  }
  observeIntersection() {
    if (this.intersectionObserver) {
      this.intersectionObserver.disconnect();
      for (let t of this.manager.tooltipViews)
        this.intersectionObserver.observe(t.dom);
    }
  }
  measureSoon() {
    this.measureTimeout < 0 && (this.measureTimeout = setTimeout(() => {
      this.measureTimeout = -1, this.maybeMeasure();
    }, 50));
  }
  update(t) {
    t.transactions.length && (this.lastTransaction = Date.now());
    let e = this.manager.update(t);
    e && this.observeIntersection();
    let n = e || t.geometryChanged, i = t.state.facet(Gg);
    if (i.position != this.position) {
      this.position = i.position;
      for (let r of this.manager.tooltipViews)
        r.dom.style.position = this.position;
      n = !0;
    }
    if (i.parent != this.parent) {
      this.parent && this.container.remove(), this.parent = i.parent, this.createContainer();
      for (let r of this.manager.tooltipViews)
        this.container.appendChild(r.dom);
      n = !0;
    } else
      this.parent && this.view.themeClasses != this.classes && (this.classes = this.container.className = this.view.themeClasses);
    n && this.maybeMeasure();
  }
  createTooltip(t) {
    let e = t.create(this.view);
    if (e.dom.classList.add("cm-tooltip"), t.arrow && !e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")) {
      let n = document.createElement("div");
      n.className = "cm-tooltip-arrow", e.dom.appendChild(n);
    }
    return e.dom.style.position = this.position, e.dom.style.top = Ff, this.container.appendChild(e.dom), e.mount && e.mount(this.view), e;
  }
  destroy() {
    var t, e;
    this.view.win.removeEventListener("resize", this.measureSoon);
    for (let n of this.manager.tooltipViews)
      n.dom.remove(), (t = n.destroy) === null || t === void 0 || t.call(n);
    (e = this.intersectionObserver) === null || e === void 0 || e.disconnect(), clearTimeout(this.measureTimeout);
  }
  readMeasure() {
    let t = this.view.dom.getBoundingClientRect();
    return {
      editor: t,
      parent: this.parent ? this.container.getBoundingClientRect() : t,
      pos: this.manager.tooltips.map((e, n) => {
        let i = this.manager.tooltipViews[n];
        return i.getCoords ? i.getCoords(e.pos) : this.view.coordsAtPos(e.pos);
      }),
      size: this.manager.tooltipViews.map(({ dom: e }) => e.getBoundingClientRect()),
      space: this.view.state.facet(Gg).tooltipSpace(this.view)
    };
  }
  writeMeasure(t) {
    let { editor: e, space: n } = t, i = [];
    for (let r = 0; r < this.manager.tooltips.length; r++) {
      let s = this.manager.tooltips[r], o = this.manager.tooltipViews[r], { dom: l } = o, a = t.pos[r], c = t.size[r];
      if (!a || a.bottom <= Math.max(e.top, n.top) || a.top >= Math.min(e.bottom, n.bottom) || a.right < Math.max(e.left, n.left) - 0.1 || a.left > Math.min(e.right, n.right) + 0.1) {
        l.style.top = Ff;
        continue;
      }
      let u = s.arrow ? o.dom.querySelector(".cm-tooltip-arrow") : null, f = u ? 7 : 0, h = c.right - c.left, d = c.bottom - c.top, p = o.offset || zJ, g = this.view.textDirection == Mn.LTR, m = c.width > n.right - n.left ? g ? n.left : n.right - c.width : g ? Math.min(a.left - (u ? 14 : 0) + p.x, n.right - h) : Math.max(n.left, a.left - h + (u ? 14 : 0) - p.x), _ = !!s.above;
      !s.strictSide && (_ ? a.top - (c.bottom - c.top) - p.y < n.top : a.bottom + (c.bottom - c.top) + p.y > n.bottom) && _ == n.bottom - a.bottom > a.top - n.top && (_ = !_);
      let S = (_ ? a.top - n.top : n.bottom - a.bottom) - f;
      if (S < d && o.resize !== !1) {
        if (S < this.view.defaultLineHeight) {
          l.style.top = Ff;
          continue;
        }
        l.style.height = (d = S) + "px";
      } else
        l.style.height && (l.style.height = "");
      let v = _ ? a.top - d - f - p.y : a.bottom + f + p.y, k = m + h;
      if (o.overlap !== !0)
        for (let C of i)
          C.left < k && C.right > m && C.top < v + d && C.bottom > v && (v = _ ? C.top - d - 2 - f : C.bottom + f + 2);
      this.position == "absolute" ? (l.style.top = v - t.parent.top + "px", l.style.left = m - t.parent.left + "px") : (l.style.top = v + "px", l.style.left = m + "px"), u && (u.style.left = `${a.left + (g ? p.x : -p.x) - (m + 14 - 7)}px`), o.overlap !== !0 && i.push({ left: m, top: v, right: k, bottom: v + d }), l.classList.toggle("cm-tooltip-above", _), l.classList.toggle("cm-tooltip-below", !_), o.positioned && o.positioned(t.space);
    }
  }
  maybeMeasure() {
    if (this.manager.tooltips.length && (this.view.inView && this.view.requestMeasure(this.measureReq), this.inView != this.view.inView && (this.inView = this.view.inView, !this.inView)))
      for (let t of this.manager.tooltipViews)
        t.dom.style.top = Ff;
  }
}, {
  eventHandlers: {
    scroll() {
      this.maybeMeasure();
    }
  }
}), FJ = /* @__PURE__ */ $e.baseTheme({
  ".cm-tooltip": {
    zIndex: 100,
    boxSizing: "border-box"
  },
  "&light .cm-tooltip": {
    border: "1px solid #bbb",
    backgroundColor: "#f5f5f5"
  },
  "&light .cm-tooltip-section:not(:first-child)": {
    borderTop: "1px solid #bbb"
  },
  "&dark .cm-tooltip": {
    backgroundColor: "#333338",
    color: "white"
  },
  ".cm-tooltip-arrow": {
    height: `${7}px`,
    width: `${7 * 2}px`,
    position: "absolute",
    zIndex: -1,
    overflow: "hidden",
    "&:before, &:after": {
      content: "''",
      position: "absolute",
      width: 0,
      height: 0,
      borderLeft: `${7}px solid transparent`,
      borderRight: `${7}px solid transparent`
    },
    ".cm-tooltip-above &": {
      bottom: `-${7}px`,
      "&:before": {
        borderTop: `${7}px solid #bbb`
      },
      "&:after": {
        borderTop: `${7}px solid #f5f5f5`,
        bottom: "1px"
      }
    },
    ".cm-tooltip-below &": {
      top: `-${7}px`,
      "&:before": {
        borderBottom: `${7}px solid #bbb`
      },
      "&:after": {
        borderBottom: `${7}px solid #f5f5f5`,
        top: "1px"
      }
    }
  },
  "&dark .cm-tooltip .cm-tooltip-arrow": {
    "&:before": {
      borderTopColor: "#333338",
      borderBottomColor: "#333338"
    },
    "&:after": {
      borderTopColor: "transparent",
      borderBottomColor: "transparent"
    }
  }
}), zJ = { x: 0, y: 0 }, Bp = /* @__PURE__ */ et.define({
  enables: [wE, FJ]
}), hd = /* @__PURE__ */ et.define();
class Ab {
  constructor(e) {
    this.view = e, this.mounted = !1, this.dom = document.createElement("div"), this.dom.classList.add("cm-tooltip-hover"), this.manager = new yE(e, hd, (n) => this.createHostedView(n));
  }
  static create(e) {
    return new Ab(e);
  }
  createHostedView(e) {
    let n = e.create(this.view);
    return n.dom.classList.add("cm-tooltip-section"), this.dom.appendChild(n.dom), this.mounted && n.mount && n.mount(this.view), n;
  }
  mount(e) {
    for (let n of this.manager.tooltipViews)
      n.mount && n.mount(e);
    this.mounted = !0;
  }
  positioned(e) {
    for (let n of this.manager.tooltipViews)
      n.positioned && n.positioned(e);
  }
  update(e) {
    this.manager.update(e);
  }
}
const VJ = /* @__PURE__ */ Bp.compute([hd], (t) => {
  let e = t.facet(hd).filter((n) => n);
  return e.length === 0 ? null : {
    pos: Math.min(...e.map((n) => n.pos)),
    end: Math.max(...e.filter((n) => n.end != null).map((n) => n.end)),
    create: Ab.create,
    above: e[0].above,
    arrow: e.some((n) => n.arrow)
  };
});
class UJ {
  constructor(e, n, i, r, s) {
    this.view = e, this.source = n, this.field = i, this.setHover = r, this.hoverTime = s, this.hoverTimeout = -1, this.restartTimeout = -1, this.pending = null, this.lastMove = { x: 0, y: 0, target: e.dom, time: 0 }, this.checkHover = this.checkHover.bind(this), e.dom.addEventListener("mouseleave", this.mouseleave = this.mouseleave.bind(this)), e.dom.addEventListener("mousemove", this.mousemove = this.mousemove.bind(this));
  }
  update() {
    this.pending && (this.pending = null, clearTimeout(this.restartTimeout), this.restartTimeout = setTimeout(() => this.startHover(), 20));
  }
  get active() {
    return this.view.state.field(this.field);
  }
  checkHover() {
    if (this.hoverTimeout = -1, this.active)
      return;
    let e = Date.now() - this.lastMove.time;
    e < this.hoverTime ? this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime - e) : this.startHover();
  }
  startHover() {
    clearTimeout(this.restartTimeout);
    let { lastMove: e } = this, n = this.view.contentDOM.contains(e.target) ? this.view.posAtCoords(e) : null;
    if (n == null)
      return;
    let i = this.view.coordsAtPos(n);
    if (i == null || e.y < i.top || e.y > i.bottom || e.x < i.left - this.view.defaultCharacterWidth || e.x > i.right + this.view.defaultCharacterWidth)
      return;
    let r = this.view.bidiSpans(this.view.state.doc.lineAt(n)).find((l) => l.from <= n && l.to >= n), s = r && r.dir == Mn.RTL ? -1 : 1, o = this.source(this.view, n, e.x < i.left ? -s : s);
    if (o != null && o.then) {
      let l = this.pending = { pos: n };
      o.then((a) => {
        this.pending == l && (this.pending = null, a && this.view.dispatch({ effects: this.setHover.of(a) }));
      }, (a) => rr(this.view.state, a, "hover tooltip"));
    } else
      o && this.view.dispatch({ effects: this.setHover.of(o) });
  }
  mousemove(e) {
    var n;
    this.lastMove = { x: e.clientX, y: e.clientY, target: e.target, time: Date.now() }, this.hoverTimeout < 0 && (this.hoverTimeout = setTimeout(this.checkHover, this.hoverTime));
    let i = this.active;
    if (i && !Qk(this.lastMove.target) || this.pending) {
      let { pos: r } = i || this.pending, s = (n = i == null ? void 0 : i.end) !== null && n !== void 0 ? n : r;
      (r == s ? this.view.posAtCoords(this.lastMove) != r : !HJ(this.view, r, s, e.clientX, e.clientY, 6)) && (this.view.dispatch({ effects: this.setHover.of(null) }), this.pending = null);
    }
  }
  mouseleave(e) {
    clearTimeout(this.hoverTimeout), this.hoverTimeout = -1, this.active && !Qk(e.relatedTarget) && this.view.dispatch({ effects: this.setHover.of(null) });
  }
  destroy() {
    clearTimeout(this.hoverTimeout), this.view.dom.removeEventListener("mouseleave", this.mouseleave), this.view.dom.removeEventListener("mousemove", this.mousemove);
  }
}
function Qk(t) {
  for (let e = t; e; e = e.parentNode)
    if (e.nodeType == 1 && e.classList.contains("cm-tooltip"))
      return !0;
  return !1;
}
function HJ(t, e, n, i, r, s) {
  let o = document.createRange(), l = t.domAtPos(e), a = t.domAtPos(n);
  o.setEnd(a.node, a.offset), o.setStart(l.node, l.offset);
  let c = o.getClientRects();
  o.detach();
  for (let u = 0; u < c.length; u++) {
    let f = c[u];
    if (Math.max(f.top - r, r - f.bottom, f.left - i, i - f.right) <= s)
      return !0;
  }
  return !1;
}
function WJ(t, e = {}) {
  let n = kt.define(), i = oi.define({
    create() {
      return null;
    },
    update(r, s) {
      if (r && (e.hideOnChange && (s.docChanged || s.selection) || e.hideOn && e.hideOn(s, r)))
        return null;
      if (r && s.docChanged) {
        let o = s.changes.mapPos(r.pos, -1, Di.TrackDel);
        if (o == null)
          return null;
        let l = Object.assign(/* @__PURE__ */ Object.create(null), r);
        l.pos = o, r.end != null && (l.end = s.changes.mapPos(r.end)), r = l;
      }
      for (let o of s.effects)
        o.is(n) && (r = o.value), o.is(JJ) && (r = null);
      return r;
    },
    provide: (r) => hd.from(r)
  });
  return [
    i,
    Qn.define((r) => new UJ(r, t, i, n, e.hoverTime || 300)),
    VJ
  ];
}
function qJ(t, e) {
  let n = t.plugin(wE);
  if (!n)
    return null;
  let i = n.manager.tooltips.indexOf(e);
  return i < 0 ? null : n.manager.tooltipViews[i];
}
const JJ = /* @__PURE__ */ kt.define(), Zk = /* @__PURE__ */ et.define({
  combine(t) {
    let e, n;
    for (let i of t)
      e = e || i.topContainer, n = n || i.bottomContainer;
    return { topContainer: e, bottomContainer: n };
  }
});
function bu(t, e) {
  let n = t.plugin(vE), i = n ? n.specs.indexOf(e) : -1;
  return i > -1 ? n.panels[i] : null;
}
const vE = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.input = t.state.facet(_u), this.specs = this.input.filter((n) => n), this.panels = this.specs.map((n) => n(t));
    let e = t.state.facet(Zk);
    this.top = new zf(t, !0, e.topContainer), this.bottom = new zf(t, !1, e.bottomContainer), this.top.sync(this.panels.filter((n) => n.top)), this.bottom.sync(this.panels.filter((n) => !n.top));
    for (let n of this.panels)
      n.dom.classList.add("cm-panel"), n.mount && n.mount();
  }
  update(t) {
    let e = t.state.facet(Zk);
    this.top.container != e.topContainer && (this.top.sync([]), this.top = new zf(t.view, !0, e.topContainer)), this.bottom.container != e.bottomContainer && (this.bottom.sync([]), this.bottom = new zf(t.view, !1, e.bottomContainer)), this.top.syncClasses(), this.bottom.syncClasses();
    let n = t.state.facet(_u);
    if (n != this.input) {
      let i = n.filter((a) => a), r = [], s = [], o = [], l = [];
      for (let a of i) {
        let c = this.specs.indexOf(a), u;
        c < 0 ? (u = a(t.view), l.push(u)) : (u = this.panels[c], u.update && u.update(t)), r.push(u), (u.top ? s : o).push(u);
      }
      this.specs = i, this.panels = r, this.top.sync(s), this.bottom.sync(o);
      for (let a of l)
        a.dom.classList.add("cm-panel"), a.mount && a.mount();
    } else
      for (let i of this.panels)
        i.update && i.update(t);
  }
  destroy() {
    this.top.sync([]), this.bottom.sync([]);
  }
}, {
  provide: (t) => $e.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return n && { top: n.top.scrollMargin(), bottom: n.bottom.scrollMargin() };
  })
});
class zf {
  constructor(e, n, i) {
    this.view = e, this.top = n, this.container = i, this.dom = void 0, this.classes = "", this.panels = [], this.syncClasses();
  }
  sync(e) {
    for (let n of this.panels)
      n.destroy && e.indexOf(n) < 0 && n.destroy();
    this.panels = e, this.syncDOM();
  }
  syncDOM() {
    if (this.panels.length == 0) {
      this.dom && (this.dom.remove(), this.dom = void 0);
      return;
    }
    if (!this.dom) {
      this.dom = document.createElement("div"), this.dom.className = this.top ? "cm-panels cm-panels-top" : "cm-panels cm-panels-bottom", this.dom.style[this.top ? "top" : "bottom"] = "0";
      let n = this.container || this.view.dom;
      n.insertBefore(this.dom, this.top ? n.firstChild : null);
    }
    let e = this.dom.firstChild;
    for (let n of this.panels)
      if (n.dom.parentNode == this.dom) {
        for (; e != n.dom; )
          e = $k(e);
        e = e.nextSibling;
      } else
        this.dom.insertBefore(n.dom, e);
    for (; e; )
      e = $k(e);
  }
  scrollMargin() {
    return !this.dom || this.container ? 0 : Math.max(0, this.top ? this.dom.getBoundingClientRect().bottom - Math.max(0, this.view.scrollDOM.getBoundingClientRect().top) : Math.min(innerHeight, this.view.scrollDOM.getBoundingClientRect().bottom) - this.dom.getBoundingClientRect().top);
  }
  syncClasses() {
    if (!(!this.container || this.classes == this.view.themeClasses)) {
      for (let e of this.classes.split(" "))
        e && this.container.classList.remove(e);
      for (let e of (this.classes = this.view.themeClasses).split(" "))
        e && this.container.classList.add(e);
    }
  }
}
function $k(t) {
  let e = t.nextSibling;
  return t.remove(), e;
}
const _u = /* @__PURE__ */ et.define({
  enables: vE
});
class Os extends Pl {
  compare(e) {
    return this == e || this.constructor == e.constructor && this.eq(e);
  }
  eq(e) {
    return !1;
  }
  destroy(e) {
  }
}
Os.prototype.elementClass = "";
Os.prototype.toDOM = void 0;
Os.prototype.mapMode = Di.TrackBefore;
Os.prototype.startSide = Os.prototype.endSide = -1;
Os.prototype.point = !0;
const vh = /* @__PURE__ */ et.define(), KJ = {
  class: "",
  renderEmptyElements: !1,
  elementStyle: "",
  markers: () => Vt.empty,
  lineMarker: () => null,
  lineMarkerChange: null,
  initialSpacer: null,
  updateSpacer: null,
  domEventHandlers: {}
}, Uc = /* @__PURE__ */ et.define();
function kE(t) {
  return [CE(), Uc.of(Object.assign(Object.assign({}, KJ), t))];
}
const x1 = /* @__PURE__ */ et.define({
  combine: (t) => t.some((e) => e)
});
function CE(t) {
  let e = [
    GJ
  ];
  return t && t.fixed === !1 && e.push(x1.of(!0)), e;
}
const GJ = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.prevViewport = t.viewport, this.dom = document.createElement("div"), this.dom.className = "cm-gutters", this.dom.setAttribute("aria-hidden", "true"), this.dom.style.minHeight = this.view.contentHeight + "px", this.gutters = t.state.facet(Uc).map((e) => new tC(t, e));
    for (let e of this.gutters)
      this.dom.appendChild(e.dom);
    this.fixed = !t.state.facet(x1), this.fixed && (this.dom.style.position = "sticky"), this.syncGutters(!1), t.scrollDOM.insertBefore(this.dom, t.contentDOM);
  }
  update(t) {
    if (this.updateGutters(t)) {
      let e = this.prevViewport, n = t.view.viewport, i = Math.min(e.to, n.to) - Math.max(e.from, n.from);
      this.syncGutters(i < (n.to - n.from) * 0.8);
    }
    t.geometryChanged && (this.dom.style.minHeight = this.view.contentHeight + "px"), this.view.state.facet(x1) != !this.fixed && (this.fixed = !this.fixed, this.dom.style.position = this.fixed ? "sticky" : ""), this.prevViewport = t.view.viewport;
  }
  syncGutters(t) {
    let e = this.dom.nextSibling;
    t && this.dom.remove();
    let n = Vt.iter(this.view.state.facet(vh), this.view.viewport.from), i = [], r = this.gutters.map((s) => new YJ(s, this.view.viewport, -this.view.documentPadding.top));
    for (let s of this.view.viewportLineBlocks) {
      let o;
      if (Array.isArray(s.type)) {
        for (let l of s.type)
          if (l.type == ln.Text) {
            o = l;
            break;
          }
      } else
        o = s.type == ln.Text ? s : void 0;
      if (o) {
        i.length && (i = []), SE(n, i, s.from);
        for (let l of r)
          l.line(this.view, o, i);
      }
    }
    for (let s of r)
      s.finish();
    t && this.view.scrollDOM.insertBefore(this.dom, e);
  }
  updateGutters(t) {
    let e = t.startState.facet(Uc), n = t.state.facet(Uc), i = t.docChanged || t.heightChanged || t.viewportChanged || !Vt.eq(t.startState.facet(vh), t.state.facet(vh), t.view.viewport.from, t.view.viewport.to);
    if (e == n)
      for (let r of this.gutters)
        r.update(t) && (i = !0);
    else {
      i = !0;
      let r = [];
      for (let s of n) {
        let o = e.indexOf(s);
        o < 0 ? r.push(new tC(this.view, s)) : (this.gutters[o].update(t), r.push(this.gutters[o]));
      }
      for (let s of this.gutters)
        s.dom.remove(), r.indexOf(s) < 0 && s.destroy();
      for (let s of r)
        this.dom.appendChild(s.dom);
      this.gutters = r;
    }
    return i;
  }
  destroy() {
    for (let t of this.gutters)
      t.destroy();
    this.dom.remove();
  }
}, {
  provide: (t) => $e.scrollMargins.of((e) => {
    let n = e.plugin(t);
    return !n || n.gutters.length == 0 || !n.fixed ? null : e.textDirection == Mn.LTR ? { left: n.dom.offsetWidth } : { right: n.dom.offsetWidth };
  })
});
function eC(t) {
  return Array.isArray(t) ? t : [t];
}
function SE(t, e, n) {
  for (; t.value && t.from <= n; )
    t.from == n && e.push(t.value), t.next();
}
class YJ {
  constructor(e, n, i) {
    this.gutter = e, this.height = i, this.localMarkers = [], this.i = 0, this.cursor = Vt.iter(e.markers, n.from);
  }
  line(e, n, i) {
    this.localMarkers.length && (this.localMarkers = []), SE(this.cursor, this.localMarkers, n.from);
    let r = i.length ? this.localMarkers.concat(i) : this.localMarkers, s = this.gutter.config.lineMarker(e, n, r);
    s && r.unshift(s);
    let o = this.gutter;
    if (r.length == 0 && !o.config.renderEmptyElements)
      return;
    let l = n.top - this.height;
    if (this.i == o.elements.length) {
      let a = new EE(e, n.height, l, r);
      o.elements.push(a), o.dom.appendChild(a.dom);
    } else
      o.elements[this.i].update(e, n.height, l, r);
    this.height = n.bottom, this.i++;
  }
  finish() {
    let e = this.gutter;
    for (; e.elements.length > this.i; ) {
      let n = e.elements.pop();
      e.dom.removeChild(n.dom), n.destroy();
    }
  }
}
class tC {
  constructor(e, n) {
    this.view = e, this.config = n, this.elements = [], this.spacer = null, this.dom = document.createElement("div"), this.dom.className = "cm-gutter" + (this.config.class ? " " + this.config.class : "");
    for (let i in n.domEventHandlers)
      this.dom.addEventListener(i, (r) => {
        let s = e.lineBlockAtHeight(r.clientY - e.documentTop);
        n.domEventHandlers[i](e, s, r) && r.preventDefault();
      });
    this.markers = eC(n.markers(e)), n.initialSpacer && (this.spacer = new EE(e, 0, 0, [n.initialSpacer(e)]), this.dom.appendChild(this.spacer.dom), this.spacer.dom.style.cssText += "visibility: hidden; pointer-events: none");
  }
  update(e) {
    let n = this.markers;
    if (this.markers = eC(this.config.markers(e.view)), this.spacer && this.config.updateSpacer) {
      let r = this.config.updateSpacer(this.spacer.markers[0], e);
      r != this.spacer.markers[0] && this.spacer.update(e.view, 0, 0, [r]);
    }
    let i = e.view.viewport;
    return !Vt.eq(this.markers, n, i.from, i.to) || (this.config.lineMarkerChange ? this.config.lineMarkerChange(e) : !1);
  }
  destroy() {
    for (let e of this.elements)
      e.destroy();
  }
}
class EE {
  constructor(e, n, i, r) {
    this.height = -1, this.above = 0, this.markers = [], this.dom = document.createElement("div"), this.dom.className = "cm-gutterElement", this.update(e, n, i, r);
  }
  update(e, n, i, r) {
    this.height != n && (this.dom.style.height = (this.height = n) + "px"), this.above != i && (this.dom.style.marginTop = (this.above = i) ? i + "px" : ""), XJ(this.markers, r) || this.setMarkers(e, r);
  }
  setMarkers(e, n) {
    let i = "cm-gutterElement", r = this.dom.firstChild;
    for (let s = 0, o = 0; ; ) {
      let l = o, a = s < n.length ? n[s++] : null, c = !1;
      if (a) {
        let u = a.elementClass;
        u && (i += " " + u);
        for (let f = o; f < this.markers.length; f++)
          if (this.markers[f].compare(a)) {
            l = f, c = !0;
            break;
          }
      } else
        l = this.markers.length;
      for (; o < l; ) {
        let u = this.markers[o++];
        if (u.toDOM) {
          u.destroy(r);
          let f = r.nextSibling;
          r.remove(), r = f;
        }
      }
      if (!a)
        break;
      a.toDOM && (c ? r = r.nextSibling : this.dom.insertBefore(a.toDOM(e), r)), c && o++;
    }
    this.dom.className = i, this.markers = n;
  }
  destroy() {
    this.setMarkers(null, []);
  }
}
function XJ(t, e) {
  if (t.length != e.length)
    return !1;
  for (let n = 0; n < t.length; n++)
    if (!t[n].compare(e[n]))
      return !1;
  return !0;
}
const QJ = /* @__PURE__ */ et.define(), ua = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, { formatNumber: String, domEventHandlers: {} }, {
      domEventHandlers(e, n) {
        let i = Object.assign({}, e);
        for (let r in n) {
          let s = i[r], o = n[r];
          i[r] = s ? (l, a, c) => s(l, a, c) || o(l, a, c) : o;
        }
        return i;
      }
    });
  }
});
class Yg extends Os {
  constructor(e) {
    super(), this.number = e;
  }
  eq(e) {
    return this.number == e.number;
  }
  toDOM() {
    return document.createTextNode(this.number);
  }
}
function Xg(t, e) {
  return t.state.facet(ua).formatNumber(e, t.state);
}
const ZJ = /* @__PURE__ */ Uc.compute([ua], (t) => ({
  class: "cm-lineNumbers",
  renderEmptyElements: !1,
  markers(e) {
    return e.state.facet(QJ);
  },
  lineMarker(e, n, i) {
    return i.some((r) => r.toDOM) ? null : new Yg(Xg(e, e.state.doc.lineAt(n.from).number));
  },
  lineMarkerChange: (e) => e.startState.facet(ua) != e.state.facet(ua),
  initialSpacer(e) {
    return new Yg(Xg(e, nC(e.state.doc.lines)));
  },
  updateSpacer(e, n) {
    let i = Xg(n.view, nC(n.view.state.doc.lines));
    return i == e.number ? e : new Yg(i);
  },
  domEventHandlers: t.facet(ua).domEventHandlers
}));
function $J(t = {}) {
  return [
    ua.of(t),
    CE(),
    ZJ
  ];
}
function nC(t) {
  let e = 9;
  for (; e < t; )
    e = e * 10 + 9;
  return e;
}
const eK = /* @__PURE__ */ new class extends Os {
  constructor() {
    super(...arguments), this.elementClass = "cm-activeLineGutter";
  }
}(), tK = /* @__PURE__ */ vh.compute(["selection"], (t) => {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.head).from;
    r > n && (n = r, e.push(eK.range(r)));
  }
  return Vt.of(e);
});
function nK() {
  return tK;
}
const AE = 1024;
let iK = 0;
class Qg {
  constructor(e, n) {
    this.from = e, this.to = n;
  }
}
class Tt {
  constructor(e = {}) {
    this.id = iK++, this.perNode = !!e.perNode, this.deserialize = e.deserialize || (() => {
      throw new Error("This node type doesn't define a deserialize function");
    });
  }
  add(e) {
    if (this.perNode)
      throw new RangeError("Can't add per-node props to node types");
    return typeof e != "function" && (e = Ki.match(e)), (n) => {
      let i = e(n);
      return i === void 0 ? null : [this, i];
    };
  }
}
Tt.closedBy = new Tt({ deserialize: (t) => t.split(" ") });
Tt.openedBy = new Tt({ deserialize: (t) => t.split(" ") });
Tt.group = new Tt({ deserialize: (t) => t.split(" ") });
Tt.contextHash = new Tt({ perNode: !0 });
Tt.lookAhead = new Tt({ perNode: !0 });
Tt.mounted = new Tt({ perNode: !0 });
const rK = /* @__PURE__ */ Object.create(null);
class Ki {
  constructor(e, n, i, r = 0) {
    this.name = e, this.props = n, this.id = i, this.flags = r;
  }
  static define(e) {
    let n = e.props && e.props.length ? /* @__PURE__ */ Object.create(null) : rK, i = (e.top ? 1 : 0) | (e.skipped ? 2 : 0) | (e.error ? 4 : 0) | (e.name == null ? 8 : 0), r = new Ki(e.name || "", n, e.id, i);
    if (e.props) {
      for (let s of e.props)
        if (Array.isArray(s) || (s = s(r)), s) {
          if (s[0].perNode)
            throw new RangeError("Can't store a per-node prop on a node type");
          n[s[0].id] = s[1];
        }
    }
    return r;
  }
  prop(e) {
    return this.props[e.id];
  }
  get isTop() {
    return (this.flags & 1) > 0;
  }
  get isSkipped() {
    return (this.flags & 2) > 0;
  }
  get isError() {
    return (this.flags & 4) > 0;
  }
  get isAnonymous() {
    return (this.flags & 8) > 0;
  }
  is(e) {
    if (typeof e == "string") {
      if (this.name == e)
        return !0;
      let n = this.prop(Tt.group);
      return n ? n.indexOf(e) > -1 : !1;
    }
    return this.id == e;
  }
  static match(e) {
    let n = /* @__PURE__ */ Object.create(null);
    for (let i in e)
      for (let r of i.split(" "))
        n[r] = e[i];
    return (i) => {
      for (let r = i.prop(Tt.group), s = -1; s < (r ? r.length : 0); s++) {
        let o = n[s < 0 ? i.name : r[s]];
        if (o)
          return o;
      }
    };
  }
}
Ki.none = new Ki("", /* @__PURE__ */ Object.create(null), 0, 8);
class Mb {
  constructor(e) {
    this.types = e;
    for (let n = 0; n < e.length; n++)
      if (e[n].id != n)
        throw new RangeError("Node type ids should correspond to array positions when creating a node set");
  }
  extend(...e) {
    let n = [];
    for (let i of this.types) {
      let r = null;
      for (let s of e) {
        let o = s(i);
        o && (r || (r = Object.assign({}, i.props)), r[o[0].id] = o[1]);
      }
      n.push(r ? new Ki(i.name, r, i.id, i.flags) : i);
    }
    return new Mb(n);
  }
}
const Vf = /* @__PURE__ */ new WeakMap(), iC = /* @__PURE__ */ new WeakMap();
var Ei;
(function(t) {
  t[t.ExcludeBuffers = 1] = "ExcludeBuffers", t[t.IncludeAnonymous = 2] = "IncludeAnonymous", t[t.IgnoreMounts = 4] = "IgnoreMounts", t[t.IgnoreOverlays = 8] = "IgnoreOverlays";
})(Ei || (Ei = {}));
class Xn {
  constructor(e, n, i, r, s) {
    if (this.type = e, this.children = n, this.positions = i, this.length = r, this.props = null, s && s.length) {
      this.props = /* @__PURE__ */ Object.create(null);
      for (let [o, l] of s)
        this.props[typeof o == "number" ? o : o.id] = l;
    }
  }
  toString() {
    let e = this.prop(Tt.mounted);
    if (e && !e.overlay)
      return e.tree.toString();
    let n = "";
    for (let i of this.children) {
      let r = i.toString();
      r && (n && (n += ","), n += r);
    }
    return this.type.name ? (/\W/.test(this.type.name) && !this.type.isError ? JSON.stringify(this.type.name) : this.type.name) + (n.length ? "(" + n + ")" : "") : n;
  }
  cursor(e = 0) {
    return new gd(this.topNode, e);
  }
  cursorAt(e, n = 0, i = 0) {
    let r = Vf.get(this) || this.topNode, s = new gd(r);
    return s.moveTo(e, n), Vf.set(this, s._tree), s;
  }
  get topNode() {
    return new Js(this, 0, 0, null);
  }
  resolve(e, n = 0) {
    let i = Va(Vf.get(this) || this.topNode, e, n, !1);
    return Vf.set(this, i), i;
  }
  resolveInner(e, n = 0) {
    let i = Va(iC.get(this) || this.topNode, e, n, !0);
    return iC.set(this, i), i;
  }
  iterate(e) {
    let { enter: n, leave: i, from: r = 0, to: s = this.length } = e;
    for (let o = this.cursor((e.mode || 0) | Ei.IncludeAnonymous); ; ) {
      let l = !1;
      if (o.from <= s && o.to >= r && (o.type.isAnonymous || n(o) !== !1)) {
        if (o.firstChild())
          continue;
        l = !0;
      }
      for (; l && i && !o.type.isAnonymous && i(o), !o.nextSibling(); ) {
        if (!o.parent())
          return;
        l = !0;
      }
    }
  }
  prop(e) {
    return e.perNode ? this.props ? this.props[e.id] : void 0 : this.type.prop(e);
  }
  get propValues() {
    let e = [];
    if (this.props)
      for (let n in this.props)
        e.push([+n, this.props[n]]);
    return e;
  }
  balance(e = {}) {
    return this.children.length <= 8 ? this : Rb(Ki.none, this.children, this.positions, 0, this.children.length, 0, this.length, (n, i, r) => new Xn(this.type, n, i, r, this.propValues), e.makeTree || ((n, i, r) => new Xn(Ki.none, n, i, r)));
  }
  static build(e) {
    return oK(e);
  }
}
Xn.empty = new Xn(Ki.none, [], [], 0);
class Ob {
  constructor(e, n) {
    this.buffer = e, this.index = n;
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  get pos() {
    return this.index;
  }
  next() {
    this.index -= 4;
  }
  fork() {
    return new Ob(this.buffer, this.index);
  }
}
class Jl {
  constructor(e, n, i) {
    this.buffer = e, this.length = n, this.set = i;
  }
  get type() {
    return Ki.none;
  }
  toString() {
    let e = [];
    for (let n = 0; n < this.buffer.length; )
      e.push(this.childString(n)), n = this.buffer[n + 3];
    return e.join(",");
  }
  childString(e) {
    let n = this.buffer[e], i = this.buffer[e + 3], r = this.set.types[n], s = r.name;
    if (/\W/.test(s) && !r.isError && (s = JSON.stringify(s)), e += 4, i == e)
      return s;
    let o = [];
    for (; e < i; )
      o.push(this.childString(e)), e = this.buffer[e + 3];
    return s + "(" + o.join(",") + ")";
  }
  findChild(e, n, i, r, s) {
    let { buffer: o } = this, l = -1;
    for (let a = e; a != n && !(ME(s, r, o[a + 1], o[a + 2]) && (l = a, i > 0)); a = o[a + 3])
      ;
    return l;
  }
  slice(e, n, i) {
    let r = this.buffer, s = new Uint16Array(n - e), o = 0;
    for (let l = e, a = 0; l < n; ) {
      s[a++] = r[l++], s[a++] = r[l++] - i;
      let c = s[a++] = r[l++] - i;
      s[a++] = r[l++] - e, o = Math.max(o, c);
    }
    return new Jl(s, o, this.set);
  }
}
function ME(t, e, n, i) {
  switch (t) {
    case -2:
      return n < e;
    case -1:
      return i >= e && n < e;
    case 0:
      return n < e && i > e;
    case 1:
      return n <= e && i > e;
    case 2:
      return i > e;
    case 4:
      return !0;
  }
}
function OE(t, e) {
  let n = t.childBefore(e);
  for (; n; ) {
    let i = n.lastChild;
    if (!i || i.to != n.to)
      break;
    i.type.isError && i.from == i.to ? (t = n, n = i.prevSibling) : n = i;
  }
  return t;
}
function Va(t, e, n, i) {
  for (var r; t.from == t.to || (n < 1 ? t.from >= e : t.from > e) || (n > -1 ? t.to <= e : t.to < e); ) {
    let o = !i && t instanceof Js && t.index < 0 ? null : t.parent;
    if (!o)
      return t;
    t = o;
  }
  let s = i ? 0 : Ei.IgnoreOverlays;
  if (i)
    for (let o = t, l = o.parent; l; o = l, l = o.parent)
      o instanceof Js && o.index < 0 && ((r = l.enter(e, n, s)) === null || r === void 0 ? void 0 : r.from) != o.from && (t = l);
  for (; ; ) {
    let o = t.enter(e, n, s);
    if (!o)
      return t;
    t = o;
  }
}
class Js {
  constructor(e, n, i, r) {
    this._tree = e, this.from = n, this.index = i, this._parent = r;
  }
  get type() {
    return this._tree.type;
  }
  get name() {
    return this._tree.type.name;
  }
  get to() {
    return this.from + this._tree.length;
  }
  nextChild(e, n, i, r, s = 0) {
    for (let o = this; ; ) {
      for (let { children: l, positions: a } = o._tree, c = n > 0 ? l.length : -1; e != c; e += n) {
        let u = l[e], f = a[e] + o.from;
        if (ME(r, i, f, f + u.length)) {
          if (u instanceof Jl) {
            if (s & Ei.ExcludeBuffers)
              continue;
            let h = u.findChild(0, u.buffer.length, n, i - f, r);
            if (h > -1)
              return new Ao(new sK(o, u, e, f), null, h);
          } else if (s & Ei.IncludeAnonymous || !u.type.isAnonymous || Tb(u)) {
            let h;
            if (!(s & Ei.IgnoreMounts) && u.props && (h = u.prop(Tt.mounted)) && !h.overlay)
              return new Js(h.tree, f, e, o);
            let d = new Js(u, f, e, o);
            return s & Ei.IncludeAnonymous || !d.type.isAnonymous ? d : d.nextChild(n < 0 ? u.children.length - 1 : 0, n, i, r);
          }
        }
      }
      if (s & Ei.IncludeAnonymous || !o.type.isAnonymous || (o.index >= 0 ? e = o.index + n : e = n < 0 ? -1 : o._parent._tree.children.length, o = o._parent, !o))
        return null;
    }
  }
  get firstChild() {
    return this.nextChild(0, 1, 0, 4);
  }
  get lastChild() {
    return this.nextChild(this._tree.children.length - 1, -1, 0, 4);
  }
  childAfter(e) {
    return this.nextChild(0, 1, e, 2);
  }
  childBefore(e) {
    return this.nextChild(this._tree.children.length - 1, -1, e, -2);
  }
  enter(e, n, i = 0) {
    let r;
    if (!(i & Ei.IgnoreOverlays) && (r = this._tree.prop(Tt.mounted)) && r.overlay) {
      let s = e - this.from;
      for (let { from: o, to: l } of r.overlay)
        if ((n > 0 ? o <= s : o < s) && (n < 0 ? l >= s : l > s))
          return new Js(r.tree, r.overlay[0].from + this.from, -1, this);
    }
    return this.nextChild(0, 1, e, n, i);
  }
  nextSignificantParent() {
    let e = this;
    for (; e.type.isAnonymous && e._parent; )
      e = e._parent;
    return e;
  }
  get parent() {
    return this._parent ? this._parent.nextSignificantParent() : null;
  }
  get nextSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index + 1, 1, 0, 4) : null;
  }
  get prevSibling() {
    return this._parent && this.index >= 0 ? this._parent.nextChild(this.index - 1, -1, 0, 4) : null;
  }
  cursor(e = 0) {
    return new gd(this, e);
  }
  get tree() {
    return this._tree;
  }
  toTree() {
    return this._tree;
  }
  resolve(e, n = 0) {
    return Va(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Va(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return OE(this, e);
  }
  getChild(e, n = null, i = null) {
    let r = dd(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return dd(this, e, n, i);
  }
  toString() {
    return this._tree.toString();
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return pd(this, e);
  }
}
function dd(t, e, n, i) {
  let r = t.cursor(), s = [];
  if (!r.firstChild())
    return s;
  if (n != null) {
    for (; !r.type.is(n); )
      if (!r.nextSibling())
        return s;
  }
  for (; ; ) {
    if (i != null && r.type.is(i))
      return s;
    if (r.type.is(e) && s.push(r.node), !r.nextSibling())
      return i == null ? s : [];
  }
}
function pd(t, e, n = e.length - 1) {
  for (let i = t.parent; n >= 0; i = i.parent) {
    if (!i)
      return !1;
    if (!i.type.isAnonymous) {
      if (e[n] && e[n] != i.name)
        return !1;
      n--;
    }
  }
  return !0;
}
class sK {
  constructor(e, n, i, r) {
    this.parent = e, this.buffer = n, this.index = i, this.start = r;
  }
}
class Ao {
  get name() {
    return this.type.name;
  }
  get from() {
    return this.context.start + this.context.buffer.buffer[this.index + 1];
  }
  get to() {
    return this.context.start + this.context.buffer.buffer[this.index + 2];
  }
  constructor(e, n, i) {
    this.context = e, this._parent = n, this.index = i, this.type = e.buffer.set.types[e.buffer.buffer[i]];
  }
  child(e, n, i) {
    let { buffer: r } = this.context, s = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.context.start, i);
    return s < 0 ? null : new Ao(this.context, this, s);
  }
  get firstChild() {
    return this.child(1, 0, 4);
  }
  get lastChild() {
    return this.child(-1, 0, 4);
  }
  childAfter(e) {
    return this.child(1, e, 2);
  }
  childBefore(e) {
    return this.child(-1, e, -2);
  }
  enter(e, n, i = 0) {
    if (i & Ei.ExcludeBuffers)
      return null;
    let { buffer: r } = this.context, s = r.findChild(this.index + 4, r.buffer[this.index + 3], n > 0 ? 1 : -1, e - this.context.start, n);
    return s < 0 ? null : new Ao(this.context, this, s);
  }
  get parent() {
    return this._parent || this.context.parent.nextSignificantParent();
  }
  externalSibling(e) {
    return this._parent ? null : this.context.parent.nextChild(this.context.index + e, e, 0, 4);
  }
  get nextSibling() {
    let { buffer: e } = this.context, n = e.buffer[this.index + 3];
    return n < (this._parent ? e.buffer[this._parent.index + 3] : e.buffer.length) ? new Ao(this.context, this._parent, n) : this.externalSibling(1);
  }
  get prevSibling() {
    let { buffer: e } = this.context, n = this._parent ? this._parent.index + 4 : 0;
    return this.index == n ? this.externalSibling(-1) : new Ao(this.context, this._parent, e.findChild(n, this.index, -1, 0, 4));
  }
  cursor(e = 0) {
    return new gd(this, e);
  }
  get tree() {
    return null;
  }
  toTree() {
    let e = [], n = [], { buffer: i } = this.context, r = this.index + 4, s = i.buffer[this.index + 3];
    if (s > r) {
      let o = i.buffer[this.index + 1];
      e.push(i.slice(r, s, o)), n.push(0);
    }
    return new Xn(this.type, e, n, this.to - this.from);
  }
  resolve(e, n = 0) {
    return Va(this, e, n, !1);
  }
  resolveInner(e, n = 0) {
    return Va(this, e, n, !0);
  }
  enterUnfinishedNodesBefore(e) {
    return OE(this, e);
  }
  toString() {
    return this.context.buffer.childString(this.index);
  }
  getChild(e, n = null, i = null) {
    let r = dd(this, e, n, i);
    return r.length ? r[0] : null;
  }
  getChildren(e, n = null, i = null) {
    return dd(this, e, n, i);
  }
  get node() {
    return this;
  }
  matchContext(e) {
    return pd(this, e);
  }
}
class gd {
  get name() {
    return this.type.name;
  }
  constructor(e, n = 0) {
    if (this.mode = n, this.buffer = null, this.stack = [], this.index = 0, this.bufferNode = null, e instanceof Js)
      this.yieldNode(e);
    else {
      this._tree = e.context.parent, this.buffer = e.context;
      for (let i = e._parent; i; i = i._parent)
        this.stack.unshift(i.index);
      this.bufferNode = e, this.yieldBuf(e.index);
    }
  }
  yieldNode(e) {
    return e ? (this._tree = e, this.type = e.type, this.from = e.from, this.to = e.to, !0) : !1;
  }
  yieldBuf(e, n) {
    this.index = e;
    let { start: i, buffer: r } = this.buffer;
    return this.type = n || r.set.types[r.buffer[e]], this.from = i + r.buffer[e + 1], this.to = i + r.buffer[e + 2], !0;
  }
  yield(e) {
    return e ? e instanceof Js ? (this.buffer = null, this.yieldNode(e)) : (this.buffer = e.context, this.yieldBuf(e.index, e.type)) : !1;
  }
  toString() {
    return this.buffer ? this.buffer.buffer.childString(this.index) : this._tree.toString();
  }
  enterChild(e, n, i) {
    if (!this.buffer)
      return this.yield(this._tree.nextChild(e < 0 ? this._tree._tree.children.length - 1 : 0, e, n, i, this.mode));
    let { buffer: r } = this.buffer, s = r.findChild(this.index + 4, r.buffer[this.index + 3], e, n - this.buffer.start, i);
    return s < 0 ? !1 : (this.stack.push(this.index), this.yieldBuf(s));
  }
  firstChild() {
    return this.enterChild(1, 0, 4);
  }
  lastChild() {
    return this.enterChild(-1, 0, 4);
  }
  childAfter(e) {
    return this.enterChild(1, e, 2);
  }
  childBefore(e) {
    return this.enterChild(-1, e, -2);
  }
  enter(e, n, i = this.mode) {
    return this.buffer ? i & Ei.ExcludeBuffers ? !1 : this.enterChild(1, e, n) : this.yield(this._tree.enter(e, n, i));
  }
  parent() {
    if (!this.buffer)
      return this.yieldNode(this.mode & Ei.IncludeAnonymous ? this._tree._parent : this._tree.parent);
    if (this.stack.length)
      return this.yieldBuf(this.stack.pop());
    let e = this.mode & Ei.IncludeAnonymous ? this.buffer.parent : this.buffer.parent.nextSignificantParent();
    return this.buffer = null, this.yieldNode(e);
  }
  sibling(e) {
    if (!this.buffer)
      return this._tree._parent ? this.yield(this._tree.index < 0 ? null : this._tree._parent.nextChild(this._tree.index + e, e, 0, 4, this.mode)) : !1;
    let { buffer: n } = this.buffer, i = this.stack.length - 1;
    if (e < 0) {
      let r = i < 0 ? 0 : this.stack[i] + 4;
      if (this.index != r)
        return this.yieldBuf(n.findChild(r, this.index, -1, 0, 4));
    } else {
      let r = n.buffer[this.index + 3];
      if (r < (i < 0 ? n.buffer.length : n.buffer[this.stack[i] + 3]))
        return this.yieldBuf(r);
    }
    return i < 0 ? this.yield(this.buffer.parent.nextChild(this.buffer.index + e, e, 0, 4, this.mode)) : !1;
  }
  nextSibling() {
    return this.sibling(1);
  }
  prevSibling() {
    return this.sibling(-1);
  }
  atLastNode(e) {
    let n, i, { buffer: r } = this;
    if (r) {
      if (e > 0) {
        if (this.index < r.buffer.buffer.length)
          return !1;
      } else
        for (let s = 0; s < this.index; s++)
          if (r.buffer.buffer[s + 3] < this.index)
            return !1;
      ({ index: n, parent: i } = r);
    } else
      ({ index: n, _parent: i } = this._tree);
    for (; i; { index: n, _parent: i } = i)
      if (n > -1)
        for (let s = n + e, o = e < 0 ? -1 : i._tree.children.length; s != o; s += e) {
          let l = i._tree.children[s];
          if (this.mode & Ei.IncludeAnonymous || l instanceof Jl || !l.type.isAnonymous || Tb(l))
            return !1;
        }
    return !0;
  }
  move(e, n) {
    if (n && this.enterChild(e, 0, 4))
      return !0;
    for (; ; ) {
      if (this.sibling(e))
        return !0;
      if (this.atLastNode(e) || !this.parent())
        return !1;
    }
  }
  next(e = !0) {
    return this.move(1, e);
  }
  prev(e = !0) {
    return this.move(-1, e);
  }
  moveTo(e, n = 0) {
    for (; (this.from == this.to || (n < 1 ? this.from >= e : this.from > e) || (n > -1 ? this.to <= e : this.to < e)) && this.parent(); )
      ;
    for (; this.enterChild(1, e, n); )
      ;
    return this;
  }
  get node() {
    if (!this.buffer)
      return this._tree;
    let e = this.bufferNode, n = null, i = 0;
    if (e && e.context == this.buffer) {
      e:
        for (let r = this.index, s = this.stack.length; s >= 0; ) {
          for (let o = e; o; o = o._parent)
            if (o.index == r) {
              if (r == this.index)
                return o;
              n = o, i = s + 1;
              break e;
            }
          r = this.stack[--s];
        }
    }
    for (let r = i; r < this.stack.length; r++)
      n = new Ao(this.buffer, n, this.stack[r]);
    return this.bufferNode = new Ao(this.buffer, n, this.index);
  }
  get tree() {
    return this.buffer ? null : this._tree._tree;
  }
  iterate(e, n) {
    for (let i = 0; ; ) {
      let r = !1;
      if (this.type.isAnonymous || e(this) !== !1) {
        if (this.firstChild()) {
          i++;
          continue;
        }
        this.type.isAnonymous || (r = !0);
      }
      for (; r && n && n(this), r = this.type.isAnonymous, !this.nextSibling(); ) {
        if (!i)
          return;
        this.parent(), i--, r = !0;
      }
    }
  }
  matchContext(e) {
    if (!this.buffer)
      return pd(this.node, e);
    let { buffer: n } = this.buffer, { types: i } = n.set;
    for (let r = e.length - 1, s = this.stack.length - 1; r >= 0; s--) {
      if (s < 0)
        return pd(this.node, e, r);
      let o = i[n.buffer[this.stack[s]]];
      if (!o.isAnonymous) {
        if (e[r] && e[r] != o.name)
          return !1;
        r--;
      }
    }
    return !0;
  }
}
function Tb(t) {
  return t.children.some((e) => e instanceof Jl || !e.type.isAnonymous || Tb(e));
}
function oK(t) {
  var e;
  let { buffer: n, nodeSet: i, maxBufferLength: r = AE, reused: s = [], minRepeatType: o = i.types.length } = t, l = Array.isArray(n) ? new Ob(n, n.length) : n, a = i.types, c = 0, u = 0;
  function f(k, C, A, w, M) {
    let { id: N, start: T, end: O, size: W } = l, H = u;
    for (; W < 0; )
      if (l.next(), W == -1) {
        let F = s[N];
        A.push(F), w.push(T - k);
        return;
      } else if (W == -3) {
        c = N;
        return;
      } else if (W == -4) {
        u = N;
        return;
      } else
        throw new RangeError(`Unrecognized record size: ${W}`);
    let I = a[N], z, L, K = T - k;
    if (O - T <= r && (L = g(l.pos - C, M))) {
      let F = new Uint16Array(L.size - L.skip), D = l.pos - L.size, X = F.length;
      for (; l.pos > D; )
        X = m(L.start, F, X);
      z = new Jl(F, O - L.start, i), K = L.start - k;
    } else {
      let F = l.pos - W;
      l.next();
      let D = [], X = [], ue = N >= o ? N : -1, q = 0, ee = O;
      for (; l.pos > F; )
        ue >= 0 && l.id == ue && l.size >= 0 ? (l.end <= ee - r && (d(D, X, T, q, l.end, ee, ue, H), q = D.length, ee = l.end), l.next()) : f(T, F, D, X, ue);
      if (ue >= 0 && q > 0 && q < D.length && d(D, X, T, q, T, ee, ue, H), D.reverse(), X.reverse(), ue > -1 && q > 0) {
        let ie = h(I);
        z = Rb(I, D, X, 0, D.length, 0, O - T, ie, ie);
      } else
        z = p(I, D, X, O - T, H - O);
    }
    A.push(z), w.push(K);
  }
  function h(k) {
    return (C, A, w) => {
      let M = 0, N = C.length - 1, T, O;
      if (N >= 0 && (T = C[N]) instanceof Xn) {
        if (!N && T.type == k && T.length == w)
          return T;
        (O = T.prop(Tt.lookAhead)) && (M = A[N] + T.length + O);
      }
      return p(k, C, A, w, M);
    };
  }
  function d(k, C, A, w, M, N, T, O) {
    let W = [], H = [];
    for (; k.length > w; )
      W.push(k.pop()), H.push(C.pop() + A - M);
    k.push(p(i.types[T], W, H, N - M, O - N)), C.push(M - A);
  }
  function p(k, C, A, w, M = 0, N) {
    if (c) {
      let T = [Tt.contextHash, c];
      N = N ? [T].concat(N) : [T];
    }
    if (M > 25) {
      let T = [Tt.lookAhead, M];
      N = N ? [T].concat(N) : [T];
    }
    return new Xn(k, C, A, w, N);
  }
  function g(k, C) {
    let A = l.fork(), w = 0, M = 0, N = 0, T = A.end - r, O = { size: 0, start: 0, skip: 0 };
    e:
      for (let W = A.pos - k; A.pos > W; ) {
        let H = A.size;
        if (A.id == C && H >= 0) {
          O.size = w, O.start = M, O.skip = N, N += 4, w += 4, A.next();
          continue;
        }
        let I = A.pos - H;
        if (H < 0 || I < W || A.start < T)
          break;
        let z = A.id >= o ? 4 : 0, L = A.start;
        for (A.next(); A.pos > I; ) {
          if (A.size < 0)
            if (A.size == -3)
              z += 4;
            else
              break e;
          else
            A.id >= o && (z += 4);
          A.next();
        }
        M = L, w += H, N += z;
      }
    return (C < 0 || w == k) && (O.size = w, O.start = M, O.skip = N), O.size > 4 ? O : void 0;
  }
  function m(k, C, A) {
    let { id: w, start: M, end: N, size: T } = l;
    if (l.next(), T >= 0 && w < o) {
      let O = A;
      if (T > 4) {
        let W = l.pos - (T - 4);
        for (; l.pos > W; )
          A = m(k, C, A);
      }
      C[--A] = O, C[--A] = N - k, C[--A] = M - k, C[--A] = w;
    } else
      T == -3 ? c = w : T == -4 && (u = w);
    return A;
  }
  let _ = [], S = [];
  for (; l.pos > 0; )
    f(t.start || 0, t.bufferStart || 0, _, S, -1);
  let v = (e = t.length) !== null && e !== void 0 ? e : _.length ? S[0] + _[0].length : 0;
  return new Xn(a[t.topID], _.reverse(), S.reverse(), v);
}
const rC = /* @__PURE__ */ new WeakMap();
function kh(t, e) {
  if (!t.isAnonymous || e instanceof Jl || e.type != t)
    return 1;
  let n = rC.get(e);
  if (n == null) {
    n = 1;
    for (let i of e.children) {
      if (i.type != t || !(i instanceof Xn)) {
        n = 1;
        break;
      }
      n += kh(t, i);
    }
    rC.set(e, n);
  }
  return n;
}
function Rb(t, e, n, i, r, s, o, l, a) {
  let c = 0;
  for (let p = i; p < r; p++)
    c += kh(t, e[p]);
  let u = Math.ceil(c * 1.5 / 8), f = [], h = [];
  function d(p, g, m, _, S) {
    for (let v = m; v < _; ) {
      let k = v, C = g[v], A = kh(t, p[v]);
      for (v++; v < _; v++) {
        let w = kh(t, p[v]);
        if (A + w >= u)
          break;
        A += w;
      }
      if (v == k + 1) {
        if (A > u) {
          let w = p[k];
          d(w.children, w.positions, 0, w.children.length, g[k] + S);
          continue;
        }
        f.push(p[k]);
      } else {
        let w = g[v - 1] + p[v - 1].length - C;
        f.push(Rb(t, p, g, k, v, C, w, null, a));
      }
      h.push(C + S - s);
    }
  }
  return d(e, n, i, r, 0), (l || a)(f, h, o);
}
class wl {
  constructor(e, n, i, r, s = !1, o = !1) {
    this.from = e, this.to = n, this.tree = i, this.offset = r, this.open = (s ? 1 : 0) | (o ? 2 : 0);
  }
  get openStart() {
    return (this.open & 1) > 0;
  }
  get openEnd() {
    return (this.open & 2) > 0;
  }
  static addTree(e, n = [], i = !1) {
    let r = [new wl(0, e.length, e, 0, !1, i)];
    for (let s of n)
      s.to > e.length && r.push(s);
    return r;
  }
  static applyChanges(e, n, i = 128) {
    if (!n.length)
      return e;
    let r = [], s = 1, o = e.length ? e[0] : null;
    for (let l = 0, a = 0, c = 0; ; l++) {
      let u = l < n.length ? n[l] : null, f = u ? u.fromA : 1e9;
      if (f - a >= i)
        for (; o && o.from < f; ) {
          let h = o;
          if (a >= h.from || f <= h.to || c) {
            let d = Math.max(h.from, a) - c, p = Math.min(h.to, f) - c;
            h = d >= p ? null : new wl(d, p, h.tree, h.offset + c, l > 0, !!u);
          }
          if (h && r.push(h), o.to > f)
            break;
          o = s < e.length ? e[s++] : null;
        }
      if (!u)
        break;
      a = u.toA, c = u.toA - u.toB;
    }
    return r;
  }
}
let TE = class {
  startParse(e, n, i) {
    return typeof e == "string" && (e = new lK(e)), i = i ? i.length ? i.map((r) => new Qg(r.from, r.to)) : [new Qg(0, 0)] : [new Qg(0, e.length)], this.createParse(e, n || [], i);
  }
  parse(e, n, i) {
    let r = this.startParse(e, n, i);
    for (; ; ) {
      let s = r.advance();
      if (s)
        return s;
    }
  }
};
class lK {
  constructor(e) {
    this.string = e;
  }
  get length() {
    return this.string.length;
  }
  chunk(e) {
    return this.string.slice(e);
  }
  get lineChunks() {
    return !1;
  }
  read(e, n) {
    return this.string.slice(e, n);
  }
}
new Tt({ perNode: !0 });
let aK = 0;
class is {
  constructor(e, n, i) {
    this.set = e, this.base = n, this.modified = i, this.id = aK++;
  }
  static define(e) {
    if (e != null && e.base)
      throw new Error("Can not derive from a modified tag");
    let n = new is([], null, []);
    if (n.set.push(n), e)
      for (let i of e.set)
        n.set.push(i);
    return n;
  }
  static defineModifier() {
    let e = new md();
    return (n) => n.modified.indexOf(e) > -1 ? n : md.get(n.base || n, n.modified.concat(e).sort((i, r) => i.id - r.id));
  }
}
let cK = 0;
class md {
  constructor() {
    this.instances = [], this.id = cK++;
  }
  static get(e, n) {
    if (!n.length)
      return e;
    let i = n[0].instances.find((l) => l.base == e && uK(n, l.modified));
    if (i)
      return i;
    let r = [], s = new is(r, e, n);
    for (let l of n)
      l.instances.push(s);
    let o = fK(n);
    for (let l of e.set)
      if (!l.modified.length)
        for (let a of o)
          r.push(md.get(l, a));
    return s;
  }
}
function uK(t, e) {
  return t.length == e.length && t.every((n, i) => n == e[i]);
}
function fK(t) {
  let e = [[]];
  for (let n = 0; n < t.length; n++)
    for (let i = 0, r = e.length; i < r; i++)
      e.push(e[i].concat(t[n]));
  return e.sort((n, i) => i.length - n.length);
}
function RE(t) {
  let e = /* @__PURE__ */ Object.create(null);
  for (let n in t) {
    let i = t[n];
    Array.isArray(i) || (i = [i]);
    for (let r of n.split(" "))
      if (r) {
        let s = [], o = 2, l = r;
        for (let f = 0; ; ) {
          if (l == "..." && f > 0 && f + 3 == r.length) {
            o = 1;
            break;
          }
          let h = /^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);
          if (!h)
            throw new RangeError("Invalid path: " + r);
          if (s.push(h[0] == "*" ? "" : h[0][0] == '"' ? JSON.parse(h[0]) : h[0]), f += h[0].length, f == r.length)
            break;
          let d = r[f++];
          if (f == r.length && d == "!") {
            o = 0;
            break;
          }
          if (d != "/")
            throw new RangeError("Invalid path: " + r);
          l = r.slice(f);
        }
        let a = s.length - 1, c = s[a];
        if (!c)
          throw new RangeError("Invalid path: " + r);
        let u = new bd(i, o, a > 0 ? s.slice(0, a) : null);
        e[c] = u.sort(e[c]);
      }
  }
  return PE.add(e);
}
const PE = new Tt();
class bd {
  constructor(e, n, i, r) {
    this.tags = e, this.mode = n, this.context = i, this.next = r;
  }
  get opaque() {
    return this.mode == 0;
  }
  get inherit() {
    return this.mode == 1;
  }
  sort(e) {
    return !e || e.depth < this.depth ? (this.next = e, this) : (e.next = this.sort(e.next), e);
  }
  get depth() {
    return this.context ? this.context.length : 0;
  }
}
bd.empty = new bd([], 2, null);
function IE(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let s of t)
    if (!Array.isArray(s.tag))
      n[s.tag.id] = s.class;
    else
      for (let o of s.tag)
        n[o.id] = s.class;
  let { scope: i, all: r = null } = e || {};
  return {
    style: (s) => {
      let o = r;
      for (let l of s)
        for (let a of l.set) {
          let c = n[a.id];
          if (c) {
            o = o ? o + " " + c : c;
            break;
          }
        }
      return o;
    },
    scope: i
  };
}
function hK(t, e) {
  let n = null;
  for (let i of t) {
    let r = i.style(e);
    r && (n = n ? n + " " + r : r);
  }
  return n;
}
function dK(t, e, n, i = 0, r = t.length) {
  let s = new pK(i, Array.isArray(e) ? e : [e], n);
  s.highlightRange(t.cursor(), i, r, "", s.highlighters), s.flush(r);
}
class pK {
  constructor(e, n, i) {
    this.at = e, this.highlighters = n, this.span = i, this.class = "";
  }
  startSpan(e, n) {
    n != this.class && (this.flush(e), e > this.at && (this.at = e), this.class = n);
  }
  flush(e) {
    e > this.at && this.class && this.span(this.at, e, this.class);
  }
  highlightRange(e, n, i, r, s) {
    let { type: o, from: l, to: a } = e;
    if (l >= i || a <= n)
      return;
    o.isTop && (s = this.highlighters.filter((d) => !d.scope || d.scope(o)));
    let c = r, u = gK(e) || bd.empty, f = hK(s, u.tags);
    if (f && (c && (c += " "), c += f, u.mode == 1 && (r += (r ? " " : "") + f)), this.startSpan(e.from, c), u.opaque)
      return;
    let h = e.tree && e.tree.prop(Tt.mounted);
    if (h && h.overlay) {
      let d = e.node.enter(h.overlay[0].from + l, 1), p = this.highlighters.filter((m) => !m.scope || m.scope(h.tree.type)), g = e.firstChild();
      for (let m = 0, _ = l; ; m++) {
        let S = m < h.overlay.length ? h.overlay[m] : null, v = S ? S.from + l : a, k = Math.max(n, _), C = Math.min(i, v);
        if (k < C && g)
          for (; e.from < C && (this.highlightRange(e, k, C, r, s), this.startSpan(Math.min(C, e.to), c), !(e.to >= v || !e.nextSibling())); )
            ;
        if (!S || v > i)
          break;
        _ = S.to + l, _ > n && (this.highlightRange(d.cursor(), Math.max(n, S.from + l), Math.min(i, _), r, p), this.startSpan(_, c));
      }
      g && e.parent();
    } else if (e.firstChild()) {
      do
        if (!(e.to <= n)) {
          if (e.from >= i)
            break;
          this.highlightRange(e, n, i, r, s), this.startSpan(Math.min(i, e.to), c);
        }
      while (e.nextSibling());
      e.parent();
    }
  }
}
function gK(t) {
  let e = t.type.prop(PE);
  for (; e && e.context && !t.matchContext(e.context); )
    e = e.next;
  return e || null;
}
const He = is.define, Uf = He(), po = He(), sC = He(po), oC = He(po), go = He(), Hf = He(go), Zg = He(go), ns = He(), ol = He(ns), $r = He(), es = He(), F1 = He(), _c = He(F1), Wf = He(), Fe = {
  comment: Uf,
  lineComment: He(Uf),
  blockComment: He(Uf),
  docComment: He(Uf),
  name: po,
  variableName: He(po),
  typeName: sC,
  tagName: He(sC),
  propertyName: oC,
  attributeName: He(oC),
  className: He(po),
  labelName: He(po),
  namespace: He(po),
  macroName: He(po),
  literal: go,
  string: Hf,
  docString: He(Hf),
  character: He(Hf),
  attributeValue: He(Hf),
  number: Zg,
  integer: He(Zg),
  float: He(Zg),
  bool: He(go),
  regexp: He(go),
  escape: He(go),
  color: He(go),
  url: He(go),
  keyword: $r,
  self: He($r),
  null: He($r),
  atom: He($r),
  unit: He($r),
  modifier: He($r),
  operatorKeyword: He($r),
  controlKeyword: He($r),
  definitionKeyword: He($r),
  moduleKeyword: He($r),
  operator: es,
  derefOperator: He(es),
  arithmeticOperator: He(es),
  logicOperator: He(es),
  bitwiseOperator: He(es),
  compareOperator: He(es),
  updateOperator: He(es),
  definitionOperator: He(es),
  typeOperator: He(es),
  controlOperator: He(es),
  punctuation: F1,
  separator: He(F1),
  bracket: _c,
  angleBracket: He(_c),
  squareBracket: He(_c),
  paren: He(_c),
  brace: He(_c),
  content: ns,
  heading: ol,
  heading1: He(ol),
  heading2: He(ol),
  heading3: He(ol),
  heading4: He(ol),
  heading5: He(ol),
  heading6: He(ol),
  contentSeparator: He(ns),
  list: He(ns),
  quote: He(ns),
  emphasis: He(ns),
  strong: He(ns),
  link: He(ns),
  monospace: He(ns),
  strikethrough: He(ns),
  inserted: He(),
  deleted: He(),
  changed: He(),
  invalid: He(),
  meta: Wf,
  documentMeta: He(Wf),
  annotation: He(Wf),
  processingInstruction: He(Wf),
  definition: is.defineModifier(),
  constant: is.defineModifier(),
  function: is.defineModifier(),
  standard: is.defineModifier(),
  local: is.defineModifier(),
  special: is.defineModifier()
};
IE([
  { tag: Fe.link, class: "tok-link" },
  { tag: Fe.heading, class: "tok-heading" },
  { tag: Fe.emphasis, class: "tok-emphasis" },
  { tag: Fe.strong, class: "tok-strong" },
  { tag: Fe.keyword, class: "tok-keyword" },
  { tag: Fe.atom, class: "tok-atom" },
  { tag: Fe.bool, class: "tok-bool" },
  { tag: Fe.url, class: "tok-url" },
  { tag: Fe.labelName, class: "tok-labelName" },
  { tag: Fe.inserted, class: "tok-inserted" },
  { tag: Fe.deleted, class: "tok-deleted" },
  { tag: Fe.literal, class: "tok-literal" },
  { tag: Fe.string, class: "tok-string" },
  { tag: Fe.number, class: "tok-number" },
  { tag: [Fe.regexp, Fe.escape, Fe.special(Fe.string)], class: "tok-string2" },
  { tag: Fe.variableName, class: "tok-variableName" },
  { tag: Fe.local(Fe.variableName), class: "tok-variableName tok-local" },
  { tag: Fe.definition(Fe.variableName), class: "tok-variableName tok-definition" },
  { tag: Fe.special(Fe.variableName), class: "tok-variableName2" },
  { tag: Fe.definition(Fe.propertyName), class: "tok-propertyName tok-definition" },
  { tag: Fe.typeName, class: "tok-typeName" },
  { tag: Fe.namespace, class: "tok-namespace" },
  { tag: Fe.className, class: "tok-className" },
  { tag: Fe.macroName, class: "tok-macroName" },
  { tag: Fe.propertyName, class: "tok-propertyName" },
  { tag: Fe.operator, class: "tok-operator" },
  { tag: Fe.comment, class: "tok-comment" },
  { tag: Fe.meta, class: "tok-meta" },
  { tag: Fe.invalid, class: "tok-invalid" },
  { tag: Fe.punctuation, class: "tok-punctuation" }
]);
var $g;
const yu = /* @__PURE__ */ new Tt();
function mK(t) {
  return et.define({
    combine: t ? (e) => e.concat(t) : void 0
  });
}
class Br {
  constructor(e, n, i = [], r = "") {
    this.data = e, this.name = r, Mt.prototype.hasOwnProperty("tree") || Object.defineProperty(Mt.prototype, "tree", { get() {
      return Ri(this);
    } }), this.parser = n, this.extension = [
      Ho.of(this),
      Mt.languageData.of((s, o, l) => s.facet(lC(s, o, l)))
    ].concat(i);
  }
  isActiveAt(e, n, i = -1) {
    return lC(e, n, i) == this.data;
  }
  findRegions(e) {
    let n = e.facet(Ho);
    if ((n == null ? void 0 : n.data) == this.data)
      return [{ from: 0, to: e.doc.length }];
    if (!n || !n.allowsNesting)
      return [];
    let i = [], r = (s, o) => {
      if (s.prop(yu) == this.data) {
        i.push({ from: o, to: o + s.length });
        return;
      }
      let l = s.prop(Tt.mounted);
      if (l) {
        if (l.tree.prop(yu) == this.data) {
          if (l.overlay)
            for (let a of l.overlay)
              i.push({ from: a.from + o, to: a.to + o });
          else
            i.push({ from: o, to: o + s.length });
          return;
        } else if (l.overlay) {
          let a = i.length;
          if (r(l.tree, l.overlay[0].from + o), i.length > a)
            return;
        }
      }
      for (let a = 0; a < s.children.length; a++) {
        let c = s.children[a];
        c instanceof Xn && r(c, s.positions[a] + o);
      }
    };
    return r(Ri(e), 0), i;
  }
  get allowsNesting() {
    return !0;
  }
}
Br.setState = /* @__PURE__ */ kt.define();
function lC(t, e, n) {
  let i = t.facet(Ho);
  if (!i)
    return null;
  let r = i.data;
  if (i.allowsNesting)
    for (let s = Ri(t).topNode; s; s = s.enter(e, n, Ei.ExcludeBuffers))
      r = s.type.prop(yu) || r;
  return r;
}
class _d extends Br {
  constructor(e, n, i) {
    super(e, n, [], i), this.parser = n;
  }
  static define(e) {
    let n = mK(e.languageData);
    return new _d(n, e.parser.configure({
      props: [yu.add((i) => i.isTop ? n : void 0)]
    }), e.name);
  }
  configure(e, n) {
    return new _d(this.data, this.parser.configure(e), n || this.name);
  }
  get allowsNesting() {
    return this.parser.hasWrappers();
  }
}
function Ri(t) {
  let e = t.field(Br.state, !1);
  return e ? e.tree : Xn.empty;
}
class bK {
  constructor(e, n = e.length) {
    this.doc = e, this.length = n, this.cursorPos = 0, this.string = "", this.cursor = e.iter();
  }
  syncTo(e) {
    return this.string = this.cursor.next(e - this.cursorPos).value, this.cursorPos = e + this.string.length, this.cursorPos - this.string.length;
  }
  chunk(e) {
    return this.syncTo(e), this.string;
  }
  get lineChunks() {
    return !0;
  }
  read(e, n) {
    let i = this.cursorPos - this.string.length;
    return e < i || n >= this.cursorPos ? this.doc.sliceString(e, n) : this.string.slice(e - i, n - i);
  }
}
let yc = null;
class yd {
  constructor(e, n, i = [], r, s, o, l, a) {
    this.parser = e, this.state = n, this.fragments = i, this.tree = r, this.treeLen = s, this.viewport = o, this.skipped = l, this.scheduleOn = a, this.parse = null, this.tempSkipped = [];
  }
  static create(e, n, i) {
    return new yd(e, n, [], Xn.empty, 0, i, [], null);
  }
  startParse() {
    return this.parser.startParse(new bK(this.state.doc), this.fragments);
  }
  work(e, n) {
    return n != null && n >= this.state.doc.length && (n = void 0), this.tree != Xn.empty && this.isDone(n ?? this.state.doc.length) ? (this.takeTree(), !0) : this.withContext(() => {
      var i;
      if (typeof e == "number") {
        let r = Date.now() + e;
        e = () => Date.now() > r;
      }
      for (this.parse || (this.parse = this.startParse()), n != null && (this.parse.stoppedAt == null || this.parse.stoppedAt > n) && n < this.state.doc.length && this.parse.stopAt(n); ; ) {
        let r = this.parse.advance();
        if (r)
          if (this.fragments = this.withoutTempSkipped(wl.addTree(r, this.fragments, this.parse.stoppedAt != null)), this.treeLen = (i = this.parse.stoppedAt) !== null && i !== void 0 ? i : this.state.doc.length, this.tree = r, this.parse = null, this.treeLen < (n ?? this.state.doc.length))
            this.parse = this.startParse();
          else
            return !0;
        if (e())
          return !1;
      }
    });
  }
  takeTree() {
    let e, n;
    this.parse && (e = this.parse.parsedPos) >= this.treeLen && ((this.parse.stoppedAt == null || this.parse.stoppedAt > e) && this.parse.stopAt(e), this.withContext(() => {
      for (; !(n = this.parse.advance()); )
        ;
    }), this.treeLen = e, this.tree = n, this.fragments = this.withoutTempSkipped(wl.addTree(this.tree, this.fragments, !0)), this.parse = null);
  }
  withContext(e) {
    let n = yc;
    yc = this;
    try {
      return e();
    } finally {
      yc = n;
    }
  }
  withoutTempSkipped(e) {
    for (let n; n = this.tempSkipped.pop(); )
      e = aC(e, n.from, n.to);
    return e;
  }
  changes(e, n) {
    let { fragments: i, tree: r, treeLen: s, viewport: o, skipped: l } = this;
    if (this.takeTree(), !e.empty) {
      let a = [];
      if (e.iterChangedRanges((c, u, f, h) => a.push({ fromA: c, toA: u, fromB: f, toB: h })), i = wl.applyChanges(i, a), r = Xn.empty, s = 0, o = { from: e.mapPos(o.from, -1), to: e.mapPos(o.to, 1) }, this.skipped.length) {
        l = [];
        for (let c of this.skipped) {
          let u = e.mapPos(c.from, 1), f = e.mapPos(c.to, -1);
          u < f && l.push({ from: u, to: f });
        }
      }
    }
    return new yd(this.parser, n, i, r, s, o, l, this.scheduleOn);
  }
  updateViewport(e) {
    if (this.viewport.from == e.from && this.viewport.to == e.to)
      return !1;
    this.viewport = e;
    let n = this.skipped.length;
    for (let i = 0; i < this.skipped.length; i++) {
      let { from: r, to: s } = this.skipped[i];
      r < e.to && s > e.from && (this.fragments = aC(this.fragments, r, s), this.skipped.splice(i--, 1));
    }
    return this.skipped.length >= n ? !1 : (this.reset(), !0);
  }
  reset() {
    this.parse && (this.takeTree(), this.parse = null);
  }
  skipUntilInView(e, n) {
    this.skipped.push({ from: e, to: n });
  }
  static getSkippingParser(e) {
    return new class extends TE {
      createParse(n, i, r) {
        let s = r[0].from, o = r[r.length - 1].to;
        return {
          parsedPos: s,
          advance() {
            let a = yc;
            if (a) {
              for (let c of r)
                a.tempSkipped.push(c);
              e && (a.scheduleOn = a.scheduleOn ? Promise.all([a.scheduleOn, e]) : e);
            }
            return this.parsedPos = o, new Xn(Ki.none, [], [], o - s);
          },
          stoppedAt: null,
          stopAt() {
          }
        };
      }
    }();
  }
  isDone(e) {
    e = Math.min(e, this.state.doc.length);
    let n = this.fragments;
    return this.treeLen >= e && n.length && n[0].from == 0 && n[0].to >= e;
  }
  static get() {
    return yc;
  }
}
function aC(t, e, n) {
  return wl.applyChanges(t, [{ fromA: e, toA: n, fromB: e, toB: n }]);
}
class Ua {
  constructor(e) {
    this.context = e, this.tree = e.tree;
  }
  apply(e) {
    if (!e.docChanged && this.tree == this.context.tree)
      return this;
    let n = this.context.changes(e.changes, e.state), i = this.context.treeLen == e.startState.doc.length ? void 0 : Math.max(e.changes.mapPos(this.context.treeLen), n.viewport.to);
    return n.work(20, i) || n.takeTree(), new Ua(n);
  }
  static init(e) {
    let n = Math.min(3e3, e.doc.length), i = yd.create(e.facet(Ho).parser, e, { from: 0, to: n });
    return i.work(20, n) || i.takeTree(), new Ua(i);
  }
}
Br.state = /* @__PURE__ */ oi.define({
  create: Ua.init,
  update(t, e) {
    for (let n of e.effects)
      if (n.is(Br.setState))
        return n.value;
    return e.startState.facet(Ho) != e.state.facet(Ho) ? Ua.init(e.state) : t.apply(e);
  }
});
let DE = (t) => {
  let e = setTimeout(() => t(), 500);
  return () => clearTimeout(e);
};
typeof requestIdleCallback < "u" && (DE = (t) => {
  let e = -1, n = setTimeout(() => {
    e = requestIdleCallback(t, { timeout: 500 - 100 });
  }, 100);
  return () => e < 0 ? clearTimeout(n) : cancelIdleCallback(e);
});
const em = typeof navigator < "u" && (!(($g = navigator.scheduling) === null || $g === void 0) && $g.isInputPending) ? () => navigator.scheduling.isInputPending() : null, _K = /* @__PURE__ */ Qn.fromClass(class {
  constructor(e) {
    this.view = e, this.working = null, this.workScheduled = 0, this.chunkEnd = -1, this.chunkBudget = -1, this.work = this.work.bind(this), this.scheduleWork();
  }
  update(e) {
    let n = this.view.state.field(Br.state).context;
    (n.updateViewport(e.view.viewport) || this.view.viewport.to > n.treeLen) && this.scheduleWork(), e.docChanged && (this.view.hasFocus && (this.chunkBudget += 50), this.scheduleWork()), this.checkAsyncSchedule(n);
  }
  scheduleWork() {
    if (this.working)
      return;
    let { state: e } = this.view, n = e.field(Br.state);
    (n.tree != n.context.tree || !n.context.isDone(e.doc.length)) && (this.working = DE(this.work));
  }
  work(e) {
    this.working = null;
    let n = Date.now();
    if (this.chunkEnd < n && (this.chunkEnd < 0 || this.view.hasFocus) && (this.chunkEnd = n + 3e4, this.chunkBudget = 3e3), this.chunkBudget <= 0)
      return;
    let { state: i, viewport: { to: r } } = this.view, s = i.field(Br.state);
    if (s.tree == s.context.tree && s.context.isDone(r + 1e5))
      return;
    let o = Date.now() + Math.min(this.chunkBudget, 100, e && !em ? Math.max(25, e.timeRemaining() - 5) : 1e9), l = s.context.treeLen < r && i.doc.length > r + 1e3, a = s.context.work(() => em && em() || Date.now() > o, r + (l ? 0 : 1e5));
    this.chunkBudget -= Date.now() - n, (a || this.chunkBudget <= 0) && (s.context.takeTree(), this.view.dispatch({ effects: Br.setState.of(new Ua(s.context)) })), this.chunkBudget > 0 && !(a && !l) && this.scheduleWork(), this.checkAsyncSchedule(s.context);
  }
  checkAsyncSchedule(e) {
    e.scheduleOn && (this.workScheduled++, e.scheduleOn.then(() => this.scheduleWork()).catch((n) => rr(this.view.state, n)).then(() => this.workScheduled--), e.scheduleOn = null);
  }
  destroy() {
    this.working && this.working();
  }
  isWorking() {
    return !!(this.working || this.workScheduled > 0);
  }
}, {
  eventHandlers: { focus() {
    this.scheduleWork();
  } }
}), Ho = /* @__PURE__ */ et.define({
  combine(t) {
    return t.length ? t[0] : null;
  },
  enables: (t) => [
    Br.state,
    _K,
    $e.contentAttributes.compute([t], (e) => {
      let n = e.facet(t);
      return n && n.name ? { "data-language": n.name } : {};
    })
  ]
});
class yK {
  constructor(e, n = []) {
    this.language = e, this.support = n, this.extension = [e, n];
  }
}
const wK = /* @__PURE__ */ et.define(), xp = /* @__PURE__ */ et.define({
  combine: (t) => {
    if (!t.length)
      return "  ";
    if (!/^(?: +|\t+)$/.test(t[0]))
      throw new Error("Invalid indent unit: " + JSON.stringify(t[0]));
    return t[0];
  }
});
function wd(t) {
  let e = t.facet(xp);
  return e.charCodeAt(0) == 9 ? t.tabSize * e.length : e.length;
}
function wu(t, e) {
  let n = "", i = t.tabSize;
  if (t.facet(xp).charCodeAt(0) == 9)
    for (; e >= i; )
      n += "	", e -= i;
  for (let r = 0; r < e; r++)
    n += " ";
  return n;
}
function Pb(t, e) {
  t instanceof Mt && (t = new Fp(t));
  for (let i of t.state.facet(wK)) {
    let r = i(t, e);
    if (r !== void 0)
      return r;
  }
  let n = Ri(t.state);
  return n ? vK(t, n, e) : null;
}
class Fp {
  constructor(e, n = {}) {
    this.state = e, this.options = n, this.unit = wd(e);
  }
  lineAt(e, n = 1) {
    let i = this.state.doc.lineAt(e), { simulateBreak: r, simulateDoubleBreak: s } = this.options;
    return r != null && r >= i.from && r <= i.to ? s && r == e ? { text: "", from: e } : (n < 0 ? r < e : r <= e) ? { text: i.text.slice(r - i.from), from: r } : { text: i.text.slice(0, r - i.from), from: i.from } : i;
  }
  textAfterPos(e, n = 1) {
    if (this.options.simulateDoubleBreak && e == this.options.simulateBreak)
      return "";
    let { text: i, from: r } = this.lineAt(e, n);
    return i.slice(e - r, Math.min(i.length, e + 100 - r));
  }
  column(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), s = this.countColumn(i, e - r), o = this.options.overrideIndentation ? this.options.overrideIndentation(r) : -1;
    return o > -1 && (s += o - this.countColumn(i, i.search(/\S|$/))), s;
  }
  countColumn(e, n = e.length) {
    return Gu(e, this.state.tabSize, n);
  }
  lineIndent(e, n = 1) {
    let { text: i, from: r } = this.lineAt(e, n), s = this.options.overrideIndentation;
    if (s) {
      let o = s(r);
      if (o > -1)
        return o;
    }
    return this.countColumn(i, i.search(/\S|$/));
  }
  get simulatedBreak() {
    return this.options.simulateBreak || null;
  }
}
const NE = /* @__PURE__ */ new Tt();
function vK(t, e, n) {
  return LE(e.resolveInner(n).enterUnfinishedNodesBefore(n), n, t);
}
function kK(t) {
  return t.pos == t.options.simulateBreak && t.options.simulateDoubleBreak;
}
function CK(t) {
  let e = t.type.prop(NE);
  if (e)
    return e;
  let n = t.firstChild, i;
  if (n && (i = n.type.prop(Tt.closedBy))) {
    let r = t.lastChild, s = r && i.indexOf(r.name) > -1;
    return (o) => MK(o, !0, 1, void 0, s && !kK(o) ? r.from : void 0);
  }
  return t.parent == null ? SK : null;
}
function LE(t, e, n) {
  for (; t; t = t.parent) {
    let i = CK(t);
    if (i)
      return i(Ib.create(n, e, t));
  }
  return null;
}
function SK() {
  return 0;
}
class Ib extends Fp {
  constructor(e, n, i) {
    super(e.state, e.options), this.base = e, this.pos = n, this.node = i;
  }
  static create(e, n, i) {
    return new Ib(e, n, i);
  }
  get textAfter() {
    return this.textAfterPos(this.pos);
  }
  get baseIndent() {
    let e = this.state.doc.lineAt(this.node.from);
    for (; ; ) {
      let n = this.node.resolve(e.from);
      for (; n.parent && n.parent.from == n.from; )
        n = n.parent;
      if (EK(n, this.node))
        break;
      e = this.state.doc.lineAt(n.from);
    }
    return this.lineIndent(e.from);
  }
  continue() {
    let e = this.node.parent;
    return e ? LE(e, this.pos, this.base) : 0;
  }
}
function EK(t, e) {
  for (let n = e; n; n = n.parent)
    if (t == n)
      return !0;
  return !1;
}
function AK(t) {
  let e = t.node, n = e.childAfter(e.from), i = e.lastChild;
  if (!n)
    return null;
  let r = t.options.simulateBreak, s = t.state.doc.lineAt(n.from), o = r == null || r <= s.from ? s.to : Math.min(s.to, r);
  for (let l = n.to; ; ) {
    let a = e.childAfter(l);
    if (!a || a == i)
      return null;
    if (!a.type.isSkipped)
      return a.from < o ? n : null;
    l = a.to;
  }
}
function MK(t, e, n, i, r) {
  let s = t.textAfter, o = s.match(/^\s*/)[0].length, l = i && s.slice(o, o + i.length) == i || r == t.pos + o, a = e ? AK(t) : null;
  return a ? l ? t.column(a.from) : t.column(a.to) : t.baseIndent + (l ? 0 : t.unit * n);
}
function cC({ except: t, units: e = 1 } = {}) {
  return (n) => {
    let i = t && t.test(n.textAfter);
    return n.baseIndent + (i ? 0 : e * n.unit);
  };
}
const OK = 200;
function TK() {
  return Mt.transactionFilter.of((t) => {
    if (!t.docChanged || !t.isUserEvent("input.type") && !t.isUserEvent("input.complete"))
      return t;
    let e = t.startState.languageDataAt("indentOnInput", t.startState.selection.main.head);
    if (!e.length)
      return t;
    let n = t.newDoc, { head: i } = t.newSelection.main, r = n.lineAt(i);
    if (i > r.from + OK)
      return t;
    let s = n.sliceString(r.from, i);
    if (!e.some((c) => c.test(s)))
      return t;
    let { state: o } = t, l = -1, a = [];
    for (let { head: c } of o.selection.ranges) {
      let u = o.doc.lineAt(c);
      if (u.from == l)
        continue;
      l = u.from;
      let f = Pb(o, u.from);
      if (f == null)
        continue;
      let h = /^\s*/.exec(u.text)[0], d = wu(o, f);
      h != d && a.push({ from: u.from, to: u.from + h.length, insert: d });
    }
    return a.length ? [t, { changes: a, sequential: !0 }] : t;
  });
}
const RK = /* @__PURE__ */ et.define(), jE = /* @__PURE__ */ new Tt();
function PK(t) {
  let e = t.firstChild, n = t.lastChild;
  return e && e.to < n.from ? { from: e.to, to: n.type.isError ? t.to : n.from } : null;
}
function IK(t, e, n) {
  let i = Ri(t);
  if (i.length < n)
    return null;
  let r = i.resolveInner(n, 1), s = null;
  for (let o = r; o; o = o.parent) {
    if (o.to <= n || o.from > n)
      continue;
    if (s && o.from < e)
      break;
    let l = o.type.prop(jE);
    if (l && (o.to < i.length - 50 || i.length == t.doc.length || !DK(o))) {
      let a = l(o, t);
      a && a.from <= n && a.from >= e && a.to > n && (s = a);
    }
  }
  return s;
}
function DK(t) {
  let e = t.lastChild;
  return e && e.to == t.to && e.type.isError;
}
function vd(t, e, n) {
  for (let i of t.facet(RK)) {
    let r = i(t, e, n);
    if (r)
      return r;
  }
  return IK(t, e, n);
}
function BE(t, e) {
  let n = e.mapPos(t.from, 1), i = e.mapPos(t.to, -1);
  return n >= i ? void 0 : { from: n, to: i };
}
const zp = /* @__PURE__ */ kt.define({ map: BE }), Qu = /* @__PURE__ */ kt.define({ map: BE });
function xE(t) {
  let e = [];
  for (let { head: n } of t.state.selection.ranges)
    e.some((i) => i.from <= n && i.to >= n) || e.push(t.lineBlockAt(n));
  return e;
}
const Dl = /* @__PURE__ */ oi.define({
  create() {
    return ft.none;
  },
  update(t, e) {
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(zp) && !NK(t, n.value.from, n.value.to) ? t = t.update({ add: [uC.range(n.value.from, n.value.to)] }) : n.is(Qu) && (t = t.update({
        filter: (i, r) => n.value.from != i || n.value.to != r,
        filterFrom: n.value.from,
        filterTo: n.value.to
      }));
    if (e.selection) {
      let n = !1, { head: i } = e.selection.main;
      t.between(i, i, (r, s) => {
        r < i && s > i && (n = !0);
      }), n && (t = t.update({
        filterFrom: i,
        filterTo: i,
        filter: (r, s) => s <= i || r >= i
      }));
    }
    return t;
  },
  provide: (t) => $e.decorations.from(t),
  toJSON(t, e) {
    let n = [];
    return t.between(0, e.doc.length, (i, r) => {
      n.push(i, r);
    }), n;
  },
  fromJSON(t) {
    if (!Array.isArray(t) || t.length % 2)
      throw new RangeError("Invalid JSON for fold state");
    let e = [];
    for (let n = 0; n < t.length; ) {
      let i = t[n++], r = t[n++];
      if (typeof i != "number" || typeof r != "number")
        throw new RangeError("Invalid JSON for fold state");
      e.push(uC.range(i, r));
    }
    return ft.set(e, !0);
  }
});
function kd(t, e, n) {
  var i;
  let r = null;
  return (i = t.field(Dl, !1)) === null || i === void 0 || i.between(e, n, (s, o) => {
    (!r || r.from > s) && (r = { from: s, to: o });
  }), r;
}
function NK(t, e, n) {
  let i = !1;
  return t.between(e, e, (r, s) => {
    r == e && s == n && (i = !0);
  }), i;
}
function FE(t, e) {
  return t.field(Dl, !1) ? e : e.concat(kt.appendConfig.of(UE()));
}
const LK = (t) => {
  for (let e of xE(t)) {
    let n = vd(t.state, e.from, e.to);
    if (n)
      return t.dispatch({ effects: FE(t.state, [zp.of(n), zE(t, n)]) }), !0;
  }
  return !1;
}, jK = (t) => {
  if (!t.state.field(Dl, !1))
    return !1;
  let e = [];
  for (let n of xE(t)) {
    let i = kd(t.state, n.from, n.to);
    i && e.push(Qu.of(i), zE(t, i, !1));
  }
  return e.length && t.dispatch({ effects: e }), e.length > 0;
};
function zE(t, e, n = !0) {
  let i = t.state.doc.lineAt(e.from).number, r = t.state.doc.lineAt(e.to).number;
  return $e.announce.of(`${t.state.phrase(n ? "Folded lines" : "Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`);
}
const BK = (t) => {
  let { state: e } = t, n = [];
  for (let i = 0; i < e.doc.length; ) {
    let r = t.lineBlockAt(i), s = vd(e, r.from, r.to);
    s && n.push(zp.of(s)), i = (s ? t.lineBlockAt(s.to) : r).to + 1;
  }
  return n.length && t.dispatch({ effects: FE(t.state, n) }), !!n.length;
}, xK = (t) => {
  let e = t.state.field(Dl, !1);
  if (!e || !e.size)
    return !1;
  let n = [];
  return e.between(0, t.state.doc.length, (i, r) => {
    n.push(Qu.of({ from: i, to: r }));
  }), t.dispatch({ effects: n }), !0;
}, FK = [
  { key: "Ctrl-Shift-[", mac: "Cmd-Alt-[", run: LK },
  { key: "Ctrl-Shift-]", mac: "Cmd-Alt-]", run: jK },
  { key: "Ctrl-Alt-[", run: BK },
  { key: "Ctrl-Alt-]", run: xK }
], zK = {
  placeholderDOM: null,
  placeholderText: "â€¦"
}, VE = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, zK);
  }
});
function UE(t) {
  let e = [Dl, HK];
  return t && e.push(VE.of(t)), e;
}
const uC = /* @__PURE__ */ ft.replace({ widget: /* @__PURE__ */ new class extends Zo {
  toDOM(t) {
    let { state: e } = t, n = e.facet(VE), i = (s) => {
      let o = t.lineBlockAt(t.posAtDOM(s.target)), l = kd(t.state, o.from, o.to);
      l && t.dispatch({ effects: Qu.of(l) }), s.preventDefault();
    };
    if (n.placeholderDOM)
      return n.placeholderDOM(t, i);
    let r = document.createElement("span");
    return r.textContent = n.placeholderText, r.setAttribute("aria-label", e.phrase("folded code")), r.title = e.phrase("unfold"), r.className = "cm-foldPlaceholder", r.onclick = i, r;
  }
}() }), VK = {
  openText: "âŒ„",
  closedText: "â€º",
  markerDOM: null,
  domEventHandlers: {},
  foldingChanged: () => !1
};
class tm extends Os {
  constructor(e, n) {
    super(), this.config = e, this.open = n;
  }
  eq(e) {
    return this.config == e.config && this.open == e.open;
  }
  toDOM(e) {
    if (this.config.markerDOM)
      return this.config.markerDOM(this.open);
    let n = document.createElement("span");
    return n.textContent = this.open ? this.config.openText : this.config.closedText, n.title = e.state.phrase(this.open ? "Fold line" : "Unfold line"), n;
  }
}
function UK(t = {}) {
  let e = Object.assign(Object.assign({}, VK), t), n = new tm(e, !0), i = new tm(e, !1), r = Qn.fromClass(class {
    constructor(o) {
      this.from = o.viewport.from, this.markers = this.buildMarkers(o);
    }
    update(o) {
      (o.docChanged || o.viewportChanged || o.startState.facet(Ho) != o.state.facet(Ho) || o.startState.field(Dl, !1) != o.state.field(Dl, !1) || Ri(o.startState) != Ri(o.state) || e.foldingChanged(o)) && (this.markers = this.buildMarkers(o.view));
    }
    buildMarkers(o) {
      let l = new Fo();
      for (let a of o.viewportLineBlocks) {
        let c = kd(o.state, a.from, a.to) ? i : vd(o.state, a.from, a.to) ? n : null;
        c && l.add(a.from, a.from, c);
      }
      return l.finish();
    }
  }), { domEventHandlers: s } = e;
  return [
    r,
    kE({
      class: "cm-foldGutter",
      markers(o) {
        var l;
        return ((l = o.plugin(r)) === null || l === void 0 ? void 0 : l.markers) || Vt.empty;
      },
      initialSpacer() {
        return new tm(e, !1);
      },
      domEventHandlers: Object.assign(Object.assign({}, s), { click: (o, l, a) => {
        if (s.click && s.click(o, l, a))
          return !0;
        let c = kd(o.state, l.from, l.to);
        if (c)
          return o.dispatch({ effects: Qu.of(c) }), !0;
        let u = vd(o.state, l.from, l.to);
        return u ? (o.dispatch({ effects: zp.of(u) }), !0) : !1;
      } })
    }),
    UE()
  ];
}
const HK = /* @__PURE__ */ $e.baseTheme({
  ".cm-foldPlaceholder": {
    backgroundColor: "#eee",
    border: "1px solid #ddd",
    color: "#888",
    borderRadius: ".2em",
    margin: "0 1px",
    padding: "0 1px",
    cursor: "pointer"
  },
  ".cm-foldGutter span": {
    padding: "0 1px",
    cursor: "pointer"
  }
});
class Zu {
  constructor(e, n) {
    this.specs = e;
    let i;
    function r(l) {
      let a = zo.newName();
      return (i || (i = /* @__PURE__ */ Object.create(null)))["." + a] = l, a;
    }
    const s = typeof n.all == "string" ? n.all : n.all ? r(n.all) : void 0, o = n.scope;
    this.scope = o instanceof Br ? (l) => l.prop(yu) == o.data : o ? (l) => l == o : void 0, this.style = IE(e.map((l) => ({
      tag: l.tag,
      class: l.class || r(Object.assign({}, l, { tag: null }))
    })), {
      all: s
    }).style, this.module = i ? new zo(i) : null, this.themeType = n.themeType;
  }
  static define(e, n) {
    return new Zu(e, n || {});
  }
}
const z1 = /* @__PURE__ */ et.define(), HE = /* @__PURE__ */ et.define({
  combine(t) {
    return t.length ? [t[0]] : null;
  }
});
function nm(t) {
  let e = t.facet(z1);
  return e.length ? e : t.facet(HE);
}
function WE(t, e) {
  let n = [qK], i;
  return t instanceof Zu && (t.module && n.push($e.styleModule.of(t.module)), i = t.themeType), e != null && e.fallback ? n.push(HE.of(t)) : i ? n.push(z1.computeN([$e.darkTheme], (r) => r.facet($e.darkTheme) == (i == "dark") ? [t] : [])) : n.push(z1.of(t)), n;
}
class WK {
  constructor(e) {
    this.markCache = /* @__PURE__ */ Object.create(null), this.tree = Ri(e.state), this.decorations = this.buildDeco(e, nm(e.state));
  }
  update(e) {
    let n = Ri(e.state), i = nm(e.state), r = i != nm(e.startState);
    n.length < e.view.viewport.to && !r && n.type == this.tree.type ? this.decorations = this.decorations.map(e.changes) : (n != this.tree || e.viewportChanged || r) && (this.tree = n, this.decorations = this.buildDeco(e.view, i));
  }
  buildDeco(e, n) {
    if (!n || !this.tree.length)
      return ft.none;
    let i = new Fo();
    for (let { from: r, to: s } of e.visibleRanges)
      dK(this.tree, n, (o, l, a) => {
        i.add(o, l, this.markCache[a] || (this.markCache[a] = ft.mark({ class: a })));
      }, r, s);
    return i.finish();
  }
}
const qK = /* @__PURE__ */ ac.high(/* @__PURE__ */ Qn.fromClass(WK, {
  decorations: (t) => t.decorations
})), JK = /* @__PURE__ */ Zu.define([
  {
    tag: Fe.meta,
    color: "#404740"
  },
  {
    tag: Fe.link,
    textDecoration: "underline"
  },
  {
    tag: Fe.heading,
    textDecoration: "underline",
    fontWeight: "bold"
  },
  {
    tag: Fe.emphasis,
    fontStyle: "italic"
  },
  {
    tag: Fe.strong,
    fontWeight: "bold"
  },
  {
    tag: Fe.strikethrough,
    textDecoration: "line-through"
  },
  {
    tag: Fe.keyword,
    color: "#708"
  },
  {
    tag: [Fe.atom, Fe.bool, Fe.url, Fe.contentSeparator, Fe.labelName],
    color: "#219"
  },
  {
    tag: [Fe.literal, Fe.inserted],
    color: "#164"
  },
  {
    tag: [Fe.string, Fe.deleted],
    color: "#a11"
  },
  {
    tag: [Fe.regexp, Fe.escape, /* @__PURE__ */ Fe.special(Fe.string)],
    color: "#e40"
  },
  {
    tag: /* @__PURE__ */ Fe.definition(Fe.variableName),
    color: "#00f"
  },
  {
    tag: /* @__PURE__ */ Fe.local(Fe.variableName),
    color: "#30a"
  },
  {
    tag: [Fe.typeName, Fe.namespace],
    color: "#085"
  },
  {
    tag: Fe.className,
    color: "#167"
  },
  {
    tag: [/* @__PURE__ */ Fe.special(Fe.variableName), Fe.macroName],
    color: "#256"
  },
  {
    tag: /* @__PURE__ */ Fe.definition(Fe.propertyName),
    color: "#00c"
  },
  {
    tag: Fe.comment,
    color: "#940"
  },
  {
    tag: Fe.invalid,
    color: "#f00"
  }
]), KK = /* @__PURE__ */ $e.baseTheme({
  "&.cm-focused .cm-matchingBracket": { backgroundColor: "#328c8252" },
  "&.cm-focused .cm-nonmatchingBracket": { backgroundColor: "#bb555544" }
}), qE = 1e4, JE = "()[]{}", KE = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      afterCursor: !0,
      brackets: JE,
      maxScanDistance: qE,
      renderMatch: XK
    });
  }
}), GK = /* @__PURE__ */ ft.mark({ class: "cm-matchingBracket" }), YK = /* @__PURE__ */ ft.mark({ class: "cm-nonmatchingBracket" });
function XK(t) {
  let e = [], n = t.matched ? GK : YK;
  return e.push(n.range(t.start.from, t.start.to)), t.end && e.push(n.range(t.end.from, t.end.to)), e;
}
const QK = /* @__PURE__ */ oi.define({
  create() {
    return ft.none;
  },
  update(t, e) {
    if (!e.docChanged && !e.selection)
      return t;
    let n = [], i = e.state.facet(KE);
    for (let r of e.state.selection.ranges) {
      if (!r.empty)
        continue;
      let s = ls(e.state, r.head, -1, i) || r.head > 0 && ls(e.state, r.head - 1, 1, i) || i.afterCursor && (ls(e.state, r.head, 1, i) || r.head < e.state.doc.length && ls(e.state, r.head + 1, -1, i));
      s && (n = n.concat(i.renderMatch(s, e.state)));
    }
    return ft.set(n, !0);
  },
  provide: (t) => $e.decorations.from(t)
}), ZK = [
  QK,
  KK
];
function $K(t = {}) {
  return [KE.of(t), ZK];
}
function V1(t, e, n) {
  let i = t.prop(e < 0 ? Tt.openedBy : Tt.closedBy);
  if (i)
    return i;
  if (t.name.length == 1) {
    let r = n.indexOf(t.name);
    if (r > -1 && r % 2 == (e < 0 ? 1 : 0))
      return [n[r + e]];
  }
  return null;
}
function ls(t, e, n, i = {}) {
  let r = i.maxScanDistance || qE, s = i.brackets || JE, o = Ri(t), l = o.resolveInner(e, n);
  for (let a = l; a; a = a.parent) {
    let c = V1(a.type, n, s);
    if (c && a.from < a.to)
      return eG(t, e, n, a, c, s);
  }
  return tG(t, e, n, o, l.type, r, s);
}
function eG(t, e, n, i, r, s) {
  let o = i.parent, l = { from: i.from, to: i.to }, a = 0, c = o == null ? void 0 : o.cursor();
  if (c && (n < 0 ? c.childBefore(i.from) : c.childAfter(i.to)))
    do
      if (n < 0 ? c.to <= i.from : c.from >= i.to) {
        if (a == 0 && r.indexOf(c.type.name) > -1 && c.from < c.to)
          return { start: l, end: { from: c.from, to: c.to }, matched: !0 };
        if (V1(c.type, n, s))
          a++;
        else if (V1(c.type, -n, s)) {
          if (a == 0)
            return {
              start: l,
              end: c.from == c.to ? void 0 : { from: c.from, to: c.to },
              matched: !1
            };
          a--;
        }
      }
    while (n < 0 ? c.prevSibling() : c.nextSibling());
  return { start: l, matched: !1 };
}
function tG(t, e, n, i, r, s, o) {
  let l = n < 0 ? t.sliceDoc(e - 1, e) : t.sliceDoc(e, e + 1), a = o.indexOf(l);
  if (a < 0 || a % 2 == 0 != n > 0)
    return null;
  let c = { from: n < 0 ? e - 1 : e, to: n > 0 ? e + 1 : e }, u = t.doc.iterRange(e, n > 0 ? t.doc.length : 0), f = 0;
  for (let h = 0; !u.next().done && h <= s; ) {
    let d = u.value;
    n < 0 && (h += d.length);
    let p = e + h * n;
    for (let g = n > 0 ? 0 : d.length - 1, m = n > 0 ? d.length : -1; g != m; g += n) {
      let _ = o.indexOf(d[g]);
      if (!(_ < 0 || i.resolveInner(p + g, 1).type != r))
        if (_ % 2 == 0 == n > 0)
          f++;
        else {
          if (f == 1)
            return { start: c, end: { from: p + g, to: p + g + 1 }, matched: _ >> 1 == a >> 1 };
          f--;
        }
    }
    n > 0 && (h += d.length);
  }
  return u.done ? { start: c, matched: !1 } : null;
}
const nG = /* @__PURE__ */ Object.create(null), fC = [Ki.none], hC = [], iG = /* @__PURE__ */ Object.create(null);
for (let [t, e] of [
  ["variable", "variableName"],
  ["variable-2", "variableName.special"],
  ["string-2", "string.special"],
  ["def", "variableName.definition"],
  ["tag", "tagName"],
  ["attribute", "attributeName"],
  ["type", "typeName"],
  ["builtin", "variableName.standard"],
  ["qualifier", "modifier"],
  ["error", "invalid"],
  ["header", "heading"],
  ["property", "propertyName"]
])
  iG[t] = /* @__PURE__ */ rG(nG, e);
function im(t, e) {
  hC.indexOf(t) > -1 || (hC.push(t), console.warn(e));
}
function rG(t, e) {
  let n = null;
  for (let s of e.split(".")) {
    let o = t[s] || Fe[s];
    o ? typeof o == "function" ? n ? n = o(n) : im(s, `Modifier ${s} used at start of tag`) : n ? im(s, `Tag ${s} used as modifier`) : n = o : im(s, `Unknown highlighting tag ${s}`);
  }
  if (!n)
    return 0;
  let i = e.replace(/ /g, "_"), r = Ki.define({
    id: fC.length,
    name: i,
    props: [RE({ [i]: n })]
  });
  return fC.push(r), r.id;
}
const sG = (t) => {
  let e = Nb(t.state);
  return e.line ? oG(t) : e.block ? aG(t) : !1;
};
function Db(t, e) {
  return ({ state: n, dispatch: i }) => {
    if (n.readOnly)
      return !1;
    let r = t(e, n);
    return r ? (i(n.update(r)), !0) : !1;
  };
}
const oG = /* @__PURE__ */ Db(fG, 0), lG = /* @__PURE__ */ Db(GE, 0), aG = /* @__PURE__ */ Db((t, e) => GE(t, e, uG(e)), 0);
function Nb(t, e = t.selection.main.head) {
  let n = t.languageDataAt("commentTokens", e);
  return n.length ? n[0] : {};
}
const wc = 50;
function cG(t, { open: e, close: n }, i, r) {
  let s = t.sliceDoc(i - wc, i), o = t.sliceDoc(r, r + wc), l = /\s*$/.exec(s)[0].length, a = /^\s*/.exec(o)[0].length, c = s.length - l;
  if (s.slice(c - e.length, c) == e && o.slice(a, a + n.length) == n)
    return {
      open: { pos: i - l, margin: l && 1 },
      close: { pos: r + a, margin: a && 1 }
    };
  let u, f;
  r - i <= 2 * wc ? u = f = t.sliceDoc(i, r) : (u = t.sliceDoc(i, i + wc), f = t.sliceDoc(r - wc, r));
  let h = /^\s*/.exec(u)[0].length, d = /\s*$/.exec(f)[0].length, p = f.length - d - n.length;
  return u.slice(h, h + e.length) == e && f.slice(p, p + n.length) == n ? {
    open: {
      pos: i + h + e.length,
      margin: /\s/.test(u.charAt(h + e.length)) ? 1 : 0
    },
    close: {
      pos: r - d - n.length,
      margin: /\s/.test(f.charAt(p - 1)) ? 1 : 0
    }
  } : null;
}
function uG(t) {
  let e = [];
  for (let n of t.selection.ranges) {
    let i = t.doc.lineAt(n.from), r = n.to <= i.to ? i : t.doc.lineAt(n.to), s = e.length - 1;
    s >= 0 && e[s].to > i.from ? e[s].to = r.to : e.push({ from: i.from, to: r.to });
  }
  return e;
}
function GE(t, e, n = e.selection.ranges) {
  let i = n.map((s) => Nb(e, s.from).block);
  if (!i.every((s) => s))
    return null;
  let r = n.map((s, o) => cG(e, i[o], s.from, s.to));
  if (t != 2 && !r.every((s) => s))
    return { changes: e.changes(n.map((s, o) => r[o] ? [] : [{ from: s.from, insert: i[o].open + " " }, { from: s.to, insert: " " + i[o].close }])) };
  if (t != 1 && r.some((s) => s)) {
    let s = [];
    for (let o = 0, l; o < r.length; o++)
      if (l = r[o]) {
        let a = i[o], { open: c, close: u } = l;
        s.push({ from: c.pos - a.open.length, to: c.pos + c.margin }, { from: u.pos - u.margin, to: u.pos + a.close.length });
      }
    return { changes: s };
  }
  return null;
}
function fG(t, e, n = e.selection.ranges) {
  let i = [], r = -1;
  for (let { from: s, to: o } of n) {
    let l = i.length, a = 1e9;
    for (let c = s; c <= o; ) {
      let u = e.doc.lineAt(c);
      if (u.from > r && (s == o || o > u.from)) {
        r = u.from;
        let f = Nb(e, c).line;
        if (!f)
          continue;
        let h = /^\s*/.exec(u.text)[0].length, d = h == u.length, p = u.text.slice(h, h + f.length) == f ? h : -1;
        h < u.text.length && h < a && (a = h), i.push({ line: u, comment: p, token: f, indent: h, empty: d, single: !1 });
      }
      c = u.to + 1;
    }
    if (a < 1e9)
      for (let c = l; c < i.length; c++)
        i[c].indent < i[c].line.text.length && (i[c].indent = a);
    i.length == l + 1 && (i[l].single = !0);
  }
  if (t != 2 && i.some((s) => s.comment < 0 && (!s.empty || s.single))) {
    let s = [];
    for (let { line: l, token: a, indent: c, empty: u, single: f } of i)
      (f || !u) && s.push({ from: l.from + c, insert: a + " " });
    let o = e.changes(s);
    return { changes: o, selection: e.selection.map(o, 1) };
  } else if (t != 1 && i.some((s) => s.comment >= 0)) {
    let s = [];
    for (let { line: o, comment: l, token: a } of i)
      if (l >= 0) {
        let c = o.from + l, u = c + a.length;
        o.text[u - o.from] == " " && u++, s.push({ from: c, to: u });
      }
    return { changes: s };
  }
  return null;
}
const U1 = /* @__PURE__ */ Qo.define(), hG = /* @__PURE__ */ Qo.define(), dG = /* @__PURE__ */ et.define(), YE = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      minDepth: 100,
      newGroupDelay: 500
    }, { minDepth: Math.max, newGroupDelay: Math.min });
  }
});
function pG(t) {
  let e = 0;
  return t.iterChangedRanges((n, i) => e = i), e;
}
const Lb = /* @__PURE__ */ oi.define({
  create() {
    return as.empty;
  },
  update(t, e) {
    let n = e.state.facet(YE), i = e.annotation(U1);
    if (i) {
      let a = e.docChanged ? Re.single(pG(e.changes)) : void 0, c = Hi.fromTransaction(e, a), u = i.side, f = u == 0 ? t.undone : t.done;
      return c ? f = Sd(f, f.length, n.minDepth, c) : f = ZE(f, e.startState.selection), new as(u == 0 ? i.rest : f, u == 0 ? f : i.rest);
    }
    let r = e.annotation(hG);
    if ((r == "full" || r == "before") && (t = t.isolate()), e.annotation(di.addToHistory) === !1)
      return e.changes.empty ? t : t.addMapping(e.changes.desc);
    let s = Hi.fromTransaction(e), o = e.annotation(di.time), l = e.annotation(di.userEvent);
    return s ? t = t.addChanges(s, o, l, n.newGroupDelay, n.minDepth) : e.selection && (t = t.addSelection(e.startState.selection, o, l, n.newGroupDelay)), (r == "full" || r == "after") && (t = t.isolate()), t;
  },
  toJSON(t) {
    return { done: t.done.map((e) => e.toJSON()), undone: t.undone.map((e) => e.toJSON()) };
  },
  fromJSON(t) {
    return new as(t.done.map(Hi.fromJSON), t.undone.map(Hi.fromJSON));
  }
});
function gG(t = {}) {
  return [
    Lb,
    YE.of(t),
    $e.domEventHandlers({
      beforeinput(e, n) {
        let i = e.inputType == "historyUndo" ? jb : e.inputType == "historyRedo" ? Cd : null;
        return i ? (e.preventDefault(), i(n)) : !1;
      }
    })
  ];
}
function Vp(t, e) {
  return function({ state: n, dispatch: i }) {
    if (!e && n.readOnly)
      return !1;
    let r = n.field(Lb, !1);
    if (!r)
      return !1;
    let s = r.pop(t, n, e);
    return s ? (i(s), !0) : !1;
  };
}
const jb = /* @__PURE__ */ Vp(0, !1), Cd = /* @__PURE__ */ Vp(1, !1), mG = /* @__PURE__ */ Vp(0, !0), bG = /* @__PURE__ */ Vp(1, !0);
function XE(t) {
  return function(e) {
    let n = e.field(Lb, !1);
    if (!n)
      return 0;
    let i = t == 0 ? n.done : n.undone;
    return i.length - (i.length && !i[0].changes ? 1 : 0);
  };
}
const _G = /* @__PURE__ */ XE(0), yG = /* @__PURE__ */ XE(1);
class Hi {
  constructor(e, n, i, r, s) {
    this.changes = e, this.effects = n, this.mapped = i, this.startSelection = r, this.selectionsAfter = s;
  }
  setSelAfter(e) {
    return new Hi(this.changes, this.effects, this.mapped, this.startSelection, e);
  }
  toJSON() {
    var e, n, i;
    return {
      changes: (e = this.changes) === null || e === void 0 ? void 0 : e.toJSON(),
      mapped: (n = this.mapped) === null || n === void 0 ? void 0 : n.toJSON(),
      startSelection: (i = this.startSelection) === null || i === void 0 ? void 0 : i.toJSON(),
      selectionsAfter: this.selectionsAfter.map((r) => r.toJSON())
    };
  }
  static fromJSON(e) {
    return new Hi(e.changes && ti.fromJSON(e.changes), [], e.mapped && ds.fromJSON(e.mapped), e.startSelection && Re.fromJSON(e.startSelection), e.selectionsAfter.map(Re.fromJSON));
  }
  static fromTransaction(e, n) {
    let i = dr;
    for (let r of e.startState.facet(dG)) {
      let s = r(e);
      s.length && (i = i.concat(s));
    }
    return !i.length && e.changes.empty ? null : new Hi(e.changes.invert(e.startState.doc), i, void 0, n || e.startState.selection, dr);
  }
  static selection(e) {
    return new Hi(void 0, dr, void 0, void 0, e);
  }
}
function Sd(t, e, n, i) {
  let r = e + 1 > n + 20 ? e - n - 1 : 0, s = t.slice(r, e);
  return s.push(i), s;
}
function wG(t, e) {
  let n = [], i = !1;
  return t.iterChangedRanges((r, s) => n.push(r, s)), e.iterChangedRanges((r, s, o, l) => {
    for (let a = 0; a < n.length; ) {
      let c = n[a++], u = n[a++];
      l >= c && o <= u && (i = !0);
    }
  }), i;
}
function vG(t, e) {
  return t.ranges.length == e.ranges.length && t.ranges.filter((n, i) => n.empty != e.ranges[i].empty).length === 0;
}
function QE(t, e) {
  return t.length ? e.length ? t.concat(e) : t : e;
}
const dr = [], kG = 200;
function ZE(t, e) {
  if (t.length) {
    let n = t[t.length - 1], i = n.selectionsAfter.slice(Math.max(0, n.selectionsAfter.length - kG));
    return i.length && i[i.length - 1].eq(e) ? t : (i.push(e), Sd(t, t.length - 1, 1e9, n.setSelAfter(i)));
  } else
    return [Hi.selection([e])];
}
function CG(t) {
  let e = t[t.length - 1], n = t.slice();
  return n[t.length - 1] = e.setSelAfter(e.selectionsAfter.slice(0, e.selectionsAfter.length - 1)), n;
}
function rm(t, e) {
  if (!t.length)
    return t;
  let n = t.length, i = dr;
  for (; n; ) {
    let r = SG(t[n - 1], e, i);
    if (r.changes && !r.changes.empty || r.effects.length) {
      let s = t.slice(0, n);
      return s[n - 1] = r, s;
    } else
      e = r.mapped, n--, i = r.selectionsAfter;
  }
  return i.length ? [Hi.selection(i)] : dr;
}
function SG(t, e, n) {
  let i = QE(t.selectionsAfter.length ? t.selectionsAfter.map((l) => l.map(e)) : dr, n);
  if (!t.changes)
    return Hi.selection(i);
  let r = t.changes.map(e), s = e.mapDesc(t.changes, !0), o = t.mapped ? t.mapped.composeDesc(s) : s;
  return new Hi(r, kt.mapEffects(t.effects, e), o, t.startSelection.map(s), i);
}
const EG = /^(input\.type|delete)($|\.)/;
class as {
  constructor(e, n, i = 0, r = void 0) {
    this.done = e, this.undone = n, this.prevTime = i, this.prevUserEvent = r;
  }
  isolate() {
    return this.prevTime ? new as(this.done, this.undone) : this;
  }
  addChanges(e, n, i, r, s) {
    let o = this.done, l = o[o.length - 1];
    return l && l.changes && !l.changes.empty && e.changes && (!i || EG.test(i)) && (!l.selectionsAfter.length && n - this.prevTime < r && wG(l.changes, e.changes) || i == "input.type.compose") ? o = Sd(o, o.length - 1, s, new Hi(e.changes.compose(l.changes), QE(e.effects, l.effects), l.mapped, l.startSelection, dr)) : o = Sd(o, o.length, s, e), new as(o, dr, n, i);
  }
  addSelection(e, n, i, r) {
    let s = this.done.length ? this.done[this.done.length - 1].selectionsAfter : dr;
    return s.length > 0 && n - this.prevTime < r && i == this.prevUserEvent && i && /^select($|\.)/.test(i) && vG(s[s.length - 1], e) ? this : new as(ZE(this.done, e), this.undone, n, i);
  }
  addMapping(e) {
    return new as(rm(this.done, e), rm(this.undone, e), this.prevTime, this.prevUserEvent);
  }
  pop(e, n, i) {
    let r = e == 0 ? this.done : this.undone;
    if (r.length == 0)
      return null;
    let s = r[r.length - 1];
    if (i && s.selectionsAfter.length)
      return n.update({
        selection: s.selectionsAfter[s.selectionsAfter.length - 1],
        annotations: U1.of({ side: e, rest: CG(r) }),
        userEvent: e == 0 ? "select.undo" : "select.redo",
        scrollIntoView: !0
      });
    if (s.changes) {
      let o = r.length == 1 ? dr : r.slice(0, r.length - 1);
      return s.mapped && (o = rm(o, s.mapped)), n.update({
        changes: s.changes,
        selection: s.startSelection,
        effects: s.effects,
        annotations: U1.of({ side: e, rest: o }),
        filter: !1,
        userEvent: e == 0 ? "undo" : "redo",
        scrollIntoView: !0
      });
    } else
      return null;
  }
}
as.empty = /* @__PURE__ */ new as(dr, dr);
const AG = [
  { key: "Mod-z", run: jb, preventDefault: !0 },
  { key: "Mod-y", mac: "Mod-Shift-z", run: Cd, preventDefault: !0 },
  { linux: "Ctrl-Shift-z", run: Cd, preventDefault: !0 },
  { key: "Mod-u", run: mG, preventDefault: !0 },
  { key: "Alt-u", mac: "Mod-Shift-u", run: bG, preventDefault: !0 }
];
function cc(t, e) {
  return Re.create(t.ranges.map(e), t.mainIndex);
}
function Ls(t, e) {
  return t.update({ selection: e, scrollIntoView: !0, userEvent: "select" });
}
function Jr({ state: t, dispatch: e }, n) {
  let i = cc(t.selection, n);
  return i.eq(t.selection) ? !1 : (e(Ls(t, i)), !0);
}
function Up(t, e) {
  return Re.cursor(e ? t.to : t.from);
}
function $E(t, e) {
  return Jr(t, (n) => n.empty ? t.moveByChar(n, e) : Up(n, e));
}
function Pi(t) {
  return t.textDirectionAt(t.state.selection.main.head) == Mn.LTR;
}
const eA = (t) => $E(t, !Pi(t)), tA = (t) => $E(t, Pi(t));
function nA(t, e) {
  return Jr(t, (n) => n.empty ? t.moveByGroup(n, e) : Up(n, e));
}
const MG = (t) => nA(t, !Pi(t)), OG = (t) => nA(t, Pi(t));
function TG(t, e, n) {
  if (e.type.prop(n))
    return !0;
  let i = e.to - e.from;
  return i && (i > 2 || /[^\s,.;:]/.test(t.sliceDoc(e.from, e.to))) || e.firstChild;
}
function Hp(t, e, n) {
  let i = Ri(t).resolveInner(e.head), r = n ? Tt.closedBy : Tt.openedBy;
  for (let a = e.head; ; ) {
    let c = n ? i.childAfter(a) : i.childBefore(a);
    if (!c)
      break;
    TG(t, c, r) ? i = c : a = n ? c.to : c.from;
  }
  let s = i.type.prop(r), o, l;
  return s && (o = n ? ls(t, i.from, 1) : ls(t, i.to, -1)) && o.matched ? l = n ? o.end.to : o.end.from : l = n ? i.to : i.from, Re.cursor(l, n ? -1 : 1);
}
const RG = (t) => Jr(t, (e) => Hp(t.state, e, !Pi(t))), PG = (t) => Jr(t, (e) => Hp(t.state, e, Pi(t)));
function iA(t, e) {
  return Jr(t, (n) => {
    if (!n.empty)
      return Up(n, e);
    let i = t.moveVertically(n, e);
    return i.head != n.head ? i : t.moveToLineBoundary(n, e);
  });
}
const rA = (t) => iA(t, !1), sA = (t) => iA(t, !0);
function oA(t) {
  return Math.max(t.defaultLineHeight, Math.min(t.dom.clientHeight, innerHeight) - 5);
}
function lA(t, e) {
  let { state: n } = t, i = cc(n.selection, (l) => l.empty ? t.moveVertically(l, e, oA(t)) : Up(l, e));
  if (i.eq(n.selection))
    return !1;
  let r = t.coordsAtPos(n.selection.main.head), s = t.scrollDOM.getBoundingClientRect(), o;
  return r && r.top > s.top && r.bottom < s.bottom && r.top - s.top <= t.scrollDOM.scrollHeight - t.scrollDOM.scrollTop - t.scrollDOM.clientHeight && (o = $e.scrollIntoView(i.main.head, { y: "start", yMargin: r.top - s.top })), t.dispatch(Ls(n, i), { effects: o }), !0;
}
const dC = (t) => lA(t, !1), H1 = (t) => lA(t, !0);
function $o(t, e, n) {
  let i = t.lineBlockAt(e.head), r = t.moveToLineBoundary(e, n);
  if (r.head == e.head && r.head != (n ? i.to : i.from) && (r = t.moveToLineBoundary(e, n, !1)), !n && r.head == i.from && i.length) {
    let s = /^\s*/.exec(t.state.sliceDoc(i.from, Math.min(i.from + 100, i.to)))[0].length;
    s && e.head != i.from + s && (r = Re.cursor(i.from + s));
  }
  return r;
}
const IG = (t) => Jr(t, (e) => $o(t, e, !0)), DG = (t) => Jr(t, (e) => $o(t, e, !1)), NG = (t) => Jr(t, (e) => $o(t, e, !Pi(t))), LG = (t) => Jr(t, (e) => $o(t, e, Pi(t))), jG = (t) => Jr(t, (e) => Re.cursor(t.lineBlockAt(e.head).from, 1)), BG = (t) => Jr(t, (e) => Re.cursor(t.lineBlockAt(e.head).to, -1));
function xG(t, e, n) {
  let i = !1, r = cc(t.selection, (s) => {
    let o = ls(t, s.head, -1) || ls(t, s.head, 1) || s.head > 0 && ls(t, s.head - 1, 1) || s.head < t.doc.length && ls(t, s.head + 1, -1);
    if (!o || !o.end)
      return s;
    i = !0;
    let l = o.start.from == s.head ? o.end.to : o.end.from;
    return n ? Re.range(s.anchor, l) : Re.cursor(l);
  });
  return i ? (e(Ls(t, r)), !0) : !1;
}
const FG = ({ state: t, dispatch: e }) => xG(t, e, !1);
function Sr(t, e) {
  let n = cc(t.state.selection, (i) => {
    let r = e(i);
    return Re.range(i.anchor, r.head, r.goalColumn);
  });
  return n.eq(t.state.selection) ? !1 : (t.dispatch(Ls(t.state, n)), !0);
}
function aA(t, e) {
  return Sr(t, (n) => t.moveByChar(n, e));
}
const cA = (t) => aA(t, !Pi(t)), uA = (t) => aA(t, Pi(t));
function fA(t, e) {
  return Sr(t, (n) => t.moveByGroup(n, e));
}
const zG = (t) => fA(t, !Pi(t)), VG = (t) => fA(t, Pi(t)), UG = (t) => Sr(t, (e) => Hp(t.state, e, !Pi(t))), HG = (t) => Sr(t, (e) => Hp(t.state, e, Pi(t)));
function hA(t, e) {
  return Sr(t, (n) => t.moveVertically(n, e));
}
const dA = (t) => hA(t, !1), pA = (t) => hA(t, !0);
function gA(t, e) {
  return Sr(t, (n) => t.moveVertically(n, e, oA(t)));
}
const pC = (t) => gA(t, !1), gC = (t) => gA(t, !0), WG = (t) => Sr(t, (e) => $o(t, e, !0)), qG = (t) => Sr(t, (e) => $o(t, e, !1)), JG = (t) => Sr(t, (e) => $o(t, e, !Pi(t))), KG = (t) => Sr(t, (e) => $o(t, e, Pi(t))), GG = (t) => Sr(t, (e) => Re.cursor(t.lineBlockAt(e.head).from)), YG = (t) => Sr(t, (e) => Re.cursor(t.lineBlockAt(e.head).to)), mC = ({ state: t, dispatch: e }) => (e(Ls(t, { anchor: 0 })), !0), bC = ({ state: t, dispatch: e }) => (e(Ls(t, { anchor: t.doc.length })), !0), _C = ({ state: t, dispatch: e }) => (e(Ls(t, { anchor: t.selection.main.anchor, head: 0 })), !0), yC = ({ state: t, dispatch: e }) => (e(Ls(t, { anchor: t.selection.main.anchor, head: t.doc.length })), !0), XG = ({ state: t, dispatch: e }) => (e(t.update({ selection: { anchor: 0, head: t.doc.length }, userEvent: "select" })), !0), QG = ({ state: t, dispatch: e }) => {
  let n = qp(t).map(({ from: i, to: r }) => Re.range(i, Math.min(r + 1, t.doc.length)));
  return e(t.update({ selection: Re.create(n), userEvent: "select" })), !0;
}, ZG = ({ state: t, dispatch: e }) => {
  let n = cc(t.selection, (i) => {
    var r;
    let s = Ri(t).resolveInner(i.head, 1);
    for (; !(s.from < i.from && s.to >= i.to || s.to > i.to && s.from <= i.from || !(!((r = s.parent) === null || r === void 0) && r.parent)); )
      s = s.parent;
    return Re.range(s.to, s.from);
  });
  return e(Ls(t, n)), !0;
}, $G = ({ state: t, dispatch: e }) => {
  let n = t.selection, i = null;
  return n.ranges.length > 1 ? i = Re.create([n.main]) : n.main.empty || (i = Re.create([Re.cursor(n.main.head)])), i ? (e(Ls(t, i)), !0) : !1;
};
function Wp(t, e) {
  if (t.state.readOnly)
    return !1;
  let n = "delete.selection", { state: i } = t, r = i.changeByRange((s) => {
    let { from: o, to: l } = s;
    if (o == l) {
      let a = e(o);
      a < o ? (n = "delete.backward", a = qf(t, a, !1)) : a > o && (n = "delete.forward", a = qf(t, a, !0)), o = Math.min(o, a), l = Math.max(l, a);
    } else
      o = qf(t, o, !1), l = qf(t, l, !0);
    return o == l ? { range: s } : { changes: { from: o, to: l }, range: Re.cursor(o) };
  });
  return r.changes.empty ? !1 : (t.dispatch(i.update(r, {
    scrollIntoView: !0,
    userEvent: n,
    effects: n == "delete.selection" ? $e.announce.of(i.phrase("Selection deleted")) : void 0
  })), !0);
}
function qf(t, e, n) {
  if (t instanceof $e)
    for (let i of t.state.facet($e.atomicRanges).map((r) => r(t)))
      i.between(e, e, (r, s) => {
        r < e && s > e && (e = n ? s : r);
      });
  return e;
}
const mA = (t, e) => Wp(t, (n) => {
  let { state: i } = t, r = i.doc.lineAt(n), s, o;
  if (!e && n > r.from && n < r.from + 200 && !/[^ \t]/.test(s = r.text.slice(0, n - r.from))) {
    if (s[s.length - 1] == "	")
      return n - 1;
    let l = Gu(s, i.tabSize), a = l % wd(i) || wd(i);
    for (let c = 0; c < a && s[s.length - 1 - c] == " "; c++)
      n--;
    o = n;
  } else
    o = Li(r.text, n - r.from, e, e) + r.from, o == n && r.number != (e ? i.doc.lines : 1) && (o += e ? 1 : -1);
  return o;
}), W1 = (t) => mA(t, !1), bA = (t) => mA(t, !0), _A = (t, e) => Wp(t, (n) => {
  let i = n, { state: r } = t, s = r.doc.lineAt(i), o = r.charCategorizer(i);
  for (let l = null; ; ) {
    if (i == (e ? s.to : s.from)) {
      i == n && s.number != (e ? r.doc.lines : 1) && (i += e ? 1 : -1);
      break;
    }
    let a = Li(s.text, i - s.from, e) + s.from, c = s.text.slice(Math.min(i, a) - s.from, Math.max(i, a) - s.from), u = o(c);
    if (l != null && u != l)
      break;
    (c != " " || i != n) && (l = u), i = a;
  }
  return i;
}), yA = (t) => _A(t, !1), eY = (t) => _A(t, !0), wA = (t) => Wp(t, (e) => {
  let n = t.lineBlockAt(e).to;
  return e < n ? n : Math.min(t.state.doc.length, e + 1);
}), tY = (t) => Wp(t, (e) => {
  let n = t.lineBlockAt(e).from;
  return e > n ? n : Math.max(0, e - 1);
}), nY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => ({
    changes: { from: i.from, to: i.to, insert: zt.of(["", ""]) },
    range: Re.cursor(i.from)
  }));
  return e(t.update(n, { scrollIntoView: !0, userEvent: "input" })), !0;
}, iY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = t.changeByRange((i) => {
    if (!i.empty || i.from == 0 || i.from == t.doc.length)
      return { range: i };
    let r = i.from, s = t.doc.lineAt(r), o = r == s.from ? r - 1 : Li(s.text, r - s.from, !1) + s.from, l = r == s.to ? r + 1 : Li(s.text, r - s.from, !0) + s.from;
    return {
      changes: { from: o, to: l, insert: t.doc.slice(r, l).append(t.doc.slice(o, r)) },
      range: Re.cursor(l)
    };
  });
  return n.changes.empty ? !1 : (e(t.update(n, { scrollIntoView: !0, userEvent: "move.character" })), !0);
};
function qp(t) {
  let e = [], n = -1;
  for (let i of t.selection.ranges) {
    let r = t.doc.lineAt(i.from), s = t.doc.lineAt(i.to);
    if (!i.empty && i.to == s.from && (s = t.doc.lineAt(i.to - 1)), n >= r.number) {
      let o = e[e.length - 1];
      o.to = s.to, o.ranges.push(i);
    } else
      e.push({ from: r.from, to: s.to, ranges: [i] });
    n = s.number + 1;
  }
  return e;
}
function vA(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [], r = [];
  for (let s of qp(t)) {
    if (n ? s.to == t.doc.length : s.from == 0)
      continue;
    let o = t.doc.lineAt(n ? s.to + 1 : s.from - 1), l = o.length + 1;
    if (n) {
      i.push({ from: s.to, to: o.to }, { from: s.from, insert: o.text + t.lineBreak });
      for (let a of s.ranges)
        r.push(Re.range(Math.min(t.doc.length, a.anchor + l), Math.min(t.doc.length, a.head + l)));
    } else {
      i.push({ from: o.from, to: s.from }, { from: s.to, insert: t.lineBreak + o.text });
      for (let a of s.ranges)
        r.push(Re.range(a.anchor - l, a.head - l));
    }
  }
  return i.length ? (e(t.update({
    changes: i,
    scrollIntoView: !0,
    selection: Re.create(r, t.selection.mainIndex),
    userEvent: "move.line"
  })), !0) : !1;
}
const rY = ({ state: t, dispatch: e }) => vA(t, e, !1), sY = ({ state: t, dispatch: e }) => vA(t, e, !0);
function kA(t, e, n) {
  if (t.readOnly)
    return !1;
  let i = [];
  for (let r of qp(t))
    n ? i.push({ from: r.from, insert: t.doc.slice(r.from, r.to) + t.lineBreak }) : i.push({ from: r.to, insert: t.lineBreak + t.doc.slice(r.from, r.to) });
  return e(t.update({ changes: i, scrollIntoView: !0, userEvent: "input.copyline" })), !0;
}
const oY = ({ state: t, dispatch: e }) => kA(t, e, !1), lY = ({ state: t, dispatch: e }) => kA(t, e, !0), aY = (t) => {
  if (t.state.readOnly)
    return !1;
  let { state: e } = t, n = e.changes(qp(e).map(({ from: r, to: s }) => (r > 0 ? r-- : s < e.doc.length && s++, { from: r, to: s }))), i = cc(e.selection, (r) => t.moveVertically(r, !0)).map(n);
  return t.dispatch({ changes: n, selection: i, scrollIntoView: !0, userEvent: "delete.line" }), !0;
};
function cY(t, e) {
  if (/\(\)|\[\]|\{\}/.test(t.sliceDoc(e - 1, e + 1)))
    return { from: e, to: e };
  let n = Ri(t).resolveInner(e), i = n.childBefore(e), r = n.childAfter(e), s;
  return i && r && i.to <= e && r.from >= e && (s = i.type.prop(Tt.closedBy)) && s.indexOf(r.name) > -1 && t.doc.lineAt(i.to).from == t.doc.lineAt(r.from).from ? { from: i.to, to: r.from } : null;
}
const uY = /* @__PURE__ */ CA(!1), fY = /* @__PURE__ */ CA(!0);
function CA(t) {
  return ({ state: e, dispatch: n }) => {
    if (e.readOnly)
      return !1;
    let i = e.changeByRange((r) => {
      let { from: s, to: o } = r, l = e.doc.lineAt(s), a = !t && s == o && cY(e, s);
      t && (s = o = (o <= l.to ? l : e.doc.lineAt(o)).to);
      let c = new Fp(e, { simulateBreak: s, simulateDoubleBreak: !!a }), u = Pb(c, s);
      for (u == null && (u = /^\s*/.exec(e.doc.lineAt(s).text)[0].length); o < l.to && /\s/.test(l.text[o - l.from]); )
        o++;
      a ? { from: s, to: o } = a : s > l.from && s < l.from + 100 && !/\S/.test(l.text.slice(0, s)) && (s = l.from);
      let f = ["", wu(e, u)];
      return a && f.push(wu(e, c.lineIndent(l.from, -1))), {
        changes: { from: s, to: o, insert: zt.of(f) },
        range: Re.cursor(s + 1 + f[1].length)
      };
    });
    return n(e.update(i, { scrollIntoView: !0, userEvent: "input" })), !0;
  };
}
function Bb(t, e) {
  let n = -1;
  return t.changeByRange((i) => {
    let r = [];
    for (let o = i.from; o <= i.to; ) {
      let l = t.doc.lineAt(o);
      l.number > n && (i.empty || i.to > l.from) && (e(l, r, i), n = l.number), o = l.to + 1;
    }
    let s = t.changes(r);
    return {
      changes: r,
      range: Re.range(s.mapPos(i.anchor, 1), s.mapPos(i.head, 1))
    };
  });
}
const hY = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let n = /* @__PURE__ */ Object.create(null), i = new Fp(t, { overrideIndentation: (s) => {
    let o = n[s];
    return o ?? -1;
  } }), r = Bb(t, (s, o, l) => {
    let a = Pb(i, s.from);
    if (a == null)
      return;
    /\S/.test(s.text) || (a = 0);
    let c = /^\s*/.exec(s.text)[0], u = wu(t, a);
    (c != u || l.from < s.from + c.length) && (n[s.from] = a, o.push({ from: s.from, to: s.from + c.length, insert: u }));
  });
  return r.changes.empty || e(t.update(r, { userEvent: "indent" })), !0;
}, SA = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Bb(t, (n, i) => {
  i.push({ from: n.from, insert: t.facet(xp) });
}), { userEvent: "input.indent" })), !0), EA = ({ state: t, dispatch: e }) => t.readOnly ? !1 : (e(t.update(Bb(t, (n, i) => {
  let r = /^\s*/.exec(n.text)[0];
  if (!r)
    return;
  let s = Gu(r, t.tabSize), o = 0, l = wu(t, Math.max(0, s - wd(t)));
  for (; o < r.length && o < l.length && r.charCodeAt(o) == l.charCodeAt(o); )
    o++;
  i.push({ from: n.from + o, to: n.from + r.length, insert: l.slice(o) });
}), { userEvent: "delete.dedent" })), !0), dY = [
  { key: "Ctrl-b", run: eA, shift: cA, preventDefault: !0 },
  { key: "Ctrl-f", run: tA, shift: uA },
  { key: "Ctrl-p", run: rA, shift: dA },
  { key: "Ctrl-n", run: sA, shift: pA },
  { key: "Ctrl-a", run: jG, shift: GG },
  { key: "Ctrl-e", run: BG, shift: YG },
  { key: "Ctrl-d", run: bA },
  { key: "Ctrl-h", run: W1 },
  { key: "Ctrl-k", run: wA },
  { key: "Ctrl-Alt-h", run: yA },
  { key: "Ctrl-o", run: nY },
  { key: "Ctrl-t", run: iY },
  { key: "Ctrl-v", run: H1 }
], pY = /* @__PURE__ */ [
  { key: "ArrowLeft", run: eA, shift: cA, preventDefault: !0 },
  { key: "Mod-ArrowLeft", mac: "Alt-ArrowLeft", run: MG, shift: zG, preventDefault: !0 },
  { mac: "Cmd-ArrowLeft", run: NG, shift: JG, preventDefault: !0 },
  { key: "ArrowRight", run: tA, shift: uA, preventDefault: !0 },
  { key: "Mod-ArrowRight", mac: "Alt-ArrowRight", run: OG, shift: VG, preventDefault: !0 },
  { mac: "Cmd-ArrowRight", run: LG, shift: KG, preventDefault: !0 },
  { key: "ArrowUp", run: rA, shift: dA, preventDefault: !0 },
  { mac: "Cmd-ArrowUp", run: mC, shift: _C },
  { mac: "Ctrl-ArrowUp", run: dC, shift: pC },
  { key: "ArrowDown", run: sA, shift: pA, preventDefault: !0 },
  { mac: "Cmd-ArrowDown", run: bC, shift: yC },
  { mac: "Ctrl-ArrowDown", run: H1, shift: gC },
  { key: "PageUp", run: dC, shift: pC },
  { key: "PageDown", run: H1, shift: gC },
  { key: "Home", run: DG, shift: qG, preventDefault: !0 },
  { key: "Mod-Home", run: mC, shift: _C },
  { key: "End", run: IG, shift: WG, preventDefault: !0 },
  { key: "Mod-End", run: bC, shift: yC },
  { key: "Enter", run: uY },
  { key: "Mod-a", run: XG },
  { key: "Backspace", run: W1, shift: W1 },
  { key: "Delete", run: bA },
  { key: "Mod-Backspace", mac: "Alt-Backspace", run: yA },
  { key: "Mod-Delete", mac: "Alt-Delete", run: eY },
  { mac: "Mod-Backspace", run: tY },
  { mac: "Mod-Delete", run: wA }
].concat(/* @__PURE__ */ dY.map((t) => ({ mac: t.key, run: t.run, shift: t.shift }))), gY = /* @__PURE__ */ [
  { key: "Alt-ArrowLeft", mac: "Ctrl-ArrowLeft", run: RG, shift: UG },
  { key: "Alt-ArrowRight", mac: "Ctrl-ArrowRight", run: PG, shift: HG },
  { key: "Alt-ArrowUp", run: rY },
  { key: "Shift-Alt-ArrowUp", run: oY },
  { key: "Alt-ArrowDown", run: sY },
  { key: "Shift-Alt-ArrowDown", run: lY },
  { key: "Escape", run: $G },
  { key: "Mod-Enter", run: fY },
  { key: "Alt-l", mac: "Ctrl-l", run: QG },
  { key: "Mod-i", run: ZG, preventDefault: !0 },
  { key: "Mod-[", run: EA },
  { key: "Mod-]", run: SA },
  { key: "Mod-Alt-\\", run: hY },
  { key: "Shift-Mod-k", run: aY },
  { key: "Shift-Mod-\\", run: FG },
  { key: "Mod-/", run: sG },
  { key: "Alt-A", run: lG }
].concat(pY), mY = { key: "Tab", run: SA, shift: EA };
function sn() {
  var t = arguments[0];
  typeof t == "string" && (t = document.createElement(t));
  var e = 1, n = arguments[1];
  if (n && typeof n == "object" && n.nodeType == null && !Array.isArray(n)) {
    for (var i in n)
      if (Object.prototype.hasOwnProperty.call(n, i)) {
        var r = n[i];
        typeof r == "string" ? t.setAttribute(i, r) : r != null && (t[i] = r);
      }
    e++;
  }
  for (; e < arguments.length; e++)
    AA(t, arguments[e]);
  return t;
}
function AA(t, e) {
  if (typeof e == "string")
    t.appendChild(document.createTextNode(e));
  else if (e != null)
    if (e.nodeType != null)
      t.appendChild(e);
    else if (Array.isArray(e))
      for (var n = 0; n < e.length; n++)
        AA(t, e[n]);
    else
      throw new RangeError("Unsupported child node: " + e);
}
const wC = typeof String.prototype.normalize == "function" ? (t) => t.normalize("NFKD") : (t) => t;
class Ha {
  constructor(e, n, i = 0, r = e.length, s, o) {
    this.test = o, this.value = { from: 0, to: 0 }, this.done = !1, this.matches = [], this.buffer = "", this.bufferPos = 0, this.iter = e.iterRange(i, r), this.bufferStart = i, this.normalize = s ? (l) => s(wC(l)) : wC, this.query = this.normalize(n);
  }
  peek() {
    if (this.bufferPos == this.buffer.length) {
      if (this.bufferStart += this.buffer.length, this.iter.next(), this.iter.done)
        return -1;
      this.bufferPos = 0, this.buffer = this.iter.value;
    }
    return Ci(this.buffer, this.bufferPos);
  }
  next() {
    for (; this.matches.length; )
      this.matches.pop();
    return this.nextOverlapping();
  }
  nextOverlapping() {
    for (; ; ) {
      let e = this.peek();
      if (e < 0)
        return this.done = !0, this;
      let n = mb(e), i = this.bufferStart + this.bufferPos;
      this.bufferPos += $i(e);
      let r = this.normalize(n);
      for (let s = 0, o = i; ; s++) {
        let l = r.charCodeAt(s), a = this.match(l, o);
        if (a)
          return this.value = a, this;
        if (s == r.length - 1)
          break;
        o == i && s < n.length && n.charCodeAt(s) == l && o++;
      }
    }
  }
  match(e, n) {
    let i = null;
    for (let r = 0; r < this.matches.length; r += 2) {
      let s = this.matches[r], o = !1;
      this.query.charCodeAt(s) == e && (s == this.query.length - 1 ? i = { from: this.matches[r + 1], to: n + 1 } : (this.matches[r]++, o = !0)), o || (this.matches.splice(r, 2), r -= 2);
    }
    return this.query.charCodeAt(0) == e && (this.query.length == 1 ? i = { from: n, to: n + 1 } : this.matches.push(1, n)), i && this.test && !this.test(i.from, i.to, this.buffer, this.bufferPos) && (i = null), i;
  }
}
typeof Symbol < "u" && (Ha.prototype[Symbol.iterator] = function() {
  return this;
});
const MA = { from: -1, to: -1, match: /* @__PURE__ */ /.*/.exec("") }, xb = "gm" + (/x/.unicode == null ? "" : "u");
class OA {
  constructor(e, n, i, r = 0, s = e.length) {
    if (this.text = e, this.to = s, this.curLine = "", this.done = !1, this.value = MA, /\\[sWDnr]|\n|\r|\[\^/.test(n))
      return new TA(e, n, i, r, s);
    this.re = new RegExp(n, xb + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.iter = e.iter();
    let o = e.lineAt(r);
    this.curLineStart = o.from, this.matchPos = Ed(e, r), this.getLine(this.curLineStart);
  }
  getLine(e) {
    this.iter.next(e), this.iter.lineBreak ? this.curLine = "" : (this.curLine = this.iter.value, this.curLineStart + this.curLine.length > this.to && (this.curLine = this.curLine.slice(0, this.to - this.curLineStart)), this.iter.next());
  }
  nextLine() {
    this.curLineStart = this.curLineStart + this.curLine.length + 1, this.curLineStart > this.to ? this.curLine = "" : this.getLine(0);
  }
  next() {
    for (let e = this.matchPos - this.curLineStart; ; ) {
      this.re.lastIndex = e;
      let n = this.matchPos <= this.to && this.re.exec(this.curLine);
      if (n) {
        let i = this.curLineStart + n.index, r = i + n[0].length;
        if (this.matchPos = Ed(this.text, r + (i == r ? 1 : 0)), i == this.curLineStart + this.curLine.length && this.nextLine(), (i < r || i > this.value.to) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this;
        e = this.matchPos - this.curLineStart;
      } else if (this.curLineStart + this.curLine.length < this.to)
        this.nextLine(), e = 0;
      else
        return this.done = !0, this;
    }
  }
}
const sm = /* @__PURE__ */ new WeakMap();
class wa {
  constructor(e, n) {
    this.from = e, this.text = n;
  }
  get to() {
    return this.from + this.text.length;
  }
  static get(e, n, i) {
    let r = sm.get(e);
    if (!r || r.from >= i || r.to <= n) {
      let l = new wa(n, e.sliceString(n, i));
      return sm.set(e, l), l;
    }
    if (r.from == n && r.to == i)
      return r;
    let { text: s, from: o } = r;
    return o > n && (s = e.sliceString(n, o) + s, o = n), r.to < i && (s += e.sliceString(r.to, i)), sm.set(e, new wa(o, s)), new wa(n, s.slice(n - o, i - o));
  }
}
class TA {
  constructor(e, n, i, r, s) {
    this.text = e, this.to = s, this.done = !1, this.value = MA, this.matchPos = Ed(e, r), this.re = new RegExp(n, xb + (i != null && i.ignoreCase ? "i" : "")), this.test = i == null ? void 0 : i.test, this.flat = wa.get(e, r, this.chunkEnd(r + 5e3));
  }
  chunkEnd(e) {
    return e >= this.to ? this.to : this.text.lineAt(e).to;
  }
  next() {
    for (; ; ) {
      let e = this.re.lastIndex = this.matchPos - this.flat.from, n = this.re.exec(this.flat.text);
      if (n && !n[0] && n.index == e && (this.re.lastIndex = e + 1, n = this.re.exec(this.flat.text)), n) {
        let i = this.flat.from + n.index, r = i + n[0].length;
        if ((this.flat.to >= this.to || n.index + n[0].length <= this.flat.text.length - 10) && (!this.test || this.test(i, r, n)))
          return this.value = { from: i, to: r, match: n }, this.matchPos = Ed(this.text, r + (i == r ? 1 : 0)), this;
      }
      if (this.flat.to == this.to)
        return this.done = !0, this;
      this.flat = wa.get(this.text, this.flat.from, this.chunkEnd(this.flat.from + this.flat.text.length * 2));
    }
  }
}
typeof Symbol < "u" && (OA.prototype[Symbol.iterator] = TA.prototype[Symbol.iterator] = function() {
  return this;
});
function bY(t) {
  try {
    return new RegExp(t, xb), !0;
  } catch {
    return !1;
  }
}
function Ed(t, e) {
  if (e >= t.length)
    return e;
  let n = t.lineAt(e), i;
  for (; e < n.to && (i = n.text.charCodeAt(e - n.from)) >= 56320 && i < 57344; )
    e++;
  return e;
}
function q1(t) {
  let e = sn("input", { class: "cm-textfield", name: "line" }), n = sn("form", {
    class: "cm-gotoLine",
    onkeydown: (r) => {
      r.keyCode == 27 ? (r.preventDefault(), t.dispatch({ effects: Ad.of(!1) }), t.focus()) : r.keyCode == 13 && (r.preventDefault(), i());
    },
    onsubmit: (r) => {
      r.preventDefault(), i();
    }
  }, sn("label", t.state.phrase("Go to line"), ": ", e), " ", sn("button", { class: "cm-button", type: "submit" }, t.state.phrase("go")));
  function i() {
    let r = /^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);
    if (!r)
      return;
    let { state: s } = t, o = s.doc.lineAt(s.selection.main.head), [, l, a, c, u] = r, f = c ? +c.slice(1) : 0, h = a ? +a : o.number;
    if (a && u) {
      let p = h / 100;
      l && (p = p * (l == "-" ? -1 : 1) + o.number / s.doc.lines), h = Math.round(s.doc.lines * p);
    } else
      a && l && (h = h * (l == "-" ? -1 : 1) + o.number);
    let d = s.doc.line(Math.max(1, Math.min(s.doc.lines, h)));
    t.dispatch({
      effects: Ad.of(!1),
      selection: Re.cursor(d.from + Math.max(0, Math.min(f, d.length))),
      scrollIntoView: !0
    }), t.focus();
  }
  return { dom: n };
}
const Ad = /* @__PURE__ */ kt.define(), vC = /* @__PURE__ */ oi.define({
  create() {
    return !0;
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(Ad) && (t = n.value);
    return t;
  },
  provide: (t) => _u.from(t, (e) => e ? q1 : null)
}), _Y = (t) => {
  let e = bu(t, q1);
  if (!e) {
    let n = [Ad.of(!0)];
    t.state.field(vC, !1) == null && n.push(kt.appendConfig.of([vC, yY])), t.dispatch({ effects: n }), e = bu(t, q1);
  }
  return e && e.dom.querySelector("input").focus(), !0;
}, yY = /* @__PURE__ */ $e.baseTheme({
  ".cm-panel.cm-gotoLine": {
    padding: "2px 6px 4px",
    "& label": { fontSize: "80%" }
  }
}), wY = {
  highlightWordAroundCursor: !1,
  minSelectionLength: 1,
  maxMatches: 100,
  wholeWords: !1
}, RA = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, wY, {
      highlightWordAroundCursor: (e, n) => e || n,
      minSelectionLength: Math.min,
      maxMatches: Math.min
    });
  }
});
function vY(t) {
  let e = [AY, EY];
  return t && e.push(RA.of(t)), e;
}
const kY = /* @__PURE__ */ ft.mark({ class: "cm-selectionMatch" }), CY = /* @__PURE__ */ ft.mark({ class: "cm-selectionMatch cm-selectionMatch-main" });
function kC(t, e, n, i) {
  return (n == 0 || t(e.sliceDoc(n - 1, n)) != bn.Word) && (i == e.doc.length || t(e.sliceDoc(i, i + 1)) != bn.Word);
}
function SY(t, e, n, i) {
  return t(e.sliceDoc(n, n + 1)) == bn.Word && t(e.sliceDoc(i - 1, i)) == bn.Word;
}
const EY = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.decorations = this.getDeco(t);
  }
  update(t) {
    (t.selectionSet || t.docChanged || t.viewportChanged) && (this.decorations = this.getDeco(t.view));
  }
  getDeco(t) {
    let e = t.state.facet(RA), { state: n } = t, i = n.selection;
    if (i.ranges.length > 1)
      return ft.none;
    let r = i.main, s, o = null;
    if (r.empty) {
      if (!e.highlightWordAroundCursor)
        return ft.none;
      let a = n.wordAt(r.head);
      if (!a)
        return ft.none;
      o = n.charCategorizer(r.head), s = n.sliceDoc(a.from, a.to);
    } else {
      let a = r.to - r.from;
      if (a < e.minSelectionLength || a > 200)
        return ft.none;
      if (e.wholeWords) {
        if (s = n.sliceDoc(r.from, r.to), o = n.charCategorizer(r.head), !(kC(o, n, r.from, r.to) && SY(o, n, r.from, r.to)))
          return ft.none;
      } else if (s = n.sliceDoc(r.from, r.to).trim(), !s)
        return ft.none;
    }
    let l = [];
    for (let a of t.visibleRanges) {
      let c = new Ha(n.doc, s, a.from, a.to);
      for (; !c.next().done; ) {
        let { from: u, to: f } = c.value;
        if ((!o || kC(o, n, u, f)) && (r.empty && u <= r.from && f >= r.to ? l.push(CY.range(u, f)) : (u >= r.to || f <= r.from) && l.push(kY.range(u, f)), l.length > e.maxMatches))
          return ft.none;
      }
    }
    return ft.set(l);
  }
}, {
  decorations: (t) => t.decorations
}), AY = /* @__PURE__ */ $e.baseTheme({
  ".cm-selectionMatch": { backgroundColor: "#99ff7780" },
  ".cm-searchMatch .cm-selectionMatch": { backgroundColor: "transparent" }
}), MY = ({ state: t, dispatch: e }) => {
  let { selection: n } = t, i = Re.create(n.ranges.map((r) => t.wordAt(r.head) || Re.cursor(r.head)), n.mainIndex);
  return i.eq(n) ? !1 : (e(t.update({ selection: i })), !0);
};
function OY(t, e) {
  let { main: n, ranges: i } = t.selection, r = t.wordAt(n.head), s = r && r.from == n.from && r.to == n.to;
  for (let o = !1, l = new Ha(t.doc, e, i[i.length - 1].to); ; )
    if (l.next(), l.done) {
      if (o)
        return null;
      l = new Ha(t.doc, e, 0, Math.max(0, i[i.length - 1].from - 1)), o = !0;
    } else {
      if (o && i.some((a) => a.from == l.value.from))
        continue;
      if (s) {
        let a = t.wordAt(l.value.from);
        if (!a || a.from != l.value.from || a.to != l.value.to)
          continue;
      }
      return l.value;
    }
}
const TY = ({ state: t, dispatch: e }) => {
  let { ranges: n } = t.selection;
  if (n.some((s) => s.from === s.to))
    return MY({ state: t, dispatch: e });
  let i = t.sliceDoc(n[0].from, n[0].to);
  if (t.selection.ranges.some((s) => t.sliceDoc(s.from, s.to) != i))
    return !1;
  let r = OY(t, i);
  return r ? (e(t.update({
    selection: t.selection.addRange(Re.range(r.from, r.to), !1),
    effects: $e.scrollIntoView(r.to)
  })), !0) : !1;
}, Jp = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      top: !1,
      caseSensitive: !1,
      literal: !1,
      wholeWord: !1,
      createPanel: (e) => new UY(e)
    });
  }
});
function RY(t) {
  return t ? [Jp.of(t), K1] : K1;
}
class PA {
  constructor(e) {
    this.search = e.search, this.caseSensitive = !!e.caseSensitive, this.literal = !!e.literal, this.regexp = !!e.regexp, this.replace = e.replace || "", this.valid = !!this.search && (!this.regexp || bY(this.search)), this.unquoted = this.unquote(this.search), this.wholeWord = !!e.wholeWord;
  }
  unquote(e) {
    return this.literal ? e : e.replace(/\\([nrt\\])/g, (n, i) => i == "n" ? `
` : i == "r" ? "\r" : i == "t" ? "	" : "\\");
  }
  eq(e) {
    return this.search == e.search && this.replace == e.replace && this.caseSensitive == e.caseSensitive && this.regexp == e.regexp && this.wholeWord == e.wholeWord;
  }
  create() {
    return this.regexp ? new NY(this) : new IY(this);
  }
  getCursor(e, n = 0, i) {
    let r = e.doc ? e : Mt.create({ doc: e });
    return i == null && (i = r.doc.length), this.regexp ? oa(this, r, n, i) : sa(this, r, n, i);
  }
}
class IA {
  constructor(e) {
    this.spec = e;
  }
}
function sa(t, e, n, i) {
  return new Ha(e.doc, t.unquoted, n, i, t.caseSensitive ? void 0 : (r) => r.toLowerCase(), t.wholeWord ? PY(e.doc, e.charCategorizer(e.selection.main.head)) : void 0);
}
function PY(t, e) {
  return (n, i, r, s) => ((s > n || s + r.length < i) && (s = Math.max(0, n - 2), r = t.sliceString(s, Math.min(t.length, i + 2))), (e(Md(r, n - s)) != bn.Word || e(Od(r, n - s)) != bn.Word) && (e(Od(r, i - s)) != bn.Word || e(Md(r, i - s)) != bn.Word));
}
class IY extends IA {
  constructor(e) {
    super(e);
  }
  nextMatch(e, n, i) {
    let r = sa(this.spec, e, i, e.doc.length).nextOverlapping();
    return r.done && (r = sa(this.spec, e, 0, n).nextOverlapping()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = i; ; ) {
      let s = Math.max(n, r - 1e4 - this.spec.unquoted.length), o = sa(this.spec, e, s, r), l = null;
      for (; !o.nextOverlapping().done; )
        l = o.value;
      if (l)
        return l;
      if (s == n)
        return null;
      r -= 1e4;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace);
  }
  matchAll(e, n) {
    let i = sa(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let s = sa(this.spec, e, Math.max(0, n - this.spec.unquoted.length), Math.min(i + this.spec.unquoted.length, e.doc.length));
    for (; !s.next().done; )
      r(s.value.from, s.value.to);
  }
}
function oa(t, e, n, i) {
  return new OA(e.doc, t.search, {
    ignoreCase: !t.caseSensitive,
    test: t.wholeWord ? DY(e.charCategorizer(e.selection.main.head)) : void 0
  }, n, i);
}
function Md(t, e) {
  return t.slice(Li(t, e, !1), e);
}
function Od(t, e) {
  return t.slice(e, Li(t, e));
}
function DY(t) {
  return (e, n, i) => !i[0].length || (t(Md(i.input, i.index)) != bn.Word || t(Od(i.input, i.index)) != bn.Word) && (t(Od(i.input, i.index + i[0].length)) != bn.Word || t(Md(i.input, i.index + i[0].length)) != bn.Word);
}
class NY extends IA {
  nextMatch(e, n, i) {
    let r = oa(this.spec, e, i, e.doc.length).next();
    return r.done && (r = oa(this.spec, e, 0, n).next()), r.done ? null : r.value;
  }
  prevMatchInRange(e, n, i) {
    for (let r = 1; ; r++) {
      let s = Math.max(n, i - r * 1e4), o = oa(this.spec, e, s, i), l = null;
      for (; !o.next().done; )
        l = o.value;
      if (l && (s == n || l.from > s + 10))
        return l;
      if (s == n)
        return null;
    }
  }
  prevMatch(e, n, i) {
    return this.prevMatchInRange(e, 0, n) || this.prevMatchInRange(e, i, e.doc.length);
  }
  getReplacement(e) {
    return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g, (n, i) => i == "$" ? "$" : i == "&" ? e.match[0] : i != "0" && +i < e.match.length ? e.match[i] : n));
  }
  matchAll(e, n) {
    let i = oa(this.spec, e, 0, e.doc.length), r = [];
    for (; !i.next().done; ) {
      if (r.length >= n)
        return null;
      r.push(i.value);
    }
    return r;
  }
  highlight(e, n, i, r) {
    let s = oa(this.spec, e, Math.max(0, n - 250), Math.min(i + 250, e.doc.length));
    for (; !s.next().done; )
      r(s.value.from, s.value.to);
  }
}
const vu = /* @__PURE__ */ kt.define(), Fb = /* @__PURE__ */ kt.define(), To = /* @__PURE__ */ oi.define({
  create(t) {
    return new om(J1(t).create(), null);
  },
  update(t, e) {
    for (let n of e.effects)
      n.is(vu) ? t = new om(n.value.create(), t.panel) : n.is(Fb) && (t = new om(t.query, n.value ? zb : null));
    return t;
  },
  provide: (t) => _u.from(t, (e) => e.panel)
});
class om {
  constructor(e, n) {
    this.query = e, this.panel = n;
  }
}
const LY = /* @__PURE__ */ ft.mark({ class: "cm-searchMatch" }), jY = /* @__PURE__ */ ft.mark({ class: "cm-searchMatch cm-searchMatch-selected" }), BY = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.decorations = this.highlight(t.state.field(To));
  }
  update(t) {
    let e = t.state.field(To);
    (e != t.startState.field(To) || t.docChanged || t.selectionSet || t.viewportChanged) && (this.decorations = this.highlight(e));
  }
  highlight({ query: t, panel: e }) {
    if (!e || !t.spec.valid)
      return ft.none;
    let { view: n } = this, i = new Fo();
    for (let r = 0, s = n.visibleRanges, o = s.length; r < o; r++) {
      let { from: l, to: a } = s[r];
      for (; r < o - 1 && a > s[r + 1].from - 2 * 250; )
        a = s[++r].to;
      t.highlight(n.state, l, a, (c, u) => {
        let f = n.state.selection.ranges.some((h) => h.from == c && h.to == u);
        i.add(c, u, f ? jY : LY);
      });
    }
    return i.finish();
  }
}, {
  decorations: (t) => t.decorations
});
function $u(t) {
  return (e) => {
    let n = e.state.field(To, !1);
    return n && n.query.spec.valid ? t(e, n) : Vb(e);
  };
}
const Td = /* @__PURE__ */ $u((t, { query: e }) => {
  let { to: n } = t.state.selection.main, i = e.nextMatch(t.state, n, n);
  return i ? (t.dispatch({
    selection: { anchor: i.from, head: i.to },
    scrollIntoView: !0,
    effects: Hb(t, i),
    userEvent: "select.search"
  }), !0) : !1;
}), Rd = /* @__PURE__ */ $u((t, { query: e }) => {
  let { state: n } = t, { from: i } = n.selection.main, r = e.prevMatch(n, i, i);
  return r ? (t.dispatch({
    selection: { anchor: r.from, head: r.to },
    scrollIntoView: !0,
    effects: Hb(t, r),
    userEvent: "select.search"
  }), !0) : !1;
}), xY = /* @__PURE__ */ $u((t, { query: e }) => {
  let n = e.matchAll(t.state, 1e3);
  return !n || !n.length ? !1 : (t.dispatch({
    selection: Re.create(n.map((i) => Re.range(i.from, i.to))),
    userEvent: "select.search.matches"
  }), !0);
}), FY = ({ state: t, dispatch: e }) => {
  let n = t.selection;
  if (n.ranges.length > 1 || n.main.empty)
    return !1;
  let { from: i, to: r } = n.main, s = [], o = 0;
  for (let l = new Ha(t.doc, t.sliceDoc(i, r)); !l.next().done; ) {
    if (s.length > 1e3)
      return !1;
    l.value.from == i && (o = s.length), s.push(Re.range(l.value.from, l.value.to));
  }
  return e(t.update({
    selection: Re.create(s, o),
    userEvent: "select.search.matches"
  })), !0;
}, CC = /* @__PURE__ */ $u((t, { query: e }) => {
  let { state: n } = t, { from: i, to: r } = n.selection.main;
  if (n.readOnly)
    return !1;
  let s = e.nextMatch(n, i, i);
  if (!s)
    return !1;
  let o = [], l, a, c = [];
  if (s.from == i && s.to == r && (a = n.toText(e.getReplacement(s)), o.push({ from: s.from, to: s.to, insert: a }), s = e.nextMatch(n, s.from, s.to), c.push($e.announce.of(n.phrase("replaced match on line $", n.doc.lineAt(i).number) + "."))), s) {
    let u = o.length == 0 || o[0].from >= s.to ? 0 : s.to - s.from - a.length;
    l = { anchor: s.from - u, head: s.to - u }, c.push(Hb(t, s));
  }
  return t.dispatch({
    changes: o,
    selection: l,
    scrollIntoView: !!l,
    effects: c,
    userEvent: "input.replace"
  }), !0;
}), zY = /* @__PURE__ */ $u((t, { query: e }) => {
  if (t.state.readOnly)
    return !1;
  let n = e.matchAll(t.state, 1e9).map((r) => {
    let { from: s, to: o } = r;
    return { from: s, to: o, insert: e.getReplacement(r) };
  });
  if (!n.length)
    return !1;
  let i = t.state.phrase("replaced $ matches", n.length) + ".";
  return t.dispatch({
    changes: n,
    effects: $e.announce.of(i),
    userEvent: "input.replace.all"
  }), !0;
});
function zb(t) {
  return t.state.facet(Jp).createPanel(t);
}
function J1(t, e) {
  var n, i, r, s;
  let o = t.selection.main, l = o.empty || o.to > o.from + 100 ? "" : t.sliceDoc(o.from, o.to);
  if (e && !l)
    return e;
  let a = t.facet(Jp);
  return new PA({
    search: ((n = e == null ? void 0 : e.literal) !== null && n !== void 0 ? n : a.literal) ? l : l.replace(/\n/g, "\\n"),
    caseSensitive: (i = e == null ? void 0 : e.caseSensitive) !== null && i !== void 0 ? i : a.caseSensitive,
    literal: (r = e == null ? void 0 : e.literal) !== null && r !== void 0 ? r : a.literal,
    wholeWord: (s = e == null ? void 0 : e.wholeWord) !== null && s !== void 0 ? s : a.wholeWord
  });
}
const Vb = (t) => {
  let e = t.state.field(To, !1);
  if (e && e.panel) {
    let n = bu(t, zb);
    if (!n)
      return !1;
    let i = n.dom.querySelector("[main-field]");
    if (i && i != t.root.activeElement) {
      let r = J1(t.state, e.query.spec);
      r.valid && t.dispatch({ effects: vu.of(r) }), i.focus(), i.select();
    }
  } else
    t.dispatch({ effects: [
      Fb.of(!0),
      e ? vu.of(J1(t.state, e.query.spec)) : kt.appendConfig.of(K1)
    ] });
  return !0;
}, Ub = (t) => {
  let e = t.state.field(To, !1);
  if (!e || !e.panel)
    return !1;
  let n = bu(t, zb);
  return n && n.dom.contains(t.root.activeElement) && t.focus(), t.dispatch({ effects: Fb.of(!1) }), !0;
}, VY = [
  { key: "Mod-f", run: Vb, scope: "editor search-panel" },
  { key: "F3", run: Td, shift: Rd, scope: "editor search-panel", preventDefault: !0 },
  { key: "Mod-g", run: Td, shift: Rd, scope: "editor search-panel", preventDefault: !0 },
  { key: "Escape", run: Ub, scope: "editor search-panel" },
  { key: "Mod-Shift-l", run: FY },
  { key: "Alt-g", run: _Y },
  { key: "Mod-d", run: TY, preventDefault: !0 }
];
class UY {
  constructor(e) {
    this.view = e;
    let n = this.query = e.state.field(To).query.spec;
    this.commit = this.commit.bind(this), this.searchField = sn("input", {
      value: n.search,
      placeholder: Xi(e, "Find"),
      "aria-label": Xi(e, "Find"),
      class: "cm-textfield",
      name: "search",
      form: "",
      "main-field": "true",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.replaceField = sn("input", {
      value: n.replace,
      placeholder: Xi(e, "Replace"),
      "aria-label": Xi(e, "Replace"),
      class: "cm-textfield",
      name: "replace",
      form: "",
      onchange: this.commit,
      onkeyup: this.commit
    }), this.caseField = sn("input", {
      type: "checkbox",
      name: "case",
      form: "",
      checked: n.caseSensitive,
      onchange: this.commit
    }), this.reField = sn("input", {
      type: "checkbox",
      name: "re",
      form: "",
      checked: n.regexp,
      onchange: this.commit
    }), this.wordField = sn("input", {
      type: "checkbox",
      name: "word",
      form: "",
      checked: n.wholeWord,
      onchange: this.commit
    });
    function i(r, s, o) {
      return sn("button", { class: "cm-button", name: r, onclick: s, type: "button" }, o);
    }
    this.dom = sn("div", { onkeydown: (r) => this.keydown(r), class: "cm-search" }, [
      this.searchField,
      i("next", () => Td(e), [Xi(e, "next")]),
      i("prev", () => Rd(e), [Xi(e, "previous")]),
      i("select", () => xY(e), [Xi(e, "all")]),
      sn("label", null, [this.caseField, Xi(e, "match case")]),
      sn("label", null, [this.reField, Xi(e, "regexp")]),
      sn("label", null, [this.wordField, Xi(e, "by word")]),
      ...e.state.readOnly ? [] : [
        sn("br"),
        this.replaceField,
        i("replace", () => CC(e), [Xi(e, "replace")]),
        i("replaceAll", () => zY(e), [Xi(e, "replace all")])
      ],
      sn("button", {
        name: "close",
        onclick: () => Ub(e),
        "aria-label": Xi(e, "close"),
        type: "button"
      }, ["Ã—"])
    ]);
  }
  commit() {
    let e = new PA({
      search: this.searchField.value,
      caseSensitive: this.caseField.checked,
      regexp: this.reField.checked,
      wholeWord: this.wordField.checked,
      replace: this.replaceField.value
    });
    e.eq(this.query) || (this.query = e, this.view.dispatch({ effects: vu.of(e) }));
  }
  keydown(e) {
    sJ(this.view, e, "search-panel") ? e.preventDefault() : e.keyCode == 13 && e.target == this.searchField ? (e.preventDefault(), (e.shiftKey ? Rd : Td)(this.view)) : e.keyCode == 13 && e.target == this.replaceField && (e.preventDefault(), CC(this.view));
  }
  update(e) {
    for (let n of e.transactions)
      for (let i of n.effects)
        i.is(vu) && !i.value.eq(this.query) && this.setQuery(i.value);
  }
  setQuery(e) {
    this.query = e, this.searchField.value = e.search, this.replaceField.value = e.replace, this.caseField.checked = e.caseSensitive, this.reField.checked = e.regexp, this.wordField.checked = e.wholeWord;
  }
  mount() {
    this.searchField.select();
  }
  get pos() {
    return 80;
  }
  get top() {
    return this.view.state.facet(Jp).top;
  }
}
function Xi(t, e) {
  return t.state.phrase(e);
}
const Jf = 30, Kf = /[\s\.,:;?!]/;
function Hb(t, { from: e, to: n }) {
  let i = t.state.doc.lineAt(e), r = t.state.doc.lineAt(n).to, s = Math.max(i.from, e - Jf), o = Math.min(r, n + Jf), l = t.state.sliceDoc(s, o);
  if (s != i.from) {
    for (let a = 0; a < Jf; a++)
      if (!Kf.test(l[a + 1]) && Kf.test(l[a])) {
        l = l.slice(a);
        break;
      }
  }
  if (o != r) {
    for (let a = l.length - 1; a > l.length - Jf; a--)
      if (!Kf.test(l[a - 1]) && Kf.test(l[a])) {
        l = l.slice(0, a);
        break;
      }
  }
  return $e.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`);
}
const HY = /* @__PURE__ */ $e.baseTheme({
  ".cm-panel.cm-search": {
    padding: "2px 6px 4px",
    position: "relative",
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "4px",
      backgroundColor: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    },
    "& input, & button, & label": {
      margin: ".2em .6em .2em 0"
    },
    "& input[type=checkbox]": {
      marginRight: ".2em"
    },
    "& label": {
      fontSize: "80%",
      whiteSpace: "pre"
    }
  },
  "&light .cm-searchMatch": { backgroundColor: "#ffff0054" },
  "&dark .cm-searchMatch": { backgroundColor: "#00ffff8a" },
  "&light .cm-searchMatch-selected": { backgroundColor: "#ff6a0054" },
  "&dark .cm-searchMatch-selected": { backgroundColor: "#ff00ff8a" }
}), K1 = [
  To,
  /* @__PURE__ */ ac.lowest(BY),
  HY
];
class DA {
  constructor(e, n, i) {
    this.state = e, this.pos = n, this.explicit = i, this.abortListeners = [];
  }
  tokenBefore(e) {
    let n = Ri(this.state).resolveInner(this.pos, -1);
    for (; n && e.indexOf(n.name) < 0; )
      n = n.parent;
    return n ? {
      from: n.from,
      to: this.pos,
      text: this.state.sliceDoc(n.from, this.pos),
      type: n.type
    } : null;
  }
  matchBefore(e) {
    let n = this.state.doc.lineAt(this.pos), i = Math.max(n.from, this.pos - 250), r = n.text.slice(i - n.from, this.pos - n.from), s = r.search(NA(e, !1));
    return s < 0 ? null : { from: i + s, to: this.pos, text: r.slice(s) };
  }
  get aborted() {
    return this.abortListeners == null;
  }
  addEventListener(e, n) {
    e == "abort" && this.abortListeners && this.abortListeners.push(n);
  }
}
function SC(t) {
  let e = Object.keys(t).join(""), n = /\w/.test(e);
  return n && (e = e.replace(/\w/g, "")), `[${n ? "\\w" : ""}${e.replace(/[^\w\s]/g, "\\$&")}]`;
}
function WY(t) {
  let e = /* @__PURE__ */ Object.create(null), n = /* @__PURE__ */ Object.create(null);
  for (let { label: r } of t) {
    e[r[0]] = !0;
    for (let s = 1; s < r.length; s++)
      n[r[s]] = !0;
  }
  let i = SC(e) + SC(n) + "*$";
  return [new RegExp("^" + i), new RegExp(i)];
}
function qY(t) {
  let e = t.map((r) => typeof r == "string" ? { label: r } : r), [n, i] = e.every((r) => /^\w+$/.test(r.label)) ? [/\w*$/, /\w+$/] : WY(e);
  return (r) => {
    let s = r.matchBefore(i);
    return s || r.explicit ? { from: s ? s.from : r.pos, options: e, validFor: n } : null;
  };
}
class EC {
  constructor(e, n, i) {
    this.completion = e, this.source = n, this.match = i;
  }
}
function Ro(t) {
  return t.selection.main.head;
}
function NA(t, e) {
  var n;
  let { source: i } = t, r = e && i[0] != "^", s = i[i.length - 1] != "$";
  return !r && !s ? t : new RegExp(`${r ? "^" : ""}(?:${i})${s ? "$" : ""}`, (n = t.flags) !== null && n !== void 0 ? n : t.ignoreCase ? "i" : "");
}
const JY = /* @__PURE__ */ Qo.define();
function KY(t, e, n, i) {
  return Object.assign(Object.assign({}, t.changeByRange((r) => {
    if (r == t.selection.main)
      return {
        changes: { from: n, to: i, insert: e },
        range: Re.cursor(n + e.length)
      };
    let s = i - n;
    return !r.empty || s && t.sliceDoc(r.from - s, r.from) != t.sliceDoc(n, i) ? { range: r } : {
      changes: { from: r.from - s, to: r.from, insert: e },
      range: Re.cursor(r.from - s + e.length)
    };
  })), { userEvent: "input.complete" });
}
function LA(t, e) {
  const n = e.completion.apply || e.completion.label;
  let i = e.source;
  typeof n == "string" ? t.dispatch(Object.assign(Object.assign({}, KY(t.state, n, i.from, i.to)), { annotations: JY.of(e.completion) })) : n(t, e.completion, i.from, i.to);
}
const AC = /* @__PURE__ */ new WeakMap();
function GY(t) {
  if (!Array.isArray(t))
    return t;
  let e = AC.get(t);
  return e || AC.set(t, e = qY(t)), e;
}
class YY {
  constructor(e) {
    this.pattern = e, this.chars = [], this.folded = [], this.any = [], this.precise = [], this.byWord = [];
    for (let n = 0; n < e.length; ) {
      let i = Ci(e, n), r = $i(i);
      this.chars.push(i);
      let s = e.slice(n, n + r), o = s.toUpperCase();
      this.folded.push(Ci(o == s ? s.toLowerCase() : o, 0)), n += r;
    }
    this.astral = e.length != this.chars.length;
  }
  match(e) {
    if (this.pattern.length == 0)
      return [0];
    if (e.length < this.pattern.length)
      return null;
    let { chars: n, folded: i, any: r, precise: s, byWord: o } = this;
    if (n.length == 1) {
      let S = Ci(e, 0);
      return S == n[0] ? [0, 0, $i(S)] : S == i[0] ? [-200, 0, $i(S)] : null;
    }
    let l = e.indexOf(this.pattern);
    if (l == 0)
      return [0, 0, this.pattern.length];
    let a = n.length, c = 0;
    if (l < 0) {
      for (let S = 0, v = Math.min(e.length, 200); S < v && c < a; ) {
        let k = Ci(e, S);
        (k == n[c] || k == i[c]) && (r[c++] = S), S += $i(k);
      }
      if (c < a)
        return null;
    }
    let u = 0, f = 0, h = !1, d = 0, p = -1, g = -1, m = /[a-z]/.test(e), _ = !0;
    for (let S = 0, v = Math.min(e.length, 200), k = 0; S < v && f < a; ) {
      let C = Ci(e, S);
      l < 0 && (u < a && C == n[u] && (s[u++] = S), d < a && (C == n[d] || C == i[d] ? (d == 0 && (p = S), g = S + 1, d++) : d = 0));
      let A, w = C < 255 ? C >= 48 && C <= 57 || C >= 97 && C <= 122 ? 2 : C >= 65 && C <= 90 ? 1 : 0 : (A = mb(C)) != A.toLowerCase() ? 1 : A != A.toUpperCase() ? 2 : 0;
      (!S || w == 1 && m || k == 0 && w != 0) && (n[f] == C || i[f] == C && (h = !0) ? o[f++] = S : o.length && (_ = !1)), k = w, S += $i(C);
    }
    return f == a && o[0] == 0 && _ ? this.result(-100 + (h ? -200 : 0), o, e) : d == a && p == 0 ? [-200 - e.length, 0, g] : l > -1 ? [-700 - e.length, l, l + this.pattern.length] : d == a ? [-200 + -700 - e.length, p, g] : f == a ? this.result(-100 + (h ? -200 : 0) + -700 + (_ ? 0 : -1100), o, e) : n.length == 2 ? null : this.result((r[0] ? -700 : 0) + -200 + -1100, r, e);
  }
  result(e, n, i) {
    let r = [e - i.length], s = 1;
    for (let o of n) {
      let l = o + (this.astral ? $i(Ci(i, o)) : 1);
      s > 1 && r[s - 1] == o ? r[s - 1] = l : (r[s++] = o, r[s++] = l);
    }
    return r;
  }
}
const vr = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      activateOnTyping: !0,
      selectOnOpen: !0,
      override: null,
      closeOnBlur: !0,
      maxRenderedOptions: 100,
      defaultKeymap: !0,
      tooltipClass: () => "",
      optionClass: () => "",
      aboveCursor: !1,
      icons: !0,
      addToOptions: [],
      compareCompletions: (e, n) => e.label.localeCompare(n.label),
      interactionDelay: 75
    }, {
      defaultKeymap: (e, n) => e && n,
      closeOnBlur: (e, n) => e && n,
      icons: (e, n) => e && n,
      tooltipClass: (e, n) => (i) => MC(e(i), n(i)),
      optionClass: (e, n) => (i) => MC(e(i), n(i)),
      addToOptions: (e, n) => e.concat(n)
    });
  }
});
function MC(t, e) {
  return t ? e ? t + " " + e : t : e;
}
function XY(t) {
  let e = t.addToOptions.slice();
  return t.icons && e.push({
    render(n) {
      let i = document.createElement("div");
      return i.classList.add("cm-completionIcon"), n.type && i.classList.add(...n.type.split(/\s+/g).map((r) => "cm-completionIcon-" + r)), i.setAttribute("aria-hidden", "true"), i;
    },
    position: 20
  }), e.push({
    render(n, i, r) {
      let s = document.createElement("span");
      s.className = "cm-completionLabel";
      let { label: o } = n, l = 0;
      for (let a = 1; a < r.length; ) {
        let c = r[a++], u = r[a++];
        c > l && s.appendChild(document.createTextNode(o.slice(l, c)));
        let f = s.appendChild(document.createElement("span"));
        f.appendChild(document.createTextNode(o.slice(c, u))), f.className = "cm-completionMatchedText", l = u;
      }
      return l < o.length && s.appendChild(document.createTextNode(o.slice(l))), s;
    },
    position: 50
  }, {
    render(n) {
      if (!n.detail)
        return null;
      let i = document.createElement("span");
      return i.className = "cm-completionDetail", i.textContent = n.detail, i;
    },
    position: 80
  }), e.sort((n, i) => n.position - i.position).map((n) => n.render);
}
function OC(t, e, n) {
  if (t <= n)
    return { from: 0, to: t };
  if (e < 0 && (e = 0), e <= t >> 1) {
    let r = Math.floor(e / n);
    return { from: r * n, to: (r + 1) * n };
  }
  let i = Math.floor((t - e) / n);
  return { from: t - (i + 1) * n, to: t - i * n };
}
class QY {
  constructor(e, n) {
    this.view = e, this.stateField = n, this.info = null, this.placeInfo = {
      read: () => this.measureInfo(),
      write: (l) => this.positionInfo(l),
      key: this
    }, this.space = null, this.currentClass = "";
    let i = e.state.field(n), { options: r, selected: s } = i.open, o = e.state.facet(vr);
    this.optionContent = XY(o), this.optionClass = o.optionClass, this.tooltipClass = o.tooltipClass, this.range = OC(r.length, s, o.maxRenderedOptions), this.dom = document.createElement("div"), this.dom.className = "cm-tooltip-autocomplete", this.updateTooltipClass(e.state), this.dom.addEventListener("mousedown", (l) => {
      for (let a = l.target, c; a && a != this.dom; a = a.parentNode)
        if (a.nodeName == "LI" && (c = /-(\d+)$/.exec(a.id)) && +c[1] < r.length) {
          LA(e, r[+c[1]]), l.preventDefault();
          return;
        }
    }), this.list = this.dom.appendChild(this.createListBox(r, i.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    });
  }
  mount() {
    this.updateSel();
  }
  update(e) {
    var n, i, r;
    let s = e.state.field(this.stateField), o = e.startState.field(this.stateField);
    this.updateTooltipClass(e.state), s != o && (this.updateSel(), ((n = s.open) === null || n === void 0 ? void 0 : n.disabled) != ((i = o.open) === null || i === void 0 ? void 0 : i.disabled) && this.dom.classList.toggle("cm-tooltip-autocomplete-disabled", !!(!((r = s.open) === null || r === void 0) && r.disabled)));
  }
  updateTooltipClass(e) {
    let n = this.tooltipClass(e);
    if (n != this.currentClass) {
      for (let i of this.currentClass.split(" "))
        i && this.dom.classList.remove(i);
      for (let i of n.split(" "))
        i && this.dom.classList.add(i);
      this.currentClass = n;
    }
  }
  positioned(e) {
    this.space = e, this.info && this.view.requestMeasure(this.placeInfo);
  }
  updateSel() {
    let e = this.view.state.field(this.stateField), n = e.open;
    if ((n.selected > -1 && n.selected < this.range.from || n.selected >= this.range.to) && (this.range = OC(n.options.length, n.selected, this.view.state.facet(vr).maxRenderedOptions), this.list.remove(), this.list = this.dom.appendChild(this.createListBox(n.options, e.id, this.range)), this.list.addEventListener("scroll", () => {
      this.info && this.view.requestMeasure(this.placeInfo);
    })), this.updateSelectedOption(n.selected)) {
      this.info && (this.info.remove(), this.info = null);
      let { completion: i } = n.options[n.selected], { info: r } = i;
      if (!r)
        return;
      let s = typeof r == "string" ? document.createTextNode(r) : r(i);
      if (!s)
        return;
      "then" in s ? s.then((o) => {
        o && this.view.state.field(this.stateField, !1) == e && this.addInfoPane(o);
      }).catch((o) => rr(this.view.state, o, "completion info")) : this.addInfoPane(s);
    }
  }
  addInfoPane(e) {
    let n = this.info = document.createElement("div");
    n.className = "cm-tooltip cm-completionInfo", n.appendChild(e), this.dom.appendChild(n), this.view.requestMeasure(this.placeInfo);
  }
  updateSelectedOption(e) {
    let n = null;
    for (let i = this.list.firstChild, r = this.range.from; i; i = i.nextSibling, r++)
      r == e ? i.hasAttribute("aria-selected") || (i.setAttribute("aria-selected", "true"), n = i) : i.hasAttribute("aria-selected") && i.removeAttribute("aria-selected");
    return n && $Y(this.list, n), n;
  }
  measureInfo() {
    let e = this.dom.querySelector("[aria-selected]");
    if (!e || !this.info)
      return null;
    let n = this.dom.getBoundingClientRect(), i = this.info.getBoundingClientRect(), r = e.getBoundingClientRect(), s = this.space;
    if (!s) {
      let p = this.dom.ownerDocument.defaultView || window;
      s = { left: 0, top: 0, right: p.innerWidth, bottom: p.innerHeight };
    }
    if (r.top > Math.min(s.bottom, n.bottom) - 10 || r.bottom < Math.max(s.top, n.top) + 10)
      return null;
    let o = this.view.textDirection == Mn.RTL, l = o, a = !1, c, u = "", f = "", h = n.left - s.left, d = s.right - n.right;
    if (l && h < Math.min(i.width, d) ? l = !1 : !l && d < Math.min(i.width, h) && (l = !0), i.width <= (l ? h : d))
      u = Math.max(s.top, Math.min(r.top, s.bottom - i.height)) - n.top + "px", c = Math.min(400, l ? h : d) + "px";
    else {
      a = !0, c = Math.min(400, (o ? n.right : s.right - n.left) - 30) + "px";
      let p = s.bottom - n.bottom;
      p >= i.height || p > n.top ? u = r.bottom - n.top + "px" : f = n.bottom - r.top + "px";
    }
    return {
      top: u,
      bottom: f,
      maxWidth: c,
      class: a ? o ? "left-narrow" : "right-narrow" : l ? "left" : "right"
    };
  }
  positionInfo(e) {
    this.info && (e ? (this.info.style.top = e.top, this.info.style.bottom = e.bottom, this.info.style.maxWidth = e.maxWidth, this.info.className = "cm-tooltip cm-completionInfo cm-completionInfo-" + e.class) : this.info.style.top = "-1e6px");
  }
  createListBox(e, n, i) {
    const r = document.createElement("ul");
    r.id = n, r.setAttribute("role", "listbox"), r.setAttribute("aria-expanded", "true"), r.setAttribute("aria-label", this.view.state.phrase("Completions"));
    for (let s = i.from; s < i.to; s++) {
      let { completion: o, match: l } = e[s];
      const a = r.appendChild(document.createElement("li"));
      a.id = n + "-" + s, a.setAttribute("role", "option");
      let c = this.optionClass(o);
      c && (a.className = c);
      for (let u of this.optionContent) {
        let f = u(o, this.view.state, l);
        f && a.appendChild(f);
      }
    }
    return i.from && r.classList.add("cm-completionListIncompleteTop"), i.to < e.length && r.classList.add("cm-completionListIncompleteBottom"), r;
  }
}
function ZY(t) {
  return (e) => new QY(e, t);
}
function $Y(t, e) {
  let n = t.getBoundingClientRect(), i = e.getBoundingClientRect();
  i.top < n.top ? t.scrollTop -= n.top - i.top : i.bottom > n.bottom && (t.scrollTop += i.bottom - n.bottom);
}
function TC(t) {
  return (t.boost || 0) * 100 + (t.apply ? 10 : 0) + (t.info ? 5 : 0) + (t.type ? 1 : 0);
}
function eX(t, e) {
  let n = [], i = 0;
  for (let l of t)
    if (l.hasResult())
      if (l.result.filter === !1) {
        let a = l.result.getMatch;
        for (let c of l.result.options) {
          let u = [1e9 - i++];
          if (a)
            for (let f of a(c))
              u.push(f);
          n.push(new EC(c, l, u));
        }
      } else {
        let a = new YY(e.sliceDoc(l.from, l.to)), c;
        for (let u of l.result.options)
          (c = a.match(u.label)) && (u.boost != null && (c[0] += u.boost), n.push(new EC(u, l, c)));
      }
  let r = [], s = null, o = e.facet(vr).compareCompletions;
  for (let l of n.sort((a, c) => c.match[0] - a.match[0] || o(a.completion, c.completion)))
    !s || s.label != l.completion.label || s.detail != l.completion.detail || s.type != null && l.completion.type != null && s.type != l.completion.type || s.apply != l.completion.apply ? r.push(l) : TC(l.completion) > TC(s) && (r[r.length - 1] = l), s = l.completion;
  return r;
}
class fa {
  constructor(e, n, i, r, s, o) {
    this.options = e, this.attrs = n, this.tooltip = i, this.timestamp = r, this.selected = s, this.disabled = o;
  }
  setSelected(e, n) {
    return e == this.selected || e >= this.options.length ? this : new fa(this.options, RC(n, e), this.tooltip, this.timestamp, e, this.disabled);
  }
  static build(e, n, i, r, s) {
    let o = eX(e, n);
    if (!o.length)
      return r && e.some((a) => a.state == 1) ? new fa(r.options, r.attrs, r.tooltip, r.timestamp, r.selected, !0) : null;
    let l = n.facet(vr).selectOnOpen ? 0 : -1;
    if (r && r.selected != l && r.selected != -1) {
      let a = r.options[r.selected].completion;
      for (let c = 0; c < o.length; c++)
        if (o[c].completion == a) {
          l = c;
          break;
        }
    }
    return new fa(o, RC(i, l), {
      pos: e.reduce((a, c) => c.hasResult() ? Math.min(a, c.from) : a, 1e8),
      create: ZY(ur),
      above: s.aboveCursor
    }, r ? r.timestamp : Date.now(), l, !1);
  }
  map(e) {
    return new fa(this.options, this.attrs, Object.assign(Object.assign({}, this.tooltip), { pos: e.mapPos(this.tooltip.pos) }), this.timestamp, this.selected, this.disabled);
  }
}
class Pd {
  constructor(e, n, i) {
    this.active = e, this.id = n, this.open = i;
  }
  static start() {
    return new Pd(iX, "cm-ac-" + Math.floor(Math.random() * 2e6).toString(36), null);
  }
  update(e) {
    let { state: n } = e, i = n.facet(vr), s = (i.override || n.languageDataAt("autocomplete", Ro(n)).map(GY)).map((l) => (this.active.find((c) => c.source == l) || new Ui(l, this.active.some((c) => c.state != 0) ? 1 : 0)).update(e, i));
    s.length == this.active.length && s.every((l, a) => l == this.active[a]) && (s = this.active);
    let o = this.open;
    o && e.docChanged && (o = o.map(e.changes)), e.selection || s.some((l) => l.hasResult() && e.changes.touchesRange(l.from, l.to)) || !tX(s, this.active) ? o = fa.build(s, n, this.id, o, i) : o && o.disabled && !s.some((l) => l.state == 1) && (o = null), !o && s.every((l) => l.state != 1) && s.some((l) => l.hasResult()) && (s = s.map((l) => l.hasResult() ? new Ui(l.source, 0) : l));
    for (let l of e.effects)
      l.is(BA) && (o = o && o.setSelected(l.value, this.id));
    return s == this.active && o == this.open ? this : new Pd(s, this.id, o);
  }
  get tooltip() {
    return this.open ? this.open.tooltip : null;
  }
  get attrs() {
    return this.open ? this.open.attrs : nX;
  }
}
function tX(t, e) {
  if (t == e)
    return !0;
  for (let n = 0, i = 0; ; ) {
    for (; n < t.length && !t[n].hasResult; )
      n++;
    for (; i < e.length && !e[i].hasResult; )
      i++;
    let r = n == t.length, s = i == e.length;
    if (r || s)
      return r == s;
    if (t[n++].result != e[i++].result)
      return !1;
  }
}
const nX = {
  "aria-autocomplete": "list"
};
function RC(t, e) {
  let n = {
    "aria-autocomplete": "list",
    "aria-haspopup": "listbox",
    "aria-controls": t
  };
  return e > -1 && (n["aria-activedescendant"] = t + "-" + e), n;
}
const iX = [];
function G1(t) {
  return t.isUserEvent("input.type") ? "input" : t.isUserEvent("delete.backward") ? "delete" : null;
}
class Ui {
  constructor(e, n, i = -1) {
    this.source = e, this.state = n, this.explicitPos = i;
  }
  hasResult() {
    return !1;
  }
  update(e, n) {
    let i = G1(e), r = this;
    i ? r = r.handleUserEvent(e, i, n) : e.docChanged ? r = r.handleChange(e) : e.selection && r.state != 0 && (r = new Ui(r.source, 0));
    for (let s of e.effects)
      if (s.is(Wb))
        r = new Ui(r.source, 1, s.value ? Ro(e.state) : -1);
      else if (s.is(Id))
        r = new Ui(r.source, 0);
      else if (s.is(jA))
        for (let o of s.value)
          o.source == r.source && (r = o);
    return r;
  }
  handleUserEvent(e, n, i) {
    return n == "delete" || !i.activateOnTyping ? this.map(e.changes) : new Ui(this.source, 1);
  }
  handleChange(e) {
    return e.changes.touchesRange(Ro(e.startState)) ? new Ui(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty || this.explicitPos < 0 ? this : new Ui(this.source, this.state, e.mapPos(this.explicitPos));
  }
}
class Hc extends Ui {
  constructor(e, n, i, r, s) {
    super(e, 2, n), this.result = i, this.from = r, this.to = s;
  }
  hasResult() {
    return !0;
  }
  handleUserEvent(e, n, i) {
    var r;
    let s = e.changes.mapPos(this.from), o = e.changes.mapPos(this.to, 1), l = Ro(e.state);
    if ((this.explicitPos < 0 ? l <= s : l < this.from) || l > o || n == "delete" && Ro(e.startState) == this.from)
      return new Ui(this.source, n == "input" && i.activateOnTyping ? 1 : 0);
    let a = this.explicitPos < 0 ? -1 : e.changes.mapPos(this.explicitPos), c;
    return rX(this.result.validFor, e.state, s, o) ? new Hc(this.source, a, this.result, s, o) : this.result.update && (c = this.result.update(this.result, s, o, new DA(e.state, l, a >= 0))) ? new Hc(this.source, a, c, c.from, (r = c.to) !== null && r !== void 0 ? r : Ro(e.state)) : new Ui(this.source, 1, a);
  }
  handleChange(e) {
    return e.changes.touchesRange(this.from, this.to) ? new Ui(this.source, 0) : this.map(e.changes);
  }
  map(e) {
    return e.empty ? this : new Hc(this.source, this.explicitPos < 0 ? -1 : e.mapPos(this.explicitPos), this.result, e.mapPos(this.from), e.mapPos(this.to, 1));
  }
}
function rX(t, e, n, i) {
  if (!t)
    return !1;
  let r = e.sliceDoc(n, i);
  return typeof t == "function" ? t(r, n, i, e) : NA(t, !0).test(r);
}
const Wb = /* @__PURE__ */ kt.define(), Id = /* @__PURE__ */ kt.define(), jA = /* @__PURE__ */ kt.define({
  map(t, e) {
    return t.map((n) => n.map(e));
  }
}), BA = /* @__PURE__ */ kt.define(), ur = /* @__PURE__ */ oi.define({
  create() {
    return Pd.start();
  },
  update(t, e) {
    return t.update(e);
  },
  provide: (t) => [
    Bp.from(t, (e) => e.tooltip),
    $e.contentAttributes.from(t, (e) => e.attrs)
  ]
});
function Gf(t, e = "option") {
  return (n) => {
    let i = n.state.field(ur, !1);
    if (!i || !i.open || i.open.disabled || Date.now() - i.open.timestamp < n.state.facet(vr).interactionDelay)
      return !1;
    let r = 1, s;
    e == "page" && (s = qJ(n, i.open.tooltip)) && (r = Math.max(2, Math.floor(s.dom.offsetHeight / s.dom.querySelector("li").offsetHeight) - 1));
    let { length: o } = i.open.options, l = i.open.selected > -1 ? i.open.selected + r * (t ? 1 : -1) : t ? 0 : o - 1;
    return l < 0 ? l = e == "page" ? 0 : o - 1 : l >= o && (l = e == "page" ? o - 1 : 0), n.dispatch({ effects: BA.of(l) }), !0;
  };
}
const sX = (t) => {
  let e = t.state.field(ur, !1);
  return t.state.readOnly || !e || !e.open || e.open.selected < 0 || Date.now() - e.open.timestamp < t.state.facet(vr).interactionDelay ? !1 : (e.open.disabled || LA(t, e.open.options[e.open.selected]), !0);
}, oX = (t) => t.state.field(ur, !1) ? (t.dispatch({ effects: Wb.of(!0) }), !0) : !1, lX = (t) => {
  let e = t.state.field(ur, !1);
  return !e || !e.active.some((n) => n.state != 0) ? !1 : (t.dispatch({ effects: Id.of(null) }), !0);
};
class aX {
  constructor(e, n) {
    this.active = e, this.context = n, this.time = Date.now(), this.updates = [], this.done = void 0;
  }
}
const PC = 50, cX = 50, uX = 1e3, fX = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.debounceUpdate = -1, this.running = [], this.debounceAccept = -1, this.composing = 0;
    for (let e of t.state.field(ur).active)
      e.state == 1 && this.startQuery(e);
  }
  update(t) {
    let e = t.state.field(ur);
    if (!t.selectionSet && !t.docChanged && t.startState.field(ur) == e)
      return;
    let n = t.transactions.some((i) => (i.selection || i.docChanged) && !G1(i));
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (n || r.updates.length + t.transactions.length > cX && Date.now() - r.time > uX) {
        for (let s of r.context.abortListeners)
          try {
            s();
          } catch (o) {
            rr(this.view.state, o);
          }
        r.context.abortListeners = null, this.running.splice(i--, 1);
      } else
        r.updates.push(...t.transactions);
    }
    if (this.debounceUpdate > -1 && clearTimeout(this.debounceUpdate), this.debounceUpdate = e.active.some((i) => i.state == 1 && !this.running.some((r) => r.active.source == i.source)) ? setTimeout(() => this.startUpdate(), PC) : -1, this.composing != 0)
      for (let i of t.transactions)
        G1(i) == "input" ? this.composing = 2 : this.composing == 2 && i.selection && (this.composing = 3);
  }
  startUpdate() {
    this.debounceUpdate = -1;
    let { state: t } = this.view, e = t.field(ur);
    for (let n of e.active)
      n.state == 1 && !this.running.some((i) => i.active.source == n.source) && this.startQuery(n);
  }
  startQuery(t) {
    let { state: e } = this.view, n = Ro(e), i = new DA(e, n, t.explicitPos == n), r = new aX(t, i);
    this.running.push(r), Promise.resolve(t.source(i)).then((s) => {
      r.context.aborted || (r.done = s || null, this.scheduleAccept());
    }, (s) => {
      this.view.dispatch({ effects: Id.of(null) }), rr(this.view.state, s);
    });
  }
  scheduleAccept() {
    this.running.every((t) => t.done !== void 0) ? this.accept() : this.debounceAccept < 0 && (this.debounceAccept = setTimeout(() => this.accept(), PC));
  }
  accept() {
    var t;
    this.debounceAccept > -1 && clearTimeout(this.debounceAccept), this.debounceAccept = -1;
    let e = [], n = this.view.state.facet(vr);
    for (let i = 0; i < this.running.length; i++) {
      let r = this.running[i];
      if (r.done === void 0)
        continue;
      if (this.running.splice(i--, 1), r.done) {
        let o = new Hc(r.active.source, r.active.explicitPos, r.done, r.done.from, (t = r.done.to) !== null && t !== void 0 ? t : Ro(r.updates.length ? r.updates[0].startState : this.view.state));
        for (let l of r.updates)
          o = o.update(l, n);
        if (o.hasResult()) {
          e.push(o);
          continue;
        }
      }
      let s = this.view.state.field(ur).active.find((o) => o.source == r.active.source);
      if (s && s.state == 1)
        if (r.done == null) {
          let o = new Ui(r.active.source, 0);
          for (let l of r.updates)
            o = o.update(l, n);
          o.state != 1 && e.push(o);
        } else
          this.startQuery(s);
    }
    e.length && this.view.dispatch({ effects: jA.of(e) });
  }
}, {
  eventHandlers: {
    blur() {
      let t = this.view.state.field(ur, !1);
      t && t.tooltip && this.view.state.facet(vr).closeOnBlur && this.view.dispatch({ effects: Id.of(null) });
    },
    compositionstart() {
      this.composing = 1;
    },
    compositionend() {
      this.composing == 3 && setTimeout(() => this.view.dispatch({ effects: Wb.of(!1) }), 20), this.composing = 0;
    }
  }
}), hX = /* @__PURE__ */ $e.baseTheme({
  ".cm-tooltip.cm-tooltip-autocomplete": {
    "& > ul": {
      fontFamily: "monospace",
      whiteSpace: "nowrap",
      overflow: "hidden auto",
      maxWidth_fallback: "700px",
      maxWidth: "min(700px, 95vw)",
      minWidth: "250px",
      maxHeight: "10em",
      height: "100%",
      listStyle: "none",
      margin: 0,
      padding: 0,
      "& > li": {
        overflowX: "hidden",
        textOverflow: "ellipsis",
        cursor: "pointer",
        padding: "1px 3px",
        lineHeight: 1.2
      }
    }
  },
  "&light .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#17c",
    color: "white"
  },
  "&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#777"
  },
  "&dark .cm-tooltip-autocomplete ul li[aria-selected]": {
    background: "#347",
    color: "white"
  },
  "&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]": {
    background: "#444"
  },
  ".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after": {
    content: '"Â·Â·Â·"',
    opacity: 0.5,
    display: "block",
    textAlign: "center"
  },
  ".cm-tooltip.cm-completionInfo": {
    position: "absolute",
    padding: "3px 9px",
    width: "max-content",
    maxWidth: `${400}px`,
    boxSizing: "border-box"
  },
  ".cm-completionInfo.cm-completionInfo-left": { right: "100%" },
  ".cm-completionInfo.cm-completionInfo-right": { left: "100%" },
  ".cm-completionInfo.cm-completionInfo-left-narrow": { right: `${30}px` },
  ".cm-completionInfo.cm-completionInfo-right-narrow": { left: `${30}px` },
  "&light .cm-snippetField": { backgroundColor: "#00000022" },
  "&dark .cm-snippetField": { backgroundColor: "#ffffff22" },
  ".cm-snippetFieldPosition": {
    verticalAlign: "text-top",
    width: 0,
    height: "1.15em",
    display: "inline-block",
    margin: "0 -0.7px -.7em",
    borderLeft: "1.4px dotted #888"
  },
  ".cm-completionMatchedText": {
    textDecoration: "underline"
  },
  ".cm-completionDetail": {
    marginLeft: "0.5em",
    fontStyle: "italic"
  },
  ".cm-completionIcon": {
    fontSize: "90%",
    width: ".8em",
    display: "inline-block",
    textAlign: "center",
    paddingRight: ".6em",
    opacity: "0.6",
    boxSizing: "content-box"
  },
  ".cm-completionIcon-function, .cm-completionIcon-method": {
    "&:after": { content: "'Æ’'" }
  },
  ".cm-completionIcon-class": {
    "&:after": { content: "'â—‹'" }
  },
  ".cm-completionIcon-interface": {
    "&:after": { content: "'â—Œ'" }
  },
  ".cm-completionIcon-variable": {
    "&:after": { content: "'ð‘¥'" }
  },
  ".cm-completionIcon-constant": {
    "&:after": { content: "'ð¶'" }
  },
  ".cm-completionIcon-type": {
    "&:after": { content: "'ð‘¡'" }
  },
  ".cm-completionIcon-enum": {
    "&:after": { content: "'âˆª'" }
  },
  ".cm-completionIcon-property": {
    "&:after": { content: "'â–¡'" }
  },
  ".cm-completionIcon-keyword": {
    "&:after": { content: "'ðŸ”‘ï¸Ž'" }
  },
  ".cm-completionIcon-namespace": {
    "&:after": { content: "'â–¢'" }
  },
  ".cm-completionIcon-text": {
    "&:after": { content: "'abc'", fontSize: "50%", verticalAlign: "middle" }
  }
}), ku = {
  brackets: ["(", "[", "{", "'", '"'],
  before: ")]}:;>",
  stringPrefixes: []
}, pl = /* @__PURE__ */ kt.define({
  map(t, e) {
    let n = e.mapPos(t, -1, Di.TrackAfter);
    return n ?? void 0;
  }
}), qb = /* @__PURE__ */ kt.define({
  map(t, e) {
    return e.mapPos(t);
  }
}), Jb = /* @__PURE__ */ new class extends Pl {
}();
Jb.startSide = 1;
Jb.endSide = -1;
const xA = /* @__PURE__ */ oi.define({
  create() {
    return Vt.empty;
  },
  update(t, e) {
    if (e.selection) {
      let n = e.state.doc.lineAt(e.selection.main.head).from, i = e.startState.doc.lineAt(e.startState.selection.main.head).from;
      n != e.changes.mapPos(i, -1) && (t = Vt.empty);
    }
    t = t.map(e.changes);
    for (let n of e.effects)
      n.is(pl) ? t = t.update({ add: [Jb.range(n.value, n.value + 1)] }) : n.is(qb) && (t = t.update({ filter: (i) => i != n.value }));
    return t;
  }
});
function dX() {
  return [gX, xA];
}
const lm = "()[]{}<>";
function FA(t) {
  for (let e = 0; e < lm.length; e += 2)
    if (lm.charCodeAt(e) == t)
      return lm.charAt(e + 1);
  return mb(t < 128 ? t : t + 1);
}
function zA(t, e) {
  return t.languageDataAt("closeBrackets", e)[0] || ku;
}
const pX = typeof navigator == "object" && /* @__PURE__ */ /Android\b/.test(navigator.userAgent), gX = /* @__PURE__ */ $e.inputHandler.of((t, e, n, i) => {
  if ((pX ? t.composing : t.compositionStarted) || t.state.readOnly)
    return !1;
  let r = t.state.selection.main;
  if (i.length > 2 || i.length == 2 && $i(Ci(i, 0)) == 1 || e != r.from || n != r.to)
    return !1;
  let s = _X(t.state, i);
  return s ? (t.dispatch(s), !0) : !1;
}), mX = ({ state: t, dispatch: e }) => {
  if (t.readOnly)
    return !1;
  let i = zA(t, t.selection.main.head).brackets || ku.brackets, r = null, s = t.changeByRange((o) => {
    if (o.empty) {
      let l = yX(t.doc, o.head);
      for (let a of i)
        if (a == l && Kp(t.doc, o.head) == FA(Ci(a, 0)))
          return {
            changes: { from: o.head - a.length, to: o.head + a.length },
            range: Re.cursor(o.head - a.length)
          };
    }
    return { range: r = o };
  });
  return r || e(t.update(s, { scrollIntoView: !0, userEvent: "delete.backward" })), !r;
}, bX = [
  { key: "Backspace", run: mX }
];
function _X(t, e) {
  let n = zA(t, t.selection.main.head), i = n.brackets || ku.brackets;
  for (let r of i) {
    let s = FA(Ci(r, 0));
    if (e == r)
      return s == r ? kX(t, r, i.indexOf(r + r + r) > -1, n) : wX(t, r, s, n.before || ku.before);
    if (e == s && VA(t, t.selection.main.from))
      return vX(t, r, s);
  }
  return null;
}
function VA(t, e) {
  let n = !1;
  return t.field(xA).between(0, t.doc.length, (i) => {
    i == e && (n = !0);
  }), n;
}
function Kp(t, e) {
  let n = t.sliceString(e, e + 2);
  return n.slice(0, $i(Ci(n, 0)));
}
function yX(t, e) {
  let n = t.sliceString(e - 2, e);
  return $i(Ci(n, 0)) == n.length ? n : n.slice(1);
}
function wX(t, e, n, i) {
  let r = null, s = t.changeByRange((o) => {
    if (!o.empty)
      return {
        changes: [{ insert: e, from: o.from }, { insert: n, from: o.to }],
        effects: pl.of(o.to + e.length),
        range: Re.range(o.anchor + e.length, o.head + e.length)
      };
    let l = Kp(t.doc, o.head);
    return !l || /\s/.test(l) || i.indexOf(l) > -1 ? {
      changes: { insert: e + n, from: o.head },
      effects: pl.of(o.head + e.length),
      range: Re.cursor(o.head + e.length)
    } : { range: r = o };
  });
  return r ? null : t.update(s, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function vX(t, e, n) {
  let i = null, r = t.selection.ranges.map((s) => s.empty && Kp(t.doc, s.head) == n ? Re.cursor(s.head + n.length) : i = s);
  return i ? null : t.update({
    selection: Re.create(r, t.selection.mainIndex),
    scrollIntoView: !0,
    effects: t.selection.ranges.map(({ from: s }) => qb.of(s))
  });
}
function kX(t, e, n, i) {
  let r = i.stringPrefixes || ku.stringPrefixes, s = null, o = t.changeByRange((l) => {
    if (!l.empty)
      return {
        changes: [{ insert: e, from: l.from }, { insert: e, from: l.to }],
        effects: pl.of(l.to + e.length),
        range: Re.range(l.anchor + e.length, l.head + e.length)
      };
    let a = l.head, c = Kp(t.doc, a), u;
    if (c == e) {
      if (IC(t, a))
        return {
          changes: { insert: e + e, from: a },
          effects: pl.of(a + e.length),
          range: Re.cursor(a + e.length)
        };
      if (VA(t, a)) {
        let f = n && t.sliceDoc(a, a + e.length * 3) == e + e + e;
        return {
          range: Re.cursor(a + e.length * (f ? 3 : 1)),
          effects: qb.of(a)
        };
      }
    } else {
      if (n && t.sliceDoc(a - 2 * e.length, a) == e + e && (u = DC(t, a - 2 * e.length, r)) > -1 && IC(t, u))
        return {
          changes: { insert: e + e + e + e, from: a },
          effects: pl.of(a + e.length),
          range: Re.cursor(a + e.length)
        };
      if (t.charCategorizer(a)(c) != bn.Word && DC(t, a, r) > -1 && !CX(t, a, e, r))
        return {
          changes: { insert: e + e, from: a },
          effects: pl.of(a + e.length),
          range: Re.cursor(a + e.length)
        };
    }
    return { range: s = l };
  });
  return s ? null : t.update(o, {
    scrollIntoView: !0,
    userEvent: "input.type"
  });
}
function IC(t, e) {
  let n = Ri(t).resolveInner(e + 1);
  return n.parent && n.from == e;
}
function CX(t, e, n, i) {
  let r = Ri(t).resolveInner(e, -1), s = i.reduce((o, l) => Math.max(o, l.length), 0);
  for (let o = 0; o < 5; o++) {
    let l = t.sliceDoc(r.from, Math.min(r.to, r.from + n.length + s)), a = l.indexOf(n);
    if (!a || a > -1 && i.indexOf(l.slice(0, a)) > -1) {
      let u = r.firstChild;
      for (; u && u.from == r.from && u.to - u.from > n.length + a; ) {
        if (t.sliceDoc(u.to - n.length, u.to) == n)
          return !1;
        u = u.firstChild;
      }
      return !0;
    }
    let c = r.to == e && r.parent;
    if (!c)
      break;
    r = c;
  }
  return !1;
}
function DC(t, e, n) {
  let i = t.charCategorizer(e);
  if (i(t.sliceDoc(e - 1, e)) != bn.Word)
    return e;
  for (let r of n) {
    let s = e - r.length;
    if (t.sliceDoc(s, e) == r && i(t.sliceDoc(s - 1, s)) != bn.Word)
      return s;
  }
  return -1;
}
function SX(t = {}) {
  return [
    ur,
    vr.of(t),
    fX,
    EX,
    hX
  ];
}
const UA = [
  { key: "Ctrl-Space", run: oX },
  { key: "Escape", run: lX },
  { key: "ArrowDown", run: /* @__PURE__ */ Gf(!0) },
  { key: "ArrowUp", run: /* @__PURE__ */ Gf(!1) },
  { key: "PageDown", run: /* @__PURE__ */ Gf(!0, "page") },
  { key: "PageUp", run: /* @__PURE__ */ Gf(!1, "page") },
  { key: "Enter", run: sX }
], EX = /* @__PURE__ */ ac.highest(/* @__PURE__ */ jp.computeN([vr], (t) => t.facet(vr).defaultKeymap ? [UA] : []));
class AX {
  constructor(e, n, i) {
    this.from = e, this.to = n, this.diagnostic = i;
  }
}
class fl {
  constructor(e, n, i) {
    this.diagnostics = e, this.panel = n, this.selected = i;
  }
  static init(e, n, i) {
    let r = e, s = i.facet(gl).markerFilter;
    s && (r = s(r));
    let o = ft.set(r.map((l) => l.from == l.to || l.from == l.to - 1 && i.doc.lineAt(l.from).to == l.from ? ft.widget({
      widget: new LX(l),
      diagnostic: l
    }).range(l.from) : ft.mark({
      attributes: { class: "cm-lintRange cm-lintRange-" + l.severity },
      diagnostic: l
    }).range(l.from, l.to)), !0);
    return new fl(o, n, Wa(o));
  }
}
function Wa(t, e = null, n = 0) {
  let i = null;
  return t.between(n, 1e9, (r, s, { spec: o }) => {
    if (!(e && o.diagnostic != e))
      return i = new AX(r, s, o.diagnostic), !1;
  }), i;
}
function HA(t, e) {
  return !!(t.effects.some((n) => n.is(Gp)) || t.changes.touchesRange(e.pos));
}
function WA(t, e) {
  return t.field(nr, !1) ? e : e.concat(kt.appendConfig.of([
    nr,
    $e.decorations.compute([nr], (n) => {
      let { selected: i, panel: r } = n.field(nr);
      return !i || !r || i.from == i.to ? ft.none : ft.set([
        OX.range(i.from, i.to)
      ]);
    }),
    WJ(TX, { hideOn: HA }),
    jX
  ]));
}
function MX(t, e) {
  return {
    effects: WA(t, [Gp.of(e)])
  };
}
const Gp = /* @__PURE__ */ kt.define(), Kb = /* @__PURE__ */ kt.define(), qA = /* @__PURE__ */ kt.define(), nr = /* @__PURE__ */ oi.define({
  create() {
    return new fl(ft.none, null, null);
  },
  update(t, e) {
    if (e.docChanged) {
      let n = t.diagnostics.map(e.changes), i = null;
      if (t.selected) {
        let r = e.changes.mapPos(t.selected.from, 1);
        i = Wa(n, t.selected.diagnostic, r) || Wa(n, null, r);
      }
      t = new fl(n, t.panel, i);
    }
    for (let n of e.effects)
      n.is(Gp) ? t = fl.init(n.value, t.panel, e.state) : n.is(Kb) ? t = new fl(t.diagnostics, n.value ? Yp.open : null, t.selected) : n.is(qA) && (t = new fl(t.diagnostics, t.panel, n.value));
    return t;
  },
  provide: (t) => [
    _u.from(t, (e) => e.panel),
    $e.decorations.from(t, (e) => e.diagnostics)
  ]
}), OX = /* @__PURE__ */ ft.mark({ class: "cm-lintRange cm-lintRange-active" });
function TX(t, e, n) {
  let { diagnostics: i } = t.state.field(nr), r = [], s = 2e8, o = 0;
  i.between(e - (n < 0 ? 1 : 0), e + (n > 0 ? 1 : 0), (a, c, { spec: u }) => {
    e >= a && e <= c && (a == c || (e > a || n > 0) && (e < c || n < 0)) && (r.push(u.diagnostic), s = Math.min(a, s), o = Math.max(c, o));
  });
  let l = t.state.facet(gl).tooltipFilter;
  return l && (r = l(r)), r.length ? {
    pos: s,
    end: o,
    above: t.state.doc.lineAt(s).to < o,
    create() {
      return { dom: JA(t, r) };
    }
  } : null;
}
function JA(t, e) {
  return sn("ul", { class: "cm-tooltip-lint" }, e.map((n) => GA(t, n, !1)));
}
const RX = (t) => {
  let e = t.state.field(nr, !1);
  (!e || !e.panel) && t.dispatch({ effects: WA(t.state, [Kb.of(!0)]) });
  let n = bu(t, Yp.open);
  return n && n.dom.querySelector(".cm-panel-lint ul").focus(), !0;
}, NC = (t) => {
  let e = t.state.field(nr, !1);
  return !e || !e.panel ? !1 : (t.dispatch({ effects: Kb.of(!1) }), !0);
}, PX = (t) => {
  let e = t.state.field(nr, !1);
  if (!e)
    return !1;
  let n = t.state.selection.main, i = e.diagnostics.iter(n.to + 1);
  return !i.value && (i = e.diagnostics.iter(0), !i.value || i.from == n.from && i.to == n.to) ? !1 : (t.dispatch({ selection: { anchor: i.from, head: i.to }, scrollIntoView: !0 }), !0);
}, IX = [
  { key: "Mod-Shift-m", run: RX, preventDefault: !0 },
  { key: "F8", run: PX }
], DX = /* @__PURE__ */ Qn.fromClass(class {
  constructor(t) {
    this.view = t, this.timeout = -1, this.set = !0;
    let { delay: e } = t.state.facet(gl);
    this.lintTime = Date.now() + e, this.run = this.run.bind(this), this.timeout = setTimeout(this.run, e);
  }
  run() {
    let t = Date.now();
    if (t < this.lintTime - 10)
      setTimeout(this.run, this.lintTime - t);
    else {
      this.set = !1;
      let { state: e } = this.view, { sources: n } = e.facet(gl);
      Promise.all(n.map((i) => Promise.resolve(i(this.view)))).then((i) => {
        let r = i.reduce((s, o) => s.concat(o));
        this.view.state.doc == e.doc && this.view.dispatch(MX(this.view.state, r));
      }, (i) => {
        rr(this.view.state, i);
      });
    }
  }
  update(t) {
    let e = t.state.facet(gl);
    (t.docChanged || e != t.startState.facet(gl)) && (this.lintTime = Date.now() + e.delay, this.set || (this.set = !0, this.timeout = setTimeout(this.run, e.delay)));
  }
  force() {
    this.set && (this.lintTime = Date.now(), this.run());
  }
  destroy() {
    clearTimeout(this.timeout);
  }
}), gl = /* @__PURE__ */ et.define({
  combine(t) {
    return Object.assign({ sources: t.map((e) => e.source) }, qr(t.map((e) => e.config), {
      delay: 750,
      markerFilter: null,
      tooltipFilter: null
    }));
  },
  enables: DX
});
function NX(t, e = {}) {
  return gl.of({ source: t, config: e });
}
function KA(t) {
  let e = [];
  if (t)
    e:
      for (let { name: n } of t) {
        for (let i = 0; i < n.length; i++) {
          let r = n[i];
          if (/[a-zA-Z]/.test(r) && !e.some((s) => s.toLowerCase() == r.toLowerCase())) {
            e.push(r);
            continue e;
          }
        }
        e.push("");
      }
  return e;
}
function GA(t, e, n) {
  var i;
  let r = n ? KA(e.actions) : [];
  return sn("li", { class: "cm-diagnostic cm-diagnostic-" + e.severity }, sn("span", { class: "cm-diagnosticText" }, e.renderMessage ? e.renderMessage() : e.message), (i = e.actions) === null || i === void 0 ? void 0 : i.map((s, o) => {
    let l = (f) => {
      f.preventDefault();
      let h = Wa(t.state.field(nr).diagnostics, e);
      h && s.apply(t, h.from, h.to);
    }, { name: a } = s, c = r[o] ? a.indexOf(r[o]) : -1, u = c < 0 ? a : [
      a.slice(0, c),
      sn("u", a.slice(c, c + 1)),
      a.slice(c + 1)
    ];
    return sn("button", {
      type: "button",
      class: "cm-diagnosticAction",
      onclick: l,
      onmousedown: l,
      "aria-label": ` Action: ${a}${c < 0 ? "" : ` (access key "${r[o]})"`}.`
    }, u);
  }), e.source && sn("div", { class: "cm-diagnosticSource" }, e.source));
}
class LX extends Zo {
  constructor(e) {
    super(), this.diagnostic = e;
  }
  eq(e) {
    return e.diagnostic == this.diagnostic;
  }
  toDOM() {
    return sn("span", { class: "cm-lintPoint cm-lintPoint-" + this.diagnostic.severity });
  }
}
class LC {
  constructor(e, n) {
    this.diagnostic = n, this.id = "item_" + Math.floor(Math.random() * 4294967295).toString(16), this.dom = GA(e, n, !0), this.dom.id = this.id, this.dom.setAttribute("role", "option");
  }
}
class Yp {
  constructor(e) {
    this.view = e, this.items = [];
    let n = (r) => {
      if (r.keyCode == 27)
        NC(this.view), this.view.focus();
      else if (r.keyCode == 38 || r.keyCode == 33)
        this.moveSelection((this.selectedIndex - 1 + this.items.length) % this.items.length);
      else if (r.keyCode == 40 || r.keyCode == 34)
        this.moveSelection((this.selectedIndex + 1) % this.items.length);
      else if (r.keyCode == 36)
        this.moveSelection(0);
      else if (r.keyCode == 35)
        this.moveSelection(this.items.length - 1);
      else if (r.keyCode == 13)
        this.view.focus();
      else if (r.keyCode >= 65 && r.keyCode <= 90 && this.selectedIndex >= 0) {
        let { diagnostic: s } = this.items[this.selectedIndex], o = KA(s.actions);
        for (let l = 0; l < o.length; l++)
          if (o[l].toUpperCase().charCodeAt(0) == r.keyCode) {
            let a = Wa(this.view.state.field(nr).diagnostics, s);
            a && s.actions[l].apply(e, a.from, a.to);
          }
      } else
        return;
      r.preventDefault();
    }, i = (r) => {
      for (let s = 0; s < this.items.length; s++)
        this.items[s].dom.contains(r.target) && this.moveSelection(s);
    };
    this.list = sn("ul", {
      tabIndex: 0,
      role: "listbox",
      "aria-label": this.view.state.phrase("Diagnostics"),
      onkeydown: n,
      onclick: i
    }), this.dom = sn("div", { class: "cm-panel-lint" }, this.list, sn("button", {
      type: "button",
      name: "close",
      "aria-label": this.view.state.phrase("close"),
      onclick: () => NC(this.view)
    }, "Ã—")), this.update();
  }
  get selectedIndex() {
    let e = this.view.state.field(nr).selected;
    if (!e)
      return -1;
    for (let n = 0; n < this.items.length; n++)
      if (this.items[n].diagnostic == e.diagnostic)
        return n;
    return -1;
  }
  update() {
    let { diagnostics: e, selected: n } = this.view.state.field(nr), i = 0, r = !1, s = null;
    for (e.between(0, this.view.state.doc.length, (o, l, { spec: a }) => {
      let c = -1, u;
      for (let f = i; f < this.items.length; f++)
        if (this.items[f].diagnostic == a.diagnostic) {
          c = f;
          break;
        }
      c < 0 ? (u = new LC(this.view, a.diagnostic), this.items.splice(i, 0, u), r = !0) : (u = this.items[c], c > i && (this.items.splice(i, c - i), r = !0)), n && u.diagnostic == n.diagnostic ? u.dom.hasAttribute("aria-selected") || (u.dom.setAttribute("aria-selected", "true"), s = u) : u.dom.hasAttribute("aria-selected") && u.dom.removeAttribute("aria-selected"), i++;
    }); i < this.items.length && !(this.items.length == 1 && this.items[0].diagnostic.from < 0); )
      r = !0, this.items.pop();
    this.items.length == 0 && (this.items.push(new LC(this.view, {
      from: -1,
      to: -1,
      severity: "info",
      message: this.view.state.phrase("No diagnostics")
    })), r = !0), s ? (this.list.setAttribute("aria-activedescendant", s.id), this.view.requestMeasure({
      key: this,
      read: () => ({ sel: s.dom.getBoundingClientRect(), panel: this.list.getBoundingClientRect() }),
      write: ({ sel: o, panel: l }) => {
        o.top < l.top ? this.list.scrollTop -= l.top - o.top : o.bottom > l.bottom && (this.list.scrollTop += o.bottom - l.bottom);
      }
    })) : this.selectedIndex < 0 && this.list.removeAttribute("aria-activedescendant"), r && this.sync();
  }
  sync() {
    let e = this.list.firstChild;
    function n() {
      let i = e;
      e = i.nextSibling, i.remove();
    }
    for (let i of this.items)
      if (i.dom.parentNode == this.list) {
        for (; e != i.dom; )
          n();
        e = i.dom.nextSibling;
      } else
        this.list.insertBefore(i.dom, e);
    for (; e; )
      n();
  }
  moveSelection(e) {
    if (this.selectedIndex < 0)
      return;
    let n = this.view.state.field(nr), i = Wa(n.diagnostics, this.items[e].diagnostic);
    i && this.view.dispatch({
      selection: { anchor: i.from, head: i.to },
      scrollIntoView: !0,
      effects: qA.of(i)
    });
  }
  static open(e) {
    return new Yp(e);
  }
}
function Ch(t, e = 'viewBox="0 0 40 40"') {
  return `url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`;
}
function am(t) {
  return Ch(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`, 'width="6" height="3"');
}
const jX = /* @__PURE__ */ $e.baseTheme({
  ".cm-diagnostic": {
    padding: "3px 6px 3px 8px",
    marginLeft: "-1px",
    display: "block",
    whiteSpace: "pre-wrap"
  },
  ".cm-diagnostic-error": { borderLeft: "5px solid #d11" },
  ".cm-diagnostic-warning": { borderLeft: "5px solid orange" },
  ".cm-diagnostic-info": { borderLeft: "5px solid #999" },
  ".cm-diagnosticAction": {
    font: "inherit",
    border: "none",
    padding: "2px 4px",
    backgroundColor: "#444",
    color: "white",
    borderRadius: "3px",
    marginLeft: "8px"
  },
  ".cm-diagnosticSource": {
    fontSize: "70%",
    opacity: 0.7
  },
  ".cm-lintRange": {
    backgroundPosition: "left bottom",
    backgroundRepeat: "repeat-x",
    paddingBottom: "0.7px"
  },
  ".cm-lintRange-error": { backgroundImage: /* @__PURE__ */ am("#d11") },
  ".cm-lintRange-warning": { backgroundImage: /* @__PURE__ */ am("orange") },
  ".cm-lintRange-info": { backgroundImage: /* @__PURE__ */ am("#999") },
  ".cm-lintRange-active": { backgroundColor: "#ffdd9980" },
  ".cm-tooltip-lint": {
    padding: 0,
    margin: 0
  },
  ".cm-lintPoint": {
    position: "relative",
    "&:after": {
      content: '""',
      position: "absolute",
      bottom: 0,
      left: "-2px",
      borderLeft: "3px solid transparent",
      borderRight: "3px solid transparent",
      borderBottom: "4px solid #d11"
    }
  },
  ".cm-lintPoint-warning": {
    "&:after": { borderBottomColor: "orange" }
  },
  ".cm-lintPoint-info": {
    "&:after": { borderBottomColor: "#999" }
  },
  ".cm-panel.cm-panel-lint": {
    position: "relative",
    "& ul": {
      maxHeight: "100px",
      overflowY: "auto",
      "& [aria-selected]": {
        backgroundColor: "#ddd",
        "& u": { textDecoration: "underline" }
      },
      "&:focus [aria-selected]": {
        background_fallback: "#bdf",
        backgroundColor: "Highlight",
        color_fallback: "white",
        color: "HighlightText"
      },
      "& u": { textDecoration: "none" },
      padding: 0,
      margin: 0
    },
    "& [name=close]": {
      position: "absolute",
      top: "0",
      right: "2px",
      background: "inherit",
      border: "none",
      font: "inherit",
      padding: 0,
      margin: 0
    }
  }
});
class BX extends Os {
  constructor(e) {
    super(), this.diagnostics = e, this.severity = e.reduce((n, i) => {
      let r = i.severity;
      return r == "error" || r == "warning" && n == "info" ? r : n;
    }, "info");
  }
  toDOM(e) {
    let n = document.createElement("div");
    n.className = "cm-lint-marker cm-lint-marker-" + this.severity;
    let i = this.diagnostics, r = e.state.facet(Xp).tooltipFilter;
    return r && (i = r(i)), i.length && (n.onmouseover = () => FX(e, n, i)), n;
  }
}
function xX(t, e) {
  let n = (i) => {
    let r = e.getBoundingClientRect();
    if (!(i.clientX > r.left - 10 && i.clientX < r.right + 10 && i.clientY > r.top - 10 && i.clientY < r.bottom + 10)) {
      for (let s = i.target; s; s = s.parentNode)
        if (s.nodeType == 1 && s.classList.contains("cm-tooltip-lint"))
          return;
      window.removeEventListener("mousemove", n), t.state.field(XA) && t.dispatch({ effects: Gb.of(null) });
    }
  };
  window.addEventListener("mousemove", n);
}
function FX(t, e, n) {
  function i() {
    let o = t.elementAtHeight(e.getBoundingClientRect().top + 5 - t.documentTop);
    t.coordsAtPos(o.from) && t.dispatch({ effects: Gb.of({
      pos: o.from,
      above: !1,
      create() {
        return {
          dom: JA(t, n),
          getCoords: () => e.getBoundingClientRect()
        };
      }
    }) }), e.onmouseout = e.onmousemove = null, xX(t, e);
  }
  let { hoverTime: r } = t.state.facet(Xp), s = setTimeout(i, r);
  e.onmouseout = () => {
    clearTimeout(s), e.onmouseout = e.onmousemove = null;
  }, e.onmousemove = () => {
    clearTimeout(s), s = setTimeout(i, r);
  };
}
function zX(t, e) {
  let n = /* @__PURE__ */ Object.create(null);
  for (let r of e) {
    let s = t.lineAt(r.from);
    (n[s.from] || (n[s.from] = [])).push(r);
  }
  let i = [];
  for (let r in n)
    i.push(new BX(n[r]).range(+r));
  return Vt.of(i, !0);
}
const VX = /* @__PURE__ */ kE({
  class: "cm-gutter-lint",
  markers: (t) => t.state.field(YA)
}), YA = /* @__PURE__ */ oi.define({
  create() {
    return Vt.empty;
  },
  update(t, e) {
    t = t.map(e.changes);
    let n = e.state.facet(Xp).markerFilter;
    for (let i of e.effects)
      if (i.is(Gp)) {
        let r = i.value;
        n && (r = n(r || [])), t = zX(e.state.doc, r.slice(0));
      }
    return t;
  }
}), Gb = /* @__PURE__ */ kt.define(), XA = /* @__PURE__ */ oi.define({
  create() {
    return null;
  },
  update(t, e) {
    return t && e.docChanged && (t = HA(e, t) ? null : Object.assign(Object.assign({}, t), { pos: e.changes.mapPos(t.pos) })), e.effects.reduce((n, i) => i.is(Gb) ? i.value : n, t);
  },
  provide: (t) => Bp.from(t)
}), UX = /* @__PURE__ */ $e.baseTheme({
  ".cm-gutter-lint": {
    width: "1.4em",
    "& .cm-gutterElement": {
      padding: ".2em"
    }
  },
  ".cm-lint-marker": {
    width: "1em",
    height: "1em"
  },
  ".cm-lint-marker-info": {
    content: /* @__PURE__ */ Ch('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')
  },
  ".cm-lint-marker-warning": {
    content: /* @__PURE__ */ Ch('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')
  },
  ".cm-lint-marker-error": {
    content: /* @__PURE__ */ Ch('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')
  }
}), Xp = /* @__PURE__ */ et.define({
  combine(t) {
    return qr(t, {
      hoverTime: 300,
      markerFilter: null,
      tooltipFilter: null
    });
  }
});
function HX(t = {}) {
  return [Xp.of(t), YA, VX, UX, XA];
}
const WX = /* @__PURE__ */ (() => [
  $J(),
  nK(),
  kJ(),
  gG(),
  UK(),
  fJ(),
  mJ(),
  Mt.allowMultipleSelections.of(!0),
  TK(),
  WE(JK, { fallback: !0 }),
  $K(),
  dX(),
  SX(),
  NJ(),
  BJ(),
  OJ(),
  vY(),
  jp.of([
    ...bX,
    ...gY,
    ...VY,
    ...AG,
    ...FK,
    ...UA,
    ...IX
  ])
])();
class Dd {
  constructor(e, n, i, r, s, o, l, a, c, u = 0, f) {
    this.p = e, this.stack = n, this.state = i, this.reducePos = r, this.pos = s, this.score = o, this.buffer = l, this.bufferBase = a, this.curContext = c, this.lookAhead = u, this.parent = f;
  }
  toString() {
    return `[${this.stack.filter((e, n) => n % 3 == 0).concat(this.state)}]@${this.pos}${this.score ? "!" + this.score : ""}`;
  }
  static start(e, n, i = 0) {
    let r = e.parser.context;
    return new Dd(e, [], n, i, i, 0, [], 0, r ? new jC(r, r.start) : null, 0, null);
  }
  get context() {
    return this.curContext ? this.curContext.context : null;
  }
  pushState(e, n) {
    this.stack.push(this.state, n, this.bufferBase + this.buffer.length), this.state = e;
  }
  reduce(e) {
    let n = e >> 19, i = e & 65535, { parser: r } = this.p, s = r.dynamicPrecedence(i);
    if (s && (this.score += s), n == 0) {
      this.pushState(r.getGoto(this.state, i, !0), this.reducePos), i < r.minRepeatTerm && this.storeNode(i, this.reducePos, this.reducePos, 4, !0), this.reduceContext(i, this.reducePos);
      return;
    }
    let o = this.stack.length - (n - 1) * 3 - (e & 262144 ? 6 : 0), l = this.stack[o - 2], a = this.stack[o - 1], c = this.bufferBase + this.buffer.length - a;
    if (i < r.minRepeatTerm || e & 131072) {
      let u = r.stateFlag(this.state, 1) ? this.pos : this.reducePos;
      this.storeNode(i, l, u, c + 4, !0);
    }
    if (e & 262144)
      this.state = this.stack[o];
    else {
      let u = this.stack[o - 3];
      this.state = r.getGoto(u, i, !0);
    }
    for (; this.stack.length > o; )
      this.stack.pop();
    this.reduceContext(i, l);
  }
  storeNode(e, n, i, r = 4, s = !1) {
    if (e == 0 && (!this.stack.length || this.stack[this.stack.length - 1] < this.buffer.length + this.bufferBase)) {
      let o = this, l = this.buffer.length;
      if (l == 0 && o.parent && (l = o.bufferBase - o.parent.bufferBase, o = o.parent), l > 0 && o.buffer[l - 4] == 0 && o.buffer[l - 1] > -1) {
        if (n == i)
          return;
        if (o.buffer[l - 2] >= n) {
          o.buffer[l - 2] = i;
          return;
        }
      }
    }
    if (!s || this.pos == i)
      this.buffer.push(e, n, i, r);
    else {
      let o = this.buffer.length;
      if (o > 0 && this.buffer[o - 4] != 0)
        for (; o > 0 && this.buffer[o - 2] > i; )
          this.buffer[o] = this.buffer[o - 4], this.buffer[o + 1] = this.buffer[o - 3], this.buffer[o + 2] = this.buffer[o - 2], this.buffer[o + 3] = this.buffer[o - 1], o -= 4, r > 4 && (r -= 4);
      this.buffer[o] = e, this.buffer[o + 1] = n, this.buffer[o + 2] = i, this.buffer[o + 3] = r;
    }
  }
  shift(e, n, i) {
    let r = this.pos;
    if (e & 131072)
      this.pushState(e & 65535, this.pos);
    else if (e & 262144)
      this.pos = i, this.shiftContext(n, r), n <= this.p.parser.maxNode && this.buffer.push(n, r, i, 4);
    else {
      let s = e, { parser: o } = this.p;
      (i > this.pos || n <= o.maxNode) && (this.pos = i, o.stateFlag(s, 1) || (this.reducePos = i)), this.pushState(s, r), this.shiftContext(n, r), n <= o.maxNode && this.buffer.push(n, r, i, 4);
    }
  }
  apply(e, n, i) {
    e & 65536 ? this.reduce(e) : this.shift(e, n, i);
  }
  useNode(e, n) {
    let i = this.p.reused.length - 1;
    (i < 0 || this.p.reused[i] != e) && (this.p.reused.push(e), i++);
    let r = this.pos;
    this.reducePos = this.pos = r + e.length, this.pushState(n, r), this.buffer.push(i, r, this.reducePos, -1), this.curContext && this.updateContext(this.curContext.tracker.reuse(this.curContext.context, e, this, this.p.stream.reset(this.pos - e.length)));
  }
  split() {
    let e = this, n = e.buffer.length;
    for (; n > 0 && e.buffer[n - 2] > e.reducePos; )
      n -= 4;
    let i = e.buffer.slice(n), r = e.bufferBase + n;
    for (; e && r == e.bufferBase; )
      e = e.parent;
    return new Dd(this.p, this.stack.slice(), this.state, this.reducePos, this.pos, this.score, i, r, this.curContext, this.lookAhead, e);
  }
  recoverByDelete(e, n) {
    let i = e <= this.p.parser.maxNode;
    i && this.storeNode(e, this.pos, n, 4), this.storeNode(0, this.pos, n, i ? 8 : 4), this.pos = this.reducePos = n, this.score -= 190;
  }
  canShift(e) {
    for (let n = new qX(this); ; ) {
      let i = this.p.parser.stateSlot(n.state, 4) || this.p.parser.hasAction(n.state, e);
      if (i == 0)
        return !1;
      if (!(i & 65536))
        return !0;
      n.reduce(i);
    }
  }
  recoverByInsert(e) {
    if (this.stack.length >= 300)
      return [];
    let n = this.p.parser.nextStates(this.state);
    if (n.length > 4 << 1 || this.stack.length >= 120) {
      let r = [];
      for (let s = 0, o; s < n.length; s += 2)
        (o = n[s + 1]) != this.state && this.p.parser.hasAction(o, e) && r.push(n[s], o);
      if (this.stack.length < 120)
        for (let s = 0; r.length < 4 << 1 && s < n.length; s += 2) {
          let o = n[s + 1];
          r.some((l, a) => a & 1 && l == o) || r.push(n[s], o);
        }
      n = r;
    }
    let i = [];
    for (let r = 0; r < n.length && i.length < 4; r += 2) {
      let s = n[r + 1];
      if (s == this.state)
        continue;
      let o = this.split();
      o.pushState(s, this.pos), o.storeNode(0, o.pos, o.pos, 4, !0), o.shiftContext(n[r], this.pos), o.score -= 200, i.push(o);
    }
    return i;
  }
  forceReduce() {
    let e = this.p.parser.stateSlot(this.state, 5);
    if (!(e & 65536))
      return !1;
    let { parser: n } = this.p;
    if (!n.validAction(this.state, e)) {
      let i = e >> 19, r = e & 65535, s = this.stack.length - i * 3;
      if (s < 0 || n.getGoto(this.stack[s], r, !1) < 0)
        return !1;
      this.storeNode(0, this.reducePos, this.reducePos, 4, !0), this.score -= 100;
    }
    return this.reducePos = this.pos, this.reduce(e), !0;
  }
  forceAll() {
    for (; !this.p.parser.stateFlag(this.state, 2); )
      if (!this.forceReduce()) {
        this.storeNode(0, this.pos, this.pos, 4, !0);
        break;
      }
    return this;
  }
  get deadEnd() {
    if (this.stack.length != 3)
      return !1;
    let { parser: e } = this.p;
    return e.data[e.stateSlot(this.state, 1)] == 65535 && !e.stateSlot(this.state, 4);
  }
  restart() {
    this.state = this.stack[0], this.stack.length = 0;
  }
  sameState(e) {
    if (this.state != e.state || this.stack.length != e.stack.length)
      return !1;
    for (let n = 0; n < this.stack.length; n += 3)
      if (this.stack[n] != e.stack[n])
        return !1;
    return !0;
  }
  get parser() {
    return this.p.parser;
  }
  dialectEnabled(e) {
    return this.p.parser.dialect.flags[e];
  }
  shiftContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.shift(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  reduceContext(e, n) {
    this.curContext && this.updateContext(this.curContext.tracker.reduce(this.curContext.context, e, this, this.p.stream.reset(n)));
  }
  emitContext() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -3) && this.buffer.push(this.curContext.hash, this.reducePos, this.reducePos, -3);
  }
  emitLookAhead() {
    let e = this.buffer.length - 1;
    (e < 0 || this.buffer[e] != -4) && this.buffer.push(this.lookAhead, this.reducePos, this.reducePos, -4);
  }
  updateContext(e) {
    if (e != this.curContext.context) {
      let n = new jC(this.curContext.tracker, e);
      n.hash != this.curContext.hash && this.emitContext(), this.curContext = n;
    }
  }
  setLookAhead(e) {
    e > this.lookAhead && (this.emitLookAhead(), this.lookAhead = e);
  }
  close() {
    this.curContext && this.curContext.tracker.strict && this.emitContext(), this.lookAhead > 0 && this.emitLookAhead();
  }
}
class jC {
  constructor(e, n) {
    this.tracker = e, this.context = n, this.hash = e.strict ? e.hash(n) : 0;
  }
}
var BC;
(function(t) {
  t[t.Insert = 200] = "Insert", t[t.Delete = 190] = "Delete", t[t.Reduce = 100] = "Reduce", t[t.MaxNext = 4] = "MaxNext", t[t.MaxInsertStackDepth = 300] = "MaxInsertStackDepth", t[t.DampenInsertStackDepth = 120] = "DampenInsertStackDepth";
})(BC || (BC = {}));
class qX {
  constructor(e) {
    this.start = e, this.state = e.state, this.stack = e.stack, this.base = this.stack.length;
  }
  reduce(e) {
    let n = e & 65535, i = e >> 19;
    i == 0 ? (this.stack == this.start.stack && (this.stack = this.stack.slice()), this.stack.push(this.state, 0, 0), this.base += 3) : this.base -= (i - 1) * 3;
    let r = this.start.p.parser.getGoto(this.stack[this.base - 3], n, !0);
    this.state = r;
  }
}
class Nd {
  constructor(e, n, i) {
    this.stack = e, this.pos = n, this.index = i, this.buffer = e.buffer, this.index == 0 && this.maybeNext();
  }
  static create(e, n = e.bufferBase + e.buffer.length) {
    return new Nd(e, n, n - e.bufferBase);
  }
  maybeNext() {
    let e = this.stack.parent;
    e != null && (this.index = this.stack.bufferBase - e.bufferBase, this.stack = e, this.buffer = e.buffer);
  }
  get id() {
    return this.buffer[this.index - 4];
  }
  get start() {
    return this.buffer[this.index - 3];
  }
  get end() {
    return this.buffer[this.index - 2];
  }
  get size() {
    return this.buffer[this.index - 1];
  }
  next() {
    this.index -= 4, this.pos -= 4, this.index == 0 && this.maybeNext();
  }
  fork() {
    return new Nd(this.stack, this.pos, this.index);
  }
}
class Sh {
  constructor() {
    this.start = -1, this.value = -1, this.end = -1, this.extended = -1, this.lookAhead = 0, this.mask = 0, this.context = 0;
  }
}
const xC = new Sh();
class JX {
  constructor(e, n) {
    this.input = e, this.ranges = n, this.chunk = "", this.chunkOff = 0, this.chunk2 = "", this.chunk2Pos = 0, this.next = -1, this.token = xC, this.rangeIndex = 0, this.pos = this.chunkPos = n[0].from, this.range = n[0], this.end = n[n.length - 1].to, this.readNext();
  }
  resolveOffset(e, n) {
    let i = this.range, r = this.rangeIndex, s = this.pos + e;
    for (; s < i.from; ) {
      if (!r)
        return null;
      let o = this.ranges[--r];
      s -= i.from - o.to, i = o;
    }
    for (; n < 0 ? s > i.to : s >= i.to; ) {
      if (r == this.ranges.length - 1)
        return null;
      let o = this.ranges[++r];
      s += o.from - i.to, i = o;
    }
    return s;
  }
  clipPos(e) {
    if (e >= this.range.from && e < this.range.to)
      return e;
    for (let n of this.ranges)
      if (n.to > e)
        return Math.max(e, n.from);
    return this.end;
  }
  peek(e) {
    let n = this.chunkOff + e, i, r;
    if (n >= 0 && n < this.chunk.length)
      i = this.pos + e, r = this.chunk.charCodeAt(n);
    else {
      let s = this.resolveOffset(e, 1);
      if (s == null)
        return -1;
      if (i = s, i >= this.chunk2Pos && i < this.chunk2Pos + this.chunk2.length)
        r = this.chunk2.charCodeAt(i - this.chunk2Pos);
      else {
        let o = this.rangeIndex, l = this.range;
        for (; l.to <= i; )
          l = this.ranges[++o];
        this.chunk2 = this.input.chunk(this.chunk2Pos = i), i + this.chunk2.length > l.to && (this.chunk2 = this.chunk2.slice(0, l.to - i)), r = this.chunk2.charCodeAt(0);
      }
    }
    return i >= this.token.lookAhead && (this.token.lookAhead = i + 1), r;
  }
  acceptToken(e, n = 0) {
    let i = n ? this.resolveOffset(n, -1) : this.pos;
    if (i == null || i < this.token.start)
      throw new RangeError("Token end out of bounds");
    this.token.value = e, this.token.end = i;
  }
  getChunk() {
    if (this.pos >= this.chunk2Pos && this.pos < this.chunk2Pos + this.chunk2.length) {
      let { chunk: e, chunkPos: n } = this;
      this.chunk = this.chunk2, this.chunkPos = this.chunk2Pos, this.chunk2 = e, this.chunk2Pos = n, this.chunkOff = this.pos - this.chunkPos;
    } else {
      this.chunk2 = this.chunk, this.chunk2Pos = this.chunkPos;
      let e = this.input.chunk(this.pos), n = this.pos + e.length;
      this.chunk = n > this.range.to ? e.slice(0, this.range.to - this.pos) : e, this.chunkPos = this.pos, this.chunkOff = 0;
    }
  }
  readNext() {
    return this.chunkOff >= this.chunk.length && (this.getChunk(), this.chunkOff == this.chunk.length) ? this.next = -1 : this.next = this.chunk.charCodeAt(this.chunkOff);
  }
  advance(e = 1) {
    for (this.chunkOff += e; this.pos + e >= this.range.to; ) {
      if (this.rangeIndex == this.ranges.length - 1)
        return this.setDone();
      e -= this.range.to - this.pos, this.range = this.ranges[++this.rangeIndex], this.pos = this.range.from;
    }
    return this.pos += e, this.pos >= this.token.lookAhead && (this.token.lookAhead = this.pos + 1), this.readNext();
  }
  setDone() {
    return this.pos = this.chunkPos = this.end, this.range = this.ranges[this.rangeIndex = this.ranges.length - 1], this.chunk = "", this.next = -1;
  }
  reset(e, n) {
    if (n ? (this.token = n, n.start = e, n.lookAhead = e + 1, n.value = n.extended = -1) : this.token = xC, this.pos != e) {
      if (this.pos = e, e == this.end)
        return this.setDone(), this;
      for (; e < this.range.from; )
        this.range = this.ranges[--this.rangeIndex];
      for (; e >= this.range.to; )
        this.range = this.ranges[++this.rangeIndex];
      e >= this.chunkPos && e < this.chunkPos + this.chunk.length ? this.chunkOff = e - this.chunkPos : (this.chunk = "", this.chunkOff = 0), this.readNext();
    }
    return this;
  }
  read(e, n) {
    if (e >= this.chunkPos && n <= this.chunkPos + this.chunk.length)
      return this.chunk.slice(e - this.chunkPos, n - this.chunkPos);
    if (e >= this.chunk2Pos && n <= this.chunk2Pos + this.chunk2.length)
      return this.chunk2.slice(e - this.chunk2Pos, n - this.chunk2Pos);
    if (e >= this.range.from && n <= this.range.to)
      return this.input.read(e, n);
    let i = "";
    for (let r of this.ranges) {
      if (r.from >= n)
        break;
      r.to > e && (i += this.input.read(Math.max(r.from, e), Math.min(r.to, n)));
    }
    return i;
  }
}
class Eh {
  constructor(e, n) {
    this.data = e, this.id = n;
  }
  token(e, n) {
    KX(this.data, e, n, this.id);
  }
}
Eh.prototype.contextual = Eh.prototype.fallback = Eh.prototype.extend = !1;
function KX(t, e, n, i) {
  let r = 0, s = 1 << i, { parser: o } = n.p, { dialect: l } = o;
  e:
    for (; s & t[r]; ) {
      let a = t[r + 1];
      for (let h = r + 3; h < a; h += 2)
        if ((t[h + 1] & s) > 0) {
          let d = t[h];
          if (l.allows(d) && (e.token.value == -1 || e.token.value == d || o.overrides(d, e.token.value))) {
            e.acceptToken(d);
            break;
          }
        }
      let c = e.next, u = 0, f = t[r + 2];
      if (e.next < 0 && f > u && t[a + f * 3 - 3] == 65535 && t[a + f * 3 - 3] == 65535) {
        r = t[a + f * 3 - 1];
        continue e;
      }
      for (; u < f; ) {
        let h = u + f >> 1, d = a + h + (h << 1), p = t[d], g = t[d + 1] || 65536;
        if (c < p)
          f = h;
        else if (c >= g)
          u = h + 1;
        else {
          r = t[d + 2], e.advance();
          continue e;
        }
      }
      break;
    }
}
function Yf(t, e = Uint16Array) {
  if (typeof t != "string")
    return t;
  let n = null;
  for (let i = 0, r = 0; i < t.length; ) {
    let s = 0;
    for (; ; ) {
      let o = t.charCodeAt(i++), l = !1;
      if (o == 126) {
        s = 65535;
        break;
      }
      o >= 92 && o--, o >= 34 && o--;
      let a = o - 32;
      if (a >= 46 && (a -= 46, l = !0), s += a, l)
        break;
      s *= 46;
    }
    n ? n[r++] = s : n = new e(s);
  }
  return n;
}
const Tr = typeof process < "u" && process.env && /\bparse\b/.test(process.env.LOG);
let cm = null;
var FC;
(function(t) {
  t[t.Margin = 25] = "Margin";
})(FC || (FC = {}));
function zC(t, e, n) {
  let i = t.cursor(Ei.IncludeAnonymous);
  for (i.moveTo(e); ; )
    if (!(n < 0 ? i.childBefore(e) : i.childAfter(e)))
      for (; ; ) {
        if ((n < 0 ? i.to < e : i.from > e) && !i.type.isError)
          return n < 0 ? Math.max(0, Math.min(i.to - 1, e - 25)) : Math.min(t.length, Math.max(i.from + 1, e + 25));
        if (n < 0 ? i.prevSibling() : i.nextSibling())
          break;
        if (!i.parent())
          return n < 0 ? 0 : t.length;
      }
}
class GX {
  constructor(e, n) {
    this.fragments = e, this.nodeSet = n, this.i = 0, this.fragment = null, this.safeFrom = -1, this.safeTo = -1, this.trees = [], this.start = [], this.index = [], this.nextFragment();
  }
  nextFragment() {
    let e = this.fragment = this.i == this.fragments.length ? null : this.fragments[this.i++];
    if (e) {
      for (this.safeFrom = e.openStart ? zC(e.tree, e.from + e.offset, 1) - e.offset : e.from, this.safeTo = e.openEnd ? zC(e.tree, e.to + e.offset, -1) - e.offset : e.to; this.trees.length; )
        this.trees.pop(), this.start.pop(), this.index.pop();
      this.trees.push(e.tree), this.start.push(-e.offset), this.index.push(0), this.nextStart = this.safeFrom;
    } else
      this.nextStart = 1e9;
  }
  nodeAt(e) {
    if (e < this.nextStart)
      return null;
    for (; this.fragment && this.safeTo <= e; )
      this.nextFragment();
    if (!this.fragment)
      return null;
    for (; ; ) {
      let n = this.trees.length - 1;
      if (n < 0)
        return this.nextFragment(), null;
      let i = this.trees[n], r = this.index[n];
      if (r == i.children.length) {
        this.trees.pop(), this.start.pop(), this.index.pop();
        continue;
      }
      let s = i.children[r], o = this.start[n] + i.positions[r];
      if (o > e)
        return this.nextStart = o, null;
      if (s instanceof Xn) {
        if (o == e) {
          if (o < this.safeFrom)
            return null;
          let l = o + s.length;
          if (l <= this.safeTo) {
            let a = s.prop(Tt.lookAhead);
            if (!a || l + a < this.fragment.to)
              return s;
          }
        }
        this.index[n]++, o + s.length >= Math.max(this.safeFrom, e) && (this.trees.push(s), this.start.push(o), this.index.push(0));
      } else
        this.index[n]++, this.nextStart = o + s.length;
    }
  }
}
class YX {
  constructor(e, n) {
    this.stream = n, this.tokens = [], this.mainToken = null, this.actions = [], this.tokens = e.tokenizers.map((i) => new Sh());
  }
  getActions(e) {
    let n = 0, i = null, { parser: r } = e.p, { tokenizers: s } = r, o = r.stateSlot(e.state, 3), l = e.curContext ? e.curContext.hash : 0, a = 0;
    for (let c = 0; c < s.length; c++) {
      if (!(1 << c & o))
        continue;
      let u = s[c], f = this.tokens[c];
      if (!(i && !u.fallback) && ((u.contextual || f.start != e.pos || f.mask != o || f.context != l) && (this.updateCachedToken(f, u, e), f.mask = o, f.context = l), f.lookAhead > f.end + 25 && (a = Math.max(f.lookAhead, a)), f.value != 0)) {
        let h = n;
        if (f.extended > -1 && (n = this.addActions(e, f.extended, f.end, n)), n = this.addActions(e, f.value, f.end, n), !u.extend && (i = f, n > h))
          break;
      }
    }
    for (; this.actions.length > n; )
      this.actions.pop();
    return a && e.setLookAhead(a), !i && e.pos == this.stream.end && (i = new Sh(), i.value = e.p.parser.eofTerm, i.start = i.end = e.pos, n = this.addActions(e, i.value, i.end, n)), this.mainToken = i, this.actions;
  }
  getMainToken(e) {
    if (this.mainToken)
      return this.mainToken;
    let n = new Sh(), { pos: i, p: r } = e;
    return n.start = i, n.end = Math.min(i + 1, r.stream.end), n.value = i == r.stream.end ? r.parser.eofTerm : 0, n;
  }
  updateCachedToken(e, n, i) {
    let r = this.stream.clipPos(i.pos);
    if (n.token(this.stream.reset(r, e), i), e.value > -1) {
      let { parser: s } = i.p;
      for (let o = 0; o < s.specialized.length; o++)
        if (s.specialized[o] == e.value) {
          let l = s.specializers[o](this.stream.read(e.start, e.end), i);
          if (l >= 0 && i.p.parser.dialect.allows(l >> 1)) {
            l & 1 ? e.extended = l >> 1 : e.value = l >> 1;
            break;
          }
        }
    } else
      e.value = 0, e.end = this.stream.clipPos(r + 1);
  }
  putAction(e, n, i, r) {
    for (let s = 0; s < r; s += 3)
      if (this.actions[s] == e)
        return r;
    return this.actions[r++] = e, this.actions[r++] = n, this.actions[r++] = i, r;
  }
  addActions(e, n, i, r) {
    let { state: s } = e, { parser: o } = e.p, { data: l } = o;
    for (let a = 0; a < 2; a++)
      for (let c = o.stateSlot(s, a ? 2 : 1); ; c += 3) {
        if (l[c] == 65535)
          if (l[c + 1] == 1)
            c = zs(l, c + 2);
          else {
            r == 0 && l[c + 1] == 2 && (r = this.putAction(zs(l, c + 2), n, i, r));
            break;
          }
        l[c] == n && (r = this.putAction(zs(l, c + 1), n, i, r));
      }
    return r;
  }
}
var VC;
(function(t) {
  t[t.Distance = 5] = "Distance", t[t.MaxRemainingPerStep = 3] = "MaxRemainingPerStep", t[t.MinBufferLengthPrune = 500] = "MinBufferLengthPrune", t[t.ForceReduceLimit = 10] = "ForceReduceLimit", t[t.CutDepth = 15e3] = "CutDepth", t[t.CutTo = 9e3] = "CutTo";
})(VC || (VC = {}));
class XX {
  constructor(e, n, i, r) {
    this.parser = e, this.input = n, this.ranges = r, this.recovering = 0, this.nextStackID = 9812, this.minStackPos = 0, this.reused = [], this.stoppedAt = null, this.stream = new JX(n, r), this.tokens = new YX(e, this.stream), this.topTerm = e.top[1];
    let { from: s } = r[0];
    this.stacks = [Dd.start(this, e.top[0], s)], this.fragments = i.length && this.stream.end - s > e.bufferLength * 4 ? new GX(i, e.nodeSet) : null;
  }
  get parsedPos() {
    return this.minStackPos;
  }
  advance() {
    let e = this.stacks, n = this.minStackPos, i = this.stacks = [], r, s;
    for (let o = 0; o < e.length; o++) {
      let l = e[o];
      for (; ; ) {
        if (this.tokens.mainToken = null, l.pos > n)
          i.push(l);
        else {
          if (this.advanceStack(l, i, e))
            continue;
          {
            r || (r = [], s = []), r.push(l);
            let a = this.tokens.getMainToken(l);
            s.push(a.value, a.end);
          }
        }
        break;
      }
    }
    if (!i.length) {
      let o = r && ZX(r);
      if (o)
        return this.stackToTree(o);
      if (this.parser.strict)
        throw Tr && r && console.log("Stuck with token " + (this.tokens.mainToken ? this.parser.getName(this.tokens.mainToken.value) : "none")), new SyntaxError("No parse at " + n);
      this.recovering || (this.recovering = 5);
    }
    if (this.recovering && r) {
      let o = this.stoppedAt != null && r[0].pos > this.stoppedAt ? r[0] : this.runRecovery(r, s, i);
      if (o)
        return this.stackToTree(o.forceAll());
    }
    if (this.recovering) {
      let o = this.recovering == 1 ? 1 : this.recovering * 3;
      if (i.length > o)
        for (i.sort((l, a) => a.score - l.score); i.length > o; )
          i.pop();
      i.some((l) => l.reducePos > n) && this.recovering--;
    } else if (i.length > 1) {
      e:
        for (let o = 0; o < i.length - 1; o++) {
          let l = i[o];
          for (let a = o + 1; a < i.length; a++) {
            let c = i[a];
            if (l.sameState(c) || l.buffer.length > 500 && c.buffer.length > 500)
              if ((l.score - c.score || l.buffer.length - c.buffer.length) > 0)
                i.splice(a--, 1);
              else {
                i.splice(o--, 1);
                continue e;
              }
          }
        }
    }
    this.minStackPos = i[0].pos;
    for (let o = 1; o < i.length; o++)
      i[o].pos < this.minStackPos && (this.minStackPos = i[o].pos);
    return null;
  }
  stopAt(e) {
    if (this.stoppedAt != null && this.stoppedAt < e)
      throw new RangeError("Can't move stoppedAt forward");
    this.stoppedAt = e;
  }
  advanceStack(e, n, i) {
    let r = e.pos, { parser: s } = this, o = Tr ? this.stackID(e) + " -> " : "";
    if (this.stoppedAt != null && r > this.stoppedAt)
      return e.forceReduce() ? e : null;
    if (this.fragments) {
      let c = e.curContext && e.curContext.tracker.strict, u = c ? e.curContext.hash : 0;
      for (let f = this.fragments.nodeAt(r); f; ) {
        let h = this.parser.nodeSet.types[f.type.id] == f.type ? s.getGoto(e.state, f.type.id) : -1;
        if (h > -1 && f.length && (!c || (f.prop(Tt.contextHash) || 0) == u))
          return e.useNode(f, h), Tr && console.log(o + this.stackID(e) + ` (via reuse of ${s.getName(f.type.id)})`), !0;
        if (!(f instanceof Xn) || f.children.length == 0 || f.positions[0] > 0)
          break;
        let d = f.children[0];
        if (d instanceof Xn && f.positions[0] == 0)
          f = d;
        else
          break;
      }
    }
    let l = s.stateSlot(e.state, 4);
    if (l > 0)
      return e.reduce(l), Tr && console.log(o + this.stackID(e) + ` (via always-reduce ${s.getName(l & 65535)})`), !0;
    if (e.stack.length >= 15e3)
      for (; e.stack.length > 9e3 && e.forceReduce(); )
        ;
    let a = this.tokens.getActions(e);
    for (let c = 0; c < a.length; ) {
      let u = a[c++], f = a[c++], h = a[c++], d = c == a.length || !i, p = d ? e : e.split();
      if (p.apply(u, f, h), Tr && console.log(o + this.stackID(p) + ` (via ${u & 65536 ? `reduce of ${s.getName(u & 65535)}` : "shift"} for ${s.getName(f)} @ ${r}${p == e ? "" : ", split"})`), d)
        return !0;
      p.pos > r ? n.push(p) : i.push(p);
    }
    return !1;
  }
  advanceFully(e, n) {
    let i = e.pos;
    for (; ; ) {
      if (!this.advanceStack(e, null, null))
        return !1;
      if (e.pos > i)
        return UC(e, n), !0;
    }
  }
  runRecovery(e, n, i) {
    let r = null, s = !1;
    for (let o = 0; o < e.length; o++) {
      let l = e[o], a = n[o << 1], c = n[(o << 1) + 1], u = Tr ? this.stackID(l) + " -> " : "";
      if (l.deadEnd && (s || (s = !0, l.restart(), Tr && console.log(u + this.stackID(l) + " (restarted)"), this.advanceFully(l, i))))
        continue;
      let f = l.split(), h = u;
      for (let d = 0; f.forceReduce() && d < 10 && (Tr && console.log(h + this.stackID(f) + " (via force-reduce)"), !this.advanceFully(f, i)); d++)
        Tr && (h = this.stackID(f) + " -> ");
      for (let d of l.recoverByInsert(a))
        Tr && console.log(u + this.stackID(d) + " (via recover-insert)"), this.advanceFully(d, i);
      this.stream.end > l.pos ? (c == l.pos && (c++, a = 0), l.recoverByDelete(a, c), Tr && console.log(u + this.stackID(l) + ` (via recover-delete ${this.parser.getName(a)})`), UC(l, i)) : (!r || r.score < l.score) && (r = l);
    }
    return r;
  }
  stackToTree(e) {
    return e.close(), Xn.build({
      buffer: Nd.create(e),
      nodeSet: this.parser.nodeSet,
      topID: this.topTerm,
      maxBufferLength: this.parser.bufferLength,
      reused: this.reused,
      start: this.ranges[0].from,
      length: e.pos - this.ranges[0].from,
      minRepeatType: this.parser.minRepeatTerm
    });
  }
  stackID(e) {
    let n = (cm || (cm = /* @__PURE__ */ new WeakMap())).get(e);
    return n || cm.set(e, n = String.fromCodePoint(this.nextStackID++)), n + e;
  }
}
function UC(t, e) {
  for (let n = 0; n < e.length; n++) {
    let i = e[n];
    if (i.pos == t.pos && i.sameState(t)) {
      e[n].score < t.score && (e[n] = t);
      return;
    }
  }
  e.push(t);
}
class QX {
  constructor(e, n, i) {
    this.source = e, this.flags = n, this.disabled = i;
  }
  allows(e) {
    return !this.disabled || this.disabled[e] == 0;
  }
}
class Ld extends TE {
  constructor(e) {
    if (super(), this.wrappers = [], e.version != 14)
      throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);
    let n = e.nodeNames.split(" ");
    this.minRepeatTerm = n.length;
    for (let l = 0; l < e.repeatNodeCount; l++)
      n.push("");
    let i = Object.keys(e.topRules).map((l) => e.topRules[l][1]), r = [];
    for (let l = 0; l < n.length; l++)
      r.push([]);
    function s(l, a, c) {
      r[l].push([a, a.deserialize(String(c))]);
    }
    if (e.nodeProps)
      for (let l of e.nodeProps) {
        let a = l[0];
        typeof a == "string" && (a = Tt[a]);
        for (let c = 1; c < l.length; ) {
          let u = l[c++];
          if (u >= 0)
            s(u, a, l[c++]);
          else {
            let f = l[c + -u];
            for (let h = -u; h > 0; h--)
              s(l[c++], a, f);
            c++;
          }
        }
      }
    this.nodeSet = new Mb(n.map((l, a) => Ki.define({
      name: a >= this.minRepeatTerm ? void 0 : l,
      id: a,
      props: r[a],
      top: i.indexOf(a) > -1,
      error: a == 0,
      skipped: e.skippedNodes && e.skippedNodes.indexOf(a) > -1
    }))), e.propSources && (this.nodeSet = this.nodeSet.extend(...e.propSources)), this.strict = !1, this.bufferLength = AE;
    let o = Yf(e.tokenData);
    this.context = e.context, this.specializerSpecs = e.specialized || [], this.specialized = new Uint16Array(this.specializerSpecs.length);
    for (let l = 0; l < this.specializerSpecs.length; l++)
      this.specialized[l] = this.specializerSpecs[l].term;
    this.specializers = this.specializerSpecs.map(WC), this.states = Yf(e.states, Uint32Array), this.data = Yf(e.stateData), this.goto = Yf(e.goto), this.maxTerm = e.maxTerm, this.tokenizers = e.tokenizers.map((l) => typeof l == "number" ? new Eh(o, l) : l), this.topRules = e.topRules, this.dialects = e.dialects || {}, this.dynamicPrecedences = e.dynamicPrecedences || null, this.tokenPrecTable = e.tokenPrec, this.termNames = e.termNames || null, this.maxNode = this.nodeSet.types.length - 1, this.dialect = this.parseDialect(), this.top = this.topRules[Object.keys(this.topRules)[0]];
  }
  createParse(e, n, i) {
    let r = new XX(this, e, n, i);
    for (let s of this.wrappers)
      r = s(r, e, n, i);
    return r;
  }
  getGoto(e, n, i = !1) {
    let r = this.goto;
    if (n >= r[0])
      return -1;
    for (let s = r[n + 1]; ; ) {
      let o = r[s++], l = o & 1, a = r[s++];
      if (l && i)
        return a;
      for (let c = s + (o >> 1); s < c; s++)
        if (r[s] == e)
          return a;
      if (l)
        return -1;
    }
  }
  hasAction(e, n) {
    let i = this.data;
    for (let r = 0; r < 2; r++)
      for (let s = this.stateSlot(e, r ? 2 : 1), o; ; s += 3) {
        if ((o = i[s]) == 65535)
          if (i[s + 1] == 1)
            o = i[s = zs(i, s + 2)];
          else {
            if (i[s + 1] == 2)
              return zs(i, s + 2);
            break;
          }
        if (o == n || o == 0)
          return zs(i, s + 1);
      }
    return 0;
  }
  stateSlot(e, n) {
    return this.states[e * 6 + n];
  }
  stateFlag(e, n) {
    return (this.stateSlot(e, 0) & n) > 0;
  }
  validAction(e, n) {
    if (n == this.stateSlot(e, 4))
      return !0;
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = zs(this.data, i + 2);
        else
          return !1;
      if (n == zs(this.data, i + 1))
        return !0;
    }
  }
  nextStates(e) {
    let n = [];
    for (let i = this.stateSlot(e, 1); ; i += 3) {
      if (this.data[i] == 65535)
        if (this.data[i + 1] == 1)
          i = zs(this.data, i + 2);
        else
          break;
      if (!(this.data[i + 2] & 1)) {
        let r = this.data[i + 1];
        n.some((s, o) => o & 1 && s == r) || n.push(this.data[i], r);
      }
    }
    return n;
  }
  overrides(e, n) {
    let i = HC(this.data, this.tokenPrecTable, n);
    return i < 0 || HC(this.data, this.tokenPrecTable, e) < i;
  }
  configure(e) {
    let n = Object.assign(Object.create(Ld.prototype), this);
    if (e.props && (n.nodeSet = this.nodeSet.extend(...e.props)), e.top) {
      let i = this.topRules[e.top];
      if (!i)
        throw new RangeError(`Invalid top rule name ${e.top}`);
      n.top = i;
    }
    return e.tokenizers && (n.tokenizers = this.tokenizers.map((i) => {
      let r = e.tokenizers.find((s) => s.from == i);
      return r ? r.to : i;
    })), e.specializers && (n.specializers = this.specializers.slice(), n.specializerSpecs = this.specializerSpecs.map((i, r) => {
      let s = e.specializers.find((l) => l.from == i.external);
      if (!s)
        return i;
      let o = Object.assign(Object.assign({}, i), { external: s.to });
      return n.specializers[r] = WC(o), o;
    })), e.contextTracker && (n.context = e.contextTracker), e.dialect && (n.dialect = this.parseDialect(e.dialect)), e.strict != null && (n.strict = e.strict), e.wrap && (n.wrappers = n.wrappers.concat(e.wrap)), e.bufferLength != null && (n.bufferLength = e.bufferLength), n;
  }
  hasWrappers() {
    return this.wrappers.length > 0;
  }
  getName(e) {
    return this.termNames ? this.termNames[e] : String(e <= this.maxNode && this.nodeSet.types[e].name || e);
  }
  get eofTerm() {
    return this.maxNode + 1;
  }
  get topNode() {
    return this.nodeSet.types[this.top[1]];
  }
  dynamicPrecedence(e) {
    let n = this.dynamicPrecedences;
    return n == null ? 0 : n[e] || 0;
  }
  parseDialect(e) {
    let n = Object.keys(this.dialects), i = n.map(() => !1);
    if (e)
      for (let s of e.split(" ")) {
        let o = n.indexOf(s);
        o >= 0 && (i[o] = !0);
      }
    let r = null;
    for (let s = 0; s < n.length; s++)
      if (!i[s])
        for (let o = this.dialects[n[s]], l; (l = this.data[o++]) != 65535; )
          (r || (r = new Uint8Array(this.maxTerm + 1)))[l] = 1;
    return new QX(e, i, r);
  }
  static deserialize(e) {
    return new Ld(e);
  }
}
function zs(t, e) {
  return t[e] | t[e + 1] << 16;
}
function HC(t, e, n) {
  for (let i = e, r; (r = t[i]) != 65535; i++)
    if (r == n)
      return i - e;
  return -1;
}
function ZX(t) {
  let e = null;
  for (let n of t) {
    let i = n.p.stoppedAt;
    (n.pos == n.p.stream.end || i != null && n.pos > i) && n.p.parser.stateFlag(n.state, 2) && (!e || e.score < n.score) && (e = n);
  }
  return e;
}
function WC(t) {
  if (t.external) {
    let e = t.extend ? 1 : 0;
    return (n, i) => t.external(n, i) << 1 | e;
  }
  return t.get;
}
const $X = RE({
  String: Fe.string,
  Number: Fe.number,
  "True False": Fe.bool,
  PropertyName: Fe.propertyName,
  Null: Fe.null,
  ",": Fe.separator,
  "[ ]": Fe.squareBracket,
  "{ }": Fe.brace
}), eQ = Ld.deserialize({
  version: 14,
  states: "$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",
  stateData: "#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",
  goto: "!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",
  nodeNames: "âš  JsonText True False Null Number String } { Object Property PropertyName ] [ Array",
  maxTerm: 25,
  nodeProps: [
    ["openedBy", 7, "{", 12, "["],
    ["closedBy", 8, "}", 13, "]"]
  ],
  propSources: [$X],
  skippedNodes: [0],
  repeatNodeCount: 2,
  tokenData: "(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",
  tokenizers: [0],
  topRules: { JsonText: [0, 1] },
  tokenPrec: 0
}), tQ = /* @__PURE__ */ _d.define({
  name: "json",
  parser: /* @__PURE__ */ eQ.configure({
    props: [
      /* @__PURE__ */ NE.add({
        Object: /* @__PURE__ */ cC({ except: /^\s*\}/ }),
        Array: /* @__PURE__ */ cC({ except: /^\s*\]/ })
      }),
      /* @__PURE__ */ jE.add({
        "Object Array": PK
      })
    ]
  }),
  languageData: {
    closeBrackets: { brackets: ["[", "{", '"'] },
    indentOnInput: /^\s*[\}\]]$/
  }
});
function nQ() {
  return new yK(tQ);
}
function qC(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), n = _e("Line: "), i = _e(t[0]), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, s) {
      U(r, e, s), E(e, n), E(e, i);
    },
    p(r, s) {
      s & 1 && ze(i, r[0]);
    },
    d(r) {
      r && V(e);
    }
  };
}
function JC(t) {
  let e, n, i;
  return {
    c() {
      e = j("div"), n = _e("Column: "), i = _e(t[1]), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(r, s) {
      U(r, e, s), E(e, n), E(e, i);
    },
    p(r, s) {
      s & 2 && ze(i, r[1]);
    },
    d(r) {
      r && V(e);
    }
  };
}
function KC(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("div"), n = _e("Selection: "), i = _e(t[2]), r = _e(" characters"), b(e, "class", "jse-status-bar-info svelte-1oo7hnc");
    },
    m(s, o) {
      U(s, e, o), E(e, n), E(e, i), E(e, r);
    },
    p(s, o) {
      o & 4 && ze(i, s[2]);
    },
    d(s) {
      s && V(e);
    }
  };
}
function iQ(t) {
  let e, n, i, r = t[0] !== void 0 && qC(t), s = t[1] !== void 0 && JC(t), o = t[2] !== void 0 && t[2] > 0 && KC(t);
  return {
    c() {
      e = j("div"), r && r.c(), n = Z(), s && s.c(), i = Z(), o && o.c(), b(e, "class", "jse-status-bar svelte-1oo7hnc");
    },
    m(l, a) {
      U(l, e, a), r && r.m(e, null), E(e, n), s && s.m(e, null), E(e, i), o && o.m(e, null);
    },
    p(l, [a]) {
      l[0] !== void 0 ? r ? r.p(l, a) : (r = qC(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), l[1] !== void 0 ? s ? s.p(l, a) : (s = JC(l), s.c(), s.m(e, i)) : s && (s.d(1), s = null), l[2] !== void 0 && l[2] > 0 ? o ? o.p(l, a) : (o = KC(l), o.c(), o.m(e, null)) : o && (o.d(1), o = null);
    },
    i: ye,
    o: ye,
    d(l) {
      l && V(e), r && r.d(), s && s.d(), o && o.d();
    }
  };
}
function rQ(t, e, n) {
  let { editorState: i } = e, r, s, o, l, a;
  return t.$$set = (c) => {
    "editorState" in c && n(3, i = c.editorState);
  }, t.$$.update = () => {
    var c, u, f, h, d;
    t.$$.dirty & 8 && n(4, r = (u = (c = i == null ? void 0 : i.selection) == null ? void 0 : c.main) == null ? void 0 : u.head), t.$$.dirty & 24 && n(5, s = (f = i == null ? void 0 : i.doc) == null ? void 0 : f.lineAt(r)), t.$$.dirty & 32 && n(0, o = s ? s.number : void 0), t.$$.dirty & 48 && n(1, l = s ? r - s.from + 1 : void 0), t.$$.dirty & 8 && n(2, a = (d = (h = i == null ? void 0 : i.selection) == null ? void 0 : h.ranges) == null ? void 0 : d.reduce(
      (p, g) => p + g.to - g.from,
      0
    ));
  }, [o, l, a, i, r, s];
}
class sQ extends Ge {
  constructor(e) {
    super(), Ke(this, e, rQ, iQ, Nt, { editorState: 3 });
  }
}
const oQ = sQ, Yb = Zu.define([
  { tag: Fe.propertyName, color: "var(--jse-key-color)" },
  { tag: Fe.number, color: "var(--jse-value-color-number)" },
  { tag: Fe.bool, color: "var(--jse-value-color-boolean)" },
  { tag: Fe.string, color: "var(--jse-value-color-string)" },
  { tag: Fe.keyword, color: "var(--jse-value-color-null)" }
]), lQ = WE(Yb), aQ = Yb.style;
Yb.style = (t) => aQ(t || []);
function cQ(t) {
  const e = t.slice(), n = e[27](e[9], e[7]);
  return e[86] = n, e;
}
function um(t) {
  const e = t.slice(), n = e[9].length === 0;
  return e[87] = n, e;
}
function GC(t) {
  let e, n;
  return e = new wW({
    props: {
      readOnly: t[0],
      onFormat: t[15],
      onCompact: t[16],
      onSort: t[17],
      onTransform: t[18],
      onToggleSearch: t[19],
      onUndo: t[20],
      onRedo: t[21],
      canFormat: !t[87],
      canCompact: !t[87],
      canSort: !t[87],
      canTransform: !t[87],
      canUndo: t[10],
      canRedo: t[11],
      onRenderMenu: t[3]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.readOnly = i[0]), r[0] & 512 && (s.canFormat = !i[87]), r[0] & 512 && (s.canCompact = !i[87]), r[0] & 512 && (s.canSort = !i[87]), r[0] & 512 && (s.canTransform = !i[87]), r[0] & 1024 && (s.canUndo = i[10]), r[0] & 2048 && (s.canRedo = i[11]), r[0] & 8 && (s.onRenderMenu = i[3]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function uQ(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-1yqirn0"></div> 
      <div class="jse-loading svelte-1yqirn0">loading...</div>`, b(e, "class", "jse-contents svelte-1yqirn0");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function fQ(t) {
  let e, n, i, r, s, o = t[86] && YC(t), l = !t[86] && XC(t);
  return {
    c() {
      e = j("div"), n = Z(), o && o.c(), i = Z(), l && l.c(), r = rt(), b(e, "class", "jse-contents svelte-1yqirn0"), Se(e, "jse-hidden", t[86]);
    },
    m(a, c) {
      U(a, e, c), t[49](e), U(a, n, c), o && o.m(a, c), U(a, i, c), l && l.m(a, c), U(a, r, c), s = !0;
    },
    p(a, c) {
      (!s || c[0] & 134218368) && Se(e, "jse-hidden", a[86]), a[86] ? o ? (o.p(a, c), c[0] & 640 && P(o, 1)) : (o = YC(a), o.c(), P(o, 1), o.m(i.parentNode, i)) : o && (Ae(), x(o, 1, 1, () => {
        o = null;
      }), Me()), a[86] ? l && (Ae(), x(l, 1, 1, () => {
        l = null;
      }), Me()) : l ? (l.p(a, c), c[0] & 640 && P(l, 1)) : (l = XC(a), l.c(), P(l, 1), l.m(r.parentNode, r));
    },
    i(a) {
      s || (P(o), P(l), s = !0);
    },
    o(a) {
      x(o), x(l), s = !1;
    },
    d(a) {
      a && V(e), t[49](null), a && V(n), o && o.d(a), a && V(i), l && l.d(a), a && V(r);
    }
  };
}
function YC(t) {
  let e, n, i, r = Cs(t[9] || "", zh) + "", s, o;
  return e = new Ns({
    props: {
      icon: ql,
      type: "error",
      message: `The JSON document is larger than ${Of(Nm, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Of(t[9].length, 1024)}.`,
      actions: [
        {
          text: "Open anyway",
          title: "Open the document in text mode. This may freeze or crash your browser.",
          onClick: t[22]
        },
        {
          text: "Open in tree mode",
          title: "Open the document in tree mode. Tree mode can handle large documents.",
          onClick: t[23]
        },
        {
          text: "Cancel",
          title: "Cancel opening this large document.",
          onClick: t[24]
        }
      ]
    }
  }), {
    c() {
      ge(e.$$.fragment), n = Z(), i = j("div"), s = _e(r), b(i, "class", "jse-contents jse-preview svelte-1yqirn0");
    },
    m(l, a) {
      de(e, l, a), U(l, n, a), U(l, i, a), E(i, s), o = !0;
    },
    p(l, a) {
      const c = {};
      a[0] & 512 && (c.message = `The JSON document is larger than ${Of(Nm, 1024)}, and may crash your browser when loading it in text mode. Actual size: ${Of(l[9].length, 1024)}.`), e.$set(c), (!o || a[0] & 512) && r !== (r = Cs(l[9] || "", zh) + "") && ze(s, r);
    },
    i(l) {
      o || (P(e.$$.fragment, l), o = !0);
    },
    o(l) {
      x(e.$$.fragment, l), o = !1;
    },
    d(l) {
      pe(e, l), l && V(n), l && V(i);
    }
  };
}
function XC(t) {
  let e, n, i, r, s = t[2] && QC(t), o = t[12] && ZC(t);
  return i = new lb({
    props: {
      validationErrors: t[8],
      selectError: t[25]
    }
  }), {
    c() {
      s && s.c(), e = Z(), o && o.c(), n = Z(), ge(i.$$.fragment);
    },
    m(l, a) {
      s && s.m(l, a), U(l, e, a), o && o.m(l, a), U(l, n, a), de(i, l, a), r = !0;
    },
    p(l, a) {
      l[2] ? s ? (s.p(l, a), a[0] & 4 && P(s, 1)) : (s = QC(l), s.c(), P(s, 1), s.m(e.parentNode, e)) : s && (Ae(), x(s, 1, 1, () => {
        s = null;
      }), Me()), l[12] ? o ? (o.p(l, a), a[0] & 4096 && P(o, 1)) : (o = ZC(l), o.c(), P(o, 1), o.m(n.parentNode, n)) : o && (Ae(), x(o, 1, 1, () => {
        o = null;
      }), Me());
      const c = {};
      a[0] & 256 && (c.validationErrors = l[8]), i.$set(c);
    },
    i(l) {
      r || (P(s), P(o), P(i.$$.fragment, l), r = !0);
    },
    o(l) {
      x(s), x(o), x(i.$$.fragment, l), r = !1;
    },
    d(l) {
      s && s.d(l), l && V(e), o && o.d(l), l && V(n), pe(i, l);
    }
  };
}
function QC(t) {
  let e, n;
  return e = new oQ({
    props: { editorState: t[6] }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 64 && (s.editorState = i[6]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function ZC(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "error",
      icon: ql,
      message: t[12].message,
      actions: t[13],
      onClick: t[50]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.message = i[12].message), r[0] & 8192 && (s.actions = i[13]), r[0] & 4096 && (s.onClick = i[50]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function hQ(t) {
  let e, n, i, r, s, o = t[1] && GC(um(t));
  const l = [fQ, uQ], a = [];
  function c(f, h) {
    return f[14] ? 1 : 0;
  }
  function u(f, h) {
    return h === 0 ? cQ(f) : f;
  }
  return i = c(t), r = a[i] = l[i](u(t, i)), {
    c() {
      e = j("div"), o && o.c(), n = Z(), r.c(), b(e, "class", "jse-text-mode svelte-1yqirn0"), Se(e, "no-main-menu", !t[1]);
    },
    m(f, h) {
      U(f, e, h), o && o.m(e, null), E(e, n), a[i].m(e, null), t[51](e), s = !0;
    },
    p(f, h) {
      f[1] ? o ? (o.p(um(f), h), h[0] & 2 && P(o, 1)) : (o = GC(um(f)), o.c(), P(o, 1), o.m(e, n)) : o && (Ae(), x(o, 1, 1, () => {
        o = null;
      }), Me()), r.p(u(f, i), h), (!s || h[0] & 2) && Se(e, "no-main-menu", !f[1]);
    },
    i(f) {
      s || (P(o), P(r), s = !0);
    },
    o(f) {
      x(o), x(r), s = !1;
    },
    d(f) {
      f && V(e), o && o.d(), a[i].d(), t[51](null);
    }
  };
}
function $C(t) {
  return {
    from: t.from,
    to: t.to,
    message: t.message,
    actions: t.actions,
    severity: t.severity,
    source: void 0
  };
}
function dQ(t, e, n) {
  let i, r, { readOnly: s } = e, { mainMenuBar: o } = e, { statusBar: l } = e, { externalContent: a } = e, { indentation: c } = e, { tabSize: u } = e, { escapeUnicodeCharacters: f } = e, { parser: h } = e, { validator: d } = e, { validationParser: p } = e, { onChange: g } = e, { onChangeMode: m } = e, { onError: _ } = e, { onFocus: S } = e, { onBlur: v } = e, { onRenderMenu: k } = e, { onSortModal: C } = e, { onTransformModal: A } = e;
  const w = mi("jsoneditor:TextMode"), M = {
    key: "Mod-i",
    run: nt,
    shift: ke,
    preventDefault: !0
  }, N = typeof window > "u";
  w("isSSR:", N);
  let T, O, W, H, I = !1, z = [];
  const L = new Vs(), K = new Vs(), F = new Vs(), D = new Vs(), X = new Vs();
  let ue = a, q = Kh(ue, c, h), ee = f;
  or(async () => {
    if (!N)
      try {
        O = pt({
          target: T,
          initialText: Wn(q, I) ? "" : i.escapeValue(q),
          readOnly: s,
          indentation: c
        }), Xe();
      } catch (we) {
        console.error(we);
      }
  }), ks(() => {
    O && (w("Destroy CodeMirror editor"), O.destroy());
  });
  let ie = !1, ne = !1;
  const je = Pa(), Ie = Pa();
  function Xe() {
    O && (w("focus"), O.focus());
  }
  let le = !1;
  ob({
    onMount: or,
    onDestroy: ks,
    getWindow: () => sc(W),
    hasFocus: () => le && document.hasFocus() || Yh(W),
    onFocus: S,
    onBlur: v
  });
  function Ne(we) {
    w("patch", we);
    const lt = h.parse(q), wt = zr(lt, we), Wt = i5(lt, we);
    return jt({
      text: h.stringify(wt, null, c)
    }), {
      json: wt,
      previousJson: lt,
      undo: Wt,
      redo: we
    };
  }
  function nt() {
    if (w("format"), !s)
      try {
        const we = h.parse(q);
        jt({
          text: h.stringify(we, null, c)
        });
      } catch (we) {
        _(we);
      }
  }
  function ke() {
    if (w("compact"), !s)
      try {
        const we = h.parse(q);
        jt({ text: h.stringify(we) });
      } catch (we) {
        _(we);
      }
  }
  function fe() {
    if (w("repair"), !s)
      try {
        jt({ text: us(q) }), n(48, vn = wg), n(12, me = void 0);
      } catch (we) {
        _(we);
      }
  }
  function Pe() {
    if (!s)
      try {
        const we = h.parse(q);
        le = !0, C({
          id: je,
          json: we,
          rootPath: [],
          onSort: async ({ operations: lt }) => {
            w("onSort", lt), Ne(lt);
          },
          onClose: () => {
            le = !1, Xe();
          }
        });
      } catch (we) {
        _(we);
      }
  }
  function ae({ id: we, rootPath: lt, onTransform: wt, onClose: Wt }) {
    try {
      const Jt = h.parse(q);
      le = !0, A({
        id: we || Ie,
        json: Jt,
        rootPath: lt,
        onTransform: wt ? (mt) => {
          wt({
            operations: mt,
            json: Jt,
            transformedJson: zr(Jt, mt)
          });
        } : (mt) => {
          w("onTransform", mt), Ne(mt);
        },
        onClose: () => {
          le = !1, Xe(), Wt && Wt();
        }
      });
    } catch (Jt) {
      _(Jt);
    }
  }
  function $() {
    s || ae({ rootPath: [] });
  }
  function he() {
    O && (T && T.querySelector(".cm-search") ? Ub(O) : Vb(O));
  }
  function Ce() {
    s || O && (jb(O), Xe());
  }
  function J() {
    s || O && (Cd(O), Xe());
  }
  function y() {
    n(7, I = !0), jt(a, !0);
  }
  function R() {
    m(ki.tree);
  }
  function B() {
    Rt();
  }
  function Q(we) {
    w("select validation error", we);
    const lt = Be(we);
    ce(lt.from, lt.to), Xe();
  }
  function G(we) {
    w("select parse error", we);
    const lt = ht(we, !1);
    ce(lt.from, lt.to), Xe();
  }
  function ce(we, lt) {
    w("setSelection", { anchor: we, head: lt }), O && O.dispatch(O.state.update({
      selection: { anchor: we, head: lt },
      scrollIntoView: !0
    }));
  }
  function De(we, lt) {
    if (lt.state.selection.ranges.length === 1) {
      const wt = lt.state.selection.ranges[0], Wt = q.slice(wt.from, wt.to);
      if (Wt === "{" || Wt === "[") {
        const Jt = sp.parse(q), mt = Object.keys(Jt.pointers).find((Gi) => {
          var Fi;
          return ((Fi = Jt.pointers[Gi].value) == null ? void 0 : Fi.pos) === wt.from;
        }), cn = Jt.pointers[mt];
        if (mt && cn && cn.value && cn.valueEnd) {
          w("pointer found, selecting inner contents of path:", mt, cn);
          const Gi = cn.value.pos + 1, Xt = cn.valueEnd.pos - 1;
          ce(Gi, Xt);
        }
      }
    }
  }
  function We() {
    return NX(Le, { delay: py });
  }
  function pt({ target: we, initialText: lt, readOnly: wt, indentation: Wt }) {
    w("Create CodeMirror editor", { readOnly: wt, indentation: Wt });
    const Jt = Mt.create({
      doc: lt,
      extensions: [
        jp.of([mY, M]),
        L.of(We()),
        HX(),
        WX,
        lQ,
        $e.domEventHandlers({ dblclick: De }),
        $e.updateListener.of((mt) => {
          n(6, H = mt.state), mt.docChanged && Zn();
        }),
        nQ(),
        RY({ top: !0 }),
        F.of(Mt.readOnly.of(wt)),
        K.of($e.editable.of(!wt)),
        X.of(Mt.tabSize.of(u)),
        D.of(wn(Wt)),
        $e.lineWrapping
      ]
    });
    return O = new $e({ state: Jt, parent: we }), O;
  }
  function ot() {
    return O ? i.unescapeValue(O.state.doc.toString()) : "";
  }
  function Be(we) {
    const { path: lt, message: wt } = we, { line: Wt, column: Jt, from: mt, to: cn } = bj(i.escapeValue(q), lt);
    return {
      path: lt,
      line: Wt,
      column: Jt,
      from: mt,
      to: cn,
      message: wt,
      severity: Io.warning,
      actions: []
    };
  }
  function ht(we, lt) {
    const { line: wt, column: Wt, position: Jt, message: mt } = we;
    return {
      path: null,
      line: wt,
      column: Wt,
      from: Jt || 0,
      to: Jt || 0,
      severity: Io.error,
      message: mt,
      actions: lt && !s ? [
        {
          name: "Auto repair",
          apply: () => fe()
        }
      ] : null
    };
  }
  function jt(we, lt = !1) {
    const wt = Kh(we, c, h), Wt = !At(we, ue), Jt = ue;
    ue = we, n(9, q = wt), w("setCodeMirrorContent", { isChanged: Wt, forceUpdate: lt }), !(!O || !Wt && !lt) && (Wn(q, I) || O.dispatch({
      changes: {
        from: 0,
        to: O.state.doc.length,
        insert: i.escapeValue(q)
      }
    }), Kt(), Wt && jn(ue, Jt));
  }
  function _n() {
    w("refresh");
    const we = O.state.doc.length;
    O.dispatch({
      changes: { from: we, to: we, insert: " " }
    }), O.dispatch({
      changes: { from: we, to: we + 1, insert: "" }
    });
  }
  function yn() {
    w("forceUpdateText", { escapeUnicodeCharacters: f }), O && O.dispatch({
      changes: {
        from: 0,
        to: O.state.doc.length,
        insert: i.escapeValue(q)
      }
    });
  }
  function Rt() {
    if (!O)
      return;
    const we = ot(), lt = we !== q;
    if (w("onChangeCodeMirrorValue", { isChanged: lt }), !lt)
      return;
    const wt = ue;
    n(9, q = we), ue = { text: q }, Kt(), jn(ue, wt);
  }
  function Ee(we) {
    w("updateLinter", we), O && O.dispatch({
      effects: L.reconfigure(We())
    });
  }
  function li(we) {
    O && (w("updateIndentation", we), O.dispatch({
      effects: D.reconfigure(wn(we))
    }));
  }
  function an(we) {
    O && (w("updateTabSize", we), O.dispatch({
      effects: X.reconfigure(Mt.tabSize.of(we))
    }));
  }
  function Bt(we) {
    O && (w("updateReadOnly", we), O.dispatch({
      effects: [
        F.reconfigure(Mt.readOnly.of(we)),
        K.reconfigure($e.editable.of(!we))
      ]
    }));
  }
  function wn(we) {
    return xp.of(typeof we == "number" ? " ".repeat(we) : we);
  }
  function Kt() {
    n(10, ie = _G(O.state) > 0), n(11, ne = yG(O.state) > 0), w({ canUndo: ie, canRedo: ne });
  }
  const Zn = _p(Rt, py);
  function jn(we, lt) {
    g && g(we, lt, {
      contentErrors: gt(),
      patchResult: null
    });
  }
  function Wn(we, lt) {
    return we && we.length > Nm && !lt;
  }
  let vn = wg, me = null;
  function Le() {
    if (Wn(q, I))
      return [];
    const we = gt();
    if (R2(we)) {
      const { parseError: lt, isRepairable: wt } = we;
      return [$C(ht(lt, wt))];
    }
    return rV(we) ? we.validationErrors.map(Be).map($C) : [];
  }
  function gt() {
    w("validate:start"), Zn.flush();
    const we = en(i.escapeValue(q), d, h, p);
    return R2(we) ? (n(48, vn = we.isRepairable ? yy : yR), n(12, me = we.parseError), n(8, z = [])) : (n(48, vn = wg), n(12, me = null), n(8, z = we.validationErrors)), w("validate:end"), we;
  }
  const en = Ku(xz);
  function bi(we) {
    _t[we ? "unshift" : "push"](() => {
      T = we, n(4, T);
    });
  }
  const Ht = () => G(me);
  function kn(we) {
    _t[we ? "unshift" : "push"](() => {
      W = we, n(5, W);
    });
  }
  return t.$$set = (we) => {
    "readOnly" in we && n(0, s = we.readOnly), "mainMenuBar" in we && n(1, o = we.mainMenuBar), "statusBar" in we && n(2, l = we.statusBar), "externalContent" in we && n(28, a = we.externalContent), "indentation" in we && n(29, c = we.indentation), "tabSize" in we && n(30, u = we.tabSize), "escapeUnicodeCharacters" in we && n(31, f = we.escapeUnicodeCharacters), "parser" in we && n(32, h = we.parser), "validator" in we && n(33, d = we.validator), "validationParser" in we && n(34, p = we.validationParser), "onChange" in we && n(35, g = we.onChange), "onChangeMode" in we && n(36, m = we.onChangeMode), "onError" in we && n(37, _ = we.onError), "onFocus" in we && n(38, S = we.onFocus), "onBlur" in we && n(39, v = we.onBlur), "onRenderMenu" in we && n(3, k = we.onRenderMenu), "onSortModal" in we && n(40, C = we.onSortModal), "onTransformModal" in we && n(41, A = we.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 1 && (i = G0({
      escapeControlCharacters: !1,
      escapeUnicodeCharacters: f
    })), t.$$.dirty[0] & 268435456 && jt(a), t.$$.dirty[1] & 4 && Ee(d), t.$$.dirty[0] & 536870912 && li(c), t.$$.dirty[0] & 1073741824 && an(u), t.$$.dirty[0] & 1 && Bt(s), t.$$.dirty[1] & 65537 && ee !== f && (n(47, ee = f), yn()), t.$$.dirty[0] & 1 | t.$$.dirty[1] & 131072 && n(13, r = vn === yy && !s ? [
      {
        icon: Ap,
        text: "Auto repair",
        title: "Automatically repair JSON",
        onClick: fe
      }
    ] : []);
  }, [
    s,
    o,
    l,
    k,
    T,
    W,
    H,
    I,
    z,
    q,
    ie,
    ne,
    me,
    r,
    N,
    nt,
    ke,
    Pe,
    $,
    he,
    Ce,
    J,
    y,
    R,
    B,
    Q,
    G,
    Wn,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    C,
    A,
    Xe,
    Ne,
    ae,
    _n,
    gt,
    ee,
    vn,
    bi,
    Ht,
    kn
  ];
}
class pQ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      dQ,
      hQ,
      yt,
      {
        readOnly: 0,
        mainMenuBar: 1,
        statusBar: 2,
        externalContent: 28,
        indentation: 29,
        tabSize: 30,
        escapeUnicodeCharacters: 31,
        parser: 32,
        validator: 33,
        validationParser: 34,
        onChange: 35,
        onChangeMode: 36,
        onError: 37,
        onFocus: 38,
        onBlur: 39,
        onRenderMenu: 3,
        onSortModal: 40,
        onTransformModal: 41,
        focus: 42,
        patch: 43,
        openTransformModal: 44,
        refresh: 45,
        validate: 46
      },
      null,
      [-1, -1, -1]
    );
  }
  get focus() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get openTransformModal() {
    return this.$$.ctx[44];
  }
  get refresh() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
}
const gQ = pQ;
function mQ(t) {
  let e, n;
  return e = new Ip({ props: { items: t[0] } }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, [r]) {
      const s = {};
      r & 1 && (s.items = i[0]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function bQ(t, e, n) {
  let { json: i } = e, { readOnly: r } = e, { historyState: s } = e, { onSort: o } = e, { onTransform: l } = e, { onContextMenu: a } = e, { onUndo: c } = e, { onRedo: u } = e, { onRenderMenu: f } = e, h, d;
  return t.$$set = (p) => {
    "json" in p && n(1, i = p.json), "readOnly" in p && n(2, r = p.readOnly), "historyState" in p && n(3, s = p.historyState), "onSort" in p && n(4, o = p.onSort), "onTransform" in p && n(5, l = p.onTransform), "onContextMenu" in p && n(6, a = p.onContextMenu), "onUndo" in p && n(7, c = p.onUndo), "onRedo" in p && n(8, u = p.onRedo), "onRenderMenu" in p && n(9, f = p.onRenderMenu);
  }, t.$$.update = () => {
    t.$$.dirty & 510 && n(10, h = r ? [{ type: "space" }] : [
      {
        type: "button",
        icon: Mp,
        title: "Sort",
        className: "jse-sort",
        onClick: o,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: Ep,
        title: "Transform contents (filter, sort, project)",
        className: "jse-transform",
        onClick: l,
        disabled: r || i === void 0
      },
      {
        type: "button",
        icon: D6,
        title: A0,
        className: "jse-contextmenu",
        onClick: a
      },
      { type: "separator" },
      {
        type: "button",
        icon: tb,
        title: "Undo (Ctrl+Z)",
        className: "jse-undo",
        onClick: c,
        disabled: !s.canUndo
      },
      {
        type: "button",
        icon: eb,
        title: "Redo (Ctrl+Shift+Z)",
        className: "jse-redo",
        onClick: u,
        disabled: !s.canRedo
      },
      { type: "space" }
    ]), t.$$.dirty & 1536 && n(0, d = f("table", h) || h);
  }, [
    d,
    i,
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h
  ];
}
class _Q extends Ge {
  constructor(e) {
    super(), Ke(this, e, bQ, mQ, yt, {
      json: 1,
      readOnly: 2,
      historyState: 3,
      onSort: 4,
      onTransform: 5,
      onContextMenu: 6,
      onUndo: 7,
      onRedo: 8,
      onRenderMenu: 9
    });
  }
}
const yQ = _Q;
function wQ(t, e, n = Math.min(Ut(t) ? t.length : 0, 100)) {
  const i = /* @__PURE__ */ new Set();
  for (let r = 0; r < n; r++)
    (e ? kQ(t[r]) : vQ(t[r])).forEach((o) => i.add(xe(o)));
  return Array.from(i).map(Vr);
}
function vQ(t) {
  return On(t) ? Object.keys(t).map((e) => [e]) : [[]];
}
function kQ(t) {
  const e = [];
  function n(i, r) {
    On(i) ? Object.keys(i).forEach((s) => {
      n(i[s], r.concat(s));
    }) : e.push(r);
  }
  return n(t, []), e;
}
function CQ(t, e, n, i, r, s = 80) {
  const o = Ut(n) ? n.length : 0, l = SQ(i, r), a = t - s, c = e + 2 * s, u = (_) => i[_] || r;
  let f = 0, h = 0;
  for (; h < a && f < o; )
    h += u(f), f++;
  f > 0 && (f--, h -= u(f));
  let d = f, p = 0;
  for (; p < c && d < o; )
    p += u(d), d++;
  let g = 0;
  for (let _ = d; _ < o; _++)
    g += u(_);
  const m = Ut(n) ? n.slice(f, d) : [];
  return {
    startIndex: f,
    endIndex: d,
    startHeight: h,
    endHeight: g,
    averageItemHeight: l,
    visibleHeight: p,
    visibleItems: m
  };
}
function fm(t, e, n, i) {
  const { rowIndex: r } = el(t, e);
  let s = 0;
  for (let o = 0; o < r; o++)
    s += n[o] || i;
  return s;
}
function SQ(t, e) {
  const n = Object.values(t);
  if (Ot(n))
    return e;
  const i = (s, o) => s + o;
  return n.reduce(i) / n.length;
}
function EQ(t, e) {
  const { rowIndex: n, columnIndex: i } = el(e.focusPath, t);
  if (n > 0) {
    const r = { rowIndex: n - 1, columnIndex: i }, s = Qp(r, t);
    return Pt(s, !1);
  }
  return e;
}
function AQ(t, e, n) {
  const { rowIndex: i, columnIndex: r } = el(n.focusPath, e);
  if (i < t.length - 1) {
    const s = { rowIndex: i + 1, columnIndex: r }, o = Qp(s, e);
    return Pt(o, !1);
  }
  return n;
}
function MQ(t, e) {
  const { rowIndex: n, columnIndex: i } = el(e.focusPath, t);
  if (i > 0) {
    const r = { rowIndex: n, columnIndex: i - 1 }, s = Qp(r, t);
    return Pt(s, !1);
  }
  return e;
}
function OQ(t, e) {
  const { rowIndex: n, columnIndex: i } = el(e.focusPath, t);
  if (i < t.length - 1) {
    const r = { rowIndex: n, columnIndex: i + 1 }, s = Qp(r, t);
    return Pt(s, !1);
  }
  return e;
}
function el(t, e) {
  const [n, ...i] = t, r = parseInt(n, 10);
  return {
    rowIndex: isNaN(r) ? -1 : r,
    columnIndex: e.findIndex((s) => ja(i, s))
  };
}
function Qp(t, e) {
  const { rowIndex: n, columnIndex: i } = t;
  return [String(n), ...e[i]];
}
function TQ(t, e) {
  const [n, i] = $L(t, (o) => L0(o.path[0])), r = yp(n, RQ), s = JL(r, (o) => {
    const l = {
      row: [],
      columns: {}
    };
    return o.forEach((a) => {
      const c = PQ(a, e);
      c !== -1 ? (l.columns[c] === void 0 && (l.columns[c] = []), l.columns[c].push(a)) : l.row.push(a);
    }), l;
  });
  return {
    root: i,
    rows: s
  };
}
function qa(t, e) {
  if (!(!e || e.length === 0))
    return e.length === 1 ? e[0] : {
      path: t,
      message: "Multiple validation issues: " + e.map((n) => wr(Ji(n.path)) + " " + n.message).join(", "),
      severity: Io.warning
    };
}
function RQ(t) {
  return parseInt(t.path[0], 10);
}
function PQ(t, e) {
  const n = el(t.path, e);
  return n.columnIndex !== -1 ? n.columnIndex : -1;
}
function IQ(t, e, n) {
  return e.some((r) => DQ(t.sortedColumn, r, n)) ? {
    ...t,
    sortedColumn: void 0
  } : t;
}
function DQ(t, e, n) {
  if (!t)
    return !1;
  if (e.op === "replace") {
    const i = Vr(e.path), { rowIndex: r, columnIndex: s } = el(i, n), o = n.findIndex((l) => At(l, t.path));
    if (r !== -1 && s !== -1 && s !== o)
      return !1;
  }
  return !0;
}
function NQ(t, e = 2) {
  const n = [];
  function i(r, s) {
    On(r) && s.length < e && Object.keys(r).forEach((o) => {
      i(r[o], s.concat(o));
    }), Ut(r) && n.push(s);
  }
  return i(t, []), n;
}
function eS(t, e, n) {
  const i = t.slice();
  return i[9] = e[n], i;
}
function tS(t) {
  let e, n, i;
  const r = [t[9].props];
  var s = t[9].component;
  function o(l) {
    let a = {};
    for (let c = 0; c < r.length; c += 1)
      a = Ko(a, r[c]);
    return { props: a };
  }
  return s && (e = vs(s, o())), {
    c() {
      e && ge(e.$$.fragment), n = rt();
    },
    m(l, a) {
      e && de(e, l, a), U(l, n, a), i = !0;
    },
    p(l, a) {
      const c = a & 1 ? Ul(r, [rp(l[9].props)]) : {};
      if (s !== (s = l[9].component)) {
        if (e) {
          Ae();
          const u = e;
          x(u.$$.fragment, 1, 0, () => {
            pe(u, 1);
          }), Me();
        }
        s ? (e = vs(s, o()), ge(e.$$.fragment), P(e.$$.fragment, 1), de(e, n.parentNode, n)) : e = null;
      } else
        s && e.$set(c);
    },
    i(l) {
      i || (e && P(e.$$.fragment, l), i = !0);
    },
    o(l) {
      e && x(e.$$.fragment, l), i = !1;
    },
    d(l) {
      l && V(n), e && pe(e, l);
    }
  };
}
function LQ(t) {
  let e, n, i = t[0], r = [];
  for (let o = 0; o < i.length; o += 1)
    r[o] = tS(eS(t, i, o));
  const s = (o) => x(r[o], 1, 1, () => {
    r[o] = null;
  });
  return {
    c() {
      for (let o = 0; o < r.length; o += 1)
        r[o].c();
      e = rt();
    },
    m(o, l) {
      for (let a = 0; a < r.length; a += 1)
        r[a].m(o, l);
      U(o, e, l), n = !0;
    },
    p(o, [l]) {
      if (l & 1) {
        i = o[0];
        let a;
        for (a = 0; a < i.length; a += 1) {
          const c = eS(o, i, a);
          r[a] ? (r[a].p(c, l), P(r[a], 1)) : (r[a] = tS(c), r[a].c(), P(r[a], 1), r[a].m(e.parentNode, e));
        }
        for (Ae(), a = i.length; a < r.length; a += 1)
          s(a);
        Me();
      }
    },
    i(o) {
      if (!n) {
        for (let l = 0; l < i.length; l += 1)
          P(r[l]);
        n = !0;
      }
    },
    o(o) {
      r = r.filter(Boolean);
      for (let l = 0; l < r.length; l += 1)
        x(r[l]);
      n = !1;
    },
    d(o) {
      xt(r, o), o && V(e);
    }
  };
}
function jQ(t, e, n) {
  let i, r, { path: s } = e, { value: o } = e, { context: l } = e, { enforceString: a } = e, { selection: c } = e, { searchResultItems: u } = e;
  function f(h, d) {
    return l.onPatch(fx(h, l.getJson()), d);
  }
  return t.$$set = (h) => {
    "path" in h && n(1, s = h.path), "value" in h && n(2, o = h.value), "context" in h && n(3, l = h.context), "enforceString" in h && n(4, a = h.enforceString), "selection" in h && n(5, c = h.selection), "searchResultItems" in h && n(6, u = h.searchResultItems);
  }, t.$$.update = () => {
    t.$$.dirty & 40 && n(7, i = !l.readOnly && Ct(c) && Lo(c)), t.$$.dirty & 254 && n(0, r = l.onRenderValue({
      path: s,
      value: o,
      readOnly: l.readOnly,
      enforceString: a,
      isEditing: i,
      parser: l.parser,
      normalization: l.normalization,
      selection: c,
      searchResultItems: u,
      onPatch: f,
      onPasteJson: l.onPasteJson,
      onSelect: l.onSelect,
      onFind: l.onFind,
      findNextInside: l.findNextInside,
      focus: l.focus
    }));
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    i
  ];
}
class BQ extends Ge {
  constructor(e) {
    super(), Ke(this, e, jQ, LQ, yt, {
      path: 1,
      value: 2,
      context: 3,
      enforceString: 4,
      selection: 5,
      searchResultItems: 6
    });
  }
}
const xQ = BQ;
function FQ(t) {
  let e, n = Cs(t[2].stringify(t[1]), my) + "", i, r, s;
  return {
    c() {
      e = j("button"), i = _e(n), b(e, "type", "button"), b(e, "class", "jse-inline-value svelte-l28mqd"), Se(e, "jse-selected", t[3]);
    },
    m(o, l) {
      U(o, e, l), E(e, i), r || (s = re(e, "dblclick", t[6]), r = !0);
    },
    p(o, [l]) {
      l & 6 && n !== (n = Cs(o[2].stringify(o[1]), my) + "") && ze(i, n), l & 8 && Se(e, "jse-selected", o[3]);
    },
    i: ye,
    o: ye,
    d(o) {
      o && V(e), r = !1, s();
    }
  };
}
function zQ(t, e, n) {
  let i, { path: r } = e, { value: s } = e, { parser: o } = e, { isSelected: l } = e, { onEdit: a } = e;
  const c = () => a(r);
  return t.$$set = (u) => {
    "path" in u && n(0, r = u.path), "value" in u && n(1, s = u.value), "parser" in u && n(2, o = u.parser), "isSelected" in u && n(3, l = u.isSelected), "onEdit" in u && n(4, a = u.onEdit);
  }, t.$$.update = () => {
    t.$$.dirty & 2 && n(5, i = Ut(s) ? s.length : Object.keys(s).length), t.$$.dirty & 34;
  }, [r, s, o, l, a, i, c];
}
class VQ extends Ge {
  constructor(e) {
    super(), Ke(this, e, zQ, FQ, Nt, {
      path: 0,
      value: 1,
      parser: 2,
      isSelected: 3,
      onEdit: 4
    });
  }
}
const UQ = VQ;
function nS(t) {
  let e, n, i, r;
  return n = new Et({
    props: {
      data: t[1] === pr.asc ? hr : Bw
    }
  }), {
    c() {
      e = j("span"), ge(n.$$.fragment), b(e, "class", "jse-column-sort-icon svelte-h4fort"), b(e, "title", i = `Currently sorted in ${t[2]} order`);
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), r = !0;
    },
    p(s, o) {
      const l = {};
      o & 2 && (l.data = s[1] === pr.asc ? hr : Bw), n.$set(l), (!r || o & 4 && i !== (i = `Currently sorted in ${s[2]} order`)) && b(e, "title", i);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function HQ(t) {
  let e, n, i = Cs(t[3], by) + "", r, s, o, l, a, c, u = t[1] !== void 0 && nS(t);
  return {
    c() {
      e = j("button"), n = j("span"), r = _e(i), s = Z(), u && u.c(), b(n, "class", "jse-column-name"), b(e, "type", "button"), b(e, "class", "jse-column-header svelte-h4fort"), b(e, "title", o = t[0] ? t[3] : t[3] + " (Click to sort the data by this column)"), Se(e, "jse-readonly", t[0]);
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(n, r), E(e, s), u && u.m(e, null), l = !0, a || (c = re(e, "click", t[4]), a = !0);
    },
    p(f, [h]) {
      (!l || h & 8) && i !== (i = Cs(f[3], by) + "") && ze(r, i), f[1] !== void 0 ? u ? (u.p(f, h), h & 2 && P(u, 1)) : (u = nS(f), u.c(), P(u, 1), u.m(e, null)) : u && (Ae(), x(u, 1, 1, () => {
        u = null;
      }), Me()), (!l || h & 9 && o !== (o = f[0] ? f[3] : f[3] + " (Click to sort the data by this column)")) && b(e, "title", o), (!l || h & 1) && Se(e, "jse-readonly", f[0]);
    },
    i(f) {
      l || (P(u), l = !0);
    },
    o(f) {
      x(u), l = !1;
    },
    d(f) {
      f && V(e), u && u.d(), a = !1, c();
    }
  };
}
function WQ(t, e, n) {
  let i, r, s, { path: o } = e, { sortedColumn: l } = e, { readOnly: a } = e, { onSort: c } = e;
  function u() {
    a || c({
      path: o,
      sortDirection: r === pr.asc ? pr.desc : pr.asc
    });
  }
  return t.$$set = (f) => {
    "path" in f && n(5, o = f.path), "sortedColumn" in f && n(6, l = f.sortedColumn), "readOnly" in f && n(0, a = f.readOnly), "onSort" in f && n(7, c = f.onSort);
  }, t.$$.update = () => {
    t.$$.dirty & 32 && n(3, i = Ot(o) ? "values" : wr(Ji(o))), t.$$.dirty & 96 && n(1, r = At(o, l == null ? void 0 : l.path) ? l.sortDirection : void 0), t.$$.dirty & 2 && n(2, s = wR[r]);
  }, [
    a,
    r,
    s,
    i,
    u,
    o,
    l,
    c
  ];
}
class qQ extends Ge {
  constructor(e) {
    super(), Ke(this, e, WQ, HQ, Nt, {
      path: 5,
      sortedColumn: 6,
      readOnly: 0,
      onSort: 7
    });
  }
}
const JQ = qQ;
let Xf, Qf;
function QA(t, e) {
  return Xf || (Qf = /* @__PURE__ */ new WeakMap(), Xf = new ResizeObserver((n) => {
    for (const i of n) {
      const r = Qf.get(i.target);
      r && r(i.target);
    }
  })), Qf.set(t, e), Xf.observe(t), {
    destroy: () => {
      Qf.delete(t), Xf.unobserve(t);
    }
  };
}
function KQ(t) {
  let e, n;
  return e = new G6({
    props: {
      items: t[1],
      tip: t[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2 && (s.items = i[1]), r[0] & 1 && (s.tip = i[0] ? "Tip: you can open this context menu via right-click or with Ctrl+Q" : void 0), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function GQ(t, e, n) {
  let i, r, s, o, l, a, c, u, f, h, d, { json: p } = e, { documentState: g } = e, { parser: m } = e, { showTip: _ } = e, { onCloseContextMenu: S } = e, { onEditValue: v } = e, { onToggleEnforceString: k } = e, { onCut: C } = e, { onCopy: A } = e, { onPaste: w } = e, { onRemove: M } = e;
  function N() {
    S(), v();
  }
  function T() {
    S(), k();
  }
  function O() {
    S(), C(!0);
  }
  function W() {
    S(), C(!1);
  }
  function H() {
    S(), A(!0);
  }
  function I() {
    S(), A(!1);
  }
  function z() {
    S(), w();
  }
  function L() {
    S(), M();
  }
  let K;
  return t.$$set = (F) => {
    "json" in F && n(2, p = F.json), "documentState" in F && n(3, g = F.documentState), "parser" in F && n(4, m = F.parser), "showTip" in F && n(0, _ = F.showTip), "onCloseContextMenu" in F && n(5, S = F.onCloseContextMenu), "onEditValue" in F && n(6, v = F.onEditValue), "onToggleEnforceString" in F && n(7, k = F.onToggleEnforceString), "onCut" in F && n(8, C = F.onCut), "onCopy" in F && n(9, A = F.onCopy), "onPaste" in F && n(10, w = F.onPaste), "onRemove" in F && n(11, M = F.onRemove);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 8 && n(18, i = g.selection), t.$$.dirty[0] & 4 && n(21, r = p !== void 0), t.$$.dirty[0] & 262144 && n(13, s = i != null), t.$$.dirty[0] & 270336 && n(22, o = s && Ot(i.focusPath)), t.$$.dirty[0] & 270340 && n(19, l = s ? Ye(p, i.focusPath) : void 0), t.$$.dirty[0] & 524288 && n(17, a = Array.isArray(l) ? "Edit array" : An(l) ? "Edit object" : "Edit value"), t.$$.dirty[0] & 2359296 && n(12, c = r && (Dt(i) || Nn(i) || Ct(i))), t.$$.dirty[0] & 6295552, t.$$.dirty[0] & 6553600 && r && i != null && (Dt(i) || Ct(i)), t.$$.dirty[0] & 6553604 && r && i != null && su(i) && !o && Array.isArray(Ye(p, St(i.focusPath))), t.$$.dirty[0] & 2359296 && n(16, u = r && i != null && su(i)), t.$$.dirty[0] & 589824 && n(14, f = u && !dn(l)), t.$$.dirty[0] & 4096 && n(20, h = c), t.$$.dirty[0] & 1048576, t.$$.dirty[0] & 1056768, t.$$.dirty[0] & 1843200 && h && _l(i) && An(l), t.$$.dirty[0] & 1843200 && h && _l(i) && Array.isArray(l), t.$$.dirty[0] & 1843200 && h && _l(i) && dn(l), t.$$.dirty[0] & 786456 && n(15, d = i != null ? Qs(l, g.enforceStringMap, xe(i.focusPath), m) : !1), t.$$.dirty[0] & 258048 && n(1, K = [
      {
        type: "row",
        items: [
          {
            type: "column",
            items: [
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: N,
                  icon: Bc,
                  text: a,
                  title: "Edit the value (Double-click on the value)",
                  disabled: !u
                },
                width: "11em",
                items: [
                  {
                    type: "button",
                    icon: Bc,
                    text: a,
                    title: "Edit the value (Double-click on the value)",
                    onClick: N,
                    disabled: !u
                  },
                  {
                    type: "button",
                    icon: d ? nu : iu,
                    text: "Enforce string",
                    title: "Enforce keeping the value as string when it contains a numeric value",
                    onClick: T,
                    disabled: !f
                  }
                ]
              },
              { type: "separator" },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: O,
                  icon: ga,
                  text: "Cut",
                  title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                  disabled: !c
                },
                width: "10em",
                items: [
                  {
                    type: "button",
                    icon: ga,
                    text: "Cut formatted",
                    title: "Cut selected contents, formatted with indentation (Ctrl+X)",
                    onClick: O,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: ga,
                    text: "Cut compacted",
                    title: "Cut selected contents, without indentation (Ctrl+Shift+X)",
                    onClick: W,
                    disabled: !c
                  }
                ]
              },
              {
                type: "dropdown-button",
                main: {
                  type: "button",
                  onClick: H,
                  icon: Oo,
                  text: "Copy",
                  title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                  disabled: !c
                },
                width: "12em",
                items: [
                  {
                    type: "button",
                    icon: Oo,
                    text: "Copy formatted",
                    title: "Copy selected contents, formatted with indentation (Ctrl+C)",
                    onClick: H,
                    disabled: !c
                  },
                  {
                    type: "button",
                    icon: Oo,
                    text: "Copy compacted",
                    title: "Copy selected contents, without indentation (Ctrl+Shift+C)",
                    onClick: I,
                    disabled: !c
                  }
                ]
              },
              {
                type: "button",
                onClick: z,
                icon: P6,
                text: "Paste",
                title: "Paste clipboard contents (Ctrl+V)",
                disabled: !s
              },
              { type: "separator" },
              {
                type: "button",
                onClick: L,
                icon: oc,
                text: "Remove",
                title: "Remove selected contents (Delete)",
                disabled: !c
              }
            ]
          }
        ]
      }
    ]);
  }, [
    _,
    K,
    p,
    g,
    m,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    c,
    s,
    f,
    d,
    u,
    a,
    i,
    l,
    h,
    r,
    o
  ];
}
class YQ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      GQ,
      KQ,
      yt,
      {
        json: 2,
        documentState: 3,
        parser: 4,
        showTip: 0,
        onCloseContextMenu: 5,
        onEditValue: 6,
        onToggleEnforceString: 7,
        onCut: 8,
        onCopy: 9,
        onPaste: 10,
        onRemove: 11
      },
      null,
      [-1, -1]
    );
  }
}
const XQ = YQ;
function iS(t, e, n) {
  const i = t.slice();
  i[12] = e[n];
  const r = Ye(i[0], i[12]).length;
  return i[13] = r, i;
}
function QQ(t) {
  let e, n;
  return {
    c() {
      e = _e(t[5]), n = _e(" cannot be opened in table mode. You can open the document in tree mode instead.");
    },
    m(i, r) {
      U(i, e, r), U(i, n, r);
    },
    p(i, r) {
      r & 32 && ze(e, i[5]);
    },
    d(i) {
      i && V(e), i && V(n);
    }
  };
}
function ZQ(t) {
  let e;
  return {
    c() {
      e = _e(`An object cannot be opened in table mode. You can open a nested array instead, or open the
        document in tree mode.`);
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function rS(t) {
  let e, n, i, r = wr(Ji(t[12])) + "", s, o, l, a, c = t[13] + "", u, f, h = t[13] !== 1 ? "items" : "item", d, p, g, m;
  function _() {
    return t[10](t[12]);
  }
  return {
    c() {
      e = j("button"), n = _e(t[6]), i = _e(' "'), s = _e(r), o = _e(`"
        `), l = j("span"), a = _e("("), u = _e(c), f = Z(), d = _e(h), p = _e(")"), b(l, "class", "jse-nested-array-count svelte-1te5h1h"), b(e, "type", "button"), b(e, "class", "jse-nested-array-action svelte-1te5h1h");
    },
    m(S, v) {
      U(S, e, v), E(e, n), E(e, i), E(e, s), E(e, o), E(e, l), E(l, a), E(l, u), E(l, f), E(l, d), E(l, p), g || (m = re(e, "click", _), g = !0);
    },
    p(S, v) {
      t = S, v & 64 && ze(n, t[6]), v & 8 && r !== (r = wr(Ji(t[12])) + "") && ze(s, r), v & 9 && c !== (c = t[13] + "") && ze(u, c), v & 9 && h !== (h = t[13] !== 1 ? "items" : "item") && ze(d, h);
    },
    d(S) {
      S && V(e), g = !1, m();
    }
  };
}
function $Q(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _;
  function S(w, M) {
    return w[4] ? ZQ : QQ;
  }
  let v = S(t), k = v(t), C = t[3], A = [];
  for (let w = 0; w < C.length; w += 1)
    A[w] = rS(iS(t, C, w));
  return {
    c() {
      e = j("div"), n = j("div"), i = Z(), r = j("div"), s = j("div"), o = _e(t[5]), l = Z(), a = j("div"), k.c(), c = Z();
      for (let w = 0; w < A.length; w += 1)
        A[w].c();
      u = Z(), f = j("button"), h = _e(t[6]), d = _e(" in tree mode"), p = Z(), g = j("div"), b(n, "class", "jse-space jse-before svelte-1te5h1h"), b(s, "class", "jse-nested-arrays-title"), b(a, "class", "jse-nested-arrays-info svelte-1te5h1h"), b(f, "type", "button"), b(f, "class", "jse-nested-array-action svelte-1te5h1h"), b(r, "class", "jse-nested-arrays svelte-1te5h1h"), b(g, "class", "jse-space jse-after svelte-1te5h1h"), b(e, "class", "jse-table-mode-welcome svelte-1te5h1h");
    },
    m(w, M) {
      U(w, e, M), E(e, n), E(e, i), E(e, r), E(r, s), E(s, o), E(r, l), E(r, a), k.m(a, null), E(r, c);
      for (let N = 0; N < A.length; N += 1)
        A[N].m(r, null);
      E(r, u), E(r, f), E(f, h), E(f, d), E(e, p), E(e, g), m || (_ = re(f, "click", t[11]), m = !0);
    },
    p(w, [M]) {
      if (M & 32 && ze(o, w[5]), v === (v = S(w)) && k ? k.p(w, M) : (k.d(1), k = v(w), k && (k.c(), k.m(a, null))), M & 75) {
        C = w[3];
        let N;
        for (N = 0; N < C.length; N += 1) {
          const T = iS(w, C, N);
          A[N] ? A[N].p(T, M) : (A[N] = rS(T), A[N].c(), A[N].m(r, u));
        }
        for (; N < A.length; N += 1)
          A[N].d(1);
        A.length = C.length;
      }
      M & 64 && ze(h, w[6]);
    },
    i: ye,
    o: ye,
    d(w) {
      w && V(e), k.d(), xt(A, w), m = !1, _();
    }
  };
}
function eZ(t, e, n) {
  let i, r, s, { text: o } = e, { json: l } = e, { readOnly: a } = e, { parser: c } = e, { openJSONEditorModal: u } = e, { onChangeMode: f } = e, h;
  const d = (g) => u(g), p = () => f(ki.tree);
  return t.$$set = (g) => {
    "text" in g && n(7, o = g.text), "json" in g && n(0, l = g.json), "readOnly" in g && n(8, a = g.readOnly), "parser" in g && n(9, c = g.parser), "openJSONEditorModal" in g && n(1, u = g.openJSONEditorModal), "onChangeMode" in g && n(2, f = g.onChangeMode);
  }, t.$$.update = () => {
    t.$$.dirty & 256 && n(6, i = a ? "View" : "Edit"), t.$$.dirty & 1 && n(3, h = l ? NQ(l).slice(0, 99).filter((g) => g.length > 0) : []), t.$$.dirty & 8 && n(4, r = !Ot(h)), t.$$.dirty & 657 && n(5, s = r ? "Object with nested arrays" : l === void 0 && (o === "" || o === void 0) ? "An empty document" : On(l) ? "An object" : Ut(l) ? "An empty array" : `A ${j0(l, c)}`);
  }, [
    l,
    u,
    f,
    h,
    r,
    s,
    i,
    o,
    a,
    c,
    d,
    p
  ];
}
class tZ extends Ge {
  constructor(e) {
    super(), Ke(this, e, eZ, $Q, Nt, {
      text: 7,
      json: 0,
      readOnly: 8,
      parser: 9,
      openJSONEditorModal: 1,
      onChangeMode: 2
    });
  }
}
const nZ = tZ;
function sS(t, e, n) {
  const i = t.slice();
  i[112] = e[n], i[116] = n;
  const r = i[21].startIndex + i[116];
  i[113] = r;
  const s = i[20].rows[i[113]];
  return i[114] = s, i;
}
function oS(t, e, n) {
  var a;
  const i = t.slice();
  i[117] = e[n], i[123] = n;
  const r = [String(i[113])].concat(i[117]);
  i[118] = r;
  const s = Ye(i[112], i[117]);
  i[119] = s;
  const o = i[44](i[118], i[9].selection);
  i[120] = o;
  const l = (a = i[114]) == null ? void 0 : a.columns[i[123]];
  return i[121] = l, i;
}
function lS(t, e, n) {
  const i = t.slice();
  return i[117] = e[n], i;
}
function aS(t) {
  let e, n;
  return e = new yQ({
    props: {
      json: t[7],
      readOnly: t[0],
      historyState: t[18],
      onSort: t[38],
      onTransform: t[39],
      onUndo: t[40],
      onRedo: t[41],
      onContextMenu: t[30],
      onRenderMenu: t[5]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 128 && (s.json = i[7]), r[0] & 1 && (s.readOnly = i[0]), r[0] & 262144 && (s.historyState = i[18]), r[0] & 32 && (s.onRenderMenu = i[5]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function iZ(t) {
  let e;
  return {
    c() {
      e = j("div"), e.innerHTML = `<div class="jse-loading-space svelte-hs49xj"></div> 
      <div class="jse-loading svelte-hs49xj">loading...</div>`, b(e, "class", "jse-contents jse-contents-loading svelte-hs49xj");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    i: ye,
    o: ye,
    d(n) {
      n && V(e);
    }
  };
}
function rZ(t) {
  let e, n, i, r, s, o, l, a, c;
  const u = [lZ, oZ, sZ], f = [];
  function h(d, p) {
    return d[22] ? 0 : d[15] && d[14] !== void 0 && d[14] !== "" ? 1 : 2;
  }
  return r = h(t), s = f[r] = u[r](t), {
    c() {
      e = j("label"), n = j("input"), i = Z(), s.c(), o = rt(), b(n, "type", "text"), n.readOnly = "readonly", b(n, "tabindex", "-1"), b(n, "class", "jse-hidden-input svelte-hs49xj"), b(e, "class", "jse-hidden-input-label svelte-hs49xj");
    },
    m(d, p) {
      U(d, e, p), E(e, n), t[69](n), U(d, i, p), f[r].m(d, p), U(d, o, p), l = !0, a || (c = re(n, "paste", t[35]), a = !0);
    },
    p(d, p) {
      let g = r;
      r = h(d), r === g ? f[r].p(d, p) : (Ae(), x(f[g], 1, 1, () => {
        f[g] = null;
      }), Me(), s = f[r], s ? s.p(d, p) : (s = f[r] = u[r](d), s.c()), P(s, 1), s.m(o.parentNode, o));
    },
    i(d) {
      l || (P(s), l = !0);
    },
    o(d) {
      x(s), l = !1;
    },
    d(d) {
      d && V(e), t[69](null), d && V(i), f[r].d(d), d && V(o), a = !1, c();
    }
  };
}
function sZ(t) {
  let e, n;
  return e = new nZ({
    props: {
      text: t[14],
      json: t[7],
      readOnly: t[0],
      parser: t[2],
      openJSONEditorModal: t[37],
      onChangeMode: t[4]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 16384 && (s.text = i[14]), r[0] & 128 && (s.json = i[7]), r[0] & 1 && (s.readOnly = i[0]), r[0] & 4 && (s.parser = i[2]), r[0] & 16 && (s.onChangeMode = i[4]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function oZ(t) {
  let e, n, i, r;
  return e = new Ns({
    props: {
      type: "error",
      message: "The loaded JSON document is invalid and could not be repaired automatically.",
      actions: t[0] ? [] : [
        {
          icon: jo,
          text: "Repair manually",
          onClick: t[33]
        }
      ]
    }
  }), i = new i8({
    props: {
      text: t[14] || "",
      json: t[7],
      indentation: t[3],
      parser: t[2]
    }
  }), {
    c() {
      ge(e.$$.fragment), n = Z(), ge(i.$$.fragment);
    },
    m(s, o) {
      de(e, s, o), U(s, n, o), de(i, s, o), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 1 && (l.actions = s[0] ? [] : [
        {
          icon: jo,
          text: "Repair manually",
          onClick: s[33]
        }
      ]), e.$set(l);
      const a = {};
      o[0] & 16384 && (a.text = s[14] || ""), o[0] & 128 && (a.json = s[7]), o[0] & 8 && (a.indentation = s[3]), o[0] & 4 && (a.parser = s[2]), i.$set(a);
    },
    i(s) {
      r || (P(e.$$.fragment, s), P(i.$$.fragment, s), r = !0);
    },
    o(s) {
      x(e.$$.fragment, s), x(i.$$.fragment, s), r = !1;
    },
    d(s) {
      pe(e, s), s && V(n), pe(i, s);
    }
  };
}
function lZ(t) {
  var K;
  let e, n, i, r, s, o = !Ot((K = t[20]) == null ? void 0 : K.root), l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M = o && cS(t), N = t[8], T = [];
  for (let F = 0; F < N.length; F += 1)
    T[F] = uS(lS(t, N, F));
  const O = (F) => x(T[F], 1, 1, () => {
    T[F] = null;
  });
  let W = t[21].visibleItems, H = [];
  for (let F = 0; F < W.length; F += 1)
    H[F] = mS(sS(t, W, F));
  const I = (F) => x(H[F], 1, 1, () => {
    H[F] = null;
  });
  let z = t[16] && bS(t), L = t[17] && _S(t);
  return k = new lb({
    props: {
      validationErrors: t[10],
      selectError: t[36]
    }
  }), {
    c() {
      e = j("div"), n = j("table"), i = j("tbody"), r = j("tr"), s = j("th"), M && M.c(), l = Z();
      for (let F = 0; F < T.length; F += 1)
        T[F].c();
      a = Z(), c = j("tr"), u = j("td"), h = Z();
      for (let F = 0; F < H.length; F += 1)
        H[F].c();
      d = Z(), p = j("tr"), g = j("td"), _ = Z(), z && z.c(), S = Z(), L && L.c(), v = Z(), ge(k.$$.fragment), b(s, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj"), b(r, "class", "jse-table-row jse-table-row-header svelte-hs49xj"), b(u, "colspan", f = t[8].length), b(u, "class", "svelte-hs49xj"), Ni(u, "height", t[21].startHeight + "px"), b(c, "class", "jse-table-invisible-start-section"), b(g, "colspan", m = t[8].length), b(g, "class", "svelte-hs49xj"), Ni(g, "height", t[21].endHeight + "px"), b(p, "class", "jse-table-invisible-end-section"), b(n, "class", "jse-table-main svelte-hs49xj"), b(n, "cellpadding", "0"), b(n, "cellspacing", "0"), b(e, "class", "jse-contents svelte-hs49xj");
    },
    m(F, D) {
      U(F, e, D), E(e, n), E(n, i), E(i, r), E(r, s), M && M.m(s, null), E(r, l);
      for (let X = 0; X < T.length; X += 1)
        T[X].m(r, null);
      E(i, a), E(i, c), E(c, u), E(i, h);
      for (let X = 0; X < H.length; X += 1)
        H[X].m(i, null);
      E(i, d), E(i, p), E(p, g), t[71](e), U(F, _, D), z && z.m(F, D), U(F, S, D), L && L.m(F, D), U(F, v, D), de(k, F, D), C = !0, A || (w = [
        qi(QA.call(null, e, t[42])),
        re(e, "scroll", t[26])
      ], A = !0);
    },
    p(F, D) {
      var ue;
      if (D[0] & 1048576 && (o = !Ot((ue = F[20]) == null ? void 0 : ue.root)), o ? M ? (M.p(F, D), D[0] & 1048576 && P(M, 1)) : (M = cS(F), M.c(), P(M, 1), M.m(s, null)) : M && (Ae(), x(M, 1, 1, () => {
        M = null;
      }), Me()), D[0] & 33555201) {
        N = F[8];
        let q;
        for (q = 0; q < N.length; q += 1) {
          const ee = lS(F, N, q);
          T[q] ? (T[q].p(ee, D), P(T[q], 1)) : (T[q] = uS(ee), T[q].c(), P(T[q], 1), T[q].m(r, null));
        }
        for (Ae(), q = N.length; q < T.length; q += 1)
          O(q);
        Me();
      }
      if ((!C || D[0] & 256 && f !== (f = F[8].length)) && b(u, "colspan", f), D[0] & 2097152 && Ni(u, "height", F[21].startHeight + "px"), D[0] & 288883461 | D[1] & 12352) {
        W = F[21].visibleItems;
        let q;
        for (q = 0; q < W.length; q += 1) {
          const ee = sS(F, W, q);
          H[q] ? (H[q].p(ee, D), P(H[q], 1)) : (H[q] = mS(ee), H[q].c(), P(H[q], 1), H[q].m(i, d));
        }
        for (Ae(), q = W.length; q < H.length; q += 1)
          I(q);
        Me();
      }
      (!C || D[0] & 256 && m !== (m = F[8].length)) && b(g, "colspan", m), D[0] & 2097152 && Ni(g, "height", F[21].endHeight + "px"), F[16] ? z ? (z.p(F, D), D[0] & 65536 && P(z, 1)) : (z = bS(F), z.c(), P(z, 1), z.m(S.parentNode, S)) : z && (Ae(), x(z, 1, 1, () => {
        z = null;
      }), Me()), F[17] ? L ? (L.p(F, D), D[0] & 131072 && P(L, 1)) : (L = _S(F), L.c(), P(L, 1), L.m(v.parentNode, v)) : L && (Ae(), x(L, 1, 1, () => {
        L = null;
      }), Me());
      const X = {};
      D[0] & 1024 && (X.validationErrors = F[10]), k.$set(X);
    },
    i(F) {
      if (!C) {
        P(M);
        for (let D = 0; D < N.length; D += 1)
          P(T[D]);
        for (let D = 0; D < W.length; D += 1)
          P(H[D]);
        P(z), P(L), P(k.$$.fragment, F), C = !0;
      }
    },
    o(F) {
      x(M), T = T.filter(Boolean);
      for (let D = 0; D < T.length; D += 1)
        x(T[D]);
      H = H.filter(Boolean);
      for (let D = 0; D < H.length; D += 1)
        x(H[D]);
      x(z), x(L), x(k.$$.fragment, F), C = !1;
    },
    d(F) {
      F && V(e), M && M.d(), xt(T, F), xt(H, F), t[71](null), F && V(_), z && z.d(F), F && V(S), L && L.d(F), F && V(v), pe(k, F), A = !1, ct(w);
    }
  };
}
function cS(t) {
  var r;
  let e, n, i;
  return n = new lc({
    props: {
      validationError: qa([], (r = t[20]) == null ? void 0 : r.root),
      onExpand: rs
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), b(e, "class", "jse-table-root-error svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), i = !0;
    },
    p(s, o) {
      var a;
      const l = {};
      o[0] & 1048576 && (l.validationError = qa([], (a = s[20]) == null ? void 0 : a.root)), n.$set(l);
    },
    i(s) {
      i || (P(n.$$.fragment, s), i = !0);
    },
    o(s) {
      x(n.$$.fragment, s), i = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function uS(t) {
  let e, n, i, r;
  return n = new JQ({
    props: {
      path: t[117],
      sortedColumn: t[9].sortedColumn,
      readOnly: t[0],
      onSort: t[25]
    }
  }), {
    c() {
      e = j("th"), ge(n.$$.fragment), i = Z(), b(e, "class", "jse-table-cell jse-table-cell-header svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), E(e, i), r = !0;
    },
    p(s, o) {
      const l = {};
      o[0] & 256 && (l.path = s[117]), o[0] & 512 && (l.sortedColumn = s[9].sortedColumn), o[0] & 1 && (l.readOnly = s[0]), n.$set(l);
    },
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n);
    }
  };
}
function fS(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: qa([String(t[113])], t[114].row),
      onExpand: rs
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 3145728 && (s.validationError = qa([String(i[113])], i[114].row)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function hS(t) {
  var h;
  let e, n = t[113] + 1 + "", i, r, s = !Ot((h = t[114]) == null ? void 0 : h.row), o, l, a, c, u = s && fS(t);
  function f(...d) {
    return t[70](t[113], ...d);
  }
  return {
    c() {
      e = j("th"), i = _e(n), r = Z(), u && u.c(), b(e, "class", "jse-table-cell jse-table-cell-gutter svelte-hs49xj");
    },
    m(d, p) {
      U(d, e, p), E(e, i), E(e, r), u && u.m(e, null), l = !0, a || (c = qi(o = QA.call(null, e, f)), a = !0);
    },
    p(d, p) {
      var g;
      t = d, (!l || p[0] & 2097152) && n !== (n = t[113] + 1 + "") && ze(i, n), p[0] & 3145728 && (s = !Ot((g = t[114]) == null ? void 0 : g.row)), s ? u ? (u.p(t, p), p[0] & 3145728 && P(u, 1)) : (u = fS(t), u.c(), P(u, 1), u.m(e, null)) : u && (Ae(), x(u, 1, 1, () => {
        u = null;
      }), Me()), o && hi(o.update) && p[0] & 2097152 && o.update.call(null, f);
    },
    i(d) {
      l || (P(u), l = !0);
    },
    o(d) {
      x(u), l = !1;
    },
    d(d) {
      d && V(e), u && u.d(), a = !1, c();
    }
  };
}
function aZ(t) {
  let e, n;
  return e = new xQ({
    props: {
      path: t[118],
      value: t[119] !== void 0 ? t[119] : "",
      enforceString: Qs(t[119], t[9].enforceStringMap, xe(t[118]), t[19].parser),
      selection: t[120] ? t[9].selection : void 0,
      searchResultItems: t[24],
      context: t[19]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2097408 && (s.path = i[118]), r[0] & 2097408 && (s.value = i[119] !== void 0 ? i[119] : ""), r[0] & 2622208 && (s.enforceString = Qs(i[119], i[9].enforceStringMap, xe(i[118]), i[19].parser)), r[0] & 2097920 && (s.selection = i[120] ? i[9].selection : void 0), r[0] & 524288 && (s.context = i[19]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function cZ(t) {
  let e, n;
  return e = new UQ({
    props: {
      path: t[118],
      value: t[119],
      parser: t[2],
      isSelected: t[120],
      onEdit: t[37]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 2097408 && (s.path = i[118]), r[0] & 2097408 && (s.value = i[119]), r[0] & 4 && (s.parser = i[2]), r[0] & 2097920 && (s.isSelected = i[120]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function dS(t) {
  let e, n, i, r;
  return n = new Xo({
    props: {
      selected: !0,
      onContextMenu: t[28]
    }
  }), {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), b(e, "class", "jse-context-menu-anchor svelte-hs49xj");
    },
    m(s, o) {
      U(s, e, o), de(n, e, null), U(s, i, o), r = !0;
    },
    p: ye,
    i(s) {
      r || (P(n.$$.fragment, s), r = !0);
    },
    o(s) {
      x(n.$$.fragment, s), r = !1;
    },
    d(s) {
      s && V(e), pe(n), s && V(i);
    }
  };
}
function pS(t) {
  let e, n;
  return e = new lc({
    props: {
      validationError: qa(t[118], t[121]),
      onExpand: rs
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 3145984 && (s.validationError = qa(i[118], i[121])), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function gS(t) {
  let e, n, i, r, s, o, l = !Ot(t[121]), a, c;
  const u = [cZ, aZ], f = [];
  function h(g, m) {
    return m[0] & 2097408 && (n = null), n == null && (n = !!dn(g[119])), n ? 0 : 1;
  }
  i = h(t, [-1, -1, -1, -1, -1]), r = f[i] = u[i](t);
  let d = !t[0] && t[120] && !t[9].selection.edit && dS(t), p = l && pS(t);
  return {
    c() {
      e = j("td"), r.c(), s = rt(), d && d.c(), o = rt(), p && p.c(), b(e, "class", "jse-table-cell svelte-hs49xj"), b(e, "data-path", a = Da(t[118])), Se(e, "jse-selected-value", t[120] && Ct(t[9].selection));
    },
    m(g, m) {
      U(g, e, m), f[i].m(e, null), E(e, s), d && d.m(e, null), E(e, o), p && p.m(e, null), c = !0;
    },
    p(g, m) {
      let _ = i;
      i = h(g, m), i === _ ? f[i].p(g, m) : (Ae(), x(f[_], 1, 1, () => {
        f[_] = null;
      }), Me(), r = f[i], r ? r.p(g, m) : (r = f[i] = u[i](g), r.c()), P(r, 1), r.m(e, s)), !g[0] && g[120] && !g[9].selection.edit ? d ? (d.p(g, m), m[0] & 2097921 && P(d, 1)) : (d = dS(g), d.c(), P(d, 1), d.m(e, o)) : d && (Ae(), x(d, 1, 1, () => {
        d = null;
      }), Me()), m[0] & 3145728 && (l = !Ot(g[121])), l ? p ? (p.p(g, m), m[0] & 3145728 && P(p, 1)) : (p = pS(g), p.c(), P(p, 1), p.m(e, null)) : p && (Ae(), x(p, 1, 1, () => {
        p = null;
      }), Me()), (!c || m[0] & 2097408 && a !== (a = Da(g[118]))) && b(e, "data-path", a), (!c || m[0] & 2097920 | m[1] & 8192) && Se(e, "jse-selected-value", g[120] && Ct(g[9].selection));
    },
    i(g) {
      c || (P(r), P(d), P(p), c = !0);
    },
    o(g) {
      x(r), x(d), x(p), c = !1;
    },
    d(g) {
      g && V(e), f[i].d(), d && d.d(), p && p.d();
    }
  };
}
function mS(t) {
  let e, n = t[113], i, r, s = hS(t), o = t[8], l = [];
  for (let c = 0; c < o.length; c += 1)
    l[c] = gS(oS(t, o, c));
  const a = (c) => x(l[c], 1, 1, () => {
    l[c] = null;
  });
  return {
    c() {
      e = j("tr"), s.c(), i = Z();
      for (let c = 0; c < l.length; c += 1)
        l[c].c();
      b(e, "class", "jse-table-row svelte-hs49xj");
    },
    m(c, u) {
      U(c, e, u), s.m(e, null), E(e, i);
      for (let f = 0; f < l.length; f += 1)
        l[f].m(e, null);
      r = !0;
    },
    p(c, u) {
      if (u[0] & 2097152 && yt(n, n = c[113]) ? (Ae(), x(s, 1, 1, ye), Me(), s = hS(c), s.c(), P(s, 1), s.m(e, i)) : s.p(c, u), u[0] & 288883461 | u[1] & 8256) {
        o = c[8];
        let f;
        for (f = 0; f < o.length; f += 1) {
          const h = oS(c, o, f);
          l[f] ? (l[f].p(h, u), P(l[f], 1)) : (l[f] = gS(h), l[f].c(), P(l[f], 1), l[f].m(e, null));
        }
        for (Ae(), f = o.length; f < l.length; f += 1)
          a(f);
        Me();
      }
    },
    i(c) {
      if (!r) {
        P(s);
        for (let u = 0; u < o.length; u += 1)
          P(l[u]);
        r = !0;
      }
    },
    o(c) {
      x(s), l = l.filter(Boolean);
      for (let u = 0; u < l.length; u += 1)
        x(l[u]);
      r = !1;
    },
    d(c) {
      c && V(e), s.d(c), xt(l, c);
    }
  };
}
function bS(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "info",
      message: `You pasted a JSON ${Array.isArray(t[16].contents) ? "array" : "object"} as text`,
      actions: [
        {
          icon: Ap,
          text: "Paste as JSON instead",
          onMouseDown: t[31]
        },
        {
          text: "Leave as is",
          onClick: t[32]
        }
      ]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 65536 && (s.message = `You pasted a JSON ${Array.isArray(i[16].contents) ? "array" : "object"} as text`), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function _S(t) {
  let e, n;
  return e = new Ns({
    props: {
      type: "success",
      message: "The loaded JSON document was invalid but is successfully repaired.",
      actions: t[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: t[6]
        },
        {
          icon: jo,
          text: "Repair manually instead",
          onClick: t[33]
        }
      ]
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.actions = i[0] ? [] : [
        {
          icon: ou,
          text: "Ok",
          onClick: i[6]
        },
        {
          icon: jo,
          text: "Repair manually instead",
          onClick: i[33]
        }
      ]), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function uZ(t) {
  let e, n, i, r, s, o, l, a = t[1] && aS(t);
  const c = [rZ, iZ], u = [];
  function f(h, d) {
    return h[23] ? 1 : 0;
  }
  return i = f(t), r = u[i] = c[i](t), {
    c() {
      e = j("div"), a && a.c(), n = Z(), r.c(), b(e, "class", "jse-table-mode svelte-hs49xj"), Se(e, "no-main-menu", !t[1]);
    },
    m(h, d) {
      U(h, e, d), a && a.m(e, null), E(e, n), u[i].m(e, null), t[72](e), s = !0, o || (l = [
        re(e, "mousedown", t[27]),
        re(e, "keydown", t[34]),
        re(e, "contextmenu", t[29])
      ], o = !0);
    },
    p(h, d) {
      h[1] ? a ? (a.p(h, d), d[0] & 2 && P(a, 1)) : (a = aS(h), a.c(), P(a, 1), a.m(e, n)) : a && (Ae(), x(a, 1, 1, () => {
        a = null;
      }), Me()), r.p(h, d), (!s || d[0] & 2) && Se(e, "no-main-menu", !h[1]);
    },
    i(h) {
      s || (P(a), P(r), s = !0);
    },
    o(h) {
      x(a), x(r), s = !1;
    },
    d(h) {
      h && V(e), a && a.d(), u[i].d(), t[72](null), o = !1, ct(l);
    }
  };
}
let ta = 18;
function fZ(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:TableMode"), { open: l } = gi("simple-modal"), { openAbsolutePopup: a, closeAbsolutePopup: c } = gi("absolute-popup"), u = U6(), f = Pa(), h = Pa(), d = typeof window > "u";
  o("isSSR:", d);
  let { readOnly: p } = e, { externalContent: g } = e, { mainMenuBar: m } = e, { escapeControlCharacters: _ } = e, { escapeUnicodeCharacters: S } = e, { flattenColumns: v } = e, { parser: k } = e, { parseMemoizeOne: C } = e, { validator: A } = e, { validationParser: w } = e, { indentation: M } = e, { onChange: N } = e, { onChangeMode: T } = e, { onRenderValue: O } = e, { onRenderMenu: W } = e, { onFocus: H } = e, { onBlur: I } = e, { onSortModal: z } = e, { onTransformModal: L } = e, { onJSONEditorModal: K } = e, F, D, X, ue;
  ob({
    onMount: or,
    onDestroy: ks,
    getWindow: () => sc(D),
    hasFocus: () => Ie && document.hasFocus() || Yh(D),
    onFocus: () => {
      Xe = !0, H && H();
    },
    onBlur: () => {
      Xe = !1, I && I();
    }
  });
  let q, ee, ie, ne, je, Ie = !1, Xe = !1, le = {}, Ne = 600, nt = 0;
  function ke(te) {
    X && X.scrollTo({
      top: X.scrollTop,
      left: X.scrollLeft
    });
  }
  function fe() {
    $.sortedColumn && n(9, $ = {
      ...$,
      sortedColumn: void 0
    });
  }
  function Pe(te) {
    o("updateSelection", te);
    const Te = typeof te == "function" ? te($.selection) : te;
    At(Te, $.selection) || n(9, $ = {
      ...$,
      selection: Te
    });
  }
  function ae(te) {
    $.selection !== void 0 && ($.selection && gr(te, $.selection.anchorPath) && gr(te, $.selection.focusPath) || (o("clearing selection: path does not exist anymore", $.selection), n(9, $ = {
      ...$,
      selection: ia(te, $)
    })));
  }
  let $ = Qh(), he = !1;
  const Ce = void 0;
  function J(te) {
    if (p)
      return;
    o("onSortByHeader", te);
    const Te = [], be = te.sortDirection === pr.desc ? -1 : 1, Oe = X6(q, Te, te.path, be);
    Be(Oe, (Qe, Zt) => ({
      state: {
        ...Zt,
        sortedColumn: te
      }
    }));
  }
  const y = H6({
    onChange: (te) => {
      n(18, R = te);
    }
  });
  let R = y.getState(), B;
  function Q(te) {
    const Te = { json: q }, be = Ia(te) ? te.text !== ee : !At(Te.json, te.json);
    if (o("update external content", { isChanged: be }), !be)
      return;
    const Oe = { json: q, text: ee }, Qe = q, Zt = $, Pn = ee, $n = he;
    if (Ia(te))
      try {
        n(7, q = C(te.text)), n(14, ee = te.text), n(17, he = !1), n(15, ie = void 0);
      } catch (yi) {
        try {
          n(7, q = C(us(te.text))), n(14, ee = te.text), n(17, he = !0), n(15, ie = void 0);
        } catch {
          n(7, q = void 0), n(14, ee = g.text), n(17, he = !1), n(15, ie = vp(ee, yi.message || yi.toString()));
        }
      }
    else
      n(7, q = te.json), n(14, ee = void 0), n(17, he = !1), n(15, ie = void 0);
    ae(q), fe(), G({
      previousJson: Qe,
      previousState: Zt,
      previousText: Pn,
      previousTextIsRepaired: $n
    }), ht(Oe, null);
  }
  function G({ previousJson: te, previousState: Te, previousText: be, previousTextIsRepaired: Oe }) {
    te === void 0 && be === void 0 || (q !== void 0 ? te !== void 0 ? y.add({
      undo: {
        patch: [
          {
            op: "replace",
            path: "",
            value: te
          }
        ],
        state: Ai(Te),
        json: void 0,
        text: be,
        textIsRepaired: Oe
      },
      redo: {
        patch: [{ op: "replace", path: "", value: q }],
        state: Ai($),
        json: void 0,
        text: ee,
        textIsRepaired: he
      }
    }) : y.add({
      undo: {
        patch: void 0,
        json: void 0,
        text: be,
        state: Ai(Te),
        textIsRepaired: Oe
      },
      redo: {
        patch: void 0,
        json: q,
        state: Ai($),
        text: ee,
        textIsRepaired: he
      }
    }) : te !== void 0 && y.add({
      undo: {
        patch: void 0,
        json: te,
        state: Ai(Te),
        text: be,
        textIsRepaired: Oe
      },
      redo: {
        patch: void 0,
        json: void 0,
        text: ee,
        textIsRepaired: he,
        state: Ai($)
      }
    }));
  }
  let ce = [];
  const De = Ku(W6);
  function We(te, Te, be, Oe) {
    ca(
      () => {
        let Qe;
        try {
          Qe = De(te, Te, be, Oe);
        } catch (Zt) {
          Qe = [
            {
              path: [],
              message: "Failed to validate: " + Zt.message,
              severity: Io.warning
            }
          ];
        }
        At(Qe, ce) || (o("validationErrors changed:", Qe), n(10, ce = Qe));
      },
      (Qe) => o(`validationErrors updated in ${Qe} ms`)
    );
  }
  function pt() {
    return o("validate"), ie ? {
      parseError: ie,
      isRepairable: !1
    } : (We(q, A, k, w), { validationErrors: ce });
  }
  function ot(te, Te) {
    if (o("patch", te, Te), q === void 0)
      throw new Error("Cannot apply patch: no JSON");
    const be = { json: q }, Oe = q, Qe = $, Zt = he, Pn = O6(q, te), Gt = h6(q, $, te).json, yi = IQ($, te, je), Vi = typeof Te == "function" ? Te(Gt, yi) : void 0;
    n(7, q = Vi && Vi.json !== void 0 ? Vi.json : Gt);
    const Xl = Vi && Vi.state !== void 0 ? Vi.state : yi;
    n(9, $ = Xl), n(14, ee = void 0), n(17, he = !1), n(16, ne = void 0), y.add({
      undo: {
        patch: Pn,
        json: void 0,
        text: void 0,
        state: Ai(Qe),
        textIsRepaired: Zt
      },
      redo: {
        patch: te,
        json: void 0,
        state: Ai(Xl),
        text: void 0,
        textIsRepaired: he
      }
    });
    const Ql = {
      json: q,
      previousJson: Oe,
      undo: Pn,
      redo: te
    };
    return ht(be, Ql), Ql;
  }
  function Be(te, Te) {
    if (!p)
      return ot(te, Te);
  }
  function ht(te, Te) {
    te.json === void 0 && (te == null ? void 0 : te.text) === void 0 || (ee !== void 0 ? N({ text: ee, json: void 0 }, te, { contentErrors: pt(), patchResult: Te }) : q !== void 0 && N({ text: void 0, json: q }, te, { contentErrors: pt(), patchResult: Te }));
  }
  function jt(te) {
    o("handleFind", te);
  }
  function _n(te) {
    o("pasted json as text", te), n(16, ne = te);
  }
  function yn(te) {
    const Te = parseInt(te[0]), be = [String(Te + 1), ...te.slice(1)];
    return gr(q, be) ? Pt(be, !1) : Pt(te, !1);
  }
  function Rt() {
    ue && (ue.focus(), ue.select());
  }
  function Ee(te) {
    n(68, nt = te.target.scrollTop);
  }
  function li(te) {
    const Te = te != null && te.target ? r6(te.target) : void 0;
    if (Te) {
      if (Lo($.selection) && y6($.selection, Te, qt.value))
        return;
      Pe(Pt(Te, !1)), Rt(), te.preventDefault();
    }
  }
  function an() {
    if (Ut(q) && !Ot(q) && !Ot(je)) {
      const te = ["0", ...je[0]];
      return Pt(te, !1);
    } else
      return;
  }
  function Bt() {
    $.selection || Pe(an());
  }
  function wn() {
    if (he && q !== void 0) {
      const te = $, Te = q, be = ee, Oe = { json: q, text: ee }, Qe = he;
      n(14, ee = void 0), n(17, he = !1), ae(q), G({
        previousJson: Te,
        previousState: te,
        previousText: be,
        previousTextIsRepaired: Qe
      }), ht(Oe, null);
    }
    return { json: q, text: ee };
  }
  function Kt(te, Te = !0) {
    const be = fm(te, je, le, ta), Oe = be - nt, Qe = vn(te);
    o("scrollTo", { path: te, top: be, scrollTop: nt, elem: Qe });
    const Zt = X.getBoundingClientRect();
    if (Qe && !Te) {
      const $n = Qe.getBoundingClientRect();
      if ($n.bottom > Zt.top && $n.top < Zt.bottom)
        return;
    }
    const Pn = -(Zt.height / 4);
    Qe ? u(Qe, {
      container: X,
      offset: Pn,
      duration: Im,
      callback: () => {
        jn(te);
      }
    }) : u(Oe, {
      container: X,
      offset: Pn,
      duration: Im,
      callback: () => {
        Qi().then(() => {
          fm(te, je, le, ta) !== be ? Kt(te, Te) : jn(te);
        });
      }
    });
  }
  function Zn(te) {
    const { rowIndex: Te } = el(te, je), be = fm(te, je, le, ta), Oe = be + (le[Te] || ta), Qe = ta, Zt = X.getBoundingClientRect(), Pn = nt, $n = nt + Zt.height - Qe;
    if (Oe > $n) {
      const Gt = Oe - $n;
      n(12, X.scrollTop += Gt, X);
    }
    if (be < Pn) {
      const Gt = Pn - be;
      n(12, X.scrollTop -= Gt, X);
    }
  }
  function jn(te) {
    const Te = vn(te);
    if (Te) {
      const be = X.getBoundingClientRect(), Oe = Te.getBoundingClientRect();
      if (Oe.right > be.right) {
        const Qe = Oe.right - be.right;
        n(12, X.scrollLeft += Qe, X);
      }
      if (Oe.left < be.left) {
        const Qe = be.left - Oe.left;
        n(12, X.scrollLeft -= Qe, X);
      }
    }
  }
  function Wn(te) {
    Zn(te), jn(te);
  }
  function vn(te) {
    return X ? X.querySelector(`td[data-path="${Da(te)}"]`) : null;
  }
  function me({ anchor: te, left: Te, top: be, width: Oe, height: Qe, offsetTop: Zt, offsetLeft: Pn, showTip: $n }) {
    const Gt = {
      json: q,
      documentState: $,
      parser: k,
      showTip: $n,
      onEditValue: en,
      onToggleEnforceString: bi,
      onCut: wt,
      onCopy: Wt,
      onPaste: kn,
      onRemove: Jt,
      onCloseContextMenu() {
        c(yi), Rt();
      }
    };
    Ie = !0;
    const yi = a(XQ, Gt, {
      left: Te,
      top: be,
      offsetTop: Zt,
      offsetLeft: Pn,
      width: Oe,
      height: Qe,
      anchor: te,
      closeOnOuterClick: !0,
      onClose: () => {
        Ie = !1, Rt();
      }
    });
  }
  function Le(te) {
    if (!(p || Lo($.selection))) {
      if (te && (te.stopPropagation(), te.preventDefault()), te && te.type === "contextmenu" && te.target !== ue)
        me({
          left: te.clientX,
          top: te.clientY,
          width: Ws,
          height: Hs,
          showTip: !1
        });
      else {
        const Te = X == null ? void 0 : X.querySelector(".jse-table-cell.jse-selected-value");
        if (Te)
          me({
            anchor: Te,
            offsetTop: 2,
            width: Ws,
            height: Hs,
            showTip: !1
          });
        else {
          const be = X == null ? void 0 : X.getBoundingClientRect();
          be && me({
            top: be.top + 2,
            left: be.left + 2,
            width: Ws,
            height: Hs,
            showTip: !1
          });
        }
      }
      return !1;
    }
  }
  function gt(te) {
    p || me({
      anchor: i6(te.target, "BUTTON"),
      offsetTop: 0,
      width: Ws,
      height: Hs,
      showTip: !0
    });
  }
  function en() {
    if (p || !$.selection)
      return;
    const te = $.selection.focusPath, Te = Ye(q, te);
    dn(Te) ? tn(te) : Pe(Pt(te, !0));
  }
  function bi() {
    if (p || !Ct($.selection))
      return;
    const te = $.selection.focusPath, Te = xe(te), be = Ye(q, te), Oe = !Qs(be, $.enforceStringMap, Te, k), Qe = Oe ? String(be) : tc(String(be), k);
    o("handleToggleEnforceString", { enforceString: Oe, value: be, updatedValue: Qe }), Be(
      [
        {
          op: "replace",
          path: Te,
          value: Qe
        }
      ],
      (Zt, Pn) => ({
        state: f6(Pn, Te, Oe)
      })
    );
  }
  async function Ht() {
    o("apply pasted json", ne);
    const { path: te, contents: Te } = ne;
    Pe(Pt(te, !1)), await Qi();
    const be = [
      {
        op: "replace",
        path: xe(te),
        value: Te
      }
    ];
    Be(be);
  }
  function kn() {
    l(
      q6,
      {},
      {
        ...Al,
        styleWindow: { width: "450px" }
      },
      { onClose: () => Rt() }
    );
  }
  function we() {
    o("clear pasted json"), n(16, ne = void 0);
  }
  function lt() {
    T(ki.text);
  }
  async function wt(te) {
    await Z6({
      json: q,
      documentState: $,
      indentation: te ? M : void 0,
      readOnly: p,
      parser: k,
      onPatch: Be
    });
  }
  async function Wt(te = !0) {
    await $6({
      json: q,
      documentState: $,
      indentation: te ? M : void 0,
      parser: k
    });
  }
  function Jt() {
    t8({
      json: q,
      text: ee,
      documentState: $,
      keepSelection: !0,
      readOnly: p,
      onChange: N,
      onPatch: Be
    });
  }
  async function mt(te) {
    await n8({
      char: te,
      selectInside: !1,
      refJsonEditor: D,
      json: q,
      documentState: $,
      readOnly: p,
      parser: k,
      onPatch: Be,
      onReplaceJson: Xt,
      onSelect: Pe
    });
  }
  function cn(te) {
    const Te = Go(te).replace(/^Command\+/, "Ctrl+");
    if (o("keydown", { combo: Te, key: te.key }), Te === "Ctrl+X" && (te.preventDefault(), wt(!0)), Te === "Ctrl+Shift+X" && (te.preventDefault(), wt(!1)), Te === "Ctrl+C" && (te.preventDefault(), Wt(!0)), Te === "Ctrl+Shift+C" && (te.preventDefault(), Wt(!1)), Te === "Ctrl+D" && te.preventDefault(), (Te === "Delete" || Te === "Backspace") && (te.preventDefault(), Jt()), Te === "Insert" && te.preventDefault(), Te === "Ctrl+A" && te.preventDefault(), Te === "Ctrl+Q" && Le(te), Te === "Left" && (te.preventDefault(), Bt(), $.selection)) {
      const Oe = MQ(je, $.selection);
      Pe(Oe), Wn(Oe.focusPath);
    }
    if (Te === "Right" && (te.preventDefault(), Bt(), $.selection)) {
      const Oe = OQ(je, $.selection);
      Pe(Oe), Wn(Oe.focusPath);
    }
    if (Te === "Up" && (te.preventDefault(), Bt(), $.selection)) {
      const Oe = EQ(je, $.selection);
      Pe(Oe), Wn(Oe.focusPath);
    }
    if (Te === "Down" && (te.preventDefault(), Bt(), $.selection)) {
      const Oe = AQ(q, je, $.selection);
      Pe(Oe), Wn(Oe.focusPath);
    }
    if (Te === "Enter" && $.selection && Ct($.selection)) {
      te.preventDefault();
      const Oe = $.selection.focusPath, Qe = Ye(q, Oe);
      dn(Qe) ? tn(Oe) : p || Pe({ ...$.selection, edit: !0 });
    }
    if (Te.replace(/^Shift\+/, "").replace(/^Numpad_/, "").length === 1 && $.selection) {
      te.preventDefault(), mt(te.key);
      return;
    }
    if (Te === "Ctrl+Enter" && Ct($.selection)) {
      const Oe = Ye(q, $.selection.focusPath);
      op(Oe) && window.open(String(Oe), "_blank");
    }
    Te === "Escape" && $.selection && (te.preventDefault(), Pe(void 0)), Te === "Ctrl+F" && te.preventDefault(), Te === "Ctrl+H" && te.preventDefault(), Te === "Ctrl+Z" && (te.preventDefault(), Tn()), Te === "Ctrl+Shift+Z" && (te.preventDefault(), Bn());
  }
  function Gi(te) {
    te.preventDefault();
    const Te = te.clipboardData.getData("text/plain");
    e8({
      clipboardText: Te,
      json: q,
      documentState: $,
      readOnly: p,
      parser: k,
      onPatch: Be,
      onChangeText: Fi,
      openRepairModal: qn
    });
  }
  function Xt(te, Te) {
    const be = $, Oe = q, Qe = ee, Zt = { json: q, text: ee }, Pn = he, $n = cr(q, $, [], os), Gt = typeof Te == "function" ? Te(te, $n) : void 0;
    n(7, q = Gt && Gt.json !== void 0 ? Gt.json : te), n(9, $ = Gt && Gt.state !== void 0 ? Gt.state : $n), n(14, ee = void 0), n(17, he = !1), ae(q), G({
      previousJson: Oe,
      previousState: be,
      previousText: Qe,
      previousTextIsRepaired: Pn
    }), ht(Zt, null);
  }
  function Fi(te, Te) {
    o("handleChangeText");
    const be = $, Oe = q, Qe = ee, Zt = { json: q, text: ee }, Pn = he;
    try {
      n(7, q = C(te)), n(9, $ = cr(q, $, [], os)), n(14, ee = void 0), n(17, he = !1);
    } catch {
      try {
        n(7, q = C(us(te))), n(9, $ = cr(q, $, [], os)), n(14, ee = te), n(17, he = !0);
      } catch {
        n(7, q = void 0), n(9, $ = Qh({ json: q, expand: os })), n(14, ee = te), n(17, he = !1);
      }
    }
    if (typeof Te == "function") {
      const Gt = Te(q, $);
      n(7, q = Gt && Gt.json ? Gt.json : q), n(9, $ = Gt && Gt.state ? Gt.state : $);
    }
    ae(q), G({
      previousJson: Oe,
      previousState: be,
      previousText: Qe,
      previousTextIsRepaired: Pn
    }), ht(Zt, null);
  }
  function Er(te) {
    o("select validation error", te), Pe(Pt(te.path, !1)), Kt(te.path);
  }
  function Ii(te) {
    p || (Ie = !0, z({
      id: f,
      json: q,
      rootPath: te,
      onSort: async ({ operations: Te, itemPath: be, direction: Oe }) => {
        o("onSort", Te, te, be, Oe), Be(Te, (Qe, Zt) => ({
          state: {
            ...Zt,
            sortedColumn: {
              path: be,
              sortDirection: Oe === -1 ? pr.desc : pr.asc
            }
          }
        }));
      },
      onClose: () => {
        Ie = !1, Rt();
      }
    }));
  }
  function ar({ id: te, rootPath: Te, onTransform: be, onClose: Oe }) {
    Ie = !0, L({
      id: te || h,
      json: q,
      rootPath: Te,
      onTransform: be ? (Qe) => {
        be({
          operations: Qe,
          json: q,
          transformedJson: zr(q, Qe)
        });
      } : (Qe) => {
        o("onTransform", Te, Qe), Be(Qe);
      },
      onClose: () => {
        Ie = !1, Rt(), Oe && Oe();
      }
    });
  }
  function tn(te) {
    o("openJSONEditorModal", { path: te }), Ie = !0, K({
      content: { json: Ye(q, te) },
      path: te,
      onPatch: B.onPatch,
      onClose: () => {
        Ie = !1, Rt();
      }
    });
  }
  function qn(te, Te) {
    l(
      K6,
      {
        text: te,
        onParse: wp,
        onRepair: K5,
        onApply: Te
      },
      {
        ...Al,
        styleWindow: { width: "600px", height: "500px" },
        styleContent: { padding: 0, height: "100%" }
      },
      { onClose: () => Rt() }
    );
  }
  function Jn() {
    Ii([]);
  }
  function nn() {
    ar({ rootPath: [] });
  }
  function Tn() {
    if (p || !y.getState().canUndo)
      return;
    const te = y.undo();
    if (!te)
      return;
    const Te = { json: q, text: ee };
    n(7, q = te.undo.patch ? zr(q, te.undo.patch) : te.undo.json), n(9, $ = te.undo.state), n(14, ee = te.undo.text), n(17, he = te.undo.textIsRepaired), o("undo", { item: te, json: q });
    const be = {
      json: q,
      previousJson: Te.json,
      redo: te.undo.patch,
      undo: te.redo.patch
    };
    ht(Te, be), Rt(), $.selection && Kt($.selection.focusPath, !1);
  }
  function Bn() {
    if (p || !y.getState().canRedo)
      return;
    const te = y.redo();
    if (!te)
      return;
    const Te = { json: q, text: ee };
    n(7, q = te.redo.patch ? zr(q, te.redo.patch) : te.redo.json), n(9, $ = te.redo.state), n(14, ee = te.redo.text), n(17, he = te.redo.textIsRepaired), o("redo", { item: te, json: q });
    const be = {
      json: q,
      previousJson: Te.json,
      redo: te.redo.patch,
      undo: te.undo.patch
    };
    ht(Te, be), Rt(), $.selection && Kt($.selection.focusPath, !1);
  }
  function Kn(te) {
    n(67, Ne = te.getBoundingClientRect().height);
  }
  function zi(te, Te) {
    n(66, le[Te] = te.getBoundingClientRect().height, le);
  }
  function Yi(te, Te) {
    return Te ? Te.pointersMap[xe(te)] === !0 : !1;
  }
  function _i(te) {
    _t[te ? "unshift" : "push"](() => {
      ue = te, n(13, ue);
    });
  }
  const Qt = (te, Te) => zi(Te, te);
  function Lt(te) {
    _t[te ? "unshift" : "push"](() => {
      X = te, n(12, X);
    });
  }
  function Rn(te) {
    _t[te ? "unshift" : "push"](() => {
      D = te, n(11, D);
    });
  }
  return t.$$set = (te) => {
    "readOnly" in te && n(0, p = te.readOnly), "externalContent" in te && n(45, g = te.externalContent), "mainMenuBar" in te && n(1, m = te.mainMenuBar), "escapeControlCharacters" in te && n(46, _ = te.escapeControlCharacters), "escapeUnicodeCharacters" in te && n(47, S = te.escapeUnicodeCharacters), "flattenColumns" in te && n(48, v = te.flattenColumns), "parser" in te && n(2, k = te.parser), "parseMemoizeOne" in te && n(49, C = te.parseMemoizeOne), "validator" in te && n(50, A = te.validator), "validationParser" in te && n(51, w = te.validationParser), "indentation" in te && n(3, M = te.indentation), "onChange" in te && n(52, N = te.onChange), "onChangeMode" in te && n(4, T = te.onChangeMode), "onRenderValue" in te && n(53, O = te.onRenderValue), "onRenderMenu" in te && n(5, W = te.onRenderMenu), "onFocus" in te && n(54, H = te.onFocus), "onBlur" in te && n(55, I = te.onBlur), "onSortModal" in te && n(56, z = te.onSortModal), "onTransformModal" in te && n(57, L = te.onTransformModal), "onJSONEditorModal" in te && n(58, K = te.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[1] & 98304 && n(65, F = G0({
      escapeControlCharacters: _,
      escapeUnicodeCharacters: S
    })), t.$$.dirty[1] & 16384 && Q(g), t.$$.dirty[0] & 128 | t.$$.dirty[1] & 131072 && n(8, je = Ut(q) ? wQ(q, v) : []), t.$$.dirty[0] & 384 && n(22, i = q && !Ot(je)), t.$$.dirty[0] & 128 | t.$$.dirty[2] & 112 && n(21, r = CQ(nt, Ne, q, le, ta)), t.$$.dirty[0] & 128 && ke(), t.$$.dirty[0] & 645 | t.$$.dirty[1] & 4194304 | t.$$.dirty[2] & 8 && n(19, B = {
      readOnly: p,
      parser: k,
      normalization: F,
      getJson: () => q,
      getDocumentState: () => $,
      findElement: vn,
      findNextInside: yn,
      focus: Rt,
      onPatch: Be,
      onSelect: Pe,
      onFind: jt,
      onPasteJson: _n,
      onRenderValue: O
    }), t.$$.dirty[0] & 132 | t.$$.dirty[1] & 1572864 && We(q, A, k, w), t.$$.dirty[0] & 1280 && n(20, s = TQ(ce, je));
  }, [
    p,
    m,
    k,
    M,
    T,
    W,
    wn,
    q,
    je,
    $,
    ce,
    D,
    X,
    ue,
    ee,
    ie,
    ne,
    he,
    R,
    B,
    s,
    r,
    i,
    d,
    Ce,
    J,
    Ee,
    li,
    me,
    Le,
    gt,
    Ht,
    we,
    lt,
    cn,
    Gi,
    Er,
    tn,
    Jn,
    nn,
    Tn,
    Bn,
    Kn,
    zi,
    Yi,
    g,
    _,
    S,
    v,
    C,
    A,
    w,
    N,
    O,
    H,
    I,
    z,
    L,
    K,
    pt,
    ot,
    Rt,
    Kt,
    vn,
    ar,
    F,
    le,
    Ne,
    nt,
    _i,
    Qt,
    Lt,
    Rn
  ];
}
class hZ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      fZ,
      uZ,
      yt,
      {
        readOnly: 0,
        externalContent: 45,
        mainMenuBar: 1,
        escapeControlCharacters: 46,
        escapeUnicodeCharacters: 47,
        flattenColumns: 48,
        parser: 2,
        parseMemoizeOne: 49,
        validator: 50,
        validationParser: 51,
        indentation: 3,
        onChange: 52,
        onChangeMode: 4,
        onRenderValue: 53,
        onRenderMenu: 5,
        onFocus: 54,
        onBlur: 55,
        onSortModal: 56,
        onTransformModal: 57,
        onJSONEditorModal: 58,
        validate: 59,
        patch: 60,
        focus: 61,
        acceptAutoRepair: 6,
        scrollTo: 62,
        findElement: 63,
        openTransformModal: 64
      },
      null,
      [-1, -1, -1, -1, -1]
    );
  }
  get validate() {
    return this.$$.ctx[59];
  }
  get patch() {
    return this.$$.ctx[60];
  }
  get focus() {
    return this.$$.ctx[61];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[6];
  }
  get scrollTo() {
    return this.$$.ctx[62];
  }
  get findElement() {
    return this.$$.ctx[63];
  }
  get openTransformModal() {
    return this.$$.ctx[64];
  }
}
const dZ = hZ;
function pZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    pathParser: t[15],
    onError: t[20],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onClassName: t[18],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new gb({ props: i }), t[43](e), {
    c() {
      ge(e.$$.fragment);
    },
    m(r, s) {
      de(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 4 && (o.indentation = r[2]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 64 && (o.navigationBar = r[6]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 2048 && (o.parser = r[11]), s[0] & 4096 && (o.parseMemoizeOne = r[12]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 32768 && (o.pathParser = r[15]), s[0] & 1048576 && (o.onError = r[20]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 131072 && (o.onRenderValue = r[17]), s[0] & 262144 && (o.onClassName = r[18]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), s[0] & 33554432 && (o.onJSONEditorModal = r[25]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[43](null), pe(e, r);
    }
  };
}
function gZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    mainMenuBar: t[5],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[12],
    validator: t[13],
    validationParser: t[14],
    indentation: t[2],
    onChange: t[16],
    onChangeMode: t[19],
    onRenderValue: t[17],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24],
    onJSONEditorModal: t[25]
  };
  return e = new dZ({ props: i }), t[42](e), {
    c() {
      ge(e.$$.fragment);
    },
    m(r, s) {
      de(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 1024 && (o.flattenColumns = r[10]), s[0] & 2048 && (o.parser = r[11]), s[0] & 4096 && (o.parseMemoizeOne = r[12]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 4 && (o.indentation = r[2]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 131072 && (o.onRenderValue = r[17]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), s[0] & 33554432 && (o.onJSONEditorModal = r[25]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[42](null), pe(e, r);
    }
  };
}
function mZ(t) {
  let e, n, i = {
    externalContent: t[0],
    readOnly: t[1],
    indentation: t[2],
    tabSize: t[3],
    mainMenuBar: t[5],
    statusBar: t[7],
    escapeUnicodeCharacters: t[9],
    parser: t[11],
    validator: t[13],
    validationParser: t[14],
    onChange: t[16],
    onChangeMode: t[19],
    onError: t[20],
    onFocus: t[21],
    onBlur: t[22],
    onRenderMenu: t[29],
    onSortModal: t[23],
    onTransformModal: t[24]
  };
  return e = new gQ({ props: i }), t[41](e), {
    c() {
      ge(e.$$.fragment);
    },
    m(r, s) {
      de(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 1 && (o.externalContent = r[0]), s[0] & 2 && (o.readOnly = r[1]), s[0] & 4 && (o.indentation = r[2]), s[0] & 8 && (o.tabSize = r[3]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 128 && (o.statusBar = r[7]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 2048 && (o.parser = r[11]), s[0] & 8192 && (o.validator = r[13]), s[0] & 16384 && (o.validationParser = r[14]), s[0] & 65536 && (o.onChange = r[16]), s[0] & 524288 && (o.onChangeMode = r[19]), s[0] & 1048576 && (o.onError = r[20]), s[0] & 2097152 && (o.onFocus = r[21]), s[0] & 4194304 && (o.onBlur = r[22]), s[0] & 536870912 && (o.onRenderMenu = r[29]), s[0] & 8388608 && (o.onSortModal = r[23]), s[0] & 16777216 && (o.onTransformModal = r[24]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[41](null), pe(e, r);
    }
  };
}
function bZ(t) {
  let e, n, i, r;
  const s = [mZ, gZ, pZ], o = [];
  function l(a, c) {
    return a[4] === ki.text || a[4] === "code" ? 0 : a[4] === ki.table ? 1 : 2;
  }
  return e = l(t), n = o[e] = s[e](t), {
    c() {
      n.c(), i = rt();
    },
    m(a, c) {
      o[e].m(a, c), U(a, i, c), r = !0;
    },
    p(a, c) {
      let u = e;
      e = l(a), e === u ? o[e].p(a, c) : (Ae(), x(o[u], 1, 1, () => {
        o[u] = null;
      }), Me(), n = o[e], n ? n.p(a, c) : (n = o[e] = s[e](a), n.c()), P(n, 1), n.m(i.parentNode, i));
    },
    i(a) {
      r || (P(n), r = !0);
    },
    o(a) {
      x(n), r = !1;
    },
    d(a) {
      o[e].d(a), a && V(i);
    }
  };
}
function _Z(t, e, n) {
  let i, { content: r } = e, { readOnly: s } = e, { indentation: o } = e, { tabSize: l } = e, { mode: a } = e, { mainMenuBar: c } = e, { navigationBar: u } = e, { statusBar: f } = e, { escapeControlCharacters: h } = e, { escapeUnicodeCharacters: d } = e, { flattenColumns: p } = e, { parser: g } = e, { parseMemoizeOne: m } = e, { validator: _ } = e, { validationParser: S } = e, { pathParser: v } = e, { onChange: k } = e, { onRenderValue: C } = e, { onClassName: A } = e, { onRenderMenu: w } = e, { onChangeMode: M } = e, { onError: N } = e, { onFocus: T } = e, { onBlur: O } = e, { onSortModal: W } = e, { onTransformModal: H } = e, { onJSONEditorModal: I } = e, z, L, K, F;
  const D = { separator: !0 };
  function X(ke) {
    if (z)
      return z.patch(ke);
    if (L)
      return L.patch(ke);
    if (K)
      return K.patch(ke);
  }
  function ue(ke) {
    if (z)
      return z.expand(ke);
    throw new Error(`Method expand is not available in mode "${a}"`);
  }
  function q(ke) {
    if (K)
      K.openTransformModal(ke);
    else if (z)
      z.openTransformModal(ke);
    else if (L)
      L.openTransformModal(ke);
    else
      throw new Error(`Method transform is not available in mode "${a}"`);
  }
  function ee() {
    if (K)
      return K.validate();
    if (z)
      return z.validate();
    if (L)
      return L.validate();
    throw new Error(`Method validate is not available in mode "${a}"`);
  }
  function ie() {
    return z ? z.acceptAutoRepair() : r;
  }
  function ne(ke) {
    if (z)
      return z.scrollTo(ke);
    throw new Error(`Method scrollTo is not available in mode "${a}"`);
  }
  function je(ke) {
    if (z)
      return z.findElement(ke);
    if (L)
      return L.findElement(ke);
    throw new Error(`Method findElement is not available in mode "${a}"`);
  }
  function Ie() {
    K ? K.focus() : z ? z.focus() : L && L.focus();
  }
  function Xe() {
    K && K.refresh();
  }
  function le(ke) {
    _t[ke ? "unshift" : "push"](() => {
      K = ke, n(28, K);
    });
  }
  function Ne(ke) {
    _t[ke ? "unshift" : "push"](() => {
      L = ke, n(27, L);
    });
  }
  function nt(ke) {
    _t[ke ? "unshift" : "push"](() => {
      z = ke, n(26, z);
    });
  }
  return t.$$set = (ke) => {
    "content" in ke && n(0, r = ke.content), "readOnly" in ke && n(1, s = ke.readOnly), "indentation" in ke && n(2, o = ke.indentation), "tabSize" in ke && n(3, l = ke.tabSize), "mode" in ke && n(4, a = ke.mode), "mainMenuBar" in ke && n(5, c = ke.mainMenuBar), "navigationBar" in ke && n(6, u = ke.navigationBar), "statusBar" in ke && n(7, f = ke.statusBar), "escapeControlCharacters" in ke && n(8, h = ke.escapeControlCharacters), "escapeUnicodeCharacters" in ke && n(9, d = ke.escapeUnicodeCharacters), "flattenColumns" in ke && n(10, p = ke.flattenColumns), "parser" in ke && n(11, g = ke.parser), "parseMemoizeOne" in ke && n(12, m = ke.parseMemoizeOne), "validator" in ke && n(13, _ = ke.validator), "validationParser" in ke && n(14, S = ke.validationParser), "pathParser" in ke && n(15, v = ke.pathParser), "onChange" in ke && n(16, k = ke.onChange), "onRenderValue" in ke && n(17, C = ke.onRenderValue), "onClassName" in ke && n(18, A = ke.onClassName), "onRenderMenu" in ke && n(30, w = ke.onRenderMenu), "onChangeMode" in ke && n(19, M = ke.onChangeMode), "onError" in ke && n(20, N = ke.onError), "onFocus" in ke && n(21, T = ke.onFocus), "onBlur" in ke && n(22, O = ke.onBlur), "onSortModal" in ke && n(23, W = ke.onSortModal), "onTransformModal" in ke && n(24, H = ke.onTransformModal), "onJSONEditorModal" in ke && n(25, I = ke.onJSONEditorModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 524304 && n(40, F = [
      {
        type: "button",
        text: "text",
        title: `Switch to text mode (current mode: ${a})`,
        className: "jse-group-button jse-first" + (a === ki.text || a === "code" ? " jse-selected" : ""),
        onClick: () => M(ki.text)
      },
      {
        type: "button",
        text: "tree",
        title: `Switch to tree mode (current mode: ${a})`,
        className: "jse-group-button " + (a === ki.tree ? " jse-selected" : ""),
        onClick: () => M(ki.tree)
      },
      {
        type: "button",
        text: "table",
        title: `Switch to table mode (current mode: ${a})`,
        className: "jse-group-button jse-last" + (a === ki.table ? " jse-selected" : ""),
        onClick: () => M(ki.table)
      }
    ]), t.$$.dirty[0] & 1073741824 | t.$$.dirty[1] & 512 && n(29, i = (ke, fe) => {
      const Pe = eV(fe[0]) ? F.concat(fe) : F.concat(D, fe);
      return w(ke, Pe) || Pe;
    });
  }, [
    r,
    s,
    o,
    l,
    a,
    c,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    k,
    C,
    A,
    M,
    N,
    T,
    O,
    W,
    H,
    I,
    z,
    L,
    K,
    i,
    w,
    X,
    ue,
    q,
    ee,
    ie,
    ne,
    je,
    Ie,
    Xe,
    F,
    le,
    Ne,
    nt
  ];
}
class yZ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      _Z,
      bZ,
      Nt,
      {
        content: 0,
        readOnly: 1,
        indentation: 2,
        tabSize: 3,
        mode: 4,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        parseMemoizeOne: 12,
        validator: 13,
        validationParser: 14,
        pathParser: 15,
        onChange: 16,
        onRenderValue: 17,
        onClassName: 18,
        onRenderMenu: 30,
        onChangeMode: 19,
        onError: 20,
        onFocus: 21,
        onBlur: 22,
        onSortModal: 23,
        onTransformModal: 24,
        onJSONEditorModal: 25,
        patch: 31,
        expand: 32,
        transform: 33,
        validate: 34,
        acceptAutoRepair: 35,
        scrollTo: 36,
        findElement: 37,
        focus: 38,
        refresh: 39
      },
      null,
      [-1, -1]
    );
  }
  get patch() {
    return this.$$.ctx[31];
  }
  get expand() {
    return this.$$.ctx[32];
  }
  get transform() {
    return this.$$.ctx[33];
  }
  get validate() {
    return this.$$.ctx[34];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[35];
  }
  get scrollTo() {
    return this.$$.ctx[36];
  }
  get findElement() {
    return this.$$.ctx[37];
  }
  get focus() {
    return this.$$.ctx[38];
  }
  get refresh() {
    return this.$$.ctx[39];
  }
}
const ZA = yZ;
function yS(t) {
  let e, n;
  return {
    c() {
      e = j("div"), n = _e(t[19]), b(e, "class", "jse-error svelte-1hibiw3");
    },
    m(i, r) {
      U(i, e, r), E(e, n);
    },
    p(i, r) {
      r[0] & 524288 && ze(n, i[19]);
    },
    d(i) {
      i && V(e);
    }
  };
}
function wS(t) {
  let e, n, i, r, s, o;
  return n = new Et({ props: { data: Hx } }), {
    c() {
      e = j("button"), ge(n.$$.fragment), i = _e(" Back"), b(e, "type", "button"), b(e, "class", "jse-secondary svelte-1hibiw3");
    },
    m(l, a) {
      U(l, e, a), de(n, e, null), E(e, i), r = !0, s || (o = re(e, "click", t[23]), s = !0);
    },
    p: ye,
    i(l) {
      r || (P(n.$$.fragment, l), r = !0);
    },
    o(l) {
      x(n.$$.fragment, l), r = !1;
    },
    d(l) {
      l && V(e), pe(n), s = !1, o();
    }
  };
}
function wZ(t) {
  let e, n, i;
  return {
    c() {
      e = j("button"), e.textContent = "Close", b(e, "type", "button"), b(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, s) {
      U(r, e, s), n || (i = [
        re(e, "click", t[23]),
        qi($A.call(null, e))
      ], n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, ct(i);
    }
  };
}
function vZ(t) {
  let e, n, i;
  return {
    c() {
      e = j("button"), e.textContent = "Apply", b(e, "type", "button"), b(e, "class", "jse-primary svelte-1hibiw3");
    },
    m(r, s) {
      U(r, e, s), n || (i = [
        re(e, "click", t[22]),
        qi($A.call(null, e))
      ], n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, ct(i);
    }
  };
}
function kZ(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _;
  n = new ab({
    props: {
      title: "Edit nested content " + (t[18].length > 1 ? ` (${t[18].length})` : ""),
      onClose: t[23]
    }
  }), h = new ZA({
    props: {
      mode: at(t[18]).mode,
      content: at(t[18]).content,
      readOnly: t[0],
      indentation: t[1],
      tabSize: t[2],
      statusBar: t[5],
      mainMenuBar: t[3],
      navigationBar: t[4],
      escapeControlCharacters: t[6],
      escapeUnicodeCharacters: t[7],
      flattenColumns: t[8],
      parser: t[9],
      parseMemoizeOne: t[20],
      validator: t[10],
      validationParser: t[11],
      pathParser: t[12],
      onError: t[26],
      onChange: t[24],
      onChangeMode: t[25],
      onRenderValue: t[13],
      onClassName: t[14],
      onFocus: rs,
      onBlur: rs,
      onRenderMenu: t[15],
      onSortModal: t[16],
      onTransformModal: t[17],
      onJSONEditorModal: t[27]
    }
  });
  let S = t[19] && yS(t), v = t[18].length > 1 && wS(t);
  function k(w, M) {
    return w[0] ? wZ : vZ;
  }
  let C = k(t), A = C(t);
  return {
    c() {
      e = j("div"), ge(n.$$.fragment), i = Z(), r = j("div"), s = j("div"), s.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Path</div>', o = Z(), l = j("input"), a = Z(), c = j("div"), c.innerHTML = '<div class="jse-label-inner svelte-1hibiw3">Contents</div>', u = Z(), f = j("div"), ge(h.$$.fragment), d = Z(), p = j("div"), S && S.c(), g = Z(), v && v.c(), m = Z(), A.c(), b(s, "class", "jse-label svelte-1hibiw3"), b(l, "class", "jse-path svelte-1hibiw3"), b(l, "type", "text"), l.readOnly = !0, b(l, "title", "Selected path"), l.value = t[21], b(c, "class", "jse-label svelte-1hibiw3"), b(f, "class", "jse-modal-inline-editor svelte-1hibiw3"), b(p, "class", "jse-actions svelte-1hibiw3"), b(r, "class", "jse-modal-contents svelte-1hibiw3"), b(e, "class", "jse-modal jse-jsoneditor-modal svelte-1hibiw3");
    },
    m(w, M) {
      U(w, e, M), de(n, e, null), E(e, i), E(e, r), E(r, s), E(r, o), E(r, l), E(r, a), E(r, c), E(r, u), E(r, f), de(h, f, null), E(r, d), E(r, p), S && S.m(p, null), E(p, g), v && v.m(p, null), E(p, m), A.m(p, null), _ = !0;
    },
    p(w, M) {
      const N = {};
      M[0] & 262144 && (N.title = "Edit nested content " + (w[18].length > 1 ? ` (${w[18].length})` : "")), n.$set(N), (!_ || M[0] & 2097152 && l.value !== w[21]) && (l.value = w[21]);
      const T = {};
      M[0] & 262144 && (T.mode = at(w[18]).mode), M[0] & 262144 && (T.content = at(w[18]).content), M[0] & 1 && (T.readOnly = w[0]), M[0] & 2 && (T.indentation = w[1]), M[0] & 4 && (T.tabSize = w[2]), M[0] & 32 && (T.statusBar = w[5]), M[0] & 8 && (T.mainMenuBar = w[3]), M[0] & 16 && (T.navigationBar = w[4]), M[0] & 64 && (T.escapeControlCharacters = w[6]), M[0] & 128 && (T.escapeUnicodeCharacters = w[7]), M[0] & 256 && (T.flattenColumns = w[8]), M[0] & 512 && (T.parser = w[9]), M[0] & 1048576 && (T.parseMemoizeOne = w[20]), M[0] & 1024 && (T.validator = w[10]), M[0] & 2048 && (T.validationParser = w[11]), M[0] & 4096 && (T.pathParser = w[12]), M[0] & 8192 && (T.onRenderValue = w[13]), M[0] & 16384 && (T.onClassName = w[14]), M[0] & 32768 && (T.onRenderMenu = w[15]), M[0] & 65536 && (T.onSortModal = w[16]), M[0] & 131072 && (T.onTransformModal = w[17]), h.$set(T), w[19] ? S ? S.p(w, M) : (S = yS(w), S.c(), S.m(p, g)) : S && (S.d(1), S = null), w[18].length > 1 ? v ? (v.p(w, M), M[0] & 262144 && P(v, 1)) : (v = wS(w), v.c(), P(v, 1), v.m(p, m)) : v && (Ae(), x(v, 1, 1, () => {
        v = null;
      }), Me()), C === (C = k(w)) && A ? A.p(w, M) : (A.d(1), A = C(w), A && (A.c(), A.m(p, null)));
    },
    i(w) {
      _ || (P(n.$$.fragment, w), P(h.$$.fragment, w), P(v), _ = !0);
    },
    o(w) {
      x(n.$$.fragment, w), x(h.$$.fragment, w), x(v), _ = !1;
    },
    d(w) {
      w && V(e), pe(n), pe(h), S && S.d(), v && v.d(), A.d();
    }
  };
}
function $A(t) {
  t.focus();
}
function CZ(t, e, n) {
  let i, r, s;
  const o = mi("jsoneditor:JSONEditorModal");
  let { content: l } = e, { path: a } = e, { onPatch: c } = e, { readOnly: u } = e, { indentation: f } = e, { tabSize: h } = e, { mainMenuBar: d } = e, { navigationBar: p } = e, { statusBar: g } = e, { escapeControlCharacters: m } = e, { escapeUnicodeCharacters: _ } = e, { flattenColumns: S } = e, { parser: v } = e, { validator: k } = e, { validationParser: C } = e, { pathParser: A } = e, { onRenderValue: w } = e, { onClassName: M } = e, { onRenderMenu: N } = e, { onSortModal: T } = e, { onTransformModal: O } = e;
  const { close: W } = gi("simple-modal");
  let I = [{
    mode: L(l),
    content: l,
    relativePath: a
  }], z;
  function L(ee) {
    return K0(ee) && Ut(ee.json) ? ki.table : ki.tree;
  }
  function K() {
    if (o("handleApply"), !u)
      try {
        n(19, z = void 0);
        const ee = [
          {
            op: "replace",
            path: xe(at(I).relativePath),
            value: cw(at(I).content, v).json
          }
        ];
        if (I.length > 1) {
          const ie = I[I.length - 2].content, ne = cw(ie, v).json, je = {
            json: zr(ne, ee)
          };
          n(18, I = St(I)), D(je);
        } else
          c(ee), W();
      } catch (ee) {
        n(19, z = ee.toString());
      }
  }
  function F() {
    o("handleClose"), I.length > 1 ? (n(18, I = St(I)), n(19, z = void 0)) : W();
  }
  function D(ee) {
    o("handleChange", ee);
    const ie = { ...at(I), content: ee };
    n(18, I = [...St(I), ie]);
  }
  function X(ee) {
    o("handleChangeMode", ee);
    const ie = { ...at(I), mode: ee };
    n(18, I = [...St(I), ie]);
  }
  function ue(ee) {
    n(19, z = ee.toString()), console.error(ee);
  }
  function q({ content: ee, path: ie }) {
    o("handleJSONEditorModal", { content: ee, path: ie });
    const ne = {
      mode: L(ee),
      content: ee,
      relativePath: ie
    };
    n(18, I = [...I, ne]);
  }
  return t.$$set = (ee) => {
    "content" in ee && n(28, l = ee.content), "path" in ee && n(29, a = ee.path), "onPatch" in ee && n(30, c = ee.onPatch), "readOnly" in ee && n(0, u = ee.readOnly), "indentation" in ee && n(1, f = ee.indentation), "tabSize" in ee && n(2, h = ee.tabSize), "mainMenuBar" in ee && n(3, d = ee.mainMenuBar), "navigationBar" in ee && n(4, p = ee.navigationBar), "statusBar" in ee && n(5, g = ee.statusBar), "escapeControlCharacters" in ee && n(6, m = ee.escapeControlCharacters), "escapeUnicodeCharacters" in ee && n(7, _ = ee.escapeUnicodeCharacters), "flattenColumns" in ee && n(8, S = ee.flattenColumns), "parser" in ee && n(9, v = ee.parser), "validator" in ee && n(10, k = ee.validator), "validationParser" in ee && n(11, C = ee.validationParser), "pathParser" in ee && n(12, A = ee.pathParser), "onRenderValue" in ee && n(13, w = ee.onRenderValue), "onClassName" in ee && n(14, M = ee.onClassName), "onRenderMenu" in ee && n(15, N = ee.onRenderMenu), "onSortModal" in ee && n(16, T = ee.onSortModal), "onTransformModal" in ee && n(17, O = ee.onTransformModal);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 262144 && n(31, i = I.flatMap((ee) => ee.relativePath)), t.$$.dirty[1] & 1 && n(21, r = Ot(i) ? "(whole document)" : wr(Ji(i))), t.$$.dirty[0] & 512 && n(20, s = Ku(v.parse));
  }, [
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    N,
    T,
    O,
    I,
    z,
    s,
    r,
    K,
    F,
    D,
    X,
    ue,
    q,
    l,
    a,
    c,
    i
  ];
}
class SZ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      CZ,
      kZ,
      yt,
      {
        content: 28,
        path: 29,
        onPatch: 30,
        readOnly: 0,
        indentation: 1,
        tabSize: 2,
        mainMenuBar: 3,
        navigationBar: 4,
        statusBar: 5,
        escapeControlCharacters: 6,
        escapeUnicodeCharacters: 7,
        flattenColumns: 8,
        parser: 9,
        validator: 10,
        validationParser: 11,
        pathParser: 12,
        onRenderValue: 13,
        onClassName: 14,
        onRenderMenu: 15,
        onSortModal: 16,
        onTransformModal: 17
      },
      null,
      [-1, -1]
    );
  }
}
const EZ = SZ;
function AZ(t, e, n) {
  const i = gi("simple-modal"), r = i.open, s = i.close;
  return [r, s];
}
class MZ extends Ge {
  constructor(e) {
    super(), Ke(this, e, AZ, null, yt, { open: 0, close: 1 });
  }
  get open() {
    return this.$$.ctx[0];
  }
  get close() {
    return this.$$.ctx[1];
  }
}
const OZ = MZ;
function vS(t) {
  let e, n, i = {
    mode: t[1],
    content: t[0],
    readOnly: t[2],
    indentation: t[3],
    tabSize: t[4],
    statusBar: t[7],
    mainMenuBar: t[5],
    navigationBar: t[6],
    escapeControlCharacters: t[8],
    escapeUnicodeCharacters: t[9],
    flattenColumns: t[10],
    parser: t[11],
    parseMemoizeOne: t[24],
    validator: t[12],
    validationParser: t[13],
    pathParser: t[14],
    onError: t[18],
    onChange: t[25],
    onChangeMode: t[28],
    onRenderValue: t[15],
    onClassName: t[16],
    onFocus: t[26],
    onBlur: t[27],
    onRenderMenu: t[17],
    onSortModal: t[30],
    onTransformModal: t[29],
    onJSONEditorModal: t[31]
  };
  return e = new ZA({ props: i }), t[56](e), {
    c() {
      ge(e.$$.fragment);
    },
    m(r, s) {
      de(e, r, s), n = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 2 && (o.mode = r[1]), s[0] & 1 && (o.content = r[0]), s[0] & 4 && (o.readOnly = r[2]), s[0] & 8 && (o.indentation = r[3]), s[0] & 16 && (o.tabSize = r[4]), s[0] & 128 && (o.statusBar = r[7]), s[0] & 32 && (o.mainMenuBar = r[5]), s[0] & 64 && (o.navigationBar = r[6]), s[0] & 256 && (o.escapeControlCharacters = r[8]), s[0] & 512 && (o.escapeUnicodeCharacters = r[9]), s[0] & 1024 && (o.flattenColumns = r[10]), s[0] & 2048 && (o.parser = r[11]), s[0] & 16777216 && (o.parseMemoizeOne = r[24]), s[0] & 4096 && (o.validator = r[12]), s[0] & 8192 && (o.validationParser = r[13]), s[0] & 16384 && (o.pathParser = r[14]), s[0] & 262144 && (o.onError = r[18]), s[0] & 32768 && (o.onRenderValue = r[15]), s[0] & 65536 && (o.onClassName = r[16]), s[0] & 131072 && (o.onRenderMenu = r[17]), e.$set(o);
    },
    i(r) {
      n || (P(e.$$.fragment, r), n = !0);
    },
    o(r) {
      x(e.$$.fragment, r), n = !1;
    },
    d(r) {
      t[56](null), pe(e, r);
    }
  };
}
function TZ(t) {
  let e, n, i, r, s = t[19], o;
  function l(u) {
    t[55](u);
  }
  let a = {};
  t[22] !== void 0 && (a.open = t[22]), e = new OZ({ props: a }), _t.push(() => Ir(e, "open", l, t[22]));
  let c = vS(t);
  return {
    c() {
      ge(e.$$.fragment), i = Z(), r = j("div"), c.c(), b(r, "class", "jse-main svelte-16j5kem"), Se(r, "jse-focus", t[20]);
    },
    m(u, f) {
      de(e, u, f), U(u, i, f), U(u, r, f), c.m(r, null), o = !0;
    },
    p(u, f) {
      const h = {};
      !n && f[0] & 4194304 && (n = !0, h.open = u[22], Pr(() => n = !1)), e.$set(h), f[0] & 524288 && yt(s, s = u[19]) ? (Ae(), x(c, 1, 1, ye), Me(), c = vS(u), c.c(), P(c, 1), c.m(r, null)) : c.p(u, f), (!o || f[0] & 1048576) && Se(r, "jse-focus", u[20]);
    },
    i(u) {
      o || (P(e.$$.fragment, u), P(c), o = !0);
    },
    o(u) {
      x(e.$$.fragment, u), x(c), o = !1;
    },
    d(u) {
      pe(e, u), u && V(i), u && V(r), c.d(u);
    }
  };
}
function RZ(t) {
  let e, n;
  return e = new G4({
    props: {
      $$slots: { default: [TZ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 25165823 | r[1] & 268435456 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function PZ(t) {
  var s;
  let e, n;
  const i = [
    {
      show: (s = t[23]) == null ? void 0 : s.component
    },
    _y
  ];
  let r = {
    $$slots: { default: [RZ] },
    $$scope: { ctx: t }
  };
  for (let o = 0; o < i.length; o += 1)
    r = Ko(r, i[o]);
  return e = new G4({ props: r }), e.$on("close", t[32]), {
    c() {
      ge(e.$$.fragment);
    },
    m(o, l) {
      de(e, o, l), n = !0;
    },
    p(o, l) {
      var c;
      const a = l[0] & 8388608 ? Ul(i, [
        l[0] & 8388608 && {
          show: (c = o[23]) == null ? void 0 : c.component
        },
        l & 0 && rp(_y)
      ]) : {};
      l[0] & 25165823 | l[1] & 268435456 && (a.$$scope = { dirty: l, ctx: o }), e.$set(a);
    },
    i(o) {
      n || (P(e.$$.fragment, o), n = !0);
    },
    o(o) {
      x(e.$$.fragment, o), n = !1;
    },
    d(o) {
      pe(e, o);
    }
  };
}
function IZ(t) {
  let e, n;
  return e = new o6({
    props: {
      $$slots: { default: [PZ] },
      $$scope: { ctx: t }
    }
  }), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 33554431 | r[1] & 268435456 && (s.$$scope = { dirty: r, ctx: i }), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function eM(t) {
  this.$set(t);
}
function tM() {
  this.$destroy();
}
function DZ(t, e, n) {
  let i;
  const r = mi("jsoneditor:Main");
  let { content: s = { text: "" } } = e, { readOnly: o = !1 } = e, { indentation: l = 2 } = e, { tabSize: a = 4 } = e, { mode: c = ki.tree } = e, { mainMenuBar: u = !0 } = e, { navigationBar: f = !0 } = e, { statusBar: h = !0 } = e, { escapeControlCharacters: d = !1 } = e, { escapeUnicodeCharacters: p = !1 } = e, { flattenColumns: g = !0 } = e, { parser: m = JSON } = e, { validator: _ = null } = e, { validationParser: S = JSON } = e, { pathParser: v = {
    parse: Kj,
    stringify: Ji
  } } = e, { queryLanguages: k = [tB] } = e, { queryLanguageId: C = k[0].id } = e, { onChangeQueryLanguage: A = rs } = e, { onChange: w = null } = e, { onRenderValue: M = xx } = e, { onClassName: N = () => {
  } } = e, { onRenderMenu: T = rs } = e, { onChangeMode: O = rs } = e, { onError: W = (G) => {
    console.error(G), alert(G.toString());
  } } = e, { onFocus: H = rs } = e, { onBlur: I = rs } = e, z = Nc(), L = !1, K, F, D = null, X = m;
  function ue() {
    return s;
  }
  function q(G) {
    r("set");
    const ce = Tg(G);
    if (ce)
      throw new Error(ce);
    n(19, z = Nc()), n(0, s = G);
  }
  function ee(G) {
    r("update");
    const ce = Tg(G);
    if (ce)
      throw new Error(ce);
    n(0, s = G);
  }
  function ie(G) {
    if (Ia(s))
      try {
        n(0, s = {
          json: m.parse(s.text),
          text: void 0
        });
      } catch {
        throw new Error("Cannot apply patch: current document contains invalid JSON");
      }
    return K.patch(G);
  }
  function ne(G) {
    K.expand(G);
  }
  function je(G) {
    K.transform(G);
  }
  function Ie() {
    return K.validate();
  }
  function Xe() {
    return K.acceptAutoRepair();
  }
  function le(G) {
    return K.scrollTo(G);
  }
  function Ne(G) {
    return K.findElement(G);
  }
  function nt() {
    K.focus();
  }
  function ke() {
    K.refresh();
  }
  function fe(G, ce, De) {
    n(0, s = G), w && w(G, ce, De);
  }
  function Pe() {
    n(20, L = !0), H && H();
  }
  function ae() {
    n(20, L = !1), I && I();
  }
  async function $(G) {
    c !== G && (n(1, c = G), await Qi(), nt(), O(G));
  }
  function he(G) {
    r("handleChangeQueryLanguage", G), n(33, C = G), A(G);
  }
  function Ce({ id: G, json: ce, rootPath: De, onTransform: We, onClose: pt }) {
    o || F(
      fW,
      {
        id: G,
        json: ce,
        rootPath: De,
        indentation: l,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        parser: m,
        parseMemoizeOne: i,
        validationParser: S,
        pathParser: v,
        queryLanguages: k,
        queryLanguageId: C,
        onChangeQueryLanguage: he,
        onRenderValue: M,
        onClassName: N,
        onTransform: We
      },
      _R,
      { onClose: pt }
    );
  }
  function J({ id: G, json: ce, rootPath: De, onSort: We, onClose: pt }) {
    o || F(mW, { id: G, json: ce, rootPath: De, onSort: We }, bR, { onClose: pt });
  }
  function y({ content: G, path: ce, onPatch: De, onClose: We }) {
    r("onJSONEditorModal", { content: G, path: ce }), n(23, D = {
      component: K4(EZ, {
        content: G,
        path: ce,
        onPatch: De,
        readOnly: o,
        indentation: l,
        tabSize: a,
        mainMenuBar: u,
        navigationBar: f,
        statusBar: h,
        escapeControlCharacters: d,
        escapeUnicodeCharacters: p,
        flattenColumns: g,
        parser: m,
        validator: void 0,
        validationParser: S,
        pathParser: v,
        onRenderValue: M,
        onClassName: N,
        onRenderMenu: T,
        onSortModal: J,
        onTransformModal: Ce
      }),
      callbacks: { onClose: We }
    });
  }
  function R() {
    var G;
    (G = D == null ? void 0 : D.callbacks) == null || G.onClose(), n(23, D = null);
  }
  function B(G) {
    F = G, n(22, F);
  }
  function Q(G) {
    _t[G ? "unshift" : "push"](() => {
      K = G, n(21, K);
    });
  }
  return t.$$set = (G) => {
    "content" in G && n(0, s = G.content), "readOnly" in G && n(2, o = G.readOnly), "indentation" in G && n(3, l = G.indentation), "tabSize" in G && n(4, a = G.tabSize), "mode" in G && n(1, c = G.mode), "mainMenuBar" in G && n(5, u = G.mainMenuBar), "navigationBar" in G && n(6, f = G.navigationBar), "statusBar" in G && n(7, h = G.statusBar), "escapeControlCharacters" in G && n(8, d = G.escapeControlCharacters), "escapeUnicodeCharacters" in G && n(9, p = G.escapeUnicodeCharacters), "flattenColumns" in G && n(10, g = G.flattenColumns), "parser" in G && n(11, m = G.parser), "validator" in G && n(12, _ = G.validator), "validationParser" in G && n(13, S = G.validationParser), "pathParser" in G && n(14, v = G.pathParser), "queryLanguages" in G && n(34, k = G.queryLanguages), "queryLanguageId" in G && n(33, C = G.queryLanguageId), "onChangeQueryLanguage" in G && n(35, A = G.onChangeQueryLanguage), "onChange" in G && n(36, w = G.onChange), "onRenderValue" in G && n(15, M = G.onRenderValue), "onClassName" in G && n(16, N = G.onClassName), "onRenderMenu" in G && n(17, T = G.onRenderMenu), "onChangeMode" in G && n(37, O = G.onChangeMode), "onError" in G && n(18, W = G.onError), "onFocus" in G && n(38, H = G.onFocus), "onBlur" in G && n(39, I = G.onBlur);
  }, t.$$.update = () => {
    if (t.$$.dirty[0] & 2049 | t.$$.dirty[1] & 8388608 && (Cj(m, X) || (r("parser changed, recreate editor"), K0(s) && n(0, s = {
      json: m.parse(X.stringify(s.json))
    }), n(54, X = m), n(19, z = Nc()))), t.$$.dirty[0] & 1) {
      const G = Tg(s);
      G && console.error("Error: " + G);
    }
    t.$$.dirty[0] & 2048 && n(24, i = Ku(m.parse)), t.$$.dirty[0] & 2 && (r("mode changed to", c), c === "code" && console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'));
  }, [
    s,
    c,
    o,
    l,
    a,
    u,
    f,
    h,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    M,
    N,
    T,
    W,
    z,
    L,
    K,
    F,
    D,
    i,
    fe,
    Pe,
    ae,
    $,
    Ce,
    J,
    y,
    R,
    C,
    k,
    A,
    w,
    O,
    H,
    I,
    ue,
    q,
    ee,
    ie,
    ne,
    je,
    Ie,
    Xe,
    le,
    Ne,
    nt,
    ke,
    eM,
    tM,
    X,
    B,
    Q
  ];
}
class NZ extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      DZ,
      IZ,
      yt,
      {
        content: 0,
        readOnly: 2,
        indentation: 3,
        tabSize: 4,
        mode: 1,
        mainMenuBar: 5,
        navigationBar: 6,
        statusBar: 7,
        escapeControlCharacters: 8,
        escapeUnicodeCharacters: 9,
        flattenColumns: 10,
        parser: 11,
        validator: 12,
        validationParser: 13,
        pathParser: 14,
        queryLanguages: 34,
        queryLanguageId: 33,
        onChangeQueryLanguage: 35,
        onChange: 36,
        onRenderValue: 15,
        onClassName: 16,
        onRenderMenu: 17,
        onChangeMode: 37,
        onError: 18,
        onFocus: 38,
        onBlur: 39,
        get: 40,
        set: 41,
        update: 42,
        patch: 43,
        expand: 44,
        transform: 45,
        validate: 46,
        acceptAutoRepair: 47,
        scrollTo: 48,
        findElement: 49,
        focus: 50,
        refresh: 51,
        updateProps: 52,
        destroy: 53
      },
      null,
      [-1, -1]
    );
  }
  get get() {
    return this.$$.ctx[40];
  }
  get set() {
    return this.$$.ctx[41];
  }
  get update() {
    return this.$$.ctx[42];
  }
  get patch() {
    return this.$$.ctx[43];
  }
  get expand() {
    return this.$$.ctx[44];
  }
  get transform() {
    return this.$$.ctx[45];
  }
  get validate() {
    return this.$$.ctx[46];
  }
  get acceptAutoRepair() {
    return this.$$.ctx[47];
  }
  get scrollTo() {
    return this.$$.ctx[48];
  }
  get findElement() {
    return this.$$.ctx[49];
  }
  get focus() {
    return this.$$.ctx[50];
  }
  get refresh() {
    return this.$$.ctx[51];
  }
  get updateProps() {
    return eM;
  }
  get destroy() {
    return tM;
  }
}
const LZ = NZ;
function Zf(t) {
  throw new Error('Could not dynamically require "' + t + '". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.');
}
function nM() {
  return {
    async: !1,
    baseUrl: null,
    breaks: !1,
    extensions: null,
    gfm: !0,
    headerIds: !0,
    headerPrefix: "",
    highlight: null,
    langPrefix: "language-",
    mangle: !0,
    pedantic: !1,
    renderer: null,
    sanitize: !1,
    sanitizer: null,
    silent: !1,
    smartypants: !1,
    tokenizer: null,
    walkTokens: null,
    xhtml: !1
  };
}
let uc = nM();
function jZ(t) {
  uc = t;
}
const iM = /[&<>"']/, BZ = new RegExp(iM.source, "g"), rM = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/, xZ = new RegExp(rM.source, "g"), FZ = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
}, kS = (t) => FZ[t];
function vi(t, e) {
  if (e) {
    if (iM.test(t))
      return t.replace(BZ, kS);
  } else if (rM.test(t))
    return t.replace(xZ, kS);
  return t;
}
const zZ = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function sM(t) {
  return t.replace(zZ, (e, n) => (n = n.toLowerCase(), n === "colon" ? ":" : n.charAt(0) === "#" ? n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1)) : ""));
}
const VZ = /(^|[^\[])\^/g;
function $t(t, e) {
  t = typeof t == "string" ? t : t.source, e = e || "";
  const n = {
    replace: (i, r) => (r = r.source || r, r = r.replace(VZ, "$1"), t = t.replace(i, r), n),
    getRegex: () => new RegExp(t, e)
  };
  return n;
}
const UZ = /[^\w:]/g, HZ = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function CS(t, e, n) {
  if (t) {
    let i;
    try {
      i = decodeURIComponent(sM(n)).replace(UZ, "").toLowerCase();
    } catch {
      return null;
    }
    if (i.indexOf("javascript:") === 0 || i.indexOf("vbscript:") === 0 || i.indexOf("data:") === 0)
      return null;
  }
  e && !HZ.test(n) && (n = KZ(e, n));
  try {
    n = encodeURI(n).replace(/%25/g, "%");
  } catch {
    return null;
  }
  return n;
}
const $f = {}, WZ = /^[^:]+:\/*[^/]*$/, qZ = /^([^:]+:)[\s\S]*$/, JZ = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function KZ(t, e) {
  $f[" " + t] || (WZ.test(t) ? $f[" " + t] = t + "/" : $f[" " + t] = Ah(t, "/", !0)), t = $f[" " + t];
  const n = t.indexOf(":") === -1;
  return e.substring(0, 2) === "//" ? n ? e : t.replace(qZ, "$1") + e : e.charAt(0) === "/" ? n ? e : t.replace(JZ, "$1") + e : t + e;
}
const jd = { exec: function() {
} };
function Kr(t) {
  let e = 1, n, i;
  for (; e < arguments.length; e++) {
    n = arguments[e];
    for (i in n)
      Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
  }
  return t;
}
function SS(t, e) {
  const n = t.replace(/\|/g, (s, o, l) => {
    let a = !1, c = o;
    for (; --c >= 0 && l[c] === "\\"; )
      a = !a;
    return a ? "|" : " |";
  }), i = n.split(/ \|/);
  let r = 0;
  if (i[0].trim() || i.shift(), i.length > 0 && !i[i.length - 1].trim() && i.pop(), i.length > e)
    i.splice(e);
  else
    for (; i.length < e; )
      i.push("");
  for (; r < i.length; r++)
    i[r] = i[r].trim().replace(/\\\|/g, "|");
  return i;
}
function Ah(t, e, n) {
  const i = t.length;
  if (i === 0)
    return "";
  let r = 0;
  for (; r < i; ) {
    const s = t.charAt(i - r - 1);
    if (s === e && !n)
      r++;
    else if (s !== e && n)
      r++;
    else
      break;
  }
  return t.slice(0, i - r);
}
function GZ(t, e) {
  if (t.indexOf(e[1]) === -1)
    return -1;
  const n = t.length;
  let i = 0, r = 0;
  for (; r < n; r++)
    if (t[r] === "\\")
      r++;
    else if (t[r] === e[0])
      i++;
    else if (t[r] === e[1] && (i--, i < 0))
      return r;
  return -1;
}
function oM(t) {
  t && t.sanitize && !t.silent && console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
}
function ES(t, e) {
  if (e < 1)
    return "";
  let n = "";
  for (; e > 1; )
    e & 1 && (n += t), e >>= 1, t += t;
  return n + t;
}
function AS(t, e, n, i) {
  const r = e.href, s = e.title ? vi(e.title) : null, o = t[1].replace(/\\([\[\]])/g, "$1");
  if (t[0].charAt(0) !== "!") {
    i.state.inLink = !0;
    const l = {
      type: "link",
      raw: n,
      href: r,
      title: s,
      text: o,
      tokens: i.inlineTokens(o)
    };
    return i.state.inLink = !1, l;
  }
  return {
    type: "image",
    raw: n,
    href: r,
    title: s,
    text: vi(o)
  };
}
function YZ(t, e) {
  const n = t.match(/^(\s+)(?:```)/);
  if (n === null)
    return e;
  const i = n[1];
  return e.split(`
`).map((r) => {
    const s = r.match(/^\s+/);
    if (s === null)
      return r;
    const [o] = s;
    return o.length >= i.length ? r.slice(i.length) : r;
  }).join(`
`);
}
class Xb {
  constructor(e) {
    this.options = e || uc;
  }
  space(e) {
    const n = this.rules.block.newline.exec(e);
    if (n && n[0].length > 0)
      return {
        type: "space",
        raw: n[0]
      };
  }
  code(e) {
    const n = this.rules.block.code.exec(e);
    if (n) {
      const i = n[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: n[0],
        codeBlockStyle: "indented",
        text: this.options.pedantic ? i : Ah(i, `
`)
      };
    }
  }
  fences(e) {
    const n = this.rules.block.fences.exec(e);
    if (n) {
      const i = n[0], r = YZ(i, n[3] || "");
      return {
        type: "code",
        raw: i,
        lang: n[2] ? n[2].trim().replace(this.rules.inline._escapes, "$1") : n[2],
        text: r
      };
    }
  }
  heading(e) {
    const n = this.rules.block.heading.exec(e);
    if (n) {
      let i = n[2].trim();
      if (/#$/.test(i)) {
        const r = Ah(i, "#");
        (this.options.pedantic || !r || / $/.test(r)) && (i = r.trim());
      }
      return {
        type: "heading",
        raw: n[0],
        depth: n[1].length,
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  hr(e) {
    const n = this.rules.block.hr.exec(e);
    if (n)
      return {
        type: "hr",
        raw: n[0]
      };
  }
  blockquote(e) {
    const n = this.rules.block.blockquote.exec(e);
    if (n) {
      const i = n[0].replace(/^ *>[ \t]?/gm, ""), r = this.lexer.state.top;
      this.lexer.state.top = !0;
      const s = this.lexer.blockTokens(i);
      return this.lexer.state.top = r, {
        type: "blockquote",
        raw: n[0],
        tokens: s,
        text: i
      };
    }
  }
  list(e) {
    let n = this.rules.block.list.exec(e);
    if (n) {
      let i, r, s, o, l, a, c, u, f, h, d, p, g = n[1].trim();
      const m = g.length > 1, _ = {
        type: "list",
        raw: "",
        ordered: m,
        start: m ? +g.slice(0, -1) : "",
        loose: !1,
        items: []
      };
      g = m ? `\\d{1,9}\\${g.slice(-1)}` : `\\${g}`, this.options.pedantic && (g = m ? g : "[*+-]");
      const S = new RegExp(`^( {0,3}${g})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      for (; e && (p = !1, !(!(n = S.exec(e)) || this.rules.block.hr.test(e))); ) {
        if (i = n[0], e = e.substring(i.length), u = n[2].split(`
`, 1)[0], f = e.split(`
`, 1)[0], this.options.pedantic ? (o = 2, d = u.trimLeft()) : (o = n[2].search(/[^ ]/), o = o > 4 ? 1 : o, d = u.slice(o), o += n[1].length), a = !1, !u && /^ *$/.test(f) && (i += f + `
`, e = e.substring(f.length + 1), p = !0), !p) {
          const k = new RegExp(`^ {0,${Math.min(3, o - 1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`), C = new RegExp(`^ {0,${Math.min(3, o - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`), A = new RegExp(`^ {0,${Math.min(3, o - 1)}}(?:\`\`\`|~~~)`), w = new RegExp(`^ {0,${Math.min(3, o - 1)}}#`);
          for (; e && (h = e.split(`
`, 1)[0], u = h, this.options.pedantic && (u = u.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ")), !(A.test(u) || w.test(u) || k.test(u) || C.test(e))); ) {
            if (u.search(/[^ ]/) >= o || !u.trim())
              d += `
` + u.slice(o);
            else if (!a)
              d += `
` + u;
            else
              break;
            !a && !u.trim() && (a = !0), i += h + `
`, e = e.substring(h.length + 1);
          }
        }
        _.loose || (c ? _.loose = !0 : /\n *\n *$/.test(i) && (c = !0)), this.options.gfm && (r = /^\[[ xX]\] /.exec(d), r && (s = r[0] !== "[ ] ", d = d.replace(/^\[[ xX]\] +/, ""))), _.items.push({
          type: "list_item",
          raw: i,
          task: !!r,
          checked: s,
          loose: !1,
          text: d
        }), _.raw += i;
      }
      _.items[_.items.length - 1].raw = i.trimRight(), _.items[_.items.length - 1].text = d.trimRight(), _.raw = _.raw.trimRight();
      const v = _.items.length;
      for (l = 0; l < v; l++)
        if (this.lexer.state.top = !1, _.items[l].tokens = this.lexer.blockTokens(_.items[l].text, []), !_.loose) {
          const k = _.items[l].tokens.filter((A) => A.type === "space"), C = k.length > 0 && k.some((A) => /\n.*\n/.test(A.raw));
          _.loose = C;
        }
      if (_.loose)
        for (l = 0; l < v; l++)
          _.items[l].loose = !0;
      return _;
    }
  }
  html(e) {
    const n = this.rules.block.html.exec(e);
    if (n) {
      const i = {
        type: "html",
        raw: n[0],
        pre: !this.options.sanitizer && (n[1] === "pre" || n[1] === "script" || n[1] === "style"),
        text: n[0]
      };
      if (this.options.sanitize) {
        const r = this.options.sanitizer ? this.options.sanitizer(n[0]) : vi(n[0]);
        i.type = "paragraph", i.text = r, i.tokens = this.lexer.inline(r);
      }
      return i;
    }
  }
  def(e) {
    const n = this.rules.block.def.exec(e);
    if (n) {
      const i = n[1].toLowerCase().replace(/\s+/g, " "), r = n[2] ? n[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "", s = n[3] ? n[3].substring(1, n[3].length - 1).replace(this.rules.inline._escapes, "$1") : n[3];
      return {
        type: "def",
        tag: i,
        raw: n[0],
        href: r,
        title: s
      };
    }
  }
  table(e) {
    const n = this.rules.block.table.exec(e);
    if (n) {
      const i = {
        type: "table",
        header: SS(n[1]).map((r) => ({ text: r })),
        align: n[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: n[3] && n[3].trim() ? n[3].replace(/\n[ \t]*$/, "").split(`
`) : []
      };
      if (i.header.length === i.align.length) {
        i.raw = n[0];
        let r = i.align.length, s, o, l, a;
        for (s = 0; s < r; s++)
          /^ *-+: *$/.test(i.align[s]) ? i.align[s] = "right" : /^ *:-+: *$/.test(i.align[s]) ? i.align[s] = "center" : /^ *:-+ *$/.test(i.align[s]) ? i.align[s] = "left" : i.align[s] = null;
        for (r = i.rows.length, s = 0; s < r; s++)
          i.rows[s] = SS(i.rows[s], i.header.length).map((c) => ({ text: c }));
        for (r = i.header.length, o = 0; o < r; o++)
          i.header[o].tokens = this.lexer.inline(i.header[o].text);
        for (r = i.rows.length, o = 0; o < r; o++)
          for (a = i.rows[o], l = 0; l < a.length; l++)
            a[l].tokens = this.lexer.inline(a[l].text);
        return i;
      }
    }
  }
  lheading(e) {
    const n = this.rules.block.lheading.exec(e);
    if (n)
      return {
        type: "heading",
        raw: n[0],
        depth: n[2].charAt(0) === "=" ? 1 : 2,
        text: n[1],
        tokens: this.lexer.inline(n[1])
      };
  }
  paragraph(e) {
    const n = this.rules.block.paragraph.exec(e);
    if (n) {
      const i = n[1].charAt(n[1].length - 1) === `
` ? n[1].slice(0, -1) : n[1];
      return {
        type: "paragraph",
        raw: n[0],
        text: i,
        tokens: this.lexer.inline(i)
      };
    }
  }
  text(e) {
    const n = this.rules.block.text.exec(e);
    if (n)
      return {
        type: "text",
        raw: n[0],
        text: n[0],
        tokens: this.lexer.inline(n[0])
      };
  }
  escape(e) {
    const n = this.rules.inline.escape.exec(e);
    if (n)
      return {
        type: "escape",
        raw: n[0],
        text: vi(n[1])
      };
  }
  tag(e) {
    const n = this.rules.inline.tag.exec(e);
    if (n)
      return !this.lexer.state.inLink && /^<a /i.test(n[0]) ? this.lexer.state.inLink = !0 : this.lexer.state.inLink && /^<\/a>/i.test(n[0]) && (this.lexer.state.inLink = !1), !this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(n[0]) ? this.lexer.state.inRawBlock = !0 : this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0]) && (this.lexer.state.inRawBlock = !1), {
        type: this.options.sanitize ? "text" : "html",
        raw: n[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(n[0]) : vi(n[0]) : n[0]
      };
  }
  link(e) {
    const n = this.rules.inline.link.exec(e);
    if (n) {
      const i = n[2].trim();
      if (!this.options.pedantic && /^</.test(i)) {
        if (!/>$/.test(i))
          return;
        const o = Ah(i.slice(0, -1), "\\");
        if ((i.length - o.length) % 2 === 0)
          return;
      } else {
        const o = GZ(n[2], "()");
        if (o > -1) {
          const a = (n[0].indexOf("!") === 0 ? 5 : 4) + n[1].length + o;
          n[2] = n[2].substring(0, o), n[0] = n[0].substring(0, a).trim(), n[3] = "";
        }
      }
      let r = n[2], s = "";
      if (this.options.pedantic) {
        const o = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);
        o && (r = o[1], s = o[3]);
      } else
        s = n[3] ? n[3].slice(1, -1) : "";
      return r = r.trim(), /^</.test(r) && (this.options.pedantic && !/>$/.test(i) ? r = r.slice(1) : r = r.slice(1, -1)), AS(n, {
        href: r && r.replace(this.rules.inline._escapes, "$1"),
        title: s && s.replace(this.rules.inline._escapes, "$1")
      }, n[0], this.lexer);
    }
  }
  reflink(e, n) {
    let i;
    if ((i = this.rules.inline.reflink.exec(e)) || (i = this.rules.inline.nolink.exec(e))) {
      let r = (i[2] || i[1]).replace(/\s+/g, " ");
      if (r = n[r.toLowerCase()], !r) {
        const s = i[0].charAt(0);
        return {
          type: "text",
          raw: s,
          text: s
        };
      }
      return AS(i, r, i[0], this.lexer);
    }
  }
  emStrong(e, n, i = "") {
    let r = this.rules.inline.emStrong.lDelim.exec(e);
    if (!r || r[3] && i.match(/[\p{L}\p{N}]/u))
      return;
    const s = r[1] || r[2] || "";
    if (!s || s && (i === "" || this.rules.inline.punctuation.exec(i))) {
      const o = r[0].length - 1;
      let l, a, c = o, u = 0;
      const f = r[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      for (f.lastIndex = 0, n = n.slice(-1 * e.length + o); (r = f.exec(n)) != null; ) {
        if (l = r[1] || r[2] || r[3] || r[4] || r[5] || r[6], !l)
          continue;
        if (a = l.length, r[3] || r[4]) {
          c += a;
          continue;
        } else if ((r[5] || r[6]) && o % 3 && !((o + a) % 3)) {
          u += a;
          continue;
        }
        if (c -= a, c > 0)
          continue;
        a = Math.min(a, a + c + u);
        const h = e.slice(0, o + r.index + (r[0].length - l.length) + a);
        if (Math.min(o, a) % 2) {
          const p = h.slice(1, -1);
          return {
            type: "em",
            raw: h,
            text: p,
            tokens: this.lexer.inlineTokens(p)
          };
        }
        const d = h.slice(2, -2);
        return {
          type: "strong",
          raw: h,
          text: d,
          tokens: this.lexer.inlineTokens(d)
        };
      }
    }
  }
  codespan(e) {
    const n = this.rules.inline.code.exec(e);
    if (n) {
      let i = n[2].replace(/\n/g, " ");
      const r = /[^ ]/.test(i), s = /^ /.test(i) && / $/.test(i);
      return r && s && (i = i.substring(1, i.length - 1)), i = vi(i, !0), {
        type: "codespan",
        raw: n[0],
        text: i
      };
    }
  }
  br(e) {
    const n = this.rules.inline.br.exec(e);
    if (n)
      return {
        type: "br",
        raw: n[0]
      };
  }
  del(e) {
    const n = this.rules.inline.del.exec(e);
    if (n)
      return {
        type: "del",
        raw: n[0],
        text: n[2],
        tokens: this.lexer.inlineTokens(n[2])
      };
  }
  autolink(e, n) {
    const i = this.rules.inline.autolink.exec(e);
    if (i) {
      let r, s;
      return i[2] === "@" ? (r = vi(this.options.mangle ? n(i[1]) : i[1]), s = "mailto:" + r) : (r = vi(i[1]), s = r), {
        type: "link",
        raw: i[0],
        text: r,
        href: s,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  url(e, n) {
    let i;
    if (i = this.rules.inline.url.exec(e)) {
      let r, s;
      if (i[2] === "@")
        r = vi(this.options.mangle ? n(i[0]) : i[0]), s = "mailto:" + r;
      else {
        let o;
        do
          o = i[0], i[0] = this.rules.inline._backpedal.exec(i[0])[0];
        while (o !== i[0]);
        r = vi(i[0]), i[1] === "www." ? s = "http://" + i[0] : s = i[0];
      }
      return {
        type: "link",
        raw: i[0],
        text: r,
        href: s,
        tokens: [
          {
            type: "text",
            raw: r,
            text: r
          }
        ]
      };
    }
  }
  inlineText(e, n) {
    const i = this.rules.inline.text.exec(e);
    if (i) {
      let r;
      return this.lexer.state.inRawBlock ? r = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(i[0]) : vi(i[0]) : i[0] : r = vi(this.options.smartypants ? n(i[0]) : i[0]), {
        type: "text",
        raw: i[0],
        text: r
      };
    }
  }
}
const ut = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: jd,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
ut._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
ut._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
ut.def = $t(ut.def).replace("label", ut._label).replace("title", ut._title).getRegex();
ut.bullet = /(?:[*+-]|\d{1,9}[.)])/;
ut.listItemStart = $t(/^( *)(bull) */).replace("bull", ut.bullet).getRegex();
ut.list = $t(ut.list).replace(/bull/g, ut.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + ut.def.source + ")").getRegex();
ut._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
ut._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
ut.html = $t(ut.html, "i").replace("comment", ut._comment).replace("tag", ut._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
ut.paragraph = $t(ut._paragraph).replace("hr", ut.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", ut._tag).getRegex();
ut.blockquote = $t(ut.blockquote).replace("paragraph", ut.paragraph).getRegex();
ut.normal = Kr({}, ut);
ut.gfm = Kr({}, ut.normal, {
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
});
ut.gfm.table = $t(ut.gfm.table).replace("hr", ut.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", ut._tag).getRegex();
ut.gfm.paragraph = $t(ut._paragraph).replace("hr", ut.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", ut.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", ut._tag).getRegex();
ut.pedantic = Kr({}, ut.normal, {
  html: $t(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", ut._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: jd,
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: $t(ut.normal._paragraph).replace("hr", ut.hr).replace("heading", ` *#{1,6} *[^
]`).replace("lheading", ut.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
});
const Ze = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: jd,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: jd,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
Ze._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
Ze.punctuation = $t(Ze.punctuation).replace(/punctuation/g, Ze._punctuation).getRegex();
Ze.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
Ze.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
Ze._comment = $t(ut._comment).replace("(?:-->|$)", "-->").getRegex();
Ze.emStrong.lDelim = $t(Ze.emStrong.lDelim).replace(/punct/g, Ze._punctuation).getRegex();
Ze.emStrong.rDelimAst = $t(Ze.emStrong.rDelimAst, "g").replace(/punct/g, Ze._punctuation).getRegex();
Ze.emStrong.rDelimUnd = $t(Ze.emStrong.rDelimUnd, "g").replace(/punct/g, Ze._punctuation).getRegex();
Ze._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
Ze._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
Ze._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
Ze.autolink = $t(Ze.autolink).replace("scheme", Ze._scheme).replace("email", Ze._email).getRegex();
Ze._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
Ze.tag = $t(Ze.tag).replace("comment", Ze._comment).replace("attribute", Ze._attribute).getRegex();
Ze._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
Ze._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
Ze._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
Ze.link = $t(Ze.link).replace("label", Ze._label).replace("href", Ze._href).replace("title", Ze._title).getRegex();
Ze.reflink = $t(Ze.reflink).replace("label", Ze._label).replace("ref", ut._label).getRegex();
Ze.nolink = $t(Ze.nolink).replace("ref", ut._label).getRegex();
Ze.reflinkSearch = $t(Ze.reflinkSearch, "g").replace("reflink", Ze.reflink).replace("nolink", Ze.nolink).getRegex();
Ze.normal = Kr({}, Ze);
Ze.pedantic = Kr({}, Ze.normal, {
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: $t(/^!?\[(label)\]\((.*?)\)/).replace("label", Ze._label).getRegex(),
  reflink: $t(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", Ze._label).getRegex()
});
Ze.gfm = Kr({}, Ze.normal, {
  escape: $t(Ze.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
});
Ze.gfm.url = $t(Ze.gfm.url, "i").replace("email", Ze.gfm._extended_email).getRegex();
Ze.breaks = Kr({}, Ze.gfm, {
  br: $t(Ze.br).replace("{2,}", "*").getRegex(),
  text: $t(Ze.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
});
function XZ(t) {
  return t.replace(/---/g, "â€”").replace(/--/g, "â€“").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1â€˜").replace(/'/g, "â€™").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1â€œ").replace(/"/g, "â€").replace(/\.{3}/g, "â€¦");
}
function MS(t) {
  let e = "", n, i;
  const r = t.length;
  for (n = 0; n < r; n++)
    i = t.charCodeAt(n), Math.random() > 0.5 && (i = "x" + i.toString(16)), e += "&#" + i + ";";
  return e;
}
class eo {
  constructor(e) {
    this.tokens = [], this.tokens.links = /* @__PURE__ */ Object.create(null), this.options = e || uc, this.options.tokenizer = this.options.tokenizer || new Xb(), this.tokenizer = this.options.tokenizer, this.tokenizer.options = this.options, this.tokenizer.lexer = this, this.inlineQueue = [], this.state = {
      inLink: !1,
      inRawBlock: !1,
      top: !0
    };
    const n = {
      block: ut.normal,
      inline: Ze.normal
    };
    this.options.pedantic ? (n.block = ut.pedantic, n.inline = Ze.pedantic) : this.options.gfm && (n.block = ut.gfm, this.options.breaks ? n.inline = Ze.breaks : n.inline = Ze.gfm), this.tokenizer.rules = n;
  }
  static get rules() {
    return {
      block: ut,
      inline: Ze
    };
  }
  static lex(e, n) {
    return new eo(n).lex(e);
  }
  static lexInline(e, n) {
    return new eo(n).inlineTokens(e);
  }
  lex(e) {
    e = e.replace(/\r\n|\r/g, `
`), this.blockTokens(e, this.tokens);
    let n;
    for (; n = this.inlineQueue.shift(); )
      this.inlineTokens(n.src, n.tokens);
    return this.tokens;
  }
  blockTokens(e, n = []) {
    this.options.pedantic ? e = e.replace(/\t/g, "    ").replace(/^ +$/gm, "") : e = e.replace(/^( *)(\t+)/gm, (l, a, c) => a + "    ".repeat(c.length));
    let i, r, s, o;
    for (; e; )
      if (!(this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((l) => (i = l.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.space(e)) {
          e = e.substring(i.raw.length), i.raw.length === 1 && n.length > 0 ? n[n.length - 1].raw += `
` : n.push(i);
          continue;
        }
        if (i = this.tokenizer.code(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.fences(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.heading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.hr(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.blockquote(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.list(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.html(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.def(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && (r.type === "paragraph" || r.type === "text") ? (r.raw += `
` + i.raw, r.text += `
` + i.raw, this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : this.tokens.links[i.tag] || (this.tokens.links[i.tag] = {
            href: i.href,
            title: i.title
          });
          continue;
        }
        if (i = this.tokenizer.table(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.lheading(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (s = e, this.options.extensions && this.options.extensions.startBlock) {
          let l = 1 / 0;
          const a = e.slice(1);
          let c;
          this.options.extensions.startBlock.forEach(function(u) {
            c = u.call({ lexer: this }, a), typeof c == "number" && c >= 0 && (l = Math.min(l, c));
          }), l < 1 / 0 && l >= 0 && (s = e.substring(0, l + 1));
        }
        if (this.state.top && (i = this.tokenizer.paragraph(s))) {
          r = n[n.length - 1], o && r.type === "paragraph" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i), o = s.length !== e.length, e = e.substring(i.raw.length);
          continue;
        }
        if (i = this.tokenizer.text(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && r.type === "text" ? (r.raw += `
` + i.raw, r.text += `
` + i.text, this.inlineQueue.pop(), this.inlineQueue[this.inlineQueue.length - 1].src = r.text) : n.push(i);
          continue;
        }
        if (e) {
          const l = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(l);
            break;
          } else
            throw new Error(l);
        }
      }
    return this.state.top = !0, n;
  }
  inline(e, n = []) {
    return this.inlineQueue.push({ src: e, tokens: n }), n;
  }
  inlineTokens(e, n = []) {
    let i, r, s, o = e, l, a, c;
    if (this.tokens.links) {
      const u = Object.keys(this.tokens.links);
      if (u.length > 0)
        for (; (l = this.tokenizer.rules.inline.reflinkSearch.exec(o)) != null; )
          u.includes(l[0].slice(l[0].lastIndexOf("[") + 1, -1)) && (o = o.slice(0, l.index) + "[" + ES("a", l[0].length - 2) + "]" + o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex));
    }
    for (; (l = this.tokenizer.rules.inline.blockSkip.exec(o)) != null; )
      o = o.slice(0, l.index) + "[" + ES("a", l[0].length - 2) + "]" + o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    for (; (l = this.tokenizer.rules.inline.escapedEmSt.exec(o)) != null; )
      o = o.slice(0, l.index + l[0].length - 2) + "++" + o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex), this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    for (; e; )
      if (a || (c = ""), a = !1, !(this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((u) => (i = u.call({ lexer: this }, e, n)) ? (e = e.substring(i.raw.length), n.push(i), !0) : !1))) {
        if (i = this.tokenizer.escape(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.tag(e)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.link(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.reflink(e, this.tokens.links)) {
          e = e.substring(i.raw.length), r = n[n.length - 1], r && i.type === "text" && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (i = this.tokenizer.emStrong(e, o, c)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.codespan(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.br(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.del(e)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (i = this.tokenizer.autolink(e, MS)) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (!this.state.inLink && (i = this.tokenizer.url(e, MS))) {
          e = e.substring(i.raw.length), n.push(i);
          continue;
        }
        if (s = e, this.options.extensions && this.options.extensions.startInline) {
          let u = 1 / 0;
          const f = e.slice(1);
          let h;
          this.options.extensions.startInline.forEach(function(d) {
            h = d.call({ lexer: this }, f), typeof h == "number" && h >= 0 && (u = Math.min(u, h));
          }), u < 1 / 0 && u >= 0 && (s = e.substring(0, u + 1));
        }
        if (i = this.tokenizer.inlineText(s, XZ)) {
          e = e.substring(i.raw.length), i.raw.slice(-1) !== "_" && (c = i.raw.slice(-1)), a = !0, r = n[n.length - 1], r && r.type === "text" ? (r.raw += i.raw, r.text += i.text) : n.push(i);
          continue;
        }
        if (e) {
          const u = "Infinite loop on byte: " + e.charCodeAt(0);
          if (this.options.silent) {
            console.error(u);
            break;
          } else
            throw new Error(u);
        }
      }
    return n;
  }
}
class Qb {
  constructor(e) {
    this.options = e || uc;
  }
  code(e, n, i) {
    const r = (n || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const s = this.options.highlight(e, r);
      s != null && s !== e && (i = !0, e = s);
    }
    return e = e.replace(/\n$/, "") + `
`, r ? '<pre><code class="' + this.options.langPrefix + vi(r) + '">' + (i ? e : vi(e, !0)) + `</code></pre>
` : "<pre><code>" + (i ? e : vi(e, !0)) + `</code></pre>
`;
  }
  blockquote(e) {
    return `<blockquote>
${e}</blockquote>
`;
  }
  html(e) {
    return e;
  }
  heading(e, n, i, r) {
    if (this.options.headerIds) {
      const s = this.options.headerPrefix + r.slug(i);
      return `<h${n} id="${s}">${e}</h${n}>
`;
    }
    return `<h${n}>${e}</h${n}>
`;
  }
  hr() {
    return this.options.xhtml ? `<hr/>
` : `<hr>
`;
  }
  list(e, n, i) {
    const r = n ? "ol" : "ul", s = n && i !== 1 ? ' start="' + i + '"' : "";
    return "<" + r + s + `>
` + e + "</" + r + `>
`;
  }
  listitem(e) {
    return `<li>${e}</li>
`;
  }
  checkbox(e) {
    return "<input " + (e ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  paragraph(e) {
    return `<p>${e}</p>
`;
  }
  table(e, n) {
    return n && (n = `<tbody>${n}</tbody>`), `<table>
<thead>
` + e + `</thead>
` + n + `</table>
`;
  }
  tablerow(e) {
    return `<tr>
${e}</tr>
`;
  }
  tablecell(e, n) {
    const i = n.header ? "th" : "td";
    return (n.align ? `<${i} align="${n.align}">` : `<${i}>`) + e + `</${i}>
`;
  }
  strong(e) {
    return `<strong>${e}</strong>`;
  }
  em(e) {
    return `<em>${e}</em>`;
  }
  codespan(e) {
    return `<code>${e}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  del(e) {
    return `<del>${e}</del>`;
  }
  link(e, n, i) {
    if (e = CS(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = '<a href="' + e + '"';
    return n && (r += ' title="' + n + '"'), r += ">" + i + "</a>", r;
  }
  image(e, n, i) {
    if (e = CS(this.options.sanitize, this.options.baseUrl, e), e === null)
      return i;
    let r = `<img src="${e}" alt="${i}"`;
    return n && (r += ` title="${n}"`), r += this.options.xhtml ? "/>" : ">", r;
  }
  text(e) {
    return e;
  }
}
class lM {
  strong(e) {
    return e;
  }
  em(e) {
    return e;
  }
  codespan(e) {
    return e;
  }
  del(e) {
    return e;
  }
  html(e) {
    return e;
  }
  text(e) {
    return e;
  }
  link(e, n, i) {
    return "" + i;
  }
  image(e, n, i) {
    return "" + i;
  }
  br() {
    return "";
  }
}
class aM {
  constructor() {
    this.seen = {};
  }
  serialize(e) {
    return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  getNextSafeSlug(e, n) {
    let i = e, r = 0;
    if (this.seen.hasOwnProperty(i)) {
      r = this.seen[e];
      do
        r++, i = e + "-" + r;
      while (this.seen.hasOwnProperty(i));
    }
    return n || (this.seen[e] = r, this.seen[i] = 0), i;
  }
  slug(e, n = {}) {
    const i = this.serialize(e);
    return this.getNextSafeSlug(i, n.dryrun);
  }
}
class gs {
  constructor(e) {
    this.options = e || uc, this.options.renderer = this.options.renderer || new Qb(), this.renderer = this.options.renderer, this.renderer.options = this.options, this.textRenderer = new lM(), this.slugger = new aM();
  }
  static parse(e, n) {
    return new gs(n).parse(e);
  }
  static parseInline(e, n) {
    return new gs(n).parseInline(e);
  }
  parse(e, n = !0) {
    let i = "", r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A;
    const w = e.length;
    for (r = 0; r < w; r++) {
      if (d = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[d.type] && (A = this.options.extensions.renderers[d.type].call({ parser: this }, d), A !== !1 || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(d.type))) {
        i += A || "";
        continue;
      }
      switch (d.type) {
        case "space":
          continue;
        case "hr": {
          i += this.renderer.hr();
          continue;
        }
        case "heading": {
          i += this.renderer.heading(
            this.parseInline(d.tokens),
            d.depth,
            sM(this.parseInline(d.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          i += this.renderer.code(
            d.text,
            d.lang,
            d.escaped
          );
          continue;
        }
        case "table": {
          for (f = "", u = "", l = d.header.length, s = 0; s < l; s++)
            u += this.renderer.tablecell(
              this.parseInline(d.header[s].tokens),
              { header: !0, align: d.align[s] }
            );
          for (f += this.renderer.tablerow(u), h = "", l = d.rows.length, s = 0; s < l; s++) {
            for (c = d.rows[s], u = "", a = c.length, o = 0; o < a; o++)
              u += this.renderer.tablecell(
                this.parseInline(c[o].tokens),
                { header: !1, align: d.align[o] }
              );
            h += this.renderer.tablerow(u);
          }
          i += this.renderer.table(f, h);
          continue;
        }
        case "blockquote": {
          h = this.parse(d.tokens), i += this.renderer.blockquote(h);
          continue;
        }
        case "list": {
          for (p = d.ordered, g = d.start, m = d.loose, l = d.items.length, h = "", s = 0; s < l; s++)
            S = d.items[s], v = S.checked, k = S.task, _ = "", S.task && (C = this.renderer.checkbox(v), m ? S.tokens.length > 0 && S.tokens[0].type === "paragraph" ? (S.tokens[0].text = C + " " + S.tokens[0].text, S.tokens[0].tokens && S.tokens[0].tokens.length > 0 && S.tokens[0].tokens[0].type === "text" && (S.tokens[0].tokens[0].text = C + " " + S.tokens[0].tokens[0].text)) : S.tokens.unshift({
              type: "text",
              text: C
            }) : _ += C), _ += this.parse(S.tokens, m), h += this.renderer.listitem(_, k, v);
          i += this.renderer.list(h, p, g);
          continue;
        }
        case "html": {
          i += this.renderer.html(d.text);
          continue;
        }
        case "paragraph": {
          i += this.renderer.paragraph(this.parseInline(d.tokens));
          continue;
        }
        case "text": {
          for (h = d.tokens ? this.parseInline(d.tokens) : d.text; r + 1 < w && e[r + 1].type === "text"; )
            d = e[++r], h += `
` + (d.tokens ? this.parseInline(d.tokens) : d.text);
          i += n ? this.renderer.paragraph(h) : h;
          continue;
        }
        default: {
          const M = 'Token with "' + d.type + '" type was not found.';
          if (this.options.silent) {
            console.error(M);
            return;
          } else
            throw new Error(M);
        }
      }
    }
    return i;
  }
  parseInline(e, n) {
    n = n || this.renderer;
    let i = "", r, s, o;
    const l = e.length;
    for (r = 0; r < l; r++) {
      if (s = e[r], this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[s.type] && (o = this.options.extensions.renderers[s.type].call({ parser: this }, s), o !== !1 || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(s.type))) {
        i += o || "";
        continue;
      }
      switch (s.type) {
        case "escape": {
          i += n.text(s.text);
          break;
        }
        case "html": {
          i += n.html(s.text);
          break;
        }
        case "link": {
          i += n.link(s.href, s.title, this.parseInline(s.tokens, n));
          break;
        }
        case "image": {
          i += n.image(s.href, s.title, s.text);
          break;
        }
        case "strong": {
          i += n.strong(this.parseInline(s.tokens, n));
          break;
        }
        case "em": {
          i += n.em(this.parseInline(s.tokens, n));
          break;
        }
        case "codespan": {
          i += n.codespan(s.text);
          break;
        }
        case "br": {
          i += n.br();
          break;
        }
        case "del": {
          i += n.del(this.parseInline(s.tokens, n));
          break;
        }
        case "text": {
          i += n.text(s.text);
          break;
        }
        default: {
          const a = 'Token with "' + s.type + '" type was not found.';
          if (this.options.silent) {
            console.error(a);
            return;
          } else
            throw new Error(a);
        }
      }
    }
    return i;
  }
}
function it(t, e, n) {
  if (typeof t > "u" || t === null)
    throw new Error("marked(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  if (typeof e == "function" && (n = e, e = null), e = Kr({}, it.defaults, e || {}), oM(e), n) {
    const r = e.highlight;
    let s;
    try {
      s = eo.lex(t, e);
    } catch (a) {
      return n(a);
    }
    const o = function(a) {
      let c;
      if (!a)
        try {
          e.walkTokens && it.walkTokens(s, e.walkTokens), c = gs.parse(s, e);
        } catch (u) {
          a = u;
        }
      return e.highlight = r, a ? n(a) : n(null, c);
    };
    if (!r || r.length < 3 || (delete e.highlight, !s.length))
      return o();
    let l = 0;
    it.walkTokens(s, function(a) {
      a.type === "code" && (l++, setTimeout(() => {
        r(a.text, a.lang, function(c, u) {
          if (c)
            return o(c);
          u != null && u !== a.text && (a.text = u, a.escaped = !0), l--, l === 0 && o();
        });
      }, 0));
    }), l === 0 && o();
    return;
  }
  function i(r) {
    if (r.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + vi(r.message + "", !0) + "</pre>";
    throw r;
  }
  try {
    const r = eo.lex(t, e);
    if (e.walkTokens) {
      if (e.async)
        return Promise.all(it.walkTokens(r, e.walkTokens)).then(() => gs.parse(r, e)).catch(i);
      it.walkTokens(r, e.walkTokens);
    }
    return gs.parse(r, e);
  } catch (r) {
    i(r);
  }
}
it.options = it.setOptions = function(t) {
  return Kr(it.defaults, t), jZ(it.defaults), it;
};
it.getDefaults = nM;
it.defaults = uc;
it.use = function(...t) {
  const e = it.defaults.extensions || { renderers: {}, childTokens: {} };
  t.forEach((n) => {
    const i = Kr({}, n);
    if (i.async = it.defaults.async || i.async, n.extensions && (n.extensions.forEach((r) => {
      if (!r.name)
        throw new Error("extension name required");
      if (r.renderer) {
        const s = e.renderers[r.name];
        s ? e.renderers[r.name] = function(...o) {
          let l = r.renderer.apply(this, o);
          return l === !1 && (l = s.apply(this, o)), l;
        } : e.renderers[r.name] = r.renderer;
      }
      if (r.tokenizer) {
        if (!r.level || r.level !== "block" && r.level !== "inline")
          throw new Error("extension level must be 'block' or 'inline'");
        e[r.level] ? e[r.level].unshift(r.tokenizer) : e[r.level] = [r.tokenizer], r.start && (r.level === "block" ? e.startBlock ? e.startBlock.push(r.start) : e.startBlock = [r.start] : r.level === "inline" && (e.startInline ? e.startInline.push(r.start) : e.startInline = [r.start]));
      }
      r.childTokens && (e.childTokens[r.name] = r.childTokens);
    }), i.extensions = e), n.renderer) {
      const r = it.defaults.renderer || new Qb();
      for (const s in n.renderer) {
        const o = r[s];
        r[s] = (...l) => {
          let a = n.renderer[s].apply(r, l);
          return a === !1 && (a = o.apply(r, l)), a;
        };
      }
      i.renderer = r;
    }
    if (n.tokenizer) {
      const r = it.defaults.tokenizer || new Xb();
      for (const s in n.tokenizer) {
        const o = r[s];
        r[s] = (...l) => {
          let a = n.tokenizer[s].apply(r, l);
          return a === !1 && (a = o.apply(r, l)), a;
        };
      }
      i.tokenizer = r;
    }
    if (n.walkTokens) {
      const r = it.defaults.walkTokens;
      i.walkTokens = function(s) {
        let o = [];
        return o.push(n.walkTokens.call(this, s)), r && (o = o.concat(r.call(this, s))), o;
      };
    }
    it.setOptions(i);
  });
};
it.walkTokens = function(t, e) {
  let n = [];
  for (const i of t)
    switch (n = n.concat(e.call(it, i)), i.type) {
      case "table": {
        for (const r of i.header)
          n = n.concat(it.walkTokens(r.tokens, e));
        for (const r of i.rows)
          for (const s of r)
            n = n.concat(it.walkTokens(s.tokens, e));
        break;
      }
      case "list": {
        n = n.concat(it.walkTokens(i.items, e));
        break;
      }
      default:
        it.defaults.extensions && it.defaults.extensions.childTokens && it.defaults.extensions.childTokens[i.type] ? it.defaults.extensions.childTokens[i.type].forEach(function(r) {
          n = n.concat(it.walkTokens(i[r], e));
        }) : i.tokens && (n = n.concat(it.walkTokens(i.tokens, e)));
    }
  return n;
};
it.parseInline = function(t, e) {
  if (typeof t > "u" || t === null)
    throw new Error("marked.parseInline(): input parameter is undefined or null");
  if (typeof t != "string")
    throw new Error("marked.parseInline(): input parameter is of type " + Object.prototype.toString.call(t) + ", string expected");
  e = Kr({}, it.defaults, e || {}), oM(e);
  try {
    const n = eo.lexInline(t, e);
    return e.walkTokens && it.walkTokens(n, e.walkTokens), gs.parseInline(n, e);
  } catch (n) {
    if (n.message += `
Please report this to https://github.com/markedjs/marked.`, e.silent)
      return "<p>An error occurred:</p><pre>" + vi(n.message + "", !0) + "</pre>";
    throw n;
  }
};
it.Parser = gs;
it.parser = gs.parse;
it.Renderer = Qb;
it.TextRenderer = lM;
it.Lexer = eo;
it.lexer = eo.lex;
it.Tokenizer = Xb;
it.Slugger = aM;
it.parse = it;
it.options;
it.setOptions;
it.use;
it.walkTokens;
it.parseInline;
gs.parse;
eo.lex;
function OS(t, e, n) {
  const i = t.slice();
  return i[3] = e[n], i;
}
function TS(t, e) {
  let n, i, r;
  return {
    key: t,
    first: null,
    c() {
      n = j("calcite-combobox-item"), oe(n, "selected", ""), oe(n, "value", i = e[3]), oe(n, "text-label", r = e[3]), this.first = n;
    },
    m(s, o) {
      U(s, n, o);
    },
    p(s, o) {
      e = s, o & 1 && i !== (i = e[3]) && oe(n, "value", i), o & 1 && r !== (r = e[3]) && oe(n, "text-label", r);
    },
    d(s) {
      s && V(n);
    }
  };
}
function QZ(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s, o = t[0];
  const l = (a) => a[3];
  for (let a = 0; a < o.length; a += 1) {
    let c = OS(t, o, a), u = l(c);
    i.set(u, n[a] = TS(u, c));
  }
  return {
    c() {
      e = j("calcite-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      oe(e, "label", "Tags"), oe(e, "allow-custom-values", ""), oe(e, "placeholder", "Add/remove tags using Tab/Backspace key");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      r || (s = re(e, "calciteComboboxChange", t[1]), r = !0);
    },
    p(a, [c]) {
      c & 1 && (o = a[0], n = Ys(n, c, l, 1, a, o, i, e, Bu, TS, null, OS));
    },
    i: ye,
    o: ye,
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      r = !1, s();
    }
  };
}
function ZZ(t, e, n) {
  const i = Vl();
  let { tags: r = [] } = e;
  function s(o) {
    console.log("comboboxchanged", typeof o.target.value, o.target.value);
    let l;
    typeof o.target.value == "string" ? l = o.target.value === "" ? [] : [o.target.value] : o.target.value ? l = o.target.value : l = [], i("tagschanged", { value: l });
  }
  return t.$$set = (o) => {
    "tags" in o && n(0, r = o.tags);
  }, [r, s];
}
class $Z extends Ge {
  constructor(e) {
    super(), Ke(this, e, ZZ, QZ, Nt, { tags: 0 });
  }
}
function RS(t, e, n) {
  const i = t.slice();
  return i[29] = e[n], i;
}
function PS(t, e, n) {
  const i = t.slice();
  return i[32] = e[n], i;
}
function IS(t, e, n) {
  const i = t.slice();
  return i[35] = e[n], i;
}
function DS(t, e, n) {
  const i = t.slice();
  return i[38] = e[n], i;
}
function e$(t) {
  let e;
  return {
    c() {
      e = j("h1"), e.textContent = "Multiple nodes", b(e, "class", "svelte-1vvthkw");
    },
    m(n, i) {
      U(n, e, i);
    },
    p: ye,
    d(n) {
      n && V(e);
    }
  };
}
function t$(t) {
  var f;
  let e, n = t[0][0].label + "", i, r, s = !1, o, l = ["node", "edge"].includes((f = t[0][0]) == null ? void 0 : f.kind), a, c = s && NS(t), u = l && LS(t);
  return {
    c() {
      e = j("h1"), i = _e(n), r = Z(), c && c.c(), o = Z(), u && u.c(), a = rt(), b(e, "class", "svelte-1vvthkw");
    },
    m(h, d) {
      U(h, e, d), E(e, i), E(e, r), c && c.m(e, null), U(h, o, d), u && u.m(h, d), U(h, a, d);
    },
    p(h, d) {
      var p;
      d[0] & 1 && n !== (n = h[0][0].label + "") && ze(i, n), d[0] & 1 && (s = !1), s ? c ? c.p(h, d) : (c = NS(h), c.c(), c.m(e, null)) : c && (c.d(1), c = null), d[0] & 1 && (l = ["node", "edge"].includes((p = h[0][0]) == null ? void 0 : p.kind)), l ? u ? u.p(h, d) : (u = LS(h), u.c(), u.m(a.parentNode, a)) : u && (u.d(1), u = null);
    },
    d(h) {
      h && V(e), c && c.d(), h && V(o), u && u.d(h), h && V(a);
    }
  };
}
function NS(t) {
  let e, n, i;
  return {
    c() {
      e = j("sl-button"), e.innerHTML = '<sl-icon name="gear" label="Settings"></sl-icon>', oe(e, "variant", "default"), oe(e, "size", "small"), oe(e, "circle", "");
    },
    m(r, s) {
      U(r, e, s), n || (i = re(e, "click", t[10]), n = !0);
    },
    p: ye,
    d(r) {
      r && V(e), n = !1, i();
    }
  };
}
function LS(t) {
  let e, n = it(t[0][0].desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 1 && n !== (n = it(i[0][0].desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function jS(t) {
  let e, n, i, r, s, o, l, a, c, u = (t[0][0].kind === "node" || t[0][0].kind === "note") && BS(t), f = t[0][0].kind !== "note" && xS(t), h = t[0][0].kind === "node" && zS(t);
  return {
    c() {
      e = j("div"), n = j("sl-input"), r = Z(), u && u.c(), s = Z(), f && f.c(), o = Z(), h && h.c(), oe(n, "label", "Label"), oe(n, "type", "text"), oe(n, "size", "small"), oe(n, "value", i = t[0][0].label), b(e, "class", "node-panel svelte-1vvthkw");
    },
    m(d, p) {
      U(d, e, p), E(e, n), E(e, r), u && u.m(e, null), E(e, s), f && f.m(e, null), E(e, o), h && h.m(e, null), l = !0, a || (c = re(n, "sl-change", t[11]), a = !0);
    },
    p(d, p) {
      (!l || p[0] & 1 && i !== (i = d[0][0].label)) && oe(n, "value", i), d[0][0].kind === "node" || d[0][0].kind === "note" ? u ? u.p(d, p) : (u = BS(d), u.c(), u.m(e, s)) : u && (u.d(1), u = null), d[0][0].kind !== "note" ? f ? (f.p(d, p), p[0] & 1 && P(f, 1)) : (f = xS(d), f.c(), P(f, 1), f.m(e, o)) : f && (Ae(), x(f, 1, 1, () => {
        f = null;
      }), Me()), d[0][0].kind === "node" ? h ? h.p(d, p) : (h = zS(d), h.c(), h.m(e, null)) : h && (h.d(1), h = null);
    },
    i(d) {
      l || (P(f), l = !0);
    },
    o(d) {
      x(f), l = !1;
    },
    d(d) {
      d && V(e), u && u.d(), f && f.d(), h && h.d(), a = !1, c();
    }
  };
}
function BS(t) {
  let e, n, i, r;
  return {
    c() {
      e = j("sl-textarea"), oe(e, "label", "Notes"), oe(e, "placeholder", "Notes (these will be shown in the graph)..."), oe(e, "size", "small"), oe(e, "value", n = t[0][0].notes);
    },
    m(s, o) {
      U(s, e, o), i || (r = re(e, "sl-change", t[12]), i = !0);
    },
    p(s, o) {
      o[0] & 1 && n !== (n = s[0][0].notes) && oe(e, "value", n);
    },
    d(s) {
      s && V(e), i = !1, r();
    }
  };
}
function xS(t) {
  let e, n, i, r, s = t[0][0], o, l, a, c, u = FS(t);
  return {
    c() {
      e = j("sl-textarea"), n = j("p"), n.innerHTML = '<a href="https://www.markdownguide.org/cheat-sheet/" target="_blank">Learn about MarkDown</a>', r = Z(), u.c(), o = rt(), b(n, "slot", "help-text"), oe(e, "label", "Description"), oe(e, "placeholder", "Description in markdown..."), oe(e, "size", "small"), oe(e, "value", i = t[0][0].desc);
    },
    m(f, h) {
      U(f, e, h), E(e, n), U(f, r, h), u.m(f, h), U(f, o, h), l = !0, a || (c = re(e, "sl-change", t[13]), a = !0);
    },
    p(f, h) {
      (!l || h[0] & 1 && i !== (i = f[0][0].desc)) && oe(e, "value", i), h[0] & 1 && Nt(s, s = f[0][0]) ? (Ae(), x(u, 1, 1, ye), Me(), u = FS(f), u.c(), P(u, 1), u.m(o.parentNode, o)) : u.p(f, h);
    },
    i(f) {
      l || (P(u), l = !0);
    },
    o(f) {
      x(u), l = !1;
    },
    d(f) {
      f && V(e), f && V(r), f && V(o), u.d(f), a = !1, c();
    }
  };
}
function FS(t) {
  let e, n;
  return e = new $Z({
    props: { tags: t[0][0].tags }
  }), e.$on("tagschanged", t[14]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 1 && (s.tags = i[0][0].tags), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function zS(t) {
  var u;
  let e, n = (u = t[0][0].badge) == null ? void 0 : u.startsWith("http"), i, r, s, o, l = n && VS(t), a = t[1].theme.badges, c = [];
  for (let f = 0; f < a.length; f += 1)
    c[f] = US(DS(t, a, f));
  return {
    c() {
      e = j("sl-select"), l && l.c(), i = Z();
      for (let f = 0; f < c.length; f += 1)
        c[f].c();
      oe(e, "label", "Badge"), oe(e, "clearable", ""), oe(e, "value", r = t[0][0].badge || ""), oe(e, "placeholder", "Select badge");
    },
    m(f, h) {
      U(f, e, h), l && l.m(e, null), E(e, i);
      for (let d = 0; d < c.length; d += 1)
        c[d].m(e, null);
      s || (o = re(e, "sl-change", t[15]), s = !0);
    },
    p(f, h) {
      var d;
      if (h[0] & 1 && (n = (d = f[0][0].badge) == null ? void 0 : d.startsWith("http")), n ? l ? l.p(f, h) : (l = VS(f), l.c(), l.m(e, i)) : l && (l.d(1), l = null), h[0] & 3) {
        a = f[1].theme.badges;
        let p;
        for (p = 0; p < a.length; p += 1) {
          const g = DS(f, a, p);
          c[p] ? c[p].p(g, h) : (c[p] = US(g), c[p].c(), c[p].m(e, null));
        }
        for (; p < c.length; p += 1)
          c[p].d(1);
        c.length = a.length;
      }
      h[0] & 1 && r !== (r = f[0][0].badge || "") && oe(e, "value", r);
    },
    d(f) {
      f && V(e), l && l.d(), xt(c, f), s = !1, o();
    }
  };
}
function VS(t) {
  let e, n;
  return {
    c() {
      e = j("img"), b(e, "width", "30"), b(e, "height", "28"), b(e, "alt", "badge"), jh(e.src, n = t[0][0].badge) || b(e, "src", n), b(e, "slot", "prefix");
    },
    m(i, r) {
      U(i, e, r);
    },
    p(i, r) {
      r[0] & 1 && !jh(e.src, n = i[0][0].badge) && b(e, "src", n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function n$(t) {
  let e = t[38] + "", n;
  return {
    c() {
      n = _e(e);
    },
    m(i, r) {
      U(i, n, r);
    },
    p(i, r) {
      r[0] & 2 && e !== (e = i[38] + "") && ze(n, e);
    },
    d(i) {
      i && V(n);
    }
  };
}
function i$(t) {
  let e, n;
  return {
    c() {
      e = j("img"), b(e, "width", "30"), b(e, "height", "28"), b(e, "alt", "badge"), jh(e.src, n = t[38]) || b(e, "src", n), b(e, "class", "http-badge svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r);
    },
    p(i, r) {
      r[0] & 2 && !jh(e.src, n = i[38]) && b(e, "src", n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function US(t) {
  let e, n, i, r, s;
  function o(c, u) {
    return u[0] & 2 && (n = null), n == null && (n = !!c[38].startsWith("http")), n ? i$ : n$;
  }
  let l = o(t, [-1, -1]), a = l(t);
  return {
    c() {
      e = j("sl-option"), a.c(), i = Z(), oe(e, "value", r = t[38]), oe(e, "selected", s = t[0][0].badge === t[38]);
    },
    m(c, u) {
      U(c, e, u), a.m(e, null), E(e, i);
    },
    p(c, u) {
      l === (l = o(c, u)) && a ? a.p(c, u) : (a.d(1), a = l(c), a && (a.c(), a.m(e, i))), u[0] & 2 && r !== (r = c[38]) && oe(e, "value", r), u[0] & 3 && s !== (s = c[0][0].badge === c[38]) && oe(e, "selected", s);
    },
    d(c) {
      c && V(e), a.d();
    }
  };
}
function r$(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z, L, K, F, D, X, ue, q, ee, ie, ne, je, Ie;
  return {
    c() {
      e = j("div"), n = j("sl-checkbox"), i = _e("Directed"), s = Z(), o = j("div"), l = j("sl-color-picker"), c = Z(), u = j("span"), u.textContent = "Stroke", f = Z(), h = j("sl-input"), p = Z(), g = j("sl-select"), m = j("sl-option"), _ = _e("straight"), v = Z(), k = j("sl-option"), C = _e("curved"), w = Z(), M = j("sl-option"), N = _e("ortho"), W = Z(), H = j("sl-select"), I = j("sl-option"), z = _e("solid"), K = Z(), F = j("sl-option"), D = _e("dashed"), ue = Z(), q = j("sl-option"), ee = _e("dotted"), Ni(n, "width", "100%"), oe(n, "checked", r = t[0][0].directed), oe(l, "format", "hex"), oe(l, "size", "small"), oe(l, "value", a = t[0][0].stroke), oe(l, "label", "Select stroke color"), oe(l, "opacity", ""), oe(l, "swatches", t[6]), b(u, "class", "title svelte-1vvthkw"), b(o, "class", "edge-stroke svelte-1vvthkw"), oe(h, "label", "Weight"), oe(h, "type", "number"), oe(h, "value", d = t[0][0].weight), oe(m, "value", "straight"), oe(m, "selected", S = t[0][0].shape === "straight"), oe(k, "value", "curved"), oe(k, "selected", A = t[0][0].shape === "curved"), oe(M, "value", "ortho"), oe(M, "selected", T = t[0][0].shape === "ortho"), oe(g, "label", "Shape"), oe(g, "value", O = t[0][0].shape), oe(g, "placeholder", "Select shape"), oe(I, "value", "solid"), oe(I, "selected", L = t[0][0].strokeType === "solid"), oe(F, "value", "dashed"), oe(F, "selected", X = t[0][0].strokeType === "dashed"), oe(q, "value", "dotted"), oe(q, "selected", ie = t[0][0].strokeType === "dotted"), oe(H, "label", "StrokeType"), oe(H, "value", ne = t[0][0].strokeType), oe(H, "placeholder", "Select strokeType"), b(e, "class", "edge-panel svelte-1vvthkw");
    },
    m(Xe, le) {
      U(Xe, e, le), E(e, n), E(n, i), E(e, s), E(e, o), E(o, l), E(o, c), E(o, u), E(e, f), E(e, h), E(e, p), E(e, g), E(g, m), E(m, _), E(g, v), E(g, k), E(k, C), E(g, w), E(g, M), E(M, N), E(e, W), E(e, H), E(H, I), E(I, z), E(H, K), E(H, F), E(F, D), E(H, ue), E(H, q), E(q, ee), je || (Ie = [
        re(n, "sl-change", t[22]),
        re(l, "sl-change", t[23]),
        re(h, "sl-change", t[24]),
        re(g, "sl-change", t[25]),
        re(H, "sl-change", t[26])
      ], je = !0);
    },
    p(Xe, le) {
      le[0] & 1 && r !== (r = Xe[0][0].directed) && oe(n, "checked", r), le[0] & 1 && a !== (a = Xe[0][0].stroke) && oe(l, "value", a), le[0] & 1 && d !== (d = Xe[0][0].weight) && oe(h, "value", d), le[0] & 1 && S !== (S = Xe[0][0].shape === "straight") && oe(m, "selected", S), le[0] & 1 && A !== (A = Xe[0][0].shape === "curved") && oe(k, "selected", A), le[0] & 1 && T !== (T = Xe[0][0].shape === "ortho") && oe(M, "selected", T), le[0] & 1 && O !== (O = Xe[0][0].shape) && oe(g, "value", O), le[0] & 1 && L !== (L = Xe[0][0].strokeType === "solid") && oe(I, "selected", L), le[0] & 1 && X !== (X = Xe[0][0].strokeType === "dashed") && oe(F, "selected", X), le[0] & 1 && ie !== (ie = Xe[0][0].strokeType === "dotted") && oe(q, "selected", ie), le[0] & 1 && ne !== (ne = Xe[0][0].strokeType) && oe(H, "value", ne);
    },
    d(Xe) {
      Xe && V(e), je = !1, ct(Ie);
    }
  };
}
function s$(t) {
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z;
  return {
    c() {
      e = j("div"), n = j("div"), i = j("sl-color-picker"), s = Z(), o = j("span"), o.textContent = "Fill", l = Z(), a = j("div"), c = j("sl-color-picker"), f = Z(), h = j("span"), h.textContent = "Border", d = Z(), p = j("div"), g = j("sl-color-picker"), _ = Z(), S = j("span"), S.textContent = "Label", v = Z(), k = j("div"), C = j("sl-input"), w = Z(), M = j("div"), N = j("sl-input"), O = Z(), W = j("sl-input"), oe(i, "format", "hex"), oe(i, "size", "small"), oe(i, "value", r = t[0][0].fill), oe(i, "label", "Select fill color"), oe(i, "opacity", ""), oe(i, "swatches", t[6]), b(o, "class", "svelte-1vvthkw"), b(n, "class", "node-color svelte-1vvthkw"), oe(c, "format", "hex"), oe(c, "size", "small"), oe(c, "value", u = t[0][0].bordercolor), oe(c, "label", "Select border color"), oe(c, "opacity", ""), oe(c, "swatches", t[6]), b(h, "class", "svelte-1vvthkw"), b(a, "class", "node-color svelte-1vvthkw"), oe(g, "format", "hex"), oe(g, "size", "small"), oe(g, "value", m = t[0][0].labelcolor), oe(g, "label", "Select label color"), oe(g, "opacity", ""), oe(g, "swatches", t[6]), b(S, "class", "svelte-1vvthkw"), b(p, "class", "node-color svelte-1vvthkw"), b(e, "class", "node-colors svelte-1vvthkw"), oe(C, "label", "URL of Background Image"), oe(C, "type", "url"), oe(C, "size", "small"), Ni(C, "width", "100%"), oe(C, "value", A = t[0][0].backgroundImageURL || ""), b(k, "class", "node-colors svelte-1vvthkw"), oe(N, "label", "Label Font Size"), oe(N, "type", "number"), oe(N, "size", "small"), oe(N, "placeholder", "16"), Ni(N, "width", "40%"), oe(N, "min", "12"), oe(N, "max", "64"), oe(N, "step", "1"), oe(N, "value", T = t[0][0].nodelabelfontsize || t[1].theme.nodelabelfontsize || 16), oe(W, "label", "Notes Font Size"), oe(W, "type", "number"), oe(W, "size", "small"), oe(W, "placeholder", "16"), Ni(W, "width", "40%"), oe(W, "min", "12"), oe(W, "max", "48"), oe(W, "step", "1"), oe(W, "value", H = t[0][0].nodenotesfontsize || t[1].theme.nodenotesfontsize || 16), b(M, "class", "node-colors svelte-1vvthkw");
    },
    m(L, K) {
      U(L, e, K), E(e, n), E(n, i), E(n, s), E(n, o), E(e, l), E(e, a), E(a, c), E(a, f), E(a, h), E(e, d), E(e, p), E(p, g), E(p, _), E(p, S), U(L, v, K), U(L, k, K), E(k, C), U(L, w, K), U(L, M, K), E(M, N), E(M, O), E(M, W), I || (z = [
        re(i, "sl-change", t[16]),
        re(c, "sl-change", t[17]),
        re(g, "sl-change", t[18]),
        re(C, "input", t[19]),
        re(N, "input", t[20]),
        re(W, "input", t[21])
      ], I = !0);
    },
    p(L, K) {
      K[0] & 1 && r !== (r = L[0][0].fill) && oe(i, "value", r), K[0] & 1 && u !== (u = L[0][0].bordercolor) && oe(c, "value", u), K[0] & 1 && m !== (m = L[0][0].labelcolor) && oe(g, "value", m), K[0] & 1 && A !== (A = L[0][0].backgroundImageURL || "") && oe(C, "value", A), K[0] & 3 && T !== (T = L[0][0].nodelabelfontsize || L[1].theme.nodelabelfontsize || 16) && oe(N, "value", T), K[0] & 3 && H !== (H = L[0][0].nodenotesfontsize || L[1].theme.nodenotesfontsize || 16) && oe(W, "value", H);
    },
    d(L) {
      L && V(e), L && V(v), L && V(k), L && V(w), L && V(M), I = !1, ct(z);
    }
  };
}
function HS(t) {
  let e, n, i, r, s;
  return r = new LZ({
    props: {
      content: {
        json: t[0][0].custom || {}
      },
      onChange: t[8]
    }
  }), {
    c() {
      e = j("div"), n = j("span"), n.innerHTML = "<strong>custom</strong>", i = Z(), ge(r.$$.fragment), b(e, "class", "row");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(e, i), de(r, e, null), s = !0;
    },
    p(o, l) {
      const a = {};
      l[0] & 1 && (a.content = {
        json: o[0][0].custom || {}
      }), r.$set(a);
    },
    i(o) {
      s || (P(r.$$.fragment, o), s = !0);
    },
    o(o) {
      x(r.$$.fragment, o), s = !1;
    },
    d(o) {
      o && V(e), pe(r);
    }
  };
}
function WS(t) {
  let e, n, i = it(t[0][0].desc) + "", r, s, o, l, a, c, u = t[3], f = [];
  for (let h = 0; h < u.length; h += 1)
    f[h] = XS(RS(t, u, h));
  return {
    c() {
      e = j("sl-dialog"), n = j("p"), r = Z();
      for (let h = 0; h < f.length; h += 1)
        f[h].c();
      s = Z(), o = j("sl-button"), o.textContent = "Close", b(n, "class", "itemdesc svelte-1vvthkw"), oe(o, "slot", "footer"), oe(o, "variant", "primary"), oe(e, "label", l = "Literature Review for " + t[0][0].label), Ni(e, "--width", "50vw"), oe(e, "open", t[2]);
    },
    m(h, d) {
      U(h, e, d), E(e, n), n.innerHTML = i, E(e, r);
      for (let p = 0; p < f.length; p += 1)
        f[p].m(e, null);
      E(e, s), E(e, o), a || (c = [
        re(o, "click", t[27]),
        re(e, "sl-hide", t[28])
      ], a = !0);
    },
    p(h, d) {
      if (d[0] & 1 && i !== (i = it(h[0][0].desc) + "") && (n.innerHTML = i), d[0] & 8) {
        u = h[3];
        let p;
        for (p = 0; p < u.length; p += 1) {
          const g = RS(h, u, p);
          f[p] ? f[p].p(g, d) : (f[p] = XS(g), f[p].c(), f[p].m(e, s));
        }
        for (; p < f.length; p += 1)
          f[p].d(1);
        f.length = u.length;
      }
      d[0] & 1 && l !== (l = "Literature Review for " + h[0][0].label) && oe(e, "label", l), d[0] & 4 && oe(e, "open", h[2]);
    },
    d(h) {
      h && V(e), xt(f, h), a = !1, ct(c);
    }
  };
}
function qS(t) {
  let e, n = it(t[29].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = it(i[29].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function JS(t) {
  let e, n = it(t[32].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = it(i[32].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function KS(t) {
  let e, n = it(t[35].node.desc) + "";
  return {
    c() {
      e = j("p"), b(e, "class", "itemdesc svelte-1vvthkw");
    },
    m(i, r) {
      U(i, e, r), e.innerHTML = n;
    },
    p(i, r) {
      r[0] & 8 && n !== (n = it(i[35].node.desc) + "") && (e.innerHTML = n);
    },
    d(i) {
      i && V(e);
    }
  };
}
function GS(t) {
  let e, n, i = t[35].node.desc && KS(t);
  return {
    c() {
      e = j("sl-details"), i && i.c(), oe(e, "summary", n = t[32].node.label);
    },
    m(r, s) {
      U(r, e, s), i && i.m(e, null);
    },
    p(r, s) {
      r[35].node.desc ? i ? i.p(r, s) : (i = KS(r), i.c(), i.m(e, null)) : i && (i.d(1), i = null), s[0] & 8 && n !== (n = r[32].node.label) && oe(e, "summary", n);
    },
    d(r) {
      r && V(e), i && i.d();
    }
  };
}
function YS(t) {
  let e, n, i, r = t[32].node.desc && JS(t), s = t[32].parents, o = [];
  for (let l = 0; l < s.length; l += 1)
    o[l] = GS(IS(t, s, l));
  return {
    c() {
      e = j("sl-details"), r && r.c(), n = Z();
      for (let l = 0; l < o.length; l += 1)
        o[l].c();
      oe(e, "summary", i = t[32].node.label);
    },
    m(l, a) {
      U(l, e, a), r && r.m(e, null), E(e, n);
      for (let c = 0; c < o.length; c += 1)
        o[c].m(e, null);
    },
    p(l, a) {
      if (l[32].node.desc ? r ? r.p(l, a) : (r = JS(l), r.c(), r.m(e, n)) : r && (r.d(1), r = null), a[0] & 8) {
        s = l[32].parents;
        let c;
        for (c = 0; c < s.length; c += 1) {
          const u = IS(l, s, c);
          o[c] ? o[c].p(u, a) : (o[c] = GS(u), o[c].c(), o[c].m(e, null));
        }
        for (; c < o.length; c += 1)
          o[c].d(1);
        o.length = s.length;
      }
      a[0] & 8 && i !== (i = l[32].node.label) && oe(e, "summary", i);
    },
    d(l) {
      l && V(e), r && r.d(), xt(o, l);
    }
  };
}
function XS(t) {
  let e, n, i, r, s = t[29].node.desc && qS(t), o = t[29].parents, l = [];
  for (let a = 0; a < o.length; a += 1)
    l[a] = YS(PS(t, o, a));
  return {
    c() {
      e = j("div"), n = j("sl-details"), s && s.c(), i = Z();
      for (let a = 0; a < l.length; a += 1)
        l[a].c();
      oe(n, "summary", r = t[29].node.label), oe(n, "open", ""), b(e, "class", "details-group-example");
    },
    m(a, c) {
      U(a, e, c), E(e, n), s && s.m(n, null), E(n, i);
      for (let u = 0; u < l.length; u += 1)
        l[u].m(n, null);
    },
    p(a, c) {
      if (a[29].node.desc ? s ? s.p(a, c) : (s = qS(a), s.c(), s.m(n, i)) : s && (s.d(1), s = null), c[0] & 8) {
        o = a[29].parents;
        let u;
        for (u = 0; u < o.length; u += 1) {
          const f = PS(a, o, u);
          l[u] ? l[u].p(f, c) : (l[u] = YS(f), l[u].c(), l[u].m(n, null));
        }
        for (; u < l.length; u += 1)
          l[u].d(1);
        l.length = o.length;
      }
      c[0] & 8 && r !== (r = a[29].node.label) && oe(n, "summary", r);
    },
    d(a) {
      a && V(e), s && s.d(), xt(l, a);
    }
  };
}
function o$(t) {
  var A;
  let e, n, i = t[0].length == 1 && t[4](), r, s, o, l, a = t[1].customjson && t[0].length == 1 && (t[0][0].kind === "node" || t[0][0].kind === "edge") && t[4](), c, u = t[0].length == 1 && ["node"].includes((A = t[0][0]) == null ? void 0 : A.kind), f, h;
  function d(w, M) {
    var N;
    return M[0] & 1 && (e = null), e == null && (e = !!(w[0].length == 1 && ["node", "edge", "note"].includes((N = w[0][0]) == null ? void 0 : N.kind))), e ? t$ : e$;
  }
  let p = d(t, [-1, -1]), g = p(t), m = i && jS(t);
  function _(w, M) {
    if (M[0] & 1 && (s = null), M[0] & 1 && (o = null), s == null && (s = !!(w[0][0].kind !== "edge" && w[4]())), s)
      return s$;
    if (o == null && (o = !!(w[0][0].kind === "edge" && w[4]())), o)
      return r$;
  }
  let S = _(t, [-1, -1]), v = S && S(t), k = a && HS(t), C = u && WS(t);
  return {
    c() {
      g.c(), n = Z(), m && m.c(), r = Z(), v && v.c(), l = Z(), k && k.c(), c = Z(), C && C.c(), f = rt();
    },
    m(w, M) {
      g.m(w, M), U(w, n, M), m && m.m(w, M), U(w, r, M), v && v.m(w, M), U(w, l, M), k && k.m(w, M), U(w, c, M), C && C.m(w, M), U(w, f, M), h = !0;
    },
    p(w, M) {
      var N;
      p === (p = d(w, M)) && g ? g.p(w, M) : (g.d(1), g = p(w), g && (g.c(), g.m(n.parentNode, n))), M[0] & 1 && (i = w[0].length == 1 && w[4]()), i ? m ? (m.p(w, M), M[0] & 1 && P(m, 1)) : (m = jS(w), m.c(), P(m, 1), m.m(r.parentNode, r)) : m && (Ae(), x(m, 1, 1, () => {
        m = null;
      }), Me()), S === (S = _(w, M)) && v ? v.p(w, M) : (v && v.d(1), v = S && S(w), v && (v.c(), v.m(l.parentNode, l))), M[0] & 3 && (a = w[1].customjson && w[0].length == 1 && (w[0][0].kind === "node" || w[0][0].kind === "edge") && w[4]()), a ? k ? (k.p(w, M), M[0] & 3 && P(k, 1)) : (k = HS(w), k.c(), P(k, 1), k.m(c.parentNode, c)) : k && (Ae(), x(k, 1, 1, () => {
        k = null;
      }), Me()), M[0] & 1 && (u = w[0].length == 1 && ["node"].includes((N = w[0][0]) == null ? void 0 : N.kind)), u ? C ? C.p(w, M) : (C = WS(w), C.c(), C.m(f.parentNode, f)) : C && (C.d(1), C = null);
    },
    i(w) {
      h || (P(m), P(k), h = !0);
    },
    o(w) {
      x(m), x(k), h = !1;
    },
    d(w) {
      g.d(w), w && V(n), m && m.d(w), w && V(r), v && v.d(w), w && V(l), k && k.d(w), w && V(c), C && C.d(w), w && V(f);
    }
  };
}
function l$(t, e, n) {
  let i, { selectedItem: r } = e, { graph: s } = e, { config: o = { mode: "viewonly" } } = e, l = !1;
  function a() {
    return o.mode == "editor";
  }
  const c = Vl(), u = [
    "#d0021bff",
    "#f5a623ff",
    "#bbae0eff",
    "#8b572aff",
    "#7ed321ff",
    "#417505ff",
    "#b00b0bff",
    "#9013feff",
    "#4a90e2ff",
    "#16b591ff",
    "#b8e986ff",
    "#000000ff",
    "#444444ff",
    "#888888ff",
    "#ccccccff",
    "#ffffffff"
  ];
  function f(L, K) {
    K.split("_")[0] == "text" || K.split("_")[0] == "color" || K.split("_")[0] == "url" ? r.forEach((F) => F[K.split("_")[1]] = L.target.value) : K.split("_")[0] == "number" ? r.forEach((F) => F[K.split("_")[1]] = L.target.value === "" ? null : JSON.parse(L.target.value)) : K.split("_")[0] == "checkbox" ? r.forEach((F) => F[K.split("_")[1]] = L.target.checked) : r.forEach((F) => F[K.split("_")[1]] = JSON.parse(L.target.value)), c("graphchanged", s);
  }
  function h(L, K, F) {
    n(0, r[0].custom = L.json, r), c("graphchanged", s);
  }
  const d = (L) => n(2, l = !0), p = (L) => f(L, "text_label"), g = (L) => f(L, "text_notes"), m = (L) => f(L, "text_desc"), _ = (L) => {
    n(0, r[0].tags = L.detail.value, r), c("graphchanged", s);
  }, S = (L) => f(L, "text_badge"), v = (L) => f(L, "color_fill"), k = (L) => f(L, "color_bordercolor"), C = (L) => f(L, "color_labelcolor"), A = (L) => f(L, "url_backgroundImageURL"), w = (L) => f(L, "number_nodelabelfontsize"), M = (L) => f(L, "number_nodenotesfontsize"), N = (L) => f(L, "checkbox_directed"), T = (L) => f(L, "color_stroke"), O = (L) => f(L, "number_weight"), W = (L) => f(L, "text_shape"), H = (L) => f(L, "text_strokeType"), I = (L) => n(2, l = !1), z = (L) => n(2, l = !1);
  return t.$$set = (L) => {
    "selectedItem" in L && n(0, r = L.selectedItem), "graph" in L && n(1, s = L.graph), "config" in L && n(9, o = L.config);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 3 && n(3, i = J4(s, r[0], 0));
  }, [
    r,
    s,
    l,
    i,
    a,
    c,
    u,
    f,
    h,
    o,
    d,
    p,
    g,
    m,
    _,
    S,
    v,
    k,
    C,
    A,
    w,
    M,
    N,
    T,
    O,
    W,
    H,
    I,
    z
  ];
}
class a$ extends Ge {
  constructor(e) {
    super(), Ke(this, e, l$, o$, Nt, { selectedItem: 0, graph: 1, config: 9 }, null, [-1, -1]);
  }
}
var c$ = { value: () => {
} };
function Zb() {
  for (var t = 0, e = arguments.length, n = {}, i; t < e; ++t) {
    if (!(i = arguments[t] + "") || i in n || /[\s.]/.test(i))
      throw new Error("illegal type: " + i);
    n[i] = [];
  }
  return new Mh(n);
}
function Mh(t) {
  this._ = t;
}
function u$(t, e) {
  return t.trim().split(/^|\s+/).map(function(n) {
    var i = "", r = n.indexOf(".");
    if (r >= 0 && (i = n.slice(r + 1), n = n.slice(0, r)), n && !e.hasOwnProperty(n))
      throw new Error("unknown type: " + n);
    return { type: n, name: i };
  });
}
Mh.prototype = Zb.prototype = {
  constructor: Mh,
  on: function(t, e) {
    var n = this._, i = u$(t + "", n), r, s = -1, o = i.length;
    if (arguments.length < 2) {
      for (; ++s < o; )
        if ((r = (t = i[s]).type) && (r = f$(n[r], t.name)))
          return r;
      return;
    }
    if (e != null && typeof e != "function")
      throw new Error("invalid callback: " + e);
    for (; ++s < o; )
      if (r = (t = i[s]).type)
        n[r] = QS(n[r], t.name, e);
      else if (e == null)
        for (r in n)
          n[r] = QS(n[r], t.name, null);
    return this;
  },
  copy: function() {
    var t = {}, e = this._;
    for (var n in e)
      t[n] = e[n].slice();
    return new Mh(t);
  },
  call: function(t, e) {
    if ((r = arguments.length - 2) > 0)
      for (var n = new Array(r), i = 0, r, s; i < r; ++i)
        n[i] = arguments[i + 2];
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (s = this._[t], i = 0, r = s.length; i < r; ++i)
      s[i].value.apply(e, n);
  },
  apply: function(t, e, n) {
    if (!this._.hasOwnProperty(t))
      throw new Error("unknown type: " + t);
    for (var i = this._[t], r = 0, s = i.length; r < s; ++r)
      i[r].value.apply(e, n);
  }
};
function f$(t, e) {
  for (var n = 0, i = t.length, r; n < i; ++n)
    if ((r = t[n]).name === e)
      return r.value;
}
function QS(t, e, n) {
  for (var i = 0, r = t.length; i < r; ++i)
    if (t[i].name === e) {
      t[i] = c$, t = t.slice(0, i).concat(t.slice(i + 1));
      break;
    }
  return n != null && t.push({ name: e, value: n }), t;
}
var Y1 = "http://www.w3.org/1999/xhtml";
const ZS = {
  svg: "http://www.w3.org/2000/svg",
  xhtml: Y1,
  xlink: "http://www.w3.org/1999/xlink",
  xml: "http://www.w3.org/XML/1998/namespace",
  xmlns: "http://www.w3.org/2000/xmlns/"
};
function Zp(t) {
  var e = t += "", n = e.indexOf(":");
  return n >= 0 && (e = t.slice(0, n)) !== "xmlns" && (t = t.slice(n + 1)), ZS.hasOwnProperty(e) ? { space: ZS[e], local: t } : t;
}
function h$(t) {
  return function() {
    var e = this.ownerDocument, n = this.namespaceURI;
    return n === Y1 && e.documentElement.namespaceURI === Y1 ? e.createElement(t) : e.createElementNS(n, t);
  };
}
function d$(t) {
  return function() {
    return this.ownerDocument.createElementNS(t.space, t.local);
  };
}
function cM(t) {
  var e = Zp(t);
  return (e.local ? d$ : h$)(e);
}
function p$() {
}
function $b(t) {
  return t == null ? p$ : function() {
    return this.querySelector(t);
  };
}
function g$(t) {
  typeof t != "function" && (t = $b(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = new Array(o), a, c, u = 0; u < o; ++u)
      (a = s[u]) && (c = t.call(a, a.__data__, u, s)) && ("__data__" in a && (c.__data__ = a.__data__), l[u] = c);
  return new lr(i, this._parents);
}
function m$(t) {
  return t == null ? [] : Array.isArray(t) ? t : Array.from(t);
}
function b$() {
  return [];
}
function uM(t) {
  return t == null ? b$ : function() {
    return this.querySelectorAll(t);
  };
}
function _$(t) {
  return function() {
    return m$(t.apply(this, arguments));
  };
}
function y$(t) {
  typeof t == "function" ? t = _$(t) : t = uM(t);
  for (var e = this._groups, n = e.length, i = [], r = [], s = 0; s < n; ++s)
    for (var o = e[s], l = o.length, a, c = 0; c < l; ++c)
      (a = o[c]) && (i.push(t.call(a, a.__data__, c, o)), r.push(a));
  return new lr(i, r);
}
function fM(t) {
  return function() {
    return this.matches(t);
  };
}
function hM(t) {
  return function(e) {
    return e.matches(t);
  };
}
var w$ = Array.prototype.find;
function v$(t) {
  return function() {
    return w$.call(this.children, t);
  };
}
function k$() {
  return this.firstElementChild;
}
function C$(t) {
  return this.select(t == null ? k$ : v$(typeof t == "function" ? t : hM(t)));
}
var S$ = Array.prototype.filter;
function E$() {
  return Array.from(this.children);
}
function A$(t) {
  return function() {
    return S$.call(this.children, t);
  };
}
function M$(t) {
  return this.selectAll(t == null ? E$ : A$(typeof t == "function" ? t : hM(t)));
}
function O$(t) {
  typeof t != "function" && (t = fM(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = [], a, c = 0; c < o; ++c)
      (a = s[c]) && t.call(a, a.__data__, c, s) && l.push(a);
  return new lr(i, this._parents);
}
function dM(t) {
  return new Array(t.length);
}
function T$() {
  return new lr(this._enter || this._groups.map(dM), this._parents);
}
function Bd(t, e) {
  this.ownerDocument = t.ownerDocument, this.namespaceURI = t.namespaceURI, this._next = null, this._parent = t, this.__data__ = e;
}
Bd.prototype = {
  constructor: Bd,
  appendChild: function(t) {
    return this._parent.insertBefore(t, this._next);
  },
  insertBefore: function(t, e) {
    return this._parent.insertBefore(t, e);
  },
  querySelector: function(t) {
    return this._parent.querySelector(t);
  },
  querySelectorAll: function(t) {
    return this._parent.querySelectorAll(t);
  }
};
function R$(t) {
  return function() {
    return t;
  };
}
function P$(t, e, n, i, r, s) {
  for (var o = 0, l, a = e.length, c = s.length; o < c; ++o)
    (l = e[o]) ? (l.__data__ = s[o], i[o] = l) : n[o] = new Bd(t, s[o]);
  for (; o < a; ++o)
    (l = e[o]) && (r[o] = l);
}
function I$(t, e, n, i, r, s, o) {
  var l, a, c = /* @__PURE__ */ new Map(), u = e.length, f = s.length, h = new Array(u), d;
  for (l = 0; l < u; ++l)
    (a = e[l]) && (h[l] = d = o.call(a, a.__data__, l, e) + "", c.has(d) ? r[l] = a : c.set(d, a));
  for (l = 0; l < f; ++l)
    d = o.call(t, s[l], l, s) + "", (a = c.get(d)) ? (i[l] = a, a.__data__ = s[l], c.delete(d)) : n[l] = new Bd(t, s[l]);
  for (l = 0; l < u; ++l)
    (a = e[l]) && c.get(h[l]) === a && (r[l] = a);
}
function D$(t) {
  return t.__data__;
}
function N$(t, e) {
  if (!arguments.length)
    return Array.from(this, D$);
  var n = e ? I$ : P$, i = this._parents, r = this._groups;
  typeof t != "function" && (t = R$(t));
  for (var s = r.length, o = new Array(s), l = new Array(s), a = new Array(s), c = 0; c < s; ++c) {
    var u = i[c], f = r[c], h = f.length, d = L$(t.call(u, u && u.__data__, c, i)), p = d.length, g = l[c] = new Array(p), m = o[c] = new Array(p), _ = a[c] = new Array(h);
    n(u, f, g, m, _, d, e);
    for (var S = 0, v = 0, k, C; S < p; ++S)
      if (k = g[S]) {
        for (S >= v && (v = S + 1); !(C = m[v]) && ++v < p; )
          ;
        k._next = C || null;
      }
  }
  return o = new lr(o, i), o._enter = l, o._exit = a, o;
}
function L$(t) {
  return typeof t == "object" && "length" in t ? t : Array.from(t);
}
function j$() {
  return new lr(this._exit || this._groups.map(dM), this._parents);
}
function B$(t, e, n) {
  var i = this.enter(), r = this, s = this.exit();
  return typeof t == "function" ? (i = t(i), i && (i = i.selection())) : i = i.append(t + ""), e != null && (r = e(r), r && (r = r.selection())), n == null ? s.remove() : n(s), i && r ? i.merge(r).order() : r;
}
function x$(t) {
  for (var e = t.selection ? t.selection() : t, n = this._groups, i = e._groups, r = n.length, s = i.length, o = Math.min(r, s), l = new Array(r), a = 0; a < o; ++a)
    for (var c = n[a], u = i[a], f = c.length, h = l[a] = new Array(f), d, p = 0; p < f; ++p)
      (d = c[p] || u[p]) && (h[p] = d);
  for (; a < r; ++a)
    l[a] = n[a];
  return new lr(l, this._parents);
}
function F$() {
  for (var t = this._groups, e = -1, n = t.length; ++e < n; )
    for (var i = t[e], r = i.length - 1, s = i[r], o; --r >= 0; )
      (o = i[r]) && (s && o.compareDocumentPosition(s) ^ 4 && s.parentNode.insertBefore(o, s), s = o);
  return this;
}
function z$(t) {
  t || (t = V$);
  function e(f, h) {
    return f && h ? t(f.__data__, h.__data__) : !f - !h;
  }
  for (var n = this._groups, i = n.length, r = new Array(i), s = 0; s < i; ++s) {
    for (var o = n[s], l = o.length, a = r[s] = new Array(l), c, u = 0; u < l; ++u)
      (c = o[u]) && (a[u] = c);
    a.sort(e);
  }
  return new lr(r, this._parents).order();
}
function V$(t, e) {
  return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN;
}
function U$() {
  var t = arguments[0];
  return arguments[0] = this, t.apply(null, arguments), this;
}
function H$() {
  return Array.from(this);
}
function W$() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, s = i.length; r < s; ++r) {
      var o = i[r];
      if (o)
        return o;
    }
  return null;
}
function q$() {
  let t = 0;
  for (const e of this)
    ++t;
  return t;
}
function J$() {
  return !this.node();
}
function K$(t) {
  for (var e = this._groups, n = 0, i = e.length; n < i; ++n)
    for (var r = e[n], s = 0, o = r.length, l; s < o; ++s)
      (l = r[s]) && t.call(l, l.__data__, s, r);
  return this;
}
function G$(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function Y$(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function X$(t, e) {
  return function() {
    this.setAttribute(t, e);
  };
}
function Q$(t, e) {
  return function() {
    this.setAttributeNS(t.space, t.local, e);
  };
}
function Z$(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttribute(t) : this.setAttribute(t, n);
  };
}
function $$(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? this.removeAttributeNS(t.space, t.local) : this.setAttributeNS(t.space, t.local, n);
  };
}
function eee(t, e) {
  var n = Zp(t);
  if (arguments.length < 2) {
    var i = this.node();
    return n.local ? i.getAttributeNS(n.space, n.local) : i.getAttribute(n);
  }
  return this.each((e == null ? n.local ? Y$ : G$ : typeof e == "function" ? n.local ? $$ : Z$ : n.local ? Q$ : X$)(n, e));
}
function pM(t) {
  return t.ownerDocument && t.ownerDocument.defaultView || t.document && t || t.defaultView;
}
function tee(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function nee(t, e, n) {
  return function() {
    this.style.setProperty(t, e, n);
  };
}
function iee(t, e, n) {
  return function() {
    var i = e.apply(this, arguments);
    i == null ? this.style.removeProperty(t) : this.style.setProperty(t, i, n);
  };
}
function ree(t, e, n) {
  return arguments.length > 1 ? this.each((e == null ? tee : typeof e == "function" ? iee : nee)(t, e, n ?? "")) : Ja(this.node(), t);
}
function Ja(t, e) {
  return t.style.getPropertyValue(e) || pM(t).getComputedStyle(t, null).getPropertyValue(e);
}
function see(t) {
  return function() {
    delete this[t];
  };
}
function oee(t, e) {
  return function() {
    this[t] = e;
  };
}
function lee(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    n == null ? delete this[t] : this[t] = n;
  };
}
function aee(t, e) {
  return arguments.length > 1 ? this.each((e == null ? see : typeof e == "function" ? lee : oee)(t, e)) : this.node()[t];
}
function gM(t) {
  return t.trim().split(/^|\s+/);
}
function e_(t) {
  return t.classList || new mM(t);
}
function mM(t) {
  this._node = t, this._names = gM(t.getAttribute("class") || "");
}
mM.prototype = {
  add: function(t) {
    var e = this._names.indexOf(t);
    e < 0 && (this._names.push(t), this._node.setAttribute("class", this._names.join(" ")));
  },
  remove: function(t) {
    var e = this._names.indexOf(t);
    e >= 0 && (this._names.splice(e, 1), this._node.setAttribute("class", this._names.join(" ")));
  },
  contains: function(t) {
    return this._names.indexOf(t) >= 0;
  }
};
function bM(t, e) {
  for (var n = e_(t), i = -1, r = e.length; ++i < r; )
    n.add(e[i]);
}
function _M(t, e) {
  for (var n = e_(t), i = -1, r = e.length; ++i < r; )
    n.remove(e[i]);
}
function cee(t) {
  return function() {
    bM(this, t);
  };
}
function uee(t) {
  return function() {
    _M(this, t);
  };
}
function fee(t, e) {
  return function() {
    (e.apply(this, arguments) ? bM : _M)(this, t);
  };
}
function hee(t, e) {
  var n = gM(t + "");
  if (arguments.length < 2) {
    for (var i = e_(this.node()), r = -1, s = n.length; ++r < s; )
      if (!i.contains(n[r]))
        return !1;
    return !0;
  }
  return this.each((typeof e == "function" ? fee : e ? cee : uee)(n, e));
}
function dee() {
  this.textContent = "";
}
function pee(t) {
  return function() {
    this.textContent = t;
  };
}
function gee(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.textContent = e ?? "";
  };
}
function mee(t) {
  return arguments.length ? this.each(t == null ? dee : (typeof t == "function" ? gee : pee)(t)) : this.node().textContent;
}
function bee() {
  this.innerHTML = "";
}
function _ee(t) {
  return function() {
    this.innerHTML = t;
  };
}
function yee(t) {
  return function() {
    var e = t.apply(this, arguments);
    this.innerHTML = e ?? "";
  };
}
function wee(t) {
  return arguments.length ? this.each(t == null ? bee : (typeof t == "function" ? yee : _ee)(t)) : this.node().innerHTML;
}
function vee() {
  this.nextSibling && this.parentNode.appendChild(this);
}
function kee() {
  return this.each(vee);
}
function Cee() {
  this.previousSibling && this.parentNode.insertBefore(this, this.parentNode.firstChild);
}
function See() {
  return this.each(Cee);
}
function Eee(t) {
  var e = typeof t == "function" ? t : cM(t);
  return this.select(function() {
    return this.appendChild(e.apply(this, arguments));
  });
}
function Aee() {
  return null;
}
function Mee(t, e) {
  var n = typeof t == "function" ? t : cM(t), i = e == null ? Aee : typeof e == "function" ? e : $b(e);
  return this.select(function() {
    return this.insertBefore(n.apply(this, arguments), i.apply(this, arguments) || null);
  });
}
function Oee() {
  var t = this.parentNode;
  t && t.removeChild(this);
}
function Tee() {
  return this.each(Oee);
}
function Ree() {
  var t = this.cloneNode(!1), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function Pee() {
  var t = this.cloneNode(!0), e = this.parentNode;
  return e ? e.insertBefore(t, this.nextSibling) : t;
}
function Iee(t) {
  return this.select(t ? Pee : Ree);
}
function Dee(t) {
  return arguments.length ? this.property("__data__", t) : this.node().__data__;
}
function Nee(t) {
  return function(e) {
    t.call(this, e, this.__data__);
  };
}
function Lee(t) {
  return t.trim().split(/^|\s+/).map(function(e) {
    var n = "", i = e.indexOf(".");
    return i >= 0 && (n = e.slice(i + 1), e = e.slice(0, i)), { type: e, name: n };
  });
}
function jee(t) {
  return function() {
    var e = this.__on;
    if (e) {
      for (var n = 0, i = -1, r = e.length, s; n < r; ++n)
        s = e[n], (!t.type || s.type === t.type) && s.name === t.name ? this.removeEventListener(s.type, s.listener, s.options) : e[++i] = s;
      ++i ? e.length = i : delete this.__on;
    }
  };
}
function Bee(t, e, n) {
  return function() {
    var i = this.__on, r, s = Nee(e);
    if (i) {
      for (var o = 0, l = i.length; o < l; ++o)
        if ((r = i[o]).type === t.type && r.name === t.name) {
          this.removeEventListener(r.type, r.listener, r.options), this.addEventListener(r.type, r.listener = s, r.options = n), r.value = e;
          return;
        }
    }
    this.addEventListener(t.type, s, n), r = { type: t.type, name: t.name, value: e, listener: s, options: n }, i ? i.push(r) : this.__on = [r];
  };
}
function xee(t, e, n) {
  var i = Lee(t + ""), r, s = i.length, o;
  if (arguments.length < 2) {
    var l = this.node().__on;
    if (l) {
      for (var a = 0, c = l.length, u; a < c; ++a)
        for (r = 0, u = l[a]; r < s; ++r)
          if ((o = i[r]).type === u.type && o.name === u.name)
            return u.value;
    }
    return;
  }
  for (l = e ? Bee : jee, r = 0; r < s; ++r)
    this.each(l(i[r], e, n));
  return this;
}
function yM(t, e, n) {
  var i = pM(t), r = i.CustomEvent;
  typeof r == "function" ? r = new r(e, n) : (r = i.document.createEvent("Event"), n ? (r.initEvent(e, n.bubbles, n.cancelable), r.detail = n.detail) : r.initEvent(e, !1, !1)), t.dispatchEvent(r);
}
function Fee(t, e) {
  return function() {
    return yM(this, t, e);
  };
}
function zee(t, e) {
  return function() {
    return yM(this, t, e.apply(this, arguments));
  };
}
function Vee(t, e) {
  return this.each((typeof e == "function" ? zee : Fee)(t, e));
}
function* Uee() {
  for (var t = this._groups, e = 0, n = t.length; e < n; ++e)
    for (var i = t[e], r = 0, s = i.length, o; r < s; ++r)
      (o = i[r]) && (yield o);
}
var wM = [null];
function lr(t, e) {
  this._groups = t, this._parents = e;
}
function ef() {
  return new lr([[document.documentElement]], wM);
}
function Hee() {
  return this;
}
lr.prototype = ef.prototype = {
  constructor: lr,
  select: g$,
  selectAll: y$,
  selectChild: C$,
  selectChildren: M$,
  filter: O$,
  data: N$,
  enter: T$,
  exit: j$,
  join: B$,
  merge: x$,
  selection: Hee,
  order: F$,
  sort: z$,
  call: U$,
  nodes: H$,
  node: W$,
  size: q$,
  empty: J$,
  each: K$,
  attr: eee,
  style: ree,
  property: aee,
  classed: hee,
  text: mee,
  html: wee,
  raise: kee,
  lower: See,
  append: Eee,
  insert: Mee,
  remove: Tee,
  clone: Iee,
  datum: Dee,
  on: xee,
  dispatch: Vee,
  [Symbol.iterator]: Uee
};
function Nr(t) {
  return typeof t == "string" ? new lr([[document.querySelector(t)]], [document.documentElement]) : new lr([[t]], wM);
}
function Wee(t) {
  let e;
  for (; e = t.sourceEvent; )
    t = e;
  return t;
}
function ll(t, e) {
  if (t = Wee(t), e === void 0 && (e = t.currentTarget), e) {
    var n = e.ownerSVGElement || e;
    if (n.createSVGPoint) {
      var i = n.createSVGPoint();
      return i.x = t.clientX, i.y = t.clientY, i = i.matrixTransform(e.getScreenCTM().inverse()), [i.x, i.y];
    }
    if (e.getBoundingClientRect) {
      var r = e.getBoundingClientRect();
      return [t.clientX - r.left - e.clientLeft, t.clientY - r.top - e.clientTop];
    }
  }
  return [t.pageX, t.pageY];
}
const X1 = { capture: !0, passive: !1 };
function Q1(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function qee(t) {
  var e = t.document.documentElement, n = Nr(t).on("dragstart.drag", Q1, X1);
  "onselectstart" in e ? n.on("selectstart.drag", Q1, X1) : (e.__noselect = e.style.MozUserSelect, e.style.MozUserSelect = "none");
}
function Jee(t, e) {
  var n = t.document.documentElement, i = Nr(t).on("dragstart.drag", null);
  e && (i.on("click.drag", Q1, X1), setTimeout(function() {
    i.on("click.drag", null);
  }, 0)), "onselectstart" in n ? i.on("selectstart.drag", null) : (n.style.MozUserSelect = n.__noselect, delete n.__noselect);
}
function t_(t, e, n) {
  t.prototype = e.prototype = n, n.constructor = t;
}
function vM(t, e) {
  var n = Object.create(t.prototype);
  for (var i in e)
    n[i] = e[i];
  return n;
}
function tf() {
}
var Cu = 0.7, xd = 1 / Cu, va = "\\s*([+-]?\\d+)\\s*", Su = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*", ms = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*", Kee = /^#([0-9a-f]{3,8})$/, Gee = new RegExp(`^rgb\\(${va},${va},${va}\\)$`), Yee = new RegExp(`^rgb\\(${ms},${ms},${ms}\\)$`), Xee = new RegExp(`^rgba\\(${va},${va},${va},${Su}\\)$`), Qee = new RegExp(`^rgba\\(${ms},${ms},${ms},${Su}\\)$`), Zee = new RegExp(`^hsl\\(${Su},${ms},${ms}\\)$`), $ee = new RegExp(`^hsla\\(${Su},${ms},${ms},${Su}\\)$`), $S = {
  aliceblue: 15792383,
  antiquewhite: 16444375,
  aqua: 65535,
  aquamarine: 8388564,
  azure: 15794175,
  beige: 16119260,
  bisque: 16770244,
  black: 0,
  blanchedalmond: 16772045,
  blue: 255,
  blueviolet: 9055202,
  brown: 10824234,
  burlywood: 14596231,
  cadetblue: 6266528,
  chartreuse: 8388352,
  chocolate: 13789470,
  coral: 16744272,
  cornflowerblue: 6591981,
  cornsilk: 16775388,
  crimson: 14423100,
  cyan: 65535,
  darkblue: 139,
  darkcyan: 35723,
  darkgoldenrod: 12092939,
  darkgray: 11119017,
  darkgreen: 25600,
  darkgrey: 11119017,
  darkkhaki: 12433259,
  darkmagenta: 9109643,
  darkolivegreen: 5597999,
  darkorange: 16747520,
  darkorchid: 10040012,
  darkred: 9109504,
  darksalmon: 15308410,
  darkseagreen: 9419919,
  darkslateblue: 4734347,
  darkslategray: 3100495,
  darkslategrey: 3100495,
  darkturquoise: 52945,
  darkviolet: 9699539,
  deeppink: 16716947,
  deepskyblue: 49151,
  dimgray: 6908265,
  dimgrey: 6908265,
  dodgerblue: 2003199,
  firebrick: 11674146,
  floralwhite: 16775920,
  forestgreen: 2263842,
  fuchsia: 16711935,
  gainsboro: 14474460,
  ghostwhite: 16316671,
  gold: 16766720,
  goldenrod: 14329120,
  gray: 8421504,
  green: 32768,
  greenyellow: 11403055,
  grey: 8421504,
  honeydew: 15794160,
  hotpink: 16738740,
  indianred: 13458524,
  indigo: 4915330,
  ivory: 16777200,
  khaki: 15787660,
  lavender: 15132410,
  lavenderblush: 16773365,
  lawngreen: 8190976,
  lemonchiffon: 16775885,
  lightblue: 11393254,
  lightcoral: 15761536,
  lightcyan: 14745599,
  lightgoldenrodyellow: 16448210,
  lightgray: 13882323,
  lightgreen: 9498256,
  lightgrey: 13882323,
  lightpink: 16758465,
  lightsalmon: 16752762,
  lightseagreen: 2142890,
  lightskyblue: 8900346,
  lightslategray: 7833753,
  lightslategrey: 7833753,
  lightsteelblue: 11584734,
  lightyellow: 16777184,
  lime: 65280,
  limegreen: 3329330,
  linen: 16445670,
  magenta: 16711935,
  maroon: 8388608,
  mediumaquamarine: 6737322,
  mediumblue: 205,
  mediumorchid: 12211667,
  mediumpurple: 9662683,
  mediumseagreen: 3978097,
  mediumslateblue: 8087790,
  mediumspringgreen: 64154,
  mediumturquoise: 4772300,
  mediumvioletred: 13047173,
  midnightblue: 1644912,
  mintcream: 16121850,
  mistyrose: 16770273,
  moccasin: 16770229,
  navajowhite: 16768685,
  navy: 128,
  oldlace: 16643558,
  olive: 8421376,
  olivedrab: 7048739,
  orange: 16753920,
  orangered: 16729344,
  orchid: 14315734,
  palegoldenrod: 15657130,
  palegreen: 10025880,
  paleturquoise: 11529966,
  palevioletred: 14381203,
  papayawhip: 16773077,
  peachpuff: 16767673,
  peru: 13468991,
  pink: 16761035,
  plum: 14524637,
  powderblue: 11591910,
  purple: 8388736,
  rebeccapurple: 6697881,
  red: 16711680,
  rosybrown: 12357519,
  royalblue: 4286945,
  saddlebrown: 9127187,
  salmon: 16416882,
  sandybrown: 16032864,
  seagreen: 3050327,
  seashell: 16774638,
  sienna: 10506797,
  silver: 12632256,
  skyblue: 8900331,
  slateblue: 6970061,
  slategray: 7372944,
  slategrey: 7372944,
  snow: 16775930,
  springgreen: 65407,
  steelblue: 4620980,
  tan: 13808780,
  teal: 32896,
  thistle: 14204888,
  tomato: 16737095,
  turquoise: 4251856,
  violet: 15631086,
  wheat: 16113331,
  white: 16777215,
  whitesmoke: 16119285,
  yellow: 16776960,
  yellowgreen: 10145074
};
t_(tf, Eu, {
  copy(t) {
    return Object.assign(new this.constructor(), this, t);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: e3,
  formatHex: e3,
  formatHex8: ete,
  formatHsl: tte,
  formatRgb: t3,
  toString: t3
});
function e3() {
  return this.rgb().formatHex();
}
function ete() {
  return this.rgb().formatHex8();
}
function tte() {
  return kM(this).formatHsl();
}
function t3() {
  return this.rgb().formatRgb();
}
function Eu(t) {
  var e, n;
  return t = (t + "").trim().toLowerCase(), (e = Kee.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), n === 6 ? n3(e) : n === 3 ? new Wi(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, (e & 15) << 4 | e & 15, 1) : n === 8 ? eh(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (e & 255) / 255) : n === 4 ? eh(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | e & 240, ((e & 15) << 4 | e & 15) / 255) : null) : (e = Gee.exec(t)) ? new Wi(e[1], e[2], e[3], 1) : (e = Yee.exec(t)) ? new Wi(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, 1) : (e = Xee.exec(t)) ? eh(e[1], e[2], e[3], e[4]) : (e = Qee.exec(t)) ? eh(e[1] * 255 / 100, e[2] * 255 / 100, e[3] * 255 / 100, e[4]) : (e = Zee.exec(t)) ? s3(e[1], e[2] / 100, e[3] / 100, 1) : (e = $ee.exec(t)) ? s3(e[1], e[2] / 100, e[3] / 100, e[4]) : $S.hasOwnProperty(t) ? n3($S[t]) : t === "transparent" ? new Wi(NaN, NaN, NaN, 0) : null;
}
function n3(t) {
  return new Wi(t >> 16 & 255, t >> 8 & 255, t & 255, 1);
}
function eh(t, e, n, i) {
  return i <= 0 && (t = e = n = NaN), new Wi(t, e, n, i);
}
function nte(t) {
  return t instanceof tf || (t = Eu(t)), t ? (t = t.rgb(), new Wi(t.r, t.g, t.b, t.opacity)) : new Wi();
}
function Z1(t, e, n, i) {
  return arguments.length === 1 ? nte(t) : new Wi(t, e, n, i ?? 1);
}
function Wi(t, e, n, i) {
  this.r = +t, this.g = +e, this.b = +n, this.opacity = +i;
}
t_(Wi, Z1, vM(tf, {
  brighter(t) {
    return t = t == null ? xd : Math.pow(xd, t), new Wi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? Cu : Math.pow(Cu, t), new Wi(this.r * t, this.g * t, this.b * t, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Wi(vl(this.r), vl(this.g), vl(this.b), Fd(this.opacity));
  },
  displayable() {
    return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;
  },
  hex: i3,
  formatHex: i3,
  formatHex8: ite,
  formatRgb: r3,
  toString: r3
}));
function i3() {
  return `#${ml(this.r)}${ml(this.g)}${ml(this.b)}`;
}
function ite() {
  return `#${ml(this.r)}${ml(this.g)}${ml(this.b)}${ml((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}
function r3() {
  const t = Fd(this.opacity);
  return `${t === 1 ? "rgb(" : "rgba("}${vl(this.r)}, ${vl(this.g)}, ${vl(this.b)}${t === 1 ? ")" : `, ${t})`}`;
}
function Fd(t) {
  return isNaN(t) ? 1 : Math.max(0, Math.min(1, t));
}
function vl(t) {
  return Math.max(0, Math.min(255, Math.round(t) || 0));
}
function ml(t) {
  return t = vl(t), (t < 16 ? "0" : "") + t.toString(16);
}
function s3(t, e, n, i) {
  return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new Lr(t, e, n, i);
}
function kM(t) {
  if (t instanceof Lr)
    return new Lr(t.h, t.s, t.l, t.opacity);
  if (t instanceof tf || (t = Eu(t)), !t)
    return new Lr();
  if (t instanceof Lr)
    return t;
  t = t.rgb();
  var e = t.r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), s = Math.max(e, n, i), o = NaN, l = s - r, a = (s + r) / 2;
  return l ? (e === s ? o = (n - i) / l + (n < i) * 6 : n === s ? o = (i - e) / l + 2 : o = (e - n) / l + 4, l /= a < 0.5 ? s + r : 2 - s - r, o *= 60) : l = a > 0 && a < 1 ? 0 : o, new Lr(o, l, a, t.opacity);
}
function rte(t, e, n, i) {
  return arguments.length === 1 ? kM(t) : new Lr(t, e, n, i ?? 1);
}
function Lr(t, e, n, i) {
  this.h = +t, this.s = +e, this.l = +n, this.opacity = +i;
}
t_(Lr, rte, vM(tf, {
  brighter(t) {
    return t = t == null ? xd : Math.pow(xd, t), new Lr(this.h, this.s, this.l * t, this.opacity);
  },
  darker(t) {
    return t = t == null ? Cu : Math.pow(Cu, t), new Lr(this.h, this.s, this.l * t, this.opacity);
  },
  rgb() {
    var t = this.h % 360 + (this.h < 0) * 360, e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < 0.5 ? n : 1 - n) * e, r = 2 * n - i;
    return new Wi(
      hm(t >= 240 ? t - 240 : t + 120, r, i),
      hm(t, r, i),
      hm(t < 120 ? t + 240 : t - 120, r, i),
      this.opacity
    );
  },
  clamp() {
    return new Lr(o3(this.h), th(this.s), th(this.l), Fd(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;
  },
  formatHsl() {
    const t = Fd(this.opacity);
    return `${t === 1 ? "hsl(" : "hsla("}${o3(this.h)}, ${th(this.s) * 100}%, ${th(this.l) * 100}%${t === 1 ? ")" : `, ${t})`}`;
  }
}));
function o3(t) {
  return t = (t || 0) % 360, t < 0 ? t + 360 : t;
}
function th(t) {
  return Math.max(0, Math.min(1, t || 0));
}
function hm(t, e, n) {
  return (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) * 255;
}
const CM = (t) => () => t;
function ste(t, e) {
  return function(n) {
    return t + n * e;
  };
}
function ote(t, e, n) {
  return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function(i) {
    return Math.pow(t + i * e, n);
  };
}
function lte(t) {
  return (t = +t) == 1 ? SM : function(e, n) {
    return n - e ? ote(e, n, t) : CM(isNaN(e) ? n : e);
  };
}
function SM(t, e) {
  var n = e - t;
  return n ? ste(t, n) : CM(isNaN(t) ? e : t);
}
const l3 = function t(e) {
  var n = lte(e);
  function i(r, s) {
    var o = n((r = Z1(r)).r, (s = Z1(s)).r), l = n(r.g, s.g), a = n(r.b, s.b), c = SM(r.opacity, s.opacity);
    return function(u) {
      return r.r = o(u), r.g = l(u), r.b = a(u), r.opacity = c(u), r + "";
    };
  }
  return i.gamma = t, i;
}(1);
function mo(t, e) {
  return t = +t, e = +e, function(n) {
    return t * (1 - n) + e * n;
  };
}
var $1 = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, dm = new RegExp($1.source, "g");
function ate(t) {
  return function() {
    return t;
  };
}
function cte(t) {
  return function(e) {
    return t(e) + "";
  };
}
function ute(t, e) {
  var n = $1.lastIndex = dm.lastIndex = 0, i, r, s, o = -1, l = [], a = [];
  for (t = t + "", e = e + ""; (i = $1.exec(t)) && (r = dm.exec(e)); )
    (s = r.index) > n && (s = e.slice(n, s), l[o] ? l[o] += s : l[++o] = s), (i = i[0]) === (r = r[0]) ? l[o] ? l[o] += r : l[++o] = r : (l[++o] = null, a.push({ i: o, x: mo(i, r) })), n = dm.lastIndex;
  return n < e.length && (s = e.slice(n), l[o] ? l[o] += s : l[++o] = s), l.length < 2 ? a[0] ? cte(a[0].x) : ate(e) : (e = a.length, function(c) {
    for (var u = 0, f; u < e; ++u)
      l[(f = a[u]).i] = f.x(c);
    return l.join("");
  });
}
var a3 = 180 / Math.PI, e0 = {
  translateX: 0,
  translateY: 0,
  rotate: 0,
  skewX: 0,
  scaleX: 1,
  scaleY: 1
};
function EM(t, e, n, i, r, s) {
  var o, l, a;
  return (o = Math.sqrt(t * t + e * e)) && (t /= o, e /= o), (a = t * n + e * i) && (n -= t * a, i -= e * a), (l = Math.sqrt(n * n + i * i)) && (n /= l, i /= l, a /= l), t * i < e * n && (t = -t, e = -e, a = -a, o = -o), {
    translateX: r,
    translateY: s,
    rotate: Math.atan2(e, t) * a3,
    skewX: Math.atan(a) * a3,
    scaleX: o,
    scaleY: l
  };
}
var nh;
function fte(t) {
  const e = new (typeof DOMMatrix == "function" ? DOMMatrix : WebKitCSSMatrix)(t + "");
  return e.isIdentity ? e0 : EM(e.a, e.b, e.c, e.d, e.e, e.f);
}
function hte(t) {
  return t == null || (nh || (nh = document.createElementNS("http://www.w3.org/2000/svg", "g")), nh.setAttribute("transform", t), !(t = nh.transform.baseVal.consolidate())) ? e0 : (t = t.matrix, EM(t.a, t.b, t.c, t.d, t.e, t.f));
}
function AM(t, e, n, i) {
  function r(c) {
    return c.length ? c.pop() + " " : "";
  }
  function s(c, u, f, h, d, p) {
    if (c !== f || u !== h) {
      var g = d.push("translate(", null, e, null, n);
      p.push({ i: g - 4, x: mo(c, f) }, { i: g - 2, x: mo(u, h) });
    } else
      (f || h) && d.push("translate(" + f + e + h + n);
  }
  function o(c, u, f, h) {
    c !== u ? (c - u > 180 ? u += 360 : u - c > 180 && (c += 360), h.push({ i: f.push(r(f) + "rotate(", null, i) - 2, x: mo(c, u) })) : u && f.push(r(f) + "rotate(" + u + i);
  }
  function l(c, u, f, h) {
    c !== u ? h.push({ i: f.push(r(f) + "skewX(", null, i) - 2, x: mo(c, u) }) : u && f.push(r(f) + "skewX(" + u + i);
  }
  function a(c, u, f, h, d, p) {
    if (c !== f || u !== h) {
      var g = d.push(r(d) + "scale(", null, ",", null, ")");
      p.push({ i: g - 4, x: mo(c, f) }, { i: g - 2, x: mo(u, h) });
    } else
      (f !== 1 || h !== 1) && d.push(r(d) + "scale(" + f + "," + h + ")");
  }
  return function(c, u) {
    var f = [], h = [];
    return c = t(c), u = t(u), s(c.translateX, c.translateY, u.translateX, u.translateY, f, h), o(c.rotate, u.rotate, f, h), l(c.skewX, u.skewX, f, h), a(c.scaleX, c.scaleY, u.scaleX, u.scaleY, f, h), c = u = null, function(d) {
      for (var p = -1, g = h.length, m; ++p < g; )
        f[(m = h[p]).i] = m.x(d);
      return f.join("");
    };
  };
}
var dte = AM(fte, "px, ", "px)", "deg)"), pte = AM(hte, ", ", ")", ")"), gte = 1e-12;
function c3(t) {
  return ((t = Math.exp(t)) + 1 / t) / 2;
}
function mte(t) {
  return ((t = Math.exp(t)) - 1 / t) / 2;
}
function bte(t) {
  return ((t = Math.exp(2 * t)) - 1) / (t + 1);
}
const _te = function t(e, n, i) {
  function r(s, o) {
    var l = s[0], a = s[1], c = s[2], u = o[0], f = o[1], h = o[2], d = u - l, p = f - a, g = d * d + p * p, m, _;
    if (g < gte)
      _ = Math.log(h / c) / e, m = function(w) {
        return [
          l + w * d,
          a + w * p,
          c * Math.exp(e * w * _)
        ];
      };
    else {
      var S = Math.sqrt(g), v = (h * h - c * c + i * g) / (2 * c * n * S), k = (h * h - c * c - i * g) / (2 * h * n * S), C = Math.log(Math.sqrt(v * v + 1) - v), A = Math.log(Math.sqrt(k * k + 1) - k);
      _ = (A - C) / e, m = function(w) {
        var M = w * _, N = c3(C), T = c / (n * S) * (N * bte(e * M + C) - mte(C));
        return [
          l + T * d,
          a + T * p,
          c * N / c3(e * M + C)
        ];
      };
    }
    return m.duration = _ * 1e3 * e / Math.SQRT2, m;
  }
  return r.rho = function(s) {
    var o = Math.max(1e-3, +s), l = o * o, a = l * l;
    return t(o, l, a);
  }, r;
}(Math.SQRT2, 2, 4);
var Ka = 0, Pc = 0, vc = 0, MM = 1e3, zd, Ic, Vd = 0, Nl = 0, $p = 0, Au = typeof performance == "object" && performance.now ? performance : Date, OM = typeof window == "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(t) {
  setTimeout(t, 17);
};
function n_() {
  return Nl || (OM(yte), Nl = Au.now() + $p);
}
function yte() {
  Nl = 0;
}
function Ud() {
  this._call = this._time = this._next = null;
}
Ud.prototype = TM.prototype = {
  constructor: Ud,
  restart: function(t, e, n) {
    if (typeof t != "function")
      throw new TypeError("callback is not a function");
    n = (n == null ? n_() : +n) + (e == null ? 0 : +e), !this._next && Ic !== this && (Ic ? Ic._next = this : zd = this, Ic = this), this._call = t, this._time = n, t0();
  },
  stop: function() {
    this._call && (this._call = null, this._time = 1 / 0, t0());
  }
};
function TM(t, e, n) {
  var i = new Ud();
  return i.restart(t, e, n), i;
}
function wte() {
  n_(), ++Ka;
  for (var t = zd, e; t; )
    (e = Nl - t._time) >= 0 && t._call.call(void 0, e), t = t._next;
  --Ka;
}
function u3() {
  Nl = (Vd = Au.now()) + $p, Ka = Pc = 0;
  try {
    wte();
  } finally {
    Ka = 0, kte(), Nl = 0;
  }
}
function vte() {
  var t = Au.now(), e = t - Vd;
  e > MM && ($p -= e, Vd = t);
}
function kte() {
  for (var t, e = zd, n, i = 1 / 0; e; )
    e._call ? (i > e._time && (i = e._time), t = e, e = e._next) : (n = e._next, e._next = null, e = t ? t._next = n : zd = n);
  Ic = t, t0(i);
}
function t0(t) {
  if (!Ka) {
    Pc && (Pc = clearTimeout(Pc));
    var e = t - Nl;
    e > 24 ? (t < 1 / 0 && (Pc = setTimeout(u3, t - Au.now() - $p)), vc && (vc = clearInterval(vc))) : (vc || (Vd = Au.now(), vc = setInterval(vte, MM)), Ka = 1, OM(u3));
  }
}
function f3(t, e, n) {
  var i = new Ud();
  return e = e == null ? 0 : +e, i.restart((r) => {
    i.stop(), t(r + e);
  }, e, n), i;
}
var Cte = Zb("start", "end", "cancel", "interrupt"), Ste = [], RM = 0, h3 = 1, n0 = 2, Oh = 3, d3 = 4, i0 = 5, Th = 6;
function eg(t, e, n, i, r, s) {
  var o = t.__transition;
  if (!o)
    t.__transition = {};
  else if (n in o)
    return;
  Ete(t, n, {
    name: e,
    index: i,
    group: r,
    on: Cte,
    tween: Ste,
    time: s.time,
    delay: s.delay,
    duration: s.duration,
    ease: s.ease,
    timer: null,
    state: RM
  });
}
function i_(t, e) {
  var n = Gr(t, e);
  if (n.state > RM)
    throw new Error("too late; already scheduled");
  return n;
}
function js(t, e) {
  var n = Gr(t, e);
  if (n.state > Oh)
    throw new Error("too late; already running");
  return n;
}
function Gr(t, e) {
  var n = t.__transition;
  if (!n || !(n = n[e]))
    throw new Error("transition not found");
  return n;
}
function Ete(t, e, n) {
  var i = t.__transition, r;
  i[e] = n, n.timer = TM(s, 0, n.time);
  function s(c) {
    n.state = h3, n.timer.restart(o, n.delay, n.time), n.delay <= c && o(c - n.delay);
  }
  function o(c) {
    var u, f, h, d;
    if (n.state !== h3)
      return a();
    for (u in i)
      if (d = i[u], d.name === n.name) {
        if (d.state === Oh)
          return f3(o);
        d.state === d3 ? (d.state = Th, d.timer.stop(), d.on.call("interrupt", t, t.__data__, d.index, d.group), delete i[u]) : +u < e && (d.state = Th, d.timer.stop(), d.on.call("cancel", t, t.__data__, d.index, d.group), delete i[u]);
      }
    if (f3(function() {
      n.state === Oh && (n.state = d3, n.timer.restart(l, n.delay, n.time), l(c));
    }), n.state = n0, n.on.call("start", t, t.__data__, n.index, n.group), n.state === n0) {
      for (n.state = Oh, r = new Array(h = n.tween.length), u = 0, f = -1; u < h; ++u)
        (d = n.tween[u].value.call(t, t.__data__, n.index, n.group)) && (r[++f] = d);
      r.length = f + 1;
    }
  }
  function l(c) {
    for (var u = c < n.duration ? n.ease.call(null, c / n.duration) : (n.timer.restart(a), n.state = i0, 1), f = -1, h = r.length; ++f < h; )
      r[f].call(t, u);
    n.state === i0 && (n.on.call("end", t, t.__data__, n.index, n.group), a());
  }
  function a() {
    n.state = Th, n.timer.stop(), delete i[e];
    for (var c in i)
      return;
    delete t.__transition;
  }
}
function Rh(t, e) {
  var n = t.__transition, i, r, s = !0, o;
  if (n) {
    e = e == null ? null : e + "";
    for (o in n) {
      if ((i = n[o]).name !== e) {
        s = !1;
        continue;
      }
      r = i.state > n0 && i.state < i0, i.state = Th, i.timer.stop(), i.on.call(r ? "interrupt" : "cancel", t, t.__data__, i.index, i.group), delete n[o];
    }
    s && delete t.__transition;
  }
}
function Ate(t) {
  return this.each(function() {
    Rh(this, t);
  });
}
function Mte(t, e) {
  var n, i;
  return function() {
    var r = js(this, t), s = r.tween;
    if (s !== n) {
      i = n = s;
      for (var o = 0, l = i.length; o < l; ++o)
        if (i[o].name === e) {
          i = i.slice(), i.splice(o, 1);
          break;
        }
    }
    r.tween = i;
  };
}
function Ote(t, e, n) {
  var i, r;
  if (typeof n != "function")
    throw new Error();
  return function() {
    var s = js(this, t), o = s.tween;
    if (o !== i) {
      r = (i = o).slice();
      for (var l = { name: e, value: n }, a = 0, c = r.length; a < c; ++a)
        if (r[a].name === e) {
          r[a] = l;
          break;
        }
      a === c && r.push(l);
    }
    s.tween = r;
  };
}
function Tte(t, e) {
  var n = this._id;
  if (t += "", arguments.length < 2) {
    for (var i = Gr(this.node(), n).tween, r = 0, s = i.length, o; r < s; ++r)
      if ((o = i[r]).name === t)
        return o.value;
    return null;
  }
  return this.each((e == null ? Mte : Ote)(n, t, e));
}
function r_(t, e, n) {
  var i = t._id;
  return t.each(function() {
    var r = js(this, i);
    (r.value || (r.value = {}))[e] = n.apply(this, arguments);
  }), function(r) {
    return Gr(r, i).value[e];
  };
}
function PM(t, e) {
  var n;
  return (typeof e == "number" ? mo : e instanceof Eu ? l3 : (n = Eu(e)) ? (e = n, l3) : ute)(t, e);
}
function Rte(t) {
  return function() {
    this.removeAttribute(t);
  };
}
function Pte(t) {
  return function() {
    this.removeAttributeNS(t.space, t.local);
  };
}
function Ite(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = this.getAttribute(t);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function Dte(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = this.getAttributeNS(t.space, t.local);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function Nte(t, e, n) {
  var i, r, s;
  return function() {
    var o, l = n(this), a;
    return l == null ? void this.removeAttribute(t) : (o = this.getAttribute(t), a = l + "", o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l)));
  };
}
function Lte(t, e, n) {
  var i, r, s;
  return function() {
    var o, l = n(this), a;
    return l == null ? void this.removeAttributeNS(t.space, t.local) : (o = this.getAttributeNS(t.space, t.local), a = l + "", o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l)));
  };
}
function jte(t, e) {
  var n = Zp(t), i = n === "transform" ? pte : PM;
  return this.attrTween(t, typeof e == "function" ? (n.local ? Lte : Nte)(n, i, r_(this, "attr." + t, e)) : e == null ? (n.local ? Pte : Rte)(n) : (n.local ? Dte : Ite)(n, i, e));
}
function Bte(t, e) {
  return function(n) {
    this.setAttribute(t, e.call(this, n));
  };
}
function xte(t, e) {
  return function(n) {
    this.setAttributeNS(t.space, t.local, e.call(this, n));
  };
}
function Fte(t, e) {
  var n, i;
  function r() {
    var s = e.apply(this, arguments);
    return s !== i && (n = (i = s) && xte(t, s)), n;
  }
  return r._value = e, r;
}
function zte(t, e) {
  var n, i;
  function r() {
    var s = e.apply(this, arguments);
    return s !== i && (n = (i = s) && Bte(t, s)), n;
  }
  return r._value = e, r;
}
function Vte(t, e) {
  var n = "attr." + t;
  if (arguments.length < 2)
    return (n = this.tween(n)) && n._value;
  if (e == null)
    return this.tween(n, null);
  if (typeof e != "function")
    throw new Error();
  var i = Zp(t);
  return this.tween(n, (i.local ? Fte : zte)(i, e));
}
function Ute(t, e) {
  return function() {
    i_(this, t).delay = +e.apply(this, arguments);
  };
}
function Hte(t, e) {
  return e = +e, function() {
    i_(this, t).delay = e;
  };
}
function Wte(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? Ute : Hte)(e, t)) : Gr(this.node(), e).delay;
}
function qte(t, e) {
  return function() {
    js(this, t).duration = +e.apply(this, arguments);
  };
}
function Jte(t, e) {
  return e = +e, function() {
    js(this, t).duration = e;
  };
}
function Kte(t) {
  var e = this._id;
  return arguments.length ? this.each((typeof t == "function" ? qte : Jte)(e, t)) : Gr(this.node(), e).duration;
}
function Gte(t, e) {
  if (typeof e != "function")
    throw new Error();
  return function() {
    js(this, t).ease = e;
  };
}
function Yte(t) {
  var e = this._id;
  return arguments.length ? this.each(Gte(e, t)) : Gr(this.node(), e).ease;
}
function Xte(t, e) {
  return function() {
    var n = e.apply(this, arguments);
    if (typeof n != "function")
      throw new Error();
    js(this, t).ease = n;
  };
}
function Qte(t) {
  if (typeof t != "function")
    throw new Error();
  return this.each(Xte(this._id, t));
}
function Zte(t) {
  typeof t != "function" && (t = fM(t));
  for (var e = this._groups, n = e.length, i = new Array(n), r = 0; r < n; ++r)
    for (var s = e[r], o = s.length, l = i[r] = [], a, c = 0; c < o; ++c)
      (a = s[c]) && t.call(a, a.__data__, c, s) && l.push(a);
  return new to(i, this._parents, this._name, this._id);
}
function $te(t) {
  if (t._id !== this._id)
    throw new Error();
  for (var e = this._groups, n = t._groups, i = e.length, r = n.length, s = Math.min(i, r), o = new Array(i), l = 0; l < s; ++l)
    for (var a = e[l], c = n[l], u = a.length, f = o[l] = new Array(u), h, d = 0; d < u; ++d)
      (h = a[d] || c[d]) && (f[d] = h);
  for (; l < i; ++l)
    o[l] = e[l];
  return new to(o, this._parents, this._name, this._id);
}
function ene(t) {
  return (t + "").trim().split(/^|\s+/).every(function(e) {
    var n = e.indexOf(".");
    return n >= 0 && (e = e.slice(0, n)), !e || e === "start";
  });
}
function tne(t, e, n) {
  var i, r, s = ene(e) ? i_ : js;
  return function() {
    var o = s(this, t), l = o.on;
    l !== i && (r = (i = l).copy()).on(e, n), o.on = r;
  };
}
function nne(t, e) {
  var n = this._id;
  return arguments.length < 2 ? Gr(this.node(), n).on.on(t) : this.each(tne(n, t, e));
}
function ine(t) {
  return function() {
    var e = this.parentNode;
    for (var n in this.__transition)
      if (+n !== t)
        return;
    e && e.removeChild(this);
  };
}
function rne() {
  return this.on("end.remove", ine(this._id));
}
function sne(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = $b(t));
  for (var i = this._groups, r = i.length, s = new Array(r), o = 0; o < r; ++o)
    for (var l = i[o], a = l.length, c = s[o] = new Array(a), u, f, h = 0; h < a; ++h)
      (u = l[h]) && (f = t.call(u, u.__data__, h, l)) && ("__data__" in u && (f.__data__ = u.__data__), c[h] = f, eg(c[h], e, n, h, c, Gr(u, n)));
  return new to(s, this._parents, e, n);
}
function one(t) {
  var e = this._name, n = this._id;
  typeof t != "function" && (t = uM(t));
  for (var i = this._groups, r = i.length, s = [], o = [], l = 0; l < r; ++l)
    for (var a = i[l], c = a.length, u, f = 0; f < c; ++f)
      if (u = a[f]) {
        for (var h = t.call(u, u.__data__, f, a), d, p = Gr(u, n), g = 0, m = h.length; g < m; ++g)
          (d = h[g]) && eg(d, e, n, g, h, p);
        s.push(h), o.push(u);
      }
  return new to(s, o, e, n);
}
var lne = ef.prototype.constructor;
function ane() {
  return new lne(this._groups, this._parents);
}
function cne(t, e) {
  var n, i, r;
  return function() {
    var s = Ja(this, t), o = (this.style.removeProperty(t), Ja(this, t));
    return s === o ? null : s === n && o === i ? r : r = e(n = s, i = o);
  };
}
function IM(t) {
  return function() {
    this.style.removeProperty(t);
  };
}
function une(t, e, n) {
  var i, r = n + "", s;
  return function() {
    var o = Ja(this, t);
    return o === r ? null : o === i ? s : s = e(i = o, n);
  };
}
function fne(t, e, n) {
  var i, r, s;
  return function() {
    var o = Ja(this, t), l = n(this), a = l + "";
    return l == null && (a = l = (this.style.removeProperty(t), Ja(this, t))), o === a ? null : o === i && a === r ? s : (r = a, s = e(i = o, l));
  };
}
function hne(t, e) {
  var n, i, r, s = "style." + e, o = "end." + s, l;
  return function() {
    var a = js(this, t), c = a.on, u = a.value[s] == null ? l || (l = IM(e)) : void 0;
    (c !== n || r !== u) && (i = (n = c).copy()).on(o, r = u), a.on = i;
  };
}
function dne(t, e, n) {
  var i = (t += "") == "transform" ? dte : PM;
  return e == null ? this.styleTween(t, cne(t, i)).on("end.style." + t, IM(t)) : typeof e == "function" ? this.styleTween(t, fne(t, i, r_(this, "style." + t, e))).each(hne(this._id, t)) : this.styleTween(t, une(t, i, e), n).on("end.style." + t, null);
}
function pne(t, e, n) {
  return function(i) {
    this.style.setProperty(t, e.call(this, i), n);
  };
}
function gne(t, e, n) {
  var i, r;
  function s() {
    var o = e.apply(this, arguments);
    return o !== r && (i = (r = o) && pne(t, o, n)), i;
  }
  return s._value = e, s;
}
function mne(t, e, n) {
  var i = "style." + (t += "");
  if (arguments.length < 2)
    return (i = this.tween(i)) && i._value;
  if (e == null)
    return this.tween(i, null);
  if (typeof e != "function")
    throw new Error();
  return this.tween(i, gne(t, e, n ?? ""));
}
function bne(t) {
  return function() {
    this.textContent = t;
  };
}
function _ne(t) {
  return function() {
    var e = t(this);
    this.textContent = e ?? "";
  };
}
function yne(t) {
  return this.tween("text", typeof t == "function" ? _ne(r_(this, "text", t)) : bne(t == null ? "" : t + ""));
}
function wne(t) {
  return function(e) {
    this.textContent = t.call(this, e);
  };
}
function vne(t) {
  var e, n;
  function i() {
    var r = t.apply(this, arguments);
    return r !== n && (e = (n = r) && wne(r)), e;
  }
  return i._value = t, i;
}
function kne(t) {
  var e = "text";
  if (arguments.length < 1)
    return (e = this.tween(e)) && e._value;
  if (t == null)
    return this.tween(e, null);
  if (typeof t != "function")
    throw new Error();
  return this.tween(e, vne(t));
}
function Cne() {
  for (var t = this._name, e = this._id, n = DM(), i = this._groups, r = i.length, s = 0; s < r; ++s)
    for (var o = i[s], l = o.length, a, c = 0; c < l; ++c)
      if (a = o[c]) {
        var u = Gr(a, e);
        eg(a, t, n, c, o, {
          time: u.time + u.delay + u.duration,
          delay: 0,
          duration: u.duration,
          ease: u.ease
        });
      }
  return new to(i, this._parents, t, n);
}
function Sne() {
  var t, e, n = this, i = n._id, r = n.size();
  return new Promise(function(s, o) {
    var l = { value: o }, a = { value: function() {
      --r === 0 && s();
    } };
    n.each(function() {
      var c = js(this, i), u = c.on;
      u !== t && (e = (t = u).copy(), e._.cancel.push(l), e._.interrupt.push(l), e._.end.push(a)), c.on = e;
    }), r === 0 && s();
  });
}
var Ene = 0;
function to(t, e, n, i) {
  this._groups = t, this._parents = e, this._name = n, this._id = i;
}
function DM() {
  return ++Ene;
}
var xs = ef.prototype;
to.prototype = {
  constructor: to,
  select: sne,
  selectAll: one,
  selectChild: xs.selectChild,
  selectChildren: xs.selectChildren,
  filter: Zte,
  merge: $te,
  selection: ane,
  transition: Cne,
  call: xs.call,
  nodes: xs.nodes,
  node: xs.node,
  size: xs.size,
  empty: xs.empty,
  each: xs.each,
  on: nne,
  attr: jte,
  attrTween: Vte,
  style: dne,
  styleTween: mne,
  text: yne,
  textTween: kne,
  remove: rne,
  tween: Tte,
  delay: Wte,
  duration: Kte,
  ease: Yte,
  easeVarying: Qte,
  end: Sne,
  [Symbol.iterator]: xs[Symbol.iterator]
};
function Ane(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}
var Mne = {
  time: null,
  delay: 0,
  duration: 250,
  ease: Ane
};
function One(t, e) {
  for (var n; !(n = t.__transition) || !(n = n[e]); )
    if (!(t = t.parentNode))
      throw new Error(`transition ${e} not found`);
  return n;
}
function Tne(t) {
  var e, n;
  t instanceof to ? (e = t._id, t = t._name) : (e = DM(), (n = Mne).time = n_(), t = t == null ? null : t + "");
  for (var i = this._groups, r = i.length, s = 0; s < r; ++s)
    for (var o = i[s], l = o.length, a, c = 0; c < l; ++c)
      (a = o[c]) && eg(a, t, e, c, o, n || One(a, e));
  return new to(i, this._parents, t, e);
}
ef.prototype.interrupt = Ate;
ef.prototype.transition = Tne;
const ih = (t) => () => t;
function Rne(t, {
  sourceEvent: e,
  target: n,
  transform: i,
  dispatch: r
}) {
  Object.defineProperties(this, {
    type: { value: t, enumerable: !0, configurable: !0 },
    sourceEvent: { value: e, enumerable: !0, configurable: !0 },
    target: { value: n, enumerable: !0, configurable: !0 },
    transform: { value: i, enumerable: !0, configurable: !0 },
    _: { value: r }
  });
}
function qs(t, e, n) {
  this.k = t, this.x = e, this.y = n;
}
qs.prototype = {
  constructor: qs,
  scale: function(t) {
    return t === 1 ? this : new qs(this.k * t, this.x, this.y);
  },
  translate: function(t, e) {
    return t === 0 & e === 0 ? this : new qs(this.k, this.x + this.k * t, this.y + this.k * e);
  },
  apply: function(t) {
    return [t[0] * this.k + this.x, t[1] * this.k + this.y];
  },
  applyX: function(t) {
    return t * this.k + this.x;
  },
  applyY: function(t) {
    return t * this.k + this.y;
  },
  invert: function(t) {
    return [(t[0] - this.x) / this.k, (t[1] - this.y) / this.k];
  },
  invertX: function(t) {
    return (t - this.x) / this.k;
  },
  invertY: function(t) {
    return (t - this.y) / this.k;
  },
  rescaleX: function(t) {
    return t.copy().domain(t.range().map(this.invertX, this).map(t.invert, t));
  },
  rescaleY: function(t) {
    return t.copy().domain(t.range().map(this.invertY, this).map(t.invert, t));
  },
  toString: function() {
    return "translate(" + this.x + "," + this.y + ") scale(" + this.k + ")";
  }
};
var Hd = new qs(1, 0, 0);
qs.prototype;
function pm(t) {
  t.stopImmediatePropagation();
}
function kc(t) {
  t.preventDefault(), t.stopImmediatePropagation();
}
function Pne(t) {
  return (!t.ctrlKey || t.type === "wheel") && !t.button;
}
function Ine() {
  var t = this;
  return t instanceof SVGElement ? (t = t.ownerSVGElement || t, t.hasAttribute("viewBox") ? (t = t.viewBox.baseVal, [[t.x, t.y], [t.x + t.width, t.y + t.height]]) : [[0, 0], [t.width.baseVal.value, t.height.baseVal.value]]) : [[0, 0], [t.clientWidth, t.clientHeight]];
}
function p3() {
  return this.__zoom || Hd;
}
function Dne(t) {
  return -t.deltaY * (t.deltaMode === 1 ? 0.05 : t.deltaMode ? 1 : 2e-3) * (t.ctrlKey ? 10 : 1);
}
function Nne() {
  return navigator.maxTouchPoints || "ontouchstart" in this;
}
function Lne(t, e, n) {
  var i = t.invertX(e[0][0]) - n[0][0], r = t.invertX(e[1][0]) - n[1][0], s = t.invertY(e[0][1]) - n[0][1], o = t.invertY(e[1][1]) - n[1][1];
  return t.translate(
    r > i ? (i + r) / 2 : Math.min(0, i) || Math.max(0, r),
    o > s ? (s + o) / 2 : Math.min(0, s) || Math.max(0, o)
  );
}
function jne() {
  var t = Pne, e = Ine, n = Lne, i = Dne, r = Nne, s = [0, 1 / 0], o = [[-1 / 0, -1 / 0], [1 / 0, 1 / 0]], l = 250, a = _te, c = Zb("start", "zoom", "end"), u, f, h, d = 500, p = 150, g = 0, m = 10;
  function _(I) {
    I.property("__zoom", p3).on("wheel.zoom", M, { passive: !1 }).on("mousedown.zoom", N).on("dblclick.zoom", T).filter(r).on("touchstart.zoom", O).on("touchmove.zoom", W).on("touchend.zoom touchcancel.zoom", H).style("-webkit-tap-highlight-color", "rgba(0,0,0,0)");
  }
  _.transform = function(I, z, L, K) {
    var F = I.selection ? I.selection() : I;
    F.property("__zoom", p3), I !== F ? C(I, z, L, K) : F.interrupt().each(function() {
      A(this, arguments).event(K).start().zoom(null, typeof z == "function" ? z.apply(this, arguments) : z).end();
    });
  }, _.scaleBy = function(I, z, L, K) {
    _.scaleTo(I, function() {
      var F = this.__zoom.k, D = typeof z == "function" ? z.apply(this, arguments) : z;
      return F * D;
    }, L, K);
  }, _.scaleTo = function(I, z, L, K) {
    _.transform(I, function() {
      var F = e.apply(this, arguments), D = this.__zoom, X = L == null ? k(F) : typeof L == "function" ? L.apply(this, arguments) : L, ue = D.invert(X), q = typeof z == "function" ? z.apply(this, arguments) : z;
      return n(v(S(D, q), X, ue), F, o);
    }, L, K);
  }, _.translateBy = function(I, z, L, K) {
    _.transform(I, function() {
      return n(this.__zoom.translate(
        typeof z == "function" ? z.apply(this, arguments) : z,
        typeof L == "function" ? L.apply(this, arguments) : L
      ), e.apply(this, arguments), o);
    }, null, K);
  }, _.translateTo = function(I, z, L, K, F) {
    _.transform(I, function() {
      var D = e.apply(this, arguments), X = this.__zoom, ue = K == null ? k(D) : typeof K == "function" ? K.apply(this, arguments) : K;
      return n(Hd.translate(ue[0], ue[1]).scale(X.k).translate(
        typeof z == "function" ? -z.apply(this, arguments) : -z,
        typeof L == "function" ? -L.apply(this, arguments) : -L
      ), D, o);
    }, K, F);
  };
  function S(I, z) {
    return z = Math.max(s[0], Math.min(s[1], z)), z === I.k ? I : new qs(z, I.x, I.y);
  }
  function v(I, z, L) {
    var K = z[0] - L[0] * I.k, F = z[1] - L[1] * I.k;
    return K === I.x && F === I.y ? I : new qs(I.k, K, F);
  }
  function k(I) {
    return [(+I[0][0] + +I[1][0]) / 2, (+I[0][1] + +I[1][1]) / 2];
  }
  function C(I, z, L, K) {
    I.on("start.zoom", function() {
      A(this, arguments).event(K).start();
    }).on("interrupt.zoom end.zoom", function() {
      A(this, arguments).event(K).end();
    }).tween("zoom", function() {
      var F = this, D = arguments, X = A(F, D).event(K), ue = e.apply(F, D), q = L == null ? k(ue) : typeof L == "function" ? L.apply(F, D) : L, ee = Math.max(ue[1][0] - ue[0][0], ue[1][1] - ue[0][1]), ie = F.__zoom, ne = typeof z == "function" ? z.apply(F, D) : z, je = a(ie.invert(q).concat(ee / ie.k), ne.invert(q).concat(ee / ne.k));
      return function(Ie) {
        if (Ie === 1)
          Ie = ne;
        else {
          var Xe = je(Ie), le = ee / Xe[2];
          Ie = new qs(le, q[0] - Xe[0] * le, q[1] - Xe[1] * le);
        }
        X.zoom(null, Ie);
      };
    });
  }
  function A(I, z, L) {
    return !L && I.__zooming || new w(I, z);
  }
  function w(I, z) {
    this.that = I, this.args = z, this.active = 0, this.sourceEvent = null, this.extent = e.apply(I, z), this.taps = 0;
  }
  w.prototype = {
    event: function(I) {
      return I && (this.sourceEvent = I), this;
    },
    start: function() {
      return ++this.active === 1 && (this.that.__zooming = this, this.emit("start")), this;
    },
    zoom: function(I, z) {
      return this.mouse && I !== "mouse" && (this.mouse[1] = z.invert(this.mouse[0])), this.touch0 && I !== "touch" && (this.touch0[1] = z.invert(this.touch0[0])), this.touch1 && I !== "touch" && (this.touch1[1] = z.invert(this.touch1[0])), this.that.__zoom = z, this.emit("zoom"), this;
    },
    end: function() {
      return --this.active === 0 && (delete this.that.__zooming, this.emit("end")), this;
    },
    emit: function(I) {
      var z = Nr(this.that).datum();
      c.call(
        I,
        this.that,
        new Rne(I, {
          sourceEvent: this.sourceEvent,
          target: _,
          type: I,
          transform: this.that.__zoom,
          dispatch: c
        }),
        z
      );
    }
  };
  function M(I, ...z) {
    if (!t.apply(this, arguments))
      return;
    var L = A(this, z).event(I), K = this.__zoom, F = Math.max(s[0], Math.min(s[1], K.k * Math.pow(2, i.apply(this, arguments)))), D = ll(I);
    if (L.wheel)
      (L.mouse[0][0] !== D[0] || L.mouse[0][1] !== D[1]) && (L.mouse[1] = K.invert(L.mouse[0] = D)), clearTimeout(L.wheel);
    else {
      if (K.k === F)
        return;
      L.mouse = [D, K.invert(D)], Rh(this), L.start();
    }
    kc(I), L.wheel = setTimeout(X, p), L.zoom("mouse", n(v(S(K, F), L.mouse[0], L.mouse[1]), L.extent, o));
    function X() {
      L.wheel = null, L.end();
    }
  }
  function N(I, ...z) {
    if (h || !t.apply(this, arguments))
      return;
    var L = I.currentTarget, K = A(this, z, !0).event(I), F = Nr(I.view).on("mousemove.zoom", q, !0).on("mouseup.zoom", ee, !0), D = ll(I, L), X = I.clientX, ue = I.clientY;
    qee(I.view), pm(I), K.mouse = [D, this.__zoom.invert(D)], Rh(this), K.start();
    function q(ie) {
      if (kc(ie), !K.moved) {
        var ne = ie.clientX - X, je = ie.clientY - ue;
        K.moved = ne * ne + je * je > g;
      }
      K.event(ie).zoom("mouse", n(v(K.that.__zoom, K.mouse[0] = ll(ie, L), K.mouse[1]), K.extent, o));
    }
    function ee(ie) {
      F.on("mousemove.zoom mouseup.zoom", null), Jee(ie.view, K.moved), kc(ie), K.event(ie).end();
    }
  }
  function T(I, ...z) {
    if (t.apply(this, arguments)) {
      var L = this.__zoom, K = ll(I.changedTouches ? I.changedTouches[0] : I, this), F = L.invert(K), D = L.k * (I.shiftKey ? 0.5 : 2), X = n(v(S(L, D), K, F), e.apply(this, z), o);
      kc(I), l > 0 ? Nr(this).transition().duration(l).call(C, X, K, I) : Nr(this).call(_.transform, X, K, I);
    }
  }
  function O(I, ...z) {
    if (t.apply(this, arguments)) {
      var L = I.touches, K = L.length, F = A(this, z, I.changedTouches.length === K).event(I), D, X, ue, q;
      for (pm(I), X = 0; X < K; ++X)
        ue = L[X], q = ll(ue, this), q = [q, this.__zoom.invert(q), ue.identifier], F.touch0 ? !F.touch1 && F.touch0[2] !== q[2] && (F.touch1 = q, F.taps = 0) : (F.touch0 = q, D = !0, F.taps = 1 + !!u);
      u && (u = clearTimeout(u)), D && (F.taps < 2 && (f = q[0], u = setTimeout(function() {
        u = null;
      }, d)), Rh(this), F.start());
    }
  }
  function W(I, ...z) {
    if (this.__zooming) {
      var L = A(this, z).event(I), K = I.changedTouches, F = K.length, D, X, ue, q;
      for (kc(I), D = 0; D < F; ++D)
        X = K[D], ue = ll(X, this), L.touch0 && L.touch0[2] === X.identifier ? L.touch0[0] = ue : L.touch1 && L.touch1[2] === X.identifier && (L.touch1[0] = ue);
      if (X = L.that.__zoom, L.touch1) {
        var ee = L.touch0[0], ie = L.touch0[1], ne = L.touch1[0], je = L.touch1[1], Ie = (Ie = ne[0] - ee[0]) * Ie + (Ie = ne[1] - ee[1]) * Ie, Xe = (Xe = je[0] - ie[0]) * Xe + (Xe = je[1] - ie[1]) * Xe;
        X = S(X, Math.sqrt(Ie / Xe)), ue = [(ee[0] + ne[0]) / 2, (ee[1] + ne[1]) / 2], q = [(ie[0] + je[0]) / 2, (ie[1] + je[1]) / 2];
      } else if (L.touch0)
        ue = L.touch0[0], q = L.touch0[1];
      else
        return;
      L.zoom("touch", n(v(X, ue, q), L.extent, o));
    }
  }
  function H(I, ...z) {
    if (this.__zooming) {
      var L = A(this, z).event(I), K = I.changedTouches, F = K.length, D, X;
      for (pm(I), h && clearTimeout(h), h = setTimeout(function() {
        h = null;
      }, d), D = 0; D < F; ++D)
        X = K[D], L.touch0 && L.touch0[2] === X.identifier ? delete L.touch0 : L.touch1 && L.touch1[2] === X.identifier && delete L.touch1;
      if (L.touch1 && !L.touch0 && (L.touch0 = L.touch1, delete L.touch1), L.touch0)
        L.touch0[1] = this.__zoom.invert(L.touch0[0]);
      else if (L.end(), L.taps === 2 && (X = ll(X, this), Math.hypot(f[0] - X[0], f[1] - X[1]) < m)) {
        var ue = Nr(this).on("dblclick.zoom");
        ue && ue.apply(this, arguments);
      }
    }
  }
  return _.wheelDelta = function(I) {
    return arguments.length ? (i = typeof I == "function" ? I : ih(+I), _) : i;
  }, _.filter = function(I) {
    return arguments.length ? (t = typeof I == "function" ? I : ih(!!I), _) : t;
  }, _.touchable = function(I) {
    return arguments.length ? (r = typeof I == "function" ? I : ih(!!I), _) : r;
  }, _.extent = function(I) {
    return arguments.length ? (e = typeof I == "function" ? I : ih([[+I[0][0], +I[0][1]], [+I[1][0], +I[1][1]]]), _) : e;
  }, _.scaleExtent = function(I) {
    return arguments.length ? (s[0] = +I[0], s[1] = +I[1], _) : [s[0], s[1]];
  }, _.translateExtent = function(I) {
    return arguments.length ? (o[0][0] = +I[0][0], o[1][0] = +I[1][0], o[0][1] = +I[0][1], o[1][1] = +I[1][1], _) : [[o[0][0], o[0][1]], [o[1][0], o[1][1]]];
  }, _.constrain = function(I) {
    return arguments.length ? (n = I, _) : n;
  }, _.duration = function(I) {
    return arguments.length ? (l = +I, _) : l;
  }, _.interpolate = function(I) {
    return arguments.length ? (a = I, _) : a;
  }, _.on = function() {
    var I = c.on.apply(c, arguments);
    return I === c ? _ : I;
  }, _.clickDistance = function(I) {
    return arguments.length ? (g = (I = +I) * I, _) : Math.sqrt(g);
  }, _.tapDistance = function(I) {
    return arguments.length ? (m = +I, _) : m;
  }, _;
}
function Mu() {
  return Mu = Object.assign || function(t) {
    for (var e = 1; e < arguments.length; e++) {
      var n = arguments[e];
      for (var i in n)
        Object.prototype.hasOwnProperty.call(n, i) && (t[i] = n[i]);
    }
    return t;
  }, Mu.apply(this, arguments);
}
function Bne(t, e) {
  t.prototype = Object.create(e.prototype), t.prototype.constructor = t, r0(t, e);
}
function r0(t, e) {
  return r0 = Object.setPrototypeOf || function(i, r) {
    return i.__proto__ = r, i;
  }, r0(t, e);
}
function xne(t) {
  if (t === void 0)
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return t;
}
var Ph = 0;
function NM() {
  return Ph > 0;
}
function s0(t) {
  Ph++;
  try {
    return t();
  } finally {
    Ph--, Ph === 0 && Vne();
  }
}
var s_ = /* @__PURE__ */ function() {
  function t(n) {
    this.trigger = n, this.observing = /* @__PURE__ */ new Map();
  }
  var e = t.prototype;
  return e.registerConnection = function(i) {
    var r = this.observing.get(i.observable);
    r || (r = {
      byKey: /* @__PURE__ */ new Set(),
      iterate: !1
    }, this.observing.set(i.observable, r)), i.type === "iterate" ? r.iterate = !0 : r.byKey.add(i.key);
  }, e.removeObservers = function() {
    var i = this;
    this.observing.forEach(function(r, s) {
      r.iterate && s[ri].connections.iterate.delete(i), r.byKey.forEach(function(o) {
        s[ri].connections.byKey.get(o).delete(i);
      });
    }), this.observing.clear();
  }, t;
}(), kl = [], tg = /* @__PURE__ */ function(t) {
  Bne(e, t);
  function e(i, r, s) {
    var o;
    if (o = t.call(this, function() {
      return o._trigger();
    }) || this, o.func = i, o.options = r, o.effect = s, o.isInitial = !0, o.reaction = function() {
      kl.push(xne(o));
      try {
        o.func();
      } finally {
        kl.pop();
      }
      o.effect && (!o.isInitial || o.options.fireImmediately) && o.effect(), o.isInitial = !1;
    }, !s && !o.options.fireImmediately)
      throw new Error("if no effect function passed, should always fireImmediately");
    return o.reaction(), o;
  }
  var n = e.prototype;
  return n._trigger = function() {
    if (kl.includes(this))
      throw new Error("already running reaction");
    this.removeObservers(), this.reaction();
  }, e;
}(s_);
function LM() {
  return !!kl.length;
}
function jM() {
  return kl.length ? kl[kl.length - 1] : void 0;
}
function Fne(t, e, n) {
  var i = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, n), r = new tg(t, i, e);
  return r;
}
var o0 = !1;
function BM() {
  return o0;
}
function xM(t) {
  o0 = !0;
  try {
    t();
  } finally {
    o0 = !1;
  }
}
function zne(t) {
  return function() {
    return xM(t);
  };
}
var l0 = [];
function Vne() {
  var t = [].concat(l0);
  l0 = [], FM(t);
}
function FM(t) {
  var e = /* @__PURE__ */ new Set();
  t.forEach(function(n) {
    var i;
    (n.type === "add" || n.type === "delete") && n.observable[ri].connections.iterate.forEach(function(r) {
      e.add(r);
    }), (i = n.observable[ri].connections.byKey.get(n.key)) == null || i.forEach(function(r) {
      e.add(r);
    });
  }), e.forEach(function(n) {
    n.trigger();
  });
}
function rh(t) {
  if (NM()) {
    l0.push(t);
    return;
  }
  FM([t]);
}
function g3(t, e) {
  if (t.type === "iterate")
    t.observable[ri].connections.iterate.add(e);
  else {
    var n = t.observable[ri].connections.byKey.get(t.key);
    n || (n = /* @__PURE__ */ new Set(), t.observable[ri].connections.byKey.set(t.key, n)), n.add(e);
  }
}
function sh(t, e) {
  if (!BM()) {
    var n = jM();
    n && (g3(t, n), n.registerConnection(t)), e && (g3(t, e), e.registerConnection(t));
  }
}
var o_ = Symbol("$skipreactive"), ri = Symbol("$reactive"), kr = Symbol("$reactiveproxy");
function nf(t, e) {
  return !!(t && t[kr] && t[kr].implicitObserver === e);
}
function l_(t) {
  return t[o_] = !0, t;
}
function zM(t) {
  return !!(t && !nf(t) && t[ri]);
}
function a0(t, e, n) {
  if (n === void 0 && (n = !1), t[o_] || nf(t, e))
    return t;
  var i = Une(t, n);
  if (!e)
    return i;
  var r = i[ri].proxiesWithImplicitObserver.get(e);
  if (!r) {
    var s = {
      implicitObserver: e
    };
    Object.setPrototypeOf(s, VM), r = new Proxy(i[ri].raw, s), i[ri].proxiesWithImplicitObserver.set(e, r);
  }
  return r;
}
var Ga = a0;
function Une(t, e) {
  if (e === void 0 && (e = !1), nf(t))
    return t;
  if (zM(t))
    return t[ri].proxy;
  if (t[ri] || t[kr])
    throw new Error("unexpected");
  var n = {
    connections: {
      iterate: /* @__PURE__ */ new Set(),
      byKey: /* @__PURE__ */ new Map()
    },
    proxy: {},
    raw: t,
    proxiesWithImplicitObserver: /* @__PURE__ */ new Map(),
    shallow: e
  };
  Object.defineProperty(t, ri, {
    enumerable: !1,
    writable: !0,
    configurable: !0,
    value: n
  });
  var i = new Proxy(t, VM);
  return n.proxy = i, i;
}
var VM = {
  has: function(e, n) {
    var i = Reflect.has(e, n);
    return typeof n == "symbol" || sh({
      observable: e,
      key: n,
      type: "has"
    }, this.implicitObserver), i;
  },
  get: function(e, n, i) {
    if (n === kr)
      return {
        implicitObserver: this.implicitObserver
      };
    var r = Reflect.get(e, n, i);
    if (typeof n == "symbol")
      return r;
    if (n === "length" && Array.isArray(e) ? sh({
      observable: e,
      type: "iterate"
    }, this.implicitObserver) : sh({
      observable: e,
      key: n,
      type: "get"
    }, this.implicitObserver), zM(r))
      return a0(r, this.implicitObserver);
    if (e[ri].shallow)
      return r;
    if (typeof r == "object" && r !== null && !nf(r, this.implicitObserver) && !Object.isFrozen(r)) {
      var s = Reflect.getOwnPropertyDescriptor(e, n);
      if ((!s || !(s.writable === !1 && s.configurable === !1)) && (LM() || this.implicitObserver))
        return a0(r, this.implicitObserver);
    }
    return r;
  },
  ownKeys: function(e) {
    return sh({
      observable: e,
      type: "iterate"
    }, this.implicitObserver), Reflect.ownKeys(e);
  },
  set: function(e, n, i, r) {
    return s0(function() {
      if (typeof n == "symbol")
        return Reflect.set(e, n, i, r);
      var s = Object.hasOwnProperty.call(e, n), o = Reflect.get(e, n, r), l = Reflect.set(e, n, i, r);
      if (!s)
        rh({
          observable: e,
          key: n,
          value: i,
          type: "add"
        });
      else if (i !== o)
        if (n === "length" && Array.isArray(e)) {
          if (!(o < i))
            for (var a = i + 1; a <= o; a++)
              rh({
                observable: e,
                key: "" + (a - 1),
                oldValue: void 0,
                type: "delete"
              });
        } else
          rh({
            observable: e,
            key: n,
            value: i,
            oldValue: o,
            type: "update"
          });
      return l;
    });
  },
  deleteProperty: function(e, n) {
    return s0(function() {
      if (typeof n == "symbol")
        return Reflect.deleteProperty(e, n);
      var i = Object.hasOwnProperty.call(e, n), r = Reflect.get(e, n), s = Reflect.deleteProperty(e, n);
      return i && rh({
        observable: e,
        key: n,
        oldValue: r,
        type: "delete"
      }), s;
    });
  },
  preventExtensions: function(e) {
    throw new Error("Dynamic observable objects cannot be frozen");
  }
};
function Hne(t, e) {
  var n = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, e), i = new tg(t, n);
  return i;
}
function Wne(t, e, n) {
  var i = Mu({
    name: "unnamed",
    fireImmediately: !0
  }, n), r = new tg(function() {
    t(e);
  }, i);
  return e = Ga(e, r), e.bla = 4, i.fireImmediately && r.trigger(), r;
}
var UM = /* @__PURE__ */ function() {
  function t() {
    this._observable = Ga({
      _key: 1
    });
  }
  var e = t.prototype;
  return e.reportObserved = function(i) {
    return Ga(this._observable, i)._key;
  }, e.reportChanged = function() {
    this._observable._key++;
  }, t;
}();
function qne(t, e, n) {
  return new UM();
}
const Jne = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  $reactive: ri,
  $reactiveproxy: kr,
  $skipreactive: o_,
  Atom: UM,
  Observer: s_,
  Reaction: tg,
  autorun: Hne,
  autorunAsync: Wne,
  createAtom: qne,
  hasRunningReaction: LM,
  isActionRunning: NM,
  isReactive: nf,
  isTrackingDisabled: BM,
  markRaw: l_,
  reaction: Fne,
  reactive: Ga,
  runInAction: s0,
  runningReaction: jM,
  untracked: xM,
  untrackedCB: zne
}, Symbol.toStringTag, { value: "Module" })), bs = () => /* @__PURE__ */ new Map(), Wd = (t) => {
  const e = bs();
  return t.forEach((n, i) => {
    e.set(i, n);
  }), e;
}, Cr = (t, e, n) => {
  let i = t.get(e);
  return i === void 0 && t.set(e, i = n()), i;
}, Kne = (t, e) => {
  const n = [];
  for (const [i, r] of t)
    n.push(e(r, i));
  return n;
}, Gne = (t, e) => {
  for (const [n, i] of t)
    if (e(i, n))
      return !0;
  return !1;
}, Ou = () => /* @__PURE__ */ new Set(), gm = (t) => t[t.length - 1], Yne = (t, e) => {
  for (let n = 0; n < e.length; n++)
    t.push(e[n]);
}, HM = Array.from;
class ng {
  constructor() {
    this._observers = bs();
  }
  on(e, n) {
    Cr(this._observers, e, Ou).add(n);
  }
  once(e, n) {
    const i = (...r) => {
      this.off(e, i), n(...r);
    };
    this.on(e, i);
  }
  off(e, n) {
    const i = this._observers.get(e);
    i !== void 0 && (i.delete(n), i.size === 0 && this._observers.delete(e));
  }
  emit(e, n) {
    return HM((this._observers.get(e) || bs()).values()).forEach((i) => i(...n));
  }
  destroy() {
    this._observers = bs();
  }
}
const Ts = Math.floor, Ih = Math.abs, Xne = Math.log10, a_ = (t, e) => t < e ? t : e, Kl = (t, e) => t > e ? t : e, WM = (t) => t !== 0 ? t < 0 : 1 / t < 0, Qne = String.fromCharCode, Zne = (t) => t.toLowerCase(), $ne = /^\s*/g, eie = (t) => t.replace($ne, ""), tie = /([A-Z])/g, m3 = (t, e) => eie(t.replace(tie, (n) => `${e}${Zne(n)}`)), nie = (t) => {
  const e = unescape(encodeURIComponent(t)), n = e.length, i = new Uint8Array(n);
  for (let r = 0; r < n; r++)
    i[r] = e.codePointAt(r);
  return i;
}, Tu = typeof TextEncoder < "u" ? new TextEncoder() : null, iie = (t) => Tu.encode(t), c0 = Tu ? iie : nie;
let Wc = typeof TextDecoder > "u" ? null : new TextDecoder("utf-8", { fatal: !0, ignoreBOM: !0 });
Wc && Wc.decode(new Uint8Array()).length === 1 && (Wc = null);
const b3 = (t) => t === void 0 ? null : t;
class rie {
  constructor() {
    this.map = /* @__PURE__ */ new Map();
  }
  setItem(e, n) {
    this.map.set(e, n);
  }
  getItem(e) {
    return this.map.get(e);
  }
}
let qM = new rie(), JM = !0;
try {
  typeof localStorage < "u" && (qM = localStorage, JM = !1);
} catch {
}
const KM = qM, sie = (t) => JM || addEventListener("storage", t), oie = Object.keys, qd = (t) => oie(t).length, lie = (t, e) => {
  for (const n in t)
    if (!e(t[n], n))
      return !1;
  return !0;
}, GM = (t, e) => Object.prototype.hasOwnProperty.call(t, e), aie = (t, e) => t === e || qd(t) === qd(e) && lie(t, (n, i) => (n !== void 0 || GM(e, i)) && e[i] === n), c_ = (t, e, n = 0) => {
  try {
    for (; n < t.length; n++)
      t[n](...e);
  } finally {
    n < t.length && c_(t, e, n + 1);
  }
}, cie = () => {
}, uie = (t, e) => t === e, qc = (t, e) => {
  if (t == null || e == null)
    return uie(t, e);
  if (t.constructor !== e.constructor)
    return !1;
  if (t === e)
    return !0;
  switch (t.constructor) {
    case ArrayBuffer:
      t = new Uint8Array(t), e = new Uint8Array(e);
    case Uint8Array: {
      if (t.byteLength !== e.byteLength)
        return !1;
      for (let n = 0; n < t.length; n++)
        if (t[n] !== e[n])
          return !1;
      break;
    }
    case Set: {
      if (t.size !== e.size)
        return !1;
      for (const n of t)
        if (!e.has(n))
          return !1;
      break;
    }
    case Map: {
      if (t.size !== e.size)
        return !1;
      for (const n of t.keys())
        if (!e.has(n) || !qc(t.get(n), e.get(n)))
          return !1;
      break;
    }
    case Object:
      if (qd(t) !== qd(e))
        return !1;
      for (const n in t)
        if (!GM(t, n) || !qc(t[n], e[n]))
          return !1;
      break;
    case Array:
      if (t.length !== e.length)
        return !1;
      for (let n = 0; n < t.length; n++)
        if (!qc(t[n], e[n]))
          return !1;
      break;
    default:
      return !1;
  }
  return !0;
}, fie = (t, e) => e.includes(t), Ll = typeof process < "u" && process.release && /node|io\.js/.test(process.release.name), YM = typeof window < "u" && !Ll;
let ts;
const hie = () => {
  if (ts === void 0)
    if (Ll) {
      ts = bs();
      const t = process.argv;
      let e = null;
      for (let n = 0; n < t.length; n++) {
        const i = t[n];
        i[0] === "-" ? (e !== null && ts.set(e, ""), e = i) : e !== null && (ts.set(e, i), e = null);
      }
      e !== null && ts.set(e, "");
    } else
      typeof location == "object" ? (ts = bs(), (location.search || "?").slice(1).split("&").forEach((t) => {
        if (t.length !== 0) {
          const [e, n] = t.split("=");
          ts.set(`--${m3(e, "-")}`, n), ts.set(`-${m3(e, "-")}`, n);
        }
      })) : ts = bs();
  return ts;
}, u0 = (t) => hie().has(t), Jd = (t) => b3(Ll ? process.env[t.toUpperCase()] : KM.getItem(t)), die = (t) => u0("--" + t) || Jd(t) !== null;
die("production");
const _3 = Ll && fie(process.env.FORCE_COLOR, ["true", "1", "2"]), pie = !u0("no-colors") && (!Ll || process.stdout.isTTY || _3) && (!Ll || u0("color") || _3 || Jd("COLORTERM") !== null || (Jd("TERM") || "").includes("color")), y3 = 1, w3 = 2, mm = 4, bm = 8, Ru = 32, Ks = 64, sr = 128, ig = 31, f0 = 63, Cl = 127, gie = 2147483647, XM = Number.MAX_SAFE_INTEGER, mie = Number.isInteger || ((t) => typeof t == "number" && isFinite(t) && Ts(t) === t), tl = (t) => new Error(t), _s = () => {
  throw tl("Method unimplemented");
}, Rs = () => {
  throw tl("Unexpected case");
}, QM = tl("Unexpected end of array"), ZM = tl("Integer out of Range");
class rg {
  constructor(e) {
    this.arr = e, this.pos = 0;
  }
}
const Bs = (t) => new rg(t), bie = (t) => t.pos !== t.arr.length, _ie = (t, e) => {
  const n = h_(t.arr.buffer, t.pos + t.arr.byteOffset, e);
  return t.pos += e, n;
}, ui = (t) => _ie(t, vt(t)), jl = (t) => t.arr[t.pos++], vt = (t) => {
  let e = 0, n = 1;
  const i = t.arr.length;
  for (; t.pos < i; ) {
    const r = t.arr[t.pos++];
    if (e = e + (r & Cl) * n, n *= 128, r < sr)
      return e;
    if (e > XM)
      throw ZM;
  }
  throw QM;
}, u_ = (t) => {
  let e = t.arr[t.pos++], n = e & f0, i = 64;
  const r = (e & Ks) > 0 ? -1 : 1;
  if (!(e & sr))
    return r * n;
  const s = t.arr.length;
  for (; t.pos < s; ) {
    if (e = t.arr[t.pos++], n = n + (e & Cl) * i, i *= 128, e < sr)
      return r * n;
    if (n > XM)
      throw ZM;
  }
  throw QM;
}, yie = (t) => {
  let e = vt(t);
  if (e === 0)
    return "";
  {
    let n = String.fromCodePoint(jl(t));
    if (--e < 100)
      for (; e--; )
        n += String.fromCodePoint(jl(t));
    else
      for (; e > 0; ) {
        const i = e < 1e4 ? e : 1e4, r = t.arr.subarray(t.pos, t.pos + i);
        t.pos += i, n += String.fromCodePoint.apply(null, r), e -= i;
      }
    return decodeURIComponent(escape(n));
  }
}, wie = (t) => Wc.decode(ui(t)), Gs = Wc ? wie : yie, f_ = (t, e) => {
  const n = new DataView(t.arr.buffer, t.arr.byteOffset + t.pos, e);
  return t.pos += e, n;
}, vie = (t) => f_(t, 4).getFloat32(0, !1), kie = (t) => f_(t, 8).getFloat64(0, !1), Cie = (t) => f_(t, 8).getBigInt64(0, !1), Sie = [
  (t) => {
  },
  (t) => null,
  u_,
  vie,
  kie,
  Cie,
  (t) => !1,
  (t) => !0,
  Gs,
  (t) => {
    const e = vt(t), n = {};
    for (let i = 0; i < e; i++) {
      const r = Gs(t);
      n[r] = Ya(t);
    }
    return n;
  },
  (t) => {
    const e = vt(t), n = [];
    for (let i = 0; i < e; i++)
      n.push(Ya(t));
    return n;
  },
  ui
], Ya = (t) => Sie[127 - jl(t)](t);
class v3 extends rg {
  constructor(e, n) {
    super(e), this.reader = n, this.s = null, this.count = 0;
  }
  read() {
    return this.count === 0 && (this.s = this.reader(this), bie(this) ? this.count = vt(this) + 1 : this.count = -1), this.count--, this.s;
  }
}
class Dh extends rg {
  constructor(e) {
    super(e), this.s = 0, this.count = 0;
  }
  read() {
    if (this.count === 0) {
      this.s = u_(this);
      const e = WM(this.s);
      this.count = 1, e && (this.s = -this.s, this.count = vt(this) + 2);
    }
    return this.count--, this.s;
  }
}
class _m extends rg {
  constructor(e) {
    super(e), this.s = 0, this.count = 0, this.diff = 0;
  }
  read() {
    if (this.count === 0) {
      const e = u_(this), n = e & 1;
      this.diff = Ts(e / 2), this.count = 1, n && (this.count = vt(this) + 2);
    }
    return this.s += this.diff, this.count--, this.s;
  }
}
class Eie {
  constructor(e) {
    this.decoder = new Dh(e), this.str = Gs(this.decoder), this.spos = 0;
  }
  read() {
    const e = this.spos + this.decoder.read(), n = this.str.slice(this.spos, e);
    return this.spos = e, n;
  }
}
const $M = (t) => new Uint8Array(t), h_ = (t, e, n) => new Uint8Array(t, e, n), Aie = (t) => new Uint8Array(t), Mie = (t) => {
  let e = "";
  for (let n = 0; n < t.byteLength; n++)
    e += Qne(t[n]);
  return btoa(e);
}, Oie = (t) => Buffer.from(t.buffer, t.byteOffset, t.byteLength).toString("base64"), Tie = (t) => {
  const e = atob(t), n = $M(e.length);
  for (let i = 0; i < e.length; i++)
    n[i] = e.charCodeAt(i);
  return n;
}, Rie = (t) => {
  const e = Buffer.from(t, "base64");
  return new Uint8Array(e.buffer, e.byteOffset, e.byteLength);
}, eO = YM ? Mie : Oie, tO = YM ? Tie : Rie, Pie = (t) => {
  const e = $M(t.byteLength);
  return e.set(t), e;
};
class rf {
  constructor() {
    this.cpos = 0, this.cbuf = new Uint8Array(100), this.bufs = [];
  }
}
const fi = () => new rf(), Iie = (t) => {
  let e = t.cpos;
  for (let n = 0; n < t.bufs.length; n++)
    e += t.bufs[n].length;
  return e;
}, En = (t) => {
  const e = new Uint8Array(Iie(t));
  let n = 0;
  for (let i = 0; i < t.bufs.length; i++) {
    const r = t.bufs[i];
    e.set(r, n), n += r.length;
  }
  return e.set(h_(t.cbuf.buffer, 0, t.cpos), n), e;
}, Die = (t, e) => {
  const n = t.cbuf.length;
  n - t.cpos < e && (t.bufs.push(h_(t.cbuf.buffer, 0, t.cpos)), t.cbuf = new Uint8Array(Kl(n, e) * 2), t.cpos = 0);
}, ci = (t, e) => {
  const n = t.cbuf.length;
  t.cpos === n && (t.bufs.push(t.cbuf), t.cbuf = new Uint8Array(n * 2), t.cpos = 0), t.cbuf[t.cpos++] = e;
}, Pu = ci, st = (t, e) => {
  for (; e > Cl; )
    ci(t, sr | Cl & e), e = Ts(e / 128);
  ci(t, Cl & e);
}, d_ = (t, e) => {
  const n = WM(e);
  for (n && (e = -e), ci(t, (e > f0 ? sr : 0) | (n ? Ks : 0) | f0 & e), e = Ts(e / 64); e > 0; )
    ci(t, (e > Cl ? sr : 0) | Cl & e), e = Ts(e / 128);
}, h0 = new Uint8Array(3e4), Nie = h0.length / 3, Lie = (t, e) => {
  if (e.length < Nie) {
    const n = Tu.encodeInto(e, h0).written || 0;
    st(t, n);
    for (let i = 0; i < n; i++)
      ci(t, h0[i]);
  } else
    In(t, c0(e));
}, jie = (t, e) => {
  const n = unescape(encodeURIComponent(e)), i = n.length;
  st(t, i);
  for (let r = 0; r < i; r++)
    ci(t, n.codePointAt(r));
}, ys = Tu && Tu.encodeInto ? Lie : jie, sg = (t, e) => {
  const n = t.cbuf.length, i = t.cpos, r = a_(n - i, e.length), s = e.length - r;
  t.cbuf.set(e.subarray(0, r), i), t.cpos += r, s > 0 && (t.bufs.push(t.cbuf), t.cbuf = new Uint8Array(Kl(n * 2, s)), t.cbuf.set(e.subarray(r)), t.cpos = s);
}, In = (t, e) => {
  st(t, e.byteLength), sg(t, e);
}, p_ = (t, e) => {
  Die(t, e);
  const n = new DataView(t.cbuf.buffer, t.cpos, e);
  return t.cpos += e, n;
}, Bie = (t, e) => p_(t, 4).setFloat32(0, e, !1), xie = (t, e) => p_(t, 8).setFloat64(0, e, !1), Fie = (t, e) => p_(t, 8).setBigInt64(0, e, !1), k3 = new DataView(new ArrayBuffer(4)), zie = (t) => (k3.setFloat32(0, t), k3.getFloat32(0) === t), Xa = (t, e) => {
  switch (typeof e) {
    case "string":
      ci(t, 119), ys(t, e);
      break;
    case "number":
      mie(e) && Ih(e) <= gie ? (ci(t, 125), d_(t, e)) : zie(e) ? (ci(t, 124), Bie(t, e)) : (ci(t, 123), xie(t, e));
      break;
    case "bigint":
      ci(t, 122), Fie(t, e);
      break;
    case "object":
      if (e === null)
        ci(t, 126);
      else if (e instanceof Array) {
        ci(t, 117), st(t, e.length);
        for (let n = 0; n < e.length; n++)
          Xa(t, e[n]);
      } else if (e instanceof Uint8Array)
        ci(t, 116), In(t, e);
      else {
        ci(t, 118);
        const n = Object.keys(e);
        st(t, n.length);
        for (let i = 0; i < n.length; i++) {
          const r = n[i];
          ys(t, r), Xa(t, e[r]);
        }
      }
      break;
    case "boolean":
      ci(t, e ? 120 : 121);
      break;
    default:
      ci(t, 127);
  }
};
class C3 extends rf {
  constructor(e) {
    super(), this.w = e, this.s = null, this.count = 0;
  }
  write(e) {
    this.s === e ? this.count++ : (this.count > 0 && st(this, this.count - 1), this.count = 1, this.w(this, e), this.s = e);
  }
}
const S3 = (t) => {
  t.count > 0 && (d_(t.encoder, t.count === 1 ? t.s : -t.s), t.count > 1 && st(t.encoder, t.count - 2));
};
class Nh {
  constructor() {
    this.encoder = new rf(), this.s = 0, this.count = 0;
  }
  write(e) {
    this.s === e ? this.count++ : (S3(this), this.count = 1, this.s = e);
  }
  toUint8Array() {
    return S3(this), En(this.encoder);
  }
}
const E3 = (t) => {
  if (t.count > 0) {
    const e = t.diff * 2 + (t.count === 1 ? 0 : 1);
    d_(t.encoder, e), t.count > 1 && st(t.encoder, t.count - 2);
  }
};
class ym {
  constructor() {
    this.encoder = new rf(), this.s = 0, this.count = 0, this.diff = 0;
  }
  write(e) {
    this.diff === e - this.s ? (this.s = e, this.count++) : (E3(this), this.count = 1, this.diff = e - this.s, this.s = e);
  }
  toUint8Array() {
    return E3(this), En(this.encoder);
  }
}
class Vie {
  constructor() {
    this.sarr = [], this.s = "", this.lensE = new Nh();
  }
  write(e) {
    this.s += e, this.s.length > 19 && (this.sarr.push(this.s), this.s = ""), this.lensE.write(e.length);
  }
  toUint8Array() {
    const e = new rf();
    return this.sarr.push(this.s), this.s = "", ys(e, this.sarr.join("")), sg(e, this.lensE.toUint8Array()), En(e);
  }
}
const A3 = typeof crypto > "u" ? null : crypto, Uie = A3 !== null ? (t) => {
  const e = new ArrayBuffer(t), n = new Uint8Array(e);
  return A3.getRandomValues(n), e;
} : (t) => {
  const e = new ArrayBuffer(t), n = new Uint8Array(e);
  for (let i = 0; i < t; i++)
    n[i] = Math.ceil(Math.random() * 4294967295 >>> 0);
  return e;
}, Hie = Math.random, nO = () => new Uint32Array(Uie(4))[0], Wie = [1e7] + -1e3 + -4e3 + -8e3 + -1e11, iO = () => Wie.replace(
  /[018]/g,
  (t) => (t ^ nO() & 15 >> t / 4).toString(16)
), no = Date.now, M3 = (t) => new Promise(t), qie = (t) => Promise.reject(t), g_ = (t) => Promise.resolve(t), lo = Symbol;
class Jie {
  constructor(e, n) {
    this.left = e, this.right = n;
  }
}
const Fs = (t, e) => new Jie(t, e), Gl = typeof document < "u" ? document : {};
typeof DOMParser < "u" && new DOMParser();
const Kie = (t) => Kne(t, (e, n) => `${n}:${e};`).join("");
Gl.ELEMENT_NODE;
Gl.TEXT_NODE;
Gl.CDATA_SECTION_NODE;
Gl.COMMENT_NODE;
Gl.DOCUMENT_NODE;
Gl.DOCUMENT_TYPE_NODE;
Gl.DOCUMENT_FRAGMENT_NODE;
const ir = lo(), Wo = lo(), m_ = lo(), og = lo(), b_ = lo(), __ = lo(), y_ = lo(), lg = lo(), sf = lo(), Gie = {
  [ir]: Fs("font-weight", "bold"),
  [Wo]: Fs("font-weight", "normal"),
  [m_]: Fs("color", "blue"),
  [b_]: Fs("color", "green"),
  [og]: Fs("color", "grey"),
  [__]: Fs("color", "red"),
  [y_]: Fs("color", "purple"),
  [lg]: Fs("color", "orange"),
  [sf]: Fs("color", "black")
}, rO = {
  [ir]: "\x1B[1m",
  [Wo]: "\x1B[2m",
  [m_]: "\x1B[34m",
  [b_]: "\x1B[32m",
  [og]: "\x1B[37m",
  [__]: "\x1B[31m",
  [y_]: "\x1B[35m",
  [lg]: "\x1B[38;5;208m",
  [sf]: "\x1B[0m"
}, Yie = (t) => {
  const e = [], n = [], i = bs();
  let r = [], s = 0;
  for (; s < t.length; s++) {
    const o = t[s], l = Gie[o];
    if (l !== void 0)
      i.set(l.left, l.right);
    else if (o.constructor === String || o.constructor === Number) {
      const a = Kie(i);
      s > 0 || a.length > 0 ? (e.push("%c" + o), n.push(a)) : e.push(o);
    } else
      break;
  }
  for (s > 0 && (r = n, r.unshift(e.join(""))); s < t.length; s++) {
    const o = t[s];
    o instanceof Symbol || r.push(o);
  }
  return r;
}, Xie = (t) => {
  const e = [], n = [];
  let i = 0;
  for (; i < t.length; i++) {
    const r = t[i];
    if (rO[r] === void 0)
      if (r.constructor === String || r.constructor === Number)
        e.push(r);
      else
        break;
  }
  for (i > 0 && n.push(e.join("")); i < t.length; i++) {
    const r = t[i];
    r instanceof Symbol || (r.constructor === Object ? n.push(JSON.stringify(r)) : n.push(r));
  }
  return n;
}, Qie = (t) => {
  const e = [], n = [];
  let i = 0;
  for (; i < t.length; i++) {
    const r = t[i], s = rO[r];
    if (s !== void 0)
      e.push(s);
    else if (r.constructor === String || r.constructor === Number)
      e.push(r);
    else
      break;
  }
  for (i > 0 && (e.push("\x1B[0m"), n.push(e.join(""))); i < t.length; i++) {
    const r = t[i];
    r instanceof Symbol || n.push(r);
  }
  return n;
}, Zie = pie ? Ll ? Qie : Yie : Xie, sO = (...t) => {
  console.log(...Zie(t)), $ie.forEach((e) => e.print(t));
}, $ie = /* @__PURE__ */ new Set(), O3 = [b_, y_, lg, m_];
let wm = 0, T3 = no();
const ere = (t) => {
  const e = O3[wm], n = Jd("log"), i = n !== null && (n === "*" || n === "true" || new RegExp(n, "gi").test(t));
  return wm = (wm + 1) % O3.length, t += ": ", i ? (...r) => {
    const s = no(), o = s - T3;
    T3 = s, sO(
      e,
      t,
      sf,
      ...r.map(
        (l) => typeof l == "string" || typeof l == "symbol" ? l : JSON.stringify(l)
      ),
      e,
      " +" + o + "ms"
    );
  } : cie;
}, oO = (t) => ({
  [Symbol.iterator]() {
    return this;
  },
  next: t
}), tre = (t, e) => oO(() => {
  let n;
  do
    n = t.next();
  while (!n.done && !e(n.value));
  return n;
}), vm = (t, e) => oO(() => {
  const { done: n, value: i } = t.next();
  return { done: n, value: n ? void 0 : e(i) };
});
class w_ {
  constructor(e, n) {
    this.clock = e, this.len = n;
  }
}
class of {
  constructor() {
    this.clients = /* @__PURE__ */ new Map();
  }
}
const d0 = (t, e, n) => e.clients.forEach((i, r) => {
  const s = t.doc.store.clients.get(r);
  for (let o = 0; o < i.length; o++) {
    const l = i[o];
    wO(t, s, l.clock, l.len, n);
  }
}), nre = (t, e) => {
  let n = 0, i = t.length - 1;
  for (; n <= i; ) {
    const r = Ts((n + i) / 2), s = t[r], o = s.clock;
    if (o <= e) {
      if (e < o + s.len)
        return r;
      n = r + 1;
    } else
      i = r - 1;
  }
  return null;
}, lO = (t, e) => {
  const n = t.clients.get(e.client);
  return n !== void 0 && nre(n, e.clock) !== null;
}, v_ = (t) => {
  t.clients.forEach((e) => {
    e.sort((r, s) => r.clock - s.clock);
    let n, i;
    for (n = 1, i = 1; n < e.length; n++) {
      const r = e[i - 1], s = e[n];
      r.clock + r.len >= s.clock ? r.len = Kl(r.len, s.clock + s.len - r.clock) : (i < n && (e[i] = s), i++);
    }
    e.length = i;
  });
}, ire = (t) => {
  const e = new of();
  for (let n = 0; n < t.length; n++)
    t[n].clients.forEach((i, r) => {
      if (!e.clients.has(r)) {
        const s = i.slice();
        for (let o = n + 1; o < t.length; o++)
          Yne(s, t[o].clients.get(r) || []);
        e.clients.set(r, s);
      }
    });
  return v_(e), e;
}, Kd = (t, e, n, i) => {
  Cr(t.clients, e, () => []).push(new w_(n, i));
}, aO = () => new of(), rre = (t) => {
  const e = aO();
  return t.clients.forEach((n, i) => {
    const r = [];
    for (let s = 0; s < n.length; s++) {
      const o = n[s];
      if (o.deleted) {
        const l = o.id.clock;
        let a = o.length;
        if (s + 1 < n.length)
          for (let c = n[s + 1]; s + 1 < n.length && c.deleted; c = n[++s + 1])
            a += c.length;
        r.push(new w_(l, a));
      }
    }
    r.length > 0 && e.clients.set(i, r);
  }), e;
}, fc = (t, e) => {
  st(t.restEncoder, e.clients.size), e.clients.forEach((n, i) => {
    t.resetDsCurVal(), st(t.restEncoder, i);
    const r = n.length;
    st(t.restEncoder, r);
    for (let s = 0; s < r; s++) {
      const o = n[s];
      t.writeDsClock(o.clock), t.writeDsLen(o.len);
    }
  });
}, k_ = (t) => {
  const e = new of(), n = vt(t.restDecoder);
  for (let i = 0; i < n; i++) {
    t.resetDsCurVal();
    const r = vt(t.restDecoder), s = vt(t.restDecoder);
    if (s > 0) {
      const o = Cr(e.clients, r, () => []);
      for (let l = 0; l < s; l++)
        o.push(new w_(t.readDsClock(), t.readDsLen()));
    }
  }
  return e;
}, R3 = (t, e, n) => {
  const i = new of(), r = vt(t.restDecoder);
  for (let s = 0; s < r; s++) {
    t.resetDsCurVal();
    const o = vt(t.restDecoder), l = vt(t.restDecoder), a = n.clients.get(o) || [], c = pi(n, o);
    for (let u = 0; u < l; u++) {
      const f = t.readDsClock(), h = f + t.readDsLen();
      if (f < c) {
        c < h && Kd(i, o, c, h - c);
        let d = Hr(a, f), p = a[d];
        for (!p.deleted && p.id.clock < f && (a.splice(d + 1, 0, Zd(e, p, f - p.id.clock)), d++); d < a.length && (p = a[d++], p.id.clock < h); )
          p.deleted || (h < p.id.clock + p.length && a.splice(d, 0, Zd(e, p, h - p.id.clock)), p.delete(e));
      } else
        Kd(i, o, f, h - f);
    }
  }
  if (i.clients.size > 0) {
    const s = new Bl();
    return st(s.restEncoder, 0), fc(s, i), s.toUint8Array();
  }
  return null;
}, cO = nO;
class nl extends ng {
  constructor({ guid: e = iO(), collectionid: n = null, gc: i = !0, gcFilter: r = () => !0, meta: s = null, autoLoad: o = !1, shouldLoad: l = !0 } = {}) {
    super(), this.gc = i, this.gcFilter = r, this.clientID = cO(), this.guid = e, this.collectionid = n, this.share = /* @__PURE__ */ new Map(), this.store = new _O(), this._transaction = null, this._transactionCleanups = [], this.subdocs = /* @__PURE__ */ new Set(), this._item = null, this.shouldLoad = l, this.autoLoad = o, this.meta = s, this.isLoaded = !1, this.isSynced = !1, this.whenLoaded = M3((c) => {
      this.on("load", () => {
        this.isLoaded = !0, c(this);
      });
    });
    const a = () => M3((c) => {
      const u = (f) => {
        (f === void 0 || f === !0) && (this.off("sync", u), c());
      };
      this.on("sync", u);
    });
    this.on("sync", (c) => {
      c === !1 && this.isSynced && (this.whenSynced = a()), this.isSynced = c === void 0 || c === !0, this.isLoaded || this.emit("load", []);
    }), this.whenSynced = a();
  }
  load() {
    const e = this._item;
    e !== null && !this.shouldLoad && on(e.parent.doc, (n) => {
      n.subdocsLoaded.add(this);
    }, null, !0), this.shouldLoad = !0;
  }
  getSubdocs() {
    return this.subdocs;
  }
  getSubdocGuids() {
    return new Set(Array.from(this.subdocs).map((e) => e.guid));
  }
  transact(e, n = null) {
    on(this, e, n);
  }
  get(e, n = Ln) {
    const i = Cr(this.share, e, () => {
      const s = new n();
      return s._integrate(this, null), s;
    }), r = i.constructor;
    if (n !== Ln && r !== n)
      if (r === Ln) {
        const s = new n();
        s._map = i._map, i._map.forEach((o) => {
          for (; o !== null; o = o.left)
            o.parent = s;
        }), s._start = i._start;
        for (let o = s._start; o !== null; o = o.right)
          o.parent = s;
        return s._length = i._length, this.share.set(e, s), s._integrate(this, null), s;
      } else
        throw new Error(`Type with the name ${e} has already been defined with a different constructor`);
    return i;
  }
  getArray(e = "") {
    return this.get(e, ws);
  }
  getText(e = "") {
    return this.get(e, io);
  }
  getMap(e = "") {
    return this.get(e, Ps);
  }
  getXmlFragment(e = "") {
    return this.get(e, Is);
  }
  toJSON() {
    const e = {};
    return this.share.forEach((n, i) => {
      e[i] = n.toJSON();
    }), e;
  }
  destroy() {
    HM(this.subdocs).forEach((n) => n.destroy());
    const e = this._item;
    if (e !== null) {
      this._item = null;
      const n = e.content;
      n.doc = new nl({ guid: this.guid, ...n.opts, shouldLoad: !1 }), n.doc._item = e, on(e.parent.doc, (i) => {
        const r = n.doc;
        e.deleted || i.subdocsAdded.add(r), i.subdocsRemoved.add(this);
      }, null, !0);
    }
    this.emit("destroyed", [!0]), this.emit("destroy", [this]), super.destroy();
  }
  on(e, n) {
    super.on(e, n);
  }
  off(e, n) {
    super.off(e, n);
  }
}
class uO {
  constructor(e) {
    this.restDecoder = e;
  }
  resetDsCurVal() {
  }
  readDsClock() {
    return vt(this.restDecoder);
  }
  readDsLen() {
    return vt(this.restDecoder);
  }
}
class fO extends uO {
  readLeftID() {
    return It(vt(this.restDecoder), vt(this.restDecoder));
  }
  readRightID() {
    return It(vt(this.restDecoder), vt(this.restDecoder));
  }
  readClient() {
    return vt(this.restDecoder);
  }
  readInfo() {
    return jl(this.restDecoder);
  }
  readString() {
    return Gs(this.restDecoder);
  }
  readParentInfo() {
    return vt(this.restDecoder) === 1;
  }
  readTypeRef() {
    return vt(this.restDecoder);
  }
  readLen() {
    return vt(this.restDecoder);
  }
  readAny() {
    return Ya(this.restDecoder);
  }
  readBuf() {
    return Pie(ui(this.restDecoder));
  }
  readJSON() {
    return JSON.parse(Gs(this.restDecoder));
  }
  readKey() {
    return Gs(this.restDecoder);
  }
}
class sre {
  constructor(e) {
    this.dsCurrVal = 0, this.restDecoder = e;
  }
  resetDsCurVal() {
    this.dsCurrVal = 0;
  }
  readDsClock() {
    return this.dsCurrVal += vt(this.restDecoder), this.dsCurrVal;
  }
  readDsLen() {
    const e = vt(this.restDecoder) + 1;
    return this.dsCurrVal += e, e;
  }
}
class Qa extends sre {
  constructor(e) {
    super(e), this.keys = [], vt(e), this.keyClockDecoder = new _m(ui(e)), this.clientDecoder = new Dh(ui(e)), this.leftClockDecoder = new _m(ui(e)), this.rightClockDecoder = new _m(ui(e)), this.infoDecoder = new v3(ui(e), jl), this.stringDecoder = new Eie(ui(e)), this.parentInfoDecoder = new v3(ui(e), jl), this.typeRefDecoder = new Dh(ui(e)), this.lenDecoder = new Dh(ui(e));
  }
  readLeftID() {
    return new ka(this.clientDecoder.read(), this.leftClockDecoder.read());
  }
  readRightID() {
    return new ka(this.clientDecoder.read(), this.rightClockDecoder.read());
  }
  readClient() {
    return this.clientDecoder.read();
  }
  readInfo() {
    return this.infoDecoder.read();
  }
  readString() {
    return this.stringDecoder.read();
  }
  readParentInfo() {
    return this.parentInfoDecoder.read() === 1;
  }
  readTypeRef() {
    return this.typeRefDecoder.read();
  }
  readLen() {
    return this.lenDecoder.read();
  }
  readAny() {
    return Ya(this.restDecoder);
  }
  readBuf() {
    return ui(this.restDecoder);
  }
  readJSON() {
    return Ya(this.restDecoder);
  }
  readKey() {
    const e = this.keyClockDecoder.read();
    if (e < this.keys.length)
      return this.keys[e];
    {
      const n = this.stringDecoder.read();
      return this.keys.push(n), n;
    }
  }
}
class hO {
  constructor() {
    this.restEncoder = fi();
  }
  toUint8Array() {
    return En(this.restEncoder);
  }
  resetDsCurVal() {
  }
  writeDsClock(e) {
    st(this.restEncoder, e);
  }
  writeDsLen(e) {
    st(this.restEncoder, e);
  }
}
class lf extends hO {
  writeLeftID(e) {
    st(this.restEncoder, e.client), st(this.restEncoder, e.clock);
  }
  writeRightID(e) {
    st(this.restEncoder, e.client), st(this.restEncoder, e.clock);
  }
  writeClient(e) {
    st(this.restEncoder, e);
  }
  writeInfo(e) {
    Pu(this.restEncoder, e);
  }
  writeString(e) {
    ys(this.restEncoder, e);
  }
  writeParentInfo(e) {
    st(this.restEncoder, e ? 1 : 0);
  }
  writeTypeRef(e) {
    st(this.restEncoder, e);
  }
  writeLen(e) {
    st(this.restEncoder, e);
  }
  writeAny(e) {
    Xa(this.restEncoder, e);
  }
  writeBuf(e) {
    In(this.restEncoder, e);
  }
  writeJSON(e) {
    ys(this.restEncoder, JSON.stringify(e));
  }
  writeKey(e) {
    ys(this.restEncoder, e);
  }
}
class dO {
  constructor() {
    this.restEncoder = fi(), this.dsCurrVal = 0;
  }
  toUint8Array() {
    return En(this.restEncoder);
  }
  resetDsCurVal() {
    this.dsCurrVal = 0;
  }
  writeDsClock(e) {
    const n = e - this.dsCurrVal;
    this.dsCurrVal = e, st(this.restEncoder, n);
  }
  writeDsLen(e) {
    e === 0 && Rs(), st(this.restEncoder, e - 1), this.dsCurrVal += e;
  }
}
class Bl extends dO {
  constructor() {
    super(), this.keyMap = /* @__PURE__ */ new Map(), this.keyClock = 0, this.keyClockEncoder = new ym(), this.clientEncoder = new Nh(), this.leftClockEncoder = new ym(), this.rightClockEncoder = new ym(), this.infoEncoder = new C3(Pu), this.stringEncoder = new Vie(), this.parentInfoEncoder = new C3(Pu), this.typeRefEncoder = new Nh(), this.lenEncoder = new Nh();
  }
  toUint8Array() {
    const e = fi();
    return st(e, 0), In(e, this.keyClockEncoder.toUint8Array()), In(e, this.clientEncoder.toUint8Array()), In(e, this.leftClockEncoder.toUint8Array()), In(e, this.rightClockEncoder.toUint8Array()), In(e, En(this.infoEncoder)), In(e, this.stringEncoder.toUint8Array()), In(e, En(this.parentInfoEncoder)), In(e, this.typeRefEncoder.toUint8Array()), In(e, this.lenEncoder.toUint8Array()), sg(e, En(this.restEncoder)), En(e);
  }
  writeLeftID(e) {
    this.clientEncoder.write(e.client), this.leftClockEncoder.write(e.clock);
  }
  writeRightID(e) {
    this.clientEncoder.write(e.client), this.rightClockEncoder.write(e.clock);
  }
  writeClient(e) {
    this.clientEncoder.write(e);
  }
  writeInfo(e) {
    this.infoEncoder.write(e);
  }
  writeString(e) {
    this.stringEncoder.write(e);
  }
  writeParentInfo(e) {
    this.parentInfoEncoder.write(e ? 1 : 0);
  }
  writeTypeRef(e) {
    this.typeRefEncoder.write(e);
  }
  writeLen(e) {
    this.lenEncoder.write(e);
  }
  writeAny(e) {
    Xa(this.restEncoder, e);
  }
  writeBuf(e) {
    In(this.restEncoder, e);
  }
  writeJSON(e) {
    Xa(this.restEncoder, e);
  }
  writeKey(e) {
    const n = this.keyMap.get(e);
    n === void 0 ? (this.keyClockEncoder.write(this.keyClock++), this.stringEncoder.write(e)) : this.keyClockEncoder.write(n);
  }
}
const ore = (t, e, n, i) => {
  i = Kl(i, e[0].id.clock);
  const r = Hr(e, i);
  st(t.restEncoder, e.length - r), t.writeClient(n), st(t.restEncoder, i);
  const s = e[r];
  s.write(t, i - s.id.clock);
  for (let o = r + 1; o < e.length; o++)
    e[o].write(t, 0);
}, C_ = (t, e, n) => {
  const i = /* @__PURE__ */ new Map();
  n.forEach((r, s) => {
    pi(e, s) > r && i.set(s, r);
  }), ag(e).forEach((r, s) => {
    n.has(s) || i.set(s, 0);
  }), st(t.restEncoder, i.size), Array.from(i.entries()).sort((r, s) => s[0] - r[0]).forEach(([r, s]) => {
    ore(t, e.clients.get(r), r, s);
  });
}, lre = (t, e) => {
  const n = bs(), i = vt(t.restDecoder);
  for (let r = 0; r < i; r++) {
    const s = vt(t.restDecoder), o = new Array(s), l = t.readClient();
    let a = vt(t.restDecoder);
    n.set(l, { i: 0, refs: o });
    for (let c = 0; c < s; c++) {
      const u = t.readInfo();
      switch (ig & u) {
        case 0: {
          const f = t.readLen();
          o[c] = new tr(It(l, a), f), a += f;
          break;
        }
        case 10: {
          const f = vt(t.restDecoder);
          o[c] = new fr(It(l, a), f), a += f;
          break;
        }
        default: {
          const f = (u & (Ks | sr)) === 0, h = new ni(
            It(l, a),
            null,
            (u & sr) === sr ? t.readLeftID() : null,
            null,
            (u & Ks) === Ks ? t.readRightID() : null,
            f ? t.readParentInfo() ? e.get(t.readString()) : t.readLeftID() : null,
            f && (u & Ru) === Ru ? t.readString() : null,
            FO(t, u)
          );
          o[c] = h, a += h.length;
        }
      }
    }
  }
  return n;
}, are = (t, e, n) => {
  const i = [];
  let r = Array.from(n.keys()).sort((d, p) => d - p);
  if (r.length === 0)
    return null;
  const s = () => {
    if (r.length === 0)
      return null;
    let d = n.get(r[r.length - 1]);
    for (; d.refs.length === d.i; )
      if (r.pop(), r.length > 0)
        d = n.get(r[r.length - 1]);
      else
        return null;
    return d;
  };
  let o = s();
  if (o === null && i.length === 0)
    return null;
  const l = new _O(), a = /* @__PURE__ */ new Map(), c = (d, p) => {
    const g = a.get(d);
    (g == null || g > p) && a.set(d, p);
  };
  let u = o.refs[o.i++];
  const f = /* @__PURE__ */ new Map(), h = () => {
    for (const d of i) {
      const p = d.id.client, g = n.get(p);
      g ? (g.i--, l.clients.set(p, g.refs.slice(g.i)), n.delete(p), g.i = 0, g.refs = []) : l.clients.set(p, [d]), r = r.filter((m) => m !== p);
    }
    i.length = 0;
  };
  for (; ; ) {
    if (u.constructor !== fr) {
      const p = Cr(f, u.id.client, () => pi(e, u.id.client)) - u.id.clock;
      if (p < 0)
        i.push(u), c(u.id.client, u.id.clock - 1), h();
      else {
        const g = u.getMissing(t, e);
        if (g !== null) {
          i.push(u);
          const m = n.get(g) || { refs: [], i: 0 };
          if (m.refs.length === m.i)
            c(g, pi(e, g)), h();
          else {
            u = m.refs[m.i++];
            continue;
          }
        } else
          (p === 0 || p < u.length) && (u.integrate(t, p), f.set(u.id.client, u.id.clock + u.length));
      }
    }
    if (i.length > 0)
      u = i.pop();
    else if (o !== null && o.i < o.refs.length)
      u = o.refs[o.i++];
    else {
      if (o = s(), o === null)
        break;
      u = o.refs[o.i++];
    }
  }
  if (l.clients.size > 0) {
    const d = new Bl();
    return C_(d, l, /* @__PURE__ */ new Map()), st(d.restEncoder, 0), { missing: a, update: d.toUint8Array() };
  }
  return null;
}, cre = (t, e) => C_(t, e.doc.store, e.beforeState), ure = (t, e, n, i = new Qa(t)) => on(e, (r) => {
  r.local = !1;
  let s = !1;
  const o = r.doc, l = o.store, a = lre(i, o), c = are(r, l, a), u = l.pendingStructs;
  if (u) {
    for (const [h, d] of u.missing)
      if (d < pi(l, h)) {
        s = !0;
        break;
      }
    if (c) {
      for (const [h, d] of c.missing) {
        const p = u.missing.get(h);
        (p == null || p > d) && u.missing.set(h, d);
      }
      u.update = Gd([u.update, c.update]);
    }
  } else
    l.pendingStructs = c;
  const f = R3(i, r, l);
  if (l.pendingDs) {
    const h = new Qa(Bs(l.pendingDs));
    vt(h.restDecoder);
    const d = R3(h, r, l);
    f && d ? l.pendingDs = Gd([f, d]) : l.pendingDs = f || d;
  } else
    l.pendingDs = f;
  if (s) {
    const h = l.pendingStructs.update;
    l.pendingStructs = null, pO(r.doc, h);
  }
}, n, !1), pO = (t, e, n, i = Qa) => {
  const r = Bs(e);
  ure(r, t, n, new i(r));
}, fre = (t, e, n) => pO(t, e, n, fO), hre = (t, e, n = /* @__PURE__ */ new Map()) => {
  C_(t, e.store, n), fc(t, rre(e.store));
}, dre = (t, e = new Uint8Array([0]), n = new Bl()) => {
  const i = gO(e);
  hre(n, t, i);
  const r = [n.toUint8Array()];
  if (t.store.pendingDs && r.push(t.store.pendingDs), t.store.pendingStructs && r.push(Pre(t.store.pendingStructs.update, e)), r.length > 1) {
    if (n.constructor === lf)
      return Tre(r.map((s, o) => o === 0 ? s : Dre(s)));
    if (n.constructor === Bl)
      return Gd(r);
  }
  return r[0];
}, pre = (t, e) => dre(t, e, new lf()), gre = (t) => {
  const e = /* @__PURE__ */ new Map(), n = vt(t.restDecoder);
  for (let i = 0; i < n; i++) {
    const r = vt(t.restDecoder), s = vt(t.restDecoder);
    e.set(r, s);
  }
  return e;
}, gO = (t) => gre(new uO(Bs(t))), mO = (t, e) => (st(t.restEncoder, e.size), Array.from(e.entries()).sort((n, i) => i[0] - n[0]).forEach(([n, i]) => {
  st(t.restEncoder, n), st(t.restEncoder, i);
}), t), mre = (t, e) => mO(t, ag(e.store)), bre = (t, e = new dO()) => (t instanceof Map ? mO(e, t) : mre(e, t), e.toUint8Array()), _re = (t) => bre(t, new hO());
class yre {
  constructor() {
    this.l = [];
  }
}
const P3 = () => new yre(), I3 = (t, e) => t.l.push(e), D3 = (t, e) => {
  const n = t.l, i = n.length;
  t.l = n.filter((r) => e !== r), i === t.l.length && console.error("[yjs] Tried to remove event handler that doesn't exist.");
}, bO = (t, e, n) => c_(t.l, [e, n]);
class ka {
  constructor(e, n) {
    this.client = e, this.clock = n;
  }
}
const oh = (t, e) => t === e || t !== null && e !== null && t.client === e.client && t.clock === e.clock, It = (t, e) => new ka(t, e), wre = (t) => {
  for (const [e, n] of t.doc.share.entries())
    if (n === t)
      return e;
  throw Rs();
};
class vre {
  constructor(e, n) {
    this.ds = e, this.sv = n;
  }
}
const kre = (t, e) => new vre(t, e);
kre(aO(), /* @__PURE__ */ new Map());
const Cc = (t, e) => e === void 0 ? !t.deleted : e.sv.has(t.id.client) && (e.sv.get(t.id.client) || 0) > t.id.clock && !lO(e.ds, t.id), p0 = (t, e) => {
  const n = Cr(t.meta, p0, Ou), i = t.doc.store;
  n.has(e) || (e.sv.forEach((r, s) => {
    r < pi(i, s) && qo(t, It(s, r));
  }), d0(t, e.ds, (r) => {
  }), n.add(e));
};
class _O {
  constructor() {
    this.clients = /* @__PURE__ */ new Map(), this.pendingStructs = null, this.pendingDs = null;
  }
}
const ag = (t) => {
  const e = /* @__PURE__ */ new Map();
  return t.clients.forEach((n, i) => {
    const r = n[n.length - 1];
    e.set(i, r.id.clock + r.length);
  }), e;
}, pi = (t, e) => {
  const n = t.clients.get(e);
  if (n === void 0)
    return 0;
  const i = n[n.length - 1];
  return i.id.clock + i.length;
}, yO = (t, e) => {
  let n = t.clients.get(e.id.client);
  if (n === void 0)
    n = [], t.clients.set(e.id.client, n);
  else {
    const i = n[n.length - 1];
    if (i.id.clock + i.length !== e.id.clock)
      throw Rs();
  }
  n.push(e);
}, Hr = (t, e) => {
  let n = 0, i = t.length - 1, r = t[i], s = r.id.clock;
  if (s === e)
    return i;
  let o = Ts(e / (s + r.length - 1) * i);
  for (; n <= i; ) {
    if (r = t[o], s = r.id.clock, s <= e) {
      if (e < s + r.length)
        return o;
      n = o + 1;
    } else
      i = o - 1;
    o = Ts((n + i) / 2);
  }
  throw Rs();
}, Cre = (t, e) => {
  const n = t.clients.get(e.client);
  return n[Hr(n, e.clock)];
}, km = Cre, g0 = (t, e, n) => {
  const i = Hr(e, n), r = e[i];
  return r.id.clock < n && r instanceof ni ? (e.splice(i + 1, 0, Zd(t, r, n - r.id.clock)), i + 1) : i;
}, qo = (t, e) => {
  const n = t.doc.store.clients.get(e.client);
  return n[g0(t, n, e.clock)];
}, N3 = (t, e, n) => {
  const i = e.clients.get(n.client), r = Hr(i, n.clock), s = i[r];
  return n.clock !== s.id.clock + s.length - 1 && s.constructor !== tr && i.splice(r + 1, 0, Zd(t, s, n.clock - s.id.clock + 1)), s;
}, Sre = (t, e, n) => {
  const i = t.clients.get(e.id.client);
  i[Hr(i, e.id.clock)] = n;
}, wO = (t, e, n, i, r) => {
  if (i === 0)
    return;
  const s = n + i;
  let o = g0(t, e, n), l;
  do
    l = e[o++], s < l.id.clock + l.length && g0(t, e, s), r(l);
  while (o < e.length && e[o].id.clock < s);
};
class Ere {
  constructor(e, n, i) {
    this.doc = e, this.deleteSet = new of(), this.beforeState = ag(e.store), this.afterState = /* @__PURE__ */ new Map(), this.changed = /* @__PURE__ */ new Map(), this.changedParentTypes = /* @__PURE__ */ new Map(), this._mergeStructs = [], this.origin = n, this.meta = /* @__PURE__ */ new Map(), this.local = i, this.subdocsAdded = /* @__PURE__ */ new Set(), this.subdocsRemoved = /* @__PURE__ */ new Set(), this.subdocsLoaded = /* @__PURE__ */ new Set();
  }
}
const L3 = (t, e) => e.deleteSet.clients.size === 0 && !Gne(e.afterState, (n, i) => e.beforeState.get(i) !== n) ? !1 : (v_(e.deleteSet), cre(t, e), fc(t, e.deleteSet), !0), j3 = (t, e, n) => {
  const i = e._item;
  (i === null || i.id.clock < (t.beforeState.get(i.id.client) || 0) && !i.deleted) && Cr(t.changed, e, Ou).add(n);
}, Lh = (t, e) => {
  const n = t[e - 1], i = t[e];
  n.deleted === i.deleted && n.constructor === i.constructor && n.mergeWith(i) && (t.splice(e, 1), i instanceof ni && i.parentSub !== null && i.parent._map.get(i.parentSub) === i && i.parent._map.set(i.parentSub, n));
}, Are = (t, e, n) => {
  for (const [i, r] of t.clients.entries()) {
    const s = e.clients.get(i);
    for (let o = r.length - 1; o >= 0; o--) {
      const l = r[o], a = l.clock + l.len;
      for (let c = Hr(s, l.clock), u = s[c]; c < s.length && u.id.clock < a; u = s[++c]) {
        const f = s[c];
        if (l.clock + l.len <= f.id.clock)
          break;
        f instanceof ni && f.deleted && !f.keep && n(f) && f.gc(e, !1);
      }
    }
  }
}, Mre = (t, e) => {
  t.clients.forEach((n, i) => {
    const r = e.clients.get(i);
    for (let s = n.length - 1; s >= 0; s--) {
      const o = n[s], l = a_(r.length - 1, 1 + Hr(r, o.clock + o.len - 1));
      for (let a = l, c = r[a]; a > 0 && c.id.clock >= o.clock; c = r[--a])
        Lh(r, a);
    }
  });
}, vO = (t, e) => {
  if (e < t.length) {
    const n = t[e], i = n.doc, r = i.store, s = n.deleteSet, o = n._mergeStructs;
    try {
      v_(s), n.afterState = ag(n.doc.store), i.emit("beforeObserverCalls", [n, i]);
      const l = [];
      n.changed.forEach(
        (a, c) => l.push(() => {
          (c._item === null || !c._item.deleted) && c._callObserver(n, a);
        })
      ), l.push(() => {
        n.changedParentTypes.forEach(
          (a, c) => l.push(() => {
            (c._item === null || !c._item.deleted) && (a = a.filter(
              (u) => u.target._item === null || !u.target._item.deleted
            ), a.forEach((u) => {
              u.currentTarget = c;
            }), a.sort((u, f) => u.path.length - f.path.length), bO(c._dEH, a, n));
          })
        ), l.push(() => i.emit("afterTransaction", [n, i]));
      }), c_(l, []);
    } finally {
      i.gc && Are(s, r, i.gcFilter), Mre(s, r), n.afterState.forEach((u, f) => {
        const h = n.beforeState.get(f) || 0;
        if (h !== u) {
          const d = r.clients.get(f), p = Kl(Hr(d, h), 1);
          for (let g = d.length - 1; g >= p; g--)
            Lh(d, g);
        }
      });
      for (let u = 0; u < o.length; u++) {
        const { client: f, clock: h } = o[u].id, d = r.clients.get(f), p = Hr(d, h);
        p + 1 < d.length && Lh(d, p + 1), p > 0 && Lh(d, p);
      }
      if (!n.local && n.afterState.get(i.clientID) !== n.beforeState.get(i.clientID) && (sO(lg, ir, "[yjs] ", Wo, __, "Changed the client-id because another client seems to be using it."), i.clientID = cO()), i.emit("afterTransactionCleanup", [n, i]), i._observers.has("update")) {
        const u = new lf();
        L3(u, n) && i.emit("update", [u.toUint8Array(), n.origin, i, n]);
      }
      if (i._observers.has("updateV2")) {
        const u = new Bl();
        L3(u, n) && i.emit("updateV2", [u.toUint8Array(), n.origin, i, n]);
      }
      const { subdocsAdded: l, subdocsLoaded: a, subdocsRemoved: c } = n;
      (l.size > 0 || c.size > 0 || a.size > 0) && (l.forEach((u) => {
        u.clientID = i.clientID, u.collectionid == null && (u.collectionid = i.collectionid), i.subdocs.add(u);
      }), c.forEach((u) => i.subdocs.delete(u)), i.emit("subdocs", [{ loaded: a, added: l, removed: c }, i, n]), c.forEach((u) => u.destroy())), t.length <= e + 1 ? (i._transactionCleanups = [], i.emit("afterAllTransactions", [i, t])) : vO(t, e + 1);
    }
  }
}, on = (t, e, n = null, i = !0) => {
  const r = t._transactionCleanups;
  let s = !1;
  t._transaction === null && (s = !0, t._transaction = new Ere(t, n, i), r.push(t._transaction), r.length === 1 && t.emit("beforeAllTransactions", [t]), t.emit("beforeTransaction", [t._transaction, t]));
  try {
    e(t._transaction);
  } finally {
    if (s) {
      const o = t._transaction === r[0];
      t._transaction = null, o && vO(r, 0);
    }
  }
};
function* Ore(t) {
  const e = vt(t.restDecoder);
  for (let n = 0; n < e; n++) {
    const i = vt(t.restDecoder), r = t.readClient();
    let s = vt(t.restDecoder);
    for (let o = 0; o < i; o++) {
      const l = t.readInfo();
      if (l === 10) {
        const a = vt(t.restDecoder);
        yield new fr(It(r, s), a), s += a;
      } else if (ig & l) {
        const a = (l & (Ks | sr)) === 0, c = new ni(
          It(r, s),
          null,
          (l & sr) === sr ? t.readLeftID() : null,
          null,
          (l & Ks) === Ks ? t.readRightID() : null,
          a ? t.readParentInfo() ? t.readString() : t.readLeftID() : null,
          a && (l & Ru) === Ru ? t.readString() : null,
          FO(t, l)
        );
        yield c, s += c.length;
      } else {
        const a = t.readLen();
        yield new tr(It(r, s), a), s += a;
      }
    }
  }
}
class S_ {
  constructor(e, n) {
    this.gen = Ore(e), this.curr = null, this.done = !1, this.filterSkips = n, this.next();
  }
  next() {
    do
      this.curr = this.gen.next().value || null;
    while (this.filterSkips && this.curr !== null && this.curr.constructor === fr);
    return this.curr;
  }
}
class E_ {
  constructor(e) {
    this.currClient = 0, this.startClock = 0, this.written = 0, this.encoder = e, this.clientStructs = [];
  }
}
const Tre = (t) => Gd(t, fO, lf), Rre = (t, e) => {
  if (t.constructor === tr) {
    const { client: n, clock: i } = t.id;
    return new tr(It(n, i + e), t.length - e);
  } else if (t.constructor === fr) {
    const { client: n, clock: i } = t.id;
    return new fr(It(n, i + e), t.length - e);
  } else {
    const n = t, { client: i, clock: r } = n.id;
    return new ni(
      It(i, r + e),
      null,
      It(i, r + e - 1),
      null,
      n.rightOrigin,
      n.parent,
      n.parentSub,
      n.content.splice(e)
    );
  }
}, Gd = (t, e = Qa, n = Bl) => {
  if (t.length === 1)
    return t[0];
  const i = t.map((u) => new e(Bs(u)));
  let r = i.map((u) => new S_(u, !0)), s = null;
  const o = new n(), l = new E_(o);
  for (; r = r.filter((h) => h.curr !== null), r.sort(
    (h, d) => {
      if (h.curr.id.client === d.curr.id.client) {
        const p = h.curr.id.clock - d.curr.id.clock;
        return p === 0 ? h.curr.constructor === d.curr.constructor ? 0 : h.curr.constructor === fr ? 1 : -1 : p;
      } else
        return d.curr.id.client - h.curr.id.client;
    }
  ), r.length !== 0; ) {
    const u = r[0], f = u.curr.id.client;
    if (s !== null) {
      let h = u.curr, d = !1;
      for (; h !== null && h.id.clock + h.length <= s.struct.id.clock + s.struct.length && h.id.client >= s.struct.id.client; )
        h = u.next(), d = !0;
      if (h === null || h.id.client !== f || d && h.id.clock > s.struct.id.clock + s.struct.length)
        continue;
      if (f !== s.struct.id.client)
        wo(l, s.struct, s.offset), s = { struct: h, offset: 0 }, u.next();
      else if (s.struct.id.clock + s.struct.length < h.id.clock)
        if (s.struct.constructor === fr)
          s.struct.length = h.id.clock + h.length - s.struct.id.clock;
        else {
          wo(l, s.struct, s.offset);
          const p = h.id.clock - s.struct.id.clock - s.struct.length;
          s = { struct: new fr(It(f, s.struct.id.clock + s.struct.length), p), offset: 0 };
        }
      else {
        const p = s.struct.id.clock + s.struct.length - h.id.clock;
        p > 0 && (s.struct.constructor === fr ? s.struct.length -= p : h = Rre(h, p)), s.struct.mergeWith(h) || (wo(l, s.struct, s.offset), s = { struct: h, offset: 0 }, u.next());
      }
    } else
      s = { struct: u.curr, offset: 0 }, u.next();
    for (let h = u.curr; h !== null && h.id.client === f && h.id.clock === s.struct.id.clock + s.struct.length && h.constructor !== fr; h = u.next())
      wo(l, s.struct, s.offset), s = { struct: h, offset: 0 };
  }
  s !== null && (wo(l, s.struct, s.offset), s = null), A_(l);
  const a = i.map((u) => k_(u)), c = ire(a);
  return fc(o, c), o.toUint8Array();
}, Pre = (t, e, n = Qa, i = Bl) => {
  const r = gO(e), s = new i(), o = new E_(s), l = new n(Bs(t)), a = new S_(l, !1);
  for (; a.curr; ) {
    const u = a.curr, f = u.id.client, h = r.get(f) || 0;
    if (a.curr.constructor === fr) {
      a.next();
      continue;
    }
    if (u.id.clock + u.length > h)
      for (wo(o, u, Kl(h - u.id.clock, 0)), a.next(); a.curr && a.curr.id.client === f; )
        wo(o, a.curr, 0), a.next();
    else
      for (; a.curr && a.curr.id.client === f && a.curr.id.clock + a.curr.length <= h; )
        a.next();
  }
  A_(o);
  const c = k_(l);
  return fc(s, c), s.toUint8Array();
}, kO = (t) => {
  t.written > 0 && (t.clientStructs.push({ written: t.written, restEncoder: En(t.encoder.restEncoder) }), t.encoder.restEncoder = fi(), t.written = 0);
}, wo = (t, e, n) => {
  t.written > 0 && t.currClient !== e.id.client && kO(t), t.written === 0 && (t.currClient = e.id.client, t.encoder.writeClient(e.id.client), st(t.encoder.restEncoder, e.id.clock + n)), e.write(t.encoder, n), t.written++;
}, A_ = (t) => {
  kO(t);
  const e = t.encoder.restEncoder;
  st(e, t.clientStructs.length);
  for (let n = 0; n < t.clientStructs.length; n++) {
    const i = t.clientStructs[n];
    st(e, i.written), sg(e, i.restEncoder);
  }
}, Ire = (t, e, n) => {
  const i = new e(Bs(t)), r = new S_(i, !1), s = new n(), o = new E_(s);
  for (let a = r.curr; a !== null; a = r.next())
    wo(o, a, 0);
  A_(o);
  const l = k_(i);
  return fc(s, l), s.toUint8Array();
}, Dre = (t) => Ire(t, Qa, lf);
class cg {
  constructor(e, n) {
    this.target = e, this.currentTarget = e, this.transaction = n, this._changes = null, this._keys = null, this._delta = null;
  }
  get path() {
    return Nre(this.currentTarget, this.target);
  }
  deletes(e) {
    return lO(this.transaction.deleteSet, e.id);
  }
  get keys() {
    if (this._keys === null) {
      const e = /* @__PURE__ */ new Map(), n = this.target;
      this.transaction.changed.get(n).forEach((r) => {
        if (r !== null) {
          const s = n._map.get(r);
          let o, l;
          if (this.adds(s)) {
            let a = s.left;
            for (; a !== null && this.adds(a); )
              a = a.left;
            if (this.deletes(s))
              if (a !== null && this.deletes(a))
                o = "delete", l = gm(a.content.getContent());
              else
                return;
            else
              a !== null && this.deletes(a) ? (o = "update", l = gm(a.content.getContent())) : (o = "add", l = void 0);
          } else if (this.deletes(s))
            o = "delete", l = gm(s.content.getContent());
          else
            return;
          e.set(r, { action: o, oldValue: l });
        }
      }), this._keys = e;
    }
    return this._keys;
  }
  get delta() {
    return this.changes.delta;
  }
  adds(e) {
    return e.id.clock >= (this.transaction.beforeState.get(e.id.client) || 0);
  }
  get changes() {
    let e = this._changes;
    if (e === null) {
      const n = this.target, i = Ou(), r = Ou(), s = [];
      if (e = {
        added: i,
        deleted: r,
        delta: s,
        keys: this.keys
      }, this.transaction.changed.get(n).has(null)) {
        let l = null;
        const a = () => {
          l && s.push(l);
        };
        for (let c = n._start; c !== null; c = c.right)
          c.deleted ? this.deletes(c) && !this.adds(c) && ((l === null || l.delete === void 0) && (a(), l = { delete: 0 }), l.delete += c.length, r.add(c)) : this.adds(c) ? ((l === null || l.insert === void 0) && (a(), l = { insert: [] }), l.insert = l.insert.concat(c.content.getContent()), i.add(c)) : ((l === null || l.retain === void 0) && (a(), l = { retain: 0 }), l.retain += c.length);
        l !== null && l.retain === void 0 && a();
      }
      this._changes = e;
    }
    return e;
  }
}
const Nre = (t, e) => {
  const n = [];
  for (; e._item !== null && e !== t; ) {
    if (e._item.parentSub !== null)
      n.unshift(e._item.parentSub);
    else {
      let i = 0, r = e._item.parent._start;
      for (; r !== e._item && r !== null; )
        r.deleted || i++, r = r.right;
      n.unshift(i);
    }
    e = e._item.parent;
  }
  return n;
}, CO = 80;
let M_ = 0;
class Lre {
  constructor(e, n) {
    e.marker = !0, this.p = e, this.index = n, this.timestamp = M_++;
  }
}
const jre = (t) => {
  t.timestamp = M_++;
}, SO = (t, e, n) => {
  t.p.marker = !1, t.p = e, e.marker = !0, t.index = n, t.timestamp = M_++;
}, Bre = (t, e, n) => {
  if (t.length >= CO) {
    const i = t.reduce((r, s) => r.timestamp < s.timestamp ? r : s);
    return SO(i, e, n), i;
  } else {
    const i = new Lre(e, n);
    return t.push(i), i;
  }
}, ug = (t, e) => {
  if (t._start === null || e === 0 || t._searchMarker === null)
    return null;
  const n = t._searchMarker.length === 0 ? null : t._searchMarker.reduce((s, o) => Ih(e - s.index) < Ih(e - o.index) ? s : o);
  let i = t._start, r = 0;
  for (n !== null && (i = n.p, r = n.index, jre(n)); i.right !== null && r < e; ) {
    if (!i.deleted && i.countable) {
      if (e < r + i.length)
        break;
      r += i.length;
    }
    i = i.right;
  }
  for (; i.left !== null && r > e; )
    i = i.left, !i.deleted && i.countable && (r -= i.length);
  for (; i.left !== null && i.left.id.client === i.id.client && i.left.id.clock + i.left.length === i.id.clock; )
    i = i.left, !i.deleted && i.countable && (r -= i.length);
  return n !== null && Ih(n.index - r) < i.parent.length / CO ? (SO(n, i, r), n) : Bre(t._searchMarker, i, r);
}, Iu = (t, e, n) => {
  for (let i = t.length - 1; i >= 0; i--) {
    const r = t[i];
    if (n > 0) {
      let s = r.p;
      for (s.marker = !1; s && (s.deleted || !s.countable); )
        s = s.left, s && !s.deleted && s.countable && (r.index -= s.length);
      if (s === null || s.marker === !0) {
        t.splice(i, 1);
        continue;
      }
      r.p = s, s.marker = !0;
    }
    (e < r.index || n > 0 && e === r.index) && (r.index = Kl(e, r.index + n));
  }
}, fg = (t, e, n) => {
  const i = t, r = e.changedParentTypes;
  for (; Cr(r, t, () => []).push(n), t._item !== null; )
    t = t._item.parent;
  bO(i._eH, n, e);
};
class Ln {
  constructor() {
    this._item = null, this._map = /* @__PURE__ */ new Map(), this._start = null, this.doc = null, this._length = 0, this._eH = P3(), this._dEH = P3(), this._searchMarker = null;
  }
  get parent() {
    return this._item ? this._item.parent : null;
  }
  _integrate(e, n) {
    this.doc = e, this._item = n;
  }
  _copy() {
    throw _s();
  }
  clone() {
    throw _s();
  }
  _write(e) {
  }
  get _first() {
    let e = this._start;
    for (; e !== null && e.deleted; )
      e = e.right;
    return e;
  }
  _callObserver(e, n) {
    !e.local && this._searchMarker && (this._searchMarker.length = 0);
  }
  observe(e) {
    I3(this._eH, e);
  }
  observeDeep(e) {
    I3(this._dEH, e);
  }
  unobserve(e) {
    D3(this._eH, e);
  }
  unobserveDeep(e) {
    D3(this._dEH, e);
  }
  toJSON() {
  }
}
const EO = (t, e, n) => {
  e < 0 && (e = t._length + e), n < 0 && (n = t._length + n);
  let i = n - e;
  const r = [];
  let s = t._start;
  for (; s !== null && i > 0; ) {
    if (s.countable && !s.deleted) {
      const o = s.content.getContent();
      if (o.length <= e)
        e -= o.length;
      else {
        for (let l = e; l < o.length && i > 0; l++)
          r.push(o[l]), i--;
        e = 0;
      }
    }
    s = s.right;
  }
  return r;
}, AO = (t) => {
  const e = [];
  let n = t._start;
  for (; n !== null; ) {
    if (n.countable && !n.deleted) {
      const i = n.content.getContent();
      for (let r = 0; r < i.length; r++)
        e.push(i[r]);
    }
    n = n.right;
  }
  return e;
}, Du = (t, e) => {
  let n = 0, i = t._start;
  for (; i !== null; ) {
    if (i.countable && !i.deleted) {
      const r = i.content.getContent();
      for (let s = 0; s < r.length; s++)
        e(r[s], n++, t);
    }
    i = i.right;
  }
}, MO = (t, e) => {
  const n = [];
  return Du(t, (i, r) => {
    n.push(e(i, r, t));
  }), n;
}, xre = (t) => {
  let e = t._start, n = null, i = 0;
  return {
    [Symbol.iterator]() {
      return this;
    },
    next: () => {
      if (n === null) {
        for (; e !== null && e.deleted; )
          e = e.right;
        if (e === null)
          return {
            done: !0,
            value: void 0
          };
        n = e.content.getContent(), i = 0, e = e.right;
      }
      const r = n[i++];
      return n.length <= i && (n = null), {
        done: !1,
        value: r
      };
    }
  };
}, OO = (t, e) => {
  const n = ug(t, e);
  let i = t._start;
  for (n !== null && (i = n.p, e -= n.index); i !== null; i = i.right)
    if (!i.deleted && i.countable) {
      if (e < i.length)
        return i.content.getContent()[e];
      e -= i.length;
    }
}, Yd = (t, e, n, i) => {
  let r = n;
  const s = t.doc, o = s.clientID, l = s.store, a = n === null ? e._start : n.right;
  let c = [];
  const u = () => {
    c.length > 0 && (r = new ni(It(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new Fl(c)), r.integrate(t, 0), c = []);
  };
  i.forEach((f) => {
    if (f === null)
      c.push(f);
    else
      switch (f.constructor) {
        case Number:
        case Object:
        case Boolean:
        case Array:
        case String:
          c.push(f);
          break;
        default:
          switch (u(), f.constructor) {
            case Uint8Array:
            case ArrayBuffer:
              r = new ni(It(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new af(new Uint8Array(f))), r.integrate(t, 0);
              break;
            case nl:
              r = new ni(It(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new cf(f)), r.integrate(t, 0);
              break;
            default:
              if (f instanceof Ln)
                r = new ni(It(o, pi(l, o)), r, r && r.lastId, a, a && a.id, e, null, new ao(f)), r.integrate(t, 0);
              else
                throw new Error("Unexpected content type in insert operation");
          }
      }
  }), u();
}, TO = tl("Length exceeded!"), RO = (t, e, n, i) => {
  if (n > e._length)
    throw TO;
  if (n === 0)
    return e._searchMarker && Iu(e._searchMarker, n, i.length), Yd(t, e, null, i);
  const r = n, s = ug(e, n);
  let o = e._start;
  for (s !== null && (o = s.p, n -= s.index, n === 0 && (o = o.prev, n += o && o.countable && !o.deleted ? o.length : 0)); o !== null; o = o.right)
    if (!o.deleted && o.countable) {
      if (n <= o.length) {
        n < o.length && qo(t, It(o.id.client, o.id.clock + n));
        break;
      }
      n -= o.length;
    }
  return e._searchMarker && Iu(e._searchMarker, r, i.length), Yd(t, e, o, i);
}, Fre = (t, e, n) => {
  let r = (e._searchMarker || []).reduce((s, o) => o.index > s.index ? o : s, { index: 0, p: e._start }).p;
  if (r)
    for (; r.right; )
      r = r.right;
  return Yd(t, e, r, n);
}, PO = (t, e, n, i) => {
  if (i === 0)
    return;
  const r = n, s = i, o = ug(e, n);
  let l = e._start;
  for (o !== null && (l = o.p, n -= o.index); l !== null && n > 0; l = l.right)
    !l.deleted && l.countable && (n < l.length && qo(t, It(l.id.client, l.id.clock + n)), n -= l.length);
  for (; i > 0 && l !== null; )
    l.deleted || (i < l.length && qo(t, It(l.id.client, l.id.clock + i)), l.delete(t), i -= l.length), l = l.right;
  if (i > 0)
    throw TO;
  e._searchMarker && Iu(e._searchMarker, r, -s + i);
}, Xd = (t, e, n) => {
  const i = e._map.get(n);
  i !== void 0 && i.delete(t);
}, O_ = (t, e, n, i) => {
  const r = e._map.get(n) || null, s = t.doc, o = s.clientID;
  let l;
  if (i == null)
    l = new Fl([i]);
  else
    switch (i.constructor) {
      case Number:
      case Object:
      case Boolean:
      case Array:
      case String:
        l = new Fl([i]);
        break;
      case Uint8Array:
        l = new af(i);
        break;
      case nl:
        l = new cf(i);
        break;
      default:
        if (i instanceof Ln)
          l = new ao(i);
        else
          throw new Error("Unexpected content type");
    }
  new ni(It(o, pi(s.store, o)), r, r && r.lastId, null, null, e, n, l).integrate(t, 0);
}, T_ = (t, e) => {
  const n = t._map.get(e);
  return n !== void 0 && !n.deleted ? n.content.getContent()[n.length - 1] : void 0;
}, IO = (t) => {
  const e = {};
  return t._map.forEach((n, i) => {
    n.deleted || (e[i] = n.content.getContent()[n.length - 1]);
  }), e;
}, DO = (t, e) => {
  const n = t._map.get(e);
  return n !== void 0 && !n.deleted;
}, lh = (t) => tre(t.entries(), (e) => !e[1].deleted);
class zre extends cg {
  constructor(e, n) {
    super(e, n), this._transaction = n;
  }
}
class ws extends Ln {
  constructor() {
    super(), this._prelimContent = [], this._searchMarker = [];
  }
  static from(e) {
    const n = new ws();
    return n.push(e), n;
  }
  _integrate(e, n) {
    super._integrate(e, n), this.insert(0, this._prelimContent), this._prelimContent = null;
  }
  _copy() {
    return new ws();
  }
  clone() {
    const e = new ws();
    return e.insert(0, this.toArray().map(
      (n) => n instanceof Ln ? n.clone() : n
    )), e;
  }
  get length() {
    return this._prelimContent === null ? this._length : this._prelimContent.length;
  }
  _callObserver(e, n) {
    super._callObserver(e, n), fg(this, e, new zre(this, e));
  }
  insert(e, n) {
    this.doc !== null ? on(this.doc, (i) => {
      RO(i, this, e, n);
    }) : this._prelimContent.splice(e, 0, ...n);
  }
  push(e) {
    this.doc !== null ? on(this.doc, (n) => {
      Fre(n, this, e);
    }) : this._prelimContent.push(...e);
  }
  unshift(e) {
    this.insert(0, e);
  }
  delete(e, n = 1) {
    this.doc !== null ? on(this.doc, (i) => {
      PO(i, this, e, n);
    }) : this._prelimContent.splice(e, n);
  }
  get(e) {
    return OO(this, e);
  }
  toArray() {
    return AO(this);
  }
  slice(e = 0, n = this.length) {
    return EO(this, e, n);
  }
  toJSON() {
    return this.map((e) => e instanceof Ln ? e.toJSON() : e);
  }
  map(e) {
    return MO(this, e);
  }
  forEach(e) {
    Du(this, e);
  }
  [Symbol.iterator]() {
    return xre(this);
  }
  _write(e) {
    e.writeTypeRef(cse);
  }
}
const Vre = (t) => new ws();
class Ure extends cg {
  constructor(e, n, i) {
    super(e, n), this.keysChanged = i;
  }
}
class Ps extends Ln {
  constructor(e) {
    super(), this._prelimContent = null, e === void 0 ? this._prelimContent = /* @__PURE__ */ new Map() : this._prelimContent = new Map(e);
  }
  _integrate(e, n) {
    super._integrate(e, n), this._prelimContent.forEach((i, r) => {
      this.set(r, i);
    }), this._prelimContent = null;
  }
  _copy() {
    return new Ps();
  }
  clone() {
    const e = new Ps();
    return this.forEach((n, i) => {
      e.set(i, n instanceof Ln ? n.clone() : n);
    }), e;
  }
  _callObserver(e, n) {
    fg(this, e, new Ure(this, e, n));
  }
  toJSON() {
    const e = {};
    return this._map.forEach((n, i) => {
      if (!n.deleted) {
        const r = n.content.getContent()[n.length - 1];
        e[i] = r instanceof Ln ? r.toJSON() : r;
      }
    }), e;
  }
  get size() {
    return [...lh(this._map)].length;
  }
  keys() {
    return vm(lh(this._map), (e) => e[0]);
  }
  values() {
    return vm(lh(this._map), (e) => e[1].content.getContent()[e[1].length - 1]);
  }
  entries() {
    return vm(lh(this._map), (e) => [e[0], e[1].content.getContent()[e[1].length - 1]]);
  }
  forEach(e) {
    this._map.forEach((n, i) => {
      n.deleted || e(n.content.getContent()[n.length - 1], i, this);
    });
  }
  [Symbol.iterator]() {
    return this.entries();
  }
  delete(e) {
    this.doc !== null ? on(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._prelimContent.delete(e);
  }
  set(e, n) {
    return this.doc !== null ? on(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._prelimContent.set(e, n), n;
  }
  get(e) {
    return T_(this, e);
  }
  has(e) {
    return DO(this, e);
  }
  clear() {
    this.doc !== null ? on(this.doc, (e) => {
      this.forEach(function(n, i, r) {
        Xd(e, r, i);
      });
    }) : this._prelimContent.clear();
  }
  _write(e) {
    e.writeTypeRef(use);
  }
}
const Hre = (t) => new Ps(), Mo = (t, e) => t === e || typeof t == "object" && typeof e == "object" && t && e && aie(t, e);
class m0 {
  constructor(e, n, i, r) {
    this.left = e, this.right = n, this.index = i, this.currentAttributes = r;
  }
  forward() {
    switch (this.right === null && Rs(), this.right.content.constructor) {
      case si:
        this.right.deleted || hc(this.currentAttributes, this.right.content);
        break;
      default:
        this.right.deleted || (this.index += this.right.length);
        break;
    }
    this.left = this.right, this.right = this.right.right;
  }
}
const B3 = (t, e, n) => {
  for (; e.right !== null && n > 0; ) {
    switch (e.right.content.constructor) {
      case si:
        e.right.deleted || hc(e.currentAttributes, e.right.content);
        break;
      default:
        e.right.deleted || (n < e.right.length && qo(t, It(e.right.id.client, e.right.id.clock + n)), e.index += e.right.length, n -= e.right.length);
        break;
    }
    e.left = e.right, e.right = e.right.right;
  }
  return e;
}, ah = (t, e, n) => {
  const i = /* @__PURE__ */ new Map(), r = ug(e, n);
  if (r) {
    const s = new m0(r.p.left, r.p, r.index, i);
    return B3(t, s, n - r.index);
  } else {
    const s = new m0(null, e._start, 0, i);
    return B3(t, s, n);
  }
}, NO = (t, e, n, i) => {
  for (; n.right !== null && (n.right.deleted === !0 || n.right.content.constructor === si && Mo(i.get(n.right.content.key), n.right.content.value)); )
    n.right.deleted || i.delete(n.right.content.key), n.forward();
  const r = t.doc, s = r.clientID;
  i.forEach((o, l) => {
    const a = n.left, c = n.right, u = new ni(It(s, pi(r.store, s)), a, a && a.lastId, c, c && c.id, e, null, new si(l, o));
    u.integrate(t, 0), n.right = u, n.forward();
  });
}, hc = (t, e) => {
  const { key: n, value: i } = e;
  i === null ? t.delete(n) : t.set(n, i);
}, LO = (t, e) => {
  for (; t.right !== null; ) {
    if (!(t.right.deleted || t.right.content.constructor === si && Mo(e[t.right.content.key] || null, t.right.content.value)))
      break;
    t.forward();
  }
}, jO = (t, e, n, i) => {
  const r = t.doc, s = r.clientID, o = /* @__PURE__ */ new Map();
  for (const l in i) {
    const a = i[l], c = n.currentAttributes.get(l) || null;
    if (!Mo(c, a)) {
      o.set(l, c);
      const { left: u, right: f } = n;
      n.right = new ni(It(s, pi(r.store, s)), u, u && u.lastId, f, f && f.id, e, null, new si(l, a)), n.right.integrate(t, 0), n.forward();
    }
  }
  return o;
}, Cm = (t, e, n, i, r) => {
  n.currentAttributes.forEach((h, d) => {
    r[d] === void 0 && (r[d] = null);
  });
  const s = t.doc, o = s.clientID;
  LO(n, r);
  const l = jO(t, e, n, r), a = i.constructor === String ? new Ds(i) : i instanceof Ln ? new ao(i) : new Yl(i);
  let { left: c, right: u, index: f } = n;
  e._searchMarker && Iu(e._searchMarker, n.index, a.getLength()), u = new ni(It(o, pi(s.store, o)), c, c && c.lastId, u, u && u.id, e, null, a), u.integrate(t, 0), n.right = u, n.index = f, n.forward(), NO(t, e, n, l);
}, x3 = (t, e, n, i, r) => {
  const s = t.doc, o = s.clientID;
  LO(n, r);
  const l = jO(t, e, n, r);
  e:
    for (; n.right !== null && (i > 0 || l.size > 0 && (n.right.deleted || n.right.content.constructor === si)); ) {
      if (!n.right.deleted)
        switch (n.right.content.constructor) {
          case si: {
            const { key: a, value: c } = n.right.content, u = r[a];
            if (u !== void 0) {
              if (Mo(u, c))
                l.delete(a);
              else {
                if (i === 0)
                  break e;
                l.set(a, c);
              }
              n.right.delete(t);
            } else
              n.currentAttributes.set(a, c);
            break;
          }
          default:
            i < n.right.length && qo(t, It(n.right.id.client, n.right.id.clock + i)), i -= n.right.length;
            break;
        }
      n.forward();
    }
  if (i > 0) {
    let a = "";
    for (; i > 0; i--)
      a += `
`;
    n.right = new ni(It(o, pi(s.store, o)), n.left, n.left && n.left.lastId, n.right, n.right && n.right.id, e, null, new Ds(a)), n.right.integrate(t, 0), n.forward();
  }
  NO(t, e, n, l);
}, BO = (t, e, n, i, r) => {
  let s = n;
  const o = Wd(r);
  for (; s && (!s.countable || s.deleted); )
    !s.deleted && s.content.constructor === si && hc(o, s.content), s = s.right;
  let l = 0, a = !1;
  for (; e !== s; ) {
    if (n === e && (a = !0), !e.deleted) {
      const c = e.content;
      switch (c.constructor) {
        case si: {
          const { key: u, value: f } = c;
          ((o.get(u) || null) !== f || (i.get(u) || null) === f) && (e.delete(t), l++, !a && (r.get(u) || null) === f && (i.get(u) || null) !== f && r.delete(u));
          break;
        }
      }
    }
    e = e.right;
  }
  return l;
}, Wre = (t, e) => {
  for (; e && e.right && (e.right.deleted || !e.right.countable); )
    e = e.right;
  const n = /* @__PURE__ */ new Set();
  for (; e && (e.deleted || !e.countable); ) {
    if (!e.deleted && e.content.constructor === si) {
      const i = e.content.key;
      n.has(i) ? e.delete(t) : n.add(i);
    }
    e = e.left;
  }
}, qre = (t) => {
  let e = 0;
  return on(t.doc, (n) => {
    let i = t._start, r = t._start, s = bs();
    const o = Wd(s);
    for (; r; ) {
      if (r.deleted === !1)
        switch (r.content.constructor) {
          case si:
            hc(o, r.content);
            break;
          default:
            e += BO(n, i, r, s, o), s = Wd(o), i = r;
            break;
        }
      r = r.right;
    }
  }), e;
}, F3 = (t, e, n) => {
  const i = n, r = Wd(e.currentAttributes), s = e.right;
  for (; n > 0 && e.right !== null; ) {
    if (e.right.deleted === !1)
      switch (e.right.content.constructor) {
        case ao:
        case Yl:
        case Ds:
          n < e.right.length && qo(t, It(e.right.id.client, e.right.id.clock + n)), n -= e.right.length, e.right.delete(t);
          break;
      }
    e.forward();
  }
  s && BO(t, s, e.right, r, e.currentAttributes);
  const o = (e.left || e.right).parent;
  return o._searchMarker && Iu(o._searchMarker, e.index, -i + n), e;
};
class Jre extends cg {
  constructor(e, n, i) {
    super(e, n), this.childListChanged = !1, this.keysChanged = /* @__PURE__ */ new Set(), i.forEach((r) => {
      r === null ? this.childListChanged = !0 : this.keysChanged.add(r);
    });
  }
  get changes() {
    if (this._changes === null) {
      const e = {
        keys: this.keys,
        delta: this.delta,
        added: /* @__PURE__ */ new Set(),
        deleted: /* @__PURE__ */ new Set()
      };
      this._changes = e;
    }
    return this._changes;
  }
  get delta() {
    if (this._delta === null) {
      const e = this.target.doc, n = [];
      on(e, (i) => {
        const r = /* @__PURE__ */ new Map(), s = /* @__PURE__ */ new Map();
        let o = this.target._start, l = null;
        const a = {};
        let c = "", u = 0, f = 0;
        const h = () => {
          if (l !== null) {
            let d;
            switch (l) {
              case "delete":
                d = { delete: f }, f = 0;
                break;
              case "insert":
                d = { insert: c }, r.size > 0 && (d.attributes = {}, r.forEach((p, g) => {
                  p !== null && (d.attributes[g] = p);
                })), c = "";
                break;
              case "retain":
                if (d = { retain: u }, Object.keys(a).length > 0) {
                  d.attributes = {};
                  for (const p in a)
                    d.attributes[p] = a[p];
                }
                u = 0;
                break;
            }
            n.push(d), l = null;
          }
        };
        for (; o !== null; ) {
          switch (o.content.constructor) {
            case ao:
            case Yl:
              this.adds(o) ? this.deletes(o) || (h(), l = "insert", c = o.content.getContent()[0], h()) : this.deletes(o) ? (l !== "delete" && (h(), l = "delete"), f += 1) : o.deleted || (l !== "retain" && (h(), l = "retain"), u += 1);
              break;
            case Ds:
              this.adds(o) ? this.deletes(o) || (l !== "insert" && (h(), l = "insert"), c += o.content.str) : this.deletes(o) ? (l !== "delete" && (h(), l = "delete"), f += o.length) : o.deleted || (l !== "retain" && (h(), l = "retain"), u += o.length);
              break;
            case si: {
              const { key: d, value: p } = o.content;
              if (this.adds(o)) {
                if (!this.deletes(o)) {
                  const g = r.get(d) || null;
                  Mo(g, p) ? p !== null && o.delete(i) : (l === "retain" && h(), Mo(p, s.get(d) || null) ? delete a[d] : a[d] = p);
                }
              } else if (this.deletes(o)) {
                s.set(d, p);
                const g = r.get(d) || null;
                Mo(g, p) || (l === "retain" && h(), a[d] = g);
              } else if (!o.deleted) {
                s.set(d, p);
                const g = a[d];
                g !== void 0 && (Mo(g, p) ? g !== null && o.delete(i) : (l === "retain" && h(), p === null ? delete a[d] : a[d] = p));
              }
              o.deleted || (l === "insert" && h(), hc(r, o.content));
              break;
            }
          }
          o = o.right;
        }
        for (h(); n.length > 0; ) {
          const d = n[n.length - 1];
          if (d.retain !== void 0 && d.attributes === void 0)
            n.pop();
          else
            break;
        }
      }), this._delta = n;
    }
    return this._delta;
  }
}
class io extends Ln {
  constructor(e) {
    super(), this._pending = e !== void 0 ? [() => this.insert(0, e)] : [], this._searchMarker = [];
  }
  get length() {
    return this._length;
  }
  _integrate(e, n) {
    super._integrate(e, n);
    try {
      this._pending.forEach((i) => i());
    } catch (i) {
      console.error(i);
    }
    this._pending = null;
  }
  _copy() {
    return new io();
  }
  clone() {
    const e = new io();
    return e.applyDelta(this.toDelta()), e;
  }
  _callObserver(e, n) {
    super._callObserver(e, n);
    const i = new Jre(this, e, n), r = e.doc;
    if (fg(this, e, i), !e.local) {
      let s = !1;
      for (const [o, l] of e.afterState.entries()) {
        const a = e.beforeState.get(o) || 0;
        if (l !== a && (wO(e, r.store.clients.get(o), a, l, (c) => {
          !c.deleted && c.content.constructor === si && (s = !0);
        }), s))
          break;
      }
      s || d0(e, e.deleteSet, (o) => {
        o instanceof tr || s || o.parent === this && o.content.constructor === si && (s = !0);
      }), on(r, (o) => {
        s ? qre(this) : d0(o, o.deleteSet, (l) => {
          l instanceof tr || l.parent === this && Wre(o, l);
        });
      });
    }
  }
  toString() {
    let e = "", n = this._start;
    for (; n !== null; )
      !n.deleted && n.countable && n.content.constructor === Ds && (e += n.content.str), n = n.right;
    return e;
  }
  toJSON() {
    return this.toString();
  }
  applyDelta(e, { sanitize: n = !0 } = {}) {
    this.doc !== null ? on(this.doc, (i) => {
      const r = new m0(null, this._start, 0, /* @__PURE__ */ new Map());
      for (let s = 0; s < e.length; s++) {
        const o = e[s];
        if (o.insert !== void 0) {
          const l = !n && typeof o.insert == "string" && s === e.length - 1 && r.right === null && o.insert.slice(-1) === `
` ? o.insert.slice(0, -1) : o.insert;
          (typeof l != "string" || l.length > 0) && Cm(i, this, r, l, o.attributes || {});
        } else
          o.retain !== void 0 ? x3(i, this, r, o.retain, o.attributes || {}) : o.delete !== void 0 && F3(i, r, o.delete);
      }
    }) : this._pending.push(() => this.applyDelta(e));
  }
  toDelta(e, n, i) {
    const r = [], s = /* @__PURE__ */ new Map(), o = this.doc;
    let l = "", a = this._start;
    function c() {
      if (l.length > 0) {
        const u = {};
        let f = !1;
        s.forEach((d, p) => {
          f = !0, u[p] = d;
        });
        const h = { insert: l };
        f && (h.attributes = u), r.push(h), l = "";
      }
    }
    return on(o, (u) => {
      for (e && p0(u, e), n && p0(u, n); a !== null; ) {
        if (Cc(a, e) || n !== void 0 && Cc(a, n))
          switch (a.content.constructor) {
            case Ds: {
              const f = s.get("ychange");
              e !== void 0 && !Cc(a, e) ? (f === void 0 || f.user !== a.id.client || f.type !== "removed") && (c(), s.set("ychange", i ? i("removed", a.id) : { type: "removed" })) : n !== void 0 && !Cc(a, n) ? (f === void 0 || f.user !== a.id.client || f.type !== "added") && (c(), s.set("ychange", i ? i("added", a.id) : { type: "added" })) : f !== void 0 && (c(), s.delete("ychange")), l += a.content.str;
              break;
            }
            case ao:
            case Yl: {
              c();
              const f = {
                insert: a.content.getContent()[0]
              };
              if (s.size > 0) {
                const h = {};
                f.attributes = h, s.forEach((d, p) => {
                  h[p] = d;
                });
              }
              r.push(f);
              break;
            }
            case si:
              Cc(a, e) && (c(), hc(s, a.content));
              break;
          }
        a = a.right;
      }
      c();
    }, "cleanup"), r;
  }
  insert(e, n, i) {
    if (n.length <= 0)
      return;
    const r = this.doc;
    r !== null ? on(r, (s) => {
      const o = ah(s, this, e);
      i || (i = {}, o.currentAttributes.forEach((l, a) => {
        i[a] = l;
      })), Cm(s, this, o, n, i);
    }) : this._pending.push(() => this.insert(e, n, i));
  }
  insertEmbed(e, n, i = {}) {
    const r = this.doc;
    r !== null ? on(r, (s) => {
      const o = ah(s, this, e);
      Cm(s, this, o, n, i);
    }) : this._pending.push(() => this.insertEmbed(e, n, i));
  }
  delete(e, n) {
    if (n === 0)
      return;
    const i = this.doc;
    i !== null ? on(i, (r) => {
      F3(r, ah(r, this, e), n);
    }) : this._pending.push(() => this.delete(e, n));
  }
  format(e, n, i) {
    if (n === 0)
      return;
    const r = this.doc;
    r !== null ? on(r, (s) => {
      const o = ah(s, this, e);
      o.right !== null && x3(s, this, o, n, i);
    }) : this._pending.push(() => this.format(e, n, i));
  }
  removeAttribute(e) {
    this.doc !== null ? on(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._pending.push(() => this.removeAttribute(e));
  }
  setAttribute(e, n) {
    this.doc !== null ? on(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._pending.push(() => this.setAttribute(e, n));
  }
  getAttribute(e) {
    return T_(this, e);
  }
  getAttributes() {
    return IO(this);
  }
  _write(e) {
    e.writeTypeRef(fse);
  }
}
const Kre = (t) => new io();
class Sm {
  constructor(e, n = () => !0) {
    this._filter = n, this._root = e, this._currentNode = e._start, this._firstCall = !0;
  }
  [Symbol.iterator]() {
    return this;
  }
  next() {
    let e = this._currentNode, n = e && e.content && e.content.type;
    if (e !== null && (!this._firstCall || e.deleted || !this._filter(n)))
      do
        if (n = e.content.type, !e.deleted && (n.constructor === Jo || n.constructor === Is) && n._start !== null)
          e = n._start;
        else
          for (; e !== null; )
            if (e.right !== null) {
              e = e.right;
              break;
            } else
              e.parent === this._root ? e = null : e = e.parent._item;
      while (e !== null && (e.deleted || !this._filter(e.content.type)));
    return this._firstCall = !1, e === null ? { value: void 0, done: !0 } : (this._currentNode = e, { value: e.content.type, done: !1 });
  }
}
class Is extends Ln {
  constructor() {
    super(), this._prelimContent = [];
  }
  get firstChild() {
    const e = this._first;
    return e ? e.content.getContent()[0] : null;
  }
  _integrate(e, n) {
    super._integrate(e, n), this.insert(0, this._prelimContent), this._prelimContent = null;
  }
  _copy() {
    return new Is();
  }
  clone() {
    const e = new Is();
    return e.insert(0, this.toArray().map((n) => n instanceof Ln ? n.clone() : n)), e;
  }
  get length() {
    return this._prelimContent === null ? this._length : this._prelimContent.length;
  }
  createTreeWalker(e) {
    return new Sm(this, e);
  }
  querySelector(e) {
    e = e.toUpperCase();
    const i = new Sm(this, (r) => r.nodeName && r.nodeName.toUpperCase() === e).next();
    return i.done ? null : i.value;
  }
  querySelectorAll(e) {
    return e = e.toUpperCase(), Array.from(new Sm(this, (n) => n.nodeName && n.nodeName.toUpperCase() === e));
  }
  _callObserver(e, n) {
    fg(this, e, new Xre(this, n, e));
  }
  toString() {
    return MO(this, (e) => e.toString()).join("");
  }
  toJSON() {
    return this.toString();
  }
  toDOM(e = document, n = {}, i) {
    const r = e.createDocumentFragment();
    return i !== void 0 && i._createAssociation(r, this), Du(this, (s) => {
      r.insertBefore(s.toDOM(e, n, i), null);
    }), r;
  }
  insert(e, n) {
    this.doc !== null ? on(this.doc, (i) => {
      RO(i, this, e, n);
    }) : this._prelimContent.splice(e, 0, ...n);
  }
  insertAfter(e, n) {
    if (this.doc !== null)
      on(this.doc, (i) => {
        const r = e && e instanceof Ln ? e._item : e;
        Yd(i, this, r, n);
      });
    else {
      const i = this._prelimContent, r = e === null ? 0 : i.findIndex((s) => s === e) + 1;
      if (r === 0 && e !== null)
        throw tl("Reference item not found");
      i.splice(r, 0, ...n);
    }
  }
  delete(e, n = 1) {
    this.doc !== null ? on(this.doc, (i) => {
      PO(i, this, e, n);
    }) : this._prelimContent.splice(e, n);
  }
  toArray() {
    return AO(this);
  }
  push(e) {
    this.insert(this.length, e);
  }
  unshift(e) {
    this.insert(0, e);
  }
  get(e) {
    return OO(this, e);
  }
  slice(e = 0, n = this.length) {
    return EO(this, e, n);
  }
  forEach(e) {
    Du(this, e);
  }
  _write(e) {
    e.writeTypeRef(dse);
  }
}
const Gre = (t) => new Is();
class Jo extends Is {
  constructor(e = "UNDEFINED") {
    super(), this.nodeName = e, this._prelimAttrs = /* @__PURE__ */ new Map();
  }
  get nextSibling() {
    const e = this._item ? this._item.next : null;
    return e ? e.content.type : null;
  }
  get prevSibling() {
    const e = this._item ? this._item.prev : null;
    return e ? e.content.type : null;
  }
  _integrate(e, n) {
    super._integrate(e, n), this._prelimAttrs.forEach((i, r) => {
      this.setAttribute(r, i);
    }), this._prelimAttrs = null;
  }
  _copy() {
    return new Jo(this.nodeName);
  }
  clone() {
    const e = new Jo(this.nodeName), n = this.getAttributes();
    for (const i in n)
      e.setAttribute(i, n[i]);
    return e.insert(0, this.toArray().map((i) => i instanceof Ln ? i.clone() : i)), e;
  }
  toString() {
    const e = this.getAttributes(), n = [], i = [];
    for (const l in e)
      i.push(l);
    i.sort();
    const r = i.length;
    for (let l = 0; l < r; l++) {
      const a = i[l];
      n.push(a + '="' + e[a] + '"');
    }
    const s = this.nodeName.toLocaleLowerCase(), o = n.length > 0 ? " " + n.join(" ") : "";
    return `<${s}${o}>${super.toString()}</${s}>`;
  }
  removeAttribute(e) {
    this.doc !== null ? on(this.doc, (n) => {
      Xd(n, this, e);
    }) : this._prelimAttrs.delete(e);
  }
  setAttribute(e, n) {
    this.doc !== null ? on(this.doc, (i) => {
      O_(i, this, e, n);
    }) : this._prelimAttrs.set(e, n);
  }
  getAttribute(e) {
    return T_(this, e);
  }
  hasAttribute(e) {
    return DO(this, e);
  }
  getAttributes() {
    return IO(this);
  }
  toDOM(e = document, n = {}, i) {
    const r = e.createElement(this.nodeName), s = this.getAttributes();
    for (const o in s)
      r.setAttribute(o, s[o]);
    return Du(this, (o) => {
      r.appendChild(o.toDOM(e, n, i));
    }), i !== void 0 && i._createAssociation(r, this), r;
  }
  _write(e) {
    e.writeTypeRef(hse), e.writeKey(this.nodeName);
  }
}
const Yre = (t) => new Jo(t.readKey());
class Xre extends cg {
  constructor(e, n, i) {
    super(e, i), this.childListChanged = !1, this.attributesChanged = /* @__PURE__ */ new Set(), n.forEach((r) => {
      r === null ? this.childListChanged = !0 : this.attributesChanged.add(r);
    });
  }
}
class Za extends Ps {
  constructor(e) {
    super(), this.hookName = e;
  }
  _copy() {
    return new Za(this.hookName);
  }
  clone() {
    const e = new Za(this.hookName);
    return this.forEach((n, i) => {
      e.set(i, n);
    }), e;
  }
  toDOM(e = document, n = {}, i) {
    const r = n[this.hookName];
    let s;
    return r !== void 0 ? s = r.createDom(this) : s = document.createElement(this.hookName), s.setAttribute("data-yjs-hook", this.hookName), i !== void 0 && i._createAssociation(s, this), s;
  }
  _write(e) {
    e.writeTypeRef(pse), e.writeKey(this.hookName);
  }
}
const Qre = (t) => new Za(t.readKey());
class xl extends io {
  get nextSibling() {
    const e = this._item ? this._item.next : null;
    return e ? e.content.type : null;
  }
  get prevSibling() {
    const e = this._item ? this._item.prev : null;
    return e ? e.content.type : null;
  }
  _copy() {
    return new xl();
  }
  clone() {
    const e = new xl();
    return e.applyDelta(this.toDelta()), e;
  }
  toDOM(e = document, n, i) {
    const r = e.createTextNode(this.toString());
    return i !== void 0 && i._createAssociation(r, this), r;
  }
  toString() {
    return this.toDelta().map((e) => {
      const n = [];
      for (const r in e.attributes) {
        const s = [];
        for (const o in e.attributes[r])
          s.push({ key: o, value: e.attributes[r][o] });
        s.sort((o, l) => o.key < l.key ? -1 : 1), n.push({ nodeName: r, attrs: s });
      }
      n.sort((r, s) => r.nodeName < s.nodeName ? -1 : 1);
      let i = "";
      for (let r = 0; r < n.length; r++) {
        const s = n[r];
        i += `<${s.nodeName}`;
        for (let o = 0; o < s.attrs.length; o++) {
          const l = s.attrs[o];
          i += ` ${l.key}="${l.value}"`;
        }
        i += ">";
      }
      i += e.insert;
      for (let r = n.length - 1; r >= 0; r--)
        i += `</${n[r].nodeName}>`;
      return i;
    }).join("");
  }
  toJSON() {
    return this.toString();
  }
  _write(e) {
    e.writeTypeRef(gse);
  }
}
const Zre = (t) => new xl();
class R_ {
  constructor(e, n) {
    this.id = e, this.length = n;
  }
  get deleted() {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  write(e, n, i) {
    throw _s();
  }
  integrate(e, n) {
    throw _s();
  }
}
const $re = 0;
class tr extends R_ {
  get deleted() {
    return !0;
  }
  delete() {
  }
  mergeWith(e) {
    return this.constructor !== e.constructor ? !1 : (this.length += e.length, !0);
  }
  integrate(e, n) {
    n > 0 && (this.id.clock += n, this.length -= n), yO(e.doc.store, this);
  }
  write(e, n) {
    e.writeInfo($re), e.writeLen(this.length - n);
  }
  getMissing(e, n) {
    return null;
  }
}
class af {
  constructor(e) {
    this.content = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.content];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new af(this.content);
  }
  splice(e) {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeBuf(this.content);
  }
  getRef() {
    return 3;
  }
}
const ese = (t) => new af(t.readBuf());
class Nu {
  constructor(e) {
    this.len = e;
  }
  getLength() {
    return this.len;
  }
  getContent() {
    return [];
  }
  isCountable() {
    return !1;
  }
  copy() {
    return new Nu(this.len);
  }
  splice(e) {
    const n = new Nu(this.len - e);
    return this.len = e, n;
  }
  mergeWith(e) {
    return this.len += e.len, !0;
  }
  integrate(e, n) {
    Kd(e.deleteSet, n.id.client, n.id.clock, this.len), n.markDeleted();
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeLen(this.len - n);
  }
  getRef() {
    return 1;
  }
}
const tse = (t) => new Nu(t.readLen()), xO = (t, e) => new nl({ guid: t, ...e, shouldLoad: e.shouldLoad || e.autoLoad || !1 });
class cf {
  constructor(e) {
    e._item && console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."), this.doc = e;
    const n = {};
    this.opts = n, e.gc || (n.gc = !1), e.autoLoad && (n.autoLoad = !0), e.meta !== null && (n.meta = e.meta);
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.doc];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new cf(xO(this.doc.guid, this.opts));
  }
  splice(e) {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    this.doc._item = n, e.subdocsAdded.add(this.doc), this.doc.shouldLoad && e.subdocsLoaded.add(this.doc);
  }
  delete(e) {
    e.subdocsAdded.has(this.doc) ? e.subdocsAdded.delete(this.doc) : e.subdocsRemoved.add(this.doc);
  }
  gc(e) {
  }
  write(e, n) {
    e.writeString(this.doc.guid), e.writeAny(this.opts);
  }
  getRef() {
    return 9;
  }
}
const nse = (t) => new cf(xO(t.readString(), t.readAny()));
class Yl {
  constructor(e) {
    this.embed = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.embed];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Yl(this.embed);
  }
  splice(e) {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeJSON(this.embed);
  }
  getRef() {
    return 5;
  }
}
const ise = (t) => new Yl(t.readJSON());
class si {
  constructor(e, n) {
    this.key = e, this.value = n;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [];
  }
  isCountable() {
    return !1;
  }
  copy() {
    return new si(this.key, this.value);
  }
  splice(e) {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    n.parent._searchMarker = null;
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeKey(this.key), e.writeJSON(this.value);
  }
  getRef() {
    return 6;
  }
}
const rse = (t) => new si(t.readKey(), t.readJSON());
class Qd {
  constructor(e) {
    this.arr = e;
  }
  getLength() {
    return this.arr.length;
  }
  getContent() {
    return this.arr;
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Qd(this.arr);
  }
  splice(e) {
    const n = new Qd(this.arr.slice(e));
    return this.arr = this.arr.slice(0, e), n;
  }
  mergeWith(e) {
    return this.arr = this.arr.concat(e.arr), !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    const i = this.arr.length;
    e.writeLen(i - n);
    for (let r = n; r < i; r++) {
      const s = this.arr[r];
      e.writeString(s === void 0 ? "undefined" : JSON.stringify(s));
    }
  }
  getRef() {
    return 2;
  }
}
const sse = (t) => {
  const e = t.readLen(), n = [];
  for (let i = 0; i < e; i++) {
    const r = t.readString();
    r === "undefined" ? n.push(void 0) : n.push(JSON.parse(r));
  }
  return new Qd(n);
};
class Fl {
  constructor(e) {
    this.arr = e;
  }
  getLength() {
    return this.arr.length;
  }
  getContent() {
    return this.arr;
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Fl(this.arr);
  }
  splice(e) {
    const n = new Fl(this.arr.slice(e));
    return this.arr = this.arr.slice(0, e), n;
  }
  mergeWith(e) {
    return this.arr = this.arr.concat(e.arr), !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    const i = this.arr.length;
    e.writeLen(i - n);
    for (let r = n; r < i; r++) {
      const s = this.arr[r];
      e.writeAny(s);
    }
  }
  getRef() {
    return 8;
  }
}
const ose = (t) => {
  const e = t.readLen(), n = [];
  for (let i = 0; i < e; i++)
    n.push(t.readAny());
  return new Fl(n);
};
class Ds {
  constructor(e) {
    this.str = e;
  }
  getLength() {
    return this.str.length;
  }
  getContent() {
    return this.str.split("");
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new Ds(this.str);
  }
  splice(e) {
    const n = new Ds(this.str.slice(e));
    this.str = this.str.slice(0, e);
    const i = this.str.charCodeAt(e - 1);
    return i >= 55296 && i <= 56319 && (this.str = this.str.slice(0, e - 1) + "ï¿½", n.str = "ï¿½" + n.str.slice(1)), n;
  }
  mergeWith(e) {
    return this.str += e.str, !0;
  }
  integrate(e, n) {
  }
  delete(e) {
  }
  gc(e) {
  }
  write(e, n) {
    e.writeString(n === 0 ? this.str : this.str.slice(n));
  }
  getRef() {
    return 4;
  }
}
const lse = (t) => new Ds(t.readString()), ase = [
  Vre,
  Hre,
  Kre,
  Yre,
  Gre,
  Qre,
  Zre
], cse = 0, use = 1, fse = 2, hse = 3, dse = 4, pse = 5, gse = 6;
class ao {
  constructor(e) {
    this.type = e;
  }
  getLength() {
    return 1;
  }
  getContent() {
    return [this.type];
  }
  isCountable() {
    return !0;
  }
  copy() {
    return new ao(this.type._copy());
  }
  splice(e) {
    throw _s();
  }
  mergeWith(e) {
    return !1;
  }
  integrate(e, n) {
    this.type._integrate(e.doc, n);
  }
  delete(e) {
    let n = this.type._start;
    for (; n !== null; )
      n.deleted ? e._mergeStructs.push(n) : n.delete(e), n = n.right;
    this.type._map.forEach((i) => {
      i.deleted ? e._mergeStructs.push(i) : i.delete(e);
    }), e.changed.delete(this.type);
  }
  gc(e) {
    let n = this.type._start;
    for (; n !== null; )
      n.gc(e, !0), n = n.right;
    this.type._start = null, this.type._map.forEach((i) => {
      for (; i !== null; )
        i.gc(e, !0), i = i.left;
    }), this.type._map = /* @__PURE__ */ new Map();
  }
  write(e, n) {
    this.type._write(e);
  }
  getRef() {
    return 7;
  }
}
const mse = (t) => new ao(ase[t.readTypeRef()](t)), Zd = (t, e, n) => {
  const { client: i, clock: r } = e.id, s = new ni(
    It(i, r + n),
    e,
    It(i, r + n - 1),
    e.right,
    e.rightOrigin,
    e.parent,
    e.parentSub,
    e.content.splice(n)
  );
  return e.deleted && s.markDeleted(), e.keep && (s.keep = !0), e.redone !== null && (s.redone = It(e.redone.client, e.redone.clock + n)), e.right = s, s.right !== null && (s.right.left = s), t._mergeStructs.push(s), s.parentSub !== null && s.right === null && s.parent._map.set(s.parentSub, s), e.length = n, s;
};
class ni extends R_ {
  constructor(e, n, i, r, s, o, l, a) {
    super(e, a.getLength()), this.origin = i, this.left = n, this.right = r, this.rightOrigin = s, this.parent = o, this.parentSub = l, this.redone = null, this.content = a, this.info = this.content.isCountable() ? w3 : 0;
  }
  set marker(e) {
    (this.info & bm) > 0 !== e && (this.info ^= bm);
  }
  get marker() {
    return (this.info & bm) > 0;
  }
  get keep() {
    return (this.info & y3) > 0;
  }
  set keep(e) {
    this.keep !== e && (this.info ^= y3);
  }
  get countable() {
    return (this.info & w3) > 0;
  }
  get deleted() {
    return (this.info & mm) > 0;
  }
  set deleted(e) {
    this.deleted !== e && (this.info ^= mm);
  }
  markDeleted() {
    this.info |= mm;
  }
  getMissing(e, n) {
    if (this.origin && this.origin.client !== this.id.client && this.origin.clock >= pi(n, this.origin.client))
      return this.origin.client;
    if (this.rightOrigin && this.rightOrigin.client !== this.id.client && this.rightOrigin.clock >= pi(n, this.rightOrigin.client))
      return this.rightOrigin.client;
    if (this.parent && this.parent.constructor === ka && this.id.client !== this.parent.client && this.parent.clock >= pi(n, this.parent.client))
      return this.parent.client;
    if (this.origin && (this.left = N3(e, n, this.origin), this.origin = this.left.lastId), this.rightOrigin && (this.right = qo(e, this.rightOrigin), this.rightOrigin = this.right.id), (this.left && this.left.constructor === tr || this.right && this.right.constructor === tr) && (this.parent = null), !this.parent)
      this.left && this.left.constructor === ni && (this.parent = this.left.parent, this.parentSub = this.left.parentSub), this.right && this.right.constructor === ni && (this.parent = this.right.parent, this.parentSub = this.right.parentSub);
    else if (this.parent.constructor === ka) {
      const i = km(n, this.parent);
      i.constructor === tr ? this.parent = null : this.parent = i.content.type;
    }
    return null;
  }
  integrate(e, n) {
    if (n > 0 && (this.id.clock += n, this.left = N3(e, e.doc.store, It(this.id.client, this.id.clock - 1)), this.origin = this.left.lastId, this.content = this.content.splice(n), this.length -= n), this.parent) {
      if (!this.left && (!this.right || this.right.left !== null) || this.left && this.left.right !== this.right) {
        let i = this.left, r;
        if (i !== null)
          r = i.right;
        else if (this.parentSub !== null)
          for (r = this.parent._map.get(this.parentSub) || null; r !== null && r.left !== null; )
            r = r.left;
        else
          r = this.parent._start;
        const s = /* @__PURE__ */ new Set(), o = /* @__PURE__ */ new Set();
        for (; r !== null && r !== this.right; ) {
          if (o.add(r), s.add(r), oh(this.origin, r.origin)) {
            if (r.id.client < this.id.client)
              i = r, s.clear();
            else if (oh(this.rightOrigin, r.rightOrigin))
              break;
          } else if (r.origin !== null && o.has(km(e.doc.store, r.origin)))
            s.has(km(e.doc.store, r.origin)) || (i = r, s.clear());
          else
            break;
          r = r.right;
        }
        this.left = i;
      }
      if (this.left !== null) {
        const i = this.left.right;
        this.right = i, this.left.right = this;
      } else {
        let i;
        if (this.parentSub !== null)
          for (i = this.parent._map.get(this.parentSub) || null; i !== null && i.left !== null; )
            i = i.left;
        else
          i = this.parent._start, this.parent._start = this;
        this.right = i;
      }
      this.right !== null ? this.right.left = this : this.parentSub !== null && (this.parent._map.set(this.parentSub, this), this.left !== null && this.left.delete(e)), this.parentSub === null && this.countable && !this.deleted && (this.parent._length += this.length), yO(e.doc.store, this), this.content.integrate(e, this), j3(e, this.parent, this.parentSub), (this.parent._item !== null && this.parent._item.deleted || this.parentSub !== null && this.right !== null) && this.delete(e);
    } else
      new tr(this.id, this.length).integrate(e, 0);
  }
  get next() {
    let e = this.right;
    for (; e !== null && e.deleted; )
      e = e.right;
    return e;
  }
  get prev() {
    let e = this.left;
    for (; e !== null && e.deleted; )
      e = e.left;
    return e;
  }
  get lastId() {
    return this.length === 1 ? this.id : It(this.id.client, this.id.clock + this.length - 1);
  }
  mergeWith(e) {
    if (this.constructor === e.constructor && oh(e.origin, this.lastId) && this.right === e && oh(this.rightOrigin, e.rightOrigin) && this.id.client === e.id.client && this.id.clock + this.length === e.id.clock && this.deleted === e.deleted && this.redone === null && e.redone === null && this.content.constructor === e.content.constructor && this.content.mergeWith(e.content)) {
      const n = this.parent._searchMarker;
      return n && n.forEach((i) => {
        i.p === e && (i.p = this, !this.deleted && this.countable && (i.index -= this.length));
      }), e.keep && (this.keep = !0), this.right = e.right, this.right !== null && (this.right.left = this), this.length += e.length, !0;
    }
    return !1;
  }
  delete(e) {
    if (!this.deleted) {
      const n = this.parent;
      this.countable && this.parentSub === null && (n._length -= this.length), this.markDeleted(), Kd(e.deleteSet, this.id.client, this.id.clock, this.length), j3(e, n, this.parentSub), this.content.delete(e);
    }
  }
  gc(e, n) {
    if (!this.deleted)
      throw Rs();
    this.content.gc(e), n ? Sre(e, this, new tr(this.id, this.length)) : this.content = new Nu(this.length);
  }
  write(e, n) {
    const i = n > 0 ? It(this.id.client, this.id.clock + n - 1) : this.origin, r = this.rightOrigin, s = this.parentSub, o = this.content.getRef() & ig | (i === null ? 0 : sr) | (r === null ? 0 : Ks) | (s === null ? 0 : Ru);
    if (e.writeInfo(o), i !== null && e.writeLeftID(i), r !== null && e.writeRightID(r), i === null && r === null) {
      const l = this.parent;
      if (l._item !== void 0) {
        const a = l._item;
        if (a === null) {
          const c = wre(l);
          e.writeParentInfo(!0), e.writeString(c);
        } else
          e.writeParentInfo(!1), e.writeLeftID(a.id);
      } else
        l.constructor === String ? (e.writeParentInfo(!0), e.writeString(l)) : l.constructor === ka ? (e.writeParentInfo(!1), e.writeLeftID(l)) : Rs();
      s !== null && e.writeString(s);
    }
    this.content.write(e, n);
  }
}
const FO = (t, e) => bse[e & ig](t), bse = [
  () => {
    Rs();
  },
  tse,
  sse,
  ese,
  lse,
  ise,
  rse,
  mse,
  ose,
  nse,
  () => {
    Rs();
  }
], _se = 10;
class fr extends R_ {
  get deleted() {
    return !0;
  }
  delete() {
  }
  mergeWith(e) {
    return this.constructor !== e.constructor ? !1 : (this.length += e.length, !0);
  }
  integrate(e, n) {
    Rs();
  }
  write(e, n) {
    e.writeInfo(_se), st(e.restEncoder, this.length - n);
  }
  getMissing(e, n) {
    return null;
  }
}
const zO = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : {}, VO = "__ $YJS$ __";
zO[VO] === !0 && console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");
zO[VO] = !0;
var b0, _0, yse = function(e) {
  return e();
};
function wse(t, e) {
  if (_0)
    return _0(t, e);
  yse(t);
}
function zl(t, e, n) {
  if (b0)
    return b0.apply(null, arguments);
  throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.");
}
function vse(t) {
  b0 = function(n, i, r) {
    var s = t.createAtom(n);
    return i && i(), s;
  }, _0 = function(n, i) {
    return t.reaction(n, i, {
      fireImmediately: !1
    });
  };
}
var z3 = /* @__PURE__ */ new WeakSet();
function kse(t) {
  if (z3.has(t))
    return t;
  z3.add(t);
  var e, n = /* @__PURE__ */ new Map();
  function i() {
    if (!e) {
      var f = function(d) {
        (d.changes.added.size || d.changes.deleted.size || d.changes.keys.size || d.changes.delta.length) && e.reportChanged();
      };
      e = zl("map", function() {
        t.observe(f);
      }, function() {
        t.unobserve(f);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  function r(f) {
    var h = n.get(f);
    if (!h) {
      var d = function(g) {
        h.reportChanged();
      };
      h = zl(f + "", function() {
        t.observe(d);
      }, function() {
        t.unobserve(d);
      }), n.set(f, h);
    }
    h.reportObserved(t._implicitObserver);
  }
  var s = t.get;
  t.get = function(f) {
    if (typeof f != "number")
      throw new Error("unexpected");
    r(f);
    var h = Reflect.apply(s, this, arguments);
    return h;
  };
  function o(f) {
    var h = t[f];
    t[f] = function() {
      i();
      var d = Reflect.apply(h, this, arguments);
      return d;
    };
  }
  function l(f) {
    var h = t, d = Object.getOwnPropertyDescriptor(h, f);
    if (d || (h = Object.getPrototypeOf(h), d = Object.getOwnPropertyDescriptor(h, f)), d || (h = Object.getPrototypeOf(h), d = Object.getOwnPropertyDescriptor(h, f)), !d)
      throw new Error("property not found");
    var p = d.get;
    d.get = function() {
      this._disableTracking || i();
      var g = Reflect.apply(p, this, arguments);
      return g;
    }, Object.defineProperty(t, f, d);
  }
  function a(f, h) {
    var d = t, p = Object.getOwnPropertyDescriptor(d, f);
    if (p || (d = Object.getPrototypeOf(d), p = Object.getOwnPropertyDescriptor(d, f)), p || (d = Object.getPrototypeOf(d), p = Object.getOwnPropertyDescriptor(d, f)), !p)
      throw new Error("property not found");
    Object.defineProperty(t, h, p);
  }
  o("forEach"), o("toJSON"), o("toArray"), o("slice"), o("map"), a("length", "lengthUntracked"), l("length");
  var c = t.push;
  t.push = function(f) {
    this._disableTracking = !0;
    var h = c.call(this, f);
    return this._disableTracking = !1, h;
  };
  var u = t.slice;
  return t.slice = function(f, h) {
    this._disableTracking = !0;
    var d = u.call(this, f, h);
    return this._disableTracking = !1, d;
  }, t;
}
var V3 = /* @__PURE__ */ new WeakSet();
function Cse(t) {
  if (V3.has(t))
    return t;
  V3.add(t);
  var e;
  function n() {
    if (!e) {
      var s = Array.from(t.share.keys()), o = function(a) {
        var c = Array.from(t.share.keys());
        JSON.stringify(s) !== JSON.stringify(c) && (s = c, e.reportChanged());
      };
      e = zl("map", function() {
        t.on("beforeObserverCalls", o);
      }, function() {
        t.off("beforeObserverCalls", o);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  var i = t.get;
  t.get = function(s) {
    if (typeof s != "string")
      throw new Error("unexpected");
    var o = Reflect.apply(i, this, arguments);
    return hg(o), o;
  };
  function r(s) {
    var o = t[s], l;
    t[s] = function() {
      var a, c = arguments;
      return n(), l && l.removeObservers(), l = wse(function() {
        return a = Reflect.apply(o, t, c), a;
      }, function() {
        return e.reportChanged();
      }), a;
    };
  }
  return r("toJSON"), Object.defineProperty(t, "keys", {
    get: function() {
      return n(), Object.keys(t.share);
    }
  }), t;
}
var U3 = /* @__PURE__ */ new WeakSet();
function Sse(t) {
  if (U3.has(t))
    return t;
  U3.add(t);
  var e, n = /* @__PURE__ */ new Map();
  function i() {
    if (!e) {
      var l = function(c) {
        (c.changes.added.size || c.changes.deleted.size || c.changes.keys.size || c.changes.delta.length) && e.reportChanged();
      };
      e = zl("map", function() {
        t.observe(l);
      }, function() {
        t.unobserve(l);
      });
    }
    e.reportObserved(t._implicitObserver);
  }
  function r(l) {
    var a = n.get(l);
    if (!a) {
      var c = function(f) {
        f.keysChanged.has(l) && (f.changes.added.size || f.changes.deleted.size || f.changes.keys.size || f.changes.delta.length) && a.reportChanged();
      };
      a = zl(l, function() {
        t.observe(c);
      }, function() {
        t.unobserve(c);
      }), n.set(l, a);
    }
    a.reportObserved(t._implicitObserver);
  }
  var s = t.get;
  t.get = function(l) {
    if (typeof l != "string")
      throw new Error("unexpected");
    r(l);
    var a = Reflect.apply(s, this, arguments);
    return a;
  };
  function o(l) {
    var a = t[l];
    t[l] = function() {
      i();
      var c = Reflect.apply(a, this, arguments);
      return c;
    };
  }
  return o("values"), o("entries"), o("keys"), o("forEach"), o("toJSON"), t;
}
var H3 = /* @__PURE__ */ new WeakSet();
function W3(t) {
  if (H3.has(t))
    return t;
  H3.add(t);
  var e, n = function(s) {
    e.reportChanged();
  };
  e = zl("text", function() {
    t.observe(n);
  }, function() {
    t.unobserve(n);
  });
  function i(r) {
    var s = t[r];
    t[r] = function() {
      e.reportObserved(this._implicitObserver);
      var o = Reflect.apply(s, this, arguments);
      return o;
    };
  }
  return i("toString"), i("toJSON"), t;
}
var q3 = /* @__PURE__ */ new WeakSet();
function J3(t) {
  if (q3.has(t))
    return t;
  q3.add(t);
  var e, n = function(o) {
    (o.changes.added.size || o.changes.deleted.size || o.changes.keys.size || o.changes.delta.length) && e.reportChanged();
  };
  e = zl("xml", function() {
    t.observe(n);
  }, function() {
    t.unobserve(n);
  });
  function i(s) {
    var o = t[s];
    t[s] = function() {
      e.reportObserved(this._implicitObserver);
      var l = Reflect.apply(o, this, arguments);
      return l;
    };
  }
  function r(s) {
    var o = t, l = Object.getOwnPropertyDescriptor(o, s);
    if (l || (o = Object.getPrototypeOf(o), l = Object.getOwnPropertyDescriptor(o, s)), l || (o = Object.getPrototypeOf(o), l = Object.getOwnPropertyDescriptor(o, s)), !l)
      throw new Error("property not found");
    var a = l.get;
    l.get = function() {
      e.reportObserved(this._implicitObserver);
      var c = Reflect.apply(a, this, arguments);
      return c;
    }, Object.defineProperty(t, s, l);
  }
  return i("toString"), i("toDOM"), i("toArray"), i("getAttribute"), r("firstChild"), t;
}
function hg(t) {
  return t instanceof xl || t instanceof io ? W3(t) : t instanceof ws ? kse(t) : t instanceof Ps ? Sse(t) : t instanceof nl || Object.prototype.hasOwnProperty.call(t, "autoLoad") ? Cse(t) : t instanceof Is || t instanceof Jo ? J3(t) : t;
}
function K3(t) {
  t.share.forEach(function(e) {
    e.constructor !== Ln && hg(e);
  });
}
function G3(t, e) {
  for (var n = t.length - 1; n >= e; n--) {
    var i = t[n];
    if (!i.deleted) {
      var r;
      if (i instanceof tr)
        continue;
      (r = i.content) == null || r.getContent().forEach(function(s) {
        s instanceof Ln && hg(s);
      });
    }
  }
}
var Y3 = /* @__PURE__ */ new WeakSet();
function Ese(t) {
  Y3.has(t) || (Y3.add(t), hg(t), t.store.clients.forEach(function(e) {
    e && G3(e, 0);
  }), K3(t), t.on("beforeObserverCalls", function(e) {
    K3(t), e.afterState.forEach(function(n, i) {
      var r = e.beforeState.get(i) || 0;
      if (r !== n) {
        var s = e.doc.store.clients.get(i);
        if (!s)
          return;
        var o = Hr(s, r);
        G3(s, o);
      }
    });
  }));
}
var Lu = function(e) {
  this.value = void 0, this.value = e;
};
function Ase(t) {
  return ArrayBuffer.isView(t) ? new Lu(t) : new Lu(Object.freeze(t));
}
function Mse(t) {
  var e = function() {
    var a, c = (a = this[kr]) == null ? void 0 : a.implicitObserver;
    t._implicitObserver = c;
    var u = t.slice.bind(t).apply(t, arguments);
    return u.map(function(f) {
      var h = dg(f, c);
      return c && typeof h == "object" ? Ga(h, c) : h;
    });
  }, n = function(a) {
    return a.map(function(c) {
      var u = P_(c), f = $a(u) || u;
      if (f instanceof Lu && (f = f.value), f instanceof Ln && f.parent)
        throw new Error("Not supported: reassigning object that already occurs in the tree.");
      return f;
    });
  }, i = function() {
    return [].findIndex.apply(e.apply(this), arguments);
  }, r = {
    slice: e,
    unshift: function() {
      return t.unshift(n([].slice.call(arguments))), t.lengthUntracked;
    },
    push: function() {
      return t.push(n([].slice.call(arguments))), t.lengthUntracked;
    },
    insert: t.insert.bind(t),
    toJSON: t.toJSON.bind(t),
    forEach: function() {
      return [].forEach.apply(e.apply(this), arguments);
    },
    every: function() {
      return [].every.apply(e.apply(this), arguments);
    },
    filter: function() {
      return [].filter.apply(e.apply(this), arguments);
    },
    find: function() {
      return [].find.apply(e.apply(this), arguments);
    },
    findIndex: i,
    some: function() {
      return [].some.apply(e.apply(this), arguments);
    },
    includes: function() {
      return [].includes.apply(e.apply(this), arguments);
    },
    map: function() {
      return [].map.apply(e.apply(this), arguments);
    },
    indexOf: function() {
      var a = arguments[0];
      return i.call(this, function(c) {
        return Ise(c, a);
      });
    },
    splice: function() {
      var a = arguments[0] < 0 ? t.length - Math.abs(arguments[0]) : arguments[0], c = arguments[1], u = Array.from(Array.from(arguments).slice(2)), f = e.apply(this, [a, Number.isInteger(c) ? a + c : void 0]);
      return t.doc ? t.doc.transact(function() {
        t.delete(a, c), t.insert(a, n(u));
      }) : (t.delete(a, c), t.insert(a, n(u))), f;
    }
  }, s = [];
  for (var o in r)
    s[o] = r[o];
  return s;
}
function Sc(t) {
  if (typeof t == "string" && t.trim().length) {
    var e = Number(t);
    if (Number.isInteger(e))
      return e;
  }
  return t;
}
function X3(t, e) {
  if (e === void 0 && (e = new ws()), e[ri])
    throw new Error("unexpected");
  var n = Mse(e), i = new Proxy(n, {
    set: function(s, o, l) {
      var a = Sc(o);
      throw typeof a != "number" ? new Error() : new Error("array assignment is not implemented / supported");
    },
    get: function(s, o, l) {
      var a = Sc(o);
      if (a === pg)
        return e;
      if (typeof a == "number") {
        var c;
        if (l && l[kr]) {
          var u;
          c = (u = l[kr]) == null ? void 0 : u.implicitObserver, e._implicitObserver = c;
        }
        var f = e.get(a);
        return f = dg(f, c), f;
      }
      if (a === Symbol.toStringTag)
        return "Array";
      if (a === Symbol.iterator) {
        var h = e.slice();
        return Reflect.get(h, a);
      }
      if (a === "length")
        return e.length;
      var d = Reflect.get(s, a, l);
      return d;
    },
    deleteProperty: function(s, o) {
      var l = Sc(o);
      if (typeof l != "number")
        throw new Error();
      return l < e.lengthUntracked && l >= 0 ? (e.delete(l), !0) : !1;
    },
    has: function(s, o) {
      var l = Sc(o);
      return typeof l != "number" ? Reflect.has(s, l) : l < e.lengthUntracked && l >= 0;
    },
    getOwnPropertyDescriptor: function(s, o) {
      var l = Sc(o);
      if (l === "length")
        return {
          enumerable: !1,
          configurable: !1,
          writable: !0
        };
      if (typeof l == "number" && l >= 0 && l < e.lengthUntracked)
        return {
          enumerable: !0,
          configurable: !0,
          writable: !0
        };
    },
    ownKeys: function(s) {
      for (var o = [], l = 0; l < e.length; l++)
        o.push(l + "");
      return o.push("length"), o;
    }
  });
  return n.push.apply(i, t), i;
}
function Q3(t, e) {
  if (e === void 0 && (e = new Ps()), e[ri])
    throw new Error("unexpected");
  var n = new Proxy({}, {
    set: function(s, o, l) {
      if (typeof o != "string")
        throw new Error();
      var a = P_(l), c = $a(a) || a;
      if (c instanceof Lu && (c = c.value), c instanceof Ln && c.parent)
        throw new Error("Not supported: reassigning object that already occurs in the tree.");
      return e.set(o, c), !0;
    },
    get: function(s, o, l) {
      if (o === pg)
        return e;
      if (typeof o != "string")
        return Reflect.get(s, o);
      var a;
      if (l && l[kr]) {
        var c;
        a = (c = l[kr]) == null ? void 0 : c.implicitObserver, e._implicitObserver = a;
      }
      var u = e.get(o);
      return u = dg(u, a), u;
    },
    deleteProperty: function(s, o) {
      if (typeof o != "string")
        throw new Error();
      return e.has(o) ? (e.delete(o), !0) : !1;
    },
    has: function(s, o) {
      return !!(typeof o == "string" && e.has(o));
    },
    getOwnPropertyDescriptor: function(s, o) {
      if (typeof o == "string" && e.has(o))
        return {
          enumerable: !0,
          configurable: !0
        };
    },
    ownKeys: function(s) {
      return Array.from(e.keys());
    }
  });
  Jc.set(e, n);
  for (var i in t)
    n[i] = t[i];
  return n;
}
function Ose(t) {
  return t instanceof Ln;
}
var Jc = /* @__PURE__ */ new WeakMap();
function dg(t, e) {
  if (Ose(t)) {
    if (t._implicitObserver = e, t instanceof ws || t instanceof Ps) {
      if (!Jc.has(t)) {
        var n = P_(t);
        Jc.set(t, n);
      }
      t = Jc.get(t);
    } else if (t instanceof Jo || t instanceof Is || t instanceof xl || t instanceof Za || t instanceof io)
      l_(t), t.__v_skip = !0;
    else
      throw new Error("unknown YType");
    return t;
  } else {
    if (t === null)
      return null;
    if (typeof t == "object")
      return Ase(t);
  }
  return t;
}
function P_(t) {
  if (t == null)
    return t;
  if (t = $a(t) || t, t instanceof ws)
    return X3([], t);
  if (t instanceof Ps)
    return Q3({}, t);
  if (typeof t == "string")
    return t;
  if (Array.isArray(t))
    return X3(t);
  if (t instanceof Jo || t instanceof Is || t instanceof xl || t instanceof Za)
    return t;
  if (t instanceof io)
    return t;
  if (typeof t == "object")
    return t instanceof Lu ? t : Q3(t);
  if (typeof t == "number" || typeof t == "boolean")
    return t;
  throw new Error("invalid");
}
function Tse(t) {
  for (var e = 0, n = Object.entries(t); e < n.length; e++) {
    var i = n[e], r = i[1];
    if (Array.isArray(r)) {
      if (r.length !== 0)
        throw new Error("Root Array initializer must always be empty array");
    } else if (r && typeof r == "object") {
      if (Object.keys(r).length !== 0 || Object.getPrototypeOf(r) !== Object.prototype)
        throw new Error("Root Object initializer must always be {}");
    } else if (r !== "xml" && r !== "text")
      throw new Error("unknown Root initializer");
  }
}
function Z3(t, e, n) {
  var i = e[n];
  if (!i) {
    n !== "__v_raw" && n !== "__v_isRef" && n !== "__v_isReadonly" && console.warn("property not found on root doc", n);
    return;
  }
  return i === "xml" ? t.getXmlFragment(n) : i === "text" ? t.getText(n) : Array.isArray(i) ? t.getArray(n) : t.getMap(n);
}
function Rse(t, e) {
  if (t[ri])
    throw new Error("unexpected");
  Tse(e);
  var n = new Proxy({}, {
    set: function(r, s, o) {
      throw typeof s != "string" ? new Error() : new Error("cannot set new elements on root doc");
    },
    get: function(r, s, o) {
      if (s === pg)
        return t;
      if (typeof s != "string")
        return Reflect.get(r, s);
      var l;
      if (o && o[kr]) {
        var a;
        l = (a = o[kr]) == null ? void 0 : a.implicitObserver, t._implicitObserver = l;
      }
      if (s === "toJSON") {
        for (var c = 0, u = Object.keys(e); c < u.length; c++) {
          var f = u[c];
          Z3(t, e, f);
        }
        var h = Reflect.get(t, s);
        return h;
      }
      var d = Z3(t, e, s);
      return d = dg(d, l), d;
    },
    deleteProperty: function(r, s) {
      throw new Error("deleteProperty not available for doc");
    },
    has: function(r, s) {
      return !!(typeof s == "string" && t.share.has(s));
    },
    getOwnPropertyDescriptor: function(r, s) {
      if (typeof s == "string" && t.share.has(s) || s === "toJSON")
        return {
          enumerable: !0,
          configurable: !0
        };
    },
    ownKeys: function(r) {
      return Array.from(t.share.keys());
    }
  });
  return Jc.set(t, n), n;
}
vse(Jne);
var pg = Symbol("INTERNAL_SYMBOL");
function Pse(t) {
  var e = $a(t);
  if (!(e instanceof nl))
    throw new Error("store is not a valid syncedStore that maps to a Y.Doc");
  return e;
}
function $a(t) {
  if (!(typeof t != "object" || t === null)) {
    var e = t[pg];
    return e && (l_(e), e.__v_skip = !0), e;
  }
}
function Ise(t, e) {
  if (t === e)
    return !0;
  if (typeof t == "object" && typeof e == "object") {
    var n = $a(t), i = $a(e);
    return !n || !i ? !1 : n === i;
  }
  return !1;
}
function Dse(t, e) {
  return e === void 0 && (e = new nl()), Ese(e), Rse(e, t);
}
const Nse = 1200, Lse = 2500, $d = 3e4, y0 = (t) => {
  if (t.shouldConnect && t.ws === null) {
    const e = new WebSocket(t.url), n = t.binaryType;
    let i = null;
    n && (e.binaryType = n), t.ws = e, t.connecting = !0, t.connected = !1, e.onmessage = (o) => {
      t.lastMessageReceived = no();
      const l = o.data, a = typeof l == "string" ? JSON.parse(l) : l;
      a && a.type === "pong" && (clearTimeout(i), i = setTimeout(s, $d / 2)), t.emit("message", [a, t]);
    };
    const r = (o) => {
      t.ws !== null && (t.ws = null, t.connecting = !1, t.connected ? (t.connected = !1, t.emit("disconnect", [{ type: "disconnect", error: o }, t])) : t.unsuccessfulReconnects++, setTimeout(y0, a_(Xne(t.unsuccessfulReconnects + 1) * Nse, Lse), t)), clearTimeout(i);
    }, s = () => {
      t.ws === e && t.send({
        type: "ping"
      });
    };
    e.onclose = () => r(null), e.onerror = (o) => r(o), e.onopen = () => {
      t.lastMessageReceived = no(), t.connecting = !1, t.connected = !0, t.unsuccessfulReconnects = 0, t.emit("connect", [{ type: "connect" }, t]), i = setTimeout(s, $d / 2);
    };
  }
};
class jse extends ng {
  constructor(e, { binaryType: n } = {}) {
    super(), this.url = e, this.ws = null, this.binaryType = n || null, this.connected = !1, this.connecting = !1, this.unsuccessfulReconnects = 0, this.lastMessageReceived = 0, this.shouldConnect = !0, this._checkInterval = setInterval(() => {
      this.connected && $d < no() - this.lastMessageReceived && this.ws.close();
    }, $d / 2), y0(this);
  }
  send(e) {
    this.ws && this.ws.send(JSON.stringify(e));
  }
  destroy() {
    clearInterval(this._checkInterval), this.disconnect(), super.destroy();
  }
  disconnect() {
    this.shouldConnect = !1, this.ws !== null && this.ws.close();
  }
  connect() {
    this.shouldConnect = !0, !this.connected && this.ws === null && y0(this);
  }
}
const UO = /* @__PURE__ */ new Map();
class Bse {
  constructor(e) {
    this.room = e, this.onmessage = null, sie((n) => n.key === e && this.onmessage !== null && this.onmessage({ data: tO(n.newValue || "") }));
  }
  postMessage(e) {
    KM.setItem(this.room, eO(Aie(e)));
  }
}
const xse = typeof BroadcastChannel > "u" ? Bse : BroadcastChannel, I_ = (t) => Cr(UO, t, () => {
  const e = /* @__PURE__ */ new Set(), n = new xse(t);
  return n.onmessage = (i) => e.forEach((r) => r(i.data, "broadcastchannel")), {
    bc: n,
    subs: e
  };
}), Fse = (t, e) => (I_(t).subs.add(e), e), zse = (t, e) => {
  const n = I_(t), i = n.subs.delete(e);
  return i && n.subs.size === 0 && (n.bc.close(), UO.delete(t)), i;
}, Vse = (t, e, n = null) => {
  const i = I_(t);
  i.bc.postMessage(e), i.subs.forEach((r) => r(e, n));
}, Use = () => {
  let t = !0;
  return (e, n) => {
    if (t) {
      t = !1;
      try {
        e();
      } finally {
        t = !0;
      }
    } else
      n !== void 0 && n();
  };
};
var HO = { exports: {} };
(function(t, e) {
  (function(n) {
    t.exports = n();
  })(function() {
    var n = Math.floor, i = Math.abs, r = Math.pow;
    return function() {
      function s(o, l, a) {
        function c(h, d) {
          if (!l[h]) {
            if (!o[h]) {
              var p = typeof Zf == "function" && Zf;
              if (!d && p)
                return p(h, !0);
              if (u)
                return u(h, !0);
              var g = new Error("Cannot find module '" + h + "'");
              throw g.code = "MODULE_NOT_FOUND", g;
            }
            var m = l[h] = { exports: {} };
            o[h][0].call(m.exports, function(_) {
              var S = o[h][1][_];
              return c(S || _);
            }, m, m.exports, s, o, l, a);
          }
          return l[h].exports;
        }
        for (var u = typeof Zf == "function" && Zf, f = 0; f < a.length; f++)
          c(a[f]);
        return c;
      }
      return s;
    }()({ 1: [function(s, o, l) {
      function a(k) {
        var C = k.length;
        if (0 < C % 4)
          throw new Error("Invalid string. Length must be a multiple of 4");
        var A = k.indexOf("=");
        A === -1 && (A = C);
        var w = A === C ? 0 : 4 - A % 4;
        return [A, w];
      }
      function c(k, C, A) {
        return 3 * (C + A) / 4 - A;
      }
      function u(k) {
        var C, A, w = a(k), M = w[0], N = w[1], T = new m(c(k, M, N)), O = 0, W = 0 < N ? M - 4 : M;
        for (A = 0; A < W; A += 4)
          C = g[k.charCodeAt(A)] << 18 | g[k.charCodeAt(A + 1)] << 12 | g[k.charCodeAt(A + 2)] << 6 | g[k.charCodeAt(A + 3)], T[O++] = 255 & C >> 16, T[O++] = 255 & C >> 8, T[O++] = 255 & C;
        return N === 2 && (C = g[k.charCodeAt(A)] << 2 | g[k.charCodeAt(A + 1)] >> 4, T[O++] = 255 & C), N === 1 && (C = g[k.charCodeAt(A)] << 10 | g[k.charCodeAt(A + 1)] << 4 | g[k.charCodeAt(A + 2)] >> 2, T[O++] = 255 & C >> 8, T[O++] = 255 & C), T;
      }
      function f(k) {
        return p[63 & k >> 18] + p[63 & k >> 12] + p[63 & k >> 6] + p[63 & k];
      }
      function h(k, C, A) {
        for (var w, M = [], N = C; N < A; N += 3)
          w = (16711680 & k[N] << 16) + (65280 & k[N + 1] << 8) + (255 & k[N + 2]), M.push(f(w));
        return M.join("");
      }
      function d(k) {
        for (var C, A = k.length, w = A % 3, M = [], N = 16383, T = 0, O = A - w; T < O; T += N)
          M.push(h(k, T, T + N > O ? O : T + N));
        return w === 1 ? (C = k[A - 1], M.push(p[C >> 2] + p[63 & C << 4] + "==")) : w === 2 && (C = (k[A - 2] << 8) + k[A - 1], M.push(p[C >> 10] + p[63 & C >> 4] + p[63 & C << 2] + "=")), M.join("");
      }
      l.byteLength = function(k) {
        var C = a(k), A = C[0], w = C[1];
        return 3 * (A + w) / 4 - w;
      }, l.toByteArray = u, l.fromByteArray = d;
      for (var p = [], g = [], m = typeof Uint8Array > "u" ? Array : Uint8Array, _ = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", S = 0, v = _.length; S < v; ++S)
        p[S] = _[S], g[_.charCodeAt(S)] = S;
      g[45] = 62, g[95] = 63;
    }, {}], 2: [function() {
    }, {}], 3: [function(s, o, l) {
      (function() {
        (function() {
          var a = String.fromCharCode, c = Math.min;
          function u(y) {
            if (2147483647 < y)
              throw new RangeError('The value "' + y + '" is invalid for option "size"');
            var R = new Uint8Array(y);
            return R.__proto__ = f.prototype, R;
          }
          function f(y, R, B) {
            if (typeof y == "number") {
              if (typeof R == "string")
                throw new TypeError('The "string" argument must be of type string. Received type number');
              return g(y);
            }
            return h(y, R, B);
          }
          function h(y, R, B) {
            if (typeof y == "string")
              return m(y, R);
            if (ArrayBuffer.isView(y))
              return _(y);
            if (y == null)
              throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof y);
            if (ae(y, ArrayBuffer) || y && ae(y.buffer, ArrayBuffer))
              return S(y, R, B);
            if (typeof y == "number")
              throw new TypeError('The "value" argument must not be of type number. Received type number');
            var Q = y.valueOf && y.valueOf();
            if (Q != null && Q !== y)
              return f.from(Q, R, B);
            var G = v(y);
            if (G)
              return G;
            if (typeof Symbol < "u" && Symbol.toPrimitive != null && typeof y[Symbol.toPrimitive] == "function")
              return f.from(y[Symbol.toPrimitive]("string"), R, B);
            throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof y);
          }
          function d(y) {
            if (typeof y != "number")
              throw new TypeError('"size" argument must be of type number');
            if (0 > y)
              throw new RangeError('The value "' + y + '" is invalid for option "size"');
          }
          function p(y, R, B) {
            return d(y), 0 >= y || R === void 0 ? u(y) : typeof B == "string" ? u(y).fill(R, B) : u(y).fill(R);
          }
          function g(y) {
            return d(y), u(0 > y ? 0 : 0 | k(y));
          }
          function m(y, R) {
            if ((typeof R != "string" || R === "") && (R = "utf8"), !f.isEncoding(R))
              throw new TypeError("Unknown encoding: " + R);
            var B = 0 | C(y, R), Q = u(B), G = Q.write(y, R);
            return G !== B && (Q = Q.slice(0, G)), Q;
          }
          function _(y) {
            for (var R = 0 > y.length ? 0 : 0 | k(y.length), B = u(R), Q = 0; Q < R; Q += 1)
              B[Q] = 255 & y[Q];
            return B;
          }
          function S(y, R, B) {
            if (0 > R || y.byteLength < R)
              throw new RangeError('"offset" is outside of buffer bounds');
            if (y.byteLength < R + (B || 0))
              throw new RangeError('"length" is outside of buffer bounds');
            var Q;
            return Q = R === void 0 && B === void 0 ? new Uint8Array(y) : B === void 0 ? new Uint8Array(y, R) : new Uint8Array(y, R, B), Q.__proto__ = f.prototype, Q;
          }
          function v(y) {
            if (f.isBuffer(y)) {
              var R = 0 | k(y.length), B = u(R);
              return B.length === 0 || y.copy(B, 0, 0, R), B;
            }
            return y.length === void 0 ? y.type === "Buffer" && Array.isArray(y.data) ? _(y.data) : void 0 : typeof y.length != "number" || $(y.length) ? u(0) : _(y);
          }
          function k(y) {
            if (y >= 2147483647)
              throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + 2147483647 .toString(16) + " bytes");
            return 0 | y;
          }
          function C(y, R) {
            if (f.isBuffer(y))
              return y.length;
            if (ArrayBuffer.isView(y) || ae(y, ArrayBuffer))
              return y.byteLength;
            if (typeof y != "string")
              throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof y);
            var B = y.length, Q = 2 < arguments.length && arguments[2] === !0;
            if (!Q && B === 0)
              return 0;
            for (var G = !1; ; )
              switch (R) {
                case "ascii":
                case "latin1":
                case "binary":
                  return B;
                case "utf8":
                case "utf-8":
                  return Ne(y).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return 2 * B;
                case "hex":
                  return B >>> 1;
                case "base64":
                  return fe(y).length;
                default:
                  if (G)
                    return Q ? -1 : Ne(y).length;
                  R = ("" + R).toLowerCase(), G = !0;
              }
          }
          function A(y, R, B) {
            var Q = !1;
            if ((R === void 0 || 0 > R) && (R = 0), R > this.length || ((B === void 0 || B > this.length) && (B = this.length), 0 >= B) || (B >>>= 0, R >>>= 0, B <= R))
              return "";
            for (y || (y = "utf8"); ; )
              switch (y) {
                case "hex":
                  return ue(this, R, B);
                case "utf8":
                case "utf-8":
                  return K(this, R, B);
                case "ascii":
                  return D(this, R, B);
                case "latin1":
                case "binary":
                  return X(this, R, B);
                case "base64":
                  return L(this, R, B);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return q(this, R, B);
                default:
                  if (Q)
                    throw new TypeError("Unknown encoding: " + y);
                  y = (y + "").toLowerCase(), Q = !0;
              }
          }
          function w(y, R, B) {
            var Q = y[R];
            y[R] = y[B], y[B] = Q;
          }
          function M(y, R, B, Q, G) {
            if (y.length === 0)
              return -1;
            if (typeof B == "string" ? (Q = B, B = 0) : 2147483647 < B ? B = 2147483647 : -2147483648 > B && (B = -2147483648), B = +B, $(B) && (B = G ? 0 : y.length - 1), 0 > B && (B = y.length + B), B >= y.length) {
              if (G)
                return -1;
              B = y.length - 1;
            } else if (0 > B)
              if (G)
                B = 0;
              else
                return -1;
            if (typeof R == "string" && (R = f.from(R, Q)), f.isBuffer(R))
              return R.length === 0 ? -1 : N(y, R, B, Q, G);
            if (typeof R == "number")
              return R &= 255, typeof Uint8Array.prototype.indexOf == "function" ? G ? Uint8Array.prototype.indexOf.call(y, R, B) : Uint8Array.prototype.lastIndexOf.call(y, R, B) : N(y, [R], B, Q, G);
            throw new TypeError("val must be string, number or Buffer");
          }
          function N(y, R, B, Q, G) {
            function ce(_n, yn) {
              return De === 1 ? _n[yn] : _n.readUInt16BE(yn * De);
            }
            var De = 1, We = y.length, pt = R.length;
            if (Q !== void 0 && (Q = (Q + "").toLowerCase(), Q === "ucs2" || Q === "ucs-2" || Q === "utf16le" || Q === "utf-16le")) {
              if (2 > y.length || 2 > R.length)
                return -1;
              De = 2, We /= 2, pt /= 2, B /= 2;
            }
            var ot;
            if (G) {
              var Be = -1;
              for (ot = B; ot < We; ot++)
                if (ce(y, ot) !== ce(R, Be === -1 ? 0 : ot - Be))
                  Be !== -1 && (ot -= ot - Be), Be = -1;
                else if (Be === -1 && (Be = ot), ot - Be + 1 === pt)
                  return Be * De;
            } else
              for (B + pt > We && (B = We - pt), ot = B; 0 <= ot; ot--) {
                for (var ht = !0, jt = 0; jt < pt; jt++)
                  if (ce(y, ot + jt) !== ce(R, jt)) {
                    ht = !1;
                    break;
                  }
                if (ht)
                  return ot;
              }
            return -1;
          }
          function T(y, R, B, Q) {
            B = +B || 0;
            var G = y.length - B;
            Q ? (Q = +Q, Q > G && (Q = G)) : Q = G;
            var ce = R.length;
            Q > ce / 2 && (Q = ce / 2);
            for (var De, We = 0; We < Q; ++We) {
              if (De = parseInt(R.substr(2 * We, 2), 16), $(De))
                return We;
              y[B + We] = De;
            }
            return We;
          }
          function O(y, R, B, Q) {
            return Pe(Ne(R, y.length - B), y, B, Q);
          }
          function W(y, R, B, Q) {
            return Pe(nt(R), y, B, Q);
          }
          function H(y, R, B, Q) {
            return W(y, R, B, Q);
          }
          function I(y, R, B, Q) {
            return Pe(fe(R), y, B, Q);
          }
          function z(y, R, B, Q) {
            return Pe(ke(R, y.length - B), y, B, Q);
          }
          function L(y, R, B) {
            return R === 0 && B === y.length ? he.fromByteArray(y) : he.fromByteArray(y.slice(R, B));
          }
          function K(y, R, B) {
            B = c(y.length, B);
            for (var Q = [], G = R; G < B; ) {
              var ce = y[G], De = null, We = 239 < ce ? 4 : 223 < ce ? 3 : 191 < ce ? 2 : 1;
              if (G + We <= B) {
                var pt, ot, Be, ht;
                We === 1 ? 128 > ce && (De = ce) : We === 2 ? (pt = y[G + 1], (192 & pt) == 128 && (ht = (31 & ce) << 6 | 63 & pt, 127 < ht && (De = ht))) : We === 3 ? (pt = y[G + 1], ot = y[G + 2], (192 & pt) == 128 && (192 & ot) == 128 && (ht = (15 & ce) << 12 | (63 & pt) << 6 | 63 & ot, 2047 < ht && (55296 > ht || 57343 < ht) && (De = ht))) : We === 4 && (pt = y[G + 1], ot = y[G + 2], Be = y[G + 3], (192 & pt) == 128 && (192 & ot) == 128 && (192 & Be) == 128 && (ht = (15 & ce) << 18 | (63 & pt) << 12 | (63 & ot) << 6 | 63 & Be, 65535 < ht && 1114112 > ht && (De = ht)));
              }
              De === null ? (De = 65533, We = 1) : 65535 < De && (De -= 65536, Q.push(55296 | 1023 & De >>> 10), De = 56320 | 1023 & De), Q.push(De), G += We;
            }
            return F(Q);
          }
          function F(y) {
            var R = y.length;
            if (R <= 4096)
              return a.apply(String, y);
            for (var B = "", Q = 0; Q < R; )
              B += a.apply(String, y.slice(Q, Q += 4096));
            return B;
          }
          function D(y, R, B) {
            var Q = "";
            B = c(y.length, B);
            for (var G = R; G < B; ++G)
              Q += a(127 & y[G]);
            return Q;
          }
          function X(y, R, B) {
            var Q = "";
            B = c(y.length, B);
            for (var G = R; G < B; ++G)
              Q += a(y[G]);
            return Q;
          }
          function ue(y, R, B) {
            var Q = y.length;
            (!R || 0 > R) && (R = 0), (!B || 0 > B || B > Q) && (B = Q);
            for (var G = "", ce = R; ce < B; ++ce)
              G += le(y[ce]);
            return G;
          }
          function q(y, R, B) {
            for (var Q = y.slice(R, B), G = "", ce = 0; ce < Q.length; ce += 2)
              G += a(Q[ce] + 256 * Q[ce + 1]);
            return G;
          }
          function ee(y, R, B) {
            if (y % 1 != 0 || 0 > y)
              throw new RangeError("offset is not uint");
            if (y + R > B)
              throw new RangeError("Trying to access beyond buffer length");
          }
          function ie(y, R, B, Q, G, ce) {
            if (!f.isBuffer(y))
              throw new TypeError('"buffer" argument must be a Buffer instance');
            if (R > G || R < ce)
              throw new RangeError('"value" argument is out of bounds');
            if (B + Q > y.length)
              throw new RangeError("Index out of range");
          }
          function ne(y, R, B, Q) {
            if (B + Q > y.length)
              throw new RangeError("Index out of range");
            if (0 > B)
              throw new RangeError("Index out of range");
          }
          function je(y, R, B, Q, G) {
            return R = +R, B >>>= 0, G || ne(y, R, B, 4), Ce.write(y, R, B, Q, 23, 4), B + 4;
          }
          function Ie(y, R, B, Q, G) {
            return R = +R, B >>>= 0, G || ne(y, R, B, 8), Ce.write(y, R, B, Q, 52, 8), B + 8;
          }
          function Xe(y) {
            if (y = y.split("=")[0], y = y.trim().replace(J, ""), 2 > y.length)
              return "";
            for (; y.length % 4 != 0; )
              y += "=";
            return y;
          }
          function le(y) {
            return 16 > y ? "0" + y.toString(16) : y.toString(16);
          }
          function Ne(y, R) {
            R = R || 1 / 0;
            for (var B, Q = y.length, G = null, ce = [], De = 0; De < Q; ++De) {
              if (B = y.charCodeAt(De), 55295 < B && 57344 > B) {
                if (!G) {
                  if (56319 < B) {
                    -1 < (R -= 3) && ce.push(239, 191, 189);
                    continue;
                  } else if (De + 1 === Q) {
                    -1 < (R -= 3) && ce.push(239, 191, 189);
                    continue;
                  }
                  G = B;
                  continue;
                }
                if (56320 > B) {
                  -1 < (R -= 3) && ce.push(239, 191, 189), G = B;
                  continue;
                }
                B = (G - 55296 << 10 | B - 56320) + 65536;
              } else
                G && -1 < (R -= 3) && ce.push(239, 191, 189);
              if (G = null, 128 > B) {
                if (0 > (R -= 1))
                  break;
                ce.push(B);
              } else if (2048 > B) {
                if (0 > (R -= 2))
                  break;
                ce.push(192 | B >> 6, 128 | 63 & B);
              } else if (65536 > B) {
                if (0 > (R -= 3))
                  break;
                ce.push(224 | B >> 12, 128 | 63 & B >> 6, 128 | 63 & B);
              } else if (1114112 > B) {
                if (0 > (R -= 4))
                  break;
                ce.push(240 | B >> 18, 128 | 63 & B >> 12, 128 | 63 & B >> 6, 128 | 63 & B);
              } else
                throw new Error("Invalid code point");
            }
            return ce;
          }
          function nt(y) {
            for (var R = [], B = 0; B < y.length; ++B)
              R.push(255 & y.charCodeAt(B));
            return R;
          }
          function ke(y, R) {
            for (var B, Q, G, ce = [], De = 0; De < y.length && !(0 > (R -= 2)); ++De)
              B = y.charCodeAt(De), Q = B >> 8, G = B % 256, ce.push(G), ce.push(Q);
            return ce;
          }
          function fe(y) {
            return he.toByteArray(Xe(y));
          }
          function Pe(y, R, B, Q) {
            for (var G = 0; G < Q && !(G + B >= R.length || G >= y.length); ++G)
              R[G + B] = y[G];
            return G;
          }
          function ae(y, R) {
            return y instanceof R || y != null && y.constructor != null && y.constructor.name != null && y.constructor.name === R.name;
          }
          function $(y) {
            return y !== y;
          }
          var he = s("base64-js"), Ce = s("ieee754");
          l.Buffer = f, l.SlowBuffer = function(y) {
            return +y != y && (y = 0), f.alloc(+y);
          }, l.INSPECT_MAX_BYTES = 50, l.kMaxLength = 2147483647, f.TYPED_ARRAY_SUPPORT = function() {
            try {
              var y = new Uint8Array(1);
              return y.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
                return 42;
              } }, y.foo() === 42;
            } catch {
              return !1;
            }
          }(), f.TYPED_ARRAY_SUPPORT || typeof console > "u" || typeof console.error != "function" || console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."), Object.defineProperty(f.prototype, "parent", { enumerable: !0, get: function() {
            return f.isBuffer(this) ? this.buffer : void 0;
          } }), Object.defineProperty(f.prototype, "offset", { enumerable: !0, get: function() {
            return f.isBuffer(this) ? this.byteOffset : void 0;
          } }), typeof Symbol < "u" && Symbol.species != null && f[Symbol.species] === f && Object.defineProperty(f, Symbol.species, { value: null, configurable: !0, enumerable: !1, writable: !1 }), f.poolSize = 8192, f.from = function(y, R, B) {
            return h(y, R, B);
          }, f.prototype.__proto__ = Uint8Array.prototype, f.__proto__ = Uint8Array, f.alloc = function(y, R, B) {
            return p(y, R, B);
          }, f.allocUnsafe = function(y) {
            return g(y);
          }, f.allocUnsafeSlow = function(y) {
            return g(y);
          }, f.isBuffer = function(y) {
            return y != null && y._isBuffer === !0 && y !== f.prototype;
          }, f.compare = function(y, R) {
            if (ae(y, Uint8Array) && (y = f.from(y, y.offset, y.byteLength)), ae(R, Uint8Array) && (R = f.from(R, R.offset, R.byteLength)), !f.isBuffer(y) || !f.isBuffer(R))
              throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');
            if (y === R)
              return 0;
            for (var B = y.length, Q = R.length, G = 0, ce = c(B, Q); G < ce; ++G)
              if (y[G] !== R[G]) {
                B = y[G], Q = R[G];
                break;
              }
            return B < Q ? -1 : Q < B ? 1 : 0;
          }, f.isEncoding = function(y) {
            switch ((y + "").toLowerCase()) {
              case "hex":
              case "utf8":
              case "utf-8":
              case "ascii":
              case "latin1":
              case "binary":
              case "base64":
              case "ucs2":
              case "ucs-2":
              case "utf16le":
              case "utf-16le":
                return !0;
              default:
                return !1;
            }
          }, f.concat = function(y, R) {
            if (!Array.isArray(y))
              throw new TypeError('"list" argument must be an Array of Buffers');
            if (y.length === 0)
              return f.alloc(0);
            var B;
            if (R === void 0)
              for (R = 0, B = 0; B < y.length; ++B)
                R += y[B].length;
            var Q = f.allocUnsafe(R), G = 0;
            for (B = 0; B < y.length; ++B) {
              var ce = y[B];
              if (ae(ce, Uint8Array) && (ce = f.from(ce)), !f.isBuffer(ce))
                throw new TypeError('"list" argument must be an Array of Buffers');
              ce.copy(Q, G), G += ce.length;
            }
            return Q;
          }, f.byteLength = C, f.prototype._isBuffer = !0, f.prototype.swap16 = function() {
            var y = this.length;
            if (y % 2 != 0)
              throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var R = 0; R < y; R += 2)
              w(this, R, R + 1);
            return this;
          }, f.prototype.swap32 = function() {
            var y = this.length;
            if (y % 4 != 0)
              throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var R = 0; R < y; R += 4)
              w(this, R, R + 3), w(this, R + 1, R + 2);
            return this;
          }, f.prototype.swap64 = function() {
            var y = this.length;
            if (y % 8 != 0)
              throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var R = 0; R < y; R += 8)
              w(this, R, R + 7), w(this, R + 1, R + 6), w(this, R + 2, R + 5), w(this, R + 3, R + 4);
            return this;
          }, f.prototype.toString = function() {
            var y = this.length;
            return y === 0 ? "" : arguments.length === 0 ? K(this, 0, y) : A.apply(this, arguments);
          }, f.prototype.toLocaleString = f.prototype.toString, f.prototype.equals = function(y) {
            if (!f.isBuffer(y))
              throw new TypeError("Argument must be a Buffer");
            return this === y || f.compare(this, y) === 0;
          }, f.prototype.inspect = function() {
            var y = "", R = l.INSPECT_MAX_BYTES;
            return y = this.toString("hex", 0, R).replace(/(.{2})/g, "$1 ").trim(), this.length > R && (y += " ... "), "<Buffer " + y + ">";
          }, f.prototype.compare = function(y, R, B, Q, G) {
            if (ae(y, Uint8Array) && (y = f.from(y, y.offset, y.byteLength)), !f.isBuffer(y))
              throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof y);
            if (R === void 0 && (R = 0), B === void 0 && (B = y ? y.length : 0), Q === void 0 && (Q = 0), G === void 0 && (G = this.length), 0 > R || B > y.length || 0 > Q || G > this.length)
              throw new RangeError("out of range index");
            if (Q >= G && R >= B)
              return 0;
            if (Q >= G)
              return -1;
            if (R >= B)
              return 1;
            if (R >>>= 0, B >>>= 0, Q >>>= 0, G >>>= 0, this === y)
              return 0;
            for (var ce = G - Q, De = B - R, We = c(ce, De), pt = this.slice(Q, G), ot = y.slice(R, B), Be = 0; Be < We; ++Be)
              if (pt[Be] !== ot[Be]) {
                ce = pt[Be], De = ot[Be];
                break;
              }
            return ce < De ? -1 : De < ce ? 1 : 0;
          }, f.prototype.includes = function(y, R, B) {
            return this.indexOf(y, R, B) !== -1;
          }, f.prototype.indexOf = function(y, R, B) {
            return M(this, y, R, B, !0);
          }, f.prototype.lastIndexOf = function(y, R, B) {
            return M(this, y, R, B, !1);
          }, f.prototype.write = function(y, R, B, Q) {
            if (R === void 0)
              Q = "utf8", B = this.length, R = 0;
            else if (B === void 0 && typeof R == "string")
              Q = R, B = this.length, R = 0;
            else if (isFinite(R))
              R >>>= 0, isFinite(B) ? (B >>>= 0, Q === void 0 && (Q = "utf8")) : (Q = B, B = void 0);
            else
              throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
            var G = this.length - R;
            if ((B === void 0 || B > G) && (B = G), 0 < y.length && (0 > B || 0 > R) || R > this.length)
              throw new RangeError("Attempt to write outside buffer bounds");
            Q || (Q = "utf8");
            for (var ce = !1; ; )
              switch (Q) {
                case "hex":
                  return T(this, y, R, B);
                case "utf8":
                case "utf-8":
                  return O(this, y, R, B);
                case "ascii":
                  return W(this, y, R, B);
                case "latin1":
                case "binary":
                  return H(this, y, R, B);
                case "base64":
                  return I(this, y, R, B);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                  return z(this, y, R, B);
                default:
                  if (ce)
                    throw new TypeError("Unknown encoding: " + Q);
                  Q = ("" + Q).toLowerCase(), ce = !0;
              }
          }, f.prototype.toJSON = function() {
            return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
          }, f.prototype.slice = function(y, R) {
            var B = this.length;
            y = ~~y, R = R === void 0 ? B : ~~R, 0 > y ? (y += B, 0 > y && (y = 0)) : y > B && (y = B), 0 > R ? (R += B, 0 > R && (R = 0)) : R > B && (R = B), R < y && (R = y);
            var Q = this.subarray(y, R);
            return Q.__proto__ = f.prototype, Q;
          }, f.prototype.readUIntLE = function(y, R, B) {
            y >>>= 0, R >>>= 0, B || ee(y, R, this.length);
            for (var Q = this[y], G = 1, ce = 0; ++ce < R && (G *= 256); )
              Q += this[y + ce] * G;
            return Q;
          }, f.prototype.readUIntBE = function(y, R, B) {
            y >>>= 0, R >>>= 0, B || ee(y, R, this.length);
            for (var Q = this[y + --R], G = 1; 0 < R && (G *= 256); )
              Q += this[y + --R] * G;
            return Q;
          }, f.prototype.readUInt8 = function(y, R) {
            return y >>>= 0, R || ee(y, 1, this.length), this[y];
          }, f.prototype.readUInt16LE = function(y, R) {
            return y >>>= 0, R || ee(y, 2, this.length), this[y] | this[y + 1] << 8;
          }, f.prototype.readUInt16BE = function(y, R) {
            return y >>>= 0, R || ee(y, 2, this.length), this[y] << 8 | this[y + 1];
          }, f.prototype.readUInt32LE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), (this[y] | this[y + 1] << 8 | this[y + 2] << 16) + 16777216 * this[y + 3];
          }, f.prototype.readUInt32BE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), 16777216 * this[y] + (this[y + 1] << 16 | this[y + 2] << 8 | this[y + 3]);
          }, f.prototype.readIntLE = function(y, R, B) {
            y >>>= 0, R >>>= 0, B || ee(y, R, this.length);
            for (var Q = this[y], G = 1, ce = 0; ++ce < R && (G *= 256); )
              Q += this[y + ce] * G;
            return G *= 128, Q >= G && (Q -= r(2, 8 * R)), Q;
          }, f.prototype.readIntBE = function(y, R, B) {
            y >>>= 0, R >>>= 0, B || ee(y, R, this.length);
            for (var Q = R, G = 1, ce = this[y + --Q]; 0 < Q && (G *= 256); )
              ce += this[y + --Q] * G;
            return G *= 128, ce >= G && (ce -= r(2, 8 * R)), ce;
          }, f.prototype.readInt8 = function(y, R) {
            return y >>>= 0, R || ee(y, 1, this.length), 128 & this[y] ? -1 * (255 - this[y] + 1) : this[y];
          }, f.prototype.readInt16LE = function(y, R) {
            y >>>= 0, R || ee(y, 2, this.length);
            var B = this[y] | this[y + 1] << 8;
            return 32768 & B ? 4294901760 | B : B;
          }, f.prototype.readInt16BE = function(y, R) {
            y >>>= 0, R || ee(y, 2, this.length);
            var B = this[y + 1] | this[y] << 8;
            return 32768 & B ? 4294901760 | B : B;
          }, f.prototype.readInt32LE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), this[y] | this[y + 1] << 8 | this[y + 2] << 16 | this[y + 3] << 24;
          }, f.prototype.readInt32BE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), this[y] << 24 | this[y + 1] << 16 | this[y + 2] << 8 | this[y + 3];
          }, f.prototype.readFloatLE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), Ce.read(this, y, !0, 23, 4);
          }, f.prototype.readFloatBE = function(y, R) {
            return y >>>= 0, R || ee(y, 4, this.length), Ce.read(this, y, !1, 23, 4);
          }, f.prototype.readDoubleLE = function(y, R) {
            return y >>>= 0, R || ee(y, 8, this.length), Ce.read(this, y, !0, 52, 8);
          }, f.prototype.readDoubleBE = function(y, R) {
            return y >>>= 0, R || ee(y, 8, this.length), Ce.read(this, y, !1, 52, 8);
          }, f.prototype.writeUIntLE = function(y, R, B, Q) {
            if (y = +y, R >>>= 0, B >>>= 0, !Q) {
              var G = r(2, 8 * B) - 1;
              ie(this, y, R, B, G, 0);
            }
            var ce = 1, De = 0;
            for (this[R] = 255 & y; ++De < B && (ce *= 256); )
              this[R + De] = 255 & y / ce;
            return R + B;
          }, f.prototype.writeUIntBE = function(y, R, B, Q) {
            if (y = +y, R >>>= 0, B >>>= 0, !Q) {
              var G = r(2, 8 * B) - 1;
              ie(this, y, R, B, G, 0);
            }
            var ce = B - 1, De = 1;
            for (this[R + ce] = 255 & y; 0 <= --ce && (De *= 256); )
              this[R + ce] = 255 & y / De;
            return R + B;
          }, f.prototype.writeUInt8 = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 1, 255, 0), this[R] = 255 & y, R + 1;
          }, f.prototype.writeUInt16LE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 2, 65535, 0), this[R] = 255 & y, this[R + 1] = y >>> 8, R + 2;
          }, f.prototype.writeUInt16BE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 2, 65535, 0), this[R] = y >>> 8, this[R + 1] = 255 & y, R + 2;
          }, f.prototype.writeUInt32LE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 4, 4294967295, 0), this[R + 3] = y >>> 24, this[R + 2] = y >>> 16, this[R + 1] = y >>> 8, this[R] = 255 & y, R + 4;
          }, f.prototype.writeUInt32BE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 4, 4294967295, 0), this[R] = y >>> 24, this[R + 1] = y >>> 16, this[R + 2] = y >>> 8, this[R + 3] = 255 & y, R + 4;
          }, f.prototype.writeIntLE = function(y, R, B, Q) {
            if (y = +y, R >>>= 0, !Q) {
              var G = r(2, 8 * B - 1);
              ie(this, y, R, B, G - 1, -G);
            }
            var ce = 0, De = 1, We = 0;
            for (this[R] = 255 & y; ++ce < B && (De *= 256); )
              0 > y && We === 0 && this[R + ce - 1] !== 0 && (We = 1), this[R + ce] = 255 & (y / De >> 0) - We;
            return R + B;
          }, f.prototype.writeIntBE = function(y, R, B, Q) {
            if (y = +y, R >>>= 0, !Q) {
              var G = r(2, 8 * B - 1);
              ie(this, y, R, B, G - 1, -G);
            }
            var ce = B - 1, De = 1, We = 0;
            for (this[R + ce] = 255 & y; 0 <= --ce && (De *= 256); )
              0 > y && We === 0 && this[R + ce + 1] !== 0 && (We = 1), this[R + ce] = 255 & (y / De >> 0) - We;
            return R + B;
          }, f.prototype.writeInt8 = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 1, 127, -128), 0 > y && (y = 255 + y + 1), this[R] = 255 & y, R + 1;
          }, f.prototype.writeInt16LE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 2, 32767, -32768), this[R] = 255 & y, this[R + 1] = y >>> 8, R + 2;
          }, f.prototype.writeInt16BE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 2, 32767, -32768), this[R] = y >>> 8, this[R + 1] = 255 & y, R + 2;
          }, f.prototype.writeInt32LE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 4, 2147483647, -2147483648), this[R] = 255 & y, this[R + 1] = y >>> 8, this[R + 2] = y >>> 16, this[R + 3] = y >>> 24, R + 4;
          }, f.prototype.writeInt32BE = function(y, R, B) {
            return y = +y, R >>>= 0, B || ie(this, y, R, 4, 2147483647, -2147483648), 0 > y && (y = 4294967295 + y + 1), this[R] = y >>> 24, this[R + 1] = y >>> 16, this[R + 2] = y >>> 8, this[R + 3] = 255 & y, R + 4;
          }, f.prototype.writeFloatLE = function(y, R, B) {
            return je(this, y, R, !0, B);
          }, f.prototype.writeFloatBE = function(y, R, B) {
            return je(this, y, R, !1, B);
          }, f.prototype.writeDoubleLE = function(y, R, B) {
            return Ie(this, y, R, !0, B);
          }, f.prototype.writeDoubleBE = function(y, R, B) {
            return Ie(this, y, R, !1, B);
          }, f.prototype.copy = function(y, R, B, Q) {
            if (!f.isBuffer(y))
              throw new TypeError("argument should be a Buffer");
            if (B || (B = 0), Q || Q === 0 || (Q = this.length), R >= y.length && (R = y.length), R || (R = 0), 0 < Q && Q < B && (Q = B), Q === B || y.length === 0 || this.length === 0)
              return 0;
            if (0 > R)
              throw new RangeError("targetStart out of bounds");
            if (0 > B || B >= this.length)
              throw new RangeError("Index out of range");
            if (0 > Q)
              throw new RangeError("sourceEnd out of bounds");
            Q > this.length && (Q = this.length), y.length - R < Q - B && (Q = y.length - R + B);
            var G = Q - B;
            if (this === y && typeof Uint8Array.prototype.copyWithin == "function")
              this.copyWithin(R, B, Q);
            else if (this === y && B < R && R < Q)
              for (var ce = G - 1; 0 <= ce; --ce)
                y[ce + R] = this[ce + B];
            else
              Uint8Array.prototype.set.call(y, this.subarray(B, Q), R);
            return G;
          }, f.prototype.fill = function(y, R, B, Q) {
            if (typeof y == "string") {
              if (typeof R == "string" ? (Q = R, R = 0, B = this.length) : typeof B == "string" && (Q = B, B = this.length), Q !== void 0 && typeof Q != "string")
                throw new TypeError("encoding must be a string");
              if (typeof Q == "string" && !f.isEncoding(Q))
                throw new TypeError("Unknown encoding: " + Q);
              if (y.length === 1) {
                var G = y.charCodeAt(0);
                (Q === "utf8" && 128 > G || Q === "latin1") && (y = G);
              }
            } else
              typeof y == "number" && (y &= 255);
            if (0 > R || this.length < R || this.length < B)
              throw new RangeError("Out of range index");
            if (B <= R)
              return this;
            R >>>= 0, B = B === void 0 ? this.length : B >>> 0, y || (y = 0);
            var ce;
            if (typeof y == "number")
              for (ce = R; ce < B; ++ce)
                this[ce] = y;
            else {
              var De = f.isBuffer(y) ? y : f.from(y, Q), We = De.length;
              if (We === 0)
                throw new TypeError('The value "' + y + '" is invalid for argument "value"');
              for (ce = 0; ce < B - R; ++ce)
                this[ce + R] = De[ce % We];
            }
            return this;
          };
          var J = /[^+/0-9A-Za-z-_]/g;
        }).call(this);
      }).call(this, s("buffer").Buffer);
    }, { "base64-js": 1, buffer: 3, ieee754: 9 }], 4: [function(s, o, l) {
      (function(a) {
        (function() {
          function c() {
            let f;
            try {
              f = l.storage.getItem("debug");
            } catch {
            }
            return !f && typeof a < "u" && "env" in a && (f = a.env.DEBUG), f;
          }
          l.formatArgs = function(f) {
            if (f[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + f[0] + (this.useColors ? "%c " : " ") + "+" + o.exports.humanize(this.diff), !this.useColors)
              return;
            const h = "color: " + this.color;
            f.splice(1, 0, h, "color: inherit");
            let d = 0, p = 0;
            f[0].replace(/%[a-zA-Z%]/g, (g) => {
              g === "%%" || (d++, g === "%c" && (p = d));
            }), f.splice(p, 0, h);
          }, l.save = function(f) {
            try {
              f ? l.storage.setItem("debug", f) : l.storage.removeItem("debug");
            } catch {
            }
          }, l.load = c, l.useColors = function() {
            return !!(typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs)) || !(typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && (typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && 31 <= parseInt(RegExp.$1, 10) || typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
          }, l.storage = function() {
            try {
              return localStorage;
            } catch {
            }
          }(), l.destroy = (() => {
            let f = !1;
            return () => {
              f || (f = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
            };
          })(), l.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"], l.log = console.debug || console.log || (() => {
          }), o.exports = s("./common")(l);
          const { formatters: u } = o.exports;
          u.j = function(f) {
            try {
              return JSON.stringify(f);
            } catch (h) {
              return "[UnexpectedJSONParseError]: " + h.message;
            }
          };
        }).call(this);
      }).call(this, s("_process"));
    }, { "./common": 5, _process: 12 }], 5: [function(s, o) {
      o.exports = function(l) {
        function a(f) {
          function h(...g) {
            if (!h.enabled)
              return;
            const m = h, _ = +new Date(), S = _ - (d || _);
            m.diff = S, m.prev = d, m.curr = _, d = _, g[0] = a.coerce(g[0]), typeof g[0] != "string" && g.unshift("%O");
            let v = 0;
            g[0] = g[0].replace(/%([a-zA-Z%])/g, (C, A) => {
              if (C === "%%")
                return "%";
              v++;
              const w = a.formatters[A];
              if (typeof w == "function") {
                const M = g[v];
                C = w.call(m, M), g.splice(v, 1), v--;
              }
              return C;
            }), a.formatArgs.call(m, g), (m.log || a.log).apply(m, g);
          }
          let d, p = null;
          return h.namespace = f, h.useColors = a.useColors(), h.color = a.selectColor(f), h.extend = c, h.destroy = a.destroy, Object.defineProperty(h, "enabled", { enumerable: !0, configurable: !1, get: () => p === null ? a.enabled(f) : p, set: (g) => {
            p = g;
          } }), typeof a.init == "function" && a.init(h), h;
        }
        function c(f, h) {
          const d = a(this.namespace + (typeof h > "u" ? ":" : h) + f);
          return d.log = this.log, d;
        }
        function u(f) {
          return f.toString().substring(2, f.toString().length - 2).replace(/\.\*\?$/, "*");
        }
        return a.debug = a, a.default = a, a.coerce = function(f) {
          return f instanceof Error ? f.stack || f.message : f;
        }, a.disable = function() {
          const f = [...a.names.map(u), ...a.skips.map(u).map((h) => "-" + h)].join(",");
          return a.enable(""), f;
        }, a.enable = function(f) {
          a.save(f), a.names = [], a.skips = [];
          let h;
          const d = (typeof f == "string" ? f : "").split(/[\s,]+/), p = d.length;
          for (h = 0; h < p; h++)
            d[h] && (f = d[h].replace(/\*/g, ".*?"), f[0] === "-" ? a.skips.push(new RegExp("^" + f.substr(1) + "$")) : a.names.push(new RegExp("^" + f + "$")));
        }, a.enabled = function(f) {
          if (f[f.length - 1] === "*")
            return !0;
          let h, d;
          for (h = 0, d = a.skips.length; h < d; h++)
            if (a.skips[h].test(f))
              return !1;
          for (h = 0, d = a.names.length; h < d; h++)
            if (a.names[h].test(f))
              return !0;
          return !1;
        }, a.humanize = s("ms"), a.destroy = function() {
          console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
        }, Object.keys(l).forEach((f) => {
          a[f] = l[f];
        }), a.names = [], a.skips = [], a.formatters = {}, a.selectColor = function(f) {
          let h = 0;
          for (let d = 0; d < f.length; d++)
            h = (h << 5) - h + f.charCodeAt(d), h |= 0;
          return a.colors[i(h) % a.colors.length];
        }, a.enable(a.load()), a;
      };
    }, { ms: 11 }], 6: [function(s, o) {
      function l(a, c) {
        for (const u in c)
          Object.defineProperty(a, u, { value: c[u], enumerable: !0, configurable: !0 });
        return a;
      }
      o.exports = function(a, c, u) {
        if (!a || typeof a == "string")
          throw new TypeError("Please pass an Error to err-code");
        u || (u = {}), typeof c == "object" && (u = c, c = ""), c && (u.code = c);
        try {
          return l(a, u);
        } catch {
          u.message = a.message, u.stack = a.stack;
          const h = function() {
          };
          return h.prototype = Object.create(Object.getPrototypeOf(a)), l(new h(), u);
        }
      };
    }, {}], 7: [function(s, o) {
      function l(T) {
        console && console.warn && console.warn(T);
      }
      function a() {
        a.init.call(this);
      }
      function c(T) {
        if (typeof T != "function")
          throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof T);
      }
      function u(T) {
        return T._maxListeners === void 0 ? a.defaultMaxListeners : T._maxListeners;
      }
      function f(T, O, W, H) {
        var I, z, L;
        if (c(W), z = T._events, z === void 0 ? (z = T._events = /* @__PURE__ */ Object.create(null), T._eventsCount = 0) : (z.newListener !== void 0 && (T.emit("newListener", O, W.listener ? W.listener : W), z = T._events), L = z[O]), L === void 0)
          L = z[O] = W, ++T._eventsCount;
        else if (typeof L == "function" ? L = z[O] = H ? [W, L] : [L, W] : H ? L.unshift(W) : L.push(W), I = u(T), 0 < I && L.length > I && !L.warned) {
          L.warned = !0;
          var K = new Error("Possible EventEmitter memory leak detected. " + L.length + " " + (O + " listeners added. Use emitter.setMaxListeners() to increase limit"));
          K.name = "MaxListenersExceededWarning", K.emitter = T, K.type = O, K.count = L.length, l(K);
        }
        return T;
      }
      function h() {
        if (!this.fired)
          return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments);
      }
      function d(T, O, W) {
        var H = { fired: !1, wrapFn: void 0, target: T, type: O, listener: W }, I = h.bind(H);
        return I.listener = W, H.wrapFn = I, I;
      }
      function p(T, O, W) {
        var H = T._events;
        if (H === void 0)
          return [];
        var I = H[O];
        return I === void 0 ? [] : typeof I == "function" ? W ? [I.listener || I] : [I] : W ? S(I) : m(I, I.length);
      }
      function g(T) {
        var O = this._events;
        if (O !== void 0) {
          var W = O[T];
          if (typeof W == "function")
            return 1;
          if (W !== void 0)
            return W.length;
        }
        return 0;
      }
      function m(T, O) {
        for (var W = Array(O), H = 0; H < O; ++H)
          W[H] = T[H];
        return W;
      }
      function _(T, O) {
        for (; O + 1 < T.length; O++)
          T[O] = T[O + 1];
        T.pop();
      }
      function S(T) {
        for (var O = Array(T.length), W = 0; W < O.length; ++W)
          O[W] = T[W].listener || T[W];
        return O;
      }
      function v(T, O, W) {
        typeof T.on == "function" && k(T, "error", O, W);
      }
      function k(T, O, W, H) {
        if (typeof T.on == "function")
          H.once ? T.once(O, W) : T.on(O, W);
        else if (typeof T.addEventListener == "function")
          T.addEventListener(O, function I(z) {
            H.once && T.removeEventListener(O, I), W(z);
          });
        else
          throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof T);
      }
      var C, A = typeof Reflect == "object" ? Reflect : null, w = A && typeof A.apply == "function" ? A.apply : function(T, O, W) {
        return Function.prototype.apply.call(T, O, W);
      };
      C = A && typeof A.ownKeys == "function" ? A.ownKeys : Object.getOwnPropertySymbols ? function(T) {
        return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T));
      } : function(T) {
        return Object.getOwnPropertyNames(T);
      };
      var M = Number.isNaN || function(T) {
        return T !== T;
      };
      o.exports = a, o.exports.once = function(T, O) {
        return new Promise(function(W, H) {
          function I(L) {
            T.removeListener(O, z), H(L);
          }
          function z() {
            typeof T.removeListener == "function" && T.removeListener("error", I), W([].slice.call(arguments));
          }
          k(T, O, z, { once: !0 }), O !== "error" && v(T, I, { once: !0 });
        });
      }, a.EventEmitter = a, a.prototype._events = void 0, a.prototype._eventsCount = 0, a.prototype._maxListeners = void 0;
      var N = 10;
      Object.defineProperty(a, "defaultMaxListeners", { enumerable: !0, get: function() {
        return N;
      }, set: function(T) {
        if (typeof T != "number" || 0 > T || M(T))
          throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + T + ".");
        N = T;
      } }), a.init = function() {
        (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0;
      }, a.prototype.setMaxListeners = function(T) {
        if (typeof T != "number" || 0 > T || M(T))
          throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + T + ".");
        return this._maxListeners = T, this;
      }, a.prototype.getMaxListeners = function() {
        return u(this);
      }, a.prototype.emit = function(T) {
        for (var O = [], W = 1; W < arguments.length; W++)
          O.push(arguments[W]);
        var H = T === "error", I = this._events;
        if (I !== void 0)
          H = H && I.error === void 0;
        else if (!H)
          return !1;
        if (H) {
          var z;
          if (0 < O.length && (z = O[0]), z instanceof Error)
            throw z;
          var L = new Error("Unhandled error." + (z ? " (" + z.message + ")" : ""));
          throw L.context = z, L;
        }
        var K = I[T];
        if (K === void 0)
          return !1;
        if (typeof K == "function")
          w(K, this, O);
        else
          for (var F = K.length, D = m(K, F), W = 0; W < F; ++W)
            w(D[W], this, O);
        return !0;
      }, a.prototype.addListener = function(T, O) {
        return f(this, T, O, !1);
      }, a.prototype.on = a.prototype.addListener, a.prototype.prependListener = function(T, O) {
        return f(this, T, O, !0);
      }, a.prototype.once = function(T, O) {
        return c(O), this.on(T, d(this, T, O)), this;
      }, a.prototype.prependOnceListener = function(T, O) {
        return c(O), this.prependListener(T, d(this, T, O)), this;
      }, a.prototype.removeListener = function(T, O) {
        var W, H, I, z, L;
        if (c(O), H = this._events, H === void 0)
          return this;
        if (W = H[T], W === void 0)
          return this;
        if (W === O || W.listener === O)
          --this._eventsCount == 0 ? this._events = /* @__PURE__ */ Object.create(null) : (delete H[T], H.removeListener && this.emit("removeListener", T, W.listener || O));
        else if (typeof W != "function") {
          for (I = -1, z = W.length - 1; 0 <= z; z--)
            if (W[z] === O || W[z].listener === O) {
              L = W[z].listener, I = z;
              break;
            }
          if (0 > I)
            return this;
          I === 0 ? W.shift() : _(W, I), W.length === 1 && (H[T] = W[0]), H.removeListener !== void 0 && this.emit("removeListener", T, L || O);
        }
        return this;
      }, a.prototype.off = a.prototype.removeListener, a.prototype.removeAllListeners = function(T) {
        var O, W, H;
        if (W = this._events, W === void 0)
          return this;
        if (W.removeListener === void 0)
          return arguments.length === 0 ? (this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0) : W[T] !== void 0 && (--this._eventsCount == 0 ? this._events = /* @__PURE__ */ Object.create(null) : delete W[T]), this;
        if (arguments.length === 0) {
          var I, z = Object.keys(W);
          for (H = 0; H < z.length; ++H)
            I = z[H], I !== "removeListener" && this.removeAllListeners(I);
          return this.removeAllListeners("removeListener"), this._events = /* @__PURE__ */ Object.create(null), this._eventsCount = 0, this;
        }
        if (O = W[T], typeof O == "function")
          this.removeListener(T, O);
        else if (O !== void 0)
          for (H = O.length - 1; 0 <= H; H--)
            this.removeListener(T, O[H]);
        return this;
      }, a.prototype.listeners = function(T) {
        return p(this, T, !0);
      }, a.prototype.rawListeners = function(T) {
        return p(this, T, !1);
      }, a.listenerCount = function(T, O) {
        return typeof T.listenerCount == "function" ? T.listenerCount(O) : g.call(T, O);
      }, a.prototype.listenerCount = g, a.prototype.eventNames = function() {
        return 0 < this._eventsCount ? C(this._events) : [];
      };
    }, {}], 8: [function(s, o) {
      o.exports = function() {
        if (typeof globalThis > "u")
          return null;
        var l = { RTCPeerConnection: globalThis.RTCPeerConnection || globalThis.mozRTCPeerConnection || globalThis.webkitRTCPeerConnection, RTCSessionDescription: globalThis.RTCSessionDescription || globalThis.mozRTCSessionDescription || globalThis.webkitRTCSessionDescription, RTCIceCandidate: globalThis.RTCIceCandidate || globalThis.mozRTCIceCandidate || globalThis.webkitRTCIceCandidate };
        return l.RTCPeerConnection ? l : null;
      };
    }, {}], 9: [function(s, o, l) {
      /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
      l.read = function(a, c, u, f, h) {
        var d, p, g = 8 * h - f - 1, m = (1 << g) - 1, _ = m >> 1, S = -7, v = u ? h - 1 : 0, k = u ? -1 : 1, C = a[c + v];
        for (v += k, d = C & (1 << -S) - 1, C >>= -S, S += g; 0 < S; d = 256 * d + a[c + v], v += k, S -= 8)
          ;
        for (p = d & (1 << -S) - 1, d >>= -S, S += f; 0 < S; p = 256 * p + a[c + v], v += k, S -= 8)
          ;
        if (d === 0)
          d = 1 - _;
        else {
          if (d === m)
            return p ? NaN : (C ? -1 : 1) * (1 / 0);
          p += r(2, f), d -= _;
        }
        return (C ? -1 : 1) * p * r(2, d - f);
      }, l.write = function(a, c, u, f, h, d) {
        var p, g, m, _ = Math.LN2, S = Math.log, v = 8 * d - h - 1, k = (1 << v) - 1, C = k >> 1, A = h === 23 ? r(2, -24) - r(2, -77) : 0, w = f ? 0 : d - 1, M = f ? 1 : -1, N = 0 > c || c === 0 && 0 > 1 / c ? 1 : 0;
        for (c = i(c), isNaN(c) || c === 1 / 0 ? (g = isNaN(c) ? 1 : 0, p = k) : (p = n(S(c) / _), 1 > c * (m = r(2, -p)) && (p--, m *= 2), c += 1 <= p + C ? A / m : A * r(2, 1 - C), 2 <= c * m && (p++, m /= 2), p + C >= k ? (g = 0, p = k) : 1 <= p + C ? (g = (c * m - 1) * r(2, h), p += C) : (g = c * r(2, C - 1) * r(2, h), p = 0)); 8 <= h; a[u + w] = 255 & g, w += M, g /= 256, h -= 8)
          ;
        for (p = p << h | g, v += h; 0 < v; a[u + w] = 255 & p, w += M, p /= 256, v -= 8)
          ;
        a[u + w - M] |= 128 * N;
      };
    }, {}], 10: [function(s, o) {
      o.exports = typeof Object.create == "function" ? function(l, a) {
        a && (l.super_ = a, l.prototype = Object.create(a.prototype, { constructor: { value: l, enumerable: !1, writable: !0, configurable: !0 } }));
      } : function(l, a) {
        if (a) {
          l.super_ = a;
          var c = function() {
          };
          c.prototype = a.prototype, l.prototype = new c(), l.prototype.constructor = l;
        }
      };
    }, {}], 11: [function(s, o) {
      var l = Math.round;
      function a(h) {
        if (h += "", !(100 < h.length)) {
          var d = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);
          if (d) {
            var p = parseFloat(d[1]), g = (d[2] || "ms").toLowerCase();
            return g === "years" || g === "year" || g === "yrs" || g === "yr" || g === "y" ? 315576e5 * p : g === "weeks" || g === "week" || g === "w" ? 6048e5 * p : g === "days" || g === "day" || g === "d" ? 864e5 * p : g === "hours" || g === "hour" || g === "hrs" || g === "hr" || g === "h" ? 36e5 * p : g === "minutes" || g === "minute" || g === "mins" || g === "min" || g === "m" ? 6e4 * p : g === "seconds" || g === "second" || g === "secs" || g === "sec" || g === "s" ? 1e3 * p : g === "milliseconds" || g === "millisecond" || g === "msecs" || g === "msec" || g === "ms" ? p : void 0;
          }
        }
      }
      function c(h) {
        var d = i(h);
        return 864e5 <= d ? l(h / 864e5) + "d" : 36e5 <= d ? l(h / 36e5) + "h" : 6e4 <= d ? l(h / 6e4) + "m" : 1e3 <= d ? l(h / 1e3) + "s" : h + "ms";
      }
      function u(h) {
        var d = i(h);
        return 864e5 <= d ? f(h, d, 864e5, "day") : 36e5 <= d ? f(h, d, 36e5, "hour") : 6e4 <= d ? f(h, d, 6e4, "minute") : 1e3 <= d ? f(h, d, 1e3, "second") : h + " ms";
      }
      function f(h, d, p, g) {
        return l(h / p) + " " + g + (d >= 1.5 * p ? "s" : "");
      }
      o.exports = function(h, d) {
        d = d || {};
        var p = typeof h;
        if (p == "string" && 0 < h.length)
          return a(h);
        if (p === "number" && isFinite(h))
          return d.long ? u(h) : c(h);
        throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(h));
      };
    }, {}], 12: [function(s, o) {
      function l() {
        throw new Error("setTimeout has not been defined");
      }
      function a() {
        throw new Error("clearTimeout has not been defined");
      }
      function c(A) {
        if (g === setTimeout)
          return setTimeout(A, 0);
        if ((g === l || !g) && setTimeout)
          return g = setTimeout, setTimeout(A, 0);
        try {
          return g(A, 0);
        } catch {
          try {
            return g.call(null, A, 0);
          } catch {
            return g.call(this, A, 0);
          }
        }
      }
      function u(A) {
        if (m === clearTimeout)
          return clearTimeout(A);
        if ((m === a || !m) && clearTimeout)
          return m = clearTimeout, clearTimeout(A);
        try {
          return m(A);
        } catch {
          try {
            return m.call(null, A);
          } catch {
            return m.call(this, A);
          }
        }
      }
      function f() {
        k && S && (k = !1, S.length ? v = S.concat(v) : C = -1, v.length && h());
      }
      function h() {
        if (!k) {
          var A = c(f);
          k = !0;
          for (var w = v.length; w; ) {
            for (S = v, v = []; ++C < w; )
              S && S[C].run();
            C = -1, w = v.length;
          }
          S = null, k = !1, u(A);
        }
      }
      function d(A, w) {
        this.fun = A, this.array = w;
      }
      function p() {
      }
      var g, m, _ = o.exports = {};
      (function() {
        try {
          g = typeof setTimeout == "function" ? setTimeout : l;
        } catch {
          g = l;
        }
        try {
          m = typeof clearTimeout == "function" ? clearTimeout : a;
        } catch {
          m = a;
        }
      })();
      var S, v = [], k = !1, C = -1;
      _.nextTick = function(A) {
        var w = Array(arguments.length - 1);
        if (1 < arguments.length)
          for (var M = 1; M < arguments.length; M++)
            w[M - 1] = arguments[M];
        v.push(new d(A, w)), v.length !== 1 || k || c(h);
      }, d.prototype.run = function() {
        this.fun.apply(null, this.array);
      }, _.title = "browser", _.browser = !0, _.env = {}, _.argv = [], _.version = "", _.versions = {}, _.on = p, _.addListener = p, _.once = p, _.off = p, _.removeListener = p, _.removeAllListeners = p, _.emit = p, _.prependListener = p, _.prependOnceListener = p, _.listeners = function() {
        return [];
      }, _.binding = function() {
        throw new Error("process.binding is not supported");
      }, _.cwd = function() {
        return "/";
      }, _.chdir = function() {
        throw new Error("process.chdir is not supported");
      }, _.umask = function() {
        return 0;
      };
    }, {}], 13: [function(s, o) {
      (function(l) {
        (function() {
          /*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
          let a;
          o.exports = typeof queueMicrotask == "function" ? queueMicrotask.bind(typeof window > "u" ? l : window) : (c) => (a || (a = Promise.resolve())).then(c).catch((u) => setTimeout(() => {
            throw u;
          }, 0));
        }).call(this);
      }).call(this, typeof Xr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Xr);
    }, {}], 14: [function(s, o) {
      (function(l, a) {
        (function() {
          var c = s("safe-buffer").Buffer, u = a.crypto || a.msCrypto;
          o.exports = u && u.getRandomValues ? function(f, h) {
            if (f > 4294967295)
              throw new RangeError("requested too many random bytes");
            var d = c.allocUnsafe(f);
            if (0 < f)
              if (65536 < f)
                for (var p = 0; p < f; p += 65536)
                  u.getRandomValues(d.slice(p, p + 65536));
              else
                u.getRandomValues(d);
            return typeof h == "function" ? l.nextTick(function() {
              h(null, d);
            }) : d;
          } : function() {
            throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`);
          };
        }).call(this);
      }).call(this, s("_process"), typeof Xr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Xr);
    }, { _process: 12, "safe-buffer": 30 }], 15: [function(s, o) {
      function l(p, g) {
        p.prototype = Object.create(g.prototype), p.prototype.constructor = p, p.__proto__ = g;
      }
      function a(p, g, m) {
        function _(v, k, C) {
          return typeof g == "string" ? g : g(v, k, C);
        }
        m || (m = Error);
        var S = function(v) {
          function k(C, A, w) {
            return v.call(this, _(C, A, w)) || this;
          }
          return l(k, v), k;
        }(m);
        S.prototype.name = m.name, S.prototype.code = p, d[p] = S;
      }
      function c(p, g) {
        if (Array.isArray(p)) {
          var m = p.length;
          return p = p.map(function(_) {
            return _ + "";
          }), 2 < m ? "one of ".concat(g, " ").concat(p.slice(0, m - 1).join(", "), ", or ") + p[m - 1] : m === 2 ? "one of ".concat(g, " ").concat(p[0], " or ").concat(p[1]) : "of ".concat(g, " ").concat(p[0]);
        }
        return "of ".concat(g, " ").concat(p + "");
      }
      function u(p, g, m) {
        return p.substr(!m || 0 > m ? 0 : +m, g.length) === g;
      }
      function f(p, g, m) {
        return (m === void 0 || m > p.length) && (m = p.length), p.substring(m - g.length, m) === g;
      }
      function h(p, g, m) {
        return typeof m != "number" && (m = 0), !(m + g.length > p.length) && p.indexOf(g, m) !== -1;
      }
      var d = {};
      a("ERR_INVALID_OPT_VALUE", function(p, g) {
        return 'The value "' + g + '" is invalid for option "' + p + '"';
      }, TypeError), a("ERR_INVALID_ARG_TYPE", function(p, g, m) {
        var _;
        typeof g == "string" && u(g, "not ") ? (_ = "must not be", g = g.replace(/^not /, "")) : _ = "must be";
        var S;
        if (f(p, " argument"))
          S = "The ".concat(p, " ").concat(_, " ").concat(c(g, "type"));
        else {
          var v = h(p, ".") ? "property" : "argument";
          S = 'The "'.concat(p, '" ').concat(v, " ").concat(_, " ").concat(c(g, "type"));
        }
        return S += ". Received type ".concat(typeof m), S;
      }, TypeError), a("ERR_STREAM_PUSH_AFTER_EOF", "stream.push() after EOF"), a("ERR_METHOD_NOT_IMPLEMENTED", function(p) {
        return "The " + p + " method is not implemented";
      }), a("ERR_STREAM_PREMATURE_CLOSE", "Premature close"), a("ERR_STREAM_DESTROYED", function(p) {
        return "Cannot call " + p + " after a stream was destroyed";
      }), a("ERR_MULTIPLE_CALLBACK", "Callback called multiple times"), a("ERR_STREAM_CANNOT_PIPE", "Cannot pipe, not readable"), a("ERR_STREAM_WRITE_AFTER_END", "write after end"), a("ERR_STREAM_NULL_VALUES", "May not write null values to stream", TypeError), a("ERR_UNKNOWN_ENCODING", function(p) {
        return "Unknown encoding: " + p;
      }, TypeError), a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT", "stream.unshift() after end event"), o.exports.codes = d;
    }, {}], 16: [function(s, o) {
      (function(l) {
        (function() {
          function a(_) {
            return this instanceof a ? (h.call(this, _), d.call(this, _), this.allowHalfOpen = !0, void (_ && (_.readable === !1 && (this.readable = !1), _.writable === !1 && (this.writable = !1), _.allowHalfOpen === !1 && (this.allowHalfOpen = !1, this.once("end", c))))) : new a(_);
          }
          function c() {
            this._writableState.ended || l.nextTick(u, this);
          }
          function u(_) {
            _.end();
          }
          var f = Object.keys || function(_) {
            var S = [];
            for (var v in _)
              S.push(v);
            return S;
          };
          o.exports = a;
          var h = s("./_stream_readable"), d = s("./_stream_writable");
          s("inherits")(a, h);
          for (var p, g = f(d.prototype), m = 0; m < g.length; m++)
            p = g[m], a.prototype[p] || (a.prototype[p] = d.prototype[p]);
          Object.defineProperty(a.prototype, "writableHighWaterMark", { enumerable: !1, get: function() {
            return this._writableState.highWaterMark;
          } }), Object.defineProperty(a.prototype, "writableBuffer", { enumerable: !1, get: function() {
            return this._writableState && this._writableState.getBuffer();
          } }), Object.defineProperty(a.prototype, "writableLength", { enumerable: !1, get: function() {
            return this._writableState.length;
          } }), Object.defineProperty(a.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._readableState !== void 0 && this._writableState !== void 0 && this._readableState.destroyed && this._writableState.destroyed;
          }, set: function(_) {
            this._readableState === void 0 || this._writableState === void 0 || (this._readableState.destroyed = _, this._writableState.destroyed = _);
          } });
        }).call(this);
      }).call(this, s("_process"));
    }, { "./_stream_readable": 18, "./_stream_writable": 20, _process: 12, inherits: 10 }], 17: [function(s, o) {
      function l(c) {
        return this instanceof l ? void a.call(this, c) : new l(c);
      }
      o.exports = l;
      var a = s("./_stream_transform");
      s("inherits")(l, a), l.prototype._transform = function(c, u, f) {
        f(null, c);
      };
    }, { "./_stream_transform": 19, inherits: 10 }], 18: [function(s, o) {
      (function(l, a) {
        (function() {
          function c(J) {
            return q.from(J);
          }
          function u(J) {
            return q.isBuffer(J) || J instanceof ee;
          }
          function f(J, y, R) {
            return typeof J.prependListener == "function" ? J.prependListener(y, R) : void (J._events && J._events[y] ? Array.isArray(J._events[y]) ? J._events[y].unshift(R) : J._events[y] = [R, J._events[y]] : J.on(y, R));
          }
          function h(J, y, R) {
            F = F || s("./_stream_duplex"), J = J || {}, typeof R != "boolean" && (R = y instanceof F), this.objectMode = !!J.objectMode, R && (this.objectMode = this.objectMode || !!J.readableObjectMode), this.highWaterMark = nt(this, J, "readableHighWaterMark", R), this.buffer = new Xe(), this.length = 0, this.pipes = null, this.pipesCount = 0, this.flowing = null, this.ended = !1, this.endEmitted = !1, this.reading = !1, this.sync = !0, this.needReadable = !1, this.emittedReadable = !1, this.readableListening = !1, this.resumeScheduled = !1, this.paused = !0, this.emitClose = J.emitClose !== !1, this.autoDestroy = !!J.autoDestroy, this.destroyed = !1, this.defaultEncoding = J.defaultEncoding || "utf8", this.awaitDrain = 0, this.readingMore = !1, this.decoder = null, this.encoding = null, J.encoding && (!ne && (ne = s("string_decoder/").StringDecoder), this.decoder = new ne(J.encoding), this.encoding = J.encoding);
          }
          function d(J) {
            if (F = F || s("./_stream_duplex"), !(this instanceof d))
              return new d(J);
            var y = this instanceof F;
            this._readableState = new h(J, this, y), this.readable = !0, J && (typeof J.read == "function" && (this._read = J.read), typeof J.destroy == "function" && (this._destroy = J.destroy)), ue.call(this);
          }
          function p(J, y, R, B, Q) {
            D("readableAddChunk", y);
            var G = J._readableState;
            if (y === null)
              G.reading = !1, v(J, G);
            else {
              var ce;
              if (Q || (ce = m(G, y)), ce)
                he(J, ce);
              else if (!(G.objectMode || y && 0 < y.length))
                B || (G.reading = !1, A(J, G));
              else if (typeof y == "string" || G.objectMode || Object.getPrototypeOf(y) === q.prototype || (y = c(y)), B)
                G.endEmitted ? he(J, new $()) : g(J, G, y, !0);
              else if (G.ended)
                he(J, new Pe());
              else {
                if (G.destroyed)
                  return !1;
                G.reading = !1, G.decoder && !R ? (y = G.decoder.write(y), G.objectMode || y.length !== 0 ? g(J, G, y, !1) : A(J, G)) : g(J, G, y, !1);
              }
            }
            return !G.ended && (G.length < G.highWaterMark || G.length === 0);
          }
          function g(J, y, R, B) {
            y.flowing && y.length === 0 && !y.sync ? (y.awaitDrain = 0, J.emit("data", R)) : (y.length += y.objectMode ? 1 : R.length, B ? y.buffer.unshift(R) : y.buffer.push(R), y.needReadable && k(J)), A(J, y);
          }
          function m(J, y) {
            var R;
            return u(y) || typeof y == "string" || y === void 0 || J.objectMode || (R = new fe("chunk", ["string", "Buffer", "Uint8Array"], y)), R;
          }
          function _(J) {
            return 1073741824 <= J ? J = 1073741824 : (J--, J |= J >>> 1, J |= J >>> 2, J |= J >>> 4, J |= J >>> 8, J |= J >>> 16, J++), J;
          }
          function S(J, y) {
            return 0 >= J || y.length === 0 && y.ended ? 0 : y.objectMode ? 1 : J === J ? (J > y.highWaterMark && (y.highWaterMark = _(J)), J <= y.length ? J : y.ended ? y.length : (y.needReadable = !0, 0)) : y.flowing && y.length ? y.buffer.head.data.length : y.length;
          }
          function v(J, y) {
            if (D("onEofChunk"), !y.ended) {
              if (y.decoder) {
                var R = y.decoder.end();
                R && R.length && (y.buffer.push(R), y.length += y.objectMode ? 1 : R.length);
              }
              y.ended = !0, y.sync ? k(J) : (y.needReadable = !1, !y.emittedReadable && (y.emittedReadable = !0, C(J)));
            }
          }
          function k(J) {
            var y = J._readableState;
            D("emitReadable", y.needReadable, y.emittedReadable), y.needReadable = !1, y.emittedReadable || (D("emitReadable", y.flowing), y.emittedReadable = !0, l.nextTick(C, J));
          }
          function C(J) {
            var y = J._readableState;
            D("emitReadable_", y.destroyed, y.length, y.ended), !y.destroyed && (y.length || y.ended) && (J.emit("readable"), y.emittedReadable = !1), y.needReadable = !y.flowing && !y.ended && y.length <= y.highWaterMark, H(J);
          }
          function A(J, y) {
            y.readingMore || (y.readingMore = !0, l.nextTick(w, J, y));
          }
          function w(J, y) {
            for (; !y.reading && !y.ended && (y.length < y.highWaterMark || y.flowing && y.length === 0); ) {
              var R = y.length;
              if (D("maybeReadMore read 0"), J.read(0), R === y.length)
                break;
            }
            y.readingMore = !1;
          }
          function M(J) {
            return function() {
              var y = J._readableState;
              D("pipeOnDrain", y.awaitDrain), y.awaitDrain && y.awaitDrain--, y.awaitDrain === 0 && X(J, "data") && (y.flowing = !0, H(J));
            };
          }
          function N(J) {
            var y = J._readableState;
            y.readableListening = 0 < J.listenerCount("readable"), y.resumeScheduled && !y.paused ? y.flowing = !0 : 0 < J.listenerCount("data") && J.resume();
          }
          function T(J) {
            D("readable nexttick read 0"), J.read(0);
          }
          function O(J, y) {
            y.resumeScheduled || (y.resumeScheduled = !0, l.nextTick(W, J, y));
          }
          function W(J, y) {
            D("resume", y.reading), y.reading || J.read(0), y.resumeScheduled = !1, J.emit("resume"), H(J), y.flowing && !y.reading && J.read(0);
          }
          function H(J) {
            var y = J._readableState;
            for (D("flow", y.flowing); y.flowing && J.read() !== null; )
              ;
          }
          function I(J, y) {
            if (y.length === 0)
              return null;
            var R;
            return y.objectMode ? R = y.buffer.shift() : !J || J >= y.length ? (R = y.decoder ? y.buffer.join("") : y.buffer.length === 1 ? y.buffer.first() : y.buffer.concat(y.length), y.buffer.clear()) : R = y.buffer.consume(J, y.decoder), R;
          }
          function z(J) {
            var y = J._readableState;
            D("endReadable", y.endEmitted), y.endEmitted || (y.ended = !0, l.nextTick(L, y, J));
          }
          function L(J, y) {
            if (D("endReadableNT", J.endEmitted, J.length), !J.endEmitted && J.length === 0 && (J.endEmitted = !0, y.readable = !1, y.emit("end"), J.autoDestroy)) {
              var R = y._writableState;
              (!R || R.autoDestroy && R.finished) && y.destroy();
            }
          }
          function K(J, y) {
            for (var R = 0, B = J.length; R < B; R++)
              if (J[R] === y)
                return R;
            return -1;
          }
          o.exports = d;
          var F;
          d.ReadableState = h;
          var D;
          s("events").EventEmitter;
          var X = function(J, y) {
            return J.listeners(y).length;
          }, ue = s("./internal/streams/stream"), q = s("buffer").Buffer, ee = a.Uint8Array || function() {
          }, ie = s("util");
          D = ie && ie.debuglog ? ie.debuglog("stream") : function() {
          };
          var ne, je, Ie, Xe = s("./internal/streams/buffer_list"), le = s("./internal/streams/destroy"), Ne = s("./internal/streams/state"), nt = Ne.getHighWaterMark, ke = s("../errors").codes, fe = ke.ERR_INVALID_ARG_TYPE, Pe = ke.ERR_STREAM_PUSH_AFTER_EOF, ae = ke.ERR_METHOD_NOT_IMPLEMENTED, $ = ke.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;
          s("inherits")(d, ue);
          var he = le.errorOrDestroy, Ce = ["error", "close", "destroy", "pause", "resume"];
          Object.defineProperty(d.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._readableState !== void 0 && this._readableState.destroyed;
          }, set: function(J) {
            this._readableState && (this._readableState.destroyed = J);
          } }), d.prototype.destroy = le.destroy, d.prototype._undestroy = le.undestroy, d.prototype._destroy = function(J, y) {
            y(J);
          }, d.prototype.push = function(J, y) {
            var R, B = this._readableState;
            return B.objectMode ? R = !0 : typeof J == "string" && (y = y || B.defaultEncoding, y !== B.encoding && (J = q.from(J, y), y = ""), R = !0), p(this, J, y, !1, R);
          }, d.prototype.unshift = function(J) {
            return p(this, J, null, !0, !1);
          }, d.prototype.isPaused = function() {
            return this._readableState.flowing === !1;
          }, d.prototype.setEncoding = function(J) {
            ne || (ne = s("string_decoder/").StringDecoder);
            var y = new ne(J);
            this._readableState.decoder = y, this._readableState.encoding = this._readableState.decoder.encoding;
            for (var R = this._readableState.buffer.head, B = ""; R !== null; )
              B += y.write(R.data), R = R.next;
            return this._readableState.buffer.clear(), B !== "" && this._readableState.buffer.push(B), this._readableState.length = B.length, this;
          }, d.prototype.read = function(J) {
            D("read", J), J = parseInt(J, 10);
            var y = this._readableState, R = J;
            if (J !== 0 && (y.emittedReadable = !1), J === 0 && y.needReadable && ((y.highWaterMark === 0 ? 0 < y.length : y.length >= y.highWaterMark) || y.ended))
              return D("read: emitReadable", y.length, y.ended), y.length === 0 && y.ended ? z(this) : k(this), null;
            if (J = S(J, y), J === 0 && y.ended)
              return y.length === 0 && z(this), null;
            var B = y.needReadable;
            D("need readable", B), (y.length === 0 || y.length - J < y.highWaterMark) && (B = !0, D("length less than watermark", B)), y.ended || y.reading ? (B = !1, D("reading or ended", B)) : B && (D("do read"), y.reading = !0, y.sync = !0, y.length === 0 && (y.needReadable = !0), this._read(y.highWaterMark), y.sync = !1, !y.reading && (J = S(R, y)));
            var Q;
            return Q = 0 < J ? I(J, y) : null, Q === null ? (y.needReadable = y.length <= y.highWaterMark, J = 0) : (y.length -= J, y.awaitDrain = 0), y.length === 0 && (!y.ended && (y.needReadable = !0), R !== J && y.ended && z(this)), Q !== null && this.emit("data", Q), Q;
          }, d.prototype._read = function() {
            he(this, new ae("_read()"));
          }, d.prototype.pipe = function(J, y) {
            function R(Rt, Ee) {
              D("onunpipe"), Rt === ot && Ee && Ee.hasUnpiped === !1 && (Ee.hasUnpiped = !0, Q());
            }
            function B() {
              D("onend"), J.end();
            }
            function Q() {
              D("cleanup"), J.removeListener("close", De), J.removeListener("finish", We), J.removeListener("drain", _n), J.removeListener("error", ce), J.removeListener("unpipe", R), ot.removeListener("end", B), ot.removeListener("end", pt), ot.removeListener("data", G), yn = !0, Be.awaitDrain && (!J._writableState || J._writableState.needDrain) && _n();
            }
            function G(Rt) {
              D("ondata");
              var Ee = J.write(Rt);
              D("dest.write", Ee), Ee === !1 && ((Be.pipesCount === 1 && Be.pipes === J || 1 < Be.pipesCount && K(Be.pipes, J) !== -1) && !yn && (D("false write response, pause", Be.awaitDrain), Be.awaitDrain++), ot.pause());
            }
            function ce(Rt) {
              D("onerror", Rt), pt(), J.removeListener("error", ce), X(J, "error") === 0 && he(J, Rt);
            }
            function De() {
              J.removeListener("finish", We), pt();
            }
            function We() {
              D("onfinish"), J.removeListener("close", De), pt();
            }
            function pt() {
              D("unpipe"), ot.unpipe(J);
            }
            var ot = this, Be = this._readableState;
            switch (Be.pipesCount) {
              case 0:
                Be.pipes = J;
                break;
              case 1:
                Be.pipes = [Be.pipes, J];
                break;
              default:
                Be.pipes.push(J);
            }
            Be.pipesCount += 1, D("pipe count=%d opts=%j", Be.pipesCount, y);
            var ht = (!y || y.end !== !1) && J !== l.stdout && J !== l.stderr, jt = ht ? B : pt;
            Be.endEmitted ? l.nextTick(jt) : ot.once("end", jt), J.on("unpipe", R);
            var _n = M(ot);
            J.on("drain", _n);
            var yn = !1;
            return ot.on("data", G), f(J, "error", ce), J.once("close", De), J.once("finish", We), J.emit("pipe", ot), Be.flowing || (D("pipe resume"), ot.resume()), J;
          }, d.prototype.unpipe = function(J) {
            var y = this._readableState, R = { hasUnpiped: !1 };
            if (y.pipesCount === 0)
              return this;
            if (y.pipesCount === 1)
              return J && J !== y.pipes ? this : (J || (J = y.pipes), y.pipes = null, y.pipesCount = 0, y.flowing = !1, J && J.emit("unpipe", this, R), this);
            if (!J) {
              var B = y.pipes, Q = y.pipesCount;
              y.pipes = null, y.pipesCount = 0, y.flowing = !1;
              for (var G = 0; G < Q; G++)
                B[G].emit("unpipe", this, { hasUnpiped: !1 });
              return this;
            }
            var ce = K(y.pipes, J);
            return ce === -1 ? this : (y.pipes.splice(ce, 1), y.pipesCount -= 1, y.pipesCount === 1 && (y.pipes = y.pipes[0]), J.emit("unpipe", this, R), this);
          }, d.prototype.on = function(J, y) {
            var R = ue.prototype.on.call(this, J, y), B = this._readableState;
            return J === "data" ? (B.readableListening = 0 < this.listenerCount("readable"), B.flowing !== !1 && this.resume()) : J == "readable" && !B.endEmitted && !B.readableListening && (B.readableListening = B.needReadable = !0, B.flowing = !1, B.emittedReadable = !1, D("on readable", B.length, B.reading), B.length ? k(this) : !B.reading && l.nextTick(T, this)), R;
          }, d.prototype.addListener = d.prototype.on, d.prototype.removeListener = function(J, y) {
            var R = ue.prototype.removeListener.call(this, J, y);
            return J === "readable" && l.nextTick(N, this), R;
          }, d.prototype.removeAllListeners = function(J) {
            var y = ue.prototype.removeAllListeners.apply(this, arguments);
            return (J === "readable" || J === void 0) && l.nextTick(N, this), y;
          }, d.prototype.resume = function() {
            var J = this._readableState;
            return J.flowing || (D("resume"), J.flowing = !J.readableListening, O(this, J)), J.paused = !1, this;
          }, d.prototype.pause = function() {
            return D("call pause flowing=%j", this._readableState.flowing), this._readableState.flowing !== !1 && (D("pause"), this._readableState.flowing = !1, this.emit("pause")), this._readableState.paused = !0, this;
          }, d.prototype.wrap = function(J) {
            var y = this, R = this._readableState, B = !1;
            for (var Q in J.on("end", function() {
              if (D("wrapped end"), R.decoder && !R.ended) {
                var ce = R.decoder.end();
                ce && ce.length && y.push(ce);
              }
              y.push(null);
            }), J.on("data", function(ce) {
              if (D("wrapped data"), R.decoder && (ce = R.decoder.write(ce)), !(R.objectMode && ce == null) && (R.objectMode || ce && ce.length)) {
                var De = y.push(ce);
                De || (B = !0, J.pause());
              }
            }), J)
              this[Q] === void 0 && typeof J[Q] == "function" && (this[Q] = function(ce) {
                return function() {
                  return J[ce].apply(J, arguments);
                };
              }(Q));
            for (var G = 0; G < Ce.length; G++)
              J.on(Ce[G], this.emit.bind(this, Ce[G]));
            return this._read = function(ce) {
              D("wrapped _read", ce), B && (B = !1, J.resume());
            }, this;
          }, typeof Symbol == "function" && (d.prototype[Symbol.asyncIterator] = function() {
            return je === void 0 && (je = s("./internal/streams/async_iterator")), je(this);
          }), Object.defineProperty(d.prototype, "readableHighWaterMark", { enumerable: !1, get: function() {
            return this._readableState.highWaterMark;
          } }), Object.defineProperty(d.prototype, "readableBuffer", { enumerable: !1, get: function() {
            return this._readableState && this._readableState.buffer;
          } }), Object.defineProperty(d.prototype, "readableFlowing", { enumerable: !1, get: function() {
            return this._readableState.flowing;
          }, set: function(J) {
            this._readableState && (this._readableState.flowing = J);
          } }), d._fromList = I, Object.defineProperty(d.prototype, "readableLength", { enumerable: !1, get: function() {
            return this._readableState.length;
          } }), typeof Symbol == "function" && (d.from = function(J, y) {
            return Ie === void 0 && (Ie = s("./internal/streams/from")), Ie(d, J, y);
          });
        }).call(this);
      }).call(this, s("_process"), typeof Xr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Xr);
    }, { "../errors": 15, "./_stream_duplex": 16, "./internal/streams/async_iterator": 21, "./internal/streams/buffer_list": 22, "./internal/streams/destroy": 23, "./internal/streams/from": 25, "./internal/streams/state": 27, "./internal/streams/stream": 28, _process: 12, buffer: 3, events: 7, inherits: 10, "string_decoder/": 31, util: 2 }], 19: [function(s, o) {
      function l(_, S) {
        var v = this._transformState;
        v.transforming = !1;
        var k = v.writecb;
        if (k === null)
          return this.emit("error", new d());
        v.writechunk = null, v.writecb = null, S != null && this.push(S), k(_);
        var C = this._readableState;
        C.reading = !1, (C.needReadable || C.length < C.highWaterMark) && this._read(C.highWaterMark);
      }
      function a(_) {
        return this instanceof a ? (m.call(this, _), this._transformState = { afterTransform: l.bind(this), needTransform: !1, transforming: !1, writecb: null, writechunk: null, writeencoding: null }, this._readableState.needReadable = !0, this._readableState.sync = !1, _ && (typeof _.transform == "function" && (this._transform = _.transform), typeof _.flush == "function" && (this._flush = _.flush)), void this.on("prefinish", c)) : new a(_);
      }
      function c() {
        var _ = this;
        typeof this._flush != "function" || this._readableState.destroyed ? u(this, null, null) : this._flush(function(S, v) {
          u(_, S, v);
        });
      }
      function u(_, S, v) {
        if (S)
          return _.emit("error", S);
        if (v != null && _.push(v), _._writableState.length)
          throw new g();
        if (_._transformState.transforming)
          throw new p();
        return _.push(null);
      }
      o.exports = a;
      var f = s("../errors").codes, h = f.ERR_METHOD_NOT_IMPLEMENTED, d = f.ERR_MULTIPLE_CALLBACK, p = f.ERR_TRANSFORM_ALREADY_TRANSFORMING, g = f.ERR_TRANSFORM_WITH_LENGTH_0, m = s("./_stream_duplex");
      s("inherits")(a, m), a.prototype.push = function(_, S) {
        return this._transformState.needTransform = !1, m.prototype.push.call(this, _, S);
      }, a.prototype._transform = function(_, S, v) {
        v(new h("_transform()"));
      }, a.prototype._write = function(_, S, v) {
        var k = this._transformState;
        if (k.writecb = v, k.writechunk = _, k.writeencoding = S, !k.transforming) {
          var C = this._readableState;
          (k.needTransform || C.needReadable || C.length < C.highWaterMark) && this._read(C.highWaterMark);
        }
      }, a.prototype._read = function() {
        var _ = this._transformState;
        _.writechunk === null || _.transforming ? _.needTransform = !0 : (_.transforming = !0, this._transform(_.writechunk, _.writeencoding, _.afterTransform));
      }, a.prototype._destroy = function(_, S) {
        m.prototype._destroy.call(this, _, function(v) {
          S(v);
        });
      };
    }, { "../errors": 15, "./_stream_duplex": 16, inherits: 10 }], 20: [function(s, o) {
      (function(l, a) {
        (function() {
          function c(ae) {
            var $ = this;
            this.next = null, this.entry = null, this.finish = function() {
              z($, ae);
            };
          }
          function u(ae) {
            return D.from(ae);
          }
          function f(ae) {
            return D.isBuffer(ae) || ae instanceof X;
          }
          function h() {
          }
          function d(ae, $, he) {
            L = L || s("./_stream_duplex"), ae = ae || {}, typeof he != "boolean" && (he = $ instanceof L), this.objectMode = !!ae.objectMode, he && (this.objectMode = this.objectMode || !!ae.writableObjectMode), this.highWaterMark = ee(this, ae, "writableHighWaterMark", he), this.finalCalled = !1, this.needDrain = !1, this.ending = !1, this.ended = !1, this.finished = !1, this.destroyed = !1;
            var Ce = ae.decodeStrings === !1;
            this.decodeStrings = !Ce, this.defaultEncoding = ae.defaultEncoding || "utf8", this.length = 0, this.writing = !1, this.corked = 0, this.sync = !0, this.bufferProcessing = !1, this.onwrite = function(J) {
              A($, J);
            }, this.writecb = null, this.writelen = 0, this.bufferedRequest = null, this.lastBufferedRequest = null, this.pendingcb = 0, this.prefinished = !1, this.errorEmitted = !1, this.emitClose = ae.emitClose !== !1, this.autoDestroy = !!ae.autoDestroy, this.bufferedRequestCount = 0, this.corkedRequestsFree = new c(this);
          }
          function p(ae) {
            L = L || s("./_stream_duplex");
            var $ = this instanceof L;
            return $ || Pe.call(p, this) ? (this._writableState = new d(ae, this, $), this.writable = !0, ae && (typeof ae.write == "function" && (this._write = ae.write), typeof ae.writev == "function" && (this._writev = ae.writev), typeof ae.destroy == "function" && (this._destroy = ae.destroy), typeof ae.final == "function" && (this._final = ae.final)), void F.call(this)) : new p(ae);
          }
          function g(ae, $) {
            var he = new nt();
            fe(ae, he), l.nextTick($, he);
          }
          function m(ae, $, he, Ce) {
            var J;
            return he === null ? J = new Ne() : typeof he != "string" && !$.objectMode && (J = new ne("chunk", ["string", "Buffer"], he)), !J || (fe(ae, J), l.nextTick(Ce, J), !1);
          }
          function _(ae, $, he) {
            return ae.objectMode || ae.decodeStrings === !1 || typeof $ != "string" || ($ = D.from($, he)), $;
          }
          function S(ae, $, he, Ce, J, y) {
            if (!he) {
              var R = _($, Ce, J);
              Ce !== R && (he = !0, J = "buffer", Ce = R);
            }
            var B = $.objectMode ? 1 : Ce.length;
            $.length += B;
            var Q = $.length < $.highWaterMark;
            if (Q || ($.needDrain = !0), $.writing || $.corked) {
              var G = $.lastBufferedRequest;
              $.lastBufferedRequest = { chunk: Ce, encoding: J, isBuf: he, callback: y, next: null }, G ? G.next = $.lastBufferedRequest : $.bufferedRequest = $.lastBufferedRequest, $.bufferedRequestCount += 1;
            } else
              v(ae, $, !1, B, Ce, J, y);
            return Q;
          }
          function v(ae, $, he, Ce, J, y, R) {
            $.writelen = Ce, $.writecb = R, $.writing = !0, $.sync = !0, $.destroyed ? $.onwrite(new le("write")) : he ? ae._writev(J, $.onwrite) : ae._write(J, y, $.onwrite), $.sync = !1;
          }
          function k(ae, $, he, Ce, J) {
            --$.pendingcb, he ? (l.nextTick(J, Ce), l.nextTick(H, ae, $), ae._writableState.errorEmitted = !0, fe(ae, Ce)) : (J(Ce), ae._writableState.errorEmitted = !0, fe(ae, Ce), H(ae, $));
          }
          function C(ae) {
            ae.writing = !1, ae.writecb = null, ae.length -= ae.writelen, ae.writelen = 0;
          }
          function A(ae, $) {
            var he = ae._writableState, Ce = he.sync, J = he.writecb;
            if (typeof J != "function")
              throw new Ie();
            if (C(he), $)
              k(ae, he, Ce, $, J);
            else {
              var y = T(he) || ae.destroyed;
              y || he.corked || he.bufferProcessing || !he.bufferedRequest || N(ae, he), Ce ? l.nextTick(w, ae, he, y, J) : w(ae, he, y, J);
            }
          }
          function w(ae, $, he, Ce) {
            he || M(ae, $), $.pendingcb--, Ce(), H(ae, $);
          }
          function M(ae, $) {
            $.length === 0 && $.needDrain && ($.needDrain = !1, ae.emit("drain"));
          }
          function N(ae, $) {
            $.bufferProcessing = !0;
            var he = $.bufferedRequest;
            if (ae._writev && he && he.next) {
              var Ce = $.bufferedRequestCount, J = Array(Ce), y = $.corkedRequestsFree;
              y.entry = he;
              for (var R = 0, B = !0; he; )
                J[R] = he, he.isBuf || (B = !1), he = he.next, R += 1;
              J.allBuffers = B, v(ae, $, !0, $.length, J, "", y.finish), $.pendingcb++, $.lastBufferedRequest = null, y.next ? ($.corkedRequestsFree = y.next, y.next = null) : $.corkedRequestsFree = new c($), $.bufferedRequestCount = 0;
            } else {
              for (; he; ) {
                var Q = he.chunk, G = he.encoding, ce = he.callback, De = $.objectMode ? 1 : Q.length;
                if (v(ae, $, !1, De, Q, G, ce), he = he.next, $.bufferedRequestCount--, $.writing)
                  break;
              }
              he === null && ($.lastBufferedRequest = null);
            }
            $.bufferedRequest = he, $.bufferProcessing = !1;
          }
          function T(ae) {
            return ae.ending && ae.length === 0 && ae.bufferedRequest === null && !ae.finished && !ae.writing;
          }
          function O(ae, $) {
            ae._final(function(he) {
              $.pendingcb--, he && fe(ae, he), $.prefinished = !0, ae.emit("prefinish"), H(ae, $);
            });
          }
          function W(ae, $) {
            $.prefinished || $.finalCalled || (typeof ae._final != "function" || $.destroyed ? ($.prefinished = !0, ae.emit("prefinish")) : ($.pendingcb++, $.finalCalled = !0, l.nextTick(O, ae, $)));
          }
          function H(ae, $) {
            var he = T($);
            if (he && (W(ae, $), $.pendingcb === 0 && ($.finished = !0, ae.emit("finish"), $.autoDestroy))) {
              var Ce = ae._readableState;
              (!Ce || Ce.autoDestroy && Ce.endEmitted) && ae.destroy();
            }
            return he;
          }
          function I(ae, $, he) {
            $.ending = !0, H(ae, $), he && ($.finished ? l.nextTick(he) : ae.once("finish", he)), $.ended = !0, ae.writable = !1;
          }
          function z(ae, $, he) {
            var Ce = ae.entry;
            for (ae.entry = null; Ce; ) {
              var J = Ce.callback;
              $.pendingcb--, J(he), Ce = Ce.next;
            }
            $.corkedRequestsFree.next = ae;
          }
          o.exports = p;
          var L;
          p.WritableState = d;
          var K = { deprecate: s("util-deprecate") }, F = s("./internal/streams/stream"), D = s("buffer").Buffer, X = a.Uint8Array || function() {
          }, ue = s("./internal/streams/destroy"), q = s("./internal/streams/state"), ee = q.getHighWaterMark, ie = s("../errors").codes, ne = ie.ERR_INVALID_ARG_TYPE, je = ie.ERR_METHOD_NOT_IMPLEMENTED, Ie = ie.ERR_MULTIPLE_CALLBACK, Xe = ie.ERR_STREAM_CANNOT_PIPE, le = ie.ERR_STREAM_DESTROYED, Ne = ie.ERR_STREAM_NULL_VALUES, nt = ie.ERR_STREAM_WRITE_AFTER_END, ke = ie.ERR_UNKNOWN_ENCODING, fe = ue.errorOrDestroy;
          s("inherits")(p, F), d.prototype.getBuffer = function() {
            for (var ae = this.bufferedRequest, $ = []; ae; )
              $.push(ae), ae = ae.next;
            return $;
          }, function() {
            try {
              Object.defineProperty(d.prototype, "buffer", { get: K.deprecate(function() {
                return this.getBuffer();
              }, "_writableState.buffer is deprecated. Use _writableState.getBuffer instead.", "DEP0003") });
            } catch {
            }
          }();
          var Pe;
          typeof Symbol == "function" && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] == "function" ? (Pe = Function.prototype[Symbol.hasInstance], Object.defineProperty(p, Symbol.hasInstance, { value: function(ae) {
            return !!Pe.call(this, ae) || this === p && ae && ae._writableState instanceof d;
          } })) : Pe = function(ae) {
            return ae instanceof this;
          }, p.prototype.pipe = function() {
            fe(this, new Xe());
          }, p.prototype.write = function(ae, $, he) {
            var Ce = this._writableState, J = !1, y = !Ce.objectMode && f(ae);
            return y && !D.isBuffer(ae) && (ae = u(ae)), typeof $ == "function" && (he = $, $ = null), y ? $ = "buffer" : !$ && ($ = Ce.defaultEncoding), typeof he != "function" && (he = h), Ce.ending ? g(this, he) : (y || m(this, Ce, ae, he)) && (Ce.pendingcb++, J = S(this, Ce, y, ae, $, he)), J;
          }, p.prototype.cork = function() {
            this._writableState.corked++;
          }, p.prototype.uncork = function() {
            var ae = this._writableState;
            ae.corked && (ae.corked--, !ae.writing && !ae.corked && !ae.bufferProcessing && ae.bufferedRequest && N(this, ae));
          }, p.prototype.setDefaultEncoding = function(ae) {
            if (typeof ae == "string" && (ae = ae.toLowerCase()), !(-1 < ["hex", "utf8", "utf-8", "ascii", "binary", "base64", "ucs2", "ucs-2", "utf16le", "utf-16le", "raw"].indexOf((ae + "").toLowerCase())))
              throw new ke(ae);
            return this._writableState.defaultEncoding = ae, this;
          }, Object.defineProperty(p.prototype, "writableBuffer", { enumerable: !1, get: function() {
            return this._writableState && this._writableState.getBuffer();
          } }), Object.defineProperty(p.prototype, "writableHighWaterMark", { enumerable: !1, get: function() {
            return this._writableState.highWaterMark;
          } }), p.prototype._write = function(ae, $, he) {
            he(new je("_write()"));
          }, p.prototype._writev = null, p.prototype.end = function(ae, $, he) {
            var Ce = this._writableState;
            return typeof ae == "function" ? (he = ae, ae = null, $ = null) : typeof $ == "function" && (he = $, $ = null), ae != null && this.write(ae, $), Ce.corked && (Ce.corked = 1, this.uncork()), Ce.ending || I(this, Ce, he), this;
          }, Object.defineProperty(p.prototype, "writableLength", { enumerable: !1, get: function() {
            return this._writableState.length;
          } }), Object.defineProperty(p.prototype, "destroyed", { enumerable: !1, get: function() {
            return this._writableState !== void 0 && this._writableState.destroyed;
          }, set: function(ae) {
            this._writableState && (this._writableState.destroyed = ae);
          } }), p.prototype.destroy = ue.destroy, p.prototype._undestroy = ue.undestroy, p.prototype._destroy = function(ae, $) {
            $(ae);
          };
        }).call(this);
      }).call(this, s("_process"), typeof Xr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Xr);
    }, { "../errors": 15, "./_stream_duplex": 16, "./internal/streams/destroy": 23, "./internal/streams/state": 27, "./internal/streams/stream": 28, _process: 12, buffer: 3, inherits: 10, "util-deprecate": 32 }], 21: [function(s, o) {
      (function(l) {
        (function() {
          function a(M, N, T) {
            return N in M ? Object.defineProperty(M, N, { value: T, enumerable: !0, configurable: !0, writable: !0 }) : M[N] = T, M;
          }
          function c(M, N) {
            return { value: M, done: N };
          }
          function u(M) {
            var N = M[g];
            if (N !== null) {
              var T = M[C].read();
              T !== null && (M[v] = null, M[g] = null, M[m] = null, N(c(T, !1)));
            }
          }
          function f(M) {
            l.nextTick(u, M);
          }
          function h(M, N) {
            return function(T, O) {
              M.then(function() {
                return N[S] ? void T(c(void 0, !0)) : void N[k](T, O);
              }, O);
            };
          }
          var d, p = s("./end-of-stream"), g = Symbol("lastResolve"), m = Symbol("lastReject"), _ = Symbol("error"), S = Symbol("ended"), v = Symbol("lastPromise"), k = Symbol("handlePromise"), C = Symbol("stream"), A = Object.getPrototypeOf(function() {
          }), w = Object.setPrototypeOf((d = { get stream() {
            return this[C];
          }, next: function() {
            var M = this, N = this[_];
            if (N !== null)
              return Promise.reject(N);
            if (this[S])
              return Promise.resolve(c(void 0, !0));
            if (this[C].destroyed)
              return new Promise(function(H, I) {
                l.nextTick(function() {
                  M[_] ? I(M[_]) : H(c(void 0, !0));
                });
              });
            var T, O = this[v];
            if (O)
              T = new Promise(h(O, this));
            else {
              var W = this[C].read();
              if (W !== null)
                return Promise.resolve(c(W, !1));
              T = new Promise(this[k]);
            }
            return this[v] = T, T;
          } }, a(d, Symbol.asyncIterator, function() {
            return this;
          }), a(d, "return", function() {
            var M = this;
            return new Promise(function(N, T) {
              M[C].destroy(null, function(O) {
                return O ? void T(O) : void N(c(void 0, !0));
              });
            });
          }), d), A);
          o.exports = function(M) {
            var N, T = Object.create(w, (N = {}, a(N, C, { value: M, writable: !0 }), a(N, g, { value: null, writable: !0 }), a(N, m, { value: null, writable: !0 }), a(N, _, { value: null, writable: !0 }), a(N, S, { value: M._readableState.endEmitted, writable: !0 }), a(N, k, { value: function(O, W) {
              var H = T[C].read();
              H ? (T[v] = null, T[g] = null, T[m] = null, O(c(H, !1))) : (T[g] = O, T[m] = W);
            }, writable: !0 }), N));
            return T[v] = null, p(M, function(O) {
              if (O && O.code !== "ERR_STREAM_PREMATURE_CLOSE") {
                var W = T[m];
                return W !== null && (T[v] = null, T[g] = null, T[m] = null, W(O)), void (T[_] = O);
              }
              var H = T[g];
              H !== null && (T[v] = null, T[g] = null, T[m] = null, H(c(void 0, !0))), T[S] = !0;
            }), M.on("readable", f.bind(null, T)), T;
          };
        }).call(this);
      }).call(this, s("_process"));
    }, { "./end-of-stream": 24, _process: 12 }], 22: [function(s, o) {
      function l(v, k) {
        var C = Object.keys(v);
        if (Object.getOwnPropertySymbols) {
          var A = Object.getOwnPropertySymbols(v);
          k && (A = A.filter(function(w) {
            return Object.getOwnPropertyDescriptor(v, w).enumerable;
          })), C.push.apply(C, A);
        }
        return C;
      }
      function a(v) {
        for (var k, C = 1; C < arguments.length; C++)
          k = arguments[C] == null ? {} : arguments[C], C % 2 ? l(Object(k), !0).forEach(function(A) {
            c(v, A, k[A]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(v, Object.getOwnPropertyDescriptors(k)) : l(Object(k)).forEach(function(A) {
            Object.defineProperty(v, A, Object.getOwnPropertyDescriptor(k, A));
          });
        return v;
      }
      function c(v, k, C) {
        return k in v ? Object.defineProperty(v, k, { value: C, enumerable: !0, configurable: !0, writable: !0 }) : v[k] = C, v;
      }
      function u(v, k) {
        if (!(v instanceof k))
          throw new TypeError("Cannot call a class as a function");
      }
      function f(v, k) {
        for (var C, A = 0; A < k.length; A++)
          C = k[A], C.enumerable = C.enumerable || !1, C.configurable = !0, "value" in C && (C.writable = !0), Object.defineProperty(v, C.key, C);
      }
      function h(v, k, C) {
        return k && f(v.prototype, k), C && f(v, C), v;
      }
      function d(v, k, C) {
        g.prototype.copy.call(v, k, C);
      }
      var p = s("buffer"), g = p.Buffer, m = s("util"), _ = m.inspect, S = _ && _.custom || "inspect";
      o.exports = function() {
        function v() {
          u(this, v), this.head = null, this.tail = null, this.length = 0;
        }
        return h(v, [{ key: "push", value: function(k) {
          var C = { data: k, next: null };
          0 < this.length ? this.tail.next = C : this.head = C, this.tail = C, ++this.length;
        } }, { key: "unshift", value: function(k) {
          var C = { data: k, next: this.head };
          this.length === 0 && (this.tail = C), this.head = C, ++this.length;
        } }, { key: "shift", value: function() {
          if (this.length !== 0) {
            var k = this.head.data;
            return this.head = this.length === 1 ? this.tail = null : this.head.next, --this.length, k;
          }
        } }, { key: "clear", value: function() {
          this.head = this.tail = null, this.length = 0;
        } }, { key: "join", value: function(k) {
          if (this.length === 0)
            return "";
          for (var C = this.head, A = "" + C.data; C = C.next; )
            A += k + C.data;
          return A;
        } }, { key: "concat", value: function(k) {
          if (this.length === 0)
            return g.alloc(0);
          for (var C = g.allocUnsafe(k >>> 0), A = this.head, w = 0; A; )
            d(A.data, C, w), w += A.data.length, A = A.next;
          return C;
        } }, { key: "consume", value: function(k, C) {
          var A;
          return k < this.head.data.length ? (A = this.head.data.slice(0, k), this.head.data = this.head.data.slice(k)) : k === this.head.data.length ? A = this.shift() : A = C ? this._getString(k) : this._getBuffer(k), A;
        } }, { key: "first", value: function() {
          return this.head.data;
        } }, { key: "_getString", value: function(k) {
          var C = this.head, A = 1, w = C.data;
          for (k -= w.length; C = C.next; ) {
            var M = C.data, N = k > M.length ? M.length : k;
            if (w += N === M.length ? M : M.slice(0, k), k -= N, k === 0) {
              N === M.length ? (++A, this.head = C.next ? C.next : this.tail = null) : (this.head = C, C.data = M.slice(N));
              break;
            }
            ++A;
          }
          return this.length -= A, w;
        } }, { key: "_getBuffer", value: function(k) {
          var C = g.allocUnsafe(k), A = this.head, w = 1;
          for (A.data.copy(C), k -= A.data.length; A = A.next; ) {
            var M = A.data, N = k > M.length ? M.length : k;
            if (M.copy(C, C.length - k, 0, N), k -= N, k === 0) {
              N === M.length ? (++w, this.head = A.next ? A.next : this.tail = null) : (this.head = A, A.data = M.slice(N));
              break;
            }
            ++w;
          }
          return this.length -= w, C;
        } }, { key: S, value: function(k, C) {
          return _(this, a({}, C, { depth: 0, customInspect: !1 }));
        } }]), v;
      }();
    }, { buffer: 3, util: 2 }], 23: [function(s, o) {
      (function(l) {
        (function() {
          function a(f, h) {
            u(f, h), c(f);
          }
          function c(f) {
            f._writableState && !f._writableState.emitClose || f._readableState && !f._readableState.emitClose || f.emit("close");
          }
          function u(f, h) {
            f.emit("error", h);
          }
          o.exports = { destroy: function(f, h) {
            var d = this, p = this._readableState && this._readableState.destroyed, g = this._writableState && this._writableState.destroyed;
            return p || g ? (h ? h(f) : f && (this._writableState ? !this._writableState.errorEmitted && (this._writableState.errorEmitted = !0, l.nextTick(u, this, f)) : l.nextTick(u, this, f)), this) : (this._readableState && (this._readableState.destroyed = !0), this._writableState && (this._writableState.destroyed = !0), this._destroy(f || null, function(m) {
              !h && m ? d._writableState ? d._writableState.errorEmitted ? l.nextTick(c, d) : (d._writableState.errorEmitted = !0, l.nextTick(a, d, m)) : l.nextTick(a, d, m) : h ? (l.nextTick(c, d), h(m)) : l.nextTick(c, d);
            }), this);
          }, undestroy: function() {
            this._readableState && (this._readableState.destroyed = !1, this._readableState.reading = !1, this._readableState.ended = !1, this._readableState.endEmitted = !1), this._writableState && (this._writableState.destroyed = !1, this._writableState.ended = !1, this._writableState.ending = !1, this._writableState.finalCalled = !1, this._writableState.prefinished = !1, this._writableState.finished = !1, this._writableState.errorEmitted = !1);
          }, errorOrDestroy: function(f, h) {
            var d = f._readableState, p = f._writableState;
            d && d.autoDestroy || p && p.autoDestroy ? f.destroy(h) : f.emit("error", h);
          } };
        }).call(this);
      }).call(this, s("_process"));
    }, { _process: 12 }], 24: [function(s, o) {
      function l(h) {
        var d = !1;
        return function() {
          if (!d) {
            d = !0;
            for (var p = arguments.length, g = Array(p), m = 0; m < p; m++)
              g[m] = arguments[m];
            h.apply(this, g);
          }
        };
      }
      function a() {
      }
      function c(h) {
        return h.setHeader && typeof h.abort == "function";
      }
      function u(h, d, p) {
        if (typeof d == "function")
          return u(h, null, d);
        d || (d = {}), p = l(p || a);
        var g = d.readable || d.readable !== !1 && h.readable, m = d.writable || d.writable !== !1 && h.writable, _ = function() {
          h.writable || v();
        }, S = h._writableState && h._writableState.finished, v = function() {
          m = !1, S = !0, g || p.call(h);
        }, k = h._readableState && h._readableState.endEmitted, C = function() {
          g = !1, k = !0, m || p.call(h);
        }, A = function(N) {
          p.call(h, N);
        }, w = function() {
          var N;
          return g && !k ? (h._readableState && h._readableState.ended || (N = new f()), p.call(h, N)) : m && !S ? (h._writableState && h._writableState.ended || (N = new f()), p.call(h, N)) : void 0;
        }, M = function() {
          h.req.on("finish", v);
        };
        return c(h) ? (h.on("complete", v), h.on("abort", w), h.req ? M() : h.on("request", M)) : m && !h._writableState && (h.on("end", _), h.on("close", _)), h.on("end", C), h.on("finish", v), d.error !== !1 && h.on("error", A), h.on("close", w), function() {
          h.removeListener("complete", v), h.removeListener("abort", w), h.removeListener("request", M), h.req && h.req.removeListener("finish", v), h.removeListener("end", _), h.removeListener("close", _), h.removeListener("finish", v), h.removeListener("end", C), h.removeListener("error", A), h.removeListener("close", w);
        };
      }
      var f = s("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;
      o.exports = u;
    }, { "../../../errors": 15 }], 25: [function(s, o) {
      o.exports = function() {
        throw new Error("Readable.from is not available in the browser");
      };
    }, {}], 26: [function(s, o) {
      function l(S) {
        var v = !1;
        return function() {
          v || (v = !0, S.apply(void 0, arguments));
        };
      }
      function a(S) {
        if (S)
          throw S;
      }
      function c(S) {
        return S.setHeader && typeof S.abort == "function";
      }
      function u(S, v, k, C) {
        C = l(C);
        var A = !1;
        S.on("close", function() {
          A = !0;
        }), p === void 0 && (p = s("./end-of-stream")), p(S, { readable: v, writable: k }, function(M) {
          return M ? C(M) : (A = !0, void C());
        });
        var w = !1;
        return function(M) {
          if (!A)
            return w ? void 0 : (w = !0, c(S) ? S.abort() : typeof S.destroy == "function" ? S.destroy() : void C(M || new _("pipe")));
        };
      }
      function f(S) {
        S();
      }
      function h(S, v) {
        return S.pipe(v);
      }
      function d(S) {
        return S.length && typeof S[S.length - 1] == "function" ? S.pop() : a;
      }
      var p, g = s("../../../errors").codes, m = g.ERR_MISSING_ARGS, _ = g.ERR_STREAM_DESTROYED;
      o.exports = function() {
        for (var S = arguments.length, v = Array(S), k = 0; k < S; k++)
          v[k] = arguments[k];
        var C = d(v);
        if (Array.isArray(v[0]) && (v = v[0]), 2 > v.length)
          throw new m("streams");
        var A, w = v.map(function(M, N) {
          var T = N < v.length - 1;
          return u(M, T, 0 < N, function(O) {
            A || (A = O), O && w.forEach(f), T || (w.forEach(f), C(A));
          });
        });
        return v.reduce(h);
      };
    }, { "../../../errors": 15, "./end-of-stream": 24 }], 27: [function(s, o) {
      function l(c, u, f) {
        return c.highWaterMark == null ? u ? c[f] : null : c.highWaterMark;
      }
      var a = s("../../../errors").codes.ERR_INVALID_OPT_VALUE;
      o.exports = { getHighWaterMark: function(c, u, f, h) {
        var d = l(u, h, f);
        if (d != null) {
          if (!(isFinite(d) && n(d) === d) || 0 > d) {
            var p = h ? f : "highWaterMark";
            throw new a(p, d);
          }
          return n(d);
        }
        return c.objectMode ? 16 : 16384;
      } };
    }, { "../../../errors": 15 }], 28: [function(s, o) {
      o.exports = s("events").EventEmitter;
    }, { events: 7 }], 29: [function(s, o, l) {
      l = o.exports = s("./lib/_stream_readable.js"), l.Stream = l, l.Readable = l, l.Writable = s("./lib/_stream_writable.js"), l.Duplex = s("./lib/_stream_duplex.js"), l.Transform = s("./lib/_stream_transform.js"), l.PassThrough = s("./lib/_stream_passthrough.js"), l.finished = s("./lib/internal/streams/end-of-stream.js"), l.pipeline = s("./lib/internal/streams/pipeline.js");
    }, { "./lib/_stream_duplex.js": 16, "./lib/_stream_passthrough.js": 17, "./lib/_stream_readable.js": 18, "./lib/_stream_transform.js": 19, "./lib/_stream_writable.js": 20, "./lib/internal/streams/end-of-stream.js": 24, "./lib/internal/streams/pipeline.js": 26 }], 30: [function(s, o, l) {
      function a(h, d) {
        for (var p in h)
          d[p] = h[p];
      }
      function c(h, d, p) {
        return f(h, d, p);
      }
      /*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
      var u = s("buffer"), f = u.Buffer;
      f.from && f.alloc && f.allocUnsafe && f.allocUnsafeSlow ? o.exports = u : (a(u, l), l.Buffer = c), c.prototype = Object.create(f.prototype), a(f, c), c.from = function(h, d, p) {
        if (typeof h == "number")
          throw new TypeError("Argument must not be a number");
        return f(h, d, p);
      }, c.alloc = function(h, d, p) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        var g = f(h);
        return d === void 0 ? g.fill(0) : typeof p == "string" ? g.fill(d, p) : g.fill(d), g;
      }, c.allocUnsafe = function(h) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        return f(h);
      }, c.allocUnsafeSlow = function(h) {
        if (typeof h != "number")
          throw new TypeError("Argument must be a number");
        return u.SlowBuffer(h);
      };
    }, { buffer: 3 }], 31: [function(s, o, l) {
      function a(w) {
        if (!w)
          return "utf8";
        for (var M; ; )
          switch (w) {
            case "utf8":
            case "utf-8":
              return "utf8";
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
              return "utf16le";
            case "latin1":
            case "binary":
              return "latin1";
            case "base64":
            case "ascii":
            case "hex":
              return w;
            default:
              if (M)
                return;
              w = ("" + w).toLowerCase(), M = !0;
          }
      }
      function c(w) {
        var M = a(w);
        if (typeof M != "string" && (C.isEncoding === A || !A(w)))
          throw new Error("Unknown encoding: " + w);
        return M || w;
      }
      function u(w) {
        this.encoding = c(w);
        var M;
        switch (this.encoding) {
          case "utf16le":
            this.text = g, this.end = m, M = 4;
            break;
          case "utf8":
            this.fillLast = p, M = 4;
            break;
          case "base64":
            this.text = _, this.end = S, M = 3;
            break;
          default:
            return this.write = v, void (this.end = k);
        }
        this.lastNeed = 0, this.lastTotal = 0, this.lastChar = C.allocUnsafe(M);
      }
      function f(w) {
        return 127 >= w ? 0 : w >> 5 == 6 ? 2 : w >> 4 == 14 ? 3 : w >> 3 == 30 ? 4 : w >> 6 == 2 ? -1 : -2;
      }
      function h(w, M, N) {
        var T = M.length - 1;
        if (T < N)
          return 0;
        var O = f(M[T]);
        return 0 <= O ? (0 < O && (w.lastNeed = O - 1), O) : --T < N || O === -2 ? 0 : (O = f(M[T]), 0 <= O ? (0 < O && (w.lastNeed = O - 2), O) : --T < N || O === -2 ? 0 : (O = f(M[T]), 0 <= O ? (0 < O && (O === 2 ? O = 0 : w.lastNeed = O - 3), O) : 0));
      }
      function d(w, M) {
        if ((192 & M[0]) != 128)
          return w.lastNeed = 0, "ï¿½";
        if (1 < w.lastNeed && 1 < M.length) {
          if ((192 & M[1]) != 128)
            return w.lastNeed = 1, "ï¿½";
          if (2 < w.lastNeed && 2 < M.length && (192 & M[2]) != 128)
            return w.lastNeed = 2, "ï¿½";
        }
      }
      function p(w) {
        var M = this.lastTotal - this.lastNeed, N = d(this, w);
        return N === void 0 ? this.lastNeed <= w.length ? (w.copy(this.lastChar, M, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (w.copy(this.lastChar, M, 0, w.length), void (this.lastNeed -= w.length)) : N;
      }
      function g(w, M) {
        if ((w.length - M) % 2 == 0) {
          var N = w.toString("utf16le", M);
          if (N) {
            var T = N.charCodeAt(N.length - 1);
            if (55296 <= T && 56319 >= T)
              return this.lastNeed = 2, this.lastTotal = 4, this.lastChar[0] = w[w.length - 2], this.lastChar[1] = w[w.length - 1], N.slice(0, -1);
          }
          return N;
        }
        return this.lastNeed = 1, this.lastTotal = 2, this.lastChar[0] = w[w.length - 1], w.toString("utf16le", M, w.length - 1);
      }
      function m(w) {
        var M = w && w.length ? this.write(w) : "";
        if (this.lastNeed) {
          var N = this.lastTotal - this.lastNeed;
          return M + this.lastChar.toString("utf16le", 0, N);
        }
        return M;
      }
      function _(w, M) {
        var N = (w.length - M) % 3;
        return N == 0 ? w.toString("base64", M) : (this.lastNeed = 3 - N, this.lastTotal = 3, N == 1 ? this.lastChar[0] = w[w.length - 1] : (this.lastChar[0] = w[w.length - 2], this.lastChar[1] = w[w.length - 1]), w.toString("base64", M, w.length - N));
      }
      function S(w) {
        var M = w && w.length ? this.write(w) : "";
        return this.lastNeed ? M + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : M;
      }
      function v(w) {
        return w.toString(this.encoding);
      }
      function k(w) {
        return w && w.length ? this.write(w) : "";
      }
      var C = s("safe-buffer").Buffer, A = C.isEncoding || function(w) {
        switch (w = "" + w, w && w.toLowerCase()) {
          case "hex":
          case "utf8":
          case "utf-8":
          case "ascii":
          case "binary":
          case "base64":
          case "ucs2":
          case "ucs-2":
          case "utf16le":
          case "utf-16le":
          case "raw":
            return !0;
          default:
            return !1;
        }
      };
      l.StringDecoder = u, u.prototype.write = function(w) {
        if (w.length === 0)
          return "";
        var M, N;
        if (this.lastNeed) {
          if (M = this.fillLast(w), M === void 0)
            return "";
          N = this.lastNeed, this.lastNeed = 0;
        } else
          N = 0;
        return N < w.length ? M ? M + this.text(w, N) : this.text(w, N) : M || "";
      }, u.prototype.end = function(w) {
        var M = w && w.length ? this.write(w) : "";
        return this.lastNeed ? M + "ï¿½" : M;
      }, u.prototype.text = function(w, M) {
        var N = h(this, w, M);
        if (!this.lastNeed)
          return w.toString("utf8", M);
        this.lastTotal = N;
        var T = w.length - (N - this.lastNeed);
        return w.copy(this.lastChar, 0, T), w.toString("utf8", M, T);
      }, u.prototype.fillLast = function(w) {
        return this.lastNeed <= w.length ? (w.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed), this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (w.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, w.length), void (this.lastNeed -= w.length));
      };
    }, { "safe-buffer": 30 }], 32: [function(s, o) {
      (function(l) {
        (function() {
          function a(c) {
            try {
              if (!l.localStorage)
                return !1;
            } catch {
              return !1;
            }
            var u = l.localStorage[c];
            return u != null && (u + "").toLowerCase() === "true";
          }
          o.exports = function(c, u) {
            function f() {
              if (!h) {
                if (a("throwDeprecation"))
                  throw new Error(u);
                a("traceDeprecation") ? console.trace(u) : console.warn(u), h = !0;
              }
              return c.apply(this, arguments);
            }
            if (a("noDeprecation"))
              return c;
            var h = !1;
            return f;
          };
        }).call(this);
      }).call(this, typeof Xr > "u" ? typeof self > "u" ? typeof window > "u" ? {} : window : self : Xr);
    }, {}], "/": [function(s, o) {
      function l(S) {
        return S.replace(/a=ice-options:trickle\s\n/g, "");
      }
      function a(S) {
        console.warn(S);
      }
      /*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
      const c = s("debug")("simple-peer"), u = s("get-browser-rtc"), f = s("randombytes"), h = s("readable-stream"), d = s("queue-microtask"), p = s("err-code"), { Buffer: g } = s("buffer"), m = 65536;
      class _ extends h.Duplex {
        constructor(v) {
          if (v = Object.assign({ allowHalfOpen: !1 }, v), super(v), this._id = f(4).toString("hex").slice(0, 7), this._debug("new peer %o", v), this.channelName = v.initiator ? v.channelName || f(20).toString("hex") : null, this.initiator = v.initiator || !1, this.channelConfig = v.channelConfig || _.channelConfig, this.channelNegotiated = this.channelConfig.negotiated, this.config = Object.assign({}, _.config, v.config), this.offerOptions = v.offerOptions || {}, this.answerOptions = v.answerOptions || {}, this.sdpTransform = v.sdpTransform || ((k) => k), this.streams = v.streams || (v.stream ? [v.stream] : []), this.trickle = v.trickle === void 0 || v.trickle, this.allowHalfTrickle = v.allowHalfTrickle !== void 0 && v.allowHalfTrickle, this.iceCompleteTimeout = v.iceCompleteTimeout || 5e3, this.destroyed = !1, this.destroying = !1, this._connected = !1, this.remoteAddress = void 0, this.remoteFamily = void 0, this.remotePort = void 0, this.localAddress = void 0, this.localFamily = void 0, this.localPort = void 0, this._wrtc = v.wrtc && typeof v.wrtc == "object" ? v.wrtc : u(), !this._wrtc)
            throw p(typeof window > "u" ? new Error("No WebRTC support: Specify `opts.wrtc` option in this environment") : new Error("No WebRTC support: Not a supported browser"), "ERR_WEBRTC_SUPPORT");
          this._pcReady = !1, this._channelReady = !1, this._iceComplete = !1, this._iceCompleteTimer = null, this._channel = null, this._pendingCandidates = [], this._isNegotiating = !1, this._firstNegotiation = !0, this._batchedNegotiation = !1, this._queuedNegotiation = !1, this._sendersAwaitingStable = [], this._senderMap = /* @__PURE__ */ new Map(), this._closingInterval = null, this._remoteTracks = [], this._remoteStreams = [], this._chunk = null, this._cb = null, this._interval = null;
          try {
            this._pc = new this._wrtc.RTCPeerConnection(this.config);
          } catch (k) {
            return void this.destroy(p(k, "ERR_PC_CONSTRUCTOR"));
          }
          this._isReactNativeWebrtc = typeof this._pc._peerConnectionId == "number", this._pc.oniceconnectionstatechange = () => {
            this._onIceStateChange();
          }, this._pc.onicegatheringstatechange = () => {
            this._onIceStateChange();
          }, this._pc.onconnectionstatechange = () => {
            this._onConnectionStateChange();
          }, this._pc.onsignalingstatechange = () => {
            this._onSignalingStateChange();
          }, this._pc.onicecandidate = (k) => {
            this._onIceCandidate(k);
          }, typeof this._pc.peerIdentity == "object" && this._pc.peerIdentity.catch((k) => {
            this.destroy(p(k, "ERR_PC_PEER_IDENTITY"));
          }), this.initiator || this.channelNegotiated ? this._setupData({ channel: this._pc.createDataChannel(this.channelName, this.channelConfig) }) : this._pc.ondatachannel = (k) => {
            this._setupData(k);
          }, this.streams && this.streams.forEach((k) => {
            this.addStream(k);
          }), this._pc.ontrack = (k) => {
            this._onTrack(k);
          }, this._debug("initial negotiation"), this._needsNegotiation(), this._onFinishBound = () => {
            this._onFinish();
          }, this.once("finish", this._onFinishBound);
        }
        get bufferSize() {
          return this._channel && this._channel.bufferedAmount || 0;
        }
        get connected() {
          return this._connected && this._channel.readyState === "open";
        }
        address() {
          return { port: this.localPort, family: this.localFamily, address: this.localAddress };
        }
        signal(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot signal after peer is destroyed"), "ERR_DESTROYED");
            if (typeof v == "string")
              try {
                v = JSON.parse(v);
              } catch {
                v = {};
              }
            this._debug("signal()"), v.renegotiate && this.initiator && (this._debug("got request to renegotiate"), this._needsNegotiation()), v.transceiverRequest && this.initiator && (this._debug("got request for transceiver"), this.addTransceiver(v.transceiverRequest.kind, v.transceiverRequest.init)), v.candidate && (this._pc.remoteDescription && this._pc.remoteDescription.type ? this._addIceCandidate(v.candidate) : this._pendingCandidates.push(v.candidate)), v.sdp && this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(v)).then(() => {
              this.destroyed || (this._pendingCandidates.forEach((k) => {
                this._addIceCandidate(k);
              }), this._pendingCandidates = [], this._pc.remoteDescription.type === "offer" && this._createAnswer());
            }).catch((k) => {
              this.destroy(p(k, "ERR_SET_REMOTE_DESCRIPTION"));
            }), v.sdp || v.candidate || v.renegotiate || v.transceiverRequest || this.destroy(p(new Error("signal() called with invalid signal data"), "ERR_SIGNALING"));
          }
        }
        _addIceCandidate(v) {
          const k = new this._wrtc.RTCIceCandidate(v);
          this._pc.addIceCandidate(k).catch((C) => {
            !k.address || k.address.endsWith(".local") ? a("Ignoring unsupported ICE candidate.") : this.destroy(p(C, "ERR_ADD_ICE_CANDIDATE"));
          });
        }
        send(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot send after peer is destroyed"), "ERR_DESTROYED");
            this._channel.send(v);
          }
        }
        addTransceiver(v, k) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot addTransceiver after peer is destroyed"), "ERR_DESTROYED");
            if (this._debug("addTransceiver()"), this.initiator)
              try {
                this._pc.addTransceiver(v, k), this._needsNegotiation();
              } catch (C) {
                this.destroy(p(C, "ERR_ADD_TRANSCEIVER"));
              }
            else
              this.emit("signal", { type: "transceiverRequest", transceiverRequest: { kind: v, init: k } });
          }
        }
        addStream(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot addStream after peer is destroyed"), "ERR_DESTROYED");
            this._debug("addStream()"), v.getTracks().forEach((k) => {
              this.addTrack(k, v);
            });
          }
        }
        addTrack(v, k) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot addTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("addTrack()");
          const C = this._senderMap.get(v) || /* @__PURE__ */ new Map();
          let A = C.get(k);
          if (!A)
            A = this._pc.addTrack(v, k), C.set(k, A), this._senderMap.set(v, C), this._needsNegotiation();
          else
            throw A.removed ? p(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."), "ERR_SENDER_REMOVED") : p(new Error("Track has already been added to that stream."), "ERR_SENDER_ALREADY_ADDED");
        }
        replaceTrack(v, k, C) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot replaceTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("replaceTrack()");
          const A = this._senderMap.get(v), w = A ? A.get(C) : null;
          if (!w)
            throw p(new Error("Cannot replace track that was never added."), "ERR_TRACK_NOT_ADDED");
          k && this._senderMap.set(k, A), w.replaceTrack == null ? this.destroy(p(new Error("replaceTrack is not supported in this browser"), "ERR_UNSUPPORTED_REPLACETRACK")) : w.replaceTrack(k);
        }
        removeTrack(v, k) {
          if (this.destroying)
            return;
          if (this.destroyed)
            throw p(new Error("cannot removeTrack after peer is destroyed"), "ERR_DESTROYED");
          this._debug("removeSender()");
          const C = this._senderMap.get(v), A = C ? C.get(k) : null;
          if (!A)
            throw p(new Error("Cannot remove track that was never added."), "ERR_TRACK_NOT_ADDED");
          try {
            A.removed = !0, this._pc.removeTrack(A);
          } catch (w) {
            w.name === "NS_ERROR_UNEXPECTED" ? this._sendersAwaitingStable.push(A) : this.destroy(p(w, "ERR_REMOVE_TRACK"));
          }
          this._needsNegotiation();
        }
        removeStream(v) {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot removeStream after peer is destroyed"), "ERR_DESTROYED");
            this._debug("removeSenders()"), v.getTracks().forEach((k) => {
              this.removeTrack(k, v);
            });
          }
        }
        _needsNegotiation() {
          this._debug("_needsNegotiation"), this._batchedNegotiation || (this._batchedNegotiation = !0, d(() => {
            this._batchedNegotiation = !1, this.initiator || !this._firstNegotiation ? (this._debug("starting batched negotiation"), this.negotiate()) : this._debug("non-initiator initial negotiation request discarded"), this._firstNegotiation = !1;
          }));
        }
        negotiate() {
          if (!this.destroying) {
            if (this.destroyed)
              throw p(new Error("cannot negotiate after peer is destroyed"), "ERR_DESTROYED");
            this.initiator ? this._isNegotiating ? (this._queuedNegotiation = !0, this._debug("already negotiating, queueing")) : (this._debug("start negotiation"), setTimeout(() => {
              this._createOffer();
            }, 0)) : this._isNegotiating ? (this._queuedNegotiation = !0, this._debug("already negotiating, queueing")) : (this._debug("requesting negotiation from initiator"), this.emit("signal", { type: "renegotiate", renegotiate: !0 })), this._isNegotiating = !0;
          }
        }
        destroy(v) {
          this._destroy(v, () => {
          });
        }
        _destroy(v, k) {
          this.destroyed || this.destroying || (this.destroying = !0, this._debug("destroying (error: %s)", v && (v.message || v)), d(() => {
            if (this.destroyed = !0, this.destroying = !1, this._debug("destroy (error: %s)", v && (v.message || v)), this.readable = this.writable = !1, this._readableState.ended || this.push(null), this._writableState.finished || this.end(), this._connected = !1, this._pcReady = !1, this._channelReady = !1, this._remoteTracks = null, this._remoteStreams = null, this._senderMap = null, clearInterval(this._closingInterval), this._closingInterval = null, clearInterval(this._interval), this._interval = null, this._chunk = null, this._cb = null, this._onFinishBound && this.removeListener("finish", this._onFinishBound), this._onFinishBound = null, this._channel) {
              try {
                this._channel.close();
              } catch {
              }
              this._channel.onmessage = null, this._channel.onopen = null, this._channel.onclose = null, this._channel.onerror = null;
            }
            if (this._pc) {
              try {
                this._pc.close();
              } catch {
              }
              this._pc.oniceconnectionstatechange = null, this._pc.onicegatheringstatechange = null, this._pc.onsignalingstatechange = null, this._pc.onicecandidate = null, this._pc.ontrack = null, this._pc.ondatachannel = null;
            }
            this._pc = null, this._channel = null, v && this.emit("error", v), this.emit("close"), k();
          }));
        }
        _setupData(v) {
          if (!v.channel)
            return this.destroy(p(new Error("Data channel event is missing `channel` property"), "ERR_DATA_CHANNEL"));
          this._channel = v.channel, this._channel.binaryType = "arraybuffer", typeof this._channel.bufferedAmountLowThreshold == "number" && (this._channel.bufferedAmountLowThreshold = m), this.channelName = this._channel.label, this._channel.onmessage = (C) => {
            this._onChannelMessage(C);
          }, this._channel.onbufferedamountlow = () => {
            this._onChannelBufferedAmountLow();
          }, this._channel.onopen = () => {
            this._onChannelOpen();
          }, this._channel.onclose = () => {
            this._onChannelClose();
          }, this._channel.onerror = (C) => {
            const A = C.error instanceof Error ? C.error : new Error(`Datachannel error: ${C.message} ${C.filename}:${C.lineno}:${C.colno}`);
            this.destroy(p(A, "ERR_DATA_CHANNEL"));
          };
          let k = !1;
          this._closingInterval = setInterval(() => {
            this._channel && this._channel.readyState === "closing" ? (k && this._onChannelClose(), k = !0) : k = !1;
          }, 5e3);
        }
        _read() {
        }
        _write(v, k, C) {
          if (this.destroyed)
            return C(p(new Error("cannot write after peer is destroyed"), "ERR_DATA_CHANNEL"));
          if (this._connected) {
            try {
              this.send(v);
            } catch (A) {
              return this.destroy(p(A, "ERR_DATA_CHANNEL"));
            }
            this._channel.bufferedAmount > m ? (this._debug("start backpressure: bufferedAmount %d", this._channel.bufferedAmount), this._cb = C) : C(null);
          } else
            this._debug("write before connect"), this._chunk = v, this._cb = C;
        }
        _onFinish() {
          if (!this.destroyed) {
            const v = () => {
              setTimeout(() => this.destroy(), 1e3);
            };
            this._connected ? v() : this.once("connect", v);
          }
        }
        _startIceCompleteTimeout() {
          this.destroyed || this._iceCompleteTimer || (this._debug("started iceComplete timeout"), this._iceCompleteTimer = setTimeout(() => {
            this._iceComplete || (this._iceComplete = !0, this._debug("iceComplete timeout completed"), this.emit("iceTimeout"), this.emit("_iceComplete"));
          }, this.iceCompleteTimeout));
        }
        _createOffer() {
          this.destroyed || this._pc.createOffer(this.offerOptions).then((v) => {
            if (this.destroyed)
              return;
            this.trickle || this.allowHalfTrickle || (v.sdp = l(v.sdp)), v.sdp = this.sdpTransform(v.sdp);
            const k = () => {
              if (!this.destroyed) {
                const C = this._pc.localDescription || v;
                this._debug("signal"), this.emit("signal", { type: C.type, sdp: C.sdp });
              }
            };
            this._pc.setLocalDescription(v).then(() => {
              this._debug("createOffer success"), this.destroyed || (this.trickle || this._iceComplete ? k() : this.once("_iceComplete", k));
            }).catch((C) => {
              this.destroy(p(C, "ERR_SET_LOCAL_DESCRIPTION"));
            });
          }).catch((v) => {
            this.destroy(p(v, "ERR_CREATE_OFFER"));
          });
        }
        _requestMissingTransceivers() {
          this._pc.getTransceivers && this._pc.getTransceivers().forEach((v) => {
            v.mid || !v.sender.track || v.requested || (v.requested = !0, this.addTransceiver(v.sender.track.kind));
          });
        }
        _createAnswer() {
          this.destroyed || this._pc.createAnswer(this.answerOptions).then((v) => {
            if (this.destroyed)
              return;
            this.trickle || this.allowHalfTrickle || (v.sdp = l(v.sdp)), v.sdp = this.sdpTransform(v.sdp);
            const k = () => {
              if (!this.destroyed) {
                const C = this._pc.localDescription || v;
                this._debug("signal"), this.emit("signal", { type: C.type, sdp: C.sdp }), this.initiator || this._requestMissingTransceivers();
              }
            };
            this._pc.setLocalDescription(v).then(() => {
              this.destroyed || (this.trickle || this._iceComplete ? k() : this.once("_iceComplete", k));
            }).catch((C) => {
              this.destroy(p(C, "ERR_SET_LOCAL_DESCRIPTION"));
            });
          }).catch((v) => {
            this.destroy(p(v, "ERR_CREATE_ANSWER"));
          });
        }
        _onConnectionStateChange() {
          this.destroyed || this._pc.connectionState === "failed" && this.destroy(p(new Error("Connection failed."), "ERR_CONNECTION_FAILURE"));
        }
        _onIceStateChange() {
          if (this.destroyed)
            return;
          const v = this._pc.iceConnectionState, k = this._pc.iceGatheringState;
          this._debug("iceStateChange (connection: %s) (gathering: %s)", v, k), this.emit("iceStateChange", v, k), (v === "connected" || v === "completed") && (this._pcReady = !0, this._maybeReady()), v === "failed" && this.destroy(p(new Error("Ice connection failed."), "ERR_ICE_CONNECTION_FAILURE")), v === "closed" && this.destroy(p(new Error("Ice connection closed."), "ERR_ICE_CONNECTION_CLOSED"));
        }
        getStats(v) {
          const k = (C) => (Object.prototype.toString.call(C.values) === "[object Array]" && C.values.forEach((A) => {
            Object.assign(C, A);
          }), C);
          this._pc.getStats.length === 0 || this._isReactNativeWebrtc ? this._pc.getStats().then((C) => {
            const A = [];
            C.forEach((w) => {
              A.push(k(w));
            }), v(null, A);
          }, (C) => v(C)) : 0 < this._pc.getStats.length ? this._pc.getStats((C) => {
            if (this.destroyed)
              return;
            const A = [];
            C.result().forEach((w) => {
              const M = {};
              w.names().forEach((N) => {
                M[N] = w.stat(N);
              }), M.id = w.id, M.type = w.type, M.timestamp = w.timestamp, A.push(k(M));
            }), v(null, A);
          }, (C) => v(C)) : v(null, []);
        }
        _maybeReady() {
          if (this._debug("maybeReady pc %s channel %s", this._pcReady, this._channelReady), this._connected || this._connecting || !this._pcReady || !this._channelReady)
            return;
          this._connecting = !0;
          const v = () => {
            this.destroyed || this.getStats((k, C) => {
              if (this.destroyed)
                return;
              k && (C = []);
              const A = {}, w = {}, M = {};
              let N = !1;
              C.forEach((O) => {
                (O.type === "remotecandidate" || O.type === "remote-candidate") && (A[O.id] = O), (O.type === "localcandidate" || O.type === "local-candidate") && (w[O.id] = O), (O.type === "candidatepair" || O.type === "candidate-pair") && (M[O.id] = O);
              });
              const T = (O) => {
                N = !0;
                let W = w[O.localCandidateId];
                W && (W.ip || W.address) ? (this.localAddress = W.ip || W.address, this.localPort = +W.port) : W && W.ipAddress ? (this.localAddress = W.ipAddress, this.localPort = +W.portNumber) : typeof O.googLocalAddress == "string" && (W = O.googLocalAddress.split(":"), this.localAddress = W[0], this.localPort = +W[1]), this.localAddress && (this.localFamily = this.localAddress.includes(":") ? "IPv6" : "IPv4");
                let H = A[O.remoteCandidateId];
                H && (H.ip || H.address) ? (this.remoteAddress = H.ip || H.address, this.remotePort = +H.port) : H && H.ipAddress ? (this.remoteAddress = H.ipAddress, this.remotePort = +H.portNumber) : typeof O.googRemoteAddress == "string" && (H = O.googRemoteAddress.split(":"), this.remoteAddress = H[0], this.remotePort = +H[1]), this.remoteAddress && (this.remoteFamily = this.remoteAddress.includes(":") ? "IPv6" : "IPv4"), this._debug("connect local: %s:%s remote: %s:%s", this.localAddress, this.localPort, this.remoteAddress, this.remotePort);
              };
              if (C.forEach((O) => {
                O.type === "transport" && O.selectedCandidatePairId && T(M[O.selectedCandidatePairId]), (O.type === "googCandidatePair" && O.googActiveConnection === "true" || (O.type === "candidatepair" || O.type === "candidate-pair") && O.selected) && T(O);
              }), !N && (!Object.keys(M).length || Object.keys(w).length))
                return void setTimeout(v, 100);
              if (this._connecting = !1, this._connected = !0, this._chunk) {
                try {
                  this.send(this._chunk);
                } catch (W) {
                  return this.destroy(p(W, "ERR_DATA_CHANNEL"));
                }
                this._chunk = null, this._debug('sent chunk from "write before connect"');
                const O = this._cb;
                this._cb = null, O(null);
              }
              typeof this._channel.bufferedAmountLowThreshold != "number" && (this._interval = setInterval(() => this._onInterval(), 150), this._interval.unref && this._interval.unref()), this._debug("connect"), this.emit("connect");
            });
          };
          v();
        }
        _onInterval() {
          this._cb && this._channel && !(this._channel.bufferedAmount > m) && this._onChannelBufferedAmountLow();
        }
        _onSignalingStateChange() {
          this.destroyed || (this._pc.signalingState === "stable" && (this._isNegotiating = !1, this._debug("flushing sender queue", this._sendersAwaitingStable), this._sendersAwaitingStable.forEach((v) => {
            this._pc.removeTrack(v), this._queuedNegotiation = !0;
          }), this._sendersAwaitingStable = [], this._queuedNegotiation ? (this._debug("flushing negotiation queue"), this._queuedNegotiation = !1, this._needsNegotiation()) : (this._debug("negotiated"), this.emit("negotiated"))), this._debug("signalingStateChange %s", this._pc.signalingState), this.emit("signalingStateChange", this._pc.signalingState));
        }
        _onIceCandidate(v) {
          this.destroyed || (v.candidate && this.trickle ? this.emit("signal", { type: "candidate", candidate: { candidate: v.candidate.candidate, sdpMLineIndex: v.candidate.sdpMLineIndex, sdpMid: v.candidate.sdpMid } }) : !v.candidate && !this._iceComplete && (this._iceComplete = !0, this.emit("_iceComplete")), v.candidate && this._startIceCompleteTimeout());
        }
        _onChannelMessage(v) {
          if (this.destroyed)
            return;
          let k = v.data;
          k instanceof ArrayBuffer && (k = g.from(k)), this.push(k);
        }
        _onChannelBufferedAmountLow() {
          if (!this.destroyed && this._cb) {
            this._debug("ending backpressure: bufferedAmount %d", this._channel.bufferedAmount);
            const v = this._cb;
            this._cb = null, v(null);
          }
        }
        _onChannelOpen() {
          this._connected || this.destroyed || (this._debug("on channel open"), this._channelReady = !0, this._maybeReady());
        }
        _onChannelClose() {
          this.destroyed || (this._debug("on channel close"), this.destroy());
        }
        _onTrack(v) {
          this.destroyed || v.streams.forEach((k) => {
            this._debug("on track"), this.emit("track", v.track, k), this._remoteTracks.push({ track: v.track, stream: k }), this._remoteStreams.some((C) => C.id === k.id) || (this._remoteStreams.push(k), d(() => {
              this._debug("on stream"), this.emit("stream", k);
            }));
          });
        }
        _debug() {
          const v = [].slice.call(arguments);
          v[0] = "[" + this._id + "] " + v[0], c.apply(null, v);
        }
      }
      _.WEBRTC_SUPPORT = !!u(), _.config = { iceServers: [{ urls: ["stun:stun.l.google.com:19302", "stun:global.stun.twilio.com:3478"] }], sdpSemantics: "unified-plan" }, _.channelConfig = {}, o.exports = _;
    }, { buffer: 3, debug: 4, "err-code": 6, "get-browser-rtc": 8, "queue-microtask": 13, randombytes: 14, "readable-stream": 29 }] }, {}, [])("/");
  });
})(HO);
const Hse = HO.exports, D_ = 0, N_ = 1, WO = 2, qO = (t, e) => {
  st(t, D_);
  const n = _re(e);
  In(t, n);
}, JO = (t, e, n) => {
  st(t, N_), In(t, pre(e, n));
}, Wse = (t, e, n) => JO(e, n, ui(t)), KO = (t, e, n) => {
  try {
    fre(e, ui(t), n);
  } catch (i) {
    console.error("Caught error while handling a Yjs update", i);
  }
}, qse = (t, e) => {
  st(t, WO), In(t, e);
}, Jse = KO, Kse = (t, e, n, i) => {
  const r = vt(t);
  switch (r) {
    case D_:
      Wse(t, e, n);
      break;
    case N_:
      KO(t, n, i);
      break;
    case WO:
      Jse(t, n, i);
      break;
    default:
      throw new Error("Unknown message type");
  }
  return r;
}, Em = 3e4;
class Gse extends ng {
  constructor(e) {
    super(), this.doc = e, this.clientID = e.clientID, this.states = /* @__PURE__ */ new Map(), this.meta = /* @__PURE__ */ new Map(), this._checkInterval = setInterval(() => {
      const n = no();
      this.getLocalState() !== null && Em / 2 <= n - this.meta.get(this.clientID).lastUpdated && this.setLocalState(this.getLocalState());
      const i = [];
      this.meta.forEach((r, s) => {
        s !== this.clientID && Em <= n - r.lastUpdated && this.states.has(s) && i.push(s);
      }), i.length > 0 && w0(this, i, "timeout");
    }, Ts(Em / 10)), e.on("destroy", () => {
      this.destroy();
    }), this.setLocalState({});
  }
  destroy() {
    this.emit("destroy", [this]), this.setLocalState(null), super.destroy(), clearInterval(this._checkInterval);
  }
  getLocalState() {
    return this.states.get(this.clientID) || null;
  }
  setLocalState(e) {
    const n = this.clientID, i = this.meta.get(n), r = i === void 0 ? 0 : i.clock + 1, s = this.states.get(n);
    e === null ? this.states.delete(n) : this.states.set(n, e), this.meta.set(n, {
      clock: r,
      lastUpdated: no()
    });
    const o = [], l = [], a = [], c = [];
    e === null ? c.push(n) : s == null ? e != null && o.push(n) : (l.push(n), qc(s, e) || a.push(n)), (o.length > 0 || a.length > 0 || c.length > 0) && this.emit("change", [{ added: o, updated: a, removed: c }, "local"]), this.emit("update", [{ added: o, updated: l, removed: c }, "local"]);
  }
  setLocalStateField(e, n) {
    const i = this.getLocalState();
    i !== null && this.setLocalState({
      ...i,
      [e]: n
    });
  }
  getStates() {
    return this.states;
  }
}
const w0 = (t, e, n) => {
  const i = [];
  for (let r = 0; r < e.length; r++) {
    const s = e[r];
    if (t.states.has(s)) {
      if (t.states.delete(s), s === t.clientID) {
        const o = t.meta.get(s);
        t.meta.set(s, {
          clock: o.clock + 1,
          lastUpdated: no()
        });
      }
      i.push(s);
    }
  }
  i.length > 0 && (t.emit("change", [{ added: [], updated: [], removed: i }, n]), t.emit("update", [{ added: [], updated: [], removed: i }, n]));
}, ep = (t, e, n = t.states) => {
  const i = e.length, r = fi();
  st(r, i);
  for (let s = 0; s < i; s++) {
    const o = e[s], l = n.get(o) || null, a = t.meta.get(o).clock;
    st(r, o), st(r, a), ys(r, JSON.stringify(l));
  }
  return En(r);
}, Yse = (t, e, n) => {
  const i = Bs(e), r = no(), s = [], o = [], l = [], a = [], c = vt(i);
  for (let u = 0; u < c; u++) {
    const f = vt(i);
    let h = vt(i);
    const d = JSON.parse(Gs(i)), p = t.meta.get(f), g = t.states.get(f), m = p === void 0 ? 0 : p.clock;
    (m < h || m === h && d === null && t.states.has(f)) && (d === null ? f === t.clientID && t.getLocalState() != null ? h++ : t.states.delete(f) : t.states.set(f, d), t.meta.set(f, {
      clock: h,
      lastUpdated: r
    }), p === void 0 && d !== null ? s.push(f) : p !== void 0 && d === null ? a.push(f) : d !== null && (qc(d, g) || l.push(f), o.push(f)));
  }
  (s.length > 0 || l.length > 0 || a.length > 0) && t.emit("change", [{
    added: s,
    updated: l,
    removed: a
  }, n]), (s.length > 0 || o.length > 0 || a.length > 0) && t.emit("update", [{
    added: s,
    updated: o,
    removed: a
  }, n]);
}, Xse = (t, e) => {
  const n = c0(t).buffer, i = c0(e).buffer;
  return crypto.subtle.importKey(
    "raw",
    n,
    "PBKDF2",
    !1,
    ["deriveKey"]
  ).then(
    (r) => crypto.subtle.deriveKey(
      {
        name: "PBKDF2",
        salt: i,
        iterations: 1e5,
        hash: "SHA-256"
      },
      r,
      {
        name: "AES-GCM",
        length: 256
      },
      !0,
      ["encrypt", "decrypt"]
    )
  );
}, GO = (t, e) => {
  if (!e)
    return g_(t);
  const n = crypto.getRandomValues(new Uint8Array(12));
  return crypto.subtle.encrypt(
    {
      name: "AES-GCM",
      iv: n
    },
    e,
    t
  ).then((i) => {
    const r = fi();
    return ys(r, "AES-GCM"), In(r, n), In(r, new Uint8Array(i)), En(r);
  });
}, Qse = (t, e) => {
  const n = fi();
  return Xa(n, t), GO(En(n), e);
}, YO = (t, e) => {
  if (!e)
    return g_(t);
  const n = Bs(t);
  Gs(n) !== "AES-GCM" && qie(tl("Unknown encryption algorithm"));
  const r = ui(n), s = ui(n);
  return crypto.subtle.decrypt(
    {
      name: "AES-GCM",
      iv: r
    },
    e,
    s
  ).then((o) => new Uint8Array(o));
}, Zse = (t, e) => YO(t, e).then(
  (n) => Ya(Bs(new Uint8Array(n)))
), xr = ere("y-webrtc"), Ca = 0, XO = 3, ju = 1, L_ = 4, tp = /* @__PURE__ */ new Map(), Sl = /* @__PURE__ */ new Map(), QO = (t) => {
  let e = !0;
  t.webrtcConns.forEach((n) => {
    n.synced || (e = !1);
  }), (!e && t.synced || e && !t.synced) && (t.synced = e, t.provider.emit("synced", [{ synced: e }]), xr("synced ", ir, t.name, Wo, " with all peers"));
}, ZO = (t, e, n) => {
  const i = Bs(e), r = fi(), s = vt(i);
  if (t === void 0)
    return null;
  const o = t.awareness, l = t.doc;
  let a = !1;
  switch (s) {
    case Ca: {
      st(r, Ca);
      const c = Kse(i, r, l, t);
      c === N_ && !t.synced && n(), c === D_ && (a = !0);
      break;
    }
    case XO:
      st(r, ju), In(r, ep(o, Array.from(o.getStates().keys()))), a = !0;
      break;
    case ju:
      Yse(o, ui(i), t);
      break;
    case L_: {
      const c = jl(i) === 1, u = Gs(i);
      if (u !== t.peerId && (t.bcConns.has(u) && !c || !t.bcConns.has(u) && c)) {
        const f = [], h = [];
        c ? (t.bcConns.add(u), h.push(u)) : (t.bcConns.delete(u), f.push(u)), t.provider.emit("peers", [{
          added: h,
          removed: f,
          webrtcPeers: Array.from(t.webrtcConns.keys()),
          bcPeers: Array.from(t.bcConns)
        }]), $O(t);
      }
      break;
    }
    default:
      return console.error("Unable to compute message"), r;
  }
  return a ? r : null;
}, $se = (t, e) => {
  const n = t.room;
  return xr("received message from ", ir, t.remotePeerId, og, " (", n.name, ")", Wo, sf), ZO(n, e, () => {
    t.synced = !0, xr("synced ", ir, n.name, Wo, " with ", ir, t.remotePeerId), QO(n);
  });
}, Am = (t, e) => {
  xr("send message to ", ir, t.remotePeerId, Wo, og, " (", t.room.name, ")", sf);
  try {
    t.peer.send(En(e));
  } catch {
  }
}, eoe = (t, e) => {
  xr("broadcast message in ", ir, t.name, Wo), t.webrtcConns.forEach((n) => {
    try {
      n.peer.send(e);
    } catch {
    }
  });
};
class $3 {
  constructor(e, n, i, r) {
    xr("establishing connection to ", ir, i), this.room = r, this.remotePeerId = i, this.closed = !1, this.connected = !1, this.synced = !1, this.peer = new Hse({ initiator: n, ...r.provider.peerOpts }), this.peer.on("signal", (s) => {
      j_(e, r, { to: i, from: r.peerId, type: "signal", signal: s });
    }), this.peer.on("connect", () => {
      xr("connected to ", ir, i), this.connected = !0;
      const o = r.provider.doc, l = r.awareness, a = fi();
      st(a, Ca), qO(a, o), Am(this, a);
      const c = l.getStates();
      if (c.size > 0) {
        const u = fi();
        st(u, ju), In(u, ep(l, Array.from(c.keys()))), Am(this, u);
      }
    }), this.peer.on("close", () => {
      this.connected = !1, this.closed = !0, r.webrtcConns.has(this.remotePeerId) && (r.webrtcConns.delete(this.remotePeerId), r.provider.emit("peers", [{
        removed: [this.remotePeerId],
        added: [],
        webrtcPeers: Array.from(r.webrtcConns.keys()),
        bcPeers: Array.from(r.bcConns)
      }])), QO(r), this.peer.destroy(), xr("closed connection to ", ir, i), v0(r);
    }), this.peer.on("error", (s) => {
      xr("Error in connection to ", ir, i, ": ", s), v0(r);
    }), this.peer.on("data", (s) => {
      const o = $se(this, s);
      o !== null && Am(this, o);
    });
  }
  destroy() {
    this.peer.destroy();
  }
}
const bo = (t, e) => GO(e, t.key).then(
  (n) => t.mux(
    () => Vse(t.name, n)
  )
), e4 = (t, e) => {
  t.bcconnected && bo(t, e), eoe(t, e);
}, v0 = (t) => {
  tp.forEach((e) => {
    e.connected && (e.send({ type: "subscribe", topics: [t.name] }), t.webrtcConns.size < t.provider.maxConns && j_(e, t, { type: "announce", from: t.peerId }));
  });
}, $O = (t) => {
  if (t.provider.filterBcConns) {
    const e = fi();
    st(e, L_), Pu(e, 1), ys(e, t.peerId), bo(t, En(e));
  }
};
class toe {
  constructor(e, n, i, r) {
    this.peerId = iO(), this.doc = e, this.awareness = n.awareness, this.provider = n, this.synced = !1, this.name = i, this.key = r, this.webrtcConns = /* @__PURE__ */ new Map(), this.bcConns = /* @__PURE__ */ new Set(), this.mux = Use(), this.bcconnected = !1, this._bcSubscriber = (s) => YO(new Uint8Array(s), r).then(
      (o) => this.mux(() => {
        const l = ZO(this, o, () => {
        });
        l && bo(this, En(l));
      })
    ), this._docUpdateHandler = (s, o) => {
      const l = fi();
      st(l, Ca), qse(l, s), e4(this, En(l));
    }, this._awarenessUpdateHandler = ({ added: s, updated: o, removed: l }, a) => {
      const c = s.concat(o).concat(l), u = fi();
      st(u, ju), In(u, ep(this.awareness, c)), e4(this, En(u));
    }, this._beforeUnloadHandler = () => {
      w0(this.awareness, [e.clientID], "window unload"), Sl.forEach((s) => {
        s.disconnect();
      });
    }, typeof window < "u" ? window.addEventListener("beforeunload", this._beforeUnloadHandler) : typeof process < "u" && process.on("exit", this._beforeUnloadHandler);
  }
  connect() {
    this.doc.on("update", this._docUpdateHandler), this.awareness.on("update", this._awarenessUpdateHandler), v0(this);
    const e = this.name;
    Fse(e, this._bcSubscriber), this.bcconnected = !0, $O(this);
    const n = fi();
    st(n, Ca), qO(n, this.doc), bo(this, En(n));
    const i = fi();
    st(i, Ca), JO(i, this.doc), bo(this, En(i));
    const r = fi();
    st(r, XO), bo(this, En(r));
    const s = fi();
    st(s, ju), In(s, ep(this.awareness, [this.doc.clientID])), bo(this, En(s));
  }
  disconnect() {
    tp.forEach((n) => {
      n.connected && n.send({ type: "unsubscribe", topics: [this.name] });
    }), w0(this.awareness, [this.doc.clientID], "disconnect");
    const e = fi();
    st(e, L_), Pu(e, 0), ys(e, this.peerId), bo(this, En(e)), zse(this.name, this._bcSubscriber), this.bcconnected = !1, this.doc.off("update", this._docUpdateHandler), this.awareness.off("update", this._awarenessUpdateHandler), this.webrtcConns.forEach((n) => n.destroy());
  }
  destroy() {
    this.disconnect(), typeof window < "u" ? window.removeEventListener("beforeunload", this._beforeUnloadHandler) : typeof process < "u" && process.off("exit", this._beforeUnloadHandler);
  }
}
const noe = (t, e, n, i) => {
  if (Sl.has(n))
    throw tl(`A Yjs Doc connected to room "${n}" already exists!`);
  const r = new toe(t, e, n, i);
  return Sl.set(n, r), r;
}, j_ = (t, e, n) => {
  e.key ? Qse(n, e.key).then((i) => {
    t.send({ type: "publish", topic: e.name, data: eO(i) });
  }) : t.send({ type: "publish", topic: e.name, data: n });
};
class ioe extends jse {
  constructor(e) {
    super(e), this.providers = /* @__PURE__ */ new Set(), this.on("connect", () => {
      xr(`connected (${e})`);
      const n = Array.from(Sl.keys());
      this.send({ type: "subscribe", topics: n }), Sl.forEach(
        (i) => j_(this, i, { type: "announce", from: i.peerId })
      );
    }), this.on("message", (n) => {
      switch (n.type) {
        case "publish": {
          const i = n.topic, r = Sl.get(i);
          if (r == null || typeof i != "string")
            return;
          const s = (o) => {
            const l = r.webrtcConns, a = r.peerId;
            if (o == null || o.from === a || o.to !== void 0 && o.to !== a || r.bcConns.has(o.from))
              return;
            const c = l.has(o.from) ? () => {
            } : () => r.provider.emit("peers", [{
              removed: [],
              added: [o.from],
              webrtcPeers: Array.from(r.webrtcConns.keys()),
              bcPeers: Array.from(r.bcConns)
            }]);
            switch (o.type) {
              case "announce":
                l.size < r.provider.maxConns && (Cr(l, o.from, () => new $3(this, !0, o.from, r)), c());
                break;
              case "signal":
                o.to === a && (Cr(l, o.from, () => new $3(this, !1, o.from, r)).peer.signal(o.signal), c());
                break;
            }
          };
          r.key ? typeof n.data == "string" && Zse(tO(n.data), r.key).then(s) : s(n.data);
        }
      }
    }), this.on("disconnect", () => xr(`disconnect (${e})`));
  }
}
class roe extends ng {
  constructor(e, n, {
    signaling: i = ["wss://signaling.yjs.dev", "wss://y-webrtc-signaling-eu.herokuapp.com", "wss://y-webrtc-signaling-us.herokuapp.com"],
    password: r = null,
    awareness: s = new Gse(n),
    maxConns: o = 20 + Ts(Hie() * 15),
    filterBcConns: l = !0,
    peerOpts: a = {}
  } = {}) {
    super(), this.roomName = e, this.doc = n, this.filterBcConns = l, this.awareness = s, this.shouldConnect = !1, this.signalingUrls = i, this.signalingConns = [], this.maxConns = o, this.peerOpts = a, this.key = r ? Xse(r, e) : g_(null), this.room = null, this.key.then((c) => {
      this.room = noe(n, this, e, c), this.shouldConnect ? this.room.connect() : this.room.disconnect();
    }), this.connect(), this.destroy = this.destroy.bind(this), n.on("destroy", this.destroy);
  }
  get connected() {
    return this.room !== null && this.shouldConnect;
  }
  connect() {
    this.shouldConnect = !0, this.signalingUrls.forEach((e) => {
      const n = Cr(tp, e, () => new ioe(e));
      this.signalingConns.push(n), n.providers.add(this);
    }), this.room && this.room.connect();
  }
  disconnect() {
    this.shouldConnect = !1, this.signalingConns.forEach((e) => {
      e.providers.delete(this), e.providers.size === 0 && (e.destroy(), tp.delete(e.url));
    }), this.room && this.room.disconnect();
  }
  destroy() {
    this.doc.off("destroy", this.destroy), this.key.then(() => {
      this.room.destroy(), Sl.delete(this.roomName);
    }), super.destroy();
  }
}
function soe(t) {
  var e, n = new s_(function() {
    e && e(i);
  }), i = Ga(t, n), r = LF(i, function(s) {
    return e = s, function() {
      e = void 0;
    };
  });
  return {
    subscribe: r.subscribe,
    set: function() {
    }
  };
}
const ooe = (t) => {
  const e = Dse({ users: {} }), n = soe(e), i = Pse(e);
  return new roe(t, i), n;
};
const { window: loe } = np;
function t4(t, e, n) {
  const i = t.slice();
  return i[78] = e[n], i;
}
function n4(t, e, n) {
  const i = t.slice();
  return i[81] = e[n], i;
}
function i4(t, e, n) {
  const i = t.slice();
  return i[84] = e[n], i;
}
function r4(t, e, n) {
  const i = t.slice();
  return i[87] = e[n], i;
}
function s4(t, e, n) {
  const i = t.slice();
  return i[90] = e[n], i;
}
function o4(t, e, n) {
  const i = t.slice();
  return i[93] = e[n], i;
}
function l4(t) {
  let e, n, i, r, s = [], o = /* @__PURE__ */ new Map(), l, a, c, u, f, h, d = t[16] && t[21](), p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H, I, z, L, K, F, D = t[0].mode + "", X, ue, q, ee, ie, ne, je, Ie, Xe, le, Ne, nt, ke, fe, Pe, ae, $, he, Ce, J, y, R, B, Q, G, ce, De, We, pt, ot, Be, ht, jt, _n, yn, Rt, Ee, li, an, Bt, wn, Kt, Zn, jn, Wn, vn, me, Le, gt, en, bi, Ht, kn, we, lt, wt, Wt, Jt, mt, cn = [], Gi = /* @__PURE__ */ new Map(), Xt, Fi, Er;
  r = new ZT({
    props: { kind: t[3].theme.grid }
  });
  let Ii = t[12];
  const ar = (be) => be[93].id;
  for (let be = 0; be < Ii.length; be += 1) {
    let Oe = o4(t, Ii, be), Qe = ar(Oe);
    o.set(Qe, s[be] = a4(Qe, Oe));
  }
  let tn = t[15] && !t[15].edge && t[15].snap && c4(t), qn = t[7] && f4(t), Jn = t[14] && d4(t), nn = t[4].length > 0 && p4(t), Tn = d && g4(t), Bn = t[3].jsonupload && y4(t), Kn = t[3].jsondownload && w4();
  function zi(be, Oe) {
    return Oe[0] & 1 && (ee = null), ee == null && (ee = !!(be[0].mode && be[21]())), ee ? poe : doe;
  }
  let Yi = zi(t, [-1, -1, -1, -1]), _i = Yi(t), Qt = t[3].exportsvg && v4(), Lt = t[3].exportcytoscape && k4(), Rn = t[3] && C4(t), te = t[13];
  const Te = (be) => be[78][0];
  for (let be = 0; be < te.length; be += 1) {
    let Oe = t4(t, te, be), Qe = Te(Oe);
    Gi.set(Qe, cn[be] = A4(Qe, Oe));
  }
  return {
    c() {
      e = j("div"), n = dt("svg"), i = dt("g"), ge(r.$$.fragment);
      for (let be = 0; be < s.length; be += 1)
        s[be].c();
      l = rt(), tn && tn.c(), a = rt(), qn && qn.c(), u = Z(), Jn && Jn.c(), f = Z(), nn && nn.c(), h = Z(), Tn && Tn.c(), p = Z(), g = j("section"), m = j("sl-button-group"), _ = j("sl-dropdown"), S = j("sl-button"), S.innerHTML = `Menu
					<sl-icon slot="prefix" name="list"></sl-icon>`, v = Z(), k = j("sl-menu"), Bn && Bn.c(), C = Z(), Kn && Kn.c(), A = Z(), w = j("sl-divider"), M = Z(), N = j("sl-menu-label"), T = _e("Your display name is: "), O = _e(t[2]), W = Z(), H = j("sl-menu-item"), H.textContent = "Change display name...", I = Z(), z = j("sl-divider"), L = Z(), K = j("sl-menu-label"), F = _e("Currently in "), X = _e(D), ue = _e(" mode..."), q = Z(), _i.c(), ie = Z(), ne = j("sl-divider"), je = Z(), Ie = j("sl-menu-item"), Xe = _e(`Undo (âŒ˜-Z or âŒƒZ)
						`), le = j("sl-icon"), nt = Z(), ke = j("sl-menu-item"), fe = _e(`Redo (â‡§-âŒ˜-Z or â‡§âŒƒZ)
						`), Pe = j("sl-icon"), $ = Z(), he = j("sl-menu-item"), Ce = _e("Clear"), y = Z(), R = j("sl-divider"), B = Z(), Q = j("sl-menu-label"), Q.textContent = "Export as:", G = Z(), Qt && Qt.c(), ce = Z(), Lt && Lt.c(), De = Z(), We = j("sl-divider"), pt = Z(), ot = j("sl-menu-label"), ot.textContent = "Switch Theme To", Be = Z(), ht = j("sl-menu-item"), jt = _e("Classic"), Rt = Z(), Ee = j("sl-menu-item"), li = _e("Elegant"), wn = Z(), Kt = j("sl-menu-item"), Zn = _e("Foresight"), vn = Z(), me = j("sl-menu-item"), Le = _e("Minimal"), bi = Z(), Ht = j("sl-divider"), kn = Z(), we = j("sl-menu-item"), we.textContent = "About...", lt = Z(), wt = j("sl-menu-item"), wt.textContent = "Help...", Wt = Z(), Rn && Rn.c(), Jt = Z(), mt = j("sl-select");
      for (let be = 0; be < cn.length; be += 1)
        cn[be].c();
      b(n, "tabindex", "0"), b(n, "xmlns", "http://www.w3.org/2000/svg"), b(n, "viewBox", "0 0 1000 1000"), b(n, "style", c = `background-color: ${t[3].theme.bgfill}`), b(n, "class", "svelte-1x2xcxd"), b(e, "class", "container svelte-1x2xcxd"), oe(S, "slot", "trigger"), oe(S, "caret", ""), oe(H, "value", "changedisplayname"), oe(le, "slot", "prefix"), oe(le, "name", "arrow-counterclockwise"), oe(Ie, "value", "undo"), oe(Ie, "disabled", Ne = t[11].current <= 0), oe(Pe, "slot", "prefix"), oe(Pe, "name", "arrow-clockwise"), oe(ke, "value", "redo"), oe(ke, "disabled", ae = t[11].versions[t[11].current + 1] === void 0), oe(he, "value", "clear"), oe(he, "disabled", J = t[3].items.length == 0), oe(ht, "type", "checkbox"), oe(ht, "value", "theme.classic"), oe(ht, "checked", _n = t[3].theme.name === "classic"), oe(ht, "disabled", yn = t[3].theme.name === "classic"), oe(Ee, "type", "checkbox"), oe(Ee, "value", "theme.elegant"), oe(Ee, "checked", an = t[3].theme.name === "elegant"), oe(Ee, "disabled", Bt = t[3].theme.name === "elegant"), oe(Kt, "type", "checkbox"), oe(Kt, "value", "theme.foresight"), oe(Kt, "checked", jn = t[3].theme.name === "foresight"), oe(Kt, "disabled", Wn = t[3].theme.name === "foresight"), oe(me, "type", "checkbox"), oe(me, "value", "theme.minimal"), oe(me, "checked", gt = t[3].theme.name === "minimal"), oe(me, "disabled", en = t[3].theme.name === "minimal"), oe(we, "value", "about"), oe(wt, "value", "help"), oe(mt, "placeholder", "Highlight by Tag"), oe(mt, "clearable", ""), oe(mt, "class", "svelte-1x2xcxd"), b(g, "class", "globalmenu svelte-1x2xcxd");
    },
    m(be, Oe) {
      U(be, e, Oe), E(e, n), E(n, i), de(r, i, null);
      for (let Qe = 0; Qe < s.length; Qe += 1)
        s[Qe].m(i, null);
      E(i, l), tn && tn.m(i, null), E(i, a), qn && qn.m(i, null), t[50](i), t[51](n), E(e, u), Jn && Jn.m(e, null), E(e, f), nn && nn.m(e, null), E(e, h), Tn && Tn.m(e, null), U(be, p, Oe), U(be, g, Oe), E(g, m), E(m, _), E(_, S), E(_, v), E(_, k), Bn && Bn.m(k, null), E(k, C), Kn && Kn.m(k, null), E(k, A), E(k, w), E(k, M), E(k, N), E(N, T), E(N, O), E(k, W), E(k, H), E(k, I), E(k, z), E(k, L), E(k, K), E(K, F), E(K, X), E(K, ue), E(k, q), _i.m(k, null), E(k, ie), E(k, ne), E(k, je), E(k, Ie), E(Ie, Xe), E(Ie, le), E(k, nt), E(k, ke), E(ke, fe), E(ke, Pe), E(k, $), E(k, he), E(he, Ce), E(k, y), E(k, R), E(k, B), E(k, Q), E(k, G), Qt && Qt.m(k, null), E(k, ce), Lt && Lt.m(k, null), E(k, De), E(k, We), E(k, pt), E(k, ot), E(k, Be), E(k, ht), E(ht, jt), E(k, Rt), E(k, Ee), E(Ee, li), E(k, wn), E(k, Kt), E(Kt, Zn), E(k, vn), E(k, me), E(me, Le), E(k, bi), E(k, Ht), E(k, kn), E(k, we), E(k, lt), E(k, wt), E(m, Wt), Rn && Rn.m(m, null), E(m, Jt), E(m, mt);
      for (let Qe = 0; Qe < cn.length; Qe += 1)
        cn[Qe].m(mt, null);
      Xt = !0, Fi || (Er = [
        re(n, "mousedown", t[39]),
        re(n, "mousemove", t[32]),
        re(n, "mouseup", t[38]),
        re(n, "contextmenu", _r(t[35])),
        re(n, "keydown", t[37]),
        re(_, "sl-select", t[44]),
        re(mt, "sl-change", t[59])
      ], Fi = !0);
    },
    p(be, Oe) {
      const Qe = {};
      Oe[0] & 8 && (Qe.kind = be[3].theme.grid), r.$set(Qe), Oe[0] & 2080509976 | Oe[1] & 544 && (Ii = be[12], Ae(), s = Ys(s, Oe, ar, 1, be, Ii, o, i, ip, a4, l, o4), Me()), be[15] && !be[15].edge && be[15].snap ? tn ? tn.p(be, Oe) : (tn = c4(be), tn.c(), tn.m(i, a)) : tn && (tn.d(1), tn = null), be[7] ? qn ? qn.p(be, Oe) : (qn = f4(be), qn.c(), qn.m(i, null)) : qn && (qn.d(1), qn = null), (!Xt || Oe[0] & 8 && c !== (c = `background-color: ${be[3].theme.bgfill}`)) && b(n, "style", c), be[14] ? Jn ? Jn.p(be, Oe) : (Jn = d4(be), Jn.c(), Jn.m(e, f)) : Jn && (Jn.d(1), Jn = null), be[4].length > 0 ? nn ? (nn.p(be, Oe), Oe[0] & 16 && P(nn, 1)) : (nn = p4(be), nn.c(), P(nn, 1), nn.m(e, h)) : nn && (Ae(), x(nn, 1, 1, () => {
        nn = null;
      }), Me()), Oe[0] & 65536 && (d = be[16] && be[21]()), d ? Tn ? Tn.p(be, Oe) : (Tn = g4(be), Tn.c(), Tn.m(e, null)) : Tn && (Tn.d(1), Tn = null), be[3].jsonupload ? Bn ? Bn.p(be, Oe) : (Bn = y4(be), Bn.c(), Bn.m(k, C)) : Bn && (Bn.d(1), Bn = null), be[3].jsondownload ? Kn || (Kn = w4(), Kn.c(), Kn.m(k, A)) : Kn && (Kn.d(1), Kn = null), (!Xt || Oe[0] & 4) && ze(O, be[2]), (!Xt || Oe[0] & 1) && D !== (D = be[0].mode + "") && ze(X, D), Yi !== (Yi = zi(be, Oe)) && (_i.d(1), _i = Yi(be), _i && (_i.c(), _i.m(k, ie))), (!Xt || Oe[0] & 2048 && Ne !== (Ne = be[11].current <= 0)) && oe(Ie, "disabled", Ne), (!Xt || Oe[0] & 2048 && ae !== (ae = be[11].versions[be[11].current + 1] === void 0)) && oe(ke, "disabled", ae), (!Xt || Oe[0] & 8 && J !== (J = be[3].items.length == 0)) && oe(he, "disabled", J), be[3].exportsvg ? Qt || (Qt = v4(), Qt.c(), Qt.m(k, ce)) : Qt && (Qt.d(1), Qt = null), be[3].exportcytoscape ? Lt || (Lt = k4(), Lt.c(), Lt.m(k, De)) : Lt && (Lt.d(1), Lt = null), (!Xt || Oe[0] & 8 && _n !== (_n = be[3].theme.name === "classic")) && oe(ht, "checked", _n), (!Xt || Oe[0] & 8 && yn !== (yn = be[3].theme.name === "classic")) && oe(ht, "disabled", yn), (!Xt || Oe[0] & 8 && an !== (an = be[3].theme.name === "elegant")) && oe(Ee, "checked", an), (!Xt || Oe[0] & 8 && Bt !== (Bt = be[3].theme.name === "elegant")) && oe(Ee, "disabled", Bt), (!Xt || Oe[0] & 8 && jn !== (jn = be[3].theme.name === "foresight")) && oe(Kt, "checked", jn), (!Xt || Oe[0] & 8 && Wn !== (Wn = be[3].theme.name === "foresight")) && oe(Kt, "disabled", Wn), (!Xt || Oe[0] & 8 && gt !== (gt = be[3].theme.name === "minimal")) && oe(me, "checked", gt), (!Xt || Oe[0] & 8 && en !== (en = be[3].theme.name === "minimal")) && oe(me, "disabled", en), be[3] ? Rn ? Rn.p(be, Oe) : (Rn = C4(be), Rn.c(), Rn.m(m, Jt)) : Rn && (Rn.d(1), Rn = null), Oe[0] & 8192 && (te = be[13], cn = Ys(cn, Oe, Te, 1, be, te, Gi, mt, Bu, A4, null, t4));
    },
    i(be) {
      if (!Xt) {
        P(r.$$.fragment, be);
        for (let Oe = 0; Oe < Ii.length; Oe += 1)
          P(s[Oe]);
        P(nn), Xt = !0;
      }
    },
    o(be) {
      x(r.$$.fragment, be);
      for (let Oe = 0; Oe < s.length; Oe += 1)
        x(s[Oe]);
      x(nn), Xt = !1;
    },
    d(be) {
      be && V(e), pe(r);
      for (let Oe = 0; Oe < s.length; Oe += 1)
        s[Oe].d();
      tn && tn.d(), qn && qn.d(), t[50](null), t[51](null), Jn && Jn.d(), nn && nn.d(), Tn && Tn.d(), be && V(p), be && V(g), Bn && Bn.d(), Kn && Kn.d(), _i.d(), Qt && Qt.d(), Lt && Lt.d(), Rn && Rn.d();
      for (let Oe = 0; Oe < cn.length; Oe += 1)
        cn[Oe].d();
      Fi = !1, ct(Er);
    }
  };
}
function aoe(t) {
  let e, n;
  return e = new tR({
    props: {
      item: t[93],
      theme: t[3].theme,
      isSelected: t[4].map(D4).includes(t[93].id)
    }
  }), e.$on("itemMouseDown", t[27]), e.$on("itemMouseUp", t[28]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.item = i[93]), r[0] & 8 && (s.theme = i[3].theme), r[0] & 4112 && (s.isSelected = i[4].map(D4).includes(i[93].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function coe(t) {
  let e, n;
  return e = new KT({
    props: {
      item: t[93],
      graph: t[3],
      isSelected: t[4].map(I4).includes(t[93].id)
    }
  }), e.$on("itemMouseDown", t[27]), e.$on("itemMouseUp", t[28]), e.$on("edgeChanged", t[40]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.item = i[93]), r[0] & 8 && (s.graph = i[3]), r[0] & 4112 && (s.isSelected = i[4].map(I4).includes(i[93].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function uoe(t) {
  let e, n;
  return e = new WT({
    props: {
      item: t[93],
      graph: t[3],
      isSelected: t[4].map(P4).includes(t[93].id),
      theme: t[3].theme,
      isHighlighted: t[17].includes(t[93].id),
      isHidden: t[17].length > 0 && !t[17].includes(t[93].id)
    }
  }), e.$on("itemMouseDown", t[27]), e.$on("itemMouseUp", t[28]), e.$on("itemBadgeClick", t[29]), e.$on("itemCollapserClick", t[30]), e.$on("nodeChanged", boe), e.$on("createnode", t[36]), e.$on("itemcontrolmousedown", t[26]), {
    c() {
      ge(e.$$.fragment);
    },
    m(i, r) {
      de(e, i, r), n = !0;
    },
    p(i, r) {
      const s = {};
      r[0] & 4096 && (s.item = i[93]), r[0] & 8 && (s.graph = i[3]), r[0] & 4112 && (s.isSelected = i[4].map(P4).includes(i[93].id)), r[0] & 8 && (s.theme = i[3].theme), r[0] & 135168 && (s.isHighlighted = i[17].includes(i[93].id)), r[0] & 135168 && (s.isHidden = i[17].length > 0 && !i[17].includes(i[93].id)), e.$set(s);
    },
    i(i) {
      n || (P(e.$$.fragment, i), n = !0);
    },
    o(i) {
      x(e.$$.fragment, i), n = !1;
    },
    d(i) {
      pe(e, i);
    }
  };
}
function a4(t, e) {
  let n, i, r, s, o;
  const l = [uoe, coe, aoe], a = [];
  function c(u, f) {
    return u[93].kind === "node" ? 0 : u[93].kind === "edge" ? 1 : u[93].kind === "note" ? 2 : -1;
  }
  return ~(i = c(e)) && (r = a[i] = l[i](e)), {
    key: t,
    first: null,
    c() {
      n = rt(), r && r.c(), s = rt(), this.first = n;
    },
    m(u, f) {
      U(u, n, f), ~i && a[i].m(u, f), U(u, s, f), o = !0;
    },
    p(u, f) {
      e = u;
      let h = i;
      i = c(e), i === h ? ~i && a[i].p(e, f) : (r && (Ae(), x(a[h], 1, 1, () => {
        a[h] = null;
      }), Me()), ~i ? (r = a[i], r ? r.p(e, f) : (r = a[i] = l[i](e), r.c()), P(r, 1), r.m(s.parentNode, s)) : r = null);
    },
    i(u) {
      o || (P(r), o = !0);
    },
    o(u) {
      x(r), o = !1;
    },
    d(u) {
      u && V(n), ~i && a[i].d(u), u && V(s);
    }
  };
}
function c4(t) {
  let e, n = t[15].snap, i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = u4(s4(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = rt();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s[0] & 32776) {
        n = r[15].snap;
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = s4(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = u4(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      xt(i, r), r && V(e);
    }
  };
}
function u4(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = dt("rect"), b(e, "x", n = t[90].x - t[90].width / 2), b(e, "y", i = t[90].y - t[90].height / 2), b(e, "width", r = t[90].width), b(e, "height", s = t[90].height), b(e, "fill", "transparent"), b(e, "stroke", o = t[3].theme.edgestroke), b(e, "stroke-width", "2px"), b(e, "stroke-dasharray", "12 8");
    },
    m(l, a) {
      U(l, e, a);
    },
    p(l, a) {
      a[0] & 32768 && n !== (n = l[90].x - l[90].width / 2) && b(e, "x", n), a[0] & 32768 && i !== (i = l[90].y - l[90].height / 2) && b(e, "y", i), a[0] & 32768 && r !== (r = l[90].width) && b(e, "width", r), a[0] & 32768 && s !== (s = l[90].height) && b(e, "height", s), a[0] & 8 && o !== (o = l[3].theme.edgestroke) && b(e, "stroke", o);
    },
    d(l) {
      l && V(e);
    }
  };
}
function f4(t) {
  let e, n = Object.keys(t[19].users).filter(t[49]), i = [];
  for (let r = 0; r < n.length; r += 1)
    i[r] = h4(r4(t, n, r));
  return {
    c() {
      for (let r = 0; r < i.length; r += 1)
        i[r].c();
      e = rt();
    },
    m(r, s) {
      for (let o = 0; o < i.length; o += 1)
        i[o].m(r, s);
      U(r, e, s);
    },
    p(r, s) {
      if (s[0] & 524292) {
        n = Object.keys(r[19].users).filter(r[49]);
        let o;
        for (o = 0; o < n.length; o += 1) {
          const l = r4(r, n, o);
          i[o] ? i[o].p(l, s) : (i[o] = h4(l), i[o].c(), i[o].m(e.parentNode, e));
        }
        for (; o < i.length; o += 1)
          i[o].d(1);
        i.length = n.length;
      }
    },
    d(r) {
      xt(i, r), r && V(e);
    }
  };
}
function h4(t) {
  let e, n, i, r, s = t[87] + "", o, l, a;
  return {
    c() {
      e = dt("rect"), r = dt("text"), o = _e(s), b(e, "x", n = t[19].users[t[87]].x), b(e, "y", i = t[19].users[t[87]].y), b(e, "width", 120), b(e, "height", 35), b(e, "rx", 10), b(e, "stroke", "red"), b(e, "stroke-width", "3px"), b(e, "fill", "yellow"), b(r, "x", l = t[19].users[t[87]].x + 5), b(r, "y", a = t[19].users[t[87]].y + 20);
    },
    m(c, u) {
      U(c, e, u), U(c, r, u), E(r, o);
    },
    p(c, u) {
      u[0] & 524292 && n !== (n = c[19].users[c[87]].x) && b(e, "x", n), u[0] & 524292 && i !== (i = c[19].users[c[87]].y) && b(e, "y", i), u[0] & 524292 && s !== (s = c[87] + "") && ze(o, s), u[0] & 524292 && l !== (l = c[19].users[c[87]].x + 5) && b(r, "x", l), u[0] & 524292 && a !== (a = c[19].users[c[87]].y + 20) && b(r, "y", a);
    },
    d(c) {
      c && V(e), c && V(r);
    }
  };
}
function d4(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("div"), n = _e(`Please add comments only in the unzoomed, unpanned view.
				`), i = j("button"), i.textContent = "Reset Zoom", b(e, "class", "alert svelte-1x2xcxd");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(e, i), r || (s = re(i, "click", t[20]), r = !0);
    },
    p: ye,
    d(o) {
      o && V(e), r = !1, s();
    }
  };
}
function p4(t) {
  let e, n, i;
  return n = new a$({
    props: {
      selectedItem: t[4],
      graph: t[3],
      config: t[0]
    }
  }), n.$on("graphchanged", t[52]), {
    c() {
      e = j("section"), ge(n.$$.fragment), b(e, "class", "sidepanel svelte-1x2xcxd");
    },
    m(r, s) {
      U(r, e, s), de(n, e, null), i = !0;
    },
    p(r, s) {
      const o = {};
      s[0] & 16 && (o.selectedItem = r[4]), s[0] & 8 && (o.graph = r[3]), s[0] & 1 && (o.config = r[0]), n.$set(o);
    },
    i(r) {
      i || (P(n.$$.fragment, r), i = !0);
    },
    o(r) {
      x(n.$$.fragment, r), i = !1;
    },
    d(r) {
      r && V(e), pe(n);
    }
  };
}
function g4(t) {
  let e, n;
  function i(o, l) {
    return o[4].length == 1 ? hoe : foe;
  }
  let r = i(t), s = r(t);
  return {
    c() {
      e = j("sl-menu"), s.c(), oe(e, "class", "contextmenu svelte-1x2xcxd"), oe(e, "style", n = `left: ${t[16][0]}px; top: ${t[16][1]}px;`);
    },
    m(o, l) {
      U(o, e, l), s.m(e, null);
    },
    p(o, l) {
      r === (r = i(o)) && s ? s.p(o, l) : (s.d(1), s = r(o), s && (s.c(), s.m(e, null))), l[0] & 65536 && n !== (n = `left: ${o[16][0]}px; top: ${o[16][1]}px;`) && oe(e, "style", n);
    },
    d(o) {
      o && V(e), s.d();
    }
  };
}
function foe(t) {
  let e, n, i, r, s, o, l, a, c;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Create new Node", n = Z(), i = j("sl-menu-item"), i.textContent = "Create new Text Note", r = Z(), s = j("sl-menu-item"), s.textContent = "Clear Graph", o = Z(), l = j("sl-menu-item"), l.textContent = "Center here", oe(e, "value", "createnode"), oe(i, "value", "createnote"), oe(s, "value", "cleargraph"), oe(l, "value", "centergraph");
    },
    m(u, f) {
      U(u, e, f), U(u, n, f), U(u, i, f), U(u, r, f), U(u, s, f), U(u, o, f), U(u, l, f), a || (c = [
        re(e, "click", t[33]),
        re(i, "click", t[34]),
        re(s, "click", t[23]),
        re(l, "click", t[24])
      ], a = !0);
    },
    p: ye,
    d(u) {
      u && V(e), u && V(n), u && V(i), u && V(r), u && V(s), u && V(o), u && V(l), a = !1, ct(c);
    }
  };
}
function hoe(t) {
  let e, n, i, r = t[4][0].label + "", s, o, l = ["node", "edge"].includes(t[4][0].kind), a, c, u = t[4][0].kind === "node" && m4(t), f = l && _4();
  return {
    c() {
      u && u.c(), e = Z(), n = j("sl-menu-item"), i = _e('Delete "'), s = _e(r), o = _e('" '), f && f.c(), oe(n, "value", "deleteitem");
    },
    m(h, d) {
      u && u.m(h, d), U(h, e, d), U(h, n, d), E(n, i), E(n, s), E(n, o), f && f.m(n, null), a || (c = re(n, "click", t[56]), a = !0);
    },
    p(h, d) {
      h[4][0].kind === "node" ? u ? u.p(h, d) : (u = m4(h), u.c(), u.m(e.parentNode, e)) : u && (u.d(1), u = null), d[0] & 16 && r !== (r = h[4][0].label + "") && ze(s, r), d[0] & 16 && (l = ["node", "edge"].includes(h[4][0].kind)), l ? f || (f = _4(), f.c(), f.m(n, null)) : f && (f.d(1), f = null);
    },
    d(h) {
      u && u.d(h), h && V(e), h && V(n), f && f.d(), a = !1, c();
    }
  };
}
function m4(t) {
  let e, n, i, r, s, o = t[4][0].label + "", l, a, c, u, f = t[4][0].parent && b4(t);
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Create child node", n = Z(), f && f.c(), i = Z(), r = j("sl-menu-item"), s = _e('Delete "'), l = _e(o), a = _e(`"
							including dependents`), oe(e, "value", "createchildnode"), oe(r, "value", "deleteitemwithdependents");
    },
    m(h, d) {
      U(h, e, d), U(h, n, d), f && f.m(h, d), U(h, i, d), U(h, r, d), E(r, s), E(r, l), E(r, a), c || (u = [
        re(e, "click", t[53]),
        re(r, "click", t[55])
      ], c = !0);
    },
    p(h, d) {
      h[4][0].parent ? f ? f.p(h, d) : (f = b4(h), f.c(), f.m(i.parentNode, i)) : f && (f.d(1), f = null), d[0] & 16 && o !== (o = h[4][0].label + "") && ze(l, o);
    },
    d(h) {
      h && V(e), h && V(n), f && f.d(h), h && V(i), h && V(r), c = !1, ct(u);
    }
  };
}
function b4(t) {
  let e, n, i = t[4][0].label + "", r, s, o = Fn(t[4][0].parent, t[3]).label + "", l, a, c, u;
  return {
    c() {
      e = j("sl-menu-item"), n = _e('Detach "'), r = _e(i), s = _e(`" from
								"`), l = _e(o), a = _e('"'), oe(e, "value", "detach");
    },
    m(f, h) {
      U(f, e, h), E(e, n), E(e, r), E(e, s), E(e, l), E(e, a), c || (u = re(e, "click", t[54]), c = !0);
    },
    p(f, h) {
      h[0] & 16 && i !== (i = f[4][0].label + "") && ze(r, i), h[0] & 24 && o !== (o = Fn(f[4][0].parent, f[3]).label + "") && ze(l, o);
    },
    d(f) {
      f && V(e), c = !1, u();
    }
  };
}
function _4(t) {
  let e;
  return {
    c() {
      e = _e(`leaving
							orphans`);
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function y4(t) {
  let e, n, i, r, s, o;
  return {
    c() {
      e = j("sl-menu-item"), n = j("input"), i = Z(), r = j("sl-icon"), b(n, "type", "file"), b(n, "name", "uploader"), b(n, "accept", ".graph"), oe(r, "slot", "prefix"), oe(r, "name", "folder2-open"), oe(e, "value", "openfile");
    },
    m(l, a) {
      U(l, e, a), E(e, n), E(e, i), E(e, r), s || (o = re(n, "change", t[57]), s = !0);
    },
    p: ye,
    d(l) {
      l && V(e), s = !1, o();
    }
  };
}
function w4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.innerHTML = `Save as .graph file...
							<sl-icon slot="prefix" name="download"></sl-icon>`, oe(e, "value", "savefile");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function doe(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Switch to editor mode", oe(e, "value", "switchtoeditormode");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function poe(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Clear your local changes", oe(e, "value", "clearlocalchanges");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function v4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "SVG...", oe(e, "value", "export.svg");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function k4(t) {
  let e;
  return {
    c() {
      e = j("sl-menu-item"), e.textContent = "Cytoscape JSON...", oe(e, "value", "export.cytoscape");
    },
    m(n, i) {
      U(n, e, i);
    },
    d(n) {
      n && V(e);
    }
  };
}
function C4(t) {
  let e, n = [], i = /* @__PURE__ */ new Map(), r, s, o = t[18];
  const l = (a) => a[84].id;
  for (let a = 0; a < o.length; a += 1) {
    let c = i4(t, o, a), u = l(c);
    i.set(u, n[a] = S4(u, c));
  }
  return {
    c() {
      e = j("fluent-combobox");
      for (let a = 0; a < n.length; a += 1)
        n[a].c();
      oe(e, "autocomplete", "both"), oe(e, "placeholder", "Jump to node");
    },
    m(a, c) {
      U(a, e, c);
      for (let u = 0; u < n.length; u += 1)
        n[u].m(e, null);
      r || (s = re(e, "change", t[58]), r = !0);
    },
    p(a, c) {
      c[0] & 262144 && (o = a[18], n = Ys(n, c, l, 1, a, o, i, e, Bu, S4, null, i4));
    },
    d(a) {
      a && V(e);
      for (let c = 0; c < n.length; c += 1)
        n[c].d();
      r = !1, s();
    }
  };
}
function S4(t, e) {
  let n, i = e[84].label + "", r, s;
  return {
    key: t,
    first: null,
    c() {
      n = j("fluent-option"), r = _e(i), oe(n, "value", s = e[84].id), this.first = n;
    },
    m(o, l) {
      U(o, n, l), E(n, r);
    },
    p(o, l) {
      e = o, l[0] & 262144 && i !== (i = e[84].label + "") && ze(r, i), l[0] & 262144 && s !== (s = e[84].id) && oe(n, "value", s);
    },
    d(o) {
      o && V(n);
    }
  };
}
function E4(t, e) {
  let n, i = e[81].label + "", r, s;
  return {
    key: t,
    first: null,
    c() {
      n = j("sl-option"), r = _e(i), oe(n, "value", s = e[81].value), this.first = n;
    },
    m(o, l) {
      U(o, n, l), E(n, r);
    },
    p(o, l) {
      e = o, l[0] & 8192 && i !== (i = e[81].label + "") && ze(r, i), l[0] & 8192 && s !== (s = e[81].value) && oe(n, "value", s);
    },
    d(o) {
      o && V(n);
    }
  };
}
function A4(t, e) {
  let n, i = e[78][0] + "", r, s, o = [], l = /* @__PURE__ */ new Map(), a, c, u = e[78][1];
  const f = (h) => h[81].value;
  for (let h = 0; h < u.length; h += 1) {
    let d = n4(e, u, h), p = f(d);
    l.set(p, o[h] = E4(p, d));
  }
  return {
    key: t,
    first: null,
    c() {
      n = j("small"), r = _e(i), s = Z();
      for (let h = 0; h < o.length; h += 1)
        o[h].c();
      a = Z(), c = j("sl-divider"), this.first = n;
    },
    m(h, d) {
      U(h, n, d), E(n, r), U(h, s, d);
      for (let p = 0; p < o.length; p += 1)
        o[p].m(h, d);
      U(h, a, d), U(h, c, d);
    },
    p(h, d) {
      e = h, d[0] & 8192 && i !== (i = e[78][0] + "") && ze(r, i), d[0] & 8192 && (u = e[78][1], o = Ys(o, d, f, 1, e, u, l, a.parentNode, Bu, E4, a, n4));
    },
    d(h) {
      h && V(n), h && V(s);
      for (let d = 0; d < o.length; d += 1)
        o[d].d(h);
      h && V(a), h && V(c);
    }
  };
}
function M4(t) {
  let e, n = t[3].title + "", i;
  return {
    c() {
      e = j("h2"), i = _e(n), Ni(e, "margin-top", "0");
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 8 && n !== (n = r[3].title + "") && ze(i, n);
    },
    d(r) {
      r && V(e);
    }
  };
}
function O4(t) {
  let e, n = t[3].description + "", i;
  return {
    c() {
      e = j("p"), i = _e(n);
    },
    m(r, s) {
      U(r, e, s), E(e, i);
    },
    p(r, s) {
      s[0] & 8 && n !== (n = r[3].description + "") && ze(i, n);
    },
    d(r) {
      r && V(e);
    }
  };
}
function T4(t) {
  let e, n, i, r, s;
  return {
    c() {
      e = j("p"), n = j("a"), i = j("u"), i.textContent = "Contact here", s = _e(` for improvements/feedback
			for this particular graph.`), b(n, "href", r = t[3].contact), b(n, "target", "_blank");
    },
    m(o, l) {
      U(o, e, l), E(e, n), E(n, i), E(e, s);
    },
    p(o, l) {
      l[0] & 8 && r !== (r = o[3].contact) && b(n, "href", r);
    },
    d(o) {
      o && V(e);
    }
  };
}
function goe(t) {
  var K, F, D;
  let e, n, i, r, s, o, l, a, c, u, f, h, d, p, g, m, _, S, v, k, C, A, w, M, N, T, O, W, H = t[3] && l4(t), I = ((K = t[3]) == null ? void 0 : K.title) && M4(t), z = ((F = t[3]) == null ? void 0 : F.description) && O4(t), L = ((D = t[3]) == null ? void 0 : D.contact) && T4(t);
  return {
    c() {
      H && H.c(), e = Z(), n = j("sl-dialog"), i = j("form"), r = j("sl-input"), s = Z(), o = j("br"), l = Z(), a = j("sl-button"), a.textContent = "Save", c = Z(), u = j("sl-dialog"), I && I.c(), f = Z(), z && z.c(), h = Z(), L && L.c(), d = Z(), p = j("hr"), g = Z(), m = j("p"), m.innerHTML = `The editor app <b>Grapher v230203+1</b> was created by
		<a href="https://github.com/nileshtrivedi" target="_blank">@nileshtrivedi</a>
		while being supported by
		<a href="https://foresight.org/tech-tree/" target="_blank">The Foresight Institute</a>
		who is using it for their
		<a href="https://github.com/foresight-org/LongevityTechTree" target="_blank">Nanotech, Neurotech, Healthspan, Space and Intelligent Cooperation
			tech trees</a>.`, _ = Z(), S = j("p"), S.innerHTML = 'The code for this tool is <a href="https://codeberg.org/nilesh/grapher" target="_blank">available as open-source</a>. Bug reports and PRs can be submitted there.', v = Z(), k = j("sl-button"), k.textContent = "Close", C = Z(), A = j("sl-dialog"), w = j("ul"), w.innerHTML = `<li><b>To create a new node</b>: Right-click on empty area and select
			&quot;Create New Node&quot;.</li> 
		<li><b>To create an edge</b>: Select source node by left-click, drag
			from one of the control points: âŠ• and release when on top of target
			node.</li> 
		<li><b>To create both a new node and an edge</b>: Select source-node and
			left-click on any of the control points: âŠ•.</li> 
		<li><b>To create a child node</b>: Right-click on the parent node and
			choose &quot;Create child node&quot;.</li> 
		<li><b>To make one node child of another</b>: Drag it and drop it on
			parent node.</li> 
		<li><b>To delete node</b>: Right-click on the node and choose &quot;Delete&quot;
			either &quot;including dependents&quot; or &quot;leaving orphans&quot;.</li> 
		<li><b>To detach child node from its parent</b>: Right-click on the
			child node and choose &quot;Detach _ from _&quot;.</li> 
		<li><b>To add a comment on the graph</b>: Right-click on empty area and
			choose &quot;Create New Text Note&quot;.</li>`, M = Z(), N = j("sl-button"), N.textContent = "Close", oe(r, "name", "displayname"), oe(r, "label", "Change your display name"), oe(r, "placeholder", "Pick a recognizable name"), oe(r, "required", ""), oe(r, "minlength", 8), oe(r, "maxlength", 20), oe(r, "pattern", "[a-z\\-]+"), oe(r, "help-text", "Only lowercase alphabets and - are allowed"), oe(r, "value", t[2]), oe(a, "type", "submit"), oe(a, "variant", "primary"), oe(n, "open", t[10]), oe(n, "class", "dialog-overview"), Ni(p, "margin", "40px 0"), oe(k, "slot", "footer"), oe(k, "variant", "primary"), oe(u, "open", t[8]), oe(u, "class", "dialog-overview"), oe(N, "slot", "footer"), oe(N, "variant", "primary"), oe(A, "open", t[9]), oe(A, "label", "Help"), oe(A, "class", "dialog-overview");
    },
    m(X, ue) {
      H && H.m(X, ue), U(X, e, ue), U(X, n, ue), E(n, i), E(i, r), E(i, s), E(i, o), E(i, l), E(i, a), U(X, c, ue), U(X, u, ue), I && I.m(u, null), E(u, f), z && z.m(u, null), E(u, h), L && L.m(u, null), E(u, d), E(u, p), E(u, g), E(u, m), E(u, _), E(u, S), E(u, v), E(u, k), U(X, C, ue), U(X, A, ue), E(A, w), E(A, M), E(A, N), T = !0, O || (W = [
        re(loe, "keydown", t[46]),
        re(i, "submit", _r(t[22])),
        re(n, "sl-hide", t[60]),
        re(n, "sl-show", t[61]),
        re(k, "click", t[62]),
        re(u, "sl-hide", t[63]),
        re(u, "sl-show", t[64]),
        re(N, "click", t[65]),
        re(A, "sl-hide", t[66]),
        re(A, "sl-show", t[67])
      ], O = !0);
    },
    p(X, ue) {
      var q, ee, ie;
      X[3] ? H ? (H.p(X, ue), ue[0] & 8 && P(H, 1)) : (H = l4(X), H.c(), P(H, 1), H.m(e.parentNode, e)) : H && (Ae(), x(H, 1, 1, () => {
        H = null;
      }), Me()), (!T || ue[0] & 4) && oe(r, "value", X[2]), (!T || ue[0] & 1024) && oe(n, "open", X[10]), (q = X[3]) != null && q.title ? I ? I.p(X, ue) : (I = M4(X), I.c(), I.m(u, f)) : I && (I.d(1), I = null), (ee = X[3]) != null && ee.description ? z ? z.p(X, ue) : (z = O4(X), z.c(), z.m(u, h)) : z && (z.d(1), z = null), (ie = X[3]) != null && ie.contact ? L ? L.p(X, ue) : (L = T4(X), L.c(), L.m(u, d)) : L && (L.d(1), L = null), (!T || ue[0] & 256) && oe(u, "open", X[8]), (!T || ue[0] & 512) && oe(A, "open", X[9]);
    },
    i(X) {
      T || (P(H), T = !0);
    },
    o(X) {
      x(H), T = !1;
    },
    d(X) {
      H && H.d(X), X && V(e), X && V(n), X && V(c), X && V(u), I && I.d(), z && z.d(), L && L.d(), X && V(C), X && V(A), O = !1, ct(W);
    }
  };
}
const R4 = 5;
function moe() {
  const t = [
    "adorable",
    "clever",
    "elegant",
    "fierce",
    "jaunty",
    "kind",
    "lively",
    "majestic",
    "nimble",
    "old",
    "pretty",
    "quirky",
    "rugged",
    "strong",
    "tough",
    "unique",
    "witty",
    "youthful",
    "zealous"
  ], e = [
    "cat",
    "dog",
    "elephant",
    "fox",
    "giraffe",
    "horse",
    "iguana",
    "jaguar",
    "koala",
    "lion",
    "monkey",
    "newt",
    "octopus",
    "panda",
    "quokka",
    "raccoon",
    "snake",
    "tiger",
    "urial",
    "vulture",
    "walrus",
    "xantus",
    "yak",
    "zebra"
  ], n = t[Math.floor(Math.random() * t.length)], i = e[Math.floor(Math.random() * e.length)];
  return `${n}-${i}`;
}
function boe(t) {
}
function _oe(t) {
  if (!t)
    return Object.entries({});
  let n = t.items.filter((i) => ["node", "edge"].includes(i.kind)).map((i) => i.tags).flat().filter((i, r, s) => s.indexOf(i) === r).reduce(
    (i, r) => {
      let s = r.split(":").length > 1 ? r.split(":")[0] : "ungrouped";
      return i[s] = i[s] ?? [], i[s].push({
        label: r.split(":").reverse()[0],
        value: r
      }), i;
    },
    {}
  );
  return Object.entries(n);
}
function Mm(t, e) {
  let n = document.createElement("a");
  n.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(t)), n.setAttribute("download", e), n.style.display = "none", document.body.appendChild(n), n.click(), document.body.removeChild(n);
}
const P4 = (t) => t.id, I4 = (t) => t.id, D4 = (t) => t.id;
function yoe(t, e, n) {
  let i, r, s, o = ye, l = () => (o(), o = sT(f, (me) => n(19, s = me)), f);
  t.$$.on_destroy.push(() => o());
  let { graphjsonpath: a } = e, { svgForTextBBox: c } = e, { config: u = { mode: "viewonly" } } = e, f, h = localStorage.getItem("username") || moe(), d = !1, p = !1, g = !1, m, _ = { versions: [], current: -1 }, S, v, k = !1, C = {}, A = [], w = null, M = null, N, T, O = [], W;
  function H() {
    N && T && Nr(N).transition().duration(300).call(W.transform, Hd.translate(0, 0).scale(1));
  }
  function I() {
    return u.mode == "editor";
  }
  function z(me) {
    let Le = new FormData(me.target).get("displayname").toString(), gt = s.users[h];
    bg(f, s.users[Le] = { x: gt.x, y: gt.y }, s), bg(f, s.users[h] = null, s), n(2, h = Le), n(10, g = !1);
  }
  or(() => {
    a && fetch(a).then((me) => me.json()).then((me) => {
      if (I()) {
        let Le = localStorage.getItem(a);
        n(3, m = uo(Le ? JSON.parse(Le) : me, null, c));
      } else
        n(3, m = uo(me, null, c));
      D(m);
    }), L();
  });
  function L() {
    window.location !== window.parent.location && n(14, k = !0);
  }
  function K() {
    _.current <= 0 || (n(3, m = structuredClone(_.versions[_.current - 1])), ee(), n(11, _ = {
      versions: _.versions,
      current: _.current - 1
    }));
  }
  function F() {
    _.current >= _.versions.length - 1 || (n(3, m = structuredClone(_.versions[_.current + 1])), ee(), n(11, _ = {
      versions: _.versions,
      current: _.current + 1
    }));
  }
  function D(me) {
    let Le = _.versions.slice(_.versions.length == R4 ? 1 : 0, _.current + 1);
    n(11, _ = {
      versions: [...Le, structuredClone(me)],
      current: Math.min(_.current + 1, R4 - 1)
    });
  }
  function X() {
    n(11, _ = { versions: [], current: -1 });
  }
  function ue() {
    n(3, m.items = [], m), n(16, M = null), ee(), D(m);
  }
  function q(me) {
    AT(M[0], M[1], m, N, T), n(16, M = null), ee(), D(m);
  }
  function ee(me) {
    n(5, N), n(6, T), n(4, A), n(3, m = uo(m, A, c, me)), I() && localStorage.setItem(a, JSON.stringify(m));
  }
  function ie(me) {
    n(15, w = {
      x: me.detail.rawEvent.clientX,
      y: me.detail.rawEvent.clientY
    }), n(16, M = null);
    let Le = N.createSVGPoint();
    Le.x = w.x, Le.y = w.y;
    let gt = Le.matrixTransform(T.getCTM().inverse()), en = { x: gt.x, y: gt.y };
    n(15, w.edge = OT(me.detail.source, en, m), w), ee();
  }
  function ne(me) {
    var Le;
    ["note", "edge"].includes(me.detail.source.kind) || ["note", "edge"].includes((Le = A[0]) == null ? void 0 : Le.kind) ? n(4, A = [me.detail.source]) : me.detail.rawEvent.ctrlKey || me.detail.rawEvent.metaKey ? n(4, A = [.../* @__PURE__ */ new Set([...A, me.detail.source])]) : n(4, A = [me.detail.source]), n(15, w = {
      x: me.detail.rawEvent.clientX,
      y: me.detail.rawEvent.clientY
    }), n(16, M = null);
  }
  function je(me) {
    var gt;
    ["note", "edge"].includes(me.detail.source.kind) || ["note", "edge"].includes((gt = A[0]) == null ? void 0 : gt.kind) ? n(4, A = [me.detail.source]) : me.detail.rawEvent.ctrlKey || me.detail.rawEvent.metaKey ? n(4, A = [.../* @__PURE__ */ new Set([...A, me.detail.source])]) : n(4, A = [me.detail.source]);
    let Le = me.detail.source;
    if (w.edge && Le.kind === "node")
      n(15, w.edge.toId = Le.id, w), delete w.edge.toOrphan;
    else if (w.edge && Le.kind === "edge")
      la(w.edge, m, !1), D(m);
    else if ((Le == null ? void 0 : Le.kind) === "node" && !w.hasOwnProperty("edge")) {
      let en = N.createSVGPoint();
      en.x = w.x, en.y = w.y;
      let bi = en.matrixTransform(T.getCTM().inverse()), Ht = RT(bi, Le, m);
      Ht && Le.parent != Ht.id && !C0(m, Ht).map((kn) => kn.id).includes(Le.id) && I() && (Le.parent = Ht.id, D(m)), Le.id && Ht === void 0 && $();
    }
    n(15, w = null), ee(), ["node", "note"].includes(Le.kind) && bg(f, s.users[h] = { ...Le.pos }, s);
  }
  function Ie(me) {
    if (!I())
      return;
    let Le = me.detail.source, en = (m.theme.badges.indexOf(Le.badge) + 1) % m.theme.badges.length;
    Le.badge = m.theme.badges[en], ee();
  }
  function Xe(me) {
    let Le = me.detail.source;
    Le.kind === "node" && (Le.is_collapsed = !Le.is_collapsed, ee());
  }
  function le(me, Le) {
    me.forEach((gt) => la(gt, m, Le)), D(m), n(4, A = []), ee(), n(16, M = null);
  }
  function Ne(me) {
    if (C = { x: me.clientX, y: me.clientY }, !(!A || !w || !A[0] || !A[0].pos) && me.buttons == 1 && I()) {
      if (w.edge) {
        let Le = N.createSVGPoint();
        Le.x = w.x + 20 * Math.cos(Math.atan2(w.y, w.x)), Le.y = w.y + 20 * Math.sin(Math.atan2(w.y, w.x)) - 20;
        let gt = Le.matrixTransform(T.getCTM().inverse());
        n(15, w.edge.toOrphan = { pos: { x: gt.x, y: gt.y } }, w);
      } else {
        let Le = N.createSVGPoint();
        Le.x = w.x, Le.y = w.y;
        let gt = Le.matrixTransform(T.getCTM().inverse()), en = N.createSVGPoint();
        en.x = C.x, en.y = C.y;
        let bi = en.matrixTransform(T.getCTM().inverse());
        A.forEach((Ht) => Rm(Ht, m, bi.x - gt.x, bi.y - gt.y)), n(
          15,
          w.snap = A.map((Ht) => {
            var lt, wt;
            let kn = ((lt = m.theme.snapdist) == null ? void 0 : lt.x) || 100, we = ((wt = m.theme.snapdist) == null ? void 0 : wt.y) || 100;
            return {
              x: Ht.width / 2 + Math.round((Ht.pos.x - Ht.width / 2) / kn) * kn,
              y: Ht.height / 2 + Math.round((Ht.pos.y - Ht.height / 2) / we) * we,
              width: Ht.width,
              height: Ht.height
            };
          }),
          w
        );
      }
      n(15, w.x = C.x, w), n(15, w.y = C.y, w), ee({ kind: "movingitem", item: A });
    }
  }
  function nt(me) {
    CT(M[0], M[1], m, N, T), D(m), ee(), n(16, M = null);
  }
  function ke(me) {
    ST(M[0], M[1], m, N, T), ee(), n(16, M = null);
  }
  function fe(me) {
    m.contextmenu && n(16, M = [me.clientX, me.clientY]);
  }
  function Pe(me) {
    console.log("handleCreateNode", me.detail), TT(me.detail.from, me.detail.handle, m), D(m), ee();
  }
  function ae(me) {
    A && (me.key === "Backspace" || me.key === "Delete") && (le(A, !1), D(m));
  }
  function $() {
    w != null && w.snap && A.forEach((me, Le) => {
      Rm(me, m, w.snap[Le].x - me.pos.x, w.snap[Le].y - me.pos.y);
    });
  }
  function he(me) {
    w != null && w.edge && la(w.edge, m, !1), $(), n(15, w = null), ee();
  }
  function Ce(me) {
    n(4, A = []), me.buttons === 1 && (n(15, w = { x: me.clientX, y: me.clientY }), n(16, M = null));
  }
  function J(me) {
    let Le = me.detail.source;
    Le && (la(Le, m, !1), D(m)), ee();
  }
  function y(me, Le) {
    MT(me, m, Le, N, T), D(m), ee(), n(16, M = null);
  }
  function R(me) {
    kT(me, m), D(m), ee(), n(16, M = null);
  }
  function B(me) {
    n(3, m.theme = NT[me], m), ee();
  }
  function Q(me) {
    let Le = m.items.find((gt) => gt.kind === "node" && gt.label === me.value);
    Nr(N).transition().duration(1500).call(W.transform, Hd.translate(500, 500).scale(1.8).translate(0 - Le.pos.x, 0 - Le.pos.y));
  }
  function G(me) {
    let Le = me.detail.item.value;
    if (Le.startsWith("theme."))
      B(Le.split(".")[1]);
    else if (Le === "clearlocalchanges")
      localStorage.removeItem(a), fetch(a).then((gt) => gt.json()).then((gt) => {
        n(3, m = uo(gt, null, c)), X(), ee();
      });
    else if (Le === "switchtoeditormode")
      localStorage.getItem(a) != null && n(3, m = uo(JSON.parse(localStorage.getItem(a)), null, c)), n(0, u.mode = "editor", u), l(n(7, f = ooe(window.location.hostname + "." + a)));
    else if (Le.startsWith("export.")) {
      let gt = Le.split(".")[1];
      gt === "svg" ? Mm(N.outerHTML, `${i}.svg`) : gt === "cytoscape" && Mm(DT(m), `${i}-cytoscape.json`);
    } else
      Le === "openfile" || (Le === "savefile" ? Mm(IT(m), `${i}.graph`) : Le === "undo" ? K() : Le === "redo" ? F() : Le === "clear" ? ue() : Le === "changedisplayname" ? n(10, g = !0) : Le === "about" ? n(8, d = !0) : Le === "help" && n(9, p = !0));
  }
  function ce(me) {
    let Le = me.target.files[0], gt = new FileReader();
    gt.readAsText(Le), gt.onload = (en) => {
      n(3, m = uo(JSON.parse(en.target.result), null, c)), ee();
    };
  }
  const De = (me) => {
    (me.metaKey || me.ctrlKey) && me.which === 90 && (me.preventDefault(), (me.shiftKey ? F : K)());
  }, We = (me) => s.users[me] && me != h;
  function pt(me) {
    _t[me ? "unshift" : "push"](() => {
      T = me, n(6, T);
    });
  }
  function ot(me) {
    _t[me ? "unshift" : "push"](() => {
      N = me, n(5, N);
    });
  }
  const Be = (me) => {
    n(3, m = uo(me.detail, A, c)), ee();
  }, ht = (me) => y(me, A[0]), jt = (me) => R(A[0]), _n = (me) => le(A, !0), yn = (me) => le(A, !1), Rt = (me) => ce(me), Ee = (me) => Q(me.target), li = (me) => n(17, O = m.items.filter((Le) => Le.kind === "node" && Le.tags.includes(me.target.value)).map((Le) => Le.id)), an = (me) => n(10, g = !1), Bt = (me) => n(10, g = !0), wn = (me) => n(8, d = !1), Kt = (me) => n(8, d = !1), Zn = (me) => n(8, d = !0), jn = (me) => n(9, p = !1), Wn = (me) => n(9, p = !1), vn = (me) => n(9, p = !0);
  return t.$$set = (me) => {
    "graphjsonpath" in me && n(47, a = me.graphjsonpath), "svgForTextBBox" in me && n(1, c = me.svgForTextBBox), "config" in me && n(0, u = me.config);
  }, t.$$.update = () => {
    t.$$.dirty[0] & 4 && localStorage.setItem("username", h), t.$$.dirty[1] & 65536 && (i = a.split("/").pop().split("#")[0].split("?")[0].replace(/\.graph/, "")), t.$$.dirty[0] & 8 && (window.graph = m), t.$$.dirty[0] & 8 && n(18, r = m ? m.items.filter((me) => me.kind === "node").sort((me, Le) => me.label.localeCompare(Le.label)) : []), t.$$.dirty[0] & 24 && n(12, S = PT(m, A)), t.$$.dirty[0] & 8 && n(13, v = _oe(m)), t.$$.dirty[0] & 96 | t.$$.dirty[1] & 131072 && N && T && (n(48, W = jne().on("zoom", ({ transform: me }) => {
      Nr(T).attr("transform", me);
    })), Nr(N).call(W));
  }, [
    u,
    c,
    h,
    m,
    A,
    N,
    T,
    f,
    d,
    p,
    g,
    _,
    S,
    v,
    k,
    w,
    M,
    O,
    r,
    s,
    H,
    I,
    z,
    ue,
    q,
    ee,
    ie,
    ne,
    je,
    Ie,
    Xe,
    le,
    Ne,
    nt,
    ke,
    fe,
    Pe,
    ae,
    he,
    Ce,
    J,
    y,
    R,
    Q,
    G,
    ce,
    De,
    a,
    W,
    We,
    pt,
    ot,
    Be,
    ht,
    jt,
    _n,
    yn,
    Rt,
    Ee,
    li,
    an,
    Bt,
    wn,
    Kt,
    Zn,
    jn,
    Wn,
    vn
  ];
}
class woe extends Ge {
  constructor(e) {
    super(), Ke(
      this,
      e,
      yoe,
      goe,
      Nt,
      {
        graphjsonpath: 47,
        svgForTextBBox: 1,
        config: 0
      },
      null,
      [-1, -1, -1, -1]
    );
  }
}
const Aoe = new woe({
  target: document.querySelector("#grapheditor"),
  props: {
    graphjsonpath: window.graphjsonpath,
    config: window.overrideConfig || { mode: "viewonly" },
    svgForTextBBox: document.getElementById("textbbox")
  }
});
export {
  Aoe as default
};
